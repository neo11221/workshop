function KS(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const c in s)if(c!=="default"&&!(c in n)){const h=Object.getOwnPropertyDescriptor(s,c);h&&Object.defineProperty(n,c,h.get?h:{enumerable:!0,get:()=>s[c]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const h of c)if(h.type==="childList")for(const p of h.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&s(p)}).observe(document,{childList:!0,subtree:!0});function t(c){const h={};return c.integrity&&(h.integrity=c.integrity),c.referrerPolicy&&(h.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?h.credentials="include":c.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function s(c){if(c.ep)return;c.ep=!0;const h=t(c);fetch(c.href,h)}})();var If=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hm(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var J1={exports:{}},vu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sy;function QS(){if(Sy)return vu;Sy=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,c,h){var p=null;if(h!==void 0&&(p=""+h),c.key!==void 0&&(p=""+c.key),"key"in c){h={};for(var T in c)T!=="key"&&(h[T]=c[T])}else h=c;return c=h.ref,{$$typeof:n,type:s,key:p,ref:c!==void 0?c:null,props:h}}return vu.Fragment=e,vu.jsx=t,vu.jsxs=t,vu}var Cy;function ZS(){return Cy||(Cy=1,J1.exports=QS()),J1.exports}var v=ZS(),$1={exports:{}},Et={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iy;function JS(){if(Iy)return Et;Iy=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),p=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),M=Symbol.iterator;function B(ie){return ie===null||typeof ie!="object"?null:(ie=M&&ie[M]||ie["@@iterator"],typeof ie=="function"?ie:null)}var W={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$=Object.assign,q={};function _e(ie,Ae,Ve){this.props=ie,this.context=Ae,this.refs=q,this.updater=Ve||W}_e.prototype.isReactComponent={},_e.prototype.setState=function(ie,Ae){if(typeof ie!="object"&&typeof ie!="function"&&ie!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ie,Ae,"setState")},_e.prototype.forceUpdate=function(ie){this.updater.enqueueForceUpdate(this,ie,"forceUpdate")};function ae(){}ae.prototype=_e.prototype;function Q(ie,Ae,Ve){this.props=ie,this.context=Ae,this.refs=q,this.updater=Ve||W}var le=Q.prototype=new ae;le.constructor=Q,$(le,_e.prototype),le.isPureReactComponent=!0;var De=Array.isArray;function Oe(){}var j={H:null,A:null,T:null,S:null},z=Object.prototype.hasOwnProperty;function V(ie,Ae,Ve){var je=Ve.ref;return{$$typeof:n,type:ie,key:Ae,ref:je!==void 0?je:null,props:Ve}}function Y(ie,Ae){return V(ie.type,Ae,ie.props)}function Z(ie){return typeof ie=="object"&&ie!==null&&ie.$$typeof===n}function J(ie){var Ae={"=":"=0",":":"=2"};return"$"+ie.replace(/[=:]/g,function(Ve){return Ae[Ve]})}var K=/\/+/g;function $e(ie,Ae){return typeof ie=="object"&&ie!==null&&ie.key!=null?J(""+ie.key):Ae.toString(36)}function fe(ie){switch(ie.status){case"fulfilled":return ie.value;case"rejected":throw ie.reason;default:switch(typeof ie.status=="string"?ie.then(Oe,Oe):(ie.status="pending",ie.then(function(Ae){ie.status==="pending"&&(ie.status="fulfilled",ie.value=Ae)},function(Ae){ie.status==="pending"&&(ie.status="rejected",ie.reason=Ae)})),ie.status){case"fulfilled":return ie.value;case"rejected":throw ie.reason}}throw ie}function me(ie,Ae,Ve,je,rt){var Le=typeof ie;(Le==="undefined"||Le==="boolean")&&(ie=null);var wt=!1;if(ie===null)wt=!0;else switch(Le){case"bigint":case"string":case"number":wt=!0;break;case"object":switch(ie.$$typeof){case n:case e:wt=!0;break;case C:return wt=ie._init,me(wt(ie._payload),Ae,Ve,je,rt)}}if(wt)return rt=rt(ie),wt=je===""?"."+$e(ie,0):je,De(rt)?(Ve="",wt!=null&&(Ve=wt.replace(K,"$&/")+"/"),me(rt,Ae,Ve,"",function(Ur){return Ur})):rt!=null&&(Z(rt)&&(rt=Y(rt,Ve+(rt.key==null||ie&&ie.key===rt.key?"":(""+rt.key).replace(K,"$&/")+"/")+wt)),Ae.push(rt)),1;wt=0;var vt=je===""?".":je+":";if(De(ie))for(var tn=0;tn<ie.length;tn++)je=ie[tn],Le=vt+$e(je,tn),wt+=me(je,Ae,Ve,Le,rt);else if(tn=B(ie),typeof tn=="function")for(ie=tn.call(ie),tn=0;!(je=ie.next()).done;)je=je.value,Le=vt+$e(je,tn++),wt+=me(je,Ae,Ve,Le,rt);else if(Le==="object"){if(typeof ie.then=="function")return me(fe(ie),Ae,Ve,je,rt);throw Ae=String(ie),Error("Objects are not valid as a React child (found: "+(Ae==="[object Object]"?"object with keys {"+Object.keys(ie).join(", ")+"}":Ae)+"). If you meant to render a collection of children, use an array instead.")}return wt}function be(ie,Ae,Ve){if(ie==null)return ie;var je=[],rt=0;return me(ie,je,"","",function(Le){return Ae.call(Ve,Le,rt++)}),je}function Ge(ie){if(ie._status===-1){var Ae=ie._result;Ae=Ae(),Ae.then(function(Ve){(ie._status===0||ie._status===-1)&&(ie._status=1,ie._result=Ve)},function(Ve){(ie._status===0||ie._status===-1)&&(ie._status=2,ie._result=Ve)}),ie._status===-1&&(ie._status=0,ie._result=Ae)}if(ie._status===1)return ie._result.default;throw ie._result}var ct=typeof reportError=="function"?reportError:function(ie){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ie=="object"&&ie!==null&&typeof ie.message=="string"?String(ie.message):String(ie),error:ie});if(!window.dispatchEvent(Ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ie);return}console.error(ie)},xt={map:be,forEach:function(ie,Ae,Ve){be(ie,function(){Ae.apply(this,arguments)},Ve)},count:function(ie){var Ae=0;return be(ie,function(){Ae++}),Ae},toArray:function(ie){return be(ie,function(Ae){return Ae})||[]},only:function(ie){if(!Z(ie))throw Error("React.Children.only expected to receive a single React element child.");return ie}};return Et.Activity=I,Et.Children=xt,Et.Component=_e,Et.Fragment=t,Et.Profiler=c,Et.PureComponent=Q,Et.StrictMode=s,Et.Suspense=w,Et.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,Et.__COMPILER_RUNTIME={__proto__:null,c:function(ie){return j.H.useMemoCache(ie)}},Et.cache=function(ie){return function(){return ie.apply(null,arguments)}},Et.cacheSignal=function(){return null},Et.cloneElement=function(ie,Ae,Ve){if(ie==null)throw Error("The argument must be a React element, but you passed "+ie+".");var je=$({},ie.props),rt=ie.key;if(Ae!=null)for(Le in Ae.key!==void 0&&(rt=""+Ae.key),Ae)!z.call(Ae,Le)||Le==="key"||Le==="__self"||Le==="__source"||Le==="ref"&&Ae.ref===void 0||(je[Le]=Ae[Le]);var Le=arguments.length-2;if(Le===1)je.children=Ve;else if(1<Le){for(var wt=Array(Le),vt=0;vt<Le;vt++)wt[vt]=arguments[vt+2];je.children=wt}return V(ie.type,rt,je)},Et.createContext=function(ie){return ie={$$typeof:p,_currentValue:ie,_currentValue2:ie,_threadCount:0,Provider:null,Consumer:null},ie.Provider=ie,ie.Consumer={$$typeof:h,_context:ie},ie},Et.createElement=function(ie,Ae,Ve){var je,rt={},Le=null;if(Ae!=null)for(je in Ae.key!==void 0&&(Le=""+Ae.key),Ae)z.call(Ae,je)&&je!=="key"&&je!=="__self"&&je!=="__source"&&(rt[je]=Ae[je]);var wt=arguments.length-2;if(wt===1)rt.children=Ve;else if(1<wt){for(var vt=Array(wt),tn=0;tn<wt;tn++)vt[tn]=arguments[tn+2];rt.children=vt}if(ie&&ie.defaultProps)for(je in wt=ie.defaultProps,wt)rt[je]===void 0&&(rt[je]=wt[je]);return V(ie,Le,rt)},Et.createRef=function(){return{current:null}},Et.forwardRef=function(ie){return{$$typeof:T,render:ie}},Et.isValidElement=Z,Et.lazy=function(ie){return{$$typeof:C,_payload:{_status:-1,_result:ie},_init:Ge}},Et.memo=function(ie,Ae){return{$$typeof:E,type:ie,compare:Ae===void 0?null:Ae}},Et.startTransition=function(ie){var Ae=j.T,Ve={};j.T=Ve;try{var je=ie(),rt=j.S;rt!==null&&rt(Ve,je),typeof je=="object"&&je!==null&&typeof je.then=="function"&&je.then(Oe,ct)}catch(Le){ct(Le)}finally{Ae!==null&&Ve.types!==null&&(Ae.types=Ve.types),j.T=Ae}},Et.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},Et.use=function(ie){return j.H.use(ie)},Et.useActionState=function(ie,Ae,Ve){return j.H.useActionState(ie,Ae,Ve)},Et.useCallback=function(ie,Ae){return j.H.useCallback(ie,Ae)},Et.useContext=function(ie){return j.H.useContext(ie)},Et.useDebugValue=function(){},Et.useDeferredValue=function(ie,Ae){return j.H.useDeferredValue(ie,Ae)},Et.useEffect=function(ie,Ae){return j.H.useEffect(ie,Ae)},Et.useEffectEvent=function(ie){return j.H.useEffectEvent(ie)},Et.useId=function(){return j.H.useId()},Et.useImperativeHandle=function(ie,Ae,Ve){return j.H.useImperativeHandle(ie,Ae,Ve)},Et.useInsertionEffect=function(ie,Ae){return j.H.useInsertionEffect(ie,Ae)},Et.useLayoutEffect=function(ie,Ae){return j.H.useLayoutEffect(ie,Ae)},Et.useMemo=function(ie,Ae){return j.H.useMemo(ie,Ae)},Et.useOptimistic=function(ie,Ae){return j.H.useOptimistic(ie,Ae)},Et.useReducer=function(ie,Ae,Ve){return j.H.useReducer(ie,Ae,Ve)},Et.useRef=function(ie){return j.H.useRef(ie)},Et.useState=function(ie){return j.H.useState(ie)},Et.useSyncExternalStore=function(ie,Ae,Ve){return j.H.useSyncExternalStore(ie,Ae,Ve)},Et.useTransition=function(){return j.H.useTransition()},Et.version="19.2.3",Et}var Ny;function fm(){return Ny||(Ny=1,$1.exports=JS()),$1.exports}var ne=fm();const rr=hm(ne);var eg={exports:{}},Su={},tg={exports:{}},ng={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ry;function $S(){return Ry||(Ry=1,(function(n){function e(me,be){var Ge=me.length;me.push(be);e:for(;0<Ge;){var ct=Ge-1>>>1,xt=me[ct];if(0<c(xt,be))me[ct]=be,me[Ge]=xt,Ge=ct;else break e}}function t(me){return me.length===0?null:me[0]}function s(me){if(me.length===0)return null;var be=me[0],Ge=me.pop();if(Ge!==be){me[0]=Ge;e:for(var ct=0,xt=me.length,ie=xt>>>1;ct<ie;){var Ae=2*(ct+1)-1,Ve=me[Ae],je=Ae+1,rt=me[je];if(0>c(Ve,Ge))je<xt&&0>c(rt,Ve)?(me[ct]=rt,me[je]=Ge,ct=je):(me[ct]=Ve,me[Ae]=Ge,ct=Ae);else if(je<xt&&0>c(rt,Ge))me[ct]=rt,me[je]=Ge,ct=je;else break e}}return be}function c(me,be){var Ge=me.sortIndex-be.sortIndex;return Ge!==0?Ge:me.id-be.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;n.unstable_now=function(){return h.now()}}else{var p=Date,T=p.now();n.unstable_now=function(){return p.now()-T}}var w=[],E=[],C=1,I=null,M=3,B=!1,W=!1,$=!1,q=!1,_e=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function le(me){for(var be=t(E);be!==null;){if(be.callback===null)s(E);else if(be.startTime<=me)s(E),be.sortIndex=be.expirationTime,e(w,be);else break;be=t(E)}}function De(me){if($=!1,le(me),!W)if(t(w)!==null)W=!0,Oe||(Oe=!0,J());else{var be=t(E);be!==null&&fe(De,be.startTime-me)}}var Oe=!1,j=-1,z=5,V=-1;function Y(){return q?!0:!(n.unstable_now()-V<z)}function Z(){if(q=!1,Oe){var me=n.unstable_now();V=me;var be=!0;try{e:{W=!1,$&&($=!1,ae(j),j=-1),B=!0;var Ge=M;try{t:{for(le(me),I=t(w);I!==null&&!(I.expirationTime>me&&Y());){var ct=I.callback;if(typeof ct=="function"){I.callback=null,M=I.priorityLevel;var xt=ct(I.expirationTime<=me);if(me=n.unstable_now(),typeof xt=="function"){I.callback=xt,le(me),be=!0;break t}I===t(w)&&s(w),le(me)}else s(w);I=t(w)}if(I!==null)be=!0;else{var ie=t(E);ie!==null&&fe(De,ie.startTime-me),be=!1}}break e}finally{I=null,M=Ge,B=!1}be=void 0}}finally{be?J():Oe=!1}}}var J;if(typeof Q=="function")J=function(){Q(Z)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,$e=K.port2;K.port1.onmessage=Z,J=function(){$e.postMessage(null)}}else J=function(){_e(Z,0)};function fe(me,be){j=_e(function(){me(n.unstable_now())},be)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(me){me.callback=null},n.unstable_forceFrameRate=function(me){0>me||125<me?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<me?Math.floor(1e3/me):5},n.unstable_getCurrentPriorityLevel=function(){return M},n.unstable_next=function(me){switch(M){case 1:case 2:case 3:var be=3;break;default:be=M}var Ge=M;M=be;try{return me()}finally{M=Ge}},n.unstable_requestPaint=function(){q=!0},n.unstable_runWithPriority=function(me,be){switch(me){case 1:case 2:case 3:case 4:case 5:break;default:me=3}var Ge=M;M=me;try{return be()}finally{M=Ge}},n.unstable_scheduleCallback=function(me,be,Ge){var ct=n.unstable_now();switch(typeof Ge=="object"&&Ge!==null?(Ge=Ge.delay,Ge=typeof Ge=="number"&&0<Ge?ct+Ge:ct):Ge=ct,me){case 1:var xt=-1;break;case 2:xt=250;break;case 5:xt=1073741823;break;case 4:xt=1e4;break;default:xt=5e3}return xt=Ge+xt,me={id:C++,callback:be,priorityLevel:me,startTime:Ge,expirationTime:xt,sortIndex:-1},Ge>ct?(me.sortIndex=Ge,e(E,me),t(w)===null&&me===t(E)&&($?(ae(j),j=-1):$=!0,fe(De,Ge-ct))):(me.sortIndex=xt,e(w,me),W||B||(W=!0,Oe||(Oe=!0,J()))),me},n.unstable_shouldYield=Y,n.unstable_wrapCallback=function(me){var be=M;return function(){var Ge=M;M=be;try{return me.apply(this,arguments)}finally{M=Ge}}}})(ng)),ng}var Oy;function eC(){return Oy||(Oy=1,tg.exports=$S()),tg.exports}var rg={exports:{}},ai={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dy;function tC(){if(Dy)return ai;Dy=1;var n=fm();function e(w){var E="https://react.dev/errors/"+w;if(1<arguments.length){E+="?args[]="+encodeURIComponent(arguments[1]);for(var C=2;C<arguments.length;C++)E+="&args[]="+encodeURIComponent(arguments[C])}return"Minified React error #"+w+"; visit "+E+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},c=Symbol.for("react.portal");function h(w,E,C){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:I==null?null:""+I,children:w,containerInfo:E,implementation:C}}var p=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function T(w,E){if(w==="font")return"";if(typeof E=="string")return E==="use-credentials"?E:""}return ai.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,ai.createPortal=function(w,E){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!E||E.nodeType!==1&&E.nodeType!==9&&E.nodeType!==11)throw Error(e(299));return h(w,E,null,C)},ai.flushSync=function(w){var E=p.T,C=s.p;try{if(p.T=null,s.p=2,w)return w()}finally{p.T=E,s.p=C,s.d.f()}},ai.preconnect=function(w,E){typeof w=="string"&&(E?(E=E.crossOrigin,E=typeof E=="string"?E==="use-credentials"?E:"":void 0):E=null,s.d.C(w,E))},ai.prefetchDNS=function(w){typeof w=="string"&&s.d.D(w)},ai.preinit=function(w,E){if(typeof w=="string"&&E&&typeof E.as=="string"){var C=E.as,I=T(C,E.crossOrigin),M=typeof E.integrity=="string"?E.integrity:void 0,B=typeof E.fetchPriority=="string"?E.fetchPriority:void 0;C==="style"?s.d.S(w,typeof E.precedence=="string"?E.precedence:void 0,{crossOrigin:I,integrity:M,fetchPriority:B}):C==="script"&&s.d.X(w,{crossOrigin:I,integrity:M,fetchPriority:B,nonce:typeof E.nonce=="string"?E.nonce:void 0})}},ai.preinitModule=function(w,E){if(typeof w=="string")if(typeof E=="object"&&E!==null){if(E.as==null||E.as==="script"){var C=T(E.as,E.crossOrigin);s.d.M(w,{crossOrigin:C,integrity:typeof E.integrity=="string"?E.integrity:void 0,nonce:typeof E.nonce=="string"?E.nonce:void 0})}}else E==null&&s.d.M(w)},ai.preload=function(w,E){if(typeof w=="string"&&typeof E=="object"&&E!==null&&typeof E.as=="string"){var C=E.as,I=T(C,E.crossOrigin);s.d.L(w,C,{crossOrigin:I,integrity:typeof E.integrity=="string"?E.integrity:void 0,nonce:typeof E.nonce=="string"?E.nonce:void 0,type:typeof E.type=="string"?E.type:void 0,fetchPriority:typeof E.fetchPriority=="string"?E.fetchPriority:void 0,referrerPolicy:typeof E.referrerPolicy=="string"?E.referrerPolicy:void 0,imageSrcSet:typeof E.imageSrcSet=="string"?E.imageSrcSet:void 0,imageSizes:typeof E.imageSizes=="string"?E.imageSizes:void 0,media:typeof E.media=="string"?E.media:void 0})}},ai.preloadModule=function(w,E){if(typeof w=="string")if(E){var C=T(E.as,E.crossOrigin);s.d.m(w,{as:typeof E.as=="string"&&E.as!=="script"?E.as:void 0,crossOrigin:C,integrity:typeof E.integrity=="string"?E.integrity:void 0})}else s.d.m(w)},ai.requestFormReset=function(w){s.d.r(w)},ai.unstable_batchedUpdates=function(w,E){return w(E)},ai.useFormState=function(w,E,C){return p.H.useFormState(w,E,C)},ai.useFormStatus=function(){return p.H.useHostTransitionStatus()},ai.version="19.2.3",ai}var My;function nC(){if(My)return rg.exports;My=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),rg.exports=tC(),rg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Py;function rC(){if(Py)return Su;Py=1;var n=eC(),e=fm(),t=nC();function s(r){var a="https://react.dev/errors/"+r;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function h(r){var a=r,u=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(u=a.return),r=a.return;while(r)}return a.tag===3?u:null}function p(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function T(r){if(r.tag===31){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function w(r){if(h(r)!==r)throw Error(s(188))}function E(r){var a=r.alternate;if(!a){if(a=h(r),a===null)throw Error(s(188));return a!==r?null:r}for(var u=r,g=a;;){var _=u.return;if(_===null)break;var b=_.alternate;if(b===null){if(g=_.return,g!==null){u=g;continue}break}if(_.child===b.child){for(b=_.child;b;){if(b===u)return w(_),r;if(b===g)return w(_),a;b=b.sibling}throw Error(s(188))}if(u.return!==g.return)u=_,g=b;else{for(var O=!1,U=_.child;U;){if(U===u){O=!0,u=_,g=b;break}if(U===g){O=!0,g=_,u=b;break}U=U.sibling}if(!O){for(U=b.child;U;){if(U===u){O=!0,u=b,g=_;break}if(U===g){O=!0,g=b,u=_;break}U=U.sibling}if(!O)throw Error(s(189))}}if(u.alternate!==g)throw Error(s(190))}if(u.tag!==3)throw Error(s(188));return u.stateNode.current===u?r:a}function C(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r;for(r=r.child;r!==null;){if(a=C(r),a!==null)return a;r=r.sibling}return null}var I=Object.assign,M=Symbol.for("react.element"),B=Symbol.for("react.transitional.element"),W=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),_e=Symbol.for("react.profiler"),ae=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),le=Symbol.for("react.forward_ref"),De=Symbol.for("react.suspense"),Oe=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),Y=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function J(r){return r===null||typeof r!="object"?null:(r=Z&&r[Z]||r["@@iterator"],typeof r=="function"?r:null)}var K=Symbol.for("react.client.reference");function $e(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===K?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case $:return"Fragment";case _e:return"Profiler";case q:return"StrictMode";case De:return"Suspense";case Oe:return"SuspenseList";case V:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case W:return"Portal";case Q:return r.displayName||"Context";case ae:return(r._context.displayName||"Context")+".Consumer";case le:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case j:return a=r.displayName||null,a!==null?a:$e(r.type)||"Memo";case z:a=r._payload,r=r._init;try{return $e(r(a))}catch{}}return null}var fe=Array.isArray,me=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ge={pending:!1,data:null,method:null,action:null},ct=[],xt=-1;function ie(r){return{current:r}}function Ae(r){0>xt||(r.current=ct[xt],ct[xt]=null,xt--)}function Ve(r,a){xt++,ct[xt]=r.current,r.current=a}var je=ie(null),rt=ie(null),Le=ie(null),wt=ie(null);function vt(r,a){switch(Ve(Le,a),Ve(rt,r),Ve(je,null),a.nodeType){case 9:case 11:r=(r=a.documentElement)&&(r=r.namespaceURI)?Kx(r):0;break;default:if(r=a.tagName,a=a.namespaceURI)a=Kx(a),r=Qx(a,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}Ae(je),Ve(je,r)}function tn(){Ae(je),Ae(rt),Ae(Le)}function Ur(r){r.memoizedState!==null&&Ve(wt,r);var a=je.current,u=Qx(a,r.type);a!==u&&(Ve(rt,r),Ve(je,u))}function cn(r){rt.current===r&&(Ae(je),Ae(rt)),wt.current===r&&(Ae(wt),wu._currentValue=Ge)}var ui,At;function fr(r){if(ui===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);ui=a&&a[1]||"",At=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ui+r+At}var ir=!1;function Qr(r,a){if(!r||ir)return"";ir=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(a){var Ce=function(){throw Error()};if(Object.defineProperty(Ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ce,[])}catch(we){var pe=we}Reflect.construct(r,[],Ce)}else{try{Ce.call()}catch(we){pe=we}r.call(Ce.prototype)}}else{try{throw Error()}catch(we){pe=we}(Ce=r())&&typeof Ce.catch=="function"&&Ce.catch(function(){})}}catch(we){if(we&&pe&&typeof we.stack=="string")return[we.stack,pe.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=g.DetermineComponentFrameRoot(),O=b[0],U=b[1];if(O&&U){var ee=O.split(`
`),ge=U.split(`
`);for(_=g=0;g<ee.length&&!ee[g].includes("DetermineComponentFrameRoot");)g++;for(;_<ge.length&&!ge[_].includes("DetermineComponentFrameRoot");)_++;if(g===ee.length||_===ge.length)for(g=ee.length-1,_=ge.length-1;1<=g&&0<=_&&ee[g]!==ge[_];)_--;for(;1<=g&&0<=_;g--,_--)if(ee[g]!==ge[_]){if(g!==1||_!==1)do if(g--,_--,0>_||ee[g]!==ge[_]){var Te=`
`+ee[g].replace(" at new "," at ");return r.displayName&&Te.includes("<anonymous>")&&(Te=Te.replace("<anonymous>",r.displayName)),Te}while(1<=g&&0<=_);break}}}finally{ir=!1,Error.prepareStackTrace=u}return(u=r?r.displayName||r.name:"")?fr(u):""}function wn(r,a){switch(r.tag){case 26:case 27:case 5:return fr(r.type);case 16:return fr("Lazy");case 13:return r.child!==a&&a!==null?fr("Suspense Fallback"):fr("Suspense");case 19:return fr("SuspenseList");case 0:case 15:return Qr(r.type,!1);case 11:return Qr(r.type.render,!1);case 1:return Qr(r.type,!0);case 31:return fr("Activity");default:return""}}function qt(r){try{var a="",u=null;do a+=wn(r,u),u=r,r=r.return;while(r);return a}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var Ze=Object.prototype.hasOwnProperty,An=n.unstable_scheduleCallback,He=n.unstable_cancelCallback,As=n.unstable_shouldYield,is=n.unstable_requestPaint,mn=n.unstable_now,hi=n.unstable_getCurrentPriorityLevel,dr=n.unstable_ImmediatePriority,Zr=n.unstable_UserBlockingPriority,sr=n.unstable_NormalPriority,Qn=n.unstable_LowPriority,Ps=n.unstable_IdlePriority,ss=n.log,ra=n.unstable_setDisableYieldValue,Yt=null,Me=null;function Xt(r){if(typeof ss=="function"&&ra(r),Me&&typeof Me.setStrictMode=="function")try{Me.setStrictMode(Yt,r)}catch{}}var at=Math.clz32?Math.clz32:bs,an=Math.log,fi=Math.LN2;function bs(r){return r>>>=0,r===0?32:31-(an(r)/fi|0)|0}var Jr=256,bt=262144,on=4194304;function $r(r){var a=r&42;if(a!==0)return a;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function ei(r,a,u){var g=r.pendingLanes;if(g===0)return 0;var _=0,b=r.suspendedLanes,O=r.pingedLanes;r=r.warmLanes;var U=g&134217727;return U!==0?(g=U&~b,g!==0?_=$r(g):(O&=U,O!==0?_=$r(O):u||(u=U&~r,u!==0&&(_=$r(u))))):(U=g&~b,U!==0?_=$r(U):O!==0?_=$r(O):u||(u=g&~r,u!==0&&(_=$r(u)))),_===0?0:a!==0&&a!==_&&(a&b)===0&&(b=_&-_,u=a&-a,b>=u||b===32&&(u&4194048)!==0)?a:_}function In(r,a){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&a)===0}function Ls(r,a){switch(r){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ln(){var r=on;return on<<=1,(on&62914560)===0&&(on=4194304),r}function gr(r){for(var a=[],u=0;31>u;u++)a.push(r);return a}function di(r,a){r.pendingLanes|=a,a!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Vr(r,a,u,g,_,b){var O=r.pendingLanes;r.pendingLanes=u,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=u,r.entangledLanes&=u,r.errorRecoveryDisabledLanes&=u,r.shellSuspendCounter=0;var U=r.entanglements,ee=r.expirationTimes,ge=r.hiddenUpdates;for(u=O&~u;0<u;){var Te=31-at(u),Ce=1<<Te;U[Te]=0,ee[Te]=-1;var pe=ge[Te];if(pe!==null)for(ge[Te]=null,Te=0;Te<pe.length;Te++){var we=pe[Te];we!==null&&(we.lane&=-536870913)}u&=~Ce}g!==0&&ki(r,g,0),b!==0&&_===0&&r.tag!==0&&(r.suspendedLanes|=b&~(O&~a))}function ki(r,a,u){r.pendingLanes|=a,r.suspendedLanes&=~a;var g=31-at(a);r.entangledLanes|=a,r.entanglements[g]=r.entanglements[g]|1073741824|u&261930}function ti(r,a){var u=r.entangledLanes|=a;for(r=r.entanglements;u;){var g=31-at(u),_=1<<g;_&a|r[g]&a&&(r[g]|=a),u&=~_}}function as(r,a){var u=a&-a;return u=(u&42)!==0?1:kn(u),(u&(r.suspendedLanes|a))!==0?0:u}function kn(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function br(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Tr(){var r=be.p;return r!==0?r:(r=window.event,r===void 0?32:Ey(r.type))}function Fe(r,a){var u=be.p;try{return be.p=r,a()}finally{be.p=u}}var mr=Math.random().toString(36).slice(2),bn="__reactFiber$"+mr,Wt="__reactProps$"+mr,vr="__reactContainer$"+mr,Bi="__reactEvents$"+mr,Ts="__reactListeners$"+mr,jr="__reactHandles$"+mr,ia="__reactResources$"+mr,vi="__reactMarker$"+mr;function Sr(r){delete r[bn],delete r[Wt],delete r[Bi],delete r[Ts],delete r[jr]}function pn(r){var a=r[bn];if(a)return a;for(var u=r.parentNode;u;){if(a=u[vr]||u[bn]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(r=ry(r);r!==null;){if(u=r[bn])return u;r=ry(r)}return a}r=u,u=r.parentNode}return null}function Dt(r){if(r=r[bn]||r[vr]){var a=r.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return r}return null}function Dr(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r.stateNode;throw Error(s(33))}function ar(r){var a=r[ia];return a||(a=r[ia]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Nn(r){r[vi]=!0}var Ie=new Set,sa={};function Kt(r,a){Cr(r,a),Cr(r+"Capture",a)}function Cr(r,a){for(sa[r]=a,r=0;r<a.length;r++)Ie.add(a[r])}var aa=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Mt={},X={};function Ue(r){return Ze.call(X,r)?!0:Ze.call(Mt,r)?!1:aa.test(r)?X[r]=!0:(Mt[r]=!0,!1)}function Ke(r,a,u){if(Ue(a))if(u===null)r.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":r.removeAttribute(a);return;case"boolean":var g=a.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){r.removeAttribute(a);return}}r.setAttribute(a,""+u)}}function St(r,a,u){if(u===null)r.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttribute(a,""+u)}}function Ct(r,a,u,g){if(g===null)r.removeAttribute(u);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(u);return}r.setAttributeNS(a,u,""+g)}}function ft(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Zn(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function oa(r,a,u){var g=Object.getOwnPropertyDescriptor(r.constructor.prototype,a);if(!r.hasOwnProperty(a)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var _=g.get,b=g.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return _.call(this)},set:function(O){u=""+O,b.call(this,O)}}),Object.defineProperty(r,a,{enumerable:g.enumerable}),{getValue:function(){return u},setValue:function(O){u=""+O},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function it(r){if(!r._valueTracker){var a=Zn(r)?"checked":"value";r._valueTracker=oa(r,a,""+r[a])}}function Bn(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var u=a.getValue(),g="";return r&&(g=Zn(r)?r.checked?"true":"false":r.value),r=g,r!==u?(a.setValue(r),!0):!1}function gi(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Hn=/[\n"\\]/g;function It(r){return r.replace(Hn,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Gn(r,a,u,g,_,b,O,U){r.name="",O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?r.type=O:r.removeAttribute("type"),a!=null?O==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+ft(a)):r.value!==""+ft(a)&&(r.value=""+ft(a)):O!=="submit"&&O!=="reset"||r.removeAttribute("value"),a!=null?H(r,O,ft(a)):u!=null?H(r,O,ft(u)):g!=null&&r.removeAttribute("value"),_==null&&b!=null&&(r.defaultChecked=!!b),_!=null&&(r.checked=_&&typeof _!="function"&&typeof _!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?r.name=""+ft(U):r.removeAttribute("name")}function he(r,a,u,g,_,b,O,U){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(r.type=b),a!=null||u!=null){if(!(b!=="submit"&&b!=="reset"||a!=null)){it(r);return}u=u!=null?""+ft(u):"",a=a!=null?""+ft(a):u,U||a===r.value||(r.value=a),r.defaultValue=a}g=g??_,g=typeof g!="function"&&typeof g!="symbol"&&!!g,r.checked=U?r.checked:!!g,r.defaultChecked=!!g,O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(r.name=O),it(r)}function H(r,a,u){a==="number"&&gi(r.ownerDocument)===r||r.defaultValue===""+u||(r.defaultValue=""+u)}function Xe(r,a,u,g){if(r=r.options,a){a={};for(var _=0;_<u.length;_++)a["$"+u[_]]=!0;for(u=0;u<r.length;u++)_=a.hasOwnProperty("$"+r[u].value),r[u].selected!==_&&(r[u].selected=_),_&&g&&(r[u].defaultSelected=!0)}else{for(u=""+ft(u),a=null,_=0;_<r.length;_++){if(r[_].value===u){r[_].selected=!0,g&&(r[_].defaultSelected=!0);return}a!==null||r[_].disabled||(a=r[_])}a!==null&&(a.selected=!0)}}function qn(r,a,u){if(a!=null&&(a=""+ft(a),a!==r.value&&(r.value=a),u==null)){r.defaultValue!==a&&(r.defaultValue=a);return}r.defaultValue=u!=null?""+ft(u):""}function or(r,a,u,g){if(a==null){if(g!=null){if(u!=null)throw Error(s(92));if(fe(g)){if(1<g.length)throw Error(s(93));g=g[0]}u=g}u==null&&(u=""),a=u}u=ft(a),r.defaultValue=u,g=r.textContent,g===u&&g!==""&&g!==null&&(r.value=g),it(r)}function ni(r,a){if(a){var u=r.firstChild;if(u&&u===r.lastChild&&u.nodeType===3){u.nodeValue=a;return}}r.textContent=a}var Ka=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Mr(r,a,u){var g=a.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?g?r.setProperty(a,""):a==="float"?r.cssFloat="":r[a]="":g?r.setProperty(a,u):typeof u!="number"||u===0||Ka.has(a)?a==="float"?r.cssFloat=u:r[a]=(""+u).trim():r[a]=u+"px"}function Je(r,a,u){if(a!=null&&typeof a!="object")throw Error(s(62));if(r=r.style,u!=null){for(var g in u)!u.hasOwnProperty(g)||a!=null&&a.hasOwnProperty(g)||(g.indexOf("--")===0?r.setProperty(g,""):g==="float"?r.cssFloat="":r[g]="");for(var _ in a)g=a[_],a.hasOwnProperty(_)&&u[_]!==g&&Mr(r,_,g)}else for(var b in a)a.hasOwnProperty(b)&&Mr(r,b,a[b])}function un(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ks=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Bs(r){return ks.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function ri(){}var la=null;function Si(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Tn=null,ii=null;function si(r){var a=Dt(r);if(a&&(r=a.stateNode)){var u=r[Wt]||null;e:switch(r=a.stateNode,a.type){case"input":if(Gn(r,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),a=u.name,u.type==="radio"&&a!=null){for(u=r;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+It(""+a)+'"][type="radio"]'),a=0;a<u.length;a++){var g=u[a];if(g!==r&&g.form===r.form){var _=g[Wt]||null;if(!_)throw Error(s(90));Gn(g,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(a=0;a<u.length;a++)g=u[a],g.form===r.form&&Bn(g)}break e;case"textarea":qn(r,u.value,u.defaultValue);break e;case"select":a=u.value,a!=null&&Xe(r,!!u.multiple,a,!1)}}}var et=!1;function Us(r,a,u){if(et)return r(a,u);et=!0;try{var g=r(a);return g}finally{if(et=!1,(Tn!==null||ii!==null)&&(af(),Tn&&(a=Tn,r=ii,ii=Tn=null,si(a),r)))for(a=0;a<r.length;a++)si(r[a])}}function ot(r,a){var u=r.stateNode;if(u===null)return null;var g=u[Wt]||null;if(g===null)return null;u=g[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(r=r.type,g=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!g;break e;default:r=!1}if(r)return null;if(u&&typeof u!="function")throw Error(s(231,a,typeof u));return u}var hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ca=!1;if(hn)try{var nn={};Object.defineProperty(nn,"passive",{get:function(){ca=!0}}),window.addEventListener("test",nn,nn),window.removeEventListener("test",nn,nn)}catch{ca=!1}var Ui=null,Vi=null,ua=null;function vs(){if(ua)return ua;var r,a=Vi,u=a.length,g,_="value"in Ui?Ui.value:Ui.textContent,b=_.length;for(r=0;r<u&&a[r]===_[r];r++);var O=u-r;for(g=1;g<=O&&a[u-g]===_[b-g];g++);return ua=_.slice(r,1<g?1-g:void 0)}function ji(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function mi(){return!0}function Ci(){return!1}function Yn(r){function a(u,g,_,b,O){this._reactName=u,this._targetInst=_,this.type=g,this.nativeEvent=b,this.target=O,this.currentTarget=null;for(var U in r)r.hasOwnProperty(U)&&(u=r[U],this[U]=u?u(b):b[U]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?mi:Ci,this.isPropagationStopped=Ci,this}return I(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=mi)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=mi)},persist:function(){},isPersistent:mi}),a}var pi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rn=Yn(pi),Ss=I({},pi,{view:0,detail:0}),Qa=Yn(Ss),Cs,Za,os,Ja=I({},Ss,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cs,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==os&&(os&&r.type==="mousemove"?(Cs=r.screenX-os.screenX,Za=r.screenY-os.screenY):Za=Cs=0,os=r),Cs)},movementY:function(r){return"movementY"in r?r.movementY:Za}}),Jt=Yn(Ja),Vs=I({},Ja,{dataTransfer:0}),ha=Yn(Vs),Fi=I({},Ss,{relatedTarget:0}),fa=Yn(Fi),xe=I({},pi,{animationName:0,elapsedTime:0,pseudoElement:0}),yt=Yn(xe),Un=I({},pi,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),da=Yn(Un),$o=I({},pi,{data:0}),ls=Yn($o),Ml={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$a={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vn(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=$a[r])?!!a[r]:!1}function cs(){return Vn}var Pt=I({},Ss,{key:function(r){if(r.key){var a=Ml[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=ji(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Pl[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cs,charCode:function(r){return r.type==="keypress"?ji(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ji(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),ga=Yn(Pt),us=I({},Ja,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lt=Yn(us),x=I({},Ss,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cs}),N=Yn(x),D=I({},pi,{propertyName:0,elapsedTime:0,pseudoElement:0}),F=Yn(D),ce=I({},Ja,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Ee=Yn(ce),Be=I({},pi,{newState:0,oldState:0}),gt=Yn(Be),jn=[9,13,27,32],Qt=hn&&"CompositionEvent"in window,vn=null;hn&&"documentMode"in document&&(vn=document.documentMode);var xi=hn&&"TextEvent"in window&&!vn,hs=hn&&(!Qt||vn&&8<vn&&11>=vn),Pr=" ",yi=!1;function ma(r,a){switch(r){case"keyup":return jn.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fs(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var eo=!1;function js(r,a){switch(r){case"compositionend":return fs(a);case"keypress":return a.which!==32?null:(yi=!0,Pr);case"textInput":return r=a.data,r===Pr&&yi?null:r;default:return null}}function Ll(r,a){if(eo)return r==="compositionend"||!Qt&&ma(r,a)?(r=vs(),ua=Vi=Ui=null,eo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return hs&&a.locale!=="ko"?null:a.data;default:return null}}var Ii={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qc(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!Ii[r.type]:a==="textarea"}function zi(r,a,u,g){Tn?ii?ii.push(g):ii=[g]:Tn=g,a=df(a,"onChange"),0<a.length&&(u=new Rn("onChange","change",null,u,g),r.push({event:u,listeners:a}))}var el=null,pa=null;function h0(r){Hx(r,0)}function tl(r){var a=Dr(r);if(Bn(a))return r}function Hi(r,a){if(r==="change")return a}var bh=!1;if(hn){var nl;if(hn){var xa="oninput"in document;if(!xa){var Vt=document.createElement("div");Vt.setAttribute("oninput","return;"),xa=typeof Vt.oninput=="function"}nl=xa}else nl=!1;bh=nl&&(!document.documentMode||9<document.documentMode)}function rl(){el&&(el.detachEvent("onpropertychange",P),pa=el=null)}function P(r){if(r.propertyName==="value"&&tl(pa)){var a=[];zi(a,pa,r,Si(r)),Us(h0,a)}}function i(r,a,u){r==="focusin"?(rl(),el=a,pa=u,el.attachEvent("onpropertychange",P)):r==="focusout"&&rl()}function o(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return tl(pa)}function l(r,a){if(r==="click")return tl(a)}function f(r,a){if(r==="input"||r==="change")return tl(a)}function d(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var m=typeof Object.is=="function"?Object.is:d;function y(r,a){if(m(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var u=Object.keys(r),g=Object.keys(a);if(u.length!==g.length)return!1;for(g=0;g<u.length;g++){var _=u[g];if(!Ze.call(a,_)||!m(r[_],a[_]))return!1}return!0}function A(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function S(r,a){var u=A(r);r=0;for(var g;u;){if(u.nodeType===3){if(g=r+u.textContent.length,r<=a&&g>=a)return{node:u,offset:a-r};r=g}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=A(u)}}function R(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?R(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function L(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var a=gi(r.document);a instanceof r.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)r=a.contentWindow;else break;a=gi(r.document)}return a}function k(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}var G=hn&&"documentMode"in document&&11>=document.documentMode,te=null,re=null,ue=null,ye=!1;function ke(r,a,u){var g=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;ye||te==null||te!==gi(g)||(g=te,"selectionStart"in g&&k(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),ue&&y(ue,g)||(ue=g,g=df(re,"onSelect"),0<g.length&&(a=new Rn("onSelect","select",null,a,u),r.push({event:a,listeners:g}),a.target=te)))}function Pe(r,a){var u={};return u[r.toLowerCase()]=a.toLowerCase(),u["Webkit"+r]="webkit"+a,u["Moz"+r]="moz"+a,u}var Re={animationend:Pe("Animation","AnimationEnd"),animationiteration:Pe("Animation","AnimationIteration"),animationstart:Pe("Animation","AnimationStart"),transitionrun:Pe("Transition","TransitionRun"),transitionstart:Pe("Transition","TransitionStart"),transitioncancel:Pe("Transition","TransitionCancel"),transitionend:Pe("Transition","TransitionEnd")},Rt={},pt={};hn&&(pt=document.createElement("div").style,"AnimationEvent"in window||(delete Re.animationend.animation,delete Re.animationiteration.animation,delete Re.animationstart.animation),"TransitionEvent"in window||delete Re.transitionend.transition);function Jn(r){if(Rt[r])return Rt[r];if(!Re[r])return r;var a=Re[r],u;for(u in a)if(a.hasOwnProperty(u)&&u in pt)return Rt[r]=a[u];return r}var Ni=Jn("animationend"),Fr=Jn("animationiteration"),fn=Jn("animationstart"),Ir=Jn("transitionrun"),Ei=Jn("transitionstart"),to=Jn("transitioncancel"),ya=Jn("transitionend"),Th=new Map,Yc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Yc.push("scrollEnd");function Is(r,a){Th.set(r,a),Kt(a,[r])}var vh=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},ds=[],kl=0,f0=0;function Sh(){for(var r=kl,a=f0=kl=0;a<r;){var u=ds[a];ds[a++]=null;var g=ds[a];ds[a++]=null;var _=ds[a];ds[a++]=null;var b=ds[a];if(ds[a++]=null,g!==null&&_!==null){var O=g.pending;O===null?_.next=_:(_.next=O.next,O.next=_),g.pending=_}b!==0&&Tp(u,_,b)}}function Ch(r,a,u,g){ds[kl++]=r,ds[kl++]=a,ds[kl++]=u,ds[kl++]=g,f0|=g,r.lanes|=g,r=r.alternate,r!==null&&(r.lanes|=g)}function d0(r,a,u,g){return Ch(r,a,u,g),Ih(r)}function il(r,a){return Ch(r,null,null,a),Ih(r)}function Tp(r,a,u){r.lanes|=u;var g=r.alternate;g!==null&&(g.lanes|=u);for(var _=!1,b=r.return;b!==null;)b.childLanes|=u,g=b.alternate,g!==null&&(g.childLanes|=u),b.tag===22&&(r=b.stateNode,r===null||r._visibility&1||(_=!0)),r=b,b=b.return;return r.tag===3?(b=r.stateNode,_&&a!==null&&(_=31-at(u),r=b.hiddenUpdates,g=r[_],g===null?r[_]=[a]:g.push(a),a.lane=u|536870912),b):null}function Ih(r){if(50<gu)throw gu=0,A1=null,Error(s(185));for(var a=r.return;a!==null;)r=a,a=r.return;return r.tag===3?r.stateNode:null}var Bl={};function Dv(r,a,u,g){this.tag=r,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gi(r,a,u,g){return new Dv(r,a,u,g)}function g0(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Ea(r,a){var u=r.alternate;return u===null?(u=Gi(r.tag,a,r.key,r.mode),u.elementType=r.elementType,u.type=r.type,u.stateNode=r.stateNode,u.alternate=r,r.alternate=u):(u.pendingProps=a,u.type=r.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=r.flags&65011712,u.childLanes=r.childLanes,u.lanes=r.lanes,u.child=r.child,u.memoizedProps=r.memoizedProps,u.memoizedState=r.memoizedState,u.updateQueue=r.updateQueue,a=r.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=r.sibling,u.index=r.index,u.ref=r.ref,u.refCleanup=r.refCleanup,u}function vp(r,a){r.flags&=65011714;var u=r.alternate;return u===null?(r.childLanes=0,r.lanes=a,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=u.childLanes,r.lanes=u.lanes,r.child=u.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=u.memoizedProps,r.memoizedState=u.memoizedState,r.updateQueue=u.updateQueue,r.type=u.type,a=u.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),r}function Nh(r,a,u,g,_,b){var O=0;if(g=r,typeof r=="function")g0(r)&&(O=1);else if(typeof r=="string")O=BS(r,u,je.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case V:return r=Gi(31,u,a,_),r.elementType=V,r.lanes=b,r;case $:return sl(u.children,_,b,a);case q:O=8,_|=24;break;case _e:return r=Gi(12,u,a,_|2),r.elementType=_e,r.lanes=b,r;case De:return r=Gi(13,u,a,_),r.elementType=De,r.lanes=b,r;case Oe:return r=Gi(19,u,a,_),r.elementType=Oe,r.lanes=b,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case Q:O=10;break e;case ae:O=9;break e;case le:O=11;break e;case j:O=14;break e;case z:O=16,g=null;break e}O=29,u=Error(s(130,r===null?"null":typeof r,"")),g=null}return a=Gi(O,u,a,_),a.elementType=r,a.type=g,a.lanes=b,a}function sl(r,a,u,g){return r=Gi(7,r,g,a),r.lanes=u,r}function m0(r,a,u){return r=Gi(6,r,null,a),r.lanes=u,r}function Sp(r){var a=Gi(18,null,null,0);return a.stateNode=r,a}function p0(r,a,u){return a=Gi(4,r.children!==null?r.children:[],r.key,a),a.lanes=u,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}var Cp=new WeakMap;function gs(r,a){if(typeof r=="object"&&r!==null){var u=Cp.get(r);return u!==void 0?u:(a={value:r,source:a,stack:qt(a)},Cp.set(r,a),a)}return{value:r,source:a,stack:qt(a)}}var Ul=[],Vl=0,Rh=null,Xc=0,ms=[],ps=0,no=null,Fs=1,zs="";function _a(r,a){Ul[Vl++]=Xc,Ul[Vl++]=Rh,Rh=r,Xc=a}function Ip(r,a,u){ms[ps++]=Fs,ms[ps++]=zs,ms[ps++]=no,no=r;var g=Fs;r=zs;var _=32-at(g)-1;g&=~(1<<_),u+=1;var b=32-at(a)+_;if(30<b){var O=_-_%5;b=(g&(1<<O)-1).toString(32),g>>=O,_-=O,Fs=1<<32-at(a)+_|u<<_|g,zs=b+r}else Fs=1<<b|u<<_|g,zs=r}function x0(r){r.return!==null&&(_a(r,1),Ip(r,1,0))}function y0(r){for(;r===Rh;)Rh=Ul[--Vl],Ul[Vl]=null,Xc=Ul[--Vl],Ul[Vl]=null;for(;r===no;)no=ms[--ps],ms[ps]=null,zs=ms[--ps],ms[ps]=null,Fs=ms[--ps],ms[ps]=null}function Np(r,a){ms[ps++]=Fs,ms[ps++]=zs,ms[ps++]=no,Fs=a.id,zs=a.overflow,no=r}var zr=null,On=null,Zt=!1,ro=null,xs=!1,E0=Error(s(519));function io(r){var a=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Wc(gs(a,r)),E0}function Rp(r){var a=r.stateNode,u=r.type,g=r.memoizedProps;switch(a[bn]=r,a[Wt]=g,u){case"dialog":Bt("cancel",a),Bt("close",a);break;case"iframe":case"object":case"embed":Bt("load",a);break;case"video":case"audio":for(u=0;u<pu.length;u++)Bt(pu[u],a);break;case"source":Bt("error",a);break;case"img":case"image":case"link":Bt("error",a),Bt("load",a);break;case"details":Bt("toggle",a);break;case"input":Bt("invalid",a),he(a,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":Bt("invalid",a);break;case"textarea":Bt("invalid",a),or(a,g.value,g.defaultValue,g.children)}u=g.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||a.textContent===""+u||g.suppressHydrationWarning===!0||Xx(a.textContent,u)?(g.popover!=null&&(Bt("beforetoggle",a),Bt("toggle",a)),g.onScroll!=null&&Bt("scroll",a),g.onScrollEnd!=null&&Bt("scrollend",a),g.onClick!=null&&(a.onclick=ri),a=!0):a=!1,a||io(r,!0)}function Op(r){for(zr=r.return;zr;)switch(zr.tag){case 5:case 31:case 13:xs=!1;return;case 27:case 3:xs=!0;return;default:zr=zr.return}}function jl(r){if(r!==zr)return!1;if(!Zt)return Op(r),Zt=!0,!1;var a=r.tag,u;if((u=a!==3&&a!==27)&&((u=a===5)&&(u=r.type,u=!(u!=="form"&&u!=="button")||B1(r.type,r.memoizedProps)),u=!u),u&&On&&io(r),Op(r),a===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));On=ny(r)}else if(a===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));On=ny(r)}else a===27?(a=On,Eo(r.type)?(r=z1,z1=null,On=r):On=a):On=zr?Es(r.stateNode.nextSibling):null;return!0}function al(){On=zr=null,Zt=!1}function _0(){var r=ro;return r!==null&&(Mi===null?Mi=r:Mi.push.apply(Mi,r),ro=null),r}function Wc(r){ro===null?ro=[r]:ro.push(r)}var w0=ie(null),ol=null,wa=null;function so(r,a,u){Ve(w0,a._currentValue),a._currentValue=u}function Aa(r){r._currentValue=w0.current,Ae(w0)}function A0(r,a,u){for(;r!==null;){var g=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,g!==null&&(g.childLanes|=a)):g!==null&&(g.childLanes&a)!==a&&(g.childLanes|=a),r===u)break;r=r.return}}function b0(r,a,u,g){var _=r.child;for(_!==null&&(_.return=r);_!==null;){var b=_.dependencies;if(b!==null){var O=_.child;b=b.firstContext;e:for(;b!==null;){var U=b;b=_;for(var ee=0;ee<a.length;ee++)if(U.context===a[ee]){b.lanes|=u,U=b.alternate,U!==null&&(U.lanes|=u),A0(b.return,u,r),g||(O=null);break e}b=U.next}}else if(_.tag===18){if(O=_.return,O===null)throw Error(s(341));O.lanes|=u,b=O.alternate,b!==null&&(b.lanes|=u),A0(O,u,r),O=null}else O=_.child;if(O!==null)O.return=_;else for(O=_;O!==null;){if(O===r){O=null;break}if(_=O.sibling,_!==null){_.return=O.return,O=_;break}O=O.return}_=O}}function Fl(r,a,u,g){r=null;for(var _=a,b=!1;_!==null;){if(!b){if((_.flags&524288)!==0)b=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var O=_.alternate;if(O===null)throw Error(s(387));if(O=O.memoizedProps,O!==null){var U=_.type;m(_.pendingProps.value,O.value)||(r!==null?r.push(U):r=[U])}}else if(_===wt.current){if(O=_.alternate,O===null)throw Error(s(387));O.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(r!==null?r.push(wu):r=[wu])}_=_.return}r!==null&&b0(a,r,u,g),a.flags|=262144}function Oh(r){for(r=r.firstContext;r!==null;){if(!m(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function ll(r){ol=r,wa=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Hr(r){return Dp(ol,r)}function Dh(r,a){return ol===null&&ll(r),Dp(r,a)}function Dp(r,a){var u=a._currentValue;if(a={context:a,memoizedValue:u,next:null},wa===null){if(r===null)throw Error(s(308));wa=a,r.dependencies={lanes:0,firstContext:a},r.flags|=524288}else wa=wa.next=a;return u}var Mv=typeof AbortController<"u"?AbortController:function(){var r=[],a=this.signal={aborted:!1,addEventListener:function(u,g){r.push(g)}};this.abort=function(){a.aborted=!0,r.forEach(function(u){return u()})}},Pv=n.unstable_scheduleCallback,Lv=n.unstable_NormalPriority,pr={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function T0(){return{controller:new Mv,data:new Map,refCount:0}}function Kc(r){r.refCount--,r.refCount===0&&Pv(Lv,function(){r.controller.abort()})}var Qc=null,v0=0,zl=0,Hl=null;function kv(r,a){if(Qc===null){var u=Qc=[];v0=0,zl=I1(),Hl={status:"pending",value:void 0,then:function(g){u.push(g)}}}return v0++,a.then(Mp,Mp),a}function Mp(){if(--v0===0&&Qc!==null){Hl!==null&&(Hl.status="fulfilled");var r=Qc;Qc=null,zl=0,Hl=null;for(var a=0;a<r.length;a++)(0,r[a])()}}function Bv(r,a){var u=[],g={status:"pending",value:null,reason:null,then:function(_){u.push(_)}};return r.then(function(){g.status="fulfilled",g.value=a;for(var _=0;_<u.length;_++)(0,u[_])(a)},function(_){for(g.status="rejected",g.reason=_,_=0;_<u.length;_++)(0,u[_])(void 0)}),g}var Pp=me.S;me.S=function(r,a){xx=mn(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&kv(r,a),Pp!==null&&Pp(r,a)};var cl=ie(null);function S0(){var r=cl.current;return r!==null?r:Sn.pooledCache}function Mh(r,a){a===null?Ve(cl,cl.current):Ve(cl,a.pool)}function Lp(){var r=S0();return r===null?null:{parent:pr._currentValue,pool:r}}var Gl=Error(s(460)),C0=Error(s(474)),Ph=Error(s(542)),Lh={then:function(){}};function kp(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Bp(r,a,u){switch(u=r[u],u===void 0?r.push(a):u!==a&&(a.then(ri,ri),a=u),a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,Vp(r),r;default:if(typeof a.status=="string")a.then(ri,ri);else{if(r=Sn,r!==null&&100<r.shellSuspendCounter)throw Error(s(482));r=a,r.status="pending",r.then(function(g){if(a.status==="pending"){var _=a;_.status="fulfilled",_.value=g}},function(g){if(a.status==="pending"){var _=a;_.status="rejected",_.reason=g}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,Vp(r),r}throw hl=a,Gl}}function ul(r){try{var a=r._init;return a(r._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(hl=u,Gl):u}}var hl=null;function Up(){if(hl===null)throw Error(s(459));var r=hl;return hl=null,r}function Vp(r){if(r===Gl||r===Ph)throw Error(s(483))}var ql=null,Zc=0;function kh(r){var a=Zc;return Zc+=1,ql===null&&(ql=[]),Bp(ql,r,a)}function Jc(r,a){a=a.props.ref,r.ref=a!==void 0?a:null}function Bh(r,a){throw a.$$typeof===M?Error(s(525)):(r=Object.prototype.toString.call(a),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r)))}function jp(r){function a(oe,se){if(r){var de=oe.deletions;de===null?(oe.deletions=[se],oe.flags|=16):de.push(se)}}function u(oe,se){if(!r)return null;for(;se!==null;)a(oe,se),se=se.sibling;return null}function g(oe){for(var se=new Map;oe!==null;)oe.key!==null?se.set(oe.key,oe):se.set(oe.index,oe),oe=oe.sibling;return se}function _(oe,se){return oe=Ea(oe,se),oe.index=0,oe.sibling=null,oe}function b(oe,se,de){return oe.index=de,r?(de=oe.alternate,de!==null?(de=de.index,de<se?(oe.flags|=67108866,se):de):(oe.flags|=67108866,se)):(oe.flags|=1048576,se)}function O(oe){return r&&oe.alternate===null&&(oe.flags|=67108866),oe}function U(oe,se,de,Se){return se===null||se.tag!==6?(se=m0(de,oe.mode,Se),se.return=oe,se):(se=_(se,de),se.return=oe,se)}function ee(oe,se,de,Se){var nt=de.type;return nt===$?Te(oe,se,de.props.children,Se,de.key):se!==null&&(se.elementType===nt||typeof nt=="object"&&nt!==null&&nt.$$typeof===z&&ul(nt)===se.type)?(se=_(se,de.props),Jc(se,de),se.return=oe,se):(se=Nh(de.type,de.key,de.props,null,oe.mode,Se),Jc(se,de),se.return=oe,se)}function ge(oe,se,de,Se){return se===null||se.tag!==4||se.stateNode.containerInfo!==de.containerInfo||se.stateNode.implementation!==de.implementation?(se=p0(de,oe.mode,Se),se.return=oe,se):(se=_(se,de.children||[]),se.return=oe,se)}function Te(oe,se,de,Se,nt){return se===null||se.tag!==7?(se=sl(de,oe.mode,Se,nt),se.return=oe,se):(se=_(se,de),se.return=oe,se)}function Ce(oe,se,de){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return se=m0(""+se,oe.mode,de),se.return=oe,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case B:return de=Nh(se.type,se.key,se.props,null,oe.mode,de),Jc(de,se),de.return=oe,de;case W:return se=p0(se,oe.mode,de),se.return=oe,se;case z:return se=ul(se),Ce(oe,se,de)}if(fe(se)||J(se))return se=sl(se,oe.mode,de,null),se.return=oe,se;if(typeof se.then=="function")return Ce(oe,kh(se),de);if(se.$$typeof===Q)return Ce(oe,Dh(oe,se),de);Bh(oe,se)}return null}function pe(oe,se,de,Se){var nt=se!==null?se.key:null;if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return nt!==null?null:U(oe,se,""+de,Se);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case B:return de.key===nt?ee(oe,se,de,Se):null;case W:return de.key===nt?ge(oe,se,de,Se):null;case z:return de=ul(de),pe(oe,se,de,Se)}if(fe(de)||J(de))return nt!==null?null:Te(oe,se,de,Se,null);if(typeof de.then=="function")return pe(oe,se,kh(de),Se);if(de.$$typeof===Q)return pe(oe,se,Dh(oe,de),Se);Bh(oe,de)}return null}function we(oe,se,de,Se,nt){if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return oe=oe.get(de)||null,U(se,oe,""+Se,nt);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case B:return oe=oe.get(Se.key===null?de:Se.key)||null,ee(se,oe,Se,nt);case W:return oe=oe.get(Se.key===null?de:Se.key)||null,ge(se,oe,Se,nt);case z:return Se=ul(Se),we(oe,se,de,Se,nt)}if(fe(Se)||J(Se))return oe=oe.get(de)||null,Te(se,oe,Se,nt,null);if(typeof Se.then=="function")return we(oe,se,de,kh(Se),nt);if(Se.$$typeof===Q)return we(oe,se,de,Dh(se,Se),nt);Bh(se,Se)}return null}function We(oe,se,de,Se){for(var nt=null,rn=null,Qe=se,Nt=se=0,Ft=null;Qe!==null&&Nt<de.length;Nt++){Qe.index>Nt?(Ft=Qe,Qe=null):Ft=Qe.sibling;var sn=pe(oe,Qe,de[Nt],Se);if(sn===null){Qe===null&&(Qe=Ft);break}r&&Qe&&sn.alternate===null&&a(oe,Qe),se=b(sn,se,Nt),rn===null?nt=sn:rn.sibling=sn,rn=sn,Qe=Ft}if(Nt===de.length)return u(oe,Qe),Zt&&_a(oe,Nt),nt;if(Qe===null){for(;Nt<de.length;Nt++)Qe=Ce(oe,de[Nt],Se),Qe!==null&&(se=b(Qe,se,Nt),rn===null?nt=Qe:rn.sibling=Qe,rn=Qe);return Zt&&_a(oe,Nt),nt}for(Qe=g(Qe);Nt<de.length;Nt++)Ft=we(Qe,oe,Nt,de[Nt],Se),Ft!==null&&(r&&Ft.alternate!==null&&Qe.delete(Ft.key===null?Nt:Ft.key),se=b(Ft,se,Nt),rn===null?nt=Ft:rn.sibling=Ft,rn=Ft);return r&&Qe.forEach(function(To){return a(oe,To)}),Zt&&_a(oe,Nt),nt}function lt(oe,se,de,Se){if(de==null)throw Error(s(151));for(var nt=null,rn=null,Qe=se,Nt=se=0,Ft=null,sn=de.next();Qe!==null&&!sn.done;Nt++,sn=de.next()){Qe.index>Nt?(Ft=Qe,Qe=null):Ft=Qe.sibling;var To=pe(oe,Qe,sn.value,Se);if(To===null){Qe===null&&(Qe=Ft);break}r&&Qe&&To.alternate===null&&a(oe,Qe),se=b(To,se,Nt),rn===null?nt=To:rn.sibling=To,rn=To,Qe=Ft}if(sn.done)return u(oe,Qe),Zt&&_a(oe,Nt),nt;if(Qe===null){for(;!sn.done;Nt++,sn=de.next())sn=Ce(oe,sn.value,Se),sn!==null&&(se=b(sn,se,Nt),rn===null?nt=sn:rn.sibling=sn,rn=sn);return Zt&&_a(oe,Nt),nt}for(Qe=g(Qe);!sn.done;Nt++,sn=de.next())sn=we(Qe,oe,Nt,sn.value,Se),sn!==null&&(r&&sn.alternate!==null&&Qe.delete(sn.key===null?Nt:sn.key),se=b(sn,se,Nt),rn===null?nt=sn:rn.sibling=sn,rn=sn);return r&&Qe.forEach(function(WS){return a(oe,WS)}),Zt&&_a(oe,Nt),nt}function En(oe,se,de,Se){if(typeof de=="object"&&de!==null&&de.type===$&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case B:e:{for(var nt=de.key;se!==null;){if(se.key===nt){if(nt=de.type,nt===$){if(se.tag===7){u(oe,se.sibling),Se=_(se,de.props.children),Se.return=oe,oe=Se;break e}}else if(se.elementType===nt||typeof nt=="object"&&nt!==null&&nt.$$typeof===z&&ul(nt)===se.type){u(oe,se.sibling),Se=_(se,de.props),Jc(Se,de),Se.return=oe,oe=Se;break e}u(oe,se);break}else a(oe,se);se=se.sibling}de.type===$?(Se=sl(de.props.children,oe.mode,Se,de.key),Se.return=oe,oe=Se):(Se=Nh(de.type,de.key,de.props,null,oe.mode,Se),Jc(Se,de),Se.return=oe,oe=Se)}return O(oe);case W:e:{for(nt=de.key;se!==null;){if(se.key===nt)if(se.tag===4&&se.stateNode.containerInfo===de.containerInfo&&se.stateNode.implementation===de.implementation){u(oe,se.sibling),Se=_(se,de.children||[]),Se.return=oe,oe=Se;break e}else{u(oe,se);break}else a(oe,se);se=se.sibling}Se=p0(de,oe.mode,Se),Se.return=oe,oe=Se}return O(oe);case z:return de=ul(de),En(oe,se,de,Se)}if(fe(de))return We(oe,se,de,Se);if(J(de)){if(nt=J(de),typeof nt!="function")throw Error(s(150));return de=nt.call(de),lt(oe,se,de,Se)}if(typeof de.then=="function")return En(oe,se,kh(de),Se);if(de.$$typeof===Q)return En(oe,se,Dh(oe,de),Se);Bh(oe,de)}return typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint"?(de=""+de,se!==null&&se.tag===6?(u(oe,se.sibling),Se=_(se,de),Se.return=oe,oe=Se):(u(oe,se),Se=m0(de,oe.mode,Se),Se.return=oe,oe=Se),O(oe)):u(oe,se)}return function(oe,se,de,Se){try{Zc=0;var nt=En(oe,se,de,Se);return ql=null,nt}catch(Qe){if(Qe===Gl||Qe===Ph)throw Qe;var rn=Gi(29,Qe,null,oe.mode);return rn.lanes=Se,rn.return=oe,rn}finally{}}}var fl=jp(!0),Fp=jp(!1),ao=!1;function I0(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function N0(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function oo(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function lo(r,a,u){var g=r.updateQueue;if(g===null)return null;if(g=g.shared,(ln&2)!==0){var _=g.pending;return _===null?a.next=a:(a.next=_.next,_.next=a),g.pending=a,a=Ih(r),Tp(r,null,u),a}return Ch(r,g,a,u),Ih(r)}function $c(r,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194048)!==0)){var g=a.lanes;g&=r.pendingLanes,u|=g,a.lanes=u,ti(r,u)}}function R0(r,a){var u=r.updateQueue,g=r.alternate;if(g!==null&&(g=g.updateQueue,u===g)){var _=null,b=null;if(u=u.firstBaseUpdate,u!==null){do{var O={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};b===null?_=b=O:b=b.next=O,u=u.next}while(u!==null);b===null?_=b=a:b=b.next=a}else _=b=a;u={baseState:g.baseState,firstBaseUpdate:_,lastBaseUpdate:b,shared:g.shared,callbacks:g.callbacks},r.updateQueue=u;return}r=u.lastBaseUpdate,r===null?u.firstBaseUpdate=a:r.next=a,u.lastBaseUpdate=a}var O0=!1;function eu(){if(O0){var r=Hl;if(r!==null)throw r}}function tu(r,a,u,g){O0=!1;var _=r.updateQueue;ao=!1;var b=_.firstBaseUpdate,O=_.lastBaseUpdate,U=_.shared.pending;if(U!==null){_.shared.pending=null;var ee=U,ge=ee.next;ee.next=null,O===null?b=ge:O.next=ge,O=ee;var Te=r.alternate;Te!==null&&(Te=Te.updateQueue,U=Te.lastBaseUpdate,U!==O&&(U===null?Te.firstBaseUpdate=ge:U.next=ge,Te.lastBaseUpdate=ee))}if(b!==null){var Ce=_.baseState;O=0,Te=ge=ee=null,U=b;do{var pe=U.lane&-536870913,we=pe!==U.lane;if(we?(jt&pe)===pe:(g&pe)===pe){pe!==0&&pe===zl&&(O0=!0),Te!==null&&(Te=Te.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});e:{var We=r,lt=U;pe=a;var En=u;switch(lt.tag){case 1:if(We=lt.payload,typeof We=="function"){Ce=We.call(En,Ce,pe);break e}Ce=We;break e;case 3:We.flags=We.flags&-65537|128;case 0:if(We=lt.payload,pe=typeof We=="function"?We.call(En,Ce,pe):We,pe==null)break e;Ce=I({},Ce,pe);break e;case 2:ao=!0}}pe=U.callback,pe!==null&&(r.flags|=64,we&&(r.flags|=8192),we=_.callbacks,we===null?_.callbacks=[pe]:we.push(pe))}else we={lane:pe,tag:U.tag,payload:U.payload,callback:U.callback,next:null},Te===null?(ge=Te=we,ee=Ce):Te=Te.next=we,O|=pe;if(U=U.next,U===null){if(U=_.shared.pending,U===null)break;we=U,U=we.next,we.next=null,_.lastBaseUpdate=we,_.shared.pending=null}}while(!0);Te===null&&(ee=Ce),_.baseState=ee,_.firstBaseUpdate=ge,_.lastBaseUpdate=Te,b===null&&(_.shared.lanes=0),go|=O,r.lanes=O,r.memoizedState=Ce}}function zp(r,a){if(typeof r!="function")throw Error(s(191,r));r.call(a)}function Hp(r,a){var u=r.callbacks;if(u!==null)for(r.callbacks=null,r=0;r<u.length;r++)zp(u[r],a)}var Yl=ie(null),Uh=ie(0);function Gp(r,a){r=Oa,Ve(Uh,r),Ve(Yl,a),Oa=r|a.baseLanes}function D0(){Ve(Uh,Oa),Ve(Yl,Yl.current)}function M0(){Oa=Uh.current,Ae(Yl),Ae(Uh)}var qi=ie(null),ys=null;function co(r){var a=r.alternate;Ve(lr,lr.current&1),Ve(qi,r),ys===null&&(a===null||Yl.current!==null||a.memoizedState!==null)&&(ys=r)}function P0(r){Ve(lr,lr.current),Ve(qi,r),ys===null&&(ys=r)}function qp(r){r.tag===22?(Ve(lr,lr.current),Ve(qi,r),ys===null&&(ys=r)):uo()}function uo(){Ve(lr,lr.current),Ve(qi,qi.current)}function Yi(r){Ae(qi),ys===r&&(ys=null),Ae(lr)}var lr=ie(0);function Vh(r){for(var a=r;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||j1(u)||F1(u)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var ba=0,Tt=null,xn=null,xr=null,jh=!1,Xl=!1,dl=!1,Fh=0,nu=0,Wl=null,Uv=0;function $n(){throw Error(s(321))}function L0(r,a){if(a===null)return!1;for(var u=0;u<a.length&&u<r.length;u++)if(!m(r[u],a[u]))return!1;return!0}function k0(r,a,u,g,_,b){return ba=b,Tt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,me.H=r===null||r.memoizedState===null?I2:Z0,dl=!1,b=u(g,_),dl=!1,Xl&&(b=Xp(a,u,g,_)),Yp(r),b}function Yp(r){me.H=su;var a=xn!==null&&xn.next!==null;if(ba=0,xr=xn=Tt=null,jh=!1,nu=0,Wl=null,a)throw Error(s(300));r===null||yr||(r=r.dependencies,r!==null&&Oh(r)&&(yr=!0))}function Xp(r,a,u,g){Tt=r;var _=0;do{if(Xl&&(Wl=null),nu=0,Xl=!1,25<=_)throw Error(s(301));if(_+=1,xr=xn=null,r.updateQueue!=null){var b=r.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}me.H=N2,b=a(u,g)}while(Xl);return b}function Vv(){var r=me.H,a=r.useState()[0];return a=typeof a.then=="function"?ru(a):a,r=r.useState()[0],(xn!==null?xn.memoizedState:null)!==r&&(Tt.flags|=1024),a}function B0(){var r=Fh!==0;return Fh=0,r}function U0(r,a,u){a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~u}function V0(r){if(jh){for(r=r.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}jh=!1}ba=0,xr=xn=Tt=null,Xl=!1,nu=Fh=0,Wl=null}function _i(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xr===null?Tt.memoizedState=xr=r:xr=xr.next=r,xr}function cr(){if(xn===null){var r=Tt.alternate;r=r!==null?r.memoizedState:null}else r=xn.next;var a=xr===null?Tt.memoizedState:xr.next;if(a!==null)xr=a,xn=r;else{if(r===null)throw Tt.alternate===null?Error(s(467)):Error(s(310));xn=r,r={memoizedState:xn.memoizedState,baseState:xn.baseState,baseQueue:xn.baseQueue,queue:xn.queue,next:null},xr===null?Tt.memoizedState=xr=r:xr=xr.next=r}return xr}function zh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ru(r){var a=nu;return nu+=1,Wl===null&&(Wl=[]),r=Bp(Wl,r,a),a=Tt,(xr===null?a.memoizedState:xr.next)===null&&(a=a.alternate,me.H=a===null||a.memoizedState===null?I2:Z0),r}function Hh(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return ru(r);if(r.$$typeof===Q)return Hr(r)}throw Error(s(438,String(r)))}function j0(r){var a=null,u=Tt.updateQueue;if(u!==null&&(a=u.memoCache),a==null){var g=Tt.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(a={data:g.data.map(function(_){return _.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),u===null&&(u=zh(),Tt.updateQueue=u),u.memoCache=a,u=a.data[a.index],u===void 0)for(u=a.data[a.index]=Array(r),g=0;g<r;g++)u[g]=Y;return a.index++,u}function Ta(r,a){return typeof a=="function"?a(r):a}function Gh(r){var a=cr();return F0(a,xn,r)}function F0(r,a,u){var g=r.queue;if(g===null)throw Error(s(311));g.lastRenderedReducer=u;var _=r.baseQueue,b=g.pending;if(b!==null){if(_!==null){var O=_.next;_.next=b.next,b.next=O}a.baseQueue=_=b,g.pending=null}if(b=r.baseState,_===null)r.memoizedState=b;else{a=_.next;var U=O=null,ee=null,ge=a,Te=!1;do{var Ce=ge.lane&-536870913;if(Ce!==ge.lane?(jt&Ce)===Ce:(ba&Ce)===Ce){var pe=ge.revertLane;if(pe===0)ee!==null&&(ee=ee.next={lane:0,revertLane:0,gesture:null,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null}),Ce===zl&&(Te=!0);else if((ba&pe)===pe){ge=ge.next,pe===zl&&(Te=!0);continue}else Ce={lane:0,revertLane:ge.revertLane,gesture:null,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},ee===null?(U=ee=Ce,O=b):ee=ee.next=Ce,Tt.lanes|=pe,go|=pe;Ce=ge.action,dl&&u(b,Ce),b=ge.hasEagerState?ge.eagerState:u(b,Ce)}else pe={lane:Ce,revertLane:ge.revertLane,gesture:ge.gesture,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},ee===null?(U=ee=pe,O=b):ee=ee.next=pe,Tt.lanes|=Ce,go|=Ce;ge=ge.next}while(ge!==null&&ge!==a);if(ee===null?O=b:ee.next=U,!m(b,r.memoizedState)&&(yr=!0,Te&&(u=Hl,u!==null)))throw u;r.memoizedState=b,r.baseState=O,r.baseQueue=ee,g.lastRenderedState=b}return _===null&&(g.lanes=0),[r.memoizedState,g.dispatch]}function z0(r){var a=cr(),u=a.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=r;var g=u.dispatch,_=u.pending,b=a.memoizedState;if(_!==null){u.pending=null;var O=_=_.next;do b=r(b,O.action),O=O.next;while(O!==_);m(b,a.memoizedState)||(yr=!0),a.memoizedState=b,a.baseQueue===null&&(a.baseState=b),u.lastRenderedState=b}return[b,g]}function Wp(r,a,u){var g=Tt,_=cr(),b=Zt;if(b){if(u===void 0)throw Error(s(407));u=u()}else u=a();var O=!m((xn||_).memoizedState,u);if(O&&(_.memoizedState=u,yr=!0),_=_.queue,q0(Zp.bind(null,g,_,r),[r]),_.getSnapshot!==a||O||xr!==null&&xr.memoizedState.tag&1){if(g.flags|=2048,Kl(9,{destroy:void 0},Qp.bind(null,g,_,u,a),null),Sn===null)throw Error(s(349));b||(ba&127)!==0||Kp(g,a,u)}return u}function Kp(r,a,u){r.flags|=16384,r={getSnapshot:a,value:u},a=Tt.updateQueue,a===null?(a=zh(),Tt.updateQueue=a,a.stores=[r]):(u=a.stores,u===null?a.stores=[r]:u.push(r))}function Qp(r,a,u,g){a.value=u,a.getSnapshot=g,Jp(a)&&$p(r)}function Zp(r,a,u){return u(function(){Jp(a)&&$p(r)})}function Jp(r){var a=r.getSnapshot;r=r.value;try{var u=a();return!m(r,u)}catch{return!0}}function $p(r){var a=il(r,2);a!==null&&Pi(a,r,2)}function H0(r){var a=_i();if(typeof r=="function"){var u=r;if(r=u(),dl){Xt(!0);try{u()}finally{Xt(!1)}}}return a.memoizedState=a.baseState=r,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ta,lastRenderedState:r},a}function e2(r,a,u,g){return r.baseState=u,F0(r,xn,typeof g=="function"?g:Ta)}function jv(r,a,u,g,_){if(Xh(r))throw Error(s(485));if(r=a.action,r!==null){var b={payload:_,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(O){b.listeners.push(O)}};me.T!==null?u(!0):b.isTransition=!1,g(b),u=a.pending,u===null?(b.next=a.pending=b,t2(a,b)):(b.next=u.next,a.pending=u.next=b)}}function t2(r,a){var u=a.action,g=a.payload,_=r.state;if(a.isTransition){var b=me.T,O={};me.T=O;try{var U=u(_,g),ee=me.S;ee!==null&&ee(O,U),n2(r,a,U)}catch(ge){G0(r,a,ge)}finally{b!==null&&O.types!==null&&(b.types=O.types),me.T=b}}else try{b=u(_,g),n2(r,a,b)}catch(ge){G0(r,a,ge)}}function n2(r,a,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(g){r2(r,a,g)},function(g){return G0(r,a,g)}):r2(r,a,u)}function r2(r,a,u){a.status="fulfilled",a.value=u,i2(a),r.state=u,a=r.pending,a!==null&&(u=a.next,u===a?r.pending=null:(u=u.next,a.next=u,t2(r,u)))}function G0(r,a,u){var g=r.pending;if(r.pending=null,g!==null){g=g.next;do a.status="rejected",a.reason=u,i2(a),a=a.next;while(a!==g)}r.action=null}function i2(r){r=r.listeners;for(var a=0;a<r.length;a++)(0,r[a])()}function s2(r,a){return a}function a2(r,a){if(Zt){var u=Sn.formState;if(u!==null){e:{var g=Tt;if(Zt){if(On){t:{for(var _=On,b=xs;_.nodeType!==8;){if(!b){_=null;break t}if(_=Es(_.nextSibling),_===null){_=null;break t}}b=_.data,_=b==="F!"||b==="F"?_:null}if(_){On=Es(_.nextSibling),g=_.data==="F!";break e}}io(g)}g=!1}g&&(a=u[0])}}return u=_i(),u.memoizedState=u.baseState=a,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s2,lastRenderedState:a},u.queue=g,u=v2.bind(null,Tt,g),g.dispatch=u,g=H0(!1),b=Q0.bind(null,Tt,!1,g.queue),g=_i(),_={state:a,dispatch:null,action:r,pending:null},g.queue=_,u=jv.bind(null,Tt,_,b,u),_.dispatch=u,g.memoizedState=r,[a,u,!1]}function o2(r){var a=cr();return l2(a,xn,r)}function l2(r,a,u){if(a=F0(r,a,s2)[0],r=Gh(Ta)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var g=ru(a)}catch(O){throw O===Gl?Ph:O}else g=a;a=cr();var _=a.queue,b=_.dispatch;return u!==a.memoizedState&&(Tt.flags|=2048,Kl(9,{destroy:void 0},Fv.bind(null,_,u),null)),[g,b,r]}function Fv(r,a){r.action=a}function c2(r){var a=cr(),u=xn;if(u!==null)return l2(a,u,r);cr(),a=a.memoizedState,u=cr();var g=u.queue.dispatch;return u.memoizedState=r,[a,g,!1]}function Kl(r,a,u,g){return r={tag:r,create:u,deps:g,inst:a,next:null},a=Tt.updateQueue,a===null&&(a=zh(),Tt.updateQueue=a),u=a.lastEffect,u===null?a.lastEffect=r.next=r:(g=u.next,u.next=r,r.next=g,a.lastEffect=r),r}function u2(){return cr().memoizedState}function qh(r,a,u,g){var _=_i();Tt.flags|=r,_.memoizedState=Kl(1|a,{destroy:void 0},u,g===void 0?null:g)}function Yh(r,a,u,g){var _=cr();g=g===void 0?null:g;var b=_.memoizedState.inst;xn!==null&&g!==null&&L0(g,xn.memoizedState.deps)?_.memoizedState=Kl(a,b,u,g):(Tt.flags|=r,_.memoizedState=Kl(1|a,b,u,g))}function h2(r,a){qh(8390656,8,r,a)}function q0(r,a){Yh(2048,8,r,a)}function zv(r){Tt.flags|=4;var a=Tt.updateQueue;if(a===null)a=zh(),Tt.updateQueue=a,a.events=[r];else{var u=a.events;u===null?a.events=[r]:u.push(r)}}function f2(r){var a=cr().memoizedState;return zv({ref:a,nextImpl:r}),function(){if((ln&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}function d2(r,a){return Yh(4,2,r,a)}function g2(r,a){return Yh(4,4,r,a)}function m2(r,a){if(typeof a=="function"){r=r();var u=a(r);return function(){typeof u=="function"?u():a(null)}}if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function p2(r,a,u){u=u!=null?u.concat([r]):null,Yh(4,4,m2.bind(null,a,r),u)}function Y0(){}function x2(r,a){var u=cr();a=a===void 0?null:a;var g=u.memoizedState;return a!==null&&L0(a,g[1])?g[0]:(u.memoizedState=[r,a],r)}function y2(r,a){var u=cr();a=a===void 0?null:a;var g=u.memoizedState;if(a!==null&&L0(a,g[1]))return g[0];if(g=r(),dl){Xt(!0);try{r()}finally{Xt(!1)}}return u.memoizedState=[g,a],g}function X0(r,a,u){return u===void 0||(ba&1073741824)!==0&&(jt&261930)===0?r.memoizedState=a:(r.memoizedState=u,r=Ex(),Tt.lanes|=r,go|=r,u)}function E2(r,a,u,g){return m(u,a)?u:Yl.current!==null?(r=X0(r,u,g),m(r,a)||(yr=!0),r):(ba&42)===0||(ba&1073741824)!==0&&(jt&261930)===0?(yr=!0,r.memoizedState=u):(r=Ex(),Tt.lanes|=r,go|=r,a)}function _2(r,a,u,g,_){var b=be.p;be.p=b!==0&&8>b?b:8;var O=me.T,U={};me.T=U,Q0(r,!1,a,u);try{var ee=_(),ge=me.S;if(ge!==null&&ge(U,ee),ee!==null&&typeof ee=="object"&&typeof ee.then=="function"){var Te=Bv(ee,g);iu(r,a,Te,Ki(r))}else iu(r,a,g,Ki(r))}catch(Ce){iu(r,a,{then:function(){},status:"rejected",reason:Ce},Ki())}finally{be.p=b,O!==null&&U.types!==null&&(O.types=U.types),me.T=O}}function Hv(){}function W0(r,a,u,g){if(r.tag!==5)throw Error(s(476));var _=w2(r).queue;_2(r,_,a,Ge,u===null?Hv:function(){return A2(r),u(g)})}function w2(r){var a=r.memoizedState;if(a!==null)return a;a={memoizedState:Ge,baseState:Ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ta,lastRenderedState:Ge},next:null};var u={};return a.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ta,lastRenderedState:u},next:null},r.memoizedState=a,r=r.alternate,r!==null&&(r.memoizedState=a),a}function A2(r){var a=w2(r);a.next===null&&(a=r.alternate.memoizedState),iu(r,a.next.queue,{},Ki())}function K0(){return Hr(wu)}function b2(){return cr().memoizedState}function T2(){return cr().memoizedState}function Gv(r){for(var a=r.return;a!==null;){switch(a.tag){case 24:case 3:var u=Ki();r=oo(u);var g=lo(a,r,u);g!==null&&(Pi(g,a,u),$c(g,a,u)),a={cache:T0()},r.payload=a;return}a=a.return}}function qv(r,a,u){var g=Ki();u={lane:g,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Xh(r)?S2(a,u):(u=d0(r,a,u,g),u!==null&&(Pi(u,r,g),C2(u,a,g)))}function v2(r,a,u){var g=Ki();iu(r,a,u,g)}function iu(r,a,u,g){var _={lane:g,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Xh(r))S2(a,_);else{var b=r.alternate;if(r.lanes===0&&(b===null||b.lanes===0)&&(b=a.lastRenderedReducer,b!==null))try{var O=a.lastRenderedState,U=b(O,u);if(_.hasEagerState=!0,_.eagerState=U,m(U,O))return Ch(r,a,_,0),Sn===null&&Sh(),!1}catch{}finally{}if(u=d0(r,a,_,g),u!==null)return Pi(u,r,g),C2(u,a,g),!0}return!1}function Q0(r,a,u,g){if(g={lane:2,revertLane:I1(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},Xh(r)){if(a)throw Error(s(479))}else a=d0(r,u,g,2),a!==null&&Pi(a,r,2)}function Xh(r){var a=r.alternate;return r===Tt||a!==null&&a===Tt}function S2(r,a){Xl=jh=!0;var u=r.pending;u===null?a.next=a:(a.next=u.next,u.next=a),r.pending=a}function C2(r,a,u){if((u&4194048)!==0){var g=a.lanes;g&=r.pendingLanes,u|=g,a.lanes=u,ti(r,u)}}var su={readContext:Hr,use:Hh,useCallback:$n,useContext:$n,useEffect:$n,useImperativeHandle:$n,useLayoutEffect:$n,useInsertionEffect:$n,useMemo:$n,useReducer:$n,useRef:$n,useState:$n,useDebugValue:$n,useDeferredValue:$n,useTransition:$n,useSyncExternalStore:$n,useId:$n,useHostTransitionStatus:$n,useFormState:$n,useActionState:$n,useOptimistic:$n,useMemoCache:$n,useCacheRefresh:$n};su.useEffectEvent=$n;var I2={readContext:Hr,use:Hh,useCallback:function(r,a){return _i().memoizedState=[r,a===void 0?null:a],r},useContext:Hr,useEffect:h2,useImperativeHandle:function(r,a,u){u=u!=null?u.concat([r]):null,qh(4194308,4,m2.bind(null,a,r),u)},useLayoutEffect:function(r,a){return qh(4194308,4,r,a)},useInsertionEffect:function(r,a){qh(4,2,r,a)},useMemo:function(r,a){var u=_i();a=a===void 0?null:a;var g=r();if(dl){Xt(!0);try{r()}finally{Xt(!1)}}return u.memoizedState=[g,a],g},useReducer:function(r,a,u){var g=_i();if(u!==void 0){var _=u(a);if(dl){Xt(!0);try{u(a)}finally{Xt(!1)}}}else _=a;return g.memoizedState=g.baseState=_,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:_},g.queue=r,r=r.dispatch=qv.bind(null,Tt,r),[g.memoizedState,r]},useRef:function(r){var a=_i();return r={current:r},a.memoizedState=r},useState:function(r){r=H0(r);var a=r.queue,u=v2.bind(null,Tt,a);return a.dispatch=u,[r.memoizedState,u]},useDebugValue:Y0,useDeferredValue:function(r,a){var u=_i();return X0(u,r,a)},useTransition:function(){var r=H0(!1);return r=_2.bind(null,Tt,r.queue,!0,!1),_i().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,a,u){var g=Tt,_=_i();if(Zt){if(u===void 0)throw Error(s(407));u=u()}else{if(u=a(),Sn===null)throw Error(s(349));(jt&127)!==0||Kp(g,a,u)}_.memoizedState=u;var b={value:u,getSnapshot:a};return _.queue=b,h2(Zp.bind(null,g,b,r),[r]),g.flags|=2048,Kl(9,{destroy:void 0},Qp.bind(null,g,b,u,a),null),u},useId:function(){var r=_i(),a=Sn.identifierPrefix;if(Zt){var u=zs,g=Fs;u=(g&~(1<<32-at(g)-1)).toString(32)+u,a="_"+a+"R_"+u,u=Fh++,0<u&&(a+="H"+u.toString(32)),a+="_"}else u=Uv++,a="_"+a+"r_"+u.toString(32)+"_";return r.memoizedState=a},useHostTransitionStatus:K0,useFormState:a2,useActionState:a2,useOptimistic:function(r){var a=_i();a.memoizedState=a.baseState=r;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=u,a=Q0.bind(null,Tt,!0,u),u.dispatch=a,[r,a]},useMemoCache:j0,useCacheRefresh:function(){return _i().memoizedState=Gv.bind(null,Tt)},useEffectEvent:function(r){var a=_i(),u={impl:r};return a.memoizedState=u,function(){if((ln&2)!==0)throw Error(s(440));return u.impl.apply(void 0,arguments)}}},Z0={readContext:Hr,use:Hh,useCallback:x2,useContext:Hr,useEffect:q0,useImperativeHandle:p2,useInsertionEffect:d2,useLayoutEffect:g2,useMemo:y2,useReducer:Gh,useRef:u2,useState:function(){return Gh(Ta)},useDebugValue:Y0,useDeferredValue:function(r,a){var u=cr();return E2(u,xn.memoizedState,r,a)},useTransition:function(){var r=Gh(Ta)[0],a=cr().memoizedState;return[typeof r=="boolean"?r:ru(r),a]},useSyncExternalStore:Wp,useId:b2,useHostTransitionStatus:K0,useFormState:o2,useActionState:o2,useOptimistic:function(r,a){var u=cr();return e2(u,xn,r,a)},useMemoCache:j0,useCacheRefresh:T2};Z0.useEffectEvent=f2;var N2={readContext:Hr,use:Hh,useCallback:x2,useContext:Hr,useEffect:q0,useImperativeHandle:p2,useInsertionEffect:d2,useLayoutEffect:g2,useMemo:y2,useReducer:z0,useRef:u2,useState:function(){return z0(Ta)},useDebugValue:Y0,useDeferredValue:function(r,a){var u=cr();return xn===null?X0(u,r,a):E2(u,xn.memoizedState,r,a)},useTransition:function(){var r=z0(Ta)[0],a=cr().memoizedState;return[typeof r=="boolean"?r:ru(r),a]},useSyncExternalStore:Wp,useId:b2,useHostTransitionStatus:K0,useFormState:c2,useActionState:c2,useOptimistic:function(r,a){var u=cr();return xn!==null?e2(u,xn,r,a):(u.baseState=r,[r,u.queue.dispatch])},useMemoCache:j0,useCacheRefresh:T2};N2.useEffectEvent=f2;function J0(r,a,u,g){a=r.memoizedState,u=u(g,a),u=u==null?a:I({},a,u),r.memoizedState=u,r.lanes===0&&(r.updateQueue.baseState=u)}var $0={enqueueSetState:function(r,a,u){r=r._reactInternals;var g=Ki(),_=oo(g);_.payload=a,u!=null&&(_.callback=u),a=lo(r,_,g),a!==null&&(Pi(a,r,g),$c(a,r,g))},enqueueReplaceState:function(r,a,u){r=r._reactInternals;var g=Ki(),_=oo(g);_.tag=1,_.payload=a,u!=null&&(_.callback=u),a=lo(r,_,g),a!==null&&(Pi(a,r,g),$c(a,r,g))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var u=Ki(),g=oo(u);g.tag=2,a!=null&&(g.callback=a),a=lo(r,g,u),a!==null&&(Pi(a,r,u),$c(a,r,u))}};function R2(r,a,u,g,_,b,O){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(g,b,O):a.prototype&&a.prototype.isPureReactComponent?!y(u,g)||!y(_,b):!0}function O2(r,a,u,g){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,g),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,g),a.state!==r&&$0.enqueueReplaceState(a,a.state,null)}function gl(r,a){var u=a;if("ref"in a){u={};for(var g in a)g!=="ref"&&(u[g]=a[g])}if(r=r.defaultProps){u===a&&(u=I({},u));for(var _ in r)u[_]===void 0&&(u[_]=r[_])}return u}function D2(r){vh(r)}function M2(r){console.error(r)}function P2(r){vh(r)}function Wh(r,a){try{var u=r.onUncaughtError;u(a.value,{componentStack:a.stack})}catch(g){setTimeout(function(){throw g})}}function L2(r,a,u){try{var g=r.onCaughtError;g(u.value,{componentStack:u.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function e1(r,a,u){return u=oo(u),u.tag=3,u.payload={element:null},u.callback=function(){Wh(r,a)},u}function k2(r){return r=oo(r),r.tag=3,r}function B2(r,a,u,g){var _=u.type.getDerivedStateFromError;if(typeof _=="function"){var b=g.value;r.payload=function(){return _(b)},r.callback=function(){L2(a,u,g)}}var O=u.stateNode;O!==null&&typeof O.componentDidCatch=="function"&&(r.callback=function(){L2(a,u,g),typeof _!="function"&&(mo===null?mo=new Set([this]):mo.add(this));var U=g.stack;this.componentDidCatch(g.value,{componentStack:U!==null?U:""})})}function Yv(r,a,u,g,_){if(u.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(a=u.alternate,a!==null&&Fl(a,u,_,!0),u=qi.current,u!==null){switch(u.tag){case 31:case 13:return ys===null?of():u.alternate===null&&er===0&&(er=3),u.flags&=-257,u.flags|=65536,u.lanes=_,g===Lh?u.flags|=16384:(a=u.updateQueue,a===null?u.updateQueue=new Set([g]):a.add(g),v1(r,g,_)),!1;case 22:return u.flags|=65536,g===Lh?u.flags|=16384:(a=u.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([g])},u.updateQueue=a):(u=a.retryQueue,u===null?a.retryQueue=new Set([g]):u.add(g)),v1(r,g,_)),!1}throw Error(s(435,u.tag))}return v1(r,g,_),of(),!1}if(Zt)return a=qi.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=_,g!==E0&&(r=Error(s(422),{cause:g}),Wc(gs(r,u)))):(g!==E0&&(a=Error(s(423),{cause:g}),Wc(gs(a,u))),r=r.current.alternate,r.flags|=65536,_&=-_,r.lanes|=_,g=gs(g,u),_=e1(r.stateNode,g,_),R0(r,_),er!==4&&(er=2)),!1;var b=Error(s(520),{cause:g});if(b=gs(b,u),du===null?du=[b]:du.push(b),er!==4&&(er=2),a===null)return!0;g=gs(g,u),u=a;do{switch(u.tag){case 3:return u.flags|=65536,r=_&-_,u.lanes|=r,r=e1(u.stateNode,g,r),R0(u,r),!1;case 1:if(a=u.type,b=u.stateNode,(u.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(mo===null||!mo.has(b))))return u.flags|=65536,_&=-_,u.lanes|=_,_=k2(_),B2(_,r,u,g),R0(u,_),!1}u=u.return}while(u!==null);return!1}var t1=Error(s(461)),yr=!1;function Gr(r,a,u,g){a.child=r===null?Fp(a,null,u,g):fl(a,r.child,u,g)}function U2(r,a,u,g,_){u=u.render;var b=a.ref;if("ref"in g){var O={};for(var U in g)U!=="ref"&&(O[U]=g[U])}else O=g;return ll(a),g=k0(r,a,u,O,b,_),U=B0(),r!==null&&!yr?(U0(r,a,_),va(r,a,_)):(Zt&&U&&x0(a),a.flags|=1,Gr(r,a,g,_),a.child)}function V2(r,a,u,g,_){if(r===null){var b=u.type;return typeof b=="function"&&!g0(b)&&b.defaultProps===void 0&&u.compare===null?(a.tag=15,a.type=b,j2(r,a,b,g,_)):(r=Nh(u.type,null,g,a,a.mode,_),r.ref=a.ref,r.return=a,a.child=r)}if(b=r.child,!c1(r,_)){var O=b.memoizedProps;if(u=u.compare,u=u!==null?u:y,u(O,g)&&r.ref===a.ref)return va(r,a,_)}return a.flags|=1,r=Ea(b,g),r.ref=a.ref,r.return=a,a.child=r}function j2(r,a,u,g,_){if(r!==null){var b=r.memoizedProps;if(y(b,g)&&r.ref===a.ref)if(yr=!1,a.pendingProps=g=b,c1(r,_))(r.flags&131072)!==0&&(yr=!0);else return a.lanes=r.lanes,va(r,a,_)}return n1(r,a,u,g,_)}function F2(r,a,u,g){var _=g.children,b=r!==null?r.memoizedState:null;if(r===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((a.flags&128)!==0){if(b=b!==null?b.baseLanes|u:u,r!==null){for(g=a.child=r.child,_=0;g!==null;)_=_|g.lanes|g.childLanes,g=g.sibling;g=_&~b}else g=0,a.child=null;return z2(r,a,b,u,g)}if((u&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},r!==null&&Mh(a,b!==null?b.cachePool:null),b!==null?Gp(a,b):D0(),qp(a);else return g=a.lanes=536870912,z2(r,a,b!==null?b.baseLanes|u:u,u,g)}else b!==null?(Mh(a,b.cachePool),Gp(a,b),uo(),a.memoizedState=null):(r!==null&&Mh(a,null),D0(),uo());return Gr(r,a,_,u),a.child}function au(r,a){return r!==null&&r.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function z2(r,a,u,g,_){var b=S0();return b=b===null?null:{parent:pr._currentValue,pool:b},a.memoizedState={baseLanes:u,cachePool:b},r!==null&&Mh(a,null),D0(),qp(a),r!==null&&Fl(r,a,g,!0),a.childLanes=_,null}function Kh(r,a){return a=Zh({mode:a.mode,children:a.children},r.mode),a.ref=r.ref,r.child=a,a.return=r,a}function H2(r,a,u){return fl(a,r.child,null,u),r=Kh(a,a.pendingProps),r.flags|=2,Yi(a),a.memoizedState=null,r}function Xv(r,a,u){var g=a.pendingProps,_=(a.flags&128)!==0;if(a.flags&=-129,r===null){if(Zt){if(g.mode==="hidden")return r=Kh(a,g),a.lanes=536870912,au(null,r);if(P0(a),(r=On)?(r=ty(r,xs),r=r!==null&&r.data==="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:no!==null?{id:Fs,overflow:zs}:null,retryLane:536870912,hydrationErrors:null},u=Sp(r),u.return=a,a.child=u,zr=a,On=null)):r=null,r===null)throw io(a);return a.lanes=536870912,null}return Kh(a,g)}var b=r.memoizedState;if(b!==null){var O=b.dehydrated;if(P0(a),_)if(a.flags&256)a.flags&=-257,a=H2(r,a,u);else if(a.memoizedState!==null)a.child=r.child,a.flags|=128,a=null;else throw Error(s(558));else if(yr||Fl(r,a,u,!1),_=(u&r.childLanes)!==0,yr||_){if(g=Sn,g!==null&&(O=as(g,u),O!==0&&O!==b.retryLane))throw b.retryLane=O,il(r,O),Pi(g,r,O),t1;of(),a=H2(r,a,u)}else r=b.treeContext,On=Es(O.nextSibling),zr=a,Zt=!0,ro=null,xs=!1,r!==null&&Np(a,r),a=Kh(a,g),a.flags|=4096;return a}return r=Ea(r.child,{mode:g.mode,children:g.children}),r.ref=a.ref,a.child=r,r.return=a,r}function Qh(r,a){var u=a.ref;if(u===null)r!==null&&r.ref!==null&&(a.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(s(284));(r===null||r.ref!==u)&&(a.flags|=4194816)}}function n1(r,a,u,g,_){return ll(a),u=k0(r,a,u,g,void 0,_),g=B0(),r!==null&&!yr?(U0(r,a,_),va(r,a,_)):(Zt&&g&&x0(a),a.flags|=1,Gr(r,a,u,_),a.child)}function G2(r,a,u,g,_,b){return ll(a),a.updateQueue=null,u=Xp(a,g,u,_),Yp(r),g=B0(),r!==null&&!yr?(U0(r,a,b),va(r,a,b)):(Zt&&g&&x0(a),a.flags|=1,Gr(r,a,u,b),a.child)}function q2(r,a,u,g,_){if(ll(a),a.stateNode===null){var b=Bl,O=u.contextType;typeof O=="object"&&O!==null&&(b=Hr(O)),b=new u(g,b),a.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=$0,a.stateNode=b,b._reactInternals=a,b=a.stateNode,b.props=g,b.state=a.memoizedState,b.refs={},I0(a),O=u.contextType,b.context=typeof O=="object"&&O!==null?Hr(O):Bl,b.state=a.memoizedState,O=u.getDerivedStateFromProps,typeof O=="function"&&(J0(a,u,O,g),b.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(O=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),O!==b.state&&$0.enqueueReplaceState(b,b.state,null),tu(a,g,b,_),eu(),b.state=a.memoizedState),typeof b.componentDidMount=="function"&&(a.flags|=4194308),g=!0}else if(r===null){b=a.stateNode;var U=a.memoizedProps,ee=gl(u,U);b.props=ee;var ge=b.context,Te=u.contextType;O=Bl,typeof Te=="object"&&Te!==null&&(O=Hr(Te));var Ce=u.getDerivedStateFromProps;Te=typeof Ce=="function"||typeof b.getSnapshotBeforeUpdate=="function",U=a.pendingProps!==U,Te||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(U||ge!==O)&&O2(a,b,g,O),ao=!1;var pe=a.memoizedState;b.state=pe,tu(a,g,b,_),eu(),ge=a.memoizedState,U||pe!==ge||ao?(typeof Ce=="function"&&(J0(a,u,Ce,g),ge=a.memoizedState),(ee=ao||R2(a,u,ee,g,pe,ge,O))?(Te||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(a.flags|=4194308)):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=g,a.memoizedState=ge),b.props=g,b.state=ge,b.context=O,g=ee):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),g=!1)}else{b=a.stateNode,N0(r,a),O=a.memoizedProps,Te=gl(u,O),b.props=Te,Ce=a.pendingProps,pe=b.context,ge=u.contextType,ee=Bl,typeof ge=="object"&&ge!==null&&(ee=Hr(ge)),U=u.getDerivedStateFromProps,(ge=typeof U=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(O!==Ce||pe!==ee)&&O2(a,b,g,ee),ao=!1,pe=a.memoizedState,b.state=pe,tu(a,g,b,_),eu();var we=a.memoizedState;O!==Ce||pe!==we||ao||r!==null&&r.dependencies!==null&&Oh(r.dependencies)?(typeof U=="function"&&(J0(a,u,U,g),we=a.memoizedState),(Te=ao||R2(a,u,Te,g,pe,we,ee)||r!==null&&r.dependencies!==null&&Oh(r.dependencies))?(ge||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(g,we,ee),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(g,we,ee)),typeof b.componentDidUpdate=="function"&&(a.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof b.componentDidUpdate!="function"||O===r.memoizedProps&&pe===r.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||O===r.memoizedProps&&pe===r.memoizedState||(a.flags|=1024),a.memoizedProps=g,a.memoizedState=we),b.props=g,b.state=we,b.context=ee,g=Te):(typeof b.componentDidUpdate!="function"||O===r.memoizedProps&&pe===r.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||O===r.memoizedProps&&pe===r.memoizedState||(a.flags|=1024),g=!1)}return b=g,Qh(r,a),g=(a.flags&128)!==0,b||g?(b=a.stateNode,u=g&&typeof u.getDerivedStateFromError!="function"?null:b.render(),a.flags|=1,r!==null&&g?(a.child=fl(a,r.child,null,_),a.child=fl(a,null,u,_)):Gr(r,a,u,_),a.memoizedState=b.state,r=a.child):r=va(r,a,_),r}function Y2(r,a,u,g){return al(),a.flags|=256,Gr(r,a,u,g),a.child}var r1={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function i1(r){return{baseLanes:r,cachePool:Lp()}}function s1(r,a,u){return r=r!==null?r.childLanes&~u:0,a&&(r|=Wi),r}function X2(r,a,u){var g=a.pendingProps,_=!1,b=(a.flags&128)!==0,O;if((O=b)||(O=r!==null&&r.memoizedState===null?!1:(lr.current&2)!==0),O&&(_=!0,a.flags&=-129),O=(a.flags&32)!==0,a.flags&=-33,r===null){if(Zt){if(_?co(a):uo(),(r=On)?(r=ty(r,xs),r=r!==null&&r.data!=="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:no!==null?{id:Fs,overflow:zs}:null,retryLane:536870912,hydrationErrors:null},u=Sp(r),u.return=a,a.child=u,zr=a,On=null)):r=null,r===null)throw io(a);return F1(r)?a.lanes=32:a.lanes=536870912,null}var U=g.children;return g=g.fallback,_?(uo(),_=a.mode,U=Zh({mode:"hidden",children:U},_),g=sl(g,_,u,null),U.return=a,g.return=a,U.sibling=g,a.child=U,g=a.child,g.memoizedState=i1(u),g.childLanes=s1(r,O,u),a.memoizedState=r1,au(null,g)):(co(a),a1(a,U))}var ee=r.memoizedState;if(ee!==null&&(U=ee.dehydrated,U!==null)){if(b)a.flags&256?(co(a),a.flags&=-257,a=o1(r,a,u)):a.memoizedState!==null?(uo(),a.child=r.child,a.flags|=128,a=null):(uo(),U=g.fallback,_=a.mode,g=Zh({mode:"visible",children:g.children},_),U=sl(U,_,u,null),U.flags|=2,g.return=a,U.return=a,g.sibling=U,a.child=g,fl(a,r.child,null,u),g=a.child,g.memoizedState=i1(u),g.childLanes=s1(r,O,u),a.memoizedState=r1,a=au(null,g));else if(co(a),F1(U)){if(O=U.nextSibling&&U.nextSibling.dataset,O)var ge=O.dgst;O=ge,g=Error(s(419)),g.stack="",g.digest=O,Wc({value:g,source:null,stack:null}),a=o1(r,a,u)}else if(yr||Fl(r,a,u,!1),O=(u&r.childLanes)!==0,yr||O){if(O=Sn,O!==null&&(g=as(O,u),g!==0&&g!==ee.retryLane))throw ee.retryLane=g,il(r,g),Pi(O,r,g),t1;j1(U)||of(),a=o1(r,a,u)}else j1(U)?(a.flags|=192,a.child=r.child,a=null):(r=ee.treeContext,On=Es(U.nextSibling),zr=a,Zt=!0,ro=null,xs=!1,r!==null&&Np(a,r),a=a1(a,g.children),a.flags|=4096);return a}return _?(uo(),U=g.fallback,_=a.mode,ee=r.child,ge=ee.sibling,g=Ea(ee,{mode:"hidden",children:g.children}),g.subtreeFlags=ee.subtreeFlags&65011712,ge!==null?U=Ea(ge,U):(U=sl(U,_,u,null),U.flags|=2),U.return=a,g.return=a,g.sibling=U,a.child=g,au(null,g),g=a.child,U=r.child.memoizedState,U===null?U=i1(u):(_=U.cachePool,_!==null?(ee=pr._currentValue,_=_.parent!==ee?{parent:ee,pool:ee}:_):_=Lp(),U={baseLanes:U.baseLanes|u,cachePool:_}),g.memoizedState=U,g.childLanes=s1(r,O,u),a.memoizedState=r1,au(r.child,g)):(co(a),u=r.child,r=u.sibling,u=Ea(u,{mode:"visible",children:g.children}),u.return=a,u.sibling=null,r!==null&&(O=a.deletions,O===null?(a.deletions=[r],a.flags|=16):O.push(r)),a.child=u,a.memoizedState=null,u)}function a1(r,a){return a=Zh({mode:"visible",children:a},r.mode),a.return=r,r.child=a}function Zh(r,a){return r=Gi(22,r,null,a),r.lanes=0,r}function o1(r,a,u){return fl(a,r.child,null,u),r=a1(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function W2(r,a,u){r.lanes|=a;var g=r.alternate;g!==null&&(g.lanes|=a),A0(r.return,a,u)}function l1(r,a,u,g,_,b){var O=r.memoizedState;O===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:g,tail:u,tailMode:_,treeForkCount:b}:(O.isBackwards=a,O.rendering=null,O.renderingStartTime=0,O.last=g,O.tail=u,O.tailMode=_,O.treeForkCount=b)}function K2(r,a,u){var g=a.pendingProps,_=g.revealOrder,b=g.tail;g=g.children;var O=lr.current,U=(O&2)!==0;if(U?(O=O&1|2,a.flags|=128):O&=1,Ve(lr,O),Gr(r,a,g,u),g=Zt?Xc:0,!U&&r!==null&&(r.flags&128)!==0)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&W2(r,u,a);else if(r.tag===19)W2(r,u,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(_){case"forwards":for(u=a.child,_=null;u!==null;)r=u.alternate,r!==null&&Vh(r)===null&&(_=u),u=u.sibling;u=_,u===null?(_=a.child,a.child=null):(_=u.sibling,u.sibling=null),l1(a,!1,_,u,b,g);break;case"backwards":case"unstable_legacy-backwards":for(u=null,_=a.child,a.child=null;_!==null;){if(r=_.alternate,r!==null&&Vh(r)===null){a.child=_;break}r=_.sibling,_.sibling=u,u=_,_=r}l1(a,!0,u,null,b,g);break;case"together":l1(a,!1,null,null,void 0,g);break;default:a.memoizedState=null}return a.child}function va(r,a,u){if(r!==null&&(a.dependencies=r.dependencies),go|=a.lanes,(u&a.childLanes)===0)if(r!==null){if(Fl(r,a,u,!1),(u&a.childLanes)===0)return null}else return null;if(r!==null&&a.child!==r.child)throw Error(s(153));if(a.child!==null){for(r=a.child,u=Ea(r,r.pendingProps),a.child=u,u.return=a;r.sibling!==null;)r=r.sibling,u=u.sibling=Ea(r,r.pendingProps),u.return=a;u.sibling=null}return a.child}function c1(r,a){return(r.lanes&a)!==0?!0:(r=r.dependencies,!!(r!==null&&Oh(r)))}function Wv(r,a,u){switch(a.tag){case 3:vt(a,a.stateNode.containerInfo),so(a,pr,r.memoizedState.cache),al();break;case 27:case 5:Ur(a);break;case 4:vt(a,a.stateNode.containerInfo);break;case 10:so(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,P0(a),null;break;case 13:var g=a.memoizedState;if(g!==null)return g.dehydrated!==null?(co(a),a.flags|=128,null):(u&a.child.childLanes)!==0?X2(r,a,u):(co(a),r=va(r,a,u),r!==null?r.sibling:null);co(a);break;case 19:var _=(r.flags&128)!==0;if(g=(u&a.childLanes)!==0,g||(Fl(r,a,u,!1),g=(u&a.childLanes)!==0),_){if(g)return K2(r,a,u);a.flags|=128}if(_=a.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),Ve(lr,lr.current),g)break;return null;case 22:return a.lanes=0,F2(r,a,u,a.pendingProps);case 24:so(a,pr,r.memoizedState.cache)}return va(r,a,u)}function Q2(r,a,u){if(r!==null)if(r.memoizedProps!==a.pendingProps)yr=!0;else{if(!c1(r,u)&&(a.flags&128)===0)return yr=!1,Wv(r,a,u);yr=(r.flags&131072)!==0}else yr=!1,Zt&&(a.flags&1048576)!==0&&Ip(a,Xc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var g=a.pendingProps;if(r=ul(a.elementType),a.type=r,typeof r=="function")g0(r)?(g=gl(r,g),a.tag=1,a=q2(null,a,r,g,u)):(a.tag=0,a=n1(null,a,r,g,u));else{if(r!=null){var _=r.$$typeof;if(_===le){a.tag=11,a=U2(null,a,r,g,u);break e}else if(_===j){a.tag=14,a=V2(null,a,r,g,u);break e}}throw a=$e(r)||r,Error(s(306,a,""))}}return a;case 0:return n1(r,a,a.type,a.pendingProps,u);case 1:return g=a.type,_=gl(g,a.pendingProps),q2(r,a,g,_,u);case 3:e:{if(vt(a,a.stateNode.containerInfo),r===null)throw Error(s(387));g=a.pendingProps;var b=a.memoizedState;_=b.element,N0(r,a),tu(a,g,null,u);var O=a.memoizedState;if(g=O.cache,so(a,pr,g),g!==b.cache&&b0(a,[pr],u,!0),eu(),g=O.element,b.isDehydrated)if(b={element:g,isDehydrated:!1,cache:O.cache},a.updateQueue.baseState=b,a.memoizedState=b,a.flags&256){a=Y2(r,a,g,u);break e}else if(g!==_){_=gs(Error(s(424)),a),Wc(_),a=Y2(r,a,g,u);break e}else{switch(r=a.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(On=Es(r.firstChild),zr=a,Zt=!0,ro=null,xs=!0,u=Fp(a,null,g,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(al(),g===_){a=va(r,a,u);break e}Gr(r,a,g,u)}a=a.child}return a;case 26:return Qh(r,a),r===null?(u=oy(a.type,null,a.pendingProps,null))?a.memoizedState=u:Zt||(u=a.type,r=a.pendingProps,g=gf(Le.current).createElement(u),g[bn]=a,g[Wt]=r,qr(g,u,r),Nn(g),a.stateNode=g):a.memoizedState=oy(a.type,r.memoizedProps,a.pendingProps,r.memoizedState),null;case 27:return Ur(a),r===null&&Zt&&(g=a.stateNode=iy(a.type,a.pendingProps,Le.current),zr=a,xs=!0,_=On,Eo(a.type)?(z1=_,On=Es(g.firstChild)):On=_),Gr(r,a,a.pendingProps.children,u),Qh(r,a),r===null&&(a.flags|=4194304),a.child;case 5:return r===null&&Zt&&((_=g=On)&&(g=TS(g,a.type,a.pendingProps,xs),g!==null?(a.stateNode=g,zr=a,On=Es(g.firstChild),xs=!1,_=!0):_=!1),_||io(a)),Ur(a),_=a.type,b=a.pendingProps,O=r!==null?r.memoizedProps:null,g=b.children,B1(_,b)?g=null:O!==null&&B1(_,O)&&(a.flags|=32),a.memoizedState!==null&&(_=k0(r,a,Vv,null,null,u),wu._currentValue=_),Qh(r,a),Gr(r,a,g,u),a.child;case 6:return r===null&&Zt&&((r=u=On)&&(u=vS(u,a.pendingProps,xs),u!==null?(a.stateNode=u,zr=a,On=null,r=!0):r=!1),r||io(a)),null;case 13:return X2(r,a,u);case 4:return vt(a,a.stateNode.containerInfo),g=a.pendingProps,r===null?a.child=fl(a,null,g,u):Gr(r,a,g,u),a.child;case 11:return U2(r,a,a.type,a.pendingProps,u);case 7:return Gr(r,a,a.pendingProps,u),a.child;case 8:return Gr(r,a,a.pendingProps.children,u),a.child;case 12:return Gr(r,a,a.pendingProps.children,u),a.child;case 10:return g=a.pendingProps,so(a,a.type,g.value),Gr(r,a,g.children,u),a.child;case 9:return _=a.type._context,g=a.pendingProps.children,ll(a),_=Hr(_),g=g(_),a.flags|=1,Gr(r,a,g,u),a.child;case 14:return V2(r,a,a.type,a.pendingProps,u);case 15:return j2(r,a,a.type,a.pendingProps,u);case 19:return K2(r,a,u);case 31:return Xv(r,a,u);case 22:return F2(r,a,u,a.pendingProps);case 24:return ll(a),g=Hr(pr),r===null?(_=S0(),_===null&&(_=Sn,b=T0(),_.pooledCache=b,b.refCount++,b!==null&&(_.pooledCacheLanes|=u),_=b),a.memoizedState={parent:g,cache:_},I0(a),so(a,pr,_)):((r.lanes&u)!==0&&(N0(r,a),tu(a,null,null,u),eu()),_=r.memoizedState,b=a.memoizedState,_.parent!==g?(_={parent:g,cache:g},a.memoizedState=_,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=_),so(a,pr,g)):(g=b.cache,so(a,pr,g),g!==_.cache&&b0(a,[pr],u,!0))),Gr(r,a,a.pendingProps.children,u),a.child;case 29:throw a.pendingProps}throw Error(s(156,a.tag))}function Sa(r){r.flags|=4}function u1(r,a,u,g,_){if((a=(r.mode&32)!==0)&&(a=!1),a){if(r.flags|=16777216,(_&335544128)===_)if(r.stateNode.complete)r.flags|=8192;else if(bx())r.flags|=8192;else throw hl=Lh,C0}else r.flags&=-16777217}function Z2(r,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!fy(a))if(bx())r.flags|=8192;else throw hl=Lh,C0}function Jh(r,a){a!==null&&(r.flags|=4),r.flags&16384&&(a=r.tag!==22?Ln():536870912,r.lanes|=a,$l|=a)}function ou(r,a){if(!Zt)switch(r.tailMode){case"hidden":a=r.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?r.tail=null:u.sibling=null;break;case"collapsed":u=r.tail;for(var g=null;u!==null;)u.alternate!==null&&(g=u),u=u.sibling;g===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:g.sibling=null}}function Dn(r){var a=r.alternate!==null&&r.alternate.child===r.child,u=0,g=0;if(a)for(var _=r.child;_!==null;)u|=_.lanes|_.childLanes,g|=_.subtreeFlags&65011712,g|=_.flags&65011712,_.return=r,_=_.sibling;else for(_=r.child;_!==null;)u|=_.lanes|_.childLanes,g|=_.subtreeFlags,g|=_.flags,_.return=r,_=_.sibling;return r.subtreeFlags|=g,r.childLanes=u,a}function Kv(r,a,u){var g=a.pendingProps;switch(y0(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dn(a),null;case 1:return Dn(a),null;case 3:return u=a.stateNode,g=null,r!==null&&(g=r.memoizedState.cache),a.memoizedState.cache!==g&&(a.flags|=2048),Aa(pr),tn(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(r===null||r.child===null)&&(jl(a)?Sa(a):r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,_0())),Dn(a),null;case 26:var _=a.type,b=a.memoizedState;return r===null?(Sa(a),b!==null?(Dn(a),Z2(a,b)):(Dn(a),u1(a,_,null,g,u))):b?b!==r.memoizedState?(Sa(a),Dn(a),Z2(a,b)):(Dn(a),a.flags&=-16777217):(r=r.memoizedProps,r!==g&&Sa(a),Dn(a),u1(a,_,r,g,u)),null;case 27:if(cn(a),u=Le.current,_=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==g&&Sa(a);else{if(!g){if(a.stateNode===null)throw Error(s(166));return Dn(a),null}r=je.current,jl(a)?Rp(a):(r=iy(_,g,u),a.stateNode=r,Sa(a))}return Dn(a),null;case 5:if(cn(a),_=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==g&&Sa(a);else{if(!g){if(a.stateNode===null)throw Error(s(166));return Dn(a),null}if(b=je.current,jl(a))Rp(a);else{var O=gf(Le.current);switch(b){case 1:b=O.createElementNS("http://www.w3.org/2000/svg",_);break;case 2:b=O.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;default:switch(_){case"svg":b=O.createElementNS("http://www.w3.org/2000/svg",_);break;case"math":b=O.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;case"script":b=O.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof g.is=="string"?O.createElement("select",{is:g.is}):O.createElement("select"),g.multiple?b.multiple=!0:g.size&&(b.size=g.size);break;default:b=typeof g.is=="string"?O.createElement(_,{is:g.is}):O.createElement(_)}}b[bn]=a,b[Wt]=g;e:for(O=a.child;O!==null;){if(O.tag===5||O.tag===6)b.appendChild(O.stateNode);else if(O.tag!==4&&O.tag!==27&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===a)break e;for(;O.sibling===null;){if(O.return===null||O.return===a)break e;O=O.return}O.sibling.return=O.return,O=O.sibling}a.stateNode=b;e:switch(qr(b,_,g),_){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&Sa(a)}}return Dn(a),u1(a,a.type,r===null?null:r.memoizedProps,a.pendingProps,u),null;case 6:if(r&&a.stateNode!=null)r.memoizedProps!==g&&Sa(a);else{if(typeof g!="string"&&a.stateNode===null)throw Error(s(166));if(r=Le.current,jl(a)){if(r=a.stateNode,u=a.memoizedProps,g=null,_=zr,_!==null)switch(_.tag){case 27:case 5:g=_.memoizedProps}r[bn]=a,r=!!(r.nodeValue===u||g!==null&&g.suppressHydrationWarning===!0||Xx(r.nodeValue,u)),r||io(a,!0)}else r=gf(r).createTextNode(g),r[bn]=a,a.stateNode=r}return Dn(a),null;case 31:if(u=a.memoizedState,r===null||r.memoizedState!==null){if(g=jl(a),u!==null){if(r===null){if(!g)throw Error(s(318));if(r=a.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(557));r[bn]=a}else al(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Dn(a),r=!1}else u=_0(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=u),r=!0;if(!r)return a.flags&256?(Yi(a),a):(Yi(a),null);if((a.flags&128)!==0)throw Error(s(558))}return Dn(a),null;case 13:if(g=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(_=jl(a),g!==null&&g.dehydrated!==null){if(r===null){if(!_)throw Error(s(318));if(_=a.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(s(317));_[bn]=a}else al(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Dn(a),_=!1}else _=_0(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=_),_=!0;if(!_)return a.flags&256?(Yi(a),a):(Yi(a),null)}return Yi(a),(a.flags&128)!==0?(a.lanes=u,a):(u=g!==null,r=r!==null&&r.memoizedState!==null,u&&(g=a.child,_=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(_=g.alternate.memoizedState.cachePool.pool),b=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(b=g.memoizedState.cachePool.pool),b!==_&&(g.flags|=2048)),u!==r&&u&&(a.child.flags|=8192),Jh(a,a.updateQueue),Dn(a),null);case 4:return tn(),r===null&&D1(a.stateNode.containerInfo),Dn(a),null;case 10:return Aa(a.type),Dn(a),null;case 19:if(Ae(lr),g=a.memoizedState,g===null)return Dn(a),null;if(_=(a.flags&128)!==0,b=g.rendering,b===null)if(_)ou(g,!1);else{if(er!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(b=Vh(r),b!==null){for(a.flags|=128,ou(g,!1),r=b.updateQueue,a.updateQueue=r,Jh(a,r),a.subtreeFlags=0,r=u,u=a.child;u!==null;)vp(u,r),u=u.sibling;return Ve(lr,lr.current&1|2),Zt&&_a(a,g.treeForkCount),a.child}r=r.sibling}g.tail!==null&&mn()>rf&&(a.flags|=128,_=!0,ou(g,!1),a.lanes=4194304)}else{if(!_)if(r=Vh(b),r!==null){if(a.flags|=128,_=!0,r=r.updateQueue,a.updateQueue=r,Jh(a,r),ou(g,!0),g.tail===null&&g.tailMode==="hidden"&&!b.alternate&&!Zt)return Dn(a),null}else 2*mn()-g.renderingStartTime>rf&&u!==536870912&&(a.flags|=128,_=!0,ou(g,!1),a.lanes=4194304);g.isBackwards?(b.sibling=a.child,a.child=b):(r=g.last,r!==null?r.sibling=b:a.child=b,g.last=b)}return g.tail!==null?(r=g.tail,g.rendering=r,g.tail=r.sibling,g.renderingStartTime=mn(),r.sibling=null,u=lr.current,Ve(lr,_?u&1|2:u&1),Zt&&_a(a,g.treeForkCount),r):(Dn(a),null);case 22:case 23:return Yi(a),M0(),g=a.memoizedState!==null,r!==null?r.memoizedState!==null!==g&&(a.flags|=8192):g&&(a.flags|=8192),g?(u&536870912)!==0&&(a.flags&128)===0&&(Dn(a),a.subtreeFlags&6&&(a.flags|=8192)):Dn(a),u=a.updateQueue,u!==null&&Jh(a,u.retryQueue),u=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),g=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(g=a.memoizedState.cachePool.pool),g!==u&&(a.flags|=2048),r!==null&&Ae(cl),null;case 24:return u=null,r!==null&&(u=r.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),Aa(pr),Dn(a),null;case 25:return null;case 30:return null}throw Error(s(156,a.tag))}function Qv(r,a){switch(y0(a),a.tag){case 1:return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return Aa(pr),tn(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 26:case 27:case 5:return cn(a),null;case 31:if(a.memoizedState!==null){if(Yi(a),a.alternate===null)throw Error(s(340));al()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 13:if(Yi(a),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(s(340));al()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return Ae(lr),null;case 4:return tn(),null;case 10:return Aa(a.type),null;case 22:case 23:return Yi(a),M0(),r!==null&&Ae(cl),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 24:return Aa(pr),null;case 25:return null;default:return null}}function J2(r,a){switch(y0(a),a.tag){case 3:Aa(pr),tn();break;case 26:case 27:case 5:cn(a);break;case 4:tn();break;case 31:a.memoizedState!==null&&Yi(a);break;case 13:Yi(a);break;case 19:Ae(lr);break;case 10:Aa(a.type);break;case 22:case 23:Yi(a),M0(),r!==null&&Ae(cl);break;case 24:Aa(pr)}}function lu(r,a){try{var u=a.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var _=g.next;u=_;do{if((u.tag&r)===r){g=void 0;var b=u.create,O=u.inst;g=b(),O.destroy=g}u=u.next}while(u!==_)}}catch(U){gn(a,a.return,U)}}function ho(r,a,u){try{var g=a.updateQueue,_=g!==null?g.lastEffect:null;if(_!==null){var b=_.next;g=b;do{if((g.tag&r)===r){var O=g.inst,U=O.destroy;if(U!==void 0){O.destroy=void 0,_=a;var ee=u,ge=U;try{ge()}catch(Te){gn(_,ee,Te)}}}g=g.next}while(g!==b)}}catch(Te){gn(a,a.return,Te)}}function $2(r){var a=r.updateQueue;if(a!==null){var u=r.stateNode;try{Hp(a,u)}catch(g){gn(r,r.return,g)}}}function ex(r,a,u){u.props=gl(r.type,r.memoizedProps),u.state=r.memoizedState;try{u.componentWillUnmount()}catch(g){gn(r,a,g)}}function cu(r,a){try{var u=r.ref;if(u!==null){switch(r.tag){case 26:case 27:case 5:var g=r.stateNode;break;case 30:g=r.stateNode;break;default:g=r.stateNode}typeof u=="function"?r.refCleanup=u(g):u.current=g}}catch(_){gn(r,a,_)}}function Hs(r,a){var u=r.ref,g=r.refCleanup;if(u!==null)if(typeof g=="function")try{g()}catch(_){gn(r,a,_)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(_){gn(r,a,_)}else u.current=null}function tx(r){var a=r.type,u=r.memoizedProps,g=r.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":u.autoFocus&&g.focus();break e;case"img":u.src?g.src=u.src:u.srcSet&&(g.srcset=u.srcSet)}}catch(_){gn(r,r.return,_)}}function h1(r,a,u){try{var g=r.stateNode;yS(g,r.type,u,a),g[Wt]=a}catch(_){gn(r,r.return,_)}}function nx(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Eo(r.type)||r.tag===4}function f1(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||nx(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Eo(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function d1(r,a,u){var g=r.tag;if(g===5||g===6)r=r.stateNode,a?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(r,a):(a=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,a.appendChild(r),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=ri));else if(g!==4&&(g===27&&Eo(r.type)&&(u=r.stateNode,a=null),r=r.child,r!==null))for(d1(r,a,u),r=r.sibling;r!==null;)d1(r,a,u),r=r.sibling}function $h(r,a,u){var g=r.tag;if(g===5||g===6)r=r.stateNode,a?u.insertBefore(r,a):u.appendChild(r);else if(g!==4&&(g===27&&Eo(r.type)&&(u=r.stateNode),r=r.child,r!==null))for($h(r,a,u),r=r.sibling;r!==null;)$h(r,a,u),r=r.sibling}function rx(r){var a=r.stateNode,u=r.memoizedProps;try{for(var g=r.type,_=a.attributes;_.length;)a.removeAttributeNode(_[0]);qr(a,g,u),a[bn]=r,a[Wt]=u}catch(b){gn(r,r.return,b)}}var Ca=!1,Er=!1,g1=!1,ix=typeof WeakSet=="function"?WeakSet:Set,Lr=null;function Zv(r,a){if(r=r.containerInfo,L1=wf,r=L(r),k(r)){if("selectionStart"in r)var u={start:r.selectionStart,end:r.selectionEnd};else e:{u=(u=r.ownerDocument)&&u.defaultView||window;var g=u.getSelection&&u.getSelection();if(g&&g.rangeCount!==0){u=g.anchorNode;var _=g.anchorOffset,b=g.focusNode;g=g.focusOffset;try{u.nodeType,b.nodeType}catch{u=null;break e}var O=0,U=-1,ee=-1,ge=0,Te=0,Ce=r,pe=null;t:for(;;){for(var we;Ce!==u||_!==0&&Ce.nodeType!==3||(U=O+_),Ce!==b||g!==0&&Ce.nodeType!==3||(ee=O+g),Ce.nodeType===3&&(O+=Ce.nodeValue.length),(we=Ce.firstChild)!==null;)pe=Ce,Ce=we;for(;;){if(Ce===r)break t;if(pe===u&&++ge===_&&(U=O),pe===b&&++Te===g&&(ee=O),(we=Ce.nextSibling)!==null)break;Ce=pe,pe=Ce.parentNode}Ce=we}u=U===-1||ee===-1?null:{start:U,end:ee}}else u=null}u=u||{start:0,end:0}}else u=null;for(k1={focusedElem:r,selectionRange:u},wf=!1,Lr=a;Lr!==null;)if(a=Lr,r=a.child,(a.subtreeFlags&1028)!==0&&r!==null)r.return=a,Lr=r;else for(;Lr!==null;){switch(a=Lr,b=a.alternate,r=a.flags,a.tag){case 0:if((r&4)!==0&&(r=a.updateQueue,r=r!==null?r.events:null,r!==null))for(u=0;u<r.length;u++)_=r[u],_.ref.impl=_.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&b!==null){r=void 0,u=a,_=b.memoizedProps,b=b.memoizedState,g=u.stateNode;try{var We=gl(u.type,_);r=g.getSnapshotBeforeUpdate(We,b),g.__reactInternalSnapshotBeforeUpdate=r}catch(lt){gn(u,u.return,lt)}}break;case 3:if((r&1024)!==0){if(r=a.stateNode.containerInfo,u=r.nodeType,u===9)V1(r);else if(u===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":V1(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(s(163))}if(r=a.sibling,r!==null){r.return=a.return,Lr=r;break}Lr=a.return}}function sx(r,a,u){var g=u.flags;switch(u.tag){case 0:case 11:case 15:Na(r,u),g&4&&lu(5,u);break;case 1:if(Na(r,u),g&4)if(r=u.stateNode,a===null)try{r.componentDidMount()}catch(O){gn(u,u.return,O)}else{var _=gl(u.type,a.memoizedProps);a=a.memoizedState;try{r.componentDidUpdate(_,a,r.__reactInternalSnapshotBeforeUpdate)}catch(O){gn(u,u.return,O)}}g&64&&$2(u),g&512&&cu(u,u.return);break;case 3:if(Na(r,u),g&64&&(r=u.updateQueue,r!==null)){if(a=null,u.child!==null)switch(u.child.tag){case 27:case 5:a=u.child.stateNode;break;case 1:a=u.child.stateNode}try{Hp(r,a)}catch(O){gn(u,u.return,O)}}break;case 27:a===null&&g&4&&rx(u);case 26:case 5:Na(r,u),a===null&&g&4&&tx(u),g&512&&cu(u,u.return);break;case 12:Na(r,u);break;case 31:Na(r,u),g&4&&lx(r,u);break;case 13:Na(r,u),g&4&&cx(r,u),g&64&&(r=u.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(u=aS.bind(null,u),SS(r,u))));break;case 22:if(g=u.memoizedState!==null||Ca,!g){a=a!==null&&a.memoizedState!==null||Er,_=Ca;var b=Er;Ca=g,(Er=a)&&!b?Ra(r,u,(u.subtreeFlags&8772)!==0):Na(r,u),Ca=_,Er=b}break;case 30:break;default:Na(r,u)}}function ax(r){var a=r.alternate;a!==null&&(r.alternate=null,ax(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&Sr(a)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Fn=null,Ri=!1;function Ia(r,a,u){for(u=u.child;u!==null;)ox(r,a,u),u=u.sibling}function ox(r,a,u){if(Me&&typeof Me.onCommitFiberUnmount=="function")try{Me.onCommitFiberUnmount(Yt,u)}catch{}switch(u.tag){case 26:Er||Hs(u,a),Ia(r,a,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Er||Hs(u,a);var g=Fn,_=Ri;Eo(u.type)&&(Fn=u.stateNode,Ri=!1),Ia(r,a,u),yu(u.stateNode),Fn=g,Ri=_;break;case 5:Er||Hs(u,a);case 6:if(g=Fn,_=Ri,Fn=null,Ia(r,a,u),Fn=g,Ri=_,Fn!==null)if(Ri)try{(Fn.nodeType===9?Fn.body:Fn.nodeName==="HTML"?Fn.ownerDocument.body:Fn).removeChild(u.stateNode)}catch(b){gn(u,a,b)}else try{Fn.removeChild(u.stateNode)}catch(b){gn(u,a,b)}break;case 18:Fn!==null&&(Ri?(r=Fn,$x(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,u.stateNode),oc(r)):$x(Fn,u.stateNode));break;case 4:g=Fn,_=Ri,Fn=u.stateNode.containerInfo,Ri=!0,Ia(r,a,u),Fn=g,Ri=_;break;case 0:case 11:case 14:case 15:ho(2,u,a),Er||ho(4,u,a),Ia(r,a,u);break;case 1:Er||(Hs(u,a),g=u.stateNode,typeof g.componentWillUnmount=="function"&&ex(u,a,g)),Ia(r,a,u);break;case 21:Ia(r,a,u);break;case 22:Er=(g=Er)||u.memoizedState!==null,Ia(r,a,u),Er=g;break;default:Ia(r,a,u)}}function lx(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{oc(r)}catch(u){gn(a,a.return,u)}}}function cx(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{oc(r)}catch(u){gn(a,a.return,u)}}function Jv(r){switch(r.tag){case 31:case 13:case 19:var a=r.stateNode;return a===null&&(a=r.stateNode=new ix),a;case 22:return r=r.stateNode,a=r._retryCache,a===null&&(a=r._retryCache=new ix),a;default:throw Error(s(435,r.tag))}}function ef(r,a){var u=Jv(r);a.forEach(function(g){if(!u.has(g)){u.add(g);var _=oS.bind(null,r,g);g.then(_,_)}})}function Oi(r,a){var u=a.deletions;if(u!==null)for(var g=0;g<u.length;g++){var _=u[g],b=r,O=a,U=O;e:for(;U!==null;){switch(U.tag){case 27:if(Eo(U.type)){Fn=U.stateNode,Ri=!1;break e}break;case 5:Fn=U.stateNode,Ri=!1;break e;case 3:case 4:Fn=U.stateNode.containerInfo,Ri=!0;break e}U=U.return}if(Fn===null)throw Error(s(160));ox(b,O,_),Fn=null,Ri=!1,b=_.alternate,b!==null&&(b.return=null),_.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)ux(a,r),a=a.sibling}var Ns=null;function ux(r,a){var u=r.alternate,g=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Oi(a,r),Di(r),g&4&&(ho(3,r,r.return),lu(3,r),ho(5,r,r.return));break;case 1:Oi(a,r),Di(r),g&512&&(Er||u===null||Hs(u,u.return)),g&64&&Ca&&(r=r.updateQueue,r!==null&&(g=r.callbacks,g!==null&&(u=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=u===null?g:u.concat(g))));break;case 26:var _=Ns;if(Oi(a,r),Di(r),g&512&&(Er||u===null||Hs(u,u.return)),g&4){var b=u!==null?u.memoizedState:null;if(g=r.memoizedState,u===null)if(g===null)if(r.stateNode===null){e:{g=r.type,u=r.memoizedProps,_=_.ownerDocument||_;t:switch(g){case"title":b=_.getElementsByTagName("title")[0],(!b||b[vi]||b[bn]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=_.createElement(g),_.head.insertBefore(b,_.querySelector("head > title"))),qr(b,g,u),b[bn]=r,Nn(b),g=b;break e;case"link":var O=uy("link","href",_).get(g+(u.href||""));if(O){for(var U=0;U<O.length;U++)if(b=O[U],b.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&b.getAttribute("rel")===(u.rel==null?null:u.rel)&&b.getAttribute("title")===(u.title==null?null:u.title)&&b.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){O.splice(U,1);break t}}b=_.createElement(g),qr(b,g,u),_.head.appendChild(b);break;case"meta":if(O=uy("meta","content",_).get(g+(u.content||""))){for(U=0;U<O.length;U++)if(b=O[U],b.getAttribute("content")===(u.content==null?null:""+u.content)&&b.getAttribute("name")===(u.name==null?null:u.name)&&b.getAttribute("property")===(u.property==null?null:u.property)&&b.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&b.getAttribute("charset")===(u.charSet==null?null:u.charSet)){O.splice(U,1);break t}}b=_.createElement(g),qr(b,g,u),_.head.appendChild(b);break;default:throw Error(s(468,g))}b[bn]=r,Nn(b),g=b}r.stateNode=g}else hy(_,r.type,r.stateNode);else r.stateNode=cy(_,g,r.memoizedProps);else b!==g?(b===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):b.count--,g===null?hy(_,r.type,r.stateNode):cy(_,g,r.memoizedProps)):g===null&&r.stateNode!==null&&h1(r,r.memoizedProps,u.memoizedProps)}break;case 27:Oi(a,r),Di(r),g&512&&(Er||u===null||Hs(u,u.return)),u!==null&&g&4&&h1(r,r.memoizedProps,u.memoizedProps);break;case 5:if(Oi(a,r),Di(r),g&512&&(Er||u===null||Hs(u,u.return)),r.flags&32){_=r.stateNode;try{ni(_,"")}catch(We){gn(r,r.return,We)}}g&4&&r.stateNode!=null&&(_=r.memoizedProps,h1(r,_,u!==null?u.memoizedProps:_)),g&1024&&(g1=!0);break;case 6:if(Oi(a,r),Di(r),g&4){if(r.stateNode===null)throw Error(s(162));g=r.memoizedProps,u=r.stateNode;try{u.nodeValue=g}catch(We){gn(r,r.return,We)}}break;case 3:if(xf=null,_=Ns,Ns=mf(a.containerInfo),Oi(a,r),Ns=_,Di(r),g&4&&u!==null&&u.memoizedState.isDehydrated)try{oc(a.containerInfo)}catch(We){gn(r,r.return,We)}g1&&(g1=!1,hx(r));break;case 4:g=Ns,Ns=mf(r.stateNode.containerInfo),Oi(a,r),Di(r),Ns=g;break;case 12:Oi(a,r),Di(r);break;case 31:Oi(a,r),Di(r),g&4&&(g=r.updateQueue,g!==null&&(r.updateQueue=null,ef(r,g)));break;case 13:Oi(a,r),Di(r),r.child.flags&8192&&r.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(nf=mn()),g&4&&(g=r.updateQueue,g!==null&&(r.updateQueue=null,ef(r,g)));break;case 22:_=r.memoizedState!==null;var ee=u!==null&&u.memoizedState!==null,ge=Ca,Te=Er;if(Ca=ge||_,Er=Te||ee,Oi(a,r),Er=Te,Ca=ge,Di(r),g&8192)e:for(a=r.stateNode,a._visibility=_?a._visibility&-2:a._visibility|1,_&&(u===null||ee||Ca||Er||ml(r)),u=null,a=r;;){if(a.tag===5||a.tag===26){if(u===null){ee=u=a;try{if(b=ee.stateNode,_)O=b.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none";else{U=ee.stateNode;var Ce=ee.memoizedProps.style,pe=Ce!=null&&Ce.hasOwnProperty("display")?Ce.display:null;U.style.display=pe==null||typeof pe=="boolean"?"":(""+pe).trim()}}catch(We){gn(ee,ee.return,We)}}}else if(a.tag===6){if(u===null){ee=a;try{ee.stateNode.nodeValue=_?"":ee.memoizedProps}catch(We){gn(ee,ee.return,We)}}}else if(a.tag===18){if(u===null){ee=a;try{var we=ee.stateNode;_?ey(we,!0):ey(ee.stateNode,!1)}catch(We){gn(ee,ee.return,We)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===r)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break e;for(;a.sibling===null;){if(a.return===null||a.return===r)break e;u===a&&(u=null),a=a.return}u===a&&(u=null),a.sibling.return=a.return,a=a.sibling}g&4&&(g=r.updateQueue,g!==null&&(u=g.retryQueue,u!==null&&(g.retryQueue=null,ef(r,u))));break;case 19:Oi(a,r),Di(r),g&4&&(g=r.updateQueue,g!==null&&(r.updateQueue=null,ef(r,g)));break;case 30:break;case 21:break;default:Oi(a,r),Di(r)}}function Di(r){var a=r.flags;if(a&2){try{for(var u,g=r.return;g!==null;){if(nx(g)){u=g;break}g=g.return}if(u==null)throw Error(s(160));switch(u.tag){case 27:var _=u.stateNode,b=f1(r);$h(r,b,_);break;case 5:var O=u.stateNode;u.flags&32&&(ni(O,""),u.flags&=-33);var U=f1(r);$h(r,U,O);break;case 3:case 4:var ee=u.stateNode.containerInfo,ge=f1(r);d1(r,ge,ee);break;default:throw Error(s(161))}}catch(Te){gn(r,r.return,Te)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function hx(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var a=r;hx(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),r=r.sibling}}function Na(r,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)sx(r,a.alternate,a),a=a.sibling}function ml(r){for(r=r.child;r!==null;){var a=r;switch(a.tag){case 0:case 11:case 14:case 15:ho(4,a,a.return),ml(a);break;case 1:Hs(a,a.return);var u=a.stateNode;typeof u.componentWillUnmount=="function"&&ex(a,a.return,u),ml(a);break;case 27:yu(a.stateNode);case 26:case 5:Hs(a,a.return),ml(a);break;case 22:a.memoizedState===null&&ml(a);break;case 30:ml(a);break;default:ml(a)}r=r.sibling}}function Ra(r,a,u){for(u=u&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var g=a.alternate,_=r,b=a,O=b.flags;switch(b.tag){case 0:case 11:case 15:Ra(_,b,u),lu(4,b);break;case 1:if(Ra(_,b,u),g=b,_=g.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(ge){gn(g,g.return,ge)}if(g=b,_=g.updateQueue,_!==null){var U=g.stateNode;try{var ee=_.shared.hiddenCallbacks;if(ee!==null)for(_.shared.hiddenCallbacks=null,_=0;_<ee.length;_++)zp(ee[_],U)}catch(ge){gn(g,g.return,ge)}}u&&O&64&&$2(b),cu(b,b.return);break;case 27:rx(b);case 26:case 5:Ra(_,b,u),u&&g===null&&O&4&&tx(b),cu(b,b.return);break;case 12:Ra(_,b,u);break;case 31:Ra(_,b,u),u&&O&4&&lx(_,b);break;case 13:Ra(_,b,u),u&&O&4&&cx(_,b);break;case 22:b.memoizedState===null&&Ra(_,b,u),cu(b,b.return);break;case 30:break;default:Ra(_,b,u)}a=a.sibling}}function m1(r,a){var u=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==u&&(r!=null&&r.refCount++,u!=null&&Kc(u))}function p1(r,a){r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&Kc(r))}function Rs(r,a,u,g){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)fx(r,a,u,g),a=a.sibling}function fx(r,a,u,g){var _=a.flags;switch(a.tag){case 0:case 11:case 15:Rs(r,a,u,g),_&2048&&lu(9,a);break;case 1:Rs(r,a,u,g);break;case 3:Rs(r,a,u,g),_&2048&&(r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&Kc(r)));break;case 12:if(_&2048){Rs(r,a,u,g),r=a.stateNode;try{var b=a.memoizedProps,O=b.id,U=b.onPostCommit;typeof U=="function"&&U(O,a.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(ee){gn(a,a.return,ee)}}else Rs(r,a,u,g);break;case 31:Rs(r,a,u,g);break;case 13:Rs(r,a,u,g);break;case 23:break;case 22:b=a.stateNode,O=a.alternate,a.memoizedState!==null?b._visibility&2?Rs(r,a,u,g):uu(r,a):b._visibility&2?Rs(r,a,u,g):(b._visibility|=2,Ql(r,a,u,g,(a.subtreeFlags&10256)!==0||!1)),_&2048&&m1(O,a);break;case 24:Rs(r,a,u,g),_&2048&&p1(a.alternate,a);break;default:Rs(r,a,u,g)}}function Ql(r,a,u,g,_){for(_=_&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var b=r,O=a,U=u,ee=g,ge=O.flags;switch(O.tag){case 0:case 11:case 15:Ql(b,O,U,ee,_),lu(8,O);break;case 23:break;case 22:var Te=O.stateNode;O.memoizedState!==null?Te._visibility&2?Ql(b,O,U,ee,_):uu(b,O):(Te._visibility|=2,Ql(b,O,U,ee,_)),_&&ge&2048&&m1(O.alternate,O);break;case 24:Ql(b,O,U,ee,_),_&&ge&2048&&p1(O.alternate,O);break;default:Ql(b,O,U,ee,_)}a=a.sibling}}function uu(r,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var u=r,g=a,_=g.flags;switch(g.tag){case 22:uu(u,g),_&2048&&m1(g.alternate,g);break;case 24:uu(u,g),_&2048&&p1(g.alternate,g);break;default:uu(u,g)}a=a.sibling}}var hu=8192;function Zl(r,a,u){if(r.subtreeFlags&hu)for(r=r.child;r!==null;)dx(r,a,u),r=r.sibling}function dx(r,a,u){switch(r.tag){case 26:Zl(r,a,u),r.flags&hu&&r.memoizedState!==null&&US(u,Ns,r.memoizedState,r.memoizedProps);break;case 5:Zl(r,a,u);break;case 3:case 4:var g=Ns;Ns=mf(r.stateNode.containerInfo),Zl(r,a,u),Ns=g;break;case 22:r.memoizedState===null&&(g=r.alternate,g!==null&&g.memoizedState!==null?(g=hu,hu=16777216,Zl(r,a,u),hu=g):Zl(r,a,u));break;default:Zl(r,a,u)}}function gx(r){var a=r.alternate;if(a!==null&&(r=a.child,r!==null)){a.child=null;do a=r.sibling,r.sibling=null,r=a;while(r!==null)}}function fu(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var g=a[u];Lr=g,px(g,r)}gx(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)mx(r),r=r.sibling}function mx(r){switch(r.tag){case 0:case 11:case 15:fu(r),r.flags&2048&&ho(9,r,r.return);break;case 3:fu(r);break;case 12:fu(r);break;case 22:var a=r.stateNode;r.memoizedState!==null&&a._visibility&2&&(r.return===null||r.return.tag!==13)?(a._visibility&=-3,tf(r)):fu(r);break;default:fu(r)}}function tf(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var g=a[u];Lr=g,px(g,r)}gx(r)}for(r=r.child;r!==null;){switch(a=r,a.tag){case 0:case 11:case 15:ho(8,a,a.return),tf(a);break;case 22:u=a.stateNode,u._visibility&2&&(u._visibility&=-3,tf(a));break;default:tf(a)}r=r.sibling}}function px(r,a){for(;Lr!==null;){var u=Lr;switch(u.tag){case 0:case 11:case 15:ho(8,u,a);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var g=u.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Kc(u.memoizedState.cache)}if(g=u.child,g!==null)g.return=u,Lr=g;else e:for(u=r;Lr!==null;){g=Lr;var _=g.sibling,b=g.return;if(ax(g),g===u){Lr=null;break e}if(_!==null){_.return=b,Lr=_;break e}Lr=b}}}var $v={getCacheForType:function(r){var a=Hr(pr),u=a.data.get(r);return u===void 0&&(u=r(),a.data.set(r,u)),u},cacheSignal:function(){return Hr(pr).controller.signal}},eS=typeof WeakMap=="function"?WeakMap:Map,ln=0,Sn=null,kt=null,jt=0,dn=0,Xi=null,fo=!1,Jl=!1,x1=!1,Oa=0,er=0,go=0,pl=0,y1=0,Wi=0,$l=0,du=null,Mi=null,E1=!1,nf=0,xx=0,rf=1/0,sf=null,mo=null,Nr=0,po=null,ec=null,Da=0,_1=0,w1=null,yx=null,gu=0,A1=null;function Ki(){return(ln&2)!==0&&jt!==0?jt&-jt:me.T!==null?I1():Tr()}function Ex(){if(Wi===0)if((jt&536870912)===0||Zt){var r=bt;bt<<=1,(bt&3932160)===0&&(bt=262144),Wi=r}else Wi=536870912;return r=qi.current,r!==null&&(r.flags|=32),Wi}function Pi(r,a,u){(r===Sn&&(dn===2||dn===9)||r.cancelPendingCommit!==null)&&(tc(r,0),xo(r,jt,Wi,!1)),di(r,u),((ln&2)===0||r!==Sn)&&(r===Sn&&((ln&2)===0&&(pl|=u),er===4&&xo(r,jt,Wi,!1)),Gs(r))}function _x(r,a,u){if((ln&6)!==0)throw Error(s(327));var g=!u&&(a&127)===0&&(a&r.expiredLanes)===0||In(r,a),_=g?rS(r,a):T1(r,a,!0),b=g;do{if(_===0){Jl&&!g&&xo(r,a,0,!1);break}else{if(u=r.current.alternate,b&&!tS(u)){_=T1(r,a,!1),b=!1;continue}if(_===2){if(b=a,r.errorRecoveryDisabledLanes&b)var O=0;else O=r.pendingLanes&-536870913,O=O!==0?O:O&536870912?536870912:0;if(O!==0){a=O;e:{var U=r;_=du;var ee=U.current.memoizedState.isDehydrated;if(ee&&(tc(U,O).flags|=256),O=T1(U,O,!1),O!==2){if(x1&&!ee){U.errorRecoveryDisabledLanes|=b,pl|=b,_=4;break e}b=Mi,Mi=_,b!==null&&(Mi===null?Mi=b:Mi.push.apply(Mi,b))}_=O}if(b=!1,_!==2)continue}}if(_===1){tc(r,0),xo(r,a,0,!0);break}e:{switch(g=r,b=_,b){case 0:case 1:throw Error(s(345));case 4:if((a&4194048)!==a)break;case 6:xo(g,a,Wi,!fo);break e;case 2:Mi=null;break;case 3:case 5:break;default:throw Error(s(329))}if((a&62914560)===a&&(_=nf+300-mn(),10<_)){if(xo(g,a,Wi,!fo),ei(g,0,!0)!==0)break e;Da=a,g.timeoutHandle=Zx(wx.bind(null,g,u,Mi,sf,E1,a,Wi,pl,$l,fo,b,"Throttled",-0,0),_);break e}wx(g,u,Mi,sf,E1,a,Wi,pl,$l,fo,b,null,-0,0)}}break}while(!0);Gs(r)}function wx(r,a,u,g,_,b,O,U,ee,ge,Te,Ce,pe,we){if(r.timeoutHandle=-1,Ce=a.subtreeFlags,Ce&8192||(Ce&16785408)===16785408){Ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ri},dx(a,b,Ce);var We=(b&62914560)===b?nf-mn():(b&4194048)===b?xx-mn():0;if(We=VS(Ce,We),We!==null){Da=b,r.cancelPendingCommit=We(Nx.bind(null,r,a,b,u,g,_,O,U,ee,Te,Ce,null,pe,we)),xo(r,b,O,!ge);return}}Nx(r,a,b,u,g,_,O,U,ee)}function tS(r){for(var a=r;;){var u=a.tag;if((u===0||u===11||u===15)&&a.flags&16384&&(u=a.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var g=0;g<u.length;g++){var _=u[g],b=_.getSnapshot;_=_.value;try{if(!m(b(),_))return!1}catch{return!1}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function xo(r,a,u,g){a&=~y1,a&=~pl,r.suspendedLanes|=a,r.pingedLanes&=~a,g&&(r.warmLanes|=a),g=r.expirationTimes;for(var _=a;0<_;){var b=31-at(_),O=1<<b;g[b]=-1,_&=~O}u!==0&&ki(r,u,a)}function af(){return(ln&6)===0?(mu(0),!1):!0}function b1(){if(kt!==null){if(dn===0)var r=kt.return;else r=kt,wa=ol=null,V0(r),ql=null,Zc=0,r=kt;for(;r!==null;)J2(r.alternate,r),r=r.return;kt=null}}function tc(r,a){var u=r.timeoutHandle;u!==-1&&(r.timeoutHandle=-1,wS(u)),u=r.cancelPendingCommit,u!==null&&(r.cancelPendingCommit=null,u()),Da=0,b1(),Sn=r,kt=u=Ea(r.current,null),jt=a,dn=0,Xi=null,fo=!1,Jl=In(r,a),x1=!1,$l=Wi=y1=pl=go=er=0,Mi=du=null,E1=!1,(a&8)!==0&&(a|=a&32);var g=r.entangledLanes;if(g!==0)for(r=r.entanglements,g&=a;0<g;){var _=31-at(g),b=1<<_;a|=r[_],g&=~b}return Oa=a,Sh(),u}function Ax(r,a){Tt=null,me.H=su,a===Gl||a===Ph?(a=Up(),dn=3):a===C0?(a=Up(),dn=4):dn=a===t1?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Xi=a,kt===null&&(er=1,Wh(r,gs(a,r.current)))}function bx(){var r=qi.current;return r===null?!0:(jt&4194048)===jt?ys===null:(jt&62914560)===jt||(jt&536870912)!==0?r===ys:!1}function Tx(){var r=me.H;return me.H=su,r===null?su:r}function vx(){var r=me.A;return me.A=$v,r}function of(){er=4,fo||(jt&4194048)!==jt&&qi.current!==null||(Jl=!0),(go&134217727)===0&&(pl&134217727)===0||Sn===null||xo(Sn,jt,Wi,!1)}function T1(r,a,u){var g=ln;ln|=2;var _=Tx(),b=vx();(Sn!==r||jt!==a)&&(sf=null,tc(r,a)),a=!1;var O=er;e:do try{if(dn!==0&&kt!==null){var U=kt,ee=Xi;switch(dn){case 8:b1(),O=6;break e;case 3:case 2:case 9:case 6:qi.current===null&&(a=!0);var ge=dn;if(dn=0,Xi=null,nc(r,U,ee,ge),u&&Jl){O=0;break e}break;default:ge=dn,dn=0,Xi=null,nc(r,U,ee,ge)}}nS(),O=er;break}catch(Te){Ax(r,Te)}while(!0);return a&&r.shellSuspendCounter++,wa=ol=null,ln=g,me.H=_,me.A=b,kt===null&&(Sn=null,jt=0,Sh()),O}function nS(){for(;kt!==null;)Sx(kt)}function rS(r,a){var u=ln;ln|=2;var g=Tx(),_=vx();Sn!==r||jt!==a?(sf=null,rf=mn()+500,tc(r,a)):Jl=In(r,a);e:do try{if(dn!==0&&kt!==null){a=kt;var b=Xi;t:switch(dn){case 1:dn=0,Xi=null,nc(r,a,b,1);break;case 2:case 9:if(kp(b)){dn=0,Xi=null,Cx(a);break}a=function(){dn!==2&&dn!==9||Sn!==r||(dn=7),Gs(r)},b.then(a,a);break e;case 3:dn=7;break e;case 4:dn=5;break e;case 7:kp(b)?(dn=0,Xi=null,Cx(a)):(dn=0,Xi=null,nc(r,a,b,7));break;case 5:var O=null;switch(kt.tag){case 26:O=kt.memoizedState;case 5:case 27:var U=kt;if(O?fy(O):U.stateNode.complete){dn=0,Xi=null;var ee=U.sibling;if(ee!==null)kt=ee;else{var ge=U.return;ge!==null?(kt=ge,lf(ge)):kt=null}break t}}dn=0,Xi=null,nc(r,a,b,5);break;case 6:dn=0,Xi=null,nc(r,a,b,6);break;case 8:b1(),er=6;break e;default:throw Error(s(462))}}iS();break}catch(Te){Ax(r,Te)}while(!0);return wa=ol=null,me.H=g,me.A=_,ln=u,kt!==null?0:(Sn=null,jt=0,Sh(),er)}function iS(){for(;kt!==null&&!As();)Sx(kt)}function Sx(r){var a=Q2(r.alternate,r,Oa);r.memoizedProps=r.pendingProps,a===null?lf(r):kt=a}function Cx(r){var a=r,u=a.alternate;switch(a.tag){case 15:case 0:a=G2(u,a,a.pendingProps,a.type,void 0,jt);break;case 11:a=G2(u,a,a.pendingProps,a.type.render,a.ref,jt);break;case 5:V0(a);default:J2(u,a),a=kt=vp(a,Oa),a=Q2(u,a,Oa)}r.memoizedProps=r.pendingProps,a===null?lf(r):kt=a}function nc(r,a,u,g){wa=ol=null,V0(a),ql=null,Zc=0;var _=a.return;try{if(Yv(r,_,a,u,jt)){er=1,Wh(r,gs(u,r.current)),kt=null;return}}catch(b){if(_!==null)throw kt=_,b;er=1,Wh(r,gs(u,r.current)),kt=null;return}a.flags&32768?(Zt||g===1?r=!0:Jl||(jt&536870912)!==0?r=!1:(fo=r=!0,(g===2||g===9||g===3||g===6)&&(g=qi.current,g!==null&&g.tag===13&&(g.flags|=16384))),Ix(a,r)):lf(a)}function lf(r){var a=r;do{if((a.flags&32768)!==0){Ix(a,fo);return}r=a.return;var u=Kv(a.alternate,a,Oa);if(u!==null){kt=u;return}if(a=a.sibling,a!==null){kt=a;return}kt=a=r}while(a!==null);er===0&&(er=5)}function Ix(r,a){do{var u=Qv(r.alternate,r);if(u!==null){u.flags&=32767,kt=u;return}if(u=r.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!a&&(r=r.sibling,r!==null)){kt=r;return}kt=r=u}while(r!==null);er=6,kt=null}function Nx(r,a,u,g,_,b,O,U,ee){r.cancelPendingCommit=null;do cf();while(Nr!==0);if((ln&6)!==0)throw Error(s(327));if(a!==null){if(a===r.current)throw Error(s(177));if(b=a.lanes|a.childLanes,b|=f0,Vr(r,u,b,O,U,ee),r===Sn&&(kt=Sn=null,jt=0),ec=a,po=r,Da=u,_1=b,w1=_,yx=g,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,lS(sr,function(){return Px(),null})):(r.callbackNode=null,r.callbackPriority=0),g=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||g){g=me.T,me.T=null,_=be.p,be.p=2,O=ln,ln|=4;try{Zv(r,a,u)}finally{ln=O,be.p=_,me.T=g}}Nr=1,Rx(),Ox(),Dx()}}function Rx(){if(Nr===1){Nr=0;var r=po,a=ec,u=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||u){u=me.T,me.T=null;var g=be.p;be.p=2;var _=ln;ln|=4;try{ux(a,r);var b=k1,O=L(r.containerInfo),U=b.focusedElem,ee=b.selectionRange;if(O!==U&&U&&U.ownerDocument&&R(U.ownerDocument.documentElement,U)){if(ee!==null&&k(U)){var ge=ee.start,Te=ee.end;if(Te===void 0&&(Te=ge),"selectionStart"in U)U.selectionStart=ge,U.selectionEnd=Math.min(Te,U.value.length);else{var Ce=U.ownerDocument||document,pe=Ce&&Ce.defaultView||window;if(pe.getSelection){var we=pe.getSelection(),We=U.textContent.length,lt=Math.min(ee.start,We),En=ee.end===void 0?lt:Math.min(ee.end,We);!we.extend&&lt>En&&(O=En,En=lt,lt=O);var oe=S(U,lt),se=S(U,En);if(oe&&se&&(we.rangeCount!==1||we.anchorNode!==oe.node||we.anchorOffset!==oe.offset||we.focusNode!==se.node||we.focusOffset!==se.offset)){var de=Ce.createRange();de.setStart(oe.node,oe.offset),we.removeAllRanges(),lt>En?(we.addRange(de),we.extend(se.node,se.offset)):(de.setEnd(se.node,se.offset),we.addRange(de))}}}}for(Ce=[],we=U;we=we.parentNode;)we.nodeType===1&&Ce.push({element:we,left:we.scrollLeft,top:we.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<Ce.length;U++){var Se=Ce[U];Se.element.scrollLeft=Se.left,Se.element.scrollTop=Se.top}}wf=!!L1,k1=L1=null}finally{ln=_,be.p=g,me.T=u}}r.current=a,Nr=2}}function Ox(){if(Nr===2){Nr=0;var r=po,a=ec,u=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||u){u=me.T,me.T=null;var g=be.p;be.p=2;var _=ln;ln|=4;try{sx(r,a.alternate,a)}finally{ln=_,be.p=g,me.T=u}}Nr=3}}function Dx(){if(Nr===4||Nr===3){Nr=0,is();var r=po,a=ec,u=Da,g=yx;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Nr=5:(Nr=0,ec=po=null,Mx(r,r.pendingLanes));var _=r.pendingLanes;if(_===0&&(mo=null),br(u),a=a.stateNode,Me&&typeof Me.onCommitFiberRoot=="function")try{Me.onCommitFiberRoot(Yt,a,void 0,(a.current.flags&128)===128)}catch{}if(g!==null){a=me.T,_=be.p,be.p=2,me.T=null;try{for(var b=r.onRecoverableError,O=0;O<g.length;O++){var U=g[O];b(U.value,{componentStack:U.stack})}}finally{me.T=a,be.p=_}}(Da&3)!==0&&cf(),Gs(r),_=r.pendingLanes,(u&261930)!==0&&(_&42)!==0?r===A1?gu++:(gu=0,A1=r):gu=0,mu(0)}}function Mx(r,a){(r.pooledCacheLanes&=a)===0&&(a=r.pooledCache,a!=null&&(r.pooledCache=null,Kc(a)))}function cf(){return Rx(),Ox(),Dx(),Px()}function Px(){if(Nr!==5)return!1;var r=po,a=_1;_1=0;var u=br(Da),g=me.T,_=be.p;try{be.p=32>u?32:u,me.T=null,u=w1,w1=null;var b=po,O=Da;if(Nr=0,ec=po=null,Da=0,(ln&6)!==0)throw Error(s(331));var U=ln;if(ln|=4,mx(b.current),fx(b,b.current,O,u),ln=U,mu(0,!1),Me&&typeof Me.onPostCommitFiberRoot=="function")try{Me.onPostCommitFiberRoot(Yt,b)}catch{}return!0}finally{be.p=_,me.T=g,Mx(r,a)}}function Lx(r,a,u){a=gs(u,a),a=e1(r.stateNode,a,2),r=lo(r,a,2),r!==null&&(di(r,2),Gs(r))}function gn(r,a,u){if(r.tag===3)Lx(r,r,u);else for(;a!==null;){if(a.tag===3){Lx(a,r,u);break}else if(a.tag===1){var g=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(mo===null||!mo.has(g))){r=gs(u,r),u=k2(2),g=lo(a,u,2),g!==null&&(B2(u,g,a,r),di(g,2),Gs(g));break}}a=a.return}}function v1(r,a,u){var g=r.pingCache;if(g===null){g=r.pingCache=new eS;var _=new Set;g.set(a,_)}else _=g.get(a),_===void 0&&(_=new Set,g.set(a,_));_.has(u)||(x1=!0,_.add(u),r=sS.bind(null,r,a,u),a.then(r,r))}function sS(r,a,u){var g=r.pingCache;g!==null&&g.delete(a),r.pingedLanes|=r.suspendedLanes&u,r.warmLanes&=~u,Sn===r&&(jt&u)===u&&(er===4||er===3&&(jt&62914560)===jt&&300>mn()-nf?(ln&2)===0&&tc(r,0):y1|=u,$l===jt&&($l=0)),Gs(r)}function kx(r,a){a===0&&(a=Ln()),r=il(r,a),r!==null&&(di(r,a),Gs(r))}function aS(r){var a=r.memoizedState,u=0;a!==null&&(u=a.retryLane),kx(r,u)}function oS(r,a){var u=0;switch(r.tag){case 31:case 13:var g=r.stateNode,_=r.memoizedState;_!==null&&(u=_.retryLane);break;case 19:g=r.stateNode;break;case 22:g=r.stateNode._retryCache;break;default:throw Error(s(314))}g!==null&&g.delete(a),kx(r,u)}function lS(r,a){return An(r,a)}var uf=null,rc=null,S1=!1,hf=!1,C1=!1,yo=0;function Gs(r){r!==rc&&r.next===null&&(rc===null?uf=rc=r:rc=rc.next=r),hf=!0,S1||(S1=!0,uS())}function mu(r,a){if(!C1&&hf){C1=!0;do for(var u=!1,g=uf;g!==null;){if(r!==0){var _=g.pendingLanes;if(_===0)var b=0;else{var O=g.suspendedLanes,U=g.pingedLanes;b=(1<<31-at(42|r)+1)-1,b&=_&~(O&~U),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(u=!0,jx(g,b))}else b=jt,b=ei(g,g===Sn?b:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(b&3)===0||In(g,b)||(u=!0,jx(g,b));g=g.next}while(u);C1=!1}}function cS(){Bx()}function Bx(){hf=S1=!1;var r=0;yo!==0&&_S()&&(r=yo);for(var a=mn(),u=null,g=uf;g!==null;){var _=g.next,b=Ux(g,a);b===0?(g.next=null,u===null?uf=_:u.next=_,_===null&&(rc=u)):(u=g,(r!==0||(b&3)!==0)&&(hf=!0)),g=_}Nr!==0&&Nr!==5||mu(r),yo!==0&&(yo=0)}function Ux(r,a){for(var u=r.suspendedLanes,g=r.pingedLanes,_=r.expirationTimes,b=r.pendingLanes&-62914561;0<b;){var O=31-at(b),U=1<<O,ee=_[O];ee===-1?((U&u)===0||(U&g)!==0)&&(_[O]=Ls(U,a)):ee<=a&&(r.expiredLanes|=U),b&=~U}if(a=Sn,u=jt,u=ei(r,r===a?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),g=r.callbackNode,u===0||r===a&&(dn===2||dn===9)||r.cancelPendingCommit!==null)return g!==null&&g!==null&&He(g),r.callbackNode=null,r.callbackPriority=0;if((u&3)===0||In(r,u)){if(a=u&-u,a===r.callbackPriority)return a;switch(g!==null&&He(g),br(u)){case 2:case 8:u=Zr;break;case 32:u=sr;break;case 268435456:u=Ps;break;default:u=sr}return g=Vx.bind(null,r),u=An(u,g),r.callbackPriority=a,r.callbackNode=u,a}return g!==null&&g!==null&&He(g),r.callbackPriority=2,r.callbackNode=null,2}function Vx(r,a){if(Nr!==0&&Nr!==5)return r.callbackNode=null,r.callbackPriority=0,null;var u=r.callbackNode;if(cf()&&r.callbackNode!==u)return null;var g=jt;return g=ei(r,r===Sn?g:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),g===0?null:(_x(r,g,a),Ux(r,mn()),r.callbackNode!=null&&r.callbackNode===u?Vx.bind(null,r):null)}function jx(r,a){if(cf())return null;_x(r,a,!0)}function uS(){AS(function(){(ln&6)!==0?An(dr,cS):Bx()})}function I1(){if(yo===0){var r=zl;r===0&&(r=Jr,Jr<<=1,(Jr&261888)===0&&(Jr=256)),yo=r}return yo}function Fx(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Bs(""+r)}function zx(r,a){var u=a.ownerDocument.createElement("input");return u.name=a.name,u.value=a.value,r.id&&u.setAttribute("form",r.id),a.parentNode.insertBefore(u,a),r=new FormData(r),u.parentNode.removeChild(u),r}function hS(r,a,u,g,_){if(a==="submit"&&u&&u.stateNode===_){var b=Fx((_[Wt]||null).action),O=g.submitter;O&&(a=(a=O[Wt]||null)?Fx(a.formAction):O.getAttribute("formAction"),a!==null&&(b=a,O=null));var U=new Rn("action","action",null,g,_);r.push({event:U,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(yo!==0){var ee=O?zx(_,O):new FormData(_);W0(u,{pending:!0,data:ee,method:_.method,action:b},null,ee)}}else typeof b=="function"&&(U.preventDefault(),ee=O?zx(_,O):new FormData(_),W0(u,{pending:!0,data:ee,method:_.method,action:b},b,ee))},currentTarget:_}]})}}for(var N1=0;N1<Yc.length;N1++){var R1=Yc[N1],fS=R1.toLowerCase(),dS=R1[0].toUpperCase()+R1.slice(1);Is(fS,"on"+dS)}Is(Ni,"onAnimationEnd"),Is(Fr,"onAnimationIteration"),Is(fn,"onAnimationStart"),Is("dblclick","onDoubleClick"),Is("focusin","onFocus"),Is("focusout","onBlur"),Is(Ir,"onTransitionRun"),Is(Ei,"onTransitionStart"),Is(to,"onTransitionCancel"),Is(ya,"onTransitionEnd"),Cr("onMouseEnter",["mouseout","mouseover"]),Cr("onMouseLeave",["mouseout","mouseover"]),Cr("onPointerEnter",["pointerout","pointerover"]),Cr("onPointerLeave",["pointerout","pointerover"]),Kt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Kt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Kt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Kt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Kt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Kt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pu));function Hx(r,a){a=(a&4)!==0;for(var u=0;u<r.length;u++){var g=r[u],_=g.event;g=g.listeners;e:{var b=void 0;if(a)for(var O=g.length-1;0<=O;O--){var U=g[O],ee=U.instance,ge=U.currentTarget;if(U=U.listener,ee!==b&&_.isPropagationStopped())break e;b=U,_.currentTarget=ge;try{b(_)}catch(Te){vh(Te)}_.currentTarget=null,b=ee}else for(O=0;O<g.length;O++){if(U=g[O],ee=U.instance,ge=U.currentTarget,U=U.listener,ee!==b&&_.isPropagationStopped())break e;b=U,_.currentTarget=ge;try{b(_)}catch(Te){vh(Te)}_.currentTarget=null,b=ee}}}}function Bt(r,a){var u=a[Bi];u===void 0&&(u=a[Bi]=new Set);var g=r+"__bubble";u.has(g)||(Gx(a,r,2,!1),u.add(g))}function O1(r,a,u){var g=0;a&&(g|=4),Gx(u,r,g,a)}var ff="_reactListening"+Math.random().toString(36).slice(2);function D1(r){if(!r[ff]){r[ff]=!0,Ie.forEach(function(u){u!=="selectionchange"&&(gS.has(u)||O1(u,!1,r),O1(u,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[ff]||(a[ff]=!0,O1("selectionchange",!1,a))}}function Gx(r,a,u,g){switch(Ey(a)){case 2:var _=zS;break;case 8:_=HS;break;default:_=X1}u=_.bind(null,a,u,r),_=void 0,!ca||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(_=!0),g?_!==void 0?r.addEventListener(a,u,{capture:!0,passive:_}):r.addEventListener(a,u,!0):_!==void 0?r.addEventListener(a,u,{passive:_}):r.addEventListener(a,u,!1)}function M1(r,a,u,g,_){var b=g;if((a&1)===0&&(a&2)===0&&g!==null)e:for(;;){if(g===null)return;var O=g.tag;if(O===3||O===4){var U=g.stateNode.containerInfo;if(U===_)break;if(O===4)for(O=g.return;O!==null;){var ee=O.tag;if((ee===3||ee===4)&&O.stateNode.containerInfo===_)return;O=O.return}for(;U!==null;){if(O=pn(U),O===null)return;if(ee=O.tag,ee===5||ee===6||ee===26||ee===27){g=b=O;continue e}U=U.parentNode}}g=g.return}Us(function(){var ge=b,Te=Si(u),Ce=[];e:{var pe=Th.get(r);if(pe!==void 0){var we=Rn,We=r;switch(r){case"keypress":if(ji(u)===0)break e;case"keydown":case"keyup":we=ga;break;case"focusin":We="focus",we=fa;break;case"focusout":We="blur",we=fa;break;case"beforeblur":case"afterblur":we=fa;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=Jt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=ha;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=N;break;case Ni:case Fr:case fn:we=yt;break;case ya:we=F;break;case"scroll":case"scrollend":we=Qa;break;case"wheel":we=Ee;break;case"copy":case"cut":case"paste":we=da;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=Lt;break;case"toggle":case"beforetoggle":we=gt}var lt=(a&4)!==0,En=!lt&&(r==="scroll"||r==="scrollend"),oe=lt?pe!==null?pe+"Capture":null:pe;lt=[];for(var se=ge,de;se!==null;){var Se=se;if(de=Se.stateNode,Se=Se.tag,Se!==5&&Se!==26&&Se!==27||de===null||oe===null||(Se=ot(se,oe),Se!=null&&lt.push(xu(se,Se,de))),En)break;se=se.return}0<lt.length&&(pe=new we(pe,We,null,u,Te),Ce.push({event:pe,listeners:lt}))}}if((a&7)===0){e:{if(pe=r==="mouseover"||r==="pointerover",we=r==="mouseout"||r==="pointerout",pe&&u!==la&&(We=u.relatedTarget||u.fromElement)&&(pn(We)||We[vr]))break e;if((we||pe)&&(pe=Te.window===Te?Te:(pe=Te.ownerDocument)?pe.defaultView||pe.parentWindow:window,we?(We=u.relatedTarget||u.toElement,we=ge,We=We?pn(We):null,We!==null&&(En=h(We),lt=We.tag,We!==En||lt!==5&&lt!==27&&lt!==6)&&(We=null)):(we=null,We=ge),we!==We)){if(lt=Jt,Se="onMouseLeave",oe="onMouseEnter",se="mouse",(r==="pointerout"||r==="pointerover")&&(lt=Lt,Se="onPointerLeave",oe="onPointerEnter",se="pointer"),En=we==null?pe:Dr(we),de=We==null?pe:Dr(We),pe=new lt(Se,se+"leave",we,u,Te),pe.target=En,pe.relatedTarget=de,Se=null,pn(Te)===ge&&(lt=new lt(oe,se+"enter",We,u,Te),lt.target=de,lt.relatedTarget=En,Se=lt),En=Se,we&&We)t:{for(lt=mS,oe=we,se=We,de=0,Se=oe;Se;Se=lt(Se))de++;Se=0;for(var nt=se;nt;nt=lt(nt))Se++;for(;0<de-Se;)oe=lt(oe),de--;for(;0<Se-de;)se=lt(se),Se--;for(;de--;){if(oe===se||se!==null&&oe===se.alternate){lt=oe;break t}oe=lt(oe),se=lt(se)}lt=null}else lt=null;we!==null&&qx(Ce,pe,we,lt,!1),We!==null&&En!==null&&qx(Ce,En,We,lt,!0)}}e:{if(pe=ge?Dr(ge):window,we=pe.nodeName&&pe.nodeName.toLowerCase(),we==="select"||we==="input"&&pe.type==="file")var rn=Hi;else if(qc(pe))if(bh)rn=f;else{rn=o;var Qe=i}else we=pe.nodeName,!we||we.toLowerCase()!=="input"||pe.type!=="checkbox"&&pe.type!=="radio"?ge&&un(ge.elementType)&&(rn=Hi):rn=l;if(rn&&(rn=rn(r,ge))){zi(Ce,rn,u,Te);break e}Qe&&Qe(r,pe,ge),r==="focusout"&&ge&&pe.type==="number"&&ge.memoizedProps.value!=null&&H(pe,"number",pe.value)}switch(Qe=ge?Dr(ge):window,r){case"focusin":(qc(Qe)||Qe.contentEditable==="true")&&(te=Qe,re=ge,ue=null);break;case"focusout":ue=re=te=null;break;case"mousedown":ye=!0;break;case"contextmenu":case"mouseup":case"dragend":ye=!1,ke(Ce,u,Te);break;case"selectionchange":if(G)break;case"keydown":case"keyup":ke(Ce,u,Te)}var Nt;if(Qt)e:{switch(r){case"compositionstart":var Ft="onCompositionStart";break e;case"compositionend":Ft="onCompositionEnd";break e;case"compositionupdate":Ft="onCompositionUpdate";break e}Ft=void 0}else eo?ma(r,u)&&(Ft="onCompositionEnd"):r==="keydown"&&u.keyCode===229&&(Ft="onCompositionStart");Ft&&(hs&&u.locale!=="ko"&&(eo||Ft!=="onCompositionStart"?Ft==="onCompositionEnd"&&eo&&(Nt=vs()):(Ui=Te,Vi="value"in Ui?Ui.value:Ui.textContent,eo=!0)),Qe=df(ge,Ft),0<Qe.length&&(Ft=new ls(Ft,r,null,u,Te),Ce.push({event:Ft,listeners:Qe}),Nt?Ft.data=Nt:(Nt=fs(u),Nt!==null&&(Ft.data=Nt)))),(Nt=xi?js(r,u):Ll(r,u))&&(Ft=df(ge,"onBeforeInput"),0<Ft.length&&(Qe=new ls("onBeforeInput","beforeinput",null,u,Te),Ce.push({event:Qe,listeners:Ft}),Qe.data=Nt)),hS(Ce,r,ge,u,Te)}Hx(Ce,a)})}function xu(r,a,u){return{instance:r,listener:a,currentTarget:u}}function df(r,a){for(var u=a+"Capture",g=[];r!==null;){var _=r,b=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||b===null||(_=ot(r,u),_!=null&&g.unshift(xu(r,_,b)),_=ot(r,a),_!=null&&g.push(xu(r,_,b))),r.tag===3)return g;r=r.return}return[]}function mS(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function qx(r,a,u,g,_){for(var b=a._reactName,O=[];u!==null&&u!==g;){var U=u,ee=U.alternate,ge=U.stateNode;if(U=U.tag,ee!==null&&ee===g)break;U!==5&&U!==26&&U!==27||ge===null||(ee=ge,_?(ge=ot(u,b),ge!=null&&O.unshift(xu(u,ge,ee))):_||(ge=ot(u,b),ge!=null&&O.push(xu(u,ge,ee)))),u=u.return}O.length!==0&&r.push({event:a,listeners:O})}var pS=/\r\n?/g,xS=/\u0000|\uFFFD/g;function Yx(r){return(typeof r=="string"?r:""+r).replace(pS,`
`).replace(xS,"")}function Xx(r,a){return a=Yx(a),Yx(r)===a}function yn(r,a,u,g,_,b){switch(u){case"children":typeof g=="string"?a==="body"||a==="textarea"&&g===""||ni(r,g):(typeof g=="number"||typeof g=="bigint")&&a!=="body"&&ni(r,""+g);break;case"className":St(r,"class",g);break;case"tabIndex":St(r,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":St(r,u,g);break;case"style":Je(r,g,b);break;case"data":if(a!=="object"){St(r,"data",g);break}case"src":case"href":if(g===""&&(a!=="a"||u!=="href")){r.removeAttribute(u);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){r.removeAttribute(u);break}g=Bs(""+g),r.setAttribute(u,g);break;case"action":case"formAction":if(typeof g=="function"){r.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(u==="formAction"?(a!=="input"&&yn(r,a,"name",_.name,_,null),yn(r,a,"formEncType",_.formEncType,_,null),yn(r,a,"formMethod",_.formMethod,_,null),yn(r,a,"formTarget",_.formTarget,_,null)):(yn(r,a,"encType",_.encType,_,null),yn(r,a,"method",_.method,_,null),yn(r,a,"target",_.target,_,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){r.removeAttribute(u);break}g=Bs(""+g),r.setAttribute(u,g);break;case"onClick":g!=null&&(r.onclick=ri);break;case"onScroll":g!=null&&Bt("scroll",r);break;case"onScrollEnd":g!=null&&Bt("scrollend",r);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(s(61));if(u=g.__html,u!=null){if(_.children!=null)throw Error(s(60));r.innerHTML=u}}break;case"multiple":r.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":r.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){r.removeAttribute("xlink:href");break}u=Bs(""+g),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?r.setAttribute(u,""+g):r.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?r.setAttribute(u,""):r.removeAttribute(u);break;case"capture":case"download":g===!0?r.setAttribute(u,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?r.setAttribute(u,g):r.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?r.setAttribute(u,g):r.removeAttribute(u);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?r.removeAttribute(u):r.setAttribute(u,g);break;case"popover":Bt("beforetoggle",r),Bt("toggle",r),Ke(r,"popover",g);break;case"xlinkActuate":Ct(r,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Ct(r,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Ct(r,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Ct(r,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Ct(r,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Ct(r,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Ct(r,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Ct(r,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Ct(r,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Ke(r,"is",g);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=Jo.get(u)||u,Ke(r,u,g))}}function P1(r,a,u,g,_,b){switch(u){case"style":Je(r,g,b);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(s(61));if(u=g.__html,u!=null){if(_.children!=null)throw Error(s(60));r.innerHTML=u}}break;case"children":typeof g=="string"?ni(r,g):(typeof g=="number"||typeof g=="bigint")&&ni(r,""+g);break;case"onScroll":g!=null&&Bt("scroll",r);break;case"onScrollEnd":g!=null&&Bt("scrollend",r);break;case"onClick":g!=null&&(r.onclick=ri);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!sa.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(_=u.endsWith("Capture"),a=u.slice(2,_?u.length-7:void 0),b=r[Wt]||null,b=b!=null?b[u]:null,typeof b=="function"&&r.removeEventListener(a,b,_),typeof g=="function")){typeof b!="function"&&b!==null&&(u in r?r[u]=null:r.hasAttribute(u)&&r.removeAttribute(u)),r.addEventListener(a,g,_);break e}u in r?r[u]=g:g===!0?r.setAttribute(u,""):Ke(r,u,g)}}}function qr(r,a,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Bt("error",r),Bt("load",r);var g=!1,_=!1,b;for(b in u)if(u.hasOwnProperty(b)){var O=u[b];if(O!=null)switch(b){case"src":g=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:yn(r,a,b,O,u,null)}}_&&yn(r,a,"srcSet",u.srcSet,u,null),g&&yn(r,a,"src",u.src,u,null);return;case"input":Bt("invalid",r);var U=b=O=_=null,ee=null,ge=null;for(g in u)if(u.hasOwnProperty(g)){var Te=u[g];if(Te!=null)switch(g){case"name":_=Te;break;case"type":O=Te;break;case"checked":ee=Te;break;case"defaultChecked":ge=Te;break;case"value":b=Te;break;case"defaultValue":U=Te;break;case"children":case"dangerouslySetInnerHTML":if(Te!=null)throw Error(s(137,a));break;default:yn(r,a,g,Te,u,null)}}he(r,b,U,ee,ge,O,_,!1);return;case"select":Bt("invalid",r),g=O=b=null;for(_ in u)if(u.hasOwnProperty(_)&&(U=u[_],U!=null))switch(_){case"value":b=U;break;case"defaultValue":O=U;break;case"multiple":g=U;default:yn(r,a,_,U,u,null)}a=b,u=O,r.multiple=!!g,a!=null?Xe(r,!!g,a,!1):u!=null&&Xe(r,!!g,u,!0);return;case"textarea":Bt("invalid",r),b=_=g=null;for(O in u)if(u.hasOwnProperty(O)&&(U=u[O],U!=null))switch(O){case"value":g=U;break;case"defaultValue":_=U;break;case"children":b=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(s(91));break;default:yn(r,a,O,U,u,null)}or(r,g,_,b);return;case"option":for(ee in u)if(u.hasOwnProperty(ee)&&(g=u[ee],g!=null))switch(ee){case"selected":r.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:yn(r,a,ee,g,u,null)}return;case"dialog":Bt("beforetoggle",r),Bt("toggle",r),Bt("cancel",r),Bt("close",r);break;case"iframe":case"object":Bt("load",r);break;case"video":case"audio":for(g=0;g<pu.length;g++)Bt(pu[g],r);break;case"image":Bt("error",r),Bt("load",r);break;case"details":Bt("toggle",r);break;case"embed":case"source":case"link":Bt("error",r),Bt("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ge in u)if(u.hasOwnProperty(ge)&&(g=u[ge],g!=null))switch(ge){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:yn(r,a,ge,g,u,null)}return;default:if(un(a)){for(Te in u)u.hasOwnProperty(Te)&&(g=u[Te],g!==void 0&&P1(r,a,Te,g,u,void 0));return}}for(U in u)u.hasOwnProperty(U)&&(g=u[U],g!=null&&yn(r,a,U,g,u,null))}function yS(r,a,u,g){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,b=null,O=null,U=null,ee=null,ge=null,Te=null;for(we in u){var Ce=u[we];if(u.hasOwnProperty(we)&&Ce!=null)switch(we){case"checked":break;case"value":break;case"defaultValue":ee=Ce;default:g.hasOwnProperty(we)||yn(r,a,we,null,g,Ce)}}for(var pe in g){var we=g[pe];if(Ce=u[pe],g.hasOwnProperty(pe)&&(we!=null||Ce!=null))switch(pe){case"type":b=we;break;case"name":_=we;break;case"checked":ge=we;break;case"defaultChecked":Te=we;break;case"value":O=we;break;case"defaultValue":U=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(s(137,a));break;default:we!==Ce&&yn(r,a,pe,we,g,Ce)}}Gn(r,O,U,ee,ge,Te,b,_);return;case"select":we=O=U=pe=null;for(b in u)if(ee=u[b],u.hasOwnProperty(b)&&ee!=null)switch(b){case"value":break;case"multiple":we=ee;default:g.hasOwnProperty(b)||yn(r,a,b,null,g,ee)}for(_ in g)if(b=g[_],ee=u[_],g.hasOwnProperty(_)&&(b!=null||ee!=null))switch(_){case"value":pe=b;break;case"defaultValue":U=b;break;case"multiple":O=b;default:b!==ee&&yn(r,a,_,b,g,ee)}a=U,u=O,g=we,pe!=null?Xe(r,!!u,pe,!1):!!g!=!!u&&(a!=null?Xe(r,!!u,a,!0):Xe(r,!!u,u?[]:"",!1));return;case"textarea":we=pe=null;for(U in u)if(_=u[U],u.hasOwnProperty(U)&&_!=null&&!g.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:yn(r,a,U,null,g,_)}for(O in g)if(_=g[O],b=u[O],g.hasOwnProperty(O)&&(_!=null||b!=null))switch(O){case"value":pe=_;break;case"defaultValue":we=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(s(91));break;default:_!==b&&yn(r,a,O,_,g,b)}qn(r,pe,we);return;case"option":for(var We in u)if(pe=u[We],u.hasOwnProperty(We)&&pe!=null&&!g.hasOwnProperty(We))switch(We){case"selected":r.selected=!1;break;default:yn(r,a,We,null,g,pe)}for(ee in g)if(pe=g[ee],we=u[ee],g.hasOwnProperty(ee)&&pe!==we&&(pe!=null||we!=null))switch(ee){case"selected":r.selected=pe&&typeof pe!="function"&&typeof pe!="symbol";break;default:yn(r,a,ee,pe,g,we)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var lt in u)pe=u[lt],u.hasOwnProperty(lt)&&pe!=null&&!g.hasOwnProperty(lt)&&yn(r,a,lt,null,g,pe);for(ge in g)if(pe=g[ge],we=u[ge],g.hasOwnProperty(ge)&&pe!==we&&(pe!=null||we!=null))switch(ge){case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(s(137,a));break;default:yn(r,a,ge,pe,g,we)}return;default:if(un(a)){for(var En in u)pe=u[En],u.hasOwnProperty(En)&&pe!==void 0&&!g.hasOwnProperty(En)&&P1(r,a,En,void 0,g,pe);for(Te in g)pe=g[Te],we=u[Te],!g.hasOwnProperty(Te)||pe===we||pe===void 0&&we===void 0||P1(r,a,Te,pe,g,we);return}}for(var oe in u)pe=u[oe],u.hasOwnProperty(oe)&&pe!=null&&!g.hasOwnProperty(oe)&&yn(r,a,oe,null,g,pe);for(Ce in g)pe=g[Ce],we=u[Ce],!g.hasOwnProperty(Ce)||pe===we||pe==null&&we==null||yn(r,a,Ce,pe,g,we)}function Wx(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ES(){if(typeof performance.getEntriesByType=="function"){for(var r=0,a=0,u=performance.getEntriesByType("resource"),g=0;g<u.length;g++){var _=u[g],b=_.transferSize,O=_.initiatorType,U=_.duration;if(b&&U&&Wx(O)){for(O=0,U=_.responseEnd,g+=1;g<u.length;g++){var ee=u[g],ge=ee.startTime;if(ge>U)break;var Te=ee.transferSize,Ce=ee.initiatorType;Te&&Wx(Ce)&&(ee=ee.responseEnd,O+=Te*(ee<U?1:(U-ge)/(ee-ge)))}if(--g,a+=8*(b+O)/(_.duration/1e3),r++,10<r)break}}if(0<r)return a/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var L1=null,k1=null;function gf(r){return r.nodeType===9?r:r.ownerDocument}function Kx(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Qx(r,a){if(r===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&a==="foreignObject"?0:r}function B1(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var U1=null;function _S(){var r=window.event;return r&&r.type==="popstate"?r===U1?!1:(U1=r,!0):(U1=null,!1)}var Zx=typeof setTimeout=="function"?setTimeout:void 0,wS=typeof clearTimeout=="function"?clearTimeout:void 0,Jx=typeof Promise=="function"?Promise:void 0,AS=typeof queueMicrotask=="function"?queueMicrotask:typeof Jx<"u"?function(r){return Jx.resolve(null).then(r).catch(bS)}:Zx;function bS(r){setTimeout(function(){throw r})}function Eo(r){return r==="head"}function $x(r,a){var u=a,g=0;do{var _=u.nextSibling;if(r.removeChild(u),_&&_.nodeType===8)if(u=_.data,u==="/$"||u==="/&"){if(g===0){r.removeChild(_),oc(a);return}g--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")g++;else if(u==="html")yu(r.ownerDocument.documentElement);else if(u==="head"){u=r.ownerDocument.head,yu(u);for(var b=u.firstChild;b;){var O=b.nextSibling,U=b.nodeName;b[vi]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&b.rel.toLowerCase()==="stylesheet"||u.removeChild(b),b=O}}else u==="body"&&yu(r.ownerDocument.body);u=_}while(u);oc(a)}function ey(r,a){var u=r;r=0;do{var g=u.nextSibling;if(u.nodeType===1?a?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(a?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(r===0)break;r--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||r++;u=g}while(u)}function V1(r){var a=r.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var u=a;switch(a=a.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":V1(u),Sr(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}r.removeChild(u)}}function TS(r,a,u,g){for(;r.nodeType===1;){var _=u;if(r.nodeName.toLowerCase()!==a.toLowerCase()){if(!g&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(g){if(!r[vi])switch(a){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(b=r.getAttribute("rel"),b==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(b!==_.rel||r.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||r.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||r.getAttribute("title")!==(_.title==null?null:_.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(b=r.getAttribute("src"),(b!==(_.src==null?null:_.src)||r.getAttribute("type")!==(_.type==null?null:_.type)||r.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&b&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(a==="input"&&r.type==="hidden"){var b=_.name==null?null:""+_.name;if(_.type==="hidden"&&r.getAttribute("name")===b)return r}else return r;if(r=Es(r.nextSibling),r===null)break}return null}function vS(r,a,u){if(a==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!u||(r=Es(r.nextSibling),r===null))return null;return r}function ty(r,a){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!a||(r=Es(r.nextSibling),r===null))return null;return r}function j1(r){return r.data==="$?"||r.data==="$~"}function F1(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function SS(r,a){var u=r.ownerDocument;if(r.data==="$~")r._reactRetry=a;else if(r.data!=="$?"||u.readyState!=="loading")a();else{var g=function(){a(),u.removeEventListener("DOMContentLoaded",g)};u.addEventListener("DOMContentLoaded",g),r._reactRetry=g}}function Es(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return r}var z1=null;function ny(r){r=r.nextSibling;for(var a=0;r;){if(r.nodeType===8){var u=r.data;if(u==="/$"||u==="/&"){if(a===0)return Es(r.nextSibling);a--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||a++}r=r.nextSibling}return null}function ry(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var u=r.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(a===0)return r;a--}else u!=="/$"&&u!=="/&"||a++}r=r.previousSibling}return null}function iy(r,a,u){switch(a=gf(u),r){case"html":if(r=a.documentElement,!r)throw Error(s(452));return r;case"head":if(r=a.head,!r)throw Error(s(453));return r;case"body":if(r=a.body,!r)throw Error(s(454));return r;default:throw Error(s(451))}}function yu(r){for(var a=r.attributes;a.length;)r.removeAttributeNode(a[0]);Sr(r)}var _s=new Map,sy=new Set;function mf(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Ma=be.d;be.d={f:CS,r:IS,D:NS,C:RS,L:OS,m:DS,X:PS,S:MS,M:LS};function CS(){var r=Ma.f(),a=af();return r||a}function IS(r){var a=Dt(r);a!==null&&a.tag===5&&a.type==="form"?A2(a):Ma.r(r)}var ic=typeof document>"u"?null:document;function ay(r,a,u){var g=ic;if(g&&typeof a=="string"&&a){var _=It(a);_='link[rel="'+r+'"][href="'+_+'"]',typeof u=="string"&&(_+='[crossorigin="'+u+'"]'),sy.has(_)||(sy.add(_),r={rel:r,crossOrigin:u,href:a},g.querySelector(_)===null&&(a=g.createElement("link"),qr(a,"link",r),Nn(a),g.head.appendChild(a)))}}function NS(r){Ma.D(r),ay("dns-prefetch",r,null)}function RS(r,a){Ma.C(r,a),ay("preconnect",r,a)}function OS(r,a,u){Ma.L(r,a,u);var g=ic;if(g&&r&&a){var _='link[rel="preload"][as="'+It(a)+'"]';a==="image"&&u&&u.imageSrcSet?(_+='[imagesrcset="'+It(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(_+='[imagesizes="'+It(u.imageSizes)+'"]')):_+='[href="'+It(r)+'"]';var b=_;switch(a){case"style":b=sc(r);break;case"script":b=ac(r)}_s.has(b)||(r=I({rel:"preload",href:a==="image"&&u&&u.imageSrcSet?void 0:r,as:a},u),_s.set(b,r),g.querySelector(_)!==null||a==="style"&&g.querySelector(Eu(b))||a==="script"&&g.querySelector(_u(b))||(a=g.createElement("link"),qr(a,"link",r),Nn(a),g.head.appendChild(a)))}}function DS(r,a){Ma.m(r,a);var u=ic;if(u&&r){var g=a&&typeof a.as=="string"?a.as:"script",_='link[rel="modulepreload"][as="'+It(g)+'"][href="'+It(r)+'"]',b=_;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=ac(r)}if(!_s.has(b)&&(r=I({rel:"modulepreload",href:r},a),_s.set(b,r),u.querySelector(_)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(_u(b)))return}g=u.createElement("link"),qr(g,"link",r),Nn(g),u.head.appendChild(g)}}}function MS(r,a,u){Ma.S(r,a,u);var g=ic;if(g&&r){var _=ar(g).hoistableStyles,b=sc(r);a=a||"default";var O=_.get(b);if(!O){var U={loading:0,preload:null};if(O=g.querySelector(Eu(b)))U.loading=5;else{r=I({rel:"stylesheet",href:r,"data-precedence":a},u),(u=_s.get(b))&&H1(r,u);var ee=O=g.createElement("link");Nn(ee),qr(ee,"link",r),ee._p=new Promise(function(ge,Te){ee.onload=ge,ee.onerror=Te}),ee.addEventListener("load",function(){U.loading|=1}),ee.addEventListener("error",function(){U.loading|=2}),U.loading|=4,pf(O,a,g)}O={type:"stylesheet",instance:O,count:1,state:U},_.set(b,O)}}}function PS(r,a){Ma.X(r,a);var u=ic;if(u&&r){var g=ar(u).hoistableScripts,_=ac(r),b=g.get(_);b||(b=u.querySelector(_u(_)),b||(r=I({src:r,async:!0},a),(a=_s.get(_))&&G1(r,a),b=u.createElement("script"),Nn(b),qr(b,"link",r),u.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},g.set(_,b))}}function LS(r,a){Ma.M(r,a);var u=ic;if(u&&r){var g=ar(u).hoistableScripts,_=ac(r),b=g.get(_);b||(b=u.querySelector(_u(_)),b||(r=I({src:r,async:!0,type:"module"},a),(a=_s.get(_))&&G1(r,a),b=u.createElement("script"),Nn(b),qr(b,"link",r),u.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},g.set(_,b))}}function oy(r,a,u,g){var _=(_=Le.current)?mf(_):null;if(!_)throw Error(s(446));switch(r){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(a=sc(u.href),u=ar(_).hoistableStyles,g=u.get(a),g||(g={type:"style",instance:null,count:0,state:null},u.set(a,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){r=sc(u.href);var b=ar(_).hoistableStyles,O=b.get(r);if(O||(_=_.ownerDocument||_,O={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(r,O),(b=_.querySelector(Eu(r)))&&!b._p&&(O.instance=b,O.state.loading=5),_s.has(r)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},_s.set(r,u),b||kS(_,r,u,O.state))),a&&g===null)throw Error(s(528,""));return O}if(a&&g!==null)throw Error(s(529,""));return null;case"script":return a=u.async,u=u.src,typeof u=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=ac(u),u=ar(_).hoistableScripts,g=u.get(a),g||(g={type:"script",instance:null,count:0,state:null},u.set(a,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,r))}}function sc(r){return'href="'+It(r)+'"'}function Eu(r){return'link[rel="stylesheet"]['+r+"]"}function ly(r){return I({},r,{"data-precedence":r.precedence,precedence:null})}function kS(r,a,u,g){r.querySelector('link[rel="preload"][as="style"]['+a+"]")?g.loading=1:(a=r.createElement("link"),g.preload=a,a.addEventListener("load",function(){return g.loading|=1}),a.addEventListener("error",function(){return g.loading|=2}),qr(a,"link",u),Nn(a),r.head.appendChild(a))}function ac(r){return'[src="'+It(r)+'"]'}function _u(r){return"script[async]"+r}function cy(r,a,u){if(a.count++,a.instance===null)switch(a.type){case"style":var g=r.querySelector('style[data-href~="'+It(u.href)+'"]');if(g)return a.instance=g,Nn(g),g;var _=I({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return g=(r.ownerDocument||r).createElement("style"),Nn(g),qr(g,"style",_),pf(g,u.precedence,r),a.instance=g;case"stylesheet":_=sc(u.href);var b=r.querySelector(Eu(_));if(b)return a.state.loading|=4,a.instance=b,Nn(b),b;g=ly(u),(_=_s.get(_))&&H1(g,_),b=(r.ownerDocument||r).createElement("link"),Nn(b);var O=b;return O._p=new Promise(function(U,ee){O.onload=U,O.onerror=ee}),qr(b,"link",g),a.state.loading|=4,pf(b,u.precedence,r),a.instance=b;case"script":return b=ac(u.src),(_=r.querySelector(_u(b)))?(a.instance=_,Nn(_),_):(g=u,(_=_s.get(b))&&(g=I({},u),G1(g,_)),r=r.ownerDocument||r,_=r.createElement("script"),Nn(_),qr(_,"link",g),r.head.appendChild(_),a.instance=_);case"void":return null;default:throw Error(s(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(g=a.instance,a.state.loading|=4,pf(g,u.precedence,r));return a.instance}function pf(r,a,u){for(var g=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=g.length?g[g.length-1]:null,b=_,O=0;O<g.length;O++){var U=g[O];if(U.dataset.precedence===a)b=U;else if(b!==_)break}b?b.parentNode.insertBefore(r,b.nextSibling):(a=u.nodeType===9?u.head:u,a.insertBefore(r,a.firstChild))}function H1(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.title==null&&(r.title=a.title)}function G1(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.integrity==null&&(r.integrity=a.integrity)}var xf=null;function uy(r,a,u){if(xf===null){var g=new Map,_=xf=new Map;_.set(u,g)}else _=xf,g=_.get(u),g||(g=new Map,_.set(u,g));if(g.has(r))return g;for(g.set(r,null),u=u.getElementsByTagName(r),_=0;_<u.length;_++){var b=u[_];if(!(b[vi]||b[bn]||r==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var O=b.getAttribute(a)||"";O=r+O;var U=g.get(O);U?U.push(b):g.set(O,[b])}}return g}function hy(r,a,u){r=r.ownerDocument||r,r.head.insertBefore(u,a==="title"?r.querySelector("head > title"):null)}function BS(r,a,u){if(u===1||a.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return r=a.disabled,typeof a.precedence=="string"&&r==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function fy(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function US(r,a,u,g){if(u.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var _=sc(g.href),b=a.querySelector(Eu(_));if(b){a=b._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(r.count++,r=yf.bind(r),a.then(r,r)),u.state.loading|=4,u.instance=b,Nn(b);return}b=a.ownerDocument||a,g=ly(g),(_=_s.get(_))&&H1(g,_),b=b.createElement("link"),Nn(b);var O=b;O._p=new Promise(function(U,ee){O.onload=U,O.onerror=ee}),qr(b,"link",g),u.instance=b}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(u,a),(a=u.state.preload)&&(u.state.loading&3)===0&&(r.count++,u=yf.bind(r),a.addEventListener("load",u),a.addEventListener("error",u))}}var q1=0;function VS(r,a){return r.stylesheets&&r.count===0&&_f(r,r.stylesheets),0<r.count||0<r.imgCount?function(u){var g=setTimeout(function(){if(r.stylesheets&&_f(r,r.stylesheets),r.unsuspend){var b=r.unsuspend;r.unsuspend=null,b()}},6e4+a);0<r.imgBytes&&q1===0&&(q1=62500*ES());var _=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&_f(r,r.stylesheets),r.unsuspend)){var b=r.unsuspend;r.unsuspend=null,b()}},(r.imgBytes>q1?50:800)+a);return r.unsuspend=u,function(){r.unsuspend=null,clearTimeout(g),clearTimeout(_)}}:null}function yf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)_f(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Ef=null;function _f(r,a){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Ef=new Map,a.forEach(jS,r),Ef=null,yf.call(r))}function jS(r,a){if(!(a.state.loading&4)){var u=Ef.get(r);if(u)var g=u.get(null);else{u=new Map,Ef.set(r,u);for(var _=r.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<_.length;b++){var O=_[b];(O.nodeName==="LINK"||O.getAttribute("media")!=="not all")&&(u.set(O.dataset.precedence,O),g=O)}g&&u.set(null,g)}_=a.instance,O=_.getAttribute("data-precedence"),b=u.get(O)||g,b===g&&u.set(null,_),u.set(O,_),this.count++,g=yf.bind(this),_.addEventListener("load",g),_.addEventListener("error",g),b?b.parentNode.insertBefore(_,b.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(_,r.firstChild)),a.state.loading|=4}}var wu={$$typeof:Q,Provider:null,Consumer:null,_currentValue:Ge,_currentValue2:Ge,_threadCount:0};function FS(r,a,u,g,_,b,O,U,ee){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gr(0),this.hiddenUpdates=gr(null),this.identifierPrefix=g,this.onUncaughtError=_,this.onCaughtError=b,this.onRecoverableError=O,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ee,this.incompleteTransitions=new Map}function dy(r,a,u,g,_,b,O,U,ee,ge,Te,Ce){return r=new FS(r,a,u,O,ee,ge,Te,Ce,U),a=1,b===!0&&(a|=24),b=Gi(3,null,null,a),r.current=b,b.stateNode=r,a=T0(),a.refCount++,r.pooledCache=a,a.refCount++,b.memoizedState={element:g,isDehydrated:u,cache:a},I0(b),r}function gy(r){return r?(r=Bl,r):Bl}function my(r,a,u,g,_,b){_=gy(_),g.context===null?g.context=_:g.pendingContext=_,g=oo(a),g.payload={element:u},b=b===void 0?null:b,b!==null&&(g.callback=b),u=lo(r,g,a),u!==null&&(Pi(u,r,a),$c(u,r,a))}function py(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var u=r.retryLane;r.retryLane=u!==0&&u<a?u:a}}function Y1(r,a){py(r,a),(r=r.alternate)&&py(r,a)}function xy(r){if(r.tag===13||r.tag===31){var a=il(r,67108864);a!==null&&Pi(a,r,67108864),Y1(r,67108864)}}function yy(r){if(r.tag===13||r.tag===31){var a=Ki();a=kn(a);var u=il(r,a);u!==null&&Pi(u,r,a),Y1(r,a)}}var wf=!0;function zS(r,a,u,g){var _=me.T;me.T=null;var b=be.p;try{be.p=2,X1(r,a,u,g)}finally{be.p=b,me.T=_}}function HS(r,a,u,g){var _=me.T;me.T=null;var b=be.p;try{be.p=8,X1(r,a,u,g)}finally{be.p=b,me.T=_}}function X1(r,a,u,g){if(wf){var _=W1(g);if(_===null)M1(r,a,g,Af,u),_y(r,g);else if(qS(_,r,a,u,g))g.stopPropagation();else if(_y(r,g),a&4&&-1<GS.indexOf(r)){for(;_!==null;){var b=Dt(_);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var O=$r(b.pendingLanes);if(O!==0){var U=b;for(U.pendingLanes|=2,U.entangledLanes|=2;O;){var ee=1<<31-at(O);U.entanglements[1]|=ee,O&=~ee}Gs(b),(ln&6)===0&&(rf=mn()+500,mu(0))}}break;case 31:case 13:U=il(b,2),U!==null&&Pi(U,b,2),af(),Y1(b,2)}if(b=W1(g),b===null&&M1(r,a,g,Af,u),b===_)break;_=b}_!==null&&g.stopPropagation()}else M1(r,a,g,null,u)}}function W1(r){return r=Si(r),K1(r)}var Af=null;function K1(r){if(Af=null,r=pn(r),r!==null){var a=h(r);if(a===null)r=null;else{var u=a.tag;if(u===13){if(r=p(a),r!==null)return r;r=null}else if(u===31){if(r=T(a),r!==null)return r;r=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null)}}return Af=r,null}function Ey(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(hi()){case dr:return 2;case Zr:return 8;case sr:case Qn:return 32;case Ps:return 268435456;default:return 32}default:return 32}}var Q1=!1,_o=null,wo=null,Ao=null,Au=new Map,bu=new Map,bo=[],GS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _y(r,a){switch(r){case"focusin":case"focusout":_o=null;break;case"dragenter":case"dragleave":wo=null;break;case"mouseover":case"mouseout":Ao=null;break;case"pointerover":case"pointerout":Au.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":bu.delete(a.pointerId)}}function Tu(r,a,u,g,_,b){return r===null||r.nativeEvent!==b?(r={blockedOn:a,domEventName:u,eventSystemFlags:g,nativeEvent:b,targetContainers:[_]},a!==null&&(a=Dt(a),a!==null&&xy(a)),r):(r.eventSystemFlags|=g,a=r.targetContainers,_!==null&&a.indexOf(_)===-1&&a.push(_),r)}function qS(r,a,u,g,_){switch(a){case"focusin":return _o=Tu(_o,r,a,u,g,_),!0;case"dragenter":return wo=Tu(wo,r,a,u,g,_),!0;case"mouseover":return Ao=Tu(Ao,r,a,u,g,_),!0;case"pointerover":var b=_.pointerId;return Au.set(b,Tu(Au.get(b)||null,r,a,u,g,_)),!0;case"gotpointercapture":return b=_.pointerId,bu.set(b,Tu(bu.get(b)||null,r,a,u,g,_)),!0}return!1}function wy(r){var a=pn(r.target);if(a!==null){var u=h(a);if(u!==null){if(a=u.tag,a===13){if(a=p(u),a!==null){r.blockedOn=a,Fe(r.priority,function(){yy(u)});return}}else if(a===31){if(a=T(u),a!==null){r.blockedOn=a,Fe(r.priority,function(){yy(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){r.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}r.blockedOn=null}function bf(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var u=W1(r.nativeEvent);if(u===null){u=r.nativeEvent;var g=new u.constructor(u.type,u);la=g,u.target.dispatchEvent(g),la=null}else return a=Dt(u),a!==null&&xy(a),r.blockedOn=u,!1;a.shift()}return!0}function Ay(r,a,u){bf(r)&&u.delete(a)}function YS(){Q1=!1,_o!==null&&bf(_o)&&(_o=null),wo!==null&&bf(wo)&&(wo=null),Ao!==null&&bf(Ao)&&(Ao=null),Au.forEach(Ay),bu.forEach(Ay)}function Tf(r,a){r.blockedOn===a&&(r.blockedOn=null,Q1||(Q1=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,YS)))}var vf=null;function by(r){vf!==r&&(vf=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){vf===r&&(vf=null);for(var a=0;a<r.length;a+=3){var u=r[a],g=r[a+1],_=r[a+2];if(typeof g!="function"){if(K1(g||u)===null)continue;break}var b=Dt(u);b!==null&&(r.splice(a,3),a-=3,W0(b,{pending:!0,data:_,method:u.method,action:g},g,_))}}))}function oc(r){function a(ee){return Tf(ee,r)}_o!==null&&Tf(_o,r),wo!==null&&Tf(wo,r),Ao!==null&&Tf(Ao,r),Au.forEach(a),bu.forEach(a);for(var u=0;u<bo.length;u++){var g=bo[u];g.blockedOn===r&&(g.blockedOn=null)}for(;0<bo.length&&(u=bo[0],u.blockedOn===null);)wy(u),u.blockedOn===null&&bo.shift();if(u=(r.ownerDocument||r).$$reactFormReplay,u!=null)for(g=0;g<u.length;g+=3){var _=u[g],b=u[g+1],O=_[Wt]||null;if(typeof b=="function")O||by(u);else if(O){var U=null;if(b&&b.hasAttribute("formAction")){if(_=b,O=b[Wt]||null)U=O.formAction;else if(K1(_)!==null)continue}else U=O.action;typeof U=="function"?u[g+1]=U:(u.splice(g,3),g-=3),by(u)}}}function Ty(){function r(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(O){return _=O})},focusReset:"manual",scroll:"manual"})}function a(){_!==null&&(_(),_=null),g||setTimeout(u,20)}function u(){if(!g&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,_=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(u,100),function(){g=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),_!==null&&(_(),_=null)}}}function Z1(r){this._internalRoot=r}Sf.prototype.render=Z1.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(s(409));var u=a.current,g=Ki();my(u,g,r,a,null,null)},Sf.prototype.unmount=Z1.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;my(r.current,2,null,r,null,null),af(),a[vr]=null}};function Sf(r){this._internalRoot=r}Sf.prototype.unstable_scheduleHydration=function(r){if(r){var a=Tr();r={blockedOn:null,target:r,priority:a};for(var u=0;u<bo.length&&a!==0&&a<bo[u].priority;u++);bo.splice(u,0,r),u===0&&wy(r)}};var vy=e.version;if(vy!=="19.2.3")throw Error(s(527,vy,"19.2.3"));be.findDOMNode=function(r){var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=E(a),r=r!==null?C(r):null,r=r===null?null:r.stateNode,r};var XS={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:me,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cf.isDisabled&&Cf.supportsFiber)try{Yt=Cf.inject(XS),Me=Cf}catch{}}return Su.createRoot=function(r,a){if(!c(r))throw Error(s(299));var u=!1,g="",_=D2,b=M2,O=P2;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onUncaughtError!==void 0&&(_=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(O=a.onRecoverableError)),a=dy(r,1,!1,null,null,u,g,null,_,b,O,Ty),r[vr]=a.current,D1(r),new Z1(a)},Su.hydrateRoot=function(r,a,u){if(!c(r))throw Error(s(299));var g=!1,_="",b=D2,O=M2,U=P2,ee=null;return u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(_=u.identifierPrefix),u.onUncaughtError!==void 0&&(b=u.onUncaughtError),u.onCaughtError!==void 0&&(O=u.onCaughtError),u.onRecoverableError!==void 0&&(U=u.onRecoverableError),u.formState!==void 0&&(ee=u.formState)),a=dy(r,1,!0,a,u??null,g,_,ee,b,O,U,Ty),a.context=gy(null),u=a.current,g=Ki(),g=kn(g),_=oo(g),_.callback=null,lo(u,_,g),u=g,a.current.lanes=u,di(a,u),Gs(a),r[vr]=a.current,D1(r),new Sf(a)},Su.version="19.2.3",Su}var Ly;function iC(){if(Ly)return eg.exports;Ly=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),eg.exports=rC(),eg.exports}var sC=iC();const aC=hm(sC);/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ky="popstate";function oC(n={}){function e(c,h){let{pathname:p="/",search:T="",hash:w=""}=Nl(c.location.hash.substring(1));return!p.startsWith("/")&&!p.startsWith(".")&&(p="/"+p),bg("",{pathname:p,search:T,hash:w},h.state&&h.state.usr||null,h.state&&h.state.key||"default")}function t(c,h){let p=c.document.querySelector("base"),T="";if(p&&p.getAttribute("href")){let w=c.location.href,E=w.indexOf("#");T=E===-1?w:w.slice(0,E)}return T+"#"+(typeof h=="string"?h:Xu(h))}function s(c,h){ts(c.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(h)})`)}return cC(e,t,s,n)}function zn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function ts(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function lC(){return Math.random().toString(36).substring(2,10)}function By(n,e){return{usr:n.state,key:n.key,idx:e}}function bg(n,e,t=null,s){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Nl(e):e,state:t,key:e&&e.key||s||lC()}}function Xu({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Nl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substring(s),n=n.substring(0,s)),n&&(e.pathname=n)}return e}function cC(n,e,t,s={}){let{window:c=document.defaultView,v5Compat:h=!1}=s,p=c.history,T="POP",w=null,E=C();E==null&&(E=0,p.replaceState({...p.state,idx:E},""));function C(){return(p.state||{idx:null}).idx}function I(){T="POP";let q=C(),_e=q==null?null:q-E;E=q,w&&w({action:T,location:$.location,delta:_e})}function M(q,_e){T="PUSH";let ae=bg($.location,q,_e);t&&t(ae,q),E=C()+1;let Q=By(ae,E),le=$.createHref(ae);try{p.pushState(Q,"",le)}catch(De){if(De instanceof DOMException&&De.name==="DataCloneError")throw De;c.location.assign(le)}h&&w&&w({action:T,location:$.location,delta:1})}function B(q,_e){T="REPLACE";let ae=bg($.location,q,_e);t&&t(ae,q),E=C();let Q=By(ae,E),le=$.createHref(ae);p.replaceState(Q,"",le),h&&w&&w({action:T,location:$.location,delta:0})}function W(q){return uC(q)}let $={get action(){return T},get location(){return n(c,p)},listen(q){if(w)throw new Error("A history only accepts one active listener");return c.addEventListener(ky,I),w=q,()=>{c.removeEventListener(ky,I),w=null}},createHref(q){return e(c,q)},createURL:W,encodeLocation(q){let _e=W(q);return{pathname:_e.pathname,search:_e.search,hash:_e.hash}},push:M,replace:B,go(q){return p.go(q)}};return $}function uC(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),zn(t,"No window.location.(origin|href) available to create URL");let s=typeof n=="string"?n:Xu(n);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function Ww(n,e,t="/"){return hC(n,e,t,!1)}function hC(n,e,t,s){let c=typeof e=="string"?Nl(e):e,h=Va(c.pathname||"/",t);if(h==null)return null;let p=Kw(n);fC(p);let T=null;for(let w=0;T==null&&w<p.length;++w){let E=bC(h);T=wC(p[w],E,s)}return T}function Kw(n,e=[],t=[],s="",c=!1){let h=(p,T,w=c,E)=>{let C={relativePath:E===void 0?p.path||"":E,caseSensitive:p.caseSensitive===!0,childrenIndex:T,route:p};if(C.relativePath.startsWith("/")){if(!C.relativePath.startsWith(s)&&w)return;zn(C.relativePath.startsWith(s),`Absolute route path "${C.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),C.relativePath=C.relativePath.slice(s.length)}let I=Ua([s,C.relativePath]),M=t.concat(C);p.children&&p.children.length>0&&(zn(p.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${I}".`),Kw(p.children,e,M,I,w)),!(p.path==null&&!p.index)&&e.push({path:I,score:EC(I,p.index),routesMeta:M})};return n.forEach((p,T)=>{var w;if(p.path===""||!((w=p.path)!=null&&w.includes("?")))h(p,T);else for(let E of Qw(p.path))h(p,T,!0,E)}),e}function Qw(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,c=t.endsWith("?"),h=t.replace(/\?$/,"");if(s.length===0)return c?[h,""]:[h];let p=Qw(s.join("/")),T=[];return T.push(...p.map(w=>w===""?h:[h,w].join("/"))),c&&T.push(...p),T.map(w=>n.startsWith("/")&&w===""?"/":w)}function fC(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:_C(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var dC=/^:[\w-]+$/,gC=3,mC=2,pC=1,xC=10,yC=-2,Uy=n=>n==="*";function EC(n,e){let t=n.split("/"),s=t.length;return t.some(Uy)&&(s+=yC),e&&(s+=mC),t.filter(c=>!Uy(c)).reduce((c,h)=>c+(dC.test(h)?gC:h===""?pC:xC),s)}function _C(n,e){return n.length===e.length&&n.slice(0,-1).every((s,c)=>s===e[c])?n[n.length-1]-e[e.length-1]:0}function wC(n,e,t=!1){let{routesMeta:s}=n,c={},h="/",p=[];for(let T=0;T<s.length;++T){let w=s[T],E=T===s.length-1,C=h==="/"?e:e.slice(h.length)||"/",I=nd({path:w.relativePath,caseSensitive:w.caseSensitive,end:E},C),M=w.route;if(!I&&E&&t&&!s[s.length-1].route.index&&(I=nd({path:w.relativePath,caseSensitive:w.caseSensitive,end:!1},C)),!I)return null;Object.assign(c,I.params),p.push({params:c,pathname:Ua([h,I.pathname]),pathnameBase:CC(Ua([h,I.pathnameBase])),route:M}),I.pathnameBase!=="/"&&(h=Ua([h,I.pathnameBase]))}return p}function nd(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=AC(n.path,n.caseSensitive,n.end),c=e.match(t);if(!c)return null;let h=c[0],p=h.replace(/(.)\/+$/,"$1"),T=c.slice(1);return{params:s.reduce((E,{paramName:C,isOptional:I},M)=>{if(C==="*"){let W=T[M]||"";p=h.slice(0,h.length-W.length).replace(/(.)\/+$/,"$1")}const B=T[M];return I&&!B?E[C]=void 0:E[C]=(B||"").replace(/%2F/g,"/"),E},{}),pathname:h,pathnameBase:p,pattern:n}}function AC(n,e=!1,t=!0){ts(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let s=[],c="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(p,T,w)=>(s.push({paramName:T,isOptional:w!=null}),w?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(s.push({paramName:"*"}),c+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?c+="\\/*$":n!==""&&n!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,e?void 0:"i"),s]}function bC(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ts(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Va(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}var Zw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,TC=n=>Zw.test(n);function vC(n,e="/"){let{pathname:t,search:s="",hash:c=""}=typeof n=="string"?Nl(n):n,h;if(t)if(TC(t))h=t;else{if(t.includes("//")){let p=t;t=t.replace(/\/\/+/g,"/"),ts(!1,`Pathnames cannot have embedded double slashes - normalizing ${p} -> ${t}`)}t.startsWith("/")?h=Vy(t.substring(1),"/"):h=Vy(t,e)}else h=e;return{pathname:h,search:IC(s),hash:NC(c)}}function Vy(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(c=>{c===".."?t.length>1&&t.pop():c!=="."&&t.push(c)}),t.length>1?t.join("/"):"/"}function ig(n,e,t,s){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function SC(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function dm(n){let e=SC(n);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function gm(n,e,t,s=!1){let c;typeof n=="string"?c=Nl(n):(c={...n},zn(!c.pathname||!c.pathname.includes("?"),ig("?","pathname","search",c)),zn(!c.pathname||!c.pathname.includes("#"),ig("#","pathname","hash",c)),zn(!c.search||!c.search.includes("#"),ig("#","search","hash",c)));let h=n===""||c.pathname==="",p=h?"/":c.pathname,T;if(p==null)T=t;else{let I=e.length-1;if(!s&&p.startsWith("..")){let M=p.split("/");for(;M[0]==="..";)M.shift(),I-=1;c.pathname=M.join("/")}T=I>=0?e[I]:"/"}let w=vC(c,T),E=p&&p!=="/"&&p.endsWith("/"),C=(h||p===".")&&t.endsWith("/");return!w.pathname.endsWith("/")&&(E||C)&&(w.pathname+="/"),w}var Ua=n=>n.join("/").replace(/\/\/+/g,"/"),CC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),IC=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,NC=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,RC=class{constructor(n,e,t,s=!1){this.status=n,this.statusText=e||"",this.internal=s,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function OC(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function DC(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Jw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function $w(n,e){let t=n;if(typeof t!="string"||!Zw.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let s=t,c=!1;if(Jw)try{let h=new URL(window.location.href),p=t.startsWith("//")?new URL(h.protocol+t):new URL(t),T=Va(p.pathname,e);p.origin===h.origin&&T!=null?t=T+p.search+p.hash:c=!0}catch{ts(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:c,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var eA=["POST","PUT","PATCH","DELETE"];new Set(eA);var MC=["GET",...eA];new Set(MC);var Mc=ne.createContext(null);Mc.displayName="DataRouter";var Bd=ne.createContext(null);Bd.displayName="DataRouterState";var PC=ne.createContext(!1),tA=ne.createContext({isTransitioning:!1});tA.displayName="ViewTransition";var LC=ne.createContext(new Map);LC.displayName="Fetchers";var kC=ne.createContext(null);kC.displayName="Await";var ns=ne.createContext(null);ns.displayName="Navigation";var ih=ne.createContext(null);ih.displayName="Location";var na=ne.createContext({outlet:null,matches:[],isDataRoute:!1});na.displayName="Route";var mm=ne.createContext(null);mm.displayName="RouteError";var nA="REACT_ROUTER_ERROR",BC="REDIRECT",UC="ROUTE_ERROR_RESPONSE";function VC(n){if(n.startsWith(`${nA}:${BC}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function jC(n){if(n.startsWith(`${nA}:${UC}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new RC(e.status,e.statusText,e.data)}catch{}}function FC(n,{relative:e}={}){zn(Pc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=ne.useContext(ns),{hash:c,pathname:h,search:p}=sh(n,{relative:e}),T=h;return t!=="/"&&(T=h==="/"?t:Ua([t,h])),s.createHref({pathname:T,search:p,hash:c})}function Pc(){return ne.useContext(ih)!=null}function qa(){return zn(Pc(),"useLocation() may be used only in the context of a <Router> component."),ne.useContext(ih).location}var rA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function iA(n){ne.useContext(ns).static||ne.useLayoutEffect(n)}function sA(){let{isDataRoute:n}=ne.useContext(na);return n?eI():zC()}function zC(){zn(Pc(),"useNavigate() may be used only in the context of a <Router> component.");let n=ne.useContext(Mc),{basename:e,navigator:t}=ne.useContext(ns),{matches:s}=ne.useContext(na),{pathname:c}=qa(),h=JSON.stringify(dm(s)),p=ne.useRef(!1);return iA(()=>{p.current=!0}),ne.useCallback((w,E={})=>{if(ts(p.current,rA),!p.current)return;if(typeof w=="number"){t.go(w);return}let C=gm(w,JSON.parse(h),c,E.relative==="path");n==null&&e!=="/"&&(C.pathname=C.pathname==="/"?e:Ua([e,C.pathname])),(E.replace?t.replace:t.push)(C,E.state,E)},[e,t,h,c,n])}ne.createContext(null);function sh(n,{relative:e}={}){let{matches:t}=ne.useContext(na),{pathname:s}=qa(),c=JSON.stringify(dm(t));return ne.useMemo(()=>gm(n,JSON.parse(c),s,e==="path"),[n,c,s,e])}function HC(n,e){return aA(n,e)}function aA(n,e,t,s,c){var ae;zn(Pc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:h}=ne.useContext(ns),{matches:p}=ne.useContext(na),T=p[p.length-1],w=T?T.params:{},E=T?T.pathname:"/",C=T?T.pathnameBase:"/",I=T&&T.route;{let Q=I&&I.path||"";lA(E,!I||Q.endsWith("*")||Q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${E}" (under <Route path="${Q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Q}"> to <Route path="${Q==="/"?"*":`${Q}/*`}">.`)}let M=qa(),B;if(e){let Q=typeof e=="string"?Nl(e):e;zn(C==="/"||((ae=Q.pathname)==null?void 0:ae.startsWith(C)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${C}" but pathname "${Q.pathname}" was given in the \`location\` prop.`),B=Q}else B=M;let W=B.pathname||"/",$=W;if(C!=="/"){let Q=C.replace(/^\//,"").split("/");$="/"+W.replace(/^\//,"").split("/").slice(Q.length).join("/")}let q=Ww(n,{pathname:$});ts(I||q!=null,`No routes matched location "${B.pathname}${B.search}${B.hash}" `),ts(q==null||q[q.length-1].route.element!==void 0||q[q.length-1].route.Component!==void 0||q[q.length-1].route.lazy!==void 0,`Matched leaf route at location "${B.pathname}${B.search}${B.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _e=WC(q&&q.map(Q=>Object.assign({},Q,{params:Object.assign({},w,Q.params),pathname:Ua([C,h.encodeLocation?h.encodeLocation(Q.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Q.pathname]),pathnameBase:Q.pathnameBase==="/"?C:Ua([C,h.encodeLocation?h.encodeLocation(Q.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Q.pathnameBase])})),p,t,s,c);return e&&_e?ne.createElement(ih.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...B},navigationType:"POP"}},_e):_e}function GC(){let n=$C(),e=OC(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:s},h={padding:"2px 4px",backgroundColor:s},p=null;return console.error("Error handled by React Router default ErrorBoundary:",n),p=ne.createElement(ne.Fragment,null,ne.createElement("p",null," Hey developer "),ne.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ne.createElement("code",{style:h},"ErrorBoundary")," or"," ",ne.createElement("code",{style:h},"errorElement")," prop on your route.")),ne.createElement(ne.Fragment,null,ne.createElement("h2",null,"Unexpected Application Error!"),ne.createElement("h3",{style:{fontStyle:"italic"}},e),t?ne.createElement("pre",{style:c},t):null,p)}var qC=ne.createElement(GC,null),oA=class extends ne.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=jC(n.digest);t&&(n=t)}let e=n!==void 0?ne.createElement(na.Provider,{value:this.props.routeContext},ne.createElement(mm.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?ne.createElement(YC,{error:n},e):e}};oA.contextType=PC;var sg=new WeakMap;function YC({children:n,error:e}){let{basename:t}=ne.useContext(ns);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let s=VC(e.digest);if(s){let c=sg.get(e);if(c)throw c;let h=$w(s.location,t);if(Jw&&!sg.get(e))if(h.isExternal||s.reloadDocument)window.location.href=h.absoluteURL||h.to;else{const p=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(h.to,{replace:s.replace}));throw sg.set(e,p),p}return ne.createElement("meta",{httpEquiv:"refresh",content:`0;url=${h.absoluteURL||h.to}`})}}return n}function XC({routeContext:n,match:e,children:t}){let s=ne.useContext(Mc);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),ne.createElement(na.Provider,{value:n},t)}function WC(n,e=[],t=null,s=null,c=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let h=n,p=t==null?void 0:t.errors;if(p!=null){let C=h.findIndex(I=>I.route.id&&(p==null?void 0:p[I.route.id])!==void 0);zn(C>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(p).join(",")}`),h=h.slice(0,Math.min(h.length,C+1))}let T=!1,w=-1;if(t)for(let C=0;C<h.length;C++){let I=h[C];if((I.route.HydrateFallback||I.route.hydrateFallbackElement)&&(w=C),I.route.id){let{loaderData:M,errors:B}=t,W=I.route.loader&&!M.hasOwnProperty(I.route.id)&&(!B||B[I.route.id]===void 0);if(I.route.lazy||W){T=!0,w>=0?h=h.slice(0,w+1):h=[h[0]];break}}}let E=t&&s?(C,I)=>{var M,B;s(C,{location:t.location,params:((B=(M=t.matches)==null?void 0:M[0])==null?void 0:B.params)??{},unstable_pattern:DC(t.matches),errorInfo:I})}:void 0;return h.reduceRight((C,I,M)=>{let B,W=!1,$=null,q=null;t&&(B=p&&I.route.id?p[I.route.id]:void 0,$=I.route.errorElement||qC,T&&(w<0&&M===0?(lA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),W=!0,q=null):w===M&&(W=!0,q=I.route.hydrateFallbackElement||null)));let _e=e.concat(h.slice(0,M+1)),ae=()=>{let Q;return B?Q=$:W?Q=q:I.route.Component?Q=ne.createElement(I.route.Component,null):I.route.element?Q=I.route.element:Q=C,ne.createElement(XC,{match:I,routeContext:{outlet:C,matches:_e,isDataRoute:t!=null},children:Q})};return t&&(I.route.ErrorBoundary||I.route.errorElement||M===0)?ne.createElement(oA,{location:t.location,revalidation:t.revalidation,component:$,error:B,children:ae(),routeContext:{outlet:null,matches:_e,isDataRoute:!0},onError:E}):ae()},null)}function pm(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function KC(n){let e=ne.useContext(Mc);return zn(e,pm(n)),e}function QC(n){let e=ne.useContext(Bd);return zn(e,pm(n)),e}function ZC(n){let e=ne.useContext(na);return zn(e,pm(n)),e}function xm(n){let e=ZC(n),t=e.matches[e.matches.length-1];return zn(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function JC(){return xm("useRouteId")}function $C(){var s;let n=ne.useContext(mm),e=QC("useRouteError"),t=xm("useRouteError");return n!==void 0?n:(s=e.errors)==null?void 0:s[t]}function eI(){let{router:n}=KC("useNavigate"),e=xm("useNavigate"),t=ne.useRef(!1);return iA(()=>{t.current=!0}),ne.useCallback(async(c,h={})=>{ts(t.current,rA),t.current&&(typeof c=="number"?await n.navigate(c):await n.navigate(c,{fromRouteId:e,...h}))},[n,e])}var jy={};function lA(n,e,t){!e&&!jy[n]&&(jy[n]=!0,ts(!1,t))}ne.memo(tI);function tI({routes:n,future:e,state:t,onError:s}){return aA(n,void 0,t,s,e)}function nI({to:n,replace:e,state:t,relative:s}){zn(Pc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:c}=ne.useContext(ns);ts(!c,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:h}=ne.useContext(na),{pathname:p}=qa(),T=sA(),w=gm(n,dm(h),p,s==="path"),E=JSON.stringify(w);return ne.useEffect(()=>{T(JSON.parse(E),{replace:e,state:t,relative:s})},[T,E,s,e,t]),null}function xl(n){zn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function rI({basename:n="/",children:e=null,location:t,navigationType:s="POP",navigator:c,static:h=!1,unstable_useTransitions:p}){zn(!Pc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let T=n.replace(/^\/*/,"/"),w=ne.useMemo(()=>({basename:T,navigator:c,static:h,unstable_useTransitions:p,future:{}}),[T,c,h,p]);typeof t=="string"&&(t=Nl(t));let{pathname:E="/",search:C="",hash:I="",state:M=null,key:B="default"}=t,W=ne.useMemo(()=>{let $=Va(E,T);return $==null?null:{location:{pathname:$,search:C,hash:I,state:M,key:B},navigationType:s}},[T,E,C,I,M,B,s]);return ts(W!=null,`<Router basename="${T}"> is not able to match the URL "${E}${C}${I}" because it does not start with the basename, so the <Router> won't render anything.`),W==null?null:ne.createElement(ns.Provider,{value:w},ne.createElement(ih.Provider,{children:e,value:W}))}function iI({children:n,location:e}){return HC(Tg(n),e)}function Tg(n,e=[]){let t=[];return ne.Children.forEach(n,(s,c)=>{if(!ne.isValidElement(s))return;let h=[...e,c];if(s.type===ne.Fragment){t.push.apply(t,Tg(s.props.children,h));return}zn(s.type===xl,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),zn(!s.props.index||!s.props.children,"An index route cannot have child routes.");let p={id:s.props.id||h.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(p.children=Tg(s.props.children,h)),t.push(p)}),t}var Hf="get",Gf="application/x-www-form-urlencoded";function Ud(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function sI(n){return Ud(n)&&n.tagName.toLowerCase()==="button"}function aI(n){return Ud(n)&&n.tagName.toLowerCase()==="form"}function oI(n){return Ud(n)&&n.tagName.toLowerCase()==="input"}function lI(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function cI(n,e){return n.button===0&&(!e||e==="_self")&&!lI(n)}var Nf=null;function uI(){if(Nf===null)try{new FormData(document.createElement("form"),0),Nf=!1}catch{Nf=!0}return Nf}var hI=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ag(n){return n!=null&&!hI.has(n)?(ts(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Gf}"`),null):n}function fI(n,e){let t,s,c,h,p;if(aI(n)){let T=n.getAttribute("action");s=T?Va(T,e):null,t=n.getAttribute("method")||Hf,c=ag(n.getAttribute("enctype"))||Gf,h=new FormData(n)}else if(sI(n)||oI(n)&&(n.type==="submit"||n.type==="image")){let T=n.form;if(T==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let w=n.getAttribute("formaction")||T.getAttribute("action");if(s=w?Va(w,e):null,t=n.getAttribute("formmethod")||T.getAttribute("method")||Hf,c=ag(n.getAttribute("formenctype"))||ag(T.getAttribute("enctype"))||Gf,h=new FormData(T,n),!uI()){let{name:E,type:C,value:I}=n;if(C==="image"){let M=E?`${E}.`:"";h.append(`${M}x`,"0"),h.append(`${M}y`,"0")}else E&&h.append(E,I)}}else{if(Ud(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Hf,s=null,c=Gf,p=n}return h&&c==="text/plain"&&(p=h,h=void 0),{action:s,method:t.toLowerCase(),encType:c,formData:h,body:p}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ym(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function dI(n,e,t,s){let c=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?c.pathname.endsWith("/")?c.pathname=`${c.pathname}_.${s}`:c.pathname=`${c.pathname}.${s}`:c.pathname==="/"?c.pathname=`_root.${s}`:e&&Va(c.pathname,e)==="/"?c.pathname=`${e.replace(/\/$/,"")}/_root.${s}`:c.pathname=`${c.pathname.replace(/\/$/,"")}.${s}`,c}async function gI(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function mI(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function pI(n,e,t){let s=await Promise.all(n.map(async c=>{let h=e.routes[c.route.id];if(h){let p=await gI(h,t);return p.links?p.links():[]}return[]}));return _I(s.flat(1).filter(mI).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function Fy(n,e,t,s,c,h){let p=(w,E)=>t[E]?w.route.id!==t[E].route.id:!0,T=(w,E)=>{var C;return t[E].pathname!==w.pathname||((C=t[E].route.path)==null?void 0:C.endsWith("*"))&&t[E].params["*"]!==w.params["*"]};return h==="assets"?e.filter((w,E)=>p(w,E)||T(w,E)):h==="data"?e.filter((w,E)=>{var I;let C=s.routes[w.route.id];if(!C||!C.hasLoader)return!1;if(p(w,E)||T(w,E))return!0;if(w.route.shouldRevalidate){let M=w.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:((I=t[0])==null?void 0:I.params)||{},nextUrl:new URL(n,window.origin),nextParams:w.params,defaultShouldRevalidate:!0});if(typeof M=="boolean")return M}return!0}):[]}function xI(n,e,{includeHydrateFallback:t}={}){return yI(n.map(s=>{let c=e.routes[s.route.id];if(!c)return[];let h=[c.module];return c.clientActionModule&&(h=h.concat(c.clientActionModule)),c.clientLoaderModule&&(h=h.concat(c.clientLoaderModule)),t&&c.hydrateFallbackModule&&(h=h.concat(c.hydrateFallbackModule)),c.imports&&(h=h.concat(c.imports)),h}).flat(1))}function yI(n){return[...new Set(n)]}function EI(n){let e={},t=Object.keys(n).sort();for(let s of t)e[s]=n[s];return e}function _I(n,e){let t=new Set;return new Set(e),n.reduce((s,c)=>{let h=JSON.stringify(EI(c));return t.has(h)||(t.add(h),s.push({key:h,link:c})),s},[])}function cA(){let n=ne.useContext(Mc);return ym(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function wI(){let n=ne.useContext(Bd);return ym(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Em=ne.createContext(void 0);Em.displayName="FrameworkContext";function uA(){let n=ne.useContext(Em);return ym(n,"You must render this element inside a <HydratedRouter> element"),n}function AI(n,e){let t=ne.useContext(Em),[s,c]=ne.useState(!1),[h,p]=ne.useState(!1),{onFocus:T,onBlur:w,onMouseEnter:E,onMouseLeave:C,onTouchStart:I}=e,M=ne.useRef(null);ne.useEffect(()=>{if(n==="render"&&p(!0),n==="viewport"){let $=_e=>{_e.forEach(ae=>{p(ae.isIntersecting)})},q=new IntersectionObserver($,{threshold:.5});return M.current&&q.observe(M.current),()=>{q.disconnect()}}},[n]),ne.useEffect(()=>{if(s){let $=setTimeout(()=>{p(!0)},100);return()=>{clearTimeout($)}}},[s]);let B=()=>{c(!0)},W=()=>{c(!1),p(!1)};return t?n!=="intent"?[h,M,{}]:[h,M,{onFocus:Cu(T,B),onBlur:Cu(w,W),onMouseEnter:Cu(E,B),onMouseLeave:Cu(C,W),onTouchStart:Cu(I,B)}]:[!1,M,{}]}function Cu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function bI({page:n,...e}){let{router:t}=cA(),s=ne.useMemo(()=>Ww(t.routes,n,t.basename),[t.routes,n,t.basename]);return s?ne.createElement(vI,{page:n,matches:s,...e}):null}function TI(n){let{manifest:e,routeModules:t}=uA(),[s,c]=ne.useState([]);return ne.useEffect(()=>{let h=!1;return pI(n,e,t).then(p=>{h||c(p)}),()=>{h=!0}},[n,e,t]),s}function vI({page:n,matches:e,...t}){let s=qa(),{future:c,manifest:h,routeModules:p}=uA(),{basename:T}=cA(),{loaderData:w,matches:E}=wI(),C=ne.useMemo(()=>Fy(n,e,E,h,s,"data"),[n,e,E,h,s]),I=ne.useMemo(()=>Fy(n,e,E,h,s,"assets"),[n,e,E,h,s]),M=ne.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let $=new Set,q=!1;if(e.forEach(ae=>{var le;let Q=h.routes[ae.route.id];!Q||!Q.hasLoader||(!C.some(De=>De.route.id===ae.route.id)&&ae.route.id in w&&((le=p[ae.route.id])!=null&&le.shouldRevalidate)||Q.hasClientLoader?q=!0:$.add(ae.route.id))}),$.size===0)return[];let _e=dI(n,T,c.unstable_trailingSlashAwareDataRequests,"data");return q&&$.size>0&&_e.searchParams.set("_routes",e.filter(ae=>$.has(ae.route.id)).map(ae=>ae.route.id).join(",")),[_e.pathname+_e.search]},[T,c.unstable_trailingSlashAwareDataRequests,w,s,h,C,e,n,p]),B=ne.useMemo(()=>xI(I,h),[I,h]),W=TI(I);return ne.createElement(ne.Fragment,null,M.map($=>ne.createElement("link",{key:$,rel:"prefetch",as:"fetch",href:$,...t})),B.map($=>ne.createElement("link",{key:$,rel:"modulepreload",href:$,...t})),W.map(({key:$,link:q})=>ne.createElement("link",{key:$,nonce:t.nonce,...q})))}function SI(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var CI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{CI&&(window.__reactRouterVersion="7.12.0")}catch{}function II({basename:n,children:e,unstable_useTransitions:t,window:s}){let c=ne.useRef();c.current==null&&(c.current=oC({window:s,v5Compat:!0}));let h=c.current,[p,T]=ne.useState({action:h.action,location:h.location}),w=ne.useCallback(E=>{t===!1?T(E):ne.startTransition(()=>T(E))},[t]);return ne.useLayoutEffect(()=>h.listen(w),[h,w]),ne.createElement(rI,{basename:n,children:e,location:p.location,navigationType:p.action,navigator:h,unstable_useTransitions:t})}var hA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rd=ne.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:c,reloadDocument:h,replace:p,state:T,target:w,to:E,preventScrollReset:C,viewTransition:I,unstable_defaultShouldRevalidate:M,...B},W){let{basename:$,unstable_useTransitions:q}=ne.useContext(ns),_e=typeof E=="string"&&hA.test(E),ae=$w(E,$);E=ae.to;let Q=FC(E,{relative:c}),[le,De,Oe]=AI(s,B),j=DI(E,{replace:p,state:T,target:w,preventScrollReset:C,relative:c,viewTransition:I,unstable_defaultShouldRevalidate:M,unstable_useTransitions:q});function z(Y){e&&e(Y),Y.defaultPrevented||j(Y)}let V=ne.createElement("a",{...B,...Oe,href:ae.absoluteURL||Q,onClick:ae.isExternal||h?e:z,ref:SI(W,De),target:w,"data-discover":!_e&&t==="render"?"true":void 0});return le&&!_e?ne.createElement(ne.Fragment,null,V,ne.createElement(bI,{page:Q})):V});rd.displayName="Link";var NI=ne.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:c=!1,style:h,to:p,viewTransition:T,children:w,...E},C){let I=sh(p,{relative:E.relative}),M=qa(),B=ne.useContext(Bd),{navigator:W,basename:$}=ne.useContext(ns),q=B!=null&&BI(I)&&T===!0,_e=W.encodeLocation?W.encodeLocation(I).pathname:I.pathname,ae=M.pathname,Q=B&&B.navigation&&B.navigation.location?B.navigation.location.pathname:null;t||(ae=ae.toLowerCase(),Q=Q?Q.toLowerCase():null,_e=_e.toLowerCase()),Q&&$&&(Q=Va(Q,$)||Q);const le=_e!=="/"&&_e.endsWith("/")?_e.length-1:_e.length;let De=ae===_e||!c&&ae.startsWith(_e)&&ae.charAt(le)==="/",Oe=Q!=null&&(Q===_e||!c&&Q.startsWith(_e)&&Q.charAt(_e.length)==="/"),j={isActive:De,isPending:Oe,isTransitioning:q},z=De?e:void 0,V;typeof s=="function"?V=s(j):V=[s,De?"active":null,Oe?"pending":null,q?"transitioning":null].filter(Boolean).join(" ");let Y=typeof h=="function"?h(j):h;return ne.createElement(rd,{...E,"aria-current":z,className:V,ref:C,style:Y,to:p,viewTransition:T},typeof w=="function"?w(j):w)});NI.displayName="NavLink";var RI=ne.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:c,state:h,method:p=Hf,action:T,onSubmit:w,relative:E,preventScrollReset:C,viewTransition:I,unstable_defaultShouldRevalidate:M,...B},W)=>{let{unstable_useTransitions:$}=ne.useContext(ns),q=LI(),_e=kI(T,{relative:E}),ae=p.toLowerCase()==="get"?"get":"post",Q=typeof T=="string"&&hA.test(T),le=De=>{if(w&&w(De),De.defaultPrevented)return;De.preventDefault();let Oe=De.nativeEvent.submitter,j=(Oe==null?void 0:Oe.getAttribute("formmethod"))||p,z=()=>q(Oe||De.currentTarget,{fetcherKey:e,method:j,navigate:t,replace:c,state:h,relative:E,preventScrollReset:C,viewTransition:I,unstable_defaultShouldRevalidate:M});$&&t!==!1?ne.startTransition(()=>z()):z()};return ne.createElement("form",{ref:W,method:ae,action:_e,onSubmit:s?w:le,...B,"data-discover":!Q&&n==="render"?"true":void 0})});RI.displayName="Form";function OI(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function fA(n){let e=ne.useContext(Mc);return zn(e,OI(n)),e}function DI(n,{target:e,replace:t,state:s,preventScrollReset:c,relative:h,viewTransition:p,unstable_defaultShouldRevalidate:T,unstable_useTransitions:w}={}){let E=sA(),C=qa(),I=sh(n,{relative:h});return ne.useCallback(M=>{if(cI(M,e)){M.preventDefault();let B=t!==void 0?t:Xu(C)===Xu(I),W=()=>E(n,{replace:B,state:s,preventScrollReset:c,relative:h,viewTransition:p,unstable_defaultShouldRevalidate:T});w?ne.startTransition(()=>W()):W()}},[C,E,I,t,s,e,n,c,h,p,T,w])}var MI=0,PI=()=>`__${String(++MI)}__`;function LI(){let{router:n}=fA("useSubmit"),{basename:e}=ne.useContext(ns),t=JC(),s=n.fetch,c=n.navigate;return ne.useCallback(async(h,p={})=>{let{action:T,method:w,encType:E,formData:C,body:I}=fI(h,e);if(p.navigate===!1){let M=p.fetcherKey||PI();await s(M,t,p.action||T,{unstable_defaultShouldRevalidate:p.unstable_defaultShouldRevalidate,preventScrollReset:p.preventScrollReset,formData:C,body:I,formMethod:p.method||w,formEncType:p.encType||E,flushSync:p.flushSync})}else await c(p.action||T,{unstable_defaultShouldRevalidate:p.unstable_defaultShouldRevalidate,preventScrollReset:p.preventScrollReset,formData:C,body:I,formMethod:p.method||w,formEncType:p.encType||E,replace:p.replace,state:p.state,fromRouteId:t,flushSync:p.flushSync,viewTransition:p.viewTransition})},[s,c,e,t])}function kI(n,{relative:e}={}){let{basename:t}=ne.useContext(ns),s=ne.useContext(na);zn(s,"useFormAction must be used inside a RouteContext");let[c]=s.matches.slice(-1),h={...sh(n||".",{relative:e})},p=qa();if(n==null){h.search=p.search;let T=new URLSearchParams(h.search),w=T.getAll("index");if(w.some(C=>C==="")){T.delete("index"),w.filter(I=>I).forEach(I=>T.append("index",I));let C=T.toString();h.search=C?`?${C}`:""}}return(!n||n===".")&&c.route.index&&(h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(h.pathname=h.pathname==="/"?t:Ua([t,h.pathname])),Xu(h)}function BI(n,{relative:e}={}){let t=ne.useContext(tA);zn(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=fA("useViewTransitionState"),c=sh(n,{relative:e});if(!t.isTransitioning)return!1;let h=Va(t.currentLocation.pathname,s)||t.currentLocation.pathname,p=Va(t.nextLocation.pathname,s)||t.nextLocation.pathname;return nd(c.pathname,p)!=null||nd(c.pathname,h)!=null}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UI=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),VI=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),zy=n=>{const e=VI(n);return e.charAt(0).toUpperCase()+e.slice(1)},dA=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),jI=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var FI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zI=ne.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:c="",children:h,iconNode:p,...T},w)=>ne.createElement("svg",{ref:w,...FI,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:dA("lucide",c),...!h&&!jI(T)&&{"aria-hidden":"true"},...T},[...p.map(([E,C])=>ne.createElement(E,C)),...Array.isArray(h)?h:[h]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=(n,e)=>{const t=ne.forwardRef(({className:s,...c},h)=>ne.createElement(zI,{ref:h,iconNode:e,className:dA(`lucide-${UI(zy(n))}`,`lucide-${n}`,s),...c}));return t.displayName=zy(n),t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HI=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Hy=dt("calendar",HI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GI=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],vg=dt("camera",GI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qI=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Nu=dt("check",qI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YI=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],gA=dt("chevron-left",YI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XI=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Sg=dt("chevron-right",XI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],mA=dt("circle-alert",WI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KI=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Wu=dt("circle-check-big",KI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ZI=dt("circle-check",QI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JI=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ku=dt("clock",JI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],e3=dt("coins",$I);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],n3=dt("eye",t3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],i3=dt("flame",r3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],Gy=dt("gift",s3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],o3=dt("graduation-cap",a3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],qf=dt("heart",l3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],id=dt("history",c3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],qy=dt("image",u3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],pA=dt("info",h3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],d3=dt("layout-dashboard",f3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],m3=dt("log-out",g3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],x3=dt("medal",p3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],E3=dt("menu",y3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Cg=dt("package",_3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],lc=dt("plus",w3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],b3=dt("qr-code",A3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],v3=dt("refresh-ccw",T3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],C3=dt("refresh-cw",S3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],N3=dt("scan-line",I3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],O3=dt("search",R3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],M3=dt("send",D3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],L3=dt("settings",P3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],sd=dt("shield-check",k3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],U3=dt("shopping-bag",B3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],j3=dt("shopping-cart",V3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],ad=dt("sparkles",F3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z3=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],H3=dt("star",z3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Bu=dt("target",G3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q3=[["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}],["path",{d:"M7 10v12",key:"1qc93n"}]],Y3=dt("thumbs-up",q3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X3=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Rf=dt("trash-2",X3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],K3=dt("trending-up",W3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Z3=dt("triangle-alert",Q3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Yy=dt("trophy",J3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $3=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Ig=dt("upload",$3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Ng=dt("user-plus",eN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],nN=dt("user",tN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rN=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],iN=dt("users",rN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sN=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Do=dt("x",sN),xA=ne.createContext(void 0),Lc=()=>{const n=ne.useContext(xA);if(!n)throw new Error("useAlert must be used within an AlertProvider");return n},aN=({children:n})=>{const[e,t]=ne.useState(null),s=(h,p="info")=>{t({message:h,type:p})},c=()=>{t(null)};return v.jsxs(xA.Provider,{value:{showAlert:s,hideAlert:c},children:[n,e&&v.jsx(oN,{message:e.message,type:e.type,onClose:c})]})},oN=({message:n,type:e,onClose:t})=>{const s={success:v.jsx(Wu,{className:"text-emerald-500",size:32}),error:v.jsx(mA,{className:"text-rose-500",size:32}),info:v.jsx(pA,{className:"text-indigo-500",size:32})},c={success:"bg-emerald-50",error:"bg-rose-50",info:"bg-indigo-50"};return v.jsx("div",{className:"fixed inset-0 z-[999] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:v.jsx("div",{className:"bg-white rounded-[2.5rem] max-w-sm w-full p-8 shadow-2xl animate-in zoom-in-95 duration-200 border border-slate-100",children:v.jsxs("div",{className:"flex flex-col items-center text-center",children:[v.jsx("div",{className:`${c[e]} p-4 rounded-2xl mb-6`,children:s[e]}),v.jsx("h3",{className:"text-xl font-black text-slate-800 mb-2",children:""}),v.jsx("p",{className:"text-slate-500 font-bold leading-relaxed mb-8",children:n}),v.jsx("button",{onClick:t,className:"w-full bg-slate-900 hover:bg-slate-800 text-white font-black py-4 rounded-2xl transition-all active:scale-95 shadow-lg shadow-slate-200",children:""})]})})})},lN=()=>{};var Xy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let c=n.charCodeAt(s);c<128?e[t++]=c:c<2048?(e[t++]=c>>6|192,e[t++]=c&63|128):(c&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(c=65536+((c&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=c>>18|240,e[t++]=c>>12&63|128,e[t++]=c>>6&63|128,e[t++]=c&63|128):(e[t++]=c>>12|224,e[t++]=c>>6&63|128,e[t++]=c&63|128)}return e},cN=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const c=n[t++];if(c<128)e[s++]=String.fromCharCode(c);else if(c>191&&c<224){const h=n[t++];e[s++]=String.fromCharCode((c&31)<<6|h&63)}else if(c>239&&c<365){const h=n[t++],p=n[t++],T=n[t++],w=((c&7)<<18|(h&63)<<12|(p&63)<<6|T&63)-65536;e[s++]=String.fromCharCode(55296+(w>>10)),e[s++]=String.fromCharCode(56320+(w&1023))}else{const h=n[t++],p=n[t++];e[s++]=String.fromCharCode((c&15)<<12|(h&63)<<6|p&63)}}return e.join("")},EA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let c=0;c<n.length;c+=3){const h=n[c],p=c+1<n.length,T=p?n[c+1]:0,w=c+2<n.length,E=w?n[c+2]:0,C=h>>2,I=(h&3)<<4|T>>4;let M=(T&15)<<2|E>>6,B=E&63;w||(B=64,p||(M=64)),s.push(t[C],t[I],t[M],t[B])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(yA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):cN(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let c=0;c<n.length;){const h=t[n.charAt(c++)],T=c<n.length?t[n.charAt(c)]:0;++c;const E=c<n.length?t[n.charAt(c)]:64;++c;const I=c<n.length?t[n.charAt(c)]:64;if(++c,h==null||T==null||E==null||I==null)throw new uN;const M=h<<2|T>>4;if(s.push(M),E!==64){const B=T<<4&240|E>>2;if(s.push(B),I!==64){const W=E<<6&192|I;s.push(W)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class uN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hN=function(n){const e=yA(n);return EA.encodeByteArray(e,!0)},od=function(n){return hN(n).replace(/\./g,"")},_A=function(n){try{return EA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN=()=>fN().__FIREBASE_DEFAULTS__,gN=()=>{if(typeof process>"u"||typeof Xy>"u")return;const n=Xy.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},mN=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&_A(n[1]);return e&&JSON.parse(e)},Vd=()=>{try{return lN()||dN()||gN()||mN()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},wA=n=>{var e,t;return(t=(e=Vd())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},pN=n=>{const e=wA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},AA=()=>{var n;return(n=Vd())==null?void 0:n.config},bA=n=>{var e;return(e=Vd())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kc(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function TA(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",c=n.iat||0,h=n.sub||n.user_id;if(!h)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const p={iss:`https://securetoken.google.com/${s}`,aud:s,iat:c,exp:c+3600,auth_time:c,sub:h,user_id:h,firebase:{sign_in_provider:"custom",identities:{}},...n};return[od(JSON.stringify(t)),od(JSON.stringify(p)),""].join(".")}const Uu={};function EN(){const n={prod:[],emulator:[]};for(const e of Object.keys(Uu))Uu[e]?n.emulator.push(e):n.prod.push(e);return n}function _N(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Wy=!1;function vA(n,e){if(typeof window>"u"||typeof document>"u"||!kc(window.location.host)||Uu[n]===e||Uu[n]||Wy)return;Uu[n]=e;function t(M){return`__firebase__banner__${M}`}const s="__firebase__banner",h=EN().prod.length>0;function p(){const M=document.getElementById(s);M&&M.remove()}function T(M){M.style.display="flex",M.style.background="#7faaf0",M.style.position="fixed",M.style.bottom="5px",M.style.left="5px",M.style.padding=".5em",M.style.borderRadius="5px",M.style.alignItems="center"}function w(M,B){M.setAttribute("width","24"),M.setAttribute("id",B),M.setAttribute("height","24"),M.setAttribute("viewBox","0 0 24 24"),M.setAttribute("fill","none"),M.style.marginLeft="-6px"}function E(){const M=document.createElement("span");return M.style.cursor="pointer",M.style.marginLeft="16px",M.style.fontSize="24px",M.innerHTML=" &times;",M.onclick=()=>{Wy=!0,p()},M}function C(M,B){M.setAttribute("id",B),M.innerText="Learn more",M.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",M.setAttribute("target","__blank"),M.style.paddingLeft="5px",M.style.textDecoration="underline"}function I(){const M=_N(s),B=t("text"),W=document.getElementById(B)||document.createElement("span"),$=t("learnmore"),q=document.getElementById($)||document.createElement("a"),_e=t("preprendIcon"),ae=document.getElementById(_e)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(M.created){const Q=M.element;T(Q),C(q,$);const le=E();w(ae,_e),Q.append(ae,W,q,le),document.body.appendChild(Q)}h?(W.innerText="Preview backend disconnected.",ae.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ae.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,W.innerText="Preview backend running in this workspace."),W.setAttribute("id",B)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ci())}function AN(){var e;const n=(e=Vd())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function TN(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function vN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function SN(){const n=ci();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function CN(){return!AN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function IN(){try{return typeof indexedDB=="object"}catch{return!1}}function NN(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",c=self.indexedDB.open(s);c.onsuccess=()=>{c.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},c.onupgradeneeded=()=>{t=!1},c.onerror=()=>{var h;e(((h=c.error)==null?void 0:h.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN="FirebaseError";class Ya extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=RN,Object.setPrototypeOf(this,Ya.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ah.prototype.create)}}class ah{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},c=`${this.service}/${e}`,h=this.errors[e],p=h?ON(h,s):"Error",T=`${this.serviceName}: ${p} (${c}).`;return new Ya(c,T,s)}}function ON(n,e){return n.replace(DN,(t,s)=>{const c=e[s];return c!=null?String(c):`<${s}?>`})}const DN=/\{\$([^}]+)}/g;function MN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function bl(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const c of t){if(!s.includes(c))return!1;const h=n[c],p=e[c];if(Ky(h)&&Ky(p)){if(!bl(h,p))return!1}else if(h!==p)return!1}for(const c of s)if(!t.includes(c))return!1;return!0}function Ky(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oh(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(c=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(c))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Ru(n){const e={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[c,h]=s.split("=");e[decodeURIComponent(c)]=decodeURIComponent(h)}}),e}function Ou(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function PN(n,e){const t=new LN(n,e);return t.subscribe.bind(t)}class LN{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let c;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");kN(e,["next","error","complete"])?c=e:c={next:e,error:t,complete:s},c.next===void 0&&(c.next=og),c.error===void 0&&(c.error=og),c.complete===void 0&&(c.complete=og);const h=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?c.error(this.finalError):c.complete()}catch{}}),this.observers.push(c),h}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kN(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function og(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(n){return n&&n._delegate?n._delegate:n}class Tl{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new xN;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const c=this.getOrInitializeService({instanceIdentifier:t});c&&s.resolve(c)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(c){if(s)return null;throw c}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(VN(e))try{this.getOrInitializeService({instanceIdentifier:yl})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(t);try{const h=this.getOrInitializeService({instanceIdentifier:c});s.resolve(h)}catch{}}}}clearInstance(e=yl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=yl){return this.instances.has(e)}getOptions(e=yl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const c=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[h,p]of this.instancesDeferred.entries()){const T=this.normalizeInstanceIdentifier(h);s===T&&p.resolve(c)}return c}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),c=this.onInitCallbacks.get(s)??new Set;c.add(e),this.onInitCallbacks.set(s,c);const h=this.instances.get(s);return h&&e(h,s),()=>{c.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const c of s)try{c(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:UN(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=yl){return this.component?this.component.multipleInstances?e:yl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function UN(n){return n===yl?void 0:n}function VN(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new BN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(zt||(zt={}));const FN={debug:zt.DEBUG,verbose:zt.VERBOSE,info:zt.INFO,warn:zt.WARN,error:zt.ERROR,silent:zt.SILENT},zN=zt.INFO,HN={[zt.DEBUG]:"log",[zt.VERBOSE]:"log",[zt.INFO]:"info",[zt.WARN]:"warn",[zt.ERROR]:"error"},GN=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),c=HN[e];if(c)console[c](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _m{constructor(e){this.name=e,this._logLevel=zN,this._logHandler=GN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in zt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?FN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,zt.DEBUG,...e),this._logHandler(this,zt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,zt.VERBOSE,...e),this._logHandler(this,zt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,zt.INFO,...e),this._logHandler(this,zt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,zt.WARN,...e),this._logHandler(this,zt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,zt.ERROR,...e),this._logHandler(this,zt.ERROR,...e)}}const qN=(n,e)=>e.some(t=>n instanceof t);let Qy,Zy;function YN(){return Qy||(Qy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function XN(){return Zy||(Zy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const SA=new WeakMap,Rg=new WeakMap,CA=new WeakMap,lg=new WeakMap,wm=new WeakMap;function WN(n){const e=new Promise((t,s)=>{const c=()=>{n.removeEventListener("success",h),n.removeEventListener("error",p)},h=()=>{t(Mo(n.result)),c()},p=()=>{s(n.error),c()};n.addEventListener("success",h),n.addEventListener("error",p)});return e.then(t=>{t instanceof IDBCursor&&SA.set(t,n)}).catch(()=>{}),wm.set(e,n),e}function KN(n){if(Rg.has(n))return;const e=new Promise((t,s)=>{const c=()=>{n.removeEventListener("complete",h),n.removeEventListener("error",p),n.removeEventListener("abort",p)},h=()=>{t(),c()},p=()=>{s(n.error||new DOMException("AbortError","AbortError")),c()};n.addEventListener("complete",h),n.addEventListener("error",p),n.addEventListener("abort",p)});Rg.set(n,e)}let Og={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Rg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||CA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Mo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function QN(n){Og=n(Og)}function ZN(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(cg(this),e,...t);return CA.set(s,e.sort?e.sort():[e]),Mo(s)}:XN().includes(n)?function(...e){return n.apply(cg(this),e),Mo(SA.get(this))}:function(...e){return Mo(n.apply(cg(this),e))}}function JN(n){return typeof n=="function"?ZN(n):(n instanceof IDBTransaction&&KN(n),qN(n,YN())?new Proxy(n,Og):n)}function Mo(n){if(n instanceof IDBRequest)return WN(n);if(lg.has(n))return lg.get(n);const e=JN(n);return e!==n&&(lg.set(n,e),wm.set(e,n)),e}const cg=n=>wm.get(n);function $N(n,e,{blocked:t,upgrade:s,blocking:c,terminated:h}={}){const p=indexedDB.open(n,e),T=Mo(p);return s&&p.addEventListener("upgradeneeded",w=>{s(Mo(p.result),w.oldVersion,w.newVersion,Mo(p.transaction),w)}),t&&p.addEventListener("blocked",w=>t(w.oldVersion,w.newVersion,w)),T.then(w=>{h&&w.addEventListener("close",()=>h()),c&&w.addEventListener("versionchange",E=>c(E.oldVersion,E.newVersion,E))}).catch(()=>{}),T}const e4=["get","getKey","getAll","getAllKeys","count"],t4=["put","add","delete","clear"],ug=new Map;function Jy(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ug.get(e))return ug.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,c=t4.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(c||e4.includes(t)))return;const h=async function(p,...T){const w=this.transaction(p,c?"readwrite":"readonly");let E=w.store;return s&&(E=E.index(T.shift())),(await Promise.all([E[t](...T),c&&w.done]))[0]};return ug.set(e,h),h}QN(n=>({...n,get:(e,t,s)=>Jy(e,t)||n.get(e,t,s),has:(e,t)=>!!Jy(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(r4(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function r4(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Dg="@firebase/app",$y="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja=new _m("@firebase/app"),i4="@firebase/app-compat",s4="@firebase/analytics-compat",a4="@firebase/analytics",o4="@firebase/app-check-compat",l4="@firebase/app-check",c4="@firebase/auth",u4="@firebase/auth-compat",h4="@firebase/database",f4="@firebase/data-connect",d4="@firebase/database-compat",g4="@firebase/functions",m4="@firebase/functions-compat",p4="@firebase/installations",x4="@firebase/installations-compat",y4="@firebase/messaging",E4="@firebase/messaging-compat",_4="@firebase/performance",w4="@firebase/performance-compat",A4="@firebase/remote-config",b4="@firebase/remote-config-compat",T4="@firebase/storage",v4="@firebase/storage-compat",S4="@firebase/firestore",C4="@firebase/ai",I4="@firebase/firestore-compat",N4="firebase",R4="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg="[DEFAULT]",O4={[Dg]:"fire-core",[i4]:"fire-core-compat",[a4]:"fire-analytics",[s4]:"fire-analytics-compat",[l4]:"fire-app-check",[o4]:"fire-app-check-compat",[c4]:"fire-auth",[u4]:"fire-auth-compat",[h4]:"fire-rtdb",[f4]:"fire-data-connect",[d4]:"fire-rtdb-compat",[g4]:"fire-fn",[m4]:"fire-fn-compat",[p4]:"fire-iid",[x4]:"fire-iid-compat",[y4]:"fire-fcm",[E4]:"fire-fcm-compat",[_4]:"fire-perf",[w4]:"fire-perf-compat",[A4]:"fire-rc",[b4]:"fire-rc-compat",[T4]:"fire-gcs",[v4]:"fire-gcs-compat",[S4]:"fire-fst",[I4]:"fire-fst-compat",[C4]:"fire-vertex","fire-js":"fire-js",[N4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ld=new Map,D4=new Map,Pg=new Map;function eE(n,e){try{n.container.addComponent(e)}catch(t){ja.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Tc(n){const e=n.name;if(Pg.has(e))return ja.debug(`There were multiple attempts to register component ${e}.`),!1;Pg.set(e,n);for(const t of ld.values())eE(t,n);for(const t of D4.values())eE(t,n);return!0}function Am(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Zi(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Po=new ah("app","Firebase",M4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Tl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Po.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bc=R4;function IA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:Mg,automaticDataCollectionEnabled:!0,...e},c=s.name;if(typeof c!="string"||!c)throw Po.create("bad-app-name",{appName:String(c)});if(t||(t=AA()),!t)throw Po.create("no-options");const h=ld.get(c);if(h){if(bl(t,h.options)&&bl(s,h.config))return h;throw Po.create("duplicate-app",{appName:c})}const p=new jN(c);for(const w of Pg.values())p.addComponent(w);const T=new P4(t,s,p);return ld.set(c,T),T}function NA(n=Mg){const e=ld.get(n);if(!e&&n===Mg&&AA())return IA();if(!e)throw Po.create("no-app",{appName:n});return e}function Lo(n,e,t){let s=O4[n]??n;t&&(s+=`-${t}`);const c=s.match(/\s|\//),h=e.match(/\s|\//);if(c||h){const p=[`Unable to register library "${s}" with version "${e}":`];c&&p.push(`library name "${s}" contains illegal characters (whitespace or "/")`),c&&h&&p.push("and"),h&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ja.warn(p.join(" "));return}Tc(new Tl(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4="firebase-heartbeat-database",k4=1,Qu="firebase-heartbeat-store";let hg=null;function RA(){return hg||(hg=$N(L4,k4,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Qu)}catch(t){console.warn(t)}}}}).catch(n=>{throw Po.create("idb-open",{originalErrorMessage:n.message})})),hg}async function B4(n){try{const t=(await RA()).transaction(Qu),s=await t.objectStore(Qu).get(OA(n));return await t.done,s}catch(e){if(e instanceof Ya)ja.warn(e.message);else{const t=Po.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ja.warn(t.message)}}}async function tE(n,e){try{const s=(await RA()).transaction(Qu,"readwrite");await s.objectStore(Qu).put(e,OA(n)),await s.done}catch(t){if(t instanceof Ya)ja.warn(t.message);else{const s=Po.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ja.warn(s.message)}}}function OA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U4=1024,V4=30;class j4{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new z4(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const c=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),h=nE();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===h||this._heartbeatsCache.heartbeats.some(p=>p.date===h))return;if(this._heartbeatsCache.heartbeats.push({date:h,agent:c}),this._heartbeatsCache.heartbeats.length>V4){const p=H4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(p,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){ja.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=nE(),{heartbeatsToSend:s,unsentEntries:c}=F4(this._heartbeatsCache.heartbeats),h=od(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,c.length>0?(this._heartbeatsCache.heartbeats=c,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),h}catch(t){return ja.warn(t),""}}}function nE(){return new Date().toISOString().substring(0,10)}function F4(n,e=U4){const t=[];let s=n.slice();for(const c of n){const h=t.find(p=>p.agent===c.agent);if(h){if(h.dates.push(c.date),rE(t)>e){h.dates.pop();break}}else if(t.push({agent:c.agent,dates:[c.date]}),rE(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class z4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return IN()?NN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await B4(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return tE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return tE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function rE(n){return od(JSON.stringify({version:2,heartbeats:n})).length}function H4(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G4(n){Tc(new Tl("platform-logger",e=>new n4(e),"PRIVATE")),Tc(new Tl("heartbeat",e=>new j4(e),"PRIVATE")),Lo(Dg,$y,n),Lo(Dg,$y,"esm2020"),Lo("fire-js","")}G4("");var iE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ko,DA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,z){function V(){}V.prototype=z.prototype,j.F=z.prototype,j.prototype=new V,j.prototype.constructor=j,j.D=function(Y,Z,J){for(var K=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)K[$e-2]=arguments[$e];return z.prototype[Z].apply(Y,K)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function c(j,z,V){V||(V=0);const Y=Array(16);if(typeof z=="string")for(var Z=0;Z<16;++Z)Y[Z]=z.charCodeAt(V++)|z.charCodeAt(V++)<<8|z.charCodeAt(V++)<<16|z.charCodeAt(V++)<<24;else for(Z=0;Z<16;++Z)Y[Z]=z[V++]|z[V++]<<8|z[V++]<<16|z[V++]<<24;z=j.g[0],V=j.g[1],Z=j.g[2];let J=j.g[3],K;K=z+(J^V&(Z^J))+Y[0]+3614090360&4294967295,z=V+(K<<7&4294967295|K>>>25),K=J+(Z^z&(V^Z))+Y[1]+3905402710&4294967295,J=z+(K<<12&4294967295|K>>>20),K=Z+(V^J&(z^V))+Y[2]+606105819&4294967295,Z=J+(K<<17&4294967295|K>>>15),K=V+(z^Z&(J^z))+Y[3]+3250441966&4294967295,V=Z+(K<<22&4294967295|K>>>10),K=z+(J^V&(Z^J))+Y[4]+4118548399&4294967295,z=V+(K<<7&4294967295|K>>>25),K=J+(Z^z&(V^Z))+Y[5]+1200080426&4294967295,J=z+(K<<12&4294967295|K>>>20),K=Z+(V^J&(z^V))+Y[6]+2821735955&4294967295,Z=J+(K<<17&4294967295|K>>>15),K=V+(z^Z&(J^z))+Y[7]+4249261313&4294967295,V=Z+(K<<22&4294967295|K>>>10),K=z+(J^V&(Z^J))+Y[8]+1770035416&4294967295,z=V+(K<<7&4294967295|K>>>25),K=J+(Z^z&(V^Z))+Y[9]+2336552879&4294967295,J=z+(K<<12&4294967295|K>>>20),K=Z+(V^J&(z^V))+Y[10]+4294925233&4294967295,Z=J+(K<<17&4294967295|K>>>15),K=V+(z^Z&(J^z))+Y[11]+2304563134&4294967295,V=Z+(K<<22&4294967295|K>>>10),K=z+(J^V&(Z^J))+Y[12]+1804603682&4294967295,z=V+(K<<7&4294967295|K>>>25),K=J+(Z^z&(V^Z))+Y[13]+4254626195&4294967295,J=z+(K<<12&4294967295|K>>>20),K=Z+(V^J&(z^V))+Y[14]+2792965006&4294967295,Z=J+(K<<17&4294967295|K>>>15),K=V+(z^Z&(J^z))+Y[15]+1236535329&4294967295,V=Z+(K<<22&4294967295|K>>>10),K=z+(Z^J&(V^Z))+Y[1]+4129170786&4294967295,z=V+(K<<5&4294967295|K>>>27),K=J+(V^Z&(z^V))+Y[6]+3225465664&4294967295,J=z+(K<<9&4294967295|K>>>23),K=Z+(z^V&(J^z))+Y[11]+643717713&4294967295,Z=J+(K<<14&4294967295|K>>>18),K=V+(J^z&(Z^J))+Y[0]+3921069994&4294967295,V=Z+(K<<20&4294967295|K>>>12),K=z+(Z^J&(V^Z))+Y[5]+3593408605&4294967295,z=V+(K<<5&4294967295|K>>>27),K=J+(V^Z&(z^V))+Y[10]+38016083&4294967295,J=z+(K<<9&4294967295|K>>>23),K=Z+(z^V&(J^z))+Y[15]+3634488961&4294967295,Z=J+(K<<14&4294967295|K>>>18),K=V+(J^z&(Z^J))+Y[4]+3889429448&4294967295,V=Z+(K<<20&4294967295|K>>>12),K=z+(Z^J&(V^Z))+Y[9]+568446438&4294967295,z=V+(K<<5&4294967295|K>>>27),K=J+(V^Z&(z^V))+Y[14]+3275163606&4294967295,J=z+(K<<9&4294967295|K>>>23),K=Z+(z^V&(J^z))+Y[3]+4107603335&4294967295,Z=J+(K<<14&4294967295|K>>>18),K=V+(J^z&(Z^J))+Y[8]+1163531501&4294967295,V=Z+(K<<20&4294967295|K>>>12),K=z+(Z^J&(V^Z))+Y[13]+2850285829&4294967295,z=V+(K<<5&4294967295|K>>>27),K=J+(V^Z&(z^V))+Y[2]+4243563512&4294967295,J=z+(K<<9&4294967295|K>>>23),K=Z+(z^V&(J^z))+Y[7]+1735328473&4294967295,Z=J+(K<<14&4294967295|K>>>18),K=V+(J^z&(Z^J))+Y[12]+2368359562&4294967295,V=Z+(K<<20&4294967295|K>>>12),K=z+(V^Z^J)+Y[5]+4294588738&4294967295,z=V+(K<<4&4294967295|K>>>28),K=J+(z^V^Z)+Y[8]+2272392833&4294967295,J=z+(K<<11&4294967295|K>>>21),K=Z+(J^z^V)+Y[11]+1839030562&4294967295,Z=J+(K<<16&4294967295|K>>>16),K=V+(Z^J^z)+Y[14]+4259657740&4294967295,V=Z+(K<<23&4294967295|K>>>9),K=z+(V^Z^J)+Y[1]+2763975236&4294967295,z=V+(K<<4&4294967295|K>>>28),K=J+(z^V^Z)+Y[4]+1272893353&4294967295,J=z+(K<<11&4294967295|K>>>21),K=Z+(J^z^V)+Y[7]+4139469664&4294967295,Z=J+(K<<16&4294967295|K>>>16),K=V+(Z^J^z)+Y[10]+3200236656&4294967295,V=Z+(K<<23&4294967295|K>>>9),K=z+(V^Z^J)+Y[13]+681279174&4294967295,z=V+(K<<4&4294967295|K>>>28),K=J+(z^V^Z)+Y[0]+3936430074&4294967295,J=z+(K<<11&4294967295|K>>>21),K=Z+(J^z^V)+Y[3]+3572445317&4294967295,Z=J+(K<<16&4294967295|K>>>16),K=V+(Z^J^z)+Y[6]+76029189&4294967295,V=Z+(K<<23&4294967295|K>>>9),K=z+(V^Z^J)+Y[9]+3654602809&4294967295,z=V+(K<<4&4294967295|K>>>28),K=J+(z^V^Z)+Y[12]+3873151461&4294967295,J=z+(K<<11&4294967295|K>>>21),K=Z+(J^z^V)+Y[15]+530742520&4294967295,Z=J+(K<<16&4294967295|K>>>16),K=V+(Z^J^z)+Y[2]+3299628645&4294967295,V=Z+(K<<23&4294967295|K>>>9),K=z+(Z^(V|~J))+Y[0]+4096336452&4294967295,z=V+(K<<6&4294967295|K>>>26),K=J+(V^(z|~Z))+Y[7]+1126891415&4294967295,J=z+(K<<10&4294967295|K>>>22),K=Z+(z^(J|~V))+Y[14]+2878612391&4294967295,Z=J+(K<<15&4294967295|K>>>17),K=V+(J^(Z|~z))+Y[5]+4237533241&4294967295,V=Z+(K<<21&4294967295|K>>>11),K=z+(Z^(V|~J))+Y[12]+1700485571&4294967295,z=V+(K<<6&4294967295|K>>>26),K=J+(V^(z|~Z))+Y[3]+2399980690&4294967295,J=z+(K<<10&4294967295|K>>>22),K=Z+(z^(J|~V))+Y[10]+4293915773&4294967295,Z=J+(K<<15&4294967295|K>>>17),K=V+(J^(Z|~z))+Y[1]+2240044497&4294967295,V=Z+(K<<21&4294967295|K>>>11),K=z+(Z^(V|~J))+Y[8]+1873313359&4294967295,z=V+(K<<6&4294967295|K>>>26),K=J+(V^(z|~Z))+Y[15]+4264355552&4294967295,J=z+(K<<10&4294967295|K>>>22),K=Z+(z^(J|~V))+Y[6]+2734768916&4294967295,Z=J+(K<<15&4294967295|K>>>17),K=V+(J^(Z|~z))+Y[13]+1309151649&4294967295,V=Z+(K<<21&4294967295|K>>>11),K=z+(Z^(V|~J))+Y[4]+4149444226&4294967295,z=V+(K<<6&4294967295|K>>>26),K=J+(V^(z|~Z))+Y[11]+3174756917&4294967295,J=z+(K<<10&4294967295|K>>>22),K=Z+(z^(J|~V))+Y[2]+718787259&4294967295,Z=J+(K<<15&4294967295|K>>>17),K=V+(J^(Z|~z))+Y[9]+3951481745&4294967295,j.g[0]=j.g[0]+z&4294967295,j.g[1]=j.g[1]+(Z+(K<<21&4294967295|K>>>11))&4294967295,j.g[2]=j.g[2]+Z&4294967295,j.g[3]=j.g[3]+J&4294967295}s.prototype.v=function(j,z){z===void 0&&(z=j.length);const V=z-this.blockSize,Y=this.C;let Z=this.h,J=0;for(;J<z;){if(Z==0)for(;J<=V;)c(this,j,J),J+=this.blockSize;if(typeof j=="string"){for(;J<z;)if(Y[Z++]=j.charCodeAt(J++),Z==this.blockSize){c(this,Y),Z=0;break}}else for(;J<z;)if(Y[Z++]=j[J++],Z==this.blockSize){c(this,Y),Z=0;break}}this.h=Z,this.o+=z},s.prototype.A=function(){var j=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);j[0]=128;for(var z=1;z<j.length-8;++z)j[z]=0;z=this.o*8;for(var V=j.length-8;V<j.length;++V)j[V]=z&255,z/=256;for(this.v(j),j=Array(16),z=0,V=0;V<4;++V)for(let Y=0;Y<32;Y+=8)j[z++]=this.g[V]>>>Y&255;return j};function h(j,z){var V=T;return Object.prototype.hasOwnProperty.call(V,j)?V[j]:V[j]=z(j)}function p(j,z){this.h=z;const V=[];let Y=!0;for(let Z=j.length-1;Z>=0;Z--){const J=j[Z]|0;Y&&J==z||(V[Z]=J,Y=!1)}this.g=V}var T={};function w(j){return-128<=j&&j<128?h(j,function(z){return new p([z|0],z<0?-1:0)}):new p([j|0],j<0?-1:0)}function E(j){if(isNaN(j)||!isFinite(j))return I;if(j<0)return q(E(-j));const z=[];let V=1;for(let Y=0;j>=V;Y++)z[Y]=j/V|0,V*=4294967296;return new p(z,0)}function C(j,z){if(j.length==0)throw Error("number format error: empty string");if(z=z||10,z<2||36<z)throw Error("radix out of range: "+z);if(j.charAt(0)=="-")return q(C(j.substring(1),z));if(j.indexOf("-")>=0)throw Error('number format error: interior "-" character');const V=E(Math.pow(z,8));let Y=I;for(let J=0;J<j.length;J+=8){var Z=Math.min(8,j.length-J);const K=parseInt(j.substring(J,J+Z),z);Z<8?(Z=E(Math.pow(z,Z)),Y=Y.j(Z).add(E(K))):(Y=Y.j(V),Y=Y.add(E(K)))}return Y}var I=w(0),M=w(1),B=w(16777216);n=p.prototype,n.m=function(){if($(this))return-q(this).m();let j=0,z=1;for(let V=0;V<this.g.length;V++){const Y=this.i(V);j+=(Y>=0?Y:4294967296+Y)*z,z*=4294967296}return j},n.toString=function(j){if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(W(this))return"0";if($(this))return"-"+q(this).toString(j);const z=E(Math.pow(j,6));var V=this;let Y="";for(;;){const Z=le(V,z).g;V=_e(V,Z.j(z));let J=((V.g.length>0?V.g[0]:V.h)>>>0).toString(j);if(V=Z,W(V))return J+Y;for(;J.length<6;)J="0"+J;Y=J+Y}},n.i=function(j){return j<0?0:j<this.g.length?this.g[j]:this.h};function W(j){if(j.h!=0)return!1;for(let z=0;z<j.g.length;z++)if(j.g[z]!=0)return!1;return!0}function $(j){return j.h==-1}n.l=function(j){return j=_e(this,j),$(j)?-1:W(j)?0:1};function q(j){const z=j.g.length,V=[];for(let Y=0;Y<z;Y++)V[Y]=~j.g[Y];return new p(V,~j.h).add(M)}n.abs=function(){return $(this)?q(this):this},n.add=function(j){const z=Math.max(this.g.length,j.g.length),V=[];let Y=0;for(let Z=0;Z<=z;Z++){let J=Y+(this.i(Z)&65535)+(j.i(Z)&65535),K=(J>>>16)+(this.i(Z)>>>16)+(j.i(Z)>>>16);Y=K>>>16,J&=65535,K&=65535,V[Z]=K<<16|J}return new p(V,V[V.length-1]&-2147483648?-1:0)};function _e(j,z){return j.add(q(z))}n.j=function(j){if(W(this)||W(j))return I;if($(this))return $(j)?q(this).j(q(j)):q(q(this).j(j));if($(j))return q(this.j(q(j)));if(this.l(B)<0&&j.l(B)<0)return E(this.m()*j.m());const z=this.g.length+j.g.length,V=[];for(var Y=0;Y<2*z;Y++)V[Y]=0;for(Y=0;Y<this.g.length;Y++)for(let Z=0;Z<j.g.length;Z++){const J=this.i(Y)>>>16,K=this.i(Y)&65535,$e=j.i(Z)>>>16,fe=j.i(Z)&65535;V[2*Y+2*Z]+=K*fe,ae(V,2*Y+2*Z),V[2*Y+2*Z+1]+=J*fe,ae(V,2*Y+2*Z+1),V[2*Y+2*Z+1]+=K*$e,ae(V,2*Y+2*Z+1),V[2*Y+2*Z+2]+=J*$e,ae(V,2*Y+2*Z+2)}for(j=0;j<z;j++)V[j]=V[2*j+1]<<16|V[2*j];for(j=z;j<2*z;j++)V[j]=0;return new p(V,0)};function ae(j,z){for(;(j[z]&65535)!=j[z];)j[z+1]+=j[z]>>>16,j[z]&=65535,z++}function Q(j,z){this.g=j,this.h=z}function le(j,z){if(W(z))throw Error("division by zero");if(W(j))return new Q(I,I);if($(j))return z=le(q(j),z),new Q(q(z.g),q(z.h));if($(z))return z=le(j,q(z)),new Q(q(z.g),z.h);if(j.g.length>30){if($(j)||$(z))throw Error("slowDivide_ only works with positive integers.");for(var V=M,Y=z;Y.l(j)<=0;)V=De(V),Y=De(Y);var Z=Oe(V,1),J=Oe(Y,1);for(Y=Oe(Y,2),V=Oe(V,2);!W(Y);){var K=J.add(Y);K.l(j)<=0&&(Z=Z.add(V),J=K),Y=Oe(Y,1),V=Oe(V,1)}return z=_e(j,Z.j(z)),new Q(Z,z)}for(Z=I;j.l(z)>=0;){for(V=Math.max(1,Math.floor(j.m()/z.m())),Y=Math.ceil(Math.log(V)/Math.LN2),Y=Y<=48?1:Math.pow(2,Y-48),J=E(V),K=J.j(z);$(K)||K.l(j)>0;)V-=Y,J=E(V),K=J.j(z);W(J)&&(J=M),Z=Z.add(J),j=_e(j,K)}return new Q(Z,j)}n.B=function(j){return le(this,j).h},n.and=function(j){const z=Math.max(this.g.length,j.g.length),V=[];for(let Y=0;Y<z;Y++)V[Y]=this.i(Y)&j.i(Y);return new p(V,this.h&j.h)},n.or=function(j){const z=Math.max(this.g.length,j.g.length),V=[];for(let Y=0;Y<z;Y++)V[Y]=this.i(Y)|j.i(Y);return new p(V,this.h|j.h)},n.xor=function(j){const z=Math.max(this.g.length,j.g.length),V=[];for(let Y=0;Y<z;Y++)V[Y]=this.i(Y)^j.i(Y);return new p(V,this.h^j.h)};function De(j){const z=j.g.length+1,V=[];for(let Y=0;Y<z;Y++)V[Y]=j.i(Y)<<1|j.i(Y-1)>>>31;return new p(V,j.h)}function Oe(j,z){const V=z>>5;z%=32;const Y=j.g.length-V,Z=[];for(let J=0;J<Y;J++)Z[J]=z>0?j.i(J+V)>>>z|j.i(J+V+1)<<32-z:j.i(J+V);return new p(Z,j.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,DA=s,p.prototype.add=p.prototype.add,p.prototype.multiply=p.prototype.j,p.prototype.modulo=p.prototype.B,p.prototype.compare=p.prototype.l,p.prototype.toNumber=p.prototype.m,p.prototype.toString=p.prototype.toString,p.prototype.getBits=p.prototype.i,p.fromNumber=E,p.fromString=C,ko=p}).apply(typeof iE<"u"?iE:typeof self<"u"?self:typeof window<"u"?window:{});var Of=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var MA,Du,PA,Yf,Lg,LA,kA,BA;(function(){var n,e=Object.defineProperty;function t(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof Of=="object"&&Of];for(var N=0;N<x.length;++N){var D=x[N];if(D&&D.Math==Math)return D}throw Error("Cannot find global object")}var s=t(this);function c(x,N){if(N)e:{var D=s;x=x.split(".");for(var F=0;F<x.length-1;F++){var ce=x[F];if(!(ce in D))break e;D=D[ce]}x=x[x.length-1],F=D[x],N=N(F),N!=F&&N!=null&&e(D,x,{configurable:!0,writable:!0,value:N})}}c("Symbol.dispose",function(x){return x||Symbol("Symbol.dispose")}),c("Array.prototype.values",function(x){return x||function(){return this[Symbol.iterator]()}}),c("Object.entries",function(x){return x||function(N){var D=[],F;for(F in N)Object.prototype.hasOwnProperty.call(N,F)&&D.push([F,N[F]]);return D}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},p=this||self;function T(x){var N=typeof x;return N=="object"&&x!=null||N=="function"}function w(x,N,D){return x.call.apply(x.bind,arguments)}function E(x,N,D){return E=w,E.apply(null,arguments)}function C(x,N){var D=Array.prototype.slice.call(arguments,1);return function(){var F=D.slice();return F.push.apply(F,arguments),x.apply(this,F)}}function I(x,N){function D(){}D.prototype=N.prototype,x.Z=N.prototype,x.prototype=new D,x.prototype.constructor=x,x.Ob=function(F,ce,Ee){for(var Be=Array(arguments.length-2),gt=2;gt<arguments.length;gt++)Be[gt-2]=arguments[gt];return N.prototype[ce].apply(F,Be)}}var M=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?x=>x&&AsyncContext.Snapshot.wrap(x):x=>x;function B(x){const N=x.length;if(N>0){const D=Array(N);for(let F=0;F<N;F++)D[F]=x[F];return D}return[]}function W(x,N){for(let F=1;F<arguments.length;F++){const ce=arguments[F];var D=typeof ce;if(D=D!="object"?D:ce?Array.isArray(ce)?"array":D:"null",D=="array"||D=="object"&&typeof ce.length=="number"){D=x.length||0;const Ee=ce.length||0;x.length=D+Ee;for(let Be=0;Be<Ee;Be++)x[D+Be]=ce[Be]}else x.push(ce)}}class ${constructor(N,D){this.i=N,this.j=D,this.h=0,this.g=null}get(){let N;return this.h>0?(this.h--,N=this.g,this.g=N.next,N.next=null):N=this.i(),N}}function q(x){p.setTimeout(()=>{throw x},0)}function _e(){var x=j;let N=null;return x.g&&(N=x.g,x.g=x.g.next,x.g||(x.h=null),N.next=null),N}class ae{constructor(){this.h=this.g=null}add(N,D){const F=Q.get();F.set(N,D),this.h?this.h.next=F:this.g=F,this.h=F}}var Q=new $(()=>new le,x=>x.reset());class le{constructor(){this.next=this.g=this.h=null}set(N,D){this.h=N,this.g=D,this.next=null}reset(){this.next=this.g=this.h=null}}let De,Oe=!1,j=new ae,z=()=>{const x=Promise.resolve(void 0);De=()=>{x.then(V)}};function V(){for(var x;x=_e();){try{x.h.call(x.g)}catch(D){q(D)}var N=Q;N.j(x),N.h<100&&(N.h++,x.next=N.g,N.g=x)}Oe=!1}function Y(){this.u=this.u,this.C=this.C}Y.prototype.u=!1,Y.prototype.dispose=function(){this.u||(this.u=!0,this.N())},Y.prototype[Symbol.dispose]=function(){this.dispose()},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Z(x,N){this.type=x,this.g=this.target=N,this.defaultPrevented=!1}Z.prototype.h=function(){this.defaultPrevented=!0};var J=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var x=!1,N=Object.defineProperty({},"passive",{get:function(){x=!0}});try{const D=()=>{};p.addEventListener("test",D,N),p.removeEventListener("test",D,N)}catch{}return x})();function K(x){return/^[\s\xa0]*$/.test(x)}function $e(x,N){Z.call(this,x?x.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,x&&this.init(x,N)}I($e,Z),$e.prototype.init=function(x,N){const D=this.type=x.type,F=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:null;this.target=x.target||x.srcElement,this.g=N,N=x.relatedTarget,N||(D=="mouseover"?N=x.fromElement:D=="mouseout"&&(N=x.toElement)),this.relatedTarget=N,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0),this.button=x.button,this.key=x.key||"",this.ctrlKey=x.ctrlKey,this.altKey=x.altKey,this.shiftKey=x.shiftKey,this.metaKey=x.metaKey,this.pointerId=x.pointerId||0,this.pointerType=x.pointerType,this.state=x.state,this.i=x,x.defaultPrevented&&$e.Z.h.call(this)},$e.prototype.h=function(){$e.Z.h.call(this);const x=this.i;x.preventDefault?x.preventDefault():x.returnValue=!1};var fe="closure_listenable_"+(Math.random()*1e6|0),me=0;function be(x,N,D,F,ce){this.listener=x,this.proxy=null,this.src=N,this.type=D,this.capture=!!F,this.ha=ce,this.key=++me,this.da=this.fa=!1}function Ge(x){x.da=!0,x.listener=null,x.proxy=null,x.src=null,x.ha=null}function ct(x,N,D){for(const F in x)N.call(D,x[F],F,x)}function xt(x,N){for(const D in x)N.call(void 0,x[D],D,x)}function ie(x){const N={};for(const D in x)N[D]=x[D];return N}const Ae="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ve(x,N){let D,F;for(let ce=1;ce<arguments.length;ce++){F=arguments[ce];for(D in F)x[D]=F[D];for(let Ee=0;Ee<Ae.length;Ee++)D=Ae[Ee],Object.prototype.hasOwnProperty.call(F,D)&&(x[D]=F[D])}}function je(x){this.src=x,this.g={},this.h=0}je.prototype.add=function(x,N,D,F,ce){const Ee=x.toString();x=this.g[Ee],x||(x=this.g[Ee]=[],this.h++);const Be=Le(x,N,F,ce);return Be>-1?(N=x[Be],D||(N.fa=!1)):(N=new be(N,this.src,Ee,!!F,ce),N.fa=D,x.push(N)),N};function rt(x,N){const D=N.type;if(D in x.g){var F=x.g[D],ce=Array.prototype.indexOf.call(F,N,void 0),Ee;(Ee=ce>=0)&&Array.prototype.splice.call(F,ce,1),Ee&&(Ge(N),x.g[D].length==0&&(delete x.g[D],x.h--))}}function Le(x,N,D,F){for(let ce=0;ce<x.length;++ce){const Ee=x[ce];if(!Ee.da&&Ee.listener==N&&Ee.capture==!!D&&Ee.ha==F)return ce}return-1}var wt="closure_lm_"+(Math.random()*1e6|0),vt={};function tn(x,N,D,F,ce){if(Array.isArray(N)){for(let Ee=0;Ee<N.length;Ee++)tn(x,N[Ee],D,F,ce);return null}return D=qt(D),x&&x[fe]?x.J(N,D,T(F)?!!F.capture:!1,ce):Ur(x,N,D,!1,F,ce)}function Ur(x,N,D,F,ce,Ee){if(!N)throw Error("Invalid event type");const Be=T(ce)?!!ce.capture:!!ce;let gt=Qr(x);if(gt||(x[wt]=gt=new je(x)),D=gt.add(N,D,F,Be,Ee),D.proxy)return D;if(F=cn(),D.proxy=F,F.src=x,F.listener=D,x.addEventListener)J||(ce=Be),ce===void 0&&(ce=!1),x.addEventListener(N.toString(),F,ce);else if(x.attachEvent)x.attachEvent(fr(N.toString()),F);else if(x.addListener&&x.removeListener)x.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return D}function cn(){function x(D){return N.call(x.src,x.listener,D)}const N=ir;return x}function ui(x,N,D,F,ce){if(Array.isArray(N))for(var Ee=0;Ee<N.length;Ee++)ui(x,N[Ee],D,F,ce);else F=T(F)?!!F.capture:!!F,D=qt(D),x&&x[fe]?(x=x.i,Ee=String(N).toString(),Ee in x.g&&(N=x.g[Ee],D=Le(N,D,F,ce),D>-1&&(Ge(N[D]),Array.prototype.splice.call(N,D,1),N.length==0&&(delete x.g[Ee],x.h--)))):x&&(x=Qr(x))&&(N=x.g[N.toString()],x=-1,N&&(x=Le(N,D,F,ce)),(D=x>-1?N[x]:null)&&At(D))}function At(x){if(typeof x!="number"&&x&&!x.da){var N=x.src;if(N&&N[fe])rt(N.i,x);else{var D=x.type,F=x.proxy;N.removeEventListener?N.removeEventListener(D,F,x.capture):N.detachEvent?N.detachEvent(fr(D),F):N.addListener&&N.removeListener&&N.removeListener(F),(D=Qr(N))?(rt(D,x),D.h==0&&(D.src=null,N[wt]=null)):Ge(x)}}}function fr(x){return x in vt?vt[x]:vt[x]="on"+x}function ir(x,N){if(x.da)x=!0;else{N=new $e(N,this);const D=x.listener,F=x.ha||x.src;x.fa&&At(x),x=D.call(F,N)}return x}function Qr(x){return x=x[wt],x instanceof je?x:null}var wn="__closure_events_fn_"+(Math.random()*1e9>>>0);function qt(x){return typeof x=="function"?x:(x[wn]||(x[wn]=function(N){return x.handleEvent(N)}),x[wn])}function Ze(){Y.call(this),this.i=new je(this),this.M=this,this.G=null}I(Ze,Y),Ze.prototype[fe]=!0,Ze.prototype.removeEventListener=function(x,N,D,F){ui(this,x,N,D,F)};function An(x,N){var D,F=x.G;if(F)for(D=[];F;F=F.G)D.push(F);if(x=x.M,F=N.type||N,typeof N=="string")N=new Z(N,x);else if(N instanceof Z)N.target=N.target||x;else{var ce=N;N=new Z(F,x),Ve(N,ce)}ce=!0;let Ee,Be;if(D)for(Be=D.length-1;Be>=0;Be--)Ee=N.g=D[Be],ce=He(Ee,F,!0,N)&&ce;if(Ee=N.g=x,ce=He(Ee,F,!0,N)&&ce,ce=He(Ee,F,!1,N)&&ce,D)for(Be=0;Be<D.length;Be++)Ee=N.g=D[Be],ce=He(Ee,F,!1,N)&&ce}Ze.prototype.N=function(){if(Ze.Z.N.call(this),this.i){var x=this.i;for(const N in x.g){const D=x.g[N];for(let F=0;F<D.length;F++)Ge(D[F]);delete x.g[N],x.h--}}this.G=null},Ze.prototype.J=function(x,N,D,F){return this.i.add(String(x),N,!1,D,F)},Ze.prototype.K=function(x,N,D,F){return this.i.add(String(x),N,!0,D,F)};function He(x,N,D,F){if(N=x.i.g[String(N)],!N)return!0;N=N.concat();let ce=!0;for(let Ee=0;Ee<N.length;++Ee){const Be=N[Ee];if(Be&&!Be.da&&Be.capture==D){const gt=Be.listener,jn=Be.ha||Be.src;Be.fa&&rt(x.i,Be),ce=gt.call(jn,F)!==!1&&ce}}return ce&&!F.defaultPrevented}function As(x,N){if(typeof x!="function")if(x&&typeof x.handleEvent=="function")x=E(x.handleEvent,x);else throw Error("Invalid listener argument");return Number(N)>2147483647?-1:p.setTimeout(x,N||0)}function is(x){x.g=As(()=>{x.g=null,x.i&&(x.i=!1,is(x))},x.l);const N=x.h;x.h=null,x.m.apply(null,N)}class mn extends Y{constructor(N,D){super(),this.m=N,this.l=D,this.h=null,this.i=!1,this.g=null}j(N){this.h=arguments,this.g?this.i=!0:is(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hi(x){Y.call(this),this.h=x,this.g={}}I(hi,Y);var dr=[];function Zr(x){ct(x.g,function(N,D){this.g.hasOwnProperty(D)&&At(N)},x),x.g={}}hi.prototype.N=function(){hi.Z.N.call(this),Zr(this)},hi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var sr=p.JSON.stringify,Qn=p.JSON.parse,Ps=class{stringify(x){return p.JSON.stringify(x,void 0)}parse(x){return p.JSON.parse(x,void 0)}};function ss(){}function ra(){}var Yt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Me(){Z.call(this,"d")}I(Me,Z);function Xt(){Z.call(this,"c")}I(Xt,Z);var at={},an=null;function fi(){return an=an||new Ze}at.Ia="serverreachability";function bs(x){Z.call(this,at.Ia,x)}I(bs,Z);function Jr(x){const N=fi();An(N,new bs(N))}at.STAT_EVENT="statevent";function bt(x,N){Z.call(this,at.STAT_EVENT,x),this.stat=N}I(bt,Z);function on(x){const N=fi();An(N,new bt(N,x))}at.Ja="timingevent";function $r(x,N){Z.call(this,at.Ja,x),this.size=N}I($r,Z);function ei(x,N){if(typeof x!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){x()},N)}function In(){this.g=!0}In.prototype.ua=function(){this.g=!1};function Ls(x,N,D,F,ce,Ee){x.info(function(){if(x.g)if(Ee){var Be="",gt=Ee.split("&");for(let Qt=0;Qt<gt.length;Qt++){var jn=gt[Qt].split("=");if(jn.length>1){const vn=jn[0];jn=jn[1];const xi=vn.split("_");Be=xi.length>=2&&xi[1]=="type"?Be+(vn+"="+jn+"&"):Be+(vn+"=redacted&")}}}else Be=null;else Be=Ee;return"XMLHTTP REQ ("+F+") [attempt "+ce+"]: "+N+`
`+D+`
`+Be})}function Ln(x,N,D,F,ce,Ee,Be){x.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+ce+"]: "+N+`
`+D+`
`+Ee+" "+Be})}function gr(x,N,D,F){x.info(function(){return"XMLHTTP TEXT ("+N+"): "+Vr(x,D)+(F?" "+F:"")})}function di(x,N){x.info(function(){return"TIMEOUT: "+N})}In.prototype.info=function(){};function Vr(x,N){if(!x.g)return N;if(!N)return null;try{const Ee=JSON.parse(N);if(Ee){for(x=0;x<Ee.length;x++)if(Array.isArray(Ee[x])){var D=Ee[x];if(!(D.length<2)){var F=D[1];if(Array.isArray(F)&&!(F.length<1)){var ce=F[0];if(ce!="noop"&&ce!="stop"&&ce!="close")for(let Be=1;Be<F.length;Be++)F[Be]=""}}}}return sr(Ee)}catch{return N}}var ki={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ti={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},as;function kn(){}I(kn,ss),kn.prototype.g=function(){return new XMLHttpRequest},as=new kn;function br(x){return encodeURIComponent(String(x))}function Tr(x){var N=1;x=x.split(":");const D=[];for(;N>0&&x.length;)D.push(x.shift()),N--;return x.length&&D.push(x.join(":")),D}function Fe(x,N,D,F){this.j=x,this.i=N,this.l=D,this.S=F||1,this.V=new hi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new mr}function mr(){this.i=null,this.g="",this.h=!1}var bn={},Wt={};function vr(x,N,D){x.M=1,x.A=Bn(Ct(N)),x.u=D,x.R=!0,Bi(x,null)}function Bi(x,N){x.F=Date.now(),vi(x),x.B=Ct(x.A);var D=x.B,F=x.S;Array.isArray(F)||(F=[String(F)]),un(D.i,"t",F),x.C=0,D=x.j.L,x.h=new mr,x.g=$a(x.j,D?N:null,!x.u),x.P>0&&(x.O=new mn(E(x.Y,x,x.g),x.P)),N=x.V,D=x.g,F=x.ba;var ce="readystatechange";Array.isArray(ce)||(ce&&(dr[0]=ce.toString()),ce=dr);for(let Ee=0;Ee<ce.length;Ee++){const Be=tn(D,ce[Ee],F||N.handleEvent,!1,N.h||N);if(!Be)break;N.g[Be.key]=Be}N=x.J?ie(x.J):{},x.u?(x.v||(x.v="POST"),N["Content-Type"]="application/x-www-form-urlencoded",x.g.ea(x.B,x.v,x.u,N)):(x.v="GET",x.g.ea(x.B,x.v,null,N)),Jr(),Ls(x.i,x.v,x.B,x.l,x.S,x.u)}Fe.prototype.ba=function(x){x=x.target;const N=this.O;N&&Ci(x)==3?N.j():this.Y(x)},Fe.prototype.Y=function(x){try{if(x==this.g)e:{const gt=Ci(this.g),jn=this.g.ya(),Qt=this.g.ca();if(!(gt<3)&&(gt!=3||this.g&&(this.h.h||this.g.la()||Yn(this.g)))){this.K||gt!=4||jn==7||(jn==8||Qt<=0?Jr(3):Jr(2)),pn(this);var N=this.g.ca();this.X=N;var D=Ts(this);if(this.o=N==200,Ln(this.i,this.v,this.B,this.l,this.S,gt,N),this.o){if(this.U&&!this.L){t:{if(this.g){var F,ce=this.g;if((F=ce.g?ce.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(F)){var Ee=F;break t}}Ee=null}if(x=Ee)gr(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ar(this,x);else{this.o=!1,this.m=3,on(12),Dr(this),Dt(this);break e}}if(this.R){x=!0;let vn;for(;!this.K&&this.C<D.length;)if(vn=ia(this,D),vn==Wt){gt==4&&(this.m=4,on(14),x=!1),gr(this.i,this.l,null,"[Incomplete Response]");break}else if(vn==bn){this.m=4,on(15),gr(this.i,this.l,D,"[Invalid Chunk]"),x=!1;break}else gr(this.i,this.l,vn,null),ar(this,vn);if(jr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),gt!=4||D.length!=0||this.h.h||(this.m=1,on(16),x=!1),this.o=this.o&&x,!x)gr(this.i,this.l,D,"[Invalid Chunked Response]"),Dr(this),Dt(this);else if(D.length>0&&!this.W){this.W=!0;var Be=this.j;Be.g==this&&Be.aa&&!Be.P&&(Be.j.info("Great, no buffering proxy detected. Bytes received: "+D.length),xe(Be),Be.P=!0,on(11))}}else gr(this.i,this.l,D,null),ar(this,D);gt==4&&Dr(this),this.o&&!this.K&&(gt==4?da(this.j,this):(this.o=!1,vi(this)))}else pi(this.g),N==400&&D.indexOf("Unknown SID")>0?(this.m=3,on(12)):(this.m=0,on(13)),Dr(this),Dt(this)}}}catch{}finally{}};function Ts(x){if(!jr(x))return x.g.la();const N=Yn(x.g);if(N==="")return"";let D="";const F=N.length,ce=Ci(x.g)==4;if(!x.h.i){if(typeof TextDecoder>"u")return Dr(x),Dt(x),"";x.h.i=new p.TextDecoder}for(let Ee=0;Ee<F;Ee++)x.h.h=!0,D+=x.h.i.decode(N[Ee],{stream:!(ce&&Ee==F-1)});return N.length=0,x.h.g+=D,x.C=0,x.h.g}function jr(x){return x.g?x.v=="GET"&&x.M!=2&&x.j.Aa:!1}function ia(x,N){var D=x.C,F=N.indexOf(`
`,D);return F==-1?Wt:(D=Number(N.substring(D,F)),isNaN(D)?bn:(F+=1,F+D>N.length?Wt:(N=N.slice(F,F+D),x.C=F+D,N)))}Fe.prototype.cancel=function(){this.K=!0,Dr(this)};function vi(x){x.T=Date.now()+x.H,Sr(x,x.H)}function Sr(x,N){if(x.D!=null)throw Error("WatchDog timer not null");x.D=ei(E(x.aa,x),N)}function pn(x){x.D&&(p.clearTimeout(x.D),x.D=null)}Fe.prototype.aa=function(){this.D=null;const x=Date.now();x-this.T>=0?(di(this.i,this.B),this.M!=2&&(Jr(),on(17)),Dr(this),this.m=2,Dt(this)):Sr(this,this.T-x)};function Dt(x){x.j.I==0||x.K||da(x.j,x)}function Dr(x){pn(x);var N=x.O;N&&typeof N.dispose=="function"&&N.dispose(),x.O=null,Zr(x.V),x.g&&(N=x.g,x.g=null,N.abort(),N.dispose())}function ar(x,N){try{var D=x.j;if(D.I!=0&&(D.g==x||Cr(D.h,x))){if(!x.L&&Cr(D.h,x)&&D.I==3){try{var F=D.Ba.g.parse(N)}catch{F=null}if(Array.isArray(F)&&F.length==3){var ce=F;if(ce[0]==0){e:if(!D.v){if(D.g)if(D.g.F+3e3<x.F)Un(D),Cs(D);else break e;fa(D),on(18)}}else D.xa=ce[1],0<D.xa-D.K&&ce[2]<37500&&D.F&&D.A==0&&!D.C&&(D.C=ei(E(D.Va,D),6e3));Kt(D.h)<=1&&D.ta&&(D.ta=void 0)}else ls(D,11)}else if((x.L||D.g==x)&&Un(D),!K(N))for(ce=D.Ba.g.parse(N),N=0;N<ce.length;N++){let Qt=ce[N];const vn=Qt[0];if(!(vn<=D.K))if(D.K=vn,Qt=Qt[1],D.I==2)if(Qt[0]=="c"){D.M=Qt[1],D.ba=Qt[2];const xi=Qt[3];xi!=null&&(D.ka=xi,D.j.info("VER="+D.ka));const hs=Qt[4];hs!=null&&(D.za=hs,D.j.info("SVER="+D.za));const Pr=Qt[5];Pr!=null&&typeof Pr=="number"&&Pr>0&&(F=1.5*Pr,D.O=F,D.j.info("backChannelRequestTimeoutMs_="+F)),F=D;const yi=x.g;if(yi){const ma=yi.g?yi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ma){var Ee=F.h;Ee.g||ma.indexOf("spdy")==-1&&ma.indexOf("quic")==-1&&ma.indexOf("h2")==-1||(Ee.j=Ee.l,Ee.g=new Set,Ee.h&&(aa(Ee,Ee.h),Ee.h=null))}if(F.G){const fs=yi.g?yi.g.getResponseHeader("X-HTTP-Session-Id"):null;fs&&(F.wa=fs,it(F.J,F.G,fs))}}D.I=3,D.l&&D.l.ra(),D.aa&&(D.T=Date.now()-x.F,D.j.info("Handshake RTT: "+D.T+"ms")),F=D;var Be=x;if(F.na=Pl(F,F.L?F.ba:null,F.W),Be.L){Mt(F.h,Be);var gt=Be,jn=F.O;jn&&(gt.H=jn),gt.D&&(pn(gt),vi(gt)),F.g=Be}else Fi(F);D.i.length>0&&os(D)}else Qt[0]!="stop"&&Qt[0]!="close"||ls(D,7);else D.I==3&&(Qt[0]=="stop"||Qt[0]=="close"?Qt[0]=="stop"?ls(D,7):Qa(D):Qt[0]!="noop"&&D.l&&D.l.qa(Qt),D.A=0)}}Jr(4)}catch{}}var Nn=class{constructor(x,N){this.g=x,this.map=N}};function Ie(x){this.l=x||10,p.PerformanceNavigationTiming?(x=p.performance.getEntriesByType("navigation"),x=x.length>0&&(x[0].nextHopProtocol=="hq"||x[0].nextHopProtocol=="h2")):x=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=x?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function sa(x){return x.h?!0:x.g?x.g.size>=x.j:!1}function Kt(x){return x.h?1:x.g?x.g.size:0}function Cr(x,N){return x.h?x.h==N:x.g?x.g.has(N):!1}function aa(x,N){x.g?x.g.add(N):x.h=N}function Mt(x,N){x.h&&x.h==N?x.h=null:x.g&&x.g.has(N)&&x.g.delete(N)}Ie.prototype.cancel=function(){if(this.i=X(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const x of this.g.values())x.cancel();this.g.clear()}};function X(x){if(x.h!=null)return x.i.concat(x.h.G);if(x.g!=null&&x.g.size!==0){let N=x.i;for(const D of x.g.values())N=N.concat(D.G);return N}return B(x.i)}var Ue=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ke(x,N){if(x){x=x.split("&");for(let D=0;D<x.length;D++){const F=x[D].indexOf("=");let ce,Ee=null;F>=0?(ce=x[D].substring(0,F),Ee=x[D].substring(F+1)):ce=x[D],N(ce,Ee?decodeURIComponent(Ee.replace(/\+/g," ")):"")}}}function St(x){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let N;x instanceof St?(this.l=x.l,ft(this,x.j),this.o=x.o,this.g=x.g,Zn(this,x.u),this.h=x.h,oa(this,Jo(x.i)),this.m=x.m):x&&(N=String(x).match(Ue))?(this.l=!1,ft(this,N[1]||"",!0),this.o=gi(N[2]||""),this.g=gi(N[3]||"",!0),Zn(this,N[4]),this.h=gi(N[5]||"",!0),oa(this,N[6]||"",!0),this.m=gi(N[7]||"")):(this.l=!1,this.i=new or(null,this.l))}St.prototype.toString=function(){const x=[];var N=this.j;N&&x.push(Hn(N,Gn,!0),":");var D=this.g;return(D||N=="file")&&(x.push("//"),(N=this.o)&&x.push(Hn(N,Gn,!0),"@"),x.push(br(D).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D=this.u,D!=null&&x.push(":",String(D))),(D=this.h)&&(this.g&&D.charAt(0)!="/"&&x.push("/"),x.push(Hn(D,D.charAt(0)=="/"?H:he,!0))),(D=this.i.toString())&&x.push("?",D),(D=this.m)&&x.push("#",Hn(D,qn)),x.join("")},St.prototype.resolve=function(x){const N=Ct(this);let D=!!x.j;D?ft(N,x.j):D=!!x.o,D?N.o=x.o:D=!!x.g,D?N.g=x.g:D=x.u!=null;var F=x.h;if(D)Zn(N,x.u);else if(D=!!x.h){if(F.charAt(0)!="/")if(this.g&&!this.h)F="/"+F;else{var ce=N.h.lastIndexOf("/");ce!=-1&&(F=N.h.slice(0,ce+1)+F)}if(ce=F,ce==".."||ce==".")F="";else if(ce.indexOf("./")!=-1||ce.indexOf("/.")!=-1){F=ce.lastIndexOf("/",0)==0,ce=ce.split("/");const Ee=[];for(let Be=0;Be<ce.length;){const gt=ce[Be++];gt=="."?F&&Be==ce.length&&Ee.push(""):gt==".."?((Ee.length>1||Ee.length==1&&Ee[0]!="")&&Ee.pop(),F&&Be==ce.length&&Ee.push("")):(Ee.push(gt),F=!0)}F=Ee.join("/")}else F=ce}return D?N.h=F:D=x.i.toString()!=="",D?oa(N,Jo(x.i)):D=!!x.m,D&&(N.m=x.m),N};function Ct(x){return new St(x)}function ft(x,N,D){x.j=D?gi(N,!0):N,x.j&&(x.j=x.j.replace(/:$/,""))}function Zn(x,N){if(N){if(N=Number(N),isNaN(N)||N<0)throw Error("Bad port number "+N);x.u=N}else x.u=null}function oa(x,N,D){N instanceof or?(x.i=N,Bs(x.i,x.l)):(D||(N=Hn(N,Xe)),x.i=new or(N,x.l))}function it(x,N,D){x.i.set(N,D)}function Bn(x){return it(x,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),x}function gi(x,N){return x?N?decodeURI(x.replace(/%25/g,"%2525")):decodeURIComponent(x):""}function Hn(x,N,D){return typeof x=="string"?(x=encodeURI(x).replace(N,It),D&&(x=x.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x):null}function It(x){return x=x.charCodeAt(0),"%"+(x>>4&15).toString(16)+(x&15).toString(16)}var Gn=/[#\/\?@]/g,he=/[#\?:]/g,H=/[#\?]/g,Xe=/[#\?@]/g,qn=/#/g;function or(x,N){this.h=this.g=null,this.i=x||null,this.j=!!N}function ni(x){x.g||(x.g=new Map,x.h=0,x.i&&Ke(x.i,function(N,D){x.add(decodeURIComponent(N.replace(/\+/g," ")),D)}))}n=or.prototype,n.add=function(x,N){ni(this),this.i=null,x=ks(this,x);let D=this.g.get(x);return D||this.g.set(x,D=[]),D.push(N),this.h+=1,this};function Ka(x,N){ni(x),N=ks(x,N),x.g.has(N)&&(x.i=null,x.h-=x.g.get(N).length,x.g.delete(N))}function Mr(x,N){return ni(x),N=ks(x,N),x.g.has(N)}n.forEach=function(x,N){ni(this),this.g.forEach(function(D,F){D.forEach(function(ce){x.call(N,ce,F,this)},this)},this)};function Je(x,N){ni(x);let D=[];if(typeof N=="string")Mr(x,N)&&(D=D.concat(x.g.get(ks(x,N))));else for(x=Array.from(x.g.values()),N=0;N<x.length;N++)D=D.concat(x[N]);return D}n.set=function(x,N){return ni(this),this.i=null,x=ks(this,x),Mr(this,x)&&(this.h-=this.g.get(x).length),this.g.set(x,[N]),this.h+=1,this},n.get=function(x,N){return x?(x=Je(this,x),x.length>0?String(x[0]):N):N};function un(x,N,D){Ka(x,N),D.length>0&&(x.i=null,x.g.set(ks(x,N),B(D)),x.h+=D.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const x=[],N=Array.from(this.g.keys());for(let F=0;F<N.length;F++){var D=N[F];const ce=br(D);D=Je(this,D);for(let Ee=0;Ee<D.length;Ee++){let Be=ce;D[Ee]!==""&&(Be+="="+br(D[Ee])),x.push(Be)}}return this.i=x.join("&")};function Jo(x){const N=new or;return N.i=x.i,x.g&&(N.g=new Map(x.g),N.h=x.h),N}function ks(x,N){return N=String(N),x.j&&(N=N.toLowerCase()),N}function Bs(x,N){N&&!x.j&&(ni(x),x.i=null,x.g.forEach(function(D,F){const ce=F.toLowerCase();F!=ce&&(Ka(this,F),un(this,ce,D))},x)),x.j=N}function ri(x,N){const D=new In;if(p.Image){const F=new Image;F.onload=C(Si,D,"TestLoadImage: loaded",!0,N,F),F.onerror=C(Si,D,"TestLoadImage: error",!1,N,F),F.onabort=C(Si,D,"TestLoadImage: abort",!1,N,F),F.ontimeout=C(Si,D,"TestLoadImage: timeout",!1,N,F),p.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=x}else N(!1)}function la(x,N){const D=new In,F=new AbortController,ce=setTimeout(()=>{F.abort(),Si(D,"TestPingServer: timeout",!1,N)},1e4);fetch(x,{signal:F.signal}).then(Ee=>{clearTimeout(ce),Ee.ok?Si(D,"TestPingServer: ok",!0,N):Si(D,"TestPingServer: server error",!1,N)}).catch(()=>{clearTimeout(ce),Si(D,"TestPingServer: error",!1,N)})}function Si(x,N,D,F,ce){try{ce&&(ce.onload=null,ce.onerror=null,ce.onabort=null,ce.ontimeout=null),F(D)}catch{}}function Tn(){this.g=new Ps}function ii(x){this.i=x.Sb||null,this.h=x.ab||!1}I(ii,ss),ii.prototype.g=function(){return new si(this.i,this.h)};function si(x,N){Ze.call(this),this.H=x,this.o=N,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}I(si,Ze),n=si.prototype,n.open=function(x,N){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=x,this.D=N,this.readyState=1,ot(this)},n.send=function(x){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const N={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};x&&(N.body=x),(this.H||p).fetch(new Request(this.D,N)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Us(this)),this.readyState=0},n.Pa=function(x){if(this.g&&(this.l=x,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=x.headers,this.readyState=2,ot(this)),this.g&&(this.readyState=3,ot(this),this.g)))if(this.responseType==="arraybuffer")x.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in x){if(this.j=x.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;et(this)}else x.text().then(this.Oa.bind(this),this.ga.bind(this))};function et(x){x.j.read().then(x.Ma.bind(x)).catch(x.ga.bind(x))}n.Ma=function(x){if(this.g){if(this.o&&x.value)this.response.push(x.value);else if(!this.o){var N=x.value?x.value:new Uint8Array(0);(N=this.B.decode(N,{stream:!x.done}))&&(this.response=this.responseText+=N)}x.done?Us(this):ot(this),this.readyState==3&&et(this)}},n.Oa=function(x){this.g&&(this.response=this.responseText=x,Us(this))},n.Na=function(x){this.g&&(this.response=x,Us(this))},n.ga=function(){this.g&&Us(this)};function Us(x){x.readyState=4,x.l=null,x.j=null,x.B=null,ot(x)}n.setRequestHeader=function(x,N){this.A.append(x,N)},n.getResponseHeader=function(x){return this.h&&this.h.get(x.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const x=[],N=this.h.entries();for(var D=N.next();!D.done;)D=D.value,x.push(D[0]+": "+D[1]),D=N.next();return x.join(`\r
`)};function ot(x){x.onreadystatechange&&x.onreadystatechange.call(x)}Object.defineProperty(si.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(x){this.m=x?"include":"same-origin"}});function hn(x){let N="";return ct(x,function(D,F){N+=F,N+=":",N+=D,N+=`\r
`}),N}function ca(x,N,D){e:{for(F in D){var F=!1;break e}F=!0}F||(D=hn(D),typeof x=="string"?D!=null&&br(D):it(x,N,D))}function nn(x){Ze.call(this),this.headers=new Map,this.L=x||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}I(nn,Ze);var Ui=/^https?$/i,Vi=["POST","PUT"];n=nn.prototype,n.Fa=function(x){this.H=x},n.ea=function(x,N,D,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+x);N=N?N.toUpperCase():"GET",this.D=x,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():as.g(),this.g.onreadystatechange=M(E(this.Ca,this));try{this.B=!0,this.g.open(N,String(x),!0),this.B=!1}catch(Ee){ua(this,Ee);return}if(x=D||"",D=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var ce in F)D.set(ce,F[ce]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const Ee of F.keys())D.set(Ee,F.get(Ee));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(D.keys()).find(Ee=>Ee.toLowerCase()=="content-type"),ce=p.FormData&&x instanceof p.FormData,!(Array.prototype.indexOf.call(Vi,N,void 0)>=0)||F||ce||D.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ee,Be]of D)this.g.setRequestHeader(Ee,Be);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(x),this.v=!1}catch(Ee){ua(this,Ee)}};function ua(x,N){x.h=!1,x.g&&(x.j=!0,x.g.abort(),x.j=!1),x.l=N,x.o=5,vs(x),mi(x)}function vs(x){x.A||(x.A=!0,An(x,"complete"),An(x,"error"))}n.abort=function(x){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=x||7,An(this,"complete"),An(this,"abort"),mi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),mi(this,!0)),nn.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?ji(this):this.Xa())},n.Xa=function(){ji(this)};function ji(x){if(x.h&&typeof h<"u"){if(x.v&&Ci(x)==4)setTimeout(x.Ca.bind(x),0);else if(An(x,"readystatechange"),Ci(x)==4){x.h=!1;try{const Ee=x.ca();e:switch(Ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var N=!0;break e;default:N=!1}var D;if(!(D=N)){var F;if(F=Ee===0){let Be=String(x.D).match(Ue)[1]||null;!Be&&p.self&&p.self.location&&(Be=p.self.location.protocol.slice(0,-1)),F=!Ui.test(Be?Be.toLowerCase():"")}D=F}if(D)An(x,"complete"),An(x,"success");else{x.o=6;try{var ce=Ci(x)>2?x.g.statusText:""}catch{ce=""}x.l=ce+" ["+x.ca()+"]",vs(x)}}finally{mi(x)}}}}function mi(x,N){if(x.g){x.m&&(clearTimeout(x.m),x.m=null);const D=x.g;x.g=null,N||An(x,"ready");try{D.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Ci(x){return x.g?x.g.readyState:0}n.ca=function(){try{return Ci(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(x){if(this.g){var N=this.g.responseText;return x&&N.indexOf(x)==0&&(N=N.substring(x.length)),Qn(N)}};function Yn(x){try{if(!x.g)return null;if("response"in x.g)return x.g.response;switch(x.F){case"":case"text":return x.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in x.g)return x.g.mozResponseArrayBuffer}return null}catch{return null}}function pi(x){const N={};x=(x.g&&Ci(x)>=2&&x.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<x.length;F++){if(K(x[F]))continue;var D=Tr(x[F]);const ce=D[0];if(D=D[1],typeof D!="string")continue;D=D.trim();const Ee=N[ce]||[];N[ce]=Ee,Ee.push(D)}xt(N,function(F){return F.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Rn(x,N,D){return D&&D.internalChannelParams&&D.internalChannelParams[x]||N}function Ss(x){this.za=0,this.i=[],this.j=new In,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Rn("failFast",!1,x),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Rn("baseRetryDelayMs",5e3,x),this.Za=Rn("retryDelaySeedMs",1e4,x),this.Ta=Rn("forwardChannelMaxRetries",2,x),this.va=Rn("forwardChannelRequestTimeoutMs",2e4,x),this.ma=x&&x.xmlHttpFactory||void 0,this.Ua=x&&x.Rb||void 0,this.Aa=x&&x.useFetchStreams||!1,this.O=void 0,this.L=x&&x.supportsCrossDomainXhr||!1,this.M="",this.h=new Ie(x&&x.concurrentRequestLimit),this.Ba=new Tn,this.S=x&&x.fastHandshake||!1,this.R=x&&x.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=x&&x.Pb||!1,x&&x.ua&&this.j.ua(),x&&x.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&x&&x.detectBufferingProxy||!1,this.ia=void 0,x&&x.longPollingTimeout&&x.longPollingTimeout>0&&(this.ia=x.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ss.prototype,n.ka=8,n.I=1,n.connect=function(x,N,D,F){on(0),this.W=x,this.H=N||{},D&&F!==void 0&&(this.H.OSID=D,this.H.OAID=F),this.F=this.X,this.J=Pl(this,null,this.W),os(this)};function Qa(x){if(Za(x),x.I==3){var N=x.V++,D=Ct(x.J);if(it(D,"SID",x.M),it(D,"RID",N),it(D,"TYPE","terminate"),Vs(x,D),N=new Fe(x,x.j,N),N.M=2,N.A=Bn(Ct(D)),D=!1,p.navigator&&p.navigator.sendBeacon)try{D=p.navigator.sendBeacon(N.A.toString(),"")}catch{}!D&&p.Image&&(new Image().src=N.A,D=!0),D||(N.g=$a(N.j,null),N.g.ea(N.A)),N.F=Date.now(),vi(N)}Ml(x)}function Cs(x){x.g&&(xe(x),x.g.cancel(),x.g=null)}function Za(x){Cs(x),x.v&&(p.clearTimeout(x.v),x.v=null),Un(x),x.h.cancel(),x.m&&(typeof x.m=="number"&&p.clearTimeout(x.m),x.m=null)}function os(x){if(!sa(x.h)&&!x.m){x.m=!0;var N=x.Ea;De||z(),Oe||(De(),Oe=!0),j.add(N,x),x.D=0}}function Ja(x,N){return Kt(x.h)>=x.h.j-(x.m?1:0)?!1:x.m?(x.i=N.G.concat(x.i),!0):x.I==1||x.I==2||x.D>=(x.Sa?0:x.Ta)?!1:(x.m=ei(E(x.Ea,x,N),$o(x,x.D)),x.D++,!0)}n.Ea=function(x){if(this.m)if(this.m=null,this.I==1){if(!x){this.V=Math.floor(Math.random()*1e5),x=this.V++;const ce=new Fe(this,this.j,x);let Ee=this.o;if(this.U&&(Ee?(Ee=ie(Ee),Ve(Ee,this.U)):Ee=this.U),this.u!==null||this.R||(ce.J=Ee,Ee=null),this.S)e:{for(var N=0,D=0;D<this.i.length;D++){t:{var F=this.i[D];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break t}F=void 0}if(F===void 0)break;if(N+=F,N>4096){N=D;break e}if(N===4096||D===this.i.length-1){N=D+1;break e}}N=1e3}else N=1e3;N=ha(this,ce,N),D=Ct(this.J),it(D,"RID",x),it(D,"CVER",22),this.G&&it(D,"X-HTTP-Session-Id",this.G),Vs(this,D),Ee&&(this.R?N="headers="+br(hn(Ee))+"&"+N:this.u&&ca(D,this.u,Ee)),aa(this.h,ce),this.Ra&&it(D,"TYPE","init"),this.S?(it(D,"$req",N),it(D,"SID","null"),ce.U=!0,vr(ce,D,null)):vr(ce,D,N),this.I=2}}else this.I==3&&(x?Jt(this,x):this.i.length==0||sa(this.h)||Jt(this))};function Jt(x,N){var D;N?D=N.l:D=x.V++;const F=Ct(x.J);it(F,"SID",x.M),it(F,"RID",D),it(F,"AID",x.K),Vs(x,F),x.u&&x.o&&ca(F,x.u,x.o),D=new Fe(x,x.j,D,x.D+1),x.u===null&&(D.J=x.o),N&&(x.i=N.G.concat(x.i)),N=ha(x,D,1e3),D.H=Math.round(x.va*.5)+Math.round(x.va*.5*Math.random()),aa(x.h,D),vr(D,F,N)}function Vs(x,N){x.H&&ct(x.H,function(D,F){it(N,F,D)}),x.l&&ct({},function(D,F){it(N,F,D)})}function ha(x,N,D){D=Math.min(x.i.length,D);const F=x.l?E(x.l.Ka,x.l,x):null;e:{var ce=x.i;let gt=-1;for(;;){const jn=["count="+D];gt==-1?D>0?(gt=ce[0].g,jn.push("ofs="+gt)):gt=0:jn.push("ofs="+gt);let Qt=!0;for(let vn=0;vn<D;vn++){var Ee=ce[vn].g;const xi=ce[vn].map;if(Ee-=gt,Ee<0)gt=Math.max(0,ce[vn].g-100),Qt=!1;else try{Ee="req"+Ee+"_"||"";try{var Be=xi instanceof Map?xi:Object.entries(xi);for(const[hs,Pr]of Be){let yi=Pr;T(Pr)&&(yi=sr(Pr)),jn.push(Ee+hs+"="+encodeURIComponent(yi))}}catch(hs){throw jn.push(Ee+"type="+encodeURIComponent("_badmap")),hs}}catch{F&&F(xi)}}if(Qt){Be=jn.join("&");break e}}Be=void 0}return x=x.i.splice(0,D),N.G=x,Be}function Fi(x){if(!x.g&&!x.v){x.Y=1;var N=x.Da;De||z(),Oe||(De(),Oe=!0),j.add(N,x),x.A=0}}function fa(x){return x.g||x.v||x.A>=3?!1:(x.Y++,x.v=ei(E(x.Da,x),$o(x,x.A)),x.A++,!0)}n.Da=function(){if(this.v=null,yt(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var x=4*this.T;this.j.info("BP detection timer enabled: "+x),this.B=ei(E(this.Wa,this),x)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,on(10),Cs(this),yt(this))};function xe(x){x.B!=null&&(p.clearTimeout(x.B),x.B=null)}function yt(x){x.g=new Fe(x,x.j,"rpc",x.Y),x.u===null&&(x.g.J=x.o),x.g.P=0;var N=Ct(x.na);it(N,"RID","rpc"),it(N,"SID",x.M),it(N,"AID",x.K),it(N,"CI",x.F?"0":"1"),!x.F&&x.ia&&it(N,"TO",x.ia),it(N,"TYPE","xmlhttp"),Vs(x,N),x.u&&x.o&&ca(N,x.u,x.o),x.O&&(x.g.H=x.O);var D=x.g;x=x.ba,D.M=1,D.A=Bn(Ct(N)),D.u=null,D.R=!0,Bi(D,x)}n.Va=function(){this.C!=null&&(this.C=null,Cs(this),fa(this),on(19))};function Un(x){x.C!=null&&(p.clearTimeout(x.C),x.C=null)}function da(x,N){var D=null;if(x.g==N){Un(x),xe(x),x.g=null;var F=2}else if(Cr(x.h,N))D=N.G,Mt(x.h,N),F=1;else return;if(x.I!=0){if(N.o)if(F==1){D=N.u?N.u.length:0,N=Date.now()-N.F;var ce=x.D;F=fi(),An(F,new $r(F,D)),os(x)}else Fi(x);else if(ce=N.m,ce==3||ce==0&&N.X>0||!(F==1&&Ja(x,N)||F==2&&fa(x)))switch(D&&D.length>0&&(N=x.h,N.i=N.i.concat(D)),ce){case 1:ls(x,5);break;case 4:ls(x,10);break;case 3:ls(x,6);break;default:ls(x,2)}}}function $o(x,N){let D=x.Qa+Math.floor(Math.random()*x.Za);return x.isActive()||(D*=2),D*N}function ls(x,N){if(x.j.info("Error code "+N),N==2){var D=E(x.bb,x),F=x.Ua;const ce=!F;F=new St(F||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||ft(F,"https"),Bn(F),ce?ri(F.toString(),D):la(F.toString(),D)}else on(2);x.I=0,x.l&&x.l.pa(N),Ml(x),Za(x)}n.bb=function(x){x?(this.j.info("Successfully pinged google.com"),on(2)):(this.j.info("Failed to ping google.com"),on(1))};function Ml(x){if(x.I=0,x.ja=[],x.l){const N=X(x.h);(N.length!=0||x.i.length!=0)&&(W(x.ja,N),W(x.ja,x.i),x.h.i.length=0,B(x.i),x.i.length=0),x.l.oa()}}function Pl(x,N,D){var F=D instanceof St?Ct(D):new St(D);if(F.g!="")N&&(F.g=N+"."+F.g),Zn(F,F.u);else{var ce=p.location;F=ce.protocol,N=N?N+"."+ce.hostname:ce.hostname,ce=+ce.port;const Ee=new St(null);F&&ft(Ee,F),N&&(Ee.g=N),ce&&Zn(Ee,ce),D&&(Ee.h=D),F=Ee}return D=x.G,N=x.wa,D&&N&&it(F,D,N),it(F,"VER",x.ka),Vs(x,F),F}function $a(x,N,D){if(N&&!x.L)throw Error("Can't create secondary domain capable XhrIo object.");return N=x.Aa&&!x.ma?new nn(new ii({ab:D})):new nn(x.ma),N.Fa(x.L),N}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Vn(){}n=Vn.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function cs(){}cs.prototype.g=function(x,N){return new Pt(x,N)};function Pt(x,N){Ze.call(this),this.g=new Ss(N),this.l=x,this.h=N&&N.messageUrlParams||null,x=N&&N.messageHeaders||null,N&&N.clientProtocolHeaderRequired&&(x?x["X-Client-Protocol"]="webchannel":x={"X-Client-Protocol":"webchannel"}),this.g.o=x,x=N&&N.initMessageHeaders||null,N&&N.messageContentType&&(x?x["X-WebChannel-Content-Type"]=N.messageContentType:x={"X-WebChannel-Content-Type":N.messageContentType}),N&&N.sa&&(x?x["X-WebChannel-Client-Profile"]=N.sa:x={"X-WebChannel-Client-Profile":N.sa}),this.g.U=x,(x=N&&N.Qb)&&!K(x)&&(this.g.u=x),this.A=N&&N.supportsCrossDomainXhr||!1,this.v=N&&N.sendRawJson||!1,(N=N&&N.httpSessionIdParam)&&!K(N)&&(this.g.G=N,x=this.h,x!==null&&N in x&&(x=this.h,N in x&&delete x[N])),this.j=new Lt(this)}I(Pt,Ze),Pt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Pt.prototype.close=function(){Qa(this.g)},Pt.prototype.o=function(x){var N=this.g;if(typeof x=="string"){var D={};D.__data__=x,x=D}else this.v&&(D={},D.__data__=sr(x),x=D);N.i.push(new Nn(N.Ya++,x)),N.I==3&&os(N)},Pt.prototype.N=function(){this.g.l=null,delete this.j,Qa(this.g),delete this.g,Pt.Z.N.call(this)};function ga(x){Me.call(this),x.__headers__&&(this.headers=x.__headers__,this.statusCode=x.__status__,delete x.__headers__,delete x.__status__);var N=x.__sm__;if(N){e:{for(const D in N){x=D;break e}x=void 0}(this.i=x)&&(x=this.i,N=N!==null&&x in N?N[x]:void 0),this.data=N}else this.data=x}I(ga,Me);function us(){Xt.call(this),this.status=1}I(us,Xt);function Lt(x){this.g=x}I(Lt,Vn),Lt.prototype.ra=function(){An(this.g,"a")},Lt.prototype.qa=function(x){An(this.g,new ga(x))},Lt.prototype.pa=function(x){An(this.g,new us)},Lt.prototype.oa=function(){An(this.g,"b")},cs.prototype.createWebChannel=cs.prototype.g,Pt.prototype.send=Pt.prototype.o,Pt.prototype.open=Pt.prototype.m,Pt.prototype.close=Pt.prototype.close,BA=function(){return new cs},kA=function(){return fi()},LA=at,Lg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ki.NO_ERROR=0,ki.TIMEOUT=8,ki.HTTP_ERROR=6,Yf=ki,ti.COMPLETE="complete",PA=ti,ra.EventType=Yt,Yt.OPEN="a",Yt.CLOSE="b",Yt.ERROR="c",Yt.MESSAGE="d",Ze.prototype.listen=Ze.prototype.J,Du=ra,nn.prototype.listenOnce=nn.prototype.K,nn.prototype.getLastError=nn.prototype.Ha,nn.prototype.getLastErrorCode=nn.prototype.ya,nn.prototype.getStatus=nn.prototype.ca,nn.prototype.getResponseJson=nn.prototype.La,nn.prototype.getResponseText=nn.prototype.la,nn.prototype.send=nn.prototype.ea,nn.prototype.setWithCredentials=nn.prototype.Fa,MA=nn}).apply(typeof Of<"u"?Of:typeof self<"u"?self:typeof window<"u"?window:{});const sE="@firebase/firestore",aE="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}li.UNAUTHENTICATED=new li(null),li.GOOGLE_CREDENTIALS=new li("google-credentials-uid"),li.FIRST_PARTY=new li("first-party-uid"),li.MOCK_USER=new li("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uc="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vl=new _m("@firebase/firestore");function cc(){return vl.logLevel}function qe(n,...e){if(vl.logLevel<=zt.DEBUG){const t=e.map(bm);vl.debug(`Firestore (${Uc}): ${n}`,...t)}}function Fa(n,...e){if(vl.logLevel<=zt.ERROR){const t=e.map(bm);vl.error(`Firestore (${Uc}): ${n}`,...t)}}function vc(n,...e){if(vl.logLevel<=zt.WARN){const t=e.map(bm);vl.warn(`Firestore (${Uc}): ${n}`,...t)}}function bm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,UA(n,s,t)}function UA(n,e,t){let s=`FIRESTORE (${Uc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Fa(s),new Error(s)}function en(n,e,t,s){let c="Unexpected state";typeof t=="string"?c=t:s=t,n||UA(e,c,s)}function mt(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ze extends Ya{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class q4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(li.UNAUTHENTICATED)))}shutdown(){}}class Y4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class X4{constructor(e){this.t=e,this.currentUser=li.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){en(this.o===void 0,42304);let s=this.i;const c=w=>this.i!==s?(s=this.i,t(w)):Promise.resolve();let h=new Ys;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Ys,e.enqueueRetryable((()=>c(this.currentUser)))};const p=()=>{const w=h;e.enqueueRetryable((async()=>{await w.promise,await c(this.currentUser)}))},T=w=>{qe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.o&&(this.auth.addAuthTokenListener(this.o),p())};this.t.onInit((w=>T(w))),setTimeout((()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?T(w):(qe("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Ys)}}),0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(qe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(en(typeof s.accessToken=="string",31837,{l:s}),new VA(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return en(e===null||typeof e=="string",2055,{h:e}),new li(e)}}class W4{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=li.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class K4{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new W4(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(li.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class oE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Q4{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Zi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){en(this.o===void 0,3512);const s=h=>{h.error!=null&&qe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const p=h.token!==this.m;return this.m=h.token,qe("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?t(h.token):Promise.resolve()};this.o=h=>{e.enqueueRetryable((()=>s(h)))};const c=h=>{qe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((h=>c(h))),setTimeout((()=>{if(!this.appCheck){const h=this.V.getImmediate({optional:!0});h?c(h):qe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new oE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(en(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new oE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z4(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const c=Z4(40);for(let h=0;h<c.length;++h)s.length<20&&c[h]<t&&(s+=e.charAt(c[h]%62))}return s}}function Ht(n,e){return n<e?-1:n>e?1:0}function kg(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const c=n.charAt(s),h=e.charAt(s);if(c!==h)return fg(c)===fg(h)?Ht(c,h):fg(c)?1:-1}return Ht(n.length,e.length)}const J4=55296,$4=57343;function fg(n){const e=n.charCodeAt(0);return e>=J4&&e<=$4}function Sc(n,e,t){return n.length===e.length&&n.every(((s,c)=>t(s,e[c])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE="__name__";class qs{constructor(e,t,s){t===void 0?t=0:t>e.length&&st(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&st(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return qs.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof qs?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let c=0;c<s;c++){const h=qs.compareSegments(e.get(c),t.get(c));if(h!==0)return h}return Ht(e.length,t.length)}static compareSegments(e,t){const s=qs.isNumericId(e),c=qs.isNumericId(t);return s&&!c?-1:!s&&c?1:s&&c?qs.extractNumericId(e).compare(qs.extractNumericId(t)):kg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ko.fromString(e.substring(4,e.length-2))}}class _n extends qs{construct(e,t,s){return new _n(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ze(ve.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((c=>c.length>0)))}return new _n(t)}static emptyPath(){return new _n([])}}const eR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xr extends qs{construct(e,t,s){return new Xr(e,t,s)}static isValidIdentifier(e){return eR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===lE}static keyField(){return new Xr([lE])}static fromServerFormat(e){const t=[];let s="",c=0;const h=()=>{if(s.length===0)throw new ze(ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let p=!1;for(;c<e.length;){const T=e[c];if(T==="\\"){if(c+1===e.length)throw new ze(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[c+1];if(w!=="\\"&&w!=="."&&w!=="`")throw new ze(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=w,c+=2}else T==="`"?(p=!p,c++):T!=="."||p?(s+=T,c++):(h(),c++)}if(h(),p)throw new ze(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xr(t)}static emptyPath(){return new Xr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.path=e}static fromPath(e){return new tt(_n.fromString(e))}static fromName(e){return new tt(_n.fromString(e).popFirst(5))}static empty(){return new tt(_n.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_n.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return _n.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new tt(new _n(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jA(n,e,t){if(!t)throw new ze(ve.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function tR(n,e,t,s){if(e===!0&&s===!0)throw new ze(ve.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function cE(n){if(!tt.isDocumentKey(n))throw new ze(ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function uE(n){if(tt.isDocumentKey(n))throw new ze(ve.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function FA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function jd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":st(12329,{type:typeof n})}function bi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ze(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=jd(n);throw new ze(ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(n,e){const t={typeString:n};return e&&(t.value=e),t}function lh(n,e){if(!FA(n))throw new ze(ve.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const c=e[s].typeString,h="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const p=n[s];if(c&&typeof p!==c){t=`JSON field '${s}' must be a ${c}.`;break}if(h!==void 0&&p!==h.value){t=`Expected '${s}' field to equal '${h.value}'`;break}}if(t)throw new ze(ve.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE=-62135596800,fE=1e6;class Pn{static now(){return Pn.fromMillis(Date.now())}static fromDate(e){return Pn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*fE);return new Pn(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ze(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ze(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<hE)throw new ze(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ze(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/fE}_compareTo(e){return this.seconds===e.seconds?Ht(this.nanoseconds,e.nanoseconds):Ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Pn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(lh(e,Pn._jsonSchema))return new Pn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-hE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Pn._jsonSchemaVersion="firestore/timestamp/1.0",Pn._jsonSchema={type:Ar("string",Pn._jsonSchemaVersion),seconds:Ar("number"),nanoseconds:Ar("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{static fromTimestamp(e){return new ut(e)}static min(){return new ut(new Pn(0,0))}static max(){return new ut(new Pn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zu=-1;function nR(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,c=ut.fromTimestamp(s===1e9?new Pn(t+1,0):new Pn(t,s));return new jo(c,tt.empty(),e)}function rR(n){return new jo(n.readTime,n.key,Zu)}class jo{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new jo(ut.min(),tt.empty(),Zu)}static max(){return new jo(ut.max(),tt.empty(),Zu)}}function iR(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=tt.comparator(n.documentKey,e.documentKey),t!==0?t:Ht(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class aR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vc(n){if(n.code!==ve.FAILED_PRECONDITION||n.message!==sR)throw n;qe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&st(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ne(((s,c)=>{this.nextCallback=h=>{this.wrapSuccess(e,h).next(s,c)},this.catchCallback=h=>{this.wrapFailure(t,h).next(s,c)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Ne?t:Ne.resolve(t)}catch(t){return Ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Ne.reject(t)}static resolve(e){return new Ne(((t,s)=>{t(e)}))}static reject(e){return new Ne(((t,s)=>{s(e)}))}static waitFor(e){return new Ne(((t,s)=>{let c=0,h=0,p=!1;e.forEach((T=>{++c,T.next((()=>{++h,p&&h===c&&t()}),(w=>s(w)))})),p=!0,h===c&&t()}))}static or(e){let t=Ne.resolve(!1);for(const s of e)t=t.next((c=>c?Ne.resolve(c):s()));return t}static forEach(e,t){const s=[];return e.forEach(((c,h)=>{s.push(t.call(this,c,h))})),this.waitFor(s)}static mapArray(e,t){return new Ne(((s,c)=>{const h=e.length,p=new Array(h);let T=0;for(let w=0;w<h;w++){const E=w;t(e[E]).next((C=>{p[E]=C,++T,T===h&&s(p)}),(C=>c(C)))}}))}static doWhile(e,t){return new Ne(((s,c)=>{const h=()=>{e()===!0?t().next((()=>{h()}),c):s()};h()}))}}function oR(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function jc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Fd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm=-1;function ch(n){return n==null}function cd(n){return n===0&&1/n==-1/0}function lR(n){return typeof n=="number"&&Number.isInteger(n)&&!cd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA="";function cR(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=dE(e)),e=uR(n.get(t),e);return dE(e)}function uR(n,e){let t=e;const s=n.length;for(let c=0;c<s;c++){const h=n.charAt(c);switch(h){case"\0":t+="";break;case zA:t+="";break;default:t+=h}}return t}function dE(n){return n+zA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Yo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function HA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,t){this.comparator=e,this.root=t||Yr.EMPTY}insert(e,t){return new Kn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Yr.BLACK,null,null))}remove(e){return new Kn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const c=this.comparator(e,s.key);if(c===0)return t+s.left.size;c<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Df(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Df(this.root,e,this.comparator,!1)}getReverseIterator(){return new Df(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Df(this.root,e,this.comparator,!0)}}class Df{constructor(e,t,s,c){this.isReverse=c,this.nodeStack=[];let h=1;for(;!e.isEmpty();)if(h=t?s(e.key,t):1,t&&c&&(h*=-1),h<0)e=this.isReverse?e.left:e.right;else{if(h===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yr{constructor(e,t,s,c,h){this.key=e,this.value=t,this.color=s??Yr.RED,this.left=c??Yr.EMPTY,this.right=h??Yr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,c,h){return new Yr(e??this.key,t??this.value,s??this.color,c??this.left,h??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let c=this;const h=s(e,c.key);return c=h<0?c.copy(null,null,null,c.left.insert(e,t,s),null):h===0?c.copy(null,t,null,null,null):c.copy(null,null,null,null,c.right.insert(e,t,s)),c.fixUp()}removeMin(){if(this.left.isEmpty())return Yr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,c=this;if(t(e,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(e,t),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),t(e,c.key)===0){if(c.right.isEmpty())return Yr.EMPTY;s=c.right.min(),c=c.copy(s.key,s.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(e,t))}return c.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw st(43730,{key:this.key,value:this.value});if(this.right.isRed())throw st(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw st(27949);return e+(this.isRed()?0:1)}}Yr.EMPTY=null,Yr.RED=!0,Yr.BLACK=!1;Yr.EMPTY=new class{constructor(){this.size=0}get key(){throw st(57766)}get value(){throw st(16141)}get color(){throw st(16727)}get left(){throw st(29726)}get right(){throw st(36894)}copy(e,t,s,c,h){return this}insert(e,t,s){return new Yr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e){this.comparator=e,this.data=new Kn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const c=s.getNext();if(this.comparator(c.key,e[1])>=0)return;t(c.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new mE(this.data.getIterator())}getIteratorFrom(e){return new mE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Or)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const c=t.getNext().key,h=s.getNext().key;if(this.comparator(c,h)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Or(this.comparator);return t.data=e,t}}class mE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this.fields=e,e.sort(Xr.comparator)}static empty(){return new $i([])}unionWith(e){let t=new Or(Xr.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new $i(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Sc(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(c){try{return atob(c)}catch(h){throw typeof DOMException<"u"&&h instanceof DOMException?new GA("Invalid base64 string: "+h):h}})(e);return new Wr(t)}static fromUint8Array(e){const t=(function(c){let h="";for(let p=0;p<c.length;++p)h+=String.fromCharCode(c[p]);return h})(e);return new Wr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let c=0;c<t.length;c++)s[c]=t.charCodeAt(c);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wr.EMPTY_BYTE_STRING=new Wr("");const hR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fo(n){if(en(!!n,39018),typeof n=="string"){let e=0;const t=hR.exec(n);if(en(!!t,46558,{timestamp:n}),t[1]){let c=t[1];c=(c+"000000000").substr(0,9),e=Number(c)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ur(n.seconds),nanos:ur(n.nanos)}}function ur(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function zo(n){return typeof n=="string"?Wr.fromBase64String(n):Wr.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA="server_timestamp",YA="__type__",XA="__previous_value__",WA="__local_write_time__";function Sm(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[YA])==null?void 0:s.stringValue)===qA}function zd(n){const e=n.mapValue.fields[XA];return Sm(e)?zd(e):e}function Ju(n){const e=Fo(n.mapValue.fields[WA].timestampValue);return new Pn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e,t,s,c,h,p,T,w,E,C){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=c,this.ssl=h,this.forceLongPolling=p,this.autoDetectLongPolling=T,this.longPollingOptions=w,this.useFetchStreams=E,this.isUsingEmulator=C}}const ud="(default)";class $u{constructor(e,t){this.projectId=e,this.database=t||ud}static empty(){return new $u("","")}get isDefaultDatabase(){return this.database===ud}isEqual(e){return e instanceof $u&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA="__type__",dR="__max__",Mf={mapValue:{}},QA="__vector__",hd="value";function Ho(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Sm(n)?4:mR(n)?9007199254740991:gR(n)?10:11:st(28295,{value:n})}function ea(n,e){if(n===e)return!0;const t=Ho(n);if(t!==Ho(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ju(n).isEqual(Ju(e));case 3:return(function(c,h){if(typeof c.timestampValue=="string"&&typeof h.timestampValue=="string"&&c.timestampValue.length===h.timestampValue.length)return c.timestampValue===h.timestampValue;const p=Fo(c.timestampValue),T=Fo(h.timestampValue);return p.seconds===T.seconds&&p.nanos===T.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(c,h){return zo(c.bytesValue).isEqual(zo(h.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(c,h){return ur(c.geoPointValue.latitude)===ur(h.geoPointValue.latitude)&&ur(c.geoPointValue.longitude)===ur(h.geoPointValue.longitude)})(n,e);case 2:return(function(c,h){if("integerValue"in c&&"integerValue"in h)return ur(c.integerValue)===ur(h.integerValue);if("doubleValue"in c&&"doubleValue"in h){const p=ur(c.doubleValue),T=ur(h.doubleValue);return p===T?cd(p)===cd(T):isNaN(p)&&isNaN(T)}return!1})(n,e);case 9:return Sc(n.arrayValue.values||[],e.arrayValue.values||[],ea);case 10:case 11:return(function(c,h){const p=c.mapValue.fields||{},T=h.mapValue.fields||{};if(gE(p)!==gE(T))return!1;for(const w in p)if(p.hasOwnProperty(w)&&(T[w]===void 0||!ea(p[w],T[w])))return!1;return!0})(n,e);default:return st(52216,{left:n})}}function eh(n,e){return(n.values||[]).find((t=>ea(t,e)))!==void 0}function Cc(n,e){if(n===e)return 0;const t=Ho(n),s=Ho(e);if(t!==s)return Ht(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ht(n.booleanValue,e.booleanValue);case 2:return(function(h,p){const T=ur(h.integerValue||h.doubleValue),w=ur(p.integerValue||p.doubleValue);return T<w?-1:T>w?1:T===w?0:isNaN(T)?isNaN(w)?0:-1:1})(n,e);case 3:return pE(n.timestampValue,e.timestampValue);case 4:return pE(Ju(n),Ju(e));case 5:return kg(n.stringValue,e.stringValue);case 6:return(function(h,p){const T=zo(h),w=zo(p);return T.compareTo(w)})(n.bytesValue,e.bytesValue);case 7:return(function(h,p){const T=h.split("/"),w=p.split("/");for(let E=0;E<T.length&&E<w.length;E++){const C=Ht(T[E],w[E]);if(C!==0)return C}return Ht(T.length,w.length)})(n.referenceValue,e.referenceValue);case 8:return(function(h,p){const T=Ht(ur(h.latitude),ur(p.latitude));return T!==0?T:Ht(ur(h.longitude),ur(p.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return xE(n.arrayValue,e.arrayValue);case 10:return(function(h,p){var M,B,W,$;const T=h.fields||{},w=p.fields||{},E=(M=T[hd])==null?void 0:M.arrayValue,C=(B=w[hd])==null?void 0:B.arrayValue,I=Ht(((W=E==null?void 0:E.values)==null?void 0:W.length)||0,(($=C==null?void 0:C.values)==null?void 0:$.length)||0);return I!==0?I:xE(E,C)})(n.mapValue,e.mapValue);case 11:return(function(h,p){if(h===Mf.mapValue&&p===Mf.mapValue)return 0;if(h===Mf.mapValue)return 1;if(p===Mf.mapValue)return-1;const T=h.fields||{},w=Object.keys(T),E=p.fields||{},C=Object.keys(E);w.sort(),C.sort();for(let I=0;I<w.length&&I<C.length;++I){const M=kg(w[I],C[I]);if(M!==0)return M;const B=Cc(T[w[I]],E[C[I]]);if(B!==0)return B}return Ht(w.length,C.length)})(n.mapValue,e.mapValue);default:throw st(23264,{he:t})}}function pE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ht(n,e);const t=Fo(n),s=Fo(e),c=Ht(t.seconds,s.seconds);return c!==0?c:Ht(t.nanos,s.nanos)}function xE(n,e){const t=n.values||[],s=e.values||[];for(let c=0;c<t.length&&c<s.length;++c){const h=Cc(t[c],s[c]);if(h)return h}return Ht(t.length,s.length)}function Ic(n){return Bg(n)}function Bg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=Fo(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return zo(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return tt.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",c=!0;for(const h of t.values||[])c?c=!1:s+=",",s+=Bg(h);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let c="{",h=!0;for(const p of s)h?h=!1:c+=",",c+=`${p}:${Bg(t.fields[p])}`;return c+"}"})(n.mapValue):st(61005,{value:n})}function Xf(n){switch(Ho(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=zd(n);return e?16+Xf(e):16;case 5:return 2*n.stringValue.length;case 6:return zo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((c,h)=>c+Xf(h)),0)})(n.arrayValue);case 10:case 11:return(function(s){let c=0;return Yo(s.fields,((h,p)=>{c+=h.length+Xf(p)})),c})(n.mapValue);default:throw st(13486,{value:n})}}function yE(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ug(n){return!!n&&"integerValue"in n}function Cm(n){return!!n&&"arrayValue"in n}function EE(n){return!!n&&"nullValue"in n}function _E(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Wf(n){return!!n&&"mapValue"in n}function gR(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[KA])==null?void 0:s.stringValue)===QA}function Vu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Yo(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Vu(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Vu(n.arrayValue.values[t]);return e}return{...n}}function mR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===dR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e){this.value=e}static empty(){return new Ai({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Wf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vu(t)}setAll(e){let t=Xr.emptyPath(),s={},c=[];e.forEach(((p,T)=>{if(!t.isImmediateParentOf(T)){const w=this.getFieldsMap(t);this.applyChanges(w,s,c),s={},c=[],t=T.popLast()}p?s[T.lastSegment()]=Vu(p):c.push(T.lastSegment())}));const h=this.getFieldsMap(t);this.applyChanges(h,s,c)}delete(e){const t=this.field(e.popLast());Wf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ea(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let c=t.mapValue.fields[e.get(s)];Wf(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=c),t=c}return t.mapValue.fields}applyChanges(e,t,s){Yo(t,((c,h)=>e[c]=h));for(const c of s)delete e[c]}clone(){return new Ai(Vu(this.value))}}function ZA(n){const e=[];return Yo(n.fields,((t,s)=>{const c=new Xr([t]);if(Wf(s)){const h=ZA(s.mapValue).fields;if(h.length===0)e.push(c);else for(const p of h)e.push(c.child(p))}else e.push(c)})),new $i(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,t,s,c,h,p,T){this.key=e,this.documentType=t,this.version=s,this.readTime=c,this.createTime=h,this.data=p,this.documentState=T}static newInvalidDocument(e){return new Br(e,0,ut.min(),ut.min(),ut.min(),Ai.empty(),0)}static newFoundDocument(e,t,s,c){return new Br(e,1,t,ut.min(),s,c,0)}static newNoDocument(e,t){return new Br(e,2,t,ut.min(),ut.min(),Ai.empty(),0)}static newUnknownDocument(e,t){return new Br(e,3,t,ut.min(),ut.min(),Ai.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ut.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ai.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ai.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ut.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Br&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Br(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,t){this.position=e,this.inclusive=t}}function wE(n,e,t){let s=0;for(let c=0;c<n.position.length;c++){const h=e[c],p=n.position[c];if(h.field.isKeyField()?s=tt.comparator(tt.fromName(p.referenceValue),t.key):s=Cc(p,t.data.field(h.field)),h.dir==="desc"&&(s*=-1),s!==0)break}return s}function AE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ea(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e,t="asc"){this.field=e,this.dir=t}}function pR(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{}class wr extends JA{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new yR(e,t,s):t==="array-contains"?new wR(e,s):t==="in"?new AR(e,s):t==="not-in"?new bR(e,s):t==="array-contains-any"?new TR(e,s):new wr(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new ER(e,s):new _R(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Cc(t,this.value)):t!==null&&Ho(this.value)===Ho(t)&&this.matchesComparison(Cc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return st(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ds extends JA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ds(e,t)}matches(e){return $A(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function $A(n){return n.op==="and"}function eb(n){return xR(n)&&$A(n)}function xR(n){for(const e of n.filters)if(e instanceof Ds)return!1;return!0}function Vg(n){if(n instanceof wr)return n.field.canonicalString()+n.op.toString()+Ic(n.value);if(eb(n))return n.filters.map((e=>Vg(e))).join(",");{const e=n.filters.map((t=>Vg(t))).join(",");return`${n.op}(${e})`}}function tb(n,e){return n instanceof wr?(function(s,c){return c instanceof wr&&s.op===c.op&&s.field.isEqual(c.field)&&ea(s.value,c.value)})(n,e):n instanceof Ds?(function(s,c){return c instanceof Ds&&s.op===c.op&&s.filters.length===c.filters.length?s.filters.reduce(((h,p,T)=>h&&tb(p,c.filters[T])),!0):!1})(n,e):void st(19439)}function nb(n){return n instanceof wr?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ic(t.value)}`})(n):n instanceof Ds?(function(t){return t.op.toString()+" {"+t.getFilters().map(nb).join(" ,")+"}"})(n):"Filter"}class yR extends wr{constructor(e,t,s){super(e,t,s),this.key=tt.fromName(s.referenceValue)}matches(e){const t=tt.comparator(e.key,this.key);return this.matchesComparison(t)}}class ER extends wr{constructor(e,t){super(e,"in",t),this.keys=rb("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class _R extends wr{constructor(e,t){super(e,"not-in",t),this.keys=rb("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function rb(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>tt.fromName(s.referenceValue)))}class wR extends wr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Cm(t)&&eh(t.arrayValue,this.value)}}class AR extends wr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&eh(this.value.arrayValue,t)}}class bR extends wr{constructor(e,t){super(e,"not-in",t)}matches(e){if(eh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!eh(this.value.arrayValue,t)}}class TR extends wr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Cm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>eh(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e,t=null,s=[],c=[],h=null,p=null,T=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=c,this.limit=h,this.startAt=p,this.endAt=T,this.Te=null}}function bE(n,e=null,t=[],s=[],c=null,h=null,p=null){return new vR(n,e,t,s,c,h,p)}function Im(n){const e=mt(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Vg(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(h){return h.field.canonicalString()+h.dir})(s))).join(","),ch(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Ic(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Ic(s))).join(",")),e.Te=t}return e.Te}function Nm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!pR(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!tb(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!AE(n.startAt,e.startAt)&&AE(n.endAt,e.endAt)}function jg(n){return tt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,t=null,s=[],c=[],h=null,p="F",T=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=c,this.limit=h,this.limitType=p,this.startAt=T,this.endAt=w,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function SR(n,e,t,s,c,h,p,T){return new uh(n,e,t,s,c,h,p,T)}function Hd(n){return new uh(n)}function TE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function ib(n){return n.collectionGroup!==null}function ju(n){const e=mt(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const h of e.explicitOrderBy)e.Ie.push(h),t.add(h.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(p){let T=new Or(Xr.comparator);return p.filters.forEach((w=>{w.getFlattenedFilters().forEach((E=>{E.isInequality()&&(T=T.add(E.field))}))})),T})(e).forEach((h=>{t.has(h.canonicalString())||h.isKeyField()||e.Ie.push(new dd(h,s))})),t.has(Xr.keyField().canonicalString())||e.Ie.push(new dd(Xr.keyField(),s))}return e.Ie}function Xs(n){const e=mt(n);return e.Ee||(e.Ee=CR(e,ju(n))),e.Ee}function CR(n,e){if(n.limitType==="F")return bE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((c=>{const h=c.dir==="desc"?"asc":"desc";return new dd(c.field,h)}));const t=n.endAt?new fd(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new fd(n.startAt.position,n.startAt.inclusive):null;return bE(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Fg(n,e){const t=n.filters.concat([e]);return new uh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function gd(n,e,t){return new uh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Gd(n,e){return Nm(Xs(n),Xs(e))&&n.limitType===e.limitType}function sb(n){return`${Im(Xs(n))}|lt:${n.limitType}`}function uc(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((c=>nb(c))).join(", ")}]`),ch(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((c=>(function(p){return`${p.field.canonicalString()} (${p.dir})`})(c))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((c=>Ic(c))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((c=>Ic(c))).join(",")),`Target(${s})`})(Xs(n))}; limitType=${n.limitType})`}function qd(n,e){return e.isFoundDocument()&&(function(s,c){const h=c.key.path;return s.collectionGroup!==null?c.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(h):tt.isDocumentKey(s.path)?s.path.isEqual(h):s.path.isImmediateParentOf(h)})(n,e)&&(function(s,c){for(const h of ju(s))if(!h.field.isKeyField()&&c.data.field(h.field)===null)return!1;return!0})(n,e)&&(function(s,c){for(const h of s.filters)if(!h.matches(c))return!1;return!0})(n,e)&&(function(s,c){return!(s.startAt&&!(function(p,T,w){const E=wE(p,T,w);return p.inclusive?E<=0:E<0})(s.startAt,ju(s),c)||s.endAt&&!(function(p,T,w){const E=wE(p,T,w);return p.inclusive?E>=0:E>0})(s.endAt,ju(s),c))})(n,e)}function IR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function ab(n){return(e,t)=>{let s=!1;for(const c of ju(n)){const h=NR(c,e,t);if(h!==0)return h;s=s||c.field.isKeyField()}return 0}}function NR(n,e,t){const s=n.field.isKeyField()?tt.comparator(e.key,t.key):(function(h,p,T){const w=p.data.field(h),E=T.data.field(h);return w!==null&&E!==null?Cc(w,E):st(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return st(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[c,h]of s)if(this.equalsFn(c,e))return h}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),c=this.inner[s];if(c===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let h=0;h<c.length;h++)if(this.equalsFn(c[h][0],e))return void(c[h]=[e,t]);c.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let c=0;c<s.length;c++)if(this.equalsFn(s[c][0],e))return s.length===1?delete this.inner[t]:s.splice(c,1),this.innerSize--,!0;return!1}forEach(e){Yo(this.inner,((t,s)=>{for(const[c,h]of s)e(c,h)}))}isEmpty(){return HA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR=new Kn(tt.comparator);function za(){return RR}const ob=new Kn(tt.comparator);function Mu(...n){let e=ob;for(const t of n)e=e.insert(t.key,t);return e}function lb(n){let e=ob;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function wl(){return Fu()}function cb(){return Fu()}function Fu(){return new Rl((n=>n.toString()),((n,e)=>n.isEqual(e)))}const OR=new Kn(tt.comparator),DR=new Or(tt.comparator);function Gt(...n){let e=DR;for(const t of n)e=e.add(t);return e}const MR=new Or(Ht);function PR(){return MR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cd(e)?"-0":e}}function ub(n){return{integerValue:""+n}}function LR(n,e){return lR(e)?ub(e):Rm(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(){this._=void 0}}function kR(n,e,t){return n instanceof md?(function(c,h){const p={fields:{[YA]:{stringValue:qA},[WA]:{timestampValue:{seconds:c.seconds,nanos:c.nanoseconds}}}};return h&&Sm(h)&&(h=zd(h)),h&&(p.fields[XA]=h),{mapValue:p}})(t,e):n instanceof th?fb(n,e):n instanceof nh?db(n,e):(function(c,h){const p=hb(c,h),T=vE(p)+vE(c.Ae);return Ug(p)&&Ug(c.Ae)?ub(T):Rm(c.serializer,T)})(n,e)}function BR(n,e,t){return n instanceof th?fb(n,e):n instanceof nh?db(n,e):t}function hb(n,e){return n instanceof pd?(function(s){return Ug(s)||(function(h){return!!h&&"doubleValue"in h})(s)})(e)?e:{integerValue:0}:null}class md extends Yd{}class th extends Yd{constructor(e){super(),this.elements=e}}function fb(n,e){const t=gb(e);for(const s of n.elements)t.some((c=>ea(c,s)))||t.push(s);return{arrayValue:{values:t}}}class nh extends Yd{constructor(e){super(),this.elements=e}}function db(n,e){let t=gb(e);for(const s of n.elements)t=t.filter((c=>!ea(c,s)));return{arrayValue:{values:t}}}class pd extends Yd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function vE(n){return ur(n.integerValue||n.doubleValue)}function gb(n){return Cm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function UR(n,e){return n.field.isEqual(e.field)&&(function(s,c){return s instanceof th&&c instanceof th||s instanceof nh&&c instanceof nh?Sc(s.elements,c.elements,ea):s instanceof pd&&c instanceof pd?ea(s.Ae,c.Ae):s instanceof md&&c instanceof md})(n.transform,e.transform)}class VR{constructor(e,t){this.version=e,this.transformResults=t}}class Rr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Rr}static exists(e){return new Rr(void 0,e)}static updateTime(e){return new Rr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Kf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Xd{}function mb(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new fh(n.key,Rr.none()):new hh(n.key,n.data,Rr.none());{const t=n.data,s=Ai.empty();let c=new Or(Xr.comparator);for(let h of e.fields)if(!c.has(h)){let p=t.field(h);p===null&&h.length>1&&(h=h.popLast(),p=t.field(h)),p===null?s.delete(h):s.set(h,p),c=c.add(h)}return new Xo(n.key,s,new $i(c.toArray()),Rr.none())}}function jR(n,e,t){n instanceof hh?(function(c,h,p){const T=c.value.clone(),w=CE(c.fieldTransforms,h,p.transformResults);T.setAll(w),h.convertToFoundDocument(p.version,T).setHasCommittedMutations()})(n,e,t):n instanceof Xo?(function(c,h,p){if(!Kf(c.precondition,h))return void h.convertToUnknownDocument(p.version);const T=CE(c.fieldTransforms,h,p.transformResults),w=h.data;w.setAll(pb(c)),w.setAll(T),h.convertToFoundDocument(p.version,w).setHasCommittedMutations()})(n,e,t):(function(c,h,p){h.convertToNoDocument(p.version).setHasCommittedMutations()})(0,e,t)}function zu(n,e,t,s){return n instanceof hh?(function(h,p,T,w){if(!Kf(h.precondition,p))return T;const E=h.value.clone(),C=IE(h.fieldTransforms,w,p);return E.setAll(C),p.convertToFoundDocument(p.version,E).setHasLocalMutations(),null})(n,e,t,s):n instanceof Xo?(function(h,p,T,w){if(!Kf(h.precondition,p))return T;const E=IE(h.fieldTransforms,w,p),C=p.data;return C.setAll(pb(h)),C.setAll(E),p.convertToFoundDocument(p.version,C).setHasLocalMutations(),T===null?null:T.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map((I=>I.field)))})(n,e,t,s):(function(h,p,T){return Kf(h.precondition,p)?(p.convertToNoDocument(p.version).setHasLocalMutations(),null):T})(n,e,t)}function FR(n,e){let t=null;for(const s of n.fieldTransforms){const c=e.data.field(s.field),h=hb(s.transform,c||null);h!=null&&(t===null&&(t=Ai.empty()),t.set(s.field,h))}return t||null}function SE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,c){return s===void 0&&c===void 0||!(!s||!c)&&Sc(s,c,((h,p)=>UR(h,p)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class hh extends Xd{constructor(e,t,s,c=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=c,this.type=0}getFieldMask(){return null}}class Xo extends Xd{constructor(e,t,s,c,h=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=c,this.fieldTransforms=h,this.type=1}getFieldMask(){return this.fieldMask}}function pb(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function CE(n,e,t){const s=new Map;en(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let c=0;c<t.length;c++){const h=n[c],p=h.transform,T=e.data.field(h.field);s.set(h.field,BR(p,T,t[c]))}return s}function IE(n,e,t){const s=new Map;for(const c of n){const h=c.transform,p=t.data.field(c.field);s.set(c.field,kR(h,p,e))}return s}class fh extends Xd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xb extends Xd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,t,s,c){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=c}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let c=0;c<this.mutations.length;c++){const h=this.mutations[c];h.key.isEqual(e.key)&&jR(h,e,s[c])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=zu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=zu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=cb();return this.mutations.forEach((c=>{const h=e.get(c.key),p=h.overlayedDocument;let T=this.applyToLocalView(p,h.mutatedFields);T=t.has(c.key)?null:T;const w=mb(p,T);w!==null&&s.set(c.key,w),p.isValidDocument()||p.convertToNoDocument(ut.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Gt())}isEqual(e){return this.batchId===e.batchId&&Sc(this.mutations,e.mutations,((t,s)=>SE(t,s)))&&Sc(this.baseMutations,e.baseMutations,((t,s)=>SE(t,s)))}}class Om{constructor(e,t,s,c){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=c}static from(e,t,s){en(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let c=(function(){return OR})();const h=e.mutations;for(let p=0;p<h.length;p++)c=c.insert(h[p].key,s[p].version);return new Om(e,t,s,c)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _r,$t;function yb(n){switch(n){case ve.OK:return st(64938);case ve.CANCELLED:case ve.UNKNOWN:case ve.DEADLINE_EXCEEDED:case ve.RESOURCE_EXHAUSTED:case ve.INTERNAL:case ve.UNAVAILABLE:case ve.UNAUTHENTICATED:return!1;case ve.INVALID_ARGUMENT:case ve.NOT_FOUND:case ve.ALREADY_EXISTS:case ve.PERMISSION_DENIED:case ve.FAILED_PRECONDITION:case ve.ABORTED:case ve.OUT_OF_RANGE:case ve.UNIMPLEMENTED:case ve.DATA_LOSS:return!0;default:return st(15467,{code:n})}}function Eb(n){if(n===void 0)return Fa("GRPC error has no .code"),ve.UNKNOWN;switch(n){case _r.OK:return ve.OK;case _r.CANCELLED:return ve.CANCELLED;case _r.UNKNOWN:return ve.UNKNOWN;case _r.DEADLINE_EXCEEDED:return ve.DEADLINE_EXCEEDED;case _r.RESOURCE_EXHAUSTED:return ve.RESOURCE_EXHAUSTED;case _r.INTERNAL:return ve.INTERNAL;case _r.UNAVAILABLE:return ve.UNAVAILABLE;case _r.UNAUTHENTICATED:return ve.UNAUTHENTICATED;case _r.INVALID_ARGUMENT:return ve.INVALID_ARGUMENT;case _r.NOT_FOUND:return ve.NOT_FOUND;case _r.ALREADY_EXISTS:return ve.ALREADY_EXISTS;case _r.PERMISSION_DENIED:return ve.PERMISSION_DENIED;case _r.FAILED_PRECONDITION:return ve.FAILED_PRECONDITION;case _r.ABORTED:return ve.ABORTED;case _r.OUT_OF_RANGE:return ve.OUT_OF_RANGE;case _r.UNIMPLEMENTED:return ve.UNIMPLEMENTED;case _r.DATA_LOSS:return ve.DATA_LOSS;default:return st(39323,{code:n})}}($t=_r||(_r={}))[$t.OK=0]="OK",$t[$t.CANCELLED=1]="CANCELLED",$t[$t.UNKNOWN=2]="UNKNOWN",$t[$t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$t[$t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$t[$t.NOT_FOUND=5]="NOT_FOUND",$t[$t.ALREADY_EXISTS=6]="ALREADY_EXISTS",$t[$t.PERMISSION_DENIED=7]="PERMISSION_DENIED",$t[$t.UNAUTHENTICATED=16]="UNAUTHENTICATED",$t[$t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$t[$t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$t[$t.ABORTED=10]="ABORTED",$t[$t.OUT_OF_RANGE=11]="OUT_OF_RANGE",$t[$t.UNIMPLEMENTED=12]="UNIMPLEMENTED",$t[$t.INTERNAL=13]="INTERNAL",$t[$t.UNAVAILABLE=14]="UNAVAILABLE",$t[$t.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR=new ko([4294967295,4294967295],0);function NE(n){const e=qR().encode(n),t=new DA;return t.update(e),new Uint8Array(t.digest())}function RE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),c=e.getUint32(8,!0),h=e.getUint32(12,!0);return[new ko([t,s],0),new ko([c,h],0)]}class Dm{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Pu(`Invalid padding: ${t}`);if(s<0)throw new Pu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Pu(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Pu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ko.fromNumber(this.ge)}ye(e,t,s){let c=e.add(t.multiply(ko.fromNumber(s)));return c.compare(YR)===1&&(c=new ko([c.getBits(0),c.getBits(1)],0)),c.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=NE(e),[s,c]=RE(t);for(let h=0;h<this.hashCount;h++){const p=this.ye(s,c,h);if(!this.we(p))return!1}return!0}static create(e,t,s){const c=e%8==0?0:8-e%8,h=new Uint8Array(Math.ceil(e/8)),p=new Dm(h,c,t);return s.forEach((T=>p.insert(T))),p}insert(e){if(this.ge===0)return;const t=NE(e),[s,c]=RE(t);for(let h=0;h<this.hashCount;h++){const p=this.ye(s,c,h);this.Se(p)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Pu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,t,s,c,h){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=c,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const c=new Map;return c.set(e,dh.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Wd(ut.min(),c,new Kn(Ht),za(),Gt())}}class dh{constructor(e,t,s,c,h){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=c,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new dh(s,t,Gt(),Gt(),Gt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,t,s,c){this.be=e,this.removedTargetIds=t,this.key=s,this.De=c}}class _b{constructor(e,t){this.targetId=e,this.Ce=t}}class wb{constructor(e,t,s=Wr.EMPTY_BYTE_STRING,c=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=c}}class OE{constructor(){this.ve=0,this.Fe=DE(),this.Me=Wr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Gt(),t=Gt(),s=Gt();return this.Fe.forEach(((c,h)=>{switch(h){case 0:e=e.add(c);break;case 2:t=t.add(c);break;case 1:s=s.add(c);break;default:st(38017,{changeType:h})}})),new dh(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=DE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,en(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class XR{constructor(e){this.Ge=e,this.ze=new Map,this.je=za(),this.Je=Pf(),this.He=Pf(),this.Ye=new Kn(Ht)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:st(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,c)=>{this.rt(c)&&t(c)}))}st(e){const t=e.targetId,s=e.Ce.count,c=this.ot(t);if(c){const h=c.target;if(jg(h))if(s===0){const p=new tt(h.path);this.et(t,p,Br.newNoDocument(p,ut.min()))}else en(s===1,20013,{expectedCount:s});else{const p=this._t(t);if(p!==s){const T=this.ut(e),w=T?this.ct(T,e,p):1;if(w!==0){this.it(t);const E=w===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,E)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:c=0},hashCount:h=0}=t;let p,T;try{p=zo(s).toUint8Array()}catch(w){if(w instanceof GA)return vc("Decoding the base64 bloom filter in existence filter failed ("+w.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw w}try{T=new Dm(p,c,h)}catch(w){return vc(w instanceof Pu?"BloomFilter error: ":"Applying bloom filter failed: ",w),null}return T.ge===0?null:T}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let c=0;return s.forEach((h=>{const p=this.Ge.ht(),T=`projects/${p.projectId}/databases/${p.database}/documents/${h.path.canonicalString()}`;e.mightContain(T)||(this.et(t,h,null),c++)})),c}Tt(e){const t=new Map;this.ze.forEach(((h,p)=>{const T=this.ot(p);if(T){if(h.current&&jg(T.target)){const w=new tt(T.target.path);this.It(w).has(p)||this.Et(p,w)||this.et(p,w,Br.newNoDocument(w,e))}h.Be&&(t.set(p,h.ke()),h.qe())}}));let s=Gt();this.He.forEach(((h,p)=>{let T=!0;p.forEachWhile((w=>{const E=this.ot(w);return!E||E.purpose==="TargetPurposeLimboResolution"||(T=!1,!1)})),T&&(s=s.add(h))})),this.je.forEach(((h,p)=>p.setReadTime(e)));const c=new Wd(e,t,this.Ye,this.je,s);return this.je=za(),this.Je=Pf(),this.He=Pf(),this.Ye=new Kn(Ht),c}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const c=this.nt(e);this.Et(e,t)?c.Qe(t,1):c.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new OE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Or(Ht),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Or(Ht),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||qe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new OE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Pf(){return new Kn(tt.comparator)}function DE(){return new Kn(tt.comparator)}const WR={asc:"ASCENDING",desc:"DESCENDING"},KR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},QR={and:"AND",or:"OR"};class ZR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function zg(n,e){return n.useProto3Json||ch(e)?e:{value:e}}function xd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ab(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function JR(n,e){return xd(n,e.toTimestamp())}function es(n){return en(!!n,49232),ut.fromTimestamp((function(t){const s=Fo(t);return new Pn(s.seconds,s.nanos)})(n))}function Mm(n,e){return Hg(n,e).canonicalString()}function Hg(n,e){const t=(function(c){return new _n(["projects",c.projectId,"databases",c.database])})(n).child("documents");return e===void 0?t:t.child(e)}function bb(n){const e=_n.fromString(n);return en(Nb(e),10190,{key:e.toString()}),e}function yd(n,e){return Mm(n.databaseId,e.path)}function Hu(n,e){const t=bb(e);if(t.get(1)!==n.databaseId.projectId)throw new ze(ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ze(ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new tt(vb(t))}function Tb(n,e){return Mm(n.databaseId,e)}function $R(n){const e=bb(n);return e.length===4?_n.emptyPath():vb(e)}function Gg(n){return new _n(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function vb(n){return en(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function ME(n,e,t){return{name:yd(n,e),fields:t.value.mapValue.fields}}function e6(n,e){return"found"in e?(function(s,c){en(!!c.found,43571),c.found.name,c.found.updateTime;const h=Hu(s,c.found.name),p=es(c.found.updateTime),T=c.found.createTime?es(c.found.createTime):ut.min(),w=new Ai({mapValue:{fields:c.found.fields}});return Br.newFoundDocument(h,p,T,w)})(n,e):"missing"in e?(function(s,c){en(!!c.missing,3894),en(!!c.readTime,22933);const h=Hu(s,c.missing),p=es(c.readTime);return Br.newNoDocument(h,p)})(n,e):st(7234,{result:e})}function t6(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(E){return E==="NO_CHANGE"?0:E==="ADD"?1:E==="REMOVE"?2:E==="CURRENT"?3:E==="RESET"?4:st(39313,{state:E})})(e.targetChange.targetChangeType||"NO_CHANGE"),c=e.targetChange.targetIds||[],h=(function(E,C){return E.useProto3Json?(en(C===void 0||typeof C=="string",58123),Wr.fromBase64String(C||"")):(en(C===void 0||C instanceof Buffer||C instanceof Uint8Array,16193),Wr.fromUint8Array(C||new Uint8Array))})(n,e.targetChange.resumeToken),p=e.targetChange.cause,T=p&&(function(E){const C=E.code===void 0?ve.UNKNOWN:Eb(E.code);return new ze(C,E.message||"")})(p);t=new wb(s,c,h,T||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const c=Hu(n,s.document.name),h=es(s.document.updateTime),p=s.document.createTime?es(s.document.createTime):ut.min(),T=new Ai({mapValue:{fields:s.document.fields}}),w=Br.newFoundDocument(c,h,p,T),E=s.targetIds||[],C=s.removedTargetIds||[];t=new Qf(E,C,w.key,w)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const c=Hu(n,s.document),h=s.readTime?es(s.readTime):ut.min(),p=Br.newNoDocument(c,h),T=s.removedTargetIds||[];t=new Qf([],T,p.key,p)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const c=Hu(n,s.document),h=s.removedTargetIds||[];t=new Qf([],h,c,null)}else{if(!("filter"in e))return st(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:c=0,unchangedNames:h}=s,p=new GR(c,h),T=s.targetId;t=new _b(T,p)}}return t}function Sb(n,e){let t;if(e instanceof hh)t={update:ME(n,e.key,e.value)};else if(e instanceof fh)t={delete:yd(n,e.key)};else if(e instanceof Xo)t={update:ME(n,e.key,e.data),updateMask:u6(e.fieldMask)};else{if(!(e instanceof xb))return st(16599,{Vt:e.type});t={verify:yd(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(h,p){const T=p.transform;if(T instanceof md)return{fieldPath:p.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(T instanceof th)return{fieldPath:p.field.canonicalString(),appendMissingElements:{values:T.elements}};if(T instanceof nh)return{fieldPath:p.field.canonicalString(),removeAllFromArray:{values:T.elements}};if(T instanceof pd)return{fieldPath:p.field.canonicalString(),increment:T.Ae};throw st(20930,{transform:p.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(c,h){return h.updateTime!==void 0?{updateTime:JR(c,h.updateTime)}:h.exists!==void 0?{exists:h.exists}:st(27497)})(n,e.precondition)),t}function n6(n,e){return n&&n.length>0?(en(e!==void 0,14353),n.map((t=>(function(c,h){let p=c.updateTime?es(c.updateTime):es(h);return p.isEqual(ut.min())&&(p=es(h)),new VR(p,c.transformResults||[])})(t,e)))):[]}function r6(n,e){return{documents:[Tb(n,e.path)]}}function i6(n,e){const t={structuredQuery:{}},s=e.path;let c;e.collectionGroup!==null?(c=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(c=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=Tb(n,c);const h=(function(E){if(E.length!==0)return Ib(Ds.create(E,"and"))})(e.filters);h&&(t.structuredQuery.where=h);const p=(function(E){if(E.length!==0)return E.map((C=>(function(M){return{field:hc(M.field),direction:o6(M.dir)}})(C)))})(e.orderBy);p&&(t.structuredQuery.orderBy=p);const T=zg(n,e.limit);return T!==null&&(t.structuredQuery.limit=T),e.startAt&&(t.structuredQuery.startAt=(function(E){return{before:E.inclusive,values:E.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(E){return{before:!E.inclusive,values:E.position}})(e.endAt)),{ft:t,parent:c}}function s6(n){let e=$R(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let c=null;if(s>0){en(s===1,65062);const C=t.from[0];C.allDescendants?c=C.collectionId:e=e.child(C.collectionId)}let h=[];t.where&&(h=(function(I){const M=Cb(I);return M instanceof Ds&&eb(M)?M.getFilters():[M]})(t.where));let p=[];t.orderBy&&(p=(function(I){return I.map((M=>(function(W){return new dd(fc(W.field),(function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(W.direction))})(M)))})(t.orderBy));let T=null;t.limit&&(T=(function(I){let M;return M=typeof I=="object"?I.value:I,ch(M)?null:M})(t.limit));let w=null;t.startAt&&(w=(function(I){const M=!!I.before,B=I.values||[];return new fd(B,M)})(t.startAt));let E=null;return t.endAt&&(E=(function(I){const M=!I.before,B=I.values||[];return new fd(B,M)})(t.endAt)),SR(e,c,p,h,T,"F",w,E)}function a6(n,e){const t=(function(c){switch(c){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return st(28987,{purpose:c})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Cb(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=fc(t.unaryFilter.field);return wr.create(s,"==",{doubleValue:NaN});case"IS_NULL":const c=fc(t.unaryFilter.field);return wr.create(c,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const h=fc(t.unaryFilter.field);return wr.create(h,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const p=fc(t.unaryFilter.field);return wr.create(p,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return st(61313);default:return st(60726)}})(n):n.fieldFilter!==void 0?(function(t){return wr.create(fc(t.fieldFilter.field),(function(c){switch(c){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return st(58110);default:return st(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ds.create(t.compositeFilter.filters.map((s=>Cb(s))),(function(c){switch(c){case"AND":return"and";case"OR":return"or";default:return st(1026)}})(t.compositeFilter.op))})(n):st(30097,{filter:n})}function o6(n){return WR[n]}function l6(n){return KR[n]}function c6(n){return QR[n]}function hc(n){return{fieldPath:n.canonicalString()}}function fc(n){return Xr.fromServerFormat(n.fieldPath)}function Ib(n){return n instanceof wr?(function(t){if(t.op==="=="){if(_E(t.value))return{unaryFilter:{field:hc(t.field),op:"IS_NAN"}};if(EE(t.value))return{unaryFilter:{field:hc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(_E(t.value))return{unaryFilter:{field:hc(t.field),op:"IS_NOT_NAN"}};if(EE(t.value))return{unaryFilter:{field:hc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hc(t.field),op:l6(t.op),value:t.value}}})(n):n instanceof Ds?(function(t){const s=t.getFilters().map((c=>Ib(c)));return s.length===1?s[0]:{compositeFilter:{op:c6(t.op),filters:s}}})(n):st(54877,{filter:n})}function u6(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Nb(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,t,s,c,h=ut.min(),p=ut.min(),T=Wr.EMPTY_BYTE_STRING,w=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=c,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=T,this.expectedCount=w}withSequenceNumber(e){return new Ro(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ro(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ro(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ro(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h6{constructor(e){this.yt=e}}function f6(n){const e=s6({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?gd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(){this.Cn=new g6}addToCollectionParentIndex(e,t){return this.Cn.add(t),Ne.resolve()}getCollectionParents(e,t){return Ne.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Ne.resolve()}deleteFieldIndex(e,t){return Ne.resolve()}deleteAllFieldIndexes(e){return Ne.resolve()}createTargetIndexes(e,t){return Ne.resolve()}getDocumentsMatchingTarget(e,t){return Ne.resolve(null)}getIndexType(e,t){return Ne.resolve(0)}getFieldIndexes(e,t){return Ne.resolve([])}getNextCollectionGroupToUpdate(e){return Ne.resolve(null)}getMinOffset(e,t){return Ne.resolve(jo.min())}getMinOffsetFromCollectionGroup(e,t){return Ne.resolve(jo.min())}updateCollectionGroup(e,t,s){return Ne.resolve()}updateIndexEntries(e,t){return Ne.resolve()}}class g6{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),c=this.index[t]||new Or(_n.comparator),h=!c.has(s);return this.index[t]=c.add(s),h}has(e){const t=e.lastSegment(),s=e.popLast(),c=this.index[t];return c&&c.has(s)}getEntries(e){return(this.index[e]||new Or(_n.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Rb=41943040;class Li{static withCacheSize(e){return new Li(e,Li.DEFAULT_COLLECTION_PERCENTILE,Li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Li.DEFAULT_COLLECTION_PERCENTILE=10,Li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Li.DEFAULT=new Li(Rb,Li.DEFAULT_COLLECTION_PERCENTILE,Li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Li.DISABLED=new Li(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Nc(0)}static cr(){return new Nc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE="LruGarbageCollector",m6=1048576;function kE([n,e],[t,s]){const c=Ht(n,t);return c===0?Ht(e,s):c}class p6{constructor(e){this.Ir=e,this.buffer=new Or(kE),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();kE(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class x6{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){qe(LE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){jc(t)?qe(LE,"Ignoring IndexedDB error during garbage collection: ",t):await Vc(t)}await this.Vr(3e5)}))}}class y6{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return Ne.resolve(Fd.ce);const s=new p6(t);return this.mr.forEachTarget(e,(c=>s.Ar(c.sequenceNumber))).next((()=>this.mr.pr(e,(c=>s.Ar(c))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(qe("LruGarbageCollector","Garbage collection skipped; disabled"),Ne.resolve(PE)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(qe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),PE):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,c,h,p,T,w,E;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((I=>(I>this.params.maximumSequenceNumbersToCollect?(qe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),c=this.params.maximumSequenceNumbersToCollect):c=I,p=Date.now(),this.nthSequenceNumber(e,c)))).next((I=>(s=I,T=Date.now(),this.removeTargets(e,s,t)))).next((I=>(h=I,w=Date.now(),this.removeOrphanedDocuments(e,s)))).next((I=>(E=Date.now(),cc()<=zt.DEBUG&&qe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${p-C}ms
	Determined least recently used ${c} in `+(T-p)+`ms
	Removed ${h} targets in `+(w-T)+`ms
	Removed ${I} documents in `+(E-w)+`ms
Total Duration: ${E-C}ms`),Ne.resolve({didRun:!0,sequenceNumbersCollected:c,targetsRemoved:h,documentsRemoved:I}))))}}function E6(n,e){return new y6(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6{constructor(){this.changes=new Rl((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Br.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?Ne.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(e,t,s,c){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=c}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((c=>(s=c,this.remoteDocumentCache.getEntry(e,t)))).next((c=>(s!==null&&zu(s.mutation,c,$i.empty(),Pn.now()),c)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Gt()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Gt()){const c=wl();return this.populateOverlays(e,c,t).next((()=>this.computeViews(e,t,c,s).next((h=>{let p=Mu();return h.forEach(((T,w)=>{p=p.insert(T,w.overlayedDocument)})),p}))))}getOverlayedDocuments(e,t){const s=wl();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Gt())))}populateOverlays(e,t,s){const c=[];return s.forEach((h=>{t.has(h)||c.push(h)})),this.documentOverlayCache.getOverlays(e,c).next((h=>{h.forEach(((p,T)=>{t.set(p,T)}))}))}computeViews(e,t,s,c){let h=za();const p=Fu(),T=(function(){return Fu()})();return t.forEach(((w,E)=>{const C=s.get(E.key);c.has(E.key)&&(C===void 0||C.mutation instanceof Xo)?h=h.insert(E.key,E):C!==void 0?(p.set(E.key,C.mutation.getFieldMask()),zu(C.mutation,E,C.mutation.getFieldMask(),Pn.now())):p.set(E.key,$i.empty())})),this.recalculateAndSaveOverlays(e,h).next((w=>(w.forEach(((E,C)=>p.set(E,C))),t.forEach(((E,C)=>T.set(E,new w6(C,p.get(E)??null)))),T)))}recalculateAndSaveOverlays(e,t){const s=Fu();let c=new Kn(((p,T)=>p-T)),h=Gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((p=>{for(const T of p)T.keys().forEach((w=>{const E=t.get(w);if(E===null)return;let C=s.get(w)||$i.empty();C=T.applyToLocalView(E,C),s.set(w,C);const I=(c.get(T.batchId)||Gt()).add(w);c=c.insert(T.batchId,I)}))})).next((()=>{const p=[],T=c.getReverseIterator();for(;T.hasNext();){const w=T.getNext(),E=w.key,C=w.value,I=cb();C.forEach((M=>{if(!h.has(M)){const B=mb(t.get(M),s.get(M));B!==null&&I.set(M,B),h=h.add(M)}})),p.push(this.documentOverlayCache.saveOverlays(e,E,I))}return Ne.waitFor(p)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,c){return(function(p){return tt.isDocumentKey(p.path)&&p.collectionGroup===null&&p.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ib(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,c):this.getDocumentsMatchingCollectionQuery(e,t,s,c)}getNextDocuments(e,t,s,c){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,c).next((h=>{const p=c-h.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,c-h.size):Ne.resolve(wl());let T=Zu,w=h;return p.next((E=>Ne.forEach(E,((C,I)=>(T<I.largestBatchId&&(T=I.largestBatchId),h.get(C)?Ne.resolve():this.remoteDocumentCache.getEntry(e,C).next((M=>{w=w.insert(C,M)}))))).next((()=>this.populateOverlays(e,E,h))).next((()=>this.computeViews(e,w,E,Gt()))).next((C=>({batchId:T,changes:lb(C)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new tt(t)).next((s=>{let c=Mu();return s.isFoundDocument()&&(c=c.insert(s.key,s)),c}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,c){const h=t.collectionGroup;let p=Mu();return this.indexManager.getCollectionParents(e,h).next((T=>Ne.forEach(T,(w=>{const E=(function(I,M){return new uh(M,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)})(t,w.child(h));return this.getDocumentsMatchingCollectionQuery(e,E,s,c).next((C=>{C.forEach(((I,M)=>{p=p.insert(I,M)}))}))})).next((()=>p))))}getDocumentsMatchingCollectionQuery(e,t,s,c){let h;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((p=>(h=p,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,h,c)))).next((p=>{h.forEach(((w,E)=>{const C=E.getKey();p.get(C)===null&&(p=p.insert(C,Br.newInvalidDocument(C)))}));let T=Mu();return p.forEach(((w,E)=>{const C=h.get(w);C!==void 0&&zu(C.mutation,E,$i.empty(),Pn.now()),qd(t,E)&&(T=T.insert(w,E))})),T}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Ne.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(c){return{id:c.id,version:c.version,createTime:es(c.createTime)}})(t)),Ne.resolve()}getNamedQuery(e,t){return Ne.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(c){return{name:c.name,query:f6(c.bundledQuery),readTime:es(c.readTime)}})(t)),Ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(){this.overlays=new Kn(tt.comparator),this.qr=new Map}getOverlay(e,t){return Ne.resolve(this.overlays.get(t))}getOverlays(e,t){const s=wl();return Ne.forEach(t,(c=>this.getOverlay(e,c).next((h=>{h!==null&&s.set(c,h)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((c,h)=>{this.St(e,t,h)})),Ne.resolve()}removeOverlaysForBatchId(e,t,s){const c=this.qr.get(s);return c!==void 0&&(c.forEach((h=>this.overlays=this.overlays.remove(h))),this.qr.delete(s)),Ne.resolve()}getOverlaysForCollection(e,t,s){const c=wl(),h=t.length+1,p=new tt(t.child("")),T=this.overlays.getIteratorFrom(p);for(;T.hasNext();){const w=T.getNext().value,E=w.getKey();if(!t.isPrefixOf(E.path))break;E.path.length===h&&w.largestBatchId>s&&c.set(w.getKey(),w)}return Ne.resolve(c)}getOverlaysForCollectionGroup(e,t,s,c){let h=new Kn(((E,C)=>E-C));const p=this.overlays.getIterator();for(;p.hasNext();){const E=p.getNext().value;if(E.getKey().getCollectionGroup()===t&&E.largestBatchId>s){let C=h.get(E.largestBatchId);C===null&&(C=wl(),h=h.insert(E.largestBatchId,C)),C.set(E.getKey(),E)}}const T=wl(),w=h.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach(((E,C)=>T.set(E,C))),!(T.size()>=c)););return Ne.resolve(T)}St(e,t,s){const c=this.overlays.get(s.key);if(c!==null){const p=this.qr.get(c.largestBatchId).delete(s.key);this.qr.set(c.largestBatchId,p)}this.overlays=this.overlays.insert(s.key,new HR(t,s));let h=this.qr.get(t);h===void 0&&(h=Gt(),this.qr.set(t,h)),this.qr.set(t,h.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(){this.sessionToken=Wr.EMPTY_BYTE_STRING}getSessionToken(e){return Ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(){this.Qr=new Or(kr.$r),this.Ur=new Or(kr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new kr(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new kr(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new tt(new _n([])),s=new kr(t,e),c=new kr(t,e+1),h=[];return this.Ur.forEachInRange([s,c],(p=>{this.Gr(p),h.push(p.key)})),h}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new tt(new _n([])),s=new kr(t,e),c=new kr(t,e+1);let h=Gt();return this.Ur.forEachInRange([s,c],(p=>{h=h.add(p.key)})),h}containsKey(e){const t=new kr(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class kr{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return tt.comparator(e.key,t.key)||Ht(e.Yr,t.Yr)}static Kr(e,t){return Ht(e.Yr,t.Yr)||tt.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S6{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Or(kr.$r)}checkEmpty(e){return Ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,c){const h=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const p=new zR(h,t,s,c);this.mutationQueue.push(p);for(const T of c)this.Zr=this.Zr.add(new kr(T.key,h)),this.indexManager.addToCollectionParentIndex(e,T.key.path.popLast());return Ne.resolve(p)}lookupMutationBatch(e,t){return Ne.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,c=this.ei(s),h=c<0?0:c;return Ne.resolve(this.mutationQueue.length>h?this.mutationQueue[h]:null)}getHighestUnacknowledgedBatchId(){return Ne.resolve(this.mutationQueue.length===0?vm:this.tr-1)}getAllMutationBatches(e){return Ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new kr(t,0),c=new kr(t,Number.POSITIVE_INFINITY),h=[];return this.Zr.forEachInRange([s,c],(p=>{const T=this.Xr(p.Yr);h.push(T)})),Ne.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Or(Ht);return t.forEach((c=>{const h=new kr(c,0),p=new kr(c,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([h,p],(T=>{s=s.add(T.Yr)}))})),Ne.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,c=s.length+1;let h=s;tt.isDocumentKey(h)||(h=h.child(""));const p=new kr(new tt(h),0);let T=new Or(Ht);return this.Zr.forEachWhile((w=>{const E=w.key.path;return!!s.isPrefixOf(E)&&(E.length===c&&(T=T.add(w.Yr)),!0)}),p),Ne.resolve(this.ti(T))}ti(e){const t=[];return e.forEach((s=>{const c=this.Xr(s);c!==null&&t.push(c)})),t}removeMutationBatch(e,t){en(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return Ne.forEach(t.mutations,(c=>{const h=new kr(c.key,t.batchId);return s=s.delete(h),this.referenceDelegate.markPotentiallyOrphaned(e,c.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new kr(t,0),c=this.Zr.firstAfterOrEqual(s);return Ne.resolve(t.isEqual(c&&c.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ne.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(e){this.ri=e,this.docs=(function(){return new Kn(tt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,c=this.docs.get(s),h=c?c.size:0,p=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:p}),this.size+=p-h,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Ne.resolve(s?s.document.mutableCopy():Br.newInvalidDocument(t))}getEntries(e,t){let s=za();return t.forEach((c=>{const h=this.docs.get(c);s=s.insert(c,h?h.document.mutableCopy():Br.newInvalidDocument(c))})),Ne.resolve(s)}getDocumentsMatchingQuery(e,t,s,c){let h=za();const p=t.path,T=new tt(p.child("__id-9223372036854775808__")),w=this.docs.getIteratorFrom(T);for(;w.hasNext();){const{key:E,value:{document:C}}=w.getNext();if(!p.isPrefixOf(E.path))break;E.path.length>p.length+1||iR(rR(C),s)<=0||(c.has(C.key)||qd(t,C))&&(h=h.insert(C.key,C.mutableCopy()))}return Ne.resolve(h)}getAllFromCollectionGroup(e,t,s,c){st(9500)}ii(e,t){return Ne.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new I6(this)}getSize(e){return Ne.resolve(this.size)}}class I6 extends _6{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,c)=>{c.isValidDocument()?t.push(this.Nr.addEntry(e,c)):this.Nr.removeEntry(s)})),Ne.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N6{constructor(e){this.persistence=e,this.si=new Rl((t=>Im(t)),Nm),this.lastRemoteSnapshotVersion=ut.min(),this.highestTargetId=0,this.oi=0,this._i=new Pm,this.targetCount=0,this.ai=Nc.ur()}forEachTarget(e,t){return this.si.forEach(((s,c)=>t(c))),Ne.resolve()}getLastRemoteSnapshotVersion(e){return Ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ne.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),Ne.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Nc(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Ne.resolve()}updateTargetData(e,t){return this.Pr(t),Ne.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Ne.resolve()}removeTargets(e,t,s){let c=0;const h=[];return this.si.forEach(((p,T)=>{T.sequenceNumber<=t&&s.get(T.targetId)===null&&(this.si.delete(p),h.push(this.removeMatchingKeysForTargetId(e,T.targetId)),c++)})),Ne.waitFor(h).next((()=>c))}getTargetCount(e){return Ne.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return Ne.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),Ne.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const c=this.persistence.referenceDelegate,h=[];return c&&t.forEach((p=>{h.push(c.markPotentiallyOrphaned(e,p))})),Ne.waitFor(h)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Ne.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return Ne.resolve(s)}containsKey(e,t){return Ne.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e,t){this.ui={},this.overlays={},this.ci=new Fd(0),this.li=!1,this.li=!0,this.hi=new v6,this.referenceDelegate=e(this),this.Pi=new N6(this),this.indexManager=new d6,this.remoteDocumentCache=(function(c){return new C6(c)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new h6(t),this.Ii=new b6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new T6,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new S6(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){qe("MemoryPersistence","Starting transaction:",e);const c=new R6(this.ci.next());return this.referenceDelegate.Ei(),s(c).next((h=>this.referenceDelegate.di(c).next((()=>h)))).toPromise().then((h=>(c.raiseOnCommittedEvent(),h)))}Ai(e,t){return Ne.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class R6 extends aR{constructor(e){super(),this.currentSequenceNumber=e}}class Lm{constructor(e){this.persistence=e,this.Ri=new Pm,this.Vi=null}static mi(e){return new Lm(e)}get fi(){if(this.Vi)return this.Vi;throw st(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),Ne.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),Ne.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Ne.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((c=>this.fi.add(c.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((c=>{c.forEach((h=>this.fi.add(h.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ne.forEach(this.fi,(s=>{const c=tt.fromPath(s);return this.gi(e,c).next((h=>{h||t.removeEntry(c,ut.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return Ne.or([()=>Ne.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Ed{constructor(e,t){this.persistence=e,this.pi=new Rl((s=>cR(s.path)),((s,c)=>s.isEqual(c))),this.garbageCollector=E6(this,t)}static mi(e,t){return new Ed(e,t)}Ei(){}di(e){return Ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((c=>s+c))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return Ne.forEach(this.pi,((s,c)=>this.br(e,s,c).next((h=>h?Ne.resolve():t(c)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const c=this.persistence.getRemoteDocumentCache(),h=c.newChangeBuffer();return c.ii(e,(p=>this.br(e,p,t).next((T=>{T||(s++,h.removeEntry(p,ut.min()))})))).next((()=>h.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Ne.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),Ne.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),Ne.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Ne.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Xf(e.data.value)),t}br(e,t,s){return Ne.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const c=this.pi.get(t);return Ne.resolve(c!==void 0&&c>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,t,s,c){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=c}static As(e,t){let s=Gt(),c=Gt();for(const h of t.docChanges)switch(h.type){case 0:s=s.add(h.doc.key);break;case 1:c=c.add(h.doc.key)}return new km(e,t.fromCache,s,c)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return CN()?8:oR(ci())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,c){const h={result:null};return this.ys(e,t).next((p=>{h.result=p})).next((()=>{if(!h.result)return this.ws(e,t,c,s).next((p=>{h.result=p}))})).next((()=>{if(h.result)return;const p=new O6;return this.Ss(e,t,p).next((T=>{if(h.result=T,this.Vs)return this.bs(e,t,p,T.size)}))})).next((()=>h.result))}bs(e,t,s,c){return s.documentReadCount<this.fs?(cc()<=zt.DEBUG&&qe("QueryEngine","SDK will not create cache indexes for query:",uc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ne.resolve()):(cc()<=zt.DEBUG&&qe("QueryEngine","Query:",uc(t),"scans",s.documentReadCount,"local documents and returns",c,"documents as results."),s.documentReadCount>this.gs*c?(cc()<=zt.DEBUG&&qe("QueryEngine","The SDK decides to create cache indexes for query:",uc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xs(t))):Ne.resolve())}ys(e,t){if(TE(t))return Ne.resolve(null);let s=Xs(t);return this.indexManager.getIndexType(e,s).next((c=>c===0?null:(t.limit!==null&&c===1&&(t=gd(t,null,"F"),s=Xs(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((h=>{const p=Gt(...h);return this.ps.getDocuments(e,p).next((T=>this.indexManager.getMinOffset(e,s).next((w=>{const E=this.Ds(t,T);return this.Cs(t,E,p,w.readTime)?this.ys(e,gd(t,null,"F")):this.vs(e,E,t,w)}))))})))))}ws(e,t,s,c){return TE(t)||c.isEqual(ut.min())?Ne.resolve(null):this.ps.getDocuments(e,s).next((h=>{const p=this.Ds(t,h);return this.Cs(t,p,s,c)?Ne.resolve(null):(cc()<=zt.DEBUG&&qe("QueryEngine","Re-using previous result from %s to execute query: %s",c.toString(),uc(t)),this.vs(e,p,t,nR(c,Zu)).next((T=>T)))}))}Ds(e,t){let s=new Or(ab(e));return t.forEach(((c,h)=>{qd(e,h)&&(s=s.add(h))})),s}Cs(e,t,s,c){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const h=e.limitType==="F"?t.last():t.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(c)>0)}Ss(e,t,s){return cc()<=zt.DEBUG&&qe("QueryEngine","Using full collection scan to execute query:",uc(t)),this.ps.getDocumentsMatchingQuery(e,t,jo.min(),s)}vs(e,t,s,c){return this.ps.getDocumentsMatchingQuery(e,s,c).next((h=>(t.forEach((p=>{h=h.insert(p.key,p)})),h)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm="LocalStore",M6=3e8;class P6{constructor(e,t,s,c){this.persistence=e,this.Fs=t,this.serializer=c,this.Ms=new Kn(Ht),this.xs=new Rl((h=>Im(h)),Nm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new A6(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function L6(n,e,t,s){return new P6(n,e,t,s)}async function Db(n,e){const t=mt(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let c;return t.mutationQueue.getAllMutationBatches(s).next((h=>(c=h,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((h=>{const p=[],T=[];let w=Gt();for(const E of c){p.push(E.batchId);for(const C of E.mutations)w=w.add(C.key)}for(const E of h){T.push(E.batchId);for(const C of E.mutations)w=w.add(C.key)}return t.localDocuments.getDocuments(s,w).next((E=>({Ls:E,removedBatchIds:p,addedBatchIds:T})))}))}))}function k6(n,e){const t=mt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const c=e.batch.keys(),h=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(T,w,E,C){const I=E.batch,M=I.keys();let B=Ne.resolve();return M.forEach((W=>{B=B.next((()=>C.getEntry(w,W))).next(($=>{const q=E.docVersions.get(W);en(q!==null,48541),$.version.compareTo(q)<0&&(I.applyToRemoteDocument($,E),$.isValidDocument()&&($.setReadTime(E.commitVersion),C.addEntry($)))}))})),B.next((()=>T.mutationQueue.removeMutationBatch(w,I)))})(t,s,e,h).next((()=>h.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,c,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(T){let w=Gt();for(let E=0;E<T.mutationResults.length;++E)T.mutationResults[E].transformResults.length>0&&(w=w.add(T.batch.mutations[E].key));return w})(e)))).next((()=>t.localDocuments.getDocuments(s,c)))}))}function Mb(n){const e=mt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function B6(n,e){const t=mt(n),s=e.snapshotVersion;let c=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(h=>{const p=t.Ns.newChangeBuffer({trackRemovals:!0});c=t.Ms;const T=[];e.targetChanges.forEach(((C,I)=>{const M=c.get(I);if(!M)return;T.push(t.Pi.removeMatchingKeys(h,C.removedDocuments,I).next((()=>t.Pi.addMatchingKeys(h,C.addedDocuments,I))));let B=M.withSequenceNumber(h.currentSequenceNumber);e.targetMismatches.get(I)!==null?B=B.withResumeToken(Wr.EMPTY_BYTE_STRING,ut.min()).withLastLimboFreeSnapshotVersion(ut.min()):C.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(C.resumeToken,s)),c=c.insert(I,B),(function($,q,_e){return $.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=M6?!0:_e.addedDocuments.size+_e.modifiedDocuments.size+_e.removedDocuments.size>0})(M,B,C)&&T.push(t.Pi.updateTargetData(h,B))}));let w=za(),E=Gt();if(e.documentUpdates.forEach((C=>{e.resolvedLimboDocuments.has(C)&&T.push(t.persistence.referenceDelegate.updateLimboDocument(h,C))})),T.push(U6(h,p,e.documentUpdates).next((C=>{w=C.ks,E=C.qs}))),!s.isEqual(ut.min())){const C=t.Pi.getLastRemoteSnapshotVersion(h).next((I=>t.Pi.setTargetsMetadata(h,h.currentSequenceNumber,s)));T.push(C)}return Ne.waitFor(T).next((()=>p.apply(h))).next((()=>t.localDocuments.getLocalViewOfDocuments(h,w,E))).next((()=>w))})).then((h=>(t.Ms=c,h)))}function U6(n,e,t){let s=Gt(),c=Gt();return t.forEach((h=>s=s.add(h))),e.getEntries(n,s).next((h=>{let p=za();return t.forEach(((T,w)=>{const E=h.get(T);w.isFoundDocument()!==E.isFoundDocument()&&(c=c.add(T)),w.isNoDocument()&&w.version.isEqual(ut.min())?(e.removeEntry(T,w.readTime),p=p.insert(T,w)):!E.isValidDocument()||w.version.compareTo(E.version)>0||w.version.compareTo(E.version)===0&&E.hasPendingWrites?(e.addEntry(w),p=p.insert(T,w)):qe(Bm,"Ignoring outdated watch update for ",T,". Current version:",E.version," Watch version:",w.version)})),{ks:p,qs:c}}))}function V6(n,e){const t=mt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=vm),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function j6(n,e){const t=mt(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let c;return t.Pi.getTargetData(s,e).next((h=>h?(c=h,Ne.resolve(c)):t.Pi.allocateTargetId(s).next((p=>(c=new Ro(e,p,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,c).next((()=>c)))))))})).then((s=>{const c=t.Ms.get(s.targetId);return(c===null||s.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function qg(n,e,t){const s=mt(n),c=s.Ms.get(e),h=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",h,(p=>s.persistence.referenceDelegate.removeTarget(p,c)))}catch(p){if(!jc(p))throw p;qe(Bm,`Failed to update sequence numbers for target ${e}: ${p}`)}s.Ms=s.Ms.remove(e),s.xs.delete(c.target)}function BE(n,e,t){const s=mt(n);let c=ut.min(),h=Gt();return s.persistence.runTransaction("Execute query","readwrite",(p=>(function(w,E,C){const I=mt(w),M=I.xs.get(C);return M!==void 0?Ne.resolve(I.Ms.get(M)):I.Pi.getTargetData(E,C)})(s,p,Xs(e)).next((T=>{if(T)return c=T.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(p,T.targetId).next((w=>{h=w}))})).next((()=>s.Fs.getDocumentsMatchingQuery(p,e,t?c:ut.min(),t?h:Gt()))).next((T=>(F6(s,IR(e),T),{documents:T,Qs:h})))))}function F6(n,e,t){let s=n.Os.get(e)||ut.min();t.forEach(((c,h)=>{h.readTime.compareTo(s)>0&&(s=h.readTime)})),n.Os.set(e,s)}class UE{constructor(){this.activeTargetIds=PR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class z6{constructor(){this.Mo=new UE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new UE,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H6{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE="ConnectivityMonitor";class jE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){qe(VE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){qe(VE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lf=null;function Yg(){return Lf===null?Lf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Lf++,"0x"+Lf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg="RestConnection",G6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class q6{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${c}`,this.Wo=this.databaseId.database===ud?`project_id=${s}`:`project_id=${s}&database_id=${c}`}Go(e,t,s,c,h){const p=Yg(),T=this.zo(e,t.toUriEncodedString());qe(dg,`Sending RPC '${e}' ${p}:`,T,s);const w={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(w,c,h);const{host:E}=new URL(T),C=kc(E);return this.Jo(e,T,w,s,C).then((I=>(qe(dg,`Received RPC '${e}' ${p}: `,I),I)),(I=>{throw vc(dg,`RPC '${e}' ${p} failed with error: `,I,"url: ",T,"request:",s),I}))}Ho(e,t,s,c,h,p){return this.Go(e,t,s,c,h)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Uc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((c,h)=>e[h]=c)),s&&s.headers.forEach(((c,h)=>e[h]=c))}zo(e,t){const s=G6[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi="WebChannelConnection";class X6 extends q6{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,c,h){const p=Yg();return new Promise(((T,w)=>{const E=new MA;E.setWithCredentials(!0),E.listenOnce(PA.COMPLETE,(()=>{try{switch(E.getLastErrorCode()){case Yf.NO_ERROR:const I=E.getResponseJson();qe(oi,`XHR for RPC '${e}' ${p} received:`,JSON.stringify(I)),T(I);break;case Yf.TIMEOUT:qe(oi,`RPC '${e}' ${p} timed out`),w(new ze(ve.DEADLINE_EXCEEDED,"Request time out"));break;case Yf.HTTP_ERROR:const M=E.getStatus();if(qe(oi,`RPC '${e}' ${p} failed with status:`,M,"response text:",E.getResponseText()),M>0){let B=E.getResponseJson();Array.isArray(B)&&(B=B[0]);const W=B==null?void 0:B.error;if(W&&W.status&&W.message){const $=(function(_e){const ae=_e.toLowerCase().replace(/_/g,"-");return Object.values(ve).indexOf(ae)>=0?ae:ve.UNKNOWN})(W.status);w(new ze($,W.message))}else w(new ze(ve.UNKNOWN,"Server responded with status "+E.getStatus()))}else w(new ze(ve.UNAVAILABLE,"Connection failed."));break;default:st(9055,{l_:e,streamId:p,h_:E.getLastErrorCode(),P_:E.getLastError()})}}finally{qe(oi,`RPC '${e}' ${p} completed.`)}}));const C=JSON.stringify(c);qe(oi,`RPC '${e}' ${p} sending request:`,c),E.send(t,"POST",C,s,15)}))}T_(e,t,s){const c=Yg(),h=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],p=BA(),T=kA(),w={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},E=this.longPollingOptions.timeoutSeconds;E!==void 0&&(w.longPollingTimeout=Math.round(1e3*E)),this.useFetchStreams&&(w.useFetchStreams=!0),this.jo(w.initMessageHeaders,t,s),w.encodeInitMessageHeaders=!0;const C=h.join("");qe(oi,`Creating RPC '${e}' stream ${c}: ${C}`,w);const I=p.createWebChannel(C,w);this.I_(I);let M=!1,B=!1;const W=new Y6({Yo:q=>{B?qe(oi,`Not sending because RPC '${e}' stream ${c} is closed:`,q):(M||(qe(oi,`Opening RPC '${e}' stream ${c} transport.`),I.open(),M=!0),qe(oi,`RPC '${e}' stream ${c} sending:`,q),I.send(q))},Zo:()=>I.close()}),$=(q,_e,ae)=>{q.listen(_e,(Q=>{try{ae(Q)}catch(le){setTimeout((()=>{throw le}),0)}}))};return $(I,Du.EventType.OPEN,(()=>{B||(qe(oi,`RPC '${e}' stream ${c} transport opened.`),W.o_())})),$(I,Du.EventType.CLOSE,(()=>{B||(B=!0,qe(oi,`RPC '${e}' stream ${c} transport closed`),W.a_(),this.E_(I))})),$(I,Du.EventType.ERROR,(q=>{B||(B=!0,vc(oi,`RPC '${e}' stream ${c} transport errored. Name:`,q.name,"Message:",q.message),W.a_(new ze(ve.UNAVAILABLE,"The operation could not be completed")))})),$(I,Du.EventType.MESSAGE,(q=>{var _e;if(!B){const ae=q.data[0];en(!!ae,16349);const Q=ae,le=(Q==null?void 0:Q.error)||((_e=Q[0])==null?void 0:_e.error);if(le){qe(oi,`RPC '${e}' stream ${c} received error:`,le);const De=le.status;let Oe=(function(V){const Y=_r[V];if(Y!==void 0)return Eb(Y)})(De),j=le.message;Oe===void 0&&(Oe=ve.INTERNAL,j="Unknown error status: "+De+" with message "+le.message),B=!0,W.a_(new ze(Oe,j)),I.close()}else qe(oi,`RPC '${e}' stream ${c} received:`,ae),W.u_(ae)}})),$(T,LA.STAT_EVENT,(q=>{q.stat===Lg.PROXY?qe(oi,`RPC '${e}' stream ${c} detected buffering proxy`):q.stat===Lg.NOPROXY&&qe(oi,`RPC '${e}' stream ${c} detected no buffering proxy`)})),setTimeout((()=>{W.__()}),0),W}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function gg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(n){return new ZR(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e,t,s=1e3,c=1.5,h=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=c,this.R_=h,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),c=Math.max(0,t-s);c>0&&qe("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,c,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE="PersistentStream";class Pb{constructor(e,t,s,c,h,p,T,w){this.Mi=e,this.S_=s,this.b_=c,this.connection=h,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=T,this.listener=w,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Um(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ve.RESOURCE_EXHAUSTED?(Fa(t.toString()),Fa("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ve.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,c])=>{this.D_===t&&this.G_(s,c)}),(s=>{e((()=>{const c=new ze(ve.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(c)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((c=>{s((()=>this.z_(c)))})),this.stream.onMessage((c=>{s((()=>++this.F_==1?this.J_(c):this.onNext(c)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return qe(FE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(qe(FE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class W6 extends Pb{constructor(e,t,s,c,h,p){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,c,p),this.serializer=h}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=t6(this.serializer,e),s=(function(h){if(!("targetChange"in h))return ut.min();const p=h.targetChange;return p.targetIds&&p.targetIds.length?ut.min():p.readTime?es(p.readTime):ut.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Gg(this.serializer),t.addTarget=(function(h,p){let T;const w=p.target;if(T=jg(w)?{documents:r6(h,w)}:{query:i6(h,w).ft},T.targetId=p.targetId,p.resumeToken.approximateByteSize()>0){T.resumeToken=Ab(h,p.resumeToken);const E=zg(h,p.expectedCount);E!==null&&(T.expectedCount=E)}else if(p.snapshotVersion.compareTo(ut.min())>0){T.readTime=xd(h,p.snapshotVersion.toTimestamp());const E=zg(h,p.expectedCount);E!==null&&(T.expectedCount=E)}return T})(this.serializer,e);const s=a6(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Gg(this.serializer),t.removeTarget=e,this.q_(t)}}class K6 extends Pb{constructor(e,t,s,c,h,p){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,c,p),this.serializer=h}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return en(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,en(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){en(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=n6(e.writeResults,e.commitTime),s=es(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Gg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>Sb(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{}class Z6 extends Q6{constructor(e,t,s,c){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=c,this.ia=!1}sa(){if(this.ia)throw new ze(ve.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,p])=>this.connection.Go(e,Hg(t,s),c,h,p))).catch((h=>{throw h.name==="FirebaseError"?(h.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ze(ve.UNKNOWN,h.toString())}))}Ho(e,t,s,c,h){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([p,T])=>this.connection.Ho(e,Hg(t,s),c,p,T,h))).catch((p=>{throw p.name==="FirebaseError"?(p.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new ze(ve.UNKNOWN,p.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class J6{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Fa(t),this.aa=!1):qe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sl="RemoteStore";class $6{constructor(e,t,s,c,h){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=h,this.Aa.Oo((p=>{s.enqueueAndForget((async()=>{Ol(this)&&(qe(Sl,"Restarting streams for network reachability change."),await(async function(w){const E=mt(w);E.Ea.add(4),await gh(E),E.Ra.set("Unknown"),E.Ea.delete(4),await Qd(E)})(this))}))})),this.Ra=new J6(s,c)}}async function Qd(n){if(Ol(n))for(const e of n.da)await e(!0)}async function gh(n){for(const e of n.da)await e(!1)}function Lb(n,e){const t=mt(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),zm(t)?Fm(t):Fc(t).O_()&&jm(t,e))}function Vm(n,e){const t=mt(n),s=Fc(t);t.Ia.delete(e),s.O_()&&kb(t,e),t.Ia.size===0&&(s.O_()?s.L_():Ol(t)&&t.Ra.set("Unknown"))}function jm(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ut.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Fc(n).Y_(e)}function kb(n,e){n.Va.Ue(e),Fc(n).Z_(e)}function Fm(n){n.Va=new XR({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Fc(n).start(),n.Ra.ua()}function zm(n){return Ol(n)&&!Fc(n).x_()&&n.Ia.size>0}function Ol(n){return mt(n).Ea.size===0}function Bb(n){n.Va=void 0}async function e8(n){n.Ra.set("Online")}async function t8(n){n.Ia.forEach(((e,t)=>{jm(n,e)}))}async function n8(n,e){Bb(n),zm(n)?(n.Ra.ha(e),Fm(n)):n.Ra.set("Unknown")}async function r8(n,e,t){if(n.Ra.set("Online"),e instanceof wb&&e.state===2&&e.cause)try{await(async function(c,h){const p=h.cause;for(const T of h.targetIds)c.Ia.has(T)&&(await c.remoteSyncer.rejectListen(T,p),c.Ia.delete(T),c.Va.removeTarget(T))})(n,e)}catch(s){qe(Sl,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await _d(n,s)}else if(e instanceof Qf?n.Va.Ze(e):e instanceof _b?n.Va.st(e):n.Va.tt(e),!t.isEqual(ut.min()))try{const s=await Mb(n.localStore);t.compareTo(s)>=0&&await(function(h,p){const T=h.Va.Tt(p);return T.targetChanges.forEach(((w,E)=>{if(w.resumeToken.approximateByteSize()>0){const C=h.Ia.get(E);C&&h.Ia.set(E,C.withResumeToken(w.resumeToken,p))}})),T.targetMismatches.forEach(((w,E)=>{const C=h.Ia.get(w);if(!C)return;h.Ia.set(w,C.withResumeToken(Wr.EMPTY_BYTE_STRING,C.snapshotVersion)),kb(h,w);const I=new Ro(C.target,w,E,C.sequenceNumber);jm(h,I)})),h.remoteSyncer.applyRemoteEvent(T)})(n,t)}catch(s){qe(Sl,"Failed to raise snapshot:",s),await _d(n,s)}}async function _d(n,e,t){if(!jc(e))throw e;n.Ea.add(1),await gh(n),n.Ra.set("Offline"),t||(t=()=>Mb(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{qe(Sl,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Qd(n)}))}function Ub(n,e){return e().catch((t=>_d(n,t,e)))}async function Zd(n){const e=mt(n),t=Go(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:vm;for(;i8(e);)try{const c=await V6(e.localStore,s);if(c===null){e.Ta.length===0&&t.L_();break}s=c.batchId,s8(e,c)}catch(c){await _d(e,c)}Vb(e)&&jb(e)}function i8(n){return Ol(n)&&n.Ta.length<10}function s8(n,e){n.Ta.push(e);const t=Go(n);t.O_()&&t.X_&&t.ea(e.mutations)}function Vb(n){return Ol(n)&&!Go(n).x_()&&n.Ta.length>0}function jb(n){Go(n).start()}async function a8(n){Go(n).ra()}async function o8(n){const e=Go(n);for(const t of n.Ta)e.ea(t.mutations)}async function l8(n,e,t){const s=n.Ta.shift(),c=Om.from(s,e,t);await Ub(n,(()=>n.remoteSyncer.applySuccessfulWrite(c))),await Zd(n)}async function c8(n,e){e&&Go(n).X_&&await(async function(s,c){if((function(p){return yb(p)&&p!==ve.ABORTED})(c.code)){const h=s.Ta.shift();Go(s).B_(),await Ub(s,(()=>s.remoteSyncer.rejectFailedWrite(h.batchId,c))),await Zd(s)}})(n,e),Vb(n)&&jb(n)}async function zE(n,e){const t=mt(n);t.asyncQueue.verifyOperationInProgress(),qe(Sl,"RemoteStore received new credentials");const s=Ol(t);t.Ea.add(3),await gh(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Qd(t)}async function u8(n,e){const t=mt(n);e?(t.Ea.delete(2),await Qd(t)):e||(t.Ea.add(2),await gh(t),t.Ra.set("Unknown"))}function Fc(n){return n.ma||(n.ma=(function(t,s,c){const h=mt(t);return h.sa(),new W6(s,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,c)})(n.datastore,n.asyncQueue,{Xo:e8.bind(null,n),t_:t8.bind(null,n),r_:n8.bind(null,n),H_:r8.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),zm(n)?Fm(n):n.Ra.set("Unknown")):(await n.ma.stop(),Bb(n))}))),n.ma}function Go(n){return n.fa||(n.fa=(function(t,s,c){const h=mt(t);return h.sa(),new K6(s,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,c)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:a8.bind(null,n),r_:c8.bind(null,n),ta:o8.bind(null,n),na:l8.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Zd(n)):(await n.fa.stop(),n.Ta.length>0&&(qe(Sl,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e,t,s,c,h){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=c,this.removalCallback=h,this.deferred=new Ys,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((p=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,c,h){const p=Date.now()+s,T=new Hm(e,t,p,c,h);return T.start(s),T}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ze(ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gm(n,e){if(Fa("AsyncQueue",`${e}: ${n}`),jc(n))return new ze(ve.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{static emptySet(e){return new Ec(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||tt.comparator(t.key,s.key):(t,s)=>tt.comparator(t.key,s.key),this.keyedMap=Mu(),this.sortedSet=new Kn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ec)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const c=t.getNext().key,h=s.getNext().key;if(!c.isEqual(h))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Ec;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(){this.ga=new Kn(tt.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):st(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Rc{constructor(e,t,s,c,h,p,T,w,E){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=c,this.mutatedKeys=h,this.fromCache=p,this.syncStateChanged=T,this.excludesMetadataChanges=w,this.hasCachedResults=E}static fromInitialDocuments(e,t,s,c,h){const p=[];return t.forEach((T=>{p.push({type:0,doc:T})})),new Rc(e,t,Ec.emptySet(t),p,s,c,!0,!1,h)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let c=0;c<t.length;c++)if(t[c].type!==s[c].type||!t[c].doc.isEqual(s[c].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h8{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class f8{constructor(){this.queries=GE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const c=mt(t),h=c.queries;c.queries=GE(),h.forEach(((p,T)=>{for(const w of T.Sa)w.onError(s)}))})(this,new ze(ve.ABORTED,"Firestore shutting down"))}}function GE(){return new Rl((n=>sb(n)),Gd)}async function qm(n,e){const t=mt(n);let s=3;const c=e.query;let h=t.queries.get(c);h?!h.ba()&&e.Da()&&(s=2):(h=new h8,s=e.Da()?0:1);try{switch(s){case 0:h.wa=await t.onListen(c,!0);break;case 1:h.wa=await t.onListen(c,!1);break;case 2:await t.onFirstRemoteStoreListen(c)}}catch(p){const T=Gm(p,`Initialization of query '${uc(e.query)}' failed`);return void e.onError(T)}t.queries.set(c,h),h.Sa.push(e),e.va(t.onlineState),h.wa&&e.Fa(h.wa)&&Xm(t)}async function Ym(n,e){const t=mt(n),s=e.query;let c=3;const h=t.queries.get(s);if(h){const p=h.Sa.indexOf(e);p>=0&&(h.Sa.splice(p,1),h.Sa.length===0?c=e.Da()?0:1:!h.ba()&&e.Da()&&(c=2))}switch(c){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function d8(n,e){const t=mt(n);let s=!1;for(const c of e){const h=c.query,p=t.queries.get(h);if(p){for(const T of p.Sa)T.Fa(c)&&(s=!0);p.wa=c}}s&&Xm(t)}function g8(n,e,t){const s=mt(n),c=s.queries.get(e);if(c)for(const h of c.Sa)h.onError(t);s.queries.delete(e)}function Xm(n){n.Ca.forEach((e=>{e.next()}))}var Xg,qE;(qE=Xg||(Xg={})).Ma="default",qE.Cache="cache";class Wm{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const c of e.docChanges)c.type!==3&&s.push(c);e=new Rc(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Rc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Xg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(e){this.key=e}}class zb{constructor(e){this.key=e}}class m8{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Gt(),this.mutatedKeys=Gt(),this.eu=ab(e),this.tu=new Ec(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new HE,c=t?t.tu:this.tu;let h=t?t.mutatedKeys:this.mutatedKeys,p=c,T=!1;const w=this.query.limitType==="F"&&c.size===this.query.limit?c.last():null,E=this.query.limitType==="L"&&c.size===this.query.limit?c.first():null;if(e.inorderTraversal(((C,I)=>{const M=c.get(C),B=qd(this.query,I)?I:null,W=!!M&&this.mutatedKeys.has(M.key),$=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let q=!1;M&&B?M.data.isEqual(B.data)?W!==$&&(s.track({type:3,doc:B}),q=!0):this.su(M,B)||(s.track({type:2,doc:B}),q=!0,(w&&this.eu(B,w)>0||E&&this.eu(B,E)<0)&&(T=!0)):!M&&B?(s.track({type:0,doc:B}),q=!0):M&&!B&&(s.track({type:1,doc:M}),q=!0,(w||E)&&(T=!0)),q&&(B?(p=p.add(B),h=$?h.add(C):h.delete(C)):(p=p.delete(C),h=h.delete(C)))})),this.query.limit!==null)for(;p.size>this.query.limit;){const C=this.query.limitType==="F"?p.last():p.first();p=p.delete(C.key),h=h.delete(C.key),s.track({type:1,doc:C})}return{tu:p,iu:s,Cs:T,mutatedKeys:h}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,c){const h=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const p=e.iu.ya();p.sort(((C,I)=>(function(B,W){const $=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st(20277,{Rt:q})}};return $(B)-$(W)})(C.type,I.type)||this.eu(C.doc,I.doc))),this.ou(s),c=c??!1;const T=t&&!c?this._u():[],w=this.Xa.size===0&&this.current&&!c?1:0,E=w!==this.Za;return this.Za=w,p.length!==0||E?{snapshot:new Rc(this.query,e.tu,h,p,e.mutatedKeys,w===0,E,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:T}:{au:T}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new HE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Gt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new zb(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new Fb(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=Gt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Rc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Km="SyncEngine";class p8{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class x8{constructor(e){this.key=e,this.hu=!1}}class y8{constructor(e,t,s,c,h,p){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=c,this.currentUser=h,this.maxConcurrentLimboResolutions=p,this.Pu={},this.Tu=new Rl((T=>sb(T)),Gd),this.Iu=new Map,this.Eu=new Set,this.du=new Kn(tt.comparator),this.Au=new Map,this.Ru=new Pm,this.Vu={},this.mu=new Map,this.fu=Nc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function E8(n,e,t=!0){const s=Wb(n);let c;const h=s.Tu.get(e);return h?(s.sharedClientState.addLocalQueryTarget(h.targetId),c=h.view.lu()):c=await Hb(s,e,t,!0),c}async function _8(n,e){const t=Wb(n);await Hb(t,e,!0,!1)}async function Hb(n,e,t,s){const c=await j6(n.localStore,Xs(e)),h=c.targetId,p=n.sharedClientState.addLocalQueryTarget(h,t);let T;return s&&(T=await w8(n,e,h,p==="current",c.resumeToken)),n.isPrimaryClient&&t&&Lb(n.remoteStore,c),T}async function w8(n,e,t,s,c){n.pu=(I,M,B)=>(async function($,q,_e,ae){let Q=q.view.ru(_e);Q.Cs&&(Q=await BE($.localStore,q.query,!1).then((({documents:j})=>q.view.ru(j,Q))));const le=ae&&ae.targetChanges.get(q.targetId),De=ae&&ae.targetMismatches.get(q.targetId)!=null,Oe=q.view.applyChanges(Q,$.isPrimaryClient,le,De);return XE($,q.targetId,Oe.au),Oe.snapshot})(n,I,M,B);const h=await BE(n.localStore,e,!0),p=new m8(e,h.Qs),T=p.ru(h.documents),w=dh.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",c),E=p.applyChanges(T,n.isPrimaryClient,w);XE(n,t,E.au);const C=new p8(e,t,p);return n.Tu.set(e,C),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),E.snapshot}async function A8(n,e,t){const s=mt(n),c=s.Tu.get(e),h=s.Iu.get(c.targetId);if(h.length>1)return s.Iu.set(c.targetId,h.filter((p=>!Gd(p,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(c.targetId),s.sharedClientState.isActiveQueryTarget(c.targetId)||await qg(s.localStore,c.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(c.targetId),t&&Vm(s.remoteStore,c.targetId),Wg(s,c.targetId)})).catch(Vc)):(Wg(s,c.targetId),await qg(s.localStore,c.targetId,!0))}async function b8(n,e){const t=mt(n),s=t.Tu.get(e),c=t.Iu.get(s.targetId);t.isPrimaryClient&&c.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Vm(t.remoteStore,s.targetId))}async function T8(n,e,t){const s=O8(n);try{const c=await(function(p,T){const w=mt(p),E=Pn.now(),C=T.reduce(((B,W)=>B.add(W.key)),Gt());let I,M;return w.persistence.runTransaction("Locally write mutations","readwrite",(B=>{let W=za(),$=Gt();return w.Ns.getEntries(B,C).next((q=>{W=q,W.forEach(((_e,ae)=>{ae.isValidDocument()||($=$.add(_e))}))})).next((()=>w.localDocuments.getOverlayedDocuments(B,W))).next((q=>{I=q;const _e=[];for(const ae of T){const Q=FR(ae,I.get(ae.key).overlayedDocument);Q!=null&&_e.push(new Xo(ae.key,Q,ZA(Q.value.mapValue),Rr.exists(!0)))}return w.mutationQueue.addMutationBatch(B,E,_e,T)})).next((q=>{M=q;const _e=q.applyToLocalDocumentSet(I,$);return w.documentOverlayCache.saveOverlays(B,q.batchId,_e)}))})).then((()=>({batchId:M.batchId,changes:lb(I)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(c.batchId),(function(p,T,w){let E=p.Vu[p.currentUser.toKey()];E||(E=new Kn(Ht)),E=E.insert(T,w),p.Vu[p.currentUser.toKey()]=E})(s,c.batchId,t),await mh(s,c.changes),await Zd(s.remoteStore)}catch(c){const h=Gm(c,"Failed to persist write");t.reject(h)}}async function Gb(n,e){const t=mt(n);try{const s=await B6(t.localStore,e);e.targetChanges.forEach(((c,h)=>{const p=t.Au.get(h);p&&(en(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1,22616),c.addedDocuments.size>0?p.hu=!0:c.modifiedDocuments.size>0?en(p.hu,14607):c.removedDocuments.size>0&&(en(p.hu,42227),p.hu=!1))})),await mh(t,s,e)}catch(s){await Vc(s)}}function YE(n,e,t){const s=mt(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const c=[];s.Tu.forEach(((h,p)=>{const T=p.view.va(e);T.snapshot&&c.push(T.snapshot)})),(function(p,T){const w=mt(p);w.onlineState=T;let E=!1;w.queries.forEach(((C,I)=>{for(const M of I.Sa)M.va(T)&&(E=!0)})),E&&Xm(w)})(s.eventManager,e),c.length&&s.Pu.H_(c),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function v8(n,e,t){const s=mt(n);s.sharedClientState.updateQueryState(e,"rejected",t);const c=s.Au.get(e),h=c&&c.key;if(h){let p=new Kn(tt.comparator);p=p.insert(h,Br.newNoDocument(h,ut.min()));const T=Gt().add(h),w=new Wd(ut.min(),new Map,new Kn(Ht),p,T);await Gb(s,w),s.du=s.du.remove(h),s.Au.delete(e),Qm(s)}else await qg(s.localStore,e,!1).then((()=>Wg(s,e,t))).catch(Vc)}async function S8(n,e){const t=mt(n),s=e.batch.batchId;try{const c=await k6(t.localStore,e);Yb(t,s,null),qb(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await mh(t,c)}catch(c){await Vc(c)}}async function C8(n,e,t){const s=mt(n);try{const c=await(function(p,T){const w=mt(p);return w.persistence.runTransaction("Reject batch","readwrite-primary",(E=>{let C;return w.mutationQueue.lookupMutationBatch(E,T).next((I=>(en(I!==null,37113),C=I.keys(),w.mutationQueue.removeMutationBatch(E,I)))).next((()=>w.mutationQueue.performConsistencyCheck(E))).next((()=>w.documentOverlayCache.removeOverlaysForBatchId(E,C,T))).next((()=>w.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(E,C))).next((()=>w.localDocuments.getDocuments(E,C)))}))})(s.localStore,e);Yb(s,e,t),qb(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await mh(s,c)}catch(c){await Vc(c)}}function qb(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Yb(n,e,t){const s=mt(n);let c=s.Vu[s.currentUser.toKey()];if(c){const h=c.get(e);h&&(t?h.reject(t):h.resolve(),c=c.remove(e)),s.Vu[s.currentUser.toKey()]=c}}function Wg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||Xb(n,s)}))}function Xb(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Vm(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Qm(n))}function XE(n,e,t){for(const s of t)s instanceof Fb?(n.Ru.addReference(s.key,e),I8(n,s)):s instanceof zb?(qe(Km,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||Xb(n,s.key)):st(19791,{wu:s})}function I8(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(qe(Km,"New document in limbo: "+t),n.Eu.add(s),Qm(n))}function Qm(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new tt(_n.fromString(e)),s=n.fu.next();n.Au.set(s,new x8(t)),n.du=n.du.insert(t,s),Lb(n.remoteStore,new Ro(Xs(Hd(t.path)),s,"TargetPurposeLimboResolution",Fd.ce))}}async function mh(n,e,t){const s=mt(n),c=[],h=[],p=[];s.Tu.isEmpty()||(s.Tu.forEach(((T,w)=>{p.push(s.pu(w,e,t).then((E=>{var C;if((E||t)&&s.isPrimaryClient){const I=E?!E.fromCache:(C=t==null?void 0:t.targetChanges.get(w.targetId))==null?void 0:C.current;s.sharedClientState.updateQueryState(w.targetId,I?"current":"not-current")}if(E){c.push(E);const I=km.As(w.targetId,E);h.push(I)}})))})),await Promise.all(p),s.Pu.H_(c),await(async function(w,E){const C=mt(w);try{await C.persistence.runTransaction("notifyLocalViewChanges","readwrite",(I=>Ne.forEach(E,(M=>Ne.forEach(M.Es,(B=>C.persistence.referenceDelegate.addReference(I,M.targetId,B))).next((()=>Ne.forEach(M.ds,(B=>C.persistence.referenceDelegate.removeReference(I,M.targetId,B)))))))))}catch(I){if(!jc(I))throw I;qe(Bm,"Failed to update sequence numbers: "+I)}for(const I of E){const M=I.targetId;if(!I.fromCache){const B=C.Ms.get(M),W=B.snapshotVersion,$=B.withLastLimboFreeSnapshotVersion(W);C.Ms=C.Ms.insert(M,$)}}})(s.localStore,h))}async function N8(n,e){const t=mt(n);if(!t.currentUser.isEqual(e)){qe(Km,"User change. New user:",e.toKey());const s=await Db(t.localStore,e);t.currentUser=e,(function(h,p){h.mu.forEach((T=>{T.forEach((w=>{w.reject(new ze(ve.CANCELLED,p))}))})),h.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await mh(t,s.Ls)}}function R8(n,e){const t=mt(n),s=t.Au.get(e);if(s&&s.hu)return Gt().add(s.key);{let c=Gt();const h=t.Iu.get(e);if(!h)return c;for(const p of h){const T=t.Tu.get(p);c=c.unionWith(T.view.nu)}return c}}function Wb(n){const e=mt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Gb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=R8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=v8.bind(null,e),e.Pu.H_=d8.bind(null,e.eventManager),e.Pu.yu=g8.bind(null,e.eventManager),e}function O8(n){const e=mt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=S8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=C8.bind(null,e),e}class wd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Kd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return L6(this.persistence,new D6,e.initialUser,this.serializer)}Cu(e){return new Ob(Lm.mi,this.serializer)}Du(e){return new z6}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wd.provider={build:()=>new wd};class D8 extends wd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){en(this.persistence.referenceDelegate instanceof Ed,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new x6(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Li.withCacheSize(this.cacheSizeBytes):Li.DEFAULT;return new Ob((s=>Ed.mi(s,t)),this.serializer)}}class Kg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>YE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=N8.bind(null,this.syncEngine),await u8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new f8})()}createDatastore(e){const t=Kd(e.databaseInfo.databaseId),s=(function(h){return new X6(h)})(e.databaseInfo);return(function(h,p,T,w){return new Z6(h,p,T,w)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,c,h,p,T){return new $6(s,c,h,p,T)})(this.localStore,this.datastore,e.asyncQueue,(t=>YE(this.syncEngine,t,0)),(function(){return jE.v()?new jE:new H6})())}createSyncEngine(e,t){return(function(c,h,p,T,w,E,C){const I=new y8(c,h,p,T,w,E);return C&&(I.gu=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(c){const h=mt(c);qe(Sl,"RemoteStore shutting down."),h.Ea.add(5),await gh(h),h.Aa.shutdown(),h.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Kg.provider={build:()=>new Kg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Fa("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M8{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ze(ve.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(c,h){const p=mt(c),T={documents:h.map((I=>yd(p.serializer,I)))},w=await p.Ho("BatchGetDocuments",p.serializer.databaseId,_n.emptyPath(),T,h.length),E=new Map;w.forEach((I=>{const M=e6(p.serializer,I);E.set(M.key.toString(),M)}));const C=[];return h.forEach((I=>{const M=E.get(I.toString());en(!!M,55234,{key:I}),C.push(M)})),C})(this.datastore,e);return t.forEach((s=>this.recordVersion(s))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new fh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,s)=>{const c=tt.fromPath(s);this.mutations.push(new xb(c,this.precondition(c)))})),await(async function(s,c){const h=mt(s),p={writes:c.map((T=>Sb(h.serializer,T)))};await h.Go("Commit",h.serializer.databaseId,_n.emptyPath(),p)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw st(50498,{Gu:e.constructor.name});t=ut.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new ze(ve.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ut.min())?Rr.exists(!1):Rr.updateTime(t):Rr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ut.min()))throw new ze(ve.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Rr.updateTime(t)}return Rr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P8{constructor(e,t,s,c,h){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=c,this.deferred=h,this.zu=s.maxAttempts,this.M_=new Um(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new M8(this.datastore),t=this.Hu(e);t&&t.then((s=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(s)})).catch((c=>{this.Yu(c)}))))})).catch((s=>{this.Yu(s)}))}))}Hu(e){try{const t=this.updateFunction(e);return!ch(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!yb(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo="FirestoreClient";class L8{constructor(e,t,s,c,h){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=c,this.user=li.UNAUTHENTICATED,this.clientId=Tm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=h,this.authCredentials.start(s,(async p=>{qe(qo,"Received user=",p.uid),await this.authCredentialListener(p),this.user=p})),this.appCheckCredentials.start(s,(p=>(qe(qo,"Received new app check token=",p),this.appCheckCredentialListener(p,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ys;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Gm(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function mg(n,e){n.asyncQueue.verifyOperationInProgress(),qe(qo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async c=>{s.isEqual(c)||(await Db(e.localStore,c),s=c)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function WE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await k8(n);qe(qo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>zE(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,c)=>zE(e.remoteStore,c))),n._onlineComponents=e}async function k8(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){qe(qo,"Using user provided OfflineComponentProvider");try{await mg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(c){return c.name==="FirebaseError"?c.code===ve.FAILED_PRECONDITION||c.code===ve.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||c.code===22||c.code===20||c.code===11})(t))throw t;vc("Error using user provided cache. Falling back to memory cache: "+t),await mg(n,new wd)}}else qe(qo,"Using default OfflineComponentProvider"),await mg(n,new D8(void 0));return n._offlineComponents}async function Jm(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(qe(qo,"Using user provided OnlineComponentProvider"),await WE(n,n._uninitializedComponentsProvider._online)):(qe(qo,"Using default OnlineComponentProvider"),await WE(n,new Kg))),n._onlineComponents}function B8(n){return Jm(n).then((e=>e.syncEngine))}function U8(n){return Jm(n).then((e=>e.datastore))}async function Ad(n){const e=await Jm(n),t=e.eventManager;return t.onListen=E8.bind(null,e.syncEngine),t.onUnlisten=A8.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=_8.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=b8.bind(null,e.syncEngine),t}function V8(n,e,t={}){const s=new Ys;return n.asyncQueue.enqueueAndForget((async()=>(function(h,p,T,w,E){const C=new Zm({next:M=>{C.Nu(),p.enqueueAndForget((()=>Ym(h,I)));const B=M.docs.has(T);!B&&M.fromCache?E.reject(new ze(ve.UNAVAILABLE,"Failed to get document because the client is offline.")):B&&M.fromCache&&w&&w.source==="server"?E.reject(new ze(ve.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(M)},error:M=>E.reject(M)}),I=new Wm(Hd(T.path),C,{includeMetadataChanges:!0,qa:!0});return qm(h,I)})(await Ad(n),n.asyncQueue,e,t,s))),s.promise}function j8(n,e,t={}){const s=new Ys;return n.asyncQueue.enqueueAndForget((async()=>(function(h,p,T,w,E){const C=new Zm({next:M=>{C.Nu(),p.enqueueAndForget((()=>Ym(h,I))),M.fromCache&&w.source==="server"?E.reject(new ze(ve.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):E.resolve(M)},error:M=>E.reject(M)}),I=new Wm(T,C,{includeMetadataChanges:!0,qa:!0});return qm(h,I)})(await Ad(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb="firestore.googleapis.com",QE=!0;class ZE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ze(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Qb,this.ssl=QE}else this.host=e.host,this.ssl=e.ssl??QE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Rb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<m6)throw new ze(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}tR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Kb(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ze(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ze(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ze(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,c){return s.timeoutSeconds===c.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jd{constructor(e,t,s,c){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=c,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ZE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ze(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ze(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ZE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new q4;switch(s.type){case"firstParty":return new K4(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ze(ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=KE.get(t);s&&(qe("ComponentProvider","Removing Datastore"),KE.delete(t),s.terminate())})(this),Promise.resolve()}}function F8(n,e,t,s={}){var E;n=bi(n,Jd);const c=kc(e),h=n._getSettings(),p={...h,emulatorOptions:n._getEmulatorOptions()},T=`${e}:${t}`;c&&(TA(`https://${T}`),vA("Firestore",!0)),h.host!==Qb&&h.host!==T&&vc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const w={...h,host:T,ssl:c,emulatorOptions:s};if(!bl(w,p)&&(n._setSettings(w),s.mockUserToken)){let C,I;if(typeof s.mockUserToken=="string")C=s.mockUserToken,I=li.MOCK_USER;else{C=yN(s.mockUserToken,(E=n._app)==null?void 0:E.options.projectId);const M=s.mockUserToken.sub||s.mockUserToken.user_id;if(!M)throw new ze(ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");I=new li(M)}n._authCredentials=new Y4(new VA(C,I))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Wo(this.firestore,e,this._query)}}class Wn{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wn(this.firestore,e,this._key)}toJSON(){return{type:Wn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(lh(t,Wn._jsonSchema))return new Wn(e,s||null,new tt(_n.fromString(t.referencePath)))}}Wn._jsonSchemaVersion="firestore/documentReference/1.0",Wn._jsonSchema={type:Ar("string",Wn._jsonSchemaVersion),referencePath:Ar("string")};class Bo extends Wo{constructor(e,t,s){super(e,t,Hd(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wn(this.firestore,null,new tt(e))}withConverter(e){return new Bo(this.firestore,e,this._path)}}function rs(n,e,...t){if(n=hr(n),jA("collection","path",e),n instanceof Jd){const s=_n.fromString(e,...t);return uE(s),new Bo(n,null,s)}{if(!(n instanceof Wn||n instanceof Bo))throw new ze(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(_n.fromString(e,...t));return uE(s),new Bo(n.firestore,null,s)}}function Cn(n,e,...t){if(n=hr(n),arguments.length===1&&(e=Tm.newId()),jA("doc","path",e),n instanceof Jd){const s=_n.fromString(e,...t);return cE(s),new Wn(n,null,new tt(s))}{if(!(n instanceof Wn||n instanceof Bo))throw new ze(ve.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(_n.fromString(e,...t));return cE(s),new Wn(n.firestore,n instanceof Bo?n.converter:null,new tt(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE="AsyncQueue";class $E{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Um(this,"async_queue_retry"),this._c=()=>{const s=gg();s&&qe(JE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=gg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=gg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ys;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!jc(e))throw e;qe(JE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Fa("INTERNAL UNHANDLED ERROR: ",e_(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const c=Hm.createAndSchedule(this,e,t,s,(h=>this.hc(h)));return this.tc.push(c),c}uc(){this.nc&&st(47125,{Pc:e_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function e_(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t_(n){return(function(t,s){if(typeof t!="object"||t===null)return!1;const c=t;for(const h of s)if(h in c&&typeof c[h]=="function")return!0;return!1})(n,["next","error","complete"])}class ta extends Jd{constructor(e,t,s,c){super(e,t,s,c),this.type="firestore",this._queue=new $E,this._persistenceKey=(c==null?void 0:c.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $E(e),this._firestoreClient=void 0,await e}}}function z8(n,e){const t=typeof n=="object"?n:NA(),s=typeof n=="string"?n:ud,c=Am(t,"firestore").getImmediate({identifier:s});if(!c._initialized){const h=pN("firestore");h&&F8(c,...h)}return c}function zc(n){if(n._terminated)throw new ze(ve.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||H8(n),n._firestoreClient}function H8(n){var s,c,h;const e=n._freezeSettings(),t=(function(T,w,E,C){return new fR(T,w,E,C.host,C.ssl,C.experimentalForceLongPolling,C.experimentalAutoDetectLongPolling,Kb(C.experimentalLongPollingOptions),C.useFetchStreams,C.isUsingEmulator)})(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(c=e.localCache)!=null&&c._offlineComponentProvider&&((h=e.localCache)!=null&&h._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new L8(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(T){const w=T==null?void 0:T._online.build();return{_offline:T==null?void 0:T._offline.build(w),_online:w}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ji(Wr.fromBase64String(e))}catch(t){throw new ze(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ji(Wr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ji._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(lh(e,Ji._jsonSchema))return Ji.fromBase64String(e.bytes)}}Ji._jsonSchemaVersion="firestore/bytes/1.0",Ji._jsonSchema={type:Ar("string",Ji._jsonSchemaVersion),bytes:Ar("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ze(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ze(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ze(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ht(this._lat,e._lat)||Ht(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ws._jsonSchemaVersion}}static fromJSON(e){if(lh(e,Ws._jsonSchema))return new Ws(e.latitude,e.longitude)}}Ws._jsonSchemaVersion="firestore/geoPoint/1.0",Ws._jsonSchema={type:Ar("string",Ws._jsonSchemaVersion),latitude:Ar("number"),longitude:Ar("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,c){if(s.length!==c.length)return!1;for(let h=0;h<s.length;++h)if(s[h]!==c[h])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ks._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(lh(e,Ks._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ks(e.vectorValues);throw new ze(ve.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ks._jsonSchemaVersion="firestore/vectorValue/1.0",Ks._jsonSchema={type:Ar("string",Ks._jsonSchemaVersion),vectorValues:Ar("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G8=/^__.*__$/;class q8{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Xo(e,this.data,this.fieldMask,t,this.fieldTransforms):new hh(e,this.data,t,this.fieldTransforms)}}class Zb{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Xo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Jb(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st(40011,{Ac:n})}}class ep{constructor(e,t,s,c,h,p){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=c,h===void 0&&this.Rc(),this.fieldTransforms=h||[],this.fieldMask=p||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ep({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var c;const t=(c=this.path)==null?void 0:c.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var c;const t=(c=this.path)==null?void 0:c.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return bd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Jb(this.Ac)&&G8.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Y8{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Kd(e)}Cc(e,t,s,c=!1){return new ep({Ac:e,methodName:t,Dc:s,path:Xr.emptyPath(),fc:!1,bc:c},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ph(n){const e=n._freezeSettings(),t=Kd(n._databaseId);return new Y8(n._databaseId,!!e.ignoreUndefinedProperties,t)}function tp(n,e,t,s,c,h={}){const p=n.Cc(h.merge||h.mergeFields?2:0,e,t,c);ip("Data must be an object, but it was:",p,s);const T=$b(s,p);let w,E;if(h.merge)w=new $i(p.fieldMask),E=p.fieldTransforms;else if(h.mergeFields){const C=[];for(const I of h.mergeFields){const M=Qg(e,I,t);if(!p.contains(M))throw new ze(ve.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);tT(C,M)||C.push(M)}w=new $i(C),E=p.fieldTransforms.filter((I=>w.covers(I.field)))}else w=null,E=p.fieldTransforms;return new q8(new Ai(T),w,E)}class $d extends $m{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $d}}function np(n,e,t,s){const c=n.Cc(1,e,t);ip("Data must be an object, but it was:",c,s);const h=[],p=Ai.empty();Yo(s,((w,E)=>{const C=sp(e,w,t);E=hr(E);const I=c.yc(C);if(E instanceof $d)h.push(C);else{const M=xh(E,I);M!=null&&(h.push(C),p.set(C,M))}}));const T=new $i(h);return new Zb(p,T,c.fieldTransforms)}function rp(n,e,t,s,c,h){const p=n.Cc(1,e,t),T=[Qg(e,s,t)],w=[c];if(h.length%2!=0)throw new ze(ve.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let M=0;M<h.length;M+=2)T.push(Qg(e,h[M])),w.push(h[M+1]);const E=[],C=Ai.empty();for(let M=T.length-1;M>=0;--M)if(!tT(E,T[M])){const B=T[M];let W=w[M];W=hr(W);const $=p.yc(B);if(W instanceof $d)E.push(B);else{const q=xh(W,$);q!=null&&(E.push(B),C.set(B,q))}}const I=new $i(E);return new Zb(C,I,p.fieldTransforms)}function X8(n,e,t,s=!1){return xh(t,n.Cc(s?4:3,e))}function xh(n,e){if(eT(n=hr(n)))return ip("Unsupported field value:",e,n),$b(n,e);if(n instanceof $m)return(function(s,c){if(!Jb(c.Ac))throw c.Sc(`${s._methodName}() can only be used with update() and set()`);if(!c.path)throw c.Sc(`${s._methodName}() is not currently supported inside arrays`);const h=s._toFieldTransform(c);h&&c.fieldTransforms.push(h)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,c){const h=[];let p=0;for(const T of s){let w=xh(T,c.wc(p));w==null&&(w={nullValue:"NULL_VALUE"}),h.push(w),p++}return{arrayValue:{values:h}}})(n,e)}return(function(s,c){if((s=hr(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return LR(c.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const h=Pn.fromDate(s);return{timestampValue:xd(c.serializer,h)}}if(s instanceof Pn){const h=new Pn(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:xd(c.serializer,h)}}if(s instanceof Ws)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ji)return{bytesValue:Ab(c.serializer,s._byteString)};if(s instanceof Wn){const h=c.databaseId,p=s.firestore._databaseId;if(!p.isEqual(h))throw c.Sc(`Document reference is for database ${p.projectId}/${p.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:Mm(s.firestore._databaseId||c.databaseId,s._key.path)}}if(s instanceof Ks)return(function(p,T){return{mapValue:{fields:{[KA]:{stringValue:QA},[hd]:{arrayValue:{values:p.toArray().map((E=>{if(typeof E!="number")throw T.Sc("VectorValues must only contain numeric values.");return Rm(T.serializer,E)}))}}}}}})(s,c);throw c.Sc(`Unsupported field value: ${jd(s)}`)})(n,e)}function $b(n,e){const t={};return HA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yo(n,((s,c)=>{const h=xh(c,e.mc(s));h!=null&&(t[s]=h)})),{mapValue:{fields:t}}}function eT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Pn||n instanceof Ws||n instanceof Ji||n instanceof Wn||n instanceof $m||n instanceof Ks)}function ip(n,e,t){if(!eT(t)||!FA(t)){const s=jd(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function Qg(n,e,t){if((e=hr(e))instanceof Hc)return e._internalPath;if(typeof e=="string")return sp(n,e);throw bd("Field path arguments must be of type string or ",n,!1,void 0,t)}const W8=new RegExp("[~\\*/\\[\\]]");function sp(n,e,t){if(e.search(W8)>=0)throw bd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Hc(...e.split("."))._internalPath}catch{throw bd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function bd(n,e,t,s,c){const h=s&&!s.isEmpty(),p=c!==void 0;let T=`Function ${e}() called with invalid data`;t&&(T+=" (via `toFirestore()`)"),T+=". ";let w="";return(h||p)&&(w+=" (found",h&&(w+=` in field ${s}`),p&&(w+=` in document ${c}`),w+=")"),new ze(ve.INVALID_ARGUMENT,T+n+w)}function tT(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,t,s,c,h){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=c,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new Wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new K8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ap("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class K8 extends Td{data(){return super.data()}}function ap(n,e){return typeof e=="string"?sp(n,e):e instanceof Hc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nT(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ze(ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class op{}class rT extends op{}function e0(n,e,...t){let s=[];e instanceof op&&s.push(e),s=s.concat(t),(function(h){const p=h.filter((w=>w instanceof lp)).length,T=h.filter((w=>w instanceof t0)).length;if(p>1||p>0&&T>0)throw new ze(ve.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const c of s)n=c._apply(n);return n}class t0 extends rT{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new t0(e,t,s)}_apply(e){const t=this._parse(e);return iT(e._query,t),new Wo(e.firestore,e.converter,Fg(e._query,t))}_parse(e){const t=ph(e.firestore);return(function(h,p,T,w,E,C,I){let M;if(E.isKeyField()){if(C==="array-contains"||C==="array-contains-any")throw new ze(ve.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if(C==="in"||C==="not-in"){r_(I,C);const W=[];for(const $ of I)W.push(n_(w,h,$));M={arrayValue:{values:W}}}else M=n_(w,h,I)}else C!=="in"&&C!=="not-in"&&C!=="array-contains-any"||r_(I,C),M=X8(T,p,I,C==="in"||C==="not-in");return wr.create(E,C,M)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Gu(n,e,t){const s=e,c=ap("where",n);return t0._create(c,s,t)}class lp extends op{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new lp(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:Ds.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(c,h){let p=c;const T=h.getFlattenedFilters();for(const w of T)iT(p,w),p=Fg(p,w)})(e._query,t),new Wo(e.firestore,e.converter,Fg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class cp extends rT{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new cp(e,t,s)}_apply(e){return new Wo(e.firestore,e.converter,gd(e._query,this._limit,this._limitType))}}function Q8(n){return cp._create("limit",n,"F")}function n_(n,e,t){if(typeof(t=hr(t))=="string"){if(t==="")throw new ze(ve.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ib(e)&&t.indexOf("/")!==-1)throw new ze(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(_n.fromString(t));if(!tt.isDocumentKey(s))throw new ze(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return yE(n,new tt(s))}if(t instanceof Wn)return yE(n,t._key);throw new ze(ve.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jd(t)}.`)}function r_(n,e){if(!Array.isArray(n)||n.length===0)throw new ze(ve.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function iT(n,e){const t=(function(c,h){for(const p of c)for(const T of p.getFlattenedFilters())if(h.indexOf(T.op)>=0)return T.op;return null})(n.filters,(function(c){switch(c){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ze(ve.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ze(ve.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class sT{convertValue(e,t="none"){switch(Ho(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ur(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(zo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw st(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Yo(e,((c,h)=>{s[c]=this.convertValue(h,t)})),s}convertVectorValue(e){var s,c,h;const t=(h=(c=(s=e.fields)==null?void 0:s[hd].arrayValue)==null?void 0:c.values)==null?void 0:h.map((p=>ur(p.doubleValue)));return new Ks(t)}convertGeoPoint(e){return new Ws(ur(e.latitude),ur(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=zd(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Ju(e));default:return null}}convertTimestamp(e){const t=Fo(e);return new Pn(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=_n.fromString(e);en(Nb(s),9688,{name:e});const c=new $u(s.get(1),s.get(3)),h=new tt(s.popFirst(5));return c.isEqual(t)||Fa(`Document ${h} contains a document reference within a different database (${c.projectId}/${c.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class Z8 extends sT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ji(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,t)}}class gc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Uo extends Td{constructor(e,t,s,c,h,p){super(e,t,s,c,p),this._firestore=e,this._firestoreImpl=e,this.metadata=h}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Zf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(ap("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ze(ve.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Uo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Uo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Uo._jsonSchema={type:Ar("string",Uo._jsonSchemaVersion),bundleSource:Ar("string","DocumentSnapshot"),bundleName:Ar("string"),bundle:Ar("string")};class Zf extends Uo{data(e={}){return super.data(e)}}class Al{constructor(e,t,s,c){this._firestore=e,this._userDataWriter=t,this._snapshot=c,this.metadata=new gc(c.hasPendingWrites,c.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Zf(this._firestore,this._userDataWriter,s.key,s,new gc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ze(ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(c,h){if(c._snapshot.oldDocs.isEmpty()){let p=0;return c._snapshot.docChanges.map((T=>{const w=new Zf(c._firestore,c._userDataWriter,T.doc.key,T.doc,new gc(c._snapshot.mutatedKeys.has(T.doc.key),c._snapshot.fromCache),c.query.converter);return T.doc,{type:"added",doc:w,oldIndex:-1,newIndex:p++}}))}{let p=c._snapshot.oldDocs;return c._snapshot.docChanges.filter((T=>h||T.type!==3)).map((T=>{const w=new Zf(c._firestore,c._userDataWriter,T.doc.key,T.doc,new gc(c._snapshot.mutatedKeys.has(T.doc.key),c._snapshot.fromCache),c.query.converter);let E=-1,C=-1;return T.type!==0&&(E=p.indexOf(T.doc.key),p=p.delete(T.doc.key)),T.type!==1&&(p=p.add(T.doc),C=p.indexOf(T.doc.key)),{type:J8(T.type),doc:w,oldIndex:E,newIndex:C}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ze(ve.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Al._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Tm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],c=[];return this.docs.forEach((h=>{h._document!==null&&(t.push(h._document),s.push(this._userDataWriter.convertObjectMap(h._document.data.value.mapValue.fields,"previous")),c.push(h.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function J8(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(n){n=bi(n,Wn);const e=bi(n.firestore,ta);return V8(zc(e),n._key).then((t=>oT(e,n,t)))}Al._jsonSchemaVersion="firestore/querySnapshot/1.0",Al._jsonSchema={type:Ar("string",Al._jsonSchemaVersion),bundleSource:Ar("string","QuerySnapshot"),bundleName:Ar("string"),bundle:Ar("string")};class n0 extends sT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ji(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,t)}}function r0(n){n=bi(n,Wo);const e=bi(n.firestore,ta),t=zc(e),s=new n0(e);return nT(n._query),j8(t,n._query).then((c=>new Al(e,s,n,c)))}function Ko(n,e,t){n=bi(n,Wn);const s=bi(n.firestore,ta),c=up(n.converter,e,t);return i0(s,[tp(ph(s),"setDoc",n._key,c,n.converter!==null,t).toMutation(n._key,Rr.none())])}function Dl(n,e,t,...s){n=bi(n,Wn);const c=bi(n.firestore,ta),h=ph(c);let p;return p=typeof(e=hr(e))=="string"||e instanceof Hc?rp(h,"updateDoc",n._key,e,t,s):np(h,"updateDoc",n._key,e),i0(c,[p.toMutation(n._key,Rr.exists(!0))])}function yh(n){return i0(bi(n.firestore,ta),[new fh(n._key,Rr.none())])}function Xa(n,...e){var w,E,C;n=hr(n);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||t_(e[s])||(t=e[s++]);const c={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(t_(e[s])){const I=e[s];e[s]=(w=I.next)==null?void 0:w.bind(I),e[s+1]=(E=I.error)==null?void 0:E.bind(I),e[s+2]=(C=I.complete)==null?void 0:C.bind(I)}let h,p,T;if(n instanceof Wn)p=bi(n.firestore,ta),T=Hd(n._key.path),h={next:I=>{e[s]&&e[s](oT(p,n,I))},error:e[s+1],complete:e[s+2]};else{const I=bi(n,Wo);p=bi(I.firestore,ta),T=I._query;const M=new n0(p);h={next:B=>{e[s]&&e[s](new Al(p,M,I,B))},error:e[s+1],complete:e[s+2]},nT(n._query)}return(function(M,B,W,$){const q=new Zm($),_e=new Wm(B,q,W);return M.asyncQueue.enqueueAndForget((async()=>qm(await Ad(M),_e))),()=>{q.Nu(),M.asyncQueue.enqueueAndForget((async()=>Ym(await Ad(M),_e)))}})(zc(p),T,c,h)}function i0(n,e){return(function(s,c){const h=new Ys;return s.asyncQueue.enqueueAndForget((async()=>T8(await B8(s),c,h))),h.promise})(zc(n),e)}function oT(n,e,t){const s=t.docs.get(e._key),c=new n0(n);return new Uo(n,c,e._key,s,new gc(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $8={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ph(e)}set(e,t,s){this._verifyNotCommitted();const c=Oo(e,this._firestore),h=up(c.converter,t,s),p=tp(this._dataReader,"WriteBatch.set",c._key,h,c.converter!==null,s);return this._mutations.push(p.toMutation(c._key,Rr.none())),this}update(e,t,s,...c){this._verifyNotCommitted();const h=Oo(e,this._firestore);let p;return p=typeof(t=hr(t))=="string"||t instanceof Hc?rp(this._dataReader,"WriteBatch.update",h._key,t,s,c):np(this._dataReader,"WriteBatch.update",h._key,t),this._mutations.push(p.toMutation(h._key,Rr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Oo(e,this._firestore);return this._mutations=this._mutations.concat(new fh(t._key,Rr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ze(ve.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Oo(n,e){if((n=hr(n)).firestore!==e)throw new ze(ve.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ph(e)}get(e){const t=Oo(e,this._firestore),s=new Z8(this._firestore);return this._transaction.lookup([t._key]).then((c=>{if(!c||c.length!==1)return st(24041);const h=c[0];if(h.isFoundDocument())return new Td(this._firestore,s,h.key,h,t.converter);if(h.isNoDocument())return new Td(this._firestore,s,t._key,null,t.converter);throw st(18433,{doc:h})}))}set(e,t,s){const c=Oo(e,this._firestore),h=up(c.converter,t,s),p=tp(this._dataReader,"Transaction.set",c._key,h,c.converter!==null,s);return this._transaction.set(c._key,p),this}update(e,t,s,...c){const h=Oo(e,this._firestore);let p;return p=typeof(t=hr(t))=="string"||t instanceof Hc?rp(this._dataReader,"Transaction.update",h._key,t,s,c):np(this._dataReader,"Transaction.update",h._key,t),this._transaction.update(h._key,p),this}delete(e){const t=Oo(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO extends tO{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Oo(e,this._firestore),s=new n0(this._firestore);return super.get(e).then((c=>new Uo(this._firestore,s,t._key,c._document,new gc(!1,!1),t.converter)))}}function lT(n,e,t){n=bi(n,ta);const s={...$8,...t};return(function(h){if(h.maxAttempts<1)throw new ze(ve.INVALID_ARGUMENT,"Max attempts must be at least 1")})(s),(function(h,p,T){const w=new Ys;return h.asyncQueue.enqueueAndForget((async()=>{const E=await U8(h);new P8(h.asyncQueue,E,T,p,w).ju()})),w.promise})(zc(n),(c=>e(new nO(n,c))),s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rO(n){return zc(n=bi(n,ta)),new eO(n,(e=>i0(n,e)))}(function(e,t=!0){(function(c){Uc=c})(Bc),Tc(new Tl("firestore",((s,{instanceIdentifier:c,options:h})=>{const p=s.getProvider("app").getImmediate(),T=new ta(new X4(s.getProvider("auth-internal")),new Q4(p,s.getProvider("app-check-internal")),(function(E,C){if(!Object.prototype.hasOwnProperty.apply(E.options,["projectId"]))throw new ze(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $u(E.options.projectId,C)})(p,c),p);return h={useFetchStreams:t,...h},T._setSettings(h),T}),"PUBLIC").setMultipleInstances(!0)),Lo(sE,aE,e),Lo(sE,aE,"esm2020")})();var iO="firebase",sO="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Lo(iO,sO,"app");function cT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const aO=cT,uT=new ah("auth","Firebase",cT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd=new _m("@firebase/auth");function oO(n,...e){vd.logLevel<=zt.WARN&&vd.warn(`Auth (${Bc}): ${n}`,...e)}function Jf(n,...e){vd.logLevel<=zt.ERROR&&vd.error(`Auth (${Bc}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ms(n,...e){throw hp(n,...e)}function Qs(n,...e){return hp(n,...e)}function hT(n,e,t){const s={...aO(),[e]:t};return new ah("auth","Firebase",s).create(e,{appName:n.name})}function Zs(n){return hT(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hp(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return uT.create(n,...e)}function ht(n,e,...t){if(!n)throw hp(e,...t)}function ka(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Jf(e),new Error(e)}function Ha(n,e){n||ka(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function lO(){return i_()==="http:"||i_()==="https:"}function i_(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lO()||TN()||"connection"in navigator)?navigator.onLine:!0}function uO(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ha(t>e,"Short delay should be less than long delay!"),this.isMobile=wN()||vN()}get(){return cO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fp(n,e){Ha(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ka("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ka("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ka("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],dO=new Eh(3e4,6e4);function Qo(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Wa(n,e,t,s,c={}){return dT(n,c,async()=>{let h={},p={};s&&(e==="GET"?p=s:h={body:JSON.stringify(s)});const T=oh({key:n.config.apiKey,...p}).slice(1),w=await n._getAdditionalHeaders();w["Content-Type"]="application/json",n.languageCode&&(w["X-Firebase-Locale"]=n.languageCode);const E={method:e,headers:w,...h};return bN()||(E.referrerPolicy="no-referrer"),n.emulatorConfig&&kc(n.emulatorConfig.host)&&(E.credentials="include"),fT.fetch()(await gT(n,n.config.apiHost,t,T),E)})}async function dT(n,e,t){n._canInitEmulator=!1;const s={...hO,...e};try{const c=new mO(n),h=await Promise.race([t(),c.promise]);c.clearNetworkTimeout();const p=await h.json();if("needConfirmation"in p)throw kf(n,"account-exists-with-different-credential",p);if(h.ok&&!("errorMessage"in p))return p;{const T=h.ok?p.errorMessage:p.error.message,[w,E]=T.split(" : ");if(w==="FEDERATED_USER_ID_ALREADY_LINKED")throw kf(n,"credential-already-in-use",p);if(w==="EMAIL_EXISTS")throw kf(n,"email-already-in-use",p);if(w==="USER_DISABLED")throw kf(n,"user-disabled",p);const C=s[w]||w.toLowerCase().replace(/[_\s]+/g,"-");if(E)throw hT(n,C,E);Ms(n,C)}}catch(c){if(c instanceof Ya)throw c;Ms(n,"network-request-failed",{message:String(c)})}}async function _h(n,e,t,s,c={}){const h=await Wa(n,e,t,s,c);return"mfaPendingCredential"in h&&Ms(n,"multi-factor-auth-required",{_serverResponse:h}),h}async function gT(n,e,t,s){const c=`${e}${t}?${s}`,h=n,p=h.config.emulator?fp(n.config,c):`${n.config.apiScheme}://${c}`;return fO.includes(t)&&(await h._persistenceManagerAvailable,h._getPersistenceType()==="COOKIE")?h._getPersistence()._getFinalTarget(p).toString():p}function gO(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Qs(this.auth,"network-request-failed")),dO.get())})}}function kf(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const c=Qs(n,e,s);return c.customData._tokenResponse=t,c}function s_(n){return n!==void 0&&n.enterprise!==void 0}class pO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return gO(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function xO(n,e){return Wa(n,"GET","/v2/recaptchaConfig",Qo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yO(n,e){return Wa(n,"POST","/v1/accounts:delete",e)}async function Sd(n,e){return Wa(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function EO(n,e=!1){const t=hr(n),s=await t.getIdToken(e),c=dp(s);ht(c&&c.exp&&c.auth_time&&c.iat,t.auth,"internal-error");const h=typeof c.firebase=="object"?c.firebase:void 0,p=h==null?void 0:h.sign_in_provider;return{claims:c,token:s,authTime:qu(pg(c.auth_time)),issuedAtTime:qu(pg(c.iat)),expirationTime:qu(pg(c.exp)),signInProvider:p||null,signInSecondFactor:(h==null?void 0:h.sign_in_second_factor)||null}}function pg(n){return Number(n)*1e3}function dp(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return Jf("JWT malformed, contained fewer than 3 sections"),null;try{const c=_A(t);return c?JSON.parse(c):(Jf("Failed to decode base64 JWT payload"),null)}catch(c){return Jf("Caught error parsing JWT payload as JSON",c==null?void 0:c.toString()),null}}function a_(n){const e=dp(n);return ht(e,"internal-error"),ht(typeof e.exp<"u","internal-error"),ht(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oc(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Ya&&_O(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function _O({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=qu(this.lastLoginAt),this.creationTime=qu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cd(n){var I;const e=n.auth,t=await n.getIdToken(),s=await Oc(n,Sd(e,{idToken:t}));ht(s==null?void 0:s.users.length,e,"internal-error");const c=s.users[0];n._notifyReloadListener(c);const h=(I=c.providerUserInfo)!=null&&I.length?mT(c.providerUserInfo):[],p=bO(n.providerData,h),T=n.isAnonymous,w=!(n.email&&c.passwordHash)&&!(p!=null&&p.length),E=T?w:!1,C={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:p,metadata:new Jg(c.createdAt,c.lastLoginAt),isAnonymous:E};Object.assign(n,C)}async function AO(n){const e=hr(n);await Cd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function bO(n,e){return[...n.filter(s=>!e.some(c=>c.providerId===s.providerId)),...e]}function mT(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TO(n,e){const t=await dT(n,{},async()=>{const s=oh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:c,apiKey:h}=n.config,p=await gT(n,c,"/v1/token",`key=${h}`),T=await n._getAdditionalHeaders();T["Content-Type"]="application/x-www-form-urlencoded";const w={method:"POST",headers:T,body:s};return n.emulatorConfig&&kc(n.emulatorConfig.host)&&(w.credentials="include"),fT.fetch()(p,w)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function vO(n,e){return Wa(n,"POST","/v2/accounts:revokeToken",Qo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ht(e.idToken,"internal-error"),ht(typeof e.idToken<"u","internal-error"),ht(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):a_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ht(e.length!==0,"internal-error");const t=a_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ht(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:c,expiresIn:h}=await TO(e,t);this.updateTokensAndExpiration(s,c,Number(h))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:c,expirationTime:h}=t,p=new _c;return s&&(ht(typeof s=="string","internal-error",{appName:e}),p.refreshToken=s),c&&(ht(typeof c=="string","internal-error",{appName:e}),p.accessToken=c),h&&(ht(typeof h=="number","internal-error",{appName:e}),p.expirationTime=h),p}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _c,this.toJSON())}_performRefresh(){return ka("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vo(n,e){ht(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Os{constructor({uid:e,auth:t,stsTokenManager:s,...c}){this.providerId="firebase",this.proactiveRefresh=new wO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new Jg(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(e){const t=await Oc(this,this.stsTokenManager.getToken(this.auth,e));return ht(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return EO(this,e)}reload(){return AO(this)}_assign(e){this!==e&&(ht(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Os({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ht(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Cd(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zi(this.auth.app))return Promise.reject(Zs(this.auth));const e=await this.getIdToken();return await Oc(this,yO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,c=t.email??void 0,h=t.phoneNumber??void 0,p=t.photoURL??void 0,T=t.tenantId??void 0,w=t._redirectEventId??void 0,E=t.createdAt??void 0,C=t.lastLoginAt??void 0,{uid:I,emailVerified:M,isAnonymous:B,providerData:W,stsTokenManager:$}=t;ht(I&&$,e,"internal-error");const q=_c.fromJSON(this.name,$);ht(typeof I=="string",e,"internal-error"),vo(s,e.name),vo(c,e.name),ht(typeof M=="boolean",e,"internal-error"),ht(typeof B=="boolean",e,"internal-error"),vo(h,e.name),vo(p,e.name),vo(T,e.name),vo(w,e.name),vo(E,e.name),vo(C,e.name);const _e=new Os({uid:I,auth:e,email:c,emailVerified:M,displayName:s,isAnonymous:B,photoURL:p,phoneNumber:h,tenantId:T,stsTokenManager:q,createdAt:E,lastLoginAt:C});return W&&Array.isArray(W)&&(_e.providerData=W.map(ae=>({...ae}))),w&&(_e._redirectEventId=w),_e}static async _fromIdTokenResponse(e,t,s=!1){const c=new _c;c.updateFromServerResponse(t);const h=new Os({uid:t.localId,auth:e,stsTokenManager:c,isAnonymous:s});return await Cd(h),h}static async _fromGetAccountInfoResponse(e,t,s){const c=t.users[0];ht(c.localId!==void 0,"internal-error");const h=c.providerUserInfo!==void 0?mT(c.providerUserInfo):[],p=!(c.email&&c.passwordHash)&&!(h!=null&&h.length),T=new _c;T.updateFromIdToken(s);const w=new Os({uid:c.localId,auth:e,stsTokenManager:T,isAnonymous:p}),E={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:h,metadata:new Jg(c.createdAt,c.lastLoginAt),isAnonymous:!(c.email&&c.passwordHash)&&!(h!=null&&h.length)};return Object.assign(w,E),w}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_=new Map;function Ba(n){Ha(n instanceof Function,"Expected a class definition");let e=o_.get(n);return e?(Ha(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,o_.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}pT.type="NONE";const l_=pT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(n,e,t){return`firebase:${n}:${e}:${t}`}class wc{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:c,name:h}=this.auth;this.fullUserKey=$f(this.userKey,c.apiKey,h),this.fullPersistenceKey=$f("persistence",c.apiKey,h),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Sd(this.auth,{idToken:e}).catch(()=>{});return t?Os._fromGetAccountInfoResponse(this.auth,t,e):null}return Os._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new wc(Ba(l_),e,s);const c=(await Promise.all(t.map(async E=>{if(await E._isAvailable())return E}))).filter(E=>E);let h=c[0]||Ba(l_);const p=$f(s,e.config.apiKey,e.name);let T=null;for(const E of t)try{const C=await E._get(p);if(C){let I;if(typeof C=="string"){const M=await Sd(e,{idToken:C}).catch(()=>{});if(!M)break;I=await Os._fromGetAccountInfoResponse(e,M,C)}else I=Os._fromJSON(e,C);E!==h&&(T=I),h=E;break}}catch{}const w=c.filter(E=>E._shouldAllowMigration);return!h._shouldAllowMigration||!w.length?new wc(h,e,s):(h=w[0],T&&await h._set(p,T.toJSON()),await Promise.all(t.map(async E=>{if(E!==h)try{await E._remove(p)}catch{}})),new wc(h,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_T(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(AT(e))return"Blackberry";if(bT(e))return"Webos";if(yT(e))return"Safari";if((e.includes("chrome/")||ET(e))&&!e.includes("edge/"))return"Chrome";if(wT(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function xT(n=ci()){return/firefox\//i.test(n)}function yT(n=ci()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ET(n=ci()){return/crios\//i.test(n)}function _T(n=ci()){return/iemobile/i.test(n)}function wT(n=ci()){return/android/i.test(n)}function AT(n=ci()){return/blackberry/i.test(n)}function bT(n=ci()){return/webos/i.test(n)}function gp(n=ci()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function SO(n=ci()){var e;return gp(n)&&!!((e=window.navigator)!=null&&e.standalone)}function CO(){return SN()&&document.documentMode===10}function TT(n=ci()){return gp(n)||wT(n)||bT(n)||AT(n)||/windows phone/i.test(n)||_T(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(n,e=[]){let t;switch(n){case"Browser":t=c_(ci());break;case"Worker":t=`${c_(ci())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Bc}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=h=>new Promise((p,T)=>{try{const w=e(h);p(w)}catch(w){T(w)}});s.onAbort=t,this.queue.push(s);const c=this.queue.length-1;return()=>{this.queue[c]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const c of t)try{c()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NO(n,e={}){return Wa(n,"GET","/v2/passwordPolicy",Qo(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RO=6;class OO{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??RO,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,c=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),c&&(t.meetsMaxPasswordLength=e.length<=c)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let c=0;c<e.length;c++)s=e.charAt(c),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,c,h){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=c)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(e,t,s,c){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=c,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new u_(this),this.idTokenSubscription=new u_(this),this.beforeStateQueue=new IO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=uT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=c.sdkClientVersion,this._persistenceManagerAvailable=new Promise(h=>this._resolvePersistenceManagerAvailable=h)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ba(t)),this._initializationPromise=this.queue(async()=>{var s,c,h;if(!this._deleted&&(this.persistenceManager=await wc.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((c=this._popupRedirectResolver)!=null&&c._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((h=this.currentUser)==null?void 0:h.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Sd(this,{idToken:e}),s=await Os._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var h;if(Zi(this.app)){const p=this.app.settings.authIdToken;return p?new Promise(T=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(p).then(T,T))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,c=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const p=(h=this.redirectUser)==null?void 0:h._redirectEventId,T=s==null?void 0:s._redirectEventId,w=await this.tryRedirectSignIn(e);(!p||p===T)&&(w!=null&&w.user)&&(s=w.user,c=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(s)}catch(p){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(p))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ht(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Cd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=uO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zi(this.app))return Promise.reject(Zs(this));const t=e?hr(e):null;return t&&ht(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ht(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zi(this.app)?Promise.reject(Zs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zi(this.app)?Promise.reject(Zs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ba(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await NO(this),t=new OO(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ah("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await vO(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ba(e)||this._popupRedirectResolver;ht(t,this,"argument-error"),this.redirectPersistenceManager=await wc.create(this,[Ba(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,c){if(this._deleted)return()=>{};const h=typeof t=="function"?t:t.next.bind(t);let p=!1;const T=this._isInitialized?Promise.resolve():this._initializationPromise;if(ht(T,this,"internal-error"),T.then(()=>{p||h(this.currentUser)}),typeof t=="function"){const w=e.addObserver(t,s,c);return()=>{p=!0,w()}}else{const w=e.addObserver(t);return()=>{p=!0,w()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ht(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var c;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((c=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:c.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(Zi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&oO(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Zo(n){return hr(n)}class u_{constructor(e){this.auth=e,this.observer=null,this.addObserver=PN(t=>this.observer=t)}get next(){return ht(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let s0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function MO(n){s0=n}function ST(n){return s0.loadJS(n)}function PO(){return s0.recaptchaEnterpriseScript}function LO(){return s0.gapiScript}function kO(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class BO{constructor(){this.enterprise=new UO}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class UO{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const VO="recaptcha-enterprise",CT="NO_RECAPTCHA";class jO{constructor(e){this.type=VO,this.auth=Zo(e)}async verify(e="verify",t=!1){async function s(h){if(!t){if(h.tenantId==null&&h._agentRecaptchaConfig!=null)return h._agentRecaptchaConfig.siteKey;if(h.tenantId!=null&&h._tenantRecaptchaConfigs[h.tenantId]!==void 0)return h._tenantRecaptchaConfigs[h.tenantId].siteKey}return new Promise(async(p,T)=>{xO(h,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(w=>{if(w.recaptchaKey===void 0)T(new Error("recaptcha Enterprise site key undefined"));else{const E=new pO(w);return h.tenantId==null?h._agentRecaptchaConfig=E:h._tenantRecaptchaConfigs[h.tenantId]=E,p(E.siteKey)}}).catch(w=>{T(w)})})}function c(h,p,T){const w=window.grecaptcha;s_(w)?w.enterprise.ready(()=>{w.enterprise.execute(h,{action:e}).then(E=>{p(E)}).catch(()=>{p(CT)})}):T(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new BO().execute("siteKey",{action:"verify"}):new Promise((h,p)=>{s(this.auth).then(T=>{if(!t&&s_(window.grecaptcha))c(T,h,p);else{if(typeof window>"u"){p(new Error("RecaptchaVerifier is only supported in browser"));return}let w=PO();w.length!==0&&(w+=T),ST(w).then(()=>{c(T,h,p)}).catch(E=>{p(E)})}}).catch(T=>{p(T)})})}}async function h_(n,e,t,s=!1,c=!1){const h=new jO(n);let p;if(c)p=CT;else try{p=await h.verify(t)}catch{p=await h.verify(t,!0)}const T={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in T){const w=T.phoneEnrollmentInfo.phoneNumber,E=T.phoneEnrollmentInfo.recaptchaToken;Object.assign(T,{phoneEnrollmentInfo:{phoneNumber:w,recaptchaToken:E,captchaResponse:p,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in T){const w=T.phoneSignInInfo.recaptchaToken;Object.assign(T,{phoneSignInInfo:{recaptchaToken:w,captchaResponse:p,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return T}return s?Object.assign(T,{captchaResp:p}):Object.assign(T,{captchaResponse:p}),Object.assign(T,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(T,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),T}async function $g(n,e,t,s,c){var h;if((h=n._getRecaptchaConfig())!=null&&h.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const p=await h_(n,e,t,t==="getOobCode");return s(n,p)}else return s(n,e).catch(async p=>{if(p.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const T=await h_(n,e,t,t==="getOobCode");return s(n,T)}else return Promise.reject(p)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FO(n,e){const t=Am(n,"auth");if(t.isInitialized()){const c=t.getImmediate(),h=t.getOptions();if(bl(h,e??{}))return c;Ms(c,"already-initialized")}return t.initialize({options:e})}function zO(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(Ba);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function HO(n,e,t){const s=Zo(n);ht(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const c=!1,h=IT(e),{host:p,port:T}=GO(e),w=T===null?"":`:${T}`,E={url:`${h}//${p}${w}/`},C=Object.freeze({host:p,port:T,protocol:h.replace(":",""),options:Object.freeze({disableWarnings:c})});if(!s._canInitEmulator){ht(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),ht(bl(E,s.config.emulator)&&bl(C,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=E,s.emulatorConfig=C,s.settings.appVerificationDisabledForTesting=!0,kc(p)?(TA(`${h}//${p}${w}`),vA("Auth",!0)):qO()}function IT(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function GO(n){const e=IT(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",c=/^(\[[^\]]+\])(:|$)/.exec(s);if(c){const h=c[1];return{host:h,port:f_(s.substr(h.length+1))}}else{const[h,p]=s.split(":");return{host:h,port:f_(p)}}}function f_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function qO(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ka("not implemented")}_getIdTokenResponse(e){return ka("not implemented")}_linkToIdToken(e,t){return ka("not implemented")}_getReauthenticationResolver(e){return ka("not implemented")}}async function YO(n,e){return Wa(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XO(n,e){return _h(n,"POST","/v1/accounts:signInWithPassword",Qo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WO(n,e){return _h(n,"POST","/v1/accounts:signInWithEmailLink",Qo(n,e))}async function KO(n,e){return _h(n,"POST","/v1/accounts:signInWithEmailLink",Qo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh extends mp{constructor(e,t,s,c=null){super("password",s),this._email=e,this._password=t,this._tenantId=c}static _fromEmailAndPassword(e,t){return new rh(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new rh(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $g(e,t,"signInWithPassword",XO);case"emailLink":return WO(e,{email:this._email,oobCode:this._password});default:Ms(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $g(e,s,"signUpPassword",YO);case"emailLink":return KO(e,{idToken:t,email:this._email,oobCode:this._password});default:Ms(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ac(n,e){return _h(n,"POST","/v1/accounts:signInWithIdp",Qo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO="http://localhost";class Cl extends mp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Cl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ms("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:c,...h}=t;if(!s||!c)return null;const p=new Cl(s,c);return p.idToken=h.idToken||void 0,p.accessToken=h.accessToken||void 0,p.secret=h.secret,p.nonce=h.nonce,p.pendingToken=h.pendingToken||null,p}_getIdTokenResponse(e){const t=this.buildRequest();return Ac(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Ac(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ac(e,t)}buildRequest(){const e={requestUri:QO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=oh(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZO(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function JO(n){const e=Ru(Ou(n)).link,t=e?Ru(Ou(e)).deep_link_id:null,s=Ru(Ou(n)).deep_link_id;return(s?Ru(Ou(s)).link:null)||s||t||e||n}class pp{constructor(e){const t=Ru(Ou(e)),s=t.apiKey??null,c=t.oobCode??null,h=ZO(t.mode??null);ht(s&&c&&h,"argument-error"),this.apiKey=s,this.operation=h,this.code=c,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=JO(e);try{return new pp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(){this.providerId=Gc.PROVIDER_ID}static credential(e,t){return rh._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=pp.parseLink(t);return ht(s,"argument-error"),rh._fromEmailAndCode(e,s.code,s.tenantId)}}Gc.PROVIDER_ID="password";Gc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Gc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh extends NT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So extends wh{constructor(){super("facebook.com")}static credential(e){return Cl._fromParams({providerId:So.PROVIDER_ID,signInMethod:So.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return So.credentialFromTaggedObject(e)}static credentialFromError(e){return So.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return So.credential(e.oauthAccessToken)}catch{return null}}}So.FACEBOOK_SIGN_IN_METHOD="facebook.com";So.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co extends wh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Cl._fromParams({providerId:Co.PROVIDER_ID,signInMethod:Co.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Co.credentialFromTaggedObject(e)}static credentialFromError(e){return Co.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Co.credential(t,s)}catch{return null}}}Co.GOOGLE_SIGN_IN_METHOD="google.com";Co.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io extends wh{constructor(){super("github.com")}static credential(e){return Cl._fromParams({providerId:Io.PROVIDER_ID,signInMethod:Io.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Io.credentialFromTaggedObject(e)}static credentialFromError(e){return Io.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Io.credential(e.oauthAccessToken)}catch{return null}}}Io.GITHUB_SIGN_IN_METHOD="github.com";Io.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No extends wh{constructor(){super("twitter.com")}static credential(e,t){return Cl._fromParams({providerId:No.PROVIDER_ID,signInMethod:No.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return No.credentialFromTaggedObject(e)}static credentialFromError(e){return No.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return No.credential(t,s)}catch{return null}}}No.TWITTER_SIGN_IN_METHOD="twitter.com";No.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RT(n,e){return _h(n,"POST","/v1/accounts:signUp",Qo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,c=!1){const h=await Os._fromIdTokenResponse(e,s,c),p=d_(s);return new Ga({user:h,providerId:p,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const c=d_(s);return new Ga({user:e,providerId:c,_tokenResponse:s,operationType:t})}}function d_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $O(n){var c;if(Zi(n.app))return Promise.reject(Zs(n));const e=Zo(n);if(await e._initializationPromise,(c=e.currentUser)!=null&&c.isAnonymous)return new Ga({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await RT(e,{returnSecureToken:!0}),s=await Ga._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id extends Ya{constructor(e,t,s,c){super(t.code,t.message),this.operationType=s,this.user=c,Object.setPrototypeOf(this,Id.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,c){return new Id(e,t,s,c)}}function OT(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(h=>{throw h.code==="auth/multi-factor-auth-required"?Id._fromErrorAndOperation(n,h,e,s):h})}async function e5(n,e,t=!1){const s=await Oc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ga._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t5(n,e,t=!1){const{auth:s}=n;if(Zi(s.app))return Promise.reject(Zs(s));const c="reauthenticate";try{const h=await Oc(n,OT(s,c,e,n),t);ht(h.idToken,s,"internal-error");const p=dp(h.idToken);ht(p,s,"internal-error");const{sub:T}=p;return ht(n.uid===T,s,"user-mismatch"),Ga._forOperation(n,c,h)}catch(h){throw(h==null?void 0:h.code)==="auth/user-not-found"&&Ms(s,"user-mismatch"),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DT(n,e,t=!1){if(Zi(n.app))return Promise.reject(Zs(n));const s="signIn",c=await OT(n,s,e),h=await Ga._fromIdTokenResponse(n,s,c);return t||await n._updateCurrentUser(h.user),h}async function n5(n,e){return DT(Zo(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MT(n){const e=Zo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function r5(n,e,t){if(Zi(n.app))return Promise.reject(Zs(n));const s=Zo(n),p=await $g(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",RT).catch(w=>{throw w.code==="auth/password-does-not-meet-requirements"&&MT(n),w}),T=await Ga._fromIdTokenResponse(s,"signIn",p);return await s._updateCurrentUser(T.user),T}function xg(n,e,t){return Zi(n.app)?Promise.reject(Zs(n)):n5(hr(n),Gc.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&MT(n),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i5(n,e){return Wa(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s5(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const s=hr(n),h={idToken:await s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},p=await Oc(s,i5(s.auth,h));s.displayName=p.displayName||null,s.photoURL=p.photoUrl||null;const T=s.providerData.find(({providerId:w})=>w==="password");T&&(T.displayName=s.displayName,T.photoURL=s.photoURL),await s._updateTokensIfNecessary(p)}function a5(n,e,t,s){return hr(n).onIdTokenChanged(e,t,s)}function o5(n,e,t){return hr(n).beforeAuthStateChanged(e,t)}const Nd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Nd,"1"),this.storage.removeItem(Nd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l5=1e3,c5=10;class LT extends PT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=TT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),c=this.localCache[t];s!==c&&e(t,c,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((p,T,w)=>{this.notifyListeners(p,w)});return}const s=e.key;t?this.detachListener():this.stopPolling();const c=()=>{const p=this.storage.getItem(s);!t&&this.localCache[s]===p||this.notifyListeners(s,p)},h=this.storage.getItem(s);CO()&&h!==e.newValue&&e.newValue!==e.oldValue?setTimeout(c,c5):c()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const c of Array.from(s))c(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},l5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}LT.type="LOCAL";const u5=LT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT extends PT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}kT.type="SESSION";const BT=kT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h5(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(c=>c.isListeningto(e));if(t)return t;const s=new a0(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:c,data:h}=t.data,p=this.handlersMap[c];if(!(p!=null&&p.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:c});const T=Array.from(p).map(async E=>E(t.origin,h)),w=await h5(T);t.ports[0].postMessage({status:"done",eventId:s,eventType:c,response:w})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}a0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xp(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const c=typeof MessageChannel<"u"?new MessageChannel:null;if(!c)throw new Error("connection_unavailable");let h,p;return new Promise((T,w)=>{const E=xp("",20);c.port1.start();const C=setTimeout(()=>{w(new Error("unsupported_event"))},s);p={messageChannel:c,onMessage(I){const M=I;if(M.data.eventId===E)switch(M.data.status){case"ack":clearTimeout(C),h=setTimeout(()=>{w(new Error("timeout"))},3e3);break;case"done":clearTimeout(h),T(M.data.response);break;default:clearTimeout(C),clearTimeout(h),w(new Error("invalid_response"));break}}},this.handlers.add(p),c.port1.addEventListener("message",p.onMessage),this.target.postMessage({eventType:e,eventId:E,data:t},[c.port2])}).finally(()=>{p&&this.removeMessageHandler(p)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Js(){return window}function d5(n){Js().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(){return typeof Js().WorkerGlobalScope<"u"&&typeof Js().importScripts=="function"}async function g5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function m5(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function p5(){return UT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT="firebaseLocalStorageDb",x5=1,Rd="firebaseLocalStorage",jT="fbase_key";class Ah{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function o0(n,e){return n.transaction([Rd],e?"readwrite":"readonly").objectStore(Rd)}function y5(){const n=indexedDB.deleteDatabase(VT);return new Ah(n).toPromise()}function em(){const n=indexedDB.open(VT,x5);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Rd,{keyPath:jT})}catch(c){t(c)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Rd)?e(s):(s.close(),await y5(),e(await em()))})})}async function g_(n,e,t){const s=o0(n,!0).put({[jT]:e,value:t});return new Ah(s).toPromise()}async function E5(n,e){const t=o0(n,!1).get(e),s=await new Ah(t).toPromise();return s===void 0?null:s.value}function m_(n,e){const t=o0(n,!0).delete(e);return new Ah(t).toPromise()}const _5=800,w5=3;class FT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await em(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>w5)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return UT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=a0._getInstance(p5()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await g5(),!this.activeServiceWorker)return;this.sender=new f5(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||m5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await em();return await g_(e,Nd,"1"),await m_(e,Nd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>g_(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>E5(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>m_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(c=>{const h=o0(c,!1).getAll();return new Ah(h).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:c,value:h}of e)s.add(c),JSON.stringify(this.localCache[c])!==JSON.stringify(h)&&(this.notifyListeners(c,h),t.push(c));for(const c of Object.keys(this.localCache))this.localCache[c]&&!s.has(c)&&(this.notifyListeners(c,null),t.push(c));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const c of Array.from(s))c(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}FT.type="LOCAL";const A5=FT;new Eh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b5(n,e){return e?Ba(e):(ht(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp extends mp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ac(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ac(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ac(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function T5(n){return DT(n.auth,new yp(n),n.bypassAuthState)}function v5(n){const{auth:e,user:t}=n;return ht(t,e,"internal-error"),t5(t,new yp(n),n.bypassAuthState)}async function S5(n){const{auth:e,user:t}=n;return ht(t,e,"internal-error"),e5(t,new yp(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e,t,s,c,h=!1){this.auth=e,this.resolver=s,this.user=c,this.bypassAuthState=h,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:c,tenantId:h,error:p,type:T}=e;if(p){this.reject(p);return}const w={auth:this.auth,requestUri:t,sessionId:s,tenantId:h||void 0,postBody:c||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(T)(w))}catch(E){this.reject(E)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return T5;case"linkViaPopup":case"linkViaRedirect":return S5;case"reauthViaPopup":case"reauthViaRedirect":return v5;default:Ms(this.auth,"internal-error")}}resolve(e){Ha(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ha(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C5=new Eh(2e3,1e4);class mc extends zT{constructor(e,t,s,c,h){super(e,t,c,h),this.provider=s,this.authWindow=null,this.pollId=null,mc.currentPopupAction&&mc.currentPopupAction.cancel(),mc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ht(e,this.auth,"internal-error"),e}async onExecution(){Ha(this.filter.length===1,"Popup operations only handle one event");const e=xp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Qs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Qs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,mc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,C5.get())};e()}}mc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I5="pendingRedirect",ed=new Map;class N5 extends zT{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=ed.get(this.auth._key());if(!e){try{const s=await R5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}ed.set(this.auth._key(),e)}return this.bypassAuthState||ed.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function R5(n,e){const t=M5(e),s=D5(n);if(!await s._isAvailable())return!1;const c=await s._get(t)==="true";return await s._remove(t),c}function O5(n,e){ed.set(n._key(),e)}function D5(n){return Ba(n._redirectPersistence)}function M5(n){return $f(I5,n.config.apiKey,n.name)}async function P5(n,e,t=!1){if(Zi(n.app))return Promise.reject(Zs(n));const s=Zo(n),c=b5(s,e),p=await new N5(s,c,t).execute();return p&&!t&&(delete p.user._redirectEventId,await s._persistUserIfCurrent(p.user),await s._setRedirectUser(null,e)),p}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L5=600*1e3;class k5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!B5(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!HT(e)){const c=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(Qs(this.auth,c))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=L5&&this.cachedEventUids.clear(),this.cachedEventUids.has(p_(e))}saveEventToCache(e){this.cachedEventUids.add(p_(e)),this.lastProcessedEventTime=Date.now()}}function p_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function HT({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function B5(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return HT(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U5(n,e={}){return Wa(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,j5=/^https?/;async function F5(n){if(n.config.emulator)return;const{authorizedDomains:e}=await U5(n);for(const t of e)try{if(z5(t))return}catch{}Ms(n,"unauthorized-domain")}function z5(n){const e=Zg(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const p=new URL(n);return p.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&p.hostname===s}if(!j5.test(t))return!1;if(V5.test(n))return s===n;const c=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+c+"|"+c+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H5=new Eh(3e4,6e4);function x_(){const n=Js().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function G5(n){return new Promise((e,t)=>{var c,h,p;function s(){x_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{x_(),t(Qs(n,"network-request-failed"))},timeout:H5.get()})}if((h=(c=Js().gapi)==null?void 0:c.iframes)!=null&&h.Iframe)e(gapi.iframes.getContext());else if((p=Js().gapi)!=null&&p.load)s();else{const T=kO("iframefcb");return Js()[T]=()=>{gapi.load?s():t(Qs(n,"network-request-failed"))},ST(`${LO()}?onload=${T}`).catch(w=>t(w))}}).catch(e=>{throw td=null,e})}let td=null;function q5(n){return td=td||G5(n),td}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y5=new Eh(5e3,15e3),X5="__/auth/iframe",W5="emulator/auth/iframe",K5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Q5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Z5(n){const e=n.config;ht(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?fp(e,W5):`https://${n.config.authDomain}/${X5}`,s={apiKey:e.apiKey,appName:n.name,v:Bc},c=Q5.get(n.config.apiHost);c&&(s.eid=c);const h=n._getFrameworks();return h.length&&(s.fw=h.join(",")),`${t}?${oh(s).slice(1)}`}async function J5(n){const e=await q5(n),t=Js().gapi;return ht(t,n,"internal-error"),e.open({where:document.body,url:Z5(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:K5,dontclear:!0},s=>new Promise(async(c,h)=>{await s.restyle({setHideOnLeave:!1});const p=Qs(n,"network-request-failed"),T=Js().setTimeout(()=>{h(p)},Y5.get());function w(){Js().clearTimeout(T),c(s)}s.ping(w).then(w,()=>{h(p)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},eD=500,tD=600,nD="_blank",rD="http://localhost";class y_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function iD(n,e,t,s=eD,c=tD){const h=Math.max((window.screen.availHeight-c)/2,0).toString(),p=Math.max((window.screen.availWidth-s)/2,0).toString();let T="";const w={...$5,width:s.toString(),height:c.toString(),top:h,left:p},E=ci().toLowerCase();t&&(T=ET(E)?nD:t),xT(E)&&(e=e||rD,w.scrollbars="yes");const C=Object.entries(w).reduce((M,[B,W])=>`${M}${B}=${W},`,"");if(SO(E)&&T!=="_self")return sD(e||"",T),new y_(null);const I=window.open(e||"",T,C);ht(I,n,"popup-blocked");try{I.focus()}catch{}return new y_(I)}function sD(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD="__/auth/handler",oD="emulator/auth/handler",lD=encodeURIComponent("fac");async function E_(n,e,t,s,c,h){ht(n.config.authDomain,n,"auth-domain-config-required"),ht(n.config.apiKey,n,"invalid-api-key");const p={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:Bc,eventId:c};if(e instanceof NT){e.setDefaultLanguage(n.languageCode),p.providerId=e.providerId||"",MN(e.getCustomParameters())||(p.customParameters=JSON.stringify(e.getCustomParameters()));for(const[C,I]of Object.entries({}))p[C]=I}if(e instanceof wh){const C=e.getScopes().filter(I=>I!=="");C.length>0&&(p.scopes=C.join(","))}n.tenantId&&(p.tid=n.tenantId);const T=p;for(const C of Object.keys(T))T[C]===void 0&&delete T[C];const w=await n._getAppCheckToken(),E=w?`#${lD}=${encodeURIComponent(w)}`:"";return`${cD(n)}?${oh(T).slice(1)}${E}`}function cD({config:n}){return n.emulator?fp(n,oD):`https://${n.authDomain}/${aD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg="webStorageSupport";class uD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=BT,this._completeRedirectFn=P5,this._overrideRedirectResult=O5}async _openPopup(e,t,s,c){var p;Ha((p=this.eventManagers[e._key()])==null?void 0:p.manager,"_initialize() not called before _openPopup()");const h=await E_(e,t,s,Zg(),c);return iD(e,h,xp())}async _openRedirect(e,t,s,c){await this._originValidation(e);const h=await E_(e,t,s,Zg(),c);return d5(h),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:c,promise:h}=this.eventManagers[t];return c?Promise.resolve(c):(Ha(h,"If manager is not set, promise should be"),h)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await J5(e),s=new k5(e);return t.register("authEvent",c=>(ht(c==null?void 0:c.authEvent,e,"invalid-auth-event"),{status:s.onEvent(c.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(yg,{type:yg},c=>{var p;const h=(p=c==null?void 0:c[0])==null?void 0:p[yg];h!==void 0&&t(!!h),Ms(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=F5(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return TT()||yT()||gp()}}const hD=uD;var __="@firebase/auth",w_="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ht(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dD(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function gD(n){Tc(new Tl("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),c=e.getProvider("heartbeat"),h=e.getProvider("app-check-internal"),{apiKey:p,authDomain:T}=s.options;ht(p&&!p.includes(":"),"invalid-api-key",{appName:s.name});const w={apiKey:p,authDomain:T,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vT(n)},E=new DO(s,c,h,w);return zO(E,t),E},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Tc(new Tl("auth-internal",e=>{const t=Zo(e.getProvider("auth").getImmediate());return(s=>new fD(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Lo(__,w_,dD(n)),Lo(__,w_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD=300,pD=bA("authIdTokenMaxAge")||mD;let A_=null;const xD=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>pD)return;const c=t==null?void 0:t.token;A_!==c&&(A_=c,await fetch(n,{method:c?"POST":"DELETE",headers:c?{Authorization:`Bearer ${c}`}:{}}))};function yD(n=NA()){const e=Am(n,"auth");if(e.isInitialized())return e.getImmediate();const t=FO(n,{popupRedirectResolver:hD,persistence:[A5,u5,BT]}),s=bA("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const h=new URL(s,location.origin);if(location.origin===h.origin){const p=xD(h.toString());o5(t,p,()=>p(t.currentUser)),a5(t,T=>p(T))}}const c=wA("auth");return c&&HO(t,`http://${c}`),t}function ED(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}MO({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=c=>{const h=Qs("internal-error");h.customData=c,t(h)},s.type="text/javascript",s.charset="UTF-8",ED().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});gD("Browser");const _D={apiKey:"AIzaSyDYZ6VUaaDmy-AvS4D9cM3zkN0Vg4lStuk",authDomain:"workshop-36cbe.firebaseapp.com",projectId:"workshop-36cbe",storageBucket:"workshop-36cbe.firebasestorage.app",messagingSenderId:"742601440632",appId:"1:742601440632:web:48e380f7e1441494ba9c8d"};let Dc;try{Dc=IA(_D)}catch(n){console.error("Firebase init failed:",n),Dc={name:"[Placeholder]"}}const _t=Dc.name!=="[Placeholder]"?z8(Dc):null,El=Dc.name!=="[Placeholder]"?yD(Dc):null;var $s=(n=>(n.STUDENT="STUDENT",n.ADMIN="ADMIN",n.GUEST="GUEST",n))($s||{});const Vo=[{name:"",threshold:0,color:"bg-slate-400",icon:""},{name:"",threshold:500,color:"bg-blue-400",icon:""},{name:"",threshold:2e3,color:"bg-green-500",icon:""},{name:"",threshold:5e3,color:"bg-purple-500",icon:""},{name:"",threshold:1e4,color:"bg-orange-500",icon:""},{name:"",threshold:25e3,color:"bg-yellow-500",icon:""}],Ep={USER:"workshop_user"},tm=["","","","","","","",""],Eg=[{text:"",author:" (William Butler Yeats)"},{text:"",author:" (Winston Churchill)"},{text:" 20  80 ",author:" (Henry Ford)"},{text:"",author:" (Nelson Mandela)"},{text:"",author:" (Steve Jobs)"},{text:"",author:""},{text:"",author:""},{text:"",author:" (Aristotle)"},{text:"",author:" (Thomas Edison)"},{text:"",author:" (Pablo Picasso)"}],Ot={STUDENTS:"students",MISSIONS:"missions",PRODUCTS:"products",WISHES:"wishes",REDEMPTIONS:"redemptions",CHALLENGE_HISTORY:"challengeHistory",POINT_REASONS:"pointReasons",MISSION_SUBMISSIONS:"missionSubmissions",PRODUCT_CATEGORIES:"productCategories",BANNERS:"banners"},Bf={id:"user_admin",name:"",points:0,totalEarned:0,role:$s.ADMIN,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Admin",isApproved:!0},b_={id:"user_guest",name:"",points:0,totalEarned:0,role:$s.GUEST,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Guest",isApproved:!0},T_=async()=>{try{return(await r0(rs(_t,Ot.STUDENTS))).docs.map(e=>({...e.data(),id:e.id}))}catch(n){return console.error("Error fetching students:",n),[]}},nm=async n=>{try{await Ko(Cn(_t,Ot.STUDENTS,n.id),n)}catch(e){console.error("Error saving student:",e),console.error("")}},wD=async n=>{const e=rO(_t);n.forEach(t=>{const s=Cn(_t,Ot.STUDENTS,t.id);e.set(s,t)}),await e.commit()},AD=async n=>{try{const e=Cn(_t,Ot.STUDENTS,n);await Dl(e,{isApproved:!0})}catch(e){console.error("Error approving student:",e)}},bD=async n=>{try{await yh(Cn(_t,Ot.STUDENTS,n))}catch(e){console.error("Error deleting student:",e)}},v_=()=>{const n=localStorage.getItem(Ep.USER);return n?JSON.parse(n):null},La=async n=>{localStorage.setItem(Ep.USER,JSON.stringify(n)),n.role===$s.STUDENT&&await nm(n)},TD=async()=>{localStorage.removeItem(Ep.USER),await El.signOut()},vD=async(n,e)=>{try{return await lT(_t,async s=>{const c=Cn(_t,Ot.STUDENTS,n.id),h=Cn(_t,Ot.PRODUCTS,e.id),p=Cn(_t,Ot.REDEMPTIONS,`red_${Date.now()}`),T=await s.get(c),w=await s.get(h);if(!T.exists())throw new Error("");if(!w.exists())throw new Error("");const E=T.data(),C=w.data();if(E.points<C.price)return{success:!1,message:""};if(C.stock<=0)return{success:!1,message:""};s.update(c,{points:E.points-C.price}),s.update(h,{stock:C.stock-1});const I={id:p.id,userId:n.id,productId:e.id,productName:e.name,pointsSpent:e.price,timestamp:Date.now(),status:"pending",qrCodeData:`AUTH_WORKSHOP_${Date.now()}_${e.id}`};return s.set(p,I),{success:!0,message:""}})}catch(t){return console.error("Redemption transaction failed:",t),{success:!1,message:`: ${t.message}`}}},SD=async(n,e)=>{try{const t=Cn(_t,Ot.REDEMPTIONS,n);await Dl(t,{status:e})}catch(t){console.error("Error updating redemption status:",t)}},CD=async n=>{try{const e=`cat_${Date.now()}`;await Ko(Cn(_t,Ot.PRODUCT_CATEGORIES,e),{id:e,name:n})}catch(e){console.error("Error adding category:",e)}},ID=async n=>{try{await yh(Cn(_t,Ot.PRODUCT_CATEGORIES,n))}catch(e){console.error("Error deleting category:",e)}},GT=n=>Xa(rs(_t,Ot.PRODUCT_CATEGORIES),e=>{const t=e.docs.map(s=>({...s.data(),id:s.id}));n(t)}),ND=async n=>{try{await Ko(Cn(_t,Ot.MISSIONS,n.id),n)}catch(e){console.error("Error adding mission:",e)}},RD=async n=>{try{const e=Cn(_t,Ot.MISSIONS,n),t=await aT(e);if(t.exists()){const s=t.data();await Dl(e,{isActive:!s.isActive})}}catch(e){console.error("Error toggling mission:",e)}},OD=async(n,e)=>{try{const t=new Date;t.setHours(0,0,0,0);const s=e0(rs(_t,Ot.CHALLENGE_HISTORY),Gu("userId","==",n),Gu("missionId","==",e),Gu("timestamp",">=",t.getTime()),Q8(1));return!(await r0(s)).empty}catch(t){return console.error("Error checking mission completion:",t),!1}},DD=async n=>{try{const e=new Date;e.setHours(0,0,0,0);const t=e0(rs(_t,Ot.CHALLENGE_HISTORY),Gu("userId","==",n),Gu("timestamp",">=",e.getTime())),s=await r0(t),c=new Set;return s.forEach(h=>{const p=h.data();p.missionId&&c.add(p.missionId)}),c}catch(e){return console.error("Error fetching today completed missions:",e),new Set}},MD=async n=>{try{if(await OD(n.userId,n.missionId)){console.warn("Mission already completed today");return}const t=new Date;if(t.setHours(0,0,0,0),(await r0(e0(rs(_t,Ot.MISSION_SUBMISSIONS)))).docs.find(h=>{const p=h.data();return p.userId===n.userId&&p.missionId===n.missionId&&p.status==="pending"&&p.timestamp>=t.getTime()})){console.warn("Mission submission already pending today");return}await Ko(Cn(_t,Ot.MISSION_SUBMISSIONS,n.id),n)}catch(e){console.error("Error submitting mission:",e)}},PD=async n=>{try{await lT(_t,async e=>{const t=Cn(_t,Ot.MISSION_SUBMISSIONS,n),s=await e.get(t);if(!s.exists())throw new Error("");const c=s.data();if(c.status!=="pending")throw new Error("");e.update(t,{status:"approved"});const h=`h_${Date.now()}`,p=Cn(_t,Ot.CHALLENGE_HISTORY,h);e.set(p,{id:h,userId:c.userId,missionId:c.missionId,timestamp:Date.now()});const T=Cn(_t,Ot.STUDENTS,c.userId),w=await e.get(T);if(w.exists()){const E=w.data();e.update(T,{points:E.points+c.points,totalEarned:E.totalEarned+c.points})}})}catch(e){throw console.error("Error approving mission (Transaction):",e),e}},LD=async n=>{try{const e=Cn(_t,Ot.MISSION_SUBMISSIONS,n);await Dl(e,{status:"rejected"})}catch(e){console.error("Error rejecting mission:",e)}},qT=n=>Xa(rs(_t,Ot.MISSION_SUBMISSIONS),e=>{n(e.docs.map(t=>({...t.data(),id:t.id})))}),kD=async n=>{try{await Ko(Cn(_t,Ot.PRODUCTS,n.id),n)}catch(e){console.error("Error adding product:",e)}},BD=async(n,e)=>{try{const t=Cn(_t,Ot.PRODUCTS,n);await Dl(t,{stock:Math.max(0,e)})}catch(t){console.error("Error updating product stock:",t)}},UD=async n=>{try{await yh(Cn(_t,Ot.PRODUCTS,n))}catch(e){console.error("Error deleting product:",e)}},VD=async n=>{try{await Ko(Cn(_t,Ot.POINT_REASONS,n.id),n)}catch(e){console.error("Error adding point reason:",e)}},jD=async n=>{try{await yh(Cn(_t,Ot.POINT_REASONS,n))}catch(e){console.error("Error deleting point reason:",e)}},FD=n=>Xa(rs(_t,Ot.POINT_REASONS),e=>{const t=e.docs.map(s=>({...s.data(),id:s.id}));n(t)}),zD=async n=>{try{await Ko(Cn(_t,Ot.WISHES,n.id),n)}catch(e){console.error("Error adding wish:",e)}},HD=async(n,e)=>{try{const t=Cn(_t,Ot.WISHES,n);await Dl(t,e)}catch(t){console.error("Error updating wish:",t)}},GD=async(n,e)=>{try{const t=Cn(_t,Ot.WISHES,n),s=await aT(t);if(s.exists()){const h=s.data().likedBy||[];if(h.includes(e)){console.error("");return}await Dl(t,{likedBy:[...h,e]})}}catch(t){console.error("Error liking wish:",t)}},qD=n=>Xa(rs(_t,Ot.STUDENTS),e=>{const t=e.docs.map(s=>({...s.data(),id:s.id}));n(t)},e=>{console.error("Error in subscribeToStudents:",e)}),YT=n=>Xa(rs(_t,Ot.MISSIONS),e=>{const t=e.docs.map(s=>({...s.data(),id:s.id}));n(t)},e=>console.error("Error subscribing to missions:",e)),XT=n=>Xa(rs(_t,Ot.PRODUCTS),e=>{const t=e.docs.map(s=>({...s.data(),id:s.id}));n(t)},e=>{console.error("Error subscribing to products:",e),console.error("")}),WT=n=>Xa(rs(_t,Ot.WISHES),e=>{const t=e.docs.map(s=>({...s.data(),id:s.id}));n(t)},e=>console.error("Error subscribing to wishes:",e)),KT=n=>Xa(rs(_t,Ot.REDEMPTIONS),e=>{const t=e.docs.map(s=>{const c=s.data();return{id:s.id,status:"pending",pointsSpent:0,productName:"",timestamp:Date.now(),userId:"unknown",qrCodeData:"",...c}});n(t)},e=>{console.error("Error subscribing to redemptions:",e)}),YD=async(n,e="",t="center",s="h-48",c="md:h-72")=>{try{const h={id:`banner_${Date.now()}`,imageUrl:n,tag:e,active:!0,timestamp:Date.now(),objectPosition:t,mobileHeight:s,desktopHeight:c};await Ko(Cn(_t,Ot.BANNERS,h.id),h)}catch(h){throw console.error("Error adding banner:",h),h}},XD=async n=>{try{await yh(Cn(_t,Ot.BANNERS,n))}catch(e){throw console.error("Error deleting banner:",e),e}},_p=n=>{const e=e0(rs(_t,Ot.BANNERS));return Xa(e,t=>{const s=t.docs.map(c=>c.data());s.sort((c,h)=>h.timestamp-c.timestamp),n(s)},t=>{console.error("Error subscribing to banners:",t)})},WD=({user:n,onUserUpdate:e})=>{const{showAlert:t}=Lc(),[s,c]=ne.useState(!1),h=T=>{var C;const w=(C=T.target.files)==null?void 0:C[0];if(!w)return;if(w.size>500*1024){t(" 500KB ","error");return}if(!w.type.startsWith("image/")){t(" JPG  PNG ","error");return}c(!0);const E=new FileReader;E.onloadend=async()=>{try{const I=E.result,M={...n,avatar:I};await La(M),e(),t("","success")}catch(I){console.error("Error updating avatar:",I),t("","error")}finally{c(!1)}},E.readAsDataURL(w)},p=async()=>{if(confirm(""))try{const T=`https://api.dicebear.com/7.x/avataaars/svg?seed=${n.name}&mouth=smile&eyebrows=defaultNatural&eyes=default`,w={...n,avatar:T};await La(w),e(),t("","success")}catch(T){console.error("Error resetting avatar:",T),t("","error")}};return v.jsxs("div",{className:"space-y-8 pb-20 animate-in fade-in duration-500",children:[v.jsxs("header",{children:[v.jsxs("h1",{className:"text-3xl font-black text-slate-800 flex items-center gap-3",children:[v.jsx(ad,{className:"text-indigo-500"}),""]}),v.jsx("p",{className:"text-slate-500 mt-1 font-medium",children:""})]}),v.jsx("div",{className:"bg-white rounded-[2.5rem] p-8 border border-slate-100 shadow-xl shadow-slate-200/50",children:v.jsxs("div",{className:"flex flex-col items-center gap-6",children:[v.jsxs("div",{className:"relative group",children:[v.jsx("div",{className:"absolute inset-0 bg-indigo-500 rounded-full blur-xl opacity-20 group-hover:opacity-40 transition-opacity"}),v.jsx("img",{src:n.avatar,alt:n.name,className:"w-40 h-40 rounded-full border-4 border-white shadow-2xl object-cover relative z-10"}),v.jsxs("label",{className:"absolute bottom-0 right-0 z-20 cursor-pointer",children:[v.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:h,disabled:s}),v.jsx("div",{className:"bg-slate-800 text-white p-3 rounded-2xl hover:bg-slate-700 transition-colors shadow-lg hover:scale-105 active:scale-95",children:v.jsx(vg,{size:20})})]})]}),v.jsxs("div",{className:"text-center",children:[v.jsx("h2",{className:"text-2xl font-black text-slate-800",children:n.name}),v.jsxs("div",{className:"flex items-center justify-center gap-2 mt-1",children:[v.jsx("span",{className:"text-slate-400 font-bold text-sm uppercase tracking-wider",children:n.role==="ADMIN"?"":""}),v.jsxs("span",{className:"px-2 py-0.5 rounded-lg bg-indigo-100 text-indigo-700 text-xs font-black",children:["Lv.",Math.floor(n.totalEarned/500)+1]})]})]}),v.jsxs("div",{className:"w-full max-w-sm space-y-4 pt-6 mt-6 border-t border-slate-50",children:[v.jsxs("label",{className:"block w-full cursor-pointer",children:[v.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:h,disabled:s}),v.jsxs("div",{className:"w-full bg-indigo-50 hover:bg-indigo-100 text-indigo-600 font-bold py-4 rounded-2xl transition-all flex items-center justify-center gap-2 border-2 border-transparent hover:border-indigo-200",children:[v.jsx(Ig,{size:20}),s?"...":""]})]}),v.jsxs("button",{onClick:p,className:"w-full bg-slate-50 hover:bg-slate-100 text-slate-500 font-bold py-4 rounded-2xl transition-all flex items-center justify-center gap-2",children:[v.jsx(C3,{size:20}),""]})]}),v.jsx("div",{className:"bg-amber-50 rounded-2xl p-4 text-xs font-bold text-amber-600/80 leading-relaxed text-center max-w-sm",children:"  500KB "})]})})]})};var KD={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var S_;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(S_||(S_={}));var C_;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(C_||(C_={}));var I_;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(I_||(I_={}));var N_;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(N_||(N_={}));var R_;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(R_||(R_={}));var O_;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(O_||(O_={}));var D_;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(D_||(D_={}));var M_;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(M_||(M_={}));var P_;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(P_||(P_={}));var L_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(L_||(L_={}));var k_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(k_||(k_={}));var B_;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(B_||(B_={}));var U_;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(U_||(U_={}));var V_;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(V_||(V_={}));var j_;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(j_||(j_={}));var F_;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(F_||(F_={}));var z_;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(z_||(z_={}));var H_;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(H_||(H_={}));var G_;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(G_||(G_={}));var q_;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(q_||(q_={}));var Y_;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Y_||(Y_={}));var X_;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(X_||(X_={}));var W_;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(W_||(W_={}));var K_;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(K_||(K_={}));var Q_;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Q_||(Q_={}));var Z_;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Z_||(Z_={}));var J_;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(J_||(J_={}));var $_;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})($_||($_={}));var ew;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(ew||(ew={}));var tw;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(tw||(tw={}));var nw;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(nw||(nw={}));var rw;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(rw||(rw={}));var iw;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(iw||(iw={}));var sw;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(sw||(sw={}));var aw;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(aw||(aw={}));var ow;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(ow||(ow={}));var lw;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(lw||(lw={}));var cw;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(cw||(cw={}));var uw;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(uw||(uw={}));var hw;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(hw||(hw={}));var fw;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(fw||(fw={}));var dw;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(dw||(dw={}));var gw;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(gw||(gw={}));var mw;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(mw||(mw={}));var pw;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(pw||(pw={}));var xw;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(xw||(xw={}));var yw;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(yw||(yw={}));var Ew;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Ew||(Ew={}));var _w;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(_w||(_w={}));var ww;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(ww||(ww={}));var Aw;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(Aw||(Aw={}));var bw;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(bw||(bw={}));var Tw;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Tw||(Tw={}));var vw;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(vw||(vw={}));var Sw;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Sw||(Sw={}));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Cw;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Cw||(Cw={}));function Od(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(n);c<s.length;c++)e.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(n,s[c])&&(t[s[c]]=n[s[c]]);return t}function Iw(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Xn(n){return this instanceof Xn?(this.v=n,this):new Xn(n)}function Yu(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),c,h=[];return c=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),T("next"),T("throw"),T("return",p),c[Symbol.asyncIterator]=function(){return this},c;function p(B){return function(W){return Promise.resolve(W).then(B,I)}}function T(B,W){s[B]&&(c[B]=function($){return new Promise(function(q,_e){h.push([B,$,q,_e])>1||w(B,$)})},W&&(c[B]=W(c[B])))}function w(B,W){try{E(s[B](W))}catch($){M(h[0][3],$)}}function E(B){B.value instanceof Xn?Promise.resolve(B.value.v).then(C,I):M(h[0][2],B)}function C(B){w("next",B)}function I(B){w("throw",B)}function M(B,W){B(W),h.shift(),h.length&&w(h[0][0],h[0][1])}}function bc(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Iw=="function"?Iw(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(h){t[h]=n[h]&&function(p){return new Promise(function(T,w){p=n[h](p),c(T,w,p.done,p.value)})}}function c(h,p,T,w){Promise.resolve(w).then(function(E){h({value:E,done:T})},p)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let QT=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return QT=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^t()&15>>+s/4).toString(16))};const QD=()=>QT();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rm(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const im=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ws extends Error{}class Ti extends ws{constructor(e,t,s,c){super(`${Ti.makeMessage(e,t,s)}`),this.status=e,this.headers=c,this.error=t}static makeMessage(e,t,s){const c=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):s;return e&&c?`${e} ${c}`:e?`${e} status code (no body)`:c||"(no status code or body)"}static generate(e,t,s,c){if(!e||!c)return new l0({message:s,cause:im(t)});const h=t;return e===400?new JT(e,h,s,c):e===401?new $T(e,h,s,c):e===403?new ev(e,h,s,c):e===404?new tv(e,h,s,c):e===409?new nv(e,h,s,c):e===422?new rv(e,h,s,c):e===429?new iv(e,h,s,c):e>=500?new sv(e,h,s,c):new Ti(e,h,s,c)}}class sm extends Ti{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class l0 extends Ti{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class ZT extends l0{constructor({message:e}={}){super({message:e??"Request timed out."})}}class JT extends Ti{}class $T extends Ti{}class ev extends Ti{}class tv extends Ti{}class nv extends Ti{}class rv extends Ti{}class iv extends Ti{}class sv extends Ti{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ZD=/^[a-z][a-z0-9+.-]*:/i,JD=n=>ZD.test(n);let am=n=>(am=Array.isArray,am(n));const $D=am;let eM=$D;const Nw=eM;function tM(n){if(!n)return!0;for(const e in n)return!1;return!0}function nM(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const rM=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new ws(`${n} must be an integer`);if(e<0)throw new ws(`${n} must be a positive integer`);return e},iM=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sM=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dc="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aM(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const oM=()=>{var n,e,t,s,c;const h=aM();if(h==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":dc,"X-Stainless-OS":Ow(Deno.build.os),"X-Stainless-Arch":Rw(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":dc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(h==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":dc,"X-Stainless-OS":Ow((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":Rw((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(c=globalThis.process.version)!==null&&c!==void 0?c:"unknown"};const p=lM();return p?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":dc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${p.browser}`,"X-Stainless-Runtime-Version":p.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":dc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function lM(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const s=t.exec(navigator.userAgent);if(s){const c=s[1]||0,h=s[2]||0,p=s[3]||0;return{browser:e,version:`${c}.${h}.${p}`}}}return null}const Rw=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",Ow=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let Uf;const cM=()=>Uf??(Uf=oM());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uM(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function av(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function hM(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return av({start(){},async pull(t){const{done:s,value:c}=await e.next();s?t.close():t.enqueue(c)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function ov(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function fM(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const s=n.getReader(),c=s.cancel();s.releaseLock(),await c}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dM=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lv=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function _g(n,e,t){return lv(),new File(n,e??"unknown_file",t)}function gM(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const mM=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cv=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",pM=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&cv(n),xM=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function yM(n,e,t){if(lv(),n=await n,pM(n))return n instanceof File?n:_g([await n.arrayBuffer()],n.name);if(xM(n)){const c=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),_g(await om(c),e,t)}const s=await om(n);if(e||(e=gM(n)),!(t!=null&&t.type)){const c=s.find(h=>typeof h=="object"&&"type"in h&&h.type);typeof c=="string"&&(t=Object.assign(Object.assign({},t),{type:c}))}return _g(s,e,t)}async function om(n){var e,t,s,c,h;let p=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)p.push(n);else if(cv(n))p.push(n instanceof Blob?n:await n.arrayBuffer());else if(mM(n))try{for(var T=!0,w=bc(n),E;E=await w.next(),e=E.done,!e;T=!0){c=E.value,T=!1;const C=c;p.push(...await om(C))}}catch(C){t={error:C}}finally{try{!T&&!e&&(s=w.return)&&await s.call(w)}finally{if(t)throw t.error}}else{const C=(h=n==null?void 0:n.constructor)===null||h===void 0?void 0:h.name;throw new Error(`Unexpected data type: ${typeof n}${C?`; constructor: ${C}`:""}${EM(n)}`)}return p}function EM(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uv{constructor(e){this._client=e}}uv._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hv(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Dw=Object.freeze(Object.create(null)),_M=(n=hv)=>(function(t,...s){if(t.length===1)return t[0];let c=!1;const h=[],p=t.reduce((C,I,M)=>{var B,W,$;/[?#]/.test(I)&&(c=!0);const q=s[M];let _e=(c?encodeURIComponent:n)(""+q);return M!==s.length&&(q==null||typeof q=="object"&&q.toString===(($=Object.getPrototypeOf((W=Object.getPrototypeOf((B=q.hasOwnProperty)!==null&&B!==void 0?B:Dw))!==null&&W!==void 0?W:Dw))===null||$===void 0?void 0:$.toString))&&(_e=q+"",h.push({start:C.length+I.length,length:_e.length,error:`Value of type ${Object.prototype.toString.call(q).slice(8,-1)} is not a valid path parameter`})),C+I+(M===s.length?"":_e)},""),T=p.split(/[?#]/,1)[0],w=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let E;for(;(E=w.exec(T))!==null;)h.push({start:E.index,length:E[0].length,error:`Value "${E[0]}" can't be safely passed as a path parameter`});if(h.sort((C,I)=>C.start-I.start),h.length>0){let C=0;const I=h.reduce((M,B)=>{const W=" ".repeat(B.start-C),$="^".repeat(B.length);return C=B.start+B.length,M+W+$},"");throw new ws(`Path parameters result in path with invalid segments:
${h.map(M=>M.error).join(`
`)}
${p}
${I}`)}return p}),Vf=_M(hv);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fv extends uv{create(e,t){var s;const{api_version:c=this._client.apiVersion}=e,h=Od(e,["api_version"]);if("model"in h&&"agent_config"in h)throw new ws("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in h&&"generation_config"in h)throw new ws("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Vf`/${c}/interactions`,Object.assign(Object.assign({body:h},t),{stream:(s=e.stream)!==null&&s!==void 0?s:!1}))}delete(e,t={},s){const{api_version:c=this._client.apiVersion}=t??{};return this._client.delete(Vf`/${c}/interactions/${e}`,s)}cancel(e,t={},s){const{api_version:c=this._client.apiVersion}=t??{};return this._client.post(Vf`/${c}/interactions/${e}/cancel`,s)}get(e,t={},s){var c;const h=t??{},{api_version:p=this._client.apiVersion}=h,T=Od(h,["api_version"]);return this._client.get(Vf`/${p}/interactions/${e}`,Object.assign(Object.assign({query:T},s),{stream:(c=t==null?void 0:t.stream)!==null&&c!==void 0?c:!1}))}}fv._key=Object.freeze(["interactions"]);class dv extends fv{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wM(n){let e=0;for(const c of n)e+=c.length;const t=new Uint8Array(e);let s=0;for(const c of n)t.set(c,s),s+=c.length;return t}let jf;function wp(n){let e;return(jf??(e=new globalThis.TextEncoder,jf=e.encode.bind(e)))(n)}let Ff;function Mw(n){let e;return(Ff??(e=new globalThis.TextDecoder,Ff=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class c0{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?wp(e):e;this.buffer=wM([this.buffer,t]);const s=[];let c;for(;(c=AM(this.buffer,this.carriageReturnIndex))!=null;){if(c.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=c.index;continue}if(this.carriageReturnIndex!=null&&(c.index!==this.carriageReturnIndex+1||c.carriage)){s.push(Mw(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const h=this.carriageReturnIndex!==null?c.preceding-1:c.preceding,p=Mw(this.buffer.subarray(0,h));s.push(p),this.buffer=this.buffer.subarray(c.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}c0.NEWLINE_CHARS=new Set([`
`,"\r"]);c0.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function AM(n,e){for(let c=e??0;c<n.length;c++){if(n[c]===10)return{preceding:c,index:c+1,carriage:!1};if(n[c]===13)return{preceding:c,index:c+1,carriage:!0}}return null}function bM(n){for(let s=0;s<n.length-1;s++){if(n[s]===10&&n[s+1]===10||n[s]===13&&n[s+1]===13)return s+2;if(n[s]===13&&n[s+1]===10&&s+3<n.length&&n[s+2]===13&&n[s+3]===10)return s+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Dd={off:0,error:200,warn:300,info:400,debug:500},Pw=(n,e,t)=>{if(n){if(nM(Dd,n))return n;wi(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Dd))}`)}};function Lu(){}function zf(n,e,t){return!e||Dd[n]>Dd[t]?Lu:e[n].bind(e)}const TM={error:Lu,warn:Lu,info:Lu,debug:Lu};let Lw=new WeakMap;function wi(n){var e;const t=n.logger,s=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return TM;const c=Lw.get(t);if(c&&c[0]===s)return c[1];const h={error:zf("error",t,s),warn:zf("warn",t,s),info:zf("info",t,s),debug:zf("debug",t,s)};return Lw.set(t,[s,h]),h}const _l=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pc{constructor(e,t,s){this.iterator=e,this.controller=t,this.client=s}static fromSSEResponse(e,t,s){let c=!1;const h=s?wi(s):console;function p(){return Yu(this,arguments,function*(){var w,E,C,I;if(c)throw new ws("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");c=!0;let M=!1;try{try{for(var B=!0,W=bc(vM(e,t)),$;$=yield Xn(W.next()),w=$.done,!w;B=!0){I=$.value,B=!1;const q=I;if(!M)if(q.data.startsWith("[DONE]")){M=!0;continue}else try{yield yield Xn(JSON.parse(q.data))}catch(_e){throw h.error("Could not parse message into JSON:",q.data),h.error("From chunk:",q.raw),_e}}}catch(q){E={error:q}}finally{try{!B&&!w&&(C=W.return)&&(yield Xn(C.call(W)))}finally{if(E)throw E.error}}M=!0}catch(q){if(rm(q))return yield Xn(void 0);throw q}finally{M||t.abort()}})}return new pc(p,t,s)}static fromReadableStream(e,t,s){let c=!1;function h(){return Yu(this,arguments,function*(){var w,E,C,I;const M=new c0,B=ov(e);try{for(var W=!0,$=bc(B),q;q=yield Xn($.next()),w=q.done,!w;W=!0){I=q.value,W=!1;const _e=I;for(const ae of M.decode(_e))yield yield Xn(ae)}}catch(_e){E={error:_e}}finally{try{!W&&!w&&(C=$.return)&&(yield Xn(C.call($)))}finally{if(E)throw E.error}}for(const _e of M.flush())yield yield Xn(_e)})}function p(){return Yu(this,arguments,function*(){var w,E,C,I;if(c)throw new ws("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");c=!0;let M=!1;try{try{for(var B=!0,W=bc(h()),$;$=yield Xn(W.next()),w=$.done,!w;B=!0){I=$.value,B=!1;const q=I;M||q&&(yield yield Xn(JSON.parse(q)))}}catch(q){E={error:q}}finally{try{!B&&!w&&(C=W.return)&&(yield Xn(C.call(W)))}finally{if(E)throw E.error}}M=!0}catch(q){if(rm(q))return yield Xn(void 0);throw q}finally{M||t.abort()}})}return new pc(p,t,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],s=this.iterator(),c=h=>({next:()=>{if(h.length===0){const p=s.next();e.push(p),t.push(p)}return h.shift()}});return[new pc(()=>c(e),this.controller,this.client),new pc(()=>c(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return av({async start(){t=e[Symbol.asyncIterator]()},async pull(s){try{const{value:c,done:h}=await t.next();if(h)return s.close();const p=wp(JSON.stringify(c)+`
`);s.enqueue(p)}catch(c){s.error(c)}},async cancel(){var s;await((s=t.return)===null||s===void 0?void 0:s.call(t))}})}}function vM(n,e){return Yu(this,arguments,function*(){var s,c,h,p;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new ws("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new ws("Attempted to iterate over a response with no body");const T=new CM,w=new c0,E=ov(n.body);try{for(var C=!0,I=bc(SM(E)),M;M=yield Xn(I.next()),s=M.done,!s;C=!0){p=M.value,C=!1;const B=p;for(const W of w.decode(B)){const $=T.decode(W);$&&(yield yield Xn($))}}}catch(B){c={error:B}}finally{try{!C&&!s&&(h=I.return)&&(yield Xn(h.call(I)))}finally{if(c)throw c.error}}for(const B of w.flush()){const W=T.decode(B);W&&(yield yield Xn(W))}})}function SM(n){return Yu(this,arguments,function*(){var t,s,c,h;let p=new Uint8Array;try{for(var T=!0,w=bc(n),E;E=yield Xn(w.next()),t=E.done,!t;T=!0){h=E.value,T=!1;const C=h;if(C==null)continue;const I=C instanceof ArrayBuffer?new Uint8Array(C):typeof C=="string"?wp(C):C;let M=new Uint8Array(p.length+I.length);M.set(p),M.set(I,p.length),p=M;let B;for(;(B=bM(p))!==-1;)yield yield Xn(p.slice(0,B)),p=p.slice(B)}}catch(C){s={error:C}}finally{try{!T&&!t&&(c=w.return)&&(yield Xn(c.call(w)))}finally{if(s)throw s.error}}p.length>0&&(yield yield Xn(p))})}class CM{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const h={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],h}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,s,c]=IM(e,":");return c.startsWith(" ")&&(c=c.substring(1)),t==="event"?this.event=c:t==="data"&&this.data.push(c),null}}function IM(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function NM(n,e){const{response:t,requestLogID:s,retryOfRequestLogID:c,startTime:h}=e,p=await(async()=>{var T;if(e.options.stream)return wi(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):pc.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const w=t.headers.get("content-type"),E=(T=w==null?void 0:w.split(";")[0])===null||T===void 0?void 0:T.trim();return(E==null?void 0:E.includes("application/json"))||(E==null?void 0:E.endsWith("+json"))?await t.json():await t.text()})();return wi(n).debug(`[${s}] response parsed`,_l({retryOfRequestLogID:c,url:t.url,status:t.status,body:p,durationMs:Date.now()-h})),p}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ap extends Promise{constructor(e,t,s=NM){super(c=>{c(null)}),this.responsePromise=t,this.parseResponse=s,this.client=e}_thenUnwrap(e){return new Ap(this.client,this.responsePromise,async(t,s)=>e(await this.parseResponse(t,s),s))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gv=Symbol("brand.privateNullableHeaders");function*RM(n){if(!n)return;if(gv in n){const{values:s,nulls:c}=n;yield*s.entries();for(const h of c)yield[h,null];return}let e=!1,t;n instanceof Headers?t=n.entries():Nw(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let s of t){const c=s[0];if(typeof c!="string")throw new TypeError("expected header name to be a string");const h=Nw(s[1])?s[1]:[s[1]];let p=!1;for(const T of h)T!==void 0&&(e&&!p&&(p=!0,yield[c,null]),yield[c,T])}}const Iu=n=>{const e=new Headers,t=new Set;for(const s of n){const c=new Set;for(const[h,p]of RM(s)){const T=h.toLowerCase();c.has(T)||(e.delete(h),c.add(T)),p===null?(e.delete(h),t.add(T)):(e.append(h,p),t.delete(T))}}return{[gv]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wg=n=>{var e,t,s,c,h,p;if(typeof globalThis.process<"u")return(s=(t=(e=KD)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(p=(h=(c=globalThis.Deno.env)===null||c===void 0?void 0:c.get)===null||h===void 0?void 0:h.call(c,n))===null||p===void 0?void 0:p.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var mv;class u0{constructor(e){var t,s,c,h,p,T,w,{baseURL:E=wg("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:C=(t=wg("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:I="v1beta"}=e,M=Od(e,["baseURL","apiKey","apiVersion"]);const B=Object.assign(Object.assign({apiKey:C,apiVersion:I},M),{baseURL:E||"https://generativelanguage.googleapis.com"});this.baseURL=B.baseURL,this.timeout=(s=B.timeout)!==null&&s!==void 0?s:u0.DEFAULT_TIMEOUT,this.logger=(c=B.logger)!==null&&c!==void 0?c:console;const W="warn";this.logLevel=W,this.logLevel=(p=(h=Pw(B.logLevel,"ClientOptions.logLevel",this))!==null&&h!==void 0?h:Pw(wg("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&p!==void 0?p:W,this.fetchOptions=B.fetchOptions,this.maxRetries=(T=B.maxRetries)!==null&&T!==void 0?T:2,this.fetch=(w=B.fetch)!==null&&w!==void 0?w:uM(),this.encoder=dM,this._options=B,this.apiKey=C,this.apiVersion=I,this.clientAdapter=B.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=Iu([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return Iu([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Iu([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,s])=>typeof s<"u").map(([t,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(t)}=`;throw new ws(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${dc}`}defaultIdempotencyKey(){return`stainless-node-retry-${QD()}`}makeStatusError(e,t,s,c){return Ti.generate(e,t,s,c)}buildURL(e,t,s){const c=!this.baseURLOverridden()&&s||this.baseURL,h=JD(e)?new URL(e):new URL(c+(c.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),p=this.defaultQuery();return tM(p)||(t=Object.assign(Object.assign({},p),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(h.search=this.stringifyQuery(t)),h.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:s}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,s){return this.request(Promise.resolve(s).then(c=>Object.assign({method:e,path:t},c)))}request(e,t=null){return new Ap(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,s){var c,h,p;const T=await e,w=(c=T.maxRetries)!==null&&c!==void 0?c:this.maxRetries;t==null&&(t=w),await this.prepareOptions(T);const{req:E,url:C,timeout:I}=await this.buildRequest(T,{retryCount:w-t});await this.prepareRequest(E,{url:C,options:T});const M="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),B=s===void 0?"":`, retryOf: ${s}`,W=Date.now();if(wi(this).debug(`[${M}] sending request`,_l({retryOfRequestLogID:s,method:T.method,url:C,options:T,headers:E.headers})),!((h=T.signal)===null||h===void 0)&&h.aborted)throw new sm;const $=new AbortController,q=await this.fetchWithTimeout(C,E,I,$).catch(im),_e=Date.now();if(q instanceof globalThis.Error){const Q=`retrying, ${t} attempts remaining`;if(!((p=T.signal)===null||p===void 0)&&p.aborted)throw new sm;const le=rm(q)||/timed? ?out/i.test(String(q)+("cause"in q?String(q.cause):""));if(t)return wi(this).info(`[${M}] connection ${le?"timed out":"failed"} - ${Q}`),wi(this).debug(`[${M}] connection ${le?"timed out":"failed"} (${Q})`,_l({retryOfRequestLogID:s,url:C,durationMs:_e-W,message:q.message})),this.retryRequest(T,t,s??M);throw wi(this).info(`[${M}] connection ${le?"timed out":"failed"} - error; no more retries left`),wi(this).debug(`[${M}] connection ${le?"timed out":"failed"} (error; no more retries left)`,_l({retryOfRequestLogID:s,url:C,durationMs:_e-W,message:q.message})),le?new ZT:new l0({cause:q})}const ae=`[${M}${B}] ${E.method} ${C} ${q.ok?"succeeded":"failed"} with status ${q.status} in ${_e-W}ms`;if(!q.ok){const Q=await this.shouldRetry(q);if(t&&Q){const V=`retrying, ${t} attempts remaining`;return await fM(q.body),wi(this).info(`${ae} - ${V}`),wi(this).debug(`[${M}] response error (${V})`,_l({retryOfRequestLogID:s,url:q.url,status:q.status,headers:q.headers,durationMs:_e-W})),this.retryRequest(T,t,s??M,q.headers)}const le=Q?"error; no more retries left":"error; not retryable";wi(this).info(`${ae} - ${le}`);const De=await q.text().catch(V=>im(V).message),Oe=iM(De),j=Oe?void 0:De;throw wi(this).debug(`[${M}] response error (${le})`,_l({retryOfRequestLogID:s,url:q.url,status:q.status,headers:q.headers,message:j,durationMs:Date.now()-W})),this.makeStatusError(q.status,Oe,j,q.headers)}return wi(this).info(ae),wi(this).debug(`[${M}] response start`,_l({retryOfRequestLogID:s,url:q.url,status:q.status,headers:q.headers,durationMs:_e-W})),{response:q,options:T,controller:$,requestLogID:M,retryOfRequestLogID:s,startTime:W}}async fetchWithTimeout(e,t,s,c){const h=t||{},{signal:p,method:T}=h,w=Od(h,["signal","method"]);p&&p.addEventListener("abort",()=>c.abort());const E=setTimeout(()=>c.abort(),s),C=globalThis.ReadableStream&&w.body instanceof globalThis.ReadableStream||typeof w.body=="object"&&w.body!==null&&Symbol.asyncIterator in w.body,I=Object.assign(Object.assign(Object.assign({signal:c.signal},C?{duplex:"half"}:{}),{method:"GET"}),w);T&&(I.method=T.toUpperCase());try{return await this.fetch.call(void 0,e,I)}finally{clearTimeout(E)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,s,c){var h;let p;const T=c==null?void 0:c.get("retry-after-ms");if(T){const E=parseFloat(T);Number.isNaN(E)||(p=E)}const w=c==null?void 0:c.get("retry-after");if(w&&!p){const E=parseFloat(w);Number.isNaN(E)?p=Date.parse(w)-Date.now():p=E*1e3}if(!(p&&0<=p&&p<60*1e3)){const E=(h=e.maxRetries)!==null&&h!==void 0?h:this.maxRetries;p=this.calculateDefaultRetryTimeoutMillis(t,E)}return await sM(p),this.makeRequest(e,t-1,s)}calculateDefaultRetryTimeoutMillis(e,t){const h=t-e,p=Math.min(.5*Math.pow(2,h),8),T=1-Math.random()*.25;return p*T*1e3}async buildRequest(e,{retryCount:t=0}={}){var s,c,h;const p=Object.assign({},e),{method:T,path:w,query:E,defaultBaseURL:C}=p,I=this.buildURL(w,E,C);"timeout"in p&&rM("timeout",p.timeout),p.timeout=(s=p.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:M,body:B}=this.buildBody({options:p}),W=await this.buildHeaders({options:e,method:T,bodyHeaders:M,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:T,headers:W},p.signal&&{signal:p.signal}),globalThis.ReadableStream&&B instanceof globalThis.ReadableStream&&{duplex:"half"}),B&&{body:B}),(c=this.fetchOptions)!==null&&c!==void 0?c:{}),(h=p.fetchOptions)!==null&&h!==void 0?h:{}),url:I,timeout:p.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:s,retryCount:c}){let h={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),h[this.idempotencyHeader]=e.idempotencyKey);const p=await this.authHeaders(e);let T=Iu([h,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(c)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),cM()),this._options.defaultHeaders,s,e.headers,p]);return this.validateHeaders(T),T.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=Iu([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:hM(e)}:this.encoder({body:e,headers:s})}}u0.DEFAULT_TIMEOUT=6e4;class Kr extends u0{constructor(){super(...arguments),this.interactions=new dv(this)}}mv=Kr;Kr.GeminiNextGenAPIClient=mv;Kr.GeminiNextGenAPIClientError=ws;Kr.APIError=Ti;Kr.APIConnectionError=l0;Kr.APIConnectionTimeoutError=ZT;Kr.APIUserAbortError=sm;Kr.NotFoundError=tv;Kr.ConflictError=nv;Kr.RateLimitError=iv;Kr.BadRequestError=JT;Kr.AuthenticationError=$T;Kr.InternalServerError=sv;Kr.PermissionDeniedError=ev;Kr.UnprocessableEntityError=rv;Kr.toFile=yM;Kr.Interactions=dv;const OM=()=>null,DM=async(n,e)=>{const t=Eg[Math.floor(Math.random()*Eg.length)],s=`${t.text} ${t.author}`;try{const c=OM();return c&&(await c.models.generateContent({model:"gemini-2.0-flash-exp",contents:`
        
        
        - ${n.name}
        - ${e.name}
        - ${n.points}
        - ${n.totalEarned}

        
        ${Eg.map(p=>`${p.text}-- ${p.author}`).join(`
`)}

        30-60
        
      `})).text()||s}catch(c){return console.error("Gemini Error:",c),s}},MM=({user:n,rank:e,onUserUpdate:t})=>{var z,V;const{showAlert:s}=Lc(),[c,h]=ne.useState("..."),[p,T]=ne.useState([]),[w,E]=ne.useState([]),[C,I]=ne.useState(null),[M,B]=ne.useState(new Set),[W,$]=ne.useState(!1),[q,_e]=ne.useState([]),[ae,Q]=ne.useState(0),le=Vo[Vo.indexOf(e)+1]||null,De=le?Math.min(100,(n.totalEarned-e.threshold)/(le.threshold-e.threshold)*100):100,Oe=Math.floor(n.totalEarned/500)+1;ne.useEffect(()=>{(async()=>{const fe=await DM(n,e);h(fe)})();const Z=YT(async fe=>{const me=fe.filter(Ge=>Ge.isActive);T(me);const be=await DD(n.id);B(be)}),J=qT(fe=>{const me=new Date;me.setHours(0,0,0,0),E(fe.filter(be=>be.userId===n.id&&be.timestamp>=me.getTime()))}),K=_p(_e);let $e;return q.length>1&&($e=setInterval(()=>{Q(fe=>(fe+1)%q.length)},5e3)),()=>{Z(),J(),K(),$e&&clearInterval($e)}},[n.id,e,q.length]);const j=async Y=>{if(C)return;if(Y.deadline&&Y.deadline<Date.now()){s("","error");return}if(w.some(J=>J.missionId===Y.id&&J.status==="pending")){s("","info");return}I(Y.id);try{await MD({id:`sub_${Date.now()}`,userId:n.id,userName:n.name,missionId:Y.id,missionTitle:Y.title,points:Y.points,timestamp:Date.now(),status:"pending"}),s("","success")}catch(J){console.error("Error submitting mission:",J),s("","error")}finally{I(null)}};return v.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-10 relative",children:[W&&v.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:v.jsxs("div",{className:"bg-white rounded-[2.5rem] max-w-lg w-full p-8 shadow-2xl animate-in zoom-in-95 duration-200 border border-slate-100 relative",children:[v.jsx("button",{onClick:()=>$(!1),className:"absolute top-6 right-6 p-2 bg-slate-100 rounded-full hover:bg-slate-200 transition-colors text-slate-500",children:v.jsx(Do,{size:20})}),v.jsxs("h3",{className:"text-2xl font-black text-slate-800 mb-6 flex items-center gap-3",children:[v.jsx(Yy,{className:"text-amber-500"}),""]}),v.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto pr-2 custom-scrollbar",children:Vo.map((Y,Z)=>v.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-2xl ${n.totalEarned>=Y.threshold?"bg-indigo-50 border-2 border-indigo-100":"bg-slate-50 border border-slate-100 grayscale opacity-70"}`,children:[v.jsx("div",{className:"text-3xl",children:Y.icon}),v.jsxs("div",{className:"flex-1",children:[v.jsx("h4",{className:"font-bold text-slate-800",children:Y.name}),v.jsxs("p",{className:"text-xs text-slate-500 font-bold mt-0.5",children:[" ",Y.threshold.toLocaleString()," "]})]}),n.totalEarned>=Y.threshold&&v.jsx("div",{className:"bg-indigo-500 text-white p-1 rounded-full",children:v.jsx(Wu,{size:16})})]},Y.name))}),v.jsx("div",{className:"mt-6 text-center",children:v.jsx("p",{className:"text-xs text-slate-400 font-bold",children:""})})]})}),v.jsxs("header",{className:"flex flex-col md:flex-row md:items-start justify-between gap-4",children:[v.jsxs("div",{children:[v.jsxs("h1",{className:"text-3xl font-black text-slate-800 tracking-tight",children:["",n.name,""]}),v.jsxs("p",{className:"text-slate-500 mt-1 italic max-w-xl font-medium",children:['"',c,'"']})]}),v.jsxs("div",{className:"bg-amber-50 border border-amber-100 rounded-2xl px-5 py-3 flex items-center gap-3 self-end md:self-start shadow-sm",children:[v.jsx("div",{className:"bg-amber-500 p-2 rounded-xl text-white shadow-lg shadow-amber-200",children:v.jsx(x3,{size:20})}),v.jsxs("div",{children:[v.jsx("p",{className:"text-[10px] text-amber-700 font-black uppercase tracking-widest",children:""}),v.jsxs("p",{className:"text-2xl font-black text-amber-900 leading-none",children:[n.totalEarned.toLocaleString()," ",v.jsx("span",{className:"text-xs font-bold opacity-60",children:"PTS"})]})]})]})]}),q.length>0&&v.jsxs("div",{className:`relative w-full ${((z=q[ae])==null?void 0:z.mobileHeight)||"h-48"} ${((V=q[ae])==null?void 0:V.desktopHeight)||"md:h-72"} rounded-[3.5rem] overflow-hidden shadow-2xl shadow-indigo-100 group border-4 border-white transition-all duration-500`,children:[v.jsx("div",{className:"flex transition-transform duration-700 ease-in-out h-full",style:{transform:`translateX(-${ae*100}%)`},children:q.map(Y=>v.jsxs("div",{className:"min-w-full h-full relative",children:[v.jsx("img",{src:Y.imageUrl,alt:"banner",className:"w-full h-full object-cover",style:{objectPosition:Y.objectPosition||"center"}}),v.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent flex items-end justify-start p-12",children:v.jsx("div",{className:"mt-auto",children:v.jsx("span",{className:"bg-indigo-600/90 backdrop-blur text-white px-4 py-2 rounded-xl text-xs font-black uppercase tracking-[0.2em] shadow-lg",children:Y.tag||""})})})]},Y.id))}),v.jsx("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 flex gap-3",children:q.map((Y,Z)=>v.jsx("button",{onClick:()=>Q(Z),className:`w-2.5 h-2.5 rounded-full transition-all ${ae===Z?"bg-white w-10 shadow-lg":"bg-white/40 hover:bg-white/80"}`},Z))}),v.jsx("button",{onClick:()=>Q(Y=>(Y-1+q.length)%q.length),className:"absolute left-6 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/40 backdrop-blur p-4 rounded-full text-white opacity-0 group-hover:opacity-100 transition-all border border-white/10",children:v.jsx(gA,{size:24})}),v.jsx("button",{onClick:()=>Q(Y=>(Y+1)%q.length),className:"absolute right-6 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/40 backdrop-blur p-4 rounded-full text-white opacity-0 group-hover:opacity-100 transition-all border border-white/10",children:v.jsx(Sg,{size:24})})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[v.jsxs("div",{className:"md:col-span-2 bg-white rounded-[2.5rem] p-10 border border-slate-100 shadow-xl shadow-slate-200/40 relative overflow-hidden",children:[v.jsxs("div",{className:"flex items-center justify-between mb-12",children:[v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[v.jsx("h3",{className:"text-slate-400 text-[10px] font-black uppercase tracking-[0.2em]",children:""}),v.jsx("button",{onClick:()=>$(!0),className:"text-indigo-400 hover:text-indigo-600 transition-colors",title:"",children:v.jsx(pA,{size:14})})]}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("span",{className:"text-4xl filter drop-shadow-md",children:e.icon}),v.jsxs("span",{className:`text-2xl font-black px-6 py-2 rounded-2xl text-white ${e.color} shadow-xl shadow-indigo-100 border-2 border-white/20 flex items-center gap-2`,children:[e.name," ",v.jsxs("span",{className:"text-sm bg-white/20 px-2 py-0.5 rounded-lg border border-white/20",children:["Lv.",Oe]})]})]})]}),le&&v.jsxs("div",{className:"text-right",children:[v.jsx("h3",{className:"text-slate-400 text-[10px] font-black uppercase tracking-[0.2em] mb-2",children:""}),v.jsxs("div",{className:"flex items-center gap-3 justify-end group",children:[v.jsx("span",{className:"text-lg font-black text-slate-700 group-hover:text-indigo-600 transition-colors",children:le.name}),v.jsx("span",{className:"text-2xl animate-bounce",children:le.icon})]})]})]}),v.jsxs("div",{className:"relative pt-12 pb-6 px-2",children:[v.jsx("div",{className:"h-5 bg-slate-100 rounded-full w-full overflow-hidden border border-slate-200 shadow-inner p-1",children:v.jsx("div",{className:`h-full ${e.color} transition-all duration-1000 ease-out rounded-full relative overflow-hidden`,style:{width:`${De}%`},children:v.jsx("div",{className:"absolute inset-0 bg-white/20 animate-pulse"})})}),v.jsx("div",{className:"absolute top-0 transition-all duration-1000 ease-out",style:{left:`calc(${De}% - 30px)`},children:v.jsxs("div",{className:"relative group cursor-pointer",children:[v.jsx("div",{className:"p-1.5 bg-white rounded-full shadow-2xl border border-slate-50 transition-transform group-hover:scale-110 active:scale-95",children:v.jsx("img",{src:n.avatar,className:`w-14 h-14 rounded-full border-4 border-opacity-30 object-cover ${e.color.replace("bg-","border-")}`,alt:"me"})}),v.jsxs("div",{className:`absolute -top-10 left-1/2 -translate-x-1/2 px-3 py-1 rounded-xl text-[11px] font-black text-white shadow-xl ${e.color} whitespace-nowrap`,children:[" ",Math.round(De),"%"]})]})})]}),v.jsx("p",{className:"text-center text-xs text-slate-400 font-bold mt-8 tracking-wide",children:le?`${le.name} ${le.threshold-n.totalEarned} `:""})]}),v.jsxs("div",{className:"bg-gradient-to-br from-indigo-600 via-indigo-700 to-indigo-900 rounded-[2.5rem] p-10 text-white shadow-2xl shadow-indigo-300 flex flex-col justify-center items-center text-center relative overflow-hidden",children:[v.jsx("div",{className:"absolute -top-10 -right-10 w-40 h-40 bg-white/10 rounded-full blur-3xl"}),v.jsx("div",{className:"absolute -bottom-10 -left-10 w-40 h-40 bg-indigo-500/20 rounded-full blur-3xl"}),v.jsx("div",{className:"w-20 h-20 bg-white/20 backdrop-blur-xl rounded-[2rem] flex items-center justify-center mb-6 border border-white/20 shadow-xl",children:v.jsx(K3,{size:40,className:"text-white drop-shadow-md"})}),v.jsx("h3",{className:"text-indigo-200 text-sm font-black mb-1 uppercase tracking-widest",children:""}),v.jsx("p",{className:"text-6xl font-black mb-4 drop-shadow-lg",children:n.points.toLocaleString()}),v.jsx("div",{className:"px-5 py-1.5 bg-indigo-500/40 backdrop-blur rounded-full text-[10px] font-black tracking-[0.2em] uppercase border border-white/10",children:"SHOPPING POWER"})]})]}),v.jsxs("section",{className:"mt-16",children:[v.jsxs("div",{className:"flex items-center justify-between mb-8",children:[v.jsxs("h2",{className:"text-2xl font-black text-slate-800 flex items-center gap-3",children:[v.jsx(Bu,{className:"text-indigo-500",size:28}),""]}),v.jsx("div",{className:"flex items-center gap-4 text-xs font-bold text-slate-400",children:v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx(H3,{size:12,className:"text-amber-500"})," "]})})]}),v.jsx("div",{className:"grid grid-cols-1 gap-6",children:p.map(Y=>{const Z=M.has(Y.id);return v.jsx("div",{className:`bg-white border-2 border-slate-50 p-8 rounded-[2.5rem] transition-all group relative overflow-hidden ${Z?"opacity-60 grayscale":"shadow-sm hover:shadow-xl"} ${Y.id===C?"animate-pulse":""}`,children:v.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-8",children:[v.jsxs("div",{className:"flex gap-8 items-start",children:[v.jsx("div",{className:`w-20 h-20 rounded-3xl flex items-center justify-center shrink-0 shadow-inner ${Y.type==="normal"?"bg-emerald-50 text-emerald-600":Y.type==="challenge"?"bg-orange-50 text-orange-600":"bg-rose-50 text-rose-600"}`,children:Z?v.jsx(Wu,{size:36}):Y.type==="normal"?v.jsx(Bu,{size:36}):Y.type==="challenge"?v.jsx(i3,{size:36}):v.jsx(Yy,{size:36})}),v.jsxs("div",{children:[v.jsx("div",{className:"flex items-center gap-3 mb-2",children:v.jsx("span",{className:`px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-widest ${Y.type==="normal"?"bg-emerald-100 text-emerald-700":Y.type==="challenge"?"bg-orange-100 text-orange-700":"bg-rose-100 text-rose-700"}`,children:Y.type==="normal"?"":Y.type==="challenge"?"":""})}),v.jsx("h3",{className:"text-2xl font-black text-slate-800 transition-colors",children:Y.title}),v.jsx("p",{className:"text-slate-500 mt-2 leading-relaxed text-lg font-medium max-w-2xl",children:Y.description}),Y.deadline&&v.jsxs("div",{className:`mt-3 flex items-center gap-2 text-sm font-black ${Y.deadline<Date.now()?"text-rose-500":"text-amber-500"}`,children:[v.jsx(Ku,{size:16}),Y.deadline<Date.now()?"":` ${new Date(Y.deadline).toLocaleString()}`]})]})]}),v.jsxs("div",{className:"flex flex-col md:items-end gap-6 shrink-0",children:[v.jsxs("div",{className:"flex flex-col items-end",children:[v.jsx("span",{className:"text-xs font-bold text-slate-400 mb-1 uppercase tracking-tighter",children:""}),v.jsxs("div",{className:"flex items-baseline gap-2",children:[v.jsx("span",{className:"text-4xl font-black text-indigo-600 tracking-tighter",children:Y.points}),v.jsx("span",{className:"text-sm font-bold text-slate-400",children:"PTS"})]})]}),v.jsxs("button",{onClick:()=>j(Y),disabled:C!==null||Z||w.some(J=>J.missionId===Y.id&&J.status==="pending")||Y.deadline!==void 0&&Y.deadline<Date.now(),className:`px-10 py-5 rounded-2xl font-black transition-all flex items-center gap-3 shadow-xl ${Z?"bg-slate-200 text-slate-500 cursor-not-allowed shadow-none":w.some(J=>J.missionId===Y.id&&J.status==="pending")?"bg-amber-100 text-amber-600 cursor-not-allowed shadow-none":Y.deadline!==void 0&&Y.deadline<Date.now()?"bg-slate-200 text-slate-400 cursor-not-allowed shadow-none":Y.type==="normal"?"bg-emerald-600 hover:bg-emerald-700 shadow-emerald-100":Y.type==="challenge"?"bg-orange-600 hover:bg-orange-700 shadow-orange-100":"bg-rose-600 hover:bg-rose-700 shadow-rose-100"} text-white text-lg active:scale-95 disabled:active:scale-100`,children:[Z?"":w.some(J=>J.missionId===Y.id&&J.status==="pending")?"":Y.deadline!==void 0&&Y.deadline<Date.now()?"":C===Y.id?"...":"",!Z&&!w.some(J=>J.missionId===Y.id&&J.status==="pending")&&(!Y.deadline||Y.deadline>=Date.now())&&v.jsx(Sg,{size:20})]})]})]})},Y.id)})})]})]})},PM=({user:n,onUserUpdate:e})=>{var _e,ae;const{showAlert:t}=Lc(),[s,c]=ne.useState(null),[h,p]=ne.useState("all"),[T,w]=ne.useState([]),[E,C]=ne.useState([]),[I,M]=ne.useState([]),[B,W]=ne.useState(0);ne.useEffect(()=>{if(I.length>1){const Q=setInterval(()=>{W(le=>(le+1)%I.length)},5e3);return()=>clearInterval(Q)}},[I.length]),ne.useEffect(()=>{const Q=XT(Oe=>{w(Oe)}),le=GT(Oe=>{C(Oe)}),De=_p(M);return()=>{Q(),le(),De()}},[]);const $=T.filter(Q=>h==="all"||Q.category===h),q=async()=>{if(n.role==="GUEST"){t("","info");return}if(!s||n.points<s.price||s.stock<=0)return;const Q=await vD(n,s);if(Q.success){const le={...n,points:n.points-s.price};await La(le),e(),c(null),t(` ${Q.message} QR Code`,"success")}else t(Q.message,"error")};return v.jsxs("div",{className:"space-y-8 pb-20",children:[v.jsxs("header",{children:[v.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:""}),v.jsx("p",{className:"text-slate-500 mt-1",children:""})]}),I.length>0&&v.jsxs("div",{className:`relative w-full ${((_e=I[B])==null?void 0:_e.mobileHeight)||"h-48"} ${((ae=I[B])==null?void 0:ae.desktopHeight)||"md:h-64"} rounded-[2.5rem] overflow-hidden shadow-2xl shadow-indigo-100 group transition-all duration-500`,children:[v.jsx("div",{className:"flex transition-transform duration-700 ease-in-out h-full",style:{transform:`translateX(-${B*100}%)`},children:I.map(Q=>v.jsxs("div",{className:"min-w-full h-full relative",children:[v.jsx("img",{src:Q.imageUrl,alt:"banner",className:"w-full h-full object-cover",style:{objectPosition:Q.objectPosition||"center"}}),v.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent flex items-end p-8",children:v.jsx("div",{className:"mt-auto",children:v.jsx("span",{className:"bg-indigo-600/90 backdrop-blur text-white px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-[0.2em] shadow-lg",children:Q.tag||""})})})]},Q.id))}),v.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2",children:I.map((Q,le)=>v.jsx("button",{onClick:()=>W(le),className:`w-2 h-2 rounded-full transition-all ${B===le?"bg-white w-6":"bg-white/50 hover:bg-white/80"}`},le))}),v.jsx("button",{onClick:()=>W(Q=>(Q-1+I.length)%I.length),className:"absolute left-4 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/40 backdrop-blur p-2 rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity",children:v.jsx(gA,{size:20})}),v.jsx("button",{onClick:()=>W(Q=>(Q+1)%I.length),className:"absolute right-4 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/40 backdrop-blur p-2 rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity",children:v.jsx(Sg,{size:20})})]}),v.jsxs("div",{className:"flex flex-wrap gap-2",children:[v.jsx("button",{onClick:()=>p("all"),className:`px-6 py-2.5 rounded-2xl text-sm font-bold transition-all ${h==="all"?"bg-indigo-600 text-white shadow-lg shadow-indigo-100":"bg-white text-slate-600 border border-slate-200 hover:border-indigo-300"}`,children:""}),E.map(Q=>v.jsx("button",{onClick:()=>p(Q.name),className:`px-6 py-2.5 rounded-2xl text-sm font-bold transition-all ${h===Q.name?"bg-indigo-600 text-white shadow-lg shadow-indigo-100":"bg-white text-slate-600 border border-slate-200 hover:border-indigo-300"}`,children:Q.name},Q.id))]}),v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:$.map(Q=>{const le=n.points>=Q.price,De=Q.stock<=0;return v.jsxs("div",{className:`bg-white rounded-[2rem] border border-slate-100 overflow-hidden shadow-sm hover:shadow-2xl transition-all flex flex-col group ${De?"opacity-75 grayscale-[0.5]":""}`,children:[v.jsxs("div",{className:"relative h-56 overflow-hidden",children:[v.jsx("img",{src:Q.imageUrl,alt:Q.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700"}),v.jsx("div",{className:"absolute top-5 left-5",children:v.jsx("span",{className:"bg-white/90 backdrop-blur text-indigo-600 text-[10px] px-3 py-1.5 rounded-full font-black tracking-widest shadow-sm",children:Q.category.toUpperCase()})}),De&&v.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:v.jsx("span",{className:"text-white font-black text-2xl rotate-12 border-4 border-white px-4 py-1",children:"SOLD OUT"})})]}),v.jsxs("div",{className:"p-8 flex flex-col flex-1",children:[v.jsx("div",{className:"flex justify-between items-start mb-2",children:v.jsx("h3",{className:"font-black text-xl text-slate-800 leading-tight",children:Q.name})}),v.jsx("p",{className:"text-slate-500 text-sm mb-6 flex-1 leading-relaxed",children:Q.description}),v.jsxs("div",{className:"flex items-center gap-2 mb-6 text-slate-400 text-xs font-bold",children:[v.jsx(Cg,{size:14}),v.jsxs("span",{children:["",v.jsxs("span",{className:Q.stock<=5?"text-red-500":"text-slate-600",children:[Q.stock," "]})]})]}),v.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[v.jsxs("div",{className:"flex items-center gap-1 text-indigo-600",children:[v.jsx("span",{className:"text-2xl font-black",children:Q.price.toLocaleString()}),v.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-tighter",children:"pts"})]}),v.jsx("button",{onClick:()=>c(Q),disabled:!le||De,className:`px-6 py-3 rounded-2xl font-black text-sm transition-all shadow-md ${De?"bg-slate-100 text-slate-400 cursor-not-allowed shadow-none":le?"bg-indigo-600 text-white hover:bg-indigo-700 hover:shadow-indigo-200 active:scale-95":"bg-slate-100 text-slate-400 cursor-not-allowed shadow-none"}`,children:De?"":""})]})]})]},Q.id)})}),s&&v.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:v.jsxs("div",{className:"bg-white rounded-[2.5rem] max-w-md w-full p-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[v.jsxs("div",{className:"flex justify-between items-start mb-8",children:[v.jsx("div",{className:"bg-indigo-50 p-4 rounded-2xl text-indigo-600",children:v.jsx(j3,{size:28})}),v.jsx("button",{onClick:()=>c(null),className:"text-slate-400 hover:text-slate-600 bg-slate-50 p-2 rounded-full",children:v.jsx(Do,{size:24})})]}),v.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-2",children:""}),v.jsxs("p",{className:"text-slate-500 mb-8 leading-relaxed",children:[" ",v.jsxs("span",{className:"font-black text-indigo-600",children:[s.price," "]}),"  ",v.jsxs("span",{className:"font-black text-slate-800",children:["",s.name,""]})," "]}),v.jsxs("div",{className:"bg-slate-50 rounded-[1.5rem] p-6 mb-8 border border-slate-100",children:[v.jsxs("div",{className:"flex justify-between text-sm mb-3",children:[v.jsx("span",{className:"text-slate-500 font-medium",children:""}),v.jsx("span",{className:"font-bold text-slate-800",children:n.points.toLocaleString()})]}),v.jsxs("div",{className:"flex justify-between text-sm mb-5",children:[v.jsx("span",{className:"text-slate-500 font-medium",children:""}),v.jsxs("span",{className:"font-bold text-red-500",children:["-",s.price.toLocaleString()]})]}),v.jsxs("div",{className:"border-t border-slate-200 pt-5 flex justify-between",children:[v.jsx("span",{className:"font-black text-slate-700 text-lg",children:""}),v.jsx("span",{className:"font-black text-indigo-600 text-2xl",children:(n.points-s.price).toLocaleString()})]})]}),v.jsxs("div",{className:"flex flex-col gap-3",children:[v.jsxs("button",{onClick:q,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-5 rounded-[1.25rem] transition-all shadow-xl shadow-indigo-100 flex items-center justify-center gap-3 text-lg",children:[v.jsx(Nu,{size:24}),""]}),v.jsx("button",{onClick:()=>c(null),className:"w-full bg-white border border-slate-200 text-slate-600 font-black py-4 rounded-[1.25rem] hover:bg-slate-50 transition-all",children:""})]})]})})]})};var LM=Object.defineProperty,Md=Object.getOwnPropertySymbols,pv=Object.prototype.hasOwnProperty,xv=Object.prototype.propertyIsEnumerable,kw=(n,e,t)=>e in n?LM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,lm=(n,e)=>{for(var t in e||(e={}))pv.call(e,t)&&kw(n,t,e[t]);if(Md)for(var t of Md(e))xv.call(e,t)&&kw(n,t,e[t]);return n},cm=(n,e)=>{var t={};for(var s in n)pv.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&Md)for(var s of Md(n))e.indexOf(s)<0&&xv.call(n,s)&&(t[s]=n[s]);return t};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Il;(n=>{const e=class Ut{constructor(w,E,C,I){if(this.version=w,this.errorCorrectionLevel=E,this.modules=[],this.isFunction=[],w<Ut.MIN_VERSION||w>Ut.MAX_VERSION)throw new RangeError("Version value out of range");if(I<-1||I>7)throw new RangeError("Mask value out of range");this.size=w*4+17;let M=[];for(let W=0;W<this.size;W++)M.push(!1);for(let W=0;W<this.size;W++)this.modules.push(M.slice()),this.isFunction.push(M.slice());this.drawFunctionPatterns();const B=this.addEccAndInterleave(C);if(this.drawCodewords(B),I==-1){let W=1e9;for(let $=0;$<8;$++){this.applyMask($),this.drawFormatBits($);const q=this.getPenaltyScore();q<W&&(I=$,W=q),this.applyMask($)}}c(0<=I&&I<=7),this.mask=I,this.applyMask(I),this.drawFormatBits(I),this.isFunction=[]}static encodeText(w,E){const C=n.QrSegment.makeSegments(w);return Ut.encodeSegments(C,E)}static encodeBinary(w,E){const C=n.QrSegment.makeBytes(w);return Ut.encodeSegments([C],E)}static encodeSegments(w,E,C=1,I=40,M=-1,B=!0){if(!(Ut.MIN_VERSION<=C&&C<=I&&I<=Ut.MAX_VERSION)||M<-1||M>7)throw new RangeError("Invalid value");let W,$;for(W=C;;W++){const Q=Ut.getNumDataCodewords(W,E)*8,le=p.getTotalBits(w,W);if(le<=Q){$=le;break}if(W>=I)throw new RangeError("Data too long")}for(const Q of[Ut.Ecc.MEDIUM,Ut.Ecc.QUARTILE,Ut.Ecc.HIGH])B&&$<=Ut.getNumDataCodewords(W,Q)*8&&(E=Q);let q=[];for(const Q of w){t(Q.mode.modeBits,4,q),t(Q.numChars,Q.mode.numCharCountBits(W),q);for(const le of Q.getData())q.push(le)}c(q.length==$);const _e=Ut.getNumDataCodewords(W,E)*8;c(q.length<=_e),t(0,Math.min(4,_e-q.length),q),t(0,(8-q.length%8)%8,q),c(q.length%8==0);for(let Q=236;q.length<_e;Q^=253)t(Q,8,q);let ae=[];for(;ae.length*8<q.length;)ae.push(0);return q.forEach((Q,le)=>ae[le>>>3]|=Q<<7-(le&7)),new Ut(W,E,ae,M)}getModule(w,E){return 0<=w&&w<this.size&&0<=E&&E<this.size&&this.modules[E][w]}getModules(){return this.modules}drawFunctionPatterns(){for(let C=0;C<this.size;C++)this.setFunctionModule(6,C,C%2==0),this.setFunctionModule(C,6,C%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const w=this.getAlignmentPatternPositions(),E=w.length;for(let C=0;C<E;C++)for(let I=0;I<E;I++)C==0&&I==0||C==0&&I==E-1||C==E-1&&I==0||this.drawAlignmentPattern(w[C],w[I]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(w){const E=this.errorCorrectionLevel.formatBits<<3|w;let C=E;for(let M=0;M<10;M++)C=C<<1^(C>>>9)*1335;const I=(E<<10|C)^21522;c(I>>>15==0);for(let M=0;M<=5;M++)this.setFunctionModule(8,M,s(I,M));this.setFunctionModule(8,7,s(I,6)),this.setFunctionModule(8,8,s(I,7)),this.setFunctionModule(7,8,s(I,8));for(let M=9;M<15;M++)this.setFunctionModule(14-M,8,s(I,M));for(let M=0;M<8;M++)this.setFunctionModule(this.size-1-M,8,s(I,M));for(let M=8;M<15;M++)this.setFunctionModule(8,this.size-15+M,s(I,M));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let w=this.version;for(let C=0;C<12;C++)w=w<<1^(w>>>11)*7973;const E=this.version<<12|w;c(E>>>18==0);for(let C=0;C<18;C++){const I=s(E,C),M=this.size-11+C%3,B=Math.floor(C/3);this.setFunctionModule(M,B,I),this.setFunctionModule(B,M,I)}}drawFinderPattern(w,E){for(let C=-4;C<=4;C++)for(let I=-4;I<=4;I++){const M=Math.max(Math.abs(I),Math.abs(C)),B=w+I,W=E+C;0<=B&&B<this.size&&0<=W&&W<this.size&&this.setFunctionModule(B,W,M!=2&&M!=4)}}drawAlignmentPattern(w,E){for(let C=-2;C<=2;C++)for(let I=-2;I<=2;I++)this.setFunctionModule(w+I,E+C,Math.max(Math.abs(I),Math.abs(C))!=1)}setFunctionModule(w,E,C){this.modules[E][w]=C,this.isFunction[E][w]=!0}addEccAndInterleave(w){const E=this.version,C=this.errorCorrectionLevel;if(w.length!=Ut.getNumDataCodewords(E,C))throw new RangeError("Invalid argument");const I=Ut.NUM_ERROR_CORRECTION_BLOCKS[C.ordinal][E],M=Ut.ECC_CODEWORDS_PER_BLOCK[C.ordinal][E],B=Math.floor(Ut.getNumRawDataModules(E)/8),W=I-B%I,$=Math.floor(B/I);let q=[];const _e=Ut.reedSolomonComputeDivisor(M);for(let Q=0,le=0;Q<I;Q++){let De=w.slice(le,le+$-M+(Q<W?0:1));le+=De.length;const Oe=Ut.reedSolomonComputeRemainder(De,_e);Q<W&&De.push(0),q.push(De.concat(Oe))}let ae=[];for(let Q=0;Q<q[0].length;Q++)q.forEach((le,De)=>{(Q!=$-M||De>=W)&&ae.push(le[Q])});return c(ae.length==B),ae}drawCodewords(w){if(w.length!=Math.floor(Ut.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let E=0;for(let C=this.size-1;C>=1;C-=2){C==6&&(C=5);for(let I=0;I<this.size;I++)for(let M=0;M<2;M++){const B=C-M,$=(C+1&2)==0?this.size-1-I:I;!this.isFunction[$][B]&&E<w.length*8&&(this.modules[$][B]=s(w[E>>>3],7-(E&7)),E++)}}c(E==w.length*8)}applyMask(w){if(w<0||w>7)throw new RangeError("Mask value out of range");for(let E=0;E<this.size;E++)for(let C=0;C<this.size;C++){let I;switch(w){case 0:I=(C+E)%2==0;break;case 1:I=E%2==0;break;case 2:I=C%3==0;break;case 3:I=(C+E)%3==0;break;case 4:I=(Math.floor(C/3)+Math.floor(E/2))%2==0;break;case 5:I=C*E%2+C*E%3==0;break;case 6:I=(C*E%2+C*E%3)%2==0;break;case 7:I=((C+E)%2+C*E%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[E][C]&&I&&(this.modules[E][C]=!this.modules[E][C])}}getPenaltyScore(){let w=0;for(let M=0;M<this.size;M++){let B=!1,W=0,$=[0,0,0,0,0,0,0];for(let q=0;q<this.size;q++)this.modules[M][q]==B?(W++,W==5?w+=Ut.PENALTY_N1:W>5&&w++):(this.finderPenaltyAddHistory(W,$),B||(w+=this.finderPenaltyCountPatterns($)*Ut.PENALTY_N3),B=this.modules[M][q],W=1);w+=this.finderPenaltyTerminateAndCount(B,W,$)*Ut.PENALTY_N3}for(let M=0;M<this.size;M++){let B=!1,W=0,$=[0,0,0,0,0,0,0];for(let q=0;q<this.size;q++)this.modules[q][M]==B?(W++,W==5?w+=Ut.PENALTY_N1:W>5&&w++):(this.finderPenaltyAddHistory(W,$),B||(w+=this.finderPenaltyCountPatterns($)*Ut.PENALTY_N3),B=this.modules[q][M],W=1);w+=this.finderPenaltyTerminateAndCount(B,W,$)*Ut.PENALTY_N3}for(let M=0;M<this.size-1;M++)for(let B=0;B<this.size-1;B++){const W=this.modules[M][B];W==this.modules[M][B+1]&&W==this.modules[M+1][B]&&W==this.modules[M+1][B+1]&&(w+=Ut.PENALTY_N2)}let E=0;for(const M of this.modules)E=M.reduce((B,W)=>B+(W?1:0),E);const C=this.size*this.size,I=Math.ceil(Math.abs(E*20-C*10)/C)-1;return c(0<=I&&I<=9),w+=I*Ut.PENALTY_N4,c(0<=w&&w<=2568888),w}getAlignmentPatternPositions(){if(this.version==1)return[];{const w=Math.floor(this.version/7)+2,E=this.version==32?26:Math.ceil((this.version*4+4)/(w*2-2))*2;let C=[6];for(let I=this.size-7;C.length<w;I-=E)C.splice(1,0,I);return C}}static getNumRawDataModules(w){if(w<Ut.MIN_VERSION||w>Ut.MAX_VERSION)throw new RangeError("Version number out of range");let E=(16*w+128)*w+64;if(w>=2){const C=Math.floor(w/7)+2;E-=(25*C-10)*C-55,w>=7&&(E-=36)}return c(208<=E&&E<=29648),E}static getNumDataCodewords(w,E){return Math.floor(Ut.getNumRawDataModules(w)/8)-Ut.ECC_CODEWORDS_PER_BLOCK[E.ordinal][w]*Ut.NUM_ERROR_CORRECTION_BLOCKS[E.ordinal][w]}static reedSolomonComputeDivisor(w){if(w<1||w>255)throw new RangeError("Degree out of range");let E=[];for(let I=0;I<w-1;I++)E.push(0);E.push(1);let C=1;for(let I=0;I<w;I++){for(let M=0;M<E.length;M++)E[M]=Ut.reedSolomonMultiply(E[M],C),M+1<E.length&&(E[M]^=E[M+1]);C=Ut.reedSolomonMultiply(C,2)}return E}static reedSolomonComputeRemainder(w,E){let C=E.map(I=>0);for(const I of w){const M=I^C.shift();C.push(0),E.forEach((B,W)=>C[W]^=Ut.reedSolomonMultiply(B,M))}return C}static reedSolomonMultiply(w,E){if(w>>>8||E>>>8)throw new RangeError("Byte out of range");let C=0;for(let I=7;I>=0;I--)C=C<<1^(C>>>7)*285,C^=(E>>>I&1)*w;return c(C>>>8==0),C}finderPenaltyCountPatterns(w){const E=w[1];c(E<=this.size*3);const C=E>0&&w[2]==E&&w[3]==E*3&&w[4]==E&&w[5]==E;return(C&&w[0]>=E*4&&w[6]>=E?1:0)+(C&&w[6]>=E*4&&w[0]>=E?1:0)}finderPenaltyTerminateAndCount(w,E,C){return w&&(this.finderPenaltyAddHistory(E,C),E=0),E+=this.size,this.finderPenaltyAddHistory(E,C),this.finderPenaltyCountPatterns(C)}finderPenaltyAddHistory(w,E){E[0]==0&&(w+=this.size),E.pop(),E.unshift(w)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],n.QrCode=e;function t(T,w,E){if(w<0||w>31||T>>>w)throw new RangeError("Value out of range");for(let C=w-1;C>=0;C--)E.push(T>>>C&1)}function s(T,w){return(T>>>w&1)!=0}function c(T){if(!T)throw new Error("Assertion error")}const h=class tr{constructor(w,E,C){if(this.mode=w,this.numChars=E,this.bitData=C,E<0)throw new RangeError("Invalid argument");this.bitData=C.slice()}static makeBytes(w){let E=[];for(const C of w)t(C,8,E);return new tr(tr.Mode.BYTE,w.length,E)}static makeNumeric(w){if(!tr.isNumeric(w))throw new RangeError("String contains non-numeric characters");let E=[];for(let C=0;C<w.length;){const I=Math.min(w.length-C,3);t(parseInt(w.substring(C,C+I),10),I*3+1,E),C+=I}return new tr(tr.Mode.NUMERIC,w.length,E)}static makeAlphanumeric(w){if(!tr.isAlphanumeric(w))throw new RangeError("String contains unencodable characters in alphanumeric mode");let E=[],C;for(C=0;C+2<=w.length;C+=2){let I=tr.ALPHANUMERIC_CHARSET.indexOf(w.charAt(C))*45;I+=tr.ALPHANUMERIC_CHARSET.indexOf(w.charAt(C+1)),t(I,11,E)}return C<w.length&&t(tr.ALPHANUMERIC_CHARSET.indexOf(w.charAt(C)),6,E),new tr(tr.Mode.ALPHANUMERIC,w.length,E)}static makeSegments(w){return w==""?[]:tr.isNumeric(w)?[tr.makeNumeric(w)]:tr.isAlphanumeric(w)?[tr.makeAlphanumeric(w)]:[tr.makeBytes(tr.toUtf8ByteArray(w))]}static makeEci(w){let E=[];if(w<0)throw new RangeError("ECI assignment value out of range");if(w<128)t(w,8,E);else if(w<16384)t(2,2,E),t(w,14,E);else if(w<1e6)t(6,3,E),t(w,21,E);else throw new RangeError("ECI assignment value out of range");return new tr(tr.Mode.ECI,0,E)}static isNumeric(w){return tr.NUMERIC_REGEX.test(w)}static isAlphanumeric(w){return tr.ALPHANUMERIC_REGEX.test(w)}getData(){return this.bitData.slice()}static getTotalBits(w,E){let C=0;for(const I of w){const M=I.mode.numCharCountBits(E);if(I.numChars>=1<<M)return 1/0;C+=4+M+I.bitData.length}return C}static toUtf8ByteArray(w){w=encodeURI(w);let E=[];for(let C=0;C<w.length;C++)w.charAt(C)!="%"?E.push(w.charCodeAt(C)):(E.push(parseInt(w.substring(C+1,C+3),16)),C+=2);return E}};h.NUMERIC_REGEX=/^[0-9]*$/,h.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,h.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let p=h;n.QrSegment=h})(Il||(Il={}));(n=>{(e=>{const t=class{constructor(c,h){this.ordinal=c,this.formatBits=h}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2),e.Ecc=t})(n.QrCode||(n.QrCode={}))})(Il||(Il={}));(n=>{(e=>{const t=class{constructor(c,h){this.modeBits=c,this.numBitsCharCount=h}numCharCountBits(c){return this.numBitsCharCount[Math.floor((c+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]),e.Mode=t})(n.QrSegment||(n.QrSegment={}))})(Il||(Il={}));var xc=Il;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var kM={L:xc.QrCode.Ecc.LOW,M:xc.QrCode.Ecc.MEDIUM,Q:xc.QrCode.Ecc.QUARTILE,H:xc.QrCode.Ecc.HIGH},yv=128,Ev="L",_v="#FFFFFF",wv="#000000",Av=!1,bv=1,BM=4,UM=0,VM=.1;function Tv(n,e=0){const t=[];return n.forEach(function(s,c){let h=null;s.forEach(function(p,T){if(!p&&h!==null){t.push(`M${h+e} ${c+e}h${T-h}v1H${h+e}z`),h=null;return}if(T===s.length-1){if(!p)return;h===null?t.push(`M${T+e},${c+e} h1v1H${T+e}z`):t.push(`M${h+e},${c+e} h${T+1-h}v1H${h+e}z`);return}p&&h===null&&(h=T)})}),t.join("")}function vv(n,e){return n.slice().map((t,s)=>s<e.y||s>=e.y+e.h?t:t.map((c,h)=>h<e.x||h>=e.x+e.w?c:!1))}function jM(n,e,t,s){if(s==null)return null;const c=n.length+t*2,h=Math.floor(e*VM),p=c/e,T=(s.width||h)*p,w=(s.height||h)*p,E=s.x==null?n.length/2-T/2:s.x*p,C=s.y==null?n.length/2-w/2:s.y*p,I=s.opacity==null?1:s.opacity;let M=null;if(s.excavate){let W=Math.floor(E),$=Math.floor(C),q=Math.ceil(T+E-W),_e=Math.ceil(w+C-$);M={x:W,y:$,w:q,h:_e}}const B=s.crossOrigin;return{x:E,y:C,h:w,w:T,excavation:M,opacity:I,crossOrigin:B}}function FM(n,e){return e!=null?Math.max(Math.floor(e),0):n?BM:UM}function Sv({value:n,level:e,minVersion:t,includeMargin:s,marginSize:c,imageSettings:h,size:p,boostLevel:T}){let w=rr.useMemo(()=>{const W=(Array.isArray(n)?n:[n]).reduce(($,q)=>($.push(...xc.QrSegment.makeSegments(q)),$),[]);return xc.QrCode.encodeSegments(W,kM[e],t,void 0,void 0,T)},[n,e,t,T]);const{cells:E,margin:C,numCells:I,calculatedImageSettings:M}=rr.useMemo(()=>{let B=w.getModules();const W=FM(s,c),$=B.length+W*2,q=jM(B,p,W,h);return{cells:B,margin:W,numCells:$,calculatedImageSettings:q}},[w,p,h,s,c]);return{qrcode:w,margin:C,cells:E,numCells:I,calculatedImageSettings:M}}var zM=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),HM=rr.forwardRef(function(e,t){const s=e,{value:c,size:h=yv,level:p=Ev,bgColor:T=_v,fgColor:w=wv,includeMargin:E=Av,minVersion:C=bv,boostLevel:I,marginSize:M,imageSettings:B}=s,$=cm(s,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:q}=$,_e=cm($,["style"]),ae=B==null?void 0:B.src,Q=rr.useRef(null),le=rr.useRef(null),De=rr.useCallback($e=>{Q.current=$e,typeof t=="function"?t($e):t&&(t.current=$e)},[t]),[Oe,j]=rr.useState(!1),{margin:z,cells:V,numCells:Y,calculatedImageSettings:Z}=Sv({value:c,level:p,minVersion:C,boostLevel:I,includeMargin:E,marginSize:M,imageSettings:B,size:h});rr.useEffect(()=>{if(Q.current!=null){const $e=Q.current,fe=$e.getContext("2d");if(!fe)return;let me=V;const be=le.current,Ge=Z!=null&&be!==null&&be.complete&&be.naturalHeight!==0&&be.naturalWidth!==0;Ge&&Z.excavation!=null&&(me=vv(V,Z.excavation));const ct=window.devicePixelRatio||1;$e.height=$e.width=h*ct;const xt=h/Y*ct;fe.scale(xt,xt),fe.fillStyle=T,fe.fillRect(0,0,Y,Y),fe.fillStyle=w,zM?fe.fill(new Path2D(Tv(me,z))):V.forEach(function(ie,Ae){ie.forEach(function(Ve,je){Ve&&fe.fillRect(je+z,Ae+z,1,1)})}),Z&&(fe.globalAlpha=Z.opacity),Ge&&fe.drawImage(be,Z.x+z,Z.y+z,Z.w,Z.h)}}),rr.useEffect(()=>{j(!1)},[ae]);const J=lm({height:h,width:h},q);let K=null;return ae!=null&&(K=rr.createElement("img",{src:ae,key:ae,style:{display:"none"},onLoad:()=>{j(!0)},ref:le,crossOrigin:Z==null?void 0:Z.crossOrigin})),rr.createElement(rr.Fragment,null,rr.createElement("canvas",lm({style:J,height:h,width:h,ref:De,role:"img"},_e)),K)});HM.displayName="QRCodeCanvas";var Cv=rr.forwardRef(function(e,t){const s=e,{value:c,size:h=yv,level:p=Ev,bgColor:T=_v,fgColor:w=wv,includeMargin:E=Av,minVersion:C=bv,boostLevel:I,title:M,marginSize:B,imageSettings:W}=s,$=cm(s,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:q,cells:_e,numCells:ae,calculatedImageSettings:Q}=Sv({value:c,level:p,minVersion:C,boostLevel:I,includeMargin:E,marginSize:B,imageSettings:W,size:h});let le=_e,De=null;W!=null&&Q!=null&&(Q.excavation!=null&&(le=vv(_e,Q.excavation)),De=rr.createElement("image",{href:W.src,height:Q.h,width:Q.w,x:Q.x+q,y:Q.y+q,preserveAspectRatio:"none",opacity:Q.opacity,crossOrigin:Q.crossOrigin}));const Oe=Tv(le,q);return rr.createElement("svg",lm({height:h,width:h,viewBox:`0 0 ${ae} ${ae}`,ref:t,role:"img"},$),!!M&&rr.createElement("title",null,M),rr.createElement("path",{fill:T,d:`M0,0 h${ae}v${ae}H0z`,shapeRendering:"crispEdges"}),rr.createElement("path",{fill:w,d:Oe,shapeRendering:"crispEdges"}),De)});Cv.displayName="QRCodeSVG";const GM=({user:n})=>{const[e,t]=ne.useState([]),[s,c]=ne.useState(null),[h,p]=ne.useState(()=>{const E=new Date;return`${E.getFullYear()}-${String(E.getMonth()+1).padStart(2,"0")}`});ne.useEffect(()=>{const E=KT(C=>{t(C.filter(I=>I.userId===n.id))});return()=>E()},[n.id]);const T=E=>new Date(E).toLocaleString("zh-TW",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),w=e.filter(E=>{const C=new Date(E.timestamp);return`${C.getFullYear()}-${String(C.getMonth()+1).padStart(2,"0")}`===h});return v.jsxs("div",{className:"space-y-8 animate-in slide-in-from-bottom-4 duration-500",children:[v.jsxs("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[v.jsxs("div",{children:[v.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:""}),v.jsx("p",{className:"text-slate-500 mt-1",children:""})]}),v.jsxs("div",{className:"flex items-center gap-3 bg-white p-2 rounded-2xl border border-slate-100 shadow-sm",children:[v.jsx(Hy,{size:18,className:"text-indigo-600 ml-2"}),v.jsx("input",{type:"month",value:h,onChange:E=>p(E.target.value),className:"border-none bg-transparent font-bold text-slate-600 outline-none p-1"})]})]}),w.length===0?v.jsxs("div",{className:"bg-white rounded-3xl p-12 text-center border border-dashed border-slate-200",children:[v.jsx("div",{className:"bg-slate-50 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 text-slate-300",children:v.jsx(id,{size:40})}),v.jsx("h2",{className:"text-xl font-bold text-slate-800",children:""}),v.jsx("p",{className:"text-slate-400 mt-2",children:""})]}):v.jsx("div",{className:"space-y-4",children:w.map(E=>v.jsxs("div",{className:"bg-white rounded-3xl border border-slate-100 p-6 flex flex-col md:flex-row md:items-center justify-between gap-6 shadow-sm hover:shadow-md transition-shadow",children:[v.jsxs("div",{className:"flex gap-4",children:[v.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center shrink-0 ${E.status==="completed"?"bg-green-50 text-green-600":E.status==="pending"?"bg-indigo-50 text-indigo-600":"bg-red-50 text-red-600"}`,children:E.status==="completed"?v.jsx(ZI,{size:24}):E.status==="pending"?v.jsx(Ku,{size:24}):v.jsx(mA,{size:24})}),v.jsxs("div",{children:[v.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:E.productName||""}),v.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-400 mt-1",children:[v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx(Hy,{size:12})," ",T(E.timestamp||Date.now())]}),v.jsxs("span",{className:"font-bold text-indigo-600",children:["-",E.pointsSpent||0," "]})]})]})]}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("div",{className:`px-4 py-1.5 rounded-full text-xs font-bold ${E.status==="completed"?"bg-green-100 text-green-700":E.status==="pending"?"bg-indigo-100 text-indigo-700":"bg-red-100 text-red-700"}`,children:E.status==="completed"?"":E.status==="pending"?"":""}),E.status==="pending"&&v.jsxs("button",{onClick:()=>c(E),className:"flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-2.5 rounded-xl text-sm font-bold transition-all shadow-lg shadow-indigo-100",children:[v.jsx(b3,{size:18}),""]})]})]},E.id))}),s&&v.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:v.jsxs("div",{className:"bg-white rounded-[2.5rem] max-w-sm w-full p-10 shadow-2xl animate-in zoom-in-95 duration-200 text-center",children:[v.jsx("div",{className:"flex justify-end mb-4 -mt-4 -mr-4",children:v.jsx("button",{onClick:()=>c(null),className:"text-slate-400 hover:text-slate-600 p-2",children:v.jsx(Do,{size:28})})}),v.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:""}),v.jsx("p",{className:"text-slate-500 mb-8 text-sm",children:""}),v.jsx("div",{className:"aspect-square bg-white border-8 border-indigo-50 rounded-3xl flex items-center justify-center mb-8 shadow-inner overflow-hidden p-6",children:v.jsx(Cv,{value:s.qrCodeData,size:256,level:"H",includeMargin:!1,className:"w-full h-full"})}),v.jsx("div",{className:"bg-slate-50 p-4 rounded-2xl text-slate-400 font-mono text-xs mb-8 tracking-widest uppercase",children:s.qrCodeData}),v.jsx("p",{className:"font-bold text-slate-800 mb-1",children:s.productName}),v.jsxs("p",{className:"text-xs text-slate-400",children:["ID: ",s.id]})]})})]})};var Ye;(function(n){n[n.QR_CODE=0]="QR_CODE",n[n.AZTEC=1]="AZTEC",n[n.CODABAR=2]="CODABAR",n[n.CODE_39=3]="CODE_39",n[n.CODE_93=4]="CODE_93",n[n.CODE_128=5]="CODE_128",n[n.DATA_MATRIX=6]="DATA_MATRIX",n[n.MAXICODE=7]="MAXICODE",n[n.ITF=8]="ITF",n[n.EAN_13=9]="EAN_13",n[n.EAN_8=10]="EAN_8",n[n.PDF_417=11]="PDF_417",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ye||(Ye={}));var Bw=new Map([[Ye.QR_CODE,"QR_CODE"],[Ye.AZTEC,"AZTEC"],[Ye.CODABAR,"CODABAR"],[Ye.CODE_39,"CODE_39"],[Ye.CODE_93,"CODE_93"],[Ye.CODE_128,"CODE_128"],[Ye.DATA_MATRIX,"DATA_MATRIX"],[Ye.MAXICODE,"MAXICODE"],[Ye.ITF,"ITF"],[Ye.EAN_13,"EAN_13"],[Ye.EAN_8,"EAN_8"],[Ye.PDF_417,"PDF_417"],[Ye.RSS_14,"RSS_14"],[Ye.RSS_EXPANDED,"RSS_EXPANDED"],[Ye.UPC_A,"UPC_A"],[Ye.UPC_E,"UPC_E"],[Ye.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Uw;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.URL=1]="URL"})(Uw||(Uw={}));function qM(n){return Object.values(Ye).includes(n)}var Pd;(function(n){n[n.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",n[n.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Pd||(Pd={}));var YM=(function(){function n(){}return n.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",n.SCAN_DEFAULT_FPS=2,n.DEFAULT_DISABLE_FLIP=!1,n.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,n.DEFAULT_SUPPORTED_SCAN_TYPE=[Pd.SCAN_TYPE_CAMERA,Pd.SCAN_TYPE_FILE],n})(),Iv=(function(){function n(e,t){this.format=e,this.formatName=t}return n.prototype.toString=function(){return this.formatName},n.create=function(e){if(!Bw.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new n(e,Bw.get(e))},n})(),Vw=(function(){function n(){}return n.createFromText=function(e){var t={text:e};return{decodedText:e,result:t}},n.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},n})(),um;(function(n){n[n.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",n[n.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",n[n.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(um||(um={}));var XM=(function(){function n(){}return n.createFrom=function(e){return{errorMessage:e,type:um.UNKWOWN_ERROR}},n})(),WM=(function(){function n(e){this.verbose=e}return n.prototype.log=function(e){this.verbose&&console.log(e)},n.prototype.warn=function(e){this.verbose&&console.warn(e)},n.prototype.logError=function(e,t){(this.verbose||t===!0)&&console.error(e)},n.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},n})();function Pa(n){return typeof n>"u"||n===null}var yc=(function(){function n(){}return n.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},n.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},n.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},n.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},n.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},n.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},n.scannerPaused=function(){return"Scanner paused"},n})(),Nv=(function(){function n(){}return n.isMediaStreamConstraintsValid=function(e,t){if(typeof e!="object"){var s=typeof e;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(s,"."),!0),!1}for(var c=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],h=new Set(c),p=Object.keys(e),T=0,w=p;T<w.length;T++){var E=w[T];if(h.has(E))return t.logError("".concat(E," is not supported videoConstaints."),!0),!1}return!0},n})(),ku={exports:{}},KM=ku.exports,jw;function QM(){return jw||(jw=1,(function(n,e){(function(t,s){s(e)})(KM,(function(t){function s(P){return P==null}var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,i){P.__proto__=i}||function(P,i){for(var o in i)i.hasOwnProperty(o)&&(P[o]=i[o])};function h(P,i){c(P,i);function o(){this.constructor=P}P.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}function p(P,i){var o=Object.setPrototypeOf;o?o(P,i):P.__proto__=i}function T(P,i){i===void 0&&(i=P.constructor);var o=Error.captureStackTrace;o&&o(P,i)}var w=(function(P){h(i,P);function i(o){var l=this.constructor,f=P.call(this,o)||this;return Object.defineProperty(f,"name",{value:l.name,enumerable:!1}),p(f,l.prototype),T(f),f}return i})(Error);class E extends w{constructor(i=void 0){super(i),this.message=i}getKind(){return this.constructor.kind}}E.kind="Exception";class C extends E{}C.kind="ArgumentException";class I extends E{}I.kind="IllegalArgumentException";class M{constructor(i){if(this.binarizer=i,i===null)throw new I("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(i,o){return this.binarizer.getBlackRow(i,o)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(i,o,l,f){const d=this.binarizer.getLuminanceSource().crop(i,o,l,f);return new M(this.binarizer.createBinarizer(d))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new M(this.binarizer.createBinarizer(i))}rotateCounterClockwise45(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new M(this.binarizer.createBinarizer(i))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class B extends E{static getChecksumInstance(){return new B}}B.kind="ChecksumException";class W{constructor(i){this.source=i}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class ${static arraycopy(i,o,l,f,d){for(;d--;)l[f++]=i[o++]}static currentTimeMillis(){return Date.now()}}class q extends E{}q.kind="IndexOutOfBoundsException";class _e extends q{constructor(i=void 0,o=void 0){super(o),this.index=i,this.message=o}}_e.kind="ArrayIndexOutOfBoundsException";class ae{static fill(i,o){for(let l=0,f=i.length;l<f;l++)i[l]=o}static fillWithin(i,o,l,f){ae.rangeCheck(i.length,o,l);for(let d=o;d<l;d++)i[d]=f}static rangeCheck(i,o,l){if(o>l)throw new I("fromIndex("+o+") > toIndex("+l+")");if(o<0)throw new _e(o);if(l>i)throw new _e(l)}static asList(...i){return i}static create(i,o,l){return Array.from({length:i}).map(d=>Array.from({length:o}).fill(l))}static createInt32Array(i,o,l){return Array.from({length:i}).map(d=>Int32Array.from({length:o}).fill(l))}static equals(i,o){if(!i||!o||!i.length||!o.length||i.length!==o.length)return!1;for(let l=0,f=i.length;l<f;l++)if(i[l]!==o[l])return!1;return!0}static hashCode(i){if(i===null)return 0;let o=1;for(const l of i)o=31*o+l;return o}static fillUint8Array(i,o){for(let l=0;l!==i.length;l++)i[l]=o}static copyOf(i,o){return i.slice(0,o)}static copyOfUint8Array(i,o){if(i.length<=o){const l=new Uint8Array(o);return l.set(i),l}return i.slice(0,o)}static copyOfRange(i,o,l){const f=l-o,d=new Int32Array(f);return $.arraycopy(i,o,d,0,f),d}static binarySearch(i,o,l){l===void 0&&(l=ae.numberComparator);let f=0,d=i.length-1;for(;f<=d;){const m=d+f>>1,y=l(o,i[m]);if(y>0)f=m+1;else if(y<0)d=m-1;else return m}return-f-1}static numberComparator(i,o){return i-o}}class Q{static numberOfTrailingZeros(i){let o;if(i===0)return 32;let l=31;return o=i<<16,o!==0&&(l-=16,i=o),o=i<<8,o!==0&&(l-=8,i=o),o=i<<4,o!==0&&(l-=4,i=o),o=i<<2,o!==0&&(l-=2,i=o),l-(i<<1>>>31)}static numberOfLeadingZeros(i){if(i===0)return 32;let o=1;return i>>>16||(o+=16,i<<=16),i>>>24||(o+=8,i<<=8),i>>>28||(o+=4,i<<=4),i>>>30||(o+=2,i<<=2),o-=i>>>31,o}static toHexString(i){return i.toString(16)}static toBinaryString(i){return String(parseInt(String(i),2))}static bitCount(i){return i=i-(i>>>1&1431655765),i=(i&858993459)+(i>>>2&858993459),i=i+(i>>>4)&252645135,i=i+(i>>>8),i=i+(i>>>16),i&63}static truncDivision(i,o){return Math.trunc(i/o)}static parseInt(i,o=void 0){return parseInt(i,o)}}Q.MIN_VALUE_32_BITS=-2147483648,Q.MAX_VALUE=Number.MAX_SAFE_INTEGER;class le{constructor(i,o){i===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=i,o==null?this.bits=le.makeArray(i):this.bits=o)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(i){if(i>this.bits.length*32){const o=le.makeArray(i);$.arraycopy(this.bits,0,o,0,this.bits.length),this.bits=o}}get(i){return(this.bits[Math.floor(i/32)]&1<<(i&31))!==0}set(i){this.bits[Math.floor(i/32)]|=1<<(i&31)}flip(i){this.bits[Math.floor(i/32)]^=1<<(i&31)}getNextSet(i){const o=this.size;if(i>=o)return o;const l=this.bits;let f=Math.floor(i/32),d=l[f];d&=~((1<<(i&31))-1);const m=l.length;for(;d===0;){if(++f===m)return o;d=l[f]}const y=f*32+Q.numberOfTrailingZeros(d);return y>o?o:y}getNextUnset(i){const o=this.size;if(i>=o)return o;const l=this.bits;let f=Math.floor(i/32),d=~l[f];d&=~((1<<(i&31))-1);const m=l.length;for(;d===0;){if(++f===m)return o;d=~l[f]}const y=f*32+Q.numberOfTrailingZeros(d);return y>o?o:y}setBulk(i,o){this.bits[Math.floor(i/32)]=o}setRange(i,o){if(o<i||i<0||o>this.size)throw new I;if(o===i)return;o--;const l=Math.floor(i/32),f=Math.floor(o/32),d=this.bits;for(let m=l;m<=f;m++){const y=m>l?0:i&31,S=(2<<(m<f?31:o&31))-(1<<y);d[m]|=S}}clear(){const i=this.bits.length,o=this.bits;for(let l=0;l<i;l++)o[l]=0}isRange(i,o,l){if(o<i||i<0||o>this.size)throw new I;if(o===i)return!0;o--;const f=Math.floor(i/32),d=Math.floor(o/32),m=this.bits;for(let y=f;y<=d;y++){const A=y>f?0:i&31,R=(2<<(y<d?31:o&31))-(1<<A)&4294967295;if((m[y]&R)!==(l?R:0))return!1}return!0}appendBit(i){this.ensureCapacity(this.size+1),i&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(i,o){if(o<0||o>32)throw new I("Num bits must be between 0 and 32");this.ensureCapacity(this.size+o);for(let l=o;l>0;l--)this.appendBit((i>>l-1&1)===1)}appendBitArray(i){const o=i.size;this.ensureCapacity(this.size+o);for(let l=0;l<o;l++)this.appendBit(i.get(l))}xor(i){if(this.size!==i.size)throw new I("Sizes don't match");const o=this.bits;for(let l=0,f=o.length;l<f;l++)o[l]^=i.bits[l]}toBytes(i,o,l,f){for(let d=0;d<f;d++){let m=0;for(let y=0;y<8;y++)this.get(i)&&(m|=1<<7-y),i++;o[l+d]=m}}getBitArray(){return this.bits}reverse(){const i=new Int32Array(this.bits.length),o=Math.floor((this.size-1)/32),l=o+1,f=this.bits;for(let d=0;d<l;d++){let m=f[d];m=m>>1&1431655765|(m&1431655765)<<1,m=m>>2&858993459|(m&858993459)<<2,m=m>>4&252645135|(m&252645135)<<4,m=m>>8&16711935|(m&16711935)<<8,m=m>>16&65535|(m&65535)<<16,i[o-d]=m}if(this.size!==l*32){const d=l*32-this.size;let m=i[0]>>>d;for(let y=1;y<l;y++){const A=i[y];m|=A<<32-d,i[y-1]=m,m=A>>>d}i[l-1]=m}this.bits=i}static makeArray(i){return new Int32Array(Math.floor((i+31)/32))}equals(i){if(!(i instanceof le))return!1;const o=i;return this.size===o.size&&ae.equals(this.bits,o.bits)}hashCode(){return 31*this.size+ae.hashCode(this.bits)}toString(){let i="";for(let o=0,l=this.size;o<l;o++)(o&7)===0&&(i+=" "),i+=this.get(o)?"X":".";return i}clone(){return new le(this.size,this.bits.slice())}}var De;(function(P){P[P.OTHER=0]="OTHER",P[P.PURE_BARCODE=1]="PURE_BARCODE",P[P.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",P[P.TRY_HARDER=3]="TRY_HARDER",P[P.CHARACTER_SET=4]="CHARACTER_SET",P[P.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",P[P.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",P[P.ASSUME_GS1=7]="ASSUME_GS1",P[P.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",P[P.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",P[P.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(De||(De={}));var Oe=De;class j extends E{static getFormatInstance(){return new j}}j.kind="FormatException";var z;(function(P){P[P.Cp437=0]="Cp437",P[P.ISO8859_1=1]="ISO8859_1",P[P.ISO8859_2=2]="ISO8859_2",P[P.ISO8859_3=3]="ISO8859_3",P[P.ISO8859_4=4]="ISO8859_4",P[P.ISO8859_5=5]="ISO8859_5",P[P.ISO8859_6=6]="ISO8859_6",P[P.ISO8859_7=7]="ISO8859_7",P[P.ISO8859_8=8]="ISO8859_8",P[P.ISO8859_9=9]="ISO8859_9",P[P.ISO8859_10=10]="ISO8859_10",P[P.ISO8859_11=11]="ISO8859_11",P[P.ISO8859_13=12]="ISO8859_13",P[P.ISO8859_14=13]="ISO8859_14",P[P.ISO8859_15=14]="ISO8859_15",P[P.ISO8859_16=15]="ISO8859_16",P[P.SJIS=16]="SJIS",P[P.Cp1250=17]="Cp1250",P[P.Cp1251=18]="Cp1251",P[P.Cp1252=19]="Cp1252",P[P.Cp1256=20]="Cp1256",P[P.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",P[P.UTF8=22]="UTF8",P[P.ASCII=23]="ASCII",P[P.Big5=24]="Big5",P[P.GB18030=25]="GB18030",P[P.EUC_KR=26]="EUC_KR"})(z||(z={}));class V{constructor(i,o,l,...f){this.valueIdentifier=i,this.name=l,typeof o=="number"?this.values=Int32Array.from([o]):this.values=o,this.otherEncodingNames=f,V.VALUE_IDENTIFIER_TO_ECI.set(i,this),V.NAME_TO_ECI.set(l,this);const d=this.values;for(let m=0,y=d.length;m!==y;m++){const A=d[m];V.VALUES_TO_ECI.set(A,this)}for(const m of f)V.NAME_TO_ECI.set(m,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(i){if(i<0||i>=900)throw new j("incorect value");const o=V.VALUES_TO_ECI.get(i);if(o===void 0)throw new j("incorect value");return o}static getCharacterSetECIByName(i){const o=V.NAME_TO_ECI.get(i);if(o===void 0)throw new j("incorect value");return o}equals(i){if(!(i instanceof V))return!1;const o=i;return this.getName()===o.getName()}}V.VALUE_IDENTIFIER_TO_ECI=new Map,V.VALUES_TO_ECI=new Map,V.NAME_TO_ECI=new Map,V.Cp437=new V(z.Cp437,Int32Array.from([0,2]),"Cp437"),V.ISO8859_1=new V(z.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),V.ISO8859_2=new V(z.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),V.ISO8859_3=new V(z.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),V.ISO8859_4=new V(z.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),V.ISO8859_5=new V(z.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),V.ISO8859_6=new V(z.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),V.ISO8859_7=new V(z.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),V.ISO8859_8=new V(z.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),V.ISO8859_9=new V(z.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),V.ISO8859_10=new V(z.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),V.ISO8859_11=new V(z.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),V.ISO8859_13=new V(z.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),V.ISO8859_14=new V(z.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),V.ISO8859_15=new V(z.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),V.ISO8859_16=new V(z.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),V.SJIS=new V(z.SJIS,20,"SJIS","Shift_JIS"),V.Cp1250=new V(z.Cp1250,21,"Cp1250","windows-1250"),V.Cp1251=new V(z.Cp1251,22,"Cp1251","windows-1251"),V.Cp1252=new V(z.Cp1252,23,"Cp1252","windows-1252"),V.Cp1256=new V(z.Cp1256,24,"Cp1256","windows-1256"),V.UnicodeBigUnmarked=new V(z.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),V.UTF8=new V(z.UTF8,26,"UTF8","UTF-8"),V.ASCII=new V(z.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),V.Big5=new V(z.Big5,28,"Big5"),V.GB18030=new V(z.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),V.EUC_KR=new V(z.EUC_KR,30,"EUC_KR","EUC-KR");class Y extends E{}Y.kind="UnsupportedOperationException";class Z{static decode(i,o){const l=this.encodingName(o);return this.customDecoder?this.customDecoder(i,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(i,l):new TextDecoder(l).decode(i)}static shouldDecodeOnFallback(i){return!Z.isBrowser()&&i==="ISO-8859-1"}static encode(i,o){const l=this.encodingName(o);return this.customEncoder?this.customEncoder(i,l):typeof TextEncoder>"u"?this.encodeFallback(i):new TextEncoder().encode(i)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(i){return typeof i=="string"?i:i.getName()}static encodingCharacterSet(i){return i instanceof V?i:V.getCharacterSetECIByName(i)}static decodeFallback(i,o){const l=this.encodingCharacterSet(o);if(Z.isDecodeFallbackSupported(l)){let f="";for(let d=0,m=i.length;d<m;d++){let y=i[d].toString(16);y.length<2&&(y="0"+y),f+="%"+y}return decodeURIComponent(f)}if(l.equals(V.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(i.buffer));throw new Y(`Encoding ${this.encodingName(o)} not supported by fallback.`)}static isDecodeFallbackSupported(i){return i.equals(V.UTF8)||i.equals(V.ISO8859_1)||i.equals(V.ASCII)}static encodeFallback(i){const l=btoa(unescape(encodeURIComponent(i))).split(""),f=[];for(let d=0;d<l.length;d++)f.push(l[d].charCodeAt(0));return new Uint8Array(f)}}class J{static castAsNonUtf8Char(i,o=null){const l=o?o.getName():this.ISO88591;return Z.decode(new Uint8Array([i]),l)}static guessEncoding(i,o){if(o!=null&&o.get(Oe.CHARACTER_SET)!==void 0)return o.get(Oe.CHARACTER_SET).toString();const l=i.length;let f=!0,d=!0,m=!0,y=0,A=0,S=0,R=0,L=0,k=0,G=0,te=0,re=0,ue=0,ye=0;const ke=i.length>3&&i[0]===239&&i[1]===187&&i[2]===191;for(let Pe=0;Pe<l&&(f||d||m);Pe++){const Re=i[Pe]&255;m&&(y>0?(Re&128)===0?m=!1:y--:(Re&128)!==0&&((Re&64)===0?m=!1:(y++,(Re&32)===0?A++:(y++,(Re&16)===0?S++:(y++,(Re&8)===0?R++:m=!1))))),f&&(Re>127&&Re<160?f=!1:Re>159&&(Re<192||Re===215||Re===247)&&ye++),d&&(L>0?Re<64||Re===127||Re>252?d=!1:L--:Re===128||Re===160||Re>239?d=!1:Re>160&&Re<224?(k++,te=0,G++,G>re&&(re=G)):Re>127?(L++,G=0,te++,te>ue&&(ue=te)):(G=0,te=0))}return m&&y>0&&(m=!1),d&&L>0&&(d=!1),m&&(ke||A+S+R>0)?J.UTF8:d&&(J.ASSUME_SHIFT_JIS||re>=3||ue>=3)?J.SHIFT_JIS:f&&d?re===2&&k===2||ye*10>=l?J.SHIFT_JIS:J.ISO88591:f?J.ISO88591:d?J.SHIFT_JIS:m?J.UTF8:J.PLATFORM_DEFAULT_ENCODING}static format(i,...o){let l=-1;function f(m,y,A,S,R,L){if(m==="%%")return"%";if(o[++l]===void 0)return;m=S?parseInt(S.substr(1)):void 0;let k=R?parseInt(R.substr(1)):void 0,G;switch(L){case"s":G=o[l];break;case"c":G=o[l][0];break;case"f":G=parseFloat(o[l]).toFixed(m);break;case"p":G=parseFloat(o[l]).toPrecision(m);break;case"e":G=parseFloat(o[l]).toExponential(m);break;case"x":G=parseInt(o[l]).toString(k||16);break;case"d":G=parseFloat(parseInt(o[l],k||10).toPrecision(m)).toFixed(0);break}G=typeof G=="object"?JSON.stringify(G):(+G).toString(k);let te=parseInt(A),re=A&&A[0]+""=="0"?"0":" ";for(;G.length<te;)G=y!==void 0?G+re:re+G;return G}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(d,f)}static getBytes(i,o){return Z.encode(i,o)}static getCharCode(i,o=0){return i.charCodeAt(o)}static getCharAt(i){return String.fromCharCode(i)}}J.SHIFT_JIS=V.SJIS.getName(),J.GB2312="GB2312",J.ISO88591=V.ISO8859_1.getName(),J.EUC_JP="EUC_JP",J.UTF8=V.UTF8.getName(),J.PLATFORM_DEFAULT_ENCODING=J.UTF8,J.ASSUME_SHIFT_JIS=!1;class K{constructor(i=""){this.value=i}enableDecoding(i){return this.encoding=i,this}append(i){return typeof i=="string"?this.value+=i.toString():this.encoding?this.value+=J.castAsNonUtf8Char(i,this.encoding):this.value+=String.fromCharCode(i),this}appendChars(i,o,l){for(let f=o;o<o+l;f++)this.append(i[f]);return this}length(){return this.value.length}charAt(i){return this.value.charAt(i)}deleteCharAt(i){this.value=this.value.substr(0,i)+this.value.substring(i+1)}setCharAt(i,o){this.value=this.value.substr(0,i)+o+this.value.substr(i+1)}substring(i,o){return this.value.substring(i,o)}setLengthToZero(){this.value=""}toString(){return this.value}insert(i,o){this.value=this.value.substr(0,i)+o+this.value.substr(i+o.length)}}class $e{constructor(i,o,l,f){if(this.width=i,this.height=o,this.rowSize=l,this.bits=f,o==null&&(o=i),this.height=o,i<1||o<1)throw new I("Both dimensions must be greater than 0");l==null&&(l=Math.floor((i+31)/32)),this.rowSize=l,f==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(i){const o=i.length,l=i[0].length,f=new $e(l,o);for(let d=0;d<o;d++){const m=i[d];for(let y=0;y<l;y++)m[y]&&f.set(y,d)}return f}static parseFromString(i,o,l){if(i===null)throw new I("stringRepresentation cannot be null");const f=new Array(i.length);let d=0,m=0,y=-1,A=0,S=0;for(;S<i.length;)if(i.charAt(S)===`
`||i.charAt(S)==="\r"){if(d>m){if(y===-1)y=d-m;else if(d-m!==y)throw new I("row lengths do not match");m=d,A++}S++}else if(i.substring(S,S+o.length)===o)S+=o.length,f[d]=!0,d++;else if(i.substring(S,S+l.length)===l)S+=l.length,f[d]=!1,d++;else throw new I("illegal character encountered: "+i.substring(S));if(d>m){if(y===-1)y=d-m;else if(d-m!==y)throw new I("row lengths do not match");A++}const R=new $e(y,A);for(let L=0;L<d;L++)f[L]&&R.set(Math.floor(L%y),Math.floor(L/y));return R}get(i,o){const l=o*this.rowSize+Math.floor(i/32);return(this.bits[l]>>>(i&31)&1)!==0}set(i,o){const l=o*this.rowSize+Math.floor(i/32);this.bits[l]|=1<<(i&31)&4294967295}unset(i,o){const l=o*this.rowSize+Math.floor(i/32);this.bits[l]&=~(1<<(i&31)&4294967295)}flip(i,o){const l=o*this.rowSize+Math.floor(i/32);this.bits[l]^=1<<(i&31)&4294967295}xor(i){if(this.width!==i.getWidth()||this.height!==i.getHeight()||this.rowSize!==i.getRowSize())throw new I("input matrix dimensions do not match");const o=new le(Math.floor(this.width/32)+1),l=this.rowSize,f=this.bits;for(let d=0,m=this.height;d<m;d++){const y=d*l,A=i.getRow(d,o).getBitArray();for(let S=0;S<l;S++)f[y+S]^=A[S]}}clear(){const i=this.bits,o=i.length;for(let l=0;l<o;l++)i[l]=0}setRegion(i,o,l,f){if(o<0||i<0)throw new I("Left and top must be nonnegative");if(f<1||l<1)throw new I("Height and width must be at least 1");const d=i+l,m=o+f;if(m>this.height||d>this.width)throw new I("The region must fit inside the matrix");const y=this.rowSize,A=this.bits;for(let S=o;S<m;S++){const R=S*y;for(let L=i;L<d;L++)A[R+Math.floor(L/32)]|=1<<(L&31)&4294967295}}getRow(i,o){o==null||o.getSize()<this.width?o=new le(this.width):o.clear();const l=this.rowSize,f=this.bits,d=i*l;for(let m=0;m<l;m++)o.setBulk(m*32,f[d+m]);return o}setRow(i,o){$.arraycopy(o.getBitArray(),0,this.bits,i*this.rowSize,this.rowSize)}rotate180(){const i=this.getWidth(),o=this.getHeight();let l=new le(i),f=new le(i);for(let d=0,m=Math.floor((o+1)/2);d<m;d++)l=this.getRow(d,l),f=this.getRow(o-1-d,f),l.reverse(),f.reverse(),this.setRow(d,f),this.setRow(o-1-d,l)}getEnclosingRectangle(){const i=this.width,o=this.height,l=this.rowSize,f=this.bits;let d=i,m=o,y=-1,A=-1;for(let S=0;S<o;S++)for(let R=0;R<l;R++){const L=f[S*l+R];if(L!==0){if(S<m&&(m=S),S>A&&(A=S),R*32<d){let k=0;for(;(L<<31-k&4294967295)===0;)k++;R*32+k<d&&(d=R*32+k)}if(R*32+31>y){let k=31;for(;!(L>>>k);)k--;R*32+k>y&&(y=R*32+k)}}}return y<d||A<m?null:Int32Array.from([d,m,y-d+1,A-m+1])}getTopLeftOnBit(){const i=this.rowSize,o=this.bits;let l=0;for(;l<o.length&&o[l]===0;)l++;if(l===o.length)return null;const f=l/i;let d=l%i*32;const m=o[l];let y=0;for(;(m<<31-y&4294967295)===0;)y++;return d+=y,Int32Array.from([d,f])}getBottomRightOnBit(){const i=this.rowSize,o=this.bits;let l=o.length-1;for(;l>=0&&o[l]===0;)l--;if(l<0)return null;const f=Math.floor(l/i);let d=Math.floor(l%i)*32;const m=o[l];let y=31;for(;!(m>>>y);)y--;return d+=y,Int32Array.from([d,f])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(i){if(!(i instanceof $e))return!1;const o=i;return this.width===o.width&&this.height===o.height&&this.rowSize===o.rowSize&&ae.equals(this.bits,o.bits)}hashCode(){let i=this.width;return i=31*i+this.width,i=31*i+this.height,i=31*i+this.rowSize,i=31*i+ae.hashCode(this.bits),i}toString(i="X ",o="  ",l=`
`){return this.buildToString(i,o,l)}buildToString(i,o,l){let f=new K;for(let d=0,m=this.height;d<m;d++){for(let y=0,A=this.width;y<A;y++)f.append(this.get(y,d)?i:o);f.append(l)}return f.toString()}clone(){return new $e(this.width,this.height,this.rowSize,this.bits.slice())}}class fe extends E{static getNotFoundInstance(){return new fe}}fe.kind="NotFoundException";class me extends W{constructor(i){super(i),this.luminances=me.EMPTY,this.buckets=new Int32Array(me.LUMINANCE_BUCKETS)}getBlackRow(i,o){const l=this.getLuminanceSource(),f=l.getWidth();o==null||o.getSize()<f?o=new le(f):o.clear(),this.initArrays(f);const d=l.getRow(i,this.luminances),m=this.buckets;for(let A=0;A<f;A++)m[(d[A]&255)>>me.LUMINANCE_SHIFT]++;const y=me.estimateBlackPoint(m);if(f<3)for(let A=0;A<f;A++)(d[A]&255)<y&&o.set(A);else{let A=d[0]&255,S=d[1]&255;for(let R=1;R<f-1;R++){const L=d[R+1]&255;(S*4-A-L)/2<y&&o.set(R),A=S,S=L}}return o}getBlackMatrix(){const i=this.getLuminanceSource(),o=i.getWidth(),l=i.getHeight(),f=new $e(o,l);this.initArrays(o);const d=this.buckets;for(let A=1;A<5;A++){const S=Math.floor(l*A/5),R=i.getRow(S,this.luminances),L=Math.floor(o*4/5);for(let k=Math.floor(o/5);k<L;k++){const G=R[k]&255;d[G>>me.LUMINANCE_SHIFT]++}}const m=me.estimateBlackPoint(d),y=i.getMatrix();for(let A=0;A<l;A++){const S=A*o;for(let R=0;R<o;R++)(y[S+R]&255)<m&&f.set(R,A)}return f}createBinarizer(i){return new me(i)}initArrays(i){this.luminances.length<i&&(this.luminances=new Uint8ClampedArray(i));const o=this.buckets;for(let l=0;l<me.LUMINANCE_BUCKETS;l++)o[l]=0}static estimateBlackPoint(i){const o=i.length;let l=0,f=0,d=0;for(let R=0;R<o;R++)i[R]>d&&(f=R,d=i[R]),i[R]>l&&(l=i[R]);let m=0,y=0;for(let R=0;R<o;R++){const L=R-f,k=i[R]*L*L;k>y&&(m=R,y=k)}if(f>m){const R=f;f=m,m=R}if(m-f<=o/16)throw new fe;let A=m-1,S=-1;for(let R=m-1;R>f;R--){const L=R-f,k=L*L*(m-R)*(l-i[R]);k>S&&(A=R,S=k)}return A<<me.LUMINANCE_SHIFT}}me.LUMINANCE_BITS=5,me.LUMINANCE_SHIFT=8-me.LUMINANCE_BITS,me.LUMINANCE_BUCKETS=1<<me.LUMINANCE_BITS,me.EMPTY=Uint8ClampedArray.from([0]);class be extends me{constructor(i){super(i),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const i=this.getLuminanceSource(),o=i.getWidth(),l=i.getHeight();if(o>=be.MINIMUM_DIMENSION&&l>=be.MINIMUM_DIMENSION){const f=i.getMatrix();let d=o>>be.BLOCK_SIZE_POWER;(o&be.BLOCK_SIZE_MASK)!==0&&d++;let m=l>>be.BLOCK_SIZE_POWER;(l&be.BLOCK_SIZE_MASK)!==0&&m++;const y=be.calculateBlackPoints(f,d,m,o,l),A=new $e(o,l);be.calculateThresholdForBlock(f,d,m,o,l,y,A),this.matrix=A}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(i){return new be(i)}static calculateThresholdForBlock(i,o,l,f,d,m,y){const A=d-be.BLOCK_SIZE,S=f-be.BLOCK_SIZE;for(let R=0;R<l;R++){let L=R<<be.BLOCK_SIZE_POWER;L>A&&(L=A);const k=be.cap(R,2,l-3);for(let G=0;G<o;G++){let te=G<<be.BLOCK_SIZE_POWER;te>S&&(te=S);const re=be.cap(G,2,o-3);let ue=0;for(let ke=-2;ke<=2;ke++){const Pe=m[k+ke];ue+=Pe[re-2]+Pe[re-1]+Pe[re]+Pe[re+1]+Pe[re+2]}const ye=ue/25;be.thresholdBlock(i,te,L,ye,f,y)}}}static cap(i,o,l){return i<o?o:i>l?l:i}static thresholdBlock(i,o,l,f,d,m){for(let y=0,A=l*d+o;y<be.BLOCK_SIZE;y++,A+=d)for(let S=0;S<be.BLOCK_SIZE;S++)(i[A+S]&255)<=f&&m.set(o+S,l+y)}static calculateBlackPoints(i,o,l,f,d){const m=d-be.BLOCK_SIZE,y=f-be.BLOCK_SIZE,A=new Array(l);for(let S=0;S<l;S++){A[S]=new Int32Array(o);let R=S<<be.BLOCK_SIZE_POWER;R>m&&(R=m);for(let L=0;L<o;L++){let k=L<<be.BLOCK_SIZE_POWER;k>y&&(k=y);let G=0,te=255,re=0;for(let ye=0,ke=R*f+k;ye<be.BLOCK_SIZE;ye++,ke+=f){for(let Pe=0;Pe<be.BLOCK_SIZE;Pe++){const Re=i[ke+Pe]&255;G+=Re,Re<te&&(te=Re),Re>re&&(re=Re)}if(re-te>be.MIN_DYNAMIC_RANGE)for(ye++,ke+=f;ye<be.BLOCK_SIZE;ye++,ke+=f)for(let Pe=0;Pe<be.BLOCK_SIZE;Pe++)G+=i[ke+Pe]&255}let ue=G>>be.BLOCK_SIZE_POWER*2;if(re-te<=be.MIN_DYNAMIC_RANGE&&(ue=te/2,S>0&&L>0)){const ye=(A[S-1][L]+2*A[S][L-1]+A[S-1][L-1])/4;te<ye&&(ue=ye)}A[S][L]=ue}}return A}}be.BLOCK_SIZE_POWER=3,be.BLOCK_SIZE=1<<be.BLOCK_SIZE_POWER,be.BLOCK_SIZE_MASK=be.BLOCK_SIZE-1,be.MINIMUM_DIMENSION=be.BLOCK_SIZE*5,be.MIN_DYNAMIC_RANGE=24;class Ge{constructor(i,o){this.width=i,this.height=o}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(i,o,l,f){throw new Y("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Y("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Y("This luminance source does not support rotation by 45 degrees.")}toString(){const i=new Uint8ClampedArray(this.width);let o=new K;for(let l=0;l<this.height;l++){const f=this.getRow(l,i);for(let d=0;d<this.width;d++){const m=f[d]&255;let y;m<64?y="#":m<128?y="+":m<192?y=".":y=" ",o.append(y)}o.append(`
`)}return o.toString()}}class ct extends Ge{constructor(i){super(i.getWidth(),i.getHeight()),this.delegate=i}getRow(i,o){const l=this.delegate.getRow(i,o),f=this.getWidth();for(let d=0;d<f;d++)l[d]=255-(l[d]&255);return l}getMatrix(){const i=this.delegate.getMatrix(),o=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(o);for(let f=0;f<o;f++)l[f]=255-(i[f]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(i,o,l,f){return new ct(this.delegate.crop(i,o,l,f))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ct(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ct(this.delegate.rotateCounterClockwise45())}}class xt extends Ge{constructor(i){super(i.width,i.height),this.canvas=i,this.tempCanvasElement=null,this.buffer=xt.makeBufferFromCanvasImageData(i)}static makeBufferFromCanvasImageData(i){const o=i.getContext("2d").getImageData(0,0,i.width,i.height);return xt.toGrayscaleBuffer(o.data,i.width,i.height)}static toGrayscaleBuffer(i,o,l){const f=new Uint8ClampedArray(o*l);for(let d=0,m=0,y=i.length;d<y;d+=4,m++){let A;if(i[d+3]===0)A=255;else{const R=i[d],L=i[d+1],k=i[d+2];A=306*R+601*L+117*k+512>>10}f[m]=A}return f}getRow(i,o){if(i<0||i>=this.getHeight())throw new I("Requested row is outside the image: "+i);const l=this.getWidth(),f=i*l;return o===null?o=this.buffer.slice(f,f+l):(o.length<l&&(o=new Uint8ClampedArray(l)),o.set(this.buffer.slice(f,f+l))),o}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(i,o,l,f){return super.crop(i,o,l,f),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const i=this.canvas.ownerDocument.createElement("canvas");i.width=this.canvas.width,i.height=this.canvas.height,this.tempCanvasElement=i}return this.tempCanvasElement}rotate(i){const o=this.getTempCanvasElement(),l=o.getContext("2d"),f=i*xt.DEGREE_TO_RADIANS,d=this.canvas.width,m=this.canvas.height,y=Math.ceil(Math.abs(Math.cos(f))*d+Math.abs(Math.sin(f))*m),A=Math.ceil(Math.abs(Math.sin(f))*d+Math.abs(Math.cos(f))*m);return o.width=y,o.height=A,l.translate(y/2,A/2),l.rotate(f),l.drawImage(this.canvas,d/-2,m/-2),this.buffer=xt.makeBufferFromCanvasImageData(o),this}invert(){return new ct(this)}}xt.DEGREE_TO_RADIANS=Math.PI/180;class ie{constructor(i,o,l){this.deviceId=i,this.label=o,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Ae=(globalThis||If||self||window||void 0)&&(globalThis||If||self||window||void 0).__awaiter||function(P,i,o,l){function f(d){return d instanceof o?d:new o(function(m){m(d)})}return new(o||(o=Promise))(function(d,m){function y(R){try{S(l.next(R))}catch(L){m(L)}}function A(R){try{S(l.throw(R))}catch(L){m(L)}}function S(R){R.done?d(R.value):f(R.value).then(y,A)}S((l=l.apply(P,i||[])).next())})};class Ve{constructor(i,o=500,l){this.reader=i,this.timeBetweenScansMillis=o,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(i){this._timeBetweenDecodingAttempts=i<0?0:i}set hints(i){this._hints=i||null}get hints(){return this._hints}listVideoInputDevices(){return Ae(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const i=yield navigator.mediaDevices.enumerateDevices(),o=[];for(const l of i){const f=l.kind==="video"?"videoinput":l.kind;if(f!=="videoinput")continue;const d=l.deviceId||l.id,m=l.label||`Video device ${o.length+1}`,y=l.groupId,A={deviceId:d,label:m,kind:f,groupId:y};o.push(A)}return o})}getVideoInputDevices(){return Ae(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(o=>new ie(o.deviceId,o.label))})}findDeviceById(i){return Ae(this,void 0,void 0,function*(){const o=yield this.listVideoInputDevices();return o?o.find(l=>l.deviceId===i):null})}decodeFromInputVideoDevice(i,o){return Ae(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(i,o)})}decodeOnceFromVideoDevice(i,o){return Ae(this,void 0,void 0,function*(){this.reset();let l;i?l={deviceId:{exact:i}}:l={facingMode:"environment"};const f={video:l};return yield this.decodeOnceFromConstraints(f,o)})}decodeOnceFromConstraints(i,o){return Ae(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeOnceFromStream(l,o)})}decodeOnceFromStream(i,o){return Ae(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(i,o);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(i,o,l){return Ae(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(i,o,l)})}decodeFromVideoDevice(i,o,l){return Ae(this,void 0,void 0,function*(){let f;i?f={deviceId:{exact:i}}:f={facingMode:"environment"};const d={video:f};return yield this.decodeFromConstraints(d,o,l)})}decodeFromConstraints(i,o,l){return Ae(this,void 0,void 0,function*(){const f=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeFromStream(f,o,l)})}decodeFromStream(i,o,l){return Ae(this,void 0,void 0,function*(){this.reset();const f=yield this.attachStreamToVideo(i,o);return yield this.decodeContinuously(f,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(i,o){return Ae(this,void 0,void 0,function*(){const l=this.prepareVideoElement(o);return this.addVideoSource(l,i),this.videoElement=l,this.stream=i,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(i){return new Promise((o,l)=>this.playVideoOnLoad(i,()=>o()))}playVideoOnLoad(i,o){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(i),i.addEventListener("ended",this.videoEndedListener),i.addEventListener("canplay",this.videoCanPlayListener),i.addEventListener("playing",o),this.tryPlayVideo(i)}isVideoPlaying(i){return i.currentTime>0&&!i.paused&&!i.ended&&i.readyState>2}tryPlayVideo(i){return Ae(this,void 0,void 0,function*(){if(this.isVideoPlaying(i)){console.warn("Trying to play video that is already playing.");return}try{yield i.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(i,o){const l=document.getElementById(i);if(!l)throw new C(`element with id '${i}' not found`);if(l.nodeName.toLowerCase()!==o.toLowerCase())throw new C(`element with id '${i}' must be an ${o} element`);return l}decodeFromImage(i,o){if(!i&&!o)throw new C("either imageElement with a src set or an url must be provided");return o&&!i?this.decodeFromImageUrl(o):this.decodeFromImageElement(i)}decodeFromVideo(i,o){if(!i&&!o)throw new C("Either an element with a src set or an URL must be provided");return o&&!i?this.decodeFromVideoUrl(o):this.decodeFromVideoElement(i)}decodeFromVideoContinuously(i,o,l){if(i===void 0&&o===void 0)throw new C("Either an element with a src set or an URL must be provided");return o&&!i?this.decodeFromVideoUrlContinuously(o,l):this.decodeFromVideoElementContinuously(i,l)}decodeFromImageElement(i){if(!i)throw new C("An image element must be provided.");this.reset();const o=this.prepareImageElement(i);this.imageElement=o;let l;return this.isImageLoaded(o)?l=this.decodeOnce(o,!1,!0):l=this._decodeOnLoadImage(o),l}decodeFromVideoElement(i){const o=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideo(o)}decodeFromVideoElementContinuously(i,o){const l=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideoContinuously(l,o)}_decodeFromVideoElementSetup(i){if(!i)throw new C("A video element must be provided.");this.reset();const o=this.prepareVideoElement(i);return this.videoElement=o,o}decodeFromImageUrl(i){if(!i)throw new C("An URL must be provided.");this.reset();const o=this.prepareImageElement();this.imageElement=o;const l=this._decodeOnLoadImage(o);return o.src=i,l}decodeFromVideoUrl(i){if(!i)throw new C("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),l=this.decodeFromVideoElement(o);return o.src=i,l}decodeFromVideoUrlContinuously(i,o){if(!i)throw new C("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),f=this.decodeFromVideoElementContinuously(l,o);return l.src=i,f}_decodeOnLoadImage(i){return new Promise((o,l)=>{this.imageLoadedListener=()=>this.decodeOnce(i,!1,!0).then(o,l),i.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(i){return Ae(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(i),yield this.decodeOnce(i)})}_decodeOnLoadVideoContinuously(i,o){return Ae(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(i),this.decodeContinuously(i,o)})}isImageLoaded(i){return!(!i.complete||i.naturalWidth===0)}prepareImageElement(i){let o;return typeof i>"u"&&(o=document.createElement("img"),o.width=200,o.height=200),typeof i=="string"&&(o=this.getMediaElement(i,"img")),i instanceof HTMLImageElement&&(o=i),o}prepareVideoElement(i){let o;return!i&&typeof document<"u"&&(o=document.createElement("video"),o.width=200,o.height=200),typeof i=="string"&&(o=this.getMediaElement(i,"video")),i instanceof HTMLVideoElement&&(o=i),o.setAttribute("autoplay","true"),o.setAttribute("muted","true"),o.setAttribute("playsinline","true"),o}decodeOnce(i,o=!0,l=!0){this._stopAsyncDecode=!1;const f=(d,m)=>{if(this._stopAsyncDecode){m(new fe("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const y=this.decode(i);d(y)}catch(y){const A=o&&y instanceof fe,R=(y instanceof B||y instanceof j)&&l;if(A||R)return setTimeout(f,this._timeBetweenDecodingAttempts,d,m);m(y)}};return new Promise((d,m)=>f(d,m))}decodeContinuously(i,o){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const f=this.decode(i);o(f,null),setTimeout(l,this.timeBetweenScansMillis)}catch(f){o(null,f);const d=f instanceof B||f instanceof j,m=f instanceof fe;(d||m)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(i){const o=this.createBinaryBitmap(i);return this.decodeBitmap(o)}_isHTMLVideoElement(i){return i.videoWidth!==0}drawFrameOnCanvas(i,o,l){o||(o={sx:0,sy:0,sWidth:i.videoWidth,sHeight:i.videoHeight,dx:0,dy:0,dWidth:i.videoWidth,dHeight:i.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(i,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}drawImageOnCanvas(i,o,l=this.captureCanvasContext){o||(o={sx:0,sy:0,sWidth:i.naturalWidth,sHeight:i.naturalHeight,dx:0,dy:0,dWidth:i.naturalWidth,dHeight:i.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(i,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}createBinaryBitmap(i){this.getCaptureCanvasContext(i),this._isHTMLVideoElement(i)?this.drawFrameOnCanvas(i):this.drawImageOnCanvas(i);const o=this.getCaptureCanvas(i),l=new xt(o),f=new be(l);return new M(f)}getCaptureCanvasContext(i){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(i).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(i){if(!this.captureCanvas){const o=this.createCaptureCanvas(i);this.captureCanvas=o}return this.captureCanvas}decodeBitmap(i){return this.reader.decode(i,this._hints)}createCaptureCanvas(i){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const o=document.createElement("canvas");let l,f;return typeof i<"u"&&(i instanceof HTMLVideoElement?(l=i.videoWidth,f=i.videoHeight):i instanceof HTMLImageElement&&(l=i.naturalWidth||i.width,f=i.naturalHeight||i.height)),o.style.width=l+"px",o.style.height=f+"px",o.width=l,o.height=f,o}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(i=>i.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(i,o){try{i.srcObject=o}catch{i.src=URL.createObjectURL(o)}}cleanVideoSource(i){try{i.srcObject=null}catch{i.src=""}this.videoElement.removeAttribute("src")}}class je{constructor(i,o,l=o==null?0:8*o.length,f,d,m=$.currentTimeMillis()){this.text=i,this.rawBytes=o,this.numBits=l,this.resultPoints=f,this.format=d,this.timestamp=m,this.text=i,this.rawBytes=o,l==null?this.numBits=o==null?0:8*o.length:this.numBits=l,this.resultPoints=f,this.format=d,this.resultMetadata=null,m==null?this.timestamp=$.currentTimeMillis():this.timestamp=m}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(i,o){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(i,o)}putAllMetadata(i){i!==null&&(this.resultMetadata===null?this.resultMetadata=i:this.resultMetadata=new Map(i))}addResultPoints(i){const o=this.resultPoints;if(o===null)this.resultPoints=i;else if(i!==null&&i.length>0){const l=new Array(o.length+i.length);$.arraycopy(o,0,l,0,o.length),$.arraycopy(i,0,l,o.length,i.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var rt;(function(P){P[P.AZTEC=0]="AZTEC",P[P.CODABAR=1]="CODABAR",P[P.CODE_39=2]="CODE_39",P[P.CODE_93=3]="CODE_93",P[P.CODE_128=4]="CODE_128",P[P.DATA_MATRIX=5]="DATA_MATRIX",P[P.EAN_8=6]="EAN_8",P[P.EAN_13=7]="EAN_13",P[P.ITF=8]="ITF",P[P.MAXICODE=9]="MAXICODE",P[P.PDF_417=10]="PDF_417",P[P.QR_CODE=11]="QR_CODE",P[P.RSS_14=12]="RSS_14",P[P.RSS_EXPANDED=13]="RSS_EXPANDED",P[P.UPC_A=14]="UPC_A",P[P.UPC_E=15]="UPC_E",P[P.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(rt||(rt={}));var Le=rt,wt;(function(P){P[P.OTHER=0]="OTHER",P[P.ORIENTATION=1]="ORIENTATION",P[P.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",P[P.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",P[P.ISSUE_NUMBER=4]="ISSUE_NUMBER",P[P.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",P[P.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",P[P.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",P[P.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",P[P.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",P[P.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(wt||(wt={}));var vt=wt;class tn{constructor(i,o,l,f,d=-1,m=-1){this.rawBytes=i,this.text=o,this.byteSegments=l,this.ecLevel=f,this.structuredAppendSequenceNumber=d,this.structuredAppendParity=m,this.numBits=i==null?0:8*i.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(i){this.numBits=i}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(i){this.errorsCorrected=i}getErasures(){return this.erasures}setErasures(i){this.erasures=i}getOther(){return this.other}setOther(i){this.other=i}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Ur{exp(i){return this.expTable[i]}log(i){if(i===0)throw new I;return this.logTable[i]}static addOrSubtract(i,o){return i^o}}class cn{constructor(i,o){if(o.length===0)throw new I;this.field=i;const l=o.length;if(l>1&&o[0]===0){let f=1;for(;f<l&&o[f]===0;)f++;f===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-f),$.arraycopy(o,f,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);const o=this.coefficients;let l;if(i===1){l=0;for(let m=0,y=o.length;m!==y;m++){const A=o[m];l=Ur.addOrSubtract(l,A)}return l}l=o[0];const f=o.length,d=this.field;for(let m=1;m<f;m++)l=Ur.addOrSubtract(d.multiply(i,l),o[m]);return l}addOrSubtract(i){if(!this.field.equals(i.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero())return i;if(i.isZero())return this;let o=this.coefficients,l=i.coefficients;if(o.length>l.length){const m=o;o=l,l=m}let f=new Int32Array(l.length);const d=l.length-o.length;$.arraycopy(l,0,f,0,d);for(let m=d;m<l.length;m++)f[m]=Ur.addOrSubtract(o[m-d],l[m]);return new cn(this.field,f)}multiply(i){if(!this.field.equals(i.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero()||i.isZero())return this.field.getZero();const o=this.coefficients,l=o.length,f=i.coefficients,d=f.length,m=new Int32Array(l+d-1),y=this.field;for(let A=0;A<l;A++){const S=o[A];for(let R=0;R<d;R++)m[A+R]=Ur.addOrSubtract(m[A+R],y.multiply(S,f[R]))}return new cn(y,m)}multiplyScalar(i){if(i===0)return this.field.getZero();if(i===1)return this;const o=this.coefficients.length,l=this.field,f=new Int32Array(o),d=this.coefficients;for(let m=0;m<o;m++)f[m]=l.multiply(d[m],i);return new cn(l,f)}multiplyByMonomial(i,o){if(i<0)throw new I;if(o===0)return this.field.getZero();const l=this.coefficients,f=l.length,d=new Int32Array(f+i),m=this.field;for(let y=0;y<f;y++)d[y]=m.multiply(l[y],o);return new cn(m,d)}divide(i){if(!this.field.equals(i.field))throw new I("GenericGFPolys do not have same GenericGF field");if(i.isZero())throw new I("Divide by 0");const o=this.field;let l=o.getZero(),f=this;const d=i.getCoefficient(i.getDegree()),m=o.inverse(d);for(;f.getDegree()>=i.getDegree()&&!f.isZero();){const y=f.getDegree()-i.getDegree(),A=o.multiply(f.getCoefficient(f.getDegree()),m),S=i.multiplyByMonomial(y,A),R=o.buildMonomial(y,A);l=l.addOrSubtract(R),f=f.addOrSubtract(S)}return[l,f]}toString(){let i="";for(let o=this.getDegree();o>=0;o--){let l=this.getCoefficient(o);if(l!==0){if(l<0?(i+=" - ",l=-l):i.length>0&&(i+=" + "),o===0||l!==1){const f=this.field.log(l);f===0?i+="1":f===1?i+="a":(i+="a^",i+=f)}o!==0&&(o===1?i+="x":(i+="x^",i+=o))}}return i}}class ui extends E{}ui.kind="ArithmeticException";class At extends Ur{constructor(i,o,l){super(),this.primitive=i,this.size=o,this.generatorBase=l;const f=new Int32Array(o);let d=1;for(let y=0;y<o;y++)f[y]=d,d*=2,d>=o&&(d^=i,d&=o-1);this.expTable=f;const m=new Int32Array(o);for(let y=0;y<o-1;y++)m[f[y]]=y;this.logTable=m,this.zero=new cn(this,Int32Array.from([0])),this.one=new cn(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,o){if(i<0)throw new I;if(o===0)return this.zero;const l=new Int32Array(i+1);return l[0]=o,new cn(this,l)}inverse(i){if(i===0)throw new ui;return this.expTable[this.size-this.logTable[i]-1]}multiply(i,o){return i===0||o===0?0:this.expTable[(this.logTable[i]+this.logTable[o])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+Q.toHexString(this.primitive)+","+this.size+")"}equals(i){return i===this}}At.AZTEC_DATA_12=new At(4201,4096,1),At.AZTEC_DATA_10=new At(1033,1024,1),At.AZTEC_DATA_6=new At(67,64,1),At.AZTEC_PARAM=new At(19,16,1),At.QR_CODE_FIELD_256=new At(285,256,0),At.DATA_MATRIX_FIELD_256=new At(301,256,1),At.AZTEC_DATA_8=At.DATA_MATRIX_FIELD_256,At.MAXICODE_FIELD_64=At.AZTEC_DATA_6;class fr extends E{}fr.kind="ReedSolomonException";class ir extends E{}ir.kind="IllegalStateException";class Qr{constructor(i){this.field=i}decode(i,o){const l=this.field,f=new cn(l,i),d=new Int32Array(o);let m=!0;for(let G=0;G<o;G++){const te=f.evaluateAt(l.exp(G+l.getGeneratorBase()));d[d.length-1-G]=te,te!==0&&(m=!1)}if(m)return;const y=new cn(l,d),A=this.runEuclideanAlgorithm(l.buildMonomial(o,1),y,o),S=A[0],R=A[1],L=this.findErrorLocations(S),k=this.findErrorMagnitudes(R,L);for(let G=0;G<L.length;G++){const te=i.length-1-l.log(L[G]);if(te<0)throw new fr("Bad error location");i[te]=At.addOrSubtract(i[te],k[G])}}runEuclideanAlgorithm(i,o,l){if(i.getDegree()<o.getDegree()){const G=i;i=o,o=G}const f=this.field;let d=i,m=o,y=f.getZero(),A=f.getOne();for(;m.getDegree()>=(l/2|0);){let G=d,te=y;if(d=m,y=A,d.isZero())throw new fr("r_{i-1} was zero");m=G;let re=f.getZero();const ue=d.getCoefficient(d.getDegree()),ye=f.inverse(ue);for(;m.getDegree()>=d.getDegree()&&!m.isZero();){const ke=m.getDegree()-d.getDegree(),Pe=f.multiply(m.getCoefficient(m.getDegree()),ye);re=re.addOrSubtract(f.buildMonomial(ke,Pe)),m=m.addOrSubtract(d.multiplyByMonomial(ke,Pe))}if(A=re.multiply(y).addOrSubtract(te),m.getDegree()>=d.getDegree())throw new ir("Division algorithm failed to reduce polynomial?")}const S=A.getCoefficient(0);if(S===0)throw new fr("sigmaTilde(0) was zero");const R=f.inverse(S),L=A.multiplyScalar(R),k=m.multiplyScalar(R);return[L,k]}findErrorLocations(i){const o=i.getDegree();if(o===1)return Int32Array.from([i.getCoefficient(1)]);const l=new Int32Array(o);let f=0;const d=this.field;for(let m=1;m<d.getSize()&&f<o;m++)i.evaluateAt(m)===0&&(l[f]=d.inverse(m),f++);if(f!==o)throw new fr("Error locator degree does not match number of roots");return l}findErrorMagnitudes(i,o){const l=o.length,f=new Int32Array(l),d=this.field;for(let m=0;m<l;m++){const y=d.inverse(o[m]);let A=1;for(let S=0;S<l;S++)if(m!==S){const R=d.multiply(o[S],y),L=(R&1)===0?R|1:R&-2;A=d.multiply(A,L)}f[m]=d.multiply(i.evaluateAt(y),d.inverse(A)),d.getGeneratorBase()!==0&&(f[m]=d.multiply(f[m],y))}return f}}var wn;(function(P){P[P.UPPER=0]="UPPER",P[P.LOWER=1]="LOWER",P[P.MIXED=2]="MIXED",P[P.DIGIT=3]="DIGIT",P[P.PUNCT=4]="PUNCT",P[P.BINARY=5]="BINARY"})(wn||(wn={}));class qt{decode(i){this.ddata=i;let o=i.getBits(),l=this.extractBits(o),f=this.correctBits(l),d=qt.convertBoolArrayToByteArray(f),m=qt.getEncodedData(f),y=new tn(d,m,null,null);return y.setNumBits(f.length),y}static highLevelDecode(i){return this.getEncodedData(i)}static getEncodedData(i){let o=i.length,l=wn.UPPER,f=wn.UPPER,d="",m=0;for(;m<o;)if(f===wn.BINARY){if(o-m<5)break;let y=qt.readCode(i,m,5);if(m+=5,y===0){if(o-m<11)break;y=qt.readCode(i,m,11)+31,m+=11}for(let A=0;A<y;A++){if(o-m<8){m=o;break}const S=qt.readCode(i,m,8);d+=J.castAsNonUtf8Char(S),m+=8}f=l}else{let y=f===wn.DIGIT?4:5;if(o-m<y)break;let A=qt.readCode(i,m,y);m+=y;let S=qt.getCharacter(f,A);S.startsWith("CTRL_")?(l=f,f=qt.getTable(S.charAt(5)),S.charAt(6)==="L"&&(l=f)):(d+=S,f=l)}return d}static getTable(i){switch(i){case"L":return wn.LOWER;case"P":return wn.PUNCT;case"M":return wn.MIXED;case"D":return wn.DIGIT;case"B":return wn.BINARY;case"U":default:return wn.UPPER}}static getCharacter(i,o){switch(i){case wn.UPPER:return qt.UPPER_TABLE[o];case wn.LOWER:return qt.LOWER_TABLE[o];case wn.MIXED:return qt.MIXED_TABLE[o];case wn.PUNCT:return qt.PUNCT_TABLE[o];case wn.DIGIT:return qt.DIGIT_TABLE[o];default:throw new ir("Bad table")}}correctBits(i){let o,l;this.ddata.getNbLayers()<=2?(l=6,o=At.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,o=At.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,o=At.AZTEC_DATA_10):(l=12,o=At.AZTEC_DATA_12);let f=this.ddata.getNbDatablocks(),d=i.length/l;if(d<f)throw new j;let m=i.length%l,y=new Int32Array(d);for(let k=0;k<d;k++,m+=l)y[k]=qt.readCode(i,m,l);try{new Qr(o).decode(y,d-f)}catch(k){throw new j(k)}let A=(1<<l)-1,S=0;for(let k=0;k<f;k++){let G=y[k];if(G===0||G===A)throw new j;(G===1||G===A-1)&&S++}let R=new Array(f*l-S),L=0;for(let k=0;k<f;k++){let G=y[k];if(G===1||G===A-1)R.fill(G>1,L,L+l-1),L+=l-1;else for(let te=l-1;te>=0;--te)R[L++]=(G&1<<te)!==0}return R}extractBits(i){let o=this.ddata.isCompact(),l=this.ddata.getNbLayers(),f=(o?11:14)+l*4,d=new Int32Array(f),m=new Array(this.totalBitsInLayer(l,o));if(o)for(let y=0;y<d.length;y++)d[y]=y;else{let y=f+1+2*Q.truncDivision(Q.truncDivision(f,2)-1,15),A=f/2,S=Q.truncDivision(y,2);for(let R=0;R<A;R++){let L=R+Q.truncDivision(R,15);d[A-R-1]=S-L-1,d[A+R]=S+L+1}}for(let y=0,A=0;y<l;y++){let S=(l-y)*4+(o?9:12),R=y*2,L=f-1-R;for(let k=0;k<S;k++){let G=k*2;for(let te=0;te<2;te++)m[A+G+te]=i.get(d[R+te],d[R+k]),m[A+2*S+G+te]=i.get(d[R+k],d[L-te]),m[A+4*S+G+te]=i.get(d[L-te],d[L-k]),m[A+6*S+G+te]=i.get(d[L-k],d[R+te])}A+=S*8}return m}static readCode(i,o,l){let f=0;for(let d=o;d<o+l;d++)f<<=1,i[d]&&(f|=1);return f}static readByte(i,o){let l=i.length-o;return l>=8?qt.readCode(i,o,8):qt.readCode(i,o,l)<<8-l}static convertBoolArrayToByteArray(i){let o=new Uint8Array((i.length+7)/8);for(let l=0;l<o.length;l++)o[l]=qt.readByte(i,8*l);return o}totalBitsInLayer(i,o){return((o?88:112)+16*i)*i}}qt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],qt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],qt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],qt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],qt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Ze{constructor(){}static round(i){return i===NaN?0:i<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:i>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:i+(i<0?-.5:.5)|0}static distance(i,o,l,f){const d=i-l,m=o-f;return Math.sqrt(d*d+m*m)}static sum(i){let o=0;for(let l=0,f=i.length;l!==f;l++){const d=i[l];o+=d}return o}}class An{static floatToIntBits(i){return i}}An.MAX_VALUE=Number.MAX_SAFE_INTEGER;class He{constructor(i,o){this.x=i,this.y=o}getX(){return this.x}getY(){return this.y}equals(i){if(i instanceof He){const o=i;return this.x===o.x&&this.y===o.y}return!1}hashCode(){return 31*An.floatToIntBits(this.x)+An.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(i){const o=this.distance(i[0],i[1]),l=this.distance(i[1],i[2]),f=this.distance(i[0],i[2]);let d,m,y;if(l>=o&&l>=f?(m=i[0],d=i[1],y=i[2]):f>=l&&f>=o?(m=i[1],d=i[0],y=i[2]):(m=i[2],d=i[0],y=i[1]),this.crossProductZ(d,m,y)<0){const A=d;d=y,y=A}i[0]=d,i[1]=m,i[2]=y}static distance(i,o){return Ze.distance(i.x,i.y,o.x,o.y)}static crossProductZ(i,o,l){const f=o.x,d=o.y;return(l.x-f)*(i.y-d)-(l.y-d)*(i.x-f)}}class As{constructor(i,o){this.bits=i,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class is extends As{constructor(i,o,l,f,d){super(i,o),this.compact=l,this.nbDatablocks=f,this.nbLayers=d}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class mn{constructor(i,o,l,f){this.image=i,this.height=i.getHeight(),this.width=i.getWidth(),o==null&&(o=mn.INIT_SIZE),l==null&&(l=i.getWidth()/2|0),f==null&&(f=i.getHeight()/2|0);const d=o/2|0;if(this.leftInit=l-d,this.rightInit=l+d,this.upInit=f-d,this.downInit=f+d,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new fe}detect(){let i=this.leftInit,o=this.rightInit,l=this.upInit,f=this.downInit,d=!1,m=!0,y=!1,A=!1,S=!1,R=!1,L=!1;const k=this.width,G=this.height;for(;m;){m=!1;let te=!0;for(;(te||!A)&&o<k;)te=this.containsBlackPoint(l,f,o,!1),te?(o++,m=!0,A=!0):A||o++;if(o>=k){d=!0;break}let re=!0;for(;(re||!S)&&f<G;)re=this.containsBlackPoint(i,o,f,!0),re?(f++,m=!0,S=!0):S||f++;if(f>=G){d=!0;break}let ue=!0;for(;(ue||!R)&&i>=0;)ue=this.containsBlackPoint(l,f,i,!1),ue?(i--,m=!0,R=!0):R||i--;if(i<0){d=!0;break}let ye=!0;for(;(ye||!L)&&l>=0;)ye=this.containsBlackPoint(i,o,l,!0),ye?(l--,m=!0,L=!0):L||l--;if(l<0){d=!0;break}m&&(y=!0)}if(!d&&y){const te=o-i;let re=null;for(let Pe=1;re===null&&Pe<te;Pe++)re=this.getBlackPointOnSegment(i,f-Pe,i+Pe,f);if(re==null)throw new fe;let ue=null;for(let Pe=1;ue===null&&Pe<te;Pe++)ue=this.getBlackPointOnSegment(i,l+Pe,i+Pe,l);if(ue==null)throw new fe;let ye=null;for(let Pe=1;ye===null&&Pe<te;Pe++)ye=this.getBlackPointOnSegment(o,l+Pe,o-Pe,l);if(ye==null)throw new fe;let ke=null;for(let Pe=1;ke===null&&Pe<te;Pe++)ke=this.getBlackPointOnSegment(o,f-Pe,o-Pe,f);if(ke==null)throw new fe;return this.centerEdges(ke,re,ye,ue)}else throw new fe}getBlackPointOnSegment(i,o,l,f){const d=Ze.round(Ze.distance(i,o,l,f)),m=(l-i)/d,y=(f-o)/d,A=this.image;for(let S=0;S<d;S++){const R=Ze.round(i+S*m),L=Ze.round(o+S*y);if(A.get(R,L))return new He(R,L)}return null}centerEdges(i,o,l,f){const d=i.getX(),m=i.getY(),y=o.getX(),A=o.getY(),S=l.getX(),R=l.getY(),L=f.getX(),k=f.getY(),G=mn.CORR;return d<this.width/2?[new He(L-G,k+G),new He(y+G,A+G),new He(S-G,R-G),new He(d+G,m-G)]:[new He(L+G,k+G),new He(y+G,A-G),new He(S-G,R+G),new He(d-G,m-G)]}containsBlackPoint(i,o,l,f){const d=this.image;if(f){for(let m=i;m<=o;m++)if(d.get(m,l))return!0}else for(let m=i;m<=o;m++)if(d.get(l,m))return!0;return!1}}mn.INIT_SIZE=10,mn.CORR=1;class hi{static checkAndNudgePoints(i,o){const l=i.getWidth(),f=i.getHeight();let d=!0;for(let m=0;m<o.length&&d;m+=2){const y=Math.floor(o[m]),A=Math.floor(o[m+1]);if(y<-1||y>l||A<-1||A>f)throw new fe;d=!1,y===-1?(o[m]=0,d=!0):y===l&&(o[m]=l-1,d=!0),A===-1?(o[m+1]=0,d=!0):A===f&&(o[m+1]=f-1,d=!0)}d=!0;for(let m=o.length-2;m>=0&&d;m-=2){const y=Math.floor(o[m]),A=Math.floor(o[m+1]);if(y<-1||y>l||A<-1||A>f)throw new fe;d=!1,y===-1?(o[m]=0,d=!0):y===l&&(o[m]=l-1,d=!0),A===-1?(o[m+1]=0,d=!0):A===f&&(o[m+1]=f-1,d=!0)}}}class dr{constructor(i,o,l,f,d,m,y,A,S){this.a11=i,this.a21=o,this.a31=l,this.a12=f,this.a22=d,this.a32=m,this.a13=y,this.a23=A,this.a33=S}static quadrilateralToQuadrilateral(i,o,l,f,d,m,y,A,S,R,L,k,G,te,re,ue){const ye=dr.quadrilateralToSquare(i,o,l,f,d,m,y,A);return dr.squareToQuadrilateral(S,R,L,k,G,te,re,ue).times(ye)}transformPoints(i){const o=i.length,l=this.a11,f=this.a12,d=this.a13,m=this.a21,y=this.a22,A=this.a23,S=this.a31,R=this.a32,L=this.a33;for(let k=0;k<o;k+=2){const G=i[k],te=i[k+1],re=d*G+A*te+L;i[k]=(l*G+m*te+S)/re,i[k+1]=(f*G+y*te+R)/re}}transformPointsWithValues(i,o){const l=this.a11,f=this.a12,d=this.a13,m=this.a21,y=this.a22,A=this.a23,S=this.a31,R=this.a32,L=this.a33,k=i.length;for(let G=0;G<k;G++){const te=i[G],re=o[G],ue=d*te+A*re+L;i[G]=(l*te+m*re+S)/ue,o[G]=(f*te+y*re+R)/ue}}static squareToQuadrilateral(i,o,l,f,d,m,y,A){const S=i-l+d-y,R=o-f+m-A;if(S===0&&R===0)return new dr(l-i,d-l,i,f-o,m-f,o,0,0,1);{const L=l-d,k=y-d,G=f-m,te=A-m,re=L*te-k*G,ue=(S*te-k*R)/re,ye=(L*R-S*G)/re;return new dr(l-i+ue*l,y-i+ye*y,i,f-o+ue*f,A-o+ye*A,o,ue,ye,1)}}static quadrilateralToSquare(i,o,l,f,d,m,y,A){return dr.squareToQuadrilateral(i,o,l,f,d,m,y,A).buildAdjoint()}buildAdjoint(){return new dr(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(i){return new dr(this.a11*i.a11+this.a21*i.a12+this.a31*i.a13,this.a11*i.a21+this.a21*i.a22+this.a31*i.a23,this.a11*i.a31+this.a21*i.a32+this.a31*i.a33,this.a12*i.a11+this.a22*i.a12+this.a32*i.a13,this.a12*i.a21+this.a22*i.a22+this.a32*i.a23,this.a12*i.a31+this.a22*i.a32+this.a32*i.a33,this.a13*i.a11+this.a23*i.a12+this.a33*i.a13,this.a13*i.a21+this.a23*i.a22+this.a33*i.a23,this.a13*i.a31+this.a23*i.a32+this.a33*i.a33)}}class Zr extends hi{sampleGrid(i,o,l,f,d,m,y,A,S,R,L,k,G,te,re,ue,ye,ke,Pe){const Re=dr.quadrilateralToQuadrilateral(f,d,m,y,A,S,R,L,k,G,te,re,ue,ye,ke,Pe);return this.sampleGridWithTransform(i,o,l,Re)}sampleGridWithTransform(i,o,l,f){if(o<=0||l<=0)throw new fe;const d=new $e(o,l),m=new Float32Array(2*o);for(let y=0;y<l;y++){const A=m.length,S=y+.5;for(let R=0;R<A;R+=2)m[R]=R/2+.5,m[R+1]=S;f.transformPoints(m),hi.checkAndNudgePoints(i,m);try{for(let R=0;R<A;R+=2)i.get(Math.floor(m[R]),Math.floor(m[R+1]))&&d.set(R/2,y)}catch{throw new fe}}return d}}class sr{static setGridSampler(i){sr.gridSampler=i}static getInstance(){return sr.gridSampler}}sr.gridSampler=new Zr;class Qn{constructor(i,o){this.x=i,this.y=o}toResultPoint(){return new He(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Ps{constructor(i){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=i}detect(){return this.detectMirror(!1)}detectMirror(i){let o=this.getMatrixCenter(),l=this.getBullsEyeCorners(o);if(i){let m=l[0];l[0]=l[2],l[2]=m}this.extractParameters(l);let f=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),d=this.getMatrixCornerPoints(l);return new is(f,d,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(i){if(!this.isValidPoint(i[0])||!this.isValidPoint(i[1])||!this.isValidPoint(i[2])||!this.isValidPoint(i[3]))throw new fe;let o=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(i[0],i[1],o),this.sampleLine(i[1],i[2],o),this.sampleLine(i[2],i[3],o),this.sampleLine(i[3],i[0],o)]);this.shift=this.getRotation(l,o);let f=0;for(let m=0;m<4;m++){let y=l[(this.shift+m)%4];this.compact?(f<<=7,f+=y>>1&127):(f<<=10,f+=(y>>2&992)+(y>>1&31))}let d=this.getCorrectedParameterData(f,this.compact);this.compact?(this.nbLayers=(d>>6)+1,this.nbDataBlocks=(d&63)+1):(this.nbLayers=(d>>11)+1,this.nbDataBlocks=(d&2047)+1)}getRotation(i,o){let l=0;i.forEach((f,d,m)=>{let y=(f>>o-2<<1)+(f&1);l=(l<<3)+y}),l=((l&1)<<11)+(l>>1);for(let f=0;f<4;f++)if(Q.bitCount(l^this.EXPECTED_CORNER_BITS[f])<=2)return f;throw new fe}getCorrectedParameterData(i,o){let l,f;o?(l=7,f=2):(l=10,f=4);let d=l-f,m=new Int32Array(l);for(let A=l-1;A>=0;--A)m[A]=i&15,i>>=4;try{new Qr(At.AZTEC_PARAM).decode(m,d)}catch{throw new fe}let y=0;for(let A=0;A<f;A++)y=(y<<4)+m[A];return y}getBullsEyeCorners(i){let o=i,l=i,f=i,d=i,m=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let L=this.getFirstDifferent(o,m,1,-1),k=this.getFirstDifferent(l,m,1,1),G=this.getFirstDifferent(f,m,-1,1),te=this.getFirstDifferent(d,m,-1,-1);if(this.nbCenterLayers>2){let re=this.distancePoint(te,L)*this.nbCenterLayers/(this.distancePoint(d,o)*(this.nbCenterLayers+2));if(re<.75||re>1.25||!this.isWhiteOrBlackRectangle(L,k,G,te))break}o=L,l=k,f=G,d=te,m=!m}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new fe;this.compact=this.nbCenterLayers===5;let y=new He(o.getX()+.5,o.getY()-.5),A=new He(l.getX()+.5,l.getY()+.5),S=new He(f.getX()-.5,f.getY()+.5),R=new He(d.getX()-.5,d.getY()-.5);return this.expandSquare([y,A,S,R],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let i,o,l,f;try{let y=new mn(this.image).detect();i=y[0],o=y[1],l=y[2],f=y[3]}catch{let A=this.image.getWidth()/2,S=this.image.getHeight()/2;i=this.getFirstDifferent(new Qn(A+7,S-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new Qn(A+7,S+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Qn(A-7,S+7),!1,-1,1).toResultPoint(),f=this.getFirstDifferent(new Qn(A-7,S-7),!1,-1,-1).toResultPoint()}let d=Ze.round((i.getX()+f.getX()+o.getX()+l.getX())/4),m=Ze.round((i.getY()+f.getY()+o.getY()+l.getY())/4);try{let y=new mn(this.image,15,d,m).detect();i=y[0],o=y[1],l=y[2],f=y[3]}catch{i=this.getFirstDifferent(new Qn(d+7,m-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new Qn(d+7,m+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Qn(d-7,m+7),!1,-1,1).toResultPoint(),f=this.getFirstDifferent(new Qn(d-7,m-7),!1,-1,-1).toResultPoint()}return d=Ze.round((i.getX()+f.getX()+o.getX()+l.getX())/4),m=Ze.round((i.getY()+f.getY()+o.getY()+l.getY())/4),new Qn(d,m)}getMatrixCornerPoints(i){return this.expandSquare(i,2*this.nbCenterLayers,this.getDimension())}sampleGrid(i,o,l,f,d){let m=sr.getInstance(),y=this.getDimension(),A=y/2-this.nbCenterLayers,S=y/2+this.nbCenterLayers;return m.sampleGrid(i,y,y,A,A,S,A,S,S,A,S,o.getX(),o.getY(),l.getX(),l.getY(),f.getX(),f.getY(),d.getX(),d.getY())}sampleLine(i,o,l){let f=0,d=this.distanceResultPoint(i,o),m=d/l,y=i.getX(),A=i.getY(),S=m*(o.getX()-i.getX())/d,R=m*(o.getY()-i.getY())/d;for(let L=0;L<l;L++)this.image.get(Ze.round(y+L*S),Ze.round(A+L*R))&&(f|=1<<l-L-1);return f}isWhiteOrBlackRectangle(i,o,l,f){let d=3;i=new Qn(i.getX()-d,i.getY()+d),o=new Qn(o.getX()-d,o.getY()-d),l=new Qn(l.getX()+d,l.getY()-d),f=new Qn(f.getX()+d,f.getY()+d);let m=this.getColor(f,i);if(m===0)return!1;let y=this.getColor(i,o);return y!==m||(y=this.getColor(o,l),y!==m)?!1:(y=this.getColor(l,f),y===m)}getColor(i,o){let l=this.distancePoint(i,o),f=(o.getX()-i.getX())/l,d=(o.getY()-i.getY())/l,m=0,y=i.getX(),A=i.getY(),S=this.image.get(i.getX(),i.getY()),R=Math.ceil(l);for(let k=0;k<R;k++)y+=f,A+=d,this.image.get(Ze.round(y),Ze.round(A))!==S&&m++;let L=m/l;return L>.1&&L<.9?0:L<=.1===S?1:-1}getFirstDifferent(i,o,l,f){let d=i.getX()+l,m=i.getY()+f;for(;this.isValid(d,m)&&this.image.get(d,m)===o;)d+=l,m+=f;for(d-=l,m-=f;this.isValid(d,m)&&this.image.get(d,m)===o;)d+=l;for(d-=l;this.isValid(d,m)&&this.image.get(d,m)===o;)m+=f;return m-=f,new Qn(d,m)}expandSquare(i,o,l){let f=l/(2*o),d=i[0].getX()-i[2].getX(),m=i[0].getY()-i[2].getY(),y=(i[0].getX()+i[2].getX())/2,A=(i[0].getY()+i[2].getY())/2,S=new He(y+f*d,A+f*m),R=new He(y-f*d,A-f*m);d=i[1].getX()-i[3].getX(),m=i[1].getY()-i[3].getY(),y=(i[1].getX()+i[3].getX())/2,A=(i[1].getY()+i[3].getY())/2;let L=new He(y+f*d,A+f*m),k=new He(y-f*d,A-f*m);return[S,L,R,k]}isValid(i,o){return i>=0&&i<this.image.getWidth()&&o>0&&o<this.image.getHeight()}isValidPoint(i){let o=Ze.round(i.getX()),l=Ze.round(i.getY());return this.isValid(o,l)}distancePoint(i,o){return Ze.distance(i.getX(),i.getY(),o.getX(),o.getY())}distanceResultPoint(i,o){return Ze.distance(i.getX(),i.getY(),o.getX(),o.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Q.truncDivision(this.nbLayers-4,8)+1)+15}}class ss{decode(i,o=null){let l=null,f=new Ps(i.getBlackMatrix()),d=null,m=null;try{let R=f.detectMirror(!1);d=R.getPoints(),this.reportFoundResultPoints(o,d),m=new qt().decode(R)}catch(R){l=R}if(m==null)try{let R=f.detectMirror(!0);d=R.getPoints(),this.reportFoundResultPoints(o,d),m=new qt().decode(R)}catch(R){throw l??R}let y=new je(m.getText(),m.getRawBytes(),m.getNumBits(),d,Le.AZTEC,$.currentTimeMillis()),A=m.getByteSegments();A!=null&&y.putMetadata(vt.BYTE_SEGMENTS,A);let S=m.getECLevel();return S!=null&&y.putMetadata(vt.ERROR_CORRECTION_LEVEL,S),y}reportFoundResultPoints(i,o){if(i!=null){let l=i.get(Oe.NEED_RESULT_POINT_CALLBACK);l!=null&&o.forEach((f,d,m)=>{l.foundPossibleResultPoint(f)})}}reset(){}}class ra extends Ve{constructor(i=500){super(new ss,i)}}class Yt{decode(i,o){try{return this.doDecode(i,o)}catch{if(o&&o.get(Oe.TRY_HARDER)===!0&&i.isRotateSupported()){const d=i.rotateCounterClockwise(),m=this.doDecode(d,o),y=m.getResultMetadata();let A=270;y!==null&&y.get(vt.ORIENTATION)===!0&&(A=A+y.get(vt.ORIENTATION)%360),m.putMetadata(vt.ORIENTATION,A);const S=m.getResultPoints();if(S!==null){const R=d.getHeight();for(let L=0;L<S.length;L++)S[L]=new He(R-S[L].getY()-1,S[L].getX())}return m}else throw new fe}}reset(){}doDecode(i,o){const l=i.getWidth(),f=i.getHeight();let d=new le(l);const m=o&&o.get(Oe.TRY_HARDER)===!0,y=Math.max(1,f>>(m?8:5));let A;m?A=f:A=15;const S=Math.trunc(f/2);for(let R=0;R<A;R++){const L=Math.trunc((R+1)/2),k=(R&1)===0,G=S+y*(k?L:-L);if(G<0||G>=f)break;try{d=i.getBlackRow(G,d)}catch{continue}for(let te=0;te<2;te++){if(te===1&&(d.reverse(),o&&o.get(Oe.NEED_RESULT_POINT_CALLBACK)===!0)){const re=new Map;o.forEach((ue,ye)=>re.set(ye,ue)),re.delete(Oe.NEED_RESULT_POINT_CALLBACK),o=re}try{const re=this.decodeRow(G,d,o);if(te===1){re.putMetadata(vt.ORIENTATION,180);const ue=re.getResultPoints();ue!==null&&(ue[0]=new He(l-ue[0].getX()-1,ue[0].getY()),ue[1]=new He(l-ue[1].getX()-1,ue[1].getY()))}return re}catch{}}}throw new fe}static recordPattern(i,o,l){const f=l.length;for(let S=0;S<f;S++)l[S]=0;const d=i.getSize();if(o>=d)throw new fe;let m=!i.get(o),y=0,A=o;for(;A<d;){if(i.get(A)!==m)l[y]++;else{if(++y===f)break;l[y]=1,m=!m}A++}if(!(y===f||y===f-1&&A===d))throw new fe}static recordPatternInReverse(i,o,l){let f=l.length,d=i.get(o);for(;o>0&&f>=0;)i.get(--o)!==d&&(f--,d=!d);if(f>=0)throw new fe;Yt.recordPattern(i,o+1,l)}static patternMatchVariance(i,o,l){const f=i.length;let d=0,m=0;for(let S=0;S<f;S++)d+=i[S],m+=o[S];if(d<m)return Number.POSITIVE_INFINITY;const y=d/m;l*=y;let A=0;for(let S=0;S<f;S++){const R=i[S],L=o[S]*y,k=R>L?R-L:L-R;if(k>l)return Number.POSITIVE_INFINITY;A+=k}return A/d}}class Me extends Yt{static findStartPattern(i){const o=i.getSize(),l=i.getNextSet(0);let f=0,d=Int32Array.from([0,0,0,0,0,0]),m=l,y=!1;const A=6;for(let S=l;S<o;S++)if(i.get(S)!==y)d[f]++;else{if(f===A-1){let R=Me.MAX_AVG_VARIANCE,L=-1;for(let k=Me.CODE_START_A;k<=Me.CODE_START_C;k++){const G=Yt.patternMatchVariance(d,Me.CODE_PATTERNS[k],Me.MAX_INDIVIDUAL_VARIANCE);G<R&&(R=G,L=k)}if(L>=0&&i.isRange(Math.max(0,m-(S-m)/2),m,!1))return Int32Array.from([m,S,L]);m+=d[0]+d[1],d=d.slice(2,d.length-1),d[f-1]=0,d[f]=0,f--}else f++;d[f]=1,y=!y}throw new fe}static decodeCode(i,o,l){Yt.recordPattern(i,l,o);let f=Me.MAX_AVG_VARIANCE,d=-1;for(let m=0;m<Me.CODE_PATTERNS.length;m++){const y=Me.CODE_PATTERNS[m],A=this.patternMatchVariance(o,y,Me.MAX_INDIVIDUAL_VARIANCE);A<f&&(f=A,d=m)}if(d>=0)return d;throw new fe}decodeRow(i,o,l){const f=l&&l.get(Oe.ASSUME_GS1)===!0,d=Me.findStartPattern(o),m=d[2];let y=0;const A=new Uint8Array(20);A[y++]=m;let S;switch(m){case Me.CODE_START_A:S=Me.CODE_CODE_A;break;case Me.CODE_START_B:S=Me.CODE_CODE_B;break;case Me.CODE_START_C:S=Me.CODE_CODE_C;break;default:throw new j}let R=!1,L=!1,k="",G=d[0],te=d[1];const re=Int32Array.from([0,0,0,0,0,0]);let ue=0,ye=0,ke=m,Pe=0,Re=!0,Rt=!1,pt=!1;for(;!R;){const ya=L;switch(L=!1,ue=ye,ye=Me.decodeCode(o,re,te),A[y++]=ye,ye!==Me.CODE_STOP&&(Re=!0),ye!==Me.CODE_STOP&&(Pe++,ke+=Pe*ye),G=te,te+=re.reduce((Th,Yc)=>Th+Yc,0),ye){case Me.CODE_START_A:case Me.CODE_START_B:case Me.CODE_START_C:throw new j}switch(S){case Me.CODE_CODE_A:if(ye<64)pt===Rt?k+=String.fromCharCode(32+ye):k+=String.fromCharCode(32+ye+128),pt=!1;else if(ye<96)pt===Rt?k+=String.fromCharCode(ye-64):k+=String.fromCharCode(ye+64),pt=!1;else switch(ye!==Me.CODE_STOP&&(Re=!1),ye){case Me.CODE_FNC_1:f&&(k.length===0?k+="]C1":k+="");break;case Me.CODE_FNC_2:case Me.CODE_FNC_3:break;case Me.CODE_FNC_4_A:!Rt&&pt?(Rt=!0,pt=!1):Rt&&pt?(Rt=!1,pt=!1):pt=!0;break;case Me.CODE_SHIFT:L=!0,S=Me.CODE_CODE_B;break;case Me.CODE_CODE_B:S=Me.CODE_CODE_B;break;case Me.CODE_CODE_C:S=Me.CODE_CODE_C;break;case Me.CODE_STOP:R=!0;break}break;case Me.CODE_CODE_B:if(ye<96)pt===Rt?k+=String.fromCharCode(32+ye):k+=String.fromCharCode(32+ye+128),pt=!1;else switch(ye!==Me.CODE_STOP&&(Re=!1),ye){case Me.CODE_FNC_1:f&&(k.length===0?k+="]C1":k+="");break;case Me.CODE_FNC_2:case Me.CODE_FNC_3:break;case Me.CODE_FNC_4_B:!Rt&&pt?(Rt=!0,pt=!1):Rt&&pt?(Rt=!1,pt=!1):pt=!0;break;case Me.CODE_SHIFT:L=!0,S=Me.CODE_CODE_A;break;case Me.CODE_CODE_A:S=Me.CODE_CODE_A;break;case Me.CODE_CODE_C:S=Me.CODE_CODE_C;break;case Me.CODE_STOP:R=!0;break}break;case Me.CODE_CODE_C:if(ye<100)ye<10&&(k+="0"),k+=ye;else switch(ye!==Me.CODE_STOP&&(Re=!1),ye){case Me.CODE_FNC_1:f&&(k.length===0?k+="]C1":k+="");break;case Me.CODE_CODE_A:S=Me.CODE_CODE_A;break;case Me.CODE_CODE_B:S=Me.CODE_CODE_B;break;case Me.CODE_STOP:R=!0;break}break}ya&&(S=S===Me.CODE_CODE_A?Me.CODE_CODE_B:Me.CODE_CODE_A)}const Jn=te-G;if(te=o.getNextUnset(te),!o.isRange(te,Math.min(o.getSize(),te+(te-G)/2),!1))throw new fe;if(ke-=Pe*ue,ke%103!==ue)throw new B;const Ni=k.length;if(Ni===0)throw new fe;Ni>0&&Re&&(S===Me.CODE_CODE_C?k=k.substring(0,Ni-2):k=k.substring(0,Ni-1));const Fr=(d[1]+d[0])/2,fn=G+Jn/2,Ir=A.length,Ei=new Uint8Array(Ir);for(let ya=0;ya<Ir;ya++)Ei[ya]=A[ya];const to=[new He(Fr,i),new He(fn,i)];return new je(k,Ei,0,to,Le.CODE_128,new Date().getTime())}}Me.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Me.MAX_AVG_VARIANCE=.25,Me.MAX_INDIVIDUAL_VARIANCE=.7,Me.CODE_SHIFT=98,Me.CODE_CODE_C=99,Me.CODE_CODE_B=100,Me.CODE_CODE_A=101,Me.CODE_FNC_1=102,Me.CODE_FNC_2=97,Me.CODE_FNC_3=96,Me.CODE_FNC_4_A=101,Me.CODE_FNC_4_B=100,Me.CODE_START_A=103,Me.CODE_START_B=104,Me.CODE_START_C=105,Me.CODE_STOP=106;class Xt extends Yt{constructor(i=!1,o=!1){super(),this.usingCheckDigit=i,this.extendedMode=o,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(i,o,l){let f=this.counters;f.fill(0),this.decodeRowResult="";let d=Xt.findAsteriskPattern(o,f),m=o.getNextSet(d[1]),y=o.getSize(),A,S;do{Xt.recordPattern(o,m,f);let re=Xt.toNarrowWidePattern(f);if(re<0)throw new fe;A=Xt.patternToChar(re),this.decodeRowResult+=A,S=m;for(let ue of f)m+=ue;m=o.getNextSet(m)}while(A!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let R=0;for(let re of f)R+=re;let L=m-S-R;if(m!==y&&L*2<R)throw new fe;if(this.usingCheckDigit){let re=this.decodeRowResult.length-1,ue=0;for(let ye=0;ye<re;ye++)ue+=Xt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ye));if(this.decodeRowResult.charAt(re)!==Xt.ALPHABET_STRING.charAt(ue%43))throw new B;this.decodeRowResult=this.decodeRowResult.substring(0,re)}if(this.decodeRowResult.length===0)throw new fe;let k;this.extendedMode?k=Xt.decodeExtended(this.decodeRowResult):k=this.decodeRowResult;let G=(d[1]+d[0])/2,te=S+R/2;return new je(k,null,0,[new He(G,i),new He(te,i)],Le.CODE_39,new Date().getTime())}static findAsteriskPattern(i,o){let l=i.getSize(),f=i.getNextSet(0),d=0,m=f,y=!1,A=o.length;for(let S=f;S<l;S++)if(i.get(S)!==y)o[d]++;else{if(d===A-1){if(this.toNarrowWidePattern(o)===Xt.ASTERISK_ENCODING&&i.isRange(Math.max(0,m-Math.floor((S-m)/2)),m,!1))return[m,S];m+=o[0]+o[1],o.copyWithin(0,2,2+d-1),o[d-1]=0,o[d]=0,d--}else d++;o[d]=1,y=!y}throw new fe}static toNarrowWidePattern(i){let o=i.length,l=0,f;do{let d=2147483647;for(let A of i)A<d&&A>l&&(d=A);l=d,f=0;let m=0,y=0;for(let A=0;A<o;A++){let S=i[A];S>l&&(y|=1<<o-1-A,f++,m+=S)}if(f===3){for(let A=0;A<o&&f>0;A++){let S=i[A];if(S>l&&(f--,S*2>=m))return-1}return y}}while(f>3);return-1}static patternToChar(i){for(let o=0;o<Xt.CHARACTER_ENCODINGS.length;o++)if(Xt.CHARACTER_ENCODINGS[o]===i)return Xt.ALPHABET_STRING.charAt(o);if(i===Xt.ASTERISK_ENCODING)return"*";throw new fe}static decodeExtended(i){let o=i.length,l="";for(let f=0;f<o;f++){let d=i.charAt(f);if(d==="+"||d==="$"||d==="%"||d==="/"){let m=i.charAt(f+1),y="\0";switch(d){case"+":if(m>="A"&&m<="Z")y=String.fromCharCode(m.charCodeAt(0)+32);else throw new j;break;case"$":if(m>="A"&&m<="Z")y=String.fromCharCode(m.charCodeAt(0)-64);else throw new j;break;case"%":if(m>="A"&&m<="E")y=String.fromCharCode(m.charCodeAt(0)-38);else if(m>="F"&&m<="J")y=String.fromCharCode(m.charCodeAt(0)-11);else if(m>="K"&&m<="O")y=String.fromCharCode(m.charCodeAt(0)+16);else if(m>="P"&&m<="T")y=String.fromCharCode(m.charCodeAt(0)+43);else if(m==="U")y="\0";else if(m==="V")y="@";else if(m==="W")y="`";else if(m==="X"||m==="Y"||m==="Z")y="";else throw new j;break;case"/":if(m>="A"&&m<="O")y=String.fromCharCode(m.charCodeAt(0)-32);else if(m==="Z")y=":";else throw new j;break}l+=y,f++}else l+=d}return l}}Xt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Xt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Xt.ASTERISK_ENCODING=148;class at extends Yt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(i,o,l){let f=this.decodeStart(o),d=this.decodeEnd(o),m=new K;at.decodeMiddle(o,f[1],d[0],m);let y=m.toString(),A=null;l!=null&&(A=l.get(Oe.ALLOWED_LENGTHS)),A==null&&(A=at.DEFAULT_ALLOWED_LENGTHS);let S=y.length,R=!1,L=0;for(let te of A){if(S===te){R=!0;break}te>L&&(L=te)}if(!R&&S>L&&(R=!0),!R)throw new j;const k=[new He(f[1],i),new He(d[0],i)];return new je(y,null,0,k,Le.ITF,new Date().getTime())}static decodeMiddle(i,o,l,f){let d=new Int32Array(10),m=new Int32Array(5),y=new Int32Array(5);for(d.fill(0),m.fill(0),y.fill(0);o<l;){Yt.recordPattern(i,o,d);for(let S=0;S<5;S++){let R=2*S;m[S]=d[R],y[S]=d[R+1]}let A=at.decodeDigit(m);f.append(A.toString()),A=this.decodeDigit(y),f.append(A.toString()),d.forEach(function(S){o+=S})}}decodeStart(i){let o=at.skipWhiteSpace(i),l=at.findGuardPattern(i,o,at.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(i,l[0]),l}validateQuietZone(i,o){let l=this.narrowLineWidth*10;l=l<o?l:o;for(let f=o-1;l>0&&f>=0&&!i.get(f);f--)l--;if(l!==0)throw new fe}static skipWhiteSpace(i){const o=i.getSize(),l=i.getNextSet(0);if(l===o)throw new fe;return l}decodeEnd(i){i.reverse();try{let o=at.skipWhiteSpace(i),l;try{l=at.findGuardPattern(i,o,at.END_PATTERN_REVERSED[0])}catch(d){d instanceof fe&&(l=at.findGuardPattern(i,o,at.END_PATTERN_REVERSED[1]))}this.validateQuietZone(i,l[0]);let f=l[0];return l[0]=i.getSize()-l[1],l[1]=i.getSize()-f,l}finally{i.reverse()}}static findGuardPattern(i,o,l){let f=l.length,d=new Int32Array(f),m=i.getSize(),y=!1,A=0,S=o;d.fill(0);for(let R=o;R<m;R++)if(i.get(R)!==y)d[A]++;else{if(A===f-1){if(Yt.patternMatchVariance(d,l,at.MAX_INDIVIDUAL_VARIANCE)<at.MAX_AVG_VARIANCE)return[S,R];S+=d[0]+d[1],$.arraycopy(d,2,d,0,A-1),d[A-1]=0,d[A]=0,A--}else A++;d[A]=1,y=!y}throw new fe}static decodeDigit(i){let o=at.MAX_AVG_VARIANCE,l=-1,f=at.PATTERNS.length;for(let d=0;d<f;d++){let m=at.PATTERNS[d],y=Yt.patternMatchVariance(i,m,at.MAX_INDIVIDUAL_VARIANCE);y<o?(o=y,l=d):y===o&&(l=-1)}if(l>=0)return l%10;throw new fe}}at.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],at.MAX_AVG_VARIANCE=.38,at.MAX_INDIVIDUAL_VARIANCE=.5,at.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],at.START_PATTERN=Int32Array.from([1,1,1,1]),at.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class an extends Yt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(i){let o=!1,l,f=0,d=Int32Array.from([0,0,0]);for(;!o;){d=Int32Array.from([0,0,0]),l=an.findGuardPattern(i,f,!1,this.START_END_PATTERN,d);let m=l[0];f=l[1];let y=m-(f-m);y>=0&&(o=i.isRange(y,m,!1))}return l}static checkChecksum(i){return an.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let o=i.length;if(o===0)return!1;let l=parseInt(i.charAt(o-1),10);return an.getStandardUPCEANChecksum(i.substring(0,o-1))===l}static getStandardUPCEANChecksum(i){let o=i.length,l=0;for(let f=o-1;f>=0;f-=2){let d=i.charAt(f).charCodeAt(0)-48;if(d<0||d>9)throw new j;l+=d}l*=3;for(let f=o-2;f>=0;f-=2){let d=i.charAt(f).charCodeAt(0)-48;if(d<0||d>9)throw new j;l+=d}return(1e3-l)%10}static decodeEnd(i,o){return an.findGuardPattern(i,o,!1,an.START_END_PATTERN,new Int32Array(an.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(i,o,l,f){return this.findGuardPattern(i,o,l,f,new Int32Array(f.length))}static findGuardPattern(i,o,l,f,d){let m=i.getSize();o=l?i.getNextUnset(o):i.getNextSet(o);let y=0,A=o,S=f.length,R=l;for(let L=o;L<m;L++)if(i.get(L)!==R)d[y]++;else{if(y===S-1){if(Yt.patternMatchVariance(d,f,an.MAX_INDIVIDUAL_VARIANCE)<an.MAX_AVG_VARIANCE)return Int32Array.from([A,L]);A+=d[0]+d[1];let k=d.slice(2,d.length-1);for(let G=0;G<y-1;G++)d[G]=k[G];d[y-1]=0,d[y]=0,y--}else y++;d[y]=1,R=!R}throw new fe}static decodeDigit(i,o,l,f){this.recordPattern(i,l,o);let d=this.MAX_AVG_VARIANCE,m=-1,y=f.length;for(let A=0;A<y;A++){let S=f[A],R=Yt.patternMatchVariance(o,S,an.MAX_INDIVIDUAL_VARIANCE);R<d&&(d=R,m=A)}if(m>=0)return m;throw new fe}}an.MAX_AVG_VARIANCE=.48,an.MAX_INDIVIDUAL_VARIANCE=.7,an.START_END_PATTERN=Int32Array.from([1,1,1]),an.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),an.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),an.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class fi{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,o,l){let f=this.decodeRowStringBuffer,d=this.decodeMiddle(o,l,f),m=f.toString(),y=fi.parseExtensionString(m),A=[new He((l[0]+l[1])/2,i),new He(d,i)],S=new je(m,null,0,A,Le.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&S.putAllMetadata(y),S}decodeMiddle(i,o,l){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=i.getSize(),m=o[1],y=0;for(let S=0;S<5&&m<d;S++){let R=an.decodeDigit(i,f,m,an.L_AND_G_PATTERNS);l+=String.fromCharCode(48+R%10);for(let L of f)m+=L;R>=10&&(y|=1<<4-S),S!==4&&(m=i.getNextSet(m),m=i.getNextUnset(m))}if(l.length!==5)throw new fe;let A=this.determineCheckDigit(y);if(fi.extensionChecksum(l.toString())!==A)throw new fe;return m}static extensionChecksum(i){let o=i.length,l=0;for(let f=o-2;f>=0;f-=2)l+=i.charAt(f).charCodeAt(0)-48;l*=3;for(let f=o-1;f>=0;f-=2)l+=i.charAt(f).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(i){for(let o=0;o<10;o++)if(i===this.CHECK_DIGIT_ENCODINGS[o])return o;throw new fe}static parseExtensionString(i){if(i.length!==5)return null;let o=fi.parseExtension5String(i);return o==null?null:new Map([[vt.SUGGESTED_PRICE,o]])}static parseExtension5String(i){let o;switch(i.charAt(0)){case"0":o="";break;case"5":o="$";break;case"9":switch(i){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}o="";break;default:o="";break}let l=parseInt(i.substring(1)),f=(l/100).toString(),d=l%100,m=d<10?"0"+d:d.toString();return o+f+"."+m}}class bs{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,o,l){let f=this.decodeRowStringBuffer,d=this.decodeMiddle(o,l,f),m=f.toString(),y=bs.parseExtensionString(m),A=[new He((l[0]+l[1])/2,i),new He(d,i)],S=new je(m,null,0,A,Le.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&S.putAllMetadata(y),S}decodeMiddle(i,o,l){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=i.getSize(),m=o[1],y=0;for(let A=0;A<2&&m<d;A++){let S=an.decodeDigit(i,f,m,an.L_AND_G_PATTERNS);l+=String.fromCharCode(48+S%10);for(let R of f)m+=R;S>=10&&(y|=1<<1-A),A!==1&&(m=i.getNextSet(m),m=i.getNextUnset(m))}if(l.length!==2)throw new fe;if(parseInt(l.toString())%4!==y)throw new fe;return m}static parseExtensionString(i){return i.length!==2?null:new Map([[vt.ISSUE_NUMBER,parseInt(i)]])}}class Jr{static decodeRow(i,o,l){let f=an.findGuardPattern(o,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new fi().decodeRow(i,o,f)}catch{return new bs().decodeRow(i,o,f)}}}Jr.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class bt extends an{constructor(){super(),this.decodeRowStringBuffer="",bt.L_AND_G_PATTERNS=bt.L_PATTERNS.map(i=>Int32Array.from(i));for(let i=10;i<20;i++){let o=bt.L_PATTERNS[i-10],l=new Int32Array(o.length);for(let f=0;f<o.length;f++)l[f]=o[o.length-f-1];bt.L_AND_G_PATTERNS[i]=l}}decodeRow(i,o,l){let f=bt.findStartGuardPattern(o),d=l==null?null:l.get(Oe.NEED_RESULT_POINT_CALLBACK);if(d!=null){const Re=new He((f[0]+f[1])/2,i);d.foundPossibleResultPoint(Re)}let m=this.decodeMiddle(o,f,this.decodeRowStringBuffer),y=m.rowOffset,A=m.resultString;if(d!=null){const Re=new He(y,i);d.foundPossibleResultPoint(Re)}let S=this.decodeEnd(o,y);if(d!=null){const Re=new He((S[0]+S[1])/2,i);d.foundPossibleResultPoint(Re)}let R=S[1],L=R+(R-S[0]);if(L>=o.getSize()||!o.isRange(R,L,!1))throw new fe;let k=A.toString();if(k.length<8)throw new j;if(!bt.checkChecksum(k))throw new B;let G=(f[1]+f[0])/2,te=(S[1]+S[0])/2,re=this.getBarcodeFormat(),ue=[new He(G,i),new He(te,i)],ye=new je(k,null,0,ue,re,new Date().getTime()),ke=0;try{let Re=Jr.decodeRow(i,o,S[1]);ye.putMetadata(vt.UPC_EAN_EXTENSION,Re.getText()),ye.putAllMetadata(Re.getResultMetadata()),ye.addResultPoints(Re.getResultPoints()),ke=Re.getText().length}catch{}let Pe=l==null?null:l.get(Oe.ALLOWED_EAN_EXTENSIONS);if(Pe!=null){let Re=!1;for(let Rt in Pe)if(ke.toString()===Rt){Re=!0;break}if(!Re)throw new fe}return ye}decodeEnd(i,o){return bt.findGuardPattern(i,o,!1,bt.START_END_PATTERN,new Int32Array(bt.START_END_PATTERN.length).fill(0))}static checkChecksum(i){return bt.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let o=i.length;if(o===0)return!1;let l=parseInt(i.charAt(o-1),10);return bt.getStandardUPCEANChecksum(i.substring(0,o-1))===l}static getStandardUPCEANChecksum(i){let o=i.length,l=0;for(let f=o-1;f>=0;f-=2){let d=i.charAt(f).charCodeAt(0)-48;if(d<0||d>9)throw new j;l+=d}l*=3;for(let f=o-2;f>=0;f-=2){let d=i.charAt(f).charCodeAt(0)-48;if(d<0||d>9)throw new j;l+=d}return(1e3-l)%10}}class on extends bt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,o,l){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=i.getSize(),m=o[1],y=0;for(let S=0;S<6&&m<d;S++){let R=bt.decodeDigit(i,f,m,bt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+R%10);for(let L of f)m+=L;R>=10&&(y|=1<<5-S)}l=on.determineFirstDigit(l,y),m=bt.findGuardPattern(i,m,!0,bt.MIDDLE_PATTERN,new Int32Array(bt.MIDDLE_PATTERN.length).fill(0))[1];for(let S=0;S<6&&m<d;S++){let R=bt.decodeDigit(i,f,m,bt.L_PATTERNS);l+=String.fromCharCode(48+R);for(let L of f)m+=L}return{rowOffset:m,resultString:l}}getBarcodeFormat(){return Le.EAN_13}static determineFirstDigit(i,o){for(let l=0;l<10;l++)if(o===this.FIRST_DIGIT_ENCODINGS[l])return i=String.fromCharCode(48+l)+i,i;throw new fe}}on.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class $r extends bt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,o,l){const f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=i.getSize(),m=o[1];for(let A=0;A<4&&m<d;A++){let S=bt.decodeDigit(i,f,m,bt.L_PATTERNS);l+=String.fromCharCode(48+S);for(let R of f)m+=R}m=bt.findGuardPattern(i,m,!0,bt.MIDDLE_PATTERN,new Int32Array(bt.MIDDLE_PATTERN.length).fill(0))[1];for(let A=0;A<4&&m<d;A++){let S=bt.decodeDigit(i,f,m,bt.L_PATTERNS);l+=String.fromCharCode(48+S);for(let R of f)m+=R}return{rowOffset:m,resultString:l}}getBarcodeFormat(){return Le.EAN_8}}class ei extends bt{constructor(){super(...arguments),this.ean13Reader=new on}getBarcodeFormat(){return Le.UPC_A}decode(i,o){return this.maybeReturnResult(this.ean13Reader.decode(i))}decodeRow(i,o,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(i,o,l))}decodeMiddle(i,o,l){return this.ean13Reader.decodeMiddle(i,o,l)}maybeReturnResult(i){let o=i.getText();if(o.charAt(0)==="0"){let l=new je(o.substring(1),null,null,i.getResultPoints(),Le.UPC_A);return i.getResultMetadata()!=null&&l.putAllMetadata(i.getResultMetadata()),l}else throw new fe}reset(){this.ean13Reader.reset()}}class In extends bt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(i,o,l){const f=this.decodeMiddleCounters.map(S=>S);f[0]=0,f[1]=0,f[2]=0,f[3]=0;const d=i.getSize();let m=o[1],y=0;for(let S=0;S<6&&m<d;S++){const R=In.decodeDigit(i,f,m,In.L_AND_G_PATTERNS);l+=String.fromCharCode(48+R%10);for(let L of f)m+=L;R>=10&&(y|=1<<5-S)}let A=In.determineNumSysAndCheckDigit(l,y);return{rowOffset:m,resultString:A}}decodeEnd(i,o){return In.findGuardPatternWithoutCounters(i,o,!0,In.MIDDLE_END_PATTERN)}checkChecksum(i){return bt.checkChecksum(In.convertUPCEtoUPCA(i))}static determineNumSysAndCheckDigit(i,o){for(let l=0;l<=1;l++)for(let f=0;f<10;f++)if(o===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][f]){let d=String.fromCharCode(48+l),m=String.fromCharCode(48+f);return d+i+m}throw fe.getNotFoundInstance()}getBarcodeFormat(){return Le.UPC_E}static convertUPCEtoUPCA(i){const o=i.slice(1,7).split("").map(d=>d.charCodeAt(0)),l=new K;l.append(i.charAt(0));let f=o[5];switch(f){case 0:case 1:case 2:l.appendChars(o,0,2),l.append(f),l.append("0000"),l.appendChars(o,2,3);break;case 3:l.appendChars(o,0,3),l.append("00000"),l.appendChars(o,3,2);break;case 4:l.appendChars(o,0,4),l.append("00000"),l.append(o[4]);break;default:l.appendChars(o,0,5),l.append("0000"),l.append(f);break}return i.length>=8&&l.append(i.charAt(7)),l.toString()}}In.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),In.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Ls extends Yt{constructor(i){super();let o=i==null?null:i.get(Oe.POSSIBLE_FORMATS),l=[];s(o)?(l.push(new on),l.push(new ei),l.push(new $r),l.push(new In)):(o.indexOf(Le.EAN_13)>-1&&l.push(new on),o.indexOf(Le.UPC_A)>-1&&l.push(new ei),o.indexOf(Le.EAN_8)>-1&&l.push(new $r),o.indexOf(Le.UPC_E)>-1&&l.push(new In)),this.readers=l}decodeRow(i,o,l){for(let f of this.readers)try{const d=f.decodeRow(i,o,l),m=d.getBarcodeFormat()===Le.EAN_13&&d.getText().charAt(0)==="0",y=l==null?null:l.get(Oe.POSSIBLE_FORMATS),A=y==null||y.includes(Le.UPC_A);if(m&&A){const S=d.getRawBytes(),R=new je(d.getText().substring(1),S,S?S.length:null,d.getResultPoints(),Le.UPC_A);return R.putAllMetadata(d.getResultMetadata()),R}return d}catch{}throw new fe}reset(){for(let i of this.readers)i.reset()}}class Ln extends Yt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(i,o){for(let l=0;l<o.length;l++)if(Yt.patternMatchVariance(i,o[l],Ln.MAX_INDIVIDUAL_VARIANCE)<Ln.MAX_AVG_VARIANCE)return l;throw new fe}static count(i){return Ze.sum(new Int32Array(i))}static increment(i,o){let l=0,f=o[0];for(let d=1;d<i.length;d++)o[d]>f&&(f=o[d],l=d);i[l]++}static decrement(i,o){let l=0,f=o[0];for(let d=1;d<i.length;d++)o[d]<f&&(f=o[d],l=d);i[l]--}static isFinderPattern(i){let o=i[0]+i[1],l=o+i[2]+i[3],f=o/l;if(f>=Ln.MIN_FINDER_PATTERN_RATIO&&f<=Ln.MAX_FINDER_PATTERN_RATIO){let d=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;for(let y of i)y>m&&(m=y),y<d&&(d=y);return m<10*d}return!1}}Ln.MAX_AVG_VARIANCE=.2,Ln.MAX_INDIVIDUAL_VARIANCE=.45,Ln.MIN_FINDER_PATTERN_RATIO=9.5/12,Ln.MAX_FINDER_PATTERN_RATIO=12.5/14;class gr{constructor(i,o){this.value=i,this.checksumPortion=o}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(i){if(!(i instanceof gr))return!1;const o=i;return this.value===o.value&&this.checksumPortion===o.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class di{constructor(i,o,l,f,d){this.value=i,this.startEnd=o,this.value=i,this.startEnd=o,this.resultPoints=new Array,this.resultPoints.push(new He(l,d)),this.resultPoints.push(new He(f,d))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(i){if(!(i instanceof di))return!1;const o=i;return this.value===o.value}hashCode(){return this.value}}class Vr{constructor(){}static getRSSvalue(i,o,l){let f=0;for(let A of i)f+=A;let d=0,m=0,y=i.length;for(let A=0;A<y-1;A++){let S;for(S=1,m|=1<<A;S<i[A];S++,m&=~(1<<A)){let R=Vr.combins(f-S-1,y-A-2);if(l&&m===0&&f-S-(y-A-1)>=y-A-1&&(R-=Vr.combins(f-S-(y-A),y-A-2)),y-A-1>1){let L=0;for(let k=f-S-(y-A-2);k>o;k--)L+=Vr.combins(f-S-k-1,y-A-3);R-=L*(y-1-A)}else f-S>o&&R--;d+=R}f-=S}return d}static combins(i,o){let l,f;i-o>o?(f=o,l=i-o):(f=i-o,l=o);let d=1,m=1;for(let y=i;y>l;y--)d*=y,m<=f&&(d/=m,m++);for(;m<=f;)d/=m,m++;return d}}class ki{static buildBitArray(i){let o=i.length*2-1;i[i.length-1].getRightChar()==null&&(o-=1);let l=12*o,f=new le(l),d=0,y=i[0].getRightChar().getValue();for(let A=11;A>=0;--A)(y&1<<A)!=0&&f.set(d),d++;for(let A=1;A<i.length;++A){let S=i[A],R=S.getLeftChar().getValue();for(let L=11;L>=0;--L)(R&1<<L)!=0&&f.set(d),d++;if(S.getRightChar()!=null){let L=S.getRightChar().getValue();for(let k=11;k>=0;--k)(L&1<<k)!=0&&f.set(d),d++}}return f}}class ti{constructor(i,o){o?this.decodedInformation=null:(this.finished=i,this.decodedInformation=o)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class as{constructor(i){this.newPosition=i}getNewPosition(){return this.newPosition}}class kn extends as{constructor(i,o){super(i),this.value=o}getValue(){return this.value}isFNC1(){return this.value===kn.FNC1}}kn.FNC1="$";class br extends as{constructor(i,o,l){super(i),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=o}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Tr extends as{constructor(i,o,l){if(super(i),o<0||o>10||l<0||l>10)throw new j;this.firstDigit=o,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Tr.FNC1}isSecondDigitFNC1(){return this.secondDigit===Tr.FNC1}isAnyFNC1(){return this.firstDigit===Tr.FNC1||this.secondDigit===Tr.FNC1}}Tr.FNC1=10;class Fe{constructor(){}static parseFieldsInGeneralPurpose(i){if(!i)return null;if(i.length<2)throw new fe;let o=i.substring(0,2);for(let d of Fe.TWO_DIGIT_DATA_LENGTH)if(d[0]===o)return d[1]===Fe.VARIABLE_LENGTH?Fe.processVariableAI(2,d[2],i):Fe.processFixedAI(2,d[1],i);if(i.length<3)throw new fe;let l=i.substring(0,3);for(let d of Fe.THREE_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===Fe.VARIABLE_LENGTH?Fe.processVariableAI(3,d[2],i):Fe.processFixedAI(3,d[1],i);for(let d of Fe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===Fe.VARIABLE_LENGTH?Fe.processVariableAI(4,d[2],i):Fe.processFixedAI(4,d[1],i);if(i.length<4)throw new fe;let f=i.substring(0,4);for(let d of Fe.FOUR_DIGIT_DATA_LENGTH)if(d[0]===f)return d[1]===Fe.VARIABLE_LENGTH?Fe.processVariableAI(4,d[2],i):Fe.processFixedAI(4,d[1],i);throw new fe}static processFixedAI(i,o,l){if(l.length<i)throw new fe;let f=l.substring(0,i);if(l.length<i+o)throw new fe;let d=l.substring(i,i+o),m=l.substring(i+o),y="("+f+")"+d,A=Fe.parseFieldsInGeneralPurpose(m);return A==null?y:y+A}static processVariableAI(i,o,l){let f=l.substring(0,i),d;l.length<i+o?d=l.length:d=i+o;let m=l.substring(i,d),y=l.substring(d),A="("+f+")"+m,S=Fe.parseFieldsInGeneralPurpose(y);return S==null?A:A+S}}Fe.VARIABLE_LENGTH=[],Fe.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Fe.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Fe.VARIABLE_LENGTH,20],["22",Fe.VARIABLE_LENGTH,29],["30",Fe.VARIABLE_LENGTH,8],["37",Fe.VARIABLE_LENGTH,8],["90",Fe.VARIABLE_LENGTH,30],["91",Fe.VARIABLE_LENGTH,30],["92",Fe.VARIABLE_LENGTH,30],["93",Fe.VARIABLE_LENGTH,30],["94",Fe.VARIABLE_LENGTH,30],["95",Fe.VARIABLE_LENGTH,30],["96",Fe.VARIABLE_LENGTH,30],["97",Fe.VARIABLE_LENGTH,3],["98",Fe.VARIABLE_LENGTH,30],["99",Fe.VARIABLE_LENGTH,30]],Fe.THREE_DIGIT_DATA_LENGTH=[["240",Fe.VARIABLE_LENGTH,30],["241",Fe.VARIABLE_LENGTH,30],["242",Fe.VARIABLE_LENGTH,6],["250",Fe.VARIABLE_LENGTH,30],["251",Fe.VARIABLE_LENGTH,30],["253",Fe.VARIABLE_LENGTH,17],["254",Fe.VARIABLE_LENGTH,20],["400",Fe.VARIABLE_LENGTH,30],["401",Fe.VARIABLE_LENGTH,30],["402",17],["403",Fe.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Fe.VARIABLE_LENGTH,20],["421",Fe.VARIABLE_LENGTH,15],["422",3],["423",Fe.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Fe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Fe.VARIABLE_LENGTH,15],["391",Fe.VARIABLE_LENGTH,18],["392",Fe.VARIABLE_LENGTH,15],["393",Fe.VARIABLE_LENGTH,18],["703",Fe.VARIABLE_LENGTH,30]],Fe.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Fe.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Fe.VARIABLE_LENGTH,20],["8003",Fe.VARIABLE_LENGTH,30],["8004",Fe.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Fe.VARIABLE_LENGTH,30],["8008",Fe.VARIABLE_LENGTH,12],["8018",18],["8020",Fe.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Fe.VARIABLE_LENGTH,70],["8200",Fe.VARIABLE_LENGTH,70]];class mr{constructor(i){this.buffer=new K,this.information=i}decodeAllCodes(i,o){let l=o,f=null;do{let d=this.decodeGeneralPurposeField(l,f),m=Fe.parseFieldsInGeneralPurpose(d.getNewString());if(m!=null&&i.append(m),d.isRemaining()?f=""+d.getRemainingValue():f=null,l===d.getNewPosition())break;l=d.getNewPosition()}while(!0);return i.toString()}isStillNumeric(i){if(i+7>this.information.getSize())return i+4<=this.information.getSize();for(let o=i;o<i+3;++o)if(this.information.get(o))return!0;return this.information.get(i+3)}decodeNumeric(i){if(i+7>this.information.getSize()){let d=this.extractNumericValueFromBitArray(i,4);return d===0?new Tr(this.information.getSize(),Tr.FNC1,Tr.FNC1):new Tr(this.information.getSize(),d-1,Tr.FNC1)}let o=this.extractNumericValueFromBitArray(i,7),l=(o-8)/11,f=(o-8)%11;return new Tr(i+7,l,f)}extractNumericValueFromBitArray(i,o){return mr.extractNumericValueFromBitArray(this.information,i,o)}static extractNumericValueFromBitArray(i,o,l){let f=0;for(let d=0;d<l;++d)i.get(o+d)&&(f|=1<<l-d-1);return f}decodeGeneralPurposeField(i,o){this.buffer.setLengthToZero(),o!=null&&this.buffer.append(o),this.current.setPosition(i);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new br(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new br(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let i,o;do{let l=this.current.getPosition();if(this.current.isAlpha()?(o=this.parseAlphaBlock(),i=o.isFinished()):this.current.isIsoIec646()?(o=this.parseIsoIec646Block(),i=o.isFinished()):(o=this.parseNumericBlock(),i=o.isFinished()),!(l!==this.current.getPosition())&&!i)break}while(!i);return o.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let i=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFirstDigitFNC1()){let o;return i.isSecondDigitFNC1()?o=new br(this.current.getPosition(),this.buffer.toString()):o=new br(this.current.getPosition(),this.buffer.toString(),i.getSecondDigit()),new ti(!0,o)}if(this.buffer.append(i.getFirstDigit()),i.isSecondDigitFNC1()){let o=new br(this.current.getPosition(),this.buffer.toString());return new ti(!0,o)}this.buffer.append(i.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new ti(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let i=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let o=new br(this.current.getPosition(),this.buffer.toString());return new ti(!0,o)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new ti(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let i=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let o=new br(this.current.getPosition(),this.buffer.toString());return new ti(!0,o)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new ti(!1)}isStillIsoIec646(i){if(i+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(i,5);if(o>=5&&o<16)return!0;if(i+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,7);if(l>=64&&l<116)return!0;if(i+8>this.information.getSize())return!1;let f=this.extractNumericValueFromBitArray(i,8);return f>=232&&f<253}decodeIsoIec646(i){let o=this.extractNumericValueFromBitArray(i,5);if(o===15)return new kn(i+5,kn.FNC1);if(o>=5&&o<15)return new kn(i+5,"0"+(o-5));let l=this.extractNumericValueFromBitArray(i,7);if(l>=64&&l<90)return new kn(i+7,""+(l+1));if(l>=90&&l<116)return new kn(i+7,""+(l+7));let f=this.extractNumericValueFromBitArray(i,8),d;switch(f){case 232:d="!";break;case 233:d='"';break;case 234:d="%";break;case 235:d="&";break;case 236:d="'";break;case 237:d="(";break;case 238:d=")";break;case 239:d="*";break;case 240:d="+";break;case 241:d=",";break;case 242:d="-";break;case 243:d=".";break;case 244:d="/";break;case 245:d=":";break;case 246:d=";";break;case 247:d="<";break;case 248:d="=";break;case 249:d=">";break;case 250:d="?";break;case 251:d="_";break;case 252:d=" ";break;default:throw new j}return new kn(i+8,d)}isStillAlpha(i){if(i+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(i,5);if(o>=5&&o<16)return!0;if(i+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,6);return l>=16&&l<63}decodeAlphanumeric(i){let o=this.extractNumericValueFromBitArray(i,5);if(o===15)return new kn(i+5,kn.FNC1);if(o>=5&&o<15)return new kn(i+5,"0"+(o-5));let l=this.extractNumericValueFromBitArray(i,6);if(l>=32&&l<58)return new kn(i+6,""+(l+33));let f;switch(l){case 58:f="*";break;case 59:f=",";break;case 60:f="-";break;case 61:f=".";break;case 62:f="/";break;default:throw new ir("Decoding invalid alphanumeric value: "+l)}return new kn(i+6,f)}isAlphaTo646ToAlphaLatch(i){if(i+1>this.information.getSize())return!1;for(let o=0;o<5&&o+i<this.information.getSize();++o)if(o===2){if(!this.information.get(i+2))return!1}else if(this.information.get(i+o))return!1;return!0}isAlphaOr646ToNumericLatch(i){if(i+3>this.information.getSize())return!1;for(let o=i;o<i+3;++o)if(this.information.get(o))return!1;return!0}isNumericToAlphaNumericLatch(i){if(i+1>this.information.getSize())return!1;for(let o=0;o<4&&o+i<this.information.getSize();++o)if(this.information.get(i+o))return!1;return!0}}class bn{constructor(i){this.information=i,this.generalDecoder=new mr(i)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Wt extends bn{constructor(i){super(i)}encodeCompressedGtin(i,o){i.append("(01)");let l=i.length();i.append("9"),this.encodeCompressedGtinWithoutAI(i,o,l)}encodeCompressedGtinWithoutAI(i,o,l){for(let f=0;f<4;++f){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(o+10*f,10);d/100===0&&i.append("0"),d/10===0&&i.append("0"),i.append(d)}Wt.appendCheckDigit(i,l)}static appendCheckDigit(i,o){let l=0;for(let f=0;f<13;f++){let d=i.charAt(f+o).charCodeAt(0)-48;l+=(f&1)===0?3*d:d}l=10-l%10,l===10&&(l=0),i.append(l)}}Wt.GTIN_SIZE=40;class vr extends Wt{constructor(i){super(i)}parseInformation(){let i=new K;i.append("(01)");let o=i.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(vr.HEADER_SIZE,4);return i.append(l),this.encodeCompressedGtinWithoutAI(i,vr.HEADER_SIZE+4,o),this.getGeneralDecoder().decodeAllCodes(i,vr.HEADER_SIZE+44)}}vr.HEADER_SIZE=4;class Bi extends bn{constructor(i){super(i)}parseInformation(){let i=new K;return this.getGeneralDecoder().decodeAllCodes(i,Bi.HEADER_SIZE)}}Bi.HEADER_SIZE=5;class Ts extends Wt{constructor(i){super(i)}encodeCompressedWeight(i,o,l){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(o,l);this.addWeightCode(i,f);let d=this.checkWeight(f),m=1e5;for(let y=0;y<5;++y)d/m===0&&i.append("0"),m/=10;i.append(d)}}class jr extends Ts{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()!=jr.HEADER_SIZE+Ts.GTIN_SIZE+jr.WEIGHT_SIZE)throw new fe;let i=new K;return this.encodeCompressedGtin(i,jr.HEADER_SIZE),this.encodeCompressedWeight(i,jr.HEADER_SIZE+Ts.GTIN_SIZE,jr.WEIGHT_SIZE),i.toString()}}jr.HEADER_SIZE=5,jr.WEIGHT_SIZE=15;class ia extends jr{constructor(i){super(i)}addWeightCode(i,o){i.append("(3103)")}checkWeight(i){return i}}class vi extends jr{constructor(i){super(i)}addWeightCode(i,o){o<1e4?i.append("(3202)"):i.append("(3203)")}checkWeight(i){return i<1e4?i:i-1e4}}class Sr extends Wt{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<Sr.HEADER_SIZE+Wt.GTIN_SIZE)throw new fe;let i=new K;this.encodeCompressedGtin(i,Sr.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(Sr.HEADER_SIZE+Wt.GTIN_SIZE,Sr.LAST_DIGIT_SIZE);i.append("(392"),i.append(o),i.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(Sr.HEADER_SIZE+Wt.GTIN_SIZE+Sr.LAST_DIGIT_SIZE,null);return i.append(l.getNewString()),i.toString()}}Sr.HEADER_SIZE=8,Sr.LAST_DIGIT_SIZE=2;class pn extends Wt{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<pn.HEADER_SIZE+Wt.GTIN_SIZE)throw new fe;let i=new K;this.encodeCompressedGtin(i,pn.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(pn.HEADER_SIZE+Wt.GTIN_SIZE,pn.LAST_DIGIT_SIZE);i.append("(393"),i.append(o),i.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(pn.HEADER_SIZE+Wt.GTIN_SIZE+pn.LAST_DIGIT_SIZE,pn.FIRST_THREE_DIGITS_SIZE);l/100==0&&i.append("0"),l/10==0&&i.append("0"),i.append(l);let f=this.getGeneralDecoder().decodeGeneralPurposeField(pn.HEADER_SIZE+Wt.GTIN_SIZE+pn.LAST_DIGIT_SIZE+pn.FIRST_THREE_DIGITS_SIZE,null);return i.append(f.getNewString()),i.toString()}}pn.HEADER_SIZE=8,pn.LAST_DIGIT_SIZE=2,pn.FIRST_THREE_DIGITS_SIZE=10;class Dt extends Ts{constructor(i,o,l){super(i),this.dateCode=l,this.firstAIdigits=o}parseInformation(){if(this.getInformation().getSize()!=Dt.HEADER_SIZE+Dt.GTIN_SIZE+Dt.WEIGHT_SIZE+Dt.DATE_SIZE)throw new fe;let i=new K;return this.encodeCompressedGtin(i,Dt.HEADER_SIZE),this.encodeCompressedWeight(i,Dt.HEADER_SIZE+Dt.GTIN_SIZE,Dt.WEIGHT_SIZE),this.encodeCompressedDate(i,Dt.HEADER_SIZE+Dt.GTIN_SIZE+Dt.WEIGHT_SIZE),i.toString()}encodeCompressedDate(i,o){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(o,Dt.DATE_SIZE);if(l==38400)return;i.append("("),i.append(this.dateCode),i.append(")");let f=l%32;l/=32;let d=l%12+1;l/=12;let m=l;m/10==0&&i.append("0"),i.append(m),d/10==0&&i.append("0"),i.append(d),f/10==0&&i.append("0"),i.append(f)}addWeightCode(i,o){i.append("("),i.append(this.firstAIdigits),i.append(o/1e5),i.append(")")}checkWeight(i){return i%1e5}}Dt.HEADER_SIZE=8,Dt.WEIGHT_SIZE=20,Dt.DATE_SIZE=16;function Dr(P){try{if(P.get(1))return new vr(P);if(!P.get(2))return new Bi(P);switch(mr.extractNumericValueFromBitArray(P,1,4)){case 4:return new ia(P);case 5:return new vi(P)}switch(mr.extractNumericValueFromBitArray(P,1,5)){case 12:return new Sr(P);case 13:return new pn(P)}switch(mr.extractNumericValueFromBitArray(P,1,7)){case 56:return new Dt(P,"310","11");case 57:return new Dt(P,"320","11");case 58:return new Dt(P,"310","13");case 59:return new Dt(P,"320","13");case 60:return new Dt(P,"310","15");case 61:return new Dt(P,"320","15");case 62:return new Dt(P,"310","17");case 63:return new Dt(P,"320","17")}}catch(i){throw console.log(i),new ir("unknown decoder: "+P)}}class ar{constructor(i,o,l,f){this.leftchar=i,this.rightchar=o,this.finderpattern=l,this.maybeLast=f}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(i,o){return i instanceof ar?ar.equalsOrNull(i.leftchar,o.leftchar)&&ar.equalsOrNull(i.rightchar,o.rightchar)&&ar.equalsOrNull(i.finderpattern,o.finderpattern):!1}static equalsOrNull(i,o){return i===null?o===null:ar.equals(i,o)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Nn{constructor(i,o,l){this.pairs=i,this.rowNumber=o,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(i){return this.checkEqualitity(this,i)}toString(){return"{ "+this.pairs+" }"}equals(i,o){return i instanceof Nn?this.checkEqualitity(i,o)&&i.wasReversed===o.wasReversed:!1}checkEqualitity(i,o){if(!i||!o)return;let l;return i.forEach((f,d)=>{o.forEach(m=>{f.getLeftChar().getValue()===m.getLeftChar().getValue()&&f.getRightChar().getValue()===m.getRightChar().getValue()&&f.getFinderPatter().getValue()===m.getFinderPatter().getValue()&&(l=!0)})}),l}}class Ie extends Ln{constructor(i){super(...arguments),this.pairs=new Array(Ie.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=i===!0}decodeRow(i,o,l){this.pairs.length=0,this.startFromEven=!1;try{return Ie.constructResult(this.decodeRow2pairs(i,o))}catch(f){this.verbose&&console.log(f)}return this.pairs.length=0,this.startFromEven=!0,Ie.constructResult(this.decodeRow2pairs(i,o))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(i,o){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(o,this.pairs,i))}catch(d){if(d instanceof fe){if(!this.pairs.length)throw new fe;l=!0}}if(this.checkChecksum())return this.pairs;let f;if(this.rows.length?f=!0:f=!1,this.storeRow(i,!1),f){let d=this.checkRowsBoolean(!1);if(d!=null||(d=this.checkRowsBoolean(!0),d!=null))return d}throw new fe}checkRowsBoolean(i){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,i&&(this.rows=this.rows.reverse());let o=null;try{o=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return i&&(this.rows=this.rows.reverse()),o}checkRows(i,o){for(let l=o;l<this.rows.length;l++){let f=this.rows[l];this.pairs.length=0;for(let m of i)this.pairs.push(m.getPairs());if(this.pairs.push(f.getPairs()),!Ie.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let d=new Array(i);d.push(f);try{return this.checkRows(d,l+1)}catch(m){this.verbose&&console.log(m)}}throw new fe}static isValidSequence(i){for(let o of Ie.FINDER_PATTERN_SEQUENCES){if(i.length>o.length)continue;let l=!0;for(let f=0;f<i.length;f++)if(i[f].getFinderPattern().getValue()!=o[f]){l=!1;break}if(l)return!0}return!1}storeRow(i,o){let l=0,f=!1,d=!1;for(;l<this.rows.length;){let m=this.rows[l];if(m.getRowNumber()>i){d=m.isEquivalent(this.pairs);break}f=m.isEquivalent(this.pairs),l++}d||f||Ie.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new Nn(this.pairs,i,o)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(i,o){for(let l of o)if(l.getPairs().length!==i.length){for(let f of l.getPairs())for(let d of i)if(ar.equals(f,d))break}}static isPartialRow(i,o){for(let l of o){let f=!0;for(let d of i){let m=!1;for(let y of l.getPairs())if(d.equals(y)){m=!0;break}if(!m){f=!1;break}}if(f)return!0}return!1}getRows(){return this.rows}static constructResult(i){let o=ki.buildBitArray(i),f=Dr(o).parseInformation(),d=i[0].getFinderPattern().getResultPoints(),m=i[i.length-1].getFinderPattern().getResultPoints(),y=[d[0],d[1],m[0],m[1]];return new je(f,null,null,y,Le.RSS_EXPANDED,null)}checkChecksum(){let i=this.pairs.get(0),o=i.getLeftChar(),l=i.getRightChar();if(l==null)return!1;let f=l.getChecksumPortion(),d=2;for(let y=1;y<this.pairs.size();++y){let A=this.pairs.get(y);f+=A.getLeftChar().getChecksumPortion(),d++;let S=A.getRightChar();S!=null&&(f+=S.getChecksumPortion(),d++)}return f%=211,211*(d-4)+f==o.getValue()}static getNextSecondBar(i,o){let l;return i.get(o)?(l=i.getNextUnset(o),l=i.getNextSet(l)):(l=i.getNextSet(o),l=i.getNextUnset(l)),l}retrieveNextPair(i,o,l){let f=o.length%2==0;this.startFromEven&&(f=!f);let d,m=!0,y=-1;do this.findNextPair(i,o,y),d=this.parseFoundFinderPattern(i,l,f),d==null?y=Ie.getNextSecondBar(i,this.startEnd[0]):m=!1;while(m);let A=this.decodeDataCharacter(i,d,f,!0);if(!this.isEmptyPair(o)&&o[o.length-1].mustBeLast())throw new fe;let S;try{S=this.decodeDataCharacter(i,d,f,!1)}catch(R){S=null,this.verbose&&console.log(R)}return new ar(A,S,d,!0)}isEmptyPair(i){return i.length===0}findNextPair(i,o,l){let f=this.getDecodeFinderCounters();f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=i.getSize(),m;l>=0?m=l:this.isEmptyPair(o)?m=0:m=o[o.length-1].getFinderPattern().getStartEnd()[1];let y=o.length%2!=0;this.startFromEven&&(y=!y);let A=!1;for(;m<d&&(A=!i.get(m),!!A);)m++;let S=0,R=m;for(let L=m;L<d;L++)if(i.get(L)!=A)f[S]++;else{if(S==3){if(y&&Ie.reverseCounters(f),Ie.isFinderPattern(f)){this.startEnd[0]=R,this.startEnd[1]=L;return}y&&Ie.reverseCounters(f),R+=f[0]+f[1],f[0]=f[2],f[1]=f[3],f[2]=0,f[3]=0,S--}else S++;f[S]=1,A=!A}throw new fe}static reverseCounters(i){let o=i.length;for(let l=0;l<o/2;++l){let f=i[l];i[l]=i[o-l-1],i[o-l-1]=f}}parseFoundFinderPattern(i,o,l){let f,d,m;if(l){let S=this.startEnd[0]-1;for(;S>=0&&!i.get(S);)S--;S++,f=this.startEnd[0]-S,d=S,m=this.startEnd[1]}else d=this.startEnd[0],m=i.getNextUnset(this.startEnd[1]+1),f=m-this.startEnd[1];let y=this.getDecodeFinderCounters();$.arraycopy(y,0,y,1,y.length-1),y[0]=f;let A;try{A=this.parseFinderValue(y,Ie.FINDER_PATTERNS)}catch{return null}return new di(A,[d,m],d,m,o)}decodeDataCharacter(i,o,l,f){let d=this.getDataCharacterCounters();for(let fn=0;fn<d.length;fn++)d[fn]=0;if(f)Ie.recordPatternInReverse(i,o.getStartEnd()[0],d);else{Ie.recordPattern(i,o.getStartEnd()[1],d);for(let fn=0,Ir=d.length-1;fn<Ir;fn++,Ir--){let Ei=d[fn];d[fn]=d[Ir],d[Ir]=Ei}}let m=17,y=Ze.sum(new Int32Array(d))/m,A=(o.getStartEnd()[1]-o.getStartEnd()[0])/15;if(Math.abs(y-A)/A>.3)throw new fe;let S=this.getOddCounts(),R=this.getEvenCounts(),L=this.getOddRoundingErrors(),k=this.getEvenRoundingErrors();for(let fn=0;fn<d.length;fn++){let Ir=1*d[fn]/y,Ei=Ir+.5;if(Ei<1){if(Ir<.3)throw new fe;Ei=1}else if(Ei>8){if(Ir>8.7)throw new fe;Ei=8}let to=fn/2;(fn&1)==0?(S[to]=Ei,L[to]=Ir-Ei):(R[to]=Ei,k[to]=Ir-Ei)}this.adjustOddEvenCounts(m);let G=4*o.getValue()+(l?0:2)+(f?0:1)-1,te=0,re=0;for(let fn=S.length-1;fn>=0;fn--){if(Ie.isNotA1left(o,l,f)){let Ir=Ie.WEIGHTS[G][2*fn];re+=S[fn]*Ir}te+=S[fn]}let ue=0;for(let fn=R.length-1;fn>=0;fn--)if(Ie.isNotA1left(o,l,f)){let Ir=Ie.WEIGHTS[G][2*fn+1];ue+=R[fn]*Ir}let ye=re+ue;if((te&1)!=0||te>13||te<4)throw new fe;let ke=(13-te)/2,Pe=Ie.SYMBOL_WIDEST[ke],Re=9-Pe,Rt=Vr.getRSSvalue(S,Pe,!0),pt=Vr.getRSSvalue(R,Re,!1),Jn=Ie.EVEN_TOTAL_SUBSET[ke],Ni=Ie.GSUM[ke],Fr=Rt*Jn+pt+Ni;return new gr(Fr,ye)}static isNotA1left(i,o,l){return!(i.getValue()==0&&o&&l)}adjustOddEvenCounts(i){let o=Ze.sum(new Int32Array(this.getOddCounts())),l=Ze.sum(new Int32Array(this.getEvenCounts())),f=!1,d=!1;o>13?d=!0:o<4&&(f=!0);let m=!1,y=!1;l>13?y=!0:l<4&&(m=!0);let A=o+l-i,S=(o&1)==1,R=(l&1)==0;if(A==1)if(S){if(R)throw new fe;d=!0}else{if(!R)throw new fe;y=!0}else if(A==-1)if(S){if(R)throw new fe;f=!0}else{if(!R)throw new fe;m=!0}else if(A==0){if(S){if(!R)throw new fe;o<l?(f=!0,y=!0):(d=!0,m=!0)}else if(R)throw new fe}else throw new fe;if(f){if(d)throw new fe;Ie.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&Ie.decrement(this.getOddCounts(),this.getOddRoundingErrors()),m){if(y)throw new fe;Ie.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&Ie.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ie.SYMBOL_WIDEST=[7,5,4,3,1],Ie.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Ie.GSUM=[0,348,1388,2948,3988],Ie.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Ie.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Ie.FINDER_PAT_A=0,Ie.FINDER_PAT_B=1,Ie.FINDER_PAT_C=2,Ie.FINDER_PAT_D=3,Ie.FINDER_PAT_E=4,Ie.FINDER_PAT_F=5,Ie.FINDER_PATTERN_SEQUENCES=[[Ie.FINDER_PAT_A,Ie.FINDER_PAT_A],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_B,Ie.FINDER_PAT_B],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_C,Ie.FINDER_PAT_B,Ie.FINDER_PAT_D],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_E,Ie.FINDER_PAT_B,Ie.FINDER_PAT_D,Ie.FINDER_PAT_C],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_E,Ie.FINDER_PAT_B,Ie.FINDER_PAT_D,Ie.FINDER_PAT_D,Ie.FINDER_PAT_F],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_E,Ie.FINDER_PAT_B,Ie.FINDER_PAT_D,Ie.FINDER_PAT_E,Ie.FINDER_PAT_F,Ie.FINDER_PAT_F],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_A,Ie.FINDER_PAT_B,Ie.FINDER_PAT_B,Ie.FINDER_PAT_C,Ie.FINDER_PAT_C,Ie.FINDER_PAT_D,Ie.FINDER_PAT_D],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_A,Ie.FINDER_PAT_B,Ie.FINDER_PAT_B,Ie.FINDER_PAT_C,Ie.FINDER_PAT_C,Ie.FINDER_PAT_D,Ie.FINDER_PAT_E,Ie.FINDER_PAT_E],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_A,Ie.FINDER_PAT_B,Ie.FINDER_PAT_B,Ie.FINDER_PAT_C,Ie.FINDER_PAT_C,Ie.FINDER_PAT_D,Ie.FINDER_PAT_E,Ie.FINDER_PAT_F,Ie.FINDER_PAT_F],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_A,Ie.FINDER_PAT_B,Ie.FINDER_PAT_B,Ie.FINDER_PAT_C,Ie.FINDER_PAT_D,Ie.FINDER_PAT_D,Ie.FINDER_PAT_E,Ie.FINDER_PAT_E,Ie.FINDER_PAT_F,Ie.FINDER_PAT_F]],Ie.MAX_PAIRS=11;class sa extends gr{constructor(i,o,l){super(i,o),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Kt extends Ln{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(i,o,l){const f=this.decodePair(o,!1,i,l);Kt.addOrTally(this.possibleLeftPairs,f),o.reverse();let d=this.decodePair(o,!0,i,l);Kt.addOrTally(this.possibleRightPairs,d),o.reverse();for(let m of this.possibleLeftPairs)if(m.getCount()>1){for(let y of this.possibleRightPairs)if(y.getCount()>1&&Kt.checkChecksum(m,y))return Kt.constructResult(m,y)}throw new fe}static addOrTally(i,o){if(o==null)return;let l=!1;for(let f of i)if(f.getValue()===o.getValue()){f.incrementCount(),l=!0;break}l||i.push(o)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(i,o){let l=4537077*i.getValue()+o.getValue(),f=new String(l).toString(),d=new K;for(let S=13-f.length;S>0;S--)d.append("0");d.append(f);let m=0;for(let S=0;S<13;S++){let R=d.charAt(S).charCodeAt(0)-48;m+=(S&1)===0?3*R:R}m=10-m%10,m===10&&(m=0),d.append(m.toString());let y=i.getFinderPattern().getResultPoints(),A=o.getFinderPattern().getResultPoints();return new je(d.toString(),null,0,[y[0],y[1],A[0],A[1]],Le.RSS_14,new Date().getTime())}static checkChecksum(i,o){let l=(i.getChecksumPortion()+16*o.getChecksumPortion())%79,f=9*i.getFinderPattern().getValue()+o.getFinderPattern().getValue();return f>72&&f--,f>8&&f--,l===f}decodePair(i,o,l,f){try{let d=this.findFinderPattern(i,o),m=this.parseFoundFinderPattern(i,l,o,d),y=f==null?null:f.get(Oe.NEED_RESULT_POINT_CALLBACK);if(y!=null){let R=(d[0]+d[1])/2;o&&(R=i.getSize()-1-R),y.foundPossibleResultPoint(new He(R,l))}let A=this.decodeDataCharacter(i,m,!0),S=this.decodeDataCharacter(i,m,!1);return new sa(1597*A.getValue()+S.getValue(),A.getChecksumPortion()+4*S.getChecksumPortion(),m)}catch{return null}}decodeDataCharacter(i,o,l){let f=this.getDataCharacterCounters();for(let ue=0;ue<f.length;ue++)f[ue]=0;if(l)Yt.recordPatternInReverse(i,o.getStartEnd()[0],f);else{Yt.recordPattern(i,o.getStartEnd()[1]+1,f);for(let ue=0,ye=f.length-1;ue<ye;ue++,ye--){let ke=f[ue];f[ue]=f[ye],f[ye]=ke}}let d=l?16:15,m=Ze.sum(new Int32Array(f))/d,y=this.getOddCounts(),A=this.getEvenCounts(),S=this.getOddRoundingErrors(),R=this.getEvenRoundingErrors();for(let ue=0;ue<f.length;ue++){let ye=f[ue]/m,ke=Math.floor(ye+.5);ke<1?ke=1:ke>8&&(ke=8);let Pe=Math.floor(ue/2);(ue&1)===0?(y[Pe]=ke,S[Pe]=ye-ke):(A[Pe]=ke,R[Pe]=ye-ke)}this.adjustOddEvenCounts(l,d);let L=0,k=0;for(let ue=y.length-1;ue>=0;ue--)k*=9,k+=y[ue],L+=y[ue];let G=0,te=0;for(let ue=A.length-1;ue>=0;ue--)G*=9,G+=A[ue],te+=A[ue];let re=k+3*G;if(l){if((L&1)!==0||L>12||L<4)throw new fe;let ue=(12-L)/2,ye=Kt.OUTSIDE_ODD_WIDEST[ue],ke=9-ye,Pe=Vr.getRSSvalue(y,ye,!1),Re=Vr.getRSSvalue(A,ke,!0),Rt=Kt.OUTSIDE_EVEN_TOTAL_SUBSET[ue],pt=Kt.OUTSIDE_GSUM[ue];return new gr(Pe*Rt+Re+pt,re)}else{if((te&1)!==0||te>10||te<4)throw new fe;let ue=(10-te)/2,ye=Kt.INSIDE_ODD_WIDEST[ue],ke=9-ye,Pe=Vr.getRSSvalue(y,ye,!0),Re=Vr.getRSSvalue(A,ke,!1),Rt=Kt.INSIDE_ODD_TOTAL_SUBSET[ue],pt=Kt.INSIDE_GSUM[ue];return new gr(Re*Rt+Pe+pt,re)}}findFinderPattern(i,o){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let f=i.getSize(),d=!1,m=0;for(;m<f&&(d=!i.get(m),o!==d);)m++;let y=0,A=m;for(let S=m;S<f;S++)if(i.get(S)!==d)l[y]++;else{if(y===3){if(Ln.isFinderPattern(l))return[A,S];A+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,y--}else y++;l[y]=1,d=!d}throw new fe}parseFoundFinderPattern(i,o,l,f){let d=i.get(f[0]),m=f[0]-1;for(;m>=0&&d!==i.get(m);)m--;m++;const y=f[0]-m,A=this.getDecodeFinderCounters(),S=new Int32Array(A.length);$.arraycopy(A,0,S,1,A.length-1),S[0]=y;const R=this.parseFinderValue(S,Kt.FINDER_PATTERNS);let L=m,k=f[1];return l&&(L=i.getSize()-1-L,k=i.getSize()-1-k),new di(R,[m,f[1]],L,k,o)}adjustOddEvenCounts(i,o){let l=Ze.sum(new Int32Array(this.getOddCounts())),f=Ze.sum(new Int32Array(this.getEvenCounts())),d=!1,m=!1,y=!1,A=!1;i?(l>12?m=!0:l<4&&(d=!0),f>12?A=!0:f<4&&(y=!0)):(l>11?m=!0:l<5&&(d=!0),f>10?A=!0:f<4&&(y=!0));let S=l+f-o,R=(l&1)===(i?1:0),L=(f&1)===1;if(S===1)if(R){if(L)throw new fe;m=!0}else{if(!L)throw new fe;A=!0}else if(S===-1)if(R){if(L)throw new fe;d=!0}else{if(!L)throw new fe;y=!0}else if(S===0){if(R){if(!L)throw new fe;l<f?(d=!0,A=!0):(m=!0,y=!0)}else if(L)throw new fe}else throw new fe;if(d){if(m)throw new fe;Ln.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(m&&Ln.decrement(this.getOddCounts(),this.getOddRoundingErrors()),y){if(A)throw new fe;Ln.increment(this.getEvenCounts(),this.getOddRoundingErrors())}A&&Ln.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Kt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Kt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Kt.OUTSIDE_GSUM=[0,161,961,2015,2715],Kt.INSIDE_GSUM=[0,336,1036,1516],Kt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Kt.INSIDE_ODD_WIDEST=[2,4,6,8],Kt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Cr extends Yt{constructor(i,o){super(),this.readers=[],this.verbose=o===!0;const l=i?i.get(Oe.POSSIBLE_FORMATS):null,f=i&&i.get(Oe.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(Le.EAN_13)||l.includes(Le.UPC_A)||l.includes(Le.EAN_8)||l.includes(Le.UPC_E))&&this.readers.push(new Ls(i)),l.includes(Le.CODE_39)&&this.readers.push(new Xt(f)),l.includes(Le.CODE_128)&&this.readers.push(new Me),l.includes(Le.ITF)&&this.readers.push(new at),l.includes(Le.RSS_14)&&this.readers.push(new Kt),l.includes(Le.RSS_EXPANDED)&&this.readers.push(new Ie(this.verbose))):(this.readers.push(new Ls(i)),this.readers.push(new Xt),this.readers.push(new Ls(i)),this.readers.push(new Me),this.readers.push(new at),this.readers.push(new Kt),this.readers.push(new Ie(this.verbose)))}decodeRow(i,o,l){for(let f=0;f<this.readers.length;f++)try{return this.readers[f].decodeRow(i,o,l)}catch{}throw new fe}reset(){this.readers.forEach(i=>i.reset())}}class aa extends Ve{constructor(i=500,o){super(new Cr(o),i,o)}}class Mt{constructor(i,o,l){this.ecCodewords=i,this.ecBlocks=[o],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class X{constructor(i,o){this.count=i,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ue{constructor(i,o,l,f,d,m){this.versionNumber=i,this.symbolSizeRows=o,this.symbolSizeColumns=l,this.dataRegionSizeRows=f,this.dataRegionSizeColumns=d,this.ecBlocks=m;let y=0;const A=m.getECCodewords(),S=m.getECBlocks();for(let R of S)y+=R.getCount()*(R.getDataCodewords()+A);this.totalCodewords=y}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(i,o){if((i&1)!==0||(o&1)!==0)throw new j;for(let l of Ue.VERSIONS)if(l.symbolSizeRows===i&&l.symbolSizeColumns===o)return l;throw new j}toString(){return""+this.versionNumber}static buildVersions(){return[new Ue(1,10,10,8,8,new Mt(5,new X(1,3))),new Ue(2,12,12,10,10,new Mt(7,new X(1,5))),new Ue(3,14,14,12,12,new Mt(10,new X(1,8))),new Ue(4,16,16,14,14,new Mt(12,new X(1,12))),new Ue(5,18,18,16,16,new Mt(14,new X(1,18))),new Ue(6,20,20,18,18,new Mt(18,new X(1,22))),new Ue(7,22,22,20,20,new Mt(20,new X(1,30))),new Ue(8,24,24,22,22,new Mt(24,new X(1,36))),new Ue(9,26,26,24,24,new Mt(28,new X(1,44))),new Ue(10,32,32,14,14,new Mt(36,new X(1,62))),new Ue(11,36,36,16,16,new Mt(42,new X(1,86))),new Ue(12,40,40,18,18,new Mt(48,new X(1,114))),new Ue(13,44,44,20,20,new Mt(56,new X(1,144))),new Ue(14,48,48,22,22,new Mt(68,new X(1,174))),new Ue(15,52,52,24,24,new Mt(42,new X(2,102))),new Ue(16,64,64,14,14,new Mt(56,new X(2,140))),new Ue(17,72,72,16,16,new Mt(36,new X(4,92))),new Ue(18,80,80,18,18,new Mt(48,new X(4,114))),new Ue(19,88,88,20,20,new Mt(56,new X(4,144))),new Ue(20,96,96,22,22,new Mt(68,new X(4,174))),new Ue(21,104,104,24,24,new Mt(56,new X(6,136))),new Ue(22,120,120,18,18,new Mt(68,new X(6,175))),new Ue(23,132,132,20,20,new Mt(62,new X(8,163))),new Ue(24,144,144,22,22,new Mt(62,new X(8,156),new X(2,155))),new Ue(25,8,18,6,16,new Mt(7,new X(1,5))),new Ue(26,8,32,6,14,new Mt(11,new X(1,10))),new Ue(27,12,26,10,24,new Mt(14,new X(1,16))),new Ue(28,12,36,10,16,new Mt(18,new X(1,22))),new Ue(29,16,36,14,16,new Mt(24,new X(1,32))),new Ue(30,16,48,14,22,new Mt(28,new X(1,49)))]}}Ue.VERSIONS=Ue.buildVersions();class Ke{constructor(i){const o=i.getHeight();if(o<8||o>144||(o&1)!==0)throw new j;this.version=Ke.readVersion(i),this.mappingBitMatrix=this.extractDataRegion(i),this.readMappingMatrix=new $e(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(i){const o=i.getHeight(),l=i.getWidth();return Ue.getVersionForDimensions(o,l)}readCodewords(){const i=new Int8Array(this.version.getTotalCodewords());let o=0,l=4,f=0;const d=this.mappingBitMatrix.getHeight(),m=this.mappingBitMatrix.getWidth();let y=!1,A=!1,S=!1,R=!1;do if(l===d&&f===0&&!y)i[o++]=this.readCorner1(d,m)&255,l-=2,f+=2,y=!0;else if(l===d-2&&f===0&&(m&3)!==0&&!A)i[o++]=this.readCorner2(d,m)&255,l-=2,f+=2,A=!0;else if(l===d+4&&f===2&&(m&7)===0&&!S)i[o++]=this.readCorner3(d,m)&255,l-=2,f+=2,S=!0;else if(l===d-2&&f===0&&(m&7)===4&&!R)i[o++]=this.readCorner4(d,m)&255,l-=2,f+=2,R=!0;else{do l<d&&f>=0&&!this.readMappingMatrix.get(f,l)&&(i[o++]=this.readUtah(l,f,d,m)&255),l-=2,f+=2;while(l>=0&&f<m);l+=1,f+=3;do l>=0&&f<m&&!this.readMappingMatrix.get(f,l)&&(i[o++]=this.readUtah(l,f,d,m)&255),l+=2,f-=2;while(l<d&&f>=0);l+=3,f+=1}while(l<d||f<m);if(o!==this.version.getTotalCodewords())throw new j;return i}readModule(i,o,l,f){return i<0&&(i+=l,o+=4-(l+4&7)),o<0&&(o+=f,i+=4-(f+4&7)),this.readMappingMatrix.set(o,i),this.mappingBitMatrix.get(o,i)}readUtah(i,o,l,f){let d=0;return this.readModule(i-2,o-2,l,f)&&(d|=1),d<<=1,this.readModule(i-2,o-1,l,f)&&(d|=1),d<<=1,this.readModule(i-1,o-2,l,f)&&(d|=1),d<<=1,this.readModule(i-1,o-1,l,f)&&(d|=1),d<<=1,this.readModule(i-1,o,l,f)&&(d|=1),d<<=1,this.readModule(i,o-2,l,f)&&(d|=1),d<<=1,this.readModule(i,o-1,l,f)&&(d|=1),d<<=1,this.readModule(i,o,l,f)&&(d|=1),d}readCorner1(i,o){let l=0;return this.readModule(i-1,0,i,o)&&(l|=1),l<<=1,this.readModule(i-1,1,i,o)&&(l|=1),l<<=1,this.readModule(i-1,2,i,o)&&(l|=1),l<<=1,this.readModule(0,o-2,i,o)&&(l|=1),l<<=1,this.readModule(0,o-1,i,o)&&(l|=1),l<<=1,this.readModule(1,o-1,i,o)&&(l|=1),l<<=1,this.readModule(2,o-1,i,o)&&(l|=1),l<<=1,this.readModule(3,o-1,i,o)&&(l|=1),l}readCorner2(i,o){let l=0;return this.readModule(i-3,0,i,o)&&(l|=1),l<<=1,this.readModule(i-2,0,i,o)&&(l|=1),l<<=1,this.readModule(i-1,0,i,o)&&(l|=1),l<<=1,this.readModule(0,o-4,i,o)&&(l|=1),l<<=1,this.readModule(0,o-3,i,o)&&(l|=1),l<<=1,this.readModule(0,o-2,i,o)&&(l|=1),l<<=1,this.readModule(0,o-1,i,o)&&(l|=1),l<<=1,this.readModule(1,o-1,i,o)&&(l|=1),l}readCorner3(i,o){let l=0;return this.readModule(i-1,0,i,o)&&(l|=1),l<<=1,this.readModule(i-1,o-1,i,o)&&(l|=1),l<<=1,this.readModule(0,o-3,i,o)&&(l|=1),l<<=1,this.readModule(0,o-2,i,o)&&(l|=1),l<<=1,this.readModule(0,o-1,i,o)&&(l|=1),l<<=1,this.readModule(1,o-3,i,o)&&(l|=1),l<<=1,this.readModule(1,o-2,i,o)&&(l|=1),l<<=1,this.readModule(1,o-1,i,o)&&(l|=1),l}readCorner4(i,o){let l=0;return this.readModule(i-3,0,i,o)&&(l|=1),l<<=1,this.readModule(i-2,0,i,o)&&(l|=1),l<<=1,this.readModule(i-1,0,i,o)&&(l|=1),l<<=1,this.readModule(0,o-2,i,o)&&(l|=1),l<<=1,this.readModule(0,o-1,i,o)&&(l|=1),l<<=1,this.readModule(1,o-1,i,o)&&(l|=1),l<<=1,this.readModule(2,o-1,i,o)&&(l|=1),l<<=1,this.readModule(3,o-1,i,o)&&(l|=1),l}extractDataRegion(i){const o=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(i.getHeight()!==o)throw new I("Dimension of bitMatrix must match the version size");const f=this.version.getDataRegionSizeRows(),d=this.version.getDataRegionSizeColumns(),m=o/f|0,y=l/d|0,A=m*f,S=y*d,R=new $e(S,A);for(let L=0;L<m;++L){const k=L*f;for(let G=0;G<y;++G){const te=G*d;for(let re=0;re<f;++re){const ue=L*(f+2)+1+re,ye=k+re;for(let ke=0;ke<d;++ke){const Pe=G*(d+2)+1+ke;if(i.get(Pe,ue)){const Re=te+ke;R.set(Re,ye)}}}}}return R}}class St{constructor(i,o){this.numDataCodewords=i,this.codewords=o}static getDataBlocks(i,o){const l=o.getECBlocks();let f=0;const d=l.getECBlocks();for(let re of d)f+=re.getCount();const m=new Array(f);let y=0;for(let re of d)for(let ue=0;ue<re.getCount();ue++){const ye=re.getDataCodewords(),ke=l.getECCodewords()+ye;m[y++]=new St(ye,new Uint8Array(ke))}const S=m[0].codewords.length-l.getECCodewords(),R=S-1;let L=0;for(let re=0;re<R;re++)for(let ue=0;ue<y;ue++)m[ue].codewords[re]=i[L++];const k=o.getVersionNumber()===24,G=k?8:y;for(let re=0;re<G;re++)m[re].codewords[S-1]=i[L++];const te=m[0].codewords.length;for(let re=S;re<te;re++)for(let ue=0;ue<y;ue++){const ye=k?(ue+8)%y:ue,ke=k&&ye>7?re-1:re;m[ye].codewords[ke]=i[L++]}if(L!==i.length)throw new I;return m}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Ct{constructor(i){this.bytes=i,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(i){if(i<1||i>32||i>this.available())throw new I(""+i);let o=0,l=this.bitOffset,f=this.byteOffset;const d=this.bytes;if(l>0){const m=8-l,y=i<m?i:m,A=m-y,S=255>>8-y<<A;o=(d[f]&S)>>A,i-=y,l+=y,l===8&&(l=0,f++)}if(i>0){for(;i>=8;)o=o<<8|d[f]&255,f++,i-=8;if(i>0){const m=8-i,y=255>>m<<m;o=o<<i|(d[f]&y)>>m,l+=i}}return this.bitOffset=l,this.byteOffset=f,o}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var ft;(function(P){P[P.PAD_ENCODE=0]="PAD_ENCODE",P[P.ASCII_ENCODE=1]="ASCII_ENCODE",P[P.C40_ENCODE=2]="C40_ENCODE",P[P.TEXT_ENCODE=3]="TEXT_ENCODE",P[P.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",P[P.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",P[P.BASE256_ENCODE=6]="BASE256_ENCODE"})(ft||(ft={}));class Zn{static decode(i){const o=new Ct(i),l=new K,f=new K,d=new Array;let m=ft.ASCII_ENCODE;do if(m===ft.ASCII_ENCODE)m=this.decodeAsciiSegment(o,l,f);else{switch(m){case ft.C40_ENCODE:this.decodeC40Segment(o,l);break;case ft.TEXT_ENCODE:this.decodeTextSegment(o,l);break;case ft.ANSIX12_ENCODE:this.decodeAnsiX12Segment(o,l);break;case ft.EDIFACT_ENCODE:this.decodeEdifactSegment(o,l);break;case ft.BASE256_ENCODE:this.decodeBase256Segment(o,l,d);break;default:throw new j}m=ft.ASCII_ENCODE}while(m!==ft.PAD_ENCODE&&o.available()>0);return f.length()>0&&l.append(f.toString()),new tn(i,l.toString(),d.length===0?null:d,null)}static decodeAsciiSegment(i,o,l){let f=!1;do{let d=i.readBits(8);if(d===0)throw new j;if(d<=128)return f&&(d+=128),o.append(String.fromCharCode(d-1)),ft.ASCII_ENCODE;if(d===129)return ft.PAD_ENCODE;if(d<=229){const m=d-130;m<10&&o.append("0"),o.append(""+m)}else switch(d){case 230:return ft.C40_ENCODE;case 231:return ft.BASE256_ENCODE;case 232:o.append("");break;case 233:case 234:break;case 235:f=!0;break;case 236:o.append("[)>05"),l.insert(0,"");break;case 237:o.append("[)>06"),l.insert(0,"");break;case 238:return ft.ANSIX12_ENCODE;case 239:return ft.TEXT_ENCODE;case 240:return ft.EDIFACT_ENCODE;case 241:break;default:if(d!==254||i.available()!==0)throw new j;break}}while(i.available()>0);return ft.ASCII_ENCODE}static decodeC40Segment(i,o){let l=!1;const f=[];let d=0;do{if(i.available()===8)return;const m=i.readBits(8);if(m===254)return;this.parseTwoBytes(m,i.readBits(8),f);for(let y=0;y<3;y++){const A=f[y];switch(d){case 0:if(A<3)d=A+1;else if(A<this.C40_BASIC_SET_CHARS.length){const S=this.C40_BASIC_SET_CHARS[A];l?(o.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):o.append(S)}else throw new j;break;case 1:l?(o.append(String.fromCharCode(A+128)),l=!1):o.append(String.fromCharCode(A)),d=0;break;case 2:if(A<this.C40_SHIFT2_SET_CHARS.length){const S=this.C40_SHIFT2_SET_CHARS[A];l?(o.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):o.append(S)}else switch(A){case 27:o.append("");break;case 30:l=!0;break;default:throw new j}d=0;break;case 3:l?(o.append(String.fromCharCode(A+224)),l=!1):o.append(String.fromCharCode(A+96)),d=0;break;default:throw new j}}}while(i.available()>0)}static decodeTextSegment(i,o){let l=!1,f=[],d=0;do{if(i.available()===8)return;const m=i.readBits(8);if(m===254)return;this.parseTwoBytes(m,i.readBits(8),f);for(let y=0;y<3;y++){const A=f[y];switch(d){case 0:if(A<3)d=A+1;else if(A<this.TEXT_BASIC_SET_CHARS.length){const S=this.TEXT_BASIC_SET_CHARS[A];l?(o.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):o.append(S)}else throw new j;break;case 1:l?(o.append(String.fromCharCode(A+128)),l=!1):o.append(String.fromCharCode(A)),d=0;break;case 2:if(A<this.TEXT_SHIFT2_SET_CHARS.length){const S=this.TEXT_SHIFT2_SET_CHARS[A];l?(o.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):o.append(S)}else switch(A){case 27:o.append("");break;case 30:l=!0;break;default:throw new j}d=0;break;case 3:if(A<this.TEXT_SHIFT3_SET_CHARS.length){const S=this.TEXT_SHIFT3_SET_CHARS[A];l?(o.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):o.append(S),d=0}else throw new j;break;default:throw new j}}}while(i.available()>0)}static decodeAnsiX12Segment(i,o){const l=[];do{if(i.available()===8)return;const f=i.readBits(8);if(f===254)return;this.parseTwoBytes(f,i.readBits(8),l);for(let d=0;d<3;d++){const m=l[d];switch(m){case 0:o.append("\r");break;case 1:o.append("*");break;case 2:o.append(">");break;case 3:o.append(" ");break;default:if(m<14)o.append(String.fromCharCode(m+44));else if(m<40)o.append(String.fromCharCode(m+51));else throw new j;break}}}while(i.available()>0)}static parseTwoBytes(i,o,l){let f=(i<<8)+o-1,d=Math.floor(f/1600);l[0]=d,f-=d*1600,d=Math.floor(f/40),l[1]=d,l[2]=f-d*40}static decodeEdifactSegment(i,o){do{if(i.available()<=16)return;for(let l=0;l<4;l++){let f=i.readBits(6);if(f===31){const d=8-i.getBitOffset();d!==8&&i.readBits(d);return}(f&32)===0&&(f|=64),o.append(String.fromCharCode(f))}}while(i.available()>0)}static decodeBase256Segment(i,o,l){let f=1+i.getByteOffset();const d=this.unrandomize255State(i.readBits(8),f++);let m;if(d===0?m=i.available()/8|0:d<250?m=d:m=250*(d-249)+this.unrandomize255State(i.readBits(8),f++),m<0)throw new j;const y=new Uint8Array(m);for(let A=0;A<m;A++){if(i.available()<8)throw new j;y[A]=this.unrandomize255State(i.readBits(8),f++)}l.push(y);try{o.append(Z.decode(y,J.ISO88591))}catch(A){throw new ir("Platform does not support required encoding: "+A.message)}}static unrandomize255State(i,o){const l=149*o%255+1,f=i-l;return f>=0?f:f+256}}Zn.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Zn.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Zn.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Zn.TEXT_SHIFT2_SET_CHARS=Zn.C40_SHIFT2_SET_CHARS,Zn.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class oa{constructor(){this.rsDecoder=new Qr(At.DATA_MATRIX_FIELD_256)}decode(i){const o=new Ke(i),l=o.getVersion(),f=o.readCodewords(),d=St.getDataBlocks(f,l);let m=0;for(let S of d)m+=S.getNumDataCodewords();const y=new Uint8Array(m),A=d.length;for(let S=0;S<A;S++){const R=d[S],L=R.getCodewords(),k=R.getNumDataCodewords();this.correctErrors(L,k);for(let G=0;G<k;G++)y[G*A+S]=L[G]}return Zn.decode(y)}correctErrors(i,o){const l=new Int32Array(i);try{this.rsDecoder.decode(l,i.length-o)}catch{throw new B}for(let f=0;f<o;f++)i[f]=l[f]}}class it{constructor(i){this.image=i,this.rectangleDetector=new mn(this.image)}detect(){const i=this.rectangleDetector.detect();let o=this.detectSolid1(i);if(o=this.detectSolid2(o),o[3]=this.correctTopRight(o),!o[3])throw new fe;o=this.shiftToModuleCenter(o);const l=o[0],f=o[1],d=o[2],m=o[3];let y=this.transitionsBetween(l,m)+1,A=this.transitionsBetween(d,m)+1;(y&1)===1&&(y+=1),(A&1)===1&&(A+=1),4*y<7*A&&4*A<7*y&&(y=A=Math.max(y,A));let S=it.sampleGrid(this.image,l,f,d,m,y,A);return new As(S,[l,f,d,m])}static shiftPoint(i,o,l){let f=(o.getX()-i.getX())/(l+1),d=(o.getY()-i.getY())/(l+1);return new He(i.getX()+f,i.getY()+d)}static moveAway(i,o,l){let f=i.getX(),d=i.getY();return f<o?f-=1:f+=1,d<l?d-=1:d+=1,new He(f,d)}detectSolid1(i){let o=i[0],l=i[1],f=i[3],d=i[2],m=this.transitionsBetween(o,l),y=this.transitionsBetween(l,f),A=this.transitionsBetween(f,d),S=this.transitionsBetween(d,o),R=m,L=[d,o,l,f];return R>y&&(R=y,L[0]=o,L[1]=l,L[2]=f,L[3]=d),R>A&&(R=A,L[0]=l,L[1]=f,L[2]=d,L[3]=o),R>S&&(L[0]=f,L[1]=d,L[2]=o,L[3]=l),L}detectSolid2(i){let o=i[0],l=i[1],f=i[2],d=i[3],m=this.transitionsBetween(o,d),y=it.shiftPoint(l,f,(m+1)*4),A=it.shiftPoint(f,l,(m+1)*4),S=this.transitionsBetween(y,o),R=this.transitionsBetween(A,d);return S<R?(i[0]=o,i[1]=l,i[2]=f,i[3]=d):(i[0]=l,i[1]=f,i[2]=d,i[3]=o),i}correctTopRight(i){let o=i[0],l=i[1],f=i[2],d=i[3],m=this.transitionsBetween(o,d),y=this.transitionsBetween(l,d),A=it.shiftPoint(o,l,(y+1)*4),S=it.shiftPoint(f,l,(m+1)*4);m=this.transitionsBetween(A,d),y=this.transitionsBetween(S,d);let R=new He(d.getX()+(f.getX()-l.getX())/(m+1),d.getY()+(f.getY()-l.getY())/(m+1)),L=new He(d.getX()+(o.getX()-l.getX())/(y+1),d.getY()+(o.getY()-l.getY())/(y+1));if(!this.isValid(R))return this.isValid(L)?L:null;if(!this.isValid(L))return R;let k=this.transitionsBetween(A,R)+this.transitionsBetween(S,R),G=this.transitionsBetween(A,L)+this.transitionsBetween(S,L);return k>G?R:L}shiftToModuleCenter(i){let o=i[0],l=i[1],f=i[2],d=i[3],m=this.transitionsBetween(o,d)+1,y=this.transitionsBetween(f,d)+1,A=it.shiftPoint(o,l,y*4),S=it.shiftPoint(f,l,m*4);m=this.transitionsBetween(A,d)+1,y=this.transitionsBetween(S,d)+1,(m&1)===1&&(m+=1),(y&1)===1&&(y+=1);let R=(o.getX()+l.getX()+f.getX()+d.getX())/4,L=(o.getY()+l.getY()+f.getY()+d.getY())/4;o=it.moveAway(o,R,L),l=it.moveAway(l,R,L),f=it.moveAway(f,R,L),d=it.moveAway(d,R,L);let k,G;return A=it.shiftPoint(o,l,y*4),A=it.shiftPoint(A,d,m*4),k=it.shiftPoint(l,o,y*4),k=it.shiftPoint(k,f,m*4),S=it.shiftPoint(f,d,y*4),S=it.shiftPoint(S,l,m*4),G=it.shiftPoint(d,f,y*4),G=it.shiftPoint(G,o,m*4),[A,k,S,G]}isValid(i){return i.getX()>=0&&i.getX()<this.image.getWidth()&&i.getY()>0&&i.getY()<this.image.getHeight()}static sampleGrid(i,o,l,f,d,m,y){return sr.getInstance().sampleGrid(i,m,y,.5,.5,m-.5,.5,m-.5,y-.5,.5,y-.5,o.getX(),o.getY(),d.getX(),d.getY(),f.getX(),f.getY(),l.getX(),l.getY())}transitionsBetween(i,o){let l=Math.trunc(i.getX()),f=Math.trunc(i.getY()),d=Math.trunc(o.getX()),m=Math.trunc(o.getY()),y=Math.abs(m-f)>Math.abs(d-l);if(y){let re=l;l=f,f=re,re=d,d=m,m=re}let A=Math.abs(d-l),S=Math.abs(m-f),R=-A/2,L=f<m?1:-1,k=l<d?1:-1,G=0,te=this.image.get(y?f:l,y?l:f);for(let re=l,ue=f;re!==d;re+=k){let ye=this.image.get(y?ue:re,y?re:ue);if(ye!==te&&(G++,te=ye),R+=S,R>0){if(ue===m)break;ue+=L,R-=A}}return G}}class Bn{constructor(){this.decoder=new oa}decode(i,o=null){let l,f;if(o!=null&&o.has(Oe.PURE_BARCODE)){const S=Bn.extractPureBits(i.getBlackMatrix());l=this.decoder.decode(S),f=Bn.NO_POINTS}else{const S=new it(i.getBlackMatrix()).detect();l=this.decoder.decode(S.getBits()),f=S.getPoints()}const d=l.getRawBytes(),m=new je(l.getText(),d,8*d.length,f,Le.DATA_MATRIX,$.currentTimeMillis()),y=l.getByteSegments();y!=null&&m.putMetadata(vt.BYTE_SEGMENTS,y);const A=l.getECLevel();return A!=null&&m.putMetadata(vt.ERROR_CORRECTION_LEVEL,A),m}reset(){}static extractPureBits(i){const o=i.getTopLeftOnBit(),l=i.getBottomRightOnBit();if(o==null||l==null)throw new fe;const f=this.moduleSize(o,i);let d=o[1];const m=l[1];let y=o[0];const S=(l[0]-y+1)/f,R=(m-d+1)/f;if(S<=0||R<=0)throw new fe;const L=f/2;d+=L,y+=L;const k=new $e(S,R);for(let G=0;G<R;G++){const te=d+G*f;for(let re=0;re<S;re++)i.get(y+re*f,te)&&k.set(re,G)}return k}static moduleSize(i,o){const l=o.getWidth();let f=i[0];const d=i[1];for(;f<l&&o.get(f,d);)f++;if(f===l)throw new fe;const m=f-i[0];if(m===0)throw new fe;return m}}Bn.NO_POINTS=[];class gi extends Ve{constructor(i=500){super(new Bn,i)}}var Hn;(function(P){P[P.L=0]="L",P[P.M=1]="M",P[P.Q=2]="Q",P[P.H=3]="H"})(Hn||(Hn={}));class It{constructor(i,o,l){this.value=i,this.stringValue=o,this.bits=l,It.FOR_BITS.set(l,this),It.FOR_VALUE.set(i,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(i){switch(i){case"L":return It.L;case"M":return It.M;case"Q":return It.Q;case"H":return It.H;default:throw new C(i+"not available")}}toString(){return this.stringValue}equals(i){if(!(i instanceof It))return!1;const o=i;return this.value===o.value}static forBits(i){if(i<0||i>=It.FOR_BITS.size)throw new I;return It.FOR_BITS.get(i)}}It.FOR_BITS=new Map,It.FOR_VALUE=new Map,It.L=new It(Hn.L,"L",1),It.M=new It(Hn.M,"M",0),It.Q=new It(Hn.Q,"Q",3),It.H=new It(Hn.H,"H",2);class Gn{constructor(i){this.errorCorrectionLevel=It.forBits(i>>3&3),this.dataMask=i&7}static numBitsDiffering(i,o){return Q.bitCount(i^o)}static decodeFormatInformation(i,o){const l=Gn.doDecodeFormatInformation(i,o);return l!==null?l:Gn.doDecodeFormatInformation(i^Gn.FORMAT_INFO_MASK_QR,o^Gn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(i,o){let l=Number.MAX_SAFE_INTEGER,f=0;for(const d of Gn.FORMAT_INFO_DECODE_LOOKUP){const m=d[0];if(m===i||m===o)return new Gn(d[1]);let y=Gn.numBitsDiffering(i,m);y<l&&(f=d[1],l=y),i!==o&&(y=Gn.numBitsDiffering(o,m),y<l&&(f=d[1],l=y))}return l<=3?new Gn(f):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(i){if(!(i instanceof Gn))return!1;const o=i;return this.errorCorrectionLevel===o.errorCorrectionLevel&&this.dataMask===o.dataMask}}Gn.FORMAT_INFO_MASK_QR=21522,Gn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class he{constructor(i,...o){this.ecCodewordsPerBlock=i,this.ecBlocks=o}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let i=0;const o=this.ecBlocks;for(const l of o)i+=l.getCount();return i}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class H{constructor(i,o){this.count=i,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Xe{constructor(i,o,...l){this.versionNumber=i,this.alignmentPatternCenters=o,this.ecBlocks=l;let f=0;const d=l[0].getECCodewordsPerBlock(),m=l[0].getECBlocks();for(const y of m)f+=y.getCount()*(y.getDataCodewords()+d);this.totalCodewords=f}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(i){return this.ecBlocks[i.getValue()]}static getProvisionalVersionForDimension(i){if(i%4!==1)throw new j;try{return this.getVersionForNumber((i-17)/4)}catch{throw new j}}static getVersionForNumber(i){if(i<1||i>40)throw new I;return Xe.VERSIONS[i-1]}static decodeVersionInformation(i){let o=Number.MAX_SAFE_INTEGER,l=0;for(let f=0;f<Xe.VERSION_DECODE_INFO.length;f++){const d=Xe.VERSION_DECODE_INFO[f];if(d===i)return Xe.getVersionForNumber(f+7);const m=Gn.numBitsDiffering(i,d);m<o&&(l=f+7,o=m)}return o<=3?Xe.getVersionForNumber(l):null}buildFunctionPattern(){const i=this.getDimensionForVersion(),o=new $e(i);o.setRegion(0,0,9,9),o.setRegion(i-8,0,8,9),o.setRegion(0,i-8,9,8);const l=this.alignmentPatternCenters.length;for(let f=0;f<l;f++){const d=this.alignmentPatternCenters[f]-2;for(let m=0;m<l;m++)f===0&&(m===0||m===l-1)||f===l-1&&m===0||o.setRegion(this.alignmentPatternCenters[m]-2,d,5,5)}return o.setRegion(6,9,1,i-17),o.setRegion(9,6,i-17,1),this.versionNumber>6&&(o.setRegion(i-11,0,3,6),o.setRegion(0,i-11,6,3)),o}toString(){return""+this.versionNumber}}Xe.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Xe.VERSIONS=[new Xe(1,new Int32Array(0),new he(7,new H(1,19)),new he(10,new H(1,16)),new he(13,new H(1,13)),new he(17,new H(1,9))),new Xe(2,Int32Array.from([6,18]),new he(10,new H(1,34)),new he(16,new H(1,28)),new he(22,new H(1,22)),new he(28,new H(1,16))),new Xe(3,Int32Array.from([6,22]),new he(15,new H(1,55)),new he(26,new H(1,44)),new he(18,new H(2,17)),new he(22,new H(2,13))),new Xe(4,Int32Array.from([6,26]),new he(20,new H(1,80)),new he(18,new H(2,32)),new he(26,new H(2,24)),new he(16,new H(4,9))),new Xe(5,Int32Array.from([6,30]),new he(26,new H(1,108)),new he(24,new H(2,43)),new he(18,new H(2,15),new H(2,16)),new he(22,new H(2,11),new H(2,12))),new Xe(6,Int32Array.from([6,34]),new he(18,new H(2,68)),new he(16,new H(4,27)),new he(24,new H(4,19)),new he(28,new H(4,15))),new Xe(7,Int32Array.from([6,22,38]),new he(20,new H(2,78)),new he(18,new H(4,31)),new he(18,new H(2,14),new H(4,15)),new he(26,new H(4,13),new H(1,14))),new Xe(8,Int32Array.from([6,24,42]),new he(24,new H(2,97)),new he(22,new H(2,38),new H(2,39)),new he(22,new H(4,18),new H(2,19)),new he(26,new H(4,14),new H(2,15))),new Xe(9,Int32Array.from([6,26,46]),new he(30,new H(2,116)),new he(22,new H(3,36),new H(2,37)),new he(20,new H(4,16),new H(4,17)),new he(24,new H(4,12),new H(4,13))),new Xe(10,Int32Array.from([6,28,50]),new he(18,new H(2,68),new H(2,69)),new he(26,new H(4,43),new H(1,44)),new he(24,new H(6,19),new H(2,20)),new he(28,new H(6,15),new H(2,16))),new Xe(11,Int32Array.from([6,30,54]),new he(20,new H(4,81)),new he(30,new H(1,50),new H(4,51)),new he(28,new H(4,22),new H(4,23)),new he(24,new H(3,12),new H(8,13))),new Xe(12,Int32Array.from([6,32,58]),new he(24,new H(2,92),new H(2,93)),new he(22,new H(6,36),new H(2,37)),new he(26,new H(4,20),new H(6,21)),new he(28,new H(7,14),new H(4,15))),new Xe(13,Int32Array.from([6,34,62]),new he(26,new H(4,107)),new he(22,new H(8,37),new H(1,38)),new he(24,new H(8,20),new H(4,21)),new he(22,new H(12,11),new H(4,12))),new Xe(14,Int32Array.from([6,26,46,66]),new he(30,new H(3,115),new H(1,116)),new he(24,new H(4,40),new H(5,41)),new he(20,new H(11,16),new H(5,17)),new he(24,new H(11,12),new H(5,13))),new Xe(15,Int32Array.from([6,26,48,70]),new he(22,new H(5,87),new H(1,88)),new he(24,new H(5,41),new H(5,42)),new he(30,new H(5,24),new H(7,25)),new he(24,new H(11,12),new H(7,13))),new Xe(16,Int32Array.from([6,26,50,74]),new he(24,new H(5,98),new H(1,99)),new he(28,new H(7,45),new H(3,46)),new he(24,new H(15,19),new H(2,20)),new he(30,new H(3,15),new H(13,16))),new Xe(17,Int32Array.from([6,30,54,78]),new he(28,new H(1,107),new H(5,108)),new he(28,new H(10,46),new H(1,47)),new he(28,new H(1,22),new H(15,23)),new he(28,new H(2,14),new H(17,15))),new Xe(18,Int32Array.from([6,30,56,82]),new he(30,new H(5,120),new H(1,121)),new he(26,new H(9,43),new H(4,44)),new he(28,new H(17,22),new H(1,23)),new he(28,new H(2,14),new H(19,15))),new Xe(19,Int32Array.from([6,30,58,86]),new he(28,new H(3,113),new H(4,114)),new he(26,new H(3,44),new H(11,45)),new he(26,new H(17,21),new H(4,22)),new he(26,new H(9,13),new H(16,14))),new Xe(20,Int32Array.from([6,34,62,90]),new he(28,new H(3,107),new H(5,108)),new he(26,new H(3,41),new H(13,42)),new he(30,new H(15,24),new H(5,25)),new he(28,new H(15,15),new H(10,16))),new Xe(21,Int32Array.from([6,28,50,72,94]),new he(28,new H(4,116),new H(4,117)),new he(26,new H(17,42)),new he(28,new H(17,22),new H(6,23)),new he(30,new H(19,16),new H(6,17))),new Xe(22,Int32Array.from([6,26,50,74,98]),new he(28,new H(2,111),new H(7,112)),new he(28,new H(17,46)),new he(30,new H(7,24),new H(16,25)),new he(24,new H(34,13))),new Xe(23,Int32Array.from([6,30,54,78,102]),new he(30,new H(4,121),new H(5,122)),new he(28,new H(4,47),new H(14,48)),new he(30,new H(11,24),new H(14,25)),new he(30,new H(16,15),new H(14,16))),new Xe(24,Int32Array.from([6,28,54,80,106]),new he(30,new H(6,117),new H(4,118)),new he(28,new H(6,45),new H(14,46)),new he(30,new H(11,24),new H(16,25)),new he(30,new H(30,16),new H(2,17))),new Xe(25,Int32Array.from([6,32,58,84,110]),new he(26,new H(8,106),new H(4,107)),new he(28,new H(8,47),new H(13,48)),new he(30,new H(7,24),new H(22,25)),new he(30,new H(22,15),new H(13,16))),new Xe(26,Int32Array.from([6,30,58,86,114]),new he(28,new H(10,114),new H(2,115)),new he(28,new H(19,46),new H(4,47)),new he(28,new H(28,22),new H(6,23)),new he(30,new H(33,16),new H(4,17))),new Xe(27,Int32Array.from([6,34,62,90,118]),new he(30,new H(8,122),new H(4,123)),new he(28,new H(22,45),new H(3,46)),new he(30,new H(8,23),new H(26,24)),new he(30,new H(12,15),new H(28,16))),new Xe(28,Int32Array.from([6,26,50,74,98,122]),new he(30,new H(3,117),new H(10,118)),new he(28,new H(3,45),new H(23,46)),new he(30,new H(4,24),new H(31,25)),new he(30,new H(11,15),new H(31,16))),new Xe(29,Int32Array.from([6,30,54,78,102,126]),new he(30,new H(7,116),new H(7,117)),new he(28,new H(21,45),new H(7,46)),new he(30,new H(1,23),new H(37,24)),new he(30,new H(19,15),new H(26,16))),new Xe(30,Int32Array.from([6,26,52,78,104,130]),new he(30,new H(5,115),new H(10,116)),new he(28,new H(19,47),new H(10,48)),new he(30,new H(15,24),new H(25,25)),new he(30,new H(23,15),new H(25,16))),new Xe(31,Int32Array.from([6,30,56,82,108,134]),new he(30,new H(13,115),new H(3,116)),new he(28,new H(2,46),new H(29,47)),new he(30,new H(42,24),new H(1,25)),new he(30,new H(23,15),new H(28,16))),new Xe(32,Int32Array.from([6,34,60,86,112,138]),new he(30,new H(17,115)),new he(28,new H(10,46),new H(23,47)),new he(30,new H(10,24),new H(35,25)),new he(30,new H(19,15),new H(35,16))),new Xe(33,Int32Array.from([6,30,58,86,114,142]),new he(30,new H(17,115),new H(1,116)),new he(28,new H(14,46),new H(21,47)),new he(30,new H(29,24),new H(19,25)),new he(30,new H(11,15),new H(46,16))),new Xe(34,Int32Array.from([6,34,62,90,118,146]),new he(30,new H(13,115),new H(6,116)),new he(28,new H(14,46),new H(23,47)),new he(30,new H(44,24),new H(7,25)),new he(30,new H(59,16),new H(1,17))),new Xe(35,Int32Array.from([6,30,54,78,102,126,150]),new he(30,new H(12,121),new H(7,122)),new he(28,new H(12,47),new H(26,48)),new he(30,new H(39,24),new H(14,25)),new he(30,new H(22,15),new H(41,16))),new Xe(36,Int32Array.from([6,24,50,76,102,128,154]),new he(30,new H(6,121),new H(14,122)),new he(28,new H(6,47),new H(34,48)),new he(30,new H(46,24),new H(10,25)),new he(30,new H(2,15),new H(64,16))),new Xe(37,Int32Array.from([6,28,54,80,106,132,158]),new he(30,new H(17,122),new H(4,123)),new he(28,new H(29,46),new H(14,47)),new he(30,new H(49,24),new H(10,25)),new he(30,new H(24,15),new H(46,16))),new Xe(38,Int32Array.from([6,32,58,84,110,136,162]),new he(30,new H(4,122),new H(18,123)),new he(28,new H(13,46),new H(32,47)),new he(30,new H(48,24),new H(14,25)),new he(30,new H(42,15),new H(32,16))),new Xe(39,Int32Array.from([6,26,54,82,110,138,166]),new he(30,new H(20,117),new H(4,118)),new he(28,new H(40,47),new H(7,48)),new he(30,new H(43,24),new H(22,25)),new he(30,new H(10,15),new H(67,16))),new Xe(40,Int32Array.from([6,30,58,86,114,142,170]),new he(30,new H(19,118),new H(6,119)),new he(28,new H(18,47),new H(31,48)),new he(30,new H(34,24),new H(34,25)),new he(30,new H(20,15),new H(61,16)))];var qn;(function(P){P[P.DATA_MASK_000=0]="DATA_MASK_000",P[P.DATA_MASK_001=1]="DATA_MASK_001",P[P.DATA_MASK_010=2]="DATA_MASK_010",P[P.DATA_MASK_011=3]="DATA_MASK_011",P[P.DATA_MASK_100=4]="DATA_MASK_100",P[P.DATA_MASK_101=5]="DATA_MASK_101",P[P.DATA_MASK_110=6]="DATA_MASK_110",P[P.DATA_MASK_111=7]="DATA_MASK_111"})(qn||(qn={}));class or{constructor(i,o){this.value=i,this.isMasked=o}unmaskBitMatrix(i,o){for(let l=0;l<o;l++)for(let f=0;f<o;f++)this.isMasked(l,f)&&i.flip(f,l)}}or.values=new Map([[qn.DATA_MASK_000,new or(qn.DATA_MASK_000,(P,i)=>(P+i&1)===0)],[qn.DATA_MASK_001,new or(qn.DATA_MASK_001,(P,i)=>(P&1)===0)],[qn.DATA_MASK_010,new or(qn.DATA_MASK_010,(P,i)=>i%3===0)],[qn.DATA_MASK_011,new or(qn.DATA_MASK_011,(P,i)=>(P+i)%3===0)],[qn.DATA_MASK_100,new or(qn.DATA_MASK_100,(P,i)=>(Math.floor(P/2)+Math.floor(i/3)&1)===0)],[qn.DATA_MASK_101,new or(qn.DATA_MASK_101,(P,i)=>P*i%6===0)],[qn.DATA_MASK_110,new or(qn.DATA_MASK_110,(P,i)=>P*i%6<3)],[qn.DATA_MASK_111,new or(qn.DATA_MASK_111,(P,i)=>(P+i+P*i%3&1)===0)]]);class ni{constructor(i){const o=i.getHeight();if(o<21||(o&3)!==1)throw new j;this.bitMatrix=i}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let i=0;for(let d=0;d<6;d++)i=this.copyBit(d,8,i);i=this.copyBit(7,8,i),i=this.copyBit(8,8,i),i=this.copyBit(8,7,i);for(let d=5;d>=0;d--)i=this.copyBit(8,d,i);const o=this.bitMatrix.getHeight();let l=0;const f=o-7;for(let d=o-1;d>=f;d--)l=this.copyBit(8,d,l);for(let d=o-8;d<o;d++)l=this.copyBit(d,8,l);if(this.parsedFormatInfo=Gn.decodeFormatInformation(i,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new j}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const i=this.bitMatrix.getHeight(),o=Math.floor((i-17)/4);if(o<=6)return Xe.getVersionForNumber(o);let l=0;const f=i-11;for(let m=5;m>=0;m--)for(let y=i-9;y>=f;y--)l=this.copyBit(y,m,l);let d=Xe.decodeVersionInformation(l);if(d!==null&&d.getDimensionForVersion()===i)return this.parsedVersion=d,d;l=0;for(let m=5;m>=0;m--)for(let y=i-9;y>=f;y--)l=this.copyBit(m,y,l);if(d=Xe.decodeVersionInformation(l),d!==null&&d.getDimensionForVersion()===i)return this.parsedVersion=d,d;throw new j}copyBit(i,o,l){return(this.isMirror?this.bitMatrix.get(o,i):this.bitMatrix.get(i,o))?l<<1|1:l<<1}readCodewords(){const i=this.readFormatInformation(),o=this.readVersion(),l=or.values.get(i.getDataMask()),f=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,f);const d=o.buildFunctionPattern();let m=!0;const y=new Uint8Array(o.getTotalCodewords());let A=0,S=0,R=0;for(let L=f-1;L>0;L-=2){L===6&&L--;for(let k=0;k<f;k++){const G=m?f-1-k:k;for(let te=0;te<2;te++)d.get(L-te,G)||(R++,S<<=1,this.bitMatrix.get(L-te,G)&&(S|=1),R===8&&(y[A++]=S,R=0,S=0))}m=!m}if(A!==o.getTotalCodewords())throw new j;return y}remask(){if(this.parsedFormatInfo===null)return;const i=or.values[this.parsedFormatInfo.getDataMask()],o=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,o)}setMirror(i){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=i}mirror(){const i=this.bitMatrix;for(let o=0,l=i.getWidth();o<l;o++)for(let f=o+1,d=i.getHeight();f<d;f++)i.get(o,f)!==i.get(f,o)&&(i.flip(f,o),i.flip(o,f))}}class Ka{constructor(i,o){this.numDataCodewords=i,this.codewords=o}static getDataBlocks(i,o,l){if(i.length!==o.getTotalCodewords())throw new I;const f=o.getECBlocksForLevel(l);let d=0;const m=f.getECBlocks();for(const te of m)d+=te.getCount();const y=new Array(d);let A=0;for(const te of m)for(let re=0;re<te.getCount();re++){const ue=te.getDataCodewords(),ye=f.getECCodewordsPerBlock()+ue;y[A++]=new Ka(ue,new Uint8Array(ye))}const S=y[0].codewords.length;let R=y.length-1;for(;R>=0&&y[R].codewords.length!==S;)R--;R++;const L=S-f.getECCodewordsPerBlock();let k=0;for(let te=0;te<L;te++)for(let re=0;re<A;re++)y[re].codewords[te]=i[k++];for(let te=R;te<A;te++)y[te].codewords[L]=i[k++];const G=y[0].codewords.length;for(let te=L;te<G;te++)for(let re=0;re<A;re++){const ue=re<R?te:te+1;y[re].codewords[ue]=i[k++]}return y}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Mr;(function(P){P[P.TERMINATOR=0]="TERMINATOR",P[P.NUMERIC=1]="NUMERIC",P[P.ALPHANUMERIC=2]="ALPHANUMERIC",P[P.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",P[P.BYTE=4]="BYTE",P[P.ECI=5]="ECI",P[P.KANJI=6]="KANJI",P[P.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",P[P.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",P[P.HANZI=9]="HANZI"})(Mr||(Mr={}));class Je{constructor(i,o,l,f){this.value=i,this.stringValue=o,this.characterCountBitsForVersions=l,this.bits=f,Je.FOR_BITS.set(f,this),Je.FOR_VALUE.set(i,this)}static forBits(i){const o=Je.FOR_BITS.get(i);if(o===void 0)throw new I;return o}getCharacterCountBits(i){const o=i.getVersionNumber();let l;return o<=9?l=0:o<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(i){if(!(i instanceof Je))return!1;const o=i;return this.value===o.value}toString(){return this.stringValue}}Je.FOR_BITS=new Map,Je.FOR_VALUE=new Map,Je.TERMINATOR=new Je(Mr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Je.NUMERIC=new Je(Mr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Je.ALPHANUMERIC=new Je(Mr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Je.STRUCTURED_APPEND=new Je(Mr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Je.BYTE=new Je(Mr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Je.ECI=new Je(Mr.ECI,"ECI",Int32Array.from([0,0,0]),7),Je.KANJI=new Je(Mr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Je.FNC1_FIRST_POSITION=new Je(Mr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Je.FNC1_SECOND_POSITION=new Je(Mr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Je.HANZI=new Je(Mr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class un{static decode(i,o,l,f){const d=new Ct(i);let m=new K;const y=new Array;let A=-1,S=-1;try{let R=null,L=!1,k;do{if(d.available()<4)k=Je.TERMINATOR;else{const G=d.readBits(4);k=Je.forBits(G)}switch(k){case Je.TERMINATOR:break;case Je.FNC1_FIRST_POSITION:case Je.FNC1_SECOND_POSITION:L=!0;break;case Je.STRUCTURED_APPEND:if(d.available()<16)throw new j;A=d.readBits(8),S=d.readBits(8);break;case Je.ECI:const G=un.parseECIValue(d);if(R=V.getCharacterSetECIByValue(G),R===null)throw new j;break;case Je.HANZI:const te=d.readBits(4),re=d.readBits(k.getCharacterCountBits(o));te===un.GB2312_SUBSET&&un.decodeHanziSegment(d,m,re);break;default:const ue=d.readBits(k.getCharacterCountBits(o));switch(k){case Je.NUMERIC:un.decodeNumericSegment(d,m,ue);break;case Je.ALPHANUMERIC:un.decodeAlphanumericSegment(d,m,ue,L);break;case Je.BYTE:un.decodeByteSegment(d,m,ue,R,y,f);break;case Je.KANJI:un.decodeKanjiSegment(d,m,ue);break;default:throw new j}break}}while(k!==Je.TERMINATOR)}catch{throw new j}return new tn(i,m.toString(),y.length===0?null:y,l===null?null:l.toString(),A,S)}static decodeHanziSegment(i,o,l){if(l*13>i.available())throw new j;const f=new Uint8Array(2*l);let d=0;for(;l>0;){const m=i.readBits(13);let y=m/96<<8&4294967295|m%96;y<959?y+=41377:y+=42657,f[d]=y>>8&255,f[d+1]=y&255,d+=2,l--}try{o.append(Z.decode(f,J.GB2312))}catch(m){throw new j(m)}}static decodeKanjiSegment(i,o,l){if(l*13>i.available())throw new j;const f=new Uint8Array(2*l);let d=0;for(;l>0;){const m=i.readBits(13);let y=m/192<<8&4294967295|m%192;y<7936?y+=33088:y+=49472,f[d]=y>>8,f[d+1]=y,d+=2,l--}try{o.append(Z.decode(f,J.SHIFT_JIS))}catch(m){throw new j(m)}}static decodeByteSegment(i,o,l,f,d,m){if(8*l>i.available())throw new j;const y=new Uint8Array(l);for(let S=0;S<l;S++)y[S]=i.readBits(8);let A;f===null?A=J.guessEncoding(y,m):A=f.getName();try{o.append(Z.decode(y,A))}catch(S){throw new j(S)}d.push(y)}static toAlphaNumericChar(i){if(i>=un.ALPHANUMERIC_CHARS.length)throw new j;return un.ALPHANUMERIC_CHARS[i]}static decodeAlphanumericSegment(i,o,l,f){const d=o.length();for(;l>1;){if(i.available()<11)throw new j;const m=i.readBits(11);o.append(un.toAlphaNumericChar(Math.floor(m/45))),o.append(un.toAlphaNumericChar(m%45)),l-=2}if(l===1){if(i.available()<6)throw new j;o.append(un.toAlphaNumericChar(i.readBits(6)))}if(f)for(let m=d;m<o.length();m++)o.charAt(m)==="%"&&(m<o.length()-1&&o.charAt(m+1)==="%"?o.deleteCharAt(m+1):o.setCharAt(m,""))}static decodeNumericSegment(i,o,l){for(;l>=3;){if(i.available()<10)throw new j;const f=i.readBits(10);if(f>=1e3)throw new j;o.append(un.toAlphaNumericChar(Math.floor(f/100))),o.append(un.toAlphaNumericChar(Math.floor(f/10)%10)),o.append(un.toAlphaNumericChar(f%10)),l-=3}if(l===2){if(i.available()<7)throw new j;const f=i.readBits(7);if(f>=100)throw new j;o.append(un.toAlphaNumericChar(Math.floor(f/10))),o.append(un.toAlphaNumericChar(f%10))}else if(l===1){if(i.available()<4)throw new j;const f=i.readBits(4);if(f>=10)throw new j;o.append(un.toAlphaNumericChar(f))}}static parseECIValue(i){const o=i.readBits(8);if((o&128)===0)return o&127;if((o&192)===128){const l=i.readBits(8);return(o&63)<<8&4294967295|l}if((o&224)===192){const l=i.readBits(16);return(o&31)<<16&4294967295|l}throw new j}}un.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",un.GB2312_SUBSET=1;class Jo{constructor(i){this.mirrored=i}isMirrored(){return this.mirrored}applyMirroredCorrection(i){if(!this.mirrored||i===null||i.length<3)return;const o=i[0];i[0]=i[2],i[2]=o}}class ks{constructor(){this.rsDecoder=new Qr(At.QR_CODE_FIELD_256)}decodeBooleanArray(i,o){return this.decodeBitMatrix($e.parseFromBooleanArray(i),o)}decodeBitMatrix(i,o){const l=new ni(i);let f=null;try{return this.decodeBitMatrixParser(l,o)}catch(d){f=d}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const d=this.decodeBitMatrixParser(l,o);return d.setOther(new Jo(!0)),d}catch(d){throw f!==null?f:d}}decodeBitMatrixParser(i,o){const l=i.readVersion(),f=i.readFormatInformation().getErrorCorrectionLevel(),d=i.readCodewords(),m=Ka.getDataBlocks(d,l,f);let y=0;for(const R of m)y+=R.getNumDataCodewords();const A=new Uint8Array(y);let S=0;for(const R of m){const L=R.getCodewords(),k=R.getNumDataCodewords();this.correctErrors(L,k);for(let G=0;G<k;G++)A[S++]=L[G]}return un.decode(A,l,f,o)}correctErrors(i,o){const l=new Int32Array(i);try{this.rsDecoder.decode(l,i.length-o)}catch{throw new B}for(let f=0;f<o;f++)i[f]=l[f]}}class Bs extends He{constructor(i,o,l){super(i,o),this.estimatedModuleSize=l}aboutEquals(i,o,l){if(Math.abs(o-this.getY())<=i&&Math.abs(l-this.getX())<=i){const f=Math.abs(i-this.estimatedModuleSize);return f<=1||f<=this.estimatedModuleSize}return!1}combineEstimate(i,o,l){const f=(this.getX()+o)/2,d=(this.getY()+i)/2,m=(this.estimatedModuleSize+l)/2;return new Bs(f,d,m)}}class ri{constructor(i,o,l,f,d,m,y){this.image=i,this.startX=o,this.startY=l,this.width=f,this.height=d,this.moduleSize=m,this.resultPointCallback=y,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const i=this.startX,o=this.height,l=this.width,f=i+l,d=this.startY+o/2,m=new Int32Array(3),y=this.image;for(let A=0;A<o;A++){const S=d+((A&1)===0?Math.floor((A+1)/2):-Math.floor((A+1)/2));m[0]=0,m[1]=0,m[2]=0;let R=i;for(;R<f&&!y.get(R,S);)R++;let L=0;for(;R<f;){if(y.get(R,S))if(L===1)m[1]++;else if(L===2){if(this.foundPatternCross(m)){const k=this.handlePossibleCenter(m,S,R);if(k!==null)return k}m[0]=m[2],m[1]=1,m[2]=0,L=1}else m[++L]++;else L===1&&L++,m[L]++;R++}if(this.foundPatternCross(m)){const k=this.handlePossibleCenter(m,S,f);if(k!==null)return k}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new fe}static centerFromEnd(i,o){return o-i[2]-i[1]/2}foundPatternCross(i){const o=this.moduleSize,l=o/2;for(let f=0;f<3;f++)if(Math.abs(o-i[f])>=l)return!1;return!0}crossCheckVertical(i,o,l,f){const d=this.image,m=d.getHeight(),y=this.crossCheckStateCount;y[0]=0,y[1]=0,y[2]=0;let A=i;for(;A>=0&&d.get(o,A)&&y[1]<=l;)y[1]++,A--;if(A<0||y[1]>l)return NaN;for(;A>=0&&!d.get(o,A)&&y[0]<=l;)y[0]++,A--;if(y[0]>l)return NaN;for(A=i+1;A<m&&d.get(o,A)&&y[1]<=l;)y[1]++,A++;if(A===m||y[1]>l)return NaN;for(;A<m&&!d.get(o,A)&&y[2]<=l;)y[2]++,A++;if(y[2]>l)return NaN;const S=y[0]+y[1]+y[2];return 5*Math.abs(S-f)>=2*f?NaN:this.foundPatternCross(y)?ri.centerFromEnd(y,A):NaN}handlePossibleCenter(i,o,l){const f=i[0]+i[1]+i[2],d=ri.centerFromEnd(i,l),m=this.crossCheckVertical(o,d,2*i[1],f);if(!isNaN(m)){const y=(i[0]+i[1]+i[2])/3;for(const S of this.possibleCenters)if(S.aboutEquals(y,m,d))return S.combineEstimate(m,d,y);const A=new Bs(d,m,y);this.possibleCenters.push(A),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(A)}return null}}class la extends He{constructor(i,o,l,f){super(i,o),this.estimatedModuleSize=l,this.count=f,f===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(i,o,l){if(Math.abs(o-this.getY())<=i&&Math.abs(l-this.getX())<=i){const f=Math.abs(i-this.estimatedModuleSize);return f<=1||f<=this.estimatedModuleSize}return!1}combineEstimate(i,o,l){const f=this.count+1,d=(this.count*this.getX()+o)/f,m=(this.count*this.getY()+i)/f,y=(this.count*this.estimatedModuleSize+l)/f;return new la(d,m,y,f)}}class Si{constructor(i){this.bottomLeft=i[0],this.topLeft=i[1],this.topRight=i[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Tn{constructor(i,o){this.image=i,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=o}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(i){const o=i!=null&&i.get(Oe.TRY_HARDER)!==void 0,l=i!=null&&i.get(Oe.PURE_BARCODE)!==void 0,f=this.image,d=f.getHeight(),m=f.getWidth();let y=Math.floor(3*d/(4*Tn.MAX_MODULES));(y<Tn.MIN_SKIP||o)&&(y=Tn.MIN_SKIP);let A=!1;const S=new Int32Array(5);for(let L=y-1;L<d&&!A;L+=y){S[0]=0,S[1]=0,S[2]=0,S[3]=0,S[4]=0;let k=0;for(let G=0;G<m;G++)if(f.get(G,L))(k&1)===1&&k++,S[k]++;else if((k&1)===0)if(k===4)if(Tn.foundPatternCross(S)){if(this.handlePossibleCenter(S,L,G,l)===!0)if(y=2,this.hasSkipped===!0)A=this.haveMultiplyConfirmedCenters();else{const re=this.findRowSkip();re>S[2]&&(L+=re-S[2]-y,G=m-1)}else{S[0]=S[2],S[1]=S[3],S[2]=S[4],S[3]=1,S[4]=0,k=3;continue}k=0,S[0]=0,S[1]=0,S[2]=0,S[3]=0,S[4]=0}else S[0]=S[2],S[1]=S[3],S[2]=S[4],S[3]=1,S[4]=0,k=3;else S[++k]++;else S[k]++;Tn.foundPatternCross(S)&&this.handlePossibleCenter(S,L,m,l)===!0&&(y=S[0],this.hasSkipped&&(A=this.haveMultiplyConfirmedCenters()))}const R=this.selectBestPatterns();return He.orderBestPatterns(R),new Si(R)}static centerFromEnd(i,o){return o-i[4]-i[3]-i[2]/2}static foundPatternCross(i){let o=0;for(let d=0;d<5;d++){const m=i[d];if(m===0)return!1;o+=m}if(o<7)return!1;const l=o/7,f=l/2;return Math.abs(l-i[0])<f&&Math.abs(l-i[1])<f&&Math.abs(3*l-i[2])<3*f&&Math.abs(l-i[3])<f&&Math.abs(l-i[4])<f}getCrossCheckStateCount(){const i=this.crossCheckStateCount;return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i}crossCheckDiagonal(i,o,l,f){const d=this.getCrossCheckStateCount();let m=0;const y=this.image;for(;i>=m&&o>=m&&y.get(o-m,i-m);)d[2]++,m++;if(i<m||o<m)return!1;for(;i>=m&&o>=m&&!y.get(o-m,i-m)&&d[1]<=l;)d[1]++,m++;if(i<m||o<m||d[1]>l)return!1;for(;i>=m&&o>=m&&y.get(o-m,i-m)&&d[0]<=l;)d[0]++,m++;if(d[0]>l)return!1;const A=y.getHeight(),S=y.getWidth();for(m=1;i+m<A&&o+m<S&&y.get(o+m,i+m);)d[2]++,m++;if(i+m>=A||o+m>=S)return!1;for(;i+m<A&&o+m<S&&!y.get(o+m,i+m)&&d[3]<l;)d[3]++,m++;if(i+m>=A||o+m>=S||d[3]>=l)return!1;for(;i+m<A&&o+m<S&&y.get(o+m,i+m)&&d[4]<l;)d[4]++,m++;if(d[4]>=l)return!1;const R=d[0]+d[1]+d[2]+d[3]+d[4];return Math.abs(R-f)<2*f&&Tn.foundPatternCross(d)}crossCheckVertical(i,o,l,f){const d=this.image,m=d.getHeight(),y=this.getCrossCheckStateCount();let A=i;for(;A>=0&&d.get(o,A);)y[2]++,A--;if(A<0)return NaN;for(;A>=0&&!d.get(o,A)&&y[1]<=l;)y[1]++,A--;if(A<0||y[1]>l)return NaN;for(;A>=0&&d.get(o,A)&&y[0]<=l;)y[0]++,A--;if(y[0]>l)return NaN;for(A=i+1;A<m&&d.get(o,A);)y[2]++,A++;if(A===m)return NaN;for(;A<m&&!d.get(o,A)&&y[3]<l;)y[3]++,A++;if(A===m||y[3]>=l)return NaN;for(;A<m&&d.get(o,A)&&y[4]<l;)y[4]++,A++;if(y[4]>=l)return NaN;const S=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(S-f)>=2*f?NaN:Tn.foundPatternCross(y)?Tn.centerFromEnd(y,A):NaN}crossCheckHorizontal(i,o,l,f){const d=this.image,m=d.getWidth(),y=this.getCrossCheckStateCount();let A=i;for(;A>=0&&d.get(A,o);)y[2]++,A--;if(A<0)return NaN;for(;A>=0&&!d.get(A,o)&&y[1]<=l;)y[1]++,A--;if(A<0||y[1]>l)return NaN;for(;A>=0&&d.get(A,o)&&y[0]<=l;)y[0]++,A--;if(y[0]>l)return NaN;for(A=i+1;A<m&&d.get(A,o);)y[2]++,A++;if(A===m)return NaN;for(;A<m&&!d.get(A,o)&&y[3]<l;)y[3]++,A++;if(A===m||y[3]>=l)return NaN;for(;A<m&&d.get(A,o)&&y[4]<l;)y[4]++,A++;if(y[4]>=l)return NaN;const S=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(S-f)>=f?NaN:Tn.foundPatternCross(y)?Tn.centerFromEnd(y,A):NaN}handlePossibleCenter(i,o,l,f){const d=i[0]+i[1]+i[2]+i[3]+i[4];let m=Tn.centerFromEnd(i,l),y=this.crossCheckVertical(o,Math.floor(m),i[2],d);if(!isNaN(y)&&(m=this.crossCheckHorizontal(Math.floor(m),Math.floor(y),i[2],d),!isNaN(m)&&(!f||this.crossCheckDiagonal(Math.floor(y),Math.floor(m),i[2],d)))){const A=d/7;let S=!1;const R=this.possibleCenters;for(let L=0,k=R.length;L<k;L++){const G=R[L];if(G.aboutEquals(A,y,m)){R[L]=G.combineEstimate(y,m,A),S=!0;break}}if(!S){const L=new la(m,y,A);R.push(L),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(L)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let o=null;for(const l of this.possibleCenters)if(l.getCount()>=Tn.CENTER_QUORUM)if(o==null)o=l;else return this.hasSkipped=!0,Math.floor((Math.abs(o.getX()-l.getX())-Math.abs(o.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let i=0,o=0;const l=this.possibleCenters.length;for(const m of this.possibleCenters)m.getCount()>=Tn.CENTER_QUORUM&&(i++,o+=m.getEstimatedModuleSize());if(i<3)return!1;const f=o/l;let d=0;for(const m of this.possibleCenters)d+=Math.abs(m.getEstimatedModuleSize()-f);return d<=.05*o}selectBestPatterns(){const i=this.possibleCenters.length;if(i<3)throw new fe;const o=this.possibleCenters;let l;if(i>3){let f=0,d=0;for(const A of this.possibleCenters){const S=A.getEstimatedModuleSize();f+=S,d+=S*S}l=f/i;let m=Math.sqrt(d/i-l*l);o.sort((A,S)=>{const R=Math.abs(S.getEstimatedModuleSize()-l),L=Math.abs(A.getEstimatedModuleSize()-l);return R<L?-1:R>L?1:0});const y=Math.max(.2*l,m);for(let A=0;A<o.length&&o.length>3;A++){const S=o[A];Math.abs(S.getEstimatedModuleSize()-l)>y&&(o.splice(A,1),A--)}}if(o.length>3){let f=0;for(const d of o)f+=d.getEstimatedModuleSize();l=f/o.length,o.sort((d,m)=>{if(m.getCount()===d.getCount()){const y=Math.abs(m.getEstimatedModuleSize()-l),A=Math.abs(d.getEstimatedModuleSize()-l);return y<A?1:y>A?-1:0}else return m.getCount()-d.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]}}Tn.CENTER_QUORUM=2,Tn.MIN_SKIP=3,Tn.MAX_MODULES=57;class ii{constructor(i){this.image=i}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(i){this.resultPointCallback=i==null?null:i.get(Oe.NEED_RESULT_POINT_CALLBACK);const l=new Tn(this.image,this.resultPointCallback).find(i);return this.processFinderPatternInfo(l)}processFinderPatternInfo(i){const o=i.getTopLeft(),l=i.getTopRight(),f=i.getBottomLeft(),d=this.calculateModuleSize(o,l,f);if(d<1)throw new fe("No pattern found in proccess finder.");const m=ii.computeDimension(o,l,f,d),y=Xe.getProvisionalVersionForDimension(m),A=y.getDimensionForVersion()-7;let S=null;if(y.getAlignmentPatternCenters().length>0){const G=l.getX()-o.getX()+f.getX(),te=l.getY()-o.getY()+f.getY(),re=1-3/A,ue=Math.floor(o.getX()+re*(G-o.getX())),ye=Math.floor(o.getY()+re*(te-o.getY()));for(let ke=4;ke<=16;ke<<=1)try{S=this.findAlignmentInRegion(d,ue,ye,ke);break}catch(Pe){if(!(Pe instanceof fe))throw Pe}}const R=ii.createTransform(o,l,f,S,m),L=ii.sampleGrid(this.image,R,m);let k;return S===null?k=[f,o,l]:k=[f,o,l,S],new As(L,k)}static createTransform(i,o,l,f,d){const m=d-3.5;let y,A,S,R;return f!==null?(y=f.getX(),A=f.getY(),S=m-3,R=S):(y=o.getX()-i.getX()+l.getX(),A=o.getY()-i.getY()+l.getY(),S=m,R=m),dr.quadrilateralToQuadrilateral(3.5,3.5,m,3.5,S,R,3.5,m,i.getX(),i.getY(),o.getX(),o.getY(),y,A,l.getX(),l.getY())}static sampleGrid(i,o,l){return sr.getInstance().sampleGridWithTransform(i,l,l,o)}static computeDimension(i,o,l,f){const d=Ze.round(He.distance(i,o)/f),m=Ze.round(He.distance(i,l)/f);let y=Math.floor((d+m)/2)+7;switch(y&3){case 0:y++;break;case 2:y--;break;case 3:throw new fe("Dimensions could be not found.")}return y}calculateModuleSize(i,o,l){return(this.calculateModuleSizeOneWay(i,o)+this.calculateModuleSizeOneWay(i,l))/2}calculateModuleSizeOneWay(i,o){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(o.getX()),Math.floor(o.getY())),f=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(i.getX()),Math.floor(i.getY()));return isNaN(l)?f/7:isNaN(f)?l/7:(l+f)/14}sizeOfBlackWhiteBlackRunBothWays(i,o,l,f){let d=this.sizeOfBlackWhiteBlackRun(i,o,l,f),m=1,y=i-(l-i);y<0?(m=i/(i-y),y=0):y>=this.image.getWidth()&&(m=(this.image.getWidth()-1-i)/(y-i),y=this.image.getWidth()-1);let A=Math.floor(o-(f-o)*m);return m=1,A<0?(m=o/(o-A),A=0):A>=this.image.getHeight()&&(m=(this.image.getHeight()-1-o)/(A-o),A=this.image.getHeight()-1),y=Math.floor(i+(y-i)*m),d+=this.sizeOfBlackWhiteBlackRun(i,o,y,A),d-1}sizeOfBlackWhiteBlackRun(i,o,l,f){const d=Math.abs(f-o)>Math.abs(l-i);if(d){let G=i;i=o,o=G,G=l,l=f,f=G}const m=Math.abs(l-i),y=Math.abs(f-o);let A=-m/2;const S=i<l?1:-1,R=o<f?1:-1;let L=0;const k=l+S;for(let G=i,te=o;G!==k;G+=S){const re=d?te:G,ue=d?G:te;if(L===1===this.image.get(re,ue)){if(L===2)return Ze.distance(G,te,i,o);L++}if(A+=y,A>0){if(te===f)break;te+=R,A-=m}}return L===2?Ze.distance(l+S,f,i,o):NaN}findAlignmentInRegion(i,o,l,f){const d=Math.floor(f*i),m=Math.max(0,o-d),y=Math.min(this.image.getWidth()-1,o+d);if(y-m<i*3)throw new fe("Alignment top exceeds estimated module size.");const A=Math.max(0,l-d),S=Math.min(this.image.getHeight()-1,l+d);if(S-A<i*3)throw new fe("Alignment bottom exceeds estimated module size.");return new ri(this.image,m,A,y-m,S-A,i,this.resultPointCallback).find()}}class si{constructor(){this.decoder=new ks}getDecoder(){return this.decoder}decode(i,o){let l,f;if(o!=null&&o.get(Oe.PURE_BARCODE)!==void 0){const A=si.extractPureBits(i.getBlackMatrix());l=this.decoder.decodeBitMatrix(A,o),f=si.NO_POINTS}else{const A=new ii(i.getBlackMatrix()).detect(o);l=this.decoder.decodeBitMatrix(A.getBits(),o),f=A.getPoints()}l.getOther()instanceof Jo&&l.getOther().applyMirroredCorrection(f);const d=new je(l.getText(),l.getRawBytes(),void 0,f,Le.QR_CODE,void 0),m=l.getByteSegments();m!==null&&d.putMetadata(vt.BYTE_SEGMENTS,m);const y=l.getECLevel();return y!==null&&d.putMetadata(vt.ERROR_CORRECTION_LEVEL,y),l.hasStructuredAppend()&&(d.putMetadata(vt.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),d.putMetadata(vt.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),d}reset(){}static extractPureBits(i){const o=i.getTopLeftOnBit(),l=i.getBottomRightOnBit();if(o===null||l===null)throw new fe;const f=this.moduleSize(o,i);let d=o[1],m=l[1],y=o[0],A=l[0];if(y>=A||d>=m)throw new fe;if(m-d!==A-y&&(A=y+(m-d),A>=i.getWidth()))throw new fe;const S=Math.round((A-y+1)/f),R=Math.round((m-d+1)/f);if(S<=0||R<=0)throw new fe;if(R!==S)throw new fe;const L=Math.floor(f/2);d+=L,y+=L;const k=y+Math.floor((S-1)*f)-A;if(k>0){if(k>L)throw new fe;y-=k}const G=d+Math.floor((R-1)*f)-m;if(G>0){if(G>L)throw new fe;d-=G}const te=new $e(S,R);for(let re=0;re<R;re++){const ue=d+Math.floor(re*f);for(let ye=0;ye<S;ye++)i.get(y+Math.floor(ye*f),ue)&&te.set(ye,re)}return te}static moduleSize(i,o){const l=o.getHeight(),f=o.getWidth();let d=i[0],m=i[1],y=!0,A=0;for(;d<f&&m<l;){if(y!==o.get(d,m)){if(++A===5)break;y=!y}d++,m++}if(d===f||m===l)throw new fe;return(d-i[0])/7}}si.NO_POINTS=new Array;class et{PDF417Common(){}static getBitCountSum(i){return Ze.sum(i)}static toIntArray(i){if(i==null||!i.length)return et.EMPTY_INT_ARRAY;const o=new Int32Array(i.length);let l=0;for(const f of i)o[l++]=f;return o}static getCodeword(i){const o=ae.binarySearch(et.SYMBOL_TABLE,i&262143);return o<0?-1:(et.CODEWORD_TABLE[o]-1)%et.NUMBER_OF_CODEWORDS}}et.NUMBER_OF_CODEWORDS=929,et.MAX_CODEWORDS_IN_BARCODE=et.NUMBER_OF_CODEWORDS-1,et.MIN_ROWS_IN_BARCODE=3,et.MAX_ROWS_IN_BARCODE=90,et.MODULES_IN_CODEWORD=17,et.MODULES_IN_STOP_PATTERN=18,et.BARS_IN_MODULE=8,et.EMPTY_INT_ARRAY=new Int32Array([]),et.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),et.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Us{constructor(i,o){this.bits=i,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class ot{static detectMultiple(i,o,l){let f=i.getBlackMatrix(),d=ot.detect(l,f);return d.length||(f=f.clone(),f.rotate180(),d=ot.detect(l,f)),new Us(f,d)}static detect(i,o){const l=new Array;let f=0,d=0,m=!1;for(;f<o.getHeight();){const y=ot.findVertices(o,f,d);if(y[0]==null&&y[3]==null){if(!m)break;m=!1,d=0;for(const A of l)A[1]!=null&&(f=Math.trunc(Math.max(f,A[1].getY()))),A[3]!=null&&(f=Math.max(f,Math.trunc(A[3].getY())));f+=ot.ROW_STEP;continue}if(m=!0,l.push(y),!i)break;y[2]!=null?(d=Math.trunc(y[2].getX()),f=Math.trunc(y[2].getY())):(d=Math.trunc(y[4].getX()),f=Math.trunc(y[4].getY()))}return l}static findVertices(i,o,l){const f=i.getHeight(),d=i.getWidth(),m=new Array(8);return ot.copyToResult(m,ot.findRowsWithPattern(i,f,d,o,l,ot.START_PATTERN),ot.INDEXES_START_PATTERN),m[4]!=null&&(l=Math.trunc(m[4].getX()),o=Math.trunc(m[4].getY())),ot.copyToResult(m,ot.findRowsWithPattern(i,f,d,o,l,ot.STOP_PATTERN),ot.INDEXES_STOP_PATTERN),m}static copyToResult(i,o,l){for(let f=0;f<l.length;f++)i[l[f]]=o[f]}static findRowsWithPattern(i,o,l,f,d,m){const y=new Array(4);let A=!1;const S=new Int32Array(m.length);for(;f<o;f+=ot.ROW_STEP){let L=ot.findGuardPattern(i,d,f,l,!1,m,S);if(L!=null){for(;f>0;){const k=ot.findGuardPattern(i,d,--f,l,!1,m,S);if(k!=null)L=k;else{f++;break}}y[0]=new He(L[0],f),y[1]=new He(L[1],f),A=!0;break}}let R=f+1;if(A){let L=0,k=Int32Array.from([Math.trunc(y[0].getX()),Math.trunc(y[1].getX())]);for(;R<o;R++){const G=ot.findGuardPattern(i,k[0],R,l,!1,m,S);if(G!=null&&Math.abs(k[0]-G[0])<ot.MAX_PATTERN_DRIFT&&Math.abs(k[1]-G[1])<ot.MAX_PATTERN_DRIFT)k=G,L=0;else{if(L>ot.SKIPPED_ROW_COUNT_MAX)break;L++}}R-=L+1,y[2]=new He(k[0],R),y[3]=new He(k[1],R)}return R-f<ot.BARCODE_MIN_HEIGHT&&ae.fill(y,null),y}static findGuardPattern(i,o,l,f,d,m,y){ae.fillWithin(y,0,y.length,0);let A=o,S=0;for(;i.get(A,l)&&A>0&&S++<ot.MAX_PIXEL_DRIFT;)A--;let R=A,L=0,k=m.length;for(let G=d;R<f;R++)if(i.get(R,l)!==G)y[L]++;else{if(L===k-1){if(ot.patternMatchVariance(y,m,ot.MAX_INDIVIDUAL_VARIANCE)<ot.MAX_AVG_VARIANCE)return new Int32Array([A,R]);A+=y[0]+y[1],$.arraycopy(y,2,y,0,L-1),y[L-1]=0,y[L]=0,L--}else L++;y[L]=1,G=!G}return L===k-1&&ot.patternMatchVariance(y,m,ot.MAX_INDIVIDUAL_VARIANCE)<ot.MAX_AVG_VARIANCE?new Int32Array([A,R-1]):null}static patternMatchVariance(i,o,l){let f=i.length,d=0,m=0;for(let S=0;S<f;S++)d+=i[S],m+=o[S];if(d<m)return 1/0;let y=d/m;l*=y;let A=0;for(let S=0;S<f;S++){let R=i[S],L=o[S]*y,k=R>L?R-L:L-R;if(k>l)return 1/0;A+=k}return A/d}}ot.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),ot.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),ot.MAX_AVG_VARIANCE=.42,ot.MAX_INDIVIDUAL_VARIANCE=.8,ot.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),ot.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),ot.MAX_PIXEL_DRIFT=3,ot.MAX_PATTERN_DRIFT=5,ot.SKIPPED_ROW_COUNT_MAX=25,ot.ROW_STEP=5,ot.BARCODE_MIN_HEIGHT=10;class hn{constructor(i,o){if(o.length===0)throw new I;this.field=i;let l=o.length;if(l>1&&o[0]===0){let f=1;for(;f<l&&o[f]===0;)f++;f===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-f),$.arraycopy(o,f,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);if(i===1){let f=0;for(let d of this.coefficients)f=this.field.add(f,d);return f}let o=this.coefficients[0],l=this.coefficients.length;for(let f=1;f<l;f++)o=this.field.add(this.field.multiply(i,o),this.coefficients[f]);return o}add(i){if(!this.field.equals(i.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero())return i;if(i.isZero())return this;let o=this.coefficients,l=i.coefficients;if(o.length>l.length){let m=o;o=l,l=m}let f=new Int32Array(l.length),d=l.length-o.length;$.arraycopy(l,0,f,0,d);for(let m=d;m<l.length;m++)f[m]=this.field.add(o[m-d],l[m]);return new hn(this.field,f)}subtract(i){if(!this.field.equals(i.field))throw new I("ModulusPolys do not have same ModulusGF field");return i.isZero()?this:this.add(i.negative())}multiply(i){return i instanceof hn?this.multiplyOther(i):this.multiplyScalar(i)}multiplyOther(i){if(!this.field.equals(i.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero()||i.isZero())return new hn(this.field,new Int32Array([0]));let o=this.coefficients,l=o.length,f=i.coefficients,d=f.length,m=new Int32Array(l+d-1);for(let y=0;y<l;y++){let A=o[y];for(let S=0;S<d;S++)m[y+S]=this.field.add(m[y+S],this.field.multiply(A,f[S]))}return new hn(this.field,m)}negative(){let i=this.coefficients.length,o=new Int32Array(i);for(let l=0;l<i;l++)o[l]=this.field.subtract(0,this.coefficients[l]);return new hn(this.field,o)}multiplyScalar(i){if(i===0)return new hn(this.field,new Int32Array([0]));if(i===1)return this;let o=this.coefficients.length,l=new Int32Array(o);for(let f=0;f<o;f++)l[f]=this.field.multiply(this.coefficients[f],i);return new hn(this.field,l)}multiplyByMonomial(i,o){if(i<0)throw new I;if(o===0)return new hn(this.field,new Int32Array([0]));let l=this.coefficients.length,f=new Int32Array(l+i);for(let d=0;d<l;d++)f[d]=this.field.multiply(this.coefficients[d],o);return new hn(this.field,f)}toString(){let i=new K;for(let o=this.getDegree();o>=0;o--){let l=this.getCoefficient(o);l!==0&&(l<0?(i.append(" - "),l=-l):i.length()>0&&i.append(" + "),(o===0||l!==1)&&i.append(l),o!==0&&(o===1?i.append("x"):(i.append("x^"),i.append(o))))}return i.toString()}}class ca{add(i,o){return(i+o)%this.modulus}subtract(i,o){return(this.modulus+i-o)%this.modulus}exp(i){return this.expTable[i]}log(i){if(i===0)throw new I;return this.logTable[i]}inverse(i){if(i===0)throw new ui;return this.expTable[this.modulus-this.logTable[i]-1]}multiply(i,o){return i===0||o===0?0:this.expTable[(this.logTable[i]+this.logTable[o])%(this.modulus-1)]}getSize(){return this.modulus}equals(i){return i===this}}class nn extends ca{constructor(i,o){super(),this.modulus=i,this.expTable=new Int32Array(i),this.logTable=new Int32Array(i);let l=1;for(let f=0;f<i;f++)this.expTable[f]=l,l=l*o%i;for(let f=0;f<i-1;f++)this.logTable[this.expTable[f]]=f;this.zero=new hn(this,new Int32Array([0])),this.one=new hn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,o){if(i<0)throw new I;if(o===0)return this.zero;let l=new Int32Array(i+1);return l[0]=o,new hn(this,l)}}nn.PDF417_GF=new nn(et.NUMBER_OF_CODEWORDS,3);class Ui{constructor(){this.field=nn.PDF417_GF}decode(i,o,l){let f=new hn(this.field,i),d=new Int32Array(o),m=!1;for(let te=o;te>0;te--){let re=f.evaluateAt(this.field.exp(te));d[o-te]=re,re!==0&&(m=!0)}if(!m)return 0;let y=this.field.getOne();if(l!=null)for(const te of l){let re=this.field.exp(i.length-1-te),ue=new hn(this.field,new Int32Array([this.field.subtract(0,re),1]));y=y.multiply(ue)}let A=new hn(this.field,d),S=this.runEuclideanAlgorithm(this.field.buildMonomial(o,1),A,o),R=S[0],L=S[1],k=this.findErrorLocations(R),G=this.findErrorMagnitudes(L,R,k);for(let te=0;te<k.length;te++){let re=i.length-1-this.field.log(k[te]);if(re<0)throw B.getChecksumInstance();i[re]=this.field.subtract(i[re],G[te])}return k.length}runEuclideanAlgorithm(i,o,l){if(i.getDegree()<o.getDegree()){let k=i;i=o,o=k}let f=i,d=o,m=this.field.getZero(),y=this.field.getOne();for(;d.getDegree()>=Math.round(l/2);){let k=f,G=m;if(f=d,m=y,f.isZero())throw B.getChecksumInstance();d=k;let te=this.field.getZero(),re=f.getCoefficient(f.getDegree()),ue=this.field.inverse(re);for(;d.getDegree()>=f.getDegree()&&!d.isZero();){let ye=d.getDegree()-f.getDegree(),ke=this.field.multiply(d.getCoefficient(d.getDegree()),ue);te=te.add(this.field.buildMonomial(ye,ke)),d=d.subtract(f.multiplyByMonomial(ye,ke))}y=te.multiply(m).subtract(G).negative()}let A=y.getCoefficient(0);if(A===0)throw B.getChecksumInstance();let S=this.field.inverse(A),R=y.multiply(S),L=d.multiply(S);return[R,L]}findErrorLocations(i){let o=i.getDegree(),l=new Int32Array(o),f=0;for(let d=1;d<this.field.getSize()&&f<o;d++)i.evaluateAt(d)===0&&(l[f]=this.field.inverse(d),f++);if(f!==o)throw B.getChecksumInstance();return l}findErrorMagnitudes(i,o,l){let f=o.getDegree(),d=new Int32Array(f);for(let S=1;S<=f;S++)d[f-S]=this.field.multiply(S,o.getCoefficient(S));let m=new hn(this.field,d),y=l.length,A=new Int32Array(y);for(let S=0;S<y;S++){let R=this.field.inverse(l[S]),L=this.field.subtract(0,i.evaluateAt(R)),k=this.field.inverse(m.evaluateAt(R));A[S]=this.field.multiply(L,k)}return A}}class Vi{constructor(i,o,l,f,d){i instanceof Vi?this.constructor_2(i):this.constructor_1(i,o,l,f,d)}constructor_1(i,o,l,f,d){const m=o==null||l==null,y=f==null||d==null;if(m&&y)throw new fe;m?(o=new He(0,f.getY()),l=new He(0,d.getY())):y&&(f=new He(i.getWidth()-1,o.getY()),d=new He(i.getWidth()-1,l.getY())),this.image=i,this.topLeft=o,this.bottomLeft=l,this.topRight=f,this.bottomRight=d,this.minX=Math.trunc(Math.min(o.getX(),l.getX())),this.maxX=Math.trunc(Math.max(f.getX(),d.getX())),this.minY=Math.trunc(Math.min(o.getY(),f.getY())),this.maxY=Math.trunc(Math.max(l.getY(),d.getY()))}constructor_2(i){this.image=i.image,this.topLeft=i.getTopLeft(),this.bottomLeft=i.getBottomLeft(),this.topRight=i.getTopRight(),this.bottomRight=i.getBottomRight(),this.minX=i.getMinX(),this.maxX=i.getMaxX(),this.minY=i.getMinY(),this.maxY=i.getMaxY()}static merge(i,o){return i==null?o:o==null?i:new Vi(i.image,i.topLeft,i.bottomLeft,o.topRight,o.bottomRight)}addMissingRows(i,o,l){let f=this.topLeft,d=this.bottomLeft,m=this.topRight,y=this.bottomRight;if(i>0){let A=l?this.topLeft:this.topRight,S=Math.trunc(A.getY()-i);S<0&&(S=0);let R=new He(A.getX(),S);l?f=R:m=R}if(o>0){let A=l?this.bottomLeft:this.bottomRight,S=Math.trunc(A.getY()+o);S>=this.image.getHeight()&&(S=this.image.getHeight()-1);let R=new He(A.getX(),S);l?d=R:y=R}return new Vi(this.image,f,d,m,y)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class ua{constructor(i,o,l,f){this.columnCount=i,this.errorCorrectionLevel=f,this.rowCountUpperPart=o,this.rowCountLowerPart=l,this.rowCount=o+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class vs{constructor(){this.buffer=""}static form(i,o){let l=-1;function f(m,y,A,S,R,L){if(m==="%%")return"%";if(o[++l]===void 0)return;m=S?parseInt(S.substr(1)):void 0;let k=R?parseInt(R.substr(1)):void 0,G;switch(L){case"s":G=o[l];break;case"c":G=o[l][0];break;case"f":G=parseFloat(o[l]).toFixed(m);break;case"p":G=parseFloat(o[l]).toPrecision(m);break;case"e":G=parseFloat(o[l]).toExponential(m);break;case"x":G=parseInt(o[l]).toString(k||16);break;case"d":G=parseFloat(parseInt(o[l],k||10).toPrecision(m)).toFixed(0);break}G=typeof G=="object"?JSON.stringify(G):(+G).toString(k);let te=parseInt(A),re=A&&A[0]+""=="0"?"0":" ";for(;G.length<te;)G=y!==void 0?G+re:re+G;return G}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(d,f)}format(i,...o){this.buffer+=vs.form(i,o)}toString(){return this.buffer}}class ji{constructor(i){this.boundingBox=new Vi(i),this.codewords=new Array(i.getMaxY()-i.getMinY()+1)}getCodewordNearby(i){let o=this.getCodeword(i);if(o!=null)return o;for(let l=1;l<ji.MAX_NEARBY_DISTANCE;l++){let f=this.imageRowToCodewordIndex(i)-l;if(f>=0&&(o=this.codewords[f],o!=null)||(f=this.imageRowToCodewordIndex(i)+l,f<this.codewords.length&&(o=this.codewords[f],o!=null)))return o}return null}imageRowToCodewordIndex(i){return i-this.boundingBox.getMinY()}setCodeword(i,o){this.codewords[this.imageRowToCodewordIndex(i)]=o}getCodeword(i){return this.codewords[this.imageRowToCodewordIndex(i)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const i=new vs;let o=0;for(const l of this.codewords){if(l==null){i.format("%3d:    |   %n",o++);continue}i.format("%3d: %3d|%3d%n",o++,l.getRowNumber(),l.getValue())}return i.toString()}}ji.MAX_NEARBY_DISTANCE=5;class mi{constructor(){this.values=new Map}setValue(i){i=Math.trunc(i);let o=this.values.get(i);o==null&&(o=0),o++,this.values.set(i,o)}getValue(){let i=-1,o=new Array;for(const[l,f]of this.values.entries()){const d={getKey:()=>l,getValue:()=>f};d.getValue()>i?(i=d.getValue(),o=[],o.push(d.getKey())):d.getValue()===i&&o.push(d.getKey())}return et.toIntArray(o)}getConfidence(i){return this.values.get(i)}}class Ci extends ji{constructor(i,o){super(i),this._isLeft=o}setRowNumbers(){for(let i of this.getCodewords())i!=null&&i.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(i){let o=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(o,i);let l=this.getBoundingBox(),f=this._isLeft?l.getTopLeft():l.getTopRight(),d=this._isLeft?l.getBottomLeft():l.getBottomRight(),m=this.imageRowToCodewordIndex(Math.trunc(f.getY())),y=this.imageRowToCodewordIndex(Math.trunc(d.getY())),A=-1,S=1,R=0;for(let L=m;L<y;L++){if(o[L]==null)continue;let k=o[L],G=k.getRowNumber()-A;if(G===0)R++;else if(G===1)S=Math.max(S,R),R=1,A=k.getRowNumber();else if(G<0||k.getRowNumber()>=i.getRowCount()||G>L)o[L]=null;else{let te;S>2?te=(S-2)*G:te=G;let re=te>=L;for(let ue=1;ue<=te&&!re;ue++)re=o[L-ue]!=null;re?o[L]=null:(A=k.getRowNumber(),R=1)}}}getRowHeights(){let i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);let o=new Int32Array(i.getRowCount());for(let l of this.getCodewords())if(l!=null){let f=l.getRowNumber();if(f>=o.length)continue;o[f]++}return o}adjustIncompleteIndicatorColumnRowNumbers(i){let o=this.getBoundingBox(),l=this._isLeft?o.getTopLeft():o.getTopRight(),f=this._isLeft?o.getBottomLeft():o.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(l.getY())),m=this.imageRowToCodewordIndex(Math.trunc(f.getY())),y=this.getCodewords(),A=-1;for(let S=d;S<m;S++){if(y[S]==null)continue;let R=y[S];R.setRowNumberAsRowIndicatorColumn();let L=R.getRowNumber()-A;L===0||(L===1?A=R.getRowNumber():R.getRowNumber()>=i.getRowCount()?y[S]=null:A=R.getRowNumber())}}getBarcodeMetadata(){let i=this.getCodewords(),o=new mi,l=new mi,f=new mi,d=new mi;for(let y of i){if(y==null)continue;y.setRowNumberAsRowIndicatorColumn();let A=y.getValue()%30,S=y.getRowNumber();switch(this._isLeft||(S+=2),S%3){case 0:l.setValue(A*3+1);break;case 1:d.setValue(A/3),f.setValue(A%3);break;case 2:o.setValue(A+1);break}}if(o.getValue().length===0||l.getValue().length===0||f.getValue().length===0||d.getValue().length===0||o.getValue()[0]<1||l.getValue()[0]+f.getValue()[0]<et.MIN_ROWS_IN_BARCODE||l.getValue()[0]+f.getValue()[0]>et.MAX_ROWS_IN_BARCODE)return null;let m=new ua(o.getValue()[0],l.getValue()[0],f.getValue()[0],d.getValue()[0]);return this.removeIncorrectCodewords(i,m),m}removeIncorrectCodewords(i,o){for(let l=0;l<i.length;l++){let f=i[l];if(i[l]==null)continue;let d=f.getValue()%30,m=f.getRowNumber();if(m>o.getRowCount()){i[l]=null;continue}switch(this._isLeft||(m+=2),m%3){case 0:d*3+1!==o.getRowCountUpperPart()&&(i[l]=null);break;case 1:(Math.trunc(d/3)!==o.getErrorCorrectionLevel()||d%3!==o.getRowCountLowerPart())&&(i[l]=null);break;case 2:d+1!==o.getColumnCount()&&(i[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Yn{constructor(i,o){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=i,this.barcodeColumnCount=i.getColumnCount(),this.boundingBox=o,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let i=et.MAX_CODEWORDS_IN_BARCODE,o;do o=i,i=this.adjustRowNumbersAndGetCount();while(i>0&&i<o);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(i){i!=null&&i.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let i=this.adjustRowNumbersByRow();if(i===0)return 0;for(let o=1;o<this.barcodeColumnCount+1;o++){let l=this.detectionResultColumns[o].getCodewords();for(let f=0;f<l.length;f++)l[f]!=null&&(l[f].hasValidRowNumber()||this.adjustRowNumbers(o,f,l))}return i}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let i=this.detectionResultColumns[0].getCodewords(),o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<i.length;l++)if(i[l]!=null&&o[l]!=null&&i[l].getRowNumber()===o[l].getRowNumber())for(let f=1;f<=this.barcodeColumnCount;f++){let d=this.detectionResultColumns[f].getCodewords()[l];d!=null&&(d.setRowNumber(i[l].getRowNumber()),d.hasValidRowNumber()||(this.detectionResultColumns[f].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let i=0,o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<o.length;l++){if(o[l]==null)continue;let f=o[l].getRowNumber(),d=0;for(let m=this.barcodeColumnCount+1;m>0&&d<this.ADJUST_ROW_NUMBER_SKIP;m--){let y=this.detectionResultColumns[m].getCodewords()[l];y!=null&&(d=Yn.adjustRowNumberIfValid(f,d,y),y.hasValidRowNumber()||i++)}}return i}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let i=0,o=this.detectionResultColumns[0].getCodewords();for(let l=0;l<o.length;l++){if(o[l]==null)continue;let f=o[l].getRowNumber(),d=0;for(let m=1;m<this.barcodeColumnCount+1&&d<this.ADJUST_ROW_NUMBER_SKIP;m++){let y=this.detectionResultColumns[m].getCodewords()[l];y!=null&&(d=Yn.adjustRowNumberIfValid(f,d,y),y.hasValidRowNumber()||i++)}}return i}static adjustRowNumberIfValid(i,o,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(i)?(l.setRowNumber(i),o=0):++o),o}adjustRowNumbers(i,o,l){if(!this.detectionResultColumns[i-1])return;let f=l[o],d=this.detectionResultColumns[i-1].getCodewords(),m=d;this.detectionResultColumns[i+1]!=null&&(m=this.detectionResultColumns[i+1].getCodewords());let y=new Array(14);y[2]=d[o],y[3]=m[o],o>0&&(y[0]=l[o-1],y[4]=d[o-1],y[5]=m[o-1]),o>1&&(y[8]=l[o-2],y[10]=d[o-2],y[11]=m[o-2]),o<l.length-1&&(y[1]=l[o+1],y[6]=d[o+1],y[7]=m[o+1]),o<l.length-2&&(y[9]=l[o+2],y[12]=d[o+2],y[13]=m[o+2]);for(let A of y)if(Yn.adjustRowNumber(f,A))return}static adjustRowNumber(i,o){return o==null?!1:o.hasValidRowNumber()&&o.getBucket()===i.getBucket()?(i.setRowNumber(o.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(i){this.boundingBox=i}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(i,o){this.detectionResultColumns[i]=o}getDetectionResultColumn(i){return this.detectionResultColumns[i]}toString(){let i=this.detectionResultColumns[0];i==null&&(i=this.detectionResultColumns[this.barcodeColumnCount+1]);let o=new vs;for(let l=0;l<i.getCodewords().length;l++){o.format("CW %3d:",l);for(let f=0;f<this.barcodeColumnCount+2;f++){if(this.detectionResultColumns[f]==null){o.format("    |   ");continue}let d=this.detectionResultColumns[f].getCodewords()[l];if(d==null){o.format("    |   ");continue}o.format(" %3d|%3d",d.getRowNumber(),d.getValue())}o.format("%n")}return o.toString()}}class pi{constructor(i,o,l,f){this.rowNumber=pi.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(i),this.endX=Math.trunc(o),this.bucket=Math.trunc(l),this.value=Math.trunc(f)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(i){return i!==pi.BARCODE_ROW_UNKNOWN&&this.bucket===i%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(i){this.rowNumber=i}toString(){return this.rowNumber+"|"+this.value}}pi.BARCODE_ROW_UNKNOWN=-1;class Rn{static initialize(){for(let i=0;i<et.SYMBOL_TABLE.length;i++){let o=et.SYMBOL_TABLE[i],l=o&1;for(let f=0;f<et.BARS_IN_MODULE;f++){let d=0;for(;(o&1)===l;)d+=1,o>>=1;l=o&1,Rn.RATIOS_TABLE[i]||(Rn.RATIOS_TABLE[i]=new Array(et.BARS_IN_MODULE)),Rn.RATIOS_TABLE[i][et.BARS_IN_MODULE-f-1]=Math.fround(d/et.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(i){let o=Rn.getDecodedCodewordValue(Rn.sampleBitCounts(i));return o!==-1?o:Rn.getClosestDecodedValue(i)}static sampleBitCounts(i){let o=Ze.sum(i),l=new Int32Array(et.BARS_IN_MODULE),f=0,d=0;for(let m=0;m<et.MODULES_IN_CODEWORD;m++){let y=o/(2*et.MODULES_IN_CODEWORD)+m*o/et.MODULES_IN_CODEWORD;d+i[f]<=y&&(d+=i[f],f++),l[f]++}return l}static getDecodedCodewordValue(i){let o=Rn.getBitValue(i);return et.getCodeword(o)===-1?-1:o}static getBitValue(i){let o=0;for(let l=0;l<i.length;l++)for(let f=0;f<i[l];f++)o=o<<1|(l%2===0?1:0);return Math.trunc(o)}static getClosestDecodedValue(i){let o=Ze.sum(i),l=new Array(et.BARS_IN_MODULE);if(o>1)for(let m=0;m<l.length;m++)l[m]=Math.fround(i[m]/o);let f=An.MAX_VALUE,d=-1;this.bSymbolTableReady||Rn.initialize();for(let m=0;m<Rn.RATIOS_TABLE.length;m++){let y=0,A=Rn.RATIOS_TABLE[m];for(let S=0;S<et.BARS_IN_MODULE;S++){let R=Math.fround(A[S]-l[S]);if(y+=Math.fround(R*R),y>=f)break}y<f&&(f=y,d=et.SYMBOL_TABLE[m])}return d}}Rn.bSymbolTableReady=!1,Rn.RATIOS_TABLE=new Array(et.SYMBOL_TABLE.length).map(P=>new Array(et.BARS_IN_MODULE));class Ss{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(i){this.segmentIndex=i}getFileId(){return this.fileId}setFileId(i){this.fileId=i}getOptionalData(){return this.optionalData}setOptionalData(i){this.optionalData=i}isLastSegment(){return this.lastSegment}setLastSegment(i){this.lastSegment=i}getSegmentCount(){return this.segmentCount}setSegmentCount(i){this.segmentCount=i}getSender(){return this.sender||null}setSender(i){this.sender=i}getAddressee(){return this.addressee||null}setAddressee(i){this.addressee=i}getFileName(){return this.fileName}setFileName(i){this.fileName=i}getFileSize(){return this.fileSize}setFileSize(i){this.fileSize=i}getChecksum(){return this.checksum}setChecksum(i){this.checksum=i}getTimestamp(){return this.timestamp}setTimestamp(i){this.timestamp=i}}class Qa{static parseLong(i,o=void 0){return parseInt(i,o)}}class Cs extends E{}Cs.kind="NullPointerException";class Za{writeBytes(i){this.writeBytesOffset(i,0,i.length)}writeBytesOffset(i,o,l){if(i==null)throw new Cs;if(o<0||o>i.length||l<0||o+l>i.length||o+l<0)throw new q;if(l===0)return;for(let f=0;f<l;f++)this.write(i[o+f])}flush(){}close(){}}class os extends E{}class Ja extends Za{constructor(i=32){if(super(),this.count=0,i<0)throw new I("Negative initial size: "+i);this.buf=new Uint8Array(i)}ensureCapacity(i){i-this.buf.length>0&&this.grow(i)}grow(i){let l=this.buf.length<<1;if(l-i<0&&(l=i),l<0){if(i<0)throw new os;l=Q.MAX_VALUE}this.buf=ae.copyOfUint8Array(this.buf,l)}write(i){this.ensureCapacity(this.count+1),this.buf[this.count]=i,this.count+=1}writeBytesOffset(i,o,l){if(o<0||o>i.length||l<0||o+l-i.length>0)throw new q;this.ensureCapacity(this.count+l),$.arraycopy(i,o,this.buf,this.count,l),this.count+=l}writeTo(i){i.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return ae.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(i){return i?typeof i=="string"?this.toString_string(i):this.toString_number(i):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(i){return new String(this.buf).toString()}toString_number(i){return new String(this.buf).toString()}close(){}}var Jt;(function(P){P[P.ALPHA=0]="ALPHA",P[P.LOWER=1]="LOWER",P[P.MIXED=2]="MIXED",P[P.PUNCT=3]="PUNCT",P[P.ALPHA_SHIFT=4]="ALPHA_SHIFT",P[P.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Jt||(Jt={}));function Vs(){if(typeof window<"u")return window.BigInt||null;if(typeof If<"u")return If.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let ha;function Fi(P){if(typeof ha>"u"&&(ha=Vs()),ha===null)throw new Error("BigInt is not supported!");return ha(P)}function fa(){let P=[];P[0]=Fi(1);let i=Fi(900);P[1]=i;for(let o=2;o<16;o++)P[o]=P[o-1]*i;return P}class xe{static decode(i,o){let l=new K(""),f=V.ISO8859_1;l.enableDecoding(f);let d=1,m=i[d++],y=new Ss;for(;d<i[0];){switch(m){case xe.TEXT_COMPACTION_MODE_LATCH:d=xe.textCompaction(i,d,l);break;case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:d=xe.byteCompaction(m,i,f,d,l);break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(i[d++]);break;case xe.NUMERIC_COMPACTION_MODE_LATCH:d=xe.numericCompaction(i,d,l);break;case xe.ECI_CHARSET:V.getCharacterSetECIByValue(i[d++]);break;case xe.ECI_GENERAL_PURPOSE:d+=2;break;case xe.ECI_USER_DEFINED:d++;break;case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:d=xe.decodeMacroBlock(i,d,y);break;case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:throw new j;default:d--,d=xe.textCompaction(i,d,l);break}if(d<i.length)m=i[d++];else throw j.getFormatInstance()}if(l.length()===0)throw j.getFormatInstance();let A=new tn(null,l.toString(),null,o);return A.setOther(y),A}static decodeMacroBlock(i,o,l){if(o+xe.NUMBER_OF_SEQUENCE_CODEWORDS>i[0])throw j.getFormatInstance();let f=new Int32Array(xe.NUMBER_OF_SEQUENCE_CODEWORDS);for(let y=0;y<xe.NUMBER_OF_SEQUENCE_CODEWORDS;y++,o++)f[y]=i[o];l.setSegmentIndex(Q.parseInt(xe.decodeBase900toBase10(f,xe.NUMBER_OF_SEQUENCE_CODEWORDS)));let d=new K;o=xe.textCompaction(i,o,d),l.setFileId(d.toString());let m=-1;for(i[o]===xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(m=o+1);o<i[0];)switch(i[o]){case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(o++,i[o]){case xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let y=new K;o=xe.textCompaction(i,o+1,y),l.setFileName(y.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let A=new K;o=xe.textCompaction(i,o+1,A),l.setSender(A.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let S=new K;o=xe.textCompaction(i,o+1,S),l.setAddressee(S.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let R=new K;o=xe.numericCompaction(i,o+1,R),l.setSegmentCount(Q.parseInt(R.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let L=new K;o=xe.numericCompaction(i,o+1,L),l.setTimestamp(Qa.parseLong(L.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let k=new K;o=xe.numericCompaction(i,o+1,k),l.setChecksum(Q.parseInt(k.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let G=new K;o=xe.numericCompaction(i,o+1,G),l.setFileSize(Qa.parseLong(G.toString()));break;default:throw j.getFormatInstance()}break;case xe.MACRO_PDF417_TERMINATOR:o++,l.setLastSegment(!0);break;default:throw j.getFormatInstance()}if(m!==-1){let y=o-m;l.isLastSegment()&&y--,l.setOptionalData(ae.copyOfRange(i,m,m+y))}return o}static textCompaction(i,o,l){let f=new Int32Array((i[0]-o)*2),d=new Int32Array((i[0]-o)*2),m=0,y=!1;for(;o<i[0]&&!y;){let A=i[o++];if(A<xe.TEXT_COMPACTION_MODE_LATCH)f[m]=A/30,f[m+1]=A%30,m+=2;else switch(A){case xe.TEXT_COMPACTION_MODE_LATCH:f[m++]=xe.TEXT_COMPACTION_MODE_LATCH;break;case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:o--,y=!0;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f[m]=xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,A=i[o++],d[m]=A,m++;break}}return xe.decodeTextCompaction(f,d,m,l),o}static decodeTextCompaction(i,o,l,f){let d=Jt.ALPHA,m=Jt.ALPHA,y=0;for(;y<l;){let A=i[y],S="";switch(d){case Jt.ALPHA:if(A<26)S=String.fromCharCode(65+A);else switch(A){case 26:S=" ";break;case xe.LL:d=Jt.LOWER;break;case xe.ML:d=Jt.MIXED;break;case xe.PS:m=d,d=Jt.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[y]);break;case xe.TEXT_COMPACTION_MODE_LATCH:d=Jt.ALPHA;break}break;case Jt.LOWER:if(A<26)S=String.fromCharCode(97+A);else switch(A){case 26:S=" ";break;case xe.AS:m=d,d=Jt.ALPHA_SHIFT;break;case xe.ML:d=Jt.MIXED;break;case xe.PS:m=d,d=Jt.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[y]);break;case xe.TEXT_COMPACTION_MODE_LATCH:d=Jt.ALPHA;break}break;case Jt.MIXED:if(A<xe.PL)S=xe.MIXED_CHARS[A];else switch(A){case xe.PL:d=Jt.PUNCT;break;case 26:S=" ";break;case xe.LL:d=Jt.LOWER;break;case xe.AL:d=Jt.ALPHA;break;case xe.PS:m=d,d=Jt.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[y]);break;case xe.TEXT_COMPACTION_MODE_LATCH:d=Jt.ALPHA;break}break;case Jt.PUNCT:if(A<xe.PAL)S=xe.PUNCT_CHARS[A];else switch(A){case xe.PAL:d=Jt.ALPHA;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[y]);break;case xe.TEXT_COMPACTION_MODE_LATCH:d=Jt.ALPHA;break}break;case Jt.ALPHA_SHIFT:if(d=m,A<26)S=String.fromCharCode(65+A);else switch(A){case 26:S=" ";break;case xe.TEXT_COMPACTION_MODE_LATCH:d=Jt.ALPHA;break}break;case Jt.PUNCT_SHIFT:if(d=m,A<xe.PAL)S=xe.PUNCT_CHARS[A];else switch(A){case xe.PAL:d=Jt.ALPHA;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[y]);break;case xe.TEXT_COMPACTION_MODE_LATCH:d=Jt.ALPHA;break}break}S!==""&&f.append(S),y++}}static byteCompaction(i,o,l,f,d){let m=new Ja,y=0,A=0,S=!1;switch(i){case xe.BYTE_COMPACTION_MODE_LATCH:let R=new Int32Array(6),L=o[f++];for(;f<o[0]&&!S;)switch(R[y++]=L,A=900*A+L,L=o[f++],L){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:f--,S=!0;break;default:if(y%5===0&&y>0){for(let k=0;k<6;++k)m.write(Number(Fi(A)>>Fi(8*(5-k))));A=0,y=0}break}f===o[0]&&L<xe.TEXT_COMPACTION_MODE_LATCH&&(R[y++]=L);for(let k=0;k<y;k++)m.write(R[k]);break;case xe.BYTE_COMPACTION_MODE_LATCH_6:for(;f<o[0]&&!S;){let k=o[f++];if(k<xe.TEXT_COMPACTION_MODE_LATCH)y++,A=900*A+k;else switch(k){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:f--,S=!0;break}if(y%5===0&&y>0){for(let G=0;G<6;++G)m.write(Number(Fi(A)>>Fi(8*(5-G))));A=0,y=0}}break}return d.append(Z.decode(m.toByteArray(),l)),f}static numericCompaction(i,o,l){let f=0,d=!1,m=new Int32Array(xe.MAX_NUMERIC_CODEWORDS);for(;o<i[0]&&!d;){let y=i[o++];if(o===i[0]&&(d=!0),y<xe.TEXT_COMPACTION_MODE_LATCH)m[f]=y,f++;else switch(y){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:o--,d=!0;break}(f%xe.MAX_NUMERIC_CODEWORDS===0||y===xe.NUMERIC_COMPACTION_MODE_LATCH||d)&&f>0&&(l.append(xe.decodeBase900toBase10(m,f)),f=0)}return o}static decodeBase900toBase10(i,o){let l=Fi(0);for(let d=0;d<o;d++)l+=xe.EXP900[o-d-1]*Fi(i[d]);let f=l.toString();if(f.charAt(0)!=="1")throw new j;return f.substring(1)}}xe.TEXT_COMPACTION_MODE_LATCH=900,xe.BYTE_COMPACTION_MODE_LATCH=901,xe.NUMERIC_COMPACTION_MODE_LATCH=902,xe.BYTE_COMPACTION_MODE_LATCH_6=924,xe.ECI_USER_DEFINED=925,xe.ECI_GENERAL_PURPOSE=926,xe.ECI_CHARSET=927,xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,xe.MACRO_PDF417_TERMINATOR=922,xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,xe.MAX_NUMERIC_CODEWORDS=15,xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,xe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,xe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,xe.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,xe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,xe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,xe.PL=25,xe.LL=27,xe.AS=27,xe.ML=28,xe.AL=28,xe.PS=29,xe.PAL=29,xe.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,xe.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",xe.EXP900=Vs()?fa():[],xe.NUMBER_OF_SEQUENCE_CODEWORDS=2;class yt{constructor(){}static decode(i,o,l,f,d,m,y){let A=new Vi(i,o,l,f,d),S=null,R=null,L;for(let te=!0;;te=!1){if(o!=null&&(S=yt.getRowIndicatorColumn(i,A,o,!0,m,y)),f!=null&&(R=yt.getRowIndicatorColumn(i,A,f,!1,m,y)),L=yt.merge(S,R),L==null)throw fe.getNotFoundInstance();let re=L.getBoundingBox();if(te&&re!=null&&(re.getMinY()<A.getMinY()||re.getMaxY()>A.getMaxY()))A=re;else break}L.setBoundingBox(A);let k=L.getBarcodeColumnCount()+1;L.setDetectionResultColumn(0,S),L.setDetectionResultColumn(k,R);let G=S!=null;for(let te=1;te<=k;te++){let re=G?te:k-te;if(L.getDetectionResultColumn(re)!==void 0)continue;let ue;re===0||re===k?ue=new Ci(A,re===0):ue=new ji(A),L.setDetectionResultColumn(re,ue);let ye=-1,ke=ye;for(let Pe=A.getMinY();Pe<=A.getMaxY();Pe++){if(ye=yt.getStartColumn(L,re,Pe,G),ye<0||ye>A.getMaxX()){if(ke===-1)continue;ye=ke}let Re=yt.detectCodeword(i,A.getMinX(),A.getMaxX(),G,ye,Pe,m,y);Re!=null&&(ue.setCodeword(Pe,Re),ke=ye,m=Math.min(m,Re.getWidth()),y=Math.max(y,Re.getWidth()))}}return yt.createDecoderResult(L)}static merge(i,o){if(i==null&&o==null)return null;let l=yt.getBarcodeMetadata(i,o);if(l==null)return null;let f=Vi.merge(yt.adjustBoundingBox(i),yt.adjustBoundingBox(o));return new Yn(l,f)}static adjustBoundingBox(i){if(i==null)return null;let o=i.getRowHeights();if(o==null)return null;let l=yt.getMax(o),f=0;for(let y of o)if(f+=l-y,y>0)break;let d=i.getCodewords();for(let y=0;f>0&&d[y]==null;y++)f--;let m=0;for(let y=o.length-1;y>=0&&(m+=l-o[y],!(o[y]>0));y--);for(let y=d.length-1;m>0&&d[y]==null;y--)m--;return i.getBoundingBox().addMissingRows(f,m,i.isLeft())}static getMax(i){let o=-1;for(let l of i)o=Math.max(o,l);return o}static getBarcodeMetadata(i,o){let l;if(i==null||(l=i.getBarcodeMetadata())==null)return o==null?null:o.getBarcodeMetadata();let f;return o==null||(f=o.getBarcodeMetadata())==null?l:l.getColumnCount()!==f.getColumnCount()&&l.getErrorCorrectionLevel()!==f.getErrorCorrectionLevel()&&l.getRowCount()!==f.getRowCount()?null:l}static getRowIndicatorColumn(i,o,l,f,d,m){let y=new Ci(o,f);for(let A=0;A<2;A++){let S=A===0?1:-1,R=Math.trunc(Math.trunc(l.getX()));for(let L=Math.trunc(Math.trunc(l.getY()));L<=o.getMaxY()&&L>=o.getMinY();L+=S){let k=yt.detectCodeword(i,0,i.getWidth(),f,R,L,d,m);k!=null&&(y.setCodeword(L,k),f?R=k.getStartX():R=k.getEndX())}}return y}static adjustCodewordCount(i,o){let l=o[0][1],f=l.getValue(),d=i.getBarcodeColumnCount()*i.getBarcodeRowCount()-yt.getNumberOfECCodeWords(i.getBarcodeECLevel());if(f.length===0){if(d<1||d>et.MAX_CODEWORDS_IN_BARCODE)throw fe.getNotFoundInstance();l.setValue(d)}else f[0]!==d&&l.setValue(d)}static createDecoderResult(i){let o=yt.createBarcodeMatrix(i);yt.adjustCodewordCount(i,o);let l=new Array,f=new Int32Array(i.getBarcodeRowCount()*i.getBarcodeColumnCount()),d=[],m=new Array;for(let A=0;A<i.getBarcodeRowCount();A++)for(let S=0;S<i.getBarcodeColumnCount();S++){let R=o[A][S+1].getValue(),L=A*i.getBarcodeColumnCount()+S;R.length===0?l.push(L):R.length===1?f[L]=R[0]:(m.push(L),d.push(R))}let y=new Array(d.length);for(let A=0;A<y.length;A++)y[A]=d[A];return yt.createDecoderResultFromAmbiguousValues(i.getBarcodeECLevel(),f,et.toIntArray(l),et.toIntArray(m),y)}static createDecoderResultFromAmbiguousValues(i,o,l,f,d){let m=new Int32Array(f.length),y=100;for(;y-- >0;){for(let A=0;A<m.length;A++)o[f[A]]=d[A][m[A]];try{return yt.decodeCodewords(o,i,l)}catch(A){if(!(A instanceof B))throw A}if(m.length===0)throw B.getChecksumInstance();for(let A=0;A<m.length;A++)if(m[A]<d[A].length-1){m[A]++;break}else if(m[A]=0,A===m.length-1)throw B.getChecksumInstance()}throw B.getChecksumInstance()}static createBarcodeMatrix(i){let o=Array.from({length:i.getBarcodeRowCount()},()=>new Array(i.getBarcodeColumnCount()+2));for(let f=0;f<o.length;f++)for(let d=0;d<o[f].length;d++)o[f][d]=new mi;let l=0;for(let f of i.getDetectionResultColumns()){if(f!=null){for(let d of f.getCodewords())if(d!=null){let m=d.getRowNumber();if(m>=0){if(m>=o.length)continue;o[m][l].setValue(d.getValue())}}}l++}return o}static isValidBarcodeColumn(i,o){return o>=0&&o<=i.getBarcodeColumnCount()+1}static getStartColumn(i,o,l,f){let d=f?1:-1,m=null;if(yt.isValidBarcodeColumn(i,o-d)&&(m=i.getDetectionResultColumn(o-d).getCodeword(l)),m!=null)return f?m.getEndX():m.getStartX();if(m=i.getDetectionResultColumn(o).getCodewordNearby(l),m!=null)return f?m.getStartX():m.getEndX();if(yt.isValidBarcodeColumn(i,o-d)&&(m=i.getDetectionResultColumn(o-d).getCodewordNearby(l)),m!=null)return f?m.getEndX():m.getStartX();let y=0;for(;yt.isValidBarcodeColumn(i,o-d);){o-=d;for(let A of i.getDetectionResultColumn(o).getCodewords())if(A!=null)return(f?A.getEndX():A.getStartX())+d*y*(A.getEndX()-A.getStartX());y++}return f?i.getBoundingBox().getMinX():i.getBoundingBox().getMaxX()}static detectCodeword(i,o,l,f,d,m,y,A){d=yt.adjustCodewordStartColumn(i,o,l,f,d,m);let S=yt.getModuleBitCount(i,o,l,f,d,m);if(S==null)return null;let R,L=Ze.sum(S);if(f)R=d+L;else{for(let te=0;te<S.length/2;te++){let re=S[te];S[te]=S[S.length-1-te],S[S.length-1-te]=re}R=d,d=R-L}if(!yt.checkCodewordSkew(L,y,A))return null;let k=Rn.getDecodedValue(S),G=et.getCodeword(k);return G===-1?null:new pi(d,R,yt.getCodewordBucketNumber(k),G)}static getModuleBitCount(i,o,l,f,d,m){let y=d,A=new Int32Array(8),S=0,R=f?1:-1,L=f;for(;(f?y<l:y>=o)&&S<A.length;)i.get(y,m)===L?(A[S]++,y+=R):(S++,L=!L);return S===A.length||y===(f?l:o)&&S===A.length-1?A:null}static getNumberOfECCodeWords(i){return 2<<i}static adjustCodewordStartColumn(i,o,l,f,d,m){let y=d,A=f?-1:1;for(let S=0;S<2;S++){for(;(f?y>=o:y<l)&&f===i.get(y,m);){if(Math.abs(d-y)>yt.CODEWORD_SKEW_SIZE)return d;y+=A}A=-A,f=!f}return y}static checkCodewordSkew(i,o,l){return o-yt.CODEWORD_SKEW_SIZE<=i&&i<=l+yt.CODEWORD_SKEW_SIZE}static decodeCodewords(i,o,l){if(i.length===0)throw j.getFormatInstance();let f=1<<o+1,d=yt.correctErrors(i,l,f);yt.verifyCodewordCount(i,f);let m=xe.decode(i,""+o);return m.setErrorsCorrected(d),m.setErasures(l.length),m}static correctErrors(i,o,l){if(o!=null&&o.length>l/2+yt.MAX_ERRORS||l<0||l>yt.MAX_EC_CODEWORDS)throw B.getChecksumInstance();return yt.errorCorrection.decode(i,l,o)}static verifyCodewordCount(i,o){if(i.length<4)throw j.getFormatInstance();let l=i[0];if(l>i.length)throw j.getFormatInstance();if(l===0)if(o<i.length)i[0]=i.length-o;else throw j.getFormatInstance()}static getBitCountForCodeword(i){let o=new Int32Array(8),l=0,f=o.length-1;for(;!((i&1)!==l&&(l=i&1,f--,f<0));)o[f]++,i>>=1;return o}static getCodewordBucketNumber(i){return i instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(i):this.getCodewordBucketNumber_number(i)}static getCodewordBucketNumber_number(i){return yt.getCodewordBucketNumber(yt.getBitCountForCodeword(i))}static getCodewordBucketNumber_Int32Array(i){return(i[0]-i[2]+i[4]-i[6]+9)%9}static toString(i){let o=new vs;for(let l=0;l<i.length;l++){o.format("Row %2d: ",l);for(let f=0;f<i[l].length;f++){let d=i[l][f];d.getValue().length===0?o.format("        ",null):o.format("%4d(%2d)",d.getValue()[0],d.getConfidence(d.getValue()[0]))}o.format("%n")}return o.toString()}}yt.CODEWORD_SKEW_SIZE=2,yt.MAX_ERRORS=3,yt.MAX_EC_CODEWORDS=512,yt.errorCorrection=new Ui;class Un{decode(i,o=null){let l=Un.decode(i,o,!1);if(l==null||l.length===0||l[0]==null)throw fe.getNotFoundInstance();return l[0]}decodeMultiple(i,o=null){try{return Un.decode(i,o,!0)}catch(l){throw l instanceof j||l instanceof B?fe.getNotFoundInstance():l}}static decode(i,o,l){const f=new Array,d=ot.detectMultiple(i,o,l);for(const m of d.getPoints()){const y=yt.decode(d.getBits(),m[4],m[5],m[6],m[7],Un.getMinCodewordWidth(m),Un.getMaxCodewordWidth(m)),A=new je(y.getText(),y.getRawBytes(),void 0,m,Le.PDF_417);A.putMetadata(vt.ERROR_CORRECTION_LEVEL,y.getECLevel());const S=y.getOther();S!=null&&A.putMetadata(vt.PDF417_EXTRA_METADATA,S),f.push(A)}return f.map(m=>m)}static getMaxWidth(i,o){return i==null||o==null?0:Math.trunc(Math.abs(i.getX()-o.getX()))}static getMinWidth(i,o){return i==null||o==null?Q.MAX_VALUE:Math.trunc(Math.abs(i.getX()-o.getX()))}static getMaxCodewordWidth(i){return Math.floor(Math.max(Math.max(Un.getMaxWidth(i[0],i[4]),Un.getMaxWidth(i[6],i[2])*et.MODULES_IN_CODEWORD/et.MODULES_IN_STOP_PATTERN),Math.max(Un.getMaxWidth(i[1],i[5]),Un.getMaxWidth(i[7],i[3])*et.MODULES_IN_CODEWORD/et.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(i){return Math.floor(Math.min(Math.min(Un.getMinWidth(i[0],i[4]),Un.getMinWidth(i[6],i[2])*et.MODULES_IN_CODEWORD/et.MODULES_IN_STOP_PATTERN),Math.min(Un.getMinWidth(i[1],i[5]),Un.getMinWidth(i[7],i[3])*et.MODULES_IN_CODEWORD/et.MODULES_IN_STOP_PATTERN)))}reset(){}}class da extends E{}da.kind="ReaderException";class $o{constructor(i,o){this.verbose=i===!0,o&&this.setHints(o)}decode(i,o){return o&&this.setHints(o),this.decodeInternal(i)}decodeWithState(i){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(i)}setHints(i){this.hints=i;const o=!s(i)&&i.get(Oe.TRY_HARDER)===!0,l=s(i)?null:i.get(Oe.POSSIBLE_FORMATS),f=new Array;if(!s(l)){const d=l.some(m=>m===Le.UPC_A||m===Le.UPC_E||m===Le.EAN_13||m===Le.EAN_8||m===Le.CODABAR||m===Le.CODE_39||m===Le.CODE_93||m===Le.CODE_128||m===Le.ITF||m===Le.RSS_14||m===Le.RSS_EXPANDED);d&&!o&&f.push(new Cr(i,this.verbose)),l.includes(Le.QR_CODE)&&f.push(new si),l.includes(Le.DATA_MATRIX)&&f.push(new Bn),l.includes(Le.AZTEC)&&f.push(new ss),l.includes(Le.PDF_417)&&f.push(new Un),d&&o&&f.push(new Cr(i,this.verbose))}f.length===0&&(o||f.push(new Cr(i,this.verbose)),f.push(new si),f.push(new Bn),f.push(new ss),f.push(new Un),o&&f.push(new Cr(i,this.verbose))),this.readers=f}reset(){if(this.readers!==null)for(const i of this.readers)i.reset()}decodeInternal(i){if(this.readers===null)throw new da("No readers where selected, nothing can be read.");for(const o of this.readers)try{return o.decode(i,this.hints)}catch(l){if(l instanceof da)continue}throw new fe("No MultiFormat Readers were able to detect the code.")}}class ls extends Ve{constructor(i=null,o=500){const l=new $o;l.setHints(i),super(l,o)}decodeBitmap(i){return this.reader.decodeWithState(i)}}class Ml extends Ve{constructor(i=500){super(new Un,i)}}class Pl extends Ve{constructor(i=500){super(new si,i)}}var $a;(function(P){P[P.ERROR_CORRECTION=0]="ERROR_CORRECTION",P[P.CHARACTER_SET=1]="CHARACTER_SET",P[P.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",P[P.MIN_SIZE=3]="MIN_SIZE",P[P.MAX_SIZE=4]="MAX_SIZE",P[P.MARGIN=5]="MARGIN",P[P.PDF417_COMPACT=6]="PDF417_COMPACT",P[P.PDF417_COMPACTION=7]="PDF417_COMPACTION",P[P.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",P[P.AZTEC_LAYERS=9]="AZTEC_LAYERS",P[P.QR_VERSION=10]="QR_VERSION"})($a||($a={}));var Vn=$a;class cs{constructor(i){this.field=i,this.cachedGenerators=[],this.cachedGenerators.push(new cn(i,Int32Array.from([1])))}buildGenerator(i){const o=this.cachedGenerators;if(i>=o.length){let l=o[o.length-1];const f=this.field;for(let d=o.length;d<=i;d++){const m=l.multiply(new cn(f,Int32Array.from([1,f.exp(d-1+f.getGeneratorBase())])));o.push(m),l=m}}return o[i]}encode(i,o){if(o===0)throw new I("No error correction bytes");const l=i.length-o;if(l<=0)throw new I("No data bytes provided");const f=this.buildGenerator(o),d=new Int32Array(l);$.arraycopy(i,0,d,0,l);let m=new cn(this.field,d);m=m.multiplyByMonomial(o,1);const A=m.divide(f)[1].getCoefficients(),S=o-A.length;for(let R=0;R<S;R++)i[l+R]=0;$.arraycopy(A,0,i,l+S,A.length)}}class Pt{constructor(){}static applyMaskPenaltyRule1(i){return Pt.applyMaskPenaltyRule1Internal(i,!0)+Pt.applyMaskPenaltyRule1Internal(i,!1)}static applyMaskPenaltyRule2(i){let o=0;const l=i.getArray(),f=i.getWidth(),d=i.getHeight();for(let m=0;m<d-1;m++){const y=l[m];for(let A=0;A<f-1;A++){const S=y[A];S===y[A+1]&&S===l[m+1][A]&&S===l[m+1][A+1]&&o++}}return Pt.N2*o}static applyMaskPenaltyRule3(i){let o=0;const l=i.getArray(),f=i.getWidth(),d=i.getHeight();for(let m=0;m<d;m++)for(let y=0;y<f;y++){const A=l[m];y+6<f&&A[y]===1&&A[y+1]===0&&A[y+2]===1&&A[y+3]===1&&A[y+4]===1&&A[y+5]===0&&A[y+6]===1&&(Pt.isWhiteHorizontal(A,y-4,y)||Pt.isWhiteHorizontal(A,y+7,y+11))&&o++,m+6<d&&l[m][y]===1&&l[m+1][y]===0&&l[m+2][y]===1&&l[m+3][y]===1&&l[m+4][y]===1&&l[m+5][y]===0&&l[m+6][y]===1&&(Pt.isWhiteVertical(l,y,m-4,m)||Pt.isWhiteVertical(l,y,m+7,m+11))&&o++}return o*Pt.N3}static isWhiteHorizontal(i,o,l){o=Math.max(o,0),l=Math.min(l,i.length);for(let f=o;f<l;f++)if(i[f]===1)return!1;return!0}static isWhiteVertical(i,o,l,f){l=Math.max(l,0),f=Math.min(f,i.length);for(let d=l;d<f;d++)if(i[d][o]===1)return!1;return!0}static applyMaskPenaltyRule4(i){let o=0;const l=i.getArray(),f=i.getWidth(),d=i.getHeight();for(let A=0;A<d;A++){const S=l[A];for(let R=0;R<f;R++)S[R]===1&&o++}const m=i.getHeight()*i.getWidth();return Math.floor(Math.abs(o*2-m)*10/m)*Pt.N4}static getDataMaskBit(i,o,l){let f,d;switch(i){case 0:f=l+o&1;break;case 1:f=l&1;break;case 2:f=o%3;break;case 3:f=(l+o)%3;break;case 4:f=Math.floor(l/2)+Math.floor(o/3)&1;break;case 5:d=l*o,f=(d&1)+d%3;break;case 6:d=l*o,f=(d&1)+d%3&1;break;case 7:d=l*o,f=d%3+(l+o&1)&1;break;default:throw new I("Invalid mask pattern: "+i)}return f===0}static applyMaskPenaltyRule1Internal(i,o){let l=0;const f=o?i.getHeight():i.getWidth(),d=o?i.getWidth():i.getHeight(),m=i.getArray();for(let y=0;y<f;y++){let A=0,S=-1;for(let R=0;R<d;R++){const L=o?m[y][R]:m[R][y];L===S?A++:(A>=5&&(l+=Pt.N1+(A-5)),A=1,S=L)}A>=5&&(l+=Pt.N1+(A-5))}return l}}Pt.N1=3,Pt.N2=3,Pt.N3=40,Pt.N4=10;class ga{constructor(i,o){this.width=i,this.height=o;const l=new Array(o);for(let f=0;f!==o;f++)l[f]=new Uint8Array(i);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(i,o){return this.bytes[o][i]}getArray(){return this.bytes}setNumber(i,o,l){this.bytes[o][i]=l}setBoolean(i,o,l){this.bytes[o][i]=l?1:0}clear(i){for(const o of this.bytes)ae.fill(o,i)}equals(i){if(!(i instanceof ga))return!1;const o=i;if(this.width!==o.width||this.height!==o.height)return!1;for(let l=0,f=this.height;l<f;++l){const d=this.bytes[l],m=o.bytes[l];for(let y=0,A=this.width;y<A;++y)if(d[y]!==m[y])return!1}return!0}toString(){const i=new K;for(let o=0,l=this.height;o<l;++o){const f=this.bytes[o];for(let d=0,m=this.width;d<m;++d)switch(f[d]){case 0:i.append(" 0");break;case 1:i.append(" 1");break;default:i.append("  ");break}i.append(`
`)}return i.toString()}}class us{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const i=new K;return i.append(`<<
`),i.append(" mode: "),i.append(this.mode?this.mode.toString():"null"),i.append(`
 ecLevel: `),i.append(this.ecLevel?this.ecLevel.toString():"null"),i.append(`
 version: `),i.append(this.version?this.version.toString():"null"),i.append(`
 maskPattern: `),i.append(this.maskPattern.toString()),this.matrix?(i.append(`
 matrix:
`),i.append(this.matrix.toString())):i.append(`
 matrix: null
`),i.append(`>>
`),i.toString()}setMode(i){this.mode=i}setECLevel(i){this.ecLevel=i}setVersion(i){this.version=i}setMaskPattern(i){this.maskPattern=i}setMatrix(i){this.matrix=i}static isValidMaskPattern(i){return i>=0&&i<us.NUM_MASK_PATTERNS}}us.NUM_MASK_PATTERNS=8;class Lt extends E{}Lt.kind="WriterException";class x{constructor(){}static clearMatrix(i){i.clear(255)}static buildMatrix(i,o,l,f,d){x.clearMatrix(d),x.embedBasicPatterns(l,d),x.embedTypeInfo(o,f,d),x.maybeEmbedVersionInfo(l,d),x.embedDataBits(i,f,d)}static embedBasicPatterns(i,o){x.embedPositionDetectionPatternsAndSeparators(o),x.embedDarkDotAtLeftBottomCorner(o),x.maybeEmbedPositionAdjustmentPatterns(i,o),x.embedTimingPatterns(o)}static embedTypeInfo(i,o,l){const f=new le;x.makeTypeInfoBits(i,o,f);for(let d=0,m=f.getSize();d<m;++d){const y=f.get(f.getSize()-1-d),A=x.TYPE_INFO_COORDINATES[d],S=A[0],R=A[1];if(l.setBoolean(S,R,y),d<8){const L=l.getWidth()-d-1;l.setBoolean(L,8,y)}else{const k=l.getHeight()-7+(d-8);l.setBoolean(8,k,y)}}}static maybeEmbedVersionInfo(i,o){if(i.getVersionNumber()<7)return;const l=new le;x.makeVersionInfoBits(i,l);let f=17;for(let d=0;d<6;++d)for(let m=0;m<3;++m){const y=l.get(f);f--,o.setBoolean(d,o.getHeight()-11+m,y),o.setBoolean(o.getHeight()-11+m,d,y)}}static embedDataBits(i,o,l){let f=0,d=-1,m=l.getWidth()-1,y=l.getHeight()-1;for(;m>0;){for(m===6&&(m-=1);y>=0&&y<l.getHeight();){for(let A=0;A<2;++A){const S=m-A;if(!x.isEmpty(l.get(S,y)))continue;let R;f<i.getSize()?(R=i.get(f),++f):R=!1,o!==255&&Pt.getDataMaskBit(o,S,y)&&(R=!R),l.setBoolean(S,y,R)}y+=d}d=-d,y+=d,m-=2}if(f!==i.getSize())throw new Lt("Not all bits consumed: "+f+"/"+i.getSize())}static findMSBSet(i){return 32-Q.numberOfLeadingZeros(i)}static calculateBCHCode(i,o){if(o===0)throw new I("0 polynomial");const l=x.findMSBSet(o);for(i<<=l-1;x.findMSBSet(i)>=l;)i^=o<<x.findMSBSet(i)-l;return i}static makeTypeInfoBits(i,o,l){if(!us.isValidMaskPattern(o))throw new Lt("Invalid mask pattern");const f=i.getBits()<<3|o;l.appendBits(f,5);const d=x.calculateBCHCode(f,x.TYPE_INFO_POLY);l.appendBits(d,10);const m=new le;if(m.appendBits(x.TYPE_INFO_MASK_PATTERN,15),l.xor(m),l.getSize()!==15)throw new Lt("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(i,o){o.appendBits(i.getVersionNumber(),6);const l=x.calculateBCHCode(i.getVersionNumber(),x.VERSION_INFO_POLY);if(o.appendBits(l,12),o.getSize()!==18)throw new Lt("should not happen but we got: "+o.getSize())}static isEmpty(i){return i===255}static embedTimingPatterns(i){for(let o=8;o<i.getWidth()-8;++o){const l=(o+1)%2;x.isEmpty(i.get(o,6))&&i.setNumber(o,6,l),x.isEmpty(i.get(6,o))&&i.setNumber(6,o,l)}}static embedDarkDotAtLeftBottomCorner(i){if(i.get(8,i.getHeight()-8)===0)throw new Lt;i.setNumber(8,i.getHeight()-8,1)}static embedHorizontalSeparationPattern(i,o,l){for(let f=0;f<8;++f){if(!x.isEmpty(l.get(i+f,o)))throw new Lt;l.setNumber(i+f,o,0)}}static embedVerticalSeparationPattern(i,o,l){for(let f=0;f<7;++f){if(!x.isEmpty(l.get(i,o+f)))throw new Lt;l.setNumber(i,o+f,0)}}static embedPositionAdjustmentPattern(i,o,l){for(let f=0;f<5;++f){const d=x.POSITION_ADJUSTMENT_PATTERN[f];for(let m=0;m<5;++m)l.setNumber(i+m,o+f,d[m])}}static embedPositionDetectionPattern(i,o,l){for(let f=0;f<7;++f){const d=x.POSITION_DETECTION_PATTERN[f];for(let m=0;m<7;++m)l.setNumber(i+m,o+f,d[m])}}static embedPositionDetectionPatternsAndSeparators(i){const o=x.POSITION_DETECTION_PATTERN[0].length;x.embedPositionDetectionPattern(0,0,i),x.embedPositionDetectionPattern(i.getWidth()-o,0,i),x.embedPositionDetectionPattern(0,i.getWidth()-o,i);const l=8;x.embedHorizontalSeparationPattern(0,l-1,i),x.embedHorizontalSeparationPattern(i.getWidth()-l,l-1,i),x.embedHorizontalSeparationPattern(0,i.getWidth()-l,i);const f=7;x.embedVerticalSeparationPattern(f,0,i),x.embedVerticalSeparationPattern(i.getHeight()-f-1,0,i),x.embedVerticalSeparationPattern(f,i.getHeight()-f,i)}static maybeEmbedPositionAdjustmentPatterns(i,o){if(i.getVersionNumber()<2)return;const l=i.getVersionNumber()-1,f=x.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let d=0,m=f.length;d!==m;d++){const y=f[d];if(y>=0)for(let A=0;A!==m;A++){const S=f[A];S>=0&&x.isEmpty(o.get(S,y))&&x.embedPositionAdjustmentPattern(S-2,y-2,o)}}}}x.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),x.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),x.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),x.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),x.VERSION_INFO_POLY=7973,x.TYPE_INFO_POLY=1335,x.TYPE_INFO_MASK_PATTERN=21522;class N{constructor(i,o){this.dataBytes=i,this.errorCorrectionBytes=o}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class D{constructor(){}static calculateMaskPenalty(i){return Pt.applyMaskPenaltyRule1(i)+Pt.applyMaskPenaltyRule2(i)+Pt.applyMaskPenaltyRule3(i)+Pt.applyMaskPenaltyRule4(i)}static encode(i,o,l=null){let f=D.DEFAULT_BYTE_MODE_ENCODING;const d=l!==null&&l.get(Vn.CHARACTER_SET)!==void 0;d&&(f=l.get(Vn.CHARACTER_SET).toString());const m=this.chooseMode(i,f),y=new le;if(m===Je.BYTE&&(d||D.DEFAULT_BYTE_MODE_ENCODING!==f)){const Pe=V.getCharacterSetECIByName(f);Pe!==void 0&&this.appendECI(Pe,y)}this.appendModeInfo(m,y);const A=new le;this.appendBytes(i,m,A,f);let S;if(l!==null&&l.get(Vn.QR_VERSION)!==void 0){const Pe=Number.parseInt(l.get(Vn.QR_VERSION).toString(),10);S=Xe.getVersionForNumber(Pe);const Re=this.calculateBitsNeeded(m,y,A,S);if(!this.willFit(Re,S,o))throw new Lt("Data too big for requested version")}else S=this.recommendVersion(o,m,y,A);const R=new le;R.appendBitArray(y);const L=m===Je.BYTE?A.getSizeInBytes():i.length;this.appendLengthInfo(L,S,m,R),R.appendBitArray(A);const k=S.getECBlocksForLevel(o),G=S.getTotalCodewords()-k.getTotalECCodewords();this.terminateBits(G,R);const te=this.interleaveWithECBytes(R,S.getTotalCodewords(),G,k.getNumBlocks()),re=new us;re.setECLevel(o),re.setMode(m),re.setVersion(S);const ue=S.getDimensionForVersion(),ye=new ga(ue,ue),ke=this.chooseMaskPattern(te,o,S,ye);return re.setMaskPattern(ke),x.buildMatrix(te,o,S,ke,ye),re.setMatrix(ye),re}static recommendVersion(i,o,l,f){const d=this.calculateBitsNeeded(o,l,f,Xe.getVersionForNumber(1)),m=this.chooseVersion(d,i),y=this.calculateBitsNeeded(o,l,f,m);return this.chooseVersion(y,i)}static calculateBitsNeeded(i,o,l,f){return o.getSize()+i.getCharacterCountBits(f)+l.getSize()}static getAlphanumericCode(i){return i<D.ALPHANUMERIC_TABLE.length?D.ALPHANUMERIC_TABLE[i]:-1}static chooseMode(i,o=null){if(V.SJIS.getName()===o&&this.isOnlyDoubleByteKanji(i))return Je.KANJI;let l=!1,f=!1;for(let d=0,m=i.length;d<m;++d){const y=i.charAt(d);if(D.isDigit(y))l=!0;else if(this.getAlphanumericCode(y.charCodeAt(0))!==-1)f=!0;else return Je.BYTE}return f?Je.ALPHANUMERIC:l?Je.NUMERIC:Je.BYTE}static isOnlyDoubleByteKanji(i){let o;try{o=Z.encode(i,V.SJIS)}catch{return!1}const l=o.length;if(l%2!==0)return!1;for(let f=0;f<l;f+=2){const d=o[f]&255;if((d<129||d>159)&&(d<224||d>235))return!1}return!0}static chooseMaskPattern(i,o,l,f){let d=Number.MAX_SAFE_INTEGER,m=-1;for(let y=0;y<us.NUM_MASK_PATTERNS;y++){x.buildMatrix(i,o,l,y,f);let A=this.calculateMaskPenalty(f);A<d&&(d=A,m=y)}return m}static chooseVersion(i,o){for(let l=1;l<=40;l++){const f=Xe.getVersionForNumber(l);if(D.willFit(i,f,o))return f}throw new Lt("Data too big")}static willFit(i,o,l){const f=o.getTotalCodewords(),m=o.getECBlocksForLevel(l).getTotalECCodewords(),y=f-m,A=(i+7)/8;return y>=A}static terminateBits(i,o){const l=i*8;if(o.getSize()>l)throw new Lt("data bits cannot fit in the QR Code"+o.getSize()+" > "+l);for(let m=0;m<4&&o.getSize()<l;++m)o.appendBit(!1);const f=o.getSize()&7;if(f>0)for(let m=f;m<8;m++)o.appendBit(!1);const d=i-o.getSizeInBytes();for(let m=0;m<d;++m)o.appendBits((m&1)===0?236:17,8);if(o.getSize()!==l)throw new Lt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(i,o,l,f,d,m){if(f>=l)throw new Lt("Block ID too large");const y=i%l,A=l-y,S=Math.floor(i/l),R=S+1,L=Math.floor(o/l),k=L+1,G=S-L,te=R-k;if(G!==te)throw new Lt("EC bytes mismatch");if(l!==A+y)throw new Lt("RS blocks mismatch");if(i!==(L+G)*A+(k+te)*y)throw new Lt("Total bytes mismatch");f<A?(d[0]=L,m[0]=G):(d[0]=k,m[0]=te)}static interleaveWithECBytes(i,o,l,f){if(i.getSizeInBytes()!==l)throw new Lt("Number of bits and data bytes does not match");let d=0,m=0,y=0;const A=new Array;for(let R=0;R<f;++R){const L=new Int32Array(1),k=new Int32Array(1);D.getNumDataBytesAndNumECBytesForBlockID(o,l,f,R,L,k);const G=L[0],te=new Uint8Array(G);i.toBytes(8*d,te,0,G);const re=D.generateECBytes(te,k[0]);A.push(new N(te,re)),m=Math.max(m,G),y=Math.max(y,re.length),d+=L[0]}if(l!==d)throw new Lt("Data bytes does not match offset");const S=new le;for(let R=0;R<m;++R)for(const L of A){const k=L.getDataBytes();R<k.length&&S.appendBits(k[R],8)}for(let R=0;R<y;++R)for(const L of A){const k=L.getErrorCorrectionBytes();R<k.length&&S.appendBits(k[R],8)}if(o!==S.getSizeInBytes())throw new Lt("Interleaving error: "+o+" and "+S.getSizeInBytes()+" differ.");return S}static generateECBytes(i,o){const l=i.length,f=new Int32Array(l+o);for(let m=0;m<l;m++)f[m]=i[m]&255;new cs(At.QR_CODE_FIELD_256).encode(f,o);const d=new Uint8Array(o);for(let m=0;m<o;m++)d[m]=f[l+m];return d}static appendModeInfo(i,o){o.appendBits(i.getBits(),4)}static appendLengthInfo(i,o,l,f){const d=l.getCharacterCountBits(o);if(i>=1<<d)throw new Lt(i+" is bigger than "+((1<<d)-1));f.appendBits(i,d)}static appendBytes(i,o,l,f){switch(o){case Je.NUMERIC:D.appendNumericBytes(i,l);break;case Je.ALPHANUMERIC:D.appendAlphanumericBytes(i,l);break;case Je.BYTE:D.append8BitBytes(i,l,f);break;case Je.KANJI:D.appendKanjiBytes(i,l);break;default:throw new Lt("Invalid mode: "+o)}}static getDigit(i){return i.charCodeAt(0)-48}static isDigit(i){const o=D.getDigit(i);return o>=0&&o<=9}static appendNumericBytes(i,o){const l=i.length;let f=0;for(;f<l;){const d=D.getDigit(i.charAt(f));if(f+2<l){const m=D.getDigit(i.charAt(f+1)),y=D.getDigit(i.charAt(f+2));o.appendBits(d*100+m*10+y,10),f+=3}else if(f+1<l){const m=D.getDigit(i.charAt(f+1));o.appendBits(d*10+m,7),f+=2}else o.appendBits(d,4),f++}}static appendAlphanumericBytes(i,o){const l=i.length;let f=0;for(;f<l;){const d=D.getAlphanumericCode(i.charCodeAt(f));if(d===-1)throw new Lt;if(f+1<l){const m=D.getAlphanumericCode(i.charCodeAt(f+1));if(m===-1)throw new Lt;o.appendBits(d*45+m,11),f+=2}else o.appendBits(d,6),f++}}static append8BitBytes(i,o,l){let f;try{f=Z.encode(i,l)}catch(d){throw new Lt(d)}for(let d=0,m=f.length;d!==m;d++){const y=f[d];o.appendBits(y,8)}}static appendKanjiBytes(i,o){let l;try{l=Z.encode(i,V.SJIS)}catch(d){throw new Lt(d)}const f=l.length;for(let d=0;d<f;d+=2){const m=l[d]&255,y=l[d+1]&255,A=m<<8&4294967295|y;let S=-1;if(A>=33088&&A<=40956?S=A-33088:A>=57408&&A<=60351&&(S=A-49472),S===-1)throw new Lt("Invalid byte sequence");const R=(S>>8)*192+(S&255);o.appendBits(R,13)}}static appendECI(i,o){o.appendBits(Je.ECI.getBits(),4),o.appendBits(i.getValue(),8)}}D.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),D.DEFAULT_BYTE_MODE_ENCODING=V.UTF8.getName();class F{write(i,o,l,f=null){if(i.length===0)throw new I("Found empty contents");if(o<0||l<0)throw new I("Requested dimensions are too small: "+o+"x"+l);let d=It.L,m=F.QUIET_ZONE_SIZE;f!==null&&(f.get(Vn.ERROR_CORRECTION)!==void 0&&(d=It.fromString(f.get(Vn.ERROR_CORRECTION).toString())),f.get(Vn.MARGIN)!==void 0&&(m=Number.parseInt(f.get(Vn.MARGIN).toString(),10)));const y=D.encode(i,d,f);return this.renderResult(y,o,l,m)}writeToDom(i,o,l,f,d=null){typeof i=="string"&&(i=document.querySelector(i));const m=this.write(o,l,f,d);i&&i.appendChild(m)}renderResult(i,o,l,f){const d=i.getMatrix();if(d===null)throw new ir;const m=d.getWidth(),y=d.getHeight(),A=m+f*2,S=y+f*2,R=Math.max(o,A),L=Math.max(l,S),k=Math.min(Math.floor(R/A),Math.floor(L/S)),G=Math.floor((R-m*k)/2),te=Math.floor((L-y*k)/2),re=this.createSVGElement(R,L);for(let ue=0,ye=te;ue<y;ue++,ye+=k)for(let ke=0,Pe=G;ke<m;ke++,Pe+=k)if(d.get(ke,ue)===1){const Re=this.createSvgRectElement(Pe,ye,k,k);re.appendChild(Re)}return re}createSVGElement(i,o){const l=document.createElementNS(F.SVG_NS,"svg");return l.setAttributeNS(null,"height",i.toString()),l.setAttributeNS(null,"width",o.toString()),l}createSvgRectElement(i,o,l,f){const d=document.createElementNS(F.SVG_NS,"rect");return d.setAttributeNS(null,"x",i.toString()),d.setAttributeNS(null,"y",o.toString()),d.setAttributeNS(null,"height",l.toString()),d.setAttributeNS(null,"width",f.toString()),d.setAttributeNS(null,"fill","#000000"),d}}F.QUIET_ZONE_SIZE=4,F.SVG_NS="http://www.w3.org/2000/svg";class ce{encode(i,o,l,f,d){if(i.length===0)throw new I("Found empty contents");if(o!==Le.QR_CODE)throw new I("Can only encode QR_CODE, but got "+o);if(l<0||f<0)throw new I(`Requested dimensions are too small: ${l}x${f}`);let m=It.L,y=ce.QUIET_ZONE_SIZE;d!==null&&(d.get(Vn.ERROR_CORRECTION)!==void 0&&(m=It.fromString(d.get(Vn.ERROR_CORRECTION).toString())),d.get(Vn.MARGIN)!==void 0&&(y=Number.parseInt(d.get(Vn.MARGIN).toString(),10)));const A=D.encode(i,m,d);return ce.renderResult(A,l,f,y)}static renderResult(i,o,l,f){const d=i.getMatrix();if(d===null)throw new ir;const m=d.getWidth(),y=d.getHeight(),A=m+f*2,S=y+f*2,R=Math.max(o,A),L=Math.max(l,S),k=Math.min(Math.floor(R/A),Math.floor(L/S)),G=Math.floor((R-m*k)/2),te=Math.floor((L-y*k)/2),re=new $e(R,L);for(let ue=0,ye=te;ue<y;ue++,ye+=k)for(let ke=0,Pe=G;ke<m;ke++,Pe+=k)d.get(ke,ue)===1&&re.setRegion(Pe,ye,k,k);return re}}ce.QUIET_ZONE_SIZE=4;class Ee{encode(i,o,l,f,d){let m;switch(o){case Le.QR_CODE:m=new ce;break;default:throw new I("No encoder available for format "+o)}return m.encode(i,o,l,f,d)}}class Be extends Ge{constructor(i,o,l,f,d,m,y,A){if(super(m,y),this.yuvData=i,this.dataWidth=o,this.dataHeight=l,this.left=f,this.top=d,f+m>o||d+y>l)throw new I("Crop rectangle does not fit within image data.");A&&this.reverseHorizontal(m,y)}getRow(i,o){if(i<0||i>=this.getHeight())throw new I("Requested row is outside the image: "+i);const l=this.getWidth();(o==null||o.length<l)&&(o=new Uint8ClampedArray(l));const f=(i+this.top)*this.dataWidth+this.left;return $.arraycopy(this.yuvData,f,o,0,l),o}getMatrix(){const i=this.getWidth(),o=this.getHeight();if(i===this.dataWidth&&o===this.dataHeight)return this.yuvData;const l=i*o,f=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return $.arraycopy(this.yuvData,d,f,0,l),f;for(let m=0;m<o;m++){const y=m*i;$.arraycopy(this.yuvData,d,f,y,i),d+=this.dataWidth}return f}isCropSupported(){return!0}crop(i,o,l,f){return new Be(this.yuvData,this.dataWidth,this.dataHeight,this.left+i,this.top+o,l,f,!1)}renderThumbnail(){const i=this.getWidth()/Be.THUMBNAIL_SCALE_FACTOR,o=this.getHeight()/Be.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(i*o),f=this.yuvData;let d=this.top*this.dataWidth+this.left;for(let m=0;m<o;m++){const y=m*i;for(let A=0;A<i;A++){const S=f[d+A*Be.THUMBNAIL_SCALE_FACTOR]&255;l[y+A]=4278190080|S*65793}d+=this.dataWidth*Be.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/Be.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Be.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(i,o){const l=this.yuvData;for(let f=0,d=this.top*this.dataWidth+this.left;f<o;f++,d+=this.dataWidth){const m=d+i/2;for(let y=d,A=d+i-1;y<m;y++,A--){const S=l[y];l[y]=l[A],l[A]=S}}}invert(){return new ct(this)}}Be.THUMBNAIL_SCALE_FACTOR=2;class gt extends Ge{constructor(i,o,l,f,d,m,y){if(super(o,l),this.dataWidth=f,this.dataHeight=d,this.left=m,this.top=y,i.BYTES_PER_ELEMENT===4){const A=o*l,S=new Uint8ClampedArray(A);for(let R=0;R<A;R++){const L=i[R],k=L>>16&255,G=L>>7&510,te=L&255;S[R]=(k+G+te)/4&255}this.luminances=S}else this.luminances=i;if(f===void 0&&(this.dataWidth=o),d===void 0&&(this.dataHeight=l),m===void 0&&(this.left=0),y===void 0&&(this.top=0),this.left+o>this.dataWidth||this.top+l>this.dataHeight)throw new I("Crop rectangle does not fit within image data.")}getRow(i,o){if(i<0||i>=this.getHeight())throw new I("Requested row is outside the image: "+i);const l=this.getWidth();(o==null||o.length<l)&&(o=new Uint8ClampedArray(l));const f=(i+this.top)*this.dataWidth+this.left;return $.arraycopy(this.luminances,f,o,0,l),o}getMatrix(){const i=this.getWidth(),o=this.getHeight();if(i===this.dataWidth&&o===this.dataHeight)return this.luminances;const l=i*o,f=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return $.arraycopy(this.luminances,d,f,0,l),f;for(let m=0;m<o;m++){const y=m*i;$.arraycopy(this.luminances,d,f,y,i),d+=this.dataWidth}return f}isCropSupported(){return!0}crop(i,o,l,f){return new gt(this.luminances,l,f,this.dataWidth,this.dataHeight,this.left+i,this.top+o)}invert(){return new ct(this)}}class jn extends V{static forName(i){return this.getCharacterSetECIByName(i)}}class Qt{}Qt.ISO_8859_1=V.ISO8859_1;class vn{isCompact(){return this.compact}setCompact(i){this.compact=i}getSize(){return this.size}setSize(i){this.size=i}getLayers(){return this.layers}setLayers(i){this.layers=i}getCodeWords(){return this.codeWords}setCodeWords(i){this.codeWords=i}getMatrix(){return this.matrix}setMatrix(i){this.matrix=i}}class xi{static singletonList(i){return[i]}static min(i,o){return i.sort(o)[0]}}class hs{constructor(i){this.previous=i}getPrevious(){return this.previous}}class Pr extends hs{constructor(i,o,l){super(i),this.value=o,this.bitCount=l}appendTo(i,o){i.appendBits(this.value,this.bitCount)}add(i,o){return new Pr(this,i,o)}addBinaryShift(i,o){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Pr(this,i,o)}toString(){let i=this.value&(1<<this.bitCount)-1;return i|=1<<this.bitCount,"<"+Q.toBinaryString(i|1<<this.bitCount).substring(1)+">"}}class yi extends Pr{constructor(i,o,l){super(i,0,0),this.binaryShiftStart=o,this.binaryShiftByteCount=l}appendTo(i,o){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(i.appendBits(31,5),this.binaryShiftByteCount>62?i.appendBits(this.binaryShiftByteCount-31,16):l===0?i.appendBits(Math.min(this.binaryShiftByteCount,31),5):i.appendBits(this.binaryShiftByteCount-31,5)),i.appendBits(o[this.binaryShiftStart+l],8)}addBinaryShift(i,o){return new yi(this,i,o)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function ma(P,i,o){return new yi(P,i,o)}function fs(P,i,o){return new Pr(P,i,o)}const eo=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],js=0,Ll=1,Ii=2,qc=3,zi=4,el=new Pr(null,0,0),pa=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function h0(P){for(let i of P)ae.fill(i,-1);return P[js][zi]=0,P[Ll][zi]=0,P[Ll][js]=28,P[qc][zi]=0,P[Ii][zi]=0,P[Ii][js]=15,P}const tl=h0(ae.createInt32Array(6,6));class Hi{constructor(i,o,l,f){this.token=i,this.mode=o,this.binaryShiftByteCount=l,this.bitCount=f}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(i,o){let l=this.bitCount,f=this.token;if(i!==this.mode){let m=pa[this.mode][i];f=fs(f,m&65535,m>>16),l+=m>>16}let d=i===Ii?4:5;return f=fs(f,o,d),new Hi(f,i,0,l+d)}shiftAndAppend(i,o){let l=this.token,f=this.mode===Ii?4:5;return l=fs(l,tl[this.mode][i],f),l=fs(l,o,5),new Hi(l,this.mode,0,this.bitCount+f+5)}addBinaryShiftChar(i){let o=this.token,l=this.mode,f=this.bitCount;if(this.mode===zi||this.mode===Ii){let y=pa[l][js];o=fs(o,y&65535,y>>16),f+=y>>16,l=js}let d=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,m=new Hi(o,l,this.binaryShiftByteCount+1,f+d);return m.binaryShiftByteCount===2078&&(m=m.endBinaryShift(i+1)),m}endBinaryShift(i){if(this.binaryShiftByteCount===0)return this;let o=this.token;return o=ma(o,i-this.binaryShiftByteCount,this.binaryShiftByteCount),new Hi(o,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(i){let o=this.bitCount+(pa[this.mode][i.mode]>>16);return this.binaryShiftByteCount<i.binaryShiftByteCount?o+=Hi.calculateBinaryShiftCost(i)-Hi.calculateBinaryShiftCost(this):this.binaryShiftByteCount>i.binaryShiftByteCount&&i.binaryShiftByteCount>0&&(o+=10),o<=i.bitCount}toBitArray(i){let o=[];for(let f=this.endBinaryShift(i.length).token;f!==null;f=f.getPrevious())o.unshift(f);let l=new le;for(const f of o)f.appendTo(l,i);return l}toString(){return J.format("%s bits=%d bytes=%d",eo[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(i){return i.binaryShiftByteCount>62?21:i.binaryShiftByteCount>31?20:i.binaryShiftByteCount>0?10:0}}Hi.INITIAL_STATE=new Hi(el,js,0,0);function bh(P){const i=J.getCharCode(" "),o=J.getCharCode("."),l=J.getCharCode(",");P[js][i]=1;const f=J.getCharCode("Z"),d=J.getCharCode("A");for(let k=d;k<=f;k++)P[js][k]=k-d+2;P[Ll][i]=1;const m=J.getCharCode("z"),y=J.getCharCode("a");for(let k=y;k<=m;k++)P[Ll][k]=k-y+2;P[Ii][i]=1;const A=J.getCharCode("9"),S=J.getCharCode("0");for(let k=S;k<=A;k++)P[Ii][k]=k-S+2;P[Ii][l]=12,P[Ii][o]=13;const R=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let k=0;k<R.length;k++)P[qc][J.getCharCode(R[k])]=k;const L=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let k=0;k<L.length;k++)J.getCharCode(L[k])>0&&(P[zi][J.getCharCode(L[k])]=k);return P}const nl=bh(ae.createInt32Array(5,256));class xa{constructor(i){this.text=i}encode(){const i=J.getCharCode(" "),o=J.getCharCode(`
`);let l=xi.singletonList(Hi.INITIAL_STATE);for(let d=0;d<this.text.length;d++){let m,y=d+1<this.text.length?this.text[d+1]:0;switch(this.text[d]){case J.getCharCode("\r"):m=y===o?2:0;break;case J.getCharCode("."):m=y===i?3:0;break;case J.getCharCode(","):m=y===i?4:0;break;case J.getCharCode(":"):m=y===i?5:0;break;default:m=0}m>0?(l=xa.updateStateListForPair(l,d,m),d++):l=this.updateStateListForChar(l,d)}return xi.min(l,(d,m)=>d.getBitCount()-m.getBitCount()).toBitArray(this.text)}updateStateListForChar(i,o){const l=[];for(let f of i)this.updateStateForChar(f,o,l);return xa.simplifyStates(l)}updateStateForChar(i,o,l){let f=this.text[o]&255,d=nl[i.getMode()][f]>0,m=null;for(let y=0;y<=zi;y++){let A=nl[y][f];if(A>0){if(m==null&&(m=i.endBinaryShift(o)),!d||y===i.getMode()||y===Ii){const S=m.latchAndAppend(y,A);l.push(S)}if(!d&&tl[i.getMode()][y]>=0){const S=m.shiftAndAppend(y,A);l.push(S)}}}if(i.getBinaryShiftByteCount()>0||nl[i.getMode()][f]===0){let y=i.addBinaryShiftChar(o);l.push(y)}}static updateStateListForPair(i,o,l){const f=[];for(let d of i)this.updateStateForPair(d,o,l,f);return this.simplifyStates(f)}static updateStateForPair(i,o,l,f){let d=i.endBinaryShift(o);if(f.push(d.latchAndAppend(zi,l)),i.getMode()!==zi&&f.push(d.shiftAndAppend(zi,l)),l===3||l===4){let m=d.latchAndAppend(Ii,16-l).latchAndAppend(Ii,1);f.push(m)}if(i.getBinaryShiftByteCount()>0){let m=i.addBinaryShiftChar(o).addBinaryShiftChar(o+1);f.push(m)}}static simplifyStates(i){let o=[];for(const l of i){let f=!0;for(const d of o){if(d.isBetterThanOrEqualTo(l)){f=!1;break}l.isBetterThanOrEqualTo(d)&&(o=o.filter(m=>m!==d))}f&&o.push(l)}return o}}class Vt{constructor(){}static encodeBytes(i){return Vt.encode(i,Vt.DEFAULT_EC_PERCENT,Vt.DEFAULT_AZTEC_LAYERS)}static encode(i,o,l){let f=new xa(i).encode(),d=Q.truncDivision(f.getSize()*o,100)+11,m=f.getSize()+d,y,A,S,R,L;if(l!==Vt.DEFAULT_AZTEC_LAYERS){if(y=l<0,A=Math.abs(l),A>(y?Vt.MAX_NB_BITS_COMPACT:Vt.MAX_NB_BITS))throw new I(J.format("Illegal value %s for layers",l));S=Vt.totalBitsInLayer(A,y),R=Vt.WORD_SIZE[A];let Re=S-S%R;if(L=Vt.stuffBits(f,R),L.getSize()+d>Re)throw new I("Data to large for user specified layer");if(y&&L.getSize()>R*64)throw new I("Data to large for user specified layer")}else{R=0,L=null;for(let Re=0;;Re++){if(Re>Vt.MAX_NB_BITS)throw new I("Data too large for an Aztec code");if(y=Re<=3,A=y?Re+1:Re,S=Vt.totalBitsInLayer(A,y),m>S)continue;(L==null||R!==Vt.WORD_SIZE[A])&&(R=Vt.WORD_SIZE[A],L=Vt.stuffBits(f,R));let Rt=S-S%R;if(!(y&&L.getSize()>R*64)&&L.getSize()+d<=Rt)break}}let k=Vt.generateCheckWords(L,S,R),G=L.getSize()/R,te=Vt.generateModeMessage(y,A,G),re=(y?11:14)+A*4,ue=new Int32Array(re),ye;if(y){ye=re;for(let Re=0;Re<ue.length;Re++)ue[Re]=Re}else{ye=re+1+2*Q.truncDivision(Q.truncDivision(re,2)-1,15);let Re=Q.truncDivision(re,2),Rt=Q.truncDivision(ye,2);for(let pt=0;pt<Re;pt++){let Jn=pt+Q.truncDivision(pt,15);ue[Re-pt-1]=Rt-Jn-1,ue[Re+pt]=Rt+Jn+1}}let ke=new $e(ye);for(let Re=0,Rt=0;Re<A;Re++){let pt=(A-Re)*4+(y?9:12);for(let Jn=0;Jn<pt;Jn++){let Ni=Jn*2;for(let Fr=0;Fr<2;Fr++)k.get(Rt+Ni+Fr)&&ke.set(ue[Re*2+Fr],ue[Re*2+Jn]),k.get(Rt+pt*2+Ni+Fr)&&ke.set(ue[Re*2+Jn],ue[re-1-Re*2-Fr]),k.get(Rt+pt*4+Ni+Fr)&&ke.set(ue[re-1-Re*2-Fr],ue[re-1-Re*2-Jn]),k.get(Rt+pt*6+Ni+Fr)&&ke.set(ue[re-1-Re*2-Jn],ue[Re*2+Fr])}Rt+=pt*8}if(Vt.drawModeMessage(ke,y,ye,te),y)Vt.drawBullsEye(ke,Q.truncDivision(ye,2),5);else{Vt.drawBullsEye(ke,Q.truncDivision(ye,2),7);for(let Re=0,Rt=0;Re<Q.truncDivision(re,2)-1;Re+=15,Rt+=16)for(let pt=Q.truncDivision(ye,2)&1;pt<ye;pt+=2)ke.set(Q.truncDivision(ye,2)-Rt,pt),ke.set(Q.truncDivision(ye,2)+Rt,pt),ke.set(pt,Q.truncDivision(ye,2)-Rt),ke.set(pt,Q.truncDivision(ye,2)+Rt)}let Pe=new vn;return Pe.setCompact(y),Pe.setSize(ye),Pe.setLayers(A),Pe.setCodeWords(G),Pe.setMatrix(ke),Pe}static drawBullsEye(i,o,l){for(let f=0;f<l;f+=2)for(let d=o-f;d<=o+f;d++)i.set(d,o-f),i.set(d,o+f),i.set(o-f,d),i.set(o+f,d);i.set(o-l,o-l),i.set(o-l+1,o-l),i.set(o-l,o-l+1),i.set(o+l,o-l),i.set(o+l,o-l+1),i.set(o+l,o+l-1)}static generateModeMessage(i,o,l){let f=new le;return i?(f.appendBits(o-1,2),f.appendBits(l-1,6),f=Vt.generateCheckWords(f,28,4)):(f.appendBits(o-1,5),f.appendBits(l-1,11),f=Vt.generateCheckWords(f,40,4)),f}static drawModeMessage(i,o,l,f){let d=Q.truncDivision(l,2);if(o)for(let m=0;m<7;m++){let y=d-3+m;f.get(m)&&i.set(y,d-5),f.get(m+7)&&i.set(d+5,y),f.get(20-m)&&i.set(y,d+5),f.get(27-m)&&i.set(d-5,y)}else for(let m=0;m<10;m++){let y=d-5+m+Q.truncDivision(m,5);f.get(m)&&i.set(y,d-7),f.get(m+10)&&i.set(d+7,y),f.get(29-m)&&i.set(y,d+7),f.get(39-m)&&i.set(d-7,y)}}static generateCheckWords(i,o,l){let f=i.getSize()/l,d=new cs(Vt.getGF(l)),m=Q.truncDivision(o,l),y=Vt.bitsToWords(i,l,m);d.encode(y,m-f);let A=o%l,S=new le;S.appendBits(0,A);for(const R of Array.from(y))S.appendBits(R,l);return S}static bitsToWords(i,o,l){let f=new Int32Array(l),d,m;for(d=0,m=i.getSize()/o;d<m;d++){let y=0;for(let A=0;A<o;A++)y|=i.get(d*o+A)?1<<o-A-1:0;f[d]=y}return f}static getGF(i){switch(i){case 4:return At.AZTEC_PARAM;case 6:return At.AZTEC_DATA_6;case 8:return At.AZTEC_DATA_8;case 10:return At.AZTEC_DATA_10;case 12:return At.AZTEC_DATA_12;default:throw new I("Unsupported word size "+i)}}static stuffBits(i,o){let l=new le,f=i.getSize(),d=(1<<o)-2;for(let m=0;m<f;m+=o){let y=0;for(let A=0;A<o;A++)(m+A>=f||i.get(m+A))&&(y|=1<<o-1-A);(y&d)===d?(l.appendBits(y&d,o),m--):(y&d)===0?(l.appendBits(y|1,o),m--):l.appendBits(y,o)}return l}static totalBitsInLayer(i,o){return((o?88:112)+16*i)*i}}Vt.DEFAULT_EC_PERCENT=33,Vt.DEFAULT_AZTEC_LAYERS=0,Vt.MAX_NB_BITS=32,Vt.MAX_NB_BITS_COMPACT=4,Vt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class rl{encode(i,o,l,f){return this.encodeWithHints(i,o,l,f,null)}encodeWithHints(i,o,l,f,d){let m=Qt.ISO_8859_1,y=Vt.DEFAULT_EC_PERCENT,A=Vt.DEFAULT_AZTEC_LAYERS;return d!=null&&(d.has(Vn.CHARACTER_SET)&&(m=jn.forName(d.get(Vn.CHARACTER_SET).toString())),d.has(Vn.ERROR_CORRECTION)&&(y=Q.parseInt(d.get(Vn.ERROR_CORRECTION).toString())),d.has(Vn.AZTEC_LAYERS)&&(A=Q.parseInt(d.get(Vn.AZTEC_LAYERS).toString()))),rl.encodeLayers(i,o,l,f,m,y,A)}static encodeLayers(i,o,l,f,d,m,y){if(o!==Le.AZTEC)throw new I("Can only encode AZTEC, but got "+o);let A=Vt.encode(J.getBytes(i,d),m,y);return rl.renderResult(A,l,f)}static renderResult(i,o,l){let f=i.getMatrix();if(f==null)throw new ir;let d=f.getWidth(),m=f.getHeight(),y=Math.max(o,d),A=Math.max(l,m),S=Math.min(y/d,A/m),R=(y-d*S)/2,L=(A-m*S)/2,k=new $e(y,A);for(let G=0,te=L;G<m;G++,te+=S)for(let re=0,ue=R;re<d;re++,ue+=S)f.get(re,G)&&k.setRegion(ue,te,S,S);return k}}t.AbstractExpandedDecoder=bn,t.ArgumentException=C,t.ArithmeticException=ui,t.AztecCode=vn,t.AztecCodeReader=ss,t.AztecCodeWriter=rl,t.AztecDecoder=qt,t.AztecDetector=Ps,t.AztecDetectorResult=is,t.AztecEncoder=Vt,t.AztecHighLevelEncoder=xa,t.AztecPoint=Qn,t.BarcodeFormat=Le,t.Binarizer=W,t.BinaryBitmap=M,t.BitArray=le,t.BitMatrix=$e,t.BitSource=Ct,t.BrowserAztecCodeReader=ra,t.BrowserBarcodeReader=aa,t.BrowserCodeReader=Ve,t.BrowserDatamatrixCodeReader=gi,t.BrowserMultiFormatReader=ls,t.BrowserPDF417Reader=Ml,t.BrowserQRCodeReader=Pl,t.BrowserQRCodeSvgWriter=F,t.CharacterSetECI=V,t.ChecksumException=B,t.Code128Reader=Me,t.Code39Reader=Xt,t.DataMatrixDecodedBitStreamParser=Zn,t.DataMatrixReader=Bn,t.DecodeHintType=Oe,t.DecoderResult=tn,t.DefaultGridSampler=Zr,t.DetectorResult=As,t.EAN13Reader=on,t.EncodeHintType=Vn,t.Exception=E,t.FormatException=j,t.GenericGF=At,t.GenericGFPoly=cn,t.GlobalHistogramBinarizer=me,t.GridSampler=hi,t.GridSamplerInstance=sr,t.HTMLCanvasElementLuminanceSource=xt,t.HybridBinarizer=be,t.ITFReader=at,t.IllegalArgumentException=I,t.IllegalStateException=ir,t.InvertedLuminanceSource=ct,t.LuminanceSource=Ge,t.MathUtils=Ze,t.MultiFormatOneDReader=Cr,t.MultiFormatReader=$o,t.MultiFormatWriter=Ee,t.NotFoundException=fe,t.OneDReader=Yt,t.PDF417DecodedBitStreamParser=xe,t.PDF417DecoderErrorCorrection=Ui,t.PDF417Reader=Un,t.PDF417ResultMetadata=Ss,t.PerspectiveTransform=dr,t.PlanarYUVLuminanceSource=Be,t.QRCodeByteMatrix=ga,t.QRCodeDataMask=or,t.QRCodeDecodedBitStreamParser=un,t.QRCodeDecoderErrorCorrectionLevel=It,t.QRCodeDecoderFormatInformation=Gn,t.QRCodeEncoder=D,t.QRCodeEncoderQRCode=us,t.QRCodeMaskUtil=Pt,t.QRCodeMatrixUtil=x,t.QRCodeMode=Je,t.QRCodeReader=si,t.QRCodeVersion=Xe,t.QRCodeWriter=ce,t.RGBLuminanceSource=gt,t.RSS14Reader=Kt,t.RSSExpandedReader=Ie,t.ReaderException=da,t.ReedSolomonDecoder=Qr,t.ReedSolomonEncoder=cs,t.ReedSolomonException=fr,t.Result=je,t.ResultMetadataType=vt,t.ResultPoint=He,t.StringUtils=J,t.UnsupportedOperationException=Y,t.VideoInputDevice=ie,t.WhiteRectangleDetector=mn,t.WriterException=Lt,t.ZXingArrays=ae,t.ZXingCharset=jn,t.ZXingInteger=Q,t.ZXingStandardCharsets=Qt,t.ZXingStringBuilder=K,t.ZXingStringEncoding=Z,t.ZXingSystem=$,t.createAbstractExpandedDecoder=Dr,Object.defineProperty(t,"__esModule",{value:!0})}))})(ku,ku.exports)),ku.exports}var Mn=QM();const ZM=hm(Mn),JM=KS({__proto__:null,default:ZM},[Mn]);var Fw=(function(){function n(e,t,s){if(this.formatMap=new Map([[Ye.QR_CODE,Mn.BarcodeFormat.QR_CODE],[Ye.AZTEC,Mn.BarcodeFormat.AZTEC],[Ye.CODABAR,Mn.BarcodeFormat.CODABAR],[Ye.CODE_39,Mn.BarcodeFormat.CODE_39],[Ye.CODE_93,Mn.BarcodeFormat.CODE_93],[Ye.CODE_128,Mn.BarcodeFormat.CODE_128],[Ye.DATA_MATRIX,Mn.BarcodeFormat.DATA_MATRIX],[Ye.MAXICODE,Mn.BarcodeFormat.MAXICODE],[Ye.ITF,Mn.BarcodeFormat.ITF],[Ye.EAN_13,Mn.BarcodeFormat.EAN_13],[Ye.EAN_8,Mn.BarcodeFormat.EAN_8],[Ye.PDF_417,Mn.BarcodeFormat.PDF_417],[Ye.RSS_14,Mn.BarcodeFormat.RSS_14],[Ye.RSS_EXPANDED,Mn.BarcodeFormat.RSS_EXPANDED],[Ye.UPC_A,Mn.BarcodeFormat.UPC_A],[Ye.UPC_E,Mn.BarcodeFormat.UPC_E],[Ye.UPC_EAN_EXTENSION,Mn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!JM)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=s;var c=this.createZXingFormats(e),h=new Map;h.set(Mn.DecodeHintType.POSSIBLE_FORMATS,c),h.set(Mn.DecodeHintType.TRY_HARDER,!1),this.hints=h}return n.prototype.decodeAsync=function(e){var t=this;return new Promise(function(s,c){try{s(t.decode(e))}catch(h){c(h)}})},n.prototype.decode=function(e){var t=new Mn.MultiFormatReader(this.verbose,this.hints),s=new Mn.HTMLCanvasElementLuminanceSource(e),c=new Mn.BinaryBitmap(new Mn.HybridBinarizer(s)),h=t.decode(c);return{text:h.text,format:Iv.create(this.toHtml5QrcodeSupportedFormats(h.format)),debugData:this.createDebugData()}},n.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,s,c){e.set(t,s)}),e},n.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},n.prototype.createZXingFormats=function(e){for(var t=[],s=0,c=e;s<c.length;s++){var h=c[s];this.formatMap.has(h)?t.push(this.formatMap.get(h)):this.logger.logError("".concat(h," is not supported by")+"ZXingHtml5QrcodeShim")}return t},n.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},n})(),$M=function(n,e,t,s){function c(h){return h instanceof t?h:new t(function(p){p(h)})}return new(t||(t=Promise))(function(h,p){function T(C){try{E(s.next(C))}catch(I){p(I)}}function w(C){try{E(s.throw(C))}catch(I){p(I)}}function E(C){C.done?h(C.value):c(C.value).then(T,w)}E((s=s.apply(n,e||[])).next())})},e9=function(n,e){var t={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},s,c,h,p;return p={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function T(E){return function(C){return w([E,C])}}function w(E){if(s)throw new TypeError("Generator is already executing.");for(;p&&(p=0,E[0]&&(t=0)),t;)try{if(s=1,c&&(h=E[0]&2?c.return:E[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,E[1])).done)return h;switch(c=0,h&&(E=[E[0]&2,h.value]),E[0]){case 0:case 1:h=E;break;case 4:return t.label++,{value:E[1],done:!1};case 5:t.label++,c=E[1],E=[0];continue;case 7:E=t.ops.pop(),t.trys.pop();continue;default:if(h=t.trys,!(h=h.length>0&&h[h.length-1])&&(E[0]===6||E[0]===2)){t=0;continue}if(E[0]===3&&(!h||E[1]>h[0]&&E[1]<h[3])){t.label=E[1];break}if(E[0]===6&&t.label<h[1]){t.label=h[1],h=E;break}if(h&&t.label<h[2]){t.label=h[2],t.ops.push(E);break}h[2]&&t.ops.pop(),t.trys.pop();continue}E=e.call(n,t)}catch(C){E=[6,C],c=0}finally{s=h=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},zw=(function(){function n(e,t,s){if(this.formatMap=new Map([[Ye.QR_CODE,"qr_code"],[Ye.AZTEC,"aztec"],[Ye.CODABAR,"codabar"],[Ye.CODE_39,"code_39"],[Ye.CODE_93,"code_93"],[Ye.CODE_128,"code_128"],[Ye.DATA_MATRIX,"data_matrix"],[Ye.ITF,"itf"],[Ye.EAN_13,"ean_13"],[Ye.EAN_8,"ean_8"],[Ye.PDF_417,"pdf417"],[Ye.UPC_A,"upc_a"],[Ye.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!n.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=t,this.logger=s;var c=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(c),!this.detector)throw"BarcodeDetector detector not supported"}return n.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},n.prototype.decodeAsync=function(e){return $M(this,void 0,void 0,function(){var t,s;return e9(this,function(c){switch(c.label){case 0:return[4,this.detector.detect(e)];case 1:if(t=c.sent(),!t||t.length===0)throw"No barcode or QR code detected.";return s=this.selectLargestBarcode(t),[2,{text:s.rawValue,format:Iv.create(this.toHtml5QrcodeSupportedFormats(s.format)),debugData:this.createDebugData()}]}})})},n.prototype.selectLargestBarcode=function(e){for(var t=null,s=0,c=0,h=e;c<h.length;c++){var p=h[c],T=p.boundingBox.width*p.boundingBox.height;T>s&&(s=T,t=p)}if(!t)throw"No largest barcode found";return t},n.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],s=0,c=e;s<c.length;s++){var h=c[s];this.formatMap.has(h)?t.push(this.formatMap.get(h)):this.logger.warn("".concat(h," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},n.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},n.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,s,c){e.set(t,s)}),e},n.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},n})(),Hw=function(n,e,t,s){function c(h){return h instanceof t?h:new t(function(p){p(h)})}return new(t||(t=Promise))(function(h,p){function T(C){try{E(s.next(C))}catch(I){p(I)}}function w(C){try{E(s.throw(C))}catch(I){p(I)}}function E(C){C.done?h(C.value):c(C.value).then(T,w)}E((s=s.apply(n,e||[])).next())})},Gw=function(n,e){var t={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},s,c,h,p;return p={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function T(E){return function(C){return w([E,C])}}function w(E){if(s)throw new TypeError("Generator is already executing.");for(;p&&(p=0,E[0]&&(t=0)),t;)try{if(s=1,c&&(h=E[0]&2?c.return:E[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,E[1])).done)return h;switch(c=0,h&&(E=[E[0]&2,h.value]),E[0]){case 0:case 1:h=E;break;case 4:return t.label++,{value:E[1],done:!1};case 5:t.label++,c=E[1],E=[0];continue;case 7:E=t.ops.pop(),t.trys.pop();continue;default:if(h=t.trys,!(h=h.length>0&&h[h.length-1])&&(E[0]===6||E[0]===2)){t=0;continue}if(E[0]===3&&(!h||E[1]>h[0]&&E[1]<h[3])){t.label=E[1];break}if(E[0]===6&&t.label<h[1]){t.label=h[1],h=E;break}if(h&&t.label<h[2]){t.label=h[2],t.ops.push(E);break}h[2]&&t.ops.pop(),t.trys.pop();continue}E=e.call(n,t)}catch(C){E=[6,C],c=0}finally{s=h=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},t9=(function(){function n(e,t,s,c){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=s,t&&zw.isSupported()?(this.primaryDecoder=new zw(e,s,c),this.secondaryDecoder=new Fw(e,s,c)):this.primaryDecoder=new Fw(e,s,c)}return n.prototype.decodeAsync=function(e){return Hw(this,void 0,void 0,function(){var t;return Gw(this,function(s){switch(s.label){case 0:t=performance.now(),s.label=1;case 1:return s.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,s.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},n.prototype.decodeRobustlyAsync=function(e){return Hw(this,void 0,void 0,function(){var t,s;return Gw(this,function(c){switch(c.label){case 0:t=performance.now(),c.label=1;case 1:return c.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,c.sent()];case 3:if(s=c.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw s;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},n.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},n.prototype.possiblyLogPerformance=function(e){if(this.verbose){var t=performance.now()-e;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},n.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,s=this.executionResults;t<s.length;t++){var c=s[t];e+=c}var h=e/this.executionResults.length;console.log("".concat(h," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},n})(),bp=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(s[h]=c[h])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function s(){this.constructor=e}e.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}})(),Ld=function(n,e,t,s){function c(h){return h instanceof t?h:new t(function(p){p(h)})}return new(t||(t=Promise))(function(h,p){function T(C){try{E(s.next(C))}catch(I){p(I)}}function w(C){try{E(s.throw(C))}catch(I){p(I)}}function E(C){C.done?h(C.value):c(C.value).then(T,w)}E((s=s.apply(n,e||[])).next())})},kd=function(n,e){var t={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},s,c,h,p;return p={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function T(E){return function(C){return w([E,C])}}function w(E){if(s)throw new TypeError("Generator is already executing.");for(;p&&(p=0,E[0]&&(t=0)),t;)try{if(s=1,c&&(h=E[0]&2?c.return:E[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,E[1])).done)return h;switch(c=0,h&&(E=[E[0]&2,h.value]),E[0]){case 0:case 1:h=E;break;case 4:return t.label++,{value:E[1],done:!1};case 5:t.label++,c=E[1],E=[0];continue;case 7:E=t.ops.pop(),t.trys.pop();continue;default:if(h=t.trys,!(h=h.length>0&&h[h.length-1])&&(E[0]===6||E[0]===2)){t=0;continue}if(E[0]===3&&(!h||E[1]>h[0]&&E[1]<h[3])){t.label=E[1];break}if(E[0]===6&&t.label<h[1]){t.label=h[1],h=E;break}if(h&&t.label<h[2]){t.label=h[2],t.ops.push(E);break}h[2]&&t.ops.pop(),t.trys.pop();continue}E=e.call(n,t)}catch(C){E=[6,C],c=0}finally{s=h=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},Rv=(function(){function n(e,t){this.name=e,this.track=t}return n.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},n.prototype.apply=function(e){var t={};t[this.name]=e;var s={advanced:[t]};return this.track.applyConstraints(s)},n.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var t=e[this.name];return t}return null},n})(),n9=(function(n){bp(e,n);function e(t,s){return n.call(this,t,s)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(t){var s={};s[this.name]=t;var c={advanced:[s]};return this.track.applyConstraints(c)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var t=this.track.getCapabilities(),s=t[this.name];return{min:s.min,max:s.max,step:s.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e})(Rv),r9=(function(n){bp(e,n);function e(t){return n.call(this,"zoom",t)||this}return e})(n9),i9=(function(n){bp(e,n);function e(t){return n.call(this,"torch",t)||this}return e})(Rv),s9=(function(){function n(e){this.track=e}return n.prototype.zoomFeature=function(){return new r9(this.track)},n.prototype.torchFeature=function(){return new i9(this.track)},n})(),a9=(function(){function n(e,t,s){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=s,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return n.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width="".concat(e,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},n.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var s=e.surface.clientWidth,c=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(s,c),e.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},n.create=function(e,t,s,c){return Ld(this,void 0,void 0,function(){var h,p;return kd(this,function(T){switch(T.label){case 0:return h=new n(e,t,c),s.aspectRatio?(p={aspectRatio:s.aspectRatio},[4,h.getFirstTrackOrFail().applyConstraints(p)]):[3,2];case 1:T.sent(),T.label=2;case 2:return h.setupSurface(),[2,h]}})})},n.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},n.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},n.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},n.prototype.resume=function(e){this.failIfClosed();var t=this,s=function(){setTimeout(e,200),t.surface.removeEventListener("playing",s)};this.surface.addEventListener("playing",s),this.surface.play()},n.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},n.prototype.getSurface=function(){return this.failIfClosed(),this.surface},n.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},n.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},n.prototype.applyVideoConstraints=function(e){return Ld(this,void 0,void 0,function(){return kd(this,function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},n.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(t,s){var c=e.mediaStream.getVideoTracks(),h=c.length,p=0;e.mediaStream.getVideoTracks().forEach(function(T){e.mediaStream.removeTrack(T),T.stop(),++p,p>=h&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())})})},n.prototype.getCapabilities=function(){return new s9(this.getFirstTrackOrFail())},n})(),o9=(function(){function n(e){this.mediaStream=e}return n.prototype.render=function(e,t,s){return Ld(this,void 0,void 0,function(){return kd(this,function(c){return[2,a9.create(e,this.mediaStream,t,s)]})})},n.create=function(e){return Ld(this,void 0,void 0,function(){var t,s;return kd(this,function(c){switch(c.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return t={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(t)];case 1:return s=c.sent(),[2,new n(s)]}})})},n})(),qw=function(n,e,t,s){function c(h){return h instanceof t?h:new t(function(p){p(h)})}return new(t||(t=Promise))(function(h,p){function T(C){try{E(s.next(C))}catch(I){p(I)}}function w(C){try{E(s.throw(C))}catch(I){p(I)}}function E(C){C.done?h(C.value):c(C.value).then(T,w)}E((s=s.apply(n,e||[])).next())})},Yw=function(n,e){var t={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},s,c,h,p;return p={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function T(E){return function(C){return w([E,C])}}function w(E){if(s)throw new TypeError("Generator is already executing.");for(;p&&(p=0,E[0]&&(t=0)),t;)try{if(s=1,c&&(h=E[0]&2?c.return:E[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,E[1])).done)return h;switch(c=0,h&&(E=[E[0]&2,h.value]),E[0]){case 0:case 1:h=E;break;case 4:return t.label++,{value:E[1],done:!1};case 5:t.label++,c=E[1],E=[0];continue;case 7:E=t.ops.pop(),t.trys.pop();continue;default:if(h=t.trys,!(h=h.length>0&&h[h.length-1])&&(E[0]===6||E[0]===2)){t=0;continue}if(E[0]===3&&(!h||E[1]>h[0]&&E[1]<h[3])){t.label=E[1];break}if(E[0]===6&&t.label<h[1]){t.label=h[1],h=E;break}if(h&&t.label<h[2]){t.label=h[2],t.ops.push(E);break}h[2]&&t.ops.pop(),t.trys.pop();continue}E=e.call(n,t)}catch(C){E=[6,C],c=0}finally{s=h=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},l9=(function(){function n(){}return n.failIfNotSupported=function(){return qw(this,void 0,void 0,function(){return Yw(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new n]})})},n.prototype.create=function(e){return qw(this,void 0,void 0,function(){return Yw(this,function(t){return[2,o9.create(e)]})})},n})(),c9=function(n,e,t,s){function c(h){return h instanceof t?h:new t(function(p){p(h)})}return new(t||(t=Promise))(function(h,p){function T(C){try{E(s.next(C))}catch(I){p(I)}}function w(C){try{E(s.throw(C))}catch(I){p(I)}}function E(C){C.done?h(C.value):c(C.value).then(T,w)}E((s=s.apply(n,e||[])).next())})},u9=function(n,e){var t={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},s,c,h,p;return p={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function T(E){return function(C){return w([E,C])}}function w(E){if(s)throw new TypeError("Generator is already executing.");for(;p&&(p=0,E[0]&&(t=0)),t;)try{if(s=1,c&&(h=E[0]&2?c.return:E[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,E[1])).done)return h;switch(c=0,h&&(E=[E[0]&2,h.value]),E[0]){case 0:case 1:h=E;break;case 4:return t.label++,{value:E[1],done:!1};case 5:t.label++,c=E[1],E=[0];continue;case 7:E=t.ops.pop(),t.trys.pop();continue;default:if(h=t.trys,!(h=h.length>0&&h[h.length-1])&&(E[0]===6||E[0]===2)){t=0;continue}if(E[0]===3&&(!h||E[1]>h[0]&&E[1]<h[3])){t.label=E[1];break}if(E[0]===6&&t.label<h[1]){t.label=h[1],h=E;break}if(h&&t.label<h[2]){t.label=h[2],t.ops.push(E);break}h[2]&&t.ops.pop(),t.trys.pop();continue}E=e.call(n,t)}catch(C){E=[6,C],c=0}finally{s=h=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},h9=(function(){function n(){}return n.retrieve=function(){if(navigator.mediaDevices)return n.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?n.getCamerasFromMediaStreamTrack():n.rejectWithError()},n.rejectWithError=function(){var e=yc.unableToQuerySupportedDevices();return n.isHttpsOrLocalhost()||(e=yc.insecureContextCameraQueryError()),Promise.reject(e)},n.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},n.getCamerasFromMediaDevices=function(){return c9(this,void 0,void 0,function(){var e,t,s,c,h,p,T;return u9(this,function(w){switch(w.label){case 0:return e=function(E){for(var C=E.getVideoTracks(),I=0,M=C;I<M.length;I++){var B=M[I];B.enabled=!1,B.stop(),E.removeTrack(B)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=w.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(s=w.sent(),c=[],h=0,p=s;h<p.length;h++)T=p[h],T.kind==="videoinput"&&c.push({id:T.deviceId,label:T.label});return e(t),[2,c]}})})},n.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,t){var s=function(h){for(var p=[],T=0,w=h;T<w.length;T++){var E=w[T];E.kind==="video"&&p.push({id:E.id,label:E.label})}e(p)},c=MediaStreamTrack;c.getSources(s)})},n})(),nr;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.NOT_STARTED=1]="NOT_STARTED",n[n.SCANNING=2]="SCANNING",n[n.PAUSED=3]="PAUSED"})(nr||(nr={}));var f9=(function(){function n(){this.state=nr.NOT_STARTED,this.onGoingTransactionNewState=nr.UNKNOWN}return n.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},n.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},n.prototype.execute=function(){if(this.onGoingTransactionNewState===nr.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=nr.UNKNOWN,this.directTransition(e)},n.prototype.cancel=function(){if(this.onGoingTransactionNewState===nr.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=nr.UNKNOWN},n.prototype.getState=function(){return this.state},n.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==nr.UNKNOWN)throw"Cannot transition to a new state, already under transition"},n.prototype.validateTransition=function(e){switch(this.state){case nr.UNKNOWN:throw"Transition from unknown is not allowed";case nr.NOT_STARTED:this.failIfNewStateIs(e,[nr.PAUSED]);break;case nr.SCANNING:break;case nr.PAUSED:break}},n.prototype.failIfNewStateIs=function(e,t){for(var s=0,c=t;s<c.length;s++){var h=c[s];if(e===h)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},n})(),d9=(function(){function n(e){this.stateManager=e}return n.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},n.prototype.directTransition=function(e){this.stateManager.directTransition(e)},n.prototype.getState=function(){return this.stateManager.getState()},n.prototype.canScanFile=function(){return this.stateManager.getState()===nr.NOT_STARTED},n.prototype.isScanning=function(){return this.stateManager.getState()!==nr.NOT_STARTED},n.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===nr.SCANNING},n.prototype.isPaused=function(){return this.stateManager.getState()===nr.PAUSED},n})(),g9=(function(){function n(){}return n.create=function(){return new d9(new f9)},n})(),m9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(s[h]=c[h])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function s(){this.constructor=e}e.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}})(),Qi=(function(n){m9(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e})(YM),p9=(function(){function n(e,t){this.logger=t,this.fps=Qi.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Qi.DEFAULT_DISABLE_FLIP}return n.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Nv.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},n.prototype.isShadedBoxEnabled=function(){return!Pa(this.qrbox)},n.create=function(e,t){return new n(e,t)},n})(),x9=(function(){function n(e,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var s;typeof t=="boolean"?this.verbose=t===!0:t&&(s=t,this.verbose=s.verbose===!0,s.experimentalFeatures),this.logger=new WM(this.verbose),this.qrcode=new t9(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(s),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=g9.create()}return n.prototype.start=function(e,t,s,c){var h=this;if(!e)throw"cameraIdOrConfig is required";if(!s||typeof s!="function")throw"qrCodeSuccessCallback is required and should be a function.";var p;c?p=c:p=this.verbose?this.logger.log:function(){};var T=p9.create(t,this.logger);this.clearElement();var w=!1;T.videoConstraints&&(T.isMediaStreamConstraintsValid()?w=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var E=w,C=document.getElementById(this.elementId);C.clientWidth?C.clientWidth:Qi.DEFAULT_WIDTH,C.style.position="relative",this.shouldScan=!0,this.element=C;var I=this,M=this.stateManagerProxy.startTransition(nr.SCANNING);return new Promise(function(B,W){var $=E?T.videoConstraints:I.createVideoConstraints(e);if(!$){M.cancel(),W("videoConstraints should be defined");return}var q={};(!E||T.aspectRatio)&&(q.aspectRatio=T.aspectRatio);var _e={onRenderSurfaceReady:function(ae,Q){I.setupUi(ae,Q,T),I.isScanning=!0,I.foreverScan(T,s,p)}};l9.failIfNotSupported().then(function(ae){ae.create($).then(function(Q){return Q.render(h.element,q,_e).then(function(le){I.renderedCamera=le,M.execute(),B(null)}).catch(function(le){M.cancel(),W(le)})}).catch(function(Q){M.cancel(),W(yc.errorGettingUserMedia(Q))})}).catch(function(ae){M.cancel(),W(yc.cameraStreamingNotSupported())})})},n.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(nr.PAUSED),this.showPausedState(),(Pa(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},n.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,t=function(){e.stateManagerProxy.directTransition(nr.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){t();return}this.renderedCamera.resume(function(){t()})},n.prototype.getState=function(){return this.stateManagerProxy.getState()},n.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(nr.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var s=function(){if(e.element){var h=document.getElementById(Qi.SHADED_REGION_ELEMENT_ID);h&&e.element.removeChild(h)}},c=this;return this.renderedCamera.close().then(function(){return c.renderedCamera=null,c.element&&(c.element.removeChild(c.canvasElement),c.canvasElement=null),s(),c.qrRegion&&(c.qrRegion=null),c.context&&(c.context=null),t.execute(),c.hidePausedState(),c.isScanning=!1,Promise.resolve()})},n.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then(function(s){return s.decodedText})},n.prototype.scanFileV2=function(e,t){var s=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Pa(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(c,h){s.possiblyCloseLastScanImageFile(),s.clearElement(),s.lastScanImageFile=URL.createObjectURL(e);var p=new Image;p.onload=function(){var T=p.width,w=p.height,E=document.getElementById(s.elementId),C=E.clientWidth?E.clientWidth:Qi.DEFAULT_WIDTH,I=Math.max(E.clientHeight?E.clientHeight:w,Qi.FILE_SCAN_MIN_HEIGHT),M=s.computeCanvasDrawConfig(T,w,C,I);if(t){var B=s.createCanvasElement(C,I,"qr-canvas-visible");B.style.display="inline-block",E.appendChild(B);var W=B.getContext("2d");if(!W)throw"Unable to get 2d context from canvas";W.canvas.width=C,W.canvas.height=I,W.drawImage(p,0,0,T,w,M.x,M.y,M.width,M.height)}var $=Qi.FILE_SCAN_HIDDEN_CANVAS_PADDING,q=Math.max(p.width,M.width),_e=Math.max(p.height,M.height),ae=q+2*$,Q=_e+2*$,le=s.createCanvasElement(ae,Q);E.appendChild(le);var De=le.getContext("2d");if(!De)throw"Unable to get 2d context from canvas";De.canvas.width=ae,De.canvas.height=Q,De.drawImage(p,0,0,T,w,$,$,q,_e);try{s.qrcode.decodeRobustlyAsync(le).then(function(Oe){c(Vw.createFromQrcodeResult(Oe))}).catch(h)}catch(Oe){h("QR code parse error, error = ".concat(Oe))}},p.onerror=h,p.onabort=h,p.onstalled=h,p.onsuspend=h,p.src=URL.createObjectURL(e)})},n.prototype.clear=function(){this.clearElement()},n.getCameras=function(){return h9.retrieve()},n.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},n.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},n.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},n.prototype.applyVideoConstraints=function(e){if(e){if(!Nv.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},n.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},n.prototype.getSupportedFormats=function(e){var t=[Ye.QR_CODE,Ye.AZTEC,Ye.CODABAR,Ye.CODE_39,Ye.CODE_93,Ye.CODE_128,Ye.DATA_MATRIX,Ye.MAXICODE,Ye.ITF,Ye.EAN_13,Ye.EAN_8,Ye.PDF_417,Ye.RSS_14,Ye.RSS_EXPANDED,Ye.UPC_A,Ye.UPC_E,Ye.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var s=[],c=0,h=e.formatsToSupport;c<h.length;c++){var p=h[c];qM(p)?s.push(p):this.logger.warn("Invalid format: ".concat(p," passed in config, ignoring."))}if(s.length===0)throw"None of formatsToSupport match supported values.";return s},n.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Pa(e))return!0;if(!Pa(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(Pa(e.experimentalFeatures))return!0;var t=e.experimentalFeatures;return Pa(t.useBarCodeDetectorIfSupported)?!0:t.useBarCodeDetectorIfSupported!==!1},n.prototype.validateQrboxSize=function(e,t,s){var c=this,h=s.qrbox;this.validateQrboxConfig(h);var p=this.toQrdimensions(e,t,h),T=function(E){if(E<Qi.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Qi.MIN_QR_BOX_SIZE,"px.")},w=function(E){return E>e&&(c.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),E=e),E};T(p.width),T(p.height),p.width=w(p.width)},n.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},n.prototype.toQrdimensions=function(e,t,s){if(typeof s=="number")return{width:s,height:s};if(typeof s=="function")try{return s(e,t)}catch(c){throw new Error("qrbox config was passed as a function but it failed with unknown error"+c)}return s},n.prototype.setupUi=function(e,t,s){s.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,s);var c=Pa(s.qrbox)?{width:e,height:t}:s.qrbox;this.validateQrboxConfig(c);var h=this.toQrdimensions(e,t,c);h.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var p=s.isShadedBoxEnabled()&&h.height<=t,T={x:0,y:0,width:e,height:t},w=p?this.getShadedRegionBounds(e,t,h):T,E=this.createCanvasElement(w.width,w.height),C={willReadFrequently:!0},I=E.getContext("2d",C);I.canvas.width=w.width,I.canvas.height=w.height,this.element.append(E),p&&this.possiblyInsertShadingElement(this.element,e,t,h),this.createScannerPausedUiElement(this.element),this.qrRegion=w,this.context=I,this.canvasElement=E},n.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText=yc.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},n.prototype.scanContext=function(e,t){var s=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(c){return e(c.text,Vw.createFromQrcodeResult(c)),s.possiblyUpdateShaders(!0),!0}).catch(function(c){s.possiblyUpdateShaders(!1);var h=yc.codeParseError(c);return t(h,XM.createFrom(h)),!1})},n.prototype.foreverScan=function(e,t,s){var c=this;if(this.shouldScan&&this.renderedCamera){var h=this.renderedCamera.getSurface(),p=h.videoWidth/h.clientWidth,T=h.videoHeight/h.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var w=this.qrRegion.width*p,E=this.qrRegion.height*T,C=this.qrRegion.x*p,I=this.qrRegion.y*T;this.context.drawImage(h,C,I,w,E,0,0,this.qrRegion.width,this.qrRegion.height);var M=function(){c.foreverScanTimeout=setTimeout(function(){c.foreverScan(e,t,s)},c.getTimeoutFps(e.fps))};this.scanContext(t,s).then(function(B){!B&&e.disableFlip!==!0?(c.context.translate(c.context.canvas.width,0),c.context.scale(-1,1),c.scanContext(t,s).finally(function(){M()})):M()}).catch(function(B){c.logger.logError("Error happend while scanning context",B),M()})}},n.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var t="facingMode",s="deviceId",c={user:!0,environment:!0},h="exact",p=function(W){if(W in c)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(W,"'")},T=Object.keys(e);if(T.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(T.length," keys");var w=Object.keys(e)[0];if(w!==t&&w!==s)throw"Only '".concat(t,"' and '").concat(s,"' ")+" are supported for 'cameraIdOrConfig'";if(w===t){var E=e.facingMode;if(typeof E=="string"){if(p(E))return{facingMode:E}}else if(typeof E=="object")if(h in E){if(p(E["".concat(h)]))return{facingMode:{exact:E["".concat(h)]}}}else throw"'facingMode' should be string or object with"+" ".concat(h," as key.");else{var C=typeof E;throw"Invalid type of 'facingMode' = ".concat(C)}}else{var I=e.deviceId;if(typeof I=="string")return{deviceId:I};if(typeof I=="object"){if(h in I)return{deviceId:{exact:I["".concat(h)]}};throw"'deviceId' should be string or object with"+" ".concat(h," as key.")}else{var M=typeof I;throw"Invalid type of 'deviceId' = ".concat(M)}}}var B=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(B)},n.prototype.computeCanvasDrawConfig=function(e,t,s,c){if(e<=s&&t<=c){var h=(s-e)/2,p=(c-t)/2;return{x:h,y:p,width:e,height:t}}else{var T=e,w=t;return e>s&&(t=s/e*t,e=s),t>c&&(e=c/t*e,t=c),this.logger.log("Image downsampled from "+"".concat(T,"X").concat(w)+" to ".concat(e,"X").concat(t,".")),this.computeCanvasDrawConfig(e,t,s,c)}},n.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},n.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=e?Qi.BORDER_SHADER_MATCH_COLOR:Qi.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},n.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},n.prototype.createCanvasElement=function(e,t,s){var c=e,h=t,p=document.createElement("canvas");return p.style.width="".concat(c,"px"),p.style.height="".concat(h,"px"),p.style.display="none",p.id=Pa(s)?"qr-canvas":s,p},n.prototype.getShadedRegionBounds=function(e,t,s){if(s.width>e||s.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-s.width)/2,y:(t-s.height)/2,width:s.width,height:s.height}},n.prototype.possiblyInsertShadingElement=function(e,t,s,c){if(!(t-c.width<1||s-c.height<1)){var h=document.createElement("div");h.style.position="absolute";var p=(t-c.width)/2,T=(s-c.height)/2;if(h.style.borderLeft="".concat(p,"px solid rgba(0, 0, 0, 0.48)"),h.style.borderRight="".concat(p,"px solid rgba(0, 0, 0, 0.48)"),h.style.borderTop="".concat(T,"px solid rgba(0, 0, 0, 0.48)"),h.style.borderBottom="".concat(T,"px solid rgba(0, 0, 0, 0.48)"),h.style.boxSizing="border-box",h.style.top="0px",h.style.bottom="0px",h.style.left="0px",h.style.right="0px",h.id="".concat(Qi.SHADED_REGION_ELEMENT_ID),t-c.width<11||s-c.height<11)this.hasBorderShaders=!1;else{var w=5,E=40;this.insertShaderBorders(h,E,w,-w,null,0,!0),this.insertShaderBorders(h,E,w,-w,null,0,!1),this.insertShaderBorders(h,E,w,null,-w,0,!0),this.insertShaderBorders(h,E,w,null,-w,0,!1),this.insertShaderBorders(h,w,E+w,-w,null,-w,!0),this.insertShaderBorders(h,w,E+w,null,-w,-w,!0),this.insertShaderBorders(h,w,E+w,-w,null,-w,!1),this.insertShaderBorders(h,w,E+w,null,-w,-w,!1),this.hasBorderShaders=!0}e.append(h)}},n.prototype.insertShaderBorders=function(e,t,s,c,h,p,T){var w=document.createElement("div");w.style.position="absolute",w.style.backgroundColor=Qi.BORDER_SHADER_DEFAULT_COLOR,w.style.width="".concat(t,"px"),w.style.height="".concat(s,"px"),c!==null&&(w.style.top="".concat(c,"px")),h!==null&&(w.style.bottom="".concat(h,"px")),T?w.style.left="".concat(p,"px"):w.style.right="".concat(p,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(w),e.appendChild(w)},n.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},n.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},n.prototype.getTimeoutFps=function(e){return 1e3/e},n})(),Xw;(function(n){n[n.STATUS_DEFAULT=0]="STATUS_DEFAULT",n[n.STATUS_SUCCESS=1]="STATUS_SUCCESS",n[n.STATUS_WARNING=2]="STATUS_WARNING",n[n.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Xw||(Xw={}));const y9=({onRefresh:n})=>{var Mt;const{showAlert:e}=Lc(),[t,s]=ne.useState("roster"),[c,h]=ne.useState(!1),[p,T]=ne.useState([]),[w,E]=ne.useState([]),[C,I]=ne.useState([]),[M,B]=ne.useState([]),[W,$]=ne.useState([]),[q,_e]=ne.useState([]),[ae,Q]=ne.useState([]),[le,De]=ne.useState([]),[Oe,j]=ne.useState(""),[z,V]=ne.useState(new Date().toISOString().substring(0,7)),[Y,Z]=ne.useState(""),[J,K]=ne.useState([]),[$e,fe]=ne.useState([]),[me,be]=ne.useState(""),[Ge,ct]=ne.useState(null),xt=rr.useRef(p);rr.useEffect(()=>{xt.current=p},[p]);const[ie,Ae]=ne.useState(""),[Ve,je]=ne.useState(""),[rt,Le]=ne.useState("normal"),[wt,vt]=ne.useState(""),[tn,Ur]=ne.useState(!1),[cn,ui]=ne.useState(""),[At,fr]=ne.useState("100"),[ir,Qr]=ne.useState(""),[wn,qt]=ne.useState(""),[Ze,An]=ne.useState(!1),[He,As]=ne.useState(""),[is,mn]=ne.useState(""),[hi,dr]=ne.useState(""),[Zr,sr]=ne.useState(""),[Qn,Ps]=ne.useState(""),[ss,ra]=ne.useState(""),[Yt,Me]=ne.useState(!1),[Xt,at]=ne.useState(null),[an,fi]=ne.useState(""),[bs,Jr]=ne.useState(""),[bt,on]=ne.useState("center"),[$r,ei]=ne.useState("h-48"),[In,Ls]=ne.useState("md:h-72"),[Ln,gr]=ne.useState(!1),[di,Vr]=ne.useState(null),[ki,ti]=ne.useState(""),[as,kn]=ne.useState(!1);ne.useEffect(()=>{const X=qD(Bn=>{E(Bn.filter(Hn=>Hn.role===$s.STUDENT&&Hn.isApproved)),I(Bn.filter(Hn=>Hn.role===$s.STUDENT&&!Hn.isApproved));const gi=Bn.filter(Hn=>Hn.role===$s.STUDENT&&Hn.isApproved);gi.length>0&&!cn&&ui(gi[0].id)}),Ue=KT(T),Ke=XT(B),St=YT($),Ct=FD(_e),ft=WT(Q),Zn=qT(De),oa=GT(Bn=>{K(Bn),Bn.length>0&&!Zr&&sr(Bn[0].name)}),it=_p(fe);return()=>{X(),Ue(),Ke(),St(),Ct(),ft(),Zn(),oa(),it()}},[cn,Zr]),ne.useEffect(()=>{let X=null;return(async()=>{if(t==="scan")try{X=new x9("reader"),await X.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250},aspectRatio:1},Ke=>{Ke&&br(Ke)},()=>{})}catch(Ke){console.error("Unable to start scanner",Ke)}})(),()=>{X&&X.isScanning&&X.stop().then(()=>{X==null||X.clear()}).catch(Ke=>console.error("Failed to stop scanner",Ke))}},[t]);const br=X=>{if(Ge)return;const Ue=xt.current.find(Ke=>Ke.qrCodeData===X&&Ke.status==="pending");Ue&&ct(Ue)},Tr=async X=>{const Ue=me;if(!Ue){e("","error");return}h(!0),setTimeout(()=>{const Ke=p.find(St=>St.qrCodeData===Ue&&St.status==="pending");Ke?(ct(Ke),be("")):e("","error"),h(!1)},800)},Fe=async X=>{Ge&&(await SD(X,"completed"),ct(null),e("","success"))},mr=async()=>{const X=parseInt(At);if(isNaN(X)||!cn)return;const Ue=w.find(Ct=>Ct.id===cn);if(!Ue){e("","error");return}const Ke=parseInt(At);if(isNaN(Ke)||Ke<=0){e("","error");return}const St=w.map(Ct=>Ct.id===cn?{...Ct,points:Ct.points+X,totalEarned:X>0?Ct.totalEarned+X:Ct.totalEarned}:Ct);await wD(St),n(),E(Ct=>Ct.map(ft=>ft.id===cn?{...ft,points:ft.points+Ke}:ft)),fr(""),e(` ${Ue.name} ${Ke} `,"success")},bn=X=>new Promise((Ue,Ke)=>{const St=new FileReader;St.onload=()=>Ue(St.result),St.onerror=Ke,St.readAsDataURL(X)}),Wt=async X=>{var Ke;const Ue=(Ke=X.target.files)==null?void 0:Ke[0];if(Ue){if(Ue.size>500*1024){e(" 500KB ","error");return}try{const St=await bn(Ue);Ps(St),at(St)}catch{e("","error")}}},vr=async X=>{var Ke;const Ue=(Ke=X.target.files)==null?void 0:Ke[0];if(Ue){if(Ue.size>500*1024){e(" 500KB ","error");return}try{const St=await bn(Ue);fi(St),Vr(St)}catch{e("","error")}}},Bi=async(X,Ue)=>{const Ke={...X,grade:Ue};await nm(Ke),e(` ${X.name}  ${Ue}`,"success")},Ts=async(X,Ue,Ke)=>{const St=parseInt(Ke);if(isNaN(St))return;const Ct={...X,[Ue]:St};await nm(Ct)},jr=async X=>{await AD(X),e("","success")},ia=async X=>{confirm("/")&&await bD(X)},vi=async X=>{if(X.preventDefault(),!He||!is||!hi){e("","error");return}if(He&&is){const Ue={id:`prod_${Date.now()}`,name:He,category:Zr,price:parseInt(is),description:ss||`${Zr==="food"?"":Zr==="electronic"?"":Zr==="ticket"?"":""}`,imageUrl:Qn||"https://images.unsplash.com/photo-1553456558-aff63285bdd1?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3",stock:parseInt(hi)||99};await kD(Ue),Me(!1),As(""),mn(""),dr(""),Ps(""),at(null),sr("other"),ra(""),e("","success")}},Sr=async X=>{window.confirm("")&&await UD(X)},pn=async X=>{if(X.preventDefault(),!ie||!Ve){e("","error");return}const Ue={id:`m_${Date.now()}`,title:ie,description:"",points:parseInt(Ve),type:rt,isActive:!0,maxAttempts:1,deadline:wt?new Date(wt).getTime():void 0};await ND(Ue),Ur(!1),Ae(""),je(""),Le("normal"),vt(""),e("","success")},Dt=async X=>{window.confirm("")&&e("","success")},Dr=async()=>{if(!wn){e("","error");return}await VD({id:`r_${Date.now()}`,title:wn}),qt(""),An(!1),e("","success")},ar=async X=>{await jD(X)},Nn=async X=>{await RD(X)},Ie=async(X,Ue)=>{await BD(X,Ue),e("","success")},sa=async X=>{try{await PD(X),e("","success")}catch(Ue){e(`: ${Ue.message||""}`,"error")}},Kt=async X=>{confirm("")&&await LD(X)},Cr=p.filter(X=>{var ft,Zn;const Ue=(((ft=X.productName)==null?void 0:ft.toLowerCase())||"").includes(Oe.toLowerCase())||(((Zn=X.id)==null?void 0:Zn.toLowerCase())||"").includes(Oe.toLowerCase()),Ke=new Date(X.timestamp),Ct=`${Ke.getFullYear()}-${String(Ke.getMonth()+1).padStart(2,"0")}`===z;return Ue&&Ct}),aa=X=>Vo.reduce((Ue,Ke)=>X>=Ke.threshold?Ke:Ue,Vo[0]);return v.jsxs("div",{className:"space-y-8 pb-20 animate-in fade-in duration-500",children:[v.jsx("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:v.jsxs("div",{children:[v.jsxs("h1",{className:"text-4xl font-black text-slate-800 flex items-center gap-4",children:[v.jsx("div",{className:"bg-indigo-600 p-3 rounded-2xl text-white shadow-xl shadow-indigo-100",children:v.jsx(sd,{size:32})}),""]}),v.jsx("p",{className:"text-slate-500 mt-2 italic font-medium",children:""})]})}),v.jsxs("div",{className:"flex bg-white p-2 rounded-3xl border border-slate-100 shadow-md overflow-x-auto gap-2",children:[v.jsxs("button",{onClick:()=>s("roster"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${t==="roster"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[v.jsx(iN,{size:18})," ",v.jsx("span",{children:""})]}),v.jsxs("button",{onClick:()=>s("approval"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${t==="approval"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50 relative"}`,children:[v.jsx(Ng,{size:18})," ",v.jsx("span",{children:""}),C.length>0&&v.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full text-white text-[10px] flex items-center justify-center border-2 border-white",children:C.length})]}),v.jsxs("button",{onClick:()=>s("points"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${t==="points"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[v.jsx(o3,{size:18})," ",v.jsx("span",{children:""})]}),v.jsxs("button",{onClick:()=>s("products"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${t==="products"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[v.jsx(Cg,{size:18})," ",v.jsx("span",{children:""})]}),v.jsxs("button",{onClick:()=>s("banners"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${t==="banners"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[v.jsx(qy,{size:18})," ",v.jsx("span",{children:""})]}),v.jsxs("button",{onClick:()=>s("mission_approval"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${t==="mission_approval"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50 relative"}`,children:[v.jsx(Wu,{size:18})," ",v.jsx("span",{children:""}),le.filter(X=>X.status==="pending").length>0&&v.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-pink-500 rounded-full text-white text-[10px] flex items-center justify-center border-2 border-white",children:le.filter(X=>X.status==="pending").length})]}),v.jsxs("button",{onClick:()=>s("scan"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${t==="scan"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[v.jsx(vg,{size:18})," ",v.jsx("span",{children:""})]}),v.jsxs("button",{onClick:()=>s("history"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${t==="history"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[v.jsx(id,{size:18})," ",v.jsx("span",{children:""})]}),v.jsxs("button",{onClick:()=>s("missions"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${t==="missions"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[v.jsx(Bu,{size:18})," ",v.jsx("span",{children:""})]}),v.jsxs("button",{onClick:()=>s("wishes"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${t==="wishes"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50 relative"}`,children:[v.jsx(qf,{size:18})," ",v.jsx("span",{children:""}),ae.length>0&&v.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-pink-500 rounded-full text-white text-[10px] flex items-center justify-center border-2 border-white",children:ae.length})]})]}),t==="roster"&&v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 animate-in slide-in-from-bottom-4",children:w.map(X=>{const Ue=aa(X.totalEarned);return v.jsxs("div",{className:"bg-white rounded-[2.5rem] p-8 border border-slate-100 shadow-sm hover:shadow-xl transition-all group overflow-hidden relative",children:[v.jsx("div",{className:`absolute top-0 right-0 w-24 h-24 ${Ue.color} opacity-5 -translate-y-12 translate-x-12 rounded-full`}),v.jsxs("div",{className:"flex flex-col items-center text-center",children:[v.jsxs("div",{className:"relative mb-6",children:[v.jsx("div",{className:`absolute inset-0 rounded-full blur-xl opacity-20 ${Ue.color}`}),v.jsx("img",{src:X.avatar,className:"w-24 h-24 rounded-full border-4 border-white shadow-2xl relative z-10 object-cover",alt:X.name}),v.jsx("div",{className:"absolute -bottom-2 -right-2 w-10 h-10 rounded-2xl bg-white shadow-lg flex items-center justify-center text-xl z-20 border border-slate-50",children:Ue.icon})]}),v.jsx("h3",{className:"text-2xl font-black text-slate-800 mb-1",children:X.name}),v.jsx("div",{className:`px-4 py-1 rounded-full text-[10px] font-black text-white uppercase tracking-widest mb-2 ${Ue.color} shadow-sm`,children:Ue.name}),v.jsx("div",{className:"mb-6",children:v.jsx("select",{value:X.grade||"",onChange:Ke=>Bi(X,Ke.target.value),className:"text-xs font-bold text-slate-500 bg-slate-50 border border-slate-100 rounded-lg px-2 py-1 outline-none pointer-events-auto",children:tm.map(Ke=>v.jsx("option",{value:Ke,children:Ke},Ke))})}),v.jsxs("div",{className:"w-full grid grid-cols-2 gap-4",children:[v.jsxs("div",{className:"bg-indigo-50/50 p-4 rounded-2xl border border-indigo-50",children:[v.jsx("p",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest mb-1",children:""}),v.jsx("input",{type:"number",defaultValue:X.points,onBlur:Ke=>Ts(X,"points",Ke.target.value),className:"w-full bg-transparent text-xl font-black text-indigo-600 focus:outline-none"})]}),v.jsxs("div",{className:"bg-amber-50/50 p-4 rounded-2xl border border-amber-50",children:[v.jsx("p",{className:"text-[10px] font-black text-amber-400 uppercase tracking-widest mb-1",children:""}),v.jsx("input",{type:"number",defaultValue:X.totalEarned,onBlur:Ke=>Ts(X,"totalEarned",Ke.target.value),className:"w-full bg-transparent text-xl font-black text-amber-600 focus:outline-none"})]})]})]}),v.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-50 flex justify-between items-center gap-4",children:[v.jsxs("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-tighter truncate max-w-[80px]",children:["ID: ",X.id.replace("user_","")]}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsxs("button",{onClick:()=>{ui(X.id),s("points")},className:"text-indigo-600 font-black text-xs hover:underline flex items-center gap-1",children:[v.jsx(Gy,{size:14})," "]}),v.jsx("button",{onClick:()=>ia(X.id),className:"text-slate-300 hover:text-rose-500 transition-colors",title:"",children:v.jsx(Rf,{size:16})})]})]})]},X.id)})}),t==="points"&&v.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[v.jsxs("div",{className:"flex items-center gap-6 mb-12",children:[v.jsx("div",{className:"w-20 h-20 bg-emerald-50 text-emerald-600 rounded-3xl flex items-center justify-center shadow-inner",children:v.jsx(Gy,{size:40})}),v.jsxs("div",{children:[v.jsx("h2",{className:"text-3xl font-black text-slate-800 tracking-tight",children:""}),v.jsx("p",{className:"text-slate-400 font-medium",children:""})]})]}),v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16",children:[v.jsxs("div",{className:"space-y-8",children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("span",{className:"text-[10px] font-bold text-slate-400",children:":"}),v.jsxs("select",{value:Y,onChange:X=>Z(X.target.value),className:"text-[10px] font-bold text-slate-600 bg-slate-50 border border-slate-200 rounded-lg px-2 py-1 outline-none",children:[v.jsx("option",{value:"",children:""}),tm.map(X=>v.jsx("option",{value:X,children:X},X))]})]})]}),v.jsx("div",{className:"grid grid-cols-3 gap-4 max-h-[400px] overflow-y-auto p-2",children:w.filter(X=>Y===""||X.grade===Y).map(X=>v.jsxs("button",{onClick:()=>ui(X.id),className:`flex flex-col items-center gap-3 p-4 rounded-3xl border-2 transition-all ${cn===X.id?"border-indigo-600 bg-indigo-50 shadow-lg shadow-indigo-100":"border-slate-50 bg-slate-50/50 hover:bg-white hover:border-slate-200"}`,children:[v.jsx("img",{src:X.avatar,className:"w-12 h-12 rounded-full shadow-sm",alt:X.name}),v.jsx("span",{className:`font-black text-sm ${cn===X.id?"text-indigo-600":"text-slate-600"}`,children:X.name})]},X.id))})]}),v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),v.jsxs("button",{onClick:()=>An(!Ze),className:"text-xs font-black text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:[Ze?v.jsx(Do,{size:14}):v.jsx(lc,{size:14}),Ze?"":""]})]}),Ze?v.jsxs("div",{className:"bg-slate-50 p-6 rounded-2xl border-2 border-indigo-100 mb-4 animate-in zoom-in-95 duration-200",children:[v.jsxs("div",{className:"flex gap-2",children:[v.jsx("input",{type:"text",placeholder:" (: )",value:wn,onChange:X=>qt(X.target.value),className:"flex-1 p-3 border-2 border-slate-200 rounded-xl focus:border-indigo-600 outline-none font-bold"}),v.jsx("button",{onClick:Dr,className:"bg-indigo-600 text-white p-3 rounded-xl hover:bg-indigo-700 shadow-md",children:v.jsx(lc,{size:20})})]}),v.jsx("div",{className:"mt-4 space-y-2 max-h-40 overflow-y-auto pr-2",children:q.map(X=>v.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg border border-slate-100",children:[v.jsx("span",{className:"font-bold text-sm text-slate-700",children:X.title}),v.jsx("button",{onClick:()=>ar(X.id),className:"text-rose-500 hover:text-rose-600",children:v.jsx(Rf,{size:16})})]},X.id))})]}):v.jsxs("select",{value:ir,onChange:X=>Qr(X.target.value),className:"w-full p-5 bg-slate-50 border-2 border-transparent rounded-2xl focus:bg-white focus:border-indigo-600 focus:ring-4 focus:ring-indigo-100 transition-all outline-none font-bold text-slate-700 shadow-inner",children:[v.jsx("option",{value:"",children:"..."}),q.length>0?q.map(X=>v.jsx("option",{value:X.title,children:X.title},X.id)):v.jsxs(v.Fragment,{children:[v.jsx("option",{children:""}),v.jsx("option",{children:""}),v.jsx("option",{children:" A++"}),v.jsx("option",{children:""})]}),v.jsx("option",{value:"other",children:""})]}),ir==="other"&&!Ze&&v.jsx("input",{type:"text",placeholder:"...",value:ir==="other"?"":ir,onChange:X=>Qr(X.target.value),className:"w-full mt-4 p-5 bg-white border-2 border-indigo-200 rounded-2xl outline-none font-bold text-slate-700"})]})]}),v.jsxs("div",{className:"space-y-8",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-[0.2em] mb-4",children:""}),v.jsxs("div",{className:"relative",children:[v.jsx("input",{type:"number",value:At,onChange:X=>fr(X.target.value),className:"w-full p-8 text-5xl font-black bg-slate-50 border-2 border-transparent rounded-[2rem] focus:bg-white focus:border-indigo-600 focus:ring-4 focus:ring-indigo-100 transition-all outline-none text-indigo-600 shadow-inner"}),v.jsx("div",{className:"absolute right-8 top-1/2 -translate-y-1/2 flex items-center gap-2 pointer-events-none",children:v.jsx("span",{className:"font-black text-slate-300 text-2xl uppercase tracking-tighter",children:"PTS"})})]})]}),v.jsxs("button",{onClick:mr,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white font-black py-8 rounded-[2rem] transition-all shadow-2xl shadow-emerald-200 flex items-center justify-center gap-4 text-2xl active:scale-95 group",children:[v.jsx(Nu,{size:32,className:"group-hover:scale-125 transition-transform"}),""]})]})]}),t==="approval"&&v.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[v.jsxs("h2",{className:"text-3xl font-black text-slate-800 mb-8 flex items-center gap-3",children:[v.jsx(Ng,{className:"text-indigo-600"}),"",v.jsxs("span",{className:"bg-indigo-100 text-indigo-600 text-sm px-3 py-1 rounded-full",children:[C.length," "]})]}),v.jsx("div",{className:"space-y-4",children:C.length===0?v.jsx("div",{className:"text-center py-20 text-slate-400 font-bold",children:""}):C.map(X=>v.jsxs("div",{className:"flex items-center justify-between p-6 bg-slate-50 rounded-2xl border border-slate-100",children:[v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("div",{className:"w-12 h-12 bg-indigo-200 rounded-full flex items-center justify-center text-indigo-700 font-bold text-xl",children:X.name[0]}),v.jsxs("div",{children:[v.jsx("h3",{className:"font-black text-lg text-slate-800",children:X.name}),v.jsx("p",{className:"text-slate-500 text-sm font-bold",children:X.grade||""})]})]}),v.jsxs("div",{className:"flex gap-3",children:[v.jsx("button",{onClick:()=>jr(X.id),className:"bg-emerald-500 hover:bg-emerald-600 text-white px-6 py-2 rounded-xl font-bold transition-all shadow-lg shadow-emerald-100",children:""}),v.jsx("button",{onClick:()=>ia(X.id),className:"bg-slate-200 hover:bg-rose-500 hover:text-white text-slate-500 px-6 py-2 rounded-xl font-bold transition-all",children:""})]})]},X.id))})]}),t==="products"&&v.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[v.jsxs("div",{className:"flex justify-between items-center mb-8",children:[v.jsxs("h2",{className:"text-3xl font-black text-slate-800 flex items-center gap-3",children:[v.jsx(Cg,{className:"text-indigo-600"})," "]}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsxs("button",{onClick:()=>kn(!as),className:"bg-slate-100 text-slate-600 px-5 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-slate-200 transition-all border border-slate-200",children:[v.jsx(Bu,{size:18})," "]}),v.jsxs("button",{onClick:()=>Me(!Yt),className:"bg-indigo-600 text-white px-5 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100",children:[v.jsx(lc,{size:20})," "]})]})]}),as&&v.jsxs("div",{className:"bg-slate-50 p-6 rounded-2xl mb-8 border border-slate-200 animate-in fade-in",children:[v.jsx("h3",{className:"font-black text-slate-700 mb-4",children:""}),v.jsxs("div",{className:"flex gap-4 mb-6",children:[v.jsx("input",{placeholder:" (: )",value:ki,onChange:X=>ti(X.target.value),className:"flex-1 p-3 rounded-xl border border-slate-200 font-bold outline-none"}),v.jsx("button",{onClick:()=>{ki&&(CD(ki),ti(""))},className:"bg-emerald-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-emerald-700",children:""})]}),v.jsx("div",{className:"flex flex-wrap gap-3",children:J.map(X=>v.jsxs("div",{className:"bg-white px-4 py-2 rounded-xl border border-slate-200 flex items-center gap-2 shadow-sm font-bold text-slate-600",children:[X.name,v.jsx("button",{onClick:()=>ID(X.id),className:"text-slate-300 hover:text-rose-500",children:v.jsx(Do,{size:14})})]},X.id))})]}),Yt&&v.jsxs("form",{onSubmit:vi,className:"bg-slate-50 p-6 rounded-2xl mb-8 border border-slate-200 animate-in fade-in",children:[v.jsx("h3",{className:"font-black text-slate-700 mb-4",children:""}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[v.jsx("input",{placeholder:"",value:He,onChange:X=>As(X.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"}),v.jsxs("select",{value:Zr,onChange:X=>sr(X.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500",children:[J.map(X=>v.jsx("option",{value:X.name,children:X.name},X.id)),J.length===0&&v.jsx("option",{value:"",children:""})]}),v.jsxs("div",{className:"flex flex-col gap-2",children:[v.jsxs("label",{className:"flex items-center justify-center gap-2 p-3 rounded-xl border-2 border-dashed border-slate-300 hover:border-indigo-400 hover:bg-indigo-50 transition-all cursor-pointer font-bold text-slate-500 hover:text-indigo-600",children:[v.jsx(Ig,{size:18}),Qn?"":" (200KB)",v.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:Wt})]}),Xt&&v.jsx("img",{src:Xt,className:"h-20 w-auto object-cover rounded-lg border border-slate-200",alt:"preview"})]}),v.jsx("input",{placeholder:" ()",type:"number",value:is,onChange:X=>mn(X.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"}),v.jsx("textarea",{placeholder:" ()",value:ss,onChange:X=>ra(X.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500 md:col-span-2 h-24"}),v.jsx("input",{placeholder:"",type:"number",value:hi,onChange:X=>dr(X.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"})]}),v.jsxs("div",{className:"flex justify-end gap-2",children:[v.jsx("button",{type:"button",onClick:()=>Me(!1),className:"px-4 py-2 text-slate-400 font-bold hover:text-slate-600",children:""}),v.jsx("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700",children:""})]})]}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:M.map(X=>v.jsxs("div",{className:"border border-slate-100 rounded-[2rem] p-6 flex flex-col gap-4 group hover:shadow-xl transition-all bg-white relative",children:[v.jsxs("div",{className:"flex gap-4 items-center",children:[v.jsx("img",{src:X.imageUrl,alt:X.name,className:"w-20 h-20 rounded-2xl object-cover shadow-sm"}),v.jsxs("div",{className:"flex-1",children:[v.jsx("h4",{className:"font-black text-slate-800 text-lg",children:X.name}),v.jsx("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest",children:X.category}),v.jsxs("p",{className:"text-indigo-600 font-black",children:[X.price," PTS"]})]}),v.jsx("button",{onClick:()=>Sr(X.id),className:"p-2 text-slate-300 hover:text-rose-500 transition-colors",children:v.jsx(Rf,{size:18})})]}),v.jsx("div",{className:"flex items-center justify-between pt-4 border-t border-slate-50",children:v.jsxs("div",{className:"flex flex-col",children:[v.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter mb-1",children:""}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("input",{type:"number",defaultValue:X.stock,onBlur:Ue=>Ie(X.id,parseInt(Ue.target.value)||0),className:"w-16 p-2 bg-slate-50 border border-slate-200 rounded-lg text-sm font-black text-slate-700 outline-none focus:ring-2 focus:ring-indigo-500"}),v.jsx("span",{className:`text-[10px] font-black px-2 py-1 rounded-lg ${X.stock>0?"bg-emerald-100 text-emerald-600":"bg-red-100 text-red-600"}`,children:X.stock>0?"ON SALE":"SOLD OUT"})]})]})})]},X.id))})]}),t==="mission_approval"&&v.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[v.jsxs("h2",{className:"text-3xl font-black text-slate-800 mb-8 flex items-center gap-3",children:[v.jsx(Wu,{className:"text-emerald-600"}),"",v.jsxs("span",{className:"bg-emerald-100 text-emerald-600 text-sm px-3 py-1 rounded-full",children:[le.filter(X=>X.status==="pending").length," "]})]}),v.jsx("div",{className:"space-y-6",children:le.filter(X=>X.status==="pending").length===0?v.jsx("div",{className:"text-center py-24 text-slate-400 font-bold bg-slate-50 rounded-[3rem] border border-slate-100 border-dashed",children:""}):le.filter(X=>X.status==="pending").map(X=>v.jsxs("div",{className:"bg-slate-50 p-8 rounded-[2.5rem] border border-slate-100 flex flex-col md:flex-row md:items-center justify-between gap-6",children:[v.jsxs("div",{className:"flex items-center gap-6",children:[v.jsx("div",{className:"w-16 h-16 bg-white rounded-2xl shadow-sm flex items-center justify-center text-2xl font-black text-indigo-600 border border-slate-100",children:X.userName[0]}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-xl font-black text-slate-800",children:X.userName}),v.jsxs("p",{className:"text-slate-500 font-bold flex items-center gap-2",children:["",v.jsxs("span",{className:"text-indigo-600",children:["",X.missionTitle,""]})]}),v.jsxs("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest mt-2",children:["",X.points," PTS  ",new Date(X.timestamp).toLocaleString()]})]})]}),v.jsxs("div",{className:"flex gap-4",children:[v.jsxs("button",{onClick:()=>sa(X.id),className:"bg-emerald-600 hover:bg-emerald-700 text-white px-8 py-3 rounded-2xl font-black transition-all shadow-xl shadow-emerald-100 flex items-center gap-2",children:[v.jsx(Nu,{size:20})," "]}),v.jsx("button",{onClick:()=>Kt(X.id),className:"bg-white hover:bg-rose-50 text-slate-400 hover:text-rose-600 px-8 py-3 rounded-2xl font-black transition-all border border-slate-200",children:""})]})]},X.id))})]}),t==="scan"&&v.jsxs("div",{className:"bg-white rounded-[3rem] p-16 border border-slate-100 text-center shadow-xl animate-in fade-in",children:[v.jsx("div",{className:"bg-indigo-50 w-32 h-32 rounded-[2.5rem] flex items-center justify-center mx-auto mb-8 text-indigo-600 shadow-inner",children:v.jsx(vg,{size:56})}),v.jsx("h2",{className:"text-3xl font-black text-slate-800 mb-4 tracking-tight",children:"QR Code "}),v.jsx("p",{className:"text-slate-400 mb-8 font-medium max-w-md mx-auto leading-relaxed",children:" QR Code "}),v.jsx("div",{className:"max-w-md mx-auto mb-8 overflow-hidden rounded-[2rem] border-4 border-indigo-50 shadow-inner",children:v.jsx("div",{id:"reader",className:"w-full"})}),v.jsxs("div",{className:"max-w-md mx-auto mb-8",children:[v.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[v.jsx("div",{className:"h-px bg-slate-200 flex-1"}),v.jsx("span",{className:"text-[10px] font-black text-slate-300 uppercase tracking-widest",children:""}),v.jsx("div",{className:"h-px bg-slate-200 flex-1"})]}),v.jsx("input",{type:"text",placeholder:" QR Code ...",value:me,onChange:X=>be(X.target.value),className:"w-full p-4 bg-slate-50 border-2 border-indigo-50 rounded-2xl focus:bg-white focus:border-indigo-600 outline-none font-mono text-xs text-slate-500 text-center"})]}),v.jsx("button",{onClick:()=>Tr(),disabled:c,className:"bg-indigo-600 hover:bg-indigo-700 disabled:bg-slate-300 text-white px-16 py-6 rounded-[2rem] font-black transition-all shadow-2xl shadow-indigo-200 inline-flex items-center justify-center gap-4 text-xl active:scale-95",children:c?"...":""})]}),t==="history"&&v.jsxs("section",{className:"bg-white rounded-[3rem] border border-slate-100 shadow-xl overflow-hidden animate-in fade-in",children:[v.jsxs("div",{className:"p-10 border-b border-slate-50 flex flex-col md:flex-row md:items-center justify-between gap-6",children:[v.jsxs("h2",{className:"font-black text-2xl text-slate-800 flex items-center gap-3",children:[v.jsx(id,{className:"text-indigo-600"}),""]}),v.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[v.jsx("div",{className:"relative",children:v.jsx("input",{type:"month",value:z,onChange:X=>V(X.target.value),className:"pl-5 pr-5 py-4 rounded-2xl bg-slate-50 border-2 border-transparent focus:bg-white focus:border-indigo-600 focus:ring-4 focus:ring-indigo-100 transition-all outline-none text-sm font-bold shadow-inner"})}),v.jsxs("div",{className:"relative",children:[v.jsx(O3,{className:"absolute left-5 top-1/2 -translate-y-1/2 text-slate-400",size:20}),v.jsx("input",{type:"text",placeholder:"...",value:Oe,onChange:X=>j(X.target.value),className:"pl-14 pr-8 py-4 rounded-2xl bg-slate-50 border-2 border-transparent focus:bg-white focus:border-indigo-600 focus:ring-4 focus:ring-indigo-100 transition-all outline-none text-sm w-full md:w-80 shadow-inner font-bold"})]})]})]}),v.jsx("div",{className:"overflow-x-auto",children:v.jsxs("table",{className:"w-full",children:[v.jsx("thead",{className:"bg-slate-50/50",children:v.jsxs("tr",{children:[v.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),v.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),v.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),v.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),v.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),v.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""})]})}),v.jsx("tbody",{className:"divide-y divide-slate-50",children:Cr.map(X=>{var Ue;try{return v.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors",children:[v.jsx("td",{className:"px-10 py-6 whitespace-nowrap",children:v.jsx("span",{className:`px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest ${X.status==="completed"?"bg-emerald-100 text-emerald-700":X.status==="pending"?"bg-amber-100 text-amber-700":"bg-rose-100 text-rose-700"}`,children:X.status==="completed"?"":X.status==="pending"?"":""})}),v.jsx("td",{className:"px-10 py-6 whitespace-nowrap font-black text-slate-800",children:((Ue=w.find(Ke=>Ke.id===X.userId))==null?void 0:Ue.name)||""}),v.jsx("td",{className:"px-10 py-6 whitespace-nowrap font-bold text-slate-600",children:X.productName}),v.jsxs("td",{className:"px-10 py-6 whitespace-nowrap text-indigo-600 font-black",children:[X.pointsSpent," PTS"]}),v.jsx("td",{className:"px-10 py-6 whitespace-nowrap text-slate-400 text-sm font-bold",children:X.timestamp?new Date(X.timestamp).toLocaleDateString():""}),v.jsx("td",{className:"px-10 py-6 whitespace-nowrap",children:X.status==="pending"?v.jsx("button",{onClick:()=>Fe(X.id),className:"text-white bg-indigo-600 hover:bg-indigo-700 px-5 py-2.5 rounded-xl text-xs font-black transition-all shadow-xl shadow-indigo-100 active:scale-95",children:""}):v.jsxs("div",{className:"flex items-center gap-2 text-slate-300 font-black text-[10px] tracking-widest",children:[v.jsx(Nu,{size:14})," FINISHED"]})})]},X.id)}catch(Ke){return console.error("Row render error",Ke),null}})})]})})]}),t==="banners"&&v.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[v.jsxs("div",{className:"flex justify-between items-center mb-8",children:[v.jsxs("h2",{className:"text-3xl font-black text-slate-800 flex items-center gap-3",children:[v.jsx(qy,{className:"text-indigo-600"})," "]}),v.jsxs("button",{onClick:()=>gr(!Ln),className:"bg-indigo-600 text-white px-5 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100",children:[v.jsx(lc,{size:20})," "]})]}),Ln&&v.jsxs("div",{className:"bg-slate-50 p-6 rounded-2xl mb-8 border border-slate-200 animate-in fade-in",children:[v.jsx("h3",{className:"font-black text-slate-700 mb-4",children:""}),v.jsxs("div",{className:"flex flex-col gap-4",children:[v.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-start",children:[v.jsxs("label",{className:"flex-1 w-full flex items-center justify-center gap-2 p-10 rounded-[2rem] border-2 border-dashed border-slate-300 hover:border-indigo-400 hover:bg-indigo-50 transition-all cursor-pointer font-bold text-slate-500 hover:text-indigo-600",children:[v.jsx(Ig,{size:24}),an?"":" (500KB)",v.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:vr})]}),v.jsxs("div",{className:"w-full md:w-64 space-y-4",children:[v.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-widest",children:" ()"}),v.jsx("input",{list:"banner-tags",value:bs,onChange:X=>Jr(X.target.value),placeholder:"...",className:"w-full p-4 rounded-2xl border-2 border-slate-100 font-bold text-slate-700 outline-none focus:border-indigo-500 transition-all shadow-sm"}),v.jsxs("datalist",{id:"banner-tags",children:[v.jsx("option",{value:""}),v.jsx("option",{value:""}),v.jsx("option",{value:""}),v.jsx("option",{value:""}),v.jsx("option",{value:""})]}),di&&v.jsx("img",{src:di,className:"h-32 w-full object-cover rounded-2xl border border-white shadow-lg",alt:"preview"})]})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 w-full",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-widest",children:" (CSS Position)"}),v.jsxs("select",{value:bt,onChange:X=>on(X.target.value),className:"w-full p-4 rounded-2xl border-2 border-slate-100 font-bold text-slate-700 outline-none focus:border-indigo-500 transition-all shadow-sm",children:[v.jsx("option",{value:"center",children:" (Center)"}),v.jsx("option",{value:"top",children:" (Top)"}),v.jsx("option",{value:"bottom",children:" (Bottom)"}),v.jsx("option",{value:"left",children:" (Left)"}),v.jsx("option",{value:"right",children:" (Right)"}),v.jsx("option",{value:"50% 20%",children:" (50% 20%)"})]})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-widest",children:""}),v.jsxs("select",{value:$r,onChange:X=>ei(X.target.value),className:"w-full p-4 rounded-2xl border-2 border-slate-100 font-bold text-slate-700 outline-none focus:border-indigo-500 transition-all shadow-sm",children:[v.jsx("option",{value:"h-32",children:" (h-32)"}),v.jsx("option",{value:"h-40",children:" (h-40)"}),v.jsx("option",{value:"h-48",children:" (h-48)"}),v.jsx("option",{value:"h-56",children:" (h-56)"}),v.jsx("option",{value:"h-64",children:" (h-64)"})]})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-widest",children:""}),v.jsxs("select",{value:In,onChange:X=>Ls(X.target.value),className:"w-full p-4 rounded-2xl border-2 border-slate-100 font-bold text-slate-700 outline-none focus:border-indigo-500 transition-all shadow-sm",children:[v.jsx("option",{value:"md:h-48",children:" (md:h-48)"}),v.jsx("option",{value:"md:h-64",children:" (md:h-64)"}),v.jsx("option",{value:"md:h-72",children:" (md:h-72)"}),v.jsx("option",{value:"md:h-80",children:" (md:h-80)"}),v.jsx("option",{value:"md:h-96",children:" (md:h-96)"})]})]})]}),v.jsx("button",{onClick:async()=>{an?(await YD(an,bs,bt,$r,In),fi(""),Jr(""),on("center"),ei("h-48"),Ls("md:h-72"),Vr(null),gr(!1),e("","success")):e("","error")},className:"bg-emerald-600 text-white px-6 py-4 rounded-2xl font-black text-lg hover:bg-emerald-700 shadow-xl shadow-emerald-100 active:scale-95",children:""})]})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6",children:[$e.map(X=>v.jsxs("div",{className:"relative group rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-all",children:[v.jsx("img",{src:X.imageUrl,alt:"banner",className:"w-full h-48 object-cover"}),v.jsx("div",{className:"absolute top-4 left-4",children:v.jsx("span",{className:"bg-indigo-600/90 backdrop-blur text-white px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-wider shadow-lg",children:X.tag||""})}),v.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-all flex items-center justify-center",children:v.jsx("button",{onClick:async()=>{confirm("")&&(await XD(X.id),e("","success"))},className:"bg-white text-rose-500 px-6 py-2 rounded-xl font-black hover:bg-rose-50",children:" "})})]},X.id)),$e.length===0&&v.jsx("div",{className:"col-span-full py-12 text-center text-slate-400 font-bold bg-slate-50 rounded-2xl border border-slate-200 border-dashed",children:""})]})]}),t==="missions"&&v.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[v.jsxs("div",{className:"flex justify-between items-center mb-8",children:[v.jsxs("h2",{className:"text-3xl font-black text-slate-800 flex items-center gap-3",children:[v.jsx(Bu,{className:"text-indigo-600"})," "]}),v.jsxs("button",{onClick:()=>Ur(!tn),className:"bg-indigo-600 text-white px-5 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100",children:[v.jsx(lc,{size:18})," "]})]}),tn&&v.jsxs("form",{onSubmit:pn,className:"bg-slate-50 p-6 rounded-2xl mb-8 border border-slate-200 animate-in fade-in",children:[v.jsx("h3",{className:"font-black text-slate-700 mb-4",children:""}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[v.jsx("input",{placeholder:"",value:ie,onChange:X=>Ae(X.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"}),v.jsx("input",{placeholder:"",type:"number",value:Ve,onChange:X=>je(X.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"}),v.jsxs("select",{value:rt,onChange:X=>Le(X.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500",children:[v.jsx("option",{value:"normal",children:""}),v.jsx("option",{value:"challenge",children:""}),v.jsx("option",{value:"hard",children:""})]}),v.jsxs("div",{className:"flex items-center gap-2 p-3 bg-white rounded-xl border border-slate-200",children:[v.jsx(Ku,{size:18,className:"text-slate-400"}),v.jsx("input",{type:"datetime-local",value:wt,onChange:X=>vt(X.target.value),className:"font-bold outline-none text-slate-600 w-full",placeholder:" ()"})]})]}),v.jsxs("div",{className:"flex justify-end gap-3",children:[v.jsx("button",{type:"button",onClick:()=>Ur(!1),className:"px-4 py-2 rounded-xl font-bold text-slate-400 hover:bg-slate-200 transition-all",children:""}),v.jsx("button",{type:"submit",className:"bg-indigo-600 text-white px-6 py-2 rounded-xl font-bold hover:bg-indigo-700 transition-all shadow-lg",children:""})]})]}),v.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[W.length===0&&v.jsx("div",{className:"text-center py-12 text-slate-400 font-bold bg-slate-50 rounded-2xl border border-slate-100 border-dashed",children:""}),W.map(X=>v.jsxs("div",{className:`flex flex-col md:flex-row md:items-center justify-between p-6 rounded-2xl border transition-all ${X.isActive?"bg-white border-slate-100 shadow-sm":"bg-slate-50 border-slate-100 opacity-60"}`,children:[v.jsxs("div",{className:"flex items-center gap-4 mb-4 md:mb-0",children:[v.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center font-black text-lg shrink-0 ${X.type==="normal"?"bg-emerald-100 text-emerald-600":X.type==="challenge"?"bg-orange-100 text-orange-600":"bg-rose-100 text-rose-600"}`,children:X.type==="normal"?"N":X.type==="challenge"?"C":"H"}),v.jsxs("div",{children:[v.jsxs("h3",{className:"font-black text-lg text-slate-800 flex items-center gap-2",children:[X.title,!X.isActive&&v.jsx("span",{className:"text-[10px] bg-slate-200 text-slate-500 px-2 py-0.5 rounded-full",children:""})]}),v.jsxs("p",{className:"text-slate-400 text-sm font-bold flex items-center gap-2",children:[v.jsxs("span",{className:"text-indigo-500",children:[X.points," PTS"]}),"  ",X.description,X.deadline&&v.jsxs("span",{className:"flex items-center gap-1 text-amber-500 ml-2",children:[v.jsx(Ku,{size:14})," ",new Date(X.deadline).toLocaleString()," "]})]})]})]}),v.jsx("button",{onClick:()=>Nn(X.id),className:`px-4 py-2 rounded-xl font-black text-xs transition-all whitespace-nowrap ${X.isActive?"bg-rose-50 text-rose-600 hover:bg-rose-100":"bg-emerald-50 text-emerald-600 hover:bg-emerald-100"}`,children:X.isActive?"":""})]},X.id))]})]}),t==="wishes"&&v.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[v.jsxs("h2",{className:"text-3xl font-black text-slate-800 mb-8 flex items-center gap-3",children:[v.jsx(qf,{className:"text-pink-500"})," "]}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:ae.length===0?v.jsx("div",{className:"col-span-full py-20 text-center text-slate-400 font-bold",children:""}):ae.map(X=>{var Ue;return v.jsxs("div",{className:"bg-slate-50 p-6 rounded-[2.5rem] border border-slate-100 relative group",children:[v.jsx("button",{onClick:()=>Dt(X.id),className:"absolute top-4 right-4 p-2 bg-white rounded-full text-slate-300 hover:text-rose-500 hover:shadow-md transition-all opacity-0 group-hover:opacity-100",children:v.jsx(Rf,{size:18})}),v.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[v.jsx("img",{src:X.userAvatar,className:"w-12 h-12 rounded-full border-2 border-white shadow-sm",alt:X.userName}),v.jsxs("div",{children:[v.jsx("h4",{className:"font-black text-slate-800",children:X.userName}),v.jsx("p",{className:"text-[10px] text-slate-400 font-bold",children:new Date(X.timestamp).toLocaleString()})]})]}),v.jsxs("h3",{className:"text-xl font-black text-slate-800 mb-2",children:["",X.itemName]}),v.jsxs("p",{className:"text-slate-500 text-sm mb-6 leading-relaxed italic",children:['"',X.description,'"']}),v.jsxs("div",{className:"flex items-center gap-2 text-pink-500 font-black text-sm",children:[v.jsx(qf,{size:16,fill:"currentColor"})," ",((Ue=X.likedBy)==null?void 0:Ue.length)||0," "]})]},X.id)})})]}),c&&v.jsxs("div",{className:"fixed inset-0 z-[150] bg-slate-900/95 backdrop-blur-xl flex flex-col items-center justify-center p-8",children:[v.jsxs("div",{className:"relative w-full max-w-lg aspect-square border-8 border-white/5 rounded-[5rem] overflow-hidden shadow-[0_0_100px_rgba(79,70,229,0.3)]",children:[v.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-900 via-indigo-900/20 to-slate-900 flex items-center justify-center",children:v.jsxs("div",{className:"text-center",children:[v.jsx(N3,{size:140,className:"mx-auto mb-10 animate-pulse text-indigo-400"}),v.jsx("p",{className:"text-3xl font-black text-white mb-4 tracking-tight",children:"..."}),v.jsx("p",{className:"text-indigo-300 font-bold tracking-widest uppercase text-xs",children:"AI Computer Vision Active"})]})}),v.jsx("div",{className:"absolute top-0 left-0 w-full h-3 bg-indigo-400 shadow-[0_0_50px_rgba(129,140,248,1)] animate-scan-line"})]}),v.jsxs("button",{onClick:()=>h(!1),className:"mt-16 bg-white/5 hover:bg-white/10 text-white px-12 py-5 rounded-[2rem] font-black transition-all border border-white/10 flex items-center gap-4 text-lg backdrop-blur",children:[v.jsx(Do,{size:24})," "]}),v.jsx("style",{children:`
            @keyframes scan-line {
              0% { top: 0% }
              100% { top: 100% }
            }
            .animate-scan-line {
              animation: scan-line 3s linear infinite;
            }
          `})]}),Ge&&v.jsx("div",{className:"fixed inset-0 z-[160] flex items-center justify-center p-4 bg-slate-900/70 backdrop-blur-2xl",children:v.jsxs("div",{className:"bg-white rounded-[4rem] max-w-md w-full p-12 shadow-[0_0_80px_rgba(0,0,0,0.5)] animate-in zoom-in-95 duration-200",children:[v.jsx("div",{className:"bg-emerald-50 w-24 h-24 rounded-[2rem] flex items-center justify-center text-emerald-600 mb-10 mx-auto shadow-inner",children:v.jsx(sd,{size:48})}),v.jsx("h2",{className:"text-3xl font-black text-slate-800 text-center mb-10 tracking-tight",children:""}),v.jsxs("div",{className:"bg-slate-50 rounded-[2.5rem] p-8 space-y-6 mb-12 border border-slate-100 shadow-inner",children:[v.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-slate-200/50",children:[v.jsx("span",{className:"text-slate-400 text-[10px] font-black uppercase tracking-widest",children:""}),v.jsx("span",{className:"font-black text-slate-800 text-xl",children:(Mt=w.find(X=>X.id===Ge.userId))==null?void 0:Mt.name})]}),v.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-slate-200/50",children:[v.jsx("span",{className:"text-slate-400 text-[10px] font-black uppercase tracking-widest",children:""}),v.jsx("span",{className:"font-black text-slate-800 text-xl",children:Ge.productName})]}),v.jsxs("div",{className:"flex justify-between items-center py-2",children:[v.jsx("span",{className:"text-slate-400 text-[10px] font-black uppercase tracking-widest",children:""}),v.jsxs("span",{className:"font-black text-indigo-600 text-2xl",children:[Ge.pointsSpent," ",v.jsx("span",{className:"text-xs font-bold text-indigo-400",children:"PTS"})]})]})]}),v.jsxs("div",{className:"flex flex-col gap-4",children:[v.jsxs("button",{onClick:()=>Fe(Ge.id),className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-6 rounded-2xl transition-all shadow-2xl shadow-indigo-100 flex items-center justify-center gap-4 text-xl active:scale-95",children:[v.jsx(Nu,{size:28}),""]}),v.jsx("button",{onClick:()=>ct(null),className:"w-full bg-slate-100 text-slate-600 font-bold py-5 rounded-2xl hover:bg-slate-200 transition-all text-lg",children:""})]})]})})]})},E9=30,Ag=E9*24*60*60*1e3,_9=({user:n,onUserUpdate:e})=>{const{showAlert:t}=Lc(),[s,c]=ne.useState([]),[h,p]=ne.useState(!1),[T,w]=ne.useState(""),[E,C]=ne.useState(""),[I,M]=ne.useState(null),B=s.filter(ae=>ae.userId===n.id).sort((ae,Q)=>Q.timestamp-ae.timestamp)[0],W=B&&Date.now()-B.timestamp<Ag;ne.useEffect(()=>{const ae=WT(Q=>{c(Q.sort((le,De)=>De.timestamp-le.timestamp))});return()=>ae()},[]),ne.useEffect(()=>{const ae=()=>{if(!B)return null;const le=B.timestamp+Ag-Date.now();return le<=0?null:{d:Math.floor(le/864e5),h:Math.floor(le/36e5%24),m:Math.floor(le/1e3/60%60),s:Math.floor(le/1e3%60)}},Q=setInterval(()=>{M(ae())},1e3);return M(ae()),()=>clearInterval(Q)},[B]);const $=async ae=>{if(ae.preventDefault(),!T.trim()||!E.trim())return;const Q={id:`wish_${Date.now()}`,userId:n.id,userName:n.name,userAvatar:n.avatar,itemName:T,description:E,timestamp:Date.now(),likedBy:[]};await zD(Q),p(!1),w(""),C(""),t("","success")},q=async(ae,Q)=>{if(Q!=null&&Q.includes(n.id)){t("","info");return}await GD(ae,n.id)},_e=async()=>{if(n.points<500){t(" 500 ","error");return}if(confirm(" 500 "))try{const Q={...n,points:n.points-500};await La(Q),B&&await HD(B.id,{timestamp:Date.now()-(Ag+1e5)}),t("","success"),e()}catch{t("","error")}};return v.jsxs("div",{className:"space-y-8 pb-20",children:[v.jsxs("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[v.jsxs("div",{children:[v.jsxs("h1",{className:"text-3xl font-bold text-slate-800 flex items-center gap-3",children:[v.jsx(ad,{className:"text-yellow-500"}),""]}),v.jsx("p",{className:"text-slate-500 mt-1",children:""})]}),v.jsxs("button",{onClick:()=>{W?t("","info"):p(!0)},className:`px-6 py-3 rounded-2xl font-black shadow-lg flex flex-col items-center gap-1 transition-all hover:scale-105 min-w-[200px] ${W?"bg-slate-100 text-slate-400 cursor-not-allowed border border-slate-200":"bg-indigo-600 text-white shadow-indigo-100 hover:bg-indigo-700"}`,children:[v.jsxs("div",{className:"flex items-center gap-2",children:[W?v.jsx(Ku,{size:18}):v.jsx(lc,{size:20}),v.jsx("span",{children:W?"":""})]}),W&&I&&v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsxs("span",{className:"text-[10px] font-bold font-mono tracking-tight",children:[I.d," ",I.h," ",I.m," ",I.s,""]}),v.jsxs("button",{onClick:ae=>{ae.stopPropagation(),_e()},className:"mt-2 bg-amber-100 text-amber-700 px-3 py-1 rounded-full text-[10px] font-black flex items-center gap-1 hover:bg-amber-200 transition-colors shadow-sm",children:[v.jsx(e3,{size:10}),"500 PTS "]})]})]})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.map(ae=>{var Q,le,De,Oe;return v.jsxs("div",{className:"bg-white rounded-[2rem] p-6 border border-slate-100 shadow-sm hover:shadow-md transition-all flex flex-col relative overflow-hidden group",children:[v.jsx("div",{className:"absolute -right-4 -top-4 w-24 h-24 bg-yellow-50 rounded-full blur-2xl group-hover:bg-yellow-100 transition-colors"}),v.jsxs("div",{className:"flex items-center gap-3 mb-4 z-10",children:[v.jsx("img",{src:ae.userAvatar,alt:ae.userName,className:"w-10 h-10 rounded-full border-2 border-white shadow-sm"}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm font-bold text-slate-700",children:ae.userName}),v.jsx("p",{className:"text-xs text-slate-400",children:new Date(ae.timestamp).toLocaleDateString()})]})]}),v.jsx("h3",{className:"text-xl font-black text-slate-800 mb-2 z-10",children:ae.itemName}),v.jsx("p",{className:"text-slate-500 text-sm mb-6 flex-1 z-10",children:ae.description}),v.jsx("div",{className:"flex items-center justify-between pt-4 border-t border-slate-50 z-10",children:v.jsxs("button",{onClick:()=>q(ae.id,ae.likedBy),className:`flex items-center gap-2 transition-colors group/like ${(Q=ae.likedBy)!=null&&Q.includes(n.id)?"text-pink-500":"text-slate-400 hover:text-pink-500"}`,children:[v.jsx("div",{className:`p-2 rounded-full transition-colors ${(le=ae.likedBy)!=null&&le.includes(n.id)?"bg-pink-50":"hover:bg-pink-50"}`,children:v.jsx(Y3,{size:18,className:(De=ae.likedBy)!=null&&De.includes(n.id)?"fill-pink-500":""})}),v.jsxs("span",{className:"font-bold text-sm",children:[((Oe=ae.likedBy)==null?void 0:Oe.length)||0," "]})]})})]},ae.id)}),s.length===0&&v.jsxs("div",{className:"col-span-full py-20 text-center space-y-4",children:[v.jsx("div",{className:"w-20 h-20 bg-slate-50 rounded-full flex items-center justify-center mx-auto text-slate-300",children:v.jsx(qf,{size:40})}),v.jsx("p",{className:"text-slate-400 font-bold",children:""})]})]}),h&&v.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:v.jsxs("div",{className:"bg-white rounded-[2.5rem] max-w-lg w-full p-8 shadow-2xl animate-in zoom-in-95 duration-200",children:[v.jsxs("div",{className:"flex justify-between items-center mb-8",children:[v.jsxs("h2",{className:"text-2xl font-black text-slate-800 flex items-center gap-2",children:[v.jsx(ad,{className:"text-indigo-500"}),""]}),v.jsx("button",{onClick:()=>p(!1),className:"text-slate-400 hover:text-slate-600 bg-slate-50 p-2 rounded-full",children:v.jsx(Do,{size:24})})]}),v.jsxs("form",{onSubmit:$,className:"space-y-6",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-slate-700 font-bold mb-2 ml-1",children:""}),v.jsx("input",{type:"text",value:T,onChange:ae=>w(ae.target.value),placeholder:"AirPods Pro...",className:"w-full bg-slate-50 border border-slate-200 rounded-2xl px-5 py-4 font-bold text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all placeholder:font-medium",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-slate-700 font-bold mb-2 ml-1",children:""}),v.jsx("textarea",{value:E,onChange:ae=>C(ae.target.value),placeholder:"...",className:"w-full bg-slate-50 border border-slate-200 rounded-2xl px-5 py-4 font-medium text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all h-32 resize-none placeholder:font-medium",required:!0})]}),v.jsxs("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-5 rounded-[1.25rem] transition-all shadow-xl shadow-indigo-100 flex items-center justify-center gap-3 text-lg",children:[v.jsx(M3,{size:24}),""]})]})]})})]})},w9=({onLogin:n})=>{const{showAlert:e}=Lc(),[t,s]=ne.useState("student"),[c,h]=ne.useState(!1),[p,T]=ne.useState(""),[w,E]=ne.useState(""),[C,I]=ne.useState(""),[M,B]=ne.useState(""),[W,$]=ne.useState(""),q=async le=>{le.preventDefault();try{const Oe=(await T_()).find(z=>z.name===p);if(!Oe){e("","error");return}if(!Oe.isApproved){e("","info");return}const j=`${Oe.id}@workshop.local`;await xg(El,j,w),await La(Oe),e("","success"),n(Oe)}catch(De){console.error("Login error:",De),De.code==="auth/invalid-credential"||De.code==="auth/wrong-password"?e(" ()","error"):De.code==="auth/user-not-found"?e("","error"):e(`: ${De.message}`,"error")}},_e=async le=>{le.preventDefault();try{if((await T_()).some(Y=>Y.name===p)){e("","error");return}const Oe=p,j=`${Oe}@workshop.local`,z=await r5(El,j,w);await s5(z.user,{displayName:p});const V={id:Oe,name:p,password:w,grade:C,points:0,totalEarned:0,role:$s.STUDENT,avatar:`https://api.dicebear.com/7.x/avataaars/svg?seed=${p}&mouth=smile&eyebrows=defaultNatural&eyes=default`,isApproved:!1};await La(V),await El.signOut(),e("","success"),h(!1),E("")}catch(De){console.error("Registration error:",De),De.code==="auth/email-already-in-use"?e(" (Email )","error"):e(`: ${De.message}`,"error")}},ae=async le=>{if(le.preventDefault(),M==="0857999")try{await xg(El,"admin@workshop.local","0857999"),La(Bf),e("","success"),n(Bf)}catch{e(" (admin@workshop.local)","error")}else try{await xg(El,"admin@workshop.local",M),La(Bf),e("","success"),n(Bf)}catch{e("","error")}},Q=async le=>{if(le.preventDefault(),W.toLowerCase()==="aaa")try{await $O(El),La(b_),e("","success"),n(b_)}catch(De){console.error("Guest login error:",De),De.code==="auth/admin-restricted-operation"?e(" Console  Anonymous","error"):e("","error")}else e("","error")};return v.jsx("div",{className:"min-h-screen bg-[#f8fafc] flex items-center justify-center p-4",children:v.jsxs("div",{className:"bg-white max-w-4xl w-full rounded-[3rem] shadow-2xl overflow-hidden flex flex-col md:flex-row min-h-[600px]",children:[v.jsxs("div",{className:"bg-indigo-600 p-12 text-white md:w-5/12 flex flex-col justify-between relative overflow-hidden",children:[v.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-500 rounded-full -translate-y-1/2 translate-x-1/3 opacity-50"}),v.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-indigo-700 rounded-full translate-y-1/3 -translate-x-1/3 opacity-50"}),v.jsxs("div",{className:"relative z-10",children:[v.jsx("div",{className:"bg-white w-16 h-16 rounded-2xl flex items-center justify-center p-2 mb-6 shadow-xl",children:v.jsx("img",{src:"/wenhong_cramschool/wenhong_logo.jpg",className:"w-full h-full rounded-xl object-cover",alt:"logo"})}),v.jsx("h1",{className:"text-4xl font-black tracking-tight mb-4",children:""}),v.jsx("p",{className:"text-indigo-100 font-medium text-lg leading-relaxed",children:""})]}),v.jsx("div",{className:"relative z-10 text-sm font-medium text-indigo-200",children:" 2026 Workshop System"})]}),v.jsxs("div",{className:"p-8 md:p-12 md:w-7/12 flex flex-col",children:[!c&&v.jsxs("div",{className:"flex gap-2 mb-10 overflow-x-auto pb-2",children:[v.jsxs("button",{onClick:()=>s("student"),className:`flex-1 min-w-[100px] py-3 rounded-xl font-bold text-sm transition-all flex flex-col items-center gap-1 ${t==="student"?"bg-indigo-50 text-indigo-600 ring-2 ring-indigo-500 ring-offset-2":"bg-slate-50 text-slate-400 hover:bg-slate-100"}`,children:[v.jsx(nN,{size:18})," "]}),v.jsxs("button",{onClick:()=>s("admin"),className:`flex-1 min-w-[100px] py-3 rounded-xl font-bold text-sm transition-all flex flex-col items-center gap-1 ${t==="admin"?"bg-indigo-50 text-indigo-600 ring-2 ring-indigo-500 ring-offset-2":"bg-slate-50 text-slate-400 hover:bg-slate-100"}`,children:[v.jsx(sd,{size:18})," "]}),v.jsxs("button",{onClick:()=>s("guest"),className:`flex-1 min-w-[100px] py-3 rounded-xl font-bold text-sm transition-all flex flex-col items-center gap-1 ${t==="guest"?"bg-indigo-50 text-indigo-600 ring-2 ring-500 ring-offset-2":"bg-slate-50 text-slate-400 hover:bg-slate-100"}`,children:[v.jsx(n3,{size:18})," "]})]}),!c&&t==="student"&&v.jsxs("form",{onSubmit:q,className:"space-y-6 flex-1 flex flex-col justify-center animate-in fade-in slide-in-from-right-4 duration-300",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-1",children:""}),v.jsx("p",{className:"text-slate-400",children:""})]}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),v.jsx("input",{type:"text",value:p,onChange:le=>T(le.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:""})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),v.jsx("input",{type:"password",value:w,onChange:le=>E(le.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:""})]})]}),v.jsx("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-4 rounded-2xl shadow-xl shadow-indigo-100 transition-all active:scale-95",children:""}),v.jsx("div",{className:"text-center",children:v.jsx("button",{type:"button",onClick:()=>h(!0),className:"text-indigo-500 font-bold hover:underline",children:""})})]}),c&&v.jsxs("form",{onSubmit:_e,className:"space-y-6 flex-1 flex flex-col justify-center animate-in fade-in slide-in-from-right-4 duration-300",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-1",children:""}),v.jsx("p",{className:"text-slate-400",children:""})]}),v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),v.jsx("input",{type:"text",value:p,onChange:le=>T(le.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:"",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),v.jsx("input",{type:"password",value:w,onChange:le=>E(le.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:"",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),v.jsx("select",{value:C,onChange:le=>I(le.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl px-5 py-4 font-bold text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all appearance-none",children:tm.map(le=>v.jsx("option",{value:le,children:le},le))})]})]}),v.jsxs("button",{type:"submit",className:"w-full bg-slate-800 hover:bg-slate-900 text-white font-black py-4 rounded-2xl shadow-xl transition-all active:scale-95 flex items-center justify-center gap-2",children:[v.jsx(Ng,{size:20}),""]}),v.jsx("div",{className:"text-center",children:v.jsx("button",{type:"button",onClick:()=>h(!1),className:"text-slate-400 font-bold hover:text-slate-600",children:""})})]}),!c&&t==="admin"&&v.jsxs("form",{onSubmit:ae,className:"space-y-6 flex-1 flex flex-col justify-center animate-in fade-in slide-in-from-right-4 duration-300",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-1",children:""}),v.jsx("p",{className:"text-slate-400",children:""})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),v.jsx("input",{type:"password",value:M,onChange:le=>B(le.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:"..."})]}),v.jsx("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-4 rounded-2xl shadow-xl shadow-indigo-100 transition-all active:scale-95",children:""})]}),!c&&t==="guest"&&v.jsxs("form",{onSubmit:Q,className:"space-y-6 flex-1 flex flex-col justify-center animate-in fade-in slide-in-from-right-4 duration-300",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-1",children:""}),v.jsx("p",{className:"text-slate-400",children:""})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),v.jsx("input",{type:"text",value:W,onChange:le=>$(le.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:"..."})]}),v.jsx("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-4 rounded-2xl shadow-xl shadow-indigo-100 transition-all active:scale-95",children:""})]})]})]})})};class A9 extends ne.Component{constructor(){super(...arguments),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Uncaught error:",e,t)}render(){return this.state.hasError?v.jsx("div",{className:"min-h-screen flex items-center justify-center p-6 bg-slate-50",children:v.jsxs("div",{className:"max-w-md w-full bg-white rounded-[2.5rem] shadow-2xl p-10 text-center border border-red-100",children:[v.jsx("div",{className:"bg-red-50 w-20 h-20 rounded-3xl flex items-center justify-center mx-auto mb-8 border border-red-100 animate-pulse",children:v.jsx(Z3,{className:"text-red-500",size:40})}),v.jsx("h1",{className:"text-2xl font-black text-slate-800 mb-4",children:""}),v.jsx("p",{className:"text-slate-500 mb-10 leading-relaxed font-medium",children:""}),this.state.error&&v.jsx("div",{className:"mb-8 p-4 bg-slate-50 rounded-2xl text-[10px] font-mono text-slate-400 overflow-auto max-h-32 text-left border border-slate-100 italic",children:this.state.error.toString()}),v.jsxs("button",{onClick:()=>window.location.reload(),className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-5 rounded-2xl transition-all shadow-xl shadow-indigo-100 flex items-center justify-center gap-3 active:scale-95",children:[v.jsx(v3,{size:24}),""]})]})}):this.props.children}}const b9=({user:n,currentRank:e,onSwitchUser:t})=>{const s=qa(),[c,h]=ne.useState(!1),p=[{path:"/",label:"",icon:d3},{path:"/shop",label:"",icon:U3},{path:"/wishes",label:"",icon:ad},{path:"/history",label:"",icon:id}];return n.role===$s.ADMIN&&p.push({path:"/admin",label:"",icon:sd}),v.jsxs("nav",{className:"bg-white border-r border-slate-200 w-full md:w-64 md:fixed md:inset-y-0 h-auto md:h-full z-50 shadow-sm",children:[v.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("img",{src:"/wenhong_cramschool/wenhong_logo.jpg",className:"w-8 h-8 rounded-lg shadow-sm object-cover",alt:"logo"}),v.jsx("span",{className:"text-xl font-bold text-slate-800 tracking-tight",children:""})]}),v.jsx("button",{onClick:()=>h(!c),className:"md:hidden text-slate-600",children:c?v.jsx(Do,{}):v.jsx(E3,{})})]}),v.jsx("div",{className:`${c?"block":"hidden"} md:block p-4 space-y-2`,children:p.map(T=>{const w=T.icon,E=s.pathname===T.path;return v.jsxs(rd,{to:T.path,onClick:()=>h(!1),className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 ${E?"bg-indigo-50 text-indigo-700 font-bold shadow-sm":"text-slate-600 hover:bg-slate-50"}`,children:[v.jsx(w,{size:20}),v.jsx("span",{children:T.label})]},T.path)})}),v.jsxs("div",{className:`${c?"block":"hidden"} md:block absolute bottom-0 w-full p-6 border-t border-slate-100 bg-white`,children:[v.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[v.jsx("img",{src:n.avatar,className:"w-10 h-10 rounded-full border-2 border-slate-100 object-cover",alt:"avatar"}),v.jsxs("div",{className:"overflow-hidden",children:[v.jsx("p",{className:"font-bold text-slate-800 truncate text-sm",children:n.name}),v.jsxs("div",{className:`text-[9px] px-2 py-0.5 rounded-full inline-block text-white font-black ${e.color}`,children:[e.icon," ",e.name," Lv.",Math.floor(n.totalEarned/500)+1]})]})]}),v.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-indigo-600 hover:text-indigo-800 transition-colors text-xs font-bold w-full bg-indigo-50 p-2 rounded-lg justify-center mb-2",children:[v.jsx(m3,{size:14}),v.jsx("span",{children:""})]}),v.jsxs(rd,{to:"/settings",className:"flex items-center gap-2 text-slate-400 hover:text-slate-600 transition-colors text-xs font-bold w-full p-2 justify-center",children:[v.jsx(L3,{size:14}),v.jsx("span",{children:""})]})]})]})},T9=()=>{const[n,e]=ne.useState(v_()),t=n?Vo.reduce((h,p)=>n.totalEarned>=p.threshold?p:h,Vo[0]):Vo[0],s=()=>{const h=v_();h&&e(h)},c=()=>{TD(),e(null)};return v.jsx(A9,{children:v.jsx(aN,{children:n?v.jsx(II,{children:v.jsxs("div",{className:"min-h-screen flex flex-col md:flex-row bg-[#fbfcfd]",children:[v.jsx(b9,{user:n,currentRank:t,onSwitchUser:c}),v.jsx("main",{className:"flex-1 md:ml-64 p-4 md:p-8",children:v.jsx("div",{className:"max-w-6xl mx-auto",children:v.jsxs(iI,{children:[v.jsx(xl,{path:"/",element:v.jsx(MM,{user:n,rank:t,onUserUpdate:s})}),v.jsx(xl,{path:"/shop",element:v.jsx(PM,{user:n,onUserUpdate:s})}),v.jsx(xl,{path:"/wishes",element:v.jsx(_9,{user:n,onUserUpdate:s})}),v.jsx(xl,{path:"/history",element:v.jsx(GM,{user:n})}),v.jsx(xl,{path:"/admin",element:n.role===$s.ADMIN?v.jsx(y9,{onRefresh:s}):v.jsx(nI,{to:"/",replace:!0})}),v.jsx(xl,{path:"/settings",element:v.jsx(WD,{user:n,onUserUpdate:s})})]})})})]})}):v.jsx(w9,{onLogin:e})})})},Ov=document.getElementById("root");if(!Ov)throw new Error("Could not find root element to mount to");const v9=aC.createRoot(Ov),S9=()=>v.jsxs(v.Fragment,{children:[v.jsx(T9,{}),!1]});v9.render(v.jsx(rr.StrictMode,{children:v.jsx(S9,{})}));
