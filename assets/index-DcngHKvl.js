function fT(i,e){for(var n=0;n<e.length;n++){const o=e[n];if(typeof o!="string"&&!Array.isArray(o)){for(const u in o)if(u!=="default"&&!(u in i)){const d=Object.getOwnPropertyDescriptor(o,u);d&&Object.defineProperty(i,u,d.get?d:{enumerable:!0,get:()=>o[u]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const y of d.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&o(y)}).observe(document,{childList:!0,subtree:!0});function n(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(u){if(u.ep)return;u.ep=!0;const d=n(u);fetch(u.href,d)}})();var Ih=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function H1(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var V0={exports:{}},kc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z2;function dT(){if(z2)return kc;z2=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(o,u,d){var y=null;if(d!==void 0&&(y=""+d),u.key!==void 0&&(y=""+u.key),"key"in u){d={};for(var v in u)v!=="key"&&(d[v]=u[v])}else d=u;return u=d.ref,{$$typeof:i,type:o,key:y,ref:u!==void 0?u:null,props:d}}return kc.Fragment=e,kc.jsx=n,kc.jsxs=n,kc}var H2;function gT(){return H2||(H2=1,V0.exports=dT()),V0.exports}var S=gT(),j0={exports:{}},pt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G2;function mT(){if(G2)return pt;G2=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),y=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),L=Symbol.iterator;function B(ie){return ie===null||typeof ie!="object"?null:(ie=L&&ie[L]||ie["@@iterator"],typeof ie=="function"?ie:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},K=Object.assign,Y={};function ae(ie,we,ke){this.props=ie,this.context=we,this.refs=Y,this.updater=ke||q}ae.prototype.isReactComponent={},ae.prototype.setState=function(ie,we){if(typeof ie!="object"&&typeof ie!="function"&&ie!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ie,we,"setState")},ae.prototype.forceUpdate=function(ie){this.updater.enqueueForceUpdate(this,ie,"forceUpdate")};function me(){}me.prototype=ae.prototype;function $(ie,we,ke){this.props=ie,this.context=we,this.refs=Y,this.updater=ke||q}var _e=$.prototype=new me;_e.constructor=$,K(_e,ae.prototype),_e.isPureReactComponent=!0;var je=Array.isArray;function De(){}var j={H:null,A:null,T:null,S:null},H=Object.prototype.hasOwnProperty;function V(ie,we,ke){var Ve=ke.ref;return{$$typeof:i,type:ie,key:we,ref:Ve!==void 0?Ve:null,props:ke}}function ne(ie,we){return V(ie.type,we,ie.props)}function W(ie){return typeof ie=="object"&&ie!==null&&ie.$$typeof===i}function Z(ie){var we={"=":"=0",":":"=2"};return"$"+ie.replace(/[=:]/g,function(ke){return we[ke]})}var X=/\/+/g;function We(ie,we){return typeof ie=="object"&&ie!==null&&ie.key!=null?Z(""+ie.key):we.toString(36)}function he(ie){switch(ie.status){case"fulfilled":return ie.value;case"rejected":throw ie.reason;default:switch(typeof ie.status=="string"?ie.then(De,De):(ie.status="pending",ie.then(function(we){ie.status==="pending"&&(ie.status="fulfilled",ie.value=we)},function(we){ie.status==="pending"&&(ie.status="rejected",ie.reason=we)})),ie.status){case"fulfilled":return ie.value;case"rejected":throw ie.reason}}throw ie}function pe(ie,we,ke,Ve,tt){var Le=typeof ie;(Le==="undefined"||Le==="boolean")&&(ie=null);var ct=!1;if(ie===null)ct=!0;else switch(Le){case"bigint":case"string":case"number":ct=!0;break;case"object":switch(ie.$$typeof){case i:case e:ct=!0;break;case C:return ct=ie._init,pe(ct(ie._payload),we,ke,Ve,tt)}}if(ct)return tt=tt(ie),ct=Ve===""?"."+We(ie,0):Ve,je(tt)?(ke="",ct!=null&&(ke=ct.replace(X,"$&/")+"/"),pe(tt,we,ke,"",function(zi){return zi})):tt!=null&&(W(tt)&&(tt=ne(tt,ke+(tt.key==null||ie&&ie.key===tt.key?"":(""+tt.key).replace(X,"$&/")+"/")+ct)),we.push(tt)),1;ct=0;var yt=Ve===""?".":Ve+":";if(je(ie))for(var Kt=0;Kt<ie.length;Kt++)Ve=ie[Kt],Le=yt+We(Ve,Kt),ct+=pe(Ve,we,ke,Le,tt);else if(Kt=B(ie),typeof Kt=="function")for(ie=Kt.call(ie),Kt=0;!(Ve=ie.next()).done;)Ve=Ve.value,Le=yt+We(Ve,Kt++),ct+=pe(Ve,we,ke,Le,tt);else if(Le==="object"){if(typeof ie.then=="function")return pe(he(ie),we,ke,Ve,tt);throw we=String(ie),Error("Objects are not valid as a React child (found: "+(we==="[object Object]"?"object with keys {"+Object.keys(ie).join(", ")+"}":we)+"). If you meant to render a collection of children, use an array instead.")}return ct}function be(ie,we,ke){if(ie==null)return ie;var Ve=[],tt=0;return pe(ie,Ve,"","",function(Le){return we.call(ke,Le,tt++)}),Ve}function qe(ie){if(ie._status===-1){var we=ie._result;we=we(),we.then(function(ke){(ie._status===0||ie._status===-1)&&(ie._status=1,ie._result=ke)},function(ke){(ie._status===0||ie._status===-1)&&(ie._status=2,ie._result=ke)}),ie._status===-1&&(ie._status=0,ie._result=we)}if(ie._status===1)return ie._result.default;throw ie._result}var ot=typeof reportError=="function"?reportError:function(ie){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var we=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ie=="object"&&ie!==null&&typeof ie.message=="string"?String(ie.message):String(ie),error:ie});if(!window.dispatchEvent(we))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ie);return}console.error(ie)},gt={map:be,forEach:function(ie,we,ke){be(ie,function(){we.apply(this,arguments)},ke)},count:function(ie){var we=0;return be(ie,function(){we++}),we},toArray:function(ie){return be(ie,function(we){return we})||[]},only:function(ie){if(!W(ie))throw Error("React.Children.only expected to receive a single React element child.");return ie}};return pt.Activity=I,pt.Children=gt,pt.Component=ae,pt.Fragment=n,pt.Profiler=u,pt.PureComponent=$,pt.StrictMode=o,pt.Suspense=b,pt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,pt.__COMPILER_RUNTIME={__proto__:null,c:function(ie){return j.H.useMemoCache(ie)}},pt.cache=function(ie){return function(){return ie.apply(null,arguments)}},pt.cacheSignal=function(){return null},pt.cloneElement=function(ie,we,ke){if(ie==null)throw Error("The argument must be a React element, but you passed "+ie+".");var Ve=K({},ie.props),tt=ie.key;if(we!=null)for(Le in we.key!==void 0&&(tt=""+we.key),we)!H.call(we,Le)||Le==="key"||Le==="__self"||Le==="__source"||Le==="ref"&&we.ref===void 0||(Ve[Le]=we[Le]);var Le=arguments.length-2;if(Le===1)Ve.children=ke;else if(1<Le){for(var ct=Array(Le),yt=0;yt<Le;yt++)ct[yt]=arguments[yt+2];Ve.children=ct}return V(ie.type,tt,Ve)},pt.createContext=function(ie){return ie={$$typeof:y,_currentValue:ie,_currentValue2:ie,_threadCount:0,Provider:null,Consumer:null},ie.Provider=ie,ie.Consumer={$$typeof:d,_context:ie},ie},pt.createElement=function(ie,we,ke){var Ve,tt={},Le=null;if(we!=null)for(Ve in we.key!==void 0&&(Le=""+we.key),we)H.call(we,Ve)&&Ve!=="key"&&Ve!=="__self"&&Ve!=="__source"&&(tt[Ve]=we[Ve]);var ct=arguments.length-2;if(ct===1)tt.children=ke;else if(1<ct){for(var yt=Array(ct),Kt=0;Kt<ct;Kt++)yt[Kt]=arguments[Kt+2];tt.children=yt}if(ie&&ie.defaultProps)for(Ve in ct=ie.defaultProps,ct)tt[Ve]===void 0&&(tt[Ve]=ct[Ve]);return V(ie,Le,tt)},pt.createRef=function(){return{current:null}},pt.forwardRef=function(ie){return{$$typeof:v,render:ie}},pt.isValidElement=W,pt.lazy=function(ie){return{$$typeof:C,_payload:{_status:-1,_result:ie},_init:qe}},pt.memo=function(ie,we){return{$$typeof:_,type:ie,compare:we===void 0?null:we}},pt.startTransition=function(ie){var we=j.T,ke={};j.T=ke;try{var Ve=ie(),tt=j.S;tt!==null&&tt(ke,Ve),typeof Ve=="object"&&Ve!==null&&typeof Ve.then=="function"&&Ve.then(De,ot)}catch(Le){ot(Le)}finally{we!==null&&ke.types!==null&&(we.types=ke.types),j.T=we}},pt.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},pt.use=function(ie){return j.H.use(ie)},pt.useActionState=function(ie,we,ke){return j.H.useActionState(ie,we,ke)},pt.useCallback=function(ie,we){return j.H.useCallback(ie,we)},pt.useContext=function(ie){return j.H.useContext(ie)},pt.useDebugValue=function(){},pt.useDeferredValue=function(ie,we){return j.H.useDeferredValue(ie,we)},pt.useEffect=function(ie,we){return j.H.useEffect(ie,we)},pt.useEffectEvent=function(ie){return j.H.useEffectEvent(ie)},pt.useId=function(){return j.H.useId()},pt.useImperativeHandle=function(ie,we,ke){return j.H.useImperativeHandle(ie,we,ke)},pt.useInsertionEffect=function(ie,we){return j.H.useInsertionEffect(ie,we)},pt.useLayoutEffect=function(ie,we){return j.H.useLayoutEffect(ie,we)},pt.useMemo=function(ie,we){return j.H.useMemo(ie,we)},pt.useOptimistic=function(ie,we){return j.H.useOptimistic(ie,we)},pt.useReducer=function(ie,we,ke){return j.H.useReducer(ie,we,ke)},pt.useRef=function(ie){return j.H.useRef(ie)},pt.useState=function(ie){return j.H.useState(ie)},pt.useSyncExternalStore=function(ie,we,ke){return j.H.useSyncExternalStore(ie,we,ke)},pt.useTransition=function(){return j.H.useTransition()},pt.version="19.2.3",pt}var q2;function G1(){return q2||(q2=1,j0.exports=mT()),j0.exports}var se=G1();const ni=H1(se);var F0={exports:{}},Uc={},z0={exports:{}},H0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y2;function pT(){return Y2||(Y2=1,(function(i){function e(pe,be){var qe=pe.length;pe.push(be);e:for(;0<qe;){var ot=qe-1>>>1,gt=pe[ot];if(0<u(gt,be))pe[ot]=be,pe[qe]=gt,qe=ot;else break e}}function n(pe){return pe.length===0?null:pe[0]}function o(pe){if(pe.length===0)return null;var be=pe[0],qe=pe.pop();if(qe!==be){pe[0]=qe;e:for(var ot=0,gt=pe.length,ie=gt>>>1;ot<ie;){var we=2*(ot+1)-1,ke=pe[we],Ve=we+1,tt=pe[Ve];if(0>u(ke,qe))Ve<gt&&0>u(tt,ke)?(pe[ot]=tt,pe[Ve]=qe,ot=Ve):(pe[ot]=ke,pe[we]=qe,ot=we);else if(Ve<gt&&0>u(tt,qe))pe[ot]=tt,pe[Ve]=qe,ot=Ve;else break e}}return be}function u(pe,be){var qe=pe.sortIndex-be.sortIndex;return qe!==0?qe:pe.id-be.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;i.unstable_now=function(){return d.now()}}else{var y=Date,v=y.now();i.unstable_now=function(){return y.now()-v}}var b=[],_=[],C=1,I=null,L=3,B=!1,q=!1,K=!1,Y=!1,ae=typeof setTimeout=="function"?setTimeout:null,me=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function _e(pe){for(var be=n(_);be!==null;){if(be.callback===null)o(_);else if(be.startTime<=pe)o(_),be.sortIndex=be.expirationTime,e(b,be);else break;be=n(_)}}function je(pe){if(K=!1,_e(pe),!q)if(n(b)!==null)q=!0,De||(De=!0,Z());else{var be=n(_);be!==null&&he(je,be.startTime-pe)}}var De=!1,j=-1,H=5,V=-1;function ne(){return Y?!0:!(i.unstable_now()-V<H)}function W(){if(Y=!1,De){var pe=i.unstable_now();V=pe;var be=!0;try{e:{q=!1,K&&(K=!1,me(j),j=-1),B=!0;var qe=L;try{t:{for(_e(pe),I=n(b);I!==null&&!(I.expirationTime>pe&&ne());){var ot=I.callback;if(typeof ot=="function"){I.callback=null,L=I.priorityLevel;var gt=ot(I.expirationTime<=pe);if(pe=i.unstable_now(),typeof gt=="function"){I.callback=gt,_e(pe),be=!0;break t}I===n(b)&&o(b),_e(pe)}else o(b);I=n(b)}if(I!==null)be=!0;else{var ie=n(_);ie!==null&&he(je,ie.startTime-pe),be=!1}}break e}finally{I=null,L=qe,B=!1}be=void 0}}finally{be?Z():De=!1}}}var Z;if(typeof $=="function")Z=function(){$(W)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,We=X.port2;X.port1.onmessage=W,Z=function(){We.postMessage(null)}}else Z=function(){ae(W,0)};function he(pe,be){j=ae(function(){pe(i.unstable_now())},be)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(pe){pe.callback=null},i.unstable_forceFrameRate=function(pe){0>pe||125<pe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<pe?Math.floor(1e3/pe):5},i.unstable_getCurrentPriorityLevel=function(){return L},i.unstable_next=function(pe){switch(L){case 1:case 2:case 3:var be=3;break;default:be=L}var qe=L;L=be;try{return pe()}finally{L=qe}},i.unstable_requestPaint=function(){Y=!0},i.unstable_runWithPriority=function(pe,be){switch(pe){case 1:case 2:case 3:case 4:case 5:break;default:pe=3}var qe=L;L=pe;try{return be()}finally{L=qe}},i.unstable_scheduleCallback=function(pe,be,qe){var ot=i.unstable_now();switch(typeof qe=="object"&&qe!==null?(qe=qe.delay,qe=typeof qe=="number"&&0<qe?ot+qe:ot):qe=ot,pe){case 1:var gt=-1;break;case 2:gt=250;break;case 5:gt=1073741823;break;case 4:gt=1e4;break;default:gt=5e3}return gt=qe+gt,pe={id:C++,callback:be,priorityLevel:pe,startTime:qe,expirationTime:gt,sortIndex:-1},qe>ot?(pe.sortIndex=qe,e(_,pe),n(b)===null&&pe===n(_)&&(K?(me(j),j=-1):K=!0,he(je,qe-ot))):(pe.sortIndex=gt,e(b,pe),q||B||(q=!0,De||(De=!0,Z()))),pe},i.unstable_shouldYield=ne,i.unstable_wrapCallback=function(pe){var be=L;return function(){var qe=L;L=be;try{return pe.apply(this,arguments)}finally{L=qe}}}})(H0)),H0}var X2;function xT(){return X2||(X2=1,z0.exports=pT()),z0.exports}var G0={exports:{}},Zi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K2;function yT(){if(K2)return Zi;K2=1;var i=G1();function e(b){var _="https://react.dev/errors/"+b;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var C=2;C<arguments.length;C++)_+="&args[]="+encodeURIComponent(arguments[C])}return"Minified React error #"+b+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var o={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},u=Symbol.for("react.portal");function d(b,_,C){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:I==null?null:""+I,children:b,containerInfo:_,implementation:C}}var y=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function v(b,_){if(b==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return Zi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Zi.createPortal=function(b,_){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return d(b,_,null,C)},Zi.flushSync=function(b){var _=y.T,C=o.p;try{if(y.T=null,o.p=2,b)return b()}finally{y.T=_,o.p=C,o.d.f()}},Zi.preconnect=function(b,_){typeof b=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,o.d.C(b,_))},Zi.prefetchDNS=function(b){typeof b=="string"&&o.d.D(b)},Zi.preinit=function(b,_){if(typeof b=="string"&&_&&typeof _.as=="string"){var C=_.as,I=v(C,_.crossOrigin),L=typeof _.integrity=="string"?_.integrity:void 0,B=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;C==="style"?o.d.S(b,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:I,integrity:L,fetchPriority:B}):C==="script"&&o.d.X(b,{crossOrigin:I,integrity:L,fetchPriority:B,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},Zi.preinitModule=function(b,_){if(typeof b=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var C=v(_.as,_.crossOrigin);o.d.M(b,{crossOrigin:C,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&o.d.M(b)},Zi.preload=function(b,_){if(typeof b=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var C=_.as,I=v(C,_.crossOrigin);o.d.L(b,C,{crossOrigin:I,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},Zi.preloadModule=function(b,_){if(typeof b=="string")if(_){var C=v(_.as,_.crossOrigin);o.d.m(b,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:C,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else o.d.m(b)},Zi.requestFormReset=function(b){o.d.r(b)},Zi.unstable_batchedUpdates=function(b,_){return b(_)},Zi.useFormState=function(b,_,C){return y.H.useFormState(b,_,C)},Zi.useFormStatus=function(){return y.H.useHostTransitionStatus()},Zi.version="19.2.3",Zi}var W2;function ET(){if(W2)return G0.exports;W2=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),G0.exports=yT(),G0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q2;function _T(){if(Q2)return Uc;Q2=1;var i=xT(),e=G1(),n=ET();function o(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function d(t){var s=t,c=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(c=s.return),t=s.return;while(t)}return s.tag===3?c:null}function y(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function v(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function b(t){if(d(t)!==t)throw Error(o(188))}function _(t){var s=t.alternate;if(!s){if(s=d(t),s===null)throw Error(o(188));return s!==t?null:t}for(var c=t,g=s;;){var E=c.return;if(E===null)break;var w=E.alternate;if(w===null){if(g=E.return,g!==null){c=g;continue}break}if(E.child===w.child){for(w=E.child;w;){if(w===c)return b(E),t;if(w===g)return b(E),s;w=w.sibling}throw Error(o(188))}if(c.return!==g.return)c=E,g=w;else{for(var O=!1,U=E.child;U;){if(U===c){O=!0,c=E,g=w;break}if(U===g){O=!0,g=E,c=w;break}U=U.sibling}if(!O){for(U=w.child;U;){if(U===c){O=!0,c=w,g=E;break}if(U===g){O=!0,g=w,c=E;break}U=U.sibling}if(!O)throw Error(o(189))}}if(c.alternate!==g)throw Error(o(190))}if(c.tag!==3)throw Error(o(188));return c.stateNode.current===c?t:s}function C(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=C(t),s!==null)return s;t=t.sibling}return null}var I=Object.assign,L=Symbol.for("react.element"),B=Symbol.for("react.transitional.element"),q=Symbol.for("react.portal"),K=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),ae=Symbol.for("react.profiler"),me=Symbol.for("react.consumer"),$=Symbol.for("react.context"),_e=Symbol.for("react.forward_ref"),je=Symbol.for("react.suspense"),De=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),ne=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function Z(t){return t===null||typeof t!="object"?null:(t=W&&t[W]||t["@@iterator"],typeof t=="function"?t:null)}var X=Symbol.for("react.client.reference");function We(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===X?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case K:return"Fragment";case ae:return"Profiler";case Y:return"StrictMode";case je:return"Suspense";case De:return"SuspenseList";case V:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case q:return"Portal";case $:return t.displayName||"Context";case me:return(t._context.displayName||"Context")+".Consumer";case _e:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case j:return s=t.displayName||null,s!==null?s:We(t.type)||"Memo";case H:s=t._payload,t=t._init;try{return We(t(s))}catch{}}return null}var he=Array.isArray,pe=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,qe={pending:!1,data:null,method:null,action:null},ot=[],gt=-1;function ie(t){return{current:t}}function we(t){0>gt||(t.current=ot[gt],ot[gt]=null,gt--)}function ke(t,s){gt++,ot[gt]=t.current,t.current=s}var Ve=ie(null),tt=ie(null),Le=ie(null),ct=ie(null);function yt(t,s){switch(ke(Le,s),ke(tt,t),ke(Ve,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?h2(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=h2(s),t=f2(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}we(Ve),ke(Ve,t)}function Kt(){we(Ve),we(tt),we(Le)}function zi(t){t.memoizedState!==null&&ke(ct,t);var s=Ve.current,c=f2(s,t.type);s!==c&&(ke(tt,t),ke(Ve,c))}function bn(t){tt.current===t&&(we(Ve),we(tt)),ct.current===t&&(we(ct),Mc._currentValue=qe)}var gr,Et;function ci(t){if(gr===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);gr=s&&s[1]||"",Et=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+gr+t+Et}var Qn=!1;function Hi(t,s){if(!t||Qn)return"";Qn=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(s){var Se=function(){throw Error()};if(Object.defineProperty(Se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Se,[])}catch(Ae){var ge=Ae}Reflect.construct(t,[],Se)}else{try{Se.call()}catch(Ae){ge=Ae}t.call(Se.prototype)}}else{try{throw Error()}catch(Ae){ge=Ae}(Se=t())&&typeof Se.catch=="function"&&Se.catch(function(){})}}catch(Ae){if(Ae&&ge&&typeof Ae.stack=="string")return[Ae.stack,ge.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=g.DetermineComponentFrameRoot(),O=w[0],U=w[1];if(O&&U){var Q=O.split(`
`),de=U.split(`
`);for(E=g=0;g<Q.length&&!Q[g].includes("DetermineComponentFrameRoot");)g++;for(;E<de.length&&!de[E].includes("DetermineComponentFrameRoot");)E++;if(g===Q.length||E===de.length)for(g=Q.length-1,E=de.length-1;1<=g&&0<=E&&Q[g]!==de[E];)E--;for(;1<=g&&0<=E;g--,E--)if(Q[g]!==de[E]){if(g!==1||E!==1)do if(g--,E--,0>E||Q[g]!==de[E]){var Te=`
`+Q[g].replace(" at new "," at ");return t.displayName&&Te.includes("<anonymous>")&&(Te=Te.replace("<anonymous>",t.displayName)),Te}while(1<=g&&0<=E);break}}}finally{Qn=!1,Error.prepareStackTrace=c}return(c=t?t.displayName||t.name:"")?ci(c):""}function mn(t,s){switch(t.tag){case 26:case 27:case 5:return ci(t.type);case 16:return ci("Lazy");case 13:return t.child!==s&&s!==null?ci("Suspense Fallback"):ci("Suspense");case 19:return ci("SuspenseList");case 0:case 15:return Hi(t.type,!1);case 11:return Hi(t.type.render,!1);case 1:return Hi(t.type,!0);case 31:return ci("Activity");default:return""}}function Gt(t){try{var s="",c=null;do s+=mn(t,c),c=t,t=t.return;while(t);return s}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var Qe=Object.prototype.hasOwnProperty,En=i.unstable_scheduleCallback,Fe=i.unstable_cancelCallback,xs=i.unstable_shouldYield,tr=i.unstable_requestPaint,hn=i.unstable_now,mr=i.unstable_getCurrentPriorityLevel,ui=i.unstable_ImmediatePriority,ys=i.unstable_UserBlockingPriority,ri=i.unstable_NormalPriority,Fn=i.unstable_LowPriority,Cs=i.unstable_IdlePriority,Yr=i.log,Sa=i.unstable_setDisableYieldValue,Wt=null,Oe=null;function qt(t){if(typeof Yr=="function"&&Sa(t),Oe&&typeof Oe.setStrictMode=="function")try{Oe.setStrictMode(Wt,t)}catch{}}var rt=Math.clz32?Math.clz32:Ss,fn=Math.log,pr=Math.LN2;function Ss(t){return t>>>=0,t===0?32:31-(fn(t)/pr|0)|0}var nr=256,At=262144,an=4194304;function ir(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function rr(t,s,c){var g=t.pendingLanes;if(g===0)return 0;var E=0,w=t.suspendedLanes,O=t.pingedLanes;t=t.warmLanes;var U=g&134217727;return U!==0?(g=U&~w,g!==0?E=ir(g):(O&=U,O!==0?E=ir(O):c||(c=U&~t,c!==0&&(E=ir(c))))):(U=g&~w,U!==0?E=ir(U):O!==0?E=ir(O):c||(c=g&~t,c!==0&&(E=ir(c)))),E===0?0:s!==0&&s!==E&&(s&w)===0&&(w=E&-E,c=s&-s,w>=c||w===32&&(c&4194048)!==0)?s:E}function Sn(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function Gs(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zn(){var t=an;return an<<=1,(an&62914560)===0&&(an=4194304),t}function _i(t){for(var s=[],c=0;31>c;c++)s.push(t);return s}function xr(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Gi(t,s,c,g,E,w){var O=t.pendingLanes;t.pendingLanes=c,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=c,t.entangledLanes&=c,t.errorRecoveryDisabledLanes&=c,t.shellSuspendCounter=0;var U=t.entanglements,Q=t.expirationTimes,de=t.hiddenUpdates;for(c=O&~c;0<c;){var Te=31-rt(c),Se=1<<Te;U[Te]=0,Q[Te]=-1;var ge=de[Te];if(ge!==null)for(de[Te]=null,Te=0;Te<ge.length;Te++){var Ae=ge[Te];Ae!==null&&(Ae.lane&=-536870913)}c&=~Se}g!==0&&Xr(t,g,0),w!==0&&E===0&&t.tag!==0&&(t.suspendedLanes|=w&~(O&~s))}function Xr(t,s,c){t.pendingLanes|=s,t.suspendedLanes&=~s;var g=31-rt(s);t.entangledLanes|=s,t.entanglements[g]=t.entanglements[g]|1073741824|c&261930}function ee(t,s){var c=t.entangledLanes|=s;for(t=t.entanglements;c;){var g=31-rt(c),E=1<<g;E&s|t[g]&s&&(t[g]|=s),c&=~E}}function ht(t,s){var c=s&-s;return c=(c&42)!==0?1:nt(c),(c&(t.suspendedLanes|s))!==0?0:c}function nt(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function In(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function en(){var t=be.p;return t!==0?t:(t=window.event,t===void 0?32:P2(t.type))}function Ue(t,s){var c=be.p;try{return be.p=t,s()}finally{be.p=c}}var Hn=Math.random().toString(36).slice(2),Tn="__reactFiber$"+Hn,wt="__reactProps$"+Hn,hi="__reactContainer$"+Hn,fi="__reactEvents$"+Hn,Ia="__reactListeners$"+Hn,sr="__reactHandles$"+Hn,il="__reactResources$"+Hn,Kr="__reactMarker$"+Hn;function Ni(t){delete t[Tn],delete t[wt],delete t[fi],delete t[Ia],delete t[sr]}function vn(t){var s=t[Tn];if(s)return s;for(var c=t.parentNode;c;){if(s=c[hi]||c[Tn]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(t=E2(t);t!==null;){if(c=t[Tn])return c;t=E2(t)}return s}t=c,c=t.parentNode}return null}function Ot(t){if(t=t[Tn]||t[hi]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function qi(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(o(33))}function Ai(t){var s=t[il];return s||(s=t[il]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Pn(t){t[Kr]=!0}var Ie=new Set,Ao={};function $t(t,s){Ri(t,s),Ri(t+"Capture",s)}function Ri(t,s){for(Ao[t]=s,t=0;t<s.length;t++)Ie.add(s[t])}var wo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ut={},Dt={};function Ct(t){return Qe.call(Dt,t)?!0:Qe.call(Ut,t)?!1:wo.test(t)?Dt[t]=!0:(Ut[t]=!0,!1)}function Is(t,s,c){if(Ct(s))if(c===null)t.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var g=s.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+c)}}function Oi(t,s,c){if(c===null)t.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+c)}}function Bn(t,s,c,g){if(g===null)t.removeAttribute(c);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(c);return}t.setAttributeNS(s,c,""+g)}}function Nt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Di(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function bo(t,s,c){var g=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var E=g.get,w=g.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return E.call(this)},set:function(O){c=""+O,w.call(this,O)}}),Object.defineProperty(t,s,{enumerable:g.enumerable}),{getValue:function(){return c},setValue:function(O){c=""+O},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function st(t){if(!t._valueTracker){var s=Di(t)?"checked":"value";t._valueTracker=bo(t,s,""+t[s])}}function Yi(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var c=s.getValue(),g="";return t&&(g=Di(t)?t.checked?"true":"false":t.value),t=g,t!==c?(s.setValue(t),!0):!1}function Wr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var yr=/[\n"\\]/g;function bt(t){return t.replace(yr,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Gn(t,s,c,g,E,w,O,U){t.name="",O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?t.type=O:t.removeAttribute("type"),s!=null?O==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+Nt(s)):t.value!==""+Nt(s)&&(t.value=""+Nt(s)):O!=="submit"&&O!=="reset"||t.removeAttribute("value"),s!=null?z(t,O,Nt(s)):c!=null?z(t,O,Nt(c)):g!=null&&t.removeAttribute("value"),E==null&&w!=null&&(t.defaultChecked=!!w),E!=null&&(t.checked=E&&typeof E!="function"&&typeof E!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?t.name=""+Nt(U):t.removeAttribute("name")}function ue(t,s,c,g,E,w,O,U){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(t.type=w),s!=null||c!=null){if(!(w!=="submit"&&w!=="reset"||s!=null)){st(t);return}c=c!=null?""+Nt(c):"",s=s!=null?""+Nt(s):c,U||s===t.value||(t.value=s),t.defaultValue=s}g=g??E,g=typeof g!="function"&&typeof g!="symbol"&&!!g,t.checked=U?t.checked:!!g,t.defaultChecked=!!g,O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(t.name=O),st(t)}function z(t,s,c){s==="number"&&Wr(t.ownerDocument)===t||t.defaultValue===""+c||(t.defaultValue=""+c)}function Ye(t,s,c,g){if(t=t.options,s){s={};for(var E=0;E<c.length;E++)s["$"+c[E]]=!0;for(c=0;c<t.length;c++)E=s.hasOwnProperty("$"+t[c].value),t[c].selected!==E&&(t[c].selected=E),E&&g&&(t[c].defaultSelected=!0)}else{for(c=""+Nt(c),s=null,E=0;E<t.length;E++){if(t[E].value===c){t[E].selected=!0,g&&(t[E].defaultSelected=!0);return}s!==null||t[E].disabled||(s=t[E])}s!==null&&(s.selected=!0)}}function qn(t,s,c){if(s!=null&&(s=""+Nt(s),s!==t.value&&(t.value=s),c==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=c!=null?""+Nt(c):""}function si(t,s,c,g){if(s==null){if(g!=null){if(c!=null)throw Error(o(92));if(he(g)){if(1<g.length)throw Error(o(93));g=g[0]}c=g}c==null&&(c=""),s=c}c=Nt(s),t.defaultValue=c,g=t.textContent,g===c&&g!==""&&g!==null&&(t.value=g),st(t)}function Xi(t,s){if(s){var c=t.firstChild;if(c&&c===t.lastChild&&c.nodeType===3){c.nodeValue=s;return}}t.textContent=s}var Na=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vi(t,s,c){var g=s.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?g?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":g?t.setProperty(s,c):typeof c!="number"||c===0||Na.has(s)?s==="float"?t.cssFloat=c:t[s]=(""+c).trim():t[s]=c+"px"}function Ze(t,s,c){if(s!=null&&typeof s!="object")throw Error(o(62));if(t=t.style,c!=null){for(var g in c)!c.hasOwnProperty(g)||s!=null&&s.hasOwnProperty(g)||(g.indexOf("--")===0?t.setProperty(g,""):g==="float"?t.cssFloat="":t[g]="");for(var E in s)g=s[E],s.hasOwnProperty(E)&&c[E]!==g&&vi(t,E,g)}else for(var w in s)s.hasOwnProperty(w)&&vi(t,w,s[w])}function on(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var To=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ns=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Rs(t){return Ns.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Ki(){}var qs=null;function Er(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _n=null,Wi=null;function Qi(t){var s=Ot(t);if(s&&(t=s.stateNode)){var c=t[wt]||null;e:switch(t=s.stateNode,s.type){case"input":if(Gn(t,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),s=c.name,c.type==="radio"&&s!=null){for(c=t;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+bt(""+s)+'"][type="radio"]'),s=0;s<c.length;s++){var g=c[s];if(g!==t&&g.form===t.form){var E=g[wt]||null;if(!E)throw Error(o(90));Gn(g,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(s=0;s<c.length;s++)g=c[s],g.form===t.form&&Yi(g)}break e;case"textarea":qn(t,c.value,c.defaultValue);break e;case"select":s=c.value,s!=null&&Ye(t,!!c.multiple,s,!1)}}}var Je=!1;function Os(t,s,c){if(Je)return t(s,c);Je=!0;try{var g=t(s);return g}finally{if(Je=!1,(_n!==null||Wi!==null)&&(ah(),_n&&(s=_n,t=Wi,Wi=_n=null,Qi(s),t)))for(s=0;s<t.length;s++)Qi(t[s])}}function it(t,s){var c=t.stateNode;if(c===null)return null;var g=c[wt]||null;if(g===null)return null;c=g[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(t=t.type,g=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!g;break e;default:t=!1}if(t)return null;if(c&&typeof c!="function")throw Error(o(231,s,typeof c));return c}var ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ys=!1;if(ln)try{var tn={};Object.defineProperty(tn,"passive",{get:function(){Ys=!0}}),window.addEventListener("test",tn,tn),window.removeEventListener("test",tn,tn)}catch{Ys=!1}var Dr=null,Mr=null,Xs=null;function Es(){if(Xs)return Xs;var t,s=Mr,c=s.length,g,E="value"in Dr?Dr.value:Dr.textContent,w=E.length;for(t=0;t<c&&s[t]===E[t];t++);var O=c-t;for(g=1;g<=O&&s[c-g]===E[w-g];g++);return Xs=E.slice(t,1<g?1-g:void 0)}function Lr(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function ar(){return!0}function _r(){return!1}function Yn(t){function s(c,g,E,w,O){this._reactName=c,this._targetInst=E,this.type=g,this.nativeEvent=w,this.target=O,this.currentTarget=null;for(var U in t)t.hasOwnProperty(U)&&(c=t[U],this[U]=c?c(w):w[U]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?ar:_r,this.isPropagationStopped=_r,this}return I(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=ar)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=ar)},persist:function(){},isPersistent:ar}),s}var or={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nn=Yn(or),_s=I({},or,{view:0,detail:0}),Ra=Yn(_s),As,Oa,Qr,Da=I({},_s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Qr&&(Qr&&t.type==="mousemove"?(As=t.screenX-Qr.screenX,Oa=t.screenY-Qr.screenY):Oa=As=0,Qr=t),As)},movementY:function(t){return"movementY"in t?t.movementY:Oa}}),Qt=Yn(Da),Ds=I({},Da,{dataTransfer:0}),Ks=Yn(Ds),Pr=I({},_s,{relatedTarget:0}),Ws=Yn(Pr),xe=I({},or,{animationName:0,elapsedTime:0,pseudoElement:0}),mt=Yn(xe),kn=I({},or,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Qs=Yn(kn),vo=I({},or,{data:0}),Zr=Yn(vo),rl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ma={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Un(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Ma[t])?!!s[t]:!1}function Jr(){return Un}var Rt=I({},_s,{key:function(t){if(t.key){var s=rl[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Lr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?sl[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jr,charCode:function(t){return t.type==="keypress"?Lr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Lr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Zs=Yn(Rt),$r=I({},Da,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mt=Yn($r),p=I({},_s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jr}),N=Yn(p),D=I({},or,{propertyName:0,elapsedTime:0,pseudoElement:0}),F=Yn(D),le=I({},Da,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ee=Yn(le),Be=I({},or,{newState:0,oldState:0}),ut=Yn(Be),Vn=[9,13,27,32],Yt=ln&&"CompositionEvent"in window,An=null;ln&&"documentMode"in document&&(An=document.documentMode);var lr=ln&&"TextEvent"in window&&!An,es=ln&&(!Yt||An&&8<An&&11>=An),Ci=" ",cr=!1;function Js(t,s){switch(t){case"keyup":return Vn.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ts(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var La=!1;function Ms(t,s){switch(t){case"compositionend":return ts(s);case"keypress":return s.which!==32?null:(cr=!0,Ci);case"textInput":return t=s.data,t===Ci&&cr?null:t;default:return null}}function al(t,s){if(La)return t==="compositionend"||!Yt&&Js(t,s)?(t=Es(),Xs=Mr=Dr=null,La=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return es&&s.locale!=="ko"?null:s.data;default:return null}}var Ar={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ic(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Ar[t.type]:s==="textarea"}function Br(t,s,c,g){_n?Wi?Wi.push(g):Wi=[g]:_n=g,s=dh(s,"onChange"),0<s.length&&(c=new Nn("onChange","change",null,c,g),t.push({event:c,listeners:s}))}var Co=null,$s=null;function Jf(t){s2(t,0)}function So(t){var s=qi(t);if(Yi(s))return t}function kr(t,s){if(t==="change")return s}var Tu=!1;if(ln){var Io;if(ln){var ea="oninput"in document;if(!ea){var Vt=document.createElement("div");Vt.setAttribute("oninput","return;"),ea=typeof Vt.oninput=="function"}Io=ea}else Io=!1;Tu=Io&&(!document.documentMode||9<document.documentMode)}function No(){Co&&(Co.detachEvent("onpropertychange",M),$s=Co=null)}function M(t){if(t.propertyName==="value"&&So($s)){var s=[];Br(s,$s,t,Er(t)),Os(Jf,s)}}function r(t,s,c){t==="focusin"?(No(),Co=s,$s=c,Co.attachEvent("onpropertychange",M)):t==="focusout"&&No()}function a(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return So($s)}function l(t,s){if(t==="click")return So(s)}function h(t,s){if(t==="input"||t==="change")return So(s)}function f(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var m=typeof Object.is=="function"?Object.is:f;function x(t,s){if(m(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var c=Object.keys(t),g=Object.keys(s);if(c.length!==g.length)return!1;for(g=0;g<c.length;g++){var E=c[g];if(!Qe.call(s,E)||!m(t[E],s[E]))return!1}return!0}function A(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function T(t,s){var c=A(t);t=0;for(var g;c;){if(c.nodeType===3){if(g=t+c.textContent.length,t<=s&&g>=s)return{node:c,offset:s-t};t=g}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=A(c)}}function R(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?R(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function P(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=Wr(t.document);s instanceof t.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)t=s.contentWindow;else break;s=Wr(t.document)}return s}function k(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var G=ln&&"documentMode"in document&&11>=document.documentMode,J=null,te=null,ce=null,ye=!1;function Pe(t,s,c){var g=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;ye||J==null||J!==Wr(g)||(g=J,"selectionStart"in g&&k(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),ce&&x(ce,g)||(ce=g,g=dh(te,"onSelect"),0<g.length&&(s=new Nn("onSelect","select",null,s,c),t.push({event:s,listeners:g}),s.target=J)))}function Me(t,s){var c={};return c[t.toLowerCase()]=s.toLowerCase(),c["Webkit"+t]="webkit"+s,c["Moz"+t]="moz"+s,c}var Re={animationend:Me("Animation","AnimationEnd"),animationiteration:Me("Animation","AnimationIteration"),animationstart:Me("Animation","AnimationStart"),transitionrun:Me("Transition","TransitionRun"),transitionstart:Me("Transition","TransitionStart"),transitioncancel:Me("Transition","TransitionCancel"),transitionend:Me("Transition","TransitionEnd")},St={},ft={};ln&&(ft=document.createElement("div").style,"AnimationEvent"in window||(delete Re.animationend.animation,delete Re.animationiteration.animation,delete Re.animationstart.animation),"TransitionEvent"in window||delete Re.transitionend.transition);function Zn(t){if(St[t])return St[t];if(!Re[t])return t;var s=Re[t],c;for(c in s)if(s.hasOwnProperty(c)&&c in ft)return St[t]=s[c];return t}var wr=Zn("animationend"),Mi=Zn("animationiteration"),cn=Zn("animationstart"),wi=Zn("transitionrun"),ur=Zn("transitionstart"),Pa=Zn("transitioncancel"),ta=Zn("transitionend"),vu=new Map,rc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");rc.push("scrollEnd");function ws(t,s){vu.set(t,s),$t(s,[t])}var Cu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ns=[],ol=0,$f=0;function Su(){for(var t=ol,s=$f=ol=0;s<t;){var c=ns[s];ns[s++]=null;var g=ns[s];ns[s++]=null;var E=ns[s];ns[s++]=null;var w=ns[s];if(ns[s++]=null,g!==null&&E!==null){var O=g.pending;O===null?E.next=E:(E.next=O.next,O.next=E),g.pending=E}w!==0&&jg(c,E,w)}}function Iu(t,s,c,g){ns[ol++]=t,ns[ol++]=s,ns[ol++]=c,ns[ol++]=g,$f|=g,t.lanes|=g,t=t.alternate,t!==null&&(t.lanes|=g)}function ed(t,s,c,g){return Iu(t,s,c,g),Nu(t)}function Ro(t,s){return Iu(t,null,null,s),Nu(t)}function jg(t,s,c){t.lanes|=c;var g=t.alternate;g!==null&&(g.lanes|=c);for(var E=!1,w=t.return;w!==null;)w.childLanes|=c,g=w.alternate,g!==null&&(g.childLanes|=c),w.tag===22&&(t=w.stateNode,t===null||t._visibility&1||(E=!0)),t=w,w=w.return;return t.tag===3?(w=t.stateNode,E&&s!==null&&(E=31-rt(c),t=w.hiddenUpdates,g=t[E],g===null?t[E]=[s]:g.push(s),s.lane=c|536870912),w):null}function Nu(t){if(50<Cc)throw Cc=0,c0=null,Error(o(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var ll={};function Ww(t,s,c,g){this.tag=t,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ur(t,s,c,g){return new Ww(t,s,c,g)}function td(t){return t=t.prototype,!(!t||!t.isReactComponent)}function na(t,s){var c=t.alternate;return c===null?(c=Ur(t.tag,s,t.key,t.mode),c.elementType=t.elementType,c.type=t.type,c.stateNode=t.stateNode,c.alternate=t,t.alternate=c):(c.pendingProps=s,c.type=t.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=t.flags&65011712,c.childLanes=t.childLanes,c.lanes=t.lanes,c.child=t.child,c.memoizedProps=t.memoizedProps,c.memoizedState=t.memoizedState,c.updateQueue=t.updateQueue,s=t.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=t.sibling,c.index=t.index,c.ref=t.ref,c.refCleanup=t.refCleanup,c}function Fg(t,s){t.flags&=65011714;var c=t.alternate;return c===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=c.childLanes,t.lanes=c.lanes,t.child=c.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=c.memoizedProps,t.memoizedState=c.memoizedState,t.updateQueue=c.updateQueue,t.type=c.type,s=c.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function Ru(t,s,c,g,E,w){var O=0;if(g=t,typeof t=="function")td(t)&&(O=1);else if(typeof t=="string")O=eT(t,c,Ve.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case V:return t=Ur(31,c,s,E),t.elementType=V,t.lanes=w,t;case K:return Oo(c.children,E,w,s);case Y:O=8,E|=24;break;case ae:return t=Ur(12,c,s,E|2),t.elementType=ae,t.lanes=w,t;case je:return t=Ur(13,c,s,E),t.elementType=je,t.lanes=w,t;case De:return t=Ur(19,c,s,E),t.elementType=De,t.lanes=w,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $:O=10;break e;case me:O=9;break e;case _e:O=11;break e;case j:O=14;break e;case H:O=16,g=null;break e}O=29,c=Error(o(130,t===null?"null":typeof t,"")),g=null}return s=Ur(O,c,s,E),s.elementType=t,s.type=g,s.lanes=w,s}function Oo(t,s,c,g){return t=Ur(7,t,g,s),t.lanes=c,t}function nd(t,s,c){return t=Ur(6,t,null,s),t.lanes=c,t}function zg(t){var s=Ur(18,null,null,0);return s.stateNode=t,s}function id(t,s,c){return s=Ur(4,t.children!==null?t.children:[],t.key,s),s.lanes=c,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var Hg=new WeakMap;function is(t,s){if(typeof t=="object"&&t!==null){var c=Hg.get(t);return c!==void 0?c:(s={value:t,source:s,stack:Gt(s)},Hg.set(t,s),s)}return{value:t,source:s,stack:Gt(s)}}var cl=[],ul=0,Ou=null,sc=0,rs=[],ss=0,Ba=null,Ls=1,Ps="";function ia(t,s){cl[ul++]=sc,cl[ul++]=Ou,Ou=t,sc=s}function Gg(t,s,c){rs[ss++]=Ls,rs[ss++]=Ps,rs[ss++]=Ba,Ba=t;var g=Ls;t=Ps;var E=32-rt(g)-1;g&=~(1<<E),c+=1;var w=32-rt(s)+E;if(30<w){var O=E-E%5;w=(g&(1<<O)-1).toString(32),g>>=O,E-=O,Ls=1<<32-rt(s)+E|c<<E|g,Ps=w+t}else Ls=1<<w|c<<E|g,Ps=t}function rd(t){t.return!==null&&(ia(t,1),Gg(t,1,0))}function sd(t){for(;t===Ou;)Ou=cl[--ul],cl[ul]=null,sc=cl[--ul],cl[ul]=null;for(;t===Ba;)Ba=rs[--ss],rs[ss]=null,Ps=rs[--ss],rs[ss]=null,Ls=rs[--ss],rs[ss]=null}function qg(t,s){rs[ss++]=Ls,rs[ss++]=Ps,rs[ss++]=Ba,Ls=s.id,Ps=s.overflow,Ba=t}var Li=null,Rn=null,Xt=!1,ka=null,as=!1,ad=Error(o(519));function Ua(t){var s=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ac(is(s,t)),ad}function Yg(t){var s=t.stateNode,c=t.type,g=t.memoizedProps;switch(s[Tn]=t,s[wt]=g,c){case"dialog":Pt("cancel",s),Pt("close",s);break;case"iframe":case"object":case"embed":Pt("load",s);break;case"video":case"audio":for(c=0;c<Ic.length;c++)Pt(Ic[c],s);break;case"source":Pt("error",s);break;case"img":case"image":case"link":Pt("error",s),Pt("load",s);break;case"details":Pt("toggle",s);break;case"input":Pt("invalid",s),ue(s,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":Pt("invalid",s);break;case"textarea":Pt("invalid",s),si(s,g.value,g.defaultValue,g.children)}c=g.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||s.textContent===""+c||g.suppressHydrationWarning===!0||c2(s.textContent,c)?(g.popover!=null&&(Pt("beforetoggle",s),Pt("toggle",s)),g.onScroll!=null&&Pt("scroll",s),g.onScrollEnd!=null&&Pt("scrollend",s),g.onClick!=null&&(s.onclick=Ki),s=!0):s=!1,s||Ua(t,!0)}function Xg(t){for(Li=t.return;Li;)switch(Li.tag){case 5:case 31:case 13:as=!1;return;case 27:case 3:as=!0;return;default:Li=Li.return}}function hl(t){if(t!==Li)return!1;if(!Xt)return Xg(t),Xt=!0,!1;var s=t.tag,c;if((c=s!==3&&s!==27)&&((c=s===5)&&(c=t.type,c=!(c!=="form"&&c!=="button")||T0(t.type,t.memoizedProps)),c=!c),c&&Rn&&Ua(t),Xg(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));Rn=y2(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));Rn=y2(t)}else s===27?(s=Rn,Ja(t.type)?(t=N0,N0=null,Rn=t):Rn=s):Rn=Li?ls(t.stateNode.nextSibling):null;return!0}function Do(){Rn=Li=null,Xt=!1}function od(){var t=ka;return t!==null&&(Cr===null?Cr=t:Cr.push.apply(Cr,t),ka=null),t}function ac(t){ka===null?ka=[t]:ka.push(t)}var ld=ie(null),Mo=null,ra=null;function Va(t,s,c){ke(ld,s._currentValue),s._currentValue=c}function sa(t){t._currentValue=ld.current,we(ld)}function cd(t,s,c){for(;t!==null;){var g=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,g!==null&&(g.childLanes|=s)):g!==null&&(g.childLanes&s)!==s&&(g.childLanes|=s),t===c)break;t=t.return}}function ud(t,s,c,g){var E=t.child;for(E!==null&&(E.return=t);E!==null;){var w=E.dependencies;if(w!==null){var O=E.child;w=w.firstContext;e:for(;w!==null;){var U=w;w=E;for(var Q=0;Q<s.length;Q++)if(U.context===s[Q]){w.lanes|=c,U=w.alternate,U!==null&&(U.lanes|=c),cd(w.return,c,t),g||(O=null);break e}w=U.next}}else if(E.tag===18){if(O=E.return,O===null)throw Error(o(341));O.lanes|=c,w=O.alternate,w!==null&&(w.lanes|=c),cd(O,c,t),O=null}else O=E.child;if(O!==null)O.return=E;else for(O=E;O!==null;){if(O===t){O=null;break}if(E=O.sibling,E!==null){E.return=O.return,O=E;break}O=O.return}E=O}}function fl(t,s,c,g){t=null;for(var E=s,w=!1;E!==null;){if(!w){if((E.flags&524288)!==0)w=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var O=E.alternate;if(O===null)throw Error(o(387));if(O=O.memoizedProps,O!==null){var U=E.type;m(E.pendingProps.value,O.value)||(t!==null?t.push(U):t=[U])}}else if(E===ct.current){if(O=E.alternate,O===null)throw Error(o(387));O.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(t!==null?t.push(Mc):t=[Mc])}E=E.return}t!==null&&ud(s,t,c,g),s.flags|=262144}function Du(t){for(t=t.firstContext;t!==null;){if(!m(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Lo(t){Mo=t,ra=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Pi(t){return Kg(Mo,t)}function Mu(t,s){return Mo===null&&Lo(t),Kg(t,s)}function Kg(t,s){var c=s._currentValue;if(s={context:s,memoizedValue:c,next:null},ra===null){if(t===null)throw Error(o(308));ra=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else ra=ra.next=s;return c}var Qw=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(c,g){t.push(g)}};this.abort=function(){s.aborted=!0,t.forEach(function(c){return c()})}},Zw=i.unstable_scheduleCallback,Jw=i.unstable_NormalPriority,di={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function hd(){return{controller:new Qw,data:new Map,refCount:0}}function oc(t){t.refCount--,t.refCount===0&&Zw(Jw,function(){t.controller.abort()})}var lc=null,fd=0,dl=0,gl=null;function $w(t,s){if(lc===null){var c=lc=[];fd=0,dl=m0(),gl={status:"pending",value:void 0,then:function(g){c.push(g)}}}return fd++,s.then(Wg,Wg),s}function Wg(){if(--fd===0&&lc!==null){gl!==null&&(gl.status="fulfilled");var t=lc;lc=null,dl=0,gl=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function eb(t,s){var c=[],g={status:"pending",value:null,reason:null,then:function(E){c.push(E)}};return t.then(function(){g.status="fulfilled",g.value=s;for(var E=0;E<c.length;E++)(0,c[E])(s)},function(E){for(g.status="rejected",g.reason=E,E=0;E<c.length;E++)(0,c[E])(void 0)}),g}var Qg=pe.S;pe.S=function(t,s){Mp=hn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&$w(t,s),Qg!==null&&Qg(t,s)};var Po=ie(null);function dd(){var t=Po.current;return t!==null?t:wn.pooledCache}function Lu(t,s){s===null?ke(Po,Po.current):ke(Po,s.pool)}function Zg(){var t=dd();return t===null?null:{parent:di._currentValue,pool:t}}var ml=Error(o(460)),gd=Error(o(474)),Pu=Error(o(542)),Bu={then:function(){}};function Jg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function $g(t,s,c){switch(c=t[c],c===void 0?t.push(s):c!==s&&(s.then(Ki,Ki),s=c),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,tm(t),t;default:if(typeof s.status=="string")s.then(Ki,Ki);else{if(t=wn,t!==null&&100<t.shellSuspendCounter)throw Error(o(482));t=s,t.status="pending",t.then(function(g){if(s.status==="pending"){var E=s;E.status="fulfilled",E.value=g}},function(g){if(s.status==="pending"){var E=s;E.status="rejected",E.reason=g}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,tm(t),t}throw ko=s,ml}}function Bo(t){try{var s=t._init;return s(t._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(ko=c,ml):c}}var ko=null;function em(){if(ko===null)throw Error(o(459));var t=ko;return ko=null,t}function tm(t){if(t===ml||t===Pu)throw Error(o(483))}var pl=null,cc=0;function ku(t){var s=cc;return cc+=1,pl===null&&(pl=[]),$g(pl,t,s)}function uc(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function Uu(t,s){throw s.$$typeof===L?Error(o(525)):(t=Object.prototype.toString.call(s),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function nm(t){function s(oe,re){if(t){var fe=oe.deletions;fe===null?(oe.deletions=[re],oe.flags|=16):fe.push(re)}}function c(oe,re){if(!t)return null;for(;re!==null;)s(oe,re),re=re.sibling;return null}function g(oe){for(var re=new Map;oe!==null;)oe.key!==null?re.set(oe.key,oe):re.set(oe.index,oe),oe=oe.sibling;return re}function E(oe,re){return oe=na(oe,re),oe.index=0,oe.sibling=null,oe}function w(oe,re,fe){return oe.index=fe,t?(fe=oe.alternate,fe!==null?(fe=fe.index,fe<re?(oe.flags|=67108866,re):fe):(oe.flags|=67108866,re)):(oe.flags|=1048576,re)}function O(oe){return t&&oe.alternate===null&&(oe.flags|=67108866),oe}function U(oe,re,fe,ve){return re===null||re.tag!==6?(re=nd(fe,oe.mode,ve),re.return=oe,re):(re=E(re,fe),re.return=oe,re)}function Q(oe,re,fe,ve){var $e=fe.type;return $e===K?Te(oe,re,fe.props.children,ve,fe.key):re!==null&&(re.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===H&&Bo($e)===re.type)?(re=E(re,fe.props),uc(re,fe),re.return=oe,re):(re=Ru(fe.type,fe.key,fe.props,null,oe.mode,ve),uc(re,fe),re.return=oe,re)}function de(oe,re,fe,ve){return re===null||re.tag!==4||re.stateNode.containerInfo!==fe.containerInfo||re.stateNode.implementation!==fe.implementation?(re=id(fe,oe.mode,ve),re.return=oe,re):(re=E(re,fe.children||[]),re.return=oe,re)}function Te(oe,re,fe,ve,$e){return re===null||re.tag!==7?(re=Oo(fe,oe.mode,ve,$e),re.return=oe,re):(re=E(re,fe),re.return=oe,re)}function Se(oe,re,fe){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return re=nd(""+re,oe.mode,fe),re.return=oe,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case B:return fe=Ru(re.type,re.key,re.props,null,oe.mode,fe),uc(fe,re),fe.return=oe,fe;case q:return re=id(re,oe.mode,fe),re.return=oe,re;case H:return re=Bo(re),Se(oe,re,fe)}if(he(re)||Z(re))return re=Oo(re,oe.mode,fe,null),re.return=oe,re;if(typeof re.then=="function")return Se(oe,ku(re),fe);if(re.$$typeof===$)return Se(oe,Mu(oe,re),fe);Uu(oe,re)}return null}function ge(oe,re,fe,ve){var $e=re!==null?re.key:null;if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return $e!==null?null:U(oe,re,""+fe,ve);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case B:return fe.key===$e?Q(oe,re,fe,ve):null;case q:return fe.key===$e?de(oe,re,fe,ve):null;case H:return fe=Bo(fe),ge(oe,re,fe,ve)}if(he(fe)||Z(fe))return $e!==null?null:Te(oe,re,fe,ve,null);if(typeof fe.then=="function")return ge(oe,re,ku(fe),ve);if(fe.$$typeof===$)return ge(oe,re,Mu(oe,fe),ve);Uu(oe,fe)}return null}function Ae(oe,re,fe,ve,$e){if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return oe=oe.get(fe)||null,U(re,oe,""+ve,$e);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case B:return oe=oe.get(ve.key===null?fe:ve.key)||null,Q(re,oe,ve,$e);case q:return oe=oe.get(ve.key===null?fe:ve.key)||null,de(re,oe,ve,$e);case H:return ve=Bo(ve),Ae(oe,re,fe,ve,$e)}if(he(ve)||Z(ve))return oe=oe.get(fe)||null,Te(re,oe,ve,$e,null);if(typeof ve.then=="function")return Ae(oe,re,fe,ku(ve),$e);if(ve.$$typeof===$)return Ae(oe,re,fe,Mu(re,ve),$e);Uu(re,ve)}return null}function Xe(oe,re,fe,ve){for(var $e=null,nn=null,Ke=re,Tt=re=0,Ft=null;Ke!==null&&Tt<fe.length;Tt++){Ke.index>Tt?(Ft=Ke,Ke=null):Ft=Ke.sibling;var rn=ge(oe,Ke,fe[Tt],ve);if(rn===null){Ke===null&&(Ke=Ft);break}t&&Ke&&rn.alternate===null&&s(oe,Ke),re=w(rn,re,Tt),nn===null?$e=rn:nn.sibling=rn,nn=rn,Ke=Ft}if(Tt===fe.length)return c(oe,Ke),Xt&&ia(oe,Tt),$e;if(Ke===null){for(;Tt<fe.length;Tt++)Ke=Se(oe,fe[Tt],ve),Ke!==null&&(re=w(Ke,re,Tt),nn===null?$e=Ke:nn.sibling=Ke,nn=Ke);return Xt&&ia(oe,Tt),$e}for(Ke=g(Ke);Tt<fe.length;Tt++)Ft=Ae(Ke,oe,Tt,fe[Tt],ve),Ft!==null&&(t&&Ft.alternate!==null&&Ke.delete(Ft.key===null?Tt:Ft.key),re=w(Ft,re,Tt),nn===null?$e=Ft:nn.sibling=Ft,nn=Ft);return t&&Ke.forEach(function(io){return s(oe,io)}),Xt&&ia(oe,Tt),$e}function at(oe,re,fe,ve){if(fe==null)throw Error(o(151));for(var $e=null,nn=null,Ke=re,Tt=re=0,Ft=null,rn=fe.next();Ke!==null&&!rn.done;Tt++,rn=fe.next()){Ke.index>Tt?(Ft=Ke,Ke=null):Ft=Ke.sibling;var io=ge(oe,Ke,rn.value,ve);if(io===null){Ke===null&&(Ke=Ft);break}t&&Ke&&io.alternate===null&&s(oe,Ke),re=w(io,re,Tt),nn===null?$e=io:nn.sibling=io,nn=io,Ke=Ft}if(rn.done)return c(oe,Ke),Xt&&ia(oe,Tt),$e;if(Ke===null){for(;!rn.done;Tt++,rn=fe.next())rn=Se(oe,rn.value,ve),rn!==null&&(re=w(rn,re,Tt),nn===null?$e=rn:nn.sibling=rn,nn=rn);return Xt&&ia(oe,Tt),$e}for(Ke=g(Ke);!rn.done;Tt++,rn=fe.next())rn=Ae(Ke,oe,Tt,rn.value,ve),rn!==null&&(t&&rn.alternate!==null&&Ke.delete(rn.key===null?Tt:rn.key),re=w(rn,re,Tt),nn===null?$e=rn:nn.sibling=rn,nn=rn);return t&&Ke.forEach(function(hT){return s(oe,hT)}),Xt&&ia(oe,Tt),$e}function yn(oe,re,fe,ve){if(typeof fe=="object"&&fe!==null&&fe.type===K&&fe.key===null&&(fe=fe.props.children),typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case B:e:{for(var $e=fe.key;re!==null;){if(re.key===$e){if($e=fe.type,$e===K){if(re.tag===7){c(oe,re.sibling),ve=E(re,fe.props.children),ve.return=oe,oe=ve;break e}}else if(re.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===H&&Bo($e)===re.type){c(oe,re.sibling),ve=E(re,fe.props),uc(ve,fe),ve.return=oe,oe=ve;break e}c(oe,re);break}else s(oe,re);re=re.sibling}fe.type===K?(ve=Oo(fe.props.children,oe.mode,ve,fe.key),ve.return=oe,oe=ve):(ve=Ru(fe.type,fe.key,fe.props,null,oe.mode,ve),uc(ve,fe),ve.return=oe,oe=ve)}return O(oe);case q:e:{for($e=fe.key;re!==null;){if(re.key===$e)if(re.tag===4&&re.stateNode.containerInfo===fe.containerInfo&&re.stateNode.implementation===fe.implementation){c(oe,re.sibling),ve=E(re,fe.children||[]),ve.return=oe,oe=ve;break e}else{c(oe,re);break}else s(oe,re);re=re.sibling}ve=id(fe,oe.mode,ve),ve.return=oe,oe=ve}return O(oe);case H:return fe=Bo(fe),yn(oe,re,fe,ve)}if(he(fe))return Xe(oe,re,fe,ve);if(Z(fe)){if($e=Z(fe),typeof $e!="function")throw Error(o(150));return fe=$e.call(fe),at(oe,re,fe,ve)}if(typeof fe.then=="function")return yn(oe,re,ku(fe),ve);if(fe.$$typeof===$)return yn(oe,re,Mu(oe,fe),ve);Uu(oe,fe)}return typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint"?(fe=""+fe,re!==null&&re.tag===6?(c(oe,re.sibling),ve=E(re,fe),ve.return=oe,oe=ve):(c(oe,re),ve=nd(fe,oe.mode,ve),ve.return=oe,oe=ve),O(oe)):c(oe,re)}return function(oe,re,fe,ve){try{cc=0;var $e=yn(oe,re,fe,ve);return pl=null,$e}catch(Ke){if(Ke===ml||Ke===Pu)throw Ke;var nn=Ur(29,Ke,null,oe.mode);return nn.lanes=ve,nn.return=oe,nn}finally{}}}var Uo=nm(!0),im=nm(!1),ja=!1;function md(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function pd(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Fa(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function za(t,s,c){var g=t.updateQueue;if(g===null)return null;if(g=g.shared,(sn&2)!==0){var E=g.pending;return E===null?s.next=s:(s.next=E.next,E.next=s),g.pending=s,s=Nu(t),jg(t,null,c),s}return Iu(t,g,s,c),Nu(t)}function hc(t,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194048)!==0)){var g=s.lanes;g&=t.pendingLanes,c|=g,s.lanes=c,ee(t,c)}}function xd(t,s){var c=t.updateQueue,g=t.alternate;if(g!==null&&(g=g.updateQueue,c===g)){var E=null,w=null;if(c=c.firstBaseUpdate,c!==null){do{var O={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};w===null?E=w=O:w=w.next=O,c=c.next}while(c!==null);w===null?E=w=s:w=w.next=s}else E=w=s;c={baseState:g.baseState,firstBaseUpdate:E,lastBaseUpdate:w,shared:g.shared,callbacks:g.callbacks},t.updateQueue=c;return}t=c.lastBaseUpdate,t===null?c.firstBaseUpdate=s:t.next=s,c.lastBaseUpdate=s}var yd=!1;function fc(){if(yd){var t=gl;if(t!==null)throw t}}function dc(t,s,c,g){yd=!1;var E=t.updateQueue;ja=!1;var w=E.firstBaseUpdate,O=E.lastBaseUpdate,U=E.shared.pending;if(U!==null){E.shared.pending=null;var Q=U,de=Q.next;Q.next=null,O===null?w=de:O.next=de,O=Q;var Te=t.alternate;Te!==null&&(Te=Te.updateQueue,U=Te.lastBaseUpdate,U!==O&&(U===null?Te.firstBaseUpdate=de:U.next=de,Te.lastBaseUpdate=Q))}if(w!==null){var Se=E.baseState;O=0,Te=de=Q=null,U=w;do{var ge=U.lane&-536870913,Ae=ge!==U.lane;if(Ae?(jt&ge)===ge:(g&ge)===ge){ge!==0&&ge===dl&&(yd=!0),Te!==null&&(Te=Te.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});e:{var Xe=t,at=U;ge=s;var yn=c;switch(at.tag){case 1:if(Xe=at.payload,typeof Xe=="function"){Se=Xe.call(yn,Se,ge);break e}Se=Xe;break e;case 3:Xe.flags=Xe.flags&-65537|128;case 0:if(Xe=at.payload,ge=typeof Xe=="function"?Xe.call(yn,Se,ge):Xe,ge==null)break e;Se=I({},Se,ge);break e;case 2:ja=!0}}ge=U.callback,ge!==null&&(t.flags|=64,Ae&&(t.flags|=8192),Ae=E.callbacks,Ae===null?E.callbacks=[ge]:Ae.push(ge))}else Ae={lane:ge,tag:U.tag,payload:U.payload,callback:U.callback,next:null},Te===null?(de=Te=Ae,Q=Se):Te=Te.next=Ae,O|=ge;if(U=U.next,U===null){if(U=E.shared.pending,U===null)break;Ae=U,U=Ae.next,Ae.next=null,E.lastBaseUpdate=Ae,E.shared.pending=null}}while(!0);Te===null&&(Q=Se),E.baseState=Q,E.firstBaseUpdate=de,E.lastBaseUpdate=Te,w===null&&(E.shared.lanes=0),Xa|=O,t.lanes=O,t.memoizedState=Se}}function rm(t,s){if(typeof t!="function")throw Error(o(191,t));t.call(s)}function sm(t,s){var c=t.callbacks;if(c!==null)for(t.callbacks=null,t=0;t<c.length;t++)rm(c[t],s)}var xl=ie(null),Vu=ie(0);function am(t,s){t=ga,ke(Vu,t),ke(xl,s),ga=t|s.baseLanes}function Ed(){ke(Vu,ga),ke(xl,xl.current)}function _d(){ga=Vu.current,we(xl),we(Vu)}var Vr=ie(null),os=null;function Ha(t){var s=t.alternate;ke(ai,ai.current&1),ke(Vr,t),os===null&&(s===null||xl.current!==null||s.memoizedState!==null)&&(os=t)}function Ad(t){ke(ai,ai.current),ke(Vr,t),os===null&&(os=t)}function om(t){t.tag===22?(ke(ai,ai.current),ke(Vr,t),os===null&&(os=t)):Ga()}function Ga(){ke(ai,ai.current),ke(Vr,Vr.current)}function jr(t){we(Vr),os===t&&(os=null),we(ai)}var ai=ie(0);function ju(t){for(var s=t;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||S0(c)||I0(c)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var aa=0,_t=null,pn=null,gi=null,Fu=!1,yl=!1,Vo=!1,zu=0,gc=0,El=null,tb=0;function Jn(){throw Error(o(321))}function wd(t,s){if(s===null)return!1;for(var c=0;c<s.length&&c<t.length;c++)if(!m(t[c],s[c]))return!1;return!0}function bd(t,s,c,g,E,w){return aa=w,_t=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,pe.H=t===null||t.memoizedState===null?Gm:Ud,Vo=!1,w=c(g,E),Vo=!1,yl&&(w=cm(s,c,g,E)),lm(t),w}function lm(t){pe.H=xc;var s=pn!==null&&pn.next!==null;if(aa=0,gi=pn=_t=null,Fu=!1,gc=0,El=null,s)throw Error(o(300));t===null||mi||(t=t.dependencies,t!==null&&Du(t)&&(mi=!0))}function cm(t,s,c,g){_t=t;var E=0;do{if(yl&&(El=null),gc=0,yl=!1,25<=E)throw Error(o(301));if(E+=1,gi=pn=null,t.updateQueue!=null){var w=t.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}pe.H=qm,w=s(c,g)}while(yl);return w}function nb(){var t=pe.H,s=t.useState()[0];return s=typeof s.then=="function"?mc(s):s,t=t.useState()[0],(pn!==null?pn.memoizedState:null)!==t&&(_t.flags|=1024),s}function Td(){var t=zu!==0;return zu=0,t}function vd(t,s,c){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~c}function Cd(t){if(Fu){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}Fu=!1}aa=0,gi=pn=_t=null,yl=!1,gc=zu=0,El=null}function hr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gi===null?_t.memoizedState=gi=t:gi=gi.next=t,gi}function oi(){if(pn===null){var t=_t.alternate;t=t!==null?t.memoizedState:null}else t=pn.next;var s=gi===null?_t.memoizedState:gi.next;if(s!==null)gi=s,pn=t;else{if(t===null)throw _t.alternate===null?Error(o(467)):Error(o(310));pn=t,t={memoizedState:pn.memoizedState,baseState:pn.baseState,baseQueue:pn.baseQueue,queue:pn.queue,next:null},gi===null?_t.memoizedState=gi=t:gi=gi.next=t}return gi}function Hu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function mc(t){var s=gc;return gc+=1,El===null&&(El=[]),t=$g(El,t,s),s=_t,(gi===null?s.memoizedState:gi.next)===null&&(s=s.alternate,pe.H=s===null||s.memoizedState===null?Gm:Ud),t}function Gu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return mc(t);if(t.$$typeof===$)return Pi(t)}throw Error(o(438,String(t)))}function Sd(t){var s=null,c=_t.updateQueue;if(c!==null&&(s=c.memoCache),s==null){var g=_t.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(s={data:g.data.map(function(E){return E.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),c===null&&(c=Hu(),_t.updateQueue=c),c.memoCache=s,c=s.data[s.index],c===void 0)for(c=s.data[s.index]=Array(t),g=0;g<t;g++)c[g]=ne;return s.index++,c}function oa(t,s){return typeof s=="function"?s(t):s}function qu(t){var s=oi();return Id(s,pn,t)}function Id(t,s,c){var g=t.queue;if(g===null)throw Error(o(311));g.lastRenderedReducer=c;var E=t.baseQueue,w=g.pending;if(w!==null){if(E!==null){var O=E.next;E.next=w.next,w.next=O}s.baseQueue=E=w,g.pending=null}if(w=t.baseState,E===null)t.memoizedState=w;else{s=E.next;var U=O=null,Q=null,de=s,Te=!1;do{var Se=de.lane&-536870913;if(Se!==de.lane?(jt&Se)===Se:(aa&Se)===Se){var ge=de.revertLane;if(ge===0)Q!==null&&(Q=Q.next={lane:0,revertLane:0,gesture:null,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null}),Se===dl&&(Te=!0);else if((aa&ge)===ge){de=de.next,ge===dl&&(Te=!0);continue}else Se={lane:0,revertLane:de.revertLane,gesture:null,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null},Q===null?(U=Q=Se,O=w):Q=Q.next=Se,_t.lanes|=ge,Xa|=ge;Se=de.action,Vo&&c(w,Se),w=de.hasEagerState?de.eagerState:c(w,Se)}else ge={lane:Se,revertLane:de.revertLane,gesture:de.gesture,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null},Q===null?(U=Q=ge,O=w):Q=Q.next=ge,_t.lanes|=Se,Xa|=Se;de=de.next}while(de!==null&&de!==s);if(Q===null?O=w:Q.next=U,!m(w,t.memoizedState)&&(mi=!0,Te&&(c=gl,c!==null)))throw c;t.memoizedState=w,t.baseState=O,t.baseQueue=Q,g.lastRenderedState=w}return E===null&&(g.lanes=0),[t.memoizedState,g.dispatch]}function Nd(t){var s=oi(),c=s.queue;if(c===null)throw Error(o(311));c.lastRenderedReducer=t;var g=c.dispatch,E=c.pending,w=s.memoizedState;if(E!==null){c.pending=null;var O=E=E.next;do w=t(w,O.action),O=O.next;while(O!==E);m(w,s.memoizedState)||(mi=!0),s.memoizedState=w,s.baseQueue===null&&(s.baseState=w),c.lastRenderedState=w}return[w,g]}function um(t,s,c){var g=_t,E=oi(),w=Xt;if(w){if(c===void 0)throw Error(o(407));c=c()}else c=s();var O=!m((pn||E).memoizedState,c);if(O&&(E.memoizedState=c,mi=!0),E=E.queue,Dd(dm.bind(null,g,E,t),[t]),E.getSnapshot!==s||O||gi!==null&&gi.memoizedState.tag&1){if(g.flags|=2048,_l(9,{destroy:void 0},fm.bind(null,g,E,c,s),null),wn===null)throw Error(o(349));w||(aa&127)!==0||hm(g,s,c)}return c}function hm(t,s,c){t.flags|=16384,t={getSnapshot:s,value:c},s=_t.updateQueue,s===null?(s=Hu(),_t.updateQueue=s,s.stores=[t]):(c=s.stores,c===null?s.stores=[t]:c.push(t))}function fm(t,s,c,g){s.value=c,s.getSnapshot=g,gm(s)&&mm(t)}function dm(t,s,c){return c(function(){gm(s)&&mm(t)})}function gm(t){var s=t.getSnapshot;t=t.value;try{var c=s();return!m(t,c)}catch{return!0}}function mm(t){var s=Ro(t,2);s!==null&&Sr(s,t,2)}function Rd(t){var s=hr();if(typeof t=="function"){var c=t;if(t=c(),Vo){qt(!0);try{c()}finally{qt(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:t},s}function pm(t,s,c,g){return t.baseState=c,Id(t,pn,typeof g=="function"?g:oa)}function ib(t,s,c,g,E){if(Ku(t))throw Error(o(485));if(t=s.action,t!==null){var w={payload:E,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(O){w.listeners.push(O)}};pe.T!==null?c(!0):w.isTransition=!1,g(w),c=s.pending,c===null?(w.next=s.pending=w,xm(s,w)):(w.next=c.next,s.pending=c.next=w)}}function xm(t,s){var c=s.action,g=s.payload,E=t.state;if(s.isTransition){var w=pe.T,O={};pe.T=O;try{var U=c(E,g),Q=pe.S;Q!==null&&Q(O,U),ym(t,s,U)}catch(de){Od(t,s,de)}finally{w!==null&&O.types!==null&&(w.types=O.types),pe.T=w}}else try{w=c(E,g),ym(t,s,w)}catch(de){Od(t,s,de)}}function ym(t,s,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(g){Em(t,s,g)},function(g){return Od(t,s,g)}):Em(t,s,c)}function Em(t,s,c){s.status="fulfilled",s.value=c,_m(s),t.state=c,s=t.pending,s!==null&&(c=s.next,c===s?t.pending=null:(c=c.next,s.next=c,xm(t,c)))}function Od(t,s,c){var g=t.pending;if(t.pending=null,g!==null){g=g.next;do s.status="rejected",s.reason=c,_m(s),s=s.next;while(s!==g)}t.action=null}function _m(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function Am(t,s){return s}function wm(t,s){if(Xt){var c=wn.formState;if(c!==null){e:{var g=_t;if(Xt){if(Rn){t:{for(var E=Rn,w=as;E.nodeType!==8;){if(!w){E=null;break t}if(E=ls(E.nextSibling),E===null){E=null;break t}}w=E.data,E=w==="F!"||w==="F"?E:null}if(E){Rn=ls(E.nextSibling),g=E.data==="F!";break e}}Ua(g)}g=!1}g&&(s=c[0])}}return c=hr(),c.memoizedState=c.baseState=s,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Am,lastRenderedState:s},c.queue=g,c=Fm.bind(null,_t,g),g.dispatch=c,g=Rd(!1),w=kd.bind(null,_t,!1,g.queue),g=hr(),E={state:s,dispatch:null,action:t,pending:null},g.queue=E,c=ib.bind(null,_t,E,w,c),E.dispatch=c,g.memoizedState=t,[s,c,!1]}function bm(t){var s=oi();return Tm(s,pn,t)}function Tm(t,s,c){if(s=Id(t,s,Am)[0],t=qu(oa)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var g=mc(s)}catch(O){throw O===ml?Pu:O}else g=s;s=oi();var E=s.queue,w=E.dispatch;return c!==s.memoizedState&&(_t.flags|=2048,_l(9,{destroy:void 0},rb.bind(null,E,c),null)),[g,w,t]}function rb(t,s){t.action=s}function vm(t){var s=oi(),c=pn;if(c!==null)return Tm(s,c,t);oi(),s=s.memoizedState,c=oi();var g=c.queue.dispatch;return c.memoizedState=t,[s,g,!1]}function _l(t,s,c,g){return t={tag:t,create:c,deps:g,inst:s,next:null},s=_t.updateQueue,s===null&&(s=Hu(),_t.updateQueue=s),c=s.lastEffect,c===null?s.lastEffect=t.next=t:(g=c.next,c.next=t,t.next=g,s.lastEffect=t),t}function Cm(){return oi().memoizedState}function Yu(t,s,c,g){var E=hr();_t.flags|=t,E.memoizedState=_l(1|s,{destroy:void 0},c,g===void 0?null:g)}function Xu(t,s,c,g){var E=oi();g=g===void 0?null:g;var w=E.memoizedState.inst;pn!==null&&g!==null&&wd(g,pn.memoizedState.deps)?E.memoizedState=_l(s,w,c,g):(_t.flags|=t,E.memoizedState=_l(1|s,w,c,g))}function Sm(t,s){Yu(8390656,8,t,s)}function Dd(t,s){Xu(2048,8,t,s)}function sb(t){_t.flags|=4;var s=_t.updateQueue;if(s===null)s=Hu(),_t.updateQueue=s,s.events=[t];else{var c=s.events;c===null?s.events=[t]:c.push(t)}}function Im(t){var s=oi().memoizedState;return sb({ref:s,nextImpl:t}),function(){if((sn&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}function Nm(t,s){return Xu(4,2,t,s)}function Rm(t,s){return Xu(4,4,t,s)}function Om(t,s){if(typeof s=="function"){t=t();var c=s(t);return function(){typeof c=="function"?c():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Dm(t,s,c){c=c!=null?c.concat([t]):null,Xu(4,4,Om.bind(null,s,t),c)}function Md(){}function Mm(t,s){var c=oi();s=s===void 0?null:s;var g=c.memoizedState;return s!==null&&wd(s,g[1])?g[0]:(c.memoizedState=[t,s],t)}function Lm(t,s){var c=oi();s=s===void 0?null:s;var g=c.memoizedState;if(s!==null&&wd(s,g[1]))return g[0];if(g=t(),Vo){qt(!0);try{t()}finally{qt(!1)}}return c.memoizedState=[g,s],g}function Ld(t,s,c){return c===void 0||(aa&1073741824)!==0&&(jt&261930)===0?t.memoizedState=s:(t.memoizedState=c,t=Pp(),_t.lanes|=t,Xa|=t,c)}function Pm(t,s,c,g){return m(c,s)?c:xl.current!==null?(t=Ld(t,c,g),m(t,s)||(mi=!0),t):(aa&42)===0||(aa&1073741824)!==0&&(jt&261930)===0?(mi=!0,t.memoizedState=c):(t=Pp(),_t.lanes|=t,Xa|=t,s)}function Bm(t,s,c,g,E){var w=be.p;be.p=w!==0&&8>w?w:8;var O=pe.T,U={};pe.T=U,kd(t,!1,s,c);try{var Q=E(),de=pe.S;if(de!==null&&de(U,Q),Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var Te=eb(Q,g);pc(t,s,Te,Hr(t))}else pc(t,s,g,Hr(t))}catch(Se){pc(t,s,{then:function(){},status:"rejected",reason:Se},Hr())}finally{be.p=w,O!==null&&U.types!==null&&(O.types=U.types),pe.T=O}}function ab(){}function Pd(t,s,c,g){if(t.tag!==5)throw Error(o(476));var E=km(t).queue;Bm(t,E,s,qe,c===null?ab:function(){return Um(t),c(g)})}function km(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:qe,baseState:qe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:qe},next:null};var c={};return s.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:c},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function Um(t){var s=km(t);s.next===null&&(s=t.alternate.memoizedState),pc(t,s.next.queue,{},Hr())}function Bd(){return Pi(Mc)}function Vm(){return oi().memoizedState}function jm(){return oi().memoizedState}function ob(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var c=Hr();t=Fa(c);var g=za(s,t,c);g!==null&&(Sr(g,s,c),hc(g,s,c)),s={cache:hd()},t.payload=s;return}s=s.return}}function lb(t,s,c){var g=Hr();c={lane:g,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Ku(t)?zm(s,c):(c=ed(t,s,c,g),c!==null&&(Sr(c,t,g),Hm(c,s,g)))}function Fm(t,s,c){var g=Hr();pc(t,s,c,g)}function pc(t,s,c,g){var E={lane:g,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Ku(t))zm(s,E);else{var w=t.alternate;if(t.lanes===0&&(w===null||w.lanes===0)&&(w=s.lastRenderedReducer,w!==null))try{var O=s.lastRenderedState,U=w(O,c);if(E.hasEagerState=!0,E.eagerState=U,m(U,O))return Iu(t,s,E,0),wn===null&&Su(),!1}catch{}finally{}if(c=ed(t,s,E,g),c!==null)return Sr(c,t,g),Hm(c,s,g),!0}return!1}function kd(t,s,c,g){if(g={lane:2,revertLane:m0(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},Ku(t)){if(s)throw Error(o(479))}else s=ed(t,c,g,2),s!==null&&Sr(s,t,2)}function Ku(t){var s=t.alternate;return t===_t||s!==null&&s===_t}function zm(t,s){yl=Fu=!0;var c=t.pending;c===null?s.next=s:(s.next=c.next,c.next=s),t.pending=s}function Hm(t,s,c){if((c&4194048)!==0){var g=s.lanes;g&=t.pendingLanes,c|=g,s.lanes=c,ee(t,c)}}var xc={readContext:Pi,use:Gu,useCallback:Jn,useContext:Jn,useEffect:Jn,useImperativeHandle:Jn,useLayoutEffect:Jn,useInsertionEffect:Jn,useMemo:Jn,useReducer:Jn,useRef:Jn,useState:Jn,useDebugValue:Jn,useDeferredValue:Jn,useTransition:Jn,useSyncExternalStore:Jn,useId:Jn,useHostTransitionStatus:Jn,useFormState:Jn,useActionState:Jn,useOptimistic:Jn,useMemoCache:Jn,useCacheRefresh:Jn};xc.useEffectEvent=Jn;var Gm={readContext:Pi,use:Gu,useCallback:function(t,s){return hr().memoizedState=[t,s===void 0?null:s],t},useContext:Pi,useEffect:Sm,useImperativeHandle:function(t,s,c){c=c!=null?c.concat([t]):null,Yu(4194308,4,Om.bind(null,s,t),c)},useLayoutEffect:function(t,s){return Yu(4194308,4,t,s)},useInsertionEffect:function(t,s){Yu(4,2,t,s)},useMemo:function(t,s){var c=hr();s=s===void 0?null:s;var g=t();if(Vo){qt(!0);try{t()}finally{qt(!1)}}return c.memoizedState=[g,s],g},useReducer:function(t,s,c){var g=hr();if(c!==void 0){var E=c(s);if(Vo){qt(!0);try{c(s)}finally{qt(!1)}}}else E=s;return g.memoizedState=g.baseState=E,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:E},g.queue=t,t=t.dispatch=lb.bind(null,_t,t),[g.memoizedState,t]},useRef:function(t){var s=hr();return t={current:t},s.memoizedState=t},useState:function(t){t=Rd(t);var s=t.queue,c=Fm.bind(null,_t,s);return s.dispatch=c,[t.memoizedState,c]},useDebugValue:Md,useDeferredValue:function(t,s){var c=hr();return Ld(c,t,s)},useTransition:function(){var t=Rd(!1);return t=Bm.bind(null,_t,t.queue,!0,!1),hr().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,c){var g=_t,E=hr();if(Xt){if(c===void 0)throw Error(o(407));c=c()}else{if(c=s(),wn===null)throw Error(o(349));(jt&127)!==0||hm(g,s,c)}E.memoizedState=c;var w={value:c,getSnapshot:s};return E.queue=w,Sm(dm.bind(null,g,w,t),[t]),g.flags|=2048,_l(9,{destroy:void 0},fm.bind(null,g,w,c,s),null),c},useId:function(){var t=hr(),s=wn.identifierPrefix;if(Xt){var c=Ps,g=Ls;c=(g&~(1<<32-rt(g)-1)).toString(32)+c,s="_"+s+"R_"+c,c=zu++,0<c&&(s+="H"+c.toString(32)),s+="_"}else c=tb++,s="_"+s+"r_"+c.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:Bd,useFormState:wm,useActionState:wm,useOptimistic:function(t){var s=hr();s.memoizedState=s.baseState=t;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=c,s=kd.bind(null,_t,!0,c),c.dispatch=s,[t,s]},useMemoCache:Sd,useCacheRefresh:function(){return hr().memoizedState=ob.bind(null,_t)},useEffectEvent:function(t){var s=hr(),c={impl:t};return s.memoizedState=c,function(){if((sn&2)!==0)throw Error(o(440));return c.impl.apply(void 0,arguments)}}},Ud={readContext:Pi,use:Gu,useCallback:Mm,useContext:Pi,useEffect:Dd,useImperativeHandle:Dm,useInsertionEffect:Nm,useLayoutEffect:Rm,useMemo:Lm,useReducer:qu,useRef:Cm,useState:function(){return qu(oa)},useDebugValue:Md,useDeferredValue:function(t,s){var c=oi();return Pm(c,pn.memoizedState,t,s)},useTransition:function(){var t=qu(oa)[0],s=oi().memoizedState;return[typeof t=="boolean"?t:mc(t),s]},useSyncExternalStore:um,useId:Vm,useHostTransitionStatus:Bd,useFormState:bm,useActionState:bm,useOptimistic:function(t,s){var c=oi();return pm(c,pn,t,s)},useMemoCache:Sd,useCacheRefresh:jm};Ud.useEffectEvent=Im;var qm={readContext:Pi,use:Gu,useCallback:Mm,useContext:Pi,useEffect:Dd,useImperativeHandle:Dm,useInsertionEffect:Nm,useLayoutEffect:Rm,useMemo:Lm,useReducer:Nd,useRef:Cm,useState:function(){return Nd(oa)},useDebugValue:Md,useDeferredValue:function(t,s){var c=oi();return pn===null?Ld(c,t,s):Pm(c,pn.memoizedState,t,s)},useTransition:function(){var t=Nd(oa)[0],s=oi().memoizedState;return[typeof t=="boolean"?t:mc(t),s]},useSyncExternalStore:um,useId:Vm,useHostTransitionStatus:Bd,useFormState:vm,useActionState:vm,useOptimistic:function(t,s){var c=oi();return pn!==null?pm(c,pn,t,s):(c.baseState=t,[t,c.queue.dispatch])},useMemoCache:Sd,useCacheRefresh:jm};qm.useEffectEvent=Im;function Vd(t,s,c,g){s=t.memoizedState,c=c(g,s),c=c==null?s:I({},s,c),t.memoizedState=c,t.lanes===0&&(t.updateQueue.baseState=c)}var jd={enqueueSetState:function(t,s,c){t=t._reactInternals;var g=Hr(),E=Fa(g);E.payload=s,c!=null&&(E.callback=c),s=za(t,E,g),s!==null&&(Sr(s,t,g),hc(s,t,g))},enqueueReplaceState:function(t,s,c){t=t._reactInternals;var g=Hr(),E=Fa(g);E.tag=1,E.payload=s,c!=null&&(E.callback=c),s=za(t,E,g),s!==null&&(Sr(s,t,g),hc(s,t,g))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var c=Hr(),g=Fa(c);g.tag=2,s!=null&&(g.callback=s),s=za(t,g,c),s!==null&&(Sr(s,t,c),hc(s,t,c))}};function Ym(t,s,c,g,E,w,O){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(g,w,O):s.prototype&&s.prototype.isPureReactComponent?!x(c,g)||!x(E,w):!0}function Xm(t,s,c,g){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,g),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,g),s.state!==t&&jd.enqueueReplaceState(s,s.state,null)}function jo(t,s){var c=s;if("ref"in s){c={};for(var g in s)g!=="ref"&&(c[g]=s[g])}if(t=t.defaultProps){c===s&&(c=I({},c));for(var E in t)c[E]===void 0&&(c[E]=t[E])}return c}function Km(t){Cu(t)}function Wm(t){console.error(t)}function Qm(t){Cu(t)}function Wu(t,s){try{var c=t.onUncaughtError;c(s.value,{componentStack:s.stack})}catch(g){setTimeout(function(){throw g})}}function Zm(t,s,c){try{var g=t.onCaughtError;g(c.value,{componentStack:c.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function Fd(t,s,c){return c=Fa(c),c.tag=3,c.payload={element:null},c.callback=function(){Wu(t,s)},c}function Jm(t){return t=Fa(t),t.tag=3,t}function $m(t,s,c,g){var E=c.type.getDerivedStateFromError;if(typeof E=="function"){var w=g.value;t.payload=function(){return E(w)},t.callback=function(){Zm(s,c,g)}}var O=c.stateNode;O!==null&&typeof O.componentDidCatch=="function"&&(t.callback=function(){Zm(s,c,g),typeof E!="function"&&(Ka===null?Ka=new Set([this]):Ka.add(this));var U=g.stack;this.componentDidCatch(g.value,{componentStack:U!==null?U:""})})}function cb(t,s,c,g,E){if(c.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(s=c.alternate,s!==null&&fl(s,c,E,!0),c=Vr.current,c!==null){switch(c.tag){case 31:case 13:return os===null?oh():c.alternate===null&&$n===0&&($n=3),c.flags&=-257,c.flags|=65536,c.lanes=E,g===Bu?c.flags|=16384:(s=c.updateQueue,s===null?c.updateQueue=new Set([g]):s.add(g),f0(t,g,E)),!1;case 22:return c.flags|=65536,g===Bu?c.flags|=16384:(s=c.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([g])},c.updateQueue=s):(c=s.retryQueue,c===null?s.retryQueue=new Set([g]):c.add(g)),f0(t,g,E)),!1}throw Error(o(435,c.tag))}return f0(t,g,E),oh(),!1}if(Xt)return s=Vr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=E,g!==ad&&(t=Error(o(422),{cause:g}),ac(is(t,c)))):(g!==ad&&(s=Error(o(423),{cause:g}),ac(is(s,c))),t=t.current.alternate,t.flags|=65536,E&=-E,t.lanes|=E,g=is(g,c),E=Fd(t.stateNode,g,E),xd(t,E),$n!==4&&($n=2)),!1;var w=Error(o(520),{cause:g});if(w=is(w,c),vc===null?vc=[w]:vc.push(w),$n!==4&&($n=2),s===null)return!0;g=is(g,c),c=s;do{switch(c.tag){case 3:return c.flags|=65536,t=E&-E,c.lanes|=t,t=Fd(c.stateNode,g,t),xd(c,t),!1;case 1:if(s=c.type,w=c.stateNode,(c.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ka===null||!Ka.has(w))))return c.flags|=65536,E&=-E,c.lanes|=E,E=Jm(E),$m(E,t,c,g),xd(c,E),!1}c=c.return}while(c!==null);return!1}var zd=Error(o(461)),mi=!1;function Bi(t,s,c,g){s.child=t===null?im(s,null,c,g):Uo(s,t.child,c,g)}function ep(t,s,c,g,E){c=c.render;var w=s.ref;if("ref"in g){var O={};for(var U in g)U!=="ref"&&(O[U]=g[U])}else O=g;return Lo(s),g=bd(t,s,c,O,w,E),U=Td(),t!==null&&!mi?(vd(t,s,E),la(t,s,E)):(Xt&&U&&rd(s),s.flags|=1,Bi(t,s,g,E),s.child)}function tp(t,s,c,g,E){if(t===null){var w=c.type;return typeof w=="function"&&!td(w)&&w.defaultProps===void 0&&c.compare===null?(s.tag=15,s.type=w,np(t,s,w,g,E)):(t=Ru(c.type,null,g,s,s.mode,E),t.ref=s.ref,t.return=s,s.child=t)}if(w=t.child,!Qd(t,E)){var O=w.memoizedProps;if(c=c.compare,c=c!==null?c:x,c(O,g)&&t.ref===s.ref)return la(t,s,E)}return s.flags|=1,t=na(w,g),t.ref=s.ref,t.return=s,s.child=t}function np(t,s,c,g,E){if(t!==null){var w=t.memoizedProps;if(x(w,g)&&t.ref===s.ref)if(mi=!1,s.pendingProps=g=w,Qd(t,E))(t.flags&131072)!==0&&(mi=!0);else return s.lanes=t.lanes,la(t,s,E)}return Hd(t,s,c,g,E)}function ip(t,s,c,g){var E=g.children,w=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((s.flags&128)!==0){if(w=w!==null?w.baseLanes|c:c,t!==null){for(g=s.child=t.child,E=0;g!==null;)E=E|g.lanes|g.childLanes,g=g.sibling;g=E&~w}else g=0,s.child=null;return rp(t,s,w,c,g)}if((c&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&Lu(s,w!==null?w.cachePool:null),w!==null?am(s,w):Ed(),om(s);else return g=s.lanes=536870912,rp(t,s,w!==null?w.baseLanes|c:c,c,g)}else w!==null?(Lu(s,w.cachePool),am(s,w),Ga(),s.memoizedState=null):(t!==null&&Lu(s,null),Ed(),Ga());return Bi(t,s,E,c),s.child}function yc(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function rp(t,s,c,g,E){var w=dd();return w=w===null?null:{parent:di._currentValue,pool:w},s.memoizedState={baseLanes:c,cachePool:w},t!==null&&Lu(s,null),Ed(),om(s),t!==null&&fl(t,s,g,!0),s.childLanes=E,null}function Qu(t,s){return s=Ju({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function sp(t,s,c){return Uo(s,t.child,null,c),t=Qu(s,s.pendingProps),t.flags|=2,jr(s),s.memoizedState=null,t}function ub(t,s,c){var g=s.pendingProps,E=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(Xt){if(g.mode==="hidden")return t=Qu(s,g),s.lanes=536870912,yc(null,t);if(Ad(s),(t=Rn)?(t=x2(t,as),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Ba!==null?{id:Ls,overflow:Ps}:null,retryLane:536870912,hydrationErrors:null},c=zg(t),c.return=s,s.child=c,Li=s,Rn=null)):t=null,t===null)throw Ua(s);return s.lanes=536870912,null}return Qu(s,g)}var w=t.memoizedState;if(w!==null){var O=w.dehydrated;if(Ad(s),E)if(s.flags&256)s.flags&=-257,s=sp(t,s,c);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(o(558));else if(mi||fl(t,s,c,!1),E=(c&t.childLanes)!==0,mi||E){if(g=wn,g!==null&&(O=ht(g,c),O!==0&&O!==w.retryLane))throw w.retryLane=O,Ro(t,O),Sr(g,t,O),zd;oh(),s=sp(t,s,c)}else t=w.treeContext,Rn=ls(O.nextSibling),Li=s,Xt=!0,ka=null,as=!1,t!==null&&qg(s,t),s=Qu(s,g),s.flags|=4096;return s}return t=na(t.child,{mode:g.mode,children:g.children}),t.ref=s.ref,s.child=t,t.return=s,t}function Zu(t,s){var c=s.ref;if(c===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(o(284));(t===null||t.ref!==c)&&(s.flags|=4194816)}}function Hd(t,s,c,g,E){return Lo(s),c=bd(t,s,c,g,void 0,E),g=Td(),t!==null&&!mi?(vd(t,s,E),la(t,s,E)):(Xt&&g&&rd(s),s.flags|=1,Bi(t,s,c,E),s.child)}function ap(t,s,c,g,E,w){return Lo(s),s.updateQueue=null,c=cm(s,g,c,E),lm(t),g=Td(),t!==null&&!mi?(vd(t,s,w),la(t,s,w)):(Xt&&g&&rd(s),s.flags|=1,Bi(t,s,c,w),s.child)}function op(t,s,c,g,E){if(Lo(s),s.stateNode===null){var w=ll,O=c.contextType;typeof O=="object"&&O!==null&&(w=Pi(O)),w=new c(g,w),s.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=jd,s.stateNode=w,w._reactInternals=s,w=s.stateNode,w.props=g,w.state=s.memoizedState,w.refs={},md(s),O=c.contextType,w.context=typeof O=="object"&&O!==null?Pi(O):ll,w.state=s.memoizedState,O=c.getDerivedStateFromProps,typeof O=="function"&&(Vd(s,c,O,g),w.state=s.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(O=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),O!==w.state&&jd.enqueueReplaceState(w,w.state,null),dc(s,g,w,E),fc(),w.state=s.memoizedState),typeof w.componentDidMount=="function"&&(s.flags|=4194308),g=!0}else if(t===null){w=s.stateNode;var U=s.memoizedProps,Q=jo(c,U);w.props=Q;var de=w.context,Te=c.contextType;O=ll,typeof Te=="object"&&Te!==null&&(O=Pi(Te));var Se=c.getDerivedStateFromProps;Te=typeof Se=="function"||typeof w.getSnapshotBeforeUpdate=="function",U=s.pendingProps!==U,Te||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(U||de!==O)&&Xm(s,w,g,O),ja=!1;var ge=s.memoizedState;w.state=ge,dc(s,g,w,E),fc(),de=s.memoizedState,U||ge!==de||ja?(typeof Se=="function"&&(Vd(s,c,Se,g),de=s.memoizedState),(Q=ja||Ym(s,c,Q,g,ge,de,O))?(Te||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=g,s.memoizedState=de),w.props=g,w.state=de,w.context=O,g=Q):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),g=!1)}else{w=s.stateNode,pd(t,s),O=s.memoizedProps,Te=jo(c,O),w.props=Te,Se=s.pendingProps,ge=w.context,de=c.contextType,Q=ll,typeof de=="object"&&de!==null&&(Q=Pi(de)),U=c.getDerivedStateFromProps,(de=typeof U=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(O!==Se||ge!==Q)&&Xm(s,w,g,Q),ja=!1,ge=s.memoizedState,w.state=ge,dc(s,g,w,E),fc();var Ae=s.memoizedState;O!==Se||ge!==Ae||ja||t!==null&&t.dependencies!==null&&Du(t.dependencies)?(typeof U=="function"&&(Vd(s,c,U,g),Ae=s.memoizedState),(Te=ja||Ym(s,c,Te,g,ge,Ae,Q)||t!==null&&t.dependencies!==null&&Du(t.dependencies))?(de||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(g,Ae,Q),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(g,Ae,Q)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||O===t.memoizedProps&&ge===t.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||O===t.memoizedProps&&ge===t.memoizedState||(s.flags|=1024),s.memoizedProps=g,s.memoizedState=Ae),w.props=g,w.state=Ae,w.context=Q,g=Te):(typeof w.componentDidUpdate!="function"||O===t.memoizedProps&&ge===t.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||O===t.memoizedProps&&ge===t.memoizedState||(s.flags|=1024),g=!1)}return w=g,Zu(t,s),g=(s.flags&128)!==0,w||g?(w=s.stateNode,c=g&&typeof c.getDerivedStateFromError!="function"?null:w.render(),s.flags|=1,t!==null&&g?(s.child=Uo(s,t.child,null,E),s.child=Uo(s,null,c,E)):Bi(t,s,c,E),s.memoizedState=w.state,t=s.child):t=la(t,s,E),t}function lp(t,s,c,g){return Do(),s.flags|=256,Bi(t,s,c,g),s.child}var Gd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qd(t){return{baseLanes:t,cachePool:Zg()}}function Yd(t,s,c){return t=t!==null?t.childLanes&~c:0,s&&(t|=zr),t}function cp(t,s,c){var g=s.pendingProps,E=!1,w=(s.flags&128)!==0,O;if((O=w)||(O=t!==null&&t.memoizedState===null?!1:(ai.current&2)!==0),O&&(E=!0,s.flags&=-129),O=(s.flags&32)!==0,s.flags&=-33,t===null){if(Xt){if(E?Ha(s):Ga(),(t=Rn)?(t=x2(t,as),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Ba!==null?{id:Ls,overflow:Ps}:null,retryLane:536870912,hydrationErrors:null},c=zg(t),c.return=s,s.child=c,Li=s,Rn=null)):t=null,t===null)throw Ua(s);return I0(t)?s.lanes=32:s.lanes=536870912,null}var U=g.children;return g=g.fallback,E?(Ga(),E=s.mode,U=Ju({mode:"hidden",children:U},E),g=Oo(g,E,c,null),U.return=s,g.return=s,U.sibling=g,s.child=U,g=s.child,g.memoizedState=qd(c),g.childLanes=Yd(t,O,c),s.memoizedState=Gd,yc(null,g)):(Ha(s),Xd(s,U))}var Q=t.memoizedState;if(Q!==null&&(U=Q.dehydrated,U!==null)){if(w)s.flags&256?(Ha(s),s.flags&=-257,s=Kd(t,s,c)):s.memoizedState!==null?(Ga(),s.child=t.child,s.flags|=128,s=null):(Ga(),U=g.fallback,E=s.mode,g=Ju({mode:"visible",children:g.children},E),U=Oo(U,E,c,null),U.flags|=2,g.return=s,U.return=s,g.sibling=U,s.child=g,Uo(s,t.child,null,c),g=s.child,g.memoizedState=qd(c),g.childLanes=Yd(t,O,c),s.memoizedState=Gd,s=yc(null,g));else if(Ha(s),I0(U)){if(O=U.nextSibling&&U.nextSibling.dataset,O)var de=O.dgst;O=de,g=Error(o(419)),g.stack="",g.digest=O,ac({value:g,source:null,stack:null}),s=Kd(t,s,c)}else if(mi||fl(t,s,c,!1),O=(c&t.childLanes)!==0,mi||O){if(O=wn,O!==null&&(g=ht(O,c),g!==0&&g!==Q.retryLane))throw Q.retryLane=g,Ro(t,g),Sr(O,t,g),zd;S0(U)||oh(),s=Kd(t,s,c)}else S0(U)?(s.flags|=192,s.child=t.child,s=null):(t=Q.treeContext,Rn=ls(U.nextSibling),Li=s,Xt=!0,ka=null,as=!1,t!==null&&qg(s,t),s=Xd(s,g.children),s.flags|=4096);return s}return E?(Ga(),U=g.fallback,E=s.mode,Q=t.child,de=Q.sibling,g=na(Q,{mode:"hidden",children:g.children}),g.subtreeFlags=Q.subtreeFlags&65011712,de!==null?U=na(de,U):(U=Oo(U,E,c,null),U.flags|=2),U.return=s,g.return=s,g.sibling=U,s.child=g,yc(null,g),g=s.child,U=t.child.memoizedState,U===null?U=qd(c):(E=U.cachePool,E!==null?(Q=di._currentValue,E=E.parent!==Q?{parent:Q,pool:Q}:E):E=Zg(),U={baseLanes:U.baseLanes|c,cachePool:E}),g.memoizedState=U,g.childLanes=Yd(t,O,c),s.memoizedState=Gd,yc(t.child,g)):(Ha(s),c=t.child,t=c.sibling,c=na(c,{mode:"visible",children:g.children}),c.return=s,c.sibling=null,t!==null&&(O=s.deletions,O===null?(s.deletions=[t],s.flags|=16):O.push(t)),s.child=c,s.memoizedState=null,c)}function Xd(t,s){return s=Ju({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function Ju(t,s){return t=Ur(22,t,null,s),t.lanes=0,t}function Kd(t,s,c){return Uo(s,t.child,null,c),t=Xd(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function up(t,s,c){t.lanes|=s;var g=t.alternate;g!==null&&(g.lanes|=s),cd(t.return,s,c)}function Wd(t,s,c,g,E,w){var O=t.memoizedState;O===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:g,tail:c,tailMode:E,treeForkCount:w}:(O.isBackwards=s,O.rendering=null,O.renderingStartTime=0,O.last=g,O.tail=c,O.tailMode=E,O.treeForkCount=w)}function hp(t,s,c){var g=s.pendingProps,E=g.revealOrder,w=g.tail;g=g.children;var O=ai.current,U=(O&2)!==0;if(U?(O=O&1|2,s.flags|=128):O&=1,ke(ai,O),Bi(t,s,g,c),g=Xt?sc:0,!U&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&up(t,c,s);else if(t.tag===19)up(t,c,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(E){case"forwards":for(c=s.child,E=null;c!==null;)t=c.alternate,t!==null&&ju(t)===null&&(E=c),c=c.sibling;c=E,c===null?(E=s.child,s.child=null):(E=c.sibling,c.sibling=null),Wd(s,!1,E,c,w,g);break;case"backwards":case"unstable_legacy-backwards":for(c=null,E=s.child,s.child=null;E!==null;){if(t=E.alternate,t!==null&&ju(t)===null){s.child=E;break}t=E.sibling,E.sibling=c,c=E,E=t}Wd(s,!0,c,null,w,g);break;case"together":Wd(s,!1,null,null,void 0,g);break;default:s.memoizedState=null}return s.child}function la(t,s,c){if(t!==null&&(s.dependencies=t.dependencies),Xa|=s.lanes,(c&s.childLanes)===0)if(t!==null){if(fl(t,s,c,!1),(c&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(o(153));if(s.child!==null){for(t=s.child,c=na(t,t.pendingProps),s.child=c,c.return=s;t.sibling!==null;)t=t.sibling,c=c.sibling=na(t,t.pendingProps),c.return=s;c.sibling=null}return s.child}function Qd(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&Du(t)))}function hb(t,s,c){switch(s.tag){case 3:yt(s,s.stateNode.containerInfo),Va(s,di,t.memoizedState.cache),Do();break;case 27:case 5:zi(s);break;case 4:yt(s,s.stateNode.containerInfo);break;case 10:Va(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Ad(s),null;break;case 13:var g=s.memoizedState;if(g!==null)return g.dehydrated!==null?(Ha(s),s.flags|=128,null):(c&s.child.childLanes)!==0?cp(t,s,c):(Ha(s),t=la(t,s,c),t!==null?t.sibling:null);Ha(s);break;case 19:var E=(t.flags&128)!==0;if(g=(c&s.childLanes)!==0,g||(fl(t,s,c,!1),g=(c&s.childLanes)!==0),E){if(g)return hp(t,s,c);s.flags|=128}if(E=s.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),ke(ai,ai.current),g)break;return null;case 22:return s.lanes=0,ip(t,s,c,s.pendingProps);case 24:Va(s,di,t.memoizedState.cache)}return la(t,s,c)}function fp(t,s,c){if(t!==null)if(t.memoizedProps!==s.pendingProps)mi=!0;else{if(!Qd(t,c)&&(s.flags&128)===0)return mi=!1,hb(t,s,c);mi=(t.flags&131072)!==0}else mi=!1,Xt&&(s.flags&1048576)!==0&&Gg(s,sc,s.index);switch(s.lanes=0,s.tag){case 16:e:{var g=s.pendingProps;if(t=Bo(s.elementType),s.type=t,typeof t=="function")td(t)?(g=jo(t,g),s.tag=1,s=op(null,s,t,g,c)):(s.tag=0,s=Hd(null,s,t,g,c));else{if(t!=null){var E=t.$$typeof;if(E===_e){s.tag=11,s=ep(null,s,t,g,c);break e}else if(E===j){s.tag=14,s=tp(null,s,t,g,c);break e}}throw s=We(t)||t,Error(o(306,s,""))}}return s;case 0:return Hd(t,s,s.type,s.pendingProps,c);case 1:return g=s.type,E=jo(g,s.pendingProps),op(t,s,g,E,c);case 3:e:{if(yt(s,s.stateNode.containerInfo),t===null)throw Error(o(387));g=s.pendingProps;var w=s.memoizedState;E=w.element,pd(t,s),dc(s,g,null,c);var O=s.memoizedState;if(g=O.cache,Va(s,di,g),g!==w.cache&&ud(s,[di],c,!0),fc(),g=O.element,w.isDehydrated)if(w={element:g,isDehydrated:!1,cache:O.cache},s.updateQueue.baseState=w,s.memoizedState=w,s.flags&256){s=lp(t,s,g,c);break e}else if(g!==E){E=is(Error(o(424)),s),ac(E),s=lp(t,s,g,c);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Rn=ls(t.firstChild),Li=s,Xt=!0,ka=null,as=!0,c=im(s,null,g,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Do(),g===E){s=la(t,s,c);break e}Bi(t,s,g,c)}s=s.child}return s;case 26:return Zu(t,s),t===null?(c=b2(s.type,null,s.pendingProps,null))?s.memoizedState=c:Xt||(c=s.type,t=s.pendingProps,g=gh(Le.current).createElement(c),g[Tn]=s,g[wt]=t,ki(g,c,t),Pn(g),s.stateNode=g):s.memoizedState=b2(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return zi(s),t===null&&Xt&&(g=s.stateNode=_2(s.type,s.pendingProps,Le.current),Li=s,as=!0,E=Rn,Ja(s.type)?(N0=E,Rn=ls(g.firstChild)):Rn=E),Bi(t,s,s.pendingProps.children,c),Zu(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&Xt&&((E=g=Rn)&&(g=Fb(g,s.type,s.pendingProps,as),g!==null?(s.stateNode=g,Li=s,Rn=ls(g.firstChild),as=!1,E=!0):E=!1),E||Ua(s)),zi(s),E=s.type,w=s.pendingProps,O=t!==null?t.memoizedProps:null,g=w.children,T0(E,w)?g=null:O!==null&&T0(E,O)&&(s.flags|=32),s.memoizedState!==null&&(E=bd(t,s,nb,null,null,c),Mc._currentValue=E),Zu(t,s),Bi(t,s,g,c),s.child;case 6:return t===null&&Xt&&((t=c=Rn)&&(c=zb(c,s.pendingProps,as),c!==null?(s.stateNode=c,Li=s,Rn=null,t=!0):t=!1),t||Ua(s)),null;case 13:return cp(t,s,c);case 4:return yt(s,s.stateNode.containerInfo),g=s.pendingProps,t===null?s.child=Uo(s,null,g,c):Bi(t,s,g,c),s.child;case 11:return ep(t,s,s.type,s.pendingProps,c);case 7:return Bi(t,s,s.pendingProps,c),s.child;case 8:return Bi(t,s,s.pendingProps.children,c),s.child;case 12:return Bi(t,s,s.pendingProps.children,c),s.child;case 10:return g=s.pendingProps,Va(s,s.type,g.value),Bi(t,s,g.children,c),s.child;case 9:return E=s.type._context,g=s.pendingProps.children,Lo(s),E=Pi(E),g=g(E),s.flags|=1,Bi(t,s,g,c),s.child;case 14:return tp(t,s,s.type,s.pendingProps,c);case 15:return np(t,s,s.type,s.pendingProps,c);case 19:return hp(t,s,c);case 31:return ub(t,s,c);case 22:return ip(t,s,c,s.pendingProps);case 24:return Lo(s),g=Pi(di),t===null?(E=dd(),E===null&&(E=wn,w=hd(),E.pooledCache=w,w.refCount++,w!==null&&(E.pooledCacheLanes|=c),E=w),s.memoizedState={parent:g,cache:E},md(s),Va(s,di,E)):((t.lanes&c)!==0&&(pd(t,s),dc(s,null,null,c),fc()),E=t.memoizedState,w=s.memoizedState,E.parent!==g?(E={parent:g,cache:g},s.memoizedState=E,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=E),Va(s,di,g)):(g=w.cache,Va(s,di,g),g!==E.cache&&ud(s,[di],c,!0))),Bi(t,s,s.pendingProps.children,c),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}function ca(t){t.flags|=4}function Zd(t,s,c,g,E){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(E&335544128)===E)if(t.stateNode.complete)t.flags|=8192;else if(Vp())t.flags|=8192;else throw ko=Bu,gd}else t.flags&=-16777217}function dp(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!I2(s))if(Vp())t.flags|=8192;else throw ko=Bu,gd}function $u(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?zn():536870912,t.lanes|=s,Tl|=s)}function Ec(t,s){if(!Xt)switch(t.tailMode){case"hidden":s=t.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?t.tail=null:c.sibling=null;break;case"collapsed":c=t.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:g.sibling=null}}function On(t){var s=t.alternate!==null&&t.alternate.child===t.child,c=0,g=0;if(s)for(var E=t.child;E!==null;)c|=E.lanes|E.childLanes,g|=E.subtreeFlags&65011712,g|=E.flags&65011712,E.return=t,E=E.sibling;else for(E=t.child;E!==null;)c|=E.lanes|E.childLanes,g|=E.subtreeFlags,g|=E.flags,E.return=t,E=E.sibling;return t.subtreeFlags|=g,t.childLanes=c,s}function fb(t,s,c){var g=s.pendingProps;switch(sd(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return On(s),null;case 1:return On(s),null;case 3:return c=s.stateNode,g=null,t!==null&&(g=t.memoizedState.cache),s.memoizedState.cache!==g&&(s.flags|=2048),sa(di),Kt(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(t===null||t.child===null)&&(hl(s)?ca(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,od())),On(s),null;case 26:var E=s.type,w=s.memoizedState;return t===null?(ca(s),w!==null?(On(s),dp(s,w)):(On(s),Zd(s,E,null,g,c))):w?w!==t.memoizedState?(ca(s),On(s),dp(s,w)):(On(s),s.flags&=-16777217):(t=t.memoizedProps,t!==g&&ca(s),On(s),Zd(s,E,t,g,c)),null;case 27:if(bn(s),c=Le.current,E=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==g&&ca(s);else{if(!g){if(s.stateNode===null)throw Error(o(166));return On(s),null}t=Ve.current,hl(s)?Yg(s):(t=_2(E,g,c),s.stateNode=t,ca(s))}return On(s),null;case 5:if(bn(s),E=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==g&&ca(s);else{if(!g){if(s.stateNode===null)throw Error(o(166));return On(s),null}if(w=Ve.current,hl(s))Yg(s);else{var O=gh(Le.current);switch(w){case 1:w=O.createElementNS("http://www.w3.org/2000/svg",E);break;case 2:w=O.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;default:switch(E){case"svg":w=O.createElementNS("http://www.w3.org/2000/svg",E);break;case"math":w=O.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;case"script":w=O.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof g.is=="string"?O.createElement("select",{is:g.is}):O.createElement("select"),g.multiple?w.multiple=!0:g.size&&(w.size=g.size);break;default:w=typeof g.is=="string"?O.createElement(E,{is:g.is}):O.createElement(E)}}w[Tn]=s,w[wt]=g;e:for(O=s.child;O!==null;){if(O.tag===5||O.tag===6)w.appendChild(O.stateNode);else if(O.tag!==4&&O.tag!==27&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===s)break e;for(;O.sibling===null;){if(O.return===null||O.return===s)break e;O=O.return}O.sibling.return=O.return,O=O.sibling}s.stateNode=w;e:switch(ki(w,E,g),E){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&ca(s)}}return On(s),Zd(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,c),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==g&&ca(s);else{if(typeof g!="string"&&s.stateNode===null)throw Error(o(166));if(t=Le.current,hl(s)){if(t=s.stateNode,c=s.memoizedProps,g=null,E=Li,E!==null)switch(E.tag){case 27:case 5:g=E.memoizedProps}t[Tn]=s,t=!!(t.nodeValue===c||g!==null&&g.suppressHydrationWarning===!0||c2(t.nodeValue,c)),t||Ua(s,!0)}else t=gh(t).createTextNode(g),t[Tn]=s,s.stateNode=t}return On(s),null;case 31:if(c=s.memoizedState,t===null||t.memoizedState!==null){if(g=hl(s),c!==null){if(t===null){if(!g)throw Error(o(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(557));t[Tn]=s}else Do(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;On(s),t=!1}else c=od(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=c),t=!0;if(!t)return s.flags&256?(jr(s),s):(jr(s),null);if((s.flags&128)!==0)throw Error(o(558))}return On(s),null;case 13:if(g=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(E=hl(s),g!==null&&g.dehydrated!==null){if(t===null){if(!E)throw Error(o(318));if(E=s.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(o(317));E[Tn]=s}else Do(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;On(s),E=!1}else E=od(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=E),E=!0;if(!E)return s.flags&256?(jr(s),s):(jr(s),null)}return jr(s),(s.flags&128)!==0?(s.lanes=c,s):(c=g!==null,t=t!==null&&t.memoizedState!==null,c&&(g=s.child,E=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(E=g.alternate.memoizedState.cachePool.pool),w=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(w=g.memoizedState.cachePool.pool),w!==E&&(g.flags|=2048)),c!==t&&c&&(s.child.flags|=8192),$u(s,s.updateQueue),On(s),null);case 4:return Kt(),t===null&&E0(s.stateNode.containerInfo),On(s),null;case 10:return sa(s.type),On(s),null;case 19:if(we(ai),g=s.memoizedState,g===null)return On(s),null;if(E=(s.flags&128)!==0,w=g.rendering,w===null)if(E)Ec(g,!1);else{if($n!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(w=ju(t),w!==null){for(s.flags|=128,Ec(g,!1),t=w.updateQueue,s.updateQueue=t,$u(s,t),s.subtreeFlags=0,t=c,c=s.child;c!==null;)Fg(c,t),c=c.sibling;return ke(ai,ai.current&1|2),Xt&&ia(s,g.treeForkCount),s.child}t=t.sibling}g.tail!==null&&hn()>rh&&(s.flags|=128,E=!0,Ec(g,!1),s.lanes=4194304)}else{if(!E)if(t=ju(w),t!==null){if(s.flags|=128,E=!0,t=t.updateQueue,s.updateQueue=t,$u(s,t),Ec(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!Xt)return On(s),null}else 2*hn()-g.renderingStartTime>rh&&c!==536870912&&(s.flags|=128,E=!0,Ec(g,!1),s.lanes=4194304);g.isBackwards?(w.sibling=s.child,s.child=w):(t=g.last,t!==null?t.sibling=w:s.child=w,g.last=w)}return g.tail!==null?(t=g.tail,g.rendering=t,g.tail=t.sibling,g.renderingStartTime=hn(),t.sibling=null,c=ai.current,ke(ai,E?c&1|2:c&1),Xt&&ia(s,g.treeForkCount),t):(On(s),null);case 22:case 23:return jr(s),_d(),g=s.memoizedState!==null,t!==null?t.memoizedState!==null!==g&&(s.flags|=8192):g&&(s.flags|=8192),g?(c&536870912)!==0&&(s.flags&128)===0&&(On(s),s.subtreeFlags&6&&(s.flags|=8192)):On(s),c=s.updateQueue,c!==null&&$u(s,c.retryQueue),c=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(c=t.memoizedState.cachePool.pool),g=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(g=s.memoizedState.cachePool.pool),g!==c&&(s.flags|=2048),t!==null&&we(Po),null;case 24:return c=null,t!==null&&(c=t.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),sa(di),On(s),null;case 25:return null;case 30:return null}throw Error(o(156,s.tag))}function db(t,s){switch(sd(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return sa(di),Kt(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return bn(s),null;case 31:if(s.memoizedState!==null){if(jr(s),s.alternate===null)throw Error(o(340));Do()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(jr(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(o(340));Do()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return we(ai),null;case 4:return Kt(),null;case 10:return sa(s.type),null;case 22:case 23:return jr(s),_d(),t!==null&&we(Po),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return sa(di),null;case 25:return null;default:return null}}function gp(t,s){switch(sd(s),s.tag){case 3:sa(di),Kt();break;case 26:case 27:case 5:bn(s);break;case 4:Kt();break;case 31:s.memoizedState!==null&&jr(s);break;case 13:jr(s);break;case 19:we(ai);break;case 10:sa(s.type);break;case 22:case 23:jr(s),_d(),t!==null&&we(Po);break;case 24:sa(di)}}function _c(t,s){try{var c=s.updateQueue,g=c!==null?c.lastEffect:null;if(g!==null){var E=g.next;c=E;do{if((c.tag&t)===t){g=void 0;var w=c.create,O=c.inst;g=w(),O.destroy=g}c=c.next}while(c!==E)}}catch(U){gn(s,s.return,U)}}function qa(t,s,c){try{var g=s.updateQueue,E=g!==null?g.lastEffect:null;if(E!==null){var w=E.next;g=w;do{if((g.tag&t)===t){var O=g.inst,U=O.destroy;if(U!==void 0){O.destroy=void 0,E=s;var Q=c,de=U;try{de()}catch(Te){gn(E,Q,Te)}}}g=g.next}while(g!==w)}}catch(Te){gn(s,s.return,Te)}}function mp(t){var s=t.updateQueue;if(s!==null){var c=t.stateNode;try{sm(s,c)}catch(g){gn(t,t.return,g)}}}function pp(t,s,c){c.props=jo(t.type,t.memoizedProps),c.state=t.memoizedState;try{c.componentWillUnmount()}catch(g){gn(t,s,g)}}function Ac(t,s){try{var c=t.ref;if(c!==null){switch(t.tag){case 26:case 27:case 5:var g=t.stateNode;break;case 30:g=t.stateNode;break;default:g=t.stateNode}typeof c=="function"?t.refCleanup=c(g):c.current=g}}catch(E){gn(t,s,E)}}function Bs(t,s){var c=t.ref,g=t.refCleanup;if(c!==null)if(typeof g=="function")try{g()}catch(E){gn(t,s,E)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(E){gn(t,s,E)}else c.current=null}function xp(t){var s=t.type,c=t.memoizedProps,g=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":c.autoFocus&&g.focus();break e;case"img":c.src?g.src=c.src:c.srcSet&&(g.srcset=c.srcSet)}}catch(E){gn(t,t.return,E)}}function Jd(t,s,c){try{var g=t.stateNode;Pb(g,t.type,c,s),g[wt]=s}catch(E){gn(t,t.return,E)}}function yp(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ja(t.type)||t.tag===4}function $d(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||yp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ja(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function e0(t,s,c){var g=t.tag;if(g===5||g===6)t=t.stateNode,s?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(t,s):(s=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,s.appendChild(t),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=Ki));else if(g!==4&&(g===27&&Ja(t.type)&&(c=t.stateNode,s=null),t=t.child,t!==null))for(e0(t,s,c),t=t.sibling;t!==null;)e0(t,s,c),t=t.sibling}function eh(t,s,c){var g=t.tag;if(g===5||g===6)t=t.stateNode,s?c.insertBefore(t,s):c.appendChild(t);else if(g!==4&&(g===27&&Ja(t.type)&&(c=t.stateNode),t=t.child,t!==null))for(eh(t,s,c),t=t.sibling;t!==null;)eh(t,s,c),t=t.sibling}function Ep(t){var s=t.stateNode,c=t.memoizedProps;try{for(var g=t.type,E=s.attributes;E.length;)s.removeAttributeNode(E[0]);ki(s,g,c),s[Tn]=t,s[wt]=c}catch(w){gn(t,t.return,w)}}var ua=!1,pi=!1,t0=!1,_p=typeof WeakSet=="function"?WeakSet:Set,Si=null;function gb(t,s){if(t=t.containerInfo,w0=Ah,t=P(t),k(t)){if("selectionStart"in t)var c={start:t.selectionStart,end:t.selectionEnd};else e:{c=(c=t.ownerDocument)&&c.defaultView||window;var g=c.getSelection&&c.getSelection();if(g&&g.rangeCount!==0){c=g.anchorNode;var E=g.anchorOffset,w=g.focusNode;g=g.focusOffset;try{c.nodeType,w.nodeType}catch{c=null;break e}var O=0,U=-1,Q=-1,de=0,Te=0,Se=t,ge=null;t:for(;;){for(var Ae;Se!==c||E!==0&&Se.nodeType!==3||(U=O+E),Se!==w||g!==0&&Se.nodeType!==3||(Q=O+g),Se.nodeType===3&&(O+=Se.nodeValue.length),(Ae=Se.firstChild)!==null;)ge=Se,Se=Ae;for(;;){if(Se===t)break t;if(ge===c&&++de===E&&(U=O),ge===w&&++Te===g&&(Q=O),(Ae=Se.nextSibling)!==null)break;Se=ge,ge=Se.parentNode}Se=Ae}c=U===-1||Q===-1?null:{start:U,end:Q}}else c=null}c=c||{start:0,end:0}}else c=null;for(b0={focusedElem:t,selectionRange:c},Ah=!1,Si=s;Si!==null;)if(s=Si,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,Si=t;else for(;Si!==null;){switch(s=Si,w=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(c=0;c<t.length;c++)E=t[c],E.ref.impl=E.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&w!==null){t=void 0,c=s,E=w.memoizedProps,w=w.memoizedState,g=c.stateNode;try{var Xe=jo(c.type,E);t=g.getSnapshotBeforeUpdate(Xe,w),g.__reactInternalSnapshotBeforeUpdate=t}catch(at){gn(c,c.return,at)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,c=t.nodeType,c===9)C0(t);else if(c===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":C0(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(o(163))}if(t=s.sibling,t!==null){t.return=s.return,Si=t;break}Si=s.return}}function Ap(t,s,c){var g=c.flags;switch(c.tag){case 0:case 11:case 15:fa(t,c),g&4&&_c(5,c);break;case 1:if(fa(t,c),g&4)if(t=c.stateNode,s===null)try{t.componentDidMount()}catch(O){gn(c,c.return,O)}else{var E=jo(c.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(E,s,t.__reactInternalSnapshotBeforeUpdate)}catch(O){gn(c,c.return,O)}}g&64&&mp(c),g&512&&Ac(c,c.return);break;case 3:if(fa(t,c),g&64&&(t=c.updateQueue,t!==null)){if(s=null,c.child!==null)switch(c.child.tag){case 27:case 5:s=c.child.stateNode;break;case 1:s=c.child.stateNode}try{sm(t,s)}catch(O){gn(c,c.return,O)}}break;case 27:s===null&&g&4&&Ep(c);case 26:case 5:fa(t,c),s===null&&g&4&&xp(c),g&512&&Ac(c,c.return);break;case 12:fa(t,c);break;case 31:fa(t,c),g&4&&Tp(t,c);break;case 13:fa(t,c),g&4&&vp(t,c),g&64&&(t=c.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(c=bb.bind(null,c),Hb(t,c))));break;case 22:if(g=c.memoizedState!==null||ua,!g){s=s!==null&&s.memoizedState!==null||pi,E=ua;var w=pi;ua=g,(pi=s)&&!w?da(t,c,(c.subtreeFlags&8772)!==0):fa(t,c),ua=E,pi=w}break;case 30:break;default:fa(t,c)}}function wp(t){var s=t.alternate;s!==null&&(t.alternate=null,wp(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&Ni(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var jn=null,br=!1;function ha(t,s,c){for(c=c.child;c!==null;)bp(t,s,c),c=c.sibling}function bp(t,s,c){if(Oe&&typeof Oe.onCommitFiberUnmount=="function")try{Oe.onCommitFiberUnmount(Wt,c)}catch{}switch(c.tag){case 26:pi||Bs(c,s),ha(t,s,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:pi||Bs(c,s);var g=jn,E=br;Ja(c.type)&&(jn=c.stateNode,br=!1),ha(t,s,c),Rc(c.stateNode),jn=g,br=E;break;case 5:pi||Bs(c,s);case 6:if(g=jn,E=br,jn=null,ha(t,s,c),jn=g,br=E,jn!==null)if(br)try{(jn.nodeType===9?jn.body:jn.nodeName==="HTML"?jn.ownerDocument.body:jn).removeChild(c.stateNode)}catch(w){gn(c,s,w)}else try{jn.removeChild(c.stateNode)}catch(w){gn(c,s,w)}break;case 18:jn!==null&&(br?(t=jn,m2(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,c.stateNode),Dl(t)):m2(jn,c.stateNode));break;case 4:g=jn,E=br,jn=c.stateNode.containerInfo,br=!0,ha(t,s,c),jn=g,br=E;break;case 0:case 11:case 14:case 15:qa(2,c,s),pi||qa(4,c,s),ha(t,s,c);break;case 1:pi||(Bs(c,s),g=c.stateNode,typeof g.componentWillUnmount=="function"&&pp(c,s,g)),ha(t,s,c);break;case 21:ha(t,s,c);break;case 22:pi=(g=pi)||c.memoizedState!==null,ha(t,s,c),pi=g;break;default:ha(t,s,c)}}function Tp(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Dl(t)}catch(c){gn(s,s.return,c)}}}function vp(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Dl(t)}catch(c){gn(s,s.return,c)}}function mb(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new _p),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new _p),s;default:throw Error(o(435,t.tag))}}function th(t,s){var c=mb(t);s.forEach(function(g){if(!c.has(g)){c.add(g);var E=Tb.bind(null,t,g);g.then(E,E)}})}function Tr(t,s){var c=s.deletions;if(c!==null)for(var g=0;g<c.length;g++){var E=c[g],w=t,O=s,U=O;e:for(;U!==null;){switch(U.tag){case 27:if(Ja(U.type)){jn=U.stateNode,br=!1;break e}break;case 5:jn=U.stateNode,br=!1;break e;case 3:case 4:jn=U.stateNode.containerInfo,br=!0;break e}U=U.return}if(jn===null)throw Error(o(160));bp(w,O,E),jn=null,br=!1,w=E.alternate,w!==null&&(w.return=null),E.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Cp(s,t),s=s.sibling}var bs=null;function Cp(t,s){var c=t.alternate,g=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Tr(s,t),vr(t),g&4&&(qa(3,t,t.return),_c(3,t),qa(5,t,t.return));break;case 1:Tr(s,t),vr(t),g&512&&(pi||c===null||Bs(c,c.return)),g&64&&ua&&(t=t.updateQueue,t!==null&&(g=t.callbacks,g!==null&&(c=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=c===null?g:c.concat(g))));break;case 26:var E=bs;if(Tr(s,t),vr(t),g&512&&(pi||c===null||Bs(c,c.return)),g&4){var w=c!==null?c.memoizedState:null;if(g=t.memoizedState,c===null)if(g===null)if(t.stateNode===null){e:{g=t.type,c=t.memoizedProps,E=E.ownerDocument||E;t:switch(g){case"title":w=E.getElementsByTagName("title")[0],(!w||w[Kr]||w[Tn]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=E.createElement(g),E.head.insertBefore(w,E.querySelector("head > title"))),ki(w,g,c),w[Tn]=t,Pn(w),g=w;break e;case"link":var O=C2("link","href",E).get(g+(c.href||""));if(O){for(var U=0;U<O.length;U++)if(w=O[U],w.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&w.getAttribute("rel")===(c.rel==null?null:c.rel)&&w.getAttribute("title")===(c.title==null?null:c.title)&&w.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){O.splice(U,1);break t}}w=E.createElement(g),ki(w,g,c),E.head.appendChild(w);break;case"meta":if(O=C2("meta","content",E).get(g+(c.content||""))){for(U=0;U<O.length;U++)if(w=O[U],w.getAttribute("content")===(c.content==null?null:""+c.content)&&w.getAttribute("name")===(c.name==null?null:c.name)&&w.getAttribute("property")===(c.property==null?null:c.property)&&w.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&w.getAttribute("charset")===(c.charSet==null?null:c.charSet)){O.splice(U,1);break t}}w=E.createElement(g),ki(w,g,c),E.head.appendChild(w);break;default:throw Error(o(468,g))}w[Tn]=t,Pn(w),g=w}t.stateNode=g}else S2(E,t.type,t.stateNode);else t.stateNode=v2(E,g,t.memoizedProps);else w!==g?(w===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):w.count--,g===null?S2(E,t.type,t.stateNode):v2(E,g,t.memoizedProps)):g===null&&t.stateNode!==null&&Jd(t,t.memoizedProps,c.memoizedProps)}break;case 27:Tr(s,t),vr(t),g&512&&(pi||c===null||Bs(c,c.return)),c!==null&&g&4&&Jd(t,t.memoizedProps,c.memoizedProps);break;case 5:if(Tr(s,t),vr(t),g&512&&(pi||c===null||Bs(c,c.return)),t.flags&32){E=t.stateNode;try{Xi(E,"")}catch(Xe){gn(t,t.return,Xe)}}g&4&&t.stateNode!=null&&(E=t.memoizedProps,Jd(t,E,c!==null?c.memoizedProps:E)),g&1024&&(t0=!0);break;case 6:if(Tr(s,t),vr(t),g&4){if(t.stateNode===null)throw Error(o(162));g=t.memoizedProps,c=t.stateNode;try{c.nodeValue=g}catch(Xe){gn(t,t.return,Xe)}}break;case 3:if(xh=null,E=bs,bs=mh(s.containerInfo),Tr(s,t),bs=E,vr(t),g&4&&c!==null&&c.memoizedState.isDehydrated)try{Dl(s.containerInfo)}catch(Xe){gn(t,t.return,Xe)}t0&&(t0=!1,Sp(t));break;case 4:g=bs,bs=mh(t.stateNode.containerInfo),Tr(s,t),vr(t),bs=g;break;case 12:Tr(s,t),vr(t);break;case 31:Tr(s,t),vr(t),g&4&&(g=t.updateQueue,g!==null&&(t.updateQueue=null,th(t,g)));break;case 13:Tr(s,t),vr(t),t.child.flags&8192&&t.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(ih=hn()),g&4&&(g=t.updateQueue,g!==null&&(t.updateQueue=null,th(t,g)));break;case 22:E=t.memoizedState!==null;var Q=c!==null&&c.memoizedState!==null,de=ua,Te=pi;if(ua=de||E,pi=Te||Q,Tr(s,t),pi=Te,ua=de,vr(t),g&8192)e:for(s=t.stateNode,s._visibility=E?s._visibility&-2:s._visibility|1,E&&(c===null||Q||ua||pi||Fo(t)),c=null,s=t;;){if(s.tag===5||s.tag===26){if(c===null){Q=c=s;try{if(w=Q.stateNode,E)O=w.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none";else{U=Q.stateNode;var Se=Q.memoizedProps.style,ge=Se!=null&&Se.hasOwnProperty("display")?Se.display:null;U.style.display=ge==null||typeof ge=="boolean"?"":(""+ge).trim()}}catch(Xe){gn(Q,Q.return,Xe)}}}else if(s.tag===6){if(c===null){Q=s;try{Q.stateNode.nodeValue=E?"":Q.memoizedProps}catch(Xe){gn(Q,Q.return,Xe)}}}else if(s.tag===18){if(c===null){Q=s;try{var Ae=Q.stateNode;E?p2(Ae,!0):p2(Q.stateNode,!1)}catch(Xe){gn(Q,Q.return,Xe)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;c===s&&(c=null),s=s.return}c===s&&(c=null),s.sibling.return=s.return,s=s.sibling}g&4&&(g=t.updateQueue,g!==null&&(c=g.retryQueue,c!==null&&(g.retryQueue=null,th(t,c))));break;case 19:Tr(s,t),vr(t),g&4&&(g=t.updateQueue,g!==null&&(t.updateQueue=null,th(t,g)));break;case 30:break;case 21:break;default:Tr(s,t),vr(t)}}function vr(t){var s=t.flags;if(s&2){try{for(var c,g=t.return;g!==null;){if(yp(g)){c=g;break}g=g.return}if(c==null)throw Error(o(160));switch(c.tag){case 27:var E=c.stateNode,w=$d(t);eh(t,w,E);break;case 5:var O=c.stateNode;c.flags&32&&(Xi(O,""),c.flags&=-33);var U=$d(t);eh(t,U,O);break;case 3:case 4:var Q=c.stateNode.containerInfo,de=$d(t);e0(t,de,Q);break;default:throw Error(o(161))}}catch(Te){gn(t,t.return,Te)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function Sp(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;Sp(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function fa(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Ap(t,s.alternate,s),s=s.sibling}function Fo(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:qa(4,s,s.return),Fo(s);break;case 1:Bs(s,s.return);var c=s.stateNode;typeof c.componentWillUnmount=="function"&&pp(s,s.return,c),Fo(s);break;case 27:Rc(s.stateNode);case 26:case 5:Bs(s,s.return),Fo(s);break;case 22:s.memoizedState===null&&Fo(s);break;case 30:Fo(s);break;default:Fo(s)}t=t.sibling}}function da(t,s,c){for(c=c&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var g=s.alternate,E=t,w=s,O=w.flags;switch(w.tag){case 0:case 11:case 15:da(E,w,c),_c(4,w);break;case 1:if(da(E,w,c),g=w,E=g.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(de){gn(g,g.return,de)}if(g=w,E=g.updateQueue,E!==null){var U=g.stateNode;try{var Q=E.shared.hiddenCallbacks;if(Q!==null)for(E.shared.hiddenCallbacks=null,E=0;E<Q.length;E++)rm(Q[E],U)}catch(de){gn(g,g.return,de)}}c&&O&64&&mp(w),Ac(w,w.return);break;case 27:Ep(w);case 26:case 5:da(E,w,c),c&&g===null&&O&4&&xp(w),Ac(w,w.return);break;case 12:da(E,w,c);break;case 31:da(E,w,c),c&&O&4&&Tp(E,w);break;case 13:da(E,w,c),c&&O&4&&vp(E,w);break;case 22:w.memoizedState===null&&da(E,w,c),Ac(w,w.return);break;case 30:break;default:da(E,w,c)}s=s.sibling}}function n0(t,s){var c=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(c=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==c&&(t!=null&&t.refCount++,c!=null&&oc(c))}function i0(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&oc(t))}function Ts(t,s,c,g){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Ip(t,s,c,g),s=s.sibling}function Ip(t,s,c,g){var E=s.flags;switch(s.tag){case 0:case 11:case 15:Ts(t,s,c,g),E&2048&&_c(9,s);break;case 1:Ts(t,s,c,g);break;case 3:Ts(t,s,c,g),E&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&oc(t)));break;case 12:if(E&2048){Ts(t,s,c,g),t=s.stateNode;try{var w=s.memoizedProps,O=w.id,U=w.onPostCommit;typeof U=="function"&&U(O,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(Q){gn(s,s.return,Q)}}else Ts(t,s,c,g);break;case 31:Ts(t,s,c,g);break;case 13:Ts(t,s,c,g);break;case 23:break;case 22:w=s.stateNode,O=s.alternate,s.memoizedState!==null?w._visibility&2?Ts(t,s,c,g):wc(t,s):w._visibility&2?Ts(t,s,c,g):(w._visibility|=2,Al(t,s,c,g,(s.subtreeFlags&10256)!==0||!1)),E&2048&&n0(O,s);break;case 24:Ts(t,s,c,g),E&2048&&i0(s.alternate,s);break;default:Ts(t,s,c,g)}}function Al(t,s,c,g,E){for(E=E&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var w=t,O=s,U=c,Q=g,de=O.flags;switch(O.tag){case 0:case 11:case 15:Al(w,O,U,Q,E),_c(8,O);break;case 23:break;case 22:var Te=O.stateNode;O.memoizedState!==null?Te._visibility&2?Al(w,O,U,Q,E):wc(w,O):(Te._visibility|=2,Al(w,O,U,Q,E)),E&&de&2048&&n0(O.alternate,O);break;case 24:Al(w,O,U,Q,E),E&&de&2048&&i0(O.alternate,O);break;default:Al(w,O,U,Q,E)}s=s.sibling}}function wc(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var c=t,g=s,E=g.flags;switch(g.tag){case 22:wc(c,g),E&2048&&n0(g.alternate,g);break;case 24:wc(c,g),E&2048&&i0(g.alternate,g);break;default:wc(c,g)}s=s.sibling}}var bc=8192;function wl(t,s,c){if(t.subtreeFlags&bc)for(t=t.child;t!==null;)Np(t,s,c),t=t.sibling}function Np(t,s,c){switch(t.tag){case 26:wl(t,s,c),t.flags&bc&&t.memoizedState!==null&&tT(c,bs,t.memoizedState,t.memoizedProps);break;case 5:wl(t,s,c);break;case 3:case 4:var g=bs;bs=mh(t.stateNode.containerInfo),wl(t,s,c),bs=g;break;case 22:t.memoizedState===null&&(g=t.alternate,g!==null&&g.memoizedState!==null?(g=bc,bc=16777216,wl(t,s,c),bc=g):wl(t,s,c));break;default:wl(t,s,c)}}function Rp(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Tc(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var g=s[c];Si=g,Dp(g,t)}Rp(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Op(t),t=t.sibling}function Op(t){switch(t.tag){case 0:case 11:case 15:Tc(t),t.flags&2048&&qa(9,t,t.return);break;case 3:Tc(t);break;case 12:Tc(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,nh(t)):Tc(t);break;default:Tc(t)}}function nh(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var g=s[c];Si=g,Dp(g,t)}Rp(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:qa(8,s,s.return),nh(s);break;case 22:c=s.stateNode,c._visibility&2&&(c._visibility&=-3,nh(s));break;default:nh(s)}t=t.sibling}}function Dp(t,s){for(;Si!==null;){var c=Si;switch(c.tag){case 0:case 11:case 15:qa(8,c,s);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var g=c.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:oc(c.memoizedState.cache)}if(g=c.child,g!==null)g.return=c,Si=g;else e:for(c=t;Si!==null;){g=Si;var E=g.sibling,w=g.return;if(wp(g),g===c){Si=null;break e}if(E!==null){E.return=w,Si=E;break e}Si=w}}}var pb={getCacheForType:function(t){var s=Pi(di),c=s.data.get(t);return c===void 0&&(c=t(),s.data.set(t,c)),c},cacheSignal:function(){return Pi(di).controller.signal}},xb=typeof WeakMap=="function"?WeakMap:Map,sn=0,wn=null,Lt=null,jt=0,dn=0,Fr=null,Ya=!1,bl=!1,r0=!1,ga=0,$n=0,Xa=0,zo=0,s0=0,zr=0,Tl=0,vc=null,Cr=null,a0=!1,ih=0,Mp=0,rh=1/0,sh=null,Ka=null,bi=0,Wa=null,vl=null,ma=0,o0=0,l0=null,Lp=null,Cc=0,c0=null;function Hr(){return(sn&2)!==0&&jt!==0?jt&-jt:pe.T!==null?m0():en()}function Pp(){if(zr===0)if((jt&536870912)===0||Xt){var t=At;At<<=1,(At&3932160)===0&&(At=262144),zr=t}else zr=536870912;return t=Vr.current,t!==null&&(t.flags|=32),zr}function Sr(t,s,c){(t===wn&&(dn===2||dn===9)||t.cancelPendingCommit!==null)&&(Cl(t,0),Qa(t,jt,zr,!1)),xr(t,c),((sn&2)===0||t!==wn)&&(t===wn&&((sn&2)===0&&(zo|=c),$n===4&&Qa(t,jt,zr,!1)),ks(t))}function Bp(t,s,c){if((sn&6)!==0)throw Error(o(327));var g=!c&&(s&127)===0&&(s&t.expiredLanes)===0||Sn(t,s),E=g?_b(t,s):h0(t,s,!0),w=g;do{if(E===0){bl&&!g&&Qa(t,s,0,!1);break}else{if(c=t.current.alternate,w&&!yb(c)){E=h0(t,s,!1),w=!1;continue}if(E===2){if(w=s,t.errorRecoveryDisabledLanes&w)var O=0;else O=t.pendingLanes&-536870913,O=O!==0?O:O&536870912?536870912:0;if(O!==0){s=O;e:{var U=t;E=vc;var Q=U.current.memoizedState.isDehydrated;if(Q&&(Cl(U,O).flags|=256),O=h0(U,O,!1),O!==2){if(r0&&!Q){U.errorRecoveryDisabledLanes|=w,zo|=w,E=4;break e}w=Cr,Cr=E,w!==null&&(Cr===null?Cr=w:Cr.push.apply(Cr,w))}E=O}if(w=!1,E!==2)continue}}if(E===1){Cl(t,0),Qa(t,s,0,!0);break}e:{switch(g=t,w=E,w){case 0:case 1:throw Error(o(345));case 4:if((s&4194048)!==s)break;case 6:Qa(g,s,zr,!Ya);break e;case 2:Cr=null;break;case 3:case 5:break;default:throw Error(o(329))}if((s&62914560)===s&&(E=ih+300-hn(),10<E)){if(Qa(g,s,zr,!Ya),rr(g,0,!0)!==0)break e;ma=s,g.timeoutHandle=d2(kp.bind(null,g,c,Cr,sh,a0,s,zr,zo,Tl,Ya,w,"Throttled",-0,0),E);break e}kp(g,c,Cr,sh,a0,s,zr,zo,Tl,Ya,w,null,-0,0)}}break}while(!0);ks(t)}function kp(t,s,c,g,E,w,O,U,Q,de,Te,Se,ge,Ae){if(t.timeoutHandle=-1,Se=s.subtreeFlags,Se&8192||(Se&16785408)===16785408){Se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ki},Np(s,w,Se);var Xe=(w&62914560)===w?ih-hn():(w&4194048)===w?Mp-hn():0;if(Xe=nT(Se,Xe),Xe!==null){ma=w,t.cancelPendingCommit=Xe(qp.bind(null,t,s,w,c,g,E,O,U,Q,Te,Se,null,ge,Ae)),Qa(t,w,O,!de);return}}qp(t,s,w,c,g,E,O,U,Q)}function yb(t){for(var s=t;;){var c=s.tag;if((c===0||c===11||c===15)&&s.flags&16384&&(c=s.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var g=0;g<c.length;g++){var E=c[g],w=E.getSnapshot;E=E.value;try{if(!m(w(),E))return!1}catch{return!1}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Qa(t,s,c,g){s&=~s0,s&=~zo,t.suspendedLanes|=s,t.pingedLanes&=~s,g&&(t.warmLanes|=s),g=t.expirationTimes;for(var E=s;0<E;){var w=31-rt(E),O=1<<w;g[w]=-1,E&=~O}c!==0&&Xr(t,c,s)}function ah(){return(sn&6)===0?(Sc(0),!1):!0}function u0(){if(Lt!==null){if(dn===0)var t=Lt.return;else t=Lt,ra=Mo=null,Cd(t),pl=null,cc=0,t=Lt;for(;t!==null;)gp(t.alternate,t),t=t.return;Lt=null}}function Cl(t,s){var c=t.timeoutHandle;c!==-1&&(t.timeoutHandle=-1,Ub(c)),c=t.cancelPendingCommit,c!==null&&(t.cancelPendingCommit=null,c()),ma=0,u0(),wn=t,Lt=c=na(t.current,null),jt=s,dn=0,Fr=null,Ya=!1,bl=Sn(t,s),r0=!1,Tl=zr=s0=zo=Xa=$n=0,Cr=vc=null,a0=!1,(s&8)!==0&&(s|=s&32);var g=t.entangledLanes;if(g!==0)for(t=t.entanglements,g&=s;0<g;){var E=31-rt(g),w=1<<E;s|=t[E],g&=~w}return ga=s,Su(),c}function Up(t,s){_t=null,pe.H=xc,s===ml||s===Pu?(s=em(),dn=3):s===gd?(s=em(),dn=4):dn=s===zd?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Fr=s,Lt===null&&($n=1,Wu(t,is(s,t.current)))}function Vp(){var t=Vr.current;return t===null?!0:(jt&4194048)===jt?os===null:(jt&62914560)===jt||(jt&536870912)!==0?t===os:!1}function jp(){var t=pe.H;return pe.H=xc,t===null?xc:t}function Fp(){var t=pe.A;return pe.A=pb,t}function oh(){$n=4,Ya||(jt&4194048)!==jt&&Vr.current!==null||(bl=!0),(Xa&134217727)===0&&(zo&134217727)===0||wn===null||Qa(wn,jt,zr,!1)}function h0(t,s,c){var g=sn;sn|=2;var E=jp(),w=Fp();(wn!==t||jt!==s)&&(sh=null,Cl(t,s)),s=!1;var O=$n;e:do try{if(dn!==0&&Lt!==null){var U=Lt,Q=Fr;switch(dn){case 8:u0(),O=6;break e;case 3:case 2:case 9:case 6:Vr.current===null&&(s=!0);var de=dn;if(dn=0,Fr=null,Sl(t,U,Q,de),c&&bl){O=0;break e}break;default:de=dn,dn=0,Fr=null,Sl(t,U,Q,de)}}Eb(),O=$n;break}catch(Te){Up(t,Te)}while(!0);return s&&t.shellSuspendCounter++,ra=Mo=null,sn=g,pe.H=E,pe.A=w,Lt===null&&(wn=null,jt=0,Su()),O}function Eb(){for(;Lt!==null;)zp(Lt)}function _b(t,s){var c=sn;sn|=2;var g=jp(),E=Fp();wn!==t||jt!==s?(sh=null,rh=hn()+500,Cl(t,s)):bl=Sn(t,s);e:do try{if(dn!==0&&Lt!==null){s=Lt;var w=Fr;t:switch(dn){case 1:dn=0,Fr=null,Sl(t,s,w,1);break;case 2:case 9:if(Jg(w)){dn=0,Fr=null,Hp(s);break}s=function(){dn!==2&&dn!==9||wn!==t||(dn=7),ks(t)},w.then(s,s);break e;case 3:dn=7;break e;case 4:dn=5;break e;case 7:Jg(w)?(dn=0,Fr=null,Hp(s)):(dn=0,Fr=null,Sl(t,s,w,7));break;case 5:var O=null;switch(Lt.tag){case 26:O=Lt.memoizedState;case 5:case 27:var U=Lt;if(O?I2(O):U.stateNode.complete){dn=0,Fr=null;var Q=U.sibling;if(Q!==null)Lt=Q;else{var de=U.return;de!==null?(Lt=de,lh(de)):Lt=null}break t}}dn=0,Fr=null,Sl(t,s,w,5);break;case 6:dn=0,Fr=null,Sl(t,s,w,6);break;case 8:u0(),$n=6;break e;default:throw Error(o(462))}}Ab();break}catch(Te){Up(t,Te)}while(!0);return ra=Mo=null,pe.H=g,pe.A=E,sn=c,Lt!==null?0:(wn=null,jt=0,Su(),$n)}function Ab(){for(;Lt!==null&&!xs();)zp(Lt)}function zp(t){var s=fp(t.alternate,t,ga);t.memoizedProps=t.pendingProps,s===null?lh(t):Lt=s}function Hp(t){var s=t,c=s.alternate;switch(s.tag){case 15:case 0:s=ap(c,s,s.pendingProps,s.type,void 0,jt);break;case 11:s=ap(c,s,s.pendingProps,s.type.render,s.ref,jt);break;case 5:Cd(s);default:gp(c,s),s=Lt=Fg(s,ga),s=fp(c,s,ga)}t.memoizedProps=t.pendingProps,s===null?lh(t):Lt=s}function Sl(t,s,c,g){ra=Mo=null,Cd(s),pl=null,cc=0;var E=s.return;try{if(cb(t,E,s,c,jt)){$n=1,Wu(t,is(c,t.current)),Lt=null;return}}catch(w){if(E!==null)throw Lt=E,w;$n=1,Wu(t,is(c,t.current)),Lt=null;return}s.flags&32768?(Xt||g===1?t=!0:bl||(jt&536870912)!==0?t=!1:(Ya=t=!0,(g===2||g===9||g===3||g===6)&&(g=Vr.current,g!==null&&g.tag===13&&(g.flags|=16384))),Gp(s,t)):lh(s)}function lh(t){var s=t;do{if((s.flags&32768)!==0){Gp(s,Ya);return}t=s.return;var c=fb(s.alternate,s,ga);if(c!==null){Lt=c;return}if(s=s.sibling,s!==null){Lt=s;return}Lt=s=t}while(s!==null);$n===0&&($n=5)}function Gp(t,s){do{var c=db(t.alternate,t);if(c!==null){c.flags&=32767,Lt=c;return}if(c=t.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!s&&(t=t.sibling,t!==null)){Lt=t;return}Lt=t=c}while(t!==null);$n=6,Lt=null}function qp(t,s,c,g,E,w,O,U,Q){t.cancelPendingCommit=null;do ch();while(bi!==0);if((sn&6)!==0)throw Error(o(327));if(s!==null){if(s===t.current)throw Error(o(177));if(w=s.lanes|s.childLanes,w|=$f,Gi(t,c,w,O,U,Q),t===wn&&(Lt=wn=null,jt=0),vl=s,Wa=t,ma=c,o0=w,l0=E,Lp=g,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,vb(ri,function(){return Qp(),null})):(t.callbackNode=null,t.callbackPriority=0),g=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||g){g=pe.T,pe.T=null,E=be.p,be.p=2,O=sn,sn|=4;try{gb(t,s,c)}finally{sn=O,be.p=E,pe.T=g}}bi=1,Yp(),Xp(),Kp()}}function Yp(){if(bi===1){bi=0;var t=Wa,s=vl,c=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||c){c=pe.T,pe.T=null;var g=be.p;be.p=2;var E=sn;sn|=4;try{Cp(s,t);var w=b0,O=P(t.containerInfo),U=w.focusedElem,Q=w.selectionRange;if(O!==U&&U&&U.ownerDocument&&R(U.ownerDocument.documentElement,U)){if(Q!==null&&k(U)){var de=Q.start,Te=Q.end;if(Te===void 0&&(Te=de),"selectionStart"in U)U.selectionStart=de,U.selectionEnd=Math.min(Te,U.value.length);else{var Se=U.ownerDocument||document,ge=Se&&Se.defaultView||window;if(ge.getSelection){var Ae=ge.getSelection(),Xe=U.textContent.length,at=Math.min(Q.start,Xe),yn=Q.end===void 0?at:Math.min(Q.end,Xe);!Ae.extend&&at>yn&&(O=yn,yn=at,at=O);var oe=T(U,at),re=T(U,yn);if(oe&&re&&(Ae.rangeCount!==1||Ae.anchorNode!==oe.node||Ae.anchorOffset!==oe.offset||Ae.focusNode!==re.node||Ae.focusOffset!==re.offset)){var fe=Se.createRange();fe.setStart(oe.node,oe.offset),Ae.removeAllRanges(),at>yn?(Ae.addRange(fe),Ae.extend(re.node,re.offset)):(fe.setEnd(re.node,re.offset),Ae.addRange(fe))}}}}for(Se=[],Ae=U;Ae=Ae.parentNode;)Ae.nodeType===1&&Se.push({element:Ae,left:Ae.scrollLeft,top:Ae.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<Se.length;U++){var ve=Se[U];ve.element.scrollLeft=ve.left,ve.element.scrollTop=ve.top}}Ah=!!w0,b0=w0=null}finally{sn=E,be.p=g,pe.T=c}}t.current=s,bi=2}}function Xp(){if(bi===2){bi=0;var t=Wa,s=vl,c=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||c){c=pe.T,pe.T=null;var g=be.p;be.p=2;var E=sn;sn|=4;try{Ap(t,s.alternate,s)}finally{sn=E,be.p=g,pe.T=c}}bi=3}}function Kp(){if(bi===4||bi===3){bi=0,tr();var t=Wa,s=vl,c=ma,g=Lp;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?bi=5:(bi=0,vl=Wa=null,Wp(t,t.pendingLanes));var E=t.pendingLanes;if(E===0&&(Ka=null),In(c),s=s.stateNode,Oe&&typeof Oe.onCommitFiberRoot=="function")try{Oe.onCommitFiberRoot(Wt,s,void 0,(s.current.flags&128)===128)}catch{}if(g!==null){s=pe.T,E=be.p,be.p=2,pe.T=null;try{for(var w=t.onRecoverableError,O=0;O<g.length;O++){var U=g[O];w(U.value,{componentStack:U.stack})}}finally{pe.T=s,be.p=E}}(ma&3)!==0&&ch(),ks(t),E=t.pendingLanes,(c&261930)!==0&&(E&42)!==0?t===c0?Cc++:(Cc=0,c0=t):Cc=0,Sc(0)}}function Wp(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,oc(s)))}function ch(){return Yp(),Xp(),Kp(),Qp()}function Qp(){if(bi!==5)return!1;var t=Wa,s=o0;o0=0;var c=In(ma),g=pe.T,E=be.p;try{be.p=32>c?32:c,pe.T=null,c=l0,l0=null;var w=Wa,O=ma;if(bi=0,vl=Wa=null,ma=0,(sn&6)!==0)throw Error(o(331));var U=sn;if(sn|=4,Op(w.current),Ip(w,w.current,O,c),sn=U,Sc(0,!1),Oe&&typeof Oe.onPostCommitFiberRoot=="function")try{Oe.onPostCommitFiberRoot(Wt,w)}catch{}return!0}finally{be.p=E,pe.T=g,Wp(t,s)}}function Zp(t,s,c){s=is(c,s),s=Fd(t.stateNode,s,2),t=za(t,s,2),t!==null&&(xr(t,2),ks(t))}function gn(t,s,c){if(t.tag===3)Zp(t,t,c);else for(;s!==null;){if(s.tag===3){Zp(s,t,c);break}else if(s.tag===1){var g=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Ka===null||!Ka.has(g))){t=is(c,t),c=Jm(2),g=za(s,c,2),g!==null&&($m(c,g,s,t),xr(g,2),ks(g));break}}s=s.return}}function f0(t,s,c){var g=t.pingCache;if(g===null){g=t.pingCache=new xb;var E=new Set;g.set(s,E)}else E=g.get(s),E===void 0&&(E=new Set,g.set(s,E));E.has(c)||(r0=!0,E.add(c),t=wb.bind(null,t,s,c),s.then(t,t))}function wb(t,s,c){var g=t.pingCache;g!==null&&g.delete(s),t.pingedLanes|=t.suspendedLanes&c,t.warmLanes&=~c,wn===t&&(jt&c)===c&&($n===4||$n===3&&(jt&62914560)===jt&&300>hn()-ih?(sn&2)===0&&Cl(t,0):s0|=c,Tl===jt&&(Tl=0)),ks(t)}function Jp(t,s){s===0&&(s=zn()),t=Ro(t,s),t!==null&&(xr(t,s),ks(t))}function bb(t){var s=t.memoizedState,c=0;s!==null&&(c=s.retryLane),Jp(t,c)}function Tb(t,s){var c=0;switch(t.tag){case 31:case 13:var g=t.stateNode,E=t.memoizedState;E!==null&&(c=E.retryLane);break;case 19:g=t.stateNode;break;case 22:g=t.stateNode._retryCache;break;default:throw Error(o(314))}g!==null&&g.delete(s),Jp(t,c)}function vb(t,s){return En(t,s)}var uh=null,Il=null,d0=!1,hh=!1,g0=!1,Za=0;function ks(t){t!==Il&&t.next===null&&(Il===null?uh=Il=t:Il=Il.next=t),hh=!0,d0||(d0=!0,Sb())}function Sc(t,s){if(!g0&&hh){g0=!0;do for(var c=!1,g=uh;g!==null;){if(t!==0){var E=g.pendingLanes;if(E===0)var w=0;else{var O=g.suspendedLanes,U=g.pingedLanes;w=(1<<31-rt(42|t)+1)-1,w&=E&~(O&~U),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(c=!0,n2(g,w))}else w=jt,w=rr(g,g===wn?w:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(w&3)===0||Sn(g,w)||(c=!0,n2(g,w));g=g.next}while(c);g0=!1}}function Cb(){$p()}function $p(){hh=d0=!1;var t=0;Za!==0&&kb()&&(t=Za);for(var s=hn(),c=null,g=uh;g!==null;){var E=g.next,w=e2(g,s);w===0?(g.next=null,c===null?uh=E:c.next=E,E===null&&(Il=c)):(c=g,(t!==0||(w&3)!==0)&&(hh=!0)),g=E}bi!==0&&bi!==5||Sc(t),Za!==0&&(Za=0)}function e2(t,s){for(var c=t.suspendedLanes,g=t.pingedLanes,E=t.expirationTimes,w=t.pendingLanes&-62914561;0<w;){var O=31-rt(w),U=1<<O,Q=E[O];Q===-1?((U&c)===0||(U&g)!==0)&&(E[O]=Gs(U,s)):Q<=s&&(t.expiredLanes|=U),w&=~U}if(s=wn,c=jt,c=rr(t,t===s?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),g=t.callbackNode,c===0||t===s&&(dn===2||dn===9)||t.cancelPendingCommit!==null)return g!==null&&g!==null&&Fe(g),t.callbackNode=null,t.callbackPriority=0;if((c&3)===0||Sn(t,c)){if(s=c&-c,s===t.callbackPriority)return s;switch(g!==null&&Fe(g),In(c)){case 2:case 8:c=ys;break;case 32:c=ri;break;case 268435456:c=Cs;break;default:c=ri}return g=t2.bind(null,t),c=En(c,g),t.callbackPriority=s,t.callbackNode=c,s}return g!==null&&g!==null&&Fe(g),t.callbackPriority=2,t.callbackNode=null,2}function t2(t,s){if(bi!==0&&bi!==5)return t.callbackNode=null,t.callbackPriority=0,null;var c=t.callbackNode;if(ch()&&t.callbackNode!==c)return null;var g=jt;return g=rr(t,t===wn?g:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),g===0?null:(Bp(t,g,s),e2(t,hn()),t.callbackNode!=null&&t.callbackNode===c?t2.bind(null,t):null)}function n2(t,s){if(ch())return null;Bp(t,s,!0)}function Sb(){Vb(function(){(sn&6)!==0?En(ui,Cb):$p()})}function m0(){if(Za===0){var t=dl;t===0&&(t=nr,nr<<=1,(nr&261888)===0&&(nr=256)),Za=t}return Za}function i2(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Rs(""+t)}function r2(t,s){var c=s.ownerDocument.createElement("input");return c.name=s.name,c.value=s.value,t.id&&c.setAttribute("form",t.id),s.parentNode.insertBefore(c,s),t=new FormData(t),c.parentNode.removeChild(c),t}function Ib(t,s,c,g,E){if(s==="submit"&&c&&c.stateNode===E){var w=i2((E[wt]||null).action),O=g.submitter;O&&(s=(s=O[wt]||null)?i2(s.formAction):O.getAttribute("formAction"),s!==null&&(w=s,O=null));var U=new Nn("action","action",null,g,E);t.push({event:U,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(Za!==0){var Q=O?r2(E,O):new FormData(E);Pd(c,{pending:!0,data:Q,method:E.method,action:w},null,Q)}}else typeof w=="function"&&(U.preventDefault(),Q=O?r2(E,O):new FormData(E),Pd(c,{pending:!0,data:Q,method:E.method,action:w},w,Q))},currentTarget:E}]})}}for(var p0=0;p0<rc.length;p0++){var x0=rc[p0],Nb=x0.toLowerCase(),Rb=x0[0].toUpperCase()+x0.slice(1);ws(Nb,"on"+Rb)}ws(wr,"onAnimationEnd"),ws(Mi,"onAnimationIteration"),ws(cn,"onAnimationStart"),ws("dblclick","onDoubleClick"),ws("focusin","onFocus"),ws("focusout","onBlur"),ws(wi,"onTransitionRun"),ws(ur,"onTransitionStart"),ws(Pa,"onTransitionCancel"),ws(ta,"onTransitionEnd"),Ri("onMouseEnter",["mouseout","mouseover"]),Ri("onMouseLeave",["mouseout","mouseover"]),Ri("onPointerEnter",["pointerout","pointerover"]),Ri("onPointerLeave",["pointerout","pointerover"]),$t("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$t("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$t("onBeforeInput",["compositionend","keypress","textInput","paste"]),$t("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$t("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$t("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ic="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ob=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ic));function s2(t,s){s=(s&4)!==0;for(var c=0;c<t.length;c++){var g=t[c],E=g.event;g=g.listeners;e:{var w=void 0;if(s)for(var O=g.length-1;0<=O;O--){var U=g[O],Q=U.instance,de=U.currentTarget;if(U=U.listener,Q!==w&&E.isPropagationStopped())break e;w=U,E.currentTarget=de;try{w(E)}catch(Te){Cu(Te)}E.currentTarget=null,w=Q}else for(O=0;O<g.length;O++){if(U=g[O],Q=U.instance,de=U.currentTarget,U=U.listener,Q!==w&&E.isPropagationStopped())break e;w=U,E.currentTarget=de;try{w(E)}catch(Te){Cu(Te)}E.currentTarget=null,w=Q}}}}function Pt(t,s){var c=s[fi];c===void 0&&(c=s[fi]=new Set);var g=t+"__bubble";c.has(g)||(a2(s,t,2,!1),c.add(g))}function y0(t,s,c){var g=0;s&&(g|=4),a2(c,t,g,s)}var fh="_reactListening"+Math.random().toString(36).slice(2);function E0(t){if(!t[fh]){t[fh]=!0,Ie.forEach(function(c){c!=="selectionchange"&&(Ob.has(c)||y0(c,!1,t),y0(c,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[fh]||(s[fh]=!0,y0("selectionchange",!1,s))}}function a2(t,s,c,g){switch(P2(s)){case 2:var E=sT;break;case 8:E=aT;break;default:E=L0}c=E.bind(null,s,c,t),E=void 0,!Ys||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(E=!0),g?E!==void 0?t.addEventListener(s,c,{capture:!0,passive:E}):t.addEventListener(s,c,!0):E!==void 0?t.addEventListener(s,c,{passive:E}):t.addEventListener(s,c,!1)}function _0(t,s,c,g,E){var w=g;if((s&1)===0&&(s&2)===0&&g!==null)e:for(;;){if(g===null)return;var O=g.tag;if(O===3||O===4){var U=g.stateNode.containerInfo;if(U===E)break;if(O===4)for(O=g.return;O!==null;){var Q=O.tag;if((Q===3||Q===4)&&O.stateNode.containerInfo===E)return;O=O.return}for(;U!==null;){if(O=vn(U),O===null)return;if(Q=O.tag,Q===5||Q===6||Q===26||Q===27){g=w=O;continue e}U=U.parentNode}}g=g.return}Os(function(){var de=w,Te=Er(c),Se=[];e:{var ge=vu.get(t);if(ge!==void 0){var Ae=Nn,Xe=t;switch(t){case"keypress":if(Lr(c)===0)break e;case"keydown":case"keyup":Ae=Zs;break;case"focusin":Xe="focus",Ae=Ws;break;case"focusout":Xe="blur",Ae=Ws;break;case"beforeblur":case"afterblur":Ae=Ws;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ae=Qt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ae=Ks;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ae=N;break;case wr:case Mi:case cn:Ae=mt;break;case ta:Ae=F;break;case"scroll":case"scrollend":Ae=Ra;break;case"wheel":Ae=Ee;break;case"copy":case"cut":case"paste":Ae=Qs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ae=Mt;break;case"toggle":case"beforetoggle":Ae=ut}var at=(s&4)!==0,yn=!at&&(t==="scroll"||t==="scrollend"),oe=at?ge!==null?ge+"Capture":null:ge;at=[];for(var re=de,fe;re!==null;){var ve=re;if(fe=ve.stateNode,ve=ve.tag,ve!==5&&ve!==26&&ve!==27||fe===null||oe===null||(ve=it(re,oe),ve!=null&&at.push(Nc(re,ve,fe))),yn)break;re=re.return}0<at.length&&(ge=new Ae(ge,Xe,null,c,Te),Se.push({event:ge,listeners:at}))}}if((s&7)===0){e:{if(ge=t==="mouseover"||t==="pointerover",Ae=t==="mouseout"||t==="pointerout",ge&&c!==qs&&(Xe=c.relatedTarget||c.fromElement)&&(vn(Xe)||Xe[hi]))break e;if((Ae||ge)&&(ge=Te.window===Te?Te:(ge=Te.ownerDocument)?ge.defaultView||ge.parentWindow:window,Ae?(Xe=c.relatedTarget||c.toElement,Ae=de,Xe=Xe?vn(Xe):null,Xe!==null&&(yn=d(Xe),at=Xe.tag,Xe!==yn||at!==5&&at!==27&&at!==6)&&(Xe=null)):(Ae=null,Xe=de),Ae!==Xe)){if(at=Qt,ve="onMouseLeave",oe="onMouseEnter",re="mouse",(t==="pointerout"||t==="pointerover")&&(at=Mt,ve="onPointerLeave",oe="onPointerEnter",re="pointer"),yn=Ae==null?ge:qi(Ae),fe=Xe==null?ge:qi(Xe),ge=new at(ve,re+"leave",Ae,c,Te),ge.target=yn,ge.relatedTarget=fe,ve=null,vn(Te)===de&&(at=new at(oe,re+"enter",Xe,c,Te),at.target=fe,at.relatedTarget=yn,ve=at),yn=ve,Ae&&Xe)t:{for(at=Db,oe=Ae,re=Xe,fe=0,ve=oe;ve;ve=at(ve))fe++;ve=0;for(var $e=re;$e;$e=at($e))ve++;for(;0<fe-ve;)oe=at(oe),fe--;for(;0<ve-fe;)re=at(re),ve--;for(;fe--;){if(oe===re||re!==null&&oe===re.alternate){at=oe;break t}oe=at(oe),re=at(re)}at=null}else at=null;Ae!==null&&o2(Se,ge,Ae,at,!1),Xe!==null&&yn!==null&&o2(Se,yn,Xe,at,!0)}}e:{if(ge=de?qi(de):window,Ae=ge.nodeName&&ge.nodeName.toLowerCase(),Ae==="select"||Ae==="input"&&ge.type==="file")var nn=kr;else if(ic(ge))if(Tu)nn=h;else{nn=a;var Ke=r}else Ae=ge.nodeName,!Ae||Ae.toLowerCase()!=="input"||ge.type!=="checkbox"&&ge.type!=="radio"?de&&on(de.elementType)&&(nn=kr):nn=l;if(nn&&(nn=nn(t,de))){Br(Se,nn,c,Te);break e}Ke&&Ke(t,ge,de),t==="focusout"&&de&&ge.type==="number"&&de.memoizedProps.value!=null&&z(ge,"number",ge.value)}switch(Ke=de?qi(de):window,t){case"focusin":(ic(Ke)||Ke.contentEditable==="true")&&(J=Ke,te=de,ce=null);break;case"focusout":ce=te=J=null;break;case"mousedown":ye=!0;break;case"contextmenu":case"mouseup":case"dragend":ye=!1,Pe(Se,c,Te);break;case"selectionchange":if(G)break;case"keydown":case"keyup":Pe(Se,c,Te)}var Tt;if(Yt)e:{switch(t){case"compositionstart":var Ft="onCompositionStart";break e;case"compositionend":Ft="onCompositionEnd";break e;case"compositionupdate":Ft="onCompositionUpdate";break e}Ft=void 0}else La?Js(t,c)&&(Ft="onCompositionEnd"):t==="keydown"&&c.keyCode===229&&(Ft="onCompositionStart");Ft&&(es&&c.locale!=="ko"&&(La||Ft!=="onCompositionStart"?Ft==="onCompositionEnd"&&La&&(Tt=Es()):(Dr=Te,Mr="value"in Dr?Dr.value:Dr.textContent,La=!0)),Ke=dh(de,Ft),0<Ke.length&&(Ft=new Zr(Ft,t,null,c,Te),Se.push({event:Ft,listeners:Ke}),Tt?Ft.data=Tt:(Tt=ts(c),Tt!==null&&(Ft.data=Tt)))),(Tt=lr?Ms(t,c):al(t,c))&&(Ft=dh(de,"onBeforeInput"),0<Ft.length&&(Ke=new Zr("onBeforeInput","beforeinput",null,c,Te),Se.push({event:Ke,listeners:Ft}),Ke.data=Tt)),Ib(Se,t,de,c,Te)}s2(Se,s)})}function Nc(t,s,c){return{instance:t,listener:s,currentTarget:c}}function dh(t,s){for(var c=s+"Capture",g=[];t!==null;){var E=t,w=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||w===null||(E=it(t,c),E!=null&&g.unshift(Nc(t,E,w)),E=it(t,s),E!=null&&g.push(Nc(t,E,w))),t.tag===3)return g;t=t.return}return[]}function Db(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function o2(t,s,c,g,E){for(var w=s._reactName,O=[];c!==null&&c!==g;){var U=c,Q=U.alternate,de=U.stateNode;if(U=U.tag,Q!==null&&Q===g)break;U!==5&&U!==26&&U!==27||de===null||(Q=de,E?(de=it(c,w),de!=null&&O.unshift(Nc(c,de,Q))):E||(de=it(c,w),de!=null&&O.push(Nc(c,de,Q)))),c=c.return}O.length!==0&&t.push({event:s,listeners:O})}var Mb=/\r\n?/g,Lb=/\u0000|\uFFFD/g;function l2(t){return(typeof t=="string"?t:""+t).replace(Mb,`
`).replace(Lb,"")}function c2(t,s){return s=l2(s),l2(t)===s}function xn(t,s,c,g,E,w){switch(c){case"children":typeof g=="string"?s==="body"||s==="textarea"&&g===""||Xi(t,g):(typeof g=="number"||typeof g=="bigint")&&s!=="body"&&Xi(t,""+g);break;case"className":Oi(t,"class",g);break;case"tabIndex":Oi(t,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Oi(t,c,g);break;case"style":Ze(t,g,w);break;case"data":if(s!=="object"){Oi(t,"data",g);break}case"src":case"href":if(g===""&&(s!=="a"||c!=="href")){t.removeAttribute(c);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){t.removeAttribute(c);break}g=Rs(""+g),t.setAttribute(c,g);break;case"action":case"formAction":if(typeof g=="function"){t.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(c==="formAction"?(s!=="input"&&xn(t,s,"name",E.name,E,null),xn(t,s,"formEncType",E.formEncType,E,null),xn(t,s,"formMethod",E.formMethod,E,null),xn(t,s,"formTarget",E.formTarget,E,null)):(xn(t,s,"encType",E.encType,E,null),xn(t,s,"method",E.method,E,null),xn(t,s,"target",E.target,E,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){t.removeAttribute(c);break}g=Rs(""+g),t.setAttribute(c,g);break;case"onClick":g!=null&&(t.onclick=Ki);break;case"onScroll":g!=null&&Pt("scroll",t);break;case"onScrollEnd":g!=null&&Pt("scrollend",t);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(o(61));if(c=g.__html,c!=null){if(E.children!=null)throw Error(o(60));t.innerHTML=c}}break;case"multiple":t.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":t.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){t.removeAttribute("xlink:href");break}c=Rs(""+g),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?t.setAttribute(c,""+g):t.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?t.setAttribute(c,""):t.removeAttribute(c);break;case"capture":case"download":g===!0?t.setAttribute(c,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?t.setAttribute(c,g):t.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?t.setAttribute(c,g):t.removeAttribute(c);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?t.removeAttribute(c):t.setAttribute(c,g);break;case"popover":Pt("beforetoggle",t),Pt("toggle",t),Is(t,"popover",g);break;case"xlinkActuate":Bn(t,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Bn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Bn(t,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Bn(t,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Bn(t,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Bn(t,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Bn(t,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Bn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Bn(t,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Is(t,"is",g);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=To.get(c)||c,Is(t,c,g))}}function A0(t,s,c,g,E,w){switch(c){case"style":Ze(t,g,w);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(o(61));if(c=g.__html,c!=null){if(E.children!=null)throw Error(o(60));t.innerHTML=c}}break;case"children":typeof g=="string"?Xi(t,g):(typeof g=="number"||typeof g=="bigint")&&Xi(t,""+g);break;case"onScroll":g!=null&&Pt("scroll",t);break;case"onScrollEnd":g!=null&&Pt("scrollend",t);break;case"onClick":g!=null&&(t.onclick=Ki);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ao.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(E=c.endsWith("Capture"),s=c.slice(2,E?c.length-7:void 0),w=t[wt]||null,w=w!=null?w[c]:null,typeof w=="function"&&t.removeEventListener(s,w,E),typeof g=="function")){typeof w!="function"&&w!==null&&(c in t?t[c]=null:t.hasAttribute(c)&&t.removeAttribute(c)),t.addEventListener(s,g,E);break e}c in t?t[c]=g:g===!0?t.setAttribute(c,""):Is(t,c,g)}}}function ki(t,s,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pt("error",t),Pt("load",t);var g=!1,E=!1,w;for(w in c)if(c.hasOwnProperty(w)){var O=c[w];if(O!=null)switch(w){case"src":g=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:xn(t,s,w,O,c,null)}}E&&xn(t,s,"srcSet",c.srcSet,c,null),g&&xn(t,s,"src",c.src,c,null);return;case"input":Pt("invalid",t);var U=w=O=E=null,Q=null,de=null;for(g in c)if(c.hasOwnProperty(g)){var Te=c[g];if(Te!=null)switch(g){case"name":E=Te;break;case"type":O=Te;break;case"checked":Q=Te;break;case"defaultChecked":de=Te;break;case"value":w=Te;break;case"defaultValue":U=Te;break;case"children":case"dangerouslySetInnerHTML":if(Te!=null)throw Error(o(137,s));break;default:xn(t,s,g,Te,c,null)}}ue(t,w,U,Q,de,O,E,!1);return;case"select":Pt("invalid",t),g=O=w=null;for(E in c)if(c.hasOwnProperty(E)&&(U=c[E],U!=null))switch(E){case"value":w=U;break;case"defaultValue":O=U;break;case"multiple":g=U;default:xn(t,s,E,U,c,null)}s=w,c=O,t.multiple=!!g,s!=null?Ye(t,!!g,s,!1):c!=null&&Ye(t,!!g,c,!0);return;case"textarea":Pt("invalid",t),w=E=g=null;for(O in c)if(c.hasOwnProperty(O)&&(U=c[O],U!=null))switch(O){case"value":g=U;break;case"defaultValue":E=U;break;case"children":w=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(o(91));break;default:xn(t,s,O,U,c,null)}si(t,g,E,w);return;case"option":for(Q in c)if(c.hasOwnProperty(Q)&&(g=c[Q],g!=null))switch(Q){case"selected":t.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:xn(t,s,Q,g,c,null)}return;case"dialog":Pt("beforetoggle",t),Pt("toggle",t),Pt("cancel",t),Pt("close",t);break;case"iframe":case"object":Pt("load",t);break;case"video":case"audio":for(g=0;g<Ic.length;g++)Pt(Ic[g],t);break;case"image":Pt("error",t),Pt("load",t);break;case"details":Pt("toggle",t);break;case"embed":case"source":case"link":Pt("error",t),Pt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(de in c)if(c.hasOwnProperty(de)&&(g=c[de],g!=null))switch(de){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:xn(t,s,de,g,c,null)}return;default:if(on(s)){for(Te in c)c.hasOwnProperty(Te)&&(g=c[Te],g!==void 0&&A0(t,s,Te,g,c,void 0));return}}for(U in c)c.hasOwnProperty(U)&&(g=c[U],g!=null&&xn(t,s,U,g,c,null))}function Pb(t,s,c,g){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,w=null,O=null,U=null,Q=null,de=null,Te=null;for(Ae in c){var Se=c[Ae];if(c.hasOwnProperty(Ae)&&Se!=null)switch(Ae){case"checked":break;case"value":break;case"defaultValue":Q=Se;default:g.hasOwnProperty(Ae)||xn(t,s,Ae,null,g,Se)}}for(var ge in g){var Ae=g[ge];if(Se=c[ge],g.hasOwnProperty(ge)&&(Ae!=null||Se!=null))switch(ge){case"type":w=Ae;break;case"name":E=Ae;break;case"checked":de=Ae;break;case"defaultChecked":Te=Ae;break;case"value":O=Ae;break;case"defaultValue":U=Ae;break;case"children":case"dangerouslySetInnerHTML":if(Ae!=null)throw Error(o(137,s));break;default:Ae!==Se&&xn(t,s,ge,Ae,g,Se)}}Gn(t,O,U,Q,de,Te,w,E);return;case"select":Ae=O=U=ge=null;for(w in c)if(Q=c[w],c.hasOwnProperty(w)&&Q!=null)switch(w){case"value":break;case"multiple":Ae=Q;default:g.hasOwnProperty(w)||xn(t,s,w,null,g,Q)}for(E in g)if(w=g[E],Q=c[E],g.hasOwnProperty(E)&&(w!=null||Q!=null))switch(E){case"value":ge=w;break;case"defaultValue":U=w;break;case"multiple":O=w;default:w!==Q&&xn(t,s,E,w,g,Q)}s=U,c=O,g=Ae,ge!=null?Ye(t,!!c,ge,!1):!!g!=!!c&&(s!=null?Ye(t,!!c,s,!0):Ye(t,!!c,c?[]:"",!1));return;case"textarea":Ae=ge=null;for(U in c)if(E=c[U],c.hasOwnProperty(U)&&E!=null&&!g.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:xn(t,s,U,null,g,E)}for(O in g)if(E=g[O],w=c[O],g.hasOwnProperty(O)&&(E!=null||w!=null))switch(O){case"value":ge=E;break;case"defaultValue":Ae=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(o(91));break;default:E!==w&&xn(t,s,O,E,g,w)}qn(t,ge,Ae);return;case"option":for(var Xe in c)if(ge=c[Xe],c.hasOwnProperty(Xe)&&ge!=null&&!g.hasOwnProperty(Xe))switch(Xe){case"selected":t.selected=!1;break;default:xn(t,s,Xe,null,g,ge)}for(Q in g)if(ge=g[Q],Ae=c[Q],g.hasOwnProperty(Q)&&ge!==Ae&&(ge!=null||Ae!=null))switch(Q){case"selected":t.selected=ge&&typeof ge!="function"&&typeof ge!="symbol";break;default:xn(t,s,Q,ge,g,Ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var at in c)ge=c[at],c.hasOwnProperty(at)&&ge!=null&&!g.hasOwnProperty(at)&&xn(t,s,at,null,g,ge);for(de in g)if(ge=g[de],Ae=c[de],g.hasOwnProperty(de)&&ge!==Ae&&(ge!=null||Ae!=null))switch(de){case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(o(137,s));break;default:xn(t,s,de,ge,g,Ae)}return;default:if(on(s)){for(var yn in c)ge=c[yn],c.hasOwnProperty(yn)&&ge!==void 0&&!g.hasOwnProperty(yn)&&A0(t,s,yn,void 0,g,ge);for(Te in g)ge=g[Te],Ae=c[Te],!g.hasOwnProperty(Te)||ge===Ae||ge===void 0&&Ae===void 0||A0(t,s,Te,ge,g,Ae);return}}for(var oe in c)ge=c[oe],c.hasOwnProperty(oe)&&ge!=null&&!g.hasOwnProperty(oe)&&xn(t,s,oe,null,g,ge);for(Se in g)ge=g[Se],Ae=c[Se],!g.hasOwnProperty(Se)||ge===Ae||ge==null&&Ae==null||xn(t,s,Se,ge,g,Ae)}function u2(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Bb(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,c=performance.getEntriesByType("resource"),g=0;g<c.length;g++){var E=c[g],w=E.transferSize,O=E.initiatorType,U=E.duration;if(w&&U&&u2(O)){for(O=0,U=E.responseEnd,g+=1;g<c.length;g++){var Q=c[g],de=Q.startTime;if(de>U)break;var Te=Q.transferSize,Se=Q.initiatorType;Te&&u2(Se)&&(Q=Q.responseEnd,O+=Te*(Q<U?1:(U-de)/(Q-de)))}if(--g,s+=8*(w+O)/(E.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var w0=null,b0=null;function gh(t){return t.nodeType===9?t:t.ownerDocument}function h2(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function f2(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function T0(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var v0=null;function kb(){var t=window.event;return t&&t.type==="popstate"?t===v0?!1:(v0=t,!0):(v0=null,!1)}var d2=typeof setTimeout=="function"?setTimeout:void 0,Ub=typeof clearTimeout=="function"?clearTimeout:void 0,g2=typeof Promise=="function"?Promise:void 0,Vb=typeof queueMicrotask=="function"?queueMicrotask:typeof g2<"u"?function(t){return g2.resolve(null).then(t).catch(jb)}:d2;function jb(t){setTimeout(function(){throw t})}function Ja(t){return t==="head"}function m2(t,s){var c=s,g=0;do{var E=c.nextSibling;if(t.removeChild(c),E&&E.nodeType===8)if(c=E.data,c==="/$"||c==="/&"){if(g===0){t.removeChild(E),Dl(s);return}g--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")g++;else if(c==="html")Rc(t.ownerDocument.documentElement);else if(c==="head"){c=t.ownerDocument.head,Rc(c);for(var w=c.firstChild;w;){var O=w.nextSibling,U=w.nodeName;w[Kr]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&w.rel.toLowerCase()==="stylesheet"||c.removeChild(w),w=O}}else c==="body"&&Rc(t.ownerDocument.body);c=E}while(c);Dl(s)}function p2(t,s){var c=t;t=0;do{var g=c.nextSibling;if(c.nodeType===1?s?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(s?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),g&&g.nodeType===8)if(c=g.data,c==="/$"){if(t===0)break;t--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||t++;c=g}while(c)}function C0(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var c=s;switch(s=s.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":C0(c),Ni(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}t.removeChild(c)}}function Fb(t,s,c,g){for(;t.nodeType===1;){var E=c;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!g&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(g){if(!t[Kr])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(w=t.getAttribute("rel"),w==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(w!==E.rel||t.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||t.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||t.getAttribute("title")!==(E.title==null?null:E.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(w=t.getAttribute("src"),(w!==(E.src==null?null:E.src)||t.getAttribute("type")!==(E.type==null?null:E.type)||t.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&w&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var w=E.name==null?null:""+E.name;if(E.type==="hidden"&&t.getAttribute("name")===w)return t}else return t;if(t=ls(t.nextSibling),t===null)break}return null}function zb(t,s,c){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!c||(t=ls(t.nextSibling),t===null))return null;return t}function x2(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=ls(t.nextSibling),t===null))return null;return t}function S0(t){return t.data==="$?"||t.data==="$~"}function I0(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Hb(t,s){var c=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||c.readyState!=="loading")s();else{var g=function(){s(),c.removeEventListener("DOMContentLoaded",g)};c.addEventListener("DOMContentLoaded",g),t._reactRetry=g}}function ls(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var N0=null;function y2(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var c=t.data;if(c==="/$"||c==="/&"){if(s===0)return ls(t.nextSibling);s--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||s++}t=t.nextSibling}return null}function E2(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var c=t.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(s===0)return t;s--}else c!=="/$"&&c!=="/&"||s++}t=t.previousSibling}return null}function _2(t,s,c){switch(s=gh(c),t){case"html":if(t=s.documentElement,!t)throw Error(o(452));return t;case"head":if(t=s.head,!t)throw Error(o(453));return t;case"body":if(t=s.body,!t)throw Error(o(454));return t;default:throw Error(o(451))}}function Rc(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Ni(t)}var cs=new Map,A2=new Set;function mh(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var pa=be.d;be.d={f:Gb,r:qb,D:Yb,C:Xb,L:Kb,m:Wb,X:Zb,S:Qb,M:Jb};function Gb(){var t=pa.f(),s=ah();return t||s}function qb(t){var s=Ot(t);s!==null&&s.tag===5&&s.type==="form"?Um(s):pa.r(t)}var Nl=typeof document>"u"?null:document;function w2(t,s,c){var g=Nl;if(g&&typeof s=="string"&&s){var E=bt(s);E='link[rel="'+t+'"][href="'+E+'"]',typeof c=="string"&&(E+='[crossorigin="'+c+'"]'),A2.has(E)||(A2.add(E),t={rel:t,crossOrigin:c,href:s},g.querySelector(E)===null&&(s=g.createElement("link"),ki(s,"link",t),Pn(s),g.head.appendChild(s)))}}function Yb(t){pa.D(t),w2("dns-prefetch",t,null)}function Xb(t,s){pa.C(t,s),w2("preconnect",t,s)}function Kb(t,s,c){pa.L(t,s,c);var g=Nl;if(g&&t&&s){var E='link[rel="preload"][as="'+bt(s)+'"]';s==="image"&&c&&c.imageSrcSet?(E+='[imagesrcset="'+bt(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(E+='[imagesizes="'+bt(c.imageSizes)+'"]')):E+='[href="'+bt(t)+'"]';var w=E;switch(s){case"style":w=Rl(t);break;case"script":w=Ol(t)}cs.has(w)||(t=I({rel:"preload",href:s==="image"&&c&&c.imageSrcSet?void 0:t,as:s},c),cs.set(w,t),g.querySelector(E)!==null||s==="style"&&g.querySelector(Oc(w))||s==="script"&&g.querySelector(Dc(w))||(s=g.createElement("link"),ki(s,"link",t),Pn(s),g.head.appendChild(s)))}}function Wb(t,s){pa.m(t,s);var c=Nl;if(c&&t){var g=s&&typeof s.as=="string"?s.as:"script",E='link[rel="modulepreload"][as="'+bt(g)+'"][href="'+bt(t)+'"]',w=E;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Ol(t)}if(!cs.has(w)&&(t=I({rel:"modulepreload",href:t},s),cs.set(w,t),c.querySelector(E)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Dc(w)))return}g=c.createElement("link"),ki(g,"link",t),Pn(g),c.head.appendChild(g)}}}function Qb(t,s,c){pa.S(t,s,c);var g=Nl;if(g&&t){var E=Ai(g).hoistableStyles,w=Rl(t);s=s||"default";var O=E.get(w);if(!O){var U={loading:0,preload:null};if(O=g.querySelector(Oc(w)))U.loading=5;else{t=I({rel:"stylesheet",href:t,"data-precedence":s},c),(c=cs.get(w))&&R0(t,c);var Q=O=g.createElement("link");Pn(Q),ki(Q,"link",t),Q._p=new Promise(function(de,Te){Q.onload=de,Q.onerror=Te}),Q.addEventListener("load",function(){U.loading|=1}),Q.addEventListener("error",function(){U.loading|=2}),U.loading|=4,ph(O,s,g)}O={type:"stylesheet",instance:O,count:1,state:U},E.set(w,O)}}}function Zb(t,s){pa.X(t,s);var c=Nl;if(c&&t){var g=Ai(c).hoistableScripts,E=Ol(t),w=g.get(E);w||(w=c.querySelector(Dc(E)),w||(t=I({src:t,async:!0},s),(s=cs.get(E))&&O0(t,s),w=c.createElement("script"),Pn(w),ki(w,"link",t),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},g.set(E,w))}}function Jb(t,s){pa.M(t,s);var c=Nl;if(c&&t){var g=Ai(c).hoistableScripts,E=Ol(t),w=g.get(E);w||(w=c.querySelector(Dc(E)),w||(t=I({src:t,async:!0,type:"module"},s),(s=cs.get(E))&&O0(t,s),w=c.createElement("script"),Pn(w),ki(w,"link",t),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},g.set(E,w))}}function b2(t,s,c,g){var E=(E=Le.current)?mh(E):null;if(!E)throw Error(o(446));switch(t){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(s=Rl(c.href),c=Ai(E).hoistableStyles,g=c.get(s),g||(g={type:"style",instance:null,count:0,state:null},c.set(s,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){t=Rl(c.href);var w=Ai(E).hoistableStyles,O=w.get(t);if(O||(E=E.ownerDocument||E,O={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(t,O),(w=E.querySelector(Oc(t)))&&!w._p&&(O.instance=w,O.state.loading=5),cs.has(t)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},cs.set(t,c),w||$b(E,t,c,O.state))),s&&g===null)throw Error(o(528,""));return O}if(s&&g!==null)throw Error(o(529,""));return null;case"script":return s=c.async,c=c.src,typeof c=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Ol(c),c=Ai(E).hoistableScripts,g=c.get(s),g||(g={type:"script",instance:null,count:0,state:null},c.set(s,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,t))}}function Rl(t){return'href="'+bt(t)+'"'}function Oc(t){return'link[rel="stylesheet"]['+t+"]"}function T2(t){return I({},t,{"data-precedence":t.precedence,precedence:null})}function $b(t,s,c,g){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?g.loading=1:(s=t.createElement("link"),g.preload=s,s.addEventListener("load",function(){return g.loading|=1}),s.addEventListener("error",function(){return g.loading|=2}),ki(s,"link",c),Pn(s),t.head.appendChild(s))}function Ol(t){return'[src="'+bt(t)+'"]'}function Dc(t){return"script[async]"+t}function v2(t,s,c){if(s.count++,s.instance===null)switch(s.type){case"style":var g=t.querySelector('style[data-href~="'+bt(c.href)+'"]');if(g)return s.instance=g,Pn(g),g;var E=I({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return g=(t.ownerDocument||t).createElement("style"),Pn(g),ki(g,"style",E),ph(g,c.precedence,t),s.instance=g;case"stylesheet":E=Rl(c.href);var w=t.querySelector(Oc(E));if(w)return s.state.loading|=4,s.instance=w,Pn(w),w;g=T2(c),(E=cs.get(E))&&R0(g,E),w=(t.ownerDocument||t).createElement("link"),Pn(w);var O=w;return O._p=new Promise(function(U,Q){O.onload=U,O.onerror=Q}),ki(w,"link",g),s.state.loading|=4,ph(w,c.precedence,t),s.instance=w;case"script":return w=Ol(c.src),(E=t.querySelector(Dc(w)))?(s.instance=E,Pn(E),E):(g=c,(E=cs.get(w))&&(g=I({},c),O0(g,E)),t=t.ownerDocument||t,E=t.createElement("script"),Pn(E),ki(E,"link",g),t.head.appendChild(E),s.instance=E);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(g=s.instance,s.state.loading|=4,ph(g,c.precedence,t));return s.instance}function ph(t,s,c){for(var g=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=g.length?g[g.length-1]:null,w=E,O=0;O<g.length;O++){var U=g[O];if(U.dataset.precedence===s)w=U;else if(w!==E)break}w?w.parentNode.insertBefore(t,w.nextSibling):(s=c.nodeType===9?c.head:c,s.insertBefore(t,s.firstChild))}function R0(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function O0(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var xh=null;function C2(t,s,c){if(xh===null){var g=new Map,E=xh=new Map;E.set(c,g)}else E=xh,g=E.get(c),g||(g=new Map,E.set(c,g));if(g.has(t))return g;for(g.set(t,null),c=c.getElementsByTagName(t),E=0;E<c.length;E++){var w=c[E];if(!(w[Kr]||w[Tn]||t==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var O=w.getAttribute(s)||"";O=t+O;var U=g.get(O);U?U.push(w):g.set(O,[w])}}return g}function S2(t,s,c){t=t.ownerDocument||t,t.head.insertBefore(c,s==="title"?t.querySelector("head > title"):null)}function eT(t,s,c){if(c===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function I2(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function tT(t,s,c,g){if(c.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var E=Rl(g.href),w=s.querySelector(Oc(E));if(w){s=w._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=yh.bind(t),s.then(t,t)),c.state.loading|=4,c.instance=w,Pn(w);return}w=s.ownerDocument||s,g=T2(g),(E=cs.get(E))&&R0(g,E),w=w.createElement("link"),Pn(w);var O=w;O._p=new Promise(function(U,Q){O.onload=U,O.onerror=Q}),ki(w,"link",g),c.instance=w}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(c,s),(s=c.state.preload)&&(c.state.loading&3)===0&&(t.count++,c=yh.bind(t),s.addEventListener("load",c),s.addEventListener("error",c))}}var D0=0;function nT(t,s){return t.stylesheets&&t.count===0&&_h(t,t.stylesheets),0<t.count||0<t.imgCount?function(c){var g=setTimeout(function(){if(t.stylesheets&&_h(t,t.stylesheets),t.unsuspend){var w=t.unsuspend;t.unsuspend=null,w()}},6e4+s);0<t.imgBytes&&D0===0&&(D0=62500*Bb());var E=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&_h(t,t.stylesheets),t.unsuspend)){var w=t.unsuspend;t.unsuspend=null,w()}},(t.imgBytes>D0?50:800)+s);return t.unsuspend=c,function(){t.unsuspend=null,clearTimeout(g),clearTimeout(E)}}:null}function yh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)_h(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Eh=null;function _h(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Eh=new Map,s.forEach(iT,t),Eh=null,yh.call(t))}function iT(t,s){if(!(s.state.loading&4)){var c=Eh.get(t);if(c)var g=c.get(null);else{c=new Map,Eh.set(t,c);for(var E=t.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<E.length;w++){var O=E[w];(O.nodeName==="LINK"||O.getAttribute("media")!=="not all")&&(c.set(O.dataset.precedence,O),g=O)}g&&c.set(null,g)}E=s.instance,O=E.getAttribute("data-precedence"),w=c.get(O)||g,w===g&&c.set(null,E),c.set(O,E),this.count++,g=yh.bind(this),E.addEventListener("load",g),E.addEventListener("error",g),w?w.parentNode.insertBefore(E,w.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(E,t.firstChild)),s.state.loading|=4}}var Mc={$$typeof:$,Provider:null,Consumer:null,_currentValue:qe,_currentValue2:qe,_threadCount:0};function rT(t,s,c,g,E,w,O,U,Q){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_i(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_i(0),this.hiddenUpdates=_i(null),this.identifierPrefix=g,this.onUncaughtError=E,this.onCaughtError=w,this.onRecoverableError=O,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Q,this.incompleteTransitions=new Map}function N2(t,s,c,g,E,w,O,U,Q,de,Te,Se){return t=new rT(t,s,c,O,Q,de,Te,Se,U),s=1,w===!0&&(s|=24),w=Ur(3,null,null,s),t.current=w,w.stateNode=t,s=hd(),s.refCount++,t.pooledCache=s,s.refCount++,w.memoizedState={element:g,isDehydrated:c,cache:s},md(w),t}function R2(t){return t?(t=ll,t):ll}function O2(t,s,c,g,E,w){E=R2(E),g.context===null?g.context=E:g.pendingContext=E,g=Fa(s),g.payload={element:c},w=w===void 0?null:w,w!==null&&(g.callback=w),c=za(t,g,s),c!==null&&(Sr(c,t,s),hc(c,t,s))}function D2(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var c=t.retryLane;t.retryLane=c!==0&&c<s?c:s}}function M0(t,s){D2(t,s),(t=t.alternate)&&D2(t,s)}function M2(t){if(t.tag===13||t.tag===31){var s=Ro(t,67108864);s!==null&&Sr(s,t,67108864),M0(t,67108864)}}function L2(t){if(t.tag===13||t.tag===31){var s=Hr();s=nt(s);var c=Ro(t,s);c!==null&&Sr(c,t,s),M0(t,s)}}var Ah=!0;function sT(t,s,c,g){var E=pe.T;pe.T=null;var w=be.p;try{be.p=2,L0(t,s,c,g)}finally{be.p=w,pe.T=E}}function aT(t,s,c,g){var E=pe.T;pe.T=null;var w=be.p;try{be.p=8,L0(t,s,c,g)}finally{be.p=w,pe.T=E}}function L0(t,s,c,g){if(Ah){var E=P0(g);if(E===null)_0(t,s,g,wh,c),B2(t,g);else if(lT(E,t,s,c,g))g.stopPropagation();else if(B2(t,g),s&4&&-1<oT.indexOf(t)){for(;E!==null;){var w=Ot(E);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var O=ir(w.pendingLanes);if(O!==0){var U=w;for(U.pendingLanes|=2,U.entangledLanes|=2;O;){var Q=1<<31-rt(O);U.entanglements[1]|=Q,O&=~Q}ks(w),(sn&6)===0&&(rh=hn()+500,Sc(0))}}break;case 31:case 13:U=Ro(w,2),U!==null&&Sr(U,w,2),ah(),M0(w,2)}if(w=P0(g),w===null&&_0(t,s,g,wh,c),w===E)break;E=w}E!==null&&g.stopPropagation()}else _0(t,s,g,null,c)}}function P0(t){return t=Er(t),B0(t)}var wh=null;function B0(t){if(wh=null,t=vn(t),t!==null){var s=d(t);if(s===null)t=null;else{var c=s.tag;if(c===13){if(t=y(s),t!==null)return t;t=null}else if(c===31){if(t=v(s),t!==null)return t;t=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return wh=t,null}function P2(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(mr()){case ui:return 2;case ys:return 8;case ri:case Fn:return 32;case Cs:return 268435456;default:return 32}default:return 32}}var k0=!1,$a=null,eo=null,to=null,Lc=new Map,Pc=new Map,no=[],oT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function B2(t,s){switch(t){case"focusin":case"focusout":$a=null;break;case"dragenter":case"dragleave":eo=null;break;case"mouseover":case"mouseout":to=null;break;case"pointerover":case"pointerout":Lc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(s.pointerId)}}function Bc(t,s,c,g,E,w){return t===null||t.nativeEvent!==w?(t={blockedOn:s,domEventName:c,eventSystemFlags:g,nativeEvent:w,targetContainers:[E]},s!==null&&(s=Ot(s),s!==null&&M2(s)),t):(t.eventSystemFlags|=g,s=t.targetContainers,E!==null&&s.indexOf(E)===-1&&s.push(E),t)}function lT(t,s,c,g,E){switch(s){case"focusin":return $a=Bc($a,t,s,c,g,E),!0;case"dragenter":return eo=Bc(eo,t,s,c,g,E),!0;case"mouseover":return to=Bc(to,t,s,c,g,E),!0;case"pointerover":var w=E.pointerId;return Lc.set(w,Bc(Lc.get(w)||null,t,s,c,g,E)),!0;case"gotpointercapture":return w=E.pointerId,Pc.set(w,Bc(Pc.get(w)||null,t,s,c,g,E)),!0}return!1}function k2(t){var s=vn(t.target);if(s!==null){var c=d(s);if(c!==null){if(s=c.tag,s===13){if(s=y(c),s!==null){t.blockedOn=s,Ue(t.priority,function(){L2(c)});return}}else if(s===31){if(s=v(c),s!==null){t.blockedOn=s,Ue(t.priority,function(){L2(c)});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){t.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}t.blockedOn=null}function bh(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var c=P0(t.nativeEvent);if(c===null){c=t.nativeEvent;var g=new c.constructor(c.type,c);qs=g,c.target.dispatchEvent(g),qs=null}else return s=Ot(c),s!==null&&M2(s),t.blockedOn=c,!1;s.shift()}return!0}function U2(t,s,c){bh(t)&&c.delete(s)}function cT(){k0=!1,$a!==null&&bh($a)&&($a=null),eo!==null&&bh(eo)&&(eo=null),to!==null&&bh(to)&&(to=null),Lc.forEach(U2),Pc.forEach(U2)}function Th(t,s){t.blockedOn===s&&(t.blockedOn=null,k0||(k0=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,cT)))}var vh=null;function V2(t){vh!==t&&(vh=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){vh===t&&(vh=null);for(var s=0;s<t.length;s+=3){var c=t[s],g=t[s+1],E=t[s+2];if(typeof g!="function"){if(B0(g||c)===null)continue;break}var w=Ot(c);w!==null&&(t.splice(s,3),s-=3,Pd(w,{pending:!0,data:E,method:c.method,action:g},g,E))}}))}function Dl(t){function s(Q){return Th(Q,t)}$a!==null&&Th($a,t),eo!==null&&Th(eo,t),to!==null&&Th(to,t),Lc.forEach(s),Pc.forEach(s);for(var c=0;c<no.length;c++){var g=no[c];g.blockedOn===t&&(g.blockedOn=null)}for(;0<no.length&&(c=no[0],c.blockedOn===null);)k2(c),c.blockedOn===null&&no.shift();if(c=(t.ownerDocument||t).$$reactFormReplay,c!=null)for(g=0;g<c.length;g+=3){var E=c[g],w=c[g+1],O=E[wt]||null;if(typeof w=="function")O||V2(c);else if(O){var U=null;if(w&&w.hasAttribute("formAction")){if(E=w,O=w[wt]||null)U=O.formAction;else if(B0(E)!==null)continue}else U=O.action;typeof U=="function"?c[g+1]=U:(c.splice(g,3),g-=3),V2(c)}}}function j2(){function t(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(O){return E=O})},focusReset:"manual",scroll:"manual"})}function s(){E!==null&&(E(),E=null),g||setTimeout(c,20)}function c(){if(!g&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,E=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(c,100),function(){g=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),E!==null&&(E(),E=null)}}}function U0(t){this._internalRoot=t}Ch.prototype.render=U0.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(o(409));var c=s.current,g=Hr();O2(c,g,t,s,null,null)},Ch.prototype.unmount=U0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;O2(t.current,2,null,t,null,null),ah(),s[hi]=null}};function Ch(t){this._internalRoot=t}Ch.prototype.unstable_scheduleHydration=function(t){if(t){var s=en();t={blockedOn:null,target:t,priority:s};for(var c=0;c<no.length&&s!==0&&s<no[c].priority;c++);no.splice(c,0,t),c===0&&k2(t)}};var F2=e.version;if(F2!=="19.2.3")throw Error(o(527,F2,"19.2.3"));be.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=_(s),t=t!==null?C(t):null,t=t===null?null:t.stateNode,t};var uT={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:pe,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sh.isDisabled&&Sh.supportsFiber)try{Wt=Sh.inject(uT),Oe=Sh}catch{}}return Uc.createRoot=function(t,s){if(!u(t))throw Error(o(299));var c=!1,g="",E=Km,w=Wm,O=Qm;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(g=s.identifierPrefix),s.onUncaughtError!==void 0&&(E=s.onUncaughtError),s.onCaughtError!==void 0&&(w=s.onCaughtError),s.onRecoverableError!==void 0&&(O=s.onRecoverableError)),s=N2(t,1,!1,null,null,c,g,null,E,w,O,j2),t[hi]=s.current,E0(t),new U0(s)},Uc.hydrateRoot=function(t,s,c){if(!u(t))throw Error(o(299));var g=!1,E="",w=Km,O=Wm,U=Qm,Q=null;return c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(E=c.identifierPrefix),c.onUncaughtError!==void 0&&(w=c.onUncaughtError),c.onCaughtError!==void 0&&(O=c.onCaughtError),c.onRecoverableError!==void 0&&(U=c.onRecoverableError),c.formState!==void 0&&(Q=c.formState)),s=N2(t,1,!0,s,c??null,g,E,Q,w,O,U,j2),s.context=R2(null),c=s.current,g=Hr(),g=nt(g),E=Fa(g),E.callback=null,za(c,E,g),c=g,s.current.lanes=c,xr(s,c),ks(s),t[hi]=s.current,E0(t),new Ch(s)},Uc.version="19.2.3",Uc}var Z2;function AT(){if(Z2)return F0.exports;Z2=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),F0.exports=_T(),F0.exports}var wT=AT();const bT=H1(wT);/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var J2="popstate";function TT(i={}){function e(u,d){let{pathname:y="/",search:v="",hash:b=""}=$o(u.location.hash.substring(1));return!y.startsWith("/")&&!y.startsWith(".")&&(y="/"+y),o1("",{pathname:y,search:v,hash:b},d.state&&d.state.usr||null,d.state&&d.state.key||"default")}function n(u,d){let y=u.document.querySelector("base"),v="";if(y&&y.getAttribute("href")){let b=u.location.href,_=b.indexOf("#");v=_===-1?b:b.slice(0,_)}return v+"#"+(typeof d=="string"?d:nu(d))}function o(u,d){fs(u.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(d)})`)}return CT(e,n,o,i)}function Kn(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function fs(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function vT(){return Math.random().toString(36).substring(2,10)}function $2(i,e){return{usr:i.state,key:i.key,idx:e}}function o1(i,e,n=null,o){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?$o(e):e,state:n,key:e&&e.key||o||vT()}}function nu({pathname:i="/",search:e="",hash:n=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function $o(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substring(n),i=i.substring(0,n));let o=i.indexOf("?");o>=0&&(e.search=i.substring(o),i=i.substring(0,o)),i&&(e.pathname=i)}return e}function CT(i,e,n,o={}){let{window:u=document.defaultView,v5Compat:d=!1}=o,y=u.history,v="POP",b=null,_=C();_==null&&(_=0,y.replaceState({...y.state,idx:_},""));function C(){return(y.state||{idx:null}).idx}function I(){v="POP";let Y=C(),ae=Y==null?null:Y-_;_=Y,b&&b({action:v,location:K.location,delta:ae})}function L(Y,ae){v="PUSH";let me=o1(K.location,Y,ae);n&&n(me,Y),_=C()+1;let $=$2(me,_),_e=K.createHref(me);try{y.pushState($,"",_e)}catch(je){if(je instanceof DOMException&&je.name==="DataCloneError")throw je;u.location.assign(_e)}d&&b&&b({action:v,location:K.location,delta:1})}function B(Y,ae){v="REPLACE";let me=o1(K.location,Y,ae);n&&n(me,Y),_=C();let $=$2(me,_),_e=K.createHref(me);y.replaceState($,"",_e),d&&b&&b({action:v,location:K.location,delta:0})}function q(Y){return ST(Y)}let K={get action(){return v},get location(){return i(u,y)},listen(Y){if(b)throw new Error("A history only accepts one active listener");return u.addEventListener(J2,I),b=Y,()=>{u.removeEventListener(J2,I),b=null}},createHref(Y){return e(u,Y)},createURL:q,encodeLocation(Y){let ae=q(Y);return{pathname:ae.pathname,search:ae.search,hash:ae.hash}},push:L,replace:B,go(Y){return y.go(Y)}};return K}function ST(i,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Kn(n,"No window.location.(origin|href) available to create URL");let o=typeof i=="string"?i:nu(i);return o=o.replace(/ $/,"%20"),!e&&o.startsWith("//")&&(o=n+o),new URL(o,n)}function GE(i,e,n="/"){return IT(i,e,n,!1)}function IT(i,e,n,o){let u=typeof e=="string"?$o(e):e,d=_a(u.pathname||"/",n);if(d==null)return null;let y=qE(i);NT(y);let v=null;for(let b=0;v==null&&b<y.length;++b){let _=jT(d);v=UT(y[b],_,o)}return v}function qE(i,e=[],n=[],o="",u=!1){let d=(y,v,b=u,_)=>{let C={relativePath:_===void 0?y.path||"":_,caseSensitive:y.caseSensitive===!0,childrenIndex:v,route:y};if(C.relativePath.startsWith("/")){if(!C.relativePath.startsWith(o)&&b)return;Kn(C.relativePath.startsWith(o),`Absolute route path "${C.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),C.relativePath=C.relativePath.slice(o.length)}let I=ya([o,C.relativePath]),L=n.concat(C);y.children&&y.children.length>0&&(Kn(y.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${I}".`),qE(y.children,e,L,I,b)),!(y.path==null&&!y.index)&&e.push({path:I,score:BT(I,y.index),routesMeta:L})};return i.forEach((y,v)=>{var b;if(y.path===""||!((b=y.path)!=null&&b.includes("?")))d(y,v);else for(let _ of YE(y.path))d(y,v,!0,_)}),e}function YE(i){let e=i.split("/");if(e.length===0)return[];let[n,...o]=e,u=n.endsWith("?"),d=n.replace(/\?$/,"");if(o.length===0)return u?[d,""]:[d];let y=YE(o.join("/")),v=[];return v.push(...y.map(b=>b===""?d:[d,b].join("/"))),u&&v.push(...y),v.map(b=>i.startsWith("/")&&b===""?"/":b)}function NT(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:kT(e.routesMeta.map(o=>o.childrenIndex),n.routesMeta.map(o=>o.childrenIndex)))}var RT=/^:[\w-]+$/,OT=3,DT=2,MT=1,LT=10,PT=-2,ex=i=>i==="*";function BT(i,e){let n=i.split("/"),o=n.length;return n.some(ex)&&(o+=PT),e&&(o+=DT),n.filter(u=>!ex(u)).reduce((u,d)=>u+(RT.test(d)?OT:d===""?MT:LT),o)}function kT(i,e){return i.length===e.length&&i.slice(0,-1).every((o,u)=>o===e[u])?i[i.length-1]-e[e.length-1]:0}function UT(i,e,n=!1){let{routesMeta:o}=i,u={},d="/",y=[];for(let v=0;v<o.length;++v){let b=o[v],_=v===o.length-1,C=d==="/"?e:e.slice(d.length)||"/",I=Qh({path:b.relativePath,caseSensitive:b.caseSensitive,end:_},C),L=b.route;if(!I&&_&&n&&!o[o.length-1].route.index&&(I=Qh({path:b.relativePath,caseSensitive:b.caseSensitive,end:!1},C)),!I)return null;Object.assign(u,I.params),y.push({params:u,pathname:ya([d,I.pathname]),pathnameBase:GT(ya([d,I.pathnameBase])),route:L}),I.pathnameBase!=="/"&&(d=ya([d,I.pathnameBase]))}return y}function Qh(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,o]=VT(i.path,i.caseSensitive,i.end),u=e.match(n);if(!u)return null;let d=u[0],y=d.replace(/(.)\/+$/,"$1"),v=u.slice(1);return{params:o.reduce((_,{paramName:C,isOptional:I},L)=>{if(C==="*"){let q=v[L]||"";y=d.slice(0,d.length-q.length).replace(/(.)\/+$/,"$1")}const B=v[L];return I&&!B?_[C]=void 0:_[C]=(B||"").replace(/%2F/g,"/"),_},{}),pathname:d,pathnameBase:y,pattern:i}}function VT(i,e=!1,n=!0){fs(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let o=[],u="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(y,v,b)=>(o.push({paramName:v,isOptional:b!=null}),b?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(o.push({paramName:"*"}),u+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?u+="\\/*$":i!==""&&i!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,e?void 0:"i"),o]}function jT(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return fs(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function _a(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,o=i.charAt(n);return o&&o!=="/"?null:i.slice(n)||"/"}var XE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,FT=i=>XE.test(i);function zT(i,e="/"){let{pathname:n,search:o="",hash:u=""}=typeof i=="string"?$o(i):i,d;if(n)if(FT(n))d=n;else{if(n.includes("//")){let y=n;n=n.replace(/\/\/+/g,"/"),fs(!1,`Pathnames cannot have embedded double slashes - normalizing ${y} -> ${n}`)}n.startsWith("/")?d=tx(n.substring(1),"/"):d=tx(n,e)}else d=e;return{pathname:d,search:qT(o),hash:YT(u)}}function tx(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(u=>{u===".."?n.length>1&&n.pop():u!=="."&&n.push(u)}),n.length>1?n.join("/"):"/"}function q0(i,e,n,o){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function HT(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function KE(i){let e=HT(i);return e.map((n,o)=>o===e.length-1?n.pathname:n.pathnameBase)}function WE(i,e,n,o=!1){let u;typeof i=="string"?u=$o(i):(u={...i},Kn(!u.pathname||!u.pathname.includes("?"),q0("?","pathname","search",u)),Kn(!u.pathname||!u.pathname.includes("#"),q0("#","pathname","hash",u)),Kn(!u.search||!u.search.includes("#"),q0("#","search","hash",u)));let d=i===""||u.pathname==="",y=d?"/":u.pathname,v;if(y==null)v=n;else{let I=e.length-1;if(!o&&y.startsWith("..")){let L=y.split("/");for(;L[0]==="..";)L.shift(),I-=1;u.pathname=L.join("/")}v=I>=0?e[I]:"/"}let b=zT(u,v),_=y&&y!=="/"&&y.endsWith("/"),C=(d||y===".")&&n.endsWith("/");return!b.pathname.endsWith("/")&&(_||C)&&(b.pathname+="/"),b}var ya=i=>i.join("/").replace(/\/\/+/g,"/"),GT=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),qT=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,YT=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i,XT=class{constructor(i,e,n,o=!1){this.status=i,this.statusText=e||"",this.internal=o,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function KT(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}function WT(i){return i.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var QE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ZE(i,e){let n=i;if(typeof n!="string"||!XE.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let o=n,u=!1;if(QE)try{let d=new URL(window.location.href),y=n.startsWith("//")?new URL(d.protocol+n):new URL(n),v=_a(y.pathname,e);y.origin===d.origin&&v!=null?n=v+y.search+y.hash:u=!0}catch{fs(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:o,isExternal:u,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var JE=["POST","PUT","PATCH","DELETE"];new Set(JE);var QT=["GET",...JE];new Set(QT);var Zl=se.createContext(null);Zl.displayName="DataRouter";var Cf=se.createContext(null);Cf.displayName="DataRouterState";var ZT=se.createContext(!1),$E=se.createContext({isTransitioning:!1});$E.displayName="ViewTransition";var JT=se.createContext(new Map);JT.displayName="Fetchers";var $T=se.createContext(null);$T.displayName="Await";var ms=se.createContext(null);ms.displayName="Navigation";var hu=se.createContext(null);hu.displayName="Location";var va=se.createContext({outlet:null,matches:[],isDataRoute:!1});va.displayName="Route";var q1=se.createContext(null);q1.displayName="RouteError";var e_="REACT_ROUTER_ERROR",e3="REDIRECT",t3="ROUTE_ERROR_RESPONSE";function n3(i){if(i.startsWith(`${e_}:${e3}:{`))try{let e=JSON.parse(i.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function i3(i){if(i.startsWith(`${e_}:${t3}:{`))try{let e=JSON.parse(i.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new XT(e.status,e.statusText,e.data)}catch{}}function r3(i,{relative:e}={}){Kn(fu(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:o}=se.useContext(ms),{hash:u,pathname:d,search:y}=du(i,{relative:e}),v=d;return n!=="/"&&(v=d==="/"?n:ya([n,d])),o.createHref({pathname:v,search:y,hash:u})}function fu(){return se.useContext(hu)!=null}function xo(){return Kn(fu(),"useLocation() may be used only in the context of a <Router> component."),se.useContext(hu).location}var t_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function n_(i){se.useContext(ms).static||se.useLayoutEffect(i)}function s3(){let{isDataRoute:i}=se.useContext(va);return i?y3():a3()}function a3(){Kn(fu(),"useNavigate() may be used only in the context of a <Router> component.");let i=se.useContext(Zl),{basename:e,navigator:n}=se.useContext(ms),{matches:o}=se.useContext(va),{pathname:u}=xo(),d=JSON.stringify(KE(o)),y=se.useRef(!1);return n_(()=>{y.current=!0}),se.useCallback((b,_={})=>{if(fs(y.current,t_),!y.current)return;if(typeof b=="number"){n.go(b);return}let C=WE(b,JSON.parse(d),u,_.relative==="path");i==null&&e!=="/"&&(C.pathname=C.pathname==="/"?e:ya([e,C.pathname])),(_.replace?n.replace:n.push)(C,_.state,_)},[e,n,d,u,i])}se.createContext(null);function du(i,{relative:e}={}){let{matches:n}=se.useContext(va),{pathname:o}=xo(),u=JSON.stringify(KE(n));return se.useMemo(()=>WE(i,JSON.parse(u),o,e==="path"),[i,u,o,e])}function o3(i,e){return i_(i,e)}function i_(i,e,n,o,u){var me;Kn(fu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:d}=se.useContext(ms),{matches:y}=se.useContext(va),v=y[y.length-1],b=v?v.params:{},_=v?v.pathname:"/",C=v?v.pathnameBase:"/",I=v&&v.route;{let $=I&&I.path||"";s_(_,!I||$.endsWith("*")||$.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${_}" (under <Route path="${$}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${$}"> to <Route path="${$==="/"?"*":`${$}/*`}">.`)}let L=xo(),B;if(e){let $=typeof e=="string"?$o(e):e;Kn(C==="/"||((me=$.pathname)==null?void 0:me.startsWith(C)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${C}" but pathname "${$.pathname}" was given in the \`location\` prop.`),B=$}else B=L;let q=B.pathname||"/",K=q;if(C!=="/"){let $=C.replace(/^\//,"").split("/");K="/"+q.replace(/^\//,"").split("/").slice($.length).join("/")}let Y=GE(i,{pathname:K});fs(I||Y!=null,`No routes matched location "${B.pathname}${B.search}${B.hash}" `),fs(Y==null||Y[Y.length-1].route.element!==void 0||Y[Y.length-1].route.Component!==void 0||Y[Y.length-1].route.lazy!==void 0,`Matched leaf route at location "${B.pathname}${B.search}${B.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let ae=f3(Y&&Y.map($=>Object.assign({},$,{params:Object.assign({},b,$.params),pathname:ya([C,d.encodeLocation?d.encodeLocation($.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?C:ya([C,d.encodeLocation?d.encodeLocation($.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:$.pathnameBase])})),y,n,o,u);return e&&ae?se.createElement(hu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...B},navigationType:"POP"}},ae):ae}function l3(){let i=x3(),e=KT(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,o="rgba(200,200,200, 0.5)",u={padding:"0.5rem",backgroundColor:o},d={padding:"2px 4px",backgroundColor:o},y=null;return console.error("Error handled by React Router default ErrorBoundary:",i),y=se.createElement(se.Fragment,null,se.createElement("p",null," Hey developer "),se.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",se.createElement("code",{style:d},"ErrorBoundary")," or"," ",se.createElement("code",{style:d},"errorElement")," prop on your route.")),se.createElement(se.Fragment,null,se.createElement("h2",null,"Unexpected Application Error!"),se.createElement("h3",{style:{fontStyle:"italic"}},e),n?se.createElement("pre",{style:u},n):null,y)}var c3=se.createElement(l3,null),r_=class extends se.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){this.props.onError?this.props.onError(i,e):console.error("React Router caught the following error during render",i)}render(){let i=this.state.error;if(this.context&&typeof i=="object"&&i&&"digest"in i&&typeof i.digest=="string"){const n=i3(i.digest);n&&(i=n)}let e=i!==void 0?se.createElement(va.Provider,{value:this.props.routeContext},se.createElement(q1.Provider,{value:i,children:this.props.component})):this.props.children;return this.context?se.createElement(u3,{error:i},e):e}};r_.contextType=ZT;var Y0=new WeakMap;function u3({children:i,error:e}){let{basename:n}=se.useContext(ms);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let o=n3(e.digest);if(o){let u=Y0.get(e);if(u)throw u;let d=ZE(o.location,n);if(QE&&!Y0.get(e))if(d.isExternal||o.reloadDocument)window.location.href=d.absoluteURL||d.to;else{const y=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(d.to,{replace:o.replace}));throw Y0.set(e,y),y}return se.createElement("meta",{httpEquiv:"refresh",content:`0;url=${d.absoluteURL||d.to}`})}}return i}function h3({routeContext:i,match:e,children:n}){let o=se.useContext(Zl);return o&&o.static&&o.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=e.route.id),se.createElement(va.Provider,{value:i},n)}function f3(i,e=[],n=null,o=null,u=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let d=i,y=n==null?void 0:n.errors;if(y!=null){let C=d.findIndex(I=>I.route.id&&(y==null?void 0:y[I.route.id])!==void 0);Kn(C>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(y).join(",")}`),d=d.slice(0,Math.min(d.length,C+1))}let v=!1,b=-1;if(n)for(let C=0;C<d.length;C++){let I=d[C];if((I.route.HydrateFallback||I.route.hydrateFallbackElement)&&(b=C),I.route.id){let{loaderData:L,errors:B}=n,q=I.route.loader&&!L.hasOwnProperty(I.route.id)&&(!B||B[I.route.id]===void 0);if(I.route.lazy||q){v=!0,b>=0?d=d.slice(0,b+1):d=[d[0]];break}}}let _=n&&o?(C,I)=>{var L,B;o(C,{location:n.location,params:((B=(L=n.matches)==null?void 0:L[0])==null?void 0:B.params)??{},unstable_pattern:WT(n.matches),errorInfo:I})}:void 0;return d.reduceRight((C,I,L)=>{let B,q=!1,K=null,Y=null;n&&(B=y&&I.route.id?y[I.route.id]:void 0,K=I.route.errorElement||c3,v&&(b<0&&L===0?(s_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),q=!0,Y=null):b===L&&(q=!0,Y=I.route.hydrateFallbackElement||null)));let ae=e.concat(d.slice(0,L+1)),me=()=>{let $;return B?$=K:q?$=Y:I.route.Component?$=se.createElement(I.route.Component,null):I.route.element?$=I.route.element:$=C,se.createElement(h3,{match:I,routeContext:{outlet:C,matches:ae,isDataRoute:n!=null},children:$})};return n&&(I.route.ErrorBoundary||I.route.errorElement||L===0)?se.createElement(r_,{location:n.location,revalidation:n.revalidation,component:K,error:B,children:me(),routeContext:{outlet:null,matches:ae,isDataRoute:!0},onError:_}):me()},null)}function Y1(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function d3(i){let e=se.useContext(Zl);return Kn(e,Y1(i)),e}function g3(i){let e=se.useContext(Cf);return Kn(e,Y1(i)),e}function m3(i){let e=se.useContext(va);return Kn(e,Y1(i)),e}function X1(i){let e=m3(i),n=e.matches[e.matches.length-1];return Kn(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function p3(){return X1("useRouteId")}function x3(){var o;let i=se.useContext(q1),e=g3("useRouteError"),n=X1("useRouteError");return i!==void 0?i:(o=e.errors)==null?void 0:o[n]}function y3(){let{router:i}=d3("useNavigate"),e=X1("useNavigate"),n=se.useRef(!1);return n_(()=>{n.current=!0}),se.useCallback(async(u,d={})=>{fs(n.current,t_),n.current&&(typeof u=="number"?await i.navigate(u):await i.navigate(u,{fromRouteId:e,...d}))},[i,e])}var nx={};function s_(i,e,n){!e&&!nx[i]&&(nx[i]=!0,fs(!1,n))}se.memo(E3);function E3({routes:i,future:e,state:n,onError:o}){return i_(i,void 0,n,o,e)}function Ml(i){Kn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function _3({basename:i="/",children:e=null,location:n,navigationType:o="POP",navigator:u,static:d=!1,unstable_useTransitions:y}){Kn(!fu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let v=i.replace(/^\/*/,"/"),b=se.useMemo(()=>({basename:v,navigator:u,static:d,unstable_useTransitions:y,future:{}}),[v,u,d,y]);typeof n=="string"&&(n=$o(n));let{pathname:_="/",search:C="",hash:I="",state:L=null,key:B="default"}=n,q=se.useMemo(()=>{let K=_a(_,v);return K==null?null:{location:{pathname:K,search:C,hash:I,state:L,key:B},navigationType:o}},[v,_,C,I,L,B,o]);return fs(q!=null,`<Router basename="${v}"> is not able to match the URL "${_}${C}${I}" because it does not start with the basename, so the <Router> won't render anything.`),q==null?null:se.createElement(ms.Provider,{value:b},se.createElement(hu.Provider,{children:e,value:q}))}function A3({children:i,location:e}){return o3(l1(i),e)}function l1(i,e=[]){let n=[];return se.Children.forEach(i,(o,u)=>{if(!se.isValidElement(o))return;let d=[...e,u];if(o.type===se.Fragment){n.push.apply(n,l1(o.props.children,d));return}Kn(o.type===Ml,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Kn(!o.props.index||!o.props.children,"An index route cannot have child routes.");let y={id:o.props.id||d.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,middleware:o.props.middleware,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(y.children=l1(o.props.children,d)),n.push(y)}),n}var jh="get",Fh="application/x-www-form-urlencoded";function Sf(i){return typeof HTMLElement<"u"&&i instanceof HTMLElement}function w3(i){return Sf(i)&&i.tagName.toLowerCase()==="button"}function b3(i){return Sf(i)&&i.tagName.toLowerCase()==="form"}function T3(i){return Sf(i)&&i.tagName.toLowerCase()==="input"}function v3(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function C3(i,e){return i.button===0&&(!e||e==="_self")&&!v3(i)}var Nh=null;function S3(){if(Nh===null)try{new FormData(document.createElement("form"),0),Nh=!1}catch{Nh=!0}return Nh}var I3=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function X0(i){return i!=null&&!I3.has(i)?(fs(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Fh}"`),null):i}function N3(i,e){let n,o,u,d,y;if(b3(i)){let v=i.getAttribute("action");o=v?_a(v,e):null,n=i.getAttribute("method")||jh,u=X0(i.getAttribute("enctype"))||Fh,d=new FormData(i)}else if(w3(i)||T3(i)&&(i.type==="submit"||i.type==="image")){let v=i.form;if(v==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let b=i.getAttribute("formaction")||v.getAttribute("action");if(o=b?_a(b,e):null,n=i.getAttribute("formmethod")||v.getAttribute("method")||jh,u=X0(i.getAttribute("formenctype"))||X0(v.getAttribute("enctype"))||Fh,d=new FormData(v,i),!S3()){let{name:_,type:C,value:I}=i;if(C==="image"){let L=_?`${_}.`:"";d.append(`${L}x`,"0"),d.append(`${L}y`,"0")}else _&&d.append(_,I)}}else{if(Sf(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=jh,o=null,u=Fh,y=i}return d&&u==="text/plain"&&(y=d,d=void 0),{action:o,method:n.toLowerCase(),encType:u,formData:d,body:y}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function K1(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function R3(i,e,n,o){let u=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return n?u.pathname.endsWith("/")?u.pathname=`${u.pathname}_.${o}`:u.pathname=`${u.pathname}.${o}`:u.pathname==="/"?u.pathname=`_root.${o}`:e&&_a(u.pathname,e)==="/"?u.pathname=`${e.replace(/\/$/,"")}/_root.${o}`:u.pathname=`${u.pathname.replace(/\/$/,"")}.${o}`,u}async function O3(i,e){if(i.id in e)return e[i.id];try{let n=await import(i.module);return e[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function D3(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function M3(i,e,n){let o=await Promise.all(i.map(async u=>{let d=e.routes[u.route.id];if(d){let y=await O3(d,n);return y.links?y.links():[]}return[]}));return k3(o.flat(1).filter(D3).filter(u=>u.rel==="stylesheet"||u.rel==="preload").map(u=>u.rel==="stylesheet"?{...u,rel:"prefetch",as:"style"}:{...u,rel:"prefetch"}))}function ix(i,e,n,o,u,d){let y=(b,_)=>n[_]?b.route.id!==n[_].route.id:!0,v=(b,_)=>{var C;return n[_].pathname!==b.pathname||((C=n[_].route.path)==null?void 0:C.endsWith("*"))&&n[_].params["*"]!==b.params["*"]};return d==="assets"?e.filter((b,_)=>y(b,_)||v(b,_)):d==="data"?e.filter((b,_)=>{var I;let C=o.routes[b.route.id];if(!C||!C.hasLoader)return!1;if(y(b,_)||v(b,_))return!0;if(b.route.shouldRevalidate){let L=b.route.shouldRevalidate({currentUrl:new URL(u.pathname+u.search+u.hash,window.origin),currentParams:((I=n[0])==null?void 0:I.params)||{},nextUrl:new URL(i,window.origin),nextParams:b.params,defaultShouldRevalidate:!0});if(typeof L=="boolean")return L}return!0}):[]}function L3(i,e,{includeHydrateFallback:n}={}){return P3(i.map(o=>{let u=e.routes[o.route.id];if(!u)return[];let d=[u.module];return u.clientActionModule&&(d=d.concat(u.clientActionModule)),u.clientLoaderModule&&(d=d.concat(u.clientLoaderModule)),n&&u.hydrateFallbackModule&&(d=d.concat(u.hydrateFallbackModule)),u.imports&&(d=d.concat(u.imports)),d}).flat(1))}function P3(i){return[...new Set(i)]}function B3(i){let e={},n=Object.keys(i).sort();for(let o of n)e[o]=i[o];return e}function k3(i,e){let n=new Set;return new Set(e),i.reduce((o,u)=>{let d=JSON.stringify(B3(u));return n.has(d)||(n.add(d),o.push({key:d,link:u})),o},[])}function a_(){let i=se.useContext(Zl);return K1(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function U3(){let i=se.useContext(Cf);return K1(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var W1=se.createContext(void 0);W1.displayName="FrameworkContext";function o_(){let i=se.useContext(W1);return K1(i,"You must render this element inside a <HydratedRouter> element"),i}function V3(i,e){let n=se.useContext(W1),[o,u]=se.useState(!1),[d,y]=se.useState(!1),{onFocus:v,onBlur:b,onMouseEnter:_,onMouseLeave:C,onTouchStart:I}=e,L=se.useRef(null);se.useEffect(()=>{if(i==="render"&&y(!0),i==="viewport"){let K=ae=>{ae.forEach(me=>{y(me.isIntersecting)})},Y=new IntersectionObserver(K,{threshold:.5});return L.current&&Y.observe(L.current),()=>{Y.disconnect()}}},[i]),se.useEffect(()=>{if(o){let K=setTimeout(()=>{y(!0)},100);return()=>{clearTimeout(K)}}},[o]);let B=()=>{u(!0)},q=()=>{u(!1),y(!1)};return n?i!=="intent"?[d,L,{}]:[d,L,{onFocus:Vc(v,B),onBlur:Vc(b,q),onMouseEnter:Vc(_,B),onMouseLeave:Vc(C,q),onTouchStart:Vc(I,B)}]:[!1,L,{}]}function Vc(i,e){return n=>{i&&i(n),n.defaultPrevented||e(n)}}function j3({page:i,...e}){let{router:n}=a_(),o=se.useMemo(()=>GE(n.routes,i,n.basename),[n.routes,i,n.basename]);return o?se.createElement(z3,{page:i,matches:o,...e}):null}function F3(i){let{manifest:e,routeModules:n}=o_(),[o,u]=se.useState([]);return se.useEffect(()=>{let d=!1;return M3(i,e,n).then(y=>{d||u(y)}),()=>{d=!0}},[i,e,n]),o}function z3({page:i,matches:e,...n}){let o=xo(),{future:u,manifest:d,routeModules:y}=o_(),{basename:v}=a_(),{loaderData:b,matches:_}=U3(),C=se.useMemo(()=>ix(i,e,_,d,o,"data"),[i,e,_,d,o]),I=se.useMemo(()=>ix(i,e,_,d,o,"assets"),[i,e,_,d,o]),L=se.useMemo(()=>{if(i===o.pathname+o.search+o.hash)return[];let K=new Set,Y=!1;if(e.forEach(me=>{var _e;let $=d.routes[me.route.id];!$||!$.hasLoader||(!C.some(je=>je.route.id===me.route.id)&&me.route.id in b&&((_e=y[me.route.id])!=null&&_e.shouldRevalidate)||$.hasClientLoader?Y=!0:K.add(me.route.id))}),K.size===0)return[];let ae=R3(i,v,u.unstable_trailingSlashAwareDataRequests,"data");return Y&&K.size>0&&ae.searchParams.set("_routes",e.filter(me=>K.has(me.route.id)).map(me=>me.route.id).join(",")),[ae.pathname+ae.search]},[v,u.unstable_trailingSlashAwareDataRequests,b,o,d,C,e,i,y]),B=se.useMemo(()=>L3(I,d),[I,d]),q=F3(I);return se.createElement(se.Fragment,null,L.map(K=>se.createElement("link",{key:K,rel:"prefetch",as:"fetch",href:K,...n})),B.map(K=>se.createElement("link",{key:K,rel:"modulepreload",href:K,...n})),q.map(({key:K,link:Y})=>se.createElement("link",{key:K,nonce:n.nonce,...Y})))}function H3(...i){return e=>{i.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var G3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{G3&&(window.__reactRouterVersion="7.12.0")}catch{}function q3({basename:i,children:e,unstable_useTransitions:n,window:o}){let u=se.useRef();u.current==null&&(u.current=TT({window:o,v5Compat:!0}));let d=u.current,[y,v]=se.useState({action:d.action,location:d.location}),b=se.useCallback(_=>{n===!1?v(_):se.startTransition(()=>v(_))},[n]);return se.useLayoutEffect(()=>d.listen(b),[d,b]),se.createElement(_3,{basename:i,children:e,location:y.location,navigationType:y.action,navigator:d,unstable_useTransitions:n})}var l_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Q1=se.forwardRef(function({onClick:e,discover:n="render",prefetch:o="none",relative:u,reloadDocument:d,replace:y,state:v,target:b,to:_,preventScrollReset:C,viewTransition:I,unstable_defaultShouldRevalidate:L,...B},q){let{basename:K,unstable_useTransitions:Y}=se.useContext(ms),ae=typeof _=="string"&&l_.test(_),me=ZE(_,K);_=me.to;let $=r3(_,{relative:u}),[_e,je,De]=V3(o,B),j=W3(_,{replace:y,state:v,target:b,preventScrollReset:C,relative:u,viewTransition:I,unstable_defaultShouldRevalidate:L,unstable_useTransitions:Y});function H(ne){e&&e(ne),ne.defaultPrevented||j(ne)}let V=se.createElement("a",{...B,...De,href:me.absoluteURL||$,onClick:me.isExternal||d?e:H,ref:H3(q,je),target:b,"data-discover":!ae&&n==="render"?"true":void 0});return _e&&!ae?se.createElement(se.Fragment,null,V,se.createElement(j3,{page:$})):V});Q1.displayName="Link";var Y3=se.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:o="",end:u=!1,style:d,to:y,viewTransition:v,children:b,..._},C){let I=du(y,{relative:_.relative}),L=xo(),B=se.useContext(Cf),{navigator:q,basename:K}=se.useContext(ms),Y=B!=null&&ev(I)&&v===!0,ae=q.encodeLocation?q.encodeLocation(I).pathname:I.pathname,me=L.pathname,$=B&&B.navigation&&B.navigation.location?B.navigation.location.pathname:null;n||(me=me.toLowerCase(),$=$?$.toLowerCase():null,ae=ae.toLowerCase()),$&&K&&($=_a($,K)||$);const _e=ae!=="/"&&ae.endsWith("/")?ae.length-1:ae.length;let je=me===ae||!u&&me.startsWith(ae)&&me.charAt(_e)==="/",De=$!=null&&($===ae||!u&&$.startsWith(ae)&&$.charAt(ae.length)==="/"),j={isActive:je,isPending:De,isTransitioning:Y},H=je?e:void 0,V;typeof o=="function"?V=o(j):V=[o,je?"active":null,De?"pending":null,Y?"transitioning":null].filter(Boolean).join(" ");let ne=typeof d=="function"?d(j):d;return se.createElement(Q1,{..._,"aria-current":H,className:V,ref:C,style:ne,to:y,viewTransition:v},typeof b=="function"?b(j):b)});Y3.displayName="NavLink";var X3=se.forwardRef(({discover:i="render",fetcherKey:e,navigate:n,reloadDocument:o,replace:u,state:d,method:y=jh,action:v,onSubmit:b,relative:_,preventScrollReset:C,viewTransition:I,unstable_defaultShouldRevalidate:L,...B},q)=>{let{unstable_useTransitions:K}=se.useContext(ms),Y=J3(),ae=$3(v,{relative:_}),me=y.toLowerCase()==="get"?"get":"post",$=typeof v=="string"&&l_.test(v),_e=je=>{if(b&&b(je),je.defaultPrevented)return;je.preventDefault();let De=je.nativeEvent.submitter,j=(De==null?void 0:De.getAttribute("formmethod"))||y,H=()=>Y(De||je.currentTarget,{fetcherKey:e,method:j,navigate:n,replace:u,state:d,relative:_,preventScrollReset:C,viewTransition:I,unstable_defaultShouldRevalidate:L});K&&n!==!1?se.startTransition(()=>H()):H()};return se.createElement("form",{ref:q,method:me,action:ae,onSubmit:o?b:_e,...B,"data-discover":!$&&i==="render"?"true":void 0})});X3.displayName="Form";function K3(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function c_(i){let e=se.useContext(Zl);return Kn(e,K3(i)),e}function W3(i,{target:e,replace:n,state:o,preventScrollReset:u,relative:d,viewTransition:y,unstable_defaultShouldRevalidate:v,unstable_useTransitions:b}={}){let _=s3(),C=xo(),I=du(i,{relative:d});return se.useCallback(L=>{if(C3(L,e)){L.preventDefault();let B=n!==void 0?n:nu(C)===nu(I),q=()=>_(i,{replace:B,state:o,preventScrollReset:u,relative:d,viewTransition:y,unstable_defaultShouldRevalidate:v});b?se.startTransition(()=>q()):q()}},[C,_,I,n,o,e,i,u,d,y,v,b])}var Q3=0,Z3=()=>`__${String(++Q3)}__`;function J3(){let{router:i}=c_("useSubmit"),{basename:e}=se.useContext(ms),n=p3(),o=i.fetch,u=i.navigate;return se.useCallback(async(d,y={})=>{let{action:v,method:b,encType:_,formData:C,body:I}=N3(d,e);if(y.navigate===!1){let L=y.fetcherKey||Z3();await o(L,n,y.action||v,{unstable_defaultShouldRevalidate:y.unstable_defaultShouldRevalidate,preventScrollReset:y.preventScrollReset,formData:C,body:I,formMethod:y.method||b,formEncType:y.encType||_,flushSync:y.flushSync})}else await u(y.action||v,{unstable_defaultShouldRevalidate:y.unstable_defaultShouldRevalidate,preventScrollReset:y.preventScrollReset,formData:C,body:I,formMethod:y.method||b,formEncType:y.encType||_,replace:y.replace,state:y.state,fromRouteId:n,flushSync:y.flushSync,viewTransition:y.viewTransition})},[o,u,e,n])}function $3(i,{relative:e}={}){let{basename:n}=se.useContext(ms),o=se.useContext(va);Kn(o,"useFormAction must be used inside a RouteContext");let[u]=o.matches.slice(-1),d={...du(i||".",{relative:e})},y=xo();if(i==null){d.search=y.search;let v=new URLSearchParams(d.search),b=v.getAll("index");if(b.some(C=>C==="")){v.delete("index"),b.filter(I=>I).forEach(I=>v.append("index",I));let C=v.toString();d.search=C?`?${C}`:""}}return(!i||i===".")&&u.route.index&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(d.pathname=d.pathname==="/"?n:ya([n,d.pathname])),nu(d)}function ev(i,{relative:e}={}){let n=se.useContext($E);Kn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=c_("useViewTransitionState"),u=du(i,{relative:e});if(!n.isTransitioning)return!1;let d=_a(n.currentLocation.pathname,o)||n.currentLocation.pathname,y=_a(n.nextLocation.pathname,o)||n.nextLocation.pathname;return Qh(u.pathname,y)!=null||Qh(u.pathname,d)!=null}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),nv=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,o)=>o?o.toUpperCase():n.toLowerCase()),rx=i=>{const e=nv(i);return e.charAt(0).toUpperCase()+e.slice(1)},u_=(...i)=>i.filter((e,n,o)=>!!e&&e.trim()!==""&&o.indexOf(e)===n).join(" ").trim(),iv=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var rv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=se.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:u="",children:d,iconNode:y,...v},b)=>se.createElement("svg",{ref:b,...rv,width:e,height:e,stroke:i,strokeWidth:o?Number(n)*24/Number(e):n,className:u_("lucide",u),...!d&&!iv(v)&&{"aria-hidden":"true"},...v},[...y.map(([_,C])=>se.createElement(_,C)),...Array.isArray(d)?d:[d]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=(i,e)=>{const n=se.forwardRef(({className:o,...u},d)=>se.createElement(sv,{ref:d,iconNode:e,className:u_(`lucide-${tv(rx(i))}`,`lucide-${i}`,o),...u}));return n.displayName=rx(i),n};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],sx=It("calendar",av);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],ax=It("camera",ov);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Fc=It("check",lv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],uv=It("chevron-right",cv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],h_=It("circle-alert",hv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Zh=It("circle-check-big",fv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],gv=It("circle-check",dv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Jh=It("clock",mv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],xv=It("eye",pv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],Ev=It("flame",yv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],ox=It("gift",_v);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Av=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],wv=It("graduation-cap",Av);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],zh=It("heart",bv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tv=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],$h=It("history",Tv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Cv=It("info",vv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Iv=It("layout-dashboard",Sv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nv=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Rv=It("log-out",Nv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ov=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],Dv=It("medal",Ov);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mv=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Lv=It("menu",Mv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pv=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],c1=It("package",Pv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bv=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],zc=It("plus",Bv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],Uv=It("qr-code",kv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],jv=It("scan-line",Vv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fv=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],zv=It("search",Fv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hv=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Gv=It("send",Hv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qv=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ef=It("shield-check",qv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yv=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],Xv=It("shopping-bag",Yv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kv=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Wv=It("shopping-cart",Kv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qv=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],u1=It("sparkles",Qv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Jv=It("star",Zv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $v=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Wc=It("target",$v);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=[["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}],["path",{d:"M7 10v12",key:"1qc93n"}]],tC=It("thumbs-up",eC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],K0=It("trash-2",nC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],rC=It("trending-up",iC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],aC=It("trophy",sC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],h1=It("user-plus",oC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],cC=It("user",lC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],hC=It("users",uC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Yo=It("x",fC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],f_=It("zap",dC);var hs=(i=>(i.STUDENT="STUDENT",i.ADMIN="ADMIN",i.GUEST="GUEST",i))(hs||{});const gC=()=>{};var lx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_=function(i){const e=[];let n=0;for(let o=0;o<i.length;o++){let u=i.charCodeAt(o);u<128?e[n++]=u:u<2048?(e[n++]=u>>6|192,e[n++]=u&63|128):(u&64512)===55296&&o+1<i.length&&(i.charCodeAt(o+1)&64512)===56320?(u=65536+((u&1023)<<10)+(i.charCodeAt(++o)&1023),e[n++]=u>>18|240,e[n++]=u>>12&63|128,e[n++]=u>>6&63|128,e[n++]=u&63|128):(e[n++]=u>>12|224,e[n++]=u>>6&63|128,e[n++]=u&63|128)}return e},mC=function(i){const e=[];let n=0,o=0;for(;n<i.length;){const u=i[n++];if(u<128)e[o++]=String.fromCharCode(u);else if(u>191&&u<224){const d=i[n++];e[o++]=String.fromCharCode((u&31)<<6|d&63)}else if(u>239&&u<365){const d=i[n++],y=i[n++],v=i[n++],b=((u&7)<<18|(d&63)<<12|(y&63)<<6|v&63)-65536;e[o++]=String.fromCharCode(55296+(b>>10)),e[o++]=String.fromCharCode(56320+(b&1023))}else{const d=i[n++],y=i[n++];e[o++]=String.fromCharCode((u&15)<<12|(d&63)<<6|y&63)}}return e.join("")},g_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let u=0;u<i.length;u+=3){const d=i[u],y=u+1<i.length,v=y?i[u+1]:0,b=u+2<i.length,_=b?i[u+2]:0,C=d>>2,I=(d&3)<<4|v>>4;let L=(v&15)<<2|_>>6,B=_&63;b||(B=64,y||(L=64)),o.push(n[C],n[I],n[L],n[B])}return o.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(d_(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):mC(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let u=0;u<i.length;){const d=n[i.charAt(u++)],v=u<i.length?n[i.charAt(u)]:0;++u;const _=u<i.length?n[i.charAt(u)]:64;++u;const I=u<i.length?n[i.charAt(u)]:64;if(++u,d==null||v==null||_==null||I==null)throw new pC;const L=d<<2|v>>4;if(o.push(L),_!==64){const B=v<<4&240|_>>2;if(o.push(B),I!==64){const q=_<<6&192|I;o.push(q)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class pC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xC=function(i){const e=d_(i);return g_.encodeByteArray(e,!0)},tf=function(i){return xC(i).replace(/\./g,"")},yC=function(i){try{return g_.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C=()=>EC().__FIREBASE_DEFAULTS__,AC=()=>{if(typeof process>"u"||typeof lx>"u")return;const i=lx.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},wC=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&yC(i[1]);return e&&JSON.parse(e)},Z1=()=>{try{return gC()||_C()||AC()||wC()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},bC=i=>{var e,n;return(n=(e=Z1())==null?void 0:e.emulatorHosts)==null?void 0:n[i]},TC=i=>{const e=bC(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),o]:[e.substring(0,n),o]},m_=()=>{var i;return(i=Z1())==null?void 0:i.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,o)=>{n?this.reject(n):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,o))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function CC(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SC(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},o=e||"demo-project",u=i.iat||0,d=i.sub||i.user_id;if(!d)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const y={iss:`https://securetoken.google.com/${o}`,aud:o,iat:u,exp:u+3600,auth_time:u,sub:d,user_id:d,firebase:{sign_in_provider:"custom",identities:{}},...i};return[tf(JSON.stringify(n)),tf(JSON.stringify(y)),""].join(".")}const Qc={};function IC(){const i={prod:[],emulator:[]};for(const e of Object.keys(Qc))Qc[e]?i.emulator.push(e):i.prod.push(e);return i}function NC(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let cx=!1;function RC(i,e){if(typeof window>"u"||typeof document>"u"||!J1(window.location.host)||Qc[i]===e||Qc[i]||cx)return;Qc[i]=e;function n(L){return`__firebase__banner__${L}`}const o="__firebase__banner",d=IC().prod.length>0;function y(){const L=document.getElementById(o);L&&L.remove()}function v(L){L.style.display="flex",L.style.background="#7faaf0",L.style.position="fixed",L.style.bottom="5px",L.style.left="5px",L.style.padding=".5em",L.style.borderRadius="5px",L.style.alignItems="center"}function b(L,B){L.setAttribute("width","24"),L.setAttribute("id",B),L.setAttribute("height","24"),L.setAttribute("viewBox","0 0 24 24"),L.setAttribute("fill","none"),L.style.marginLeft="-6px"}function _(){const L=document.createElement("span");return L.style.cursor="pointer",L.style.marginLeft="16px",L.style.fontSize="24px",L.innerHTML=" &times;",L.onclick=()=>{cx=!0,y()},L}function C(L,B){L.setAttribute("id",B),L.innerText="Learn more",L.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",L.setAttribute("target","__blank"),L.style.paddingLeft="5px",L.style.textDecoration="underline"}function I(){const L=NC(o),B=n("text"),q=document.getElementById(B)||document.createElement("span"),K=n("learnmore"),Y=document.getElementById(K)||document.createElement("a"),ae=n("preprendIcon"),me=document.getElementById(ae)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(L.created){const $=L.element;v($),C(Y,K);const _e=_();b(me,ae),$.append(me,q,Y,_e),document.body.appendChild($)}d?(q.innerText="Preview backend disconnected.",me.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(me.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,q.innerText="Preview backend running in this workspace."),q.setAttribute("id",B)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OC(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function DC(){var e;const i=(e=Z1())==null?void 0:e.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function MC(){return!DC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function LC(){try{return typeof indexedDB=="object"}catch{return!1}}function PC(){return new Promise((i,e)=>{try{let n=!0;const o="validate-browser-context-for-indexeddb-analytics-module",u=self.indexedDB.open(o);u.onsuccess=()=>{u.result.close(),n||self.indexedDB.deleteDatabase(o),i(!0)},u.onupgradeneeded=()=>{n=!1},u.onerror=()=>{var d;e(((d=u.error)==null?void 0:d.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC="FirebaseError";class Jl extends Error{constructor(e,n,o){super(n),this.code=e,this.customData=o,this.name=BC,Object.setPrototypeOf(this,Jl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,p_.prototype.create)}}class p_{constructor(e,n,o){this.service=e,this.serviceName=n,this.errors=o}create(e,...n){const o=n[0]||{},u=`${this.service}/${e}`,d=this.errors[e],y=d?kC(d,o):"Error",v=`${this.serviceName}: ${y} (${u}).`;return new Jl(u,v,o)}}function kC(i,e){return i.replace(UC,(n,o)=>{const u=e[o];return u!=null?String(u):`<${o}?>`})}const UC=/\{\$([^}]+)}/g;function nf(i,e){if(i===e)return!0;const n=Object.keys(i),o=Object.keys(e);for(const u of n){if(!o.includes(u))return!1;const d=i[u],y=e[u];if(ux(d)&&ux(y)){if(!nf(d,y))return!1}else if(d!==y)return!1}for(const u of o)if(!n.includes(u))return!1;return!0}function ux(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(i){return i&&i._delegate?i._delegate:i}class iu{constructor(e,n,o){this.name=e,this.instanceFactory=n,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const o=new vC;if(this.instancesDeferred.set(n,o),this.isInitialized(n)||this.shouldAutoInitialize())try{const u=this.getOrInitializeService({instanceIdentifier:n});u&&o.resolve(u)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(FC(e))try{this.getOrInitializeService({instanceIdentifier:Ho})}catch{}for(const[n,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(n);try{const d=this.getOrInitializeService({instanceIdentifier:u});o.resolve(d)}catch{}}}}clearInstance(e=Ho){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ho){return this.instances.has(e)}getOptions(e=Ho){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const u=this.getOrInitializeService({instanceIdentifier:o,options:n});for(const[d,y]of this.instancesDeferred.entries()){const v=this.normalizeInstanceIdentifier(d);o===v&&y.resolve(u)}return u}onInit(e,n){const o=this.normalizeInstanceIdentifier(n),u=this.onInitCallbacks.get(o)??new Set;u.add(e),this.onInitCallbacks.set(o,u);const d=this.instances.get(o);return d&&e(d,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const o=this.onInitCallbacks.get(n);if(o)for(const u of o)try{u(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:jC(e),options:n}),this.instances.set(e,o),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=Ho){return this.component?this.component.multipleInstances?e:Ho:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function jC(i){return i===Ho?void 0:i}function FC(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new VC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jt;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Jt||(Jt={}));const HC={debug:Jt.DEBUG,verbose:Jt.VERBOSE,info:Jt.INFO,warn:Jt.WARN,error:Jt.ERROR,silent:Jt.SILENT},GC=Jt.INFO,qC={[Jt.DEBUG]:"log",[Jt.VERBOSE]:"log",[Jt.INFO]:"info",[Jt.WARN]:"warn",[Jt.ERROR]:"error"},YC=(i,e,...n)=>{if(e<i.logLevel)return;const o=new Date().toISOString(),u=qC[e];if(u)console[u](`[${o}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class x_{constructor(e){this.name=e,this._logLevel=GC,this._logHandler=YC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Jt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?HC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Jt.DEBUG,...e),this._logHandler(this,Jt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Jt.VERBOSE,...e),this._logHandler(this,Jt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Jt.INFO,...e),this._logHandler(this,Jt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Jt.WARN,...e),this._logHandler(this,Jt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Jt.ERROR,...e),this._logHandler(this,Jt.ERROR,...e)}}const XC=(i,e)=>e.some(n=>i instanceof n);let hx,fx;function KC(){return hx||(hx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function WC(){return fx||(fx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const y_=new WeakMap,f1=new WeakMap,E_=new WeakMap,W0=new WeakMap,$1=new WeakMap;function QC(i){const e=new Promise((n,o)=>{const u=()=>{i.removeEventListener("success",d),i.removeEventListener("error",y)},d=()=>{n(so(i.result)),u()},y=()=>{o(i.error),u()};i.addEventListener("success",d),i.addEventListener("error",y)});return e.then(n=>{n instanceof IDBCursor&&y_.set(n,i)}).catch(()=>{}),$1.set(e,i),e}function ZC(i){if(f1.has(i))return;const e=new Promise((n,o)=>{const u=()=>{i.removeEventListener("complete",d),i.removeEventListener("error",y),i.removeEventListener("abort",y)},d=()=>{n(),u()},y=()=>{o(i.error||new DOMException("AbortError","AbortError")),u()};i.addEventListener("complete",d),i.addEventListener("error",y),i.addEventListener("abort",y)});f1.set(i,e)}let d1={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return f1.get(i);if(e==="objectStoreNames")return i.objectStoreNames||E_.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return so(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function JC(i){d1=i(d1)}function $C(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const o=i.call(Q0(this),e,...n);return E_.set(o,e.sort?e.sort():[e]),so(o)}:WC().includes(i)?function(...e){return i.apply(Q0(this),e),so(y_.get(this))}:function(...e){return so(i.apply(Q0(this),e))}}function eS(i){return typeof i=="function"?$C(i):(i instanceof IDBTransaction&&ZC(i),XC(i,KC())?new Proxy(i,d1):i)}function so(i){if(i instanceof IDBRequest)return QC(i);if(W0.has(i))return W0.get(i);const e=eS(i);return e!==i&&(W0.set(i,e),$1.set(e,i)),e}const Q0=i=>$1.get(i);function tS(i,e,{blocked:n,upgrade:o,blocking:u,terminated:d}={}){const y=indexedDB.open(i,e),v=so(y);return o&&y.addEventListener("upgradeneeded",b=>{o(so(y.result),b.oldVersion,b.newVersion,so(y.transaction),b)}),n&&y.addEventListener("blocked",b=>n(b.oldVersion,b.newVersion,b)),v.then(b=>{d&&b.addEventListener("close",()=>d()),u&&b.addEventListener("versionchange",_=>u(_.oldVersion,_.newVersion,_))}).catch(()=>{}),v}const nS=["get","getKey","getAll","getAllKeys","count"],iS=["put","add","delete","clear"],Z0=new Map;function dx(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Z0.get(e))return Z0.get(e);const n=e.replace(/FromIndex$/,""),o=e!==n,u=iS.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!(u||nS.includes(n)))return;const d=async function(y,...v){const b=this.transaction(y,u?"readwrite":"readonly");let _=b.store;return o&&(_=_.index(v.shift())),(await Promise.all([_[n](...v),u&&b.done]))[0]};return Z0.set(e,d),d}JC(i=>({...i,get:(e,n,o)=>dx(e,n)||i.get(e,n,o),has:(e,n)=>!!dx(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(sS(n)){const o=n.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(n=>n).join(" ")}}function sS(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const g1="@firebase/app",gx="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa=new x_("@firebase/app"),aS="@firebase/app-compat",oS="@firebase/analytics-compat",lS="@firebase/analytics",cS="@firebase/app-check-compat",uS="@firebase/app-check",hS="@firebase/auth",fS="@firebase/auth-compat",dS="@firebase/database",gS="@firebase/data-connect",mS="@firebase/database-compat",pS="@firebase/functions",xS="@firebase/functions-compat",yS="@firebase/installations",ES="@firebase/installations-compat",_S="@firebase/messaging",AS="@firebase/messaging-compat",wS="@firebase/performance",bS="@firebase/performance-compat",TS="@firebase/remote-config",vS="@firebase/remote-config-compat",CS="@firebase/storage",SS="@firebase/storage-compat",IS="@firebase/firestore",NS="@firebase/ai",RS="@firebase/firestore-compat",OS="firebase",DS="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1="[DEFAULT]",MS={[g1]:"fire-core",[aS]:"fire-core-compat",[lS]:"fire-analytics",[oS]:"fire-analytics-compat",[uS]:"fire-app-check",[cS]:"fire-app-check-compat",[hS]:"fire-auth",[fS]:"fire-auth-compat",[dS]:"fire-rtdb",[gS]:"fire-data-connect",[mS]:"fire-rtdb-compat",[pS]:"fire-fn",[xS]:"fire-fn-compat",[yS]:"fire-iid",[ES]:"fire-iid-compat",[_S]:"fire-fcm",[AS]:"fire-fcm-compat",[wS]:"fire-perf",[bS]:"fire-perf-compat",[TS]:"fire-rc",[vS]:"fire-rc-compat",[CS]:"fire-gcs",[SS]:"fire-gcs-compat",[IS]:"fire-fst",[RS]:"fire-fst-compat",[NS]:"fire-vertex","fire-js":"fire-js",[OS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf=new Map,LS=new Map,p1=new Map;function mx(i,e){try{i.container.addComponent(e)}catch(n){Aa.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function sf(i){const e=i.name;if(p1.has(e))return Aa.debug(`There were multiple attempts to register component ${e}.`),!1;p1.set(e,i);for(const n of rf.values())mx(n,i);for(const n of LS.values())mx(n,i);return!0}function PS(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function BS(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ao=new p_("app","Firebase",kS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e,n,o){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new iu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ao.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS=DS;function __(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const o={name:m1,automaticDataCollectionEnabled:!0,...e},u=o.name;if(typeof u!="string"||!u)throw ao.create("bad-app-name",{appName:String(u)});if(n||(n=m_()),!n)throw ao.create("no-options");const d=rf.get(u);if(d){if(nf(n,d.options)&&nf(o,d.config))return d;throw ao.create("duplicate-app",{appName:u})}const y=new zC(u);for(const b of p1.values())y.addComponent(b);const v=new US(n,o,y);return rf.set(u,v),v}function jS(i=m1){const e=rf.get(i);if(!e&&i===m1&&m_())return __();if(!e)throw ao.create("no-app",{appName:i});return e}function zl(i,e,n){let o=MS[i]??i;n&&(o+=`-${n}`);const u=o.match(/\s|\//),d=e.match(/\s|\//);if(u||d){const y=[`Unable to register library "${o}" with version "${e}":`];u&&y.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&d&&y.push("and"),d&&y.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Aa.warn(y.join(" "));return}sf(new iu(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS="firebase-heartbeat-database",zS=1,ru="firebase-heartbeat-store";let J0=null;function A_(){return J0||(J0=tS(FS,zS,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(ru)}catch(n){console.warn(n)}}}}).catch(i=>{throw ao.create("idb-open",{originalErrorMessage:i.message})})),J0}async function HS(i){try{const n=(await A_()).transaction(ru),o=await n.objectStore(ru).get(w_(i));return await n.done,o}catch(e){if(e instanceof Jl)Aa.warn(e.message);else{const n=ao.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Aa.warn(n.message)}}}async function px(i,e){try{const o=(await A_()).transaction(ru,"readwrite");await o.objectStore(ru).put(e,w_(i)),await o.done}catch(n){if(n instanceof Jl)Aa.warn(n.message);else{const o=ao.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Aa.warn(o.message)}}}function w_(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS=1024,qS=30;class YS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new KS(n),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var e,n;try{const u=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),d=xx();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===d||this._heartbeatsCache.heartbeats.some(y=>y.date===d))return;if(this._heartbeatsCache.heartbeats.push({date:d,agent:u}),this._heartbeatsCache.heartbeats.length>qS){const y=WS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(y,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(o){Aa.warn(o)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=xx(),{heartbeatsToSend:o,unsentEntries:u}=XS(this._heartbeatsCache.heartbeats),d=tf(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=n,u.length>0?(this._heartbeatsCache.heartbeats=u,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),d}catch(n){return Aa.warn(n),""}}}function xx(){return new Date().toISOString().substring(0,10)}function XS(i,e=GS){const n=[];let o=i.slice();for(const u of i){const d=n.find(y=>y.agent===u.agent);if(d){if(d.dates.push(u.date),yx(n)>e){d.dates.pop();break}}else if(n.push({agent:u.agent,dates:[u.date]}),yx(n)>e){n.pop();break}o=o.slice(1)}return{heartbeatsToSend:n,unsentEntries:o}}class KS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return LC()?PC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await HS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return px(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return px(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function yx(i){return tf(JSON.stringify({version:2,heartbeats:i})).length}function WS(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let o=1;o<i.length;o++)i[o].date<n&&(n=i[o].date,e=o);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(i){sf(new iu("platform-logger",e=>new rS(e),"PRIVATE")),sf(new iu("heartbeat",e=>new YS(e),"PRIVATE")),zl(g1,gx,i),zl(g1,gx,"esm2020"),zl("fire-js","")}QS("");var Ex=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var oo,b_;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,H){function V(){}V.prototype=H.prototype,j.F=H.prototype,j.prototype=new V,j.prototype.constructor=j,j.D=function(ne,W,Z){for(var X=Array(arguments.length-2),We=2;We<arguments.length;We++)X[We-2]=arguments[We];return H.prototype[W].apply(ne,X)}}function n(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(o,n),o.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function u(j,H,V){V||(V=0);const ne=Array(16);if(typeof H=="string")for(var W=0;W<16;++W)ne[W]=H.charCodeAt(V++)|H.charCodeAt(V++)<<8|H.charCodeAt(V++)<<16|H.charCodeAt(V++)<<24;else for(W=0;W<16;++W)ne[W]=H[V++]|H[V++]<<8|H[V++]<<16|H[V++]<<24;H=j.g[0],V=j.g[1],W=j.g[2];let Z=j.g[3],X;X=H+(Z^V&(W^Z))+ne[0]+3614090360&4294967295,H=V+(X<<7&4294967295|X>>>25),X=Z+(W^H&(V^W))+ne[1]+3905402710&4294967295,Z=H+(X<<12&4294967295|X>>>20),X=W+(V^Z&(H^V))+ne[2]+606105819&4294967295,W=Z+(X<<17&4294967295|X>>>15),X=V+(H^W&(Z^H))+ne[3]+3250441966&4294967295,V=W+(X<<22&4294967295|X>>>10),X=H+(Z^V&(W^Z))+ne[4]+4118548399&4294967295,H=V+(X<<7&4294967295|X>>>25),X=Z+(W^H&(V^W))+ne[5]+1200080426&4294967295,Z=H+(X<<12&4294967295|X>>>20),X=W+(V^Z&(H^V))+ne[6]+2821735955&4294967295,W=Z+(X<<17&4294967295|X>>>15),X=V+(H^W&(Z^H))+ne[7]+4249261313&4294967295,V=W+(X<<22&4294967295|X>>>10),X=H+(Z^V&(W^Z))+ne[8]+1770035416&4294967295,H=V+(X<<7&4294967295|X>>>25),X=Z+(W^H&(V^W))+ne[9]+2336552879&4294967295,Z=H+(X<<12&4294967295|X>>>20),X=W+(V^Z&(H^V))+ne[10]+4294925233&4294967295,W=Z+(X<<17&4294967295|X>>>15),X=V+(H^W&(Z^H))+ne[11]+2304563134&4294967295,V=W+(X<<22&4294967295|X>>>10),X=H+(Z^V&(W^Z))+ne[12]+1804603682&4294967295,H=V+(X<<7&4294967295|X>>>25),X=Z+(W^H&(V^W))+ne[13]+4254626195&4294967295,Z=H+(X<<12&4294967295|X>>>20),X=W+(V^Z&(H^V))+ne[14]+2792965006&4294967295,W=Z+(X<<17&4294967295|X>>>15),X=V+(H^W&(Z^H))+ne[15]+1236535329&4294967295,V=W+(X<<22&4294967295|X>>>10),X=H+(W^Z&(V^W))+ne[1]+4129170786&4294967295,H=V+(X<<5&4294967295|X>>>27),X=Z+(V^W&(H^V))+ne[6]+3225465664&4294967295,Z=H+(X<<9&4294967295|X>>>23),X=W+(H^V&(Z^H))+ne[11]+643717713&4294967295,W=Z+(X<<14&4294967295|X>>>18),X=V+(Z^H&(W^Z))+ne[0]+3921069994&4294967295,V=W+(X<<20&4294967295|X>>>12),X=H+(W^Z&(V^W))+ne[5]+3593408605&4294967295,H=V+(X<<5&4294967295|X>>>27),X=Z+(V^W&(H^V))+ne[10]+38016083&4294967295,Z=H+(X<<9&4294967295|X>>>23),X=W+(H^V&(Z^H))+ne[15]+3634488961&4294967295,W=Z+(X<<14&4294967295|X>>>18),X=V+(Z^H&(W^Z))+ne[4]+3889429448&4294967295,V=W+(X<<20&4294967295|X>>>12),X=H+(W^Z&(V^W))+ne[9]+568446438&4294967295,H=V+(X<<5&4294967295|X>>>27),X=Z+(V^W&(H^V))+ne[14]+3275163606&4294967295,Z=H+(X<<9&4294967295|X>>>23),X=W+(H^V&(Z^H))+ne[3]+4107603335&4294967295,W=Z+(X<<14&4294967295|X>>>18),X=V+(Z^H&(W^Z))+ne[8]+1163531501&4294967295,V=W+(X<<20&4294967295|X>>>12),X=H+(W^Z&(V^W))+ne[13]+2850285829&4294967295,H=V+(X<<5&4294967295|X>>>27),X=Z+(V^W&(H^V))+ne[2]+4243563512&4294967295,Z=H+(X<<9&4294967295|X>>>23),X=W+(H^V&(Z^H))+ne[7]+1735328473&4294967295,W=Z+(X<<14&4294967295|X>>>18),X=V+(Z^H&(W^Z))+ne[12]+2368359562&4294967295,V=W+(X<<20&4294967295|X>>>12),X=H+(V^W^Z)+ne[5]+4294588738&4294967295,H=V+(X<<4&4294967295|X>>>28),X=Z+(H^V^W)+ne[8]+2272392833&4294967295,Z=H+(X<<11&4294967295|X>>>21),X=W+(Z^H^V)+ne[11]+1839030562&4294967295,W=Z+(X<<16&4294967295|X>>>16),X=V+(W^Z^H)+ne[14]+4259657740&4294967295,V=W+(X<<23&4294967295|X>>>9),X=H+(V^W^Z)+ne[1]+2763975236&4294967295,H=V+(X<<4&4294967295|X>>>28),X=Z+(H^V^W)+ne[4]+1272893353&4294967295,Z=H+(X<<11&4294967295|X>>>21),X=W+(Z^H^V)+ne[7]+4139469664&4294967295,W=Z+(X<<16&4294967295|X>>>16),X=V+(W^Z^H)+ne[10]+3200236656&4294967295,V=W+(X<<23&4294967295|X>>>9),X=H+(V^W^Z)+ne[13]+681279174&4294967295,H=V+(X<<4&4294967295|X>>>28),X=Z+(H^V^W)+ne[0]+3936430074&4294967295,Z=H+(X<<11&4294967295|X>>>21),X=W+(Z^H^V)+ne[3]+3572445317&4294967295,W=Z+(X<<16&4294967295|X>>>16),X=V+(W^Z^H)+ne[6]+76029189&4294967295,V=W+(X<<23&4294967295|X>>>9),X=H+(V^W^Z)+ne[9]+3654602809&4294967295,H=V+(X<<4&4294967295|X>>>28),X=Z+(H^V^W)+ne[12]+3873151461&4294967295,Z=H+(X<<11&4294967295|X>>>21),X=W+(Z^H^V)+ne[15]+530742520&4294967295,W=Z+(X<<16&4294967295|X>>>16),X=V+(W^Z^H)+ne[2]+3299628645&4294967295,V=W+(X<<23&4294967295|X>>>9),X=H+(W^(V|~Z))+ne[0]+4096336452&4294967295,H=V+(X<<6&4294967295|X>>>26),X=Z+(V^(H|~W))+ne[7]+1126891415&4294967295,Z=H+(X<<10&4294967295|X>>>22),X=W+(H^(Z|~V))+ne[14]+2878612391&4294967295,W=Z+(X<<15&4294967295|X>>>17),X=V+(Z^(W|~H))+ne[5]+4237533241&4294967295,V=W+(X<<21&4294967295|X>>>11),X=H+(W^(V|~Z))+ne[12]+1700485571&4294967295,H=V+(X<<6&4294967295|X>>>26),X=Z+(V^(H|~W))+ne[3]+2399980690&4294967295,Z=H+(X<<10&4294967295|X>>>22),X=W+(H^(Z|~V))+ne[10]+4293915773&4294967295,W=Z+(X<<15&4294967295|X>>>17),X=V+(Z^(W|~H))+ne[1]+2240044497&4294967295,V=W+(X<<21&4294967295|X>>>11),X=H+(W^(V|~Z))+ne[8]+1873313359&4294967295,H=V+(X<<6&4294967295|X>>>26),X=Z+(V^(H|~W))+ne[15]+4264355552&4294967295,Z=H+(X<<10&4294967295|X>>>22),X=W+(H^(Z|~V))+ne[6]+2734768916&4294967295,W=Z+(X<<15&4294967295|X>>>17),X=V+(Z^(W|~H))+ne[13]+1309151649&4294967295,V=W+(X<<21&4294967295|X>>>11),X=H+(W^(V|~Z))+ne[4]+4149444226&4294967295,H=V+(X<<6&4294967295|X>>>26),X=Z+(V^(H|~W))+ne[11]+3174756917&4294967295,Z=H+(X<<10&4294967295|X>>>22),X=W+(H^(Z|~V))+ne[2]+718787259&4294967295,W=Z+(X<<15&4294967295|X>>>17),X=V+(Z^(W|~H))+ne[9]+3951481745&4294967295,j.g[0]=j.g[0]+H&4294967295,j.g[1]=j.g[1]+(W+(X<<21&4294967295|X>>>11))&4294967295,j.g[2]=j.g[2]+W&4294967295,j.g[3]=j.g[3]+Z&4294967295}o.prototype.v=function(j,H){H===void 0&&(H=j.length);const V=H-this.blockSize,ne=this.C;let W=this.h,Z=0;for(;Z<H;){if(W==0)for(;Z<=V;)u(this,j,Z),Z+=this.blockSize;if(typeof j=="string"){for(;Z<H;)if(ne[W++]=j.charCodeAt(Z++),W==this.blockSize){u(this,ne),W=0;break}}else for(;Z<H;)if(ne[W++]=j[Z++],W==this.blockSize){u(this,ne),W=0;break}}this.h=W,this.o+=H},o.prototype.A=function(){var j=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);j[0]=128;for(var H=1;H<j.length-8;++H)j[H]=0;H=this.o*8;for(var V=j.length-8;V<j.length;++V)j[V]=H&255,H/=256;for(this.v(j),j=Array(16),H=0,V=0;V<4;++V)for(let ne=0;ne<32;ne+=8)j[H++]=this.g[V]>>>ne&255;return j};function d(j,H){var V=v;return Object.prototype.hasOwnProperty.call(V,j)?V[j]:V[j]=H(j)}function y(j,H){this.h=H;const V=[];let ne=!0;for(let W=j.length-1;W>=0;W--){const Z=j[W]|0;ne&&Z==H||(V[W]=Z,ne=!1)}this.g=V}var v={};function b(j){return-128<=j&&j<128?d(j,function(H){return new y([H|0],H<0?-1:0)}):new y([j|0],j<0?-1:0)}function _(j){if(isNaN(j)||!isFinite(j))return I;if(j<0)return Y(_(-j));const H=[];let V=1;for(let ne=0;j>=V;ne++)H[ne]=j/V|0,V*=4294967296;return new y(H,0)}function C(j,H){if(j.length==0)throw Error("number format error: empty string");if(H=H||10,H<2||36<H)throw Error("radix out of range: "+H);if(j.charAt(0)=="-")return Y(C(j.substring(1),H));if(j.indexOf("-")>=0)throw Error('number format error: interior "-" character');const V=_(Math.pow(H,8));let ne=I;for(let Z=0;Z<j.length;Z+=8){var W=Math.min(8,j.length-Z);const X=parseInt(j.substring(Z,Z+W),H);W<8?(W=_(Math.pow(H,W)),ne=ne.j(W).add(_(X))):(ne=ne.j(V),ne=ne.add(_(X)))}return ne}var I=b(0),L=b(1),B=b(16777216);i=y.prototype,i.m=function(){if(K(this))return-Y(this).m();let j=0,H=1;for(let V=0;V<this.g.length;V++){const ne=this.i(V);j+=(ne>=0?ne:4294967296+ne)*H,H*=4294967296}return j},i.toString=function(j){if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(q(this))return"0";if(K(this))return"-"+Y(this).toString(j);const H=_(Math.pow(j,6));var V=this;let ne="";for(;;){const W=_e(V,H).g;V=ae(V,W.j(H));let Z=((V.g.length>0?V.g[0]:V.h)>>>0).toString(j);if(V=W,q(V))return Z+ne;for(;Z.length<6;)Z="0"+Z;ne=Z+ne}},i.i=function(j){return j<0?0:j<this.g.length?this.g[j]:this.h};function q(j){if(j.h!=0)return!1;for(let H=0;H<j.g.length;H++)if(j.g[H]!=0)return!1;return!0}function K(j){return j.h==-1}i.l=function(j){return j=ae(this,j),K(j)?-1:q(j)?0:1};function Y(j){const H=j.g.length,V=[];for(let ne=0;ne<H;ne++)V[ne]=~j.g[ne];return new y(V,~j.h).add(L)}i.abs=function(){return K(this)?Y(this):this},i.add=function(j){const H=Math.max(this.g.length,j.g.length),V=[];let ne=0;for(let W=0;W<=H;W++){let Z=ne+(this.i(W)&65535)+(j.i(W)&65535),X=(Z>>>16)+(this.i(W)>>>16)+(j.i(W)>>>16);ne=X>>>16,Z&=65535,X&=65535,V[W]=X<<16|Z}return new y(V,V[V.length-1]&-2147483648?-1:0)};function ae(j,H){return j.add(Y(H))}i.j=function(j){if(q(this)||q(j))return I;if(K(this))return K(j)?Y(this).j(Y(j)):Y(Y(this).j(j));if(K(j))return Y(this.j(Y(j)));if(this.l(B)<0&&j.l(B)<0)return _(this.m()*j.m());const H=this.g.length+j.g.length,V=[];for(var ne=0;ne<2*H;ne++)V[ne]=0;for(ne=0;ne<this.g.length;ne++)for(let W=0;W<j.g.length;W++){const Z=this.i(ne)>>>16,X=this.i(ne)&65535,We=j.i(W)>>>16,he=j.i(W)&65535;V[2*ne+2*W]+=X*he,me(V,2*ne+2*W),V[2*ne+2*W+1]+=Z*he,me(V,2*ne+2*W+1),V[2*ne+2*W+1]+=X*We,me(V,2*ne+2*W+1),V[2*ne+2*W+2]+=Z*We,me(V,2*ne+2*W+2)}for(j=0;j<H;j++)V[j]=V[2*j+1]<<16|V[2*j];for(j=H;j<2*H;j++)V[j]=0;return new y(V,0)};function me(j,H){for(;(j[H]&65535)!=j[H];)j[H+1]+=j[H]>>>16,j[H]&=65535,H++}function $(j,H){this.g=j,this.h=H}function _e(j,H){if(q(H))throw Error("division by zero");if(q(j))return new $(I,I);if(K(j))return H=_e(Y(j),H),new $(Y(H.g),Y(H.h));if(K(H))return H=_e(j,Y(H)),new $(Y(H.g),H.h);if(j.g.length>30){if(K(j)||K(H))throw Error("slowDivide_ only works with positive integers.");for(var V=L,ne=H;ne.l(j)<=0;)V=je(V),ne=je(ne);var W=De(V,1),Z=De(ne,1);for(ne=De(ne,2),V=De(V,2);!q(ne);){var X=Z.add(ne);X.l(j)<=0&&(W=W.add(V),Z=X),ne=De(ne,1),V=De(V,1)}return H=ae(j,W.j(H)),new $(W,H)}for(W=I;j.l(H)>=0;){for(V=Math.max(1,Math.floor(j.m()/H.m())),ne=Math.ceil(Math.log(V)/Math.LN2),ne=ne<=48?1:Math.pow(2,ne-48),Z=_(V),X=Z.j(H);K(X)||X.l(j)>0;)V-=ne,Z=_(V),X=Z.j(H);q(Z)&&(Z=L),W=W.add(Z),j=ae(j,X)}return new $(W,j)}i.B=function(j){return _e(this,j).h},i.and=function(j){const H=Math.max(this.g.length,j.g.length),V=[];for(let ne=0;ne<H;ne++)V[ne]=this.i(ne)&j.i(ne);return new y(V,this.h&j.h)},i.or=function(j){const H=Math.max(this.g.length,j.g.length),V=[];for(let ne=0;ne<H;ne++)V[ne]=this.i(ne)|j.i(ne);return new y(V,this.h|j.h)},i.xor=function(j){const H=Math.max(this.g.length,j.g.length),V=[];for(let ne=0;ne<H;ne++)V[ne]=this.i(ne)^j.i(ne);return new y(V,this.h^j.h)};function je(j){const H=j.g.length+1,V=[];for(let ne=0;ne<H;ne++)V[ne]=j.i(ne)<<1|j.i(ne-1)>>>31;return new y(V,j.h)}function De(j,H){const V=H>>5;H%=32;const ne=j.g.length-V,W=[];for(let Z=0;Z<ne;Z++)W[Z]=H>0?j.i(Z+V)>>>H|j.i(Z+V+1)<<32-H:j.i(Z+V);return new y(W,j.h)}o.prototype.digest=o.prototype.A,o.prototype.reset=o.prototype.u,o.prototype.update=o.prototype.v,b_=o,y.prototype.add=y.prototype.add,y.prototype.multiply=y.prototype.j,y.prototype.modulo=y.prototype.B,y.prototype.compare=y.prototype.l,y.prototype.toNumber=y.prototype.m,y.prototype.toString=y.prototype.toString,y.prototype.getBits=y.prototype.i,y.fromNumber=_,y.fromString=C,oo=y}).apply(typeof Ex<"u"?Ex:typeof self<"u"?self:typeof window<"u"?window:{});var Rh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var T_,Hc,v_,Hh,x1,C_,S_,I_;(function(){var i,e=Object.defineProperty;function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Rh=="object"&&Rh];for(var N=0;N<p.length;++N){var D=p[N];if(D&&D.Math==Math)return D}throw Error("Cannot find global object")}var o=n(this);function u(p,N){if(N)e:{var D=o;p=p.split(".");for(var F=0;F<p.length-1;F++){var le=p[F];if(!(le in D))break e;D=D[le]}p=p[p.length-1],F=D[p],N=N(F),N!=F&&N!=null&&e(D,p,{configurable:!0,writable:!0,value:N})}}u("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),u("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),u("Object.entries",function(p){return p||function(N){var D=[],F;for(F in N)Object.prototype.hasOwnProperty.call(N,F)&&D.push([F,N[F]]);return D}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},y=this||self;function v(p){var N=typeof p;return N=="object"&&p!=null||N=="function"}function b(p,N,D){return p.call.apply(p.bind,arguments)}function _(p,N,D){return _=b,_.apply(null,arguments)}function C(p,N){var D=Array.prototype.slice.call(arguments,1);return function(){var F=D.slice();return F.push.apply(F,arguments),p.apply(this,F)}}function I(p,N){function D(){}D.prototype=N.prototype,p.Z=N.prototype,p.prototype=new D,p.prototype.constructor=p,p.Ob=function(F,le,Ee){for(var Be=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)Be[ut-2]=arguments[ut];return N.prototype[le].apply(F,Be)}}var L=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function B(p){const N=p.length;if(N>0){const D=Array(N);for(let F=0;F<N;F++)D[F]=p[F];return D}return[]}function q(p,N){for(let F=1;F<arguments.length;F++){const le=arguments[F];var D=typeof le;if(D=D!="object"?D:le?Array.isArray(le)?"array":D:"null",D=="array"||D=="object"&&typeof le.length=="number"){D=p.length||0;const Ee=le.length||0;p.length=D+Ee;for(let Be=0;Be<Ee;Be++)p[D+Be]=le[Be]}else p.push(le)}}class K{constructor(N,D){this.i=N,this.j=D,this.h=0,this.g=null}get(){let N;return this.h>0?(this.h--,N=this.g,this.g=N.next,N.next=null):N=this.i(),N}}function Y(p){y.setTimeout(()=>{throw p},0)}function ae(){var p=j;let N=null;return p.g&&(N=p.g,p.g=p.g.next,p.g||(p.h=null),N.next=null),N}class me{constructor(){this.h=this.g=null}add(N,D){const F=$.get();F.set(N,D),this.h?this.h.next=F:this.g=F,this.h=F}}var $=new K(()=>new _e,p=>p.reset());class _e{constructor(){this.next=this.g=this.h=null}set(N,D){this.h=N,this.g=D,this.next=null}reset(){this.next=this.g=this.h=null}}let je,De=!1,j=new me,H=()=>{const p=Promise.resolve(void 0);je=()=>{p.then(V)}};function V(){for(var p;p=ae();){try{p.h.call(p.g)}catch(D){Y(D)}var N=$;N.j(p),N.h<100&&(N.h++,p.next=N.g,N.g=p)}De=!1}function ne(){this.u=this.u,this.C=this.C}ne.prototype.u=!1,ne.prototype.dispose=function(){this.u||(this.u=!0,this.N())},ne.prototype[Symbol.dispose]=function(){this.dispose()},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(p,N){this.type=p,this.g=this.target=N,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var Z=(function(){if(!y.addEventListener||!Object.defineProperty)return!1;var p=!1,N=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const D=()=>{};y.addEventListener("test",D,N),y.removeEventListener("test",D,N)}catch{}return p})();function X(p){return/^[\s\xa0]*$/.test(p)}function We(p,N){W.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,N)}I(We,W),We.prototype.init=function(p,N){const D=this.type=p.type,F=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=N,N=p.relatedTarget,N||(D=="mouseover"?N=p.fromElement:D=="mouseout"&&(N=p.toElement)),this.relatedTarget=N,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&We.Z.h.call(this)},We.prototype.h=function(){We.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var he="closure_listenable_"+(Math.random()*1e6|0),pe=0;function be(p,N,D,F,le){this.listener=p,this.proxy=null,this.src=N,this.type=D,this.capture=!!F,this.ha=le,this.key=++pe,this.da=this.fa=!1}function qe(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function ot(p,N,D){for(const F in p)N.call(D,p[F],F,p)}function gt(p,N){for(const D in p)N.call(void 0,p[D],D,p)}function ie(p){const N={};for(const D in p)N[D]=p[D];return N}const we="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ke(p,N){let D,F;for(let le=1;le<arguments.length;le++){F=arguments[le];for(D in F)p[D]=F[D];for(let Ee=0;Ee<we.length;Ee++)D=we[Ee],Object.prototype.hasOwnProperty.call(F,D)&&(p[D]=F[D])}}function Ve(p){this.src=p,this.g={},this.h=0}Ve.prototype.add=function(p,N,D,F,le){const Ee=p.toString();p=this.g[Ee],p||(p=this.g[Ee]=[],this.h++);const Be=Le(p,N,F,le);return Be>-1?(N=p[Be],D||(N.fa=!1)):(N=new be(N,this.src,Ee,!!F,le),N.fa=D,p.push(N)),N};function tt(p,N){const D=N.type;if(D in p.g){var F=p.g[D],le=Array.prototype.indexOf.call(F,N,void 0),Ee;(Ee=le>=0)&&Array.prototype.splice.call(F,le,1),Ee&&(qe(N),p.g[D].length==0&&(delete p.g[D],p.h--))}}function Le(p,N,D,F){for(let le=0;le<p.length;++le){const Ee=p[le];if(!Ee.da&&Ee.listener==N&&Ee.capture==!!D&&Ee.ha==F)return le}return-1}var ct="closure_lm_"+(Math.random()*1e6|0),yt={};function Kt(p,N,D,F,le){if(Array.isArray(N)){for(let Ee=0;Ee<N.length;Ee++)Kt(p,N[Ee],D,F,le);return null}return D=Gt(D),p&&p[he]?p.J(N,D,v(F)?!!F.capture:!1,le):zi(p,N,D,!1,F,le)}function zi(p,N,D,F,le,Ee){if(!N)throw Error("Invalid event type");const Be=v(le)?!!le.capture:!!le;let ut=Hi(p);if(ut||(p[ct]=ut=new Ve(p)),D=ut.add(N,D,F,Be,Ee),D.proxy)return D;if(F=bn(),D.proxy=F,F.src=p,F.listener=D,p.addEventListener)Z||(le=Be),le===void 0&&(le=!1),p.addEventListener(N.toString(),F,le);else if(p.attachEvent)p.attachEvent(ci(N.toString()),F);else if(p.addListener&&p.removeListener)p.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return D}function bn(){function p(D){return N.call(p.src,p.listener,D)}const N=Qn;return p}function gr(p,N,D,F,le){if(Array.isArray(N))for(var Ee=0;Ee<N.length;Ee++)gr(p,N[Ee],D,F,le);else F=v(F)?!!F.capture:!!F,D=Gt(D),p&&p[he]?(p=p.i,Ee=String(N).toString(),Ee in p.g&&(N=p.g[Ee],D=Le(N,D,F,le),D>-1&&(qe(N[D]),Array.prototype.splice.call(N,D,1),N.length==0&&(delete p.g[Ee],p.h--)))):p&&(p=Hi(p))&&(N=p.g[N.toString()],p=-1,N&&(p=Le(N,D,F,le)),(D=p>-1?N[p]:null)&&Et(D))}function Et(p){if(typeof p!="number"&&p&&!p.da){var N=p.src;if(N&&N[he])tt(N.i,p);else{var D=p.type,F=p.proxy;N.removeEventListener?N.removeEventListener(D,F,p.capture):N.detachEvent?N.detachEvent(ci(D),F):N.addListener&&N.removeListener&&N.removeListener(F),(D=Hi(N))?(tt(D,p),D.h==0&&(D.src=null,N[ct]=null)):qe(p)}}}function ci(p){return p in yt?yt[p]:yt[p]="on"+p}function Qn(p,N){if(p.da)p=!0;else{N=new We(N,this);const D=p.listener,F=p.ha||p.src;p.fa&&Et(p),p=D.call(F,N)}return p}function Hi(p){return p=p[ct],p instanceof Ve?p:null}var mn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Gt(p){return typeof p=="function"?p:(p[mn]||(p[mn]=function(N){return p.handleEvent(N)}),p[mn])}function Qe(){ne.call(this),this.i=new Ve(this),this.M=this,this.G=null}I(Qe,ne),Qe.prototype[he]=!0,Qe.prototype.removeEventListener=function(p,N,D,F){gr(this,p,N,D,F)};function En(p,N){var D,F=p.G;if(F)for(D=[];F;F=F.G)D.push(F);if(p=p.M,F=N.type||N,typeof N=="string")N=new W(N,p);else if(N instanceof W)N.target=N.target||p;else{var le=N;N=new W(F,p),ke(N,le)}le=!0;let Ee,Be;if(D)for(Be=D.length-1;Be>=0;Be--)Ee=N.g=D[Be],le=Fe(Ee,F,!0,N)&&le;if(Ee=N.g=p,le=Fe(Ee,F,!0,N)&&le,le=Fe(Ee,F,!1,N)&&le,D)for(Be=0;Be<D.length;Be++)Ee=N.g=D[Be],le=Fe(Ee,F,!1,N)&&le}Qe.prototype.N=function(){if(Qe.Z.N.call(this),this.i){var p=this.i;for(const N in p.g){const D=p.g[N];for(let F=0;F<D.length;F++)qe(D[F]);delete p.g[N],p.h--}}this.G=null},Qe.prototype.J=function(p,N,D,F){return this.i.add(String(p),N,!1,D,F)},Qe.prototype.K=function(p,N,D,F){return this.i.add(String(p),N,!0,D,F)};function Fe(p,N,D,F){if(N=p.i.g[String(N)],!N)return!0;N=N.concat();let le=!0;for(let Ee=0;Ee<N.length;++Ee){const Be=N[Ee];if(Be&&!Be.da&&Be.capture==D){const ut=Be.listener,Vn=Be.ha||Be.src;Be.fa&&tt(p.i,Be),le=ut.call(Vn,F)!==!1&&le}}return le&&!F.defaultPrevented}function xs(p,N){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=_(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(N)>2147483647?-1:y.setTimeout(p,N||0)}function tr(p){p.g=xs(()=>{p.g=null,p.i&&(p.i=!1,tr(p))},p.l);const N=p.h;p.h=null,p.m.apply(null,N)}class hn extends ne{constructor(N,D){super(),this.m=N,this.l=D,this.h=null,this.i=!1,this.g=null}j(N){this.h=arguments,this.g?this.i=!0:tr(this)}N(){super.N(),this.g&&(y.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mr(p){ne.call(this),this.h=p,this.g={}}I(mr,ne);var ui=[];function ys(p){ot(p.g,function(N,D){this.g.hasOwnProperty(D)&&Et(N)},p),p.g={}}mr.prototype.N=function(){mr.Z.N.call(this),ys(this)},mr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ri=y.JSON.stringify,Fn=y.JSON.parse,Cs=class{stringify(p){return y.JSON.stringify(p,void 0)}parse(p){return y.JSON.parse(p,void 0)}};function Yr(){}function Sa(){}var Wt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Oe(){W.call(this,"d")}I(Oe,W);function qt(){W.call(this,"c")}I(qt,W);var rt={},fn=null;function pr(){return fn=fn||new Qe}rt.Ia="serverreachability";function Ss(p){W.call(this,rt.Ia,p)}I(Ss,W);function nr(p){const N=pr();En(N,new Ss(N))}rt.STAT_EVENT="statevent";function At(p,N){W.call(this,rt.STAT_EVENT,p),this.stat=N}I(At,W);function an(p){const N=pr();En(N,new At(N,p))}rt.Ja="timingevent";function ir(p,N){W.call(this,rt.Ja,p),this.size=N}I(ir,W);function rr(p,N){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return y.setTimeout(function(){p()},N)}function Sn(){this.g=!0}Sn.prototype.ua=function(){this.g=!1};function Gs(p,N,D,F,le,Ee){p.info(function(){if(p.g)if(Ee){var Be="",ut=Ee.split("&");for(let Yt=0;Yt<ut.length;Yt++){var Vn=ut[Yt].split("=");if(Vn.length>1){const An=Vn[0];Vn=Vn[1];const lr=An.split("_");Be=lr.length>=2&&lr[1]=="type"?Be+(An+"="+Vn+"&"):Be+(An+"=redacted&")}}}else Be=null;else Be=Ee;return"XMLHTTP REQ ("+F+") [attempt "+le+"]: "+N+`
`+D+`
`+Be})}function zn(p,N,D,F,le,Ee,Be){p.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+le+"]: "+N+`
`+D+`
`+Ee+" "+Be})}function _i(p,N,D,F){p.info(function(){return"XMLHTTP TEXT ("+N+"): "+Gi(p,D)+(F?" "+F:"")})}function xr(p,N){p.info(function(){return"TIMEOUT: "+N})}Sn.prototype.info=function(){};function Gi(p,N){if(!p.g)return N;if(!N)return null;try{const Ee=JSON.parse(N);if(Ee){for(p=0;p<Ee.length;p++)if(Array.isArray(Ee[p])){var D=Ee[p];if(!(D.length<2)){var F=D[1];if(Array.isArray(F)&&!(F.length<1)){var le=F[0];if(le!="noop"&&le!="stop"&&le!="close")for(let Be=1;Be<F.length;Be++)F[Be]=""}}}}return ri(Ee)}catch{return N}}var Xr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ee={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ht;function nt(){}I(nt,Yr),nt.prototype.g=function(){return new XMLHttpRequest},ht=new nt;function In(p){return encodeURIComponent(String(p))}function en(p){var N=1;p=p.split(":");const D=[];for(;N>0&&p.length;)D.push(p.shift()),N--;return p.length&&D.push(p.join(":")),D}function Ue(p,N,D,F){this.j=p,this.i=N,this.l=D,this.S=F||1,this.V=new mr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Hn}function Hn(){this.i=null,this.g="",this.h=!1}var Tn={},wt={};function hi(p,N,D){p.M=1,p.A=Yi(Bn(N)),p.u=D,p.R=!0,fi(p,null)}function fi(p,N){p.F=Date.now(),Kr(p),p.B=Bn(p.A);var D=p.B,F=p.S;Array.isArray(F)||(F=[String(F)]),on(D.i,"t",F),p.C=0,D=p.j.L,p.h=new Hn,p.g=Ma(p.j,D?N:null,!p.u),p.P>0&&(p.O=new hn(_(p.Y,p,p.g),p.P)),N=p.V,D=p.g,F=p.ba;var le="readystatechange";Array.isArray(le)||(le&&(ui[0]=le.toString()),le=ui);for(let Ee=0;Ee<le.length;Ee++){const Be=Kt(D,le[Ee],F||N.handleEvent,!1,N.h||N);if(!Be)break;N.g[Be.key]=Be}N=p.J?ie(p.J):{},p.u?(p.v||(p.v="POST"),N["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,N)):(p.v="GET",p.g.ea(p.B,p.v,null,N)),nr(),Gs(p.i,p.v,p.B,p.l,p.S,p.u)}Ue.prototype.ba=function(p){p=p.target;const N=this.O;N&&_r(p)==3?N.j():this.Y(p)},Ue.prototype.Y=function(p){try{if(p==this.g)e:{const ut=_r(this.g),Vn=this.g.ya(),Yt=this.g.ca();if(!(ut<3)&&(ut!=3||this.g&&(this.h.h||this.g.la()||Yn(this.g)))){this.K||ut!=4||Vn==7||(Vn==8||Yt<=0?nr(3):nr(2)),vn(this);var N=this.g.ca();this.X=N;var D=Ia(this);if(this.o=N==200,zn(this.i,this.v,this.B,this.l,this.S,ut,N),this.o){if(this.U&&!this.L){t:{if(this.g){var F,le=this.g;if((F=le.g?le.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!X(F)){var Ee=F;break t}}Ee=null}if(p=Ee)_i(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ai(this,p);else{this.o=!1,this.m=3,an(12),qi(this),Ot(this);break e}}if(this.R){p=!0;let An;for(;!this.K&&this.C<D.length;)if(An=il(this,D),An==wt){ut==4&&(this.m=4,an(14),p=!1),_i(this.i,this.l,null,"[Incomplete Response]");break}else if(An==Tn){this.m=4,an(15),_i(this.i,this.l,D,"[Invalid Chunk]"),p=!1;break}else _i(this.i,this.l,An,null),Ai(this,An);if(sr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ut!=4||D.length!=0||this.h.h||(this.m=1,an(16),p=!1),this.o=this.o&&p,!p)_i(this.i,this.l,D,"[Invalid Chunked Response]"),qi(this),Ot(this);else if(D.length>0&&!this.W){this.W=!0;var Be=this.j;Be.g==this&&Be.aa&&!Be.P&&(Be.j.info("Great, no buffering proxy detected. Bytes received: "+D.length),xe(Be),Be.P=!0,an(11))}}else _i(this.i,this.l,D,null),Ai(this,D);ut==4&&qi(this),this.o&&!this.K&&(ut==4?Qs(this.j,this):(this.o=!1,Kr(this)))}else or(this.g),N==400&&D.indexOf("Unknown SID")>0?(this.m=3,an(12)):(this.m=0,an(13)),qi(this),Ot(this)}}}catch{}finally{}};function Ia(p){if(!sr(p))return p.g.la();const N=Yn(p.g);if(N==="")return"";let D="";const F=N.length,le=_r(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return qi(p),Ot(p),"";p.h.i=new y.TextDecoder}for(let Ee=0;Ee<F;Ee++)p.h.h=!0,D+=p.h.i.decode(N[Ee],{stream:!(le&&Ee==F-1)});return N.length=0,p.h.g+=D,p.C=0,p.h.g}function sr(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function il(p,N){var D=p.C,F=N.indexOf(`
`,D);return F==-1?wt:(D=Number(N.substring(D,F)),isNaN(D)?Tn:(F+=1,F+D>N.length?wt:(N=N.slice(F,F+D),p.C=F+D,N)))}Ue.prototype.cancel=function(){this.K=!0,qi(this)};function Kr(p){p.T=Date.now()+p.H,Ni(p,p.H)}function Ni(p,N){if(p.D!=null)throw Error("WatchDog timer not null");p.D=rr(_(p.aa,p),N)}function vn(p){p.D&&(y.clearTimeout(p.D),p.D=null)}Ue.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(xr(this.i,this.B),this.M!=2&&(nr(),an(17)),qi(this),this.m=2,Ot(this)):Ni(this,this.T-p)};function Ot(p){p.j.I==0||p.K||Qs(p.j,p)}function qi(p){vn(p);var N=p.O;N&&typeof N.dispose=="function"&&N.dispose(),p.O=null,ys(p.V),p.g&&(N=p.g,p.g=null,N.abort(),N.dispose())}function Ai(p,N){try{var D=p.j;if(D.I!=0&&(D.g==p||Ri(D.h,p))){if(!p.L&&Ri(D.h,p)&&D.I==3){try{var F=D.Ba.g.parse(N)}catch{F=null}if(Array.isArray(F)&&F.length==3){var le=F;if(le[0]==0){e:if(!D.v){if(D.g)if(D.g.F+3e3<p.F)kn(D),As(D);else break e;Ws(D),an(18)}}else D.xa=le[1],0<D.xa-D.K&&le[2]<37500&&D.F&&D.A==0&&!D.C&&(D.C=rr(_(D.Va,D),6e3));$t(D.h)<=1&&D.ta&&(D.ta=void 0)}else Zr(D,11)}else if((p.L||D.g==p)&&kn(D),!X(N))for(le=D.Ba.g.parse(N),N=0;N<le.length;N++){let Yt=le[N];const An=Yt[0];if(!(An<=D.K))if(D.K=An,Yt=Yt[1],D.I==2)if(Yt[0]=="c"){D.M=Yt[1],D.ba=Yt[2];const lr=Yt[3];lr!=null&&(D.ka=lr,D.j.info("VER="+D.ka));const es=Yt[4];es!=null&&(D.za=es,D.j.info("SVER="+D.za));const Ci=Yt[5];Ci!=null&&typeof Ci=="number"&&Ci>0&&(F=1.5*Ci,D.O=F,D.j.info("backChannelRequestTimeoutMs_="+F)),F=D;const cr=p.g;if(cr){const Js=cr.g?cr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Js){var Ee=F.h;Ee.g||Js.indexOf("spdy")==-1&&Js.indexOf("quic")==-1&&Js.indexOf("h2")==-1||(Ee.j=Ee.l,Ee.g=new Set,Ee.h&&(wo(Ee,Ee.h),Ee.h=null))}if(F.G){const ts=cr.g?cr.g.getResponseHeader("X-HTTP-Session-Id"):null;ts&&(F.wa=ts,st(F.J,F.G,ts))}}D.I=3,D.l&&D.l.ra(),D.aa&&(D.T=Date.now()-p.F,D.j.info("Handshake RTT: "+D.T+"ms")),F=D;var Be=p;if(F.na=sl(F,F.L?F.ba:null,F.W),Be.L){Ut(F.h,Be);var ut=Be,Vn=F.O;Vn&&(ut.H=Vn),ut.D&&(vn(ut),Kr(ut)),F.g=Be}else Pr(F);D.i.length>0&&Qr(D)}else Yt[0]!="stop"&&Yt[0]!="close"||Zr(D,7);else D.I==3&&(Yt[0]=="stop"||Yt[0]=="close"?Yt[0]=="stop"?Zr(D,7):Ra(D):Yt[0]!="noop"&&D.l&&D.l.qa(Yt),D.A=0)}}nr(4)}catch{}}var Pn=class{constructor(p,N){this.g=p,this.map=N}};function Ie(p){this.l=p||10,y.PerformanceNavigationTiming?(p=y.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(y.chrome&&y.chrome.loadTimes&&y.chrome.loadTimes()&&y.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ao(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function $t(p){return p.h?1:p.g?p.g.size:0}function Ri(p,N){return p.h?p.h==N:p.g?p.g.has(N):!1}function wo(p,N){p.g?p.g.add(N):p.h=N}function Ut(p,N){p.h&&p.h==N?p.h=null:p.g&&p.g.has(N)&&p.g.delete(N)}Ie.prototype.cancel=function(){if(this.i=Dt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function Dt(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let N=p.i;for(const D of p.g.values())N=N.concat(D.G);return N}return B(p.i)}var Ct=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Is(p,N){if(p){p=p.split("&");for(let D=0;D<p.length;D++){const F=p[D].indexOf("=");let le,Ee=null;F>=0?(le=p[D].substring(0,F),Ee=p[D].substring(F+1)):le=p[D],N(le,Ee?decodeURIComponent(Ee.replace(/\+/g," ")):"")}}}function Oi(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let N;p instanceof Oi?(this.l=p.l,Nt(this,p.j),this.o=p.o,this.g=p.g,Di(this,p.u),this.h=p.h,bo(this,To(p.i)),this.m=p.m):p&&(N=String(p).match(Ct))?(this.l=!1,Nt(this,N[1]||"",!0),this.o=Wr(N[2]||""),this.g=Wr(N[3]||"",!0),Di(this,N[4]),this.h=Wr(N[5]||"",!0),bo(this,N[6]||"",!0),this.m=Wr(N[7]||"")):(this.l=!1,this.i=new si(null,this.l))}Oi.prototype.toString=function(){const p=[];var N=this.j;N&&p.push(yr(N,Gn,!0),":");var D=this.g;return(D||N=="file")&&(p.push("//"),(N=this.o)&&p.push(yr(N,Gn,!0),"@"),p.push(In(D).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D=this.u,D!=null&&p.push(":",String(D))),(D=this.h)&&(this.g&&D.charAt(0)!="/"&&p.push("/"),p.push(yr(D,D.charAt(0)=="/"?z:ue,!0))),(D=this.i.toString())&&p.push("?",D),(D=this.m)&&p.push("#",yr(D,qn)),p.join("")},Oi.prototype.resolve=function(p){const N=Bn(this);let D=!!p.j;D?Nt(N,p.j):D=!!p.o,D?N.o=p.o:D=!!p.g,D?N.g=p.g:D=p.u!=null;var F=p.h;if(D)Di(N,p.u);else if(D=!!p.h){if(F.charAt(0)!="/")if(this.g&&!this.h)F="/"+F;else{var le=N.h.lastIndexOf("/");le!=-1&&(F=N.h.slice(0,le+1)+F)}if(le=F,le==".."||le==".")F="";else if(le.indexOf("./")!=-1||le.indexOf("/.")!=-1){F=le.lastIndexOf("/",0)==0,le=le.split("/");const Ee=[];for(let Be=0;Be<le.length;){const ut=le[Be++];ut=="."?F&&Be==le.length&&Ee.push(""):ut==".."?((Ee.length>1||Ee.length==1&&Ee[0]!="")&&Ee.pop(),F&&Be==le.length&&Ee.push("")):(Ee.push(ut),F=!0)}F=Ee.join("/")}else F=le}return D?N.h=F:D=p.i.toString()!=="",D?bo(N,To(p.i)):D=!!p.m,D&&(N.m=p.m),N};function Bn(p){return new Oi(p)}function Nt(p,N,D){p.j=D?Wr(N,!0):N,p.j&&(p.j=p.j.replace(/:$/,""))}function Di(p,N){if(N){if(N=Number(N),isNaN(N)||N<0)throw Error("Bad port number "+N);p.u=N}else p.u=null}function bo(p,N,D){N instanceof si?(p.i=N,Rs(p.i,p.l)):(D||(N=yr(N,Ye)),p.i=new si(N,p.l))}function st(p,N,D){p.i.set(N,D)}function Yi(p){return st(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function Wr(p,N){return p?N?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function yr(p,N,D){return typeof p=="string"?(p=encodeURI(p).replace(N,bt),D&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function bt(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var Gn=/[#\/\?@]/g,ue=/[#\?:]/g,z=/[#\?]/g,Ye=/[#\?@]/g,qn=/#/g;function si(p,N){this.h=this.g=null,this.i=p||null,this.j=!!N}function Xi(p){p.g||(p.g=new Map,p.h=0,p.i&&Is(p.i,function(N,D){p.add(decodeURIComponent(N.replace(/\+/g," ")),D)}))}i=si.prototype,i.add=function(p,N){Xi(this),this.i=null,p=Ns(this,p);let D=this.g.get(p);return D||this.g.set(p,D=[]),D.push(N),this.h+=1,this};function Na(p,N){Xi(p),N=Ns(p,N),p.g.has(N)&&(p.i=null,p.h-=p.g.get(N).length,p.g.delete(N))}function vi(p,N){return Xi(p),N=Ns(p,N),p.g.has(N)}i.forEach=function(p,N){Xi(this),this.g.forEach(function(D,F){D.forEach(function(le){p.call(N,le,F,this)},this)},this)};function Ze(p,N){Xi(p);let D=[];if(typeof N=="string")vi(p,N)&&(D=D.concat(p.g.get(Ns(p,N))));else for(p=Array.from(p.g.values()),N=0;N<p.length;N++)D=D.concat(p[N]);return D}i.set=function(p,N){return Xi(this),this.i=null,p=Ns(this,p),vi(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[N]),this.h+=1,this},i.get=function(p,N){return p?(p=Ze(this,p),p.length>0?String(p[0]):N):N};function on(p,N,D){Na(p,N),D.length>0&&(p.i=null,p.g.set(Ns(p,N),B(D)),p.h+=D.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],N=Array.from(this.g.keys());for(let F=0;F<N.length;F++){var D=N[F];const le=In(D);D=Ze(this,D);for(let Ee=0;Ee<D.length;Ee++){let Be=le;D[Ee]!==""&&(Be+="="+In(D[Ee])),p.push(Be)}}return this.i=p.join("&")};function To(p){const N=new si;return N.i=p.i,p.g&&(N.g=new Map(p.g),N.h=p.h),N}function Ns(p,N){return N=String(N),p.j&&(N=N.toLowerCase()),N}function Rs(p,N){N&&!p.j&&(Xi(p),p.i=null,p.g.forEach(function(D,F){const le=F.toLowerCase();F!=le&&(Na(this,F),on(this,le,D))},p)),p.j=N}function Ki(p,N){const D=new Sn;if(y.Image){const F=new Image;F.onload=C(Er,D,"TestLoadImage: loaded",!0,N,F),F.onerror=C(Er,D,"TestLoadImage: error",!1,N,F),F.onabort=C(Er,D,"TestLoadImage: abort",!1,N,F),F.ontimeout=C(Er,D,"TestLoadImage: timeout",!1,N,F),y.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=p}else N(!1)}function qs(p,N){const D=new Sn,F=new AbortController,le=setTimeout(()=>{F.abort(),Er(D,"TestPingServer: timeout",!1,N)},1e4);fetch(p,{signal:F.signal}).then(Ee=>{clearTimeout(le),Ee.ok?Er(D,"TestPingServer: ok",!0,N):Er(D,"TestPingServer: server error",!1,N)}).catch(()=>{clearTimeout(le),Er(D,"TestPingServer: error",!1,N)})}function Er(p,N,D,F,le){try{le&&(le.onload=null,le.onerror=null,le.onabort=null,le.ontimeout=null),F(D)}catch{}}function _n(){this.g=new Cs}function Wi(p){this.i=p.Sb||null,this.h=p.ab||!1}I(Wi,Yr),Wi.prototype.g=function(){return new Qi(this.i,this.h)};function Qi(p,N){Qe.call(this),this.H=p,this.o=N,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}I(Qi,Qe),i=Qi.prototype,i.open=function(p,N){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=N,this.readyState=1,it(this)},i.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const N={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(N.body=p),(this.H||y).fetch(new Request(this.D,N)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Os(this)),this.readyState=0},i.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,it(this)),this.g&&(this.readyState=3,it(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof y.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Je(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function Je(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}i.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var N=p.value?p.value:new Uint8Array(0);(N=this.B.decode(N,{stream:!p.done}))&&(this.response=this.responseText+=N)}p.done?Os(this):it(this),this.readyState==3&&Je(this)}},i.Oa=function(p){this.g&&(this.response=this.responseText=p,Os(this))},i.Na=function(p){this.g&&(this.response=p,Os(this))},i.ga=function(){this.g&&Os(this)};function Os(p){p.readyState=4,p.l=null,p.j=null,p.B=null,it(p)}i.setRequestHeader=function(p,N){this.A.append(p,N)},i.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],N=this.h.entries();for(var D=N.next();!D.done;)D=D.value,p.push(D[0]+": "+D[1]),D=N.next();return p.join(`\r
`)};function it(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Qi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function ln(p){let N="";return ot(p,function(D,F){N+=F,N+=":",N+=D,N+=`\r
`}),N}function Ys(p,N,D){e:{for(F in D){var F=!1;break e}F=!0}F||(D=ln(D),typeof p=="string"?D!=null&&In(D):st(p,N,D))}function tn(p){Qe.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}I(tn,Qe);var Dr=/^https?$/i,Mr=["POST","PUT"];i=tn.prototype,i.Fa=function(p){this.H=p},i.ea=function(p,N,D,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);N=N?N.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ht.g(),this.g.onreadystatechange=L(_(this.Ca,this));try{this.B=!0,this.g.open(N,String(p),!0),this.B=!1}catch(Ee){Xs(this,Ee);return}if(p=D||"",D=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var le in F)D.set(le,F[le]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const Ee of F.keys())D.set(Ee,F.get(Ee));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(D.keys()).find(Ee=>Ee.toLowerCase()=="content-type"),le=y.FormData&&p instanceof y.FormData,!(Array.prototype.indexOf.call(Mr,N,void 0)>=0)||F||le||D.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ee,Be]of D)this.g.setRequestHeader(Ee,Be);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(Ee){Xs(this,Ee)}};function Xs(p,N){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=N,p.o=5,Es(p),ar(p)}function Es(p){p.A||(p.A=!0,En(p,"complete"),En(p,"error"))}i.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,En(this,"complete"),En(this,"abort"),ar(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ar(this,!0)),tn.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Lr(this):this.Xa())},i.Xa=function(){Lr(this)};function Lr(p){if(p.h&&typeof d<"u"){if(p.v&&_r(p)==4)setTimeout(p.Ca.bind(p),0);else if(En(p,"readystatechange"),_r(p)==4){p.h=!1;try{const Ee=p.ca();e:switch(Ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var N=!0;break e;default:N=!1}var D;if(!(D=N)){var F;if(F=Ee===0){let Be=String(p.D).match(Ct)[1]||null;!Be&&y.self&&y.self.location&&(Be=y.self.location.protocol.slice(0,-1)),F=!Dr.test(Be?Be.toLowerCase():"")}D=F}if(D)En(p,"complete"),En(p,"success");else{p.o=6;try{var le=_r(p)>2?p.g.statusText:""}catch{le=""}p.l=le+" ["+p.ca()+"]",Es(p)}}finally{ar(p)}}}}function ar(p,N){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const D=p.g;p.g=null,N||En(p,"ready");try{D.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function _r(p){return p.g?p.g.readyState:0}i.ca=function(){try{return _r(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(p){if(this.g){var N=this.g.responseText;return p&&N.indexOf(p)==0&&(N=N.substring(p.length)),Fn(N)}};function Yn(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function or(p){const N={};p=(p.g&&_r(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<p.length;F++){if(X(p[F]))continue;var D=en(p[F]);const le=D[0];if(D=D[1],typeof D!="string")continue;D=D.trim();const Ee=N[le]||[];N[le]=Ee,Ee.push(D)}gt(N,function(F){return F.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Nn(p,N,D){return D&&D.internalChannelParams&&D.internalChannelParams[p]||N}function _s(p){this.za=0,this.i=[],this.j=new Sn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Nn("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Nn("baseRetryDelayMs",5e3,p),this.Za=Nn("retryDelaySeedMs",1e4,p),this.Ta=Nn("forwardChannelMaxRetries",2,p),this.va=Nn("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new Ie(p&&p.concurrentRequestLimit),this.Ba=new _n,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=_s.prototype,i.ka=8,i.I=1,i.connect=function(p,N,D,F){an(0),this.W=p,this.H=N||{},D&&F!==void 0&&(this.H.OSID=D,this.H.OAID=F),this.F=this.X,this.J=sl(this,null,this.W),Qr(this)};function Ra(p){if(Oa(p),p.I==3){var N=p.V++,D=Bn(p.J);if(st(D,"SID",p.M),st(D,"RID",N),st(D,"TYPE","terminate"),Ds(p,D),N=new Ue(p,p.j,N),N.M=2,N.A=Yi(Bn(D)),D=!1,y.navigator&&y.navigator.sendBeacon)try{D=y.navigator.sendBeacon(N.A.toString(),"")}catch{}!D&&y.Image&&(new Image().src=N.A,D=!0),D||(N.g=Ma(N.j,null),N.g.ea(N.A)),N.F=Date.now(),Kr(N)}rl(p)}function As(p){p.g&&(xe(p),p.g.cancel(),p.g=null)}function Oa(p){As(p),p.v&&(y.clearTimeout(p.v),p.v=null),kn(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&y.clearTimeout(p.m),p.m=null)}function Qr(p){if(!Ao(p.h)&&!p.m){p.m=!0;var N=p.Ea;je||H(),De||(je(),De=!0),j.add(N,p),p.D=0}}function Da(p,N){return $t(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=N.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=rr(_(p.Ea,p,N),vo(p,p.D)),p.D++,!0)}i.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const le=new Ue(this,this.j,p);let Ee=this.o;if(this.U&&(Ee?(Ee=ie(Ee),ke(Ee,this.U)):Ee=this.U),this.u!==null||this.R||(le.J=Ee,Ee=null),this.S)e:{for(var N=0,D=0;D<this.i.length;D++){t:{var F=this.i[D];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break t}F=void 0}if(F===void 0)break;if(N+=F,N>4096){N=D;break e}if(N===4096||D===this.i.length-1){N=D+1;break e}}N=1e3}else N=1e3;N=Ks(this,le,N),D=Bn(this.J),st(D,"RID",p),st(D,"CVER",22),this.G&&st(D,"X-HTTP-Session-Id",this.G),Ds(this,D),Ee&&(this.R?N="headers="+In(ln(Ee))+"&"+N:this.u&&Ys(D,this.u,Ee)),wo(this.h,le),this.Ra&&st(D,"TYPE","init"),this.S?(st(D,"$req",N),st(D,"SID","null"),le.U=!0,hi(le,D,null)):hi(le,D,N),this.I=2}}else this.I==3&&(p?Qt(this,p):this.i.length==0||Ao(this.h)||Qt(this))};function Qt(p,N){var D;N?D=N.l:D=p.V++;const F=Bn(p.J);st(F,"SID",p.M),st(F,"RID",D),st(F,"AID",p.K),Ds(p,F),p.u&&p.o&&Ys(F,p.u,p.o),D=new Ue(p,p.j,D,p.D+1),p.u===null&&(D.J=p.o),N&&(p.i=N.G.concat(p.i)),N=Ks(p,D,1e3),D.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),wo(p.h,D),hi(D,F,N)}function Ds(p,N){p.H&&ot(p.H,function(D,F){st(N,F,D)}),p.l&&ot({},function(D,F){st(N,F,D)})}function Ks(p,N,D){D=Math.min(p.i.length,D);const F=p.l?_(p.l.Ka,p.l,p):null;e:{var le=p.i;let ut=-1;for(;;){const Vn=["count="+D];ut==-1?D>0?(ut=le[0].g,Vn.push("ofs="+ut)):ut=0:Vn.push("ofs="+ut);let Yt=!0;for(let An=0;An<D;An++){var Ee=le[An].g;const lr=le[An].map;if(Ee-=ut,Ee<0)ut=Math.max(0,le[An].g-100),Yt=!1;else try{Ee="req"+Ee+"_"||"";try{var Be=lr instanceof Map?lr:Object.entries(lr);for(const[es,Ci]of Be){let cr=Ci;v(Ci)&&(cr=ri(Ci)),Vn.push(Ee+es+"="+encodeURIComponent(cr))}}catch(es){throw Vn.push(Ee+"type="+encodeURIComponent("_badmap")),es}}catch{F&&F(lr)}}if(Yt){Be=Vn.join("&");break e}}Be=void 0}return p=p.i.splice(0,D),N.G=p,Be}function Pr(p){if(!p.g&&!p.v){p.Y=1;var N=p.Da;je||H(),De||(je(),De=!0),j.add(N,p),p.A=0}}function Ws(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=rr(_(p.Da,p),vo(p,p.A)),p.A++,!0)}i.Da=function(){if(this.v=null,mt(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=rr(_(this.Wa,this),p)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,an(10),As(this),mt(this))};function xe(p){p.B!=null&&(y.clearTimeout(p.B),p.B=null)}function mt(p){p.g=new Ue(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var N=Bn(p.na);st(N,"RID","rpc"),st(N,"SID",p.M),st(N,"AID",p.K),st(N,"CI",p.F?"0":"1"),!p.F&&p.ia&&st(N,"TO",p.ia),st(N,"TYPE","xmlhttp"),Ds(p,N),p.u&&p.o&&Ys(N,p.u,p.o),p.O&&(p.g.H=p.O);var D=p.g;p=p.ba,D.M=1,D.A=Yi(Bn(N)),D.u=null,D.R=!0,fi(D,p)}i.Va=function(){this.C!=null&&(this.C=null,As(this),Ws(this),an(19))};function kn(p){p.C!=null&&(y.clearTimeout(p.C),p.C=null)}function Qs(p,N){var D=null;if(p.g==N){kn(p),xe(p),p.g=null;var F=2}else if(Ri(p.h,N))D=N.G,Ut(p.h,N),F=1;else return;if(p.I!=0){if(N.o)if(F==1){D=N.u?N.u.length:0,N=Date.now()-N.F;var le=p.D;F=pr(),En(F,new ir(F,D)),Qr(p)}else Pr(p);else if(le=N.m,le==3||le==0&&N.X>0||!(F==1&&Da(p,N)||F==2&&Ws(p)))switch(D&&D.length>0&&(N=p.h,N.i=N.i.concat(D)),le){case 1:Zr(p,5);break;case 4:Zr(p,10);break;case 3:Zr(p,6);break;default:Zr(p,2)}}}function vo(p,N){let D=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(D*=2),D*N}function Zr(p,N){if(p.j.info("Error code "+N),N==2){var D=_(p.bb,p),F=p.Ua;const le=!F;F=new Oi(F||"//www.google.com/images/cleardot.gif"),y.location&&y.location.protocol=="http"||Nt(F,"https"),Yi(F),le?Ki(F.toString(),D):qs(F.toString(),D)}else an(2);p.I=0,p.l&&p.l.pa(N),rl(p),Oa(p)}i.bb=function(p){p?(this.j.info("Successfully pinged google.com"),an(2)):(this.j.info("Failed to ping google.com"),an(1))};function rl(p){if(p.I=0,p.ja=[],p.l){const N=Dt(p.h);(N.length!=0||p.i.length!=0)&&(q(p.ja,N),q(p.ja,p.i),p.h.i.length=0,B(p.i),p.i.length=0),p.l.oa()}}function sl(p,N,D){var F=D instanceof Oi?Bn(D):new Oi(D);if(F.g!="")N&&(F.g=N+"."+F.g),Di(F,F.u);else{var le=y.location;F=le.protocol,N=N?N+"."+le.hostname:le.hostname,le=+le.port;const Ee=new Oi(null);F&&Nt(Ee,F),N&&(Ee.g=N),le&&Di(Ee,le),D&&(Ee.h=D),F=Ee}return D=p.G,N=p.wa,D&&N&&st(F,D,N),st(F,"VER",p.ka),Ds(p,F),F}function Ma(p,N,D){if(N&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return N=p.Aa&&!p.ma?new tn(new Wi({ab:D})):new tn(p.ma),N.Fa(p.L),N}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Un(){}i=Un.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Jr(){}Jr.prototype.g=function(p,N){return new Rt(p,N)};function Rt(p,N){Qe.call(this),this.g=new _s(N),this.l=p,this.h=N&&N.messageUrlParams||null,p=N&&N.messageHeaders||null,N&&N.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=N&&N.initMessageHeaders||null,N&&N.messageContentType&&(p?p["X-WebChannel-Content-Type"]=N.messageContentType:p={"X-WebChannel-Content-Type":N.messageContentType}),N&&N.sa&&(p?p["X-WebChannel-Client-Profile"]=N.sa:p={"X-WebChannel-Client-Profile":N.sa}),this.g.U=p,(p=N&&N.Qb)&&!X(p)&&(this.g.u=p),this.A=N&&N.supportsCrossDomainXhr||!1,this.v=N&&N.sendRawJson||!1,(N=N&&N.httpSessionIdParam)&&!X(N)&&(this.g.G=N,p=this.h,p!==null&&N in p&&(p=this.h,N in p&&delete p[N])),this.j=new Mt(this)}I(Rt,Qe),Rt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Rt.prototype.close=function(){Ra(this.g)},Rt.prototype.o=function(p){var N=this.g;if(typeof p=="string"){var D={};D.__data__=p,p=D}else this.v&&(D={},D.__data__=ri(p),p=D);N.i.push(new Pn(N.Ya++,p)),N.I==3&&Qr(N)},Rt.prototype.N=function(){this.g.l=null,delete this.j,Ra(this.g),delete this.g,Rt.Z.N.call(this)};function Zs(p){Oe.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var N=p.__sm__;if(N){e:{for(const D in N){p=D;break e}p=void 0}(this.i=p)&&(p=this.i,N=N!==null&&p in N?N[p]:void 0),this.data=N}else this.data=p}I(Zs,Oe);function $r(){qt.call(this),this.status=1}I($r,qt);function Mt(p){this.g=p}I(Mt,Un),Mt.prototype.ra=function(){En(this.g,"a")},Mt.prototype.qa=function(p){En(this.g,new Zs(p))},Mt.prototype.pa=function(p){En(this.g,new $r)},Mt.prototype.oa=function(){En(this.g,"b")},Jr.prototype.createWebChannel=Jr.prototype.g,Rt.prototype.send=Rt.prototype.o,Rt.prototype.open=Rt.prototype.m,Rt.prototype.close=Rt.prototype.close,I_=function(){return new Jr},S_=function(){return pr()},C_=rt,x1={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Xr.NO_ERROR=0,Xr.TIMEOUT=8,Xr.HTTP_ERROR=6,Hh=Xr,ee.COMPLETE="complete",v_=ee,Sa.EventType=Wt,Wt.OPEN="a",Wt.CLOSE="b",Wt.ERROR="c",Wt.MESSAGE="d",Qe.prototype.listen=Qe.prototype.J,Hc=Sa,tn.prototype.listenOnce=tn.prototype.K,tn.prototype.getLastError=tn.prototype.Ha,tn.prototype.getLastErrorCode=tn.prototype.ya,tn.prototype.getStatus=tn.prototype.ca,tn.prototype.getResponseJson=tn.prototype.La,tn.prototype.getResponseText=tn.prototype.la,tn.prototype.send=tn.prototype.ea,tn.prototype.setWithCredentials=tn.prototype.Fa,T_=tn}).apply(typeof Rh<"u"?Rh:typeof self<"u"?self:typeof window<"u"?window:{});const _x="@firebase/firestore",Ax="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$i.UNAUTHENTICATED=new $i(null),$i.GOOGLE_CREDENTIALS=new $i("google-credentials-uid"),$i.FIRST_PARTY=new $i("first-party-uid"),$i.MOCK_USER=new $i("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $l="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo=new x_("@firebase/firestore");function Ll(){return Qo.logLevel}function He(i,...e){if(Qo.logLevel<=Jt.DEBUG){const n=e.map(eg);Qo.debug(`Firestore (${$l}): ${i}`,...n)}}function wa(i,...e){if(Qo.logLevel<=Jt.ERROR){const n=e.map(eg);Qo.error(`Firestore (${$l}): ${i}`,...n)}}function ql(i,...e){if(Qo.logLevel<=Jt.WARN){const n=e.map(eg);Qo.warn(`Firestore (${$l}): ${i}`,...n)}}function eg(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(i,e,n){let o="Unexpected state";typeof e=="string"?o=e:n=e,N_(i,o,n)}function N_(i,e,n){let o=`FIRESTORE (${$l}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{o+=" CONTEXT: "+JSON.stringify(n)}catch{o+=" CONTEXT: "+n}throw wa(o),new Error(o)}function un(i,e,n,o){let u="Unexpected state";typeof n=="string"?u=n:o=n,i||N_(e,u,o)}function xt(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ze extends Jl{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ZS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n($i.UNAUTHENTICATED)))}shutdown(){}}class JS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class $S{constructor(e){this.t=e,this.currentUser=$i.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){un(this.o===void 0,42304);let o=this.i;const u=b=>this.i!==o?(o=this.i,n(b)):Promise.resolve();let d=new Ea;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Ea,e.enqueueRetryable((()=>u(this.currentUser)))};const y=()=>{const b=d;e.enqueueRetryable((async()=>{await b.promise,await u(this.currentUser)}))},v=b=>{He("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.o&&(this.auth.addAuthTokenListener(this.o),y())};this.t.onInit((b=>v(b))),setTimeout((()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?v(b):(He("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Ea)}}),0),y()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((o=>this.i!==e?(He("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(un(typeof o.accessToken=="string",31837,{l:o}),new R_(o.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return un(e===null||typeof e=="string",2055,{h:e}),new $i(e)}}class e4{constructor(e,n,o){this.P=e,this.T=n,this.I=o,this.type="FirstParty",this.user=$i.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class t4{constructor(e,n,o){this.P=e,this.T=n,this.I=o}getToken(){return Promise.resolve(new e4(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n($i.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class wx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class n4{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,BS(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){un(this.o===void 0,3512);const o=d=>{d.error!=null&&He("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const y=d.token!==this.m;return this.m=d.token,He("FirebaseAppCheckTokenProvider",`Received ${y?"new":"existing"} token.`),y?n(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable((()=>o(d)))};const u=d=>{He("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((d=>u(d))),setTimeout((()=>{if(!this.appCheck){const d=this.V.getImmediate({optional:!0});d?u(d):He("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new wx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(un(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new wx(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i4(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let o=0;o<i;o++)n[o]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let o="";for(;o.length<20;){const u=i4(40);for(let d=0;d<u.length;++d)o.length<20&&u[d]<n&&(o+=e.charAt(u[d]%62))}return o}}function zt(i,e){return i<e?-1:i>e?1:0}function y1(i,e){const n=Math.min(i.length,e.length);for(let o=0;o<n;o++){const u=i.charAt(o),d=e.charAt(o);if(u!==d)return $0(u)===$0(d)?zt(u,d):$0(u)?1:-1}return zt(i.length,e.length)}const r4=55296,s4=57343;function $0(i){const e=i.charCodeAt(0);return e>=r4&&e<=s4}function Yl(i,e,n){return i.length===e.length&&i.every(((o,u)=>n(o,e[u])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx="__name__";class Us{constructor(e,n,o){n===void 0?n=0:n>e.length&&lt(637,{offset:n,range:e.length}),o===void 0?o=e.length-n:o>e.length-n&&lt(1746,{length:o,range:e.length-n}),this.segments=e,this.offset=n,this.len=o}get length(){return this.len}isEqual(e){return Us.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Us?e.forEach((o=>{n.push(o)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,o=this.limit();n<o;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const o=Math.min(e.length,n.length);for(let u=0;u<o;u++){const d=Us.compareSegments(e.get(u),n.get(u));if(d!==0)return d}return zt(e.length,n.length)}static compareSegments(e,n){const o=Us.isNumericId(e),u=Us.isNumericId(n);return o&&!u?-1:!o&&u?1:o&&u?Us.extractNumericId(e).compare(Us.extractNumericId(n)):y1(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return oo.fromString(e.substring(4,e.length-2))}}class Cn extends Us{construct(e,n,o){return new Cn(e,n,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const o of e){if(o.indexOf("//")>=0)throw new ze(Ce.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);n.push(...o.split("/").filter((u=>u.length>0)))}return new Cn(n)}static emptyPath(){return new Cn([])}}const a4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vi extends Us{construct(e,n,o){return new Vi(e,n,o)}static isValidIdentifier(e){return a4.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vi.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===bx}static keyField(){return new Vi([bx])}static fromServerFormat(e){const n=[];let o="",u=0;const d=()=>{if(o.length===0)throw new ze(Ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(o),o=""};let y=!1;for(;u<e.length;){const v=e[u];if(v==="\\"){if(u+1===e.length)throw new ze(Ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const b=e[u+1];if(b!=="\\"&&b!=="."&&b!=="`")throw new ze(Ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=b,u+=2}else v==="`"?(y=!y,u++):v!=="."||y?(o+=v,u++):(d(),u++)}if(d(),y)throw new ze(Ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vi(n)}static emptyPath(){return new Vi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.path=e}static fromPath(e){return new et(Cn.fromString(e))}static fromName(e){return new et(Cn.fromString(e).popFirst(5))}static empty(){return new et(Cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Cn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Cn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new et(new Cn(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(i,e,n){if(!n)throw new ze(Ce.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function o4(i,e,n,o){if(e===!0&&o===!0)throw new ze(Ce.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function Tx(i){if(!et.isDocumentKey(i))throw new ze(Ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function vx(i){if(et.isDocumentKey(i))throw new ze(Ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function D_(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function If(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(o){return o.constructor?o.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":lt(12329,{type:typeof i})}function Rr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ze(Ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=If(i);throw new ze(Ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(i,e){const n={typeString:i};return e&&(n.value=e),n}function gu(i,e){if(!D_(i))throw new ze(Ce.INVALID_ARGUMENT,"JSON must be an object");let n;for(const o in e)if(e[o]){const u=e[o].typeString,d="value"in e[o]?{value:e[o].value}:void 0;if(!(o in i)){n=`JSON missing required field: '${o}'`;break}const y=i[o];if(u&&typeof y!==u){n=`JSON field '${o}' must be a ${u}.`;break}if(d!==void 0&&y!==d.value){n=`Expected '${o}' field to equal '${d.value}'`;break}}if(n)throw new ze(Ce.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx=-62135596800,Sx=1e6;class Mn{static now(){return Mn.fromMillis(Date.now())}static fromDate(e){return Mn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),o=Math.floor((e-1e3*n)*Sx);return new Mn(n,o)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ze(Ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ze(Ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Cx)throw new ze(Ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ze(Ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Sx}_compareTo(e){return this.seconds===e.seconds?zt(this.nanoseconds,e.nanoseconds):zt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Mn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(gu(e,Mn._jsonSchema))return new Mn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Cx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Mn._jsonSchemaVersion="firestore/timestamp/1.0",Mn._jsonSchema={type:Ei("string",Mn._jsonSchemaVersion),seconds:Ei("number"),nanoseconds:Ei("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{static fromTimestamp(e){return new dt(e)}static min(){return new dt(new Mn(0,0))}static max(){return new dt(new Mn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const su=-1;function l4(i,e){const n=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,u=dt.fromTimestamp(o===1e9?new Mn(n+1,0):new Mn(n,o));return new co(u,et.empty(),e)}function c4(i){return new co(i.readTime,i.key,su)}class co{constructor(e,n,o){this.readTime=e,this.documentKey=n,this.largestBatchId=o}static min(){return new co(dt.min(),et.empty(),su)}static max(){return new co(dt.max(),et.empty(),su)}}function u4(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=et.comparator(i.documentKey,e.documentKey),n!==0?n:zt(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class f4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ec(i){if(i.code!==Ce.FAILED_PRECONDITION||i.message!==h4)throw i;He("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&lt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ne(((o,u)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(o,u)},this.catchCallback=d=>{this.wrapFailure(n,d).next(o,u)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Ne?n:Ne.resolve(n)}catch(n){return Ne.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Ne.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Ne.reject(n)}static resolve(e){return new Ne(((n,o)=>{n(e)}))}static reject(e){return new Ne(((n,o)=>{o(e)}))}static waitFor(e){return new Ne(((n,o)=>{let u=0,d=0,y=!1;e.forEach((v=>{++u,v.next((()=>{++d,y&&d===u&&n()}),(b=>o(b)))})),y=!0,d===u&&n()}))}static or(e){let n=Ne.resolve(!1);for(const o of e)n=n.next((u=>u?Ne.resolve(u):o()));return n}static forEach(e,n){const o=[];return e.forEach(((u,d)=>{o.push(n.call(this,u,d))})),this.waitFor(o)}static mapArray(e,n){return new Ne(((o,u)=>{const d=e.length,y=new Array(d);let v=0;for(let b=0;b<d;b++){const _=b;n(e[_]).next((C=>{y[_]=C,++v,v===d&&o(y)}),(C=>u(C)))}}))}static doWhile(e,n){return new Ne(((o,u)=>{const d=()=>{e()===!0?n().next((()=>{d()}),u):o()};d()}))}}function d4(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function tc(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=o=>this.ae(o),this.ue=o=>n.writeSequenceNumber(o))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Nf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng=-1;function Rf(i){return i==null}function af(i){return i===0&&1/i==-1/0}function g4(i){return typeof i=="number"&&Number.isInteger(i)&&!af(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_="";function m4(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=Ix(e)),e=p4(i.get(n),e);return Ix(e)}function p4(i,e){let n=e;const o=i.length;for(let u=0;u<o;u++){const d=i.charAt(u);switch(d){case"\0":n+="";break;case M_:n+="";break;default:n+=d}}return n}function Ix(i){return i+M_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nx(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function yo(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function L_(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e,n){this.comparator=e,this.root=n||Ui.EMPTY}insert(e,n){return new Wn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ui.BLACK,null,null))}remove(e){return new Wn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ui.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(o===0)return n.value;o<0?n=n.left:o>0&&(n=n.right)}return null}indexOf(e){let n=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(u===0)return n+o.left.size;u<0?o=o.left:(n+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,o)=>(e(n,o),!1)))}toString(){const e=[];return this.inorderTraversal(((n,o)=>(e.push(`${n}:${o}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Oh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Oh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Oh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Oh(this.root,e,this.comparator,!0)}}class Oh{constructor(e,n,o,u){this.isReverse=u,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=n?o(e.key,n):1,n&&u&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(d===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ui{constructor(e,n,o,u,d){this.key=e,this.value=n,this.color=o??Ui.RED,this.left=u??Ui.EMPTY,this.right=d??Ui.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,o,u,d){return new Ui(e??this.key,n??this.value,o??this.color,u??this.left,d??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let u=this;const d=o(e,u.key);return u=d<0?u.copy(null,null,null,u.left.insert(e,n,o),null):d===0?u.copy(null,n,null,null,null):u.copy(null,null,null,null,u.right.insert(e,n,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return Ui.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let o,u=this;if(n(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,n),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),n(e,u.key)===0){if(u.right.isEmpty())return Ui.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,n))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ui.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ui.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw lt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw lt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw lt(27949);return e+(this.isRed()?0:1)}}Ui.EMPTY=null,Ui.RED=!0,Ui.BLACK=!1;Ui.EMPTY=new class{constructor(){this.size=0}get key(){throw lt(57766)}get value(){throw lt(16141)}get color(){throw lt(16727)}get left(){throw lt(29726)}get right(){throw lt(36894)}copy(e,n,o,u,d){return this}insert(e,n,o){return new Ui(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e){this.comparator=e,this.data=new Wn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,o)=>(e(n),!1)))}forEachInRange(e,n){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;n(u.key)}}forEachWhile(e,n){let o;for(o=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Rx(this.data.getIterator())}getIteratorFrom(e){return new Rx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((o=>{n=n.add(o)})),n}isEqual(e){if(!(e instanceof Ti)||this.size!==e.size)return!1;const n=this.data.getIterator(),o=e.data.getIterator();for(;n.hasNext();){const u=n.getNext().key,d=o.getNext().key;if(this.comparator(u,d)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Ti(this.comparator);return n.data=e,n}}class Rx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e){this.fields=e,e.sort(Vi.comparator)}static empty(){return new qr([])}unionWith(e){let n=new Ti(Vi.comparator);for(const o of this.fields)n=n.add(o);for(const o of e)n=n.add(o);return new qr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Yl(this.fields,e.fields,((n,o)=>n.isEqual(o)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(u){try{return atob(u)}catch(d){throw typeof DOMException<"u"&&d instanceof DOMException?new P_("Invalid base64 string: "+d):d}})(e);return new ji(n)}static fromUint8Array(e){const n=(function(u){let d="";for(let y=0;y<u.length;++y)d+=String.fromCharCode(u[y]);return d})(e);return new ji(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const o=new Uint8Array(n.length);for(let u=0;u<n.length;u++)o[u]=n.charCodeAt(u);return o})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return zt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ji.EMPTY_BYTE_STRING=new ji("");const x4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function uo(i){if(un(!!i,39018),typeof i=="string"){let e=0;const n=x4.exec(i);if(un(!!n,46558,{timestamp:i}),n[1]){let u=n[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:li(i.seconds),nanos:li(i.nanos)}}function li(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function ho(i){return typeof i=="string"?ji.fromBase64String(i):ji.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_="server_timestamp",k_="__type__",U_="__previous_value__",V_="__local_write_time__";function ig(i){var n,o;return((o=(((n=i==null?void 0:i.mapValue)==null?void 0:n.fields)||{})[k_])==null?void 0:o.stringValue)===B_}function Of(i){const e=i.mapValue.fields[U_];return ig(e)?Of(e):e}function au(i){const e=uo(i.mapValue.fields[V_].timestampValue);return new Mn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e,n,o,u,d,y,v,b,_,C){this.databaseId=e,this.appId=n,this.persistenceKey=o,this.host=u,this.ssl=d,this.forceLongPolling=y,this.autoDetectLongPolling=v,this.longPollingOptions=b,this.useFetchStreams=_,this.isUsingEmulator=C}}const of="(default)";class ou{constructor(e,n){this.projectId=e,this.database=n||of}static empty(){return new ou("","")}get isDefaultDatabase(){return this.database===of}isEqual(e){return e instanceof ou&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_="__type__",E4="__max__",Dh={mapValue:{}},F_="__vector__",lf="value";function fo(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?ig(i)?4:A4(i)?9007199254740991:_4(i)?10:11:lt(28295,{value:i})}function Hs(i,e){if(i===e)return!0;const n=fo(i);if(n!==fo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return au(i).isEqual(au(e));case 3:return(function(u,d){if(typeof u.timestampValue=="string"&&typeof d.timestampValue=="string"&&u.timestampValue.length===d.timestampValue.length)return u.timestampValue===d.timestampValue;const y=uo(u.timestampValue),v=uo(d.timestampValue);return y.seconds===v.seconds&&y.nanos===v.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(u,d){return ho(u.bytesValue).isEqual(ho(d.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(u,d){return li(u.geoPointValue.latitude)===li(d.geoPointValue.latitude)&&li(u.geoPointValue.longitude)===li(d.geoPointValue.longitude)})(i,e);case 2:return(function(u,d){if("integerValue"in u&&"integerValue"in d)return li(u.integerValue)===li(d.integerValue);if("doubleValue"in u&&"doubleValue"in d){const y=li(u.doubleValue),v=li(d.doubleValue);return y===v?af(y)===af(v):isNaN(y)&&isNaN(v)}return!1})(i,e);case 9:return Yl(i.arrayValue.values||[],e.arrayValue.values||[],Hs);case 10:case 11:return(function(u,d){const y=u.mapValue.fields||{},v=d.mapValue.fields||{};if(Nx(y)!==Nx(v))return!1;for(const b in y)if(y.hasOwnProperty(b)&&(v[b]===void 0||!Hs(y[b],v[b])))return!1;return!0})(i,e);default:return lt(52216,{left:i})}}function lu(i,e){return(i.values||[]).find((n=>Hs(n,e)))!==void 0}function Xl(i,e){if(i===e)return 0;const n=fo(i),o=fo(e);if(n!==o)return zt(n,o);switch(n){case 0:case 9007199254740991:return 0;case 1:return zt(i.booleanValue,e.booleanValue);case 2:return(function(d,y){const v=li(d.integerValue||d.doubleValue),b=li(y.integerValue||y.doubleValue);return v<b?-1:v>b?1:v===b?0:isNaN(v)?isNaN(b)?0:-1:1})(i,e);case 3:return Ox(i.timestampValue,e.timestampValue);case 4:return Ox(au(i),au(e));case 5:return y1(i.stringValue,e.stringValue);case 6:return(function(d,y){const v=ho(d),b=ho(y);return v.compareTo(b)})(i.bytesValue,e.bytesValue);case 7:return(function(d,y){const v=d.split("/"),b=y.split("/");for(let _=0;_<v.length&&_<b.length;_++){const C=zt(v[_],b[_]);if(C!==0)return C}return zt(v.length,b.length)})(i.referenceValue,e.referenceValue);case 8:return(function(d,y){const v=zt(li(d.latitude),li(y.latitude));return v!==0?v:zt(li(d.longitude),li(y.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return Dx(i.arrayValue,e.arrayValue);case 10:return(function(d,y){var L,B,q,K;const v=d.fields||{},b=y.fields||{},_=(L=v[lf])==null?void 0:L.arrayValue,C=(B=b[lf])==null?void 0:B.arrayValue,I=zt(((q=_==null?void 0:_.values)==null?void 0:q.length)||0,((K=C==null?void 0:C.values)==null?void 0:K.length)||0);return I!==0?I:Dx(_,C)})(i.mapValue,e.mapValue);case 11:return(function(d,y){if(d===Dh.mapValue&&y===Dh.mapValue)return 0;if(d===Dh.mapValue)return 1;if(y===Dh.mapValue)return-1;const v=d.fields||{},b=Object.keys(v),_=y.fields||{},C=Object.keys(_);b.sort(),C.sort();for(let I=0;I<b.length&&I<C.length;++I){const L=y1(b[I],C[I]);if(L!==0)return L;const B=Xl(v[b[I]],_[C[I]]);if(B!==0)return B}return zt(b.length,C.length)})(i.mapValue,e.mapValue);default:throw lt(23264,{he:n})}}function Ox(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return zt(i,e);const n=uo(i),o=uo(e),u=zt(n.seconds,o.seconds);return u!==0?u:zt(n.nanos,o.nanos)}function Dx(i,e){const n=i.values||[],o=e.values||[];for(let u=0;u<n.length&&u<o.length;++u){const d=Xl(n[u],o[u]);if(d)return d}return zt(n.length,o.length)}function Kl(i){return E1(i)}function E1(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const o=uo(n);return`time(${o.seconds},${o.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return ho(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return et.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let o="[",u=!0;for(const d of n.values||[])u?u=!1:o+=",",o+=E1(d);return o+"]"})(i.arrayValue):"mapValue"in i?(function(n){const o=Object.keys(n.fields||{}).sort();let u="{",d=!0;for(const y of o)d?d=!1:u+=",",u+=`${y}:${E1(n.fields[y])}`;return u+"}"})(i.mapValue):lt(61005,{value:i})}function Gh(i){switch(fo(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Of(i);return e?16+Gh(e):16;case 5:return 2*i.stringValue.length;case 6:return ho(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(o){return(o.values||[]).reduce(((u,d)=>u+Gh(d)),0)})(i.arrayValue);case 10:case 11:return(function(o){let u=0;return yo(o.fields,((d,y)=>{u+=d.length+Gh(y)})),u})(i.mapValue);default:throw lt(13486,{value:i})}}function Mx(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function _1(i){return!!i&&"integerValue"in i}function rg(i){return!!i&&"arrayValue"in i}function Lx(i){return!!i&&"nullValue"in i}function Px(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function qh(i){return!!i&&"mapValue"in i}function _4(i){var n,o;return((o=(((n=i==null?void 0:i.mapValue)==null?void 0:n.fields)||{})[j_])==null?void 0:o.stringValue)===F_}function Zc(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return yo(i.mapValue.fields,((n,o)=>e.mapValue.fields[n]=Zc(o))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Zc(i.arrayValue.values[n]);return e}return{...i}}function A4(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===E4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this.value=e}static empty(){return new Nr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let o=0;o<e.length-1;++o)if(n=(n.mapValue.fields||{})[e.get(o)],!qh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zc(n)}setAll(e){let n=Vi.emptyPath(),o={},u=[];e.forEach(((y,v)=>{if(!n.isImmediateParentOf(v)){const b=this.getFieldsMap(n);this.applyChanges(b,o,u),o={},u=[],n=v.popLast()}y?o[v.lastSegment()]=Zc(y):u.push(v.lastSegment())}));const d=this.getFieldsMap(n);this.applyChanges(d,o,u)}delete(e){const n=this.field(e.popLast());qh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Hs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=n.mapValue.fields[e.get(o)];qh(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},n.mapValue.fields[e.get(o)]=u),n=u}return n.mapValue.fields}applyChanges(e,n,o){yo(n,((u,d)=>e[u]=d));for(const u of o)delete e[u]}clone(){return new Nr(Zc(this.value))}}function z_(i){const e=[];return yo(i.fields,((n,o)=>{const u=new Vi([n]);if(qh(o)){const d=z_(o.mapValue).fields;if(d.length===0)e.push(u);else for(const y of d)e.push(u.child(y))}else e.push(u)})),new qr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e,n,o,u,d,y,v){this.key=e,this.documentType=n,this.version=o,this.readTime=u,this.createTime=d,this.data=y,this.documentState=v}static newInvalidDocument(e){return new er(e,0,dt.min(),dt.min(),dt.min(),Nr.empty(),0)}static newFoundDocument(e,n,o,u){return new er(e,1,n,dt.min(),o,u,0)}static newNoDocument(e,n){return new er(e,2,n,dt.min(),dt.min(),Nr.empty(),0)}static newUnknownDocument(e,n){return new er(e,3,n,dt.min(),dt.min(),Nr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(dt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=dt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof er&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new er(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,n){this.position=e,this.inclusive=n}}function Bx(i,e,n){let o=0;for(let u=0;u<i.position.length;u++){const d=e[u],y=i.position[u];if(d.field.isKeyField()?o=et.comparator(et.fromName(y.referenceValue),n.key):o=Xl(y,n.data.field(d.field)),d.dir==="desc"&&(o*=-1),o!==0)break}return o}function kx(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Hs(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e,n="asc"){this.field=e,this.dir=n}}function w4(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{}class yi extends H_{constructor(e,n,o){super(),this.field=e,this.op=n,this.value=o}static create(e,n,o){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,o):new T4(e,n,o):n==="array-contains"?new S4(e,o):n==="in"?new I4(e,o):n==="not-in"?new N4(e,o):n==="array-contains-any"?new R4(e,o):new yi(e,n,o)}static createKeyFieldInFilter(e,n,o){return n==="in"?new v4(e,o):new C4(e,o)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Xl(n,this.value)):n!==null&&fo(this.value)===fo(n)&&this.matchesComparison(Xl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return lt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vs extends H_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new vs(e,n)}matches(e){return G_(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function G_(i){return i.op==="and"}function q_(i){return b4(i)&&G_(i)}function b4(i){for(const e of i.filters)if(e instanceof vs)return!1;return!0}function A1(i){if(i instanceof yi)return i.field.canonicalString()+i.op.toString()+Kl(i.value);if(q_(i))return i.filters.map((e=>A1(e))).join(",");{const e=i.filters.map((n=>A1(n))).join(",");return`${i.op}(${e})`}}function Y_(i,e){return i instanceof yi?(function(o,u){return u instanceof yi&&o.op===u.op&&o.field.isEqual(u.field)&&Hs(o.value,u.value)})(i,e):i instanceof vs?(function(o,u){return u instanceof vs&&o.op===u.op&&o.filters.length===u.filters.length?o.filters.reduce(((d,y,v)=>d&&Y_(y,u.filters[v])),!0):!1})(i,e):void lt(19439)}function X_(i){return i instanceof yi?(function(n){return`${n.field.canonicalString()} ${n.op} ${Kl(n.value)}`})(i):i instanceof vs?(function(n){return n.op.toString()+" {"+n.getFilters().map(X_).join(" ,")+"}"})(i):"Filter"}class T4 extends yi{constructor(e,n,o){super(e,n,o),this.key=et.fromName(o.referenceValue)}matches(e){const n=et.comparator(e.key,this.key);return this.matchesComparison(n)}}class v4 extends yi{constructor(e,n){super(e,"in",n),this.keys=K_("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class C4 extends yi{constructor(e,n){super(e,"not-in",n),this.keys=K_("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function K_(i,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((o=>et.fromName(o.referenceValue)))}class S4 extends yi{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return rg(n)&&lu(n.arrayValue,this.value)}}class I4 extends yi{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&lu(this.value.arrayValue,n)}}class N4 extends yi{constructor(e,n){super(e,"not-in",n)}matches(e){if(lu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!lu(this.value.arrayValue,n)}}class R4 extends yi{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!rg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((o=>lu(this.value.arrayValue,o)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(e,n=null,o=[],u=[],d=null,y=null,v=null){this.path=e,this.collectionGroup=n,this.orderBy=o,this.filters=u,this.limit=d,this.startAt=y,this.endAt=v,this.Te=null}}function Ux(i,e=null,n=[],o=[],u=null,d=null,y=null){return new O4(i,e,n,o,u,d,y)}function sg(i){const e=xt(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((o=>A1(o))).join(","),n+="|ob:",n+=e.orderBy.map((o=>(function(d){return d.field.canonicalString()+d.dir})(o))).join(","),Rf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((o=>Kl(o))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((o=>Kl(o))).join(",")),e.Te=n}return e.Te}function ag(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!w4(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!Y_(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!kx(i.startAt,e.startAt)&&kx(i.endAt,e.endAt)}function w1(i){return et.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,n=null,o=[],u=[],d=null,y="F",v=null,b=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=o,this.filters=u,this.limit=d,this.limitType=y,this.startAt=v,this.endAt=b,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function D4(i,e,n,o,u,d,y,v){return new mu(i,e,n,o,u,d,y,v)}function Df(i){return new mu(i)}function Vx(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function W_(i){return i.collectionGroup!==null}function Jc(i){const e=xt(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const d of e.explicitOrderBy)e.Ie.push(d),n.add(d.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(y){let v=new Ti(Vi.comparator);return y.filters.forEach((b=>{b.getFlattenedFilters().forEach((_=>{_.isInequality()&&(v=v.add(_.field))}))})),v})(e).forEach((d=>{n.has(d.canonicalString())||d.isKeyField()||e.Ie.push(new uf(d,o))})),n.has(Vi.keyField().canonicalString())||e.Ie.push(new uf(Vi.keyField(),o))}return e.Ie}function Vs(i){const e=xt(i);return e.Ee||(e.Ee=M4(e,Jc(i))),e.Ee}function M4(i,e){if(i.limitType==="F")return Ux(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((u=>{const d=u.dir==="desc"?"asc":"desc";return new uf(u.field,d)}));const n=i.endAt?new cf(i.endAt.position,i.endAt.inclusive):null,o=i.startAt?new cf(i.startAt.position,i.startAt.inclusive):null;return Ux(i.path,i.collectionGroup,e,i.filters,i.limit,n,o)}}function b1(i,e){const n=i.filters.concat([e]);return new mu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function T1(i,e,n){return new mu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Mf(i,e){return ag(Vs(i),Vs(e))&&i.limitType===e.limitType}function Q_(i){return`${sg(Vs(i))}|lt:${i.limitType}`}function Pl(i){return`Query(target=${(function(n){let o=n.path.canonicalString();return n.collectionGroup!==null&&(o+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(o+=`, filters: [${n.filters.map((u=>X_(u))).join(", ")}]`),Rf(n.limit)||(o+=", limit: "+n.limit),n.orderBy.length>0&&(o+=`, orderBy: [${n.orderBy.map((u=>(function(y){return`${y.field.canonicalString()} (${y.dir})`})(u))).join(", ")}]`),n.startAt&&(o+=", startAt: ",o+=n.startAt.inclusive?"b:":"a:",o+=n.startAt.position.map((u=>Kl(u))).join(",")),n.endAt&&(o+=", endAt: ",o+=n.endAt.inclusive?"a:":"b:",o+=n.endAt.position.map((u=>Kl(u))).join(",")),`Target(${o})`})(Vs(i))}; limitType=${i.limitType})`}function Lf(i,e){return e.isFoundDocument()&&(function(o,u){const d=u.key.path;return o.collectionGroup!==null?u.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(d):et.isDocumentKey(o.path)?o.path.isEqual(d):o.path.isImmediateParentOf(d)})(i,e)&&(function(o,u){for(const d of Jc(o))if(!d.field.isKeyField()&&u.data.field(d.field)===null)return!1;return!0})(i,e)&&(function(o,u){for(const d of o.filters)if(!d.matches(u))return!1;return!0})(i,e)&&(function(o,u){return!(o.startAt&&!(function(y,v,b){const _=Bx(y,v,b);return y.inclusive?_<=0:_<0})(o.startAt,Jc(o),u)||o.endAt&&!(function(y,v,b){const _=Bx(y,v,b);return y.inclusive?_>=0:_>0})(o.endAt,Jc(o),u))})(i,e)}function L4(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Z_(i){return(e,n)=>{let o=!1;for(const u of Jc(i)){const d=P4(u,e,n);if(d!==0)return d;o=o||u.field.isKeyField()}return 0}}function P4(i,e,n){const o=i.field.isKeyField()?et.comparator(e.key,n.key):(function(d,y,v){const b=y.data.field(d),_=v.data.field(d);return b!==null&&_!==null?Xl(b,_):lt(42886)})(i.field,e,n);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return lt(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),o=this.inner[n];if(o!==void 0){for(const[u,d]of o)if(this.equalsFn(u,e))return d}}has(e){return this.get(e)!==void 0}set(e,n){const o=this.mapKeyFn(e),u=this.inner[o];if(u===void 0)return this.inner[o]=[[e,n]],void this.innerSize++;for(let d=0;d<u.length;d++)if(this.equalsFn(u[d][0],e))return void(u[d]=[e,n]);u.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),o=this.inner[n];if(o===void 0)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return o.length===1?delete this.inner[n]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){yo(this.inner,((n,o)=>{for(const[u,d]of o)e(u,d)}))}isEmpty(){return L_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4=new Wn(et.comparator);function ba(){return B4}const J_=new Wn(et.comparator);function Gc(...i){let e=J_;for(const n of i)e=e.insert(n.key,n);return e}function $_(i){let e=J_;return i.forEach(((n,o)=>e=e.insert(n,o.overlayedDocument))),e}function qo(){return $c()}function eA(){return $c()}function $c(){return new el((i=>i.toString()),((i,e)=>i.isEqual(e)))}const k4=new Wn(et.comparator),U4=new Ti(et.comparator);function Ht(...i){let e=U4;for(const n of i)e=e.add(n);return e}const V4=new Ti(zt);function j4(){return V4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function og(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:af(e)?"-0":e}}function tA(i){return{integerValue:""+i}}function F4(i,e){return g4(e)?tA(e):og(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(){this._=void 0}}function z4(i,e,n){return i instanceof hf?(function(u,d){const y={fields:{[k_]:{stringValue:B_},[V_]:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return d&&ig(d)&&(d=Of(d)),d&&(y.fields[U_]=d),{mapValue:y}})(n,e):i instanceof cu?iA(i,e):i instanceof uu?rA(i,e):(function(u,d){const y=nA(u,d),v=jx(y)+jx(u.Ae);return _1(y)&&_1(u.Ae)?tA(v):og(u.serializer,v)})(i,e)}function H4(i,e,n){return i instanceof cu?iA(i,e):i instanceof uu?rA(i,e):n}function nA(i,e){return i instanceof ff?(function(o){return _1(o)||(function(d){return!!d&&"doubleValue"in d})(o)})(e)?e:{integerValue:0}:null}class hf extends Pf{}class cu extends Pf{constructor(e){super(),this.elements=e}}function iA(i,e){const n=sA(e);for(const o of i.elements)n.some((u=>Hs(u,o)))||n.push(o);return{arrayValue:{values:n}}}class uu extends Pf{constructor(e){super(),this.elements=e}}function rA(i,e){let n=sA(e);for(const o of i.elements)n=n.filter((u=>!Hs(u,o)));return{arrayValue:{values:n}}}class ff extends Pf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function jx(i){return li(i.integerValue||i.doubleValue)}function sA(i){return rg(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function G4(i,e){return i.field.isEqual(e.field)&&(function(o,u){return o instanceof cu&&u instanceof cu||o instanceof uu&&u instanceof uu?Yl(o.elements,u.elements,Hs):o instanceof ff&&u instanceof ff?Hs(o.Ae,u.Ae):o instanceof hf&&u instanceof hf})(i.transform,e.transform)}class q4{constructor(e,n){this.version=e,this.transformResults=n}}class Or{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Or}static exists(e){return new Or(void 0,e)}static updateTime(e){return new Or(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Bf{}function aA(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new kf(i.key,Or.none()):new pu(i.key,i.data,Or.none());{const n=i.data,o=Nr.empty();let u=new Ti(Vi.comparator);for(let d of e.fields)if(!u.has(d)){let y=n.field(d);y===null&&d.length>1&&(d=d.popLast(),y=n.field(d)),y===null?o.delete(d):o.set(d,y),u=u.add(d)}return new Eo(i.key,o,new qr(u.toArray()),Or.none())}}function Y4(i,e,n){i instanceof pu?(function(u,d,y){const v=u.value.clone(),b=zx(u.fieldTransforms,d,y.transformResults);v.setAll(b),d.convertToFoundDocument(y.version,v).setHasCommittedMutations()})(i,e,n):i instanceof Eo?(function(u,d,y){if(!Yh(u.precondition,d))return void d.convertToUnknownDocument(y.version);const v=zx(u.fieldTransforms,d,y.transformResults),b=d.data;b.setAll(oA(u)),b.setAll(v),d.convertToFoundDocument(y.version,b).setHasCommittedMutations()})(i,e,n):(function(u,d,y){d.convertToNoDocument(y.version).setHasCommittedMutations()})(0,e,n)}function eu(i,e,n,o){return i instanceof pu?(function(d,y,v,b){if(!Yh(d.precondition,y))return v;const _=d.value.clone(),C=Hx(d.fieldTransforms,b,y);return _.setAll(C),y.convertToFoundDocument(y.version,_).setHasLocalMutations(),null})(i,e,n,o):i instanceof Eo?(function(d,y,v,b){if(!Yh(d.precondition,y))return v;const _=Hx(d.fieldTransforms,b,y),C=y.data;return C.setAll(oA(d)),C.setAll(_),y.convertToFoundDocument(y.version,C).setHasLocalMutations(),v===null?null:v.unionWith(d.fieldMask.fields).unionWith(d.fieldTransforms.map((I=>I.field)))})(i,e,n,o):(function(d,y,v){return Yh(d.precondition,y)?(y.convertToNoDocument(y.version).setHasLocalMutations(),null):v})(i,e,n)}function X4(i,e){let n=null;for(const o of i.fieldTransforms){const u=e.data.field(o.field),d=nA(o.transform,u||null);d!=null&&(n===null&&(n=Nr.empty()),n.set(o.field,d))}return n||null}function Fx(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(o,u){return o===void 0&&u===void 0||!(!o||!u)&&Yl(o,u,((d,y)=>G4(d,y)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class pu extends Bf{constructor(e,n,o,u=[]){super(),this.key=e,this.value=n,this.precondition=o,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class Eo extends Bf{constructor(e,n,o,u,d=[]){super(),this.key=e,this.data=n,this.fieldMask=o,this.precondition=u,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function oA(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const o=i.data.field(n);e.set(n,o)}})),e}function zx(i,e,n){const o=new Map;un(i.length===n.length,32656,{Re:n.length,Ve:i.length});for(let u=0;u<n.length;u++){const d=i[u],y=d.transform,v=e.data.field(d.field);o.set(d.field,H4(y,v,n[u]))}return o}function Hx(i,e,n){const o=new Map;for(const u of i){const d=u.transform,y=n.data.field(u.field);o.set(u.field,z4(d,y,e))}return o}class kf extends Bf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class K4 extends Bf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(e,n,o,u){this.batchId=e,this.localWriteTime=n,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,n){const o=n.mutationResults;for(let u=0;u<this.mutations.length;u++){const d=this.mutations[u];d.key.isEqual(e.key)&&Y4(d,e,o[u])}}applyToLocalView(e,n){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(n=eu(o,e,n,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(n=eu(o,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const o=eA();return this.mutations.forEach((u=>{const d=e.get(u.key),y=d.overlayedDocument;let v=this.applyToLocalView(y,d.mutatedFields);v=n.has(u.key)?null:v;const b=aA(y,v);b!==null&&o.set(u.key,b),y.isValidDocument()||y.convertToNoDocument(dt.min())})),o}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ht())}isEqual(e){return this.batchId===e.batchId&&Yl(this.mutations,e.mutations,((n,o)=>Fx(n,o)))&&Yl(this.baseMutations,e.baseMutations,((n,o)=>Fx(n,o)))}}class lg{constructor(e,n,o,u){this.batch=e,this.commitVersion=n,this.mutationResults=o,this.docVersions=u}static from(e,n,o){un(e.mutations.length===o.length,58842,{me:e.mutations.length,fe:o.length});let u=(function(){return k4})();const d=e.mutations;for(let y=0;y<d.length;y++)u=u.insert(d[y].key,o[y].version);return new lg(e,n,o,u)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xi,Zt;function J4(i){switch(i){case Ce.OK:return lt(64938);case Ce.CANCELLED:case Ce.UNKNOWN:case Ce.DEADLINE_EXCEEDED:case Ce.RESOURCE_EXHAUSTED:case Ce.INTERNAL:case Ce.UNAVAILABLE:case Ce.UNAUTHENTICATED:return!1;case Ce.INVALID_ARGUMENT:case Ce.NOT_FOUND:case Ce.ALREADY_EXISTS:case Ce.PERMISSION_DENIED:case Ce.FAILED_PRECONDITION:case Ce.ABORTED:case Ce.OUT_OF_RANGE:case Ce.UNIMPLEMENTED:case Ce.DATA_LOSS:return!0;default:return lt(15467,{code:i})}}function lA(i){if(i===void 0)return wa("GRPC error has no .code"),Ce.UNKNOWN;switch(i){case xi.OK:return Ce.OK;case xi.CANCELLED:return Ce.CANCELLED;case xi.UNKNOWN:return Ce.UNKNOWN;case xi.DEADLINE_EXCEEDED:return Ce.DEADLINE_EXCEEDED;case xi.RESOURCE_EXHAUSTED:return Ce.RESOURCE_EXHAUSTED;case xi.INTERNAL:return Ce.INTERNAL;case xi.UNAVAILABLE:return Ce.UNAVAILABLE;case xi.UNAUTHENTICATED:return Ce.UNAUTHENTICATED;case xi.INVALID_ARGUMENT:return Ce.INVALID_ARGUMENT;case xi.NOT_FOUND:return Ce.NOT_FOUND;case xi.ALREADY_EXISTS:return Ce.ALREADY_EXISTS;case xi.PERMISSION_DENIED:return Ce.PERMISSION_DENIED;case xi.FAILED_PRECONDITION:return Ce.FAILED_PRECONDITION;case xi.ABORTED:return Ce.ABORTED;case xi.OUT_OF_RANGE:return Ce.OUT_OF_RANGE;case xi.UNIMPLEMENTED:return Ce.UNIMPLEMENTED;case xi.DATA_LOSS:return Ce.DATA_LOSS;default:return lt(39323,{code:i})}}(Zt=xi||(xi={}))[Zt.OK=0]="OK",Zt[Zt.CANCELLED=1]="CANCELLED",Zt[Zt.UNKNOWN=2]="UNKNOWN",Zt[Zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zt[Zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zt[Zt.NOT_FOUND=5]="NOT_FOUND",Zt[Zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zt[Zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zt[Zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zt[Zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zt[Zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zt[Zt.ABORTED=10]="ABORTED",Zt[Zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zt[Zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zt[Zt.INTERNAL=13]="INTERNAL",Zt[Zt.UNAVAILABLE=14]="UNAVAILABLE",Zt[Zt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI=new oo([4294967295,4294967295],0);function Gx(i){const e=$4().encode(i),n=new b_;return n.update(e),new Uint8Array(n.digest())}function qx(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),o=e.getUint32(4,!0),u=e.getUint32(8,!0),d=e.getUint32(12,!0);return[new oo([n,o],0),new oo([u,d],0)]}class cg{constructor(e,n,o){if(this.bitmap=e,this.padding=n,this.hashCount=o,n<0||n>=8)throw new qc(`Invalid padding: ${n}`);if(o<0)throw new qc(`Invalid hash count: ${o}`);if(e.length>0&&this.hashCount===0)throw new qc(`Invalid hash count: ${o}`);if(e.length===0&&n!==0)throw new qc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=oo.fromNumber(this.ge)}ye(e,n,o){let u=e.add(n.multiply(oo.fromNumber(o)));return u.compare(eI)===1&&(u=new oo([u.getBits(0),u.getBits(1)],0)),u.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Gx(e),[o,u]=qx(n);for(let d=0;d<this.hashCount;d++){const y=this.ye(o,u,d);if(!this.we(y))return!1}return!0}static create(e,n,o){const u=e%8==0?0:8-e%8,d=new Uint8Array(Math.ceil(e/8)),y=new cg(d,u,n);return o.forEach((v=>y.insert(v))),y}insert(e){if(this.ge===0)return;const n=Gx(e),[o,u]=qx(n);for(let d=0;d<this.hashCount;d++){const y=this.ye(o,u,d);this.Se(y)}}Se(e){const n=Math.floor(e/8),o=e%8;this.bitmap[n]|=1<<o}}class qc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,n,o,u,d){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,n,o){const u=new Map;return u.set(e,xu.createSynthesizedTargetChangeForCurrentChange(e,n,o)),new Uf(dt.min(),u,new Wn(zt),ba(),Ht())}}class xu{constructor(e,n,o,u,d){this.resumeToken=e,this.current=n,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,n,o){return new xu(o,n,Ht(),Ht(),Ht())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,n,o,u){this.be=e,this.removedTargetIds=n,this.key=o,this.De=u}}class cA{constructor(e,n){this.targetId=e,this.Ce=n}}class uA{constructor(e,n,o=ji.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=n,this.resumeToken=o,this.cause=u}}class Yx{constructor(){this.ve=0,this.Fe=Xx(),this.Me=ji.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ht(),n=Ht(),o=Ht();return this.Fe.forEach(((u,d)=>{switch(d){case 0:e=e.add(u);break;case 2:n=n.add(u);break;case 1:o=o.add(u);break;default:lt(38017,{changeType:d})}})),new xu(this.Me,this.xe,e,n,o)}qe(){this.Oe=!1,this.Fe=Xx()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,un(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class tI{constructor(e){this.Ge=e,this.ze=new Map,this.je=ba(),this.Je=Mh(),this.He=Mh(),this.Ye=new Wn(zt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const o=this.nt(n);switch(e.state){case 0:this.rt(n)&&o.Le(e.resumeToken);break;case 1:o.Ke(),o.Ne||o.qe(),o.Le(e.resumeToken);break;case 2:o.Ke(),o.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(o.We(),o.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),o.Le(e.resumeToken));break;default:lt(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((o,u)=>{this.rt(u)&&n(u)}))}st(e){const n=e.targetId,o=e.Ce.count,u=this.ot(n);if(u){const d=u.target;if(w1(d))if(o===0){const y=new et(d.path);this.et(n,y,er.newNoDocument(y,dt.min()))}else un(o===1,20013,{expectedCount:o});else{const y=this._t(n);if(y!==o){const v=this.ut(e),b=v?this.ct(v,e,y):1;if(b!==0){this.it(n);const _=b===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,_)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:o="",padding:u=0},hashCount:d=0}=n;let y,v;try{y=ho(o).toUint8Array()}catch(b){if(b instanceof P_)return ql("Decoding the base64 bloom filter in existence filter failed ("+b.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw b}try{v=new cg(y,u,d)}catch(b){return ql(b instanceof qc?"BloomFilter error: ":"Applying bloom filter failed: ",b),null}return v.ge===0?null:v}ct(e,n,o){return n.Ce.count===o-this.Pt(e,n.targetId)?0:2}Pt(e,n){const o=this.Ge.getRemoteKeysForTarget(n);let u=0;return o.forEach((d=>{const y=this.Ge.ht(),v=`projects/${y.projectId}/databases/${y.database}/documents/${d.path.canonicalString()}`;e.mightContain(v)||(this.et(n,d,null),u++)})),u}Tt(e){const n=new Map;this.ze.forEach(((d,y)=>{const v=this.ot(y);if(v){if(d.current&&w1(v.target)){const b=new et(v.target.path);this.It(b).has(y)||this.Et(y,b)||this.et(y,b,er.newNoDocument(b,e))}d.Be&&(n.set(y,d.ke()),d.qe())}}));let o=Ht();this.He.forEach(((d,y)=>{let v=!0;y.forEachWhile((b=>{const _=this.ot(b);return!_||_.purpose==="TargetPurposeLimboResolution"||(v=!1,!1)})),v&&(o=o.add(d))})),this.je.forEach(((d,y)=>y.setReadTime(e)));const u=new Uf(e,n,this.Ye,this.je,o);return this.je=ba(),this.Je=Mh(),this.He=Mh(),this.Ye=new Wn(zt),u}Xe(e,n){if(!this.rt(e))return;const o=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,o),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,o){if(!this.rt(e))return;const u=this.nt(e);this.Et(e,n)?u.Qe(n,1):u.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),o&&(this.je=this.je.insert(n,o))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Yx,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ti(zt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ti(zt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||He("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Yx),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Mh(){return new Wn(et.comparator)}function Xx(){return new Wn(et.comparator)}const nI={asc:"ASCENDING",desc:"DESCENDING"},iI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rI={and:"AND",or:"OR"};class sI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function v1(i,e){return i.useProto3Json||Rf(e)?e:{value:e}}function df(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hA(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function aI(i,e){return df(i,e.toTimestamp())}function js(i){return un(!!i,49232),dt.fromTimestamp((function(n){const o=uo(n);return new Mn(o.seconds,o.nanos)})(i))}function ug(i,e){return C1(i,e).canonicalString()}function C1(i,e){const n=(function(u){return new Cn(["projects",u.projectId,"databases",u.database])})(i).child("documents");return e===void 0?n:n.child(e)}function fA(i){const e=Cn.fromString(i);return un(xA(e),10190,{key:e.toString()}),e}function S1(i,e){return ug(i.databaseId,e.path)}function e1(i,e){const n=fA(e);if(n.get(1)!==i.databaseId.projectId)throw new ze(Ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new ze(Ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new et(gA(n))}function dA(i,e){return ug(i.databaseId,e)}function oI(i){const e=fA(i);return e.length===4?Cn.emptyPath():gA(e)}function I1(i){return new Cn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function gA(i){return un(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function Kx(i,e,n){return{name:S1(i,e),fields:n.value.mapValue.fields}}function lI(i,e){let n;if("targetChange"in e){e.targetChange;const o=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:lt(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),u=e.targetChange.targetIds||[],d=(function(_,C){return _.useProto3Json?(un(C===void 0||typeof C=="string",58123),ji.fromBase64String(C||"")):(un(C===void 0||C instanceof Buffer||C instanceof Uint8Array,16193),ji.fromUint8Array(C||new Uint8Array))})(i,e.targetChange.resumeToken),y=e.targetChange.cause,v=y&&(function(_){const C=_.code===void 0?Ce.UNKNOWN:lA(_.code);return new ze(C,_.message||"")})(y);n=new uA(o,u,d,v||null)}else if("documentChange"in e){e.documentChange;const o=e.documentChange;o.document,o.document.name,o.document.updateTime;const u=e1(i,o.document.name),d=js(o.document.updateTime),y=o.document.createTime?js(o.document.createTime):dt.min(),v=new Nr({mapValue:{fields:o.document.fields}}),b=er.newFoundDocument(u,d,y,v),_=o.targetIds||[],C=o.removedTargetIds||[];n=new Xh(_,C,b.key,b)}else if("documentDelete"in e){e.documentDelete;const o=e.documentDelete;o.document;const u=e1(i,o.document),d=o.readTime?js(o.readTime):dt.min(),y=er.newNoDocument(u,d),v=o.removedTargetIds||[];n=new Xh([],v,y.key,y)}else if("documentRemove"in e){e.documentRemove;const o=e.documentRemove;o.document;const u=e1(i,o.document),d=o.removedTargetIds||[];n=new Xh([],d,u,null)}else{if(!("filter"in e))return lt(11601,{Rt:e});{e.filter;const o=e.filter;o.targetId;const{count:u=0,unchangedNames:d}=o,y=new Z4(u,d),v=o.targetId;n=new cA(v,y)}}return n}function cI(i,e){let n;if(e instanceof pu)n={update:Kx(i,e.key,e.value)};else if(e instanceof kf)n={delete:S1(i,e.key)};else if(e instanceof Eo)n={update:Kx(i,e.key,e.data),updateMask:yI(e.fieldMask)};else{if(!(e instanceof K4))return lt(16599,{Vt:e.type});n={verify:S1(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((o=>(function(d,y){const v=y.transform;if(v instanceof hf)return{fieldPath:y.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(v instanceof cu)return{fieldPath:y.field.canonicalString(),appendMissingElements:{values:v.elements}};if(v instanceof uu)return{fieldPath:y.field.canonicalString(),removeAllFromArray:{values:v.elements}};if(v instanceof ff)return{fieldPath:y.field.canonicalString(),increment:v.Ae};throw lt(20930,{transform:y.transform})})(0,o)))),e.precondition.isNone||(n.currentDocument=(function(u,d){return d.updateTime!==void 0?{updateTime:aI(u,d.updateTime)}:d.exists!==void 0?{exists:d.exists}:lt(27497)})(i,e.precondition)),n}function uI(i,e){return i&&i.length>0?(un(e!==void 0,14353),i.map((n=>(function(u,d){let y=u.updateTime?js(u.updateTime):js(d);return y.isEqual(dt.min())&&(y=js(d)),new q4(y,u.transformResults||[])})(n,e)))):[]}function hI(i,e){return{documents:[dA(i,e.path)]}}function fI(i,e){const n={structuredQuery:{}},o=e.path;let u;e.collectionGroup!==null?(u=o,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(u=o.popLast(),n.structuredQuery.from=[{collectionId:o.lastSegment()}]),n.parent=dA(i,u);const d=(function(_){if(_.length!==0)return pA(vs.create(_,"and"))})(e.filters);d&&(n.structuredQuery.where=d);const y=(function(_){if(_.length!==0)return _.map((C=>(function(L){return{field:Bl(L.field),direction:mI(L.dir)}})(C)))})(e.orderBy);y&&(n.structuredQuery.orderBy=y);const v=v1(i,e.limit);return v!==null&&(n.structuredQuery.limit=v),e.startAt&&(n.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{ft:n,parent:u}}function dI(i){let e=oI(i.parent);const n=i.structuredQuery,o=n.from?n.from.length:0;let u=null;if(o>0){un(o===1,65062);const C=n.from[0];C.allDescendants?u=C.collectionId:e=e.child(C.collectionId)}let d=[];n.where&&(d=(function(I){const L=mA(I);return L instanceof vs&&q_(L)?L.getFilters():[L]})(n.where));let y=[];n.orderBy&&(y=(function(I){return I.map((L=>(function(q){return new uf(kl(q.field),(function(Y){switch(Y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(q.direction))})(L)))})(n.orderBy));let v=null;n.limit&&(v=(function(I){let L;return L=typeof I=="object"?I.value:I,Rf(L)?null:L})(n.limit));let b=null;n.startAt&&(b=(function(I){const L=!!I.before,B=I.values||[];return new cf(B,L)})(n.startAt));let _=null;return n.endAt&&(_=(function(I){const L=!I.before,B=I.values||[];return new cf(B,L)})(n.endAt)),D4(e,u,y,d,v,"F",b,_)}function gI(i,e){const n=(function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return lt(28987,{purpose:u})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function mA(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const o=kl(n.unaryFilter.field);return yi.create(o,"==",{doubleValue:NaN});case"IS_NULL":const u=kl(n.unaryFilter.field);return yi.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const d=kl(n.unaryFilter.field);return yi.create(d,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const y=kl(n.unaryFilter.field);return yi.create(y,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return lt(61313);default:return lt(60726)}})(i):i.fieldFilter!==void 0?(function(n){return yi.create(kl(n.fieldFilter.field),(function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return lt(58110);default:return lt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return vs.create(n.compositeFilter.filters.map((o=>mA(o))),(function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return lt(1026)}})(n.compositeFilter.op))})(i):lt(30097,{filter:i})}function mI(i){return nI[i]}function pI(i){return iI[i]}function xI(i){return rI[i]}function Bl(i){return{fieldPath:i.canonicalString()}}function kl(i){return Vi.fromServerFormat(i.fieldPath)}function pA(i){return i instanceof yi?(function(n){if(n.op==="=="){if(Px(n.value))return{unaryFilter:{field:Bl(n.field),op:"IS_NAN"}};if(Lx(n.value))return{unaryFilter:{field:Bl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Px(n.value))return{unaryFilter:{field:Bl(n.field),op:"IS_NOT_NAN"}};if(Lx(n.value))return{unaryFilter:{field:Bl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bl(n.field),op:pI(n.op),value:n.value}}})(i):i instanceof vs?(function(n){const o=n.getFilters().map((u=>pA(u)));return o.length===1?o[0]:{compositeFilter:{op:xI(n.op),filters:o}}})(i):lt(54877,{filter:i})}function yI(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function xA(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e,n,o,u,d=dt.min(),y=dt.min(),v=ji.EMPTY_BYTE_STRING,b=null){this.target=e,this.targetId=n,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=y,this.resumeToken=v,this.expectedCount=b}withSequenceNumber(e){return new ro(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ro(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ro(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ro(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e){this.yt=e}}function _I(i){const e=dI({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?T1(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(){this.Cn=new wI}addToCollectionParentIndex(e,n){return this.Cn.add(n),Ne.resolve()}getCollectionParents(e,n){return Ne.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Ne.resolve()}deleteFieldIndex(e,n){return Ne.resolve()}deleteAllFieldIndexes(e){return Ne.resolve()}createTargetIndexes(e,n){return Ne.resolve()}getDocumentsMatchingTarget(e,n){return Ne.resolve(null)}getIndexType(e,n){return Ne.resolve(0)}getFieldIndexes(e,n){return Ne.resolve([])}getNextCollectionGroupToUpdate(e){return Ne.resolve(null)}getMinOffset(e,n){return Ne.resolve(co.min())}getMinOffsetFromCollectionGroup(e,n){return Ne.resolve(co.min())}updateCollectionGroup(e,n,o){return Ne.resolve()}updateIndexEntries(e,n){return Ne.resolve()}}class wI{constructor(){this.index={}}add(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n]||new Ti(Cn.comparator),d=!u.has(o);return this.index[n]=u.add(o),d}has(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n];return u&&u.has(o)}getEntries(e){return(this.index[e]||new Ti(Cn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},yA=41943040;class Ir{static withCacheSize(e){return new Ir(e,Ir.DEFAULT_COLLECTION_PERCENTILE,Ir.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ir.DEFAULT_COLLECTION_PERCENTILE=10,Ir.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ir.DEFAULT=new Ir(yA,Ir.DEFAULT_COLLECTION_PERCENTILE,Ir.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ir.DISABLED=new Ir(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Wl(0)}static cr(){return new Wl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx="LruGarbageCollector",bI=1048576;function Zx([i,e],[n,o]){const u=zt(i,n);return u===0?zt(e,o):u}class TI{constructor(e){this.Ir=e,this.buffer=new Ti(Zx),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const o=this.buffer.last();Zx(n,o)<0&&(this.buffer=this.buffer.delete(o).add(n))}}get maxValue(){return this.buffer.last()[0]}}class vI{constructor(e,n,o){this.garbageCollector=e,this.asyncQueue=n,this.localStore=o,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){He(Qx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){tc(n)?He(Qx,"Ignoring IndexedDB error during garbage collection: ",n):await ec(n)}await this.Vr(3e5)}))}}class CI{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((o=>Math.floor(n/100*o)))}nthSequenceNumber(e,n){if(n===0)return Ne.resolve(Nf.ce);const o=new TI(n);return this.mr.forEachTarget(e,(u=>o.Ar(u.sequenceNumber))).next((()=>this.mr.pr(e,(u=>o.Ar(u))))).next((()=>o.maxValue))}removeTargets(e,n,o){return this.mr.removeTargets(e,n,o)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(He("LruGarbageCollector","Garbage collection skipped; disabled"),Ne.resolve(Wx)):this.getCacheSize(e).next((o=>o<this.params.cacheSizeCollectionThreshold?(He("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Wx):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let o,u,d,y,v,b,_;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((I=>(I>this.params.maximumSequenceNumbersToCollect?(He("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),u=this.params.maximumSequenceNumbersToCollect):u=I,y=Date.now(),this.nthSequenceNumber(e,u)))).next((I=>(o=I,v=Date.now(),this.removeTargets(e,o,n)))).next((I=>(d=I,b=Date.now(),this.removeOrphanedDocuments(e,o)))).next((I=>(_=Date.now(),Ll()<=Jt.DEBUG&&He("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${y-C}ms
	Determined least recently used ${u} in `+(v-y)+`ms
	Removed ${d} targets in `+(b-v)+`ms
	Removed ${I} documents in `+(_-b)+`ms
Total Duration: ${_-C}ms`),Ne.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:d,documentsRemoved:I}))))}}function SI(i,e){return new CI(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(){this.changes=new el((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,er.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const o=this.changes.get(n);return o!==void 0?Ne.resolve(o):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e,n,o,u){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=o,this.indexManager=u}getDocument(e,n){let o=null;return this.documentOverlayCache.getOverlay(e,n).next((u=>(o=u,this.remoteDocumentCache.getEntry(e,n)))).next((u=>(o!==null&&eu(o.mutation,u,qr.empty(),Mn.now()),u)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((o=>this.getLocalViewOfDocuments(e,o,Ht()).next((()=>o))))}getLocalViewOfDocuments(e,n,o=Ht()){const u=qo();return this.populateOverlays(e,u,n).next((()=>this.computeViews(e,n,u,o).next((d=>{let y=Gc();return d.forEach(((v,b)=>{y=y.insert(v,b.overlayedDocument)})),y}))))}getOverlayedDocuments(e,n){const o=qo();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,Ht())))}populateOverlays(e,n,o){const u=[];return o.forEach((d=>{n.has(d)||u.push(d)})),this.documentOverlayCache.getOverlays(e,u).next((d=>{d.forEach(((y,v)=>{n.set(y,v)}))}))}computeViews(e,n,o,u){let d=ba();const y=$c(),v=(function(){return $c()})();return n.forEach(((b,_)=>{const C=o.get(_.key);u.has(_.key)&&(C===void 0||C.mutation instanceof Eo)?d=d.insert(_.key,_):C!==void 0?(y.set(_.key,C.mutation.getFieldMask()),eu(C.mutation,_,C.mutation.getFieldMask(),Mn.now())):y.set(_.key,qr.empty())})),this.recalculateAndSaveOverlays(e,d).next((b=>(b.forEach(((_,C)=>y.set(_,C))),n.forEach(((_,C)=>v.set(_,new NI(C,y.get(_)??null)))),v)))}recalculateAndSaveOverlays(e,n){const o=$c();let u=new Wn(((y,v)=>y-v)),d=Ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((y=>{for(const v of y)v.keys().forEach((b=>{const _=n.get(b);if(_===null)return;let C=o.get(b)||qr.empty();C=v.applyToLocalView(_,C),o.set(b,C);const I=(u.get(v.batchId)||Ht()).add(b);u=u.insert(v.batchId,I)}))})).next((()=>{const y=[],v=u.getReverseIterator();for(;v.hasNext();){const b=v.getNext(),_=b.key,C=b.value,I=eA();C.forEach((L=>{if(!d.has(L)){const B=aA(n.get(L),o.get(L));B!==null&&I.set(L,B),d=d.add(L)}})),y.push(this.documentOverlayCache.saveOverlays(e,_,I))}return Ne.waitFor(y)})).next((()=>o))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((o=>this.recalculateAndSaveOverlays(e,o)))}getDocumentsMatchingQuery(e,n,o,u){return(function(y){return et.isDocumentKey(y.path)&&y.collectionGroup===null&&y.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):W_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,o,u):this.getDocumentsMatchingCollectionQuery(e,n,o,u)}getNextDocuments(e,n,o,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,o,u).next((d=>{const y=u-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,o.largestBatchId,u-d.size):Ne.resolve(qo());let v=su,b=d;return y.next((_=>Ne.forEach(_,((C,I)=>(v<I.largestBatchId&&(v=I.largestBatchId),d.get(C)?Ne.resolve():this.remoteDocumentCache.getEntry(e,C).next((L=>{b=b.insert(C,L)}))))).next((()=>this.populateOverlays(e,_,d))).next((()=>this.computeViews(e,b,_,Ht()))).next((C=>({batchId:v,changes:$_(C)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new et(n)).next((o=>{let u=Gc();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u}))}getDocumentsMatchingCollectionGroupQuery(e,n,o,u){const d=n.collectionGroup;let y=Gc();return this.indexManager.getCollectionParents(e,d).next((v=>Ne.forEach(v,(b=>{const _=(function(I,L){return new mu(L,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)})(n,b.child(d));return this.getDocumentsMatchingCollectionQuery(e,_,o,u).next((C=>{C.forEach(((I,L)=>{y=y.insert(I,L)}))}))})).next((()=>y))))}getDocumentsMatchingCollectionQuery(e,n,o,u){let d;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,o.largestBatchId).next((y=>(d=y,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,o,d,u)))).next((y=>{d.forEach(((b,_)=>{const C=_.getKey();y.get(C)===null&&(y=y.insert(C,er.newInvalidDocument(C)))}));let v=Gc();return y.forEach(((b,_)=>{const C=d.get(b);C!==void 0&&eu(C.mutation,_,qr.empty(),Mn.now()),Lf(n,_)&&(v=v.insert(b,_))})),v}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Ne.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(u){return{id:u.id,version:u.version,createTime:js(u.createTime)}})(n)),Ne.resolve()}getNamedQuery(e,n){return Ne.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(u){return{name:u.name,query:_I(u.bundledQuery),readTime:js(u.readTime)}})(n)),Ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(){this.overlays=new Wn(et.comparator),this.qr=new Map}getOverlay(e,n){return Ne.resolve(this.overlays.get(n))}getOverlays(e,n){const o=qo();return Ne.forEach(n,(u=>this.getOverlay(e,u).next((d=>{d!==null&&o.set(u,d)})))).next((()=>o))}saveOverlays(e,n,o){return o.forEach(((u,d)=>{this.St(e,n,d)})),Ne.resolve()}removeOverlaysForBatchId(e,n,o){const u=this.qr.get(o);return u!==void 0&&(u.forEach((d=>this.overlays=this.overlays.remove(d))),this.qr.delete(o)),Ne.resolve()}getOverlaysForCollection(e,n,o){const u=qo(),d=n.length+1,y=new et(n.child("")),v=this.overlays.getIteratorFrom(y);for(;v.hasNext();){const b=v.getNext().value,_=b.getKey();if(!n.isPrefixOf(_.path))break;_.path.length===d&&b.largestBatchId>o&&u.set(b.getKey(),b)}return Ne.resolve(u)}getOverlaysForCollectionGroup(e,n,o,u){let d=new Wn(((_,C)=>_-C));const y=this.overlays.getIterator();for(;y.hasNext();){const _=y.getNext().value;if(_.getKey().getCollectionGroup()===n&&_.largestBatchId>o){let C=d.get(_.largestBatchId);C===null&&(C=qo(),d=d.insert(_.largestBatchId,C)),C.set(_.getKey(),_)}}const v=qo(),b=d.getIterator();for(;b.hasNext()&&(b.getNext().value.forEach(((_,C)=>v.set(_,C))),!(v.size()>=u)););return Ne.resolve(v)}St(e,n,o){const u=this.overlays.get(o.key);if(u!==null){const y=this.qr.get(u.largestBatchId).delete(o.key);this.qr.set(u.largestBatchId,y)}this.overlays=this.overlays.insert(o.key,new Q4(n,o));let d=this.qr.get(n);d===void 0&&(d=Ht(),this.qr.set(n,d)),this.qr.set(n,d.add(o.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(){this.sessionToken=ji.EMPTY_BYTE_STRING}getSessionToken(e){return Ne.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(){this.Qr=new Ti(Ii.$r),this.Ur=new Ti(Ii.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const o=new Ii(e,n);this.Qr=this.Qr.add(o),this.Ur=this.Ur.add(o)}Wr(e,n){e.forEach((o=>this.addReference(o,n)))}removeReference(e,n){this.Gr(new Ii(e,n))}zr(e,n){e.forEach((o=>this.removeReference(o,n)))}jr(e){const n=new et(new Cn([])),o=new Ii(n,e),u=new Ii(n,e+1),d=[];return this.Ur.forEachInRange([o,u],(y=>{this.Gr(y),d.push(y.key)})),d}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new et(new Cn([])),o=new Ii(n,e),u=new Ii(n,e+1);let d=Ht();return this.Ur.forEachInRange([o,u],(y=>{d=d.add(y.key)})),d}containsKey(e){const n=new Ii(e,0),o=this.Qr.firstAfterOrEqual(n);return o!==null&&e.isEqual(o.key)}}class Ii{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return et.comparator(e.key,n.key)||zt(e.Yr,n.Yr)}static Kr(e,n){return zt(e.Yr,n.Yr)||et.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ti(Ii.$r)}checkEmpty(e){return Ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,o,u){const d=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const y=new W4(d,n,o,u);this.mutationQueue.push(y);for(const v of u)this.Zr=this.Zr.add(new Ii(v.key,d)),this.indexManager.addToCollectionParentIndex(e,v.key.path.popLast());return Ne.resolve(y)}lookupMutationBatch(e,n){return Ne.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const o=n+1,u=this.ei(o),d=u<0?0:u;return Ne.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return Ne.resolve(this.mutationQueue.length===0?ng:this.tr-1)}getAllMutationBatches(e){return Ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const o=new Ii(n,0),u=new Ii(n,Number.POSITIVE_INFINITY),d=[];return this.Zr.forEachInRange([o,u],(y=>{const v=this.Xr(y.Yr);d.push(v)})),Ne.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new Ti(zt);return n.forEach((u=>{const d=new Ii(u,0),y=new Ii(u,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([d,y],(v=>{o=o.add(v.Yr)}))})),Ne.resolve(this.ti(o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,u=o.length+1;let d=o;et.isDocumentKey(d)||(d=d.child(""));const y=new Ii(new et(d),0);let v=new Ti(zt);return this.Zr.forEachWhile((b=>{const _=b.key.path;return!!o.isPrefixOf(_)&&(_.length===u&&(v=v.add(b.Yr)),!0)}),y),Ne.resolve(this.ti(v))}ti(e){const n=[];return e.forEach((o=>{const u=this.Xr(o);u!==null&&n.push(u)})),n}removeMutationBatch(e,n){un(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let o=this.Zr;return Ne.forEach(n.mutations,(u=>{const d=new Ii(u.key,n.batchId);return o=o.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)})).next((()=>{this.Zr=o}))}ir(e){}containsKey(e,n){const o=new Ii(n,0),u=this.Zr.firstAfterOrEqual(o);return Ne.resolve(n.isEqual(u&&u.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ne.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e){this.ri=e,this.docs=(function(){return new Wn(et.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const o=n.key,u=this.docs.get(o),d=u?u.size:0,y=this.ri(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:y}),this.size+=y-d,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const o=this.docs.get(n);return Ne.resolve(o?o.document.mutableCopy():er.newInvalidDocument(n))}getEntries(e,n){let o=ba();return n.forEach((u=>{const d=this.docs.get(u);o=o.insert(u,d?d.document.mutableCopy():er.newInvalidDocument(u))})),Ne.resolve(o)}getDocumentsMatchingQuery(e,n,o,u){let d=ba();const y=n.path,v=new et(y.child("__id-9223372036854775808__")),b=this.docs.getIteratorFrom(v);for(;b.hasNext();){const{key:_,value:{document:C}}=b.getNext();if(!y.isPrefixOf(_.path))break;_.path.length>y.length+1||u4(c4(C),o)<=0||(u.has(C.key)||Lf(n,C))&&(d=d.insert(C.key,C.mutableCopy()))}return Ne.resolve(d)}getAllFromCollectionGroup(e,n,o,u){lt(9500)}ii(e,n){return Ne.forEach(this.docs,(o=>n(o)))}newChangeBuffer(e){return new BI(this)}getSize(e){return Ne.resolve(this.size)}}class BI extends II{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((o,u)=>{u.isValidDocument()?n.push(this.Nr.addEntry(e,u)):this.Nr.removeEntry(o)})),Ne.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e){this.persistence=e,this.si=new el((n=>sg(n)),ag),this.lastRemoteSnapshotVersion=dt.min(),this.highestTargetId=0,this.oi=0,this._i=new hg,this.targetCount=0,this.ai=Wl.ur()}forEachTarget(e,n){return this.si.forEach(((o,u)=>n(u))),Ne.resolve()}getLastRemoteSnapshotVersion(e){return Ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ne.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ne.resolve(this.highestTargetId)}setTargetsMetadata(e,n,o){return o&&(this.lastRemoteSnapshotVersion=o),n>this.oi&&(this.oi=n),Ne.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Wl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Ne.resolve()}updateTargetData(e,n){return this.Pr(n),Ne.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Ne.resolve()}removeTargets(e,n,o){let u=0;const d=[];return this.si.forEach(((y,v)=>{v.sequenceNumber<=n&&o.get(v.targetId)===null&&(this.si.delete(y),d.push(this.removeMatchingKeysForTargetId(e,v.targetId)),u++)})),Ne.waitFor(d).next((()=>u))}getTargetCount(e){return Ne.resolve(this.targetCount)}getTargetData(e,n){const o=this.si.get(n)||null;return Ne.resolve(o)}addMatchingKeys(e,n,o){return this._i.Wr(n,o),Ne.resolve()}removeMatchingKeys(e,n,o){this._i.zr(n,o);const u=this.persistence.referenceDelegate,d=[];return u&&n.forEach((y=>{d.push(u.markPotentiallyOrphaned(e,y))})),Ne.waitFor(d)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Ne.resolve()}getMatchingKeysForTargetId(e,n){const o=this._i.Hr(n);return Ne.resolve(o)}containsKey(e,n){return Ne.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,n){this.ui={},this.overlays={},this.ci=new Nf(0),this.li=!1,this.li=!0,this.hi=new MI,this.referenceDelegate=e(this),this.Pi=new kI(this),this.indexManager=new AI,this.remoteDocumentCache=(function(u){return new PI(u)})((o=>this.referenceDelegate.Ti(o))),this.serializer=new EI(n),this.Ii=new OI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new DI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let o=this.ui[e.toKey()];return o||(o=new LI(n,this.referenceDelegate),this.ui[e.toKey()]=o),o}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,o){He("MemoryPersistence","Starting transaction:",e);const u=new UI(this.ci.next());return this.referenceDelegate.Ei(),o(u).next((d=>this.referenceDelegate.di(u).next((()=>d)))).toPromise().then((d=>(u.raiseOnCommittedEvent(),d)))}Ai(e,n){return Ne.or(Object.values(this.ui).map((o=>()=>o.containsKey(e,n))))}}class UI extends f4{constructor(e){super(),this.currentSequenceNumber=e}}class fg{constructor(e){this.persistence=e,this.Ri=new hg,this.Vi=null}static mi(e){return new fg(e)}get fi(){if(this.Vi)return this.Vi;throw lt(60996)}addReference(e,n,o){return this.Ri.addReference(o,n),this.fi.delete(o.toString()),Ne.resolve()}removeReference(e,n,o){return this.Ri.removeReference(o,n),this.fi.add(o.toString()),Ne.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Ne.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((u=>this.fi.add(u.toString())));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,n.targetId).next((u=>{u.forEach((d=>this.fi.add(d.toString())))})).next((()=>o.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ne.forEach(this.fi,(o=>{const u=et.fromPath(o);return this.gi(e,u).next((d=>{d||n.removeEntry(u,dt.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((o=>{o?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return Ne.or([()=>Ne.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class gf{constructor(e,n){this.persistence=e,this.pi=new el((o=>m4(o.path)),((o,u)=>o.isEqual(u))),this.garbageCollector=SI(this,n)}static mi(e,n){return new gf(e,n)}Ei(){}di(e){return Ne.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((o=>n.next((u=>o+u))))}wr(e){let n=0;return this.pr(e,(o=>{n++})).next((()=>n))}pr(e,n){return Ne.forEach(this.pi,((o,u)=>this.br(e,o,u).next((d=>d?Ne.resolve():n(u)))))}removeTargets(e,n,o){return this.persistence.getTargetCache().removeTargets(e,n,o)}removeOrphanedDocuments(e,n){let o=0;const u=this.persistence.getRemoteDocumentCache(),d=u.newChangeBuffer();return u.ii(e,(y=>this.br(e,y,n).next((v=>{v||(o++,d.removeEntry(y,dt.min()))})))).next((()=>d.apply(e))).next((()=>o))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Ne.resolve()}removeTarget(e,n){const o=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,o)}addReference(e,n,o){return this.pi.set(o,e.currentSequenceNumber),Ne.resolve()}removeReference(e,n,o){return this.pi.set(o,e.currentSequenceNumber),Ne.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Ne.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Gh(e.data.value)),n}br(e,n,o){return Ne.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const u=this.pi.get(n);return Ne.resolve(u!==void 0&&u>o)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,n,o,u){this.targetId=e,this.fromCache=n,this.Es=o,this.ds=u}static As(e,n){let o=Ht(),u=Ht();for(const d of n.docChanges)switch(d.type){case 0:o=o.add(d.doc.key);break;case 1:u=u.add(d.doc.key)}return new dg(e,n.fromCache,o,u)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return MC()?8:d4(OC())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,o,u){const d={result:null};return this.ys(e,n).next((y=>{d.result=y})).next((()=>{if(!d.result)return this.ws(e,n,u,o).next((y=>{d.result=y}))})).next((()=>{if(d.result)return;const y=new VI;return this.Ss(e,n,y).next((v=>{if(d.result=v,this.Vs)return this.bs(e,n,y,v.size)}))})).next((()=>d.result))}bs(e,n,o,u){return o.documentReadCount<this.fs?(Ll()<=Jt.DEBUG&&He("QueryEngine","SDK will not create cache indexes for query:",Pl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ne.resolve()):(Ll()<=Jt.DEBUG&&He("QueryEngine","Query:",Pl(n),"scans",o.documentReadCount,"local documents and returns",u,"documents as results."),o.documentReadCount>this.gs*u?(Ll()<=Jt.DEBUG&&He("QueryEngine","The SDK decides to create cache indexes for query:",Pl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vs(n))):Ne.resolve())}ys(e,n){if(Vx(n))return Ne.resolve(null);let o=Vs(n);return this.indexManager.getIndexType(e,o).next((u=>u===0?null:(n.limit!==null&&u===1&&(n=T1(n,null,"F"),o=Vs(n)),this.indexManager.getDocumentsMatchingTarget(e,o).next((d=>{const y=Ht(...d);return this.ps.getDocuments(e,y).next((v=>this.indexManager.getMinOffset(e,o).next((b=>{const _=this.Ds(n,v);return this.Cs(n,_,y,b.readTime)?this.ys(e,T1(n,null,"F")):this.vs(e,_,n,b)}))))})))))}ws(e,n,o,u){return Vx(n)||u.isEqual(dt.min())?Ne.resolve(null):this.ps.getDocuments(e,o).next((d=>{const y=this.Ds(n,d);return this.Cs(n,y,o,u)?Ne.resolve(null):(Ll()<=Jt.DEBUG&&He("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),Pl(n)),this.vs(e,y,n,l4(u,su)).next((v=>v)))}))}Ds(e,n){let o=new Ti(Z_(e));return n.forEach(((u,d)=>{Lf(e,d)&&(o=o.add(d))})),o}Cs(e,n,o,u){if(e.limit===null)return!1;if(o.size!==n.size)return!0;const d=e.limitType==="F"?n.last():n.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(u)>0)}Ss(e,n,o){return Ll()<=Jt.DEBUG&&He("QueryEngine","Using full collection scan to execute query:",Pl(n)),this.ps.getDocumentsMatchingQuery(e,n,co.min(),o)}vs(e,n,o,u){return this.ps.getDocumentsMatchingQuery(e,o,u).next((d=>(n.forEach((y=>{d=d.insert(y.key,y)})),d)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gg="LocalStore",FI=3e8;class zI{constructor(e,n,o,u){this.persistence=e,this.Fs=n,this.serializer=u,this.Ms=new Wn(zt),this.xs=new el((d=>sg(d)),ag),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(o)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new RI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function HI(i,e,n,o){return new zI(i,e,n,o)}async function _A(i,e){const n=xt(i);return await n.persistence.runTransaction("Handle user change","readonly",(o=>{let u;return n.mutationQueue.getAllMutationBatches(o).next((d=>(u=d,n.Bs(e),n.mutationQueue.getAllMutationBatches(o)))).next((d=>{const y=[],v=[];let b=Ht();for(const _ of u){y.push(_.batchId);for(const C of _.mutations)b=b.add(C.key)}for(const _ of d){v.push(_.batchId);for(const C of _.mutations)b=b.add(C.key)}return n.localDocuments.getDocuments(o,b).next((_=>({Ls:_,removedBatchIds:y,addedBatchIds:v})))}))}))}function GI(i,e){const n=xt(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(o=>{const u=e.batch.keys(),d=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(v,b,_,C){const I=_.batch,L=I.keys();let B=Ne.resolve();return L.forEach((q=>{B=B.next((()=>C.getEntry(b,q))).next((K=>{const Y=_.docVersions.get(q);un(Y!==null,48541),K.version.compareTo(Y)<0&&(I.applyToRemoteDocument(K,_),K.isValidDocument()&&(K.setReadTime(_.commitVersion),C.addEntry(K)))}))})),B.next((()=>v.mutationQueue.removeMutationBatch(b,I)))})(n,o,e,d).next((()=>d.apply(o))).next((()=>n.mutationQueue.performConsistencyCheck(o))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(o,u,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,(function(v){let b=Ht();for(let _=0;_<v.mutationResults.length;++_)v.mutationResults[_].transformResults.length>0&&(b=b.add(v.batch.mutations[_].key));return b})(e)))).next((()=>n.localDocuments.getDocuments(o,u)))}))}function AA(i){const e=xt(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function qI(i,e){const n=xt(i),o=e.snapshotVersion;let u=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(d=>{const y=n.Ns.newChangeBuffer({trackRemovals:!0});u=n.Ms;const v=[];e.targetChanges.forEach(((C,I)=>{const L=u.get(I);if(!L)return;v.push(n.Pi.removeMatchingKeys(d,C.removedDocuments,I).next((()=>n.Pi.addMatchingKeys(d,C.addedDocuments,I))));let B=L.withSequenceNumber(d.currentSequenceNumber);e.targetMismatches.get(I)!==null?B=B.withResumeToken(ji.EMPTY_BYTE_STRING,dt.min()).withLastLimboFreeSnapshotVersion(dt.min()):C.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(C.resumeToken,o)),u=u.insert(I,B),(function(K,Y,ae){return K.resumeToken.approximateByteSize()===0||Y.snapshotVersion.toMicroseconds()-K.snapshotVersion.toMicroseconds()>=FI?!0:ae.addedDocuments.size+ae.modifiedDocuments.size+ae.removedDocuments.size>0})(L,B,C)&&v.push(n.Pi.updateTargetData(d,B))}));let b=ba(),_=Ht();if(e.documentUpdates.forEach((C=>{e.resolvedLimboDocuments.has(C)&&v.push(n.persistence.referenceDelegate.updateLimboDocument(d,C))})),v.push(YI(d,y,e.documentUpdates).next((C=>{b=C.ks,_=C.qs}))),!o.isEqual(dt.min())){const C=n.Pi.getLastRemoteSnapshotVersion(d).next((I=>n.Pi.setTargetsMetadata(d,d.currentSequenceNumber,o)));v.push(C)}return Ne.waitFor(v).next((()=>y.apply(d))).next((()=>n.localDocuments.getLocalViewOfDocuments(d,b,_))).next((()=>b))})).then((d=>(n.Ms=u,d)))}function YI(i,e,n){let o=Ht(),u=Ht();return n.forEach((d=>o=o.add(d))),e.getEntries(i,o).next((d=>{let y=ba();return n.forEach(((v,b)=>{const _=d.get(v);b.isFoundDocument()!==_.isFoundDocument()&&(u=u.add(v)),b.isNoDocument()&&b.version.isEqual(dt.min())?(e.removeEntry(v,b.readTime),y=y.insert(v,b)):!_.isValidDocument()||b.version.compareTo(_.version)>0||b.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(b),y=y.insert(v,b)):He(gg,"Ignoring outdated watch update for ",v,". Current version:",_.version," Watch version:",b.version)})),{ks:y,qs:u}}))}function XI(i,e){const n=xt(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(o=>(e===void 0&&(e=ng),n.mutationQueue.getNextMutationBatchAfterBatchId(o,e))))}function KI(i,e){const n=xt(i);return n.persistence.runTransaction("Allocate target","readwrite",(o=>{let u;return n.Pi.getTargetData(o,e).next((d=>d?(u=d,Ne.resolve(u)):n.Pi.allocateTargetId(o).next((y=>(u=new ro(e,y,"TargetPurposeListen",o.currentSequenceNumber),n.Pi.addTargetData(o,u).next((()=>u)))))))})).then((o=>{const u=n.Ms.get(o.targetId);return(u===null||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(o.targetId,o),n.xs.set(e,o.targetId)),o}))}async function N1(i,e,n){const o=xt(i),u=o.Ms.get(e),d=n?"readwrite":"readwrite-primary";try{n||await o.persistence.runTransaction("Release target",d,(y=>o.persistence.referenceDelegate.removeTarget(y,u)))}catch(y){if(!tc(y))throw y;He(gg,`Failed to update sequence numbers for target ${e}: ${y}`)}o.Ms=o.Ms.remove(e),o.xs.delete(u.target)}function Jx(i,e,n){const o=xt(i);let u=dt.min(),d=Ht();return o.persistence.runTransaction("Execute query","readwrite",(y=>(function(b,_,C){const I=xt(b),L=I.xs.get(C);return L!==void 0?Ne.resolve(I.Ms.get(L)):I.Pi.getTargetData(_,C)})(o,y,Vs(e)).next((v=>{if(v)return u=v.lastLimboFreeSnapshotVersion,o.Pi.getMatchingKeysForTargetId(y,v.targetId).next((b=>{d=b}))})).next((()=>o.Fs.getDocumentsMatchingQuery(y,e,n?u:dt.min(),n?d:Ht()))).next((v=>(WI(o,L4(e),v),{documents:v,Qs:d})))))}function WI(i,e,n){let o=i.Os.get(e)||dt.min();n.forEach(((u,d)=>{d.readTime.compareTo(o)>0&&(o=d.readTime)})),i.Os.set(e,o)}class $x{constructor(){this.activeTargetIds=j4()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class QI{constructor(){this.Mo=new $x,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,o){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,o){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new $x,Promise.resolve()}handleUserChange(e,n,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ey="ConnectivityMonitor";class ty{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){He(ey,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){He(ey,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lh=null;function R1(){return Lh===null?Lh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Lh++,"0x"+Lh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1="RestConnection",JI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $I{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),u=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${o}/databases/${u}`,this.Wo=this.databaseId.database===of?`project_id=${o}`:`project_id=${o}&database_id=${u}`}Go(e,n,o,u,d){const y=R1(),v=this.zo(e,n.toUriEncodedString());He(t1,`Sending RPC '${e}' ${y}:`,v,o);const b={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(b,u,d);const{host:_}=new URL(v),C=J1(_);return this.Jo(e,v,b,o,C).then((I=>(He(t1,`Received RPC '${e}' ${y}: `,I),I)),(I=>{throw ql(t1,`RPC '${e}' ${y} failed with error: `,I,"url: ",v,"request:",o),I}))}Ho(e,n,o,u,d,y){return this.Go(e,n,o,u,d)}jo(e,n,o){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+$l})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((u,d)=>e[d]=u)),o&&o.headers.forEach(((u,d)=>e[d]=u))}zo(e,n){const o=JI[e];return`${this.Uo}/v1/${n}:${o}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji="WebChannelConnection";class tN extends $I{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,o,u,d){const y=R1();return new Promise(((v,b)=>{const _=new T_;_.setWithCredentials(!0),_.listenOnce(v_.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case Hh.NO_ERROR:const I=_.getResponseJson();He(Ji,`XHR for RPC '${e}' ${y} received:`,JSON.stringify(I)),v(I);break;case Hh.TIMEOUT:He(Ji,`RPC '${e}' ${y} timed out`),b(new ze(Ce.DEADLINE_EXCEEDED,"Request time out"));break;case Hh.HTTP_ERROR:const L=_.getStatus();if(He(Ji,`RPC '${e}' ${y} failed with status:`,L,"response text:",_.getResponseText()),L>0){let B=_.getResponseJson();Array.isArray(B)&&(B=B[0]);const q=B==null?void 0:B.error;if(q&&q.status&&q.message){const K=(function(ae){const me=ae.toLowerCase().replace(/_/g,"-");return Object.values(Ce).indexOf(me)>=0?me:Ce.UNKNOWN})(q.status);b(new ze(K,q.message))}else b(new ze(Ce.UNKNOWN,"Server responded with status "+_.getStatus()))}else b(new ze(Ce.UNAVAILABLE,"Connection failed."));break;default:lt(9055,{l_:e,streamId:y,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{He(Ji,`RPC '${e}' ${y} completed.`)}}));const C=JSON.stringify(u);He(Ji,`RPC '${e}' ${y} sending request:`,u),_.send(n,"POST",C,o,15)}))}T_(e,n,o){const u=R1(),d=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],y=I_(),v=S_(),b={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(b.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(b.useFetchStreams=!0),this.jo(b.initMessageHeaders,n,o),b.encodeInitMessageHeaders=!0;const C=d.join("");He(Ji,`Creating RPC '${e}' stream ${u}: ${C}`,b);const I=y.createWebChannel(C,b);this.I_(I);let L=!1,B=!1;const q=new eN({Yo:Y=>{B?He(Ji,`Not sending because RPC '${e}' stream ${u} is closed:`,Y):(L||(He(Ji,`Opening RPC '${e}' stream ${u} transport.`),I.open(),L=!0),He(Ji,`RPC '${e}' stream ${u} sending:`,Y),I.send(Y))},Zo:()=>I.close()}),K=(Y,ae,me)=>{Y.listen(ae,($=>{try{me($)}catch(_e){setTimeout((()=>{throw _e}),0)}}))};return K(I,Hc.EventType.OPEN,(()=>{B||(He(Ji,`RPC '${e}' stream ${u} transport opened.`),q.o_())})),K(I,Hc.EventType.CLOSE,(()=>{B||(B=!0,He(Ji,`RPC '${e}' stream ${u} transport closed`),q.a_(),this.E_(I))})),K(I,Hc.EventType.ERROR,(Y=>{B||(B=!0,ql(Ji,`RPC '${e}' stream ${u} transport errored. Name:`,Y.name,"Message:",Y.message),q.a_(new ze(Ce.UNAVAILABLE,"The operation could not be completed")))})),K(I,Hc.EventType.MESSAGE,(Y=>{var ae;if(!B){const me=Y.data[0];un(!!me,16349);const $=me,_e=($==null?void 0:$.error)||((ae=$[0])==null?void 0:ae.error);if(_e){He(Ji,`RPC '${e}' stream ${u} received error:`,_e);const je=_e.status;let De=(function(V){const ne=xi[V];if(ne!==void 0)return lA(ne)})(je),j=_e.message;De===void 0&&(De=Ce.INTERNAL,j="Unknown error status: "+je+" with message "+_e.message),B=!0,q.a_(new ze(De,j)),I.close()}else He(Ji,`RPC '${e}' stream ${u} received:`,me),q.u_(me)}})),K(v,C_.STAT_EVENT,(Y=>{Y.stat===x1.PROXY?He(Ji,`RPC '${e}' stream ${u} detected buffering proxy`):Y.stat===x1.NOPROXY&&He(Ji,`RPC '${e}' stream ${u} detected no buffering proxy`)})),setTimeout((()=>{q.__()}),0),q}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function n1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vf(i){return new sI(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,n,o=1e3,u=1.5,d=6e4){this.Mi=e,this.timerId=n,this.d_=o,this.A_=u,this.R_=d,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),o=Math.max(0,Date.now()-this.f_),u=Math.max(0,n-o);u>0&&He("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${o} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,u,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny="PersistentStream";class bA{constructor(e,n,o,u,d,y,v,b){this.Mi=e,this.S_=o,this.b_=u,this.connection=d,this.authCredentialsProvider=y,this.appCheckCredentialsProvider=v,this.listener=b,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new wA(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Ce.RESOURCE_EXHAUSTED?(wa(n.toString()),wa("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([o,u])=>{this.D_===n&&this.G_(o,u)}),(o=>{e((()=>{const u=new ze(Ce.UNKNOWN,"Fetching auth token failed: "+o.message);return this.z_(u)}))}))}G_(e,n){const o=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{o((()=>this.listener.Xo()))})),this.stream.t_((()=>{o((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((u=>{o((()=>this.z_(u)))})),this.stream.onMessage((u=>{o((()=>++this.F_==1?this.J_(u):this.onNext(u)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return He(ny,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(He(ny,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class nN extends bA{constructor(e,n,o,u,d,y){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,u,y),this.serializer=d}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=lI(this.serializer,e),o=(function(d){if(!("targetChange"in d))return dt.min();const y=d.targetChange;return y.targetIds&&y.targetIds.length?dt.min():y.readTime?js(y.readTime):dt.min()})(e);return this.listener.H_(n,o)}Y_(e){const n={};n.database=I1(this.serializer),n.addTarget=(function(d,y){let v;const b=y.target;if(v=w1(b)?{documents:hI(d,b)}:{query:fI(d,b).ft},v.targetId=y.targetId,y.resumeToken.approximateByteSize()>0){v.resumeToken=hA(d,y.resumeToken);const _=v1(d,y.expectedCount);_!==null&&(v.expectedCount=_)}else if(y.snapshotVersion.compareTo(dt.min())>0){v.readTime=df(d,y.snapshotVersion.toTimestamp());const _=v1(d,y.expectedCount);_!==null&&(v.expectedCount=_)}return v})(this.serializer,e);const o=gI(this.serializer,e);o&&(n.labels=o),this.q_(n)}Z_(e){const n={};n.database=I1(this.serializer),n.removeTarget=e,this.q_(n)}}class iN extends bA{constructor(e,n,o,u,d,y){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,o,u,y),this.serializer=d}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return un(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,un(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){un(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=uI(e.writeResults,e.commitTime),o=js(e.commitTime);return this.listener.na(o,n)}ra(){const e={};e.database=I1(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((o=>cI(this.serializer,o)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{}class sN extends rN{constructor(e,n,o,u){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=o,this.serializer=u,this.ia=!1}sa(){if(this.ia)throw new ze(Ce.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,y])=>this.connection.Go(e,C1(n,o),u,d,y))).catch((d=>{throw d.name==="FirebaseError"?(d.code===Ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ze(Ce.UNKNOWN,d.toString())}))}Ho(e,n,o,u,d){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([y,v])=>this.connection.Ho(e,C1(n,o),u,y,v,d))).catch((y=>{throw y.name==="FirebaseError"?(y.code===Ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),y):new ze(Ce.UNKNOWN,y.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class aN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(wa(n),this.aa=!1):He("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo="RemoteStore";class oN{constructor(e,n,o,u,d){this.localStore=e,this.datastore=n,this.asyncQueue=o,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=d,this.Aa.Oo((y=>{o.enqueueAndForget((async()=>{tl(this)&&(He(Zo,"Restarting streams for network reachability change."),await(async function(b){const _=xt(b);_.Ea.add(4),await yu(_),_.Ra.set("Unknown"),_.Ea.delete(4),await jf(_)})(this))}))})),this.Ra=new aN(o,u)}}async function jf(i){if(tl(i))for(const e of i.da)await e(!0)}async function yu(i){for(const e of i.da)await e(!1)}function TA(i,e){const n=xt(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),yg(n)?xg(n):nc(n).O_()&&pg(n,e))}function mg(i,e){const n=xt(i),o=nc(n);n.Ia.delete(e),o.O_()&&vA(n,e),n.Ia.size===0&&(o.O_()?o.L_():tl(n)&&n.Ra.set("Unknown"))}function pg(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(dt.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}nc(i).Y_(e)}function vA(i,e){i.Va.Ue(e),nc(i).Z_(e)}function xg(i){i.Va=new tI({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),nc(i).start(),i.Ra.ua()}function yg(i){return tl(i)&&!nc(i).x_()&&i.Ia.size>0}function tl(i){return xt(i).Ea.size===0}function CA(i){i.Va=void 0}async function lN(i){i.Ra.set("Online")}async function cN(i){i.Ia.forEach(((e,n)=>{pg(i,e)}))}async function uN(i,e){CA(i),yg(i)?(i.Ra.ha(e),xg(i)):i.Ra.set("Unknown")}async function hN(i,e,n){if(i.Ra.set("Online"),e instanceof uA&&e.state===2&&e.cause)try{await(async function(u,d){const y=d.cause;for(const v of d.targetIds)u.Ia.has(v)&&(await u.remoteSyncer.rejectListen(v,y),u.Ia.delete(v),u.Va.removeTarget(v))})(i,e)}catch(o){He(Zo,"Failed to remove targets %s: %s ",e.targetIds.join(","),o),await mf(i,o)}else if(e instanceof Xh?i.Va.Ze(e):e instanceof cA?i.Va.st(e):i.Va.tt(e),!n.isEqual(dt.min()))try{const o=await AA(i.localStore);n.compareTo(o)>=0&&await(function(d,y){const v=d.Va.Tt(y);return v.targetChanges.forEach(((b,_)=>{if(b.resumeToken.approximateByteSize()>0){const C=d.Ia.get(_);C&&d.Ia.set(_,C.withResumeToken(b.resumeToken,y))}})),v.targetMismatches.forEach(((b,_)=>{const C=d.Ia.get(b);if(!C)return;d.Ia.set(b,C.withResumeToken(ji.EMPTY_BYTE_STRING,C.snapshotVersion)),vA(d,b);const I=new ro(C.target,b,_,C.sequenceNumber);pg(d,I)})),d.remoteSyncer.applyRemoteEvent(v)})(i,n)}catch(o){He(Zo,"Failed to raise snapshot:",o),await mf(i,o)}}async function mf(i,e,n){if(!tc(e))throw e;i.Ea.add(1),await yu(i),i.Ra.set("Offline"),n||(n=()=>AA(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{He(Zo,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await jf(i)}))}function SA(i,e){return e().catch((n=>mf(i,n,e)))}async function Ff(i){const e=xt(i),n=go(e);let o=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ng;for(;fN(e);)try{const u=await XI(e.localStore,o);if(u===null){e.Ta.length===0&&n.L_();break}o=u.batchId,dN(e,u)}catch(u){await mf(e,u)}IA(e)&&NA(e)}function fN(i){return tl(i)&&i.Ta.length<10}function dN(i,e){i.Ta.push(e);const n=go(i);n.O_()&&n.X_&&n.ea(e.mutations)}function IA(i){return tl(i)&&!go(i).x_()&&i.Ta.length>0}function NA(i){go(i).start()}async function gN(i){go(i).ra()}async function mN(i){const e=go(i);for(const n of i.Ta)e.ea(n.mutations)}async function pN(i,e,n){const o=i.Ta.shift(),u=lg.from(o,e,n);await SA(i,(()=>i.remoteSyncer.applySuccessfulWrite(u))),await Ff(i)}async function xN(i,e){e&&go(i).X_&&await(async function(o,u){if((function(y){return J4(y)&&y!==Ce.ABORTED})(u.code)){const d=o.Ta.shift();go(o).B_(),await SA(o,(()=>o.remoteSyncer.rejectFailedWrite(d.batchId,u))),await Ff(o)}})(i,e),IA(i)&&NA(i)}async function iy(i,e){const n=xt(i);n.asyncQueue.verifyOperationInProgress(),He(Zo,"RemoteStore received new credentials");const o=tl(n);n.Ea.add(3),await yu(n),o&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await jf(n)}async function yN(i,e){const n=xt(i);e?(n.Ea.delete(2),await jf(n)):e||(n.Ea.add(2),await yu(n),n.Ra.set("Unknown"))}function nc(i){return i.ma||(i.ma=(function(n,o,u){const d=xt(n);return d.sa(),new nN(o,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,u)})(i.datastore,i.asyncQueue,{Xo:lN.bind(null,i),t_:cN.bind(null,i),r_:uN.bind(null,i),H_:hN.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),yg(i)?xg(i):i.Ra.set("Unknown")):(await i.ma.stop(),CA(i))}))),i.ma}function go(i){return i.fa||(i.fa=(function(n,o,u){const d=xt(n);return d.sa(),new iN(o,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,u)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:gN.bind(null,i),r_:xN.bind(null,i),ta:mN.bind(null,i),na:pN.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await Ff(i)):(await i.fa.stop(),i.Ta.length>0&&(He(Zo,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e,n,o,u,d){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=o,this.op=u,this.removalCallback=d,this.deferred=new Ea,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((y=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,o,u,d){const y=Date.now()+o,v=new Eg(e,n,y,u,d);return v.start(o),v}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ze(Ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _g(i,e){if(wa("AsyncQueue",`${e}: ${i}`),tc(i))return new ze(Ce.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{static emptySet(e){return new Hl(e.comparator)}constructor(e){this.comparator=e?(n,o)=>e(n,o)||et.comparator(n.key,o.key):(n,o)=>et.comparator(n.key,o.key),this.keyedMap=Gc(),this.sortedSet=new Wn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,o)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Hl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;n.hasNext();){const u=n.getNext().key,d=o.getNext().key;if(!u.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const o=new Hl;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=n,o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(){this.ga=new Wn(et.comparator)}track(e){const n=e.doc.key,o=this.ga.get(n);o?e.type!==0&&o.type===3?this.ga=this.ga.insert(n,e):e.type===3&&o.type!==1?this.ga=this.ga.insert(n,{type:o.type,doc:e.doc}):e.type===2&&o.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&o.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&o.type===0?this.ga=this.ga.remove(n):e.type===1&&o.type===2?this.ga=this.ga.insert(n,{type:1,doc:o.doc}):e.type===0&&o.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):lt(63341,{Rt:e,pa:o}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,o)=>{e.push(o)})),e}}class Ql{constructor(e,n,o,u,d,y,v,b,_){this.query=e,this.docs=n,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=d,this.fromCache=y,this.syncStateChanged=v,this.excludesMetadataChanges=b,this.hasCachedResults=_}static fromInitialDocuments(e,n,o,u,d){const y=[];return n.forEach((v=>{y.push({type:0,doc:v})})),new Ql(e,n,Hl.emptySet(n),y,o,u,!0,!1,d)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,o=e.docChanges;if(n.length!==o.length)return!1;for(let u=0;u<n.length;u++)if(n[u].type!==o[u].type||!n[u].doc.isEqual(o[u].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class _N{constructor(){this.queries=sy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,o){const u=xt(n),d=u.queries;u.queries=sy(),d.forEach(((y,v)=>{for(const b of v.Sa)b.onError(o)}))})(this,new ze(Ce.ABORTED,"Firestore shutting down"))}}function sy(){return new el((i=>Q_(i)),Mf)}async function Ag(i,e){const n=xt(i);let o=3;const u=e.query;let d=n.queries.get(u);d?!d.ba()&&e.Da()&&(o=2):(d=new EN,o=e.Da()?0:1);try{switch(o){case 0:d.wa=await n.onListen(u,!0);break;case 1:d.wa=await n.onListen(u,!1);break;case 2:await n.onFirstRemoteStoreListen(u)}}catch(y){const v=_g(y,`Initialization of query '${Pl(e.query)}' failed`);return void e.onError(v)}n.queries.set(u,d),d.Sa.push(e),e.va(n.onlineState),d.wa&&e.Fa(d.wa)&&bg(n)}async function wg(i,e){const n=xt(i),o=e.query;let u=3;const d=n.queries.get(o);if(d){const y=d.Sa.indexOf(e);y>=0&&(d.Sa.splice(y,1),d.Sa.length===0?u=e.Da()?0:1:!d.ba()&&e.Da()&&(u=2))}switch(u){case 0:return n.queries.delete(o),n.onUnlisten(o,!0);case 1:return n.queries.delete(o),n.onUnlisten(o,!1);case 2:return n.onLastRemoteStoreUnlisten(o);default:return}}function AN(i,e){const n=xt(i);let o=!1;for(const u of e){const d=u.query,y=n.queries.get(d);if(y){for(const v of y.Sa)v.Fa(u)&&(o=!0);y.wa=u}}o&&bg(n)}function wN(i,e,n){const o=xt(i),u=o.queries.get(e);if(u)for(const d of u.Sa)d.onError(n);o.queries.delete(e)}function bg(i){i.Ca.forEach((e=>{e.next()}))}var O1,ay;(ay=O1||(O1={})).Ma="default",ay.Cache="cache";class Tg{constructor(e,n,o){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=o||{}}Fa(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)u.type!==3&&o.push(u);e=new Ql(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const o=n!=="Offline";return(!this.options.qa||!o)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ql.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==O1.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e){this.key=e}}class OA{constructor(e){this.key=e}}class bN{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ht(),this.mutatedKeys=Ht(),this.eu=Z_(e),this.tu=new Hl(this.eu)}get nu(){return this.Ya}ru(e,n){const o=n?n.iu:new ry,u=n?n.tu:this.tu;let d=n?n.mutatedKeys:this.mutatedKeys,y=u,v=!1;const b=this.query.limitType==="F"&&u.size===this.query.limit?u.last():null,_=this.query.limitType==="L"&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal(((C,I)=>{const L=u.get(C),B=Lf(this.query,I)?I:null,q=!!L&&this.mutatedKeys.has(L.key),K=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let Y=!1;L&&B?L.data.isEqual(B.data)?q!==K&&(o.track({type:3,doc:B}),Y=!0):this.su(L,B)||(o.track({type:2,doc:B}),Y=!0,(b&&this.eu(B,b)>0||_&&this.eu(B,_)<0)&&(v=!0)):!L&&B?(o.track({type:0,doc:B}),Y=!0):L&&!B&&(o.track({type:1,doc:L}),Y=!0,(b||_)&&(v=!0)),Y&&(B?(y=y.add(B),d=K?d.add(C):d.delete(C)):(y=y.delete(C),d=d.delete(C)))})),this.query.limit!==null)for(;y.size>this.query.limit;){const C=this.query.limitType==="F"?y.last():y.first();y=y.delete(C.key),d=d.delete(C.key),o.track({type:1,doc:C})}return{tu:y,iu:o,Cs:v,mutatedKeys:d}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,o,u){const d=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const y=e.iu.ya();y.sort(((C,I)=>(function(B,q){const K=Y=>{switch(Y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt(20277,{Rt:Y})}};return K(B)-K(q)})(C.type,I.type)||this.eu(C.doc,I.doc))),this.ou(o),u=u??!1;const v=n&&!u?this._u():[],b=this.Xa.size===0&&this.current&&!u?1:0,_=b!==this.Za;return this.Za=b,y.length!==0||_?{snapshot:new Ql(this.query,e.tu,d,y,e.mutatedKeys,b===0,_,!1,!!o&&o.resumeToken.approximateByteSize()>0),au:v}:{au:v}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ry,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ht(),this.tu.forEach((o=>{this.uu(o.key)&&(this.Xa=this.Xa.add(o.key))}));const n=[];return e.forEach((o=>{this.Xa.has(o)||n.push(new OA(o))})),this.Xa.forEach((o=>{e.has(o)||n.push(new RA(o))})),n}cu(e){this.Ya=e.Qs,this.Xa=Ht();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ql.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const vg="SyncEngine";class TN{constructor(e,n,o){this.query=e,this.targetId=n,this.view=o}}class vN{constructor(e){this.key=e,this.hu=!1}}class CN{constructor(e,n,o,u,d,y){this.localStore=e,this.remoteStore=n,this.eventManager=o,this.sharedClientState=u,this.currentUser=d,this.maxConcurrentLimboResolutions=y,this.Pu={},this.Tu=new el((v=>Q_(v)),Mf),this.Iu=new Map,this.Eu=new Set,this.du=new Wn(et.comparator),this.Au=new Map,this.Ru=new hg,this.Vu={},this.mu=new Map,this.fu=Wl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function SN(i,e,n=!0){const o=kA(i);let u;const d=o.Tu.get(e);return d?(o.sharedClientState.addLocalQueryTarget(d.targetId),u=d.view.lu()):u=await DA(o,e,n,!0),u}async function IN(i,e){const n=kA(i);await DA(n,e,!0,!1)}async function DA(i,e,n,o){const u=await KI(i.localStore,Vs(e)),d=u.targetId,y=i.sharedClientState.addLocalQueryTarget(d,n);let v;return o&&(v=await NN(i,e,d,y==="current",u.resumeToken)),i.isPrimaryClient&&n&&TA(i.remoteStore,u),v}async function NN(i,e,n,o,u){i.pu=(I,L,B)=>(async function(K,Y,ae,me){let $=Y.view.ru(ae);$.Cs&&($=await Jx(K.localStore,Y.query,!1).then((({documents:j})=>Y.view.ru(j,$))));const _e=me&&me.targetChanges.get(Y.targetId),je=me&&me.targetMismatches.get(Y.targetId)!=null,De=Y.view.applyChanges($,K.isPrimaryClient,_e,je);return ly(K,Y.targetId,De.au),De.snapshot})(i,I,L,B);const d=await Jx(i.localStore,e,!0),y=new bN(e,d.Qs),v=y.ru(d.documents),b=xu.createSynthesizedTargetChangeForCurrentChange(n,o&&i.onlineState!=="Offline",u),_=y.applyChanges(v,i.isPrimaryClient,b);ly(i,n,_.au);const C=new TN(e,n,y);return i.Tu.set(e,C),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),_.snapshot}async function RN(i,e,n){const o=xt(i),u=o.Tu.get(e),d=o.Iu.get(u.targetId);if(d.length>1)return o.Iu.set(u.targetId,d.filter((y=>!Mf(y,e)))),void o.Tu.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(u.targetId),o.sharedClientState.isActiveQueryTarget(u.targetId)||await N1(o.localStore,u.targetId,!1).then((()=>{o.sharedClientState.clearQueryState(u.targetId),n&&mg(o.remoteStore,u.targetId),D1(o,u.targetId)})).catch(ec)):(D1(o,u.targetId),await N1(o.localStore,u.targetId,!0))}async function ON(i,e){const n=xt(i),o=n.Tu.get(e),u=n.Iu.get(o.targetId);n.isPrimaryClient&&u.length===1&&(n.sharedClientState.removeLocalQueryTarget(o.targetId),mg(n.remoteStore,o.targetId))}async function DN(i,e,n){const o=VN(i);try{const u=await(function(y,v){const b=xt(y),_=Mn.now(),C=v.reduce(((B,q)=>B.add(q.key)),Ht());let I,L;return b.persistence.runTransaction("Locally write mutations","readwrite",(B=>{let q=ba(),K=Ht();return b.Ns.getEntries(B,C).next((Y=>{q=Y,q.forEach(((ae,me)=>{me.isValidDocument()||(K=K.add(ae))}))})).next((()=>b.localDocuments.getOverlayedDocuments(B,q))).next((Y=>{I=Y;const ae=[];for(const me of v){const $=X4(me,I.get(me.key).overlayedDocument);$!=null&&ae.push(new Eo(me.key,$,z_($.value.mapValue),Or.exists(!0)))}return b.mutationQueue.addMutationBatch(B,_,ae,v)})).next((Y=>{L=Y;const ae=Y.applyToLocalDocumentSet(I,K);return b.documentOverlayCache.saveOverlays(B,Y.batchId,ae)}))})).then((()=>({batchId:L.batchId,changes:$_(I)})))})(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),(function(y,v,b){let _=y.Vu[y.currentUser.toKey()];_||(_=new Wn(zt)),_=_.insert(v,b),y.Vu[y.currentUser.toKey()]=_})(o,u.batchId,n),await Eu(o,u.changes),await Ff(o.remoteStore)}catch(u){const d=_g(u,"Failed to persist write");n.reject(d)}}async function MA(i,e){const n=xt(i);try{const o=await qI(n.localStore,e);e.targetChanges.forEach(((u,d)=>{const y=n.Au.get(d);y&&(un(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1,22616),u.addedDocuments.size>0?y.hu=!0:u.modifiedDocuments.size>0?un(y.hu,14607):u.removedDocuments.size>0&&(un(y.hu,42227),y.hu=!1))})),await Eu(n,o,e)}catch(o){await ec(o)}}function oy(i,e,n){const o=xt(i);if(o.isPrimaryClient&&n===0||!o.isPrimaryClient&&n===1){const u=[];o.Tu.forEach(((d,y)=>{const v=y.view.va(e);v.snapshot&&u.push(v.snapshot)})),(function(y,v){const b=xt(y);b.onlineState=v;let _=!1;b.queries.forEach(((C,I)=>{for(const L of I.Sa)L.va(v)&&(_=!0)})),_&&bg(b)})(o.eventManager,e),u.length&&o.Pu.H_(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}async function MN(i,e,n){const o=xt(i);o.sharedClientState.updateQueryState(e,"rejected",n);const u=o.Au.get(e),d=u&&u.key;if(d){let y=new Wn(et.comparator);y=y.insert(d,er.newNoDocument(d,dt.min()));const v=Ht().add(d),b=new Uf(dt.min(),new Map,new Wn(zt),y,v);await MA(o,b),o.du=o.du.remove(d),o.Au.delete(e),Cg(o)}else await N1(o.localStore,e,!1).then((()=>D1(o,e,n))).catch(ec)}async function LN(i,e){const n=xt(i),o=e.batch.batchId;try{const u=await GI(n.localStore,e);PA(n,o,null),LA(n,o),n.sharedClientState.updateMutationState(o,"acknowledged"),await Eu(n,u)}catch(u){await ec(u)}}async function PN(i,e,n){const o=xt(i);try{const u=await(function(y,v){const b=xt(y);return b.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let C;return b.mutationQueue.lookupMutationBatch(_,v).next((I=>(un(I!==null,37113),C=I.keys(),b.mutationQueue.removeMutationBatch(_,I)))).next((()=>b.mutationQueue.performConsistencyCheck(_))).next((()=>b.documentOverlayCache.removeOverlaysForBatchId(_,C,v))).next((()=>b.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,C))).next((()=>b.localDocuments.getDocuments(_,C)))}))})(o.localStore,e);PA(o,e,n),LA(o,e),o.sharedClientState.updateMutationState(e,"rejected",n),await Eu(o,u)}catch(u){await ec(u)}}function LA(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function PA(i,e,n){const o=xt(i);let u=o.Vu[o.currentUser.toKey()];if(u){const d=u.get(e);d&&(n?d.reject(n):d.resolve(),u=u.remove(e)),o.Vu[o.currentUser.toKey()]=u}}function D1(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.Iu.get(e))i.Tu.delete(o),n&&i.Pu.yu(o,n);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((o=>{i.Ru.containsKey(o)||BA(i,o)}))}function BA(i,e){i.Eu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(mg(i.remoteStore,n),i.du=i.du.remove(e),i.Au.delete(n),Cg(i))}function ly(i,e,n){for(const o of n)o instanceof RA?(i.Ru.addReference(o.key,e),BN(i,o)):o instanceof OA?(He(vg,"Document no longer in limbo: "+o.key),i.Ru.removeReference(o.key,e),i.Ru.containsKey(o.key)||BA(i,o.key)):lt(19791,{wu:o})}function BN(i,e){const n=e.key,o=n.path.canonicalString();i.du.get(n)||i.Eu.has(o)||(He(vg,"New document in limbo: "+n),i.Eu.add(o),Cg(i))}function Cg(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new et(Cn.fromString(e)),o=i.fu.next();i.Au.set(o,new vN(n)),i.du=i.du.insert(n,o),TA(i.remoteStore,new ro(Vs(Df(n.path)),o,"TargetPurposeLimboResolution",Nf.ce))}}async function Eu(i,e,n){const o=xt(i),u=[],d=[],y=[];o.Tu.isEmpty()||(o.Tu.forEach(((v,b)=>{y.push(o.pu(b,e,n).then((_=>{var C;if((_||n)&&o.isPrimaryClient){const I=_?!_.fromCache:(C=n==null?void 0:n.targetChanges.get(b.targetId))==null?void 0:C.current;o.sharedClientState.updateQueryState(b.targetId,I?"current":"not-current")}if(_){u.push(_);const I=dg.As(b.targetId,_);d.push(I)}})))})),await Promise.all(y),o.Pu.H_(u),await(async function(b,_){const C=xt(b);try{await C.persistence.runTransaction("notifyLocalViewChanges","readwrite",(I=>Ne.forEach(_,(L=>Ne.forEach(L.Es,(B=>C.persistence.referenceDelegate.addReference(I,L.targetId,B))).next((()=>Ne.forEach(L.ds,(B=>C.persistence.referenceDelegate.removeReference(I,L.targetId,B)))))))))}catch(I){if(!tc(I))throw I;He(gg,"Failed to update sequence numbers: "+I)}for(const I of _){const L=I.targetId;if(!I.fromCache){const B=C.Ms.get(L),q=B.snapshotVersion,K=B.withLastLimboFreeSnapshotVersion(q);C.Ms=C.Ms.insert(L,K)}}})(o.localStore,d))}async function kN(i,e){const n=xt(i);if(!n.currentUser.isEqual(e)){He(vg,"User change. New user:",e.toKey());const o=await _A(n.localStore,e);n.currentUser=e,(function(d,y){d.mu.forEach((v=>{v.forEach((b=>{b.reject(new ze(Ce.CANCELLED,y))}))})),d.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),await Eu(n,o.Ls)}}function UN(i,e){const n=xt(i),o=n.Au.get(e);if(o&&o.hu)return Ht().add(o.key);{let u=Ht();const d=n.Iu.get(e);if(!d)return u;for(const y of d){const v=n.Tu.get(y);u=u.unionWith(v.view.nu)}return u}}function kA(i){const e=xt(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=MA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=UN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=MN.bind(null,e),e.Pu.H_=AN.bind(null,e.eventManager),e.Pu.yu=wN.bind(null,e.eventManager),e}function VN(i){const e=xt(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=LN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=PN.bind(null,e),e}class pf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Vf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return HI(this.persistence,new jI,e.initialUser,this.serializer)}Cu(e){return new EA(fg.mi,this.serializer)}Du(e){return new QI}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}pf.provider={build:()=>new pf};class jN extends pf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){un(this.persistence.referenceDelegate instanceof gf,46915);const o=this.persistence.referenceDelegate.garbageCollector;return new vI(o,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ir.withCacheSize(this.cacheSizeBytes):Ir.DEFAULT;return new EA((o=>gf.mi(o,n)),this.serializer)}}class M1{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>oy(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=kN.bind(null,this.syncEngine),await yN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new _N})()}createDatastore(e){const n=Vf(e.databaseInfo.databaseId),o=(function(d){return new tN(d)})(e.databaseInfo);return(function(d,y,v,b){return new sN(d,y,v,b)})(e.authCredentials,e.appCheckCredentials,o,n)}createRemoteStore(e){return(function(o,u,d,y,v){return new oN(o,u,d,y,v)})(this.localStore,this.datastore,e.asyncQueue,(n=>oy(this.syncEngine,n,0)),(function(){return ty.v()?new ty:new ZI})())}createSyncEngine(e,n){return(function(u,d,y,v,b,_,C){const I=new CN(u,d,y,v,b,_);return C&&(I.gu=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(u){const d=xt(u);He(Zo,"RemoteStore shutting down."),d.Ea.add(5),await yu(d),d.Aa.shutdown(),d.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}M1.provider={build:()=>new M1};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):wa("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo="FirestoreClient";class FN{constructor(e,n,o,u,d){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=o,this.databaseInfo=u,this.user=$i.UNAUTHENTICATED,this.clientId=tg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=d,this.authCredentials.start(o,(async y=>{He(mo,"Received user=",y.uid),await this.authCredentialListener(y),this.user=y})),this.appCheckCredentials.start(o,(y=>(He(mo,"Received new app check token=",y),this.appCheckCredentialListener(y,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ea;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const o=_g(n,"Failed to shutdown persistence");e.reject(o)}})),e.promise}}async function i1(i,e){i.asyncQueue.verifyOperationInProgress(),He(mo,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let o=n.initialUser;i.setCredentialChangeListener((async u=>{o.isEqual(u)||(await _A(e.localStore,u),o=u)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function cy(i,e){i.asyncQueue.verifyOperationInProgress();const n=await zN(i);He(mo,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((o=>iy(e.remoteStore,o))),i.setAppCheckTokenChangeListener(((o,u)=>iy(e.remoteStore,u))),i._onlineComponents=e}async function zN(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){He(mo,"Using user provided OfflineComponentProvider");try{await i1(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(u){return u.name==="FirebaseError"?u.code===Ce.FAILED_PRECONDITION||u.code===Ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||u.code===22||u.code===20||u.code===11})(n))throw n;ql("Error using user provided cache. Falling back to memory cache: "+n),await i1(i,new pf)}}else He(mo,"Using default OfflineComponentProvider"),await i1(i,new jN(void 0));return i._offlineComponents}async function UA(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(He(mo,"Using user provided OnlineComponentProvider"),await cy(i,i._uninitializedComponentsProvider._online)):(He(mo,"Using default OnlineComponentProvider"),await cy(i,new M1))),i._onlineComponents}function HN(i){return UA(i).then((e=>e.syncEngine))}async function xf(i){const e=await UA(i),n=e.eventManager;return n.onListen=SN.bind(null,e.syncEngine),n.onUnlisten=RN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=IN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=ON.bind(null,e.syncEngine),n}function GN(i,e,n={}){const o=new Ea;return i.asyncQueue.enqueueAndForget((async()=>(function(d,y,v,b,_){const C=new Sg({next:L=>{C.Nu(),y.enqueueAndForget((()=>wg(d,I)));const B=L.docs.has(v);!B&&L.fromCache?_.reject(new ze(Ce.UNAVAILABLE,"Failed to get document because the client is offline.")):B&&L.fromCache&&b&&b.source==="server"?_.reject(new ze(Ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(L)},error:L=>_.reject(L)}),I=new Tg(Df(v.path),C,{includeMetadataChanges:!0,qa:!0});return Ag(d,I)})(await xf(i),i.asyncQueue,e,n,o))),o.promise}function qN(i,e,n={}){const o=new Ea;return i.asyncQueue.enqueueAndForget((async()=>(function(d,y,v,b,_){const C=new Sg({next:L=>{C.Nu(),y.enqueueAndForget((()=>wg(d,I))),L.fromCache&&b.source==="server"?_.reject(new ze(Ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(L)},error:L=>_.reject(L)}),I=new Tg(v,C,{includeMetadataChanges:!0,qa:!0});return Ag(d,I)})(await xf(i),i.asyncQueue,e,n,o))),o.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uy=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA="firestore.googleapis.com",hy=!0;class fy{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ze(Ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=jA,this.ssl=hy}else this.host=e.host,this.ssl=e.ssl??hy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=yA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<bI)throw new ze(Ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}o4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=VA(e.experimentalLongPollingOptions??{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ze(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ze(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ze(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(o,u){return o.timeoutSeconds===u.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zf{constructor(e,n,o,u){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ze(Ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ze(Ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(o){if(!o)return new ZS;switch(o.type){case"firstParty":return new t4(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new ze(Ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const o=uy.get(n);o&&(He("ComponentProvider","Removing Datastore"),uy.delete(n),o.terminate())})(this),Promise.resolve()}}function YN(i,e,n,o={}){var _;i=Rr(i,zf);const u=J1(e),d=i._getSettings(),y={...d,emulatorOptions:i._getEmulatorOptions()},v=`${e}:${n}`;u&&(CC(`https://${v}`),RC("Firestore",!0)),d.host!==jA&&d.host!==v&&ql("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const b={...d,host:v,ssl:u,emulatorOptions:o};if(!nf(b,y)&&(i._setSettings(b),o.mockUserToken)){let C,I;if(typeof o.mockUserToken=="string")C=o.mockUserToken,I=$i.MOCK_USER;else{C=SC(o.mockUserToken,(_=i._app)==null?void 0:_.options.projectId);const L=o.mockUserToken.sub||o.mockUserToken.user_id;if(!L)throw new ze(Ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");I=new $i(L)}i._authCredentials=new JS(new R_(C,I))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,n,o){this.converter=n,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new nl(this.firestore,e,this._query)}}class ii{constructor(e,n,o){this.converter=n,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new lo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ii(this.firestore,e,this._key)}toJSON(){return{type:ii._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,o){if(gu(n,ii._jsonSchema))return new ii(e,o||null,new et(Cn.fromString(n.referencePath)))}}ii._jsonSchemaVersion="firestore/documentReference/1.0",ii._jsonSchema={type:Ei("string",ii._jsonSchemaVersion),referencePath:Ei("string")};class lo extends nl{constructor(e,n,o){super(e,n,Df(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ii(this.firestore,null,new et(e))}withConverter(e){return new lo(this.firestore,e,this._path)}}function ps(i,e,...n){if(i=ds(i),O_("collection","path",e),i instanceof zf){const o=Cn.fromString(e,...n);return vx(o),new lo(i,null,o)}{if(!(i instanceof ii||i instanceof lo))throw new ze(Ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Cn.fromString(e,...n));return vx(o),new lo(i.firestore,null,o)}}function Ln(i,e,...n){if(i=ds(i),arguments.length===1&&(e=tg.newId()),O_("doc","path",e),i instanceof zf){const o=Cn.fromString(e,...n);return Tx(o),new ii(i,null,new et(o))}{if(!(i instanceof ii||i instanceof lo))throw new ze(Ce.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Cn.fromString(e,...n));return Tx(o),new ii(i.firestore,i instanceof lo?i.converter:null,new et(o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy="AsyncQueue";class gy{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new wA(this,"async_queue_retry"),this._c=()=>{const o=n1();o&&He(dy,"Visibility state changed to "+o.visibilityState),this.M_.w_()},this.ac=e;const n=n1();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=n1();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Ea;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!tc(e))throw e;He(dy,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((o=>{throw this.nc=o,this.rc=!1,wa("INTERNAL UNHANDLED ERROR: ",my(o)),o})).then((o=>(this.rc=!1,o))))));return this.ac=n,n}enqueueAfterDelay(e,n,o){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const u=Eg.createAndSchedule(this,e,n,o,(d=>this.hc(d)));return this.tc.push(u),u}uc(){this.nc&&lt(47125,{Pc:my(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,o)=>n.targetTimeMs-o.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function my(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function py(i){return(function(n,o){if(typeof n!="object"||n===null)return!1;const u=n;for(const d of o)if(d in u&&typeof u[d]=="function")return!0;return!1})(i,["next","error","complete"])}class Ta extends zf{constructor(e,n,o,u){super(e,n,o,u),this.type="firestore",this._queue=new gy,this._persistenceKey=(u==null?void 0:u.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new gy(e),this._firestoreClient=void 0,await e}}}function XN(i,e){const n=typeof i=="object"?i:jS(),o=typeof i=="string"?i:of,u=PS(n,"firestore").getImmediate({identifier:o});if(!u._initialized){const d=TC("firestore");d&&YN(u,...d)}return u}function _u(i){if(i._terminated)throw new ze(Ce.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||KN(i),i._firestoreClient}function KN(i){var o,u,d;const e=i._freezeSettings(),n=(function(v,b,_,C){return new y4(v,b,_,C.host,C.ssl,C.experimentalForceLongPolling,C.experimentalAutoDetectLongPolling,VA(C.experimentalLongPollingOptions),C.useFetchStreams,C.isUsingEmulator)})(i._databaseId,((o=i._app)==null?void 0:o.options.appId)||"",i._persistenceKey,e);i._componentsProvider||(u=e.localCache)!=null&&u._offlineComponentProvider&&((d=e.localCache)!=null&&d._onlineComponentProvider)&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new FN(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(v){const b=v==null?void 0:v._online.build();return{_offline:v==null?void 0:v._offline.build(b),_online:b}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e){this._byteString=e}static fromBase64String(e){try{return new us(ji.fromBase64String(e))}catch(n){throw new ze(Ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new us(ji.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:us._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(gu(e,us._jsonSchema))return us.fromBase64String(e.bytes)}}us._jsonSchemaVersion="firestore/bytes/1.0",us._jsonSchema={type:Ei("string",us._jsonSchemaVersion),bytes:Ei("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ze(Ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ze(Ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ze(Ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return zt(this._lat,e._lat)||zt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Fs._jsonSchemaVersion}}static fromJSON(e){if(gu(e,Fs._jsonSchema))return new Fs(e.latitude,e.longitude)}}Fs._jsonSchemaVersion="firestore/geoPoint/1.0",Fs._jsonSchema={type:Ei("string",Fs._jsonSchemaVersion),latitude:Ei("number"),longitude:Ei("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(o,u){if(o.length!==u.length)return!1;for(let d=0;d<o.length;++d)if(o[d]!==u[d])return!1;return!0})(this._values,e._values)}toJSON(){return{type:zs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(gu(e,zs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new zs(e.vectorValues);throw new ze(Ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}zs._jsonSchemaVersion="firestore/vectorValue/1.0",zs._jsonSchema={type:Ei("string",zs._jsonSchemaVersion),vectorValues:Ei("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN=/^__.*__$/;class QN{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return this.fieldMask!==null?new Eo(e,this.data,this.fieldMask,n,this.fieldTransforms):new pu(e,this.data,n,this.fieldTransforms)}}class FA{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return new Eo(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function zA(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt(40011,{Ac:i})}}class Ng{constructor(e,n,o,u,d,y){this.settings=e,this.databaseId=n,this.serializer=o,this.ignoreUndefinedProperties=u,d===void 0&&this.Rc(),this.fieldTransforms=d||[],this.fieldMask=y||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ng({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var u;const n=(u=this.path)==null?void 0:u.child(e),o=this.Vc({path:n,fc:!1});return o.gc(e),o}yc(e){var u;const n=(u=this.path)==null?void 0:u.child(e),o=this.Vc({path:n,fc:!1});return o.Rc(),o}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return yf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(zA(this.Ac)&&WN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class ZN{constructor(e,n,o){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=o||Vf(e)}Cc(e,n,o,u=!1){return new Ng({Ac:e,methodName:n,Dc:o,path:Vi.emptyPath(),fc:!1,bc:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Hf(i){const e=i._freezeSettings(),n=Vf(i._databaseId);return new ZN(i._databaseId,!!e.ignoreUndefinedProperties,n)}function HA(i,e,n,o,u,d={}){const y=i.Cc(d.merge||d.mergeFields?2:0,e,n,u);Rg("Data must be an object, but it was:",y,o);const v=YA(o,y);let b,_;if(d.merge)b=new qr(y.fieldMask),_=y.fieldTransforms;else if(d.mergeFields){const C=[];for(const I of d.mergeFields){const L=L1(e,I,n);if(!y.contains(L))throw new ze(Ce.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);KA(C,L)||C.push(L)}b=new qr(C),_=y.fieldTransforms.filter((I=>b.covers(I.field)))}else b=null,_=y.fieldTransforms;return new QN(new Nr(v),b,_)}class Gf extends Ig{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gf}}function GA(i,e,n,o){const u=i.Cc(1,e,n);Rg("Data must be an object, but it was:",u,o);const d=[],y=Nr.empty();yo(o,((b,_)=>{const C=Og(e,b,n);_=ds(_);const I=u.yc(C);if(_ instanceof Gf)d.push(C);else{const L=wu(_,I);L!=null&&(d.push(C),y.set(C,L))}}));const v=new qr(d);return new FA(y,v,u.fieldTransforms)}function qA(i,e,n,o,u,d){const y=i.Cc(1,e,n),v=[L1(e,o,n)],b=[u];if(d.length%2!=0)throw new ze(Ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let L=0;L<d.length;L+=2)v.push(L1(e,d[L])),b.push(d[L+1]);const _=[],C=Nr.empty();for(let L=v.length-1;L>=0;--L)if(!KA(_,v[L])){const B=v[L];let q=b[L];q=ds(q);const K=y.yc(B);if(q instanceof Gf)_.push(B);else{const Y=wu(q,K);Y!=null&&(_.push(B),C.set(B,Y))}}const I=new qr(_);return new FA(C,I,y.fieldTransforms)}function JN(i,e,n,o=!1){return wu(n,i.Cc(o?4:3,e))}function wu(i,e){if(XA(i=ds(i)))return Rg("Unsupported field value:",e,i),YA(i,e);if(i instanceof Ig)return(function(o,u){if(!zA(u.Ac))throw u.Sc(`${o._methodName}() can only be used with update() and set()`);if(!u.path)throw u.Sc(`${o._methodName}() is not currently supported inside arrays`);const d=o._toFieldTransform(u);d&&u.fieldTransforms.push(d)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(o,u){const d=[];let y=0;for(const v of o){let b=wu(v,u.wc(y));b==null&&(b={nullValue:"NULL_VALUE"}),d.push(b),y++}return{arrayValue:{values:d}}})(i,e)}return(function(o,u){if((o=ds(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return F4(u.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){const d=Mn.fromDate(o);return{timestampValue:df(u.serializer,d)}}if(o instanceof Mn){const d=new Mn(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:df(u.serializer,d)}}if(o instanceof Fs)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof us)return{bytesValue:hA(u.serializer,o._byteString)};if(o instanceof ii){const d=u.databaseId,y=o.firestore._databaseId;if(!y.isEqual(d))throw u.Sc(`Document reference is for database ${y.projectId}/${y.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:ug(o.firestore._databaseId||u.databaseId,o._key.path)}}if(o instanceof zs)return(function(y,v){return{mapValue:{fields:{[j_]:{stringValue:F_},[lf]:{arrayValue:{values:y.toArray().map((_=>{if(typeof _!="number")throw v.Sc("VectorValues must only contain numeric values.");return og(v.serializer,_)}))}}}}}})(o,u);throw u.Sc(`Unsupported field value: ${If(o)}`)})(i,e)}function YA(i,e){const n={};return L_(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yo(i,((o,u)=>{const d=wu(u,e.mc(o));d!=null&&(n[o]=d)})),{mapValue:{fields:n}}}function XA(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Mn||i instanceof Fs||i instanceof us||i instanceof ii||i instanceof Ig||i instanceof zs)}function Rg(i,e,n){if(!XA(n)||!D_(n)){const o=If(n);throw o==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+o)}}function L1(i,e,n){if((e=ds(e))instanceof Au)return e._internalPath;if(typeof e=="string")return Og(i,e);throw yf("Field path arguments must be of type string or ",i,!1,void 0,n)}const $N=new RegExp("[~\\*/\\[\\]]");function Og(i,e,n){if(e.search($N)>=0)throw yf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Au(...e.split("."))._internalPath}catch{throw yf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function yf(i,e,n,o,u){const d=o&&!o.isEmpty(),y=u!==void 0;let v=`Function ${e}() called with invalid data`;n&&(v+=" (via `toFirestore()`)"),v+=". ";let b="";return(d||y)&&(b+=" (found",d&&(b+=` in field ${o}`),y&&(b+=` in document ${u}`),b+=")"),new ze(Ce.INVALID_ARGUMENT,v+i+b)}function KA(i,e){return i.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e,n,o,u,d){this._firestore=e,this._userDataWriter=n,this._key=o,this._document=u,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new ii(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new e6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(QA("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class e6 extends WA{data(){return super.data()}}function QA(i,e){return typeof e=="string"?Og(i,e):e instanceof Au?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ze(Ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dg{}class t6 extends Dg{}function n6(i,e,...n){let o=[];e instanceof Dg&&o.push(e),o=o.concat(n),(function(d){const y=d.filter((b=>b instanceof Lg)).length,v=d.filter((b=>b instanceof Mg)).length;if(y>1||y>0&&v>0)throw new ze(Ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(o);for(const u of o)i=u._apply(i);return i}class Mg extends t6{constructor(e,n,o){super(),this._field=e,this._op=n,this._value=o,this.type="where"}static _create(e,n,o){return new Mg(e,n,o)}_apply(e){const n=this._parse(e);return JA(e._query,n),new nl(e.firestore,e.converter,b1(e._query,n))}_parse(e){const n=Hf(e.firestore);return(function(d,y,v,b,_,C,I){let L;if(_.isKeyField()){if(C==="array-contains"||C==="array-contains-any")throw new ze(Ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if(C==="in"||C==="not-in"){yy(I,C);const q=[];for(const K of I)q.push(xy(b,d,K));L={arrayValue:{values:q}}}else L=xy(b,d,I)}else C!=="in"&&C!=="not-in"&&C!=="array-contains-any"||yy(I,C),L=JN(v,y,I,C==="in"||C==="not-in");return yi.create(_,C,L)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Lg extends Dg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Lg(e,n)}_parse(e){const n=this._queryConstraints.map((o=>o._parse(e))).filter((o=>o.getFilters().length>0));return n.length===1?n[0]:vs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(u,d){let y=u;const v=d.getFlattenedFilters();for(const b of v)JA(y,b),y=b1(y,b)})(e._query,n),new nl(e.firestore,e.converter,b1(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function xy(i,e,n){if(typeof(n=ds(n))=="string"){if(n==="")throw new ze(Ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!W_(e)&&n.indexOf("/")!==-1)throw new ze(Ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const o=e.path.child(Cn.fromString(n));if(!et.isDocumentKey(o))throw new ze(Ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Mx(i,new et(o))}if(n instanceof ii)return Mx(i,n._key);throw new ze(Ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${If(n)}.`)}function yy(i,e){if(!Array.isArray(i)||i.length===0)throw new ze(Ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function JA(i,e){const n=(function(u,d){for(const y of u)for(const v of y.getFlattenedFilters())if(d.indexOf(v.op)>=0)return v.op;return null})(i.filters,(function(u){switch(u){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ze(Ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ze(Ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class i6{convertValue(e,n="none"){switch(fo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return li(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ho(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw lt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const o={};return yo(e,((u,d)=>{o[u]=this.convertValue(d,n)})),o}convertVectorValue(e){var o,u,d;const n=(d=(u=(o=e.fields)==null?void 0:o[lf].arrayValue)==null?void 0:u.values)==null?void 0:d.map((y=>li(y.doubleValue)));return new zs(n)}convertGeoPoint(e){return new Fs(li(e.latitude),li(e.longitude))}convertArray(e,n){return(e.values||[]).map((o=>this.convertValue(o,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const o=Of(e);return o==null?null:this.convertValue(o,n);case"estimate":return this.convertTimestamp(au(e));default:return null}}convertTimestamp(e){const n=uo(e);return new Mn(n.seconds,n.nanos)}convertDocumentKey(e,n){const o=Cn.fromString(e);un(xA(o),9688,{name:e});const u=new ou(o.get(1),o.get(3)),d=new et(o.popFirst(5));return u.isEqual(n)||wa(`Document ${d} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(i,e,n){let o;return o=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,o}class Yc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Xo extends WA{constructor(e,n,o,u,d,y){super(e,n,o,u,y),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Kh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const o=this._document.data.field(QA("DocumentSnapshot.get",e));if(o!==null)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ze(Ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Xo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Xo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Xo._jsonSchema={type:Ei("string",Xo._jsonSchemaVersion),bundleSource:Ei("string","DocumentSnapshot"),bundleName:Ei("string"),bundle:Ei("string")};class Kh extends Xo{data(e={}){return super.data(e)}}class Ko{constructor(e,n,o,u){this._firestore=e,this._userDataWriter=n,this._snapshot=u,this.metadata=new Yc(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((o=>{e.call(n,new Kh(this._firestore,this._userDataWriter,o.key,o,new Yc(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ze(Ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(u,d){if(u._snapshot.oldDocs.isEmpty()){let y=0;return u._snapshot.docChanges.map((v=>{const b=new Kh(u._firestore,u._userDataWriter,v.doc.key,v.doc,new Yc(u._snapshot.mutatedKeys.has(v.doc.key),u._snapshot.fromCache),u.query.converter);return v.doc,{type:"added",doc:b,oldIndex:-1,newIndex:y++}}))}{let y=u._snapshot.oldDocs;return u._snapshot.docChanges.filter((v=>d||v.type!==3)).map((v=>{const b=new Kh(u._firestore,u._userDataWriter,v.doc.key,v.doc,new Yc(u._snapshot.mutatedKeys.has(v.doc.key),u._snapshot.fromCache),u.query.converter);let _=-1,C=-1;return v.type!==0&&(_=y.indexOf(v.doc.key),y=y.delete(v.doc.key)),v.type!==1&&(y=y.add(v.doc),C=y.indexOf(v.doc.key)),{type:r6(v.type),doc:b,oldIndex:_,newIndex:C}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ze(Ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ko._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=tg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],o=[],u=[];return this.docs.forEach((d=>{d._document!==null&&(n.push(d._document),o.push(this._userDataWriter.convertObjectMap(d._document.data.value.mapValue.fields,"previous")),u.push(d.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function r6(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lt(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ef(i){i=Rr(i,ii);const e=Rr(i.firestore,Ta);return GN(_u(e),i._key).then((n=>ew(e,i,n)))}Ko._jsonSchemaVersion="firestore/querySnapshot/1.0",Ko._jsonSchema={type:Ei("string",Ko._jsonSchemaVersion),bundleSource:Ei("string","QuerySnapshot"),bundleName:Ei("string"),bundle:Ei("string")};class Pg extends i6{constructor(e){super(),this.firestore=e}convertBytes(e){return new us(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ii(this.firestore,null,n)}}function qf(i){i=Rr(i,nl);const e=Rr(i.firestore,Ta),n=_u(e),o=new Pg(e);return ZA(i._query),qN(n,i._query).then((u=>new Ko(e,o,i,u)))}function Ca(i,e,n){i=Rr(i,ii);const o=Rr(i.firestore,Ta),u=$A(i.converter,e,n);return Xf(o,[HA(Hf(o),"setDoc",i._key,u,i.converter!==null,n).toMutation(i._key,Or.none())])}function po(i,e,n,...o){i=Rr(i,ii);const u=Rr(i.firestore,Ta),d=Hf(u);let y;return y=typeof(e=ds(e))=="string"||e instanceof Au?qA(d,"updateDoc",i._key,e,n,o):GA(d,"updateDoc",i._key,e),Xf(u,[y.toMutation(i._key,Or.exists(!0))])}function Yf(i){return Xf(Rr(i.firestore,Ta),[new kf(i._key,Or.none())])}function _o(i,...e){var b,_,C;i=ds(i);let n={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||py(e[o])||(n=e[o++]);const u={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(py(e[o])){const I=e[o];e[o]=(b=I.next)==null?void 0:b.bind(I),e[o+1]=(_=I.error)==null?void 0:_.bind(I),e[o+2]=(C=I.complete)==null?void 0:C.bind(I)}let d,y,v;if(i instanceof ii)y=Rr(i.firestore,Ta),v=Df(i._key.path),d={next:I=>{e[o]&&e[o](ew(y,i,I))},error:e[o+1],complete:e[o+2]};else{const I=Rr(i,nl);y=Rr(I.firestore,Ta),v=I._query;const L=new Pg(y);d={next:B=>{e[o]&&e[o](new Ko(y,L,I,B))},error:e[o+1],complete:e[o+2]},ZA(i._query)}return(function(L,B,q,K){const Y=new Sg(K),ae=new Tg(B,Y,q);return L.asyncQueue.enqueueAndForget((async()=>Ag(await xf(L),ae))),()=>{Y.Nu(),L.asyncQueue.enqueueAndForget((async()=>wg(await xf(L),ae)))}})(_u(y),v,u,d)}function Xf(i,e){return(function(o,u){const d=new Ea;return o.asyncQueue.enqueueAndForget((async()=>DN(await HN(o),u,d))),d.promise})(_u(i),e)}function ew(i,e,n){const o=n.docs.get(e._key),u=new Pg(i);return new Xo(i,u,e._key,o,new Yc(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Hf(e)}set(e,n,o){this._verifyNotCommitted();const u=r1(e,this._firestore),d=$A(u.converter,n,o),y=HA(this._dataReader,"WriteBatch.set",u._key,d,u.converter!==null,o);return this._mutations.push(y.toMutation(u._key,Or.none())),this}update(e,n,o,...u){this._verifyNotCommitted();const d=r1(e,this._firestore);let y;return y=typeof(n=ds(n))=="string"||n instanceof Au?qA(this._dataReader,"WriteBatch.update",d._key,n,o,u):GA(this._dataReader,"WriteBatch.update",d._key,n),this._mutations.push(y.toMutation(d._key,Or.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=r1(e,this._firestore);return this._mutations=this._mutations.concat(new kf(n._key,Or.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ze(Ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function r1(i,e){if((i=ds(i)).firestore!==e)throw new ze(Ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kf(i){return _u(i=Rr(i,Ta)),new s6(i,(e=>Xf(i,e)))}(function(e,n=!0){(function(u){$l=u})(VS),sf(new iu("firestore",((o,{instanceIdentifier:u,options:d})=>{const y=o.getProvider("app").getImmediate(),v=new Ta(new $S(o.getProvider("auth-internal")),new n4(y,o.getProvider("app-check-internal")),(function(_,C){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new ze(Ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ou(_.options.projectId,C)})(y,u),y);return d={useFetchStreams:n,...d},v._setSettings(d),v}),"PUBLIC").setMultipleInstances(!0)),zl(_x,Ax,e),zl(_x,Ax,"esm2020")})();var a6="firebase",o6="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zl(a6,o6,"app");const l6={apiKey:"AIzaSyDYZ6VUaaDmy-AvS4D9cM3zkN0Vg4lStuk",authDomain:"workshop-36cbe.firebaseapp.com",projectId:"workshop-36cbe",storageBucket:"workshop-36cbe.firebasestorage.app",messagingSenderId:"742601440632",appId:"1:742601440632:web:48e380f7e1441494ba9c8d"},c6=__(l6),vt=XN(c6),u6=[{id:"p1",name:"",category:"food",price:150,description:"",imageUrl:"https://images.unsplash.com/photo-1558961363-fa8fdf82db35?q=80&w=400&h=300&auto=format&fit=crop",stock:12},{id:"p2",name:"",category:"food",price:80,description:"",imageUrl:"https://images.unsplash.com/photo-1544467316-e97029d2d47b?q=80&w=400&h=300&auto=format&fit=crop",stock:45},{id:"p3",name:"",category:"electronic",price:12e3,description:"",imageUrl:"https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?q=80&w=400&h=300&auto=format&fit=crop",stock:1},{id:"p4",name:"",category:"ticket",price:320,description:"",imageUrl:"https://images.unsplash.com/photo-1489599849927-2ee91cede3ba?q=80&w=400&h=300&auto=format&fit=crop",stock:8},{id:"p5",name:"",category:"food",price:800,description:"",imageUrl:"https://images.unsplash.com/photo-1544739313-6fad02872377?q=80&w=400&h=300&auto=format&fit=crop",stock:3},{id:"p6",name:"",category:"electronic",price:2500,description:"",imageUrl:"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?q=80&w=400&h=300&auto=format&fit=crop",stock:5}],Wo=[{name:"",threshold:0,color:"bg-slate-400",icon:""},{name:"",threshold:500,color:"bg-blue-400",icon:""},{name:"",threshold:2e3,color:"bg-green-500",icon:""},{name:"",threshold:5e3,color:"bg-purple-500",icon:""},{name:"",threshold:1e4,color:"bg-orange-500",icon:""},{name:"",threshold:3e4,color:"bg-yellow-500",icon:""}],Bg={USER:"workshop_user"},kt={STUDENTS:"students",MISSIONS:"missions",PRODUCTS:"products",WISHES:"wishes",REDEMPTIONS:"redemptions",CHALLENGE_HISTORY:"challengeHistory",POINT_REASONS:"pointReasons",MISSION_SUBMISSIONS:"missionSubmissions",PRODUCT_CATEGORIES:"productCategories"},tw=[{id:"user_zhou",name:"",points:1200,totalEarned:2500,role:hs.STUDENT,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Zhou",password:"123",grade:"",isApproved:!0},{id:"user_hu",name:"",points:800,totalEarned:1800,role:hs.STUDENT,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Hu",password:"123",grade:"",isApproved:!0},{id:"user_lin",name:"",points:2100,totalEarned:4200,role:hs.STUDENT,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Lin",password:"123",grade:"",isApproved:!0}],Ey={id:"user_admin",name:"",points:0,totalEarned:0,role:hs.ADMIN,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Admin",isApproved:!0},_y={id:"user_guest",name:"",points:0,totalEarned:0,role:hs.GUEST,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Guest",isApproved:!0},nw=async()=>{try{const i=await qf(ps(vt,kt.STUDENTS));return i.empty?(await h6(),tw):i.docs.map(e=>({...e.data(),id:e.id}))}catch(i){return console.error("Error fetching students:",i),[]}},h6=async()=>{const i=Kf(vt);tw.forEach(e=>{const n=Ln(vt,kt.STUDENTS,e.id);i.set(n,e)}),await i.commit()},iw=async i=>{try{await Ca(Ln(vt,kt.STUDENTS,i.id),i)}catch(e){console.error("Error saving student:",e),console.error("")}},f6=async i=>{const e=Kf(vt);i.forEach(n=>{const o=Ln(vt,kt.STUDENTS,n.id);e.set(o,n)}),await e.commit()},d6=async(i,e,n)=>{try{if((await nw()).some(d=>d.name===i))return!1;const u={id:`user_${Date.now()}`,name:i,password:e,grade:n,points:0,totalEarned:0,role:hs.STUDENT,avatar:`https://api.dicebear.com/7.x/avataaars/svg?seed=${i}`,isApproved:!1};return await iw(u),!0}catch(o){return console.error("Error registering student:",o),!1}},g6=async i=>{try{const e=Ln(vt,kt.STUDENTS,i);await po(e,{isApproved:!0})}catch(e){console.error("Error approving student:",e)}},m6=async i=>{try{await Yf(Ln(vt,kt.STUDENTS,i))}catch(e){console.error("Error deleting student:",e)}},Ay=()=>{const i=localStorage.getItem(Bg.USER);return i?JSON.parse(i):null},Wh=async i=>{localStorage.setItem(Bg.USER,JSON.stringify(i)),i.role===hs.STUDENT&&await iw(i)},p6=()=>{localStorage.removeItem(Bg.USER)},x6=async i=>{try{await Ca(Ln(vt,kt.REDEMPTIONS,i.id),i)}catch(e){console.error("Error adding redemption:",e)}},y6=async(i,e)=>{try{const n=Ln(vt,kt.REDEMPTIONS,i);await po(n,{status:e})}catch(n){console.error("Error updating redemption status:",n)}},E6=async i=>{try{const e=`cat_${Date.now()}`;await Ca(Ln(vt,kt.PRODUCT_CATEGORIES,e),{id:e,name:i})}catch(e){console.error("Error adding category:",e)}},_6=async i=>{try{await Yf(Ln(vt,kt.PRODUCT_CATEGORIES,i))}catch(e){console.error("Error deleting category:",e)}},rw=i=>_o(ps(vt,kt.PRODUCT_CATEGORIES),e=>{const n=e.docs.map(o=>({...o.data(),id:o.id}));i(n)}),A6=[{id:"m1",title:"",description:"",points:100,type:"normal",isActive:!0,maxAttempts:1},{id:"m2",title:" 80 ",description:"",points:300,type:"challenge",isActive:!0,maxAttempts:1},{id:"m3",title:" 90 ",description:"",points:1e3,type:"hard",isActive:!0,maxAttempts:1}],w6=async()=>{const i=Kf(vt);A6.forEach(e=>{const n=Ln(vt,kt.MISSIONS,e.id);i.set(n,e)}),await i.commit()},b6=async i=>{try{await Ca(Ln(vt,kt.MISSIONS,i.id),i)}catch(e){console.error("Error adding mission:",e)}},T6=async i=>{try{const e=Ln(vt,kt.MISSIONS,i),n=await Ef(e);if(n.exists()){const o=n.data();await po(e,{isActive:!o.isActive})}}catch(e){console.error("Error toggling mission:",e)}},v6=async()=>{try{return(await qf(ps(vt,kt.CHALLENGE_HISTORY))).docs.map(e=>({...e.data(),id:e.id}))}catch(i){return console.error("Error fetching challenge history:",i),[]}},C6=async i=>{try{const e=`${i.userId}_${i.missionId}_${Date.now()}`;await Ca(Ln(vt,kt.CHALLENGE_HISTORY,e),i)}catch(e){console.error("Error adding challenge history:",e)}},sw=async(i,e)=>{try{const n=await v6(),o=new Date;return o.setHours(0,0,0,0),n.some(u=>u.userId===i&&u.missionId===e&&u.timestamp>=o.getTime())}catch(n){return console.error("Error checking mission completion:",n),!1}},S6=async i=>{try{if(await sw(i.userId,i.missionId)){console.warn("Mission already completed today");return}const n=new Date;if(n.setHours(0,0,0,0),(await qf(n6(ps(vt,kt.MISSION_SUBMISSIONS)))).docs.find(d=>{const y=d.data();return y.userId===i.userId&&y.missionId===i.missionId&&y.status==="pending"&&y.timestamp>=n.getTime()})){console.warn("Mission submission already pending today");return}await Ca(Ln(vt,kt.MISSION_SUBMISSIONS,i.id),i)}catch(e){console.error("Error submitting mission:",e)}},I6=async i=>{try{const e=Ln(vt,kt.MISSION_SUBMISSIONS,i),n=await Ef(e);if(n.exists()){const o=n.data();await po(e,{status:"approved"}),await C6({id:`h_${Date.now()}`,userId:o.userId,missionId:o.missionId,timestamp:Date.now()});const u=Ln(vt,kt.STUDENTS,o.userId),d=await Ef(u);if(d.exists()){const y=d.data();await po(u,{points:y.points+o.points,totalEarned:y.totalEarned+o.points})}}}catch(e){console.error("Error approving mission:",e)}},N6=async i=>{try{const e=Ln(vt,kt.MISSION_SUBMISSIONS,i);await po(e,{status:"rejected"})}catch(e){console.error("Error rejecting mission:",e)}},aw=i=>_o(ps(vt,kt.MISSION_SUBMISSIONS),e=>{i(e.docs.map(n=>({...n.data(),id:n.id})))}),R6=async()=>{const i=Kf(vt);u6.forEach(e=>{const n=Ln(vt,kt.PRODUCTS,e.id);i.set(n,e)}),await i.commit()},O6=async i=>{try{await Ca(Ln(vt,kt.PRODUCTS,i.id),i)}catch(e){console.error("Error adding product:",e)}},ow=async(i,e)=>{try{const n=Ln(vt,kt.PRODUCTS,i);await po(n,{stock:Math.max(0,e)})}catch(n){console.error("Error updating product stock:",n)}},D6=async i=>{try{await Yf(Ln(vt,kt.PRODUCTS,i))}catch(e){console.error("Error deleting product:",e)}},M6=async i=>{try{await Ca(Ln(vt,kt.POINT_REASONS,i.id),i)}catch(e){console.error("Error adding point reason:",e)}},L6=async i=>{try{await Yf(Ln(vt,kt.POINT_REASONS,i))}catch(e){console.error("Error deleting point reason:",e)}},P6=i=>_o(ps(vt,kt.POINT_REASONS),e=>{const n=e.docs.map(o=>({...o.data(),id:o.id}));i(n)}),B6=async()=>{try{return(await qf(ps(vt,kt.WISHES))).docs.map(e=>({...e.data(),id:e.id}))}catch(i){return console.error("Error fetching wishes:",i),[]}},k6=async i=>{try{if((await B6()).find(o=>o.userId===i.userId)){console.error("");return}await Ca(Ln(vt,kt.WISHES,i.id),i)}catch(e){console.error("Error adding wish:",e),console.error(" Firestore  (Test Mode)")}},U6=async(i,e)=>{try{const n=Ln(vt,kt.WISHES,i),o=await Ef(n);if(o.exists()){const d=o.data().likedBy||[];if(d.includes(e)){console.error("");return}await po(n,{likedBy:[...d,e]})}}catch(n){console.error("Error liking wish:",n)}},V6=i=>_o(ps(vt,kt.STUDENTS),e=>{const n=e.docs.map(o=>({...o.data(),id:o.id}));i(n)},e=>{console.error("Error in subscribeToStudents:",e)}),lw=i=>_o(ps(vt,kt.MISSIONS),e=>{e.empty&&w6().catch(console.error);const n=e.docs.map(o=>({...o.data(),id:o.id}));i(n)},e=>console.error("Error subscribing to missions:",e)),cw=i=>_o(ps(vt,kt.PRODUCTS),e=>{e.empty&&R6().catch(console.error);const n=e.docs.map(o=>({...o.data(),id:o.id}));i(n)},e=>{console.error("Error subscribing to products:",e),console.error("")}),uw=i=>_o(ps(vt,kt.WISHES),e=>{const n=e.docs.map(o=>({...o.data(),id:o.id}));i(n)},e=>console.error("Error subscribing to wishes:",e)),hw=i=>_o(ps(vt,kt.REDEMPTIONS),e=>{const n=e.docs.map(o=>{const u=o.data();return{id:o.id,status:"pending",pointsSpent:0,productName:"",timestamp:Date.now(),userId:"unknown",qrCodeData:"",...u}});i(n)},e=>{console.error("Error subscribing to redemptions:",e)});var j6={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var wy;(function(i){i.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",i.OUTCOME_OK="OUTCOME_OK",i.OUTCOME_FAILED="OUTCOME_FAILED",i.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(wy||(wy={}));var by;(function(i){i.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",i.PYTHON="PYTHON"})(by||(by={}));var Ty;(function(i){i.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",i.SILENT="SILENT",i.WHEN_IDLE="WHEN_IDLE",i.INTERRUPT="INTERRUPT"})(Ty||(Ty={}));var vy;(function(i){i.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",i.STRING="STRING",i.NUMBER="NUMBER",i.INTEGER="INTEGER",i.BOOLEAN="BOOLEAN",i.ARRAY="ARRAY",i.OBJECT="OBJECT",i.NULL="NULL"})(vy||(vy={}));var Cy;(function(i){i.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",i.SIMPLE_SEARCH="SIMPLE_SEARCH",i.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Cy||(Cy={}));var Sy;(function(i){i.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",i.NO_AUTH="NO_AUTH",i.API_KEY_AUTH="API_KEY_AUTH",i.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",i.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",i.OAUTH="OAUTH",i.OIDC_AUTH="OIDC_AUTH"})(Sy||(Sy={}));var Iy;(function(i){i.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",i.HTTP_IN_QUERY="HTTP_IN_QUERY",i.HTTP_IN_HEADER="HTTP_IN_HEADER",i.HTTP_IN_PATH="HTTP_IN_PATH",i.HTTP_IN_BODY="HTTP_IN_BODY",i.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Iy||(Iy={}));var Ny;(function(i){i.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",i.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",i.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",i.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Ny||(Ny={}));var Ry;(function(i){i.UNSPECIFIED="UNSPECIFIED",i.BLOCKING="BLOCKING",i.NON_BLOCKING="NON_BLOCKING"})(Ry||(Ry={}));var Oy;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(Oy||(Oy={}));var Dy;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE",i.VALIDATED="VALIDATED"})(Dy||(Dy={}));var My;(function(i){i.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH",i.MINIMAL="MINIMAL"})(My||(My={}));var Ly;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",i.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",i.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",i.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",i.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Ly||(Ly={}));var Py;(function(i){i.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",i.SEVERITY="SEVERITY",i.PROBABILITY="PROBABILITY"})(Py||(Py={}));var By;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE",i.OFF="OFF"})(By||(By={}));var ky;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.IMAGE_SAFETY="IMAGE_SAFETY",i.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",i.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",i.NO_IMAGE="NO_IMAGE",i.IMAGE_RECITATION="IMAGE_RECITATION",i.IMAGE_OTHER="IMAGE_OTHER"})(ky||(ky={}));var Uy;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(Uy||(Uy={}));var Vy;(function(i){i.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",i.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",i.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",i.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",i.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Vy||(Vy={}));var jy;(function(i){i.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",i.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",i.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",i.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",i.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(jy||(jy={}));var Fy;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.IMAGE_SAFETY="IMAGE_SAFETY",i.MODEL_ARMOR="MODEL_ARMOR",i.JAILBREAK="JAILBREAK"})(Fy||(Fy={}));var zy;(function(i){i.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",i.ON_DEMAND="ON_DEMAND",i.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(zy||(zy={}));var Hy;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.AUDIO="AUDIO"})(Hy||(Hy={}));var Gy;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Gy||(Gy={}));var qy;(function(i){i.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",i.TUNING_MODE_FULL="TUNING_MODE_FULL",i.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(qy||(qy={}));var Yy;(function(i){i.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",i.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",i.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",i.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",i.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",i.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",i.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Yy||(Yy={}));var Xy;(function(i){i.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",i.JOB_STATE_QUEUED="JOB_STATE_QUEUED",i.JOB_STATE_PENDING="JOB_STATE_PENDING",i.JOB_STATE_RUNNING="JOB_STATE_RUNNING",i.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",i.JOB_STATE_FAILED="JOB_STATE_FAILED",i.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",i.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",i.JOB_STATE_PAUSED="JOB_STATE_PAUSED",i.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",i.JOB_STATE_UPDATING="JOB_STATE_UPDATING",i.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Xy||(Xy={}));var Ky;(function(i){i.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",i.TUNING_TASK_I2V="TUNING_TASK_I2V",i.TUNING_TASK_T2V="TUNING_TASK_T2V",i.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Ky||(Ky={}));var Wy;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",i.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Wy||(Wy={}));var Qy;(function(i){i.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",i.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",i.BALANCED="BALANCED",i.PRIORITIZE_COST="PRIORITIZE_COST"})(Qy||(Qy={}));var Zy;(function(i){i.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",i.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Zy||(Zy={}));var Jy;(function(i){i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(Jy||(Jy={}));var $y;(function(i){i.DONT_ALLOW="DONT_ALLOW",i.ALLOW_ADULT="ALLOW_ADULT",i.ALLOW_ALL="ALLOW_ALL"})($y||($y={}));var eE;(function(i){i.auto="auto",i.en="en",i.ja="ja",i.ko="ko",i.hi="hi",i.zh="zh",i.pt="pt",i.es="es"})(eE||(eE={}));var tE;(function(i){i.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",i.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",i.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",i.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",i.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(tE||(tE={}));var nE;(function(i){i.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",i.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",i.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",i.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(nE||(nE={}));var iE;(function(i){i.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",i.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",i.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",i.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(iE||(iE={}));var rE;(function(i){i.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",i.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",i.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",i.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",i.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",i.EDIT_MODE_STYLE="EDIT_MODE_STYLE",i.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",i.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(rE||(rE={}));var sE;(function(i){i.FOREGROUND="FOREGROUND",i.BACKGROUND="BACKGROUND",i.PROMPT="PROMPT",i.SEMANTIC="SEMANTIC",i.INTERACTIVE="INTERACTIVE"})(sE||(sE={}));var aE;(function(i){i.ASSET="ASSET",i.STYLE="STYLE"})(aE||(aE={}));var oE;(function(i){i.INSERT="INSERT",i.REMOVE="REMOVE",i.REMOVE_STATIC="REMOVE_STATIC",i.OUTPAINT="OUTPAINT"})(oE||(oE={}));var lE;(function(i){i.OPTIMIZED="OPTIMIZED",i.LOSSLESS="LOSSLESS"})(lE||(lE={}));var cE;(function(i){i.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",i.PREFERENCE_TUNING="PREFERENCE_TUNING"})(cE||(cE={}));var uE;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.STATE_PENDING="STATE_PENDING",i.STATE_ACTIVE="STATE_ACTIVE",i.STATE_FAILED="STATE_FAILED"})(uE||(uE={}));var hE;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.PROCESSING="PROCESSING",i.ACTIVE="ACTIVE",i.FAILED="FAILED"})(hE||(hE={}));var fE;(function(i){i.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",i.UPLOADED="UPLOADED",i.GENERATED="GENERATED",i.REGISTERED="REGISTERED"})(fE||(fE={}));var dE;(function(i){i.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.RESPONSE_REJECTED="RESPONSE_REJECTED",i.NEED_MORE_INPUT="NEED_MORE_INPUT"})(dE||(dE={}));var gE;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.VIDEO="VIDEO",i.AUDIO="AUDIO",i.DOCUMENT="DOCUMENT"})(gE||(gE={}));var mE;(function(i){i.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",i.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",i.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(mE||(mE={}));var pE;(function(i){i.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",i.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",i.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(pE||(pE={}));var xE;(function(i){i.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",i.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",i.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(xE||(xE={}));var yE;(function(i){i.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",i.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",i.NO_INTERRUPTION="NO_INTERRUPTION"})(yE||(yE={}));var EE;(function(i){i.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",i.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",i.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(EE||(EE={}));var _E;(function(i){i.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",i.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",i.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",i.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",i.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",i.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",i.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",i.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",i.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",i.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",i.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",i.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",i.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(_E||(_E={}));var AE;(function(i){i.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",i.QUALITY="QUALITY",i.DIVERSITY="DIVERSITY",i.VOCALIZATION="VOCALIZATION"})(AE||(AE={}));var wE;(function(i){i.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",i.PLAY="PLAY",i.PAUSE="PAUSE",i.STOP="STOP",i.RESET_CONTEXT="RESET_CONTEXT"})(wE||(wE={}));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var bE;(function(i){i.PAGED_ITEM_BATCH_JOBS="batchJobs",i.PAGED_ITEM_MODELS="models",i.PAGED_ITEM_TUNING_JOBS="tuningJobs",i.PAGED_ITEM_FILES="files",i.PAGED_ITEM_CACHED_CONTENTS="cachedContents",i.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",i.PAGED_ITEM_DOCUMENTS="documents"})(bE||(bE={}));function _f(i,e){var n={};for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&e.indexOf(o)<0&&(n[o]=i[o]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(i);u<o.length;u++)e.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(i,o[u])&&(n[o[u]]=i[o[u]]);return n}function TE(i){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&i[e],o=0;if(n)return n.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&o>=i.length&&(i=void 0),{value:i&&i[o++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Xn(i){return this instanceof Xn?(this.v=i,this):new Xn(i)}function tu(i,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(i,e||[]),u,d=[];return u=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),v("next"),v("throw"),v("return",y),u[Symbol.asyncIterator]=function(){return this},u;function y(B){return function(q){return Promise.resolve(q).then(B,I)}}function v(B,q){o[B]&&(u[B]=function(K){return new Promise(function(Y,ae){d.push([B,K,Y,ae])>1||b(B,K)})},q&&(u[B]=q(u[B])))}function b(B,q){try{_(o[B](q))}catch(K){L(d[0][3],K)}}function _(B){B.value instanceof Xn?Promise.resolve(B.value.v).then(C,I):L(d[0][2],B)}function C(B){b("next",B)}function I(B){b("throw",B)}function L(B,q){B(q),d.shift(),d.length&&b(d[0][0],d[0][1])}}function Gl(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],n;return e?e.call(i):(i=typeof TE=="function"?TE(i):i[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(d){n[d]=i[d]&&function(y){return new Promise(function(v,b){y=i[d](y),u(v,b,y.done,y.value)})}}function u(d,y,v,b){Promise.resolve(b).then(function(_){d({value:_,done:v})},y)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let fw=function(){const{crypto:i}=globalThis;if(i!=null&&i.randomUUID)return fw=i.randomUUID.bind(i),i.randomUUID();const e=new Uint8Array(1),n=i?()=>i.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^n()&15>>+o/4).toString(16))};const F6=()=>fw();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function P1(i){return typeof i=="object"&&i!==null&&("name"in i&&i.name==="AbortError"||"message"in i&&String(i.message).includes("FetchRequestCanceledException"))}const B1=i=>{if(i instanceof Error)return i;if(typeof i=="object"&&i!==null){try{if(Object.prototype.toString.call(i)==="[object Error]"){const e=new Error(i.message,i.cause?{cause:i.cause}:{});return i.stack&&(e.stack=i.stack),i.cause&&!e.cause&&(e.cause=i.cause),i.name&&(e.name=i.name),e}}catch{}try{return new Error(JSON.stringify(i))}catch{}}return new Error(i)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gs extends Error{}class dr extends gs{constructor(e,n,o,u){super(`${dr.makeMessage(e,n,o)}`),this.status=e,this.headers=u,this.error=n}static makeMessage(e,n,o){const u=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):o;return e&&u?`${e} ${u}`:e?`${e} status code (no body)`:u||"(no status code or body)"}static generate(e,n,o,u){if(!e||!u)return new Wf({message:o,cause:B1(n)});const d=n;return e===400?new gw(e,d,o,u):e===401?new mw(e,d,o,u):e===403?new pw(e,d,o,u):e===404?new xw(e,d,o,u):e===409?new yw(e,d,o,u):e===422?new Ew(e,d,o,u):e===429?new _w(e,d,o,u):e>=500?new Aw(e,d,o,u):new dr(e,d,o,u)}}class k1 extends dr{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Wf extends dr{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class dw extends Wf{constructor({message:e}={}){super({message:e??"Request timed out."})}}class gw extends dr{}class mw extends dr{}class pw extends dr{}class xw extends dr{}class yw extends dr{}class Ew extends dr{}class _w extends dr{}class Aw extends dr{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const z6=/^[a-z][a-z0-9+.-]*:/i,H6=i=>z6.test(i);let U1=i=>(U1=Array.isArray,U1(i));const G6=U1;let q6=G6;const vE=q6;function Y6(i){if(!i)return!0;for(const e in i)return!1;return!0}function X6(i,e){return Object.prototype.hasOwnProperty.call(i,e)}const K6=(i,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new gs(`${i} must be an integer`);if(e<0)throw new gs(`${i} must be a positive integer`);return e},W6=i=>{try{return JSON.parse(i)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Q6=i=>new Promise(e=>setTimeout(e,i));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ul="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Z6(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const J6=()=>{var i,e,n,o,u;const d=Z6();if(d==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ul,"X-Stainless-OS":SE(Deno.build.os),"X-Stainless-Arch":CE(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(i=Deno.version)===null||i===void 0?void 0:i.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ul,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(d==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ul,"X-Stainless-OS":SE((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":CE((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(u=globalThis.process.version)!==null&&u!==void 0?u:"unknown"};const y=$6();return y?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ul,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${y.browser}`,"X-Stainless-Runtime-Version":y.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ul,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function $6(){if(typeof navigator>"u"||!navigator)return null;const i=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of i){const o=n.exec(navigator.userAgent);if(o){const u=o[1]||0,d=o[2]||0,y=o[3]||0;return{browser:e,version:`${u}.${d}.${y}`}}}return null}const CE=i=>i==="x32"?"x32":i==="x86_64"||i==="x64"?"x64":i==="arm"?"arm":i==="aarch64"||i==="arm64"?"arm64":i?`other:${i}`:"unknown",SE=i=>(i=i.toLowerCase(),i.includes("ios")?"iOS":i==="android"?"Android":i==="darwin"?"MacOS":i==="win32"?"Windows":i==="freebsd"?"FreeBSD":i==="openbsd"?"OpenBSD":i==="linux"?"Linux":i?`Other:${i}`:"Unknown");let Ph;const e8=()=>Ph??(Ph=J6());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function t8(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function ww(...i){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...i)}function n8(i){let e=Symbol.asyncIterator in i?i[Symbol.asyncIterator]():i[Symbol.iterator]();return ww({start(){},async pull(n){const{done:o,value:u}=await e.next();o?n.close():n.enqueue(u)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function bw(i){if(i[Symbol.asyncIterator])return i;const e=i.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function i8(i){var e,n;if(i===null||typeof i!="object")return;if(i[Symbol.asyncIterator]){await((n=(e=i[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const o=i.getReader(),u=o.cancel();o.releaseLock(),await u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const r8=({headers:i,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Tw=()=>{var i;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((i=e==null?void 0:e.versions)===null||i===void 0?void 0:i.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function s1(i,e,n){return Tw(),new File(i,e??"unknown_file",n)}function s8(i){return(typeof i=="object"&&i!==null&&("name"in i&&i.name&&String(i.name)||"url"in i&&i.url&&String(i.url)||"filename"in i&&i.filename&&String(i.filename)||"path"in i&&i.path&&String(i.path))||"").split(/[\\/]/).pop()||void 0}const a8=i=>i!=null&&typeof i=="object"&&typeof i[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vw=i=>i!=null&&typeof i=="object"&&typeof i.size=="number"&&typeof i.type=="string"&&typeof i.text=="function"&&typeof i.slice=="function"&&typeof i.arrayBuffer=="function",o8=i=>i!=null&&typeof i=="object"&&typeof i.name=="string"&&typeof i.lastModified=="number"&&vw(i),l8=i=>i!=null&&typeof i=="object"&&typeof i.url=="string"&&typeof i.blob=="function";async function c8(i,e,n){if(Tw(),i=await i,o8(i))return i instanceof File?i:s1([await i.arrayBuffer()],i.name);if(l8(i)){const u=await i.blob();return e||(e=new URL(i.url).pathname.split(/[\\/]/).pop()),s1(await V1(u),e,n)}const o=await V1(i);if(e||(e=s8(i)),!(n!=null&&n.type)){const u=o.find(d=>typeof d=="object"&&"type"in d&&d.type);typeof u=="string"&&(n=Object.assign(Object.assign({},n),{type:u}))}return s1(o,e,n)}async function V1(i){var e,n,o,u,d;let y=[];if(typeof i=="string"||ArrayBuffer.isView(i)||i instanceof ArrayBuffer)y.push(i);else if(vw(i))y.push(i instanceof Blob?i:await i.arrayBuffer());else if(a8(i))try{for(var v=!0,b=Gl(i),_;_=await b.next(),e=_.done,!e;v=!0){u=_.value,v=!1;const C=u;y.push(...await V1(C))}}catch(C){n={error:C}}finally{try{!v&&!e&&(o=b.return)&&await o.call(b)}finally{if(n)throw n.error}}else{const C=(d=i==null?void 0:i.constructor)===null||d===void 0?void 0:d.name;throw new Error(`Unexpected data type: ${typeof i}${C?`; constructor: ${C}`:""}${u8(i)}`)}return y}function u8(i){return typeof i!="object"||i===null?"":`; props: [${Object.getOwnPropertyNames(i).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cw{constructor(e){this._client=e}}Cw._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Sw(i){return i.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const IE=Object.freeze(Object.create(null)),h8=(i=Sw)=>(function(n,...o){if(n.length===1)return n[0];let u=!1;const d=[],y=n.reduce((C,I,L)=>{var B,q,K;/[?#]/.test(I)&&(u=!0);const Y=o[L];let ae=(u?encodeURIComponent:i)(""+Y);return L!==o.length&&(Y==null||typeof Y=="object"&&Y.toString===((K=Object.getPrototypeOf((q=Object.getPrototypeOf((B=Y.hasOwnProperty)!==null&&B!==void 0?B:IE))!==null&&q!==void 0?q:IE))===null||K===void 0?void 0:K.toString))&&(ae=Y+"",d.push({start:C.length+I.length,length:ae.length,error:`Value of type ${Object.prototype.toString.call(Y).slice(8,-1)} is not a valid path parameter`})),C+I+(L===o.length?"":ae)},""),v=y.split(/[?#]/,1)[0],b=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let _;for(;(_=b.exec(v))!==null;)d.push({start:_.index,length:_[0].length,error:`Value "${_[0]}" can't be safely passed as a path parameter`});if(d.sort((C,I)=>C.start-I.start),d.length>0){let C=0;const I=d.reduce((L,B)=>{const q=" ".repeat(B.start-C),K="^".repeat(B.length);return C=B.start+B.length,L+q+K},"");throw new gs(`Path parameters result in path with invalid segments:
${d.map(L=>L.error).join(`
`)}
${y}
${I}`)}return y}),Bh=h8(Sw);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Iw extends Cw{create(e,n){var o;const{api_version:u=this._client.apiVersion}=e,d=_f(e,["api_version"]);if("model"in d&&"agent_config"in d)throw new gs("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in d&&"generation_config"in d)throw new gs("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Bh`/${u}/interactions`,Object.assign(Object.assign({body:d},n),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,n={},o){const{api_version:u=this._client.apiVersion}=n??{};return this._client.delete(Bh`/${u}/interactions/${e}`,o)}cancel(e,n={},o){const{api_version:u=this._client.apiVersion}=n??{};return this._client.post(Bh`/${u}/interactions/${e}/cancel`,o)}get(e,n={},o){var u;const d=n??{},{api_version:y=this._client.apiVersion}=d,v=_f(d,["api_version"]);return this._client.get(Bh`/${y}/interactions/${e}`,Object.assign(Object.assign({query:v},o),{stream:(u=n==null?void 0:n.stream)!==null&&u!==void 0?u:!1}))}}Iw._key=Object.freeze(["interactions"]);class Nw extends Iw{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function f8(i){let e=0;for(const u of i)e+=u.length;const n=new Uint8Array(e);let o=0;for(const u of i)n.set(u,o),o+=u.length;return n}let kh;function kg(i){let e;return(kh??(e=new globalThis.TextEncoder,kh=e.encode.bind(e)))(i)}let Uh;function NE(i){let e;return(Uh??(e=new globalThis.TextDecoder,Uh=e.decode.bind(e)))(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qf{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?kg(e):e;this.buffer=f8([this.buffer,n]);const o=[];let u;for(;(u=d8(this.buffer,this.carriageReturnIndex))!=null;){if(u.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=u.index;continue}if(this.carriageReturnIndex!=null&&(u.index!==this.carriageReturnIndex+1||u.carriage)){o.push(NE(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const d=this.carriageReturnIndex!==null?u.preceding-1:u.preceding,y=NE(this.buffer.subarray(0,d));o.push(y),this.buffer=this.buffer.subarray(u.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}Qf.NEWLINE_CHARS=new Set([`
`,"\r"]);Qf.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function d8(i,e){for(let u=e??0;u<i.length;u++){if(i[u]===10)return{preceding:u,index:u+1,carriage:!1};if(i[u]===13)return{preceding:u,index:u+1,carriage:!0}}return null}function g8(i){for(let o=0;o<i.length-1;o++){if(i[o]===10&&i[o+1]===10||i[o]===13&&i[o+1]===13)return o+2;if(i[o]===13&&i[o+1]===10&&o+3<i.length&&i[o+2]===13&&i[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Af={off:0,error:200,warn:300,info:400,debug:500},RE=(i,e,n)=>{if(i){if(X6(Af,i))return i;fr(n).warn(`${e} was set to ${JSON.stringify(i)}, expected one of ${JSON.stringify(Object.keys(Af))}`)}};function Xc(){}function Vh(i,e,n){return!e||Af[i]>Af[n]?Xc:e[i].bind(e)}const m8={error:Xc,warn:Xc,info:Xc,debug:Xc};let OE=new WeakMap;function fr(i){var e;const n=i.logger,o=(e=i.logLevel)!==null&&e!==void 0?e:"off";if(!n)return m8;const u=OE.get(n);if(u&&u[0]===o)return u[1];const d={error:Vh("error",n,o),warn:Vh("warn",n,o),info:Vh("info",n,o),debug:Vh("debug",n,o)};return OE.set(n,[o,d]),d}const Go=i=>(i.options&&(i.options=Object.assign({},i.options),delete i.options.headers),i.headers&&(i.headers=Object.fromEntries((i.headers instanceof Headers?[...i.headers]:Object.entries(i.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in i&&(i.retryOfRequestLogID&&(i.retryOf=i.retryOfRequestLogID),delete i.retryOfRequestLogID),i);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vl{constructor(e,n,o){this.iterator=e,this.controller=n,this.client=o}static fromSSEResponse(e,n,o){let u=!1;const d=o?fr(o):console;function y(){return tu(this,arguments,function*(){var b,_,C,I;if(u)throw new gs("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");u=!0;let L=!1;try{try{for(var B=!0,q=Gl(p8(e,n)),K;K=yield Xn(q.next()),b=K.done,!b;B=!0){I=K.value,B=!1;const Y=I;if(!L)if(Y.data.startsWith("[DONE]")){L=!0;continue}else try{yield yield Xn(JSON.parse(Y.data))}catch(ae){throw d.error("Could not parse message into JSON:",Y.data),d.error("From chunk:",Y.raw),ae}}}catch(Y){_={error:Y}}finally{try{!B&&!b&&(C=q.return)&&(yield Xn(C.call(q)))}finally{if(_)throw _.error}}L=!0}catch(Y){if(P1(Y))return yield Xn(void 0);throw Y}finally{L||n.abort()}})}return new Vl(y,n,o)}static fromReadableStream(e,n,o){let u=!1;function d(){return tu(this,arguments,function*(){var b,_,C,I;const L=new Qf,B=bw(e);try{for(var q=!0,K=Gl(B),Y;Y=yield Xn(K.next()),b=Y.done,!b;q=!0){I=Y.value,q=!1;const ae=I;for(const me of L.decode(ae))yield yield Xn(me)}}catch(ae){_={error:ae}}finally{try{!q&&!b&&(C=K.return)&&(yield Xn(C.call(K)))}finally{if(_)throw _.error}}for(const ae of L.flush())yield yield Xn(ae)})}function y(){return tu(this,arguments,function*(){var b,_,C,I;if(u)throw new gs("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");u=!0;let L=!1;try{try{for(var B=!0,q=Gl(d()),K;K=yield Xn(q.next()),b=K.done,!b;B=!0){I=K.value,B=!1;const Y=I;L||Y&&(yield yield Xn(JSON.parse(Y)))}}catch(Y){_={error:Y}}finally{try{!B&&!b&&(C=q.return)&&(yield Xn(C.call(q)))}finally{if(_)throw _.error}}L=!0}catch(Y){if(P1(Y))return yield Xn(void 0);throw Y}finally{L||n.abort()}})}return new Vl(y,n,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],o=this.iterator(),u=d=>({next:()=>{if(d.length===0){const y=o.next();e.push(y),n.push(y)}return d.shift()}});return[new Vl(()=>u(e),this.controller,this.client),new Vl(()=>u(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return ww({async start(){n=e[Symbol.asyncIterator]()},async pull(o){try{const{value:u,done:d}=await n.next();if(d)return o.close();const y=kg(JSON.stringify(u)+`
`);o.enqueue(y)}catch(u){o.error(u)}},async cancel(){var o;await((o=n.return)===null||o===void 0?void 0:o.call(n))}})}}function p8(i,e){return tu(this,arguments,function*(){var o,u,d,y;if(!i.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new gs("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new gs("Attempted to iterate over a response with no body");const v=new y8,b=new Qf,_=bw(i.body);try{for(var C=!0,I=Gl(x8(_)),L;L=yield Xn(I.next()),o=L.done,!o;C=!0){y=L.value,C=!1;const B=y;for(const q of b.decode(B)){const K=v.decode(q);K&&(yield yield Xn(K))}}}catch(B){u={error:B}}finally{try{!C&&!o&&(d=I.return)&&(yield Xn(d.call(I)))}finally{if(u)throw u.error}}for(const B of b.flush()){const q=v.decode(B);q&&(yield yield Xn(q))}})}function x8(i){return tu(this,arguments,function*(){var n,o,u,d;let y=new Uint8Array;try{for(var v=!0,b=Gl(i),_;_=yield Xn(b.next()),n=_.done,!n;v=!0){d=_.value,v=!1;const C=d;if(C==null)continue;const I=C instanceof ArrayBuffer?new Uint8Array(C):typeof C=="string"?kg(C):C;let L=new Uint8Array(y.length+I.length);L.set(y),L.set(I,y.length),y=L;let B;for(;(B=g8(y))!==-1;)yield yield Xn(y.slice(0,B)),y=y.slice(B)}}catch(C){o={error:C}}finally{try{!v&&!n&&(u=b.return)&&(yield Xn(u.call(b)))}finally{if(o)throw o.error}}y.length>0&&(yield yield Xn(y))})}class y8{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const d={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],d}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,o,u]=E8(e,":");return u.startsWith(" ")&&(u=u.substring(1)),n==="event"?this.event=u:n==="data"&&this.data.push(u),null}}function E8(i,e){const n=i.indexOf(e);return n!==-1?[i.substring(0,n),e,i.substring(n+e.length)]:[i,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function _8(i,e){const{response:n,requestLogID:o,retryOfRequestLogID:u,startTime:d}=e,y=await(async()=>{var v;if(e.options.stream)return fr(i).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,i):Vl.fromSSEResponse(n,e.controller,i);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const b=n.headers.get("content-type"),_=(v=b==null?void 0:b.split(";")[0])===null||v===void 0?void 0:v.trim();return(_==null?void 0:_.includes("application/json"))||(_==null?void 0:_.endsWith("+json"))?await n.json():await n.text()})();return fr(i).debug(`[${o}] response parsed`,Go({retryOfRequestLogID:u,url:n.url,status:n.status,body:y,durationMs:Date.now()-d})),y}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ug extends Promise{constructor(e,n,o=_8){super(u=>{u(null)}),this.responsePromise=n,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new Ug(this.client,this.responsePromise,async(n,o)=>e(await this.parseResponse(n,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Rw=Symbol("brand.privateNullableHeaders");function*A8(i){if(!i)return;if(Rw in i){const{values:o,nulls:u}=i;yield*o.entries();for(const d of u)yield[d,null];return}let e=!1,n;i instanceof Headers?n=i.entries():vE(i)?n=i:(e=!0,n=Object.entries(i??{}));for(let o of n){const u=o[0];if(typeof u!="string")throw new TypeError("expected header name to be a string");const d=vE(o[1])?o[1]:[o[1]];let y=!1;for(const v of d)v!==void 0&&(e&&!y&&(y=!0,yield[u,null]),yield[u,v])}}const jc=i=>{const e=new Headers,n=new Set;for(const o of i){const u=new Set;for(const[d,y]of A8(o)){const v=d.toLowerCase();u.has(v)||(e.delete(d),u.add(v)),y===null?(e.delete(d),n.add(v)):(e.append(d,y),n.delete(v))}}return{[Rw]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const a1=i=>{var e,n,o,u,d,y;if(typeof globalThis.process<"u")return(o=(n=(e=j6)===null||e===void 0?void 0:e[i])===null||n===void 0?void 0:n.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(y=(d=(u=globalThis.Deno.env)===null||u===void 0?void 0:u.get)===null||d===void 0?void 0:d.call(u,i))===null||y===void 0?void 0:y.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ow;class Zf{constructor(e){var n,o,u,d,y,v,b,{baseURL:_=a1("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:C=(n=a1("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:I="v1beta"}=e,L=_f(e,["baseURL","apiKey","apiVersion"]);const B=Object.assign(Object.assign({apiKey:C,apiVersion:I},L),{baseURL:_||"https://generativelanguage.googleapis.com"});this.baseURL=B.baseURL,this.timeout=(o=B.timeout)!==null&&o!==void 0?o:Zf.DEFAULT_TIMEOUT,this.logger=(u=B.logger)!==null&&u!==void 0?u:console;const q="warn";this.logLevel=q,this.logLevel=(y=(d=RE(B.logLevel,"ClientOptions.logLevel",this))!==null&&d!==void 0?d:RE(a1("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&y!==void 0?y:q,this.fetchOptions=B.fetchOptions,this.maxRetries=(v=B.maxRetries)!==null&&v!==void 0?v:2,this.fetch=(b=B.fetch)!==null&&b!==void 0?b:t8(),this.encoder=r8,this._options=B,this.apiKey=C,this.apiVersion=I,this.clientAdapter=B.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=jc([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return jc([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return jc([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,o])=>typeof o<"u").map(([n,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(n)}=`;throw new gs(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Ul}`}defaultIdempotencyKey(){return`stainless-node-retry-${F6()}`}makeStatusError(e,n,o,u){return dr.generate(e,n,o,u)}buildURL(e,n,o){const u=!this.baseURLOverridden()&&o||this.baseURL,d=H6(e)?new URL(e):new URL(u+(u.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),y=this.defaultQuery();return Y6(y)||(n=Object.assign(Object.assign({},y),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(d.search=this.stringifyQuery(n)),d.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:o}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,o){return this.request(Promise.resolve(o).then(u=>Object.assign({method:e,path:n},u)))}request(e,n=null){return new Ug(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,o){var u,d,y;const v=await e,b=(u=v.maxRetries)!==null&&u!==void 0?u:this.maxRetries;n==null&&(n=b),await this.prepareOptions(v);const{req:_,url:C,timeout:I}=await this.buildRequest(v,{retryCount:b-n});await this.prepareRequest(_,{url:C,options:v});const L="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),B=o===void 0?"":`, retryOf: ${o}`,q=Date.now();if(fr(this).debug(`[${L}] sending request`,Go({retryOfRequestLogID:o,method:v.method,url:C,options:v,headers:_.headers})),!((d=v.signal)===null||d===void 0)&&d.aborted)throw new k1;const K=new AbortController,Y=await this.fetchWithTimeout(C,_,I,K).catch(B1),ae=Date.now();if(Y instanceof globalThis.Error){const $=`retrying, ${n} attempts remaining`;if(!((y=v.signal)===null||y===void 0)&&y.aborted)throw new k1;const _e=P1(Y)||/timed? ?out/i.test(String(Y)+("cause"in Y?String(Y.cause):""));if(n)return fr(this).info(`[${L}] connection ${_e?"timed out":"failed"} - ${$}`),fr(this).debug(`[${L}] connection ${_e?"timed out":"failed"} (${$})`,Go({retryOfRequestLogID:o,url:C,durationMs:ae-q,message:Y.message})),this.retryRequest(v,n,o??L);throw fr(this).info(`[${L}] connection ${_e?"timed out":"failed"} - error; no more retries left`),fr(this).debug(`[${L}] connection ${_e?"timed out":"failed"} (error; no more retries left)`,Go({retryOfRequestLogID:o,url:C,durationMs:ae-q,message:Y.message})),_e?new dw:new Wf({cause:Y})}const me=`[${L}${B}] ${_.method} ${C} ${Y.ok?"succeeded":"failed"} with status ${Y.status} in ${ae-q}ms`;if(!Y.ok){const $=await this.shouldRetry(Y);if(n&&$){const V=`retrying, ${n} attempts remaining`;return await i8(Y.body),fr(this).info(`${me} - ${V}`),fr(this).debug(`[${L}] response error (${V})`,Go({retryOfRequestLogID:o,url:Y.url,status:Y.status,headers:Y.headers,durationMs:ae-q})),this.retryRequest(v,n,o??L,Y.headers)}const _e=$?"error; no more retries left":"error; not retryable";fr(this).info(`${me} - ${_e}`);const je=await Y.text().catch(V=>B1(V).message),De=W6(je),j=De?void 0:je;throw fr(this).debug(`[${L}] response error (${_e})`,Go({retryOfRequestLogID:o,url:Y.url,status:Y.status,headers:Y.headers,message:j,durationMs:Date.now()-q})),this.makeStatusError(Y.status,De,j,Y.headers)}return fr(this).info(me),fr(this).debug(`[${L}] response start`,Go({retryOfRequestLogID:o,url:Y.url,status:Y.status,headers:Y.headers,durationMs:ae-q})),{response:Y,options:v,controller:K,requestLogID:L,retryOfRequestLogID:o,startTime:q}}async fetchWithTimeout(e,n,o,u){const d=n||{},{signal:y,method:v}=d,b=_f(d,["signal","method"]);y&&y.addEventListener("abort",()=>u.abort());const _=setTimeout(()=>u.abort(),o),C=globalThis.ReadableStream&&b.body instanceof globalThis.ReadableStream||typeof b.body=="object"&&b.body!==null&&Symbol.asyncIterator in b.body,I=Object.assign(Object.assign(Object.assign({signal:u.signal},C?{duplex:"half"}:{}),{method:"GET"}),b);v&&(I.method=v.toUpperCase());try{return await this.fetch.call(void 0,e,I)}finally{clearTimeout(_)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,o,u){var d;let y;const v=u==null?void 0:u.get("retry-after-ms");if(v){const _=parseFloat(v);Number.isNaN(_)||(y=_)}const b=u==null?void 0:u.get("retry-after");if(b&&!y){const _=parseFloat(b);Number.isNaN(_)?y=Date.parse(b)-Date.now():y=_*1e3}if(!(y&&0<=y&&y<60*1e3)){const _=(d=e.maxRetries)!==null&&d!==void 0?d:this.maxRetries;y=this.calculateDefaultRetryTimeoutMillis(n,_)}return await Q6(y),this.makeRequest(e,n-1,o)}calculateDefaultRetryTimeoutMillis(e,n){const d=n-e,y=Math.min(.5*Math.pow(2,d),8),v=1-Math.random()*.25;return y*v*1e3}async buildRequest(e,{retryCount:n=0}={}){var o,u,d;const y=Object.assign({},e),{method:v,path:b,query:_,defaultBaseURL:C}=y,I=this.buildURL(b,_,C);"timeout"in y&&K6("timeout",y.timeout),y.timeout=(o=y.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:L,body:B}=this.buildBody({options:y}),q=await this.buildHeaders({options:e,method:v,bodyHeaders:L,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:v,headers:q},y.signal&&{signal:y.signal}),globalThis.ReadableStream&&B instanceof globalThis.ReadableStream&&{duplex:"half"}),B&&{body:B}),(u=this.fetchOptions)!==null&&u!==void 0?u:{}),(d=y.fetchOptions)!==null&&d!==void 0?d:{}),url:I,timeout:y.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:o,retryCount:u}){let d={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),d[this.idempotencyHeader]=e.idempotencyKey);const y=await this.authHeaders(e);let v=jc([d,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(u)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),e8()),this._options.defaultHeaders,o,e.headers,y]);return this.validateHeaders(v),v.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=jc([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:n8(e)}:this.encoder({body:e,headers:o})}}Zf.DEFAULT_TIMEOUT=6e4;class Fi extends Zf{constructor(){super(...arguments),this.interactions=new Nw(this)}}Ow=Fi;Fi.GeminiNextGenAPIClient=Ow;Fi.GeminiNextGenAPIClientError=gs;Fi.APIError=dr;Fi.APIConnectionError=Wf;Fi.APIConnectionTimeoutError=dw;Fi.APIUserAbortError=k1;Fi.NotFoundError=xw;Fi.ConflictError=yw;Fi.RateLimitError=_w;Fi.BadRequestError=gw;Fi.AuthenticationError=mw;Fi.InternalServerError=Aw;Fi.PermissionDeniedError=pw;Fi.UnprocessableEntityError=Ew;Fi.toFile=c8;Fi.Interactions=Nw;const w8=()=>null,b8=async(i,e)=>{try{const n=w8();if(!n)throw new Error("API Key not found");return(await n.models.generateContent({model:"gemini-2.0-flash-exp",contents:`
        
        
        - ${i.name}
        - ${e.name}
        - ${i.points}
        - ${i.totalEarned}

        30-50
        
      `})).text()||""}catch(n){return console.error("Gemini Error:",n),""}},Dw=se.createContext(void 0),bu=()=>{const i=se.useContext(Dw);if(!i)throw new Error("useAlert must be used within an AlertProvider");return i},T8=({children:i})=>{const[e,n]=se.useState(null),o=(d,y="info")=>{n({message:d,type:y})},u=()=>{n(null)};return S.jsxs(Dw.Provider,{value:{showAlert:o,hideAlert:u},children:[i,e&&S.jsx(v8,{message:e.message,type:e.type,onClose:u})]})},v8=({message:i,type:e,onClose:n})=>{const o={success:S.jsx(Zh,{className:"text-emerald-500",size:32}),error:S.jsx(h_,{className:"text-rose-500",size:32}),info:S.jsx(Cv,{className:"text-indigo-500",size:32})},u={success:"bg-emerald-50",error:"bg-rose-50",info:"bg-indigo-50"};return S.jsx("div",{className:"fixed inset-0 z-[999] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:S.jsx("div",{className:"bg-white rounded-[2.5rem] max-w-sm w-full p-8 shadow-2xl animate-in zoom-in-95 duration-200 border border-slate-100",children:S.jsxs("div",{className:"flex flex-col items-center text-center",children:[S.jsx("div",{className:`${u[e]} p-4 rounded-2xl mb-6`,children:o[e]}),S.jsx("h3",{className:"text-xl font-black text-slate-800 mb-2",children:""}),S.jsx("p",{className:"text-slate-500 font-bold leading-relaxed mb-8",children:i}),S.jsx("button",{onClick:n,className:"w-full bg-slate-900 hover:bg-slate-800 text-white font-black py-4 rounded-2xl transition-all active:scale-95 shadow-lg shadow-slate-200",children:""})]})})})},C8=({user:i,rank:e,onUserUpdate:n})=>{const{showAlert:o}=bu(),[u,d]=se.useState("..."),[y,v]=se.useState([]),[b,_]=se.useState([]),[C,I]=se.useState(null),[L,B]=se.useState(new Set),q=Wo[Wo.indexOf(e)+1]||null,K=q?Math.min(100,(i.totalEarned-e.threshold)/(q.threshold-e.threshold)*100):100;se.useEffect(()=>{(async()=>{const _e=await b8(i,e);d(_e)})();const me=lw(async _e=>{const je=_e.filter(j=>j.isActive);v(je);const De=new Set;for(const j of je)await sw(i.id,j.id)&&De.add(j.id);B(De)}),$=aw(_e=>{const je=new Date;je.setHours(0,0,0,0),_(_e.filter(De=>De.userId===i.id&&De.timestamp>=je.getTime()))});return()=>{me(),$()}},[i.id,e]);const Y=async ae=>{if(C)return;if(ae.deadline&&ae.deadline<Date.now()){o("","error");return}if(b.some($=>$.missionId===ae.id&&$.status==="pending")){o("","info");return}I(ae.id);try{await S6({id:`sub_${Date.now()}`,userId:i.id,userName:i.name,missionId:ae.id,missionTitle:ae.title,points:ae.points,timestamp:Date.now(),status:"pending"}),o("","success")}catch($){console.error("Error submitting mission:",$),o("","error")}finally{I(null)}};return S.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-10",children:[S.jsxs("header",{className:"flex flex-col md:flex-row md:items-start justify-between gap-4",children:[S.jsxs("div",{children:[S.jsxs("h1",{className:"text-3xl font-black text-slate-800 tracking-tight",children:["",i.name,""]}),S.jsxs("p",{className:"text-slate-500 mt-1 italic max-w-xl font-medium",children:['"',u,'"']})]}),S.jsxs("div",{className:"bg-amber-50 border border-amber-100 rounded-2xl px-5 py-3 flex items-center gap-3 self-end md:self-start shadow-sm",children:[S.jsx("div",{className:"bg-amber-500 p-2 rounded-xl text-white shadow-lg shadow-amber-200",children:S.jsx(Dv,{size:20})}),S.jsxs("div",{children:[S.jsx("p",{className:"text-[10px] text-amber-700 font-black uppercase tracking-widest",children:""}),S.jsxs("p",{className:"text-2xl font-black text-amber-900 leading-none",children:[i.totalEarned.toLocaleString()," ",S.jsx("span",{className:"text-xs font-bold opacity-60",children:"PTS"})]})]})]})]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[S.jsxs("div",{className:"md:col-span-2 bg-white rounded-[2.5rem] p-10 border border-slate-100 shadow-xl shadow-slate-200/40 relative overflow-hidden",children:[S.jsxs("div",{className:"flex items-center justify-between mb-12",children:[S.jsxs("div",{children:[S.jsx("h3",{className:"text-slate-400 text-[10px] font-black uppercase tracking-[0.2em] mb-2",children:""}),S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx("span",{className:"text-4xl filter drop-shadow-md",children:e.icon}),S.jsx("span",{className:`text-2xl font-black px-6 py-2 rounded-2xl text-white ${e.color} shadow-xl shadow-indigo-100 border-2 border-white/20`,children:e.name})]})]}),q&&S.jsxs("div",{className:"text-right",children:[S.jsx("h3",{className:"text-slate-400 text-[10px] font-black uppercase tracking-[0.2em] mb-2",children:""}),S.jsxs("div",{className:"flex items-center gap-3 justify-end group",children:[S.jsx("span",{className:"text-lg font-black text-slate-700 group-hover:text-indigo-600 transition-colors",children:q.name}),S.jsx("span",{className:"text-2xl animate-bounce",children:q.icon})]})]})]}),S.jsxs("div",{className:"relative pt-12 pb-6 px-2",children:[S.jsx("div",{className:"h-5 bg-slate-100 rounded-full w-full overflow-hidden border border-slate-200 shadow-inner p-1",children:S.jsx("div",{className:`h-full ${e.color} transition-all duration-1000 ease-out rounded-full relative overflow-hidden`,style:{width:`${K}%`},children:S.jsx("div",{className:"absolute inset-0 bg-white/20 animate-pulse"})})}),S.jsx("div",{className:"absolute top-0 transition-all duration-1000 ease-out",style:{left:`calc(${K}% - 30px)`},children:S.jsxs("div",{className:"relative group cursor-pointer",children:[S.jsx("div",{className:"p-1.5 bg-white rounded-full shadow-2xl border border-slate-50 transition-transform group-hover:scale-110 active:scale-95",children:S.jsx("img",{src:i.avatar,className:`w-14 h-14 rounded-full border-4 border-opacity-30 object-cover ${e.color.replace("bg-","border-")}`,alt:"me"})}),S.jsxs("div",{className:`absolute -top-10 left-1/2 -translate-x-1/2 px-3 py-1 rounded-xl text-[11px] font-black text-white shadow-xl ${e.color} whitespace-nowrap`,children:[" ",Math.round(K),"%"]})]})})]}),S.jsx("p",{className:"text-center text-xs text-slate-400 font-bold mt-8 tracking-wide",children:q?`${q.name} ${q.threshold-i.totalEarned} `:""})]}),S.jsxs("div",{className:"bg-gradient-to-br from-indigo-600 via-indigo-700 to-indigo-900 rounded-[2.5rem] p-10 text-white shadow-2xl shadow-indigo-300 flex flex-col justify-center items-center text-center relative overflow-hidden",children:[S.jsx("div",{className:"absolute -top-10 -right-10 w-40 h-40 bg-white/10 rounded-full blur-3xl"}),S.jsx("div",{className:"absolute -bottom-10 -left-10 w-40 h-40 bg-indigo-500/20 rounded-full blur-3xl"}),S.jsx("div",{className:"w-20 h-20 bg-white/20 backdrop-blur-xl rounded-[2rem] flex items-center justify-center mb-6 border border-white/20 shadow-xl",children:S.jsx(rC,{size:40,className:"text-white drop-shadow-md"})}),S.jsx("h3",{className:"text-indigo-200 text-sm font-black mb-1 uppercase tracking-widest",children:""}),S.jsx("p",{className:"text-6xl font-black mb-4 drop-shadow-lg",children:i.points.toLocaleString()}),S.jsx("div",{className:"px-5 py-1.5 bg-indigo-500/40 backdrop-blur rounded-full text-[10px] font-black tracking-[0.2em] uppercase border border-white/10",children:"SHOPPING POWER"})]})]}),S.jsxs("section",{className:"mt-16",children:[S.jsxs("div",{className:"flex items-center justify-between mb-8",children:[S.jsxs("h2",{className:"text-2xl font-black text-slate-800 flex items-center gap-3",children:[S.jsx(Wc,{className:"text-indigo-500",size:28}),""]}),S.jsx("div",{className:"flex items-center gap-4 text-xs font-bold text-slate-400",children:S.jsxs("span",{className:"flex items-center gap-1",children:[S.jsx(Jv,{size:12,className:"text-amber-500"})," "]})})]}),S.jsx("div",{className:"grid grid-cols-1 gap-6",children:y.map(ae=>{const me=L.has(ae.id);return S.jsx("div",{className:`bg-white border-2 border-slate-50 p-8 rounded-[2.5rem] transition-all group relative overflow-hidden ${me?"opacity-60 grayscale":"shadow-sm hover:shadow-xl"} ${ae.id===C?"animate-pulse":""}`,children:S.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-8",children:[S.jsxs("div",{className:"flex gap-8 items-start",children:[S.jsx("div",{className:`w-20 h-20 rounded-3xl flex items-center justify-center shrink-0 shadow-inner ${ae.type==="normal"?"bg-emerald-50 text-emerald-600":ae.type==="challenge"?"bg-orange-50 text-orange-600":"bg-rose-50 text-rose-600"}`,children:me?S.jsx(Zh,{size:36}):ae.type==="normal"?S.jsx(Wc,{size:36}):ae.type==="challenge"?S.jsx(Ev,{size:36}):S.jsx(aC,{size:36})}),S.jsxs("div",{children:[S.jsx("div",{className:"flex items-center gap-3 mb-2",children:S.jsx("span",{className:`px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-widest ${ae.type==="normal"?"bg-emerald-100 text-emerald-700":ae.type==="challenge"?"bg-orange-100 text-orange-700":"bg-rose-100 text-rose-700"}`,children:ae.type==="normal"?"":ae.type==="challenge"?"":""})}),S.jsx("h3",{className:"text-2xl font-black text-slate-800 transition-colors",children:ae.title}),S.jsx("p",{className:"text-slate-500 mt-2 leading-relaxed text-lg font-medium max-w-2xl",children:ae.description}),ae.deadline&&S.jsxs("div",{className:`mt-3 flex items-center gap-2 text-sm font-black ${ae.deadline<Date.now()?"text-rose-500":"text-amber-500"}`,children:[S.jsx(Jh,{size:16}),ae.deadline<Date.now()?"":` ${new Date(ae.deadline).toLocaleString()}`]})]})]}),S.jsxs("div",{className:"flex flex-col md:items-end gap-6 shrink-0",children:[S.jsxs("div",{className:"flex flex-col items-end",children:[S.jsx("span",{className:"text-xs font-bold text-slate-400 mb-1 uppercase tracking-tighter",children:""}),S.jsxs("div",{className:"flex items-baseline gap-2",children:[S.jsx("span",{className:"text-4xl font-black text-indigo-600 tracking-tighter",children:ae.points}),S.jsx("span",{className:"text-sm font-bold text-slate-400",children:"PTS"})]})]}),S.jsxs("button",{onClick:()=>Y(ae),disabled:C!==null||me||b.some($=>$.missionId===ae.id&&$.status==="pending")||ae.deadline!==void 0&&ae.deadline<Date.now(),className:`px-10 py-5 rounded-2xl font-black transition-all flex items-center gap-3 shadow-xl ${me?"bg-slate-200 text-slate-500 cursor-not-allowed shadow-none":b.some($=>$.missionId===ae.id&&$.status==="pending")?"bg-amber-100 text-amber-600 cursor-not-allowed shadow-none":ae.deadline!==void 0&&ae.deadline<Date.now()?"bg-slate-200 text-slate-400 cursor-not-allowed shadow-none":ae.type==="normal"?"bg-emerald-600 hover:bg-emerald-700 shadow-emerald-100":ae.type==="challenge"?"bg-orange-600 hover:bg-orange-700 shadow-orange-100":"bg-rose-600 hover:bg-rose-700 shadow-rose-100"} text-white text-lg active:scale-95 disabled:active:scale-100`,children:[me?"":b.some($=>$.missionId===ae.id&&$.status==="pending")?"":ae.deadline!==void 0&&ae.deadline<Date.now()?"":C===ae.id?"...":"",!me&&!b.some($=>$.missionId===ae.id&&$.status==="pending")&&(!ae.deadline||ae.deadline>=Date.now())&&S.jsx(uv,{size:20})]})]})]})},ae.id)})})]})]})},S8=({user:i,onUserUpdate:e})=>{const{showAlert:n}=bu(),[o,u]=se.useState(null),[d,y]=se.useState("all"),[v,b]=se.useState([]),[_,C]=se.useState([]);se.useEffect(()=>{const B=cw(K=>{b(K)}),q=rw(K=>{C(K)});return()=>{B(),q()}},[]);const I=v.filter(B=>d==="all"||B.category===d),L=async()=>{if(i.role==="GUEST"){n("","info");return}if(!o||i.points<o.price||o.stock<=0)return;const B={id:`red_${Date.now()}`,userId:i.id,productId:o.id,productName:o.name,pointsSpent:o.price,timestamp:Date.now(),status:"pending",qrCodeData:`AUTH_WORKSHOP_${Date.now()}_${o.id}`},q={...i,points:i.points-o.price};await x6(B),await Wh(q),await ow(o.id,1),e(),u(null),n("  QR Code","success")};return S.jsxs("div",{className:"space-y-8 pb-20",children:[S.jsxs("header",{children:[S.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:""}),S.jsx("p",{className:"text-slate-500 mt-1",children:""})]}),S.jsxs("div",{className:"flex flex-wrap gap-2",children:[S.jsx("button",{onClick:()=>y("all"),className:`px-6 py-2.5 rounded-2xl text-sm font-bold transition-all ${d==="all"?"bg-indigo-600 text-white shadow-lg shadow-indigo-100":"bg-white text-slate-600 border border-slate-200 hover:border-indigo-300"}`,children:""}),_.map(B=>S.jsx("button",{onClick:()=>y(B.name),className:`px-6 py-2.5 rounded-2xl text-sm font-bold transition-all ${d===B.name?"bg-indigo-600 text-white shadow-lg shadow-indigo-100":"bg-white text-slate-600 border border-slate-200 hover:border-indigo-300"}`,children:B.name},B.id))]}),S.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:I.map(B=>{const q=i.points>=B.price,K=B.stock<=0;return S.jsxs("div",{className:`bg-white rounded-[2rem] border border-slate-100 overflow-hidden shadow-sm hover:shadow-2xl transition-all flex flex-col group ${K?"opacity-75 grayscale-[0.5]":""}`,children:[S.jsxs("div",{className:"relative h-56 overflow-hidden",children:[S.jsx("img",{src:B.imageUrl,alt:B.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700"}),S.jsx("div",{className:"absolute top-5 left-5",children:S.jsx("span",{className:"bg-white/90 backdrop-blur text-indigo-600 text-[10px] px-3 py-1.5 rounded-full font-black tracking-widest shadow-sm",children:B.category.toUpperCase()})}),K&&S.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:S.jsx("span",{className:"text-white font-black text-2xl rotate-12 border-4 border-white px-4 py-1",children:"SOLD OUT"})})]}),S.jsxs("div",{className:"p-8 flex flex-col flex-1",children:[S.jsx("div",{className:"flex justify-between items-start mb-2",children:S.jsx("h3",{className:"font-black text-xl text-slate-800 leading-tight",children:B.name})}),S.jsx("p",{className:"text-slate-500 text-sm mb-6 flex-1 leading-relaxed",children:B.description}),S.jsxs("div",{className:"flex items-center gap-2 mb-6 text-slate-400 text-xs font-bold",children:[S.jsx(c1,{size:14}),S.jsxs("span",{children:["",S.jsxs("span",{className:B.stock<=5?"text-red-500":"text-slate-600",children:[B.stock," "]})]})]}),S.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[S.jsxs("div",{className:"flex items-center gap-1 text-indigo-600",children:[S.jsx("span",{className:"text-2xl font-black",children:B.price.toLocaleString()}),S.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-tighter",children:"pts"})]}),S.jsx("button",{onClick:()=>u(B),disabled:!q||K,className:`px-6 py-3 rounded-2xl font-black text-sm transition-all shadow-md ${K?"bg-slate-100 text-slate-400 cursor-not-allowed shadow-none":q?"bg-indigo-600 text-white hover:bg-indigo-700 hover:shadow-indigo-200 active:scale-95":"bg-slate-100 text-slate-400 cursor-not-allowed shadow-none"}`,children:K?"":""})]})]})]},B.id)})}),o&&S.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:S.jsxs("div",{className:"bg-white rounded-[2.5rem] max-w-md w-full p-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[S.jsxs("div",{className:"flex justify-between items-start mb-8",children:[S.jsx("div",{className:"bg-indigo-50 p-4 rounded-2xl text-indigo-600",children:S.jsx(Wv,{size:28})}),S.jsx("button",{onClick:()=>u(null),className:"text-slate-400 hover:text-slate-600 bg-slate-50 p-2 rounded-full",children:S.jsx(Yo,{size:24})})]}),S.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-2",children:""}),S.jsxs("p",{className:"text-slate-500 mb-8 leading-relaxed",children:[" ",S.jsxs("span",{className:"font-black text-indigo-600",children:[o.price," "]}),"  ",S.jsxs("span",{className:"font-black text-slate-800",children:["",o.name,""]})," "]}),S.jsxs("div",{className:"bg-slate-50 rounded-[1.5rem] p-6 mb-8 border border-slate-100",children:[S.jsxs("div",{className:"flex justify-between text-sm mb-3",children:[S.jsx("span",{className:"text-slate-500 font-medium",children:""}),S.jsx("span",{className:"font-bold text-slate-800",children:i.points.toLocaleString()})]}),S.jsxs("div",{className:"flex justify-between text-sm mb-5",children:[S.jsx("span",{className:"text-slate-500 font-medium",children:""}),S.jsxs("span",{className:"font-bold text-red-500",children:["-",o.price.toLocaleString()]})]}),S.jsxs("div",{className:"border-t border-slate-200 pt-5 flex justify-between",children:[S.jsx("span",{className:"font-black text-slate-700 text-lg",children:""}),S.jsx("span",{className:"font-black text-indigo-600 text-2xl",children:(i.points-o.price).toLocaleString()})]})]}),S.jsxs("div",{className:"flex flex-col gap-3",children:[S.jsxs("button",{onClick:L,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-5 rounded-[1.25rem] transition-all shadow-xl shadow-indigo-100 flex items-center justify-center gap-3 text-lg",children:[S.jsx(Fc,{size:24}),""]}),S.jsx("button",{onClick:()=>u(null),className:"w-full bg-white border border-slate-200 text-slate-600 font-black py-4 rounded-[1.25rem] hover:bg-slate-50 transition-all",children:""})]})]})})]})};var I8=Object.defineProperty,wf=Object.getOwnPropertySymbols,Mw=Object.prototype.hasOwnProperty,Lw=Object.prototype.propertyIsEnumerable,DE=(i,e,n)=>e in i?I8(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n,j1=(i,e)=>{for(var n in e||(e={}))Mw.call(e,n)&&DE(i,n,e[n]);if(wf)for(var n of wf(e))Lw.call(e,n)&&DE(i,n,e[n]);return i},F1=(i,e)=>{var n={};for(var o in i)Mw.call(i,o)&&e.indexOf(o)<0&&(n[o]=i[o]);if(i!=null&&wf)for(var o of wf(i))e.indexOf(o)<0&&Lw.call(i,o)&&(n[o]=i[o]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Jo;(i=>{const e=class Bt{constructor(b,_,C,I){if(this.version=b,this.errorCorrectionLevel=_,this.modules=[],this.isFunction=[],b<Bt.MIN_VERSION||b>Bt.MAX_VERSION)throw new RangeError("Version value out of range");if(I<-1||I>7)throw new RangeError("Mask value out of range");this.size=b*4+17;let L=[];for(let q=0;q<this.size;q++)L.push(!1);for(let q=0;q<this.size;q++)this.modules.push(L.slice()),this.isFunction.push(L.slice());this.drawFunctionPatterns();const B=this.addEccAndInterleave(C);if(this.drawCodewords(B),I==-1){let q=1e9;for(let K=0;K<8;K++){this.applyMask(K),this.drawFormatBits(K);const Y=this.getPenaltyScore();Y<q&&(I=K,q=Y),this.applyMask(K)}}u(0<=I&&I<=7),this.mask=I,this.applyMask(I),this.drawFormatBits(I),this.isFunction=[]}static encodeText(b,_){const C=i.QrSegment.makeSegments(b);return Bt.encodeSegments(C,_)}static encodeBinary(b,_){const C=i.QrSegment.makeBytes(b);return Bt.encodeSegments([C],_)}static encodeSegments(b,_,C=1,I=40,L=-1,B=!0){if(!(Bt.MIN_VERSION<=C&&C<=I&&I<=Bt.MAX_VERSION)||L<-1||L>7)throw new RangeError("Invalid value");let q,K;for(q=C;;q++){const $=Bt.getNumDataCodewords(q,_)*8,_e=y.getTotalBits(b,q);if(_e<=$){K=_e;break}if(q>=I)throw new RangeError("Data too long")}for(const $ of[Bt.Ecc.MEDIUM,Bt.Ecc.QUARTILE,Bt.Ecc.HIGH])B&&K<=Bt.getNumDataCodewords(q,$)*8&&(_=$);let Y=[];for(const $ of b){n($.mode.modeBits,4,Y),n($.numChars,$.mode.numCharCountBits(q),Y);for(const _e of $.getData())Y.push(_e)}u(Y.length==K);const ae=Bt.getNumDataCodewords(q,_)*8;u(Y.length<=ae),n(0,Math.min(4,ae-Y.length),Y),n(0,(8-Y.length%8)%8,Y),u(Y.length%8==0);for(let $=236;Y.length<ae;$^=253)n($,8,Y);let me=[];for(;me.length*8<Y.length;)me.push(0);return Y.forEach(($,_e)=>me[_e>>>3]|=$<<7-(_e&7)),new Bt(q,_,me,L)}getModule(b,_){return 0<=b&&b<this.size&&0<=_&&_<this.size&&this.modules[_][b]}getModules(){return this.modules}drawFunctionPatterns(){for(let C=0;C<this.size;C++)this.setFunctionModule(6,C,C%2==0),this.setFunctionModule(C,6,C%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const b=this.getAlignmentPatternPositions(),_=b.length;for(let C=0;C<_;C++)for(let I=0;I<_;I++)C==0&&I==0||C==0&&I==_-1||C==_-1&&I==0||this.drawAlignmentPattern(b[C],b[I]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(b){const _=this.errorCorrectionLevel.formatBits<<3|b;let C=_;for(let L=0;L<10;L++)C=C<<1^(C>>>9)*1335;const I=(_<<10|C)^21522;u(I>>>15==0);for(let L=0;L<=5;L++)this.setFunctionModule(8,L,o(I,L));this.setFunctionModule(8,7,o(I,6)),this.setFunctionModule(8,8,o(I,7)),this.setFunctionModule(7,8,o(I,8));for(let L=9;L<15;L++)this.setFunctionModule(14-L,8,o(I,L));for(let L=0;L<8;L++)this.setFunctionModule(this.size-1-L,8,o(I,L));for(let L=8;L<15;L++)this.setFunctionModule(8,this.size-15+L,o(I,L));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let b=this.version;for(let C=0;C<12;C++)b=b<<1^(b>>>11)*7973;const _=this.version<<12|b;u(_>>>18==0);for(let C=0;C<18;C++){const I=o(_,C),L=this.size-11+C%3,B=Math.floor(C/3);this.setFunctionModule(L,B,I),this.setFunctionModule(B,L,I)}}drawFinderPattern(b,_){for(let C=-4;C<=4;C++)for(let I=-4;I<=4;I++){const L=Math.max(Math.abs(I),Math.abs(C)),B=b+I,q=_+C;0<=B&&B<this.size&&0<=q&&q<this.size&&this.setFunctionModule(B,q,L!=2&&L!=4)}}drawAlignmentPattern(b,_){for(let C=-2;C<=2;C++)for(let I=-2;I<=2;I++)this.setFunctionModule(b+I,_+C,Math.max(Math.abs(I),Math.abs(C))!=1)}setFunctionModule(b,_,C){this.modules[_][b]=C,this.isFunction[_][b]=!0}addEccAndInterleave(b){const _=this.version,C=this.errorCorrectionLevel;if(b.length!=Bt.getNumDataCodewords(_,C))throw new RangeError("Invalid argument");const I=Bt.NUM_ERROR_CORRECTION_BLOCKS[C.ordinal][_],L=Bt.ECC_CODEWORDS_PER_BLOCK[C.ordinal][_],B=Math.floor(Bt.getNumRawDataModules(_)/8),q=I-B%I,K=Math.floor(B/I);let Y=[];const ae=Bt.reedSolomonComputeDivisor(L);for(let $=0,_e=0;$<I;$++){let je=b.slice(_e,_e+K-L+($<q?0:1));_e+=je.length;const De=Bt.reedSolomonComputeRemainder(je,ae);$<q&&je.push(0),Y.push(je.concat(De))}let me=[];for(let $=0;$<Y[0].length;$++)Y.forEach((_e,je)=>{($!=K-L||je>=q)&&me.push(_e[$])});return u(me.length==B),me}drawCodewords(b){if(b.length!=Math.floor(Bt.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let _=0;for(let C=this.size-1;C>=1;C-=2){C==6&&(C=5);for(let I=0;I<this.size;I++)for(let L=0;L<2;L++){const B=C-L,K=(C+1&2)==0?this.size-1-I:I;!this.isFunction[K][B]&&_<b.length*8&&(this.modules[K][B]=o(b[_>>>3],7-(_&7)),_++)}}u(_==b.length*8)}applyMask(b){if(b<0||b>7)throw new RangeError("Mask value out of range");for(let _=0;_<this.size;_++)for(let C=0;C<this.size;C++){let I;switch(b){case 0:I=(C+_)%2==0;break;case 1:I=_%2==0;break;case 2:I=C%3==0;break;case 3:I=(C+_)%3==0;break;case 4:I=(Math.floor(C/3)+Math.floor(_/2))%2==0;break;case 5:I=C*_%2+C*_%3==0;break;case 6:I=(C*_%2+C*_%3)%2==0;break;case 7:I=((C+_)%2+C*_%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[_][C]&&I&&(this.modules[_][C]=!this.modules[_][C])}}getPenaltyScore(){let b=0;for(let L=0;L<this.size;L++){let B=!1,q=0,K=[0,0,0,0,0,0,0];for(let Y=0;Y<this.size;Y++)this.modules[L][Y]==B?(q++,q==5?b+=Bt.PENALTY_N1:q>5&&b++):(this.finderPenaltyAddHistory(q,K),B||(b+=this.finderPenaltyCountPatterns(K)*Bt.PENALTY_N3),B=this.modules[L][Y],q=1);b+=this.finderPenaltyTerminateAndCount(B,q,K)*Bt.PENALTY_N3}for(let L=0;L<this.size;L++){let B=!1,q=0,K=[0,0,0,0,0,0,0];for(let Y=0;Y<this.size;Y++)this.modules[Y][L]==B?(q++,q==5?b+=Bt.PENALTY_N1:q>5&&b++):(this.finderPenaltyAddHistory(q,K),B||(b+=this.finderPenaltyCountPatterns(K)*Bt.PENALTY_N3),B=this.modules[Y][L],q=1);b+=this.finderPenaltyTerminateAndCount(B,q,K)*Bt.PENALTY_N3}for(let L=0;L<this.size-1;L++)for(let B=0;B<this.size-1;B++){const q=this.modules[L][B];q==this.modules[L][B+1]&&q==this.modules[L+1][B]&&q==this.modules[L+1][B+1]&&(b+=Bt.PENALTY_N2)}let _=0;for(const L of this.modules)_=L.reduce((B,q)=>B+(q?1:0),_);const C=this.size*this.size,I=Math.ceil(Math.abs(_*20-C*10)/C)-1;return u(0<=I&&I<=9),b+=I*Bt.PENALTY_N4,u(0<=b&&b<=2568888),b}getAlignmentPatternPositions(){if(this.version==1)return[];{const b=Math.floor(this.version/7)+2,_=this.version==32?26:Math.ceil((this.version*4+4)/(b*2-2))*2;let C=[6];for(let I=this.size-7;C.length<b;I-=_)C.splice(1,0,I);return C}}static getNumRawDataModules(b){if(b<Bt.MIN_VERSION||b>Bt.MAX_VERSION)throw new RangeError("Version number out of range");let _=(16*b+128)*b+64;if(b>=2){const C=Math.floor(b/7)+2;_-=(25*C-10)*C-55,b>=7&&(_-=36)}return u(208<=_&&_<=29648),_}static getNumDataCodewords(b,_){return Math.floor(Bt.getNumRawDataModules(b)/8)-Bt.ECC_CODEWORDS_PER_BLOCK[_.ordinal][b]*Bt.NUM_ERROR_CORRECTION_BLOCKS[_.ordinal][b]}static reedSolomonComputeDivisor(b){if(b<1||b>255)throw new RangeError("Degree out of range");let _=[];for(let I=0;I<b-1;I++)_.push(0);_.push(1);let C=1;for(let I=0;I<b;I++){for(let L=0;L<_.length;L++)_[L]=Bt.reedSolomonMultiply(_[L],C),L+1<_.length&&(_[L]^=_[L+1]);C=Bt.reedSolomonMultiply(C,2)}return _}static reedSolomonComputeRemainder(b,_){let C=_.map(I=>0);for(const I of b){const L=I^C.shift();C.push(0),_.forEach((B,q)=>C[q]^=Bt.reedSolomonMultiply(B,L))}return C}static reedSolomonMultiply(b,_){if(b>>>8||_>>>8)throw new RangeError("Byte out of range");let C=0;for(let I=7;I>=0;I--)C=C<<1^(C>>>7)*285,C^=(_>>>I&1)*b;return u(C>>>8==0),C}finderPenaltyCountPatterns(b){const _=b[1];u(_<=this.size*3);const C=_>0&&b[2]==_&&b[3]==_*3&&b[4]==_&&b[5]==_;return(C&&b[0]>=_*4&&b[6]>=_?1:0)+(C&&b[6]>=_*4&&b[0]>=_?1:0)}finderPenaltyTerminateAndCount(b,_,C){return b&&(this.finderPenaltyAddHistory(_,C),_=0),_+=this.size,this.finderPenaltyAddHistory(_,C),this.finderPenaltyCountPatterns(C)}finderPenaltyAddHistory(b,_){_[0]==0&&(b+=this.size),_.pop(),_.unshift(b)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],i.QrCode=e;function n(v,b,_){if(b<0||b>31||v>>>b)throw new RangeError("Value out of range");for(let C=b-1;C>=0;C--)_.push(v>>>C&1)}function o(v,b){return(v>>>b&1)!=0}function u(v){if(!v)throw new Error("Assertion error")}const d=class ei{constructor(b,_,C){if(this.mode=b,this.numChars=_,this.bitData=C,_<0)throw new RangeError("Invalid argument");this.bitData=C.slice()}static makeBytes(b){let _=[];for(const C of b)n(C,8,_);return new ei(ei.Mode.BYTE,b.length,_)}static makeNumeric(b){if(!ei.isNumeric(b))throw new RangeError("String contains non-numeric characters");let _=[];for(let C=0;C<b.length;){const I=Math.min(b.length-C,3);n(parseInt(b.substring(C,C+I),10),I*3+1,_),C+=I}return new ei(ei.Mode.NUMERIC,b.length,_)}static makeAlphanumeric(b){if(!ei.isAlphanumeric(b))throw new RangeError("String contains unencodable characters in alphanumeric mode");let _=[],C;for(C=0;C+2<=b.length;C+=2){let I=ei.ALPHANUMERIC_CHARSET.indexOf(b.charAt(C))*45;I+=ei.ALPHANUMERIC_CHARSET.indexOf(b.charAt(C+1)),n(I,11,_)}return C<b.length&&n(ei.ALPHANUMERIC_CHARSET.indexOf(b.charAt(C)),6,_),new ei(ei.Mode.ALPHANUMERIC,b.length,_)}static makeSegments(b){return b==""?[]:ei.isNumeric(b)?[ei.makeNumeric(b)]:ei.isAlphanumeric(b)?[ei.makeAlphanumeric(b)]:[ei.makeBytes(ei.toUtf8ByteArray(b))]}static makeEci(b){let _=[];if(b<0)throw new RangeError("ECI assignment value out of range");if(b<128)n(b,8,_);else if(b<16384)n(2,2,_),n(b,14,_);else if(b<1e6)n(6,3,_),n(b,21,_);else throw new RangeError("ECI assignment value out of range");return new ei(ei.Mode.ECI,0,_)}static isNumeric(b){return ei.NUMERIC_REGEX.test(b)}static isAlphanumeric(b){return ei.ALPHANUMERIC_REGEX.test(b)}getData(){return this.bitData.slice()}static getTotalBits(b,_){let C=0;for(const I of b){const L=I.mode.numCharCountBits(_);if(I.numChars>=1<<L)return 1/0;C+=4+L+I.bitData.length}return C}static toUtf8ByteArray(b){b=encodeURI(b);let _=[];for(let C=0;C<b.length;C++)b.charAt(C)!="%"?_.push(b.charCodeAt(C)):(_.push(parseInt(b.substring(C+1,C+3),16)),C+=2);return _}};d.NUMERIC_REGEX=/^[0-9]*$/,d.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,d.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let y=d;i.QrSegment=d})(Jo||(Jo={}));(i=>{(e=>{const n=class{constructor(u,d){this.ordinal=u,this.formatBits=d}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),e.Ecc=n})(i.QrCode||(i.QrCode={}))})(Jo||(Jo={}));(i=>{(e=>{const n=class{constructor(u,d){this.modeBits=u,this.numBitsCharCount=d}numCharCountBits(u){return this.numBitsCharCount[Math.floor((u+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),e.Mode=n})(i.QrSegment||(i.QrSegment={}))})(Jo||(Jo={}));var jl=Jo;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var N8={L:jl.QrCode.Ecc.LOW,M:jl.QrCode.Ecc.MEDIUM,Q:jl.QrCode.Ecc.QUARTILE,H:jl.QrCode.Ecc.HIGH},Pw=128,Bw="L",kw="#FFFFFF",Uw="#000000",Vw=!1,jw=1,R8=4,O8=0,D8=.1;function Fw(i,e=0){const n=[];return i.forEach(function(o,u){let d=null;o.forEach(function(y,v){if(!y&&d!==null){n.push(`M${d+e} ${u+e}h${v-d}v1H${d+e}z`),d=null;return}if(v===o.length-1){if(!y)return;d===null?n.push(`M${v+e},${u+e} h1v1H${v+e}z`):n.push(`M${d+e},${u+e} h${v+1-d}v1H${d+e}z`);return}y&&d===null&&(d=v)})}),n.join("")}function zw(i,e){return i.slice().map((n,o)=>o<e.y||o>=e.y+e.h?n:n.map((u,d)=>d<e.x||d>=e.x+e.w?u:!1))}function M8(i,e,n,o){if(o==null)return null;const u=i.length+n*2,d=Math.floor(e*D8),y=u/e,v=(o.width||d)*y,b=(o.height||d)*y,_=o.x==null?i.length/2-v/2:o.x*y,C=o.y==null?i.length/2-b/2:o.y*y,I=o.opacity==null?1:o.opacity;let L=null;if(o.excavate){let q=Math.floor(_),K=Math.floor(C),Y=Math.ceil(v+_-q),ae=Math.ceil(b+C-K);L={x:q,y:K,w:Y,h:ae}}const B=o.crossOrigin;return{x:_,y:C,h:b,w:v,excavation:L,opacity:I,crossOrigin:B}}function L8(i,e){return e!=null?Math.max(Math.floor(e),0):i?R8:O8}function Hw({value:i,level:e,minVersion:n,includeMargin:o,marginSize:u,imageSettings:d,size:y,boostLevel:v}){let b=ni.useMemo(()=>{const q=(Array.isArray(i)?i:[i]).reduce((K,Y)=>(K.push(...jl.QrSegment.makeSegments(Y)),K),[]);return jl.QrCode.encodeSegments(q,N8[e],n,void 0,void 0,v)},[i,e,n,v]);const{cells:_,margin:C,numCells:I,calculatedImageSettings:L}=ni.useMemo(()=>{let B=b.getModules();const q=L8(o,u),K=B.length+q*2,Y=M8(B,y,q,d);return{cells:B,margin:q,numCells:K,calculatedImageSettings:Y}},[b,y,d,o,u]);return{qrcode:b,margin:C,cells:_,numCells:I,calculatedImageSettings:L}}var P8=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),B8=ni.forwardRef(function(e,n){const o=e,{value:u,size:d=Pw,level:y=Bw,bgColor:v=kw,fgColor:b=Uw,includeMargin:_=Vw,minVersion:C=jw,boostLevel:I,marginSize:L,imageSettings:B}=o,K=F1(o,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:Y}=K,ae=F1(K,["style"]),me=B==null?void 0:B.src,$=ni.useRef(null),_e=ni.useRef(null),je=ni.useCallback(We=>{$.current=We,typeof n=="function"?n(We):n&&(n.current=We)},[n]),[De,j]=ni.useState(!1),{margin:H,cells:V,numCells:ne,calculatedImageSettings:W}=Hw({value:u,level:y,minVersion:C,boostLevel:I,includeMargin:_,marginSize:L,imageSettings:B,size:d});ni.useEffect(()=>{if($.current!=null){const We=$.current,he=We.getContext("2d");if(!he)return;let pe=V;const be=_e.current,qe=W!=null&&be!==null&&be.complete&&be.naturalHeight!==0&&be.naturalWidth!==0;qe&&W.excavation!=null&&(pe=zw(V,W.excavation));const ot=window.devicePixelRatio||1;We.height=We.width=d*ot;const gt=d/ne*ot;he.scale(gt,gt),he.fillStyle=v,he.fillRect(0,0,ne,ne),he.fillStyle=b,P8?he.fill(new Path2D(Fw(pe,H))):V.forEach(function(ie,we){ie.forEach(function(ke,Ve){ke&&he.fillRect(Ve+H,we+H,1,1)})}),W&&(he.globalAlpha=W.opacity),qe&&he.drawImage(be,W.x+H,W.y+H,W.w,W.h)}}),ni.useEffect(()=>{j(!1)},[me]);const Z=j1({height:d,width:d},Y);let X=null;return me!=null&&(X=ni.createElement("img",{src:me,key:me,style:{display:"none"},onLoad:()=>{j(!0)},ref:_e,crossOrigin:W==null?void 0:W.crossOrigin})),ni.createElement(ni.Fragment,null,ni.createElement("canvas",j1({style:Z,height:d,width:d,ref:je,role:"img"},ae)),X)});B8.displayName="QRCodeCanvas";var Gw=ni.forwardRef(function(e,n){const o=e,{value:u,size:d=Pw,level:y=Bw,bgColor:v=kw,fgColor:b=Uw,includeMargin:_=Vw,minVersion:C=jw,boostLevel:I,title:L,marginSize:B,imageSettings:q}=o,K=F1(o,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:Y,cells:ae,numCells:me,calculatedImageSettings:$}=Hw({value:u,level:y,minVersion:C,boostLevel:I,includeMargin:_,marginSize:B,imageSettings:q,size:d});let _e=ae,je=null;q!=null&&$!=null&&($.excavation!=null&&(_e=zw(ae,$.excavation)),je=ni.createElement("image",{href:q.src,height:$.h,width:$.w,x:$.x+Y,y:$.y+Y,preserveAspectRatio:"none",opacity:$.opacity,crossOrigin:$.crossOrigin}));const De=Fw(_e,Y);return ni.createElement("svg",j1({height:d,width:d,viewBox:`0 0 ${me} ${me}`,ref:n,role:"img"},K),!!L&&ni.createElement("title",null,L),ni.createElement("path",{fill:v,d:`M0,0 h${me}v${me}H0z`,shapeRendering:"crispEdges"}),ni.createElement("path",{fill:b,d:De,shapeRendering:"crispEdges"}),je)});Gw.displayName="QRCodeSVG";const k8=({user:i})=>{const[e,n]=se.useState([]),[o,u]=se.useState(null),[d,y]=se.useState(()=>{const _=new Date;return`${_.getFullYear()}-${String(_.getMonth()+1).padStart(2,"0")}`});se.useEffect(()=>{const _=hw(C=>{n(C.filter(I=>I.userId===i.id))});return()=>_()},[i.id]);const v=_=>new Date(_).toLocaleString("zh-TW",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),b=e.filter(_=>{const C=new Date(_.timestamp);return`${C.getFullYear()}-${String(C.getMonth()+1).padStart(2,"0")}`===d});return S.jsxs("div",{className:"space-y-8 animate-in slide-in-from-bottom-4 duration-500",children:[S.jsxs("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[S.jsxs("div",{children:[S.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:""}),S.jsx("p",{className:"text-slate-500 mt-1",children:""})]}),S.jsxs("div",{className:"flex items-center gap-3 bg-white p-2 rounded-2xl border border-slate-100 shadow-sm",children:[S.jsx(sx,{size:18,className:"text-indigo-600 ml-2"}),S.jsx("input",{type:"month",value:d,onChange:_=>y(_.target.value),className:"border-none bg-transparent font-bold text-slate-600 outline-none p-1"})]})]}),b.length===0?S.jsxs("div",{className:"bg-white rounded-3xl p-12 text-center border border-dashed border-slate-200",children:[S.jsx("div",{className:"bg-slate-50 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 text-slate-300",children:S.jsx($h,{size:40})}),S.jsx("h2",{className:"text-xl font-bold text-slate-800",children:""}),S.jsx("p",{className:"text-slate-400 mt-2",children:""})]}):S.jsx("div",{className:"space-y-4",children:b.map(_=>S.jsxs("div",{className:"bg-white rounded-3xl border border-slate-100 p-6 flex flex-col md:flex-row md:items-center justify-between gap-6 shadow-sm hover:shadow-md transition-shadow",children:[S.jsxs("div",{className:"flex gap-4",children:[S.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center shrink-0 ${_.status==="completed"?"bg-green-50 text-green-600":_.status==="pending"?"bg-indigo-50 text-indigo-600":"bg-red-50 text-red-600"}`,children:_.status==="completed"?S.jsx(gv,{size:24}):_.status==="pending"?S.jsx(Jh,{size:24}):S.jsx(h_,{size:24})}),S.jsxs("div",{children:[S.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:_.productName||""}),S.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-400 mt-1",children:[S.jsxs("span",{className:"flex items-center gap-1",children:[S.jsx(sx,{size:12})," ",v(_.timestamp||Date.now())]}),S.jsxs("span",{className:"font-bold text-indigo-600",children:["-",_.pointsSpent||0," "]})]})]})]}),S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx("div",{className:`px-4 py-1.5 rounded-full text-xs font-bold ${_.status==="completed"?"bg-green-100 text-green-700":_.status==="pending"?"bg-indigo-100 text-indigo-700":"bg-red-100 text-red-700"}`,children:_.status==="completed"?"":_.status==="pending"?"":""}),_.status==="pending"&&S.jsxs("button",{onClick:()=>u(_),className:"flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-2.5 rounded-xl text-sm font-bold transition-all shadow-lg shadow-indigo-100",children:[S.jsx(Uv,{size:18}),""]})]})]},_.id))}),o&&S.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:S.jsxs("div",{className:"bg-white rounded-[2.5rem] max-w-sm w-full p-10 shadow-2xl animate-in zoom-in-95 duration-200 text-center",children:[S.jsx("div",{className:"flex justify-end mb-4 -mt-4 -mr-4",children:S.jsx("button",{onClick:()=>u(null),className:"text-slate-400 hover:text-slate-600 p-2",children:S.jsx(Yo,{size:28})})}),S.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:""}),S.jsx("p",{className:"text-slate-500 mb-8 text-sm",children:""}),S.jsx("div",{className:"aspect-square bg-white border-8 border-indigo-50 rounded-3xl flex items-center justify-center mb-8 shadow-inner overflow-hidden p-6",children:S.jsx(Gw,{value:o.qrCodeData,size:256,level:"H",includeMargin:!1,className:"w-full h-full"})}),S.jsx("div",{className:"bg-slate-50 p-4 rounded-2xl text-slate-400 font-mono text-xs mb-8 tracking-widest uppercase",children:o.qrCodeData}),S.jsx("p",{className:"font-bold text-slate-800 mb-1",children:o.productName}),S.jsxs("p",{className:"text-xs text-slate-400",children:["ID: ",o.id]})]})})]})};var Ge;(function(i){i[i.QR_CODE=0]="QR_CODE",i[i.AZTEC=1]="AZTEC",i[i.CODABAR=2]="CODABAR",i[i.CODE_39=3]="CODE_39",i[i.CODE_93=4]="CODE_93",i[i.CODE_128=5]="CODE_128",i[i.DATA_MATRIX=6]="DATA_MATRIX",i[i.MAXICODE=7]="MAXICODE",i[i.ITF=8]="ITF",i[i.EAN_13=9]="EAN_13",i[i.EAN_8=10]="EAN_8",i[i.PDF_417=11]="PDF_417",i[i.RSS_14=12]="RSS_14",i[i.RSS_EXPANDED=13]="RSS_EXPANDED",i[i.UPC_A=14]="UPC_A",i[i.UPC_E=15]="UPC_E",i[i.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ge||(Ge={}));var ME=new Map([[Ge.QR_CODE,"QR_CODE"],[Ge.AZTEC,"AZTEC"],[Ge.CODABAR,"CODABAR"],[Ge.CODE_39,"CODE_39"],[Ge.CODE_93,"CODE_93"],[Ge.CODE_128,"CODE_128"],[Ge.DATA_MATRIX,"DATA_MATRIX"],[Ge.MAXICODE,"MAXICODE"],[Ge.ITF,"ITF"],[Ge.EAN_13,"EAN_13"],[Ge.EAN_8,"EAN_8"],[Ge.PDF_417,"PDF_417"],[Ge.RSS_14,"RSS_14"],[Ge.RSS_EXPANDED,"RSS_EXPANDED"],[Ge.UPC_A,"UPC_A"],[Ge.UPC_E,"UPC_E"],[Ge.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),LE;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.URL=1]="URL"})(LE||(LE={}));function U8(i){return Object.values(Ge).includes(i)}var bf;(function(i){i[i.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",i[i.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(bf||(bf={}));var V8=(function(){function i(){}return i.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",i.SCAN_DEFAULT_FPS=2,i.DEFAULT_DISABLE_FLIP=!1,i.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,i.DEFAULT_SUPPORTED_SCAN_TYPE=[bf.SCAN_TYPE_CAMERA,bf.SCAN_TYPE_FILE],i})(),qw=(function(){function i(e,n){this.format=e,this.formatName=n}return i.prototype.toString=function(){return this.formatName},i.create=function(e){if(!ME.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new i(e,ME.get(e))},i})(),PE=(function(){function i(){}return i.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},i.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},i})(),z1;(function(i){i[i.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",i[i.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",i[i.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(z1||(z1={}));var j8=(function(){function i(){}return i.createFrom=function(e){return{errorMessage:e,type:z1.UNKWOWN_ERROR}},i})(),F8=(function(){function i(e){this.verbose=e}return i.prototype.log=function(e){this.verbose&&console.log(e)},i.prototype.warn=function(e){this.verbose&&console.warn(e)},i.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},i.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},i})();function xa(i){return typeof i>"u"||i===null}var Fl=(function(){function i(){}return i.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},i.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},i.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},i.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},i.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},i.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},i.scannerPaused=function(){return"Scanner paused"},i})(),Yw=(function(){function i(){}return i.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var o=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(o,"."),!0),!1}for(var u=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],d=new Set(u),y=Object.keys(e),v=0,b=y;v<b.length;v++){var _=b[v];if(d.has(_))return n.logError("".concat(_," is not supported videoConstaints."),!0),!1}return!0},i})(),Kc={exports:{}},z8=Kc.exports,BE;function H8(){return BE||(BE=1,(function(i,e){(function(n,o){o(e)})(z8,(function(n){function o(M){return M==null}var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,r){M.__proto__=r}||function(M,r){for(var a in r)r.hasOwnProperty(a)&&(M[a]=r[a])};function d(M,r){u(M,r);function a(){this.constructor=M}M.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}function y(M,r){var a=Object.setPrototypeOf;a?a(M,r):M.__proto__=r}function v(M,r){r===void 0&&(r=M.constructor);var a=Error.captureStackTrace;a&&a(M,r)}var b=(function(M){d(r,M);function r(a){var l=this.constructor,h=M.call(this,a)||this;return Object.defineProperty(h,"name",{value:l.name,enumerable:!1}),y(h,l.prototype),v(h),h}return r})(Error);class _ extends b{constructor(r=void 0){super(r),this.message=r}getKind(){return this.constructor.kind}}_.kind="Exception";class C extends _{}C.kind="ArgumentException";class I extends _{}I.kind="IllegalArgumentException";class L{constructor(r){if(this.binarizer=r,r===null)throw new I("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(r,a){return this.binarizer.getBlackRow(r,a)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(r,a,l,h){const f=this.binarizer.getLuminanceSource().crop(r,a,l,h);return new L(this.binarizer.createBinarizer(f))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new L(this.binarizer.createBinarizer(r))}rotateCounterClockwise45(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new L(this.binarizer.createBinarizer(r))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class B extends _{static getChecksumInstance(){return new B}}B.kind="ChecksumException";class q{constructor(r){this.source=r}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class K{static arraycopy(r,a,l,h,f){for(;f--;)l[h++]=r[a++]}static currentTimeMillis(){return Date.now()}}class Y extends _{}Y.kind="IndexOutOfBoundsException";class ae extends Y{constructor(r=void 0,a=void 0){super(a),this.index=r,this.message=a}}ae.kind="ArrayIndexOutOfBoundsException";class me{static fill(r,a){for(let l=0,h=r.length;l<h;l++)r[l]=a}static fillWithin(r,a,l,h){me.rangeCheck(r.length,a,l);for(let f=a;f<l;f++)r[f]=h}static rangeCheck(r,a,l){if(a>l)throw new I("fromIndex("+a+") > toIndex("+l+")");if(a<0)throw new ae(a);if(l>r)throw new ae(l)}static asList(...r){return r}static create(r,a,l){return Array.from({length:r}).map(f=>Array.from({length:a}).fill(l))}static createInt32Array(r,a,l){return Array.from({length:r}).map(f=>Int32Array.from({length:a}).fill(l))}static equals(r,a){if(!r||!a||!r.length||!a.length||r.length!==a.length)return!1;for(let l=0,h=r.length;l<h;l++)if(r[l]!==a[l])return!1;return!0}static hashCode(r){if(r===null)return 0;let a=1;for(const l of r)a=31*a+l;return a}static fillUint8Array(r,a){for(let l=0;l!==r.length;l++)r[l]=a}static copyOf(r,a){return r.slice(0,a)}static copyOfUint8Array(r,a){if(r.length<=a){const l=new Uint8Array(a);return l.set(r),l}return r.slice(0,a)}static copyOfRange(r,a,l){const h=l-a,f=new Int32Array(h);return K.arraycopy(r,a,f,0,h),f}static binarySearch(r,a,l){l===void 0&&(l=me.numberComparator);let h=0,f=r.length-1;for(;h<=f;){const m=f+h>>1,x=l(a,r[m]);if(x>0)h=m+1;else if(x<0)f=m-1;else return m}return-h-1}static numberComparator(r,a){return r-a}}class ${static numberOfTrailingZeros(r){let a;if(r===0)return 32;let l=31;return a=r<<16,a!==0&&(l-=16,r=a),a=r<<8,a!==0&&(l-=8,r=a),a=r<<4,a!==0&&(l-=4,r=a),a=r<<2,a!==0&&(l-=2,r=a),l-(r<<1>>>31)}static numberOfLeadingZeros(r){if(r===0)return 32;let a=1;return r>>>16||(a+=16,r<<=16),r>>>24||(a+=8,r<<=8),r>>>28||(a+=4,r<<=4),r>>>30||(a+=2,r<<=2),a-=r>>>31,a}static toHexString(r){return r.toString(16)}static toBinaryString(r){return String(parseInt(String(r),2))}static bitCount(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),r=r+(r>>>4)&252645135,r=r+(r>>>8),r=r+(r>>>16),r&63}static truncDivision(r,a){return Math.trunc(r/a)}static parseInt(r,a=void 0){return parseInt(r,a)}}$.MIN_VALUE_32_BITS=-2147483648,$.MAX_VALUE=Number.MAX_SAFE_INTEGER;class _e{constructor(r,a){r===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=r,a==null?this.bits=_e.makeArray(r):this.bits=a)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(r){if(r>this.bits.length*32){const a=_e.makeArray(r);K.arraycopy(this.bits,0,a,0,this.bits.length),this.bits=a}}get(r){return(this.bits[Math.floor(r/32)]&1<<(r&31))!==0}set(r){this.bits[Math.floor(r/32)]|=1<<(r&31)}flip(r){this.bits[Math.floor(r/32)]^=1<<(r&31)}getNextSet(r){const a=this.size;if(r>=a)return a;const l=this.bits;let h=Math.floor(r/32),f=l[h];f&=~((1<<(r&31))-1);const m=l.length;for(;f===0;){if(++h===m)return a;f=l[h]}const x=h*32+$.numberOfTrailingZeros(f);return x>a?a:x}getNextUnset(r){const a=this.size;if(r>=a)return a;const l=this.bits;let h=Math.floor(r/32),f=~l[h];f&=~((1<<(r&31))-1);const m=l.length;for(;f===0;){if(++h===m)return a;f=~l[h]}const x=h*32+$.numberOfTrailingZeros(f);return x>a?a:x}setBulk(r,a){this.bits[Math.floor(r/32)]=a}setRange(r,a){if(a<r||r<0||a>this.size)throw new I;if(a===r)return;a--;const l=Math.floor(r/32),h=Math.floor(a/32),f=this.bits;for(let m=l;m<=h;m++){const x=m>l?0:r&31,T=(2<<(m<h?31:a&31))-(1<<x);f[m]|=T}}clear(){const r=this.bits.length,a=this.bits;for(let l=0;l<r;l++)a[l]=0}isRange(r,a,l){if(a<r||r<0||a>this.size)throw new I;if(a===r)return!0;a--;const h=Math.floor(r/32),f=Math.floor(a/32),m=this.bits;for(let x=h;x<=f;x++){const A=x>h?0:r&31,R=(2<<(x<f?31:a&31))-(1<<A)&4294967295;if((m[x]&R)!==(l?R:0))return!1}return!0}appendBit(r){this.ensureCapacity(this.size+1),r&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(r,a){if(a<0||a>32)throw new I("Num bits must be between 0 and 32");this.ensureCapacity(this.size+a);for(let l=a;l>0;l--)this.appendBit((r>>l-1&1)===1)}appendBitArray(r){const a=r.size;this.ensureCapacity(this.size+a);for(let l=0;l<a;l++)this.appendBit(r.get(l))}xor(r){if(this.size!==r.size)throw new I("Sizes don't match");const a=this.bits;for(let l=0,h=a.length;l<h;l++)a[l]^=r.bits[l]}toBytes(r,a,l,h){for(let f=0;f<h;f++){let m=0;for(let x=0;x<8;x++)this.get(r)&&(m|=1<<7-x),r++;a[l+f]=m}}getBitArray(){return this.bits}reverse(){const r=new Int32Array(this.bits.length),a=Math.floor((this.size-1)/32),l=a+1,h=this.bits;for(let f=0;f<l;f++){let m=h[f];m=m>>1&1431655765|(m&1431655765)<<1,m=m>>2&858993459|(m&858993459)<<2,m=m>>4&252645135|(m&252645135)<<4,m=m>>8&16711935|(m&16711935)<<8,m=m>>16&65535|(m&65535)<<16,r[a-f]=m}if(this.size!==l*32){const f=l*32-this.size;let m=r[0]>>>f;for(let x=1;x<l;x++){const A=r[x];m|=A<<32-f,r[x-1]=m,m=A>>>f}r[l-1]=m}this.bits=r}static makeArray(r){return new Int32Array(Math.floor((r+31)/32))}equals(r){if(!(r instanceof _e))return!1;const a=r;return this.size===a.size&&me.equals(this.bits,a.bits)}hashCode(){return 31*this.size+me.hashCode(this.bits)}toString(){let r="";for(let a=0,l=this.size;a<l;a++)(a&7)===0&&(r+=" "),r+=this.get(a)?"X":".";return r}clone(){return new _e(this.size,this.bits.slice())}}var je;(function(M){M[M.OTHER=0]="OTHER",M[M.PURE_BARCODE=1]="PURE_BARCODE",M[M.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",M[M.TRY_HARDER=3]="TRY_HARDER",M[M.CHARACTER_SET=4]="CHARACTER_SET",M[M.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",M[M.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",M[M.ASSUME_GS1=7]="ASSUME_GS1",M[M.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",M[M.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",M[M.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(je||(je={}));var De=je;class j extends _{static getFormatInstance(){return new j}}j.kind="FormatException";var H;(function(M){M[M.Cp437=0]="Cp437",M[M.ISO8859_1=1]="ISO8859_1",M[M.ISO8859_2=2]="ISO8859_2",M[M.ISO8859_3=3]="ISO8859_3",M[M.ISO8859_4=4]="ISO8859_4",M[M.ISO8859_5=5]="ISO8859_5",M[M.ISO8859_6=6]="ISO8859_6",M[M.ISO8859_7=7]="ISO8859_7",M[M.ISO8859_8=8]="ISO8859_8",M[M.ISO8859_9=9]="ISO8859_9",M[M.ISO8859_10=10]="ISO8859_10",M[M.ISO8859_11=11]="ISO8859_11",M[M.ISO8859_13=12]="ISO8859_13",M[M.ISO8859_14=13]="ISO8859_14",M[M.ISO8859_15=14]="ISO8859_15",M[M.ISO8859_16=15]="ISO8859_16",M[M.SJIS=16]="SJIS",M[M.Cp1250=17]="Cp1250",M[M.Cp1251=18]="Cp1251",M[M.Cp1252=19]="Cp1252",M[M.Cp1256=20]="Cp1256",M[M.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",M[M.UTF8=22]="UTF8",M[M.ASCII=23]="ASCII",M[M.Big5=24]="Big5",M[M.GB18030=25]="GB18030",M[M.EUC_KR=26]="EUC_KR"})(H||(H={}));class V{constructor(r,a,l,...h){this.valueIdentifier=r,this.name=l,typeof a=="number"?this.values=Int32Array.from([a]):this.values=a,this.otherEncodingNames=h,V.VALUE_IDENTIFIER_TO_ECI.set(r,this),V.NAME_TO_ECI.set(l,this);const f=this.values;for(let m=0,x=f.length;m!==x;m++){const A=f[m];V.VALUES_TO_ECI.set(A,this)}for(const m of h)V.NAME_TO_ECI.set(m,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(r){if(r<0||r>=900)throw new j("incorect value");const a=V.VALUES_TO_ECI.get(r);if(a===void 0)throw new j("incorect value");return a}static getCharacterSetECIByName(r){const a=V.NAME_TO_ECI.get(r);if(a===void 0)throw new j("incorect value");return a}equals(r){if(!(r instanceof V))return!1;const a=r;return this.getName()===a.getName()}}V.VALUE_IDENTIFIER_TO_ECI=new Map,V.VALUES_TO_ECI=new Map,V.NAME_TO_ECI=new Map,V.Cp437=new V(H.Cp437,Int32Array.from([0,2]),"Cp437"),V.ISO8859_1=new V(H.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),V.ISO8859_2=new V(H.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),V.ISO8859_3=new V(H.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),V.ISO8859_4=new V(H.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),V.ISO8859_5=new V(H.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),V.ISO8859_6=new V(H.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),V.ISO8859_7=new V(H.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),V.ISO8859_8=new V(H.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),V.ISO8859_9=new V(H.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),V.ISO8859_10=new V(H.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),V.ISO8859_11=new V(H.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),V.ISO8859_13=new V(H.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),V.ISO8859_14=new V(H.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),V.ISO8859_15=new V(H.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),V.ISO8859_16=new V(H.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),V.SJIS=new V(H.SJIS,20,"SJIS","Shift_JIS"),V.Cp1250=new V(H.Cp1250,21,"Cp1250","windows-1250"),V.Cp1251=new V(H.Cp1251,22,"Cp1251","windows-1251"),V.Cp1252=new V(H.Cp1252,23,"Cp1252","windows-1252"),V.Cp1256=new V(H.Cp1256,24,"Cp1256","windows-1256"),V.UnicodeBigUnmarked=new V(H.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),V.UTF8=new V(H.UTF8,26,"UTF8","UTF-8"),V.ASCII=new V(H.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),V.Big5=new V(H.Big5,28,"Big5"),V.GB18030=new V(H.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),V.EUC_KR=new V(H.EUC_KR,30,"EUC_KR","EUC-KR");class ne extends _{}ne.kind="UnsupportedOperationException";class W{static decode(r,a){const l=this.encodingName(a);return this.customDecoder?this.customDecoder(r,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(r,l):new TextDecoder(l).decode(r)}static shouldDecodeOnFallback(r){return!W.isBrowser()&&r==="ISO-8859-1"}static encode(r,a){const l=this.encodingName(a);return this.customEncoder?this.customEncoder(r,l):typeof TextEncoder>"u"?this.encodeFallback(r):new TextEncoder().encode(r)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(r){return typeof r=="string"?r:r.getName()}static encodingCharacterSet(r){return r instanceof V?r:V.getCharacterSetECIByName(r)}static decodeFallback(r,a){const l=this.encodingCharacterSet(a);if(W.isDecodeFallbackSupported(l)){let h="";for(let f=0,m=r.length;f<m;f++){let x=r[f].toString(16);x.length<2&&(x="0"+x),h+="%"+x}return decodeURIComponent(h)}if(l.equals(V.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(r.buffer));throw new ne(`Encoding ${this.encodingName(a)} not supported by fallback.`)}static isDecodeFallbackSupported(r){return r.equals(V.UTF8)||r.equals(V.ISO8859_1)||r.equals(V.ASCII)}static encodeFallback(r){const l=btoa(unescape(encodeURIComponent(r))).split(""),h=[];for(let f=0;f<l.length;f++)h.push(l[f].charCodeAt(0));return new Uint8Array(h)}}class Z{static castAsNonUtf8Char(r,a=null){const l=a?a.getName():this.ISO88591;return W.decode(new Uint8Array([r]),l)}static guessEncoding(r,a){if(a!=null&&a.get(De.CHARACTER_SET)!==void 0)return a.get(De.CHARACTER_SET).toString();const l=r.length;let h=!0,f=!0,m=!0,x=0,A=0,T=0,R=0,P=0,k=0,G=0,J=0,te=0,ce=0,ye=0;const Pe=r.length>3&&r[0]===239&&r[1]===187&&r[2]===191;for(let Me=0;Me<l&&(h||f||m);Me++){const Re=r[Me]&255;m&&(x>0?(Re&128)===0?m=!1:x--:(Re&128)!==0&&((Re&64)===0?m=!1:(x++,(Re&32)===0?A++:(x++,(Re&16)===0?T++:(x++,(Re&8)===0?R++:m=!1))))),h&&(Re>127&&Re<160?h=!1:Re>159&&(Re<192||Re===215||Re===247)&&ye++),f&&(P>0?Re<64||Re===127||Re>252?f=!1:P--:Re===128||Re===160||Re>239?f=!1:Re>160&&Re<224?(k++,J=0,G++,G>te&&(te=G)):Re>127?(P++,G=0,J++,J>ce&&(ce=J)):(G=0,J=0))}return m&&x>0&&(m=!1),f&&P>0&&(f=!1),m&&(Pe||A+T+R>0)?Z.UTF8:f&&(Z.ASSUME_SHIFT_JIS||te>=3||ce>=3)?Z.SHIFT_JIS:h&&f?te===2&&k===2||ye*10>=l?Z.SHIFT_JIS:Z.ISO88591:h?Z.ISO88591:f?Z.SHIFT_JIS:m?Z.UTF8:Z.PLATFORM_DEFAULT_ENCODING}static format(r,...a){let l=-1;function h(m,x,A,T,R,P){if(m==="%%")return"%";if(a[++l]===void 0)return;m=T?parseInt(T.substr(1)):void 0;let k=R?parseInt(R.substr(1)):void 0,G;switch(P){case"s":G=a[l];break;case"c":G=a[l][0];break;case"f":G=parseFloat(a[l]).toFixed(m);break;case"p":G=parseFloat(a[l]).toPrecision(m);break;case"e":G=parseFloat(a[l]).toExponential(m);break;case"x":G=parseInt(a[l]).toString(k||16);break;case"d":G=parseFloat(parseInt(a[l],k||10).toPrecision(m)).toFixed(0);break}G=typeof G=="object"?JSON.stringify(G):(+G).toString(k);let J=parseInt(A),te=A&&A[0]+""=="0"?"0":" ";for(;G.length<J;)G=x!==void 0?G+te:te+G;return G}let f=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(f,h)}static getBytes(r,a){return W.encode(r,a)}static getCharCode(r,a=0){return r.charCodeAt(a)}static getCharAt(r){return String.fromCharCode(r)}}Z.SHIFT_JIS=V.SJIS.getName(),Z.GB2312="GB2312",Z.ISO88591=V.ISO8859_1.getName(),Z.EUC_JP="EUC_JP",Z.UTF8=V.UTF8.getName(),Z.PLATFORM_DEFAULT_ENCODING=Z.UTF8,Z.ASSUME_SHIFT_JIS=!1;class X{constructor(r=""){this.value=r}enableDecoding(r){return this.encoding=r,this}append(r){return typeof r=="string"?this.value+=r.toString():this.encoding?this.value+=Z.castAsNonUtf8Char(r,this.encoding):this.value+=String.fromCharCode(r),this}appendChars(r,a,l){for(let h=a;a<a+l;h++)this.append(r[h]);return this}length(){return this.value.length}charAt(r){return this.value.charAt(r)}deleteCharAt(r){this.value=this.value.substr(0,r)+this.value.substring(r+1)}setCharAt(r,a){this.value=this.value.substr(0,r)+a+this.value.substr(r+1)}substring(r,a){return this.value.substring(r,a)}setLengthToZero(){this.value=""}toString(){return this.value}insert(r,a){this.value=this.value.substr(0,r)+a+this.value.substr(r+a.length)}}class We{constructor(r,a,l,h){if(this.width=r,this.height=a,this.rowSize=l,this.bits=h,a==null&&(a=r),this.height=a,r<1||a<1)throw new I("Both dimensions must be greater than 0");l==null&&(l=Math.floor((r+31)/32)),this.rowSize=l,h==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(r){const a=r.length,l=r[0].length,h=new We(l,a);for(let f=0;f<a;f++){const m=r[f];for(let x=0;x<l;x++)m[x]&&h.set(x,f)}return h}static parseFromString(r,a,l){if(r===null)throw new I("stringRepresentation cannot be null");const h=new Array(r.length);let f=0,m=0,x=-1,A=0,T=0;for(;T<r.length;)if(r.charAt(T)===`
`||r.charAt(T)==="\r"){if(f>m){if(x===-1)x=f-m;else if(f-m!==x)throw new I("row lengths do not match");m=f,A++}T++}else if(r.substring(T,T+a.length)===a)T+=a.length,h[f]=!0,f++;else if(r.substring(T,T+l.length)===l)T+=l.length,h[f]=!1,f++;else throw new I("illegal character encountered: "+r.substring(T));if(f>m){if(x===-1)x=f-m;else if(f-m!==x)throw new I("row lengths do not match");A++}const R=new We(x,A);for(let P=0;P<f;P++)h[P]&&R.set(Math.floor(P%x),Math.floor(P/x));return R}get(r,a){const l=a*this.rowSize+Math.floor(r/32);return(this.bits[l]>>>(r&31)&1)!==0}set(r,a){const l=a*this.rowSize+Math.floor(r/32);this.bits[l]|=1<<(r&31)&4294967295}unset(r,a){const l=a*this.rowSize+Math.floor(r/32);this.bits[l]&=~(1<<(r&31)&4294967295)}flip(r,a){const l=a*this.rowSize+Math.floor(r/32);this.bits[l]^=1<<(r&31)&4294967295}xor(r){if(this.width!==r.getWidth()||this.height!==r.getHeight()||this.rowSize!==r.getRowSize())throw new I("input matrix dimensions do not match");const a=new _e(Math.floor(this.width/32)+1),l=this.rowSize,h=this.bits;for(let f=0,m=this.height;f<m;f++){const x=f*l,A=r.getRow(f,a).getBitArray();for(let T=0;T<l;T++)h[x+T]^=A[T]}}clear(){const r=this.bits,a=r.length;for(let l=0;l<a;l++)r[l]=0}setRegion(r,a,l,h){if(a<0||r<0)throw new I("Left and top must be nonnegative");if(h<1||l<1)throw new I("Height and width must be at least 1");const f=r+l,m=a+h;if(m>this.height||f>this.width)throw new I("The region must fit inside the matrix");const x=this.rowSize,A=this.bits;for(let T=a;T<m;T++){const R=T*x;for(let P=r;P<f;P++)A[R+Math.floor(P/32)]|=1<<(P&31)&4294967295}}getRow(r,a){a==null||a.getSize()<this.width?a=new _e(this.width):a.clear();const l=this.rowSize,h=this.bits,f=r*l;for(let m=0;m<l;m++)a.setBulk(m*32,h[f+m]);return a}setRow(r,a){K.arraycopy(a.getBitArray(),0,this.bits,r*this.rowSize,this.rowSize)}rotate180(){const r=this.getWidth(),a=this.getHeight();let l=new _e(r),h=new _e(r);for(let f=0,m=Math.floor((a+1)/2);f<m;f++)l=this.getRow(f,l),h=this.getRow(a-1-f,h),l.reverse(),h.reverse(),this.setRow(f,h),this.setRow(a-1-f,l)}getEnclosingRectangle(){const r=this.width,a=this.height,l=this.rowSize,h=this.bits;let f=r,m=a,x=-1,A=-1;for(let T=0;T<a;T++)for(let R=0;R<l;R++){const P=h[T*l+R];if(P!==0){if(T<m&&(m=T),T>A&&(A=T),R*32<f){let k=0;for(;(P<<31-k&4294967295)===0;)k++;R*32+k<f&&(f=R*32+k)}if(R*32+31>x){let k=31;for(;!(P>>>k);)k--;R*32+k>x&&(x=R*32+k)}}}return x<f||A<m?null:Int32Array.from([f,m,x-f+1,A-m+1])}getTopLeftOnBit(){const r=this.rowSize,a=this.bits;let l=0;for(;l<a.length&&a[l]===0;)l++;if(l===a.length)return null;const h=l/r;let f=l%r*32;const m=a[l];let x=0;for(;(m<<31-x&4294967295)===0;)x++;return f+=x,Int32Array.from([f,h])}getBottomRightOnBit(){const r=this.rowSize,a=this.bits;let l=a.length-1;for(;l>=0&&a[l]===0;)l--;if(l<0)return null;const h=Math.floor(l/r);let f=Math.floor(l%r)*32;const m=a[l];let x=31;for(;!(m>>>x);)x--;return f+=x,Int32Array.from([f,h])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(r){if(!(r instanceof We))return!1;const a=r;return this.width===a.width&&this.height===a.height&&this.rowSize===a.rowSize&&me.equals(this.bits,a.bits)}hashCode(){let r=this.width;return r=31*r+this.width,r=31*r+this.height,r=31*r+this.rowSize,r=31*r+me.hashCode(this.bits),r}toString(r="X ",a="  ",l=`
`){return this.buildToString(r,a,l)}buildToString(r,a,l){let h=new X;for(let f=0,m=this.height;f<m;f++){for(let x=0,A=this.width;x<A;x++)h.append(this.get(x,f)?r:a);h.append(l)}return h.toString()}clone(){return new We(this.width,this.height,this.rowSize,this.bits.slice())}}class he extends _{static getNotFoundInstance(){return new he}}he.kind="NotFoundException";class pe extends q{constructor(r){super(r),this.luminances=pe.EMPTY,this.buckets=new Int32Array(pe.LUMINANCE_BUCKETS)}getBlackRow(r,a){const l=this.getLuminanceSource(),h=l.getWidth();a==null||a.getSize()<h?a=new _e(h):a.clear(),this.initArrays(h);const f=l.getRow(r,this.luminances),m=this.buckets;for(let A=0;A<h;A++)m[(f[A]&255)>>pe.LUMINANCE_SHIFT]++;const x=pe.estimateBlackPoint(m);if(h<3)for(let A=0;A<h;A++)(f[A]&255)<x&&a.set(A);else{let A=f[0]&255,T=f[1]&255;for(let R=1;R<h-1;R++){const P=f[R+1]&255;(T*4-A-P)/2<x&&a.set(R),A=T,T=P}}return a}getBlackMatrix(){const r=this.getLuminanceSource(),a=r.getWidth(),l=r.getHeight(),h=new We(a,l);this.initArrays(a);const f=this.buckets;for(let A=1;A<5;A++){const T=Math.floor(l*A/5),R=r.getRow(T,this.luminances),P=Math.floor(a*4/5);for(let k=Math.floor(a/5);k<P;k++){const G=R[k]&255;f[G>>pe.LUMINANCE_SHIFT]++}}const m=pe.estimateBlackPoint(f),x=r.getMatrix();for(let A=0;A<l;A++){const T=A*a;for(let R=0;R<a;R++)(x[T+R]&255)<m&&h.set(R,A)}return h}createBinarizer(r){return new pe(r)}initArrays(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));const a=this.buckets;for(let l=0;l<pe.LUMINANCE_BUCKETS;l++)a[l]=0}static estimateBlackPoint(r){const a=r.length;let l=0,h=0,f=0;for(let R=0;R<a;R++)r[R]>f&&(h=R,f=r[R]),r[R]>l&&(l=r[R]);let m=0,x=0;for(let R=0;R<a;R++){const P=R-h,k=r[R]*P*P;k>x&&(m=R,x=k)}if(h>m){const R=h;h=m,m=R}if(m-h<=a/16)throw new he;let A=m-1,T=-1;for(let R=m-1;R>h;R--){const P=R-h,k=P*P*(m-R)*(l-r[R]);k>T&&(A=R,T=k)}return A<<pe.LUMINANCE_SHIFT}}pe.LUMINANCE_BITS=5,pe.LUMINANCE_SHIFT=8-pe.LUMINANCE_BITS,pe.LUMINANCE_BUCKETS=1<<pe.LUMINANCE_BITS,pe.EMPTY=Uint8ClampedArray.from([0]);class be extends pe{constructor(r){super(r),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const r=this.getLuminanceSource(),a=r.getWidth(),l=r.getHeight();if(a>=be.MINIMUM_DIMENSION&&l>=be.MINIMUM_DIMENSION){const h=r.getMatrix();let f=a>>be.BLOCK_SIZE_POWER;(a&be.BLOCK_SIZE_MASK)!==0&&f++;let m=l>>be.BLOCK_SIZE_POWER;(l&be.BLOCK_SIZE_MASK)!==0&&m++;const x=be.calculateBlackPoints(h,f,m,a,l),A=new We(a,l);be.calculateThresholdForBlock(h,f,m,a,l,x,A),this.matrix=A}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(r){return new be(r)}static calculateThresholdForBlock(r,a,l,h,f,m,x){const A=f-be.BLOCK_SIZE,T=h-be.BLOCK_SIZE;for(let R=0;R<l;R++){let P=R<<be.BLOCK_SIZE_POWER;P>A&&(P=A);const k=be.cap(R,2,l-3);for(let G=0;G<a;G++){let J=G<<be.BLOCK_SIZE_POWER;J>T&&(J=T);const te=be.cap(G,2,a-3);let ce=0;for(let Pe=-2;Pe<=2;Pe++){const Me=m[k+Pe];ce+=Me[te-2]+Me[te-1]+Me[te]+Me[te+1]+Me[te+2]}const ye=ce/25;be.thresholdBlock(r,J,P,ye,h,x)}}}static cap(r,a,l){return r<a?a:r>l?l:r}static thresholdBlock(r,a,l,h,f,m){for(let x=0,A=l*f+a;x<be.BLOCK_SIZE;x++,A+=f)for(let T=0;T<be.BLOCK_SIZE;T++)(r[A+T]&255)<=h&&m.set(a+T,l+x)}static calculateBlackPoints(r,a,l,h,f){const m=f-be.BLOCK_SIZE,x=h-be.BLOCK_SIZE,A=new Array(l);for(let T=0;T<l;T++){A[T]=new Int32Array(a);let R=T<<be.BLOCK_SIZE_POWER;R>m&&(R=m);for(let P=0;P<a;P++){let k=P<<be.BLOCK_SIZE_POWER;k>x&&(k=x);let G=0,J=255,te=0;for(let ye=0,Pe=R*h+k;ye<be.BLOCK_SIZE;ye++,Pe+=h){for(let Me=0;Me<be.BLOCK_SIZE;Me++){const Re=r[Pe+Me]&255;G+=Re,Re<J&&(J=Re),Re>te&&(te=Re)}if(te-J>be.MIN_DYNAMIC_RANGE)for(ye++,Pe+=h;ye<be.BLOCK_SIZE;ye++,Pe+=h)for(let Me=0;Me<be.BLOCK_SIZE;Me++)G+=r[Pe+Me]&255}let ce=G>>be.BLOCK_SIZE_POWER*2;if(te-J<=be.MIN_DYNAMIC_RANGE&&(ce=J/2,T>0&&P>0)){const ye=(A[T-1][P]+2*A[T][P-1]+A[T-1][P-1])/4;J<ye&&(ce=ye)}A[T][P]=ce}}return A}}be.BLOCK_SIZE_POWER=3,be.BLOCK_SIZE=1<<be.BLOCK_SIZE_POWER,be.BLOCK_SIZE_MASK=be.BLOCK_SIZE-1,be.MINIMUM_DIMENSION=be.BLOCK_SIZE*5,be.MIN_DYNAMIC_RANGE=24;class qe{constructor(r,a){this.width=r,this.height=a}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(r,a,l,h){throw new ne("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new ne("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new ne("This luminance source does not support rotation by 45 degrees.")}toString(){const r=new Uint8ClampedArray(this.width);let a=new X;for(let l=0;l<this.height;l++){const h=this.getRow(l,r);for(let f=0;f<this.width;f++){const m=h[f]&255;let x;m<64?x="#":m<128?x="+":m<192?x=".":x=" ",a.append(x)}a.append(`
`)}return a.toString()}}class ot extends qe{constructor(r){super(r.getWidth(),r.getHeight()),this.delegate=r}getRow(r,a){const l=this.delegate.getRow(r,a),h=this.getWidth();for(let f=0;f<h;f++)l[f]=255-(l[f]&255);return l}getMatrix(){const r=this.delegate.getMatrix(),a=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(a);for(let h=0;h<a;h++)l[h]=255-(r[h]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(r,a,l,h){return new ot(this.delegate.crop(r,a,l,h))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ot(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ot(this.delegate.rotateCounterClockwise45())}}class gt extends qe{constructor(r){super(r.width,r.height),this.canvas=r,this.tempCanvasElement=null,this.buffer=gt.makeBufferFromCanvasImageData(r)}static makeBufferFromCanvasImageData(r){const a=r.getContext("2d").getImageData(0,0,r.width,r.height);return gt.toGrayscaleBuffer(a.data,r.width,r.height)}static toGrayscaleBuffer(r,a,l){const h=new Uint8ClampedArray(a*l);for(let f=0,m=0,x=r.length;f<x;f+=4,m++){let A;if(r[f+3]===0)A=255;else{const R=r[f],P=r[f+1],k=r[f+2];A=306*R+601*P+117*k+512>>10}h[m]=A}return h}getRow(r,a){if(r<0||r>=this.getHeight())throw new I("Requested row is outside the image: "+r);const l=this.getWidth(),h=r*l;return a===null?a=this.buffer.slice(h,h+l):(a.length<l&&(a=new Uint8ClampedArray(l)),a.set(this.buffer.slice(h,h+l))),a}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(r,a,l,h){return super.crop(r,a,l,h),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement}rotate(r){const a=this.getTempCanvasElement(),l=a.getContext("2d"),h=r*gt.DEGREE_TO_RADIANS,f=this.canvas.width,m=this.canvas.height,x=Math.ceil(Math.abs(Math.cos(h))*f+Math.abs(Math.sin(h))*m),A=Math.ceil(Math.abs(Math.sin(h))*f+Math.abs(Math.cos(h))*m);return a.width=x,a.height=A,l.translate(x/2,A/2),l.rotate(h),l.drawImage(this.canvas,f/-2,m/-2),this.buffer=gt.makeBufferFromCanvasImageData(a),this}invert(){return new ot(this)}}gt.DEGREE_TO_RADIANS=Math.PI/180;class ie{constructor(r,a,l){this.deviceId=r,this.label=a,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var we=(globalThis||Ih||self||window||void 0)&&(globalThis||Ih||self||window||void 0).__awaiter||function(M,r,a,l){function h(f){return f instanceof a?f:new a(function(m){m(f)})}return new(a||(a=Promise))(function(f,m){function x(R){try{T(l.next(R))}catch(P){m(P)}}function A(R){try{T(l.throw(R))}catch(P){m(P)}}function T(R){R.done?f(R.value):h(R.value).then(x,A)}T((l=l.apply(M,r||[])).next())})};class ke{constructor(r,a=500,l){this.reader=r,this.timeBetweenScansMillis=a,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(r){this._timeBetweenDecodingAttempts=r<0?0:r}set hints(r){this._hints=r||null}get hints(){return this._hints}listVideoInputDevices(){return we(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const r=yield navigator.mediaDevices.enumerateDevices(),a=[];for(const l of r){const h=l.kind==="video"?"videoinput":l.kind;if(h!=="videoinput")continue;const f=l.deviceId||l.id,m=l.label||`Video device ${a.length+1}`,x=l.groupId,A={deviceId:f,label:m,kind:h,groupId:x};a.push(A)}return a})}getVideoInputDevices(){return we(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(a=>new ie(a.deviceId,a.label))})}findDeviceById(r){return we(this,void 0,void 0,function*(){const a=yield this.listVideoInputDevices();return a?a.find(l=>l.deviceId===r):null})}decodeFromInputVideoDevice(r,a){return we(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(r,a)})}decodeOnceFromVideoDevice(r,a){return we(this,void 0,void 0,function*(){this.reset();let l;r?l={deviceId:{exact:r}}:l={facingMode:"environment"};const h={video:l};return yield this.decodeOnceFromConstraints(h,a)})}decodeOnceFromConstraints(r,a){return we(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeOnceFromStream(l,a)})}decodeOnceFromStream(r,a){return we(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(r,a);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(r,a,l){return we(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(r,a,l)})}decodeFromVideoDevice(r,a,l){return we(this,void 0,void 0,function*(){let h;r?h={deviceId:{exact:r}}:h={facingMode:"environment"};const f={video:h};return yield this.decodeFromConstraints(f,a,l)})}decodeFromConstraints(r,a,l){return we(this,void 0,void 0,function*(){const h=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeFromStream(h,a,l)})}decodeFromStream(r,a,l){return we(this,void 0,void 0,function*(){this.reset();const h=yield this.attachStreamToVideo(r,a);return yield this.decodeContinuously(h,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(r,a){return we(this,void 0,void 0,function*(){const l=this.prepareVideoElement(a);return this.addVideoSource(l,r),this.videoElement=l,this.stream=r,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(r){return new Promise((a,l)=>this.playVideoOnLoad(r,()=>a()))}playVideoOnLoad(r,a){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(r),r.addEventListener("ended",this.videoEndedListener),r.addEventListener("canplay",this.videoCanPlayListener),r.addEventListener("playing",a),this.tryPlayVideo(r)}isVideoPlaying(r){return r.currentTime>0&&!r.paused&&!r.ended&&r.readyState>2}tryPlayVideo(r){return we(this,void 0,void 0,function*(){if(this.isVideoPlaying(r)){console.warn("Trying to play video that is already playing.");return}try{yield r.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(r,a){const l=document.getElementById(r);if(!l)throw new C(`element with id '${r}' not found`);if(l.nodeName.toLowerCase()!==a.toLowerCase())throw new C(`element with id '${r}' must be an ${a} element`);return l}decodeFromImage(r,a){if(!r&&!a)throw new C("either imageElement with a src set or an url must be provided");return a&&!r?this.decodeFromImageUrl(a):this.decodeFromImageElement(r)}decodeFromVideo(r,a){if(!r&&!a)throw new C("Either an element with a src set or an URL must be provided");return a&&!r?this.decodeFromVideoUrl(a):this.decodeFromVideoElement(r)}decodeFromVideoContinuously(r,a,l){if(r===void 0&&a===void 0)throw new C("Either an element with a src set or an URL must be provided");return a&&!r?this.decodeFromVideoUrlContinuously(a,l):this.decodeFromVideoElementContinuously(r,l)}decodeFromImageElement(r){if(!r)throw new C("An image element must be provided.");this.reset();const a=this.prepareImageElement(r);this.imageElement=a;let l;return this.isImageLoaded(a)?l=this.decodeOnce(a,!1,!0):l=this._decodeOnLoadImage(a),l}decodeFromVideoElement(r){const a=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideo(a)}decodeFromVideoElementContinuously(r,a){const l=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideoContinuously(l,a)}_decodeFromVideoElementSetup(r){if(!r)throw new C("A video element must be provided.");this.reset();const a=this.prepareVideoElement(r);return this.videoElement=a,a}decodeFromImageUrl(r){if(!r)throw new C("An URL must be provided.");this.reset();const a=this.prepareImageElement();this.imageElement=a;const l=this._decodeOnLoadImage(a);return a.src=r,l}decodeFromVideoUrl(r){if(!r)throw new C("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),l=this.decodeFromVideoElement(a);return a.src=r,l}decodeFromVideoUrlContinuously(r,a){if(!r)throw new C("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),h=this.decodeFromVideoElementContinuously(l,a);return l.src=r,h}_decodeOnLoadImage(r){return new Promise((a,l)=>{this.imageLoadedListener=()=>this.decodeOnce(r,!1,!0).then(a,l),r.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(r){return we(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(r),yield this.decodeOnce(r)})}_decodeOnLoadVideoContinuously(r,a){return we(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(r),this.decodeContinuously(r,a)})}isImageLoaded(r){return!(!r.complete||r.naturalWidth===0)}prepareImageElement(r){let a;return typeof r>"u"&&(a=document.createElement("img"),a.width=200,a.height=200),typeof r=="string"&&(a=this.getMediaElement(r,"img")),r instanceof HTMLImageElement&&(a=r),a}prepareVideoElement(r){let a;return!r&&typeof document<"u"&&(a=document.createElement("video"),a.width=200,a.height=200),typeof r=="string"&&(a=this.getMediaElement(r,"video")),r instanceof HTMLVideoElement&&(a=r),a.setAttribute("autoplay","true"),a.setAttribute("muted","true"),a.setAttribute("playsinline","true"),a}decodeOnce(r,a=!0,l=!0){this._stopAsyncDecode=!1;const h=(f,m)=>{if(this._stopAsyncDecode){m(new he("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const x=this.decode(r);f(x)}catch(x){const A=a&&x instanceof he,R=(x instanceof B||x instanceof j)&&l;if(A||R)return setTimeout(h,this._timeBetweenDecodingAttempts,f,m);m(x)}};return new Promise((f,m)=>h(f,m))}decodeContinuously(r,a){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const h=this.decode(r);a(h,null),setTimeout(l,this.timeBetweenScansMillis)}catch(h){a(null,h);const f=h instanceof B||h instanceof j,m=h instanceof he;(f||m)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(r){const a=this.createBinaryBitmap(r);return this.decodeBitmap(a)}_isHTMLVideoElement(r){return r.videoWidth!==0}drawFrameOnCanvas(r,a,l){a||(a={sx:0,sy:0,sWidth:r.videoWidth,sHeight:r.videoHeight,dx:0,dy:0,dWidth:r.videoWidth,dHeight:r.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(r,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}drawImageOnCanvas(r,a,l=this.captureCanvasContext){a||(a={sx:0,sy:0,sWidth:r.naturalWidth,sHeight:r.naturalHeight,dx:0,dy:0,dWidth:r.naturalWidth,dHeight:r.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(r,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}createBinaryBitmap(r){this.getCaptureCanvasContext(r),this._isHTMLVideoElement(r)?this.drawFrameOnCanvas(r):this.drawImageOnCanvas(r);const a=this.getCaptureCanvas(r),l=new gt(a),h=new be(l);return new L(h)}getCaptureCanvasContext(r){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(r).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(r){if(!this.captureCanvas){const a=this.createCaptureCanvas(r);this.captureCanvas=a}return this.captureCanvas}decodeBitmap(r){return this.reader.decode(r,this._hints)}createCaptureCanvas(r){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const a=document.createElement("canvas");let l,h;return typeof r<"u"&&(r instanceof HTMLVideoElement?(l=r.videoWidth,h=r.videoHeight):r instanceof HTMLImageElement&&(l=r.naturalWidth||r.width,h=r.naturalHeight||r.height)),a.style.width=l+"px",a.style.height=h+"px",a.width=l,a.height=h,a}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(r=>r.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(r,a){try{r.srcObject=a}catch{r.src=URL.createObjectURL(a)}}cleanVideoSource(r){try{r.srcObject=null}catch{r.src=""}this.videoElement.removeAttribute("src")}}class Ve{constructor(r,a,l=a==null?0:8*a.length,h,f,m=K.currentTimeMillis()){this.text=r,this.rawBytes=a,this.numBits=l,this.resultPoints=h,this.format=f,this.timestamp=m,this.text=r,this.rawBytes=a,l==null?this.numBits=a==null?0:8*a.length:this.numBits=l,this.resultPoints=h,this.format=f,this.resultMetadata=null,m==null?this.timestamp=K.currentTimeMillis():this.timestamp=m}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(r,a){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(r,a)}putAllMetadata(r){r!==null&&(this.resultMetadata===null?this.resultMetadata=r:this.resultMetadata=new Map(r))}addResultPoints(r){const a=this.resultPoints;if(a===null)this.resultPoints=r;else if(r!==null&&r.length>0){const l=new Array(a.length+r.length);K.arraycopy(a,0,l,0,a.length),K.arraycopy(r,0,l,a.length,r.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var tt;(function(M){M[M.AZTEC=0]="AZTEC",M[M.CODABAR=1]="CODABAR",M[M.CODE_39=2]="CODE_39",M[M.CODE_93=3]="CODE_93",M[M.CODE_128=4]="CODE_128",M[M.DATA_MATRIX=5]="DATA_MATRIX",M[M.EAN_8=6]="EAN_8",M[M.EAN_13=7]="EAN_13",M[M.ITF=8]="ITF",M[M.MAXICODE=9]="MAXICODE",M[M.PDF_417=10]="PDF_417",M[M.QR_CODE=11]="QR_CODE",M[M.RSS_14=12]="RSS_14",M[M.RSS_EXPANDED=13]="RSS_EXPANDED",M[M.UPC_A=14]="UPC_A",M[M.UPC_E=15]="UPC_E",M[M.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(tt||(tt={}));var Le=tt,ct;(function(M){M[M.OTHER=0]="OTHER",M[M.ORIENTATION=1]="ORIENTATION",M[M.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",M[M.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",M[M.ISSUE_NUMBER=4]="ISSUE_NUMBER",M[M.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",M[M.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",M[M.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",M[M.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",M[M.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",M[M.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(ct||(ct={}));var yt=ct;class Kt{constructor(r,a,l,h,f=-1,m=-1){this.rawBytes=r,this.text=a,this.byteSegments=l,this.ecLevel=h,this.structuredAppendSequenceNumber=f,this.structuredAppendParity=m,this.numBits=r==null?0:8*r.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(r){this.numBits=r}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(r){this.errorsCorrected=r}getErasures(){return this.erasures}setErasures(r){this.erasures=r}getOther(){return this.other}setOther(r){this.other=r}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class zi{exp(r){return this.expTable[r]}log(r){if(r===0)throw new I;return this.logTable[r]}static addOrSubtract(r,a){return r^a}}class bn{constructor(r,a){if(a.length===0)throw new I;this.field=r;const l=a.length;if(l>1&&a[0]===0){let h=1;for(;h<l&&a[h]===0;)h++;h===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-h),K.arraycopy(a,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);const a=this.coefficients;let l;if(r===1){l=0;for(let m=0,x=a.length;m!==x;m++){const A=a[m];l=zi.addOrSubtract(l,A)}return l}l=a[0];const h=a.length,f=this.field;for(let m=1;m<h;m++)l=zi.addOrSubtract(f.multiply(r,l),a[m]);return l}addOrSubtract(r){if(!this.field.equals(r.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero())return r;if(r.isZero())return this;let a=this.coefficients,l=r.coefficients;if(a.length>l.length){const m=a;a=l,l=m}let h=new Int32Array(l.length);const f=l.length-a.length;K.arraycopy(l,0,h,0,f);for(let m=f;m<l.length;m++)h[m]=zi.addOrSubtract(a[m-f],l[m]);return new bn(this.field,h)}multiply(r){if(!this.field.equals(r.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero()||r.isZero())return this.field.getZero();const a=this.coefficients,l=a.length,h=r.coefficients,f=h.length,m=new Int32Array(l+f-1),x=this.field;for(let A=0;A<l;A++){const T=a[A];for(let R=0;R<f;R++)m[A+R]=zi.addOrSubtract(m[A+R],x.multiply(T,h[R]))}return new bn(x,m)}multiplyScalar(r){if(r===0)return this.field.getZero();if(r===1)return this;const a=this.coefficients.length,l=this.field,h=new Int32Array(a),f=this.coefficients;for(let m=0;m<a;m++)h[m]=l.multiply(f[m],r);return new bn(l,h)}multiplyByMonomial(r,a){if(r<0)throw new I;if(a===0)return this.field.getZero();const l=this.coefficients,h=l.length,f=new Int32Array(h+r),m=this.field;for(let x=0;x<h;x++)f[x]=m.multiply(l[x],a);return new bn(m,f)}divide(r){if(!this.field.equals(r.field))throw new I("GenericGFPolys do not have same GenericGF field");if(r.isZero())throw new I("Divide by 0");const a=this.field;let l=a.getZero(),h=this;const f=r.getCoefficient(r.getDegree()),m=a.inverse(f);for(;h.getDegree()>=r.getDegree()&&!h.isZero();){const x=h.getDegree()-r.getDegree(),A=a.multiply(h.getCoefficient(h.getDegree()),m),T=r.multiplyByMonomial(x,A),R=a.buildMonomial(x,A);l=l.addOrSubtract(R),h=h.addOrSubtract(T)}return[l,h]}toString(){let r="";for(let a=this.getDegree();a>=0;a--){let l=this.getCoefficient(a);if(l!==0){if(l<0?(r+=" - ",l=-l):r.length>0&&(r+=" + "),a===0||l!==1){const h=this.field.log(l);h===0?r+="1":h===1?r+="a":(r+="a^",r+=h)}a!==0&&(a===1?r+="x":(r+="x^",r+=a))}}return r}}class gr extends _{}gr.kind="ArithmeticException";class Et extends zi{constructor(r,a,l){super(),this.primitive=r,this.size=a,this.generatorBase=l;const h=new Int32Array(a);let f=1;for(let x=0;x<a;x++)h[x]=f,f*=2,f>=a&&(f^=r,f&=a-1);this.expTable=h;const m=new Int32Array(a);for(let x=0;x<a-1;x++)m[h[x]]=x;this.logTable=m,this.zero=new bn(this,Int32Array.from([0])),this.one=new bn(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,a){if(r<0)throw new I;if(a===0)return this.zero;const l=new Int32Array(r+1);return l[0]=a,new bn(this,l)}inverse(r){if(r===0)throw new gr;return this.expTable[this.size-this.logTable[r]-1]}multiply(r,a){return r===0||a===0?0:this.expTable[(this.logTable[r]+this.logTable[a])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+$.toHexString(this.primitive)+","+this.size+")"}equals(r){return r===this}}Et.AZTEC_DATA_12=new Et(4201,4096,1),Et.AZTEC_DATA_10=new Et(1033,1024,1),Et.AZTEC_DATA_6=new Et(67,64,1),Et.AZTEC_PARAM=new Et(19,16,1),Et.QR_CODE_FIELD_256=new Et(285,256,0),Et.DATA_MATRIX_FIELD_256=new Et(301,256,1),Et.AZTEC_DATA_8=Et.DATA_MATRIX_FIELD_256,Et.MAXICODE_FIELD_64=Et.AZTEC_DATA_6;class ci extends _{}ci.kind="ReedSolomonException";class Qn extends _{}Qn.kind="IllegalStateException";class Hi{constructor(r){this.field=r}decode(r,a){const l=this.field,h=new bn(l,r),f=new Int32Array(a);let m=!0;for(let G=0;G<a;G++){const J=h.evaluateAt(l.exp(G+l.getGeneratorBase()));f[f.length-1-G]=J,J!==0&&(m=!1)}if(m)return;const x=new bn(l,f),A=this.runEuclideanAlgorithm(l.buildMonomial(a,1),x,a),T=A[0],R=A[1],P=this.findErrorLocations(T),k=this.findErrorMagnitudes(R,P);for(let G=0;G<P.length;G++){const J=r.length-1-l.log(P[G]);if(J<0)throw new ci("Bad error location");r[J]=Et.addOrSubtract(r[J],k[G])}}runEuclideanAlgorithm(r,a,l){if(r.getDegree()<a.getDegree()){const G=r;r=a,a=G}const h=this.field;let f=r,m=a,x=h.getZero(),A=h.getOne();for(;m.getDegree()>=(l/2|0);){let G=f,J=x;if(f=m,x=A,f.isZero())throw new ci("r_{i-1} was zero");m=G;let te=h.getZero();const ce=f.getCoefficient(f.getDegree()),ye=h.inverse(ce);for(;m.getDegree()>=f.getDegree()&&!m.isZero();){const Pe=m.getDegree()-f.getDegree(),Me=h.multiply(m.getCoefficient(m.getDegree()),ye);te=te.addOrSubtract(h.buildMonomial(Pe,Me)),m=m.addOrSubtract(f.multiplyByMonomial(Pe,Me))}if(A=te.multiply(x).addOrSubtract(J),m.getDegree()>=f.getDegree())throw new Qn("Division algorithm failed to reduce polynomial?")}const T=A.getCoefficient(0);if(T===0)throw new ci("sigmaTilde(0) was zero");const R=h.inverse(T),P=A.multiplyScalar(R),k=m.multiplyScalar(R);return[P,k]}findErrorLocations(r){const a=r.getDegree();if(a===1)return Int32Array.from([r.getCoefficient(1)]);const l=new Int32Array(a);let h=0;const f=this.field;for(let m=1;m<f.getSize()&&h<a;m++)r.evaluateAt(m)===0&&(l[h]=f.inverse(m),h++);if(h!==a)throw new ci("Error locator degree does not match number of roots");return l}findErrorMagnitudes(r,a){const l=a.length,h=new Int32Array(l),f=this.field;for(let m=0;m<l;m++){const x=f.inverse(a[m]);let A=1;for(let T=0;T<l;T++)if(m!==T){const R=f.multiply(a[T],x),P=(R&1)===0?R|1:R&-2;A=f.multiply(A,P)}h[m]=f.multiply(r.evaluateAt(x),f.inverse(A)),f.getGeneratorBase()!==0&&(h[m]=f.multiply(h[m],x))}return h}}var mn;(function(M){M[M.UPPER=0]="UPPER",M[M.LOWER=1]="LOWER",M[M.MIXED=2]="MIXED",M[M.DIGIT=3]="DIGIT",M[M.PUNCT=4]="PUNCT",M[M.BINARY=5]="BINARY"})(mn||(mn={}));class Gt{decode(r){this.ddata=r;let a=r.getBits(),l=this.extractBits(a),h=this.correctBits(l),f=Gt.convertBoolArrayToByteArray(h),m=Gt.getEncodedData(h),x=new Kt(f,m,null,null);return x.setNumBits(h.length),x}static highLevelDecode(r){return this.getEncodedData(r)}static getEncodedData(r){let a=r.length,l=mn.UPPER,h=mn.UPPER,f="",m=0;for(;m<a;)if(h===mn.BINARY){if(a-m<5)break;let x=Gt.readCode(r,m,5);if(m+=5,x===0){if(a-m<11)break;x=Gt.readCode(r,m,11)+31,m+=11}for(let A=0;A<x;A++){if(a-m<8){m=a;break}const T=Gt.readCode(r,m,8);f+=Z.castAsNonUtf8Char(T),m+=8}h=l}else{let x=h===mn.DIGIT?4:5;if(a-m<x)break;let A=Gt.readCode(r,m,x);m+=x;let T=Gt.getCharacter(h,A);T.startsWith("CTRL_")?(l=h,h=Gt.getTable(T.charAt(5)),T.charAt(6)==="L"&&(l=h)):(f+=T,h=l)}return f}static getTable(r){switch(r){case"L":return mn.LOWER;case"P":return mn.PUNCT;case"M":return mn.MIXED;case"D":return mn.DIGIT;case"B":return mn.BINARY;case"U":default:return mn.UPPER}}static getCharacter(r,a){switch(r){case mn.UPPER:return Gt.UPPER_TABLE[a];case mn.LOWER:return Gt.LOWER_TABLE[a];case mn.MIXED:return Gt.MIXED_TABLE[a];case mn.PUNCT:return Gt.PUNCT_TABLE[a];case mn.DIGIT:return Gt.DIGIT_TABLE[a];default:throw new Qn("Bad table")}}correctBits(r){let a,l;this.ddata.getNbLayers()<=2?(l=6,a=Et.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,a=Et.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,a=Et.AZTEC_DATA_10):(l=12,a=Et.AZTEC_DATA_12);let h=this.ddata.getNbDatablocks(),f=r.length/l;if(f<h)throw new j;let m=r.length%l,x=new Int32Array(f);for(let k=0;k<f;k++,m+=l)x[k]=Gt.readCode(r,m,l);try{new Hi(a).decode(x,f-h)}catch(k){throw new j(k)}let A=(1<<l)-1,T=0;for(let k=0;k<h;k++){let G=x[k];if(G===0||G===A)throw new j;(G===1||G===A-1)&&T++}let R=new Array(h*l-T),P=0;for(let k=0;k<h;k++){let G=x[k];if(G===1||G===A-1)R.fill(G>1,P,P+l-1),P+=l-1;else for(let J=l-1;J>=0;--J)R[P++]=(G&1<<J)!==0}return R}extractBits(r){let a=this.ddata.isCompact(),l=this.ddata.getNbLayers(),h=(a?11:14)+l*4,f=new Int32Array(h),m=new Array(this.totalBitsInLayer(l,a));if(a)for(let x=0;x<f.length;x++)f[x]=x;else{let x=h+1+2*$.truncDivision($.truncDivision(h,2)-1,15),A=h/2,T=$.truncDivision(x,2);for(let R=0;R<A;R++){let P=R+$.truncDivision(R,15);f[A-R-1]=T-P-1,f[A+R]=T+P+1}}for(let x=0,A=0;x<l;x++){let T=(l-x)*4+(a?9:12),R=x*2,P=h-1-R;for(let k=0;k<T;k++){let G=k*2;for(let J=0;J<2;J++)m[A+G+J]=r.get(f[R+J],f[R+k]),m[A+2*T+G+J]=r.get(f[R+k],f[P-J]),m[A+4*T+G+J]=r.get(f[P-J],f[P-k]),m[A+6*T+G+J]=r.get(f[P-k],f[R+J])}A+=T*8}return m}static readCode(r,a,l){let h=0;for(let f=a;f<a+l;f++)h<<=1,r[f]&&(h|=1);return h}static readByte(r,a){let l=r.length-a;return l>=8?Gt.readCode(r,a,8):Gt.readCode(r,a,l)<<8-l}static convertBoolArrayToByteArray(r){let a=new Uint8Array((r.length+7)/8);for(let l=0;l<a.length;l++)a[l]=Gt.readByte(r,8*l);return a}totalBitsInLayer(r,a){return((a?88:112)+16*r)*r}}Gt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Gt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Gt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Gt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Gt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Qe{constructor(){}static round(r){return r===NaN?0:r<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:r>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:r+(r<0?-.5:.5)|0}static distance(r,a,l,h){const f=r-l,m=a-h;return Math.sqrt(f*f+m*m)}static sum(r){let a=0;for(let l=0,h=r.length;l!==h;l++){const f=r[l];a+=f}return a}}class En{static floatToIntBits(r){return r}}En.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Fe{constructor(r,a){this.x=r,this.y=a}getX(){return this.x}getY(){return this.y}equals(r){if(r instanceof Fe){const a=r;return this.x===a.x&&this.y===a.y}return!1}hashCode(){return 31*En.floatToIntBits(this.x)+En.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(r){const a=this.distance(r[0],r[1]),l=this.distance(r[1],r[2]),h=this.distance(r[0],r[2]);let f,m,x;if(l>=a&&l>=h?(m=r[0],f=r[1],x=r[2]):h>=l&&h>=a?(m=r[1],f=r[0],x=r[2]):(m=r[2],f=r[0],x=r[1]),this.crossProductZ(f,m,x)<0){const A=f;f=x,x=A}r[0]=f,r[1]=m,r[2]=x}static distance(r,a){return Qe.distance(r.x,r.y,a.x,a.y)}static crossProductZ(r,a,l){const h=a.x,f=a.y;return(l.x-h)*(r.y-f)-(l.y-f)*(r.x-h)}}class xs{constructor(r,a){this.bits=r,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class tr extends xs{constructor(r,a,l,h,f){super(r,a),this.compact=l,this.nbDatablocks=h,this.nbLayers=f}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class hn{constructor(r,a,l,h){this.image=r,this.height=r.getHeight(),this.width=r.getWidth(),a==null&&(a=hn.INIT_SIZE),l==null&&(l=r.getWidth()/2|0),h==null&&(h=r.getHeight()/2|0);const f=a/2|0;if(this.leftInit=l-f,this.rightInit=l+f,this.upInit=h-f,this.downInit=h+f,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new he}detect(){let r=this.leftInit,a=this.rightInit,l=this.upInit,h=this.downInit,f=!1,m=!0,x=!1,A=!1,T=!1,R=!1,P=!1;const k=this.width,G=this.height;for(;m;){m=!1;let J=!0;for(;(J||!A)&&a<k;)J=this.containsBlackPoint(l,h,a,!1),J?(a++,m=!0,A=!0):A||a++;if(a>=k){f=!0;break}let te=!0;for(;(te||!T)&&h<G;)te=this.containsBlackPoint(r,a,h,!0),te?(h++,m=!0,T=!0):T||h++;if(h>=G){f=!0;break}let ce=!0;for(;(ce||!R)&&r>=0;)ce=this.containsBlackPoint(l,h,r,!1),ce?(r--,m=!0,R=!0):R||r--;if(r<0){f=!0;break}let ye=!0;for(;(ye||!P)&&l>=0;)ye=this.containsBlackPoint(r,a,l,!0),ye?(l--,m=!0,P=!0):P||l--;if(l<0){f=!0;break}m&&(x=!0)}if(!f&&x){const J=a-r;let te=null;for(let Me=1;te===null&&Me<J;Me++)te=this.getBlackPointOnSegment(r,h-Me,r+Me,h);if(te==null)throw new he;let ce=null;for(let Me=1;ce===null&&Me<J;Me++)ce=this.getBlackPointOnSegment(r,l+Me,r+Me,l);if(ce==null)throw new he;let ye=null;for(let Me=1;ye===null&&Me<J;Me++)ye=this.getBlackPointOnSegment(a,l+Me,a-Me,l);if(ye==null)throw new he;let Pe=null;for(let Me=1;Pe===null&&Me<J;Me++)Pe=this.getBlackPointOnSegment(a,h-Me,a-Me,h);if(Pe==null)throw new he;return this.centerEdges(Pe,te,ye,ce)}else throw new he}getBlackPointOnSegment(r,a,l,h){const f=Qe.round(Qe.distance(r,a,l,h)),m=(l-r)/f,x=(h-a)/f,A=this.image;for(let T=0;T<f;T++){const R=Qe.round(r+T*m),P=Qe.round(a+T*x);if(A.get(R,P))return new Fe(R,P)}return null}centerEdges(r,a,l,h){const f=r.getX(),m=r.getY(),x=a.getX(),A=a.getY(),T=l.getX(),R=l.getY(),P=h.getX(),k=h.getY(),G=hn.CORR;return f<this.width/2?[new Fe(P-G,k+G),new Fe(x+G,A+G),new Fe(T-G,R-G),new Fe(f+G,m-G)]:[new Fe(P+G,k+G),new Fe(x+G,A-G),new Fe(T-G,R+G),new Fe(f-G,m-G)]}containsBlackPoint(r,a,l,h){const f=this.image;if(h){for(let m=r;m<=a;m++)if(f.get(m,l))return!0}else for(let m=r;m<=a;m++)if(f.get(l,m))return!0;return!1}}hn.INIT_SIZE=10,hn.CORR=1;class mr{static checkAndNudgePoints(r,a){const l=r.getWidth(),h=r.getHeight();let f=!0;for(let m=0;m<a.length&&f;m+=2){const x=Math.floor(a[m]),A=Math.floor(a[m+1]);if(x<-1||x>l||A<-1||A>h)throw new he;f=!1,x===-1?(a[m]=0,f=!0):x===l&&(a[m]=l-1,f=!0),A===-1?(a[m+1]=0,f=!0):A===h&&(a[m+1]=h-1,f=!0)}f=!0;for(let m=a.length-2;m>=0&&f;m-=2){const x=Math.floor(a[m]),A=Math.floor(a[m+1]);if(x<-1||x>l||A<-1||A>h)throw new he;f=!1,x===-1?(a[m]=0,f=!0):x===l&&(a[m]=l-1,f=!0),A===-1?(a[m+1]=0,f=!0):A===h&&(a[m+1]=h-1,f=!0)}}}class ui{constructor(r,a,l,h,f,m,x,A,T){this.a11=r,this.a21=a,this.a31=l,this.a12=h,this.a22=f,this.a32=m,this.a13=x,this.a23=A,this.a33=T}static quadrilateralToQuadrilateral(r,a,l,h,f,m,x,A,T,R,P,k,G,J,te,ce){const ye=ui.quadrilateralToSquare(r,a,l,h,f,m,x,A);return ui.squareToQuadrilateral(T,R,P,k,G,J,te,ce).times(ye)}transformPoints(r){const a=r.length,l=this.a11,h=this.a12,f=this.a13,m=this.a21,x=this.a22,A=this.a23,T=this.a31,R=this.a32,P=this.a33;for(let k=0;k<a;k+=2){const G=r[k],J=r[k+1],te=f*G+A*J+P;r[k]=(l*G+m*J+T)/te,r[k+1]=(h*G+x*J+R)/te}}transformPointsWithValues(r,a){const l=this.a11,h=this.a12,f=this.a13,m=this.a21,x=this.a22,A=this.a23,T=this.a31,R=this.a32,P=this.a33,k=r.length;for(let G=0;G<k;G++){const J=r[G],te=a[G],ce=f*J+A*te+P;r[G]=(l*J+m*te+T)/ce,a[G]=(h*J+x*te+R)/ce}}static squareToQuadrilateral(r,a,l,h,f,m,x,A){const T=r-l+f-x,R=a-h+m-A;if(T===0&&R===0)return new ui(l-r,f-l,r,h-a,m-h,a,0,0,1);{const P=l-f,k=x-f,G=h-m,J=A-m,te=P*J-k*G,ce=(T*J-k*R)/te,ye=(P*R-T*G)/te;return new ui(l-r+ce*l,x-r+ye*x,r,h-a+ce*h,A-a+ye*A,a,ce,ye,1)}}static quadrilateralToSquare(r,a,l,h,f,m,x,A){return ui.squareToQuadrilateral(r,a,l,h,f,m,x,A).buildAdjoint()}buildAdjoint(){return new ui(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(r){return new ui(this.a11*r.a11+this.a21*r.a12+this.a31*r.a13,this.a11*r.a21+this.a21*r.a22+this.a31*r.a23,this.a11*r.a31+this.a21*r.a32+this.a31*r.a33,this.a12*r.a11+this.a22*r.a12+this.a32*r.a13,this.a12*r.a21+this.a22*r.a22+this.a32*r.a23,this.a12*r.a31+this.a22*r.a32+this.a32*r.a33,this.a13*r.a11+this.a23*r.a12+this.a33*r.a13,this.a13*r.a21+this.a23*r.a22+this.a33*r.a23,this.a13*r.a31+this.a23*r.a32+this.a33*r.a33)}}class ys extends mr{sampleGrid(r,a,l,h,f,m,x,A,T,R,P,k,G,J,te,ce,ye,Pe,Me){const Re=ui.quadrilateralToQuadrilateral(h,f,m,x,A,T,R,P,k,G,J,te,ce,ye,Pe,Me);return this.sampleGridWithTransform(r,a,l,Re)}sampleGridWithTransform(r,a,l,h){if(a<=0||l<=0)throw new he;const f=new We(a,l),m=new Float32Array(2*a);for(let x=0;x<l;x++){const A=m.length,T=x+.5;for(let R=0;R<A;R+=2)m[R]=R/2+.5,m[R+1]=T;h.transformPoints(m),mr.checkAndNudgePoints(r,m);try{for(let R=0;R<A;R+=2)r.get(Math.floor(m[R]),Math.floor(m[R+1]))&&f.set(R/2,x)}catch{throw new he}}return f}}class ri{static setGridSampler(r){ri.gridSampler=r}static getInstance(){return ri.gridSampler}}ri.gridSampler=new ys;class Fn{constructor(r,a){this.x=r,this.y=a}toResultPoint(){return new Fe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Cs{constructor(r){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=r}detect(){return this.detectMirror(!1)}detectMirror(r){let a=this.getMatrixCenter(),l=this.getBullsEyeCorners(a);if(r){let m=l[0];l[0]=l[2],l[2]=m}this.extractParameters(l);let h=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),f=this.getMatrixCornerPoints(l);return new tr(h,f,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(r){if(!this.isValidPoint(r[0])||!this.isValidPoint(r[1])||!this.isValidPoint(r[2])||!this.isValidPoint(r[3]))throw new he;let a=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(r[0],r[1],a),this.sampleLine(r[1],r[2],a),this.sampleLine(r[2],r[3],a),this.sampleLine(r[3],r[0],a)]);this.shift=this.getRotation(l,a);let h=0;for(let m=0;m<4;m++){let x=l[(this.shift+m)%4];this.compact?(h<<=7,h+=x>>1&127):(h<<=10,h+=(x>>2&992)+(x>>1&31))}let f=this.getCorrectedParameterData(h,this.compact);this.compact?(this.nbLayers=(f>>6)+1,this.nbDataBlocks=(f&63)+1):(this.nbLayers=(f>>11)+1,this.nbDataBlocks=(f&2047)+1)}getRotation(r,a){let l=0;r.forEach((h,f,m)=>{let x=(h>>a-2<<1)+(h&1);l=(l<<3)+x}),l=((l&1)<<11)+(l>>1);for(let h=0;h<4;h++)if($.bitCount(l^this.EXPECTED_CORNER_BITS[h])<=2)return h;throw new he}getCorrectedParameterData(r,a){let l,h;a?(l=7,h=2):(l=10,h=4);let f=l-h,m=new Int32Array(l);for(let A=l-1;A>=0;--A)m[A]=r&15,r>>=4;try{new Hi(Et.AZTEC_PARAM).decode(m,f)}catch{throw new he}let x=0;for(let A=0;A<h;A++)x=(x<<4)+m[A];return x}getBullsEyeCorners(r){let a=r,l=r,h=r,f=r,m=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let P=this.getFirstDifferent(a,m,1,-1),k=this.getFirstDifferent(l,m,1,1),G=this.getFirstDifferent(h,m,-1,1),J=this.getFirstDifferent(f,m,-1,-1);if(this.nbCenterLayers>2){let te=this.distancePoint(J,P)*this.nbCenterLayers/(this.distancePoint(f,a)*(this.nbCenterLayers+2));if(te<.75||te>1.25||!this.isWhiteOrBlackRectangle(P,k,G,J))break}a=P,l=k,h=G,f=J,m=!m}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new he;this.compact=this.nbCenterLayers===5;let x=new Fe(a.getX()+.5,a.getY()-.5),A=new Fe(l.getX()+.5,l.getY()+.5),T=new Fe(h.getX()-.5,h.getY()+.5),R=new Fe(f.getX()-.5,f.getY()-.5);return this.expandSquare([x,A,T,R],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let r,a,l,h;try{let x=new hn(this.image).detect();r=x[0],a=x[1],l=x[2],h=x[3]}catch{let A=this.image.getWidth()/2,T=this.image.getHeight()/2;r=this.getFirstDifferent(new Fn(A+7,T-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new Fn(A+7,T+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Fn(A-7,T+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new Fn(A-7,T-7),!1,-1,-1).toResultPoint()}let f=Qe.round((r.getX()+h.getX()+a.getX()+l.getX())/4),m=Qe.round((r.getY()+h.getY()+a.getY()+l.getY())/4);try{let x=new hn(this.image,15,f,m).detect();r=x[0],a=x[1],l=x[2],h=x[3]}catch{r=this.getFirstDifferent(new Fn(f+7,m-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new Fn(f+7,m+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Fn(f-7,m+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new Fn(f-7,m-7),!1,-1,-1).toResultPoint()}return f=Qe.round((r.getX()+h.getX()+a.getX()+l.getX())/4),m=Qe.round((r.getY()+h.getY()+a.getY()+l.getY())/4),new Fn(f,m)}getMatrixCornerPoints(r){return this.expandSquare(r,2*this.nbCenterLayers,this.getDimension())}sampleGrid(r,a,l,h,f){let m=ri.getInstance(),x=this.getDimension(),A=x/2-this.nbCenterLayers,T=x/2+this.nbCenterLayers;return m.sampleGrid(r,x,x,A,A,T,A,T,T,A,T,a.getX(),a.getY(),l.getX(),l.getY(),h.getX(),h.getY(),f.getX(),f.getY())}sampleLine(r,a,l){let h=0,f=this.distanceResultPoint(r,a),m=f/l,x=r.getX(),A=r.getY(),T=m*(a.getX()-r.getX())/f,R=m*(a.getY()-r.getY())/f;for(let P=0;P<l;P++)this.image.get(Qe.round(x+P*T),Qe.round(A+P*R))&&(h|=1<<l-P-1);return h}isWhiteOrBlackRectangle(r,a,l,h){let f=3;r=new Fn(r.getX()-f,r.getY()+f),a=new Fn(a.getX()-f,a.getY()-f),l=new Fn(l.getX()+f,l.getY()-f),h=new Fn(h.getX()+f,h.getY()+f);let m=this.getColor(h,r);if(m===0)return!1;let x=this.getColor(r,a);return x!==m||(x=this.getColor(a,l),x!==m)?!1:(x=this.getColor(l,h),x===m)}getColor(r,a){let l=this.distancePoint(r,a),h=(a.getX()-r.getX())/l,f=(a.getY()-r.getY())/l,m=0,x=r.getX(),A=r.getY(),T=this.image.get(r.getX(),r.getY()),R=Math.ceil(l);for(let k=0;k<R;k++)x+=h,A+=f,this.image.get(Qe.round(x),Qe.round(A))!==T&&m++;let P=m/l;return P>.1&&P<.9?0:P<=.1===T?1:-1}getFirstDifferent(r,a,l,h){let f=r.getX()+l,m=r.getY()+h;for(;this.isValid(f,m)&&this.image.get(f,m)===a;)f+=l,m+=h;for(f-=l,m-=h;this.isValid(f,m)&&this.image.get(f,m)===a;)f+=l;for(f-=l;this.isValid(f,m)&&this.image.get(f,m)===a;)m+=h;return m-=h,new Fn(f,m)}expandSquare(r,a,l){let h=l/(2*a),f=r[0].getX()-r[2].getX(),m=r[0].getY()-r[2].getY(),x=(r[0].getX()+r[2].getX())/2,A=(r[0].getY()+r[2].getY())/2,T=new Fe(x+h*f,A+h*m),R=new Fe(x-h*f,A-h*m);f=r[1].getX()-r[3].getX(),m=r[1].getY()-r[3].getY(),x=(r[1].getX()+r[3].getX())/2,A=(r[1].getY()+r[3].getY())/2;let P=new Fe(x+h*f,A+h*m),k=new Fe(x-h*f,A-h*m);return[T,P,R,k]}isValid(r,a){return r>=0&&r<this.image.getWidth()&&a>0&&a<this.image.getHeight()}isValidPoint(r){let a=Qe.round(r.getX()),l=Qe.round(r.getY());return this.isValid(a,l)}distancePoint(r,a){return Qe.distance(r.getX(),r.getY(),a.getX(),a.getY())}distanceResultPoint(r,a){return Qe.distance(r.getX(),r.getY(),a.getX(),a.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*($.truncDivision(this.nbLayers-4,8)+1)+15}}class Yr{decode(r,a=null){let l=null,h=new Cs(r.getBlackMatrix()),f=null,m=null;try{let R=h.detectMirror(!1);f=R.getPoints(),this.reportFoundResultPoints(a,f),m=new Gt().decode(R)}catch(R){l=R}if(m==null)try{let R=h.detectMirror(!0);f=R.getPoints(),this.reportFoundResultPoints(a,f),m=new Gt().decode(R)}catch(R){throw l??R}let x=new Ve(m.getText(),m.getRawBytes(),m.getNumBits(),f,Le.AZTEC,K.currentTimeMillis()),A=m.getByteSegments();A!=null&&x.putMetadata(yt.BYTE_SEGMENTS,A);let T=m.getECLevel();return T!=null&&x.putMetadata(yt.ERROR_CORRECTION_LEVEL,T),x}reportFoundResultPoints(r,a){if(r!=null){let l=r.get(De.NEED_RESULT_POINT_CALLBACK);l!=null&&a.forEach((h,f,m)=>{l.foundPossibleResultPoint(h)})}}reset(){}}class Sa extends ke{constructor(r=500){super(new Yr,r)}}class Wt{decode(r,a){try{return this.doDecode(r,a)}catch{if(a&&a.get(De.TRY_HARDER)===!0&&r.isRotateSupported()){const f=r.rotateCounterClockwise(),m=this.doDecode(f,a),x=m.getResultMetadata();let A=270;x!==null&&x.get(yt.ORIENTATION)===!0&&(A=A+x.get(yt.ORIENTATION)%360),m.putMetadata(yt.ORIENTATION,A);const T=m.getResultPoints();if(T!==null){const R=f.getHeight();for(let P=0;P<T.length;P++)T[P]=new Fe(R-T[P].getY()-1,T[P].getX())}return m}else throw new he}}reset(){}doDecode(r,a){const l=r.getWidth(),h=r.getHeight();let f=new _e(l);const m=a&&a.get(De.TRY_HARDER)===!0,x=Math.max(1,h>>(m?8:5));let A;m?A=h:A=15;const T=Math.trunc(h/2);for(let R=0;R<A;R++){const P=Math.trunc((R+1)/2),k=(R&1)===0,G=T+x*(k?P:-P);if(G<0||G>=h)break;try{f=r.getBlackRow(G,f)}catch{continue}for(let J=0;J<2;J++){if(J===1&&(f.reverse(),a&&a.get(De.NEED_RESULT_POINT_CALLBACK)===!0)){const te=new Map;a.forEach((ce,ye)=>te.set(ye,ce)),te.delete(De.NEED_RESULT_POINT_CALLBACK),a=te}try{const te=this.decodeRow(G,f,a);if(J===1){te.putMetadata(yt.ORIENTATION,180);const ce=te.getResultPoints();ce!==null&&(ce[0]=new Fe(l-ce[0].getX()-1,ce[0].getY()),ce[1]=new Fe(l-ce[1].getX()-1,ce[1].getY()))}return te}catch{}}}throw new he}static recordPattern(r,a,l){const h=l.length;for(let T=0;T<h;T++)l[T]=0;const f=r.getSize();if(a>=f)throw new he;let m=!r.get(a),x=0,A=a;for(;A<f;){if(r.get(A)!==m)l[x]++;else{if(++x===h)break;l[x]=1,m=!m}A++}if(!(x===h||x===h-1&&A===f))throw new he}static recordPatternInReverse(r,a,l){let h=l.length,f=r.get(a);for(;a>0&&h>=0;)r.get(--a)!==f&&(h--,f=!f);if(h>=0)throw new he;Wt.recordPattern(r,a+1,l)}static patternMatchVariance(r,a,l){const h=r.length;let f=0,m=0;for(let T=0;T<h;T++)f+=r[T],m+=a[T];if(f<m)return Number.POSITIVE_INFINITY;const x=f/m;l*=x;let A=0;for(let T=0;T<h;T++){const R=r[T],P=a[T]*x,k=R>P?R-P:P-R;if(k>l)return Number.POSITIVE_INFINITY;A+=k}return A/f}}class Oe extends Wt{static findStartPattern(r){const a=r.getSize(),l=r.getNextSet(0);let h=0,f=Int32Array.from([0,0,0,0,0,0]),m=l,x=!1;const A=6;for(let T=l;T<a;T++)if(r.get(T)!==x)f[h]++;else{if(h===A-1){let R=Oe.MAX_AVG_VARIANCE,P=-1;for(let k=Oe.CODE_START_A;k<=Oe.CODE_START_C;k++){const G=Wt.patternMatchVariance(f,Oe.CODE_PATTERNS[k],Oe.MAX_INDIVIDUAL_VARIANCE);G<R&&(R=G,P=k)}if(P>=0&&r.isRange(Math.max(0,m-(T-m)/2),m,!1))return Int32Array.from([m,T,P]);m+=f[0]+f[1],f=f.slice(2,f.length-1),f[h-1]=0,f[h]=0,h--}else h++;f[h]=1,x=!x}throw new he}static decodeCode(r,a,l){Wt.recordPattern(r,l,a);let h=Oe.MAX_AVG_VARIANCE,f=-1;for(let m=0;m<Oe.CODE_PATTERNS.length;m++){const x=Oe.CODE_PATTERNS[m],A=this.patternMatchVariance(a,x,Oe.MAX_INDIVIDUAL_VARIANCE);A<h&&(h=A,f=m)}if(f>=0)return f;throw new he}decodeRow(r,a,l){const h=l&&l.get(De.ASSUME_GS1)===!0,f=Oe.findStartPattern(a),m=f[2];let x=0;const A=new Uint8Array(20);A[x++]=m;let T;switch(m){case Oe.CODE_START_A:T=Oe.CODE_CODE_A;break;case Oe.CODE_START_B:T=Oe.CODE_CODE_B;break;case Oe.CODE_START_C:T=Oe.CODE_CODE_C;break;default:throw new j}let R=!1,P=!1,k="",G=f[0],J=f[1];const te=Int32Array.from([0,0,0,0,0,0]);let ce=0,ye=0,Pe=m,Me=0,Re=!0,St=!1,ft=!1;for(;!R;){const ta=P;switch(P=!1,ce=ye,ye=Oe.decodeCode(a,te,J),A[x++]=ye,ye!==Oe.CODE_STOP&&(Re=!0),ye!==Oe.CODE_STOP&&(Me++,Pe+=Me*ye),G=J,J+=te.reduce((vu,rc)=>vu+rc,0),ye){case Oe.CODE_START_A:case Oe.CODE_START_B:case Oe.CODE_START_C:throw new j}switch(T){case Oe.CODE_CODE_A:if(ye<64)ft===St?k+=String.fromCharCode(32+ye):k+=String.fromCharCode(32+ye+128),ft=!1;else if(ye<96)ft===St?k+=String.fromCharCode(ye-64):k+=String.fromCharCode(ye+64),ft=!1;else switch(ye!==Oe.CODE_STOP&&(Re=!1),ye){case Oe.CODE_FNC_1:h&&(k.length===0?k+="]C1":k+="");break;case Oe.CODE_FNC_2:case Oe.CODE_FNC_3:break;case Oe.CODE_FNC_4_A:!St&&ft?(St=!0,ft=!1):St&&ft?(St=!1,ft=!1):ft=!0;break;case Oe.CODE_SHIFT:P=!0,T=Oe.CODE_CODE_B;break;case Oe.CODE_CODE_B:T=Oe.CODE_CODE_B;break;case Oe.CODE_CODE_C:T=Oe.CODE_CODE_C;break;case Oe.CODE_STOP:R=!0;break}break;case Oe.CODE_CODE_B:if(ye<96)ft===St?k+=String.fromCharCode(32+ye):k+=String.fromCharCode(32+ye+128),ft=!1;else switch(ye!==Oe.CODE_STOP&&(Re=!1),ye){case Oe.CODE_FNC_1:h&&(k.length===0?k+="]C1":k+="");break;case Oe.CODE_FNC_2:case Oe.CODE_FNC_3:break;case Oe.CODE_FNC_4_B:!St&&ft?(St=!0,ft=!1):St&&ft?(St=!1,ft=!1):ft=!0;break;case Oe.CODE_SHIFT:P=!0,T=Oe.CODE_CODE_A;break;case Oe.CODE_CODE_A:T=Oe.CODE_CODE_A;break;case Oe.CODE_CODE_C:T=Oe.CODE_CODE_C;break;case Oe.CODE_STOP:R=!0;break}break;case Oe.CODE_CODE_C:if(ye<100)ye<10&&(k+="0"),k+=ye;else switch(ye!==Oe.CODE_STOP&&(Re=!1),ye){case Oe.CODE_FNC_1:h&&(k.length===0?k+="]C1":k+="");break;case Oe.CODE_CODE_A:T=Oe.CODE_CODE_A;break;case Oe.CODE_CODE_B:T=Oe.CODE_CODE_B;break;case Oe.CODE_STOP:R=!0;break}break}ta&&(T=T===Oe.CODE_CODE_A?Oe.CODE_CODE_B:Oe.CODE_CODE_A)}const Zn=J-G;if(J=a.getNextUnset(J),!a.isRange(J,Math.min(a.getSize(),J+(J-G)/2),!1))throw new he;if(Pe-=Me*ce,Pe%103!==ce)throw new B;const wr=k.length;if(wr===0)throw new he;wr>0&&Re&&(T===Oe.CODE_CODE_C?k=k.substring(0,wr-2):k=k.substring(0,wr-1));const Mi=(f[1]+f[0])/2,cn=G+Zn/2,wi=A.length,ur=new Uint8Array(wi);for(let ta=0;ta<wi;ta++)ur[ta]=A[ta];const Pa=[new Fe(Mi,r),new Fe(cn,r)];return new Ve(k,ur,0,Pa,Le.CODE_128,new Date().getTime())}}Oe.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Oe.MAX_AVG_VARIANCE=.25,Oe.MAX_INDIVIDUAL_VARIANCE=.7,Oe.CODE_SHIFT=98,Oe.CODE_CODE_C=99,Oe.CODE_CODE_B=100,Oe.CODE_CODE_A=101,Oe.CODE_FNC_1=102,Oe.CODE_FNC_2=97,Oe.CODE_FNC_3=96,Oe.CODE_FNC_4_A=101,Oe.CODE_FNC_4_B=100,Oe.CODE_START_A=103,Oe.CODE_START_B=104,Oe.CODE_START_C=105,Oe.CODE_STOP=106;class qt extends Wt{constructor(r=!1,a=!1){super(),this.usingCheckDigit=r,this.extendedMode=a,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(r,a,l){let h=this.counters;h.fill(0),this.decodeRowResult="";let f=qt.findAsteriskPattern(a,h),m=a.getNextSet(f[1]),x=a.getSize(),A,T;do{qt.recordPattern(a,m,h);let te=qt.toNarrowWidePattern(h);if(te<0)throw new he;A=qt.patternToChar(te),this.decodeRowResult+=A,T=m;for(let ce of h)m+=ce;m=a.getNextSet(m)}while(A!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let R=0;for(let te of h)R+=te;let P=m-T-R;if(m!==x&&P*2<R)throw new he;if(this.usingCheckDigit){let te=this.decodeRowResult.length-1,ce=0;for(let ye=0;ye<te;ye++)ce+=qt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ye));if(this.decodeRowResult.charAt(te)!==qt.ALPHABET_STRING.charAt(ce%43))throw new B;this.decodeRowResult=this.decodeRowResult.substring(0,te)}if(this.decodeRowResult.length===0)throw new he;let k;this.extendedMode?k=qt.decodeExtended(this.decodeRowResult):k=this.decodeRowResult;let G=(f[1]+f[0])/2,J=T+R/2;return new Ve(k,null,0,[new Fe(G,r),new Fe(J,r)],Le.CODE_39,new Date().getTime())}static findAsteriskPattern(r,a){let l=r.getSize(),h=r.getNextSet(0),f=0,m=h,x=!1,A=a.length;for(let T=h;T<l;T++)if(r.get(T)!==x)a[f]++;else{if(f===A-1){if(this.toNarrowWidePattern(a)===qt.ASTERISK_ENCODING&&r.isRange(Math.max(0,m-Math.floor((T-m)/2)),m,!1))return[m,T];m+=a[0]+a[1],a.copyWithin(0,2,2+f-1),a[f-1]=0,a[f]=0,f--}else f++;a[f]=1,x=!x}throw new he}static toNarrowWidePattern(r){let a=r.length,l=0,h;do{let f=2147483647;for(let A of r)A<f&&A>l&&(f=A);l=f,h=0;let m=0,x=0;for(let A=0;A<a;A++){let T=r[A];T>l&&(x|=1<<a-1-A,h++,m+=T)}if(h===3){for(let A=0;A<a&&h>0;A++){let T=r[A];if(T>l&&(h--,T*2>=m))return-1}return x}}while(h>3);return-1}static patternToChar(r){for(let a=0;a<qt.CHARACTER_ENCODINGS.length;a++)if(qt.CHARACTER_ENCODINGS[a]===r)return qt.ALPHABET_STRING.charAt(a);if(r===qt.ASTERISK_ENCODING)return"*";throw new he}static decodeExtended(r){let a=r.length,l="";for(let h=0;h<a;h++){let f=r.charAt(h);if(f==="+"||f==="$"||f==="%"||f==="/"){let m=r.charAt(h+1),x="\0";switch(f){case"+":if(m>="A"&&m<="Z")x=String.fromCharCode(m.charCodeAt(0)+32);else throw new j;break;case"$":if(m>="A"&&m<="Z")x=String.fromCharCode(m.charCodeAt(0)-64);else throw new j;break;case"%":if(m>="A"&&m<="E")x=String.fromCharCode(m.charCodeAt(0)-38);else if(m>="F"&&m<="J")x=String.fromCharCode(m.charCodeAt(0)-11);else if(m>="K"&&m<="O")x=String.fromCharCode(m.charCodeAt(0)+16);else if(m>="P"&&m<="T")x=String.fromCharCode(m.charCodeAt(0)+43);else if(m==="U")x="\0";else if(m==="V")x="@";else if(m==="W")x="`";else if(m==="X"||m==="Y"||m==="Z")x="";else throw new j;break;case"/":if(m>="A"&&m<="O")x=String.fromCharCode(m.charCodeAt(0)-32);else if(m==="Z")x=":";else throw new j;break}l+=x,h++}else l+=f}return l}}qt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",qt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],qt.ASTERISK_ENCODING=148;class rt extends Wt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(r,a,l){let h=this.decodeStart(a),f=this.decodeEnd(a),m=new X;rt.decodeMiddle(a,h[1],f[0],m);let x=m.toString(),A=null;l!=null&&(A=l.get(De.ALLOWED_LENGTHS)),A==null&&(A=rt.DEFAULT_ALLOWED_LENGTHS);let T=x.length,R=!1,P=0;for(let J of A){if(T===J){R=!0;break}J>P&&(P=J)}if(!R&&T>P&&(R=!0),!R)throw new j;const k=[new Fe(h[1],r),new Fe(f[0],r)];return new Ve(x,null,0,k,Le.ITF,new Date().getTime())}static decodeMiddle(r,a,l,h){let f=new Int32Array(10),m=new Int32Array(5),x=new Int32Array(5);for(f.fill(0),m.fill(0),x.fill(0);a<l;){Wt.recordPattern(r,a,f);for(let T=0;T<5;T++){let R=2*T;m[T]=f[R],x[T]=f[R+1]}let A=rt.decodeDigit(m);h.append(A.toString()),A=this.decodeDigit(x),h.append(A.toString()),f.forEach(function(T){a+=T})}}decodeStart(r){let a=rt.skipWhiteSpace(r),l=rt.findGuardPattern(r,a,rt.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(r,l[0]),l}validateQuietZone(r,a){let l=this.narrowLineWidth*10;l=l<a?l:a;for(let h=a-1;l>0&&h>=0&&!r.get(h);h--)l--;if(l!==0)throw new he}static skipWhiteSpace(r){const a=r.getSize(),l=r.getNextSet(0);if(l===a)throw new he;return l}decodeEnd(r){r.reverse();try{let a=rt.skipWhiteSpace(r),l;try{l=rt.findGuardPattern(r,a,rt.END_PATTERN_REVERSED[0])}catch(f){f instanceof he&&(l=rt.findGuardPattern(r,a,rt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,l[0]);let h=l[0];return l[0]=r.getSize()-l[1],l[1]=r.getSize()-h,l}finally{r.reverse()}}static findGuardPattern(r,a,l){let h=l.length,f=new Int32Array(h),m=r.getSize(),x=!1,A=0,T=a;f.fill(0);for(let R=a;R<m;R++)if(r.get(R)!==x)f[A]++;else{if(A===h-1){if(Wt.patternMatchVariance(f,l,rt.MAX_INDIVIDUAL_VARIANCE)<rt.MAX_AVG_VARIANCE)return[T,R];T+=f[0]+f[1],K.arraycopy(f,2,f,0,A-1),f[A-1]=0,f[A]=0,A--}else A++;f[A]=1,x=!x}throw new he}static decodeDigit(r){let a=rt.MAX_AVG_VARIANCE,l=-1,h=rt.PATTERNS.length;for(let f=0;f<h;f++){let m=rt.PATTERNS[f],x=Wt.patternMatchVariance(r,m,rt.MAX_INDIVIDUAL_VARIANCE);x<a?(a=x,l=f):x===a&&(l=-1)}if(l>=0)return l%10;throw new he}}rt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],rt.MAX_AVG_VARIANCE=.38,rt.MAX_INDIVIDUAL_VARIANCE=.5,rt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],rt.START_PATTERN=Int32Array.from([1,1,1,1]),rt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class fn extends Wt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(r){let a=!1,l,h=0,f=Int32Array.from([0,0,0]);for(;!a;){f=Int32Array.from([0,0,0]),l=fn.findGuardPattern(r,h,!1,this.START_END_PATTERN,f);let m=l[0];h=l[1];let x=m-(h-m);x>=0&&(a=r.isRange(x,m,!1))}return l}static checkChecksum(r){return fn.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let a=r.length;if(a===0)return!1;let l=parseInt(r.charAt(a-1),10);return fn.getStandardUPCEANChecksum(r.substring(0,a-1))===l}static getStandardUPCEANChecksum(r){let a=r.length,l=0;for(let h=a-1;h>=0;h-=2){let f=r.charAt(h).charCodeAt(0)-48;if(f<0||f>9)throw new j;l+=f}l*=3;for(let h=a-2;h>=0;h-=2){let f=r.charAt(h).charCodeAt(0)-48;if(f<0||f>9)throw new j;l+=f}return(1e3-l)%10}static decodeEnd(r,a){return fn.findGuardPattern(r,a,!1,fn.START_END_PATTERN,new Int32Array(fn.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(r,a,l,h){return this.findGuardPattern(r,a,l,h,new Int32Array(h.length))}static findGuardPattern(r,a,l,h,f){let m=r.getSize();a=l?r.getNextUnset(a):r.getNextSet(a);let x=0,A=a,T=h.length,R=l;for(let P=a;P<m;P++)if(r.get(P)!==R)f[x]++;else{if(x===T-1){if(Wt.patternMatchVariance(f,h,fn.MAX_INDIVIDUAL_VARIANCE)<fn.MAX_AVG_VARIANCE)return Int32Array.from([A,P]);A+=f[0]+f[1];let k=f.slice(2,f.length-1);for(let G=0;G<x-1;G++)f[G]=k[G];f[x-1]=0,f[x]=0,x--}else x++;f[x]=1,R=!R}throw new he}static decodeDigit(r,a,l,h){this.recordPattern(r,l,a);let f=this.MAX_AVG_VARIANCE,m=-1,x=h.length;for(let A=0;A<x;A++){let T=h[A],R=Wt.patternMatchVariance(a,T,fn.MAX_INDIVIDUAL_VARIANCE);R<f&&(f=R,m=A)}if(m>=0)return m;throw new he}}fn.MAX_AVG_VARIANCE=.48,fn.MAX_INDIVIDUAL_VARIANCE=.7,fn.START_END_PATTERN=Int32Array.from([1,1,1]),fn.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),fn.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),fn.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class pr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,a,l){let h=this.decodeRowStringBuffer,f=this.decodeMiddle(a,l,h),m=h.toString(),x=pr.parseExtensionString(m),A=[new Fe((l[0]+l[1])/2,r),new Fe(f,r)],T=new Ve(m,null,0,A,Le.UPC_EAN_EXTENSION,new Date().getTime());return x!=null&&T.putAllMetadata(x),T}decodeMiddle(r,a,l){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=r.getSize(),m=a[1],x=0;for(let T=0;T<5&&m<f;T++){let R=fn.decodeDigit(r,h,m,fn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+R%10);for(let P of h)m+=P;R>=10&&(x|=1<<4-T),T!==4&&(m=r.getNextSet(m),m=r.getNextUnset(m))}if(l.length!==5)throw new he;let A=this.determineCheckDigit(x);if(pr.extensionChecksum(l.toString())!==A)throw new he;return m}static extensionChecksum(r){let a=r.length,l=0;for(let h=a-2;h>=0;h-=2)l+=r.charAt(h).charCodeAt(0)-48;l*=3;for(let h=a-1;h>=0;h-=2)l+=r.charAt(h).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(r){for(let a=0;a<10;a++)if(r===this.CHECK_DIGIT_ENCODINGS[a])return a;throw new he}static parseExtensionString(r){if(r.length!==5)return null;let a=pr.parseExtension5String(r);return a==null?null:new Map([[yt.SUGGESTED_PRICE,a]])}static parseExtension5String(r){let a;switch(r.charAt(0)){case"0":a="";break;case"5":a="$";break;case"9":switch(r){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}a="";break;default:a="";break}let l=parseInt(r.substring(1)),h=(l/100).toString(),f=l%100,m=f<10?"0"+f:f.toString();return a+h+"."+m}}class Ss{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,a,l){let h=this.decodeRowStringBuffer,f=this.decodeMiddle(a,l,h),m=h.toString(),x=Ss.parseExtensionString(m),A=[new Fe((l[0]+l[1])/2,r),new Fe(f,r)],T=new Ve(m,null,0,A,Le.UPC_EAN_EXTENSION,new Date().getTime());return x!=null&&T.putAllMetadata(x),T}decodeMiddle(r,a,l){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=r.getSize(),m=a[1],x=0;for(let A=0;A<2&&m<f;A++){let T=fn.decodeDigit(r,h,m,fn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+T%10);for(let R of h)m+=R;T>=10&&(x|=1<<1-A),A!==1&&(m=r.getNextSet(m),m=r.getNextUnset(m))}if(l.length!==2)throw new he;if(parseInt(l.toString())%4!==x)throw new he;return m}static parseExtensionString(r){return r.length!==2?null:new Map([[yt.ISSUE_NUMBER,parseInt(r)]])}}class nr{static decodeRow(r,a,l){let h=fn.findGuardPattern(a,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new pr().decodeRow(r,a,h)}catch{return new Ss().decodeRow(r,a,h)}}}nr.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class At extends fn{constructor(){super(),this.decodeRowStringBuffer="",At.L_AND_G_PATTERNS=At.L_PATTERNS.map(r=>Int32Array.from(r));for(let r=10;r<20;r++){let a=At.L_PATTERNS[r-10],l=new Int32Array(a.length);for(let h=0;h<a.length;h++)l[h]=a[a.length-h-1];At.L_AND_G_PATTERNS[r]=l}}decodeRow(r,a,l){let h=At.findStartGuardPattern(a),f=l==null?null:l.get(De.NEED_RESULT_POINT_CALLBACK);if(f!=null){const Re=new Fe((h[0]+h[1])/2,r);f.foundPossibleResultPoint(Re)}let m=this.decodeMiddle(a,h,this.decodeRowStringBuffer),x=m.rowOffset,A=m.resultString;if(f!=null){const Re=new Fe(x,r);f.foundPossibleResultPoint(Re)}let T=this.decodeEnd(a,x);if(f!=null){const Re=new Fe((T[0]+T[1])/2,r);f.foundPossibleResultPoint(Re)}let R=T[1],P=R+(R-T[0]);if(P>=a.getSize()||!a.isRange(R,P,!1))throw new he;let k=A.toString();if(k.length<8)throw new j;if(!At.checkChecksum(k))throw new B;let G=(h[1]+h[0])/2,J=(T[1]+T[0])/2,te=this.getBarcodeFormat(),ce=[new Fe(G,r),new Fe(J,r)],ye=new Ve(k,null,0,ce,te,new Date().getTime()),Pe=0;try{let Re=nr.decodeRow(r,a,T[1]);ye.putMetadata(yt.UPC_EAN_EXTENSION,Re.getText()),ye.putAllMetadata(Re.getResultMetadata()),ye.addResultPoints(Re.getResultPoints()),Pe=Re.getText().length}catch{}let Me=l==null?null:l.get(De.ALLOWED_EAN_EXTENSIONS);if(Me!=null){let Re=!1;for(let St in Me)if(Pe.toString()===St){Re=!0;break}if(!Re)throw new he}return ye}decodeEnd(r,a){return At.findGuardPattern(r,a,!1,At.START_END_PATTERN,new Int32Array(At.START_END_PATTERN.length).fill(0))}static checkChecksum(r){return At.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let a=r.length;if(a===0)return!1;let l=parseInt(r.charAt(a-1),10);return At.getStandardUPCEANChecksum(r.substring(0,a-1))===l}static getStandardUPCEANChecksum(r){let a=r.length,l=0;for(let h=a-1;h>=0;h-=2){let f=r.charAt(h).charCodeAt(0)-48;if(f<0||f>9)throw new j;l+=f}l*=3;for(let h=a-2;h>=0;h-=2){let f=r.charAt(h).charCodeAt(0)-48;if(f<0||f>9)throw new j;l+=f}return(1e3-l)%10}}class an extends At{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,a,l){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=r.getSize(),m=a[1],x=0;for(let T=0;T<6&&m<f;T++){let R=At.decodeDigit(r,h,m,At.L_AND_G_PATTERNS);l+=String.fromCharCode(48+R%10);for(let P of h)m+=P;R>=10&&(x|=1<<5-T)}l=an.determineFirstDigit(l,x),m=At.findGuardPattern(r,m,!0,At.MIDDLE_PATTERN,new Int32Array(At.MIDDLE_PATTERN.length).fill(0))[1];for(let T=0;T<6&&m<f;T++){let R=At.decodeDigit(r,h,m,At.L_PATTERNS);l+=String.fromCharCode(48+R);for(let P of h)m+=P}return{rowOffset:m,resultString:l}}getBarcodeFormat(){return Le.EAN_13}static determineFirstDigit(r,a){for(let l=0;l<10;l++)if(a===this.FIRST_DIGIT_ENCODINGS[l])return r=String.fromCharCode(48+l)+r,r;throw new he}}an.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class ir extends At{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,a,l){const h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=r.getSize(),m=a[1];for(let A=0;A<4&&m<f;A++){let T=At.decodeDigit(r,h,m,At.L_PATTERNS);l+=String.fromCharCode(48+T);for(let R of h)m+=R}m=At.findGuardPattern(r,m,!0,At.MIDDLE_PATTERN,new Int32Array(At.MIDDLE_PATTERN.length).fill(0))[1];for(let A=0;A<4&&m<f;A++){let T=At.decodeDigit(r,h,m,At.L_PATTERNS);l+=String.fromCharCode(48+T);for(let R of h)m+=R}return{rowOffset:m,resultString:l}}getBarcodeFormat(){return Le.EAN_8}}class rr extends At{constructor(){super(...arguments),this.ean13Reader=new an}getBarcodeFormat(){return Le.UPC_A}decode(r,a){return this.maybeReturnResult(this.ean13Reader.decode(r))}decodeRow(r,a,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,a,l))}decodeMiddle(r,a,l){return this.ean13Reader.decodeMiddle(r,a,l)}maybeReturnResult(r){let a=r.getText();if(a.charAt(0)==="0"){let l=new Ve(a.substring(1),null,null,r.getResultPoints(),Le.UPC_A);return r.getResultMetadata()!=null&&l.putAllMetadata(r.getResultMetadata()),l}else throw new he}reset(){this.ean13Reader.reset()}}class Sn extends At{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(r,a,l){const h=this.decodeMiddleCounters.map(T=>T);h[0]=0,h[1]=0,h[2]=0,h[3]=0;const f=r.getSize();let m=a[1],x=0;for(let T=0;T<6&&m<f;T++){const R=Sn.decodeDigit(r,h,m,Sn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+R%10);for(let P of h)m+=P;R>=10&&(x|=1<<5-T)}let A=Sn.determineNumSysAndCheckDigit(l,x);return{rowOffset:m,resultString:A}}decodeEnd(r,a){return Sn.findGuardPatternWithoutCounters(r,a,!0,Sn.MIDDLE_END_PATTERN)}checkChecksum(r){return At.checkChecksum(Sn.convertUPCEtoUPCA(r))}static determineNumSysAndCheckDigit(r,a){for(let l=0;l<=1;l++)for(let h=0;h<10;h++)if(a===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][h]){let f=String.fromCharCode(48+l),m=String.fromCharCode(48+h);return f+r+m}throw he.getNotFoundInstance()}getBarcodeFormat(){return Le.UPC_E}static convertUPCEtoUPCA(r){const a=r.slice(1,7).split("").map(f=>f.charCodeAt(0)),l=new X;l.append(r.charAt(0));let h=a[5];switch(h){case 0:case 1:case 2:l.appendChars(a,0,2),l.append(h),l.append("0000"),l.appendChars(a,2,3);break;case 3:l.appendChars(a,0,3),l.append("00000"),l.appendChars(a,3,2);break;case 4:l.appendChars(a,0,4),l.append("00000"),l.append(a[4]);break;default:l.appendChars(a,0,5),l.append("0000"),l.append(h);break}return r.length>=8&&l.append(r.charAt(7)),l.toString()}}Sn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Sn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Gs extends Wt{constructor(r){super();let a=r==null?null:r.get(De.POSSIBLE_FORMATS),l=[];o(a)?(l.push(new an),l.push(new rr),l.push(new ir),l.push(new Sn)):(a.indexOf(Le.EAN_13)>-1&&l.push(new an),a.indexOf(Le.UPC_A)>-1&&l.push(new rr),a.indexOf(Le.EAN_8)>-1&&l.push(new ir),a.indexOf(Le.UPC_E)>-1&&l.push(new Sn)),this.readers=l}decodeRow(r,a,l){for(let h of this.readers)try{const f=h.decodeRow(r,a,l),m=f.getBarcodeFormat()===Le.EAN_13&&f.getText().charAt(0)==="0",x=l==null?null:l.get(De.POSSIBLE_FORMATS),A=x==null||x.includes(Le.UPC_A);if(m&&A){const T=f.getRawBytes(),R=new Ve(f.getText().substring(1),T,T?T.length:null,f.getResultPoints(),Le.UPC_A);return R.putAllMetadata(f.getResultMetadata()),R}return f}catch{}throw new he}reset(){for(let r of this.readers)r.reset()}}class zn extends Wt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(r,a){for(let l=0;l<a.length;l++)if(Wt.patternMatchVariance(r,a[l],zn.MAX_INDIVIDUAL_VARIANCE)<zn.MAX_AVG_VARIANCE)return l;throw new he}static count(r){return Qe.sum(new Int32Array(r))}static increment(r,a){let l=0,h=a[0];for(let f=1;f<r.length;f++)a[f]>h&&(h=a[f],l=f);r[l]++}static decrement(r,a){let l=0,h=a[0];for(let f=1;f<r.length;f++)a[f]<h&&(h=a[f],l=f);r[l]--}static isFinderPattern(r){let a=r[0]+r[1],l=a+r[2]+r[3],h=a/l;if(h>=zn.MIN_FINDER_PATTERN_RATIO&&h<=zn.MAX_FINDER_PATTERN_RATIO){let f=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;for(let x of r)x>m&&(m=x),x<f&&(f=x);return m<10*f}return!1}}zn.MAX_AVG_VARIANCE=.2,zn.MAX_INDIVIDUAL_VARIANCE=.45,zn.MIN_FINDER_PATTERN_RATIO=9.5/12,zn.MAX_FINDER_PATTERN_RATIO=12.5/14;class _i{constructor(r,a){this.value=r,this.checksumPortion=a}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(r){if(!(r instanceof _i))return!1;const a=r;return this.value===a.value&&this.checksumPortion===a.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class xr{constructor(r,a,l,h,f){this.value=r,this.startEnd=a,this.value=r,this.startEnd=a,this.resultPoints=new Array,this.resultPoints.push(new Fe(l,f)),this.resultPoints.push(new Fe(h,f))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(r){if(!(r instanceof xr))return!1;const a=r;return this.value===a.value}hashCode(){return this.value}}class Gi{constructor(){}static getRSSvalue(r,a,l){let h=0;for(let A of r)h+=A;let f=0,m=0,x=r.length;for(let A=0;A<x-1;A++){let T;for(T=1,m|=1<<A;T<r[A];T++,m&=~(1<<A)){let R=Gi.combins(h-T-1,x-A-2);if(l&&m===0&&h-T-(x-A-1)>=x-A-1&&(R-=Gi.combins(h-T-(x-A),x-A-2)),x-A-1>1){let P=0;for(let k=h-T-(x-A-2);k>a;k--)P+=Gi.combins(h-T-k-1,x-A-3);R-=P*(x-1-A)}else h-T>a&&R--;f+=R}h-=T}return f}static combins(r,a){let l,h;r-a>a?(h=a,l=r-a):(h=r-a,l=a);let f=1,m=1;for(let x=r;x>l;x--)f*=x,m<=h&&(f/=m,m++);for(;m<=h;)f/=m,m++;return f}}class Xr{static buildBitArray(r){let a=r.length*2-1;r[r.length-1].getRightChar()==null&&(a-=1);let l=12*a,h=new _e(l),f=0,x=r[0].getRightChar().getValue();for(let A=11;A>=0;--A)(x&1<<A)!=0&&h.set(f),f++;for(let A=1;A<r.length;++A){let T=r[A],R=T.getLeftChar().getValue();for(let P=11;P>=0;--P)(R&1<<P)!=0&&h.set(f),f++;if(T.getRightChar()!=null){let P=T.getRightChar().getValue();for(let k=11;k>=0;--k)(P&1<<k)!=0&&h.set(f),f++}}return h}}class ee{constructor(r,a){a?this.decodedInformation=null:(this.finished=r,this.decodedInformation=a)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class ht{constructor(r){this.newPosition=r}getNewPosition(){return this.newPosition}}class nt extends ht{constructor(r,a){super(r),this.value=a}getValue(){return this.value}isFNC1(){return this.value===nt.FNC1}}nt.FNC1="$";class In extends ht{constructor(r,a,l){super(r),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=a}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class en extends ht{constructor(r,a,l){if(super(r),a<0||a>10||l<0||l>10)throw new j;this.firstDigit=a,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===en.FNC1}isSecondDigitFNC1(){return this.secondDigit===en.FNC1}isAnyFNC1(){return this.firstDigit===en.FNC1||this.secondDigit===en.FNC1}}en.FNC1=10;class Ue{constructor(){}static parseFieldsInGeneralPurpose(r){if(!r)return null;if(r.length<2)throw new he;let a=r.substring(0,2);for(let f of Ue.TWO_DIGIT_DATA_LENGTH)if(f[0]===a)return f[1]===Ue.VARIABLE_LENGTH?Ue.processVariableAI(2,f[2],r):Ue.processFixedAI(2,f[1],r);if(r.length<3)throw new he;let l=r.substring(0,3);for(let f of Ue.THREE_DIGIT_DATA_LENGTH)if(f[0]===l)return f[1]===Ue.VARIABLE_LENGTH?Ue.processVariableAI(3,f[2],r):Ue.processFixedAI(3,f[1],r);for(let f of Ue.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(f[0]===l)return f[1]===Ue.VARIABLE_LENGTH?Ue.processVariableAI(4,f[2],r):Ue.processFixedAI(4,f[1],r);if(r.length<4)throw new he;let h=r.substring(0,4);for(let f of Ue.FOUR_DIGIT_DATA_LENGTH)if(f[0]===h)return f[1]===Ue.VARIABLE_LENGTH?Ue.processVariableAI(4,f[2],r):Ue.processFixedAI(4,f[1],r);throw new he}static processFixedAI(r,a,l){if(l.length<r)throw new he;let h=l.substring(0,r);if(l.length<r+a)throw new he;let f=l.substring(r,r+a),m=l.substring(r+a),x="("+h+")"+f,A=Ue.parseFieldsInGeneralPurpose(m);return A==null?x:x+A}static processVariableAI(r,a,l){let h=l.substring(0,r),f;l.length<r+a?f=l.length:f=r+a;let m=l.substring(r,f),x=l.substring(f),A="("+h+")"+m,T=Ue.parseFieldsInGeneralPurpose(x);return T==null?A:A+T}}Ue.VARIABLE_LENGTH=[],Ue.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ue.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ue.VARIABLE_LENGTH,20],["22",Ue.VARIABLE_LENGTH,29],["30",Ue.VARIABLE_LENGTH,8],["37",Ue.VARIABLE_LENGTH,8],["90",Ue.VARIABLE_LENGTH,30],["91",Ue.VARIABLE_LENGTH,30],["92",Ue.VARIABLE_LENGTH,30],["93",Ue.VARIABLE_LENGTH,30],["94",Ue.VARIABLE_LENGTH,30],["95",Ue.VARIABLE_LENGTH,30],["96",Ue.VARIABLE_LENGTH,30],["97",Ue.VARIABLE_LENGTH,3],["98",Ue.VARIABLE_LENGTH,30],["99",Ue.VARIABLE_LENGTH,30]],Ue.THREE_DIGIT_DATA_LENGTH=[["240",Ue.VARIABLE_LENGTH,30],["241",Ue.VARIABLE_LENGTH,30],["242",Ue.VARIABLE_LENGTH,6],["250",Ue.VARIABLE_LENGTH,30],["251",Ue.VARIABLE_LENGTH,30],["253",Ue.VARIABLE_LENGTH,17],["254",Ue.VARIABLE_LENGTH,20],["400",Ue.VARIABLE_LENGTH,30],["401",Ue.VARIABLE_LENGTH,30],["402",17],["403",Ue.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ue.VARIABLE_LENGTH,20],["421",Ue.VARIABLE_LENGTH,15],["422",3],["423",Ue.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ue.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ue.VARIABLE_LENGTH,15],["391",Ue.VARIABLE_LENGTH,18],["392",Ue.VARIABLE_LENGTH,15],["393",Ue.VARIABLE_LENGTH,18],["703",Ue.VARIABLE_LENGTH,30]],Ue.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ue.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ue.VARIABLE_LENGTH,20],["8003",Ue.VARIABLE_LENGTH,30],["8004",Ue.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ue.VARIABLE_LENGTH,30],["8008",Ue.VARIABLE_LENGTH,12],["8018",18],["8020",Ue.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ue.VARIABLE_LENGTH,70],["8200",Ue.VARIABLE_LENGTH,70]];class Hn{constructor(r){this.buffer=new X,this.information=r}decodeAllCodes(r,a){let l=a,h=null;do{let f=this.decodeGeneralPurposeField(l,h),m=Ue.parseFieldsInGeneralPurpose(f.getNewString());if(m!=null&&r.append(m),f.isRemaining()?h=""+f.getRemainingValue():h=null,l===f.getNewPosition())break;l=f.getNewPosition()}while(!0);return r.toString()}isStillNumeric(r){if(r+7>this.information.getSize())return r+4<=this.information.getSize();for(let a=r;a<r+3;++a)if(this.information.get(a))return!0;return this.information.get(r+3)}decodeNumeric(r){if(r+7>this.information.getSize()){let f=this.extractNumericValueFromBitArray(r,4);return f===0?new en(this.information.getSize(),en.FNC1,en.FNC1):new en(this.information.getSize(),f-1,en.FNC1)}let a=this.extractNumericValueFromBitArray(r,7),l=(a-8)/11,h=(a-8)%11;return new en(r+7,l,h)}extractNumericValueFromBitArray(r,a){return Hn.extractNumericValueFromBitArray(this.information,r,a)}static extractNumericValueFromBitArray(r,a,l){let h=0;for(let f=0;f<l;++f)r.get(a+f)&&(h|=1<<l-f-1);return h}decodeGeneralPurposeField(r,a){this.buffer.setLengthToZero(),a!=null&&this.buffer.append(a),this.current.setPosition(r);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new In(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new In(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let r,a;do{let l=this.current.getPosition();if(this.current.isAlpha()?(a=this.parseAlphaBlock(),r=a.isFinished()):this.current.isIsoIec646()?(a=this.parseIsoIec646Block(),r=a.isFinished()):(a=this.parseNumericBlock(),r=a.isFinished()),!(l!==this.current.getPosition())&&!r)break}while(!r);return a.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let r=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFirstDigitFNC1()){let a;return r.isSecondDigitFNC1()?a=new In(this.current.getPosition(),this.buffer.toString()):a=new In(this.current.getPosition(),this.buffer.toString(),r.getSecondDigit()),new ee(!0,a)}if(this.buffer.append(r.getFirstDigit()),r.isSecondDigitFNC1()){let a=new In(this.current.getPosition(),this.buffer.toString());return new ee(!0,a)}this.buffer.append(r.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new ee(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let r=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let a=new In(this.current.getPosition(),this.buffer.toString());return new ee(!0,a)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new ee(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let r=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let a=new In(this.current.getPosition(),this.buffer.toString());return new ee(!0,a)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new ee(!1)}isStillIsoIec646(r){if(r+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(r,5);if(a>=5&&a<16)return!0;if(r+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(r,7);if(l>=64&&l<116)return!0;if(r+8>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(r,8);return h>=232&&h<253}decodeIsoIec646(r){let a=this.extractNumericValueFromBitArray(r,5);if(a===15)return new nt(r+5,nt.FNC1);if(a>=5&&a<15)return new nt(r+5,"0"+(a-5));let l=this.extractNumericValueFromBitArray(r,7);if(l>=64&&l<90)return new nt(r+7,""+(l+1));if(l>=90&&l<116)return new nt(r+7,""+(l+7));let h=this.extractNumericValueFromBitArray(r,8),f;switch(h){case 232:f="!";break;case 233:f='"';break;case 234:f="%";break;case 235:f="&";break;case 236:f="'";break;case 237:f="(";break;case 238:f=")";break;case 239:f="*";break;case 240:f="+";break;case 241:f=",";break;case 242:f="-";break;case 243:f=".";break;case 244:f="/";break;case 245:f=":";break;case 246:f=";";break;case 247:f="<";break;case 248:f="=";break;case 249:f=">";break;case 250:f="?";break;case 251:f="_";break;case 252:f=" ";break;default:throw new j}return new nt(r+8,f)}isStillAlpha(r){if(r+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(r,5);if(a>=5&&a<16)return!0;if(r+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(r,6);return l>=16&&l<63}decodeAlphanumeric(r){let a=this.extractNumericValueFromBitArray(r,5);if(a===15)return new nt(r+5,nt.FNC1);if(a>=5&&a<15)return new nt(r+5,"0"+(a-5));let l=this.extractNumericValueFromBitArray(r,6);if(l>=32&&l<58)return new nt(r+6,""+(l+33));let h;switch(l){case 58:h="*";break;case 59:h=",";break;case 60:h="-";break;case 61:h=".";break;case 62:h="/";break;default:throw new Qn("Decoding invalid alphanumeric value: "+l)}return new nt(r+6,h)}isAlphaTo646ToAlphaLatch(r){if(r+1>this.information.getSize())return!1;for(let a=0;a<5&&a+r<this.information.getSize();++a)if(a===2){if(!this.information.get(r+2))return!1}else if(this.information.get(r+a))return!1;return!0}isAlphaOr646ToNumericLatch(r){if(r+3>this.information.getSize())return!1;for(let a=r;a<r+3;++a)if(this.information.get(a))return!1;return!0}isNumericToAlphaNumericLatch(r){if(r+1>this.information.getSize())return!1;for(let a=0;a<4&&a+r<this.information.getSize();++a)if(this.information.get(r+a))return!1;return!0}}class Tn{constructor(r){this.information=r,this.generalDecoder=new Hn(r)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class wt extends Tn{constructor(r){super(r)}encodeCompressedGtin(r,a){r.append("(01)");let l=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,a,l)}encodeCompressedGtinWithoutAI(r,a,l){for(let h=0;h<4;++h){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(a+10*h,10);f/100===0&&r.append("0"),f/10===0&&r.append("0"),r.append(f)}wt.appendCheckDigit(r,l)}static appendCheckDigit(r,a){let l=0;for(let h=0;h<13;h++){let f=r.charAt(h+a).charCodeAt(0)-48;l+=(h&1)===0?3*f:f}l=10-l%10,l===10&&(l=0),r.append(l)}}wt.GTIN_SIZE=40;class hi extends wt{constructor(r){super(r)}parseInformation(){let r=new X;r.append("(01)");let a=r.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(hi.HEADER_SIZE,4);return r.append(l),this.encodeCompressedGtinWithoutAI(r,hi.HEADER_SIZE+4,a),this.getGeneralDecoder().decodeAllCodes(r,hi.HEADER_SIZE+44)}}hi.HEADER_SIZE=4;class fi extends Tn{constructor(r){super(r)}parseInformation(){let r=new X;return this.getGeneralDecoder().decodeAllCodes(r,fi.HEADER_SIZE)}}fi.HEADER_SIZE=5;class Ia extends wt{constructor(r){super(r)}encodeCompressedWeight(r,a,l){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(a,l);this.addWeightCode(r,h);let f=this.checkWeight(h),m=1e5;for(let x=0;x<5;++x)f/m===0&&r.append("0"),m/=10;r.append(f)}}class sr extends Ia{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()!=sr.HEADER_SIZE+Ia.GTIN_SIZE+sr.WEIGHT_SIZE)throw new he;let r=new X;return this.encodeCompressedGtin(r,sr.HEADER_SIZE),this.encodeCompressedWeight(r,sr.HEADER_SIZE+Ia.GTIN_SIZE,sr.WEIGHT_SIZE),r.toString()}}sr.HEADER_SIZE=5,sr.WEIGHT_SIZE=15;class il extends sr{constructor(r){super(r)}addWeightCode(r,a){r.append("(3103)")}checkWeight(r){return r}}class Kr extends sr{constructor(r){super(r)}addWeightCode(r,a){a<1e4?r.append("(3202)"):r.append("(3203)")}checkWeight(r){return r<1e4?r:r-1e4}}class Ni extends wt{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<Ni.HEADER_SIZE+wt.GTIN_SIZE)throw new he;let r=new X;this.encodeCompressedGtin(r,Ni.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(Ni.HEADER_SIZE+wt.GTIN_SIZE,Ni.LAST_DIGIT_SIZE);r.append("(392"),r.append(a),r.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(Ni.HEADER_SIZE+wt.GTIN_SIZE+Ni.LAST_DIGIT_SIZE,null);return r.append(l.getNewString()),r.toString()}}Ni.HEADER_SIZE=8,Ni.LAST_DIGIT_SIZE=2;class vn extends wt{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<vn.HEADER_SIZE+wt.GTIN_SIZE)throw new he;let r=new X;this.encodeCompressedGtin(r,vn.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(vn.HEADER_SIZE+wt.GTIN_SIZE,vn.LAST_DIGIT_SIZE);r.append("(393"),r.append(a),r.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(vn.HEADER_SIZE+wt.GTIN_SIZE+vn.LAST_DIGIT_SIZE,vn.FIRST_THREE_DIGITS_SIZE);l/100==0&&r.append("0"),l/10==0&&r.append("0"),r.append(l);let h=this.getGeneralDecoder().decodeGeneralPurposeField(vn.HEADER_SIZE+wt.GTIN_SIZE+vn.LAST_DIGIT_SIZE+vn.FIRST_THREE_DIGITS_SIZE,null);return r.append(h.getNewString()),r.toString()}}vn.HEADER_SIZE=8,vn.LAST_DIGIT_SIZE=2,vn.FIRST_THREE_DIGITS_SIZE=10;class Ot extends Ia{constructor(r,a,l){super(r),this.dateCode=l,this.firstAIdigits=a}parseInformation(){if(this.getInformation().getSize()!=Ot.HEADER_SIZE+Ot.GTIN_SIZE+Ot.WEIGHT_SIZE+Ot.DATE_SIZE)throw new he;let r=new X;return this.encodeCompressedGtin(r,Ot.HEADER_SIZE),this.encodeCompressedWeight(r,Ot.HEADER_SIZE+Ot.GTIN_SIZE,Ot.WEIGHT_SIZE),this.encodeCompressedDate(r,Ot.HEADER_SIZE+Ot.GTIN_SIZE+Ot.WEIGHT_SIZE),r.toString()}encodeCompressedDate(r,a){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(a,Ot.DATE_SIZE);if(l==38400)return;r.append("("),r.append(this.dateCode),r.append(")");let h=l%32;l/=32;let f=l%12+1;l/=12;let m=l;m/10==0&&r.append("0"),r.append(m),f/10==0&&r.append("0"),r.append(f),h/10==0&&r.append("0"),r.append(h)}addWeightCode(r,a){r.append("("),r.append(this.firstAIdigits),r.append(a/1e5),r.append(")")}checkWeight(r){return r%1e5}}Ot.HEADER_SIZE=8,Ot.WEIGHT_SIZE=20,Ot.DATE_SIZE=16;function qi(M){try{if(M.get(1))return new hi(M);if(!M.get(2))return new fi(M);switch(Hn.extractNumericValueFromBitArray(M,1,4)){case 4:return new il(M);case 5:return new Kr(M)}switch(Hn.extractNumericValueFromBitArray(M,1,5)){case 12:return new Ni(M);case 13:return new vn(M)}switch(Hn.extractNumericValueFromBitArray(M,1,7)){case 56:return new Ot(M,"310","11");case 57:return new Ot(M,"320","11");case 58:return new Ot(M,"310","13");case 59:return new Ot(M,"320","13");case 60:return new Ot(M,"310","15");case 61:return new Ot(M,"320","15");case 62:return new Ot(M,"310","17");case 63:return new Ot(M,"320","17")}}catch(r){throw console.log(r),new Qn("unknown decoder: "+M)}}class Ai{constructor(r,a,l,h){this.leftchar=r,this.rightchar=a,this.finderpattern=l,this.maybeLast=h}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(r,a){return r instanceof Ai?Ai.equalsOrNull(r.leftchar,a.leftchar)&&Ai.equalsOrNull(r.rightchar,a.rightchar)&&Ai.equalsOrNull(r.finderpattern,a.finderpattern):!1}static equalsOrNull(r,a){return r===null?a===null:Ai.equals(r,a)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Pn{constructor(r,a,l){this.pairs=r,this.rowNumber=a,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(r){return this.checkEqualitity(this,r)}toString(){return"{ "+this.pairs+" }"}equals(r,a){return r instanceof Pn?this.checkEqualitity(r,a)&&r.wasReversed===a.wasReversed:!1}checkEqualitity(r,a){if(!r||!a)return;let l;return r.forEach((h,f)=>{a.forEach(m=>{h.getLeftChar().getValue()===m.getLeftChar().getValue()&&h.getRightChar().getValue()===m.getRightChar().getValue()&&h.getFinderPatter().getValue()===m.getFinderPatter().getValue()&&(l=!0)})}),l}}class Ie extends zn{constructor(r){super(...arguments),this.pairs=new Array(Ie.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=r===!0}decodeRow(r,a,l){this.pairs.length=0,this.startFromEven=!1;try{return Ie.constructResult(this.decodeRow2pairs(r,a))}catch(h){this.verbose&&console.log(h)}return this.pairs.length=0,this.startFromEven=!0,Ie.constructResult(this.decodeRow2pairs(r,a))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(r,a){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(a,this.pairs,r))}catch(f){if(f instanceof he){if(!this.pairs.length)throw new he;l=!0}}if(this.checkChecksum())return this.pairs;let h;if(this.rows.length?h=!0:h=!1,this.storeRow(r,!1),h){let f=this.checkRowsBoolean(!1);if(f!=null||(f=this.checkRowsBoolean(!0),f!=null))return f}throw new he}checkRowsBoolean(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());let a=null;try{a=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return r&&(this.rows=this.rows.reverse()),a}checkRows(r,a){for(let l=a;l<this.rows.length;l++){let h=this.rows[l];this.pairs.length=0;for(let m of r)this.pairs.push(m.getPairs());if(this.pairs.push(h.getPairs()),!Ie.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let f=new Array(r);f.push(h);try{return this.checkRows(f,l+1)}catch(m){this.verbose&&console.log(m)}}throw new he}static isValidSequence(r){for(let a of Ie.FINDER_PATTERN_SEQUENCES){if(r.length>a.length)continue;let l=!0;for(let h=0;h<r.length;h++)if(r[h].getFinderPattern().getValue()!=a[h]){l=!1;break}if(l)return!0}return!1}storeRow(r,a){let l=0,h=!1,f=!1;for(;l<this.rows.length;){let m=this.rows[l];if(m.getRowNumber()>r){f=m.isEquivalent(this.pairs);break}h=m.isEquivalent(this.pairs),l++}f||h||Ie.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new Pn(this.pairs,r,a)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(r,a){for(let l of a)if(l.getPairs().length!==r.length){for(let h of l.getPairs())for(let f of r)if(Ai.equals(h,f))break}}static isPartialRow(r,a){for(let l of a){let h=!0;for(let f of r){let m=!1;for(let x of l.getPairs())if(f.equals(x)){m=!0;break}if(!m){h=!1;break}}if(h)return!0}return!1}getRows(){return this.rows}static constructResult(r){let a=Xr.buildBitArray(r),h=qi(a).parseInformation(),f=r[0].getFinderPattern().getResultPoints(),m=r[r.length-1].getFinderPattern().getResultPoints(),x=[f[0],f[1],m[0],m[1]];return new Ve(h,null,null,x,Le.RSS_EXPANDED,null)}checkChecksum(){let r=this.pairs.get(0),a=r.getLeftChar(),l=r.getRightChar();if(l==null)return!1;let h=l.getChecksumPortion(),f=2;for(let x=1;x<this.pairs.size();++x){let A=this.pairs.get(x);h+=A.getLeftChar().getChecksumPortion(),f++;let T=A.getRightChar();T!=null&&(h+=T.getChecksumPortion(),f++)}return h%=211,211*(f-4)+h==a.getValue()}static getNextSecondBar(r,a){let l;return r.get(a)?(l=r.getNextUnset(a),l=r.getNextSet(l)):(l=r.getNextSet(a),l=r.getNextUnset(l)),l}retrieveNextPair(r,a,l){let h=a.length%2==0;this.startFromEven&&(h=!h);let f,m=!0,x=-1;do this.findNextPair(r,a,x),f=this.parseFoundFinderPattern(r,l,h),f==null?x=Ie.getNextSecondBar(r,this.startEnd[0]):m=!1;while(m);let A=this.decodeDataCharacter(r,f,h,!0);if(!this.isEmptyPair(a)&&a[a.length-1].mustBeLast())throw new he;let T;try{T=this.decodeDataCharacter(r,f,h,!1)}catch(R){T=null,this.verbose&&console.log(R)}return new Ai(A,T,f,!0)}isEmptyPair(r){return r.length===0}findNextPair(r,a,l){let h=this.getDecodeFinderCounters();h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=r.getSize(),m;l>=0?m=l:this.isEmptyPair(a)?m=0:m=a[a.length-1].getFinderPattern().getStartEnd()[1];let x=a.length%2!=0;this.startFromEven&&(x=!x);let A=!1;for(;m<f&&(A=!r.get(m),!!A);)m++;let T=0,R=m;for(let P=m;P<f;P++)if(r.get(P)!=A)h[T]++;else{if(T==3){if(x&&Ie.reverseCounters(h),Ie.isFinderPattern(h)){this.startEnd[0]=R,this.startEnd[1]=P;return}x&&Ie.reverseCounters(h),R+=h[0]+h[1],h[0]=h[2],h[1]=h[3],h[2]=0,h[3]=0,T--}else T++;h[T]=1,A=!A}throw new he}static reverseCounters(r){let a=r.length;for(let l=0;l<a/2;++l){let h=r[l];r[l]=r[a-l-1],r[a-l-1]=h}}parseFoundFinderPattern(r,a,l){let h,f,m;if(l){let T=this.startEnd[0]-1;for(;T>=0&&!r.get(T);)T--;T++,h=this.startEnd[0]-T,f=T,m=this.startEnd[1]}else f=this.startEnd[0],m=r.getNextUnset(this.startEnd[1]+1),h=m-this.startEnd[1];let x=this.getDecodeFinderCounters();K.arraycopy(x,0,x,1,x.length-1),x[0]=h;let A;try{A=this.parseFinderValue(x,Ie.FINDER_PATTERNS)}catch{return null}return new xr(A,[f,m],f,m,a)}decodeDataCharacter(r,a,l,h){let f=this.getDataCharacterCounters();for(let cn=0;cn<f.length;cn++)f[cn]=0;if(h)Ie.recordPatternInReverse(r,a.getStartEnd()[0],f);else{Ie.recordPattern(r,a.getStartEnd()[1],f);for(let cn=0,wi=f.length-1;cn<wi;cn++,wi--){let ur=f[cn];f[cn]=f[wi],f[wi]=ur}}let m=17,x=Qe.sum(new Int32Array(f))/m,A=(a.getStartEnd()[1]-a.getStartEnd()[0])/15;if(Math.abs(x-A)/A>.3)throw new he;let T=this.getOddCounts(),R=this.getEvenCounts(),P=this.getOddRoundingErrors(),k=this.getEvenRoundingErrors();for(let cn=0;cn<f.length;cn++){let wi=1*f[cn]/x,ur=wi+.5;if(ur<1){if(wi<.3)throw new he;ur=1}else if(ur>8){if(wi>8.7)throw new he;ur=8}let Pa=cn/2;(cn&1)==0?(T[Pa]=ur,P[Pa]=wi-ur):(R[Pa]=ur,k[Pa]=wi-ur)}this.adjustOddEvenCounts(m);let G=4*a.getValue()+(l?0:2)+(h?0:1)-1,J=0,te=0;for(let cn=T.length-1;cn>=0;cn--){if(Ie.isNotA1left(a,l,h)){let wi=Ie.WEIGHTS[G][2*cn];te+=T[cn]*wi}J+=T[cn]}let ce=0;for(let cn=R.length-1;cn>=0;cn--)if(Ie.isNotA1left(a,l,h)){let wi=Ie.WEIGHTS[G][2*cn+1];ce+=R[cn]*wi}let ye=te+ce;if((J&1)!=0||J>13||J<4)throw new he;let Pe=(13-J)/2,Me=Ie.SYMBOL_WIDEST[Pe],Re=9-Me,St=Gi.getRSSvalue(T,Me,!0),ft=Gi.getRSSvalue(R,Re,!1),Zn=Ie.EVEN_TOTAL_SUBSET[Pe],wr=Ie.GSUM[Pe],Mi=St*Zn+ft+wr;return new _i(Mi,ye)}static isNotA1left(r,a,l){return!(r.getValue()==0&&a&&l)}adjustOddEvenCounts(r){let a=Qe.sum(new Int32Array(this.getOddCounts())),l=Qe.sum(new Int32Array(this.getEvenCounts())),h=!1,f=!1;a>13?f=!0:a<4&&(h=!0);let m=!1,x=!1;l>13?x=!0:l<4&&(m=!0);let A=a+l-r,T=(a&1)==1,R=(l&1)==0;if(A==1)if(T){if(R)throw new he;f=!0}else{if(!R)throw new he;x=!0}else if(A==-1)if(T){if(R)throw new he;h=!0}else{if(!R)throw new he;m=!0}else if(A==0){if(T){if(!R)throw new he;a<l?(h=!0,x=!0):(f=!0,m=!0)}else if(R)throw new he}else throw new he;if(h){if(f)throw new he;Ie.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&Ie.decrement(this.getOddCounts(),this.getOddRoundingErrors()),m){if(x)throw new he;Ie.increment(this.getEvenCounts(),this.getOddRoundingErrors())}x&&Ie.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ie.SYMBOL_WIDEST=[7,5,4,3,1],Ie.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Ie.GSUM=[0,348,1388,2948,3988],Ie.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Ie.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Ie.FINDER_PAT_A=0,Ie.FINDER_PAT_B=1,Ie.FINDER_PAT_C=2,Ie.FINDER_PAT_D=3,Ie.FINDER_PAT_E=4,Ie.FINDER_PAT_F=5,Ie.FINDER_PATTERN_SEQUENCES=[[Ie.FINDER_PAT_A,Ie.FINDER_PAT_A],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_B,Ie.FINDER_PAT_B],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_C,Ie.FINDER_PAT_B,Ie.FINDER_PAT_D],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_E,Ie.FINDER_PAT_B,Ie.FINDER_PAT_D,Ie.FINDER_PAT_C],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_E,Ie.FINDER_PAT_B,Ie.FINDER_PAT_D,Ie.FINDER_PAT_D,Ie.FINDER_PAT_F],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_E,Ie.FINDER_PAT_B,Ie.FINDER_PAT_D,Ie.FINDER_PAT_E,Ie.FINDER_PAT_F,Ie.FINDER_PAT_F],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_A,Ie.FINDER_PAT_B,Ie.FINDER_PAT_B,Ie.FINDER_PAT_C,Ie.FINDER_PAT_C,Ie.FINDER_PAT_D,Ie.FINDER_PAT_D],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_A,Ie.FINDER_PAT_B,Ie.FINDER_PAT_B,Ie.FINDER_PAT_C,Ie.FINDER_PAT_C,Ie.FINDER_PAT_D,Ie.FINDER_PAT_E,Ie.FINDER_PAT_E],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_A,Ie.FINDER_PAT_B,Ie.FINDER_PAT_B,Ie.FINDER_PAT_C,Ie.FINDER_PAT_C,Ie.FINDER_PAT_D,Ie.FINDER_PAT_E,Ie.FINDER_PAT_F,Ie.FINDER_PAT_F],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_A,Ie.FINDER_PAT_B,Ie.FINDER_PAT_B,Ie.FINDER_PAT_C,Ie.FINDER_PAT_D,Ie.FINDER_PAT_D,Ie.FINDER_PAT_E,Ie.FINDER_PAT_E,Ie.FINDER_PAT_F,Ie.FINDER_PAT_F]],Ie.MAX_PAIRS=11;class Ao extends _i{constructor(r,a,l){super(r,a),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class $t extends zn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(r,a,l){const h=this.decodePair(a,!1,r,l);$t.addOrTally(this.possibleLeftPairs,h),a.reverse();let f=this.decodePair(a,!0,r,l);$t.addOrTally(this.possibleRightPairs,f),a.reverse();for(let m of this.possibleLeftPairs)if(m.getCount()>1){for(let x of this.possibleRightPairs)if(x.getCount()>1&&$t.checkChecksum(m,x))return $t.constructResult(m,x)}throw new he}static addOrTally(r,a){if(a==null)return;let l=!1;for(let h of r)if(h.getValue()===a.getValue()){h.incrementCount(),l=!0;break}l||r.push(a)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(r,a){let l=4537077*r.getValue()+a.getValue(),h=new String(l).toString(),f=new X;for(let T=13-h.length;T>0;T--)f.append("0");f.append(h);let m=0;for(let T=0;T<13;T++){let R=f.charAt(T).charCodeAt(0)-48;m+=(T&1)===0?3*R:R}m=10-m%10,m===10&&(m=0),f.append(m.toString());let x=r.getFinderPattern().getResultPoints(),A=a.getFinderPattern().getResultPoints();return new Ve(f.toString(),null,0,[x[0],x[1],A[0],A[1]],Le.RSS_14,new Date().getTime())}static checkChecksum(r,a){let l=(r.getChecksumPortion()+16*a.getChecksumPortion())%79,h=9*r.getFinderPattern().getValue()+a.getFinderPattern().getValue();return h>72&&h--,h>8&&h--,l===h}decodePair(r,a,l,h){try{let f=this.findFinderPattern(r,a),m=this.parseFoundFinderPattern(r,l,a,f),x=h==null?null:h.get(De.NEED_RESULT_POINT_CALLBACK);if(x!=null){let R=(f[0]+f[1])/2;a&&(R=r.getSize()-1-R),x.foundPossibleResultPoint(new Fe(R,l))}let A=this.decodeDataCharacter(r,m,!0),T=this.decodeDataCharacter(r,m,!1);return new Ao(1597*A.getValue()+T.getValue(),A.getChecksumPortion()+4*T.getChecksumPortion(),m)}catch{return null}}decodeDataCharacter(r,a,l){let h=this.getDataCharacterCounters();for(let ce=0;ce<h.length;ce++)h[ce]=0;if(l)Wt.recordPatternInReverse(r,a.getStartEnd()[0],h);else{Wt.recordPattern(r,a.getStartEnd()[1]+1,h);for(let ce=0,ye=h.length-1;ce<ye;ce++,ye--){let Pe=h[ce];h[ce]=h[ye],h[ye]=Pe}}let f=l?16:15,m=Qe.sum(new Int32Array(h))/f,x=this.getOddCounts(),A=this.getEvenCounts(),T=this.getOddRoundingErrors(),R=this.getEvenRoundingErrors();for(let ce=0;ce<h.length;ce++){let ye=h[ce]/m,Pe=Math.floor(ye+.5);Pe<1?Pe=1:Pe>8&&(Pe=8);let Me=Math.floor(ce/2);(ce&1)===0?(x[Me]=Pe,T[Me]=ye-Pe):(A[Me]=Pe,R[Me]=ye-Pe)}this.adjustOddEvenCounts(l,f);let P=0,k=0;for(let ce=x.length-1;ce>=0;ce--)k*=9,k+=x[ce],P+=x[ce];let G=0,J=0;for(let ce=A.length-1;ce>=0;ce--)G*=9,G+=A[ce],J+=A[ce];let te=k+3*G;if(l){if((P&1)!==0||P>12||P<4)throw new he;let ce=(12-P)/2,ye=$t.OUTSIDE_ODD_WIDEST[ce],Pe=9-ye,Me=Gi.getRSSvalue(x,ye,!1),Re=Gi.getRSSvalue(A,Pe,!0),St=$t.OUTSIDE_EVEN_TOTAL_SUBSET[ce],ft=$t.OUTSIDE_GSUM[ce];return new _i(Me*St+Re+ft,te)}else{if((J&1)!==0||J>10||J<4)throw new he;let ce=(10-J)/2,ye=$t.INSIDE_ODD_WIDEST[ce],Pe=9-ye,Me=Gi.getRSSvalue(x,ye,!0),Re=Gi.getRSSvalue(A,Pe,!1),St=$t.INSIDE_ODD_TOTAL_SUBSET[ce],ft=$t.INSIDE_GSUM[ce];return new _i(Re*St+Me+ft,te)}}findFinderPattern(r,a){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let h=r.getSize(),f=!1,m=0;for(;m<h&&(f=!r.get(m),a!==f);)m++;let x=0,A=m;for(let T=m;T<h;T++)if(r.get(T)!==f)l[x]++;else{if(x===3){if(zn.isFinderPattern(l))return[A,T];A+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,x--}else x++;l[x]=1,f=!f}throw new he}parseFoundFinderPattern(r,a,l,h){let f=r.get(h[0]),m=h[0]-1;for(;m>=0&&f!==r.get(m);)m--;m++;const x=h[0]-m,A=this.getDecodeFinderCounters(),T=new Int32Array(A.length);K.arraycopy(A,0,T,1,A.length-1),T[0]=x;const R=this.parseFinderValue(T,$t.FINDER_PATTERNS);let P=m,k=h[1];return l&&(P=r.getSize()-1-P,k=r.getSize()-1-k),new xr(R,[m,h[1]],P,k,a)}adjustOddEvenCounts(r,a){let l=Qe.sum(new Int32Array(this.getOddCounts())),h=Qe.sum(new Int32Array(this.getEvenCounts())),f=!1,m=!1,x=!1,A=!1;r?(l>12?m=!0:l<4&&(f=!0),h>12?A=!0:h<4&&(x=!0)):(l>11?m=!0:l<5&&(f=!0),h>10?A=!0:h<4&&(x=!0));let T=l+h-a,R=(l&1)===(r?1:0),P=(h&1)===1;if(T===1)if(R){if(P)throw new he;m=!0}else{if(!P)throw new he;A=!0}else if(T===-1)if(R){if(P)throw new he;f=!0}else{if(!P)throw new he;x=!0}else if(T===0){if(R){if(!P)throw new he;l<h?(f=!0,A=!0):(m=!0,x=!0)}else if(P)throw new he}else throw new he;if(f){if(m)throw new he;zn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(m&&zn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),x){if(A)throw new he;zn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}A&&zn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}$t.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],$t.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],$t.OUTSIDE_GSUM=[0,161,961,2015,2715],$t.INSIDE_GSUM=[0,336,1036,1516],$t.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],$t.INSIDE_ODD_WIDEST=[2,4,6,8],$t.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Ri extends Wt{constructor(r,a){super(),this.readers=[],this.verbose=a===!0;const l=r?r.get(De.POSSIBLE_FORMATS):null,h=r&&r.get(De.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(Le.EAN_13)||l.includes(Le.UPC_A)||l.includes(Le.EAN_8)||l.includes(Le.UPC_E))&&this.readers.push(new Gs(r)),l.includes(Le.CODE_39)&&this.readers.push(new qt(h)),l.includes(Le.CODE_128)&&this.readers.push(new Oe),l.includes(Le.ITF)&&this.readers.push(new rt),l.includes(Le.RSS_14)&&this.readers.push(new $t),l.includes(Le.RSS_EXPANDED)&&this.readers.push(new Ie(this.verbose))):(this.readers.push(new Gs(r)),this.readers.push(new qt),this.readers.push(new Gs(r)),this.readers.push(new Oe),this.readers.push(new rt),this.readers.push(new $t),this.readers.push(new Ie(this.verbose)))}decodeRow(r,a,l){for(let h=0;h<this.readers.length;h++)try{return this.readers[h].decodeRow(r,a,l)}catch{}throw new he}reset(){this.readers.forEach(r=>r.reset())}}class wo extends ke{constructor(r=500,a){super(new Ri(a),r,a)}}class Ut{constructor(r,a,l){this.ecCodewords=r,this.ecBlocks=[a],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Dt{constructor(r,a){this.count=r,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ct{constructor(r,a,l,h,f,m){this.versionNumber=r,this.symbolSizeRows=a,this.symbolSizeColumns=l,this.dataRegionSizeRows=h,this.dataRegionSizeColumns=f,this.ecBlocks=m;let x=0;const A=m.getECCodewords(),T=m.getECBlocks();for(let R of T)x+=R.getCount()*(R.getDataCodewords()+A);this.totalCodewords=x}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(r,a){if((r&1)!==0||(a&1)!==0)throw new j;for(let l of Ct.VERSIONS)if(l.symbolSizeRows===r&&l.symbolSizeColumns===a)return l;throw new j}toString(){return""+this.versionNumber}static buildVersions(){return[new Ct(1,10,10,8,8,new Ut(5,new Dt(1,3))),new Ct(2,12,12,10,10,new Ut(7,new Dt(1,5))),new Ct(3,14,14,12,12,new Ut(10,new Dt(1,8))),new Ct(4,16,16,14,14,new Ut(12,new Dt(1,12))),new Ct(5,18,18,16,16,new Ut(14,new Dt(1,18))),new Ct(6,20,20,18,18,new Ut(18,new Dt(1,22))),new Ct(7,22,22,20,20,new Ut(20,new Dt(1,30))),new Ct(8,24,24,22,22,new Ut(24,new Dt(1,36))),new Ct(9,26,26,24,24,new Ut(28,new Dt(1,44))),new Ct(10,32,32,14,14,new Ut(36,new Dt(1,62))),new Ct(11,36,36,16,16,new Ut(42,new Dt(1,86))),new Ct(12,40,40,18,18,new Ut(48,new Dt(1,114))),new Ct(13,44,44,20,20,new Ut(56,new Dt(1,144))),new Ct(14,48,48,22,22,new Ut(68,new Dt(1,174))),new Ct(15,52,52,24,24,new Ut(42,new Dt(2,102))),new Ct(16,64,64,14,14,new Ut(56,new Dt(2,140))),new Ct(17,72,72,16,16,new Ut(36,new Dt(4,92))),new Ct(18,80,80,18,18,new Ut(48,new Dt(4,114))),new Ct(19,88,88,20,20,new Ut(56,new Dt(4,144))),new Ct(20,96,96,22,22,new Ut(68,new Dt(4,174))),new Ct(21,104,104,24,24,new Ut(56,new Dt(6,136))),new Ct(22,120,120,18,18,new Ut(68,new Dt(6,175))),new Ct(23,132,132,20,20,new Ut(62,new Dt(8,163))),new Ct(24,144,144,22,22,new Ut(62,new Dt(8,156),new Dt(2,155))),new Ct(25,8,18,6,16,new Ut(7,new Dt(1,5))),new Ct(26,8,32,6,14,new Ut(11,new Dt(1,10))),new Ct(27,12,26,10,24,new Ut(14,new Dt(1,16))),new Ct(28,12,36,10,16,new Ut(18,new Dt(1,22))),new Ct(29,16,36,14,16,new Ut(24,new Dt(1,32))),new Ct(30,16,48,14,22,new Ut(28,new Dt(1,49)))]}}Ct.VERSIONS=Ct.buildVersions();class Is{constructor(r){const a=r.getHeight();if(a<8||a>144||(a&1)!==0)throw new j;this.version=Is.readVersion(r),this.mappingBitMatrix=this.extractDataRegion(r),this.readMappingMatrix=new We(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(r){const a=r.getHeight(),l=r.getWidth();return Ct.getVersionForDimensions(a,l)}readCodewords(){const r=new Int8Array(this.version.getTotalCodewords());let a=0,l=4,h=0;const f=this.mappingBitMatrix.getHeight(),m=this.mappingBitMatrix.getWidth();let x=!1,A=!1,T=!1,R=!1;do if(l===f&&h===0&&!x)r[a++]=this.readCorner1(f,m)&255,l-=2,h+=2,x=!0;else if(l===f-2&&h===0&&(m&3)!==0&&!A)r[a++]=this.readCorner2(f,m)&255,l-=2,h+=2,A=!0;else if(l===f+4&&h===2&&(m&7)===0&&!T)r[a++]=this.readCorner3(f,m)&255,l-=2,h+=2,T=!0;else if(l===f-2&&h===0&&(m&7)===4&&!R)r[a++]=this.readCorner4(f,m)&255,l-=2,h+=2,R=!0;else{do l<f&&h>=0&&!this.readMappingMatrix.get(h,l)&&(r[a++]=this.readUtah(l,h,f,m)&255),l-=2,h+=2;while(l>=0&&h<m);l+=1,h+=3;do l>=0&&h<m&&!this.readMappingMatrix.get(h,l)&&(r[a++]=this.readUtah(l,h,f,m)&255),l+=2,h-=2;while(l<f&&h>=0);l+=3,h+=1}while(l<f||h<m);if(a!==this.version.getTotalCodewords())throw new j;return r}readModule(r,a,l,h){return r<0&&(r+=l,a+=4-(l+4&7)),a<0&&(a+=h,r+=4-(h+4&7)),this.readMappingMatrix.set(a,r),this.mappingBitMatrix.get(a,r)}readUtah(r,a,l,h){let f=0;return this.readModule(r-2,a-2,l,h)&&(f|=1),f<<=1,this.readModule(r-2,a-1,l,h)&&(f|=1),f<<=1,this.readModule(r-1,a-2,l,h)&&(f|=1),f<<=1,this.readModule(r-1,a-1,l,h)&&(f|=1),f<<=1,this.readModule(r-1,a,l,h)&&(f|=1),f<<=1,this.readModule(r,a-2,l,h)&&(f|=1),f<<=1,this.readModule(r,a-1,l,h)&&(f|=1),f<<=1,this.readModule(r,a,l,h)&&(f|=1),f}readCorner1(r,a){let l=0;return this.readModule(r-1,0,r,a)&&(l|=1),l<<=1,this.readModule(r-1,1,r,a)&&(l|=1),l<<=1,this.readModule(r-1,2,r,a)&&(l|=1),l<<=1,this.readModule(0,a-2,r,a)&&(l|=1),l<<=1,this.readModule(0,a-1,r,a)&&(l|=1),l<<=1,this.readModule(1,a-1,r,a)&&(l|=1),l<<=1,this.readModule(2,a-1,r,a)&&(l|=1),l<<=1,this.readModule(3,a-1,r,a)&&(l|=1),l}readCorner2(r,a){let l=0;return this.readModule(r-3,0,r,a)&&(l|=1),l<<=1,this.readModule(r-2,0,r,a)&&(l|=1),l<<=1,this.readModule(r-1,0,r,a)&&(l|=1),l<<=1,this.readModule(0,a-4,r,a)&&(l|=1),l<<=1,this.readModule(0,a-3,r,a)&&(l|=1),l<<=1,this.readModule(0,a-2,r,a)&&(l|=1),l<<=1,this.readModule(0,a-1,r,a)&&(l|=1),l<<=1,this.readModule(1,a-1,r,a)&&(l|=1),l}readCorner3(r,a){let l=0;return this.readModule(r-1,0,r,a)&&(l|=1),l<<=1,this.readModule(r-1,a-1,r,a)&&(l|=1),l<<=1,this.readModule(0,a-3,r,a)&&(l|=1),l<<=1,this.readModule(0,a-2,r,a)&&(l|=1),l<<=1,this.readModule(0,a-1,r,a)&&(l|=1),l<<=1,this.readModule(1,a-3,r,a)&&(l|=1),l<<=1,this.readModule(1,a-2,r,a)&&(l|=1),l<<=1,this.readModule(1,a-1,r,a)&&(l|=1),l}readCorner4(r,a){let l=0;return this.readModule(r-3,0,r,a)&&(l|=1),l<<=1,this.readModule(r-2,0,r,a)&&(l|=1),l<<=1,this.readModule(r-1,0,r,a)&&(l|=1),l<<=1,this.readModule(0,a-2,r,a)&&(l|=1),l<<=1,this.readModule(0,a-1,r,a)&&(l|=1),l<<=1,this.readModule(1,a-1,r,a)&&(l|=1),l<<=1,this.readModule(2,a-1,r,a)&&(l|=1),l<<=1,this.readModule(3,a-1,r,a)&&(l|=1),l}extractDataRegion(r){const a=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(r.getHeight()!==a)throw new I("Dimension of bitMatrix must match the version size");const h=this.version.getDataRegionSizeRows(),f=this.version.getDataRegionSizeColumns(),m=a/h|0,x=l/f|0,A=m*h,T=x*f,R=new We(T,A);for(let P=0;P<m;++P){const k=P*h;for(let G=0;G<x;++G){const J=G*f;for(let te=0;te<h;++te){const ce=P*(h+2)+1+te,ye=k+te;for(let Pe=0;Pe<f;++Pe){const Me=G*(f+2)+1+Pe;if(r.get(Me,ce)){const Re=J+Pe;R.set(Re,ye)}}}}}return R}}class Oi{constructor(r,a){this.numDataCodewords=r,this.codewords=a}static getDataBlocks(r,a){const l=a.getECBlocks();let h=0;const f=l.getECBlocks();for(let te of f)h+=te.getCount();const m=new Array(h);let x=0;for(let te of f)for(let ce=0;ce<te.getCount();ce++){const ye=te.getDataCodewords(),Pe=l.getECCodewords()+ye;m[x++]=new Oi(ye,new Uint8Array(Pe))}const T=m[0].codewords.length-l.getECCodewords(),R=T-1;let P=0;for(let te=0;te<R;te++)for(let ce=0;ce<x;ce++)m[ce].codewords[te]=r[P++];const k=a.getVersionNumber()===24,G=k?8:x;for(let te=0;te<G;te++)m[te].codewords[T-1]=r[P++];const J=m[0].codewords.length;for(let te=T;te<J;te++)for(let ce=0;ce<x;ce++){const ye=k?(ce+8)%x:ce,Pe=k&&ye>7?te-1:te;m[ye].codewords[Pe]=r[P++]}if(P!==r.length)throw new I;return m}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Bn{constructor(r){this.bytes=r,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(r){if(r<1||r>32||r>this.available())throw new I(""+r);let a=0,l=this.bitOffset,h=this.byteOffset;const f=this.bytes;if(l>0){const m=8-l,x=r<m?r:m,A=m-x,T=255>>8-x<<A;a=(f[h]&T)>>A,r-=x,l+=x,l===8&&(l=0,h++)}if(r>0){for(;r>=8;)a=a<<8|f[h]&255,h++,r-=8;if(r>0){const m=8-r,x=255>>m<<m;a=a<<r|(f[h]&x)>>m,l+=r}}return this.bitOffset=l,this.byteOffset=h,a}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Nt;(function(M){M[M.PAD_ENCODE=0]="PAD_ENCODE",M[M.ASCII_ENCODE=1]="ASCII_ENCODE",M[M.C40_ENCODE=2]="C40_ENCODE",M[M.TEXT_ENCODE=3]="TEXT_ENCODE",M[M.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",M[M.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",M[M.BASE256_ENCODE=6]="BASE256_ENCODE"})(Nt||(Nt={}));class Di{static decode(r){const a=new Bn(r),l=new X,h=new X,f=new Array;let m=Nt.ASCII_ENCODE;do if(m===Nt.ASCII_ENCODE)m=this.decodeAsciiSegment(a,l,h);else{switch(m){case Nt.C40_ENCODE:this.decodeC40Segment(a,l);break;case Nt.TEXT_ENCODE:this.decodeTextSegment(a,l);break;case Nt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(a,l);break;case Nt.EDIFACT_ENCODE:this.decodeEdifactSegment(a,l);break;case Nt.BASE256_ENCODE:this.decodeBase256Segment(a,l,f);break;default:throw new j}m=Nt.ASCII_ENCODE}while(m!==Nt.PAD_ENCODE&&a.available()>0);return h.length()>0&&l.append(h.toString()),new Kt(r,l.toString(),f.length===0?null:f,null)}static decodeAsciiSegment(r,a,l){let h=!1;do{let f=r.readBits(8);if(f===0)throw new j;if(f<=128)return h&&(f+=128),a.append(String.fromCharCode(f-1)),Nt.ASCII_ENCODE;if(f===129)return Nt.PAD_ENCODE;if(f<=229){const m=f-130;m<10&&a.append("0"),a.append(""+m)}else switch(f){case 230:return Nt.C40_ENCODE;case 231:return Nt.BASE256_ENCODE;case 232:a.append("");break;case 233:case 234:break;case 235:h=!0;break;case 236:a.append("[)>05"),l.insert(0,"");break;case 237:a.append("[)>06"),l.insert(0,"");break;case 238:return Nt.ANSIX12_ENCODE;case 239:return Nt.TEXT_ENCODE;case 240:return Nt.EDIFACT_ENCODE;case 241:break;default:if(f!==254||r.available()!==0)throw new j;break}}while(r.available()>0);return Nt.ASCII_ENCODE}static decodeC40Segment(r,a){let l=!1;const h=[];let f=0;do{if(r.available()===8)return;const m=r.readBits(8);if(m===254)return;this.parseTwoBytes(m,r.readBits(8),h);for(let x=0;x<3;x++){const A=h[x];switch(f){case 0:if(A<3)f=A+1;else if(A<this.C40_BASIC_SET_CHARS.length){const T=this.C40_BASIC_SET_CHARS[A];l?(a.append(String.fromCharCode(T.charCodeAt(0)+128)),l=!1):a.append(T)}else throw new j;break;case 1:l?(a.append(String.fromCharCode(A+128)),l=!1):a.append(String.fromCharCode(A)),f=0;break;case 2:if(A<this.C40_SHIFT2_SET_CHARS.length){const T=this.C40_SHIFT2_SET_CHARS[A];l?(a.append(String.fromCharCode(T.charCodeAt(0)+128)),l=!1):a.append(T)}else switch(A){case 27:a.append("");break;case 30:l=!0;break;default:throw new j}f=0;break;case 3:l?(a.append(String.fromCharCode(A+224)),l=!1):a.append(String.fromCharCode(A+96)),f=0;break;default:throw new j}}}while(r.available()>0)}static decodeTextSegment(r,a){let l=!1,h=[],f=0;do{if(r.available()===8)return;const m=r.readBits(8);if(m===254)return;this.parseTwoBytes(m,r.readBits(8),h);for(let x=0;x<3;x++){const A=h[x];switch(f){case 0:if(A<3)f=A+1;else if(A<this.TEXT_BASIC_SET_CHARS.length){const T=this.TEXT_BASIC_SET_CHARS[A];l?(a.append(String.fromCharCode(T.charCodeAt(0)+128)),l=!1):a.append(T)}else throw new j;break;case 1:l?(a.append(String.fromCharCode(A+128)),l=!1):a.append(String.fromCharCode(A)),f=0;break;case 2:if(A<this.TEXT_SHIFT2_SET_CHARS.length){const T=this.TEXT_SHIFT2_SET_CHARS[A];l?(a.append(String.fromCharCode(T.charCodeAt(0)+128)),l=!1):a.append(T)}else switch(A){case 27:a.append("");break;case 30:l=!0;break;default:throw new j}f=0;break;case 3:if(A<this.TEXT_SHIFT3_SET_CHARS.length){const T=this.TEXT_SHIFT3_SET_CHARS[A];l?(a.append(String.fromCharCode(T.charCodeAt(0)+128)),l=!1):a.append(T),f=0}else throw new j;break;default:throw new j}}}while(r.available()>0)}static decodeAnsiX12Segment(r,a){const l=[];do{if(r.available()===8)return;const h=r.readBits(8);if(h===254)return;this.parseTwoBytes(h,r.readBits(8),l);for(let f=0;f<3;f++){const m=l[f];switch(m){case 0:a.append("\r");break;case 1:a.append("*");break;case 2:a.append(">");break;case 3:a.append(" ");break;default:if(m<14)a.append(String.fromCharCode(m+44));else if(m<40)a.append(String.fromCharCode(m+51));else throw new j;break}}}while(r.available()>0)}static parseTwoBytes(r,a,l){let h=(r<<8)+a-1,f=Math.floor(h/1600);l[0]=f,h-=f*1600,f=Math.floor(h/40),l[1]=f,l[2]=h-f*40}static decodeEdifactSegment(r,a){do{if(r.available()<=16)return;for(let l=0;l<4;l++){let h=r.readBits(6);if(h===31){const f=8-r.getBitOffset();f!==8&&r.readBits(f);return}(h&32)===0&&(h|=64),a.append(String.fromCharCode(h))}}while(r.available()>0)}static decodeBase256Segment(r,a,l){let h=1+r.getByteOffset();const f=this.unrandomize255State(r.readBits(8),h++);let m;if(f===0?m=r.available()/8|0:f<250?m=f:m=250*(f-249)+this.unrandomize255State(r.readBits(8),h++),m<0)throw new j;const x=new Uint8Array(m);for(let A=0;A<m;A++){if(r.available()<8)throw new j;x[A]=this.unrandomize255State(r.readBits(8),h++)}l.push(x);try{a.append(W.decode(x,Z.ISO88591))}catch(A){throw new Qn("Platform does not support required encoding: "+A.message)}}static unrandomize255State(r,a){const l=149*a%255+1,h=r-l;return h>=0?h:h+256}}Di.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Di.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Di.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Di.TEXT_SHIFT2_SET_CHARS=Di.C40_SHIFT2_SET_CHARS,Di.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class bo{constructor(){this.rsDecoder=new Hi(Et.DATA_MATRIX_FIELD_256)}decode(r){const a=new Is(r),l=a.getVersion(),h=a.readCodewords(),f=Oi.getDataBlocks(h,l);let m=0;for(let T of f)m+=T.getNumDataCodewords();const x=new Uint8Array(m),A=f.length;for(let T=0;T<A;T++){const R=f[T],P=R.getCodewords(),k=R.getNumDataCodewords();this.correctErrors(P,k);for(let G=0;G<k;G++)x[G*A+T]=P[G]}return Di.decode(x)}correctErrors(r,a){const l=new Int32Array(r);try{this.rsDecoder.decode(l,r.length-a)}catch{throw new B}for(let h=0;h<a;h++)r[h]=l[h]}}class st{constructor(r){this.image=r,this.rectangleDetector=new hn(this.image)}detect(){const r=this.rectangleDetector.detect();let a=this.detectSolid1(r);if(a=this.detectSolid2(a),a[3]=this.correctTopRight(a),!a[3])throw new he;a=this.shiftToModuleCenter(a);const l=a[0],h=a[1],f=a[2],m=a[3];let x=this.transitionsBetween(l,m)+1,A=this.transitionsBetween(f,m)+1;(x&1)===1&&(x+=1),(A&1)===1&&(A+=1),4*x<7*A&&4*A<7*x&&(x=A=Math.max(x,A));let T=st.sampleGrid(this.image,l,h,f,m,x,A);return new xs(T,[l,h,f,m])}static shiftPoint(r,a,l){let h=(a.getX()-r.getX())/(l+1),f=(a.getY()-r.getY())/(l+1);return new Fe(r.getX()+h,r.getY()+f)}static moveAway(r,a,l){let h=r.getX(),f=r.getY();return h<a?h-=1:h+=1,f<l?f-=1:f+=1,new Fe(h,f)}detectSolid1(r){let a=r[0],l=r[1],h=r[3],f=r[2],m=this.transitionsBetween(a,l),x=this.transitionsBetween(l,h),A=this.transitionsBetween(h,f),T=this.transitionsBetween(f,a),R=m,P=[f,a,l,h];return R>x&&(R=x,P[0]=a,P[1]=l,P[2]=h,P[3]=f),R>A&&(R=A,P[0]=l,P[1]=h,P[2]=f,P[3]=a),R>T&&(P[0]=h,P[1]=f,P[2]=a,P[3]=l),P}detectSolid2(r){let a=r[0],l=r[1],h=r[2],f=r[3],m=this.transitionsBetween(a,f),x=st.shiftPoint(l,h,(m+1)*4),A=st.shiftPoint(h,l,(m+1)*4),T=this.transitionsBetween(x,a),R=this.transitionsBetween(A,f);return T<R?(r[0]=a,r[1]=l,r[2]=h,r[3]=f):(r[0]=l,r[1]=h,r[2]=f,r[3]=a),r}correctTopRight(r){let a=r[0],l=r[1],h=r[2],f=r[3],m=this.transitionsBetween(a,f),x=this.transitionsBetween(l,f),A=st.shiftPoint(a,l,(x+1)*4),T=st.shiftPoint(h,l,(m+1)*4);m=this.transitionsBetween(A,f),x=this.transitionsBetween(T,f);let R=new Fe(f.getX()+(h.getX()-l.getX())/(m+1),f.getY()+(h.getY()-l.getY())/(m+1)),P=new Fe(f.getX()+(a.getX()-l.getX())/(x+1),f.getY()+(a.getY()-l.getY())/(x+1));if(!this.isValid(R))return this.isValid(P)?P:null;if(!this.isValid(P))return R;let k=this.transitionsBetween(A,R)+this.transitionsBetween(T,R),G=this.transitionsBetween(A,P)+this.transitionsBetween(T,P);return k>G?R:P}shiftToModuleCenter(r){let a=r[0],l=r[1],h=r[2],f=r[3],m=this.transitionsBetween(a,f)+1,x=this.transitionsBetween(h,f)+1,A=st.shiftPoint(a,l,x*4),T=st.shiftPoint(h,l,m*4);m=this.transitionsBetween(A,f)+1,x=this.transitionsBetween(T,f)+1,(m&1)===1&&(m+=1),(x&1)===1&&(x+=1);let R=(a.getX()+l.getX()+h.getX()+f.getX())/4,P=(a.getY()+l.getY()+h.getY()+f.getY())/4;a=st.moveAway(a,R,P),l=st.moveAway(l,R,P),h=st.moveAway(h,R,P),f=st.moveAway(f,R,P);let k,G;return A=st.shiftPoint(a,l,x*4),A=st.shiftPoint(A,f,m*4),k=st.shiftPoint(l,a,x*4),k=st.shiftPoint(k,h,m*4),T=st.shiftPoint(h,f,x*4),T=st.shiftPoint(T,l,m*4),G=st.shiftPoint(f,h,x*4),G=st.shiftPoint(G,a,m*4),[A,k,T,G]}isValid(r){return r.getX()>=0&&r.getX()<this.image.getWidth()&&r.getY()>0&&r.getY()<this.image.getHeight()}static sampleGrid(r,a,l,h,f,m,x){return ri.getInstance().sampleGrid(r,m,x,.5,.5,m-.5,.5,m-.5,x-.5,.5,x-.5,a.getX(),a.getY(),f.getX(),f.getY(),h.getX(),h.getY(),l.getX(),l.getY())}transitionsBetween(r,a){let l=Math.trunc(r.getX()),h=Math.trunc(r.getY()),f=Math.trunc(a.getX()),m=Math.trunc(a.getY()),x=Math.abs(m-h)>Math.abs(f-l);if(x){let te=l;l=h,h=te,te=f,f=m,m=te}let A=Math.abs(f-l),T=Math.abs(m-h),R=-A/2,P=h<m?1:-1,k=l<f?1:-1,G=0,J=this.image.get(x?h:l,x?l:h);for(let te=l,ce=h;te!==f;te+=k){let ye=this.image.get(x?ce:te,x?te:ce);if(ye!==J&&(G++,J=ye),R+=T,R>0){if(ce===m)break;ce+=P,R-=A}}return G}}class Yi{constructor(){this.decoder=new bo}decode(r,a=null){let l,h;if(a!=null&&a.has(De.PURE_BARCODE)){const T=Yi.extractPureBits(r.getBlackMatrix());l=this.decoder.decode(T),h=Yi.NO_POINTS}else{const T=new st(r.getBlackMatrix()).detect();l=this.decoder.decode(T.getBits()),h=T.getPoints()}const f=l.getRawBytes(),m=new Ve(l.getText(),f,8*f.length,h,Le.DATA_MATRIX,K.currentTimeMillis()),x=l.getByteSegments();x!=null&&m.putMetadata(yt.BYTE_SEGMENTS,x);const A=l.getECLevel();return A!=null&&m.putMetadata(yt.ERROR_CORRECTION_LEVEL,A),m}reset(){}static extractPureBits(r){const a=r.getTopLeftOnBit(),l=r.getBottomRightOnBit();if(a==null||l==null)throw new he;const h=this.moduleSize(a,r);let f=a[1];const m=l[1];let x=a[0];const T=(l[0]-x+1)/h,R=(m-f+1)/h;if(T<=0||R<=0)throw new he;const P=h/2;f+=P,x+=P;const k=new We(T,R);for(let G=0;G<R;G++){const J=f+G*h;for(let te=0;te<T;te++)r.get(x+te*h,J)&&k.set(te,G)}return k}static moduleSize(r,a){const l=a.getWidth();let h=r[0];const f=r[1];for(;h<l&&a.get(h,f);)h++;if(h===l)throw new he;const m=h-r[0];if(m===0)throw new he;return m}}Yi.NO_POINTS=[];class Wr extends ke{constructor(r=500){super(new Yi,r)}}var yr;(function(M){M[M.L=0]="L",M[M.M=1]="M",M[M.Q=2]="Q",M[M.H=3]="H"})(yr||(yr={}));class bt{constructor(r,a,l){this.value=r,this.stringValue=a,this.bits=l,bt.FOR_BITS.set(l,this),bt.FOR_VALUE.set(r,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(r){switch(r){case"L":return bt.L;case"M":return bt.M;case"Q":return bt.Q;case"H":return bt.H;default:throw new C(r+"not available")}}toString(){return this.stringValue}equals(r){if(!(r instanceof bt))return!1;const a=r;return this.value===a.value}static forBits(r){if(r<0||r>=bt.FOR_BITS.size)throw new I;return bt.FOR_BITS.get(r)}}bt.FOR_BITS=new Map,bt.FOR_VALUE=new Map,bt.L=new bt(yr.L,"L",1),bt.M=new bt(yr.M,"M",0),bt.Q=new bt(yr.Q,"Q",3),bt.H=new bt(yr.H,"H",2);class Gn{constructor(r){this.errorCorrectionLevel=bt.forBits(r>>3&3),this.dataMask=r&7}static numBitsDiffering(r,a){return $.bitCount(r^a)}static decodeFormatInformation(r,a){const l=Gn.doDecodeFormatInformation(r,a);return l!==null?l:Gn.doDecodeFormatInformation(r^Gn.FORMAT_INFO_MASK_QR,a^Gn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(r,a){let l=Number.MAX_SAFE_INTEGER,h=0;for(const f of Gn.FORMAT_INFO_DECODE_LOOKUP){const m=f[0];if(m===r||m===a)return new Gn(f[1]);let x=Gn.numBitsDiffering(r,m);x<l&&(h=f[1],l=x),r!==a&&(x=Gn.numBitsDiffering(a,m),x<l&&(h=f[1],l=x))}return l<=3?new Gn(h):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(r){if(!(r instanceof Gn))return!1;const a=r;return this.errorCorrectionLevel===a.errorCorrectionLevel&&this.dataMask===a.dataMask}}Gn.FORMAT_INFO_MASK_QR=21522,Gn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ue{constructor(r,...a){this.ecCodewordsPerBlock=r,this.ecBlocks=a}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let r=0;const a=this.ecBlocks;for(const l of a)r+=l.getCount();return r}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class z{constructor(r,a){this.count=r,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ye{constructor(r,a,...l){this.versionNumber=r,this.alignmentPatternCenters=a,this.ecBlocks=l;let h=0;const f=l[0].getECCodewordsPerBlock(),m=l[0].getECBlocks();for(const x of m)h+=x.getCount()*(x.getDataCodewords()+f);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(r){return this.ecBlocks[r.getValue()]}static getProvisionalVersionForDimension(r){if(r%4!==1)throw new j;try{return this.getVersionForNumber((r-17)/4)}catch{throw new j}}static getVersionForNumber(r){if(r<1||r>40)throw new I;return Ye.VERSIONS[r-1]}static decodeVersionInformation(r){let a=Number.MAX_SAFE_INTEGER,l=0;for(let h=0;h<Ye.VERSION_DECODE_INFO.length;h++){const f=Ye.VERSION_DECODE_INFO[h];if(f===r)return Ye.getVersionForNumber(h+7);const m=Gn.numBitsDiffering(r,f);m<a&&(l=h+7,a=m)}return a<=3?Ye.getVersionForNumber(l):null}buildFunctionPattern(){const r=this.getDimensionForVersion(),a=new We(r);a.setRegion(0,0,9,9),a.setRegion(r-8,0,8,9),a.setRegion(0,r-8,9,8);const l=this.alignmentPatternCenters.length;for(let h=0;h<l;h++){const f=this.alignmentPatternCenters[h]-2;for(let m=0;m<l;m++)h===0&&(m===0||m===l-1)||h===l-1&&m===0||a.setRegion(this.alignmentPatternCenters[m]-2,f,5,5)}return a.setRegion(6,9,1,r-17),a.setRegion(9,6,r-17,1),this.versionNumber>6&&(a.setRegion(r-11,0,3,6),a.setRegion(0,r-11,6,3)),a}toString(){return""+this.versionNumber}}Ye.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ye.VERSIONS=[new Ye(1,new Int32Array(0),new ue(7,new z(1,19)),new ue(10,new z(1,16)),new ue(13,new z(1,13)),new ue(17,new z(1,9))),new Ye(2,Int32Array.from([6,18]),new ue(10,new z(1,34)),new ue(16,new z(1,28)),new ue(22,new z(1,22)),new ue(28,new z(1,16))),new Ye(3,Int32Array.from([6,22]),new ue(15,new z(1,55)),new ue(26,new z(1,44)),new ue(18,new z(2,17)),new ue(22,new z(2,13))),new Ye(4,Int32Array.from([6,26]),new ue(20,new z(1,80)),new ue(18,new z(2,32)),new ue(26,new z(2,24)),new ue(16,new z(4,9))),new Ye(5,Int32Array.from([6,30]),new ue(26,new z(1,108)),new ue(24,new z(2,43)),new ue(18,new z(2,15),new z(2,16)),new ue(22,new z(2,11),new z(2,12))),new Ye(6,Int32Array.from([6,34]),new ue(18,new z(2,68)),new ue(16,new z(4,27)),new ue(24,new z(4,19)),new ue(28,new z(4,15))),new Ye(7,Int32Array.from([6,22,38]),new ue(20,new z(2,78)),new ue(18,new z(4,31)),new ue(18,new z(2,14),new z(4,15)),new ue(26,new z(4,13),new z(1,14))),new Ye(8,Int32Array.from([6,24,42]),new ue(24,new z(2,97)),new ue(22,new z(2,38),new z(2,39)),new ue(22,new z(4,18),new z(2,19)),new ue(26,new z(4,14),new z(2,15))),new Ye(9,Int32Array.from([6,26,46]),new ue(30,new z(2,116)),new ue(22,new z(3,36),new z(2,37)),new ue(20,new z(4,16),new z(4,17)),new ue(24,new z(4,12),new z(4,13))),new Ye(10,Int32Array.from([6,28,50]),new ue(18,new z(2,68),new z(2,69)),new ue(26,new z(4,43),new z(1,44)),new ue(24,new z(6,19),new z(2,20)),new ue(28,new z(6,15),new z(2,16))),new Ye(11,Int32Array.from([6,30,54]),new ue(20,new z(4,81)),new ue(30,new z(1,50),new z(4,51)),new ue(28,new z(4,22),new z(4,23)),new ue(24,new z(3,12),new z(8,13))),new Ye(12,Int32Array.from([6,32,58]),new ue(24,new z(2,92),new z(2,93)),new ue(22,new z(6,36),new z(2,37)),new ue(26,new z(4,20),new z(6,21)),new ue(28,new z(7,14),new z(4,15))),new Ye(13,Int32Array.from([6,34,62]),new ue(26,new z(4,107)),new ue(22,new z(8,37),new z(1,38)),new ue(24,new z(8,20),new z(4,21)),new ue(22,new z(12,11),new z(4,12))),new Ye(14,Int32Array.from([6,26,46,66]),new ue(30,new z(3,115),new z(1,116)),new ue(24,new z(4,40),new z(5,41)),new ue(20,new z(11,16),new z(5,17)),new ue(24,new z(11,12),new z(5,13))),new Ye(15,Int32Array.from([6,26,48,70]),new ue(22,new z(5,87),new z(1,88)),new ue(24,new z(5,41),new z(5,42)),new ue(30,new z(5,24),new z(7,25)),new ue(24,new z(11,12),new z(7,13))),new Ye(16,Int32Array.from([6,26,50,74]),new ue(24,new z(5,98),new z(1,99)),new ue(28,new z(7,45),new z(3,46)),new ue(24,new z(15,19),new z(2,20)),new ue(30,new z(3,15),new z(13,16))),new Ye(17,Int32Array.from([6,30,54,78]),new ue(28,new z(1,107),new z(5,108)),new ue(28,new z(10,46),new z(1,47)),new ue(28,new z(1,22),new z(15,23)),new ue(28,new z(2,14),new z(17,15))),new Ye(18,Int32Array.from([6,30,56,82]),new ue(30,new z(5,120),new z(1,121)),new ue(26,new z(9,43),new z(4,44)),new ue(28,new z(17,22),new z(1,23)),new ue(28,new z(2,14),new z(19,15))),new Ye(19,Int32Array.from([6,30,58,86]),new ue(28,new z(3,113),new z(4,114)),new ue(26,new z(3,44),new z(11,45)),new ue(26,new z(17,21),new z(4,22)),new ue(26,new z(9,13),new z(16,14))),new Ye(20,Int32Array.from([6,34,62,90]),new ue(28,new z(3,107),new z(5,108)),new ue(26,new z(3,41),new z(13,42)),new ue(30,new z(15,24),new z(5,25)),new ue(28,new z(15,15),new z(10,16))),new Ye(21,Int32Array.from([6,28,50,72,94]),new ue(28,new z(4,116),new z(4,117)),new ue(26,new z(17,42)),new ue(28,new z(17,22),new z(6,23)),new ue(30,new z(19,16),new z(6,17))),new Ye(22,Int32Array.from([6,26,50,74,98]),new ue(28,new z(2,111),new z(7,112)),new ue(28,new z(17,46)),new ue(30,new z(7,24),new z(16,25)),new ue(24,new z(34,13))),new Ye(23,Int32Array.from([6,30,54,78,102]),new ue(30,new z(4,121),new z(5,122)),new ue(28,new z(4,47),new z(14,48)),new ue(30,new z(11,24),new z(14,25)),new ue(30,new z(16,15),new z(14,16))),new Ye(24,Int32Array.from([6,28,54,80,106]),new ue(30,new z(6,117),new z(4,118)),new ue(28,new z(6,45),new z(14,46)),new ue(30,new z(11,24),new z(16,25)),new ue(30,new z(30,16),new z(2,17))),new Ye(25,Int32Array.from([6,32,58,84,110]),new ue(26,new z(8,106),new z(4,107)),new ue(28,new z(8,47),new z(13,48)),new ue(30,new z(7,24),new z(22,25)),new ue(30,new z(22,15),new z(13,16))),new Ye(26,Int32Array.from([6,30,58,86,114]),new ue(28,new z(10,114),new z(2,115)),new ue(28,new z(19,46),new z(4,47)),new ue(28,new z(28,22),new z(6,23)),new ue(30,new z(33,16),new z(4,17))),new Ye(27,Int32Array.from([6,34,62,90,118]),new ue(30,new z(8,122),new z(4,123)),new ue(28,new z(22,45),new z(3,46)),new ue(30,new z(8,23),new z(26,24)),new ue(30,new z(12,15),new z(28,16))),new Ye(28,Int32Array.from([6,26,50,74,98,122]),new ue(30,new z(3,117),new z(10,118)),new ue(28,new z(3,45),new z(23,46)),new ue(30,new z(4,24),new z(31,25)),new ue(30,new z(11,15),new z(31,16))),new Ye(29,Int32Array.from([6,30,54,78,102,126]),new ue(30,new z(7,116),new z(7,117)),new ue(28,new z(21,45),new z(7,46)),new ue(30,new z(1,23),new z(37,24)),new ue(30,new z(19,15),new z(26,16))),new Ye(30,Int32Array.from([6,26,52,78,104,130]),new ue(30,new z(5,115),new z(10,116)),new ue(28,new z(19,47),new z(10,48)),new ue(30,new z(15,24),new z(25,25)),new ue(30,new z(23,15),new z(25,16))),new Ye(31,Int32Array.from([6,30,56,82,108,134]),new ue(30,new z(13,115),new z(3,116)),new ue(28,new z(2,46),new z(29,47)),new ue(30,new z(42,24),new z(1,25)),new ue(30,new z(23,15),new z(28,16))),new Ye(32,Int32Array.from([6,34,60,86,112,138]),new ue(30,new z(17,115)),new ue(28,new z(10,46),new z(23,47)),new ue(30,new z(10,24),new z(35,25)),new ue(30,new z(19,15),new z(35,16))),new Ye(33,Int32Array.from([6,30,58,86,114,142]),new ue(30,new z(17,115),new z(1,116)),new ue(28,new z(14,46),new z(21,47)),new ue(30,new z(29,24),new z(19,25)),new ue(30,new z(11,15),new z(46,16))),new Ye(34,Int32Array.from([6,34,62,90,118,146]),new ue(30,new z(13,115),new z(6,116)),new ue(28,new z(14,46),new z(23,47)),new ue(30,new z(44,24),new z(7,25)),new ue(30,new z(59,16),new z(1,17))),new Ye(35,Int32Array.from([6,30,54,78,102,126,150]),new ue(30,new z(12,121),new z(7,122)),new ue(28,new z(12,47),new z(26,48)),new ue(30,new z(39,24),new z(14,25)),new ue(30,new z(22,15),new z(41,16))),new Ye(36,Int32Array.from([6,24,50,76,102,128,154]),new ue(30,new z(6,121),new z(14,122)),new ue(28,new z(6,47),new z(34,48)),new ue(30,new z(46,24),new z(10,25)),new ue(30,new z(2,15),new z(64,16))),new Ye(37,Int32Array.from([6,28,54,80,106,132,158]),new ue(30,new z(17,122),new z(4,123)),new ue(28,new z(29,46),new z(14,47)),new ue(30,new z(49,24),new z(10,25)),new ue(30,new z(24,15),new z(46,16))),new Ye(38,Int32Array.from([6,32,58,84,110,136,162]),new ue(30,new z(4,122),new z(18,123)),new ue(28,new z(13,46),new z(32,47)),new ue(30,new z(48,24),new z(14,25)),new ue(30,new z(42,15),new z(32,16))),new Ye(39,Int32Array.from([6,26,54,82,110,138,166]),new ue(30,new z(20,117),new z(4,118)),new ue(28,new z(40,47),new z(7,48)),new ue(30,new z(43,24),new z(22,25)),new ue(30,new z(10,15),new z(67,16))),new Ye(40,Int32Array.from([6,30,58,86,114,142,170]),new ue(30,new z(19,118),new z(6,119)),new ue(28,new z(18,47),new z(31,48)),new ue(30,new z(34,24),new z(34,25)),new ue(30,new z(20,15),new z(61,16)))];var qn;(function(M){M[M.DATA_MASK_000=0]="DATA_MASK_000",M[M.DATA_MASK_001=1]="DATA_MASK_001",M[M.DATA_MASK_010=2]="DATA_MASK_010",M[M.DATA_MASK_011=3]="DATA_MASK_011",M[M.DATA_MASK_100=4]="DATA_MASK_100",M[M.DATA_MASK_101=5]="DATA_MASK_101",M[M.DATA_MASK_110=6]="DATA_MASK_110",M[M.DATA_MASK_111=7]="DATA_MASK_111"})(qn||(qn={}));class si{constructor(r,a){this.value=r,this.isMasked=a}unmaskBitMatrix(r,a){for(let l=0;l<a;l++)for(let h=0;h<a;h++)this.isMasked(l,h)&&r.flip(h,l)}}si.values=new Map([[qn.DATA_MASK_000,new si(qn.DATA_MASK_000,(M,r)=>(M+r&1)===0)],[qn.DATA_MASK_001,new si(qn.DATA_MASK_001,(M,r)=>(M&1)===0)],[qn.DATA_MASK_010,new si(qn.DATA_MASK_010,(M,r)=>r%3===0)],[qn.DATA_MASK_011,new si(qn.DATA_MASK_011,(M,r)=>(M+r)%3===0)],[qn.DATA_MASK_100,new si(qn.DATA_MASK_100,(M,r)=>(Math.floor(M/2)+Math.floor(r/3)&1)===0)],[qn.DATA_MASK_101,new si(qn.DATA_MASK_101,(M,r)=>M*r%6===0)],[qn.DATA_MASK_110,new si(qn.DATA_MASK_110,(M,r)=>M*r%6<3)],[qn.DATA_MASK_111,new si(qn.DATA_MASK_111,(M,r)=>(M+r+M*r%3&1)===0)]]);class Xi{constructor(r){const a=r.getHeight();if(a<21||(a&3)!==1)throw new j;this.bitMatrix=r}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let r=0;for(let f=0;f<6;f++)r=this.copyBit(f,8,r);r=this.copyBit(7,8,r),r=this.copyBit(8,8,r),r=this.copyBit(8,7,r);for(let f=5;f>=0;f--)r=this.copyBit(8,f,r);const a=this.bitMatrix.getHeight();let l=0;const h=a-7;for(let f=a-1;f>=h;f--)l=this.copyBit(8,f,l);for(let f=a-8;f<a;f++)l=this.copyBit(f,8,l);if(this.parsedFormatInfo=Gn.decodeFormatInformation(r,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new j}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const r=this.bitMatrix.getHeight(),a=Math.floor((r-17)/4);if(a<=6)return Ye.getVersionForNumber(a);let l=0;const h=r-11;for(let m=5;m>=0;m--)for(let x=r-9;x>=h;x--)l=this.copyBit(x,m,l);let f=Ye.decodeVersionInformation(l);if(f!==null&&f.getDimensionForVersion()===r)return this.parsedVersion=f,f;l=0;for(let m=5;m>=0;m--)for(let x=r-9;x>=h;x--)l=this.copyBit(m,x,l);if(f=Ye.decodeVersionInformation(l),f!==null&&f.getDimensionForVersion()===r)return this.parsedVersion=f,f;throw new j}copyBit(r,a,l){return(this.isMirror?this.bitMatrix.get(a,r):this.bitMatrix.get(r,a))?l<<1|1:l<<1}readCodewords(){const r=this.readFormatInformation(),a=this.readVersion(),l=si.values.get(r.getDataMask()),h=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,h);const f=a.buildFunctionPattern();let m=!0;const x=new Uint8Array(a.getTotalCodewords());let A=0,T=0,R=0;for(let P=h-1;P>0;P-=2){P===6&&P--;for(let k=0;k<h;k++){const G=m?h-1-k:k;for(let J=0;J<2;J++)f.get(P-J,G)||(R++,T<<=1,this.bitMatrix.get(P-J,G)&&(T|=1),R===8&&(x[A++]=T,R=0,T=0))}m=!m}if(A!==a.getTotalCodewords())throw new j;return x}remask(){if(this.parsedFormatInfo===null)return;const r=si.values[this.parsedFormatInfo.getDataMask()],a=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,a)}setMirror(r){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=r}mirror(){const r=this.bitMatrix;for(let a=0,l=r.getWidth();a<l;a++)for(let h=a+1,f=r.getHeight();h<f;h++)r.get(a,h)!==r.get(h,a)&&(r.flip(h,a),r.flip(a,h))}}class Na{constructor(r,a){this.numDataCodewords=r,this.codewords=a}static getDataBlocks(r,a,l){if(r.length!==a.getTotalCodewords())throw new I;const h=a.getECBlocksForLevel(l);let f=0;const m=h.getECBlocks();for(const J of m)f+=J.getCount();const x=new Array(f);let A=0;for(const J of m)for(let te=0;te<J.getCount();te++){const ce=J.getDataCodewords(),ye=h.getECCodewordsPerBlock()+ce;x[A++]=new Na(ce,new Uint8Array(ye))}const T=x[0].codewords.length;let R=x.length-1;for(;R>=0&&x[R].codewords.length!==T;)R--;R++;const P=T-h.getECCodewordsPerBlock();let k=0;for(let J=0;J<P;J++)for(let te=0;te<A;te++)x[te].codewords[J]=r[k++];for(let J=R;J<A;J++)x[J].codewords[P]=r[k++];const G=x[0].codewords.length;for(let J=P;J<G;J++)for(let te=0;te<A;te++){const ce=te<R?J:J+1;x[te].codewords[ce]=r[k++]}return x}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var vi;(function(M){M[M.TERMINATOR=0]="TERMINATOR",M[M.NUMERIC=1]="NUMERIC",M[M.ALPHANUMERIC=2]="ALPHANUMERIC",M[M.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",M[M.BYTE=4]="BYTE",M[M.ECI=5]="ECI",M[M.KANJI=6]="KANJI",M[M.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",M[M.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",M[M.HANZI=9]="HANZI"})(vi||(vi={}));class Ze{constructor(r,a,l,h){this.value=r,this.stringValue=a,this.characterCountBitsForVersions=l,this.bits=h,Ze.FOR_BITS.set(h,this),Ze.FOR_VALUE.set(r,this)}static forBits(r){const a=Ze.FOR_BITS.get(r);if(a===void 0)throw new I;return a}getCharacterCountBits(r){const a=r.getVersionNumber();let l;return a<=9?l=0:a<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(r){if(!(r instanceof Ze))return!1;const a=r;return this.value===a.value}toString(){return this.stringValue}}Ze.FOR_BITS=new Map,Ze.FOR_VALUE=new Map,Ze.TERMINATOR=new Ze(vi.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ze.NUMERIC=new Ze(vi.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ze.ALPHANUMERIC=new Ze(vi.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ze.STRUCTURED_APPEND=new Ze(vi.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ze.BYTE=new Ze(vi.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ze.ECI=new Ze(vi.ECI,"ECI",Int32Array.from([0,0,0]),7),Ze.KANJI=new Ze(vi.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ze.FNC1_FIRST_POSITION=new Ze(vi.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ze.FNC1_SECOND_POSITION=new Ze(vi.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ze.HANZI=new Ze(vi.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class on{static decode(r,a,l,h){const f=new Bn(r);let m=new X;const x=new Array;let A=-1,T=-1;try{let R=null,P=!1,k;do{if(f.available()<4)k=Ze.TERMINATOR;else{const G=f.readBits(4);k=Ze.forBits(G)}switch(k){case Ze.TERMINATOR:break;case Ze.FNC1_FIRST_POSITION:case Ze.FNC1_SECOND_POSITION:P=!0;break;case Ze.STRUCTURED_APPEND:if(f.available()<16)throw new j;A=f.readBits(8),T=f.readBits(8);break;case Ze.ECI:const G=on.parseECIValue(f);if(R=V.getCharacterSetECIByValue(G),R===null)throw new j;break;case Ze.HANZI:const J=f.readBits(4),te=f.readBits(k.getCharacterCountBits(a));J===on.GB2312_SUBSET&&on.decodeHanziSegment(f,m,te);break;default:const ce=f.readBits(k.getCharacterCountBits(a));switch(k){case Ze.NUMERIC:on.decodeNumericSegment(f,m,ce);break;case Ze.ALPHANUMERIC:on.decodeAlphanumericSegment(f,m,ce,P);break;case Ze.BYTE:on.decodeByteSegment(f,m,ce,R,x,h);break;case Ze.KANJI:on.decodeKanjiSegment(f,m,ce);break;default:throw new j}break}}while(k!==Ze.TERMINATOR)}catch{throw new j}return new Kt(r,m.toString(),x.length===0?null:x,l===null?null:l.toString(),A,T)}static decodeHanziSegment(r,a,l){if(l*13>r.available())throw new j;const h=new Uint8Array(2*l);let f=0;for(;l>0;){const m=r.readBits(13);let x=m/96<<8&4294967295|m%96;x<959?x+=41377:x+=42657,h[f]=x>>8&255,h[f+1]=x&255,f+=2,l--}try{a.append(W.decode(h,Z.GB2312))}catch(m){throw new j(m)}}static decodeKanjiSegment(r,a,l){if(l*13>r.available())throw new j;const h=new Uint8Array(2*l);let f=0;for(;l>0;){const m=r.readBits(13);let x=m/192<<8&4294967295|m%192;x<7936?x+=33088:x+=49472,h[f]=x>>8,h[f+1]=x,f+=2,l--}try{a.append(W.decode(h,Z.SHIFT_JIS))}catch(m){throw new j(m)}}static decodeByteSegment(r,a,l,h,f,m){if(8*l>r.available())throw new j;const x=new Uint8Array(l);for(let T=0;T<l;T++)x[T]=r.readBits(8);let A;h===null?A=Z.guessEncoding(x,m):A=h.getName();try{a.append(W.decode(x,A))}catch(T){throw new j(T)}f.push(x)}static toAlphaNumericChar(r){if(r>=on.ALPHANUMERIC_CHARS.length)throw new j;return on.ALPHANUMERIC_CHARS[r]}static decodeAlphanumericSegment(r,a,l,h){const f=a.length();for(;l>1;){if(r.available()<11)throw new j;const m=r.readBits(11);a.append(on.toAlphaNumericChar(Math.floor(m/45))),a.append(on.toAlphaNumericChar(m%45)),l-=2}if(l===1){if(r.available()<6)throw new j;a.append(on.toAlphaNumericChar(r.readBits(6)))}if(h)for(let m=f;m<a.length();m++)a.charAt(m)==="%"&&(m<a.length()-1&&a.charAt(m+1)==="%"?a.deleteCharAt(m+1):a.setCharAt(m,""))}static decodeNumericSegment(r,a,l){for(;l>=3;){if(r.available()<10)throw new j;const h=r.readBits(10);if(h>=1e3)throw new j;a.append(on.toAlphaNumericChar(Math.floor(h/100))),a.append(on.toAlphaNumericChar(Math.floor(h/10)%10)),a.append(on.toAlphaNumericChar(h%10)),l-=3}if(l===2){if(r.available()<7)throw new j;const h=r.readBits(7);if(h>=100)throw new j;a.append(on.toAlphaNumericChar(Math.floor(h/10))),a.append(on.toAlphaNumericChar(h%10))}else if(l===1){if(r.available()<4)throw new j;const h=r.readBits(4);if(h>=10)throw new j;a.append(on.toAlphaNumericChar(h))}}static parseECIValue(r){const a=r.readBits(8);if((a&128)===0)return a&127;if((a&192)===128){const l=r.readBits(8);return(a&63)<<8&4294967295|l}if((a&224)===192){const l=r.readBits(16);return(a&31)<<16&4294967295|l}throw new j}}on.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",on.GB2312_SUBSET=1;class To{constructor(r){this.mirrored=r}isMirrored(){return this.mirrored}applyMirroredCorrection(r){if(!this.mirrored||r===null||r.length<3)return;const a=r[0];r[0]=r[2],r[2]=a}}class Ns{constructor(){this.rsDecoder=new Hi(Et.QR_CODE_FIELD_256)}decodeBooleanArray(r,a){return this.decodeBitMatrix(We.parseFromBooleanArray(r),a)}decodeBitMatrix(r,a){const l=new Xi(r);let h=null;try{return this.decodeBitMatrixParser(l,a)}catch(f){h=f}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const f=this.decodeBitMatrixParser(l,a);return f.setOther(new To(!0)),f}catch(f){throw h!==null?h:f}}decodeBitMatrixParser(r,a){const l=r.readVersion(),h=r.readFormatInformation().getErrorCorrectionLevel(),f=r.readCodewords(),m=Na.getDataBlocks(f,l,h);let x=0;for(const R of m)x+=R.getNumDataCodewords();const A=new Uint8Array(x);let T=0;for(const R of m){const P=R.getCodewords(),k=R.getNumDataCodewords();this.correctErrors(P,k);for(let G=0;G<k;G++)A[T++]=P[G]}return on.decode(A,l,h,a)}correctErrors(r,a){const l=new Int32Array(r);try{this.rsDecoder.decode(l,r.length-a)}catch{throw new B}for(let h=0;h<a;h++)r[h]=l[h]}}class Rs extends Fe{constructor(r,a,l){super(r,a),this.estimatedModuleSize=l}aboutEquals(r,a,l){if(Math.abs(a-this.getY())<=r&&Math.abs(l-this.getX())<=r){const h=Math.abs(r-this.estimatedModuleSize);return h<=1||h<=this.estimatedModuleSize}return!1}combineEstimate(r,a,l){const h=(this.getX()+a)/2,f=(this.getY()+r)/2,m=(this.estimatedModuleSize+l)/2;return new Rs(h,f,m)}}class Ki{constructor(r,a,l,h,f,m,x){this.image=r,this.startX=a,this.startY=l,this.width=h,this.height=f,this.moduleSize=m,this.resultPointCallback=x,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const r=this.startX,a=this.height,l=this.width,h=r+l,f=this.startY+a/2,m=new Int32Array(3),x=this.image;for(let A=0;A<a;A++){const T=f+((A&1)===0?Math.floor((A+1)/2):-Math.floor((A+1)/2));m[0]=0,m[1]=0,m[2]=0;let R=r;for(;R<h&&!x.get(R,T);)R++;let P=0;for(;R<h;){if(x.get(R,T))if(P===1)m[1]++;else if(P===2){if(this.foundPatternCross(m)){const k=this.handlePossibleCenter(m,T,R);if(k!==null)return k}m[0]=m[2],m[1]=1,m[2]=0,P=1}else m[++P]++;else P===1&&P++,m[P]++;R++}if(this.foundPatternCross(m)){const k=this.handlePossibleCenter(m,T,h);if(k!==null)return k}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new he}static centerFromEnd(r,a){return a-r[2]-r[1]/2}foundPatternCross(r){const a=this.moduleSize,l=a/2;for(let h=0;h<3;h++)if(Math.abs(a-r[h])>=l)return!1;return!0}crossCheckVertical(r,a,l,h){const f=this.image,m=f.getHeight(),x=this.crossCheckStateCount;x[0]=0,x[1]=0,x[2]=0;let A=r;for(;A>=0&&f.get(a,A)&&x[1]<=l;)x[1]++,A--;if(A<0||x[1]>l)return NaN;for(;A>=0&&!f.get(a,A)&&x[0]<=l;)x[0]++,A--;if(x[0]>l)return NaN;for(A=r+1;A<m&&f.get(a,A)&&x[1]<=l;)x[1]++,A++;if(A===m||x[1]>l)return NaN;for(;A<m&&!f.get(a,A)&&x[2]<=l;)x[2]++,A++;if(x[2]>l)return NaN;const T=x[0]+x[1]+x[2];return 5*Math.abs(T-h)>=2*h?NaN:this.foundPatternCross(x)?Ki.centerFromEnd(x,A):NaN}handlePossibleCenter(r,a,l){const h=r[0]+r[1]+r[2],f=Ki.centerFromEnd(r,l),m=this.crossCheckVertical(a,f,2*r[1],h);if(!isNaN(m)){const x=(r[0]+r[1]+r[2])/3;for(const T of this.possibleCenters)if(T.aboutEquals(x,m,f))return T.combineEstimate(m,f,x);const A=new Rs(f,m,x);this.possibleCenters.push(A),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(A)}return null}}class qs extends Fe{constructor(r,a,l,h){super(r,a),this.estimatedModuleSize=l,this.count=h,h===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(r,a,l){if(Math.abs(a-this.getY())<=r&&Math.abs(l-this.getX())<=r){const h=Math.abs(r-this.estimatedModuleSize);return h<=1||h<=this.estimatedModuleSize}return!1}combineEstimate(r,a,l){const h=this.count+1,f=(this.count*this.getX()+a)/h,m=(this.count*this.getY()+r)/h,x=(this.count*this.estimatedModuleSize+l)/h;return new qs(f,m,x,h)}}class Er{constructor(r){this.bottomLeft=r[0],this.topLeft=r[1],this.topRight=r[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class _n{constructor(r,a){this.image=r,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=a}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(r){const a=r!=null&&r.get(De.TRY_HARDER)!==void 0,l=r!=null&&r.get(De.PURE_BARCODE)!==void 0,h=this.image,f=h.getHeight(),m=h.getWidth();let x=Math.floor(3*f/(4*_n.MAX_MODULES));(x<_n.MIN_SKIP||a)&&(x=_n.MIN_SKIP);let A=!1;const T=new Int32Array(5);for(let P=x-1;P<f&&!A;P+=x){T[0]=0,T[1]=0,T[2]=0,T[3]=0,T[4]=0;let k=0;for(let G=0;G<m;G++)if(h.get(G,P))(k&1)===1&&k++,T[k]++;else if((k&1)===0)if(k===4)if(_n.foundPatternCross(T)){if(this.handlePossibleCenter(T,P,G,l)===!0)if(x=2,this.hasSkipped===!0)A=this.haveMultiplyConfirmedCenters();else{const te=this.findRowSkip();te>T[2]&&(P+=te-T[2]-x,G=m-1)}else{T[0]=T[2],T[1]=T[3],T[2]=T[4],T[3]=1,T[4]=0,k=3;continue}k=0,T[0]=0,T[1]=0,T[2]=0,T[3]=0,T[4]=0}else T[0]=T[2],T[1]=T[3],T[2]=T[4],T[3]=1,T[4]=0,k=3;else T[++k]++;else T[k]++;_n.foundPatternCross(T)&&this.handlePossibleCenter(T,P,m,l)===!0&&(x=T[0],this.hasSkipped&&(A=this.haveMultiplyConfirmedCenters()))}const R=this.selectBestPatterns();return Fe.orderBestPatterns(R),new Er(R)}static centerFromEnd(r,a){return a-r[4]-r[3]-r[2]/2}static foundPatternCross(r){let a=0;for(let f=0;f<5;f++){const m=r[f];if(m===0)return!1;a+=m}if(a<7)return!1;const l=a/7,h=l/2;return Math.abs(l-r[0])<h&&Math.abs(l-r[1])<h&&Math.abs(3*l-r[2])<3*h&&Math.abs(l-r[3])<h&&Math.abs(l-r[4])<h}getCrossCheckStateCount(){const r=this.crossCheckStateCount;return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r}crossCheckDiagonal(r,a,l,h){const f=this.getCrossCheckStateCount();let m=0;const x=this.image;for(;r>=m&&a>=m&&x.get(a-m,r-m);)f[2]++,m++;if(r<m||a<m)return!1;for(;r>=m&&a>=m&&!x.get(a-m,r-m)&&f[1]<=l;)f[1]++,m++;if(r<m||a<m||f[1]>l)return!1;for(;r>=m&&a>=m&&x.get(a-m,r-m)&&f[0]<=l;)f[0]++,m++;if(f[0]>l)return!1;const A=x.getHeight(),T=x.getWidth();for(m=1;r+m<A&&a+m<T&&x.get(a+m,r+m);)f[2]++,m++;if(r+m>=A||a+m>=T)return!1;for(;r+m<A&&a+m<T&&!x.get(a+m,r+m)&&f[3]<l;)f[3]++,m++;if(r+m>=A||a+m>=T||f[3]>=l)return!1;for(;r+m<A&&a+m<T&&x.get(a+m,r+m)&&f[4]<l;)f[4]++,m++;if(f[4]>=l)return!1;const R=f[0]+f[1]+f[2]+f[3]+f[4];return Math.abs(R-h)<2*h&&_n.foundPatternCross(f)}crossCheckVertical(r,a,l,h){const f=this.image,m=f.getHeight(),x=this.getCrossCheckStateCount();let A=r;for(;A>=0&&f.get(a,A);)x[2]++,A--;if(A<0)return NaN;for(;A>=0&&!f.get(a,A)&&x[1]<=l;)x[1]++,A--;if(A<0||x[1]>l)return NaN;for(;A>=0&&f.get(a,A)&&x[0]<=l;)x[0]++,A--;if(x[0]>l)return NaN;for(A=r+1;A<m&&f.get(a,A);)x[2]++,A++;if(A===m)return NaN;for(;A<m&&!f.get(a,A)&&x[3]<l;)x[3]++,A++;if(A===m||x[3]>=l)return NaN;for(;A<m&&f.get(a,A)&&x[4]<l;)x[4]++,A++;if(x[4]>=l)return NaN;const T=x[0]+x[1]+x[2]+x[3]+x[4];return 5*Math.abs(T-h)>=2*h?NaN:_n.foundPatternCross(x)?_n.centerFromEnd(x,A):NaN}crossCheckHorizontal(r,a,l,h){const f=this.image,m=f.getWidth(),x=this.getCrossCheckStateCount();let A=r;for(;A>=0&&f.get(A,a);)x[2]++,A--;if(A<0)return NaN;for(;A>=0&&!f.get(A,a)&&x[1]<=l;)x[1]++,A--;if(A<0||x[1]>l)return NaN;for(;A>=0&&f.get(A,a)&&x[0]<=l;)x[0]++,A--;if(x[0]>l)return NaN;for(A=r+1;A<m&&f.get(A,a);)x[2]++,A++;if(A===m)return NaN;for(;A<m&&!f.get(A,a)&&x[3]<l;)x[3]++,A++;if(A===m||x[3]>=l)return NaN;for(;A<m&&f.get(A,a)&&x[4]<l;)x[4]++,A++;if(x[4]>=l)return NaN;const T=x[0]+x[1]+x[2]+x[3]+x[4];return 5*Math.abs(T-h)>=h?NaN:_n.foundPatternCross(x)?_n.centerFromEnd(x,A):NaN}handlePossibleCenter(r,a,l,h){const f=r[0]+r[1]+r[2]+r[3]+r[4];let m=_n.centerFromEnd(r,l),x=this.crossCheckVertical(a,Math.floor(m),r[2],f);if(!isNaN(x)&&(m=this.crossCheckHorizontal(Math.floor(m),Math.floor(x),r[2],f),!isNaN(m)&&(!h||this.crossCheckDiagonal(Math.floor(x),Math.floor(m),r[2],f)))){const A=f/7;let T=!1;const R=this.possibleCenters;for(let P=0,k=R.length;P<k;P++){const G=R[P];if(G.aboutEquals(A,x,m)){R[P]=G.combineEstimate(x,m,A),T=!0;break}}if(!T){const P=new qs(m,x,A);R.push(P),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(P)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let a=null;for(const l of this.possibleCenters)if(l.getCount()>=_n.CENTER_QUORUM)if(a==null)a=l;else return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-l.getX())-Math.abs(a.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let r=0,a=0;const l=this.possibleCenters.length;for(const m of this.possibleCenters)m.getCount()>=_n.CENTER_QUORUM&&(r++,a+=m.getEstimatedModuleSize());if(r<3)return!1;const h=a/l;let f=0;for(const m of this.possibleCenters)f+=Math.abs(m.getEstimatedModuleSize()-h);return f<=.05*a}selectBestPatterns(){const r=this.possibleCenters.length;if(r<3)throw new he;const a=this.possibleCenters;let l;if(r>3){let h=0,f=0;for(const A of this.possibleCenters){const T=A.getEstimatedModuleSize();h+=T,f+=T*T}l=h/r;let m=Math.sqrt(f/r-l*l);a.sort((A,T)=>{const R=Math.abs(T.getEstimatedModuleSize()-l),P=Math.abs(A.getEstimatedModuleSize()-l);return R<P?-1:R>P?1:0});const x=Math.max(.2*l,m);for(let A=0;A<a.length&&a.length>3;A++){const T=a[A];Math.abs(T.getEstimatedModuleSize()-l)>x&&(a.splice(A,1),A--)}}if(a.length>3){let h=0;for(const f of a)h+=f.getEstimatedModuleSize();l=h/a.length,a.sort((f,m)=>{if(m.getCount()===f.getCount()){const x=Math.abs(m.getEstimatedModuleSize()-l),A=Math.abs(f.getEstimatedModuleSize()-l);return x<A?1:x>A?-1:0}else return m.getCount()-f.getCount()}),a.splice(3)}return[a[0],a[1],a[2]]}}_n.CENTER_QUORUM=2,_n.MIN_SKIP=3,_n.MAX_MODULES=57;class Wi{constructor(r){this.image=r}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(r){this.resultPointCallback=r==null?null:r.get(De.NEED_RESULT_POINT_CALLBACK);const l=new _n(this.image,this.resultPointCallback).find(r);return this.processFinderPatternInfo(l)}processFinderPatternInfo(r){const a=r.getTopLeft(),l=r.getTopRight(),h=r.getBottomLeft(),f=this.calculateModuleSize(a,l,h);if(f<1)throw new he("No pattern found in proccess finder.");const m=Wi.computeDimension(a,l,h,f),x=Ye.getProvisionalVersionForDimension(m),A=x.getDimensionForVersion()-7;let T=null;if(x.getAlignmentPatternCenters().length>0){const G=l.getX()-a.getX()+h.getX(),J=l.getY()-a.getY()+h.getY(),te=1-3/A,ce=Math.floor(a.getX()+te*(G-a.getX())),ye=Math.floor(a.getY()+te*(J-a.getY()));for(let Pe=4;Pe<=16;Pe<<=1)try{T=this.findAlignmentInRegion(f,ce,ye,Pe);break}catch(Me){if(!(Me instanceof he))throw Me}}const R=Wi.createTransform(a,l,h,T,m),P=Wi.sampleGrid(this.image,R,m);let k;return T===null?k=[h,a,l]:k=[h,a,l,T],new xs(P,k)}static createTransform(r,a,l,h,f){const m=f-3.5;let x,A,T,R;return h!==null?(x=h.getX(),A=h.getY(),T=m-3,R=T):(x=a.getX()-r.getX()+l.getX(),A=a.getY()-r.getY()+l.getY(),T=m,R=m),ui.quadrilateralToQuadrilateral(3.5,3.5,m,3.5,T,R,3.5,m,r.getX(),r.getY(),a.getX(),a.getY(),x,A,l.getX(),l.getY())}static sampleGrid(r,a,l){return ri.getInstance().sampleGridWithTransform(r,l,l,a)}static computeDimension(r,a,l,h){const f=Qe.round(Fe.distance(r,a)/h),m=Qe.round(Fe.distance(r,l)/h);let x=Math.floor((f+m)/2)+7;switch(x&3){case 0:x++;break;case 2:x--;break;case 3:throw new he("Dimensions could be not found.")}return x}calculateModuleSize(r,a,l){return(this.calculateModuleSizeOneWay(r,a)+this.calculateModuleSizeOneWay(r,l))/2}calculateModuleSizeOneWay(r,a){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(a.getX()),Math.floor(a.getY())),h=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.getX()),Math.floor(a.getY()),Math.floor(r.getX()),Math.floor(r.getY()));return isNaN(l)?h/7:isNaN(h)?l/7:(l+h)/14}sizeOfBlackWhiteBlackRunBothWays(r,a,l,h){let f=this.sizeOfBlackWhiteBlackRun(r,a,l,h),m=1,x=r-(l-r);x<0?(m=r/(r-x),x=0):x>=this.image.getWidth()&&(m=(this.image.getWidth()-1-r)/(x-r),x=this.image.getWidth()-1);let A=Math.floor(a-(h-a)*m);return m=1,A<0?(m=a/(a-A),A=0):A>=this.image.getHeight()&&(m=(this.image.getHeight()-1-a)/(A-a),A=this.image.getHeight()-1),x=Math.floor(r+(x-r)*m),f+=this.sizeOfBlackWhiteBlackRun(r,a,x,A),f-1}sizeOfBlackWhiteBlackRun(r,a,l,h){const f=Math.abs(h-a)>Math.abs(l-r);if(f){let G=r;r=a,a=G,G=l,l=h,h=G}const m=Math.abs(l-r),x=Math.abs(h-a);let A=-m/2;const T=r<l?1:-1,R=a<h?1:-1;let P=0;const k=l+T;for(let G=r,J=a;G!==k;G+=T){const te=f?J:G,ce=f?G:J;if(P===1===this.image.get(te,ce)){if(P===2)return Qe.distance(G,J,r,a);P++}if(A+=x,A>0){if(J===h)break;J+=R,A-=m}}return P===2?Qe.distance(l+T,h,r,a):NaN}findAlignmentInRegion(r,a,l,h){const f=Math.floor(h*r),m=Math.max(0,a-f),x=Math.min(this.image.getWidth()-1,a+f);if(x-m<r*3)throw new he("Alignment top exceeds estimated module size.");const A=Math.max(0,l-f),T=Math.min(this.image.getHeight()-1,l+f);if(T-A<r*3)throw new he("Alignment bottom exceeds estimated module size.");return new Ki(this.image,m,A,x-m,T-A,r,this.resultPointCallback).find()}}class Qi{constructor(){this.decoder=new Ns}getDecoder(){return this.decoder}decode(r,a){let l,h;if(a!=null&&a.get(De.PURE_BARCODE)!==void 0){const A=Qi.extractPureBits(r.getBlackMatrix());l=this.decoder.decodeBitMatrix(A,a),h=Qi.NO_POINTS}else{const A=new Wi(r.getBlackMatrix()).detect(a);l=this.decoder.decodeBitMatrix(A.getBits(),a),h=A.getPoints()}l.getOther()instanceof To&&l.getOther().applyMirroredCorrection(h);const f=new Ve(l.getText(),l.getRawBytes(),void 0,h,Le.QR_CODE,void 0),m=l.getByteSegments();m!==null&&f.putMetadata(yt.BYTE_SEGMENTS,m);const x=l.getECLevel();return x!==null&&f.putMetadata(yt.ERROR_CORRECTION_LEVEL,x),l.hasStructuredAppend()&&(f.putMetadata(yt.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),f.putMetadata(yt.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),f}reset(){}static extractPureBits(r){const a=r.getTopLeftOnBit(),l=r.getBottomRightOnBit();if(a===null||l===null)throw new he;const h=this.moduleSize(a,r);let f=a[1],m=l[1],x=a[0],A=l[0];if(x>=A||f>=m)throw new he;if(m-f!==A-x&&(A=x+(m-f),A>=r.getWidth()))throw new he;const T=Math.round((A-x+1)/h),R=Math.round((m-f+1)/h);if(T<=0||R<=0)throw new he;if(R!==T)throw new he;const P=Math.floor(h/2);f+=P,x+=P;const k=x+Math.floor((T-1)*h)-A;if(k>0){if(k>P)throw new he;x-=k}const G=f+Math.floor((R-1)*h)-m;if(G>0){if(G>P)throw new he;f-=G}const J=new We(T,R);for(let te=0;te<R;te++){const ce=f+Math.floor(te*h);for(let ye=0;ye<T;ye++)r.get(x+Math.floor(ye*h),ce)&&J.set(ye,te)}return J}static moduleSize(r,a){const l=a.getHeight(),h=a.getWidth();let f=r[0],m=r[1],x=!0,A=0;for(;f<h&&m<l;){if(x!==a.get(f,m)){if(++A===5)break;x=!x}f++,m++}if(f===h||m===l)throw new he;return(f-r[0])/7}}Qi.NO_POINTS=new Array;class Je{PDF417Common(){}static getBitCountSum(r){return Qe.sum(r)}static toIntArray(r){if(r==null||!r.length)return Je.EMPTY_INT_ARRAY;const a=new Int32Array(r.length);let l=0;for(const h of r)a[l++]=h;return a}static getCodeword(r){const a=me.binarySearch(Je.SYMBOL_TABLE,r&262143);return a<0?-1:(Je.CODEWORD_TABLE[a]-1)%Je.NUMBER_OF_CODEWORDS}}Je.NUMBER_OF_CODEWORDS=929,Je.MAX_CODEWORDS_IN_BARCODE=Je.NUMBER_OF_CODEWORDS-1,Je.MIN_ROWS_IN_BARCODE=3,Je.MAX_ROWS_IN_BARCODE=90,Je.MODULES_IN_CODEWORD=17,Je.MODULES_IN_STOP_PATTERN=18,Je.BARS_IN_MODULE=8,Je.EMPTY_INT_ARRAY=new Int32Array([]),Je.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Je.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Os{constructor(r,a){this.bits=r,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class it{static detectMultiple(r,a,l){let h=r.getBlackMatrix(),f=it.detect(l,h);return f.length||(h=h.clone(),h.rotate180(),f=it.detect(l,h)),new Os(h,f)}static detect(r,a){const l=new Array;let h=0,f=0,m=!1;for(;h<a.getHeight();){const x=it.findVertices(a,h,f);if(x[0]==null&&x[3]==null){if(!m)break;m=!1,f=0;for(const A of l)A[1]!=null&&(h=Math.trunc(Math.max(h,A[1].getY()))),A[3]!=null&&(h=Math.max(h,Math.trunc(A[3].getY())));h+=it.ROW_STEP;continue}if(m=!0,l.push(x),!r)break;x[2]!=null?(f=Math.trunc(x[2].getX()),h=Math.trunc(x[2].getY())):(f=Math.trunc(x[4].getX()),h=Math.trunc(x[4].getY()))}return l}static findVertices(r,a,l){const h=r.getHeight(),f=r.getWidth(),m=new Array(8);return it.copyToResult(m,it.findRowsWithPattern(r,h,f,a,l,it.START_PATTERN),it.INDEXES_START_PATTERN),m[4]!=null&&(l=Math.trunc(m[4].getX()),a=Math.trunc(m[4].getY())),it.copyToResult(m,it.findRowsWithPattern(r,h,f,a,l,it.STOP_PATTERN),it.INDEXES_STOP_PATTERN),m}static copyToResult(r,a,l){for(let h=0;h<l.length;h++)r[l[h]]=a[h]}static findRowsWithPattern(r,a,l,h,f,m){const x=new Array(4);let A=!1;const T=new Int32Array(m.length);for(;h<a;h+=it.ROW_STEP){let P=it.findGuardPattern(r,f,h,l,!1,m,T);if(P!=null){for(;h>0;){const k=it.findGuardPattern(r,f,--h,l,!1,m,T);if(k!=null)P=k;else{h++;break}}x[0]=new Fe(P[0],h),x[1]=new Fe(P[1],h),A=!0;break}}let R=h+1;if(A){let P=0,k=Int32Array.from([Math.trunc(x[0].getX()),Math.trunc(x[1].getX())]);for(;R<a;R++){const G=it.findGuardPattern(r,k[0],R,l,!1,m,T);if(G!=null&&Math.abs(k[0]-G[0])<it.MAX_PATTERN_DRIFT&&Math.abs(k[1]-G[1])<it.MAX_PATTERN_DRIFT)k=G,P=0;else{if(P>it.SKIPPED_ROW_COUNT_MAX)break;P++}}R-=P+1,x[2]=new Fe(k[0],R),x[3]=new Fe(k[1],R)}return R-h<it.BARCODE_MIN_HEIGHT&&me.fill(x,null),x}static findGuardPattern(r,a,l,h,f,m,x){me.fillWithin(x,0,x.length,0);let A=a,T=0;for(;r.get(A,l)&&A>0&&T++<it.MAX_PIXEL_DRIFT;)A--;let R=A,P=0,k=m.length;for(let G=f;R<h;R++)if(r.get(R,l)!==G)x[P]++;else{if(P===k-1){if(it.patternMatchVariance(x,m,it.MAX_INDIVIDUAL_VARIANCE)<it.MAX_AVG_VARIANCE)return new Int32Array([A,R]);A+=x[0]+x[1],K.arraycopy(x,2,x,0,P-1),x[P-1]=0,x[P]=0,P--}else P++;x[P]=1,G=!G}return P===k-1&&it.patternMatchVariance(x,m,it.MAX_INDIVIDUAL_VARIANCE)<it.MAX_AVG_VARIANCE?new Int32Array([A,R-1]):null}static patternMatchVariance(r,a,l){let h=r.length,f=0,m=0;for(let T=0;T<h;T++)f+=r[T],m+=a[T];if(f<m)return 1/0;let x=f/m;l*=x;let A=0;for(let T=0;T<h;T++){let R=r[T],P=a[T]*x,k=R>P?R-P:P-R;if(k>l)return 1/0;A+=k}return A/f}}it.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),it.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),it.MAX_AVG_VARIANCE=.42,it.MAX_INDIVIDUAL_VARIANCE=.8,it.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),it.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),it.MAX_PIXEL_DRIFT=3,it.MAX_PATTERN_DRIFT=5,it.SKIPPED_ROW_COUNT_MAX=25,it.ROW_STEP=5,it.BARCODE_MIN_HEIGHT=10;class ln{constructor(r,a){if(a.length===0)throw new I;this.field=r;let l=a.length;if(l>1&&a[0]===0){let h=1;for(;h<l&&a[h]===0;)h++;h===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-h),K.arraycopy(a,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);if(r===1){let h=0;for(let f of this.coefficients)h=this.field.add(h,f);return h}let a=this.coefficients[0],l=this.coefficients.length;for(let h=1;h<l;h++)a=this.field.add(this.field.multiply(r,a),this.coefficients[h]);return a}add(r){if(!this.field.equals(r.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero())return r;if(r.isZero())return this;let a=this.coefficients,l=r.coefficients;if(a.length>l.length){let m=a;a=l,l=m}let h=new Int32Array(l.length),f=l.length-a.length;K.arraycopy(l,0,h,0,f);for(let m=f;m<l.length;m++)h[m]=this.field.add(a[m-f],l[m]);return new ln(this.field,h)}subtract(r){if(!this.field.equals(r.field))throw new I("ModulusPolys do not have same ModulusGF field");return r.isZero()?this:this.add(r.negative())}multiply(r){return r instanceof ln?this.multiplyOther(r):this.multiplyScalar(r)}multiplyOther(r){if(!this.field.equals(r.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero()||r.isZero())return new ln(this.field,new Int32Array([0]));let a=this.coefficients,l=a.length,h=r.coefficients,f=h.length,m=new Int32Array(l+f-1);for(let x=0;x<l;x++){let A=a[x];for(let T=0;T<f;T++)m[x+T]=this.field.add(m[x+T],this.field.multiply(A,h[T]))}return new ln(this.field,m)}negative(){let r=this.coefficients.length,a=new Int32Array(r);for(let l=0;l<r;l++)a[l]=this.field.subtract(0,this.coefficients[l]);return new ln(this.field,a)}multiplyScalar(r){if(r===0)return new ln(this.field,new Int32Array([0]));if(r===1)return this;let a=this.coefficients.length,l=new Int32Array(a);for(let h=0;h<a;h++)l[h]=this.field.multiply(this.coefficients[h],r);return new ln(this.field,l)}multiplyByMonomial(r,a){if(r<0)throw new I;if(a===0)return new ln(this.field,new Int32Array([0]));let l=this.coefficients.length,h=new Int32Array(l+r);for(let f=0;f<l;f++)h[f]=this.field.multiply(this.coefficients[f],a);return new ln(this.field,h)}toString(){let r=new X;for(let a=this.getDegree();a>=0;a--){let l=this.getCoefficient(a);l!==0&&(l<0?(r.append(" - "),l=-l):r.length()>0&&r.append(" + "),(a===0||l!==1)&&r.append(l),a!==0&&(a===1?r.append("x"):(r.append("x^"),r.append(a))))}return r.toString()}}class Ys{add(r,a){return(r+a)%this.modulus}subtract(r,a){return(this.modulus+r-a)%this.modulus}exp(r){return this.expTable[r]}log(r){if(r===0)throw new I;return this.logTable[r]}inverse(r){if(r===0)throw new gr;return this.expTable[this.modulus-this.logTable[r]-1]}multiply(r,a){return r===0||a===0?0:this.expTable[(this.logTable[r]+this.logTable[a])%(this.modulus-1)]}getSize(){return this.modulus}equals(r){return r===this}}class tn extends Ys{constructor(r,a){super(),this.modulus=r,this.expTable=new Int32Array(r),this.logTable=new Int32Array(r);let l=1;for(let h=0;h<r;h++)this.expTable[h]=l,l=l*a%r;for(let h=0;h<r-1;h++)this.logTable[this.expTable[h]]=h;this.zero=new ln(this,new Int32Array([0])),this.one=new ln(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,a){if(r<0)throw new I;if(a===0)return this.zero;let l=new Int32Array(r+1);return l[0]=a,new ln(this,l)}}tn.PDF417_GF=new tn(Je.NUMBER_OF_CODEWORDS,3);class Dr{constructor(){this.field=tn.PDF417_GF}decode(r,a,l){let h=new ln(this.field,r),f=new Int32Array(a),m=!1;for(let J=a;J>0;J--){let te=h.evaluateAt(this.field.exp(J));f[a-J]=te,te!==0&&(m=!0)}if(!m)return 0;let x=this.field.getOne();if(l!=null)for(const J of l){let te=this.field.exp(r.length-1-J),ce=new ln(this.field,new Int32Array([this.field.subtract(0,te),1]));x=x.multiply(ce)}let A=new ln(this.field,f),T=this.runEuclideanAlgorithm(this.field.buildMonomial(a,1),A,a),R=T[0],P=T[1],k=this.findErrorLocations(R),G=this.findErrorMagnitudes(P,R,k);for(let J=0;J<k.length;J++){let te=r.length-1-this.field.log(k[J]);if(te<0)throw B.getChecksumInstance();r[te]=this.field.subtract(r[te],G[J])}return k.length}runEuclideanAlgorithm(r,a,l){if(r.getDegree()<a.getDegree()){let k=r;r=a,a=k}let h=r,f=a,m=this.field.getZero(),x=this.field.getOne();for(;f.getDegree()>=Math.round(l/2);){let k=h,G=m;if(h=f,m=x,h.isZero())throw B.getChecksumInstance();f=k;let J=this.field.getZero(),te=h.getCoefficient(h.getDegree()),ce=this.field.inverse(te);for(;f.getDegree()>=h.getDegree()&&!f.isZero();){let ye=f.getDegree()-h.getDegree(),Pe=this.field.multiply(f.getCoefficient(f.getDegree()),ce);J=J.add(this.field.buildMonomial(ye,Pe)),f=f.subtract(h.multiplyByMonomial(ye,Pe))}x=J.multiply(m).subtract(G).negative()}let A=x.getCoefficient(0);if(A===0)throw B.getChecksumInstance();let T=this.field.inverse(A),R=x.multiply(T),P=f.multiply(T);return[R,P]}findErrorLocations(r){let a=r.getDegree(),l=new Int32Array(a),h=0;for(let f=1;f<this.field.getSize()&&h<a;f++)r.evaluateAt(f)===0&&(l[h]=this.field.inverse(f),h++);if(h!==a)throw B.getChecksumInstance();return l}findErrorMagnitudes(r,a,l){let h=a.getDegree(),f=new Int32Array(h);for(let T=1;T<=h;T++)f[h-T]=this.field.multiply(T,a.getCoefficient(T));let m=new ln(this.field,f),x=l.length,A=new Int32Array(x);for(let T=0;T<x;T++){let R=this.field.inverse(l[T]),P=this.field.subtract(0,r.evaluateAt(R)),k=this.field.inverse(m.evaluateAt(R));A[T]=this.field.multiply(P,k)}return A}}class Mr{constructor(r,a,l,h,f){r instanceof Mr?this.constructor_2(r):this.constructor_1(r,a,l,h,f)}constructor_1(r,a,l,h,f){const m=a==null||l==null,x=h==null||f==null;if(m&&x)throw new he;m?(a=new Fe(0,h.getY()),l=new Fe(0,f.getY())):x&&(h=new Fe(r.getWidth()-1,a.getY()),f=new Fe(r.getWidth()-1,l.getY())),this.image=r,this.topLeft=a,this.bottomLeft=l,this.topRight=h,this.bottomRight=f,this.minX=Math.trunc(Math.min(a.getX(),l.getX())),this.maxX=Math.trunc(Math.max(h.getX(),f.getX())),this.minY=Math.trunc(Math.min(a.getY(),h.getY())),this.maxY=Math.trunc(Math.max(l.getY(),f.getY()))}constructor_2(r){this.image=r.image,this.topLeft=r.getTopLeft(),this.bottomLeft=r.getBottomLeft(),this.topRight=r.getTopRight(),this.bottomRight=r.getBottomRight(),this.minX=r.getMinX(),this.maxX=r.getMaxX(),this.minY=r.getMinY(),this.maxY=r.getMaxY()}static merge(r,a){return r==null?a:a==null?r:new Mr(r.image,r.topLeft,r.bottomLeft,a.topRight,a.bottomRight)}addMissingRows(r,a,l){let h=this.topLeft,f=this.bottomLeft,m=this.topRight,x=this.bottomRight;if(r>0){let A=l?this.topLeft:this.topRight,T=Math.trunc(A.getY()-r);T<0&&(T=0);let R=new Fe(A.getX(),T);l?h=R:m=R}if(a>0){let A=l?this.bottomLeft:this.bottomRight,T=Math.trunc(A.getY()+a);T>=this.image.getHeight()&&(T=this.image.getHeight()-1);let R=new Fe(A.getX(),T);l?f=R:x=R}return new Mr(this.image,h,f,m,x)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Xs{constructor(r,a,l,h){this.columnCount=r,this.errorCorrectionLevel=h,this.rowCountUpperPart=a,this.rowCountLowerPart=l,this.rowCount=a+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Es{constructor(){this.buffer=""}static form(r,a){let l=-1;function h(m,x,A,T,R,P){if(m==="%%")return"%";if(a[++l]===void 0)return;m=T?parseInt(T.substr(1)):void 0;let k=R?parseInt(R.substr(1)):void 0,G;switch(P){case"s":G=a[l];break;case"c":G=a[l][0];break;case"f":G=parseFloat(a[l]).toFixed(m);break;case"p":G=parseFloat(a[l]).toPrecision(m);break;case"e":G=parseFloat(a[l]).toExponential(m);break;case"x":G=parseInt(a[l]).toString(k||16);break;case"d":G=parseFloat(parseInt(a[l],k||10).toPrecision(m)).toFixed(0);break}G=typeof G=="object"?JSON.stringify(G):(+G).toString(k);let J=parseInt(A),te=A&&A[0]+""=="0"?"0":" ";for(;G.length<J;)G=x!==void 0?G+te:te+G;return G}let f=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(f,h)}format(r,...a){this.buffer+=Es.form(r,a)}toString(){return this.buffer}}class Lr{constructor(r){this.boundingBox=new Mr(r),this.codewords=new Array(r.getMaxY()-r.getMinY()+1)}getCodewordNearby(r){let a=this.getCodeword(r);if(a!=null)return a;for(let l=1;l<Lr.MAX_NEARBY_DISTANCE;l++){let h=this.imageRowToCodewordIndex(r)-l;if(h>=0&&(a=this.codewords[h],a!=null)||(h=this.imageRowToCodewordIndex(r)+l,h<this.codewords.length&&(a=this.codewords[h],a!=null)))return a}return null}imageRowToCodewordIndex(r){return r-this.boundingBox.getMinY()}setCodeword(r,a){this.codewords[this.imageRowToCodewordIndex(r)]=a}getCodeword(r){return this.codewords[this.imageRowToCodewordIndex(r)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const r=new Es;let a=0;for(const l of this.codewords){if(l==null){r.format("%3d:    |   %n",a++);continue}r.format("%3d: %3d|%3d%n",a++,l.getRowNumber(),l.getValue())}return r.toString()}}Lr.MAX_NEARBY_DISTANCE=5;class ar{constructor(){this.values=new Map}setValue(r){r=Math.trunc(r);let a=this.values.get(r);a==null&&(a=0),a++,this.values.set(r,a)}getValue(){let r=-1,a=new Array;for(const[l,h]of this.values.entries()){const f={getKey:()=>l,getValue:()=>h};f.getValue()>r?(r=f.getValue(),a=[],a.push(f.getKey())):f.getValue()===r&&a.push(f.getKey())}return Je.toIntArray(a)}getConfidence(r){return this.values.get(r)}}class _r extends Lr{constructor(r,a){super(r),this._isLeft=a}setRowNumbers(){for(let r of this.getCodewords())r!=null&&r.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(r){let a=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(a,r);let l=this.getBoundingBox(),h=this._isLeft?l.getTopLeft():l.getTopRight(),f=this._isLeft?l.getBottomLeft():l.getBottomRight(),m=this.imageRowToCodewordIndex(Math.trunc(h.getY())),x=this.imageRowToCodewordIndex(Math.trunc(f.getY())),A=-1,T=1,R=0;for(let P=m;P<x;P++){if(a[P]==null)continue;let k=a[P],G=k.getRowNumber()-A;if(G===0)R++;else if(G===1)T=Math.max(T,R),R=1,A=k.getRowNumber();else if(G<0||k.getRowNumber()>=r.getRowCount()||G>P)a[P]=null;else{let J;T>2?J=(T-2)*G:J=G;let te=J>=P;for(let ce=1;ce<=J&&!te;ce++)te=a[P-ce]!=null;te?a[P]=null:(A=k.getRowNumber(),R=1)}}}getRowHeights(){let r=this.getBarcodeMetadata();if(r==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(r);let a=new Int32Array(r.getRowCount());for(let l of this.getCodewords())if(l!=null){let h=l.getRowNumber();if(h>=a.length)continue;a[h]++}return a}adjustIncompleteIndicatorColumnRowNumbers(r){let a=this.getBoundingBox(),l=this._isLeft?a.getTopLeft():a.getTopRight(),h=this._isLeft?a.getBottomLeft():a.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(l.getY())),m=this.imageRowToCodewordIndex(Math.trunc(h.getY())),x=this.getCodewords(),A=-1;for(let T=f;T<m;T++){if(x[T]==null)continue;let R=x[T];R.setRowNumberAsRowIndicatorColumn();let P=R.getRowNumber()-A;P===0||(P===1?A=R.getRowNumber():R.getRowNumber()>=r.getRowCount()?x[T]=null:A=R.getRowNumber())}}getBarcodeMetadata(){let r=this.getCodewords(),a=new ar,l=new ar,h=new ar,f=new ar;for(let x of r){if(x==null)continue;x.setRowNumberAsRowIndicatorColumn();let A=x.getValue()%30,T=x.getRowNumber();switch(this._isLeft||(T+=2),T%3){case 0:l.setValue(A*3+1);break;case 1:f.setValue(A/3),h.setValue(A%3);break;case 2:a.setValue(A+1);break}}if(a.getValue().length===0||l.getValue().length===0||h.getValue().length===0||f.getValue().length===0||a.getValue()[0]<1||l.getValue()[0]+h.getValue()[0]<Je.MIN_ROWS_IN_BARCODE||l.getValue()[0]+h.getValue()[0]>Je.MAX_ROWS_IN_BARCODE)return null;let m=new Xs(a.getValue()[0],l.getValue()[0],h.getValue()[0],f.getValue()[0]);return this.removeIncorrectCodewords(r,m),m}removeIncorrectCodewords(r,a){for(let l=0;l<r.length;l++){let h=r[l];if(r[l]==null)continue;let f=h.getValue()%30,m=h.getRowNumber();if(m>a.getRowCount()){r[l]=null;continue}switch(this._isLeft||(m+=2),m%3){case 0:f*3+1!==a.getRowCountUpperPart()&&(r[l]=null);break;case 1:(Math.trunc(f/3)!==a.getErrorCorrectionLevel()||f%3!==a.getRowCountLowerPart())&&(r[l]=null);break;case 2:f+1!==a.getColumnCount()&&(r[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Yn{constructor(r,a){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=r,this.barcodeColumnCount=r.getColumnCount(),this.boundingBox=a,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let r=Je.MAX_CODEWORDS_IN_BARCODE,a;do a=r,r=this.adjustRowNumbersAndGetCount();while(r>0&&r<a);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(r){r!=null&&r.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let r=this.adjustRowNumbersByRow();if(r===0)return 0;for(let a=1;a<this.barcodeColumnCount+1;a++){let l=this.detectionResultColumns[a].getCodewords();for(let h=0;h<l.length;h++)l[h]!=null&&(l[h].hasValidRowNumber()||this.adjustRowNumbers(a,h,l))}return r}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let r=this.detectionResultColumns[0].getCodewords(),a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<r.length;l++)if(r[l]!=null&&a[l]!=null&&r[l].getRowNumber()===a[l].getRowNumber())for(let h=1;h<=this.barcodeColumnCount;h++){let f=this.detectionResultColumns[h].getCodewords()[l];f!=null&&(f.setRowNumber(r[l].getRowNumber()),f.hasValidRowNumber()||(this.detectionResultColumns[h].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let r=0,a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<a.length;l++){if(a[l]==null)continue;let h=a[l].getRowNumber(),f=0;for(let m=this.barcodeColumnCount+1;m>0&&f<this.ADJUST_ROW_NUMBER_SKIP;m--){let x=this.detectionResultColumns[m].getCodewords()[l];x!=null&&(f=Yn.adjustRowNumberIfValid(h,f,x),x.hasValidRowNumber()||r++)}}return r}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let r=0,a=this.detectionResultColumns[0].getCodewords();for(let l=0;l<a.length;l++){if(a[l]==null)continue;let h=a[l].getRowNumber(),f=0;for(let m=1;m<this.barcodeColumnCount+1&&f<this.ADJUST_ROW_NUMBER_SKIP;m++){let x=this.detectionResultColumns[m].getCodewords()[l];x!=null&&(f=Yn.adjustRowNumberIfValid(h,f,x),x.hasValidRowNumber()||r++)}}return r}static adjustRowNumberIfValid(r,a,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(r)?(l.setRowNumber(r),a=0):++a),a}adjustRowNumbers(r,a,l){if(!this.detectionResultColumns[r-1])return;let h=l[a],f=this.detectionResultColumns[r-1].getCodewords(),m=f;this.detectionResultColumns[r+1]!=null&&(m=this.detectionResultColumns[r+1].getCodewords());let x=new Array(14);x[2]=f[a],x[3]=m[a],a>0&&(x[0]=l[a-1],x[4]=f[a-1],x[5]=m[a-1]),a>1&&(x[8]=l[a-2],x[10]=f[a-2],x[11]=m[a-2]),a<l.length-1&&(x[1]=l[a+1],x[6]=f[a+1],x[7]=m[a+1]),a<l.length-2&&(x[9]=l[a+2],x[12]=f[a+2],x[13]=m[a+2]);for(let A of x)if(Yn.adjustRowNumber(h,A))return}static adjustRowNumber(r,a){return a==null?!1:a.hasValidRowNumber()&&a.getBucket()===r.getBucket()?(r.setRowNumber(a.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(r){this.boundingBox=r}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(r,a){this.detectionResultColumns[r]=a}getDetectionResultColumn(r){return this.detectionResultColumns[r]}toString(){let r=this.detectionResultColumns[0];r==null&&(r=this.detectionResultColumns[this.barcodeColumnCount+1]);let a=new Es;for(let l=0;l<r.getCodewords().length;l++){a.format("CW %3d:",l);for(let h=0;h<this.barcodeColumnCount+2;h++){if(this.detectionResultColumns[h]==null){a.format("    |   ");continue}let f=this.detectionResultColumns[h].getCodewords()[l];if(f==null){a.format("    |   ");continue}a.format(" %3d|%3d",f.getRowNumber(),f.getValue())}a.format("%n")}return a.toString()}}class or{constructor(r,a,l,h){this.rowNumber=or.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(r),this.endX=Math.trunc(a),this.bucket=Math.trunc(l),this.value=Math.trunc(h)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(r){return r!==or.BARCODE_ROW_UNKNOWN&&this.bucket===r%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(r){this.rowNumber=r}toString(){return this.rowNumber+"|"+this.value}}or.BARCODE_ROW_UNKNOWN=-1;class Nn{static initialize(){for(let r=0;r<Je.SYMBOL_TABLE.length;r++){let a=Je.SYMBOL_TABLE[r],l=a&1;for(let h=0;h<Je.BARS_IN_MODULE;h++){let f=0;for(;(a&1)===l;)f+=1,a>>=1;l=a&1,Nn.RATIOS_TABLE[r]||(Nn.RATIOS_TABLE[r]=new Array(Je.BARS_IN_MODULE)),Nn.RATIOS_TABLE[r][Je.BARS_IN_MODULE-h-1]=Math.fround(f/Je.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(r){let a=Nn.getDecodedCodewordValue(Nn.sampleBitCounts(r));return a!==-1?a:Nn.getClosestDecodedValue(r)}static sampleBitCounts(r){let a=Qe.sum(r),l=new Int32Array(Je.BARS_IN_MODULE),h=0,f=0;for(let m=0;m<Je.MODULES_IN_CODEWORD;m++){let x=a/(2*Je.MODULES_IN_CODEWORD)+m*a/Je.MODULES_IN_CODEWORD;f+r[h]<=x&&(f+=r[h],h++),l[h]++}return l}static getDecodedCodewordValue(r){let a=Nn.getBitValue(r);return Je.getCodeword(a)===-1?-1:a}static getBitValue(r){let a=0;for(let l=0;l<r.length;l++)for(let h=0;h<r[l];h++)a=a<<1|(l%2===0?1:0);return Math.trunc(a)}static getClosestDecodedValue(r){let a=Qe.sum(r),l=new Array(Je.BARS_IN_MODULE);if(a>1)for(let m=0;m<l.length;m++)l[m]=Math.fround(r[m]/a);let h=En.MAX_VALUE,f=-1;this.bSymbolTableReady||Nn.initialize();for(let m=0;m<Nn.RATIOS_TABLE.length;m++){let x=0,A=Nn.RATIOS_TABLE[m];for(let T=0;T<Je.BARS_IN_MODULE;T++){let R=Math.fround(A[T]-l[T]);if(x+=Math.fround(R*R),x>=h)break}x<h&&(h=x,f=Je.SYMBOL_TABLE[m])}return f}}Nn.bSymbolTableReady=!1,Nn.RATIOS_TABLE=new Array(Je.SYMBOL_TABLE.length).map(M=>new Array(Je.BARS_IN_MODULE));class _s{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(r){this.segmentIndex=r}getFileId(){return this.fileId}setFileId(r){this.fileId=r}getOptionalData(){return this.optionalData}setOptionalData(r){this.optionalData=r}isLastSegment(){return this.lastSegment}setLastSegment(r){this.lastSegment=r}getSegmentCount(){return this.segmentCount}setSegmentCount(r){this.segmentCount=r}getSender(){return this.sender||null}setSender(r){this.sender=r}getAddressee(){return this.addressee||null}setAddressee(r){this.addressee=r}getFileName(){return this.fileName}setFileName(r){this.fileName=r}getFileSize(){return this.fileSize}setFileSize(r){this.fileSize=r}getChecksum(){return this.checksum}setChecksum(r){this.checksum=r}getTimestamp(){return this.timestamp}setTimestamp(r){this.timestamp=r}}class Ra{static parseLong(r,a=void 0){return parseInt(r,a)}}class As extends _{}As.kind="NullPointerException";class Oa{writeBytes(r){this.writeBytesOffset(r,0,r.length)}writeBytesOffset(r,a,l){if(r==null)throw new As;if(a<0||a>r.length||l<0||a+l>r.length||a+l<0)throw new Y;if(l===0)return;for(let h=0;h<l;h++)this.write(r[a+h])}flush(){}close(){}}class Qr extends _{}class Da extends Oa{constructor(r=32){if(super(),this.count=0,r<0)throw new I("Negative initial size: "+r);this.buf=new Uint8Array(r)}ensureCapacity(r){r-this.buf.length>0&&this.grow(r)}grow(r){let l=this.buf.length<<1;if(l-r<0&&(l=r),l<0){if(r<0)throw new Qr;l=$.MAX_VALUE}this.buf=me.copyOfUint8Array(this.buf,l)}write(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1}writeBytesOffset(r,a,l){if(a<0||a>r.length||l<0||a+l-r.length>0)throw new Y;this.ensureCapacity(this.count+l),K.arraycopy(r,a,this.buf,this.count,l),this.count+=l}writeTo(r){r.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return me.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(r){return new String(this.buf).toString()}toString_number(r){return new String(this.buf).toString()}close(){}}var Qt;(function(M){M[M.ALPHA=0]="ALPHA",M[M.LOWER=1]="LOWER",M[M.MIXED=2]="MIXED",M[M.PUNCT=3]="PUNCT",M[M.ALPHA_SHIFT=4]="ALPHA_SHIFT",M[M.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Qt||(Qt={}));function Ds(){if(typeof window<"u")return window.BigInt||null;if(typeof Ih<"u")return Ih.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Ks;function Pr(M){if(typeof Ks>"u"&&(Ks=Ds()),Ks===null)throw new Error("BigInt is not supported!");return Ks(M)}function Ws(){let M=[];M[0]=Pr(1);let r=Pr(900);M[1]=r;for(let a=2;a<16;a++)M[a]=M[a-1]*r;return M}class xe{static decode(r,a){let l=new X(""),h=V.ISO8859_1;l.enableDecoding(h);let f=1,m=r[f++],x=new _s;for(;f<r[0];){switch(m){case xe.TEXT_COMPACTION_MODE_LATCH:f=xe.textCompaction(r,f,l);break;case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:f=xe.byteCompaction(m,r,h,f,l);break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(r[f++]);break;case xe.NUMERIC_COMPACTION_MODE_LATCH:f=xe.numericCompaction(r,f,l);break;case xe.ECI_CHARSET:V.getCharacterSetECIByValue(r[f++]);break;case xe.ECI_GENERAL_PURPOSE:f+=2;break;case xe.ECI_USER_DEFINED:f++;break;case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:f=xe.decodeMacroBlock(r,f,x);break;case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:throw new j;default:f--,f=xe.textCompaction(r,f,l);break}if(f<r.length)m=r[f++];else throw j.getFormatInstance()}if(l.length()===0)throw j.getFormatInstance();let A=new Kt(null,l.toString(),null,a);return A.setOther(x),A}static decodeMacroBlock(r,a,l){if(a+xe.NUMBER_OF_SEQUENCE_CODEWORDS>r[0])throw j.getFormatInstance();let h=new Int32Array(xe.NUMBER_OF_SEQUENCE_CODEWORDS);for(let x=0;x<xe.NUMBER_OF_SEQUENCE_CODEWORDS;x++,a++)h[x]=r[a];l.setSegmentIndex($.parseInt(xe.decodeBase900toBase10(h,xe.NUMBER_OF_SEQUENCE_CODEWORDS)));let f=new X;a=xe.textCompaction(r,a,f),l.setFileId(f.toString());let m=-1;for(r[a]===xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(m=a+1);a<r[0];)switch(r[a]){case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(a++,r[a]){case xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let x=new X;a=xe.textCompaction(r,a+1,x),l.setFileName(x.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let A=new X;a=xe.textCompaction(r,a+1,A),l.setSender(A.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let T=new X;a=xe.textCompaction(r,a+1,T),l.setAddressee(T.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let R=new X;a=xe.numericCompaction(r,a+1,R),l.setSegmentCount($.parseInt(R.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let P=new X;a=xe.numericCompaction(r,a+1,P),l.setTimestamp(Ra.parseLong(P.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let k=new X;a=xe.numericCompaction(r,a+1,k),l.setChecksum($.parseInt(k.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let G=new X;a=xe.numericCompaction(r,a+1,G),l.setFileSize(Ra.parseLong(G.toString()));break;default:throw j.getFormatInstance()}break;case xe.MACRO_PDF417_TERMINATOR:a++,l.setLastSegment(!0);break;default:throw j.getFormatInstance()}if(m!==-1){let x=a-m;l.isLastSegment()&&x--,l.setOptionalData(me.copyOfRange(r,m,m+x))}return a}static textCompaction(r,a,l){let h=new Int32Array((r[0]-a)*2),f=new Int32Array((r[0]-a)*2),m=0,x=!1;for(;a<r[0]&&!x;){let A=r[a++];if(A<xe.TEXT_COMPACTION_MODE_LATCH)h[m]=A/30,h[m+1]=A%30,m+=2;else switch(A){case xe.TEXT_COMPACTION_MODE_LATCH:h[m++]=xe.TEXT_COMPACTION_MODE_LATCH;break;case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:a--,x=!0;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h[m]=xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,A=r[a++],f[m]=A,m++;break}}return xe.decodeTextCompaction(h,f,m,l),a}static decodeTextCompaction(r,a,l,h){let f=Qt.ALPHA,m=Qt.ALPHA,x=0;for(;x<l;){let A=r[x],T="";switch(f){case Qt.ALPHA:if(A<26)T=String.fromCharCode(65+A);else switch(A){case 26:T=" ";break;case xe.LL:f=Qt.LOWER;break;case xe.ML:f=Qt.MIXED;break;case xe.PS:m=f,f=Qt.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(a[x]);break;case xe.TEXT_COMPACTION_MODE_LATCH:f=Qt.ALPHA;break}break;case Qt.LOWER:if(A<26)T=String.fromCharCode(97+A);else switch(A){case 26:T=" ";break;case xe.AS:m=f,f=Qt.ALPHA_SHIFT;break;case xe.ML:f=Qt.MIXED;break;case xe.PS:m=f,f=Qt.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(a[x]);break;case xe.TEXT_COMPACTION_MODE_LATCH:f=Qt.ALPHA;break}break;case Qt.MIXED:if(A<xe.PL)T=xe.MIXED_CHARS[A];else switch(A){case xe.PL:f=Qt.PUNCT;break;case 26:T=" ";break;case xe.LL:f=Qt.LOWER;break;case xe.AL:f=Qt.ALPHA;break;case xe.PS:m=f,f=Qt.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(a[x]);break;case xe.TEXT_COMPACTION_MODE_LATCH:f=Qt.ALPHA;break}break;case Qt.PUNCT:if(A<xe.PAL)T=xe.PUNCT_CHARS[A];else switch(A){case xe.PAL:f=Qt.ALPHA;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(a[x]);break;case xe.TEXT_COMPACTION_MODE_LATCH:f=Qt.ALPHA;break}break;case Qt.ALPHA_SHIFT:if(f=m,A<26)T=String.fromCharCode(65+A);else switch(A){case 26:T=" ";break;case xe.TEXT_COMPACTION_MODE_LATCH:f=Qt.ALPHA;break}break;case Qt.PUNCT_SHIFT:if(f=m,A<xe.PAL)T=xe.PUNCT_CHARS[A];else switch(A){case xe.PAL:f=Qt.ALPHA;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(a[x]);break;case xe.TEXT_COMPACTION_MODE_LATCH:f=Qt.ALPHA;break}break}T!==""&&h.append(T),x++}}static byteCompaction(r,a,l,h,f){let m=new Da,x=0,A=0,T=!1;switch(r){case xe.BYTE_COMPACTION_MODE_LATCH:let R=new Int32Array(6),P=a[h++];for(;h<a[0]&&!T;)switch(R[x++]=P,A=900*A+P,P=a[h++],P){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:h--,T=!0;break;default:if(x%5===0&&x>0){for(let k=0;k<6;++k)m.write(Number(Pr(A)>>Pr(8*(5-k))));A=0,x=0}break}h===a[0]&&P<xe.TEXT_COMPACTION_MODE_LATCH&&(R[x++]=P);for(let k=0;k<x;k++)m.write(R[k]);break;case xe.BYTE_COMPACTION_MODE_LATCH_6:for(;h<a[0]&&!T;){let k=a[h++];if(k<xe.TEXT_COMPACTION_MODE_LATCH)x++,A=900*A+k;else switch(k){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:h--,T=!0;break}if(x%5===0&&x>0){for(let G=0;G<6;++G)m.write(Number(Pr(A)>>Pr(8*(5-G))));A=0,x=0}}break}return f.append(W.decode(m.toByteArray(),l)),h}static numericCompaction(r,a,l){let h=0,f=!1,m=new Int32Array(xe.MAX_NUMERIC_CODEWORDS);for(;a<r[0]&&!f;){let x=r[a++];if(a===r[0]&&(f=!0),x<xe.TEXT_COMPACTION_MODE_LATCH)m[h]=x,h++;else switch(x){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:a--,f=!0;break}(h%xe.MAX_NUMERIC_CODEWORDS===0||x===xe.NUMERIC_COMPACTION_MODE_LATCH||f)&&h>0&&(l.append(xe.decodeBase900toBase10(m,h)),h=0)}return a}static decodeBase900toBase10(r,a){let l=Pr(0);for(let f=0;f<a;f++)l+=xe.EXP900[a-f-1]*Pr(r[f]);let h=l.toString();if(h.charAt(0)!=="1")throw new j;return h.substring(1)}}xe.TEXT_COMPACTION_MODE_LATCH=900,xe.BYTE_COMPACTION_MODE_LATCH=901,xe.NUMERIC_COMPACTION_MODE_LATCH=902,xe.BYTE_COMPACTION_MODE_LATCH_6=924,xe.ECI_USER_DEFINED=925,xe.ECI_GENERAL_PURPOSE=926,xe.ECI_CHARSET=927,xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,xe.MACRO_PDF417_TERMINATOR=922,xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,xe.MAX_NUMERIC_CODEWORDS=15,xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,xe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,xe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,xe.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,xe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,xe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,xe.PL=25,xe.LL=27,xe.AS=27,xe.ML=28,xe.AL=28,xe.PS=29,xe.PAL=29,xe.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,xe.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",xe.EXP900=Ds()?Ws():[],xe.NUMBER_OF_SEQUENCE_CODEWORDS=2;class mt{constructor(){}static decode(r,a,l,h,f,m,x){let A=new Mr(r,a,l,h,f),T=null,R=null,P;for(let J=!0;;J=!1){if(a!=null&&(T=mt.getRowIndicatorColumn(r,A,a,!0,m,x)),h!=null&&(R=mt.getRowIndicatorColumn(r,A,h,!1,m,x)),P=mt.merge(T,R),P==null)throw he.getNotFoundInstance();let te=P.getBoundingBox();if(J&&te!=null&&(te.getMinY()<A.getMinY()||te.getMaxY()>A.getMaxY()))A=te;else break}P.setBoundingBox(A);let k=P.getBarcodeColumnCount()+1;P.setDetectionResultColumn(0,T),P.setDetectionResultColumn(k,R);let G=T!=null;for(let J=1;J<=k;J++){let te=G?J:k-J;if(P.getDetectionResultColumn(te)!==void 0)continue;let ce;te===0||te===k?ce=new _r(A,te===0):ce=new Lr(A),P.setDetectionResultColumn(te,ce);let ye=-1,Pe=ye;for(let Me=A.getMinY();Me<=A.getMaxY();Me++){if(ye=mt.getStartColumn(P,te,Me,G),ye<0||ye>A.getMaxX()){if(Pe===-1)continue;ye=Pe}let Re=mt.detectCodeword(r,A.getMinX(),A.getMaxX(),G,ye,Me,m,x);Re!=null&&(ce.setCodeword(Me,Re),Pe=ye,m=Math.min(m,Re.getWidth()),x=Math.max(x,Re.getWidth()))}}return mt.createDecoderResult(P)}static merge(r,a){if(r==null&&a==null)return null;let l=mt.getBarcodeMetadata(r,a);if(l==null)return null;let h=Mr.merge(mt.adjustBoundingBox(r),mt.adjustBoundingBox(a));return new Yn(l,h)}static adjustBoundingBox(r){if(r==null)return null;let a=r.getRowHeights();if(a==null)return null;let l=mt.getMax(a),h=0;for(let x of a)if(h+=l-x,x>0)break;let f=r.getCodewords();for(let x=0;h>0&&f[x]==null;x++)h--;let m=0;for(let x=a.length-1;x>=0&&(m+=l-a[x],!(a[x]>0));x--);for(let x=f.length-1;m>0&&f[x]==null;x--)m--;return r.getBoundingBox().addMissingRows(h,m,r.isLeft())}static getMax(r){let a=-1;for(let l of r)a=Math.max(a,l);return a}static getBarcodeMetadata(r,a){let l;if(r==null||(l=r.getBarcodeMetadata())==null)return a==null?null:a.getBarcodeMetadata();let h;return a==null||(h=a.getBarcodeMetadata())==null?l:l.getColumnCount()!==h.getColumnCount()&&l.getErrorCorrectionLevel()!==h.getErrorCorrectionLevel()&&l.getRowCount()!==h.getRowCount()?null:l}static getRowIndicatorColumn(r,a,l,h,f,m){let x=new _r(a,h);for(let A=0;A<2;A++){let T=A===0?1:-1,R=Math.trunc(Math.trunc(l.getX()));for(let P=Math.trunc(Math.trunc(l.getY()));P<=a.getMaxY()&&P>=a.getMinY();P+=T){let k=mt.detectCodeword(r,0,r.getWidth(),h,R,P,f,m);k!=null&&(x.setCodeword(P,k),h?R=k.getStartX():R=k.getEndX())}}return x}static adjustCodewordCount(r,a){let l=a[0][1],h=l.getValue(),f=r.getBarcodeColumnCount()*r.getBarcodeRowCount()-mt.getNumberOfECCodeWords(r.getBarcodeECLevel());if(h.length===0){if(f<1||f>Je.MAX_CODEWORDS_IN_BARCODE)throw he.getNotFoundInstance();l.setValue(f)}else h[0]!==f&&l.setValue(f)}static createDecoderResult(r){let a=mt.createBarcodeMatrix(r);mt.adjustCodewordCount(r,a);let l=new Array,h=new Int32Array(r.getBarcodeRowCount()*r.getBarcodeColumnCount()),f=[],m=new Array;for(let A=0;A<r.getBarcodeRowCount();A++)for(let T=0;T<r.getBarcodeColumnCount();T++){let R=a[A][T+1].getValue(),P=A*r.getBarcodeColumnCount()+T;R.length===0?l.push(P):R.length===1?h[P]=R[0]:(m.push(P),f.push(R))}let x=new Array(f.length);for(let A=0;A<x.length;A++)x[A]=f[A];return mt.createDecoderResultFromAmbiguousValues(r.getBarcodeECLevel(),h,Je.toIntArray(l),Je.toIntArray(m),x)}static createDecoderResultFromAmbiguousValues(r,a,l,h,f){let m=new Int32Array(h.length),x=100;for(;x-- >0;){for(let A=0;A<m.length;A++)a[h[A]]=f[A][m[A]];try{return mt.decodeCodewords(a,r,l)}catch(A){if(!(A instanceof B))throw A}if(m.length===0)throw B.getChecksumInstance();for(let A=0;A<m.length;A++)if(m[A]<f[A].length-1){m[A]++;break}else if(m[A]=0,A===m.length-1)throw B.getChecksumInstance()}throw B.getChecksumInstance()}static createBarcodeMatrix(r){let a=Array.from({length:r.getBarcodeRowCount()},()=>new Array(r.getBarcodeColumnCount()+2));for(let h=0;h<a.length;h++)for(let f=0;f<a[h].length;f++)a[h][f]=new ar;let l=0;for(let h of r.getDetectionResultColumns()){if(h!=null){for(let f of h.getCodewords())if(f!=null){let m=f.getRowNumber();if(m>=0){if(m>=a.length)continue;a[m][l].setValue(f.getValue())}}}l++}return a}static isValidBarcodeColumn(r,a){return a>=0&&a<=r.getBarcodeColumnCount()+1}static getStartColumn(r,a,l,h){let f=h?1:-1,m=null;if(mt.isValidBarcodeColumn(r,a-f)&&(m=r.getDetectionResultColumn(a-f).getCodeword(l)),m!=null)return h?m.getEndX():m.getStartX();if(m=r.getDetectionResultColumn(a).getCodewordNearby(l),m!=null)return h?m.getStartX():m.getEndX();if(mt.isValidBarcodeColumn(r,a-f)&&(m=r.getDetectionResultColumn(a-f).getCodewordNearby(l)),m!=null)return h?m.getEndX():m.getStartX();let x=0;for(;mt.isValidBarcodeColumn(r,a-f);){a-=f;for(let A of r.getDetectionResultColumn(a).getCodewords())if(A!=null)return(h?A.getEndX():A.getStartX())+f*x*(A.getEndX()-A.getStartX());x++}return h?r.getBoundingBox().getMinX():r.getBoundingBox().getMaxX()}static detectCodeword(r,a,l,h,f,m,x,A){f=mt.adjustCodewordStartColumn(r,a,l,h,f,m);let T=mt.getModuleBitCount(r,a,l,h,f,m);if(T==null)return null;let R,P=Qe.sum(T);if(h)R=f+P;else{for(let J=0;J<T.length/2;J++){let te=T[J];T[J]=T[T.length-1-J],T[T.length-1-J]=te}R=f,f=R-P}if(!mt.checkCodewordSkew(P,x,A))return null;let k=Nn.getDecodedValue(T),G=Je.getCodeword(k);return G===-1?null:new or(f,R,mt.getCodewordBucketNumber(k),G)}static getModuleBitCount(r,a,l,h,f,m){let x=f,A=new Int32Array(8),T=0,R=h?1:-1,P=h;for(;(h?x<l:x>=a)&&T<A.length;)r.get(x,m)===P?(A[T]++,x+=R):(T++,P=!P);return T===A.length||x===(h?l:a)&&T===A.length-1?A:null}static getNumberOfECCodeWords(r){return 2<<r}static adjustCodewordStartColumn(r,a,l,h,f,m){let x=f,A=h?-1:1;for(let T=0;T<2;T++){for(;(h?x>=a:x<l)&&h===r.get(x,m);){if(Math.abs(f-x)>mt.CODEWORD_SKEW_SIZE)return f;x+=A}A=-A,h=!h}return x}static checkCodewordSkew(r,a,l){return a-mt.CODEWORD_SKEW_SIZE<=r&&r<=l+mt.CODEWORD_SKEW_SIZE}static decodeCodewords(r,a,l){if(r.length===0)throw j.getFormatInstance();let h=1<<a+1,f=mt.correctErrors(r,l,h);mt.verifyCodewordCount(r,h);let m=xe.decode(r,""+a);return m.setErrorsCorrected(f),m.setErasures(l.length),m}static correctErrors(r,a,l){if(a!=null&&a.length>l/2+mt.MAX_ERRORS||l<0||l>mt.MAX_EC_CODEWORDS)throw B.getChecksumInstance();return mt.errorCorrection.decode(r,l,a)}static verifyCodewordCount(r,a){if(r.length<4)throw j.getFormatInstance();let l=r[0];if(l>r.length)throw j.getFormatInstance();if(l===0)if(a<r.length)r[0]=r.length-a;else throw j.getFormatInstance()}static getBitCountForCodeword(r){let a=new Int32Array(8),l=0,h=a.length-1;for(;!((r&1)!==l&&(l=r&1,h--,h<0));)a[h]++,r>>=1;return a}static getCodewordBucketNumber(r){return r instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(r):this.getCodewordBucketNumber_number(r)}static getCodewordBucketNumber_number(r){return mt.getCodewordBucketNumber(mt.getBitCountForCodeword(r))}static getCodewordBucketNumber_Int32Array(r){return(r[0]-r[2]+r[4]-r[6]+9)%9}static toString(r){let a=new Es;for(let l=0;l<r.length;l++){a.format("Row %2d: ",l);for(let h=0;h<r[l].length;h++){let f=r[l][h];f.getValue().length===0?a.format("        ",null):a.format("%4d(%2d)",f.getValue()[0],f.getConfidence(f.getValue()[0]))}a.format("%n")}return a.toString()}}mt.CODEWORD_SKEW_SIZE=2,mt.MAX_ERRORS=3,mt.MAX_EC_CODEWORDS=512,mt.errorCorrection=new Dr;class kn{decode(r,a=null){let l=kn.decode(r,a,!1);if(l==null||l.length===0||l[0]==null)throw he.getNotFoundInstance();return l[0]}decodeMultiple(r,a=null){try{return kn.decode(r,a,!0)}catch(l){throw l instanceof j||l instanceof B?he.getNotFoundInstance():l}}static decode(r,a,l){const h=new Array,f=it.detectMultiple(r,a,l);for(const m of f.getPoints()){const x=mt.decode(f.getBits(),m[4],m[5],m[6],m[7],kn.getMinCodewordWidth(m),kn.getMaxCodewordWidth(m)),A=new Ve(x.getText(),x.getRawBytes(),void 0,m,Le.PDF_417);A.putMetadata(yt.ERROR_CORRECTION_LEVEL,x.getECLevel());const T=x.getOther();T!=null&&A.putMetadata(yt.PDF417_EXTRA_METADATA,T),h.push(A)}return h.map(m=>m)}static getMaxWidth(r,a){return r==null||a==null?0:Math.trunc(Math.abs(r.getX()-a.getX()))}static getMinWidth(r,a){return r==null||a==null?$.MAX_VALUE:Math.trunc(Math.abs(r.getX()-a.getX()))}static getMaxCodewordWidth(r){return Math.floor(Math.max(Math.max(kn.getMaxWidth(r[0],r[4]),kn.getMaxWidth(r[6],r[2])*Je.MODULES_IN_CODEWORD/Je.MODULES_IN_STOP_PATTERN),Math.max(kn.getMaxWidth(r[1],r[5]),kn.getMaxWidth(r[7],r[3])*Je.MODULES_IN_CODEWORD/Je.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(r){return Math.floor(Math.min(Math.min(kn.getMinWidth(r[0],r[4]),kn.getMinWidth(r[6],r[2])*Je.MODULES_IN_CODEWORD/Je.MODULES_IN_STOP_PATTERN),Math.min(kn.getMinWidth(r[1],r[5]),kn.getMinWidth(r[7],r[3])*Je.MODULES_IN_CODEWORD/Je.MODULES_IN_STOP_PATTERN)))}reset(){}}class Qs extends _{}Qs.kind="ReaderException";class vo{constructor(r,a){this.verbose=r===!0,a&&this.setHints(a)}decode(r,a){return a&&this.setHints(a),this.decodeInternal(r)}decodeWithState(r){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(r)}setHints(r){this.hints=r;const a=!o(r)&&r.get(De.TRY_HARDER)===!0,l=o(r)?null:r.get(De.POSSIBLE_FORMATS),h=new Array;if(!o(l)){const f=l.some(m=>m===Le.UPC_A||m===Le.UPC_E||m===Le.EAN_13||m===Le.EAN_8||m===Le.CODABAR||m===Le.CODE_39||m===Le.CODE_93||m===Le.CODE_128||m===Le.ITF||m===Le.RSS_14||m===Le.RSS_EXPANDED);f&&!a&&h.push(new Ri(r,this.verbose)),l.includes(Le.QR_CODE)&&h.push(new Qi),l.includes(Le.DATA_MATRIX)&&h.push(new Yi),l.includes(Le.AZTEC)&&h.push(new Yr),l.includes(Le.PDF_417)&&h.push(new kn),f&&a&&h.push(new Ri(r,this.verbose))}h.length===0&&(a||h.push(new Ri(r,this.verbose)),h.push(new Qi),h.push(new Yi),h.push(new Yr),h.push(new kn),a&&h.push(new Ri(r,this.verbose))),this.readers=h}reset(){if(this.readers!==null)for(const r of this.readers)r.reset()}decodeInternal(r){if(this.readers===null)throw new Qs("No readers where selected, nothing can be read.");for(const a of this.readers)try{return a.decode(r,this.hints)}catch(l){if(l instanceof Qs)continue}throw new he("No MultiFormat Readers were able to detect the code.")}}class Zr extends ke{constructor(r=null,a=500){const l=new vo;l.setHints(r),super(l,a)}decodeBitmap(r){return this.reader.decodeWithState(r)}}class rl extends ke{constructor(r=500){super(new kn,r)}}class sl extends ke{constructor(r=500){super(new Qi,r)}}var Ma;(function(M){M[M.ERROR_CORRECTION=0]="ERROR_CORRECTION",M[M.CHARACTER_SET=1]="CHARACTER_SET",M[M.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",M[M.MIN_SIZE=3]="MIN_SIZE",M[M.MAX_SIZE=4]="MAX_SIZE",M[M.MARGIN=5]="MARGIN",M[M.PDF417_COMPACT=6]="PDF417_COMPACT",M[M.PDF417_COMPACTION=7]="PDF417_COMPACTION",M[M.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",M[M.AZTEC_LAYERS=9]="AZTEC_LAYERS",M[M.QR_VERSION=10]="QR_VERSION"})(Ma||(Ma={}));var Un=Ma;class Jr{constructor(r){this.field=r,this.cachedGenerators=[],this.cachedGenerators.push(new bn(r,Int32Array.from([1])))}buildGenerator(r){const a=this.cachedGenerators;if(r>=a.length){let l=a[a.length-1];const h=this.field;for(let f=a.length;f<=r;f++){const m=l.multiply(new bn(h,Int32Array.from([1,h.exp(f-1+h.getGeneratorBase())])));a.push(m),l=m}}return a[r]}encode(r,a){if(a===0)throw new I("No error correction bytes");const l=r.length-a;if(l<=0)throw new I("No data bytes provided");const h=this.buildGenerator(a),f=new Int32Array(l);K.arraycopy(r,0,f,0,l);let m=new bn(this.field,f);m=m.multiplyByMonomial(a,1);const A=m.divide(h)[1].getCoefficients(),T=a-A.length;for(let R=0;R<T;R++)r[l+R]=0;K.arraycopy(A,0,r,l+T,A.length)}}class Rt{constructor(){}static applyMaskPenaltyRule1(r){return Rt.applyMaskPenaltyRule1Internal(r,!0)+Rt.applyMaskPenaltyRule1Internal(r,!1)}static applyMaskPenaltyRule2(r){let a=0;const l=r.getArray(),h=r.getWidth(),f=r.getHeight();for(let m=0;m<f-1;m++){const x=l[m];for(let A=0;A<h-1;A++){const T=x[A];T===x[A+1]&&T===l[m+1][A]&&T===l[m+1][A+1]&&a++}}return Rt.N2*a}static applyMaskPenaltyRule3(r){let a=0;const l=r.getArray(),h=r.getWidth(),f=r.getHeight();for(let m=0;m<f;m++)for(let x=0;x<h;x++){const A=l[m];x+6<h&&A[x]===1&&A[x+1]===0&&A[x+2]===1&&A[x+3]===1&&A[x+4]===1&&A[x+5]===0&&A[x+6]===1&&(Rt.isWhiteHorizontal(A,x-4,x)||Rt.isWhiteHorizontal(A,x+7,x+11))&&a++,m+6<f&&l[m][x]===1&&l[m+1][x]===0&&l[m+2][x]===1&&l[m+3][x]===1&&l[m+4][x]===1&&l[m+5][x]===0&&l[m+6][x]===1&&(Rt.isWhiteVertical(l,x,m-4,m)||Rt.isWhiteVertical(l,x,m+7,m+11))&&a++}return a*Rt.N3}static isWhiteHorizontal(r,a,l){a=Math.max(a,0),l=Math.min(l,r.length);for(let h=a;h<l;h++)if(r[h]===1)return!1;return!0}static isWhiteVertical(r,a,l,h){l=Math.max(l,0),h=Math.min(h,r.length);for(let f=l;f<h;f++)if(r[f][a]===1)return!1;return!0}static applyMaskPenaltyRule4(r){let a=0;const l=r.getArray(),h=r.getWidth(),f=r.getHeight();for(let A=0;A<f;A++){const T=l[A];for(let R=0;R<h;R++)T[R]===1&&a++}const m=r.getHeight()*r.getWidth();return Math.floor(Math.abs(a*2-m)*10/m)*Rt.N4}static getDataMaskBit(r,a,l){let h,f;switch(r){case 0:h=l+a&1;break;case 1:h=l&1;break;case 2:h=a%3;break;case 3:h=(l+a)%3;break;case 4:h=Math.floor(l/2)+Math.floor(a/3)&1;break;case 5:f=l*a,h=(f&1)+f%3;break;case 6:f=l*a,h=(f&1)+f%3&1;break;case 7:f=l*a,h=f%3+(l+a&1)&1;break;default:throw new I("Invalid mask pattern: "+r)}return h===0}static applyMaskPenaltyRule1Internal(r,a){let l=0;const h=a?r.getHeight():r.getWidth(),f=a?r.getWidth():r.getHeight(),m=r.getArray();for(let x=0;x<h;x++){let A=0,T=-1;for(let R=0;R<f;R++){const P=a?m[x][R]:m[R][x];P===T?A++:(A>=5&&(l+=Rt.N1+(A-5)),A=1,T=P)}A>=5&&(l+=Rt.N1+(A-5))}return l}}Rt.N1=3,Rt.N2=3,Rt.N3=40,Rt.N4=10;class Zs{constructor(r,a){this.width=r,this.height=a;const l=new Array(a);for(let h=0;h!==a;h++)l[h]=new Uint8Array(r);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(r,a){return this.bytes[a][r]}getArray(){return this.bytes}setNumber(r,a,l){this.bytes[a][r]=l}setBoolean(r,a,l){this.bytes[a][r]=l?1:0}clear(r){for(const a of this.bytes)me.fill(a,r)}equals(r){if(!(r instanceof Zs))return!1;const a=r;if(this.width!==a.width||this.height!==a.height)return!1;for(let l=0,h=this.height;l<h;++l){const f=this.bytes[l],m=a.bytes[l];for(let x=0,A=this.width;x<A;++x)if(f[x]!==m[x])return!1}return!0}toString(){const r=new X;for(let a=0,l=this.height;a<l;++a){const h=this.bytes[a];for(let f=0,m=this.width;f<m;++f)switch(h[f]){case 0:r.append(" 0");break;case 1:r.append(" 1");break;default:r.append("  ");break}r.append(`
`)}return r.toString()}}class $r{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const r=new X;return r.append(`<<
`),r.append(" mode: "),r.append(this.mode?this.mode.toString():"null"),r.append(`
 ecLevel: `),r.append(this.ecLevel?this.ecLevel.toString():"null"),r.append(`
 version: `),r.append(this.version?this.version.toString():"null"),r.append(`
 maskPattern: `),r.append(this.maskPattern.toString()),this.matrix?(r.append(`
 matrix:
`),r.append(this.matrix.toString())):r.append(`
 matrix: null
`),r.append(`>>
`),r.toString()}setMode(r){this.mode=r}setECLevel(r){this.ecLevel=r}setVersion(r){this.version=r}setMaskPattern(r){this.maskPattern=r}setMatrix(r){this.matrix=r}static isValidMaskPattern(r){return r>=0&&r<$r.NUM_MASK_PATTERNS}}$r.NUM_MASK_PATTERNS=8;class Mt extends _{}Mt.kind="WriterException";class p{constructor(){}static clearMatrix(r){r.clear(255)}static buildMatrix(r,a,l,h,f){p.clearMatrix(f),p.embedBasicPatterns(l,f),p.embedTypeInfo(a,h,f),p.maybeEmbedVersionInfo(l,f),p.embedDataBits(r,h,f)}static embedBasicPatterns(r,a){p.embedPositionDetectionPatternsAndSeparators(a),p.embedDarkDotAtLeftBottomCorner(a),p.maybeEmbedPositionAdjustmentPatterns(r,a),p.embedTimingPatterns(a)}static embedTypeInfo(r,a,l){const h=new _e;p.makeTypeInfoBits(r,a,h);for(let f=0,m=h.getSize();f<m;++f){const x=h.get(h.getSize()-1-f),A=p.TYPE_INFO_COORDINATES[f],T=A[0],R=A[1];if(l.setBoolean(T,R,x),f<8){const P=l.getWidth()-f-1;l.setBoolean(P,8,x)}else{const k=l.getHeight()-7+(f-8);l.setBoolean(8,k,x)}}}static maybeEmbedVersionInfo(r,a){if(r.getVersionNumber()<7)return;const l=new _e;p.makeVersionInfoBits(r,l);let h=17;for(let f=0;f<6;++f)for(let m=0;m<3;++m){const x=l.get(h);h--,a.setBoolean(f,a.getHeight()-11+m,x),a.setBoolean(a.getHeight()-11+m,f,x)}}static embedDataBits(r,a,l){let h=0,f=-1,m=l.getWidth()-1,x=l.getHeight()-1;for(;m>0;){for(m===6&&(m-=1);x>=0&&x<l.getHeight();){for(let A=0;A<2;++A){const T=m-A;if(!p.isEmpty(l.get(T,x)))continue;let R;h<r.getSize()?(R=r.get(h),++h):R=!1,a!==255&&Rt.getDataMaskBit(a,T,x)&&(R=!R),l.setBoolean(T,x,R)}x+=f}f=-f,x+=f,m-=2}if(h!==r.getSize())throw new Mt("Not all bits consumed: "+h+"/"+r.getSize())}static findMSBSet(r){return 32-$.numberOfLeadingZeros(r)}static calculateBCHCode(r,a){if(a===0)throw new I("0 polynomial");const l=p.findMSBSet(a);for(r<<=l-1;p.findMSBSet(r)>=l;)r^=a<<p.findMSBSet(r)-l;return r}static makeTypeInfoBits(r,a,l){if(!$r.isValidMaskPattern(a))throw new Mt("Invalid mask pattern");const h=r.getBits()<<3|a;l.appendBits(h,5);const f=p.calculateBCHCode(h,p.TYPE_INFO_POLY);l.appendBits(f,10);const m=new _e;if(m.appendBits(p.TYPE_INFO_MASK_PATTERN,15),l.xor(m),l.getSize()!==15)throw new Mt("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(r,a){a.appendBits(r.getVersionNumber(),6);const l=p.calculateBCHCode(r.getVersionNumber(),p.VERSION_INFO_POLY);if(a.appendBits(l,12),a.getSize()!==18)throw new Mt("should not happen but we got: "+a.getSize())}static isEmpty(r){return r===255}static embedTimingPatterns(r){for(let a=8;a<r.getWidth()-8;++a){const l=(a+1)%2;p.isEmpty(r.get(a,6))&&r.setNumber(a,6,l),p.isEmpty(r.get(6,a))&&r.setNumber(6,a,l)}}static embedDarkDotAtLeftBottomCorner(r){if(r.get(8,r.getHeight()-8)===0)throw new Mt;r.setNumber(8,r.getHeight()-8,1)}static embedHorizontalSeparationPattern(r,a,l){for(let h=0;h<8;++h){if(!p.isEmpty(l.get(r+h,a)))throw new Mt;l.setNumber(r+h,a,0)}}static embedVerticalSeparationPattern(r,a,l){for(let h=0;h<7;++h){if(!p.isEmpty(l.get(r,a+h)))throw new Mt;l.setNumber(r,a+h,0)}}static embedPositionAdjustmentPattern(r,a,l){for(let h=0;h<5;++h){const f=p.POSITION_ADJUSTMENT_PATTERN[h];for(let m=0;m<5;++m)l.setNumber(r+m,a+h,f[m])}}static embedPositionDetectionPattern(r,a,l){for(let h=0;h<7;++h){const f=p.POSITION_DETECTION_PATTERN[h];for(let m=0;m<7;++m)l.setNumber(r+m,a+h,f[m])}}static embedPositionDetectionPatternsAndSeparators(r){const a=p.POSITION_DETECTION_PATTERN[0].length;p.embedPositionDetectionPattern(0,0,r),p.embedPositionDetectionPattern(r.getWidth()-a,0,r),p.embedPositionDetectionPattern(0,r.getWidth()-a,r);const l=8;p.embedHorizontalSeparationPattern(0,l-1,r),p.embedHorizontalSeparationPattern(r.getWidth()-l,l-1,r),p.embedHorizontalSeparationPattern(0,r.getWidth()-l,r);const h=7;p.embedVerticalSeparationPattern(h,0,r),p.embedVerticalSeparationPattern(r.getHeight()-h-1,0,r),p.embedVerticalSeparationPattern(h,r.getHeight()-h,r)}static maybeEmbedPositionAdjustmentPatterns(r,a){if(r.getVersionNumber()<2)return;const l=r.getVersionNumber()-1,h=p.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let f=0,m=h.length;f!==m;f++){const x=h[f];if(x>=0)for(let A=0;A!==m;A++){const T=h[A];T>=0&&p.isEmpty(a.get(T,x))&&p.embedPositionAdjustmentPattern(T-2,x-2,a)}}}}p.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),p.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),p.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),p.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),p.VERSION_INFO_POLY=7973,p.TYPE_INFO_POLY=1335,p.TYPE_INFO_MASK_PATTERN=21522;class N{constructor(r,a){this.dataBytes=r,this.errorCorrectionBytes=a}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class D{constructor(){}static calculateMaskPenalty(r){return Rt.applyMaskPenaltyRule1(r)+Rt.applyMaskPenaltyRule2(r)+Rt.applyMaskPenaltyRule3(r)+Rt.applyMaskPenaltyRule4(r)}static encode(r,a,l=null){let h=D.DEFAULT_BYTE_MODE_ENCODING;const f=l!==null&&l.get(Un.CHARACTER_SET)!==void 0;f&&(h=l.get(Un.CHARACTER_SET).toString());const m=this.chooseMode(r,h),x=new _e;if(m===Ze.BYTE&&(f||D.DEFAULT_BYTE_MODE_ENCODING!==h)){const Me=V.getCharacterSetECIByName(h);Me!==void 0&&this.appendECI(Me,x)}this.appendModeInfo(m,x);const A=new _e;this.appendBytes(r,m,A,h);let T;if(l!==null&&l.get(Un.QR_VERSION)!==void 0){const Me=Number.parseInt(l.get(Un.QR_VERSION).toString(),10);T=Ye.getVersionForNumber(Me);const Re=this.calculateBitsNeeded(m,x,A,T);if(!this.willFit(Re,T,a))throw new Mt("Data too big for requested version")}else T=this.recommendVersion(a,m,x,A);const R=new _e;R.appendBitArray(x);const P=m===Ze.BYTE?A.getSizeInBytes():r.length;this.appendLengthInfo(P,T,m,R),R.appendBitArray(A);const k=T.getECBlocksForLevel(a),G=T.getTotalCodewords()-k.getTotalECCodewords();this.terminateBits(G,R);const J=this.interleaveWithECBytes(R,T.getTotalCodewords(),G,k.getNumBlocks()),te=new $r;te.setECLevel(a),te.setMode(m),te.setVersion(T);const ce=T.getDimensionForVersion(),ye=new Zs(ce,ce),Pe=this.chooseMaskPattern(J,a,T,ye);return te.setMaskPattern(Pe),p.buildMatrix(J,a,T,Pe,ye),te.setMatrix(ye),te}static recommendVersion(r,a,l,h){const f=this.calculateBitsNeeded(a,l,h,Ye.getVersionForNumber(1)),m=this.chooseVersion(f,r),x=this.calculateBitsNeeded(a,l,h,m);return this.chooseVersion(x,r)}static calculateBitsNeeded(r,a,l,h){return a.getSize()+r.getCharacterCountBits(h)+l.getSize()}static getAlphanumericCode(r){return r<D.ALPHANUMERIC_TABLE.length?D.ALPHANUMERIC_TABLE[r]:-1}static chooseMode(r,a=null){if(V.SJIS.getName()===a&&this.isOnlyDoubleByteKanji(r))return Ze.KANJI;let l=!1,h=!1;for(let f=0,m=r.length;f<m;++f){const x=r.charAt(f);if(D.isDigit(x))l=!0;else if(this.getAlphanumericCode(x.charCodeAt(0))!==-1)h=!0;else return Ze.BYTE}return h?Ze.ALPHANUMERIC:l?Ze.NUMERIC:Ze.BYTE}static isOnlyDoubleByteKanji(r){let a;try{a=W.encode(r,V.SJIS)}catch{return!1}const l=a.length;if(l%2!==0)return!1;for(let h=0;h<l;h+=2){const f=a[h]&255;if((f<129||f>159)&&(f<224||f>235))return!1}return!0}static chooseMaskPattern(r,a,l,h){let f=Number.MAX_SAFE_INTEGER,m=-1;for(let x=0;x<$r.NUM_MASK_PATTERNS;x++){p.buildMatrix(r,a,l,x,h);let A=this.calculateMaskPenalty(h);A<f&&(f=A,m=x)}return m}static chooseVersion(r,a){for(let l=1;l<=40;l++){const h=Ye.getVersionForNumber(l);if(D.willFit(r,h,a))return h}throw new Mt("Data too big")}static willFit(r,a,l){const h=a.getTotalCodewords(),m=a.getECBlocksForLevel(l).getTotalECCodewords(),x=h-m,A=(r+7)/8;return x>=A}static terminateBits(r,a){const l=r*8;if(a.getSize()>l)throw new Mt("data bits cannot fit in the QR Code"+a.getSize()+" > "+l);for(let m=0;m<4&&a.getSize()<l;++m)a.appendBit(!1);const h=a.getSize()&7;if(h>0)for(let m=h;m<8;m++)a.appendBit(!1);const f=r-a.getSizeInBytes();for(let m=0;m<f;++m)a.appendBits((m&1)===0?236:17,8);if(a.getSize()!==l)throw new Mt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(r,a,l,h,f,m){if(h>=l)throw new Mt("Block ID too large");const x=r%l,A=l-x,T=Math.floor(r/l),R=T+1,P=Math.floor(a/l),k=P+1,G=T-P,J=R-k;if(G!==J)throw new Mt("EC bytes mismatch");if(l!==A+x)throw new Mt("RS blocks mismatch");if(r!==(P+G)*A+(k+J)*x)throw new Mt("Total bytes mismatch");h<A?(f[0]=P,m[0]=G):(f[0]=k,m[0]=J)}static interleaveWithECBytes(r,a,l,h){if(r.getSizeInBytes()!==l)throw new Mt("Number of bits and data bytes does not match");let f=0,m=0,x=0;const A=new Array;for(let R=0;R<h;++R){const P=new Int32Array(1),k=new Int32Array(1);D.getNumDataBytesAndNumECBytesForBlockID(a,l,h,R,P,k);const G=P[0],J=new Uint8Array(G);r.toBytes(8*f,J,0,G);const te=D.generateECBytes(J,k[0]);A.push(new N(J,te)),m=Math.max(m,G),x=Math.max(x,te.length),f+=P[0]}if(l!==f)throw new Mt("Data bytes does not match offset");const T=new _e;for(let R=0;R<m;++R)for(const P of A){const k=P.getDataBytes();R<k.length&&T.appendBits(k[R],8)}for(let R=0;R<x;++R)for(const P of A){const k=P.getErrorCorrectionBytes();R<k.length&&T.appendBits(k[R],8)}if(a!==T.getSizeInBytes())throw new Mt("Interleaving error: "+a+" and "+T.getSizeInBytes()+" differ.");return T}static generateECBytes(r,a){const l=r.length,h=new Int32Array(l+a);for(let m=0;m<l;m++)h[m]=r[m]&255;new Jr(Et.QR_CODE_FIELD_256).encode(h,a);const f=new Uint8Array(a);for(let m=0;m<a;m++)f[m]=h[l+m];return f}static appendModeInfo(r,a){a.appendBits(r.getBits(),4)}static appendLengthInfo(r,a,l,h){const f=l.getCharacterCountBits(a);if(r>=1<<f)throw new Mt(r+" is bigger than "+((1<<f)-1));h.appendBits(r,f)}static appendBytes(r,a,l,h){switch(a){case Ze.NUMERIC:D.appendNumericBytes(r,l);break;case Ze.ALPHANUMERIC:D.appendAlphanumericBytes(r,l);break;case Ze.BYTE:D.append8BitBytes(r,l,h);break;case Ze.KANJI:D.appendKanjiBytes(r,l);break;default:throw new Mt("Invalid mode: "+a)}}static getDigit(r){return r.charCodeAt(0)-48}static isDigit(r){const a=D.getDigit(r);return a>=0&&a<=9}static appendNumericBytes(r,a){const l=r.length;let h=0;for(;h<l;){const f=D.getDigit(r.charAt(h));if(h+2<l){const m=D.getDigit(r.charAt(h+1)),x=D.getDigit(r.charAt(h+2));a.appendBits(f*100+m*10+x,10),h+=3}else if(h+1<l){const m=D.getDigit(r.charAt(h+1));a.appendBits(f*10+m,7),h+=2}else a.appendBits(f,4),h++}}static appendAlphanumericBytes(r,a){const l=r.length;let h=0;for(;h<l;){const f=D.getAlphanumericCode(r.charCodeAt(h));if(f===-1)throw new Mt;if(h+1<l){const m=D.getAlphanumericCode(r.charCodeAt(h+1));if(m===-1)throw new Mt;a.appendBits(f*45+m,11),h+=2}else a.appendBits(f,6),h++}}static append8BitBytes(r,a,l){let h;try{h=W.encode(r,l)}catch(f){throw new Mt(f)}for(let f=0,m=h.length;f!==m;f++){const x=h[f];a.appendBits(x,8)}}static appendKanjiBytes(r,a){let l;try{l=W.encode(r,V.SJIS)}catch(f){throw new Mt(f)}const h=l.length;for(let f=0;f<h;f+=2){const m=l[f]&255,x=l[f+1]&255,A=m<<8&4294967295|x;let T=-1;if(A>=33088&&A<=40956?T=A-33088:A>=57408&&A<=60351&&(T=A-49472),T===-1)throw new Mt("Invalid byte sequence");const R=(T>>8)*192+(T&255);a.appendBits(R,13)}}static appendECI(r,a){a.appendBits(Ze.ECI.getBits(),4),a.appendBits(r.getValue(),8)}}D.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),D.DEFAULT_BYTE_MODE_ENCODING=V.UTF8.getName();class F{write(r,a,l,h=null){if(r.length===0)throw new I("Found empty contents");if(a<0||l<0)throw new I("Requested dimensions are too small: "+a+"x"+l);let f=bt.L,m=F.QUIET_ZONE_SIZE;h!==null&&(h.get(Un.ERROR_CORRECTION)!==void 0&&(f=bt.fromString(h.get(Un.ERROR_CORRECTION).toString())),h.get(Un.MARGIN)!==void 0&&(m=Number.parseInt(h.get(Un.MARGIN).toString(),10)));const x=D.encode(r,f,h);return this.renderResult(x,a,l,m)}writeToDom(r,a,l,h,f=null){typeof r=="string"&&(r=document.querySelector(r));const m=this.write(a,l,h,f);r&&r.appendChild(m)}renderResult(r,a,l,h){const f=r.getMatrix();if(f===null)throw new Qn;const m=f.getWidth(),x=f.getHeight(),A=m+h*2,T=x+h*2,R=Math.max(a,A),P=Math.max(l,T),k=Math.min(Math.floor(R/A),Math.floor(P/T)),G=Math.floor((R-m*k)/2),J=Math.floor((P-x*k)/2),te=this.createSVGElement(R,P);for(let ce=0,ye=J;ce<x;ce++,ye+=k)for(let Pe=0,Me=G;Pe<m;Pe++,Me+=k)if(f.get(Pe,ce)===1){const Re=this.createSvgRectElement(Me,ye,k,k);te.appendChild(Re)}return te}createSVGElement(r,a){const l=document.createElementNS(F.SVG_NS,"svg");return l.setAttributeNS(null,"height",r.toString()),l.setAttributeNS(null,"width",a.toString()),l}createSvgRectElement(r,a,l,h){const f=document.createElementNS(F.SVG_NS,"rect");return f.setAttributeNS(null,"x",r.toString()),f.setAttributeNS(null,"y",a.toString()),f.setAttributeNS(null,"height",l.toString()),f.setAttributeNS(null,"width",h.toString()),f.setAttributeNS(null,"fill","#000000"),f}}F.QUIET_ZONE_SIZE=4,F.SVG_NS="http://www.w3.org/2000/svg";class le{encode(r,a,l,h,f){if(r.length===0)throw new I("Found empty contents");if(a!==Le.QR_CODE)throw new I("Can only encode QR_CODE, but got "+a);if(l<0||h<0)throw new I(`Requested dimensions are too small: ${l}x${h}`);let m=bt.L,x=le.QUIET_ZONE_SIZE;f!==null&&(f.get(Un.ERROR_CORRECTION)!==void 0&&(m=bt.fromString(f.get(Un.ERROR_CORRECTION).toString())),f.get(Un.MARGIN)!==void 0&&(x=Number.parseInt(f.get(Un.MARGIN).toString(),10)));const A=D.encode(r,m,f);return le.renderResult(A,l,h,x)}static renderResult(r,a,l,h){const f=r.getMatrix();if(f===null)throw new Qn;const m=f.getWidth(),x=f.getHeight(),A=m+h*2,T=x+h*2,R=Math.max(a,A),P=Math.max(l,T),k=Math.min(Math.floor(R/A),Math.floor(P/T)),G=Math.floor((R-m*k)/2),J=Math.floor((P-x*k)/2),te=new We(R,P);for(let ce=0,ye=J;ce<x;ce++,ye+=k)for(let Pe=0,Me=G;Pe<m;Pe++,Me+=k)f.get(Pe,ce)===1&&te.setRegion(Me,ye,k,k);return te}}le.QUIET_ZONE_SIZE=4;class Ee{encode(r,a,l,h,f){let m;switch(a){case Le.QR_CODE:m=new le;break;default:throw new I("No encoder available for format "+a)}return m.encode(r,a,l,h,f)}}class Be extends qe{constructor(r,a,l,h,f,m,x,A){if(super(m,x),this.yuvData=r,this.dataWidth=a,this.dataHeight=l,this.left=h,this.top=f,h+m>a||f+x>l)throw new I("Crop rectangle does not fit within image data.");A&&this.reverseHorizontal(m,x)}getRow(r,a){if(r<0||r>=this.getHeight())throw new I("Requested row is outside the image: "+r);const l=this.getWidth();(a==null||a.length<l)&&(a=new Uint8ClampedArray(l));const h=(r+this.top)*this.dataWidth+this.left;return K.arraycopy(this.yuvData,h,a,0,l),a}getMatrix(){const r=this.getWidth(),a=this.getHeight();if(r===this.dataWidth&&a===this.dataHeight)return this.yuvData;const l=r*a,h=new Uint8ClampedArray(l);let f=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return K.arraycopy(this.yuvData,f,h,0,l),h;for(let m=0;m<a;m++){const x=m*r;K.arraycopy(this.yuvData,f,h,x,r),f+=this.dataWidth}return h}isCropSupported(){return!0}crop(r,a,l,h){return new Be(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+a,l,h,!1)}renderThumbnail(){const r=this.getWidth()/Be.THUMBNAIL_SCALE_FACTOR,a=this.getHeight()/Be.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(r*a),h=this.yuvData;let f=this.top*this.dataWidth+this.left;for(let m=0;m<a;m++){const x=m*r;for(let A=0;A<r;A++){const T=h[f+A*Be.THUMBNAIL_SCALE_FACTOR]&255;l[x+A]=4278190080|T*65793}f+=this.dataWidth*Be.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/Be.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Be.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(r,a){const l=this.yuvData;for(let h=0,f=this.top*this.dataWidth+this.left;h<a;h++,f+=this.dataWidth){const m=f+r/2;for(let x=f,A=f+r-1;x<m;x++,A--){const T=l[x];l[x]=l[A],l[A]=T}}}invert(){return new ot(this)}}Be.THUMBNAIL_SCALE_FACTOR=2;class ut extends qe{constructor(r,a,l,h,f,m,x){if(super(a,l),this.dataWidth=h,this.dataHeight=f,this.left=m,this.top=x,r.BYTES_PER_ELEMENT===4){const A=a*l,T=new Uint8ClampedArray(A);for(let R=0;R<A;R++){const P=r[R],k=P>>16&255,G=P>>7&510,J=P&255;T[R]=(k+G+J)/4&255}this.luminances=T}else this.luminances=r;if(h===void 0&&(this.dataWidth=a),f===void 0&&(this.dataHeight=l),m===void 0&&(this.left=0),x===void 0&&(this.top=0),this.left+a>this.dataWidth||this.top+l>this.dataHeight)throw new I("Crop rectangle does not fit within image data.")}getRow(r,a){if(r<0||r>=this.getHeight())throw new I("Requested row is outside the image: "+r);const l=this.getWidth();(a==null||a.length<l)&&(a=new Uint8ClampedArray(l));const h=(r+this.top)*this.dataWidth+this.left;return K.arraycopy(this.luminances,h,a,0,l),a}getMatrix(){const r=this.getWidth(),a=this.getHeight();if(r===this.dataWidth&&a===this.dataHeight)return this.luminances;const l=r*a,h=new Uint8ClampedArray(l);let f=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return K.arraycopy(this.luminances,f,h,0,l),h;for(let m=0;m<a;m++){const x=m*r;K.arraycopy(this.luminances,f,h,x,r),f+=this.dataWidth}return h}isCropSupported(){return!0}crop(r,a,l,h){return new ut(this.luminances,l,h,this.dataWidth,this.dataHeight,this.left+r,this.top+a)}invert(){return new ot(this)}}class Vn extends V{static forName(r){return this.getCharacterSetECIByName(r)}}class Yt{}Yt.ISO_8859_1=V.ISO8859_1;class An{isCompact(){return this.compact}setCompact(r){this.compact=r}getSize(){return this.size}setSize(r){this.size=r}getLayers(){return this.layers}setLayers(r){this.layers=r}getCodeWords(){return this.codeWords}setCodeWords(r){this.codeWords=r}getMatrix(){return this.matrix}setMatrix(r){this.matrix=r}}class lr{static singletonList(r){return[r]}static min(r,a){return r.sort(a)[0]}}class es{constructor(r){this.previous=r}getPrevious(){return this.previous}}class Ci extends es{constructor(r,a,l){super(r),this.value=a,this.bitCount=l}appendTo(r,a){r.appendBits(this.value,this.bitCount)}add(r,a){return new Ci(this,r,a)}addBinaryShift(r,a){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Ci(this,r,a)}toString(){let r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+$.toBinaryString(r|1<<this.bitCount).substring(1)+">"}}class cr extends Ci{constructor(r,a,l){super(r,0,0),this.binaryShiftStart=a,this.binaryShiftByteCount=l}appendTo(r,a){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):l===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(a[this.binaryShiftStart+l],8)}addBinaryShift(r,a){return new cr(this,r,a)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Js(M,r,a){return new cr(M,r,a)}function ts(M,r,a){return new Ci(M,r,a)}const La=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Ms=0,al=1,Ar=2,ic=3,Br=4,Co=new Ci(null,0,0),$s=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Jf(M){for(let r of M)me.fill(r,-1);return M[Ms][Br]=0,M[al][Br]=0,M[al][Ms]=28,M[ic][Br]=0,M[Ar][Br]=0,M[Ar][Ms]=15,M}const So=Jf(me.createInt32Array(6,6));class kr{constructor(r,a,l,h){this.token=r,this.mode=a,this.binaryShiftByteCount=l,this.bitCount=h}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(r,a){let l=this.bitCount,h=this.token;if(r!==this.mode){let m=$s[this.mode][r];h=ts(h,m&65535,m>>16),l+=m>>16}let f=r===Ar?4:5;return h=ts(h,a,f),new kr(h,r,0,l+f)}shiftAndAppend(r,a){let l=this.token,h=this.mode===Ar?4:5;return l=ts(l,So[this.mode][r],h),l=ts(l,a,5),new kr(l,this.mode,0,this.bitCount+h+5)}addBinaryShiftChar(r){let a=this.token,l=this.mode,h=this.bitCount;if(this.mode===Br||this.mode===Ar){let x=$s[l][Ms];a=ts(a,x&65535,x>>16),h+=x>>16,l=Ms}let f=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,m=new kr(a,l,this.binaryShiftByteCount+1,h+f);return m.binaryShiftByteCount===2078&&(m=m.endBinaryShift(r+1)),m}endBinaryShift(r){if(this.binaryShiftByteCount===0)return this;let a=this.token;return a=Js(a,r-this.binaryShiftByteCount,this.binaryShiftByteCount),new kr(a,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(r){let a=this.bitCount+($s[this.mode][r.mode]>>16);return this.binaryShiftByteCount<r.binaryShiftByteCount?a+=kr.calculateBinaryShiftCost(r)-kr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>r.binaryShiftByteCount&&r.binaryShiftByteCount>0&&(a+=10),a<=r.bitCount}toBitArray(r){let a=[];for(let h=this.endBinaryShift(r.length).token;h!==null;h=h.getPrevious())a.unshift(h);let l=new _e;for(const h of a)h.appendTo(l,r);return l}toString(){return Z.format("%s bits=%d bytes=%d",La[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(r){return r.binaryShiftByteCount>62?21:r.binaryShiftByteCount>31?20:r.binaryShiftByteCount>0?10:0}}kr.INITIAL_STATE=new kr(Co,Ms,0,0);function Tu(M){const r=Z.getCharCode(" "),a=Z.getCharCode("."),l=Z.getCharCode(",");M[Ms][r]=1;const h=Z.getCharCode("Z"),f=Z.getCharCode("A");for(let k=f;k<=h;k++)M[Ms][k]=k-f+2;M[al][r]=1;const m=Z.getCharCode("z"),x=Z.getCharCode("a");for(let k=x;k<=m;k++)M[al][k]=k-x+2;M[Ar][r]=1;const A=Z.getCharCode("9"),T=Z.getCharCode("0");for(let k=T;k<=A;k++)M[Ar][k]=k-T+2;M[Ar][l]=12,M[Ar][a]=13;const R=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let k=0;k<R.length;k++)M[ic][Z.getCharCode(R[k])]=k;const P=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let k=0;k<P.length;k++)Z.getCharCode(P[k])>0&&(M[Br][Z.getCharCode(P[k])]=k);return M}const Io=Tu(me.createInt32Array(5,256));class ea{constructor(r){this.text=r}encode(){const r=Z.getCharCode(" "),a=Z.getCharCode(`
`);let l=lr.singletonList(kr.INITIAL_STATE);for(let f=0;f<this.text.length;f++){let m,x=f+1<this.text.length?this.text[f+1]:0;switch(this.text[f]){case Z.getCharCode("\r"):m=x===a?2:0;break;case Z.getCharCode("."):m=x===r?3:0;break;case Z.getCharCode(","):m=x===r?4:0;break;case Z.getCharCode(":"):m=x===r?5:0;break;default:m=0}m>0?(l=ea.updateStateListForPair(l,f,m),f++):l=this.updateStateListForChar(l,f)}return lr.min(l,(f,m)=>f.getBitCount()-m.getBitCount()).toBitArray(this.text)}updateStateListForChar(r,a){const l=[];for(let h of r)this.updateStateForChar(h,a,l);return ea.simplifyStates(l)}updateStateForChar(r,a,l){let h=this.text[a]&255,f=Io[r.getMode()][h]>0,m=null;for(let x=0;x<=Br;x++){let A=Io[x][h];if(A>0){if(m==null&&(m=r.endBinaryShift(a)),!f||x===r.getMode()||x===Ar){const T=m.latchAndAppend(x,A);l.push(T)}if(!f&&So[r.getMode()][x]>=0){const T=m.shiftAndAppend(x,A);l.push(T)}}}if(r.getBinaryShiftByteCount()>0||Io[r.getMode()][h]===0){let x=r.addBinaryShiftChar(a);l.push(x)}}static updateStateListForPair(r,a,l){const h=[];for(let f of r)this.updateStateForPair(f,a,l,h);return this.simplifyStates(h)}static updateStateForPair(r,a,l,h){let f=r.endBinaryShift(a);if(h.push(f.latchAndAppend(Br,l)),r.getMode()!==Br&&h.push(f.shiftAndAppend(Br,l)),l===3||l===4){let m=f.latchAndAppend(Ar,16-l).latchAndAppend(Ar,1);h.push(m)}if(r.getBinaryShiftByteCount()>0){let m=r.addBinaryShiftChar(a).addBinaryShiftChar(a+1);h.push(m)}}static simplifyStates(r){let a=[];for(const l of r){let h=!0;for(const f of a){if(f.isBetterThanOrEqualTo(l)){h=!1;break}l.isBetterThanOrEqualTo(f)&&(a=a.filter(m=>m!==f))}h&&a.push(l)}return a}}class Vt{constructor(){}static encodeBytes(r){return Vt.encode(r,Vt.DEFAULT_EC_PERCENT,Vt.DEFAULT_AZTEC_LAYERS)}static encode(r,a,l){let h=new ea(r).encode(),f=$.truncDivision(h.getSize()*a,100)+11,m=h.getSize()+f,x,A,T,R,P;if(l!==Vt.DEFAULT_AZTEC_LAYERS){if(x=l<0,A=Math.abs(l),A>(x?Vt.MAX_NB_BITS_COMPACT:Vt.MAX_NB_BITS))throw new I(Z.format("Illegal value %s for layers",l));T=Vt.totalBitsInLayer(A,x),R=Vt.WORD_SIZE[A];let Re=T-T%R;if(P=Vt.stuffBits(h,R),P.getSize()+f>Re)throw new I("Data to large for user specified layer");if(x&&P.getSize()>R*64)throw new I("Data to large for user specified layer")}else{R=0,P=null;for(let Re=0;;Re++){if(Re>Vt.MAX_NB_BITS)throw new I("Data too large for an Aztec code");if(x=Re<=3,A=x?Re+1:Re,T=Vt.totalBitsInLayer(A,x),m>T)continue;(P==null||R!==Vt.WORD_SIZE[A])&&(R=Vt.WORD_SIZE[A],P=Vt.stuffBits(h,R));let St=T-T%R;if(!(x&&P.getSize()>R*64)&&P.getSize()+f<=St)break}}let k=Vt.generateCheckWords(P,T,R),G=P.getSize()/R,J=Vt.generateModeMessage(x,A,G),te=(x?11:14)+A*4,ce=new Int32Array(te),ye;if(x){ye=te;for(let Re=0;Re<ce.length;Re++)ce[Re]=Re}else{ye=te+1+2*$.truncDivision($.truncDivision(te,2)-1,15);let Re=$.truncDivision(te,2),St=$.truncDivision(ye,2);for(let ft=0;ft<Re;ft++){let Zn=ft+$.truncDivision(ft,15);ce[Re-ft-1]=St-Zn-1,ce[Re+ft]=St+Zn+1}}let Pe=new We(ye);for(let Re=0,St=0;Re<A;Re++){let ft=(A-Re)*4+(x?9:12);for(let Zn=0;Zn<ft;Zn++){let wr=Zn*2;for(let Mi=0;Mi<2;Mi++)k.get(St+wr+Mi)&&Pe.set(ce[Re*2+Mi],ce[Re*2+Zn]),k.get(St+ft*2+wr+Mi)&&Pe.set(ce[Re*2+Zn],ce[te-1-Re*2-Mi]),k.get(St+ft*4+wr+Mi)&&Pe.set(ce[te-1-Re*2-Mi],ce[te-1-Re*2-Zn]),k.get(St+ft*6+wr+Mi)&&Pe.set(ce[te-1-Re*2-Zn],ce[Re*2+Mi])}St+=ft*8}if(Vt.drawModeMessage(Pe,x,ye,J),x)Vt.drawBullsEye(Pe,$.truncDivision(ye,2),5);else{Vt.drawBullsEye(Pe,$.truncDivision(ye,2),7);for(let Re=0,St=0;Re<$.truncDivision(te,2)-1;Re+=15,St+=16)for(let ft=$.truncDivision(ye,2)&1;ft<ye;ft+=2)Pe.set($.truncDivision(ye,2)-St,ft),Pe.set($.truncDivision(ye,2)+St,ft),Pe.set(ft,$.truncDivision(ye,2)-St),Pe.set(ft,$.truncDivision(ye,2)+St)}let Me=new An;return Me.setCompact(x),Me.setSize(ye),Me.setLayers(A),Me.setCodeWords(G),Me.setMatrix(Pe),Me}static drawBullsEye(r,a,l){for(let h=0;h<l;h+=2)for(let f=a-h;f<=a+h;f++)r.set(f,a-h),r.set(f,a+h),r.set(a-h,f),r.set(a+h,f);r.set(a-l,a-l),r.set(a-l+1,a-l),r.set(a-l,a-l+1),r.set(a+l,a-l),r.set(a+l,a-l+1),r.set(a+l,a+l-1)}static generateModeMessage(r,a,l){let h=new _e;return r?(h.appendBits(a-1,2),h.appendBits(l-1,6),h=Vt.generateCheckWords(h,28,4)):(h.appendBits(a-1,5),h.appendBits(l-1,11),h=Vt.generateCheckWords(h,40,4)),h}static drawModeMessage(r,a,l,h){let f=$.truncDivision(l,2);if(a)for(let m=0;m<7;m++){let x=f-3+m;h.get(m)&&r.set(x,f-5),h.get(m+7)&&r.set(f+5,x),h.get(20-m)&&r.set(x,f+5),h.get(27-m)&&r.set(f-5,x)}else for(let m=0;m<10;m++){let x=f-5+m+$.truncDivision(m,5);h.get(m)&&r.set(x,f-7),h.get(m+10)&&r.set(f+7,x),h.get(29-m)&&r.set(x,f+7),h.get(39-m)&&r.set(f-7,x)}}static generateCheckWords(r,a,l){let h=r.getSize()/l,f=new Jr(Vt.getGF(l)),m=$.truncDivision(a,l),x=Vt.bitsToWords(r,l,m);f.encode(x,m-h);let A=a%l,T=new _e;T.appendBits(0,A);for(const R of Array.from(x))T.appendBits(R,l);return T}static bitsToWords(r,a,l){let h=new Int32Array(l),f,m;for(f=0,m=r.getSize()/a;f<m;f++){let x=0;for(let A=0;A<a;A++)x|=r.get(f*a+A)?1<<a-A-1:0;h[f]=x}return h}static getGF(r){switch(r){case 4:return Et.AZTEC_PARAM;case 6:return Et.AZTEC_DATA_6;case 8:return Et.AZTEC_DATA_8;case 10:return Et.AZTEC_DATA_10;case 12:return Et.AZTEC_DATA_12;default:throw new I("Unsupported word size "+r)}}static stuffBits(r,a){let l=new _e,h=r.getSize(),f=(1<<a)-2;for(let m=0;m<h;m+=a){let x=0;for(let A=0;A<a;A++)(m+A>=h||r.get(m+A))&&(x|=1<<a-1-A);(x&f)===f?(l.appendBits(x&f,a),m--):(x&f)===0?(l.appendBits(x|1,a),m--):l.appendBits(x,a)}return l}static totalBitsInLayer(r,a){return((a?88:112)+16*r)*r}}Vt.DEFAULT_EC_PERCENT=33,Vt.DEFAULT_AZTEC_LAYERS=0,Vt.MAX_NB_BITS=32,Vt.MAX_NB_BITS_COMPACT=4,Vt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class No{encode(r,a,l,h){return this.encodeWithHints(r,a,l,h,null)}encodeWithHints(r,a,l,h,f){let m=Yt.ISO_8859_1,x=Vt.DEFAULT_EC_PERCENT,A=Vt.DEFAULT_AZTEC_LAYERS;return f!=null&&(f.has(Un.CHARACTER_SET)&&(m=Vn.forName(f.get(Un.CHARACTER_SET).toString())),f.has(Un.ERROR_CORRECTION)&&(x=$.parseInt(f.get(Un.ERROR_CORRECTION).toString())),f.has(Un.AZTEC_LAYERS)&&(A=$.parseInt(f.get(Un.AZTEC_LAYERS).toString()))),No.encodeLayers(r,a,l,h,m,x,A)}static encodeLayers(r,a,l,h,f,m,x){if(a!==Le.AZTEC)throw new I("Can only encode AZTEC, but got "+a);let A=Vt.encode(Z.getBytes(r,f),m,x);return No.renderResult(A,l,h)}static renderResult(r,a,l){let h=r.getMatrix();if(h==null)throw new Qn;let f=h.getWidth(),m=h.getHeight(),x=Math.max(a,f),A=Math.max(l,m),T=Math.min(x/f,A/m),R=(x-f*T)/2,P=(A-m*T)/2,k=new We(x,A);for(let G=0,J=P;G<m;G++,J+=T)for(let te=0,ce=R;te<f;te++,ce+=T)h.get(te,G)&&k.setRegion(ce,J,T,T);return k}}n.AbstractExpandedDecoder=Tn,n.ArgumentException=C,n.ArithmeticException=gr,n.AztecCode=An,n.AztecCodeReader=Yr,n.AztecCodeWriter=No,n.AztecDecoder=Gt,n.AztecDetector=Cs,n.AztecDetectorResult=tr,n.AztecEncoder=Vt,n.AztecHighLevelEncoder=ea,n.AztecPoint=Fn,n.BarcodeFormat=Le,n.Binarizer=q,n.BinaryBitmap=L,n.BitArray=_e,n.BitMatrix=We,n.BitSource=Bn,n.BrowserAztecCodeReader=Sa,n.BrowserBarcodeReader=wo,n.BrowserCodeReader=ke,n.BrowserDatamatrixCodeReader=Wr,n.BrowserMultiFormatReader=Zr,n.BrowserPDF417Reader=rl,n.BrowserQRCodeReader=sl,n.BrowserQRCodeSvgWriter=F,n.CharacterSetECI=V,n.ChecksumException=B,n.Code128Reader=Oe,n.Code39Reader=qt,n.DataMatrixDecodedBitStreamParser=Di,n.DataMatrixReader=Yi,n.DecodeHintType=De,n.DecoderResult=Kt,n.DefaultGridSampler=ys,n.DetectorResult=xs,n.EAN13Reader=an,n.EncodeHintType=Un,n.Exception=_,n.FormatException=j,n.GenericGF=Et,n.GenericGFPoly=bn,n.GlobalHistogramBinarizer=pe,n.GridSampler=mr,n.GridSamplerInstance=ri,n.HTMLCanvasElementLuminanceSource=gt,n.HybridBinarizer=be,n.ITFReader=rt,n.IllegalArgumentException=I,n.IllegalStateException=Qn,n.InvertedLuminanceSource=ot,n.LuminanceSource=qe,n.MathUtils=Qe,n.MultiFormatOneDReader=Ri,n.MultiFormatReader=vo,n.MultiFormatWriter=Ee,n.NotFoundException=he,n.OneDReader=Wt,n.PDF417DecodedBitStreamParser=xe,n.PDF417DecoderErrorCorrection=Dr,n.PDF417Reader=kn,n.PDF417ResultMetadata=_s,n.PerspectiveTransform=ui,n.PlanarYUVLuminanceSource=Be,n.QRCodeByteMatrix=Zs,n.QRCodeDataMask=si,n.QRCodeDecodedBitStreamParser=on,n.QRCodeDecoderErrorCorrectionLevel=bt,n.QRCodeDecoderFormatInformation=Gn,n.QRCodeEncoder=D,n.QRCodeEncoderQRCode=$r,n.QRCodeMaskUtil=Rt,n.QRCodeMatrixUtil=p,n.QRCodeMode=Ze,n.QRCodeReader=Qi,n.QRCodeVersion=Ye,n.QRCodeWriter=le,n.RGBLuminanceSource=ut,n.RSS14Reader=$t,n.RSSExpandedReader=Ie,n.ReaderException=Qs,n.ReedSolomonDecoder=Hi,n.ReedSolomonEncoder=Jr,n.ReedSolomonException=ci,n.Result=Ve,n.ResultMetadataType=yt,n.ResultPoint=Fe,n.StringUtils=Z,n.UnsupportedOperationException=ne,n.VideoInputDevice=ie,n.WhiteRectangleDetector=hn,n.WriterException=Mt,n.ZXingArrays=me,n.ZXingCharset=Vn,n.ZXingInteger=$,n.ZXingStandardCharsets=Yt,n.ZXingStringBuilder=X,n.ZXingStringEncoding=W,n.ZXingSystem=K,n.createAbstractExpandedDecoder=qi,Object.defineProperty(n,"__esModule",{value:!0})}))})(Kc,Kc.exports)),Kc.exports}var Dn=H8();const G8=H1(Dn),q8=fT({__proto__:null,default:G8},[Dn]);var kE=(function(){function i(e,n,o){if(this.formatMap=new Map([[Ge.QR_CODE,Dn.BarcodeFormat.QR_CODE],[Ge.AZTEC,Dn.BarcodeFormat.AZTEC],[Ge.CODABAR,Dn.BarcodeFormat.CODABAR],[Ge.CODE_39,Dn.BarcodeFormat.CODE_39],[Ge.CODE_93,Dn.BarcodeFormat.CODE_93],[Ge.CODE_128,Dn.BarcodeFormat.CODE_128],[Ge.DATA_MATRIX,Dn.BarcodeFormat.DATA_MATRIX],[Ge.MAXICODE,Dn.BarcodeFormat.MAXICODE],[Ge.ITF,Dn.BarcodeFormat.ITF],[Ge.EAN_13,Dn.BarcodeFormat.EAN_13],[Ge.EAN_8,Dn.BarcodeFormat.EAN_8],[Ge.PDF_417,Dn.BarcodeFormat.PDF_417],[Ge.RSS_14,Dn.BarcodeFormat.RSS_14],[Ge.RSS_EXPANDED,Dn.BarcodeFormat.RSS_EXPANDED],[Ge.UPC_A,Dn.BarcodeFormat.UPC_A],[Ge.UPC_E,Dn.BarcodeFormat.UPC_E],[Ge.UPC_EAN_EXTENSION,Dn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!q8)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=o;var u=this.createZXingFormats(e),d=new Map;d.set(Dn.DecodeHintType.POSSIBLE_FORMATS,u),d.set(Dn.DecodeHintType.TRY_HARDER,!1),this.hints=d}return i.prototype.decodeAsync=function(e){var n=this;return new Promise(function(o,u){try{o(n.decode(e))}catch(d){u(d)}})},i.prototype.decode=function(e){var n=new Dn.MultiFormatReader(this.verbose,this.hints),o=new Dn.HTMLCanvasElementLuminanceSource(e),u=new Dn.BinaryBitmap(new Dn.HybridBinarizer(o)),d=n.decode(u);return{text:d.text,format:qw.create(this.toHtml5QrcodeSupportedFormats(d.format)),debugData:this.createDebugData()}},i.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,o,u){e.set(n,o)}),e},i.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},i.prototype.createZXingFormats=function(e){for(var n=[],o=0,u=e;o<u.length;o++){var d=u[o];this.formatMap.has(d)?n.push(this.formatMap.get(d)):this.logger.logError("".concat(d," is not supported by")+"ZXingHtml5QrcodeShim")}return n},i.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},i})(),Y8=function(i,e,n,o){function u(d){return d instanceof n?d:new n(function(y){y(d)})}return new(n||(n=Promise))(function(d,y){function v(C){try{_(o.next(C))}catch(I){y(I)}}function b(C){try{_(o.throw(C))}catch(I){y(I)}}function _(C){C.done?d(C.value):u(C.value).then(v,b)}_((o=o.apply(i,e||[])).next())})},X8=function(i,e){var n={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,u,d,y;return y={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function v(_){return function(C){return b([_,C])}}function b(_){if(o)throw new TypeError("Generator is already executing.");for(;y&&(y=0,_[0]&&(n=0)),n;)try{if(o=1,u&&(d=_[0]&2?u.return:_[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,_[1])).done)return d;switch(u=0,d&&(_=[_[0]&2,d.value]),_[0]){case 0:case 1:d=_;break;case 4:return n.label++,{value:_[1],done:!1};case 5:n.label++,u=_[1],_=[0];continue;case 7:_=n.ops.pop(),n.trys.pop();continue;default:if(d=n.trys,!(d=d.length>0&&d[d.length-1])&&(_[0]===6||_[0]===2)){n=0;continue}if(_[0]===3&&(!d||_[1]>d[0]&&_[1]<d[3])){n.label=_[1];break}if(_[0]===6&&n.label<d[1]){n.label=d[1],d=_;break}if(d&&n.label<d[2]){n.label=d[2],n.ops.push(_);break}d[2]&&n.ops.pop(),n.trys.pop();continue}_=e.call(i,n)}catch(C){_=[6,C],u=0}finally{o=d=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},UE=(function(){function i(e,n,o){if(this.formatMap=new Map([[Ge.QR_CODE,"qr_code"],[Ge.AZTEC,"aztec"],[Ge.CODABAR,"codabar"],[Ge.CODE_39,"code_39"],[Ge.CODE_93,"code_93"],[Ge.CODE_128,"code_128"],[Ge.DATA_MATRIX,"data_matrix"],[Ge.ITF,"itf"],[Ge.EAN_13,"ean_13"],[Ge.EAN_8,"ean_8"],[Ge.PDF_417,"pdf417"],[Ge.UPC_A,"upc_a"],[Ge.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!i.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=o;var u=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(u),!this.detector)throw"BarcodeDetector detector not supported"}return i.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},i.prototype.decodeAsync=function(e){return Y8(this,void 0,void 0,function(){var n,o;return X8(this,function(u){switch(u.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=u.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return o=this.selectLargestBarcode(n),[2,{text:o.rawValue,format:qw.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}]}})})},i.prototype.selectLargestBarcode=function(e){for(var n=null,o=0,u=0,d=e;u<d.length;u++){var y=d[u],v=y.boundingBox.width*y.boundingBox.height;v>o&&(o=v,n=y)}if(!n)throw"No largest barcode found";return n},i.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],o=0,u=e;o<u.length;o++){var d=u[o];this.formatMap.has(d)?n.push(this.formatMap.get(d)):this.logger.warn("".concat(d," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},i.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},i.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,o,u){e.set(n,o)}),e},i.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},i})(),VE=function(i,e,n,o){function u(d){return d instanceof n?d:new n(function(y){y(d)})}return new(n||(n=Promise))(function(d,y){function v(C){try{_(o.next(C))}catch(I){y(I)}}function b(C){try{_(o.throw(C))}catch(I){y(I)}}function _(C){C.done?d(C.value):u(C.value).then(v,b)}_((o=o.apply(i,e||[])).next())})},jE=function(i,e){var n={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,u,d,y;return y={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function v(_){return function(C){return b([_,C])}}function b(_){if(o)throw new TypeError("Generator is already executing.");for(;y&&(y=0,_[0]&&(n=0)),n;)try{if(o=1,u&&(d=_[0]&2?u.return:_[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,_[1])).done)return d;switch(u=0,d&&(_=[_[0]&2,d.value]),_[0]){case 0:case 1:d=_;break;case 4:return n.label++,{value:_[1],done:!1};case 5:n.label++,u=_[1],_=[0];continue;case 7:_=n.ops.pop(),n.trys.pop();continue;default:if(d=n.trys,!(d=d.length>0&&d[d.length-1])&&(_[0]===6||_[0]===2)){n=0;continue}if(_[0]===3&&(!d||_[1]>d[0]&&_[1]<d[3])){n.label=_[1];break}if(_[0]===6&&n.label<d[1]){n.label=d[1],d=_;break}if(d&&n.label<d[2]){n.label=d[2],n.ops.push(_);break}d[2]&&n.ops.pop(),n.trys.pop();continue}_=e.call(i,n)}catch(C){_=[6,C],u=0}finally{o=d=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},K8=(function(){function i(e,n,o,u){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=o,n&&UE.isSupported()?(this.primaryDecoder=new UE(e,o,u),this.secondaryDecoder=new kE(e,o,u)):this.primaryDecoder=new kE(e,o,u)}return i.prototype.decodeAsync=function(e){return VE(this,void 0,void 0,function(){var n;return jE(this,function(o){switch(o.label){case 0:n=performance.now(),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,o.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},i.prototype.decodeRobustlyAsync=function(e){return VE(this,void 0,void 0,function(){var n,o;return jE(this,function(u){switch(u.label){case 0:n=performance.now(),u.label=1;case 1:return u.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,u.sent()];case 3:if(o=u.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw o;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},i.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},i.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},i.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,o=this.executionResults;n<o.length;n++){var u=o[n];e+=u}var d=e/this.executionResults.length;console.log("".concat(d," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},i})(),Vg=(function(){var i=function(e,n){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,u){o.__proto__=u}||function(o,u){for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(o[d]=u[d])},i(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");i(e,n);function o(){this.constructor=e}e.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),Tf=function(i,e,n,o){function u(d){return d instanceof n?d:new n(function(y){y(d)})}return new(n||(n=Promise))(function(d,y){function v(C){try{_(o.next(C))}catch(I){y(I)}}function b(C){try{_(o.throw(C))}catch(I){y(I)}}function _(C){C.done?d(C.value):u(C.value).then(v,b)}_((o=o.apply(i,e||[])).next())})},vf=function(i,e){var n={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,u,d,y;return y={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function v(_){return function(C){return b([_,C])}}function b(_){if(o)throw new TypeError("Generator is already executing.");for(;y&&(y=0,_[0]&&(n=0)),n;)try{if(o=1,u&&(d=_[0]&2?u.return:_[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,_[1])).done)return d;switch(u=0,d&&(_=[_[0]&2,d.value]),_[0]){case 0:case 1:d=_;break;case 4:return n.label++,{value:_[1],done:!1};case 5:n.label++,u=_[1],_=[0];continue;case 7:_=n.ops.pop(),n.trys.pop();continue;default:if(d=n.trys,!(d=d.length>0&&d[d.length-1])&&(_[0]===6||_[0]===2)){n=0;continue}if(_[0]===3&&(!d||_[1]>d[0]&&_[1]<d[3])){n.label=_[1];break}if(_[0]===6&&n.label<d[1]){n.label=d[1],d=_;break}if(d&&n.label<d[2]){n.label=d[2],n.ops.push(_);break}d[2]&&n.ops.pop(),n.trys.pop();continue}_=e.call(i,n)}catch(C){_=[6,C],u=0}finally{o=d=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},Xw=(function(){function i(e,n){this.name=e,this.track=n}return i.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},i.prototype.apply=function(e){var n={};n[this.name]=e;var o={advanced:[n]};return this.track.applyConstraints(o)},i.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},i})(),W8=(function(i){Vg(e,i);function e(n,o){return i.call(this,n,o)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var o={};o[this.name]=n;var u={advanced:[o]};return this.track.applyConstraints(u)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),o=n[this.name];return{min:o.min,max:o.max,step:o.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e})(Xw),Q8=(function(i){Vg(e,i);function e(n){return i.call(this,"zoom",n)||this}return e})(W8),Z8=(function(i){Vg(e,i);function e(n){return i.call(this,"torch",n)||this}return e})(Xw),J8=(function(){function i(e){this.track=e}return i.prototype.zoomFeature=function(){return new Q8(this.track)},i.prototype.torchFeature=function(){return new Z8(this.track)},i})(),$8=(function(){function i(e,n,o){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=o,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return i.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},i.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var o=e.surface.clientWidth,u=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(o,u),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},i.create=function(e,n,o,u){return Tf(this,void 0,void 0,function(){var d,y;return vf(this,function(v){switch(v.label){case 0:return d=new i(e,n,u),o.aspectRatio?(y={aspectRatio:o.aspectRatio},[4,d.getFirstTrackOrFail().applyConstraints(y)]):[3,2];case 1:v.sent(),v.label=2;case 2:return d.setupSurface(),[2,d]}})})},i.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},i.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},i.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},i.prototype.resume=function(e){this.failIfClosed();var n=this,o=function(){setTimeout(e,200),n.surface.removeEventListener("playing",o)};this.surface.addEventListener("playing",o),this.surface.play()},i.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},i.prototype.getSurface=function(){return this.failIfClosed(),this.surface},i.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},i.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},i.prototype.applyVideoConstraints=function(e){return Tf(this,void 0,void 0,function(){return vf(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},i.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,o){var u=e.mediaStream.getVideoTracks(),d=u.length,y=0;e.mediaStream.getVideoTracks().forEach(function(v){e.mediaStream.removeTrack(v),v.stop(),++y,y>=d&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},i.prototype.getCapabilities=function(){return new J8(this.getFirstTrackOrFail())},i})(),eR=(function(){function i(e){this.mediaStream=e}return i.prototype.render=function(e,n,o){return Tf(this,void 0,void 0,function(){return vf(this,function(u){return[2,$8.create(e,this.mediaStream,n,o)]})})},i.create=function(e){return Tf(this,void 0,void 0,function(){var n,o;return vf(this,function(u){switch(u.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return o=u.sent(),[2,new i(o)]}})})},i})(),FE=function(i,e,n,o){function u(d){return d instanceof n?d:new n(function(y){y(d)})}return new(n||(n=Promise))(function(d,y){function v(C){try{_(o.next(C))}catch(I){y(I)}}function b(C){try{_(o.throw(C))}catch(I){y(I)}}function _(C){C.done?d(C.value):u(C.value).then(v,b)}_((o=o.apply(i,e||[])).next())})},zE=function(i,e){var n={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,u,d,y;return y={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function v(_){return function(C){return b([_,C])}}function b(_){if(o)throw new TypeError("Generator is already executing.");for(;y&&(y=0,_[0]&&(n=0)),n;)try{if(o=1,u&&(d=_[0]&2?u.return:_[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,_[1])).done)return d;switch(u=0,d&&(_=[_[0]&2,d.value]),_[0]){case 0:case 1:d=_;break;case 4:return n.label++,{value:_[1],done:!1};case 5:n.label++,u=_[1],_=[0];continue;case 7:_=n.ops.pop(),n.trys.pop();continue;default:if(d=n.trys,!(d=d.length>0&&d[d.length-1])&&(_[0]===6||_[0]===2)){n=0;continue}if(_[0]===3&&(!d||_[1]>d[0]&&_[1]<d[3])){n.label=_[1];break}if(_[0]===6&&n.label<d[1]){n.label=d[1],d=_;break}if(d&&n.label<d[2]){n.label=d[2],n.ops.push(_);break}d[2]&&n.ops.pop(),n.trys.pop();continue}_=e.call(i,n)}catch(C){_=[6,C],u=0}finally{o=d=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},tR=(function(){function i(){}return i.failIfNotSupported=function(){return FE(this,void 0,void 0,function(){return zE(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new i]})})},i.prototype.create=function(e){return FE(this,void 0,void 0,function(){return zE(this,function(n){return[2,eR.create(e)]})})},i})(),nR=function(i,e,n,o){function u(d){return d instanceof n?d:new n(function(y){y(d)})}return new(n||(n=Promise))(function(d,y){function v(C){try{_(o.next(C))}catch(I){y(I)}}function b(C){try{_(o.throw(C))}catch(I){y(I)}}function _(C){C.done?d(C.value):u(C.value).then(v,b)}_((o=o.apply(i,e||[])).next())})},iR=function(i,e){var n={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,u,d,y;return y={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function v(_){return function(C){return b([_,C])}}function b(_){if(o)throw new TypeError("Generator is already executing.");for(;y&&(y=0,_[0]&&(n=0)),n;)try{if(o=1,u&&(d=_[0]&2?u.return:_[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,_[1])).done)return d;switch(u=0,d&&(_=[_[0]&2,d.value]),_[0]){case 0:case 1:d=_;break;case 4:return n.label++,{value:_[1],done:!1};case 5:n.label++,u=_[1],_=[0];continue;case 7:_=n.ops.pop(),n.trys.pop();continue;default:if(d=n.trys,!(d=d.length>0&&d[d.length-1])&&(_[0]===6||_[0]===2)){n=0;continue}if(_[0]===3&&(!d||_[1]>d[0]&&_[1]<d[3])){n.label=_[1];break}if(_[0]===6&&n.label<d[1]){n.label=d[1],d=_;break}if(d&&n.label<d[2]){n.label=d[2],n.ops.push(_);break}d[2]&&n.ops.pop(),n.trys.pop();continue}_=e.call(i,n)}catch(C){_=[6,C],u=0}finally{o=d=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},rR=(function(){function i(){}return i.retrieve=function(){if(navigator.mediaDevices)return i.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?i.getCamerasFromMediaStreamTrack():i.rejectWithError()},i.rejectWithError=function(){var e=Fl.unableToQuerySupportedDevices();return i.isHttpsOrLocalhost()||(e=Fl.insecureContextCameraQueryError()),Promise.reject(e)},i.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},i.getCamerasFromMediaDevices=function(){return nR(this,void 0,void 0,function(){var e,n,o,u,d,y,v;return iR(this,function(b){switch(b.label){case 0:return e=function(_){for(var C=_.getVideoTracks(),I=0,L=C;I<L.length;I++){var B=L[I];B.enabled=!1,B.stop(),_.removeTrack(B)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=b.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(o=b.sent(),u=[],d=0,y=o;d<y.length;d++)v=y[d],v.kind==="videoinput"&&u.push({id:v.deviceId,label:v.label});return e(n),[2,u]}})})},i.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var o=function(d){for(var y=[],v=0,b=d;v<b.length;v++){var _=b[v];_.kind==="video"&&y.push({id:_.id,label:_.label})}e(y)},u=MediaStreamTrack;u.getSources(o)})},i})(),ti;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.NOT_STARTED=1]="NOT_STARTED",i[i.SCANNING=2]="SCANNING",i[i.PAUSED=3]="PAUSED"})(ti||(ti={}));var sR=(function(){function i(){this.state=ti.NOT_STARTED,this.onGoingTransactionNewState=ti.UNKNOWN}return i.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},i.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},i.prototype.execute=function(){if(this.onGoingTransactionNewState===ti.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=ti.UNKNOWN,this.directTransition(e)},i.prototype.cancel=function(){if(this.onGoingTransactionNewState===ti.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=ti.UNKNOWN},i.prototype.getState=function(){return this.state},i.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==ti.UNKNOWN)throw"Cannot transition to a new state, already under transition"},i.prototype.validateTransition=function(e){switch(this.state){case ti.UNKNOWN:throw"Transition from unknown is not allowed";case ti.NOT_STARTED:this.failIfNewStateIs(e,[ti.PAUSED]);break;case ti.SCANNING:break;case ti.PAUSED:break}},i.prototype.failIfNewStateIs=function(e,n){for(var o=0,u=n;o<u.length;o++){var d=u[o];if(e===d)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},i})(),aR=(function(){function i(e){this.stateManager=e}return i.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},i.prototype.directTransition=function(e){this.stateManager.directTransition(e)},i.prototype.getState=function(){return this.stateManager.getState()},i.prototype.canScanFile=function(){return this.stateManager.getState()===ti.NOT_STARTED},i.prototype.isScanning=function(){return this.stateManager.getState()!==ti.NOT_STARTED},i.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===ti.SCANNING},i.prototype.isPaused=function(){return this.stateManager.getState()===ti.PAUSED},i})(),oR=(function(){function i(){}return i.create=function(){return new aR(new sR)},i})(),lR=(function(){var i=function(e,n){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,u){o.__proto__=u}||function(o,u){for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(o[d]=u[d])},i(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");i(e,n);function o(){this.constructor=e}e.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),Gr=(function(i){lR(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e})(V8),cR=(function(){function i(e,n){this.logger=n,this.fps=Gr.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Gr.DEFAULT_DISABLE_FLIP}return i.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Yw.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},i.prototype.isShadedBoxEnabled=function(){return!xa(this.qrbox)},i.create=function(e,n){return new i(e,n)},i})(),uR=(function(){function i(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var o;typeof n=="boolean"?this.verbose=n===!0:n&&(o=n,this.verbose=o.verbose===!0,o.experimentalFeatures),this.logger=new F8(this.verbose),this.qrcode=new K8(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(o),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=oR.create()}return i.prototype.start=function(e,n,o,u){var d=this;if(!e)throw"cameraIdOrConfig is required";if(!o||typeof o!="function")throw"qrCodeSuccessCallback is required and should be a function.";var y;u?y=u:y=this.verbose?this.logger.log:function(){};var v=cR.create(n,this.logger);this.clearElement();var b=!1;v.videoConstraints&&(v.isMediaStreamConstraintsValid()?b=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var _=b,C=document.getElementById(this.elementId);C.clientWidth?C.clientWidth:Gr.DEFAULT_WIDTH,C.style.position="relative",this.shouldScan=!0,this.element=C;var I=this,L=this.stateManagerProxy.startTransition(ti.SCANNING);return new Promise(function(B,q){var K=_?v.videoConstraints:I.createVideoConstraints(e);if(!K){L.cancel(),q("videoConstraints should be defined");return}var Y={};(!_||v.aspectRatio)&&(Y.aspectRatio=v.aspectRatio);var ae={onRenderSurfaceReady:function(me,$){I.setupUi(me,$,v),I.isScanning=!0,I.foreverScan(v,o,y)}};tR.failIfNotSupported().then(function(me){me.create(K).then(function($){return $.render(d.element,Y,ae).then(function(_e){I.renderedCamera=_e,L.execute(),B(null)}).catch(function(_e){L.cancel(),q(_e)})}).catch(function($){L.cancel(),q(Fl.errorGettingUserMedia($))})}).catch(function(me){L.cancel(),q(Fl.cameraStreamingNotSupported())})})},i.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(ti.PAUSED),this.showPausedState(),(xa(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},i.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(ti.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},i.prototype.getState=function(){return this.stateManagerProxy.getState()},i.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(ti.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var o=function(){if(e.element){var d=document.getElementById(Gr.SHADED_REGION_ELEMENT_ID);d&&e.element.removeChild(d)}},u=this;return this.renderedCamera.close().then(function(){return u.renderedCamera=null,u.element&&(u.element.removeChild(u.canvasElement),u.canvasElement=null),o(),u.qrRegion&&(u.qrRegion=null),u.context&&(u.context=null),n.execute(),u.hidePausedState(),u.isScanning=!1,Promise.resolve()})},i.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(o){return o.decodedText})},i.prototype.scanFileV2=function(e,n){var o=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(xa(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(u,d){o.possiblyCloseLastScanImageFile(),o.clearElement(),o.lastScanImageFile=URL.createObjectURL(e);var y=new Image;y.onload=function(){var v=y.width,b=y.height,_=document.getElementById(o.elementId),C=_.clientWidth?_.clientWidth:Gr.DEFAULT_WIDTH,I=Math.max(_.clientHeight?_.clientHeight:b,Gr.FILE_SCAN_MIN_HEIGHT),L=o.computeCanvasDrawConfig(v,b,C,I);if(n){var B=o.createCanvasElement(C,I,"qr-canvas-visible");B.style.display="inline-block",_.appendChild(B);var q=B.getContext("2d");if(!q)throw"Unable to get 2d context from canvas";q.canvas.width=C,q.canvas.height=I,q.drawImage(y,0,0,v,b,L.x,L.y,L.width,L.height)}var K=Gr.FILE_SCAN_HIDDEN_CANVAS_PADDING,Y=Math.max(y.width,L.width),ae=Math.max(y.height,L.height),me=Y+2*K,$=ae+2*K,_e=o.createCanvasElement(me,$);_.appendChild(_e);var je=_e.getContext("2d");if(!je)throw"Unable to get 2d context from canvas";je.canvas.width=me,je.canvas.height=$,je.drawImage(y,0,0,v,b,K,K,Y,ae);try{o.qrcode.decodeRobustlyAsync(_e).then(function(De){u(PE.createFromQrcodeResult(De))}).catch(d)}catch(De){d("QR code parse error, error = ".concat(De))}},y.onerror=d,y.onabort=d,y.onstalled=d,y.onsuspend=d,y.src=URL.createObjectURL(e)})},i.prototype.clear=function(){this.clearElement()},i.getCameras=function(){return rR.retrieve()},i.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},i.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},i.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},i.prototype.applyVideoConstraints=function(e){if(e){if(!Yw.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},i.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},i.prototype.getSupportedFormats=function(e){var n=[Ge.QR_CODE,Ge.AZTEC,Ge.CODABAR,Ge.CODE_39,Ge.CODE_93,Ge.CODE_128,Ge.DATA_MATRIX,Ge.MAXICODE,Ge.ITF,Ge.EAN_13,Ge.EAN_8,Ge.PDF_417,Ge.RSS_14,Ge.RSS_EXPANDED,Ge.UPC_A,Ge.UPC_E,Ge.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var o=[],u=0,d=e.formatsToSupport;u<d.length;u++){var y=d[u];U8(y)?o.push(y):this.logger.warn("Invalid format: ".concat(y," passed in config, ignoring."))}if(o.length===0)throw"None of formatsToSupport match supported values.";return o},i.prototype.getUseBarCodeDetectorIfSupported=function(e){if(xa(e))return!0;if(!xa(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(xa(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return xa(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},i.prototype.validateQrboxSize=function(e,n,o){var u=this,d=o.qrbox;this.validateQrboxConfig(d);var y=this.toQrdimensions(e,n,d),v=function(_){if(_<Gr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Gr.MIN_QR_BOX_SIZE,"px.")},b=function(_){return _>e&&(u.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),_=e),_};v(y.width),v(y.height),y.width=b(y.width)},i.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},i.prototype.toQrdimensions=function(e,n,o){if(typeof o=="number")return{width:o,height:o};if(typeof o=="function")try{return o(e,n)}catch(u){throw new Error("qrbox config was passed as a function but it failed with unknown error"+u)}return o},i.prototype.setupUi=function(e,n,o){o.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,o);var u=xa(o.qrbox)?{width:e,height:n}:o.qrbox;this.validateQrboxConfig(u);var d=this.toQrdimensions(e,n,u);d.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var y=o.isShadedBoxEnabled()&&d.height<=n,v={x:0,y:0,width:e,height:n},b=y?this.getShadedRegionBounds(e,n,d):v,_=this.createCanvasElement(b.width,b.height),C={willReadFrequently:!0},I=_.getContext("2d",C);I.canvas.width=b.width,I.canvas.height=b.height,this.element.append(_),y&&this.possiblyInsertShadingElement(this.element,e,n,d),this.createScannerPausedUiElement(this.element),this.qrRegion=b,this.context=I,this.canvasElement=_},i.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=Fl.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},i.prototype.scanContext=function(e,n){var o=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(u){return e(u.text,PE.createFromQrcodeResult(u)),o.possiblyUpdateShaders(!0),!0}).catch(function(u){o.possiblyUpdateShaders(!1);var d=Fl.codeParseError(u);return n(d,j8.createFrom(d)),!1})},i.prototype.foreverScan=function(e,n,o){var u=this;if(this.shouldScan&&this.renderedCamera){var d=this.renderedCamera.getSurface(),y=d.videoWidth/d.clientWidth,v=d.videoHeight/d.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var b=this.qrRegion.width*y,_=this.qrRegion.height*v,C=this.qrRegion.x*y,I=this.qrRegion.y*v;this.context.drawImage(d,C,I,b,_,0,0,this.qrRegion.width,this.qrRegion.height);var L=function(){u.foreverScanTimeout=setTimeout(function(){u.foreverScan(e,n,o)},u.getTimeoutFps(e.fps))};this.scanContext(n,o).then(function(B){!B&&e.disableFlip!==!0?(u.context.translate(u.context.canvas.width,0),u.context.scale(-1,1),u.scanContext(n,o).finally(function(){L()})):L()}).catch(function(B){u.logger.logError("Error happend while scanning context",B),L()})}},i.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",o="deviceId",u={user:!0,environment:!0},d="exact",y=function(q){if(q in u)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(q,"'")},v=Object.keys(e);if(v.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(v.length," keys");var b=Object.keys(e)[0];if(b!==n&&b!==o)throw"Only '".concat(n,"' and '").concat(o,"' ")+" are supported for 'cameraIdOrConfig'";if(b===n){var _=e.facingMode;if(typeof _=="string"){if(y(_))return{facingMode:_}}else if(typeof _=="object")if(d in _){if(y(_["".concat(d)]))return{facingMode:{exact:_["".concat(d)]}}}else throw"'facingMode' should be string or object with"+" ".concat(d," as key.");else{var C=typeof _;throw"Invalid type of 'facingMode' = ".concat(C)}}else{var I=e.deviceId;if(typeof I=="string")return{deviceId:I};if(typeof I=="object"){if(d in I)return{deviceId:{exact:I["".concat(d)]}};throw"'deviceId' should be string or object with"+" ".concat(d," as key.")}else{var L=typeof I;throw"Invalid type of 'deviceId' = ".concat(L)}}}var B=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(B)},i.prototype.computeCanvasDrawConfig=function(e,n,o,u){if(e<=o&&n<=u){var d=(o-e)/2,y=(u-n)/2;return{x:d,y,width:e,height:n}}else{var v=e,b=n;return e>o&&(n=o/e*n,e=o),n>u&&(e=u/n*e,n=u),this.logger.log("Image downsampled from "+"".concat(v,"X").concat(b)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,o,u)}},i.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},i.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?Gr.BORDER_SHADER_MATCH_COLOR:Gr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},i.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},i.prototype.createCanvasElement=function(e,n,o){var u=e,d=n,y=document.createElement("canvas");return y.style.width="".concat(u,"px"),y.style.height="".concat(d,"px"),y.style.display="none",y.id=xa(o)?"qr-canvas":o,y},i.prototype.getShadedRegionBounds=function(e,n,o){if(o.width>e||o.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-o.width)/2,y:(n-o.height)/2,width:o.width,height:o.height}},i.prototype.possiblyInsertShadingElement=function(e,n,o,u){if(!(n-u.width<1||o-u.height<1)){var d=document.createElement("div");d.style.position="absolute";var y=(n-u.width)/2,v=(o-u.height)/2;if(d.style.borderLeft="".concat(y,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderRight="".concat(y,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderTop="".concat(v,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderBottom="".concat(v,"px solid rgba(0, 0, 0, 0.48)"),d.style.boxSizing="border-box",d.style.top="0px",d.style.bottom="0px",d.style.left="0px",d.style.right="0px",d.id="".concat(Gr.SHADED_REGION_ELEMENT_ID),n-u.width<11||o-u.height<11)this.hasBorderShaders=!1;else{var b=5,_=40;this.insertShaderBorders(d,_,b,-b,null,0,!0),this.insertShaderBorders(d,_,b,-b,null,0,!1),this.insertShaderBorders(d,_,b,null,-b,0,!0),this.insertShaderBorders(d,_,b,null,-b,0,!1),this.insertShaderBorders(d,b,_+b,-b,null,-b,!0),this.insertShaderBorders(d,b,_+b,null,-b,-b,!0),this.insertShaderBorders(d,b,_+b,-b,null,-b,!1),this.insertShaderBorders(d,b,_+b,null,-b,-b,!1),this.hasBorderShaders=!0}e.append(d)}},i.prototype.insertShaderBorders=function(e,n,o,u,d,y,v){var b=document.createElement("div");b.style.position="absolute",b.style.backgroundColor=Gr.BORDER_SHADER_DEFAULT_COLOR,b.style.width="".concat(n,"px"),b.style.height="".concat(o,"px"),u!==null&&(b.style.top="".concat(u,"px")),d!==null&&(b.style.bottom="".concat(d,"px")),v?b.style.left="".concat(y,"px"):b.style.right="".concat(y,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(b),e.appendChild(b)},i.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},i.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},i.prototype.getTimeoutFps=function(e){return 1e3/e},i})(),HE;(function(i){i[i.STATUS_DEFAULT=0]="STATUS_DEFAULT",i[i.STATUS_SUCCESS=1]="STATUS_SUCCESS",i[i.STATUS_WARNING=2]="STATUS_WARNING",i[i.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(HE||(HE={}));const hR=({onRefresh:i})=>{var Xr;const{showAlert:e}=bu(),[n,o]=se.useState("roster"),[u,d]=se.useState(!1),[y,v]=se.useState([]),[b,_]=se.useState([]),[C,I]=se.useState([]),[L,B]=se.useState([]),[q,K]=se.useState([]),[Y,ae]=se.useState([]),[me,$]=se.useState([]),[_e,je]=se.useState([]),[De,j]=se.useState(""),[H,V]=se.useState(new Date().toISOString().substring(0,7)),[ne,W]=se.useState([]),[Z,X]=se.useState(""),[We,he]=se.useState(null),pe=ni.useRef(y);ni.useEffect(()=>{pe.current=y},[y]);const[be,qe]=se.useState(""),[ot,gt]=se.useState(""),[ie,we]=se.useState("normal"),[ke,Ve]=se.useState(""),[tt,Le]=se.useState(!1),[ct,yt]=se.useState(""),[Kt,zi]=se.useState("100"),[bn,gr]=se.useState(""),[Et,ci]=se.useState(""),[Qn,Hi]=se.useState(!1),[mn,Gt]=se.useState(""),[Qe,En]=se.useState(""),[Fe,xs]=se.useState(""),[tr,hn]=se.useState(""),[mr,ui]=se.useState(""),[ys,ri]=se.useState(!1),[Fn,Cs]=se.useState(""),[Yr,Sa]=se.useState(!1);se.useEffect(()=>{const ee=V6(wt=>{_(wt.filter(fi=>fi.role===hs.STUDENT&&fi.isApproved)),I(wt.filter(fi=>fi.role===hs.STUDENT&&!fi.isApproved));const hi=wt.filter(fi=>fi.role===hs.STUDENT&&fi.isApproved);hi.length>0&&!ct&&yt(hi[0].id)}),ht=hw(v),nt=cw(B),In=lw(K),en=P6(ae),Ue=uw($),Hn=aw(je),Tn=rw(wt=>{W(wt),wt.length>0&&!tr&&hn(wt[0].name)});return()=>{ee(),ht(),nt(),In(),en(),Ue(),Hn(),Tn()}},[ct,tr]),se.useEffect(()=>{let ee=null;return(async()=>{if(n==="scan")try{ee=new uR("reader"),await ee.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250},aspectRatio:1},nt=>{nt&&Wt(nt)},()=>{})}catch(nt){console.error("Unable to start scanner",nt)}})(),()=>{ee&&ee.isScanning&&ee.stop().then(()=>{ee==null||ee.clear()}).catch(nt=>console.error("Failed to stop scanner",nt))}},[n]);const Wt=ee=>{if(We)return;const ht=pe.current.find(nt=>nt.qrCodeData===ee&&nt.status==="pending");ht&&he(ht)},Oe=async ee=>{const ht=Z;if(!ht){e("","error");return}d(!0),setTimeout(()=>{const nt=y.find(In=>In.qrCodeData===ht&&In.status==="pending");nt?(he(nt),X("")):e("","error"),d(!1)},800)},qt=async ee=>{We&&(await y6(ee,"completed"),he(null),e("","success"))},rt=async()=>{const ee=parseInt(Kt);if(isNaN(ee)||!ct)return;const ht=b.find(en=>en.id===ct);if(!ht){e("","error");return}const nt=parseInt(Kt);if(isNaN(nt)||nt<=0){e("","error");return}const In=b.map(en=>en.id===ct?{...en,points:en.points+ee,totalEarned:ee>0?en.totalEarned+ee:en.totalEarned}:en);await f6(In),i(),_(en=>en.map(Ue=>Ue.id===ct?{...Ue,points:Ue.points+nt}:Ue)),zi(""),e(` ${ht.name} ${nt} `,"success")},fn=async ee=>{await g6(ee),e("","success")},pr=async ee=>{confirm("/")&&await m6(ee)},Ss=async ee=>{if(ee.preventDefault(),!mn||!Qe||!Fe){e("","error");return}if(mn&&Qe){const ht={id:`prod_${Date.now()}`,name:mn,category:tr,price:parseInt(Qe),description:`${tr==="food"?"":tr==="electronic"?"":tr==="ticket"?"":""}`,imageUrl:mr||"https://images.unsplash.com/photo-1553456558-aff63285bdd1?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3",stock:parseInt(Fe)||99};await O6(ht),ri(!1),Gt(""),En(""),xs(""),ui(""),hn("other"),e("","success")}},nr=async ee=>{window.confirm("")&&await D6(ee)},At=async ee=>{if(ee.preventDefault(),!be||!ot){e("","error");return}const ht={id:`m_${Date.now()}`,title:be,description:"",points:parseInt(ot),type:ie,isActive:!0,maxAttempts:1,deadline:ke?new Date(ke).getTime():void 0};await b6(ht),Le(!1),qe(""),gt(""),we("normal"),Ve(""),e("","success")},an=async ee=>{window.confirm("")&&e("","success")},ir=async()=>{if(!Et){e("","error");return}await M6({id:`r_${Date.now()}`,title:Et}),ci(""),Hi(!1),e("","success")},rr=async ee=>{await L6(ee)},Sn=async ee=>{await T6(ee)},Gs=async(ee,ht)=>{await ow(ee,ht),e("","success")},zn=async ee=>{await I6(ee),e("","success")},_i=async ee=>{confirm("")&&await N6(ee)},xr=y.filter(ee=>{var Ue,Hn;const ht=(((Ue=ee.productName)==null?void 0:Ue.toLowerCase())||"").includes(De.toLowerCase())||(((Hn=ee.id)==null?void 0:Hn.toLowerCase())||"").includes(De.toLowerCase()),nt=new Date(ee.timestamp),en=`${nt.getFullYear()}-${String(nt.getMonth()+1).padStart(2,"0")}`===H;return ht&&en}),Gi=ee=>Wo.reduce((ht,nt)=>ee>=nt.threshold?nt:ht,Wo[0]);return S.jsxs("div",{className:"space-y-8 pb-20 animate-in fade-in duration-500",children:[S.jsx("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:S.jsxs("div",{children:[S.jsxs("h1",{className:"text-4xl font-black text-slate-800 flex items-center gap-4",children:[S.jsx("div",{className:"bg-indigo-600 p-3 rounded-2xl text-white shadow-xl shadow-indigo-100",children:S.jsx(ef,{size:32})}),""]}),S.jsx("p",{className:"text-slate-500 mt-2 italic font-medium",children:""})]})}),S.jsxs("div",{className:"flex bg-white p-2 rounded-3xl border border-slate-100 shadow-md overflow-x-auto gap-2",children:[S.jsxs("button",{onClick:()=>o("roster"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${n==="roster"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[S.jsx(hC,{size:18})," ",S.jsx("span",{children:""})]}),S.jsxs("button",{onClick:()=>o("approval"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${n==="approval"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50 relative"}`,children:[S.jsx(h1,{size:18})," ",S.jsx("span",{children:""}),C.length>0&&S.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full text-white text-[10px] flex items-center justify-center border-2 border-white",children:C.length})]}),S.jsxs("button",{onClick:()=>o("points"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${n==="points"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[S.jsx(wv,{size:18})," ",S.jsx("span",{children:""})]}),S.jsxs("button",{onClick:()=>o("products"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${n==="products"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[S.jsx(c1,{size:18})," ",S.jsx("span",{children:""})]}),S.jsxs("button",{onClick:()=>o("mission_approval"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${n==="mission_approval"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50 relative"}`,children:[S.jsx(Zh,{size:18})," ",S.jsx("span",{children:""}),_e.filter(ee=>ee.status==="pending").length>0&&S.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-pink-500 rounded-full text-white text-[10px] flex items-center justify-center border-2 border-white",children:_e.filter(ee=>ee.status==="pending").length})]}),S.jsxs("button",{onClick:()=>o("scan"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${n==="scan"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[S.jsx(ax,{size:18})," ",S.jsx("span",{children:""})]}),S.jsxs("button",{onClick:()=>o("history"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${n==="history"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[S.jsx($h,{size:18})," ",S.jsx("span",{children:""})]}),S.jsxs("button",{onClick:()=>o("missions"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${n==="missions"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[S.jsx(Wc,{size:18})," ",S.jsx("span",{children:""})]}),S.jsxs("button",{onClick:()=>o("wishes"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${n==="wishes"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50 relative"}`,children:[S.jsx(zh,{size:18})," ",S.jsx("span",{children:""}),me.length>0&&S.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-pink-500 rounded-full text-white text-[10px] flex items-center justify-center border-2 border-white",children:me.length})]})]}),n==="roster"&&S.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 animate-in slide-in-from-bottom-4",children:b.map(ee=>{const ht=Gi(ee.totalEarned);return S.jsxs("div",{className:"bg-white rounded-[2.5rem] p-8 border border-slate-100 shadow-sm hover:shadow-xl transition-all group overflow-hidden relative",children:[S.jsx("div",{className:`absolute top-0 right-0 w-24 h-24 ${ht.color} opacity-5 -translate-y-12 translate-x-12 rounded-full`}),S.jsxs("div",{className:"flex flex-col items-center text-center",children:[S.jsxs("div",{className:"relative mb-6",children:[S.jsx("div",{className:`absolute inset-0 rounded-full blur-xl opacity-20 ${ht.color}`}),S.jsx("img",{src:ee.avatar,className:"w-24 h-24 rounded-full border-4 border-white shadow-2xl relative z-10 object-cover",alt:ee.name}),S.jsx("div",{className:"absolute -bottom-2 -right-2 w-10 h-10 rounded-2xl bg-white shadow-lg flex items-center justify-center text-xl z-20 border border-slate-50",children:ht.icon})]}),S.jsx("h3",{className:"text-2xl font-black text-slate-800 mb-1",children:ee.name}),S.jsx("div",{className:`px-4 py-1 rounded-full text-[10px] font-black text-white uppercase tracking-widest mb-6 ${ht.color} shadow-sm`,children:ht.name}),S.jsxs("div",{className:"w-full grid grid-cols-2 gap-4",children:[S.jsxs("div",{className:"bg-indigo-50/50 p-4 rounded-2xl border border-indigo-50",children:[S.jsx("p",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest mb-1",children:""}),S.jsx("p",{className:"text-xl font-black text-indigo-600",children:ee.points.toLocaleString()})]}),S.jsxs("div",{className:"bg-amber-50/50 p-4 rounded-2xl border border-amber-50",children:[S.jsx("p",{className:"text-[10px] font-black text-amber-400 uppercase tracking-widest mb-1",children:""}),S.jsx("p",{className:"text-xl font-black text-amber-600",children:ee.totalEarned.toLocaleString()})]})]})]}),S.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-50 flex justify-between items-center",children:[S.jsxs("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-tighter",children:["ID: ",ee.id.replace("user_","")]}),S.jsxs("button",{onClick:()=>{yt(ee.id),o("points")},className:"text-indigo-600 font-black text-xs hover:underline flex items-center gap-1",children:[S.jsx(ox,{size:14})," "]})]})]},ee.id)})}),n==="points"&&S.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[S.jsxs("div",{className:"flex items-center gap-6 mb-12",children:[S.jsx("div",{className:"w-20 h-20 bg-emerald-50 text-emerald-600 rounded-3xl flex items-center justify-center shadow-inner",children:S.jsx(ox,{size:40})}),S.jsxs("div",{children:[S.jsx("h2",{className:"text-3xl font-black text-slate-800 tracking-tight",children:""}),S.jsx("p",{className:"text-slate-400 font-medium",children:""})]})]}),S.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16",children:[S.jsxs("div",{className:"space-y-8",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-[0.2em] mb-4",children:""}),S.jsx("div",{className:"grid grid-cols-3 gap-4",children:b.map(ee=>S.jsxs("button",{onClick:()=>yt(ee.id),className:`flex flex-col items-center gap-3 p-4 rounded-3xl border-2 transition-all ${ct===ee.id?"border-indigo-600 bg-indigo-50 shadow-lg shadow-indigo-100":"border-slate-50 bg-slate-50/50 hover:bg-white hover:border-slate-200"}`,children:[S.jsx("img",{src:ee.avatar,className:"w-12 h-12 rounded-full shadow-sm",alt:ee.name}),S.jsx("span",{className:`font-black text-sm ${ct===ee.id?"text-indigo-600":"text-slate-600"}`,children:ee.name})]},ee.id))})]}),S.jsxs("div",{children:[S.jsxs("div",{className:"flex items-center justify-between mb-4",children:[S.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),S.jsxs("button",{onClick:()=>Hi(!Qn),className:"text-xs font-black text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:[Qn?S.jsx(Yo,{size:14}):S.jsx(zc,{size:14}),Qn?"":""]})]}),Qn?S.jsxs("div",{className:"bg-slate-50 p-6 rounded-2xl border-2 border-indigo-100 mb-4 animate-in zoom-in-95 duration-200",children:[S.jsxs("div",{className:"flex gap-2",children:[S.jsx("input",{type:"text",placeholder:" (: )",value:Et,onChange:ee=>ci(ee.target.value),className:"flex-1 p-3 border-2 border-slate-200 rounded-xl focus:border-indigo-600 outline-none font-bold"}),S.jsx("button",{onClick:ir,className:"bg-indigo-600 text-white p-3 rounded-xl hover:bg-indigo-700 shadow-md",children:S.jsx(zc,{size:20})})]}),S.jsx("div",{className:"mt-4 space-y-2 max-h-40 overflow-y-auto pr-2",children:Y.map(ee=>S.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg border border-slate-100",children:[S.jsx("span",{className:"font-bold text-sm text-slate-700",children:ee.title}),S.jsx("button",{onClick:()=>rr(ee.id),className:"text-rose-500 hover:text-rose-600",children:S.jsx(K0,{size:16})})]},ee.id))})]}):S.jsxs("select",{value:bn,onChange:ee=>gr(ee.target.value),className:"w-full p-5 bg-slate-50 border-2 border-transparent rounded-2xl focus:bg-white focus:border-indigo-600 focus:ring-4 focus:ring-indigo-100 transition-all outline-none font-bold text-slate-700 shadow-inner",children:[S.jsx("option",{value:"",children:"..."}),Y.length>0?Y.map(ee=>S.jsx("option",{value:ee.title,children:ee.title},ee.id)):S.jsxs(S.Fragment,{children:[S.jsx("option",{children:""}),S.jsx("option",{children:""}),S.jsx("option",{children:" A++"}),S.jsx("option",{children:""})]}),S.jsx("option",{value:"other",children:""})]}),bn==="other"&&!Qn&&S.jsx("input",{type:"text",placeholder:"...",value:bn==="other"?"":bn,onChange:ee=>gr(ee.target.value),className:"w-full mt-4 p-5 bg-white border-2 border-indigo-200 rounded-2xl outline-none font-bold text-slate-700"})]})]}),S.jsxs("div",{className:"space-y-8",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-[0.2em] mb-4",children:""}),S.jsxs("div",{className:"relative",children:[S.jsx("input",{type:"number",value:Kt,onChange:ee=>zi(ee.target.value),className:"w-full p-8 text-5xl font-black bg-slate-50 border-2 border-transparent rounded-[2rem] focus:bg-white focus:border-indigo-600 focus:ring-4 focus:ring-indigo-100 transition-all outline-none text-indigo-600 shadow-inner"}),S.jsx("div",{className:"absolute right-8 top-1/2 -translate-y-1/2 flex items-center gap-2 pointer-events-none",children:S.jsx("span",{className:"font-black text-slate-300 text-2xl uppercase tracking-tighter",children:"PTS"})})]})]}),S.jsxs("button",{onClick:rt,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white font-black py-8 rounded-[2rem] transition-all shadow-2xl shadow-emerald-200 flex items-center justify-center gap-4 text-2xl active:scale-95 group",children:[S.jsx(Fc,{size:32,className:"group-hover:scale-125 transition-transform"}),""]})]})]})]}),n==="approval"&&S.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[S.jsxs("h2",{className:"text-3xl font-black text-slate-800 mb-8 flex items-center gap-3",children:[S.jsx(h1,{className:"text-indigo-600"}),"",S.jsxs("span",{className:"bg-indigo-100 text-indigo-600 text-sm px-3 py-1 rounded-full",children:[C.length," "]})]}),S.jsx("div",{className:"space-y-4",children:C.length===0?S.jsx("div",{className:"text-center py-20 text-slate-400 font-bold",children:""}):C.map(ee=>S.jsxs("div",{className:"flex items-center justify-between p-6 bg-slate-50 rounded-2xl border border-slate-100",children:[S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx("div",{className:"w-12 h-12 bg-indigo-200 rounded-full flex items-center justify-center text-indigo-700 font-bold text-xl",children:ee.name[0]}),S.jsxs("div",{children:[S.jsx("h3",{className:"font-black text-lg text-slate-800",children:ee.name}),S.jsx("p",{className:"text-slate-500 text-sm font-bold",children:ee.grade||""})]})]}),S.jsxs("div",{className:"flex gap-3",children:[S.jsx("button",{onClick:()=>fn(ee.id),className:"bg-emerald-500 hover:bg-emerald-600 text-white px-6 py-2 rounded-xl font-bold transition-all shadow-lg shadow-emerald-100",children:""}),S.jsx("button",{onClick:()=>pr(ee.id),className:"bg-slate-200 hover:bg-rose-500 hover:text-white text-slate-500 px-6 py-2 rounded-xl font-bold transition-all",children:""})]})]},ee.id))})]}),n==="products"&&S.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[S.jsxs("div",{className:"flex justify-between items-center mb-8",children:[S.jsxs("h2",{className:"text-3xl font-black text-slate-800 flex items-center gap-3",children:[S.jsx(c1,{className:"text-indigo-600"})," "]}),S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsxs("button",{onClick:()=>Sa(!Yr),className:"bg-slate-100 text-slate-600 px-5 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-slate-200 transition-all border border-slate-200",children:[S.jsx(Wc,{size:18})," "]}),S.jsxs("button",{onClick:()=>ri(!ys),className:"bg-indigo-600 text-white px-5 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100",children:[S.jsx(zc,{size:20})," "]})]})]}),Yr&&S.jsxs("div",{className:"bg-slate-50 p-6 rounded-2xl mb-8 border border-slate-200 animate-in fade-in",children:[S.jsx("h3",{className:"font-black text-slate-700 mb-4",children:""}),S.jsxs("div",{className:"flex gap-4 mb-6",children:[S.jsx("input",{placeholder:" (: )",value:Fn,onChange:ee=>Cs(ee.target.value),className:"flex-1 p-3 rounded-xl border border-slate-200 font-bold outline-none"}),S.jsx("button",{onClick:()=>{Fn&&(E6(Fn),Cs(""))},className:"bg-emerald-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-emerald-700",children:""})]}),S.jsx("div",{className:"flex flex-wrap gap-3",children:ne.map(ee=>S.jsxs("div",{className:"bg-white px-4 py-2 rounded-xl border border-slate-200 flex items-center gap-2 shadow-sm font-bold text-slate-600",children:[ee.name,S.jsx("button",{onClick:()=>_6(ee.id),className:"text-slate-300 hover:text-rose-500",children:S.jsx(Yo,{size:14})})]},ee.id))})]}),ys&&S.jsxs("form",{onSubmit:Ss,className:"bg-slate-50 p-6 rounded-2xl mb-8 border border-slate-200 animate-in fade-in",children:[S.jsx("h3",{className:"font-black text-slate-700 mb-4",children:""}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[S.jsx("input",{placeholder:"",value:mn,onChange:ee=>Gt(ee.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"}),S.jsxs("select",{value:tr,onChange:ee=>hn(ee.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500",children:[ne.map(ee=>S.jsx("option",{value:ee.name,children:ee.name},ee.id)),ne.length===0&&S.jsx("option",{value:"",children:""})]}),S.jsx("input",{placeholder:" ()",value:mr,onChange:ee=>ui(ee.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"}),S.jsx("input",{placeholder:" ()",type:"number",value:Qe,onChange:ee=>En(ee.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"}),S.jsx("input",{placeholder:"",type:"number",value:Fe,onChange:ee=>xs(ee.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"})]}),S.jsxs("div",{className:"flex justify-end gap-2",children:[S.jsx("button",{type:"button",onClick:()=>ri(!1),className:"px-4 py-2 text-slate-400 font-bold hover:text-slate-600",children:""}),S.jsx("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700",children:""})]})]}),S.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:L.map(ee=>S.jsxs("div",{className:"border border-slate-100 rounded-[2rem] p-6 flex flex-col gap-4 group hover:shadow-xl transition-all bg-white relative",children:[S.jsxs("div",{className:"flex gap-4 items-center",children:[S.jsx("img",{src:ee.imageUrl,alt:ee.name,className:"w-20 h-20 rounded-2xl object-cover shadow-sm"}),S.jsxs("div",{className:"flex-1",children:[S.jsx("h4",{className:"font-black text-slate-800 text-lg",children:ee.name}),S.jsx("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest",children:ee.category}),S.jsxs("p",{className:"text-indigo-600 font-black",children:[ee.price," PTS"]})]}),S.jsx("button",{onClick:()=>nr(ee.id),className:"p-2 text-slate-300 hover:text-rose-500 transition-colors",children:S.jsx(K0,{size:18})})]}),S.jsx("div",{className:"flex items-center justify-between pt-4 border-t border-slate-50",children:S.jsxs("div",{className:"flex flex-col",children:[S.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter mb-1",children:""}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("input",{type:"number",defaultValue:ee.stock,onBlur:ht=>Gs(ee.id,parseInt(ht.target.value)||0),className:"w-16 p-2 bg-slate-50 border border-slate-200 rounded-lg text-sm font-black text-slate-700 outline-none focus:ring-2 focus:ring-indigo-500"}),S.jsx("span",{className:`text-[10px] font-black px-2 py-1 rounded-lg ${ee.stock>0?"bg-emerald-100 text-emerald-600":"bg-red-100 text-red-600"}`,children:ee.stock>0?"ON SALE":"SOLD OUT"})]})]})})]},ee.id))})]}),n==="mission_approval"&&S.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[S.jsxs("h2",{className:"text-3xl font-black text-slate-800 mb-8 flex items-center gap-3",children:[S.jsx(Zh,{className:"text-emerald-600"}),"",S.jsxs("span",{className:"bg-emerald-100 text-emerald-600 text-sm px-3 py-1 rounded-full",children:[_e.filter(ee=>ee.status==="pending").length," "]})]}),S.jsx("div",{className:"space-y-6",children:_e.filter(ee=>ee.status==="pending").length===0?S.jsx("div",{className:"text-center py-24 text-slate-400 font-bold bg-slate-50 rounded-[3rem] border border-slate-100 border-dashed",children:""}):_e.filter(ee=>ee.status==="pending").map(ee=>S.jsxs("div",{className:"bg-slate-50 p-8 rounded-[2.5rem] border border-slate-100 flex flex-col md:flex-row md:items-center justify-between gap-6",children:[S.jsxs("div",{className:"flex items-center gap-6",children:[S.jsx("div",{className:"w-16 h-16 bg-white rounded-2xl shadow-sm flex items-center justify-center text-2xl font-black text-indigo-600 border border-slate-100",children:ee.userName[0]}),S.jsxs("div",{children:[S.jsx("h3",{className:"text-xl font-black text-slate-800",children:ee.userName}),S.jsxs("p",{className:"text-slate-500 font-bold flex items-center gap-2",children:["",S.jsxs("span",{className:"text-indigo-600",children:["",ee.missionTitle,""]})]}),S.jsxs("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest mt-2",children:["",ee.points," PTS  ",new Date(ee.timestamp).toLocaleString()]})]})]}),S.jsxs("div",{className:"flex gap-4",children:[S.jsxs("button",{onClick:()=>zn(ee.id),className:"bg-emerald-600 hover:bg-emerald-700 text-white px-8 py-3 rounded-2xl font-black transition-all shadow-xl shadow-emerald-100 flex items-center gap-2",children:[S.jsx(Fc,{size:20})," "]}),S.jsx("button",{onClick:()=>_i(ee.id),className:"bg-white hover:bg-rose-50 text-slate-400 hover:text-rose-600 px-8 py-3 rounded-2xl font-black transition-all border border-slate-200",children:""})]})]},ee.id))})]}),n==="scan"&&S.jsxs("div",{className:"bg-white rounded-[3rem] p-16 border border-slate-100 text-center shadow-xl animate-in fade-in",children:[S.jsx("div",{className:"bg-indigo-50 w-32 h-32 rounded-[2.5rem] flex items-center justify-center mx-auto mb-8 text-indigo-600 shadow-inner",children:S.jsx(ax,{size:56})}),S.jsx("h2",{className:"text-3xl font-black text-slate-800 mb-4 tracking-tight",children:"QR Code "}),S.jsx("p",{className:"text-slate-400 mb-8 font-medium max-w-md mx-auto leading-relaxed",children:" QR Code "}),S.jsx("div",{className:"max-w-md mx-auto mb-8 overflow-hidden rounded-[2rem] border-4 border-indigo-50 shadow-inner",children:S.jsx("div",{id:"reader",className:"w-full"})}),S.jsxs("div",{className:"max-w-md mx-auto mb-8",children:[S.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[S.jsx("div",{className:"h-px bg-slate-200 flex-1"}),S.jsx("span",{className:"text-[10px] font-black text-slate-300 uppercase tracking-widest",children:""}),S.jsx("div",{className:"h-px bg-slate-200 flex-1"})]}),S.jsx("input",{type:"text",placeholder:" QR Code ...",value:Z,onChange:ee=>X(ee.target.value),className:"w-full p-4 bg-slate-50 border-2 border-indigo-50 rounded-2xl focus:bg-white focus:border-indigo-600 outline-none font-mono text-xs text-slate-500 text-center"})]}),S.jsx("button",{onClick:()=>Oe(),disabled:u,className:"bg-indigo-600 hover:bg-indigo-700 disabled:bg-slate-300 text-white px-16 py-6 rounded-[2rem] font-black transition-all shadow-2xl shadow-indigo-200 inline-flex items-center justify-center gap-4 text-xl active:scale-95",children:u?"...":""})]}),n==="history"&&S.jsxs("section",{className:"bg-white rounded-[3rem] border border-slate-100 shadow-xl overflow-hidden animate-in fade-in",children:[S.jsxs("div",{className:"p-10 border-b border-slate-50 flex flex-col md:flex-row md:items-center justify-between gap-6",children:[S.jsxs("h2",{className:"font-black text-2xl text-slate-800 flex items-center gap-3",children:[S.jsx($h,{className:"text-indigo-600"}),""]}),S.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[S.jsx("div",{className:"relative",children:S.jsx("input",{type:"month",value:H,onChange:ee=>V(ee.target.value),className:"pl-5 pr-5 py-4 rounded-2xl bg-slate-50 border-2 border-transparent focus:bg-white focus:border-indigo-600 focus:ring-4 focus:ring-indigo-100 transition-all outline-none text-sm font-bold shadow-inner"})}),S.jsxs("div",{className:"relative",children:[S.jsx(zv,{className:"absolute left-5 top-1/2 -translate-y-1/2 text-slate-400",size:20}),S.jsx("input",{type:"text",placeholder:"...",value:De,onChange:ee=>j(ee.target.value),className:"pl-14 pr-8 py-4 rounded-2xl bg-slate-50 border-2 border-transparent focus:bg-white focus:border-indigo-600 focus:ring-4 focus:ring-indigo-100 transition-all outline-none text-sm w-full md:w-80 shadow-inner font-bold"})]})]})]}),S.jsx("div",{className:"overflow-x-auto",children:S.jsxs("table",{className:"w-full",children:[S.jsx("thead",{className:"bg-slate-50/50",children:S.jsxs("tr",{children:[S.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),S.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),S.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),S.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),S.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),S.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""})]})}),S.jsx("tbody",{className:"divide-y divide-slate-50",children:xr.map(ee=>{var ht;try{return S.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors",children:[S.jsx("td",{className:"px-10 py-6 whitespace-nowrap",children:S.jsx("span",{className:`px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest ${ee.status==="completed"?"bg-emerald-100 text-emerald-700":ee.status==="pending"?"bg-amber-100 text-amber-700":"bg-rose-100 text-rose-700"}`,children:ee.status==="completed"?"":ee.status==="pending"?"":""})}),S.jsx("td",{className:"px-10 py-6 whitespace-nowrap font-black text-slate-800",children:((ht=b.find(nt=>nt.id===ee.userId))==null?void 0:ht.name)||""}),S.jsx("td",{className:"px-10 py-6 whitespace-nowrap font-bold text-slate-600",children:ee.productName}),S.jsxs("td",{className:"px-10 py-6 whitespace-nowrap text-indigo-600 font-black",children:[ee.pointsSpent," PTS"]}),S.jsx("td",{className:"px-10 py-6 whitespace-nowrap text-slate-400 text-sm font-bold",children:ee.timestamp?new Date(ee.timestamp).toLocaleDateString():""}),S.jsx("td",{className:"px-10 py-6 whitespace-nowrap",children:ee.status==="pending"?S.jsx("button",{onClick:()=>qt(ee.id),className:"text-white bg-indigo-600 hover:bg-indigo-700 px-5 py-2.5 rounded-xl text-xs font-black transition-all shadow-xl shadow-indigo-100 active:scale-95",children:""}):S.jsxs("div",{className:"flex items-center gap-2 text-slate-300 font-black text-[10px] tracking-widest",children:[S.jsx(Fc,{size:14})," FINISHED"]})})]},ee.id)}catch(nt){return console.error("Row render error",nt),null}})})]})})]}),n==="missions"&&S.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[S.jsxs("div",{className:"flex justify-between items-center mb-8",children:[S.jsxs("h2",{className:"text-3xl font-black text-slate-800 flex items-center gap-3",children:[S.jsx(Wc,{className:"text-indigo-600"})," "]}),S.jsxs("button",{onClick:()=>Le(!tt),className:"bg-indigo-600 text-white px-5 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100",children:[S.jsx(zc,{size:18})," "]})]}),tt&&S.jsxs("form",{onSubmit:At,className:"bg-slate-50 p-6 rounded-2xl mb-8 border border-slate-200 animate-in fade-in",children:[S.jsx("h3",{className:"font-black text-slate-700 mb-4",children:""}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[S.jsx("input",{placeholder:"",value:be,onChange:ee=>qe(ee.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"}),S.jsx("input",{placeholder:"",type:"number",value:ot,onChange:ee=>gt(ee.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"}),S.jsxs("select",{value:ie,onChange:ee=>we(ee.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500",children:[S.jsx("option",{value:"normal",children:""}),S.jsx("option",{value:"challenge",children:""}),S.jsx("option",{value:"hard",children:""})]}),S.jsxs("div",{className:"flex items-center gap-2 p-3 bg-white rounded-xl border border-slate-200",children:[S.jsx(Jh,{size:18,className:"text-slate-400"}),S.jsx("input",{type:"datetime-local",value:ke,onChange:ee=>Ve(ee.target.value),className:"font-bold outline-none text-slate-600 w-full",placeholder:" ()"})]})]}),S.jsxs("div",{className:"flex justify-end gap-3",children:[S.jsx("button",{type:"button",onClick:()=>Le(!1),className:"px-4 py-2 rounded-xl font-bold text-slate-400 hover:bg-slate-200 transition-all",children:""}),S.jsx("button",{type:"submit",className:"bg-indigo-600 text-white px-6 py-2 rounded-xl font-bold hover:bg-indigo-700 transition-all shadow-lg",children:""})]})]}),S.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[q.length===0&&S.jsx("div",{className:"text-center py-12 text-slate-400 font-bold bg-slate-50 rounded-2xl border border-slate-100 border-dashed",children:""}),q.map(ee=>S.jsxs("div",{className:`flex flex-col md:flex-row md:items-center justify-between p-6 rounded-2xl border transition-all ${ee.isActive?"bg-white border-slate-100 shadow-sm":"bg-slate-50 border-slate-100 opacity-60"}`,children:[S.jsxs("div",{className:"flex items-center gap-4 mb-4 md:mb-0",children:[S.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center font-black text-lg shrink-0 ${ee.type==="normal"?"bg-emerald-100 text-emerald-600":ee.type==="challenge"?"bg-orange-100 text-orange-600":"bg-rose-100 text-rose-600"}`,children:ee.type==="normal"?"N":ee.type==="challenge"?"C":"H"}),S.jsxs("div",{children:[S.jsxs("h3",{className:"font-black text-lg text-slate-800 flex items-center gap-2",children:[ee.title,!ee.isActive&&S.jsx("span",{className:"text-[10px] bg-slate-200 text-slate-500 px-2 py-0.5 rounded-full",children:""})]}),S.jsxs("p",{className:"text-slate-400 text-sm font-bold flex items-center gap-2",children:[S.jsxs("span",{className:"text-indigo-500",children:[ee.points," PTS"]}),"  ",ee.description,ee.deadline&&S.jsxs("span",{className:"flex items-center gap-1 text-amber-500 ml-2",children:[S.jsx(Jh,{size:14})," ",new Date(ee.deadline).toLocaleString()," "]})]})]})]}),S.jsx("button",{onClick:()=>Sn(ee.id),className:`px-4 py-2 rounded-xl font-black text-xs transition-all whitespace-nowrap ${ee.isActive?"bg-rose-50 text-rose-600 hover:bg-rose-100":"bg-emerald-50 text-emerald-600 hover:bg-emerald-100"}`,children:ee.isActive?"":""})]},ee.id))]})]}),n==="wishes"&&S.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[S.jsxs("h2",{className:"text-3xl font-black text-slate-800 mb-8 flex items-center gap-3",children:[S.jsx(zh,{className:"text-pink-500"})," "]}),S.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:me.length===0?S.jsx("div",{className:"col-span-full py-20 text-center text-slate-400 font-bold",children:""}):me.map(ee=>{var ht;return S.jsxs("div",{className:"bg-slate-50 p-6 rounded-[2.5rem] border border-slate-100 relative group",children:[S.jsx("button",{onClick:()=>an(ee.id),className:"absolute top-4 right-4 p-2 bg-white rounded-full text-slate-300 hover:text-rose-500 hover:shadow-md transition-all opacity-0 group-hover:opacity-100",children:S.jsx(K0,{size:18})}),S.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[S.jsx("img",{src:ee.userAvatar,className:"w-12 h-12 rounded-full border-2 border-white shadow-sm",alt:ee.userName}),S.jsxs("div",{children:[S.jsx("h4",{className:"font-black text-slate-800",children:ee.userName}),S.jsx("p",{className:"text-[10px] text-slate-400 font-bold",children:new Date(ee.timestamp).toLocaleString()})]})]}),S.jsxs("h3",{className:"text-xl font-black text-slate-800 mb-2",children:["",ee.itemName]}),S.jsxs("p",{className:"text-slate-500 text-sm mb-6 leading-relaxed italic",children:['"',ee.description,'"']}),S.jsxs("div",{className:"flex items-center gap-2 text-pink-500 font-black text-sm",children:[S.jsx(zh,{size:16,fill:"currentColor"})," ",((ht=ee.likedBy)==null?void 0:ht.length)||0," "]})]},ee.id)})})]}),u&&S.jsxs("div",{className:"fixed inset-0 z-[150] bg-slate-900/95 backdrop-blur-xl flex flex-col items-center justify-center p-8",children:[S.jsxs("div",{className:"relative w-full max-w-lg aspect-square border-8 border-white/5 rounded-[5rem] overflow-hidden shadow-[0_0_100px_rgba(79,70,229,0.3)]",children:[S.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-900 via-indigo-900/20 to-slate-900 flex items-center justify-center",children:S.jsxs("div",{className:"text-center",children:[S.jsx(jv,{size:140,className:"mx-auto mb-10 animate-pulse text-indigo-400"}),S.jsx("p",{className:"text-3xl font-black text-white mb-4 tracking-tight",children:"..."}),S.jsx("p",{className:"text-indigo-300 font-bold tracking-widest uppercase text-xs",children:"AI Computer Vision Active"})]})}),S.jsx("div",{className:"absolute top-0 left-0 w-full h-3 bg-indigo-400 shadow-[0_0_50px_rgba(129,140,248,1)] animate-scan-line"})]}),S.jsxs("button",{onClick:()=>d(!1),className:"mt-16 bg-white/5 hover:bg-white/10 text-white px-12 py-5 rounded-[2rem] font-black transition-all border border-white/10 flex items-center gap-4 text-lg backdrop-blur",children:[S.jsx(Yo,{size:24})," "]}),S.jsx("style",{children:`
            @keyframes scan-line {
              0% { top: 0% }
              100% { top: 100% }
            }
            .animate-scan-line {
              animation: scan-line 3s linear infinite;
            }
          `})]}),We&&S.jsx("div",{className:"fixed inset-0 z-[160] flex items-center justify-center p-4 bg-slate-900/70 backdrop-blur-2xl",children:S.jsxs("div",{className:"bg-white rounded-[4rem] max-w-md w-full p-12 shadow-[0_0_80px_rgba(0,0,0,0.5)] animate-in zoom-in-95 duration-200",children:[S.jsx("div",{className:"bg-emerald-50 w-24 h-24 rounded-[2rem] flex items-center justify-center text-emerald-600 mb-10 mx-auto shadow-inner",children:S.jsx(ef,{size:48})}),S.jsx("h2",{className:"text-3xl font-black text-slate-800 text-center mb-10 tracking-tight",children:""}),S.jsxs("div",{className:"bg-slate-50 rounded-[2.5rem] p-8 space-y-6 mb-12 border border-slate-100 shadow-inner",children:[S.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-slate-200/50",children:[S.jsx("span",{className:"text-slate-400 text-[10px] font-black uppercase tracking-widest",children:""}),S.jsx("span",{className:"font-black text-slate-800 text-xl",children:(Xr=b.find(ee=>ee.id===We.userId))==null?void 0:Xr.name})]}),S.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-slate-200/50",children:[S.jsx("span",{className:"text-slate-400 text-[10px] font-black uppercase tracking-widest",children:""}),S.jsx("span",{className:"font-black text-slate-800 text-xl",children:We.productName})]}),S.jsxs("div",{className:"flex justify-between items-center py-2",children:[S.jsx("span",{className:"text-slate-400 text-[10px] font-black uppercase tracking-widest",children:""}),S.jsxs("span",{className:"font-black text-indigo-600 text-2xl",children:[We.pointsSpent," ",S.jsx("span",{className:"text-xs font-bold text-indigo-400",children:"PTS"})]})]})]}),S.jsxs("div",{className:"flex flex-col gap-4",children:[S.jsxs("button",{onClick:()=>qt(We.id),className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-6 rounded-2xl transition-all shadow-2xl shadow-indigo-100 flex items-center justify-center gap-4 text-xl active:scale-95",children:[S.jsx(Fc,{size:28}),""]}),S.jsx("button",{onClick:()=>he(null),className:"w-full bg-slate-100 text-slate-600 font-bold py-5 rounded-2xl hover:bg-slate-200 transition-all text-lg",children:""})]})]})})]})},fR=({user:i})=>{const{showAlert:e}=bu(),[n,o]=se.useState([]),[u,d]=se.useState(!1),[y,v]=se.useState(""),[b,_]=se.useState("");se.useEffect(()=>{const B=uw(q=>{o(q.sort((K,Y)=>Y.timestamp-K.timestamp))});return()=>B()},[]);const C=async B=>{if(B.preventDefault(),!y.trim()||!b.trim())return;const q={id:`wish_${Date.now()}`,userId:i.id,userName:i.name,userAvatar:i.avatar,itemName:y,description:b,timestamp:Date.now(),likedBy:[]};await k6(q),d(!1),v(""),_(""),e("","success")},I=async(B,q)=>{if(q!=null&&q.includes(i.id)){e("","info");return}await U6(B,i.id)},L=n.some(B=>B.userId===i.id);return S.jsxs("div",{className:"space-y-8 pb-20",children:[S.jsxs("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[S.jsxs("div",{children:[S.jsxs("h1",{className:"text-3xl font-bold text-slate-800 flex items-center gap-3",children:[S.jsx(u1,{className:"text-yellow-500"}),""]}),S.jsx("p",{className:"text-slate-500 mt-1",children:""})]}),S.jsxs("button",{onClick:()=>{L?e("","info"):d(!0)},className:`px-6 py-3 rounded-2xl font-bold shadow-lg flex items-center gap-2 transition-all hover:scale-105 ${L?"bg-slate-200 text-slate-400 cursor-not-allowed":"bg-indigo-600 text-white shadow-indigo-100 hover:bg-indigo-700"}`,children:[S.jsx(zc,{size:20}),S.jsx("span",{children:L?"":""})]})]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[n.map(B=>{var q,K,Y,ae;return S.jsxs("div",{className:"bg-white rounded-[2rem] p-6 border border-slate-100 shadow-sm hover:shadow-md transition-all flex flex-col relative overflow-hidden group",children:[S.jsx("div",{className:"absolute -right-4 -top-4 w-24 h-24 bg-yellow-50 rounded-full blur-2xl group-hover:bg-yellow-100 transition-colors"}),S.jsxs("div",{className:"flex items-center gap-3 mb-4 z-10",children:[S.jsx("img",{src:B.userAvatar,alt:B.userName,className:"w-10 h-10 rounded-full border-2 border-white shadow-sm"}),S.jsxs("div",{children:[S.jsx("p",{className:"text-sm font-bold text-slate-700",children:B.userName}),S.jsx("p",{className:"text-xs text-slate-400",children:new Date(B.timestamp).toLocaleDateString()})]})]}),S.jsx("h3",{className:"text-xl font-black text-slate-800 mb-2 z-10",children:B.itemName}),S.jsx("p",{className:"text-slate-500 text-sm mb-6 flex-1 z-10",children:B.description}),S.jsx("div",{className:"flex items-center justify-between pt-4 border-t border-slate-50 z-10",children:S.jsxs("button",{onClick:()=>I(B.id,B.likedBy),className:`flex items-center gap-2 transition-colors group/like ${(q=B.likedBy)!=null&&q.includes(i.id)?"text-pink-500":"text-slate-400 hover:text-pink-500"}`,children:[S.jsx("div",{className:`p-2 rounded-full transition-colors ${(K=B.likedBy)!=null&&K.includes(i.id)?"bg-pink-50":"hover:bg-pink-50"}`,children:S.jsx(tC,{size:18,className:(Y=B.likedBy)!=null&&Y.includes(i.id)?"fill-pink-500":""})}),S.jsxs("span",{className:"font-bold text-sm",children:[((ae=B.likedBy)==null?void 0:ae.length)||0," "]})]})})]},B.id)}),n.length===0&&S.jsxs("div",{className:"col-span-full py-20 text-center space-y-4",children:[S.jsx("div",{className:"w-20 h-20 bg-slate-50 rounded-full flex items-center justify-center mx-auto text-slate-300",children:S.jsx(zh,{size:40})}),S.jsx("p",{className:"text-slate-400 font-bold",children:""})]})]}),u&&S.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:S.jsxs("div",{className:"bg-white rounded-[2.5rem] max-w-lg w-full p-8 shadow-2xl animate-in zoom-in-95 duration-200",children:[S.jsxs("div",{className:"flex justify-between items-center mb-8",children:[S.jsxs("h2",{className:"text-2xl font-black text-slate-800 flex items-center gap-2",children:[S.jsx(u1,{className:"text-indigo-500"}),""]}),S.jsx("button",{onClick:()=>d(!1),className:"text-slate-400 hover:text-slate-600 bg-slate-50 p-2 rounded-full",children:S.jsx(Yo,{size:24})})]}),S.jsxs("form",{onSubmit:C,className:"space-y-6",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-slate-700 font-bold mb-2 ml-1",children:""}),S.jsx("input",{type:"text",value:y,onChange:B=>v(B.target.value),placeholder:"AirPods Pro...",className:"w-full bg-slate-50 border border-slate-200 rounded-2xl px-5 py-4 font-bold text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all placeholder:font-medium",required:!0})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-slate-700 font-bold mb-2 ml-1",children:""}),S.jsx("textarea",{value:b,onChange:B=>_(B.target.value),placeholder:"...",className:"w-full bg-slate-50 border border-slate-200 rounded-2xl px-5 py-4 font-medium text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all h-32 resize-none placeholder:font-medium",required:!0})]}),S.jsxs("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-5 rounded-[1.25rem] transition-all shadow-xl shadow-indigo-100 flex items-center justify-center gap-3 text-lg",children:[S.jsx(Gv,{size:24}),""]})]})]})})]})},dR=({onLogin:i})=>{const{showAlert:e}=bu(),[n,o]=se.useState("student"),[u,d]=se.useState(!1),[y,v]=se.useState(""),[b,_]=se.useState(""),[C,I]=se.useState(""),[L,B]=se.useState(""),[q,K]=se.useState(""),Y=async _e=>{_e.preventDefault();const De=(await nw()).find(j=>j.name===y);if(!De){e("","error");return}if(De.password&&De.password!==b){e("","error");return}if(!De.isApproved){e("","info");return}await Wh(De),e("","success"),i(De)},ae=async _e=>{_e.preventDefault(),await d6(y,b,C)?(e("","success"),d(!1),_("")):e("","error")},me=_e=>{_e.preventDefault(),L==="0957999"?(Wh(Ey),e("","success"),i(Ey)):e("","error")},$=_e=>{_e.preventDefault(),q.toLowerCase()==="aaa"?(Wh(_y),e("","success"),i(_y)):e("","error")};return S.jsx("div",{className:"min-h-screen bg-[#f8fafc] flex items-center justify-center p-4",children:S.jsxs("div",{className:"bg-white max-w-4xl w-full rounded-[3rem] shadow-2xl overflow-hidden flex flex-col md:flex-row min-h-[600px]",children:[S.jsxs("div",{className:"bg-indigo-600 p-12 text-white md:w-5/12 flex flex-col justify-between relative overflow-hidden",children:[S.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-500 rounded-full -translate-y-1/2 translate-x-1/3 opacity-50"}),S.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-indigo-700 rounded-full translate-y-1/3 -translate-x-1/3 opacity-50"}),S.jsxs("div",{className:"relative z-10",children:[S.jsx("div",{className:"bg-white/20 w-16 h-16 rounded-2xl flex items-center justify-center backdrop-blur-sm mb-6",children:S.jsx(f_,{size:32})}),S.jsx("h1",{className:"text-4xl font-black tracking-tight mb-4",children:""}),S.jsx("p",{className:"text-indigo-100 font-medium text-lg leading-relaxed",children:""})]}),S.jsx("div",{className:"relative z-10 text-sm font-medium text-indigo-200",children:" 2026 Workshop System"})]}),S.jsxs("div",{className:"p-8 md:p-12 md:w-7/12 flex flex-col",children:[!u&&S.jsxs("div",{className:"flex gap-2 mb-10 overflow-x-auto pb-2",children:[S.jsxs("button",{onClick:()=>o("student"),className:`flex-1 min-w-[100px] py-3 rounded-xl font-bold text-sm transition-all flex flex-col items-center gap-1 ${n==="student"?"bg-indigo-50 text-indigo-600 ring-2 ring-indigo-500 ring-offset-2":"bg-slate-50 text-slate-400 hover:bg-slate-100"}`,children:[S.jsx(cC,{size:18})," "]}),S.jsxs("button",{onClick:()=>o("admin"),className:`flex-1 min-w-[100px] py-3 rounded-xl font-bold text-sm transition-all flex flex-col items-center gap-1 ${n==="admin"?"bg-indigo-50 text-indigo-600 ring-2 ring-indigo-500 ring-offset-2":"bg-slate-50 text-slate-400 hover:bg-slate-100"}`,children:[S.jsx(ef,{size:18})," "]}),S.jsxs("button",{onClick:()=>o("guest"),className:`flex-1 min-w-[100px] py-3 rounded-xl font-bold text-sm transition-all flex flex-col items-center gap-1 ${n==="guest"?"bg-indigo-50 text-indigo-600 ring-2 ring-indigo-500 ring-offset-2":"bg-slate-50 text-slate-400 hover:bg-slate-100"}`,children:[S.jsx(xv,{size:18})," "]})]}),!u&&n==="student"&&S.jsxs("form",{onSubmit:Y,className:"space-y-6 flex-1 flex flex-col justify-center animate-in fade-in slide-in-from-right-4 duration-300",children:[S.jsxs("div",{children:[S.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-1",children:""}),S.jsx("p",{className:"text-slate-400",children:""})]}),S.jsxs("div",{className:"space-y-4",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),S.jsx("input",{type:"text",value:y,onChange:_e=>v(_e.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:""})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),S.jsx("input",{type:"password",value:b,onChange:_e=>_(_e.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:""})]})]}),S.jsx("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-4 rounded-2xl shadow-xl shadow-indigo-100 transition-all active:scale-95",children:""}),S.jsx("div",{className:"text-center",children:S.jsx("button",{type:"button",onClick:()=>d(!0),className:"text-indigo-500 font-bold hover:underline",children:""})})]}),u&&S.jsxs("form",{onSubmit:ae,className:"space-y-6 flex-1 flex flex-col justify-center animate-in fade-in slide-in-from-right-4 duration-300",children:[S.jsxs("div",{children:[S.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-1",children:""}),S.jsx("p",{className:"text-slate-400",children:""})]}),S.jsxs("div",{className:"space-y-3",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),S.jsx("input",{type:"text",value:y,onChange:_e=>v(_e.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:"",required:!0})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),S.jsx("input",{type:"password",value:b,onChange:_e=>_(_e.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:"",required:!0})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),S.jsxs("select",{value:C,onChange:_e=>I(_e.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",children:[S.jsx("option",{children:""}),S.jsx("option",{children:""}),S.jsx("option",{children:""})]})]})]}),S.jsxs("button",{type:"submit",className:"w-full bg-slate-800 hover:bg-slate-900 text-white font-black py-4 rounded-2xl shadow-xl transition-all active:scale-95 flex items-center justify-center gap-2",children:[S.jsx(h1,{size:20}),""]}),S.jsx("div",{className:"text-center",children:S.jsx("button",{type:"button",onClick:()=>d(!1),className:"text-slate-400 font-bold hover:text-slate-600",children:""})})]}),!u&&n==="admin"&&S.jsxs("form",{onSubmit:me,className:"space-y-6 flex-1 flex flex-col justify-center animate-in fade-in slide-in-from-right-4 duration-300",children:[S.jsxs("div",{children:[S.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-1",children:""}),S.jsx("p",{className:"text-slate-400",children:""})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),S.jsx("input",{type:"password",value:L,onChange:_e=>B(_e.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:"..."})]}),S.jsx("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-4 rounded-2xl shadow-xl shadow-indigo-100 transition-all active:scale-95",children:""})]}),!u&&n==="guest"&&S.jsxs("form",{onSubmit:$,className:"space-y-6 flex-1 flex flex-col justify-center animate-in fade-in slide-in-from-right-4 duration-300",children:[S.jsxs("div",{children:[S.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-1",children:""}),S.jsx("p",{className:"text-slate-400",children:""})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),S.jsx("input",{type:"text",value:q,onChange:_e=>K(_e.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:"..."})]}),S.jsx("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-4 rounded-2xl shadow-xl shadow-indigo-100 transition-all active:scale-95",children:""})]})]})]})})},gR=({user:i,currentRank:e,onSwitchUser:n})=>{const o=xo(),[u,d]=se.useState(!1),y=[{path:"/",label:"",icon:Iv},{path:"/shop",label:"",icon:Xv},{path:"/wishes",label:"",icon:u1},{path:"/history",label:"",icon:$h}];return i.role===hs.ADMIN&&y.push({path:"/admin",label:"",icon:ef}),S.jsxs("nav",{className:"bg-white border-r border-slate-200 w-full md:w-64 md:fixed md:inset-y-0 h-auto md:h-full z-50 shadow-sm",children:[S.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg text-white",children:S.jsx(f_,{size:20})}),S.jsx("span",{className:"text-xl font-bold text-slate-800 tracking-tight",children:""})]}),S.jsx("button",{onClick:()=>d(!u),className:"md:hidden text-slate-600",children:u?S.jsx(Yo,{}):S.jsx(Lv,{})})]}),S.jsx("div",{className:`${u?"block":"hidden"} md:block p-4 space-y-2`,children:y.map(v=>{const b=v.icon,_=o.pathname===v.path;return S.jsxs(Q1,{to:v.path,onClick:()=>d(!1),className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 ${_?"bg-indigo-50 text-indigo-700 font-bold shadow-sm":"text-slate-600 hover:bg-slate-50"}`,children:[S.jsx(b,{size:20}),S.jsx("span",{children:v.label})]},v.path)})}),S.jsxs("div",{className:`${u?"block":"hidden"} md:block absolute bottom-0 w-full p-6 border-t border-slate-100 bg-white`,children:[S.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[S.jsx("img",{src:i.avatar,className:"w-10 h-10 rounded-full border-2 border-slate-100 object-cover",alt:"avatar"}),S.jsxs("div",{className:"overflow-hidden",children:[S.jsx("p",{className:"font-bold text-slate-800 truncate text-sm",children:i.name}),S.jsxs("div",{className:`text-[9px] px-2 py-0.5 rounded-full inline-block text-white font-black ${e.color}`,children:[e.icon," ",e.name]})]})]}),S.jsxs("button",{onClick:n,className:"flex items-center gap-2 text-indigo-600 hover:text-indigo-800 transition-colors text-xs font-bold w-full bg-indigo-50 p-2 rounded-lg justify-center mb-2",children:[S.jsx(Rv,{size:14}),S.jsx("span",{children:""})]})]})]})},mR=()=>{const[i,e]=se.useState(Ay()),n=i?Wo.reduce((d,y)=>i.totalEarned>=y.threshold?y:d,Wo[0]):Wo[0],o=()=>{const d=Ay();d&&e(d)},u=()=>{p6(),e(null)};return S.jsx(T8,{children:i?S.jsx(q3,{children:S.jsxs("div",{className:"min-h-screen flex flex-col md:flex-row bg-[#fbfcfd]",children:[S.jsx(gR,{user:i,currentRank:n,onSwitchUser:u}),S.jsx("main",{className:"flex-1 md:ml-64 p-4 md:p-8",children:S.jsx("div",{className:"max-w-6xl mx-auto",children:S.jsxs(A3,{children:[S.jsx(Ml,{path:"/",element:S.jsx(C8,{user:i,rank:n,onUserUpdate:o})}),S.jsx(Ml,{path:"/shop",element:S.jsx(S8,{user:i,onUserUpdate:o})}),S.jsx(Ml,{path:"/wishes",element:S.jsx(fR,{user:i})}),S.jsx(Ml,{path:"/history",element:S.jsx(k8,{user:i})}),S.jsx(Ml,{path:"/admin",element:S.jsx(hR,{onRefresh:o})})]})})})]})}):S.jsx(dR,{onLogin:e})})},Kw=document.getElementById("root");if(!Kw)throw new Error("Could not find root element to mount to");const pR=bT.createRoot(Kw);pR.render(S.jsx(ni.StrictMode,{children:S.jsx(mR,{})}));
