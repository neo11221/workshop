function KS(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const c in s)if(c!=="default"&&!(c in n)){const h=Object.getOwnPropertyDescriptor(s,c);h&&Object.defineProperty(n,c,h.get?h:{enumerable:!0,get:()=>s[c]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const h of c)if(h.type==="childList")for(const p of h.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&s(p)}).observe(document,{childList:!0,subtree:!0});function t(c){const h={};return c.integrity&&(h.integrity=c.integrity),c.referrerPolicy&&(h.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?h.credentials="include":c.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function s(c){if(c.ep)return;c.ep=!0;const h=t(c);fetch(c.href,h)}})();var Sf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function um(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Z1={exports:{}},Tu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var by;function QS(){if(by)return Tu;by=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,c,h){var p=null;if(h!==void 0&&(p=""+h),c.key!==void 0&&(p=""+c.key),"key"in c){h={};for(var T in c)T!=="key"&&(h[T]=c[T])}else h=c;return c=h.ref,{$$typeof:n,type:s,key:p,ref:c!==void 0?c:null,props:h}}return Tu.Fragment=e,Tu.jsx=t,Tu.jsxs=t,Tu}var Ty;function ZS(){return Ty||(Ty=1,Z1.exports=QS()),Z1.exports}var v=ZS(),J1={exports:{}},wt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vy;function JS(){if(vy)return wt;vy=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),p=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),M=Symbol.iterator;function B(ie){return ie===null||typeof ie!="object"?null:(ie=M&&ie[M]||ie["@@iterator"],typeof ie=="function"?ie:null)}var X={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$=Object.assign,q={};function _e(ie,Ae,Ue){this.props=ie,this.context=Ae,this.refs=q,this.updater=Ue||X}_e.prototype.isReactComponent={},_e.prototype.setState=function(ie,Ae){if(typeof ie!="object"&&typeof ie!="function"&&ie!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ie,Ae,"setState")},_e.prototype.forceUpdate=function(ie){this.updater.enqueueForceUpdate(this,ie,"forceUpdate")};function ae(){}ae.prototype=_e.prototype;function K(ie,Ae,Ue){this.props=ie,this.context=Ae,this.refs=q,this.updater=Ue||X}var le=K.prototype=new ae;le.constructor=K,$(le,_e.prototype),le.isPureReactComponent=!0;var Re=Array.isArray;function De(){}var j={H:null,A:null,T:null,S:null},z=Object.prototype.hasOwnProperty;function V(ie,Ae,Ue){var Ve=Ue.ref;return{$$typeof:n,type:ie,key:Ae,ref:Ve!==void 0?Ve:null,props:Ue}}function Y(ie,Ae){return V(ie.type,Ae,ie.props)}function Q(ie){return typeof ie=="object"&&ie!==null&&ie.$$typeof===n}function Z(ie){var Ae={"=":"=0",":":"=2"};return"$"+ie.replace(/[=:]/g,function(Ue){return Ae[Ue]})}var W=/\/+/g;function Je(ie,Ae){return typeof ie=="object"&&ie!==null&&ie.key!=null?Z(""+ie.key):Ae.toString(36)}function fe(ie){switch(ie.status){case"fulfilled":return ie.value;case"rejected":throw ie.reason;default:switch(typeof ie.status=="string"?ie.then(De,De):(ie.status="pending",ie.then(function(Ae){ie.status==="pending"&&(ie.status="fulfilled",ie.value=Ae)},function(Ae){ie.status==="pending"&&(ie.status="rejected",ie.reason=Ae)})),ie.status){case"fulfilled":return ie.value;case"rejected":throw ie.reason}}throw ie}function me(ie,Ae,Ue,Ve,st){var Le=typeof ie;(Le==="undefined"||Le==="boolean")&&(ie=null);var St=!1;if(ie===null)St=!0;else switch(Le){case"bigint":case"string":case"number":St=!0;break;case"object":switch(ie.$$typeof){case n:case e:St=!0;break;case C:return St=ie._init,me(St(ie._payload),Ae,Ue,Ve,st)}}if(St)return st=st(ie),St=Ve===""?"."+Je(ie,0):Ve,Re(st)?(Ue="",St!=null&&(Ue=St.replace(W,"$&/")+"/"),me(st,Ae,Ue,"",function(Wr){return Wr})):st!=null&&(Q(st)&&(st=Y(st,Ue+(st.key==null||ie&&ie.key===st.key?"":(""+st.key).replace(W,"$&/")+"/")+St)),Ae.push(st)),1;St=0;var Ct=Ve===""?".":Ve+":";if(Re(ie))for(var Jt=0;Jt<ie.length;Jt++)Ve=ie[Jt],Le=Ct+Je(Ve,Jt),St+=me(Ve,Ae,Ue,Le,st);else if(Jt=B(ie),typeof Jt=="function")for(ie=Jt.call(ie),Jt=0;!(Ve=ie.next()).done;)Ve=Ve.value,Le=Ct+Je(Ve,Jt++),St+=me(Ve,Ae,Ue,Le,st);else if(Le==="object"){if(typeof ie.then=="function")return me(fe(ie),Ae,Ue,Ve,st);throw Ae=String(ie),Error("Objects are not valid as a React child (found: "+(Ae==="[object Object]"?"object with keys {"+Object.keys(ie).join(", ")+"}":Ae)+"). If you meant to render a collection of children, use an array instead.")}return St}function be(ie,Ae,Ue){if(ie==null)return ie;var Ve=[],st=0;return me(ie,Ve,"","",function(Le){return Ae.call(Ue,Le,st++)}),Ve}function Ye(ie){if(ie._status===-1){var Ae=ie._result;Ae=Ae(),Ae.then(function(Ue){(ie._status===0||ie._status===-1)&&(ie._status=1,ie._result=Ue)},function(Ue){(ie._status===0||ie._status===-1)&&(ie._status=2,ie._result=Ue)}),ie._status===-1&&(ie._status=0,ie._result=Ae)}if(ie._status===1)return ie._result.default;throw ie._result}var gt=typeof reportError=="function"?reportError:function(ie){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ie=="object"&&ie!==null&&typeof ie.message=="string"?String(ie.message):String(ie),error:ie});if(!window.dispatchEvent(Ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ie);return}console.error(ie)},ut={map:be,forEach:function(ie,Ae,Ue){be(ie,function(){Ae.apply(this,arguments)},Ue)},count:function(ie){var Ae=0;return be(ie,function(){Ae++}),Ae},toArray:function(ie){return be(ie,function(Ae){return Ae})||[]},only:function(ie){if(!Q(ie))throw Error("React.Children.only expected to receive a single React element child.");return ie}};return wt.Activity=I,wt.Children=ut,wt.Component=_e,wt.Fragment=t,wt.Profiler=c,wt.PureComponent=K,wt.StrictMode=s,wt.Suspense=w,wt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,wt.__COMPILER_RUNTIME={__proto__:null,c:function(ie){return j.H.useMemoCache(ie)}},wt.cache=function(ie){return function(){return ie.apply(null,arguments)}},wt.cacheSignal=function(){return null},wt.cloneElement=function(ie,Ae,Ue){if(ie==null)throw Error("The argument must be a React element, but you passed "+ie+".");var Ve=$({},ie.props),st=ie.key;if(Ae!=null)for(Le in Ae.key!==void 0&&(st=""+Ae.key),Ae)!z.call(Ae,Le)||Le==="key"||Le==="__self"||Le==="__source"||Le==="ref"&&Ae.ref===void 0||(Ve[Le]=Ae[Le]);var Le=arguments.length-2;if(Le===1)Ve.children=Ue;else if(1<Le){for(var St=Array(Le),Ct=0;Ct<Le;Ct++)St[Ct]=arguments[Ct+2];Ve.children=St}return V(ie.type,st,Ve)},wt.createContext=function(ie){return ie={$$typeof:p,_currentValue:ie,_currentValue2:ie,_threadCount:0,Provider:null,Consumer:null},ie.Provider=ie,ie.Consumer={$$typeof:h,_context:ie},ie},wt.createElement=function(ie,Ae,Ue){var Ve,st={},Le=null;if(Ae!=null)for(Ve in Ae.key!==void 0&&(Le=""+Ae.key),Ae)z.call(Ae,Ve)&&Ve!=="key"&&Ve!=="__self"&&Ve!=="__source"&&(st[Ve]=Ae[Ve]);var St=arguments.length-2;if(St===1)st.children=Ue;else if(1<St){for(var Ct=Array(St),Jt=0;Jt<St;Jt++)Ct[Jt]=arguments[Jt+2];st.children=Ct}if(ie&&ie.defaultProps)for(Ve in St=ie.defaultProps,St)st[Ve]===void 0&&(st[Ve]=St[Ve]);return V(ie,Le,st)},wt.createRef=function(){return{current:null}},wt.forwardRef=function(ie){return{$$typeof:T,render:ie}},wt.isValidElement=Q,wt.lazy=function(ie){return{$$typeof:C,_payload:{_status:-1,_result:ie},_init:Ye}},wt.memo=function(ie,Ae){return{$$typeof:E,type:ie,compare:Ae===void 0?null:Ae}},wt.startTransition=function(ie){var Ae=j.T,Ue={};j.T=Ue;try{var Ve=ie(),st=j.S;st!==null&&st(Ue,Ve),typeof Ve=="object"&&Ve!==null&&typeof Ve.then=="function"&&Ve.then(De,gt)}catch(Le){gt(Le)}finally{Ae!==null&&Ue.types!==null&&(Ae.types=Ue.types),j.T=Ae}},wt.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},wt.use=function(ie){return j.H.use(ie)},wt.useActionState=function(ie,Ae,Ue){return j.H.useActionState(ie,Ae,Ue)},wt.useCallback=function(ie,Ae){return j.H.useCallback(ie,Ae)},wt.useContext=function(ie){return j.H.useContext(ie)},wt.useDebugValue=function(){},wt.useDeferredValue=function(ie,Ae){return j.H.useDeferredValue(ie,Ae)},wt.useEffect=function(ie,Ae){return j.H.useEffect(ie,Ae)},wt.useEffectEvent=function(ie){return j.H.useEffectEvent(ie)},wt.useId=function(){return j.H.useId()},wt.useImperativeHandle=function(ie,Ae,Ue){return j.H.useImperativeHandle(ie,Ae,Ue)},wt.useInsertionEffect=function(ie,Ae){return j.H.useInsertionEffect(ie,Ae)},wt.useLayoutEffect=function(ie,Ae){return j.H.useLayoutEffect(ie,Ae)},wt.useMemo=function(ie,Ae){return j.H.useMemo(ie,Ae)},wt.useOptimistic=function(ie,Ae){return j.H.useOptimistic(ie,Ae)},wt.useReducer=function(ie,Ae,Ue){return j.H.useReducer(ie,Ae,Ue)},wt.useRef=function(ie){return j.H.useRef(ie)},wt.useState=function(ie){return j.H.useState(ie)},wt.useSyncExternalStore=function(ie,Ae,Ue){return j.H.useSyncExternalStore(ie,Ae,Ue)},wt.useTransition=function(){return j.H.useTransition()},wt.version="19.2.3",wt}var Sy;function hm(){return Sy||(Sy=1,J1.exports=JS()),J1.exports}var ne=hm();const nr=um(ne);var $1={exports:{}},vu={},eg={exports:{}},tg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cy;function $S(){return Cy||(Cy=1,(function(n){function e(me,be){var Ye=me.length;me.push(be);e:for(;0<Ye;){var gt=Ye-1>>>1,ut=me[gt];if(0<c(ut,be))me[gt]=be,me[Ye]=ut,Ye=gt;else break e}}function t(me){return me.length===0?null:me[0]}function s(me){if(me.length===0)return null;var be=me[0],Ye=me.pop();if(Ye!==be){me[0]=Ye;e:for(var gt=0,ut=me.length,ie=ut>>>1;gt<ie;){var Ae=2*(gt+1)-1,Ue=me[Ae],Ve=Ae+1,st=me[Ve];if(0>c(Ue,Ye))Ve<ut&&0>c(st,Ue)?(me[gt]=st,me[Ve]=Ye,gt=Ve):(me[gt]=Ue,me[Ae]=Ye,gt=Ae);else if(Ve<ut&&0>c(st,Ye))me[gt]=st,me[Ve]=Ye,gt=Ve;else break e}}return be}function c(me,be){var Ye=me.sortIndex-be.sortIndex;return Ye!==0?Ye:me.id-be.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;n.unstable_now=function(){return h.now()}}else{var p=Date,T=p.now();n.unstable_now=function(){return p.now()-T}}var w=[],E=[],C=1,I=null,M=3,B=!1,X=!1,$=!1,q=!1,_e=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function le(me){for(var be=t(E);be!==null;){if(be.callback===null)s(E);else if(be.startTime<=me)s(E),be.sortIndex=be.expirationTime,e(w,be);else break;be=t(E)}}function Re(me){if($=!1,le(me),!X)if(t(w)!==null)X=!0,De||(De=!0,Z());else{var be=t(E);be!==null&&fe(Re,be.startTime-me)}}var De=!1,j=-1,z=5,V=-1;function Y(){return q?!0:!(n.unstable_now()-V<z)}function Q(){if(q=!1,De){var me=n.unstable_now();V=me;var be=!0;try{e:{X=!1,$&&($=!1,ae(j),j=-1),B=!0;var Ye=M;try{t:{for(le(me),I=t(w);I!==null&&!(I.expirationTime>me&&Y());){var gt=I.callback;if(typeof gt=="function"){I.callback=null,M=I.priorityLevel;var ut=gt(I.expirationTime<=me);if(me=n.unstable_now(),typeof ut=="function"){I.callback=ut,le(me),be=!0;break t}I===t(w)&&s(w),le(me)}else s(w);I=t(w)}if(I!==null)be=!0;else{var ie=t(E);ie!==null&&fe(Re,ie.startTime-me),be=!1}}break e}finally{I=null,M=Ye,B=!1}be=void 0}}finally{be?Z():De=!1}}}var Z;if(typeof K=="function")Z=function(){K(Q)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,Je=W.port2;W.port1.onmessage=Q,Z=function(){Je.postMessage(null)}}else Z=function(){_e(Q,0)};function fe(me,be){j=_e(function(){me(n.unstable_now())},be)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(me){me.callback=null},n.unstable_forceFrameRate=function(me){0>me||125<me?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<me?Math.floor(1e3/me):5},n.unstable_getCurrentPriorityLevel=function(){return M},n.unstable_next=function(me){switch(M){case 1:case 2:case 3:var be=3;break;default:be=M}var Ye=M;M=be;try{return me()}finally{M=Ye}},n.unstable_requestPaint=function(){q=!0},n.unstable_runWithPriority=function(me,be){switch(me){case 1:case 2:case 3:case 4:case 5:break;default:me=3}var Ye=M;M=me;try{return be()}finally{M=Ye}},n.unstable_scheduleCallback=function(me,be,Ye){var gt=n.unstable_now();switch(typeof Ye=="object"&&Ye!==null?(Ye=Ye.delay,Ye=typeof Ye=="number"&&0<Ye?gt+Ye:gt):Ye=gt,me){case 1:var ut=-1;break;case 2:ut=250;break;case 5:ut=1073741823;break;case 4:ut=1e4;break;default:ut=5e3}return ut=Ye+ut,me={id:C++,callback:be,priorityLevel:me,startTime:Ye,expirationTime:ut,sortIndex:-1},Ye>gt?(me.sortIndex=Ye,e(E,me),t(w)===null&&me===t(E)&&($?(ae(j),j=-1):$=!0,fe(Re,Ye-gt))):(me.sortIndex=ut,e(w,me),X||B||(X=!0,De||(De=!0,Z()))),me},n.unstable_shouldYield=Y,n.unstable_wrapCallback=function(me){var be=M;return function(){var Ye=M;M=be;try{return me.apply(this,arguments)}finally{M=Ye}}}})(tg)),tg}var Iy;function eC(){return Iy||(Iy=1,eg.exports=$S()),eg.exports}var ng={exports:{}},si={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ny;function tC(){if(Ny)return si;Ny=1;var n=hm();function e(w){var E="https://react.dev/errors/"+w;if(1<arguments.length){E+="?args[]="+encodeURIComponent(arguments[1]);for(var C=2;C<arguments.length;C++)E+="&args[]="+encodeURIComponent(arguments[C])}return"Minified React error #"+w+"; visit "+E+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},c=Symbol.for("react.portal");function h(w,E,C){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:I==null?null:""+I,children:w,containerInfo:E,implementation:C}}var p=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function T(w,E){if(w==="font")return"";if(typeof E=="string")return E==="use-credentials"?E:""}return si.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,si.createPortal=function(w,E){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!E||E.nodeType!==1&&E.nodeType!==9&&E.nodeType!==11)throw Error(e(299));return h(w,E,null,C)},si.flushSync=function(w){var E=p.T,C=s.p;try{if(p.T=null,s.p=2,w)return w()}finally{p.T=E,s.p=C,s.d.f()}},si.preconnect=function(w,E){typeof w=="string"&&(E?(E=E.crossOrigin,E=typeof E=="string"?E==="use-credentials"?E:"":void 0):E=null,s.d.C(w,E))},si.prefetchDNS=function(w){typeof w=="string"&&s.d.D(w)},si.preinit=function(w,E){if(typeof w=="string"&&E&&typeof E.as=="string"){var C=E.as,I=T(C,E.crossOrigin),M=typeof E.integrity=="string"?E.integrity:void 0,B=typeof E.fetchPriority=="string"?E.fetchPriority:void 0;C==="style"?s.d.S(w,typeof E.precedence=="string"?E.precedence:void 0,{crossOrigin:I,integrity:M,fetchPriority:B}):C==="script"&&s.d.X(w,{crossOrigin:I,integrity:M,fetchPriority:B,nonce:typeof E.nonce=="string"?E.nonce:void 0})}},si.preinitModule=function(w,E){if(typeof w=="string")if(typeof E=="object"&&E!==null){if(E.as==null||E.as==="script"){var C=T(E.as,E.crossOrigin);s.d.M(w,{crossOrigin:C,integrity:typeof E.integrity=="string"?E.integrity:void 0,nonce:typeof E.nonce=="string"?E.nonce:void 0})}}else E==null&&s.d.M(w)},si.preload=function(w,E){if(typeof w=="string"&&typeof E=="object"&&E!==null&&typeof E.as=="string"){var C=E.as,I=T(C,E.crossOrigin);s.d.L(w,C,{crossOrigin:I,integrity:typeof E.integrity=="string"?E.integrity:void 0,nonce:typeof E.nonce=="string"?E.nonce:void 0,type:typeof E.type=="string"?E.type:void 0,fetchPriority:typeof E.fetchPriority=="string"?E.fetchPriority:void 0,referrerPolicy:typeof E.referrerPolicy=="string"?E.referrerPolicy:void 0,imageSrcSet:typeof E.imageSrcSet=="string"?E.imageSrcSet:void 0,imageSizes:typeof E.imageSizes=="string"?E.imageSizes:void 0,media:typeof E.media=="string"?E.media:void 0})}},si.preloadModule=function(w,E){if(typeof w=="string")if(E){var C=T(E.as,E.crossOrigin);s.d.m(w,{as:typeof E.as=="string"&&E.as!=="script"?E.as:void 0,crossOrigin:C,integrity:typeof E.integrity=="string"?E.integrity:void 0})}else s.d.m(w)},si.requestFormReset=function(w){s.d.r(w)},si.unstable_batchedUpdates=function(w,E){return w(E)},si.useFormState=function(w,E,C){return p.H.useFormState(w,E,C)},si.useFormStatus=function(){return p.H.useHostTransitionStatus()},si.version="19.2.3",si}var Ry;function nC(){if(Ry)return ng.exports;Ry=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ng.exports=tC(),ng.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oy;function rC(){if(Oy)return vu;Oy=1;var n=eC(),e=hm(),t=nC();function s(r){var a="https://react.dev/errors/"+r;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function h(r){var a=r,u=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(u=a.return),r=a.return;while(r)}return a.tag===3?u:null}function p(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function T(r){if(r.tag===31){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function w(r){if(h(r)!==r)throw Error(s(188))}function E(r){var a=r.alternate;if(!a){if(a=h(r),a===null)throw Error(s(188));return a!==r?null:r}for(var u=r,g=a;;){var _=u.return;if(_===null)break;var b=_.alternate;if(b===null){if(g=_.return,g!==null){u=g;continue}break}if(_.child===b.child){for(b=_.child;b;){if(b===u)return w(_),r;if(b===g)return w(_),a;b=b.sibling}throw Error(s(188))}if(u.return!==g.return)u=_,g=b;else{for(var O=!1,U=_.child;U;){if(U===u){O=!0,u=_,g=b;break}if(U===g){O=!0,g=_,u=b;break}U=U.sibling}if(!O){for(U=b.child;U;){if(U===u){O=!0,u=b,g=_;break}if(U===g){O=!0,g=b,u=_;break}U=U.sibling}if(!O)throw Error(s(189))}}if(u.alternate!==g)throw Error(s(190))}if(u.tag!==3)throw Error(s(188));return u.stateNode.current===u?r:a}function C(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r;for(r=r.child;r!==null;){if(a=C(r),a!==null)return a;r=r.sibling}return null}var I=Object.assign,M=Symbol.for("react.element"),B=Symbol.for("react.transitional.element"),X=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),_e=Symbol.for("react.profiler"),ae=Symbol.for("react.consumer"),K=Symbol.for("react.context"),le=Symbol.for("react.forward_ref"),Re=Symbol.for("react.suspense"),De=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),Y=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function Z(r){return r===null||typeof r!="object"?null:(r=Q&&r[Q]||r["@@iterator"],typeof r=="function"?r:null)}var W=Symbol.for("react.client.reference");function Je(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===W?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case $:return"Fragment";case _e:return"Profiler";case q:return"StrictMode";case Re:return"Suspense";case De:return"SuspenseList";case V:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case X:return"Portal";case K:return r.displayName||"Context";case ae:return(r._context.displayName||"Context")+".Consumer";case le:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case j:return a=r.displayName||null,a!==null?a:Je(r.type)||"Memo";case z:a=r._payload,r=r._init;try{return Je(r(a))}catch{}}return null}var fe=Array.isArray,me=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ye={pending:!1,data:null,method:null,action:null},gt=[],ut=-1;function ie(r){return{current:r}}function Ae(r){0>ut||(r.current=gt[ut],gt[ut]=null,ut--)}function Ue(r,a){ut++,gt[ut]=r.current,r.current=a}var Ve=ie(null),st=ie(null),Le=ie(null),St=ie(null);function Ct(r,a){switch(Ue(Le,a),Ue(st,r),Ue(Ve,null),a.nodeType){case 9:case 11:r=(r=a.documentElement)&&(r=r.namespaceURI)?Yx(r):0;break;default:if(r=a.tagName,a=a.namespaceURI)a=Yx(a),r=Xx(a,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}Ae(Ve),Ue(Ve,r)}function Jt(){Ae(Ve),Ae(st),Ae(Le)}function Wr(r){r.memoizedState!==null&&Ue(St,r);var a=Ve.current,u=Xx(a,r.type);a!==u&&(Ue(st,r),Ue(Ve,u))}function Bn(r){st.current===r&&(Ae(Ve),Ae(st)),St.current===r&&(Ae(St),_u._currentValue=Ye)}var ui,ht;function rr(r){if(ui===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);ui=a&&a[1]||"",ht=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ui+r+ht}var ir=!1;function Kr(r,a){if(!r||ir)return"";ir=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(a){var Ce=function(){throw Error()};if(Object.defineProperty(Ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ce,[])}catch(we){var pe=we}Reflect.construct(r,[],Ce)}else{try{Ce.call()}catch(we){pe=we}r.call(Ce.prototype)}}else{try{throw Error()}catch(we){pe=we}(Ce=r())&&typeof Ce.catch=="function"&&Ce.catch(function(){})}}catch(we){if(we&&pe&&typeof we.stack=="string")return[we.stack,pe.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=g.DetermineComponentFrameRoot(),O=b[0],U=b[1];if(O&&U){var ee=O.split(`
`),ge=U.split(`
`);for(_=g=0;g<ee.length&&!ee[g].includes("DetermineComponentFrameRoot");)g++;for(;_<ge.length&&!ge[_].includes("DetermineComponentFrameRoot");)_++;if(g===ee.length||_===ge.length)for(g=ee.length-1,_=ge.length-1;1<=g&&0<=_&&ee[g]!==ge[_];)_--;for(;1<=g&&0<=_;g--,_--)if(ee[g]!==ge[_]){if(g!==1||_!==1)do if(g--,_--,0>_||ee[g]!==ge[_]){var Te=`
`+ee[g].replace(" at new "," at ");return r.displayName&&Te.includes("<anonymous>")&&(Te=Te.replace("<anonymous>",r.displayName)),Te}while(1<=g&&0<=_);break}}}finally{ir=!1,Error.prepareStackTrace=u}return(u=r?r.displayName||r.name:"")?rr(u):""}function mn(r,a){switch(r.tag){case 26:case 27:case 5:return rr(r.type);case 16:return rr("Lazy");case 13:return r.child!==a&&a!==null?rr("Suspense Fallback"):rr("Suspense");case 19:return rr("SuspenseList");case 0:case 15:return Kr(r.type,!1);case 11:return Kr(r.type.render,!1);case 1:return Kr(r.type,!0);case 31:return rr("Activity");default:return""}}function qt(r){try{var a="",u=null;do a+=mn(r,u),u=r,r=r.return;while(r);return a}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var et=Object.prototype.hasOwnProperty,bn=n.unstable_scheduleCallback,Fe=n.unstable_cancelCallback,Ts=n.unstable_shouldYield,rs=n.unstable_requestPaint,pn=n.unstable_now,Qr=n.unstable_getCurrentPriorityLevel,ur=n.unstable_ImmediatePriority,is=n.unstable_UserBlockingPriority,hr=n.unstable_NormalPriority,Tn=n.unstable_LowPriority,vs=n.unstable_IdlePriority,ss=n.log,ra=n.unstable_setDisableYieldValue,Yt=null,Me=null;function Xt(r){if(typeof ss=="function"&&ra(r),Me&&typeof Me.setStrictMode=="function")try{Me.setStrictMode(Yt,r)}catch{}}var at=Math.clz32?Math.clz32:as,cn=Math.log,hi=Math.LN2;function as(r){return r>>>=0,r===0?32:31-(cn(r)/hi|0)|0}var Zr=256,Tt=262144,on=4194304;function Jr(r){var a=r&42;if(a!==0)return a;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function $r(r,a,u){var g=r.pendingLanes;if(g===0)return 0;var _=0,b=r.suspendedLanes,O=r.pingedLanes;r=r.warmLanes;var U=g&134217727;return U!==0?(g=U&~b,g!==0?_=Jr(g):(O&=U,O!==0?_=Jr(O):u||(u=U&~r,u!==0&&(_=Jr(u))))):(U=g&~b,U!==0?_=Jr(U):O!==0?_=Jr(O):u||(u=g&~r,u!==0&&(_=Jr(u)))),_===0?0:a!==0&&a!==_&&(a&b)===0&&(b=_&-_,u=a&-a,b>=u||b===32&&(u&4194048)!==0)?a:_}function Nn(r,a){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&a)===0}function Ls(r,a){switch(r){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Un(){var r=on;return on<<=1,(on&62914560)===0&&(on=4194304),r}function fr(r){for(var a=[],u=0;31>u;u++)a.push(r);return a}function fi(r,a){r.pendingLanes|=a,a!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Br(r,a,u,g,_,b){var O=r.pendingLanes;r.pendingLanes=u,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=u,r.entangledLanes&=u,r.errorRecoveryDisabledLanes&=u,r.shellSuspendCounter=0;var U=r.entanglements,ee=r.expirationTimes,ge=r.hiddenUpdates;for(u=O&~u;0<u;){var Te=31-at(u),Ce=1<<Te;U[Te]=0,ee[Te]=-1;var pe=ge[Te];if(pe!==null)for(ge[Te]=null,Te=0;Te<pe.length;Te++){var we=pe[Te];we!==null&&(we.lane&=-536870913)}u&=~Ce}g!==0&&os(r,g,0),b!==0&&_===0&&r.tag!==0&&(r.suspendedLanes|=b&~(O&~a))}function os(r,a,u){r.pendingLanes|=a,r.suspendedLanes&=~a;var g=31-at(a);r.entangledLanes|=a,r.entanglements[g]=r.entanglements[g]|1073741824|u&261930}function ei(r,a){var u=r.entangledLanes|=a;for(r=r.entanglements;u;){var g=31-at(u),_=1<<g;_&a|r[g]&a&&(r[g]|=a),u&=~_}}function Li(r,a){var u=a&-a;return u=(u&42)!==0?1:On(u),(u&(r.suspendedLanes|a))!==0?0:u}function On(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function dr(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function vr(){var r=be.p;return r!==0?r:(r=window.event,r===void 0?32:py(r.type))}function je(r,a){var u=be.p;try{return be.p=r,a()}finally{be.p=u}}var gr=Math.random().toString(36).slice(2),vn="__reactFiber$"+gr,Wt="__reactProps$"+gr,mr="__reactContainer$"+gr,ki="__reactEvents$"+gr,ks="__reactListeners$"+gr,Ur="__reactHandles$"+gr,ia="__reactResources$"+gr,Ai="__reactMarker$"+gr;function pr(r){delete r[vn],delete r[Wt],delete r[ki],delete r[ks],delete r[Ur]}function xn(r){var a=r[vn];if(a)return a;for(var u=r.parentNode;u;){if(a=u[mr]||u[vn]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(r=ey(r);r!==null;){if(u=r[vn])return u;r=ey(r)}return a}r=u,u=r.parentNode}return null}function Ot(r){if(r=r[vn]||r[mr]){var a=r.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return r}return null}function Rr(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r.stateNode;throw Error(s(33))}function sr(r){var a=r[ia];return a||(a=r[ia]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Rn(r){r[Ai]=!0}var Ie=new Set,sa={};function Kt(r,a){Sr(r,a),Sr(r+"Capture",a)}function Sr(r,a){for(sa[r]=a,r=0;r<a.length;r++)Ie.add(a[r])}var aa=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Mt={},Dt={};function bt(r){return et.call(Dt,r)?!0:et.call(Mt,r)?!1:aa.test(r)?Dt[r]=!0:(Mt[r]=!0,!1)}function J(r,a,u){if(bt(a))if(u===null)r.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":r.removeAttribute(a);return;case"boolean":var g=a.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){r.removeAttribute(a);return}}r.setAttribute(a,""+u)}}function ze(r,a,u){if(u===null)r.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttribute(a,""+u)}}function Ge(r,a,u,g){if(g===null)r.removeAttribute(u);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(u);return}r.setAttributeNS(a,u,""+g)}}function Ze(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Gn(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function ls(r,a,u){var g=Object.getOwnPropertyDescriptor(r.constructor.prototype,a);if(!r.hasOwnProperty(a)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var _=g.get,b=g.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return _.call(this)},set:function(O){u=""+O,b.call(this,O)}}),Object.defineProperty(r,a,{enumerable:g.enumerable}),{getValue:function(){return u},setValue:function(O){u=""+O},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function tt(r){if(!r._valueTracker){var a=Gn(r)?"checked":"value";r._valueTracker=ls(r,a,""+r[a])}}function Or(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var u=a.getValue(),g="";return r&&(g=Gn(r)?r.checked?"true":"false":r.value),r=g,r!==u?(a.setValue(r),!0):!1}function bi(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Qn=/[\n"\\]/g;function Et(r){return r.replace(Qn,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function nn(r,a,u,g,_,b,O,U){r.name="",O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?r.type=O:r.removeAttribute("type"),a!=null?O==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+Ze(a)):r.value!==""+Ze(a)&&(r.value=""+Ze(a)):O!=="submit"&&O!=="reset"||r.removeAttribute("value"),a!=null?H(r,O,Ze(a)):u!=null?H(r,O,Ze(u)):g!=null&&r.removeAttribute("value"),_==null&&b!=null&&(r.defaultChecked=!!b),_!=null&&(r.checked=_&&typeof _!="function"&&typeof _!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?r.name=""+Ze(U):r.removeAttribute("name")}function he(r,a,u,g,_,b,O,U){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(r.type=b),a!=null||u!=null){if(!(b!=="submit"&&b!=="reset"||a!=null)){tt(r);return}u=u!=null?""+Ze(u):"",a=a!=null?""+Ze(a):u,U||a===r.value||(r.value=a),r.defaultValue=a}g=g??_,g=typeof g!="function"&&typeof g!="symbol"&&!!g,r.checked=U?r.checked:!!g,r.defaultChecked=!!g,O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(r.name=O),tt(r)}function H(r,a,u){a==="number"&&bi(r.ownerDocument)===r||r.defaultValue===""+u||(r.defaultValue=""+u)}function We(r,a,u,g){if(r=r.options,a){a={};for(var _=0;_<u.length;_++)a["$"+u[_]]=!0;for(u=0;u<r.length;u++)_=a.hasOwnProperty("$"+r[u].value),r[u].selected!==_&&(r[u].selected=_),_&&g&&(r[u].defaultSelected=!0)}else{for(u=""+Ze(u),a=null,_=0;_<r.length;_++){if(r[_].value===u){r[_].selected=!0,g&&(r[_].defaultSelected=!0);return}a!==null||r[_].disabled||(a=r[_])}a!==null&&(a.selected=!0)}}function qn(r,a,u){if(a!=null&&(a=""+Ze(a),a!==r.value&&(r.value=a),u==null)){r.defaultValue!==a&&(r.defaultValue=a);return}r.defaultValue=u!=null?""+Ze(u):""}function ar(r,a,u,g){if(a==null){if(g!=null){if(u!=null)throw Error(s(92));if(fe(g)){if(1<g.length)throw Error(s(93));g=g[0]}u=g}u==null&&(u=""),a=u}u=Ze(a),r.defaultValue=u,g=r.textContent,g===u&&g!==""&&g!==null&&(r.value=g),tt(r)}function ti(r,a){if(a){var u=r.firstChild;if(u&&u===r.lastChild&&u.nodeType===3){u.nodeValue=a;return}}r.textContent=a}var Ka=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Dr(r,a,u){var g=a.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?g?r.setProperty(a,""):a==="float"?r.cssFloat="":r[a]="":g?r.setProperty(a,u):typeof u!="number"||u===0||Ka.has(a)?a==="float"?r.cssFloat=u:r[a]=(""+u).trim():r[a]=u+"px"}function $e(r,a,u){if(a!=null&&typeof a!="object")throw Error(s(62));if(r=r.style,u!=null){for(var g in u)!u.hasOwnProperty(g)||a!=null&&a.hasOwnProperty(g)||(g.indexOf("--")===0?r.setProperty(g,""):g==="float"?r.cssFloat="":r[g]="");for(var _ in a)g=a[_],a.hasOwnProperty(_)&&u[_]!==g&&Dr(r,_,g)}else for(var b in a)a.hasOwnProperty(b)&&Dr(r,b,a[b])}function un(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Bs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Us(r){return Bs.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function ni(){}var oa=null;function Ti(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Sn=null,ri=null;function ii(r){var a=Ot(r);if(a&&(r=a.stateNode)){var u=r[Wt]||null;e:switch(r=a.stateNode,a.type){case"input":if(nn(r,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),a=u.name,u.type==="radio"&&a!=null){for(u=r;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Et(""+a)+'"][type="radio"]'),a=0;a<u.length;a++){var g=u[a];if(g!==r&&g.form===r.form){var _=g[Wt]||null;if(!_)throw Error(s(90));nn(g,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(a=0;a<u.length;a++)g=u[a],g.form===r.form&&Or(g)}break e;case"textarea":qn(r,u.value,u.defaultValue);break e;case"select":a=u.value,a!=null&&We(r,!!u.multiple,a,!1)}}}var nt=!1;function Vs(r,a,u){if(nt)return r(a,u);nt=!0;try{var g=r(a);return g}finally{if(nt=!1,(Sn!==null||ri!==null)&&(rf(),Sn&&(a=Sn,r=ri,ri=Sn=null,ii(a),r)))for(a=0;a<r.length;a++)ii(r[a])}}function lt(r,a){var u=r.stateNode;if(u===null)return null;var g=u[Wt]||null;if(g===null)return null;u=g[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(r=r.type,g=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!g;break e;default:r=!1}if(r)return null;if(u&&typeof u!="function")throw Error(s(231,a,typeof u));return u}var hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),la=!1;if(hn)try{var rn={};Object.defineProperty(rn,"passive",{get:function(){la=!0}}),window.addEventListener("test",rn,rn),window.removeEventListener("test",rn,rn)}catch{la=!1}var Bi=null,Ui=null,ca=null;function Ss(){if(ca)return ca;var r,a=Ui,u=a.length,g,_="value"in Bi?Bi.value:Bi.textContent,b=_.length;for(r=0;r<u&&a[r]===_[r];r++);var O=u-r;for(g=1;g<=O&&a[u-g]===_[b-g];g++);return ca=_.slice(r,1<g?1-g:void 0)}function Vi(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function di(){return!0}function vi(){return!1}function Yn(r){function a(u,g,_,b,O){this._reactName=u,this._targetInst=_,this.type=g,this.nativeEvent=b,this.target=O,this.currentTarget=null;for(var U in r)r.hasOwnProperty(U)&&(u=r[U],this[U]=u?u(b):b[U]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?di:vi,this.isPropagationStopped=vi,this}return I(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=di)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=di)},persist:function(){},isPersistent:di}),a}var gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dn=Yn(gi),Cs=I({},gi,{view:0,detail:0}),Qa=Yn(Cs),Is,Za,cs,Ja=I({},Cs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hs,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==cs&&(cs&&r.type==="mousemove"?(Is=r.screenX-cs.screenX,Za=r.screenY-cs.screenY):Za=Is=0,cs=r),Is)},movementY:function(r){return"movementY"in r?r.movementY:Za}}),$t=Yn(Ja),js=I({},Ja,{dataTransfer:0}),ua=Yn(js),ji=I({},Cs,{relatedTarget:0}),ha=Yn(ji),xe=I({},gi,{animationName:0,elapsedTime:0,pseudoElement:0}),_t=Yn(xe),Vn=I({},gi,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),fa=Yn(Vn),Jo=I({},gi,{data:0}),us=Yn(Jo),Dl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ml={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$a={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jn(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=$a[r])?!!a[r]:!1}function hs(){return jn}var Pt=I({},Cs,{key:function(r){if(r.key){var a=Dl[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=Vi(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Ml[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hs,charCode:function(r){return r.type==="keypress"?Vi(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Vi(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),da=Yn(Pt),fs=I({},Ja,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lt=Yn(fs),x=I({},Cs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hs}),N=Yn(x),D=I({},gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),F=Yn(D),ce=I({},Ja,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Ee=Yn(ce),Be=I({},gi,{newState:0,oldState:0}),pt=Yn(Be),Fn=[9,13,27,32],Qt=hn&&"CompositionEvent"in window,Cn=null;hn&&"documentMode"in document&&(Cn=document.documentMode);var mi=hn&&"TextEvent"in window&&!Cn,ds=hn&&(!Qt||Cn&&8<Cn&&11>=Cn),Mr=" ",pi=!1;function ga(r,a){switch(r){case"keyup":return Fn.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gs(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var eo=!1;function Fs(r,a){switch(r){case"compositionend":return gs(a);case"keypress":return a.which!==32?null:(pi=!0,Mr);case"textInput":return r=a.data,r===Mr&&pi?null:r;default:return null}}function Pl(r,a){if(eo)return r==="compositionend"||!Qt&&ga(r,a)?(r=Ss(),ca=Ui=Bi=null,eo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return ds&&a.locale!=="ko"?null:a.data;default:return null}}var Si={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gc(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!Si[r.type]:a==="textarea"}function Fi(r,a,u,g){Sn?ri?ri.push(g):ri=[g]:Sn=g,a=hf(a,"onChange"),0<a.length&&(u=new Dn("onChange","change",null,u,g),r.push({event:u,listeners:a}))}var $o=null,ma=null;function u0(r){jx(r,0)}function el(r){var a=Rr(r);if(Or(a))return r}function zi(r,a){if(r==="change")return a}var wh=!1;if(hn){var tl;if(hn){var pa="oninput"in document;if(!pa){var Vt=document.createElement("div");Vt.setAttribute("oninput","return;"),pa=typeof Vt.oninput=="function"}tl=pa}else tl=!1;wh=tl&&(!document.documentMode||9<document.documentMode)}function nl(){$o&&($o.detachEvent("onpropertychange",P),ma=$o=null)}function P(r){if(r.propertyName==="value"&&el(ma)){var a=[];Fi(a,ma,r,Ti(r)),Vs(u0,a)}}function i(r,a,u){r==="focusin"?(nl(),$o=a,ma=u,$o.attachEvent("onpropertychange",P)):r==="focusout"&&nl()}function o(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return el(ma)}function l(r,a){if(r==="click")return el(a)}function f(r,a){if(r==="input"||r==="change")return el(a)}function d(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var m=typeof Object.is=="function"?Object.is:d;function y(r,a){if(m(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var u=Object.keys(r),g=Object.keys(a);if(u.length!==g.length)return!1;for(g=0;g<u.length;g++){var _=u[g];if(!et.call(a,_)||!m(r[_],a[_]))return!1}return!0}function A(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function S(r,a){var u=A(r);r=0;for(var g;u;){if(u.nodeType===3){if(g=r+u.textContent.length,r<=a&&g>=a)return{node:u,offset:a-r};r=g}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=A(u)}}function R(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?R(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function L(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var a=bi(r.document);a instanceof r.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)r=a.contentWindow;else break;a=bi(r.document)}return a}function k(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}var G=hn&&"documentMode"in document&&11>=document.documentMode,te=null,re=null,ue=null,ye=!1;function ke(r,a,u){var g=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;ye||te==null||te!==bi(g)||(g=te,"selectionStart"in g&&k(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),ue&&y(ue,g)||(ue=g,g=hf(re,"onSelect"),0<g.length&&(a=new Dn("onSelect","select",null,a,u),r.push({event:a,listeners:g}),a.target=te)))}function Pe(r,a){var u={};return u[r.toLowerCase()]=a.toLowerCase(),u["Webkit"+r]="webkit"+a,u["Moz"+r]="moz"+a,u}var Oe={animationend:Pe("Animation","AnimationEnd"),animationiteration:Pe("Animation","AnimationIteration"),animationstart:Pe("Animation","AnimationStart"),transitionrun:Pe("Transition","TransitionRun"),transitionstart:Pe("Transition","TransitionStart"),transitioncancel:Pe("Transition","TransitionCancel"),transitionend:Pe("Transition","TransitionEnd")},Rt={},yt={};hn&&(yt=document.createElement("div").style,"AnimationEvent"in window||(delete Oe.animationend.animation,delete Oe.animationiteration.animation,delete Oe.animationstart.animation),"TransitionEvent"in window||delete Oe.transitionend.transition);function Zn(r){if(Rt[r])return Rt[r];if(!Oe[r])return r;var a=Oe[r],u;for(u in a)if(a.hasOwnProperty(u)&&u in yt)return Rt[r]=a[u];return r}var Ci=Zn("animationend"),Vr=Zn("animationiteration"),fn=Zn("animationstart"),Cr=Zn("transitionrun"),xi=Zn("transitionstart"),to=Zn("transitioncancel"),xa=Zn("transitionend"),Ah=new Map,qc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");qc.push("scrollEnd");function Ns(r,a){Ah.set(r,a),Kt(a,[r])}var bh=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},ms=[],Ll=0,h0=0;function Th(){for(var r=Ll,a=h0=Ll=0;a<r;){var u=ms[a];ms[a++]=null;var g=ms[a];ms[a++]=null;var _=ms[a];ms[a++]=null;var b=ms[a];if(ms[a++]=null,g!==null&&_!==null){var O=g.pending;O===null?_.next=_:(_.next=O.next,O.next=_),g.pending=_}b!==0&&wp(u,_,b)}}function vh(r,a,u,g){ms[Ll++]=r,ms[Ll++]=a,ms[Ll++]=u,ms[Ll++]=g,h0|=g,r.lanes|=g,r=r.alternate,r!==null&&(r.lanes|=g)}function f0(r,a,u,g){return vh(r,a,u,g),Sh(r)}function rl(r,a){return vh(r,null,null,a),Sh(r)}function wp(r,a,u){r.lanes|=u;var g=r.alternate;g!==null&&(g.lanes|=u);for(var _=!1,b=r.return;b!==null;)b.childLanes|=u,g=b.alternate,g!==null&&(g.childLanes|=u),b.tag===22&&(r=b.stateNode,r===null||r._visibility&1||(_=!0)),r=b,b=b.return;return r.tag===3?(b=r.stateNode,_&&a!==null&&(_=31-at(u),r=b.hiddenUpdates,g=r[_],g===null?r[_]=[a]:g.push(a),a.lane=u|536870912),b):null}function Sh(r){if(50<du)throw du=0,w1=null,Error(s(185));for(var a=r.return;a!==null;)r=a,a=r.return;return r.tag===3?r.stateNode:null}var kl={};function Dv(r,a,u,g){this.tag=r,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hi(r,a,u,g){return new Dv(r,a,u,g)}function d0(r){return r=r.prototype,!(!r||!r.isReactComponent)}function ya(r,a){var u=r.alternate;return u===null?(u=Hi(r.tag,a,r.key,r.mode),u.elementType=r.elementType,u.type=r.type,u.stateNode=r.stateNode,u.alternate=r,r.alternate=u):(u.pendingProps=a,u.type=r.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=r.flags&65011712,u.childLanes=r.childLanes,u.lanes=r.lanes,u.child=r.child,u.memoizedProps=r.memoizedProps,u.memoizedState=r.memoizedState,u.updateQueue=r.updateQueue,a=r.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=r.sibling,u.index=r.index,u.ref=r.ref,u.refCleanup=r.refCleanup,u}function Ap(r,a){r.flags&=65011714;var u=r.alternate;return u===null?(r.childLanes=0,r.lanes=a,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=u.childLanes,r.lanes=u.lanes,r.child=u.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=u.memoizedProps,r.memoizedState=u.memoizedState,r.updateQueue=u.updateQueue,r.type=u.type,a=u.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),r}function Ch(r,a,u,g,_,b){var O=0;if(g=r,typeof r=="function")d0(r)&&(O=1);else if(typeof r=="string")O=BS(r,u,Ve.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case V:return r=Hi(31,u,a,_),r.elementType=V,r.lanes=b,r;case $:return il(u.children,_,b,a);case q:O=8,_|=24;break;case _e:return r=Hi(12,u,a,_|2),r.elementType=_e,r.lanes=b,r;case Re:return r=Hi(13,u,a,_),r.elementType=Re,r.lanes=b,r;case De:return r=Hi(19,u,a,_),r.elementType=De,r.lanes=b,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case K:O=10;break e;case ae:O=9;break e;case le:O=11;break e;case j:O=14;break e;case z:O=16,g=null;break e}O=29,u=Error(s(130,r===null?"null":typeof r,"")),g=null}return a=Hi(O,u,a,_),a.elementType=r,a.type=g,a.lanes=b,a}function il(r,a,u,g){return r=Hi(7,r,g,a),r.lanes=u,r}function g0(r,a,u){return r=Hi(6,r,null,a),r.lanes=u,r}function bp(r){var a=Hi(18,null,null,0);return a.stateNode=r,a}function m0(r,a,u){return a=Hi(4,r.children!==null?r.children:[],r.key,a),a.lanes=u,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}var Tp=new WeakMap;function ps(r,a){if(typeof r=="object"&&r!==null){var u=Tp.get(r);return u!==void 0?u:(a={value:r,source:a,stack:qt(a)},Tp.set(r,a),a)}return{value:r,source:a,stack:qt(a)}}var Bl=[],Ul=0,Ih=null,Yc=0,xs=[],ys=0,no=null,zs=1,Hs="";function Ea(r,a){Bl[Ul++]=Yc,Bl[Ul++]=Ih,Ih=r,Yc=a}function vp(r,a,u){xs[ys++]=zs,xs[ys++]=Hs,xs[ys++]=no,no=r;var g=zs;r=Hs;var _=32-at(g)-1;g&=~(1<<_),u+=1;var b=32-at(a)+_;if(30<b){var O=_-_%5;b=(g&(1<<O)-1).toString(32),g>>=O,_-=O,zs=1<<32-at(a)+_|u<<_|g,Hs=b+r}else zs=1<<b|u<<_|g,Hs=r}function p0(r){r.return!==null&&(Ea(r,1),vp(r,1,0))}function x0(r){for(;r===Ih;)Ih=Bl[--Ul],Bl[Ul]=null,Yc=Bl[--Ul],Bl[Ul]=null;for(;r===no;)no=xs[--ys],xs[ys]=null,Hs=xs[--ys],xs[ys]=null,zs=xs[--ys],xs[ys]=null}function Sp(r,a){xs[ys++]=zs,xs[ys++]=Hs,xs[ys++]=no,zs=a.id,Hs=a.overflow,no=r}var jr=null,Mn=null,Zt=!1,ro=null,Es=!1,y0=Error(s(519));function io(r){var a=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Xc(ps(a,r)),y0}function Cp(r){var a=r.stateNode,u=r.type,g=r.memoizedProps;switch(a[vn]=r,a[Wt]=g,u){case"dialog":Bt("cancel",a),Bt("close",a);break;case"iframe":case"object":case"embed":Bt("load",a);break;case"video":case"audio":for(u=0;u<mu.length;u++)Bt(mu[u],a);break;case"source":Bt("error",a);break;case"img":case"image":case"link":Bt("error",a),Bt("load",a);break;case"details":Bt("toggle",a);break;case"input":Bt("invalid",a),he(a,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":Bt("invalid",a);break;case"textarea":Bt("invalid",a),ar(a,g.value,g.defaultValue,g.children)}u=g.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||a.textContent===""+u||g.suppressHydrationWarning===!0||Gx(a.textContent,u)?(g.popover!=null&&(Bt("beforetoggle",a),Bt("toggle",a)),g.onScroll!=null&&Bt("scroll",a),g.onScrollEnd!=null&&Bt("scrollend",a),g.onClick!=null&&(a.onclick=ni),a=!0):a=!1,a||io(r,!0)}function Ip(r){for(jr=r.return;jr;)switch(jr.tag){case 5:case 31:case 13:Es=!1;return;case 27:case 3:Es=!0;return;default:jr=jr.return}}function Vl(r){if(r!==jr)return!1;if(!Zt)return Ip(r),Zt=!0,!1;var a=r.tag,u;if((u=a!==3&&a!==27)&&((u=a===5)&&(u=r.type,u=!(u!=="form"&&u!=="button")||k1(r.type,r.memoizedProps)),u=!u),u&&Mn&&io(r),Ip(r),a===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));Mn=$x(r)}else if(a===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));Mn=$x(r)}else a===27?(a=Mn,Eo(r.type)?(r=F1,F1=null,Mn=r):Mn=a):Mn=jr?ws(r.stateNode.nextSibling):null;return!0}function sl(){Mn=jr=null,Zt=!1}function E0(){var r=ro;return r!==null&&(Oi===null?Oi=r:Oi.push.apply(Oi,r),ro=null),r}function Xc(r){ro===null?ro=[r]:ro.push(r)}var _0=ie(null),al=null,_a=null;function so(r,a,u){Ue(_0,a._currentValue),a._currentValue=u}function wa(r){r._currentValue=_0.current,Ae(_0)}function w0(r,a,u){for(;r!==null;){var g=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,g!==null&&(g.childLanes|=a)):g!==null&&(g.childLanes&a)!==a&&(g.childLanes|=a),r===u)break;r=r.return}}function A0(r,a,u,g){var _=r.child;for(_!==null&&(_.return=r);_!==null;){var b=_.dependencies;if(b!==null){var O=_.child;b=b.firstContext;e:for(;b!==null;){var U=b;b=_;for(var ee=0;ee<a.length;ee++)if(U.context===a[ee]){b.lanes|=u,U=b.alternate,U!==null&&(U.lanes|=u),w0(b.return,u,r),g||(O=null);break e}b=U.next}}else if(_.tag===18){if(O=_.return,O===null)throw Error(s(341));O.lanes|=u,b=O.alternate,b!==null&&(b.lanes|=u),w0(O,u,r),O=null}else O=_.child;if(O!==null)O.return=_;else for(O=_;O!==null;){if(O===r){O=null;break}if(_=O.sibling,_!==null){_.return=O.return,O=_;break}O=O.return}_=O}}function jl(r,a,u,g){r=null;for(var _=a,b=!1;_!==null;){if(!b){if((_.flags&524288)!==0)b=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var O=_.alternate;if(O===null)throw Error(s(387));if(O=O.memoizedProps,O!==null){var U=_.type;m(_.pendingProps.value,O.value)||(r!==null?r.push(U):r=[U])}}else if(_===St.current){if(O=_.alternate,O===null)throw Error(s(387));O.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(r!==null?r.push(_u):r=[_u])}_=_.return}r!==null&&A0(a,r,u,g),a.flags|=262144}function Nh(r){for(r=r.firstContext;r!==null;){if(!m(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function ol(r){al=r,_a=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Fr(r){return Np(al,r)}function Rh(r,a){return al===null&&ol(r),Np(r,a)}function Np(r,a){var u=a._currentValue;if(a={context:a,memoizedValue:u,next:null},_a===null){if(r===null)throw Error(s(308));_a=a,r.dependencies={lanes:0,firstContext:a},r.flags|=524288}else _a=_a.next=a;return u}var Mv=typeof AbortController<"u"?AbortController:function(){var r=[],a=this.signal={aborted:!1,addEventListener:function(u,g){r.push(g)}};this.abort=function(){a.aborted=!0,r.forEach(function(u){return u()})}},Pv=n.unstable_scheduleCallback,Lv=n.unstable_NormalPriority,xr={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function b0(){return{controller:new Mv,data:new Map,refCount:0}}function Wc(r){r.refCount--,r.refCount===0&&Pv(Lv,function(){r.controller.abort()})}var Kc=null,T0=0,Fl=0,zl=null;function kv(r,a){if(Kc===null){var u=Kc=[];T0=0,Fl=C1(),zl={status:"pending",value:void 0,then:function(g){u.push(g)}}}return T0++,a.then(Rp,Rp),a}function Rp(){if(--T0===0&&Kc!==null){zl!==null&&(zl.status="fulfilled");var r=Kc;Kc=null,Fl=0,zl=null;for(var a=0;a<r.length;a++)(0,r[a])()}}function Bv(r,a){var u=[],g={status:"pending",value:null,reason:null,then:function(_){u.push(_)}};return r.then(function(){g.status="fulfilled",g.value=a;for(var _=0;_<u.length;_++)(0,u[_])(a)},function(_){for(g.status="rejected",g.reason=_,_=0;_<u.length;_++)(0,u[_])(void 0)}),g}var Op=me.S;me.S=function(r,a){gx=pn(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&kv(r,a),Op!==null&&Op(r,a)};var ll=ie(null);function v0(){var r=ll.current;return r!==null?r:In.pooledCache}function Oh(r,a){a===null?Ue(ll,ll.current):Ue(ll,a.pool)}function Dp(){var r=v0();return r===null?null:{parent:xr._currentValue,pool:r}}var Hl=Error(s(460)),S0=Error(s(474)),Dh=Error(s(542)),Mh={then:function(){}};function Mp(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Pp(r,a,u){switch(u=r[u],u===void 0?r.push(a):u!==a&&(a.then(ni,ni),a=u),a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,kp(r),r;default:if(typeof a.status=="string")a.then(ni,ni);else{if(r=In,r!==null&&100<r.shellSuspendCounter)throw Error(s(482));r=a,r.status="pending",r.then(function(g){if(a.status==="pending"){var _=a;_.status="fulfilled",_.value=g}},function(g){if(a.status==="pending"){var _=a;_.status="rejected",_.reason=g}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,kp(r),r}throw ul=a,Hl}}function cl(r){try{var a=r._init;return a(r._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(ul=u,Hl):u}}var ul=null;function Lp(){if(ul===null)throw Error(s(459));var r=ul;return ul=null,r}function kp(r){if(r===Hl||r===Dh)throw Error(s(483))}var Gl=null,Qc=0;function Ph(r){var a=Qc;return Qc+=1,Gl===null&&(Gl=[]),Pp(Gl,r,a)}function Zc(r,a){a=a.props.ref,r.ref=a!==void 0?a:null}function Lh(r,a){throw a.$$typeof===M?Error(s(525)):(r=Object.prototype.toString.call(a),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r)))}function Bp(r){function a(oe,se){if(r){var de=oe.deletions;de===null?(oe.deletions=[se],oe.flags|=16):de.push(se)}}function u(oe,se){if(!r)return null;for(;se!==null;)a(oe,se),se=se.sibling;return null}function g(oe){for(var se=new Map;oe!==null;)oe.key!==null?se.set(oe.key,oe):se.set(oe.index,oe),oe=oe.sibling;return se}function _(oe,se){return oe=ya(oe,se),oe.index=0,oe.sibling=null,oe}function b(oe,se,de){return oe.index=de,r?(de=oe.alternate,de!==null?(de=de.index,de<se?(oe.flags|=67108866,se):de):(oe.flags|=67108866,se)):(oe.flags|=1048576,se)}function O(oe){return r&&oe.alternate===null&&(oe.flags|=67108866),oe}function U(oe,se,de,Se){return se===null||se.tag!==6?(se=g0(de,oe.mode,Se),se.return=oe,se):(se=_(se,de),se.return=oe,se)}function ee(oe,se,de,Se){var it=de.type;return it===$?Te(oe,se,de.props.children,Se,de.key):se!==null&&(se.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===z&&cl(it)===se.type)?(se=_(se,de.props),Zc(se,de),se.return=oe,se):(se=Ch(de.type,de.key,de.props,null,oe.mode,Se),Zc(se,de),se.return=oe,se)}function ge(oe,se,de,Se){return se===null||se.tag!==4||se.stateNode.containerInfo!==de.containerInfo||se.stateNode.implementation!==de.implementation?(se=m0(de,oe.mode,Se),se.return=oe,se):(se=_(se,de.children||[]),se.return=oe,se)}function Te(oe,se,de,Se,it){return se===null||se.tag!==7?(se=il(de,oe.mode,Se,it),se.return=oe,se):(se=_(se,de),se.return=oe,se)}function Ce(oe,se,de){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return se=g0(""+se,oe.mode,de),se.return=oe,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case B:return de=Ch(se.type,se.key,se.props,null,oe.mode,de),Zc(de,se),de.return=oe,de;case X:return se=m0(se,oe.mode,de),se.return=oe,se;case z:return se=cl(se),Ce(oe,se,de)}if(fe(se)||Z(se))return se=il(se,oe.mode,de,null),se.return=oe,se;if(typeof se.then=="function")return Ce(oe,Ph(se),de);if(se.$$typeof===K)return Ce(oe,Rh(oe,se),de);Lh(oe,se)}return null}function pe(oe,se,de,Se){var it=se!==null?se.key:null;if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return it!==null?null:U(oe,se,""+de,Se);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case B:return de.key===it?ee(oe,se,de,Se):null;case X:return de.key===it?ge(oe,se,de,Se):null;case z:return de=cl(de),pe(oe,se,de,Se)}if(fe(de)||Z(de))return it!==null?null:Te(oe,se,de,Se,null);if(typeof de.then=="function")return pe(oe,se,Ph(de),Se);if(de.$$typeof===K)return pe(oe,se,Rh(oe,de),Se);Lh(oe,de)}return null}function we(oe,se,de,Se,it){if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return oe=oe.get(de)||null,U(se,oe,""+Se,it);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case B:return oe=oe.get(Se.key===null?de:Se.key)||null,ee(se,oe,Se,it);case X:return oe=oe.get(Se.key===null?de:Se.key)||null,ge(se,oe,Se,it);case z:return Se=cl(Se),we(oe,se,de,Se,it)}if(fe(Se)||Z(Se))return oe=oe.get(de)||null,Te(se,oe,Se,it,null);if(typeof Se.then=="function")return we(oe,se,de,Ph(Se),it);if(Se.$$typeof===K)return we(oe,se,de,Rh(se,Se),it);Lh(se,Se)}return null}function Ke(oe,se,de,Se){for(var it=null,sn=null,Qe=se,It=se=0,Ft=null;Qe!==null&&It<de.length;It++){Qe.index>It?(Ft=Qe,Qe=null):Ft=Qe.sibling;var an=pe(oe,Qe,de[It],Se);if(an===null){Qe===null&&(Qe=Ft);break}r&&Qe&&an.alternate===null&&a(oe,Qe),se=b(an,se,It),sn===null?it=an:sn.sibling=an,sn=an,Qe=Ft}if(It===de.length)return u(oe,Qe),Zt&&Ea(oe,It),it;if(Qe===null){for(;It<de.length;It++)Qe=Ce(oe,de[It],Se),Qe!==null&&(se=b(Qe,se,It),sn===null?it=Qe:sn.sibling=Qe,sn=Qe);return Zt&&Ea(oe,It),it}for(Qe=g(Qe);It<de.length;It++)Ft=we(Qe,oe,It,de[It],Se),Ft!==null&&(r&&Ft.alternate!==null&&Qe.delete(Ft.key===null?It:Ft.key),se=b(Ft,se,It),sn===null?it=Ft:sn.sibling=Ft,sn=Ft);return r&&Qe.forEach(function(To){return a(oe,To)}),Zt&&Ea(oe,It),it}function ct(oe,se,de,Se){if(de==null)throw Error(s(151));for(var it=null,sn=null,Qe=se,It=se=0,Ft=null,an=de.next();Qe!==null&&!an.done;It++,an=de.next()){Qe.index>It?(Ft=Qe,Qe=null):Ft=Qe.sibling;var To=pe(oe,Qe,an.value,Se);if(To===null){Qe===null&&(Qe=Ft);break}r&&Qe&&To.alternate===null&&a(oe,Qe),se=b(To,se,It),sn===null?it=To:sn.sibling=To,sn=To,Qe=Ft}if(an.done)return u(oe,Qe),Zt&&Ea(oe,It),it;if(Qe===null){for(;!an.done;It++,an=de.next())an=Ce(oe,an.value,Se),an!==null&&(se=b(an,se,It),sn===null?it=an:sn.sibling=an,sn=an);return Zt&&Ea(oe,It),it}for(Qe=g(Qe);!an.done;It++,an=de.next())an=we(Qe,oe,It,an.value,Se),an!==null&&(r&&an.alternate!==null&&Qe.delete(an.key===null?It:an.key),se=b(an,se,It),sn===null?it=an:sn.sibling=an,sn=an);return r&&Qe.forEach(function(WS){return a(oe,WS)}),Zt&&Ea(oe,It),it}function _n(oe,se,de,Se){if(typeof de=="object"&&de!==null&&de.type===$&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case B:e:{for(var it=de.key;se!==null;){if(se.key===it){if(it=de.type,it===$){if(se.tag===7){u(oe,se.sibling),Se=_(se,de.props.children),Se.return=oe,oe=Se;break e}}else if(se.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===z&&cl(it)===se.type){u(oe,se.sibling),Se=_(se,de.props),Zc(Se,de),Se.return=oe,oe=Se;break e}u(oe,se);break}else a(oe,se);se=se.sibling}de.type===$?(Se=il(de.props.children,oe.mode,Se,de.key),Se.return=oe,oe=Se):(Se=Ch(de.type,de.key,de.props,null,oe.mode,Se),Zc(Se,de),Se.return=oe,oe=Se)}return O(oe);case X:e:{for(it=de.key;se!==null;){if(se.key===it)if(se.tag===4&&se.stateNode.containerInfo===de.containerInfo&&se.stateNode.implementation===de.implementation){u(oe,se.sibling),Se=_(se,de.children||[]),Se.return=oe,oe=Se;break e}else{u(oe,se);break}else a(oe,se);se=se.sibling}Se=m0(de,oe.mode,Se),Se.return=oe,oe=Se}return O(oe);case z:return de=cl(de),_n(oe,se,de,Se)}if(fe(de))return Ke(oe,se,de,Se);if(Z(de)){if(it=Z(de),typeof it!="function")throw Error(s(150));return de=it.call(de),ct(oe,se,de,Se)}if(typeof de.then=="function")return _n(oe,se,Ph(de),Se);if(de.$$typeof===K)return _n(oe,se,Rh(oe,de),Se);Lh(oe,de)}return typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint"?(de=""+de,se!==null&&se.tag===6?(u(oe,se.sibling),Se=_(se,de),Se.return=oe,oe=Se):(u(oe,se),Se=g0(de,oe.mode,Se),Se.return=oe,oe=Se),O(oe)):u(oe,se)}return function(oe,se,de,Se){try{Qc=0;var it=_n(oe,se,de,Se);return Gl=null,it}catch(Qe){if(Qe===Hl||Qe===Dh)throw Qe;var sn=Hi(29,Qe,null,oe.mode);return sn.lanes=Se,sn.return=oe,sn}finally{}}}var hl=Bp(!0),Up=Bp(!1),ao=!1;function C0(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function I0(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function oo(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function lo(r,a,u){var g=r.updateQueue;if(g===null)return null;if(g=g.shared,(ln&2)!==0){var _=g.pending;return _===null?a.next=a:(a.next=_.next,_.next=a),g.pending=a,a=Sh(r),wp(r,null,u),a}return vh(r,g,a,u),Sh(r)}function Jc(r,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194048)!==0)){var g=a.lanes;g&=r.pendingLanes,u|=g,a.lanes=u,ei(r,u)}}function N0(r,a){var u=r.updateQueue,g=r.alternate;if(g!==null&&(g=g.updateQueue,u===g)){var _=null,b=null;if(u=u.firstBaseUpdate,u!==null){do{var O={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};b===null?_=b=O:b=b.next=O,u=u.next}while(u!==null);b===null?_=b=a:b=b.next=a}else _=b=a;u={baseState:g.baseState,firstBaseUpdate:_,lastBaseUpdate:b,shared:g.shared,callbacks:g.callbacks},r.updateQueue=u;return}r=u.lastBaseUpdate,r===null?u.firstBaseUpdate=a:r.next=a,u.lastBaseUpdate=a}var R0=!1;function $c(){if(R0){var r=zl;if(r!==null)throw r}}function eu(r,a,u,g){R0=!1;var _=r.updateQueue;ao=!1;var b=_.firstBaseUpdate,O=_.lastBaseUpdate,U=_.shared.pending;if(U!==null){_.shared.pending=null;var ee=U,ge=ee.next;ee.next=null,O===null?b=ge:O.next=ge,O=ee;var Te=r.alternate;Te!==null&&(Te=Te.updateQueue,U=Te.lastBaseUpdate,U!==O&&(U===null?Te.firstBaseUpdate=ge:U.next=ge,Te.lastBaseUpdate=ee))}if(b!==null){var Ce=_.baseState;O=0,Te=ge=ee=null,U=b;do{var pe=U.lane&-536870913,we=pe!==U.lane;if(we?(jt&pe)===pe:(g&pe)===pe){pe!==0&&pe===Fl&&(R0=!0),Te!==null&&(Te=Te.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});e:{var Ke=r,ct=U;pe=a;var _n=u;switch(ct.tag){case 1:if(Ke=ct.payload,typeof Ke=="function"){Ce=Ke.call(_n,Ce,pe);break e}Ce=Ke;break e;case 3:Ke.flags=Ke.flags&-65537|128;case 0:if(Ke=ct.payload,pe=typeof Ke=="function"?Ke.call(_n,Ce,pe):Ke,pe==null)break e;Ce=I({},Ce,pe);break e;case 2:ao=!0}}pe=U.callback,pe!==null&&(r.flags|=64,we&&(r.flags|=8192),we=_.callbacks,we===null?_.callbacks=[pe]:we.push(pe))}else we={lane:pe,tag:U.tag,payload:U.payload,callback:U.callback,next:null},Te===null?(ge=Te=we,ee=Ce):Te=Te.next=we,O|=pe;if(U=U.next,U===null){if(U=_.shared.pending,U===null)break;we=U,U=we.next,we.next=null,_.lastBaseUpdate=we,_.shared.pending=null}}while(!0);Te===null&&(ee=Ce),_.baseState=ee,_.firstBaseUpdate=ge,_.lastBaseUpdate=Te,b===null&&(_.shared.lanes=0),go|=O,r.lanes=O,r.memoizedState=Ce}}function Vp(r,a){if(typeof r!="function")throw Error(s(191,r));r.call(a)}function jp(r,a){var u=r.callbacks;if(u!==null)for(r.callbacks=null,r=0;r<u.length;r++)Vp(u[r],a)}var ql=ie(null),kh=ie(0);function Fp(r,a){r=Ra,Ue(kh,r),Ue(ql,a),Ra=r|a.baseLanes}function O0(){Ue(kh,Ra),Ue(ql,ql.current)}function D0(){Ra=kh.current,Ae(ql),Ae(kh)}var Gi=ie(null),_s=null;function co(r){var a=r.alternate;Ue(or,or.current&1),Ue(Gi,r),_s===null&&(a===null||ql.current!==null||a.memoizedState!==null)&&(_s=r)}function M0(r){Ue(or,or.current),Ue(Gi,r),_s===null&&(_s=r)}function zp(r){r.tag===22?(Ue(or,or.current),Ue(Gi,r),_s===null&&(_s=r)):uo()}function uo(){Ue(or,or.current),Ue(Gi,Gi.current)}function qi(r){Ae(Gi),_s===r&&(_s=null),Ae(or)}var or=ie(0);function Bh(r){for(var a=r;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||V1(u)||j1(u)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Aa=0,vt=null,yn=null,yr=null,Uh=!1,Yl=!1,fl=!1,Vh=0,tu=0,Xl=null,Uv=0;function Jn(){throw Error(s(321))}function P0(r,a){if(a===null)return!1;for(var u=0;u<a.length&&u<r.length;u++)if(!m(r[u],a[u]))return!1;return!0}function L0(r,a,u,g,_,b){return Aa=b,vt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,me.H=r===null||r.memoizedState===null?v2:Q0,fl=!1,b=u(g,_),fl=!1,Yl&&(b=Gp(a,u,g,_)),Hp(r),b}function Hp(r){me.H=iu;var a=yn!==null&&yn.next!==null;if(Aa=0,yr=yn=vt=null,Uh=!1,tu=0,Xl=null,a)throw Error(s(300));r===null||Er||(r=r.dependencies,r!==null&&Nh(r)&&(Er=!0))}function Gp(r,a,u,g){vt=r;var _=0;do{if(Yl&&(Xl=null),tu=0,Yl=!1,25<=_)throw Error(s(301));if(_+=1,yr=yn=null,r.updateQueue!=null){var b=r.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}me.H=S2,b=a(u,g)}while(Yl);return b}function Vv(){var r=me.H,a=r.useState()[0];return a=typeof a.then=="function"?nu(a):a,r=r.useState()[0],(yn!==null?yn.memoizedState:null)!==r&&(vt.flags|=1024),a}function k0(){var r=Vh!==0;return Vh=0,r}function B0(r,a,u){a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~u}function U0(r){if(Uh){for(r=r.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Uh=!1}Aa=0,yr=yn=vt=null,Yl=!1,tu=Vh=0,Xl=null}function yi(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yr===null?vt.memoizedState=yr=r:yr=yr.next=r,yr}function lr(){if(yn===null){var r=vt.alternate;r=r!==null?r.memoizedState:null}else r=yn.next;var a=yr===null?vt.memoizedState:yr.next;if(a!==null)yr=a,yn=r;else{if(r===null)throw vt.alternate===null?Error(s(467)):Error(s(310));yn=r,r={memoizedState:yn.memoizedState,baseState:yn.baseState,baseQueue:yn.baseQueue,queue:yn.queue,next:null},yr===null?vt.memoizedState=yr=r:yr=yr.next=r}return yr}function jh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function nu(r){var a=tu;return tu+=1,Xl===null&&(Xl=[]),r=Pp(Xl,r,a),a=vt,(yr===null?a.memoizedState:yr.next)===null&&(a=a.alternate,me.H=a===null||a.memoizedState===null?v2:Q0),r}function Fh(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return nu(r);if(r.$$typeof===K)return Fr(r)}throw Error(s(438,String(r)))}function V0(r){var a=null,u=vt.updateQueue;if(u!==null&&(a=u.memoCache),a==null){var g=vt.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(a={data:g.data.map(function(_){return _.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),u===null&&(u=jh(),vt.updateQueue=u),u.memoCache=a,u=a.data[a.index],u===void 0)for(u=a.data[a.index]=Array(r),g=0;g<r;g++)u[g]=Y;return a.index++,u}function ba(r,a){return typeof a=="function"?a(r):a}function zh(r){var a=lr();return j0(a,yn,r)}function j0(r,a,u){var g=r.queue;if(g===null)throw Error(s(311));g.lastRenderedReducer=u;var _=r.baseQueue,b=g.pending;if(b!==null){if(_!==null){var O=_.next;_.next=b.next,b.next=O}a.baseQueue=_=b,g.pending=null}if(b=r.baseState,_===null)r.memoizedState=b;else{a=_.next;var U=O=null,ee=null,ge=a,Te=!1;do{var Ce=ge.lane&-536870913;if(Ce!==ge.lane?(jt&Ce)===Ce:(Aa&Ce)===Ce){var pe=ge.revertLane;if(pe===0)ee!==null&&(ee=ee.next={lane:0,revertLane:0,gesture:null,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null}),Ce===Fl&&(Te=!0);else if((Aa&pe)===pe){ge=ge.next,pe===Fl&&(Te=!0);continue}else Ce={lane:0,revertLane:ge.revertLane,gesture:null,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},ee===null?(U=ee=Ce,O=b):ee=ee.next=Ce,vt.lanes|=pe,go|=pe;Ce=ge.action,fl&&u(b,Ce),b=ge.hasEagerState?ge.eagerState:u(b,Ce)}else pe={lane:Ce,revertLane:ge.revertLane,gesture:ge.gesture,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},ee===null?(U=ee=pe,O=b):ee=ee.next=pe,vt.lanes|=Ce,go|=Ce;ge=ge.next}while(ge!==null&&ge!==a);if(ee===null?O=b:ee.next=U,!m(b,r.memoizedState)&&(Er=!0,Te&&(u=zl,u!==null)))throw u;r.memoizedState=b,r.baseState=O,r.baseQueue=ee,g.lastRenderedState=b}return _===null&&(g.lanes=0),[r.memoizedState,g.dispatch]}function F0(r){var a=lr(),u=a.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=r;var g=u.dispatch,_=u.pending,b=a.memoizedState;if(_!==null){u.pending=null;var O=_=_.next;do b=r(b,O.action),O=O.next;while(O!==_);m(b,a.memoizedState)||(Er=!0),a.memoizedState=b,a.baseQueue===null&&(a.baseState=b),u.lastRenderedState=b}return[b,g]}function qp(r,a,u){var g=vt,_=lr(),b=Zt;if(b){if(u===void 0)throw Error(s(407));u=u()}else u=a();var O=!m((yn||_).memoizedState,u);if(O&&(_.memoizedState=u,Er=!0),_=_.queue,G0(Wp.bind(null,g,_,r),[r]),_.getSnapshot!==a||O||yr!==null&&yr.memoizedState.tag&1){if(g.flags|=2048,Wl(9,{destroy:void 0},Xp.bind(null,g,_,u,a),null),In===null)throw Error(s(349));b||(Aa&127)!==0||Yp(g,a,u)}return u}function Yp(r,a,u){r.flags|=16384,r={getSnapshot:a,value:u},a=vt.updateQueue,a===null?(a=jh(),vt.updateQueue=a,a.stores=[r]):(u=a.stores,u===null?a.stores=[r]:u.push(r))}function Xp(r,a,u,g){a.value=u,a.getSnapshot=g,Kp(a)&&Qp(r)}function Wp(r,a,u){return u(function(){Kp(a)&&Qp(r)})}function Kp(r){var a=r.getSnapshot;r=r.value;try{var u=a();return!m(r,u)}catch{return!0}}function Qp(r){var a=rl(r,2);a!==null&&Di(a,r,2)}function z0(r){var a=yi();if(typeof r=="function"){var u=r;if(r=u(),fl){Xt(!0);try{u()}finally{Xt(!1)}}}return a.memoizedState=a.baseState=r,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:r},a}function Zp(r,a,u,g){return r.baseState=u,j0(r,yn,typeof g=="function"?g:ba)}function jv(r,a,u,g,_){if(qh(r))throw Error(s(485));if(r=a.action,r!==null){var b={payload:_,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(O){b.listeners.push(O)}};me.T!==null?u(!0):b.isTransition=!1,g(b),u=a.pending,u===null?(b.next=a.pending=b,Jp(a,b)):(b.next=u.next,a.pending=u.next=b)}}function Jp(r,a){var u=a.action,g=a.payload,_=r.state;if(a.isTransition){var b=me.T,O={};me.T=O;try{var U=u(_,g),ee=me.S;ee!==null&&ee(O,U),$p(r,a,U)}catch(ge){H0(r,a,ge)}finally{b!==null&&O.types!==null&&(b.types=O.types),me.T=b}}else try{b=u(_,g),$p(r,a,b)}catch(ge){H0(r,a,ge)}}function $p(r,a,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(g){e2(r,a,g)},function(g){return H0(r,a,g)}):e2(r,a,u)}function e2(r,a,u){a.status="fulfilled",a.value=u,t2(a),r.state=u,a=r.pending,a!==null&&(u=a.next,u===a?r.pending=null:(u=u.next,a.next=u,Jp(r,u)))}function H0(r,a,u){var g=r.pending;if(r.pending=null,g!==null){g=g.next;do a.status="rejected",a.reason=u,t2(a),a=a.next;while(a!==g)}r.action=null}function t2(r){r=r.listeners;for(var a=0;a<r.length;a++)(0,r[a])()}function n2(r,a){return a}function r2(r,a){if(Zt){var u=In.formState;if(u!==null){e:{var g=vt;if(Zt){if(Mn){t:{for(var _=Mn,b=Es;_.nodeType!==8;){if(!b){_=null;break t}if(_=ws(_.nextSibling),_===null){_=null;break t}}b=_.data,_=b==="F!"||b==="F"?_:null}if(_){Mn=ws(_.nextSibling),g=_.data==="F!";break e}}io(g)}g=!1}g&&(a=u[0])}}return u=yi(),u.memoizedState=u.baseState=a,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n2,lastRenderedState:a},u.queue=g,u=A2.bind(null,vt,g),g.dispatch=u,g=z0(!1),b=K0.bind(null,vt,!1,g.queue),g=yi(),_={state:a,dispatch:null,action:r,pending:null},g.queue=_,u=jv.bind(null,vt,_,b,u),_.dispatch=u,g.memoizedState=r,[a,u,!1]}function i2(r){var a=lr();return s2(a,yn,r)}function s2(r,a,u){if(a=j0(r,a,n2)[0],r=zh(ba)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var g=nu(a)}catch(O){throw O===Hl?Dh:O}else g=a;a=lr();var _=a.queue,b=_.dispatch;return u!==a.memoizedState&&(vt.flags|=2048,Wl(9,{destroy:void 0},Fv.bind(null,_,u),null)),[g,b,r]}function Fv(r,a){r.action=a}function a2(r){var a=lr(),u=yn;if(u!==null)return s2(a,u,r);lr(),a=a.memoizedState,u=lr();var g=u.queue.dispatch;return u.memoizedState=r,[a,g,!1]}function Wl(r,a,u,g){return r={tag:r,create:u,deps:g,inst:a,next:null},a=vt.updateQueue,a===null&&(a=jh(),vt.updateQueue=a),u=a.lastEffect,u===null?a.lastEffect=r.next=r:(g=u.next,u.next=r,r.next=g,a.lastEffect=r),r}function o2(){return lr().memoizedState}function Hh(r,a,u,g){var _=yi();vt.flags|=r,_.memoizedState=Wl(1|a,{destroy:void 0},u,g===void 0?null:g)}function Gh(r,a,u,g){var _=lr();g=g===void 0?null:g;var b=_.memoizedState.inst;yn!==null&&g!==null&&P0(g,yn.memoizedState.deps)?_.memoizedState=Wl(a,b,u,g):(vt.flags|=r,_.memoizedState=Wl(1|a,b,u,g))}function l2(r,a){Hh(8390656,8,r,a)}function G0(r,a){Gh(2048,8,r,a)}function zv(r){vt.flags|=4;var a=vt.updateQueue;if(a===null)a=jh(),vt.updateQueue=a,a.events=[r];else{var u=a.events;u===null?a.events=[r]:u.push(r)}}function c2(r){var a=lr().memoizedState;return zv({ref:a,nextImpl:r}),function(){if((ln&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}function u2(r,a){return Gh(4,2,r,a)}function h2(r,a){return Gh(4,4,r,a)}function f2(r,a){if(typeof a=="function"){r=r();var u=a(r);return function(){typeof u=="function"?u():a(null)}}if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function d2(r,a,u){u=u!=null?u.concat([r]):null,Gh(4,4,f2.bind(null,a,r),u)}function q0(){}function g2(r,a){var u=lr();a=a===void 0?null:a;var g=u.memoizedState;return a!==null&&P0(a,g[1])?g[0]:(u.memoizedState=[r,a],r)}function m2(r,a){var u=lr();a=a===void 0?null:a;var g=u.memoizedState;if(a!==null&&P0(a,g[1]))return g[0];if(g=r(),fl){Xt(!0);try{r()}finally{Xt(!1)}}return u.memoizedState=[g,a],g}function Y0(r,a,u){return u===void 0||(Aa&1073741824)!==0&&(jt&261930)===0?r.memoizedState=a:(r.memoizedState=u,r=px(),vt.lanes|=r,go|=r,u)}function p2(r,a,u,g){return m(u,a)?u:ql.current!==null?(r=Y0(r,u,g),m(r,a)||(Er=!0),r):(Aa&42)===0||(Aa&1073741824)!==0&&(jt&261930)===0?(Er=!0,r.memoizedState=u):(r=px(),vt.lanes|=r,go|=r,a)}function x2(r,a,u,g,_){var b=be.p;be.p=b!==0&&8>b?b:8;var O=me.T,U={};me.T=U,K0(r,!1,a,u);try{var ee=_(),ge=me.S;if(ge!==null&&ge(U,ee),ee!==null&&typeof ee=="object"&&typeof ee.then=="function"){var Te=Bv(ee,g);ru(r,a,Te,Wi(r))}else ru(r,a,g,Wi(r))}catch(Ce){ru(r,a,{then:function(){},status:"rejected",reason:Ce},Wi())}finally{be.p=b,O!==null&&U.types!==null&&(O.types=U.types),me.T=O}}function Hv(){}function X0(r,a,u,g){if(r.tag!==5)throw Error(s(476));var _=y2(r).queue;x2(r,_,a,Ye,u===null?Hv:function(){return E2(r),u(g)})}function y2(r){var a=r.memoizedState;if(a!==null)return a;a={memoizedState:Ye,baseState:Ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:Ye},next:null};var u={};return a.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:u},next:null},r.memoizedState=a,r=r.alternate,r!==null&&(r.memoizedState=a),a}function E2(r){var a=y2(r);a.next===null&&(a=r.alternate.memoizedState),ru(r,a.next.queue,{},Wi())}function W0(){return Fr(_u)}function _2(){return lr().memoizedState}function w2(){return lr().memoizedState}function Gv(r){for(var a=r.return;a!==null;){switch(a.tag){case 24:case 3:var u=Wi();r=oo(u);var g=lo(a,r,u);g!==null&&(Di(g,a,u),Jc(g,a,u)),a={cache:b0()},r.payload=a;return}a=a.return}}function qv(r,a,u){var g=Wi();u={lane:g,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},qh(r)?b2(a,u):(u=f0(r,a,u,g),u!==null&&(Di(u,r,g),T2(u,a,g)))}function A2(r,a,u){var g=Wi();ru(r,a,u,g)}function ru(r,a,u,g){var _={lane:g,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(qh(r))b2(a,_);else{var b=r.alternate;if(r.lanes===0&&(b===null||b.lanes===0)&&(b=a.lastRenderedReducer,b!==null))try{var O=a.lastRenderedState,U=b(O,u);if(_.hasEagerState=!0,_.eagerState=U,m(U,O))return vh(r,a,_,0),In===null&&Th(),!1}catch{}finally{}if(u=f0(r,a,_,g),u!==null)return Di(u,r,g),T2(u,a,g),!0}return!1}function K0(r,a,u,g){if(g={lane:2,revertLane:C1(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},qh(r)){if(a)throw Error(s(479))}else a=f0(r,u,g,2),a!==null&&Di(a,r,2)}function qh(r){var a=r.alternate;return r===vt||a!==null&&a===vt}function b2(r,a){Yl=Uh=!0;var u=r.pending;u===null?a.next=a:(a.next=u.next,u.next=a),r.pending=a}function T2(r,a,u){if((u&4194048)!==0){var g=a.lanes;g&=r.pendingLanes,u|=g,a.lanes=u,ei(r,u)}}var iu={readContext:Fr,use:Fh,useCallback:Jn,useContext:Jn,useEffect:Jn,useImperativeHandle:Jn,useLayoutEffect:Jn,useInsertionEffect:Jn,useMemo:Jn,useReducer:Jn,useRef:Jn,useState:Jn,useDebugValue:Jn,useDeferredValue:Jn,useTransition:Jn,useSyncExternalStore:Jn,useId:Jn,useHostTransitionStatus:Jn,useFormState:Jn,useActionState:Jn,useOptimistic:Jn,useMemoCache:Jn,useCacheRefresh:Jn};iu.useEffectEvent=Jn;var v2={readContext:Fr,use:Fh,useCallback:function(r,a){return yi().memoizedState=[r,a===void 0?null:a],r},useContext:Fr,useEffect:l2,useImperativeHandle:function(r,a,u){u=u!=null?u.concat([r]):null,Hh(4194308,4,f2.bind(null,a,r),u)},useLayoutEffect:function(r,a){return Hh(4194308,4,r,a)},useInsertionEffect:function(r,a){Hh(4,2,r,a)},useMemo:function(r,a){var u=yi();a=a===void 0?null:a;var g=r();if(fl){Xt(!0);try{r()}finally{Xt(!1)}}return u.memoizedState=[g,a],g},useReducer:function(r,a,u){var g=yi();if(u!==void 0){var _=u(a);if(fl){Xt(!0);try{u(a)}finally{Xt(!1)}}}else _=a;return g.memoizedState=g.baseState=_,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:_},g.queue=r,r=r.dispatch=qv.bind(null,vt,r),[g.memoizedState,r]},useRef:function(r){var a=yi();return r={current:r},a.memoizedState=r},useState:function(r){r=z0(r);var a=r.queue,u=A2.bind(null,vt,a);return a.dispatch=u,[r.memoizedState,u]},useDebugValue:q0,useDeferredValue:function(r,a){var u=yi();return Y0(u,r,a)},useTransition:function(){var r=z0(!1);return r=x2.bind(null,vt,r.queue,!0,!1),yi().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,a,u){var g=vt,_=yi();if(Zt){if(u===void 0)throw Error(s(407));u=u()}else{if(u=a(),In===null)throw Error(s(349));(jt&127)!==0||Yp(g,a,u)}_.memoizedState=u;var b={value:u,getSnapshot:a};return _.queue=b,l2(Wp.bind(null,g,b,r),[r]),g.flags|=2048,Wl(9,{destroy:void 0},Xp.bind(null,g,b,u,a),null),u},useId:function(){var r=yi(),a=In.identifierPrefix;if(Zt){var u=Hs,g=zs;u=(g&~(1<<32-at(g)-1)).toString(32)+u,a="_"+a+"R_"+u,u=Vh++,0<u&&(a+="H"+u.toString(32)),a+="_"}else u=Uv++,a="_"+a+"r_"+u.toString(32)+"_";return r.memoizedState=a},useHostTransitionStatus:W0,useFormState:r2,useActionState:r2,useOptimistic:function(r){var a=yi();a.memoizedState=a.baseState=r;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=u,a=K0.bind(null,vt,!0,u),u.dispatch=a,[r,a]},useMemoCache:V0,useCacheRefresh:function(){return yi().memoizedState=Gv.bind(null,vt)},useEffectEvent:function(r){var a=yi(),u={impl:r};return a.memoizedState=u,function(){if((ln&2)!==0)throw Error(s(440));return u.impl.apply(void 0,arguments)}}},Q0={readContext:Fr,use:Fh,useCallback:g2,useContext:Fr,useEffect:G0,useImperativeHandle:d2,useInsertionEffect:u2,useLayoutEffect:h2,useMemo:m2,useReducer:zh,useRef:o2,useState:function(){return zh(ba)},useDebugValue:q0,useDeferredValue:function(r,a){var u=lr();return p2(u,yn.memoizedState,r,a)},useTransition:function(){var r=zh(ba)[0],a=lr().memoizedState;return[typeof r=="boolean"?r:nu(r),a]},useSyncExternalStore:qp,useId:_2,useHostTransitionStatus:W0,useFormState:i2,useActionState:i2,useOptimistic:function(r,a){var u=lr();return Zp(u,yn,r,a)},useMemoCache:V0,useCacheRefresh:w2};Q0.useEffectEvent=c2;var S2={readContext:Fr,use:Fh,useCallback:g2,useContext:Fr,useEffect:G0,useImperativeHandle:d2,useInsertionEffect:u2,useLayoutEffect:h2,useMemo:m2,useReducer:F0,useRef:o2,useState:function(){return F0(ba)},useDebugValue:q0,useDeferredValue:function(r,a){var u=lr();return yn===null?Y0(u,r,a):p2(u,yn.memoizedState,r,a)},useTransition:function(){var r=F0(ba)[0],a=lr().memoizedState;return[typeof r=="boolean"?r:nu(r),a]},useSyncExternalStore:qp,useId:_2,useHostTransitionStatus:W0,useFormState:a2,useActionState:a2,useOptimistic:function(r,a){var u=lr();return yn!==null?Zp(u,yn,r,a):(u.baseState=r,[r,u.queue.dispatch])},useMemoCache:V0,useCacheRefresh:w2};S2.useEffectEvent=c2;function Z0(r,a,u,g){a=r.memoizedState,u=u(g,a),u=u==null?a:I({},a,u),r.memoizedState=u,r.lanes===0&&(r.updateQueue.baseState=u)}var J0={enqueueSetState:function(r,a,u){r=r._reactInternals;var g=Wi(),_=oo(g);_.payload=a,u!=null&&(_.callback=u),a=lo(r,_,g),a!==null&&(Di(a,r,g),Jc(a,r,g))},enqueueReplaceState:function(r,a,u){r=r._reactInternals;var g=Wi(),_=oo(g);_.tag=1,_.payload=a,u!=null&&(_.callback=u),a=lo(r,_,g),a!==null&&(Di(a,r,g),Jc(a,r,g))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var u=Wi(),g=oo(u);g.tag=2,a!=null&&(g.callback=a),a=lo(r,g,u),a!==null&&(Di(a,r,u),Jc(a,r,u))}};function C2(r,a,u,g,_,b,O){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(g,b,O):a.prototype&&a.prototype.isPureReactComponent?!y(u,g)||!y(_,b):!0}function I2(r,a,u,g){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,g),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,g),a.state!==r&&J0.enqueueReplaceState(a,a.state,null)}function dl(r,a){var u=a;if("ref"in a){u={};for(var g in a)g!=="ref"&&(u[g]=a[g])}if(r=r.defaultProps){u===a&&(u=I({},u));for(var _ in r)u[_]===void 0&&(u[_]=r[_])}return u}function N2(r){bh(r)}function R2(r){console.error(r)}function O2(r){bh(r)}function Yh(r,a){try{var u=r.onUncaughtError;u(a.value,{componentStack:a.stack})}catch(g){setTimeout(function(){throw g})}}function D2(r,a,u){try{var g=r.onCaughtError;g(u.value,{componentStack:u.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function $0(r,a,u){return u=oo(u),u.tag=3,u.payload={element:null},u.callback=function(){Yh(r,a)},u}function M2(r){return r=oo(r),r.tag=3,r}function P2(r,a,u,g){var _=u.type.getDerivedStateFromError;if(typeof _=="function"){var b=g.value;r.payload=function(){return _(b)},r.callback=function(){D2(a,u,g)}}var O=u.stateNode;O!==null&&typeof O.componentDidCatch=="function"&&(r.callback=function(){D2(a,u,g),typeof _!="function"&&(mo===null?mo=new Set([this]):mo.add(this));var U=g.stack;this.componentDidCatch(g.value,{componentStack:U!==null?U:""})})}function Yv(r,a,u,g,_){if(u.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(a=u.alternate,a!==null&&jl(a,u,_,!0),u=Gi.current,u!==null){switch(u.tag){case 31:case 13:return _s===null?sf():u.alternate===null&&$n===0&&($n=3),u.flags&=-257,u.flags|=65536,u.lanes=_,g===Mh?u.flags|=16384:(a=u.updateQueue,a===null?u.updateQueue=new Set([g]):a.add(g),T1(r,g,_)),!1;case 22:return u.flags|=65536,g===Mh?u.flags|=16384:(a=u.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([g])},u.updateQueue=a):(u=a.retryQueue,u===null?a.retryQueue=new Set([g]):u.add(g)),T1(r,g,_)),!1}throw Error(s(435,u.tag))}return T1(r,g,_),sf(),!1}if(Zt)return a=Gi.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=_,g!==y0&&(r=Error(s(422),{cause:g}),Xc(ps(r,u)))):(g!==y0&&(a=Error(s(423),{cause:g}),Xc(ps(a,u))),r=r.current.alternate,r.flags|=65536,_&=-_,r.lanes|=_,g=ps(g,u),_=$0(r.stateNode,g,_),N0(r,_),$n!==4&&($n=2)),!1;var b=Error(s(520),{cause:g});if(b=ps(b,u),fu===null?fu=[b]:fu.push(b),$n!==4&&($n=2),a===null)return!0;g=ps(g,u),u=a;do{switch(u.tag){case 3:return u.flags|=65536,r=_&-_,u.lanes|=r,r=$0(u.stateNode,g,r),N0(u,r),!1;case 1:if(a=u.type,b=u.stateNode,(u.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(mo===null||!mo.has(b))))return u.flags|=65536,_&=-_,u.lanes|=_,_=M2(_),P2(_,r,u,g),N0(u,_),!1}u=u.return}while(u!==null);return!1}var e1=Error(s(461)),Er=!1;function zr(r,a,u,g){a.child=r===null?Up(a,null,u,g):hl(a,r.child,u,g)}function L2(r,a,u,g,_){u=u.render;var b=a.ref;if("ref"in g){var O={};for(var U in g)U!=="ref"&&(O[U]=g[U])}else O=g;return ol(a),g=L0(r,a,u,O,b,_),U=k0(),r!==null&&!Er?(B0(r,a,_),Ta(r,a,_)):(Zt&&U&&p0(a),a.flags|=1,zr(r,a,g,_),a.child)}function k2(r,a,u,g,_){if(r===null){var b=u.type;return typeof b=="function"&&!d0(b)&&b.defaultProps===void 0&&u.compare===null?(a.tag=15,a.type=b,B2(r,a,b,g,_)):(r=Ch(u.type,null,g,a,a.mode,_),r.ref=a.ref,r.return=a,a.child=r)}if(b=r.child,!l1(r,_)){var O=b.memoizedProps;if(u=u.compare,u=u!==null?u:y,u(O,g)&&r.ref===a.ref)return Ta(r,a,_)}return a.flags|=1,r=ya(b,g),r.ref=a.ref,r.return=a,a.child=r}function B2(r,a,u,g,_){if(r!==null){var b=r.memoizedProps;if(y(b,g)&&r.ref===a.ref)if(Er=!1,a.pendingProps=g=b,l1(r,_))(r.flags&131072)!==0&&(Er=!0);else return a.lanes=r.lanes,Ta(r,a,_)}return t1(r,a,u,g,_)}function U2(r,a,u,g){var _=g.children,b=r!==null?r.memoizedState:null;if(r===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((a.flags&128)!==0){if(b=b!==null?b.baseLanes|u:u,r!==null){for(g=a.child=r.child,_=0;g!==null;)_=_|g.lanes|g.childLanes,g=g.sibling;g=_&~b}else g=0,a.child=null;return V2(r,a,b,u,g)}if((u&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},r!==null&&Oh(a,b!==null?b.cachePool:null),b!==null?Fp(a,b):O0(),zp(a);else return g=a.lanes=536870912,V2(r,a,b!==null?b.baseLanes|u:u,u,g)}else b!==null?(Oh(a,b.cachePool),Fp(a,b),uo(),a.memoizedState=null):(r!==null&&Oh(a,null),O0(),uo());return zr(r,a,_,u),a.child}function su(r,a){return r!==null&&r.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function V2(r,a,u,g,_){var b=v0();return b=b===null?null:{parent:xr._currentValue,pool:b},a.memoizedState={baseLanes:u,cachePool:b},r!==null&&Oh(a,null),O0(),zp(a),r!==null&&jl(r,a,g,!0),a.childLanes=_,null}function Xh(r,a){return a=Kh({mode:a.mode,children:a.children},r.mode),a.ref=r.ref,r.child=a,a.return=r,a}function j2(r,a,u){return hl(a,r.child,null,u),r=Xh(a,a.pendingProps),r.flags|=2,qi(a),a.memoizedState=null,r}function Xv(r,a,u){var g=a.pendingProps,_=(a.flags&128)!==0;if(a.flags&=-129,r===null){if(Zt){if(g.mode==="hidden")return r=Xh(a,g),a.lanes=536870912,su(null,r);if(M0(a),(r=Mn)?(r=Jx(r,Es),r=r!==null&&r.data==="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:no!==null?{id:zs,overflow:Hs}:null,retryLane:536870912,hydrationErrors:null},u=bp(r),u.return=a,a.child=u,jr=a,Mn=null)):r=null,r===null)throw io(a);return a.lanes=536870912,null}return Xh(a,g)}var b=r.memoizedState;if(b!==null){var O=b.dehydrated;if(M0(a),_)if(a.flags&256)a.flags&=-257,a=j2(r,a,u);else if(a.memoizedState!==null)a.child=r.child,a.flags|=128,a=null;else throw Error(s(558));else if(Er||jl(r,a,u,!1),_=(u&r.childLanes)!==0,Er||_){if(g=In,g!==null&&(O=Li(g,u),O!==0&&O!==b.retryLane))throw b.retryLane=O,rl(r,O),Di(g,r,O),e1;sf(),a=j2(r,a,u)}else r=b.treeContext,Mn=ws(O.nextSibling),jr=a,Zt=!0,ro=null,Es=!1,r!==null&&Sp(a,r),a=Xh(a,g),a.flags|=4096;return a}return r=ya(r.child,{mode:g.mode,children:g.children}),r.ref=a.ref,a.child=r,r.return=a,r}function Wh(r,a){var u=a.ref;if(u===null)r!==null&&r.ref!==null&&(a.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(s(284));(r===null||r.ref!==u)&&(a.flags|=4194816)}}function t1(r,a,u,g,_){return ol(a),u=L0(r,a,u,g,void 0,_),g=k0(),r!==null&&!Er?(B0(r,a,_),Ta(r,a,_)):(Zt&&g&&p0(a),a.flags|=1,zr(r,a,u,_),a.child)}function F2(r,a,u,g,_,b){return ol(a),a.updateQueue=null,u=Gp(a,g,u,_),Hp(r),g=k0(),r!==null&&!Er?(B0(r,a,b),Ta(r,a,b)):(Zt&&g&&p0(a),a.flags|=1,zr(r,a,u,b),a.child)}function z2(r,a,u,g,_){if(ol(a),a.stateNode===null){var b=kl,O=u.contextType;typeof O=="object"&&O!==null&&(b=Fr(O)),b=new u(g,b),a.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=J0,a.stateNode=b,b._reactInternals=a,b=a.stateNode,b.props=g,b.state=a.memoizedState,b.refs={},C0(a),O=u.contextType,b.context=typeof O=="object"&&O!==null?Fr(O):kl,b.state=a.memoizedState,O=u.getDerivedStateFromProps,typeof O=="function"&&(Z0(a,u,O,g),b.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(O=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),O!==b.state&&J0.enqueueReplaceState(b,b.state,null),eu(a,g,b,_),$c(),b.state=a.memoizedState),typeof b.componentDidMount=="function"&&(a.flags|=4194308),g=!0}else if(r===null){b=a.stateNode;var U=a.memoizedProps,ee=dl(u,U);b.props=ee;var ge=b.context,Te=u.contextType;O=kl,typeof Te=="object"&&Te!==null&&(O=Fr(Te));var Ce=u.getDerivedStateFromProps;Te=typeof Ce=="function"||typeof b.getSnapshotBeforeUpdate=="function",U=a.pendingProps!==U,Te||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(U||ge!==O)&&I2(a,b,g,O),ao=!1;var pe=a.memoizedState;b.state=pe,eu(a,g,b,_),$c(),ge=a.memoizedState,U||pe!==ge||ao?(typeof Ce=="function"&&(Z0(a,u,Ce,g),ge=a.memoizedState),(ee=ao||C2(a,u,ee,g,pe,ge,O))?(Te||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(a.flags|=4194308)):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=g,a.memoizedState=ge),b.props=g,b.state=ge,b.context=O,g=ee):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),g=!1)}else{b=a.stateNode,I0(r,a),O=a.memoizedProps,Te=dl(u,O),b.props=Te,Ce=a.pendingProps,pe=b.context,ge=u.contextType,ee=kl,typeof ge=="object"&&ge!==null&&(ee=Fr(ge)),U=u.getDerivedStateFromProps,(ge=typeof U=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(O!==Ce||pe!==ee)&&I2(a,b,g,ee),ao=!1,pe=a.memoizedState,b.state=pe,eu(a,g,b,_),$c();var we=a.memoizedState;O!==Ce||pe!==we||ao||r!==null&&r.dependencies!==null&&Nh(r.dependencies)?(typeof U=="function"&&(Z0(a,u,U,g),we=a.memoizedState),(Te=ao||C2(a,u,Te,g,pe,we,ee)||r!==null&&r.dependencies!==null&&Nh(r.dependencies))?(ge||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(g,we,ee),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(g,we,ee)),typeof b.componentDidUpdate=="function"&&(a.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof b.componentDidUpdate!="function"||O===r.memoizedProps&&pe===r.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||O===r.memoizedProps&&pe===r.memoizedState||(a.flags|=1024),a.memoizedProps=g,a.memoizedState=we),b.props=g,b.state=we,b.context=ee,g=Te):(typeof b.componentDidUpdate!="function"||O===r.memoizedProps&&pe===r.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||O===r.memoizedProps&&pe===r.memoizedState||(a.flags|=1024),g=!1)}return b=g,Wh(r,a),g=(a.flags&128)!==0,b||g?(b=a.stateNode,u=g&&typeof u.getDerivedStateFromError!="function"?null:b.render(),a.flags|=1,r!==null&&g?(a.child=hl(a,r.child,null,_),a.child=hl(a,null,u,_)):zr(r,a,u,_),a.memoizedState=b.state,r=a.child):r=Ta(r,a,_),r}function H2(r,a,u,g){return sl(),a.flags|=256,zr(r,a,u,g),a.child}var n1={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function r1(r){return{baseLanes:r,cachePool:Dp()}}function i1(r,a,u){return r=r!==null?r.childLanes&~u:0,a&&(r|=Xi),r}function G2(r,a,u){var g=a.pendingProps,_=!1,b=(a.flags&128)!==0,O;if((O=b)||(O=r!==null&&r.memoizedState===null?!1:(or.current&2)!==0),O&&(_=!0,a.flags&=-129),O=(a.flags&32)!==0,a.flags&=-33,r===null){if(Zt){if(_?co(a):uo(),(r=Mn)?(r=Jx(r,Es),r=r!==null&&r.data!=="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:no!==null?{id:zs,overflow:Hs}:null,retryLane:536870912,hydrationErrors:null},u=bp(r),u.return=a,a.child=u,jr=a,Mn=null)):r=null,r===null)throw io(a);return j1(r)?a.lanes=32:a.lanes=536870912,null}var U=g.children;return g=g.fallback,_?(uo(),_=a.mode,U=Kh({mode:"hidden",children:U},_),g=il(g,_,u,null),U.return=a,g.return=a,U.sibling=g,a.child=U,g=a.child,g.memoizedState=r1(u),g.childLanes=i1(r,O,u),a.memoizedState=n1,su(null,g)):(co(a),s1(a,U))}var ee=r.memoizedState;if(ee!==null&&(U=ee.dehydrated,U!==null)){if(b)a.flags&256?(co(a),a.flags&=-257,a=a1(r,a,u)):a.memoizedState!==null?(uo(),a.child=r.child,a.flags|=128,a=null):(uo(),U=g.fallback,_=a.mode,g=Kh({mode:"visible",children:g.children},_),U=il(U,_,u,null),U.flags|=2,g.return=a,U.return=a,g.sibling=U,a.child=g,hl(a,r.child,null,u),g=a.child,g.memoizedState=r1(u),g.childLanes=i1(r,O,u),a.memoizedState=n1,a=su(null,g));else if(co(a),j1(U)){if(O=U.nextSibling&&U.nextSibling.dataset,O)var ge=O.dgst;O=ge,g=Error(s(419)),g.stack="",g.digest=O,Xc({value:g,source:null,stack:null}),a=a1(r,a,u)}else if(Er||jl(r,a,u,!1),O=(u&r.childLanes)!==0,Er||O){if(O=In,O!==null&&(g=Li(O,u),g!==0&&g!==ee.retryLane))throw ee.retryLane=g,rl(r,g),Di(O,r,g),e1;V1(U)||sf(),a=a1(r,a,u)}else V1(U)?(a.flags|=192,a.child=r.child,a=null):(r=ee.treeContext,Mn=ws(U.nextSibling),jr=a,Zt=!0,ro=null,Es=!1,r!==null&&Sp(a,r),a=s1(a,g.children),a.flags|=4096);return a}return _?(uo(),U=g.fallback,_=a.mode,ee=r.child,ge=ee.sibling,g=ya(ee,{mode:"hidden",children:g.children}),g.subtreeFlags=ee.subtreeFlags&65011712,ge!==null?U=ya(ge,U):(U=il(U,_,u,null),U.flags|=2),U.return=a,g.return=a,g.sibling=U,a.child=g,su(null,g),g=a.child,U=r.child.memoizedState,U===null?U=r1(u):(_=U.cachePool,_!==null?(ee=xr._currentValue,_=_.parent!==ee?{parent:ee,pool:ee}:_):_=Dp(),U={baseLanes:U.baseLanes|u,cachePool:_}),g.memoizedState=U,g.childLanes=i1(r,O,u),a.memoizedState=n1,su(r.child,g)):(co(a),u=r.child,r=u.sibling,u=ya(u,{mode:"visible",children:g.children}),u.return=a,u.sibling=null,r!==null&&(O=a.deletions,O===null?(a.deletions=[r],a.flags|=16):O.push(r)),a.child=u,a.memoizedState=null,u)}function s1(r,a){return a=Kh({mode:"visible",children:a},r.mode),a.return=r,r.child=a}function Kh(r,a){return r=Hi(22,r,null,a),r.lanes=0,r}function a1(r,a,u){return hl(a,r.child,null,u),r=s1(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function q2(r,a,u){r.lanes|=a;var g=r.alternate;g!==null&&(g.lanes|=a),w0(r.return,a,u)}function o1(r,a,u,g,_,b){var O=r.memoizedState;O===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:g,tail:u,tailMode:_,treeForkCount:b}:(O.isBackwards=a,O.rendering=null,O.renderingStartTime=0,O.last=g,O.tail=u,O.tailMode=_,O.treeForkCount=b)}function Y2(r,a,u){var g=a.pendingProps,_=g.revealOrder,b=g.tail;g=g.children;var O=or.current,U=(O&2)!==0;if(U?(O=O&1|2,a.flags|=128):O&=1,Ue(or,O),zr(r,a,g,u),g=Zt?Yc:0,!U&&r!==null&&(r.flags&128)!==0)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&q2(r,u,a);else if(r.tag===19)q2(r,u,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(_){case"forwards":for(u=a.child,_=null;u!==null;)r=u.alternate,r!==null&&Bh(r)===null&&(_=u),u=u.sibling;u=_,u===null?(_=a.child,a.child=null):(_=u.sibling,u.sibling=null),o1(a,!1,_,u,b,g);break;case"backwards":case"unstable_legacy-backwards":for(u=null,_=a.child,a.child=null;_!==null;){if(r=_.alternate,r!==null&&Bh(r)===null){a.child=_;break}r=_.sibling,_.sibling=u,u=_,_=r}o1(a,!0,u,null,b,g);break;case"together":o1(a,!1,null,null,void 0,g);break;default:a.memoizedState=null}return a.child}function Ta(r,a,u){if(r!==null&&(a.dependencies=r.dependencies),go|=a.lanes,(u&a.childLanes)===0)if(r!==null){if(jl(r,a,u,!1),(u&a.childLanes)===0)return null}else return null;if(r!==null&&a.child!==r.child)throw Error(s(153));if(a.child!==null){for(r=a.child,u=ya(r,r.pendingProps),a.child=u,u.return=a;r.sibling!==null;)r=r.sibling,u=u.sibling=ya(r,r.pendingProps),u.return=a;u.sibling=null}return a.child}function l1(r,a){return(r.lanes&a)!==0?!0:(r=r.dependencies,!!(r!==null&&Nh(r)))}function Wv(r,a,u){switch(a.tag){case 3:Ct(a,a.stateNode.containerInfo),so(a,xr,r.memoizedState.cache),sl();break;case 27:case 5:Wr(a);break;case 4:Ct(a,a.stateNode.containerInfo);break;case 10:so(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,M0(a),null;break;case 13:var g=a.memoizedState;if(g!==null)return g.dehydrated!==null?(co(a),a.flags|=128,null):(u&a.child.childLanes)!==0?G2(r,a,u):(co(a),r=Ta(r,a,u),r!==null?r.sibling:null);co(a);break;case 19:var _=(r.flags&128)!==0;if(g=(u&a.childLanes)!==0,g||(jl(r,a,u,!1),g=(u&a.childLanes)!==0),_){if(g)return Y2(r,a,u);a.flags|=128}if(_=a.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),Ue(or,or.current),g)break;return null;case 22:return a.lanes=0,U2(r,a,u,a.pendingProps);case 24:so(a,xr,r.memoizedState.cache)}return Ta(r,a,u)}function X2(r,a,u){if(r!==null)if(r.memoizedProps!==a.pendingProps)Er=!0;else{if(!l1(r,u)&&(a.flags&128)===0)return Er=!1,Wv(r,a,u);Er=(r.flags&131072)!==0}else Er=!1,Zt&&(a.flags&1048576)!==0&&vp(a,Yc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var g=a.pendingProps;if(r=cl(a.elementType),a.type=r,typeof r=="function")d0(r)?(g=dl(r,g),a.tag=1,a=z2(null,a,r,g,u)):(a.tag=0,a=t1(null,a,r,g,u));else{if(r!=null){var _=r.$$typeof;if(_===le){a.tag=11,a=L2(null,a,r,g,u);break e}else if(_===j){a.tag=14,a=k2(null,a,r,g,u);break e}}throw a=Je(r)||r,Error(s(306,a,""))}}return a;case 0:return t1(r,a,a.type,a.pendingProps,u);case 1:return g=a.type,_=dl(g,a.pendingProps),z2(r,a,g,_,u);case 3:e:{if(Ct(a,a.stateNode.containerInfo),r===null)throw Error(s(387));g=a.pendingProps;var b=a.memoizedState;_=b.element,I0(r,a),eu(a,g,null,u);var O=a.memoizedState;if(g=O.cache,so(a,xr,g),g!==b.cache&&A0(a,[xr],u,!0),$c(),g=O.element,b.isDehydrated)if(b={element:g,isDehydrated:!1,cache:O.cache},a.updateQueue.baseState=b,a.memoizedState=b,a.flags&256){a=H2(r,a,g,u);break e}else if(g!==_){_=ps(Error(s(424)),a),Xc(_),a=H2(r,a,g,u);break e}else{switch(r=a.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Mn=ws(r.firstChild),jr=a,Zt=!0,ro=null,Es=!0,u=Up(a,null,g,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(sl(),g===_){a=Ta(r,a,u);break e}zr(r,a,g,u)}a=a.child}return a;case 26:return Wh(r,a),r===null?(u=iy(a.type,null,a.pendingProps,null))?a.memoizedState=u:Zt||(u=a.type,r=a.pendingProps,g=ff(Le.current).createElement(u),g[vn]=a,g[Wt]=r,Hr(g,u,r),Rn(g),a.stateNode=g):a.memoizedState=iy(a.type,r.memoizedProps,a.pendingProps,r.memoizedState),null;case 27:return Wr(a),r===null&&Zt&&(g=a.stateNode=ty(a.type,a.pendingProps,Le.current),jr=a,Es=!0,_=Mn,Eo(a.type)?(F1=_,Mn=ws(g.firstChild)):Mn=_),zr(r,a,a.pendingProps.children,u),Wh(r,a),r===null&&(a.flags|=4194304),a.child;case 5:return r===null&&Zt&&((_=g=Mn)&&(g=TS(g,a.type,a.pendingProps,Es),g!==null?(a.stateNode=g,jr=a,Mn=ws(g.firstChild),Es=!1,_=!0):_=!1),_||io(a)),Wr(a),_=a.type,b=a.pendingProps,O=r!==null?r.memoizedProps:null,g=b.children,k1(_,b)?g=null:O!==null&&k1(_,O)&&(a.flags|=32),a.memoizedState!==null&&(_=L0(r,a,Vv,null,null,u),_u._currentValue=_),Wh(r,a),zr(r,a,g,u),a.child;case 6:return r===null&&Zt&&((r=u=Mn)&&(u=vS(u,a.pendingProps,Es),u!==null?(a.stateNode=u,jr=a,Mn=null,r=!0):r=!1),r||io(a)),null;case 13:return G2(r,a,u);case 4:return Ct(a,a.stateNode.containerInfo),g=a.pendingProps,r===null?a.child=hl(a,null,g,u):zr(r,a,g,u),a.child;case 11:return L2(r,a,a.type,a.pendingProps,u);case 7:return zr(r,a,a.pendingProps,u),a.child;case 8:return zr(r,a,a.pendingProps.children,u),a.child;case 12:return zr(r,a,a.pendingProps.children,u),a.child;case 10:return g=a.pendingProps,so(a,a.type,g.value),zr(r,a,g.children,u),a.child;case 9:return _=a.type._context,g=a.pendingProps.children,ol(a),_=Fr(_),g=g(_),a.flags|=1,zr(r,a,g,u),a.child;case 14:return k2(r,a,a.type,a.pendingProps,u);case 15:return B2(r,a,a.type,a.pendingProps,u);case 19:return Y2(r,a,u);case 31:return Xv(r,a,u);case 22:return U2(r,a,u,a.pendingProps);case 24:return ol(a),g=Fr(xr),r===null?(_=v0(),_===null&&(_=In,b=b0(),_.pooledCache=b,b.refCount++,b!==null&&(_.pooledCacheLanes|=u),_=b),a.memoizedState={parent:g,cache:_},C0(a),so(a,xr,_)):((r.lanes&u)!==0&&(I0(r,a),eu(a,null,null,u),$c()),_=r.memoizedState,b=a.memoizedState,_.parent!==g?(_={parent:g,cache:g},a.memoizedState=_,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=_),so(a,xr,g)):(g=b.cache,so(a,xr,g),g!==_.cache&&A0(a,[xr],u,!0))),zr(r,a,a.pendingProps.children,u),a.child;case 29:throw a.pendingProps}throw Error(s(156,a.tag))}function va(r){r.flags|=4}function c1(r,a,u,g,_){if((a=(r.mode&32)!==0)&&(a=!1),a){if(r.flags|=16777216,(_&335544128)===_)if(r.stateNode.complete)r.flags|=8192;else if(_x())r.flags|=8192;else throw ul=Mh,S0}else r.flags&=-16777217}function W2(r,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!cy(a))if(_x())r.flags|=8192;else throw ul=Mh,S0}function Qh(r,a){a!==null&&(r.flags|=4),r.flags&16384&&(a=r.tag!==22?Un():536870912,r.lanes|=a,Jl|=a)}function au(r,a){if(!Zt)switch(r.tailMode){case"hidden":a=r.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?r.tail=null:u.sibling=null;break;case"collapsed":u=r.tail;for(var g=null;u!==null;)u.alternate!==null&&(g=u),u=u.sibling;g===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:g.sibling=null}}function Pn(r){var a=r.alternate!==null&&r.alternate.child===r.child,u=0,g=0;if(a)for(var _=r.child;_!==null;)u|=_.lanes|_.childLanes,g|=_.subtreeFlags&65011712,g|=_.flags&65011712,_.return=r,_=_.sibling;else for(_=r.child;_!==null;)u|=_.lanes|_.childLanes,g|=_.subtreeFlags,g|=_.flags,_.return=r,_=_.sibling;return r.subtreeFlags|=g,r.childLanes=u,a}function Kv(r,a,u){var g=a.pendingProps;switch(x0(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pn(a),null;case 1:return Pn(a),null;case 3:return u=a.stateNode,g=null,r!==null&&(g=r.memoizedState.cache),a.memoizedState.cache!==g&&(a.flags|=2048),wa(xr),Jt(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(r===null||r.child===null)&&(Vl(a)?va(a):r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,E0())),Pn(a),null;case 26:var _=a.type,b=a.memoizedState;return r===null?(va(a),b!==null?(Pn(a),W2(a,b)):(Pn(a),c1(a,_,null,g,u))):b?b!==r.memoizedState?(va(a),Pn(a),W2(a,b)):(Pn(a),a.flags&=-16777217):(r=r.memoizedProps,r!==g&&va(a),Pn(a),c1(a,_,r,g,u)),null;case 27:if(Bn(a),u=Le.current,_=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==g&&va(a);else{if(!g){if(a.stateNode===null)throw Error(s(166));return Pn(a),null}r=Ve.current,Vl(a)?Cp(a):(r=ty(_,g,u),a.stateNode=r,va(a))}return Pn(a),null;case 5:if(Bn(a),_=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==g&&va(a);else{if(!g){if(a.stateNode===null)throw Error(s(166));return Pn(a),null}if(b=Ve.current,Vl(a))Cp(a);else{var O=ff(Le.current);switch(b){case 1:b=O.createElementNS("http://www.w3.org/2000/svg",_);break;case 2:b=O.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;default:switch(_){case"svg":b=O.createElementNS("http://www.w3.org/2000/svg",_);break;case"math":b=O.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;case"script":b=O.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof g.is=="string"?O.createElement("select",{is:g.is}):O.createElement("select"),g.multiple?b.multiple=!0:g.size&&(b.size=g.size);break;default:b=typeof g.is=="string"?O.createElement(_,{is:g.is}):O.createElement(_)}}b[vn]=a,b[Wt]=g;e:for(O=a.child;O!==null;){if(O.tag===5||O.tag===6)b.appendChild(O.stateNode);else if(O.tag!==4&&O.tag!==27&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===a)break e;for(;O.sibling===null;){if(O.return===null||O.return===a)break e;O=O.return}O.sibling.return=O.return,O=O.sibling}a.stateNode=b;e:switch(Hr(b,_,g),_){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&va(a)}}return Pn(a),c1(a,a.type,r===null?null:r.memoizedProps,a.pendingProps,u),null;case 6:if(r&&a.stateNode!=null)r.memoizedProps!==g&&va(a);else{if(typeof g!="string"&&a.stateNode===null)throw Error(s(166));if(r=Le.current,Vl(a)){if(r=a.stateNode,u=a.memoizedProps,g=null,_=jr,_!==null)switch(_.tag){case 27:case 5:g=_.memoizedProps}r[vn]=a,r=!!(r.nodeValue===u||g!==null&&g.suppressHydrationWarning===!0||Gx(r.nodeValue,u)),r||io(a,!0)}else r=ff(r).createTextNode(g),r[vn]=a,a.stateNode=r}return Pn(a),null;case 31:if(u=a.memoizedState,r===null||r.memoizedState!==null){if(g=Vl(a),u!==null){if(r===null){if(!g)throw Error(s(318));if(r=a.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(557));r[vn]=a}else sl(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Pn(a),r=!1}else u=E0(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=u),r=!0;if(!r)return a.flags&256?(qi(a),a):(qi(a),null);if((a.flags&128)!==0)throw Error(s(558))}return Pn(a),null;case 13:if(g=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(_=Vl(a),g!==null&&g.dehydrated!==null){if(r===null){if(!_)throw Error(s(318));if(_=a.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(s(317));_[vn]=a}else sl(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Pn(a),_=!1}else _=E0(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=_),_=!0;if(!_)return a.flags&256?(qi(a),a):(qi(a),null)}return qi(a),(a.flags&128)!==0?(a.lanes=u,a):(u=g!==null,r=r!==null&&r.memoizedState!==null,u&&(g=a.child,_=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(_=g.alternate.memoizedState.cachePool.pool),b=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(b=g.memoizedState.cachePool.pool),b!==_&&(g.flags|=2048)),u!==r&&u&&(a.child.flags|=8192),Qh(a,a.updateQueue),Pn(a),null);case 4:return Jt(),r===null&&O1(a.stateNode.containerInfo),Pn(a),null;case 10:return wa(a.type),Pn(a),null;case 19:if(Ae(or),g=a.memoizedState,g===null)return Pn(a),null;if(_=(a.flags&128)!==0,b=g.rendering,b===null)if(_)au(g,!1);else{if($n!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(b=Bh(r),b!==null){for(a.flags|=128,au(g,!1),r=b.updateQueue,a.updateQueue=r,Qh(a,r),a.subtreeFlags=0,r=u,u=a.child;u!==null;)Ap(u,r),u=u.sibling;return Ue(or,or.current&1|2),Zt&&Ea(a,g.treeForkCount),a.child}r=r.sibling}g.tail!==null&&pn()>tf&&(a.flags|=128,_=!0,au(g,!1),a.lanes=4194304)}else{if(!_)if(r=Bh(b),r!==null){if(a.flags|=128,_=!0,r=r.updateQueue,a.updateQueue=r,Qh(a,r),au(g,!0),g.tail===null&&g.tailMode==="hidden"&&!b.alternate&&!Zt)return Pn(a),null}else 2*pn()-g.renderingStartTime>tf&&u!==536870912&&(a.flags|=128,_=!0,au(g,!1),a.lanes=4194304);g.isBackwards?(b.sibling=a.child,a.child=b):(r=g.last,r!==null?r.sibling=b:a.child=b,g.last=b)}return g.tail!==null?(r=g.tail,g.rendering=r,g.tail=r.sibling,g.renderingStartTime=pn(),r.sibling=null,u=or.current,Ue(or,_?u&1|2:u&1),Zt&&Ea(a,g.treeForkCount),r):(Pn(a),null);case 22:case 23:return qi(a),D0(),g=a.memoizedState!==null,r!==null?r.memoizedState!==null!==g&&(a.flags|=8192):g&&(a.flags|=8192),g?(u&536870912)!==0&&(a.flags&128)===0&&(Pn(a),a.subtreeFlags&6&&(a.flags|=8192)):Pn(a),u=a.updateQueue,u!==null&&Qh(a,u.retryQueue),u=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),g=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(g=a.memoizedState.cachePool.pool),g!==u&&(a.flags|=2048),r!==null&&Ae(ll),null;case 24:return u=null,r!==null&&(u=r.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),wa(xr),Pn(a),null;case 25:return null;case 30:return null}throw Error(s(156,a.tag))}function Qv(r,a){switch(x0(a),a.tag){case 1:return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return wa(xr),Jt(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 26:case 27:case 5:return Bn(a),null;case 31:if(a.memoizedState!==null){if(qi(a),a.alternate===null)throw Error(s(340));sl()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 13:if(qi(a),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(s(340));sl()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return Ae(or),null;case 4:return Jt(),null;case 10:return wa(a.type),null;case 22:case 23:return qi(a),D0(),r!==null&&Ae(ll),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 24:return wa(xr),null;case 25:return null;default:return null}}function K2(r,a){switch(x0(a),a.tag){case 3:wa(xr),Jt();break;case 26:case 27:case 5:Bn(a);break;case 4:Jt();break;case 31:a.memoizedState!==null&&qi(a);break;case 13:qi(a);break;case 19:Ae(or);break;case 10:wa(a.type);break;case 22:case 23:qi(a),D0(),r!==null&&Ae(ll);break;case 24:wa(xr)}}function ou(r,a){try{var u=a.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var _=g.next;u=_;do{if((u.tag&r)===r){g=void 0;var b=u.create,O=u.inst;g=b(),O.destroy=g}u=u.next}while(u!==_)}}catch(U){gn(a,a.return,U)}}function ho(r,a,u){try{var g=a.updateQueue,_=g!==null?g.lastEffect:null;if(_!==null){var b=_.next;g=b;do{if((g.tag&r)===r){var O=g.inst,U=O.destroy;if(U!==void 0){O.destroy=void 0,_=a;var ee=u,ge=U;try{ge()}catch(Te){gn(_,ee,Te)}}}g=g.next}while(g!==b)}}catch(Te){gn(a,a.return,Te)}}function Q2(r){var a=r.updateQueue;if(a!==null){var u=r.stateNode;try{jp(a,u)}catch(g){gn(r,r.return,g)}}}function Z2(r,a,u){u.props=dl(r.type,r.memoizedProps),u.state=r.memoizedState;try{u.componentWillUnmount()}catch(g){gn(r,a,g)}}function lu(r,a){try{var u=r.ref;if(u!==null){switch(r.tag){case 26:case 27:case 5:var g=r.stateNode;break;case 30:g=r.stateNode;break;default:g=r.stateNode}typeof u=="function"?r.refCleanup=u(g):u.current=g}}catch(_){gn(r,a,_)}}function Gs(r,a){var u=r.ref,g=r.refCleanup;if(u!==null)if(typeof g=="function")try{g()}catch(_){gn(r,a,_)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(_){gn(r,a,_)}else u.current=null}function J2(r){var a=r.type,u=r.memoizedProps,g=r.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":u.autoFocus&&g.focus();break e;case"img":u.src?g.src=u.src:u.srcSet&&(g.srcset=u.srcSet)}}catch(_){gn(r,r.return,_)}}function u1(r,a,u){try{var g=r.stateNode;yS(g,r.type,u,a),g[Wt]=a}catch(_){gn(r,r.return,_)}}function $2(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Eo(r.type)||r.tag===4}function h1(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||$2(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Eo(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function f1(r,a,u){var g=r.tag;if(g===5||g===6)r=r.stateNode,a?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(r,a):(a=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,a.appendChild(r),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=ni));else if(g!==4&&(g===27&&Eo(r.type)&&(u=r.stateNode,a=null),r=r.child,r!==null))for(f1(r,a,u),r=r.sibling;r!==null;)f1(r,a,u),r=r.sibling}function Zh(r,a,u){var g=r.tag;if(g===5||g===6)r=r.stateNode,a?u.insertBefore(r,a):u.appendChild(r);else if(g!==4&&(g===27&&Eo(r.type)&&(u=r.stateNode),r=r.child,r!==null))for(Zh(r,a,u),r=r.sibling;r!==null;)Zh(r,a,u),r=r.sibling}function ex(r){var a=r.stateNode,u=r.memoizedProps;try{for(var g=r.type,_=a.attributes;_.length;)a.removeAttributeNode(_[0]);Hr(a,g,u),a[vn]=r,a[Wt]=u}catch(b){gn(r,r.return,b)}}var Sa=!1,_r=!1,d1=!1,tx=typeof WeakSet=="function"?WeakSet:Set,Pr=null;function Zv(r,a){if(r=r.containerInfo,P1=Ef,r=L(r),k(r)){if("selectionStart"in r)var u={start:r.selectionStart,end:r.selectionEnd};else e:{u=(u=r.ownerDocument)&&u.defaultView||window;var g=u.getSelection&&u.getSelection();if(g&&g.rangeCount!==0){u=g.anchorNode;var _=g.anchorOffset,b=g.focusNode;g=g.focusOffset;try{u.nodeType,b.nodeType}catch{u=null;break e}var O=0,U=-1,ee=-1,ge=0,Te=0,Ce=r,pe=null;t:for(;;){for(var we;Ce!==u||_!==0&&Ce.nodeType!==3||(U=O+_),Ce!==b||g!==0&&Ce.nodeType!==3||(ee=O+g),Ce.nodeType===3&&(O+=Ce.nodeValue.length),(we=Ce.firstChild)!==null;)pe=Ce,Ce=we;for(;;){if(Ce===r)break t;if(pe===u&&++ge===_&&(U=O),pe===b&&++Te===g&&(ee=O),(we=Ce.nextSibling)!==null)break;Ce=pe,pe=Ce.parentNode}Ce=we}u=U===-1||ee===-1?null:{start:U,end:ee}}else u=null}u=u||{start:0,end:0}}else u=null;for(L1={focusedElem:r,selectionRange:u},Ef=!1,Pr=a;Pr!==null;)if(a=Pr,r=a.child,(a.subtreeFlags&1028)!==0&&r!==null)r.return=a,Pr=r;else for(;Pr!==null;){switch(a=Pr,b=a.alternate,r=a.flags,a.tag){case 0:if((r&4)!==0&&(r=a.updateQueue,r=r!==null?r.events:null,r!==null))for(u=0;u<r.length;u++)_=r[u],_.ref.impl=_.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&b!==null){r=void 0,u=a,_=b.memoizedProps,b=b.memoizedState,g=u.stateNode;try{var Ke=dl(u.type,_);r=g.getSnapshotBeforeUpdate(Ke,b),g.__reactInternalSnapshotBeforeUpdate=r}catch(ct){gn(u,u.return,ct)}}break;case 3:if((r&1024)!==0){if(r=a.stateNode.containerInfo,u=r.nodeType,u===9)U1(r);else if(u===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":U1(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(s(163))}if(r=a.sibling,r!==null){r.return=a.return,Pr=r;break}Pr=a.return}}function nx(r,a,u){var g=u.flags;switch(u.tag){case 0:case 11:case 15:Ia(r,u),g&4&&ou(5,u);break;case 1:if(Ia(r,u),g&4)if(r=u.stateNode,a===null)try{r.componentDidMount()}catch(O){gn(u,u.return,O)}else{var _=dl(u.type,a.memoizedProps);a=a.memoizedState;try{r.componentDidUpdate(_,a,r.__reactInternalSnapshotBeforeUpdate)}catch(O){gn(u,u.return,O)}}g&64&&Q2(u),g&512&&lu(u,u.return);break;case 3:if(Ia(r,u),g&64&&(r=u.updateQueue,r!==null)){if(a=null,u.child!==null)switch(u.child.tag){case 27:case 5:a=u.child.stateNode;break;case 1:a=u.child.stateNode}try{jp(r,a)}catch(O){gn(u,u.return,O)}}break;case 27:a===null&&g&4&&ex(u);case 26:case 5:Ia(r,u),a===null&&g&4&&J2(u),g&512&&lu(u,u.return);break;case 12:Ia(r,u);break;case 31:Ia(r,u),g&4&&sx(r,u);break;case 13:Ia(r,u),g&4&&ax(r,u),g&64&&(r=u.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(u=aS.bind(null,u),SS(r,u))));break;case 22:if(g=u.memoizedState!==null||Sa,!g){a=a!==null&&a.memoizedState!==null||_r,_=Sa;var b=_r;Sa=g,(_r=a)&&!b?Na(r,u,(u.subtreeFlags&8772)!==0):Ia(r,u),Sa=_,_r=b}break;case 30:break;default:Ia(r,u)}}function rx(r){var a=r.alternate;a!==null&&(r.alternate=null,rx(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&pr(a)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var zn=null,Ii=!1;function Ca(r,a,u){for(u=u.child;u!==null;)ix(r,a,u),u=u.sibling}function ix(r,a,u){if(Me&&typeof Me.onCommitFiberUnmount=="function")try{Me.onCommitFiberUnmount(Yt,u)}catch{}switch(u.tag){case 26:_r||Gs(u,a),Ca(r,a,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:_r||Gs(u,a);var g=zn,_=Ii;Eo(u.type)&&(zn=u.stateNode,Ii=!1),Ca(r,a,u),xu(u.stateNode),zn=g,Ii=_;break;case 5:_r||Gs(u,a);case 6:if(g=zn,_=Ii,zn=null,Ca(r,a,u),zn=g,Ii=_,zn!==null)if(Ii)try{(zn.nodeType===9?zn.body:zn.nodeName==="HTML"?zn.ownerDocument.body:zn).removeChild(u.stateNode)}catch(b){gn(u,a,b)}else try{zn.removeChild(u.stateNode)}catch(b){gn(u,a,b)}break;case 18:zn!==null&&(Ii?(r=zn,Qx(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,u.stateNode),ac(r)):Qx(zn,u.stateNode));break;case 4:g=zn,_=Ii,zn=u.stateNode.containerInfo,Ii=!0,Ca(r,a,u),zn=g,Ii=_;break;case 0:case 11:case 14:case 15:ho(2,u,a),_r||ho(4,u,a),Ca(r,a,u);break;case 1:_r||(Gs(u,a),g=u.stateNode,typeof g.componentWillUnmount=="function"&&Z2(u,a,g)),Ca(r,a,u);break;case 21:Ca(r,a,u);break;case 22:_r=(g=_r)||u.memoizedState!==null,Ca(r,a,u),_r=g;break;default:Ca(r,a,u)}}function sx(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{ac(r)}catch(u){gn(a,a.return,u)}}}function ax(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{ac(r)}catch(u){gn(a,a.return,u)}}function Jv(r){switch(r.tag){case 31:case 13:case 19:var a=r.stateNode;return a===null&&(a=r.stateNode=new tx),a;case 22:return r=r.stateNode,a=r._retryCache,a===null&&(a=r._retryCache=new tx),a;default:throw Error(s(435,r.tag))}}function Jh(r,a){var u=Jv(r);a.forEach(function(g){if(!u.has(g)){u.add(g);var _=oS.bind(null,r,g);g.then(_,_)}})}function Ni(r,a){var u=a.deletions;if(u!==null)for(var g=0;g<u.length;g++){var _=u[g],b=r,O=a,U=O;e:for(;U!==null;){switch(U.tag){case 27:if(Eo(U.type)){zn=U.stateNode,Ii=!1;break e}break;case 5:zn=U.stateNode,Ii=!1;break e;case 3:case 4:zn=U.stateNode.containerInfo,Ii=!0;break e}U=U.return}if(zn===null)throw Error(s(160));ix(b,O,_),zn=null,Ii=!1,b=_.alternate,b!==null&&(b.return=null),_.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)ox(a,r),a=a.sibling}var Rs=null;function ox(r,a){var u=r.alternate,g=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Ni(a,r),Ri(r),g&4&&(ho(3,r,r.return),ou(3,r),ho(5,r,r.return));break;case 1:Ni(a,r),Ri(r),g&512&&(_r||u===null||Gs(u,u.return)),g&64&&Sa&&(r=r.updateQueue,r!==null&&(g=r.callbacks,g!==null&&(u=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=u===null?g:u.concat(g))));break;case 26:var _=Rs;if(Ni(a,r),Ri(r),g&512&&(_r||u===null||Gs(u,u.return)),g&4){var b=u!==null?u.memoizedState:null;if(g=r.memoizedState,u===null)if(g===null)if(r.stateNode===null){e:{g=r.type,u=r.memoizedProps,_=_.ownerDocument||_;t:switch(g){case"title":b=_.getElementsByTagName("title")[0],(!b||b[Ai]||b[vn]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=_.createElement(g),_.head.insertBefore(b,_.querySelector("head > title"))),Hr(b,g,u),b[vn]=r,Rn(b),g=b;break e;case"link":var O=oy("link","href",_).get(g+(u.href||""));if(O){for(var U=0;U<O.length;U++)if(b=O[U],b.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&b.getAttribute("rel")===(u.rel==null?null:u.rel)&&b.getAttribute("title")===(u.title==null?null:u.title)&&b.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){O.splice(U,1);break t}}b=_.createElement(g),Hr(b,g,u),_.head.appendChild(b);break;case"meta":if(O=oy("meta","content",_).get(g+(u.content||""))){for(U=0;U<O.length;U++)if(b=O[U],b.getAttribute("content")===(u.content==null?null:""+u.content)&&b.getAttribute("name")===(u.name==null?null:u.name)&&b.getAttribute("property")===(u.property==null?null:u.property)&&b.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&b.getAttribute("charset")===(u.charSet==null?null:u.charSet)){O.splice(U,1);break t}}b=_.createElement(g),Hr(b,g,u),_.head.appendChild(b);break;default:throw Error(s(468,g))}b[vn]=r,Rn(b),g=b}r.stateNode=g}else ly(_,r.type,r.stateNode);else r.stateNode=ay(_,g,r.memoizedProps);else b!==g?(b===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):b.count--,g===null?ly(_,r.type,r.stateNode):ay(_,g,r.memoizedProps)):g===null&&r.stateNode!==null&&u1(r,r.memoizedProps,u.memoizedProps)}break;case 27:Ni(a,r),Ri(r),g&512&&(_r||u===null||Gs(u,u.return)),u!==null&&g&4&&u1(r,r.memoizedProps,u.memoizedProps);break;case 5:if(Ni(a,r),Ri(r),g&512&&(_r||u===null||Gs(u,u.return)),r.flags&32){_=r.stateNode;try{ti(_,"")}catch(Ke){gn(r,r.return,Ke)}}g&4&&r.stateNode!=null&&(_=r.memoizedProps,u1(r,_,u!==null?u.memoizedProps:_)),g&1024&&(d1=!0);break;case 6:if(Ni(a,r),Ri(r),g&4){if(r.stateNode===null)throw Error(s(162));g=r.memoizedProps,u=r.stateNode;try{u.nodeValue=g}catch(Ke){gn(r,r.return,Ke)}}break;case 3:if(mf=null,_=Rs,Rs=df(a.containerInfo),Ni(a,r),Rs=_,Ri(r),g&4&&u!==null&&u.memoizedState.isDehydrated)try{ac(a.containerInfo)}catch(Ke){gn(r,r.return,Ke)}d1&&(d1=!1,lx(r));break;case 4:g=Rs,Rs=df(r.stateNode.containerInfo),Ni(a,r),Ri(r),Rs=g;break;case 12:Ni(a,r),Ri(r);break;case 31:Ni(a,r),Ri(r),g&4&&(g=r.updateQueue,g!==null&&(r.updateQueue=null,Jh(r,g)));break;case 13:Ni(a,r),Ri(r),r.child.flags&8192&&r.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(ef=pn()),g&4&&(g=r.updateQueue,g!==null&&(r.updateQueue=null,Jh(r,g)));break;case 22:_=r.memoizedState!==null;var ee=u!==null&&u.memoizedState!==null,ge=Sa,Te=_r;if(Sa=ge||_,_r=Te||ee,Ni(a,r),_r=Te,Sa=ge,Ri(r),g&8192)e:for(a=r.stateNode,a._visibility=_?a._visibility&-2:a._visibility|1,_&&(u===null||ee||Sa||_r||gl(r)),u=null,a=r;;){if(a.tag===5||a.tag===26){if(u===null){ee=u=a;try{if(b=ee.stateNode,_)O=b.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none";else{U=ee.stateNode;var Ce=ee.memoizedProps.style,pe=Ce!=null&&Ce.hasOwnProperty("display")?Ce.display:null;U.style.display=pe==null||typeof pe=="boolean"?"":(""+pe).trim()}}catch(Ke){gn(ee,ee.return,Ke)}}}else if(a.tag===6){if(u===null){ee=a;try{ee.stateNode.nodeValue=_?"":ee.memoizedProps}catch(Ke){gn(ee,ee.return,Ke)}}}else if(a.tag===18){if(u===null){ee=a;try{var we=ee.stateNode;_?Zx(we,!0):Zx(ee.stateNode,!1)}catch(Ke){gn(ee,ee.return,Ke)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===r)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break e;for(;a.sibling===null;){if(a.return===null||a.return===r)break e;u===a&&(u=null),a=a.return}u===a&&(u=null),a.sibling.return=a.return,a=a.sibling}g&4&&(g=r.updateQueue,g!==null&&(u=g.retryQueue,u!==null&&(g.retryQueue=null,Jh(r,u))));break;case 19:Ni(a,r),Ri(r),g&4&&(g=r.updateQueue,g!==null&&(r.updateQueue=null,Jh(r,g)));break;case 30:break;case 21:break;default:Ni(a,r),Ri(r)}}function Ri(r){var a=r.flags;if(a&2){try{for(var u,g=r.return;g!==null;){if($2(g)){u=g;break}g=g.return}if(u==null)throw Error(s(160));switch(u.tag){case 27:var _=u.stateNode,b=h1(r);Zh(r,b,_);break;case 5:var O=u.stateNode;u.flags&32&&(ti(O,""),u.flags&=-33);var U=h1(r);Zh(r,U,O);break;case 3:case 4:var ee=u.stateNode.containerInfo,ge=h1(r);f1(r,ge,ee);break;default:throw Error(s(161))}}catch(Te){gn(r,r.return,Te)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function lx(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var a=r;lx(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),r=r.sibling}}function Ia(r,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)nx(r,a.alternate,a),a=a.sibling}function gl(r){for(r=r.child;r!==null;){var a=r;switch(a.tag){case 0:case 11:case 14:case 15:ho(4,a,a.return),gl(a);break;case 1:Gs(a,a.return);var u=a.stateNode;typeof u.componentWillUnmount=="function"&&Z2(a,a.return,u),gl(a);break;case 27:xu(a.stateNode);case 26:case 5:Gs(a,a.return),gl(a);break;case 22:a.memoizedState===null&&gl(a);break;case 30:gl(a);break;default:gl(a)}r=r.sibling}}function Na(r,a,u){for(u=u&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var g=a.alternate,_=r,b=a,O=b.flags;switch(b.tag){case 0:case 11:case 15:Na(_,b,u),ou(4,b);break;case 1:if(Na(_,b,u),g=b,_=g.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(ge){gn(g,g.return,ge)}if(g=b,_=g.updateQueue,_!==null){var U=g.stateNode;try{var ee=_.shared.hiddenCallbacks;if(ee!==null)for(_.shared.hiddenCallbacks=null,_=0;_<ee.length;_++)Vp(ee[_],U)}catch(ge){gn(g,g.return,ge)}}u&&O&64&&Q2(b),lu(b,b.return);break;case 27:ex(b);case 26:case 5:Na(_,b,u),u&&g===null&&O&4&&J2(b),lu(b,b.return);break;case 12:Na(_,b,u);break;case 31:Na(_,b,u),u&&O&4&&sx(_,b);break;case 13:Na(_,b,u),u&&O&4&&ax(_,b);break;case 22:b.memoizedState===null&&Na(_,b,u),lu(b,b.return);break;case 30:break;default:Na(_,b,u)}a=a.sibling}}function g1(r,a){var u=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==u&&(r!=null&&r.refCount++,u!=null&&Wc(u))}function m1(r,a){r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&Wc(r))}function Os(r,a,u,g){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)cx(r,a,u,g),a=a.sibling}function cx(r,a,u,g){var _=a.flags;switch(a.tag){case 0:case 11:case 15:Os(r,a,u,g),_&2048&&ou(9,a);break;case 1:Os(r,a,u,g);break;case 3:Os(r,a,u,g),_&2048&&(r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&Wc(r)));break;case 12:if(_&2048){Os(r,a,u,g),r=a.stateNode;try{var b=a.memoizedProps,O=b.id,U=b.onPostCommit;typeof U=="function"&&U(O,a.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(ee){gn(a,a.return,ee)}}else Os(r,a,u,g);break;case 31:Os(r,a,u,g);break;case 13:Os(r,a,u,g);break;case 23:break;case 22:b=a.stateNode,O=a.alternate,a.memoizedState!==null?b._visibility&2?Os(r,a,u,g):cu(r,a):b._visibility&2?Os(r,a,u,g):(b._visibility|=2,Kl(r,a,u,g,(a.subtreeFlags&10256)!==0||!1)),_&2048&&g1(O,a);break;case 24:Os(r,a,u,g),_&2048&&m1(a.alternate,a);break;default:Os(r,a,u,g)}}function Kl(r,a,u,g,_){for(_=_&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var b=r,O=a,U=u,ee=g,ge=O.flags;switch(O.tag){case 0:case 11:case 15:Kl(b,O,U,ee,_),ou(8,O);break;case 23:break;case 22:var Te=O.stateNode;O.memoizedState!==null?Te._visibility&2?Kl(b,O,U,ee,_):cu(b,O):(Te._visibility|=2,Kl(b,O,U,ee,_)),_&&ge&2048&&g1(O.alternate,O);break;case 24:Kl(b,O,U,ee,_),_&&ge&2048&&m1(O.alternate,O);break;default:Kl(b,O,U,ee,_)}a=a.sibling}}function cu(r,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var u=r,g=a,_=g.flags;switch(g.tag){case 22:cu(u,g),_&2048&&g1(g.alternate,g);break;case 24:cu(u,g),_&2048&&m1(g.alternate,g);break;default:cu(u,g)}a=a.sibling}}var uu=8192;function Ql(r,a,u){if(r.subtreeFlags&uu)for(r=r.child;r!==null;)ux(r,a,u),r=r.sibling}function ux(r,a,u){switch(r.tag){case 26:Ql(r,a,u),r.flags&uu&&r.memoizedState!==null&&US(u,Rs,r.memoizedState,r.memoizedProps);break;case 5:Ql(r,a,u);break;case 3:case 4:var g=Rs;Rs=df(r.stateNode.containerInfo),Ql(r,a,u),Rs=g;break;case 22:r.memoizedState===null&&(g=r.alternate,g!==null&&g.memoizedState!==null?(g=uu,uu=16777216,Ql(r,a,u),uu=g):Ql(r,a,u));break;default:Ql(r,a,u)}}function hx(r){var a=r.alternate;if(a!==null&&(r=a.child,r!==null)){a.child=null;do a=r.sibling,r.sibling=null,r=a;while(r!==null)}}function hu(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var g=a[u];Pr=g,dx(g,r)}hx(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)fx(r),r=r.sibling}function fx(r){switch(r.tag){case 0:case 11:case 15:hu(r),r.flags&2048&&ho(9,r,r.return);break;case 3:hu(r);break;case 12:hu(r);break;case 22:var a=r.stateNode;r.memoizedState!==null&&a._visibility&2&&(r.return===null||r.return.tag!==13)?(a._visibility&=-3,$h(r)):hu(r);break;default:hu(r)}}function $h(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var g=a[u];Pr=g,dx(g,r)}hx(r)}for(r=r.child;r!==null;){switch(a=r,a.tag){case 0:case 11:case 15:ho(8,a,a.return),$h(a);break;case 22:u=a.stateNode,u._visibility&2&&(u._visibility&=-3,$h(a));break;default:$h(a)}r=r.sibling}}function dx(r,a){for(;Pr!==null;){var u=Pr;switch(u.tag){case 0:case 11:case 15:ho(8,u,a);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var g=u.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Wc(u.memoizedState.cache)}if(g=u.child,g!==null)g.return=u,Pr=g;else e:for(u=r;Pr!==null;){g=Pr;var _=g.sibling,b=g.return;if(rx(g),g===u){Pr=null;break e}if(_!==null){_.return=b,Pr=_;break e}Pr=b}}}var $v={getCacheForType:function(r){var a=Fr(xr),u=a.data.get(r);return u===void 0&&(u=r(),a.data.set(r,u)),u},cacheSignal:function(){return Fr(xr).controller.signal}},eS=typeof WeakMap=="function"?WeakMap:Map,ln=0,In=null,kt=null,jt=0,dn=0,Yi=null,fo=!1,Zl=!1,p1=!1,Ra=0,$n=0,go=0,ml=0,x1=0,Xi=0,Jl=0,fu=null,Oi=null,y1=!1,ef=0,gx=0,tf=1/0,nf=null,mo=null,Ir=0,po=null,$l=null,Oa=0,E1=0,_1=null,mx=null,du=0,w1=null;function Wi(){return(ln&2)!==0&&jt!==0?jt&-jt:me.T!==null?C1():vr()}function px(){if(Xi===0)if((jt&536870912)===0||Zt){var r=Tt;Tt<<=1,(Tt&3932160)===0&&(Tt=262144),Xi=r}else Xi=536870912;return r=Gi.current,r!==null&&(r.flags|=32),Xi}function Di(r,a,u){(r===In&&(dn===2||dn===9)||r.cancelPendingCommit!==null)&&(ec(r,0),xo(r,jt,Xi,!1)),fi(r,u),((ln&2)===0||r!==In)&&(r===In&&((ln&2)===0&&(ml|=u),$n===4&&xo(r,jt,Xi,!1)),qs(r))}function xx(r,a,u){if((ln&6)!==0)throw Error(s(327));var g=!u&&(a&127)===0&&(a&r.expiredLanes)===0||Nn(r,a),_=g?rS(r,a):b1(r,a,!0),b=g;do{if(_===0){Zl&&!g&&xo(r,a,0,!1);break}else{if(u=r.current.alternate,b&&!tS(u)){_=b1(r,a,!1),b=!1;continue}if(_===2){if(b=a,r.errorRecoveryDisabledLanes&b)var O=0;else O=r.pendingLanes&-536870913,O=O!==0?O:O&536870912?536870912:0;if(O!==0){a=O;e:{var U=r;_=fu;var ee=U.current.memoizedState.isDehydrated;if(ee&&(ec(U,O).flags|=256),O=b1(U,O,!1),O!==2){if(p1&&!ee){U.errorRecoveryDisabledLanes|=b,ml|=b,_=4;break e}b=Oi,Oi=_,b!==null&&(Oi===null?Oi=b:Oi.push.apply(Oi,b))}_=O}if(b=!1,_!==2)continue}}if(_===1){ec(r,0),xo(r,a,0,!0);break}e:{switch(g=r,b=_,b){case 0:case 1:throw Error(s(345));case 4:if((a&4194048)!==a)break;case 6:xo(g,a,Xi,!fo);break e;case 2:Oi=null;break;case 3:case 5:break;default:throw Error(s(329))}if((a&62914560)===a&&(_=ef+300-pn(),10<_)){if(xo(g,a,Xi,!fo),$r(g,0,!0)!==0)break e;Oa=a,g.timeoutHandle=Wx(yx.bind(null,g,u,Oi,nf,y1,a,Xi,ml,Jl,fo,b,"Throttled",-0,0),_);break e}yx(g,u,Oi,nf,y1,a,Xi,ml,Jl,fo,b,null,-0,0)}}break}while(!0);qs(r)}function yx(r,a,u,g,_,b,O,U,ee,ge,Te,Ce,pe,we){if(r.timeoutHandle=-1,Ce=a.subtreeFlags,Ce&8192||(Ce&16785408)===16785408){Ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ni},ux(a,b,Ce);var Ke=(b&62914560)===b?ef-pn():(b&4194048)===b?gx-pn():0;if(Ke=VS(Ce,Ke),Ke!==null){Oa=b,r.cancelPendingCommit=Ke(Sx.bind(null,r,a,b,u,g,_,O,U,ee,Te,Ce,null,pe,we)),xo(r,b,O,!ge);return}}Sx(r,a,b,u,g,_,O,U,ee)}function tS(r){for(var a=r;;){var u=a.tag;if((u===0||u===11||u===15)&&a.flags&16384&&(u=a.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var g=0;g<u.length;g++){var _=u[g],b=_.getSnapshot;_=_.value;try{if(!m(b(),_))return!1}catch{return!1}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function xo(r,a,u,g){a&=~x1,a&=~ml,r.suspendedLanes|=a,r.pingedLanes&=~a,g&&(r.warmLanes|=a),g=r.expirationTimes;for(var _=a;0<_;){var b=31-at(_),O=1<<b;g[b]=-1,_&=~O}u!==0&&os(r,u,a)}function rf(){return(ln&6)===0?(gu(0),!1):!0}function A1(){if(kt!==null){if(dn===0)var r=kt.return;else r=kt,_a=al=null,U0(r),Gl=null,Qc=0,r=kt;for(;r!==null;)K2(r.alternate,r),r=r.return;kt=null}}function ec(r,a){var u=r.timeoutHandle;u!==-1&&(r.timeoutHandle=-1,wS(u)),u=r.cancelPendingCommit,u!==null&&(r.cancelPendingCommit=null,u()),Oa=0,A1(),In=r,kt=u=ya(r.current,null),jt=a,dn=0,Yi=null,fo=!1,Zl=Nn(r,a),p1=!1,Jl=Xi=x1=ml=go=$n=0,Oi=fu=null,y1=!1,(a&8)!==0&&(a|=a&32);var g=r.entangledLanes;if(g!==0)for(r=r.entanglements,g&=a;0<g;){var _=31-at(g),b=1<<_;a|=r[_],g&=~b}return Ra=a,Th(),u}function Ex(r,a){vt=null,me.H=iu,a===Hl||a===Dh?(a=Lp(),dn=3):a===S0?(a=Lp(),dn=4):dn=a===e1?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Yi=a,kt===null&&($n=1,Yh(r,ps(a,r.current)))}function _x(){var r=Gi.current;return r===null?!0:(jt&4194048)===jt?_s===null:(jt&62914560)===jt||(jt&536870912)!==0?r===_s:!1}function wx(){var r=me.H;return me.H=iu,r===null?iu:r}function Ax(){var r=me.A;return me.A=$v,r}function sf(){$n=4,fo||(jt&4194048)!==jt&&Gi.current!==null||(Zl=!0),(go&134217727)===0&&(ml&134217727)===0||In===null||xo(In,jt,Xi,!1)}function b1(r,a,u){var g=ln;ln|=2;var _=wx(),b=Ax();(In!==r||jt!==a)&&(nf=null,ec(r,a)),a=!1;var O=$n;e:do try{if(dn!==0&&kt!==null){var U=kt,ee=Yi;switch(dn){case 8:A1(),O=6;break e;case 3:case 2:case 9:case 6:Gi.current===null&&(a=!0);var ge=dn;if(dn=0,Yi=null,tc(r,U,ee,ge),u&&Zl){O=0;break e}break;default:ge=dn,dn=0,Yi=null,tc(r,U,ee,ge)}}nS(),O=$n;break}catch(Te){Ex(r,Te)}while(!0);return a&&r.shellSuspendCounter++,_a=al=null,ln=g,me.H=_,me.A=b,kt===null&&(In=null,jt=0,Th()),O}function nS(){for(;kt!==null;)bx(kt)}function rS(r,a){var u=ln;ln|=2;var g=wx(),_=Ax();In!==r||jt!==a?(nf=null,tf=pn()+500,ec(r,a)):Zl=Nn(r,a);e:do try{if(dn!==0&&kt!==null){a=kt;var b=Yi;t:switch(dn){case 1:dn=0,Yi=null,tc(r,a,b,1);break;case 2:case 9:if(Mp(b)){dn=0,Yi=null,Tx(a);break}a=function(){dn!==2&&dn!==9||In!==r||(dn=7),qs(r)},b.then(a,a);break e;case 3:dn=7;break e;case 4:dn=5;break e;case 7:Mp(b)?(dn=0,Yi=null,Tx(a)):(dn=0,Yi=null,tc(r,a,b,7));break;case 5:var O=null;switch(kt.tag){case 26:O=kt.memoizedState;case 5:case 27:var U=kt;if(O?cy(O):U.stateNode.complete){dn=0,Yi=null;var ee=U.sibling;if(ee!==null)kt=ee;else{var ge=U.return;ge!==null?(kt=ge,af(ge)):kt=null}break t}}dn=0,Yi=null,tc(r,a,b,5);break;case 6:dn=0,Yi=null,tc(r,a,b,6);break;case 8:A1(),$n=6;break e;default:throw Error(s(462))}}iS();break}catch(Te){Ex(r,Te)}while(!0);return _a=al=null,me.H=g,me.A=_,ln=u,kt!==null?0:(In=null,jt=0,Th(),$n)}function iS(){for(;kt!==null&&!Ts();)bx(kt)}function bx(r){var a=X2(r.alternate,r,Ra);r.memoizedProps=r.pendingProps,a===null?af(r):kt=a}function Tx(r){var a=r,u=a.alternate;switch(a.tag){case 15:case 0:a=F2(u,a,a.pendingProps,a.type,void 0,jt);break;case 11:a=F2(u,a,a.pendingProps,a.type.render,a.ref,jt);break;case 5:U0(a);default:K2(u,a),a=kt=Ap(a,Ra),a=X2(u,a,Ra)}r.memoizedProps=r.pendingProps,a===null?af(r):kt=a}function tc(r,a,u,g){_a=al=null,U0(a),Gl=null,Qc=0;var _=a.return;try{if(Yv(r,_,a,u,jt)){$n=1,Yh(r,ps(u,r.current)),kt=null;return}}catch(b){if(_!==null)throw kt=_,b;$n=1,Yh(r,ps(u,r.current)),kt=null;return}a.flags&32768?(Zt||g===1?r=!0:Zl||(jt&536870912)!==0?r=!1:(fo=r=!0,(g===2||g===9||g===3||g===6)&&(g=Gi.current,g!==null&&g.tag===13&&(g.flags|=16384))),vx(a,r)):af(a)}function af(r){var a=r;do{if((a.flags&32768)!==0){vx(a,fo);return}r=a.return;var u=Kv(a.alternate,a,Ra);if(u!==null){kt=u;return}if(a=a.sibling,a!==null){kt=a;return}kt=a=r}while(a!==null);$n===0&&($n=5)}function vx(r,a){do{var u=Qv(r.alternate,r);if(u!==null){u.flags&=32767,kt=u;return}if(u=r.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!a&&(r=r.sibling,r!==null)){kt=r;return}kt=r=u}while(r!==null);$n=6,kt=null}function Sx(r,a,u,g,_,b,O,U,ee){r.cancelPendingCommit=null;do of();while(Ir!==0);if((ln&6)!==0)throw Error(s(327));if(a!==null){if(a===r.current)throw Error(s(177));if(b=a.lanes|a.childLanes,b|=h0,Br(r,u,b,O,U,ee),r===In&&(kt=In=null,jt=0),$l=a,po=r,Oa=u,E1=b,_1=_,mx=g,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,lS(hr,function(){return Ox(),null})):(r.callbackNode=null,r.callbackPriority=0),g=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||g){g=me.T,me.T=null,_=be.p,be.p=2,O=ln,ln|=4;try{Zv(r,a,u)}finally{ln=O,be.p=_,me.T=g}}Ir=1,Cx(),Ix(),Nx()}}function Cx(){if(Ir===1){Ir=0;var r=po,a=$l,u=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||u){u=me.T,me.T=null;var g=be.p;be.p=2;var _=ln;ln|=4;try{ox(a,r);var b=L1,O=L(r.containerInfo),U=b.focusedElem,ee=b.selectionRange;if(O!==U&&U&&U.ownerDocument&&R(U.ownerDocument.documentElement,U)){if(ee!==null&&k(U)){var ge=ee.start,Te=ee.end;if(Te===void 0&&(Te=ge),"selectionStart"in U)U.selectionStart=ge,U.selectionEnd=Math.min(Te,U.value.length);else{var Ce=U.ownerDocument||document,pe=Ce&&Ce.defaultView||window;if(pe.getSelection){var we=pe.getSelection(),Ke=U.textContent.length,ct=Math.min(ee.start,Ke),_n=ee.end===void 0?ct:Math.min(ee.end,Ke);!we.extend&&ct>_n&&(O=_n,_n=ct,ct=O);var oe=S(U,ct),se=S(U,_n);if(oe&&se&&(we.rangeCount!==1||we.anchorNode!==oe.node||we.anchorOffset!==oe.offset||we.focusNode!==se.node||we.focusOffset!==se.offset)){var de=Ce.createRange();de.setStart(oe.node,oe.offset),we.removeAllRanges(),ct>_n?(we.addRange(de),we.extend(se.node,se.offset)):(de.setEnd(se.node,se.offset),we.addRange(de))}}}}for(Ce=[],we=U;we=we.parentNode;)we.nodeType===1&&Ce.push({element:we,left:we.scrollLeft,top:we.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<Ce.length;U++){var Se=Ce[U];Se.element.scrollLeft=Se.left,Se.element.scrollTop=Se.top}}Ef=!!P1,L1=P1=null}finally{ln=_,be.p=g,me.T=u}}r.current=a,Ir=2}}function Ix(){if(Ir===2){Ir=0;var r=po,a=$l,u=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||u){u=me.T,me.T=null;var g=be.p;be.p=2;var _=ln;ln|=4;try{nx(r,a.alternate,a)}finally{ln=_,be.p=g,me.T=u}}Ir=3}}function Nx(){if(Ir===4||Ir===3){Ir=0,rs();var r=po,a=$l,u=Oa,g=mx;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Ir=5:(Ir=0,$l=po=null,Rx(r,r.pendingLanes));var _=r.pendingLanes;if(_===0&&(mo=null),dr(u),a=a.stateNode,Me&&typeof Me.onCommitFiberRoot=="function")try{Me.onCommitFiberRoot(Yt,a,void 0,(a.current.flags&128)===128)}catch{}if(g!==null){a=me.T,_=be.p,be.p=2,me.T=null;try{for(var b=r.onRecoverableError,O=0;O<g.length;O++){var U=g[O];b(U.value,{componentStack:U.stack})}}finally{me.T=a,be.p=_}}(Oa&3)!==0&&of(),qs(r),_=r.pendingLanes,(u&261930)!==0&&(_&42)!==0?r===w1?du++:(du=0,w1=r):du=0,gu(0)}}function Rx(r,a){(r.pooledCacheLanes&=a)===0&&(a=r.pooledCache,a!=null&&(r.pooledCache=null,Wc(a)))}function of(){return Cx(),Ix(),Nx(),Ox()}function Ox(){if(Ir!==5)return!1;var r=po,a=E1;E1=0;var u=dr(Oa),g=me.T,_=be.p;try{be.p=32>u?32:u,me.T=null,u=_1,_1=null;var b=po,O=Oa;if(Ir=0,$l=po=null,Oa=0,(ln&6)!==0)throw Error(s(331));var U=ln;if(ln|=4,fx(b.current),cx(b,b.current,O,u),ln=U,gu(0,!1),Me&&typeof Me.onPostCommitFiberRoot=="function")try{Me.onPostCommitFiberRoot(Yt,b)}catch{}return!0}finally{be.p=_,me.T=g,Rx(r,a)}}function Dx(r,a,u){a=ps(u,a),a=$0(r.stateNode,a,2),r=lo(r,a,2),r!==null&&(fi(r,2),qs(r))}function gn(r,a,u){if(r.tag===3)Dx(r,r,u);else for(;a!==null;){if(a.tag===3){Dx(a,r,u);break}else if(a.tag===1){var g=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(mo===null||!mo.has(g))){r=ps(u,r),u=M2(2),g=lo(a,u,2),g!==null&&(P2(u,g,a,r),fi(g,2),qs(g));break}}a=a.return}}function T1(r,a,u){var g=r.pingCache;if(g===null){g=r.pingCache=new eS;var _=new Set;g.set(a,_)}else _=g.get(a),_===void 0&&(_=new Set,g.set(a,_));_.has(u)||(p1=!0,_.add(u),r=sS.bind(null,r,a,u),a.then(r,r))}function sS(r,a,u){var g=r.pingCache;g!==null&&g.delete(a),r.pingedLanes|=r.suspendedLanes&u,r.warmLanes&=~u,In===r&&(jt&u)===u&&($n===4||$n===3&&(jt&62914560)===jt&&300>pn()-ef?(ln&2)===0&&ec(r,0):x1|=u,Jl===jt&&(Jl=0)),qs(r)}function Mx(r,a){a===0&&(a=Un()),r=rl(r,a),r!==null&&(fi(r,a),qs(r))}function aS(r){var a=r.memoizedState,u=0;a!==null&&(u=a.retryLane),Mx(r,u)}function oS(r,a){var u=0;switch(r.tag){case 31:case 13:var g=r.stateNode,_=r.memoizedState;_!==null&&(u=_.retryLane);break;case 19:g=r.stateNode;break;case 22:g=r.stateNode._retryCache;break;default:throw Error(s(314))}g!==null&&g.delete(a),Mx(r,u)}function lS(r,a){return bn(r,a)}var lf=null,nc=null,v1=!1,cf=!1,S1=!1,yo=0;function qs(r){r!==nc&&r.next===null&&(nc===null?lf=nc=r:nc=nc.next=r),cf=!0,v1||(v1=!0,uS())}function gu(r,a){if(!S1&&cf){S1=!0;do for(var u=!1,g=lf;g!==null;){if(r!==0){var _=g.pendingLanes;if(_===0)var b=0;else{var O=g.suspendedLanes,U=g.pingedLanes;b=(1<<31-at(42|r)+1)-1,b&=_&~(O&~U),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(u=!0,Bx(g,b))}else b=jt,b=$r(g,g===In?b:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(b&3)===0||Nn(g,b)||(u=!0,Bx(g,b));g=g.next}while(u);S1=!1}}function cS(){Px()}function Px(){cf=v1=!1;var r=0;yo!==0&&_S()&&(r=yo);for(var a=pn(),u=null,g=lf;g!==null;){var _=g.next,b=Lx(g,a);b===0?(g.next=null,u===null?lf=_:u.next=_,_===null&&(nc=u)):(u=g,(r!==0||(b&3)!==0)&&(cf=!0)),g=_}Ir!==0&&Ir!==5||gu(r),yo!==0&&(yo=0)}function Lx(r,a){for(var u=r.suspendedLanes,g=r.pingedLanes,_=r.expirationTimes,b=r.pendingLanes&-62914561;0<b;){var O=31-at(b),U=1<<O,ee=_[O];ee===-1?((U&u)===0||(U&g)!==0)&&(_[O]=Ls(U,a)):ee<=a&&(r.expiredLanes|=U),b&=~U}if(a=In,u=jt,u=$r(r,r===a?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),g=r.callbackNode,u===0||r===a&&(dn===2||dn===9)||r.cancelPendingCommit!==null)return g!==null&&g!==null&&Fe(g),r.callbackNode=null,r.callbackPriority=0;if((u&3)===0||Nn(r,u)){if(a=u&-u,a===r.callbackPriority)return a;switch(g!==null&&Fe(g),dr(u)){case 2:case 8:u=is;break;case 32:u=hr;break;case 268435456:u=vs;break;default:u=hr}return g=kx.bind(null,r),u=bn(u,g),r.callbackPriority=a,r.callbackNode=u,a}return g!==null&&g!==null&&Fe(g),r.callbackPriority=2,r.callbackNode=null,2}function kx(r,a){if(Ir!==0&&Ir!==5)return r.callbackNode=null,r.callbackPriority=0,null;var u=r.callbackNode;if(of()&&r.callbackNode!==u)return null;var g=jt;return g=$r(r,r===In?g:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),g===0?null:(xx(r,g,a),Lx(r,pn()),r.callbackNode!=null&&r.callbackNode===u?kx.bind(null,r):null)}function Bx(r,a){if(of())return null;xx(r,a,!0)}function uS(){AS(function(){(ln&6)!==0?bn(ur,cS):Px()})}function C1(){if(yo===0){var r=Fl;r===0&&(r=Zr,Zr<<=1,(Zr&261888)===0&&(Zr=256)),yo=r}return yo}function Ux(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Us(""+r)}function Vx(r,a){var u=a.ownerDocument.createElement("input");return u.name=a.name,u.value=a.value,r.id&&u.setAttribute("form",r.id),a.parentNode.insertBefore(u,a),r=new FormData(r),u.parentNode.removeChild(u),r}function hS(r,a,u,g,_){if(a==="submit"&&u&&u.stateNode===_){var b=Ux((_[Wt]||null).action),O=g.submitter;O&&(a=(a=O[Wt]||null)?Ux(a.formAction):O.getAttribute("formAction"),a!==null&&(b=a,O=null));var U=new Dn("action","action",null,g,_);r.push({event:U,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(yo!==0){var ee=O?Vx(_,O):new FormData(_);X0(u,{pending:!0,data:ee,method:_.method,action:b},null,ee)}}else typeof b=="function"&&(U.preventDefault(),ee=O?Vx(_,O):new FormData(_),X0(u,{pending:!0,data:ee,method:_.method,action:b},b,ee))},currentTarget:_}]})}}for(var I1=0;I1<qc.length;I1++){var N1=qc[I1],fS=N1.toLowerCase(),dS=N1[0].toUpperCase()+N1.slice(1);Ns(fS,"on"+dS)}Ns(Ci,"onAnimationEnd"),Ns(Vr,"onAnimationIteration"),Ns(fn,"onAnimationStart"),Ns("dblclick","onDoubleClick"),Ns("focusin","onFocus"),Ns("focusout","onBlur"),Ns(Cr,"onTransitionRun"),Ns(xi,"onTransitionStart"),Ns(to,"onTransitionCancel"),Ns(xa,"onTransitionEnd"),Sr("onMouseEnter",["mouseout","mouseover"]),Sr("onMouseLeave",["mouseout","mouseover"]),Sr("onPointerEnter",["pointerout","pointerover"]),Sr("onPointerLeave",["pointerout","pointerover"]),Kt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Kt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Kt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Kt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Kt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Kt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(mu));function jx(r,a){a=(a&4)!==0;for(var u=0;u<r.length;u++){var g=r[u],_=g.event;g=g.listeners;e:{var b=void 0;if(a)for(var O=g.length-1;0<=O;O--){var U=g[O],ee=U.instance,ge=U.currentTarget;if(U=U.listener,ee!==b&&_.isPropagationStopped())break e;b=U,_.currentTarget=ge;try{b(_)}catch(Te){bh(Te)}_.currentTarget=null,b=ee}else for(O=0;O<g.length;O++){if(U=g[O],ee=U.instance,ge=U.currentTarget,U=U.listener,ee!==b&&_.isPropagationStopped())break e;b=U,_.currentTarget=ge;try{b(_)}catch(Te){bh(Te)}_.currentTarget=null,b=ee}}}}function Bt(r,a){var u=a[ki];u===void 0&&(u=a[ki]=new Set);var g=r+"__bubble";u.has(g)||(Fx(a,r,2,!1),u.add(g))}function R1(r,a,u){var g=0;a&&(g|=4),Fx(u,r,g,a)}var uf="_reactListening"+Math.random().toString(36).slice(2);function O1(r){if(!r[uf]){r[uf]=!0,Ie.forEach(function(u){u!=="selectionchange"&&(gS.has(u)||R1(u,!1,r),R1(u,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[uf]||(a[uf]=!0,R1("selectionchange",!1,a))}}function Fx(r,a,u,g){switch(py(a)){case 2:var _=zS;break;case 8:_=HS;break;default:_=Y1}u=_.bind(null,a,u,r),_=void 0,!la||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(_=!0),g?_!==void 0?r.addEventListener(a,u,{capture:!0,passive:_}):r.addEventListener(a,u,!0):_!==void 0?r.addEventListener(a,u,{passive:_}):r.addEventListener(a,u,!1)}function D1(r,a,u,g,_){var b=g;if((a&1)===0&&(a&2)===0&&g!==null)e:for(;;){if(g===null)return;var O=g.tag;if(O===3||O===4){var U=g.stateNode.containerInfo;if(U===_)break;if(O===4)for(O=g.return;O!==null;){var ee=O.tag;if((ee===3||ee===4)&&O.stateNode.containerInfo===_)return;O=O.return}for(;U!==null;){if(O=xn(U),O===null)return;if(ee=O.tag,ee===5||ee===6||ee===26||ee===27){g=b=O;continue e}U=U.parentNode}}g=g.return}Vs(function(){var ge=b,Te=Ti(u),Ce=[];e:{var pe=Ah.get(r);if(pe!==void 0){var we=Dn,Ke=r;switch(r){case"keypress":if(Vi(u)===0)break e;case"keydown":case"keyup":we=da;break;case"focusin":Ke="focus",we=ha;break;case"focusout":Ke="blur",we=ha;break;case"beforeblur":case"afterblur":we=ha;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=$t;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=ua;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=N;break;case Ci:case Vr:case fn:we=_t;break;case xa:we=F;break;case"scroll":case"scrollend":we=Qa;break;case"wheel":we=Ee;break;case"copy":case"cut":case"paste":we=fa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=Lt;break;case"toggle":case"beforetoggle":we=pt}var ct=(a&4)!==0,_n=!ct&&(r==="scroll"||r==="scrollend"),oe=ct?pe!==null?pe+"Capture":null:pe;ct=[];for(var se=ge,de;se!==null;){var Se=se;if(de=Se.stateNode,Se=Se.tag,Se!==5&&Se!==26&&Se!==27||de===null||oe===null||(Se=lt(se,oe),Se!=null&&ct.push(pu(se,Se,de))),_n)break;se=se.return}0<ct.length&&(pe=new we(pe,Ke,null,u,Te),Ce.push({event:pe,listeners:ct}))}}if((a&7)===0){e:{if(pe=r==="mouseover"||r==="pointerover",we=r==="mouseout"||r==="pointerout",pe&&u!==oa&&(Ke=u.relatedTarget||u.fromElement)&&(xn(Ke)||Ke[mr]))break e;if((we||pe)&&(pe=Te.window===Te?Te:(pe=Te.ownerDocument)?pe.defaultView||pe.parentWindow:window,we?(Ke=u.relatedTarget||u.toElement,we=ge,Ke=Ke?xn(Ke):null,Ke!==null&&(_n=h(Ke),ct=Ke.tag,Ke!==_n||ct!==5&&ct!==27&&ct!==6)&&(Ke=null)):(we=null,Ke=ge),we!==Ke)){if(ct=$t,Se="onMouseLeave",oe="onMouseEnter",se="mouse",(r==="pointerout"||r==="pointerover")&&(ct=Lt,Se="onPointerLeave",oe="onPointerEnter",se="pointer"),_n=we==null?pe:Rr(we),de=Ke==null?pe:Rr(Ke),pe=new ct(Se,se+"leave",we,u,Te),pe.target=_n,pe.relatedTarget=de,Se=null,xn(Te)===ge&&(ct=new ct(oe,se+"enter",Ke,u,Te),ct.target=de,ct.relatedTarget=_n,Se=ct),_n=Se,we&&Ke)t:{for(ct=mS,oe=we,se=Ke,de=0,Se=oe;Se;Se=ct(Se))de++;Se=0;for(var it=se;it;it=ct(it))Se++;for(;0<de-Se;)oe=ct(oe),de--;for(;0<Se-de;)se=ct(se),Se--;for(;de--;){if(oe===se||se!==null&&oe===se.alternate){ct=oe;break t}oe=ct(oe),se=ct(se)}ct=null}else ct=null;we!==null&&zx(Ce,pe,we,ct,!1),Ke!==null&&_n!==null&&zx(Ce,_n,Ke,ct,!0)}}e:{if(pe=ge?Rr(ge):window,we=pe.nodeName&&pe.nodeName.toLowerCase(),we==="select"||we==="input"&&pe.type==="file")var sn=zi;else if(Gc(pe))if(wh)sn=f;else{sn=o;var Qe=i}else we=pe.nodeName,!we||we.toLowerCase()!=="input"||pe.type!=="checkbox"&&pe.type!=="radio"?ge&&un(ge.elementType)&&(sn=zi):sn=l;if(sn&&(sn=sn(r,ge))){Fi(Ce,sn,u,Te);break e}Qe&&Qe(r,pe,ge),r==="focusout"&&ge&&pe.type==="number"&&ge.memoizedProps.value!=null&&H(pe,"number",pe.value)}switch(Qe=ge?Rr(ge):window,r){case"focusin":(Gc(Qe)||Qe.contentEditable==="true")&&(te=Qe,re=ge,ue=null);break;case"focusout":ue=re=te=null;break;case"mousedown":ye=!0;break;case"contextmenu":case"mouseup":case"dragend":ye=!1,ke(Ce,u,Te);break;case"selectionchange":if(G)break;case"keydown":case"keyup":ke(Ce,u,Te)}var It;if(Qt)e:{switch(r){case"compositionstart":var Ft="onCompositionStart";break e;case"compositionend":Ft="onCompositionEnd";break e;case"compositionupdate":Ft="onCompositionUpdate";break e}Ft=void 0}else eo?ga(r,u)&&(Ft="onCompositionEnd"):r==="keydown"&&u.keyCode===229&&(Ft="onCompositionStart");Ft&&(ds&&u.locale!=="ko"&&(eo||Ft!=="onCompositionStart"?Ft==="onCompositionEnd"&&eo&&(It=Ss()):(Bi=Te,Ui="value"in Bi?Bi.value:Bi.textContent,eo=!0)),Qe=hf(ge,Ft),0<Qe.length&&(Ft=new us(Ft,r,null,u,Te),Ce.push({event:Ft,listeners:Qe}),It?Ft.data=It:(It=gs(u),It!==null&&(Ft.data=It)))),(It=mi?Fs(r,u):Pl(r,u))&&(Ft=hf(ge,"onBeforeInput"),0<Ft.length&&(Qe=new us("onBeforeInput","beforeinput",null,u,Te),Ce.push({event:Qe,listeners:Ft}),Qe.data=It)),hS(Ce,r,ge,u,Te)}jx(Ce,a)})}function pu(r,a,u){return{instance:r,listener:a,currentTarget:u}}function hf(r,a){for(var u=a+"Capture",g=[];r!==null;){var _=r,b=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||b===null||(_=lt(r,u),_!=null&&g.unshift(pu(r,_,b)),_=lt(r,a),_!=null&&g.push(pu(r,_,b))),r.tag===3)return g;r=r.return}return[]}function mS(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function zx(r,a,u,g,_){for(var b=a._reactName,O=[];u!==null&&u!==g;){var U=u,ee=U.alternate,ge=U.stateNode;if(U=U.tag,ee!==null&&ee===g)break;U!==5&&U!==26&&U!==27||ge===null||(ee=ge,_?(ge=lt(u,b),ge!=null&&O.unshift(pu(u,ge,ee))):_||(ge=lt(u,b),ge!=null&&O.push(pu(u,ge,ee)))),u=u.return}O.length!==0&&r.push({event:a,listeners:O})}var pS=/\r\n?/g,xS=/\u0000|\uFFFD/g;function Hx(r){return(typeof r=="string"?r:""+r).replace(pS,`
`).replace(xS,"")}function Gx(r,a){return a=Hx(a),Hx(r)===a}function En(r,a,u,g,_,b){switch(u){case"children":typeof g=="string"?a==="body"||a==="textarea"&&g===""||ti(r,g):(typeof g=="number"||typeof g=="bigint")&&a!=="body"&&ti(r,""+g);break;case"className":ze(r,"class",g);break;case"tabIndex":ze(r,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":ze(r,u,g);break;case"style":$e(r,g,b);break;case"data":if(a!=="object"){ze(r,"data",g);break}case"src":case"href":if(g===""&&(a!=="a"||u!=="href")){r.removeAttribute(u);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){r.removeAttribute(u);break}g=Us(""+g),r.setAttribute(u,g);break;case"action":case"formAction":if(typeof g=="function"){r.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(u==="formAction"?(a!=="input"&&En(r,a,"name",_.name,_,null),En(r,a,"formEncType",_.formEncType,_,null),En(r,a,"formMethod",_.formMethod,_,null),En(r,a,"formTarget",_.formTarget,_,null)):(En(r,a,"encType",_.encType,_,null),En(r,a,"method",_.method,_,null),En(r,a,"target",_.target,_,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){r.removeAttribute(u);break}g=Us(""+g),r.setAttribute(u,g);break;case"onClick":g!=null&&(r.onclick=ni);break;case"onScroll":g!=null&&Bt("scroll",r);break;case"onScrollEnd":g!=null&&Bt("scrollend",r);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(s(61));if(u=g.__html,u!=null){if(_.children!=null)throw Error(s(60));r.innerHTML=u}}break;case"multiple":r.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":r.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){r.removeAttribute("xlink:href");break}u=Us(""+g),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?r.setAttribute(u,""+g):r.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?r.setAttribute(u,""):r.removeAttribute(u);break;case"capture":case"download":g===!0?r.setAttribute(u,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?r.setAttribute(u,g):r.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?r.setAttribute(u,g):r.removeAttribute(u);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?r.removeAttribute(u):r.setAttribute(u,g);break;case"popover":Bt("beforetoggle",r),Bt("toggle",r),J(r,"popover",g);break;case"xlinkActuate":Ge(r,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Ge(r,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Ge(r,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Ge(r,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Ge(r,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Ge(r,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Ge(r,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Ge(r,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Ge(r,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":J(r,"is",g);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=Zo.get(u)||u,J(r,u,g))}}function M1(r,a,u,g,_,b){switch(u){case"style":$e(r,g,b);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(s(61));if(u=g.__html,u!=null){if(_.children!=null)throw Error(s(60));r.innerHTML=u}}break;case"children":typeof g=="string"?ti(r,g):(typeof g=="number"||typeof g=="bigint")&&ti(r,""+g);break;case"onScroll":g!=null&&Bt("scroll",r);break;case"onScrollEnd":g!=null&&Bt("scrollend",r);break;case"onClick":g!=null&&(r.onclick=ni);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!sa.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(_=u.endsWith("Capture"),a=u.slice(2,_?u.length-7:void 0),b=r[Wt]||null,b=b!=null?b[u]:null,typeof b=="function"&&r.removeEventListener(a,b,_),typeof g=="function")){typeof b!="function"&&b!==null&&(u in r?r[u]=null:r.hasAttribute(u)&&r.removeAttribute(u)),r.addEventListener(a,g,_);break e}u in r?r[u]=g:g===!0?r.setAttribute(u,""):J(r,u,g)}}}function Hr(r,a,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Bt("error",r),Bt("load",r);var g=!1,_=!1,b;for(b in u)if(u.hasOwnProperty(b)){var O=u[b];if(O!=null)switch(b){case"src":g=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:En(r,a,b,O,u,null)}}_&&En(r,a,"srcSet",u.srcSet,u,null),g&&En(r,a,"src",u.src,u,null);return;case"input":Bt("invalid",r);var U=b=O=_=null,ee=null,ge=null;for(g in u)if(u.hasOwnProperty(g)){var Te=u[g];if(Te!=null)switch(g){case"name":_=Te;break;case"type":O=Te;break;case"checked":ee=Te;break;case"defaultChecked":ge=Te;break;case"value":b=Te;break;case"defaultValue":U=Te;break;case"children":case"dangerouslySetInnerHTML":if(Te!=null)throw Error(s(137,a));break;default:En(r,a,g,Te,u,null)}}he(r,b,U,ee,ge,O,_,!1);return;case"select":Bt("invalid",r),g=O=b=null;for(_ in u)if(u.hasOwnProperty(_)&&(U=u[_],U!=null))switch(_){case"value":b=U;break;case"defaultValue":O=U;break;case"multiple":g=U;default:En(r,a,_,U,u,null)}a=b,u=O,r.multiple=!!g,a!=null?We(r,!!g,a,!1):u!=null&&We(r,!!g,u,!0);return;case"textarea":Bt("invalid",r),b=_=g=null;for(O in u)if(u.hasOwnProperty(O)&&(U=u[O],U!=null))switch(O){case"value":g=U;break;case"defaultValue":_=U;break;case"children":b=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(s(91));break;default:En(r,a,O,U,u,null)}ar(r,g,_,b);return;case"option":for(ee in u)if(u.hasOwnProperty(ee)&&(g=u[ee],g!=null))switch(ee){case"selected":r.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:En(r,a,ee,g,u,null)}return;case"dialog":Bt("beforetoggle",r),Bt("toggle",r),Bt("cancel",r),Bt("close",r);break;case"iframe":case"object":Bt("load",r);break;case"video":case"audio":for(g=0;g<mu.length;g++)Bt(mu[g],r);break;case"image":Bt("error",r),Bt("load",r);break;case"details":Bt("toggle",r);break;case"embed":case"source":case"link":Bt("error",r),Bt("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ge in u)if(u.hasOwnProperty(ge)&&(g=u[ge],g!=null))switch(ge){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:En(r,a,ge,g,u,null)}return;default:if(un(a)){for(Te in u)u.hasOwnProperty(Te)&&(g=u[Te],g!==void 0&&M1(r,a,Te,g,u,void 0));return}}for(U in u)u.hasOwnProperty(U)&&(g=u[U],g!=null&&En(r,a,U,g,u,null))}function yS(r,a,u,g){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,b=null,O=null,U=null,ee=null,ge=null,Te=null;for(we in u){var Ce=u[we];if(u.hasOwnProperty(we)&&Ce!=null)switch(we){case"checked":break;case"value":break;case"defaultValue":ee=Ce;default:g.hasOwnProperty(we)||En(r,a,we,null,g,Ce)}}for(var pe in g){var we=g[pe];if(Ce=u[pe],g.hasOwnProperty(pe)&&(we!=null||Ce!=null))switch(pe){case"type":b=we;break;case"name":_=we;break;case"checked":ge=we;break;case"defaultChecked":Te=we;break;case"value":O=we;break;case"defaultValue":U=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(s(137,a));break;default:we!==Ce&&En(r,a,pe,we,g,Ce)}}nn(r,O,U,ee,ge,Te,b,_);return;case"select":we=O=U=pe=null;for(b in u)if(ee=u[b],u.hasOwnProperty(b)&&ee!=null)switch(b){case"value":break;case"multiple":we=ee;default:g.hasOwnProperty(b)||En(r,a,b,null,g,ee)}for(_ in g)if(b=g[_],ee=u[_],g.hasOwnProperty(_)&&(b!=null||ee!=null))switch(_){case"value":pe=b;break;case"defaultValue":U=b;break;case"multiple":O=b;default:b!==ee&&En(r,a,_,b,g,ee)}a=U,u=O,g=we,pe!=null?We(r,!!u,pe,!1):!!g!=!!u&&(a!=null?We(r,!!u,a,!0):We(r,!!u,u?[]:"",!1));return;case"textarea":we=pe=null;for(U in u)if(_=u[U],u.hasOwnProperty(U)&&_!=null&&!g.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:En(r,a,U,null,g,_)}for(O in g)if(_=g[O],b=u[O],g.hasOwnProperty(O)&&(_!=null||b!=null))switch(O){case"value":pe=_;break;case"defaultValue":we=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(s(91));break;default:_!==b&&En(r,a,O,_,g,b)}qn(r,pe,we);return;case"option":for(var Ke in u)if(pe=u[Ke],u.hasOwnProperty(Ke)&&pe!=null&&!g.hasOwnProperty(Ke))switch(Ke){case"selected":r.selected=!1;break;default:En(r,a,Ke,null,g,pe)}for(ee in g)if(pe=g[ee],we=u[ee],g.hasOwnProperty(ee)&&pe!==we&&(pe!=null||we!=null))switch(ee){case"selected":r.selected=pe&&typeof pe!="function"&&typeof pe!="symbol";break;default:En(r,a,ee,pe,g,we)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ct in u)pe=u[ct],u.hasOwnProperty(ct)&&pe!=null&&!g.hasOwnProperty(ct)&&En(r,a,ct,null,g,pe);for(ge in g)if(pe=g[ge],we=u[ge],g.hasOwnProperty(ge)&&pe!==we&&(pe!=null||we!=null))switch(ge){case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(s(137,a));break;default:En(r,a,ge,pe,g,we)}return;default:if(un(a)){for(var _n in u)pe=u[_n],u.hasOwnProperty(_n)&&pe!==void 0&&!g.hasOwnProperty(_n)&&M1(r,a,_n,void 0,g,pe);for(Te in g)pe=g[Te],we=u[Te],!g.hasOwnProperty(Te)||pe===we||pe===void 0&&we===void 0||M1(r,a,Te,pe,g,we);return}}for(var oe in u)pe=u[oe],u.hasOwnProperty(oe)&&pe!=null&&!g.hasOwnProperty(oe)&&En(r,a,oe,null,g,pe);for(Ce in g)pe=g[Ce],we=u[Ce],!g.hasOwnProperty(Ce)||pe===we||pe==null&&we==null||En(r,a,Ce,pe,g,we)}function qx(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ES(){if(typeof performance.getEntriesByType=="function"){for(var r=0,a=0,u=performance.getEntriesByType("resource"),g=0;g<u.length;g++){var _=u[g],b=_.transferSize,O=_.initiatorType,U=_.duration;if(b&&U&&qx(O)){for(O=0,U=_.responseEnd,g+=1;g<u.length;g++){var ee=u[g],ge=ee.startTime;if(ge>U)break;var Te=ee.transferSize,Ce=ee.initiatorType;Te&&qx(Ce)&&(ee=ee.responseEnd,O+=Te*(ee<U?1:(U-ge)/(ee-ge)))}if(--g,a+=8*(b+O)/(_.duration/1e3),r++,10<r)break}}if(0<r)return a/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var P1=null,L1=null;function ff(r){return r.nodeType===9?r:r.ownerDocument}function Yx(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Xx(r,a){if(r===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&a==="foreignObject"?0:r}function k1(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var B1=null;function _S(){var r=window.event;return r&&r.type==="popstate"?r===B1?!1:(B1=r,!0):(B1=null,!1)}var Wx=typeof setTimeout=="function"?setTimeout:void 0,wS=typeof clearTimeout=="function"?clearTimeout:void 0,Kx=typeof Promise=="function"?Promise:void 0,AS=typeof queueMicrotask=="function"?queueMicrotask:typeof Kx<"u"?function(r){return Kx.resolve(null).then(r).catch(bS)}:Wx;function bS(r){setTimeout(function(){throw r})}function Eo(r){return r==="head"}function Qx(r,a){var u=a,g=0;do{var _=u.nextSibling;if(r.removeChild(u),_&&_.nodeType===8)if(u=_.data,u==="/$"||u==="/&"){if(g===0){r.removeChild(_),ac(a);return}g--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")g++;else if(u==="html")xu(r.ownerDocument.documentElement);else if(u==="head"){u=r.ownerDocument.head,xu(u);for(var b=u.firstChild;b;){var O=b.nextSibling,U=b.nodeName;b[Ai]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&b.rel.toLowerCase()==="stylesheet"||u.removeChild(b),b=O}}else u==="body"&&xu(r.ownerDocument.body);u=_}while(u);ac(a)}function Zx(r,a){var u=r;r=0;do{var g=u.nextSibling;if(u.nodeType===1?a?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(a?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(r===0)break;r--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||r++;u=g}while(u)}function U1(r){var a=r.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var u=a;switch(a=a.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":U1(u),pr(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}r.removeChild(u)}}function TS(r,a,u,g){for(;r.nodeType===1;){var _=u;if(r.nodeName.toLowerCase()!==a.toLowerCase()){if(!g&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(g){if(!r[Ai])switch(a){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(b=r.getAttribute("rel"),b==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(b!==_.rel||r.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||r.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||r.getAttribute("title")!==(_.title==null?null:_.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(b=r.getAttribute("src"),(b!==(_.src==null?null:_.src)||r.getAttribute("type")!==(_.type==null?null:_.type)||r.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&b&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(a==="input"&&r.type==="hidden"){var b=_.name==null?null:""+_.name;if(_.type==="hidden"&&r.getAttribute("name")===b)return r}else return r;if(r=ws(r.nextSibling),r===null)break}return null}function vS(r,a,u){if(a==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!u||(r=ws(r.nextSibling),r===null))return null;return r}function Jx(r,a){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!a||(r=ws(r.nextSibling),r===null))return null;return r}function V1(r){return r.data==="$?"||r.data==="$~"}function j1(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function SS(r,a){var u=r.ownerDocument;if(r.data==="$~")r._reactRetry=a;else if(r.data!=="$?"||u.readyState!=="loading")a();else{var g=function(){a(),u.removeEventListener("DOMContentLoaded",g)};u.addEventListener("DOMContentLoaded",g),r._reactRetry=g}}function ws(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return r}var F1=null;function $x(r){r=r.nextSibling;for(var a=0;r;){if(r.nodeType===8){var u=r.data;if(u==="/$"||u==="/&"){if(a===0)return ws(r.nextSibling);a--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||a++}r=r.nextSibling}return null}function ey(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var u=r.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(a===0)return r;a--}else u!=="/$"&&u!=="/&"||a++}r=r.previousSibling}return null}function ty(r,a,u){switch(a=ff(u),r){case"html":if(r=a.documentElement,!r)throw Error(s(452));return r;case"head":if(r=a.head,!r)throw Error(s(453));return r;case"body":if(r=a.body,!r)throw Error(s(454));return r;default:throw Error(s(451))}}function xu(r){for(var a=r.attributes;a.length;)r.removeAttributeNode(a[0]);pr(r)}var As=new Map,ny=new Set;function df(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Da=be.d;be.d={f:CS,r:IS,D:NS,C:RS,L:OS,m:DS,X:PS,S:MS,M:LS};function CS(){var r=Da.f(),a=rf();return r||a}function IS(r){var a=Ot(r);a!==null&&a.tag===5&&a.type==="form"?E2(a):Da.r(r)}var rc=typeof document>"u"?null:document;function ry(r,a,u){var g=rc;if(g&&typeof a=="string"&&a){var _=Et(a);_='link[rel="'+r+'"][href="'+_+'"]',typeof u=="string"&&(_+='[crossorigin="'+u+'"]'),ny.has(_)||(ny.add(_),r={rel:r,crossOrigin:u,href:a},g.querySelector(_)===null&&(a=g.createElement("link"),Hr(a,"link",r),Rn(a),g.head.appendChild(a)))}}function NS(r){Da.D(r),ry("dns-prefetch",r,null)}function RS(r,a){Da.C(r,a),ry("preconnect",r,a)}function OS(r,a,u){Da.L(r,a,u);var g=rc;if(g&&r&&a){var _='link[rel="preload"][as="'+Et(a)+'"]';a==="image"&&u&&u.imageSrcSet?(_+='[imagesrcset="'+Et(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(_+='[imagesizes="'+Et(u.imageSizes)+'"]')):_+='[href="'+Et(r)+'"]';var b=_;switch(a){case"style":b=ic(r);break;case"script":b=sc(r)}As.has(b)||(r=I({rel:"preload",href:a==="image"&&u&&u.imageSrcSet?void 0:r,as:a},u),As.set(b,r),g.querySelector(_)!==null||a==="style"&&g.querySelector(yu(b))||a==="script"&&g.querySelector(Eu(b))||(a=g.createElement("link"),Hr(a,"link",r),Rn(a),g.head.appendChild(a)))}}function DS(r,a){Da.m(r,a);var u=rc;if(u&&r){var g=a&&typeof a.as=="string"?a.as:"script",_='link[rel="modulepreload"][as="'+Et(g)+'"][href="'+Et(r)+'"]',b=_;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=sc(r)}if(!As.has(b)&&(r=I({rel:"modulepreload",href:r},a),As.set(b,r),u.querySelector(_)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Eu(b)))return}g=u.createElement("link"),Hr(g,"link",r),Rn(g),u.head.appendChild(g)}}}function MS(r,a,u){Da.S(r,a,u);var g=rc;if(g&&r){var _=sr(g).hoistableStyles,b=ic(r);a=a||"default";var O=_.get(b);if(!O){var U={loading:0,preload:null};if(O=g.querySelector(yu(b)))U.loading=5;else{r=I({rel:"stylesheet",href:r,"data-precedence":a},u),(u=As.get(b))&&z1(r,u);var ee=O=g.createElement("link");Rn(ee),Hr(ee,"link",r),ee._p=new Promise(function(ge,Te){ee.onload=ge,ee.onerror=Te}),ee.addEventListener("load",function(){U.loading|=1}),ee.addEventListener("error",function(){U.loading|=2}),U.loading|=4,gf(O,a,g)}O={type:"stylesheet",instance:O,count:1,state:U},_.set(b,O)}}}function PS(r,a){Da.X(r,a);var u=rc;if(u&&r){var g=sr(u).hoistableScripts,_=sc(r),b=g.get(_);b||(b=u.querySelector(Eu(_)),b||(r=I({src:r,async:!0},a),(a=As.get(_))&&H1(r,a),b=u.createElement("script"),Rn(b),Hr(b,"link",r),u.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},g.set(_,b))}}function LS(r,a){Da.M(r,a);var u=rc;if(u&&r){var g=sr(u).hoistableScripts,_=sc(r),b=g.get(_);b||(b=u.querySelector(Eu(_)),b||(r=I({src:r,async:!0,type:"module"},a),(a=As.get(_))&&H1(r,a),b=u.createElement("script"),Rn(b),Hr(b,"link",r),u.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},g.set(_,b))}}function iy(r,a,u,g){var _=(_=Le.current)?df(_):null;if(!_)throw Error(s(446));switch(r){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(a=ic(u.href),u=sr(_).hoistableStyles,g=u.get(a),g||(g={type:"style",instance:null,count:0,state:null},u.set(a,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){r=ic(u.href);var b=sr(_).hoistableStyles,O=b.get(r);if(O||(_=_.ownerDocument||_,O={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(r,O),(b=_.querySelector(yu(r)))&&!b._p&&(O.instance=b,O.state.loading=5),As.has(r)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},As.set(r,u),b||kS(_,r,u,O.state))),a&&g===null)throw Error(s(528,""));return O}if(a&&g!==null)throw Error(s(529,""));return null;case"script":return a=u.async,u=u.src,typeof u=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=sc(u),u=sr(_).hoistableScripts,g=u.get(a),g||(g={type:"script",instance:null,count:0,state:null},u.set(a,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,r))}}function ic(r){return'href="'+Et(r)+'"'}function yu(r){return'link[rel="stylesheet"]['+r+"]"}function sy(r){return I({},r,{"data-precedence":r.precedence,precedence:null})}function kS(r,a,u,g){r.querySelector('link[rel="preload"][as="style"]['+a+"]")?g.loading=1:(a=r.createElement("link"),g.preload=a,a.addEventListener("load",function(){return g.loading|=1}),a.addEventListener("error",function(){return g.loading|=2}),Hr(a,"link",u),Rn(a),r.head.appendChild(a))}function sc(r){return'[src="'+Et(r)+'"]'}function Eu(r){return"script[async]"+r}function ay(r,a,u){if(a.count++,a.instance===null)switch(a.type){case"style":var g=r.querySelector('style[data-href~="'+Et(u.href)+'"]');if(g)return a.instance=g,Rn(g),g;var _=I({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return g=(r.ownerDocument||r).createElement("style"),Rn(g),Hr(g,"style",_),gf(g,u.precedence,r),a.instance=g;case"stylesheet":_=ic(u.href);var b=r.querySelector(yu(_));if(b)return a.state.loading|=4,a.instance=b,Rn(b),b;g=sy(u),(_=As.get(_))&&z1(g,_),b=(r.ownerDocument||r).createElement("link"),Rn(b);var O=b;return O._p=new Promise(function(U,ee){O.onload=U,O.onerror=ee}),Hr(b,"link",g),a.state.loading|=4,gf(b,u.precedence,r),a.instance=b;case"script":return b=sc(u.src),(_=r.querySelector(Eu(b)))?(a.instance=_,Rn(_),_):(g=u,(_=As.get(b))&&(g=I({},u),H1(g,_)),r=r.ownerDocument||r,_=r.createElement("script"),Rn(_),Hr(_,"link",g),r.head.appendChild(_),a.instance=_);case"void":return null;default:throw Error(s(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(g=a.instance,a.state.loading|=4,gf(g,u.precedence,r));return a.instance}function gf(r,a,u){for(var g=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=g.length?g[g.length-1]:null,b=_,O=0;O<g.length;O++){var U=g[O];if(U.dataset.precedence===a)b=U;else if(b!==_)break}b?b.parentNode.insertBefore(r,b.nextSibling):(a=u.nodeType===9?u.head:u,a.insertBefore(r,a.firstChild))}function z1(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.title==null&&(r.title=a.title)}function H1(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.integrity==null&&(r.integrity=a.integrity)}var mf=null;function oy(r,a,u){if(mf===null){var g=new Map,_=mf=new Map;_.set(u,g)}else _=mf,g=_.get(u),g||(g=new Map,_.set(u,g));if(g.has(r))return g;for(g.set(r,null),u=u.getElementsByTagName(r),_=0;_<u.length;_++){var b=u[_];if(!(b[Ai]||b[vn]||r==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var O=b.getAttribute(a)||"";O=r+O;var U=g.get(O);U?U.push(b):g.set(O,[b])}}return g}function ly(r,a,u){r=r.ownerDocument||r,r.head.insertBefore(u,a==="title"?r.querySelector("head > title"):null)}function BS(r,a,u){if(u===1||a.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return r=a.disabled,typeof a.precedence=="string"&&r==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function cy(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function US(r,a,u,g){if(u.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var _=ic(g.href),b=a.querySelector(yu(_));if(b){a=b._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(r.count++,r=pf.bind(r),a.then(r,r)),u.state.loading|=4,u.instance=b,Rn(b);return}b=a.ownerDocument||a,g=sy(g),(_=As.get(_))&&z1(g,_),b=b.createElement("link"),Rn(b);var O=b;O._p=new Promise(function(U,ee){O.onload=U,O.onerror=ee}),Hr(b,"link",g),u.instance=b}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(u,a),(a=u.state.preload)&&(u.state.loading&3)===0&&(r.count++,u=pf.bind(r),a.addEventListener("load",u),a.addEventListener("error",u))}}var G1=0;function VS(r,a){return r.stylesheets&&r.count===0&&yf(r,r.stylesheets),0<r.count||0<r.imgCount?function(u){var g=setTimeout(function(){if(r.stylesheets&&yf(r,r.stylesheets),r.unsuspend){var b=r.unsuspend;r.unsuspend=null,b()}},6e4+a);0<r.imgBytes&&G1===0&&(G1=62500*ES());var _=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&yf(r,r.stylesheets),r.unsuspend)){var b=r.unsuspend;r.unsuspend=null,b()}},(r.imgBytes>G1?50:800)+a);return r.unsuspend=u,function(){r.unsuspend=null,clearTimeout(g),clearTimeout(_)}}:null}function pf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)yf(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var xf=null;function yf(r,a){r.stylesheets=null,r.unsuspend!==null&&(r.count++,xf=new Map,a.forEach(jS,r),xf=null,pf.call(r))}function jS(r,a){if(!(a.state.loading&4)){var u=xf.get(r);if(u)var g=u.get(null);else{u=new Map,xf.set(r,u);for(var _=r.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<_.length;b++){var O=_[b];(O.nodeName==="LINK"||O.getAttribute("media")!=="not all")&&(u.set(O.dataset.precedence,O),g=O)}g&&u.set(null,g)}_=a.instance,O=_.getAttribute("data-precedence"),b=u.get(O)||g,b===g&&u.set(null,_),u.set(O,_),this.count++,g=pf.bind(this),_.addEventListener("load",g),_.addEventListener("error",g),b?b.parentNode.insertBefore(_,b.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(_,r.firstChild)),a.state.loading|=4}}var _u={$$typeof:K,Provider:null,Consumer:null,_currentValue:Ye,_currentValue2:Ye,_threadCount:0};function FS(r,a,u,g,_,b,O,U,ee){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fr(0),this.hiddenUpdates=fr(null),this.identifierPrefix=g,this.onUncaughtError=_,this.onCaughtError=b,this.onRecoverableError=O,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ee,this.incompleteTransitions=new Map}function uy(r,a,u,g,_,b,O,U,ee,ge,Te,Ce){return r=new FS(r,a,u,O,ee,ge,Te,Ce,U),a=1,b===!0&&(a|=24),b=Hi(3,null,null,a),r.current=b,b.stateNode=r,a=b0(),a.refCount++,r.pooledCache=a,a.refCount++,b.memoizedState={element:g,isDehydrated:u,cache:a},C0(b),r}function hy(r){return r?(r=kl,r):kl}function fy(r,a,u,g,_,b){_=hy(_),g.context===null?g.context=_:g.pendingContext=_,g=oo(a),g.payload={element:u},b=b===void 0?null:b,b!==null&&(g.callback=b),u=lo(r,g,a),u!==null&&(Di(u,r,a),Jc(u,r,a))}function dy(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var u=r.retryLane;r.retryLane=u!==0&&u<a?u:a}}function q1(r,a){dy(r,a),(r=r.alternate)&&dy(r,a)}function gy(r){if(r.tag===13||r.tag===31){var a=rl(r,67108864);a!==null&&Di(a,r,67108864),q1(r,67108864)}}function my(r){if(r.tag===13||r.tag===31){var a=Wi();a=On(a);var u=rl(r,a);u!==null&&Di(u,r,a),q1(r,a)}}var Ef=!0;function zS(r,a,u,g){var _=me.T;me.T=null;var b=be.p;try{be.p=2,Y1(r,a,u,g)}finally{be.p=b,me.T=_}}function HS(r,a,u,g){var _=me.T;me.T=null;var b=be.p;try{be.p=8,Y1(r,a,u,g)}finally{be.p=b,me.T=_}}function Y1(r,a,u,g){if(Ef){var _=X1(g);if(_===null)D1(r,a,g,_f,u),xy(r,g);else if(qS(_,r,a,u,g))g.stopPropagation();else if(xy(r,g),a&4&&-1<GS.indexOf(r)){for(;_!==null;){var b=Ot(_);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var O=Jr(b.pendingLanes);if(O!==0){var U=b;for(U.pendingLanes|=2,U.entangledLanes|=2;O;){var ee=1<<31-at(O);U.entanglements[1]|=ee,O&=~ee}qs(b),(ln&6)===0&&(tf=pn()+500,gu(0))}}break;case 31:case 13:U=rl(b,2),U!==null&&Di(U,b,2),rf(),q1(b,2)}if(b=X1(g),b===null&&D1(r,a,g,_f,u),b===_)break;_=b}_!==null&&g.stopPropagation()}else D1(r,a,g,null,u)}}function X1(r){return r=Ti(r),W1(r)}var _f=null;function W1(r){if(_f=null,r=xn(r),r!==null){var a=h(r);if(a===null)r=null;else{var u=a.tag;if(u===13){if(r=p(a),r!==null)return r;r=null}else if(u===31){if(r=T(a),r!==null)return r;r=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null)}}return _f=r,null}function py(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Qr()){case ur:return 2;case is:return 8;case hr:case Tn:return 32;case vs:return 268435456;default:return 32}default:return 32}}var K1=!1,_o=null,wo=null,Ao=null,wu=new Map,Au=new Map,bo=[],GS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function xy(r,a){switch(r){case"focusin":case"focusout":_o=null;break;case"dragenter":case"dragleave":wo=null;break;case"mouseover":case"mouseout":Ao=null;break;case"pointerover":case"pointerout":wu.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Au.delete(a.pointerId)}}function bu(r,a,u,g,_,b){return r===null||r.nativeEvent!==b?(r={blockedOn:a,domEventName:u,eventSystemFlags:g,nativeEvent:b,targetContainers:[_]},a!==null&&(a=Ot(a),a!==null&&gy(a)),r):(r.eventSystemFlags|=g,a=r.targetContainers,_!==null&&a.indexOf(_)===-1&&a.push(_),r)}function qS(r,a,u,g,_){switch(a){case"focusin":return _o=bu(_o,r,a,u,g,_),!0;case"dragenter":return wo=bu(wo,r,a,u,g,_),!0;case"mouseover":return Ao=bu(Ao,r,a,u,g,_),!0;case"pointerover":var b=_.pointerId;return wu.set(b,bu(wu.get(b)||null,r,a,u,g,_)),!0;case"gotpointercapture":return b=_.pointerId,Au.set(b,bu(Au.get(b)||null,r,a,u,g,_)),!0}return!1}function yy(r){var a=xn(r.target);if(a!==null){var u=h(a);if(u!==null){if(a=u.tag,a===13){if(a=p(u),a!==null){r.blockedOn=a,je(r.priority,function(){my(u)});return}}else if(a===31){if(a=T(u),a!==null){r.blockedOn=a,je(r.priority,function(){my(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){r.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}r.blockedOn=null}function wf(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var u=X1(r.nativeEvent);if(u===null){u=r.nativeEvent;var g=new u.constructor(u.type,u);oa=g,u.target.dispatchEvent(g),oa=null}else return a=Ot(u),a!==null&&gy(a),r.blockedOn=u,!1;a.shift()}return!0}function Ey(r,a,u){wf(r)&&u.delete(a)}function YS(){K1=!1,_o!==null&&wf(_o)&&(_o=null),wo!==null&&wf(wo)&&(wo=null),Ao!==null&&wf(Ao)&&(Ao=null),wu.forEach(Ey),Au.forEach(Ey)}function Af(r,a){r.blockedOn===a&&(r.blockedOn=null,K1||(K1=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,YS)))}var bf=null;function _y(r){bf!==r&&(bf=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){bf===r&&(bf=null);for(var a=0;a<r.length;a+=3){var u=r[a],g=r[a+1],_=r[a+2];if(typeof g!="function"){if(W1(g||u)===null)continue;break}var b=Ot(u);b!==null&&(r.splice(a,3),a-=3,X0(b,{pending:!0,data:_,method:u.method,action:g},g,_))}}))}function ac(r){function a(ee){return Af(ee,r)}_o!==null&&Af(_o,r),wo!==null&&Af(wo,r),Ao!==null&&Af(Ao,r),wu.forEach(a),Au.forEach(a);for(var u=0;u<bo.length;u++){var g=bo[u];g.blockedOn===r&&(g.blockedOn=null)}for(;0<bo.length&&(u=bo[0],u.blockedOn===null);)yy(u),u.blockedOn===null&&bo.shift();if(u=(r.ownerDocument||r).$$reactFormReplay,u!=null)for(g=0;g<u.length;g+=3){var _=u[g],b=u[g+1],O=_[Wt]||null;if(typeof b=="function")O||_y(u);else if(O){var U=null;if(b&&b.hasAttribute("formAction")){if(_=b,O=b[Wt]||null)U=O.formAction;else if(W1(_)!==null)continue}else U=O.action;typeof U=="function"?u[g+1]=U:(u.splice(g,3),g-=3),_y(u)}}}function wy(){function r(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(O){return _=O})},focusReset:"manual",scroll:"manual"})}function a(){_!==null&&(_(),_=null),g||setTimeout(u,20)}function u(){if(!g&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,_=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(u,100),function(){g=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),_!==null&&(_(),_=null)}}}function Q1(r){this._internalRoot=r}Tf.prototype.render=Q1.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(s(409));var u=a.current,g=Wi();fy(u,g,r,a,null,null)},Tf.prototype.unmount=Q1.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;fy(r.current,2,null,r,null,null),rf(),a[mr]=null}};function Tf(r){this._internalRoot=r}Tf.prototype.unstable_scheduleHydration=function(r){if(r){var a=vr();r={blockedOn:null,target:r,priority:a};for(var u=0;u<bo.length&&a!==0&&a<bo[u].priority;u++);bo.splice(u,0,r),u===0&&yy(r)}};var Ay=e.version;if(Ay!=="19.2.3")throw Error(s(527,Ay,"19.2.3"));be.findDOMNode=function(r){var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=E(a),r=r!==null?C(r):null,r=r===null?null:r.stateNode,r};var XS={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:me,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vf.isDisabled&&vf.supportsFiber)try{Yt=vf.inject(XS),Me=vf}catch{}}return vu.createRoot=function(r,a){if(!c(r))throw Error(s(299));var u=!1,g="",_=N2,b=R2,O=O2;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onUncaughtError!==void 0&&(_=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(O=a.onRecoverableError)),a=uy(r,1,!1,null,null,u,g,null,_,b,O,wy),r[mr]=a.current,O1(r),new Q1(a)},vu.hydrateRoot=function(r,a,u){if(!c(r))throw Error(s(299));var g=!1,_="",b=N2,O=R2,U=O2,ee=null;return u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(_=u.identifierPrefix),u.onUncaughtError!==void 0&&(b=u.onUncaughtError),u.onCaughtError!==void 0&&(O=u.onCaughtError),u.onRecoverableError!==void 0&&(U=u.onRecoverableError),u.formState!==void 0&&(ee=u.formState)),a=uy(r,1,!0,a,u??null,g,_,ee,b,O,U,wy),a.context=hy(null),u=a.current,g=Wi(),g=On(g),_=oo(g),_.callback=null,lo(u,_,g),u=g,a.current.lanes=u,fi(a,u),qs(a),r[mr]=a.current,O1(r),new Tf(a)},vu.version="19.2.3",vu}var Dy;function iC(){if(Dy)return $1.exports;Dy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),$1.exports=rC(),$1.exports}var sC=iC();const aC=um(sC);/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var My="popstate";function oC(n={}){function e(c,h){let{pathname:p="/",search:T="",hash:w=""}=Il(c.location.hash.substring(1));return!p.startsWith("/")&&!p.startsWith(".")&&(p="/"+p),Ag("",{pathname:p,search:T,hash:w},h.state&&h.state.usr||null,h.state&&h.state.key||"default")}function t(c,h){let p=c.document.querySelector("base"),T="";if(p&&p.getAttribute("href")){let w=c.location.href,E=w.indexOf("#");T=E===-1?w:w.slice(0,E)}return T+"#"+(typeof h=="string"?h:Xu(h))}function s(c,h){es(c.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(h)})`)}return cC(e,t,s,n)}function Hn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function es(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function lC(){return Math.random().toString(36).substring(2,10)}function Py(n,e){return{usr:n.state,key:n.key,idx:e}}function Ag(n,e,t=null,s){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Il(e):e,state:t,key:e&&e.key||s||lC()}}function Xu({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Il(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substring(s),n=n.substring(0,s)),n&&(e.pathname=n)}return e}function cC(n,e,t,s={}){let{window:c=document.defaultView,v5Compat:h=!1}=s,p=c.history,T="POP",w=null,E=C();E==null&&(E=0,p.replaceState({...p.state,idx:E},""));function C(){return(p.state||{idx:null}).idx}function I(){T="POP";let q=C(),_e=q==null?null:q-E;E=q,w&&w({action:T,location:$.location,delta:_e})}function M(q,_e){T="PUSH";let ae=Ag($.location,q,_e);t&&t(ae,q),E=C()+1;let K=Py(ae,E),le=$.createHref(ae);try{p.pushState(K,"",le)}catch(Re){if(Re instanceof DOMException&&Re.name==="DataCloneError")throw Re;c.location.assign(le)}h&&w&&w({action:T,location:$.location,delta:1})}function B(q,_e){T="REPLACE";let ae=Ag($.location,q,_e);t&&t(ae,q),E=C();let K=Py(ae,E),le=$.createHref(ae);p.replaceState(K,"",le),h&&w&&w({action:T,location:$.location,delta:0})}function X(q){return uC(q)}let $={get action(){return T},get location(){return n(c,p)},listen(q){if(w)throw new Error("A history only accepts one active listener");return c.addEventListener(My,I),w=q,()=>{c.removeEventListener(My,I),w=null}},createHref(q){return e(c,q)},createURL:X,encodeLocation(q){let _e=X(q);return{pathname:_e.pathname,search:_e.search,hash:_e.hash}},push:M,replace:B,go(q){return p.go(q)}};return $}function uC(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Hn(t,"No window.location.(origin|href) available to create URL");let s=typeof n=="string"?n:Xu(n);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function qw(n,e,t="/"){return hC(n,e,t,!1)}function hC(n,e,t,s){let c=typeof e=="string"?Il(e):e,h=Ua(c.pathname||"/",t);if(h==null)return null;let p=Yw(n);fC(p);let T=null;for(let w=0;T==null&&w<p.length;++w){let E=bC(h);T=wC(p[w],E,s)}return T}function Yw(n,e=[],t=[],s="",c=!1){let h=(p,T,w=c,E)=>{let C={relativePath:E===void 0?p.path||"":E,caseSensitive:p.caseSensitive===!0,childrenIndex:T,route:p};if(C.relativePath.startsWith("/")){if(!C.relativePath.startsWith(s)&&w)return;Hn(C.relativePath.startsWith(s),`Absolute route path "${C.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),C.relativePath=C.relativePath.slice(s.length)}let I=Ba([s,C.relativePath]),M=t.concat(C);p.children&&p.children.length>0&&(Hn(p.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${I}".`),Yw(p.children,e,M,I,w)),!(p.path==null&&!p.index)&&e.push({path:I,score:EC(I,p.index),routesMeta:M})};return n.forEach((p,T)=>{var w;if(p.path===""||!((w=p.path)!=null&&w.includes("?")))h(p,T);else for(let E of Xw(p.path))h(p,T,!0,E)}),e}function Xw(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,c=t.endsWith("?"),h=t.replace(/\?$/,"");if(s.length===0)return c?[h,""]:[h];let p=Xw(s.join("/")),T=[];return T.push(...p.map(w=>w===""?h:[h,w].join("/"))),c&&T.push(...p),T.map(w=>n.startsWith("/")&&w===""?"/":w)}function fC(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:_C(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var dC=/^:[\w-]+$/,gC=3,mC=2,pC=1,xC=10,yC=-2,Ly=n=>n==="*";function EC(n,e){let t=n.split("/"),s=t.length;return t.some(Ly)&&(s+=yC),e&&(s+=mC),t.filter(c=>!Ly(c)).reduce((c,h)=>c+(dC.test(h)?gC:h===""?pC:xC),s)}function _C(n,e){return n.length===e.length&&n.slice(0,-1).every((s,c)=>s===e[c])?n[n.length-1]-e[e.length-1]:0}function wC(n,e,t=!1){let{routesMeta:s}=n,c={},h="/",p=[];for(let T=0;T<s.length;++T){let w=s[T],E=T===s.length-1,C=h==="/"?e:e.slice(h.length)||"/",I=ed({path:w.relativePath,caseSensitive:w.caseSensitive,end:E},C),M=w.route;if(!I&&E&&t&&!s[s.length-1].route.index&&(I=ed({path:w.relativePath,caseSensitive:w.caseSensitive,end:!1},C)),!I)return null;Object.assign(c,I.params),p.push({params:c,pathname:Ba([h,I.pathname]),pathnameBase:CC(Ba([h,I.pathnameBase])),route:M}),I.pathnameBase!=="/"&&(h=Ba([h,I.pathnameBase]))}return p}function ed(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=AC(n.path,n.caseSensitive,n.end),c=e.match(t);if(!c)return null;let h=c[0],p=h.replace(/(.)\/+$/,"$1"),T=c.slice(1);return{params:s.reduce((E,{paramName:C,isOptional:I},M)=>{if(C==="*"){let X=T[M]||"";p=h.slice(0,h.length-X.length).replace(/(.)\/+$/,"$1")}const B=T[M];return I&&!B?E[C]=void 0:E[C]=(B||"").replace(/%2F/g,"/"),E},{}),pathname:h,pathnameBase:p,pattern:n}}function AC(n,e=!1,t=!0){es(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let s=[],c="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(p,T,w)=>(s.push({paramName:T,isOptional:w!=null}),w?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(s.push({paramName:"*"}),c+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?c+="\\/*$":n!==""&&n!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,e?void 0:"i"),s]}function bC(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return es(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ua(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}var Ww=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,TC=n=>Ww.test(n);function vC(n,e="/"){let{pathname:t,search:s="",hash:c=""}=typeof n=="string"?Il(n):n,h;if(t)if(TC(t))h=t;else{if(t.includes("//")){let p=t;t=t.replace(/\/\/+/g,"/"),es(!1,`Pathnames cannot have embedded double slashes - normalizing ${p} -> ${t}`)}t.startsWith("/")?h=ky(t.substring(1),"/"):h=ky(t,e)}else h=e;return{pathname:h,search:IC(s),hash:NC(c)}}function ky(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(c=>{c===".."?t.length>1&&t.pop():c!=="."&&t.push(c)}),t.length>1?t.join("/"):"/"}function rg(n,e,t,s){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function SC(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function fm(n){let e=SC(n);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function dm(n,e,t,s=!1){let c;typeof n=="string"?c=Il(n):(c={...n},Hn(!c.pathname||!c.pathname.includes("?"),rg("?","pathname","search",c)),Hn(!c.pathname||!c.pathname.includes("#"),rg("#","pathname","hash",c)),Hn(!c.search||!c.search.includes("#"),rg("#","search","hash",c)));let h=n===""||c.pathname==="",p=h?"/":c.pathname,T;if(p==null)T=t;else{let I=e.length-1;if(!s&&p.startsWith("..")){let M=p.split("/");for(;M[0]==="..";)M.shift(),I-=1;c.pathname=M.join("/")}T=I>=0?e[I]:"/"}let w=vC(c,T),E=p&&p!=="/"&&p.endsWith("/"),C=(h||p===".")&&t.endsWith("/");return!w.pathname.endsWith("/")&&(E||C)&&(w.pathname+="/"),w}var Ba=n=>n.join("/").replace(/\/\/+/g,"/"),CC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),IC=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,NC=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,RC=class{constructor(n,e,t,s=!1){this.status=n,this.statusText=e||"",this.internal=s,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function OC(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function DC(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Kw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Qw(n,e){let t=n;if(typeof t!="string"||!Ww.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let s=t,c=!1;if(Kw)try{let h=new URL(window.location.href),p=t.startsWith("//")?new URL(h.protocol+t):new URL(t),T=Ua(p.pathname,e);p.origin===h.origin&&T!=null?t=T+p.search+p.hash:c=!0}catch{es(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:c,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Zw=["POST","PUT","PATCH","DELETE"];new Set(Zw);var MC=["GET",...Zw];new Set(MC);var Mc=ne.createContext(null);Mc.displayName="DataRouter";var Ld=ne.createContext(null);Ld.displayName="DataRouterState";var PC=ne.createContext(!1),Jw=ne.createContext({isTransitioning:!1});Jw.displayName="ViewTransition";var LC=ne.createContext(new Map);LC.displayName="Fetchers";var kC=ne.createContext(null);kC.displayName="Await";var ts=ne.createContext(null);ts.displayName="Navigation";var rh=ne.createContext(null);rh.displayName="Location";var na=ne.createContext({outlet:null,matches:[],isDataRoute:!1});na.displayName="Route";var gm=ne.createContext(null);gm.displayName="RouteError";var $w="REACT_ROUTER_ERROR",BC="REDIRECT",UC="ROUTE_ERROR_RESPONSE";function VC(n){if(n.startsWith(`${$w}:${BC}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function jC(n){if(n.startsWith(`${$w}:${UC}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new RC(e.status,e.statusText,e.data)}catch{}}function FC(n,{relative:e}={}){Hn(Pc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=ne.useContext(ts),{hash:c,pathname:h,search:p}=ih(n,{relative:e}),T=h;return t!=="/"&&(T=h==="/"?t:Ba([t,h])),s.createHref({pathname:T,search:p,hash:c})}function Pc(){return ne.useContext(rh)!=null}function qa(){return Hn(Pc(),"useLocation() may be used only in the context of a <Router> component."),ne.useContext(rh).location}var eA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function tA(n){ne.useContext(ts).static||ne.useLayoutEffect(n)}function nA(){let{isDataRoute:n}=ne.useContext(na);return n?eI():zC()}function zC(){Hn(Pc(),"useNavigate() may be used only in the context of a <Router> component.");let n=ne.useContext(Mc),{basename:e,navigator:t}=ne.useContext(ts),{matches:s}=ne.useContext(na),{pathname:c}=qa(),h=JSON.stringify(fm(s)),p=ne.useRef(!1);return tA(()=>{p.current=!0}),ne.useCallback((w,E={})=>{if(es(p.current,eA),!p.current)return;if(typeof w=="number"){t.go(w);return}let C=dm(w,JSON.parse(h),c,E.relative==="path");n==null&&e!=="/"&&(C.pathname=C.pathname==="/"?e:Ba([e,C.pathname])),(E.replace?t.replace:t.push)(C,E.state,E)},[e,t,h,c,n])}ne.createContext(null);function ih(n,{relative:e}={}){let{matches:t}=ne.useContext(na),{pathname:s}=qa(),c=JSON.stringify(fm(t));return ne.useMemo(()=>dm(n,JSON.parse(c),s,e==="path"),[n,c,s,e])}function HC(n,e){return rA(n,e)}function rA(n,e,t,s,c){var ae;Hn(Pc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:h}=ne.useContext(ts),{matches:p}=ne.useContext(na),T=p[p.length-1],w=T?T.params:{},E=T?T.pathname:"/",C=T?T.pathnameBase:"/",I=T&&T.route;{let K=I&&I.path||"";sA(E,!I||K.endsWith("*")||K.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${E}" (under <Route path="${K}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${K}"> to <Route path="${K==="/"?"*":`${K}/*`}">.`)}let M=qa(),B;if(e){let K=typeof e=="string"?Il(e):e;Hn(C==="/"||((ae=K.pathname)==null?void 0:ae.startsWith(C)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${C}" but pathname "${K.pathname}" was given in the \`location\` prop.`),B=K}else B=M;let X=B.pathname||"/",$=X;if(C!=="/"){let K=C.replace(/^\//,"").split("/");$="/"+X.replace(/^\//,"").split("/").slice(K.length).join("/")}let q=qw(n,{pathname:$});es(I||q!=null,`No routes matched location "${B.pathname}${B.search}${B.hash}" `),es(q==null||q[q.length-1].route.element!==void 0||q[q.length-1].route.Component!==void 0||q[q.length-1].route.lazy!==void 0,`Matched leaf route at location "${B.pathname}${B.search}${B.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _e=WC(q&&q.map(K=>Object.assign({},K,{params:Object.assign({},w,K.params),pathname:Ba([C,h.encodeLocation?h.encodeLocation(K.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:K.pathname]),pathnameBase:K.pathnameBase==="/"?C:Ba([C,h.encodeLocation?h.encodeLocation(K.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:K.pathnameBase])})),p,t,s,c);return e&&_e?ne.createElement(rh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...B},navigationType:"POP"}},_e):_e}function GC(){let n=$C(),e=OC(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:s},h={padding:"2px 4px",backgroundColor:s},p=null;return console.error("Error handled by React Router default ErrorBoundary:",n),p=ne.createElement(ne.Fragment,null,ne.createElement("p",null," Hey developer "),ne.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ne.createElement("code",{style:h},"ErrorBoundary")," or"," ",ne.createElement("code",{style:h},"errorElement")," prop on your route.")),ne.createElement(ne.Fragment,null,ne.createElement("h2",null,"Unexpected Application Error!"),ne.createElement("h3",{style:{fontStyle:"italic"}},e),t?ne.createElement("pre",{style:c},t):null,p)}var qC=ne.createElement(GC,null),iA=class extends ne.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=jC(n.digest);t&&(n=t)}let e=n!==void 0?ne.createElement(na.Provider,{value:this.props.routeContext},ne.createElement(gm.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?ne.createElement(YC,{error:n},e):e}};iA.contextType=PC;var ig=new WeakMap;function YC({children:n,error:e}){let{basename:t}=ne.useContext(ts);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let s=VC(e.digest);if(s){let c=ig.get(e);if(c)throw c;let h=Qw(s.location,t);if(Kw&&!ig.get(e))if(h.isExternal||s.reloadDocument)window.location.href=h.absoluteURL||h.to;else{const p=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(h.to,{replace:s.replace}));throw ig.set(e,p),p}return ne.createElement("meta",{httpEquiv:"refresh",content:`0;url=${h.absoluteURL||h.to}`})}}return n}function XC({routeContext:n,match:e,children:t}){let s=ne.useContext(Mc);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),ne.createElement(na.Provider,{value:n},t)}function WC(n,e=[],t=null,s=null,c=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let h=n,p=t==null?void 0:t.errors;if(p!=null){let C=h.findIndex(I=>I.route.id&&(p==null?void 0:p[I.route.id])!==void 0);Hn(C>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(p).join(",")}`),h=h.slice(0,Math.min(h.length,C+1))}let T=!1,w=-1;if(t)for(let C=0;C<h.length;C++){let I=h[C];if((I.route.HydrateFallback||I.route.hydrateFallbackElement)&&(w=C),I.route.id){let{loaderData:M,errors:B}=t,X=I.route.loader&&!M.hasOwnProperty(I.route.id)&&(!B||B[I.route.id]===void 0);if(I.route.lazy||X){T=!0,w>=0?h=h.slice(0,w+1):h=[h[0]];break}}}let E=t&&s?(C,I)=>{var M,B;s(C,{location:t.location,params:((B=(M=t.matches)==null?void 0:M[0])==null?void 0:B.params)??{},unstable_pattern:DC(t.matches),errorInfo:I})}:void 0;return h.reduceRight((C,I,M)=>{let B,X=!1,$=null,q=null;t&&(B=p&&I.route.id?p[I.route.id]:void 0,$=I.route.errorElement||qC,T&&(w<0&&M===0?(sA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),X=!0,q=null):w===M&&(X=!0,q=I.route.hydrateFallbackElement||null)));let _e=e.concat(h.slice(0,M+1)),ae=()=>{let K;return B?K=$:X?K=q:I.route.Component?K=ne.createElement(I.route.Component,null):I.route.element?K=I.route.element:K=C,ne.createElement(XC,{match:I,routeContext:{outlet:C,matches:_e,isDataRoute:t!=null},children:K})};return t&&(I.route.ErrorBoundary||I.route.errorElement||M===0)?ne.createElement(iA,{location:t.location,revalidation:t.revalidation,component:$,error:B,children:ae(),routeContext:{outlet:null,matches:_e,isDataRoute:!0},onError:E}):ae()},null)}function mm(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function KC(n){let e=ne.useContext(Mc);return Hn(e,mm(n)),e}function QC(n){let e=ne.useContext(Ld);return Hn(e,mm(n)),e}function ZC(n){let e=ne.useContext(na);return Hn(e,mm(n)),e}function pm(n){let e=ZC(n),t=e.matches[e.matches.length-1];return Hn(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function JC(){return pm("useRouteId")}function $C(){var s;let n=ne.useContext(gm),e=QC("useRouteError"),t=pm("useRouteError");return n!==void 0?n:(s=e.errors)==null?void 0:s[t]}function eI(){let{router:n}=KC("useNavigate"),e=pm("useNavigate"),t=ne.useRef(!1);return tA(()=>{t.current=!0}),ne.useCallback(async(c,h={})=>{es(t.current,eA),t.current&&(typeof c=="number"?await n.navigate(c):await n.navigate(c,{fromRouteId:e,...h}))},[n,e])}var By={};function sA(n,e,t){!e&&!By[n]&&(By[n]=!0,es(!1,t))}ne.memo(tI);function tI({routes:n,future:e,state:t,onError:s}){return rA(n,void 0,t,s,e)}function nI({to:n,replace:e,state:t,relative:s}){Hn(Pc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:c}=ne.useContext(ts);es(!c,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:h}=ne.useContext(na),{pathname:p}=qa(),T=nA(),w=dm(n,fm(h),p,s==="path"),E=JSON.stringify(w);return ne.useEffect(()=>{T(JSON.parse(E),{replace:e,state:t,relative:s})},[T,E,s,e,t]),null}function pl(n){Hn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function rI({basename:n="/",children:e=null,location:t,navigationType:s="POP",navigator:c,static:h=!1,unstable_useTransitions:p}){Hn(!Pc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let T=n.replace(/^\/*/,"/"),w=ne.useMemo(()=>({basename:T,navigator:c,static:h,unstable_useTransitions:p,future:{}}),[T,c,h,p]);typeof t=="string"&&(t=Il(t));let{pathname:E="/",search:C="",hash:I="",state:M=null,key:B="default"}=t,X=ne.useMemo(()=>{let $=Ua(E,T);return $==null?null:{location:{pathname:$,search:C,hash:I,state:M,key:B},navigationType:s}},[T,E,C,I,M,B,s]);return es(X!=null,`<Router basename="${T}"> is not able to match the URL "${E}${C}${I}" because it does not start with the basename, so the <Router> won't render anything.`),X==null?null:ne.createElement(ts.Provider,{value:w},ne.createElement(rh.Provider,{children:e,value:X}))}function iI({children:n,location:e}){return HC(bg(n),e)}function bg(n,e=[]){let t=[];return ne.Children.forEach(n,(s,c)=>{if(!ne.isValidElement(s))return;let h=[...e,c];if(s.type===ne.Fragment){t.push.apply(t,bg(s.props.children,h));return}Hn(s.type===pl,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Hn(!s.props.index||!s.props.children,"An index route cannot have child routes.");let p={id:s.props.id||h.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(p.children=bg(s.props.children,h)),t.push(p)}),t}var Ff="get",zf="application/x-www-form-urlencoded";function kd(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function sI(n){return kd(n)&&n.tagName.toLowerCase()==="button"}function aI(n){return kd(n)&&n.tagName.toLowerCase()==="form"}function oI(n){return kd(n)&&n.tagName.toLowerCase()==="input"}function lI(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function cI(n,e){return n.button===0&&(!e||e==="_self")&&!lI(n)}var Cf=null;function uI(){if(Cf===null)try{new FormData(document.createElement("form"),0),Cf=!1}catch{Cf=!0}return Cf}var hI=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function sg(n){return n!=null&&!hI.has(n)?(es(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${zf}"`),null):n}function fI(n,e){let t,s,c,h,p;if(aI(n)){let T=n.getAttribute("action");s=T?Ua(T,e):null,t=n.getAttribute("method")||Ff,c=sg(n.getAttribute("enctype"))||zf,h=new FormData(n)}else if(sI(n)||oI(n)&&(n.type==="submit"||n.type==="image")){let T=n.form;if(T==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let w=n.getAttribute("formaction")||T.getAttribute("action");if(s=w?Ua(w,e):null,t=n.getAttribute("formmethod")||T.getAttribute("method")||Ff,c=sg(n.getAttribute("formenctype"))||sg(T.getAttribute("enctype"))||zf,h=new FormData(T,n),!uI()){let{name:E,type:C,value:I}=n;if(C==="image"){let M=E?`${E}.`:"";h.append(`${M}x`,"0"),h.append(`${M}y`,"0")}else E&&h.append(E,I)}}else{if(kd(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Ff,s=null,c=zf,p=n}return h&&c==="text/plain"&&(p=h,h=void 0),{action:s,method:t.toLowerCase(),encType:c,formData:h,body:p}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function xm(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function dI(n,e,t,s){let c=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?c.pathname.endsWith("/")?c.pathname=`${c.pathname}_.${s}`:c.pathname=`${c.pathname}.${s}`:c.pathname==="/"?c.pathname=`_root.${s}`:e&&Ua(c.pathname,e)==="/"?c.pathname=`${e.replace(/\/$/,"")}/_root.${s}`:c.pathname=`${c.pathname.replace(/\/$/,"")}.${s}`,c}async function gI(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function mI(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function pI(n,e,t){let s=await Promise.all(n.map(async c=>{let h=e.routes[c.route.id];if(h){let p=await gI(h,t);return p.links?p.links():[]}return[]}));return _I(s.flat(1).filter(mI).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function Uy(n,e,t,s,c,h){let p=(w,E)=>t[E]?w.route.id!==t[E].route.id:!0,T=(w,E)=>{var C;return t[E].pathname!==w.pathname||((C=t[E].route.path)==null?void 0:C.endsWith("*"))&&t[E].params["*"]!==w.params["*"]};return h==="assets"?e.filter((w,E)=>p(w,E)||T(w,E)):h==="data"?e.filter((w,E)=>{var I;let C=s.routes[w.route.id];if(!C||!C.hasLoader)return!1;if(p(w,E)||T(w,E))return!0;if(w.route.shouldRevalidate){let M=w.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:((I=t[0])==null?void 0:I.params)||{},nextUrl:new URL(n,window.origin),nextParams:w.params,defaultShouldRevalidate:!0});if(typeof M=="boolean")return M}return!0}):[]}function xI(n,e,{includeHydrateFallback:t}={}){return yI(n.map(s=>{let c=e.routes[s.route.id];if(!c)return[];let h=[c.module];return c.clientActionModule&&(h=h.concat(c.clientActionModule)),c.clientLoaderModule&&(h=h.concat(c.clientLoaderModule)),t&&c.hydrateFallbackModule&&(h=h.concat(c.hydrateFallbackModule)),c.imports&&(h=h.concat(c.imports)),h}).flat(1))}function yI(n){return[...new Set(n)]}function EI(n){let e={},t=Object.keys(n).sort();for(let s of t)e[s]=n[s];return e}function _I(n,e){let t=new Set;return new Set(e),n.reduce((s,c)=>{let h=JSON.stringify(EI(c));return t.has(h)||(t.add(h),s.push({key:h,link:c})),s},[])}function aA(){let n=ne.useContext(Mc);return xm(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function wI(){let n=ne.useContext(Ld);return xm(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var ym=ne.createContext(void 0);ym.displayName="FrameworkContext";function oA(){let n=ne.useContext(ym);return xm(n,"You must render this element inside a <HydratedRouter> element"),n}function AI(n,e){let t=ne.useContext(ym),[s,c]=ne.useState(!1),[h,p]=ne.useState(!1),{onFocus:T,onBlur:w,onMouseEnter:E,onMouseLeave:C,onTouchStart:I}=e,M=ne.useRef(null);ne.useEffect(()=>{if(n==="render"&&p(!0),n==="viewport"){let $=_e=>{_e.forEach(ae=>{p(ae.isIntersecting)})},q=new IntersectionObserver($,{threshold:.5});return M.current&&q.observe(M.current),()=>{q.disconnect()}}},[n]),ne.useEffect(()=>{if(s){let $=setTimeout(()=>{p(!0)},100);return()=>{clearTimeout($)}}},[s]);let B=()=>{c(!0)},X=()=>{c(!1),p(!1)};return t?n!=="intent"?[h,M,{}]:[h,M,{onFocus:Su(T,B),onBlur:Su(w,X),onMouseEnter:Su(E,B),onMouseLeave:Su(C,X),onTouchStart:Su(I,B)}]:[!1,M,{}]}function Su(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function bI({page:n,...e}){let{router:t}=aA(),s=ne.useMemo(()=>qw(t.routes,n,t.basename),[t.routes,n,t.basename]);return s?ne.createElement(vI,{page:n,matches:s,...e}):null}function TI(n){let{manifest:e,routeModules:t}=oA(),[s,c]=ne.useState([]);return ne.useEffect(()=>{let h=!1;return pI(n,e,t).then(p=>{h||c(p)}),()=>{h=!0}},[n,e,t]),s}function vI({page:n,matches:e,...t}){let s=qa(),{future:c,manifest:h,routeModules:p}=oA(),{basename:T}=aA(),{loaderData:w,matches:E}=wI(),C=ne.useMemo(()=>Uy(n,e,E,h,s,"data"),[n,e,E,h,s]),I=ne.useMemo(()=>Uy(n,e,E,h,s,"assets"),[n,e,E,h,s]),M=ne.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let $=new Set,q=!1;if(e.forEach(ae=>{var le;let K=h.routes[ae.route.id];!K||!K.hasLoader||(!C.some(Re=>Re.route.id===ae.route.id)&&ae.route.id in w&&((le=p[ae.route.id])!=null&&le.shouldRevalidate)||K.hasClientLoader?q=!0:$.add(ae.route.id))}),$.size===0)return[];let _e=dI(n,T,c.unstable_trailingSlashAwareDataRequests,"data");return q&&$.size>0&&_e.searchParams.set("_routes",e.filter(ae=>$.has(ae.route.id)).map(ae=>ae.route.id).join(",")),[_e.pathname+_e.search]},[T,c.unstable_trailingSlashAwareDataRequests,w,s,h,C,e,n,p]),B=ne.useMemo(()=>xI(I,h),[I,h]),X=TI(I);return ne.createElement(ne.Fragment,null,M.map($=>ne.createElement("link",{key:$,rel:"prefetch",as:"fetch",href:$,...t})),B.map($=>ne.createElement("link",{key:$,rel:"modulepreload",href:$,...t})),X.map(({key:$,link:q})=>ne.createElement("link",{key:$,nonce:t.nonce,...q})))}function SI(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var CI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{CI&&(window.__reactRouterVersion="7.12.0")}catch{}function II({basename:n,children:e,unstable_useTransitions:t,window:s}){let c=ne.useRef();c.current==null&&(c.current=oC({window:s,v5Compat:!0}));let h=c.current,[p,T]=ne.useState({action:h.action,location:h.location}),w=ne.useCallback(E=>{t===!1?T(E):ne.startTransition(()=>T(E))},[t]);return ne.useLayoutEffect(()=>h.listen(w),[h,w]),ne.createElement(rI,{basename:n,children:e,location:p.location,navigationType:p.action,navigator:h,unstable_useTransitions:t})}var lA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,td=ne.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:c,reloadDocument:h,replace:p,state:T,target:w,to:E,preventScrollReset:C,viewTransition:I,unstable_defaultShouldRevalidate:M,...B},X){let{basename:$,unstable_useTransitions:q}=ne.useContext(ts),_e=typeof E=="string"&&lA.test(E),ae=Qw(E,$);E=ae.to;let K=FC(E,{relative:c}),[le,Re,De]=AI(s,B),j=DI(E,{replace:p,state:T,target:w,preventScrollReset:C,relative:c,viewTransition:I,unstable_defaultShouldRevalidate:M,unstable_useTransitions:q});function z(Y){e&&e(Y),Y.defaultPrevented||j(Y)}let V=ne.createElement("a",{...B,...De,href:ae.absoluteURL||K,onClick:ae.isExternal||h?e:z,ref:SI(X,Re),target:w,"data-discover":!_e&&t==="render"?"true":void 0});return le&&!_e?ne.createElement(ne.Fragment,null,V,ne.createElement(bI,{page:K})):V});td.displayName="Link";var NI=ne.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:c=!1,style:h,to:p,viewTransition:T,children:w,...E},C){let I=ih(p,{relative:E.relative}),M=qa(),B=ne.useContext(Ld),{navigator:X,basename:$}=ne.useContext(ts),q=B!=null&&BI(I)&&T===!0,_e=X.encodeLocation?X.encodeLocation(I).pathname:I.pathname,ae=M.pathname,K=B&&B.navigation&&B.navigation.location?B.navigation.location.pathname:null;t||(ae=ae.toLowerCase(),K=K?K.toLowerCase():null,_e=_e.toLowerCase()),K&&$&&(K=Ua(K,$)||K);const le=_e!=="/"&&_e.endsWith("/")?_e.length-1:_e.length;let Re=ae===_e||!c&&ae.startsWith(_e)&&ae.charAt(le)==="/",De=K!=null&&(K===_e||!c&&K.startsWith(_e)&&K.charAt(_e.length)==="/"),j={isActive:Re,isPending:De,isTransitioning:q},z=Re?e:void 0,V;typeof s=="function"?V=s(j):V=[s,Re?"active":null,De?"pending":null,q?"transitioning":null].filter(Boolean).join(" ");let Y=typeof h=="function"?h(j):h;return ne.createElement(td,{...E,"aria-current":z,className:V,ref:C,style:Y,to:p,viewTransition:T},typeof w=="function"?w(j):w)});NI.displayName="NavLink";var RI=ne.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:c,state:h,method:p=Ff,action:T,onSubmit:w,relative:E,preventScrollReset:C,viewTransition:I,unstable_defaultShouldRevalidate:M,...B},X)=>{let{unstable_useTransitions:$}=ne.useContext(ts),q=LI(),_e=kI(T,{relative:E}),ae=p.toLowerCase()==="get"?"get":"post",K=typeof T=="string"&&lA.test(T),le=Re=>{if(w&&w(Re),Re.defaultPrevented)return;Re.preventDefault();let De=Re.nativeEvent.submitter,j=(De==null?void 0:De.getAttribute("formmethod"))||p,z=()=>q(De||Re.currentTarget,{fetcherKey:e,method:j,navigate:t,replace:c,state:h,relative:E,preventScrollReset:C,viewTransition:I,unstable_defaultShouldRevalidate:M});$&&t!==!1?ne.startTransition(()=>z()):z()};return ne.createElement("form",{ref:X,method:ae,action:_e,onSubmit:s?w:le,...B,"data-discover":!K&&n==="render"?"true":void 0})});RI.displayName="Form";function OI(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cA(n){let e=ne.useContext(Mc);return Hn(e,OI(n)),e}function DI(n,{target:e,replace:t,state:s,preventScrollReset:c,relative:h,viewTransition:p,unstable_defaultShouldRevalidate:T,unstable_useTransitions:w}={}){let E=nA(),C=qa(),I=ih(n,{relative:h});return ne.useCallback(M=>{if(cI(M,e)){M.preventDefault();let B=t!==void 0?t:Xu(C)===Xu(I),X=()=>E(n,{replace:B,state:s,preventScrollReset:c,relative:h,viewTransition:p,unstable_defaultShouldRevalidate:T});w?ne.startTransition(()=>X()):X()}},[C,E,I,t,s,e,n,c,h,p,T,w])}var MI=0,PI=()=>`__${String(++MI)}__`;function LI(){let{router:n}=cA("useSubmit"),{basename:e}=ne.useContext(ts),t=JC(),s=n.fetch,c=n.navigate;return ne.useCallback(async(h,p={})=>{let{action:T,method:w,encType:E,formData:C,body:I}=fI(h,e);if(p.navigate===!1){let M=p.fetcherKey||PI();await s(M,t,p.action||T,{unstable_defaultShouldRevalidate:p.unstable_defaultShouldRevalidate,preventScrollReset:p.preventScrollReset,formData:C,body:I,formMethod:p.method||w,formEncType:p.encType||E,flushSync:p.flushSync})}else await c(p.action||T,{unstable_defaultShouldRevalidate:p.unstable_defaultShouldRevalidate,preventScrollReset:p.preventScrollReset,formData:C,body:I,formMethod:p.method||w,formEncType:p.encType||E,replace:p.replace,state:p.state,fromRouteId:t,flushSync:p.flushSync,viewTransition:p.viewTransition})},[s,c,e,t])}function kI(n,{relative:e}={}){let{basename:t}=ne.useContext(ts),s=ne.useContext(na);Hn(s,"useFormAction must be used inside a RouteContext");let[c]=s.matches.slice(-1),h={...ih(n||".",{relative:e})},p=qa();if(n==null){h.search=p.search;let T=new URLSearchParams(h.search),w=T.getAll("index");if(w.some(C=>C==="")){T.delete("index"),w.filter(I=>I).forEach(I=>T.append("index",I));let C=T.toString();h.search=C?`?${C}`:""}}return(!n||n===".")&&c.route.index&&(h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(h.pathname=h.pathname==="/"?t:Ba([t,h.pathname])),Xu(h)}function BI(n,{relative:e}={}){let t=ne.useContext(Jw);Hn(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=cA("useViewTransitionState"),c=ih(n,{relative:e});if(!t.isTransitioning)return!1;let h=Ua(t.currentLocation.pathname,s)||t.currentLocation.pathname,p=Ua(t.nextLocation.pathname,s)||t.nextLocation.pathname;return ed(c.pathname,p)!=null||ed(c.pathname,h)!=null}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UI=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),VI=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),Vy=n=>{const e=VI(n);return e.charAt(0).toUpperCase()+e.slice(1)},uA=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),jI=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var FI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zI=ne.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:c="",children:h,iconNode:p,...T},w)=>ne.createElement("svg",{ref:w,...FI,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:uA("lucide",c),...!h&&!jI(T)&&{"aria-hidden":"true"},...T},[...p.map(([E,C])=>ne.createElement(E,C)),...Array.isArray(h)?h:[h]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=(n,e)=>{const t=ne.forwardRef(({className:s,...c},h)=>ne.createElement(zI,{ref:h,iconNode:e,className:uA(`lucide-${UI(Vy(n))}`,`lucide-${n}`,s),...c}));return t.displayName=Vy(n),t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HI=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],jy=mt("calendar",HI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GI=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Tg=mt("camera",GI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qI=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Iu=mt("check",qI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YI=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],hA=mt("chevron-left",YI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XI=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],vg=mt("chevron-right",XI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],fA=mt("circle-alert",WI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KI=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Wu=mt("circle-check-big",KI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ZI=mt("circle-check",QI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JI=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],yc=mt("clock",JI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],e3=mt("coins",$I);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],n3=mt("eye",t3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],i3=mt("flame",r3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],Fy=mt("gift",s3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],o3=mt("graduation-cap",a3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Hf=mt("heart",l3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],nd=mt("history",c3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],zy=mt("image",u3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],dA=mt("info",h3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],d3=mt("layout-dashboard",f3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],m3=mt("log-out",g3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],x3=mt("medal",p3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],E3=mt("menu",y3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Sg=mt("package",_3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],oc=mt("plus",w3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],b3=mt("qr-code",A3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],v3=mt("refresh-ccw",T3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],C3=mt("refresh-cw",S3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],N3=mt("scan-line",I3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],O3=mt("search",R3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],M3=mt("send",D3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],L3=mt("settings",P3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],rd=mt("shield-check",k3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],U3=mt("shopping-bag",B3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],j3=mt("shopping-cart",V3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],id=mt("sparkles",F3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z3=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],H3=mt("star",z3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Bu=mt("target",G3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q3=[["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}],["path",{d:"M7 10v12",key:"1qc93n"}]],Y3=mt("thumbs-up",q3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X3=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],If=mt("trash-2",X3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],K3=mt("trending-up",W3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Z3=mt("triangle-alert",Q3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Hy=mt("trophy",J3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $3=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Cg=mt("upload",$3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Ig=mt("user-plus",eN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],nN=mt("user",tN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rN=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],iN=mt("users",rN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sN=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Oo=mt("x",sN),gA=ne.createContext(void 0),Lc=()=>{const n=ne.useContext(gA);if(!n)throw new Error("useAlert must be used within an AlertProvider");return n},aN=({children:n})=>{const[e,t]=ne.useState(null),s=(h,p="info")=>{t({message:h,type:p})},c=()=>{t(null)};return v.jsxs(gA.Provider,{value:{showAlert:s,hideAlert:c},children:[n,e&&v.jsx(oN,{message:e.message,type:e.type,onClose:c})]})},oN=({message:n,type:e,onClose:t})=>{const s={success:v.jsx(Wu,{className:"text-emerald-500",size:32}),error:v.jsx(fA,{className:"text-rose-500",size:32}),info:v.jsx(dA,{className:"text-indigo-500",size:32})},c={success:"bg-emerald-50",error:"bg-rose-50",info:"bg-indigo-50"};return v.jsx("div",{className:"fixed inset-0 z-[999] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:v.jsx("div",{className:"bg-white rounded-[2.5rem] max-w-sm w-full p-8 shadow-2xl animate-in zoom-in-95 duration-200 border border-slate-100",children:v.jsxs("div",{className:"flex flex-col items-center text-center",children:[v.jsx("div",{className:`${c[e]} p-4 rounded-2xl mb-6`,children:s[e]}),v.jsx("h3",{className:"text-xl font-black text-slate-800 mb-2",children:""}),v.jsx("p",{className:"text-slate-500 font-bold leading-relaxed mb-8",children:n}),v.jsx("button",{onClick:t,className:"w-full bg-slate-900 hover:bg-slate-800 text-white font-black py-4 rounded-2xl transition-all active:scale-95 shadow-lg shadow-slate-200",children:""})]})})})},lN=()=>{};var Gy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let c=n.charCodeAt(s);c<128?e[t++]=c:c<2048?(e[t++]=c>>6|192,e[t++]=c&63|128):(c&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(c=65536+((c&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=c>>18|240,e[t++]=c>>12&63|128,e[t++]=c>>6&63|128,e[t++]=c&63|128):(e[t++]=c>>12|224,e[t++]=c>>6&63|128,e[t++]=c&63|128)}return e},cN=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const c=n[t++];if(c<128)e[s++]=String.fromCharCode(c);else if(c>191&&c<224){const h=n[t++];e[s++]=String.fromCharCode((c&31)<<6|h&63)}else if(c>239&&c<365){const h=n[t++],p=n[t++],T=n[t++],w=((c&7)<<18|(h&63)<<12|(p&63)<<6|T&63)-65536;e[s++]=String.fromCharCode(55296+(w>>10)),e[s++]=String.fromCharCode(56320+(w&1023))}else{const h=n[t++],p=n[t++];e[s++]=String.fromCharCode((c&15)<<12|(h&63)<<6|p&63)}}return e.join("")},pA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let c=0;c<n.length;c+=3){const h=n[c],p=c+1<n.length,T=p?n[c+1]:0,w=c+2<n.length,E=w?n[c+2]:0,C=h>>2,I=(h&3)<<4|T>>4;let M=(T&15)<<2|E>>6,B=E&63;w||(B=64,p||(M=64)),s.push(t[C],t[I],t[M],t[B])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(mA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):cN(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let c=0;c<n.length;){const h=t[n.charAt(c++)],T=c<n.length?t[n.charAt(c)]:0;++c;const E=c<n.length?t[n.charAt(c)]:64;++c;const I=c<n.length?t[n.charAt(c)]:64;if(++c,h==null||T==null||E==null||I==null)throw new uN;const M=h<<2|T>>4;if(s.push(M),E!==64){const B=T<<4&240|E>>2;if(s.push(B),I!==64){const X=E<<6&192|I;s.push(X)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class uN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hN=function(n){const e=mA(n);return pA.encodeByteArray(e,!0)},sd=function(n){return hN(n).replace(/\./g,"")},xA=function(n){try{return pA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN=()=>fN().__FIREBASE_DEFAULTS__,gN=()=>{if(typeof process>"u"||typeof Gy>"u")return;const n=Gy.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},mN=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&xA(n[1]);return e&&JSON.parse(e)},Bd=()=>{try{return lN()||dN()||gN()||mN()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},yA=n=>{var e,t;return(t=(e=Bd())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},pN=n=>{const e=yA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},EA=()=>{var n;return(n=Bd())==null?void 0:n.config},_A=n=>{var e;return(e=Bd())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kc(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function wA(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",c=n.iat||0,h=n.sub||n.user_id;if(!h)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const p={iss:`https://securetoken.google.com/${s}`,aud:s,iat:c,exp:c+3600,auth_time:c,sub:h,user_id:h,firebase:{sign_in_provider:"custom",identities:{}},...n};return[sd(JSON.stringify(t)),sd(JSON.stringify(p)),""].join(".")}const Uu={};function EN(){const n={prod:[],emulator:[]};for(const e of Object.keys(Uu))Uu[e]?n.emulator.push(e):n.prod.push(e);return n}function _N(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let qy=!1;function AA(n,e){if(typeof window>"u"||typeof document>"u"||!kc(window.location.host)||Uu[n]===e||Uu[n]||qy)return;Uu[n]=e;function t(M){return`__firebase__banner__${M}`}const s="__firebase__banner",h=EN().prod.length>0;function p(){const M=document.getElementById(s);M&&M.remove()}function T(M){M.style.display="flex",M.style.background="#7faaf0",M.style.position="fixed",M.style.bottom="5px",M.style.left="5px",M.style.padding=".5em",M.style.borderRadius="5px",M.style.alignItems="center"}function w(M,B){M.setAttribute("width","24"),M.setAttribute("id",B),M.setAttribute("height","24"),M.setAttribute("viewBox","0 0 24 24"),M.setAttribute("fill","none"),M.style.marginLeft="-6px"}function E(){const M=document.createElement("span");return M.style.cursor="pointer",M.style.marginLeft="16px",M.style.fontSize="24px",M.innerHTML=" &times;",M.onclick=()=>{qy=!0,p()},M}function C(M,B){M.setAttribute("id",B),M.innerText="Learn more",M.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",M.setAttribute("target","__blank"),M.style.paddingLeft="5px",M.style.textDecoration="underline"}function I(){const M=_N(s),B=t("text"),X=document.getElementById(B)||document.createElement("span"),$=t("learnmore"),q=document.getElementById($)||document.createElement("a"),_e=t("preprendIcon"),ae=document.getElementById(_e)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(M.created){const K=M.element;T(K),C(q,$);const le=E();w(ae,_e),K.append(ae,X,q,le),document.body.appendChild(K)}h?(X.innerText="Preview backend disconnected.",ae.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ae.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,X.innerText="Preview backend running in this workspace."),X.setAttribute("id",B)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ci())}function AN(){var e;const n=(e=Bd())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function TN(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function vN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function SN(){const n=ci();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function CN(){return!AN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function IN(){try{return typeof indexedDB=="object"}catch{return!1}}function NN(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",c=self.indexedDB.open(s);c.onsuccess=()=>{c.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},c.onupgradeneeded=()=>{t=!1},c.onerror=()=>{var h;e(((h=c.error)==null?void 0:h.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN="FirebaseError";class Ya extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=RN,Object.setPrototypeOf(this,Ya.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sh.prototype.create)}}class sh{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},c=`${this.service}/${e}`,h=this.errors[e],p=h?ON(h,s):"Error",T=`${this.serviceName}: ${p} (${c}).`;return new Ya(c,T,s)}}function ON(n,e){return n.replace(DN,(t,s)=>{const c=e[s];return c!=null?String(c):`<${s}?>`})}const DN=/\{\$([^}]+)}/g;function MN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Al(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const c of t){if(!s.includes(c))return!1;const h=n[c],p=e[c];if(Yy(h)&&Yy(p)){if(!Al(h,p))return!1}else if(h!==p)return!1}for(const c of s)if(!t.includes(c))return!1;return!0}function Yy(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ah(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(c=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(c))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Nu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[c,h]=s.split("=");e[decodeURIComponent(c)]=decodeURIComponent(h)}}),e}function Ru(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function PN(n,e){const t=new LN(n,e);return t.subscribe.bind(t)}class LN{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let c;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");kN(e,["next","error","complete"])?c=e:c={next:e,error:t,complete:s},c.next===void 0&&(c.next=ag),c.error===void 0&&(c.error=ag),c.complete===void 0&&(c.complete=ag);const h=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?c.error(this.finalError):c.complete()}catch{}}),this.observers.push(c),h}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kN(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ag(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(n){return n&&n._delegate?n._delegate:n}class bl{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new xN;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const c=this.getOrInitializeService({instanceIdentifier:t});c&&s.resolve(c)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(c){if(s)return null;throw c}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(VN(e))try{this.getOrInitializeService({instanceIdentifier:xl})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(t);try{const h=this.getOrInitializeService({instanceIdentifier:c});s.resolve(h)}catch{}}}}clearInstance(e=xl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xl){return this.instances.has(e)}getOptions(e=xl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const c=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[h,p]of this.instancesDeferred.entries()){const T=this.normalizeInstanceIdentifier(h);s===T&&p.resolve(c)}return c}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),c=this.onInitCallbacks.get(s)??new Set;c.add(e),this.onInitCallbacks.set(s,c);const h=this.instances.get(s);return h&&e(h,s),()=>{c.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const c of s)try{c(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:UN(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=xl){return this.component?this.component.multipleInstances?e:xl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function UN(n){return n===xl?void 0:n}function VN(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new BN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(zt||(zt={}));const FN={debug:zt.DEBUG,verbose:zt.VERBOSE,info:zt.INFO,warn:zt.WARN,error:zt.ERROR,silent:zt.SILENT},zN=zt.INFO,HN={[zt.DEBUG]:"log",[zt.VERBOSE]:"log",[zt.INFO]:"info",[zt.WARN]:"warn",[zt.ERROR]:"error"},GN=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),c=HN[e];if(c)console[c](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Em{constructor(e){this.name=e,this._logLevel=zN,this._logHandler=GN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in zt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?FN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,zt.DEBUG,...e),this._logHandler(this,zt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,zt.VERBOSE,...e),this._logHandler(this,zt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,zt.INFO,...e),this._logHandler(this,zt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,zt.WARN,...e),this._logHandler(this,zt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,zt.ERROR,...e),this._logHandler(this,zt.ERROR,...e)}}const qN=(n,e)=>e.some(t=>n instanceof t);let Xy,Wy;function YN(){return Xy||(Xy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function XN(){return Wy||(Wy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bA=new WeakMap,Ng=new WeakMap,TA=new WeakMap,og=new WeakMap,_m=new WeakMap;function WN(n){const e=new Promise((t,s)=>{const c=()=>{n.removeEventListener("success",h),n.removeEventListener("error",p)},h=()=>{t(Do(n.result)),c()},p=()=>{s(n.error),c()};n.addEventListener("success",h),n.addEventListener("error",p)});return e.then(t=>{t instanceof IDBCursor&&bA.set(t,n)}).catch(()=>{}),_m.set(e,n),e}function KN(n){if(Ng.has(n))return;const e=new Promise((t,s)=>{const c=()=>{n.removeEventListener("complete",h),n.removeEventListener("error",p),n.removeEventListener("abort",p)},h=()=>{t(),c()},p=()=>{s(n.error||new DOMException("AbortError","AbortError")),c()};n.addEventListener("complete",h),n.addEventListener("error",p),n.addEventListener("abort",p)});Ng.set(n,e)}let Rg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ng.get(n);if(e==="objectStoreNames")return n.objectStoreNames||TA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Do(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function QN(n){Rg=n(Rg)}function ZN(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(lg(this),e,...t);return TA.set(s,e.sort?e.sort():[e]),Do(s)}:XN().includes(n)?function(...e){return n.apply(lg(this),e),Do(bA.get(this))}:function(...e){return Do(n.apply(lg(this),e))}}function JN(n){return typeof n=="function"?ZN(n):(n instanceof IDBTransaction&&KN(n),qN(n,YN())?new Proxy(n,Rg):n)}function Do(n){if(n instanceof IDBRequest)return WN(n);if(og.has(n))return og.get(n);const e=JN(n);return e!==n&&(og.set(n,e),_m.set(e,n)),e}const lg=n=>_m.get(n);function $N(n,e,{blocked:t,upgrade:s,blocking:c,terminated:h}={}){const p=indexedDB.open(n,e),T=Do(p);return s&&p.addEventListener("upgradeneeded",w=>{s(Do(p.result),w.oldVersion,w.newVersion,Do(p.transaction),w)}),t&&p.addEventListener("blocked",w=>t(w.oldVersion,w.newVersion,w)),T.then(w=>{h&&w.addEventListener("close",()=>h()),c&&w.addEventListener("versionchange",E=>c(E.oldVersion,E.newVersion,E))}).catch(()=>{}),T}const e4=["get","getKey","getAll","getAllKeys","count"],t4=["put","add","delete","clear"],cg=new Map;function Ky(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(cg.get(e))return cg.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,c=t4.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(c||e4.includes(t)))return;const h=async function(p,...T){const w=this.transaction(p,c?"readwrite":"readonly");let E=w.store;return s&&(E=E.index(T.shift())),(await Promise.all([E[t](...T),c&&w.done]))[0]};return cg.set(e,h),h}QN(n=>({...n,get:(e,t,s)=>Ky(e,t)||n.get(e,t,s),has:(e,t)=>!!Ky(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(r4(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function r4(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Og="@firebase/app",Qy="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va=new Em("@firebase/app"),i4="@firebase/app-compat",s4="@firebase/analytics-compat",a4="@firebase/analytics",o4="@firebase/app-check-compat",l4="@firebase/app-check",c4="@firebase/auth",u4="@firebase/auth-compat",h4="@firebase/database",f4="@firebase/data-connect",d4="@firebase/database-compat",g4="@firebase/functions",m4="@firebase/functions-compat",p4="@firebase/installations",x4="@firebase/installations-compat",y4="@firebase/messaging",E4="@firebase/messaging-compat",_4="@firebase/performance",w4="@firebase/performance-compat",A4="@firebase/remote-config",b4="@firebase/remote-config-compat",T4="@firebase/storage",v4="@firebase/storage-compat",S4="@firebase/firestore",C4="@firebase/ai",I4="@firebase/firestore-compat",N4="firebase",R4="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dg="[DEFAULT]",O4={[Og]:"fire-core",[i4]:"fire-core-compat",[a4]:"fire-analytics",[s4]:"fire-analytics-compat",[l4]:"fire-app-check",[o4]:"fire-app-check-compat",[c4]:"fire-auth",[u4]:"fire-auth-compat",[h4]:"fire-rtdb",[f4]:"fire-data-connect",[d4]:"fire-rtdb-compat",[g4]:"fire-fn",[m4]:"fire-fn-compat",[p4]:"fire-iid",[x4]:"fire-iid-compat",[y4]:"fire-fcm",[E4]:"fire-fcm-compat",[_4]:"fire-perf",[w4]:"fire-perf-compat",[A4]:"fire-rc",[b4]:"fire-rc-compat",[T4]:"fire-gcs",[v4]:"fire-gcs-compat",[S4]:"fire-fst",[I4]:"fire-fst-compat",[C4]:"fire-vertex","fire-js":"fire-js",[N4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ad=new Map,D4=new Map,Mg=new Map;function Zy(n,e){try{n.container.addComponent(e)}catch(t){Va.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Tc(n){const e=n.name;if(Mg.has(e))return Va.debug(`There were multiple attempts to register component ${e}.`),!1;Mg.set(e,n);for(const t of ad.values())Zy(t,n);for(const t of D4.values())Zy(t,n);return!0}function wm(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Qi(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mo=new sh("app","Firebase",M4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new bl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Mo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bc=R4;function vA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:Dg,automaticDataCollectionEnabled:!0,...e},c=s.name;if(typeof c!="string"||!c)throw Mo.create("bad-app-name",{appName:String(c)});if(t||(t=EA()),!t)throw Mo.create("no-options");const h=ad.get(c);if(h){if(Al(t,h.options)&&Al(s,h.config))return h;throw Mo.create("duplicate-app",{appName:c})}const p=new jN(c);for(const w of Mg.values())p.addComponent(w);const T=new P4(t,s,p);return ad.set(c,T),T}function SA(n=Dg){const e=ad.get(n);if(!e&&n===Dg&&EA())return vA();if(!e)throw Mo.create("no-app",{appName:n});return e}function Po(n,e,t){let s=O4[n]??n;t&&(s+=`-${t}`);const c=s.match(/\s|\//),h=e.match(/\s|\//);if(c||h){const p=[`Unable to register library "${s}" with version "${e}":`];c&&p.push(`library name "${s}" contains illegal characters (whitespace or "/")`),c&&h&&p.push("and"),h&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Va.warn(p.join(" "));return}Tc(new bl(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4="firebase-heartbeat-database",k4=1,Ku="firebase-heartbeat-store";let ug=null;function CA(){return ug||(ug=$N(L4,k4,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ku)}catch(t){console.warn(t)}}}}).catch(n=>{throw Mo.create("idb-open",{originalErrorMessage:n.message})})),ug}async function B4(n){try{const t=(await CA()).transaction(Ku),s=await t.objectStore(Ku).get(IA(n));return await t.done,s}catch(e){if(e instanceof Ya)Va.warn(e.message);else{const t=Mo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Va.warn(t.message)}}}async function Jy(n,e){try{const s=(await CA()).transaction(Ku,"readwrite");await s.objectStore(Ku).put(e,IA(n)),await s.done}catch(t){if(t instanceof Ya)Va.warn(t.message);else{const s=Mo.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Va.warn(s.message)}}}function IA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U4=1024,V4=30;class j4{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new z4(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const c=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),h=$y();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===h||this._heartbeatsCache.heartbeats.some(p=>p.date===h))return;if(this._heartbeatsCache.heartbeats.push({date:h,agent:c}),this._heartbeatsCache.heartbeats.length>V4){const p=H4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(p,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Va.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=$y(),{heartbeatsToSend:s,unsentEntries:c}=F4(this._heartbeatsCache.heartbeats),h=sd(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,c.length>0?(this._heartbeatsCache.heartbeats=c,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),h}catch(t){return Va.warn(t),""}}}function $y(){return new Date().toISOString().substring(0,10)}function F4(n,e=U4){const t=[];let s=n.slice();for(const c of n){const h=t.find(p=>p.agent===c.agent);if(h){if(h.dates.push(c.date),eE(t)>e){h.dates.pop();break}}else if(t.push({agent:c.agent,dates:[c.date]}),eE(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class z4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return IN()?NN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await B4(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Jy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Jy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function eE(n){return sd(JSON.stringify({version:2,heartbeats:n})).length}function H4(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G4(n){Tc(new bl("platform-logger",e=>new n4(e),"PRIVATE")),Tc(new bl("heartbeat",e=>new j4(e),"PRIVATE")),Po(Og,Qy,n),Po(Og,Qy,"esm2020"),Po("fire-js","")}G4("");var tE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Lo,NA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,z){function V(){}V.prototype=z.prototype,j.F=z.prototype,j.prototype=new V,j.prototype.constructor=j,j.D=function(Y,Q,Z){for(var W=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)W[Je-2]=arguments[Je];return z.prototype[Q].apply(Y,W)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function c(j,z,V){V||(V=0);const Y=Array(16);if(typeof z=="string")for(var Q=0;Q<16;++Q)Y[Q]=z.charCodeAt(V++)|z.charCodeAt(V++)<<8|z.charCodeAt(V++)<<16|z.charCodeAt(V++)<<24;else for(Q=0;Q<16;++Q)Y[Q]=z[V++]|z[V++]<<8|z[V++]<<16|z[V++]<<24;z=j.g[0],V=j.g[1],Q=j.g[2];let Z=j.g[3],W;W=z+(Z^V&(Q^Z))+Y[0]+3614090360&4294967295,z=V+(W<<7&4294967295|W>>>25),W=Z+(Q^z&(V^Q))+Y[1]+3905402710&4294967295,Z=z+(W<<12&4294967295|W>>>20),W=Q+(V^Z&(z^V))+Y[2]+606105819&4294967295,Q=Z+(W<<17&4294967295|W>>>15),W=V+(z^Q&(Z^z))+Y[3]+3250441966&4294967295,V=Q+(W<<22&4294967295|W>>>10),W=z+(Z^V&(Q^Z))+Y[4]+4118548399&4294967295,z=V+(W<<7&4294967295|W>>>25),W=Z+(Q^z&(V^Q))+Y[5]+1200080426&4294967295,Z=z+(W<<12&4294967295|W>>>20),W=Q+(V^Z&(z^V))+Y[6]+2821735955&4294967295,Q=Z+(W<<17&4294967295|W>>>15),W=V+(z^Q&(Z^z))+Y[7]+4249261313&4294967295,V=Q+(W<<22&4294967295|W>>>10),W=z+(Z^V&(Q^Z))+Y[8]+1770035416&4294967295,z=V+(W<<7&4294967295|W>>>25),W=Z+(Q^z&(V^Q))+Y[9]+2336552879&4294967295,Z=z+(W<<12&4294967295|W>>>20),W=Q+(V^Z&(z^V))+Y[10]+4294925233&4294967295,Q=Z+(W<<17&4294967295|W>>>15),W=V+(z^Q&(Z^z))+Y[11]+2304563134&4294967295,V=Q+(W<<22&4294967295|W>>>10),W=z+(Z^V&(Q^Z))+Y[12]+1804603682&4294967295,z=V+(W<<7&4294967295|W>>>25),W=Z+(Q^z&(V^Q))+Y[13]+4254626195&4294967295,Z=z+(W<<12&4294967295|W>>>20),W=Q+(V^Z&(z^V))+Y[14]+2792965006&4294967295,Q=Z+(W<<17&4294967295|W>>>15),W=V+(z^Q&(Z^z))+Y[15]+1236535329&4294967295,V=Q+(W<<22&4294967295|W>>>10),W=z+(Q^Z&(V^Q))+Y[1]+4129170786&4294967295,z=V+(W<<5&4294967295|W>>>27),W=Z+(V^Q&(z^V))+Y[6]+3225465664&4294967295,Z=z+(W<<9&4294967295|W>>>23),W=Q+(z^V&(Z^z))+Y[11]+643717713&4294967295,Q=Z+(W<<14&4294967295|W>>>18),W=V+(Z^z&(Q^Z))+Y[0]+3921069994&4294967295,V=Q+(W<<20&4294967295|W>>>12),W=z+(Q^Z&(V^Q))+Y[5]+3593408605&4294967295,z=V+(W<<5&4294967295|W>>>27),W=Z+(V^Q&(z^V))+Y[10]+38016083&4294967295,Z=z+(W<<9&4294967295|W>>>23),W=Q+(z^V&(Z^z))+Y[15]+3634488961&4294967295,Q=Z+(W<<14&4294967295|W>>>18),W=V+(Z^z&(Q^Z))+Y[4]+3889429448&4294967295,V=Q+(W<<20&4294967295|W>>>12),W=z+(Q^Z&(V^Q))+Y[9]+568446438&4294967295,z=V+(W<<5&4294967295|W>>>27),W=Z+(V^Q&(z^V))+Y[14]+3275163606&4294967295,Z=z+(W<<9&4294967295|W>>>23),W=Q+(z^V&(Z^z))+Y[3]+4107603335&4294967295,Q=Z+(W<<14&4294967295|W>>>18),W=V+(Z^z&(Q^Z))+Y[8]+1163531501&4294967295,V=Q+(W<<20&4294967295|W>>>12),W=z+(Q^Z&(V^Q))+Y[13]+2850285829&4294967295,z=V+(W<<5&4294967295|W>>>27),W=Z+(V^Q&(z^V))+Y[2]+4243563512&4294967295,Z=z+(W<<9&4294967295|W>>>23),W=Q+(z^V&(Z^z))+Y[7]+1735328473&4294967295,Q=Z+(W<<14&4294967295|W>>>18),W=V+(Z^z&(Q^Z))+Y[12]+2368359562&4294967295,V=Q+(W<<20&4294967295|W>>>12),W=z+(V^Q^Z)+Y[5]+4294588738&4294967295,z=V+(W<<4&4294967295|W>>>28),W=Z+(z^V^Q)+Y[8]+2272392833&4294967295,Z=z+(W<<11&4294967295|W>>>21),W=Q+(Z^z^V)+Y[11]+1839030562&4294967295,Q=Z+(W<<16&4294967295|W>>>16),W=V+(Q^Z^z)+Y[14]+4259657740&4294967295,V=Q+(W<<23&4294967295|W>>>9),W=z+(V^Q^Z)+Y[1]+2763975236&4294967295,z=V+(W<<4&4294967295|W>>>28),W=Z+(z^V^Q)+Y[4]+1272893353&4294967295,Z=z+(W<<11&4294967295|W>>>21),W=Q+(Z^z^V)+Y[7]+4139469664&4294967295,Q=Z+(W<<16&4294967295|W>>>16),W=V+(Q^Z^z)+Y[10]+3200236656&4294967295,V=Q+(W<<23&4294967295|W>>>9),W=z+(V^Q^Z)+Y[13]+681279174&4294967295,z=V+(W<<4&4294967295|W>>>28),W=Z+(z^V^Q)+Y[0]+3936430074&4294967295,Z=z+(W<<11&4294967295|W>>>21),W=Q+(Z^z^V)+Y[3]+3572445317&4294967295,Q=Z+(W<<16&4294967295|W>>>16),W=V+(Q^Z^z)+Y[6]+76029189&4294967295,V=Q+(W<<23&4294967295|W>>>9),W=z+(V^Q^Z)+Y[9]+3654602809&4294967295,z=V+(W<<4&4294967295|W>>>28),W=Z+(z^V^Q)+Y[12]+3873151461&4294967295,Z=z+(W<<11&4294967295|W>>>21),W=Q+(Z^z^V)+Y[15]+530742520&4294967295,Q=Z+(W<<16&4294967295|W>>>16),W=V+(Q^Z^z)+Y[2]+3299628645&4294967295,V=Q+(W<<23&4294967295|W>>>9),W=z+(Q^(V|~Z))+Y[0]+4096336452&4294967295,z=V+(W<<6&4294967295|W>>>26),W=Z+(V^(z|~Q))+Y[7]+1126891415&4294967295,Z=z+(W<<10&4294967295|W>>>22),W=Q+(z^(Z|~V))+Y[14]+2878612391&4294967295,Q=Z+(W<<15&4294967295|W>>>17),W=V+(Z^(Q|~z))+Y[5]+4237533241&4294967295,V=Q+(W<<21&4294967295|W>>>11),W=z+(Q^(V|~Z))+Y[12]+1700485571&4294967295,z=V+(W<<6&4294967295|W>>>26),W=Z+(V^(z|~Q))+Y[3]+2399980690&4294967295,Z=z+(W<<10&4294967295|W>>>22),W=Q+(z^(Z|~V))+Y[10]+4293915773&4294967295,Q=Z+(W<<15&4294967295|W>>>17),W=V+(Z^(Q|~z))+Y[1]+2240044497&4294967295,V=Q+(W<<21&4294967295|W>>>11),W=z+(Q^(V|~Z))+Y[8]+1873313359&4294967295,z=V+(W<<6&4294967295|W>>>26),W=Z+(V^(z|~Q))+Y[15]+4264355552&4294967295,Z=z+(W<<10&4294967295|W>>>22),W=Q+(z^(Z|~V))+Y[6]+2734768916&4294967295,Q=Z+(W<<15&4294967295|W>>>17),W=V+(Z^(Q|~z))+Y[13]+1309151649&4294967295,V=Q+(W<<21&4294967295|W>>>11),W=z+(Q^(V|~Z))+Y[4]+4149444226&4294967295,z=V+(W<<6&4294967295|W>>>26),W=Z+(V^(z|~Q))+Y[11]+3174756917&4294967295,Z=z+(W<<10&4294967295|W>>>22),W=Q+(z^(Z|~V))+Y[2]+718787259&4294967295,Q=Z+(W<<15&4294967295|W>>>17),W=V+(Z^(Q|~z))+Y[9]+3951481745&4294967295,j.g[0]=j.g[0]+z&4294967295,j.g[1]=j.g[1]+(Q+(W<<21&4294967295|W>>>11))&4294967295,j.g[2]=j.g[2]+Q&4294967295,j.g[3]=j.g[3]+Z&4294967295}s.prototype.v=function(j,z){z===void 0&&(z=j.length);const V=z-this.blockSize,Y=this.C;let Q=this.h,Z=0;for(;Z<z;){if(Q==0)for(;Z<=V;)c(this,j,Z),Z+=this.blockSize;if(typeof j=="string"){for(;Z<z;)if(Y[Q++]=j.charCodeAt(Z++),Q==this.blockSize){c(this,Y),Q=0;break}}else for(;Z<z;)if(Y[Q++]=j[Z++],Q==this.blockSize){c(this,Y),Q=0;break}}this.h=Q,this.o+=z},s.prototype.A=function(){var j=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);j[0]=128;for(var z=1;z<j.length-8;++z)j[z]=0;z=this.o*8;for(var V=j.length-8;V<j.length;++V)j[V]=z&255,z/=256;for(this.v(j),j=Array(16),z=0,V=0;V<4;++V)for(let Y=0;Y<32;Y+=8)j[z++]=this.g[V]>>>Y&255;return j};function h(j,z){var V=T;return Object.prototype.hasOwnProperty.call(V,j)?V[j]:V[j]=z(j)}function p(j,z){this.h=z;const V=[];let Y=!0;for(let Q=j.length-1;Q>=0;Q--){const Z=j[Q]|0;Y&&Z==z||(V[Q]=Z,Y=!1)}this.g=V}var T={};function w(j){return-128<=j&&j<128?h(j,function(z){return new p([z|0],z<0?-1:0)}):new p([j|0],j<0?-1:0)}function E(j){if(isNaN(j)||!isFinite(j))return I;if(j<0)return q(E(-j));const z=[];let V=1;for(let Y=0;j>=V;Y++)z[Y]=j/V|0,V*=4294967296;return new p(z,0)}function C(j,z){if(j.length==0)throw Error("number format error: empty string");if(z=z||10,z<2||36<z)throw Error("radix out of range: "+z);if(j.charAt(0)=="-")return q(C(j.substring(1),z));if(j.indexOf("-")>=0)throw Error('number format error: interior "-" character');const V=E(Math.pow(z,8));let Y=I;for(let Z=0;Z<j.length;Z+=8){var Q=Math.min(8,j.length-Z);const W=parseInt(j.substring(Z,Z+Q),z);Q<8?(Q=E(Math.pow(z,Q)),Y=Y.j(Q).add(E(W))):(Y=Y.j(V),Y=Y.add(E(W)))}return Y}var I=w(0),M=w(1),B=w(16777216);n=p.prototype,n.m=function(){if($(this))return-q(this).m();let j=0,z=1;for(let V=0;V<this.g.length;V++){const Y=this.i(V);j+=(Y>=0?Y:4294967296+Y)*z,z*=4294967296}return j},n.toString=function(j){if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(X(this))return"0";if($(this))return"-"+q(this).toString(j);const z=E(Math.pow(j,6));var V=this;let Y="";for(;;){const Q=le(V,z).g;V=_e(V,Q.j(z));let Z=((V.g.length>0?V.g[0]:V.h)>>>0).toString(j);if(V=Q,X(V))return Z+Y;for(;Z.length<6;)Z="0"+Z;Y=Z+Y}},n.i=function(j){return j<0?0:j<this.g.length?this.g[j]:this.h};function X(j){if(j.h!=0)return!1;for(let z=0;z<j.g.length;z++)if(j.g[z]!=0)return!1;return!0}function $(j){return j.h==-1}n.l=function(j){return j=_e(this,j),$(j)?-1:X(j)?0:1};function q(j){const z=j.g.length,V=[];for(let Y=0;Y<z;Y++)V[Y]=~j.g[Y];return new p(V,~j.h).add(M)}n.abs=function(){return $(this)?q(this):this},n.add=function(j){const z=Math.max(this.g.length,j.g.length),V=[];let Y=0;for(let Q=0;Q<=z;Q++){let Z=Y+(this.i(Q)&65535)+(j.i(Q)&65535),W=(Z>>>16)+(this.i(Q)>>>16)+(j.i(Q)>>>16);Y=W>>>16,Z&=65535,W&=65535,V[Q]=W<<16|Z}return new p(V,V[V.length-1]&-2147483648?-1:0)};function _e(j,z){return j.add(q(z))}n.j=function(j){if(X(this)||X(j))return I;if($(this))return $(j)?q(this).j(q(j)):q(q(this).j(j));if($(j))return q(this.j(q(j)));if(this.l(B)<0&&j.l(B)<0)return E(this.m()*j.m());const z=this.g.length+j.g.length,V=[];for(var Y=0;Y<2*z;Y++)V[Y]=0;for(Y=0;Y<this.g.length;Y++)for(let Q=0;Q<j.g.length;Q++){const Z=this.i(Y)>>>16,W=this.i(Y)&65535,Je=j.i(Q)>>>16,fe=j.i(Q)&65535;V[2*Y+2*Q]+=W*fe,ae(V,2*Y+2*Q),V[2*Y+2*Q+1]+=Z*fe,ae(V,2*Y+2*Q+1),V[2*Y+2*Q+1]+=W*Je,ae(V,2*Y+2*Q+1),V[2*Y+2*Q+2]+=Z*Je,ae(V,2*Y+2*Q+2)}for(j=0;j<z;j++)V[j]=V[2*j+1]<<16|V[2*j];for(j=z;j<2*z;j++)V[j]=0;return new p(V,0)};function ae(j,z){for(;(j[z]&65535)!=j[z];)j[z+1]+=j[z]>>>16,j[z]&=65535,z++}function K(j,z){this.g=j,this.h=z}function le(j,z){if(X(z))throw Error("division by zero");if(X(j))return new K(I,I);if($(j))return z=le(q(j),z),new K(q(z.g),q(z.h));if($(z))return z=le(j,q(z)),new K(q(z.g),z.h);if(j.g.length>30){if($(j)||$(z))throw Error("slowDivide_ only works with positive integers.");for(var V=M,Y=z;Y.l(j)<=0;)V=Re(V),Y=Re(Y);var Q=De(V,1),Z=De(Y,1);for(Y=De(Y,2),V=De(V,2);!X(Y);){var W=Z.add(Y);W.l(j)<=0&&(Q=Q.add(V),Z=W),Y=De(Y,1),V=De(V,1)}return z=_e(j,Q.j(z)),new K(Q,z)}for(Q=I;j.l(z)>=0;){for(V=Math.max(1,Math.floor(j.m()/z.m())),Y=Math.ceil(Math.log(V)/Math.LN2),Y=Y<=48?1:Math.pow(2,Y-48),Z=E(V),W=Z.j(z);$(W)||W.l(j)>0;)V-=Y,Z=E(V),W=Z.j(z);X(Z)&&(Z=M),Q=Q.add(Z),j=_e(j,W)}return new K(Q,j)}n.B=function(j){return le(this,j).h},n.and=function(j){const z=Math.max(this.g.length,j.g.length),V=[];for(let Y=0;Y<z;Y++)V[Y]=this.i(Y)&j.i(Y);return new p(V,this.h&j.h)},n.or=function(j){const z=Math.max(this.g.length,j.g.length),V=[];for(let Y=0;Y<z;Y++)V[Y]=this.i(Y)|j.i(Y);return new p(V,this.h|j.h)},n.xor=function(j){const z=Math.max(this.g.length,j.g.length),V=[];for(let Y=0;Y<z;Y++)V[Y]=this.i(Y)^j.i(Y);return new p(V,this.h^j.h)};function Re(j){const z=j.g.length+1,V=[];for(let Y=0;Y<z;Y++)V[Y]=j.i(Y)<<1|j.i(Y-1)>>>31;return new p(V,j.h)}function De(j,z){const V=z>>5;z%=32;const Y=j.g.length-V,Q=[];for(let Z=0;Z<Y;Z++)Q[Z]=z>0?j.i(Z+V)>>>z|j.i(Z+V+1)<<32-z:j.i(Z+V);return new p(Q,j.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,NA=s,p.prototype.add=p.prototype.add,p.prototype.multiply=p.prototype.j,p.prototype.modulo=p.prototype.B,p.prototype.compare=p.prototype.l,p.prototype.toNumber=p.prototype.m,p.prototype.toString=p.prototype.toString,p.prototype.getBits=p.prototype.i,p.fromNumber=E,p.fromString=C,Lo=p}).apply(typeof tE<"u"?tE:typeof self<"u"?self:typeof window<"u"?window:{});var Nf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var RA,Ou,OA,Gf,Pg,DA,MA,PA;(function(){var n,e=Object.defineProperty;function t(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nf=="object"&&Nf];for(var N=0;N<x.length;++N){var D=x[N];if(D&&D.Math==Math)return D}throw Error("Cannot find global object")}var s=t(this);function c(x,N){if(N)e:{var D=s;x=x.split(".");for(var F=0;F<x.length-1;F++){var ce=x[F];if(!(ce in D))break e;D=D[ce]}x=x[x.length-1],F=D[x],N=N(F),N!=F&&N!=null&&e(D,x,{configurable:!0,writable:!0,value:N})}}c("Symbol.dispose",function(x){return x||Symbol("Symbol.dispose")}),c("Array.prototype.values",function(x){return x||function(){return this[Symbol.iterator]()}}),c("Object.entries",function(x){return x||function(N){var D=[],F;for(F in N)Object.prototype.hasOwnProperty.call(N,F)&&D.push([F,N[F]]);return D}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},p=this||self;function T(x){var N=typeof x;return N=="object"&&x!=null||N=="function"}function w(x,N,D){return x.call.apply(x.bind,arguments)}function E(x,N,D){return E=w,E.apply(null,arguments)}function C(x,N){var D=Array.prototype.slice.call(arguments,1);return function(){var F=D.slice();return F.push.apply(F,arguments),x.apply(this,F)}}function I(x,N){function D(){}D.prototype=N.prototype,x.Z=N.prototype,x.prototype=new D,x.prototype.constructor=x,x.Ob=function(F,ce,Ee){for(var Be=Array(arguments.length-2),pt=2;pt<arguments.length;pt++)Be[pt-2]=arguments[pt];return N.prototype[ce].apply(F,Be)}}var M=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?x=>x&&AsyncContext.Snapshot.wrap(x):x=>x;function B(x){const N=x.length;if(N>0){const D=Array(N);for(let F=0;F<N;F++)D[F]=x[F];return D}return[]}function X(x,N){for(let F=1;F<arguments.length;F++){const ce=arguments[F];var D=typeof ce;if(D=D!="object"?D:ce?Array.isArray(ce)?"array":D:"null",D=="array"||D=="object"&&typeof ce.length=="number"){D=x.length||0;const Ee=ce.length||0;x.length=D+Ee;for(let Be=0;Be<Ee;Be++)x[D+Be]=ce[Be]}else x.push(ce)}}class ${constructor(N,D){this.i=N,this.j=D,this.h=0,this.g=null}get(){let N;return this.h>0?(this.h--,N=this.g,this.g=N.next,N.next=null):N=this.i(),N}}function q(x){p.setTimeout(()=>{throw x},0)}function _e(){var x=j;let N=null;return x.g&&(N=x.g,x.g=x.g.next,x.g||(x.h=null),N.next=null),N}class ae{constructor(){this.h=this.g=null}add(N,D){const F=K.get();F.set(N,D),this.h?this.h.next=F:this.g=F,this.h=F}}var K=new $(()=>new le,x=>x.reset());class le{constructor(){this.next=this.g=this.h=null}set(N,D){this.h=N,this.g=D,this.next=null}reset(){this.next=this.g=this.h=null}}let Re,De=!1,j=new ae,z=()=>{const x=Promise.resolve(void 0);Re=()=>{x.then(V)}};function V(){for(var x;x=_e();){try{x.h.call(x.g)}catch(D){q(D)}var N=K;N.j(x),N.h<100&&(N.h++,x.next=N.g,N.g=x)}De=!1}function Y(){this.u=this.u,this.C=this.C}Y.prototype.u=!1,Y.prototype.dispose=function(){this.u||(this.u=!0,this.N())},Y.prototype[Symbol.dispose]=function(){this.dispose()},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Q(x,N){this.type=x,this.g=this.target=N,this.defaultPrevented=!1}Q.prototype.h=function(){this.defaultPrevented=!0};var Z=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var x=!1,N=Object.defineProperty({},"passive",{get:function(){x=!0}});try{const D=()=>{};p.addEventListener("test",D,N),p.removeEventListener("test",D,N)}catch{}return x})();function W(x){return/^[\s\xa0]*$/.test(x)}function Je(x,N){Q.call(this,x?x.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,x&&this.init(x,N)}I(Je,Q),Je.prototype.init=function(x,N){const D=this.type=x.type,F=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:null;this.target=x.target||x.srcElement,this.g=N,N=x.relatedTarget,N||(D=="mouseover"?N=x.fromElement:D=="mouseout"&&(N=x.toElement)),this.relatedTarget=N,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0),this.button=x.button,this.key=x.key||"",this.ctrlKey=x.ctrlKey,this.altKey=x.altKey,this.shiftKey=x.shiftKey,this.metaKey=x.metaKey,this.pointerId=x.pointerId||0,this.pointerType=x.pointerType,this.state=x.state,this.i=x,x.defaultPrevented&&Je.Z.h.call(this)},Je.prototype.h=function(){Je.Z.h.call(this);const x=this.i;x.preventDefault?x.preventDefault():x.returnValue=!1};var fe="closure_listenable_"+(Math.random()*1e6|0),me=0;function be(x,N,D,F,ce){this.listener=x,this.proxy=null,this.src=N,this.type=D,this.capture=!!F,this.ha=ce,this.key=++me,this.da=this.fa=!1}function Ye(x){x.da=!0,x.listener=null,x.proxy=null,x.src=null,x.ha=null}function gt(x,N,D){for(const F in x)N.call(D,x[F],F,x)}function ut(x,N){for(const D in x)N.call(void 0,x[D],D,x)}function ie(x){const N={};for(const D in x)N[D]=x[D];return N}const Ae="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ue(x,N){let D,F;for(let ce=1;ce<arguments.length;ce++){F=arguments[ce];for(D in F)x[D]=F[D];for(let Ee=0;Ee<Ae.length;Ee++)D=Ae[Ee],Object.prototype.hasOwnProperty.call(F,D)&&(x[D]=F[D])}}function Ve(x){this.src=x,this.g={},this.h=0}Ve.prototype.add=function(x,N,D,F,ce){const Ee=x.toString();x=this.g[Ee],x||(x=this.g[Ee]=[],this.h++);const Be=Le(x,N,F,ce);return Be>-1?(N=x[Be],D||(N.fa=!1)):(N=new be(N,this.src,Ee,!!F,ce),N.fa=D,x.push(N)),N};function st(x,N){const D=N.type;if(D in x.g){var F=x.g[D],ce=Array.prototype.indexOf.call(F,N,void 0),Ee;(Ee=ce>=0)&&Array.prototype.splice.call(F,ce,1),Ee&&(Ye(N),x.g[D].length==0&&(delete x.g[D],x.h--))}}function Le(x,N,D,F){for(let ce=0;ce<x.length;++ce){const Ee=x[ce];if(!Ee.da&&Ee.listener==N&&Ee.capture==!!D&&Ee.ha==F)return ce}return-1}var St="closure_lm_"+(Math.random()*1e6|0),Ct={};function Jt(x,N,D,F,ce){if(Array.isArray(N)){for(let Ee=0;Ee<N.length;Ee++)Jt(x,N[Ee],D,F,ce);return null}return D=qt(D),x&&x[fe]?x.J(N,D,T(F)?!!F.capture:!1,ce):Wr(x,N,D,!1,F,ce)}function Wr(x,N,D,F,ce,Ee){if(!N)throw Error("Invalid event type");const Be=T(ce)?!!ce.capture:!!ce;let pt=Kr(x);if(pt||(x[St]=pt=new Ve(x)),D=pt.add(N,D,F,Be,Ee),D.proxy)return D;if(F=Bn(),D.proxy=F,F.src=x,F.listener=D,x.addEventListener)Z||(ce=Be),ce===void 0&&(ce=!1),x.addEventListener(N.toString(),F,ce);else if(x.attachEvent)x.attachEvent(rr(N.toString()),F);else if(x.addListener&&x.removeListener)x.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return D}function Bn(){function x(D){return N.call(x.src,x.listener,D)}const N=ir;return x}function ui(x,N,D,F,ce){if(Array.isArray(N))for(var Ee=0;Ee<N.length;Ee++)ui(x,N[Ee],D,F,ce);else F=T(F)?!!F.capture:!!F,D=qt(D),x&&x[fe]?(x=x.i,Ee=String(N).toString(),Ee in x.g&&(N=x.g[Ee],D=Le(N,D,F,ce),D>-1&&(Ye(N[D]),Array.prototype.splice.call(N,D,1),N.length==0&&(delete x.g[Ee],x.h--)))):x&&(x=Kr(x))&&(N=x.g[N.toString()],x=-1,N&&(x=Le(N,D,F,ce)),(D=x>-1?N[x]:null)&&ht(D))}function ht(x){if(typeof x!="number"&&x&&!x.da){var N=x.src;if(N&&N[fe])st(N.i,x);else{var D=x.type,F=x.proxy;N.removeEventListener?N.removeEventListener(D,F,x.capture):N.detachEvent?N.detachEvent(rr(D),F):N.addListener&&N.removeListener&&N.removeListener(F),(D=Kr(N))?(st(D,x),D.h==0&&(D.src=null,N[St]=null)):Ye(x)}}}function rr(x){return x in Ct?Ct[x]:Ct[x]="on"+x}function ir(x,N){if(x.da)x=!0;else{N=new Je(N,this);const D=x.listener,F=x.ha||x.src;x.fa&&ht(x),x=D.call(F,N)}return x}function Kr(x){return x=x[St],x instanceof Ve?x:null}var mn="__closure_events_fn_"+(Math.random()*1e9>>>0);function qt(x){return typeof x=="function"?x:(x[mn]||(x[mn]=function(N){return x.handleEvent(N)}),x[mn])}function et(){Y.call(this),this.i=new Ve(this),this.M=this,this.G=null}I(et,Y),et.prototype[fe]=!0,et.prototype.removeEventListener=function(x,N,D,F){ui(this,x,N,D,F)};function bn(x,N){var D,F=x.G;if(F)for(D=[];F;F=F.G)D.push(F);if(x=x.M,F=N.type||N,typeof N=="string")N=new Q(N,x);else if(N instanceof Q)N.target=N.target||x;else{var ce=N;N=new Q(F,x),Ue(N,ce)}ce=!0;let Ee,Be;if(D)for(Be=D.length-1;Be>=0;Be--)Ee=N.g=D[Be],ce=Fe(Ee,F,!0,N)&&ce;if(Ee=N.g=x,ce=Fe(Ee,F,!0,N)&&ce,ce=Fe(Ee,F,!1,N)&&ce,D)for(Be=0;Be<D.length;Be++)Ee=N.g=D[Be],ce=Fe(Ee,F,!1,N)&&ce}et.prototype.N=function(){if(et.Z.N.call(this),this.i){var x=this.i;for(const N in x.g){const D=x.g[N];for(let F=0;F<D.length;F++)Ye(D[F]);delete x.g[N],x.h--}}this.G=null},et.prototype.J=function(x,N,D,F){return this.i.add(String(x),N,!1,D,F)},et.prototype.K=function(x,N,D,F){return this.i.add(String(x),N,!0,D,F)};function Fe(x,N,D,F){if(N=x.i.g[String(N)],!N)return!0;N=N.concat();let ce=!0;for(let Ee=0;Ee<N.length;++Ee){const Be=N[Ee];if(Be&&!Be.da&&Be.capture==D){const pt=Be.listener,Fn=Be.ha||Be.src;Be.fa&&st(x.i,Be),ce=pt.call(Fn,F)!==!1&&ce}}return ce&&!F.defaultPrevented}function Ts(x,N){if(typeof x!="function")if(x&&typeof x.handleEvent=="function")x=E(x.handleEvent,x);else throw Error("Invalid listener argument");return Number(N)>2147483647?-1:p.setTimeout(x,N||0)}function rs(x){x.g=Ts(()=>{x.g=null,x.i&&(x.i=!1,rs(x))},x.l);const N=x.h;x.h=null,x.m.apply(null,N)}class pn extends Y{constructor(N,D){super(),this.m=N,this.l=D,this.h=null,this.i=!1,this.g=null}j(N){this.h=arguments,this.g?this.i=!0:rs(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qr(x){Y.call(this),this.h=x,this.g={}}I(Qr,Y);var ur=[];function is(x){gt(x.g,function(N,D){this.g.hasOwnProperty(D)&&ht(N)},x),x.g={}}Qr.prototype.N=function(){Qr.Z.N.call(this),is(this)},Qr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var hr=p.JSON.stringify,Tn=p.JSON.parse,vs=class{stringify(x){return p.JSON.stringify(x,void 0)}parse(x){return p.JSON.parse(x,void 0)}};function ss(){}function ra(){}var Yt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Me(){Q.call(this,"d")}I(Me,Q);function Xt(){Q.call(this,"c")}I(Xt,Q);var at={},cn=null;function hi(){return cn=cn||new et}at.Ia="serverreachability";function as(x){Q.call(this,at.Ia,x)}I(as,Q);function Zr(x){const N=hi();bn(N,new as(N))}at.STAT_EVENT="statevent";function Tt(x,N){Q.call(this,at.STAT_EVENT,x),this.stat=N}I(Tt,Q);function on(x){const N=hi();bn(N,new Tt(N,x))}at.Ja="timingevent";function Jr(x,N){Q.call(this,at.Ja,x),this.size=N}I(Jr,Q);function $r(x,N){if(typeof x!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){x()},N)}function Nn(){this.g=!0}Nn.prototype.ua=function(){this.g=!1};function Ls(x,N,D,F,ce,Ee){x.info(function(){if(x.g)if(Ee){var Be="",pt=Ee.split("&");for(let Qt=0;Qt<pt.length;Qt++){var Fn=pt[Qt].split("=");if(Fn.length>1){const Cn=Fn[0];Fn=Fn[1];const mi=Cn.split("_");Be=mi.length>=2&&mi[1]=="type"?Be+(Cn+"="+Fn+"&"):Be+(Cn+"=redacted&")}}}else Be=null;else Be=Ee;return"XMLHTTP REQ ("+F+") [attempt "+ce+"]: "+N+`
`+D+`
`+Be})}function Un(x,N,D,F,ce,Ee,Be){x.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+ce+"]: "+N+`
`+D+`
`+Ee+" "+Be})}function fr(x,N,D,F){x.info(function(){return"XMLHTTP TEXT ("+N+"): "+Br(x,D)+(F?" "+F:"")})}function fi(x,N){x.info(function(){return"TIMEOUT: "+N})}Nn.prototype.info=function(){};function Br(x,N){if(!x.g)return N;if(!N)return null;try{const Ee=JSON.parse(N);if(Ee){for(x=0;x<Ee.length;x++)if(Array.isArray(Ee[x])){var D=Ee[x];if(!(D.length<2)){var F=D[1];if(Array.isArray(F)&&!(F.length<1)){var ce=F[0];if(ce!="noop"&&ce!="stop"&&ce!="close")for(let Be=1;Be<F.length;Be++)F[Be]=""}}}}return hr(Ee)}catch{return N}}var os={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ei={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Li;function On(){}I(On,ss),On.prototype.g=function(){return new XMLHttpRequest},Li=new On;function dr(x){return encodeURIComponent(String(x))}function vr(x){var N=1;x=x.split(":");const D=[];for(;N>0&&x.length;)D.push(x.shift()),N--;return x.length&&D.push(x.join(":")),D}function je(x,N,D,F){this.j=x,this.i=N,this.l=D,this.S=F||1,this.V=new Qr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new gr}function gr(){this.i=null,this.g="",this.h=!1}var vn={},Wt={};function mr(x,N,D){x.M=1,x.A=Or(Ge(N)),x.u=D,x.R=!0,ki(x,null)}function ki(x,N){x.F=Date.now(),Ai(x),x.B=Ge(x.A);var D=x.B,F=x.S;Array.isArray(F)||(F=[String(F)]),un(D.i,"t",F),x.C=0,D=x.j.L,x.h=new gr,x.g=$a(x.j,D?N:null,!x.u),x.P>0&&(x.O=new pn(E(x.Y,x,x.g),x.P)),N=x.V,D=x.g,F=x.ba;var ce="readystatechange";Array.isArray(ce)||(ce&&(ur[0]=ce.toString()),ce=ur);for(let Ee=0;Ee<ce.length;Ee++){const Be=Jt(D,ce[Ee],F||N.handleEvent,!1,N.h||N);if(!Be)break;N.g[Be.key]=Be}N=x.J?ie(x.J):{},x.u?(x.v||(x.v="POST"),N["Content-Type"]="application/x-www-form-urlencoded",x.g.ea(x.B,x.v,x.u,N)):(x.v="GET",x.g.ea(x.B,x.v,null,N)),Zr(),Ls(x.i,x.v,x.B,x.l,x.S,x.u)}je.prototype.ba=function(x){x=x.target;const N=this.O;N&&vi(x)==3?N.j():this.Y(x)},je.prototype.Y=function(x){try{if(x==this.g)e:{const pt=vi(this.g),Fn=this.g.ya(),Qt=this.g.ca();if(!(pt<3)&&(pt!=3||this.g&&(this.h.h||this.g.la()||Yn(this.g)))){this.K||pt!=4||Fn==7||(Fn==8||Qt<=0?Zr(3):Zr(2)),xn(this);var N=this.g.ca();this.X=N;var D=ks(this);if(this.o=N==200,Un(this.i,this.v,this.B,this.l,this.S,pt,N),this.o){if(this.U&&!this.L){t:{if(this.g){var F,ce=this.g;if((F=ce.g?ce.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(F)){var Ee=F;break t}}Ee=null}if(x=Ee)fr(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,sr(this,x);else{this.o=!1,this.m=3,on(12),Rr(this),Ot(this);break e}}if(this.R){x=!0;let Cn;for(;!this.K&&this.C<D.length;)if(Cn=ia(this,D),Cn==Wt){pt==4&&(this.m=4,on(14),x=!1),fr(this.i,this.l,null,"[Incomplete Response]");break}else if(Cn==vn){this.m=4,on(15),fr(this.i,this.l,D,"[Invalid Chunk]"),x=!1;break}else fr(this.i,this.l,Cn,null),sr(this,Cn);if(Ur(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pt!=4||D.length!=0||this.h.h||(this.m=1,on(16),x=!1),this.o=this.o&&x,!x)fr(this.i,this.l,D,"[Invalid Chunked Response]"),Rr(this),Ot(this);else if(D.length>0&&!this.W){this.W=!0;var Be=this.j;Be.g==this&&Be.aa&&!Be.P&&(Be.j.info("Great, no buffering proxy detected. Bytes received: "+D.length),xe(Be),Be.P=!0,on(11))}}else fr(this.i,this.l,D,null),sr(this,D);pt==4&&Rr(this),this.o&&!this.K&&(pt==4?fa(this.j,this):(this.o=!1,Ai(this)))}else gi(this.g),N==400&&D.indexOf("Unknown SID")>0?(this.m=3,on(12)):(this.m=0,on(13)),Rr(this),Ot(this)}}}catch{}finally{}};function ks(x){if(!Ur(x))return x.g.la();const N=Yn(x.g);if(N==="")return"";let D="";const F=N.length,ce=vi(x.g)==4;if(!x.h.i){if(typeof TextDecoder>"u")return Rr(x),Ot(x),"";x.h.i=new p.TextDecoder}for(let Ee=0;Ee<F;Ee++)x.h.h=!0,D+=x.h.i.decode(N[Ee],{stream:!(ce&&Ee==F-1)});return N.length=0,x.h.g+=D,x.C=0,x.h.g}function Ur(x){return x.g?x.v=="GET"&&x.M!=2&&x.j.Aa:!1}function ia(x,N){var D=x.C,F=N.indexOf(`
`,D);return F==-1?Wt:(D=Number(N.substring(D,F)),isNaN(D)?vn:(F+=1,F+D>N.length?Wt:(N=N.slice(F,F+D),x.C=F+D,N)))}je.prototype.cancel=function(){this.K=!0,Rr(this)};function Ai(x){x.T=Date.now()+x.H,pr(x,x.H)}function pr(x,N){if(x.D!=null)throw Error("WatchDog timer not null");x.D=$r(E(x.aa,x),N)}function xn(x){x.D&&(p.clearTimeout(x.D),x.D=null)}je.prototype.aa=function(){this.D=null;const x=Date.now();x-this.T>=0?(fi(this.i,this.B),this.M!=2&&(Zr(),on(17)),Rr(this),this.m=2,Ot(this)):pr(this,this.T-x)};function Ot(x){x.j.I==0||x.K||fa(x.j,x)}function Rr(x){xn(x);var N=x.O;N&&typeof N.dispose=="function"&&N.dispose(),x.O=null,is(x.V),x.g&&(N=x.g,x.g=null,N.abort(),N.dispose())}function sr(x,N){try{var D=x.j;if(D.I!=0&&(D.g==x||Sr(D.h,x))){if(!x.L&&Sr(D.h,x)&&D.I==3){try{var F=D.Ba.g.parse(N)}catch{F=null}if(Array.isArray(F)&&F.length==3){var ce=F;if(ce[0]==0){e:if(!D.v){if(D.g)if(D.g.F+3e3<x.F)Vn(D),Is(D);else break e;ha(D),on(18)}}else D.xa=ce[1],0<D.xa-D.K&&ce[2]<37500&&D.F&&D.A==0&&!D.C&&(D.C=$r(E(D.Va,D),6e3));Kt(D.h)<=1&&D.ta&&(D.ta=void 0)}else us(D,11)}else if((x.L||D.g==x)&&Vn(D),!W(N))for(ce=D.Ba.g.parse(N),N=0;N<ce.length;N++){let Qt=ce[N];const Cn=Qt[0];if(!(Cn<=D.K))if(D.K=Cn,Qt=Qt[1],D.I==2)if(Qt[0]=="c"){D.M=Qt[1],D.ba=Qt[2];const mi=Qt[3];mi!=null&&(D.ka=mi,D.j.info("VER="+D.ka));const ds=Qt[4];ds!=null&&(D.za=ds,D.j.info("SVER="+D.za));const Mr=Qt[5];Mr!=null&&typeof Mr=="number"&&Mr>0&&(F=1.5*Mr,D.O=F,D.j.info("backChannelRequestTimeoutMs_="+F)),F=D;const pi=x.g;if(pi){const ga=pi.g?pi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ga){var Ee=F.h;Ee.g||ga.indexOf("spdy")==-1&&ga.indexOf("quic")==-1&&ga.indexOf("h2")==-1||(Ee.j=Ee.l,Ee.g=new Set,Ee.h&&(aa(Ee,Ee.h),Ee.h=null))}if(F.G){const gs=pi.g?pi.g.getResponseHeader("X-HTTP-Session-Id"):null;gs&&(F.wa=gs,tt(F.J,F.G,gs))}}D.I=3,D.l&&D.l.ra(),D.aa&&(D.T=Date.now()-x.F,D.j.info("Handshake RTT: "+D.T+"ms")),F=D;var Be=x;if(F.na=Ml(F,F.L?F.ba:null,F.W),Be.L){Mt(F.h,Be);var pt=Be,Fn=F.O;Fn&&(pt.H=Fn),pt.D&&(xn(pt),Ai(pt)),F.g=Be}else ji(F);D.i.length>0&&cs(D)}else Qt[0]!="stop"&&Qt[0]!="close"||us(D,7);else D.I==3&&(Qt[0]=="stop"||Qt[0]=="close"?Qt[0]=="stop"?us(D,7):Qa(D):Qt[0]!="noop"&&D.l&&D.l.qa(Qt),D.A=0)}}Zr(4)}catch{}}var Rn=class{constructor(x,N){this.g=x,this.map=N}};function Ie(x){this.l=x||10,p.PerformanceNavigationTiming?(x=p.performance.getEntriesByType("navigation"),x=x.length>0&&(x[0].nextHopProtocol=="hq"||x[0].nextHopProtocol=="h2")):x=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=x?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function sa(x){return x.h?!0:x.g?x.g.size>=x.j:!1}function Kt(x){return x.h?1:x.g?x.g.size:0}function Sr(x,N){return x.h?x.h==N:x.g?x.g.has(N):!1}function aa(x,N){x.g?x.g.add(N):x.h=N}function Mt(x,N){x.h&&x.h==N?x.h=null:x.g&&x.g.has(N)&&x.g.delete(N)}Ie.prototype.cancel=function(){if(this.i=Dt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const x of this.g.values())x.cancel();this.g.clear()}};function Dt(x){if(x.h!=null)return x.i.concat(x.h.G);if(x.g!=null&&x.g.size!==0){let N=x.i;for(const D of x.g.values())N=N.concat(D.G);return N}return B(x.i)}var bt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function J(x,N){if(x){x=x.split("&");for(let D=0;D<x.length;D++){const F=x[D].indexOf("=");let ce,Ee=null;F>=0?(ce=x[D].substring(0,F),Ee=x[D].substring(F+1)):ce=x[D],N(ce,Ee?decodeURIComponent(Ee.replace(/\+/g," ")):"")}}}function ze(x){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let N;x instanceof ze?(this.l=x.l,Ze(this,x.j),this.o=x.o,this.g=x.g,Gn(this,x.u),this.h=x.h,ls(this,Zo(x.i)),this.m=x.m):x&&(N=String(x).match(bt))?(this.l=!1,Ze(this,N[1]||"",!0),this.o=bi(N[2]||""),this.g=bi(N[3]||"",!0),Gn(this,N[4]),this.h=bi(N[5]||"",!0),ls(this,N[6]||"",!0),this.m=bi(N[7]||"")):(this.l=!1,this.i=new ar(null,this.l))}ze.prototype.toString=function(){const x=[];var N=this.j;N&&x.push(Qn(N,nn,!0),":");var D=this.g;return(D||N=="file")&&(x.push("//"),(N=this.o)&&x.push(Qn(N,nn,!0),"@"),x.push(dr(D).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D=this.u,D!=null&&x.push(":",String(D))),(D=this.h)&&(this.g&&D.charAt(0)!="/"&&x.push("/"),x.push(Qn(D,D.charAt(0)=="/"?H:he,!0))),(D=this.i.toString())&&x.push("?",D),(D=this.m)&&x.push("#",Qn(D,qn)),x.join("")},ze.prototype.resolve=function(x){const N=Ge(this);let D=!!x.j;D?Ze(N,x.j):D=!!x.o,D?N.o=x.o:D=!!x.g,D?N.g=x.g:D=x.u!=null;var F=x.h;if(D)Gn(N,x.u);else if(D=!!x.h){if(F.charAt(0)!="/")if(this.g&&!this.h)F="/"+F;else{var ce=N.h.lastIndexOf("/");ce!=-1&&(F=N.h.slice(0,ce+1)+F)}if(ce=F,ce==".."||ce==".")F="";else if(ce.indexOf("./")!=-1||ce.indexOf("/.")!=-1){F=ce.lastIndexOf("/",0)==0,ce=ce.split("/");const Ee=[];for(let Be=0;Be<ce.length;){const pt=ce[Be++];pt=="."?F&&Be==ce.length&&Ee.push(""):pt==".."?((Ee.length>1||Ee.length==1&&Ee[0]!="")&&Ee.pop(),F&&Be==ce.length&&Ee.push("")):(Ee.push(pt),F=!0)}F=Ee.join("/")}else F=ce}return D?N.h=F:D=x.i.toString()!=="",D?ls(N,Zo(x.i)):D=!!x.m,D&&(N.m=x.m),N};function Ge(x){return new ze(x)}function Ze(x,N,D){x.j=D?bi(N,!0):N,x.j&&(x.j=x.j.replace(/:$/,""))}function Gn(x,N){if(N){if(N=Number(N),isNaN(N)||N<0)throw Error("Bad port number "+N);x.u=N}else x.u=null}function ls(x,N,D){N instanceof ar?(x.i=N,Us(x.i,x.l)):(D||(N=Qn(N,We)),x.i=new ar(N,x.l))}function tt(x,N,D){x.i.set(N,D)}function Or(x){return tt(x,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),x}function bi(x,N){return x?N?decodeURI(x.replace(/%25/g,"%2525")):decodeURIComponent(x):""}function Qn(x,N,D){return typeof x=="string"?(x=encodeURI(x).replace(N,Et),D&&(x=x.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x):null}function Et(x){return x=x.charCodeAt(0),"%"+(x>>4&15).toString(16)+(x&15).toString(16)}var nn=/[#\/\?@]/g,he=/[#\?:]/g,H=/[#\?]/g,We=/[#\?@]/g,qn=/#/g;function ar(x,N){this.h=this.g=null,this.i=x||null,this.j=!!N}function ti(x){x.g||(x.g=new Map,x.h=0,x.i&&J(x.i,function(N,D){x.add(decodeURIComponent(N.replace(/\+/g," ")),D)}))}n=ar.prototype,n.add=function(x,N){ti(this),this.i=null,x=Bs(this,x);let D=this.g.get(x);return D||this.g.set(x,D=[]),D.push(N),this.h+=1,this};function Ka(x,N){ti(x),N=Bs(x,N),x.g.has(N)&&(x.i=null,x.h-=x.g.get(N).length,x.g.delete(N))}function Dr(x,N){return ti(x),N=Bs(x,N),x.g.has(N)}n.forEach=function(x,N){ti(this),this.g.forEach(function(D,F){D.forEach(function(ce){x.call(N,ce,F,this)},this)},this)};function $e(x,N){ti(x);let D=[];if(typeof N=="string")Dr(x,N)&&(D=D.concat(x.g.get(Bs(x,N))));else for(x=Array.from(x.g.values()),N=0;N<x.length;N++)D=D.concat(x[N]);return D}n.set=function(x,N){return ti(this),this.i=null,x=Bs(this,x),Dr(this,x)&&(this.h-=this.g.get(x).length),this.g.set(x,[N]),this.h+=1,this},n.get=function(x,N){return x?(x=$e(this,x),x.length>0?String(x[0]):N):N};function un(x,N,D){Ka(x,N),D.length>0&&(x.i=null,x.g.set(Bs(x,N),B(D)),x.h+=D.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const x=[],N=Array.from(this.g.keys());for(let F=0;F<N.length;F++){var D=N[F];const ce=dr(D);D=$e(this,D);for(let Ee=0;Ee<D.length;Ee++){let Be=ce;D[Ee]!==""&&(Be+="="+dr(D[Ee])),x.push(Be)}}return this.i=x.join("&")};function Zo(x){const N=new ar;return N.i=x.i,x.g&&(N.g=new Map(x.g),N.h=x.h),N}function Bs(x,N){return N=String(N),x.j&&(N=N.toLowerCase()),N}function Us(x,N){N&&!x.j&&(ti(x),x.i=null,x.g.forEach(function(D,F){const ce=F.toLowerCase();F!=ce&&(Ka(this,F),un(this,ce,D))},x)),x.j=N}function ni(x,N){const D=new Nn;if(p.Image){const F=new Image;F.onload=C(Ti,D,"TestLoadImage: loaded",!0,N,F),F.onerror=C(Ti,D,"TestLoadImage: error",!1,N,F),F.onabort=C(Ti,D,"TestLoadImage: abort",!1,N,F),F.ontimeout=C(Ti,D,"TestLoadImage: timeout",!1,N,F),p.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=x}else N(!1)}function oa(x,N){const D=new Nn,F=new AbortController,ce=setTimeout(()=>{F.abort(),Ti(D,"TestPingServer: timeout",!1,N)},1e4);fetch(x,{signal:F.signal}).then(Ee=>{clearTimeout(ce),Ee.ok?Ti(D,"TestPingServer: ok",!0,N):Ti(D,"TestPingServer: server error",!1,N)}).catch(()=>{clearTimeout(ce),Ti(D,"TestPingServer: error",!1,N)})}function Ti(x,N,D,F,ce){try{ce&&(ce.onload=null,ce.onerror=null,ce.onabort=null,ce.ontimeout=null),F(D)}catch{}}function Sn(){this.g=new vs}function ri(x){this.i=x.Sb||null,this.h=x.ab||!1}I(ri,ss),ri.prototype.g=function(){return new ii(this.i,this.h)};function ii(x,N){et.call(this),this.H=x,this.o=N,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}I(ii,et),n=ii.prototype,n.open=function(x,N){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=x,this.D=N,this.readyState=1,lt(this)},n.send=function(x){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const N={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};x&&(N.body=x),(this.H||p).fetch(new Request(this.D,N)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Vs(this)),this.readyState=0},n.Pa=function(x){if(this.g&&(this.l=x,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=x.headers,this.readyState=2,lt(this)),this.g&&(this.readyState=3,lt(this),this.g)))if(this.responseType==="arraybuffer")x.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in x){if(this.j=x.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;nt(this)}else x.text().then(this.Oa.bind(this),this.ga.bind(this))};function nt(x){x.j.read().then(x.Ma.bind(x)).catch(x.ga.bind(x))}n.Ma=function(x){if(this.g){if(this.o&&x.value)this.response.push(x.value);else if(!this.o){var N=x.value?x.value:new Uint8Array(0);(N=this.B.decode(N,{stream:!x.done}))&&(this.response=this.responseText+=N)}x.done?Vs(this):lt(this),this.readyState==3&&nt(this)}},n.Oa=function(x){this.g&&(this.response=this.responseText=x,Vs(this))},n.Na=function(x){this.g&&(this.response=x,Vs(this))},n.ga=function(){this.g&&Vs(this)};function Vs(x){x.readyState=4,x.l=null,x.j=null,x.B=null,lt(x)}n.setRequestHeader=function(x,N){this.A.append(x,N)},n.getResponseHeader=function(x){return this.h&&this.h.get(x.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const x=[],N=this.h.entries();for(var D=N.next();!D.done;)D=D.value,x.push(D[0]+": "+D[1]),D=N.next();return x.join(`\r
`)};function lt(x){x.onreadystatechange&&x.onreadystatechange.call(x)}Object.defineProperty(ii.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(x){this.m=x?"include":"same-origin"}});function hn(x){let N="";return gt(x,function(D,F){N+=F,N+=":",N+=D,N+=`\r
`}),N}function la(x,N,D){e:{for(F in D){var F=!1;break e}F=!0}F||(D=hn(D),typeof x=="string"?D!=null&&dr(D):tt(x,N,D))}function rn(x){et.call(this),this.headers=new Map,this.L=x||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}I(rn,et);var Bi=/^https?$/i,Ui=["POST","PUT"];n=rn.prototype,n.Fa=function(x){this.H=x},n.ea=function(x,N,D,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+x);N=N?N.toUpperCase():"GET",this.D=x,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Li.g(),this.g.onreadystatechange=M(E(this.Ca,this));try{this.B=!0,this.g.open(N,String(x),!0),this.B=!1}catch(Ee){ca(this,Ee);return}if(x=D||"",D=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var ce in F)D.set(ce,F[ce]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const Ee of F.keys())D.set(Ee,F.get(Ee));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(D.keys()).find(Ee=>Ee.toLowerCase()=="content-type"),ce=p.FormData&&x instanceof p.FormData,!(Array.prototype.indexOf.call(Ui,N,void 0)>=0)||F||ce||D.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ee,Be]of D)this.g.setRequestHeader(Ee,Be);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(x),this.v=!1}catch(Ee){ca(this,Ee)}};function ca(x,N){x.h=!1,x.g&&(x.j=!0,x.g.abort(),x.j=!1),x.l=N,x.o=5,Ss(x),di(x)}function Ss(x){x.A||(x.A=!0,bn(x,"complete"),bn(x,"error"))}n.abort=function(x){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=x||7,bn(this,"complete"),bn(this,"abort"),di(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),di(this,!0)),rn.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Vi(this):this.Xa())},n.Xa=function(){Vi(this)};function Vi(x){if(x.h&&typeof h<"u"){if(x.v&&vi(x)==4)setTimeout(x.Ca.bind(x),0);else if(bn(x,"readystatechange"),vi(x)==4){x.h=!1;try{const Ee=x.ca();e:switch(Ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var N=!0;break e;default:N=!1}var D;if(!(D=N)){var F;if(F=Ee===0){let Be=String(x.D).match(bt)[1]||null;!Be&&p.self&&p.self.location&&(Be=p.self.location.protocol.slice(0,-1)),F=!Bi.test(Be?Be.toLowerCase():"")}D=F}if(D)bn(x,"complete"),bn(x,"success");else{x.o=6;try{var ce=vi(x)>2?x.g.statusText:""}catch{ce=""}x.l=ce+" ["+x.ca()+"]",Ss(x)}}finally{di(x)}}}}function di(x,N){if(x.g){x.m&&(clearTimeout(x.m),x.m=null);const D=x.g;x.g=null,N||bn(x,"ready");try{D.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function vi(x){return x.g?x.g.readyState:0}n.ca=function(){try{return vi(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(x){if(this.g){var N=this.g.responseText;return x&&N.indexOf(x)==0&&(N=N.substring(x.length)),Tn(N)}};function Yn(x){try{if(!x.g)return null;if("response"in x.g)return x.g.response;switch(x.F){case"":case"text":return x.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in x.g)return x.g.mozResponseArrayBuffer}return null}catch{return null}}function gi(x){const N={};x=(x.g&&vi(x)>=2&&x.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<x.length;F++){if(W(x[F]))continue;var D=vr(x[F]);const ce=D[0];if(D=D[1],typeof D!="string")continue;D=D.trim();const Ee=N[ce]||[];N[ce]=Ee,Ee.push(D)}ut(N,function(F){return F.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Dn(x,N,D){return D&&D.internalChannelParams&&D.internalChannelParams[x]||N}function Cs(x){this.za=0,this.i=[],this.j=new Nn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Dn("failFast",!1,x),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Dn("baseRetryDelayMs",5e3,x),this.Za=Dn("retryDelaySeedMs",1e4,x),this.Ta=Dn("forwardChannelMaxRetries",2,x),this.va=Dn("forwardChannelRequestTimeoutMs",2e4,x),this.ma=x&&x.xmlHttpFactory||void 0,this.Ua=x&&x.Rb||void 0,this.Aa=x&&x.useFetchStreams||!1,this.O=void 0,this.L=x&&x.supportsCrossDomainXhr||!1,this.M="",this.h=new Ie(x&&x.concurrentRequestLimit),this.Ba=new Sn,this.S=x&&x.fastHandshake||!1,this.R=x&&x.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=x&&x.Pb||!1,x&&x.ua&&this.j.ua(),x&&x.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&x&&x.detectBufferingProxy||!1,this.ia=void 0,x&&x.longPollingTimeout&&x.longPollingTimeout>0&&(this.ia=x.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Cs.prototype,n.ka=8,n.I=1,n.connect=function(x,N,D,F){on(0),this.W=x,this.H=N||{},D&&F!==void 0&&(this.H.OSID=D,this.H.OAID=F),this.F=this.X,this.J=Ml(this,null,this.W),cs(this)};function Qa(x){if(Za(x),x.I==3){var N=x.V++,D=Ge(x.J);if(tt(D,"SID",x.M),tt(D,"RID",N),tt(D,"TYPE","terminate"),js(x,D),N=new je(x,x.j,N),N.M=2,N.A=Or(Ge(D)),D=!1,p.navigator&&p.navigator.sendBeacon)try{D=p.navigator.sendBeacon(N.A.toString(),"")}catch{}!D&&p.Image&&(new Image().src=N.A,D=!0),D||(N.g=$a(N.j,null),N.g.ea(N.A)),N.F=Date.now(),Ai(N)}Dl(x)}function Is(x){x.g&&(xe(x),x.g.cancel(),x.g=null)}function Za(x){Is(x),x.v&&(p.clearTimeout(x.v),x.v=null),Vn(x),x.h.cancel(),x.m&&(typeof x.m=="number"&&p.clearTimeout(x.m),x.m=null)}function cs(x){if(!sa(x.h)&&!x.m){x.m=!0;var N=x.Ea;Re||z(),De||(Re(),De=!0),j.add(N,x),x.D=0}}function Ja(x,N){return Kt(x.h)>=x.h.j-(x.m?1:0)?!1:x.m?(x.i=N.G.concat(x.i),!0):x.I==1||x.I==2||x.D>=(x.Sa?0:x.Ta)?!1:(x.m=$r(E(x.Ea,x,N),Jo(x,x.D)),x.D++,!0)}n.Ea=function(x){if(this.m)if(this.m=null,this.I==1){if(!x){this.V=Math.floor(Math.random()*1e5),x=this.V++;const ce=new je(this,this.j,x);let Ee=this.o;if(this.U&&(Ee?(Ee=ie(Ee),Ue(Ee,this.U)):Ee=this.U),this.u!==null||this.R||(ce.J=Ee,Ee=null),this.S)e:{for(var N=0,D=0;D<this.i.length;D++){t:{var F=this.i[D];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break t}F=void 0}if(F===void 0)break;if(N+=F,N>4096){N=D;break e}if(N===4096||D===this.i.length-1){N=D+1;break e}}N=1e3}else N=1e3;N=ua(this,ce,N),D=Ge(this.J),tt(D,"RID",x),tt(D,"CVER",22),this.G&&tt(D,"X-HTTP-Session-Id",this.G),js(this,D),Ee&&(this.R?N="headers="+dr(hn(Ee))+"&"+N:this.u&&la(D,this.u,Ee)),aa(this.h,ce),this.Ra&&tt(D,"TYPE","init"),this.S?(tt(D,"$req",N),tt(D,"SID","null"),ce.U=!0,mr(ce,D,null)):mr(ce,D,N),this.I=2}}else this.I==3&&(x?$t(this,x):this.i.length==0||sa(this.h)||$t(this))};function $t(x,N){var D;N?D=N.l:D=x.V++;const F=Ge(x.J);tt(F,"SID",x.M),tt(F,"RID",D),tt(F,"AID",x.K),js(x,F),x.u&&x.o&&la(F,x.u,x.o),D=new je(x,x.j,D,x.D+1),x.u===null&&(D.J=x.o),N&&(x.i=N.G.concat(x.i)),N=ua(x,D,1e3),D.H=Math.round(x.va*.5)+Math.round(x.va*.5*Math.random()),aa(x.h,D),mr(D,F,N)}function js(x,N){x.H&&gt(x.H,function(D,F){tt(N,F,D)}),x.l&&gt({},function(D,F){tt(N,F,D)})}function ua(x,N,D){D=Math.min(x.i.length,D);const F=x.l?E(x.l.Ka,x.l,x):null;e:{var ce=x.i;let pt=-1;for(;;){const Fn=["count="+D];pt==-1?D>0?(pt=ce[0].g,Fn.push("ofs="+pt)):pt=0:Fn.push("ofs="+pt);let Qt=!0;for(let Cn=0;Cn<D;Cn++){var Ee=ce[Cn].g;const mi=ce[Cn].map;if(Ee-=pt,Ee<0)pt=Math.max(0,ce[Cn].g-100),Qt=!1;else try{Ee="req"+Ee+"_"||"";try{var Be=mi instanceof Map?mi:Object.entries(mi);for(const[ds,Mr]of Be){let pi=Mr;T(Mr)&&(pi=hr(Mr)),Fn.push(Ee+ds+"="+encodeURIComponent(pi))}}catch(ds){throw Fn.push(Ee+"type="+encodeURIComponent("_badmap")),ds}}catch{F&&F(mi)}}if(Qt){Be=Fn.join("&");break e}}Be=void 0}return x=x.i.splice(0,D),N.G=x,Be}function ji(x){if(!x.g&&!x.v){x.Y=1;var N=x.Da;Re||z(),De||(Re(),De=!0),j.add(N,x),x.A=0}}function ha(x){return x.g||x.v||x.A>=3?!1:(x.Y++,x.v=$r(E(x.Da,x),Jo(x,x.A)),x.A++,!0)}n.Da=function(){if(this.v=null,_t(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var x=4*this.T;this.j.info("BP detection timer enabled: "+x),this.B=$r(E(this.Wa,this),x)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,on(10),Is(this),_t(this))};function xe(x){x.B!=null&&(p.clearTimeout(x.B),x.B=null)}function _t(x){x.g=new je(x,x.j,"rpc",x.Y),x.u===null&&(x.g.J=x.o),x.g.P=0;var N=Ge(x.na);tt(N,"RID","rpc"),tt(N,"SID",x.M),tt(N,"AID",x.K),tt(N,"CI",x.F?"0":"1"),!x.F&&x.ia&&tt(N,"TO",x.ia),tt(N,"TYPE","xmlhttp"),js(x,N),x.u&&x.o&&la(N,x.u,x.o),x.O&&(x.g.H=x.O);var D=x.g;x=x.ba,D.M=1,D.A=Or(Ge(N)),D.u=null,D.R=!0,ki(D,x)}n.Va=function(){this.C!=null&&(this.C=null,Is(this),ha(this),on(19))};function Vn(x){x.C!=null&&(p.clearTimeout(x.C),x.C=null)}function fa(x,N){var D=null;if(x.g==N){Vn(x),xe(x),x.g=null;var F=2}else if(Sr(x.h,N))D=N.G,Mt(x.h,N),F=1;else return;if(x.I!=0){if(N.o)if(F==1){D=N.u?N.u.length:0,N=Date.now()-N.F;var ce=x.D;F=hi(),bn(F,new Jr(F,D)),cs(x)}else ji(x);else if(ce=N.m,ce==3||ce==0&&N.X>0||!(F==1&&Ja(x,N)||F==2&&ha(x)))switch(D&&D.length>0&&(N=x.h,N.i=N.i.concat(D)),ce){case 1:us(x,5);break;case 4:us(x,10);break;case 3:us(x,6);break;default:us(x,2)}}}function Jo(x,N){let D=x.Qa+Math.floor(Math.random()*x.Za);return x.isActive()||(D*=2),D*N}function us(x,N){if(x.j.info("Error code "+N),N==2){var D=E(x.bb,x),F=x.Ua;const ce=!F;F=new ze(F||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||Ze(F,"https"),Or(F),ce?ni(F.toString(),D):oa(F.toString(),D)}else on(2);x.I=0,x.l&&x.l.pa(N),Dl(x),Za(x)}n.bb=function(x){x?(this.j.info("Successfully pinged google.com"),on(2)):(this.j.info("Failed to ping google.com"),on(1))};function Dl(x){if(x.I=0,x.ja=[],x.l){const N=Dt(x.h);(N.length!=0||x.i.length!=0)&&(X(x.ja,N),X(x.ja,x.i),x.h.i.length=0,B(x.i),x.i.length=0),x.l.oa()}}function Ml(x,N,D){var F=D instanceof ze?Ge(D):new ze(D);if(F.g!="")N&&(F.g=N+"."+F.g),Gn(F,F.u);else{var ce=p.location;F=ce.protocol,N=N?N+"."+ce.hostname:ce.hostname,ce=+ce.port;const Ee=new ze(null);F&&Ze(Ee,F),N&&(Ee.g=N),ce&&Gn(Ee,ce),D&&(Ee.h=D),F=Ee}return D=x.G,N=x.wa,D&&N&&tt(F,D,N),tt(F,"VER",x.ka),js(x,F),F}function $a(x,N,D){if(N&&!x.L)throw Error("Can't create secondary domain capable XhrIo object.");return N=x.Aa&&!x.ma?new rn(new ri({ab:D})):new rn(x.ma),N.Fa(x.L),N}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function jn(){}n=jn.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function hs(){}hs.prototype.g=function(x,N){return new Pt(x,N)};function Pt(x,N){et.call(this),this.g=new Cs(N),this.l=x,this.h=N&&N.messageUrlParams||null,x=N&&N.messageHeaders||null,N&&N.clientProtocolHeaderRequired&&(x?x["X-Client-Protocol"]="webchannel":x={"X-Client-Protocol":"webchannel"}),this.g.o=x,x=N&&N.initMessageHeaders||null,N&&N.messageContentType&&(x?x["X-WebChannel-Content-Type"]=N.messageContentType:x={"X-WebChannel-Content-Type":N.messageContentType}),N&&N.sa&&(x?x["X-WebChannel-Client-Profile"]=N.sa:x={"X-WebChannel-Client-Profile":N.sa}),this.g.U=x,(x=N&&N.Qb)&&!W(x)&&(this.g.u=x),this.A=N&&N.supportsCrossDomainXhr||!1,this.v=N&&N.sendRawJson||!1,(N=N&&N.httpSessionIdParam)&&!W(N)&&(this.g.G=N,x=this.h,x!==null&&N in x&&(x=this.h,N in x&&delete x[N])),this.j=new Lt(this)}I(Pt,et),Pt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Pt.prototype.close=function(){Qa(this.g)},Pt.prototype.o=function(x){var N=this.g;if(typeof x=="string"){var D={};D.__data__=x,x=D}else this.v&&(D={},D.__data__=hr(x),x=D);N.i.push(new Rn(N.Ya++,x)),N.I==3&&cs(N)},Pt.prototype.N=function(){this.g.l=null,delete this.j,Qa(this.g),delete this.g,Pt.Z.N.call(this)};function da(x){Me.call(this),x.__headers__&&(this.headers=x.__headers__,this.statusCode=x.__status__,delete x.__headers__,delete x.__status__);var N=x.__sm__;if(N){e:{for(const D in N){x=D;break e}x=void 0}(this.i=x)&&(x=this.i,N=N!==null&&x in N?N[x]:void 0),this.data=N}else this.data=x}I(da,Me);function fs(){Xt.call(this),this.status=1}I(fs,Xt);function Lt(x){this.g=x}I(Lt,jn),Lt.prototype.ra=function(){bn(this.g,"a")},Lt.prototype.qa=function(x){bn(this.g,new da(x))},Lt.prototype.pa=function(x){bn(this.g,new fs)},Lt.prototype.oa=function(){bn(this.g,"b")},hs.prototype.createWebChannel=hs.prototype.g,Pt.prototype.send=Pt.prototype.o,Pt.prototype.open=Pt.prototype.m,Pt.prototype.close=Pt.prototype.close,PA=function(){return new hs},MA=function(){return hi()},DA=at,Pg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},os.NO_ERROR=0,os.TIMEOUT=8,os.HTTP_ERROR=6,Gf=os,ei.COMPLETE="complete",OA=ei,ra.EventType=Yt,Yt.OPEN="a",Yt.CLOSE="b",Yt.ERROR="c",Yt.MESSAGE="d",et.prototype.listen=et.prototype.J,Ou=ra,rn.prototype.listenOnce=rn.prototype.K,rn.prototype.getLastError=rn.prototype.Ha,rn.prototype.getLastErrorCode=rn.prototype.ya,rn.prototype.getStatus=rn.prototype.ca,rn.prototype.getResponseJson=rn.prototype.La,rn.prototype.getResponseText=rn.prototype.la,rn.prototype.send=rn.prototype.ea,rn.prototype.setWithCredentials=rn.prototype.Fa,RA=rn}).apply(typeof Nf<"u"?Nf:typeof self<"u"?self:typeof window<"u"?window:{});const nE="@firebase/firestore",rE="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}oi.UNAUTHENTICATED=new oi(null),oi.GOOGLE_CREDENTIALS=new oi("google-credentials-uid"),oi.FIRST_PARTY=new oi("first-party-uid"),oi.MOCK_USER=new oi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uc="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tl=new Em("@firebase/firestore");function lc(){return Tl.logLevel}function qe(n,...e){if(Tl.logLevel<=zt.DEBUG){const t=e.map(Am);Tl.debug(`Firestore (${Uc}): ${n}`,...t)}}function ja(n,...e){if(Tl.logLevel<=zt.ERROR){const t=e.map(Am);Tl.error(`Firestore (${Uc}): ${n}`,...t)}}function vc(n,...e){if(Tl.logLevel<=zt.WARN){const t=e.map(Am);Tl.warn(`Firestore (${Uc}): ${n}`,...t)}}function Am(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,LA(n,s,t)}function LA(n,e,t){let s=`FIRESTORE (${Uc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw ja(s),new Error(s)}function tn(n,e,t,s){let c="Unexpected state";typeof t=="string"?c=t:s=t,n||LA(e,c,s)}function xt(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class He extends Ya{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class q4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(oi.UNAUTHENTICATED)))}shutdown(){}}class Y4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class X4{constructor(e){this.t=e,this.currentUser=oi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){tn(this.o===void 0,42304);let s=this.i;const c=w=>this.i!==s?(s=this.i,t(w)):Promise.resolve();let h=new Xs;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Xs,e.enqueueRetryable((()=>c(this.currentUser)))};const p=()=>{const w=h;e.enqueueRetryable((async()=>{await w.promise,await c(this.currentUser)}))},T=w=>{qe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.o&&(this.auth.addAuthTokenListener(this.o),p())};this.t.onInit((w=>T(w))),setTimeout((()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?T(w):(qe("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Xs)}}),0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(qe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(tn(typeof s.accessToken=="string",31837,{l:s}),new kA(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return tn(e===null||typeof e=="string",2055,{h:e}),new oi(e)}}class W4{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=oi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class K4{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new W4(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(oi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class iE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Q4{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Qi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){tn(this.o===void 0,3512);const s=h=>{h.error!=null&&qe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const p=h.token!==this.m;return this.m=h.token,qe("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?t(h.token):Promise.resolve()};this.o=h=>{e.enqueueRetryable((()=>s(h)))};const c=h=>{qe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((h=>c(h))),setTimeout((()=>{if(!this.appCheck){const h=this.V.getImmediate({optional:!0});h?c(h):qe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new iE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(tn(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new iE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z4(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const c=Z4(40);for(let h=0;h<c.length;++h)s.length<20&&c[h]<t&&(s+=e.charAt(c[h]%62))}return s}}function Ht(n,e){return n<e?-1:n>e?1:0}function Lg(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const c=n.charAt(s),h=e.charAt(s);if(c!==h)return hg(c)===hg(h)?Ht(c,h):hg(c)?1:-1}return Ht(n.length,e.length)}const J4=55296,$4=57343;function hg(n){const e=n.charCodeAt(0);return e>=J4&&e<=$4}function Sc(n,e,t){return n.length===e.length&&n.every(((s,c)=>t(s,e[c])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE="__name__";class Ys{constructor(e,t,s){t===void 0?t=0:t>e.length&&ot(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&ot(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Ys.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ys?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let c=0;c<s;c++){const h=Ys.compareSegments(e.get(c),t.get(c));if(h!==0)return h}return Ht(e.length,t.length)}static compareSegments(e,t){const s=Ys.isNumericId(e),c=Ys.isNumericId(t);return s&&!c?-1:!s&&c?1:s&&c?Ys.extractNumericId(e).compare(Ys.extractNumericId(t)):Lg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Lo.fromString(e.substring(4,e.length-2))}}class wn extends Ys{construct(e,t,s){return new wn(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new He(ve.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((c=>c.length>0)))}return new wn(t)}static emptyPath(){return new wn([])}}const eR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qr extends Ys{construct(e,t,s){return new qr(e,t,s)}static isValidIdentifier(e){return eR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===sE}static keyField(){return new qr([sE])}static fromServerFormat(e){const t=[];let s="",c=0;const h=()=>{if(s.length===0)throw new He(ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let p=!1;for(;c<e.length;){const T=e[c];if(T==="\\"){if(c+1===e.length)throw new He(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[c+1];if(w!=="\\"&&w!=="."&&w!=="`")throw new He(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=w,c+=2}else T==="`"?(p=!p,c++):T!=="."||p?(s+=T,c++):(h(),c++)}if(h(),p)throw new He(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qr(t)}static emptyPath(){return new qr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.path=e}static fromPath(e){return new rt(wn.fromString(e))}static fromName(e){return new rt(wn.fromString(e).popFirst(5))}static empty(){return new rt(wn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&wn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return wn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new rt(new wn(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(n,e,t){if(!t)throw new He(ve.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function tR(n,e,t,s){if(e===!0&&s===!0)throw new He(ve.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function aE(n){if(!rt.isDocumentKey(n))throw new He(ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function oE(n){if(rt.isDocumentKey(n))throw new He(ve.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function UA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Ud(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ot(12329,{type:typeof n})}function Pi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new He(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ud(n);throw new He(ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function br(n,e){const t={typeString:n};return e&&(t.value=e),t}function oh(n,e){if(!UA(n))throw new He(ve.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const c=e[s].typeString,h="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const p=n[s];if(c&&typeof p!==c){t=`JSON field '${s}' must be a ${c}.`;break}if(h!==void 0&&p!==h.value){t=`Expected '${s}' field to equal '${h.value}'`;break}}if(t)throw new He(ve.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE=-62135596800,cE=1e6;class kn{static now(){return kn.fromMillis(Date.now())}static fromDate(e){return kn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*cE);return new kn(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new He(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new He(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<lE)throw new He(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new He(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/cE}_compareTo(e){return this.seconds===e.seconds?Ht(this.nanoseconds,e.nanoseconds):Ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:kn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(oh(e,kn._jsonSchema))return new kn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-lE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}kn._jsonSchemaVersion="firestore/timestamp/1.0",kn._jsonSchema={type:br("string",kn._jsonSchemaVersion),seconds:br("number"),nanoseconds:br("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{static fromTimestamp(e){return new ft(e)}static min(){return new ft(new kn(0,0))}static max(){return new ft(new kn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qu=-1;function nR(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,c=ft.fromTimestamp(s===1e9?new kn(t+1,0):new kn(t,s));return new Vo(c,rt.empty(),e)}function rR(n){return new Vo(n.readTime,n.key,Qu)}class Vo{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Vo(ft.min(),rt.empty(),Qu)}static max(){return new Vo(ft.max(),rt.empty(),Qu)}}function iR(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=rt.comparator(n.documentKey,e.documentKey),t!==0?t:Ht(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class aR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vc(n){if(n.code!==ve.FAILED_PRECONDITION||n.message!==sR)throw n;qe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ot(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ne(((s,c)=>{this.nextCallback=h=>{this.wrapSuccess(e,h).next(s,c)},this.catchCallback=h=>{this.wrapFailure(t,h).next(s,c)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Ne?t:Ne.resolve(t)}catch(t){return Ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Ne.reject(t)}static resolve(e){return new Ne(((t,s)=>{t(e)}))}static reject(e){return new Ne(((t,s)=>{s(e)}))}static waitFor(e){return new Ne(((t,s)=>{let c=0,h=0,p=!1;e.forEach((T=>{++c,T.next((()=>{++h,p&&h===c&&t()}),(w=>s(w)))})),p=!0,h===c&&t()}))}static or(e){let t=Ne.resolve(!1);for(const s of e)t=t.next((c=>c?Ne.resolve(c):s()));return t}static forEach(e,t){const s=[];return e.forEach(((c,h)=>{s.push(t.call(this,c,h))})),this.waitFor(s)}static mapArray(e,t){return new Ne(((s,c)=>{const h=e.length,p=new Array(h);let T=0;for(let w=0;w<h;w++){const E=w;t(e[E]).next((C=>{p[E]=C,++T,T===h&&s(p)}),(C=>c(C)))}}))}static doWhile(e,t){return new Ne(((s,c)=>{const h=()=>{e()===!0?t().next((()=>{h()}),c):s()};h()}))}}function oR(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function jc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Vd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm=-1;function lh(n){return n==null}function od(n){return n===0&&1/n==-1/0}function lR(n){return typeof n=="number"&&Number.isInteger(n)&&!od(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA="";function cR(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=uE(e)),e=uR(n.get(t),e);return uE(e)}function uR(n,e){let t=e;const s=n.length;for(let c=0;c<s;c++){const h=n.charAt(c);switch(h){case"\0":t+="";break;case VA:t+="";break;default:t+=h}}return t}function uE(n){return n+VA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function qo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function jA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,t){this.comparator=e,this.root=t||Gr.EMPTY}insert(e,t){return new Kn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Gr.BLACK,null,null))}remove(e){return new Kn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const c=this.comparator(e,s.key);if(c===0)return t+s.left.size;c<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rf(this.root,e,this.comparator,!0)}}class Rf{constructor(e,t,s,c){this.isReverse=c,this.nodeStack=[];let h=1;for(;!e.isEmpty();)if(h=t?s(e.key,t):1,t&&c&&(h*=-1),h<0)e=this.isReverse?e.left:e.right;else{if(h===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gr{constructor(e,t,s,c,h){this.key=e,this.value=t,this.color=s??Gr.RED,this.left=c??Gr.EMPTY,this.right=h??Gr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,c,h){return new Gr(e??this.key,t??this.value,s??this.color,c??this.left,h??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let c=this;const h=s(e,c.key);return c=h<0?c.copy(null,null,null,c.left.insert(e,t,s),null):h===0?c.copy(null,t,null,null,null):c.copy(null,null,null,null,c.right.insert(e,t,s)),c.fixUp()}removeMin(){if(this.left.isEmpty())return Gr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,c=this;if(t(e,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(e,t),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),t(e,c.key)===0){if(c.right.isEmpty())return Gr.EMPTY;s=c.right.min(),c=c.copy(s.key,s.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(e,t))}return c.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ot(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ot(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ot(27949);return e+(this.isRed()?0:1)}}Gr.EMPTY=null,Gr.RED=!0,Gr.BLACK=!1;Gr.EMPTY=new class{constructor(){this.size=0}get key(){throw ot(57766)}get value(){throw ot(16141)}get color(){throw ot(16727)}get left(){throw ot(29726)}get right(){throw ot(36894)}copy(e,t,s,c,h){return this}insert(e,t,s){return new Gr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this.comparator=e,this.data=new Kn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const c=s.getNext();if(this.comparator(c.key,e[1])>=0)return;t(c.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new fE(this.data.getIterator())}getIteratorFrom(e){return new fE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Nr)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const c=t.getNext().key,h=s.getNext().key;if(this.comparator(c,h)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Nr(this.comparator);return t.data=e,t}}class fE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e){this.fields=e,e.sort(qr.comparator)}static empty(){return new Ji([])}unionWith(e){let t=new Nr(qr.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Ji(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Sc(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(c){try{return atob(c)}catch(h){throw typeof DOMException<"u"&&h instanceof DOMException?new FA("Invalid base64 string: "+h):h}})(e);return new Yr(t)}static fromUint8Array(e){const t=(function(c){let h="";for(let p=0;p<c.length;++p)h+=String.fromCharCode(c[p]);return h})(e);return new Yr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let c=0;c<t.length;c++)s[c]=t.charCodeAt(c);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yr.EMPTY_BYTE_STRING=new Yr("");const hR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jo(n){if(tn(!!n,39018),typeof n=="string"){let e=0;const t=hR.exec(n);if(tn(!!t,46558,{timestamp:n}),t[1]){let c=t[1];c=(c+"000000000").substr(0,9),e=Number(c)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:cr(n.seconds),nanos:cr(n.nanos)}}function cr(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Fo(n){return typeof n=="string"?Yr.fromBase64String(n):Yr.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA="server_timestamp",HA="__type__",GA="__previous_value__",qA="__local_write_time__";function vm(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[HA])==null?void 0:s.stringValue)===zA}function jd(n){const e=n.mapValue.fields[GA];return vm(e)?jd(e):e}function Zu(n){const e=jo(n.mapValue.fields[qA].timestampValue);return new kn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e,t,s,c,h,p,T,w,E,C){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=c,this.ssl=h,this.forceLongPolling=p,this.autoDetectLongPolling=T,this.longPollingOptions=w,this.useFetchStreams=E,this.isUsingEmulator=C}}const ld="(default)";class Ju{constructor(e,t){this.projectId=e,this.database=t||ld}static empty(){return new Ju("","")}get isDefaultDatabase(){return this.database===ld}isEqual(e){return e instanceof Ju&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA="__type__",dR="__max__",Of={mapValue:{}},XA="__vector__",cd="value";function zo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?vm(n)?4:mR(n)?9007199254740991:gR(n)?10:11:ot(28295,{value:n})}function ta(n,e){if(n===e)return!0;const t=zo(n);if(t!==zo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Zu(n).isEqual(Zu(e));case 3:return(function(c,h){if(typeof c.timestampValue=="string"&&typeof h.timestampValue=="string"&&c.timestampValue.length===h.timestampValue.length)return c.timestampValue===h.timestampValue;const p=jo(c.timestampValue),T=jo(h.timestampValue);return p.seconds===T.seconds&&p.nanos===T.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(c,h){return Fo(c.bytesValue).isEqual(Fo(h.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(c,h){return cr(c.geoPointValue.latitude)===cr(h.geoPointValue.latitude)&&cr(c.geoPointValue.longitude)===cr(h.geoPointValue.longitude)})(n,e);case 2:return(function(c,h){if("integerValue"in c&&"integerValue"in h)return cr(c.integerValue)===cr(h.integerValue);if("doubleValue"in c&&"doubleValue"in h){const p=cr(c.doubleValue),T=cr(h.doubleValue);return p===T?od(p)===od(T):isNaN(p)&&isNaN(T)}return!1})(n,e);case 9:return Sc(n.arrayValue.values||[],e.arrayValue.values||[],ta);case 10:case 11:return(function(c,h){const p=c.mapValue.fields||{},T=h.mapValue.fields||{};if(hE(p)!==hE(T))return!1;for(const w in p)if(p.hasOwnProperty(w)&&(T[w]===void 0||!ta(p[w],T[w])))return!1;return!0})(n,e);default:return ot(52216,{left:n})}}function $u(n,e){return(n.values||[]).find((t=>ta(t,e)))!==void 0}function Cc(n,e){if(n===e)return 0;const t=zo(n),s=zo(e);if(t!==s)return Ht(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ht(n.booleanValue,e.booleanValue);case 2:return(function(h,p){const T=cr(h.integerValue||h.doubleValue),w=cr(p.integerValue||p.doubleValue);return T<w?-1:T>w?1:T===w?0:isNaN(T)?isNaN(w)?0:-1:1})(n,e);case 3:return dE(n.timestampValue,e.timestampValue);case 4:return dE(Zu(n),Zu(e));case 5:return Lg(n.stringValue,e.stringValue);case 6:return(function(h,p){const T=Fo(h),w=Fo(p);return T.compareTo(w)})(n.bytesValue,e.bytesValue);case 7:return(function(h,p){const T=h.split("/"),w=p.split("/");for(let E=0;E<T.length&&E<w.length;E++){const C=Ht(T[E],w[E]);if(C!==0)return C}return Ht(T.length,w.length)})(n.referenceValue,e.referenceValue);case 8:return(function(h,p){const T=Ht(cr(h.latitude),cr(p.latitude));return T!==0?T:Ht(cr(h.longitude),cr(p.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return gE(n.arrayValue,e.arrayValue);case 10:return(function(h,p){var M,B,X,$;const T=h.fields||{},w=p.fields||{},E=(M=T[cd])==null?void 0:M.arrayValue,C=(B=w[cd])==null?void 0:B.arrayValue,I=Ht(((X=E==null?void 0:E.values)==null?void 0:X.length)||0,(($=C==null?void 0:C.values)==null?void 0:$.length)||0);return I!==0?I:gE(E,C)})(n.mapValue,e.mapValue);case 11:return(function(h,p){if(h===Of.mapValue&&p===Of.mapValue)return 0;if(h===Of.mapValue)return 1;if(p===Of.mapValue)return-1;const T=h.fields||{},w=Object.keys(T),E=p.fields||{},C=Object.keys(E);w.sort(),C.sort();for(let I=0;I<w.length&&I<C.length;++I){const M=Lg(w[I],C[I]);if(M!==0)return M;const B=Cc(T[w[I]],E[C[I]]);if(B!==0)return B}return Ht(w.length,C.length)})(n.mapValue,e.mapValue);default:throw ot(23264,{he:t})}}function dE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ht(n,e);const t=jo(n),s=jo(e),c=Ht(t.seconds,s.seconds);return c!==0?c:Ht(t.nanos,s.nanos)}function gE(n,e){const t=n.values||[],s=e.values||[];for(let c=0;c<t.length&&c<s.length;++c){const h=Cc(t[c],s[c]);if(h)return h}return Ht(t.length,s.length)}function Ic(n){return kg(n)}function kg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=jo(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Fo(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return rt.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",c=!0;for(const h of t.values||[])c?c=!1:s+=",",s+=kg(h);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let c="{",h=!0;for(const p of s)h?h=!1:c+=",",c+=`${p}:${kg(t.fields[p])}`;return c+"}"})(n.mapValue):ot(61005,{value:n})}function qf(n){switch(zo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=jd(n);return e?16+qf(e):16;case 5:return 2*n.stringValue.length;case 6:return Fo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((c,h)=>c+qf(h)),0)})(n.arrayValue);case 10:case 11:return(function(s){let c=0;return qo(s.fields,((h,p)=>{c+=h.length+qf(p)})),c})(n.mapValue);default:throw ot(13486,{value:n})}}function mE(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Bg(n){return!!n&&"integerValue"in n}function Sm(n){return!!n&&"arrayValue"in n}function pE(n){return!!n&&"nullValue"in n}function xE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Yf(n){return!!n&&"mapValue"in n}function gR(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[YA])==null?void 0:s.stringValue)===XA}function Vu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return qo(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Vu(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Vu(n.arrayValue.values[t]);return e}return{...n}}function mR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===dR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e){this.value=e}static empty(){return new _i({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Yf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vu(t)}setAll(e){let t=qr.emptyPath(),s={},c=[];e.forEach(((p,T)=>{if(!t.isImmediateParentOf(T)){const w=this.getFieldsMap(t);this.applyChanges(w,s,c),s={},c=[],t=T.popLast()}p?s[T.lastSegment()]=Vu(p):c.push(T.lastSegment())}));const h=this.getFieldsMap(t);this.applyChanges(h,s,c)}delete(e){const t=this.field(e.popLast());Yf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ta(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let c=t.mapValue.fields[e.get(s)];Yf(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=c),t=c}return t.mapValue.fields}applyChanges(e,t,s){qo(t,((c,h)=>e[c]=h));for(const c of s)delete e[c]}clone(){return new _i(Vu(this.value))}}function WA(n){const e=[];return qo(n.fields,((t,s)=>{const c=new qr([t]);if(Yf(s)){const h=WA(s.mapValue).fields;if(h.length===0)e.push(c);else for(const p of h)e.push(c.child(p))}else e.push(c)})),new Ji(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e,t,s,c,h,p,T){this.key=e,this.documentType=t,this.version=s,this.readTime=c,this.createTime=h,this.data=p,this.documentState=T}static newInvalidDocument(e){return new kr(e,0,ft.min(),ft.min(),ft.min(),_i.empty(),0)}static newFoundDocument(e,t,s,c){return new kr(e,1,t,ft.min(),s,c,0)}static newNoDocument(e,t){return new kr(e,2,t,ft.min(),ft.min(),_i.empty(),0)}static newUnknownDocument(e,t){return new kr(e,3,t,ft.min(),ft.min(),_i.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ft.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_i.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_i.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ft.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof kr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new kr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,t){this.position=e,this.inclusive=t}}function yE(n,e,t){let s=0;for(let c=0;c<n.position.length;c++){const h=e[c],p=n.position[c];if(h.field.isKeyField()?s=rt.comparator(rt.fromName(p.referenceValue),t.key):s=Cc(p,t.data.field(h.field)),h.dir==="desc"&&(s*=-1),s!==0)break}return s}function EE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ta(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,t="asc"){this.field=e,this.dir=t}}function pR(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{}class Ar extends KA{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new yR(e,t,s):t==="array-contains"?new wR(e,s):t==="in"?new AR(e,s):t==="not-in"?new bR(e,s):t==="array-contains-any"?new TR(e,s):new Ar(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new ER(e,s):new _R(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Cc(t,this.value)):t!==null&&zo(this.value)===zo(t)&&this.matchesComparison(Cc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ot(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ms extends KA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ms(e,t)}matches(e){return QA(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function QA(n){return n.op==="and"}function ZA(n){return xR(n)&&QA(n)}function xR(n){for(const e of n.filters)if(e instanceof Ms)return!1;return!0}function Ug(n){if(n instanceof Ar)return n.field.canonicalString()+n.op.toString()+Ic(n.value);if(ZA(n))return n.filters.map((e=>Ug(e))).join(",");{const e=n.filters.map((t=>Ug(t))).join(",");return`${n.op}(${e})`}}function JA(n,e){return n instanceof Ar?(function(s,c){return c instanceof Ar&&s.op===c.op&&s.field.isEqual(c.field)&&ta(s.value,c.value)})(n,e):n instanceof Ms?(function(s,c){return c instanceof Ms&&s.op===c.op&&s.filters.length===c.filters.length?s.filters.reduce(((h,p,T)=>h&&JA(p,c.filters[T])),!0):!1})(n,e):void ot(19439)}function $A(n){return n instanceof Ar?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ic(t.value)}`})(n):n instanceof Ms?(function(t){return t.op.toString()+" {"+t.getFilters().map($A).join(" ,")+"}"})(n):"Filter"}class yR extends Ar{constructor(e,t,s){super(e,t,s),this.key=rt.fromName(s.referenceValue)}matches(e){const t=rt.comparator(e.key,this.key);return this.matchesComparison(t)}}class ER extends Ar{constructor(e,t){super(e,"in",t),this.keys=eb("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class _R extends Ar{constructor(e,t){super(e,"not-in",t),this.keys=eb("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function eb(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>rt.fromName(s.referenceValue)))}class wR extends Ar{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Sm(t)&&$u(t.arrayValue,this.value)}}class AR extends Ar{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&$u(this.value.arrayValue,t)}}class bR extends Ar{constructor(e,t){super(e,"not-in",t)}matches(e){if($u(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!$u(this.value.arrayValue,t)}}class TR extends Ar{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Sm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>$u(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e,t=null,s=[],c=[],h=null,p=null,T=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=c,this.limit=h,this.startAt=p,this.endAt=T,this.Te=null}}function _E(n,e=null,t=[],s=[],c=null,h=null,p=null){return new vR(n,e,t,s,c,h,p)}function Cm(n){const e=xt(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Ug(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(h){return h.field.canonicalString()+h.dir})(s))).join(","),lh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Ic(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Ic(s))).join(",")),e.Te=t}return e.Te}function Im(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!pR(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!JA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!EE(n.startAt,e.startAt)&&EE(n.endAt,e.endAt)}function Vg(n){return rt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,t=null,s=[],c=[],h=null,p="F",T=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=c,this.limit=h,this.limitType=p,this.startAt=T,this.endAt=w,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function SR(n,e,t,s,c,h,p,T){return new ch(n,e,t,s,c,h,p,T)}function Fd(n){return new ch(n)}function wE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function tb(n){return n.collectionGroup!==null}function ju(n){const e=xt(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const h of e.explicitOrderBy)e.Ie.push(h),t.add(h.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(p){let T=new Nr(qr.comparator);return p.filters.forEach((w=>{w.getFlattenedFilters().forEach((E=>{E.isInequality()&&(T=T.add(E.field))}))})),T})(e).forEach((h=>{t.has(h.canonicalString())||h.isKeyField()||e.Ie.push(new hd(h,s))})),t.has(qr.keyField().canonicalString())||e.Ie.push(new hd(qr.keyField(),s))}return e.Ie}function Ws(n){const e=xt(n);return e.Ee||(e.Ee=CR(e,ju(n))),e.Ee}function CR(n,e){if(n.limitType==="F")return _E(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((c=>{const h=c.dir==="desc"?"asc":"desc";return new hd(c.field,h)}));const t=n.endAt?new ud(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new ud(n.startAt.position,n.startAt.inclusive):null;return _E(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function jg(n,e){const t=n.filters.concat([e]);return new ch(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function fd(n,e,t){return new ch(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function zd(n,e){return Im(Ws(n),Ws(e))&&n.limitType===e.limitType}function nb(n){return`${Cm(Ws(n))}|lt:${n.limitType}`}function cc(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((c=>$A(c))).join(", ")}]`),lh(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((c=>(function(p){return`${p.field.canonicalString()} (${p.dir})`})(c))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((c=>Ic(c))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((c=>Ic(c))).join(",")),`Target(${s})`})(Ws(n))}; limitType=${n.limitType})`}function Hd(n,e){return e.isFoundDocument()&&(function(s,c){const h=c.key.path;return s.collectionGroup!==null?c.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(h):rt.isDocumentKey(s.path)?s.path.isEqual(h):s.path.isImmediateParentOf(h)})(n,e)&&(function(s,c){for(const h of ju(s))if(!h.field.isKeyField()&&c.data.field(h.field)===null)return!1;return!0})(n,e)&&(function(s,c){for(const h of s.filters)if(!h.matches(c))return!1;return!0})(n,e)&&(function(s,c){return!(s.startAt&&!(function(p,T,w){const E=yE(p,T,w);return p.inclusive?E<=0:E<0})(s.startAt,ju(s),c)||s.endAt&&!(function(p,T,w){const E=yE(p,T,w);return p.inclusive?E>=0:E>0})(s.endAt,ju(s),c))})(n,e)}function IR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function rb(n){return(e,t)=>{let s=!1;for(const c of ju(n)){const h=NR(c,e,t);if(h!==0)return h;s=s||c.field.isKeyField()}return 0}}function NR(n,e,t){const s=n.field.isKeyField()?rt.comparator(e.key,t.key):(function(h,p,T){const w=p.data.field(h),E=T.data.field(h);return w!==null&&E!==null?Cc(w,E):ot(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return ot(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[c,h]of s)if(this.equalsFn(c,e))return h}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),c=this.inner[s];if(c===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let h=0;h<c.length;h++)if(this.equalsFn(c[h][0],e))return void(c[h]=[e,t]);c.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let c=0;c<s.length;c++)if(this.equalsFn(s[c][0],e))return s.length===1?delete this.inner[t]:s.splice(c,1),this.innerSize--,!0;return!1}forEach(e){qo(this.inner,((t,s)=>{for(const[c,h]of s)e(c,h)}))}isEmpty(){return jA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR=new Kn(rt.comparator);function Fa(){return RR}const ib=new Kn(rt.comparator);function Du(...n){let e=ib;for(const t of n)e=e.insert(t.key,t);return e}function sb(n){let e=ib;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function _l(){return Fu()}function ab(){return Fu()}function Fu(){return new Nl((n=>n.toString()),((n,e)=>n.isEqual(e)))}const OR=new Kn(rt.comparator),DR=new Nr(rt.comparator);function Gt(...n){let e=DR;for(const t of n)e=e.add(t);return e}const MR=new Nr(Ht);function PR(){return MR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:od(e)?"-0":e}}function ob(n){return{integerValue:""+n}}function LR(n,e){return lR(e)?ob(e):Nm(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(){this._=void 0}}function kR(n,e,t){return n instanceof dd?(function(c,h){const p={fields:{[HA]:{stringValue:zA},[qA]:{timestampValue:{seconds:c.seconds,nanos:c.nanoseconds}}}};return h&&vm(h)&&(h=jd(h)),h&&(p.fields[GA]=h),{mapValue:p}})(t,e):n instanceof eh?cb(n,e):n instanceof th?ub(n,e):(function(c,h){const p=lb(c,h),T=AE(p)+AE(c.Ae);return Bg(p)&&Bg(c.Ae)?ob(T):Nm(c.serializer,T)})(n,e)}function BR(n,e,t){return n instanceof eh?cb(n,e):n instanceof th?ub(n,e):t}function lb(n,e){return n instanceof gd?(function(s){return Bg(s)||(function(h){return!!h&&"doubleValue"in h})(s)})(e)?e:{integerValue:0}:null}class dd extends Gd{}class eh extends Gd{constructor(e){super(),this.elements=e}}function cb(n,e){const t=hb(e);for(const s of n.elements)t.some((c=>ta(c,s)))||t.push(s);return{arrayValue:{values:t}}}class th extends Gd{constructor(e){super(),this.elements=e}}function ub(n,e){let t=hb(e);for(const s of n.elements)t=t.filter((c=>!ta(c,s)));return{arrayValue:{values:t}}}class gd extends Gd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function AE(n){return cr(n.integerValue||n.doubleValue)}function hb(n){return Sm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function UR(n,e){return n.field.isEqual(e.field)&&(function(s,c){return s instanceof eh&&c instanceof eh||s instanceof th&&c instanceof th?Sc(s.elements,c.elements,ta):s instanceof gd&&c instanceof gd?ta(s.Ae,c.Ae):s instanceof dd&&c instanceof dd})(n.transform,e.transform)}class VR{constructor(e,t){this.version=e,this.transformResults=t}}class li{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new li}static exists(e){return new li(void 0,e)}static updateTime(e){return new li(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class qd{}function fb(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Yd(n.key,li.none()):new uh(n.key,n.data,li.none());{const t=n.data,s=_i.empty();let c=new Nr(qr.comparator);for(let h of e.fields)if(!c.has(h)){let p=t.field(h);p===null&&h.length>1&&(h=h.popLast(),p=t.field(h)),p===null?s.delete(h):s.set(h,p),c=c.add(h)}return new Yo(n.key,s,new Ji(c.toArray()),li.none())}}function jR(n,e,t){n instanceof uh?(function(c,h,p){const T=c.value.clone(),w=TE(c.fieldTransforms,h,p.transformResults);T.setAll(w),h.convertToFoundDocument(p.version,T).setHasCommittedMutations()})(n,e,t):n instanceof Yo?(function(c,h,p){if(!Xf(c.precondition,h))return void h.convertToUnknownDocument(p.version);const T=TE(c.fieldTransforms,h,p.transformResults),w=h.data;w.setAll(db(c)),w.setAll(T),h.convertToFoundDocument(p.version,w).setHasCommittedMutations()})(n,e,t):(function(c,h,p){h.convertToNoDocument(p.version).setHasCommittedMutations()})(0,e,t)}function zu(n,e,t,s){return n instanceof uh?(function(h,p,T,w){if(!Xf(h.precondition,p))return T;const E=h.value.clone(),C=vE(h.fieldTransforms,w,p);return E.setAll(C),p.convertToFoundDocument(p.version,E).setHasLocalMutations(),null})(n,e,t,s):n instanceof Yo?(function(h,p,T,w){if(!Xf(h.precondition,p))return T;const E=vE(h.fieldTransforms,w,p),C=p.data;return C.setAll(db(h)),C.setAll(E),p.convertToFoundDocument(p.version,C).setHasLocalMutations(),T===null?null:T.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map((I=>I.field)))})(n,e,t,s):(function(h,p,T){return Xf(h.precondition,p)?(p.convertToNoDocument(p.version).setHasLocalMutations(),null):T})(n,e,t)}function FR(n,e){let t=null;for(const s of n.fieldTransforms){const c=e.data.field(s.field),h=lb(s.transform,c||null);h!=null&&(t===null&&(t=_i.empty()),t.set(s.field,h))}return t||null}function bE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,c){return s===void 0&&c===void 0||!(!s||!c)&&Sc(s,c,((h,p)=>UR(h,p)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class uh extends qd{constructor(e,t,s,c=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=c,this.type=0}getFieldMask(){return null}}class Yo extends qd{constructor(e,t,s,c,h=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=c,this.fieldTransforms=h,this.type=1}getFieldMask(){return this.fieldMask}}function db(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function TE(n,e,t){const s=new Map;tn(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let c=0;c<t.length;c++){const h=n[c],p=h.transform,T=e.data.field(h.field);s.set(h.field,BR(p,T,t[c]))}return s}function vE(n,e,t){const s=new Map;for(const c of n){const h=c.transform,p=t.data.field(c.field);s.set(c.field,kR(h,p,e))}return s}class Yd extends qd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gb extends qd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,t,s,c){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=c}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let c=0;c<this.mutations.length;c++){const h=this.mutations[c];h.key.isEqual(e.key)&&jR(h,e,s[c])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=zu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=zu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=ab();return this.mutations.forEach((c=>{const h=e.get(c.key),p=h.overlayedDocument;let T=this.applyToLocalView(p,h.mutatedFields);T=t.has(c.key)?null:T;const w=fb(p,T);w!==null&&s.set(c.key,w),p.isValidDocument()||p.convertToNoDocument(ft.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Gt())}isEqual(e){return this.batchId===e.batchId&&Sc(this.mutations,e.mutations,((t,s)=>bE(t,s)))&&Sc(this.baseMutations,e.baseMutations,((t,s)=>bE(t,s)))}}class Rm{constructor(e,t,s,c){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=c}static from(e,t,s){tn(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let c=(function(){return OR})();const h=e.mutations;for(let p=0;p<h.length;p++)c=c.insert(h[p].key,s[p].version);return new Rm(e,t,s,c)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wr,en;function mb(n){switch(n){case ve.OK:return ot(64938);case ve.CANCELLED:case ve.UNKNOWN:case ve.DEADLINE_EXCEEDED:case ve.RESOURCE_EXHAUSTED:case ve.INTERNAL:case ve.UNAVAILABLE:case ve.UNAUTHENTICATED:return!1;case ve.INVALID_ARGUMENT:case ve.NOT_FOUND:case ve.ALREADY_EXISTS:case ve.PERMISSION_DENIED:case ve.FAILED_PRECONDITION:case ve.ABORTED:case ve.OUT_OF_RANGE:case ve.UNIMPLEMENTED:case ve.DATA_LOSS:return!0;default:return ot(15467,{code:n})}}function pb(n){if(n===void 0)return ja("GRPC error has no .code"),ve.UNKNOWN;switch(n){case wr.OK:return ve.OK;case wr.CANCELLED:return ve.CANCELLED;case wr.UNKNOWN:return ve.UNKNOWN;case wr.DEADLINE_EXCEEDED:return ve.DEADLINE_EXCEEDED;case wr.RESOURCE_EXHAUSTED:return ve.RESOURCE_EXHAUSTED;case wr.INTERNAL:return ve.INTERNAL;case wr.UNAVAILABLE:return ve.UNAVAILABLE;case wr.UNAUTHENTICATED:return ve.UNAUTHENTICATED;case wr.INVALID_ARGUMENT:return ve.INVALID_ARGUMENT;case wr.NOT_FOUND:return ve.NOT_FOUND;case wr.ALREADY_EXISTS:return ve.ALREADY_EXISTS;case wr.PERMISSION_DENIED:return ve.PERMISSION_DENIED;case wr.FAILED_PRECONDITION:return ve.FAILED_PRECONDITION;case wr.ABORTED:return ve.ABORTED;case wr.OUT_OF_RANGE:return ve.OUT_OF_RANGE;case wr.UNIMPLEMENTED:return ve.UNIMPLEMENTED;case wr.DATA_LOSS:return ve.DATA_LOSS;default:return ot(39323,{code:n})}}(en=wr||(wr={}))[en.OK=0]="OK",en[en.CANCELLED=1]="CANCELLED",en[en.UNKNOWN=2]="UNKNOWN",en[en.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",en[en.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",en[en.NOT_FOUND=5]="NOT_FOUND",en[en.ALREADY_EXISTS=6]="ALREADY_EXISTS",en[en.PERMISSION_DENIED=7]="PERMISSION_DENIED",en[en.UNAUTHENTICATED=16]="UNAUTHENTICATED",en[en.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",en[en.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",en[en.ABORTED=10]="ABORTED",en[en.OUT_OF_RANGE=11]="OUT_OF_RANGE",en[en.UNIMPLEMENTED=12]="UNIMPLEMENTED",en[en.INTERNAL=13]="INTERNAL",en[en.UNAVAILABLE=14]="UNAVAILABLE",en[en.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR=new Lo([4294967295,4294967295],0);function SE(n){const e=qR().encode(n),t=new NA;return t.update(e),new Uint8Array(t.digest())}function CE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),c=e.getUint32(8,!0),h=e.getUint32(12,!0);return[new Lo([t,s],0),new Lo([c,h],0)]}class Om{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Mu(`Invalid padding: ${t}`);if(s<0)throw new Mu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Mu(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Mu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Lo.fromNumber(this.ge)}ye(e,t,s){let c=e.add(t.multiply(Lo.fromNumber(s)));return c.compare(YR)===1&&(c=new Lo([c.getBits(0),c.getBits(1)],0)),c.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=SE(e),[s,c]=CE(t);for(let h=0;h<this.hashCount;h++){const p=this.ye(s,c,h);if(!this.we(p))return!1}return!0}static create(e,t,s){const c=e%8==0?0:8-e%8,h=new Uint8Array(Math.ceil(e/8)),p=new Om(h,c,t);return s.forEach((T=>p.insert(T))),p}insert(e){if(this.ge===0)return;const t=SE(e),[s,c]=CE(t);for(let h=0;h<this.hashCount;h++){const p=this.ye(s,c,h);this.Se(p)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Mu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,t,s,c,h){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=c,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const c=new Map;return c.set(e,hh.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Xd(ft.min(),c,new Kn(Ht),Fa(),Gt())}}class hh{constructor(e,t,s,c,h){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=c,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new hh(s,t,Gt(),Gt(),Gt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,t,s,c){this.be=e,this.removedTargetIds=t,this.key=s,this.De=c}}class xb{constructor(e,t){this.targetId=e,this.Ce=t}}class yb{constructor(e,t,s=Yr.EMPTY_BYTE_STRING,c=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=c}}class IE{constructor(){this.ve=0,this.Fe=NE(),this.Me=Yr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Gt(),t=Gt(),s=Gt();return this.Fe.forEach(((c,h)=>{switch(h){case 0:e=e.add(c);break;case 2:t=t.add(c);break;case 1:s=s.add(c);break;default:ot(38017,{changeType:h})}})),new hh(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=NE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,tn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class XR{constructor(e){this.Ge=e,this.ze=new Map,this.je=Fa(),this.Je=Df(),this.He=Df(),this.Ye=new Kn(Ht)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:ot(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,c)=>{this.rt(c)&&t(c)}))}st(e){const t=e.targetId,s=e.Ce.count,c=this.ot(t);if(c){const h=c.target;if(Vg(h))if(s===0){const p=new rt(h.path);this.et(t,p,kr.newNoDocument(p,ft.min()))}else tn(s===1,20013,{expectedCount:s});else{const p=this._t(t);if(p!==s){const T=this.ut(e),w=T?this.ct(T,e,p):1;if(w!==0){this.it(t);const E=w===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,E)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:c=0},hashCount:h=0}=t;let p,T;try{p=Fo(s).toUint8Array()}catch(w){if(w instanceof FA)return vc("Decoding the base64 bloom filter in existence filter failed ("+w.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw w}try{T=new Om(p,c,h)}catch(w){return vc(w instanceof Mu?"BloomFilter error: ":"Applying bloom filter failed: ",w),null}return T.ge===0?null:T}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let c=0;return s.forEach((h=>{const p=this.Ge.ht(),T=`projects/${p.projectId}/databases/${p.database}/documents/${h.path.canonicalString()}`;e.mightContain(T)||(this.et(t,h,null),c++)})),c}Tt(e){const t=new Map;this.ze.forEach(((h,p)=>{const T=this.ot(p);if(T){if(h.current&&Vg(T.target)){const w=new rt(T.target.path);this.It(w).has(p)||this.Et(p,w)||this.et(p,w,kr.newNoDocument(w,e))}h.Be&&(t.set(p,h.ke()),h.qe())}}));let s=Gt();this.He.forEach(((h,p)=>{let T=!0;p.forEachWhile((w=>{const E=this.ot(w);return!E||E.purpose==="TargetPurposeLimboResolution"||(T=!1,!1)})),T&&(s=s.add(h))})),this.je.forEach(((h,p)=>p.setReadTime(e)));const c=new Xd(e,t,this.Ye,this.je,s);return this.je=Fa(),this.Je=Df(),this.He=Df(),this.Ye=new Kn(Ht),c}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const c=this.nt(e);this.Et(e,t)?c.Qe(t,1):c.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new IE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Nr(Ht),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Nr(Ht),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||qe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new IE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Df(){return new Kn(rt.comparator)}function NE(){return new Kn(rt.comparator)}const WR={asc:"ASCENDING",desc:"DESCENDING"},KR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},QR={and:"AND",or:"OR"};class ZR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Fg(n,e){return n.useProto3Json||lh(e)?e:{value:e}}function md(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Eb(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function JR(n,e){return md(n,e.toTimestamp())}function $i(n){return tn(!!n,49232),ft.fromTimestamp((function(t){const s=jo(t);return new kn(s.seconds,s.nanos)})(n))}function Dm(n,e){return zg(n,e).canonicalString()}function zg(n,e){const t=(function(c){return new wn(["projects",c.projectId,"databases",c.database])})(n).child("documents");return e===void 0?t:t.child(e)}function _b(n){const e=wn.fromString(n);return tn(Sb(e),10190,{key:e.toString()}),e}function pd(n,e){return Dm(n.databaseId,e.path)}function Hu(n,e){const t=_b(e);if(t.get(1)!==n.databaseId.projectId)throw new He(ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new He(ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new rt(Ab(t))}function wb(n,e){return Dm(n.databaseId,e)}function $R(n){const e=_b(n);return e.length===4?wn.emptyPath():Ab(e)}function Hg(n){return new wn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Ab(n){return tn(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function RE(n,e,t){return{name:pd(n,e),fields:t.value.mapValue.fields}}function e6(n,e){return"found"in e?(function(s,c){tn(!!c.found,43571),c.found.name,c.found.updateTime;const h=Hu(s,c.found.name),p=$i(c.found.updateTime),T=c.found.createTime?$i(c.found.createTime):ft.min(),w=new _i({mapValue:{fields:c.found.fields}});return kr.newFoundDocument(h,p,T,w)})(n,e):"missing"in e?(function(s,c){tn(!!c.missing,3894),tn(!!c.readTime,22933);const h=Hu(s,c.missing),p=$i(c.readTime);return kr.newNoDocument(h,p)})(n,e):ot(7234,{result:e})}function t6(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(E){return E==="NO_CHANGE"?0:E==="ADD"?1:E==="REMOVE"?2:E==="CURRENT"?3:E==="RESET"?4:ot(39313,{state:E})})(e.targetChange.targetChangeType||"NO_CHANGE"),c=e.targetChange.targetIds||[],h=(function(E,C){return E.useProto3Json?(tn(C===void 0||typeof C=="string",58123),Yr.fromBase64String(C||"")):(tn(C===void 0||C instanceof Buffer||C instanceof Uint8Array,16193),Yr.fromUint8Array(C||new Uint8Array))})(n,e.targetChange.resumeToken),p=e.targetChange.cause,T=p&&(function(E){const C=E.code===void 0?ve.UNKNOWN:pb(E.code);return new He(C,E.message||"")})(p);t=new yb(s,c,h,T||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const c=Hu(n,s.document.name),h=$i(s.document.updateTime),p=s.document.createTime?$i(s.document.createTime):ft.min(),T=new _i({mapValue:{fields:s.document.fields}}),w=kr.newFoundDocument(c,h,p,T),E=s.targetIds||[],C=s.removedTargetIds||[];t=new Wf(E,C,w.key,w)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const c=Hu(n,s.document),h=s.readTime?$i(s.readTime):ft.min(),p=kr.newNoDocument(c,h),T=s.removedTargetIds||[];t=new Wf([],T,p.key,p)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const c=Hu(n,s.document),h=s.removedTargetIds||[];t=new Wf([],h,c,null)}else{if(!("filter"in e))return ot(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:c=0,unchangedNames:h}=s,p=new GR(c,h),T=s.targetId;t=new xb(T,p)}}return t}function bb(n,e){let t;if(e instanceof uh)t={update:RE(n,e.key,e.value)};else if(e instanceof Yd)t={delete:pd(n,e.key)};else if(e instanceof Yo)t={update:RE(n,e.key,e.data),updateMask:u6(e.fieldMask)};else{if(!(e instanceof gb))return ot(16599,{Vt:e.type});t={verify:pd(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(h,p){const T=p.transform;if(T instanceof dd)return{fieldPath:p.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(T instanceof eh)return{fieldPath:p.field.canonicalString(),appendMissingElements:{values:T.elements}};if(T instanceof th)return{fieldPath:p.field.canonicalString(),removeAllFromArray:{values:T.elements}};if(T instanceof gd)return{fieldPath:p.field.canonicalString(),increment:T.Ae};throw ot(20930,{transform:p.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(c,h){return h.updateTime!==void 0?{updateTime:JR(c,h.updateTime)}:h.exists!==void 0?{exists:h.exists}:ot(27497)})(n,e.precondition)),t}function n6(n,e){return n&&n.length>0?(tn(e!==void 0,14353),n.map((t=>(function(c,h){let p=c.updateTime?$i(c.updateTime):$i(h);return p.isEqual(ft.min())&&(p=$i(h)),new VR(p,c.transformResults||[])})(t,e)))):[]}function r6(n,e){return{documents:[wb(n,e.path)]}}function i6(n,e){const t={structuredQuery:{}},s=e.path;let c;e.collectionGroup!==null?(c=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(c=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=wb(n,c);const h=(function(E){if(E.length!==0)return vb(Ms.create(E,"and"))})(e.filters);h&&(t.structuredQuery.where=h);const p=(function(E){if(E.length!==0)return E.map((C=>(function(M){return{field:uc(M.field),direction:o6(M.dir)}})(C)))})(e.orderBy);p&&(t.structuredQuery.orderBy=p);const T=Fg(n,e.limit);return T!==null&&(t.structuredQuery.limit=T),e.startAt&&(t.structuredQuery.startAt=(function(E){return{before:E.inclusive,values:E.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(E){return{before:!E.inclusive,values:E.position}})(e.endAt)),{ft:t,parent:c}}function s6(n){let e=$R(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let c=null;if(s>0){tn(s===1,65062);const C=t.from[0];C.allDescendants?c=C.collectionId:e=e.child(C.collectionId)}let h=[];t.where&&(h=(function(I){const M=Tb(I);return M instanceof Ms&&ZA(M)?M.getFilters():[M]})(t.where));let p=[];t.orderBy&&(p=(function(I){return I.map((M=>(function(X){return new hd(hc(X.field),(function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(X.direction))})(M)))})(t.orderBy));let T=null;t.limit&&(T=(function(I){let M;return M=typeof I=="object"?I.value:I,lh(M)?null:M})(t.limit));let w=null;t.startAt&&(w=(function(I){const M=!!I.before,B=I.values||[];return new ud(B,M)})(t.startAt));let E=null;return t.endAt&&(E=(function(I){const M=!I.before,B=I.values||[];return new ud(B,M)})(t.endAt)),SR(e,c,p,h,T,"F",w,E)}function a6(n,e){const t=(function(c){switch(c){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ot(28987,{purpose:c})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Tb(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=hc(t.unaryFilter.field);return Ar.create(s,"==",{doubleValue:NaN});case"IS_NULL":const c=hc(t.unaryFilter.field);return Ar.create(c,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const h=hc(t.unaryFilter.field);return Ar.create(h,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const p=hc(t.unaryFilter.field);return Ar.create(p,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ot(61313);default:return ot(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ar.create(hc(t.fieldFilter.field),(function(c){switch(c){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ot(58110);default:return ot(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ms.create(t.compositeFilter.filters.map((s=>Tb(s))),(function(c){switch(c){case"AND":return"and";case"OR":return"or";default:return ot(1026)}})(t.compositeFilter.op))})(n):ot(30097,{filter:n})}function o6(n){return WR[n]}function l6(n){return KR[n]}function c6(n){return QR[n]}function uc(n){return{fieldPath:n.canonicalString()}}function hc(n){return qr.fromServerFormat(n.fieldPath)}function vb(n){return n instanceof Ar?(function(t){if(t.op==="=="){if(xE(t.value))return{unaryFilter:{field:uc(t.field),op:"IS_NAN"}};if(pE(t.value))return{unaryFilter:{field:uc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(xE(t.value))return{unaryFilter:{field:uc(t.field),op:"IS_NOT_NAN"}};if(pE(t.value))return{unaryFilter:{field:uc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:uc(t.field),op:l6(t.op),value:t.value}}})(n):n instanceof Ms?(function(t){const s=t.getFilters().map((c=>vb(c)));return s.length===1?s[0]:{compositeFilter:{op:c6(t.op),filters:s}}})(n):ot(54877,{filter:n})}function u6(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Sb(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,t,s,c,h=ft.min(),p=ft.min(),T=Yr.EMPTY_BYTE_STRING,w=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=c,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=T,this.expectedCount=w}withSequenceNumber(e){return new Ro(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ro(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ro(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ro(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h6{constructor(e){this.yt=e}}function f6(n){const e=s6({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?fd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(){this.Cn=new g6}addToCollectionParentIndex(e,t){return this.Cn.add(t),Ne.resolve()}getCollectionParents(e,t){return Ne.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Ne.resolve()}deleteFieldIndex(e,t){return Ne.resolve()}deleteAllFieldIndexes(e){return Ne.resolve()}createTargetIndexes(e,t){return Ne.resolve()}getDocumentsMatchingTarget(e,t){return Ne.resolve(null)}getIndexType(e,t){return Ne.resolve(0)}getFieldIndexes(e,t){return Ne.resolve([])}getNextCollectionGroupToUpdate(e){return Ne.resolve(null)}getMinOffset(e,t){return Ne.resolve(Vo.min())}getMinOffsetFromCollectionGroup(e,t){return Ne.resolve(Vo.min())}updateCollectionGroup(e,t,s){return Ne.resolve()}updateIndexEntries(e,t){return Ne.resolve()}}class g6{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),c=this.index[t]||new Nr(wn.comparator),h=!c.has(s);return this.index[t]=c.add(s),h}has(e){const t=e.lastSegment(),s=e.popLast(),c=this.index[t];return c&&c.has(s)}getEntries(e){return(this.index[e]||new Nr(wn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Cb=41943040;class Mi{static withCacheSize(e){return new Mi(e,Mi.DEFAULT_COLLECTION_PERCENTILE,Mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mi.DEFAULT_COLLECTION_PERCENTILE=10,Mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mi.DEFAULT=new Mi(Cb,Mi.DEFAULT_COLLECTION_PERCENTILE,Mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mi.DISABLED=new Mi(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Nc(0)}static cr(){return new Nc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE="LruGarbageCollector",m6=1048576;function ME([n,e],[t,s]){const c=Ht(n,t);return c===0?Ht(e,s):c}class p6{constructor(e){this.Ir=e,this.buffer=new Nr(ME),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();ME(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class x6{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){qe(DE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){jc(t)?qe(DE,"Ignoring IndexedDB error during garbage collection: ",t):await Vc(t)}await this.Vr(3e5)}))}}class y6{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return Ne.resolve(Vd.ce);const s=new p6(t);return this.mr.forEachTarget(e,(c=>s.Ar(c.sequenceNumber))).next((()=>this.mr.pr(e,(c=>s.Ar(c))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(qe("LruGarbageCollector","Garbage collection skipped; disabled"),Ne.resolve(OE)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(qe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),OE):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,c,h,p,T,w,E;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((I=>(I>this.params.maximumSequenceNumbersToCollect?(qe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),c=this.params.maximumSequenceNumbersToCollect):c=I,p=Date.now(),this.nthSequenceNumber(e,c)))).next((I=>(s=I,T=Date.now(),this.removeTargets(e,s,t)))).next((I=>(h=I,w=Date.now(),this.removeOrphanedDocuments(e,s)))).next((I=>(E=Date.now(),lc()<=zt.DEBUG&&qe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${p-C}ms
	Determined least recently used ${c} in `+(T-p)+`ms
	Removed ${h} targets in `+(w-T)+`ms
	Removed ${I} documents in `+(E-w)+`ms
Total Duration: ${E-C}ms`),Ne.resolve({didRun:!0,sequenceNumbersCollected:c,targetsRemoved:h,documentsRemoved:I}))))}}function E6(n,e){return new y6(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6{constructor(){this.changes=new Nl((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,kr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?Ne.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(e,t,s,c){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=c}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((c=>(s=c,this.remoteDocumentCache.getEntry(e,t)))).next((c=>(s!==null&&zu(s.mutation,c,Ji.empty(),kn.now()),c)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Gt()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Gt()){const c=_l();return this.populateOverlays(e,c,t).next((()=>this.computeViews(e,t,c,s).next((h=>{let p=Du();return h.forEach(((T,w)=>{p=p.insert(T,w.overlayedDocument)})),p}))))}getOverlayedDocuments(e,t){const s=_l();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Gt())))}populateOverlays(e,t,s){const c=[];return s.forEach((h=>{t.has(h)||c.push(h)})),this.documentOverlayCache.getOverlays(e,c).next((h=>{h.forEach(((p,T)=>{t.set(p,T)}))}))}computeViews(e,t,s,c){let h=Fa();const p=Fu(),T=(function(){return Fu()})();return t.forEach(((w,E)=>{const C=s.get(E.key);c.has(E.key)&&(C===void 0||C.mutation instanceof Yo)?h=h.insert(E.key,E):C!==void 0?(p.set(E.key,C.mutation.getFieldMask()),zu(C.mutation,E,C.mutation.getFieldMask(),kn.now())):p.set(E.key,Ji.empty())})),this.recalculateAndSaveOverlays(e,h).next((w=>(w.forEach(((E,C)=>p.set(E,C))),t.forEach(((E,C)=>T.set(E,new w6(C,p.get(E)??null)))),T)))}recalculateAndSaveOverlays(e,t){const s=Fu();let c=new Kn(((p,T)=>p-T)),h=Gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((p=>{for(const T of p)T.keys().forEach((w=>{const E=t.get(w);if(E===null)return;let C=s.get(w)||Ji.empty();C=T.applyToLocalView(E,C),s.set(w,C);const I=(c.get(T.batchId)||Gt()).add(w);c=c.insert(T.batchId,I)}))})).next((()=>{const p=[],T=c.getReverseIterator();for(;T.hasNext();){const w=T.getNext(),E=w.key,C=w.value,I=ab();C.forEach((M=>{if(!h.has(M)){const B=fb(t.get(M),s.get(M));B!==null&&I.set(M,B),h=h.add(M)}})),p.push(this.documentOverlayCache.saveOverlays(e,E,I))}return Ne.waitFor(p)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,c){return(function(p){return rt.isDocumentKey(p.path)&&p.collectionGroup===null&&p.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):tb(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,c):this.getDocumentsMatchingCollectionQuery(e,t,s,c)}getNextDocuments(e,t,s,c){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,c).next((h=>{const p=c-h.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,c-h.size):Ne.resolve(_l());let T=Qu,w=h;return p.next((E=>Ne.forEach(E,((C,I)=>(T<I.largestBatchId&&(T=I.largestBatchId),h.get(C)?Ne.resolve():this.remoteDocumentCache.getEntry(e,C).next((M=>{w=w.insert(C,M)}))))).next((()=>this.populateOverlays(e,E,h))).next((()=>this.computeViews(e,w,E,Gt()))).next((C=>({batchId:T,changes:sb(C)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new rt(t)).next((s=>{let c=Du();return s.isFoundDocument()&&(c=c.insert(s.key,s)),c}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,c){const h=t.collectionGroup;let p=Du();return this.indexManager.getCollectionParents(e,h).next((T=>Ne.forEach(T,(w=>{const E=(function(I,M){return new ch(M,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)})(t,w.child(h));return this.getDocumentsMatchingCollectionQuery(e,E,s,c).next((C=>{C.forEach(((I,M)=>{p=p.insert(I,M)}))}))})).next((()=>p))))}getDocumentsMatchingCollectionQuery(e,t,s,c){let h;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((p=>(h=p,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,h,c)))).next((p=>{h.forEach(((w,E)=>{const C=E.getKey();p.get(C)===null&&(p=p.insert(C,kr.newInvalidDocument(C)))}));let T=Du();return p.forEach(((w,E)=>{const C=h.get(w);C!==void 0&&zu(C.mutation,E,Ji.empty(),kn.now()),Hd(t,E)&&(T=T.insert(w,E))})),T}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Ne.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(c){return{id:c.id,version:c.version,createTime:$i(c.createTime)}})(t)),Ne.resolve()}getNamedQuery(e,t){return Ne.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(c){return{name:c.name,query:f6(c.bundledQuery),readTime:$i(c.readTime)}})(t)),Ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(){this.overlays=new Kn(rt.comparator),this.qr=new Map}getOverlay(e,t){return Ne.resolve(this.overlays.get(t))}getOverlays(e,t){const s=_l();return Ne.forEach(t,(c=>this.getOverlay(e,c).next((h=>{h!==null&&s.set(c,h)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((c,h)=>{this.St(e,t,h)})),Ne.resolve()}removeOverlaysForBatchId(e,t,s){const c=this.qr.get(s);return c!==void 0&&(c.forEach((h=>this.overlays=this.overlays.remove(h))),this.qr.delete(s)),Ne.resolve()}getOverlaysForCollection(e,t,s){const c=_l(),h=t.length+1,p=new rt(t.child("")),T=this.overlays.getIteratorFrom(p);for(;T.hasNext();){const w=T.getNext().value,E=w.getKey();if(!t.isPrefixOf(E.path))break;E.path.length===h&&w.largestBatchId>s&&c.set(w.getKey(),w)}return Ne.resolve(c)}getOverlaysForCollectionGroup(e,t,s,c){let h=new Kn(((E,C)=>E-C));const p=this.overlays.getIterator();for(;p.hasNext();){const E=p.getNext().value;if(E.getKey().getCollectionGroup()===t&&E.largestBatchId>s){let C=h.get(E.largestBatchId);C===null&&(C=_l(),h=h.insert(E.largestBatchId,C)),C.set(E.getKey(),E)}}const T=_l(),w=h.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach(((E,C)=>T.set(E,C))),!(T.size()>=c)););return Ne.resolve(T)}St(e,t,s){const c=this.overlays.get(s.key);if(c!==null){const p=this.qr.get(c.largestBatchId).delete(s.key);this.qr.set(c.largestBatchId,p)}this.overlays=this.overlays.insert(s.key,new HR(t,s));let h=this.qr.get(t);h===void 0&&(h=Gt(),this.qr.set(t,h)),this.qr.set(t,h.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(){this.sessionToken=Yr.EMPTY_BYTE_STRING}getSessionToken(e){return Ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(){this.Qr=new Nr(Lr.$r),this.Ur=new Nr(Lr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Lr(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Lr(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new rt(new wn([])),s=new Lr(t,e),c=new Lr(t,e+1),h=[];return this.Ur.forEachInRange([s,c],(p=>{this.Gr(p),h.push(p.key)})),h}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new rt(new wn([])),s=new Lr(t,e),c=new Lr(t,e+1);let h=Gt();return this.Ur.forEachInRange([s,c],(p=>{h=h.add(p.key)})),h}containsKey(e){const t=new Lr(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Lr{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return rt.comparator(e.key,t.key)||Ht(e.Yr,t.Yr)}static Kr(e,t){return Ht(e.Yr,t.Yr)||rt.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S6{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Nr(Lr.$r)}checkEmpty(e){return Ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,c){const h=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const p=new zR(h,t,s,c);this.mutationQueue.push(p);for(const T of c)this.Zr=this.Zr.add(new Lr(T.key,h)),this.indexManager.addToCollectionParentIndex(e,T.key.path.popLast());return Ne.resolve(p)}lookupMutationBatch(e,t){return Ne.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,c=this.ei(s),h=c<0?0:c;return Ne.resolve(this.mutationQueue.length>h?this.mutationQueue[h]:null)}getHighestUnacknowledgedBatchId(){return Ne.resolve(this.mutationQueue.length===0?Tm:this.tr-1)}getAllMutationBatches(e){return Ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Lr(t,0),c=new Lr(t,Number.POSITIVE_INFINITY),h=[];return this.Zr.forEachInRange([s,c],(p=>{const T=this.Xr(p.Yr);h.push(T)})),Ne.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Nr(Ht);return t.forEach((c=>{const h=new Lr(c,0),p=new Lr(c,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([h,p],(T=>{s=s.add(T.Yr)}))})),Ne.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,c=s.length+1;let h=s;rt.isDocumentKey(h)||(h=h.child(""));const p=new Lr(new rt(h),0);let T=new Nr(Ht);return this.Zr.forEachWhile((w=>{const E=w.key.path;return!!s.isPrefixOf(E)&&(E.length===c&&(T=T.add(w.Yr)),!0)}),p),Ne.resolve(this.ti(T))}ti(e){const t=[];return e.forEach((s=>{const c=this.Xr(s);c!==null&&t.push(c)})),t}removeMutationBatch(e,t){tn(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return Ne.forEach(t.mutations,(c=>{const h=new Lr(c.key,t.batchId);return s=s.delete(h),this.referenceDelegate.markPotentiallyOrphaned(e,c.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Lr(t,0),c=this.Zr.firstAfterOrEqual(s);return Ne.resolve(t.isEqual(c&&c.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ne.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(e){this.ri=e,this.docs=(function(){return new Kn(rt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,c=this.docs.get(s),h=c?c.size:0,p=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:p}),this.size+=p-h,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Ne.resolve(s?s.document.mutableCopy():kr.newInvalidDocument(t))}getEntries(e,t){let s=Fa();return t.forEach((c=>{const h=this.docs.get(c);s=s.insert(c,h?h.document.mutableCopy():kr.newInvalidDocument(c))})),Ne.resolve(s)}getDocumentsMatchingQuery(e,t,s,c){let h=Fa();const p=t.path,T=new rt(p.child("__id-9223372036854775808__")),w=this.docs.getIteratorFrom(T);for(;w.hasNext();){const{key:E,value:{document:C}}=w.getNext();if(!p.isPrefixOf(E.path))break;E.path.length>p.length+1||iR(rR(C),s)<=0||(c.has(C.key)||Hd(t,C))&&(h=h.insert(C.key,C.mutableCopy()))}return Ne.resolve(h)}getAllFromCollectionGroup(e,t,s,c){ot(9500)}ii(e,t){return Ne.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new I6(this)}getSize(e){return Ne.resolve(this.size)}}class I6 extends _6{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,c)=>{c.isValidDocument()?t.push(this.Nr.addEntry(e,c)):this.Nr.removeEntry(s)})),Ne.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N6{constructor(e){this.persistence=e,this.si=new Nl((t=>Cm(t)),Im),this.lastRemoteSnapshotVersion=ft.min(),this.highestTargetId=0,this.oi=0,this._i=new Mm,this.targetCount=0,this.ai=Nc.ur()}forEachTarget(e,t){return this.si.forEach(((s,c)=>t(c))),Ne.resolve()}getLastRemoteSnapshotVersion(e){return Ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ne.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),Ne.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Nc(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Ne.resolve()}updateTargetData(e,t){return this.Pr(t),Ne.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Ne.resolve()}removeTargets(e,t,s){let c=0;const h=[];return this.si.forEach(((p,T)=>{T.sequenceNumber<=t&&s.get(T.targetId)===null&&(this.si.delete(p),h.push(this.removeMatchingKeysForTargetId(e,T.targetId)),c++)})),Ne.waitFor(h).next((()=>c))}getTargetCount(e){return Ne.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return Ne.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),Ne.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const c=this.persistence.referenceDelegate,h=[];return c&&t.forEach((p=>{h.push(c.markPotentiallyOrphaned(e,p))})),Ne.waitFor(h)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Ne.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return Ne.resolve(s)}containsKey(e,t){return Ne.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(e,t){this.ui={},this.overlays={},this.ci=new Vd(0),this.li=!1,this.li=!0,this.hi=new v6,this.referenceDelegate=e(this),this.Pi=new N6(this),this.indexManager=new d6,this.remoteDocumentCache=(function(c){return new C6(c)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new h6(t),this.Ii=new b6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new T6,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new S6(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){qe("MemoryPersistence","Starting transaction:",e);const c=new R6(this.ci.next());return this.referenceDelegate.Ei(),s(c).next((h=>this.referenceDelegate.di(c).next((()=>h)))).toPromise().then((h=>(c.raiseOnCommittedEvent(),h)))}Ai(e,t){return Ne.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class R6 extends aR{constructor(e){super(),this.currentSequenceNumber=e}}class Pm{constructor(e){this.persistence=e,this.Ri=new Mm,this.Vi=null}static mi(e){return new Pm(e)}get fi(){if(this.Vi)return this.Vi;throw ot(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),Ne.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),Ne.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Ne.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((c=>this.fi.add(c.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((c=>{c.forEach((h=>this.fi.add(h.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ne.forEach(this.fi,(s=>{const c=rt.fromPath(s);return this.gi(e,c).next((h=>{h||t.removeEntry(c,ft.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return Ne.or([()=>Ne.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class xd{constructor(e,t){this.persistence=e,this.pi=new Nl((s=>cR(s.path)),((s,c)=>s.isEqual(c))),this.garbageCollector=E6(this,t)}static mi(e,t){return new xd(e,t)}Ei(){}di(e){return Ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((c=>s+c))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return Ne.forEach(this.pi,((s,c)=>this.br(e,s,c).next((h=>h?Ne.resolve():t(c)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const c=this.persistence.getRemoteDocumentCache(),h=c.newChangeBuffer();return c.ii(e,(p=>this.br(e,p,t).next((T=>{T||(s++,h.removeEntry(p,ft.min()))})))).next((()=>h.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Ne.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),Ne.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),Ne.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Ne.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=qf(e.data.value)),t}br(e,t,s){return Ne.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const c=this.pi.get(t);return Ne.resolve(c!==void 0&&c>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e,t,s,c){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=c}static As(e,t){let s=Gt(),c=Gt();for(const h of t.docChanges)switch(h.type){case 0:s=s.add(h.doc.key);break;case 1:c=c.add(h.doc.key)}return new Lm(e,t.fromCache,s,c)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return CN()?8:oR(ci())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,c){const h={result:null};return this.ys(e,t).next((p=>{h.result=p})).next((()=>{if(!h.result)return this.ws(e,t,c,s).next((p=>{h.result=p}))})).next((()=>{if(h.result)return;const p=new O6;return this.Ss(e,t,p).next((T=>{if(h.result=T,this.Vs)return this.bs(e,t,p,T.size)}))})).next((()=>h.result))}bs(e,t,s,c){return s.documentReadCount<this.fs?(lc()<=zt.DEBUG&&qe("QueryEngine","SDK will not create cache indexes for query:",cc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ne.resolve()):(lc()<=zt.DEBUG&&qe("QueryEngine","Query:",cc(t),"scans",s.documentReadCount,"local documents and returns",c,"documents as results."),s.documentReadCount>this.gs*c?(lc()<=zt.DEBUG&&qe("QueryEngine","The SDK decides to create cache indexes for query:",cc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ws(t))):Ne.resolve())}ys(e,t){if(wE(t))return Ne.resolve(null);let s=Ws(t);return this.indexManager.getIndexType(e,s).next((c=>c===0?null:(t.limit!==null&&c===1&&(t=fd(t,null,"F"),s=Ws(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((h=>{const p=Gt(...h);return this.ps.getDocuments(e,p).next((T=>this.indexManager.getMinOffset(e,s).next((w=>{const E=this.Ds(t,T);return this.Cs(t,E,p,w.readTime)?this.ys(e,fd(t,null,"F")):this.vs(e,E,t,w)}))))})))))}ws(e,t,s,c){return wE(t)||c.isEqual(ft.min())?Ne.resolve(null):this.ps.getDocuments(e,s).next((h=>{const p=this.Ds(t,h);return this.Cs(t,p,s,c)?Ne.resolve(null):(lc()<=zt.DEBUG&&qe("QueryEngine","Re-using previous result from %s to execute query: %s",c.toString(),cc(t)),this.vs(e,p,t,nR(c,Qu)).next((T=>T)))}))}Ds(e,t){let s=new Nr(rb(e));return t.forEach(((c,h)=>{Hd(e,h)&&(s=s.add(h))})),s}Cs(e,t,s,c){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const h=e.limitType==="F"?t.last():t.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(c)>0)}Ss(e,t,s){return lc()<=zt.DEBUG&&qe("QueryEngine","Using full collection scan to execute query:",cc(t)),this.ps.getDocumentsMatchingQuery(e,t,Vo.min(),s)}vs(e,t,s,c){return this.ps.getDocumentsMatchingQuery(e,s,c).next((h=>(t.forEach((p=>{h=h.insert(p.key,p)})),h)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const km="LocalStore",M6=3e8;class P6{constructor(e,t,s,c){this.persistence=e,this.Fs=t,this.serializer=c,this.Ms=new Kn(Ht),this.xs=new Nl((h=>Cm(h)),Im),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new A6(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function L6(n,e,t,s){return new P6(n,e,t,s)}async function Nb(n,e){const t=xt(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let c;return t.mutationQueue.getAllMutationBatches(s).next((h=>(c=h,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((h=>{const p=[],T=[];let w=Gt();for(const E of c){p.push(E.batchId);for(const C of E.mutations)w=w.add(C.key)}for(const E of h){T.push(E.batchId);for(const C of E.mutations)w=w.add(C.key)}return t.localDocuments.getDocuments(s,w).next((E=>({Ls:E,removedBatchIds:p,addedBatchIds:T})))}))}))}function k6(n,e){const t=xt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const c=e.batch.keys(),h=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(T,w,E,C){const I=E.batch,M=I.keys();let B=Ne.resolve();return M.forEach((X=>{B=B.next((()=>C.getEntry(w,X))).next(($=>{const q=E.docVersions.get(X);tn(q!==null,48541),$.version.compareTo(q)<0&&(I.applyToRemoteDocument($,E),$.isValidDocument()&&($.setReadTime(E.commitVersion),C.addEntry($)))}))})),B.next((()=>T.mutationQueue.removeMutationBatch(w,I)))})(t,s,e,h).next((()=>h.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,c,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(T){let w=Gt();for(let E=0;E<T.mutationResults.length;++E)T.mutationResults[E].transformResults.length>0&&(w=w.add(T.batch.mutations[E].key));return w})(e)))).next((()=>t.localDocuments.getDocuments(s,c)))}))}function Rb(n){const e=xt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function B6(n,e){const t=xt(n),s=e.snapshotVersion;let c=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(h=>{const p=t.Ns.newChangeBuffer({trackRemovals:!0});c=t.Ms;const T=[];e.targetChanges.forEach(((C,I)=>{const M=c.get(I);if(!M)return;T.push(t.Pi.removeMatchingKeys(h,C.removedDocuments,I).next((()=>t.Pi.addMatchingKeys(h,C.addedDocuments,I))));let B=M.withSequenceNumber(h.currentSequenceNumber);e.targetMismatches.get(I)!==null?B=B.withResumeToken(Yr.EMPTY_BYTE_STRING,ft.min()).withLastLimboFreeSnapshotVersion(ft.min()):C.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(C.resumeToken,s)),c=c.insert(I,B),(function($,q,_e){return $.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=M6?!0:_e.addedDocuments.size+_e.modifiedDocuments.size+_e.removedDocuments.size>0})(M,B,C)&&T.push(t.Pi.updateTargetData(h,B))}));let w=Fa(),E=Gt();if(e.documentUpdates.forEach((C=>{e.resolvedLimboDocuments.has(C)&&T.push(t.persistence.referenceDelegate.updateLimboDocument(h,C))})),T.push(U6(h,p,e.documentUpdates).next((C=>{w=C.ks,E=C.qs}))),!s.isEqual(ft.min())){const C=t.Pi.getLastRemoteSnapshotVersion(h).next((I=>t.Pi.setTargetsMetadata(h,h.currentSequenceNumber,s)));T.push(C)}return Ne.waitFor(T).next((()=>p.apply(h))).next((()=>t.localDocuments.getLocalViewOfDocuments(h,w,E))).next((()=>w))})).then((h=>(t.Ms=c,h)))}function U6(n,e,t){let s=Gt(),c=Gt();return t.forEach((h=>s=s.add(h))),e.getEntries(n,s).next((h=>{let p=Fa();return t.forEach(((T,w)=>{const E=h.get(T);w.isFoundDocument()!==E.isFoundDocument()&&(c=c.add(T)),w.isNoDocument()&&w.version.isEqual(ft.min())?(e.removeEntry(T,w.readTime),p=p.insert(T,w)):!E.isValidDocument()||w.version.compareTo(E.version)>0||w.version.compareTo(E.version)===0&&E.hasPendingWrites?(e.addEntry(w),p=p.insert(T,w)):qe(km,"Ignoring outdated watch update for ",T,". Current version:",E.version," Watch version:",w.version)})),{ks:p,qs:c}}))}function V6(n,e){const t=xt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Tm),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function j6(n,e){const t=xt(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let c;return t.Pi.getTargetData(s,e).next((h=>h?(c=h,Ne.resolve(c)):t.Pi.allocateTargetId(s).next((p=>(c=new Ro(e,p,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,c).next((()=>c)))))))})).then((s=>{const c=t.Ms.get(s.targetId);return(c===null||s.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function Gg(n,e,t){const s=xt(n),c=s.Ms.get(e),h=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",h,(p=>s.persistence.referenceDelegate.removeTarget(p,c)))}catch(p){if(!jc(p))throw p;qe(km,`Failed to update sequence numbers for target ${e}: ${p}`)}s.Ms=s.Ms.remove(e),s.xs.delete(c.target)}function PE(n,e,t){const s=xt(n);let c=ft.min(),h=Gt();return s.persistence.runTransaction("Execute query","readwrite",(p=>(function(w,E,C){const I=xt(w),M=I.xs.get(C);return M!==void 0?Ne.resolve(I.Ms.get(M)):I.Pi.getTargetData(E,C)})(s,p,Ws(e)).next((T=>{if(T)return c=T.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(p,T.targetId).next((w=>{h=w}))})).next((()=>s.Fs.getDocumentsMatchingQuery(p,e,t?c:ft.min(),t?h:Gt()))).next((T=>(F6(s,IR(e),T),{documents:T,Qs:h})))))}function F6(n,e,t){let s=n.Os.get(e)||ft.min();t.forEach(((c,h)=>{h.readTime.compareTo(s)>0&&(s=h.readTime)})),n.Os.set(e,s)}class LE{constructor(){this.activeTargetIds=PR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class z6{constructor(){this.Mo=new LE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new LE,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H6{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE="ConnectivityMonitor";class BE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){qe(kE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){qe(kE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mf=null;function qg(){return Mf===null?Mf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Mf++,"0x"+Mf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg="RestConnection",G6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class q6{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${c}`,this.Wo=this.databaseId.database===ld?`project_id=${s}`:`project_id=${s}&database_id=${c}`}Go(e,t,s,c,h){const p=qg(),T=this.zo(e,t.toUriEncodedString());qe(fg,`Sending RPC '${e}' ${p}:`,T,s);const w={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(w,c,h);const{host:E}=new URL(T),C=kc(E);return this.Jo(e,T,w,s,C).then((I=>(qe(fg,`Received RPC '${e}' ${p}: `,I),I)),(I=>{throw vc(fg,`RPC '${e}' ${p} failed with error: `,I,"url: ",T,"request:",s),I}))}Ho(e,t,s,c,h,p){return this.Go(e,t,s,c,h)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Uc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((c,h)=>e[h]=c)),s&&s.headers.forEach(((c,h)=>e[h]=c))}zo(e,t){const s=G6[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai="WebChannelConnection";class X6 extends q6{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,c,h){const p=qg();return new Promise(((T,w)=>{const E=new RA;E.setWithCredentials(!0),E.listenOnce(OA.COMPLETE,(()=>{try{switch(E.getLastErrorCode()){case Gf.NO_ERROR:const I=E.getResponseJson();qe(ai,`XHR for RPC '${e}' ${p} received:`,JSON.stringify(I)),T(I);break;case Gf.TIMEOUT:qe(ai,`RPC '${e}' ${p} timed out`),w(new He(ve.DEADLINE_EXCEEDED,"Request time out"));break;case Gf.HTTP_ERROR:const M=E.getStatus();if(qe(ai,`RPC '${e}' ${p} failed with status:`,M,"response text:",E.getResponseText()),M>0){let B=E.getResponseJson();Array.isArray(B)&&(B=B[0]);const X=B==null?void 0:B.error;if(X&&X.status&&X.message){const $=(function(_e){const ae=_e.toLowerCase().replace(/_/g,"-");return Object.values(ve).indexOf(ae)>=0?ae:ve.UNKNOWN})(X.status);w(new He($,X.message))}else w(new He(ve.UNKNOWN,"Server responded with status "+E.getStatus()))}else w(new He(ve.UNAVAILABLE,"Connection failed."));break;default:ot(9055,{l_:e,streamId:p,h_:E.getLastErrorCode(),P_:E.getLastError()})}}finally{qe(ai,`RPC '${e}' ${p} completed.`)}}));const C=JSON.stringify(c);qe(ai,`RPC '${e}' ${p} sending request:`,c),E.send(t,"POST",C,s,15)}))}T_(e,t,s){const c=qg(),h=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],p=PA(),T=MA(),w={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},E=this.longPollingOptions.timeoutSeconds;E!==void 0&&(w.longPollingTimeout=Math.round(1e3*E)),this.useFetchStreams&&(w.useFetchStreams=!0),this.jo(w.initMessageHeaders,t,s),w.encodeInitMessageHeaders=!0;const C=h.join("");qe(ai,`Creating RPC '${e}' stream ${c}: ${C}`,w);const I=p.createWebChannel(C,w);this.I_(I);let M=!1,B=!1;const X=new Y6({Yo:q=>{B?qe(ai,`Not sending because RPC '${e}' stream ${c} is closed:`,q):(M||(qe(ai,`Opening RPC '${e}' stream ${c} transport.`),I.open(),M=!0),qe(ai,`RPC '${e}' stream ${c} sending:`,q),I.send(q))},Zo:()=>I.close()}),$=(q,_e,ae)=>{q.listen(_e,(K=>{try{ae(K)}catch(le){setTimeout((()=>{throw le}),0)}}))};return $(I,Ou.EventType.OPEN,(()=>{B||(qe(ai,`RPC '${e}' stream ${c} transport opened.`),X.o_())})),$(I,Ou.EventType.CLOSE,(()=>{B||(B=!0,qe(ai,`RPC '${e}' stream ${c} transport closed`),X.a_(),this.E_(I))})),$(I,Ou.EventType.ERROR,(q=>{B||(B=!0,vc(ai,`RPC '${e}' stream ${c} transport errored. Name:`,q.name,"Message:",q.message),X.a_(new He(ve.UNAVAILABLE,"The operation could not be completed")))})),$(I,Ou.EventType.MESSAGE,(q=>{var _e;if(!B){const ae=q.data[0];tn(!!ae,16349);const K=ae,le=(K==null?void 0:K.error)||((_e=K[0])==null?void 0:_e.error);if(le){qe(ai,`RPC '${e}' stream ${c} received error:`,le);const Re=le.status;let De=(function(V){const Y=wr[V];if(Y!==void 0)return pb(Y)})(Re),j=le.message;De===void 0&&(De=ve.INTERNAL,j="Unknown error status: "+Re+" with message "+le.message),B=!0,X.a_(new He(De,j)),I.close()}else qe(ai,`RPC '${e}' stream ${c} received:`,ae),X.u_(ae)}})),$(T,DA.STAT_EVENT,(q=>{q.stat===Pg.PROXY?qe(ai,`RPC '${e}' stream ${c} detected buffering proxy`):q.stat===Pg.NOPROXY&&qe(ai,`RPC '${e}' stream ${c} detected no buffering proxy`)})),setTimeout((()=>{X.__()}),0),X}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function dg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wd(n){return new ZR(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e,t,s=1e3,c=1.5,h=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=c,this.R_=h,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),c=Math.max(0,t-s);c>0&&qe("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,c,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE="PersistentStream";class Ob{constructor(e,t,s,c,h,p,T,w){this.Mi=e,this.S_=s,this.b_=c,this.connection=h,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=T,this.listener=w,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Bm(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ve.RESOURCE_EXHAUSTED?(ja(t.toString()),ja("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ve.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,c])=>{this.D_===t&&this.G_(s,c)}),(s=>{e((()=>{const c=new He(ve.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(c)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((c=>{s((()=>this.z_(c)))})),this.stream.onMessage((c=>{s((()=>++this.F_==1?this.J_(c):this.onNext(c)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return qe(UE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(qe(UE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class W6 extends Ob{constructor(e,t,s,c,h,p){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,c,p),this.serializer=h}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=t6(this.serializer,e),s=(function(h){if(!("targetChange"in h))return ft.min();const p=h.targetChange;return p.targetIds&&p.targetIds.length?ft.min():p.readTime?$i(p.readTime):ft.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Hg(this.serializer),t.addTarget=(function(h,p){let T;const w=p.target;if(T=Vg(w)?{documents:r6(h,w)}:{query:i6(h,w).ft},T.targetId=p.targetId,p.resumeToken.approximateByteSize()>0){T.resumeToken=Eb(h,p.resumeToken);const E=Fg(h,p.expectedCount);E!==null&&(T.expectedCount=E)}else if(p.snapshotVersion.compareTo(ft.min())>0){T.readTime=md(h,p.snapshotVersion.toTimestamp());const E=Fg(h,p.expectedCount);E!==null&&(T.expectedCount=E)}return T})(this.serializer,e);const s=a6(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Hg(this.serializer),t.removeTarget=e,this.q_(t)}}class K6 extends Ob{constructor(e,t,s,c,h,p){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,c,p),this.serializer=h}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return tn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,tn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){tn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=n6(e.writeResults,e.commitTime),s=$i(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Hg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>bb(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{}class Z6 extends Q6{constructor(e,t,s,c){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=c,this.ia=!1}sa(){if(this.ia)throw new He(ve.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,p])=>this.connection.Go(e,zg(t,s),c,h,p))).catch((h=>{throw h.name==="FirebaseError"?(h.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new He(ve.UNKNOWN,h.toString())}))}Ho(e,t,s,c,h){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([p,T])=>this.connection.Ho(e,zg(t,s),c,p,T,h))).catch((p=>{throw p.name==="FirebaseError"?(p.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new He(ve.UNKNOWN,p.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class J6{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ja(t),this.aa=!1):qe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vl="RemoteStore";class $6{constructor(e,t,s,c,h){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=h,this.Aa.Oo((p=>{s.enqueueAndForget((async()=>{Rl(this)&&(qe(vl,"Restarting streams for network reachability change."),await(async function(w){const E=xt(w);E.Ea.add(4),await fh(E),E.Ra.set("Unknown"),E.Ea.delete(4),await Kd(E)})(this))}))})),this.Ra=new J6(s,c)}}async function Kd(n){if(Rl(n))for(const e of n.da)await e(!0)}async function fh(n){for(const e of n.da)await e(!1)}function Db(n,e){const t=xt(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Fm(t)?jm(t):Fc(t).O_()&&Vm(t,e))}function Um(n,e){const t=xt(n),s=Fc(t);t.Ia.delete(e),s.O_()&&Mb(t,e),t.Ia.size===0&&(s.O_()?s.L_():Rl(t)&&t.Ra.set("Unknown"))}function Vm(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ft.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Fc(n).Y_(e)}function Mb(n,e){n.Va.Ue(e),Fc(n).Z_(e)}function jm(n){n.Va=new XR({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Fc(n).start(),n.Ra.ua()}function Fm(n){return Rl(n)&&!Fc(n).x_()&&n.Ia.size>0}function Rl(n){return xt(n).Ea.size===0}function Pb(n){n.Va=void 0}async function e8(n){n.Ra.set("Online")}async function t8(n){n.Ia.forEach(((e,t)=>{Vm(n,e)}))}async function n8(n,e){Pb(n),Fm(n)?(n.Ra.ha(e),jm(n)):n.Ra.set("Unknown")}async function r8(n,e,t){if(n.Ra.set("Online"),e instanceof yb&&e.state===2&&e.cause)try{await(async function(c,h){const p=h.cause;for(const T of h.targetIds)c.Ia.has(T)&&(await c.remoteSyncer.rejectListen(T,p),c.Ia.delete(T),c.Va.removeTarget(T))})(n,e)}catch(s){qe(vl,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await yd(n,s)}else if(e instanceof Wf?n.Va.Ze(e):e instanceof xb?n.Va.st(e):n.Va.tt(e),!t.isEqual(ft.min()))try{const s=await Rb(n.localStore);t.compareTo(s)>=0&&await(function(h,p){const T=h.Va.Tt(p);return T.targetChanges.forEach(((w,E)=>{if(w.resumeToken.approximateByteSize()>0){const C=h.Ia.get(E);C&&h.Ia.set(E,C.withResumeToken(w.resumeToken,p))}})),T.targetMismatches.forEach(((w,E)=>{const C=h.Ia.get(w);if(!C)return;h.Ia.set(w,C.withResumeToken(Yr.EMPTY_BYTE_STRING,C.snapshotVersion)),Mb(h,w);const I=new Ro(C.target,w,E,C.sequenceNumber);Vm(h,I)})),h.remoteSyncer.applyRemoteEvent(T)})(n,t)}catch(s){qe(vl,"Failed to raise snapshot:",s),await yd(n,s)}}async function yd(n,e,t){if(!jc(e))throw e;n.Ea.add(1),await fh(n),n.Ra.set("Offline"),t||(t=()=>Rb(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{qe(vl,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Kd(n)}))}function Lb(n,e){return e().catch((t=>yd(n,t,e)))}async function Qd(n){const e=xt(n),t=Ho(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Tm;for(;i8(e);)try{const c=await V6(e.localStore,s);if(c===null){e.Ta.length===0&&t.L_();break}s=c.batchId,s8(e,c)}catch(c){await yd(e,c)}kb(e)&&Bb(e)}function i8(n){return Rl(n)&&n.Ta.length<10}function s8(n,e){n.Ta.push(e);const t=Ho(n);t.O_()&&t.X_&&t.ea(e.mutations)}function kb(n){return Rl(n)&&!Ho(n).x_()&&n.Ta.length>0}function Bb(n){Ho(n).start()}async function a8(n){Ho(n).ra()}async function o8(n){const e=Ho(n);for(const t of n.Ta)e.ea(t.mutations)}async function l8(n,e,t){const s=n.Ta.shift(),c=Rm.from(s,e,t);await Lb(n,(()=>n.remoteSyncer.applySuccessfulWrite(c))),await Qd(n)}async function c8(n,e){e&&Ho(n).X_&&await(async function(s,c){if((function(p){return mb(p)&&p!==ve.ABORTED})(c.code)){const h=s.Ta.shift();Ho(s).B_(),await Lb(s,(()=>s.remoteSyncer.rejectFailedWrite(h.batchId,c))),await Qd(s)}})(n,e),kb(n)&&Bb(n)}async function VE(n,e){const t=xt(n);t.asyncQueue.verifyOperationInProgress(),qe(vl,"RemoteStore received new credentials");const s=Rl(t);t.Ea.add(3),await fh(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Kd(t)}async function u8(n,e){const t=xt(n);e?(t.Ea.delete(2),await Kd(t)):e||(t.Ea.add(2),await fh(t),t.Ra.set("Unknown"))}function Fc(n){return n.ma||(n.ma=(function(t,s,c){const h=xt(t);return h.sa(),new W6(s,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,c)})(n.datastore,n.asyncQueue,{Xo:e8.bind(null,n),t_:t8.bind(null,n),r_:n8.bind(null,n),H_:r8.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Fm(n)?jm(n):n.Ra.set("Unknown")):(await n.ma.stop(),Pb(n))}))),n.ma}function Ho(n){return n.fa||(n.fa=(function(t,s,c){const h=xt(t);return h.sa(),new K6(s,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,c)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:a8.bind(null,n),r_:c8.bind(null,n),ta:o8.bind(null,n),na:l8.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Qd(n)):(await n.fa.stop(),n.Ta.length>0&&(qe(vl,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e,t,s,c,h){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=c,this.removalCallback=h,this.deferred=new Xs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((p=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,c,h){const p=Date.now()+s,T=new zm(e,t,p,c,h);return T.start(s),T}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new He(ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hm(n,e){if(ja("AsyncQueue",`${e}: ${n}`),jc(n))return new He(ve.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{static emptySet(e){return new Ec(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||rt.comparator(t.key,s.key):(t,s)=>rt.comparator(t.key,s.key),this.keyedMap=Du(),this.sortedSet=new Kn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ec)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const c=t.getNext().key,h=s.getNext().key;if(!c.isEqual(h))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Ec;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(){this.ga=new Kn(rt.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ot(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Rc{constructor(e,t,s,c,h,p,T,w,E){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=c,this.mutatedKeys=h,this.fromCache=p,this.syncStateChanged=T,this.excludesMetadataChanges=w,this.hasCachedResults=E}static fromInitialDocuments(e,t,s,c,h){const p=[];return t.forEach((T=>{p.push({type:0,doc:T})})),new Rc(e,t,Ec.emptySet(t),p,s,c,!0,!1,h)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let c=0;c<t.length;c++)if(t[c].type!==s[c].type||!t[c].doc.isEqual(s[c].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h8{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class f8{constructor(){this.queries=FE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const c=xt(t),h=c.queries;c.queries=FE(),h.forEach(((p,T)=>{for(const w of T.Sa)w.onError(s)}))})(this,new He(ve.ABORTED,"Firestore shutting down"))}}function FE(){return new Nl((n=>nb(n)),zd)}async function Gm(n,e){const t=xt(n);let s=3;const c=e.query;let h=t.queries.get(c);h?!h.ba()&&e.Da()&&(s=2):(h=new h8,s=e.Da()?0:1);try{switch(s){case 0:h.wa=await t.onListen(c,!0);break;case 1:h.wa=await t.onListen(c,!1);break;case 2:await t.onFirstRemoteStoreListen(c)}}catch(p){const T=Hm(p,`Initialization of query '${cc(e.query)}' failed`);return void e.onError(T)}t.queries.set(c,h),h.Sa.push(e),e.va(t.onlineState),h.wa&&e.Fa(h.wa)&&Ym(t)}async function qm(n,e){const t=xt(n),s=e.query;let c=3;const h=t.queries.get(s);if(h){const p=h.Sa.indexOf(e);p>=0&&(h.Sa.splice(p,1),h.Sa.length===0?c=e.Da()?0:1:!h.ba()&&e.Da()&&(c=2))}switch(c){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function d8(n,e){const t=xt(n);let s=!1;for(const c of e){const h=c.query,p=t.queries.get(h);if(p){for(const T of p.Sa)T.Fa(c)&&(s=!0);p.wa=c}}s&&Ym(t)}function g8(n,e,t){const s=xt(n),c=s.queries.get(e);if(c)for(const h of c.Sa)h.onError(t);s.queries.delete(e)}function Ym(n){n.Ca.forEach((e=>{e.next()}))}var Yg,zE;(zE=Yg||(Yg={})).Ma="default",zE.Cache="cache";class Xm{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const c of e.docChanges)c.type!==3&&s.push(c);e=new Rc(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Rc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Yg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e){this.key=e}}class Vb{constructor(e){this.key=e}}class m8{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Gt(),this.mutatedKeys=Gt(),this.eu=rb(e),this.tu=new Ec(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new jE,c=t?t.tu:this.tu;let h=t?t.mutatedKeys:this.mutatedKeys,p=c,T=!1;const w=this.query.limitType==="F"&&c.size===this.query.limit?c.last():null,E=this.query.limitType==="L"&&c.size===this.query.limit?c.first():null;if(e.inorderTraversal(((C,I)=>{const M=c.get(C),B=Hd(this.query,I)?I:null,X=!!M&&this.mutatedKeys.has(M.key),$=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let q=!1;M&&B?M.data.isEqual(B.data)?X!==$&&(s.track({type:3,doc:B}),q=!0):this.su(M,B)||(s.track({type:2,doc:B}),q=!0,(w&&this.eu(B,w)>0||E&&this.eu(B,E)<0)&&(T=!0)):!M&&B?(s.track({type:0,doc:B}),q=!0):M&&!B&&(s.track({type:1,doc:M}),q=!0,(w||E)&&(T=!0)),q&&(B?(p=p.add(B),h=$?h.add(C):h.delete(C)):(p=p.delete(C),h=h.delete(C)))})),this.query.limit!==null)for(;p.size>this.query.limit;){const C=this.query.limitType==="F"?p.last():p.first();p=p.delete(C.key),h=h.delete(C.key),s.track({type:1,doc:C})}return{tu:p,iu:s,Cs:T,mutatedKeys:h}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,c){const h=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const p=e.iu.ya();p.sort(((C,I)=>(function(B,X){const $=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ot(20277,{Rt:q})}};return $(B)-$(X)})(C.type,I.type)||this.eu(C.doc,I.doc))),this.ou(s),c=c??!1;const T=t&&!c?this._u():[],w=this.Xa.size===0&&this.current&&!c?1:0,E=w!==this.Za;return this.Za=w,p.length!==0||E?{snapshot:new Rc(this.query,e.tu,h,p,e.mutatedKeys,w===0,E,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:T}:{au:T}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new jE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Gt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new Vb(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new Ub(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=Gt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Rc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Wm="SyncEngine";class p8{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class x8{constructor(e){this.key=e,this.hu=!1}}class y8{constructor(e,t,s,c,h,p){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=c,this.currentUser=h,this.maxConcurrentLimboResolutions=p,this.Pu={},this.Tu=new Nl((T=>nb(T)),zd),this.Iu=new Map,this.Eu=new Set,this.du=new Kn(rt.comparator),this.Au=new Map,this.Ru=new Mm,this.Vu={},this.mu=new Map,this.fu=Nc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function E8(n,e,t=!0){const s=qb(n);let c;const h=s.Tu.get(e);return h?(s.sharedClientState.addLocalQueryTarget(h.targetId),c=h.view.lu()):c=await jb(s,e,t,!0),c}async function _8(n,e){const t=qb(n);await jb(t,e,!0,!1)}async function jb(n,e,t,s){const c=await j6(n.localStore,Ws(e)),h=c.targetId,p=n.sharedClientState.addLocalQueryTarget(h,t);let T;return s&&(T=await w8(n,e,h,p==="current",c.resumeToken)),n.isPrimaryClient&&t&&Db(n.remoteStore,c),T}async function w8(n,e,t,s,c){n.pu=(I,M,B)=>(async function($,q,_e,ae){let K=q.view.ru(_e);K.Cs&&(K=await PE($.localStore,q.query,!1).then((({documents:j})=>q.view.ru(j,K))));const le=ae&&ae.targetChanges.get(q.targetId),Re=ae&&ae.targetMismatches.get(q.targetId)!=null,De=q.view.applyChanges(K,$.isPrimaryClient,le,Re);return GE($,q.targetId,De.au),De.snapshot})(n,I,M,B);const h=await PE(n.localStore,e,!0),p=new m8(e,h.Qs),T=p.ru(h.documents),w=hh.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",c),E=p.applyChanges(T,n.isPrimaryClient,w);GE(n,t,E.au);const C=new p8(e,t,p);return n.Tu.set(e,C),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),E.snapshot}async function A8(n,e,t){const s=xt(n),c=s.Tu.get(e),h=s.Iu.get(c.targetId);if(h.length>1)return s.Iu.set(c.targetId,h.filter((p=>!zd(p,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(c.targetId),s.sharedClientState.isActiveQueryTarget(c.targetId)||await Gg(s.localStore,c.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(c.targetId),t&&Um(s.remoteStore,c.targetId),Xg(s,c.targetId)})).catch(Vc)):(Xg(s,c.targetId),await Gg(s.localStore,c.targetId,!0))}async function b8(n,e){const t=xt(n),s=t.Tu.get(e),c=t.Iu.get(s.targetId);t.isPrimaryClient&&c.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Um(t.remoteStore,s.targetId))}async function T8(n,e,t){const s=O8(n);try{const c=await(function(p,T){const w=xt(p),E=kn.now(),C=T.reduce(((B,X)=>B.add(X.key)),Gt());let I,M;return w.persistence.runTransaction("Locally write mutations","readwrite",(B=>{let X=Fa(),$=Gt();return w.Ns.getEntries(B,C).next((q=>{X=q,X.forEach(((_e,ae)=>{ae.isValidDocument()||($=$.add(_e))}))})).next((()=>w.localDocuments.getOverlayedDocuments(B,X))).next((q=>{I=q;const _e=[];for(const ae of T){const K=FR(ae,I.get(ae.key).overlayedDocument);K!=null&&_e.push(new Yo(ae.key,K,WA(K.value.mapValue),li.exists(!0)))}return w.mutationQueue.addMutationBatch(B,E,_e,T)})).next((q=>{M=q;const _e=q.applyToLocalDocumentSet(I,$);return w.documentOverlayCache.saveOverlays(B,q.batchId,_e)}))})).then((()=>({batchId:M.batchId,changes:sb(I)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(c.batchId),(function(p,T,w){let E=p.Vu[p.currentUser.toKey()];E||(E=new Kn(Ht)),E=E.insert(T,w),p.Vu[p.currentUser.toKey()]=E})(s,c.batchId,t),await dh(s,c.changes),await Qd(s.remoteStore)}catch(c){const h=Hm(c,"Failed to persist write");t.reject(h)}}async function Fb(n,e){const t=xt(n);try{const s=await B6(t.localStore,e);e.targetChanges.forEach(((c,h)=>{const p=t.Au.get(h);p&&(tn(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1,22616),c.addedDocuments.size>0?p.hu=!0:c.modifiedDocuments.size>0?tn(p.hu,14607):c.removedDocuments.size>0&&(tn(p.hu,42227),p.hu=!1))})),await dh(t,s,e)}catch(s){await Vc(s)}}function HE(n,e,t){const s=xt(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const c=[];s.Tu.forEach(((h,p)=>{const T=p.view.va(e);T.snapshot&&c.push(T.snapshot)})),(function(p,T){const w=xt(p);w.onlineState=T;let E=!1;w.queries.forEach(((C,I)=>{for(const M of I.Sa)M.va(T)&&(E=!0)})),E&&Ym(w)})(s.eventManager,e),c.length&&s.Pu.H_(c),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function v8(n,e,t){const s=xt(n);s.sharedClientState.updateQueryState(e,"rejected",t);const c=s.Au.get(e),h=c&&c.key;if(h){let p=new Kn(rt.comparator);p=p.insert(h,kr.newNoDocument(h,ft.min()));const T=Gt().add(h),w=new Xd(ft.min(),new Map,new Kn(Ht),p,T);await Fb(s,w),s.du=s.du.remove(h),s.Au.delete(e),Km(s)}else await Gg(s.localStore,e,!1).then((()=>Xg(s,e,t))).catch(Vc)}async function S8(n,e){const t=xt(n),s=e.batch.batchId;try{const c=await k6(t.localStore,e);Hb(t,s,null),zb(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await dh(t,c)}catch(c){await Vc(c)}}async function C8(n,e,t){const s=xt(n);try{const c=await(function(p,T){const w=xt(p);return w.persistence.runTransaction("Reject batch","readwrite-primary",(E=>{let C;return w.mutationQueue.lookupMutationBatch(E,T).next((I=>(tn(I!==null,37113),C=I.keys(),w.mutationQueue.removeMutationBatch(E,I)))).next((()=>w.mutationQueue.performConsistencyCheck(E))).next((()=>w.documentOverlayCache.removeOverlaysForBatchId(E,C,T))).next((()=>w.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(E,C))).next((()=>w.localDocuments.getDocuments(E,C)))}))})(s.localStore,e);Hb(s,e,t),zb(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await dh(s,c)}catch(c){await Vc(c)}}function zb(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Hb(n,e,t){const s=xt(n);let c=s.Vu[s.currentUser.toKey()];if(c){const h=c.get(e);h&&(t?h.reject(t):h.resolve(),c=c.remove(e)),s.Vu[s.currentUser.toKey()]=c}}function Xg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||Gb(n,s)}))}function Gb(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Um(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Km(n))}function GE(n,e,t){for(const s of t)s instanceof Ub?(n.Ru.addReference(s.key,e),I8(n,s)):s instanceof Vb?(qe(Wm,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||Gb(n,s.key)):ot(19791,{wu:s})}function I8(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(qe(Wm,"New document in limbo: "+t),n.Eu.add(s),Km(n))}function Km(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new rt(wn.fromString(e)),s=n.fu.next();n.Au.set(s,new x8(t)),n.du=n.du.insert(t,s),Db(n.remoteStore,new Ro(Ws(Fd(t.path)),s,"TargetPurposeLimboResolution",Vd.ce))}}async function dh(n,e,t){const s=xt(n),c=[],h=[],p=[];s.Tu.isEmpty()||(s.Tu.forEach(((T,w)=>{p.push(s.pu(w,e,t).then((E=>{var C;if((E||t)&&s.isPrimaryClient){const I=E?!E.fromCache:(C=t==null?void 0:t.targetChanges.get(w.targetId))==null?void 0:C.current;s.sharedClientState.updateQueryState(w.targetId,I?"current":"not-current")}if(E){c.push(E);const I=Lm.As(w.targetId,E);h.push(I)}})))})),await Promise.all(p),s.Pu.H_(c),await(async function(w,E){const C=xt(w);try{await C.persistence.runTransaction("notifyLocalViewChanges","readwrite",(I=>Ne.forEach(E,(M=>Ne.forEach(M.Es,(B=>C.persistence.referenceDelegate.addReference(I,M.targetId,B))).next((()=>Ne.forEach(M.ds,(B=>C.persistence.referenceDelegate.removeReference(I,M.targetId,B)))))))))}catch(I){if(!jc(I))throw I;qe(km,"Failed to update sequence numbers: "+I)}for(const I of E){const M=I.targetId;if(!I.fromCache){const B=C.Ms.get(M),X=B.snapshotVersion,$=B.withLastLimboFreeSnapshotVersion(X);C.Ms=C.Ms.insert(M,$)}}})(s.localStore,h))}async function N8(n,e){const t=xt(n);if(!t.currentUser.isEqual(e)){qe(Wm,"User change. New user:",e.toKey());const s=await Nb(t.localStore,e);t.currentUser=e,(function(h,p){h.mu.forEach((T=>{T.forEach((w=>{w.reject(new He(ve.CANCELLED,p))}))})),h.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await dh(t,s.Ls)}}function R8(n,e){const t=xt(n),s=t.Au.get(e);if(s&&s.hu)return Gt().add(s.key);{let c=Gt();const h=t.Iu.get(e);if(!h)return c;for(const p of h){const T=t.Tu.get(p);c=c.unionWith(T.view.nu)}return c}}function qb(n){const e=xt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Fb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=R8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=v8.bind(null,e),e.Pu.H_=d8.bind(null,e.eventManager),e.Pu.yu=g8.bind(null,e.eventManager),e}function O8(n){const e=xt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=S8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=C8.bind(null,e),e}class Ed{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Wd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return L6(this.persistence,new D6,e.initialUser,this.serializer)}Cu(e){return new Ib(Pm.mi,this.serializer)}Du(e){return new z6}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ed.provider={build:()=>new Ed};class D8 extends Ed{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){tn(this.persistence.referenceDelegate instanceof xd,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new x6(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Mi.withCacheSize(this.cacheSizeBytes):Mi.DEFAULT;return new Ib((s=>xd.mi(s,t)),this.serializer)}}class Wg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>HE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=N8.bind(null,this.syncEngine),await u8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new f8})()}createDatastore(e){const t=Wd(e.databaseInfo.databaseId),s=(function(h){return new X6(h)})(e.databaseInfo);return(function(h,p,T,w){return new Z6(h,p,T,w)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,c,h,p,T){return new $6(s,c,h,p,T)})(this.localStore,this.datastore,e.asyncQueue,(t=>HE(this.syncEngine,t,0)),(function(){return BE.v()?new BE:new H6})())}createSyncEngine(e,t){return(function(c,h,p,T,w,E,C){const I=new y8(c,h,p,T,w,E);return C&&(I.gu=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(c){const h=xt(c);qe(vl,"RemoteStore shutting down."),h.Ea.add(5),await fh(h),h.Aa.shutdown(),h.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Wg.provider={build:()=>new Wg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ja("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M8{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new He(ve.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(c,h){const p=xt(c),T={documents:h.map((I=>pd(p.serializer,I)))},w=await p.Ho("BatchGetDocuments",p.serializer.databaseId,wn.emptyPath(),T,h.length),E=new Map;w.forEach((I=>{const M=e6(p.serializer,I);E.set(M.key.toString(),M)}));const C=[];return h.forEach((I=>{const M=E.get(I.toString());tn(!!M,55234,{key:I}),C.push(M)})),C})(this.datastore,e);return t.forEach((s=>this.recordVersion(s))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new Yd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,s)=>{const c=rt.fromPath(s);this.mutations.push(new gb(c,this.precondition(c)))})),await(async function(s,c){const h=xt(s),p={writes:c.map((T=>bb(h.serializer,T)))};await h.Go("Commit",h.serializer.databaseId,wn.emptyPath(),p)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ot(50498,{Gu:e.constructor.name});t=ft.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new He(ve.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ft.min())?li.exists(!1):li.updateTime(t):li.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ft.min()))throw new He(ve.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return li.updateTime(t)}return li.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P8{constructor(e,t,s,c,h){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=c,this.deferred=h,this.zu=s.maxAttempts,this.M_=new Bm(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new M8(this.datastore),t=this.Hu(e);t&&t.then((s=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(s)})).catch((c=>{this.Yu(c)}))))})).catch((s=>{this.Yu(s)}))}))}Hu(e){try{const t=this.updateFunction(e);return!lh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!mb(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go="FirestoreClient";class L8{constructor(e,t,s,c,h){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=c,this.user=oi.UNAUTHENTICATED,this.clientId=bm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=h,this.authCredentials.start(s,(async p=>{qe(Go,"Received user=",p.uid),await this.authCredentialListener(p),this.user=p})),this.appCheckCredentials.start(s,(p=>(qe(Go,"Received new app check token=",p),this.appCheckCredentialListener(p,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Hm(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function gg(n,e){n.asyncQueue.verifyOperationInProgress(),qe(Go,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async c=>{s.isEqual(c)||(await Nb(e.localStore,c),s=c)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function qE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await k8(n);qe(Go,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>VE(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,c)=>VE(e.remoteStore,c))),n._onlineComponents=e}async function k8(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){qe(Go,"Using user provided OfflineComponentProvider");try{await gg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(c){return c.name==="FirebaseError"?c.code===ve.FAILED_PRECONDITION||c.code===ve.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||c.code===22||c.code===20||c.code===11})(t))throw t;vc("Error using user provided cache. Falling back to memory cache: "+t),await gg(n,new Ed)}}else qe(Go,"Using default OfflineComponentProvider"),await gg(n,new D8(void 0));return n._offlineComponents}async function Zm(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(qe(Go,"Using user provided OnlineComponentProvider"),await qE(n,n._uninitializedComponentsProvider._online)):(qe(Go,"Using default OnlineComponentProvider"),await qE(n,new Wg))),n._onlineComponents}function B8(n){return Zm(n).then((e=>e.syncEngine))}function U8(n){return Zm(n).then((e=>e.datastore))}async function _d(n){const e=await Zm(n),t=e.eventManager;return t.onListen=E8.bind(null,e.syncEngine),t.onUnlisten=A8.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=_8.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=b8.bind(null,e.syncEngine),t}function V8(n,e,t={}){const s=new Xs;return n.asyncQueue.enqueueAndForget((async()=>(function(h,p,T,w,E){const C=new Qm({next:M=>{C.Nu(),p.enqueueAndForget((()=>qm(h,I)));const B=M.docs.has(T);!B&&M.fromCache?E.reject(new He(ve.UNAVAILABLE,"Failed to get document because the client is offline.")):B&&M.fromCache&&w&&w.source==="server"?E.reject(new He(ve.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(M)},error:M=>E.reject(M)}),I=new Xm(Fd(T.path),C,{includeMetadataChanges:!0,qa:!0});return Gm(h,I)})(await _d(n),n.asyncQueue,e,t,s))),s.promise}function j8(n,e,t={}){const s=new Xs;return n.asyncQueue.enqueueAndForget((async()=>(function(h,p,T,w,E){const C=new Qm({next:M=>{C.Nu(),p.enqueueAndForget((()=>qm(h,I))),M.fromCache&&w.source==="server"?E.reject(new He(ve.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):E.resolve(M)},error:M=>E.reject(M)}),I=new Xm(T,C,{includeMetadataChanges:!0,qa:!0});return Gm(h,I)})(await _d(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb="firestore.googleapis.com",XE=!0;class WE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new He(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Xb,this.ssl=XE}else this.host=e.host,this.ssl=e.ssl??XE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Cb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<m6)throw new He(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}tR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Yb(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new He(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new He(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new He(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,c){return s.timeoutSeconds===c.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zd{constructor(e,t,s,c){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=c,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new WE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new He(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new He(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new WE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new q4;switch(s.type){case"firstParty":return new K4(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new He(ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=YE.get(t);s&&(qe("ComponentProvider","Removing Datastore"),YE.delete(t),s.terminate())})(this),Promise.resolve()}}function F8(n,e,t,s={}){var E;n=Pi(n,Zd);const c=kc(e),h=n._getSettings(),p={...h,emulatorOptions:n._getEmulatorOptions()},T=`${e}:${t}`;c&&(wA(`https://${T}`),AA("Firestore",!0)),h.host!==Xb&&h.host!==T&&vc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const w={...h,host:T,ssl:c,emulatorOptions:s};if(!Al(w,p)&&(n._setSettings(w),s.mockUserToken)){let C,I;if(typeof s.mockUserToken=="string")C=s.mockUserToken,I=oi.MOCK_USER;else{C=yN(s.mockUserToken,(E=n._app)==null?void 0:E.options.projectId);const M=s.mockUserToken.sub||s.mockUserToken.user_id;if(!M)throw new He(ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");I=new oi(M)}n._authCredentials=new Y4(new kA(C,I))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Xo(this.firestore,e,this._query)}}class Wn{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ko(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wn(this.firestore,e,this._key)}toJSON(){return{type:Wn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(oh(t,Wn._jsonSchema))return new Wn(e,s||null,new rt(wn.fromString(t.referencePath)))}}Wn._jsonSchemaVersion="firestore/documentReference/1.0",Wn._jsonSchema={type:br("string",Wn._jsonSchemaVersion),referencePath:br("string")};class ko extends Xo{constructor(e,t,s){super(e,t,Fd(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wn(this.firestore,null,new rt(e))}withConverter(e){return new ko(this.firestore,e,this._path)}}function ns(n,e,...t){if(n=Tr(n),BA("collection","path",e),n instanceof Zd){const s=wn.fromString(e,...t);return oE(s),new ko(n,null,s)}{if(!(n instanceof Wn||n instanceof ko))throw new He(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(wn.fromString(e,...t));return oE(s),new ko(n.firestore,null,s)}}function An(n,e,...t){if(n=Tr(n),arguments.length===1&&(e=bm.newId()),BA("doc","path",e),n instanceof Zd){const s=wn.fromString(e,...t);return aE(s),new Wn(n,null,new rt(s))}{if(!(n instanceof Wn||n instanceof ko))throw new He(ve.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(wn.fromString(e,...t));return aE(s),new Wn(n.firestore,n instanceof ko?n.converter:null,new rt(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE="AsyncQueue";class QE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Bm(this,"async_queue_retry"),this._c=()=>{const s=dg();s&&qe(KE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=dg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=dg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Xs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!jc(e))throw e;qe(KE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,ja("INTERNAL UNHANDLED ERROR: ",ZE(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const c=zm.createAndSchedule(this,e,t,s,(h=>this.hc(h)));return this.tc.push(c),c}uc(){this.nc&&ot(47125,{Pc:ZE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function ZE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JE(n){return(function(t,s){if(typeof t!="object"||t===null)return!1;const c=t;for(const h of s)if(h in c&&typeof c[h]=="function")return!0;return!1})(n,["next","error","complete"])}class za extends Zd{constructor(e,t,s,c){super(e,t,s,c),this.type="firestore",this._queue=new QE,this._persistenceKey=(c==null?void 0:c.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new QE(e),this._firestoreClient=void 0,await e}}}function z8(n,e){const t=typeof n=="object"?n:SA(),s=typeof n=="string"?n:ld,c=wm(t,"firestore").getImmediate({identifier:s});if(!c._initialized){const h=pN("firestore");h&&F8(c,...h)}return c}function gh(n){if(n._terminated)throw new He(ve.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||H8(n),n._firestoreClient}function H8(n){var s,c,h;const e=n._freezeSettings(),t=(function(T,w,E,C){return new fR(T,w,E,C.host,C.ssl,C.experimentalForceLongPolling,C.experimentalAutoDetectLongPolling,Yb(C.experimentalLongPollingOptions),C.useFetchStreams,C.isUsingEmulator)})(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(c=e.localCache)!=null&&c._offlineComponentProvider&&((h=e.localCache)!=null&&h._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new L8(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(T){const w=T==null?void 0:T._online.build();return{_offline:T==null?void 0:T._offline.build(w),_online:w}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zi(Yr.fromBase64String(e))}catch(t){throw new He(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Zi(Yr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Zi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(oh(e,Zi._jsonSchema))return Zi.fromBase64String(e.bytes)}}Zi._jsonSchemaVersion="firestore/bytes/1.0",Zi._jsonSchema={type:br("string",Zi._jsonSchemaVersion),bytes:br("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new He(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new He(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new He(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ht(this._lat,e._lat)||Ht(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ks._jsonSchemaVersion}}static fromJSON(e){if(oh(e,Ks._jsonSchema))return new Ks(e.latitude,e.longitude)}}Ks._jsonSchemaVersion="firestore/geoPoint/1.0",Ks._jsonSchema={type:br("string",Ks._jsonSchemaVersion),latitude:br("number"),longitude:br("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,c){if(s.length!==c.length)return!1;for(let h=0;h<s.length;++h)if(s[h]!==c[h])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Qs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(oh(e,Qs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Qs(e.vectorValues);throw new He(ve.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Qs._jsonSchemaVersion="firestore/vectorValue/1.0",Qs._jsonSchema={type:br("string",Qs._jsonSchemaVersion),vectorValues:br("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G8=/^__.*__$/;class q8{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Yo(e,this.data,this.fieldMask,t,this.fieldTransforms):new uh(e,this.data,t,this.fieldTransforms)}}class Wb{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Yo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Kb(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ot(40011,{Ac:n})}}class $m{constructor(e,t,s,c,h,p){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=c,h===void 0&&this.Rc(),this.fieldTransforms=h||[],this.fieldMask=p||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new $m({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var c;const t=(c=this.path)==null?void 0:c.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var c;const t=(c=this.path)==null?void 0:c.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return wd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Kb(this.Ac)&&G8.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Y8{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Wd(e)}Cc(e,t,s,c=!1){return new $m({Ac:e,methodName:t,Dc:s,path:qr.emptyPath(),fc:!1,bc:c},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Jd(n){const e=n._freezeSettings(),t=Wd(n._databaseId);return new Y8(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Qb(n,e,t,s,c,h={}){const p=n.Cc(h.merge||h.mergeFields?2:0,e,t,c);ep("Data must be an object, but it was:",p,s);const T=$b(s,p);let w,E;if(h.merge)w=new Ji(p.fieldMask),E=p.fieldTransforms;else if(h.mergeFields){const C=[];for(const I of h.mergeFields){const M=Kg(e,I,t);if(!p.contains(M))throw new He(ve.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);tT(C,M)||C.push(M)}w=new Ji(C),E=p.fieldTransforms.filter((I=>w.covers(I.field)))}else w=null,E=p.fieldTransforms;return new q8(new _i(T),w,E)}class $d extends Jm{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $d}}function Zb(n,e,t,s){const c=n.Cc(1,e,t);ep("Data must be an object, but it was:",c,s);const h=[],p=_i.empty();qo(s,((w,E)=>{const C=tp(e,w,t);E=Tr(E);const I=c.yc(C);if(E instanceof $d)h.push(C);else{const M=ph(E,I);M!=null&&(h.push(C),p.set(C,M))}}));const T=new Ji(h);return new Wb(p,T,c.fieldTransforms)}function Jb(n,e,t,s,c,h){const p=n.Cc(1,e,t),T=[Kg(e,s,t)],w=[c];if(h.length%2!=0)throw new He(ve.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let M=0;M<h.length;M+=2)T.push(Kg(e,h[M])),w.push(h[M+1]);const E=[],C=_i.empty();for(let M=T.length-1;M>=0;--M)if(!tT(E,T[M])){const B=T[M];let X=w[M];X=Tr(X);const $=p.yc(B);if(X instanceof $d)E.push(B);else{const q=ph(X,$);q!=null&&(E.push(B),C.set(B,q))}}const I=new Ji(E);return new Wb(C,I,p.fieldTransforms)}function X8(n,e,t,s=!1){return ph(t,n.Cc(s?4:3,e))}function ph(n,e){if(eT(n=Tr(n)))return ep("Unsupported field value:",e,n),$b(n,e);if(n instanceof Jm)return(function(s,c){if(!Kb(c.Ac))throw c.Sc(`${s._methodName}() can only be used with update() and set()`);if(!c.path)throw c.Sc(`${s._methodName}() is not currently supported inside arrays`);const h=s._toFieldTransform(c);h&&c.fieldTransforms.push(h)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,c){const h=[];let p=0;for(const T of s){let w=ph(T,c.wc(p));w==null&&(w={nullValue:"NULL_VALUE"}),h.push(w),p++}return{arrayValue:{values:h}}})(n,e)}return(function(s,c){if((s=Tr(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return LR(c.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const h=kn.fromDate(s);return{timestampValue:md(c.serializer,h)}}if(s instanceof kn){const h=new kn(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:md(c.serializer,h)}}if(s instanceof Ks)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Zi)return{bytesValue:Eb(c.serializer,s._byteString)};if(s instanceof Wn){const h=c.databaseId,p=s.firestore._databaseId;if(!p.isEqual(h))throw c.Sc(`Document reference is for database ${p.projectId}/${p.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:Dm(s.firestore._databaseId||c.databaseId,s._key.path)}}if(s instanceof Qs)return(function(p,T){return{mapValue:{fields:{[YA]:{stringValue:XA},[cd]:{arrayValue:{values:p.toArray().map((E=>{if(typeof E!="number")throw T.Sc("VectorValues must only contain numeric values.");return Nm(T.serializer,E)}))}}}}}})(s,c);throw c.Sc(`Unsupported field value: ${Ud(s)}`)})(n,e)}function $b(n,e){const t={};return jA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qo(n,((s,c)=>{const h=ph(c,e.mc(s));h!=null&&(t[s]=h)})),{mapValue:{fields:t}}}function eT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof kn||n instanceof Ks||n instanceof Zi||n instanceof Wn||n instanceof Jm||n instanceof Qs)}function ep(n,e,t){if(!eT(t)||!UA(t)){const s=Ud(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function Kg(n,e,t){if((e=Tr(e))instanceof mh)return e._internalPath;if(typeof e=="string")return tp(n,e);throw wd("Field path arguments must be of type string or ",n,!1,void 0,t)}const W8=new RegExp("[~\\*/\\[\\]]");function tp(n,e,t){if(e.search(W8)>=0)throw wd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new mh(...e.split("."))._internalPath}catch{throw wd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function wd(n,e,t,s,c){const h=s&&!s.isEmpty(),p=c!==void 0;let T=`Function ${e}() called with invalid data`;t&&(T+=" (via `toFirestore()`)"),T+=". ";let w="";return(h||p)&&(w+=" (found",h&&(w+=` in field ${s}`),p&&(w+=` in document ${c}`),w+=")"),new He(ve.INVALID_ARGUMENT,T+n+w)}function tT(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,t,s,c,h){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=c,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new Wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new K8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(np("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class K8 extends Ad{data(){return super.data()}}function np(n,e){return typeof e=="string"?tp(n,e):e instanceof mh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nT(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new He(ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rp{}class rT extends rp{}function e0(n,e,...t){let s=[];e instanceof rp&&s.push(e),s=s.concat(t),(function(h){const p=h.filter((w=>w instanceof ip)).length,T=h.filter((w=>w instanceof t0)).length;if(p>1||p>0&&T>0)throw new He(ve.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const c of s)n=c._apply(n);return n}class t0 extends rT{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new t0(e,t,s)}_apply(e){const t=this._parse(e);return iT(e._query,t),new Xo(e.firestore,e.converter,jg(e._query,t))}_parse(e){const t=Jd(e.firestore);return(function(h,p,T,w,E,C,I){let M;if(E.isKeyField()){if(C==="array-contains"||C==="array-contains-any")throw new He(ve.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if(C==="in"||C==="not-in"){e_(I,C);const X=[];for(const $ of I)X.push($E(w,h,$));M={arrayValue:{values:X}}}else M=$E(w,h,I)}else C!=="in"&&C!=="not-in"&&C!=="array-contains-any"||e_(I,C),M=X8(T,p,I,C==="in"||C==="not-in");return Ar.create(E,C,M)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Gu(n,e,t){const s=e,c=np("where",n);return t0._create(c,s,t)}class ip extends rp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ip(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:Ms.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(c,h){let p=c;const T=h.getFlattenedFilters();for(const w of T)iT(p,w),p=jg(p,w)})(e._query,t),new Xo(e.firestore,e.converter,jg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class sp extends rT{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new sp(e,t,s)}_apply(e){return new Xo(e.firestore,e.converter,fd(e._query,this._limit,this._limitType))}}function Q8(n){return sp._create("limit",n,"F")}function $E(n,e,t){if(typeof(t=Tr(t))=="string"){if(t==="")throw new He(ve.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tb(e)&&t.indexOf("/")!==-1)throw new He(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(wn.fromString(t));if(!rt.isDocumentKey(s))throw new He(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return mE(n,new rt(s))}if(t instanceof Wn)return mE(n,t._key);throw new He(ve.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ud(t)}.`)}function e_(n,e){if(!Array.isArray(n)||n.length===0)throw new He(ve.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function iT(n,e){const t=(function(c,h){for(const p of c)for(const T of p.getFlattenedFilters())if(h.indexOf(T.op)>=0)return T.op;return null})(n.filters,(function(c){switch(c){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new He(ve.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new He(ve.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class sT{convertValue(e,t="none"){switch(zo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return cr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Fo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ot(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return qo(e,((c,h)=>{s[c]=this.convertValue(h,t)})),s}convertVectorValue(e){var s,c,h;const t=(h=(c=(s=e.fields)==null?void 0:s[cd].arrayValue)==null?void 0:c.values)==null?void 0:h.map((p=>cr(p.doubleValue)));return new Qs(t)}convertGeoPoint(e){return new Ks(cr(e.latitude),cr(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=jd(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Zu(e));default:return null}}convertTimestamp(e){const t=jo(e);return new kn(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=wn.fromString(e);tn(Sb(s),9688,{name:e});const c=new Ju(s.get(1),s.get(3)),h=new rt(s.popFirst(5));return c.isEqual(t)||ja(`Document ${h} contains a document reference within a different database (${c.projectId}/${c.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class Z8 extends sT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,t)}}class dc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bo extends Ad{constructor(e,t,s,c,h,p){super(e,t,s,c,p),this._firestore=e,this._firestoreImpl=e,this.metadata=h}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Kf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(np("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new He(ve.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Bo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Bo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Bo._jsonSchema={type:br("string",Bo._jsonSchemaVersion),bundleSource:br("string","DocumentSnapshot"),bundleName:br("string"),bundle:br("string")};class Kf extends Bo{data(e={}){return super.data(e)}}class wl{constructor(e,t,s,c){this._firestore=e,this._userDataWriter=t,this._snapshot=c,this.metadata=new dc(c.hasPendingWrites,c.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Kf(this._firestore,this._userDataWriter,s.key,s,new dc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new He(ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(c,h){if(c._snapshot.oldDocs.isEmpty()){let p=0;return c._snapshot.docChanges.map((T=>{const w=new Kf(c._firestore,c._userDataWriter,T.doc.key,T.doc,new dc(c._snapshot.mutatedKeys.has(T.doc.key),c._snapshot.fromCache),c.query.converter);return T.doc,{type:"added",doc:w,oldIndex:-1,newIndex:p++}}))}{let p=c._snapshot.oldDocs;return c._snapshot.docChanges.filter((T=>h||T.type!==3)).map((T=>{const w=new Kf(c._firestore,c._userDataWriter,T.doc.key,T.doc,new dc(c._snapshot.mutatedKeys.has(T.doc.key),c._snapshot.fromCache),c.query.converter);let E=-1,C=-1;return T.type!==0&&(E=p.indexOf(T.doc.key),p=p.delete(T.doc.key)),T.type!==1&&(p=p.add(T.doc),C=p.indexOf(T.doc.key)),{type:J8(T.type),doc:w,oldIndex:E,newIndex:C}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new He(ve.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=wl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=bm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],c=[];return this.docs.forEach((h=>{h._document!==null&&(t.push(h._document),s.push(this._userDataWriter.convertObjectMap(h._document.data.value.mapValue.fields,"previous")),c.push(h.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function J8(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ot(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(n){n=Pi(n,Wn);const e=Pi(n.firestore,za);return V8(gh(e),n._key).then((t=>lT(e,n,t)))}wl._jsonSchemaVersion="firestore/querySnapshot/1.0",wl._jsonSchema={type:br("string",wl._jsonSchemaVersion),bundleSource:br("string","QuerySnapshot"),bundleName:br("string"),bundle:br("string")};class n0 extends sT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,t)}}function r0(n){n=Pi(n,Xo);const e=Pi(n.firestore,za),t=gh(e),s=new n0(e);return nT(n._query),j8(t,n._query).then((c=>new wl(e,s,n,c)))}function Wo(n,e,t){n=Pi(n,Wn);const s=Pi(n.firestore,za),c=aT(n.converter,e,t);return ap(s,[Qb(Jd(s),"setDoc",n._key,c,n.converter!==null,t).toMutation(n._key,li.none())])}function Ol(n,e,t,...s){n=Pi(n,Wn);const c=Pi(n.firestore,za),h=Jd(c);let p;return p=typeof(e=Tr(e))=="string"||e instanceof mh?Jb(h,"updateDoc",n._key,e,t,s):Zb(h,"updateDoc",n._key,e),ap(c,[p.toMutation(n._key,li.exists(!0))])}function zc(n){return ap(Pi(n.firestore,za),[new Yd(n._key,li.none())])}function Xa(n,...e){var w,E,C;n=Tr(n);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||JE(e[s])||(t=e[s++]);const c={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(JE(e[s])){const I=e[s];e[s]=(w=I.next)==null?void 0:w.bind(I),e[s+1]=(E=I.error)==null?void 0:E.bind(I),e[s+2]=(C=I.complete)==null?void 0:C.bind(I)}let h,p,T;if(n instanceof Wn)p=Pi(n.firestore,za),T=Fd(n._key.path),h={next:I=>{e[s]&&e[s](lT(p,n,I))},error:e[s+1],complete:e[s+2]};else{const I=Pi(n,Xo);p=Pi(I.firestore,za),T=I._query;const M=new n0(p);h={next:B=>{e[s]&&e[s](new wl(p,M,I,B))},error:e[s+1],complete:e[s+2]},nT(n._query)}return(function(M,B,X,$){const q=new Qm($),_e=new Xm(B,q,X);return M.asyncQueue.enqueueAndForget((async()=>Gm(await _d(M),_e))),()=>{q.Nu(),M.asyncQueue.enqueueAndForget((async()=>qm(await _d(M),_e)))}})(gh(p),T,c,h)}function ap(n,e){return(function(s,c){const h=new Xs;return s.asyncQueue.enqueueAndForget((async()=>T8(await B8(s),c,h))),h.promise})(gh(n),e)}function lT(n,e,t){const s=t.docs.get(e._key),c=new n0(n);return new Bo(n,c,e._key,s,new dc(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $8={maxAttempts:5};function Pu(n,e){if((n=Tr(n)).firestore!==e)throw new He(ve.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Jd(e)}get(e){const t=Pu(e,this._firestore),s=new Z8(this._firestore);return this._transaction.lookup([t._key]).then((c=>{if(!c||c.length!==1)return ot(24041);const h=c[0];if(h.isFoundDocument())return new Ad(this._firestore,s,h.key,h,t.converter);if(h.isNoDocument())return new Ad(this._firestore,s,t._key,null,t.converter);throw ot(18433,{doc:h})}))}set(e,t,s){const c=Pu(e,this._firestore),h=aT(c.converter,t,s),p=Qb(this._dataReader,"Transaction.set",c._key,h,c.converter!==null,s);return this._transaction.set(c._key,p),this}update(e,t,s,...c){const h=Pu(e,this._firestore);let p;return p=typeof(t=Tr(t))=="string"||t instanceof mh?Jb(this._dataReader,"Transaction.update",h._key,t,s,c):Zb(this._dataReader,"Transaction.update",h._key,t),this._transaction.update(h._key,p),this}delete(e){const t=Pu(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO extends eO{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Pu(e,this._firestore),s=new n0(this._firestore);return super.get(e).then((c=>new Bo(this._firestore,s,t._key,c._document,new dc(!1,!1),t.converter)))}}function op(n,e,t){n=Pi(n,za);const s={...$8,...t};return(function(h){if(h.maxAttempts<1)throw new He(ve.INVALID_ARGUMENT,"Max attempts must be at least 1")})(s),(function(h,p,T){const w=new Xs;return h.asyncQueue.enqueueAndForget((async()=>{const E=await U8(h);new P8(h.asyncQueue,E,T,p,w).ju()})),w.promise})(gh(n),(c=>e(new tO(n,c))),s)}(function(e,t=!0){(function(c){Uc=c})(Bc),Tc(new bl("firestore",((s,{instanceIdentifier:c,options:h})=>{const p=s.getProvider("app").getImmediate(),T=new za(new X4(s.getProvider("auth-internal")),new Q4(p,s.getProvider("app-check-internal")),(function(E,C){if(!Object.prototype.hasOwnProperty.apply(E.options,["projectId"]))throw new He(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ju(E.options.projectId,C)})(p,c),p);return h={useFetchStreams:t,...h},T._setSettings(h),T}),"PUBLIC").setMultipleInstances(!0)),Po(nE,rE,e),Po(nE,rE,"esm2020")})();var nO="firebase",rO="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Po(nO,rO,"app");function cT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const iO=cT,uT=new sh("auth","Firebase",cT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd=new Em("@firebase/auth");function sO(n,...e){bd.logLevel<=zt.WARN&&bd.warn(`Auth (${Bc}): ${n}`,...e)}function Qf(n,...e){bd.logLevel<=zt.ERROR&&bd.error(`Auth (${Bc}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ps(n,...e){throw lp(n,...e)}function Zs(n,...e){return lp(n,...e)}function hT(n,e,t){const s={...iO(),[e]:t};return new sh("auth","Firebase",s).create(e,{appName:n.name})}function Js(n){return hT(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function lp(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return uT.create(n,...e)}function dt(n,e,...t){if(!n)throw lp(e,...t)}function La(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Qf(e),new Error(e)}function Ha(n,e){n||La(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function aO(){return t_()==="http:"||t_()==="https:"}function t_(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(aO()||TN()||"connection"in navigator)?navigator.onLine:!0}function lO(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ha(t>e,"Short delay should be less than long delay!"),this.isMobile=wN()||vN()}get(){return oO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cp(n,e){Ha(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;La("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;La("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;La("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],hO=new xh(3e4,6e4);function Ko(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Wa(n,e,t,s,c={}){return dT(n,c,async()=>{let h={},p={};s&&(e==="GET"?p=s:h={body:JSON.stringify(s)});const T=ah({key:n.config.apiKey,...p}).slice(1),w=await n._getAdditionalHeaders();w["Content-Type"]="application/json",n.languageCode&&(w["X-Firebase-Locale"]=n.languageCode);const E={method:e,headers:w,...h};return bN()||(E.referrerPolicy="no-referrer"),n.emulatorConfig&&kc(n.emulatorConfig.host)&&(E.credentials="include"),fT.fetch()(await gT(n,n.config.apiHost,t,T),E)})}async function dT(n,e,t){n._canInitEmulator=!1;const s={...cO,...e};try{const c=new dO(n),h=await Promise.race([t(),c.promise]);c.clearNetworkTimeout();const p=await h.json();if("needConfirmation"in p)throw Pf(n,"account-exists-with-different-credential",p);if(h.ok&&!("errorMessage"in p))return p;{const T=h.ok?p.errorMessage:p.error.message,[w,E]=T.split(" : ");if(w==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pf(n,"credential-already-in-use",p);if(w==="EMAIL_EXISTS")throw Pf(n,"email-already-in-use",p);if(w==="USER_DISABLED")throw Pf(n,"user-disabled",p);const C=s[w]||w.toLowerCase().replace(/[_\s]+/g,"-");if(E)throw hT(n,C,E);Ps(n,C)}}catch(c){if(c instanceof Ya)throw c;Ps(n,"network-request-failed",{message:String(c)})}}async function yh(n,e,t,s,c={}){const h=await Wa(n,e,t,s,c);return"mfaPendingCredential"in h&&Ps(n,"multi-factor-auth-required",{_serverResponse:h}),h}async function gT(n,e,t,s){const c=`${e}${t}?${s}`,h=n,p=h.config.emulator?cp(n.config,c):`${n.config.apiScheme}://${c}`;return uO.includes(t)&&(await h._persistenceManagerAvailable,h._getPersistenceType()==="COOKIE")?h._getPersistence()._getFinalTarget(p).toString():p}function fO(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class dO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Zs(this.auth,"network-request-failed")),hO.get())})}}function Pf(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const c=Zs(n,e,s);return c.customData._tokenResponse=t,c}function n_(n){return n!==void 0&&n.enterprise!==void 0}class gO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return fO(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function mO(n,e){return Wa(n,"GET","/v2/recaptchaConfig",Ko(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pO(n,e){return Wa(n,"POST","/v1/accounts:delete",e)}async function Td(n,e){return Wa(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function xO(n,e=!1){const t=Tr(n),s=await t.getIdToken(e),c=up(s);dt(c&&c.exp&&c.auth_time&&c.iat,t.auth,"internal-error");const h=typeof c.firebase=="object"?c.firebase:void 0,p=h==null?void 0:h.sign_in_provider;return{claims:c,token:s,authTime:qu(mg(c.auth_time)),issuedAtTime:qu(mg(c.iat)),expirationTime:qu(mg(c.exp)),signInProvider:p||null,signInSecondFactor:(h==null?void 0:h.sign_in_second_factor)||null}}function mg(n){return Number(n)*1e3}function up(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return Qf("JWT malformed, contained fewer than 3 sections"),null;try{const c=xA(t);return c?JSON.parse(c):(Qf("Failed to decode base64 JWT payload"),null)}catch(c){return Qf("Caught error parsing JWT payload as JSON",c==null?void 0:c.toString()),null}}function r_(n){const e=up(n);return dt(e,"internal-error"),dt(typeof e.exp<"u","internal-error"),dt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oc(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Ya&&yO(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function yO({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=qu(this.lastLoginAt),this.creationTime=qu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vd(n){var I;const e=n.auth,t=await n.getIdToken(),s=await Oc(n,Td(e,{idToken:t}));dt(s==null?void 0:s.users.length,e,"internal-error");const c=s.users[0];n._notifyReloadListener(c);const h=(I=c.providerUserInfo)!=null&&I.length?mT(c.providerUserInfo):[],p=wO(n.providerData,h),T=n.isAnonymous,w=!(n.email&&c.passwordHash)&&!(p!=null&&p.length),E=T?w:!1,C={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:p,metadata:new Zg(c.createdAt,c.lastLoginAt),isAnonymous:E};Object.assign(n,C)}async function _O(n){const e=Tr(n);await vd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function wO(n,e){return[...n.filter(s=>!e.some(c=>c.providerId===s.providerId)),...e]}function mT(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AO(n,e){const t=await dT(n,{},async()=>{const s=ah({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:c,apiKey:h}=n.config,p=await gT(n,c,"/v1/token",`key=${h}`),T=await n._getAdditionalHeaders();T["Content-Type"]="application/x-www-form-urlencoded";const w={method:"POST",headers:T,body:s};return n.emulatorConfig&&kc(n.emulatorConfig.host)&&(w.credentials="include"),fT.fetch()(p,w)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function bO(n,e){return Wa(n,"POST","/v2/accounts:revokeToken",Ko(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){dt(e.idToken,"internal-error"),dt(typeof e.idToken<"u","internal-error"),dt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):r_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){dt(e.length!==0,"internal-error");const t=r_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(dt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:c,expiresIn:h}=await AO(e,t);this.updateTokensAndExpiration(s,c,Number(h))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:c,expirationTime:h}=t,p=new _c;return s&&(dt(typeof s=="string","internal-error",{appName:e}),p.refreshToken=s),c&&(dt(typeof c=="string","internal-error",{appName:e}),p.accessToken=c),h&&(dt(typeof h=="number","internal-error",{appName:e}),p.expirationTime=h),p}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _c,this.toJSON())}_performRefresh(){return La("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vo(n,e){dt(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ds{constructor({uid:e,auth:t,stsTokenManager:s,...c}){this.providerId="firebase",this.proactiveRefresh=new EO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new Zg(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(e){const t=await Oc(this,this.stsTokenManager.getToken(this.auth,e));return dt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return xO(this,e)}reload(){return _O(this)}_assign(e){this!==e&&(dt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ds({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){dt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await vd(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qi(this.auth.app))return Promise.reject(Js(this.auth));const e=await this.getIdToken();return await Oc(this,pO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,c=t.email??void 0,h=t.phoneNumber??void 0,p=t.photoURL??void 0,T=t.tenantId??void 0,w=t._redirectEventId??void 0,E=t.createdAt??void 0,C=t.lastLoginAt??void 0,{uid:I,emailVerified:M,isAnonymous:B,providerData:X,stsTokenManager:$}=t;dt(I&&$,e,"internal-error");const q=_c.fromJSON(this.name,$);dt(typeof I=="string",e,"internal-error"),vo(s,e.name),vo(c,e.name),dt(typeof M=="boolean",e,"internal-error"),dt(typeof B=="boolean",e,"internal-error"),vo(h,e.name),vo(p,e.name),vo(T,e.name),vo(w,e.name),vo(E,e.name),vo(C,e.name);const _e=new Ds({uid:I,auth:e,email:c,emailVerified:M,displayName:s,isAnonymous:B,photoURL:p,phoneNumber:h,tenantId:T,stsTokenManager:q,createdAt:E,lastLoginAt:C});return X&&Array.isArray(X)&&(_e.providerData=X.map(ae=>({...ae}))),w&&(_e._redirectEventId=w),_e}static async _fromIdTokenResponse(e,t,s=!1){const c=new _c;c.updateFromServerResponse(t);const h=new Ds({uid:t.localId,auth:e,stsTokenManager:c,isAnonymous:s});return await vd(h),h}static async _fromGetAccountInfoResponse(e,t,s){const c=t.users[0];dt(c.localId!==void 0,"internal-error");const h=c.providerUserInfo!==void 0?mT(c.providerUserInfo):[],p=!(c.email&&c.passwordHash)&&!(h!=null&&h.length),T=new _c;T.updateFromIdToken(s);const w=new Ds({uid:c.localId,auth:e,stsTokenManager:T,isAnonymous:p}),E={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:h,metadata:new Zg(c.createdAt,c.lastLoginAt),isAnonymous:!(c.email&&c.passwordHash)&&!(h!=null&&h.length)};return Object.assign(w,E),w}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_=new Map;function ka(n){Ha(n instanceof Function,"Expected a class definition");let e=i_.get(n);return e?(Ha(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,i_.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}pT.type="NONE";const s_=pT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zf(n,e,t){return`firebase:${n}:${e}:${t}`}class wc{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:c,name:h}=this.auth;this.fullUserKey=Zf(this.userKey,c.apiKey,h),this.fullPersistenceKey=Zf("persistence",c.apiKey,h),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Td(this.auth,{idToken:e}).catch(()=>{});return t?Ds._fromGetAccountInfoResponse(this.auth,t,e):null}return Ds._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new wc(ka(s_),e,s);const c=(await Promise.all(t.map(async E=>{if(await E._isAvailable())return E}))).filter(E=>E);let h=c[0]||ka(s_);const p=Zf(s,e.config.apiKey,e.name);let T=null;for(const E of t)try{const C=await E._get(p);if(C){let I;if(typeof C=="string"){const M=await Td(e,{idToken:C}).catch(()=>{});if(!M)break;I=await Ds._fromGetAccountInfoResponse(e,M,C)}else I=Ds._fromJSON(e,C);E!==h&&(T=I),h=E;break}}catch{}const w=c.filter(E=>E._shouldAllowMigration);return!h._shouldAllowMigration||!w.length?new wc(h,e,s):(h=w[0],T&&await h._set(p,T.toJSON()),await Promise.all(t.map(async E=>{if(E!==h)try{await E._remove(p)}catch{}})),new wc(h,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_T(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(AT(e))return"Blackberry";if(bT(e))return"Webos";if(yT(e))return"Safari";if((e.includes("chrome/")||ET(e))&&!e.includes("edge/"))return"Chrome";if(wT(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function xT(n=ci()){return/firefox\//i.test(n)}function yT(n=ci()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ET(n=ci()){return/crios\//i.test(n)}function _T(n=ci()){return/iemobile/i.test(n)}function wT(n=ci()){return/android/i.test(n)}function AT(n=ci()){return/blackberry/i.test(n)}function bT(n=ci()){return/webos/i.test(n)}function hp(n=ci()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function TO(n=ci()){var e;return hp(n)&&!!((e=window.navigator)!=null&&e.standalone)}function vO(){return SN()&&document.documentMode===10}function TT(n=ci()){return hp(n)||wT(n)||bT(n)||AT(n)||/windows phone/i.test(n)||_T(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(n,e=[]){let t;switch(n){case"Browser":t=a_(ci());break;case"Worker":t=`${a_(ci())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Bc}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=h=>new Promise((p,T)=>{try{const w=e(h);p(w)}catch(w){T(w)}});s.onAbort=t,this.queue.push(s);const c=this.queue.length-1;return()=>{this.queue[c]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const c of t)try{c()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CO(n,e={}){return Wa(n,"GET","/v2/passwordPolicy",Ko(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IO=6;class NO{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??IO,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,c=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),c&&(t.meetsMaxPasswordLength=e.length<=c)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let c=0;c<e.length;c++)s=e.charAt(c),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,c,h){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=c)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(e,t,s,c){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=c,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new o_(this),this.idTokenSubscription=new o_(this),this.beforeStateQueue=new SO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=uT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=c.sdkClientVersion,this._persistenceManagerAvailable=new Promise(h=>this._resolvePersistenceManagerAvailable=h)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ka(t)),this._initializationPromise=this.queue(async()=>{var s,c,h;if(!this._deleted&&(this.persistenceManager=await wc.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((c=this._popupRedirectResolver)!=null&&c._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((h=this.currentUser)==null?void 0:h.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Td(this,{idToken:e}),s=await Ds._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var h;if(Qi(this.app)){const p=this.app.settings.authIdToken;return p?new Promise(T=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(p).then(T,T))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,c=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const p=(h=this.redirectUser)==null?void 0:h._redirectEventId,T=s==null?void 0:s._redirectEventId,w=await this.tryRedirectSignIn(e);(!p||p===T)&&(w!=null&&w.user)&&(s=w.user,c=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(s)}catch(p){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(p))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return dt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await vd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=lO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qi(this.app))return Promise.reject(Js(this));const t=e?Tr(e):null;return t&&dt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&dt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qi(this.app)?Promise.reject(Js(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qi(this.app)?Promise.reject(Js(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ka(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await CO(this),t=new NO(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new sh("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await bO(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ka(e)||this._popupRedirectResolver;dt(t,this,"argument-error"),this.redirectPersistenceManager=await wc.create(this,[ka(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,c){if(this._deleted)return()=>{};const h=typeof t=="function"?t:t.next.bind(t);let p=!1;const T=this._isInitialized?Promise.resolve():this._initializationPromise;if(dt(T,this,"internal-error"),T.then(()=>{p||h(this.currentUser)}),typeof t=="function"){const w=e.addObserver(t,s,c);return()=>{p=!0,w()}}else{const w=e.addObserver(t);return()=>{p=!0,w()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return dt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var c;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((c=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:c.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(Qi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&sO(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Qo(n){return Tr(n)}class o_{constructor(e){this.auth=e,this.observer=null,this.addObserver=PN(t=>this.observer=t)}get next(){return dt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let i0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function OO(n){i0=n}function ST(n){return i0.loadJS(n)}function DO(){return i0.recaptchaEnterpriseScript}function MO(){return i0.gapiScript}function PO(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class LO{constructor(){this.enterprise=new kO}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class kO{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const BO="recaptcha-enterprise",CT="NO_RECAPTCHA";class UO{constructor(e){this.type=BO,this.auth=Qo(e)}async verify(e="verify",t=!1){async function s(h){if(!t){if(h.tenantId==null&&h._agentRecaptchaConfig!=null)return h._agentRecaptchaConfig.siteKey;if(h.tenantId!=null&&h._tenantRecaptchaConfigs[h.tenantId]!==void 0)return h._tenantRecaptchaConfigs[h.tenantId].siteKey}return new Promise(async(p,T)=>{mO(h,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(w=>{if(w.recaptchaKey===void 0)T(new Error("recaptcha Enterprise site key undefined"));else{const E=new gO(w);return h.tenantId==null?h._agentRecaptchaConfig=E:h._tenantRecaptchaConfigs[h.tenantId]=E,p(E.siteKey)}}).catch(w=>{T(w)})})}function c(h,p,T){const w=window.grecaptcha;n_(w)?w.enterprise.ready(()=>{w.enterprise.execute(h,{action:e}).then(E=>{p(E)}).catch(()=>{p(CT)})}):T(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new LO().execute("siteKey",{action:"verify"}):new Promise((h,p)=>{s(this.auth).then(T=>{if(!t&&n_(window.grecaptcha))c(T,h,p);else{if(typeof window>"u"){p(new Error("RecaptchaVerifier is only supported in browser"));return}let w=DO();w.length!==0&&(w+=T),ST(w).then(()=>{c(T,h,p)}).catch(E=>{p(E)})}}).catch(T=>{p(T)})})}}async function l_(n,e,t,s=!1,c=!1){const h=new UO(n);let p;if(c)p=CT;else try{p=await h.verify(t)}catch{p=await h.verify(t,!0)}const T={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in T){const w=T.phoneEnrollmentInfo.phoneNumber,E=T.phoneEnrollmentInfo.recaptchaToken;Object.assign(T,{phoneEnrollmentInfo:{phoneNumber:w,recaptchaToken:E,captchaResponse:p,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in T){const w=T.phoneSignInInfo.recaptchaToken;Object.assign(T,{phoneSignInInfo:{recaptchaToken:w,captchaResponse:p,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return T}return s?Object.assign(T,{captchaResp:p}):Object.assign(T,{captchaResponse:p}),Object.assign(T,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(T,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),T}async function Jg(n,e,t,s,c){var h;if((h=n._getRecaptchaConfig())!=null&&h.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const p=await l_(n,e,t,t==="getOobCode");return s(n,p)}else return s(n,e).catch(async p=>{if(p.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const T=await l_(n,e,t,t==="getOobCode");return s(n,T)}else return Promise.reject(p)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VO(n,e){const t=wm(n,"auth");if(t.isInitialized()){const c=t.getImmediate(),h=t.getOptions();if(Al(h,e??{}))return c;Ps(c,"already-initialized")}return t.initialize({options:e})}function jO(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(ka);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function FO(n,e,t){const s=Qo(n);dt(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const c=!1,h=IT(e),{host:p,port:T}=zO(e),w=T===null?"":`:${T}`,E={url:`${h}//${p}${w}/`},C=Object.freeze({host:p,port:T,protocol:h.replace(":",""),options:Object.freeze({disableWarnings:c})});if(!s._canInitEmulator){dt(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),dt(Al(E,s.config.emulator)&&Al(C,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=E,s.emulatorConfig=C,s.settings.appVerificationDisabledForTesting=!0,kc(p)?(wA(`${h}//${p}${w}`),AA("Auth",!0)):HO()}function IT(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function zO(n){const e=IT(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",c=/^(\[[^\]]+\])(:|$)/.exec(s);if(c){const h=c[1];return{host:h,port:c_(s.substr(h.length+1))}}else{const[h,p]=s.split(":");return{host:h,port:c_(p)}}}function c_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function HO(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return La("not implemented")}_getIdTokenResponse(e){return La("not implemented")}_linkToIdToken(e,t){return La("not implemented")}_getReauthenticationResolver(e){return La("not implemented")}}async function GO(n,e){return Wa(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qO(n,e){return yh(n,"POST","/v1/accounts:signInWithPassword",Ko(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YO(n,e){return yh(n,"POST","/v1/accounts:signInWithEmailLink",Ko(n,e))}async function XO(n,e){return yh(n,"POST","/v1/accounts:signInWithEmailLink",Ko(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh extends fp{constructor(e,t,s,c=null){super("password",s),this._email=e,this._password=t,this._tenantId=c}static _fromEmailAndPassword(e,t){return new nh(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new nh(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jg(e,t,"signInWithPassword",qO);case"emailLink":return YO(e,{email:this._email,oobCode:this._password});default:Ps(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jg(e,s,"signUpPassword",GO);case"emailLink":return XO(e,{idToken:t,email:this._email,oobCode:this._password});default:Ps(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ac(n,e){return yh(n,"POST","/v1/accounts:signInWithIdp",Ko(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO="http://localhost";class Sl extends fp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Sl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ps("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:c,...h}=t;if(!s||!c)return null;const p=new Sl(s,c);return p.idToken=h.idToken||void 0,p.accessToken=h.accessToken||void 0,p.secret=h.secret,p.nonce=h.nonce,p.pendingToken=h.pendingToken||null,p}_getIdTokenResponse(e){const t=this.buildRequest();return Ac(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Ac(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ac(e,t)}buildRequest(){const e={requestUri:WO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ah(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KO(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function QO(n){const e=Nu(Ru(n)).link,t=e?Nu(Ru(e)).deep_link_id:null,s=Nu(Ru(n)).deep_link_id;return(s?Nu(Ru(s)).link:null)||s||t||e||n}class dp{constructor(e){const t=Nu(Ru(e)),s=t.apiKey??null,c=t.oobCode??null,h=KO(t.mode??null);dt(s&&c&&h,"argument-error"),this.apiKey=s,this.operation=h,this.code=c,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=QO(e);try{return new dp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(){this.providerId=Hc.PROVIDER_ID}static credential(e,t){return nh._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=dp.parseLink(t);return dt(s,"argument-error"),nh._fromEmailAndCode(e,s.code,s.tenantId)}}Hc.PROVIDER_ID="password";Hc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Hc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh extends NT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So extends Eh{constructor(){super("facebook.com")}static credential(e){return Sl._fromParams({providerId:So.PROVIDER_ID,signInMethod:So.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return So.credentialFromTaggedObject(e)}static credentialFromError(e){return So.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return So.credential(e.oauthAccessToken)}catch{return null}}}So.FACEBOOK_SIGN_IN_METHOD="facebook.com";So.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co extends Eh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Sl._fromParams({providerId:Co.PROVIDER_ID,signInMethod:Co.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Co.credentialFromTaggedObject(e)}static credentialFromError(e){return Co.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Co.credential(t,s)}catch{return null}}}Co.GOOGLE_SIGN_IN_METHOD="google.com";Co.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io extends Eh{constructor(){super("github.com")}static credential(e){return Sl._fromParams({providerId:Io.PROVIDER_ID,signInMethod:Io.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Io.credentialFromTaggedObject(e)}static credentialFromError(e){return Io.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Io.credential(e.oauthAccessToken)}catch{return null}}}Io.GITHUB_SIGN_IN_METHOD="github.com";Io.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No extends Eh{constructor(){super("twitter.com")}static credential(e,t){return Sl._fromParams({providerId:No.PROVIDER_ID,signInMethod:No.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return No.credentialFromTaggedObject(e)}static credentialFromError(e){return No.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return No.credential(t,s)}catch{return null}}}No.TWITTER_SIGN_IN_METHOD="twitter.com";No.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RT(n,e){return yh(n,"POST","/v1/accounts:signUp",Ko(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,c=!1){const h=await Ds._fromIdTokenResponse(e,s,c),p=u_(s);return new Ga({user:h,providerId:p,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const c=u_(s);return new Ga({user:e,providerId:c,_tokenResponse:s,operationType:t})}}function u_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZO(n){var c;if(Qi(n.app))return Promise.reject(Js(n));const e=Qo(n);if(await e._initializationPromise,(c=e.currentUser)!=null&&c.isAnonymous)return new Ga({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await RT(e,{returnSecureToken:!0}),s=await Ga._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd extends Ya{constructor(e,t,s,c){super(t.code,t.message),this.operationType=s,this.user=c,Object.setPrototypeOf(this,Sd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,c){return new Sd(e,t,s,c)}}function OT(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(h=>{throw h.code==="auth/multi-factor-auth-required"?Sd._fromErrorAndOperation(n,h,e,s):h})}async function JO(n,e,t=!1){const s=await Oc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ga._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $O(n,e,t=!1){const{auth:s}=n;if(Qi(s.app))return Promise.reject(Js(s));const c="reauthenticate";try{const h=await Oc(n,OT(s,c,e,n),t);dt(h.idToken,s,"internal-error");const p=up(h.idToken);dt(p,s,"internal-error");const{sub:T}=p;return dt(n.uid===T,s,"user-mismatch"),Ga._forOperation(n,c,h)}catch(h){throw(h==null?void 0:h.code)==="auth/user-not-found"&&Ps(s,"user-mismatch"),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DT(n,e,t=!1){if(Qi(n.app))return Promise.reject(Js(n));const s="signIn",c=await OT(n,s,e),h=await Ga._fromIdTokenResponse(n,s,c);return t||await n._updateCurrentUser(h.user),h}async function e5(n,e){return DT(Qo(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MT(n){const e=Qo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function t5(n,e,t){if(Qi(n.app))return Promise.reject(Js(n));const s=Qo(n),p=await Jg(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",RT).catch(w=>{throw w.code==="auth/password-does-not-meet-requirements"&&MT(n),w}),T=await Ga._fromIdTokenResponse(s,"signIn",p);return await s._updateCurrentUser(T.user),T}function pg(n,e,t){return Qi(n.app)?Promise.reject(Js(n)):e5(Tr(n),Hc.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&MT(n),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n5(n,e){return Wa(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r5(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const s=Tr(n),h={idToken:await s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},p=await Oc(s,n5(s.auth,h));s.displayName=p.displayName||null,s.photoURL=p.photoUrl||null;const T=s.providerData.find(({providerId:w})=>w==="password");T&&(T.displayName=s.displayName,T.photoURL=s.photoURL),await s._updateTokensIfNecessary(p)}function i5(n,e,t,s){return Tr(n).onIdTokenChanged(e,t,s)}function s5(n,e,t){return Tr(n).beforeAuthStateChanged(e,t)}const Cd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Cd,"1"),this.storage.removeItem(Cd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a5=1e3,o5=10;class LT extends PT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=TT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),c=this.localCache[t];s!==c&&e(t,c,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((p,T,w)=>{this.notifyListeners(p,w)});return}const s=e.key;t?this.detachListener():this.stopPolling();const c=()=>{const p=this.storage.getItem(s);!t&&this.localCache[s]===p||this.notifyListeners(s,p)},h=this.storage.getItem(s);vO()&&h!==e.newValue&&e.newValue!==e.oldValue?setTimeout(c,o5):c()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const c of Array.from(s))c(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},a5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}LT.type="LOCAL";const l5=LT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT extends PT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}kT.type="SESSION";const BT=kT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c5(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(c=>c.isListeningto(e));if(t)return t;const s=new s0(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:c,data:h}=t.data,p=this.handlersMap[c];if(!(p!=null&&p.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:c});const T=Array.from(p).map(async E=>E(t.origin,h)),w=await c5(T);t.ports[0].postMessage({status:"done",eventId:s,eventType:c,response:w})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}s0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const c=typeof MessageChannel<"u"?new MessageChannel:null;if(!c)throw new Error("connection_unavailable");let h,p;return new Promise((T,w)=>{const E=gp("",20);c.port1.start();const C=setTimeout(()=>{w(new Error("unsupported_event"))},s);p={messageChannel:c,onMessage(I){const M=I;if(M.data.eventId===E)switch(M.data.status){case"ack":clearTimeout(C),h=setTimeout(()=>{w(new Error("timeout"))},3e3);break;case"done":clearTimeout(h),T(M.data.response);break;default:clearTimeout(C),clearTimeout(h),w(new Error("invalid_response"));break}}},this.handlers.add(p),c.port1.addEventListener("message",p.onMessage),this.target.postMessage({eventType:e,eventId:E,data:t},[c.port2])}).finally(()=>{p&&this.removeMessageHandler(p)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $s(){return window}function h5(n){$s().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(){return typeof $s().WorkerGlobalScope<"u"&&typeof $s().importScripts=="function"}async function f5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function d5(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function g5(){return UT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT="firebaseLocalStorageDb",m5=1,Id="firebaseLocalStorage",jT="fbase_key";class _h{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function a0(n,e){return n.transaction([Id],e?"readwrite":"readonly").objectStore(Id)}function p5(){const n=indexedDB.deleteDatabase(VT);return new _h(n).toPromise()}function $g(){const n=indexedDB.open(VT,m5);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Id,{keyPath:jT})}catch(c){t(c)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Id)?e(s):(s.close(),await p5(),e(await $g()))})})}async function h_(n,e,t){const s=a0(n,!0).put({[jT]:e,value:t});return new _h(s).toPromise()}async function x5(n,e){const t=a0(n,!1).get(e),s=await new _h(t).toPromise();return s===void 0?null:s.value}function f_(n,e){const t=a0(n,!0).delete(e);return new _h(t).toPromise()}const y5=800,E5=3;class FT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $g(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>E5)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return UT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=s0._getInstance(g5()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await f5(),!this.activeServiceWorker)return;this.sender=new u5(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||d5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $g();return await h_(e,Cd,"1"),await f_(e,Cd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>h_(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>x5(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>f_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(c=>{const h=a0(c,!1).getAll();return new _h(h).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:c,value:h}of e)s.add(c),JSON.stringify(this.localCache[c])!==JSON.stringify(h)&&(this.notifyListeners(c,h),t.push(c));for(const c of Object.keys(this.localCache))this.localCache[c]&&!s.has(c)&&(this.notifyListeners(c,null),t.push(c));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const c of Array.from(s))c(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),y5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}FT.type="LOCAL";const _5=FT;new xh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w5(n,e){return e?ka(e):(dt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp extends fp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ac(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ac(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ac(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function A5(n){return DT(n.auth,new mp(n),n.bypassAuthState)}function b5(n){const{auth:e,user:t}=n;return dt(t,e,"internal-error"),$O(t,new mp(n),n.bypassAuthState)}async function T5(n){const{auth:e,user:t}=n;return dt(t,e,"internal-error"),JO(t,new mp(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e,t,s,c,h=!1){this.auth=e,this.resolver=s,this.user=c,this.bypassAuthState=h,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:c,tenantId:h,error:p,type:T}=e;if(p){this.reject(p);return}const w={auth:this.auth,requestUri:t,sessionId:s,tenantId:h||void 0,postBody:c||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(T)(w))}catch(E){this.reject(E)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return A5;case"linkViaPopup":case"linkViaRedirect":return T5;case"reauthViaPopup":case"reauthViaRedirect":return b5;default:Ps(this.auth,"internal-error")}}resolve(e){Ha(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ha(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v5=new xh(2e3,1e4);class gc extends zT{constructor(e,t,s,c,h){super(e,t,c,h),this.provider=s,this.authWindow=null,this.pollId=null,gc.currentPopupAction&&gc.currentPopupAction.cancel(),gc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return dt(e,this.auth,"internal-error"),e}async onExecution(){Ha(this.filter.length===1,"Popup operations only handle one event");const e=gp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Zs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Zs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,gc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,v5.get())};e()}}gc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S5="pendingRedirect",Jf=new Map;class C5 extends zT{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Jf.get(this.auth._key());if(!e){try{const s=await I5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Jf.set(this.auth._key(),e)}return this.bypassAuthState||Jf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function I5(n,e){const t=O5(e),s=R5(n);if(!await s._isAvailable())return!1;const c=await s._get(t)==="true";return await s._remove(t),c}function N5(n,e){Jf.set(n._key(),e)}function R5(n){return ka(n._redirectPersistence)}function O5(n){return Zf(S5,n.config.apiKey,n.name)}async function D5(n,e,t=!1){if(Qi(n.app))return Promise.reject(Js(n));const s=Qo(n),c=w5(s,e),p=await new C5(s,c,t).execute();return p&&!t&&(delete p.user._redirectEventId,await s._persistUserIfCurrent(p.user),await s._setRedirectUser(null,e)),p}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M5=600*1e3;class P5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!L5(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!HT(e)){const c=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(Zs(this.auth,c))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=M5&&this.cachedEventUids.clear(),this.cachedEventUids.has(d_(e))}saveEventToCache(e){this.cachedEventUids.add(d_(e)),this.lastProcessedEventTime=Date.now()}}function d_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function HT({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function L5(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return HT(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k5(n,e={}){return Wa(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,U5=/^https?/;async function V5(n){if(n.config.emulator)return;const{authorizedDomains:e}=await k5(n);for(const t of e)try{if(j5(t))return}catch{}Ps(n,"unauthorized-domain")}function j5(n){const e=Qg(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const p=new URL(n);return p.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&p.hostname===s}if(!U5.test(t))return!1;if(B5.test(n))return s===n;const c=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+c+"|"+c+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F5=new xh(3e4,6e4);function g_(){const n=$s().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function z5(n){return new Promise((e,t)=>{var c,h,p;function s(){g_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{g_(),t(Zs(n,"network-request-failed"))},timeout:F5.get()})}if((h=(c=$s().gapi)==null?void 0:c.iframes)!=null&&h.Iframe)e(gapi.iframes.getContext());else if((p=$s().gapi)!=null&&p.load)s();else{const T=PO("iframefcb");return $s()[T]=()=>{gapi.load?s():t(Zs(n,"network-request-failed"))},ST(`${MO()}?onload=${T}`).catch(w=>t(w))}}).catch(e=>{throw $f=null,e})}let $f=null;function H5(n){return $f=$f||z5(n),$f}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G5=new xh(5e3,15e3),q5="__/auth/iframe",Y5="emulator/auth/iframe",X5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},W5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function K5(n){const e=n.config;dt(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?cp(e,Y5):`https://${n.config.authDomain}/${q5}`,s={apiKey:e.apiKey,appName:n.name,v:Bc},c=W5.get(n.config.apiHost);c&&(s.eid=c);const h=n._getFrameworks();return h.length&&(s.fw=h.join(",")),`${t}?${ah(s).slice(1)}`}async function Q5(n){const e=await H5(n),t=$s().gapi;return dt(t,n,"internal-error"),e.open({where:document.body,url:K5(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:X5,dontclear:!0},s=>new Promise(async(c,h)=>{await s.restyle({setHideOnLeave:!1});const p=Zs(n,"network-request-failed"),T=$s().setTimeout(()=>{h(p)},G5.get());function w(){$s().clearTimeout(T),c(s)}s.ping(w).then(w,()=>{h(p)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},J5=500,$5=600,eD="_blank",tD="http://localhost";class m_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function nD(n,e,t,s=J5,c=$5){const h=Math.max((window.screen.availHeight-c)/2,0).toString(),p=Math.max((window.screen.availWidth-s)/2,0).toString();let T="";const w={...Z5,width:s.toString(),height:c.toString(),top:h,left:p},E=ci().toLowerCase();t&&(T=ET(E)?eD:t),xT(E)&&(e=e||tD,w.scrollbars="yes");const C=Object.entries(w).reduce((M,[B,X])=>`${M}${B}=${X},`,"");if(TO(E)&&T!=="_self")return rD(e||"",T),new m_(null);const I=window.open(e||"",T,C);dt(I,n,"popup-blocked");try{I.focus()}catch{}return new m_(I)}function rD(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD="__/auth/handler",sD="emulator/auth/handler",aD=encodeURIComponent("fac");async function p_(n,e,t,s,c,h){dt(n.config.authDomain,n,"auth-domain-config-required"),dt(n.config.apiKey,n,"invalid-api-key");const p={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:Bc,eventId:c};if(e instanceof NT){e.setDefaultLanguage(n.languageCode),p.providerId=e.providerId||"",MN(e.getCustomParameters())||(p.customParameters=JSON.stringify(e.getCustomParameters()));for(const[C,I]of Object.entries({}))p[C]=I}if(e instanceof Eh){const C=e.getScopes().filter(I=>I!=="");C.length>0&&(p.scopes=C.join(","))}n.tenantId&&(p.tid=n.tenantId);const T=p;for(const C of Object.keys(T))T[C]===void 0&&delete T[C];const w=await n._getAppCheckToken(),E=w?`#${aD}=${encodeURIComponent(w)}`:"";return`${oD(n)}?${ah(T).slice(1)}${E}`}function oD({config:n}){return n.emulator?cp(n,sD):`https://${n.authDomain}/${iD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xg="webStorageSupport";class lD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=BT,this._completeRedirectFn=D5,this._overrideRedirectResult=N5}async _openPopup(e,t,s,c){var p;Ha((p=this.eventManagers[e._key()])==null?void 0:p.manager,"_initialize() not called before _openPopup()");const h=await p_(e,t,s,Qg(),c);return nD(e,h,gp())}async _openRedirect(e,t,s,c){await this._originValidation(e);const h=await p_(e,t,s,Qg(),c);return h5(h),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:c,promise:h}=this.eventManagers[t];return c?Promise.resolve(c):(Ha(h,"If manager is not set, promise should be"),h)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await Q5(e),s=new P5(e);return t.register("authEvent",c=>(dt(c==null?void 0:c.authEvent,e,"invalid-auth-event"),{status:s.onEvent(c.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(xg,{type:xg},c=>{var p;const h=(p=c==null?void 0:c[0])==null?void 0:p[xg];h!==void 0&&t(!!h),Ps(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=V5(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return TT()||yT()||hp()}}const cD=lD;var x_="@firebase/auth",y_="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){dt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hD(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fD(n){Tc(new bl("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),c=e.getProvider("heartbeat"),h=e.getProvider("app-check-internal"),{apiKey:p,authDomain:T}=s.options;dt(p&&!p.includes(":"),"invalid-api-key",{appName:s.name});const w={apiKey:p,authDomain:T,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vT(n)},E=new RO(s,c,h,w);return jO(E,t),E},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Tc(new bl("auth-internal",e=>{const t=Qo(e.getProvider("auth").getImmediate());return(s=>new uD(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Po(x_,y_,hD(n)),Po(x_,y_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD=300,gD=_A("authIdTokenMaxAge")||dD;let E_=null;const mD=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>gD)return;const c=t==null?void 0:t.token;E_!==c&&(E_=c,await fetch(n,{method:c?"POST":"DELETE",headers:c?{Authorization:`Bearer ${c}`}:{}}))};function pD(n=SA()){const e=wm(n,"auth");if(e.isInitialized())return e.getImmediate();const t=VO(n,{popupRedirectResolver:cD,persistence:[_5,l5,BT]}),s=_A("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const h=new URL(s,location.origin);if(location.origin===h.origin){const p=mD(h.toString());s5(t,p,()=>p(t.currentUser)),i5(t,T=>p(T))}}const c=yA("auth");return c&&FO(t,`http://${c}`),t}function xD(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}OO({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=c=>{const h=Zs("internal-error");h.customData=c,t(h)},s.type="text/javascript",s.charset="UTF-8",xD().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fD("Browser");const yD={apiKey:"AIzaSyCH_rXgZIgy7R03m2Oiyzze9LVKoTISaVA",authDomain:"workshop-36cbe.firebaseapp.com",projectId:"workshop-36cbe",storageBucket:"workshop-36cbe.firebasestorage.app",messagingSenderId:"742601440632",appId:"1:742601440632:web:48e380f7e1441494ba9c8d"};let Dc;try{Dc=vA(yD)}catch(n){console.error("Firebase init failed:",n),Dc={name:"[Placeholder]"}}const At=Dc.name!=="[Placeholder]"?z8(Dc):null,yl=Dc.name!=="[Placeholder]"?pD(Dc):null;var ea=(n=>(n.STUDENT="STUDENT",n.ADMIN="ADMIN",n.GUEST="GUEST",n))(ea||{});const Uo=[{name:"",threshold:0,color:"bg-slate-400",icon:""},{name:"",threshold:500,color:"bg-blue-400",icon:""},{name:"",threshold:2e3,color:"bg-green-500",icon:""},{name:"",threshold:5e3,color:"bg-purple-500",icon:""},{name:"",threshold:1e4,color:"bg-orange-500",icon:""},{name:"",threshold:25e3,color:"bg-yellow-500",icon:""}],pp={USER:"workshop_user"},em=["","","","","","","",""],yg=[{text:"",author:" (William Butler Yeats)"},{text:"",author:" (Winston Churchill)"},{text:" 20  80 ",author:" (Henry Ford)"},{text:"",author:" (Nelson Mandela)"},{text:"",author:" (Steve Jobs)"},{text:"",author:""},{text:"",author:""},{text:"",author:" (Aristotle)"},{text:"",author:" (Thomas Edison)"},{text:"",author:" (Pablo Picasso)"}],Nt={STUDENTS:"students",MISSIONS:"missions",PRODUCTS:"products",WISHES:"wishes",REDEMPTIONS:"redemptions",CHALLENGE_HISTORY:"challengeHistory",POINT_REASONS:"pointReasons",MISSION_SUBMISSIONS:"missionSubmissions",PRODUCT_CATEGORIES:"productCategories",BANNERS:"banners"},Lf={id:"user_admin",name:"",points:0,totalEarned:0,role:ea.ADMIN,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Admin",isApproved:!0},__={id:"user_guest",name:"",points:0,totalEarned:0,role:ea.GUEST,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Guest",isApproved:!0},w_=async()=>{try{return(await r0(ns(At,Nt.STUDENTS))).docs.map(e=>({...e.data(),id:e.id}))}catch(n){return console.error("Error fetching students:",n),[]}},tm=async n=>{try{await Wo(An(At,Nt.STUDENTS,n.id),n)}catch(e){console.error("Error saving student:",e),console.error("")}},ED=async n=>{try{const e=An(At,Nt.STUDENTS,n);await Ol(e,{isApproved:!0})}catch(e){console.error("Error approving student:",e)}},_D=async(n,e)=>{try{await op(At,async t=>{const s=An(At,Nt.STUDENTS,n),c=await t.get(s);if(!c.exists())throw new Error("");const h=c.data();t.update(s,{points:h.points+e,totalEarned:e>0?h.totalEarned+e:h.totalEarned})})}catch(t){throw console.error("Error issuing points (Transaction):",t),t}},wD=async n=>{try{await zc(An(At,Nt.STUDENTS,n))}catch(e){console.error("Error deleting student:",e)}},A_=()=>{const n=localStorage.getItem(pp.USER);return n?JSON.parse(n):null},Pa=async n=>{localStorage.setItem(pp.USER,JSON.stringify(n)),n.role===ea.STUDENT&&await tm(n)},AD=async()=>{localStorage.removeItem(pp.USER),await yl.signOut()},bD=async(n,e)=>{try{return await op(At,async s=>{const c=An(At,Nt.STUDENTS,n.id),h=An(At,Nt.PRODUCTS,e.id),p=An(At,Nt.REDEMPTIONS,`red_${Date.now()}`),T=await s.get(c),w=await s.get(h);if(!T.exists())throw new Error("");if(!w.exists())throw new Error("");const E=T.data(),C=w.data();if(E.points<C.price)return{success:!1,message:""};if(C.stock<=0)return{success:!1,message:""};s.update(c,{points:E.points-C.price}),s.update(h,{stock:C.stock-1});const I={id:p.id,userId:n.id,productId:e.id,productName:e.name,pointsSpent:e.price,timestamp:Date.now(),status:"pending",qrCodeData:`AUTH_WORKSHOP_${Date.now()}_${e.id}`};return s.set(p,I),{success:!0,message:""}})}catch(t){return console.error("Redemption transaction failed:",t),{success:!1,message:`: ${t.message}`}}},TD=async(n,e)=>{try{const t=An(At,Nt.REDEMPTIONS,n);await Ol(t,{status:e})}catch(t){console.error("Error updating redemption status:",t)}},vD=async n=>{try{const e=`cat_${Date.now()}`;await Wo(An(At,Nt.PRODUCT_CATEGORIES,e),{id:e,name:n})}catch(e){console.error("Error adding category:",e)}},SD=async n=>{try{await zc(An(At,Nt.PRODUCT_CATEGORIES,n))}catch(e){console.error("Error deleting category:",e)}},GT=n=>Xa(ns(At,Nt.PRODUCT_CATEGORIES),e=>{const t=e.docs.map(s=>({...s.data(),id:s.id}));n(t)}),CD=async n=>{try{await Wo(An(At,Nt.MISSIONS,n.id),n)}catch(e){console.error("Error adding mission:",e)}},ID=async n=>{try{const e=An(At,Nt.MISSIONS,n),t=await oT(e);if(t.exists()){const s=t.data();await Ol(e,{isActive:!s.isActive})}}catch(e){console.error("Error toggling mission:",e)}},ND=async(n,e)=>{try{const t=new Date;t.setHours(0,0,0,0);const s=e0(ns(At,Nt.CHALLENGE_HISTORY),Gu("userId","==",n),Gu("missionId","==",e),Gu("timestamp",">=",t.getTime()),Q8(1));return!(await r0(s)).empty}catch(t){return console.error("Error checking mission completion:",t),!1}},RD=async n=>{try{const e=new Date;e.setHours(0,0,0,0);const t=e0(ns(At,Nt.CHALLENGE_HISTORY),Gu("userId","==",n),Gu("timestamp",">=",e.getTime())),s=await r0(t),c=new Set;return s.forEach(h=>{const p=h.data();p.missionId&&c.add(p.missionId)}),c}catch(e){return console.error("Error fetching today completed missions:",e),new Set}},OD=async n=>{try{if(await ND(n.userId,n.missionId)){console.warn("Mission already completed today");return}const t=new Date;if(t.setHours(0,0,0,0),(await r0(e0(ns(At,Nt.MISSION_SUBMISSIONS)))).docs.find(h=>{const p=h.data();return p.userId===n.userId&&p.missionId===n.missionId&&p.status==="pending"&&p.timestamp>=t.getTime()})){console.warn("Mission submission already pending today");return}await Wo(An(At,Nt.MISSION_SUBMISSIONS,n.id),n)}catch(e){console.error("Error submitting mission:",e)}},DD=async n=>{try{await op(At,async e=>{const t=An(At,Nt.MISSION_SUBMISSIONS,n),s=await e.get(t);if(!s.exists())throw new Error("");const c=s.data();if(c.status!=="pending")throw new Error("");e.update(t,{status:"approved"});const h=`h_${Date.now()}`,p=An(At,Nt.CHALLENGE_HISTORY,h);e.set(p,{id:h,userId:c.userId,missionId:c.missionId,timestamp:Date.now()});const T=An(At,Nt.STUDENTS,c.userId),w=await e.get(T);if(w.exists()){const E=w.data();e.update(T,{points:E.points+c.points,totalEarned:E.totalEarned+c.points})}})}catch(e){throw console.error("Error approving mission (Transaction):",e),e}},MD=async n=>{try{const e=An(At,Nt.MISSION_SUBMISSIONS,n);await Ol(e,{status:"rejected"})}catch(e){console.error("Error rejecting mission:",e)}},qT=n=>Xa(ns(At,Nt.MISSION_SUBMISSIONS),e=>{n(e.docs.map(t=>({...t.data(),id:t.id})))}),PD=async n=>{try{await Wo(An(At,Nt.PRODUCTS,n.id),n)}catch(e){console.error("Error adding product:",e)}},LD=async(n,e)=>{try{const t=An(At,Nt.PRODUCTS,n);await Ol(t,{stock:Math.max(0,e)})}catch(t){console.error("Error updating product stock:",t)}},kD=async n=>{try{await zc(An(At,Nt.PRODUCTS,n))}catch(e){console.error("Error deleting product:",e)}},BD=async n=>{try{await Wo(An(At,Nt.POINT_REASONS,n.id),n)}catch(e){console.error("Error adding point reason:",e)}},UD=async n=>{try{await zc(An(At,Nt.POINT_REASONS,n))}catch(e){console.error("Error deleting point reason:",e)}},VD=n=>Xa(ns(At,Nt.POINT_REASONS),e=>{const t=e.docs.map(s=>({...s.data(),id:s.id}));n(t)}),jD=async n=>{try{await Wo(An(At,Nt.WISHES,n.id),n)}catch(e){console.error("Error adding wish:",e)}},FD=async(n,e)=>{try{const t=An(At,Nt.WISHES,n);await Ol(t,e)}catch(t){console.error("Error updating wish:",t)}},zD=async n=>{try{await zc(An(At,Nt.WISHES,n))}catch(e){console.error("Error deleting wish:",e)}},HD=async(n,e)=>{try{const t=An(At,Nt.WISHES,n),s=await oT(t);if(s.exists()){const h=s.data().likedBy||[];if(h.includes(e)){console.error("");return}await Ol(t,{likedBy:[...h,e]})}}catch(t){console.error("Error liking wish:",t)}},GD=n=>Xa(ns(At,Nt.STUDENTS),e=>{const t=e.docs.map(s=>({...s.data(),id:s.id}));n(t)},e=>{console.error("Error in subscribeToStudents:",e)}),YT=n=>Xa(ns(At,Nt.MISSIONS),e=>{const t=e.docs.map(s=>({...s.data(),id:s.id}));n(t)},e=>console.error("Error subscribing to missions:",e)),XT=n=>Xa(ns(At,Nt.PRODUCTS),e=>{const t=e.docs.map(s=>({...s.data(),id:s.id}));n(t)},e=>{console.error("Error subscribing to products:",e),console.error("")}),WT=n=>Xa(ns(At,Nt.WISHES),e=>{const t=e.docs.map(s=>({...s.data(),id:s.id}));n(t)},e=>console.error("Error subscribing to wishes:",e)),KT=n=>Xa(ns(At,Nt.REDEMPTIONS),e=>{const t=e.docs.map(s=>{const c=s.data();return{id:s.id,status:"pending",pointsSpent:0,productName:"",timestamp:Date.now(),userId:"unknown",qrCodeData:"",...c}});n(t)},e=>{console.error("Error subscribing to redemptions:",e)}),qD=async(n,e="",t="center",s="h-48",c="md:h-72")=>{try{const h={id:`banner_${Date.now()}`,imageUrl:n,tag:e,active:!0,timestamp:Date.now(),objectPosition:t,mobileHeight:s,desktopHeight:c};await Wo(An(At,Nt.BANNERS,h.id),h)}catch(h){throw console.error("Error adding banner:",h),h}},YD=async n=>{try{await zc(An(At,Nt.BANNERS,n))}catch(e){throw console.error("Error deleting banner:",e),e}},xp=n=>{const e=e0(ns(At,Nt.BANNERS));return Xa(e,t=>{const s=t.docs.map(c=>c.data());s.sort((c,h)=>h.timestamp-c.timestamp),n(s)},t=>{console.error("Error subscribing to banners:",t)})},XD=({user:n,onUserUpdate:e})=>{const{showAlert:t}=Lc(),[s,c]=ne.useState(!1),h=T=>{var C;const w=(C=T.target.files)==null?void 0:C[0];if(!w)return;if(w.size>500*1024){t(" 500KB ","error");return}if(!w.type.startsWith("image/")){t(" JPG  PNG ","error");return}c(!0);const E=new FileReader;E.onloadend=async()=>{try{const I=E.result,M={...n,avatar:I};await Pa(M),e(),t("","success")}catch(I){console.error("Error updating avatar:",I),t("","error")}finally{c(!1)}},E.readAsDataURL(w)},p=async()=>{if(confirm(""))try{const T=`https://api.dicebear.com/7.x/avataaars/svg?seed=${n.name}&mouth=smile&eyebrows=defaultNatural&eyes=default`,w={...n,avatar:T};await Pa(w),e(),t("","success")}catch(T){console.error("Error resetting avatar:",T),t("","error")}};return v.jsxs("div",{className:"space-y-8 pb-20 animate-in fade-in duration-500",children:[v.jsxs("header",{children:[v.jsxs("h1",{className:"text-3xl font-black text-slate-800 flex items-center gap-3",children:[v.jsx(id,{className:"text-indigo-500"}),""]}),v.jsx("p",{className:"text-slate-500 mt-1 font-medium",children:""})]}),v.jsx("div",{className:"bg-white rounded-[2.5rem] p-8 border border-slate-100 shadow-xl shadow-slate-200/50",children:v.jsxs("div",{className:"flex flex-col items-center gap-6",children:[v.jsxs("div",{className:"relative group",children:[v.jsx("div",{className:"absolute inset-0 bg-indigo-500 rounded-full blur-xl opacity-20 group-hover:opacity-40 transition-opacity"}),v.jsx("img",{src:n.avatar,alt:n.name,className:"w-40 h-40 rounded-full border-4 border-white shadow-2xl object-cover relative z-10"}),v.jsxs("label",{className:"absolute bottom-0 right-0 z-20 cursor-pointer",children:[v.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:h,disabled:s}),v.jsx("div",{className:"bg-slate-800 text-white p-3 rounded-2xl hover:bg-slate-700 transition-colors shadow-lg hover:scale-105 active:scale-95",children:v.jsx(Tg,{size:20})})]})]}),v.jsxs("div",{className:"text-center",children:[v.jsx("h2",{className:"text-2xl font-black text-slate-800",children:n.name}),v.jsxs("div",{className:"flex items-center justify-center gap-2 mt-1",children:[v.jsx("span",{className:"text-slate-400 font-bold text-sm uppercase tracking-wider",children:n.role==="ADMIN"?"":""}),v.jsxs("span",{className:"px-2 py-0.5 rounded-lg bg-indigo-100 text-indigo-700 text-xs font-black",children:["Lv.",Math.floor(n.totalEarned/500)+1]})]})]}),v.jsxs("div",{className:"w-full max-w-sm space-y-4 pt-6 mt-6 border-t border-slate-50",children:[v.jsxs("label",{className:"block w-full cursor-pointer",children:[v.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:h,disabled:s}),v.jsxs("div",{className:"w-full bg-indigo-50 hover:bg-indigo-100 text-indigo-600 font-bold py-4 rounded-2xl transition-all flex items-center justify-center gap-2 border-2 border-transparent hover:border-indigo-200",children:[v.jsx(Cg,{size:20}),s?"...":""]})]}),v.jsxs("button",{onClick:p,className:"w-full bg-slate-50 hover:bg-slate-100 text-slate-500 font-bold py-4 rounded-2xl transition-all flex items-center justify-center gap-2",children:[v.jsx(C3,{size:20}),""]})]}),v.jsx("div",{className:"bg-amber-50 rounded-2xl p-4 text-xs font-bold text-amber-600/80 leading-relaxed text-center max-w-sm",children:"  500KB "})]})})]})};var WD={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var b_;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(b_||(b_={}));var T_;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(T_||(T_={}));var v_;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(v_||(v_={}));var S_;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(S_||(S_={}));var C_;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(C_||(C_={}));var I_;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(I_||(I_={}));var N_;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(N_||(N_={}));var R_;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(R_||(R_={}));var O_;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(O_||(O_={}));var D_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(D_||(D_={}));var M_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(M_||(M_={}));var P_;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(P_||(P_={}));var L_;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(L_||(L_={}));var k_;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(k_||(k_={}));var B_;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(B_||(B_={}));var U_;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(U_||(U_={}));var V_;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(V_||(V_={}));var j_;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(j_||(j_={}));var F_;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(F_||(F_={}));var z_;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(z_||(z_={}));var H_;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(H_||(H_={}));var G_;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(G_||(G_={}));var q_;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(q_||(q_={}));var Y_;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Y_||(Y_={}));var X_;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(X_||(X_={}));var W_;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(W_||(W_={}));var K_;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(K_||(K_={}));var Q_;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Q_||(Q_={}));var Z_;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(Z_||(Z_={}));var J_;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(J_||(J_={}));var $_;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})($_||($_={}));var ew;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(ew||(ew={}));var tw;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(tw||(tw={}));var nw;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(nw||(nw={}));var rw;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(rw||(rw={}));var iw;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(iw||(iw={}));var sw;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(sw||(sw={}));var aw;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(aw||(aw={}));var ow;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(ow||(ow={}));var lw;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(lw||(lw={}));var cw;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(cw||(cw={}));var uw;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(uw||(uw={}));var hw;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(hw||(hw={}));var fw;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(fw||(fw={}));var dw;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(dw||(dw={}));var gw;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(gw||(gw={}));var mw;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(mw||(mw={}));var pw;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(pw||(pw={}));var xw;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(xw||(xw={}));var yw;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(yw||(yw={}));var Ew;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(Ew||(Ew={}));var _w;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(_w||(_w={}));var ww;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(ww||(ww={}));var Aw;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(Aw||(Aw={}));var bw;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(bw||(bw={}));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Tw;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Tw||(Tw={}));function Nd(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(n);c<s.length;c++)e.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(n,s[c])&&(t[s[c]]=n[s[c]]);return t}function vw(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Xn(n){return this instanceof Xn?(this.v=n,this):new Xn(n)}function Yu(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),c,h=[];return c=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),T("next"),T("throw"),T("return",p),c[Symbol.asyncIterator]=function(){return this},c;function p(B){return function(X){return Promise.resolve(X).then(B,I)}}function T(B,X){s[B]&&(c[B]=function($){return new Promise(function(q,_e){h.push([B,$,q,_e])>1||w(B,$)})},X&&(c[B]=X(c[B])))}function w(B,X){try{E(s[B](X))}catch($){M(h[0][3],$)}}function E(B){B.value instanceof Xn?Promise.resolve(B.value.v).then(C,I):M(h[0][2],B)}function C(B){w("next",B)}function I(B){w("throw",B)}function M(B,X){B(X),h.shift(),h.length&&w(h[0][0],h[0][1])}}function bc(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof vw=="function"?vw(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(h){t[h]=n[h]&&function(p){return new Promise(function(T,w){p=n[h](p),c(T,w,p.done,p.value)})}}function c(h,p,T,w){Promise.resolve(w).then(function(E){h({value:E,done:T})},p)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let QT=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return QT=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^t()&15>>+s/4).toString(16))};const KD=()=>QT();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nm(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const rm=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bs extends Error{}class wi extends bs{constructor(e,t,s,c){super(`${wi.makeMessage(e,t,s)}`),this.status=e,this.headers=c,this.error=t}static makeMessage(e,t,s){const c=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):s;return e&&c?`${e} ${c}`:e?`${e} status code (no body)`:c||"(no status code or body)"}static generate(e,t,s,c){if(!e||!c)return new o0({message:s,cause:rm(t)});const h=t;return e===400?new JT(e,h,s,c):e===401?new $T(e,h,s,c):e===403?new ev(e,h,s,c):e===404?new tv(e,h,s,c):e===409?new nv(e,h,s,c):e===422?new rv(e,h,s,c):e===429?new iv(e,h,s,c):e>=500?new sv(e,h,s,c):new wi(e,h,s,c)}}class im extends wi{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class o0 extends wi{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class ZT extends o0{constructor({message:e}={}){super({message:e??"Request timed out."})}}class JT extends wi{}class $T extends wi{}class ev extends wi{}class tv extends wi{}class nv extends wi{}class rv extends wi{}class iv extends wi{}class sv extends wi{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const QD=/^[a-z][a-z0-9+.-]*:/i,ZD=n=>QD.test(n);let sm=n=>(sm=Array.isArray,sm(n));const JD=sm;let $D=JD;const Sw=$D;function eM(n){if(!n)return!0;for(const e in n)return!1;return!0}function tM(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const nM=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new bs(`${n} must be an integer`);if(e<0)throw new bs(`${n} must be a positive integer`);return e},rM=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const iM=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fc="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sM(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const aM=()=>{var n,e,t,s,c;const h=sM();if(h==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":fc,"X-Stainless-OS":Iw(Deno.build.os),"X-Stainless-Arch":Cw(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":fc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(h==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":fc,"X-Stainless-OS":Iw((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":Cw((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(c=globalThis.process.version)!==null&&c!==void 0?c:"unknown"};const p=oM();return p?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":fc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${p.browser}`,"X-Stainless-Runtime-Version":p.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":fc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function oM(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const s=t.exec(navigator.userAgent);if(s){const c=s[1]||0,h=s[2]||0,p=s[3]||0;return{browser:e,version:`${c}.${h}.${p}`}}}return null}const Cw=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",Iw=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let kf;const lM=()=>kf??(kf=aM());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cM(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function av(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function uM(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return av({start(){},async pull(t){const{done:s,value:c}=await e.next();s?t.close():t.enqueue(c)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function ov(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function hM(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const s=n.getReader(),c=s.cancel();s.releaseLock(),await c}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fM=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lv=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Eg(n,e,t){return lv(),new File(n,e??"unknown_file",t)}function dM(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const gM=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cv=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",mM=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&cv(n),pM=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function xM(n,e,t){if(lv(),n=await n,mM(n))return n instanceof File?n:Eg([await n.arrayBuffer()],n.name);if(pM(n)){const c=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),Eg(await am(c),e,t)}const s=await am(n);if(e||(e=dM(n)),!(t!=null&&t.type)){const c=s.find(h=>typeof h=="object"&&"type"in h&&h.type);typeof c=="string"&&(t=Object.assign(Object.assign({},t),{type:c}))}return Eg(s,e,t)}async function am(n){var e,t,s,c,h;let p=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)p.push(n);else if(cv(n))p.push(n instanceof Blob?n:await n.arrayBuffer());else if(gM(n))try{for(var T=!0,w=bc(n),E;E=await w.next(),e=E.done,!e;T=!0){c=E.value,T=!1;const C=c;p.push(...await am(C))}}catch(C){t={error:C}}finally{try{!T&&!e&&(s=w.return)&&await s.call(w)}finally{if(t)throw t.error}}else{const C=(h=n==null?void 0:n.constructor)===null||h===void 0?void 0:h.name;throw new Error(`Unexpected data type: ${typeof n}${C?`; constructor: ${C}`:""}${yM(n)}`)}return p}function yM(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uv{constructor(e){this._client=e}}uv._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hv(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Nw=Object.freeze(Object.create(null)),EM=(n=hv)=>(function(t,...s){if(t.length===1)return t[0];let c=!1;const h=[],p=t.reduce((C,I,M)=>{var B,X,$;/[?#]/.test(I)&&(c=!0);const q=s[M];let _e=(c?encodeURIComponent:n)(""+q);return M!==s.length&&(q==null||typeof q=="object"&&q.toString===(($=Object.getPrototypeOf((X=Object.getPrototypeOf((B=q.hasOwnProperty)!==null&&B!==void 0?B:Nw))!==null&&X!==void 0?X:Nw))===null||$===void 0?void 0:$.toString))&&(_e=q+"",h.push({start:C.length+I.length,length:_e.length,error:`Value of type ${Object.prototype.toString.call(q).slice(8,-1)} is not a valid path parameter`})),C+I+(M===s.length?"":_e)},""),T=p.split(/[?#]/,1)[0],w=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let E;for(;(E=w.exec(T))!==null;)h.push({start:E.index,length:E[0].length,error:`Value "${E[0]}" can't be safely passed as a path parameter`});if(h.sort((C,I)=>C.start-I.start),h.length>0){let C=0;const I=h.reduce((M,B)=>{const X=" ".repeat(B.start-C),$="^".repeat(B.length);return C=B.start+B.length,M+X+$},"");throw new bs(`Path parameters result in path with invalid segments:
${h.map(M=>M.error).join(`
`)}
${p}
${I}`)}return p}),Bf=EM(hv);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fv extends uv{create(e,t){var s;const{api_version:c=this._client.apiVersion}=e,h=Nd(e,["api_version"]);if("model"in h&&"agent_config"in h)throw new bs("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in h&&"generation_config"in h)throw new bs("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Bf`/${c}/interactions`,Object.assign(Object.assign({body:h},t),{stream:(s=e.stream)!==null&&s!==void 0?s:!1}))}delete(e,t={},s){const{api_version:c=this._client.apiVersion}=t??{};return this._client.delete(Bf`/${c}/interactions/${e}`,s)}cancel(e,t={},s){const{api_version:c=this._client.apiVersion}=t??{};return this._client.post(Bf`/${c}/interactions/${e}/cancel`,s)}get(e,t={},s){var c;const h=t??{},{api_version:p=this._client.apiVersion}=h,T=Nd(h,["api_version"]);return this._client.get(Bf`/${p}/interactions/${e}`,Object.assign(Object.assign({query:T},s),{stream:(c=t==null?void 0:t.stream)!==null&&c!==void 0?c:!1}))}}fv._key=Object.freeze(["interactions"]);class dv extends fv{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _M(n){let e=0;for(const c of n)e+=c.length;const t=new Uint8Array(e);let s=0;for(const c of n)t.set(c,s),s+=c.length;return t}let Uf;function yp(n){let e;return(Uf??(e=new globalThis.TextEncoder,Uf=e.encode.bind(e)))(n)}let Vf;function Rw(n){let e;return(Vf??(e=new globalThis.TextDecoder,Vf=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class l0{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?yp(e):e;this.buffer=_M([this.buffer,t]);const s=[];let c;for(;(c=wM(this.buffer,this.carriageReturnIndex))!=null;){if(c.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=c.index;continue}if(this.carriageReturnIndex!=null&&(c.index!==this.carriageReturnIndex+1||c.carriage)){s.push(Rw(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const h=this.carriageReturnIndex!==null?c.preceding-1:c.preceding,p=Rw(this.buffer.subarray(0,h));s.push(p),this.buffer=this.buffer.subarray(c.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}l0.NEWLINE_CHARS=new Set([`
`,"\r"]);l0.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function wM(n,e){for(let c=e??0;c<n.length;c++){if(n[c]===10)return{preceding:c,index:c+1,carriage:!1};if(n[c]===13)return{preceding:c,index:c+1,carriage:!0}}return null}function AM(n){for(let s=0;s<n.length-1;s++){if(n[s]===10&&n[s+1]===10||n[s]===13&&n[s+1]===13)return s+2;if(n[s]===13&&n[s+1]===10&&s+3<n.length&&n[s+2]===13&&n[s+3]===10)return s+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Rd={off:0,error:200,warn:300,info:400,debug:500},Ow=(n,e,t)=>{if(n){if(tM(Rd,n))return n;Ei(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Rd))}`)}};function Lu(){}function jf(n,e,t){return!e||Rd[n]>Rd[t]?Lu:e[n].bind(e)}const bM={error:Lu,warn:Lu,info:Lu,debug:Lu};let Dw=new WeakMap;function Ei(n){var e;const t=n.logger,s=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return bM;const c=Dw.get(t);if(c&&c[0]===s)return c[1];const h={error:jf("error",t,s),warn:jf("warn",t,s),info:jf("info",t,s),debug:jf("debug",t,s)};return Dw.set(t,[s,h]),h}const El=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mc{constructor(e,t,s){this.iterator=e,this.controller=t,this.client=s}static fromSSEResponse(e,t,s){let c=!1;const h=s?Ei(s):console;function p(){return Yu(this,arguments,function*(){var w,E,C,I;if(c)throw new bs("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");c=!0;let M=!1;try{try{for(var B=!0,X=bc(TM(e,t)),$;$=yield Xn(X.next()),w=$.done,!w;B=!0){I=$.value,B=!1;const q=I;if(!M)if(q.data.startsWith("[DONE]")){M=!0;continue}else try{yield yield Xn(JSON.parse(q.data))}catch(_e){throw h.error("Could not parse message into JSON:",q.data),h.error("From chunk:",q.raw),_e}}}catch(q){E={error:q}}finally{try{!B&&!w&&(C=X.return)&&(yield Xn(C.call(X)))}finally{if(E)throw E.error}}M=!0}catch(q){if(nm(q))return yield Xn(void 0);throw q}finally{M||t.abort()}})}return new mc(p,t,s)}static fromReadableStream(e,t,s){let c=!1;function h(){return Yu(this,arguments,function*(){var w,E,C,I;const M=new l0,B=ov(e);try{for(var X=!0,$=bc(B),q;q=yield Xn($.next()),w=q.done,!w;X=!0){I=q.value,X=!1;const _e=I;for(const ae of M.decode(_e))yield yield Xn(ae)}}catch(_e){E={error:_e}}finally{try{!X&&!w&&(C=$.return)&&(yield Xn(C.call($)))}finally{if(E)throw E.error}}for(const _e of M.flush())yield yield Xn(_e)})}function p(){return Yu(this,arguments,function*(){var w,E,C,I;if(c)throw new bs("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");c=!0;let M=!1;try{try{for(var B=!0,X=bc(h()),$;$=yield Xn(X.next()),w=$.done,!w;B=!0){I=$.value,B=!1;const q=I;M||q&&(yield yield Xn(JSON.parse(q)))}}catch(q){E={error:q}}finally{try{!B&&!w&&(C=X.return)&&(yield Xn(C.call(X)))}finally{if(E)throw E.error}}M=!0}catch(q){if(nm(q))return yield Xn(void 0);throw q}finally{M||t.abort()}})}return new mc(p,t,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],s=this.iterator(),c=h=>({next:()=>{if(h.length===0){const p=s.next();e.push(p),t.push(p)}return h.shift()}});return[new mc(()=>c(e),this.controller,this.client),new mc(()=>c(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return av({async start(){t=e[Symbol.asyncIterator]()},async pull(s){try{const{value:c,done:h}=await t.next();if(h)return s.close();const p=yp(JSON.stringify(c)+`
`);s.enqueue(p)}catch(c){s.error(c)}},async cancel(){var s;await((s=t.return)===null||s===void 0?void 0:s.call(t))}})}}function TM(n,e){return Yu(this,arguments,function*(){var s,c,h,p;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new bs("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new bs("Attempted to iterate over a response with no body");const T=new SM,w=new l0,E=ov(n.body);try{for(var C=!0,I=bc(vM(E)),M;M=yield Xn(I.next()),s=M.done,!s;C=!0){p=M.value,C=!1;const B=p;for(const X of w.decode(B)){const $=T.decode(X);$&&(yield yield Xn($))}}}catch(B){c={error:B}}finally{try{!C&&!s&&(h=I.return)&&(yield Xn(h.call(I)))}finally{if(c)throw c.error}}for(const B of w.flush()){const X=T.decode(B);X&&(yield yield Xn(X))}})}function vM(n){return Yu(this,arguments,function*(){var t,s,c,h;let p=new Uint8Array;try{for(var T=!0,w=bc(n),E;E=yield Xn(w.next()),t=E.done,!t;T=!0){h=E.value,T=!1;const C=h;if(C==null)continue;const I=C instanceof ArrayBuffer?new Uint8Array(C):typeof C=="string"?yp(C):C;let M=new Uint8Array(p.length+I.length);M.set(p),M.set(I,p.length),p=M;let B;for(;(B=AM(p))!==-1;)yield yield Xn(p.slice(0,B)),p=p.slice(B)}}catch(C){s={error:C}}finally{try{!T&&!t&&(c=w.return)&&(yield Xn(c.call(w)))}finally{if(s)throw s.error}}p.length>0&&(yield yield Xn(p))})}class SM{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const h={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],h}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,s,c]=CM(e,":");return c.startsWith(" ")&&(c=c.substring(1)),t==="event"?this.event=c:t==="data"&&this.data.push(c),null}}function CM(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function IM(n,e){const{response:t,requestLogID:s,retryOfRequestLogID:c,startTime:h}=e,p=await(async()=>{var T;if(e.options.stream)return Ei(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):mc.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const w=t.headers.get("content-type"),E=(T=w==null?void 0:w.split(";")[0])===null||T===void 0?void 0:T.trim();return(E==null?void 0:E.includes("application/json"))||(E==null?void 0:E.endsWith("+json"))?await t.json():await t.text()})();return Ei(n).debug(`[${s}] response parsed`,El({retryOfRequestLogID:c,url:t.url,status:t.status,body:p,durationMs:Date.now()-h})),p}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ep extends Promise{constructor(e,t,s=IM){super(c=>{c(null)}),this.responsePromise=t,this.parseResponse=s,this.client=e}_thenUnwrap(e){return new Ep(this.client,this.responsePromise,async(t,s)=>e(await this.parseResponse(t,s),s))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gv=Symbol("brand.privateNullableHeaders");function*NM(n){if(!n)return;if(gv in n){const{values:s,nulls:c}=n;yield*s.entries();for(const h of c)yield[h,null];return}let e=!1,t;n instanceof Headers?t=n.entries():Sw(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let s of t){const c=s[0];if(typeof c!="string")throw new TypeError("expected header name to be a string");const h=Sw(s[1])?s[1]:[s[1]];let p=!1;for(const T of h)T!==void 0&&(e&&!p&&(p=!0,yield[c,null]),yield[c,T])}}const Cu=n=>{const e=new Headers,t=new Set;for(const s of n){const c=new Set;for(const[h,p]of NM(s)){const T=h.toLowerCase();c.has(T)||(e.delete(h),c.add(T)),p===null?(e.delete(h),t.add(T)):(e.append(h,p),t.delete(T))}}return{[gv]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _g=n=>{var e,t,s,c,h,p;if(typeof globalThis.process<"u")return(s=(t=(e=WD)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(p=(h=(c=globalThis.Deno.env)===null||c===void 0?void 0:c.get)===null||h===void 0?void 0:h.call(c,n))===null||p===void 0?void 0:p.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var mv;class c0{constructor(e){var t,s,c,h,p,T,w,{baseURL:E=_g("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:C=(t=_g("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:I="v1beta"}=e,M=Nd(e,["baseURL","apiKey","apiVersion"]);const B=Object.assign(Object.assign({apiKey:C,apiVersion:I},M),{baseURL:E||"https://generativelanguage.googleapis.com"});this.baseURL=B.baseURL,this.timeout=(s=B.timeout)!==null&&s!==void 0?s:c0.DEFAULT_TIMEOUT,this.logger=(c=B.logger)!==null&&c!==void 0?c:console;const X="warn";this.logLevel=X,this.logLevel=(p=(h=Ow(B.logLevel,"ClientOptions.logLevel",this))!==null&&h!==void 0?h:Ow(_g("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&p!==void 0?p:X,this.fetchOptions=B.fetchOptions,this.maxRetries=(T=B.maxRetries)!==null&&T!==void 0?T:2,this.fetch=(w=B.fetch)!==null&&w!==void 0?w:cM(),this.encoder=fM,this._options=B,this.apiKey=C,this.apiVersion=I,this.clientAdapter=B.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=Cu([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return Cu([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Cu([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,s])=>typeof s<"u").map(([t,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(t)}=`;throw new bs(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${fc}`}defaultIdempotencyKey(){return`stainless-node-retry-${KD()}`}makeStatusError(e,t,s,c){return wi.generate(e,t,s,c)}buildURL(e,t,s){const c=!this.baseURLOverridden()&&s||this.baseURL,h=ZD(e)?new URL(e):new URL(c+(c.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),p=this.defaultQuery();return eM(p)||(t=Object.assign(Object.assign({},p),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(h.search=this.stringifyQuery(t)),h.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:s}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,s){return this.request(Promise.resolve(s).then(c=>Object.assign({method:e,path:t},c)))}request(e,t=null){return new Ep(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,s){var c,h,p;const T=await e,w=(c=T.maxRetries)!==null&&c!==void 0?c:this.maxRetries;t==null&&(t=w),await this.prepareOptions(T);const{req:E,url:C,timeout:I}=await this.buildRequest(T,{retryCount:w-t});await this.prepareRequest(E,{url:C,options:T});const M="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),B=s===void 0?"":`, retryOf: ${s}`,X=Date.now();if(Ei(this).debug(`[${M}] sending request`,El({retryOfRequestLogID:s,method:T.method,url:C,options:T,headers:E.headers})),!((h=T.signal)===null||h===void 0)&&h.aborted)throw new im;const $=new AbortController,q=await this.fetchWithTimeout(C,E,I,$).catch(rm),_e=Date.now();if(q instanceof globalThis.Error){const K=`retrying, ${t} attempts remaining`;if(!((p=T.signal)===null||p===void 0)&&p.aborted)throw new im;const le=nm(q)||/timed? ?out/i.test(String(q)+("cause"in q?String(q.cause):""));if(t)return Ei(this).info(`[${M}] connection ${le?"timed out":"failed"} - ${K}`),Ei(this).debug(`[${M}] connection ${le?"timed out":"failed"} (${K})`,El({retryOfRequestLogID:s,url:C,durationMs:_e-X,message:q.message})),this.retryRequest(T,t,s??M);throw Ei(this).info(`[${M}] connection ${le?"timed out":"failed"} - error; no more retries left`),Ei(this).debug(`[${M}] connection ${le?"timed out":"failed"} (error; no more retries left)`,El({retryOfRequestLogID:s,url:C,durationMs:_e-X,message:q.message})),le?new ZT:new o0({cause:q})}const ae=`[${M}${B}] ${E.method} ${C} ${q.ok?"succeeded":"failed"} with status ${q.status} in ${_e-X}ms`;if(!q.ok){const K=await this.shouldRetry(q);if(t&&K){const V=`retrying, ${t} attempts remaining`;return await hM(q.body),Ei(this).info(`${ae} - ${V}`),Ei(this).debug(`[${M}] response error (${V})`,El({retryOfRequestLogID:s,url:q.url,status:q.status,headers:q.headers,durationMs:_e-X})),this.retryRequest(T,t,s??M,q.headers)}const le=K?"error; no more retries left":"error; not retryable";Ei(this).info(`${ae} - ${le}`);const Re=await q.text().catch(V=>rm(V).message),De=rM(Re),j=De?void 0:Re;throw Ei(this).debug(`[${M}] response error (${le})`,El({retryOfRequestLogID:s,url:q.url,status:q.status,headers:q.headers,message:j,durationMs:Date.now()-X})),this.makeStatusError(q.status,De,j,q.headers)}return Ei(this).info(ae),Ei(this).debug(`[${M}] response start`,El({retryOfRequestLogID:s,url:q.url,status:q.status,headers:q.headers,durationMs:_e-X})),{response:q,options:T,controller:$,requestLogID:M,retryOfRequestLogID:s,startTime:X}}async fetchWithTimeout(e,t,s,c){const h=t||{},{signal:p,method:T}=h,w=Nd(h,["signal","method"]);p&&p.addEventListener("abort",()=>c.abort());const E=setTimeout(()=>c.abort(),s),C=globalThis.ReadableStream&&w.body instanceof globalThis.ReadableStream||typeof w.body=="object"&&w.body!==null&&Symbol.asyncIterator in w.body,I=Object.assign(Object.assign(Object.assign({signal:c.signal},C?{duplex:"half"}:{}),{method:"GET"}),w);T&&(I.method=T.toUpperCase());try{return await this.fetch.call(void 0,e,I)}finally{clearTimeout(E)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,s,c){var h;let p;const T=c==null?void 0:c.get("retry-after-ms");if(T){const E=parseFloat(T);Number.isNaN(E)||(p=E)}const w=c==null?void 0:c.get("retry-after");if(w&&!p){const E=parseFloat(w);Number.isNaN(E)?p=Date.parse(w)-Date.now():p=E*1e3}if(!(p&&0<=p&&p<60*1e3)){const E=(h=e.maxRetries)!==null&&h!==void 0?h:this.maxRetries;p=this.calculateDefaultRetryTimeoutMillis(t,E)}return await iM(p),this.makeRequest(e,t-1,s)}calculateDefaultRetryTimeoutMillis(e,t){const h=t-e,p=Math.min(.5*Math.pow(2,h),8),T=1-Math.random()*.25;return p*T*1e3}async buildRequest(e,{retryCount:t=0}={}){var s,c,h;const p=Object.assign({},e),{method:T,path:w,query:E,defaultBaseURL:C}=p,I=this.buildURL(w,E,C);"timeout"in p&&nM("timeout",p.timeout),p.timeout=(s=p.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:M,body:B}=this.buildBody({options:p}),X=await this.buildHeaders({options:e,method:T,bodyHeaders:M,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:T,headers:X},p.signal&&{signal:p.signal}),globalThis.ReadableStream&&B instanceof globalThis.ReadableStream&&{duplex:"half"}),B&&{body:B}),(c=this.fetchOptions)!==null&&c!==void 0?c:{}),(h=p.fetchOptions)!==null&&h!==void 0?h:{}),url:I,timeout:p.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:s,retryCount:c}){let h={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),h[this.idempotencyHeader]=e.idempotencyKey);const p=await this.authHeaders(e);let T=Cu([h,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(c)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),lM()),this._options.defaultHeaders,s,e.headers,p]);return this.validateHeaders(T),T.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=Cu([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:uM(e)}:this.encoder({body:e,headers:s})}}c0.DEFAULT_TIMEOUT=6e4;class Xr extends c0{constructor(){super(...arguments),this.interactions=new dv(this)}}mv=Xr;Xr.GeminiNextGenAPIClient=mv;Xr.GeminiNextGenAPIClientError=bs;Xr.APIError=wi;Xr.APIConnectionError=o0;Xr.APIConnectionTimeoutError=ZT;Xr.APIUserAbortError=im;Xr.NotFoundError=tv;Xr.ConflictError=nv;Xr.RateLimitError=iv;Xr.BadRequestError=JT;Xr.AuthenticationError=$T;Xr.InternalServerError=sv;Xr.PermissionDeniedError=ev;Xr.UnprocessableEntityError=rv;Xr.toFile=xM;Xr.Interactions=dv;const RM=()=>null,OM=async(n,e)=>{const t=yg[Math.floor(Math.random()*yg.length)],s=`${t.text} ${t.author}`;try{const c=RM();return c&&(await c.models.generateContent({model:"gemini-2.0-flash-exp",contents:`
        
        
        - ${n.name}
        - ${e.name}
        - ${n.points}
        - ${n.totalEarned}

        
        ${yg.map(p=>`${p.text}-- ${p.author}`).join(`
`)}

        30-60
        
      `})).text()||s}catch(c){return console.error("Gemini Error:",c),s}},DM=({user:n,rank:e,onUserUpdate:t})=>{var z,V;const{showAlert:s}=Lc(),[c,h]=ne.useState("..."),[p,T]=ne.useState([]),[w,E]=ne.useState([]),[C,I]=ne.useState(null),[M,B]=ne.useState(new Set),[X,$]=ne.useState(!1),[q,_e]=ne.useState([]),[ae,K]=ne.useState(0),le=Uo[Uo.indexOf(e)+1]||null,Re=le?Math.min(100,(n.totalEarned-e.threshold)/(le.threshold-e.threshold)*100):100,De=Math.floor(n.totalEarned/500)+1;ne.useEffect(()=>{(async()=>{const fe=await OM(n,e);h(fe)})();const Q=YT(async fe=>{const me=fe.filter(Ye=>Ye.isActive);T(me);const be=await RD(n.id);B(be)}),Z=qT(fe=>{const me=new Date;me.setHours(0,0,0,0),E(fe.filter(be=>be.userId===n.id&&be.timestamp>=me.getTime()))}),W=xp(_e);let Je;return q.length>1&&(Je=setInterval(()=>{K(fe=>(fe+1)%q.length)},5e3)),()=>{Q(),Z(),W(),Je&&clearInterval(Je)}},[n.id,e,q.length]);const j=async Y=>{if(C)return;if(Y.deadline&&Y.deadline<Date.now()){s("","error");return}if(w.some(Z=>Z.missionId===Y.id&&Z.status==="pending")){s("","info");return}I(Y.id);try{await OD({id:`sub_${Date.now()}`,userId:n.id,userName:n.name,missionId:Y.id,missionTitle:Y.title,points:Y.points,timestamp:Date.now(),status:"pending"}),s("","success")}catch(Z){console.error("Error submitting mission:",Z),s("","error")}finally{I(null)}};return v.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-10 relative",children:[X&&v.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:v.jsxs("div",{className:"bg-white rounded-[2.5rem] max-w-lg w-full p-8 shadow-2xl animate-in zoom-in-95 duration-200 border border-slate-100 relative",children:[v.jsx("button",{onClick:()=>$(!1),className:"absolute top-6 right-6 p-2 bg-slate-100 rounded-full hover:bg-slate-200 transition-colors text-slate-500",children:v.jsx(Oo,{size:20})}),v.jsxs("h3",{className:"text-2xl font-black text-slate-800 mb-6 flex items-center gap-3",children:[v.jsx(Hy,{className:"text-amber-500"}),""]}),v.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto pr-2 custom-scrollbar",children:Uo.map((Y,Q)=>v.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-2xl ${n.totalEarned>=Y.threshold?"bg-indigo-50 border-2 border-indigo-100":"bg-slate-50 border border-slate-100 grayscale opacity-70"}`,children:[v.jsx("div",{className:"text-3xl",children:Y.icon}),v.jsxs("div",{className:"flex-1",children:[v.jsx("h4",{className:"font-bold text-slate-800",children:Y.name}),v.jsxs("p",{className:"text-xs text-slate-500 font-bold mt-0.5",children:[" ",Y.threshold.toLocaleString()," "]})]}),n.totalEarned>=Y.threshold&&v.jsx("div",{className:"bg-indigo-500 text-white p-1 rounded-full",children:v.jsx(Wu,{size:16})})]},Y.name))}),v.jsx("div",{className:"mt-6 text-center",children:v.jsx("p",{className:"text-xs text-slate-400 font-bold",children:""})})]})}),v.jsxs("header",{className:"flex flex-col md:flex-row md:items-start justify-between gap-4",children:[v.jsxs("div",{children:[v.jsxs("h1",{className:"text-3xl font-black text-slate-800 tracking-tight",children:["",n.name,""]}),v.jsxs("p",{className:"text-slate-500 mt-1 italic max-w-xl font-medium",children:['"',c,'"']})]}),v.jsxs("div",{className:"bg-amber-50 border border-amber-100 rounded-2xl px-5 py-3 flex items-center gap-3 self-end md:self-start shadow-sm",children:[v.jsx("div",{className:"bg-amber-500 p-2 rounded-xl text-white shadow-lg shadow-amber-200",children:v.jsx(x3,{size:20})}),v.jsxs("div",{children:[v.jsx("p",{className:"text-[10px] text-amber-700 font-black uppercase tracking-widest",children:""}),v.jsxs("p",{className:"text-2xl font-black text-amber-900 leading-none",children:[n.totalEarned.toLocaleString()," ",v.jsx("span",{className:"text-xs font-bold opacity-60",children:"PTS"})]})]})]})]}),q.length>0&&v.jsxs("div",{className:`relative w-full ${((z=q[ae])==null?void 0:z.mobileHeight)||"h-48"} ${((V=q[ae])==null?void 0:V.desktopHeight)||"md:h-72"} rounded-[3.5rem] overflow-hidden shadow-2xl shadow-indigo-100 group border-4 border-white transition-all duration-500`,children:[v.jsx("div",{className:"flex transition-transform duration-700 ease-in-out h-full",style:{transform:`translateX(-${ae*100}%)`},children:q.map(Y=>v.jsxs("div",{className:"min-w-full h-full relative",children:[v.jsx("img",{src:Y.imageUrl,alt:"banner",className:"w-full h-full object-cover",style:{objectPosition:Y.objectPosition||"center"}}),v.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent flex items-end justify-start p-12",children:v.jsx("div",{className:"mt-auto",children:v.jsx("span",{className:"bg-indigo-600/90 backdrop-blur text-white px-4 py-2 rounded-xl text-xs font-black uppercase tracking-[0.2em] shadow-lg",children:Y.tag||""})})})]},Y.id))}),v.jsx("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 flex gap-3",children:q.map((Y,Q)=>v.jsx("button",{onClick:()=>K(Q),className:`w-2.5 h-2.5 rounded-full transition-all ${ae===Q?"bg-white w-10 shadow-lg":"bg-white/40 hover:bg-white/80"}`},Q))}),v.jsx("button",{onClick:()=>K(Y=>(Y-1+q.length)%q.length),className:"absolute left-6 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/40 backdrop-blur p-4 rounded-full text-white opacity-0 group-hover:opacity-100 transition-all border border-white/10",children:v.jsx(hA,{size:24})}),v.jsx("button",{onClick:()=>K(Y=>(Y+1)%q.length),className:"absolute right-6 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/40 backdrop-blur p-4 rounded-full text-white opacity-0 group-hover:opacity-100 transition-all border border-white/10",children:v.jsx(vg,{size:24})})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[v.jsxs("div",{className:"md:col-span-2 bg-white rounded-[2.5rem] p-10 border border-slate-100 shadow-xl shadow-slate-200/40 relative overflow-hidden",children:[v.jsxs("div",{className:"flex items-center justify-between mb-12",children:[v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[v.jsx("h3",{className:"text-slate-400 text-[10px] font-black uppercase tracking-[0.2em]",children:""}),v.jsx("button",{onClick:()=>$(!0),className:"text-indigo-400 hover:text-indigo-600 transition-colors",title:"",children:v.jsx(dA,{size:14})})]}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("span",{className:"text-4xl filter drop-shadow-md",children:e.icon}),v.jsxs("span",{className:`text-2xl font-black px-6 py-2 rounded-2xl text-white ${e.color} shadow-xl shadow-indigo-100 border-2 border-white/20 flex items-center gap-2`,children:[e.name," ",v.jsxs("span",{className:"text-sm bg-white/20 px-2 py-0.5 rounded-lg border border-white/20",children:["Lv.",De]})]})]})]}),le&&v.jsxs("div",{className:"text-right",children:[v.jsx("h3",{className:"text-slate-400 text-[10px] font-black uppercase tracking-[0.2em] mb-2",children:""}),v.jsxs("div",{className:"flex items-center gap-3 justify-end group",children:[v.jsx("span",{className:"text-lg font-black text-slate-700 group-hover:text-indigo-600 transition-colors",children:le.name}),v.jsx("span",{className:"text-2xl animate-bounce",children:le.icon})]})]})]}),v.jsxs("div",{className:"relative pt-12 pb-6 px-2",children:[v.jsx("div",{className:"h-5 bg-slate-100 rounded-full w-full overflow-hidden border border-slate-200 shadow-inner p-1",children:v.jsx("div",{className:`h-full ${e.color} transition-all duration-1000 ease-out rounded-full relative overflow-hidden`,style:{width:`${Re}%`},children:v.jsx("div",{className:"absolute inset-0 bg-white/20 animate-pulse"})})}),v.jsx("div",{className:"absolute top-0 transition-all duration-1000 ease-out",style:{left:`calc(${Re}% - 30px)`},children:v.jsxs("div",{className:"relative group cursor-pointer",children:[v.jsx("div",{className:"p-1.5 bg-white rounded-full shadow-2xl border border-slate-50 transition-transform group-hover:scale-110 active:scale-95",children:v.jsx("img",{src:n.avatar,className:`w-14 h-14 rounded-full border-4 border-opacity-30 object-cover ${e.color.replace("bg-","border-")}`,alt:"me"})}),v.jsxs("div",{className:`absolute -top-10 left-1/2 -translate-x-1/2 px-3 py-1 rounded-xl text-[11px] font-black text-white shadow-xl ${e.color} whitespace-nowrap`,children:[" ",Math.round(Re),"%"]})]})})]}),v.jsx("p",{className:"text-center text-xs text-slate-400 font-bold mt-8 tracking-wide",children:le?`${le.name} ${le.threshold-n.totalEarned} `:""})]}),v.jsxs("div",{className:"bg-gradient-to-br from-indigo-600 via-indigo-700 to-indigo-900 rounded-[2.5rem] p-10 text-white shadow-2xl shadow-indigo-300 flex flex-col justify-center items-center text-center relative overflow-hidden",children:[v.jsx("div",{className:"absolute -top-10 -right-10 w-40 h-40 bg-white/10 rounded-full blur-3xl"}),v.jsx("div",{className:"absolute -bottom-10 -left-10 w-40 h-40 bg-indigo-500/20 rounded-full blur-3xl"}),v.jsx("div",{className:"w-20 h-20 bg-white/20 backdrop-blur-xl rounded-[2rem] flex items-center justify-center mb-6 border border-white/20 shadow-xl",children:v.jsx(K3,{size:40,className:"text-white drop-shadow-md"})}),v.jsx("h3",{className:"text-indigo-200 text-sm font-black mb-1 uppercase tracking-widest",children:""}),v.jsx("p",{className:"text-6xl font-black mb-4 drop-shadow-lg",children:n.points.toLocaleString()}),v.jsx("div",{className:"px-5 py-1.5 bg-indigo-500/40 backdrop-blur rounded-full text-[10px] font-black tracking-[0.2em] uppercase border border-white/10",children:"SHOPPING POWER"})]})]}),v.jsxs("section",{className:"mt-16",children:[v.jsxs("div",{className:"flex items-center justify-between mb-8",children:[v.jsxs("h2",{className:"text-2xl font-black text-slate-800 flex items-center gap-3",children:[v.jsx(Bu,{className:"text-indigo-500",size:28}),""]}),v.jsx("div",{className:"flex items-center gap-4 text-xs font-bold text-slate-400",children:v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx(H3,{size:12,className:"text-amber-500"})," "]})})]}),v.jsx("div",{className:"grid grid-cols-1 gap-6",children:p.map(Y=>{const Q=M.has(Y.id);return v.jsx("div",{className:`bg-white border-2 border-slate-50 p-8 rounded-[2.5rem] transition-all group relative overflow-hidden ${Q?"opacity-60 grayscale":"shadow-sm hover:shadow-xl"} ${Y.id===C?"animate-pulse":""}`,children:v.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-8",children:[v.jsxs("div",{className:"flex gap-8 items-start",children:[v.jsx("div",{className:`w-20 h-20 rounded-3xl flex items-center justify-center shrink-0 shadow-inner ${Y.type==="normal"?"bg-emerald-50 text-emerald-600":Y.type==="challenge"?"bg-orange-50 text-orange-600":"bg-rose-50 text-rose-600"}`,children:Q?v.jsx(Wu,{size:36}):Y.type==="normal"?v.jsx(Bu,{size:36}):Y.type==="challenge"?v.jsx(i3,{size:36}):v.jsx(Hy,{size:36})}),v.jsxs("div",{children:[v.jsx("div",{className:"flex items-center gap-3 mb-2",children:v.jsx("span",{className:`px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-widest ${Y.type==="normal"?"bg-emerald-100 text-emerald-700":Y.type==="challenge"?"bg-orange-100 text-orange-700":"bg-rose-100 text-rose-700"}`,children:Y.type==="normal"?"":Y.type==="challenge"?"":""})}),v.jsx("h3",{className:"text-2xl font-black text-slate-800 transition-colors",children:Y.title}),v.jsx("p",{className:"text-slate-500 mt-2 leading-relaxed text-lg font-medium max-w-2xl",children:Y.description}),Y.deadline&&v.jsxs("div",{className:`mt-3 flex items-center gap-2 text-sm font-black ${Y.deadline<Date.now()?"text-rose-500":"text-amber-500"}`,children:[v.jsx(yc,{size:16}),Y.deadline<Date.now()?"":` ${new Date(Y.deadline).toLocaleString()}`]})]})]}),v.jsxs("div",{className:"flex flex-col md:items-end gap-6 shrink-0",children:[v.jsxs("div",{className:"flex flex-col items-end",children:[v.jsx("span",{className:"text-xs font-bold text-slate-400 mb-1 uppercase tracking-tighter",children:""}),v.jsxs("div",{className:"flex items-baseline gap-2",children:[v.jsx("span",{className:"text-4xl font-black text-indigo-600 tracking-tighter",children:Y.points}),v.jsx("span",{className:"text-sm font-bold text-slate-400",children:"PTS"})]})]}),v.jsxs("button",{onClick:()=>j(Y),disabled:C!==null||Q||w.some(Z=>Z.missionId===Y.id&&Z.status==="pending")||Y.deadline!==void 0&&Y.deadline<Date.now(),className:`px-10 py-5 rounded-2xl font-black transition-all flex items-center gap-3 shadow-xl ${Q?"bg-slate-200 text-slate-500 cursor-not-allowed shadow-none":w.some(Z=>Z.missionId===Y.id&&Z.status==="pending")?"bg-amber-100 text-amber-600 cursor-not-allowed shadow-none":Y.deadline!==void 0&&Y.deadline<Date.now()?"bg-slate-200 text-slate-400 cursor-not-allowed shadow-none":Y.type==="normal"?"bg-emerald-600 hover:bg-emerald-700 shadow-emerald-100":Y.type==="challenge"?"bg-orange-600 hover:bg-orange-700 shadow-orange-100":"bg-rose-600 hover:bg-rose-700 shadow-rose-100"} text-white text-lg active:scale-95 disabled:active:scale-100`,children:[Q?"":w.some(Z=>Z.missionId===Y.id&&Z.status==="pending")?"":Y.deadline!==void 0&&Y.deadline<Date.now()?"":C===Y.id?"...":"",!Q&&!w.some(Z=>Z.missionId===Y.id&&Z.status==="pending")&&(!Y.deadline||Y.deadline>=Date.now())&&v.jsx(vg,{size:20})]})]})]})},Y.id)})})]})]})},MM=({user:n,onUserUpdate:e})=>{var _e,ae;const{showAlert:t}=Lc(),[s,c]=ne.useState(null),[h,p]=ne.useState("all"),[T,w]=ne.useState([]),[E,C]=ne.useState([]),[I,M]=ne.useState([]),[B,X]=ne.useState(0);ne.useEffect(()=>{if(I.length>1){const K=setInterval(()=>{X(le=>(le+1)%I.length)},5e3);return()=>clearInterval(K)}},[I.length]),ne.useEffect(()=>{const K=XT(De=>{w(De)}),le=GT(De=>{C(De)}),Re=xp(M);return()=>{K(),le(),Re()}},[]);const $=T.filter(K=>h==="all"||K.category===h),q=async()=>{if(n.role==="GUEST"){t("","info");return}if(!s||n.points<s.price||s.stock<=0)return;const K=await bD(n,s);if(K.success){const le={...n,points:n.points-s.price};await Pa(le),e(),c(null),t(` ${K.message} QR Code`,"success")}else t(K.message,"error")};return v.jsxs("div",{className:"space-y-8 pb-20",children:[v.jsxs("header",{children:[v.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:""}),v.jsx("p",{className:"text-slate-500 mt-1",children:""})]}),I.length>0&&v.jsxs("div",{className:`relative w-full ${((_e=I[B])==null?void 0:_e.mobileHeight)||"h-48"} ${((ae=I[B])==null?void 0:ae.desktopHeight)||"md:h-64"} rounded-[2.5rem] overflow-hidden shadow-2xl shadow-indigo-100 group transition-all duration-500`,children:[v.jsx("div",{className:"flex transition-transform duration-700 ease-in-out h-full",style:{transform:`translateX(-${B*100}%)`},children:I.map(K=>v.jsxs("div",{className:"min-w-full h-full relative",children:[v.jsx("img",{src:K.imageUrl,alt:"banner",className:"w-full h-full object-cover",style:{objectPosition:K.objectPosition||"center"}}),v.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent flex items-end p-8",children:v.jsx("div",{className:"mt-auto",children:v.jsx("span",{className:"bg-indigo-600/90 backdrop-blur text-white px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-[0.2em] shadow-lg",children:K.tag||""})})})]},K.id))}),v.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2",children:I.map((K,le)=>v.jsx("button",{onClick:()=>X(le),className:`w-2 h-2 rounded-full transition-all ${B===le?"bg-white w-6":"bg-white/50 hover:bg-white/80"}`},le))}),v.jsx("button",{onClick:()=>X(K=>(K-1+I.length)%I.length),className:"absolute left-4 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/40 backdrop-blur p-2 rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity",children:v.jsx(hA,{size:20})}),v.jsx("button",{onClick:()=>X(K=>(K+1)%I.length),className:"absolute right-4 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/40 backdrop-blur p-2 rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity",children:v.jsx(vg,{size:20})})]}),v.jsxs("div",{className:"flex flex-wrap gap-2",children:[v.jsx("button",{onClick:()=>p("all"),className:`px-6 py-2.5 rounded-2xl text-sm font-bold transition-all ${h==="all"?"bg-indigo-600 text-white shadow-lg shadow-indigo-100":"bg-white text-slate-600 border border-slate-200 hover:border-indigo-300"}`,children:""}),E.map(K=>v.jsx("button",{onClick:()=>p(K.name),className:`px-6 py-2.5 rounded-2xl text-sm font-bold transition-all ${h===K.name?"bg-indigo-600 text-white shadow-lg shadow-indigo-100":"bg-white text-slate-600 border border-slate-200 hover:border-indigo-300"}`,children:K.name},K.id))]}),v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:$.map(K=>{const le=n.points>=K.price,Re=K.stock<=0;return v.jsxs("div",{className:`bg-white rounded-[2rem] border border-slate-100 overflow-hidden shadow-sm hover:shadow-2xl transition-all flex flex-col group ${Re?"opacity-75 grayscale-[0.5]":""}`,children:[v.jsxs("div",{className:"relative h-56 overflow-hidden",children:[v.jsx("img",{src:K.imageUrl,alt:K.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700"}),v.jsx("div",{className:"absolute top-5 left-5",children:v.jsx("span",{className:"bg-white/90 backdrop-blur text-indigo-600 text-[10px] px-3 py-1.5 rounded-full font-black tracking-widest shadow-sm",children:K.category.toUpperCase()})}),Re&&v.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:v.jsx("span",{className:"text-white font-black text-2xl rotate-12 border-4 border-white px-4 py-1",children:"SOLD OUT"})})]}),v.jsxs("div",{className:"p-8 flex flex-col flex-1",children:[v.jsx("div",{className:"flex justify-between items-start mb-2",children:v.jsx("h3",{className:"font-black text-xl text-slate-800 leading-tight",children:K.name})}),v.jsx("p",{className:"text-slate-500 text-sm mb-6 flex-1 leading-relaxed",children:K.description}),v.jsxs("div",{className:"flex items-center gap-2 mb-6 text-slate-400 text-xs font-bold",children:[v.jsx(Sg,{size:14}),v.jsxs("span",{children:["",v.jsxs("span",{className:K.stock<=5?"text-red-500":"text-slate-600",children:[K.stock," "]})]})]}),v.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[v.jsxs("div",{className:"flex items-center gap-1 text-indigo-600",children:[v.jsx("span",{className:"text-2xl font-black",children:K.price.toLocaleString()}),v.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-tighter",children:"pts"})]}),v.jsx("button",{onClick:()=>c(K),disabled:!le||Re,className:`px-6 py-3 rounded-2xl font-black text-sm transition-all shadow-md ${Re?"bg-slate-100 text-slate-400 cursor-not-allowed shadow-none":le?"bg-indigo-600 text-white hover:bg-indigo-700 hover:shadow-indigo-200 active:scale-95":"bg-slate-100 text-slate-400 cursor-not-allowed shadow-none"}`,children:Re?"":""})]})]})]},K.id)})}),s&&v.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:v.jsxs("div",{className:"bg-white rounded-[2.5rem] max-w-md w-full p-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[v.jsxs("div",{className:"flex justify-between items-start mb-8",children:[v.jsx("div",{className:"bg-indigo-50 p-4 rounded-2xl text-indigo-600",children:v.jsx(j3,{size:28})}),v.jsx("button",{onClick:()=>c(null),className:"text-slate-400 hover:text-slate-600 bg-slate-50 p-2 rounded-full",children:v.jsx(Oo,{size:24})})]}),v.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-2",children:""}),v.jsxs("p",{className:"text-slate-500 mb-8 leading-relaxed",children:[" ",v.jsxs("span",{className:"font-black text-indigo-600",children:[s.price," "]}),"  ",v.jsxs("span",{className:"font-black text-slate-800",children:["",s.name,""]})," "]}),v.jsxs("div",{className:"bg-slate-50 rounded-[1.5rem] p-6 mb-8 border border-slate-100",children:[v.jsxs("div",{className:"flex justify-between text-sm mb-3",children:[v.jsx("span",{className:"text-slate-500 font-medium",children:""}),v.jsx("span",{className:"font-bold text-slate-800",children:n.points.toLocaleString()})]}),v.jsxs("div",{className:"flex justify-between text-sm mb-5",children:[v.jsx("span",{className:"text-slate-500 font-medium",children:""}),v.jsxs("span",{className:"font-bold text-red-500",children:["-",s.price.toLocaleString()]})]}),v.jsxs("div",{className:"border-t border-slate-200 pt-5 flex justify-between",children:[v.jsx("span",{className:"font-black text-slate-700 text-lg",children:""}),v.jsx("span",{className:"font-black text-indigo-600 text-2xl",children:(n.points-s.price).toLocaleString()})]})]}),v.jsxs("div",{className:"flex flex-col gap-3",children:[v.jsxs("button",{onClick:q,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-5 rounded-[1.25rem] transition-all shadow-xl shadow-indigo-100 flex items-center justify-center gap-3 text-lg",children:[v.jsx(Iu,{size:24}),""]}),v.jsx("button",{onClick:()=>c(null),className:"w-full bg-white border border-slate-200 text-slate-600 font-black py-4 rounded-[1.25rem] hover:bg-slate-50 transition-all",children:""})]})]})})]})};var PM=Object.defineProperty,Od=Object.getOwnPropertySymbols,pv=Object.prototype.hasOwnProperty,xv=Object.prototype.propertyIsEnumerable,Mw=(n,e,t)=>e in n?PM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,om=(n,e)=>{for(var t in e||(e={}))pv.call(e,t)&&Mw(n,t,e[t]);if(Od)for(var t of Od(e))xv.call(e,t)&&Mw(n,t,e[t]);return n},lm=(n,e)=>{var t={};for(var s in n)pv.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&Od)for(var s of Od(n))e.indexOf(s)<0&&xv.call(n,s)&&(t[s]=n[s]);return t};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Cl;(n=>{const e=class Ut{constructor(w,E,C,I){if(this.version=w,this.errorCorrectionLevel=E,this.modules=[],this.isFunction=[],w<Ut.MIN_VERSION||w>Ut.MAX_VERSION)throw new RangeError("Version value out of range");if(I<-1||I>7)throw new RangeError("Mask value out of range");this.size=w*4+17;let M=[];for(let X=0;X<this.size;X++)M.push(!1);for(let X=0;X<this.size;X++)this.modules.push(M.slice()),this.isFunction.push(M.slice());this.drawFunctionPatterns();const B=this.addEccAndInterleave(C);if(this.drawCodewords(B),I==-1){let X=1e9;for(let $=0;$<8;$++){this.applyMask($),this.drawFormatBits($);const q=this.getPenaltyScore();q<X&&(I=$,X=q),this.applyMask($)}}c(0<=I&&I<=7),this.mask=I,this.applyMask(I),this.drawFormatBits(I),this.isFunction=[]}static encodeText(w,E){const C=n.QrSegment.makeSegments(w);return Ut.encodeSegments(C,E)}static encodeBinary(w,E){const C=n.QrSegment.makeBytes(w);return Ut.encodeSegments([C],E)}static encodeSegments(w,E,C=1,I=40,M=-1,B=!0){if(!(Ut.MIN_VERSION<=C&&C<=I&&I<=Ut.MAX_VERSION)||M<-1||M>7)throw new RangeError("Invalid value");let X,$;for(X=C;;X++){const K=Ut.getNumDataCodewords(X,E)*8,le=p.getTotalBits(w,X);if(le<=K){$=le;break}if(X>=I)throw new RangeError("Data too long")}for(const K of[Ut.Ecc.MEDIUM,Ut.Ecc.QUARTILE,Ut.Ecc.HIGH])B&&$<=Ut.getNumDataCodewords(X,K)*8&&(E=K);let q=[];for(const K of w){t(K.mode.modeBits,4,q),t(K.numChars,K.mode.numCharCountBits(X),q);for(const le of K.getData())q.push(le)}c(q.length==$);const _e=Ut.getNumDataCodewords(X,E)*8;c(q.length<=_e),t(0,Math.min(4,_e-q.length),q),t(0,(8-q.length%8)%8,q),c(q.length%8==0);for(let K=236;q.length<_e;K^=253)t(K,8,q);let ae=[];for(;ae.length*8<q.length;)ae.push(0);return q.forEach((K,le)=>ae[le>>>3]|=K<<7-(le&7)),new Ut(X,E,ae,M)}getModule(w,E){return 0<=w&&w<this.size&&0<=E&&E<this.size&&this.modules[E][w]}getModules(){return this.modules}drawFunctionPatterns(){for(let C=0;C<this.size;C++)this.setFunctionModule(6,C,C%2==0),this.setFunctionModule(C,6,C%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const w=this.getAlignmentPatternPositions(),E=w.length;for(let C=0;C<E;C++)for(let I=0;I<E;I++)C==0&&I==0||C==0&&I==E-1||C==E-1&&I==0||this.drawAlignmentPattern(w[C],w[I]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(w){const E=this.errorCorrectionLevel.formatBits<<3|w;let C=E;for(let M=0;M<10;M++)C=C<<1^(C>>>9)*1335;const I=(E<<10|C)^21522;c(I>>>15==0);for(let M=0;M<=5;M++)this.setFunctionModule(8,M,s(I,M));this.setFunctionModule(8,7,s(I,6)),this.setFunctionModule(8,8,s(I,7)),this.setFunctionModule(7,8,s(I,8));for(let M=9;M<15;M++)this.setFunctionModule(14-M,8,s(I,M));for(let M=0;M<8;M++)this.setFunctionModule(this.size-1-M,8,s(I,M));for(let M=8;M<15;M++)this.setFunctionModule(8,this.size-15+M,s(I,M));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let w=this.version;for(let C=0;C<12;C++)w=w<<1^(w>>>11)*7973;const E=this.version<<12|w;c(E>>>18==0);for(let C=0;C<18;C++){const I=s(E,C),M=this.size-11+C%3,B=Math.floor(C/3);this.setFunctionModule(M,B,I),this.setFunctionModule(B,M,I)}}drawFinderPattern(w,E){for(let C=-4;C<=4;C++)for(let I=-4;I<=4;I++){const M=Math.max(Math.abs(I),Math.abs(C)),B=w+I,X=E+C;0<=B&&B<this.size&&0<=X&&X<this.size&&this.setFunctionModule(B,X,M!=2&&M!=4)}}drawAlignmentPattern(w,E){for(let C=-2;C<=2;C++)for(let I=-2;I<=2;I++)this.setFunctionModule(w+I,E+C,Math.max(Math.abs(I),Math.abs(C))!=1)}setFunctionModule(w,E,C){this.modules[E][w]=C,this.isFunction[E][w]=!0}addEccAndInterleave(w){const E=this.version,C=this.errorCorrectionLevel;if(w.length!=Ut.getNumDataCodewords(E,C))throw new RangeError("Invalid argument");const I=Ut.NUM_ERROR_CORRECTION_BLOCKS[C.ordinal][E],M=Ut.ECC_CODEWORDS_PER_BLOCK[C.ordinal][E],B=Math.floor(Ut.getNumRawDataModules(E)/8),X=I-B%I,$=Math.floor(B/I);let q=[];const _e=Ut.reedSolomonComputeDivisor(M);for(let K=0,le=0;K<I;K++){let Re=w.slice(le,le+$-M+(K<X?0:1));le+=Re.length;const De=Ut.reedSolomonComputeRemainder(Re,_e);K<X&&Re.push(0),q.push(Re.concat(De))}let ae=[];for(let K=0;K<q[0].length;K++)q.forEach((le,Re)=>{(K!=$-M||Re>=X)&&ae.push(le[K])});return c(ae.length==B),ae}drawCodewords(w){if(w.length!=Math.floor(Ut.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let E=0;for(let C=this.size-1;C>=1;C-=2){C==6&&(C=5);for(let I=0;I<this.size;I++)for(let M=0;M<2;M++){const B=C-M,$=(C+1&2)==0?this.size-1-I:I;!this.isFunction[$][B]&&E<w.length*8&&(this.modules[$][B]=s(w[E>>>3],7-(E&7)),E++)}}c(E==w.length*8)}applyMask(w){if(w<0||w>7)throw new RangeError("Mask value out of range");for(let E=0;E<this.size;E++)for(let C=0;C<this.size;C++){let I;switch(w){case 0:I=(C+E)%2==0;break;case 1:I=E%2==0;break;case 2:I=C%3==0;break;case 3:I=(C+E)%3==0;break;case 4:I=(Math.floor(C/3)+Math.floor(E/2))%2==0;break;case 5:I=C*E%2+C*E%3==0;break;case 6:I=(C*E%2+C*E%3)%2==0;break;case 7:I=((C+E)%2+C*E%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[E][C]&&I&&(this.modules[E][C]=!this.modules[E][C])}}getPenaltyScore(){let w=0;for(let M=0;M<this.size;M++){let B=!1,X=0,$=[0,0,0,0,0,0,0];for(let q=0;q<this.size;q++)this.modules[M][q]==B?(X++,X==5?w+=Ut.PENALTY_N1:X>5&&w++):(this.finderPenaltyAddHistory(X,$),B||(w+=this.finderPenaltyCountPatterns($)*Ut.PENALTY_N3),B=this.modules[M][q],X=1);w+=this.finderPenaltyTerminateAndCount(B,X,$)*Ut.PENALTY_N3}for(let M=0;M<this.size;M++){let B=!1,X=0,$=[0,0,0,0,0,0,0];for(let q=0;q<this.size;q++)this.modules[q][M]==B?(X++,X==5?w+=Ut.PENALTY_N1:X>5&&w++):(this.finderPenaltyAddHistory(X,$),B||(w+=this.finderPenaltyCountPatterns($)*Ut.PENALTY_N3),B=this.modules[q][M],X=1);w+=this.finderPenaltyTerminateAndCount(B,X,$)*Ut.PENALTY_N3}for(let M=0;M<this.size-1;M++)for(let B=0;B<this.size-1;B++){const X=this.modules[M][B];X==this.modules[M][B+1]&&X==this.modules[M+1][B]&&X==this.modules[M+1][B+1]&&(w+=Ut.PENALTY_N2)}let E=0;for(const M of this.modules)E=M.reduce((B,X)=>B+(X?1:0),E);const C=this.size*this.size,I=Math.ceil(Math.abs(E*20-C*10)/C)-1;return c(0<=I&&I<=9),w+=I*Ut.PENALTY_N4,c(0<=w&&w<=2568888),w}getAlignmentPatternPositions(){if(this.version==1)return[];{const w=Math.floor(this.version/7)+2,E=this.version==32?26:Math.ceil((this.version*4+4)/(w*2-2))*2;let C=[6];for(let I=this.size-7;C.length<w;I-=E)C.splice(1,0,I);return C}}static getNumRawDataModules(w){if(w<Ut.MIN_VERSION||w>Ut.MAX_VERSION)throw new RangeError("Version number out of range");let E=(16*w+128)*w+64;if(w>=2){const C=Math.floor(w/7)+2;E-=(25*C-10)*C-55,w>=7&&(E-=36)}return c(208<=E&&E<=29648),E}static getNumDataCodewords(w,E){return Math.floor(Ut.getNumRawDataModules(w)/8)-Ut.ECC_CODEWORDS_PER_BLOCK[E.ordinal][w]*Ut.NUM_ERROR_CORRECTION_BLOCKS[E.ordinal][w]}static reedSolomonComputeDivisor(w){if(w<1||w>255)throw new RangeError("Degree out of range");let E=[];for(let I=0;I<w-1;I++)E.push(0);E.push(1);let C=1;for(let I=0;I<w;I++){for(let M=0;M<E.length;M++)E[M]=Ut.reedSolomonMultiply(E[M],C),M+1<E.length&&(E[M]^=E[M+1]);C=Ut.reedSolomonMultiply(C,2)}return E}static reedSolomonComputeRemainder(w,E){let C=E.map(I=>0);for(const I of w){const M=I^C.shift();C.push(0),E.forEach((B,X)=>C[X]^=Ut.reedSolomonMultiply(B,M))}return C}static reedSolomonMultiply(w,E){if(w>>>8||E>>>8)throw new RangeError("Byte out of range");let C=0;for(let I=7;I>=0;I--)C=C<<1^(C>>>7)*285,C^=(E>>>I&1)*w;return c(C>>>8==0),C}finderPenaltyCountPatterns(w){const E=w[1];c(E<=this.size*3);const C=E>0&&w[2]==E&&w[3]==E*3&&w[4]==E&&w[5]==E;return(C&&w[0]>=E*4&&w[6]>=E?1:0)+(C&&w[6]>=E*4&&w[0]>=E?1:0)}finderPenaltyTerminateAndCount(w,E,C){return w&&(this.finderPenaltyAddHistory(E,C),E=0),E+=this.size,this.finderPenaltyAddHistory(E,C),this.finderPenaltyCountPatterns(C)}finderPenaltyAddHistory(w,E){E[0]==0&&(w+=this.size),E.pop(),E.unshift(w)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],n.QrCode=e;function t(T,w,E){if(w<0||w>31||T>>>w)throw new RangeError("Value out of range");for(let C=w-1;C>=0;C--)E.push(T>>>C&1)}function s(T,w){return(T>>>w&1)!=0}function c(T){if(!T)throw new Error("Assertion error")}const h=class er{constructor(w,E,C){if(this.mode=w,this.numChars=E,this.bitData=C,E<0)throw new RangeError("Invalid argument");this.bitData=C.slice()}static makeBytes(w){let E=[];for(const C of w)t(C,8,E);return new er(er.Mode.BYTE,w.length,E)}static makeNumeric(w){if(!er.isNumeric(w))throw new RangeError("String contains non-numeric characters");let E=[];for(let C=0;C<w.length;){const I=Math.min(w.length-C,3);t(parseInt(w.substring(C,C+I),10),I*3+1,E),C+=I}return new er(er.Mode.NUMERIC,w.length,E)}static makeAlphanumeric(w){if(!er.isAlphanumeric(w))throw new RangeError("String contains unencodable characters in alphanumeric mode");let E=[],C;for(C=0;C+2<=w.length;C+=2){let I=er.ALPHANUMERIC_CHARSET.indexOf(w.charAt(C))*45;I+=er.ALPHANUMERIC_CHARSET.indexOf(w.charAt(C+1)),t(I,11,E)}return C<w.length&&t(er.ALPHANUMERIC_CHARSET.indexOf(w.charAt(C)),6,E),new er(er.Mode.ALPHANUMERIC,w.length,E)}static makeSegments(w){return w==""?[]:er.isNumeric(w)?[er.makeNumeric(w)]:er.isAlphanumeric(w)?[er.makeAlphanumeric(w)]:[er.makeBytes(er.toUtf8ByteArray(w))]}static makeEci(w){let E=[];if(w<0)throw new RangeError("ECI assignment value out of range");if(w<128)t(w,8,E);else if(w<16384)t(2,2,E),t(w,14,E);else if(w<1e6)t(6,3,E),t(w,21,E);else throw new RangeError("ECI assignment value out of range");return new er(er.Mode.ECI,0,E)}static isNumeric(w){return er.NUMERIC_REGEX.test(w)}static isAlphanumeric(w){return er.ALPHANUMERIC_REGEX.test(w)}getData(){return this.bitData.slice()}static getTotalBits(w,E){let C=0;for(const I of w){const M=I.mode.numCharCountBits(E);if(I.numChars>=1<<M)return 1/0;C+=4+M+I.bitData.length}return C}static toUtf8ByteArray(w){w=encodeURI(w);let E=[];for(let C=0;C<w.length;C++)w.charAt(C)!="%"?E.push(w.charCodeAt(C)):(E.push(parseInt(w.substring(C+1,C+3),16)),C+=2);return E}};h.NUMERIC_REGEX=/^[0-9]*$/,h.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,h.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let p=h;n.QrSegment=h})(Cl||(Cl={}));(n=>{(e=>{const t=class{constructor(c,h){this.ordinal=c,this.formatBits=h}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2),e.Ecc=t})(n.QrCode||(n.QrCode={}))})(Cl||(Cl={}));(n=>{(e=>{const t=class{constructor(c,h){this.modeBits=c,this.numBitsCharCount=h}numCharCountBits(c){return this.numBitsCharCount[Math.floor((c+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]),e.Mode=t})(n.QrSegment||(n.QrSegment={}))})(Cl||(Cl={}));var pc=Cl;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var LM={L:pc.QrCode.Ecc.LOW,M:pc.QrCode.Ecc.MEDIUM,Q:pc.QrCode.Ecc.QUARTILE,H:pc.QrCode.Ecc.HIGH},yv=128,Ev="L",_v="#FFFFFF",wv="#000000",Av=!1,bv=1,kM=4,BM=0,UM=.1;function Tv(n,e=0){const t=[];return n.forEach(function(s,c){let h=null;s.forEach(function(p,T){if(!p&&h!==null){t.push(`M${h+e} ${c+e}h${T-h}v1H${h+e}z`),h=null;return}if(T===s.length-1){if(!p)return;h===null?t.push(`M${T+e},${c+e} h1v1H${T+e}z`):t.push(`M${h+e},${c+e} h${T+1-h}v1H${h+e}z`);return}p&&h===null&&(h=T)})}),t.join("")}function vv(n,e){return n.slice().map((t,s)=>s<e.y||s>=e.y+e.h?t:t.map((c,h)=>h<e.x||h>=e.x+e.w?c:!1))}function VM(n,e,t,s){if(s==null)return null;const c=n.length+t*2,h=Math.floor(e*UM),p=c/e,T=(s.width||h)*p,w=(s.height||h)*p,E=s.x==null?n.length/2-T/2:s.x*p,C=s.y==null?n.length/2-w/2:s.y*p,I=s.opacity==null?1:s.opacity;let M=null;if(s.excavate){let X=Math.floor(E),$=Math.floor(C),q=Math.ceil(T+E-X),_e=Math.ceil(w+C-$);M={x:X,y:$,w:q,h:_e}}const B=s.crossOrigin;return{x:E,y:C,h:w,w:T,excavation:M,opacity:I,crossOrigin:B}}function jM(n,e){return e!=null?Math.max(Math.floor(e),0):n?kM:BM}function Sv({value:n,level:e,minVersion:t,includeMargin:s,marginSize:c,imageSettings:h,size:p,boostLevel:T}){let w=nr.useMemo(()=>{const X=(Array.isArray(n)?n:[n]).reduce(($,q)=>($.push(...pc.QrSegment.makeSegments(q)),$),[]);return pc.QrCode.encodeSegments(X,LM[e],t,void 0,void 0,T)},[n,e,t,T]);const{cells:E,margin:C,numCells:I,calculatedImageSettings:M}=nr.useMemo(()=>{let B=w.getModules();const X=jM(s,c),$=B.length+X*2,q=VM(B,p,X,h);return{cells:B,margin:X,numCells:$,calculatedImageSettings:q}},[w,p,h,s,c]);return{qrcode:w,margin:C,cells:E,numCells:I,calculatedImageSettings:M}}var FM=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),zM=nr.forwardRef(function(e,t){const s=e,{value:c,size:h=yv,level:p=Ev,bgColor:T=_v,fgColor:w=wv,includeMargin:E=Av,minVersion:C=bv,boostLevel:I,marginSize:M,imageSettings:B}=s,$=lm(s,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:q}=$,_e=lm($,["style"]),ae=B==null?void 0:B.src,K=nr.useRef(null),le=nr.useRef(null),Re=nr.useCallback(Je=>{K.current=Je,typeof t=="function"?t(Je):t&&(t.current=Je)},[t]),[De,j]=nr.useState(!1),{margin:z,cells:V,numCells:Y,calculatedImageSettings:Q}=Sv({value:c,level:p,minVersion:C,boostLevel:I,includeMargin:E,marginSize:M,imageSettings:B,size:h});nr.useEffect(()=>{if(K.current!=null){const Je=K.current,fe=Je.getContext("2d");if(!fe)return;let me=V;const be=le.current,Ye=Q!=null&&be!==null&&be.complete&&be.naturalHeight!==0&&be.naturalWidth!==0;Ye&&Q.excavation!=null&&(me=vv(V,Q.excavation));const gt=window.devicePixelRatio||1;Je.height=Je.width=h*gt;const ut=h/Y*gt;fe.scale(ut,ut),fe.fillStyle=T,fe.fillRect(0,0,Y,Y),fe.fillStyle=w,FM?fe.fill(new Path2D(Tv(me,z))):V.forEach(function(ie,Ae){ie.forEach(function(Ue,Ve){Ue&&fe.fillRect(Ve+z,Ae+z,1,1)})}),Q&&(fe.globalAlpha=Q.opacity),Ye&&fe.drawImage(be,Q.x+z,Q.y+z,Q.w,Q.h)}}),nr.useEffect(()=>{j(!1)},[ae]);const Z=om({height:h,width:h},q);let W=null;return ae!=null&&(W=nr.createElement("img",{src:ae,key:ae,style:{display:"none"},onLoad:()=>{j(!0)},ref:le,crossOrigin:Q==null?void 0:Q.crossOrigin})),nr.createElement(nr.Fragment,null,nr.createElement("canvas",om({style:Z,height:h,width:h,ref:Re,role:"img"},_e)),W)});zM.displayName="QRCodeCanvas";var Cv=nr.forwardRef(function(e,t){const s=e,{value:c,size:h=yv,level:p=Ev,bgColor:T=_v,fgColor:w=wv,includeMargin:E=Av,minVersion:C=bv,boostLevel:I,title:M,marginSize:B,imageSettings:X}=s,$=lm(s,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:q,cells:_e,numCells:ae,calculatedImageSettings:K}=Sv({value:c,level:p,minVersion:C,boostLevel:I,includeMargin:E,marginSize:B,imageSettings:X,size:h});let le=_e,Re=null;X!=null&&K!=null&&(K.excavation!=null&&(le=vv(_e,K.excavation)),Re=nr.createElement("image",{href:X.src,height:K.h,width:K.w,x:K.x+q,y:K.y+q,preserveAspectRatio:"none",opacity:K.opacity,crossOrigin:K.crossOrigin}));const De=Tv(le,q);return nr.createElement("svg",om({height:h,width:h,viewBox:`0 0 ${ae} ${ae}`,ref:t,role:"img"},$),!!M&&nr.createElement("title",null,M),nr.createElement("path",{fill:T,d:`M0,0 h${ae}v${ae}H0z`,shapeRendering:"crispEdges"}),nr.createElement("path",{fill:w,d:De,shapeRendering:"crispEdges"}),Re)});Cv.displayName="QRCodeSVG";const HM=({user:n})=>{const[e,t]=ne.useState([]),[s,c]=ne.useState(null),[h,p]=ne.useState(()=>{const E=new Date;return`${E.getFullYear()}-${String(E.getMonth()+1).padStart(2,"0")}`});ne.useEffect(()=>{const E=KT(C=>{t(C.filter(I=>I.userId===n.id))});return()=>E()},[n.id]);const T=E=>new Date(E).toLocaleString("zh-TW",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),w=e.filter(E=>{const C=new Date(E.timestamp);return`${C.getFullYear()}-${String(C.getMonth()+1).padStart(2,"0")}`===h});return v.jsxs("div",{className:"space-y-8 animate-in slide-in-from-bottom-4 duration-500",children:[v.jsxs("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[v.jsxs("div",{children:[v.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:""}),v.jsx("p",{className:"text-slate-500 mt-1",children:""})]}),v.jsxs("div",{className:"flex items-center gap-3 bg-white p-2 rounded-2xl border border-slate-100 shadow-sm",children:[v.jsx(jy,{size:18,className:"text-indigo-600 ml-2"}),v.jsx("input",{type:"month",value:h,onChange:E=>p(E.target.value),className:"border-none bg-transparent font-bold text-slate-600 outline-none p-1"})]})]}),w.length===0?v.jsxs("div",{className:"bg-white rounded-3xl p-12 text-center border border-dashed border-slate-200",children:[v.jsx("div",{className:"bg-slate-50 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 text-slate-300",children:v.jsx(nd,{size:40})}),v.jsx("h2",{className:"text-xl font-bold text-slate-800",children:""}),v.jsx("p",{className:"text-slate-400 mt-2",children:""})]}):v.jsx("div",{className:"space-y-4",children:w.map(E=>v.jsxs("div",{className:"bg-white rounded-3xl border border-slate-100 p-6 flex flex-col md:flex-row md:items-center justify-between gap-6 shadow-sm hover:shadow-md transition-shadow",children:[v.jsxs("div",{className:"flex gap-4",children:[v.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center shrink-0 ${E.status==="completed"?"bg-green-50 text-green-600":E.status==="pending"?"bg-indigo-50 text-indigo-600":"bg-red-50 text-red-600"}`,children:E.status==="completed"?v.jsx(ZI,{size:24}):E.status==="pending"?v.jsx(yc,{size:24}):v.jsx(fA,{size:24})}),v.jsxs("div",{children:[v.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:E.productName||""}),v.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-400 mt-1",children:[v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx(jy,{size:12})," ",T(E.timestamp||Date.now())]}),v.jsxs("span",{className:"font-bold text-indigo-600",children:["-",E.pointsSpent||0," "]})]})]})]}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("div",{className:`px-4 py-1.5 rounded-full text-xs font-bold ${E.status==="completed"?"bg-green-100 text-green-700":E.status==="pending"?"bg-indigo-100 text-indigo-700":"bg-red-100 text-red-700"}`,children:E.status==="completed"?"":E.status==="pending"?"":""}),E.status==="pending"&&v.jsxs("button",{onClick:()=>c(E),className:"flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-2.5 rounded-xl text-sm font-bold transition-all shadow-lg shadow-indigo-100",children:[v.jsx(b3,{size:18}),""]})]})]},E.id))}),s&&v.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:v.jsxs("div",{className:"bg-white rounded-[2.5rem] max-w-sm w-full p-10 shadow-2xl animate-in zoom-in-95 duration-200 text-center",children:[v.jsx("div",{className:"flex justify-end mb-4 -mt-4 -mr-4",children:v.jsx("button",{onClick:()=>c(null),className:"text-slate-400 hover:text-slate-600 p-2",children:v.jsx(Oo,{size:28})})}),v.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:""}),v.jsx("p",{className:"text-slate-500 mb-8 text-sm",children:""}),v.jsx("div",{className:"aspect-square bg-white border-8 border-indigo-50 rounded-3xl flex items-center justify-center mb-8 shadow-inner overflow-hidden p-6",children:v.jsx(Cv,{value:s.qrCodeData,size:256,level:"H",includeMargin:!1,className:"w-full h-full"})}),v.jsx("div",{className:"bg-slate-50 p-4 rounded-2xl text-slate-400 font-mono text-xs mb-8 tracking-widest uppercase",children:s.qrCodeData}),v.jsx("p",{className:"font-bold text-slate-800 mb-1",children:s.productName}),v.jsxs("p",{className:"text-xs text-slate-400",children:["ID: ",s.id]})]})})]})};var Xe;(function(n){n[n.QR_CODE=0]="QR_CODE",n[n.AZTEC=1]="AZTEC",n[n.CODABAR=2]="CODABAR",n[n.CODE_39=3]="CODE_39",n[n.CODE_93=4]="CODE_93",n[n.CODE_128=5]="CODE_128",n[n.DATA_MATRIX=6]="DATA_MATRIX",n[n.MAXICODE=7]="MAXICODE",n[n.ITF=8]="ITF",n[n.EAN_13=9]="EAN_13",n[n.EAN_8=10]="EAN_8",n[n.PDF_417=11]="PDF_417",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Xe||(Xe={}));var Pw=new Map([[Xe.QR_CODE,"QR_CODE"],[Xe.AZTEC,"AZTEC"],[Xe.CODABAR,"CODABAR"],[Xe.CODE_39,"CODE_39"],[Xe.CODE_93,"CODE_93"],[Xe.CODE_128,"CODE_128"],[Xe.DATA_MATRIX,"DATA_MATRIX"],[Xe.MAXICODE,"MAXICODE"],[Xe.ITF,"ITF"],[Xe.EAN_13,"EAN_13"],[Xe.EAN_8,"EAN_8"],[Xe.PDF_417,"PDF_417"],[Xe.RSS_14,"RSS_14"],[Xe.RSS_EXPANDED,"RSS_EXPANDED"],[Xe.UPC_A,"UPC_A"],[Xe.UPC_E,"UPC_E"],[Xe.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Lw;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.URL=1]="URL"})(Lw||(Lw={}));function GM(n){return Object.values(Xe).includes(n)}var Dd;(function(n){n[n.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",n[n.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Dd||(Dd={}));var qM=(function(){function n(){}return n.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",n.SCAN_DEFAULT_FPS=2,n.DEFAULT_DISABLE_FLIP=!1,n.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,n.DEFAULT_SUPPORTED_SCAN_TYPE=[Dd.SCAN_TYPE_CAMERA,Dd.SCAN_TYPE_FILE],n})(),Iv=(function(){function n(e,t){this.format=e,this.formatName=t}return n.prototype.toString=function(){return this.formatName},n.create=function(e){if(!Pw.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new n(e,Pw.get(e))},n})(),kw=(function(){function n(){}return n.createFromText=function(e){var t={text:e};return{decodedText:e,result:t}},n.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},n})(),cm;(function(n){n[n.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",n[n.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",n[n.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(cm||(cm={}));var YM=(function(){function n(){}return n.createFrom=function(e){return{errorMessage:e,type:cm.UNKWOWN_ERROR}},n})(),XM=(function(){function n(e){this.verbose=e}return n.prototype.log=function(e){this.verbose&&console.log(e)},n.prototype.warn=function(e){this.verbose&&console.warn(e)},n.prototype.logError=function(e,t){(this.verbose||t===!0)&&console.error(e)},n.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},n})();function Ma(n){return typeof n>"u"||n===null}var xc=(function(){function n(){}return n.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},n.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},n.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},n.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},n.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},n.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},n.scannerPaused=function(){return"Scanner paused"},n})(),Nv=(function(){function n(){}return n.isMediaStreamConstraintsValid=function(e,t){if(typeof e!="object"){var s=typeof e;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(s,"."),!0),!1}for(var c=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],h=new Set(c),p=Object.keys(e),T=0,w=p;T<w.length;T++){var E=w[T];if(h.has(E))return t.logError("".concat(E," is not supported videoConstaints."),!0),!1}return!0},n})(),ku={exports:{}},WM=ku.exports,Bw;function KM(){return Bw||(Bw=1,(function(n,e){(function(t,s){s(e)})(WM,(function(t){function s(P){return P==null}var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,i){P.__proto__=i}||function(P,i){for(var o in i)i.hasOwnProperty(o)&&(P[o]=i[o])};function h(P,i){c(P,i);function o(){this.constructor=P}P.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}function p(P,i){var o=Object.setPrototypeOf;o?o(P,i):P.__proto__=i}function T(P,i){i===void 0&&(i=P.constructor);var o=Error.captureStackTrace;o&&o(P,i)}var w=(function(P){h(i,P);function i(o){var l=this.constructor,f=P.call(this,o)||this;return Object.defineProperty(f,"name",{value:l.name,enumerable:!1}),p(f,l.prototype),T(f),f}return i})(Error);class E extends w{constructor(i=void 0){super(i),this.message=i}getKind(){return this.constructor.kind}}E.kind="Exception";class C extends E{}C.kind="ArgumentException";class I extends E{}I.kind="IllegalArgumentException";class M{constructor(i){if(this.binarizer=i,i===null)throw new I("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(i,o){return this.binarizer.getBlackRow(i,o)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(i,o,l,f){const d=this.binarizer.getLuminanceSource().crop(i,o,l,f);return new M(this.binarizer.createBinarizer(d))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new M(this.binarizer.createBinarizer(i))}rotateCounterClockwise45(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new M(this.binarizer.createBinarizer(i))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class B extends E{static getChecksumInstance(){return new B}}B.kind="ChecksumException";class X{constructor(i){this.source=i}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class ${static arraycopy(i,o,l,f,d){for(;d--;)l[f++]=i[o++]}static currentTimeMillis(){return Date.now()}}class q extends E{}q.kind="IndexOutOfBoundsException";class _e extends q{constructor(i=void 0,o=void 0){super(o),this.index=i,this.message=o}}_e.kind="ArrayIndexOutOfBoundsException";class ae{static fill(i,o){for(let l=0,f=i.length;l<f;l++)i[l]=o}static fillWithin(i,o,l,f){ae.rangeCheck(i.length,o,l);for(let d=o;d<l;d++)i[d]=f}static rangeCheck(i,o,l){if(o>l)throw new I("fromIndex("+o+") > toIndex("+l+")");if(o<0)throw new _e(o);if(l>i)throw new _e(l)}static asList(...i){return i}static create(i,o,l){return Array.from({length:i}).map(d=>Array.from({length:o}).fill(l))}static createInt32Array(i,o,l){return Array.from({length:i}).map(d=>Int32Array.from({length:o}).fill(l))}static equals(i,o){if(!i||!o||!i.length||!o.length||i.length!==o.length)return!1;for(let l=0,f=i.length;l<f;l++)if(i[l]!==o[l])return!1;return!0}static hashCode(i){if(i===null)return 0;let o=1;for(const l of i)o=31*o+l;return o}static fillUint8Array(i,o){for(let l=0;l!==i.length;l++)i[l]=o}static copyOf(i,o){return i.slice(0,o)}static copyOfUint8Array(i,o){if(i.length<=o){const l=new Uint8Array(o);return l.set(i),l}return i.slice(0,o)}static copyOfRange(i,o,l){const f=l-o,d=new Int32Array(f);return $.arraycopy(i,o,d,0,f),d}static binarySearch(i,o,l){l===void 0&&(l=ae.numberComparator);let f=0,d=i.length-1;for(;f<=d;){const m=d+f>>1,y=l(o,i[m]);if(y>0)f=m+1;else if(y<0)d=m-1;else return m}return-f-1}static numberComparator(i,o){return i-o}}class K{static numberOfTrailingZeros(i){let o;if(i===0)return 32;let l=31;return o=i<<16,o!==0&&(l-=16,i=o),o=i<<8,o!==0&&(l-=8,i=o),o=i<<4,o!==0&&(l-=4,i=o),o=i<<2,o!==0&&(l-=2,i=o),l-(i<<1>>>31)}static numberOfLeadingZeros(i){if(i===0)return 32;let o=1;return i>>>16||(o+=16,i<<=16),i>>>24||(o+=8,i<<=8),i>>>28||(o+=4,i<<=4),i>>>30||(o+=2,i<<=2),o-=i>>>31,o}static toHexString(i){return i.toString(16)}static toBinaryString(i){return String(parseInt(String(i),2))}static bitCount(i){return i=i-(i>>>1&1431655765),i=(i&858993459)+(i>>>2&858993459),i=i+(i>>>4)&252645135,i=i+(i>>>8),i=i+(i>>>16),i&63}static truncDivision(i,o){return Math.trunc(i/o)}static parseInt(i,o=void 0){return parseInt(i,o)}}K.MIN_VALUE_32_BITS=-2147483648,K.MAX_VALUE=Number.MAX_SAFE_INTEGER;class le{constructor(i,o){i===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=i,o==null?this.bits=le.makeArray(i):this.bits=o)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(i){if(i>this.bits.length*32){const o=le.makeArray(i);$.arraycopy(this.bits,0,o,0,this.bits.length),this.bits=o}}get(i){return(this.bits[Math.floor(i/32)]&1<<(i&31))!==0}set(i){this.bits[Math.floor(i/32)]|=1<<(i&31)}flip(i){this.bits[Math.floor(i/32)]^=1<<(i&31)}getNextSet(i){const o=this.size;if(i>=o)return o;const l=this.bits;let f=Math.floor(i/32),d=l[f];d&=~((1<<(i&31))-1);const m=l.length;for(;d===0;){if(++f===m)return o;d=l[f]}const y=f*32+K.numberOfTrailingZeros(d);return y>o?o:y}getNextUnset(i){const o=this.size;if(i>=o)return o;const l=this.bits;let f=Math.floor(i/32),d=~l[f];d&=~((1<<(i&31))-1);const m=l.length;for(;d===0;){if(++f===m)return o;d=~l[f]}const y=f*32+K.numberOfTrailingZeros(d);return y>o?o:y}setBulk(i,o){this.bits[Math.floor(i/32)]=o}setRange(i,o){if(o<i||i<0||o>this.size)throw new I;if(o===i)return;o--;const l=Math.floor(i/32),f=Math.floor(o/32),d=this.bits;for(let m=l;m<=f;m++){const y=m>l?0:i&31,S=(2<<(m<f?31:o&31))-(1<<y);d[m]|=S}}clear(){const i=this.bits.length,o=this.bits;for(let l=0;l<i;l++)o[l]=0}isRange(i,o,l){if(o<i||i<0||o>this.size)throw new I;if(o===i)return!0;o--;const f=Math.floor(i/32),d=Math.floor(o/32),m=this.bits;for(let y=f;y<=d;y++){const A=y>f?0:i&31,R=(2<<(y<d?31:o&31))-(1<<A)&4294967295;if((m[y]&R)!==(l?R:0))return!1}return!0}appendBit(i){this.ensureCapacity(this.size+1),i&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(i,o){if(o<0||o>32)throw new I("Num bits must be between 0 and 32");this.ensureCapacity(this.size+o);for(let l=o;l>0;l--)this.appendBit((i>>l-1&1)===1)}appendBitArray(i){const o=i.size;this.ensureCapacity(this.size+o);for(let l=0;l<o;l++)this.appendBit(i.get(l))}xor(i){if(this.size!==i.size)throw new I("Sizes don't match");const o=this.bits;for(let l=0,f=o.length;l<f;l++)o[l]^=i.bits[l]}toBytes(i,o,l,f){for(let d=0;d<f;d++){let m=0;for(let y=0;y<8;y++)this.get(i)&&(m|=1<<7-y),i++;o[l+d]=m}}getBitArray(){return this.bits}reverse(){const i=new Int32Array(this.bits.length),o=Math.floor((this.size-1)/32),l=o+1,f=this.bits;for(let d=0;d<l;d++){let m=f[d];m=m>>1&1431655765|(m&1431655765)<<1,m=m>>2&858993459|(m&858993459)<<2,m=m>>4&252645135|(m&252645135)<<4,m=m>>8&16711935|(m&16711935)<<8,m=m>>16&65535|(m&65535)<<16,i[o-d]=m}if(this.size!==l*32){const d=l*32-this.size;let m=i[0]>>>d;for(let y=1;y<l;y++){const A=i[y];m|=A<<32-d,i[y-1]=m,m=A>>>d}i[l-1]=m}this.bits=i}static makeArray(i){return new Int32Array(Math.floor((i+31)/32))}equals(i){if(!(i instanceof le))return!1;const o=i;return this.size===o.size&&ae.equals(this.bits,o.bits)}hashCode(){return 31*this.size+ae.hashCode(this.bits)}toString(){let i="";for(let o=0,l=this.size;o<l;o++)(o&7)===0&&(i+=" "),i+=this.get(o)?"X":".";return i}clone(){return new le(this.size,this.bits.slice())}}var Re;(function(P){P[P.OTHER=0]="OTHER",P[P.PURE_BARCODE=1]="PURE_BARCODE",P[P.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",P[P.TRY_HARDER=3]="TRY_HARDER",P[P.CHARACTER_SET=4]="CHARACTER_SET",P[P.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",P[P.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",P[P.ASSUME_GS1=7]="ASSUME_GS1",P[P.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",P[P.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",P[P.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Re||(Re={}));var De=Re;class j extends E{static getFormatInstance(){return new j}}j.kind="FormatException";var z;(function(P){P[P.Cp437=0]="Cp437",P[P.ISO8859_1=1]="ISO8859_1",P[P.ISO8859_2=2]="ISO8859_2",P[P.ISO8859_3=3]="ISO8859_3",P[P.ISO8859_4=4]="ISO8859_4",P[P.ISO8859_5=5]="ISO8859_5",P[P.ISO8859_6=6]="ISO8859_6",P[P.ISO8859_7=7]="ISO8859_7",P[P.ISO8859_8=8]="ISO8859_8",P[P.ISO8859_9=9]="ISO8859_9",P[P.ISO8859_10=10]="ISO8859_10",P[P.ISO8859_11=11]="ISO8859_11",P[P.ISO8859_13=12]="ISO8859_13",P[P.ISO8859_14=13]="ISO8859_14",P[P.ISO8859_15=14]="ISO8859_15",P[P.ISO8859_16=15]="ISO8859_16",P[P.SJIS=16]="SJIS",P[P.Cp1250=17]="Cp1250",P[P.Cp1251=18]="Cp1251",P[P.Cp1252=19]="Cp1252",P[P.Cp1256=20]="Cp1256",P[P.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",P[P.UTF8=22]="UTF8",P[P.ASCII=23]="ASCII",P[P.Big5=24]="Big5",P[P.GB18030=25]="GB18030",P[P.EUC_KR=26]="EUC_KR"})(z||(z={}));class V{constructor(i,o,l,...f){this.valueIdentifier=i,this.name=l,typeof o=="number"?this.values=Int32Array.from([o]):this.values=o,this.otherEncodingNames=f,V.VALUE_IDENTIFIER_TO_ECI.set(i,this),V.NAME_TO_ECI.set(l,this);const d=this.values;for(let m=0,y=d.length;m!==y;m++){const A=d[m];V.VALUES_TO_ECI.set(A,this)}for(const m of f)V.NAME_TO_ECI.set(m,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(i){if(i<0||i>=900)throw new j("incorect value");const o=V.VALUES_TO_ECI.get(i);if(o===void 0)throw new j("incorect value");return o}static getCharacterSetECIByName(i){const o=V.NAME_TO_ECI.get(i);if(o===void 0)throw new j("incorect value");return o}equals(i){if(!(i instanceof V))return!1;const o=i;return this.getName()===o.getName()}}V.VALUE_IDENTIFIER_TO_ECI=new Map,V.VALUES_TO_ECI=new Map,V.NAME_TO_ECI=new Map,V.Cp437=new V(z.Cp437,Int32Array.from([0,2]),"Cp437"),V.ISO8859_1=new V(z.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),V.ISO8859_2=new V(z.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),V.ISO8859_3=new V(z.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),V.ISO8859_4=new V(z.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),V.ISO8859_5=new V(z.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),V.ISO8859_6=new V(z.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),V.ISO8859_7=new V(z.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),V.ISO8859_8=new V(z.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),V.ISO8859_9=new V(z.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),V.ISO8859_10=new V(z.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),V.ISO8859_11=new V(z.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),V.ISO8859_13=new V(z.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),V.ISO8859_14=new V(z.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),V.ISO8859_15=new V(z.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),V.ISO8859_16=new V(z.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),V.SJIS=new V(z.SJIS,20,"SJIS","Shift_JIS"),V.Cp1250=new V(z.Cp1250,21,"Cp1250","windows-1250"),V.Cp1251=new V(z.Cp1251,22,"Cp1251","windows-1251"),V.Cp1252=new V(z.Cp1252,23,"Cp1252","windows-1252"),V.Cp1256=new V(z.Cp1256,24,"Cp1256","windows-1256"),V.UnicodeBigUnmarked=new V(z.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),V.UTF8=new V(z.UTF8,26,"UTF8","UTF-8"),V.ASCII=new V(z.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),V.Big5=new V(z.Big5,28,"Big5"),V.GB18030=new V(z.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),V.EUC_KR=new V(z.EUC_KR,30,"EUC_KR","EUC-KR");class Y extends E{}Y.kind="UnsupportedOperationException";class Q{static decode(i,o){const l=this.encodingName(o);return this.customDecoder?this.customDecoder(i,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(i,l):new TextDecoder(l).decode(i)}static shouldDecodeOnFallback(i){return!Q.isBrowser()&&i==="ISO-8859-1"}static encode(i,o){const l=this.encodingName(o);return this.customEncoder?this.customEncoder(i,l):typeof TextEncoder>"u"?this.encodeFallback(i):new TextEncoder().encode(i)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(i){return typeof i=="string"?i:i.getName()}static encodingCharacterSet(i){return i instanceof V?i:V.getCharacterSetECIByName(i)}static decodeFallback(i,o){const l=this.encodingCharacterSet(o);if(Q.isDecodeFallbackSupported(l)){let f="";for(let d=0,m=i.length;d<m;d++){let y=i[d].toString(16);y.length<2&&(y="0"+y),f+="%"+y}return decodeURIComponent(f)}if(l.equals(V.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(i.buffer));throw new Y(`Encoding ${this.encodingName(o)} not supported by fallback.`)}static isDecodeFallbackSupported(i){return i.equals(V.UTF8)||i.equals(V.ISO8859_1)||i.equals(V.ASCII)}static encodeFallback(i){const l=btoa(unescape(encodeURIComponent(i))).split(""),f=[];for(let d=0;d<l.length;d++)f.push(l[d].charCodeAt(0));return new Uint8Array(f)}}class Z{static castAsNonUtf8Char(i,o=null){const l=o?o.getName():this.ISO88591;return Q.decode(new Uint8Array([i]),l)}static guessEncoding(i,o){if(o!=null&&o.get(De.CHARACTER_SET)!==void 0)return o.get(De.CHARACTER_SET).toString();const l=i.length;let f=!0,d=!0,m=!0,y=0,A=0,S=0,R=0,L=0,k=0,G=0,te=0,re=0,ue=0,ye=0;const ke=i.length>3&&i[0]===239&&i[1]===187&&i[2]===191;for(let Pe=0;Pe<l&&(f||d||m);Pe++){const Oe=i[Pe]&255;m&&(y>0?(Oe&128)===0?m=!1:y--:(Oe&128)!==0&&((Oe&64)===0?m=!1:(y++,(Oe&32)===0?A++:(y++,(Oe&16)===0?S++:(y++,(Oe&8)===0?R++:m=!1))))),f&&(Oe>127&&Oe<160?f=!1:Oe>159&&(Oe<192||Oe===215||Oe===247)&&ye++),d&&(L>0?Oe<64||Oe===127||Oe>252?d=!1:L--:Oe===128||Oe===160||Oe>239?d=!1:Oe>160&&Oe<224?(k++,te=0,G++,G>re&&(re=G)):Oe>127?(L++,G=0,te++,te>ue&&(ue=te)):(G=0,te=0))}return m&&y>0&&(m=!1),d&&L>0&&(d=!1),m&&(ke||A+S+R>0)?Z.UTF8:d&&(Z.ASSUME_SHIFT_JIS||re>=3||ue>=3)?Z.SHIFT_JIS:f&&d?re===2&&k===2||ye*10>=l?Z.SHIFT_JIS:Z.ISO88591:f?Z.ISO88591:d?Z.SHIFT_JIS:m?Z.UTF8:Z.PLATFORM_DEFAULT_ENCODING}static format(i,...o){let l=-1;function f(m,y,A,S,R,L){if(m==="%%")return"%";if(o[++l]===void 0)return;m=S?parseInt(S.substr(1)):void 0;let k=R?parseInt(R.substr(1)):void 0,G;switch(L){case"s":G=o[l];break;case"c":G=o[l][0];break;case"f":G=parseFloat(o[l]).toFixed(m);break;case"p":G=parseFloat(o[l]).toPrecision(m);break;case"e":G=parseFloat(o[l]).toExponential(m);break;case"x":G=parseInt(o[l]).toString(k||16);break;case"d":G=parseFloat(parseInt(o[l],k||10).toPrecision(m)).toFixed(0);break}G=typeof G=="object"?JSON.stringify(G):(+G).toString(k);let te=parseInt(A),re=A&&A[0]+""=="0"?"0":" ";for(;G.length<te;)G=y!==void 0?G+re:re+G;return G}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(d,f)}static getBytes(i,o){return Q.encode(i,o)}static getCharCode(i,o=0){return i.charCodeAt(o)}static getCharAt(i){return String.fromCharCode(i)}}Z.SHIFT_JIS=V.SJIS.getName(),Z.GB2312="GB2312",Z.ISO88591=V.ISO8859_1.getName(),Z.EUC_JP="EUC_JP",Z.UTF8=V.UTF8.getName(),Z.PLATFORM_DEFAULT_ENCODING=Z.UTF8,Z.ASSUME_SHIFT_JIS=!1;class W{constructor(i=""){this.value=i}enableDecoding(i){return this.encoding=i,this}append(i){return typeof i=="string"?this.value+=i.toString():this.encoding?this.value+=Z.castAsNonUtf8Char(i,this.encoding):this.value+=String.fromCharCode(i),this}appendChars(i,o,l){for(let f=o;o<o+l;f++)this.append(i[f]);return this}length(){return this.value.length}charAt(i){return this.value.charAt(i)}deleteCharAt(i){this.value=this.value.substr(0,i)+this.value.substring(i+1)}setCharAt(i,o){this.value=this.value.substr(0,i)+o+this.value.substr(i+1)}substring(i,o){return this.value.substring(i,o)}setLengthToZero(){this.value=""}toString(){return this.value}insert(i,o){this.value=this.value.substr(0,i)+o+this.value.substr(i+o.length)}}class Je{constructor(i,o,l,f){if(this.width=i,this.height=o,this.rowSize=l,this.bits=f,o==null&&(o=i),this.height=o,i<1||o<1)throw new I("Both dimensions must be greater than 0");l==null&&(l=Math.floor((i+31)/32)),this.rowSize=l,f==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(i){const o=i.length,l=i[0].length,f=new Je(l,o);for(let d=0;d<o;d++){const m=i[d];for(let y=0;y<l;y++)m[y]&&f.set(y,d)}return f}static parseFromString(i,o,l){if(i===null)throw new I("stringRepresentation cannot be null");const f=new Array(i.length);let d=0,m=0,y=-1,A=0,S=0;for(;S<i.length;)if(i.charAt(S)===`
`||i.charAt(S)==="\r"){if(d>m){if(y===-1)y=d-m;else if(d-m!==y)throw new I("row lengths do not match");m=d,A++}S++}else if(i.substring(S,S+o.length)===o)S+=o.length,f[d]=!0,d++;else if(i.substring(S,S+l.length)===l)S+=l.length,f[d]=!1,d++;else throw new I("illegal character encountered: "+i.substring(S));if(d>m){if(y===-1)y=d-m;else if(d-m!==y)throw new I("row lengths do not match");A++}const R=new Je(y,A);for(let L=0;L<d;L++)f[L]&&R.set(Math.floor(L%y),Math.floor(L/y));return R}get(i,o){const l=o*this.rowSize+Math.floor(i/32);return(this.bits[l]>>>(i&31)&1)!==0}set(i,o){const l=o*this.rowSize+Math.floor(i/32);this.bits[l]|=1<<(i&31)&4294967295}unset(i,o){const l=o*this.rowSize+Math.floor(i/32);this.bits[l]&=~(1<<(i&31)&4294967295)}flip(i,o){const l=o*this.rowSize+Math.floor(i/32);this.bits[l]^=1<<(i&31)&4294967295}xor(i){if(this.width!==i.getWidth()||this.height!==i.getHeight()||this.rowSize!==i.getRowSize())throw new I("input matrix dimensions do not match");const o=new le(Math.floor(this.width/32)+1),l=this.rowSize,f=this.bits;for(let d=0,m=this.height;d<m;d++){const y=d*l,A=i.getRow(d,o).getBitArray();for(let S=0;S<l;S++)f[y+S]^=A[S]}}clear(){const i=this.bits,o=i.length;for(let l=0;l<o;l++)i[l]=0}setRegion(i,o,l,f){if(o<0||i<0)throw new I("Left and top must be nonnegative");if(f<1||l<1)throw new I("Height and width must be at least 1");const d=i+l,m=o+f;if(m>this.height||d>this.width)throw new I("The region must fit inside the matrix");const y=this.rowSize,A=this.bits;for(let S=o;S<m;S++){const R=S*y;for(let L=i;L<d;L++)A[R+Math.floor(L/32)]|=1<<(L&31)&4294967295}}getRow(i,o){o==null||o.getSize()<this.width?o=new le(this.width):o.clear();const l=this.rowSize,f=this.bits,d=i*l;for(let m=0;m<l;m++)o.setBulk(m*32,f[d+m]);return o}setRow(i,o){$.arraycopy(o.getBitArray(),0,this.bits,i*this.rowSize,this.rowSize)}rotate180(){const i=this.getWidth(),o=this.getHeight();let l=new le(i),f=new le(i);for(let d=0,m=Math.floor((o+1)/2);d<m;d++)l=this.getRow(d,l),f=this.getRow(o-1-d,f),l.reverse(),f.reverse(),this.setRow(d,f),this.setRow(o-1-d,l)}getEnclosingRectangle(){const i=this.width,o=this.height,l=this.rowSize,f=this.bits;let d=i,m=o,y=-1,A=-1;for(let S=0;S<o;S++)for(let R=0;R<l;R++){const L=f[S*l+R];if(L!==0){if(S<m&&(m=S),S>A&&(A=S),R*32<d){let k=0;for(;(L<<31-k&4294967295)===0;)k++;R*32+k<d&&(d=R*32+k)}if(R*32+31>y){let k=31;for(;!(L>>>k);)k--;R*32+k>y&&(y=R*32+k)}}}return y<d||A<m?null:Int32Array.from([d,m,y-d+1,A-m+1])}getTopLeftOnBit(){const i=this.rowSize,o=this.bits;let l=0;for(;l<o.length&&o[l]===0;)l++;if(l===o.length)return null;const f=l/i;let d=l%i*32;const m=o[l];let y=0;for(;(m<<31-y&4294967295)===0;)y++;return d+=y,Int32Array.from([d,f])}getBottomRightOnBit(){const i=this.rowSize,o=this.bits;let l=o.length-1;for(;l>=0&&o[l]===0;)l--;if(l<0)return null;const f=Math.floor(l/i);let d=Math.floor(l%i)*32;const m=o[l];let y=31;for(;!(m>>>y);)y--;return d+=y,Int32Array.from([d,f])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(i){if(!(i instanceof Je))return!1;const o=i;return this.width===o.width&&this.height===o.height&&this.rowSize===o.rowSize&&ae.equals(this.bits,o.bits)}hashCode(){let i=this.width;return i=31*i+this.width,i=31*i+this.height,i=31*i+this.rowSize,i=31*i+ae.hashCode(this.bits),i}toString(i="X ",o="  ",l=`
`){return this.buildToString(i,o,l)}buildToString(i,o,l){let f=new W;for(let d=0,m=this.height;d<m;d++){for(let y=0,A=this.width;y<A;y++)f.append(this.get(y,d)?i:o);f.append(l)}return f.toString()}clone(){return new Je(this.width,this.height,this.rowSize,this.bits.slice())}}class fe extends E{static getNotFoundInstance(){return new fe}}fe.kind="NotFoundException";class me extends X{constructor(i){super(i),this.luminances=me.EMPTY,this.buckets=new Int32Array(me.LUMINANCE_BUCKETS)}getBlackRow(i,o){const l=this.getLuminanceSource(),f=l.getWidth();o==null||o.getSize()<f?o=new le(f):o.clear(),this.initArrays(f);const d=l.getRow(i,this.luminances),m=this.buckets;for(let A=0;A<f;A++)m[(d[A]&255)>>me.LUMINANCE_SHIFT]++;const y=me.estimateBlackPoint(m);if(f<3)for(let A=0;A<f;A++)(d[A]&255)<y&&o.set(A);else{let A=d[0]&255,S=d[1]&255;for(let R=1;R<f-1;R++){const L=d[R+1]&255;(S*4-A-L)/2<y&&o.set(R),A=S,S=L}}return o}getBlackMatrix(){const i=this.getLuminanceSource(),o=i.getWidth(),l=i.getHeight(),f=new Je(o,l);this.initArrays(o);const d=this.buckets;for(let A=1;A<5;A++){const S=Math.floor(l*A/5),R=i.getRow(S,this.luminances),L=Math.floor(o*4/5);for(let k=Math.floor(o/5);k<L;k++){const G=R[k]&255;d[G>>me.LUMINANCE_SHIFT]++}}const m=me.estimateBlackPoint(d),y=i.getMatrix();for(let A=0;A<l;A++){const S=A*o;for(let R=0;R<o;R++)(y[S+R]&255)<m&&f.set(R,A)}return f}createBinarizer(i){return new me(i)}initArrays(i){this.luminances.length<i&&(this.luminances=new Uint8ClampedArray(i));const o=this.buckets;for(let l=0;l<me.LUMINANCE_BUCKETS;l++)o[l]=0}static estimateBlackPoint(i){const o=i.length;let l=0,f=0,d=0;for(let R=0;R<o;R++)i[R]>d&&(f=R,d=i[R]),i[R]>l&&(l=i[R]);let m=0,y=0;for(let R=0;R<o;R++){const L=R-f,k=i[R]*L*L;k>y&&(m=R,y=k)}if(f>m){const R=f;f=m,m=R}if(m-f<=o/16)throw new fe;let A=m-1,S=-1;for(let R=m-1;R>f;R--){const L=R-f,k=L*L*(m-R)*(l-i[R]);k>S&&(A=R,S=k)}return A<<me.LUMINANCE_SHIFT}}me.LUMINANCE_BITS=5,me.LUMINANCE_SHIFT=8-me.LUMINANCE_BITS,me.LUMINANCE_BUCKETS=1<<me.LUMINANCE_BITS,me.EMPTY=Uint8ClampedArray.from([0]);class be extends me{constructor(i){super(i),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const i=this.getLuminanceSource(),o=i.getWidth(),l=i.getHeight();if(o>=be.MINIMUM_DIMENSION&&l>=be.MINIMUM_DIMENSION){const f=i.getMatrix();let d=o>>be.BLOCK_SIZE_POWER;(o&be.BLOCK_SIZE_MASK)!==0&&d++;let m=l>>be.BLOCK_SIZE_POWER;(l&be.BLOCK_SIZE_MASK)!==0&&m++;const y=be.calculateBlackPoints(f,d,m,o,l),A=new Je(o,l);be.calculateThresholdForBlock(f,d,m,o,l,y,A),this.matrix=A}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(i){return new be(i)}static calculateThresholdForBlock(i,o,l,f,d,m,y){const A=d-be.BLOCK_SIZE,S=f-be.BLOCK_SIZE;for(let R=0;R<l;R++){let L=R<<be.BLOCK_SIZE_POWER;L>A&&(L=A);const k=be.cap(R,2,l-3);for(let G=0;G<o;G++){let te=G<<be.BLOCK_SIZE_POWER;te>S&&(te=S);const re=be.cap(G,2,o-3);let ue=0;for(let ke=-2;ke<=2;ke++){const Pe=m[k+ke];ue+=Pe[re-2]+Pe[re-1]+Pe[re]+Pe[re+1]+Pe[re+2]}const ye=ue/25;be.thresholdBlock(i,te,L,ye,f,y)}}}static cap(i,o,l){return i<o?o:i>l?l:i}static thresholdBlock(i,o,l,f,d,m){for(let y=0,A=l*d+o;y<be.BLOCK_SIZE;y++,A+=d)for(let S=0;S<be.BLOCK_SIZE;S++)(i[A+S]&255)<=f&&m.set(o+S,l+y)}static calculateBlackPoints(i,o,l,f,d){const m=d-be.BLOCK_SIZE,y=f-be.BLOCK_SIZE,A=new Array(l);for(let S=0;S<l;S++){A[S]=new Int32Array(o);let R=S<<be.BLOCK_SIZE_POWER;R>m&&(R=m);for(let L=0;L<o;L++){let k=L<<be.BLOCK_SIZE_POWER;k>y&&(k=y);let G=0,te=255,re=0;for(let ye=0,ke=R*f+k;ye<be.BLOCK_SIZE;ye++,ke+=f){for(let Pe=0;Pe<be.BLOCK_SIZE;Pe++){const Oe=i[ke+Pe]&255;G+=Oe,Oe<te&&(te=Oe),Oe>re&&(re=Oe)}if(re-te>be.MIN_DYNAMIC_RANGE)for(ye++,ke+=f;ye<be.BLOCK_SIZE;ye++,ke+=f)for(let Pe=0;Pe<be.BLOCK_SIZE;Pe++)G+=i[ke+Pe]&255}let ue=G>>be.BLOCK_SIZE_POWER*2;if(re-te<=be.MIN_DYNAMIC_RANGE&&(ue=te/2,S>0&&L>0)){const ye=(A[S-1][L]+2*A[S][L-1]+A[S-1][L-1])/4;te<ye&&(ue=ye)}A[S][L]=ue}}return A}}be.BLOCK_SIZE_POWER=3,be.BLOCK_SIZE=1<<be.BLOCK_SIZE_POWER,be.BLOCK_SIZE_MASK=be.BLOCK_SIZE-1,be.MINIMUM_DIMENSION=be.BLOCK_SIZE*5,be.MIN_DYNAMIC_RANGE=24;class Ye{constructor(i,o){this.width=i,this.height=o}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(i,o,l,f){throw new Y("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Y("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Y("This luminance source does not support rotation by 45 degrees.")}toString(){const i=new Uint8ClampedArray(this.width);let o=new W;for(let l=0;l<this.height;l++){const f=this.getRow(l,i);for(let d=0;d<this.width;d++){const m=f[d]&255;let y;m<64?y="#":m<128?y="+":m<192?y=".":y=" ",o.append(y)}o.append(`
`)}return o.toString()}}class gt extends Ye{constructor(i){super(i.getWidth(),i.getHeight()),this.delegate=i}getRow(i,o){const l=this.delegate.getRow(i,o),f=this.getWidth();for(let d=0;d<f;d++)l[d]=255-(l[d]&255);return l}getMatrix(){const i=this.delegate.getMatrix(),o=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(o);for(let f=0;f<o;f++)l[f]=255-(i[f]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(i,o,l,f){return new gt(this.delegate.crop(i,o,l,f))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new gt(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new gt(this.delegate.rotateCounterClockwise45())}}class ut extends Ye{constructor(i){super(i.width,i.height),this.canvas=i,this.tempCanvasElement=null,this.buffer=ut.makeBufferFromCanvasImageData(i)}static makeBufferFromCanvasImageData(i){const o=i.getContext("2d").getImageData(0,0,i.width,i.height);return ut.toGrayscaleBuffer(o.data,i.width,i.height)}static toGrayscaleBuffer(i,o,l){const f=new Uint8ClampedArray(o*l);for(let d=0,m=0,y=i.length;d<y;d+=4,m++){let A;if(i[d+3]===0)A=255;else{const R=i[d],L=i[d+1],k=i[d+2];A=306*R+601*L+117*k+512>>10}f[m]=A}return f}getRow(i,o){if(i<0||i>=this.getHeight())throw new I("Requested row is outside the image: "+i);const l=this.getWidth(),f=i*l;return o===null?o=this.buffer.slice(f,f+l):(o.length<l&&(o=new Uint8ClampedArray(l)),o.set(this.buffer.slice(f,f+l))),o}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(i,o,l,f){return super.crop(i,o,l,f),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const i=this.canvas.ownerDocument.createElement("canvas");i.width=this.canvas.width,i.height=this.canvas.height,this.tempCanvasElement=i}return this.tempCanvasElement}rotate(i){const o=this.getTempCanvasElement(),l=o.getContext("2d"),f=i*ut.DEGREE_TO_RADIANS,d=this.canvas.width,m=this.canvas.height,y=Math.ceil(Math.abs(Math.cos(f))*d+Math.abs(Math.sin(f))*m),A=Math.ceil(Math.abs(Math.sin(f))*d+Math.abs(Math.cos(f))*m);return o.width=y,o.height=A,l.translate(y/2,A/2),l.rotate(f),l.drawImage(this.canvas,d/-2,m/-2),this.buffer=ut.makeBufferFromCanvasImageData(o),this}invert(){return new gt(this)}}ut.DEGREE_TO_RADIANS=Math.PI/180;class ie{constructor(i,o,l){this.deviceId=i,this.label=o,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Ae=(globalThis||Sf||self||window||void 0)&&(globalThis||Sf||self||window||void 0).__awaiter||function(P,i,o,l){function f(d){return d instanceof o?d:new o(function(m){m(d)})}return new(o||(o=Promise))(function(d,m){function y(R){try{S(l.next(R))}catch(L){m(L)}}function A(R){try{S(l.throw(R))}catch(L){m(L)}}function S(R){R.done?d(R.value):f(R.value).then(y,A)}S((l=l.apply(P,i||[])).next())})};class Ue{constructor(i,o=500,l){this.reader=i,this.timeBetweenScansMillis=o,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(i){this._timeBetweenDecodingAttempts=i<0?0:i}set hints(i){this._hints=i||null}get hints(){return this._hints}listVideoInputDevices(){return Ae(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const i=yield navigator.mediaDevices.enumerateDevices(),o=[];for(const l of i){const f=l.kind==="video"?"videoinput":l.kind;if(f!=="videoinput")continue;const d=l.deviceId||l.id,m=l.label||`Video device ${o.length+1}`,y=l.groupId,A={deviceId:d,label:m,kind:f,groupId:y};o.push(A)}return o})}getVideoInputDevices(){return Ae(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(o=>new ie(o.deviceId,o.label))})}findDeviceById(i){return Ae(this,void 0,void 0,function*(){const o=yield this.listVideoInputDevices();return o?o.find(l=>l.deviceId===i):null})}decodeFromInputVideoDevice(i,o){return Ae(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(i,o)})}decodeOnceFromVideoDevice(i,o){return Ae(this,void 0,void 0,function*(){this.reset();let l;i?l={deviceId:{exact:i}}:l={facingMode:"environment"};const f={video:l};return yield this.decodeOnceFromConstraints(f,o)})}decodeOnceFromConstraints(i,o){return Ae(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeOnceFromStream(l,o)})}decodeOnceFromStream(i,o){return Ae(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(i,o);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(i,o,l){return Ae(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(i,o,l)})}decodeFromVideoDevice(i,o,l){return Ae(this,void 0,void 0,function*(){let f;i?f={deviceId:{exact:i}}:f={facingMode:"environment"};const d={video:f};return yield this.decodeFromConstraints(d,o,l)})}decodeFromConstraints(i,o,l){return Ae(this,void 0,void 0,function*(){const f=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeFromStream(f,o,l)})}decodeFromStream(i,o,l){return Ae(this,void 0,void 0,function*(){this.reset();const f=yield this.attachStreamToVideo(i,o);return yield this.decodeContinuously(f,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(i,o){return Ae(this,void 0,void 0,function*(){const l=this.prepareVideoElement(o);return this.addVideoSource(l,i),this.videoElement=l,this.stream=i,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(i){return new Promise((o,l)=>this.playVideoOnLoad(i,()=>o()))}playVideoOnLoad(i,o){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(i),i.addEventListener("ended",this.videoEndedListener),i.addEventListener("canplay",this.videoCanPlayListener),i.addEventListener("playing",o),this.tryPlayVideo(i)}isVideoPlaying(i){return i.currentTime>0&&!i.paused&&!i.ended&&i.readyState>2}tryPlayVideo(i){return Ae(this,void 0,void 0,function*(){if(this.isVideoPlaying(i)){console.warn("Trying to play video that is already playing.");return}try{yield i.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(i,o){const l=document.getElementById(i);if(!l)throw new C(`element with id '${i}' not found`);if(l.nodeName.toLowerCase()!==o.toLowerCase())throw new C(`element with id '${i}' must be an ${o} element`);return l}decodeFromImage(i,o){if(!i&&!o)throw new C("either imageElement with a src set or an url must be provided");return o&&!i?this.decodeFromImageUrl(o):this.decodeFromImageElement(i)}decodeFromVideo(i,o){if(!i&&!o)throw new C("Either an element with a src set or an URL must be provided");return o&&!i?this.decodeFromVideoUrl(o):this.decodeFromVideoElement(i)}decodeFromVideoContinuously(i,o,l){if(i===void 0&&o===void 0)throw new C("Either an element with a src set or an URL must be provided");return o&&!i?this.decodeFromVideoUrlContinuously(o,l):this.decodeFromVideoElementContinuously(i,l)}decodeFromImageElement(i){if(!i)throw new C("An image element must be provided.");this.reset();const o=this.prepareImageElement(i);this.imageElement=o;let l;return this.isImageLoaded(o)?l=this.decodeOnce(o,!1,!0):l=this._decodeOnLoadImage(o),l}decodeFromVideoElement(i){const o=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideo(o)}decodeFromVideoElementContinuously(i,o){const l=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideoContinuously(l,o)}_decodeFromVideoElementSetup(i){if(!i)throw new C("A video element must be provided.");this.reset();const o=this.prepareVideoElement(i);return this.videoElement=o,o}decodeFromImageUrl(i){if(!i)throw new C("An URL must be provided.");this.reset();const o=this.prepareImageElement();this.imageElement=o;const l=this._decodeOnLoadImage(o);return o.src=i,l}decodeFromVideoUrl(i){if(!i)throw new C("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),l=this.decodeFromVideoElement(o);return o.src=i,l}decodeFromVideoUrlContinuously(i,o){if(!i)throw new C("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),f=this.decodeFromVideoElementContinuously(l,o);return l.src=i,f}_decodeOnLoadImage(i){return new Promise((o,l)=>{this.imageLoadedListener=()=>this.decodeOnce(i,!1,!0).then(o,l),i.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(i){return Ae(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(i),yield this.decodeOnce(i)})}_decodeOnLoadVideoContinuously(i,o){return Ae(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(i),this.decodeContinuously(i,o)})}isImageLoaded(i){return!(!i.complete||i.naturalWidth===0)}prepareImageElement(i){let o;return typeof i>"u"&&(o=document.createElement("img"),o.width=200,o.height=200),typeof i=="string"&&(o=this.getMediaElement(i,"img")),i instanceof HTMLImageElement&&(o=i),o}prepareVideoElement(i){let o;return!i&&typeof document<"u"&&(o=document.createElement("video"),o.width=200,o.height=200),typeof i=="string"&&(o=this.getMediaElement(i,"video")),i instanceof HTMLVideoElement&&(o=i),o.setAttribute("autoplay","true"),o.setAttribute("muted","true"),o.setAttribute("playsinline","true"),o}decodeOnce(i,o=!0,l=!0){this._stopAsyncDecode=!1;const f=(d,m)=>{if(this._stopAsyncDecode){m(new fe("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const y=this.decode(i);d(y)}catch(y){const A=o&&y instanceof fe,R=(y instanceof B||y instanceof j)&&l;if(A||R)return setTimeout(f,this._timeBetweenDecodingAttempts,d,m);m(y)}};return new Promise((d,m)=>f(d,m))}decodeContinuously(i,o){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const f=this.decode(i);o(f,null),setTimeout(l,this.timeBetweenScansMillis)}catch(f){o(null,f);const d=f instanceof B||f instanceof j,m=f instanceof fe;(d||m)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(i){const o=this.createBinaryBitmap(i);return this.decodeBitmap(o)}_isHTMLVideoElement(i){return i.videoWidth!==0}drawFrameOnCanvas(i,o,l){o||(o={sx:0,sy:0,sWidth:i.videoWidth,sHeight:i.videoHeight,dx:0,dy:0,dWidth:i.videoWidth,dHeight:i.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(i,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}drawImageOnCanvas(i,o,l=this.captureCanvasContext){o||(o={sx:0,sy:0,sWidth:i.naturalWidth,sHeight:i.naturalHeight,dx:0,dy:0,dWidth:i.naturalWidth,dHeight:i.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(i,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}createBinaryBitmap(i){this.getCaptureCanvasContext(i),this._isHTMLVideoElement(i)?this.drawFrameOnCanvas(i):this.drawImageOnCanvas(i);const o=this.getCaptureCanvas(i),l=new ut(o),f=new be(l);return new M(f)}getCaptureCanvasContext(i){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(i).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(i){if(!this.captureCanvas){const o=this.createCaptureCanvas(i);this.captureCanvas=o}return this.captureCanvas}decodeBitmap(i){return this.reader.decode(i,this._hints)}createCaptureCanvas(i){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const o=document.createElement("canvas");let l,f;return typeof i<"u"&&(i instanceof HTMLVideoElement?(l=i.videoWidth,f=i.videoHeight):i instanceof HTMLImageElement&&(l=i.naturalWidth||i.width,f=i.naturalHeight||i.height)),o.style.width=l+"px",o.style.height=f+"px",o.width=l,o.height=f,o}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(i=>i.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(i,o){try{i.srcObject=o}catch{i.src=URL.createObjectURL(o)}}cleanVideoSource(i){try{i.srcObject=null}catch{i.src=""}this.videoElement.removeAttribute("src")}}class Ve{constructor(i,o,l=o==null?0:8*o.length,f,d,m=$.currentTimeMillis()){this.text=i,this.rawBytes=o,this.numBits=l,this.resultPoints=f,this.format=d,this.timestamp=m,this.text=i,this.rawBytes=o,l==null?this.numBits=o==null?0:8*o.length:this.numBits=l,this.resultPoints=f,this.format=d,this.resultMetadata=null,m==null?this.timestamp=$.currentTimeMillis():this.timestamp=m}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(i,o){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(i,o)}putAllMetadata(i){i!==null&&(this.resultMetadata===null?this.resultMetadata=i:this.resultMetadata=new Map(i))}addResultPoints(i){const o=this.resultPoints;if(o===null)this.resultPoints=i;else if(i!==null&&i.length>0){const l=new Array(o.length+i.length);$.arraycopy(o,0,l,0,o.length),$.arraycopy(i,0,l,o.length,i.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var st;(function(P){P[P.AZTEC=0]="AZTEC",P[P.CODABAR=1]="CODABAR",P[P.CODE_39=2]="CODE_39",P[P.CODE_93=3]="CODE_93",P[P.CODE_128=4]="CODE_128",P[P.DATA_MATRIX=5]="DATA_MATRIX",P[P.EAN_8=6]="EAN_8",P[P.EAN_13=7]="EAN_13",P[P.ITF=8]="ITF",P[P.MAXICODE=9]="MAXICODE",P[P.PDF_417=10]="PDF_417",P[P.QR_CODE=11]="QR_CODE",P[P.RSS_14=12]="RSS_14",P[P.RSS_EXPANDED=13]="RSS_EXPANDED",P[P.UPC_A=14]="UPC_A",P[P.UPC_E=15]="UPC_E",P[P.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(st||(st={}));var Le=st,St;(function(P){P[P.OTHER=0]="OTHER",P[P.ORIENTATION=1]="ORIENTATION",P[P.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",P[P.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",P[P.ISSUE_NUMBER=4]="ISSUE_NUMBER",P[P.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",P[P.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",P[P.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",P[P.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",P[P.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",P[P.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(St||(St={}));var Ct=St;class Jt{constructor(i,o,l,f,d=-1,m=-1){this.rawBytes=i,this.text=o,this.byteSegments=l,this.ecLevel=f,this.structuredAppendSequenceNumber=d,this.structuredAppendParity=m,this.numBits=i==null?0:8*i.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(i){this.numBits=i}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(i){this.errorsCorrected=i}getErasures(){return this.erasures}setErasures(i){this.erasures=i}getOther(){return this.other}setOther(i){this.other=i}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Wr{exp(i){return this.expTable[i]}log(i){if(i===0)throw new I;return this.logTable[i]}static addOrSubtract(i,o){return i^o}}class Bn{constructor(i,o){if(o.length===0)throw new I;this.field=i;const l=o.length;if(l>1&&o[0]===0){let f=1;for(;f<l&&o[f]===0;)f++;f===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-f),$.arraycopy(o,f,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);const o=this.coefficients;let l;if(i===1){l=0;for(let m=0,y=o.length;m!==y;m++){const A=o[m];l=Wr.addOrSubtract(l,A)}return l}l=o[0];const f=o.length,d=this.field;for(let m=1;m<f;m++)l=Wr.addOrSubtract(d.multiply(i,l),o[m]);return l}addOrSubtract(i){if(!this.field.equals(i.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero())return i;if(i.isZero())return this;let o=this.coefficients,l=i.coefficients;if(o.length>l.length){const m=o;o=l,l=m}let f=new Int32Array(l.length);const d=l.length-o.length;$.arraycopy(l,0,f,0,d);for(let m=d;m<l.length;m++)f[m]=Wr.addOrSubtract(o[m-d],l[m]);return new Bn(this.field,f)}multiply(i){if(!this.field.equals(i.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero()||i.isZero())return this.field.getZero();const o=this.coefficients,l=o.length,f=i.coefficients,d=f.length,m=new Int32Array(l+d-1),y=this.field;for(let A=0;A<l;A++){const S=o[A];for(let R=0;R<d;R++)m[A+R]=Wr.addOrSubtract(m[A+R],y.multiply(S,f[R]))}return new Bn(y,m)}multiplyScalar(i){if(i===0)return this.field.getZero();if(i===1)return this;const o=this.coefficients.length,l=this.field,f=new Int32Array(o),d=this.coefficients;for(let m=0;m<o;m++)f[m]=l.multiply(d[m],i);return new Bn(l,f)}multiplyByMonomial(i,o){if(i<0)throw new I;if(o===0)return this.field.getZero();const l=this.coefficients,f=l.length,d=new Int32Array(f+i),m=this.field;for(let y=0;y<f;y++)d[y]=m.multiply(l[y],o);return new Bn(m,d)}divide(i){if(!this.field.equals(i.field))throw new I("GenericGFPolys do not have same GenericGF field");if(i.isZero())throw new I("Divide by 0");const o=this.field;let l=o.getZero(),f=this;const d=i.getCoefficient(i.getDegree()),m=o.inverse(d);for(;f.getDegree()>=i.getDegree()&&!f.isZero();){const y=f.getDegree()-i.getDegree(),A=o.multiply(f.getCoefficient(f.getDegree()),m),S=i.multiplyByMonomial(y,A),R=o.buildMonomial(y,A);l=l.addOrSubtract(R),f=f.addOrSubtract(S)}return[l,f]}toString(){let i="";for(let o=this.getDegree();o>=0;o--){let l=this.getCoefficient(o);if(l!==0){if(l<0?(i+=" - ",l=-l):i.length>0&&(i+=" + "),o===0||l!==1){const f=this.field.log(l);f===0?i+="1":f===1?i+="a":(i+="a^",i+=f)}o!==0&&(o===1?i+="x":(i+="x^",i+=o))}}return i}}class ui extends E{}ui.kind="ArithmeticException";class ht extends Wr{constructor(i,o,l){super(),this.primitive=i,this.size=o,this.generatorBase=l;const f=new Int32Array(o);let d=1;for(let y=0;y<o;y++)f[y]=d,d*=2,d>=o&&(d^=i,d&=o-1);this.expTable=f;const m=new Int32Array(o);for(let y=0;y<o-1;y++)m[f[y]]=y;this.logTable=m,this.zero=new Bn(this,Int32Array.from([0])),this.one=new Bn(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,o){if(i<0)throw new I;if(o===0)return this.zero;const l=new Int32Array(i+1);return l[0]=o,new Bn(this,l)}inverse(i){if(i===0)throw new ui;return this.expTable[this.size-this.logTable[i]-1]}multiply(i,o){return i===0||o===0?0:this.expTable[(this.logTable[i]+this.logTable[o])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+K.toHexString(this.primitive)+","+this.size+")"}equals(i){return i===this}}ht.AZTEC_DATA_12=new ht(4201,4096,1),ht.AZTEC_DATA_10=new ht(1033,1024,1),ht.AZTEC_DATA_6=new ht(67,64,1),ht.AZTEC_PARAM=new ht(19,16,1),ht.QR_CODE_FIELD_256=new ht(285,256,0),ht.DATA_MATRIX_FIELD_256=new ht(301,256,1),ht.AZTEC_DATA_8=ht.DATA_MATRIX_FIELD_256,ht.MAXICODE_FIELD_64=ht.AZTEC_DATA_6;class rr extends E{}rr.kind="ReedSolomonException";class ir extends E{}ir.kind="IllegalStateException";class Kr{constructor(i){this.field=i}decode(i,o){const l=this.field,f=new Bn(l,i),d=new Int32Array(o);let m=!0;for(let G=0;G<o;G++){const te=f.evaluateAt(l.exp(G+l.getGeneratorBase()));d[d.length-1-G]=te,te!==0&&(m=!1)}if(m)return;const y=new Bn(l,d),A=this.runEuclideanAlgorithm(l.buildMonomial(o,1),y,o),S=A[0],R=A[1],L=this.findErrorLocations(S),k=this.findErrorMagnitudes(R,L);for(let G=0;G<L.length;G++){const te=i.length-1-l.log(L[G]);if(te<0)throw new rr("Bad error location");i[te]=ht.addOrSubtract(i[te],k[G])}}runEuclideanAlgorithm(i,o,l){if(i.getDegree()<o.getDegree()){const G=i;i=o,o=G}const f=this.field;let d=i,m=o,y=f.getZero(),A=f.getOne();for(;m.getDegree()>=(l/2|0);){let G=d,te=y;if(d=m,y=A,d.isZero())throw new rr("r_{i-1} was zero");m=G;let re=f.getZero();const ue=d.getCoefficient(d.getDegree()),ye=f.inverse(ue);for(;m.getDegree()>=d.getDegree()&&!m.isZero();){const ke=m.getDegree()-d.getDegree(),Pe=f.multiply(m.getCoefficient(m.getDegree()),ye);re=re.addOrSubtract(f.buildMonomial(ke,Pe)),m=m.addOrSubtract(d.multiplyByMonomial(ke,Pe))}if(A=re.multiply(y).addOrSubtract(te),m.getDegree()>=d.getDegree())throw new ir("Division algorithm failed to reduce polynomial?")}const S=A.getCoefficient(0);if(S===0)throw new rr("sigmaTilde(0) was zero");const R=f.inverse(S),L=A.multiplyScalar(R),k=m.multiplyScalar(R);return[L,k]}findErrorLocations(i){const o=i.getDegree();if(o===1)return Int32Array.from([i.getCoefficient(1)]);const l=new Int32Array(o);let f=0;const d=this.field;for(let m=1;m<d.getSize()&&f<o;m++)i.evaluateAt(m)===0&&(l[f]=d.inverse(m),f++);if(f!==o)throw new rr("Error locator degree does not match number of roots");return l}findErrorMagnitudes(i,o){const l=o.length,f=new Int32Array(l),d=this.field;for(let m=0;m<l;m++){const y=d.inverse(o[m]);let A=1;for(let S=0;S<l;S++)if(m!==S){const R=d.multiply(o[S],y),L=(R&1)===0?R|1:R&-2;A=d.multiply(A,L)}f[m]=d.multiply(i.evaluateAt(y),d.inverse(A)),d.getGeneratorBase()!==0&&(f[m]=d.multiply(f[m],y))}return f}}var mn;(function(P){P[P.UPPER=0]="UPPER",P[P.LOWER=1]="LOWER",P[P.MIXED=2]="MIXED",P[P.DIGIT=3]="DIGIT",P[P.PUNCT=4]="PUNCT",P[P.BINARY=5]="BINARY"})(mn||(mn={}));class qt{decode(i){this.ddata=i;let o=i.getBits(),l=this.extractBits(o),f=this.correctBits(l),d=qt.convertBoolArrayToByteArray(f),m=qt.getEncodedData(f),y=new Jt(d,m,null,null);return y.setNumBits(f.length),y}static highLevelDecode(i){return this.getEncodedData(i)}static getEncodedData(i){let o=i.length,l=mn.UPPER,f=mn.UPPER,d="",m=0;for(;m<o;)if(f===mn.BINARY){if(o-m<5)break;let y=qt.readCode(i,m,5);if(m+=5,y===0){if(o-m<11)break;y=qt.readCode(i,m,11)+31,m+=11}for(let A=0;A<y;A++){if(o-m<8){m=o;break}const S=qt.readCode(i,m,8);d+=Z.castAsNonUtf8Char(S),m+=8}f=l}else{let y=f===mn.DIGIT?4:5;if(o-m<y)break;let A=qt.readCode(i,m,y);m+=y;let S=qt.getCharacter(f,A);S.startsWith("CTRL_")?(l=f,f=qt.getTable(S.charAt(5)),S.charAt(6)==="L"&&(l=f)):(d+=S,f=l)}return d}static getTable(i){switch(i){case"L":return mn.LOWER;case"P":return mn.PUNCT;case"M":return mn.MIXED;case"D":return mn.DIGIT;case"B":return mn.BINARY;case"U":default:return mn.UPPER}}static getCharacter(i,o){switch(i){case mn.UPPER:return qt.UPPER_TABLE[o];case mn.LOWER:return qt.LOWER_TABLE[o];case mn.MIXED:return qt.MIXED_TABLE[o];case mn.PUNCT:return qt.PUNCT_TABLE[o];case mn.DIGIT:return qt.DIGIT_TABLE[o];default:throw new ir("Bad table")}}correctBits(i){let o,l;this.ddata.getNbLayers()<=2?(l=6,o=ht.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,o=ht.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,o=ht.AZTEC_DATA_10):(l=12,o=ht.AZTEC_DATA_12);let f=this.ddata.getNbDatablocks(),d=i.length/l;if(d<f)throw new j;let m=i.length%l,y=new Int32Array(d);for(let k=0;k<d;k++,m+=l)y[k]=qt.readCode(i,m,l);try{new Kr(o).decode(y,d-f)}catch(k){throw new j(k)}let A=(1<<l)-1,S=0;for(let k=0;k<f;k++){let G=y[k];if(G===0||G===A)throw new j;(G===1||G===A-1)&&S++}let R=new Array(f*l-S),L=0;for(let k=0;k<f;k++){let G=y[k];if(G===1||G===A-1)R.fill(G>1,L,L+l-1),L+=l-1;else for(let te=l-1;te>=0;--te)R[L++]=(G&1<<te)!==0}return R}extractBits(i){let o=this.ddata.isCompact(),l=this.ddata.getNbLayers(),f=(o?11:14)+l*4,d=new Int32Array(f),m=new Array(this.totalBitsInLayer(l,o));if(o)for(let y=0;y<d.length;y++)d[y]=y;else{let y=f+1+2*K.truncDivision(K.truncDivision(f,2)-1,15),A=f/2,S=K.truncDivision(y,2);for(let R=0;R<A;R++){let L=R+K.truncDivision(R,15);d[A-R-1]=S-L-1,d[A+R]=S+L+1}}for(let y=0,A=0;y<l;y++){let S=(l-y)*4+(o?9:12),R=y*2,L=f-1-R;for(let k=0;k<S;k++){let G=k*2;for(let te=0;te<2;te++)m[A+G+te]=i.get(d[R+te],d[R+k]),m[A+2*S+G+te]=i.get(d[R+k],d[L-te]),m[A+4*S+G+te]=i.get(d[L-te],d[L-k]),m[A+6*S+G+te]=i.get(d[L-k],d[R+te])}A+=S*8}return m}static readCode(i,o,l){let f=0;for(let d=o;d<o+l;d++)f<<=1,i[d]&&(f|=1);return f}static readByte(i,o){let l=i.length-o;return l>=8?qt.readCode(i,o,8):qt.readCode(i,o,l)<<8-l}static convertBoolArrayToByteArray(i){let o=new Uint8Array((i.length+7)/8);for(let l=0;l<o.length;l++)o[l]=qt.readByte(i,8*l);return o}totalBitsInLayer(i,o){return((o?88:112)+16*i)*i}}qt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],qt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],qt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],qt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],qt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class et{constructor(){}static round(i){return i===NaN?0:i<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:i>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:i+(i<0?-.5:.5)|0}static distance(i,o,l,f){const d=i-l,m=o-f;return Math.sqrt(d*d+m*m)}static sum(i){let o=0;for(let l=0,f=i.length;l!==f;l++){const d=i[l];o+=d}return o}}class bn{static floatToIntBits(i){return i}}bn.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Fe{constructor(i,o){this.x=i,this.y=o}getX(){return this.x}getY(){return this.y}equals(i){if(i instanceof Fe){const o=i;return this.x===o.x&&this.y===o.y}return!1}hashCode(){return 31*bn.floatToIntBits(this.x)+bn.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(i){const o=this.distance(i[0],i[1]),l=this.distance(i[1],i[2]),f=this.distance(i[0],i[2]);let d,m,y;if(l>=o&&l>=f?(m=i[0],d=i[1],y=i[2]):f>=l&&f>=o?(m=i[1],d=i[0],y=i[2]):(m=i[2],d=i[0],y=i[1]),this.crossProductZ(d,m,y)<0){const A=d;d=y,y=A}i[0]=d,i[1]=m,i[2]=y}static distance(i,o){return et.distance(i.x,i.y,o.x,o.y)}static crossProductZ(i,o,l){const f=o.x,d=o.y;return(l.x-f)*(i.y-d)-(l.y-d)*(i.x-f)}}class Ts{constructor(i,o){this.bits=i,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class rs extends Ts{constructor(i,o,l,f,d){super(i,o),this.compact=l,this.nbDatablocks=f,this.nbLayers=d}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class pn{constructor(i,o,l,f){this.image=i,this.height=i.getHeight(),this.width=i.getWidth(),o==null&&(o=pn.INIT_SIZE),l==null&&(l=i.getWidth()/2|0),f==null&&(f=i.getHeight()/2|0);const d=o/2|0;if(this.leftInit=l-d,this.rightInit=l+d,this.upInit=f-d,this.downInit=f+d,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new fe}detect(){let i=this.leftInit,o=this.rightInit,l=this.upInit,f=this.downInit,d=!1,m=!0,y=!1,A=!1,S=!1,R=!1,L=!1;const k=this.width,G=this.height;for(;m;){m=!1;let te=!0;for(;(te||!A)&&o<k;)te=this.containsBlackPoint(l,f,o,!1),te?(o++,m=!0,A=!0):A||o++;if(o>=k){d=!0;break}let re=!0;for(;(re||!S)&&f<G;)re=this.containsBlackPoint(i,o,f,!0),re?(f++,m=!0,S=!0):S||f++;if(f>=G){d=!0;break}let ue=!0;for(;(ue||!R)&&i>=0;)ue=this.containsBlackPoint(l,f,i,!1),ue?(i--,m=!0,R=!0):R||i--;if(i<0){d=!0;break}let ye=!0;for(;(ye||!L)&&l>=0;)ye=this.containsBlackPoint(i,o,l,!0),ye?(l--,m=!0,L=!0):L||l--;if(l<0){d=!0;break}m&&(y=!0)}if(!d&&y){const te=o-i;let re=null;for(let Pe=1;re===null&&Pe<te;Pe++)re=this.getBlackPointOnSegment(i,f-Pe,i+Pe,f);if(re==null)throw new fe;let ue=null;for(let Pe=1;ue===null&&Pe<te;Pe++)ue=this.getBlackPointOnSegment(i,l+Pe,i+Pe,l);if(ue==null)throw new fe;let ye=null;for(let Pe=1;ye===null&&Pe<te;Pe++)ye=this.getBlackPointOnSegment(o,l+Pe,o-Pe,l);if(ye==null)throw new fe;let ke=null;for(let Pe=1;ke===null&&Pe<te;Pe++)ke=this.getBlackPointOnSegment(o,f-Pe,o-Pe,f);if(ke==null)throw new fe;return this.centerEdges(ke,re,ye,ue)}else throw new fe}getBlackPointOnSegment(i,o,l,f){const d=et.round(et.distance(i,o,l,f)),m=(l-i)/d,y=(f-o)/d,A=this.image;for(let S=0;S<d;S++){const R=et.round(i+S*m),L=et.round(o+S*y);if(A.get(R,L))return new Fe(R,L)}return null}centerEdges(i,o,l,f){const d=i.getX(),m=i.getY(),y=o.getX(),A=o.getY(),S=l.getX(),R=l.getY(),L=f.getX(),k=f.getY(),G=pn.CORR;return d<this.width/2?[new Fe(L-G,k+G),new Fe(y+G,A+G),new Fe(S-G,R-G),new Fe(d+G,m-G)]:[new Fe(L+G,k+G),new Fe(y+G,A-G),new Fe(S-G,R+G),new Fe(d-G,m-G)]}containsBlackPoint(i,o,l,f){const d=this.image;if(f){for(let m=i;m<=o;m++)if(d.get(m,l))return!0}else for(let m=i;m<=o;m++)if(d.get(l,m))return!0;return!1}}pn.INIT_SIZE=10,pn.CORR=1;class Qr{static checkAndNudgePoints(i,o){const l=i.getWidth(),f=i.getHeight();let d=!0;for(let m=0;m<o.length&&d;m+=2){const y=Math.floor(o[m]),A=Math.floor(o[m+1]);if(y<-1||y>l||A<-1||A>f)throw new fe;d=!1,y===-1?(o[m]=0,d=!0):y===l&&(o[m]=l-1,d=!0),A===-1?(o[m+1]=0,d=!0):A===f&&(o[m+1]=f-1,d=!0)}d=!0;for(let m=o.length-2;m>=0&&d;m-=2){const y=Math.floor(o[m]),A=Math.floor(o[m+1]);if(y<-1||y>l||A<-1||A>f)throw new fe;d=!1,y===-1?(o[m]=0,d=!0):y===l&&(o[m]=l-1,d=!0),A===-1?(o[m+1]=0,d=!0):A===f&&(o[m+1]=f-1,d=!0)}}}class ur{constructor(i,o,l,f,d,m,y,A,S){this.a11=i,this.a21=o,this.a31=l,this.a12=f,this.a22=d,this.a32=m,this.a13=y,this.a23=A,this.a33=S}static quadrilateralToQuadrilateral(i,o,l,f,d,m,y,A,S,R,L,k,G,te,re,ue){const ye=ur.quadrilateralToSquare(i,o,l,f,d,m,y,A);return ur.squareToQuadrilateral(S,R,L,k,G,te,re,ue).times(ye)}transformPoints(i){const o=i.length,l=this.a11,f=this.a12,d=this.a13,m=this.a21,y=this.a22,A=this.a23,S=this.a31,R=this.a32,L=this.a33;for(let k=0;k<o;k+=2){const G=i[k],te=i[k+1],re=d*G+A*te+L;i[k]=(l*G+m*te+S)/re,i[k+1]=(f*G+y*te+R)/re}}transformPointsWithValues(i,o){const l=this.a11,f=this.a12,d=this.a13,m=this.a21,y=this.a22,A=this.a23,S=this.a31,R=this.a32,L=this.a33,k=i.length;for(let G=0;G<k;G++){const te=i[G],re=o[G],ue=d*te+A*re+L;i[G]=(l*te+m*re+S)/ue,o[G]=(f*te+y*re+R)/ue}}static squareToQuadrilateral(i,o,l,f,d,m,y,A){const S=i-l+d-y,R=o-f+m-A;if(S===0&&R===0)return new ur(l-i,d-l,i,f-o,m-f,o,0,0,1);{const L=l-d,k=y-d,G=f-m,te=A-m,re=L*te-k*G,ue=(S*te-k*R)/re,ye=(L*R-S*G)/re;return new ur(l-i+ue*l,y-i+ye*y,i,f-o+ue*f,A-o+ye*A,o,ue,ye,1)}}static quadrilateralToSquare(i,o,l,f,d,m,y,A){return ur.squareToQuadrilateral(i,o,l,f,d,m,y,A).buildAdjoint()}buildAdjoint(){return new ur(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(i){return new ur(this.a11*i.a11+this.a21*i.a12+this.a31*i.a13,this.a11*i.a21+this.a21*i.a22+this.a31*i.a23,this.a11*i.a31+this.a21*i.a32+this.a31*i.a33,this.a12*i.a11+this.a22*i.a12+this.a32*i.a13,this.a12*i.a21+this.a22*i.a22+this.a32*i.a23,this.a12*i.a31+this.a22*i.a32+this.a32*i.a33,this.a13*i.a11+this.a23*i.a12+this.a33*i.a13,this.a13*i.a21+this.a23*i.a22+this.a33*i.a23,this.a13*i.a31+this.a23*i.a32+this.a33*i.a33)}}class is extends Qr{sampleGrid(i,o,l,f,d,m,y,A,S,R,L,k,G,te,re,ue,ye,ke,Pe){const Oe=ur.quadrilateralToQuadrilateral(f,d,m,y,A,S,R,L,k,G,te,re,ue,ye,ke,Pe);return this.sampleGridWithTransform(i,o,l,Oe)}sampleGridWithTransform(i,o,l,f){if(o<=0||l<=0)throw new fe;const d=new Je(o,l),m=new Float32Array(2*o);for(let y=0;y<l;y++){const A=m.length,S=y+.5;for(let R=0;R<A;R+=2)m[R]=R/2+.5,m[R+1]=S;f.transformPoints(m),Qr.checkAndNudgePoints(i,m);try{for(let R=0;R<A;R+=2)i.get(Math.floor(m[R]),Math.floor(m[R+1]))&&d.set(R/2,y)}catch{throw new fe}}return d}}class hr{static setGridSampler(i){hr.gridSampler=i}static getInstance(){return hr.gridSampler}}hr.gridSampler=new is;class Tn{constructor(i,o){this.x=i,this.y=o}toResultPoint(){return new Fe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class vs{constructor(i){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=i}detect(){return this.detectMirror(!1)}detectMirror(i){let o=this.getMatrixCenter(),l=this.getBullsEyeCorners(o);if(i){let m=l[0];l[0]=l[2],l[2]=m}this.extractParameters(l);let f=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),d=this.getMatrixCornerPoints(l);return new rs(f,d,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(i){if(!this.isValidPoint(i[0])||!this.isValidPoint(i[1])||!this.isValidPoint(i[2])||!this.isValidPoint(i[3]))throw new fe;let o=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(i[0],i[1],o),this.sampleLine(i[1],i[2],o),this.sampleLine(i[2],i[3],o),this.sampleLine(i[3],i[0],o)]);this.shift=this.getRotation(l,o);let f=0;for(let m=0;m<4;m++){let y=l[(this.shift+m)%4];this.compact?(f<<=7,f+=y>>1&127):(f<<=10,f+=(y>>2&992)+(y>>1&31))}let d=this.getCorrectedParameterData(f,this.compact);this.compact?(this.nbLayers=(d>>6)+1,this.nbDataBlocks=(d&63)+1):(this.nbLayers=(d>>11)+1,this.nbDataBlocks=(d&2047)+1)}getRotation(i,o){let l=0;i.forEach((f,d,m)=>{let y=(f>>o-2<<1)+(f&1);l=(l<<3)+y}),l=((l&1)<<11)+(l>>1);for(let f=0;f<4;f++)if(K.bitCount(l^this.EXPECTED_CORNER_BITS[f])<=2)return f;throw new fe}getCorrectedParameterData(i,o){let l,f;o?(l=7,f=2):(l=10,f=4);let d=l-f,m=new Int32Array(l);for(let A=l-1;A>=0;--A)m[A]=i&15,i>>=4;try{new Kr(ht.AZTEC_PARAM).decode(m,d)}catch{throw new fe}let y=0;for(let A=0;A<f;A++)y=(y<<4)+m[A];return y}getBullsEyeCorners(i){let o=i,l=i,f=i,d=i,m=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let L=this.getFirstDifferent(o,m,1,-1),k=this.getFirstDifferent(l,m,1,1),G=this.getFirstDifferent(f,m,-1,1),te=this.getFirstDifferent(d,m,-1,-1);if(this.nbCenterLayers>2){let re=this.distancePoint(te,L)*this.nbCenterLayers/(this.distancePoint(d,o)*(this.nbCenterLayers+2));if(re<.75||re>1.25||!this.isWhiteOrBlackRectangle(L,k,G,te))break}o=L,l=k,f=G,d=te,m=!m}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new fe;this.compact=this.nbCenterLayers===5;let y=new Fe(o.getX()+.5,o.getY()-.5),A=new Fe(l.getX()+.5,l.getY()+.5),S=new Fe(f.getX()-.5,f.getY()+.5),R=new Fe(d.getX()-.5,d.getY()-.5);return this.expandSquare([y,A,S,R],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let i,o,l,f;try{let y=new pn(this.image).detect();i=y[0],o=y[1],l=y[2],f=y[3]}catch{let A=this.image.getWidth()/2,S=this.image.getHeight()/2;i=this.getFirstDifferent(new Tn(A+7,S-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new Tn(A+7,S+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Tn(A-7,S+7),!1,-1,1).toResultPoint(),f=this.getFirstDifferent(new Tn(A-7,S-7),!1,-1,-1).toResultPoint()}let d=et.round((i.getX()+f.getX()+o.getX()+l.getX())/4),m=et.round((i.getY()+f.getY()+o.getY()+l.getY())/4);try{let y=new pn(this.image,15,d,m).detect();i=y[0],o=y[1],l=y[2],f=y[3]}catch{i=this.getFirstDifferent(new Tn(d+7,m-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new Tn(d+7,m+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Tn(d-7,m+7),!1,-1,1).toResultPoint(),f=this.getFirstDifferent(new Tn(d-7,m-7),!1,-1,-1).toResultPoint()}return d=et.round((i.getX()+f.getX()+o.getX()+l.getX())/4),m=et.round((i.getY()+f.getY()+o.getY()+l.getY())/4),new Tn(d,m)}getMatrixCornerPoints(i){return this.expandSquare(i,2*this.nbCenterLayers,this.getDimension())}sampleGrid(i,o,l,f,d){let m=hr.getInstance(),y=this.getDimension(),A=y/2-this.nbCenterLayers,S=y/2+this.nbCenterLayers;return m.sampleGrid(i,y,y,A,A,S,A,S,S,A,S,o.getX(),o.getY(),l.getX(),l.getY(),f.getX(),f.getY(),d.getX(),d.getY())}sampleLine(i,o,l){let f=0,d=this.distanceResultPoint(i,o),m=d/l,y=i.getX(),A=i.getY(),S=m*(o.getX()-i.getX())/d,R=m*(o.getY()-i.getY())/d;for(let L=0;L<l;L++)this.image.get(et.round(y+L*S),et.round(A+L*R))&&(f|=1<<l-L-1);return f}isWhiteOrBlackRectangle(i,o,l,f){let d=3;i=new Tn(i.getX()-d,i.getY()+d),o=new Tn(o.getX()-d,o.getY()-d),l=new Tn(l.getX()+d,l.getY()-d),f=new Tn(f.getX()+d,f.getY()+d);let m=this.getColor(f,i);if(m===0)return!1;let y=this.getColor(i,o);return y!==m||(y=this.getColor(o,l),y!==m)?!1:(y=this.getColor(l,f),y===m)}getColor(i,o){let l=this.distancePoint(i,o),f=(o.getX()-i.getX())/l,d=(o.getY()-i.getY())/l,m=0,y=i.getX(),A=i.getY(),S=this.image.get(i.getX(),i.getY()),R=Math.ceil(l);for(let k=0;k<R;k++)y+=f,A+=d,this.image.get(et.round(y),et.round(A))!==S&&m++;let L=m/l;return L>.1&&L<.9?0:L<=.1===S?1:-1}getFirstDifferent(i,o,l,f){let d=i.getX()+l,m=i.getY()+f;for(;this.isValid(d,m)&&this.image.get(d,m)===o;)d+=l,m+=f;for(d-=l,m-=f;this.isValid(d,m)&&this.image.get(d,m)===o;)d+=l;for(d-=l;this.isValid(d,m)&&this.image.get(d,m)===o;)m+=f;return m-=f,new Tn(d,m)}expandSquare(i,o,l){let f=l/(2*o),d=i[0].getX()-i[2].getX(),m=i[0].getY()-i[2].getY(),y=(i[0].getX()+i[2].getX())/2,A=(i[0].getY()+i[2].getY())/2,S=new Fe(y+f*d,A+f*m),R=new Fe(y-f*d,A-f*m);d=i[1].getX()-i[3].getX(),m=i[1].getY()-i[3].getY(),y=(i[1].getX()+i[3].getX())/2,A=(i[1].getY()+i[3].getY())/2;let L=new Fe(y+f*d,A+f*m),k=new Fe(y-f*d,A-f*m);return[S,L,R,k]}isValid(i,o){return i>=0&&i<this.image.getWidth()&&o>0&&o<this.image.getHeight()}isValidPoint(i){let o=et.round(i.getX()),l=et.round(i.getY());return this.isValid(o,l)}distancePoint(i,o){return et.distance(i.getX(),i.getY(),o.getX(),o.getY())}distanceResultPoint(i,o){return et.distance(i.getX(),i.getY(),o.getX(),o.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(K.truncDivision(this.nbLayers-4,8)+1)+15}}class ss{decode(i,o=null){let l=null,f=new vs(i.getBlackMatrix()),d=null,m=null;try{let R=f.detectMirror(!1);d=R.getPoints(),this.reportFoundResultPoints(o,d),m=new qt().decode(R)}catch(R){l=R}if(m==null)try{let R=f.detectMirror(!0);d=R.getPoints(),this.reportFoundResultPoints(o,d),m=new qt().decode(R)}catch(R){throw l??R}let y=new Ve(m.getText(),m.getRawBytes(),m.getNumBits(),d,Le.AZTEC,$.currentTimeMillis()),A=m.getByteSegments();A!=null&&y.putMetadata(Ct.BYTE_SEGMENTS,A);let S=m.getECLevel();return S!=null&&y.putMetadata(Ct.ERROR_CORRECTION_LEVEL,S),y}reportFoundResultPoints(i,o){if(i!=null){let l=i.get(De.NEED_RESULT_POINT_CALLBACK);l!=null&&o.forEach((f,d,m)=>{l.foundPossibleResultPoint(f)})}}reset(){}}class ra extends Ue{constructor(i=500){super(new ss,i)}}class Yt{decode(i,o){try{return this.doDecode(i,o)}catch{if(o&&o.get(De.TRY_HARDER)===!0&&i.isRotateSupported()){const d=i.rotateCounterClockwise(),m=this.doDecode(d,o),y=m.getResultMetadata();let A=270;y!==null&&y.get(Ct.ORIENTATION)===!0&&(A=A+y.get(Ct.ORIENTATION)%360),m.putMetadata(Ct.ORIENTATION,A);const S=m.getResultPoints();if(S!==null){const R=d.getHeight();for(let L=0;L<S.length;L++)S[L]=new Fe(R-S[L].getY()-1,S[L].getX())}return m}else throw new fe}}reset(){}doDecode(i,o){const l=i.getWidth(),f=i.getHeight();let d=new le(l);const m=o&&o.get(De.TRY_HARDER)===!0,y=Math.max(1,f>>(m?8:5));let A;m?A=f:A=15;const S=Math.trunc(f/2);for(let R=0;R<A;R++){const L=Math.trunc((R+1)/2),k=(R&1)===0,G=S+y*(k?L:-L);if(G<0||G>=f)break;try{d=i.getBlackRow(G,d)}catch{continue}for(let te=0;te<2;te++){if(te===1&&(d.reverse(),o&&o.get(De.NEED_RESULT_POINT_CALLBACK)===!0)){const re=new Map;o.forEach((ue,ye)=>re.set(ye,ue)),re.delete(De.NEED_RESULT_POINT_CALLBACK),o=re}try{const re=this.decodeRow(G,d,o);if(te===1){re.putMetadata(Ct.ORIENTATION,180);const ue=re.getResultPoints();ue!==null&&(ue[0]=new Fe(l-ue[0].getX()-1,ue[0].getY()),ue[1]=new Fe(l-ue[1].getX()-1,ue[1].getY()))}return re}catch{}}}throw new fe}static recordPattern(i,o,l){const f=l.length;for(let S=0;S<f;S++)l[S]=0;const d=i.getSize();if(o>=d)throw new fe;let m=!i.get(o),y=0,A=o;for(;A<d;){if(i.get(A)!==m)l[y]++;else{if(++y===f)break;l[y]=1,m=!m}A++}if(!(y===f||y===f-1&&A===d))throw new fe}static recordPatternInReverse(i,o,l){let f=l.length,d=i.get(o);for(;o>0&&f>=0;)i.get(--o)!==d&&(f--,d=!d);if(f>=0)throw new fe;Yt.recordPattern(i,o+1,l)}static patternMatchVariance(i,o,l){const f=i.length;let d=0,m=0;for(let S=0;S<f;S++)d+=i[S],m+=o[S];if(d<m)return Number.POSITIVE_INFINITY;const y=d/m;l*=y;let A=0;for(let S=0;S<f;S++){const R=i[S],L=o[S]*y,k=R>L?R-L:L-R;if(k>l)return Number.POSITIVE_INFINITY;A+=k}return A/d}}class Me extends Yt{static findStartPattern(i){const o=i.getSize(),l=i.getNextSet(0);let f=0,d=Int32Array.from([0,0,0,0,0,0]),m=l,y=!1;const A=6;for(let S=l;S<o;S++)if(i.get(S)!==y)d[f]++;else{if(f===A-1){let R=Me.MAX_AVG_VARIANCE,L=-1;for(let k=Me.CODE_START_A;k<=Me.CODE_START_C;k++){const G=Yt.patternMatchVariance(d,Me.CODE_PATTERNS[k],Me.MAX_INDIVIDUAL_VARIANCE);G<R&&(R=G,L=k)}if(L>=0&&i.isRange(Math.max(0,m-(S-m)/2),m,!1))return Int32Array.from([m,S,L]);m+=d[0]+d[1],d=d.slice(2,d.length-1),d[f-1]=0,d[f]=0,f--}else f++;d[f]=1,y=!y}throw new fe}static decodeCode(i,o,l){Yt.recordPattern(i,l,o);let f=Me.MAX_AVG_VARIANCE,d=-1;for(let m=0;m<Me.CODE_PATTERNS.length;m++){const y=Me.CODE_PATTERNS[m],A=this.patternMatchVariance(o,y,Me.MAX_INDIVIDUAL_VARIANCE);A<f&&(f=A,d=m)}if(d>=0)return d;throw new fe}decodeRow(i,o,l){const f=l&&l.get(De.ASSUME_GS1)===!0,d=Me.findStartPattern(o),m=d[2];let y=0;const A=new Uint8Array(20);A[y++]=m;let S;switch(m){case Me.CODE_START_A:S=Me.CODE_CODE_A;break;case Me.CODE_START_B:S=Me.CODE_CODE_B;break;case Me.CODE_START_C:S=Me.CODE_CODE_C;break;default:throw new j}let R=!1,L=!1,k="",G=d[0],te=d[1];const re=Int32Array.from([0,0,0,0,0,0]);let ue=0,ye=0,ke=m,Pe=0,Oe=!0,Rt=!1,yt=!1;for(;!R;){const xa=L;switch(L=!1,ue=ye,ye=Me.decodeCode(o,re,te),A[y++]=ye,ye!==Me.CODE_STOP&&(Oe=!0),ye!==Me.CODE_STOP&&(Pe++,ke+=Pe*ye),G=te,te+=re.reduce((Ah,qc)=>Ah+qc,0),ye){case Me.CODE_START_A:case Me.CODE_START_B:case Me.CODE_START_C:throw new j}switch(S){case Me.CODE_CODE_A:if(ye<64)yt===Rt?k+=String.fromCharCode(32+ye):k+=String.fromCharCode(32+ye+128),yt=!1;else if(ye<96)yt===Rt?k+=String.fromCharCode(ye-64):k+=String.fromCharCode(ye+64),yt=!1;else switch(ye!==Me.CODE_STOP&&(Oe=!1),ye){case Me.CODE_FNC_1:f&&(k.length===0?k+="]C1":k+="");break;case Me.CODE_FNC_2:case Me.CODE_FNC_3:break;case Me.CODE_FNC_4_A:!Rt&&yt?(Rt=!0,yt=!1):Rt&&yt?(Rt=!1,yt=!1):yt=!0;break;case Me.CODE_SHIFT:L=!0,S=Me.CODE_CODE_B;break;case Me.CODE_CODE_B:S=Me.CODE_CODE_B;break;case Me.CODE_CODE_C:S=Me.CODE_CODE_C;break;case Me.CODE_STOP:R=!0;break}break;case Me.CODE_CODE_B:if(ye<96)yt===Rt?k+=String.fromCharCode(32+ye):k+=String.fromCharCode(32+ye+128),yt=!1;else switch(ye!==Me.CODE_STOP&&(Oe=!1),ye){case Me.CODE_FNC_1:f&&(k.length===0?k+="]C1":k+="");break;case Me.CODE_FNC_2:case Me.CODE_FNC_3:break;case Me.CODE_FNC_4_B:!Rt&&yt?(Rt=!0,yt=!1):Rt&&yt?(Rt=!1,yt=!1):yt=!0;break;case Me.CODE_SHIFT:L=!0,S=Me.CODE_CODE_A;break;case Me.CODE_CODE_A:S=Me.CODE_CODE_A;break;case Me.CODE_CODE_C:S=Me.CODE_CODE_C;break;case Me.CODE_STOP:R=!0;break}break;case Me.CODE_CODE_C:if(ye<100)ye<10&&(k+="0"),k+=ye;else switch(ye!==Me.CODE_STOP&&(Oe=!1),ye){case Me.CODE_FNC_1:f&&(k.length===0?k+="]C1":k+="");break;case Me.CODE_CODE_A:S=Me.CODE_CODE_A;break;case Me.CODE_CODE_B:S=Me.CODE_CODE_B;break;case Me.CODE_STOP:R=!0;break}break}xa&&(S=S===Me.CODE_CODE_A?Me.CODE_CODE_B:Me.CODE_CODE_A)}const Zn=te-G;if(te=o.getNextUnset(te),!o.isRange(te,Math.min(o.getSize(),te+(te-G)/2),!1))throw new fe;if(ke-=Pe*ue,ke%103!==ue)throw new B;const Ci=k.length;if(Ci===0)throw new fe;Ci>0&&Oe&&(S===Me.CODE_CODE_C?k=k.substring(0,Ci-2):k=k.substring(0,Ci-1));const Vr=(d[1]+d[0])/2,fn=G+Zn/2,Cr=A.length,xi=new Uint8Array(Cr);for(let xa=0;xa<Cr;xa++)xi[xa]=A[xa];const to=[new Fe(Vr,i),new Fe(fn,i)];return new Ve(k,xi,0,to,Le.CODE_128,new Date().getTime())}}Me.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Me.MAX_AVG_VARIANCE=.25,Me.MAX_INDIVIDUAL_VARIANCE=.7,Me.CODE_SHIFT=98,Me.CODE_CODE_C=99,Me.CODE_CODE_B=100,Me.CODE_CODE_A=101,Me.CODE_FNC_1=102,Me.CODE_FNC_2=97,Me.CODE_FNC_3=96,Me.CODE_FNC_4_A=101,Me.CODE_FNC_4_B=100,Me.CODE_START_A=103,Me.CODE_START_B=104,Me.CODE_START_C=105,Me.CODE_STOP=106;class Xt extends Yt{constructor(i=!1,o=!1){super(),this.usingCheckDigit=i,this.extendedMode=o,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(i,o,l){let f=this.counters;f.fill(0),this.decodeRowResult="";let d=Xt.findAsteriskPattern(o,f),m=o.getNextSet(d[1]),y=o.getSize(),A,S;do{Xt.recordPattern(o,m,f);let re=Xt.toNarrowWidePattern(f);if(re<0)throw new fe;A=Xt.patternToChar(re),this.decodeRowResult+=A,S=m;for(let ue of f)m+=ue;m=o.getNextSet(m)}while(A!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let R=0;for(let re of f)R+=re;let L=m-S-R;if(m!==y&&L*2<R)throw new fe;if(this.usingCheckDigit){let re=this.decodeRowResult.length-1,ue=0;for(let ye=0;ye<re;ye++)ue+=Xt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ye));if(this.decodeRowResult.charAt(re)!==Xt.ALPHABET_STRING.charAt(ue%43))throw new B;this.decodeRowResult=this.decodeRowResult.substring(0,re)}if(this.decodeRowResult.length===0)throw new fe;let k;this.extendedMode?k=Xt.decodeExtended(this.decodeRowResult):k=this.decodeRowResult;let G=(d[1]+d[0])/2,te=S+R/2;return new Ve(k,null,0,[new Fe(G,i),new Fe(te,i)],Le.CODE_39,new Date().getTime())}static findAsteriskPattern(i,o){let l=i.getSize(),f=i.getNextSet(0),d=0,m=f,y=!1,A=o.length;for(let S=f;S<l;S++)if(i.get(S)!==y)o[d]++;else{if(d===A-1){if(this.toNarrowWidePattern(o)===Xt.ASTERISK_ENCODING&&i.isRange(Math.max(0,m-Math.floor((S-m)/2)),m,!1))return[m,S];m+=o[0]+o[1],o.copyWithin(0,2,2+d-1),o[d-1]=0,o[d]=0,d--}else d++;o[d]=1,y=!y}throw new fe}static toNarrowWidePattern(i){let o=i.length,l=0,f;do{let d=2147483647;for(let A of i)A<d&&A>l&&(d=A);l=d,f=0;let m=0,y=0;for(let A=0;A<o;A++){let S=i[A];S>l&&(y|=1<<o-1-A,f++,m+=S)}if(f===3){for(let A=0;A<o&&f>0;A++){let S=i[A];if(S>l&&(f--,S*2>=m))return-1}return y}}while(f>3);return-1}static patternToChar(i){for(let o=0;o<Xt.CHARACTER_ENCODINGS.length;o++)if(Xt.CHARACTER_ENCODINGS[o]===i)return Xt.ALPHABET_STRING.charAt(o);if(i===Xt.ASTERISK_ENCODING)return"*";throw new fe}static decodeExtended(i){let o=i.length,l="";for(let f=0;f<o;f++){let d=i.charAt(f);if(d==="+"||d==="$"||d==="%"||d==="/"){let m=i.charAt(f+1),y="\0";switch(d){case"+":if(m>="A"&&m<="Z")y=String.fromCharCode(m.charCodeAt(0)+32);else throw new j;break;case"$":if(m>="A"&&m<="Z")y=String.fromCharCode(m.charCodeAt(0)-64);else throw new j;break;case"%":if(m>="A"&&m<="E")y=String.fromCharCode(m.charCodeAt(0)-38);else if(m>="F"&&m<="J")y=String.fromCharCode(m.charCodeAt(0)-11);else if(m>="K"&&m<="O")y=String.fromCharCode(m.charCodeAt(0)+16);else if(m>="P"&&m<="T")y=String.fromCharCode(m.charCodeAt(0)+43);else if(m==="U")y="\0";else if(m==="V")y="@";else if(m==="W")y="`";else if(m==="X"||m==="Y"||m==="Z")y="";else throw new j;break;case"/":if(m>="A"&&m<="O")y=String.fromCharCode(m.charCodeAt(0)-32);else if(m==="Z")y=":";else throw new j;break}l+=y,f++}else l+=d}return l}}Xt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Xt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Xt.ASTERISK_ENCODING=148;class at extends Yt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(i,o,l){let f=this.decodeStart(o),d=this.decodeEnd(o),m=new W;at.decodeMiddle(o,f[1],d[0],m);let y=m.toString(),A=null;l!=null&&(A=l.get(De.ALLOWED_LENGTHS)),A==null&&(A=at.DEFAULT_ALLOWED_LENGTHS);let S=y.length,R=!1,L=0;for(let te of A){if(S===te){R=!0;break}te>L&&(L=te)}if(!R&&S>L&&(R=!0),!R)throw new j;const k=[new Fe(f[1],i),new Fe(d[0],i)];return new Ve(y,null,0,k,Le.ITF,new Date().getTime())}static decodeMiddle(i,o,l,f){let d=new Int32Array(10),m=new Int32Array(5),y=new Int32Array(5);for(d.fill(0),m.fill(0),y.fill(0);o<l;){Yt.recordPattern(i,o,d);for(let S=0;S<5;S++){let R=2*S;m[S]=d[R],y[S]=d[R+1]}let A=at.decodeDigit(m);f.append(A.toString()),A=this.decodeDigit(y),f.append(A.toString()),d.forEach(function(S){o+=S})}}decodeStart(i){let o=at.skipWhiteSpace(i),l=at.findGuardPattern(i,o,at.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(i,l[0]),l}validateQuietZone(i,o){let l=this.narrowLineWidth*10;l=l<o?l:o;for(let f=o-1;l>0&&f>=0&&!i.get(f);f--)l--;if(l!==0)throw new fe}static skipWhiteSpace(i){const o=i.getSize(),l=i.getNextSet(0);if(l===o)throw new fe;return l}decodeEnd(i){i.reverse();try{let o=at.skipWhiteSpace(i),l;try{l=at.findGuardPattern(i,o,at.END_PATTERN_REVERSED[0])}catch(d){d instanceof fe&&(l=at.findGuardPattern(i,o,at.END_PATTERN_REVERSED[1]))}this.validateQuietZone(i,l[0]);let f=l[0];return l[0]=i.getSize()-l[1],l[1]=i.getSize()-f,l}finally{i.reverse()}}static findGuardPattern(i,o,l){let f=l.length,d=new Int32Array(f),m=i.getSize(),y=!1,A=0,S=o;d.fill(0);for(let R=o;R<m;R++)if(i.get(R)!==y)d[A]++;else{if(A===f-1){if(Yt.patternMatchVariance(d,l,at.MAX_INDIVIDUAL_VARIANCE)<at.MAX_AVG_VARIANCE)return[S,R];S+=d[0]+d[1],$.arraycopy(d,2,d,0,A-1),d[A-1]=0,d[A]=0,A--}else A++;d[A]=1,y=!y}throw new fe}static decodeDigit(i){let o=at.MAX_AVG_VARIANCE,l=-1,f=at.PATTERNS.length;for(let d=0;d<f;d++){let m=at.PATTERNS[d],y=Yt.patternMatchVariance(i,m,at.MAX_INDIVIDUAL_VARIANCE);y<o?(o=y,l=d):y===o&&(l=-1)}if(l>=0)return l%10;throw new fe}}at.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],at.MAX_AVG_VARIANCE=.38,at.MAX_INDIVIDUAL_VARIANCE=.5,at.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],at.START_PATTERN=Int32Array.from([1,1,1,1]),at.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class cn extends Yt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(i){let o=!1,l,f=0,d=Int32Array.from([0,0,0]);for(;!o;){d=Int32Array.from([0,0,0]),l=cn.findGuardPattern(i,f,!1,this.START_END_PATTERN,d);let m=l[0];f=l[1];let y=m-(f-m);y>=0&&(o=i.isRange(y,m,!1))}return l}static checkChecksum(i){return cn.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let o=i.length;if(o===0)return!1;let l=parseInt(i.charAt(o-1),10);return cn.getStandardUPCEANChecksum(i.substring(0,o-1))===l}static getStandardUPCEANChecksum(i){let o=i.length,l=0;for(let f=o-1;f>=0;f-=2){let d=i.charAt(f).charCodeAt(0)-48;if(d<0||d>9)throw new j;l+=d}l*=3;for(let f=o-2;f>=0;f-=2){let d=i.charAt(f).charCodeAt(0)-48;if(d<0||d>9)throw new j;l+=d}return(1e3-l)%10}static decodeEnd(i,o){return cn.findGuardPattern(i,o,!1,cn.START_END_PATTERN,new Int32Array(cn.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(i,o,l,f){return this.findGuardPattern(i,o,l,f,new Int32Array(f.length))}static findGuardPattern(i,o,l,f,d){let m=i.getSize();o=l?i.getNextUnset(o):i.getNextSet(o);let y=0,A=o,S=f.length,R=l;for(let L=o;L<m;L++)if(i.get(L)!==R)d[y]++;else{if(y===S-1){if(Yt.patternMatchVariance(d,f,cn.MAX_INDIVIDUAL_VARIANCE)<cn.MAX_AVG_VARIANCE)return Int32Array.from([A,L]);A+=d[0]+d[1];let k=d.slice(2,d.length-1);for(let G=0;G<y-1;G++)d[G]=k[G];d[y-1]=0,d[y]=0,y--}else y++;d[y]=1,R=!R}throw new fe}static decodeDigit(i,o,l,f){this.recordPattern(i,l,o);let d=this.MAX_AVG_VARIANCE,m=-1,y=f.length;for(let A=0;A<y;A++){let S=f[A],R=Yt.patternMatchVariance(o,S,cn.MAX_INDIVIDUAL_VARIANCE);R<d&&(d=R,m=A)}if(m>=0)return m;throw new fe}}cn.MAX_AVG_VARIANCE=.48,cn.MAX_INDIVIDUAL_VARIANCE=.7,cn.START_END_PATTERN=Int32Array.from([1,1,1]),cn.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),cn.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),cn.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class hi{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,o,l){let f=this.decodeRowStringBuffer,d=this.decodeMiddle(o,l,f),m=f.toString(),y=hi.parseExtensionString(m),A=[new Fe((l[0]+l[1])/2,i),new Fe(d,i)],S=new Ve(m,null,0,A,Le.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&S.putAllMetadata(y),S}decodeMiddle(i,o,l){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=i.getSize(),m=o[1],y=0;for(let S=0;S<5&&m<d;S++){let R=cn.decodeDigit(i,f,m,cn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+R%10);for(let L of f)m+=L;R>=10&&(y|=1<<4-S),S!==4&&(m=i.getNextSet(m),m=i.getNextUnset(m))}if(l.length!==5)throw new fe;let A=this.determineCheckDigit(y);if(hi.extensionChecksum(l.toString())!==A)throw new fe;return m}static extensionChecksum(i){let o=i.length,l=0;for(let f=o-2;f>=0;f-=2)l+=i.charAt(f).charCodeAt(0)-48;l*=3;for(let f=o-1;f>=0;f-=2)l+=i.charAt(f).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(i){for(let o=0;o<10;o++)if(i===this.CHECK_DIGIT_ENCODINGS[o])return o;throw new fe}static parseExtensionString(i){if(i.length!==5)return null;let o=hi.parseExtension5String(i);return o==null?null:new Map([[Ct.SUGGESTED_PRICE,o]])}static parseExtension5String(i){let o;switch(i.charAt(0)){case"0":o="";break;case"5":o="$";break;case"9":switch(i){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}o="";break;default:o="";break}let l=parseInt(i.substring(1)),f=(l/100).toString(),d=l%100,m=d<10?"0"+d:d.toString();return o+f+"."+m}}class as{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,o,l){let f=this.decodeRowStringBuffer,d=this.decodeMiddle(o,l,f),m=f.toString(),y=as.parseExtensionString(m),A=[new Fe((l[0]+l[1])/2,i),new Fe(d,i)],S=new Ve(m,null,0,A,Le.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&S.putAllMetadata(y),S}decodeMiddle(i,o,l){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=i.getSize(),m=o[1],y=0;for(let A=0;A<2&&m<d;A++){let S=cn.decodeDigit(i,f,m,cn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+S%10);for(let R of f)m+=R;S>=10&&(y|=1<<1-A),A!==1&&(m=i.getNextSet(m),m=i.getNextUnset(m))}if(l.length!==2)throw new fe;if(parseInt(l.toString())%4!==y)throw new fe;return m}static parseExtensionString(i){return i.length!==2?null:new Map([[Ct.ISSUE_NUMBER,parseInt(i)]])}}class Zr{static decodeRow(i,o,l){let f=cn.findGuardPattern(o,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new hi().decodeRow(i,o,f)}catch{return new as().decodeRow(i,o,f)}}}Zr.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Tt extends cn{constructor(){super(),this.decodeRowStringBuffer="",Tt.L_AND_G_PATTERNS=Tt.L_PATTERNS.map(i=>Int32Array.from(i));for(let i=10;i<20;i++){let o=Tt.L_PATTERNS[i-10],l=new Int32Array(o.length);for(let f=0;f<o.length;f++)l[f]=o[o.length-f-1];Tt.L_AND_G_PATTERNS[i]=l}}decodeRow(i,o,l){let f=Tt.findStartGuardPattern(o),d=l==null?null:l.get(De.NEED_RESULT_POINT_CALLBACK);if(d!=null){const Oe=new Fe((f[0]+f[1])/2,i);d.foundPossibleResultPoint(Oe)}let m=this.decodeMiddle(o,f,this.decodeRowStringBuffer),y=m.rowOffset,A=m.resultString;if(d!=null){const Oe=new Fe(y,i);d.foundPossibleResultPoint(Oe)}let S=this.decodeEnd(o,y);if(d!=null){const Oe=new Fe((S[0]+S[1])/2,i);d.foundPossibleResultPoint(Oe)}let R=S[1],L=R+(R-S[0]);if(L>=o.getSize()||!o.isRange(R,L,!1))throw new fe;let k=A.toString();if(k.length<8)throw new j;if(!Tt.checkChecksum(k))throw new B;let G=(f[1]+f[0])/2,te=(S[1]+S[0])/2,re=this.getBarcodeFormat(),ue=[new Fe(G,i),new Fe(te,i)],ye=new Ve(k,null,0,ue,re,new Date().getTime()),ke=0;try{let Oe=Zr.decodeRow(i,o,S[1]);ye.putMetadata(Ct.UPC_EAN_EXTENSION,Oe.getText()),ye.putAllMetadata(Oe.getResultMetadata()),ye.addResultPoints(Oe.getResultPoints()),ke=Oe.getText().length}catch{}let Pe=l==null?null:l.get(De.ALLOWED_EAN_EXTENSIONS);if(Pe!=null){let Oe=!1;for(let Rt in Pe)if(ke.toString()===Rt){Oe=!0;break}if(!Oe)throw new fe}return ye}decodeEnd(i,o){return Tt.findGuardPattern(i,o,!1,Tt.START_END_PATTERN,new Int32Array(Tt.START_END_PATTERN.length).fill(0))}static checkChecksum(i){return Tt.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let o=i.length;if(o===0)return!1;let l=parseInt(i.charAt(o-1),10);return Tt.getStandardUPCEANChecksum(i.substring(0,o-1))===l}static getStandardUPCEANChecksum(i){let o=i.length,l=0;for(let f=o-1;f>=0;f-=2){let d=i.charAt(f).charCodeAt(0)-48;if(d<0||d>9)throw new j;l+=d}l*=3;for(let f=o-2;f>=0;f-=2){let d=i.charAt(f).charCodeAt(0)-48;if(d<0||d>9)throw new j;l+=d}return(1e3-l)%10}}class on extends Tt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,o,l){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=i.getSize(),m=o[1],y=0;for(let S=0;S<6&&m<d;S++){let R=Tt.decodeDigit(i,f,m,Tt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+R%10);for(let L of f)m+=L;R>=10&&(y|=1<<5-S)}l=on.determineFirstDigit(l,y),m=Tt.findGuardPattern(i,m,!0,Tt.MIDDLE_PATTERN,new Int32Array(Tt.MIDDLE_PATTERN.length).fill(0))[1];for(let S=0;S<6&&m<d;S++){let R=Tt.decodeDigit(i,f,m,Tt.L_PATTERNS);l+=String.fromCharCode(48+R);for(let L of f)m+=L}return{rowOffset:m,resultString:l}}getBarcodeFormat(){return Le.EAN_13}static determineFirstDigit(i,o){for(let l=0;l<10;l++)if(o===this.FIRST_DIGIT_ENCODINGS[l])return i=String.fromCharCode(48+l)+i,i;throw new fe}}on.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Jr extends Tt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,o,l){const f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=i.getSize(),m=o[1];for(let A=0;A<4&&m<d;A++){let S=Tt.decodeDigit(i,f,m,Tt.L_PATTERNS);l+=String.fromCharCode(48+S);for(let R of f)m+=R}m=Tt.findGuardPattern(i,m,!0,Tt.MIDDLE_PATTERN,new Int32Array(Tt.MIDDLE_PATTERN.length).fill(0))[1];for(let A=0;A<4&&m<d;A++){let S=Tt.decodeDigit(i,f,m,Tt.L_PATTERNS);l+=String.fromCharCode(48+S);for(let R of f)m+=R}return{rowOffset:m,resultString:l}}getBarcodeFormat(){return Le.EAN_8}}class $r extends Tt{constructor(){super(...arguments),this.ean13Reader=new on}getBarcodeFormat(){return Le.UPC_A}decode(i,o){return this.maybeReturnResult(this.ean13Reader.decode(i))}decodeRow(i,o,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(i,o,l))}decodeMiddle(i,o,l){return this.ean13Reader.decodeMiddle(i,o,l)}maybeReturnResult(i){let o=i.getText();if(o.charAt(0)==="0"){let l=new Ve(o.substring(1),null,null,i.getResultPoints(),Le.UPC_A);return i.getResultMetadata()!=null&&l.putAllMetadata(i.getResultMetadata()),l}else throw new fe}reset(){this.ean13Reader.reset()}}class Nn extends Tt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(i,o,l){const f=this.decodeMiddleCounters.map(S=>S);f[0]=0,f[1]=0,f[2]=0,f[3]=0;const d=i.getSize();let m=o[1],y=0;for(let S=0;S<6&&m<d;S++){const R=Nn.decodeDigit(i,f,m,Nn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+R%10);for(let L of f)m+=L;R>=10&&(y|=1<<5-S)}let A=Nn.determineNumSysAndCheckDigit(l,y);return{rowOffset:m,resultString:A}}decodeEnd(i,o){return Nn.findGuardPatternWithoutCounters(i,o,!0,Nn.MIDDLE_END_PATTERN)}checkChecksum(i){return Tt.checkChecksum(Nn.convertUPCEtoUPCA(i))}static determineNumSysAndCheckDigit(i,o){for(let l=0;l<=1;l++)for(let f=0;f<10;f++)if(o===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][f]){let d=String.fromCharCode(48+l),m=String.fromCharCode(48+f);return d+i+m}throw fe.getNotFoundInstance()}getBarcodeFormat(){return Le.UPC_E}static convertUPCEtoUPCA(i){const o=i.slice(1,7).split("").map(d=>d.charCodeAt(0)),l=new W;l.append(i.charAt(0));let f=o[5];switch(f){case 0:case 1:case 2:l.appendChars(o,0,2),l.append(f),l.append("0000"),l.appendChars(o,2,3);break;case 3:l.appendChars(o,0,3),l.append("00000"),l.appendChars(o,3,2);break;case 4:l.appendChars(o,0,4),l.append("00000"),l.append(o[4]);break;default:l.appendChars(o,0,5),l.append("0000"),l.append(f);break}return i.length>=8&&l.append(i.charAt(7)),l.toString()}}Nn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Nn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Ls extends Yt{constructor(i){super();let o=i==null?null:i.get(De.POSSIBLE_FORMATS),l=[];s(o)?(l.push(new on),l.push(new $r),l.push(new Jr),l.push(new Nn)):(o.indexOf(Le.EAN_13)>-1&&l.push(new on),o.indexOf(Le.UPC_A)>-1&&l.push(new $r),o.indexOf(Le.EAN_8)>-1&&l.push(new Jr),o.indexOf(Le.UPC_E)>-1&&l.push(new Nn)),this.readers=l}decodeRow(i,o,l){for(let f of this.readers)try{const d=f.decodeRow(i,o,l),m=d.getBarcodeFormat()===Le.EAN_13&&d.getText().charAt(0)==="0",y=l==null?null:l.get(De.POSSIBLE_FORMATS),A=y==null||y.includes(Le.UPC_A);if(m&&A){const S=d.getRawBytes(),R=new Ve(d.getText().substring(1),S,S?S.length:null,d.getResultPoints(),Le.UPC_A);return R.putAllMetadata(d.getResultMetadata()),R}return d}catch{}throw new fe}reset(){for(let i of this.readers)i.reset()}}class Un extends Yt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(i,o){for(let l=0;l<o.length;l++)if(Yt.patternMatchVariance(i,o[l],Un.MAX_INDIVIDUAL_VARIANCE)<Un.MAX_AVG_VARIANCE)return l;throw new fe}static count(i){return et.sum(new Int32Array(i))}static increment(i,o){let l=0,f=o[0];for(let d=1;d<i.length;d++)o[d]>f&&(f=o[d],l=d);i[l]++}static decrement(i,o){let l=0,f=o[0];for(let d=1;d<i.length;d++)o[d]<f&&(f=o[d],l=d);i[l]--}static isFinderPattern(i){let o=i[0]+i[1],l=o+i[2]+i[3],f=o/l;if(f>=Un.MIN_FINDER_PATTERN_RATIO&&f<=Un.MAX_FINDER_PATTERN_RATIO){let d=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;for(let y of i)y>m&&(m=y),y<d&&(d=y);return m<10*d}return!1}}Un.MAX_AVG_VARIANCE=.2,Un.MAX_INDIVIDUAL_VARIANCE=.45,Un.MIN_FINDER_PATTERN_RATIO=9.5/12,Un.MAX_FINDER_PATTERN_RATIO=12.5/14;class fr{constructor(i,o){this.value=i,this.checksumPortion=o}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(i){if(!(i instanceof fr))return!1;const o=i;return this.value===o.value&&this.checksumPortion===o.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class fi{constructor(i,o,l,f,d){this.value=i,this.startEnd=o,this.value=i,this.startEnd=o,this.resultPoints=new Array,this.resultPoints.push(new Fe(l,d)),this.resultPoints.push(new Fe(f,d))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(i){if(!(i instanceof fi))return!1;const o=i;return this.value===o.value}hashCode(){return this.value}}class Br{constructor(){}static getRSSvalue(i,o,l){let f=0;for(let A of i)f+=A;let d=0,m=0,y=i.length;for(let A=0;A<y-1;A++){let S;for(S=1,m|=1<<A;S<i[A];S++,m&=~(1<<A)){let R=Br.combins(f-S-1,y-A-2);if(l&&m===0&&f-S-(y-A-1)>=y-A-1&&(R-=Br.combins(f-S-(y-A),y-A-2)),y-A-1>1){let L=0;for(let k=f-S-(y-A-2);k>o;k--)L+=Br.combins(f-S-k-1,y-A-3);R-=L*(y-1-A)}else f-S>o&&R--;d+=R}f-=S}return d}static combins(i,o){let l,f;i-o>o?(f=o,l=i-o):(f=i-o,l=o);let d=1,m=1;for(let y=i;y>l;y--)d*=y,m<=f&&(d/=m,m++);for(;m<=f;)d/=m,m++;return d}}class os{static buildBitArray(i){let o=i.length*2-1;i[i.length-1].getRightChar()==null&&(o-=1);let l=12*o,f=new le(l),d=0,y=i[0].getRightChar().getValue();for(let A=11;A>=0;--A)(y&1<<A)!=0&&f.set(d),d++;for(let A=1;A<i.length;++A){let S=i[A],R=S.getLeftChar().getValue();for(let L=11;L>=0;--L)(R&1<<L)!=0&&f.set(d),d++;if(S.getRightChar()!=null){let L=S.getRightChar().getValue();for(let k=11;k>=0;--k)(L&1<<k)!=0&&f.set(d),d++}}return f}}class ei{constructor(i,o){o?this.decodedInformation=null:(this.finished=i,this.decodedInformation=o)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Li{constructor(i){this.newPosition=i}getNewPosition(){return this.newPosition}}class On extends Li{constructor(i,o){super(i),this.value=o}getValue(){return this.value}isFNC1(){return this.value===On.FNC1}}On.FNC1="$";class dr extends Li{constructor(i,o,l){super(i),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=o}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class vr extends Li{constructor(i,o,l){if(super(i),o<0||o>10||l<0||l>10)throw new j;this.firstDigit=o,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===vr.FNC1}isSecondDigitFNC1(){return this.secondDigit===vr.FNC1}isAnyFNC1(){return this.firstDigit===vr.FNC1||this.secondDigit===vr.FNC1}}vr.FNC1=10;class je{constructor(){}static parseFieldsInGeneralPurpose(i){if(!i)return null;if(i.length<2)throw new fe;let o=i.substring(0,2);for(let d of je.TWO_DIGIT_DATA_LENGTH)if(d[0]===o)return d[1]===je.VARIABLE_LENGTH?je.processVariableAI(2,d[2],i):je.processFixedAI(2,d[1],i);if(i.length<3)throw new fe;let l=i.substring(0,3);for(let d of je.THREE_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===je.VARIABLE_LENGTH?je.processVariableAI(3,d[2],i):je.processFixedAI(3,d[1],i);for(let d of je.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===je.VARIABLE_LENGTH?je.processVariableAI(4,d[2],i):je.processFixedAI(4,d[1],i);if(i.length<4)throw new fe;let f=i.substring(0,4);for(let d of je.FOUR_DIGIT_DATA_LENGTH)if(d[0]===f)return d[1]===je.VARIABLE_LENGTH?je.processVariableAI(4,d[2],i):je.processFixedAI(4,d[1],i);throw new fe}static processFixedAI(i,o,l){if(l.length<i)throw new fe;let f=l.substring(0,i);if(l.length<i+o)throw new fe;let d=l.substring(i,i+o),m=l.substring(i+o),y="("+f+")"+d,A=je.parseFieldsInGeneralPurpose(m);return A==null?y:y+A}static processVariableAI(i,o,l){let f=l.substring(0,i),d;l.length<i+o?d=l.length:d=i+o;let m=l.substring(i,d),y=l.substring(d),A="("+f+")"+m,S=je.parseFieldsInGeneralPurpose(y);return S==null?A:A+S}}je.VARIABLE_LENGTH=[],je.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",je.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",je.VARIABLE_LENGTH,20],["22",je.VARIABLE_LENGTH,29],["30",je.VARIABLE_LENGTH,8],["37",je.VARIABLE_LENGTH,8],["90",je.VARIABLE_LENGTH,30],["91",je.VARIABLE_LENGTH,30],["92",je.VARIABLE_LENGTH,30],["93",je.VARIABLE_LENGTH,30],["94",je.VARIABLE_LENGTH,30],["95",je.VARIABLE_LENGTH,30],["96",je.VARIABLE_LENGTH,30],["97",je.VARIABLE_LENGTH,3],["98",je.VARIABLE_LENGTH,30],["99",je.VARIABLE_LENGTH,30]],je.THREE_DIGIT_DATA_LENGTH=[["240",je.VARIABLE_LENGTH,30],["241",je.VARIABLE_LENGTH,30],["242",je.VARIABLE_LENGTH,6],["250",je.VARIABLE_LENGTH,30],["251",je.VARIABLE_LENGTH,30],["253",je.VARIABLE_LENGTH,17],["254",je.VARIABLE_LENGTH,20],["400",je.VARIABLE_LENGTH,30],["401",je.VARIABLE_LENGTH,30],["402",17],["403",je.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",je.VARIABLE_LENGTH,20],["421",je.VARIABLE_LENGTH,15],["422",3],["423",je.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],je.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",je.VARIABLE_LENGTH,15],["391",je.VARIABLE_LENGTH,18],["392",je.VARIABLE_LENGTH,15],["393",je.VARIABLE_LENGTH,18],["703",je.VARIABLE_LENGTH,30]],je.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",je.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",je.VARIABLE_LENGTH,20],["8003",je.VARIABLE_LENGTH,30],["8004",je.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",je.VARIABLE_LENGTH,30],["8008",je.VARIABLE_LENGTH,12],["8018",18],["8020",je.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",je.VARIABLE_LENGTH,70],["8200",je.VARIABLE_LENGTH,70]];class gr{constructor(i){this.buffer=new W,this.information=i}decodeAllCodes(i,o){let l=o,f=null;do{let d=this.decodeGeneralPurposeField(l,f),m=je.parseFieldsInGeneralPurpose(d.getNewString());if(m!=null&&i.append(m),d.isRemaining()?f=""+d.getRemainingValue():f=null,l===d.getNewPosition())break;l=d.getNewPosition()}while(!0);return i.toString()}isStillNumeric(i){if(i+7>this.information.getSize())return i+4<=this.information.getSize();for(let o=i;o<i+3;++o)if(this.information.get(o))return!0;return this.information.get(i+3)}decodeNumeric(i){if(i+7>this.information.getSize()){let d=this.extractNumericValueFromBitArray(i,4);return d===0?new vr(this.information.getSize(),vr.FNC1,vr.FNC1):new vr(this.information.getSize(),d-1,vr.FNC1)}let o=this.extractNumericValueFromBitArray(i,7),l=(o-8)/11,f=(o-8)%11;return new vr(i+7,l,f)}extractNumericValueFromBitArray(i,o){return gr.extractNumericValueFromBitArray(this.information,i,o)}static extractNumericValueFromBitArray(i,o,l){let f=0;for(let d=0;d<l;++d)i.get(o+d)&&(f|=1<<l-d-1);return f}decodeGeneralPurposeField(i,o){this.buffer.setLengthToZero(),o!=null&&this.buffer.append(o),this.current.setPosition(i);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new dr(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new dr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let i,o;do{let l=this.current.getPosition();if(this.current.isAlpha()?(o=this.parseAlphaBlock(),i=o.isFinished()):this.current.isIsoIec646()?(o=this.parseIsoIec646Block(),i=o.isFinished()):(o=this.parseNumericBlock(),i=o.isFinished()),!(l!==this.current.getPosition())&&!i)break}while(!i);return o.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let i=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFirstDigitFNC1()){let o;return i.isSecondDigitFNC1()?o=new dr(this.current.getPosition(),this.buffer.toString()):o=new dr(this.current.getPosition(),this.buffer.toString(),i.getSecondDigit()),new ei(!0,o)}if(this.buffer.append(i.getFirstDigit()),i.isSecondDigitFNC1()){let o=new dr(this.current.getPosition(),this.buffer.toString());return new ei(!0,o)}this.buffer.append(i.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new ei(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let i=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let o=new dr(this.current.getPosition(),this.buffer.toString());return new ei(!0,o)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new ei(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let i=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let o=new dr(this.current.getPosition(),this.buffer.toString());return new ei(!0,o)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new ei(!1)}isStillIsoIec646(i){if(i+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(i,5);if(o>=5&&o<16)return!0;if(i+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,7);if(l>=64&&l<116)return!0;if(i+8>this.information.getSize())return!1;let f=this.extractNumericValueFromBitArray(i,8);return f>=232&&f<253}decodeIsoIec646(i){let o=this.extractNumericValueFromBitArray(i,5);if(o===15)return new On(i+5,On.FNC1);if(o>=5&&o<15)return new On(i+5,"0"+(o-5));let l=this.extractNumericValueFromBitArray(i,7);if(l>=64&&l<90)return new On(i+7,""+(l+1));if(l>=90&&l<116)return new On(i+7,""+(l+7));let f=this.extractNumericValueFromBitArray(i,8),d;switch(f){case 232:d="!";break;case 233:d='"';break;case 234:d="%";break;case 235:d="&";break;case 236:d="'";break;case 237:d="(";break;case 238:d=")";break;case 239:d="*";break;case 240:d="+";break;case 241:d=",";break;case 242:d="-";break;case 243:d=".";break;case 244:d="/";break;case 245:d=":";break;case 246:d=";";break;case 247:d="<";break;case 248:d="=";break;case 249:d=">";break;case 250:d="?";break;case 251:d="_";break;case 252:d=" ";break;default:throw new j}return new On(i+8,d)}isStillAlpha(i){if(i+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(i,5);if(o>=5&&o<16)return!0;if(i+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,6);return l>=16&&l<63}decodeAlphanumeric(i){let o=this.extractNumericValueFromBitArray(i,5);if(o===15)return new On(i+5,On.FNC1);if(o>=5&&o<15)return new On(i+5,"0"+(o-5));let l=this.extractNumericValueFromBitArray(i,6);if(l>=32&&l<58)return new On(i+6,""+(l+33));let f;switch(l){case 58:f="*";break;case 59:f=",";break;case 60:f="-";break;case 61:f=".";break;case 62:f="/";break;default:throw new ir("Decoding invalid alphanumeric value: "+l)}return new On(i+6,f)}isAlphaTo646ToAlphaLatch(i){if(i+1>this.information.getSize())return!1;for(let o=0;o<5&&o+i<this.information.getSize();++o)if(o===2){if(!this.information.get(i+2))return!1}else if(this.information.get(i+o))return!1;return!0}isAlphaOr646ToNumericLatch(i){if(i+3>this.information.getSize())return!1;for(let o=i;o<i+3;++o)if(this.information.get(o))return!1;return!0}isNumericToAlphaNumericLatch(i){if(i+1>this.information.getSize())return!1;for(let o=0;o<4&&o+i<this.information.getSize();++o)if(this.information.get(i+o))return!1;return!0}}class vn{constructor(i){this.information=i,this.generalDecoder=new gr(i)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Wt extends vn{constructor(i){super(i)}encodeCompressedGtin(i,o){i.append("(01)");let l=i.length();i.append("9"),this.encodeCompressedGtinWithoutAI(i,o,l)}encodeCompressedGtinWithoutAI(i,o,l){for(let f=0;f<4;++f){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(o+10*f,10);d/100===0&&i.append("0"),d/10===0&&i.append("0"),i.append(d)}Wt.appendCheckDigit(i,l)}static appendCheckDigit(i,o){let l=0;for(let f=0;f<13;f++){let d=i.charAt(f+o).charCodeAt(0)-48;l+=(f&1)===0?3*d:d}l=10-l%10,l===10&&(l=0),i.append(l)}}Wt.GTIN_SIZE=40;class mr extends Wt{constructor(i){super(i)}parseInformation(){let i=new W;i.append("(01)");let o=i.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(mr.HEADER_SIZE,4);return i.append(l),this.encodeCompressedGtinWithoutAI(i,mr.HEADER_SIZE+4,o),this.getGeneralDecoder().decodeAllCodes(i,mr.HEADER_SIZE+44)}}mr.HEADER_SIZE=4;class ki extends vn{constructor(i){super(i)}parseInformation(){let i=new W;return this.getGeneralDecoder().decodeAllCodes(i,ki.HEADER_SIZE)}}ki.HEADER_SIZE=5;class ks extends Wt{constructor(i){super(i)}encodeCompressedWeight(i,o,l){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(o,l);this.addWeightCode(i,f);let d=this.checkWeight(f),m=1e5;for(let y=0;y<5;++y)d/m===0&&i.append("0"),m/=10;i.append(d)}}class Ur extends ks{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()!=Ur.HEADER_SIZE+ks.GTIN_SIZE+Ur.WEIGHT_SIZE)throw new fe;let i=new W;return this.encodeCompressedGtin(i,Ur.HEADER_SIZE),this.encodeCompressedWeight(i,Ur.HEADER_SIZE+ks.GTIN_SIZE,Ur.WEIGHT_SIZE),i.toString()}}Ur.HEADER_SIZE=5,Ur.WEIGHT_SIZE=15;class ia extends Ur{constructor(i){super(i)}addWeightCode(i,o){i.append("(3103)")}checkWeight(i){return i}}class Ai extends Ur{constructor(i){super(i)}addWeightCode(i,o){o<1e4?i.append("(3202)"):i.append("(3203)")}checkWeight(i){return i<1e4?i:i-1e4}}class pr extends Wt{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<pr.HEADER_SIZE+Wt.GTIN_SIZE)throw new fe;let i=new W;this.encodeCompressedGtin(i,pr.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(pr.HEADER_SIZE+Wt.GTIN_SIZE,pr.LAST_DIGIT_SIZE);i.append("(392"),i.append(o),i.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(pr.HEADER_SIZE+Wt.GTIN_SIZE+pr.LAST_DIGIT_SIZE,null);return i.append(l.getNewString()),i.toString()}}pr.HEADER_SIZE=8,pr.LAST_DIGIT_SIZE=2;class xn extends Wt{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<xn.HEADER_SIZE+Wt.GTIN_SIZE)throw new fe;let i=new W;this.encodeCompressedGtin(i,xn.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(xn.HEADER_SIZE+Wt.GTIN_SIZE,xn.LAST_DIGIT_SIZE);i.append("(393"),i.append(o),i.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(xn.HEADER_SIZE+Wt.GTIN_SIZE+xn.LAST_DIGIT_SIZE,xn.FIRST_THREE_DIGITS_SIZE);l/100==0&&i.append("0"),l/10==0&&i.append("0"),i.append(l);let f=this.getGeneralDecoder().decodeGeneralPurposeField(xn.HEADER_SIZE+Wt.GTIN_SIZE+xn.LAST_DIGIT_SIZE+xn.FIRST_THREE_DIGITS_SIZE,null);return i.append(f.getNewString()),i.toString()}}xn.HEADER_SIZE=8,xn.LAST_DIGIT_SIZE=2,xn.FIRST_THREE_DIGITS_SIZE=10;class Ot extends ks{constructor(i,o,l){super(i),this.dateCode=l,this.firstAIdigits=o}parseInformation(){if(this.getInformation().getSize()!=Ot.HEADER_SIZE+Ot.GTIN_SIZE+Ot.WEIGHT_SIZE+Ot.DATE_SIZE)throw new fe;let i=new W;return this.encodeCompressedGtin(i,Ot.HEADER_SIZE),this.encodeCompressedWeight(i,Ot.HEADER_SIZE+Ot.GTIN_SIZE,Ot.WEIGHT_SIZE),this.encodeCompressedDate(i,Ot.HEADER_SIZE+Ot.GTIN_SIZE+Ot.WEIGHT_SIZE),i.toString()}encodeCompressedDate(i,o){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(o,Ot.DATE_SIZE);if(l==38400)return;i.append("("),i.append(this.dateCode),i.append(")");let f=l%32;l/=32;let d=l%12+1;l/=12;let m=l;m/10==0&&i.append("0"),i.append(m),d/10==0&&i.append("0"),i.append(d),f/10==0&&i.append("0"),i.append(f)}addWeightCode(i,o){i.append("("),i.append(this.firstAIdigits),i.append(o/1e5),i.append(")")}checkWeight(i){return i%1e5}}Ot.HEADER_SIZE=8,Ot.WEIGHT_SIZE=20,Ot.DATE_SIZE=16;function Rr(P){try{if(P.get(1))return new mr(P);if(!P.get(2))return new ki(P);switch(gr.extractNumericValueFromBitArray(P,1,4)){case 4:return new ia(P);case 5:return new Ai(P)}switch(gr.extractNumericValueFromBitArray(P,1,5)){case 12:return new pr(P);case 13:return new xn(P)}switch(gr.extractNumericValueFromBitArray(P,1,7)){case 56:return new Ot(P,"310","11");case 57:return new Ot(P,"320","11");case 58:return new Ot(P,"310","13");case 59:return new Ot(P,"320","13");case 60:return new Ot(P,"310","15");case 61:return new Ot(P,"320","15");case 62:return new Ot(P,"310","17");case 63:return new Ot(P,"320","17")}}catch(i){throw console.log(i),new ir("unknown decoder: "+P)}}class sr{constructor(i,o,l,f){this.leftchar=i,this.rightchar=o,this.finderpattern=l,this.maybeLast=f}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(i,o){return i instanceof sr?sr.equalsOrNull(i.leftchar,o.leftchar)&&sr.equalsOrNull(i.rightchar,o.rightchar)&&sr.equalsOrNull(i.finderpattern,o.finderpattern):!1}static equalsOrNull(i,o){return i===null?o===null:sr.equals(i,o)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Rn{constructor(i,o,l){this.pairs=i,this.rowNumber=o,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(i){return this.checkEqualitity(this,i)}toString(){return"{ "+this.pairs+" }"}equals(i,o){return i instanceof Rn?this.checkEqualitity(i,o)&&i.wasReversed===o.wasReversed:!1}checkEqualitity(i,o){if(!i||!o)return;let l;return i.forEach((f,d)=>{o.forEach(m=>{f.getLeftChar().getValue()===m.getLeftChar().getValue()&&f.getRightChar().getValue()===m.getRightChar().getValue()&&f.getFinderPatter().getValue()===m.getFinderPatter().getValue()&&(l=!0)})}),l}}class Ie extends Un{constructor(i){super(...arguments),this.pairs=new Array(Ie.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=i===!0}decodeRow(i,o,l){this.pairs.length=0,this.startFromEven=!1;try{return Ie.constructResult(this.decodeRow2pairs(i,o))}catch(f){this.verbose&&console.log(f)}return this.pairs.length=0,this.startFromEven=!0,Ie.constructResult(this.decodeRow2pairs(i,o))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(i,o){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(o,this.pairs,i))}catch(d){if(d instanceof fe){if(!this.pairs.length)throw new fe;l=!0}}if(this.checkChecksum())return this.pairs;let f;if(this.rows.length?f=!0:f=!1,this.storeRow(i,!1),f){let d=this.checkRowsBoolean(!1);if(d!=null||(d=this.checkRowsBoolean(!0),d!=null))return d}throw new fe}checkRowsBoolean(i){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,i&&(this.rows=this.rows.reverse());let o=null;try{o=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return i&&(this.rows=this.rows.reverse()),o}checkRows(i,o){for(let l=o;l<this.rows.length;l++){let f=this.rows[l];this.pairs.length=0;for(let m of i)this.pairs.push(m.getPairs());if(this.pairs.push(f.getPairs()),!Ie.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let d=new Array(i);d.push(f);try{return this.checkRows(d,l+1)}catch(m){this.verbose&&console.log(m)}}throw new fe}static isValidSequence(i){for(let o of Ie.FINDER_PATTERN_SEQUENCES){if(i.length>o.length)continue;let l=!0;for(let f=0;f<i.length;f++)if(i[f].getFinderPattern().getValue()!=o[f]){l=!1;break}if(l)return!0}return!1}storeRow(i,o){let l=0,f=!1,d=!1;for(;l<this.rows.length;){let m=this.rows[l];if(m.getRowNumber()>i){d=m.isEquivalent(this.pairs);break}f=m.isEquivalent(this.pairs),l++}d||f||Ie.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new Rn(this.pairs,i,o)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(i,o){for(let l of o)if(l.getPairs().length!==i.length){for(let f of l.getPairs())for(let d of i)if(sr.equals(f,d))break}}static isPartialRow(i,o){for(let l of o){let f=!0;for(let d of i){let m=!1;for(let y of l.getPairs())if(d.equals(y)){m=!0;break}if(!m){f=!1;break}}if(f)return!0}return!1}getRows(){return this.rows}static constructResult(i){let o=os.buildBitArray(i),f=Rr(o).parseInformation(),d=i[0].getFinderPattern().getResultPoints(),m=i[i.length-1].getFinderPattern().getResultPoints(),y=[d[0],d[1],m[0],m[1]];return new Ve(f,null,null,y,Le.RSS_EXPANDED,null)}checkChecksum(){let i=this.pairs.get(0),o=i.getLeftChar(),l=i.getRightChar();if(l==null)return!1;let f=l.getChecksumPortion(),d=2;for(let y=1;y<this.pairs.size();++y){let A=this.pairs.get(y);f+=A.getLeftChar().getChecksumPortion(),d++;let S=A.getRightChar();S!=null&&(f+=S.getChecksumPortion(),d++)}return f%=211,211*(d-4)+f==o.getValue()}static getNextSecondBar(i,o){let l;return i.get(o)?(l=i.getNextUnset(o),l=i.getNextSet(l)):(l=i.getNextSet(o),l=i.getNextUnset(l)),l}retrieveNextPair(i,o,l){let f=o.length%2==0;this.startFromEven&&(f=!f);let d,m=!0,y=-1;do this.findNextPair(i,o,y),d=this.parseFoundFinderPattern(i,l,f),d==null?y=Ie.getNextSecondBar(i,this.startEnd[0]):m=!1;while(m);let A=this.decodeDataCharacter(i,d,f,!0);if(!this.isEmptyPair(o)&&o[o.length-1].mustBeLast())throw new fe;let S;try{S=this.decodeDataCharacter(i,d,f,!1)}catch(R){S=null,this.verbose&&console.log(R)}return new sr(A,S,d,!0)}isEmptyPair(i){return i.length===0}findNextPair(i,o,l){let f=this.getDecodeFinderCounters();f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=i.getSize(),m;l>=0?m=l:this.isEmptyPair(o)?m=0:m=o[o.length-1].getFinderPattern().getStartEnd()[1];let y=o.length%2!=0;this.startFromEven&&(y=!y);let A=!1;for(;m<d&&(A=!i.get(m),!!A);)m++;let S=0,R=m;for(let L=m;L<d;L++)if(i.get(L)!=A)f[S]++;else{if(S==3){if(y&&Ie.reverseCounters(f),Ie.isFinderPattern(f)){this.startEnd[0]=R,this.startEnd[1]=L;return}y&&Ie.reverseCounters(f),R+=f[0]+f[1],f[0]=f[2],f[1]=f[3],f[2]=0,f[3]=0,S--}else S++;f[S]=1,A=!A}throw new fe}static reverseCounters(i){let o=i.length;for(let l=0;l<o/2;++l){let f=i[l];i[l]=i[o-l-1],i[o-l-1]=f}}parseFoundFinderPattern(i,o,l){let f,d,m;if(l){let S=this.startEnd[0]-1;for(;S>=0&&!i.get(S);)S--;S++,f=this.startEnd[0]-S,d=S,m=this.startEnd[1]}else d=this.startEnd[0],m=i.getNextUnset(this.startEnd[1]+1),f=m-this.startEnd[1];let y=this.getDecodeFinderCounters();$.arraycopy(y,0,y,1,y.length-1),y[0]=f;let A;try{A=this.parseFinderValue(y,Ie.FINDER_PATTERNS)}catch{return null}return new fi(A,[d,m],d,m,o)}decodeDataCharacter(i,o,l,f){let d=this.getDataCharacterCounters();for(let fn=0;fn<d.length;fn++)d[fn]=0;if(f)Ie.recordPatternInReverse(i,o.getStartEnd()[0],d);else{Ie.recordPattern(i,o.getStartEnd()[1],d);for(let fn=0,Cr=d.length-1;fn<Cr;fn++,Cr--){let xi=d[fn];d[fn]=d[Cr],d[Cr]=xi}}let m=17,y=et.sum(new Int32Array(d))/m,A=(o.getStartEnd()[1]-o.getStartEnd()[0])/15;if(Math.abs(y-A)/A>.3)throw new fe;let S=this.getOddCounts(),R=this.getEvenCounts(),L=this.getOddRoundingErrors(),k=this.getEvenRoundingErrors();for(let fn=0;fn<d.length;fn++){let Cr=1*d[fn]/y,xi=Cr+.5;if(xi<1){if(Cr<.3)throw new fe;xi=1}else if(xi>8){if(Cr>8.7)throw new fe;xi=8}let to=fn/2;(fn&1)==0?(S[to]=xi,L[to]=Cr-xi):(R[to]=xi,k[to]=Cr-xi)}this.adjustOddEvenCounts(m);let G=4*o.getValue()+(l?0:2)+(f?0:1)-1,te=0,re=0;for(let fn=S.length-1;fn>=0;fn--){if(Ie.isNotA1left(o,l,f)){let Cr=Ie.WEIGHTS[G][2*fn];re+=S[fn]*Cr}te+=S[fn]}let ue=0;for(let fn=R.length-1;fn>=0;fn--)if(Ie.isNotA1left(o,l,f)){let Cr=Ie.WEIGHTS[G][2*fn+1];ue+=R[fn]*Cr}let ye=re+ue;if((te&1)!=0||te>13||te<4)throw new fe;let ke=(13-te)/2,Pe=Ie.SYMBOL_WIDEST[ke],Oe=9-Pe,Rt=Br.getRSSvalue(S,Pe,!0),yt=Br.getRSSvalue(R,Oe,!1),Zn=Ie.EVEN_TOTAL_SUBSET[ke],Ci=Ie.GSUM[ke],Vr=Rt*Zn+yt+Ci;return new fr(Vr,ye)}static isNotA1left(i,o,l){return!(i.getValue()==0&&o&&l)}adjustOddEvenCounts(i){let o=et.sum(new Int32Array(this.getOddCounts())),l=et.sum(new Int32Array(this.getEvenCounts())),f=!1,d=!1;o>13?d=!0:o<4&&(f=!0);let m=!1,y=!1;l>13?y=!0:l<4&&(m=!0);let A=o+l-i,S=(o&1)==1,R=(l&1)==0;if(A==1)if(S){if(R)throw new fe;d=!0}else{if(!R)throw new fe;y=!0}else if(A==-1)if(S){if(R)throw new fe;f=!0}else{if(!R)throw new fe;m=!0}else if(A==0){if(S){if(!R)throw new fe;o<l?(f=!0,y=!0):(d=!0,m=!0)}else if(R)throw new fe}else throw new fe;if(f){if(d)throw new fe;Ie.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&Ie.decrement(this.getOddCounts(),this.getOddRoundingErrors()),m){if(y)throw new fe;Ie.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&Ie.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ie.SYMBOL_WIDEST=[7,5,4,3,1],Ie.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Ie.GSUM=[0,348,1388,2948,3988],Ie.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Ie.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Ie.FINDER_PAT_A=0,Ie.FINDER_PAT_B=1,Ie.FINDER_PAT_C=2,Ie.FINDER_PAT_D=3,Ie.FINDER_PAT_E=4,Ie.FINDER_PAT_F=5,Ie.FINDER_PATTERN_SEQUENCES=[[Ie.FINDER_PAT_A,Ie.FINDER_PAT_A],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_B,Ie.FINDER_PAT_B],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_C,Ie.FINDER_PAT_B,Ie.FINDER_PAT_D],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_E,Ie.FINDER_PAT_B,Ie.FINDER_PAT_D,Ie.FINDER_PAT_C],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_E,Ie.FINDER_PAT_B,Ie.FINDER_PAT_D,Ie.FINDER_PAT_D,Ie.FINDER_PAT_F],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_E,Ie.FINDER_PAT_B,Ie.FINDER_PAT_D,Ie.FINDER_PAT_E,Ie.FINDER_PAT_F,Ie.FINDER_PAT_F],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_A,Ie.FINDER_PAT_B,Ie.FINDER_PAT_B,Ie.FINDER_PAT_C,Ie.FINDER_PAT_C,Ie.FINDER_PAT_D,Ie.FINDER_PAT_D],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_A,Ie.FINDER_PAT_B,Ie.FINDER_PAT_B,Ie.FINDER_PAT_C,Ie.FINDER_PAT_C,Ie.FINDER_PAT_D,Ie.FINDER_PAT_E,Ie.FINDER_PAT_E],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_A,Ie.FINDER_PAT_B,Ie.FINDER_PAT_B,Ie.FINDER_PAT_C,Ie.FINDER_PAT_C,Ie.FINDER_PAT_D,Ie.FINDER_PAT_E,Ie.FINDER_PAT_F,Ie.FINDER_PAT_F],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_A,Ie.FINDER_PAT_B,Ie.FINDER_PAT_B,Ie.FINDER_PAT_C,Ie.FINDER_PAT_D,Ie.FINDER_PAT_D,Ie.FINDER_PAT_E,Ie.FINDER_PAT_E,Ie.FINDER_PAT_F,Ie.FINDER_PAT_F]],Ie.MAX_PAIRS=11;class sa extends fr{constructor(i,o,l){super(i,o),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Kt extends Un{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(i,o,l){const f=this.decodePair(o,!1,i,l);Kt.addOrTally(this.possibleLeftPairs,f),o.reverse();let d=this.decodePair(o,!0,i,l);Kt.addOrTally(this.possibleRightPairs,d),o.reverse();for(let m of this.possibleLeftPairs)if(m.getCount()>1){for(let y of this.possibleRightPairs)if(y.getCount()>1&&Kt.checkChecksum(m,y))return Kt.constructResult(m,y)}throw new fe}static addOrTally(i,o){if(o==null)return;let l=!1;for(let f of i)if(f.getValue()===o.getValue()){f.incrementCount(),l=!0;break}l||i.push(o)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(i,o){let l=4537077*i.getValue()+o.getValue(),f=new String(l).toString(),d=new W;for(let S=13-f.length;S>0;S--)d.append("0");d.append(f);let m=0;for(let S=0;S<13;S++){let R=d.charAt(S).charCodeAt(0)-48;m+=(S&1)===0?3*R:R}m=10-m%10,m===10&&(m=0),d.append(m.toString());let y=i.getFinderPattern().getResultPoints(),A=o.getFinderPattern().getResultPoints();return new Ve(d.toString(),null,0,[y[0],y[1],A[0],A[1]],Le.RSS_14,new Date().getTime())}static checkChecksum(i,o){let l=(i.getChecksumPortion()+16*o.getChecksumPortion())%79,f=9*i.getFinderPattern().getValue()+o.getFinderPattern().getValue();return f>72&&f--,f>8&&f--,l===f}decodePair(i,o,l,f){try{let d=this.findFinderPattern(i,o),m=this.parseFoundFinderPattern(i,l,o,d),y=f==null?null:f.get(De.NEED_RESULT_POINT_CALLBACK);if(y!=null){let R=(d[0]+d[1])/2;o&&(R=i.getSize()-1-R),y.foundPossibleResultPoint(new Fe(R,l))}let A=this.decodeDataCharacter(i,m,!0),S=this.decodeDataCharacter(i,m,!1);return new sa(1597*A.getValue()+S.getValue(),A.getChecksumPortion()+4*S.getChecksumPortion(),m)}catch{return null}}decodeDataCharacter(i,o,l){let f=this.getDataCharacterCounters();for(let ue=0;ue<f.length;ue++)f[ue]=0;if(l)Yt.recordPatternInReverse(i,o.getStartEnd()[0],f);else{Yt.recordPattern(i,o.getStartEnd()[1]+1,f);for(let ue=0,ye=f.length-1;ue<ye;ue++,ye--){let ke=f[ue];f[ue]=f[ye],f[ye]=ke}}let d=l?16:15,m=et.sum(new Int32Array(f))/d,y=this.getOddCounts(),A=this.getEvenCounts(),S=this.getOddRoundingErrors(),R=this.getEvenRoundingErrors();for(let ue=0;ue<f.length;ue++){let ye=f[ue]/m,ke=Math.floor(ye+.5);ke<1?ke=1:ke>8&&(ke=8);let Pe=Math.floor(ue/2);(ue&1)===0?(y[Pe]=ke,S[Pe]=ye-ke):(A[Pe]=ke,R[Pe]=ye-ke)}this.adjustOddEvenCounts(l,d);let L=0,k=0;for(let ue=y.length-1;ue>=0;ue--)k*=9,k+=y[ue],L+=y[ue];let G=0,te=0;for(let ue=A.length-1;ue>=0;ue--)G*=9,G+=A[ue],te+=A[ue];let re=k+3*G;if(l){if((L&1)!==0||L>12||L<4)throw new fe;let ue=(12-L)/2,ye=Kt.OUTSIDE_ODD_WIDEST[ue],ke=9-ye,Pe=Br.getRSSvalue(y,ye,!1),Oe=Br.getRSSvalue(A,ke,!0),Rt=Kt.OUTSIDE_EVEN_TOTAL_SUBSET[ue],yt=Kt.OUTSIDE_GSUM[ue];return new fr(Pe*Rt+Oe+yt,re)}else{if((te&1)!==0||te>10||te<4)throw new fe;let ue=(10-te)/2,ye=Kt.INSIDE_ODD_WIDEST[ue],ke=9-ye,Pe=Br.getRSSvalue(y,ye,!0),Oe=Br.getRSSvalue(A,ke,!1),Rt=Kt.INSIDE_ODD_TOTAL_SUBSET[ue],yt=Kt.INSIDE_GSUM[ue];return new fr(Oe*Rt+Pe+yt,re)}}findFinderPattern(i,o){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let f=i.getSize(),d=!1,m=0;for(;m<f&&(d=!i.get(m),o!==d);)m++;let y=0,A=m;for(let S=m;S<f;S++)if(i.get(S)!==d)l[y]++;else{if(y===3){if(Un.isFinderPattern(l))return[A,S];A+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,y--}else y++;l[y]=1,d=!d}throw new fe}parseFoundFinderPattern(i,o,l,f){let d=i.get(f[0]),m=f[0]-1;for(;m>=0&&d!==i.get(m);)m--;m++;const y=f[0]-m,A=this.getDecodeFinderCounters(),S=new Int32Array(A.length);$.arraycopy(A,0,S,1,A.length-1),S[0]=y;const R=this.parseFinderValue(S,Kt.FINDER_PATTERNS);let L=m,k=f[1];return l&&(L=i.getSize()-1-L,k=i.getSize()-1-k),new fi(R,[m,f[1]],L,k,o)}adjustOddEvenCounts(i,o){let l=et.sum(new Int32Array(this.getOddCounts())),f=et.sum(new Int32Array(this.getEvenCounts())),d=!1,m=!1,y=!1,A=!1;i?(l>12?m=!0:l<4&&(d=!0),f>12?A=!0:f<4&&(y=!0)):(l>11?m=!0:l<5&&(d=!0),f>10?A=!0:f<4&&(y=!0));let S=l+f-o,R=(l&1)===(i?1:0),L=(f&1)===1;if(S===1)if(R){if(L)throw new fe;m=!0}else{if(!L)throw new fe;A=!0}else if(S===-1)if(R){if(L)throw new fe;d=!0}else{if(!L)throw new fe;y=!0}else if(S===0){if(R){if(!L)throw new fe;l<f?(d=!0,A=!0):(m=!0,y=!0)}else if(L)throw new fe}else throw new fe;if(d){if(m)throw new fe;Un.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(m&&Un.decrement(this.getOddCounts(),this.getOddRoundingErrors()),y){if(A)throw new fe;Un.increment(this.getEvenCounts(),this.getOddRoundingErrors())}A&&Un.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Kt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Kt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Kt.OUTSIDE_GSUM=[0,161,961,2015,2715],Kt.INSIDE_GSUM=[0,336,1036,1516],Kt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Kt.INSIDE_ODD_WIDEST=[2,4,6,8],Kt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Sr extends Yt{constructor(i,o){super(),this.readers=[],this.verbose=o===!0;const l=i?i.get(De.POSSIBLE_FORMATS):null,f=i&&i.get(De.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(Le.EAN_13)||l.includes(Le.UPC_A)||l.includes(Le.EAN_8)||l.includes(Le.UPC_E))&&this.readers.push(new Ls(i)),l.includes(Le.CODE_39)&&this.readers.push(new Xt(f)),l.includes(Le.CODE_128)&&this.readers.push(new Me),l.includes(Le.ITF)&&this.readers.push(new at),l.includes(Le.RSS_14)&&this.readers.push(new Kt),l.includes(Le.RSS_EXPANDED)&&this.readers.push(new Ie(this.verbose))):(this.readers.push(new Ls(i)),this.readers.push(new Xt),this.readers.push(new Ls(i)),this.readers.push(new Me),this.readers.push(new at),this.readers.push(new Kt),this.readers.push(new Ie(this.verbose)))}decodeRow(i,o,l){for(let f=0;f<this.readers.length;f++)try{return this.readers[f].decodeRow(i,o,l)}catch{}throw new fe}reset(){this.readers.forEach(i=>i.reset())}}class aa extends Ue{constructor(i=500,o){super(new Sr(o),i,o)}}class Mt{constructor(i,o,l){this.ecCodewords=i,this.ecBlocks=[o],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Dt{constructor(i,o){this.count=i,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class bt{constructor(i,o,l,f,d,m){this.versionNumber=i,this.symbolSizeRows=o,this.symbolSizeColumns=l,this.dataRegionSizeRows=f,this.dataRegionSizeColumns=d,this.ecBlocks=m;let y=0;const A=m.getECCodewords(),S=m.getECBlocks();for(let R of S)y+=R.getCount()*(R.getDataCodewords()+A);this.totalCodewords=y}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(i,o){if((i&1)!==0||(o&1)!==0)throw new j;for(let l of bt.VERSIONS)if(l.symbolSizeRows===i&&l.symbolSizeColumns===o)return l;throw new j}toString(){return""+this.versionNumber}static buildVersions(){return[new bt(1,10,10,8,8,new Mt(5,new Dt(1,3))),new bt(2,12,12,10,10,new Mt(7,new Dt(1,5))),new bt(3,14,14,12,12,new Mt(10,new Dt(1,8))),new bt(4,16,16,14,14,new Mt(12,new Dt(1,12))),new bt(5,18,18,16,16,new Mt(14,new Dt(1,18))),new bt(6,20,20,18,18,new Mt(18,new Dt(1,22))),new bt(7,22,22,20,20,new Mt(20,new Dt(1,30))),new bt(8,24,24,22,22,new Mt(24,new Dt(1,36))),new bt(9,26,26,24,24,new Mt(28,new Dt(1,44))),new bt(10,32,32,14,14,new Mt(36,new Dt(1,62))),new bt(11,36,36,16,16,new Mt(42,new Dt(1,86))),new bt(12,40,40,18,18,new Mt(48,new Dt(1,114))),new bt(13,44,44,20,20,new Mt(56,new Dt(1,144))),new bt(14,48,48,22,22,new Mt(68,new Dt(1,174))),new bt(15,52,52,24,24,new Mt(42,new Dt(2,102))),new bt(16,64,64,14,14,new Mt(56,new Dt(2,140))),new bt(17,72,72,16,16,new Mt(36,new Dt(4,92))),new bt(18,80,80,18,18,new Mt(48,new Dt(4,114))),new bt(19,88,88,20,20,new Mt(56,new Dt(4,144))),new bt(20,96,96,22,22,new Mt(68,new Dt(4,174))),new bt(21,104,104,24,24,new Mt(56,new Dt(6,136))),new bt(22,120,120,18,18,new Mt(68,new Dt(6,175))),new bt(23,132,132,20,20,new Mt(62,new Dt(8,163))),new bt(24,144,144,22,22,new Mt(62,new Dt(8,156),new Dt(2,155))),new bt(25,8,18,6,16,new Mt(7,new Dt(1,5))),new bt(26,8,32,6,14,new Mt(11,new Dt(1,10))),new bt(27,12,26,10,24,new Mt(14,new Dt(1,16))),new bt(28,12,36,10,16,new Mt(18,new Dt(1,22))),new bt(29,16,36,14,16,new Mt(24,new Dt(1,32))),new bt(30,16,48,14,22,new Mt(28,new Dt(1,49)))]}}bt.VERSIONS=bt.buildVersions();class J{constructor(i){const o=i.getHeight();if(o<8||o>144||(o&1)!==0)throw new j;this.version=J.readVersion(i),this.mappingBitMatrix=this.extractDataRegion(i),this.readMappingMatrix=new Je(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(i){const o=i.getHeight(),l=i.getWidth();return bt.getVersionForDimensions(o,l)}readCodewords(){const i=new Int8Array(this.version.getTotalCodewords());let o=0,l=4,f=0;const d=this.mappingBitMatrix.getHeight(),m=this.mappingBitMatrix.getWidth();let y=!1,A=!1,S=!1,R=!1;do if(l===d&&f===0&&!y)i[o++]=this.readCorner1(d,m)&255,l-=2,f+=2,y=!0;else if(l===d-2&&f===0&&(m&3)!==0&&!A)i[o++]=this.readCorner2(d,m)&255,l-=2,f+=2,A=!0;else if(l===d+4&&f===2&&(m&7)===0&&!S)i[o++]=this.readCorner3(d,m)&255,l-=2,f+=2,S=!0;else if(l===d-2&&f===0&&(m&7)===4&&!R)i[o++]=this.readCorner4(d,m)&255,l-=2,f+=2,R=!0;else{do l<d&&f>=0&&!this.readMappingMatrix.get(f,l)&&(i[o++]=this.readUtah(l,f,d,m)&255),l-=2,f+=2;while(l>=0&&f<m);l+=1,f+=3;do l>=0&&f<m&&!this.readMappingMatrix.get(f,l)&&(i[o++]=this.readUtah(l,f,d,m)&255),l+=2,f-=2;while(l<d&&f>=0);l+=3,f+=1}while(l<d||f<m);if(o!==this.version.getTotalCodewords())throw new j;return i}readModule(i,o,l,f){return i<0&&(i+=l,o+=4-(l+4&7)),o<0&&(o+=f,i+=4-(f+4&7)),this.readMappingMatrix.set(o,i),this.mappingBitMatrix.get(o,i)}readUtah(i,o,l,f){let d=0;return this.readModule(i-2,o-2,l,f)&&(d|=1),d<<=1,this.readModule(i-2,o-1,l,f)&&(d|=1),d<<=1,this.readModule(i-1,o-2,l,f)&&(d|=1),d<<=1,this.readModule(i-1,o-1,l,f)&&(d|=1),d<<=1,this.readModule(i-1,o,l,f)&&(d|=1),d<<=1,this.readModule(i,o-2,l,f)&&(d|=1),d<<=1,this.readModule(i,o-1,l,f)&&(d|=1),d<<=1,this.readModule(i,o,l,f)&&(d|=1),d}readCorner1(i,o){let l=0;return this.readModule(i-1,0,i,o)&&(l|=1),l<<=1,this.readModule(i-1,1,i,o)&&(l|=1),l<<=1,this.readModule(i-1,2,i,o)&&(l|=1),l<<=1,this.readModule(0,o-2,i,o)&&(l|=1),l<<=1,this.readModule(0,o-1,i,o)&&(l|=1),l<<=1,this.readModule(1,o-1,i,o)&&(l|=1),l<<=1,this.readModule(2,o-1,i,o)&&(l|=1),l<<=1,this.readModule(3,o-1,i,o)&&(l|=1),l}readCorner2(i,o){let l=0;return this.readModule(i-3,0,i,o)&&(l|=1),l<<=1,this.readModule(i-2,0,i,o)&&(l|=1),l<<=1,this.readModule(i-1,0,i,o)&&(l|=1),l<<=1,this.readModule(0,o-4,i,o)&&(l|=1),l<<=1,this.readModule(0,o-3,i,o)&&(l|=1),l<<=1,this.readModule(0,o-2,i,o)&&(l|=1),l<<=1,this.readModule(0,o-1,i,o)&&(l|=1),l<<=1,this.readModule(1,o-1,i,o)&&(l|=1),l}readCorner3(i,o){let l=0;return this.readModule(i-1,0,i,o)&&(l|=1),l<<=1,this.readModule(i-1,o-1,i,o)&&(l|=1),l<<=1,this.readModule(0,o-3,i,o)&&(l|=1),l<<=1,this.readModule(0,o-2,i,o)&&(l|=1),l<<=1,this.readModule(0,o-1,i,o)&&(l|=1),l<<=1,this.readModule(1,o-3,i,o)&&(l|=1),l<<=1,this.readModule(1,o-2,i,o)&&(l|=1),l<<=1,this.readModule(1,o-1,i,o)&&(l|=1),l}readCorner4(i,o){let l=0;return this.readModule(i-3,0,i,o)&&(l|=1),l<<=1,this.readModule(i-2,0,i,o)&&(l|=1),l<<=1,this.readModule(i-1,0,i,o)&&(l|=1),l<<=1,this.readModule(0,o-2,i,o)&&(l|=1),l<<=1,this.readModule(0,o-1,i,o)&&(l|=1),l<<=1,this.readModule(1,o-1,i,o)&&(l|=1),l<<=1,this.readModule(2,o-1,i,o)&&(l|=1),l<<=1,this.readModule(3,o-1,i,o)&&(l|=1),l}extractDataRegion(i){const o=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(i.getHeight()!==o)throw new I("Dimension of bitMatrix must match the version size");const f=this.version.getDataRegionSizeRows(),d=this.version.getDataRegionSizeColumns(),m=o/f|0,y=l/d|0,A=m*f,S=y*d,R=new Je(S,A);for(let L=0;L<m;++L){const k=L*f;for(let G=0;G<y;++G){const te=G*d;for(let re=0;re<f;++re){const ue=L*(f+2)+1+re,ye=k+re;for(let ke=0;ke<d;++ke){const Pe=G*(d+2)+1+ke;if(i.get(Pe,ue)){const Oe=te+ke;R.set(Oe,ye)}}}}}return R}}class ze{constructor(i,o){this.numDataCodewords=i,this.codewords=o}static getDataBlocks(i,o){const l=o.getECBlocks();let f=0;const d=l.getECBlocks();for(let re of d)f+=re.getCount();const m=new Array(f);let y=0;for(let re of d)for(let ue=0;ue<re.getCount();ue++){const ye=re.getDataCodewords(),ke=l.getECCodewords()+ye;m[y++]=new ze(ye,new Uint8Array(ke))}const S=m[0].codewords.length-l.getECCodewords(),R=S-1;let L=0;for(let re=0;re<R;re++)for(let ue=0;ue<y;ue++)m[ue].codewords[re]=i[L++];const k=o.getVersionNumber()===24,G=k?8:y;for(let re=0;re<G;re++)m[re].codewords[S-1]=i[L++];const te=m[0].codewords.length;for(let re=S;re<te;re++)for(let ue=0;ue<y;ue++){const ye=k?(ue+8)%y:ue,ke=k&&ye>7?re-1:re;m[ye].codewords[ke]=i[L++]}if(L!==i.length)throw new I;return m}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Ge{constructor(i){this.bytes=i,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(i){if(i<1||i>32||i>this.available())throw new I(""+i);let o=0,l=this.bitOffset,f=this.byteOffset;const d=this.bytes;if(l>0){const m=8-l,y=i<m?i:m,A=m-y,S=255>>8-y<<A;o=(d[f]&S)>>A,i-=y,l+=y,l===8&&(l=0,f++)}if(i>0){for(;i>=8;)o=o<<8|d[f]&255,f++,i-=8;if(i>0){const m=8-i,y=255>>m<<m;o=o<<i|(d[f]&y)>>m,l+=i}}return this.bitOffset=l,this.byteOffset=f,o}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Ze;(function(P){P[P.PAD_ENCODE=0]="PAD_ENCODE",P[P.ASCII_ENCODE=1]="ASCII_ENCODE",P[P.C40_ENCODE=2]="C40_ENCODE",P[P.TEXT_ENCODE=3]="TEXT_ENCODE",P[P.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",P[P.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",P[P.BASE256_ENCODE=6]="BASE256_ENCODE"})(Ze||(Ze={}));class Gn{static decode(i){const o=new Ge(i),l=new W,f=new W,d=new Array;let m=Ze.ASCII_ENCODE;do if(m===Ze.ASCII_ENCODE)m=this.decodeAsciiSegment(o,l,f);else{switch(m){case Ze.C40_ENCODE:this.decodeC40Segment(o,l);break;case Ze.TEXT_ENCODE:this.decodeTextSegment(o,l);break;case Ze.ANSIX12_ENCODE:this.decodeAnsiX12Segment(o,l);break;case Ze.EDIFACT_ENCODE:this.decodeEdifactSegment(o,l);break;case Ze.BASE256_ENCODE:this.decodeBase256Segment(o,l,d);break;default:throw new j}m=Ze.ASCII_ENCODE}while(m!==Ze.PAD_ENCODE&&o.available()>0);return f.length()>0&&l.append(f.toString()),new Jt(i,l.toString(),d.length===0?null:d,null)}static decodeAsciiSegment(i,o,l){let f=!1;do{let d=i.readBits(8);if(d===0)throw new j;if(d<=128)return f&&(d+=128),o.append(String.fromCharCode(d-1)),Ze.ASCII_ENCODE;if(d===129)return Ze.PAD_ENCODE;if(d<=229){const m=d-130;m<10&&o.append("0"),o.append(""+m)}else switch(d){case 230:return Ze.C40_ENCODE;case 231:return Ze.BASE256_ENCODE;case 232:o.append("");break;case 233:case 234:break;case 235:f=!0;break;case 236:o.append("[)>05"),l.insert(0,"");break;case 237:o.append("[)>06"),l.insert(0,"");break;case 238:return Ze.ANSIX12_ENCODE;case 239:return Ze.TEXT_ENCODE;case 240:return Ze.EDIFACT_ENCODE;case 241:break;default:if(d!==254||i.available()!==0)throw new j;break}}while(i.available()>0);return Ze.ASCII_ENCODE}static decodeC40Segment(i,o){let l=!1;const f=[];let d=0;do{if(i.available()===8)return;const m=i.readBits(8);if(m===254)return;this.parseTwoBytes(m,i.readBits(8),f);for(let y=0;y<3;y++){const A=f[y];switch(d){case 0:if(A<3)d=A+1;else if(A<this.C40_BASIC_SET_CHARS.length){const S=this.C40_BASIC_SET_CHARS[A];l?(o.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):o.append(S)}else throw new j;break;case 1:l?(o.append(String.fromCharCode(A+128)),l=!1):o.append(String.fromCharCode(A)),d=0;break;case 2:if(A<this.C40_SHIFT2_SET_CHARS.length){const S=this.C40_SHIFT2_SET_CHARS[A];l?(o.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):o.append(S)}else switch(A){case 27:o.append("");break;case 30:l=!0;break;default:throw new j}d=0;break;case 3:l?(o.append(String.fromCharCode(A+224)),l=!1):o.append(String.fromCharCode(A+96)),d=0;break;default:throw new j}}}while(i.available()>0)}static decodeTextSegment(i,o){let l=!1,f=[],d=0;do{if(i.available()===8)return;const m=i.readBits(8);if(m===254)return;this.parseTwoBytes(m,i.readBits(8),f);for(let y=0;y<3;y++){const A=f[y];switch(d){case 0:if(A<3)d=A+1;else if(A<this.TEXT_BASIC_SET_CHARS.length){const S=this.TEXT_BASIC_SET_CHARS[A];l?(o.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):o.append(S)}else throw new j;break;case 1:l?(o.append(String.fromCharCode(A+128)),l=!1):o.append(String.fromCharCode(A)),d=0;break;case 2:if(A<this.TEXT_SHIFT2_SET_CHARS.length){const S=this.TEXT_SHIFT2_SET_CHARS[A];l?(o.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):o.append(S)}else switch(A){case 27:o.append("");break;case 30:l=!0;break;default:throw new j}d=0;break;case 3:if(A<this.TEXT_SHIFT3_SET_CHARS.length){const S=this.TEXT_SHIFT3_SET_CHARS[A];l?(o.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):o.append(S),d=0}else throw new j;break;default:throw new j}}}while(i.available()>0)}static decodeAnsiX12Segment(i,o){const l=[];do{if(i.available()===8)return;const f=i.readBits(8);if(f===254)return;this.parseTwoBytes(f,i.readBits(8),l);for(let d=0;d<3;d++){const m=l[d];switch(m){case 0:o.append("\r");break;case 1:o.append("*");break;case 2:o.append(">");break;case 3:o.append(" ");break;default:if(m<14)o.append(String.fromCharCode(m+44));else if(m<40)o.append(String.fromCharCode(m+51));else throw new j;break}}}while(i.available()>0)}static parseTwoBytes(i,o,l){let f=(i<<8)+o-1,d=Math.floor(f/1600);l[0]=d,f-=d*1600,d=Math.floor(f/40),l[1]=d,l[2]=f-d*40}static decodeEdifactSegment(i,o){do{if(i.available()<=16)return;for(let l=0;l<4;l++){let f=i.readBits(6);if(f===31){const d=8-i.getBitOffset();d!==8&&i.readBits(d);return}(f&32)===0&&(f|=64),o.append(String.fromCharCode(f))}}while(i.available()>0)}static decodeBase256Segment(i,o,l){let f=1+i.getByteOffset();const d=this.unrandomize255State(i.readBits(8),f++);let m;if(d===0?m=i.available()/8|0:d<250?m=d:m=250*(d-249)+this.unrandomize255State(i.readBits(8),f++),m<0)throw new j;const y=new Uint8Array(m);for(let A=0;A<m;A++){if(i.available()<8)throw new j;y[A]=this.unrandomize255State(i.readBits(8),f++)}l.push(y);try{o.append(Q.decode(y,Z.ISO88591))}catch(A){throw new ir("Platform does not support required encoding: "+A.message)}}static unrandomize255State(i,o){const l=149*o%255+1,f=i-l;return f>=0?f:f+256}}Gn.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Gn.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Gn.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Gn.TEXT_SHIFT2_SET_CHARS=Gn.C40_SHIFT2_SET_CHARS,Gn.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class ls{constructor(){this.rsDecoder=new Kr(ht.DATA_MATRIX_FIELD_256)}decode(i){const o=new J(i),l=o.getVersion(),f=o.readCodewords(),d=ze.getDataBlocks(f,l);let m=0;for(let S of d)m+=S.getNumDataCodewords();const y=new Uint8Array(m),A=d.length;for(let S=0;S<A;S++){const R=d[S],L=R.getCodewords(),k=R.getNumDataCodewords();this.correctErrors(L,k);for(let G=0;G<k;G++)y[G*A+S]=L[G]}return Gn.decode(y)}correctErrors(i,o){const l=new Int32Array(i);try{this.rsDecoder.decode(l,i.length-o)}catch{throw new B}for(let f=0;f<o;f++)i[f]=l[f]}}class tt{constructor(i){this.image=i,this.rectangleDetector=new pn(this.image)}detect(){const i=this.rectangleDetector.detect();let o=this.detectSolid1(i);if(o=this.detectSolid2(o),o[3]=this.correctTopRight(o),!o[3])throw new fe;o=this.shiftToModuleCenter(o);const l=o[0],f=o[1],d=o[2],m=o[3];let y=this.transitionsBetween(l,m)+1,A=this.transitionsBetween(d,m)+1;(y&1)===1&&(y+=1),(A&1)===1&&(A+=1),4*y<7*A&&4*A<7*y&&(y=A=Math.max(y,A));let S=tt.sampleGrid(this.image,l,f,d,m,y,A);return new Ts(S,[l,f,d,m])}static shiftPoint(i,o,l){let f=(o.getX()-i.getX())/(l+1),d=(o.getY()-i.getY())/(l+1);return new Fe(i.getX()+f,i.getY()+d)}static moveAway(i,o,l){let f=i.getX(),d=i.getY();return f<o?f-=1:f+=1,d<l?d-=1:d+=1,new Fe(f,d)}detectSolid1(i){let o=i[0],l=i[1],f=i[3],d=i[2],m=this.transitionsBetween(o,l),y=this.transitionsBetween(l,f),A=this.transitionsBetween(f,d),S=this.transitionsBetween(d,o),R=m,L=[d,o,l,f];return R>y&&(R=y,L[0]=o,L[1]=l,L[2]=f,L[3]=d),R>A&&(R=A,L[0]=l,L[1]=f,L[2]=d,L[3]=o),R>S&&(L[0]=f,L[1]=d,L[2]=o,L[3]=l),L}detectSolid2(i){let o=i[0],l=i[1],f=i[2],d=i[3],m=this.transitionsBetween(o,d),y=tt.shiftPoint(l,f,(m+1)*4),A=tt.shiftPoint(f,l,(m+1)*4),S=this.transitionsBetween(y,o),R=this.transitionsBetween(A,d);return S<R?(i[0]=o,i[1]=l,i[2]=f,i[3]=d):(i[0]=l,i[1]=f,i[2]=d,i[3]=o),i}correctTopRight(i){let o=i[0],l=i[1],f=i[2],d=i[3],m=this.transitionsBetween(o,d),y=this.transitionsBetween(l,d),A=tt.shiftPoint(o,l,(y+1)*4),S=tt.shiftPoint(f,l,(m+1)*4);m=this.transitionsBetween(A,d),y=this.transitionsBetween(S,d);let R=new Fe(d.getX()+(f.getX()-l.getX())/(m+1),d.getY()+(f.getY()-l.getY())/(m+1)),L=new Fe(d.getX()+(o.getX()-l.getX())/(y+1),d.getY()+(o.getY()-l.getY())/(y+1));if(!this.isValid(R))return this.isValid(L)?L:null;if(!this.isValid(L))return R;let k=this.transitionsBetween(A,R)+this.transitionsBetween(S,R),G=this.transitionsBetween(A,L)+this.transitionsBetween(S,L);return k>G?R:L}shiftToModuleCenter(i){let o=i[0],l=i[1],f=i[2],d=i[3],m=this.transitionsBetween(o,d)+1,y=this.transitionsBetween(f,d)+1,A=tt.shiftPoint(o,l,y*4),S=tt.shiftPoint(f,l,m*4);m=this.transitionsBetween(A,d)+1,y=this.transitionsBetween(S,d)+1,(m&1)===1&&(m+=1),(y&1)===1&&(y+=1);let R=(o.getX()+l.getX()+f.getX()+d.getX())/4,L=(o.getY()+l.getY()+f.getY()+d.getY())/4;o=tt.moveAway(o,R,L),l=tt.moveAway(l,R,L),f=tt.moveAway(f,R,L),d=tt.moveAway(d,R,L);let k,G;return A=tt.shiftPoint(o,l,y*4),A=tt.shiftPoint(A,d,m*4),k=tt.shiftPoint(l,o,y*4),k=tt.shiftPoint(k,f,m*4),S=tt.shiftPoint(f,d,y*4),S=tt.shiftPoint(S,l,m*4),G=tt.shiftPoint(d,f,y*4),G=tt.shiftPoint(G,o,m*4),[A,k,S,G]}isValid(i){return i.getX()>=0&&i.getX()<this.image.getWidth()&&i.getY()>0&&i.getY()<this.image.getHeight()}static sampleGrid(i,o,l,f,d,m,y){return hr.getInstance().sampleGrid(i,m,y,.5,.5,m-.5,.5,m-.5,y-.5,.5,y-.5,o.getX(),o.getY(),d.getX(),d.getY(),f.getX(),f.getY(),l.getX(),l.getY())}transitionsBetween(i,o){let l=Math.trunc(i.getX()),f=Math.trunc(i.getY()),d=Math.trunc(o.getX()),m=Math.trunc(o.getY()),y=Math.abs(m-f)>Math.abs(d-l);if(y){let re=l;l=f,f=re,re=d,d=m,m=re}let A=Math.abs(d-l),S=Math.abs(m-f),R=-A/2,L=f<m?1:-1,k=l<d?1:-1,G=0,te=this.image.get(y?f:l,y?l:f);for(let re=l,ue=f;re!==d;re+=k){let ye=this.image.get(y?ue:re,y?re:ue);if(ye!==te&&(G++,te=ye),R+=S,R>0){if(ue===m)break;ue+=L,R-=A}}return G}}class Or{constructor(){this.decoder=new ls}decode(i,o=null){let l,f;if(o!=null&&o.has(De.PURE_BARCODE)){const S=Or.extractPureBits(i.getBlackMatrix());l=this.decoder.decode(S),f=Or.NO_POINTS}else{const S=new tt(i.getBlackMatrix()).detect();l=this.decoder.decode(S.getBits()),f=S.getPoints()}const d=l.getRawBytes(),m=new Ve(l.getText(),d,8*d.length,f,Le.DATA_MATRIX,$.currentTimeMillis()),y=l.getByteSegments();y!=null&&m.putMetadata(Ct.BYTE_SEGMENTS,y);const A=l.getECLevel();return A!=null&&m.putMetadata(Ct.ERROR_CORRECTION_LEVEL,A),m}reset(){}static extractPureBits(i){const o=i.getTopLeftOnBit(),l=i.getBottomRightOnBit();if(o==null||l==null)throw new fe;const f=this.moduleSize(o,i);let d=o[1];const m=l[1];let y=o[0];const S=(l[0]-y+1)/f,R=(m-d+1)/f;if(S<=0||R<=0)throw new fe;const L=f/2;d+=L,y+=L;const k=new Je(S,R);for(let G=0;G<R;G++){const te=d+G*f;for(let re=0;re<S;re++)i.get(y+re*f,te)&&k.set(re,G)}return k}static moduleSize(i,o){const l=o.getWidth();let f=i[0];const d=i[1];for(;f<l&&o.get(f,d);)f++;if(f===l)throw new fe;const m=f-i[0];if(m===0)throw new fe;return m}}Or.NO_POINTS=[];class bi extends Ue{constructor(i=500){super(new Or,i)}}var Qn;(function(P){P[P.L=0]="L",P[P.M=1]="M",P[P.Q=2]="Q",P[P.H=3]="H"})(Qn||(Qn={}));class Et{constructor(i,o,l){this.value=i,this.stringValue=o,this.bits=l,Et.FOR_BITS.set(l,this),Et.FOR_VALUE.set(i,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(i){switch(i){case"L":return Et.L;case"M":return Et.M;case"Q":return Et.Q;case"H":return Et.H;default:throw new C(i+"not available")}}toString(){return this.stringValue}equals(i){if(!(i instanceof Et))return!1;const o=i;return this.value===o.value}static forBits(i){if(i<0||i>=Et.FOR_BITS.size)throw new I;return Et.FOR_BITS.get(i)}}Et.FOR_BITS=new Map,Et.FOR_VALUE=new Map,Et.L=new Et(Qn.L,"L",1),Et.M=new Et(Qn.M,"M",0),Et.Q=new Et(Qn.Q,"Q",3),Et.H=new Et(Qn.H,"H",2);class nn{constructor(i){this.errorCorrectionLevel=Et.forBits(i>>3&3),this.dataMask=i&7}static numBitsDiffering(i,o){return K.bitCount(i^o)}static decodeFormatInformation(i,o){const l=nn.doDecodeFormatInformation(i,o);return l!==null?l:nn.doDecodeFormatInformation(i^nn.FORMAT_INFO_MASK_QR,o^nn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(i,o){let l=Number.MAX_SAFE_INTEGER,f=0;for(const d of nn.FORMAT_INFO_DECODE_LOOKUP){const m=d[0];if(m===i||m===o)return new nn(d[1]);let y=nn.numBitsDiffering(i,m);y<l&&(f=d[1],l=y),i!==o&&(y=nn.numBitsDiffering(o,m),y<l&&(f=d[1],l=y))}return l<=3?new nn(f):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(i){if(!(i instanceof nn))return!1;const o=i;return this.errorCorrectionLevel===o.errorCorrectionLevel&&this.dataMask===o.dataMask}}nn.FORMAT_INFO_MASK_QR=21522,nn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class he{constructor(i,...o){this.ecCodewordsPerBlock=i,this.ecBlocks=o}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let i=0;const o=this.ecBlocks;for(const l of o)i+=l.getCount();return i}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class H{constructor(i,o){this.count=i,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class We{constructor(i,o,...l){this.versionNumber=i,this.alignmentPatternCenters=o,this.ecBlocks=l;let f=0;const d=l[0].getECCodewordsPerBlock(),m=l[0].getECBlocks();for(const y of m)f+=y.getCount()*(y.getDataCodewords()+d);this.totalCodewords=f}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(i){return this.ecBlocks[i.getValue()]}static getProvisionalVersionForDimension(i){if(i%4!==1)throw new j;try{return this.getVersionForNumber((i-17)/4)}catch{throw new j}}static getVersionForNumber(i){if(i<1||i>40)throw new I;return We.VERSIONS[i-1]}static decodeVersionInformation(i){let o=Number.MAX_SAFE_INTEGER,l=0;for(let f=0;f<We.VERSION_DECODE_INFO.length;f++){const d=We.VERSION_DECODE_INFO[f];if(d===i)return We.getVersionForNumber(f+7);const m=nn.numBitsDiffering(i,d);m<o&&(l=f+7,o=m)}return o<=3?We.getVersionForNumber(l):null}buildFunctionPattern(){const i=this.getDimensionForVersion(),o=new Je(i);o.setRegion(0,0,9,9),o.setRegion(i-8,0,8,9),o.setRegion(0,i-8,9,8);const l=this.alignmentPatternCenters.length;for(let f=0;f<l;f++){const d=this.alignmentPatternCenters[f]-2;for(let m=0;m<l;m++)f===0&&(m===0||m===l-1)||f===l-1&&m===0||o.setRegion(this.alignmentPatternCenters[m]-2,d,5,5)}return o.setRegion(6,9,1,i-17),o.setRegion(9,6,i-17,1),this.versionNumber>6&&(o.setRegion(i-11,0,3,6),o.setRegion(0,i-11,6,3)),o}toString(){return""+this.versionNumber}}We.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),We.VERSIONS=[new We(1,new Int32Array(0),new he(7,new H(1,19)),new he(10,new H(1,16)),new he(13,new H(1,13)),new he(17,new H(1,9))),new We(2,Int32Array.from([6,18]),new he(10,new H(1,34)),new he(16,new H(1,28)),new he(22,new H(1,22)),new he(28,new H(1,16))),new We(3,Int32Array.from([6,22]),new he(15,new H(1,55)),new he(26,new H(1,44)),new he(18,new H(2,17)),new he(22,new H(2,13))),new We(4,Int32Array.from([6,26]),new he(20,new H(1,80)),new he(18,new H(2,32)),new he(26,new H(2,24)),new he(16,new H(4,9))),new We(5,Int32Array.from([6,30]),new he(26,new H(1,108)),new he(24,new H(2,43)),new he(18,new H(2,15),new H(2,16)),new he(22,new H(2,11),new H(2,12))),new We(6,Int32Array.from([6,34]),new he(18,new H(2,68)),new he(16,new H(4,27)),new he(24,new H(4,19)),new he(28,new H(4,15))),new We(7,Int32Array.from([6,22,38]),new he(20,new H(2,78)),new he(18,new H(4,31)),new he(18,new H(2,14),new H(4,15)),new he(26,new H(4,13),new H(1,14))),new We(8,Int32Array.from([6,24,42]),new he(24,new H(2,97)),new he(22,new H(2,38),new H(2,39)),new he(22,new H(4,18),new H(2,19)),new he(26,new H(4,14),new H(2,15))),new We(9,Int32Array.from([6,26,46]),new he(30,new H(2,116)),new he(22,new H(3,36),new H(2,37)),new he(20,new H(4,16),new H(4,17)),new he(24,new H(4,12),new H(4,13))),new We(10,Int32Array.from([6,28,50]),new he(18,new H(2,68),new H(2,69)),new he(26,new H(4,43),new H(1,44)),new he(24,new H(6,19),new H(2,20)),new he(28,new H(6,15),new H(2,16))),new We(11,Int32Array.from([6,30,54]),new he(20,new H(4,81)),new he(30,new H(1,50),new H(4,51)),new he(28,new H(4,22),new H(4,23)),new he(24,new H(3,12),new H(8,13))),new We(12,Int32Array.from([6,32,58]),new he(24,new H(2,92),new H(2,93)),new he(22,new H(6,36),new H(2,37)),new he(26,new H(4,20),new H(6,21)),new he(28,new H(7,14),new H(4,15))),new We(13,Int32Array.from([6,34,62]),new he(26,new H(4,107)),new he(22,new H(8,37),new H(1,38)),new he(24,new H(8,20),new H(4,21)),new he(22,new H(12,11),new H(4,12))),new We(14,Int32Array.from([6,26,46,66]),new he(30,new H(3,115),new H(1,116)),new he(24,new H(4,40),new H(5,41)),new he(20,new H(11,16),new H(5,17)),new he(24,new H(11,12),new H(5,13))),new We(15,Int32Array.from([6,26,48,70]),new he(22,new H(5,87),new H(1,88)),new he(24,new H(5,41),new H(5,42)),new he(30,new H(5,24),new H(7,25)),new he(24,new H(11,12),new H(7,13))),new We(16,Int32Array.from([6,26,50,74]),new he(24,new H(5,98),new H(1,99)),new he(28,new H(7,45),new H(3,46)),new he(24,new H(15,19),new H(2,20)),new he(30,new H(3,15),new H(13,16))),new We(17,Int32Array.from([6,30,54,78]),new he(28,new H(1,107),new H(5,108)),new he(28,new H(10,46),new H(1,47)),new he(28,new H(1,22),new H(15,23)),new he(28,new H(2,14),new H(17,15))),new We(18,Int32Array.from([6,30,56,82]),new he(30,new H(5,120),new H(1,121)),new he(26,new H(9,43),new H(4,44)),new he(28,new H(17,22),new H(1,23)),new he(28,new H(2,14),new H(19,15))),new We(19,Int32Array.from([6,30,58,86]),new he(28,new H(3,113),new H(4,114)),new he(26,new H(3,44),new H(11,45)),new he(26,new H(17,21),new H(4,22)),new he(26,new H(9,13),new H(16,14))),new We(20,Int32Array.from([6,34,62,90]),new he(28,new H(3,107),new H(5,108)),new he(26,new H(3,41),new H(13,42)),new he(30,new H(15,24),new H(5,25)),new he(28,new H(15,15),new H(10,16))),new We(21,Int32Array.from([6,28,50,72,94]),new he(28,new H(4,116),new H(4,117)),new he(26,new H(17,42)),new he(28,new H(17,22),new H(6,23)),new he(30,new H(19,16),new H(6,17))),new We(22,Int32Array.from([6,26,50,74,98]),new he(28,new H(2,111),new H(7,112)),new he(28,new H(17,46)),new he(30,new H(7,24),new H(16,25)),new he(24,new H(34,13))),new We(23,Int32Array.from([6,30,54,78,102]),new he(30,new H(4,121),new H(5,122)),new he(28,new H(4,47),new H(14,48)),new he(30,new H(11,24),new H(14,25)),new he(30,new H(16,15),new H(14,16))),new We(24,Int32Array.from([6,28,54,80,106]),new he(30,new H(6,117),new H(4,118)),new he(28,new H(6,45),new H(14,46)),new he(30,new H(11,24),new H(16,25)),new he(30,new H(30,16),new H(2,17))),new We(25,Int32Array.from([6,32,58,84,110]),new he(26,new H(8,106),new H(4,107)),new he(28,new H(8,47),new H(13,48)),new he(30,new H(7,24),new H(22,25)),new he(30,new H(22,15),new H(13,16))),new We(26,Int32Array.from([6,30,58,86,114]),new he(28,new H(10,114),new H(2,115)),new he(28,new H(19,46),new H(4,47)),new he(28,new H(28,22),new H(6,23)),new he(30,new H(33,16),new H(4,17))),new We(27,Int32Array.from([6,34,62,90,118]),new he(30,new H(8,122),new H(4,123)),new he(28,new H(22,45),new H(3,46)),new he(30,new H(8,23),new H(26,24)),new he(30,new H(12,15),new H(28,16))),new We(28,Int32Array.from([6,26,50,74,98,122]),new he(30,new H(3,117),new H(10,118)),new he(28,new H(3,45),new H(23,46)),new he(30,new H(4,24),new H(31,25)),new he(30,new H(11,15),new H(31,16))),new We(29,Int32Array.from([6,30,54,78,102,126]),new he(30,new H(7,116),new H(7,117)),new he(28,new H(21,45),new H(7,46)),new he(30,new H(1,23),new H(37,24)),new he(30,new H(19,15),new H(26,16))),new We(30,Int32Array.from([6,26,52,78,104,130]),new he(30,new H(5,115),new H(10,116)),new he(28,new H(19,47),new H(10,48)),new he(30,new H(15,24),new H(25,25)),new he(30,new H(23,15),new H(25,16))),new We(31,Int32Array.from([6,30,56,82,108,134]),new he(30,new H(13,115),new H(3,116)),new he(28,new H(2,46),new H(29,47)),new he(30,new H(42,24),new H(1,25)),new he(30,new H(23,15),new H(28,16))),new We(32,Int32Array.from([6,34,60,86,112,138]),new he(30,new H(17,115)),new he(28,new H(10,46),new H(23,47)),new he(30,new H(10,24),new H(35,25)),new he(30,new H(19,15),new H(35,16))),new We(33,Int32Array.from([6,30,58,86,114,142]),new he(30,new H(17,115),new H(1,116)),new he(28,new H(14,46),new H(21,47)),new he(30,new H(29,24),new H(19,25)),new he(30,new H(11,15),new H(46,16))),new We(34,Int32Array.from([6,34,62,90,118,146]),new he(30,new H(13,115),new H(6,116)),new he(28,new H(14,46),new H(23,47)),new he(30,new H(44,24),new H(7,25)),new he(30,new H(59,16),new H(1,17))),new We(35,Int32Array.from([6,30,54,78,102,126,150]),new he(30,new H(12,121),new H(7,122)),new he(28,new H(12,47),new H(26,48)),new he(30,new H(39,24),new H(14,25)),new he(30,new H(22,15),new H(41,16))),new We(36,Int32Array.from([6,24,50,76,102,128,154]),new he(30,new H(6,121),new H(14,122)),new he(28,new H(6,47),new H(34,48)),new he(30,new H(46,24),new H(10,25)),new he(30,new H(2,15),new H(64,16))),new We(37,Int32Array.from([6,28,54,80,106,132,158]),new he(30,new H(17,122),new H(4,123)),new he(28,new H(29,46),new H(14,47)),new he(30,new H(49,24),new H(10,25)),new he(30,new H(24,15),new H(46,16))),new We(38,Int32Array.from([6,32,58,84,110,136,162]),new he(30,new H(4,122),new H(18,123)),new he(28,new H(13,46),new H(32,47)),new he(30,new H(48,24),new H(14,25)),new he(30,new H(42,15),new H(32,16))),new We(39,Int32Array.from([6,26,54,82,110,138,166]),new he(30,new H(20,117),new H(4,118)),new he(28,new H(40,47),new H(7,48)),new he(30,new H(43,24),new H(22,25)),new he(30,new H(10,15),new H(67,16))),new We(40,Int32Array.from([6,30,58,86,114,142,170]),new he(30,new H(19,118),new H(6,119)),new he(28,new H(18,47),new H(31,48)),new he(30,new H(34,24),new H(34,25)),new he(30,new H(20,15),new H(61,16)))];var qn;(function(P){P[P.DATA_MASK_000=0]="DATA_MASK_000",P[P.DATA_MASK_001=1]="DATA_MASK_001",P[P.DATA_MASK_010=2]="DATA_MASK_010",P[P.DATA_MASK_011=3]="DATA_MASK_011",P[P.DATA_MASK_100=4]="DATA_MASK_100",P[P.DATA_MASK_101=5]="DATA_MASK_101",P[P.DATA_MASK_110=6]="DATA_MASK_110",P[P.DATA_MASK_111=7]="DATA_MASK_111"})(qn||(qn={}));class ar{constructor(i,o){this.value=i,this.isMasked=o}unmaskBitMatrix(i,o){for(let l=0;l<o;l++)for(let f=0;f<o;f++)this.isMasked(l,f)&&i.flip(f,l)}}ar.values=new Map([[qn.DATA_MASK_000,new ar(qn.DATA_MASK_000,(P,i)=>(P+i&1)===0)],[qn.DATA_MASK_001,new ar(qn.DATA_MASK_001,(P,i)=>(P&1)===0)],[qn.DATA_MASK_010,new ar(qn.DATA_MASK_010,(P,i)=>i%3===0)],[qn.DATA_MASK_011,new ar(qn.DATA_MASK_011,(P,i)=>(P+i)%3===0)],[qn.DATA_MASK_100,new ar(qn.DATA_MASK_100,(P,i)=>(Math.floor(P/2)+Math.floor(i/3)&1)===0)],[qn.DATA_MASK_101,new ar(qn.DATA_MASK_101,(P,i)=>P*i%6===0)],[qn.DATA_MASK_110,new ar(qn.DATA_MASK_110,(P,i)=>P*i%6<3)],[qn.DATA_MASK_111,new ar(qn.DATA_MASK_111,(P,i)=>(P+i+P*i%3&1)===0)]]);class ti{constructor(i){const o=i.getHeight();if(o<21||(o&3)!==1)throw new j;this.bitMatrix=i}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let i=0;for(let d=0;d<6;d++)i=this.copyBit(d,8,i);i=this.copyBit(7,8,i),i=this.copyBit(8,8,i),i=this.copyBit(8,7,i);for(let d=5;d>=0;d--)i=this.copyBit(8,d,i);const o=this.bitMatrix.getHeight();let l=0;const f=o-7;for(let d=o-1;d>=f;d--)l=this.copyBit(8,d,l);for(let d=o-8;d<o;d++)l=this.copyBit(d,8,l);if(this.parsedFormatInfo=nn.decodeFormatInformation(i,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new j}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const i=this.bitMatrix.getHeight(),o=Math.floor((i-17)/4);if(o<=6)return We.getVersionForNumber(o);let l=0;const f=i-11;for(let m=5;m>=0;m--)for(let y=i-9;y>=f;y--)l=this.copyBit(y,m,l);let d=We.decodeVersionInformation(l);if(d!==null&&d.getDimensionForVersion()===i)return this.parsedVersion=d,d;l=0;for(let m=5;m>=0;m--)for(let y=i-9;y>=f;y--)l=this.copyBit(m,y,l);if(d=We.decodeVersionInformation(l),d!==null&&d.getDimensionForVersion()===i)return this.parsedVersion=d,d;throw new j}copyBit(i,o,l){return(this.isMirror?this.bitMatrix.get(o,i):this.bitMatrix.get(i,o))?l<<1|1:l<<1}readCodewords(){const i=this.readFormatInformation(),o=this.readVersion(),l=ar.values.get(i.getDataMask()),f=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,f);const d=o.buildFunctionPattern();let m=!0;const y=new Uint8Array(o.getTotalCodewords());let A=0,S=0,R=0;for(let L=f-1;L>0;L-=2){L===6&&L--;for(let k=0;k<f;k++){const G=m?f-1-k:k;for(let te=0;te<2;te++)d.get(L-te,G)||(R++,S<<=1,this.bitMatrix.get(L-te,G)&&(S|=1),R===8&&(y[A++]=S,R=0,S=0))}m=!m}if(A!==o.getTotalCodewords())throw new j;return y}remask(){if(this.parsedFormatInfo===null)return;const i=ar.values[this.parsedFormatInfo.getDataMask()],o=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,o)}setMirror(i){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=i}mirror(){const i=this.bitMatrix;for(let o=0,l=i.getWidth();o<l;o++)for(let f=o+1,d=i.getHeight();f<d;f++)i.get(o,f)!==i.get(f,o)&&(i.flip(f,o),i.flip(o,f))}}class Ka{constructor(i,o){this.numDataCodewords=i,this.codewords=o}static getDataBlocks(i,o,l){if(i.length!==o.getTotalCodewords())throw new I;const f=o.getECBlocksForLevel(l);let d=0;const m=f.getECBlocks();for(const te of m)d+=te.getCount();const y=new Array(d);let A=0;for(const te of m)for(let re=0;re<te.getCount();re++){const ue=te.getDataCodewords(),ye=f.getECCodewordsPerBlock()+ue;y[A++]=new Ka(ue,new Uint8Array(ye))}const S=y[0].codewords.length;let R=y.length-1;for(;R>=0&&y[R].codewords.length!==S;)R--;R++;const L=S-f.getECCodewordsPerBlock();let k=0;for(let te=0;te<L;te++)for(let re=0;re<A;re++)y[re].codewords[te]=i[k++];for(let te=R;te<A;te++)y[te].codewords[L]=i[k++];const G=y[0].codewords.length;for(let te=L;te<G;te++)for(let re=0;re<A;re++){const ue=re<R?te:te+1;y[re].codewords[ue]=i[k++]}return y}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Dr;(function(P){P[P.TERMINATOR=0]="TERMINATOR",P[P.NUMERIC=1]="NUMERIC",P[P.ALPHANUMERIC=2]="ALPHANUMERIC",P[P.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",P[P.BYTE=4]="BYTE",P[P.ECI=5]="ECI",P[P.KANJI=6]="KANJI",P[P.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",P[P.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",P[P.HANZI=9]="HANZI"})(Dr||(Dr={}));class $e{constructor(i,o,l,f){this.value=i,this.stringValue=o,this.characterCountBitsForVersions=l,this.bits=f,$e.FOR_BITS.set(f,this),$e.FOR_VALUE.set(i,this)}static forBits(i){const o=$e.FOR_BITS.get(i);if(o===void 0)throw new I;return o}getCharacterCountBits(i){const o=i.getVersionNumber();let l;return o<=9?l=0:o<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(i){if(!(i instanceof $e))return!1;const o=i;return this.value===o.value}toString(){return this.stringValue}}$e.FOR_BITS=new Map,$e.FOR_VALUE=new Map,$e.TERMINATOR=new $e(Dr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),$e.NUMERIC=new $e(Dr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),$e.ALPHANUMERIC=new $e(Dr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),$e.STRUCTURED_APPEND=new $e(Dr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),$e.BYTE=new $e(Dr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),$e.ECI=new $e(Dr.ECI,"ECI",Int32Array.from([0,0,0]),7),$e.KANJI=new $e(Dr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),$e.FNC1_FIRST_POSITION=new $e(Dr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),$e.FNC1_SECOND_POSITION=new $e(Dr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),$e.HANZI=new $e(Dr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class un{static decode(i,o,l,f){const d=new Ge(i);let m=new W;const y=new Array;let A=-1,S=-1;try{let R=null,L=!1,k;do{if(d.available()<4)k=$e.TERMINATOR;else{const G=d.readBits(4);k=$e.forBits(G)}switch(k){case $e.TERMINATOR:break;case $e.FNC1_FIRST_POSITION:case $e.FNC1_SECOND_POSITION:L=!0;break;case $e.STRUCTURED_APPEND:if(d.available()<16)throw new j;A=d.readBits(8),S=d.readBits(8);break;case $e.ECI:const G=un.parseECIValue(d);if(R=V.getCharacterSetECIByValue(G),R===null)throw new j;break;case $e.HANZI:const te=d.readBits(4),re=d.readBits(k.getCharacterCountBits(o));te===un.GB2312_SUBSET&&un.decodeHanziSegment(d,m,re);break;default:const ue=d.readBits(k.getCharacterCountBits(o));switch(k){case $e.NUMERIC:un.decodeNumericSegment(d,m,ue);break;case $e.ALPHANUMERIC:un.decodeAlphanumericSegment(d,m,ue,L);break;case $e.BYTE:un.decodeByteSegment(d,m,ue,R,y,f);break;case $e.KANJI:un.decodeKanjiSegment(d,m,ue);break;default:throw new j}break}}while(k!==$e.TERMINATOR)}catch{throw new j}return new Jt(i,m.toString(),y.length===0?null:y,l===null?null:l.toString(),A,S)}static decodeHanziSegment(i,o,l){if(l*13>i.available())throw new j;const f=new Uint8Array(2*l);let d=0;for(;l>0;){const m=i.readBits(13);let y=m/96<<8&4294967295|m%96;y<959?y+=41377:y+=42657,f[d]=y>>8&255,f[d+1]=y&255,d+=2,l--}try{o.append(Q.decode(f,Z.GB2312))}catch(m){throw new j(m)}}static decodeKanjiSegment(i,o,l){if(l*13>i.available())throw new j;const f=new Uint8Array(2*l);let d=0;for(;l>0;){const m=i.readBits(13);let y=m/192<<8&4294967295|m%192;y<7936?y+=33088:y+=49472,f[d]=y>>8,f[d+1]=y,d+=2,l--}try{o.append(Q.decode(f,Z.SHIFT_JIS))}catch(m){throw new j(m)}}static decodeByteSegment(i,o,l,f,d,m){if(8*l>i.available())throw new j;const y=new Uint8Array(l);for(let S=0;S<l;S++)y[S]=i.readBits(8);let A;f===null?A=Z.guessEncoding(y,m):A=f.getName();try{o.append(Q.decode(y,A))}catch(S){throw new j(S)}d.push(y)}static toAlphaNumericChar(i){if(i>=un.ALPHANUMERIC_CHARS.length)throw new j;return un.ALPHANUMERIC_CHARS[i]}static decodeAlphanumericSegment(i,o,l,f){const d=o.length();for(;l>1;){if(i.available()<11)throw new j;const m=i.readBits(11);o.append(un.toAlphaNumericChar(Math.floor(m/45))),o.append(un.toAlphaNumericChar(m%45)),l-=2}if(l===1){if(i.available()<6)throw new j;o.append(un.toAlphaNumericChar(i.readBits(6)))}if(f)for(let m=d;m<o.length();m++)o.charAt(m)==="%"&&(m<o.length()-1&&o.charAt(m+1)==="%"?o.deleteCharAt(m+1):o.setCharAt(m,""))}static decodeNumericSegment(i,o,l){for(;l>=3;){if(i.available()<10)throw new j;const f=i.readBits(10);if(f>=1e3)throw new j;o.append(un.toAlphaNumericChar(Math.floor(f/100))),o.append(un.toAlphaNumericChar(Math.floor(f/10)%10)),o.append(un.toAlphaNumericChar(f%10)),l-=3}if(l===2){if(i.available()<7)throw new j;const f=i.readBits(7);if(f>=100)throw new j;o.append(un.toAlphaNumericChar(Math.floor(f/10))),o.append(un.toAlphaNumericChar(f%10))}else if(l===1){if(i.available()<4)throw new j;const f=i.readBits(4);if(f>=10)throw new j;o.append(un.toAlphaNumericChar(f))}}static parseECIValue(i){const o=i.readBits(8);if((o&128)===0)return o&127;if((o&192)===128){const l=i.readBits(8);return(o&63)<<8&4294967295|l}if((o&224)===192){const l=i.readBits(16);return(o&31)<<16&4294967295|l}throw new j}}un.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",un.GB2312_SUBSET=1;class Zo{constructor(i){this.mirrored=i}isMirrored(){return this.mirrored}applyMirroredCorrection(i){if(!this.mirrored||i===null||i.length<3)return;const o=i[0];i[0]=i[2],i[2]=o}}class Bs{constructor(){this.rsDecoder=new Kr(ht.QR_CODE_FIELD_256)}decodeBooleanArray(i,o){return this.decodeBitMatrix(Je.parseFromBooleanArray(i),o)}decodeBitMatrix(i,o){const l=new ti(i);let f=null;try{return this.decodeBitMatrixParser(l,o)}catch(d){f=d}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const d=this.decodeBitMatrixParser(l,o);return d.setOther(new Zo(!0)),d}catch(d){throw f!==null?f:d}}decodeBitMatrixParser(i,o){const l=i.readVersion(),f=i.readFormatInformation().getErrorCorrectionLevel(),d=i.readCodewords(),m=Ka.getDataBlocks(d,l,f);let y=0;for(const R of m)y+=R.getNumDataCodewords();const A=new Uint8Array(y);let S=0;for(const R of m){const L=R.getCodewords(),k=R.getNumDataCodewords();this.correctErrors(L,k);for(let G=0;G<k;G++)A[S++]=L[G]}return un.decode(A,l,f,o)}correctErrors(i,o){const l=new Int32Array(i);try{this.rsDecoder.decode(l,i.length-o)}catch{throw new B}for(let f=0;f<o;f++)i[f]=l[f]}}class Us extends Fe{constructor(i,o,l){super(i,o),this.estimatedModuleSize=l}aboutEquals(i,o,l){if(Math.abs(o-this.getY())<=i&&Math.abs(l-this.getX())<=i){const f=Math.abs(i-this.estimatedModuleSize);return f<=1||f<=this.estimatedModuleSize}return!1}combineEstimate(i,o,l){const f=(this.getX()+o)/2,d=(this.getY()+i)/2,m=(this.estimatedModuleSize+l)/2;return new Us(f,d,m)}}class ni{constructor(i,o,l,f,d,m,y){this.image=i,this.startX=o,this.startY=l,this.width=f,this.height=d,this.moduleSize=m,this.resultPointCallback=y,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const i=this.startX,o=this.height,l=this.width,f=i+l,d=this.startY+o/2,m=new Int32Array(3),y=this.image;for(let A=0;A<o;A++){const S=d+((A&1)===0?Math.floor((A+1)/2):-Math.floor((A+1)/2));m[0]=0,m[1]=0,m[2]=0;let R=i;for(;R<f&&!y.get(R,S);)R++;let L=0;for(;R<f;){if(y.get(R,S))if(L===1)m[1]++;else if(L===2){if(this.foundPatternCross(m)){const k=this.handlePossibleCenter(m,S,R);if(k!==null)return k}m[0]=m[2],m[1]=1,m[2]=0,L=1}else m[++L]++;else L===1&&L++,m[L]++;R++}if(this.foundPatternCross(m)){const k=this.handlePossibleCenter(m,S,f);if(k!==null)return k}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new fe}static centerFromEnd(i,o){return o-i[2]-i[1]/2}foundPatternCross(i){const o=this.moduleSize,l=o/2;for(let f=0;f<3;f++)if(Math.abs(o-i[f])>=l)return!1;return!0}crossCheckVertical(i,o,l,f){const d=this.image,m=d.getHeight(),y=this.crossCheckStateCount;y[0]=0,y[1]=0,y[2]=0;let A=i;for(;A>=0&&d.get(o,A)&&y[1]<=l;)y[1]++,A--;if(A<0||y[1]>l)return NaN;for(;A>=0&&!d.get(o,A)&&y[0]<=l;)y[0]++,A--;if(y[0]>l)return NaN;for(A=i+1;A<m&&d.get(o,A)&&y[1]<=l;)y[1]++,A++;if(A===m||y[1]>l)return NaN;for(;A<m&&!d.get(o,A)&&y[2]<=l;)y[2]++,A++;if(y[2]>l)return NaN;const S=y[0]+y[1]+y[2];return 5*Math.abs(S-f)>=2*f?NaN:this.foundPatternCross(y)?ni.centerFromEnd(y,A):NaN}handlePossibleCenter(i,o,l){const f=i[0]+i[1]+i[2],d=ni.centerFromEnd(i,l),m=this.crossCheckVertical(o,d,2*i[1],f);if(!isNaN(m)){const y=(i[0]+i[1]+i[2])/3;for(const S of this.possibleCenters)if(S.aboutEquals(y,m,d))return S.combineEstimate(m,d,y);const A=new Us(d,m,y);this.possibleCenters.push(A),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(A)}return null}}class oa extends Fe{constructor(i,o,l,f){super(i,o),this.estimatedModuleSize=l,this.count=f,f===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(i,o,l){if(Math.abs(o-this.getY())<=i&&Math.abs(l-this.getX())<=i){const f=Math.abs(i-this.estimatedModuleSize);return f<=1||f<=this.estimatedModuleSize}return!1}combineEstimate(i,o,l){const f=this.count+1,d=(this.count*this.getX()+o)/f,m=(this.count*this.getY()+i)/f,y=(this.count*this.estimatedModuleSize+l)/f;return new oa(d,m,y,f)}}class Ti{constructor(i){this.bottomLeft=i[0],this.topLeft=i[1],this.topRight=i[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Sn{constructor(i,o){this.image=i,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=o}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(i){const o=i!=null&&i.get(De.TRY_HARDER)!==void 0,l=i!=null&&i.get(De.PURE_BARCODE)!==void 0,f=this.image,d=f.getHeight(),m=f.getWidth();let y=Math.floor(3*d/(4*Sn.MAX_MODULES));(y<Sn.MIN_SKIP||o)&&(y=Sn.MIN_SKIP);let A=!1;const S=new Int32Array(5);for(let L=y-1;L<d&&!A;L+=y){S[0]=0,S[1]=0,S[2]=0,S[3]=0,S[4]=0;let k=0;for(let G=0;G<m;G++)if(f.get(G,L))(k&1)===1&&k++,S[k]++;else if((k&1)===0)if(k===4)if(Sn.foundPatternCross(S)){if(this.handlePossibleCenter(S,L,G,l)===!0)if(y=2,this.hasSkipped===!0)A=this.haveMultiplyConfirmedCenters();else{const re=this.findRowSkip();re>S[2]&&(L+=re-S[2]-y,G=m-1)}else{S[0]=S[2],S[1]=S[3],S[2]=S[4],S[3]=1,S[4]=0,k=3;continue}k=0,S[0]=0,S[1]=0,S[2]=0,S[3]=0,S[4]=0}else S[0]=S[2],S[1]=S[3],S[2]=S[4],S[3]=1,S[4]=0,k=3;else S[++k]++;else S[k]++;Sn.foundPatternCross(S)&&this.handlePossibleCenter(S,L,m,l)===!0&&(y=S[0],this.hasSkipped&&(A=this.haveMultiplyConfirmedCenters()))}const R=this.selectBestPatterns();return Fe.orderBestPatterns(R),new Ti(R)}static centerFromEnd(i,o){return o-i[4]-i[3]-i[2]/2}static foundPatternCross(i){let o=0;for(let d=0;d<5;d++){const m=i[d];if(m===0)return!1;o+=m}if(o<7)return!1;const l=o/7,f=l/2;return Math.abs(l-i[0])<f&&Math.abs(l-i[1])<f&&Math.abs(3*l-i[2])<3*f&&Math.abs(l-i[3])<f&&Math.abs(l-i[4])<f}getCrossCheckStateCount(){const i=this.crossCheckStateCount;return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i}crossCheckDiagonal(i,o,l,f){const d=this.getCrossCheckStateCount();let m=0;const y=this.image;for(;i>=m&&o>=m&&y.get(o-m,i-m);)d[2]++,m++;if(i<m||o<m)return!1;for(;i>=m&&o>=m&&!y.get(o-m,i-m)&&d[1]<=l;)d[1]++,m++;if(i<m||o<m||d[1]>l)return!1;for(;i>=m&&o>=m&&y.get(o-m,i-m)&&d[0]<=l;)d[0]++,m++;if(d[0]>l)return!1;const A=y.getHeight(),S=y.getWidth();for(m=1;i+m<A&&o+m<S&&y.get(o+m,i+m);)d[2]++,m++;if(i+m>=A||o+m>=S)return!1;for(;i+m<A&&o+m<S&&!y.get(o+m,i+m)&&d[3]<l;)d[3]++,m++;if(i+m>=A||o+m>=S||d[3]>=l)return!1;for(;i+m<A&&o+m<S&&y.get(o+m,i+m)&&d[4]<l;)d[4]++,m++;if(d[4]>=l)return!1;const R=d[0]+d[1]+d[2]+d[3]+d[4];return Math.abs(R-f)<2*f&&Sn.foundPatternCross(d)}crossCheckVertical(i,o,l,f){const d=this.image,m=d.getHeight(),y=this.getCrossCheckStateCount();let A=i;for(;A>=0&&d.get(o,A);)y[2]++,A--;if(A<0)return NaN;for(;A>=0&&!d.get(o,A)&&y[1]<=l;)y[1]++,A--;if(A<0||y[1]>l)return NaN;for(;A>=0&&d.get(o,A)&&y[0]<=l;)y[0]++,A--;if(y[0]>l)return NaN;for(A=i+1;A<m&&d.get(o,A);)y[2]++,A++;if(A===m)return NaN;for(;A<m&&!d.get(o,A)&&y[3]<l;)y[3]++,A++;if(A===m||y[3]>=l)return NaN;for(;A<m&&d.get(o,A)&&y[4]<l;)y[4]++,A++;if(y[4]>=l)return NaN;const S=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(S-f)>=2*f?NaN:Sn.foundPatternCross(y)?Sn.centerFromEnd(y,A):NaN}crossCheckHorizontal(i,o,l,f){const d=this.image,m=d.getWidth(),y=this.getCrossCheckStateCount();let A=i;for(;A>=0&&d.get(A,o);)y[2]++,A--;if(A<0)return NaN;for(;A>=0&&!d.get(A,o)&&y[1]<=l;)y[1]++,A--;if(A<0||y[1]>l)return NaN;for(;A>=0&&d.get(A,o)&&y[0]<=l;)y[0]++,A--;if(y[0]>l)return NaN;for(A=i+1;A<m&&d.get(A,o);)y[2]++,A++;if(A===m)return NaN;for(;A<m&&!d.get(A,o)&&y[3]<l;)y[3]++,A++;if(A===m||y[3]>=l)return NaN;for(;A<m&&d.get(A,o)&&y[4]<l;)y[4]++,A++;if(y[4]>=l)return NaN;const S=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(S-f)>=f?NaN:Sn.foundPatternCross(y)?Sn.centerFromEnd(y,A):NaN}handlePossibleCenter(i,o,l,f){const d=i[0]+i[1]+i[2]+i[3]+i[4];let m=Sn.centerFromEnd(i,l),y=this.crossCheckVertical(o,Math.floor(m),i[2],d);if(!isNaN(y)&&(m=this.crossCheckHorizontal(Math.floor(m),Math.floor(y),i[2],d),!isNaN(m)&&(!f||this.crossCheckDiagonal(Math.floor(y),Math.floor(m),i[2],d)))){const A=d/7;let S=!1;const R=this.possibleCenters;for(let L=0,k=R.length;L<k;L++){const G=R[L];if(G.aboutEquals(A,y,m)){R[L]=G.combineEstimate(y,m,A),S=!0;break}}if(!S){const L=new oa(m,y,A);R.push(L),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(L)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let o=null;for(const l of this.possibleCenters)if(l.getCount()>=Sn.CENTER_QUORUM)if(o==null)o=l;else return this.hasSkipped=!0,Math.floor((Math.abs(o.getX()-l.getX())-Math.abs(o.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let i=0,o=0;const l=this.possibleCenters.length;for(const m of this.possibleCenters)m.getCount()>=Sn.CENTER_QUORUM&&(i++,o+=m.getEstimatedModuleSize());if(i<3)return!1;const f=o/l;let d=0;for(const m of this.possibleCenters)d+=Math.abs(m.getEstimatedModuleSize()-f);return d<=.05*o}selectBestPatterns(){const i=this.possibleCenters.length;if(i<3)throw new fe;const o=this.possibleCenters;let l;if(i>3){let f=0,d=0;for(const A of this.possibleCenters){const S=A.getEstimatedModuleSize();f+=S,d+=S*S}l=f/i;let m=Math.sqrt(d/i-l*l);o.sort((A,S)=>{const R=Math.abs(S.getEstimatedModuleSize()-l),L=Math.abs(A.getEstimatedModuleSize()-l);return R<L?-1:R>L?1:0});const y=Math.max(.2*l,m);for(let A=0;A<o.length&&o.length>3;A++){const S=o[A];Math.abs(S.getEstimatedModuleSize()-l)>y&&(o.splice(A,1),A--)}}if(o.length>3){let f=0;for(const d of o)f+=d.getEstimatedModuleSize();l=f/o.length,o.sort((d,m)=>{if(m.getCount()===d.getCount()){const y=Math.abs(m.getEstimatedModuleSize()-l),A=Math.abs(d.getEstimatedModuleSize()-l);return y<A?1:y>A?-1:0}else return m.getCount()-d.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]}}Sn.CENTER_QUORUM=2,Sn.MIN_SKIP=3,Sn.MAX_MODULES=57;class ri{constructor(i){this.image=i}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(i){this.resultPointCallback=i==null?null:i.get(De.NEED_RESULT_POINT_CALLBACK);const l=new Sn(this.image,this.resultPointCallback).find(i);return this.processFinderPatternInfo(l)}processFinderPatternInfo(i){const o=i.getTopLeft(),l=i.getTopRight(),f=i.getBottomLeft(),d=this.calculateModuleSize(o,l,f);if(d<1)throw new fe("No pattern found in proccess finder.");const m=ri.computeDimension(o,l,f,d),y=We.getProvisionalVersionForDimension(m),A=y.getDimensionForVersion()-7;let S=null;if(y.getAlignmentPatternCenters().length>0){const G=l.getX()-o.getX()+f.getX(),te=l.getY()-o.getY()+f.getY(),re=1-3/A,ue=Math.floor(o.getX()+re*(G-o.getX())),ye=Math.floor(o.getY()+re*(te-o.getY()));for(let ke=4;ke<=16;ke<<=1)try{S=this.findAlignmentInRegion(d,ue,ye,ke);break}catch(Pe){if(!(Pe instanceof fe))throw Pe}}const R=ri.createTransform(o,l,f,S,m),L=ri.sampleGrid(this.image,R,m);let k;return S===null?k=[f,o,l]:k=[f,o,l,S],new Ts(L,k)}static createTransform(i,o,l,f,d){const m=d-3.5;let y,A,S,R;return f!==null?(y=f.getX(),A=f.getY(),S=m-3,R=S):(y=o.getX()-i.getX()+l.getX(),A=o.getY()-i.getY()+l.getY(),S=m,R=m),ur.quadrilateralToQuadrilateral(3.5,3.5,m,3.5,S,R,3.5,m,i.getX(),i.getY(),o.getX(),o.getY(),y,A,l.getX(),l.getY())}static sampleGrid(i,o,l){return hr.getInstance().sampleGridWithTransform(i,l,l,o)}static computeDimension(i,o,l,f){const d=et.round(Fe.distance(i,o)/f),m=et.round(Fe.distance(i,l)/f);let y=Math.floor((d+m)/2)+7;switch(y&3){case 0:y++;break;case 2:y--;break;case 3:throw new fe("Dimensions could be not found.")}return y}calculateModuleSize(i,o,l){return(this.calculateModuleSizeOneWay(i,o)+this.calculateModuleSizeOneWay(i,l))/2}calculateModuleSizeOneWay(i,o){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(o.getX()),Math.floor(o.getY())),f=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(i.getX()),Math.floor(i.getY()));return isNaN(l)?f/7:isNaN(f)?l/7:(l+f)/14}sizeOfBlackWhiteBlackRunBothWays(i,o,l,f){let d=this.sizeOfBlackWhiteBlackRun(i,o,l,f),m=1,y=i-(l-i);y<0?(m=i/(i-y),y=0):y>=this.image.getWidth()&&(m=(this.image.getWidth()-1-i)/(y-i),y=this.image.getWidth()-1);let A=Math.floor(o-(f-o)*m);return m=1,A<0?(m=o/(o-A),A=0):A>=this.image.getHeight()&&(m=(this.image.getHeight()-1-o)/(A-o),A=this.image.getHeight()-1),y=Math.floor(i+(y-i)*m),d+=this.sizeOfBlackWhiteBlackRun(i,o,y,A),d-1}sizeOfBlackWhiteBlackRun(i,o,l,f){const d=Math.abs(f-o)>Math.abs(l-i);if(d){let G=i;i=o,o=G,G=l,l=f,f=G}const m=Math.abs(l-i),y=Math.abs(f-o);let A=-m/2;const S=i<l?1:-1,R=o<f?1:-1;let L=0;const k=l+S;for(let G=i,te=o;G!==k;G+=S){const re=d?te:G,ue=d?G:te;if(L===1===this.image.get(re,ue)){if(L===2)return et.distance(G,te,i,o);L++}if(A+=y,A>0){if(te===f)break;te+=R,A-=m}}return L===2?et.distance(l+S,f,i,o):NaN}findAlignmentInRegion(i,o,l,f){const d=Math.floor(f*i),m=Math.max(0,o-d),y=Math.min(this.image.getWidth()-1,o+d);if(y-m<i*3)throw new fe("Alignment top exceeds estimated module size.");const A=Math.max(0,l-d),S=Math.min(this.image.getHeight()-1,l+d);if(S-A<i*3)throw new fe("Alignment bottom exceeds estimated module size.");return new ni(this.image,m,A,y-m,S-A,i,this.resultPointCallback).find()}}class ii{constructor(){this.decoder=new Bs}getDecoder(){return this.decoder}decode(i,o){let l,f;if(o!=null&&o.get(De.PURE_BARCODE)!==void 0){const A=ii.extractPureBits(i.getBlackMatrix());l=this.decoder.decodeBitMatrix(A,o),f=ii.NO_POINTS}else{const A=new ri(i.getBlackMatrix()).detect(o);l=this.decoder.decodeBitMatrix(A.getBits(),o),f=A.getPoints()}l.getOther()instanceof Zo&&l.getOther().applyMirroredCorrection(f);const d=new Ve(l.getText(),l.getRawBytes(),void 0,f,Le.QR_CODE,void 0),m=l.getByteSegments();m!==null&&d.putMetadata(Ct.BYTE_SEGMENTS,m);const y=l.getECLevel();return y!==null&&d.putMetadata(Ct.ERROR_CORRECTION_LEVEL,y),l.hasStructuredAppend()&&(d.putMetadata(Ct.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),d.putMetadata(Ct.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),d}reset(){}static extractPureBits(i){const o=i.getTopLeftOnBit(),l=i.getBottomRightOnBit();if(o===null||l===null)throw new fe;const f=this.moduleSize(o,i);let d=o[1],m=l[1],y=o[0],A=l[0];if(y>=A||d>=m)throw new fe;if(m-d!==A-y&&(A=y+(m-d),A>=i.getWidth()))throw new fe;const S=Math.round((A-y+1)/f),R=Math.round((m-d+1)/f);if(S<=0||R<=0)throw new fe;if(R!==S)throw new fe;const L=Math.floor(f/2);d+=L,y+=L;const k=y+Math.floor((S-1)*f)-A;if(k>0){if(k>L)throw new fe;y-=k}const G=d+Math.floor((R-1)*f)-m;if(G>0){if(G>L)throw new fe;d-=G}const te=new Je(S,R);for(let re=0;re<R;re++){const ue=d+Math.floor(re*f);for(let ye=0;ye<S;ye++)i.get(y+Math.floor(ye*f),ue)&&te.set(ye,re)}return te}static moduleSize(i,o){const l=o.getHeight(),f=o.getWidth();let d=i[0],m=i[1],y=!0,A=0;for(;d<f&&m<l;){if(y!==o.get(d,m)){if(++A===5)break;y=!y}d++,m++}if(d===f||m===l)throw new fe;return(d-i[0])/7}}ii.NO_POINTS=new Array;class nt{PDF417Common(){}static getBitCountSum(i){return et.sum(i)}static toIntArray(i){if(i==null||!i.length)return nt.EMPTY_INT_ARRAY;const o=new Int32Array(i.length);let l=0;for(const f of i)o[l++]=f;return o}static getCodeword(i){const o=ae.binarySearch(nt.SYMBOL_TABLE,i&262143);return o<0?-1:(nt.CODEWORD_TABLE[o]-1)%nt.NUMBER_OF_CODEWORDS}}nt.NUMBER_OF_CODEWORDS=929,nt.MAX_CODEWORDS_IN_BARCODE=nt.NUMBER_OF_CODEWORDS-1,nt.MIN_ROWS_IN_BARCODE=3,nt.MAX_ROWS_IN_BARCODE=90,nt.MODULES_IN_CODEWORD=17,nt.MODULES_IN_STOP_PATTERN=18,nt.BARS_IN_MODULE=8,nt.EMPTY_INT_ARRAY=new Int32Array([]),nt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),nt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Vs{constructor(i,o){this.bits=i,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class lt{static detectMultiple(i,o,l){let f=i.getBlackMatrix(),d=lt.detect(l,f);return d.length||(f=f.clone(),f.rotate180(),d=lt.detect(l,f)),new Vs(f,d)}static detect(i,o){const l=new Array;let f=0,d=0,m=!1;for(;f<o.getHeight();){const y=lt.findVertices(o,f,d);if(y[0]==null&&y[3]==null){if(!m)break;m=!1,d=0;for(const A of l)A[1]!=null&&(f=Math.trunc(Math.max(f,A[1].getY()))),A[3]!=null&&(f=Math.max(f,Math.trunc(A[3].getY())));f+=lt.ROW_STEP;continue}if(m=!0,l.push(y),!i)break;y[2]!=null?(d=Math.trunc(y[2].getX()),f=Math.trunc(y[2].getY())):(d=Math.trunc(y[4].getX()),f=Math.trunc(y[4].getY()))}return l}static findVertices(i,o,l){const f=i.getHeight(),d=i.getWidth(),m=new Array(8);return lt.copyToResult(m,lt.findRowsWithPattern(i,f,d,o,l,lt.START_PATTERN),lt.INDEXES_START_PATTERN),m[4]!=null&&(l=Math.trunc(m[4].getX()),o=Math.trunc(m[4].getY())),lt.copyToResult(m,lt.findRowsWithPattern(i,f,d,o,l,lt.STOP_PATTERN),lt.INDEXES_STOP_PATTERN),m}static copyToResult(i,o,l){for(let f=0;f<l.length;f++)i[l[f]]=o[f]}static findRowsWithPattern(i,o,l,f,d,m){const y=new Array(4);let A=!1;const S=new Int32Array(m.length);for(;f<o;f+=lt.ROW_STEP){let L=lt.findGuardPattern(i,d,f,l,!1,m,S);if(L!=null){for(;f>0;){const k=lt.findGuardPattern(i,d,--f,l,!1,m,S);if(k!=null)L=k;else{f++;break}}y[0]=new Fe(L[0],f),y[1]=new Fe(L[1],f),A=!0;break}}let R=f+1;if(A){let L=0,k=Int32Array.from([Math.trunc(y[0].getX()),Math.trunc(y[1].getX())]);for(;R<o;R++){const G=lt.findGuardPattern(i,k[0],R,l,!1,m,S);if(G!=null&&Math.abs(k[0]-G[0])<lt.MAX_PATTERN_DRIFT&&Math.abs(k[1]-G[1])<lt.MAX_PATTERN_DRIFT)k=G,L=0;else{if(L>lt.SKIPPED_ROW_COUNT_MAX)break;L++}}R-=L+1,y[2]=new Fe(k[0],R),y[3]=new Fe(k[1],R)}return R-f<lt.BARCODE_MIN_HEIGHT&&ae.fill(y,null),y}static findGuardPattern(i,o,l,f,d,m,y){ae.fillWithin(y,0,y.length,0);let A=o,S=0;for(;i.get(A,l)&&A>0&&S++<lt.MAX_PIXEL_DRIFT;)A--;let R=A,L=0,k=m.length;for(let G=d;R<f;R++)if(i.get(R,l)!==G)y[L]++;else{if(L===k-1){if(lt.patternMatchVariance(y,m,lt.MAX_INDIVIDUAL_VARIANCE)<lt.MAX_AVG_VARIANCE)return new Int32Array([A,R]);A+=y[0]+y[1],$.arraycopy(y,2,y,0,L-1),y[L-1]=0,y[L]=0,L--}else L++;y[L]=1,G=!G}return L===k-1&&lt.patternMatchVariance(y,m,lt.MAX_INDIVIDUAL_VARIANCE)<lt.MAX_AVG_VARIANCE?new Int32Array([A,R-1]):null}static patternMatchVariance(i,o,l){let f=i.length,d=0,m=0;for(let S=0;S<f;S++)d+=i[S],m+=o[S];if(d<m)return 1/0;let y=d/m;l*=y;let A=0;for(let S=0;S<f;S++){let R=i[S],L=o[S]*y,k=R>L?R-L:L-R;if(k>l)return 1/0;A+=k}return A/d}}lt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),lt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),lt.MAX_AVG_VARIANCE=.42,lt.MAX_INDIVIDUAL_VARIANCE=.8,lt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),lt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),lt.MAX_PIXEL_DRIFT=3,lt.MAX_PATTERN_DRIFT=5,lt.SKIPPED_ROW_COUNT_MAX=25,lt.ROW_STEP=5,lt.BARCODE_MIN_HEIGHT=10;class hn{constructor(i,o){if(o.length===0)throw new I;this.field=i;let l=o.length;if(l>1&&o[0]===0){let f=1;for(;f<l&&o[f]===0;)f++;f===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-f),$.arraycopy(o,f,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);if(i===1){let f=0;for(let d of this.coefficients)f=this.field.add(f,d);return f}let o=this.coefficients[0],l=this.coefficients.length;for(let f=1;f<l;f++)o=this.field.add(this.field.multiply(i,o),this.coefficients[f]);return o}add(i){if(!this.field.equals(i.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero())return i;if(i.isZero())return this;let o=this.coefficients,l=i.coefficients;if(o.length>l.length){let m=o;o=l,l=m}let f=new Int32Array(l.length),d=l.length-o.length;$.arraycopy(l,0,f,0,d);for(let m=d;m<l.length;m++)f[m]=this.field.add(o[m-d],l[m]);return new hn(this.field,f)}subtract(i){if(!this.field.equals(i.field))throw new I("ModulusPolys do not have same ModulusGF field");return i.isZero()?this:this.add(i.negative())}multiply(i){return i instanceof hn?this.multiplyOther(i):this.multiplyScalar(i)}multiplyOther(i){if(!this.field.equals(i.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero()||i.isZero())return new hn(this.field,new Int32Array([0]));let o=this.coefficients,l=o.length,f=i.coefficients,d=f.length,m=new Int32Array(l+d-1);for(let y=0;y<l;y++){let A=o[y];for(let S=0;S<d;S++)m[y+S]=this.field.add(m[y+S],this.field.multiply(A,f[S]))}return new hn(this.field,m)}negative(){let i=this.coefficients.length,o=new Int32Array(i);for(let l=0;l<i;l++)o[l]=this.field.subtract(0,this.coefficients[l]);return new hn(this.field,o)}multiplyScalar(i){if(i===0)return new hn(this.field,new Int32Array([0]));if(i===1)return this;let o=this.coefficients.length,l=new Int32Array(o);for(let f=0;f<o;f++)l[f]=this.field.multiply(this.coefficients[f],i);return new hn(this.field,l)}multiplyByMonomial(i,o){if(i<0)throw new I;if(o===0)return new hn(this.field,new Int32Array([0]));let l=this.coefficients.length,f=new Int32Array(l+i);for(let d=0;d<l;d++)f[d]=this.field.multiply(this.coefficients[d],o);return new hn(this.field,f)}toString(){let i=new W;for(let o=this.getDegree();o>=0;o--){let l=this.getCoefficient(o);l!==0&&(l<0?(i.append(" - "),l=-l):i.length()>0&&i.append(" + "),(o===0||l!==1)&&i.append(l),o!==0&&(o===1?i.append("x"):(i.append("x^"),i.append(o))))}return i.toString()}}class la{add(i,o){return(i+o)%this.modulus}subtract(i,o){return(this.modulus+i-o)%this.modulus}exp(i){return this.expTable[i]}log(i){if(i===0)throw new I;return this.logTable[i]}inverse(i){if(i===0)throw new ui;return this.expTable[this.modulus-this.logTable[i]-1]}multiply(i,o){return i===0||o===0?0:this.expTable[(this.logTable[i]+this.logTable[o])%(this.modulus-1)]}getSize(){return this.modulus}equals(i){return i===this}}class rn extends la{constructor(i,o){super(),this.modulus=i,this.expTable=new Int32Array(i),this.logTable=new Int32Array(i);let l=1;for(let f=0;f<i;f++)this.expTable[f]=l,l=l*o%i;for(let f=0;f<i-1;f++)this.logTable[this.expTable[f]]=f;this.zero=new hn(this,new Int32Array([0])),this.one=new hn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,o){if(i<0)throw new I;if(o===0)return this.zero;let l=new Int32Array(i+1);return l[0]=o,new hn(this,l)}}rn.PDF417_GF=new rn(nt.NUMBER_OF_CODEWORDS,3);class Bi{constructor(){this.field=rn.PDF417_GF}decode(i,o,l){let f=new hn(this.field,i),d=new Int32Array(o),m=!1;for(let te=o;te>0;te--){let re=f.evaluateAt(this.field.exp(te));d[o-te]=re,re!==0&&(m=!0)}if(!m)return 0;let y=this.field.getOne();if(l!=null)for(const te of l){let re=this.field.exp(i.length-1-te),ue=new hn(this.field,new Int32Array([this.field.subtract(0,re),1]));y=y.multiply(ue)}let A=new hn(this.field,d),S=this.runEuclideanAlgorithm(this.field.buildMonomial(o,1),A,o),R=S[0],L=S[1],k=this.findErrorLocations(R),G=this.findErrorMagnitudes(L,R,k);for(let te=0;te<k.length;te++){let re=i.length-1-this.field.log(k[te]);if(re<0)throw B.getChecksumInstance();i[re]=this.field.subtract(i[re],G[te])}return k.length}runEuclideanAlgorithm(i,o,l){if(i.getDegree()<o.getDegree()){let k=i;i=o,o=k}let f=i,d=o,m=this.field.getZero(),y=this.field.getOne();for(;d.getDegree()>=Math.round(l/2);){let k=f,G=m;if(f=d,m=y,f.isZero())throw B.getChecksumInstance();d=k;let te=this.field.getZero(),re=f.getCoefficient(f.getDegree()),ue=this.field.inverse(re);for(;d.getDegree()>=f.getDegree()&&!d.isZero();){let ye=d.getDegree()-f.getDegree(),ke=this.field.multiply(d.getCoefficient(d.getDegree()),ue);te=te.add(this.field.buildMonomial(ye,ke)),d=d.subtract(f.multiplyByMonomial(ye,ke))}y=te.multiply(m).subtract(G).negative()}let A=y.getCoefficient(0);if(A===0)throw B.getChecksumInstance();let S=this.field.inverse(A),R=y.multiply(S),L=d.multiply(S);return[R,L]}findErrorLocations(i){let o=i.getDegree(),l=new Int32Array(o),f=0;for(let d=1;d<this.field.getSize()&&f<o;d++)i.evaluateAt(d)===0&&(l[f]=this.field.inverse(d),f++);if(f!==o)throw B.getChecksumInstance();return l}findErrorMagnitudes(i,o,l){let f=o.getDegree(),d=new Int32Array(f);for(let S=1;S<=f;S++)d[f-S]=this.field.multiply(S,o.getCoefficient(S));let m=new hn(this.field,d),y=l.length,A=new Int32Array(y);for(let S=0;S<y;S++){let R=this.field.inverse(l[S]),L=this.field.subtract(0,i.evaluateAt(R)),k=this.field.inverse(m.evaluateAt(R));A[S]=this.field.multiply(L,k)}return A}}class Ui{constructor(i,o,l,f,d){i instanceof Ui?this.constructor_2(i):this.constructor_1(i,o,l,f,d)}constructor_1(i,o,l,f,d){const m=o==null||l==null,y=f==null||d==null;if(m&&y)throw new fe;m?(o=new Fe(0,f.getY()),l=new Fe(0,d.getY())):y&&(f=new Fe(i.getWidth()-1,o.getY()),d=new Fe(i.getWidth()-1,l.getY())),this.image=i,this.topLeft=o,this.bottomLeft=l,this.topRight=f,this.bottomRight=d,this.minX=Math.trunc(Math.min(o.getX(),l.getX())),this.maxX=Math.trunc(Math.max(f.getX(),d.getX())),this.minY=Math.trunc(Math.min(o.getY(),f.getY())),this.maxY=Math.trunc(Math.max(l.getY(),d.getY()))}constructor_2(i){this.image=i.image,this.topLeft=i.getTopLeft(),this.bottomLeft=i.getBottomLeft(),this.topRight=i.getTopRight(),this.bottomRight=i.getBottomRight(),this.minX=i.getMinX(),this.maxX=i.getMaxX(),this.minY=i.getMinY(),this.maxY=i.getMaxY()}static merge(i,o){return i==null?o:o==null?i:new Ui(i.image,i.topLeft,i.bottomLeft,o.topRight,o.bottomRight)}addMissingRows(i,o,l){let f=this.topLeft,d=this.bottomLeft,m=this.topRight,y=this.bottomRight;if(i>0){let A=l?this.topLeft:this.topRight,S=Math.trunc(A.getY()-i);S<0&&(S=0);let R=new Fe(A.getX(),S);l?f=R:m=R}if(o>0){let A=l?this.bottomLeft:this.bottomRight,S=Math.trunc(A.getY()+o);S>=this.image.getHeight()&&(S=this.image.getHeight()-1);let R=new Fe(A.getX(),S);l?d=R:y=R}return new Ui(this.image,f,d,m,y)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class ca{constructor(i,o,l,f){this.columnCount=i,this.errorCorrectionLevel=f,this.rowCountUpperPart=o,this.rowCountLowerPart=l,this.rowCount=o+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Ss{constructor(){this.buffer=""}static form(i,o){let l=-1;function f(m,y,A,S,R,L){if(m==="%%")return"%";if(o[++l]===void 0)return;m=S?parseInt(S.substr(1)):void 0;let k=R?parseInt(R.substr(1)):void 0,G;switch(L){case"s":G=o[l];break;case"c":G=o[l][0];break;case"f":G=parseFloat(o[l]).toFixed(m);break;case"p":G=parseFloat(o[l]).toPrecision(m);break;case"e":G=parseFloat(o[l]).toExponential(m);break;case"x":G=parseInt(o[l]).toString(k||16);break;case"d":G=parseFloat(parseInt(o[l],k||10).toPrecision(m)).toFixed(0);break}G=typeof G=="object"?JSON.stringify(G):(+G).toString(k);let te=parseInt(A),re=A&&A[0]+""=="0"?"0":" ";for(;G.length<te;)G=y!==void 0?G+re:re+G;return G}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(d,f)}format(i,...o){this.buffer+=Ss.form(i,o)}toString(){return this.buffer}}class Vi{constructor(i){this.boundingBox=new Ui(i),this.codewords=new Array(i.getMaxY()-i.getMinY()+1)}getCodewordNearby(i){let o=this.getCodeword(i);if(o!=null)return o;for(let l=1;l<Vi.MAX_NEARBY_DISTANCE;l++){let f=this.imageRowToCodewordIndex(i)-l;if(f>=0&&(o=this.codewords[f],o!=null)||(f=this.imageRowToCodewordIndex(i)+l,f<this.codewords.length&&(o=this.codewords[f],o!=null)))return o}return null}imageRowToCodewordIndex(i){return i-this.boundingBox.getMinY()}setCodeword(i,o){this.codewords[this.imageRowToCodewordIndex(i)]=o}getCodeword(i){return this.codewords[this.imageRowToCodewordIndex(i)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const i=new Ss;let o=0;for(const l of this.codewords){if(l==null){i.format("%3d:    |   %n",o++);continue}i.format("%3d: %3d|%3d%n",o++,l.getRowNumber(),l.getValue())}return i.toString()}}Vi.MAX_NEARBY_DISTANCE=5;class di{constructor(){this.values=new Map}setValue(i){i=Math.trunc(i);let o=this.values.get(i);o==null&&(o=0),o++,this.values.set(i,o)}getValue(){let i=-1,o=new Array;for(const[l,f]of this.values.entries()){const d={getKey:()=>l,getValue:()=>f};d.getValue()>i?(i=d.getValue(),o=[],o.push(d.getKey())):d.getValue()===i&&o.push(d.getKey())}return nt.toIntArray(o)}getConfidence(i){return this.values.get(i)}}class vi extends Vi{constructor(i,o){super(i),this._isLeft=o}setRowNumbers(){for(let i of this.getCodewords())i!=null&&i.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(i){let o=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(o,i);let l=this.getBoundingBox(),f=this._isLeft?l.getTopLeft():l.getTopRight(),d=this._isLeft?l.getBottomLeft():l.getBottomRight(),m=this.imageRowToCodewordIndex(Math.trunc(f.getY())),y=this.imageRowToCodewordIndex(Math.trunc(d.getY())),A=-1,S=1,R=0;for(let L=m;L<y;L++){if(o[L]==null)continue;let k=o[L],G=k.getRowNumber()-A;if(G===0)R++;else if(G===1)S=Math.max(S,R),R=1,A=k.getRowNumber();else if(G<0||k.getRowNumber()>=i.getRowCount()||G>L)o[L]=null;else{let te;S>2?te=(S-2)*G:te=G;let re=te>=L;for(let ue=1;ue<=te&&!re;ue++)re=o[L-ue]!=null;re?o[L]=null:(A=k.getRowNumber(),R=1)}}}getRowHeights(){let i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);let o=new Int32Array(i.getRowCount());for(let l of this.getCodewords())if(l!=null){let f=l.getRowNumber();if(f>=o.length)continue;o[f]++}return o}adjustIncompleteIndicatorColumnRowNumbers(i){let o=this.getBoundingBox(),l=this._isLeft?o.getTopLeft():o.getTopRight(),f=this._isLeft?o.getBottomLeft():o.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(l.getY())),m=this.imageRowToCodewordIndex(Math.trunc(f.getY())),y=this.getCodewords(),A=-1;for(let S=d;S<m;S++){if(y[S]==null)continue;let R=y[S];R.setRowNumberAsRowIndicatorColumn();let L=R.getRowNumber()-A;L===0||(L===1?A=R.getRowNumber():R.getRowNumber()>=i.getRowCount()?y[S]=null:A=R.getRowNumber())}}getBarcodeMetadata(){let i=this.getCodewords(),o=new di,l=new di,f=new di,d=new di;for(let y of i){if(y==null)continue;y.setRowNumberAsRowIndicatorColumn();let A=y.getValue()%30,S=y.getRowNumber();switch(this._isLeft||(S+=2),S%3){case 0:l.setValue(A*3+1);break;case 1:d.setValue(A/3),f.setValue(A%3);break;case 2:o.setValue(A+1);break}}if(o.getValue().length===0||l.getValue().length===0||f.getValue().length===0||d.getValue().length===0||o.getValue()[0]<1||l.getValue()[0]+f.getValue()[0]<nt.MIN_ROWS_IN_BARCODE||l.getValue()[0]+f.getValue()[0]>nt.MAX_ROWS_IN_BARCODE)return null;let m=new ca(o.getValue()[0],l.getValue()[0],f.getValue()[0],d.getValue()[0]);return this.removeIncorrectCodewords(i,m),m}removeIncorrectCodewords(i,o){for(let l=0;l<i.length;l++){let f=i[l];if(i[l]==null)continue;let d=f.getValue()%30,m=f.getRowNumber();if(m>o.getRowCount()){i[l]=null;continue}switch(this._isLeft||(m+=2),m%3){case 0:d*3+1!==o.getRowCountUpperPart()&&(i[l]=null);break;case 1:(Math.trunc(d/3)!==o.getErrorCorrectionLevel()||d%3!==o.getRowCountLowerPart())&&(i[l]=null);break;case 2:d+1!==o.getColumnCount()&&(i[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Yn{constructor(i,o){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=i,this.barcodeColumnCount=i.getColumnCount(),this.boundingBox=o,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let i=nt.MAX_CODEWORDS_IN_BARCODE,o;do o=i,i=this.adjustRowNumbersAndGetCount();while(i>0&&i<o);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(i){i!=null&&i.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let i=this.adjustRowNumbersByRow();if(i===0)return 0;for(let o=1;o<this.barcodeColumnCount+1;o++){let l=this.detectionResultColumns[o].getCodewords();for(let f=0;f<l.length;f++)l[f]!=null&&(l[f].hasValidRowNumber()||this.adjustRowNumbers(o,f,l))}return i}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let i=this.detectionResultColumns[0].getCodewords(),o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<i.length;l++)if(i[l]!=null&&o[l]!=null&&i[l].getRowNumber()===o[l].getRowNumber())for(let f=1;f<=this.barcodeColumnCount;f++){let d=this.detectionResultColumns[f].getCodewords()[l];d!=null&&(d.setRowNumber(i[l].getRowNumber()),d.hasValidRowNumber()||(this.detectionResultColumns[f].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let i=0,o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<o.length;l++){if(o[l]==null)continue;let f=o[l].getRowNumber(),d=0;for(let m=this.barcodeColumnCount+1;m>0&&d<this.ADJUST_ROW_NUMBER_SKIP;m--){let y=this.detectionResultColumns[m].getCodewords()[l];y!=null&&(d=Yn.adjustRowNumberIfValid(f,d,y),y.hasValidRowNumber()||i++)}}return i}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let i=0,o=this.detectionResultColumns[0].getCodewords();for(let l=0;l<o.length;l++){if(o[l]==null)continue;let f=o[l].getRowNumber(),d=0;for(let m=1;m<this.barcodeColumnCount+1&&d<this.ADJUST_ROW_NUMBER_SKIP;m++){let y=this.detectionResultColumns[m].getCodewords()[l];y!=null&&(d=Yn.adjustRowNumberIfValid(f,d,y),y.hasValidRowNumber()||i++)}}return i}static adjustRowNumberIfValid(i,o,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(i)?(l.setRowNumber(i),o=0):++o),o}adjustRowNumbers(i,o,l){if(!this.detectionResultColumns[i-1])return;let f=l[o],d=this.detectionResultColumns[i-1].getCodewords(),m=d;this.detectionResultColumns[i+1]!=null&&(m=this.detectionResultColumns[i+1].getCodewords());let y=new Array(14);y[2]=d[o],y[3]=m[o],o>0&&(y[0]=l[o-1],y[4]=d[o-1],y[5]=m[o-1]),o>1&&(y[8]=l[o-2],y[10]=d[o-2],y[11]=m[o-2]),o<l.length-1&&(y[1]=l[o+1],y[6]=d[o+1],y[7]=m[o+1]),o<l.length-2&&(y[9]=l[o+2],y[12]=d[o+2],y[13]=m[o+2]);for(let A of y)if(Yn.adjustRowNumber(f,A))return}static adjustRowNumber(i,o){return o==null?!1:o.hasValidRowNumber()&&o.getBucket()===i.getBucket()?(i.setRowNumber(o.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(i){this.boundingBox=i}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(i,o){this.detectionResultColumns[i]=o}getDetectionResultColumn(i){return this.detectionResultColumns[i]}toString(){let i=this.detectionResultColumns[0];i==null&&(i=this.detectionResultColumns[this.barcodeColumnCount+1]);let o=new Ss;for(let l=0;l<i.getCodewords().length;l++){o.format("CW %3d:",l);for(let f=0;f<this.barcodeColumnCount+2;f++){if(this.detectionResultColumns[f]==null){o.format("    |   ");continue}let d=this.detectionResultColumns[f].getCodewords()[l];if(d==null){o.format("    |   ");continue}o.format(" %3d|%3d",d.getRowNumber(),d.getValue())}o.format("%n")}return o.toString()}}class gi{constructor(i,o,l,f){this.rowNumber=gi.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(i),this.endX=Math.trunc(o),this.bucket=Math.trunc(l),this.value=Math.trunc(f)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(i){return i!==gi.BARCODE_ROW_UNKNOWN&&this.bucket===i%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(i){this.rowNumber=i}toString(){return this.rowNumber+"|"+this.value}}gi.BARCODE_ROW_UNKNOWN=-1;class Dn{static initialize(){for(let i=0;i<nt.SYMBOL_TABLE.length;i++){let o=nt.SYMBOL_TABLE[i],l=o&1;for(let f=0;f<nt.BARS_IN_MODULE;f++){let d=0;for(;(o&1)===l;)d+=1,o>>=1;l=o&1,Dn.RATIOS_TABLE[i]||(Dn.RATIOS_TABLE[i]=new Array(nt.BARS_IN_MODULE)),Dn.RATIOS_TABLE[i][nt.BARS_IN_MODULE-f-1]=Math.fround(d/nt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(i){let o=Dn.getDecodedCodewordValue(Dn.sampleBitCounts(i));return o!==-1?o:Dn.getClosestDecodedValue(i)}static sampleBitCounts(i){let o=et.sum(i),l=new Int32Array(nt.BARS_IN_MODULE),f=0,d=0;for(let m=0;m<nt.MODULES_IN_CODEWORD;m++){let y=o/(2*nt.MODULES_IN_CODEWORD)+m*o/nt.MODULES_IN_CODEWORD;d+i[f]<=y&&(d+=i[f],f++),l[f]++}return l}static getDecodedCodewordValue(i){let o=Dn.getBitValue(i);return nt.getCodeword(o)===-1?-1:o}static getBitValue(i){let o=0;for(let l=0;l<i.length;l++)for(let f=0;f<i[l];f++)o=o<<1|(l%2===0?1:0);return Math.trunc(o)}static getClosestDecodedValue(i){let o=et.sum(i),l=new Array(nt.BARS_IN_MODULE);if(o>1)for(let m=0;m<l.length;m++)l[m]=Math.fround(i[m]/o);let f=bn.MAX_VALUE,d=-1;this.bSymbolTableReady||Dn.initialize();for(let m=0;m<Dn.RATIOS_TABLE.length;m++){let y=0,A=Dn.RATIOS_TABLE[m];for(let S=0;S<nt.BARS_IN_MODULE;S++){let R=Math.fround(A[S]-l[S]);if(y+=Math.fround(R*R),y>=f)break}y<f&&(f=y,d=nt.SYMBOL_TABLE[m])}return d}}Dn.bSymbolTableReady=!1,Dn.RATIOS_TABLE=new Array(nt.SYMBOL_TABLE.length).map(P=>new Array(nt.BARS_IN_MODULE));class Cs{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(i){this.segmentIndex=i}getFileId(){return this.fileId}setFileId(i){this.fileId=i}getOptionalData(){return this.optionalData}setOptionalData(i){this.optionalData=i}isLastSegment(){return this.lastSegment}setLastSegment(i){this.lastSegment=i}getSegmentCount(){return this.segmentCount}setSegmentCount(i){this.segmentCount=i}getSender(){return this.sender||null}setSender(i){this.sender=i}getAddressee(){return this.addressee||null}setAddressee(i){this.addressee=i}getFileName(){return this.fileName}setFileName(i){this.fileName=i}getFileSize(){return this.fileSize}setFileSize(i){this.fileSize=i}getChecksum(){return this.checksum}setChecksum(i){this.checksum=i}getTimestamp(){return this.timestamp}setTimestamp(i){this.timestamp=i}}class Qa{static parseLong(i,o=void 0){return parseInt(i,o)}}class Is extends E{}Is.kind="NullPointerException";class Za{writeBytes(i){this.writeBytesOffset(i,0,i.length)}writeBytesOffset(i,o,l){if(i==null)throw new Is;if(o<0||o>i.length||l<0||o+l>i.length||o+l<0)throw new q;if(l===0)return;for(let f=0;f<l;f++)this.write(i[o+f])}flush(){}close(){}}class cs extends E{}class Ja extends Za{constructor(i=32){if(super(),this.count=0,i<0)throw new I("Negative initial size: "+i);this.buf=new Uint8Array(i)}ensureCapacity(i){i-this.buf.length>0&&this.grow(i)}grow(i){let l=this.buf.length<<1;if(l-i<0&&(l=i),l<0){if(i<0)throw new cs;l=K.MAX_VALUE}this.buf=ae.copyOfUint8Array(this.buf,l)}write(i){this.ensureCapacity(this.count+1),this.buf[this.count]=i,this.count+=1}writeBytesOffset(i,o,l){if(o<0||o>i.length||l<0||o+l-i.length>0)throw new q;this.ensureCapacity(this.count+l),$.arraycopy(i,o,this.buf,this.count,l),this.count+=l}writeTo(i){i.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return ae.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(i){return i?typeof i=="string"?this.toString_string(i):this.toString_number(i):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(i){return new String(this.buf).toString()}toString_number(i){return new String(this.buf).toString()}close(){}}var $t;(function(P){P[P.ALPHA=0]="ALPHA",P[P.LOWER=1]="LOWER",P[P.MIXED=2]="MIXED",P[P.PUNCT=3]="PUNCT",P[P.ALPHA_SHIFT=4]="ALPHA_SHIFT",P[P.PUNCT_SHIFT=5]="PUNCT_SHIFT"})($t||($t={}));function js(){if(typeof window<"u")return window.BigInt||null;if(typeof Sf<"u")return Sf.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let ua;function ji(P){if(typeof ua>"u"&&(ua=js()),ua===null)throw new Error("BigInt is not supported!");return ua(P)}function ha(){let P=[];P[0]=ji(1);let i=ji(900);P[1]=i;for(let o=2;o<16;o++)P[o]=P[o-1]*i;return P}class xe{static decode(i,o){let l=new W(""),f=V.ISO8859_1;l.enableDecoding(f);let d=1,m=i[d++],y=new Cs;for(;d<i[0];){switch(m){case xe.TEXT_COMPACTION_MODE_LATCH:d=xe.textCompaction(i,d,l);break;case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:d=xe.byteCompaction(m,i,f,d,l);break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(i[d++]);break;case xe.NUMERIC_COMPACTION_MODE_LATCH:d=xe.numericCompaction(i,d,l);break;case xe.ECI_CHARSET:V.getCharacterSetECIByValue(i[d++]);break;case xe.ECI_GENERAL_PURPOSE:d+=2;break;case xe.ECI_USER_DEFINED:d++;break;case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:d=xe.decodeMacroBlock(i,d,y);break;case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:throw new j;default:d--,d=xe.textCompaction(i,d,l);break}if(d<i.length)m=i[d++];else throw j.getFormatInstance()}if(l.length()===0)throw j.getFormatInstance();let A=new Jt(null,l.toString(),null,o);return A.setOther(y),A}static decodeMacroBlock(i,o,l){if(o+xe.NUMBER_OF_SEQUENCE_CODEWORDS>i[0])throw j.getFormatInstance();let f=new Int32Array(xe.NUMBER_OF_SEQUENCE_CODEWORDS);for(let y=0;y<xe.NUMBER_OF_SEQUENCE_CODEWORDS;y++,o++)f[y]=i[o];l.setSegmentIndex(K.parseInt(xe.decodeBase900toBase10(f,xe.NUMBER_OF_SEQUENCE_CODEWORDS)));let d=new W;o=xe.textCompaction(i,o,d),l.setFileId(d.toString());let m=-1;for(i[o]===xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(m=o+1);o<i[0];)switch(i[o]){case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(o++,i[o]){case xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let y=new W;o=xe.textCompaction(i,o+1,y),l.setFileName(y.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let A=new W;o=xe.textCompaction(i,o+1,A),l.setSender(A.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let S=new W;o=xe.textCompaction(i,o+1,S),l.setAddressee(S.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let R=new W;o=xe.numericCompaction(i,o+1,R),l.setSegmentCount(K.parseInt(R.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let L=new W;o=xe.numericCompaction(i,o+1,L),l.setTimestamp(Qa.parseLong(L.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let k=new W;o=xe.numericCompaction(i,o+1,k),l.setChecksum(K.parseInt(k.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let G=new W;o=xe.numericCompaction(i,o+1,G),l.setFileSize(Qa.parseLong(G.toString()));break;default:throw j.getFormatInstance()}break;case xe.MACRO_PDF417_TERMINATOR:o++,l.setLastSegment(!0);break;default:throw j.getFormatInstance()}if(m!==-1){let y=o-m;l.isLastSegment()&&y--,l.setOptionalData(ae.copyOfRange(i,m,m+y))}return o}static textCompaction(i,o,l){let f=new Int32Array((i[0]-o)*2),d=new Int32Array((i[0]-o)*2),m=0,y=!1;for(;o<i[0]&&!y;){let A=i[o++];if(A<xe.TEXT_COMPACTION_MODE_LATCH)f[m]=A/30,f[m+1]=A%30,m+=2;else switch(A){case xe.TEXT_COMPACTION_MODE_LATCH:f[m++]=xe.TEXT_COMPACTION_MODE_LATCH;break;case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:o--,y=!0;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f[m]=xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,A=i[o++],d[m]=A,m++;break}}return xe.decodeTextCompaction(f,d,m,l),o}static decodeTextCompaction(i,o,l,f){let d=$t.ALPHA,m=$t.ALPHA,y=0;for(;y<l;){let A=i[y],S="";switch(d){case $t.ALPHA:if(A<26)S=String.fromCharCode(65+A);else switch(A){case 26:S=" ";break;case xe.LL:d=$t.LOWER;break;case xe.ML:d=$t.MIXED;break;case xe.PS:m=d,d=$t.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[y]);break;case xe.TEXT_COMPACTION_MODE_LATCH:d=$t.ALPHA;break}break;case $t.LOWER:if(A<26)S=String.fromCharCode(97+A);else switch(A){case 26:S=" ";break;case xe.AS:m=d,d=$t.ALPHA_SHIFT;break;case xe.ML:d=$t.MIXED;break;case xe.PS:m=d,d=$t.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[y]);break;case xe.TEXT_COMPACTION_MODE_LATCH:d=$t.ALPHA;break}break;case $t.MIXED:if(A<xe.PL)S=xe.MIXED_CHARS[A];else switch(A){case xe.PL:d=$t.PUNCT;break;case 26:S=" ";break;case xe.LL:d=$t.LOWER;break;case xe.AL:d=$t.ALPHA;break;case xe.PS:m=d,d=$t.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[y]);break;case xe.TEXT_COMPACTION_MODE_LATCH:d=$t.ALPHA;break}break;case $t.PUNCT:if(A<xe.PAL)S=xe.PUNCT_CHARS[A];else switch(A){case xe.PAL:d=$t.ALPHA;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[y]);break;case xe.TEXT_COMPACTION_MODE_LATCH:d=$t.ALPHA;break}break;case $t.ALPHA_SHIFT:if(d=m,A<26)S=String.fromCharCode(65+A);else switch(A){case 26:S=" ";break;case xe.TEXT_COMPACTION_MODE_LATCH:d=$t.ALPHA;break}break;case $t.PUNCT_SHIFT:if(d=m,A<xe.PAL)S=xe.PUNCT_CHARS[A];else switch(A){case xe.PAL:d=$t.ALPHA;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[y]);break;case xe.TEXT_COMPACTION_MODE_LATCH:d=$t.ALPHA;break}break}S!==""&&f.append(S),y++}}static byteCompaction(i,o,l,f,d){let m=new Ja,y=0,A=0,S=!1;switch(i){case xe.BYTE_COMPACTION_MODE_LATCH:let R=new Int32Array(6),L=o[f++];for(;f<o[0]&&!S;)switch(R[y++]=L,A=900*A+L,L=o[f++],L){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:f--,S=!0;break;default:if(y%5===0&&y>0){for(let k=0;k<6;++k)m.write(Number(ji(A)>>ji(8*(5-k))));A=0,y=0}break}f===o[0]&&L<xe.TEXT_COMPACTION_MODE_LATCH&&(R[y++]=L);for(let k=0;k<y;k++)m.write(R[k]);break;case xe.BYTE_COMPACTION_MODE_LATCH_6:for(;f<o[0]&&!S;){let k=o[f++];if(k<xe.TEXT_COMPACTION_MODE_LATCH)y++,A=900*A+k;else switch(k){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:f--,S=!0;break}if(y%5===0&&y>0){for(let G=0;G<6;++G)m.write(Number(ji(A)>>ji(8*(5-G))));A=0,y=0}}break}return d.append(Q.decode(m.toByteArray(),l)),f}static numericCompaction(i,o,l){let f=0,d=!1,m=new Int32Array(xe.MAX_NUMERIC_CODEWORDS);for(;o<i[0]&&!d;){let y=i[o++];if(o===i[0]&&(d=!0),y<xe.TEXT_COMPACTION_MODE_LATCH)m[f]=y,f++;else switch(y){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:o--,d=!0;break}(f%xe.MAX_NUMERIC_CODEWORDS===0||y===xe.NUMERIC_COMPACTION_MODE_LATCH||d)&&f>0&&(l.append(xe.decodeBase900toBase10(m,f)),f=0)}return o}static decodeBase900toBase10(i,o){let l=ji(0);for(let d=0;d<o;d++)l+=xe.EXP900[o-d-1]*ji(i[d]);let f=l.toString();if(f.charAt(0)!=="1")throw new j;return f.substring(1)}}xe.TEXT_COMPACTION_MODE_LATCH=900,xe.BYTE_COMPACTION_MODE_LATCH=901,xe.NUMERIC_COMPACTION_MODE_LATCH=902,xe.BYTE_COMPACTION_MODE_LATCH_6=924,xe.ECI_USER_DEFINED=925,xe.ECI_GENERAL_PURPOSE=926,xe.ECI_CHARSET=927,xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,xe.MACRO_PDF417_TERMINATOR=922,xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,xe.MAX_NUMERIC_CODEWORDS=15,xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,xe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,xe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,xe.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,xe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,xe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,xe.PL=25,xe.LL=27,xe.AS=27,xe.ML=28,xe.AL=28,xe.PS=29,xe.PAL=29,xe.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,xe.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",xe.EXP900=js()?ha():[],xe.NUMBER_OF_SEQUENCE_CODEWORDS=2;class _t{constructor(){}static decode(i,o,l,f,d,m,y){let A=new Ui(i,o,l,f,d),S=null,R=null,L;for(let te=!0;;te=!1){if(o!=null&&(S=_t.getRowIndicatorColumn(i,A,o,!0,m,y)),f!=null&&(R=_t.getRowIndicatorColumn(i,A,f,!1,m,y)),L=_t.merge(S,R),L==null)throw fe.getNotFoundInstance();let re=L.getBoundingBox();if(te&&re!=null&&(re.getMinY()<A.getMinY()||re.getMaxY()>A.getMaxY()))A=re;else break}L.setBoundingBox(A);let k=L.getBarcodeColumnCount()+1;L.setDetectionResultColumn(0,S),L.setDetectionResultColumn(k,R);let G=S!=null;for(let te=1;te<=k;te++){let re=G?te:k-te;if(L.getDetectionResultColumn(re)!==void 0)continue;let ue;re===0||re===k?ue=new vi(A,re===0):ue=new Vi(A),L.setDetectionResultColumn(re,ue);let ye=-1,ke=ye;for(let Pe=A.getMinY();Pe<=A.getMaxY();Pe++){if(ye=_t.getStartColumn(L,re,Pe,G),ye<0||ye>A.getMaxX()){if(ke===-1)continue;ye=ke}let Oe=_t.detectCodeword(i,A.getMinX(),A.getMaxX(),G,ye,Pe,m,y);Oe!=null&&(ue.setCodeword(Pe,Oe),ke=ye,m=Math.min(m,Oe.getWidth()),y=Math.max(y,Oe.getWidth()))}}return _t.createDecoderResult(L)}static merge(i,o){if(i==null&&o==null)return null;let l=_t.getBarcodeMetadata(i,o);if(l==null)return null;let f=Ui.merge(_t.adjustBoundingBox(i),_t.adjustBoundingBox(o));return new Yn(l,f)}static adjustBoundingBox(i){if(i==null)return null;let o=i.getRowHeights();if(o==null)return null;let l=_t.getMax(o),f=0;for(let y of o)if(f+=l-y,y>0)break;let d=i.getCodewords();for(let y=0;f>0&&d[y]==null;y++)f--;let m=0;for(let y=o.length-1;y>=0&&(m+=l-o[y],!(o[y]>0));y--);for(let y=d.length-1;m>0&&d[y]==null;y--)m--;return i.getBoundingBox().addMissingRows(f,m,i.isLeft())}static getMax(i){let o=-1;for(let l of i)o=Math.max(o,l);return o}static getBarcodeMetadata(i,o){let l;if(i==null||(l=i.getBarcodeMetadata())==null)return o==null?null:o.getBarcodeMetadata();let f;return o==null||(f=o.getBarcodeMetadata())==null?l:l.getColumnCount()!==f.getColumnCount()&&l.getErrorCorrectionLevel()!==f.getErrorCorrectionLevel()&&l.getRowCount()!==f.getRowCount()?null:l}static getRowIndicatorColumn(i,o,l,f,d,m){let y=new vi(o,f);for(let A=0;A<2;A++){let S=A===0?1:-1,R=Math.trunc(Math.trunc(l.getX()));for(let L=Math.trunc(Math.trunc(l.getY()));L<=o.getMaxY()&&L>=o.getMinY();L+=S){let k=_t.detectCodeword(i,0,i.getWidth(),f,R,L,d,m);k!=null&&(y.setCodeword(L,k),f?R=k.getStartX():R=k.getEndX())}}return y}static adjustCodewordCount(i,o){let l=o[0][1],f=l.getValue(),d=i.getBarcodeColumnCount()*i.getBarcodeRowCount()-_t.getNumberOfECCodeWords(i.getBarcodeECLevel());if(f.length===0){if(d<1||d>nt.MAX_CODEWORDS_IN_BARCODE)throw fe.getNotFoundInstance();l.setValue(d)}else f[0]!==d&&l.setValue(d)}static createDecoderResult(i){let o=_t.createBarcodeMatrix(i);_t.adjustCodewordCount(i,o);let l=new Array,f=new Int32Array(i.getBarcodeRowCount()*i.getBarcodeColumnCount()),d=[],m=new Array;for(let A=0;A<i.getBarcodeRowCount();A++)for(let S=0;S<i.getBarcodeColumnCount();S++){let R=o[A][S+1].getValue(),L=A*i.getBarcodeColumnCount()+S;R.length===0?l.push(L):R.length===1?f[L]=R[0]:(m.push(L),d.push(R))}let y=new Array(d.length);for(let A=0;A<y.length;A++)y[A]=d[A];return _t.createDecoderResultFromAmbiguousValues(i.getBarcodeECLevel(),f,nt.toIntArray(l),nt.toIntArray(m),y)}static createDecoderResultFromAmbiguousValues(i,o,l,f,d){let m=new Int32Array(f.length),y=100;for(;y-- >0;){for(let A=0;A<m.length;A++)o[f[A]]=d[A][m[A]];try{return _t.decodeCodewords(o,i,l)}catch(A){if(!(A instanceof B))throw A}if(m.length===0)throw B.getChecksumInstance();for(let A=0;A<m.length;A++)if(m[A]<d[A].length-1){m[A]++;break}else if(m[A]=0,A===m.length-1)throw B.getChecksumInstance()}throw B.getChecksumInstance()}static createBarcodeMatrix(i){let o=Array.from({length:i.getBarcodeRowCount()},()=>new Array(i.getBarcodeColumnCount()+2));for(let f=0;f<o.length;f++)for(let d=0;d<o[f].length;d++)o[f][d]=new di;let l=0;for(let f of i.getDetectionResultColumns()){if(f!=null){for(let d of f.getCodewords())if(d!=null){let m=d.getRowNumber();if(m>=0){if(m>=o.length)continue;o[m][l].setValue(d.getValue())}}}l++}return o}static isValidBarcodeColumn(i,o){return o>=0&&o<=i.getBarcodeColumnCount()+1}static getStartColumn(i,o,l,f){let d=f?1:-1,m=null;if(_t.isValidBarcodeColumn(i,o-d)&&(m=i.getDetectionResultColumn(o-d).getCodeword(l)),m!=null)return f?m.getEndX():m.getStartX();if(m=i.getDetectionResultColumn(o).getCodewordNearby(l),m!=null)return f?m.getStartX():m.getEndX();if(_t.isValidBarcodeColumn(i,o-d)&&(m=i.getDetectionResultColumn(o-d).getCodewordNearby(l)),m!=null)return f?m.getEndX():m.getStartX();let y=0;for(;_t.isValidBarcodeColumn(i,o-d);){o-=d;for(let A of i.getDetectionResultColumn(o).getCodewords())if(A!=null)return(f?A.getEndX():A.getStartX())+d*y*(A.getEndX()-A.getStartX());y++}return f?i.getBoundingBox().getMinX():i.getBoundingBox().getMaxX()}static detectCodeword(i,o,l,f,d,m,y,A){d=_t.adjustCodewordStartColumn(i,o,l,f,d,m);let S=_t.getModuleBitCount(i,o,l,f,d,m);if(S==null)return null;let R,L=et.sum(S);if(f)R=d+L;else{for(let te=0;te<S.length/2;te++){let re=S[te];S[te]=S[S.length-1-te],S[S.length-1-te]=re}R=d,d=R-L}if(!_t.checkCodewordSkew(L,y,A))return null;let k=Dn.getDecodedValue(S),G=nt.getCodeword(k);return G===-1?null:new gi(d,R,_t.getCodewordBucketNumber(k),G)}static getModuleBitCount(i,o,l,f,d,m){let y=d,A=new Int32Array(8),S=0,R=f?1:-1,L=f;for(;(f?y<l:y>=o)&&S<A.length;)i.get(y,m)===L?(A[S]++,y+=R):(S++,L=!L);return S===A.length||y===(f?l:o)&&S===A.length-1?A:null}static getNumberOfECCodeWords(i){return 2<<i}static adjustCodewordStartColumn(i,o,l,f,d,m){let y=d,A=f?-1:1;for(let S=0;S<2;S++){for(;(f?y>=o:y<l)&&f===i.get(y,m);){if(Math.abs(d-y)>_t.CODEWORD_SKEW_SIZE)return d;y+=A}A=-A,f=!f}return y}static checkCodewordSkew(i,o,l){return o-_t.CODEWORD_SKEW_SIZE<=i&&i<=l+_t.CODEWORD_SKEW_SIZE}static decodeCodewords(i,o,l){if(i.length===0)throw j.getFormatInstance();let f=1<<o+1,d=_t.correctErrors(i,l,f);_t.verifyCodewordCount(i,f);let m=xe.decode(i,""+o);return m.setErrorsCorrected(d),m.setErasures(l.length),m}static correctErrors(i,o,l){if(o!=null&&o.length>l/2+_t.MAX_ERRORS||l<0||l>_t.MAX_EC_CODEWORDS)throw B.getChecksumInstance();return _t.errorCorrection.decode(i,l,o)}static verifyCodewordCount(i,o){if(i.length<4)throw j.getFormatInstance();let l=i[0];if(l>i.length)throw j.getFormatInstance();if(l===0)if(o<i.length)i[0]=i.length-o;else throw j.getFormatInstance()}static getBitCountForCodeword(i){let o=new Int32Array(8),l=0,f=o.length-1;for(;!((i&1)!==l&&(l=i&1,f--,f<0));)o[f]++,i>>=1;return o}static getCodewordBucketNumber(i){return i instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(i):this.getCodewordBucketNumber_number(i)}static getCodewordBucketNumber_number(i){return _t.getCodewordBucketNumber(_t.getBitCountForCodeword(i))}static getCodewordBucketNumber_Int32Array(i){return(i[0]-i[2]+i[4]-i[6]+9)%9}static toString(i){let o=new Ss;for(let l=0;l<i.length;l++){o.format("Row %2d: ",l);for(let f=0;f<i[l].length;f++){let d=i[l][f];d.getValue().length===0?o.format("        ",null):o.format("%4d(%2d)",d.getValue()[0],d.getConfidence(d.getValue()[0]))}o.format("%n")}return o.toString()}}_t.CODEWORD_SKEW_SIZE=2,_t.MAX_ERRORS=3,_t.MAX_EC_CODEWORDS=512,_t.errorCorrection=new Bi;class Vn{decode(i,o=null){let l=Vn.decode(i,o,!1);if(l==null||l.length===0||l[0]==null)throw fe.getNotFoundInstance();return l[0]}decodeMultiple(i,o=null){try{return Vn.decode(i,o,!0)}catch(l){throw l instanceof j||l instanceof B?fe.getNotFoundInstance():l}}static decode(i,o,l){const f=new Array,d=lt.detectMultiple(i,o,l);for(const m of d.getPoints()){const y=_t.decode(d.getBits(),m[4],m[5],m[6],m[7],Vn.getMinCodewordWidth(m),Vn.getMaxCodewordWidth(m)),A=new Ve(y.getText(),y.getRawBytes(),void 0,m,Le.PDF_417);A.putMetadata(Ct.ERROR_CORRECTION_LEVEL,y.getECLevel());const S=y.getOther();S!=null&&A.putMetadata(Ct.PDF417_EXTRA_METADATA,S),f.push(A)}return f.map(m=>m)}static getMaxWidth(i,o){return i==null||o==null?0:Math.trunc(Math.abs(i.getX()-o.getX()))}static getMinWidth(i,o){return i==null||o==null?K.MAX_VALUE:Math.trunc(Math.abs(i.getX()-o.getX()))}static getMaxCodewordWidth(i){return Math.floor(Math.max(Math.max(Vn.getMaxWidth(i[0],i[4]),Vn.getMaxWidth(i[6],i[2])*nt.MODULES_IN_CODEWORD/nt.MODULES_IN_STOP_PATTERN),Math.max(Vn.getMaxWidth(i[1],i[5]),Vn.getMaxWidth(i[7],i[3])*nt.MODULES_IN_CODEWORD/nt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(i){return Math.floor(Math.min(Math.min(Vn.getMinWidth(i[0],i[4]),Vn.getMinWidth(i[6],i[2])*nt.MODULES_IN_CODEWORD/nt.MODULES_IN_STOP_PATTERN),Math.min(Vn.getMinWidth(i[1],i[5]),Vn.getMinWidth(i[7],i[3])*nt.MODULES_IN_CODEWORD/nt.MODULES_IN_STOP_PATTERN)))}reset(){}}class fa extends E{}fa.kind="ReaderException";class Jo{constructor(i,o){this.verbose=i===!0,o&&this.setHints(o)}decode(i,o){return o&&this.setHints(o),this.decodeInternal(i)}decodeWithState(i){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(i)}setHints(i){this.hints=i;const o=!s(i)&&i.get(De.TRY_HARDER)===!0,l=s(i)?null:i.get(De.POSSIBLE_FORMATS),f=new Array;if(!s(l)){const d=l.some(m=>m===Le.UPC_A||m===Le.UPC_E||m===Le.EAN_13||m===Le.EAN_8||m===Le.CODABAR||m===Le.CODE_39||m===Le.CODE_93||m===Le.CODE_128||m===Le.ITF||m===Le.RSS_14||m===Le.RSS_EXPANDED);d&&!o&&f.push(new Sr(i,this.verbose)),l.includes(Le.QR_CODE)&&f.push(new ii),l.includes(Le.DATA_MATRIX)&&f.push(new Or),l.includes(Le.AZTEC)&&f.push(new ss),l.includes(Le.PDF_417)&&f.push(new Vn),d&&o&&f.push(new Sr(i,this.verbose))}f.length===0&&(o||f.push(new Sr(i,this.verbose)),f.push(new ii),f.push(new Or),f.push(new ss),f.push(new Vn),o&&f.push(new Sr(i,this.verbose))),this.readers=f}reset(){if(this.readers!==null)for(const i of this.readers)i.reset()}decodeInternal(i){if(this.readers===null)throw new fa("No readers where selected, nothing can be read.");for(const o of this.readers)try{return o.decode(i,this.hints)}catch(l){if(l instanceof fa)continue}throw new fe("No MultiFormat Readers were able to detect the code.")}}class us extends Ue{constructor(i=null,o=500){const l=new Jo;l.setHints(i),super(l,o)}decodeBitmap(i){return this.reader.decodeWithState(i)}}class Dl extends Ue{constructor(i=500){super(new Vn,i)}}class Ml extends Ue{constructor(i=500){super(new ii,i)}}var $a;(function(P){P[P.ERROR_CORRECTION=0]="ERROR_CORRECTION",P[P.CHARACTER_SET=1]="CHARACTER_SET",P[P.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",P[P.MIN_SIZE=3]="MIN_SIZE",P[P.MAX_SIZE=4]="MAX_SIZE",P[P.MARGIN=5]="MARGIN",P[P.PDF417_COMPACT=6]="PDF417_COMPACT",P[P.PDF417_COMPACTION=7]="PDF417_COMPACTION",P[P.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",P[P.AZTEC_LAYERS=9]="AZTEC_LAYERS",P[P.QR_VERSION=10]="QR_VERSION"})($a||($a={}));var jn=$a;class hs{constructor(i){this.field=i,this.cachedGenerators=[],this.cachedGenerators.push(new Bn(i,Int32Array.from([1])))}buildGenerator(i){const o=this.cachedGenerators;if(i>=o.length){let l=o[o.length-1];const f=this.field;for(let d=o.length;d<=i;d++){const m=l.multiply(new Bn(f,Int32Array.from([1,f.exp(d-1+f.getGeneratorBase())])));o.push(m),l=m}}return o[i]}encode(i,o){if(o===0)throw new I("No error correction bytes");const l=i.length-o;if(l<=0)throw new I("No data bytes provided");const f=this.buildGenerator(o),d=new Int32Array(l);$.arraycopy(i,0,d,0,l);let m=new Bn(this.field,d);m=m.multiplyByMonomial(o,1);const A=m.divide(f)[1].getCoefficients(),S=o-A.length;for(let R=0;R<S;R++)i[l+R]=0;$.arraycopy(A,0,i,l+S,A.length)}}class Pt{constructor(){}static applyMaskPenaltyRule1(i){return Pt.applyMaskPenaltyRule1Internal(i,!0)+Pt.applyMaskPenaltyRule1Internal(i,!1)}static applyMaskPenaltyRule2(i){let o=0;const l=i.getArray(),f=i.getWidth(),d=i.getHeight();for(let m=0;m<d-1;m++){const y=l[m];for(let A=0;A<f-1;A++){const S=y[A];S===y[A+1]&&S===l[m+1][A]&&S===l[m+1][A+1]&&o++}}return Pt.N2*o}static applyMaskPenaltyRule3(i){let o=0;const l=i.getArray(),f=i.getWidth(),d=i.getHeight();for(let m=0;m<d;m++)for(let y=0;y<f;y++){const A=l[m];y+6<f&&A[y]===1&&A[y+1]===0&&A[y+2]===1&&A[y+3]===1&&A[y+4]===1&&A[y+5]===0&&A[y+6]===1&&(Pt.isWhiteHorizontal(A,y-4,y)||Pt.isWhiteHorizontal(A,y+7,y+11))&&o++,m+6<d&&l[m][y]===1&&l[m+1][y]===0&&l[m+2][y]===1&&l[m+3][y]===1&&l[m+4][y]===1&&l[m+5][y]===0&&l[m+6][y]===1&&(Pt.isWhiteVertical(l,y,m-4,m)||Pt.isWhiteVertical(l,y,m+7,m+11))&&o++}return o*Pt.N3}static isWhiteHorizontal(i,o,l){o=Math.max(o,0),l=Math.min(l,i.length);for(let f=o;f<l;f++)if(i[f]===1)return!1;return!0}static isWhiteVertical(i,o,l,f){l=Math.max(l,0),f=Math.min(f,i.length);for(let d=l;d<f;d++)if(i[d][o]===1)return!1;return!0}static applyMaskPenaltyRule4(i){let o=0;const l=i.getArray(),f=i.getWidth(),d=i.getHeight();for(let A=0;A<d;A++){const S=l[A];for(let R=0;R<f;R++)S[R]===1&&o++}const m=i.getHeight()*i.getWidth();return Math.floor(Math.abs(o*2-m)*10/m)*Pt.N4}static getDataMaskBit(i,o,l){let f,d;switch(i){case 0:f=l+o&1;break;case 1:f=l&1;break;case 2:f=o%3;break;case 3:f=(l+o)%3;break;case 4:f=Math.floor(l/2)+Math.floor(o/3)&1;break;case 5:d=l*o,f=(d&1)+d%3;break;case 6:d=l*o,f=(d&1)+d%3&1;break;case 7:d=l*o,f=d%3+(l+o&1)&1;break;default:throw new I("Invalid mask pattern: "+i)}return f===0}static applyMaskPenaltyRule1Internal(i,o){let l=0;const f=o?i.getHeight():i.getWidth(),d=o?i.getWidth():i.getHeight(),m=i.getArray();for(let y=0;y<f;y++){let A=0,S=-1;for(let R=0;R<d;R++){const L=o?m[y][R]:m[R][y];L===S?A++:(A>=5&&(l+=Pt.N1+(A-5)),A=1,S=L)}A>=5&&(l+=Pt.N1+(A-5))}return l}}Pt.N1=3,Pt.N2=3,Pt.N3=40,Pt.N4=10;class da{constructor(i,o){this.width=i,this.height=o;const l=new Array(o);for(let f=0;f!==o;f++)l[f]=new Uint8Array(i);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(i,o){return this.bytes[o][i]}getArray(){return this.bytes}setNumber(i,o,l){this.bytes[o][i]=l}setBoolean(i,o,l){this.bytes[o][i]=l?1:0}clear(i){for(const o of this.bytes)ae.fill(o,i)}equals(i){if(!(i instanceof da))return!1;const o=i;if(this.width!==o.width||this.height!==o.height)return!1;for(let l=0,f=this.height;l<f;++l){const d=this.bytes[l],m=o.bytes[l];for(let y=0,A=this.width;y<A;++y)if(d[y]!==m[y])return!1}return!0}toString(){const i=new W;for(let o=0,l=this.height;o<l;++o){const f=this.bytes[o];for(let d=0,m=this.width;d<m;++d)switch(f[d]){case 0:i.append(" 0");break;case 1:i.append(" 1");break;default:i.append("  ");break}i.append(`
`)}return i.toString()}}class fs{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const i=new W;return i.append(`<<
`),i.append(" mode: "),i.append(this.mode?this.mode.toString():"null"),i.append(`
 ecLevel: `),i.append(this.ecLevel?this.ecLevel.toString():"null"),i.append(`
 version: `),i.append(this.version?this.version.toString():"null"),i.append(`
 maskPattern: `),i.append(this.maskPattern.toString()),this.matrix?(i.append(`
 matrix:
`),i.append(this.matrix.toString())):i.append(`
 matrix: null
`),i.append(`>>
`),i.toString()}setMode(i){this.mode=i}setECLevel(i){this.ecLevel=i}setVersion(i){this.version=i}setMaskPattern(i){this.maskPattern=i}setMatrix(i){this.matrix=i}static isValidMaskPattern(i){return i>=0&&i<fs.NUM_MASK_PATTERNS}}fs.NUM_MASK_PATTERNS=8;class Lt extends E{}Lt.kind="WriterException";class x{constructor(){}static clearMatrix(i){i.clear(255)}static buildMatrix(i,o,l,f,d){x.clearMatrix(d),x.embedBasicPatterns(l,d),x.embedTypeInfo(o,f,d),x.maybeEmbedVersionInfo(l,d),x.embedDataBits(i,f,d)}static embedBasicPatterns(i,o){x.embedPositionDetectionPatternsAndSeparators(o),x.embedDarkDotAtLeftBottomCorner(o),x.maybeEmbedPositionAdjustmentPatterns(i,o),x.embedTimingPatterns(o)}static embedTypeInfo(i,o,l){const f=new le;x.makeTypeInfoBits(i,o,f);for(let d=0,m=f.getSize();d<m;++d){const y=f.get(f.getSize()-1-d),A=x.TYPE_INFO_COORDINATES[d],S=A[0],R=A[1];if(l.setBoolean(S,R,y),d<8){const L=l.getWidth()-d-1;l.setBoolean(L,8,y)}else{const k=l.getHeight()-7+(d-8);l.setBoolean(8,k,y)}}}static maybeEmbedVersionInfo(i,o){if(i.getVersionNumber()<7)return;const l=new le;x.makeVersionInfoBits(i,l);let f=17;for(let d=0;d<6;++d)for(let m=0;m<3;++m){const y=l.get(f);f--,o.setBoolean(d,o.getHeight()-11+m,y),o.setBoolean(o.getHeight()-11+m,d,y)}}static embedDataBits(i,o,l){let f=0,d=-1,m=l.getWidth()-1,y=l.getHeight()-1;for(;m>0;){for(m===6&&(m-=1);y>=0&&y<l.getHeight();){for(let A=0;A<2;++A){const S=m-A;if(!x.isEmpty(l.get(S,y)))continue;let R;f<i.getSize()?(R=i.get(f),++f):R=!1,o!==255&&Pt.getDataMaskBit(o,S,y)&&(R=!R),l.setBoolean(S,y,R)}y+=d}d=-d,y+=d,m-=2}if(f!==i.getSize())throw new Lt("Not all bits consumed: "+f+"/"+i.getSize())}static findMSBSet(i){return 32-K.numberOfLeadingZeros(i)}static calculateBCHCode(i,o){if(o===0)throw new I("0 polynomial");const l=x.findMSBSet(o);for(i<<=l-1;x.findMSBSet(i)>=l;)i^=o<<x.findMSBSet(i)-l;return i}static makeTypeInfoBits(i,o,l){if(!fs.isValidMaskPattern(o))throw new Lt("Invalid mask pattern");const f=i.getBits()<<3|o;l.appendBits(f,5);const d=x.calculateBCHCode(f,x.TYPE_INFO_POLY);l.appendBits(d,10);const m=new le;if(m.appendBits(x.TYPE_INFO_MASK_PATTERN,15),l.xor(m),l.getSize()!==15)throw new Lt("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(i,o){o.appendBits(i.getVersionNumber(),6);const l=x.calculateBCHCode(i.getVersionNumber(),x.VERSION_INFO_POLY);if(o.appendBits(l,12),o.getSize()!==18)throw new Lt("should not happen but we got: "+o.getSize())}static isEmpty(i){return i===255}static embedTimingPatterns(i){for(let o=8;o<i.getWidth()-8;++o){const l=(o+1)%2;x.isEmpty(i.get(o,6))&&i.setNumber(o,6,l),x.isEmpty(i.get(6,o))&&i.setNumber(6,o,l)}}static embedDarkDotAtLeftBottomCorner(i){if(i.get(8,i.getHeight()-8)===0)throw new Lt;i.setNumber(8,i.getHeight()-8,1)}static embedHorizontalSeparationPattern(i,o,l){for(let f=0;f<8;++f){if(!x.isEmpty(l.get(i+f,o)))throw new Lt;l.setNumber(i+f,o,0)}}static embedVerticalSeparationPattern(i,o,l){for(let f=0;f<7;++f){if(!x.isEmpty(l.get(i,o+f)))throw new Lt;l.setNumber(i,o+f,0)}}static embedPositionAdjustmentPattern(i,o,l){for(let f=0;f<5;++f){const d=x.POSITION_ADJUSTMENT_PATTERN[f];for(let m=0;m<5;++m)l.setNumber(i+m,o+f,d[m])}}static embedPositionDetectionPattern(i,o,l){for(let f=0;f<7;++f){const d=x.POSITION_DETECTION_PATTERN[f];for(let m=0;m<7;++m)l.setNumber(i+m,o+f,d[m])}}static embedPositionDetectionPatternsAndSeparators(i){const o=x.POSITION_DETECTION_PATTERN[0].length;x.embedPositionDetectionPattern(0,0,i),x.embedPositionDetectionPattern(i.getWidth()-o,0,i),x.embedPositionDetectionPattern(0,i.getWidth()-o,i);const l=8;x.embedHorizontalSeparationPattern(0,l-1,i),x.embedHorizontalSeparationPattern(i.getWidth()-l,l-1,i),x.embedHorizontalSeparationPattern(0,i.getWidth()-l,i);const f=7;x.embedVerticalSeparationPattern(f,0,i),x.embedVerticalSeparationPattern(i.getHeight()-f-1,0,i),x.embedVerticalSeparationPattern(f,i.getHeight()-f,i)}static maybeEmbedPositionAdjustmentPatterns(i,o){if(i.getVersionNumber()<2)return;const l=i.getVersionNumber()-1,f=x.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let d=0,m=f.length;d!==m;d++){const y=f[d];if(y>=0)for(let A=0;A!==m;A++){const S=f[A];S>=0&&x.isEmpty(o.get(S,y))&&x.embedPositionAdjustmentPattern(S-2,y-2,o)}}}}x.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),x.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),x.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),x.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),x.VERSION_INFO_POLY=7973,x.TYPE_INFO_POLY=1335,x.TYPE_INFO_MASK_PATTERN=21522;class N{constructor(i,o){this.dataBytes=i,this.errorCorrectionBytes=o}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class D{constructor(){}static calculateMaskPenalty(i){return Pt.applyMaskPenaltyRule1(i)+Pt.applyMaskPenaltyRule2(i)+Pt.applyMaskPenaltyRule3(i)+Pt.applyMaskPenaltyRule4(i)}static encode(i,o,l=null){let f=D.DEFAULT_BYTE_MODE_ENCODING;const d=l!==null&&l.get(jn.CHARACTER_SET)!==void 0;d&&(f=l.get(jn.CHARACTER_SET).toString());const m=this.chooseMode(i,f),y=new le;if(m===$e.BYTE&&(d||D.DEFAULT_BYTE_MODE_ENCODING!==f)){const Pe=V.getCharacterSetECIByName(f);Pe!==void 0&&this.appendECI(Pe,y)}this.appendModeInfo(m,y);const A=new le;this.appendBytes(i,m,A,f);let S;if(l!==null&&l.get(jn.QR_VERSION)!==void 0){const Pe=Number.parseInt(l.get(jn.QR_VERSION).toString(),10);S=We.getVersionForNumber(Pe);const Oe=this.calculateBitsNeeded(m,y,A,S);if(!this.willFit(Oe,S,o))throw new Lt("Data too big for requested version")}else S=this.recommendVersion(o,m,y,A);const R=new le;R.appendBitArray(y);const L=m===$e.BYTE?A.getSizeInBytes():i.length;this.appendLengthInfo(L,S,m,R),R.appendBitArray(A);const k=S.getECBlocksForLevel(o),G=S.getTotalCodewords()-k.getTotalECCodewords();this.terminateBits(G,R);const te=this.interleaveWithECBytes(R,S.getTotalCodewords(),G,k.getNumBlocks()),re=new fs;re.setECLevel(o),re.setMode(m),re.setVersion(S);const ue=S.getDimensionForVersion(),ye=new da(ue,ue),ke=this.chooseMaskPattern(te,o,S,ye);return re.setMaskPattern(ke),x.buildMatrix(te,o,S,ke,ye),re.setMatrix(ye),re}static recommendVersion(i,o,l,f){const d=this.calculateBitsNeeded(o,l,f,We.getVersionForNumber(1)),m=this.chooseVersion(d,i),y=this.calculateBitsNeeded(o,l,f,m);return this.chooseVersion(y,i)}static calculateBitsNeeded(i,o,l,f){return o.getSize()+i.getCharacterCountBits(f)+l.getSize()}static getAlphanumericCode(i){return i<D.ALPHANUMERIC_TABLE.length?D.ALPHANUMERIC_TABLE[i]:-1}static chooseMode(i,o=null){if(V.SJIS.getName()===o&&this.isOnlyDoubleByteKanji(i))return $e.KANJI;let l=!1,f=!1;for(let d=0,m=i.length;d<m;++d){const y=i.charAt(d);if(D.isDigit(y))l=!0;else if(this.getAlphanumericCode(y.charCodeAt(0))!==-1)f=!0;else return $e.BYTE}return f?$e.ALPHANUMERIC:l?$e.NUMERIC:$e.BYTE}static isOnlyDoubleByteKanji(i){let o;try{o=Q.encode(i,V.SJIS)}catch{return!1}const l=o.length;if(l%2!==0)return!1;for(let f=0;f<l;f+=2){const d=o[f]&255;if((d<129||d>159)&&(d<224||d>235))return!1}return!0}static chooseMaskPattern(i,o,l,f){let d=Number.MAX_SAFE_INTEGER,m=-1;for(let y=0;y<fs.NUM_MASK_PATTERNS;y++){x.buildMatrix(i,o,l,y,f);let A=this.calculateMaskPenalty(f);A<d&&(d=A,m=y)}return m}static chooseVersion(i,o){for(let l=1;l<=40;l++){const f=We.getVersionForNumber(l);if(D.willFit(i,f,o))return f}throw new Lt("Data too big")}static willFit(i,o,l){const f=o.getTotalCodewords(),m=o.getECBlocksForLevel(l).getTotalECCodewords(),y=f-m,A=(i+7)/8;return y>=A}static terminateBits(i,o){const l=i*8;if(o.getSize()>l)throw new Lt("data bits cannot fit in the QR Code"+o.getSize()+" > "+l);for(let m=0;m<4&&o.getSize()<l;++m)o.appendBit(!1);const f=o.getSize()&7;if(f>0)for(let m=f;m<8;m++)o.appendBit(!1);const d=i-o.getSizeInBytes();for(let m=0;m<d;++m)o.appendBits((m&1)===0?236:17,8);if(o.getSize()!==l)throw new Lt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(i,o,l,f,d,m){if(f>=l)throw new Lt("Block ID too large");const y=i%l,A=l-y,S=Math.floor(i/l),R=S+1,L=Math.floor(o/l),k=L+1,G=S-L,te=R-k;if(G!==te)throw new Lt("EC bytes mismatch");if(l!==A+y)throw new Lt("RS blocks mismatch");if(i!==(L+G)*A+(k+te)*y)throw new Lt("Total bytes mismatch");f<A?(d[0]=L,m[0]=G):(d[0]=k,m[0]=te)}static interleaveWithECBytes(i,o,l,f){if(i.getSizeInBytes()!==l)throw new Lt("Number of bits and data bytes does not match");let d=0,m=0,y=0;const A=new Array;for(let R=0;R<f;++R){const L=new Int32Array(1),k=new Int32Array(1);D.getNumDataBytesAndNumECBytesForBlockID(o,l,f,R,L,k);const G=L[0],te=new Uint8Array(G);i.toBytes(8*d,te,0,G);const re=D.generateECBytes(te,k[0]);A.push(new N(te,re)),m=Math.max(m,G),y=Math.max(y,re.length),d+=L[0]}if(l!==d)throw new Lt("Data bytes does not match offset");const S=new le;for(let R=0;R<m;++R)for(const L of A){const k=L.getDataBytes();R<k.length&&S.appendBits(k[R],8)}for(let R=0;R<y;++R)for(const L of A){const k=L.getErrorCorrectionBytes();R<k.length&&S.appendBits(k[R],8)}if(o!==S.getSizeInBytes())throw new Lt("Interleaving error: "+o+" and "+S.getSizeInBytes()+" differ.");return S}static generateECBytes(i,o){const l=i.length,f=new Int32Array(l+o);for(let m=0;m<l;m++)f[m]=i[m]&255;new hs(ht.QR_CODE_FIELD_256).encode(f,o);const d=new Uint8Array(o);for(let m=0;m<o;m++)d[m]=f[l+m];return d}static appendModeInfo(i,o){o.appendBits(i.getBits(),4)}static appendLengthInfo(i,o,l,f){const d=l.getCharacterCountBits(o);if(i>=1<<d)throw new Lt(i+" is bigger than "+((1<<d)-1));f.appendBits(i,d)}static appendBytes(i,o,l,f){switch(o){case $e.NUMERIC:D.appendNumericBytes(i,l);break;case $e.ALPHANUMERIC:D.appendAlphanumericBytes(i,l);break;case $e.BYTE:D.append8BitBytes(i,l,f);break;case $e.KANJI:D.appendKanjiBytes(i,l);break;default:throw new Lt("Invalid mode: "+o)}}static getDigit(i){return i.charCodeAt(0)-48}static isDigit(i){const o=D.getDigit(i);return o>=0&&o<=9}static appendNumericBytes(i,o){const l=i.length;let f=0;for(;f<l;){const d=D.getDigit(i.charAt(f));if(f+2<l){const m=D.getDigit(i.charAt(f+1)),y=D.getDigit(i.charAt(f+2));o.appendBits(d*100+m*10+y,10),f+=3}else if(f+1<l){const m=D.getDigit(i.charAt(f+1));o.appendBits(d*10+m,7),f+=2}else o.appendBits(d,4),f++}}static appendAlphanumericBytes(i,o){const l=i.length;let f=0;for(;f<l;){const d=D.getAlphanumericCode(i.charCodeAt(f));if(d===-1)throw new Lt;if(f+1<l){const m=D.getAlphanumericCode(i.charCodeAt(f+1));if(m===-1)throw new Lt;o.appendBits(d*45+m,11),f+=2}else o.appendBits(d,6),f++}}static append8BitBytes(i,o,l){let f;try{f=Q.encode(i,l)}catch(d){throw new Lt(d)}for(let d=0,m=f.length;d!==m;d++){const y=f[d];o.appendBits(y,8)}}static appendKanjiBytes(i,o){let l;try{l=Q.encode(i,V.SJIS)}catch(d){throw new Lt(d)}const f=l.length;for(let d=0;d<f;d+=2){const m=l[d]&255,y=l[d+1]&255,A=m<<8&4294967295|y;let S=-1;if(A>=33088&&A<=40956?S=A-33088:A>=57408&&A<=60351&&(S=A-49472),S===-1)throw new Lt("Invalid byte sequence");const R=(S>>8)*192+(S&255);o.appendBits(R,13)}}static appendECI(i,o){o.appendBits($e.ECI.getBits(),4),o.appendBits(i.getValue(),8)}}D.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),D.DEFAULT_BYTE_MODE_ENCODING=V.UTF8.getName();class F{write(i,o,l,f=null){if(i.length===0)throw new I("Found empty contents");if(o<0||l<0)throw new I("Requested dimensions are too small: "+o+"x"+l);let d=Et.L,m=F.QUIET_ZONE_SIZE;f!==null&&(f.get(jn.ERROR_CORRECTION)!==void 0&&(d=Et.fromString(f.get(jn.ERROR_CORRECTION).toString())),f.get(jn.MARGIN)!==void 0&&(m=Number.parseInt(f.get(jn.MARGIN).toString(),10)));const y=D.encode(i,d,f);return this.renderResult(y,o,l,m)}writeToDom(i,o,l,f,d=null){typeof i=="string"&&(i=document.querySelector(i));const m=this.write(o,l,f,d);i&&i.appendChild(m)}renderResult(i,o,l,f){const d=i.getMatrix();if(d===null)throw new ir;const m=d.getWidth(),y=d.getHeight(),A=m+f*2,S=y+f*2,R=Math.max(o,A),L=Math.max(l,S),k=Math.min(Math.floor(R/A),Math.floor(L/S)),G=Math.floor((R-m*k)/2),te=Math.floor((L-y*k)/2),re=this.createSVGElement(R,L);for(let ue=0,ye=te;ue<y;ue++,ye+=k)for(let ke=0,Pe=G;ke<m;ke++,Pe+=k)if(d.get(ke,ue)===1){const Oe=this.createSvgRectElement(Pe,ye,k,k);re.appendChild(Oe)}return re}createSVGElement(i,o){const l=document.createElementNS(F.SVG_NS,"svg");return l.setAttributeNS(null,"height",i.toString()),l.setAttributeNS(null,"width",o.toString()),l}createSvgRectElement(i,o,l,f){const d=document.createElementNS(F.SVG_NS,"rect");return d.setAttributeNS(null,"x",i.toString()),d.setAttributeNS(null,"y",o.toString()),d.setAttributeNS(null,"height",l.toString()),d.setAttributeNS(null,"width",f.toString()),d.setAttributeNS(null,"fill","#000000"),d}}F.QUIET_ZONE_SIZE=4,F.SVG_NS="http://www.w3.org/2000/svg";class ce{encode(i,o,l,f,d){if(i.length===0)throw new I("Found empty contents");if(o!==Le.QR_CODE)throw new I("Can only encode QR_CODE, but got "+o);if(l<0||f<0)throw new I(`Requested dimensions are too small: ${l}x${f}`);let m=Et.L,y=ce.QUIET_ZONE_SIZE;d!==null&&(d.get(jn.ERROR_CORRECTION)!==void 0&&(m=Et.fromString(d.get(jn.ERROR_CORRECTION).toString())),d.get(jn.MARGIN)!==void 0&&(y=Number.parseInt(d.get(jn.MARGIN).toString(),10)));const A=D.encode(i,m,d);return ce.renderResult(A,l,f,y)}static renderResult(i,o,l,f){const d=i.getMatrix();if(d===null)throw new ir;const m=d.getWidth(),y=d.getHeight(),A=m+f*2,S=y+f*2,R=Math.max(o,A),L=Math.max(l,S),k=Math.min(Math.floor(R/A),Math.floor(L/S)),G=Math.floor((R-m*k)/2),te=Math.floor((L-y*k)/2),re=new Je(R,L);for(let ue=0,ye=te;ue<y;ue++,ye+=k)for(let ke=0,Pe=G;ke<m;ke++,Pe+=k)d.get(ke,ue)===1&&re.setRegion(Pe,ye,k,k);return re}}ce.QUIET_ZONE_SIZE=4;class Ee{encode(i,o,l,f,d){let m;switch(o){case Le.QR_CODE:m=new ce;break;default:throw new I("No encoder available for format "+o)}return m.encode(i,o,l,f,d)}}class Be extends Ye{constructor(i,o,l,f,d,m,y,A){if(super(m,y),this.yuvData=i,this.dataWidth=o,this.dataHeight=l,this.left=f,this.top=d,f+m>o||d+y>l)throw new I("Crop rectangle does not fit within image data.");A&&this.reverseHorizontal(m,y)}getRow(i,o){if(i<0||i>=this.getHeight())throw new I("Requested row is outside the image: "+i);const l=this.getWidth();(o==null||o.length<l)&&(o=new Uint8ClampedArray(l));const f=(i+this.top)*this.dataWidth+this.left;return $.arraycopy(this.yuvData,f,o,0,l),o}getMatrix(){const i=this.getWidth(),o=this.getHeight();if(i===this.dataWidth&&o===this.dataHeight)return this.yuvData;const l=i*o,f=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return $.arraycopy(this.yuvData,d,f,0,l),f;for(let m=0;m<o;m++){const y=m*i;$.arraycopy(this.yuvData,d,f,y,i),d+=this.dataWidth}return f}isCropSupported(){return!0}crop(i,o,l,f){return new Be(this.yuvData,this.dataWidth,this.dataHeight,this.left+i,this.top+o,l,f,!1)}renderThumbnail(){const i=this.getWidth()/Be.THUMBNAIL_SCALE_FACTOR,o=this.getHeight()/Be.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(i*o),f=this.yuvData;let d=this.top*this.dataWidth+this.left;for(let m=0;m<o;m++){const y=m*i;for(let A=0;A<i;A++){const S=f[d+A*Be.THUMBNAIL_SCALE_FACTOR]&255;l[y+A]=4278190080|S*65793}d+=this.dataWidth*Be.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/Be.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Be.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(i,o){const l=this.yuvData;for(let f=0,d=this.top*this.dataWidth+this.left;f<o;f++,d+=this.dataWidth){const m=d+i/2;for(let y=d,A=d+i-1;y<m;y++,A--){const S=l[y];l[y]=l[A],l[A]=S}}}invert(){return new gt(this)}}Be.THUMBNAIL_SCALE_FACTOR=2;class pt extends Ye{constructor(i,o,l,f,d,m,y){if(super(o,l),this.dataWidth=f,this.dataHeight=d,this.left=m,this.top=y,i.BYTES_PER_ELEMENT===4){const A=o*l,S=new Uint8ClampedArray(A);for(let R=0;R<A;R++){const L=i[R],k=L>>16&255,G=L>>7&510,te=L&255;S[R]=(k+G+te)/4&255}this.luminances=S}else this.luminances=i;if(f===void 0&&(this.dataWidth=o),d===void 0&&(this.dataHeight=l),m===void 0&&(this.left=0),y===void 0&&(this.top=0),this.left+o>this.dataWidth||this.top+l>this.dataHeight)throw new I("Crop rectangle does not fit within image data.")}getRow(i,o){if(i<0||i>=this.getHeight())throw new I("Requested row is outside the image: "+i);const l=this.getWidth();(o==null||o.length<l)&&(o=new Uint8ClampedArray(l));const f=(i+this.top)*this.dataWidth+this.left;return $.arraycopy(this.luminances,f,o,0,l),o}getMatrix(){const i=this.getWidth(),o=this.getHeight();if(i===this.dataWidth&&o===this.dataHeight)return this.luminances;const l=i*o,f=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return $.arraycopy(this.luminances,d,f,0,l),f;for(let m=0;m<o;m++){const y=m*i;$.arraycopy(this.luminances,d,f,y,i),d+=this.dataWidth}return f}isCropSupported(){return!0}crop(i,o,l,f){return new pt(this.luminances,l,f,this.dataWidth,this.dataHeight,this.left+i,this.top+o)}invert(){return new gt(this)}}class Fn extends V{static forName(i){return this.getCharacterSetECIByName(i)}}class Qt{}Qt.ISO_8859_1=V.ISO8859_1;class Cn{isCompact(){return this.compact}setCompact(i){this.compact=i}getSize(){return this.size}setSize(i){this.size=i}getLayers(){return this.layers}setLayers(i){this.layers=i}getCodeWords(){return this.codeWords}setCodeWords(i){this.codeWords=i}getMatrix(){return this.matrix}setMatrix(i){this.matrix=i}}class mi{static singletonList(i){return[i]}static min(i,o){return i.sort(o)[0]}}class ds{constructor(i){this.previous=i}getPrevious(){return this.previous}}class Mr extends ds{constructor(i,o,l){super(i),this.value=o,this.bitCount=l}appendTo(i,o){i.appendBits(this.value,this.bitCount)}add(i,o){return new Mr(this,i,o)}addBinaryShift(i,o){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Mr(this,i,o)}toString(){let i=this.value&(1<<this.bitCount)-1;return i|=1<<this.bitCount,"<"+K.toBinaryString(i|1<<this.bitCount).substring(1)+">"}}class pi extends Mr{constructor(i,o,l){super(i,0,0),this.binaryShiftStart=o,this.binaryShiftByteCount=l}appendTo(i,o){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(i.appendBits(31,5),this.binaryShiftByteCount>62?i.appendBits(this.binaryShiftByteCount-31,16):l===0?i.appendBits(Math.min(this.binaryShiftByteCount,31),5):i.appendBits(this.binaryShiftByteCount-31,5)),i.appendBits(o[this.binaryShiftStart+l],8)}addBinaryShift(i,o){return new pi(this,i,o)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function ga(P,i,o){return new pi(P,i,o)}function gs(P,i,o){return new Mr(P,i,o)}const eo=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Fs=0,Pl=1,Si=2,Gc=3,Fi=4,$o=new Mr(null,0,0),ma=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function u0(P){for(let i of P)ae.fill(i,-1);return P[Fs][Fi]=0,P[Pl][Fi]=0,P[Pl][Fs]=28,P[Gc][Fi]=0,P[Si][Fi]=0,P[Si][Fs]=15,P}const el=u0(ae.createInt32Array(6,6));class zi{constructor(i,o,l,f){this.token=i,this.mode=o,this.binaryShiftByteCount=l,this.bitCount=f}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(i,o){let l=this.bitCount,f=this.token;if(i!==this.mode){let m=ma[this.mode][i];f=gs(f,m&65535,m>>16),l+=m>>16}let d=i===Si?4:5;return f=gs(f,o,d),new zi(f,i,0,l+d)}shiftAndAppend(i,o){let l=this.token,f=this.mode===Si?4:5;return l=gs(l,el[this.mode][i],f),l=gs(l,o,5),new zi(l,this.mode,0,this.bitCount+f+5)}addBinaryShiftChar(i){let o=this.token,l=this.mode,f=this.bitCount;if(this.mode===Fi||this.mode===Si){let y=ma[l][Fs];o=gs(o,y&65535,y>>16),f+=y>>16,l=Fs}let d=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,m=new zi(o,l,this.binaryShiftByteCount+1,f+d);return m.binaryShiftByteCount===2078&&(m=m.endBinaryShift(i+1)),m}endBinaryShift(i){if(this.binaryShiftByteCount===0)return this;let o=this.token;return o=ga(o,i-this.binaryShiftByteCount,this.binaryShiftByteCount),new zi(o,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(i){let o=this.bitCount+(ma[this.mode][i.mode]>>16);return this.binaryShiftByteCount<i.binaryShiftByteCount?o+=zi.calculateBinaryShiftCost(i)-zi.calculateBinaryShiftCost(this):this.binaryShiftByteCount>i.binaryShiftByteCount&&i.binaryShiftByteCount>0&&(o+=10),o<=i.bitCount}toBitArray(i){let o=[];for(let f=this.endBinaryShift(i.length).token;f!==null;f=f.getPrevious())o.unshift(f);let l=new le;for(const f of o)f.appendTo(l,i);return l}toString(){return Z.format("%s bits=%d bytes=%d",eo[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(i){return i.binaryShiftByteCount>62?21:i.binaryShiftByteCount>31?20:i.binaryShiftByteCount>0?10:0}}zi.INITIAL_STATE=new zi($o,Fs,0,0);function wh(P){const i=Z.getCharCode(" "),o=Z.getCharCode("."),l=Z.getCharCode(",");P[Fs][i]=1;const f=Z.getCharCode("Z"),d=Z.getCharCode("A");for(let k=d;k<=f;k++)P[Fs][k]=k-d+2;P[Pl][i]=1;const m=Z.getCharCode("z"),y=Z.getCharCode("a");for(let k=y;k<=m;k++)P[Pl][k]=k-y+2;P[Si][i]=1;const A=Z.getCharCode("9"),S=Z.getCharCode("0");for(let k=S;k<=A;k++)P[Si][k]=k-S+2;P[Si][l]=12,P[Si][o]=13;const R=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let k=0;k<R.length;k++)P[Gc][Z.getCharCode(R[k])]=k;const L=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let k=0;k<L.length;k++)Z.getCharCode(L[k])>0&&(P[Fi][Z.getCharCode(L[k])]=k);return P}const tl=wh(ae.createInt32Array(5,256));class pa{constructor(i){this.text=i}encode(){const i=Z.getCharCode(" "),o=Z.getCharCode(`
`);let l=mi.singletonList(zi.INITIAL_STATE);for(let d=0;d<this.text.length;d++){let m,y=d+1<this.text.length?this.text[d+1]:0;switch(this.text[d]){case Z.getCharCode("\r"):m=y===o?2:0;break;case Z.getCharCode("."):m=y===i?3:0;break;case Z.getCharCode(","):m=y===i?4:0;break;case Z.getCharCode(":"):m=y===i?5:0;break;default:m=0}m>0?(l=pa.updateStateListForPair(l,d,m),d++):l=this.updateStateListForChar(l,d)}return mi.min(l,(d,m)=>d.getBitCount()-m.getBitCount()).toBitArray(this.text)}updateStateListForChar(i,o){const l=[];for(let f of i)this.updateStateForChar(f,o,l);return pa.simplifyStates(l)}updateStateForChar(i,o,l){let f=this.text[o]&255,d=tl[i.getMode()][f]>0,m=null;for(let y=0;y<=Fi;y++){let A=tl[y][f];if(A>0){if(m==null&&(m=i.endBinaryShift(o)),!d||y===i.getMode()||y===Si){const S=m.latchAndAppend(y,A);l.push(S)}if(!d&&el[i.getMode()][y]>=0){const S=m.shiftAndAppend(y,A);l.push(S)}}}if(i.getBinaryShiftByteCount()>0||tl[i.getMode()][f]===0){let y=i.addBinaryShiftChar(o);l.push(y)}}static updateStateListForPair(i,o,l){const f=[];for(let d of i)this.updateStateForPair(d,o,l,f);return this.simplifyStates(f)}static updateStateForPair(i,o,l,f){let d=i.endBinaryShift(o);if(f.push(d.latchAndAppend(Fi,l)),i.getMode()!==Fi&&f.push(d.shiftAndAppend(Fi,l)),l===3||l===4){let m=d.latchAndAppend(Si,16-l).latchAndAppend(Si,1);f.push(m)}if(i.getBinaryShiftByteCount()>0){let m=i.addBinaryShiftChar(o).addBinaryShiftChar(o+1);f.push(m)}}static simplifyStates(i){let o=[];for(const l of i){let f=!0;for(const d of o){if(d.isBetterThanOrEqualTo(l)){f=!1;break}l.isBetterThanOrEqualTo(d)&&(o=o.filter(m=>m!==d))}f&&o.push(l)}return o}}class Vt{constructor(){}static encodeBytes(i){return Vt.encode(i,Vt.DEFAULT_EC_PERCENT,Vt.DEFAULT_AZTEC_LAYERS)}static encode(i,o,l){let f=new pa(i).encode(),d=K.truncDivision(f.getSize()*o,100)+11,m=f.getSize()+d,y,A,S,R,L;if(l!==Vt.DEFAULT_AZTEC_LAYERS){if(y=l<0,A=Math.abs(l),A>(y?Vt.MAX_NB_BITS_COMPACT:Vt.MAX_NB_BITS))throw new I(Z.format("Illegal value %s for layers",l));S=Vt.totalBitsInLayer(A,y),R=Vt.WORD_SIZE[A];let Oe=S-S%R;if(L=Vt.stuffBits(f,R),L.getSize()+d>Oe)throw new I("Data to large for user specified layer");if(y&&L.getSize()>R*64)throw new I("Data to large for user specified layer")}else{R=0,L=null;for(let Oe=0;;Oe++){if(Oe>Vt.MAX_NB_BITS)throw new I("Data too large for an Aztec code");if(y=Oe<=3,A=y?Oe+1:Oe,S=Vt.totalBitsInLayer(A,y),m>S)continue;(L==null||R!==Vt.WORD_SIZE[A])&&(R=Vt.WORD_SIZE[A],L=Vt.stuffBits(f,R));let Rt=S-S%R;if(!(y&&L.getSize()>R*64)&&L.getSize()+d<=Rt)break}}let k=Vt.generateCheckWords(L,S,R),G=L.getSize()/R,te=Vt.generateModeMessage(y,A,G),re=(y?11:14)+A*4,ue=new Int32Array(re),ye;if(y){ye=re;for(let Oe=0;Oe<ue.length;Oe++)ue[Oe]=Oe}else{ye=re+1+2*K.truncDivision(K.truncDivision(re,2)-1,15);let Oe=K.truncDivision(re,2),Rt=K.truncDivision(ye,2);for(let yt=0;yt<Oe;yt++){let Zn=yt+K.truncDivision(yt,15);ue[Oe-yt-1]=Rt-Zn-1,ue[Oe+yt]=Rt+Zn+1}}let ke=new Je(ye);for(let Oe=0,Rt=0;Oe<A;Oe++){let yt=(A-Oe)*4+(y?9:12);for(let Zn=0;Zn<yt;Zn++){let Ci=Zn*2;for(let Vr=0;Vr<2;Vr++)k.get(Rt+Ci+Vr)&&ke.set(ue[Oe*2+Vr],ue[Oe*2+Zn]),k.get(Rt+yt*2+Ci+Vr)&&ke.set(ue[Oe*2+Zn],ue[re-1-Oe*2-Vr]),k.get(Rt+yt*4+Ci+Vr)&&ke.set(ue[re-1-Oe*2-Vr],ue[re-1-Oe*2-Zn]),k.get(Rt+yt*6+Ci+Vr)&&ke.set(ue[re-1-Oe*2-Zn],ue[Oe*2+Vr])}Rt+=yt*8}if(Vt.drawModeMessage(ke,y,ye,te),y)Vt.drawBullsEye(ke,K.truncDivision(ye,2),5);else{Vt.drawBullsEye(ke,K.truncDivision(ye,2),7);for(let Oe=0,Rt=0;Oe<K.truncDivision(re,2)-1;Oe+=15,Rt+=16)for(let yt=K.truncDivision(ye,2)&1;yt<ye;yt+=2)ke.set(K.truncDivision(ye,2)-Rt,yt),ke.set(K.truncDivision(ye,2)+Rt,yt),ke.set(yt,K.truncDivision(ye,2)-Rt),ke.set(yt,K.truncDivision(ye,2)+Rt)}let Pe=new Cn;return Pe.setCompact(y),Pe.setSize(ye),Pe.setLayers(A),Pe.setCodeWords(G),Pe.setMatrix(ke),Pe}static drawBullsEye(i,o,l){for(let f=0;f<l;f+=2)for(let d=o-f;d<=o+f;d++)i.set(d,o-f),i.set(d,o+f),i.set(o-f,d),i.set(o+f,d);i.set(o-l,o-l),i.set(o-l+1,o-l),i.set(o-l,o-l+1),i.set(o+l,o-l),i.set(o+l,o-l+1),i.set(o+l,o+l-1)}static generateModeMessage(i,o,l){let f=new le;return i?(f.appendBits(o-1,2),f.appendBits(l-1,6),f=Vt.generateCheckWords(f,28,4)):(f.appendBits(o-1,5),f.appendBits(l-1,11),f=Vt.generateCheckWords(f,40,4)),f}static drawModeMessage(i,o,l,f){let d=K.truncDivision(l,2);if(o)for(let m=0;m<7;m++){let y=d-3+m;f.get(m)&&i.set(y,d-5),f.get(m+7)&&i.set(d+5,y),f.get(20-m)&&i.set(y,d+5),f.get(27-m)&&i.set(d-5,y)}else for(let m=0;m<10;m++){let y=d-5+m+K.truncDivision(m,5);f.get(m)&&i.set(y,d-7),f.get(m+10)&&i.set(d+7,y),f.get(29-m)&&i.set(y,d+7),f.get(39-m)&&i.set(d-7,y)}}static generateCheckWords(i,o,l){let f=i.getSize()/l,d=new hs(Vt.getGF(l)),m=K.truncDivision(o,l),y=Vt.bitsToWords(i,l,m);d.encode(y,m-f);let A=o%l,S=new le;S.appendBits(0,A);for(const R of Array.from(y))S.appendBits(R,l);return S}static bitsToWords(i,o,l){let f=new Int32Array(l),d,m;for(d=0,m=i.getSize()/o;d<m;d++){let y=0;for(let A=0;A<o;A++)y|=i.get(d*o+A)?1<<o-A-1:0;f[d]=y}return f}static getGF(i){switch(i){case 4:return ht.AZTEC_PARAM;case 6:return ht.AZTEC_DATA_6;case 8:return ht.AZTEC_DATA_8;case 10:return ht.AZTEC_DATA_10;case 12:return ht.AZTEC_DATA_12;default:throw new I("Unsupported word size "+i)}}static stuffBits(i,o){let l=new le,f=i.getSize(),d=(1<<o)-2;for(let m=0;m<f;m+=o){let y=0;for(let A=0;A<o;A++)(m+A>=f||i.get(m+A))&&(y|=1<<o-1-A);(y&d)===d?(l.appendBits(y&d,o),m--):(y&d)===0?(l.appendBits(y|1,o),m--):l.appendBits(y,o)}return l}static totalBitsInLayer(i,o){return((o?88:112)+16*i)*i}}Vt.DEFAULT_EC_PERCENT=33,Vt.DEFAULT_AZTEC_LAYERS=0,Vt.MAX_NB_BITS=32,Vt.MAX_NB_BITS_COMPACT=4,Vt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class nl{encode(i,o,l,f){return this.encodeWithHints(i,o,l,f,null)}encodeWithHints(i,o,l,f,d){let m=Qt.ISO_8859_1,y=Vt.DEFAULT_EC_PERCENT,A=Vt.DEFAULT_AZTEC_LAYERS;return d!=null&&(d.has(jn.CHARACTER_SET)&&(m=Fn.forName(d.get(jn.CHARACTER_SET).toString())),d.has(jn.ERROR_CORRECTION)&&(y=K.parseInt(d.get(jn.ERROR_CORRECTION).toString())),d.has(jn.AZTEC_LAYERS)&&(A=K.parseInt(d.get(jn.AZTEC_LAYERS).toString()))),nl.encodeLayers(i,o,l,f,m,y,A)}static encodeLayers(i,o,l,f,d,m,y){if(o!==Le.AZTEC)throw new I("Can only encode AZTEC, but got "+o);let A=Vt.encode(Z.getBytes(i,d),m,y);return nl.renderResult(A,l,f)}static renderResult(i,o,l){let f=i.getMatrix();if(f==null)throw new ir;let d=f.getWidth(),m=f.getHeight(),y=Math.max(o,d),A=Math.max(l,m),S=Math.min(y/d,A/m),R=(y-d*S)/2,L=(A-m*S)/2,k=new Je(y,A);for(let G=0,te=L;G<m;G++,te+=S)for(let re=0,ue=R;re<d;re++,ue+=S)f.get(re,G)&&k.setRegion(ue,te,S,S);return k}}t.AbstractExpandedDecoder=vn,t.ArgumentException=C,t.ArithmeticException=ui,t.AztecCode=Cn,t.AztecCodeReader=ss,t.AztecCodeWriter=nl,t.AztecDecoder=qt,t.AztecDetector=vs,t.AztecDetectorResult=rs,t.AztecEncoder=Vt,t.AztecHighLevelEncoder=pa,t.AztecPoint=Tn,t.BarcodeFormat=Le,t.Binarizer=X,t.BinaryBitmap=M,t.BitArray=le,t.BitMatrix=Je,t.BitSource=Ge,t.BrowserAztecCodeReader=ra,t.BrowserBarcodeReader=aa,t.BrowserCodeReader=Ue,t.BrowserDatamatrixCodeReader=bi,t.BrowserMultiFormatReader=us,t.BrowserPDF417Reader=Dl,t.BrowserQRCodeReader=Ml,t.BrowserQRCodeSvgWriter=F,t.CharacterSetECI=V,t.ChecksumException=B,t.Code128Reader=Me,t.Code39Reader=Xt,t.DataMatrixDecodedBitStreamParser=Gn,t.DataMatrixReader=Or,t.DecodeHintType=De,t.DecoderResult=Jt,t.DefaultGridSampler=is,t.DetectorResult=Ts,t.EAN13Reader=on,t.EncodeHintType=jn,t.Exception=E,t.FormatException=j,t.GenericGF=ht,t.GenericGFPoly=Bn,t.GlobalHistogramBinarizer=me,t.GridSampler=Qr,t.GridSamplerInstance=hr,t.HTMLCanvasElementLuminanceSource=ut,t.HybridBinarizer=be,t.ITFReader=at,t.IllegalArgumentException=I,t.IllegalStateException=ir,t.InvertedLuminanceSource=gt,t.LuminanceSource=Ye,t.MathUtils=et,t.MultiFormatOneDReader=Sr,t.MultiFormatReader=Jo,t.MultiFormatWriter=Ee,t.NotFoundException=fe,t.OneDReader=Yt,t.PDF417DecodedBitStreamParser=xe,t.PDF417DecoderErrorCorrection=Bi,t.PDF417Reader=Vn,t.PDF417ResultMetadata=Cs,t.PerspectiveTransform=ur,t.PlanarYUVLuminanceSource=Be,t.QRCodeByteMatrix=da,t.QRCodeDataMask=ar,t.QRCodeDecodedBitStreamParser=un,t.QRCodeDecoderErrorCorrectionLevel=Et,t.QRCodeDecoderFormatInformation=nn,t.QRCodeEncoder=D,t.QRCodeEncoderQRCode=fs,t.QRCodeMaskUtil=Pt,t.QRCodeMatrixUtil=x,t.QRCodeMode=$e,t.QRCodeReader=ii,t.QRCodeVersion=We,t.QRCodeWriter=ce,t.RGBLuminanceSource=pt,t.RSS14Reader=Kt,t.RSSExpandedReader=Ie,t.ReaderException=fa,t.ReedSolomonDecoder=Kr,t.ReedSolomonEncoder=hs,t.ReedSolomonException=rr,t.Result=Ve,t.ResultMetadataType=Ct,t.ResultPoint=Fe,t.StringUtils=Z,t.UnsupportedOperationException=Y,t.VideoInputDevice=ie,t.WhiteRectangleDetector=pn,t.WriterException=Lt,t.ZXingArrays=ae,t.ZXingCharset=Fn,t.ZXingInteger=K,t.ZXingStandardCharsets=Qt,t.ZXingStringBuilder=W,t.ZXingStringEncoding=Q,t.ZXingSystem=$,t.createAbstractExpandedDecoder=Rr,Object.defineProperty(t,"__esModule",{value:!0})}))})(ku,ku.exports)),ku.exports}var Ln=KM();const QM=um(Ln),ZM=KS({__proto__:null,default:QM},[Ln]);var Uw=(function(){function n(e,t,s){if(this.formatMap=new Map([[Xe.QR_CODE,Ln.BarcodeFormat.QR_CODE],[Xe.AZTEC,Ln.BarcodeFormat.AZTEC],[Xe.CODABAR,Ln.BarcodeFormat.CODABAR],[Xe.CODE_39,Ln.BarcodeFormat.CODE_39],[Xe.CODE_93,Ln.BarcodeFormat.CODE_93],[Xe.CODE_128,Ln.BarcodeFormat.CODE_128],[Xe.DATA_MATRIX,Ln.BarcodeFormat.DATA_MATRIX],[Xe.MAXICODE,Ln.BarcodeFormat.MAXICODE],[Xe.ITF,Ln.BarcodeFormat.ITF],[Xe.EAN_13,Ln.BarcodeFormat.EAN_13],[Xe.EAN_8,Ln.BarcodeFormat.EAN_8],[Xe.PDF_417,Ln.BarcodeFormat.PDF_417],[Xe.RSS_14,Ln.BarcodeFormat.RSS_14],[Xe.RSS_EXPANDED,Ln.BarcodeFormat.RSS_EXPANDED],[Xe.UPC_A,Ln.BarcodeFormat.UPC_A],[Xe.UPC_E,Ln.BarcodeFormat.UPC_E],[Xe.UPC_EAN_EXTENSION,Ln.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!ZM)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=s;var c=this.createZXingFormats(e),h=new Map;h.set(Ln.DecodeHintType.POSSIBLE_FORMATS,c),h.set(Ln.DecodeHintType.TRY_HARDER,!1),this.hints=h}return n.prototype.decodeAsync=function(e){var t=this;return new Promise(function(s,c){try{s(t.decode(e))}catch(h){c(h)}})},n.prototype.decode=function(e){var t=new Ln.MultiFormatReader(this.verbose,this.hints),s=new Ln.HTMLCanvasElementLuminanceSource(e),c=new Ln.BinaryBitmap(new Ln.HybridBinarizer(s)),h=t.decode(c);return{text:h.text,format:Iv.create(this.toHtml5QrcodeSupportedFormats(h.format)),debugData:this.createDebugData()}},n.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,s,c){e.set(t,s)}),e},n.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},n.prototype.createZXingFormats=function(e){for(var t=[],s=0,c=e;s<c.length;s++){var h=c[s];this.formatMap.has(h)?t.push(this.formatMap.get(h)):this.logger.logError("".concat(h," is not supported by")+"ZXingHtml5QrcodeShim")}return t},n.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},n})(),JM=function(n,e,t,s){function c(h){return h instanceof t?h:new t(function(p){p(h)})}return new(t||(t=Promise))(function(h,p){function T(C){try{E(s.next(C))}catch(I){p(I)}}function w(C){try{E(s.throw(C))}catch(I){p(I)}}function E(C){C.done?h(C.value):c(C.value).then(T,w)}E((s=s.apply(n,e||[])).next())})},$M=function(n,e){var t={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},s,c,h,p;return p={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function T(E){return function(C){return w([E,C])}}function w(E){if(s)throw new TypeError("Generator is already executing.");for(;p&&(p=0,E[0]&&(t=0)),t;)try{if(s=1,c&&(h=E[0]&2?c.return:E[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,E[1])).done)return h;switch(c=0,h&&(E=[E[0]&2,h.value]),E[0]){case 0:case 1:h=E;break;case 4:return t.label++,{value:E[1],done:!1};case 5:t.label++,c=E[1],E=[0];continue;case 7:E=t.ops.pop(),t.trys.pop();continue;default:if(h=t.trys,!(h=h.length>0&&h[h.length-1])&&(E[0]===6||E[0]===2)){t=0;continue}if(E[0]===3&&(!h||E[1]>h[0]&&E[1]<h[3])){t.label=E[1];break}if(E[0]===6&&t.label<h[1]){t.label=h[1],h=E;break}if(h&&t.label<h[2]){t.label=h[2],t.ops.push(E);break}h[2]&&t.ops.pop(),t.trys.pop();continue}E=e.call(n,t)}catch(C){E=[6,C],c=0}finally{s=h=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},Vw=(function(){function n(e,t,s){if(this.formatMap=new Map([[Xe.QR_CODE,"qr_code"],[Xe.AZTEC,"aztec"],[Xe.CODABAR,"codabar"],[Xe.CODE_39,"code_39"],[Xe.CODE_93,"code_93"],[Xe.CODE_128,"code_128"],[Xe.DATA_MATRIX,"data_matrix"],[Xe.ITF,"itf"],[Xe.EAN_13,"ean_13"],[Xe.EAN_8,"ean_8"],[Xe.PDF_417,"pdf417"],[Xe.UPC_A,"upc_a"],[Xe.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!n.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=t,this.logger=s;var c=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(c),!this.detector)throw"BarcodeDetector detector not supported"}return n.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},n.prototype.decodeAsync=function(e){return JM(this,void 0,void 0,function(){var t,s;return $M(this,function(c){switch(c.label){case 0:return[4,this.detector.detect(e)];case 1:if(t=c.sent(),!t||t.length===0)throw"No barcode or QR code detected.";return s=this.selectLargestBarcode(t),[2,{text:s.rawValue,format:Iv.create(this.toHtml5QrcodeSupportedFormats(s.format)),debugData:this.createDebugData()}]}})})},n.prototype.selectLargestBarcode=function(e){for(var t=null,s=0,c=0,h=e;c<h.length;c++){var p=h[c],T=p.boundingBox.width*p.boundingBox.height;T>s&&(s=T,t=p)}if(!t)throw"No largest barcode found";return t},n.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],s=0,c=e;s<c.length;s++){var h=c[s];this.formatMap.has(h)?t.push(this.formatMap.get(h)):this.logger.warn("".concat(h," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},n.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},n.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,s,c){e.set(t,s)}),e},n.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},n})(),jw=function(n,e,t,s){function c(h){return h instanceof t?h:new t(function(p){p(h)})}return new(t||(t=Promise))(function(h,p){function T(C){try{E(s.next(C))}catch(I){p(I)}}function w(C){try{E(s.throw(C))}catch(I){p(I)}}function E(C){C.done?h(C.value):c(C.value).then(T,w)}E((s=s.apply(n,e||[])).next())})},Fw=function(n,e){var t={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},s,c,h,p;return p={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function T(E){return function(C){return w([E,C])}}function w(E){if(s)throw new TypeError("Generator is already executing.");for(;p&&(p=0,E[0]&&(t=0)),t;)try{if(s=1,c&&(h=E[0]&2?c.return:E[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,E[1])).done)return h;switch(c=0,h&&(E=[E[0]&2,h.value]),E[0]){case 0:case 1:h=E;break;case 4:return t.label++,{value:E[1],done:!1};case 5:t.label++,c=E[1],E=[0];continue;case 7:E=t.ops.pop(),t.trys.pop();continue;default:if(h=t.trys,!(h=h.length>0&&h[h.length-1])&&(E[0]===6||E[0]===2)){t=0;continue}if(E[0]===3&&(!h||E[1]>h[0]&&E[1]<h[3])){t.label=E[1];break}if(E[0]===6&&t.label<h[1]){t.label=h[1],h=E;break}if(h&&t.label<h[2]){t.label=h[2],t.ops.push(E);break}h[2]&&t.ops.pop(),t.trys.pop();continue}E=e.call(n,t)}catch(C){E=[6,C],c=0}finally{s=h=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},e9=(function(){function n(e,t,s,c){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=s,t&&Vw.isSupported()?(this.primaryDecoder=new Vw(e,s,c),this.secondaryDecoder=new Uw(e,s,c)):this.primaryDecoder=new Uw(e,s,c)}return n.prototype.decodeAsync=function(e){return jw(this,void 0,void 0,function(){var t;return Fw(this,function(s){switch(s.label){case 0:t=performance.now(),s.label=1;case 1:return s.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,s.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},n.prototype.decodeRobustlyAsync=function(e){return jw(this,void 0,void 0,function(){var t,s;return Fw(this,function(c){switch(c.label){case 0:t=performance.now(),c.label=1;case 1:return c.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,c.sent()];case 3:if(s=c.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw s;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},n.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},n.prototype.possiblyLogPerformance=function(e){if(this.verbose){var t=performance.now()-e;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},n.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,s=this.executionResults;t<s.length;t++){var c=s[t];e+=c}var h=e/this.executionResults.length;console.log("".concat(h," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},n})(),_p=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(s[h]=c[h])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function s(){this.constructor=e}e.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}})(),Md=function(n,e,t,s){function c(h){return h instanceof t?h:new t(function(p){p(h)})}return new(t||(t=Promise))(function(h,p){function T(C){try{E(s.next(C))}catch(I){p(I)}}function w(C){try{E(s.throw(C))}catch(I){p(I)}}function E(C){C.done?h(C.value):c(C.value).then(T,w)}E((s=s.apply(n,e||[])).next())})},Pd=function(n,e){var t={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},s,c,h,p;return p={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function T(E){return function(C){return w([E,C])}}function w(E){if(s)throw new TypeError("Generator is already executing.");for(;p&&(p=0,E[0]&&(t=0)),t;)try{if(s=1,c&&(h=E[0]&2?c.return:E[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,E[1])).done)return h;switch(c=0,h&&(E=[E[0]&2,h.value]),E[0]){case 0:case 1:h=E;break;case 4:return t.label++,{value:E[1],done:!1};case 5:t.label++,c=E[1],E=[0];continue;case 7:E=t.ops.pop(),t.trys.pop();continue;default:if(h=t.trys,!(h=h.length>0&&h[h.length-1])&&(E[0]===6||E[0]===2)){t=0;continue}if(E[0]===3&&(!h||E[1]>h[0]&&E[1]<h[3])){t.label=E[1];break}if(E[0]===6&&t.label<h[1]){t.label=h[1],h=E;break}if(h&&t.label<h[2]){t.label=h[2],t.ops.push(E);break}h[2]&&t.ops.pop(),t.trys.pop();continue}E=e.call(n,t)}catch(C){E=[6,C],c=0}finally{s=h=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},Rv=(function(){function n(e,t){this.name=e,this.track=t}return n.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},n.prototype.apply=function(e){var t={};t[this.name]=e;var s={advanced:[t]};return this.track.applyConstraints(s)},n.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var t=e[this.name];return t}return null},n})(),t9=(function(n){_p(e,n);function e(t,s){return n.call(this,t,s)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(t){var s={};s[this.name]=t;var c={advanced:[s]};return this.track.applyConstraints(c)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var t=this.track.getCapabilities(),s=t[this.name];return{min:s.min,max:s.max,step:s.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e})(Rv),n9=(function(n){_p(e,n);function e(t){return n.call(this,"zoom",t)||this}return e})(t9),r9=(function(n){_p(e,n);function e(t){return n.call(this,"torch",t)||this}return e})(Rv),i9=(function(){function n(e){this.track=e}return n.prototype.zoomFeature=function(){return new n9(this.track)},n.prototype.torchFeature=function(){return new r9(this.track)},n})(),s9=(function(){function n(e,t,s){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=s,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return n.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width="".concat(e,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},n.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var s=e.surface.clientWidth,c=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(s,c),e.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},n.create=function(e,t,s,c){return Md(this,void 0,void 0,function(){var h,p;return Pd(this,function(T){switch(T.label){case 0:return h=new n(e,t,c),s.aspectRatio?(p={aspectRatio:s.aspectRatio},[4,h.getFirstTrackOrFail().applyConstraints(p)]):[3,2];case 1:T.sent(),T.label=2;case 2:return h.setupSurface(),[2,h]}})})},n.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},n.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},n.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},n.prototype.resume=function(e){this.failIfClosed();var t=this,s=function(){setTimeout(e,200),t.surface.removeEventListener("playing",s)};this.surface.addEventListener("playing",s),this.surface.play()},n.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},n.prototype.getSurface=function(){return this.failIfClosed(),this.surface},n.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},n.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},n.prototype.applyVideoConstraints=function(e){return Md(this,void 0,void 0,function(){return Pd(this,function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},n.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(t,s){var c=e.mediaStream.getVideoTracks(),h=c.length,p=0;e.mediaStream.getVideoTracks().forEach(function(T){e.mediaStream.removeTrack(T),T.stop(),++p,p>=h&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())})})},n.prototype.getCapabilities=function(){return new i9(this.getFirstTrackOrFail())},n})(),a9=(function(){function n(e){this.mediaStream=e}return n.prototype.render=function(e,t,s){return Md(this,void 0,void 0,function(){return Pd(this,function(c){return[2,s9.create(e,this.mediaStream,t,s)]})})},n.create=function(e){return Md(this,void 0,void 0,function(){var t,s;return Pd(this,function(c){switch(c.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return t={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(t)];case 1:return s=c.sent(),[2,new n(s)]}})})},n})(),zw=function(n,e,t,s){function c(h){return h instanceof t?h:new t(function(p){p(h)})}return new(t||(t=Promise))(function(h,p){function T(C){try{E(s.next(C))}catch(I){p(I)}}function w(C){try{E(s.throw(C))}catch(I){p(I)}}function E(C){C.done?h(C.value):c(C.value).then(T,w)}E((s=s.apply(n,e||[])).next())})},Hw=function(n,e){var t={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},s,c,h,p;return p={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function T(E){return function(C){return w([E,C])}}function w(E){if(s)throw new TypeError("Generator is already executing.");for(;p&&(p=0,E[0]&&(t=0)),t;)try{if(s=1,c&&(h=E[0]&2?c.return:E[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,E[1])).done)return h;switch(c=0,h&&(E=[E[0]&2,h.value]),E[0]){case 0:case 1:h=E;break;case 4:return t.label++,{value:E[1],done:!1};case 5:t.label++,c=E[1],E=[0];continue;case 7:E=t.ops.pop(),t.trys.pop();continue;default:if(h=t.trys,!(h=h.length>0&&h[h.length-1])&&(E[0]===6||E[0]===2)){t=0;continue}if(E[0]===3&&(!h||E[1]>h[0]&&E[1]<h[3])){t.label=E[1];break}if(E[0]===6&&t.label<h[1]){t.label=h[1],h=E;break}if(h&&t.label<h[2]){t.label=h[2],t.ops.push(E);break}h[2]&&t.ops.pop(),t.trys.pop();continue}E=e.call(n,t)}catch(C){E=[6,C],c=0}finally{s=h=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},o9=(function(){function n(){}return n.failIfNotSupported=function(){return zw(this,void 0,void 0,function(){return Hw(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new n]})})},n.prototype.create=function(e){return zw(this,void 0,void 0,function(){return Hw(this,function(t){return[2,a9.create(e)]})})},n})(),l9=function(n,e,t,s){function c(h){return h instanceof t?h:new t(function(p){p(h)})}return new(t||(t=Promise))(function(h,p){function T(C){try{E(s.next(C))}catch(I){p(I)}}function w(C){try{E(s.throw(C))}catch(I){p(I)}}function E(C){C.done?h(C.value):c(C.value).then(T,w)}E((s=s.apply(n,e||[])).next())})},c9=function(n,e){var t={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},s,c,h,p;return p={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function T(E){return function(C){return w([E,C])}}function w(E){if(s)throw new TypeError("Generator is already executing.");for(;p&&(p=0,E[0]&&(t=0)),t;)try{if(s=1,c&&(h=E[0]&2?c.return:E[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,E[1])).done)return h;switch(c=0,h&&(E=[E[0]&2,h.value]),E[0]){case 0:case 1:h=E;break;case 4:return t.label++,{value:E[1],done:!1};case 5:t.label++,c=E[1],E=[0];continue;case 7:E=t.ops.pop(),t.trys.pop();continue;default:if(h=t.trys,!(h=h.length>0&&h[h.length-1])&&(E[0]===6||E[0]===2)){t=0;continue}if(E[0]===3&&(!h||E[1]>h[0]&&E[1]<h[3])){t.label=E[1];break}if(E[0]===6&&t.label<h[1]){t.label=h[1],h=E;break}if(h&&t.label<h[2]){t.label=h[2],t.ops.push(E);break}h[2]&&t.ops.pop(),t.trys.pop();continue}E=e.call(n,t)}catch(C){E=[6,C],c=0}finally{s=h=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},u9=(function(){function n(){}return n.retrieve=function(){if(navigator.mediaDevices)return n.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?n.getCamerasFromMediaStreamTrack():n.rejectWithError()},n.rejectWithError=function(){var e=xc.unableToQuerySupportedDevices();return n.isHttpsOrLocalhost()||(e=xc.insecureContextCameraQueryError()),Promise.reject(e)},n.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},n.getCamerasFromMediaDevices=function(){return l9(this,void 0,void 0,function(){var e,t,s,c,h,p,T;return c9(this,function(w){switch(w.label){case 0:return e=function(E){for(var C=E.getVideoTracks(),I=0,M=C;I<M.length;I++){var B=M[I];B.enabled=!1,B.stop(),E.removeTrack(B)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=w.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(s=w.sent(),c=[],h=0,p=s;h<p.length;h++)T=p[h],T.kind==="videoinput"&&c.push({id:T.deviceId,label:T.label});return e(t),[2,c]}})})},n.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,t){var s=function(h){for(var p=[],T=0,w=h;T<w.length;T++){var E=w[T];E.kind==="video"&&p.push({id:E.id,label:E.label})}e(p)},c=MediaStreamTrack;c.getSources(s)})},n})(),tr;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.NOT_STARTED=1]="NOT_STARTED",n[n.SCANNING=2]="SCANNING",n[n.PAUSED=3]="PAUSED"})(tr||(tr={}));var h9=(function(){function n(){this.state=tr.NOT_STARTED,this.onGoingTransactionNewState=tr.UNKNOWN}return n.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},n.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},n.prototype.execute=function(){if(this.onGoingTransactionNewState===tr.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=tr.UNKNOWN,this.directTransition(e)},n.prototype.cancel=function(){if(this.onGoingTransactionNewState===tr.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=tr.UNKNOWN},n.prototype.getState=function(){return this.state},n.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==tr.UNKNOWN)throw"Cannot transition to a new state, already under transition"},n.prototype.validateTransition=function(e){switch(this.state){case tr.UNKNOWN:throw"Transition from unknown is not allowed";case tr.NOT_STARTED:this.failIfNewStateIs(e,[tr.PAUSED]);break;case tr.SCANNING:break;case tr.PAUSED:break}},n.prototype.failIfNewStateIs=function(e,t){for(var s=0,c=t;s<c.length;s++){var h=c[s];if(e===h)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},n})(),f9=(function(){function n(e){this.stateManager=e}return n.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},n.prototype.directTransition=function(e){this.stateManager.directTransition(e)},n.prototype.getState=function(){return this.stateManager.getState()},n.prototype.canScanFile=function(){return this.stateManager.getState()===tr.NOT_STARTED},n.prototype.isScanning=function(){return this.stateManager.getState()!==tr.NOT_STARTED},n.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===tr.SCANNING},n.prototype.isPaused=function(){return this.stateManager.getState()===tr.PAUSED},n})(),d9=(function(){function n(){}return n.create=function(){return new f9(new h9)},n})(),g9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(s[h]=c[h])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function s(){this.constructor=e}e.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}})(),Ki=(function(n){g9(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e})(qM),m9=(function(){function n(e,t){this.logger=t,this.fps=Ki.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Ki.DEFAULT_DISABLE_FLIP}return n.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Nv.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},n.prototype.isShadedBoxEnabled=function(){return!Ma(this.qrbox)},n.create=function(e,t){return new n(e,t)},n})(),p9=(function(){function n(e,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var s;typeof t=="boolean"?this.verbose=t===!0:t&&(s=t,this.verbose=s.verbose===!0,s.experimentalFeatures),this.logger=new XM(this.verbose),this.qrcode=new e9(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(s),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=d9.create()}return n.prototype.start=function(e,t,s,c){var h=this;if(!e)throw"cameraIdOrConfig is required";if(!s||typeof s!="function")throw"qrCodeSuccessCallback is required and should be a function.";var p;c?p=c:p=this.verbose?this.logger.log:function(){};var T=m9.create(t,this.logger);this.clearElement();var w=!1;T.videoConstraints&&(T.isMediaStreamConstraintsValid()?w=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var E=w,C=document.getElementById(this.elementId);C.clientWidth?C.clientWidth:Ki.DEFAULT_WIDTH,C.style.position="relative",this.shouldScan=!0,this.element=C;var I=this,M=this.stateManagerProxy.startTransition(tr.SCANNING);return new Promise(function(B,X){var $=E?T.videoConstraints:I.createVideoConstraints(e);if(!$){M.cancel(),X("videoConstraints should be defined");return}var q={};(!E||T.aspectRatio)&&(q.aspectRatio=T.aspectRatio);var _e={onRenderSurfaceReady:function(ae,K){I.setupUi(ae,K,T),I.isScanning=!0,I.foreverScan(T,s,p)}};o9.failIfNotSupported().then(function(ae){ae.create($).then(function(K){return K.render(h.element,q,_e).then(function(le){I.renderedCamera=le,M.execute(),B(null)}).catch(function(le){M.cancel(),X(le)})}).catch(function(K){M.cancel(),X(xc.errorGettingUserMedia(K))})}).catch(function(ae){M.cancel(),X(xc.cameraStreamingNotSupported())})})},n.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(tr.PAUSED),this.showPausedState(),(Ma(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},n.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,t=function(){e.stateManagerProxy.directTransition(tr.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){t();return}this.renderedCamera.resume(function(){t()})},n.prototype.getState=function(){return this.stateManagerProxy.getState()},n.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(tr.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var s=function(){if(e.element){var h=document.getElementById(Ki.SHADED_REGION_ELEMENT_ID);h&&e.element.removeChild(h)}},c=this;return this.renderedCamera.close().then(function(){return c.renderedCamera=null,c.element&&(c.element.removeChild(c.canvasElement),c.canvasElement=null),s(),c.qrRegion&&(c.qrRegion=null),c.context&&(c.context=null),t.execute(),c.hidePausedState(),c.isScanning=!1,Promise.resolve()})},n.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then(function(s){return s.decodedText})},n.prototype.scanFileV2=function(e,t){var s=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Ma(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(c,h){s.possiblyCloseLastScanImageFile(),s.clearElement(),s.lastScanImageFile=URL.createObjectURL(e);var p=new Image;p.onload=function(){var T=p.width,w=p.height,E=document.getElementById(s.elementId),C=E.clientWidth?E.clientWidth:Ki.DEFAULT_WIDTH,I=Math.max(E.clientHeight?E.clientHeight:w,Ki.FILE_SCAN_MIN_HEIGHT),M=s.computeCanvasDrawConfig(T,w,C,I);if(t){var B=s.createCanvasElement(C,I,"qr-canvas-visible");B.style.display="inline-block",E.appendChild(B);var X=B.getContext("2d");if(!X)throw"Unable to get 2d context from canvas";X.canvas.width=C,X.canvas.height=I,X.drawImage(p,0,0,T,w,M.x,M.y,M.width,M.height)}var $=Ki.FILE_SCAN_HIDDEN_CANVAS_PADDING,q=Math.max(p.width,M.width),_e=Math.max(p.height,M.height),ae=q+2*$,K=_e+2*$,le=s.createCanvasElement(ae,K);E.appendChild(le);var Re=le.getContext("2d");if(!Re)throw"Unable to get 2d context from canvas";Re.canvas.width=ae,Re.canvas.height=K,Re.drawImage(p,0,0,T,w,$,$,q,_e);try{s.qrcode.decodeRobustlyAsync(le).then(function(De){c(kw.createFromQrcodeResult(De))}).catch(h)}catch(De){h("QR code parse error, error = ".concat(De))}},p.onerror=h,p.onabort=h,p.onstalled=h,p.onsuspend=h,p.src=URL.createObjectURL(e)})},n.prototype.clear=function(){this.clearElement()},n.getCameras=function(){return u9.retrieve()},n.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},n.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},n.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},n.prototype.applyVideoConstraints=function(e){if(e){if(!Nv.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},n.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},n.prototype.getSupportedFormats=function(e){var t=[Xe.QR_CODE,Xe.AZTEC,Xe.CODABAR,Xe.CODE_39,Xe.CODE_93,Xe.CODE_128,Xe.DATA_MATRIX,Xe.MAXICODE,Xe.ITF,Xe.EAN_13,Xe.EAN_8,Xe.PDF_417,Xe.RSS_14,Xe.RSS_EXPANDED,Xe.UPC_A,Xe.UPC_E,Xe.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var s=[],c=0,h=e.formatsToSupport;c<h.length;c++){var p=h[c];GM(p)?s.push(p):this.logger.warn("Invalid format: ".concat(p," passed in config, ignoring."))}if(s.length===0)throw"None of formatsToSupport match supported values.";return s},n.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Ma(e))return!0;if(!Ma(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(Ma(e.experimentalFeatures))return!0;var t=e.experimentalFeatures;return Ma(t.useBarCodeDetectorIfSupported)?!0:t.useBarCodeDetectorIfSupported!==!1},n.prototype.validateQrboxSize=function(e,t,s){var c=this,h=s.qrbox;this.validateQrboxConfig(h);var p=this.toQrdimensions(e,t,h),T=function(E){if(E<Ki.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Ki.MIN_QR_BOX_SIZE,"px.")},w=function(E){return E>e&&(c.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),E=e),E};T(p.width),T(p.height),p.width=w(p.width)},n.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},n.prototype.toQrdimensions=function(e,t,s){if(typeof s=="number")return{width:s,height:s};if(typeof s=="function")try{return s(e,t)}catch(c){throw new Error("qrbox config was passed as a function but it failed with unknown error"+c)}return s},n.prototype.setupUi=function(e,t,s){s.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,s);var c=Ma(s.qrbox)?{width:e,height:t}:s.qrbox;this.validateQrboxConfig(c);var h=this.toQrdimensions(e,t,c);h.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var p=s.isShadedBoxEnabled()&&h.height<=t,T={x:0,y:0,width:e,height:t},w=p?this.getShadedRegionBounds(e,t,h):T,E=this.createCanvasElement(w.width,w.height),C={willReadFrequently:!0},I=E.getContext("2d",C);I.canvas.width=w.width,I.canvas.height=w.height,this.element.append(E),p&&this.possiblyInsertShadingElement(this.element,e,t,h),this.createScannerPausedUiElement(this.element),this.qrRegion=w,this.context=I,this.canvasElement=E},n.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText=xc.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},n.prototype.scanContext=function(e,t){var s=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(c){return e(c.text,kw.createFromQrcodeResult(c)),s.possiblyUpdateShaders(!0),!0}).catch(function(c){s.possiblyUpdateShaders(!1);var h=xc.codeParseError(c);return t(h,YM.createFrom(h)),!1})},n.prototype.foreverScan=function(e,t,s){var c=this;if(this.shouldScan&&this.renderedCamera){var h=this.renderedCamera.getSurface(),p=h.videoWidth/h.clientWidth,T=h.videoHeight/h.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var w=this.qrRegion.width*p,E=this.qrRegion.height*T,C=this.qrRegion.x*p,I=this.qrRegion.y*T;this.context.drawImage(h,C,I,w,E,0,0,this.qrRegion.width,this.qrRegion.height);var M=function(){c.foreverScanTimeout=setTimeout(function(){c.foreverScan(e,t,s)},c.getTimeoutFps(e.fps))};this.scanContext(t,s).then(function(B){!B&&e.disableFlip!==!0?(c.context.translate(c.context.canvas.width,0),c.context.scale(-1,1),c.scanContext(t,s).finally(function(){M()})):M()}).catch(function(B){c.logger.logError("Error happend while scanning context",B),M()})}},n.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var t="facingMode",s="deviceId",c={user:!0,environment:!0},h="exact",p=function(X){if(X in c)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(X,"'")},T=Object.keys(e);if(T.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(T.length," keys");var w=Object.keys(e)[0];if(w!==t&&w!==s)throw"Only '".concat(t,"' and '").concat(s,"' ")+" are supported for 'cameraIdOrConfig'";if(w===t){var E=e.facingMode;if(typeof E=="string"){if(p(E))return{facingMode:E}}else if(typeof E=="object")if(h in E){if(p(E["".concat(h)]))return{facingMode:{exact:E["".concat(h)]}}}else throw"'facingMode' should be string or object with"+" ".concat(h," as key.");else{var C=typeof E;throw"Invalid type of 'facingMode' = ".concat(C)}}else{var I=e.deviceId;if(typeof I=="string")return{deviceId:I};if(typeof I=="object"){if(h in I)return{deviceId:{exact:I["".concat(h)]}};throw"'deviceId' should be string or object with"+" ".concat(h," as key.")}else{var M=typeof I;throw"Invalid type of 'deviceId' = ".concat(M)}}}var B=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(B)},n.prototype.computeCanvasDrawConfig=function(e,t,s,c){if(e<=s&&t<=c){var h=(s-e)/2,p=(c-t)/2;return{x:h,y:p,width:e,height:t}}else{var T=e,w=t;return e>s&&(t=s/e*t,e=s),t>c&&(e=c/t*e,t=c),this.logger.log("Image downsampled from "+"".concat(T,"X").concat(w)+" to ".concat(e,"X").concat(t,".")),this.computeCanvasDrawConfig(e,t,s,c)}},n.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},n.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=e?Ki.BORDER_SHADER_MATCH_COLOR:Ki.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},n.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},n.prototype.createCanvasElement=function(e,t,s){var c=e,h=t,p=document.createElement("canvas");return p.style.width="".concat(c,"px"),p.style.height="".concat(h,"px"),p.style.display="none",p.id=Ma(s)?"qr-canvas":s,p},n.prototype.getShadedRegionBounds=function(e,t,s){if(s.width>e||s.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-s.width)/2,y:(t-s.height)/2,width:s.width,height:s.height}},n.prototype.possiblyInsertShadingElement=function(e,t,s,c){if(!(t-c.width<1||s-c.height<1)){var h=document.createElement("div");h.style.position="absolute";var p=(t-c.width)/2,T=(s-c.height)/2;if(h.style.borderLeft="".concat(p,"px solid rgba(0, 0, 0, 0.48)"),h.style.borderRight="".concat(p,"px solid rgba(0, 0, 0, 0.48)"),h.style.borderTop="".concat(T,"px solid rgba(0, 0, 0, 0.48)"),h.style.borderBottom="".concat(T,"px solid rgba(0, 0, 0, 0.48)"),h.style.boxSizing="border-box",h.style.top="0px",h.style.bottom="0px",h.style.left="0px",h.style.right="0px",h.id="".concat(Ki.SHADED_REGION_ELEMENT_ID),t-c.width<11||s-c.height<11)this.hasBorderShaders=!1;else{var w=5,E=40;this.insertShaderBorders(h,E,w,-w,null,0,!0),this.insertShaderBorders(h,E,w,-w,null,0,!1),this.insertShaderBorders(h,E,w,null,-w,0,!0),this.insertShaderBorders(h,E,w,null,-w,0,!1),this.insertShaderBorders(h,w,E+w,-w,null,-w,!0),this.insertShaderBorders(h,w,E+w,null,-w,-w,!0),this.insertShaderBorders(h,w,E+w,-w,null,-w,!1),this.insertShaderBorders(h,w,E+w,null,-w,-w,!1),this.hasBorderShaders=!0}e.append(h)}},n.prototype.insertShaderBorders=function(e,t,s,c,h,p,T){var w=document.createElement("div");w.style.position="absolute",w.style.backgroundColor=Ki.BORDER_SHADER_DEFAULT_COLOR,w.style.width="".concat(t,"px"),w.style.height="".concat(s,"px"),c!==null&&(w.style.top="".concat(c,"px")),h!==null&&(w.style.bottom="".concat(h,"px")),T?w.style.left="".concat(p,"px"):w.style.right="".concat(p,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(w),e.appendChild(w)},n.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},n.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},n.prototype.getTimeoutFps=function(e){return 1e3/e},n})(),Gw;(function(n){n[n.STATUS_DEFAULT=0]="STATUS_DEFAULT",n[n.STATUS_SUCCESS=1]="STATUS_SUCCESS",n[n.STATUS_WARNING=2]="STATUS_WARNING",n[n.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Gw||(Gw={}));const x9=({onRefresh:n})=>{var bt;const{showAlert:e}=Lc(),[t,s]=ne.useState("roster"),[c,h]=ne.useState(!1),[p,T]=ne.useState(!1),[w,E]=ne.useState([]),[C,I]=ne.useState([]),[M,B]=ne.useState([]),[X,$]=ne.useState([]),[q,_e]=ne.useState([]),[ae,K]=ne.useState([]),[le,Re]=ne.useState([]),[De,j]=ne.useState([]),[z,V]=ne.useState(""),[Y,Q]=ne.useState(new Date().toISOString().substring(0,7)),[Z,W]=ne.useState(""),[Je,fe]=ne.useState([]),[me,be]=ne.useState([]),[Ye,gt]=ne.useState(""),[ut,ie]=ne.useState(null),Ae=nr.useRef(w);nr.useEffect(()=>{Ae.current=w},[w]);const[Ue,Ve]=ne.useState(""),[st,Le]=ne.useState(""),[St,Ct]=ne.useState("normal"),[Jt,Wr]=ne.useState(""),[Bn,ui]=ne.useState(!1),[ht,rr]=ne.useState(""),[ir,Kr]=ne.useState("100"),[mn,qt]=ne.useState(""),[et,bn]=ne.useState(""),[Fe,Ts]=ne.useState(!1),[rs,pn]=ne.useState(""),[Qr,ur]=ne.useState(""),[is,hr]=ne.useState(""),[Tn,vs]=ne.useState(""),[ss,ra]=ne.useState(""),[Yt,Me]=ne.useState(""),[Xt,at]=ne.useState(!1),[cn,hi]=ne.useState(null),[as,Zr]=ne.useState(""),[Tt,on]=ne.useState(""),[Jr,$r]=ne.useState("center"),[Nn,Ls]=ne.useState("h-48"),[Un,fr]=ne.useState("md:h-72"),[fi,Br]=ne.useState(!1),[os,ei]=ne.useState(null),[Li,On]=ne.useState(""),[dr,vr]=ne.useState(!1);ne.useEffect(()=>{const J=GD(Qn=>{I(Qn.filter(nn=>nn.role===ea.STUDENT&&nn.isApproved)),B(Qn.filter(nn=>nn.role===ea.STUDENT&&!nn.isApproved));const Et=Qn.filter(nn=>nn.role===ea.STUDENT&&nn.isApproved);Et.length>0&&!ht&&rr(Et[0].id)}),ze=KT(E),Ge=XT($),Ze=YT(_e),Gn=VD(K),ls=WT(Re),tt=qT(j),Or=GT(Qn=>{fe(Qn),Qn.length>0&&!Tn&&vs(Qn[0].name)}),bi=xp(be);return()=>{J(),ze(),Ge(),Ze(),Gn(),ls(),tt(),Or(),bi()}},[ht,Tn]),ne.useEffect(()=>{let J=null;return(async()=>{if(t==="scan")try{J=new p9("reader"),await J.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250},aspectRatio:1},Ge=>{Ge&&je(Ge)},()=>{})}catch(Ge){console.error("Unable to start scanner",Ge)}})(),()=>{J&&J.isScanning&&J.stop().then(()=>{J==null||J.clear()}).catch(Ge=>console.error("Failed to stop scanner",Ge))}},[t]);const je=J=>{if(ut)return;const ze=Ae.current.find(Ge=>Ge.qrCodeData===J&&Ge.status==="pending");ze&&ie(ze)},gr=async J=>{const ze=Ye;if(!ze){e("","error");return}h(!0),setTimeout(()=>{const Ge=w.find(Ze=>Ze.qrCodeData===ze&&Ze.status==="pending");Ge?(ie(Ge),gt("")):e("","error"),h(!1)},800)},vn=async J=>{ut&&(await TD(J,"completed"),ie(null),e("","success"))},Wt=async()=>{if(p)return;const J=parseInt(ir);if(!(isNaN(J)||!ht)){T(!0);try{console.log(`[Points] Issuing ${J} to ${ht}...`),await _D(ht,J),Kr("");const ze=C.find(Ge=>Ge.id===ht);e(` ${(ze==null?void 0:ze.name)||""} ${J} `,"success")}catch(ze){console.error("[Points] Error:",ze),e(`: ${ze.message}`,"error")}finally{T(!1)}}},mr=J=>new Promise((ze,Ge)=>{const Ze=new FileReader;Ze.onload=()=>ze(Ze.result),Ze.onerror=Ge,Ze.readAsDataURL(J)}),ki=async J=>{var Ge;const ze=(Ge=J.target.files)==null?void 0:Ge[0];if(ze){if(ze.size>500*1024){e(" 500KB ","error");return}try{const Ze=await mr(ze);ra(Ze),hi(Ze)}catch{e("","error")}}},ks=async J=>{var Ge;const ze=(Ge=J.target.files)==null?void 0:Ge[0];if(ze){if(ze.size>500*1024){e(" 500KB ","error");return}try{const Ze=await mr(ze);Zr(Ze),ei(Ze)}catch{e("","error")}}},Ur=async(J,ze)=>{const Ge={...J,grade:ze};await tm(Ge),e(` ${J.name}  ${ze}`,"success")},ia=async(J,ze,Ge)=>{const Ze=parseInt(Ge);if(isNaN(Ze))return;const Gn={...J,[ze]:Ze};await tm(Gn)},Ai=async J=>{await ED(J),e("","success")},pr=async J=>{confirm("/")&&await wD(J)},xn=async J=>{if(J.preventDefault(),!rs||!Qr||!is){e("","error");return}if(rs&&Qr){const ze={id:`prod_${Date.now()}`,name:rs,category:Tn,price:parseInt(Qr),description:Yt||`${Tn==="food"?"":Tn==="electronic"?"":Tn==="ticket"?"":""}`,imageUrl:ss||"https://images.unsplash.com/photo-1553456558-aff63285bdd1?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3",stock:parseInt(is)||99};await PD(ze),at(!1),pn(""),ur(""),hr(""),ra(""),hi(null),vs("other"),Me(""),e("","success")}},Ot=async J=>{window.confirm("")&&await kD(J)},Rr=async J=>{if(J.preventDefault(),!Ue||!st){e("","error");return}const ze={id:`m_${Date.now()}`,title:Ue,description:"",points:parseInt(st),type:St,isActive:!0,maxAttempts:1,deadline:Jt?new Date(Jt).getTime():void 0};await CD(ze),ui(!1),Ve(""),Le(""),Ct("normal"),Wr(""),e("","success")},sr=async J=>{if(window.confirm(""))try{await zD(J),e("","success")}catch(ze){e(`: ${ze.message}`,"error")}},Rn=async()=>{if(!et){e("","error");return}await BD({id:`r_${Date.now()}`,title:et}),bn(""),Ts(!1),e("","success")},Ie=async J=>{await UD(J)},sa=async J=>{await ID(J)},Kt=async(J,ze)=>{await LD(J,ze),e("","success")},Sr=async J=>{try{await DD(J),e("","success")}catch(ze){e(`: ${ze.message||""}`,"error")}},aa=async J=>{confirm("")&&await MD(J)},Mt=w.filter(J=>{var ls,tt;const ze=(((ls=J.productName)==null?void 0:ls.toLowerCase())||"").includes(z.toLowerCase())||(((tt=J.id)==null?void 0:tt.toLowerCase())||"").includes(z.toLowerCase()),Ge=new Date(J.timestamp),Gn=`${Ge.getFullYear()}-${String(Ge.getMonth()+1).padStart(2,"0")}`===Y;return ze&&Gn}),Dt=J=>Uo.reduce((ze,Ge)=>J>=Ge.threshold?Ge:ze,Uo[0]);return v.jsxs("div",{className:"space-y-8 pb-20 animate-in fade-in duration-500",children:[v.jsx("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:v.jsxs("div",{children:[v.jsxs("h1",{className:"text-4xl font-black text-slate-800 flex items-center gap-4",children:[v.jsx("div",{className:"bg-indigo-600 p-3 rounded-2xl text-white shadow-xl shadow-indigo-100",children:v.jsx(rd,{size:32})}),""]}),v.jsx("p",{className:"text-slate-500 mt-2 italic font-medium",children:""})]})}),v.jsxs("div",{className:"flex bg-white p-2 rounded-3xl border border-slate-100 shadow-md overflow-x-auto gap-2",children:[v.jsxs("button",{onClick:()=>s("roster"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${t==="roster"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[v.jsx(iN,{size:18})," ",v.jsx("span",{children:""})]}),v.jsxs("button",{onClick:()=>s("approval"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${t==="approval"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50 relative"}`,children:[v.jsx(Ig,{size:18})," ",v.jsx("span",{children:""}),M.length>0&&v.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full text-white text-[10px] flex items-center justify-center border-2 border-white",children:M.length})]}),v.jsxs("button",{onClick:()=>s("points"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${t==="points"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[v.jsx(o3,{size:18})," ",v.jsx("span",{children:""})]}),v.jsxs("button",{onClick:()=>s("products"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${t==="products"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[v.jsx(Sg,{size:18})," ",v.jsx("span",{children:""})]}),v.jsxs("button",{onClick:()=>s("banners"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${t==="banners"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[v.jsx(zy,{size:18})," ",v.jsx("span",{children:""})]}),v.jsxs("button",{onClick:()=>s("mission_approval"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${t==="mission_approval"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50 relative"}`,children:[v.jsx(Wu,{size:18})," ",v.jsx("span",{children:""}),De.filter(J=>J.status==="pending").length>0&&v.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-pink-500 rounded-full text-white text-[10px] flex items-center justify-center border-2 border-white",children:De.filter(J=>J.status==="pending").length})]}),v.jsxs("button",{onClick:()=>s("scan"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${t==="scan"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[v.jsx(Tg,{size:18})," ",v.jsx("span",{children:""})]}),v.jsxs("button",{onClick:()=>s("history"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${t==="history"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[v.jsx(nd,{size:18})," ",v.jsx("span",{children:""})]}),v.jsxs("button",{onClick:()=>s("missions"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${t==="missions"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[v.jsx(Bu,{size:18})," ",v.jsx("span",{children:""})]}),v.jsxs("button",{onClick:()=>s("wishes"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${t==="wishes"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50 relative"}`,children:[v.jsx(Hf,{size:18})," ",v.jsx("span",{children:""}),le.length>0&&v.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-pink-500 rounded-full text-white text-[10px] flex items-center justify-center border-2 border-white",children:le.length})]})]}),t==="roster"&&v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 animate-in slide-in-from-bottom-4",children:C.map(J=>{const ze=Dt(J.totalEarned);return v.jsxs("div",{className:"bg-white rounded-[2.5rem] p-8 border border-slate-100 shadow-sm hover:shadow-xl transition-all group overflow-hidden relative",children:[v.jsx("div",{className:`absolute top-0 right-0 w-24 h-24 ${ze.color} opacity-5 -translate-y-12 translate-x-12 rounded-full`}),v.jsxs("div",{className:"flex flex-col items-center text-center",children:[v.jsxs("div",{className:"relative mb-6",children:[v.jsx("div",{className:`absolute inset-0 rounded-full blur-xl opacity-20 ${ze.color}`}),v.jsx("img",{src:J.avatar,className:"w-24 h-24 rounded-full border-4 border-white shadow-2xl relative z-10 object-cover",alt:J.name}),v.jsx("div",{className:"absolute -bottom-2 -right-2 w-10 h-10 rounded-2xl bg-white shadow-lg flex items-center justify-center text-xl z-20 border border-slate-50",children:ze.icon})]}),v.jsx("h3",{className:"text-2xl font-black text-slate-800 mb-1",children:J.name}),v.jsx("div",{className:`px-4 py-1 rounded-full text-[10px] font-black text-white uppercase tracking-widest mb-2 ${ze.color} shadow-sm`,children:ze.name}),v.jsx("div",{className:"mb-6",children:v.jsx("select",{value:J.grade||"",onChange:Ge=>Ur(J,Ge.target.value),className:"text-xs font-bold text-slate-500 bg-slate-50 border border-slate-100 rounded-lg px-2 py-1 outline-none pointer-events-auto",children:em.map(Ge=>v.jsx("option",{value:Ge,children:Ge},Ge))})}),v.jsxs("div",{className:"w-full grid grid-cols-2 gap-4",children:[v.jsxs("div",{className:"bg-indigo-50/50 p-4 rounded-2xl border border-indigo-50",children:[v.jsx("p",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest mb-1",children:""}),v.jsx("input",{type:"number",defaultValue:J.points,onBlur:Ge=>ia(J,"points",Ge.target.value),className:"w-full bg-transparent text-xl font-black text-indigo-600 focus:outline-none"})]}),v.jsxs("div",{className:"bg-amber-50/50 p-4 rounded-2xl border border-amber-50",children:[v.jsx("p",{className:"text-[10px] font-black text-amber-400 uppercase tracking-widest mb-1",children:""}),v.jsx("input",{type:"number",defaultValue:J.totalEarned,onBlur:Ge=>ia(J,"totalEarned",Ge.target.value),className:"w-full bg-transparent text-xl font-black text-amber-600 focus:outline-none"})]})]})]}),v.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-50 flex justify-between items-center gap-4",children:[v.jsxs("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-tighter truncate max-w-[80px]",children:["ID: ",J.id.replace("user_","")]}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsxs("button",{onClick:()=>{rr(J.id),s("points")},className:"text-indigo-600 font-black text-xs hover:underline flex items-center gap-1",children:[v.jsx(Fy,{size:14})," "]}),v.jsx("button",{onClick:()=>pr(J.id),className:"text-slate-300 hover:text-rose-500 transition-colors",title:"",children:v.jsx(If,{size:16})})]})]})]},J.id)})}),t==="points"&&v.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[v.jsxs("div",{className:"flex items-center gap-6 mb-12",children:[v.jsx("div",{className:"w-20 h-20 bg-emerald-50 text-emerald-600 rounded-3xl flex items-center justify-center shadow-inner",children:v.jsx(Fy,{size:40})}),v.jsxs("div",{children:[v.jsx("h2",{className:"text-3xl font-black text-slate-800 tracking-tight",children:""}),v.jsx("p",{className:"text-slate-400 font-medium",children:""})]})]}),v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16",children:[v.jsxs("div",{className:"space-y-8",children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("span",{className:"text-[10px] font-bold text-slate-400",children:":"}),v.jsxs("select",{value:Z,onChange:J=>W(J.target.value),className:"text-[10px] font-bold text-slate-600 bg-slate-50 border border-slate-200 rounded-lg px-2 py-1 outline-none",children:[v.jsx("option",{value:"",children:""}),em.map(J=>v.jsx("option",{value:J,children:J},J))]})]})]}),v.jsx("div",{className:"grid grid-cols-3 gap-4 max-h-[400px] overflow-y-auto p-2",children:C.filter(J=>Z===""||J.grade===Z).map(J=>v.jsxs("button",{onClick:()=>rr(J.id),className:`flex flex-col items-center gap-3 p-4 rounded-3xl border-2 transition-all ${ht===J.id?"border-indigo-600 bg-indigo-50 shadow-lg shadow-indigo-100":"border-slate-50 bg-slate-50/50 hover:bg-white hover:border-slate-200"}`,children:[v.jsx("img",{src:J.avatar,className:"w-12 h-12 rounded-full shadow-sm",alt:J.name}),v.jsx("span",{className:`font-black text-sm ${ht===J.id?"text-indigo-600":"text-slate-600"}`,children:J.name})]},J.id))})]}),v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),v.jsxs("button",{onClick:()=>Ts(!Fe),className:"text-xs font-black text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:[Fe?v.jsx(Oo,{size:14}):v.jsx(oc,{size:14}),Fe?"":""]})]}),Fe?v.jsxs("div",{className:"bg-slate-50 p-6 rounded-2xl border-2 border-indigo-100 mb-4 animate-in zoom-in-95 duration-200",children:[v.jsxs("div",{className:"flex gap-2",children:[v.jsx("input",{type:"text",placeholder:" (: )",value:et,onChange:J=>bn(J.target.value),className:"flex-1 p-3 border-2 border-slate-200 rounded-xl focus:border-indigo-600 outline-none font-bold"}),v.jsx("button",{onClick:Rn,className:"bg-indigo-600 text-white p-3 rounded-xl hover:bg-indigo-700 shadow-md",children:v.jsx(oc,{size:20})})]}),v.jsx("div",{className:"mt-4 space-y-2 max-h-40 overflow-y-auto pr-2",children:ae.map(J=>v.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg border border-slate-100",children:[v.jsx("span",{className:"font-bold text-sm text-slate-700",children:J.title}),v.jsx("button",{onClick:()=>Ie(J.id),className:"text-rose-500 hover:text-rose-600",children:v.jsx(If,{size:16})})]},J.id))})]}):v.jsxs("select",{value:mn,onChange:J=>qt(J.target.value),className:"w-full p-5 bg-slate-50 border-2 border-transparent rounded-2xl focus:bg-white focus:border-indigo-600 focus:ring-4 focus:ring-indigo-100 transition-all outline-none font-bold text-slate-700 shadow-inner",children:[v.jsx("option",{value:"",children:"..."}),ae.length>0?ae.map(J=>v.jsx("option",{value:J.title,children:J.title},J.id)):v.jsxs(v.Fragment,{children:[v.jsx("option",{children:""}),v.jsx("option",{children:""}),v.jsx("option",{children:" A++"}),v.jsx("option",{children:""})]}),v.jsx("option",{value:"other",children:""})]}),mn==="other"&&!Fe&&v.jsx("input",{type:"text",placeholder:"...",value:mn==="other"?"":mn,onChange:J=>qt(J.target.value),className:"w-full mt-4 p-5 bg-white border-2 border-indigo-200 rounded-2xl outline-none font-bold text-slate-700"})]})]}),v.jsxs("div",{className:"space-y-8",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-[0.2em] mb-4",children:""}),v.jsxs("div",{className:"relative",children:[v.jsx("input",{type:"number",value:ir,onChange:J=>Kr(J.target.value),className:"w-full p-8 text-5xl font-black bg-slate-50 border-2 border-transparent rounded-[2rem] focus:bg-white focus:border-indigo-600 focus:ring-4 focus:ring-indigo-100 transition-all outline-none text-indigo-600 shadow-inner"}),v.jsx("div",{className:"absolute right-8 top-1/2 -translate-y-1/2 flex items-center gap-2 pointer-events-none",children:v.jsx("span",{className:"font-black text-slate-300 text-2xl uppercase tracking-tighter",children:"PTS"})})]})]}),v.jsx("button",{onClick:Wt,disabled:p||!ht||!ir,className:`w-full text-white font-black py-8 rounded-[2rem] transition-all shadow-2xl flex items-center justify-center gap-4 text-2xl active:scale-95 group ${p||!ht||!ir?"bg-slate-300 shadow-none cursor-not-allowed":"bg-emerald-600 hover:bg-emerald-700 shadow-emerald-200"}`,children:p?v.jsxs(v.Fragment,{children:[v.jsx(yc,{size:32,className:"animate-spin"}),"..."]}):v.jsxs(v.Fragment,{children:[v.jsx(Iu,{size:32,className:"group-hover:scale-125 transition-transform"}),""]})})]})]}),t==="approval"&&v.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[v.jsxs("h2",{className:"text-3xl font-black text-slate-800 mb-8 flex items-center gap-3",children:[v.jsx(Ig,{className:"text-indigo-600"}),"",v.jsxs("span",{className:"bg-indigo-100 text-indigo-600 text-sm px-3 py-1 rounded-full",children:[M.length," "]})]}),v.jsx("div",{className:"space-y-4",children:M.length===0?v.jsx("div",{className:"text-center py-20 text-slate-400 font-bold",children:""}):M.map(J=>v.jsxs("div",{className:"flex items-center justify-between p-6 bg-slate-50 rounded-2xl border border-slate-100",children:[v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("div",{className:"w-12 h-12 bg-indigo-200 rounded-full flex items-center justify-center text-indigo-700 font-bold text-xl",children:J.name[0]}),v.jsxs("div",{children:[v.jsx("h3",{className:"font-black text-lg text-slate-800",children:J.name}),v.jsx("p",{className:"text-slate-500 text-sm font-bold",children:J.grade||""})]})]}),v.jsxs("div",{className:"flex gap-3",children:[v.jsx("button",{onClick:()=>Ai(J.id),className:"bg-emerald-500 hover:bg-emerald-600 text-white px-6 py-2 rounded-xl font-bold transition-all shadow-lg shadow-emerald-100",children:""}),v.jsx("button",{onClick:()=>pr(J.id),className:"bg-slate-200 hover:bg-rose-500 hover:text-white text-slate-500 px-6 py-2 rounded-xl font-bold transition-all",children:""})]})]},J.id))})]}),t==="products"&&v.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[v.jsxs("div",{className:"flex justify-between items-center mb-8",children:[v.jsxs("h2",{className:"text-3xl font-black text-slate-800 flex items-center gap-3",children:[v.jsx(Sg,{className:"text-indigo-600"})," "]}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsxs("button",{onClick:()=>vr(!dr),className:"bg-slate-100 text-slate-600 px-5 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-slate-200 transition-all border border-slate-200",children:[v.jsx(Bu,{size:18})," "]}),v.jsxs("button",{onClick:()=>at(!Xt),className:"bg-indigo-600 text-white px-5 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100",children:[v.jsx(oc,{size:20})," "]})]})]}),dr&&v.jsxs("div",{className:"bg-slate-50 p-6 rounded-2xl mb-8 border border-slate-200 animate-in fade-in",children:[v.jsx("h3",{className:"font-black text-slate-700 mb-4",children:""}),v.jsxs("div",{className:"flex gap-4 mb-6",children:[v.jsx("input",{placeholder:" (: )",value:Li,onChange:J=>On(J.target.value),className:"flex-1 p-3 rounded-xl border border-slate-200 font-bold outline-none"}),v.jsx("button",{onClick:()=>{Li&&(vD(Li),On(""))},className:"bg-emerald-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-emerald-700",children:""})]}),v.jsx("div",{className:"flex flex-wrap gap-3",children:Je.map(J=>v.jsxs("div",{className:"bg-white px-4 py-2 rounded-xl border border-slate-200 flex items-center gap-2 shadow-sm font-bold text-slate-600",children:[J.name,v.jsx("button",{onClick:()=>SD(J.id),className:"text-slate-300 hover:text-rose-500",children:v.jsx(Oo,{size:14})})]},J.id))})]}),Xt&&v.jsxs("form",{onSubmit:xn,className:"bg-slate-50 p-6 rounded-2xl mb-8 border border-slate-200 animate-in fade-in",children:[v.jsx("h3",{className:"font-black text-slate-700 mb-4",children:""}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[v.jsx("input",{placeholder:"",value:rs,onChange:J=>pn(J.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"}),v.jsxs("select",{value:Tn,onChange:J=>vs(J.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500",children:[Je.map(J=>v.jsx("option",{value:J.name,children:J.name},J.id)),Je.length===0&&v.jsx("option",{value:"",children:""})]}),v.jsxs("div",{className:"flex flex-col gap-2",children:[v.jsxs("label",{className:"flex items-center justify-center gap-2 p-3 rounded-xl border-2 border-dashed border-slate-300 hover:border-indigo-400 hover:bg-indigo-50 transition-all cursor-pointer font-bold text-slate-500 hover:text-indigo-600",children:[v.jsx(Cg,{size:18}),ss?"":" (200KB)",v.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:ki})]}),cn&&v.jsx("img",{src:cn,className:"h-20 w-auto object-cover rounded-lg border border-slate-200",alt:"preview"})]}),v.jsx("input",{placeholder:" ()",type:"number",value:Qr,onChange:J=>ur(J.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"}),v.jsx("textarea",{placeholder:" ()",value:Yt,onChange:J=>Me(J.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500 md:col-span-2 h-24"}),v.jsx("input",{placeholder:"",type:"number",value:is,onChange:J=>hr(J.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"})]}),v.jsxs("div",{className:"flex justify-end gap-2",children:[v.jsx("button",{type:"button",onClick:()=>at(!1),className:"px-4 py-2 text-slate-400 font-bold hover:text-slate-600",children:""}),v.jsx("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700",children:""})]})]}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:X.map(J=>v.jsxs("div",{className:"border border-slate-100 rounded-[2rem] p-6 flex flex-col gap-4 group hover:shadow-xl transition-all bg-white relative",children:[v.jsxs("div",{className:"flex gap-4 items-center",children:[v.jsx("img",{src:J.imageUrl,alt:J.name,className:"w-20 h-20 rounded-2xl object-cover shadow-sm"}),v.jsxs("div",{className:"flex-1",children:[v.jsx("h4",{className:"font-black text-slate-800 text-lg",children:J.name}),v.jsx("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest",children:J.category}),v.jsxs("p",{className:"text-indigo-600 font-black",children:[J.price," PTS"]})]}),v.jsx("button",{onClick:()=>Ot(J.id),className:"p-2 text-slate-300 hover:text-rose-500 transition-colors",children:v.jsx(If,{size:18})})]}),v.jsx("div",{className:"flex items-center justify-between pt-4 border-t border-slate-50",children:v.jsxs("div",{className:"flex flex-col",children:[v.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter mb-1",children:""}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("input",{type:"number",defaultValue:J.stock,onBlur:ze=>Kt(J.id,parseInt(ze.target.value)||0),className:"w-16 p-2 bg-slate-50 border border-slate-200 rounded-lg text-sm font-black text-slate-700 outline-none focus:ring-2 focus:ring-indigo-500"}),v.jsx("span",{className:`text-[10px] font-black px-2 py-1 rounded-lg ${J.stock>0?"bg-emerald-100 text-emerald-600":"bg-red-100 text-red-600"}`,children:J.stock>0?"ON SALE":"SOLD OUT"})]})]})})]},J.id))})]}),t==="mission_approval"&&v.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[v.jsxs("h2",{className:"text-3xl font-black text-slate-800 mb-8 flex items-center gap-3",children:[v.jsx(Wu,{className:"text-emerald-600"}),"",v.jsxs("span",{className:"bg-emerald-100 text-emerald-600 text-sm px-3 py-1 rounded-full",children:[De.filter(J=>J.status==="pending").length," "]})]}),v.jsx("div",{className:"space-y-6",children:De.filter(J=>J.status==="pending").length===0?v.jsx("div",{className:"text-center py-24 text-slate-400 font-bold bg-slate-50 rounded-[3rem] border border-slate-100 border-dashed",children:""}):De.filter(J=>J.status==="pending").map(J=>v.jsxs("div",{className:"bg-slate-50 p-8 rounded-[2.5rem] border border-slate-100 flex flex-col md:flex-row md:items-center justify-between gap-6",children:[v.jsxs("div",{className:"flex items-center gap-6",children:[v.jsx("div",{className:"w-16 h-16 bg-white rounded-2xl shadow-sm flex items-center justify-center text-2xl font-black text-indigo-600 border border-slate-100",children:J.userName[0]}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-xl font-black text-slate-800",children:J.userName}),v.jsxs("p",{className:"text-slate-500 font-bold flex items-center gap-2",children:["",v.jsxs("span",{className:"text-indigo-600",children:["",J.missionTitle,""]})]}),v.jsxs("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest mt-2",children:["",J.points," PTS  ",new Date(J.timestamp).toLocaleString()]})]})]}),v.jsxs("div",{className:"flex gap-4",children:[v.jsxs("button",{onClick:()=>Sr(J.id),className:"bg-emerald-600 hover:bg-emerald-700 text-white px-8 py-3 rounded-2xl font-black transition-all shadow-xl shadow-emerald-100 flex items-center gap-2",children:[v.jsx(Iu,{size:20})," "]}),v.jsx("button",{onClick:()=>aa(J.id),className:"bg-white hover:bg-rose-50 text-slate-400 hover:text-rose-600 px-8 py-3 rounded-2xl font-black transition-all border border-slate-200",children:""})]})]},J.id))})]}),t==="scan"&&v.jsxs("div",{className:"bg-white rounded-[3rem] p-16 border border-slate-100 text-center shadow-xl animate-in fade-in",children:[v.jsx("div",{className:"bg-indigo-50 w-32 h-32 rounded-[2.5rem] flex items-center justify-center mx-auto mb-8 text-indigo-600 shadow-inner",children:v.jsx(Tg,{size:56})}),v.jsx("h2",{className:"text-3xl font-black text-slate-800 mb-4 tracking-tight",children:"QR Code "}),v.jsx("p",{className:"text-slate-400 mb-8 font-medium max-w-md mx-auto leading-relaxed",children:" QR Code "}),v.jsx("div",{className:"max-w-md mx-auto mb-8 overflow-hidden rounded-[2rem] border-4 border-indigo-50 shadow-inner",children:v.jsx("div",{id:"reader",className:"w-full"})}),v.jsxs("div",{className:"max-w-md mx-auto mb-8",children:[v.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[v.jsx("div",{className:"h-px bg-slate-200 flex-1"}),v.jsx("span",{className:"text-[10px] font-black text-slate-300 uppercase tracking-widest",children:""}),v.jsx("div",{className:"h-px bg-slate-200 flex-1"})]}),v.jsx("input",{type:"text",placeholder:" QR Code ...",value:Ye,onChange:J=>gt(J.target.value),className:"w-full p-4 bg-slate-50 border-2 border-indigo-50 rounded-2xl focus:bg-white focus:border-indigo-600 outline-none font-mono text-xs text-slate-500 text-center"})]}),v.jsx("button",{onClick:()=>gr(),disabled:c,className:"bg-indigo-600 hover:bg-indigo-700 disabled:bg-slate-300 text-white px-16 py-6 rounded-[2rem] font-black transition-all shadow-2xl shadow-indigo-200 inline-flex items-center justify-center gap-4 text-xl active:scale-95",children:c?"...":""})]}),t==="history"&&v.jsxs("section",{className:"bg-white rounded-[3rem] border border-slate-100 shadow-xl overflow-hidden animate-in fade-in",children:[v.jsxs("div",{className:"p-10 border-b border-slate-50 flex flex-col md:flex-row md:items-center justify-between gap-6",children:[v.jsxs("h2",{className:"font-black text-2xl text-slate-800 flex items-center gap-3",children:[v.jsx(nd,{className:"text-indigo-600"}),""]}),v.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[v.jsx("div",{className:"relative",children:v.jsx("input",{type:"month",value:Y,onChange:J=>Q(J.target.value),className:"pl-5 pr-5 py-4 rounded-2xl bg-slate-50 border-2 border-transparent focus:bg-white focus:border-indigo-600 focus:ring-4 focus:ring-indigo-100 transition-all outline-none text-sm font-bold shadow-inner"})}),v.jsxs("div",{className:"relative",children:[v.jsx(O3,{className:"absolute left-5 top-1/2 -translate-y-1/2 text-slate-400",size:20}),v.jsx("input",{type:"text",placeholder:"...",value:z,onChange:J=>V(J.target.value),className:"pl-14 pr-8 py-4 rounded-2xl bg-slate-50 border-2 border-transparent focus:bg-white focus:border-indigo-600 focus:ring-4 focus:ring-indigo-100 transition-all outline-none text-sm w-full md:w-80 shadow-inner font-bold"})]})]})]}),v.jsx("div",{className:"overflow-x-auto",children:v.jsxs("table",{className:"w-full",children:[v.jsx("thead",{className:"bg-slate-50/50",children:v.jsxs("tr",{children:[v.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),v.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),v.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),v.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),v.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),v.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""})]})}),v.jsx("tbody",{className:"divide-y divide-slate-50",children:Mt.map(J=>{var ze;try{return v.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors",children:[v.jsx("td",{className:"px-10 py-6 whitespace-nowrap",children:v.jsx("span",{className:`px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest ${J.status==="completed"?"bg-emerald-100 text-emerald-700":J.status==="pending"?"bg-amber-100 text-amber-700":"bg-rose-100 text-rose-700"}`,children:J.status==="completed"?"":J.status==="pending"?"":""})}),v.jsx("td",{className:"px-10 py-6 whitespace-nowrap font-black text-slate-800",children:((ze=C.find(Ge=>Ge.id===J.userId))==null?void 0:ze.name)||""}),v.jsx("td",{className:"px-10 py-6 whitespace-nowrap font-bold text-slate-600",children:J.productName}),v.jsxs("td",{className:"px-10 py-6 whitespace-nowrap text-indigo-600 font-black",children:[J.pointsSpent," PTS"]}),v.jsx("td",{className:"px-10 py-6 whitespace-nowrap text-slate-400 text-sm font-bold",children:J.timestamp?new Date(J.timestamp).toLocaleDateString():""}),v.jsx("td",{className:"px-10 py-6 whitespace-nowrap",children:J.status==="pending"?v.jsx("button",{onClick:()=>vn(J.id),className:"text-white bg-indigo-600 hover:bg-indigo-700 px-5 py-2.5 rounded-xl text-xs font-black transition-all shadow-xl shadow-indigo-100 active:scale-95",children:""}):v.jsxs("div",{className:"flex items-center gap-2 text-slate-300 font-black text-[10px] tracking-widest",children:[v.jsx(Iu,{size:14})," FINISHED"]})})]},J.id)}catch(Ge){return console.error("Row render error",Ge),null}})})]})})]}),t==="banners"&&v.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[v.jsxs("div",{className:"flex justify-between items-center mb-8",children:[v.jsxs("h2",{className:"text-3xl font-black text-slate-800 flex items-center gap-3",children:[v.jsx(zy,{className:"text-indigo-600"})," "]}),v.jsxs("button",{onClick:()=>Br(!fi),className:"bg-indigo-600 text-white px-5 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100",children:[v.jsx(oc,{size:20})," "]})]}),fi&&v.jsxs("div",{className:"bg-slate-50 p-6 rounded-2xl mb-8 border border-slate-200 animate-in fade-in",children:[v.jsx("h3",{className:"font-black text-slate-700 mb-4",children:""}),v.jsxs("div",{className:"flex flex-col gap-4",children:[v.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-start",children:[v.jsxs("label",{className:"flex-1 w-full flex items-center justify-center gap-2 p-10 rounded-[2rem] border-2 border-dashed border-slate-300 hover:border-indigo-400 hover:bg-indigo-50 transition-all cursor-pointer font-bold text-slate-500 hover:text-indigo-600",children:[v.jsx(Cg,{size:24}),as?"":" (500KB)",v.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:ks})]}),v.jsxs("div",{className:"w-full md:w-64 space-y-4",children:[v.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-widest",children:" ()"}),v.jsx("input",{list:"banner-tags",value:Tt,onChange:J=>on(J.target.value),placeholder:"...",className:"w-full p-4 rounded-2xl border-2 border-slate-100 font-bold text-slate-700 outline-none focus:border-indigo-500 transition-all shadow-sm"}),v.jsxs("datalist",{id:"banner-tags",children:[v.jsx("option",{value:""}),v.jsx("option",{value:""}),v.jsx("option",{value:""}),v.jsx("option",{value:""}),v.jsx("option",{value:""})]}),os&&v.jsx("img",{src:os,className:"h-32 w-full object-cover rounded-2xl border border-white shadow-lg",alt:"preview"})]})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 w-full",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-widest",children:" (CSS Position)"}),v.jsxs("select",{value:Jr,onChange:J=>$r(J.target.value),className:"w-full p-4 rounded-2xl border-2 border-slate-100 font-bold text-slate-700 outline-none focus:border-indigo-500 transition-all shadow-sm",children:[v.jsx("option",{value:"center",children:" (Center)"}),v.jsx("option",{value:"top",children:" (Top)"}),v.jsx("option",{value:"bottom",children:" (Bottom)"}),v.jsx("option",{value:"left",children:" (Left)"}),v.jsx("option",{value:"right",children:" (Right)"}),v.jsx("option",{value:"50% 20%",children:" (50% 20%)"})]})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-widest",children:""}),v.jsxs("select",{value:Nn,onChange:J=>Ls(J.target.value),className:"w-full p-4 rounded-2xl border-2 border-slate-100 font-bold text-slate-700 outline-none focus:border-indigo-500 transition-all shadow-sm",children:[v.jsx("option",{value:"h-32",children:" (h-32)"}),v.jsx("option",{value:"h-40",children:" (h-40)"}),v.jsx("option",{value:"h-48",children:" (h-48)"}),v.jsx("option",{value:"h-56",children:" (h-56)"}),v.jsx("option",{value:"h-64",children:" (h-64)"})]})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-widest",children:""}),v.jsxs("select",{value:Un,onChange:J=>fr(J.target.value),className:"w-full p-4 rounded-2xl border-2 border-slate-100 font-bold text-slate-700 outline-none focus:border-indigo-500 transition-all shadow-sm",children:[v.jsx("option",{value:"md:h-48",children:" (md:h-48)"}),v.jsx("option",{value:"md:h-64",children:" (md:h-64)"}),v.jsx("option",{value:"md:h-72",children:" (md:h-72)"}),v.jsx("option",{value:"md:h-80",children:" (md:h-80)"}),v.jsx("option",{value:"md:h-96",children:" (md:h-96)"})]})]})]}),v.jsx("button",{onClick:async()=>{as?(await qD(as,Tt,Jr,Nn,Un),Zr(""),on(""),$r("center"),Ls("h-48"),fr("md:h-72"),ei(null),Br(!1),e("","success")):e("","error")},className:"bg-emerald-600 text-white px-6 py-4 rounded-2xl font-black text-lg hover:bg-emerald-700 shadow-xl shadow-emerald-100 active:scale-95",children:""})]})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6",children:[me.map(J=>v.jsxs("div",{className:"relative group rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-all",children:[v.jsx("img",{src:J.imageUrl,alt:"banner",className:"w-full h-48 object-cover"}),v.jsx("div",{className:"absolute top-4 left-4",children:v.jsx("span",{className:"bg-indigo-600/90 backdrop-blur text-white px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-wider shadow-lg",children:J.tag||""})}),v.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-all flex items-center justify-center",children:v.jsx("button",{onClick:async()=>{confirm("")&&(await YD(J.id),e("","success"))},className:"bg-white text-rose-500 px-6 py-2 rounded-xl font-black hover:bg-rose-50",children:" "})})]},J.id)),me.length===0&&v.jsx("div",{className:"col-span-full py-12 text-center text-slate-400 font-bold bg-slate-50 rounded-2xl border border-slate-200 border-dashed",children:""})]})]}),t==="missions"&&v.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[v.jsxs("div",{className:"flex justify-between items-center mb-8",children:[v.jsxs("h2",{className:"text-3xl font-black text-slate-800 flex items-center gap-3",children:[v.jsx(Bu,{className:"text-indigo-600"})," "]}),v.jsxs("button",{onClick:()=>ui(!Bn),className:"bg-indigo-600 text-white px-5 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100",children:[v.jsx(oc,{size:18})," "]})]}),Bn&&v.jsxs("form",{onSubmit:Rr,className:"bg-slate-50 p-6 rounded-2xl mb-8 border border-slate-200 animate-in fade-in",children:[v.jsx("h3",{className:"font-black text-slate-700 mb-4",children:""}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[v.jsx("input",{placeholder:"",value:Ue,onChange:J=>Ve(J.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"}),v.jsx("input",{placeholder:"",type:"number",value:st,onChange:J=>Le(J.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"}),v.jsxs("select",{value:St,onChange:J=>Ct(J.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500",children:[v.jsx("option",{value:"normal",children:""}),v.jsx("option",{value:"challenge",children:""}),v.jsx("option",{value:"hard",children:""})]}),v.jsxs("div",{className:"flex items-center gap-2 p-3 bg-white rounded-xl border border-slate-200",children:[v.jsx(yc,{size:18,className:"text-slate-400"}),v.jsx("input",{type:"datetime-local",value:Jt,onChange:J=>Wr(J.target.value),className:"font-bold outline-none text-slate-600 w-full",placeholder:" ()"})]})]}),v.jsxs("div",{className:"flex justify-end gap-3",children:[v.jsx("button",{type:"button",onClick:()=>ui(!1),className:"px-4 py-2 rounded-xl font-bold text-slate-400 hover:bg-slate-200 transition-all",children:""}),v.jsx("button",{type:"submit",className:"bg-indigo-600 text-white px-6 py-2 rounded-xl font-bold hover:bg-indigo-700 transition-all shadow-lg",children:""})]})]}),v.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[q.length===0&&v.jsx("div",{className:"text-center py-12 text-slate-400 font-bold bg-slate-50 rounded-2xl border border-slate-100 border-dashed",children:""}),q.map(J=>v.jsxs("div",{className:`flex flex-col md:flex-row md:items-center justify-between p-6 rounded-2xl border transition-all ${J.isActive?"bg-white border-slate-100 shadow-sm":"bg-slate-50 border-slate-100 opacity-60"}`,children:[v.jsxs("div",{className:"flex items-center gap-4 mb-4 md:mb-0",children:[v.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center font-black text-lg shrink-0 ${J.type==="normal"?"bg-emerald-100 text-emerald-600":J.type==="challenge"?"bg-orange-100 text-orange-600":"bg-rose-100 text-rose-600"}`,children:J.type==="normal"?"N":J.type==="challenge"?"C":"H"}),v.jsxs("div",{children:[v.jsxs("h3",{className:"font-black text-lg text-slate-800 flex items-center gap-2",children:[J.title,!J.isActive&&v.jsx("span",{className:"text-[10px] bg-slate-200 text-slate-500 px-2 py-0.5 rounded-full",children:""})]}),v.jsxs("p",{className:"text-slate-400 text-sm font-bold flex items-center gap-2",children:[v.jsxs("span",{className:"text-indigo-500",children:[J.points," PTS"]}),"  ",J.description,J.deadline&&v.jsxs("span",{className:"flex items-center gap-1 text-amber-500 ml-2",children:[v.jsx(yc,{size:14})," ",new Date(J.deadline).toLocaleString()," "]})]})]})]}),v.jsx("button",{onClick:()=>sa(J.id),className:`px-4 py-2 rounded-xl font-black text-xs transition-all whitespace-nowrap ${J.isActive?"bg-rose-50 text-rose-600 hover:bg-rose-100":"bg-emerald-50 text-emerald-600 hover:bg-emerald-100"}`,children:J.isActive?"":""})]},J.id))]})]}),t==="wishes"&&v.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[v.jsxs("h2",{className:"text-3xl font-black text-slate-800 mb-8 flex items-center gap-3",children:[v.jsx(Hf,{className:"text-pink-500"})," "]}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:le.length===0?v.jsx("div",{className:"col-span-full py-20 text-center text-slate-400 font-bold",children:""}):le.map(J=>{var ze;return v.jsxs("div",{className:"bg-slate-50 p-6 rounded-[2.5rem] border border-slate-100 relative group",children:[v.jsx("button",{onClick:()=>sr(J.id),className:"absolute top-4 right-4 p-2 bg-white rounded-full text-slate-300 hover:text-rose-500 hover:shadow-md transition-all opacity-0 group-hover:opacity-100",children:v.jsx(If,{size:18})}),v.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[v.jsx("img",{src:J.userAvatar,className:"w-12 h-12 rounded-full border-2 border-white shadow-sm",alt:J.userName}),v.jsxs("div",{children:[v.jsx("h4",{className:"font-black text-slate-800",children:J.userName}),v.jsx("p",{className:"text-[10px] text-slate-400 font-bold",children:new Date(J.timestamp).toLocaleString()})]})]}),v.jsxs("h3",{className:"text-xl font-black text-slate-800 mb-2",children:["",J.itemName]}),v.jsxs("p",{className:"text-slate-500 text-sm mb-6 leading-relaxed italic",children:['"',J.description,'"']}),v.jsxs("div",{className:"flex items-center gap-2 text-pink-500 font-black text-sm",children:[v.jsx(Hf,{size:16,fill:"currentColor"})," ",((ze=J.likedBy)==null?void 0:ze.length)||0," "]})]},J.id)})})]}),c&&v.jsxs("div",{className:"fixed inset-0 z-[150] bg-slate-900/95 backdrop-blur-xl flex flex-col items-center justify-center p-8",children:[v.jsxs("div",{className:"relative w-full max-w-lg aspect-square border-8 border-white/5 rounded-[5rem] overflow-hidden shadow-[0_0_100px_rgba(79,70,229,0.3)]",children:[v.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-900 via-indigo-900/20 to-slate-900 flex items-center justify-center",children:v.jsxs("div",{className:"text-center",children:[v.jsx(N3,{size:140,className:"mx-auto mb-10 animate-pulse text-indigo-400"}),v.jsx("p",{className:"text-3xl font-black text-white mb-4 tracking-tight",children:"..."}),v.jsx("p",{className:"text-indigo-300 font-bold tracking-widest uppercase text-xs",children:"AI Computer Vision Active"})]})}),v.jsx("div",{className:"absolute top-0 left-0 w-full h-3 bg-indigo-400 shadow-[0_0_50px_rgba(129,140,248,1)] animate-scan-line"})]}),v.jsxs("button",{onClick:()=>h(!1),className:"mt-16 bg-white/5 hover:bg-white/10 text-white px-12 py-5 rounded-[2rem] font-black transition-all border border-white/10 flex items-center gap-4 text-lg backdrop-blur",children:[v.jsx(Oo,{size:24})," "]}),v.jsx("style",{children:`
            @keyframes scan-line {
              0% { top: 0% }
              100% { top: 100% }
            }
            .animate-scan-line {
              animation: scan-line 3s linear infinite;
            }
          `})]}),ut&&v.jsx("div",{className:"fixed inset-0 z-[160] flex items-center justify-center p-4 bg-slate-900/70 backdrop-blur-2xl",children:v.jsxs("div",{className:"bg-white rounded-[4rem] max-w-md w-full p-12 shadow-[0_0_80px_rgba(0,0,0,0.5)] animate-in zoom-in-95 duration-200",children:[v.jsx("div",{className:"bg-emerald-50 w-24 h-24 rounded-[2rem] flex items-center justify-center text-emerald-600 mb-10 mx-auto shadow-inner",children:v.jsx(rd,{size:48})}),v.jsx("h2",{className:"text-3xl font-black text-slate-800 text-center mb-10 tracking-tight",children:""}),v.jsxs("div",{className:"bg-slate-50 rounded-[2.5rem] p-8 space-y-6 mb-12 border border-slate-100 shadow-inner",children:[v.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-slate-200/50",children:[v.jsx("span",{className:"text-slate-400 text-[10px] font-black uppercase tracking-widest",children:""}),v.jsx("span",{className:"font-black text-slate-800 text-xl",children:(bt=C.find(J=>J.id===ut.userId))==null?void 0:bt.name})]}),v.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-slate-200/50",children:[v.jsx("span",{className:"text-slate-400 text-[10px] font-black uppercase tracking-widest",children:""}),v.jsx("span",{className:"font-black text-slate-800 text-xl",children:ut.productName})]}),v.jsxs("div",{className:"flex justify-between items-center py-2",children:[v.jsx("span",{className:"text-slate-400 text-[10px] font-black uppercase tracking-widest",children:""}),v.jsxs("span",{className:"font-black text-indigo-600 text-2xl",children:[ut.pointsSpent," ",v.jsx("span",{className:"text-xs font-bold text-indigo-400",children:"PTS"})]})]})]}),v.jsxs("div",{className:"flex flex-col gap-4",children:[v.jsxs("button",{onClick:()=>vn(ut.id),className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-6 rounded-2xl transition-all shadow-2xl shadow-indigo-100 flex items-center justify-center gap-4 text-xl active:scale-95",children:[v.jsx(Iu,{size:28}),""]}),v.jsx("button",{onClick:()=>ie(null),className:"w-full bg-slate-100 text-slate-600 font-bold py-5 rounded-2xl hover:bg-slate-200 transition-all text-lg",children:""})]})]})})]})},y9=30,wg=y9*24*60*60*1e3,E9=({user:n,onUserUpdate:e})=>{const{showAlert:t}=Lc(),[s,c]=ne.useState([]),[h,p]=ne.useState(!1),[T,w]=ne.useState(""),[E,C]=ne.useState(""),[I,M]=ne.useState(null),B=s.filter(ae=>ae.userId===n.id).sort((ae,K)=>K.timestamp-ae.timestamp)[0],X=B&&Date.now()-B.timestamp<wg;ne.useEffect(()=>{const ae=WT(K=>{c(K.sort((le,Re)=>Re.timestamp-le.timestamp))});return()=>ae()},[]),ne.useEffect(()=>{const ae=()=>{if(!B)return null;const le=B.timestamp+wg-Date.now();return le<=0?null:{d:Math.floor(le/864e5),h:Math.floor(le/36e5%24),m:Math.floor(le/1e3/60%60),s:Math.floor(le/1e3%60)}},K=setInterval(()=>{M(ae())},1e3);return M(ae()),()=>clearInterval(K)},[B]);const $=async ae=>{if(ae.preventDefault(),!T.trim()||!E.trim())return;const K={id:`wish_${Date.now()}`,userId:n.id,userName:n.name,userAvatar:n.avatar,itemName:T,description:E,timestamp:Date.now(),likedBy:[]};await jD(K),p(!1),w(""),C(""),t("","success")},q=async(ae,K)=>{if(K!=null&&K.includes(n.id)){t("","info");return}await HD(ae,n.id)},_e=async()=>{if(n.points<500){t(" 500 ","error");return}if(confirm(" 500 "))try{const K={...n,points:n.points-500};await Pa(K),B&&await FD(B.id,{timestamp:Date.now()-(wg+1e5)}),t("","success"),e()}catch{t("","error")}};return v.jsxs("div",{className:"space-y-8 pb-20",children:[v.jsxs("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[v.jsxs("div",{children:[v.jsxs("h1",{className:"text-3xl font-bold text-slate-800 flex items-center gap-3",children:[v.jsx(id,{className:"text-yellow-500"}),""]}),v.jsx("p",{className:"text-slate-500 mt-1",children:""})]}),v.jsxs("button",{onClick:()=>{X?t("","info"):p(!0)},className:`px-6 py-3 rounded-2xl font-black shadow-lg flex flex-col items-center gap-1 transition-all hover:scale-105 min-w-[200px] ${X?"bg-slate-100 text-slate-400 cursor-not-allowed border border-slate-200":"bg-indigo-600 text-white shadow-indigo-100 hover:bg-indigo-700"}`,children:[v.jsxs("div",{className:"flex items-center gap-2",children:[X?v.jsx(yc,{size:18}):v.jsx(oc,{size:20}),v.jsx("span",{children:X?"":""})]}),X&&I&&v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsxs("span",{className:"text-[10px] font-bold font-mono tracking-tight",children:[I.d," ",I.h," ",I.m," ",I.s,""]}),v.jsxs("button",{onClick:ae=>{ae.stopPropagation(),_e()},className:"mt-2 bg-amber-100 text-amber-700 px-3 py-1 rounded-full text-[10px] font-black flex items-center gap-1 hover:bg-amber-200 transition-colors shadow-sm",children:[v.jsx(e3,{size:10}),"500 PTS "]})]})]})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.map(ae=>{var K,le,Re,De;return v.jsxs("div",{className:"bg-white rounded-[2rem] p-6 border border-slate-100 shadow-sm hover:shadow-md transition-all flex flex-col relative overflow-hidden group",children:[v.jsx("div",{className:"absolute -right-4 -top-4 w-24 h-24 bg-yellow-50 rounded-full blur-2xl group-hover:bg-yellow-100 transition-colors"}),v.jsxs("div",{className:"flex items-center gap-3 mb-4 z-10",children:[v.jsx("img",{src:ae.userAvatar,alt:ae.userName,className:"w-10 h-10 rounded-full border-2 border-white shadow-sm"}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm font-bold text-slate-700",children:ae.userName}),v.jsx("p",{className:"text-xs text-slate-400",children:new Date(ae.timestamp).toLocaleDateString()})]})]}),v.jsx("h3",{className:"text-xl font-black text-slate-800 mb-2 z-10",children:ae.itemName}),v.jsx("p",{className:"text-slate-500 text-sm mb-6 flex-1 z-10",children:ae.description}),v.jsx("div",{className:"flex items-center justify-between pt-4 border-t border-slate-50 z-10",children:v.jsxs("button",{onClick:()=>q(ae.id,ae.likedBy),className:`flex items-center gap-2 transition-colors group/like ${(K=ae.likedBy)!=null&&K.includes(n.id)?"text-pink-500":"text-slate-400 hover:text-pink-500"}`,children:[v.jsx("div",{className:`p-2 rounded-full transition-colors ${(le=ae.likedBy)!=null&&le.includes(n.id)?"bg-pink-50":"hover:bg-pink-50"}`,children:v.jsx(Y3,{size:18,className:(Re=ae.likedBy)!=null&&Re.includes(n.id)?"fill-pink-500":""})}),v.jsxs("span",{className:"font-bold text-sm",children:[((De=ae.likedBy)==null?void 0:De.length)||0," "]})]})})]},ae.id)}),s.length===0&&v.jsxs("div",{className:"col-span-full py-20 text-center space-y-4",children:[v.jsx("div",{className:"w-20 h-20 bg-slate-50 rounded-full flex items-center justify-center mx-auto text-slate-300",children:v.jsx(Hf,{size:40})}),v.jsx("p",{className:"text-slate-400 font-bold",children:""})]})]}),h&&v.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:v.jsxs("div",{className:"bg-white rounded-[2.5rem] max-w-lg w-full p-8 shadow-2xl animate-in zoom-in-95 duration-200",children:[v.jsxs("div",{className:"flex justify-between items-center mb-8",children:[v.jsxs("h2",{className:"text-2xl font-black text-slate-800 flex items-center gap-2",children:[v.jsx(id,{className:"text-indigo-500"}),""]}),v.jsx("button",{onClick:()=>p(!1),className:"text-slate-400 hover:text-slate-600 bg-slate-50 p-2 rounded-full",children:v.jsx(Oo,{size:24})})]}),v.jsxs("form",{onSubmit:$,className:"space-y-6",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-slate-700 font-bold mb-2 ml-1",children:""}),v.jsx("input",{type:"text",value:T,onChange:ae=>w(ae.target.value),placeholder:"AirPods Pro...",className:"w-full bg-slate-50 border border-slate-200 rounded-2xl px-5 py-4 font-bold text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all placeholder:font-medium",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-slate-700 font-bold mb-2 ml-1",children:""}),v.jsx("textarea",{value:E,onChange:ae=>C(ae.target.value),placeholder:"...",className:"w-full bg-slate-50 border border-slate-200 rounded-2xl px-5 py-4 font-medium text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all h-32 resize-none placeholder:font-medium",required:!0})]}),v.jsxs("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-5 rounded-[1.25rem] transition-all shadow-xl shadow-indigo-100 flex items-center justify-center gap-3 text-lg",children:[v.jsx(M3,{size:24}),""]})]})]})})]})},_9=({onLogin:n})=>{const{showAlert:e}=Lc(),[t,s]=ne.useState("student"),[c,h]=ne.useState(!1),[p,T]=ne.useState(""),[w,E]=ne.useState(""),[C,I]=ne.useState(""),[M,B]=ne.useState(""),[X,$]=ne.useState(""),q=async le=>{le.preventDefault();try{const De=(await w_()).find(z=>z.name===p);if(!De){e("","error");return}if(!De.isApproved){e("","info");return}const j=`${De.id}@workshop.local`;await pg(yl,j,w),await Pa(De),e("","success"),n(De)}catch(Re){console.error("Login error:",Re),Re.code==="auth/invalid-credential"||Re.code==="auth/wrong-password"?e(" ()","error"):Re.code==="auth/user-not-found"?e("","error"):e(`: ${Re.message}`,"error")}},_e=async le=>{le.preventDefault();try{if((await w_()).some(Y=>Y.name===p)){e("","error");return}const De=p,j=`${De}@workshop.local`,z=await t5(yl,j,w);await r5(z.user,{displayName:p});const V={id:De,name:p,password:w,grade:C,points:0,totalEarned:0,role:ea.STUDENT,avatar:`https://api.dicebear.com/7.x/avataaars/svg?seed=${p}&mouth=smile&eyebrows=defaultNatural&eyes=default`,isApproved:!1};await Pa(V),await yl.signOut(),e("","success"),h(!1),E("")}catch(Re){console.error("Registration error:",Re),Re.code==="auth/email-already-in-use"?e(" (Email )","error"):e(`: ${Re.message}`,"error")}},ae=async le=>{if(le.preventDefault(),M==="0857999")try{await pg(yl,"admin@workshop.local","0857999"),Pa(Lf),e("","success"),n(Lf)}catch(Re){console.error("Admin login error:",Re),e(`: ${Re.code||Re.message}`,"error")}else try{await pg(yl,"admin@workshop.local",M),Pa(Lf),e("","success"),n(Lf)}catch(Re){console.error("Admin login error:",Re),e(`: ${Re.code||Re.message}`,"error")}},K=async le=>{if(le.preventDefault(),X.toLowerCase()==="aaa")try{await ZO(yl),Pa(__),e("","success"),n(__)}catch(Re){console.error("Guest login error:",Re),Re.code==="auth/admin-restricted-operation"?e(" Console  Anonymous","error"):e("","error")}else e("","error")};return v.jsx("div",{className:"min-h-screen bg-[#f8fafc] flex items-center justify-center p-4",children:v.jsxs("div",{className:"bg-white max-w-4xl w-full rounded-[3rem] shadow-2xl overflow-hidden flex flex-col md:flex-row min-h-[600px]",children:[v.jsxs("div",{className:"bg-indigo-600 p-12 text-white md:w-5/12 flex flex-col justify-between relative overflow-hidden",children:[v.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-500 rounded-full -translate-y-1/2 translate-x-1/3 opacity-50"}),v.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-indigo-700 rounded-full translate-y-1/3 -translate-x-1/3 opacity-50"}),v.jsxs("div",{className:"relative z-10",children:[v.jsx("div",{className:"bg-white w-16 h-16 rounded-2xl flex items-center justify-center p-2 mb-6 shadow-xl",children:v.jsx("img",{src:"/wenhong_cramschool/wenhong_logo.jpg",className:"w-full h-full rounded-xl object-cover",alt:"logo"})}),v.jsx("h1",{className:"text-4xl font-black tracking-tight mb-4",children:""}),v.jsx("p",{className:"text-indigo-100 font-medium text-lg leading-relaxed",children:""})]}),v.jsx("div",{className:"relative z-10 text-sm font-medium text-indigo-200",children:" 2026 Workshop System"})]}),v.jsxs("div",{className:"p-8 md:p-12 md:w-7/12 flex flex-col",children:[!c&&v.jsxs("div",{className:"flex gap-2 mb-10 overflow-x-auto pb-2",children:[v.jsxs("button",{onClick:()=>s("student"),className:`flex-1 min-w-[100px] py-3 rounded-xl font-bold text-sm transition-all flex flex-col items-center gap-1 ${t==="student"?"bg-indigo-50 text-indigo-600 ring-2 ring-indigo-500 ring-offset-2":"bg-slate-50 text-slate-400 hover:bg-slate-100"}`,children:[v.jsx(nN,{size:18})," "]}),v.jsxs("button",{onClick:()=>s("admin"),className:`flex-1 min-w-[100px] py-3 rounded-xl font-bold text-sm transition-all flex flex-col items-center gap-1 ${t==="admin"?"bg-indigo-50 text-indigo-600 ring-2 ring-indigo-500 ring-offset-2":"bg-slate-50 text-slate-400 hover:bg-slate-100"}`,children:[v.jsx(rd,{size:18})," "]}),v.jsxs("button",{onClick:()=>s("guest"),className:`flex-1 min-w-[100px] py-3 rounded-xl font-bold text-sm transition-all flex flex-col items-center gap-1 ${t==="guest"?"bg-indigo-50 text-indigo-600 ring-2 ring-500 ring-offset-2":"bg-slate-50 text-slate-400 hover:bg-slate-100"}`,children:[v.jsx(n3,{size:18})," "]})]}),!c&&t==="student"&&v.jsxs("form",{onSubmit:q,className:"space-y-6 flex-1 flex flex-col justify-center animate-in fade-in slide-in-from-right-4 duration-300",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-1",children:""}),v.jsx("p",{className:"text-slate-400",children:""})]}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),v.jsx("input",{type:"text",value:p,onChange:le=>T(le.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:""})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),v.jsx("input",{type:"password",value:w,onChange:le=>E(le.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:""})]})]}),v.jsx("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-4 rounded-2xl shadow-xl shadow-indigo-100 transition-all active:scale-95",children:""}),v.jsx("div",{className:"text-center",children:v.jsx("button",{type:"button",onClick:()=>h(!0),className:"text-indigo-500 font-bold hover:underline",children:""})})]}),c&&v.jsxs("form",{onSubmit:_e,className:"space-y-6 flex-1 flex flex-col justify-center animate-in fade-in slide-in-from-right-4 duration-300",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-1",children:""}),v.jsx("p",{className:"text-slate-400",children:""})]}),v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),v.jsx("input",{type:"text",value:p,onChange:le=>T(le.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:"",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),v.jsx("input",{type:"password",value:w,onChange:le=>E(le.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:"",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),v.jsx("select",{value:C,onChange:le=>I(le.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl px-5 py-4 font-bold text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all appearance-none",children:em.map(le=>v.jsx("option",{value:le,children:le},le))})]})]}),v.jsxs("button",{type:"submit",className:"w-full bg-slate-800 hover:bg-slate-900 text-white font-black py-4 rounded-2xl shadow-xl transition-all active:scale-95 flex items-center justify-center gap-2",children:[v.jsx(Ig,{size:20}),""]}),v.jsx("div",{className:"text-center",children:v.jsx("button",{type:"button",onClick:()=>h(!1),className:"text-slate-400 font-bold hover:text-slate-600",children:""})})]}),!c&&t==="admin"&&v.jsxs("form",{onSubmit:ae,className:"space-y-6 flex-1 flex flex-col justify-center animate-in fade-in slide-in-from-right-4 duration-300",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-1",children:""}),v.jsx("p",{className:"text-slate-400",children:""})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),v.jsx("input",{type:"password",value:M,onChange:le=>B(le.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:"..."})]}),v.jsx("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-4 rounded-2xl shadow-xl shadow-indigo-100 transition-all active:scale-95",children:""})]}),!c&&t==="guest"&&v.jsxs("form",{onSubmit:K,className:"space-y-6 flex-1 flex flex-col justify-center animate-in fade-in slide-in-from-right-4 duration-300",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-1",children:""}),v.jsx("p",{className:"text-slate-400",children:""})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),v.jsx("input",{type:"text",value:X,onChange:le=>$(le.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:"..."})]}),v.jsx("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-4 rounded-2xl shadow-xl shadow-indigo-100 transition-all active:scale-95",children:""})]})]})]})})};class w9 extends ne.Component{constructor(){super(...arguments),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Uncaught error:",e,t)}render(){return this.state.hasError?v.jsx("div",{className:"min-h-screen flex items-center justify-center p-6 bg-slate-50",children:v.jsxs("div",{className:"max-w-md w-full bg-white rounded-[2.5rem] shadow-2xl p-10 text-center border border-red-100",children:[v.jsx("div",{className:"bg-red-50 w-20 h-20 rounded-3xl flex items-center justify-center mx-auto mb-8 border border-red-100 animate-pulse",children:v.jsx(Z3,{className:"text-red-500",size:40})}),v.jsx("h1",{className:"text-2xl font-black text-slate-800 mb-4",children:""}),v.jsx("p",{className:"text-slate-500 mb-10 leading-relaxed font-medium",children:""}),this.state.error&&v.jsx("div",{className:"mb-8 p-4 bg-slate-50 rounded-2xl text-[10px] font-mono text-slate-400 overflow-auto max-h-32 text-left border border-slate-100 italic",children:this.state.error.toString()}),v.jsxs("button",{onClick:()=>window.location.reload(),className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-5 rounded-2xl transition-all shadow-xl shadow-indigo-100 flex items-center justify-center gap-3 active:scale-95",children:[v.jsx(v3,{size:24}),""]})]})}):this.props.children}}const A9=({user:n,currentRank:e,onSwitchUser:t})=>{const s=qa(),[c,h]=ne.useState(!1),p=[{path:"/",label:"",icon:d3},{path:"/shop",label:"",icon:U3},{path:"/wishes",label:"",icon:id},{path:"/history",label:"",icon:nd}];return n.role===ea.ADMIN&&p.push({path:"/admin",label:"",icon:rd}),v.jsxs("nav",{className:"bg-white border-r border-slate-200 w-full md:w-64 md:fixed md:inset-y-0 h-auto md:h-full z-50 shadow-sm",children:[v.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("img",{src:"/wenhong_cramschool/wenhong_logo.jpg",className:"w-8 h-8 rounded-lg shadow-sm object-cover",alt:"logo"}),v.jsx("span",{className:"text-xl font-bold text-slate-800 tracking-tight",children:""})]}),v.jsx("button",{onClick:()=>h(!c),className:"md:hidden text-slate-600",children:c?v.jsx(Oo,{}):v.jsx(E3,{})})]}),v.jsx("div",{className:`${c?"block":"hidden"} md:block p-4 space-y-2`,children:p.map(T=>{const w=T.icon,E=s.pathname===T.path;return v.jsxs(td,{to:T.path,onClick:()=>h(!1),className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 ${E?"bg-indigo-50 text-indigo-700 font-bold shadow-sm":"text-slate-600 hover:bg-slate-50"}`,children:[v.jsx(w,{size:20}),v.jsx("span",{children:T.label})]},T.path)})}),v.jsxs("div",{className:`${c?"block":"hidden"} md:block absolute bottom-0 w-full p-6 border-t border-slate-100 bg-white`,children:[v.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[v.jsx("img",{src:n.avatar,className:"w-10 h-10 rounded-full border-2 border-slate-100 object-cover",alt:"avatar"}),v.jsxs("div",{className:"overflow-hidden",children:[v.jsx("p",{className:"font-bold text-slate-800 truncate text-sm",children:n.name}),v.jsxs("div",{className:`text-[9px] px-2 py-0.5 rounded-full inline-block text-white font-black ${e.color}`,children:[e.icon," ",e.name," Lv.",Math.floor(n.totalEarned/500)+1]})]})]}),v.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-indigo-600 hover:text-indigo-800 transition-colors text-xs font-bold w-full bg-indigo-50 p-2 rounded-lg justify-center mb-2",children:[v.jsx(m3,{size:14}),v.jsx("span",{children:""})]}),v.jsxs(td,{to:"/settings",className:"flex items-center gap-2 text-slate-400 hover:text-slate-600 transition-colors text-xs font-bold w-full p-2 justify-center",children:[v.jsx(L3,{size:14}),v.jsx("span",{children:""})]})]})]})},b9=()=>{const[n,e]=ne.useState(A_()),t=n?Uo.reduce((h,p)=>n.totalEarned>=p.threshold?p:h,Uo[0]):Uo[0],s=()=>{const h=A_();h&&e(h)},c=()=>{AD(),e(null)};return v.jsx(w9,{children:v.jsx(aN,{children:n?v.jsx(II,{children:v.jsxs("div",{className:"min-h-screen flex flex-col md:flex-row bg-[#fbfcfd]",children:[v.jsx(A9,{user:n,currentRank:t,onSwitchUser:c}),v.jsx("main",{className:"flex-1 md:ml-64 p-4 md:p-8",children:v.jsx("div",{className:"max-w-6xl mx-auto",children:v.jsxs(iI,{children:[v.jsx(pl,{path:"/",element:v.jsx(DM,{user:n,rank:t,onUserUpdate:s})}),v.jsx(pl,{path:"/shop",element:v.jsx(MM,{user:n,onUserUpdate:s})}),v.jsx(pl,{path:"/wishes",element:v.jsx(E9,{user:n,onUserUpdate:s})}),v.jsx(pl,{path:"/history",element:v.jsx(HM,{user:n})}),v.jsx(pl,{path:"/admin",element:n.role===ea.ADMIN?v.jsx(x9,{onRefresh:s}):v.jsx(nI,{to:"/",replace:!0})}),v.jsx(pl,{path:"/settings",element:v.jsx(XD,{user:n,onUserUpdate:s})})]})})})]})}):v.jsx(_9,{onLogin:e})})})},Ov=document.getElementById("root");if(!Ov)throw new Error("Could not find root element to mount to");const T9=aC.createRoot(Ov),v9=()=>v.jsxs(v.Fragment,{children:[v.jsx(b9,{}),!1]});T9.render(v.jsx(nr.StrictMode,{children:v.jsx(v9,{})}));
