function gb(i,e){for(var n=0;n<e.length;n++){const a=e[n];if(typeof a!="string"&&!Array.isArray(a)){for(const u in a)if(u!=="default"&&!(u in i)){const f=Object.getOwnPropertyDescriptor(a,u);f&&Object.defineProperty(i,u,f.get?f:{enumerable:!0,get:()=>a[u]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))a(u);new MutationObserver(u=>{for(const f of u)if(f.type==="childList")for(const x of f.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&a(x)}).observe(document,{childList:!0,subtree:!0});function n(u){const f={};return u.integrity&&(f.integrity=u.integrity),u.referrerPolicy&&(f.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?f.credentials="include":u.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function a(u){if(u.ep)return;u.ep=!0;const f=n(u);fetch(u.href,f)}})();var Oh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function G1(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var j0={exports:{}},Hc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G2;function mb(){if(G2)return Hc;G2=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(a,u,f){var x=null;if(f!==void 0&&(x=""+f),u.key!==void 0&&(x=""+u.key),"key"in u){f={};for(var b in u)b!=="key"&&(f[b]=u[b])}else f=u;return u=f.ref,{$$typeof:i,type:a,key:x,ref:u!==void 0?u:null,props:f}}return Hc.Fragment=e,Hc.jsx=n,Hc.jsxs=n,Hc}var Y2;function pb(){return Y2||(Y2=1,j0.exports=mb()),j0.exports}var v=pb(),F0={exports:{}},mt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X2;function xb(){if(X2)return mt;X2=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),x=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),M=Symbol.iterator;function k(ne){return ne===null||typeof ne!="object"?null:(ne=M&&ne[M]||ne["@@iterator"],typeof ne=="function"?ne:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q=Object.assign,z={};function de(ne,Ae,Be){this.props=ne,this.context=Ae,this.refs=z,this.updater=Be||q}de.prototype.isReactComponent={},de.prototype.setState=function(ne,Ae){if(typeof ne!="object"&&typeof ne!="function"&&ne!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ne,Ae,"setState")},de.prototype.forceUpdate=function(ne){this.updater.enqueueForceUpdate(this,ne,"forceUpdate")};function Ee(){}Ee.prototype=de.prototype;function K(ne,Ae,Be){this.props=ne,this.context=Ae,this.refs=z,this.updater=Be||q}var Se=K.prototype=new Ee;Se.constructor=K,Q(Se,de.prototype),Se.isPureReactComponent=!0;var Ve=Array.isArray;function ke(){}var j={H:null,A:null,T:null,S:null},G=Object.prototype.hasOwnProperty;function V(ne,Ae,Be){var Ue=Be.ref;return{$$typeof:i,type:ne,key:Ae,ref:Ue!==void 0?Ue:null,props:Be}}function te(ne,Ae){return V(ne.type,Ae,ne.props)}function W(ne){return typeof ne=="object"&&ne!==null&&ne.$$typeof===i}function J(ne){var Ae={"=":"=0",":":"=2"};return"$"+ne.replace(/[=:]/g,function(Be){return Ae[Be]})}var X=/\/+/g;function $e(ne,Ae){return typeof ne=="object"&&ne!==null&&ne.key!=null?J(""+ne.key):Ae.toString(36)}function he(ne){switch(ne.status){case"fulfilled":return ne.value;case"rejected":throw ne.reason;default:switch(typeof ne.status=="string"?ne.then(ke,ke):(ne.status="pending",ne.then(function(Ae){ne.status==="pending"&&(ne.status="fulfilled",ne.value=Ae)},function(Ae){ne.status==="pending"&&(ne.status="rejected",ne.reason=Ae)})),ne.status){case"fulfilled":return ne.value;case"rejected":throw ne.reason}}throw ne}function me(ne,Ae,Be,Ue,et){var Me=typeof ne;(Me==="undefined"||Me==="boolean")&&(ne=null);var dt=!1;if(ne===null)dt=!0;else switch(Me){case"bigint":case"string":case"number":dt=!0;break;case"object":switch(ne.$$typeof){case i:case e:dt=!0;break;case C:return dt=ne._init,me(dt(ne._payload),Ae,Be,Ue,et)}}if(dt)return et=et(ne),dt=Ue===""?"."+$e(ne,0):Ue,Ve(et)?(Be="",dt!=null&&(Be=dt.replace(X,"$&/")+"/"),me(et,Ae,Be,"",function(Yi){return Yi})):et!=null&&(W(et)&&(et=te(et,Be+(et.key==null||ne&&ne.key===et.key?"":(""+et.key).replace(X,"$&/")+"/")+dt)),Ae.push(et)),1;dt=0;var Et=Ue===""?".":Ue+":";if(Ve(ne))for(var Yt=0;Yt<ne.length;Yt++)Ue=ne[Yt],Me=Et+$e(Ue,Yt),dt+=me(Ue,Ae,Be,Me,et);else if(Yt=k(ne),typeof Yt=="function")for(ne=Yt.call(ne),Yt=0;!(Ue=ne.next()).done;)Ue=Ue.value,Me=Et+$e(Ue,Yt++),dt+=me(Ue,Ae,Be,Me,et);else if(Me==="object"){if(typeof ne.then=="function")return me(he(ne),Ae,Be,Ue,et);throw Ae=String(ne),Error("Objects are not valid as a React child (found: "+(Ae==="[object Object]"?"object with keys {"+Object.keys(ne).join(", ")+"}":Ae)+"). If you meant to render a collection of children, use an array instead.")}return dt}function we(ne,Ae,Be){if(ne==null)return ne;var Ue=[],et=0;return me(ne,Ue,"","",function(Me){return Ae.call(Be,Me,et++)}),Ue}function Ge(ne){if(ne._status===-1){var Ae=ne._result;Ae=Ae(),Ae.then(function(Be){(ne._status===0||ne._status===-1)&&(ne._status=1,ne._result=Be)},function(Be){(ne._status===0||ne._status===-1)&&(ne._status=2,ne._result=Be)}),ne._status===-1&&(ne._status=0,ne._result=Ae)}if(ne._status===1)return ne._result.default;throw ne._result}var at=typeof reportError=="function"?reportError:function(ne){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ne=="object"&&ne!==null&&typeof ne.message=="string"?String(ne.message):String(ne),error:ne});if(!window.dispatchEvent(Ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ne);return}console.error(ne)},ft={map:we,forEach:function(ne,Ae,Be){we(ne,function(){Ae.apply(this,arguments)},Be)},count:function(ne){var Ae=0;return we(ne,function(){Ae++}),Ae},toArray:function(ne){return we(ne,function(Ae){return Ae})||[]},only:function(ne){if(!W(ne))throw Error("React.Children.only expected to receive a single React element child.");return ne}};return mt.Activity=I,mt.Children=ft,mt.Component=de,mt.Fragment=n,mt.Profiler=u,mt.PureComponent=K,mt.StrictMode=a,mt.Suspense=T,mt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,mt.__COMPILER_RUNTIME={__proto__:null,c:function(ne){return j.H.useMemoCache(ne)}},mt.cache=function(ne){return function(){return ne.apply(null,arguments)}},mt.cacheSignal=function(){return null},mt.cloneElement=function(ne,Ae,Be){if(ne==null)throw Error("The argument must be a React element, but you passed "+ne+".");var Ue=Q({},ne.props),et=ne.key;if(Ae!=null)for(Me in Ae.key!==void 0&&(et=""+Ae.key),Ae)!G.call(Ae,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&Ae.ref===void 0||(Ue[Me]=Ae[Me]);var Me=arguments.length-2;if(Me===1)Ue.children=Be;else if(1<Me){for(var dt=Array(Me),Et=0;Et<Me;Et++)dt[Et]=arguments[Et+2];Ue.children=dt}return V(ne.type,et,Ue)},mt.createContext=function(ne){return ne={$$typeof:x,_currentValue:ne,_currentValue2:ne,_threadCount:0,Provider:null,Consumer:null},ne.Provider=ne,ne.Consumer={$$typeof:f,_context:ne},ne},mt.createElement=function(ne,Ae,Be){var Ue,et={},Me=null;if(Ae!=null)for(Ue in Ae.key!==void 0&&(Me=""+Ae.key),Ae)G.call(Ae,Ue)&&Ue!=="key"&&Ue!=="__self"&&Ue!=="__source"&&(et[Ue]=Ae[Ue]);var dt=arguments.length-2;if(dt===1)et.children=Be;else if(1<dt){for(var Et=Array(dt),Yt=0;Yt<dt;Yt++)Et[Yt]=arguments[Yt+2];et.children=Et}if(ne&&ne.defaultProps)for(Ue in dt=ne.defaultProps,dt)et[Ue]===void 0&&(et[Ue]=dt[Ue]);return V(ne,Me,et)},mt.createRef=function(){return{current:null}},mt.forwardRef=function(ne){return{$$typeof:b,render:ne}},mt.isValidElement=W,mt.lazy=function(ne){return{$$typeof:C,_payload:{_status:-1,_result:ne},_init:Ge}},mt.memo=function(ne,Ae){return{$$typeof:E,type:ne,compare:Ae===void 0?null:Ae}},mt.startTransition=function(ne){var Ae=j.T,Be={};j.T=Be;try{var Ue=ne(),et=j.S;et!==null&&et(Be,Ue),typeof Ue=="object"&&Ue!==null&&typeof Ue.then=="function"&&Ue.then(ke,at)}catch(Me){at(Me)}finally{Ae!==null&&Be.types!==null&&(Ae.types=Be.types),j.T=Ae}},mt.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},mt.use=function(ne){return j.H.use(ne)},mt.useActionState=function(ne,Ae,Be){return j.H.useActionState(ne,Ae,Be)},mt.useCallback=function(ne,Ae){return j.H.useCallback(ne,Ae)},mt.useContext=function(ne){return j.H.useContext(ne)},mt.useDebugValue=function(){},mt.useDeferredValue=function(ne,Ae){return j.H.useDeferredValue(ne,Ae)},mt.useEffect=function(ne,Ae){return j.H.useEffect(ne,Ae)},mt.useEffectEvent=function(ne){return j.H.useEffectEvent(ne)},mt.useId=function(){return j.H.useId()},mt.useImperativeHandle=function(ne,Ae,Be){return j.H.useImperativeHandle(ne,Ae,Be)},mt.useInsertionEffect=function(ne,Ae){return j.H.useInsertionEffect(ne,Ae)},mt.useLayoutEffect=function(ne,Ae){return j.H.useLayoutEffect(ne,Ae)},mt.useMemo=function(ne,Ae){return j.H.useMemo(ne,Ae)},mt.useOptimistic=function(ne,Ae){return j.H.useOptimistic(ne,Ae)},mt.useReducer=function(ne,Ae,Be){return j.H.useReducer(ne,Ae,Be)},mt.useRef=function(ne){return j.H.useRef(ne)},mt.useState=function(ne){return j.H.useState(ne)},mt.useSyncExternalStore=function(ne,Ae,Be){return j.H.useSyncExternalStore(ne,Ae,Be)},mt.useTransition=function(){return j.H.useTransition()},mt.version="19.2.3",mt}var q2;function Y1(){return q2||(q2=1,F0.exports=xb()),F0.exports}var se=Y1();const gi=G1(se);var z0={exports:{}},Gc={},H0={exports:{}},G0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q2;function yb(){return Q2||(Q2=1,(function(i){function e(me,we){var Ge=me.length;me.push(we);e:for(;0<Ge;){var at=Ge-1>>>1,ft=me[at];if(0<u(ft,we))me[at]=we,me[Ge]=ft,Ge=at;else break e}}function n(me){return me.length===0?null:me[0]}function a(me){if(me.length===0)return null;var we=me[0],Ge=me.pop();if(Ge!==we){me[0]=Ge;e:for(var at=0,ft=me.length,ne=ft>>>1;at<ne;){var Ae=2*(at+1)-1,Be=me[Ae],Ue=Ae+1,et=me[Ue];if(0>u(Be,Ge))Ue<ft&&0>u(et,Be)?(me[at]=et,me[Ue]=Ge,at=Ue):(me[at]=Be,me[Ae]=Ge,at=Ae);else if(Ue<ft&&0>u(et,Ge))me[at]=et,me[Ue]=Ge,at=Ue;else break e}}return we}function u(me,we){var Ge=me.sortIndex-we.sortIndex;return Ge!==0?Ge:me.id-we.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;i.unstable_now=function(){return f.now()}}else{var x=Date,b=x.now();i.unstable_now=function(){return x.now()-b}}var T=[],E=[],C=1,I=null,M=3,k=!1,q=!1,Q=!1,z=!1,de=typeof setTimeout=="function"?setTimeout:null,Ee=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function Se(me){for(var we=n(E);we!==null;){if(we.callback===null)a(E);else if(we.startTime<=me)a(E),we.sortIndex=we.expirationTime,e(T,we);else break;we=n(E)}}function Ve(me){if(Q=!1,Se(me),!q)if(n(T)!==null)q=!0,ke||(ke=!0,J());else{var we=n(E);we!==null&&he(Ve,we.startTime-me)}}var ke=!1,j=-1,G=5,V=-1;function te(){return z?!0:!(i.unstable_now()-V<G)}function W(){if(z=!1,ke){var me=i.unstable_now();V=me;var we=!0;try{e:{q=!1,Q&&(Q=!1,Ee(j),j=-1),k=!0;var Ge=M;try{t:{for(Se(me),I=n(T);I!==null&&!(I.expirationTime>me&&te());){var at=I.callback;if(typeof at=="function"){I.callback=null,M=I.priorityLevel;var ft=at(I.expirationTime<=me);if(me=i.unstable_now(),typeof ft=="function"){I.callback=ft,Se(me),we=!0;break t}I===n(T)&&a(T),Se(me)}else a(T);I=n(T)}if(I!==null)we=!0;else{var ne=n(E);ne!==null&&he(Ve,ne.startTime-me),we=!1}}break e}finally{I=null,M=Ge,k=!1}we=void 0}}finally{we?J():ke=!1}}}var J;if(typeof K=="function")J=function(){K(W)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,$e=X.port2;X.port1.onmessage=W,J=function(){$e.postMessage(null)}}else J=function(){de(W,0)};function he(me,we){j=de(function(){me(i.unstable_now())},we)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(me){me.callback=null},i.unstable_forceFrameRate=function(me){0>me||125<me?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<me?Math.floor(1e3/me):5},i.unstable_getCurrentPriorityLevel=function(){return M},i.unstable_next=function(me){switch(M){case 1:case 2:case 3:var we=3;break;default:we=M}var Ge=M;M=we;try{return me()}finally{M=Ge}},i.unstable_requestPaint=function(){z=!0},i.unstable_runWithPriority=function(me,we){switch(me){case 1:case 2:case 3:case 4:case 5:break;default:me=3}var Ge=M;M=me;try{return we()}finally{M=Ge}},i.unstable_scheduleCallback=function(me,we,Ge){var at=i.unstable_now();switch(typeof Ge=="object"&&Ge!==null?(Ge=Ge.delay,Ge=typeof Ge=="number"&&0<Ge?at+Ge:at):Ge=at,me){case 1:var ft=-1;break;case 2:ft=250;break;case 5:ft=1073741823;break;case 4:ft=1e4;break;default:ft=5e3}return ft=Ge+ft,me={id:C++,callback:we,priorityLevel:me,startTime:Ge,expirationTime:ft,sortIndex:-1},Ge>at?(me.sortIndex=Ge,e(E,me),n(T)===null&&me===n(E)&&(Q?(Ee(j),j=-1):Q=!0,he(Ve,Ge-at))):(me.sortIndex=ft,e(T,me),q||k||(q=!0,ke||(ke=!0,J()))),me},i.unstable_shouldYield=te,i.unstable_wrapCallback=function(me){var we=M;return function(){var Ge=M;M=we;try{return me.apply(this,arguments)}finally{M=Ge}}}})(G0)),G0}var W2;function Eb(){return W2||(W2=1,H0.exports=yb()),H0.exports}var Y0={exports:{}},er={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K2;function _b(){if(K2)return er;K2=1;var i=Y1();function e(T){var E="https://react.dev/errors/"+T;if(1<arguments.length){E+="?args[]="+encodeURIComponent(arguments[1]);for(var C=2;C<arguments.length;C++)E+="&args[]="+encodeURIComponent(arguments[C])}return"Minified React error #"+T+"; visit "+E+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var a={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},u=Symbol.for("react.portal");function f(T,E,C){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:I==null?null:""+I,children:T,containerInfo:E,implementation:C}}var x=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function b(T,E){if(T==="font")return"";if(typeof E=="string")return E==="use-credentials"?E:""}return er.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,er.createPortal=function(T,E){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!E||E.nodeType!==1&&E.nodeType!==9&&E.nodeType!==11)throw Error(e(299));return f(T,E,null,C)},er.flushSync=function(T){var E=x.T,C=a.p;try{if(x.T=null,a.p=2,T)return T()}finally{x.T=E,a.p=C,a.d.f()}},er.preconnect=function(T,E){typeof T=="string"&&(E?(E=E.crossOrigin,E=typeof E=="string"?E==="use-credentials"?E:"":void 0):E=null,a.d.C(T,E))},er.prefetchDNS=function(T){typeof T=="string"&&a.d.D(T)},er.preinit=function(T,E){if(typeof T=="string"&&E&&typeof E.as=="string"){var C=E.as,I=b(C,E.crossOrigin),M=typeof E.integrity=="string"?E.integrity:void 0,k=typeof E.fetchPriority=="string"?E.fetchPriority:void 0;C==="style"?a.d.S(T,typeof E.precedence=="string"?E.precedence:void 0,{crossOrigin:I,integrity:M,fetchPriority:k}):C==="script"&&a.d.X(T,{crossOrigin:I,integrity:M,fetchPriority:k,nonce:typeof E.nonce=="string"?E.nonce:void 0})}},er.preinitModule=function(T,E){if(typeof T=="string")if(typeof E=="object"&&E!==null){if(E.as==null||E.as==="script"){var C=b(E.as,E.crossOrigin);a.d.M(T,{crossOrigin:C,integrity:typeof E.integrity=="string"?E.integrity:void 0,nonce:typeof E.nonce=="string"?E.nonce:void 0})}}else E==null&&a.d.M(T)},er.preload=function(T,E){if(typeof T=="string"&&typeof E=="object"&&E!==null&&typeof E.as=="string"){var C=E.as,I=b(C,E.crossOrigin);a.d.L(T,C,{crossOrigin:I,integrity:typeof E.integrity=="string"?E.integrity:void 0,nonce:typeof E.nonce=="string"?E.nonce:void 0,type:typeof E.type=="string"?E.type:void 0,fetchPriority:typeof E.fetchPriority=="string"?E.fetchPriority:void 0,referrerPolicy:typeof E.referrerPolicy=="string"?E.referrerPolicy:void 0,imageSrcSet:typeof E.imageSrcSet=="string"?E.imageSrcSet:void 0,imageSizes:typeof E.imageSizes=="string"?E.imageSizes:void 0,media:typeof E.media=="string"?E.media:void 0})}},er.preloadModule=function(T,E){if(typeof T=="string")if(E){var C=b(E.as,E.crossOrigin);a.d.m(T,{as:typeof E.as=="string"&&E.as!=="script"?E.as:void 0,crossOrigin:C,integrity:typeof E.integrity=="string"?E.integrity:void 0})}else a.d.m(T)},er.requestFormReset=function(T){a.d.r(T)},er.unstable_batchedUpdates=function(T,E){return T(E)},er.useFormState=function(T,E,C){return x.H.useFormState(T,E,C)},er.useFormStatus=function(){return x.H.useHostTransitionStatus()},er.version="19.2.3",er}var Z2;function Ab(){if(Z2)return Y0.exports;Z2=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Y0.exports=_b(),Y0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J2;function wb(){if(J2)return Gc;J2=1;var i=Eb(),e=Y1(),n=Ab();function a(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function f(t){var s=t,c=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(c=s.return),t=s.return;while(t)}return s.tag===3?c:null}function x(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function b(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function T(t){if(f(t)!==t)throw Error(a(188))}function E(t){var s=t.alternate;if(!s){if(s=f(t),s===null)throw Error(a(188));return s!==t?null:t}for(var c=t,g=s;;){var _=c.return;if(_===null)break;var w=_.alternate;if(w===null){if(g=_.return,g!==null){c=g;continue}break}if(_.child===w.child){for(w=_.child;w;){if(w===c)return T(_),t;if(w===g)return T(_),s;w=w.sibling}throw Error(a(188))}if(c.return!==g.return)c=_,g=w;else{for(var O=!1,U=_.child;U;){if(U===c){O=!0,c=_,g=w;break}if(U===g){O=!0,g=_,c=w;break}U=U.sibling}if(!O){for(U=w.child;U;){if(U===c){O=!0,c=w,g=_;break}if(U===g){O=!0,g=w,c=_;break}U=U.sibling}if(!O)throw Error(a(189))}}if(c.alternate!==g)throw Error(a(190))}if(c.tag!==3)throw Error(a(188));return c.stateNode.current===c?t:s}function C(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=C(t),s!==null)return s;t=t.sibling}return null}var I=Object.assign,M=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),q=Symbol.for("react.portal"),Q=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),de=Symbol.for("react.profiler"),Ee=Symbol.for("react.consumer"),K=Symbol.for("react.context"),Se=Symbol.for("react.forward_ref"),Ve=Symbol.for("react.suspense"),ke=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),te=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function J(t){return t===null||typeof t!="object"?null:(t=W&&t[W]||t["@@iterator"],typeof t=="function"?t:null)}var X=Symbol.for("react.client.reference");function $e(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===X?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Q:return"Fragment";case de:return"Profiler";case z:return"StrictMode";case Ve:return"Suspense";case ke:return"SuspenseList";case V:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case q:return"Portal";case K:return t.displayName||"Context";case Ee:return(t._context.displayName||"Context")+".Consumer";case Se:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case j:return s=t.displayName||null,s!==null?s:$e(t.type)||"Memo";case G:s=t._payload,t=t._init;try{return $e(t(s))}catch{}}return null}var he=Array.isArray,me=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,we=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ge={pending:!1,data:null,method:null,action:null},at=[],ft=-1;function ne(t){return{current:t}}function Ae(t){0>ft||(t.current=at[ft],at[ft]=null,ft--)}function Be(t,s){ft++,at[ft]=t.current,t.current=s}var Ue=ne(null),et=ne(null),Me=ne(null),dt=ne(null);function Et(t,s){switch(Be(Me,s),Be(et,t),Be(Ue,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?d2(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=d2(s),t=g2(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Ae(Ue),Be(Ue,t)}function Yt(){Ae(Ue),Ae(et),Ae(Me)}function Yi(t){t.memoizedState!==null&&Be(dt,t);var s=Ue.current,c=g2(s,t.type);s!==c&&(Be(et,t),Be(Ue,c))}function En(t){et.current===t&&(Ae(Ue),Ae(et)),dt.current===t&&(Ae(dt),Vc._currentValue=Ge)}var gr,xt;function ai(t){if(gr===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);gr=s&&s[1]||"",xt=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+gr+t+xt}var oi=!1;function Xi(t,s){if(!t||oi)return"";oi=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(s){var Ce=function(){throw Error()};if(Object.defineProperty(Ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ce,[])}catch(_e){var ge=_e}Reflect.construct(t,[],Ce)}else{try{Ce.call()}catch(_e){ge=_e}t.call(Ce.prototype)}}else{try{throw Error()}catch(_e){ge=_e}(Ce=t())&&typeof Ce.catch=="function"&&Ce.catch(function(){})}}catch(_e){if(_e&&ge&&typeof _e.stack=="string")return[_e.stack,ge.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=g.DetermineComponentFrameRoot(),O=w[0],U=w[1];if(O&&U){var Z=O.split(`
`),fe=U.split(`
`);for(_=g=0;g<Z.length&&!Z[g].includes("DetermineComponentFrameRoot");)g++;for(;_<fe.length&&!fe[_].includes("DetermineComponentFrameRoot");)_++;if(g===Z.length||_===fe.length)for(g=Z.length-1,_=fe.length-1;1<=g&&0<=_&&Z[g]!==fe[_];)_--;for(;1<=g&&0<=_;g--,_--)if(Z[g]!==fe[_]){if(g!==1||_!==1)do if(g--,_--,0>_||Z[g]!==fe[_]){var Te=`
`+Z[g].replace(" at new "," at ");return t.displayName&&Te.includes("<anonymous>")&&(Te=Te.replace("<anonymous>",t.displayName)),Te}while(1<=g&&0<=_);break}}}finally{oi=!1,Error.prepareStackTrace=c}return(c=t?t.displayName||t.name:"")?ai(c):""}function _n(t,s){switch(t.tag){case 26:case 27:case 5:return ai(t.type);case 16:return ai("Lazy");case 13:return t.child!==s&&s!==null?ai("Suspense Fallback"):ai("Suspense");case 19:return ai("SuspenseList");case 0:case 15:return Xi(t.type,!1);case 11:return Xi(t.type.render,!1);case 1:return Xi(t.type,!0);case 31:return ai("Activity");default:return""}}function zt(t){try{var s="",c=null;do s+=_n(t,c),c=t,t=t.return;while(t);return s}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var We=Object.prototype.hasOwnProperty,An=i.unstable_scheduleCallback,Fe=i.unstable_cancelCallback,ms=i.unstable_shouldYield,Cs=i.unstable_requestPaint,hn=i.unstable_now,Rr=i.unstable_getCurrentPriorityLevel,li=i.unstable_ImmediatePriority,vs=i.unstable_UserBlockingPriority,pi=i.unstable_NormalPriority,ei=i.unstable_LowPriority,Qs=i.unstable_IdlePriority,ps=i.log,Oa=i.unstable_setDisableYieldValue,Xt=null,Oe=null;function qt(t){if(typeof ps=="function"&&Oa(t),Oe&&typeof Oe.setStrictMode=="function")try{Oe.setStrictMode(Xt,t)}catch{}}var it=Math.clz32?Math.clz32:Is,fn=Math.log,mr=Math.LN2;function Is(t){return t>>>=0,t===0?32:31-(fn(t)/mr|0)|0}var rr=256,_t=262144,sn=4194304;function re(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function lt(t,s,c){var g=t.pendingLanes;if(g===0)return 0;var _=0,w=t.suspendedLanes,O=t.pingedLanes;t=t.warmLanes;var U=g&134217727;return U!==0?(g=U&~w,g!==0?_=re(g):(O&=U,O!==0?_=re(O):c||(c=U&~t,c!==0&&(_=re(c))))):(U=g&~w,U!==0?_=re(U):O!==0?_=re(O):c||(c=g&~t,c!==0&&(_=re(c)))),_===0?0:s!==0&&s!==_&&(s&w)===0&&(w=_&-_,c=s&-s,w>=c||w===32&&(c&4194048)!==0)?s:_}function Tt(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function qi(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qt(){var t=sn;return sn<<=1,(sn&62914560)===0&&(sn=4194304),t}function Xn(t){for(var s=[],c=0;31>c;c++)s.push(t);return s}function Ii(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function wi(t,s,c,g,_,w){var O=t.pendingLanes;t.pendingLanes=c,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=c,t.entangledLanes&=c,t.errorRecoveryDisabledLanes&=c,t.shellSuspendCounter=0;var U=t.entanglements,Z=t.expirationTimes,fe=t.hiddenUpdates;for(c=O&~c;0<c;){var Te=31-it(c),Ce=1<<Te;U[Te]=0,Z[Te]=-1;var ge=fe[Te];if(ge!==null)for(fe[Te]=null,Te=0;Te<ge.length;Te++){var _e=ge[Te];_e!==null&&(_e.lane&=-536870913)}c&=~Ce}g!==0&&qr(t,g,0),w!==0&&_===0&&t.tag!==0&&(t.suspendedLanes|=w&~(O&~s))}function qr(t,s,c){t.pendingLanes|=s,t.suspendedLanes&=~s;var g=31-it(s);t.entangledLanes|=s,t.entanglements[g]=t.entanglements[g]|1073741824|c&261930}function qn(t,s){var c=t.entangledLanes|=s;for(t=t.entanglements;c;){var g=31-it(c),_=1<<g;_&s|t[g]&s&&(t[g]|=s),c&=~_}}function Ws(t,s){var c=s&-s;return c=(c&42)!==0?1:Qn(c),(c&(t.suspendedLanes|s))!==0?0:c}function Qn(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ni(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Ri(){var t=we.p;return t!==0?t:(t=window.event,t===void 0?32:k2(t.type))}function je(t,s){var c=we.p;try{return we.p=t,s()}finally{we.p=c}}var Ti=Math.random().toString(36).slice(2),Dn="__reactFiber$"+Ti,$t="__reactProps$"+Ti,Oi="__reactContainer$"+Ti,xs="__reactEvents$"+Ti,Da="__reactListeners$"+Ti,sr="__reactHandles$"+Ti,ll="__reactResources$"+Ti,Qr="__reactMarker$"+Ti;function Di(t){delete t[Dn],delete t[$t],delete t[xs],delete t[Da],delete t[sr]}function Sn(t){var s=t[Dn];if(s)return s;for(var c=t.parentNode;c;){if(s=c[Oi]||c[Dn]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(t=A2(t);t!==null;){if(c=t[Dn])return c;t=A2(t)}return s}t=c,c=t.parentNode}return null}function Rt(t){if(t=t[Dn]||t[Oi]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function Qi(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(a(33))}function xi(t){var s=t[ll];return s||(s=t[ll]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Mn(t){t[Qr]=!0}var ve=new Set,vo={};function en(t,s){Mi(t,s),Mi(t+"Capture",s)}function Mi(t,s){for(vo[t]=s,t=0;t<s.length;t++)ve.add(s[t])}var Io=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Pt={},Ot={};function bt(t){return We.call(Ot,t)?!0:We.call(Pt,t)?!1:Io.test(t)?Ot[t]=!0:(Pt[t]=!0,!1)}function Ns(t,s,c){if(bt(s))if(c===null)t.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var g=s.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+c)}}function Li(t,s,c){if(c===null)t.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+c)}}function Ln(t,s,c,g){if(g===null)t.removeAttribute(c);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(c);return}t.setAttributeNS(s,c,""+g)}}function vt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Bi(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function No(t,s,c){var g=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var _=g.get,w=g.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return _.call(this)},set:function(O){c=""+O,w.call(this,O)}}),Object.defineProperty(t,s,{enumerable:g.enumerable}),{getValue:function(){return c},setValue:function(O){c=""+O},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function rt(t){if(!t._valueTracker){var s=Bi(t)?"checked":"value";t._valueTracker=No(t,s,""+t[s])}}function Wi(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var c=s.getValue(),g="";return t&&(g=Bi(t)?t.checked?"true":"false":t.value),t=g,t!==c?(s.setValue(t),!0):!1}function Wr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var pr=/[\n"\\]/g;function At(t){return t.replace(pr,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function jn(t,s,c,g,_,w,O,U){t.name="",O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?t.type=O:t.removeAttribute("type"),s!=null?O==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+vt(s)):t.value!==""+vt(s)&&(t.value=""+vt(s)):O!=="submit"&&O!=="reset"||t.removeAttribute("value"),s!=null?H(t,O,vt(s)):c!=null?H(t,O,vt(c)):g!=null&&t.removeAttribute("value"),_==null&&w!=null&&(t.defaultChecked=!!w),_!=null&&(t.checked=_&&typeof _!="function"&&typeof _!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?t.name=""+vt(U):t.removeAttribute("name")}function ce(t,s,c,g,_,w,O,U){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(t.type=w),s!=null||c!=null){if(!(w!=="submit"&&w!=="reset"||s!=null)){rt(t);return}c=c!=null?""+vt(c):"",s=s!=null?""+vt(s):c,U||s===t.value||(t.value=s),t.defaultValue=s}g=g??_,g=typeof g!="function"&&typeof g!="symbol"&&!!g,t.checked=U?t.checked:!!g,t.defaultChecked=!!g,O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(t.name=O),rt(t)}function H(t,s,c){s==="number"&&Wr(t.ownerDocument)===t||t.defaultValue===""+c||(t.defaultValue=""+c)}function Ye(t,s,c,g){if(t=t.options,s){s={};for(var _=0;_<c.length;_++)s["$"+c[_]]=!0;for(c=0;c<t.length;c++)_=s.hasOwnProperty("$"+t[c].value),t[c].selected!==_&&(t[c].selected=_),_&&g&&(t[c].defaultSelected=!0)}else{for(c=""+vt(c),s=null,_=0;_<t.length;_++){if(t[_].value===c){t[_].selected=!0,g&&(t[_].defaultSelected=!0);return}s!==null||t[_].disabled||(s=t[_])}s!==null&&(s.selected=!0)}}function Fn(t,s,c){if(s!=null&&(s=""+vt(s),s!==t.value&&(t.value=s),c==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=c!=null?""+vt(c):""}function ti(t,s,c,g){if(s==null){if(g!=null){if(c!=null)throw Error(a(92));if(he(g)){if(1<g.length)throw Error(a(93));g=g[0]}c=g}c==null&&(c=""),s=c}c=vt(s),t.defaultValue=c,g=t.textContent,g===c&&g!==""&&g!==null&&(t.value=g),rt(t)}function Ki(t,s){if(s){var c=t.firstChild;if(c&&c===t.lastChild&&c.nodeType===3){c.nodeValue=s;return}}t.textContent=s}var Ma=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function bi(t,s,c){var g=s.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?g?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":g?t.setProperty(s,c):typeof c!="number"||c===0||Ma.has(s)?s==="float"?t.cssFloat=c:t[s]=(""+c).trim():t[s]=c+"px"}function Ke(t,s,c){if(s!=null&&typeof s!="object")throw Error(a(62));if(t=t.style,c!=null){for(var g in c)!c.hasOwnProperty(g)||s!=null&&s.hasOwnProperty(g)||(g.indexOf("--")===0?t.setProperty(g,""):g==="float"?t.cssFloat="":t[g]="");for(var _ in s)g=s[_],s.hasOwnProperty(_)&&c[_]!==g&&bi(t,_,g)}else for(var w in s)s.hasOwnProperty(w)&&bi(t,w,s[w])}function on(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ro=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Rs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Os(t){return Rs.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Zi(){}var Ks=null;function xr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var wn=null,Ji=null;function $i(t){var s=Rt(t);if(s&&(t=s.stateNode)){var c=t[$t]||null;e:switch(t=s.stateNode,s.type){case"input":if(jn(t,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),s=c.name,c.type==="radio"&&s!=null){for(c=t;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+At(""+s)+'"][type="radio"]'),s=0;s<c.length;s++){var g=c[s];if(g!==t&&g.form===t.form){var _=g[$t]||null;if(!_)throw Error(a(90));jn(g,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(s=0;s<c.length;s++)g=c[s],g.form===t.form&&Wi(g)}break e;case"textarea":Fn(t,c.value,c.defaultValue);break e;case"select":s=c.value,s!=null&&Ye(t,!!c.multiple,s,!1)}}}var Ze=!1;function Ds(t,s,c){if(Ze)return t(s,c);Ze=!0;try{var g=t(s);return g}finally{if(Ze=!1,(wn!==null||Ji!==null)&&(ch(),wn&&(s=wn,t=Ji,Ji=wn=null,$i(s),t)))for(s=0;s<t.length;s++)$i(t[s])}}function nt(t,s){var c=t.stateNode;if(c===null)return null;var g=c[$t]||null;if(g===null)return null;c=g[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(t=t.type,g=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!g;break e;default:t=!1}if(t)return null;if(c&&typeof c!="function")throw Error(a(231,s,typeof c));return c}var ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zs=!1;if(ln)try{var tn={};Object.defineProperty(tn,"passive",{get:function(){Zs=!0}}),window.addEventListener("test",tn,tn),window.removeEventListener("test",tn,tn)}catch{Zs=!1}var Or=null,Dr=null,Js=null;function ys(){if(Js)return Js;var t,s=Dr,c=s.length,g,_="value"in Or?Or.value:Or.textContent,w=_.length;for(t=0;t<c&&s[t]===_[t];t++);var O=c-t;for(g=1;g<=O&&s[c-g]===_[w-g];g++);return Js=_.slice(t,1<g?1-g:void 0)}function Mr(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function ar(){return!0}function yr(){return!1}function zn(t){function s(c,g,_,w,O){this._reactName=c,this._targetInst=_,this.type=g,this.nativeEvent=w,this.target=O,this.currentTarget=null;for(var U in t)t.hasOwnProperty(U)&&(c=t[U],this[U]=c?c(w):w[U]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?ar:yr,this.isPropagationStopped=yr,this}return I(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=ar)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=ar)},persist:function(){},isPersistent:ar}),s}var or={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cn=zn(or),Es=I({},or,{view:0,detail:0}),La=zn(Es),_s,Ba,Kr,Pa=I({},Es,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Kr&&(Kr&&t.type==="mousemove"?(_s=t.screenX-Kr.screenX,Ba=t.screenY-Kr.screenY):Ba=_s=0,Kr=t),_s)},movementY:function(t){return"movementY"in t?t.movementY:Ba}}),Wt=zn(Pa),Ms=I({},Pa,{dataTransfer:0}),$s=zn(Ms),Lr=I({},Es,{relatedTarget:0}),ea=zn(Lr),pe=I({},or,{animationName:0,elapsedTime:0,pseudoElement:0}),gt=zn(pe),Bn=I({},or,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ta=zn(Bn),Oo=I({},or,{data:0}),Zr=zn(Oo),cl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ul={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ka={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pn(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=ka[t])?!!s[t]:!1}function Jr(){return Pn}var It=I({},Es,{key:function(t){if(t.key){var s=cl[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Mr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ul[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jr,charCode:function(t){return t.type==="keypress"?Mr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Mr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),na=zn(It),$r=I({},Pa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dt=zn($r),p=I({},Es,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jr}),N=zn(p),D=I({},or,{propertyName:0,elapsedTime:0,pseudoElement:0}),F=zn(D),oe=I({},Pa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ye=zn(oe),Pe=I({},or,{newState:0,oldState:0}),ct=zn(Pe),kn=[9,13,27,32],Ht=ln&&"CompositionEvent"in window,Tn=null;ln&&"documentMode"in document&&(Tn=document.documentMode);var lr=ln&&"TextEvent"in window&&!Tn,es=ln&&(!Ht||Tn&&8<Tn&&11>=Tn),Si=" ",cr=!1;function ia(t,s){switch(t){case"keyup":return kn.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ts(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ua=!1;function Ls(t,s){switch(t){case"compositionend":return ts(s);case"keypress":return s.which!==32?null:(cr=!0,Si);case"textInput":return t=s.data,t===Si&&cr?null:t;default:return null}}function hl(t,s){if(Ua)return t==="compositionend"||!Ht&&ia(t,s)?(t=ys(),Js=Dr=Or=null,Ua=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return es&&s.locale!=="ko"?null:s.data;default:return null}}var Er={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cc(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Er[t.type]:s==="textarea"}function Br(t,s,c,g){wn?Ji?Ji.push(g):Ji=[g]:wn=g,s=ph(s,"onChange"),0<s.length&&(c=new Cn("onChange","change",null,c,g),t.push({event:c,listeners:s}))}var Do=null,ra=null;function $f(t){o2(t,0)}function Mo(t){var s=Qi(t);if(Wi(s))return t}function Pr(t,s){if(t==="change")return s}var vu=!1;if(ln){var Lo;if(ln){var sa="oninput"in document;if(!sa){var kt=document.createElement("div");kt.setAttribute("oninput","return;"),sa=typeof kt.oninput=="function"}Lo=sa}else Lo=!1;vu=Lo&&(!document.documentMode||9<document.documentMode)}function Bo(){Do&&(Do.detachEvent("onpropertychange",L),ra=Do=null)}function L(t){if(t.propertyName==="value"&&Mo(ra)){var s=[];Br(s,ra,t,xr(t)),Ds($f,s)}}function r(t,s,c){t==="focusin"?(Bo(),Do=s,ra=c,Do.attachEvent("onpropertychange",L)):t==="focusout"&&Bo()}function o(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Mo(ra)}function l(t,s){if(t==="click")return Mo(s)}function h(t,s){if(t==="input"||t==="change")return Mo(s)}function d(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var m=typeof Object.is=="function"?Object.is:d;function y(t,s){if(m(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var c=Object.keys(t),g=Object.keys(s);if(c.length!==g.length)return!1;for(g=0;g<c.length;g++){var _=c[g];if(!We.call(s,_)||!m(t[_],s[_]))return!1}return!0}function A(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function S(t,s){var c=A(t);t=0;for(var g;c;){if(c.nodeType===3){if(g=t+c.textContent.length,t<=s&&g>=s)return{node:c,offset:s-t};t=g}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=A(c)}}function R(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?R(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function B(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=Wr(t.document);s instanceof t.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)t=s.contentWindow;else break;s=Wr(t.document)}return s}function P(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var Y=ln&&"documentMode"in document&&11>=document.documentMode,$=null,ee=null,le=null,xe=!1;function Le(t,s,c){var g=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;xe||$==null||$!==Wr(g)||(g=$,"selectionStart"in g&&P(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),le&&y(le,g)||(le=g,g=ph(ee,"onSelect"),0<g.length&&(s=new Cn("onSelect","select",null,s,c),t.push({event:s,listeners:g}),s.target=$)))}function De(t,s){var c={};return c[t.toLowerCase()]=s.toLowerCase(),c["Webkit"+t]="webkit"+s,c["Moz"+t]="moz"+s,c}var Re={animationend:De("Animation","AnimationEnd"),animationiteration:De("Animation","AnimationIteration"),animationstart:De("Animation","AnimationStart"),transitionrun:De("Transition","TransitionRun"),transitionstart:De("Transition","TransitionStart"),transitioncancel:De("Transition","TransitionCancel"),transitionend:De("Transition","TransitionEnd")},St={},ut={};ln&&(ut=document.createElement("div").style,"AnimationEvent"in window||(delete Re.animationend.animation,delete Re.animationiteration.animation,delete Re.animationstart.animation),"TransitionEvent"in window||delete Re.transitionend.transition);function Wn(t){if(St[t])return St[t];if(!Re[t])return t;var s=Re[t],c;for(c in s)if(s.hasOwnProperty(c)&&c in ut)return St[t]=s[c];return t}var _r=Wn("animationend"),Pi=Wn("animationiteration"),cn=Wn("animationstart"),yi=Wn("transitionrun"),ur=Wn("transitionstart"),Va=Wn("transitioncancel"),aa=Wn("transitionend"),Iu=new Map,uc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");uc.push("scrollEnd");function As(t,s){Iu.set(t,s),en(s,[t])}var Nu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ns=[],fl=0,ed=0;function Ru(){for(var t=fl,s=ed=fl=0;s<t;){var c=ns[s];ns[s++]=null;var g=ns[s];ns[s++]=null;var _=ns[s];ns[s++]=null;var w=ns[s];if(ns[s++]=null,g!==null&&_!==null){var O=g.pending;O===null?_.next=_:(_.next=O.next,O.next=_),g.pending=_}w!==0&&zg(c,_,w)}}function Ou(t,s,c,g){ns[fl++]=t,ns[fl++]=s,ns[fl++]=c,ns[fl++]=g,ed|=g,t.lanes|=g,t=t.alternate,t!==null&&(t.lanes|=g)}function td(t,s,c,g){return Ou(t,s,c,g),Du(t)}function Po(t,s){return Ou(t,null,null,s),Du(t)}function zg(t,s,c){t.lanes|=c;var g=t.alternate;g!==null&&(g.lanes|=c);for(var _=!1,w=t.return;w!==null;)w.childLanes|=c,g=w.alternate,g!==null&&(g.childLanes|=c),w.tag===22&&(t=w.stateNode,t===null||t._visibility&1||(_=!0)),t=w,w=w.return;return t.tag===3?(w=t.stateNode,_&&s!==null&&(_=31-it(c),t=w.hiddenUpdates,g=t[_],g===null?t[_]=[s]:g.push(s),s.lane=c|536870912),w):null}function Du(t){if(50<Dc)throw Dc=0,u0=null,Error(a(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var dl={};function Zw(t,s,c,g){this.tag=t,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kr(t,s,c,g){return new Zw(t,s,c,g)}function nd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function oa(t,s){var c=t.alternate;return c===null?(c=kr(t.tag,s,t.key,t.mode),c.elementType=t.elementType,c.type=t.type,c.stateNode=t.stateNode,c.alternate=t,t.alternate=c):(c.pendingProps=s,c.type=t.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=t.flags&65011712,c.childLanes=t.childLanes,c.lanes=t.lanes,c.child=t.child,c.memoizedProps=t.memoizedProps,c.memoizedState=t.memoizedState,c.updateQueue=t.updateQueue,s=t.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=t.sibling,c.index=t.index,c.ref=t.ref,c.refCleanup=t.refCleanup,c}function Hg(t,s){t.flags&=65011714;var c=t.alternate;return c===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=c.childLanes,t.lanes=c.lanes,t.child=c.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=c.memoizedProps,t.memoizedState=c.memoizedState,t.updateQueue=c.updateQueue,t.type=c.type,s=c.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function Mu(t,s,c,g,_,w){var O=0;if(g=t,typeof t=="function")nd(t)&&(O=1);else if(typeof t=="string")O=nb(t,c,Ue.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case V:return t=kr(31,c,s,_),t.elementType=V,t.lanes=w,t;case Q:return ko(c.children,_,w,s);case z:O=8,_|=24;break;case de:return t=kr(12,c,s,_|2),t.elementType=de,t.lanes=w,t;case Ve:return t=kr(13,c,s,_),t.elementType=Ve,t.lanes=w,t;case ke:return t=kr(19,c,s,_),t.elementType=ke,t.lanes=w,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case K:O=10;break e;case Ee:O=9;break e;case Se:O=11;break e;case j:O=14;break e;case G:O=16,g=null;break e}O=29,c=Error(a(130,t===null?"null":typeof t,"")),g=null}return s=kr(O,c,s,_),s.elementType=t,s.type=g,s.lanes=w,s}function ko(t,s,c,g){return t=kr(7,t,g,s),t.lanes=c,t}function id(t,s,c){return t=kr(6,t,null,s),t.lanes=c,t}function Gg(t){var s=kr(18,null,null,0);return s.stateNode=t,s}function rd(t,s,c){return s=kr(4,t.children!==null?t.children:[],t.key,s),s.lanes=c,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var Yg=new WeakMap;function is(t,s){if(typeof t=="object"&&t!==null){var c=Yg.get(t);return c!==void 0?c:(s={value:t,source:s,stack:zt(s)},Yg.set(t,s),s)}return{value:t,source:s,stack:zt(s)}}var gl=[],ml=0,Lu=null,hc=0,rs=[],ss=0,ja=null,Bs=1,Ps="";function la(t,s){gl[ml++]=hc,gl[ml++]=Lu,Lu=t,hc=s}function Xg(t,s,c){rs[ss++]=Bs,rs[ss++]=Ps,rs[ss++]=ja,ja=t;var g=Bs;t=Ps;var _=32-it(g)-1;g&=~(1<<_),c+=1;var w=32-it(s)+_;if(30<w){var O=_-_%5;w=(g&(1<<O)-1).toString(32),g>>=O,_-=O,Bs=1<<32-it(s)+_|c<<_|g,Ps=w+t}else Bs=1<<w|c<<_|g,Ps=t}function sd(t){t.return!==null&&(la(t,1),Xg(t,1,0))}function ad(t){for(;t===Lu;)Lu=gl[--ml],gl[ml]=null,hc=gl[--ml],gl[ml]=null;for(;t===ja;)ja=rs[--ss],rs[ss]=null,Ps=rs[--ss],rs[ss]=null,Bs=rs[--ss],rs[ss]=null}function qg(t,s){rs[ss++]=Bs,rs[ss++]=Ps,rs[ss++]=ja,Bs=s.id,Ps=s.overflow,ja=t}var ki=null,vn=null,Gt=!1,Fa=null,as=!1,od=Error(a(519));function za(t){var s=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw fc(is(s,t)),od}function Qg(t){var s=t.stateNode,c=t.type,g=t.memoizedProps;switch(s[Dn]=t,s[$t]=g,c){case"dialog":Lt("cancel",s),Lt("close",s);break;case"iframe":case"object":case"embed":Lt("load",s);break;case"video":case"audio":for(c=0;c<Lc.length;c++)Lt(Lc[c],s);break;case"source":Lt("error",s);break;case"img":case"image":case"link":Lt("error",s),Lt("load",s);break;case"details":Lt("toggle",s);break;case"input":Lt("invalid",s),ce(s,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":Lt("invalid",s);break;case"textarea":Lt("invalid",s),ti(s,g.value,g.defaultValue,g.children)}c=g.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||s.textContent===""+c||g.suppressHydrationWarning===!0||h2(s.textContent,c)?(g.popover!=null&&(Lt("beforetoggle",s),Lt("toggle",s)),g.onScroll!=null&&Lt("scroll",s),g.onScrollEnd!=null&&Lt("scrollend",s),g.onClick!=null&&(s.onclick=Zi),s=!0):s=!1,s||za(t,!0)}function Wg(t){for(ki=t.return;ki;)switch(ki.tag){case 5:case 31:case 13:as=!1;return;case 27:case 3:as=!0;return;default:ki=ki.return}}function pl(t){if(t!==ki)return!1;if(!Gt)return Wg(t),Gt=!0,!1;var s=t.tag,c;if((c=s!==3&&s!==27)&&((c=s===5)&&(c=t.type,c=!(c!=="form"&&c!=="button")||S0(t.type,t.memoizedProps)),c=!c),c&&vn&&za(t),Wg(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));vn=_2(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));vn=_2(t)}else s===27?(s=vn,no(t.type)?(t=R0,R0=null,vn=t):vn=s):vn=ki?ls(t.stateNode.nextSibling):null;return!0}function Uo(){vn=ki=null,Gt=!1}function ld(){var t=Fa;return t!==null&&(br===null?br=t:br.push.apply(br,t),Fa=null),t}function fc(t){Fa===null?Fa=[t]:Fa.push(t)}var cd=ne(null),Vo=null,ca=null;function Ha(t,s,c){Be(cd,s._currentValue),s._currentValue=c}function ua(t){t._currentValue=cd.current,Ae(cd)}function ud(t,s,c){for(;t!==null;){var g=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,g!==null&&(g.childLanes|=s)):g!==null&&(g.childLanes&s)!==s&&(g.childLanes|=s),t===c)break;t=t.return}}function hd(t,s,c,g){var _=t.child;for(_!==null&&(_.return=t);_!==null;){var w=_.dependencies;if(w!==null){var O=_.child;w=w.firstContext;e:for(;w!==null;){var U=w;w=_;for(var Z=0;Z<s.length;Z++)if(U.context===s[Z]){w.lanes|=c,U=w.alternate,U!==null&&(U.lanes|=c),ud(w.return,c,t),g||(O=null);break e}w=U.next}}else if(_.tag===18){if(O=_.return,O===null)throw Error(a(341));O.lanes|=c,w=O.alternate,w!==null&&(w.lanes|=c),ud(O,c,t),O=null}else O=_.child;if(O!==null)O.return=_;else for(O=_;O!==null;){if(O===t){O=null;break}if(_=O.sibling,_!==null){_.return=O.return,O=_;break}O=O.return}_=O}}function xl(t,s,c,g){t=null;for(var _=s,w=!1;_!==null;){if(!w){if((_.flags&524288)!==0)w=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var O=_.alternate;if(O===null)throw Error(a(387));if(O=O.memoizedProps,O!==null){var U=_.type;m(_.pendingProps.value,O.value)||(t!==null?t.push(U):t=[U])}}else if(_===dt.current){if(O=_.alternate,O===null)throw Error(a(387));O.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(t!==null?t.push(Vc):t=[Vc])}_=_.return}t!==null&&hd(s,t,c,g),s.flags|=262144}function Bu(t){for(t=t.firstContext;t!==null;){if(!m(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function jo(t){Vo=t,ca=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Ui(t){return Kg(Vo,t)}function Pu(t,s){return Vo===null&&jo(t),Kg(t,s)}function Kg(t,s){var c=s._currentValue;if(s={context:s,memoizedValue:c,next:null},ca===null){if(t===null)throw Error(a(308));ca=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else ca=ca.next=s;return c}var Jw=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(c,g){t.push(g)}};this.abort=function(){s.aborted=!0,t.forEach(function(c){return c()})}},$w=i.unstable_scheduleCallback,eT=i.unstable_NormalPriority,ci={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function fd(){return{controller:new Jw,data:new Map,refCount:0}}function dc(t){t.refCount--,t.refCount===0&&$w(eT,function(){t.controller.abort()})}var gc=null,dd=0,yl=0,El=null;function tT(t,s){if(gc===null){var c=gc=[];dd=0,yl=p0(),El={status:"pending",value:void 0,then:function(g){c.push(g)}}}return dd++,s.then(Zg,Zg),s}function Zg(){if(--dd===0&&gc!==null){El!==null&&(El.status="fulfilled");var t=gc;gc=null,yl=0,El=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function nT(t,s){var c=[],g={status:"pending",value:null,reason:null,then:function(_){c.push(_)}};return t.then(function(){g.status="fulfilled",g.value=s;for(var _=0;_<c.length;_++)(0,c[_])(s)},function(_){for(g.status="rejected",g.reason=_,_=0;_<c.length;_++)(0,c[_])(void 0)}),g}var Jg=me.S;me.S=function(t,s){Bp=hn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&tT(t,s),Jg!==null&&Jg(t,s)};var Fo=ne(null);function gd(){var t=Fo.current;return t!==null?t:bn.pooledCache}function ku(t,s){s===null?Be(Fo,Fo.current):Be(Fo,s.pool)}function $g(){var t=gd();return t===null?null:{parent:ci._currentValue,pool:t}}var _l=Error(a(460)),md=Error(a(474)),Uu=Error(a(542)),Vu={then:function(){}};function em(t){return t=t.status,t==="fulfilled"||t==="rejected"}function tm(t,s,c){switch(c=t[c],c===void 0?t.push(s):c!==s&&(s.then(Zi,Zi),s=c),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,im(t),t;default:if(typeof s.status=="string")s.then(Zi,Zi);else{if(t=bn,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=s,t.status="pending",t.then(function(g){if(s.status==="pending"){var _=s;_.status="fulfilled",_.value=g}},function(g){if(s.status==="pending"){var _=s;_.status="rejected",_.reason=g}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,im(t),t}throw Ho=s,_l}}function zo(t){try{var s=t._init;return s(t._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Ho=c,_l):c}}var Ho=null;function nm(){if(Ho===null)throw Error(a(459));var t=Ho;return Ho=null,t}function im(t){if(t===_l||t===Uu)throw Error(a(483))}var Al=null,mc=0;function ju(t){var s=mc;return mc+=1,Al===null&&(Al=[]),tm(Al,t,s)}function pc(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function Fu(t,s){throw s.$$typeof===M?Error(a(525)):(t=Object.prototype.toString.call(s),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function rm(t){function s(ae,ie){if(t){var ue=ae.deletions;ue===null?(ae.deletions=[ie],ae.flags|=16):ue.push(ie)}}function c(ae,ie){if(!t)return null;for(;ie!==null;)s(ae,ie),ie=ie.sibling;return null}function g(ae){for(var ie=new Map;ae!==null;)ae.key!==null?ie.set(ae.key,ae):ie.set(ae.index,ae),ae=ae.sibling;return ie}function _(ae,ie){return ae=oa(ae,ie),ae.index=0,ae.sibling=null,ae}function w(ae,ie,ue){return ae.index=ue,t?(ue=ae.alternate,ue!==null?(ue=ue.index,ue<ie?(ae.flags|=67108866,ie):ue):(ae.flags|=67108866,ie)):(ae.flags|=1048576,ie)}function O(ae){return t&&ae.alternate===null&&(ae.flags|=67108866),ae}function U(ae,ie,ue,be){return ie===null||ie.tag!==6?(ie=id(ue,ae.mode,be),ie.return=ae,ie):(ie=_(ie,ue),ie.return=ae,ie)}function Z(ae,ie,ue,be){var Je=ue.type;return Je===Q?Te(ae,ie,ue.props.children,be,ue.key):ie!==null&&(ie.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===G&&zo(Je)===ie.type)?(ie=_(ie,ue.props),pc(ie,ue),ie.return=ae,ie):(ie=Mu(ue.type,ue.key,ue.props,null,ae.mode,be),pc(ie,ue),ie.return=ae,ie)}function fe(ae,ie,ue,be){return ie===null||ie.tag!==4||ie.stateNode.containerInfo!==ue.containerInfo||ie.stateNode.implementation!==ue.implementation?(ie=rd(ue,ae.mode,be),ie.return=ae,ie):(ie=_(ie,ue.children||[]),ie.return=ae,ie)}function Te(ae,ie,ue,be,Je){return ie===null||ie.tag!==7?(ie=ko(ue,ae.mode,be,Je),ie.return=ae,ie):(ie=_(ie,ue),ie.return=ae,ie)}function Ce(ae,ie,ue){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return ie=id(""+ie,ae.mode,ue),ie.return=ae,ie;if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case k:return ue=Mu(ie.type,ie.key,ie.props,null,ae.mode,ue),pc(ue,ie),ue.return=ae,ue;case q:return ie=rd(ie,ae.mode,ue),ie.return=ae,ie;case G:return ie=zo(ie),Ce(ae,ie,ue)}if(he(ie)||J(ie))return ie=ko(ie,ae.mode,ue,null),ie.return=ae,ie;if(typeof ie.then=="function")return Ce(ae,ju(ie),ue);if(ie.$$typeof===K)return Ce(ae,Pu(ae,ie),ue);Fu(ae,ie)}return null}function ge(ae,ie,ue,be){var Je=ie!==null?ie.key:null;if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return Je!==null?null:U(ae,ie,""+ue,be);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case k:return ue.key===Je?Z(ae,ie,ue,be):null;case q:return ue.key===Je?fe(ae,ie,ue,be):null;case G:return ue=zo(ue),ge(ae,ie,ue,be)}if(he(ue)||J(ue))return Je!==null?null:Te(ae,ie,ue,be,null);if(typeof ue.then=="function")return ge(ae,ie,ju(ue),be);if(ue.$$typeof===K)return ge(ae,ie,Pu(ae,ue),be);Fu(ae,ue)}return null}function _e(ae,ie,ue,be,Je){if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return ae=ae.get(ue)||null,U(ie,ae,""+be,Je);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case k:return ae=ae.get(be.key===null?ue:be.key)||null,Z(ie,ae,be,Je);case q:return ae=ae.get(be.key===null?ue:be.key)||null,fe(ie,ae,be,Je);case G:return be=zo(be),_e(ae,ie,ue,be,Je)}if(he(be)||J(be))return ae=ae.get(ue)||null,Te(ie,ae,be,Je,null);if(typeof be.then=="function")return _e(ae,ie,ue,ju(be),Je);if(be.$$typeof===K)return _e(ae,ie,ue,Pu(ie,be),Je);Fu(ie,be)}return null}function Xe(ae,ie,ue,be){for(var Je=null,nn=null,Qe=ie,wt=ie=0,Vt=null;Qe!==null&&wt<ue.length;wt++){Qe.index>wt?(Vt=Qe,Qe=null):Vt=Qe.sibling;var rn=ge(ae,Qe,ue[wt],be);if(rn===null){Qe===null&&(Qe=Vt);break}t&&Qe&&rn.alternate===null&&s(ae,Qe),ie=w(rn,ie,wt),nn===null?Je=rn:nn.sibling=rn,nn=rn,Qe=Vt}if(wt===ue.length)return c(ae,Qe),Gt&&la(ae,wt),Je;if(Qe===null){for(;wt<ue.length;wt++)Qe=Ce(ae,ue[wt],be),Qe!==null&&(ie=w(Qe,ie,wt),nn===null?Je=Qe:nn.sibling=Qe,nn=Qe);return Gt&&la(ae,wt),Je}for(Qe=g(Qe);wt<ue.length;wt++)Vt=_e(Qe,ae,wt,ue[wt],be),Vt!==null&&(t&&Vt.alternate!==null&&Qe.delete(Vt.key===null?wt:Vt.key),ie=w(Vt,ie,wt),nn===null?Je=Vt:nn.sibling=Vt,nn=Vt);return t&&Qe.forEach(function(oo){return s(ae,oo)}),Gt&&la(ae,wt),Je}function st(ae,ie,ue,be){if(ue==null)throw Error(a(151));for(var Je=null,nn=null,Qe=ie,wt=ie=0,Vt=null,rn=ue.next();Qe!==null&&!rn.done;wt++,rn=ue.next()){Qe.index>wt?(Vt=Qe,Qe=null):Vt=Qe.sibling;var oo=ge(ae,Qe,rn.value,be);if(oo===null){Qe===null&&(Qe=Vt);break}t&&Qe&&oo.alternate===null&&s(ae,Qe),ie=w(oo,ie,wt),nn===null?Je=oo:nn.sibling=oo,nn=oo,Qe=Vt}if(rn.done)return c(ae,Qe),Gt&&la(ae,wt),Je;if(Qe===null){for(;!rn.done;wt++,rn=ue.next())rn=Ce(ae,rn.value,be),rn!==null&&(ie=w(rn,ie,wt),nn===null?Je=rn:nn.sibling=rn,nn=rn);return Gt&&la(ae,wt),Je}for(Qe=g(Qe);!rn.done;wt++,rn=ue.next())rn=_e(Qe,ae,wt,rn.value,be),rn!==null&&(t&&rn.alternate!==null&&Qe.delete(rn.key===null?wt:rn.key),ie=w(rn,ie,wt),nn===null?Je=rn:nn.sibling=rn,nn=rn);return t&&Qe.forEach(function(db){return s(ae,db)}),Gt&&la(ae,wt),Je}function yn(ae,ie,ue,be){if(typeof ue=="object"&&ue!==null&&ue.type===Q&&ue.key===null&&(ue=ue.props.children),typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case k:e:{for(var Je=ue.key;ie!==null;){if(ie.key===Je){if(Je=ue.type,Je===Q){if(ie.tag===7){c(ae,ie.sibling),be=_(ie,ue.props.children),be.return=ae,ae=be;break e}}else if(ie.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===G&&zo(Je)===ie.type){c(ae,ie.sibling),be=_(ie,ue.props),pc(be,ue),be.return=ae,ae=be;break e}c(ae,ie);break}else s(ae,ie);ie=ie.sibling}ue.type===Q?(be=ko(ue.props.children,ae.mode,be,ue.key),be.return=ae,ae=be):(be=Mu(ue.type,ue.key,ue.props,null,ae.mode,be),pc(be,ue),be.return=ae,ae=be)}return O(ae);case q:e:{for(Je=ue.key;ie!==null;){if(ie.key===Je)if(ie.tag===4&&ie.stateNode.containerInfo===ue.containerInfo&&ie.stateNode.implementation===ue.implementation){c(ae,ie.sibling),be=_(ie,ue.children||[]),be.return=ae,ae=be;break e}else{c(ae,ie);break}else s(ae,ie);ie=ie.sibling}be=rd(ue,ae.mode,be),be.return=ae,ae=be}return O(ae);case G:return ue=zo(ue),yn(ae,ie,ue,be)}if(he(ue))return Xe(ae,ie,ue,be);if(J(ue)){if(Je=J(ue),typeof Je!="function")throw Error(a(150));return ue=Je.call(ue),st(ae,ie,ue,be)}if(typeof ue.then=="function")return yn(ae,ie,ju(ue),be);if(ue.$$typeof===K)return yn(ae,ie,Pu(ae,ue),be);Fu(ae,ue)}return typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint"?(ue=""+ue,ie!==null&&ie.tag===6?(c(ae,ie.sibling),be=_(ie,ue),be.return=ae,ae=be):(c(ae,ie),be=id(ue,ae.mode,be),be.return=ae,ae=be),O(ae)):c(ae,ie)}return function(ae,ie,ue,be){try{mc=0;var Je=yn(ae,ie,ue,be);return Al=null,Je}catch(Qe){if(Qe===_l||Qe===Uu)throw Qe;var nn=kr(29,Qe,null,ae.mode);return nn.lanes=be,nn.return=ae,nn}finally{}}}var Go=rm(!0),sm=rm(!1),Ga=!1;function pd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xd(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ya(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Xa(t,s,c){var g=t.updateQueue;if(g===null)return null;if(g=g.shared,(an&2)!==0){var _=g.pending;return _===null?s.next=s:(s.next=_.next,_.next=s),g.pending=s,s=Du(t),zg(t,null,c),s}return Ou(t,g,s,c),Du(t)}function xc(t,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194048)!==0)){var g=s.lanes;g&=t.pendingLanes,c|=g,s.lanes=c,qn(t,c)}}function yd(t,s){var c=t.updateQueue,g=t.alternate;if(g!==null&&(g=g.updateQueue,c===g)){var _=null,w=null;if(c=c.firstBaseUpdate,c!==null){do{var O={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};w===null?_=w=O:w=w.next=O,c=c.next}while(c!==null);w===null?_=w=s:w=w.next=s}else _=w=s;c={baseState:g.baseState,firstBaseUpdate:_,lastBaseUpdate:w,shared:g.shared,callbacks:g.callbacks},t.updateQueue=c;return}t=c.lastBaseUpdate,t===null?c.firstBaseUpdate=s:t.next=s,c.lastBaseUpdate=s}var Ed=!1;function yc(){if(Ed){var t=El;if(t!==null)throw t}}function Ec(t,s,c,g){Ed=!1;var _=t.updateQueue;Ga=!1;var w=_.firstBaseUpdate,O=_.lastBaseUpdate,U=_.shared.pending;if(U!==null){_.shared.pending=null;var Z=U,fe=Z.next;Z.next=null,O===null?w=fe:O.next=fe,O=Z;var Te=t.alternate;Te!==null&&(Te=Te.updateQueue,U=Te.lastBaseUpdate,U!==O&&(U===null?Te.firstBaseUpdate=fe:U.next=fe,Te.lastBaseUpdate=Z))}if(w!==null){var Ce=_.baseState;O=0,Te=fe=Z=null,U=w;do{var ge=U.lane&-536870913,_e=ge!==U.lane;if(_e?(Ut&ge)===ge:(g&ge)===ge){ge!==0&&ge===yl&&(Ed=!0),Te!==null&&(Te=Te.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});e:{var Xe=t,st=U;ge=s;var yn=c;switch(st.tag){case 1:if(Xe=st.payload,typeof Xe=="function"){Ce=Xe.call(yn,Ce,ge);break e}Ce=Xe;break e;case 3:Xe.flags=Xe.flags&-65537|128;case 0:if(Xe=st.payload,ge=typeof Xe=="function"?Xe.call(yn,Ce,ge):Xe,ge==null)break e;Ce=I({},Ce,ge);break e;case 2:Ga=!0}}ge=U.callback,ge!==null&&(t.flags|=64,_e&&(t.flags|=8192),_e=_.callbacks,_e===null?_.callbacks=[ge]:_e.push(ge))}else _e={lane:ge,tag:U.tag,payload:U.payload,callback:U.callback,next:null},Te===null?(fe=Te=_e,Z=Ce):Te=Te.next=_e,O|=ge;if(U=U.next,U===null){if(U=_.shared.pending,U===null)break;_e=U,U=_e.next,_e.next=null,_.lastBaseUpdate=_e,_.shared.pending=null}}while(!0);Te===null&&(Z=Ce),_.baseState=Z,_.firstBaseUpdate=fe,_.lastBaseUpdate=Te,w===null&&(_.shared.lanes=0),Za|=O,t.lanes=O,t.memoizedState=Ce}}function am(t,s){if(typeof t!="function")throw Error(a(191,t));t.call(s)}function om(t,s){var c=t.callbacks;if(c!==null)for(t.callbacks=null,t=0;t<c.length;t++)am(c[t],s)}var wl=ne(null),zu=ne(0);function lm(t,s){t=Ea,Be(zu,t),Be(wl,s),Ea=t|s.baseLanes}function _d(){Be(zu,Ea),Be(wl,wl.current)}function Ad(){Ea=zu.current,Ae(wl),Ae(zu)}var Ur=ne(null),os=null;function qa(t){var s=t.alternate;Be(ni,ni.current&1),Be(Ur,t),os===null&&(s===null||wl.current!==null||s.memoizedState!==null)&&(os=t)}function wd(t){Be(ni,ni.current),Be(Ur,t),os===null&&(os=t)}function cm(t){t.tag===22?(Be(ni,ni.current),Be(Ur,t),os===null&&(os=t)):Qa()}function Qa(){Be(ni,ni.current),Be(Ur,Ur.current)}function Vr(t){Ae(Ur),os===t&&(os=null),Ae(ni)}var ni=ne(0);function Hu(t){for(var s=t;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||I0(c)||N0(c)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ha=0,yt=null,pn=null,ui=null,Gu=!1,Tl=!1,Yo=!1,Yu=0,_c=0,bl=null,iT=0;function Kn(){throw Error(a(321))}function Td(t,s){if(s===null)return!1;for(var c=0;c<s.length&&c<t.length;c++)if(!m(t[c],s[c]))return!1;return!0}function bd(t,s,c,g,_,w){return ha=w,yt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,me.H=t===null||t.memoizedState===null?Xm:Vd,Yo=!1,w=c(g,_),Yo=!1,Tl&&(w=hm(s,c,g,_)),um(t),w}function um(t){me.H=Tc;var s=pn!==null&&pn.next!==null;if(ha=0,ui=pn=yt=null,Gu=!1,_c=0,bl=null,s)throw Error(a(300));t===null||hi||(t=t.dependencies,t!==null&&Bu(t)&&(hi=!0))}function hm(t,s,c,g){yt=t;var _=0;do{if(Tl&&(bl=null),_c=0,Tl=!1,25<=_)throw Error(a(301));if(_+=1,ui=pn=null,t.updateQueue!=null){var w=t.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}me.H=qm,w=s(c,g)}while(Tl);return w}function rT(){var t=me.H,s=t.useState()[0];return s=typeof s.then=="function"?Ac(s):s,t=t.useState()[0],(pn!==null?pn.memoizedState:null)!==t&&(yt.flags|=1024),s}function Sd(){var t=Yu!==0;return Yu=0,t}function Cd(t,s,c){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~c}function vd(t){if(Gu){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}Gu=!1}ha=0,ui=pn=yt=null,Tl=!1,_c=Yu=0,bl=null}function hr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ui===null?yt.memoizedState=ui=t:ui=ui.next=t,ui}function ii(){if(pn===null){var t=yt.alternate;t=t!==null?t.memoizedState:null}else t=pn.next;var s=ui===null?yt.memoizedState:ui.next;if(s!==null)ui=s,pn=t;else{if(t===null)throw yt.alternate===null?Error(a(467)):Error(a(310));pn=t,t={memoizedState:pn.memoizedState,baseState:pn.baseState,baseQueue:pn.baseQueue,queue:pn.queue,next:null},ui===null?yt.memoizedState=ui=t:ui=ui.next=t}return ui}function Xu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ac(t){var s=_c;return _c+=1,bl===null&&(bl=[]),t=tm(bl,t,s),s=yt,(ui===null?s.memoizedState:ui.next)===null&&(s=s.alternate,me.H=s===null||s.memoizedState===null?Xm:Vd),t}function qu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Ac(t);if(t.$$typeof===K)return Ui(t)}throw Error(a(438,String(t)))}function Id(t){var s=null,c=yt.updateQueue;if(c!==null&&(s=c.memoCache),s==null){var g=yt.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(s={data:g.data.map(function(_){return _.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),c===null&&(c=Xu(),yt.updateQueue=c),c.memoCache=s,c=s.data[s.index],c===void 0)for(c=s.data[s.index]=Array(t),g=0;g<t;g++)c[g]=te;return s.index++,c}function fa(t,s){return typeof s=="function"?s(t):s}function Qu(t){var s=ii();return Nd(s,pn,t)}function Nd(t,s,c){var g=t.queue;if(g===null)throw Error(a(311));g.lastRenderedReducer=c;var _=t.baseQueue,w=g.pending;if(w!==null){if(_!==null){var O=_.next;_.next=w.next,w.next=O}s.baseQueue=_=w,g.pending=null}if(w=t.baseState,_===null)t.memoizedState=w;else{s=_.next;var U=O=null,Z=null,fe=s,Te=!1;do{var Ce=fe.lane&-536870913;if(Ce!==fe.lane?(Ut&Ce)===Ce:(ha&Ce)===Ce){var ge=fe.revertLane;if(ge===0)Z!==null&&(Z=Z.next={lane:0,revertLane:0,gesture:null,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null}),Ce===yl&&(Te=!0);else if((ha&ge)===ge){fe=fe.next,ge===yl&&(Te=!0);continue}else Ce={lane:0,revertLane:fe.revertLane,gesture:null,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null},Z===null?(U=Z=Ce,O=w):Z=Z.next=Ce,yt.lanes|=ge,Za|=ge;Ce=fe.action,Yo&&c(w,Ce),w=fe.hasEagerState?fe.eagerState:c(w,Ce)}else ge={lane:Ce,revertLane:fe.revertLane,gesture:fe.gesture,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null},Z===null?(U=Z=ge,O=w):Z=Z.next=ge,yt.lanes|=Ce,Za|=Ce;fe=fe.next}while(fe!==null&&fe!==s);if(Z===null?O=w:Z.next=U,!m(w,t.memoizedState)&&(hi=!0,Te&&(c=El,c!==null)))throw c;t.memoizedState=w,t.baseState=O,t.baseQueue=Z,g.lastRenderedState=w}return _===null&&(g.lanes=0),[t.memoizedState,g.dispatch]}function Rd(t){var s=ii(),c=s.queue;if(c===null)throw Error(a(311));c.lastRenderedReducer=t;var g=c.dispatch,_=c.pending,w=s.memoizedState;if(_!==null){c.pending=null;var O=_=_.next;do w=t(w,O.action),O=O.next;while(O!==_);m(w,s.memoizedState)||(hi=!0),s.memoizedState=w,s.baseQueue===null&&(s.baseState=w),c.lastRenderedState=w}return[w,g]}function fm(t,s,c){var g=yt,_=ii(),w=Gt;if(w){if(c===void 0)throw Error(a(407));c=c()}else c=s();var O=!m((pn||_).memoizedState,c);if(O&&(_.memoizedState=c,hi=!0),_=_.queue,Md(mm.bind(null,g,_,t),[t]),_.getSnapshot!==s||O||ui!==null&&ui.memoizedState.tag&1){if(g.flags|=2048,Sl(9,{destroy:void 0},gm.bind(null,g,_,c,s),null),bn===null)throw Error(a(349));w||(ha&127)!==0||dm(g,s,c)}return c}function dm(t,s,c){t.flags|=16384,t={getSnapshot:s,value:c},s=yt.updateQueue,s===null?(s=Xu(),yt.updateQueue=s,s.stores=[t]):(c=s.stores,c===null?s.stores=[t]:c.push(t))}function gm(t,s,c,g){s.value=c,s.getSnapshot=g,pm(s)&&xm(t)}function mm(t,s,c){return c(function(){pm(s)&&xm(t)})}function pm(t){var s=t.getSnapshot;t=t.value;try{var c=s();return!m(t,c)}catch{return!0}}function xm(t){var s=Po(t,2);s!==null&&Sr(s,t,2)}function Od(t){var s=hr();if(typeof t=="function"){var c=t;if(t=c(),Yo){qt(!0);try{c()}finally{qt(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:t},s}function ym(t,s,c,g){return t.baseState=c,Nd(t,pn,typeof g=="function"?g:fa)}function sT(t,s,c,g,_){if(Zu(t))throw Error(a(485));if(t=s.action,t!==null){var w={payload:_,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(O){w.listeners.push(O)}};me.T!==null?c(!0):w.isTransition=!1,g(w),c=s.pending,c===null?(w.next=s.pending=w,Em(s,w)):(w.next=c.next,s.pending=c.next=w)}}function Em(t,s){var c=s.action,g=s.payload,_=t.state;if(s.isTransition){var w=me.T,O={};me.T=O;try{var U=c(_,g),Z=me.S;Z!==null&&Z(O,U),_m(t,s,U)}catch(fe){Dd(t,s,fe)}finally{w!==null&&O.types!==null&&(w.types=O.types),me.T=w}}else try{w=c(_,g),_m(t,s,w)}catch(fe){Dd(t,s,fe)}}function _m(t,s,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(g){Am(t,s,g)},function(g){return Dd(t,s,g)}):Am(t,s,c)}function Am(t,s,c){s.status="fulfilled",s.value=c,wm(s),t.state=c,s=t.pending,s!==null&&(c=s.next,c===s?t.pending=null:(c=c.next,s.next=c,Em(t,c)))}function Dd(t,s,c){var g=t.pending;if(t.pending=null,g!==null){g=g.next;do s.status="rejected",s.reason=c,wm(s),s=s.next;while(s!==g)}t.action=null}function wm(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function Tm(t,s){return s}function bm(t,s){if(Gt){var c=bn.formState;if(c!==null){e:{var g=yt;if(Gt){if(vn){t:{for(var _=vn,w=as;_.nodeType!==8;){if(!w){_=null;break t}if(_=ls(_.nextSibling),_===null){_=null;break t}}w=_.data,_=w==="F!"||w==="F"?_:null}if(_){vn=ls(_.nextSibling),g=_.data==="F!";break e}}za(g)}g=!1}g&&(s=c[0])}}return c=hr(),c.memoizedState=c.baseState=s,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tm,lastRenderedState:s},c.queue=g,c=Hm.bind(null,yt,g),g.dispatch=c,g=Od(!1),w=Ud.bind(null,yt,!1,g.queue),g=hr(),_={state:s,dispatch:null,action:t,pending:null},g.queue=_,c=sT.bind(null,yt,_,w,c),_.dispatch=c,g.memoizedState=t,[s,c,!1]}function Sm(t){var s=ii();return Cm(s,pn,t)}function Cm(t,s,c){if(s=Nd(t,s,Tm)[0],t=Qu(fa)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var g=Ac(s)}catch(O){throw O===_l?Uu:O}else g=s;s=ii();var _=s.queue,w=_.dispatch;return c!==s.memoizedState&&(yt.flags|=2048,Sl(9,{destroy:void 0},aT.bind(null,_,c),null)),[g,w,t]}function aT(t,s){t.action=s}function vm(t){var s=ii(),c=pn;if(c!==null)return Cm(s,c,t);ii(),s=s.memoizedState,c=ii();var g=c.queue.dispatch;return c.memoizedState=t,[s,g,!1]}function Sl(t,s,c,g){return t={tag:t,create:c,deps:g,inst:s,next:null},s=yt.updateQueue,s===null&&(s=Xu(),yt.updateQueue=s),c=s.lastEffect,c===null?s.lastEffect=t.next=t:(g=c.next,c.next=t,t.next=g,s.lastEffect=t),t}function Im(){return ii().memoizedState}function Wu(t,s,c,g){var _=hr();yt.flags|=t,_.memoizedState=Sl(1|s,{destroy:void 0},c,g===void 0?null:g)}function Ku(t,s,c,g){var _=ii();g=g===void 0?null:g;var w=_.memoizedState.inst;pn!==null&&g!==null&&Td(g,pn.memoizedState.deps)?_.memoizedState=Sl(s,w,c,g):(yt.flags|=t,_.memoizedState=Sl(1|s,w,c,g))}function Nm(t,s){Wu(8390656,8,t,s)}function Md(t,s){Ku(2048,8,t,s)}function oT(t){yt.flags|=4;var s=yt.updateQueue;if(s===null)s=Xu(),yt.updateQueue=s,s.events=[t];else{var c=s.events;c===null?s.events=[t]:c.push(t)}}function Rm(t){var s=ii().memoizedState;return oT({ref:s,nextImpl:t}),function(){if((an&2)!==0)throw Error(a(440));return s.impl.apply(void 0,arguments)}}function Om(t,s){return Ku(4,2,t,s)}function Dm(t,s){return Ku(4,4,t,s)}function Mm(t,s){if(typeof s=="function"){t=t();var c=s(t);return function(){typeof c=="function"?c():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Lm(t,s,c){c=c!=null?c.concat([t]):null,Ku(4,4,Mm.bind(null,s,t),c)}function Ld(){}function Bm(t,s){var c=ii();s=s===void 0?null:s;var g=c.memoizedState;return s!==null&&Td(s,g[1])?g[0]:(c.memoizedState=[t,s],t)}function Pm(t,s){var c=ii();s=s===void 0?null:s;var g=c.memoizedState;if(s!==null&&Td(s,g[1]))return g[0];if(g=t(),Yo){qt(!0);try{t()}finally{qt(!1)}}return c.memoizedState=[g,s],g}function Bd(t,s,c){return c===void 0||(ha&1073741824)!==0&&(Ut&261930)===0?t.memoizedState=s:(t.memoizedState=c,t=kp(),yt.lanes|=t,Za|=t,c)}function km(t,s,c,g){return m(c,s)?c:wl.current!==null?(t=Bd(t,c,g),m(t,s)||(hi=!0),t):(ha&42)===0||(ha&1073741824)!==0&&(Ut&261930)===0?(hi=!0,t.memoizedState=c):(t=kp(),yt.lanes|=t,Za|=t,s)}function Um(t,s,c,g,_){var w=we.p;we.p=w!==0&&8>w?w:8;var O=me.T,U={};me.T=U,Ud(t,!1,s,c);try{var Z=_(),fe=me.S;if(fe!==null&&fe(U,Z),Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var Te=nT(Z,g);wc(t,s,Te,zr(t))}else wc(t,s,g,zr(t))}catch(Ce){wc(t,s,{then:function(){},status:"rejected",reason:Ce},zr())}finally{we.p=w,O!==null&&U.types!==null&&(O.types=U.types),me.T=O}}function lT(){}function Pd(t,s,c,g){if(t.tag!==5)throw Error(a(476));var _=Vm(t).queue;Um(t,_,s,Ge,c===null?lT:function(){return jm(t),c(g)})}function Vm(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:Ge,baseState:Ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:Ge},next:null};var c={};return s.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:c},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function jm(t){var s=Vm(t);s.next===null&&(s=t.alternate.memoizedState),wc(t,s.next.queue,{},zr())}function kd(){return Ui(Vc)}function Fm(){return ii().memoizedState}function zm(){return ii().memoizedState}function cT(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var c=zr();t=Ya(c);var g=Xa(s,t,c);g!==null&&(Sr(g,s,c),xc(g,s,c)),s={cache:fd()},t.payload=s;return}s=s.return}}function uT(t,s,c){var g=zr();c={lane:g,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Zu(t)?Gm(s,c):(c=td(t,s,c,g),c!==null&&(Sr(c,t,g),Ym(c,s,g)))}function Hm(t,s,c){var g=zr();wc(t,s,c,g)}function wc(t,s,c,g){var _={lane:g,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Zu(t))Gm(s,_);else{var w=t.alternate;if(t.lanes===0&&(w===null||w.lanes===0)&&(w=s.lastRenderedReducer,w!==null))try{var O=s.lastRenderedState,U=w(O,c);if(_.hasEagerState=!0,_.eagerState=U,m(U,O))return Ou(t,s,_,0),bn===null&&Ru(),!1}catch{}finally{}if(c=td(t,s,_,g),c!==null)return Sr(c,t,g),Ym(c,s,g),!0}return!1}function Ud(t,s,c,g){if(g={lane:2,revertLane:p0(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},Zu(t)){if(s)throw Error(a(479))}else s=td(t,c,g,2),s!==null&&Sr(s,t,2)}function Zu(t){var s=t.alternate;return t===yt||s!==null&&s===yt}function Gm(t,s){Tl=Gu=!0;var c=t.pending;c===null?s.next=s:(s.next=c.next,c.next=s),t.pending=s}function Ym(t,s,c){if((c&4194048)!==0){var g=s.lanes;g&=t.pendingLanes,c|=g,s.lanes=c,qn(t,c)}}var Tc={readContext:Ui,use:qu,useCallback:Kn,useContext:Kn,useEffect:Kn,useImperativeHandle:Kn,useLayoutEffect:Kn,useInsertionEffect:Kn,useMemo:Kn,useReducer:Kn,useRef:Kn,useState:Kn,useDebugValue:Kn,useDeferredValue:Kn,useTransition:Kn,useSyncExternalStore:Kn,useId:Kn,useHostTransitionStatus:Kn,useFormState:Kn,useActionState:Kn,useOptimistic:Kn,useMemoCache:Kn,useCacheRefresh:Kn};Tc.useEffectEvent=Kn;var Xm={readContext:Ui,use:qu,useCallback:function(t,s){return hr().memoizedState=[t,s===void 0?null:s],t},useContext:Ui,useEffect:Nm,useImperativeHandle:function(t,s,c){c=c!=null?c.concat([t]):null,Wu(4194308,4,Mm.bind(null,s,t),c)},useLayoutEffect:function(t,s){return Wu(4194308,4,t,s)},useInsertionEffect:function(t,s){Wu(4,2,t,s)},useMemo:function(t,s){var c=hr();s=s===void 0?null:s;var g=t();if(Yo){qt(!0);try{t()}finally{qt(!1)}}return c.memoizedState=[g,s],g},useReducer:function(t,s,c){var g=hr();if(c!==void 0){var _=c(s);if(Yo){qt(!0);try{c(s)}finally{qt(!1)}}}else _=s;return g.memoizedState=g.baseState=_,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:_},g.queue=t,t=t.dispatch=uT.bind(null,yt,t),[g.memoizedState,t]},useRef:function(t){var s=hr();return t={current:t},s.memoizedState=t},useState:function(t){t=Od(t);var s=t.queue,c=Hm.bind(null,yt,s);return s.dispatch=c,[t.memoizedState,c]},useDebugValue:Ld,useDeferredValue:function(t,s){var c=hr();return Bd(c,t,s)},useTransition:function(){var t=Od(!1);return t=Um.bind(null,yt,t.queue,!0,!1),hr().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,c){var g=yt,_=hr();if(Gt){if(c===void 0)throw Error(a(407));c=c()}else{if(c=s(),bn===null)throw Error(a(349));(Ut&127)!==0||dm(g,s,c)}_.memoizedState=c;var w={value:c,getSnapshot:s};return _.queue=w,Nm(mm.bind(null,g,w,t),[t]),g.flags|=2048,Sl(9,{destroy:void 0},gm.bind(null,g,w,c,s),null),c},useId:function(){var t=hr(),s=bn.identifierPrefix;if(Gt){var c=Ps,g=Bs;c=(g&~(1<<32-it(g)-1)).toString(32)+c,s="_"+s+"R_"+c,c=Yu++,0<c&&(s+="H"+c.toString(32)),s+="_"}else c=iT++,s="_"+s+"r_"+c.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:kd,useFormState:bm,useActionState:bm,useOptimistic:function(t){var s=hr();s.memoizedState=s.baseState=t;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=c,s=Ud.bind(null,yt,!0,c),c.dispatch=s,[t,s]},useMemoCache:Id,useCacheRefresh:function(){return hr().memoizedState=cT.bind(null,yt)},useEffectEvent:function(t){var s=hr(),c={impl:t};return s.memoizedState=c,function(){if((an&2)!==0)throw Error(a(440));return c.impl.apply(void 0,arguments)}}},Vd={readContext:Ui,use:qu,useCallback:Bm,useContext:Ui,useEffect:Md,useImperativeHandle:Lm,useInsertionEffect:Om,useLayoutEffect:Dm,useMemo:Pm,useReducer:Qu,useRef:Im,useState:function(){return Qu(fa)},useDebugValue:Ld,useDeferredValue:function(t,s){var c=ii();return km(c,pn.memoizedState,t,s)},useTransition:function(){var t=Qu(fa)[0],s=ii().memoizedState;return[typeof t=="boolean"?t:Ac(t),s]},useSyncExternalStore:fm,useId:Fm,useHostTransitionStatus:kd,useFormState:Sm,useActionState:Sm,useOptimistic:function(t,s){var c=ii();return ym(c,pn,t,s)},useMemoCache:Id,useCacheRefresh:zm};Vd.useEffectEvent=Rm;var qm={readContext:Ui,use:qu,useCallback:Bm,useContext:Ui,useEffect:Md,useImperativeHandle:Lm,useInsertionEffect:Om,useLayoutEffect:Dm,useMemo:Pm,useReducer:Rd,useRef:Im,useState:function(){return Rd(fa)},useDebugValue:Ld,useDeferredValue:function(t,s){var c=ii();return pn===null?Bd(c,t,s):km(c,pn.memoizedState,t,s)},useTransition:function(){var t=Rd(fa)[0],s=ii().memoizedState;return[typeof t=="boolean"?t:Ac(t),s]},useSyncExternalStore:fm,useId:Fm,useHostTransitionStatus:kd,useFormState:vm,useActionState:vm,useOptimistic:function(t,s){var c=ii();return pn!==null?ym(c,pn,t,s):(c.baseState=t,[t,c.queue.dispatch])},useMemoCache:Id,useCacheRefresh:zm};qm.useEffectEvent=Rm;function jd(t,s,c,g){s=t.memoizedState,c=c(g,s),c=c==null?s:I({},s,c),t.memoizedState=c,t.lanes===0&&(t.updateQueue.baseState=c)}var Fd={enqueueSetState:function(t,s,c){t=t._reactInternals;var g=zr(),_=Ya(g);_.payload=s,c!=null&&(_.callback=c),s=Xa(t,_,g),s!==null&&(Sr(s,t,g),xc(s,t,g))},enqueueReplaceState:function(t,s,c){t=t._reactInternals;var g=zr(),_=Ya(g);_.tag=1,_.payload=s,c!=null&&(_.callback=c),s=Xa(t,_,g),s!==null&&(Sr(s,t,g),xc(s,t,g))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var c=zr(),g=Ya(c);g.tag=2,s!=null&&(g.callback=s),s=Xa(t,g,c),s!==null&&(Sr(s,t,c),xc(s,t,c))}};function Qm(t,s,c,g,_,w,O){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(g,w,O):s.prototype&&s.prototype.isPureReactComponent?!y(c,g)||!y(_,w):!0}function Wm(t,s,c,g){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,g),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,g),s.state!==t&&Fd.enqueueReplaceState(s,s.state,null)}function Xo(t,s){var c=s;if("ref"in s){c={};for(var g in s)g!=="ref"&&(c[g]=s[g])}if(t=t.defaultProps){c===s&&(c=I({},c));for(var _ in t)c[_]===void 0&&(c[_]=t[_])}return c}function Km(t){Nu(t)}function Zm(t){console.error(t)}function Jm(t){Nu(t)}function Ju(t,s){try{var c=t.onUncaughtError;c(s.value,{componentStack:s.stack})}catch(g){setTimeout(function(){throw g})}}function $m(t,s,c){try{var g=t.onCaughtError;g(c.value,{componentStack:c.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function zd(t,s,c){return c=Ya(c),c.tag=3,c.payload={element:null},c.callback=function(){Ju(t,s)},c}function ep(t){return t=Ya(t),t.tag=3,t}function tp(t,s,c,g){var _=c.type.getDerivedStateFromError;if(typeof _=="function"){var w=g.value;t.payload=function(){return _(w)},t.callback=function(){$m(s,c,g)}}var O=c.stateNode;O!==null&&typeof O.componentDidCatch=="function"&&(t.callback=function(){$m(s,c,g),typeof _!="function"&&(Ja===null?Ja=new Set([this]):Ja.add(this));var U=g.stack;this.componentDidCatch(g.value,{componentStack:U!==null?U:""})})}function hT(t,s,c,g,_){if(c.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(s=c.alternate,s!==null&&xl(s,c,_,!0),c=Ur.current,c!==null){switch(c.tag){case 31:case 13:return os===null?uh():c.alternate===null&&Zn===0&&(Zn=3),c.flags&=-257,c.flags|=65536,c.lanes=_,g===Vu?c.flags|=16384:(s=c.updateQueue,s===null?c.updateQueue=new Set([g]):s.add(g),d0(t,g,_)),!1;case 22:return c.flags|=65536,g===Vu?c.flags|=16384:(s=c.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([g])},c.updateQueue=s):(c=s.retryQueue,c===null?s.retryQueue=new Set([g]):c.add(g)),d0(t,g,_)),!1}throw Error(a(435,c.tag))}return d0(t,g,_),uh(),!1}if(Gt)return s=Ur.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=_,g!==od&&(t=Error(a(422),{cause:g}),fc(is(t,c)))):(g!==od&&(s=Error(a(423),{cause:g}),fc(is(s,c))),t=t.current.alternate,t.flags|=65536,_&=-_,t.lanes|=_,g=is(g,c),_=zd(t.stateNode,g,_),yd(t,_),Zn!==4&&(Zn=2)),!1;var w=Error(a(520),{cause:g});if(w=is(w,c),Oc===null?Oc=[w]:Oc.push(w),Zn!==4&&(Zn=2),s===null)return!0;g=is(g,c),c=s;do{switch(c.tag){case 3:return c.flags|=65536,t=_&-_,c.lanes|=t,t=zd(c.stateNode,g,t),yd(c,t),!1;case 1:if(s=c.type,w=c.stateNode,(c.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ja===null||!Ja.has(w))))return c.flags|=65536,_&=-_,c.lanes|=_,_=ep(_),tp(_,t,c,g),yd(c,_),!1}c=c.return}while(c!==null);return!1}var Hd=Error(a(461)),hi=!1;function Vi(t,s,c,g){s.child=t===null?sm(s,null,c,g):Go(s,t.child,c,g)}function np(t,s,c,g,_){c=c.render;var w=s.ref;if("ref"in g){var O={};for(var U in g)U!=="ref"&&(O[U]=g[U])}else O=g;return jo(s),g=bd(t,s,c,O,w,_),U=Sd(),t!==null&&!hi?(Cd(t,s,_),da(t,s,_)):(Gt&&U&&sd(s),s.flags|=1,Vi(t,s,g,_),s.child)}function ip(t,s,c,g,_){if(t===null){var w=c.type;return typeof w=="function"&&!nd(w)&&w.defaultProps===void 0&&c.compare===null?(s.tag=15,s.type=w,rp(t,s,w,g,_)):(t=Mu(c.type,null,g,s,s.mode,_),t.ref=s.ref,t.return=s,s.child=t)}if(w=t.child,!Zd(t,_)){var O=w.memoizedProps;if(c=c.compare,c=c!==null?c:y,c(O,g)&&t.ref===s.ref)return da(t,s,_)}return s.flags|=1,t=oa(w,g),t.ref=s.ref,t.return=s,s.child=t}function rp(t,s,c,g,_){if(t!==null){var w=t.memoizedProps;if(y(w,g)&&t.ref===s.ref)if(hi=!1,s.pendingProps=g=w,Zd(t,_))(t.flags&131072)!==0&&(hi=!0);else return s.lanes=t.lanes,da(t,s,_)}return Gd(t,s,c,g,_)}function sp(t,s,c,g){var _=g.children,w=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((s.flags&128)!==0){if(w=w!==null?w.baseLanes|c:c,t!==null){for(g=s.child=t.child,_=0;g!==null;)_=_|g.lanes|g.childLanes,g=g.sibling;g=_&~w}else g=0,s.child=null;return ap(t,s,w,c,g)}if((c&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&ku(s,w!==null?w.cachePool:null),w!==null?lm(s,w):_d(),cm(s);else return g=s.lanes=536870912,ap(t,s,w!==null?w.baseLanes|c:c,c,g)}else w!==null?(ku(s,w.cachePool),lm(s,w),Qa(),s.memoizedState=null):(t!==null&&ku(s,null),_d(),Qa());return Vi(t,s,_,c),s.child}function bc(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function ap(t,s,c,g,_){var w=gd();return w=w===null?null:{parent:ci._currentValue,pool:w},s.memoizedState={baseLanes:c,cachePool:w},t!==null&&ku(s,null),_d(),cm(s),t!==null&&xl(t,s,g,!0),s.childLanes=_,null}function $u(t,s){return s=th({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function op(t,s,c){return Go(s,t.child,null,c),t=$u(s,s.pendingProps),t.flags|=2,Vr(s),s.memoizedState=null,t}function fT(t,s,c){var g=s.pendingProps,_=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(Gt){if(g.mode==="hidden")return t=$u(s,g),s.lanes=536870912,bc(null,t);if(wd(s),(t=vn)?(t=E2(t,as),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:ja!==null?{id:Bs,overflow:Ps}:null,retryLane:536870912,hydrationErrors:null},c=Gg(t),c.return=s,s.child=c,ki=s,vn=null)):t=null,t===null)throw za(s);return s.lanes=536870912,null}return $u(s,g)}var w=t.memoizedState;if(w!==null){var O=w.dehydrated;if(wd(s),_)if(s.flags&256)s.flags&=-257,s=op(t,s,c);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(a(558));else if(hi||xl(t,s,c,!1),_=(c&t.childLanes)!==0,hi||_){if(g=bn,g!==null&&(O=Ws(g,c),O!==0&&O!==w.retryLane))throw w.retryLane=O,Po(t,O),Sr(g,t,O),Hd;uh(),s=op(t,s,c)}else t=w.treeContext,vn=ls(O.nextSibling),ki=s,Gt=!0,Fa=null,as=!1,t!==null&&qg(s,t),s=$u(s,g),s.flags|=4096;return s}return t=oa(t.child,{mode:g.mode,children:g.children}),t.ref=s.ref,s.child=t,t.return=s,t}function eh(t,s){var c=s.ref;if(c===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(a(284));(t===null||t.ref!==c)&&(s.flags|=4194816)}}function Gd(t,s,c,g,_){return jo(s),c=bd(t,s,c,g,void 0,_),g=Sd(),t!==null&&!hi?(Cd(t,s,_),da(t,s,_)):(Gt&&g&&sd(s),s.flags|=1,Vi(t,s,c,_),s.child)}function lp(t,s,c,g,_,w){return jo(s),s.updateQueue=null,c=hm(s,g,c,_),um(t),g=Sd(),t!==null&&!hi?(Cd(t,s,w),da(t,s,w)):(Gt&&g&&sd(s),s.flags|=1,Vi(t,s,c,w),s.child)}function cp(t,s,c,g,_){if(jo(s),s.stateNode===null){var w=dl,O=c.contextType;typeof O=="object"&&O!==null&&(w=Ui(O)),w=new c(g,w),s.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Fd,s.stateNode=w,w._reactInternals=s,w=s.stateNode,w.props=g,w.state=s.memoizedState,w.refs={},pd(s),O=c.contextType,w.context=typeof O=="object"&&O!==null?Ui(O):dl,w.state=s.memoizedState,O=c.getDerivedStateFromProps,typeof O=="function"&&(jd(s,c,O,g),w.state=s.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(O=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),O!==w.state&&Fd.enqueueReplaceState(w,w.state,null),Ec(s,g,w,_),yc(),w.state=s.memoizedState),typeof w.componentDidMount=="function"&&(s.flags|=4194308),g=!0}else if(t===null){w=s.stateNode;var U=s.memoizedProps,Z=Xo(c,U);w.props=Z;var fe=w.context,Te=c.contextType;O=dl,typeof Te=="object"&&Te!==null&&(O=Ui(Te));var Ce=c.getDerivedStateFromProps;Te=typeof Ce=="function"||typeof w.getSnapshotBeforeUpdate=="function",U=s.pendingProps!==U,Te||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(U||fe!==O)&&Wm(s,w,g,O),Ga=!1;var ge=s.memoizedState;w.state=ge,Ec(s,g,w,_),yc(),fe=s.memoizedState,U||ge!==fe||Ga?(typeof Ce=="function"&&(jd(s,c,Ce,g),fe=s.memoizedState),(Z=Ga||Qm(s,c,Z,g,ge,fe,O))?(Te||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=g,s.memoizedState=fe),w.props=g,w.state=fe,w.context=O,g=Z):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),g=!1)}else{w=s.stateNode,xd(t,s),O=s.memoizedProps,Te=Xo(c,O),w.props=Te,Ce=s.pendingProps,ge=w.context,fe=c.contextType,Z=dl,typeof fe=="object"&&fe!==null&&(Z=Ui(fe)),U=c.getDerivedStateFromProps,(fe=typeof U=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(O!==Ce||ge!==Z)&&Wm(s,w,g,Z),Ga=!1,ge=s.memoizedState,w.state=ge,Ec(s,g,w,_),yc();var _e=s.memoizedState;O!==Ce||ge!==_e||Ga||t!==null&&t.dependencies!==null&&Bu(t.dependencies)?(typeof U=="function"&&(jd(s,c,U,g),_e=s.memoizedState),(Te=Ga||Qm(s,c,Te,g,ge,_e,Z)||t!==null&&t.dependencies!==null&&Bu(t.dependencies))?(fe||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(g,_e,Z),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(g,_e,Z)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||O===t.memoizedProps&&ge===t.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||O===t.memoizedProps&&ge===t.memoizedState||(s.flags|=1024),s.memoizedProps=g,s.memoizedState=_e),w.props=g,w.state=_e,w.context=Z,g=Te):(typeof w.componentDidUpdate!="function"||O===t.memoizedProps&&ge===t.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||O===t.memoizedProps&&ge===t.memoizedState||(s.flags|=1024),g=!1)}return w=g,eh(t,s),g=(s.flags&128)!==0,w||g?(w=s.stateNode,c=g&&typeof c.getDerivedStateFromError!="function"?null:w.render(),s.flags|=1,t!==null&&g?(s.child=Go(s,t.child,null,_),s.child=Go(s,null,c,_)):Vi(t,s,c,_),s.memoizedState=w.state,t=s.child):t=da(t,s,_),t}function up(t,s,c,g){return Uo(),s.flags|=256,Vi(t,s,c,g),s.child}var Yd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xd(t){return{baseLanes:t,cachePool:$g()}}function qd(t,s,c){return t=t!==null?t.childLanes&~c:0,s&&(t|=Fr),t}function hp(t,s,c){var g=s.pendingProps,_=!1,w=(s.flags&128)!==0,O;if((O=w)||(O=t!==null&&t.memoizedState===null?!1:(ni.current&2)!==0),O&&(_=!0,s.flags&=-129),O=(s.flags&32)!==0,s.flags&=-33,t===null){if(Gt){if(_?qa(s):Qa(),(t=vn)?(t=E2(t,as),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:ja!==null?{id:Bs,overflow:Ps}:null,retryLane:536870912,hydrationErrors:null},c=Gg(t),c.return=s,s.child=c,ki=s,vn=null)):t=null,t===null)throw za(s);return N0(t)?s.lanes=32:s.lanes=536870912,null}var U=g.children;return g=g.fallback,_?(Qa(),_=s.mode,U=th({mode:"hidden",children:U},_),g=ko(g,_,c,null),U.return=s,g.return=s,U.sibling=g,s.child=U,g=s.child,g.memoizedState=Xd(c),g.childLanes=qd(t,O,c),s.memoizedState=Yd,bc(null,g)):(qa(s),Qd(s,U))}var Z=t.memoizedState;if(Z!==null&&(U=Z.dehydrated,U!==null)){if(w)s.flags&256?(qa(s),s.flags&=-257,s=Wd(t,s,c)):s.memoizedState!==null?(Qa(),s.child=t.child,s.flags|=128,s=null):(Qa(),U=g.fallback,_=s.mode,g=th({mode:"visible",children:g.children},_),U=ko(U,_,c,null),U.flags|=2,g.return=s,U.return=s,g.sibling=U,s.child=g,Go(s,t.child,null,c),g=s.child,g.memoizedState=Xd(c),g.childLanes=qd(t,O,c),s.memoizedState=Yd,s=bc(null,g));else if(qa(s),N0(U)){if(O=U.nextSibling&&U.nextSibling.dataset,O)var fe=O.dgst;O=fe,g=Error(a(419)),g.stack="",g.digest=O,fc({value:g,source:null,stack:null}),s=Wd(t,s,c)}else if(hi||xl(t,s,c,!1),O=(c&t.childLanes)!==0,hi||O){if(O=bn,O!==null&&(g=Ws(O,c),g!==0&&g!==Z.retryLane))throw Z.retryLane=g,Po(t,g),Sr(O,t,g),Hd;I0(U)||uh(),s=Wd(t,s,c)}else I0(U)?(s.flags|=192,s.child=t.child,s=null):(t=Z.treeContext,vn=ls(U.nextSibling),ki=s,Gt=!0,Fa=null,as=!1,t!==null&&qg(s,t),s=Qd(s,g.children),s.flags|=4096);return s}return _?(Qa(),U=g.fallback,_=s.mode,Z=t.child,fe=Z.sibling,g=oa(Z,{mode:"hidden",children:g.children}),g.subtreeFlags=Z.subtreeFlags&65011712,fe!==null?U=oa(fe,U):(U=ko(U,_,c,null),U.flags|=2),U.return=s,g.return=s,g.sibling=U,s.child=g,bc(null,g),g=s.child,U=t.child.memoizedState,U===null?U=Xd(c):(_=U.cachePool,_!==null?(Z=ci._currentValue,_=_.parent!==Z?{parent:Z,pool:Z}:_):_=$g(),U={baseLanes:U.baseLanes|c,cachePool:_}),g.memoizedState=U,g.childLanes=qd(t,O,c),s.memoizedState=Yd,bc(t.child,g)):(qa(s),c=t.child,t=c.sibling,c=oa(c,{mode:"visible",children:g.children}),c.return=s,c.sibling=null,t!==null&&(O=s.deletions,O===null?(s.deletions=[t],s.flags|=16):O.push(t)),s.child=c,s.memoizedState=null,c)}function Qd(t,s){return s=th({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function th(t,s){return t=kr(22,t,null,s),t.lanes=0,t}function Wd(t,s,c){return Go(s,t.child,null,c),t=Qd(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function fp(t,s,c){t.lanes|=s;var g=t.alternate;g!==null&&(g.lanes|=s),ud(t.return,s,c)}function Kd(t,s,c,g,_,w){var O=t.memoizedState;O===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:g,tail:c,tailMode:_,treeForkCount:w}:(O.isBackwards=s,O.rendering=null,O.renderingStartTime=0,O.last=g,O.tail=c,O.tailMode=_,O.treeForkCount=w)}function dp(t,s,c){var g=s.pendingProps,_=g.revealOrder,w=g.tail;g=g.children;var O=ni.current,U=(O&2)!==0;if(U?(O=O&1|2,s.flags|=128):O&=1,Be(ni,O),Vi(t,s,g,c),g=Gt?hc:0,!U&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&fp(t,c,s);else if(t.tag===19)fp(t,c,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(_){case"forwards":for(c=s.child,_=null;c!==null;)t=c.alternate,t!==null&&Hu(t)===null&&(_=c),c=c.sibling;c=_,c===null?(_=s.child,s.child=null):(_=c.sibling,c.sibling=null),Kd(s,!1,_,c,w,g);break;case"backwards":case"unstable_legacy-backwards":for(c=null,_=s.child,s.child=null;_!==null;){if(t=_.alternate,t!==null&&Hu(t)===null){s.child=_;break}t=_.sibling,_.sibling=c,c=_,_=t}Kd(s,!0,c,null,w,g);break;case"together":Kd(s,!1,null,null,void 0,g);break;default:s.memoizedState=null}return s.child}function da(t,s,c){if(t!==null&&(s.dependencies=t.dependencies),Za|=s.lanes,(c&s.childLanes)===0)if(t!==null){if(xl(t,s,c,!1),(c&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(a(153));if(s.child!==null){for(t=s.child,c=oa(t,t.pendingProps),s.child=c,c.return=s;t.sibling!==null;)t=t.sibling,c=c.sibling=oa(t,t.pendingProps),c.return=s;c.sibling=null}return s.child}function Zd(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&Bu(t)))}function dT(t,s,c){switch(s.tag){case 3:Et(s,s.stateNode.containerInfo),Ha(s,ci,t.memoizedState.cache),Uo();break;case 27:case 5:Yi(s);break;case 4:Et(s,s.stateNode.containerInfo);break;case 10:Ha(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,wd(s),null;break;case 13:var g=s.memoizedState;if(g!==null)return g.dehydrated!==null?(qa(s),s.flags|=128,null):(c&s.child.childLanes)!==0?hp(t,s,c):(qa(s),t=da(t,s,c),t!==null?t.sibling:null);qa(s);break;case 19:var _=(t.flags&128)!==0;if(g=(c&s.childLanes)!==0,g||(xl(t,s,c,!1),g=(c&s.childLanes)!==0),_){if(g)return dp(t,s,c);s.flags|=128}if(_=s.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),Be(ni,ni.current),g)break;return null;case 22:return s.lanes=0,sp(t,s,c,s.pendingProps);case 24:Ha(s,ci,t.memoizedState.cache)}return da(t,s,c)}function gp(t,s,c){if(t!==null)if(t.memoizedProps!==s.pendingProps)hi=!0;else{if(!Zd(t,c)&&(s.flags&128)===0)return hi=!1,dT(t,s,c);hi=(t.flags&131072)!==0}else hi=!1,Gt&&(s.flags&1048576)!==0&&Xg(s,hc,s.index);switch(s.lanes=0,s.tag){case 16:e:{var g=s.pendingProps;if(t=zo(s.elementType),s.type=t,typeof t=="function")nd(t)?(g=Xo(t,g),s.tag=1,s=cp(null,s,t,g,c)):(s.tag=0,s=Gd(null,s,t,g,c));else{if(t!=null){var _=t.$$typeof;if(_===Se){s.tag=11,s=np(null,s,t,g,c);break e}else if(_===j){s.tag=14,s=ip(null,s,t,g,c);break e}}throw s=$e(t)||t,Error(a(306,s,""))}}return s;case 0:return Gd(t,s,s.type,s.pendingProps,c);case 1:return g=s.type,_=Xo(g,s.pendingProps),cp(t,s,g,_,c);case 3:e:{if(Et(s,s.stateNode.containerInfo),t===null)throw Error(a(387));g=s.pendingProps;var w=s.memoizedState;_=w.element,xd(t,s),Ec(s,g,null,c);var O=s.memoizedState;if(g=O.cache,Ha(s,ci,g),g!==w.cache&&hd(s,[ci],c,!0),yc(),g=O.element,w.isDehydrated)if(w={element:g,isDehydrated:!1,cache:O.cache},s.updateQueue.baseState=w,s.memoizedState=w,s.flags&256){s=up(t,s,g,c);break e}else if(g!==_){_=is(Error(a(424)),s),fc(_),s=up(t,s,g,c);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(vn=ls(t.firstChild),ki=s,Gt=!0,Fa=null,as=!0,c=sm(s,null,g,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Uo(),g===_){s=da(t,s,c);break e}Vi(t,s,g,c)}s=s.child}return s;case 26:return eh(t,s),t===null?(c=S2(s.type,null,s.pendingProps,null))?s.memoizedState=c:Gt||(c=s.type,t=s.pendingProps,g=xh(Me.current).createElement(c),g[Dn]=s,g[$t]=t,ji(g,c,t),Mn(g),s.stateNode=g):s.memoizedState=S2(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return Yi(s),t===null&&Gt&&(g=s.stateNode=w2(s.type,s.pendingProps,Me.current),ki=s,as=!0,_=vn,no(s.type)?(R0=_,vn=ls(g.firstChild)):vn=_),Vi(t,s,s.pendingProps.children,c),eh(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&Gt&&((_=g=vn)&&(g=HT(g,s.type,s.pendingProps,as),g!==null?(s.stateNode=g,ki=s,vn=ls(g.firstChild),as=!1,_=!0):_=!1),_||za(s)),Yi(s),_=s.type,w=s.pendingProps,O=t!==null?t.memoizedProps:null,g=w.children,S0(_,w)?g=null:O!==null&&S0(_,O)&&(s.flags|=32),s.memoizedState!==null&&(_=bd(t,s,rT,null,null,c),Vc._currentValue=_),eh(t,s),Vi(t,s,g,c),s.child;case 6:return t===null&&Gt&&((t=c=vn)&&(c=GT(c,s.pendingProps,as),c!==null?(s.stateNode=c,ki=s,vn=null,t=!0):t=!1),t||za(s)),null;case 13:return hp(t,s,c);case 4:return Et(s,s.stateNode.containerInfo),g=s.pendingProps,t===null?s.child=Go(s,null,g,c):Vi(t,s,g,c),s.child;case 11:return np(t,s,s.type,s.pendingProps,c);case 7:return Vi(t,s,s.pendingProps,c),s.child;case 8:return Vi(t,s,s.pendingProps.children,c),s.child;case 12:return Vi(t,s,s.pendingProps.children,c),s.child;case 10:return g=s.pendingProps,Ha(s,s.type,g.value),Vi(t,s,g.children,c),s.child;case 9:return _=s.type._context,g=s.pendingProps.children,jo(s),_=Ui(_),g=g(_),s.flags|=1,Vi(t,s,g,c),s.child;case 14:return ip(t,s,s.type,s.pendingProps,c);case 15:return rp(t,s,s.type,s.pendingProps,c);case 19:return dp(t,s,c);case 31:return fT(t,s,c);case 22:return sp(t,s,c,s.pendingProps);case 24:return jo(s),g=Ui(ci),t===null?(_=gd(),_===null&&(_=bn,w=fd(),_.pooledCache=w,w.refCount++,w!==null&&(_.pooledCacheLanes|=c),_=w),s.memoizedState={parent:g,cache:_},pd(s),Ha(s,ci,_)):((t.lanes&c)!==0&&(xd(t,s),Ec(s,null,null,c),yc()),_=t.memoizedState,w=s.memoizedState,_.parent!==g?(_={parent:g,cache:g},s.memoizedState=_,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=_),Ha(s,ci,g)):(g=w.cache,Ha(s,ci,g),g!==_.cache&&hd(s,[ci],c,!0))),Vi(t,s,s.pendingProps.children,c),s.child;case 29:throw s.pendingProps}throw Error(a(156,s.tag))}function ga(t){t.flags|=4}function Jd(t,s,c,g,_){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(_&335544128)===_)if(t.stateNode.complete)t.flags|=8192;else if(Fp())t.flags|=8192;else throw Ho=Vu,md}else t.flags&=-16777217}function mp(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!R2(s))if(Fp())t.flags|=8192;else throw Ho=Vu,md}function nh(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?Qt():536870912,t.lanes|=s,Nl|=s)}function Sc(t,s){if(!Gt)switch(t.tailMode){case"hidden":s=t.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?t.tail=null:c.sibling=null;break;case"collapsed":c=t.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:g.sibling=null}}function In(t){var s=t.alternate!==null&&t.alternate.child===t.child,c=0,g=0;if(s)for(var _=t.child;_!==null;)c|=_.lanes|_.childLanes,g|=_.subtreeFlags&65011712,g|=_.flags&65011712,_.return=t,_=_.sibling;else for(_=t.child;_!==null;)c|=_.lanes|_.childLanes,g|=_.subtreeFlags,g|=_.flags,_.return=t,_=_.sibling;return t.subtreeFlags|=g,t.childLanes=c,s}function gT(t,s,c){var g=s.pendingProps;switch(ad(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return In(s),null;case 1:return In(s),null;case 3:return c=s.stateNode,g=null,t!==null&&(g=t.memoizedState.cache),s.memoizedState.cache!==g&&(s.flags|=2048),ua(ci),Yt(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(t===null||t.child===null)&&(pl(s)?ga(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,ld())),In(s),null;case 26:var _=s.type,w=s.memoizedState;return t===null?(ga(s),w!==null?(In(s),mp(s,w)):(In(s),Jd(s,_,null,g,c))):w?w!==t.memoizedState?(ga(s),In(s),mp(s,w)):(In(s),s.flags&=-16777217):(t=t.memoizedProps,t!==g&&ga(s),In(s),Jd(s,_,t,g,c)),null;case 27:if(En(s),c=Me.current,_=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==g&&ga(s);else{if(!g){if(s.stateNode===null)throw Error(a(166));return In(s),null}t=Ue.current,pl(s)?Qg(s):(t=w2(_,g,c),s.stateNode=t,ga(s))}return In(s),null;case 5:if(En(s),_=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==g&&ga(s);else{if(!g){if(s.stateNode===null)throw Error(a(166));return In(s),null}if(w=Ue.current,pl(s))Qg(s);else{var O=xh(Me.current);switch(w){case 1:w=O.createElementNS("http://www.w3.org/2000/svg",_);break;case 2:w=O.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;default:switch(_){case"svg":w=O.createElementNS("http://www.w3.org/2000/svg",_);break;case"math":w=O.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;case"script":w=O.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof g.is=="string"?O.createElement("select",{is:g.is}):O.createElement("select"),g.multiple?w.multiple=!0:g.size&&(w.size=g.size);break;default:w=typeof g.is=="string"?O.createElement(_,{is:g.is}):O.createElement(_)}}w[Dn]=s,w[$t]=g;e:for(O=s.child;O!==null;){if(O.tag===5||O.tag===6)w.appendChild(O.stateNode);else if(O.tag!==4&&O.tag!==27&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===s)break e;for(;O.sibling===null;){if(O.return===null||O.return===s)break e;O=O.return}O.sibling.return=O.return,O=O.sibling}s.stateNode=w;e:switch(ji(w,_,g),_){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&ga(s)}}return In(s),Jd(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,c),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==g&&ga(s);else{if(typeof g!="string"&&s.stateNode===null)throw Error(a(166));if(t=Me.current,pl(s)){if(t=s.stateNode,c=s.memoizedProps,g=null,_=ki,_!==null)switch(_.tag){case 27:case 5:g=_.memoizedProps}t[Dn]=s,t=!!(t.nodeValue===c||g!==null&&g.suppressHydrationWarning===!0||h2(t.nodeValue,c)),t||za(s,!0)}else t=xh(t).createTextNode(g),t[Dn]=s,s.stateNode=t}return In(s),null;case 31:if(c=s.memoizedState,t===null||t.memoizedState!==null){if(g=pl(s),c!==null){if(t===null){if(!g)throw Error(a(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(557));t[Dn]=s}else Uo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;In(s),t=!1}else c=ld(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=c),t=!0;if(!t)return s.flags&256?(Vr(s),s):(Vr(s),null);if((s.flags&128)!==0)throw Error(a(558))}return In(s),null;case 13:if(g=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(_=pl(s),g!==null&&g.dehydrated!==null){if(t===null){if(!_)throw Error(a(318));if(_=s.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(a(317));_[Dn]=s}else Uo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;In(s),_=!1}else _=ld(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=_),_=!0;if(!_)return s.flags&256?(Vr(s),s):(Vr(s),null)}return Vr(s),(s.flags&128)!==0?(s.lanes=c,s):(c=g!==null,t=t!==null&&t.memoizedState!==null,c&&(g=s.child,_=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(_=g.alternate.memoizedState.cachePool.pool),w=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(w=g.memoizedState.cachePool.pool),w!==_&&(g.flags|=2048)),c!==t&&c&&(s.child.flags|=8192),nh(s,s.updateQueue),In(s),null);case 4:return Yt(),t===null&&_0(s.stateNode.containerInfo),In(s),null;case 10:return ua(s.type),In(s),null;case 19:if(Ae(ni),g=s.memoizedState,g===null)return In(s),null;if(_=(s.flags&128)!==0,w=g.rendering,w===null)if(_)Sc(g,!1);else{if(Zn!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(w=Hu(t),w!==null){for(s.flags|=128,Sc(g,!1),t=w.updateQueue,s.updateQueue=t,nh(s,t),s.subtreeFlags=0,t=c,c=s.child;c!==null;)Hg(c,t),c=c.sibling;return Be(ni,ni.current&1|2),Gt&&la(s,g.treeForkCount),s.child}t=t.sibling}g.tail!==null&&hn()>oh&&(s.flags|=128,_=!0,Sc(g,!1),s.lanes=4194304)}else{if(!_)if(t=Hu(w),t!==null){if(s.flags|=128,_=!0,t=t.updateQueue,s.updateQueue=t,nh(s,t),Sc(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!Gt)return In(s),null}else 2*hn()-g.renderingStartTime>oh&&c!==536870912&&(s.flags|=128,_=!0,Sc(g,!1),s.lanes=4194304);g.isBackwards?(w.sibling=s.child,s.child=w):(t=g.last,t!==null?t.sibling=w:s.child=w,g.last=w)}return g.tail!==null?(t=g.tail,g.rendering=t,g.tail=t.sibling,g.renderingStartTime=hn(),t.sibling=null,c=ni.current,Be(ni,_?c&1|2:c&1),Gt&&la(s,g.treeForkCount),t):(In(s),null);case 22:case 23:return Vr(s),Ad(),g=s.memoizedState!==null,t!==null?t.memoizedState!==null!==g&&(s.flags|=8192):g&&(s.flags|=8192),g?(c&536870912)!==0&&(s.flags&128)===0&&(In(s),s.subtreeFlags&6&&(s.flags|=8192)):In(s),c=s.updateQueue,c!==null&&nh(s,c.retryQueue),c=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(c=t.memoizedState.cachePool.pool),g=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(g=s.memoizedState.cachePool.pool),g!==c&&(s.flags|=2048),t!==null&&Ae(Fo),null;case 24:return c=null,t!==null&&(c=t.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),ua(ci),In(s),null;case 25:return null;case 30:return null}throw Error(a(156,s.tag))}function mT(t,s){switch(ad(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return ua(ci),Yt(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return En(s),null;case 31:if(s.memoizedState!==null){if(Vr(s),s.alternate===null)throw Error(a(340));Uo()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(Vr(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(a(340));Uo()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return Ae(ni),null;case 4:return Yt(),null;case 10:return ua(s.type),null;case 22:case 23:return Vr(s),Ad(),t!==null&&Ae(Fo),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return ua(ci),null;case 25:return null;default:return null}}function pp(t,s){switch(ad(s),s.tag){case 3:ua(ci),Yt();break;case 26:case 27:case 5:En(s);break;case 4:Yt();break;case 31:s.memoizedState!==null&&Vr(s);break;case 13:Vr(s);break;case 19:Ae(ni);break;case 10:ua(s.type);break;case 22:case 23:Vr(s),Ad(),t!==null&&Ae(Fo);break;case 24:ua(ci)}}function Cc(t,s){try{var c=s.updateQueue,g=c!==null?c.lastEffect:null;if(g!==null){var _=g.next;c=_;do{if((c.tag&t)===t){g=void 0;var w=c.create,O=c.inst;g=w(),O.destroy=g}c=c.next}while(c!==_)}}catch(U){gn(s,s.return,U)}}function Wa(t,s,c){try{var g=s.updateQueue,_=g!==null?g.lastEffect:null;if(_!==null){var w=_.next;g=w;do{if((g.tag&t)===t){var O=g.inst,U=O.destroy;if(U!==void 0){O.destroy=void 0,_=s;var Z=c,fe=U;try{fe()}catch(Te){gn(_,Z,Te)}}}g=g.next}while(g!==w)}}catch(Te){gn(s,s.return,Te)}}function xp(t){var s=t.updateQueue;if(s!==null){var c=t.stateNode;try{om(s,c)}catch(g){gn(t,t.return,g)}}}function yp(t,s,c){c.props=Xo(t.type,t.memoizedProps),c.state=t.memoizedState;try{c.componentWillUnmount()}catch(g){gn(t,s,g)}}function vc(t,s){try{var c=t.ref;if(c!==null){switch(t.tag){case 26:case 27:case 5:var g=t.stateNode;break;case 30:g=t.stateNode;break;default:g=t.stateNode}typeof c=="function"?t.refCleanup=c(g):c.current=g}}catch(_){gn(t,s,_)}}function ks(t,s){var c=t.ref,g=t.refCleanup;if(c!==null)if(typeof g=="function")try{g()}catch(_){gn(t,s,_)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(_){gn(t,s,_)}else c.current=null}function Ep(t){var s=t.type,c=t.memoizedProps,g=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":c.autoFocus&&g.focus();break e;case"img":c.src?g.src=c.src:c.srcSet&&(g.srcset=c.srcSet)}}catch(_){gn(t,t.return,_)}}function $d(t,s,c){try{var g=t.stateNode;kT(g,t.type,c,s),g[$t]=s}catch(_){gn(t,t.return,_)}}function _p(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&no(t.type)||t.tag===4}function e0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||_p(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&no(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function t0(t,s,c){var g=t.tag;if(g===5||g===6)t=t.stateNode,s?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(t,s):(s=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,s.appendChild(t),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=Zi));else if(g!==4&&(g===27&&no(t.type)&&(c=t.stateNode,s=null),t=t.child,t!==null))for(t0(t,s,c),t=t.sibling;t!==null;)t0(t,s,c),t=t.sibling}function ih(t,s,c){var g=t.tag;if(g===5||g===6)t=t.stateNode,s?c.insertBefore(t,s):c.appendChild(t);else if(g!==4&&(g===27&&no(t.type)&&(c=t.stateNode),t=t.child,t!==null))for(ih(t,s,c),t=t.sibling;t!==null;)ih(t,s,c),t=t.sibling}function Ap(t){var s=t.stateNode,c=t.memoizedProps;try{for(var g=t.type,_=s.attributes;_.length;)s.removeAttributeNode(_[0]);ji(s,g,c),s[Dn]=t,s[$t]=c}catch(w){gn(t,t.return,w)}}var ma=!1,fi=!1,n0=!1,wp=typeof WeakSet=="function"?WeakSet:Set,Ci=null;function pT(t,s){if(t=t.containerInfo,T0=bh,t=B(t),P(t)){if("selectionStart"in t)var c={start:t.selectionStart,end:t.selectionEnd};else e:{c=(c=t.ownerDocument)&&c.defaultView||window;var g=c.getSelection&&c.getSelection();if(g&&g.rangeCount!==0){c=g.anchorNode;var _=g.anchorOffset,w=g.focusNode;g=g.focusOffset;try{c.nodeType,w.nodeType}catch{c=null;break e}var O=0,U=-1,Z=-1,fe=0,Te=0,Ce=t,ge=null;t:for(;;){for(var _e;Ce!==c||_!==0&&Ce.nodeType!==3||(U=O+_),Ce!==w||g!==0&&Ce.nodeType!==3||(Z=O+g),Ce.nodeType===3&&(O+=Ce.nodeValue.length),(_e=Ce.firstChild)!==null;)ge=Ce,Ce=_e;for(;;){if(Ce===t)break t;if(ge===c&&++fe===_&&(U=O),ge===w&&++Te===g&&(Z=O),(_e=Ce.nextSibling)!==null)break;Ce=ge,ge=Ce.parentNode}Ce=_e}c=U===-1||Z===-1?null:{start:U,end:Z}}else c=null}c=c||{start:0,end:0}}else c=null;for(b0={focusedElem:t,selectionRange:c},bh=!1,Ci=s;Ci!==null;)if(s=Ci,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,Ci=t;else for(;Ci!==null;){switch(s=Ci,w=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(c=0;c<t.length;c++)_=t[c],_.ref.impl=_.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&w!==null){t=void 0,c=s,_=w.memoizedProps,w=w.memoizedState,g=c.stateNode;try{var Xe=Xo(c.type,_);t=g.getSnapshotBeforeUpdate(Xe,w),g.__reactInternalSnapshotBeforeUpdate=t}catch(st){gn(c,c.return,st)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,c=t.nodeType,c===9)v0(t);else if(c===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":v0(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=s.sibling,t!==null){t.return=s.return,Ci=t;break}Ci=s.return}}function Tp(t,s,c){var g=c.flags;switch(c.tag){case 0:case 11:case 15:xa(t,c),g&4&&Cc(5,c);break;case 1:if(xa(t,c),g&4)if(t=c.stateNode,s===null)try{t.componentDidMount()}catch(O){gn(c,c.return,O)}else{var _=Xo(c.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(_,s,t.__reactInternalSnapshotBeforeUpdate)}catch(O){gn(c,c.return,O)}}g&64&&xp(c),g&512&&vc(c,c.return);break;case 3:if(xa(t,c),g&64&&(t=c.updateQueue,t!==null)){if(s=null,c.child!==null)switch(c.child.tag){case 27:case 5:s=c.child.stateNode;break;case 1:s=c.child.stateNode}try{om(t,s)}catch(O){gn(c,c.return,O)}}break;case 27:s===null&&g&4&&Ap(c);case 26:case 5:xa(t,c),s===null&&g&4&&Ep(c),g&512&&vc(c,c.return);break;case 12:xa(t,c);break;case 31:xa(t,c),g&4&&Cp(t,c);break;case 13:xa(t,c),g&4&&vp(t,c),g&64&&(t=c.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(c=ST.bind(null,c),YT(t,c))));break;case 22:if(g=c.memoizedState!==null||ma,!g){s=s!==null&&s.memoizedState!==null||fi,_=ma;var w=fi;ma=g,(fi=s)&&!w?ya(t,c,(c.subtreeFlags&8772)!==0):xa(t,c),ma=_,fi=w}break;case 30:break;default:xa(t,c)}}function bp(t){var s=t.alternate;s!==null&&(t.alternate=null,bp(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&Di(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Un=null,Ar=!1;function pa(t,s,c){for(c=c.child;c!==null;)Sp(t,s,c),c=c.sibling}function Sp(t,s,c){if(Oe&&typeof Oe.onCommitFiberUnmount=="function")try{Oe.onCommitFiberUnmount(Xt,c)}catch{}switch(c.tag){case 26:fi||ks(c,s),pa(t,s,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:fi||ks(c,s);var g=Un,_=Ar;no(c.type)&&(Un=c.stateNode,Ar=!1),pa(t,s,c),Pc(c.stateNode),Un=g,Ar=_;break;case 5:fi||ks(c,s);case 6:if(g=Un,_=Ar,Un=null,pa(t,s,c),Un=g,Ar=_,Un!==null)if(Ar)try{(Un.nodeType===9?Un.body:Un.nodeName==="HTML"?Un.ownerDocument.body:Un).removeChild(c.stateNode)}catch(w){gn(c,s,w)}else try{Un.removeChild(c.stateNode)}catch(w){gn(c,s,w)}break;case 18:Un!==null&&(Ar?(t=Un,x2(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,c.stateNode),kl(t)):x2(Un,c.stateNode));break;case 4:g=Un,_=Ar,Un=c.stateNode.containerInfo,Ar=!0,pa(t,s,c),Un=g,Ar=_;break;case 0:case 11:case 14:case 15:Wa(2,c,s),fi||Wa(4,c,s),pa(t,s,c);break;case 1:fi||(ks(c,s),g=c.stateNode,typeof g.componentWillUnmount=="function"&&yp(c,s,g)),pa(t,s,c);break;case 21:pa(t,s,c);break;case 22:fi=(g=fi)||c.memoizedState!==null,pa(t,s,c),fi=g;break;default:pa(t,s,c)}}function Cp(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{kl(t)}catch(c){gn(s,s.return,c)}}}function vp(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{kl(t)}catch(c){gn(s,s.return,c)}}function xT(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new wp),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new wp),s;default:throw Error(a(435,t.tag))}}function rh(t,s){var c=xT(t);s.forEach(function(g){if(!c.has(g)){c.add(g);var _=CT.bind(null,t,g);g.then(_,_)}})}function wr(t,s){var c=s.deletions;if(c!==null)for(var g=0;g<c.length;g++){var _=c[g],w=t,O=s,U=O;e:for(;U!==null;){switch(U.tag){case 27:if(no(U.type)){Un=U.stateNode,Ar=!1;break e}break;case 5:Un=U.stateNode,Ar=!1;break e;case 3:case 4:Un=U.stateNode.containerInfo,Ar=!0;break e}U=U.return}if(Un===null)throw Error(a(160));Sp(w,O,_),Un=null,Ar=!1,w=_.alternate,w!==null&&(w.return=null),_.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Ip(s,t),s=s.sibling}var ws=null;function Ip(t,s){var c=t.alternate,g=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:wr(s,t),Tr(t),g&4&&(Wa(3,t,t.return),Cc(3,t),Wa(5,t,t.return));break;case 1:wr(s,t),Tr(t),g&512&&(fi||c===null||ks(c,c.return)),g&64&&ma&&(t=t.updateQueue,t!==null&&(g=t.callbacks,g!==null&&(c=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=c===null?g:c.concat(g))));break;case 26:var _=ws;if(wr(s,t),Tr(t),g&512&&(fi||c===null||ks(c,c.return)),g&4){var w=c!==null?c.memoizedState:null;if(g=t.memoizedState,c===null)if(g===null)if(t.stateNode===null){e:{g=t.type,c=t.memoizedProps,_=_.ownerDocument||_;t:switch(g){case"title":w=_.getElementsByTagName("title")[0],(!w||w[Qr]||w[Dn]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=_.createElement(g),_.head.insertBefore(w,_.querySelector("head > title"))),ji(w,g,c),w[Dn]=t,Mn(w),g=w;break e;case"link":var O=I2("link","href",_).get(g+(c.href||""));if(O){for(var U=0;U<O.length;U++)if(w=O[U],w.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&w.getAttribute("rel")===(c.rel==null?null:c.rel)&&w.getAttribute("title")===(c.title==null?null:c.title)&&w.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){O.splice(U,1);break t}}w=_.createElement(g),ji(w,g,c),_.head.appendChild(w);break;case"meta":if(O=I2("meta","content",_).get(g+(c.content||""))){for(U=0;U<O.length;U++)if(w=O[U],w.getAttribute("content")===(c.content==null?null:""+c.content)&&w.getAttribute("name")===(c.name==null?null:c.name)&&w.getAttribute("property")===(c.property==null?null:c.property)&&w.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&w.getAttribute("charset")===(c.charSet==null?null:c.charSet)){O.splice(U,1);break t}}w=_.createElement(g),ji(w,g,c),_.head.appendChild(w);break;default:throw Error(a(468,g))}w[Dn]=t,Mn(w),g=w}t.stateNode=g}else N2(_,t.type,t.stateNode);else t.stateNode=v2(_,g,t.memoizedProps);else w!==g?(w===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):w.count--,g===null?N2(_,t.type,t.stateNode):v2(_,g,t.memoizedProps)):g===null&&t.stateNode!==null&&$d(t,t.memoizedProps,c.memoizedProps)}break;case 27:wr(s,t),Tr(t),g&512&&(fi||c===null||ks(c,c.return)),c!==null&&g&4&&$d(t,t.memoizedProps,c.memoizedProps);break;case 5:if(wr(s,t),Tr(t),g&512&&(fi||c===null||ks(c,c.return)),t.flags&32){_=t.stateNode;try{Ki(_,"")}catch(Xe){gn(t,t.return,Xe)}}g&4&&t.stateNode!=null&&(_=t.memoizedProps,$d(t,_,c!==null?c.memoizedProps:_)),g&1024&&(n0=!0);break;case 6:if(wr(s,t),Tr(t),g&4){if(t.stateNode===null)throw Error(a(162));g=t.memoizedProps,c=t.stateNode;try{c.nodeValue=g}catch(Xe){gn(t,t.return,Xe)}}break;case 3:if(_h=null,_=ws,ws=yh(s.containerInfo),wr(s,t),ws=_,Tr(t),g&4&&c!==null&&c.memoizedState.isDehydrated)try{kl(s.containerInfo)}catch(Xe){gn(t,t.return,Xe)}n0&&(n0=!1,Np(t));break;case 4:g=ws,ws=yh(t.stateNode.containerInfo),wr(s,t),Tr(t),ws=g;break;case 12:wr(s,t),Tr(t);break;case 31:wr(s,t),Tr(t),g&4&&(g=t.updateQueue,g!==null&&(t.updateQueue=null,rh(t,g)));break;case 13:wr(s,t),Tr(t),t.child.flags&8192&&t.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(ah=hn()),g&4&&(g=t.updateQueue,g!==null&&(t.updateQueue=null,rh(t,g)));break;case 22:_=t.memoizedState!==null;var Z=c!==null&&c.memoizedState!==null,fe=ma,Te=fi;if(ma=fe||_,fi=Te||Z,wr(s,t),fi=Te,ma=fe,Tr(t),g&8192)e:for(s=t.stateNode,s._visibility=_?s._visibility&-2:s._visibility|1,_&&(c===null||Z||ma||fi||qo(t)),c=null,s=t;;){if(s.tag===5||s.tag===26){if(c===null){Z=c=s;try{if(w=Z.stateNode,_)O=w.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none";else{U=Z.stateNode;var Ce=Z.memoizedProps.style,ge=Ce!=null&&Ce.hasOwnProperty("display")?Ce.display:null;U.style.display=ge==null||typeof ge=="boolean"?"":(""+ge).trim()}}catch(Xe){gn(Z,Z.return,Xe)}}}else if(s.tag===6){if(c===null){Z=s;try{Z.stateNode.nodeValue=_?"":Z.memoizedProps}catch(Xe){gn(Z,Z.return,Xe)}}}else if(s.tag===18){if(c===null){Z=s;try{var _e=Z.stateNode;_?y2(_e,!0):y2(Z.stateNode,!1)}catch(Xe){gn(Z,Z.return,Xe)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;c===s&&(c=null),s=s.return}c===s&&(c=null),s.sibling.return=s.return,s=s.sibling}g&4&&(g=t.updateQueue,g!==null&&(c=g.retryQueue,c!==null&&(g.retryQueue=null,rh(t,c))));break;case 19:wr(s,t),Tr(t),g&4&&(g=t.updateQueue,g!==null&&(t.updateQueue=null,rh(t,g)));break;case 30:break;case 21:break;default:wr(s,t),Tr(t)}}function Tr(t){var s=t.flags;if(s&2){try{for(var c,g=t.return;g!==null;){if(_p(g)){c=g;break}g=g.return}if(c==null)throw Error(a(160));switch(c.tag){case 27:var _=c.stateNode,w=e0(t);ih(t,w,_);break;case 5:var O=c.stateNode;c.flags&32&&(Ki(O,""),c.flags&=-33);var U=e0(t);ih(t,U,O);break;case 3:case 4:var Z=c.stateNode.containerInfo,fe=e0(t);t0(t,fe,Z);break;default:throw Error(a(161))}}catch(Te){gn(t,t.return,Te)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function Np(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;Np(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function xa(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Tp(t,s.alternate,s),s=s.sibling}function qo(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:Wa(4,s,s.return),qo(s);break;case 1:ks(s,s.return);var c=s.stateNode;typeof c.componentWillUnmount=="function"&&yp(s,s.return,c),qo(s);break;case 27:Pc(s.stateNode);case 26:case 5:ks(s,s.return),qo(s);break;case 22:s.memoizedState===null&&qo(s);break;case 30:qo(s);break;default:qo(s)}t=t.sibling}}function ya(t,s,c){for(c=c&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var g=s.alternate,_=t,w=s,O=w.flags;switch(w.tag){case 0:case 11:case 15:ya(_,w,c),Cc(4,w);break;case 1:if(ya(_,w,c),g=w,_=g.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(fe){gn(g,g.return,fe)}if(g=w,_=g.updateQueue,_!==null){var U=g.stateNode;try{var Z=_.shared.hiddenCallbacks;if(Z!==null)for(_.shared.hiddenCallbacks=null,_=0;_<Z.length;_++)am(Z[_],U)}catch(fe){gn(g,g.return,fe)}}c&&O&64&&xp(w),vc(w,w.return);break;case 27:Ap(w);case 26:case 5:ya(_,w,c),c&&g===null&&O&4&&Ep(w),vc(w,w.return);break;case 12:ya(_,w,c);break;case 31:ya(_,w,c),c&&O&4&&Cp(_,w);break;case 13:ya(_,w,c),c&&O&4&&vp(_,w);break;case 22:w.memoizedState===null&&ya(_,w,c),vc(w,w.return);break;case 30:break;default:ya(_,w,c)}s=s.sibling}}function i0(t,s){var c=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(c=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==c&&(t!=null&&t.refCount++,c!=null&&dc(c))}function r0(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&dc(t))}function Ts(t,s,c,g){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Rp(t,s,c,g),s=s.sibling}function Rp(t,s,c,g){var _=s.flags;switch(s.tag){case 0:case 11:case 15:Ts(t,s,c,g),_&2048&&Cc(9,s);break;case 1:Ts(t,s,c,g);break;case 3:Ts(t,s,c,g),_&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&dc(t)));break;case 12:if(_&2048){Ts(t,s,c,g),t=s.stateNode;try{var w=s.memoizedProps,O=w.id,U=w.onPostCommit;typeof U=="function"&&U(O,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(Z){gn(s,s.return,Z)}}else Ts(t,s,c,g);break;case 31:Ts(t,s,c,g);break;case 13:Ts(t,s,c,g);break;case 23:break;case 22:w=s.stateNode,O=s.alternate,s.memoizedState!==null?w._visibility&2?Ts(t,s,c,g):Ic(t,s):w._visibility&2?Ts(t,s,c,g):(w._visibility|=2,Cl(t,s,c,g,(s.subtreeFlags&10256)!==0||!1)),_&2048&&i0(O,s);break;case 24:Ts(t,s,c,g),_&2048&&r0(s.alternate,s);break;default:Ts(t,s,c,g)}}function Cl(t,s,c,g,_){for(_=_&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var w=t,O=s,U=c,Z=g,fe=O.flags;switch(O.tag){case 0:case 11:case 15:Cl(w,O,U,Z,_),Cc(8,O);break;case 23:break;case 22:var Te=O.stateNode;O.memoizedState!==null?Te._visibility&2?Cl(w,O,U,Z,_):Ic(w,O):(Te._visibility|=2,Cl(w,O,U,Z,_)),_&&fe&2048&&i0(O.alternate,O);break;case 24:Cl(w,O,U,Z,_),_&&fe&2048&&r0(O.alternate,O);break;default:Cl(w,O,U,Z,_)}s=s.sibling}}function Ic(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var c=t,g=s,_=g.flags;switch(g.tag){case 22:Ic(c,g),_&2048&&i0(g.alternate,g);break;case 24:Ic(c,g),_&2048&&r0(g.alternate,g);break;default:Ic(c,g)}s=s.sibling}}var Nc=8192;function vl(t,s,c){if(t.subtreeFlags&Nc)for(t=t.child;t!==null;)Op(t,s,c),t=t.sibling}function Op(t,s,c){switch(t.tag){case 26:vl(t,s,c),t.flags&Nc&&t.memoizedState!==null&&ib(c,ws,t.memoizedState,t.memoizedProps);break;case 5:vl(t,s,c);break;case 3:case 4:var g=ws;ws=yh(t.stateNode.containerInfo),vl(t,s,c),ws=g;break;case 22:t.memoizedState===null&&(g=t.alternate,g!==null&&g.memoizedState!==null?(g=Nc,Nc=16777216,vl(t,s,c),Nc=g):vl(t,s,c));break;default:vl(t,s,c)}}function Dp(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Rc(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var g=s[c];Ci=g,Lp(g,t)}Dp(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Mp(t),t=t.sibling}function Mp(t){switch(t.tag){case 0:case 11:case 15:Rc(t),t.flags&2048&&Wa(9,t,t.return);break;case 3:Rc(t);break;case 12:Rc(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,sh(t)):Rc(t);break;default:Rc(t)}}function sh(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var g=s[c];Ci=g,Lp(g,t)}Dp(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:Wa(8,s,s.return),sh(s);break;case 22:c=s.stateNode,c._visibility&2&&(c._visibility&=-3,sh(s));break;default:sh(s)}t=t.sibling}}function Lp(t,s){for(;Ci!==null;){var c=Ci;switch(c.tag){case 0:case 11:case 15:Wa(8,c,s);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var g=c.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:dc(c.memoizedState.cache)}if(g=c.child,g!==null)g.return=c,Ci=g;else e:for(c=t;Ci!==null;){g=Ci;var _=g.sibling,w=g.return;if(bp(g),g===c){Ci=null;break e}if(_!==null){_.return=w,Ci=_;break e}Ci=w}}}var yT={getCacheForType:function(t){var s=Ui(ci),c=s.data.get(t);return c===void 0&&(c=t(),s.data.set(t,c)),c},cacheSignal:function(){return Ui(ci).controller.signal}},ET=typeof WeakMap=="function"?WeakMap:Map,an=0,bn=null,Mt=null,Ut=0,dn=0,jr=null,Ka=!1,Il=!1,s0=!1,Ea=0,Zn=0,Za=0,Qo=0,a0=0,Fr=0,Nl=0,Oc=null,br=null,o0=!1,ah=0,Bp=0,oh=1/0,lh=null,Ja=null,Ei=0,$a=null,Rl=null,_a=0,l0=0,c0=null,Pp=null,Dc=0,u0=null;function zr(){return(an&2)!==0&&Ut!==0?Ut&-Ut:me.T!==null?p0():Ri()}function kp(){if(Fr===0)if((Ut&536870912)===0||Gt){var t=_t;_t<<=1,(_t&3932160)===0&&(_t=262144),Fr=t}else Fr=536870912;return t=Ur.current,t!==null&&(t.flags|=32),Fr}function Sr(t,s,c){(t===bn&&(dn===2||dn===9)||t.cancelPendingCommit!==null)&&(Ol(t,0),eo(t,Ut,Fr,!1)),Ii(t,c),((an&2)===0||t!==bn)&&(t===bn&&((an&2)===0&&(Qo|=c),Zn===4&&eo(t,Ut,Fr,!1)),Us(t))}function Up(t,s,c){if((an&6)!==0)throw Error(a(327));var g=!c&&(s&127)===0&&(s&t.expiredLanes)===0||Tt(t,s),_=g?wT(t,s):f0(t,s,!0),w=g;do{if(_===0){Il&&!g&&eo(t,s,0,!1);break}else{if(c=t.current.alternate,w&&!_T(c)){_=f0(t,s,!1),w=!1;continue}if(_===2){if(w=s,t.errorRecoveryDisabledLanes&w)var O=0;else O=t.pendingLanes&-536870913,O=O!==0?O:O&536870912?536870912:0;if(O!==0){s=O;e:{var U=t;_=Oc;var Z=U.current.memoizedState.isDehydrated;if(Z&&(Ol(U,O).flags|=256),O=f0(U,O,!1),O!==2){if(s0&&!Z){U.errorRecoveryDisabledLanes|=w,Qo|=w,_=4;break e}w=br,br=_,w!==null&&(br===null?br=w:br.push.apply(br,w))}_=O}if(w=!1,_!==2)continue}}if(_===1){Ol(t,0),eo(t,s,0,!0);break}e:{switch(g=t,w=_,w){case 0:case 1:throw Error(a(345));case 4:if((s&4194048)!==s)break;case 6:eo(g,s,Fr,!Ka);break e;case 2:br=null;break;case 3:case 5:break;default:throw Error(a(329))}if((s&62914560)===s&&(_=ah+300-hn(),10<_)){if(eo(g,s,Fr,!Ka),lt(g,0,!0)!==0)break e;_a=s,g.timeoutHandle=m2(Vp.bind(null,g,c,br,lh,o0,s,Fr,Qo,Nl,Ka,w,"Throttled",-0,0),_);break e}Vp(g,c,br,lh,o0,s,Fr,Qo,Nl,Ka,w,null,-0,0)}}break}while(!0);Us(t)}function Vp(t,s,c,g,_,w,O,U,Z,fe,Te,Ce,ge,_e){if(t.timeoutHandle=-1,Ce=s.subtreeFlags,Ce&8192||(Ce&16785408)===16785408){Ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Zi},Op(s,w,Ce);var Xe=(w&62914560)===w?ah-hn():(w&4194048)===w?Bp-hn():0;if(Xe=rb(Ce,Xe),Xe!==null){_a=w,t.cancelPendingCommit=Xe(qp.bind(null,t,s,w,c,g,_,O,U,Z,Te,Ce,null,ge,_e)),eo(t,w,O,!fe);return}}qp(t,s,w,c,g,_,O,U,Z)}function _T(t){for(var s=t;;){var c=s.tag;if((c===0||c===11||c===15)&&s.flags&16384&&(c=s.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var g=0;g<c.length;g++){var _=c[g],w=_.getSnapshot;_=_.value;try{if(!m(w(),_))return!1}catch{return!1}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function eo(t,s,c,g){s&=~a0,s&=~Qo,t.suspendedLanes|=s,t.pingedLanes&=~s,g&&(t.warmLanes|=s),g=t.expirationTimes;for(var _=s;0<_;){var w=31-it(_),O=1<<w;g[w]=-1,_&=~O}c!==0&&qr(t,c,s)}function ch(){return(an&6)===0?(Mc(0),!1):!0}function h0(){if(Mt!==null){if(dn===0)var t=Mt.return;else t=Mt,ca=Vo=null,vd(t),Al=null,mc=0,t=Mt;for(;t!==null;)pp(t.alternate,t),t=t.return;Mt=null}}function Ol(t,s){var c=t.timeoutHandle;c!==-1&&(t.timeoutHandle=-1,jT(c)),c=t.cancelPendingCommit,c!==null&&(t.cancelPendingCommit=null,c()),_a=0,h0(),bn=t,Mt=c=oa(t.current,null),Ut=s,dn=0,jr=null,Ka=!1,Il=Tt(t,s),s0=!1,Nl=Fr=a0=Qo=Za=Zn=0,br=Oc=null,o0=!1,(s&8)!==0&&(s|=s&32);var g=t.entangledLanes;if(g!==0)for(t=t.entanglements,g&=s;0<g;){var _=31-it(g),w=1<<_;s|=t[_],g&=~w}return Ea=s,Ru(),c}function jp(t,s){yt=null,me.H=Tc,s===_l||s===Uu?(s=nm(),dn=3):s===md?(s=nm(),dn=4):dn=s===Hd?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,jr=s,Mt===null&&(Zn=1,Ju(t,is(s,t.current)))}function Fp(){var t=Ur.current;return t===null?!0:(Ut&4194048)===Ut?os===null:(Ut&62914560)===Ut||(Ut&536870912)!==0?t===os:!1}function zp(){var t=me.H;return me.H=Tc,t===null?Tc:t}function Hp(){var t=me.A;return me.A=yT,t}function uh(){Zn=4,Ka||(Ut&4194048)!==Ut&&Ur.current!==null||(Il=!0),(Za&134217727)===0&&(Qo&134217727)===0||bn===null||eo(bn,Ut,Fr,!1)}function f0(t,s,c){var g=an;an|=2;var _=zp(),w=Hp();(bn!==t||Ut!==s)&&(lh=null,Ol(t,s)),s=!1;var O=Zn;e:do try{if(dn!==0&&Mt!==null){var U=Mt,Z=jr;switch(dn){case 8:h0(),O=6;break e;case 3:case 2:case 9:case 6:Ur.current===null&&(s=!0);var fe=dn;if(dn=0,jr=null,Dl(t,U,Z,fe),c&&Il){O=0;break e}break;default:fe=dn,dn=0,jr=null,Dl(t,U,Z,fe)}}AT(),O=Zn;break}catch(Te){jp(t,Te)}while(!0);return s&&t.shellSuspendCounter++,ca=Vo=null,an=g,me.H=_,me.A=w,Mt===null&&(bn=null,Ut=0,Ru()),O}function AT(){for(;Mt!==null;)Gp(Mt)}function wT(t,s){var c=an;an|=2;var g=zp(),_=Hp();bn!==t||Ut!==s?(lh=null,oh=hn()+500,Ol(t,s)):Il=Tt(t,s);e:do try{if(dn!==0&&Mt!==null){s=Mt;var w=jr;t:switch(dn){case 1:dn=0,jr=null,Dl(t,s,w,1);break;case 2:case 9:if(em(w)){dn=0,jr=null,Yp(s);break}s=function(){dn!==2&&dn!==9||bn!==t||(dn=7),Us(t)},w.then(s,s);break e;case 3:dn=7;break e;case 4:dn=5;break e;case 7:em(w)?(dn=0,jr=null,Yp(s)):(dn=0,jr=null,Dl(t,s,w,7));break;case 5:var O=null;switch(Mt.tag){case 26:O=Mt.memoizedState;case 5:case 27:var U=Mt;if(O?R2(O):U.stateNode.complete){dn=0,jr=null;var Z=U.sibling;if(Z!==null)Mt=Z;else{var fe=U.return;fe!==null?(Mt=fe,hh(fe)):Mt=null}break t}}dn=0,jr=null,Dl(t,s,w,5);break;case 6:dn=0,jr=null,Dl(t,s,w,6);break;case 8:h0(),Zn=6;break e;default:throw Error(a(462))}}TT();break}catch(Te){jp(t,Te)}while(!0);return ca=Vo=null,me.H=g,me.A=_,an=c,Mt!==null?0:(bn=null,Ut=0,Ru(),Zn)}function TT(){for(;Mt!==null&&!ms();)Gp(Mt)}function Gp(t){var s=gp(t.alternate,t,Ea);t.memoizedProps=t.pendingProps,s===null?hh(t):Mt=s}function Yp(t){var s=t,c=s.alternate;switch(s.tag){case 15:case 0:s=lp(c,s,s.pendingProps,s.type,void 0,Ut);break;case 11:s=lp(c,s,s.pendingProps,s.type.render,s.ref,Ut);break;case 5:vd(s);default:pp(c,s),s=Mt=Hg(s,Ea),s=gp(c,s,Ea)}t.memoizedProps=t.pendingProps,s===null?hh(t):Mt=s}function Dl(t,s,c,g){ca=Vo=null,vd(s),Al=null,mc=0;var _=s.return;try{if(hT(t,_,s,c,Ut)){Zn=1,Ju(t,is(c,t.current)),Mt=null;return}}catch(w){if(_!==null)throw Mt=_,w;Zn=1,Ju(t,is(c,t.current)),Mt=null;return}s.flags&32768?(Gt||g===1?t=!0:Il||(Ut&536870912)!==0?t=!1:(Ka=t=!0,(g===2||g===9||g===3||g===6)&&(g=Ur.current,g!==null&&g.tag===13&&(g.flags|=16384))),Xp(s,t)):hh(s)}function hh(t){var s=t;do{if((s.flags&32768)!==0){Xp(s,Ka);return}t=s.return;var c=gT(s.alternate,s,Ea);if(c!==null){Mt=c;return}if(s=s.sibling,s!==null){Mt=s;return}Mt=s=t}while(s!==null);Zn===0&&(Zn=5)}function Xp(t,s){do{var c=mT(t.alternate,t);if(c!==null){c.flags&=32767,Mt=c;return}if(c=t.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!s&&(t=t.sibling,t!==null)){Mt=t;return}Mt=t=c}while(t!==null);Zn=6,Mt=null}function qp(t,s,c,g,_,w,O,U,Z){t.cancelPendingCommit=null;do fh();while(Ei!==0);if((an&6)!==0)throw Error(a(327));if(s!==null){if(s===t.current)throw Error(a(177));if(w=s.lanes|s.childLanes,w|=ed,wi(t,c,w,O,U,Z),t===bn&&(Mt=bn=null,Ut=0),Rl=s,$a=t,_a=c,l0=w,c0=_,Pp=g,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,vT(pi,function(){return Jp(),null})):(t.callbackNode=null,t.callbackPriority=0),g=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||g){g=me.T,me.T=null,_=we.p,we.p=2,O=an,an|=4;try{pT(t,s,c)}finally{an=O,we.p=_,me.T=g}}Ei=1,Qp(),Wp(),Kp()}}function Qp(){if(Ei===1){Ei=0;var t=$a,s=Rl,c=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||c){c=me.T,me.T=null;var g=we.p;we.p=2;var _=an;an|=4;try{Ip(s,t);var w=b0,O=B(t.containerInfo),U=w.focusedElem,Z=w.selectionRange;if(O!==U&&U&&U.ownerDocument&&R(U.ownerDocument.documentElement,U)){if(Z!==null&&P(U)){var fe=Z.start,Te=Z.end;if(Te===void 0&&(Te=fe),"selectionStart"in U)U.selectionStart=fe,U.selectionEnd=Math.min(Te,U.value.length);else{var Ce=U.ownerDocument||document,ge=Ce&&Ce.defaultView||window;if(ge.getSelection){var _e=ge.getSelection(),Xe=U.textContent.length,st=Math.min(Z.start,Xe),yn=Z.end===void 0?st:Math.min(Z.end,Xe);!_e.extend&&st>yn&&(O=yn,yn=st,st=O);var ae=S(U,st),ie=S(U,yn);if(ae&&ie&&(_e.rangeCount!==1||_e.anchorNode!==ae.node||_e.anchorOffset!==ae.offset||_e.focusNode!==ie.node||_e.focusOffset!==ie.offset)){var ue=Ce.createRange();ue.setStart(ae.node,ae.offset),_e.removeAllRanges(),st>yn?(_e.addRange(ue),_e.extend(ie.node,ie.offset)):(ue.setEnd(ie.node,ie.offset),_e.addRange(ue))}}}}for(Ce=[],_e=U;_e=_e.parentNode;)_e.nodeType===1&&Ce.push({element:_e,left:_e.scrollLeft,top:_e.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<Ce.length;U++){var be=Ce[U];be.element.scrollLeft=be.left,be.element.scrollTop=be.top}}bh=!!T0,b0=T0=null}finally{an=_,we.p=g,me.T=c}}t.current=s,Ei=2}}function Wp(){if(Ei===2){Ei=0;var t=$a,s=Rl,c=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||c){c=me.T,me.T=null;var g=we.p;we.p=2;var _=an;an|=4;try{Tp(t,s.alternate,s)}finally{an=_,we.p=g,me.T=c}}Ei=3}}function Kp(){if(Ei===4||Ei===3){Ei=0,Cs();var t=$a,s=Rl,c=_a,g=Pp;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Ei=5:(Ei=0,Rl=$a=null,Zp(t,t.pendingLanes));var _=t.pendingLanes;if(_===0&&(Ja=null),Ni(c),s=s.stateNode,Oe&&typeof Oe.onCommitFiberRoot=="function")try{Oe.onCommitFiberRoot(Xt,s,void 0,(s.current.flags&128)===128)}catch{}if(g!==null){s=me.T,_=we.p,we.p=2,me.T=null;try{for(var w=t.onRecoverableError,O=0;O<g.length;O++){var U=g[O];w(U.value,{componentStack:U.stack})}}finally{me.T=s,we.p=_}}(_a&3)!==0&&fh(),Us(t),_=t.pendingLanes,(c&261930)!==0&&(_&42)!==0?t===u0?Dc++:(Dc=0,u0=t):Dc=0,Mc(0)}}function Zp(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,dc(s)))}function fh(){return Qp(),Wp(),Kp(),Jp()}function Jp(){if(Ei!==5)return!1;var t=$a,s=l0;l0=0;var c=Ni(_a),g=me.T,_=we.p;try{we.p=32>c?32:c,me.T=null,c=c0,c0=null;var w=$a,O=_a;if(Ei=0,Rl=$a=null,_a=0,(an&6)!==0)throw Error(a(331));var U=an;if(an|=4,Mp(w.current),Rp(w,w.current,O,c),an=U,Mc(0,!1),Oe&&typeof Oe.onPostCommitFiberRoot=="function")try{Oe.onPostCommitFiberRoot(Xt,w)}catch{}return!0}finally{we.p=_,me.T=g,Zp(t,s)}}function $p(t,s,c){s=is(c,s),s=zd(t.stateNode,s,2),t=Xa(t,s,2),t!==null&&(Ii(t,2),Us(t))}function gn(t,s,c){if(t.tag===3)$p(t,t,c);else for(;s!==null;){if(s.tag===3){$p(s,t,c);break}else if(s.tag===1){var g=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Ja===null||!Ja.has(g))){t=is(c,t),c=ep(2),g=Xa(s,c,2),g!==null&&(tp(c,g,s,t),Ii(g,2),Us(g));break}}s=s.return}}function d0(t,s,c){var g=t.pingCache;if(g===null){g=t.pingCache=new ET;var _=new Set;g.set(s,_)}else _=g.get(s),_===void 0&&(_=new Set,g.set(s,_));_.has(c)||(s0=!0,_.add(c),t=bT.bind(null,t,s,c),s.then(t,t))}function bT(t,s,c){var g=t.pingCache;g!==null&&g.delete(s),t.pingedLanes|=t.suspendedLanes&c,t.warmLanes&=~c,bn===t&&(Ut&c)===c&&(Zn===4||Zn===3&&(Ut&62914560)===Ut&&300>hn()-ah?(an&2)===0&&Ol(t,0):a0|=c,Nl===Ut&&(Nl=0)),Us(t)}function e2(t,s){s===0&&(s=Qt()),t=Po(t,s),t!==null&&(Ii(t,s),Us(t))}function ST(t){var s=t.memoizedState,c=0;s!==null&&(c=s.retryLane),e2(t,c)}function CT(t,s){var c=0;switch(t.tag){case 31:case 13:var g=t.stateNode,_=t.memoizedState;_!==null&&(c=_.retryLane);break;case 19:g=t.stateNode;break;case 22:g=t.stateNode._retryCache;break;default:throw Error(a(314))}g!==null&&g.delete(s),e2(t,c)}function vT(t,s){return An(t,s)}var dh=null,Ml=null,g0=!1,gh=!1,m0=!1,to=0;function Us(t){t!==Ml&&t.next===null&&(Ml===null?dh=Ml=t:Ml=Ml.next=t),gh=!0,g0||(g0=!0,NT())}function Mc(t,s){if(!m0&&gh){m0=!0;do for(var c=!1,g=dh;g!==null;){if(t!==0){var _=g.pendingLanes;if(_===0)var w=0;else{var O=g.suspendedLanes,U=g.pingedLanes;w=(1<<31-it(42|t)+1)-1,w&=_&~(O&~U),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(c=!0,r2(g,w))}else w=Ut,w=lt(g,g===bn?w:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(w&3)===0||Tt(g,w)||(c=!0,r2(g,w));g=g.next}while(c);m0=!1}}function IT(){t2()}function t2(){gh=g0=!1;var t=0;to!==0&&VT()&&(t=to);for(var s=hn(),c=null,g=dh;g!==null;){var _=g.next,w=n2(g,s);w===0?(g.next=null,c===null?dh=_:c.next=_,_===null&&(Ml=c)):(c=g,(t!==0||(w&3)!==0)&&(gh=!0)),g=_}Ei!==0&&Ei!==5||Mc(t),to!==0&&(to=0)}function n2(t,s){for(var c=t.suspendedLanes,g=t.pingedLanes,_=t.expirationTimes,w=t.pendingLanes&-62914561;0<w;){var O=31-it(w),U=1<<O,Z=_[O];Z===-1?((U&c)===0||(U&g)!==0)&&(_[O]=qi(U,s)):Z<=s&&(t.expiredLanes|=U),w&=~U}if(s=bn,c=Ut,c=lt(t,t===s?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),g=t.callbackNode,c===0||t===s&&(dn===2||dn===9)||t.cancelPendingCommit!==null)return g!==null&&g!==null&&Fe(g),t.callbackNode=null,t.callbackPriority=0;if((c&3)===0||Tt(t,c)){if(s=c&-c,s===t.callbackPriority)return s;switch(g!==null&&Fe(g),Ni(c)){case 2:case 8:c=vs;break;case 32:c=pi;break;case 268435456:c=Qs;break;default:c=pi}return g=i2.bind(null,t),c=An(c,g),t.callbackPriority=s,t.callbackNode=c,s}return g!==null&&g!==null&&Fe(g),t.callbackPriority=2,t.callbackNode=null,2}function i2(t,s){if(Ei!==0&&Ei!==5)return t.callbackNode=null,t.callbackPriority=0,null;var c=t.callbackNode;if(fh()&&t.callbackNode!==c)return null;var g=Ut;return g=lt(t,t===bn?g:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),g===0?null:(Up(t,g,s),n2(t,hn()),t.callbackNode!=null&&t.callbackNode===c?i2.bind(null,t):null)}function r2(t,s){if(fh())return null;Up(t,s,!0)}function NT(){FT(function(){(an&6)!==0?An(li,IT):t2()})}function p0(){if(to===0){var t=yl;t===0&&(t=rr,rr<<=1,(rr&261888)===0&&(rr=256)),to=t}return to}function s2(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Os(""+t)}function a2(t,s){var c=s.ownerDocument.createElement("input");return c.name=s.name,c.value=s.value,t.id&&c.setAttribute("form",t.id),s.parentNode.insertBefore(c,s),t=new FormData(t),c.parentNode.removeChild(c),t}function RT(t,s,c,g,_){if(s==="submit"&&c&&c.stateNode===_){var w=s2((_[$t]||null).action),O=g.submitter;O&&(s=(s=O[$t]||null)?s2(s.formAction):O.getAttribute("formAction"),s!==null&&(w=s,O=null));var U=new Cn("action","action",null,g,_);t.push({event:U,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(to!==0){var Z=O?a2(_,O):new FormData(_);Pd(c,{pending:!0,data:Z,method:_.method,action:w},null,Z)}}else typeof w=="function"&&(U.preventDefault(),Z=O?a2(_,O):new FormData(_),Pd(c,{pending:!0,data:Z,method:_.method,action:w},w,Z))},currentTarget:_}]})}}for(var x0=0;x0<uc.length;x0++){var y0=uc[x0],OT=y0.toLowerCase(),DT=y0[0].toUpperCase()+y0.slice(1);As(OT,"on"+DT)}As(_r,"onAnimationEnd"),As(Pi,"onAnimationIteration"),As(cn,"onAnimationStart"),As("dblclick","onDoubleClick"),As("focusin","onFocus"),As("focusout","onBlur"),As(yi,"onTransitionRun"),As(ur,"onTransitionStart"),As(Va,"onTransitionCancel"),As(aa,"onTransitionEnd"),Mi("onMouseEnter",["mouseout","mouseover"]),Mi("onMouseLeave",["mouseout","mouseover"]),Mi("onPointerEnter",["pointerout","pointerover"]),Mi("onPointerLeave",["pointerout","pointerover"]),en("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),en("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),en("onBeforeInput",["compositionend","keypress","textInput","paste"]),en("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),en("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),en("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lc));function o2(t,s){s=(s&4)!==0;for(var c=0;c<t.length;c++){var g=t[c],_=g.event;g=g.listeners;e:{var w=void 0;if(s)for(var O=g.length-1;0<=O;O--){var U=g[O],Z=U.instance,fe=U.currentTarget;if(U=U.listener,Z!==w&&_.isPropagationStopped())break e;w=U,_.currentTarget=fe;try{w(_)}catch(Te){Nu(Te)}_.currentTarget=null,w=Z}else for(O=0;O<g.length;O++){if(U=g[O],Z=U.instance,fe=U.currentTarget,U=U.listener,Z!==w&&_.isPropagationStopped())break e;w=U,_.currentTarget=fe;try{w(_)}catch(Te){Nu(Te)}_.currentTarget=null,w=Z}}}}function Lt(t,s){var c=s[xs];c===void 0&&(c=s[xs]=new Set);var g=t+"__bubble";c.has(g)||(l2(s,t,2,!1),c.add(g))}function E0(t,s,c){var g=0;s&&(g|=4),l2(c,t,g,s)}var mh="_reactListening"+Math.random().toString(36).slice(2);function _0(t){if(!t[mh]){t[mh]=!0,ve.forEach(function(c){c!=="selectionchange"&&(MT.has(c)||E0(c,!1,t),E0(c,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[mh]||(s[mh]=!0,E0("selectionchange",!1,s))}}function l2(t,s,c,g){switch(k2(s)){case 2:var _=ob;break;case 8:_=lb;break;default:_=B0}c=_.bind(null,s,c,t),_=void 0,!Zs||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(_=!0),g?_!==void 0?t.addEventListener(s,c,{capture:!0,passive:_}):t.addEventListener(s,c,!0):_!==void 0?t.addEventListener(s,c,{passive:_}):t.addEventListener(s,c,!1)}function A0(t,s,c,g,_){var w=g;if((s&1)===0&&(s&2)===0&&g!==null)e:for(;;){if(g===null)return;var O=g.tag;if(O===3||O===4){var U=g.stateNode.containerInfo;if(U===_)break;if(O===4)for(O=g.return;O!==null;){var Z=O.tag;if((Z===3||Z===4)&&O.stateNode.containerInfo===_)return;O=O.return}for(;U!==null;){if(O=Sn(U),O===null)return;if(Z=O.tag,Z===5||Z===6||Z===26||Z===27){g=w=O;continue e}U=U.parentNode}}g=g.return}Ds(function(){var fe=w,Te=xr(c),Ce=[];e:{var ge=Iu.get(t);if(ge!==void 0){var _e=Cn,Xe=t;switch(t){case"keypress":if(Mr(c)===0)break e;case"keydown":case"keyup":_e=na;break;case"focusin":Xe="focus",_e=ea;break;case"focusout":Xe="blur",_e=ea;break;case"beforeblur":case"afterblur":_e=ea;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_e=Wt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_e=$s;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_e=N;break;case _r:case Pi:case cn:_e=gt;break;case aa:_e=F;break;case"scroll":case"scrollend":_e=La;break;case"wheel":_e=ye;break;case"copy":case"cut":case"paste":_e=ta;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_e=Dt;break;case"toggle":case"beforetoggle":_e=ct}var st=(s&4)!==0,yn=!st&&(t==="scroll"||t==="scrollend"),ae=st?ge!==null?ge+"Capture":null:ge;st=[];for(var ie=fe,ue;ie!==null;){var be=ie;if(ue=be.stateNode,be=be.tag,be!==5&&be!==26&&be!==27||ue===null||ae===null||(be=nt(ie,ae),be!=null&&st.push(Bc(ie,be,ue))),yn)break;ie=ie.return}0<st.length&&(ge=new _e(ge,Xe,null,c,Te),Ce.push({event:ge,listeners:st}))}}if((s&7)===0){e:{if(ge=t==="mouseover"||t==="pointerover",_e=t==="mouseout"||t==="pointerout",ge&&c!==Ks&&(Xe=c.relatedTarget||c.fromElement)&&(Sn(Xe)||Xe[Oi]))break e;if((_e||ge)&&(ge=Te.window===Te?Te:(ge=Te.ownerDocument)?ge.defaultView||ge.parentWindow:window,_e?(Xe=c.relatedTarget||c.toElement,_e=fe,Xe=Xe?Sn(Xe):null,Xe!==null&&(yn=f(Xe),st=Xe.tag,Xe!==yn||st!==5&&st!==27&&st!==6)&&(Xe=null)):(_e=null,Xe=fe),_e!==Xe)){if(st=Wt,be="onMouseLeave",ae="onMouseEnter",ie="mouse",(t==="pointerout"||t==="pointerover")&&(st=Dt,be="onPointerLeave",ae="onPointerEnter",ie="pointer"),yn=_e==null?ge:Qi(_e),ue=Xe==null?ge:Qi(Xe),ge=new st(be,ie+"leave",_e,c,Te),ge.target=yn,ge.relatedTarget=ue,be=null,Sn(Te)===fe&&(st=new st(ae,ie+"enter",Xe,c,Te),st.target=ue,st.relatedTarget=yn,be=st),yn=be,_e&&Xe)t:{for(st=LT,ae=_e,ie=Xe,ue=0,be=ae;be;be=st(be))ue++;be=0;for(var Je=ie;Je;Je=st(Je))be++;for(;0<ue-be;)ae=st(ae),ue--;for(;0<be-ue;)ie=st(ie),be--;for(;ue--;){if(ae===ie||ie!==null&&ae===ie.alternate){st=ae;break t}ae=st(ae),ie=st(ie)}st=null}else st=null;_e!==null&&c2(Ce,ge,_e,st,!1),Xe!==null&&yn!==null&&c2(Ce,yn,Xe,st,!0)}}e:{if(ge=fe?Qi(fe):window,_e=ge.nodeName&&ge.nodeName.toLowerCase(),_e==="select"||_e==="input"&&ge.type==="file")var nn=Pr;else if(cc(ge))if(vu)nn=h;else{nn=o;var Qe=r}else _e=ge.nodeName,!_e||_e.toLowerCase()!=="input"||ge.type!=="checkbox"&&ge.type!=="radio"?fe&&on(fe.elementType)&&(nn=Pr):nn=l;if(nn&&(nn=nn(t,fe))){Br(Ce,nn,c,Te);break e}Qe&&Qe(t,ge,fe),t==="focusout"&&fe&&ge.type==="number"&&fe.memoizedProps.value!=null&&H(ge,"number",ge.value)}switch(Qe=fe?Qi(fe):window,t){case"focusin":(cc(Qe)||Qe.contentEditable==="true")&&($=Qe,ee=fe,le=null);break;case"focusout":le=ee=$=null;break;case"mousedown":xe=!0;break;case"contextmenu":case"mouseup":case"dragend":xe=!1,Le(Ce,c,Te);break;case"selectionchange":if(Y)break;case"keydown":case"keyup":Le(Ce,c,Te)}var wt;if(Ht)e:{switch(t){case"compositionstart":var Vt="onCompositionStart";break e;case"compositionend":Vt="onCompositionEnd";break e;case"compositionupdate":Vt="onCompositionUpdate";break e}Vt=void 0}else Ua?ia(t,c)&&(Vt="onCompositionEnd"):t==="keydown"&&c.keyCode===229&&(Vt="onCompositionStart");Vt&&(es&&c.locale!=="ko"&&(Ua||Vt!=="onCompositionStart"?Vt==="onCompositionEnd"&&Ua&&(wt=ys()):(Or=Te,Dr="value"in Or?Or.value:Or.textContent,Ua=!0)),Qe=ph(fe,Vt),0<Qe.length&&(Vt=new Zr(Vt,t,null,c,Te),Ce.push({event:Vt,listeners:Qe}),wt?Vt.data=wt:(wt=ts(c),wt!==null&&(Vt.data=wt)))),(wt=lr?Ls(t,c):hl(t,c))&&(Vt=ph(fe,"onBeforeInput"),0<Vt.length&&(Qe=new Zr("onBeforeInput","beforeinput",null,c,Te),Ce.push({event:Qe,listeners:Vt}),Qe.data=wt)),RT(Ce,t,fe,c,Te)}o2(Ce,s)})}function Bc(t,s,c){return{instance:t,listener:s,currentTarget:c}}function ph(t,s){for(var c=s+"Capture",g=[];t!==null;){var _=t,w=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||w===null||(_=nt(t,c),_!=null&&g.unshift(Bc(t,_,w)),_=nt(t,s),_!=null&&g.push(Bc(t,_,w))),t.tag===3)return g;t=t.return}return[]}function LT(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function c2(t,s,c,g,_){for(var w=s._reactName,O=[];c!==null&&c!==g;){var U=c,Z=U.alternate,fe=U.stateNode;if(U=U.tag,Z!==null&&Z===g)break;U!==5&&U!==26&&U!==27||fe===null||(Z=fe,_?(fe=nt(c,w),fe!=null&&O.unshift(Bc(c,fe,Z))):_||(fe=nt(c,w),fe!=null&&O.push(Bc(c,fe,Z)))),c=c.return}O.length!==0&&t.push({event:s,listeners:O})}var BT=/\r\n?/g,PT=/\u0000|\uFFFD/g;function u2(t){return(typeof t=="string"?t:""+t).replace(BT,`
`).replace(PT,"")}function h2(t,s){return s=u2(s),u2(t)===s}function xn(t,s,c,g,_,w){switch(c){case"children":typeof g=="string"?s==="body"||s==="textarea"&&g===""||Ki(t,g):(typeof g=="number"||typeof g=="bigint")&&s!=="body"&&Ki(t,""+g);break;case"className":Li(t,"class",g);break;case"tabIndex":Li(t,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Li(t,c,g);break;case"style":Ke(t,g,w);break;case"data":if(s!=="object"){Li(t,"data",g);break}case"src":case"href":if(g===""&&(s!=="a"||c!=="href")){t.removeAttribute(c);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){t.removeAttribute(c);break}g=Os(""+g),t.setAttribute(c,g);break;case"action":case"formAction":if(typeof g=="function"){t.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(c==="formAction"?(s!=="input"&&xn(t,s,"name",_.name,_,null),xn(t,s,"formEncType",_.formEncType,_,null),xn(t,s,"formMethod",_.formMethod,_,null),xn(t,s,"formTarget",_.formTarget,_,null)):(xn(t,s,"encType",_.encType,_,null),xn(t,s,"method",_.method,_,null),xn(t,s,"target",_.target,_,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){t.removeAttribute(c);break}g=Os(""+g),t.setAttribute(c,g);break;case"onClick":g!=null&&(t.onclick=Zi);break;case"onScroll":g!=null&&Lt("scroll",t);break;case"onScrollEnd":g!=null&&Lt("scrollend",t);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(a(61));if(c=g.__html,c!=null){if(_.children!=null)throw Error(a(60));t.innerHTML=c}}break;case"multiple":t.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":t.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){t.removeAttribute("xlink:href");break}c=Os(""+g),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?t.setAttribute(c,""+g):t.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?t.setAttribute(c,""):t.removeAttribute(c);break;case"capture":case"download":g===!0?t.setAttribute(c,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?t.setAttribute(c,g):t.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?t.setAttribute(c,g):t.removeAttribute(c);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?t.removeAttribute(c):t.setAttribute(c,g);break;case"popover":Lt("beforetoggle",t),Lt("toggle",t),Ns(t,"popover",g);break;case"xlinkActuate":Ln(t,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Ln(t,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Ln(t,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Ln(t,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Ln(t,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Ln(t,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Ln(t,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Ln(t,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Ln(t,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Ns(t,"is",g);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Ro.get(c)||c,Ns(t,c,g))}}function w0(t,s,c,g,_,w){switch(c){case"style":Ke(t,g,w);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(a(61));if(c=g.__html,c!=null){if(_.children!=null)throw Error(a(60));t.innerHTML=c}}break;case"children":typeof g=="string"?Ki(t,g):(typeof g=="number"||typeof g=="bigint")&&Ki(t,""+g);break;case"onScroll":g!=null&&Lt("scroll",t);break;case"onScrollEnd":g!=null&&Lt("scrollend",t);break;case"onClick":g!=null&&(t.onclick=Zi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vo.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(_=c.endsWith("Capture"),s=c.slice(2,_?c.length-7:void 0),w=t[$t]||null,w=w!=null?w[c]:null,typeof w=="function"&&t.removeEventListener(s,w,_),typeof g=="function")){typeof w!="function"&&w!==null&&(c in t?t[c]=null:t.hasAttribute(c)&&t.removeAttribute(c)),t.addEventListener(s,g,_);break e}c in t?t[c]=g:g===!0?t.setAttribute(c,""):Ns(t,c,g)}}}function ji(t,s,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Lt("error",t),Lt("load",t);var g=!1,_=!1,w;for(w in c)if(c.hasOwnProperty(w)){var O=c[w];if(O!=null)switch(w){case"src":g=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:xn(t,s,w,O,c,null)}}_&&xn(t,s,"srcSet",c.srcSet,c,null),g&&xn(t,s,"src",c.src,c,null);return;case"input":Lt("invalid",t);var U=w=O=_=null,Z=null,fe=null;for(g in c)if(c.hasOwnProperty(g)){var Te=c[g];if(Te!=null)switch(g){case"name":_=Te;break;case"type":O=Te;break;case"checked":Z=Te;break;case"defaultChecked":fe=Te;break;case"value":w=Te;break;case"defaultValue":U=Te;break;case"children":case"dangerouslySetInnerHTML":if(Te!=null)throw Error(a(137,s));break;default:xn(t,s,g,Te,c,null)}}ce(t,w,U,Z,fe,O,_,!1);return;case"select":Lt("invalid",t),g=O=w=null;for(_ in c)if(c.hasOwnProperty(_)&&(U=c[_],U!=null))switch(_){case"value":w=U;break;case"defaultValue":O=U;break;case"multiple":g=U;default:xn(t,s,_,U,c,null)}s=w,c=O,t.multiple=!!g,s!=null?Ye(t,!!g,s,!1):c!=null&&Ye(t,!!g,c,!0);return;case"textarea":Lt("invalid",t),w=_=g=null;for(O in c)if(c.hasOwnProperty(O)&&(U=c[O],U!=null))switch(O){case"value":g=U;break;case"defaultValue":_=U;break;case"children":w=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(a(91));break;default:xn(t,s,O,U,c,null)}ti(t,g,_,w);return;case"option":for(Z in c)if(c.hasOwnProperty(Z)&&(g=c[Z],g!=null))switch(Z){case"selected":t.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:xn(t,s,Z,g,c,null)}return;case"dialog":Lt("beforetoggle",t),Lt("toggle",t),Lt("cancel",t),Lt("close",t);break;case"iframe":case"object":Lt("load",t);break;case"video":case"audio":for(g=0;g<Lc.length;g++)Lt(Lc[g],t);break;case"image":Lt("error",t),Lt("load",t);break;case"details":Lt("toggle",t);break;case"embed":case"source":case"link":Lt("error",t),Lt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(fe in c)if(c.hasOwnProperty(fe)&&(g=c[fe],g!=null))switch(fe){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:xn(t,s,fe,g,c,null)}return;default:if(on(s)){for(Te in c)c.hasOwnProperty(Te)&&(g=c[Te],g!==void 0&&w0(t,s,Te,g,c,void 0));return}}for(U in c)c.hasOwnProperty(U)&&(g=c[U],g!=null&&xn(t,s,U,g,c,null))}function kT(t,s,c,g){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,w=null,O=null,U=null,Z=null,fe=null,Te=null;for(_e in c){var Ce=c[_e];if(c.hasOwnProperty(_e)&&Ce!=null)switch(_e){case"checked":break;case"value":break;case"defaultValue":Z=Ce;default:g.hasOwnProperty(_e)||xn(t,s,_e,null,g,Ce)}}for(var ge in g){var _e=g[ge];if(Ce=c[ge],g.hasOwnProperty(ge)&&(_e!=null||Ce!=null))switch(ge){case"type":w=_e;break;case"name":_=_e;break;case"checked":fe=_e;break;case"defaultChecked":Te=_e;break;case"value":O=_e;break;case"defaultValue":U=_e;break;case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(a(137,s));break;default:_e!==Ce&&xn(t,s,ge,_e,g,Ce)}}jn(t,O,U,Z,fe,Te,w,_);return;case"select":_e=O=U=ge=null;for(w in c)if(Z=c[w],c.hasOwnProperty(w)&&Z!=null)switch(w){case"value":break;case"multiple":_e=Z;default:g.hasOwnProperty(w)||xn(t,s,w,null,g,Z)}for(_ in g)if(w=g[_],Z=c[_],g.hasOwnProperty(_)&&(w!=null||Z!=null))switch(_){case"value":ge=w;break;case"defaultValue":U=w;break;case"multiple":O=w;default:w!==Z&&xn(t,s,_,w,g,Z)}s=U,c=O,g=_e,ge!=null?Ye(t,!!c,ge,!1):!!g!=!!c&&(s!=null?Ye(t,!!c,s,!0):Ye(t,!!c,c?[]:"",!1));return;case"textarea":_e=ge=null;for(U in c)if(_=c[U],c.hasOwnProperty(U)&&_!=null&&!g.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:xn(t,s,U,null,g,_)}for(O in g)if(_=g[O],w=c[O],g.hasOwnProperty(O)&&(_!=null||w!=null))switch(O){case"value":ge=_;break;case"defaultValue":_e=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(a(91));break;default:_!==w&&xn(t,s,O,_,g,w)}Fn(t,ge,_e);return;case"option":for(var Xe in c)if(ge=c[Xe],c.hasOwnProperty(Xe)&&ge!=null&&!g.hasOwnProperty(Xe))switch(Xe){case"selected":t.selected=!1;break;default:xn(t,s,Xe,null,g,ge)}for(Z in g)if(ge=g[Z],_e=c[Z],g.hasOwnProperty(Z)&&ge!==_e&&(ge!=null||_e!=null))switch(Z){case"selected":t.selected=ge&&typeof ge!="function"&&typeof ge!="symbol";break;default:xn(t,s,Z,ge,g,_e)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var st in c)ge=c[st],c.hasOwnProperty(st)&&ge!=null&&!g.hasOwnProperty(st)&&xn(t,s,st,null,g,ge);for(fe in g)if(ge=g[fe],_e=c[fe],g.hasOwnProperty(fe)&&ge!==_e&&(ge!=null||_e!=null))switch(fe){case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(a(137,s));break;default:xn(t,s,fe,ge,g,_e)}return;default:if(on(s)){for(var yn in c)ge=c[yn],c.hasOwnProperty(yn)&&ge!==void 0&&!g.hasOwnProperty(yn)&&w0(t,s,yn,void 0,g,ge);for(Te in g)ge=g[Te],_e=c[Te],!g.hasOwnProperty(Te)||ge===_e||ge===void 0&&_e===void 0||w0(t,s,Te,ge,g,_e);return}}for(var ae in c)ge=c[ae],c.hasOwnProperty(ae)&&ge!=null&&!g.hasOwnProperty(ae)&&xn(t,s,ae,null,g,ge);for(Ce in g)ge=g[Ce],_e=c[Ce],!g.hasOwnProperty(Ce)||ge===_e||ge==null&&_e==null||xn(t,s,Ce,ge,g,_e)}function f2(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function UT(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,c=performance.getEntriesByType("resource"),g=0;g<c.length;g++){var _=c[g],w=_.transferSize,O=_.initiatorType,U=_.duration;if(w&&U&&f2(O)){for(O=0,U=_.responseEnd,g+=1;g<c.length;g++){var Z=c[g],fe=Z.startTime;if(fe>U)break;var Te=Z.transferSize,Ce=Z.initiatorType;Te&&f2(Ce)&&(Z=Z.responseEnd,O+=Te*(Z<U?1:(U-fe)/(Z-fe)))}if(--g,s+=8*(w+O)/(_.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var T0=null,b0=null;function xh(t){return t.nodeType===9?t:t.ownerDocument}function d2(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function g2(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function S0(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var C0=null;function VT(){var t=window.event;return t&&t.type==="popstate"?t===C0?!1:(C0=t,!0):(C0=null,!1)}var m2=typeof setTimeout=="function"?setTimeout:void 0,jT=typeof clearTimeout=="function"?clearTimeout:void 0,p2=typeof Promise=="function"?Promise:void 0,FT=typeof queueMicrotask=="function"?queueMicrotask:typeof p2<"u"?function(t){return p2.resolve(null).then(t).catch(zT)}:m2;function zT(t){setTimeout(function(){throw t})}function no(t){return t==="head"}function x2(t,s){var c=s,g=0;do{var _=c.nextSibling;if(t.removeChild(c),_&&_.nodeType===8)if(c=_.data,c==="/$"||c==="/&"){if(g===0){t.removeChild(_),kl(s);return}g--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")g++;else if(c==="html")Pc(t.ownerDocument.documentElement);else if(c==="head"){c=t.ownerDocument.head,Pc(c);for(var w=c.firstChild;w;){var O=w.nextSibling,U=w.nodeName;w[Qr]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&w.rel.toLowerCase()==="stylesheet"||c.removeChild(w),w=O}}else c==="body"&&Pc(t.ownerDocument.body);c=_}while(c);kl(s)}function y2(t,s){var c=t;t=0;do{var g=c.nextSibling;if(c.nodeType===1?s?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(s?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),g&&g.nodeType===8)if(c=g.data,c==="/$"){if(t===0)break;t--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||t++;c=g}while(c)}function v0(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var c=s;switch(s=s.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":v0(c),Di(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}t.removeChild(c)}}function HT(t,s,c,g){for(;t.nodeType===1;){var _=c;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!g&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(g){if(!t[Qr])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(w=t.getAttribute("rel"),w==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(w!==_.rel||t.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||t.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||t.getAttribute("title")!==(_.title==null?null:_.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(w=t.getAttribute("src"),(w!==(_.src==null?null:_.src)||t.getAttribute("type")!==(_.type==null?null:_.type)||t.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&w&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var w=_.name==null?null:""+_.name;if(_.type==="hidden"&&t.getAttribute("name")===w)return t}else return t;if(t=ls(t.nextSibling),t===null)break}return null}function GT(t,s,c){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!c||(t=ls(t.nextSibling),t===null))return null;return t}function E2(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=ls(t.nextSibling),t===null))return null;return t}function I0(t){return t.data==="$?"||t.data==="$~"}function N0(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function YT(t,s){var c=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||c.readyState!=="loading")s();else{var g=function(){s(),c.removeEventListener("DOMContentLoaded",g)};c.addEventListener("DOMContentLoaded",g),t._reactRetry=g}}function ls(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var R0=null;function _2(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var c=t.data;if(c==="/$"||c==="/&"){if(s===0)return ls(t.nextSibling);s--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||s++}t=t.nextSibling}return null}function A2(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var c=t.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(s===0)return t;s--}else c!=="/$"&&c!=="/&"||s++}t=t.previousSibling}return null}function w2(t,s,c){switch(s=xh(c),t){case"html":if(t=s.documentElement,!t)throw Error(a(452));return t;case"head":if(t=s.head,!t)throw Error(a(453));return t;case"body":if(t=s.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function Pc(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Di(t)}var cs=new Map,T2=new Set;function yh(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Aa=we.d;we.d={f:XT,r:qT,D:QT,C:WT,L:KT,m:ZT,X:$T,S:JT,M:eb};function XT(){var t=Aa.f(),s=ch();return t||s}function qT(t){var s=Rt(t);s!==null&&s.tag===5&&s.type==="form"?jm(s):Aa.r(t)}var Ll=typeof document>"u"?null:document;function b2(t,s,c){var g=Ll;if(g&&typeof s=="string"&&s){var _=At(s);_='link[rel="'+t+'"][href="'+_+'"]',typeof c=="string"&&(_+='[crossorigin="'+c+'"]'),T2.has(_)||(T2.add(_),t={rel:t,crossOrigin:c,href:s},g.querySelector(_)===null&&(s=g.createElement("link"),ji(s,"link",t),Mn(s),g.head.appendChild(s)))}}function QT(t){Aa.D(t),b2("dns-prefetch",t,null)}function WT(t,s){Aa.C(t,s),b2("preconnect",t,s)}function KT(t,s,c){Aa.L(t,s,c);var g=Ll;if(g&&t&&s){var _='link[rel="preload"][as="'+At(s)+'"]';s==="image"&&c&&c.imageSrcSet?(_+='[imagesrcset="'+At(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(_+='[imagesizes="'+At(c.imageSizes)+'"]')):_+='[href="'+At(t)+'"]';var w=_;switch(s){case"style":w=Bl(t);break;case"script":w=Pl(t)}cs.has(w)||(t=I({rel:"preload",href:s==="image"&&c&&c.imageSrcSet?void 0:t,as:s},c),cs.set(w,t),g.querySelector(_)!==null||s==="style"&&g.querySelector(kc(w))||s==="script"&&g.querySelector(Uc(w))||(s=g.createElement("link"),ji(s,"link",t),Mn(s),g.head.appendChild(s)))}}function ZT(t,s){Aa.m(t,s);var c=Ll;if(c&&t){var g=s&&typeof s.as=="string"?s.as:"script",_='link[rel="modulepreload"][as="'+At(g)+'"][href="'+At(t)+'"]',w=_;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Pl(t)}if(!cs.has(w)&&(t=I({rel:"modulepreload",href:t},s),cs.set(w,t),c.querySelector(_)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Uc(w)))return}g=c.createElement("link"),ji(g,"link",t),Mn(g),c.head.appendChild(g)}}}function JT(t,s,c){Aa.S(t,s,c);var g=Ll;if(g&&t){var _=xi(g).hoistableStyles,w=Bl(t);s=s||"default";var O=_.get(w);if(!O){var U={loading:0,preload:null};if(O=g.querySelector(kc(w)))U.loading=5;else{t=I({rel:"stylesheet",href:t,"data-precedence":s},c),(c=cs.get(w))&&O0(t,c);var Z=O=g.createElement("link");Mn(Z),ji(Z,"link",t),Z._p=new Promise(function(fe,Te){Z.onload=fe,Z.onerror=Te}),Z.addEventListener("load",function(){U.loading|=1}),Z.addEventListener("error",function(){U.loading|=2}),U.loading|=4,Eh(O,s,g)}O={type:"stylesheet",instance:O,count:1,state:U},_.set(w,O)}}}function $T(t,s){Aa.X(t,s);var c=Ll;if(c&&t){var g=xi(c).hoistableScripts,_=Pl(t),w=g.get(_);w||(w=c.querySelector(Uc(_)),w||(t=I({src:t,async:!0},s),(s=cs.get(_))&&D0(t,s),w=c.createElement("script"),Mn(w),ji(w,"link",t),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},g.set(_,w))}}function eb(t,s){Aa.M(t,s);var c=Ll;if(c&&t){var g=xi(c).hoistableScripts,_=Pl(t),w=g.get(_);w||(w=c.querySelector(Uc(_)),w||(t=I({src:t,async:!0,type:"module"},s),(s=cs.get(_))&&D0(t,s),w=c.createElement("script"),Mn(w),ji(w,"link",t),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},g.set(_,w))}}function S2(t,s,c,g){var _=(_=Me.current)?yh(_):null;if(!_)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(s=Bl(c.href),c=xi(_).hoistableStyles,g=c.get(s),g||(g={type:"style",instance:null,count:0,state:null},c.set(s,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){t=Bl(c.href);var w=xi(_).hoistableStyles,O=w.get(t);if(O||(_=_.ownerDocument||_,O={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(t,O),(w=_.querySelector(kc(t)))&&!w._p&&(O.instance=w,O.state.loading=5),cs.has(t)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},cs.set(t,c),w||tb(_,t,c,O.state))),s&&g===null)throw Error(a(528,""));return O}if(s&&g!==null)throw Error(a(529,""));return null;case"script":return s=c.async,c=c.src,typeof c=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Pl(c),c=xi(_).hoistableScripts,g=c.get(s),g||(g={type:"script",instance:null,count:0,state:null},c.set(s,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function Bl(t){return'href="'+At(t)+'"'}function kc(t){return'link[rel="stylesheet"]['+t+"]"}function C2(t){return I({},t,{"data-precedence":t.precedence,precedence:null})}function tb(t,s,c,g){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?g.loading=1:(s=t.createElement("link"),g.preload=s,s.addEventListener("load",function(){return g.loading|=1}),s.addEventListener("error",function(){return g.loading|=2}),ji(s,"link",c),Mn(s),t.head.appendChild(s))}function Pl(t){return'[src="'+At(t)+'"]'}function Uc(t){return"script[async]"+t}function v2(t,s,c){if(s.count++,s.instance===null)switch(s.type){case"style":var g=t.querySelector('style[data-href~="'+At(c.href)+'"]');if(g)return s.instance=g,Mn(g),g;var _=I({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return g=(t.ownerDocument||t).createElement("style"),Mn(g),ji(g,"style",_),Eh(g,c.precedence,t),s.instance=g;case"stylesheet":_=Bl(c.href);var w=t.querySelector(kc(_));if(w)return s.state.loading|=4,s.instance=w,Mn(w),w;g=C2(c),(_=cs.get(_))&&O0(g,_),w=(t.ownerDocument||t).createElement("link"),Mn(w);var O=w;return O._p=new Promise(function(U,Z){O.onload=U,O.onerror=Z}),ji(w,"link",g),s.state.loading|=4,Eh(w,c.precedence,t),s.instance=w;case"script":return w=Pl(c.src),(_=t.querySelector(Uc(w)))?(s.instance=_,Mn(_),_):(g=c,(_=cs.get(w))&&(g=I({},c),D0(g,_)),t=t.ownerDocument||t,_=t.createElement("script"),Mn(_),ji(_,"link",g),t.head.appendChild(_),s.instance=_);case"void":return null;default:throw Error(a(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(g=s.instance,s.state.loading|=4,Eh(g,c.precedence,t));return s.instance}function Eh(t,s,c){for(var g=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=g.length?g[g.length-1]:null,w=_,O=0;O<g.length;O++){var U=g[O];if(U.dataset.precedence===s)w=U;else if(w!==_)break}w?w.parentNode.insertBefore(t,w.nextSibling):(s=c.nodeType===9?c.head:c,s.insertBefore(t,s.firstChild))}function O0(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function D0(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var _h=null;function I2(t,s,c){if(_h===null){var g=new Map,_=_h=new Map;_.set(c,g)}else _=_h,g=_.get(c),g||(g=new Map,_.set(c,g));if(g.has(t))return g;for(g.set(t,null),c=c.getElementsByTagName(t),_=0;_<c.length;_++){var w=c[_];if(!(w[Qr]||w[Dn]||t==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var O=w.getAttribute(s)||"";O=t+O;var U=g.get(O);U?U.push(w):g.set(O,[w])}}return g}function N2(t,s,c){t=t.ownerDocument||t,t.head.insertBefore(c,s==="title"?t.querySelector("head > title"):null)}function nb(t,s,c){if(c===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function R2(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function ib(t,s,c,g){if(c.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var _=Bl(g.href),w=s.querySelector(kc(_));if(w){s=w._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=Ah.bind(t),s.then(t,t)),c.state.loading|=4,c.instance=w,Mn(w);return}w=s.ownerDocument||s,g=C2(g),(_=cs.get(_))&&O0(g,_),w=w.createElement("link"),Mn(w);var O=w;O._p=new Promise(function(U,Z){O.onload=U,O.onerror=Z}),ji(w,"link",g),c.instance=w}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(c,s),(s=c.state.preload)&&(c.state.loading&3)===0&&(t.count++,c=Ah.bind(t),s.addEventListener("load",c),s.addEventListener("error",c))}}var M0=0;function rb(t,s){return t.stylesheets&&t.count===0&&Th(t,t.stylesheets),0<t.count||0<t.imgCount?function(c){var g=setTimeout(function(){if(t.stylesheets&&Th(t,t.stylesheets),t.unsuspend){var w=t.unsuspend;t.unsuspend=null,w()}},6e4+s);0<t.imgBytes&&M0===0&&(M0=62500*UT());var _=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Th(t,t.stylesheets),t.unsuspend)){var w=t.unsuspend;t.unsuspend=null,w()}},(t.imgBytes>M0?50:800)+s);return t.unsuspend=c,function(){t.unsuspend=null,clearTimeout(g),clearTimeout(_)}}:null}function Ah(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Th(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var wh=null;function Th(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,wh=new Map,s.forEach(sb,t),wh=null,Ah.call(t))}function sb(t,s){if(!(s.state.loading&4)){var c=wh.get(t);if(c)var g=c.get(null);else{c=new Map,wh.set(t,c);for(var _=t.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<_.length;w++){var O=_[w];(O.nodeName==="LINK"||O.getAttribute("media")!=="not all")&&(c.set(O.dataset.precedence,O),g=O)}g&&c.set(null,g)}_=s.instance,O=_.getAttribute("data-precedence"),w=c.get(O)||g,w===g&&c.set(null,_),c.set(O,_),this.count++,g=Ah.bind(this),_.addEventListener("load",g),_.addEventListener("error",g),w?w.parentNode.insertBefore(_,w.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(_,t.firstChild)),s.state.loading|=4}}var Vc={$$typeof:K,Provider:null,Consumer:null,_currentValue:Ge,_currentValue2:Ge,_threadCount:0};function ab(t,s,c,g,_,w,O,U,Z){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xn(0),this.hiddenUpdates=Xn(null),this.identifierPrefix=g,this.onUncaughtError=_,this.onCaughtError=w,this.onRecoverableError=O,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Z,this.incompleteTransitions=new Map}function O2(t,s,c,g,_,w,O,U,Z,fe,Te,Ce){return t=new ab(t,s,c,O,Z,fe,Te,Ce,U),s=1,w===!0&&(s|=24),w=kr(3,null,null,s),t.current=w,w.stateNode=t,s=fd(),s.refCount++,t.pooledCache=s,s.refCount++,w.memoizedState={element:g,isDehydrated:c,cache:s},pd(w),t}function D2(t){return t?(t=dl,t):dl}function M2(t,s,c,g,_,w){_=D2(_),g.context===null?g.context=_:g.pendingContext=_,g=Ya(s),g.payload={element:c},w=w===void 0?null:w,w!==null&&(g.callback=w),c=Xa(t,g,s),c!==null&&(Sr(c,t,s),xc(c,t,s))}function L2(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var c=t.retryLane;t.retryLane=c!==0&&c<s?c:s}}function L0(t,s){L2(t,s),(t=t.alternate)&&L2(t,s)}function B2(t){if(t.tag===13||t.tag===31){var s=Po(t,67108864);s!==null&&Sr(s,t,67108864),L0(t,67108864)}}function P2(t){if(t.tag===13||t.tag===31){var s=zr();s=Qn(s);var c=Po(t,s);c!==null&&Sr(c,t,s),L0(t,s)}}var bh=!0;function ob(t,s,c,g){var _=me.T;me.T=null;var w=we.p;try{we.p=2,B0(t,s,c,g)}finally{we.p=w,me.T=_}}function lb(t,s,c,g){var _=me.T;me.T=null;var w=we.p;try{we.p=8,B0(t,s,c,g)}finally{we.p=w,me.T=_}}function B0(t,s,c,g){if(bh){var _=P0(g);if(_===null)A0(t,s,g,Sh,c),U2(t,g);else if(ub(_,t,s,c,g))g.stopPropagation();else if(U2(t,g),s&4&&-1<cb.indexOf(t)){for(;_!==null;){var w=Rt(_);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var O=re(w.pendingLanes);if(O!==0){var U=w;for(U.pendingLanes|=2,U.entangledLanes|=2;O;){var Z=1<<31-it(O);U.entanglements[1]|=Z,O&=~Z}Us(w),(an&6)===0&&(oh=hn()+500,Mc(0))}}break;case 31:case 13:U=Po(w,2),U!==null&&Sr(U,w,2),ch(),L0(w,2)}if(w=P0(g),w===null&&A0(t,s,g,Sh,c),w===_)break;_=w}_!==null&&g.stopPropagation()}else A0(t,s,g,null,c)}}function P0(t){return t=xr(t),k0(t)}var Sh=null;function k0(t){if(Sh=null,t=Sn(t),t!==null){var s=f(t);if(s===null)t=null;else{var c=s.tag;if(c===13){if(t=x(s),t!==null)return t;t=null}else if(c===31){if(t=b(s),t!==null)return t;t=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return Sh=t,null}function k2(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Rr()){case li:return 2;case vs:return 8;case pi:case ei:return 32;case Qs:return 268435456;default:return 32}default:return 32}}var U0=!1,io=null,ro=null,so=null,jc=new Map,Fc=new Map,ao=[],cb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function U2(t,s){switch(t){case"focusin":case"focusout":io=null;break;case"dragenter":case"dragleave":ro=null;break;case"mouseover":case"mouseout":so=null;break;case"pointerover":case"pointerout":jc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fc.delete(s.pointerId)}}function zc(t,s,c,g,_,w){return t===null||t.nativeEvent!==w?(t={blockedOn:s,domEventName:c,eventSystemFlags:g,nativeEvent:w,targetContainers:[_]},s!==null&&(s=Rt(s),s!==null&&B2(s)),t):(t.eventSystemFlags|=g,s=t.targetContainers,_!==null&&s.indexOf(_)===-1&&s.push(_),t)}function ub(t,s,c,g,_){switch(s){case"focusin":return io=zc(io,t,s,c,g,_),!0;case"dragenter":return ro=zc(ro,t,s,c,g,_),!0;case"mouseover":return so=zc(so,t,s,c,g,_),!0;case"pointerover":var w=_.pointerId;return jc.set(w,zc(jc.get(w)||null,t,s,c,g,_)),!0;case"gotpointercapture":return w=_.pointerId,Fc.set(w,zc(Fc.get(w)||null,t,s,c,g,_)),!0}return!1}function V2(t){var s=Sn(t.target);if(s!==null){var c=f(s);if(c!==null){if(s=c.tag,s===13){if(s=x(c),s!==null){t.blockedOn=s,je(t.priority,function(){P2(c)});return}}else if(s===31){if(s=b(c),s!==null){t.blockedOn=s,je(t.priority,function(){P2(c)});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){t.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ch(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var c=P0(t.nativeEvent);if(c===null){c=t.nativeEvent;var g=new c.constructor(c.type,c);Ks=g,c.target.dispatchEvent(g),Ks=null}else return s=Rt(c),s!==null&&B2(s),t.blockedOn=c,!1;s.shift()}return!0}function j2(t,s,c){Ch(t)&&c.delete(s)}function hb(){U0=!1,io!==null&&Ch(io)&&(io=null),ro!==null&&Ch(ro)&&(ro=null),so!==null&&Ch(so)&&(so=null),jc.forEach(j2),Fc.forEach(j2)}function vh(t,s){t.blockedOn===s&&(t.blockedOn=null,U0||(U0=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,hb)))}var Ih=null;function F2(t){Ih!==t&&(Ih=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Ih===t&&(Ih=null);for(var s=0;s<t.length;s+=3){var c=t[s],g=t[s+1],_=t[s+2];if(typeof g!="function"){if(k0(g||c)===null)continue;break}var w=Rt(c);w!==null&&(t.splice(s,3),s-=3,Pd(w,{pending:!0,data:_,method:c.method,action:g},g,_))}}))}function kl(t){function s(Z){return vh(Z,t)}io!==null&&vh(io,t),ro!==null&&vh(ro,t),so!==null&&vh(so,t),jc.forEach(s),Fc.forEach(s);for(var c=0;c<ao.length;c++){var g=ao[c];g.blockedOn===t&&(g.blockedOn=null)}for(;0<ao.length&&(c=ao[0],c.blockedOn===null);)V2(c),c.blockedOn===null&&ao.shift();if(c=(t.ownerDocument||t).$$reactFormReplay,c!=null)for(g=0;g<c.length;g+=3){var _=c[g],w=c[g+1],O=_[$t]||null;if(typeof w=="function")O||F2(c);else if(O){var U=null;if(w&&w.hasAttribute("formAction")){if(_=w,O=w[$t]||null)U=O.formAction;else if(k0(_)!==null)continue}else U=O.action;typeof U=="function"?c[g+1]=U:(c.splice(g,3),g-=3),F2(c)}}}function z2(){function t(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(O){return _=O})},focusReset:"manual",scroll:"manual"})}function s(){_!==null&&(_(),_=null),g||setTimeout(c,20)}function c(){if(!g&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,_=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(c,100),function(){g=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),_!==null&&(_(),_=null)}}}function V0(t){this._internalRoot=t}Nh.prototype.render=V0.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(a(409));var c=s.current,g=zr();M2(c,g,t,s,null,null)},Nh.prototype.unmount=V0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;M2(t.current,2,null,t,null,null),ch(),s[Oi]=null}};function Nh(t){this._internalRoot=t}Nh.prototype.unstable_scheduleHydration=function(t){if(t){var s=Ri();t={blockedOn:null,target:t,priority:s};for(var c=0;c<ao.length&&s!==0&&s<ao[c].priority;c++);ao.splice(c,0,t),c===0&&V2(t)}};var H2=e.version;if(H2!=="19.2.3")throw Error(a(527,H2,"19.2.3"));we.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=E(s),t=t!==null?C(t):null,t=t===null?null:t.stateNode,t};var fb={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:me,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rh.isDisabled&&Rh.supportsFiber)try{Xt=Rh.inject(fb),Oe=Rh}catch{}}return Gc.createRoot=function(t,s){if(!u(t))throw Error(a(299));var c=!1,g="",_=Km,w=Zm,O=Jm;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(g=s.identifierPrefix),s.onUncaughtError!==void 0&&(_=s.onUncaughtError),s.onCaughtError!==void 0&&(w=s.onCaughtError),s.onRecoverableError!==void 0&&(O=s.onRecoverableError)),s=O2(t,1,!1,null,null,c,g,null,_,w,O,z2),t[Oi]=s.current,_0(t),new V0(s)},Gc.hydrateRoot=function(t,s,c){if(!u(t))throw Error(a(299));var g=!1,_="",w=Km,O=Zm,U=Jm,Z=null;return c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(_=c.identifierPrefix),c.onUncaughtError!==void 0&&(w=c.onUncaughtError),c.onCaughtError!==void 0&&(O=c.onCaughtError),c.onRecoverableError!==void 0&&(U=c.onRecoverableError),c.formState!==void 0&&(Z=c.formState)),s=O2(t,1,!0,s,c??null,g,_,Z,w,O,U,z2),s.context=D2(null),c=s.current,g=zr(),g=Qn(g),_=Ya(g),_.callback=null,Xa(c,_,g),c=g,s.current.lanes=c,Ii(s,c),Us(s),t[Oi]=s.current,_0(t),new Nh(s)},Gc.version="19.2.3",Gc}var $2;function Tb(){if($2)return z0.exports;$2=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),z0.exports=wb(),z0.exports}var bb=Tb();const Sb=G1(bb);/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ex="popstate";function Cb(i={}){function e(u,f){let{pathname:x="/",search:b="",hash:T=""}=rl(u.location.hash.substring(1));return!x.startsWith("/")&&!x.startsWith(".")&&(x="/"+x),l1("",{pathname:x,search:b,hash:T},f.state&&f.state.usr||null,f.state&&f.state.key||"default")}function n(u,f){let x=u.document.querySelector("base"),b="";if(x&&x.getAttribute("href")){let T=u.location.href,E=T.indexOf("#");b=E===-1?T:T.slice(0,E)}return b+"#"+(typeof f=="string"?f:ou(f))}function a(u,f){fs(u.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(f)})`)}return Ib(e,n,a,i)}function Gn(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function fs(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function vb(){return Math.random().toString(36).substring(2,10)}function tx(i,e){return{usr:i.state,key:i.key,idx:e}}function l1(i,e,n=null,a){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?rl(e):e,state:n,key:e&&e.key||a||vb()}}function ou({pathname:i="/",search:e="",hash:n=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function rl(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substring(n),i=i.substring(0,n));let a=i.indexOf("?");a>=0&&(e.search=i.substring(a),i=i.substring(0,a)),i&&(e.pathname=i)}return e}function Ib(i,e,n,a={}){let{window:u=document.defaultView,v5Compat:f=!1}=a,x=u.history,b="POP",T=null,E=C();E==null&&(E=0,x.replaceState({...x.state,idx:E},""));function C(){return(x.state||{idx:null}).idx}function I(){b="POP";let z=C(),de=z==null?null:z-E;E=z,T&&T({action:b,location:Q.location,delta:de})}function M(z,de){b="PUSH";let Ee=l1(Q.location,z,de);n&&n(Ee,z),E=C()+1;let K=tx(Ee,E),Se=Q.createHref(Ee);try{x.pushState(K,"",Se)}catch(Ve){if(Ve instanceof DOMException&&Ve.name==="DataCloneError")throw Ve;u.location.assign(Se)}f&&T&&T({action:b,location:Q.location,delta:1})}function k(z,de){b="REPLACE";let Ee=l1(Q.location,z,de);n&&n(Ee,z),E=C();let K=tx(Ee,E),Se=Q.createHref(Ee);x.replaceState(K,"",Se),f&&T&&T({action:b,location:Q.location,delta:0})}function q(z){return Nb(z)}let Q={get action(){return b},get location(){return i(u,x)},listen(z){if(T)throw new Error("A history only accepts one active listener");return u.addEventListener(ex,I),T=z,()=>{u.removeEventListener(ex,I),T=null}},createHref(z){return e(u,z)},createURL:q,encodeLocation(z){let de=q(z);return{pathname:de.pathname,search:de.search,hash:de.hash}},push:M,replace:k,go(z){return x.go(z)}};return Q}function Nb(i,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Gn(n,"No window.location.(origin|href) available to create URL");let a=typeof i=="string"?i:ou(i);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=n+a),new URL(a,n)}function QE(i,e,n="/"){return Rb(i,e,n,!1)}function Rb(i,e,n,a){let u=typeof e=="string"?rl(e):e,f=Sa(u.pathname||"/",n);if(f==null)return null;let x=WE(i);Ob(x);let b=null;for(let T=0;b==null&&T<x.length;++T){let E=zb(f);b=jb(x[T],E,a)}return b}function WE(i,e=[],n=[],a="",u=!1){let f=(x,b,T=u,E)=>{let C={relativePath:E===void 0?x.path||"":E,caseSensitive:x.caseSensitive===!0,childrenIndex:b,route:x};if(C.relativePath.startsWith("/")){if(!C.relativePath.startsWith(a)&&T)return;Gn(C.relativePath.startsWith(a),`Absolute route path "${C.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),C.relativePath=C.relativePath.slice(a.length)}let I=Ta([a,C.relativePath]),M=n.concat(C);x.children&&x.children.length>0&&(Gn(x.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${I}".`),WE(x.children,e,M,I,T)),!(x.path==null&&!x.index)&&e.push({path:I,score:Ub(I,x.index),routesMeta:M})};return i.forEach((x,b)=>{var T;if(x.path===""||!((T=x.path)!=null&&T.includes("?")))f(x,b);else for(let E of KE(x.path))f(x,b,!0,E)}),e}function KE(i){let e=i.split("/");if(e.length===0)return[];let[n,...a]=e,u=n.endsWith("?"),f=n.replace(/\?$/,"");if(a.length===0)return u?[f,""]:[f];let x=KE(a.join("/")),b=[];return b.push(...x.map(T=>T===""?f:[f,T].join("/"))),u&&b.push(...x),b.map(T=>i.startsWith("/")&&T===""?"/":T)}function Ob(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:Vb(e.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}var Db=/^:[\w-]+$/,Mb=3,Lb=2,Bb=1,Pb=10,kb=-2,nx=i=>i==="*";function Ub(i,e){let n=i.split("/"),a=n.length;return n.some(nx)&&(a+=kb),e&&(a+=Lb),n.filter(u=>!nx(u)).reduce((u,f)=>u+(Db.test(f)?Mb:f===""?Bb:Pb),a)}function Vb(i,e){return i.length===e.length&&i.slice(0,-1).every((a,u)=>a===e[u])?i[i.length-1]-e[e.length-1]:0}function jb(i,e,n=!1){let{routesMeta:a}=i,u={},f="/",x=[];for(let b=0;b<a.length;++b){let T=a[b],E=b===a.length-1,C=f==="/"?e:e.slice(f.length)||"/",I=$h({path:T.relativePath,caseSensitive:T.caseSensitive,end:E},C),M=T.route;if(!I&&E&&n&&!a[a.length-1].route.index&&(I=$h({path:T.relativePath,caseSensitive:T.caseSensitive,end:!1},C)),!I)return null;Object.assign(u,I.params),x.push({params:u,pathname:Ta([f,I.pathname]),pathnameBase:Xb(Ta([f,I.pathnameBase])),route:M}),I.pathnameBase!=="/"&&(f=Ta([f,I.pathnameBase]))}return x}function $h(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,a]=Fb(i.path,i.caseSensitive,i.end),u=e.match(n);if(!u)return null;let f=u[0],x=f.replace(/(.)\/+$/,"$1"),b=u.slice(1);return{params:a.reduce((E,{paramName:C,isOptional:I},M)=>{if(C==="*"){let q=b[M]||"";x=f.slice(0,f.length-q.length).replace(/(.)\/+$/,"$1")}const k=b[M];return I&&!k?E[C]=void 0:E[C]=(k||"").replace(/%2F/g,"/"),E},{}),pathname:f,pathnameBase:x,pattern:i}}function Fb(i,e=!1,n=!0){fs(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let a=[],u="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(x,b,T)=>(a.push({paramName:b,isOptional:T!=null}),T?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(a.push({paramName:"*"}),u+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?u+="\\/*$":i!==""&&i!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,e?void 0:"i"),a]}function zb(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return fs(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function Sa(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,a=i.charAt(n);return a&&a!=="/"?null:i.slice(n)||"/"}var ZE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Hb=i=>ZE.test(i);function Gb(i,e="/"){let{pathname:n,search:a="",hash:u=""}=typeof i=="string"?rl(i):i,f;if(n)if(Hb(n))f=n;else{if(n.includes("//")){let x=n;n=n.replace(/\/\/+/g,"/"),fs(!1,`Pathnames cannot have embedded double slashes - normalizing ${x} -> ${n}`)}n.startsWith("/")?f=ix(n.substring(1),"/"):f=ix(n,e)}else f=e;return{pathname:f,search:qb(a),hash:Qb(u)}}function ix(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(u=>{u===".."?n.length>1&&n.pop():u!=="."&&n.push(u)}),n.length>1?n.join("/"):"/"}function X0(i,e,n,a){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Yb(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function JE(i){let e=Yb(i);return e.map((n,a)=>a===e.length-1?n.pathname:n.pathnameBase)}function $E(i,e,n,a=!1){let u;typeof i=="string"?u=rl(i):(u={...i},Gn(!u.pathname||!u.pathname.includes("?"),X0("?","pathname","search",u)),Gn(!u.pathname||!u.pathname.includes("#"),X0("#","pathname","hash",u)),Gn(!u.search||!u.search.includes("#"),X0("#","search","hash",u)));let f=i===""||u.pathname==="",x=f?"/":u.pathname,b;if(x==null)b=n;else{let I=e.length-1;if(!a&&x.startsWith("..")){let M=x.split("/");for(;M[0]==="..";)M.shift(),I-=1;u.pathname=M.join("/")}b=I>=0?e[I]:"/"}let T=Gb(u,b),E=x&&x!=="/"&&x.endsWith("/"),C=(f||x===".")&&n.endsWith("/");return!T.pathname.endsWith("/")&&(E||C)&&(T.pathname+="/"),T}var Ta=i=>i.join("/").replace(/\/\/+/g,"/"),Xb=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),qb=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,Qb=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i,Wb=class{constructor(i,e,n,a=!1){this.status=i,this.statusText=e||"",this.internal=a,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function Kb(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}function Zb(i){return i.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var e_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function t_(i,e){let n=i;if(typeof n!="string"||!ZE.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let a=n,u=!1;if(e_)try{let f=new URL(window.location.href),x=n.startsWith("//")?new URL(f.protocol+n):new URL(n),b=Sa(x.pathname,e);x.origin===f.origin&&b!=null?n=b+x.search+x.hash:u=!0}catch{fs(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:a,isExternal:u,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var n_=["POST","PUT","PATCH","DELETE"];new Set(n_);var Jb=["GET",...n_];new Set(Jb);var ic=se.createContext(null);ic.displayName="DataRouter";var If=se.createContext(null);If.displayName="DataRouterState";var $b=se.createContext(!1),i_=se.createContext({isTransitioning:!1});i_.displayName="ViewTransition";var eS=se.createContext(new Map);eS.displayName="Fetchers";var tS=se.createContext(null);tS.displayName="Await";var gs=se.createContext(null);gs.displayName="Navigation";var pu=se.createContext(null);pu.displayName="Location";var Ra=se.createContext({outlet:null,matches:[],isDataRoute:!1});Ra.displayName="Route";var X1=se.createContext(null);X1.displayName="RouteError";var r_="REACT_ROUTER_ERROR",nS="REDIRECT",iS="ROUTE_ERROR_RESPONSE";function rS(i){if(i.startsWith(`${r_}:${nS}:{`))try{let e=JSON.parse(i.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function sS(i){if(i.startsWith(`${r_}:${iS}:{`))try{let e=JSON.parse(i.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new Wb(e.status,e.statusText,e.data)}catch{}}function aS(i,{relative:e}={}){Gn(xu(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:a}=se.useContext(gs),{hash:u,pathname:f,search:x}=yu(i,{relative:e}),b=f;return n!=="/"&&(b=f==="/"?n:Ta([n,f])),a.createHref({pathname:b,search:x,hash:u})}function xu(){return se.useContext(pu)!=null}function To(){return Gn(xu(),"useLocation() may be used only in the context of a <Router> component."),se.useContext(pu).location}var s_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function a_(i){se.useContext(gs).static||se.useLayoutEffect(i)}function oS(){let{isDataRoute:i}=se.useContext(Ra);return i?_S():lS()}function lS(){Gn(xu(),"useNavigate() may be used only in the context of a <Router> component.");let i=se.useContext(ic),{basename:e,navigator:n}=se.useContext(gs),{matches:a}=se.useContext(Ra),{pathname:u}=To(),f=JSON.stringify(JE(a)),x=se.useRef(!1);return a_(()=>{x.current=!0}),se.useCallback((T,E={})=>{if(fs(x.current,s_),!x.current)return;if(typeof T=="number"){n.go(T);return}let C=$E(T,JSON.parse(f),u,E.relative==="path");i==null&&e!=="/"&&(C.pathname=C.pathname==="/"?e:Ta([e,C.pathname])),(E.replace?n.replace:n.push)(C,E.state,E)},[e,n,f,u,i])}se.createContext(null);function yu(i,{relative:e}={}){let{matches:n}=se.useContext(Ra),{pathname:a}=To(),u=JSON.stringify(JE(n));return se.useMemo(()=>$E(i,JSON.parse(u),a,e==="path"),[i,u,a,e])}function cS(i,e){return o_(i,e)}function o_(i,e,n,a,u){var Ee;Gn(xu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:f}=se.useContext(gs),{matches:x}=se.useContext(Ra),b=x[x.length-1],T=b?b.params:{},E=b?b.pathname:"/",C=b?b.pathnameBase:"/",I=b&&b.route;{let K=I&&I.path||"";c_(E,!I||K.endsWith("*")||K.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${E}" (under <Route path="${K}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${K}"> to <Route path="${K==="/"?"*":`${K}/*`}">.`)}let M=To(),k;if(e){let K=typeof e=="string"?rl(e):e;Gn(C==="/"||((Ee=K.pathname)==null?void 0:Ee.startsWith(C)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${C}" but pathname "${K.pathname}" was given in the \`location\` prop.`),k=K}else k=M;let q=k.pathname||"/",Q=q;if(C!=="/"){let K=C.replace(/^\//,"").split("/");Q="/"+q.replace(/^\//,"").split("/").slice(K.length).join("/")}let z=QE(i,{pathname:Q});fs(I||z!=null,`No routes matched location "${k.pathname}${k.search}${k.hash}" `),fs(z==null||z[z.length-1].route.element!==void 0||z[z.length-1].route.Component!==void 0||z[z.length-1].route.lazy!==void 0,`Matched leaf route at location "${k.pathname}${k.search}${k.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let de=gS(z&&z.map(K=>Object.assign({},K,{params:Object.assign({},T,K.params),pathname:Ta([C,f.encodeLocation?f.encodeLocation(K.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:K.pathname]),pathnameBase:K.pathnameBase==="/"?C:Ta([C,f.encodeLocation?f.encodeLocation(K.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:K.pathnameBase])})),x,n,a,u);return e&&de?se.createElement(pu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...k},navigationType:"POP"}},de):de}function uS(){let i=ES(),e=Kb(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,a="rgba(200,200,200, 0.5)",u={padding:"0.5rem",backgroundColor:a},f={padding:"2px 4px",backgroundColor:a},x=null;return console.error("Error handled by React Router default ErrorBoundary:",i),x=se.createElement(se.Fragment,null,se.createElement("p",null," Hey developer "),se.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",se.createElement("code",{style:f},"ErrorBoundary")," or"," ",se.createElement("code",{style:f},"errorElement")," prop on your route.")),se.createElement(se.Fragment,null,se.createElement("h2",null,"Unexpected Application Error!"),se.createElement("h3",{style:{fontStyle:"italic"}},e),n?se.createElement("pre",{style:u},n):null,x)}var hS=se.createElement(uS,null),l_=class extends se.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){this.props.onError?this.props.onError(i,e):console.error("React Router caught the following error during render",i)}render(){let i=this.state.error;if(this.context&&typeof i=="object"&&i&&"digest"in i&&typeof i.digest=="string"){const n=sS(i.digest);n&&(i=n)}let e=i!==void 0?se.createElement(Ra.Provider,{value:this.props.routeContext},se.createElement(X1.Provider,{value:i,children:this.props.component})):this.props.children;return this.context?se.createElement(fS,{error:i},e):e}};l_.contextType=$b;var q0=new WeakMap;function fS({children:i,error:e}){let{basename:n}=se.useContext(gs);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let a=rS(e.digest);if(a){let u=q0.get(e);if(u)throw u;let f=t_(a.location,n);if(e_&&!q0.get(e))if(f.isExternal||a.reloadDocument)window.location.href=f.absoluteURL||f.to;else{const x=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(f.to,{replace:a.replace}));throw q0.set(e,x),x}return se.createElement("meta",{httpEquiv:"refresh",content:`0;url=${f.absoluteURL||f.to}`})}}return i}function dS({routeContext:i,match:e,children:n}){let a=se.useContext(ic);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),se.createElement(Ra.Provider,{value:i},n)}function gS(i,e=[],n=null,a=null,u=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let f=i,x=n==null?void 0:n.errors;if(x!=null){let C=f.findIndex(I=>I.route.id&&(x==null?void 0:x[I.route.id])!==void 0);Gn(C>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(x).join(",")}`),f=f.slice(0,Math.min(f.length,C+1))}let b=!1,T=-1;if(n)for(let C=0;C<f.length;C++){let I=f[C];if((I.route.HydrateFallback||I.route.hydrateFallbackElement)&&(T=C),I.route.id){let{loaderData:M,errors:k}=n,q=I.route.loader&&!M.hasOwnProperty(I.route.id)&&(!k||k[I.route.id]===void 0);if(I.route.lazy||q){b=!0,T>=0?f=f.slice(0,T+1):f=[f[0]];break}}}let E=n&&a?(C,I)=>{var M,k;a(C,{location:n.location,params:((k=(M=n.matches)==null?void 0:M[0])==null?void 0:k.params)??{},unstable_pattern:Zb(n.matches),errorInfo:I})}:void 0;return f.reduceRight((C,I,M)=>{let k,q=!1,Q=null,z=null;n&&(k=x&&I.route.id?x[I.route.id]:void 0,Q=I.route.errorElement||hS,b&&(T<0&&M===0?(c_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),q=!0,z=null):T===M&&(q=!0,z=I.route.hydrateFallbackElement||null)));let de=e.concat(f.slice(0,M+1)),Ee=()=>{let K;return k?K=Q:q?K=z:I.route.Component?K=se.createElement(I.route.Component,null):I.route.element?K=I.route.element:K=C,se.createElement(dS,{match:I,routeContext:{outlet:C,matches:de,isDataRoute:n!=null},children:K})};return n&&(I.route.ErrorBoundary||I.route.errorElement||M===0)?se.createElement(l_,{location:n.location,revalidation:n.revalidation,component:Q,error:k,children:Ee(),routeContext:{outlet:null,matches:de,isDataRoute:!0},onError:E}):Ee()},null)}function q1(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mS(i){let e=se.useContext(ic);return Gn(e,q1(i)),e}function pS(i){let e=se.useContext(If);return Gn(e,q1(i)),e}function xS(i){let e=se.useContext(Ra);return Gn(e,q1(i)),e}function Q1(i){let e=xS(i),n=e.matches[e.matches.length-1];return Gn(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function yS(){return Q1("useRouteId")}function ES(){var a;let i=se.useContext(X1),e=pS("useRouteError"),n=Q1("useRouteError");return i!==void 0?i:(a=e.errors)==null?void 0:a[n]}function _S(){let{router:i}=mS("useNavigate"),e=Q1("useNavigate"),n=se.useRef(!1);return a_(()=>{n.current=!0}),se.useCallback(async(u,f={})=>{fs(n.current,s_),n.current&&(typeof u=="number"?await i.navigate(u):await i.navigate(u,{fromRouteId:e,...f}))},[i,e])}var rx={};function c_(i,e,n){!e&&!rx[i]&&(rx[i]=!0,fs(!1,n))}se.memo(AS);function AS({routes:i,future:e,state:n,onError:a}){return o_(i,void 0,n,a,e)}function Ul(i){Gn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function wS({basename:i="/",children:e=null,location:n,navigationType:a="POP",navigator:u,static:f=!1,unstable_useTransitions:x}){Gn(!xu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let b=i.replace(/^\/*/,"/"),T=se.useMemo(()=>({basename:b,navigator:u,static:f,unstable_useTransitions:x,future:{}}),[b,u,f,x]);typeof n=="string"&&(n=rl(n));let{pathname:E="/",search:C="",hash:I="",state:M=null,key:k="default"}=n,q=se.useMemo(()=>{let Q=Sa(E,b);return Q==null?null:{location:{pathname:Q,search:C,hash:I,state:M,key:k},navigationType:a}},[b,E,C,I,M,k,a]);return fs(q!=null,`<Router basename="${b}"> is not able to match the URL "${E}${C}${I}" because it does not start with the basename, so the <Router> won't render anything.`),q==null?null:se.createElement(gs.Provider,{value:T},se.createElement(pu.Provider,{children:e,value:q}))}function TS({children:i,location:e}){return cS(c1(i),e)}function c1(i,e=[]){let n=[];return se.Children.forEach(i,(a,u)=>{if(!se.isValidElement(a))return;let f=[...e,u];if(a.type===se.Fragment){n.push.apply(n,c1(a.props.children,f));return}Gn(a.type===Ul,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Gn(!a.props.index||!a.props.children,"An index route cannot have child routes.");let x={id:a.props.id||f.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,middleware:a.props.middleware,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(x.children=c1(a.props.children,f)),n.push(x)}),n}var Hh="get",Gh="application/x-www-form-urlencoded";function Nf(i){return typeof HTMLElement<"u"&&i instanceof HTMLElement}function bS(i){return Nf(i)&&i.tagName.toLowerCase()==="button"}function SS(i){return Nf(i)&&i.tagName.toLowerCase()==="form"}function CS(i){return Nf(i)&&i.tagName.toLowerCase()==="input"}function vS(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function IS(i,e){return i.button===0&&(!e||e==="_self")&&!vS(i)}var Dh=null;function NS(){if(Dh===null)try{new FormData(document.createElement("form"),0),Dh=!1}catch{Dh=!0}return Dh}var RS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Q0(i){return i!=null&&!RS.has(i)?(fs(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Gh}"`),null):i}function OS(i,e){let n,a,u,f,x;if(SS(i)){let b=i.getAttribute("action");a=b?Sa(b,e):null,n=i.getAttribute("method")||Hh,u=Q0(i.getAttribute("enctype"))||Gh,f=new FormData(i)}else if(bS(i)||CS(i)&&(i.type==="submit"||i.type==="image")){let b=i.form;if(b==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let T=i.getAttribute("formaction")||b.getAttribute("action");if(a=T?Sa(T,e):null,n=i.getAttribute("formmethod")||b.getAttribute("method")||Hh,u=Q0(i.getAttribute("formenctype"))||Q0(b.getAttribute("enctype"))||Gh,f=new FormData(b,i),!NS()){let{name:E,type:C,value:I}=i;if(C==="image"){let M=E?`${E}.`:"";f.append(`${M}x`,"0"),f.append(`${M}y`,"0")}else E&&f.append(E,I)}}else{if(Nf(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Hh,a=null,u=Gh,x=i}return f&&u==="text/plain"&&(x=f,f=void 0),{action:a,method:n.toLowerCase(),encType:u,formData:f,body:x}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function W1(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function DS(i,e,n,a){let u=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return n?u.pathname.endsWith("/")?u.pathname=`${u.pathname}_.${a}`:u.pathname=`${u.pathname}.${a}`:u.pathname==="/"?u.pathname=`_root.${a}`:e&&Sa(u.pathname,e)==="/"?u.pathname=`${e.replace(/\/$/,"")}/_root.${a}`:u.pathname=`${u.pathname.replace(/\/$/,"")}.${a}`,u}async function MS(i,e){if(i.id in e)return e[i.id];try{let n=await import(i.module);return e[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function LS(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function BS(i,e,n){let a=await Promise.all(i.map(async u=>{let f=e.routes[u.route.id];if(f){let x=await MS(f,n);return x.links?x.links():[]}return[]}));return VS(a.flat(1).filter(LS).filter(u=>u.rel==="stylesheet"||u.rel==="preload").map(u=>u.rel==="stylesheet"?{...u,rel:"prefetch",as:"style"}:{...u,rel:"prefetch"}))}function sx(i,e,n,a,u,f){let x=(T,E)=>n[E]?T.route.id!==n[E].route.id:!0,b=(T,E)=>{var C;return n[E].pathname!==T.pathname||((C=n[E].route.path)==null?void 0:C.endsWith("*"))&&n[E].params["*"]!==T.params["*"]};return f==="assets"?e.filter((T,E)=>x(T,E)||b(T,E)):f==="data"?e.filter((T,E)=>{var I;let C=a.routes[T.route.id];if(!C||!C.hasLoader)return!1;if(x(T,E)||b(T,E))return!0;if(T.route.shouldRevalidate){let M=T.route.shouldRevalidate({currentUrl:new URL(u.pathname+u.search+u.hash,window.origin),currentParams:((I=n[0])==null?void 0:I.params)||{},nextUrl:new URL(i,window.origin),nextParams:T.params,defaultShouldRevalidate:!0});if(typeof M=="boolean")return M}return!0}):[]}function PS(i,e,{includeHydrateFallback:n}={}){return kS(i.map(a=>{let u=e.routes[a.route.id];if(!u)return[];let f=[u.module];return u.clientActionModule&&(f=f.concat(u.clientActionModule)),u.clientLoaderModule&&(f=f.concat(u.clientLoaderModule)),n&&u.hydrateFallbackModule&&(f=f.concat(u.hydrateFallbackModule)),u.imports&&(f=f.concat(u.imports)),f}).flat(1))}function kS(i){return[...new Set(i)]}function US(i){let e={},n=Object.keys(i).sort();for(let a of n)e[a]=i[a];return e}function VS(i,e){let n=new Set;return new Set(e),i.reduce((a,u)=>{let f=JSON.stringify(US(u));return n.has(f)||(n.add(f),a.push({key:f,link:u})),a},[])}function u_(){let i=se.useContext(ic);return W1(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function jS(){let i=se.useContext(If);return W1(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var K1=se.createContext(void 0);K1.displayName="FrameworkContext";function h_(){let i=se.useContext(K1);return W1(i,"You must render this element inside a <HydratedRouter> element"),i}function FS(i,e){let n=se.useContext(K1),[a,u]=se.useState(!1),[f,x]=se.useState(!1),{onFocus:b,onBlur:T,onMouseEnter:E,onMouseLeave:C,onTouchStart:I}=e,M=se.useRef(null);se.useEffect(()=>{if(i==="render"&&x(!0),i==="viewport"){let Q=de=>{de.forEach(Ee=>{x(Ee.isIntersecting)})},z=new IntersectionObserver(Q,{threshold:.5});return M.current&&z.observe(M.current),()=>{z.disconnect()}}},[i]),se.useEffect(()=>{if(a){let Q=setTimeout(()=>{x(!0)},100);return()=>{clearTimeout(Q)}}},[a]);let k=()=>{u(!0)},q=()=>{u(!1),x(!1)};return n?i!=="intent"?[f,M,{}]:[f,M,{onFocus:Yc(b,k),onBlur:Yc(T,q),onMouseEnter:Yc(E,k),onMouseLeave:Yc(C,q),onTouchStart:Yc(I,k)}]:[!1,M,{}]}function Yc(i,e){return n=>{i&&i(n),n.defaultPrevented||e(n)}}function zS({page:i,...e}){let{router:n}=u_(),a=se.useMemo(()=>QE(n.routes,i,n.basename),[n.routes,i,n.basename]);return a?se.createElement(GS,{page:i,matches:a,...e}):null}function HS(i){let{manifest:e,routeModules:n}=h_(),[a,u]=se.useState([]);return se.useEffect(()=>{let f=!1;return BS(i,e,n).then(x=>{f||u(x)}),()=>{f=!0}},[i,e,n]),a}function GS({page:i,matches:e,...n}){let a=To(),{future:u,manifest:f,routeModules:x}=h_(),{basename:b}=u_(),{loaderData:T,matches:E}=jS(),C=se.useMemo(()=>sx(i,e,E,f,a,"data"),[i,e,E,f,a]),I=se.useMemo(()=>sx(i,e,E,f,a,"assets"),[i,e,E,f,a]),M=se.useMemo(()=>{if(i===a.pathname+a.search+a.hash)return[];let Q=new Set,z=!1;if(e.forEach(Ee=>{var Se;let K=f.routes[Ee.route.id];!K||!K.hasLoader||(!C.some(Ve=>Ve.route.id===Ee.route.id)&&Ee.route.id in T&&((Se=x[Ee.route.id])!=null&&Se.shouldRevalidate)||K.hasClientLoader?z=!0:Q.add(Ee.route.id))}),Q.size===0)return[];let de=DS(i,b,u.unstable_trailingSlashAwareDataRequests,"data");return z&&Q.size>0&&de.searchParams.set("_routes",e.filter(Ee=>Q.has(Ee.route.id)).map(Ee=>Ee.route.id).join(",")),[de.pathname+de.search]},[b,u.unstable_trailingSlashAwareDataRequests,T,a,f,C,e,i,x]),k=se.useMemo(()=>PS(I,f),[I,f]),q=HS(I);return se.createElement(se.Fragment,null,M.map(Q=>se.createElement("link",{key:Q,rel:"prefetch",as:"fetch",href:Q,...n})),k.map(Q=>se.createElement("link",{key:Q,rel:"modulepreload",href:Q,...n})),q.map(({key:Q,link:z})=>se.createElement("link",{key:Q,nonce:n.nonce,...z})))}function YS(...i){return e=>{i.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var XS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{XS&&(window.__reactRouterVersion="7.12.0")}catch{}function qS({basename:i,children:e,unstable_useTransitions:n,window:a}){let u=se.useRef();u.current==null&&(u.current=Cb({window:a,v5Compat:!0}));let f=u.current,[x,b]=se.useState({action:f.action,location:f.location}),T=se.useCallback(E=>{n===!1?b(E):se.startTransition(()=>b(E))},[n]);return se.useLayoutEffect(()=>f.listen(T),[f,T]),se.createElement(wS,{basename:i,children:e,location:x.location,navigationType:x.action,navigator:f,unstable_useTransitions:n})}var f_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Z1=se.forwardRef(function({onClick:e,discover:n="render",prefetch:a="none",relative:u,reloadDocument:f,replace:x,state:b,target:T,to:E,preventScrollReset:C,viewTransition:I,unstable_defaultShouldRevalidate:M,...k},q){let{basename:Q,unstable_useTransitions:z}=se.useContext(gs),de=typeof E=="string"&&f_.test(E),Ee=t_(E,Q);E=Ee.to;let K=aS(E,{relative:u}),[Se,Ve,ke]=FS(a,k),j=ZS(E,{replace:x,state:b,target:T,preventScrollReset:C,relative:u,viewTransition:I,unstable_defaultShouldRevalidate:M,unstable_useTransitions:z});function G(te){e&&e(te),te.defaultPrevented||j(te)}let V=se.createElement("a",{...k,...ke,href:Ee.absoluteURL||K,onClick:Ee.isExternal||f?e:G,ref:YS(q,Ve),target:T,"data-discover":!de&&n==="render"?"true":void 0});return Se&&!de?se.createElement(se.Fragment,null,V,se.createElement(zS,{page:K})):V});Z1.displayName="Link";var QS=se.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:a="",end:u=!1,style:f,to:x,viewTransition:b,children:T,...E},C){let I=yu(x,{relative:E.relative}),M=To(),k=se.useContext(If),{navigator:q,basename:Q}=se.useContext(gs),z=k!=null&&nC(I)&&b===!0,de=q.encodeLocation?q.encodeLocation(I).pathname:I.pathname,Ee=M.pathname,K=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;n||(Ee=Ee.toLowerCase(),K=K?K.toLowerCase():null,de=de.toLowerCase()),K&&Q&&(K=Sa(K,Q)||K);const Se=de!=="/"&&de.endsWith("/")?de.length-1:de.length;let Ve=Ee===de||!u&&Ee.startsWith(de)&&Ee.charAt(Se)==="/",ke=K!=null&&(K===de||!u&&K.startsWith(de)&&K.charAt(de.length)==="/"),j={isActive:Ve,isPending:ke,isTransitioning:z},G=Ve?e:void 0,V;typeof a=="function"?V=a(j):V=[a,Ve?"active":null,ke?"pending":null,z?"transitioning":null].filter(Boolean).join(" ");let te=typeof f=="function"?f(j):f;return se.createElement(Z1,{...E,"aria-current":G,className:V,ref:C,style:te,to:x,viewTransition:b},typeof T=="function"?T(j):T)});QS.displayName="NavLink";var WS=se.forwardRef(({discover:i="render",fetcherKey:e,navigate:n,reloadDocument:a,replace:u,state:f,method:x=Hh,action:b,onSubmit:T,relative:E,preventScrollReset:C,viewTransition:I,unstable_defaultShouldRevalidate:M,...k},q)=>{let{unstable_useTransitions:Q}=se.useContext(gs),z=eC(),de=tC(b,{relative:E}),Ee=x.toLowerCase()==="get"?"get":"post",K=typeof b=="string"&&f_.test(b),Se=Ve=>{if(T&&T(Ve),Ve.defaultPrevented)return;Ve.preventDefault();let ke=Ve.nativeEvent.submitter,j=(ke==null?void 0:ke.getAttribute("formmethod"))||x,G=()=>z(ke||Ve.currentTarget,{fetcherKey:e,method:j,navigate:n,replace:u,state:f,relative:E,preventScrollReset:C,viewTransition:I,unstable_defaultShouldRevalidate:M});Q&&n!==!1?se.startTransition(()=>G()):G()};return se.createElement("form",{ref:q,method:Ee,action:de,onSubmit:a?T:Se,...k,"data-discover":!K&&i==="render"?"true":void 0})});WS.displayName="Form";function KS(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function d_(i){let e=se.useContext(ic);return Gn(e,KS(i)),e}function ZS(i,{target:e,replace:n,state:a,preventScrollReset:u,relative:f,viewTransition:x,unstable_defaultShouldRevalidate:b,unstable_useTransitions:T}={}){let E=oS(),C=To(),I=yu(i,{relative:f});return se.useCallback(M=>{if(IS(M,e)){M.preventDefault();let k=n!==void 0?n:ou(C)===ou(I),q=()=>E(i,{replace:k,state:a,preventScrollReset:u,relative:f,viewTransition:x,unstable_defaultShouldRevalidate:b});T?se.startTransition(()=>q()):q()}},[C,E,I,n,a,e,i,u,f,x,b,T])}var JS=0,$S=()=>`__${String(++JS)}__`;function eC(){let{router:i}=d_("useSubmit"),{basename:e}=se.useContext(gs),n=yS(),a=i.fetch,u=i.navigate;return se.useCallback(async(f,x={})=>{let{action:b,method:T,encType:E,formData:C,body:I}=OS(f,e);if(x.navigate===!1){let M=x.fetcherKey||$S();await a(M,n,x.action||b,{unstable_defaultShouldRevalidate:x.unstable_defaultShouldRevalidate,preventScrollReset:x.preventScrollReset,formData:C,body:I,formMethod:x.method||T,formEncType:x.encType||E,flushSync:x.flushSync})}else await u(x.action||b,{unstable_defaultShouldRevalidate:x.unstable_defaultShouldRevalidate,preventScrollReset:x.preventScrollReset,formData:C,body:I,formMethod:x.method||T,formEncType:x.encType||E,replace:x.replace,state:x.state,fromRouteId:n,flushSync:x.flushSync,viewTransition:x.viewTransition})},[a,u,e,n])}function tC(i,{relative:e}={}){let{basename:n}=se.useContext(gs),a=se.useContext(Ra);Gn(a,"useFormAction must be used inside a RouteContext");let[u]=a.matches.slice(-1),f={...yu(i||".",{relative:e})},x=To();if(i==null){f.search=x.search;let b=new URLSearchParams(f.search),T=b.getAll("index");if(T.some(C=>C==="")){b.delete("index"),T.filter(I=>I).forEach(I=>b.append("index",I));let C=b.toString();f.search=C?`?${C}`:""}}return(!i||i===".")&&u.route.index&&(f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(f.pathname=f.pathname==="/"?n:Ta([n,f.pathname])),ou(f)}function nC(i,{relative:e}={}){let n=se.useContext(i_);Gn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=d_("useViewTransitionState"),u=yu(i,{relative:e});if(!n.isTransitioning)return!1;let f=Sa(n.currentLocation.pathname,a)||n.currentLocation.pathname,x=Sa(n.nextLocation.pathname,a)||n.nextLocation.pathname;return $h(u.pathname,x)!=null||$h(u.pathname,f)!=null}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),rC=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,a)=>a?a.toUpperCase():n.toLowerCase()),ax=i=>{const e=rC(i);return e.charAt(0).toUpperCase()+e.slice(1)},g_=(...i)=>i.filter((e,n,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===n).join(" ").trim(),sC=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var aC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=se.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:a,className:u="",children:f,iconNode:x,...b},T)=>se.createElement("svg",{ref:T,...aC,width:e,height:e,stroke:i,strokeWidth:a?Number(n)*24/Number(e):n,className:g_("lucide",u),...!f&&!sC(b)&&{"aria-hidden":"true"},...b},[...x.map(([E,C])=>se.createElement(E,C)),...Array.isArray(f)?f:[f]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=(i,e)=>{const n=se.forwardRef(({className:a,...u},f)=>se.createElement(oC,{ref:f,iconNode:e,className:g_(`lucide-${iC(ax(i))}`,`lucide-${i}`,a),...u}));return n.displayName=ax(i),n};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ox=Ct("calendar",lC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],lx=Ct("camera",cC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],qc=Ct("check",uC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],fC=Ct("chevron-right",hC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],gC=Ct("circle-alert",dC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mC=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],u1=Ct("circle-check-big",mC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],xC=Ct("circle-check",pC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yC=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ef=Ct("clock",yC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],_C=Ct("eye",EC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],wC=Ct("flame",AC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],cx=Ct("gift",TC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bC=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],SC=Ct("graduation-cap",bC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Yh=Ct("heart",CC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],tf=Ct("history",vC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IC=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],NC=Ct("layout-dashboard",IC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RC=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],OC=Ct("log-out",RC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DC=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],MC=Ct("medal",DC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LC=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],BC=Ct("menu",LC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PC=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],h1=Ct("package",PC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kC=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Qc=Ct("plus",kC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UC=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],VC=Ct("qr-code",UC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jC=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],FC=Ct("scan-line",jC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zC=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],HC=Ct("search",zC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GC=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],YC=Ct("send",GC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XC=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],nf=Ct("shield-check",XC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qC=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],QC=Ct("shopping-bag",qC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],KC=Ct("shopping-cart",WC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZC=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],f1=Ct("sparkles",ZC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],$C=Ct("star",JC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],rf=Ct("target",e3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=[["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}],["path",{d:"M7 10v12",key:"1qc93n"}]],n3=Ct("thumbs-up",t3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],W0=Ct("trash-2",i3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],s3=Ct("trending-up",r3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],o3=Ct("trophy",a3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],d1=Ct("user-plus",l3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],u3=Ct("user",c3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],f3=Ct("users",h3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Kl=Ct("x",d3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],m_=Ct("zap",g3);var hs=(i=>(i.STUDENT="STUDENT",i.ADMIN="ADMIN",i.GUEST="GUEST",i))(hs||{});const m3=()=>{};var ux={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_=function(i){const e=[];let n=0;for(let a=0;a<i.length;a++){let u=i.charCodeAt(a);u<128?e[n++]=u:u<2048?(e[n++]=u>>6|192,e[n++]=u&63|128):(u&64512)===55296&&a+1<i.length&&(i.charCodeAt(a+1)&64512)===56320?(u=65536+((u&1023)<<10)+(i.charCodeAt(++a)&1023),e[n++]=u>>18|240,e[n++]=u>>12&63|128,e[n++]=u>>6&63|128,e[n++]=u&63|128):(e[n++]=u>>12|224,e[n++]=u>>6&63|128,e[n++]=u&63|128)}return e},p3=function(i){const e=[];let n=0,a=0;for(;n<i.length;){const u=i[n++];if(u<128)e[a++]=String.fromCharCode(u);else if(u>191&&u<224){const f=i[n++];e[a++]=String.fromCharCode((u&31)<<6|f&63)}else if(u>239&&u<365){const f=i[n++],x=i[n++],b=i[n++],T=((u&7)<<18|(f&63)<<12|(x&63)<<6|b&63)-65536;e[a++]=String.fromCharCode(55296+(T>>10)),e[a++]=String.fromCharCode(56320+(T&1023))}else{const f=i[n++],x=i[n++];e[a++]=String.fromCharCode((u&15)<<12|(f&63)<<6|x&63)}}return e.join("")},x_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let u=0;u<i.length;u+=3){const f=i[u],x=u+1<i.length,b=x?i[u+1]:0,T=u+2<i.length,E=T?i[u+2]:0,C=f>>2,I=(f&3)<<4|b>>4;let M=(b&15)<<2|E>>6,k=E&63;T||(k=64,x||(M=64)),a.push(n[C],n[I],n[M],n[k])}return a.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(p_(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):p3(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let u=0;u<i.length;){const f=n[i.charAt(u++)],b=u<i.length?n[i.charAt(u)]:0;++u;const E=u<i.length?n[i.charAt(u)]:64;++u;const I=u<i.length?n[i.charAt(u)]:64;if(++u,f==null||b==null||E==null||I==null)throw new x3;const M=f<<2|b>>4;if(a.push(M),E!==64){const k=b<<4&240|E>>2;if(a.push(k),I!==64){const q=E<<6&192|I;a.push(q)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class x3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const y3=function(i){const e=p_(i);return x_.encodeByteArray(e,!0)},sf=function(i){return y3(i).replace(/\./g,"")},E3=function(i){try{return x_.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3=()=>_3().__FIREBASE_DEFAULTS__,w3=()=>{if(typeof process>"u"||typeof ux>"u")return;const i=ux.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},T3=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&E3(i[1]);return e&&JSON.parse(e)},J1=()=>{try{return m3()||A3()||w3()||T3()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},b3=i=>{var e,n;return(n=(e=J1())==null?void 0:e.emulatorHosts)==null?void 0:n[i]},S3=i=>{const e=b3(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),a]:[e.substring(0,n),a]},y_=()=>{var i;return(i=J1())==null?void 0:i.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,a)=>{n?this.reject(n):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function v3(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I3(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},a=e||"demo-project",u=i.iat||0,f=i.sub||i.user_id;if(!f)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const x={iss:`https://securetoken.google.com/${a}`,aud:a,iat:u,exp:u+3600,auth_time:u,sub:f,user_id:f,firebase:{sign_in_provider:"custom",identities:{}},...i};return[sf(JSON.stringify(n)),sf(JSON.stringify(x)),""].join(".")}const tu={};function N3(){const i={prod:[],emulator:[]};for(const e of Object.keys(tu))tu[e]?i.emulator.push(e):i.prod.push(e);return i}function R3(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let hx=!1;function O3(i,e){if(typeof window>"u"||typeof document>"u"||!$1(window.location.host)||tu[i]===e||tu[i]||hx)return;tu[i]=e;function n(M){return`__firebase__banner__${M}`}const a="__firebase__banner",f=N3().prod.length>0;function x(){const M=document.getElementById(a);M&&M.remove()}function b(M){M.style.display="flex",M.style.background="#7faaf0",M.style.position="fixed",M.style.bottom="5px",M.style.left="5px",M.style.padding=".5em",M.style.borderRadius="5px",M.style.alignItems="center"}function T(M,k){M.setAttribute("width","24"),M.setAttribute("id",k),M.setAttribute("height","24"),M.setAttribute("viewBox","0 0 24 24"),M.setAttribute("fill","none"),M.style.marginLeft="-6px"}function E(){const M=document.createElement("span");return M.style.cursor="pointer",M.style.marginLeft="16px",M.style.fontSize="24px",M.innerHTML=" &times;",M.onclick=()=>{hx=!0,x()},M}function C(M,k){M.setAttribute("id",k),M.innerText="Learn more",M.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",M.setAttribute("target","__blank"),M.style.paddingLeft="5px",M.style.textDecoration="underline"}function I(){const M=R3(a),k=n("text"),q=document.getElementById(k)||document.createElement("span"),Q=n("learnmore"),z=document.getElementById(Q)||document.createElement("a"),de=n("preprendIcon"),Ee=document.getElementById(de)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(M.created){const K=M.element;b(K),C(z,Q);const Se=E();T(Ee,de),K.append(Ee,q,z,Se),document.body.appendChild(K)}f?(q.innerText="Preview backend disconnected.",Ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,q.innerText="Preview backend running in this workspace."),q.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D3(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function M3(){var e;const i=(e=J1())==null?void 0:e.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function L3(){return!M3()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function B3(){try{return typeof indexedDB=="object"}catch{return!1}}function P3(){return new Promise((i,e)=>{try{let n=!0;const a="validate-browser-context-for-indexeddb-analytics-module",u=self.indexedDB.open(a);u.onsuccess=()=>{u.result.close(),n||self.indexedDB.deleteDatabase(a),i(!0)},u.onupgradeneeded=()=>{n=!1},u.onerror=()=>{var f;e(((f=u.error)==null?void 0:f.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k3="FirebaseError";class rc extends Error{constructor(e,n,a){super(n),this.code=e,this.customData=a,this.name=k3,Object.setPrototypeOf(this,rc.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,E_.prototype.create)}}class E_{constructor(e,n,a){this.service=e,this.serviceName=n,this.errors=a}create(e,...n){const a=n[0]||{},u=`${this.service}/${e}`,f=this.errors[e],x=f?U3(f,a):"Error",b=`${this.serviceName}: ${x} (${u}).`;return new rc(u,b,a)}}function U3(i,e){return i.replace(V3,(n,a)=>{const u=e[a];return u!=null?String(u):`<${a}?>`})}const V3=/\{\$([^}]+)}/g;function af(i,e){if(i===e)return!0;const n=Object.keys(i),a=Object.keys(e);for(const u of n){if(!a.includes(u))return!1;const f=i[u],x=e[u];if(fx(f)&&fx(x)){if(!af(f,x))return!1}else if(f!==x)return!1}for(const u of a)if(!n.includes(u))return!1;return!0}function fx(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(i){return i&&i._delegate?i._delegate:i}class lu{constructor(e,n,a){this.name=e,this.instanceFactory=n,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j3{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const a=new C3;if(this.instancesDeferred.set(n,a),this.isInitialized(n)||this.shouldAutoInitialize())try{const u=this.getOrInitializeService({instanceIdentifier:n});u&&a.resolve(u)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(u){if(a)return null;throw u}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(z3(e))try{this.getOrInitializeService({instanceIdentifier:Wo})}catch{}for(const[n,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(n);try{const f=this.getOrInitializeService({instanceIdentifier:u});a.resolve(f)}catch{}}}}clearInstance(e=Wo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Wo){return this.instances.has(e)}getOptions(e=Wo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const u=this.getOrInitializeService({instanceIdentifier:a,options:n});for(const[f,x]of this.instancesDeferred.entries()){const b=this.normalizeInstanceIdentifier(f);a===b&&x.resolve(u)}return u}onInit(e,n){const a=this.normalizeInstanceIdentifier(n),u=this.onInitCallbacks.get(a)??new Set;u.add(e),this.onInitCallbacks.set(a,u);const f=this.instances.get(a);return f&&e(f,a),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const a=this.onInitCallbacks.get(n);if(a)for(const u of a)try{u(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:F3(e),options:n}),this.instances.set(e,a),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=Wo){return this.component?this.component.multipleInstances?e:Wo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function F3(i){return i===Wo?void 0:i}function z3(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new j3(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zt;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Zt||(Zt={}));const G3={debug:Zt.DEBUG,verbose:Zt.VERBOSE,info:Zt.INFO,warn:Zt.WARN,error:Zt.ERROR,silent:Zt.SILENT},Y3=Zt.INFO,X3={[Zt.DEBUG]:"log",[Zt.VERBOSE]:"log",[Zt.INFO]:"info",[Zt.WARN]:"warn",[Zt.ERROR]:"error"},q3=(i,e,...n)=>{if(e<i.logLevel)return;const a=new Date().toISOString(),u=X3[e];if(u)console[u](`[${a}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class __{constructor(e){this.name=e,this._logLevel=Y3,this._logHandler=q3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Zt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?G3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Zt.DEBUG,...e),this._logHandler(this,Zt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Zt.VERBOSE,...e),this._logHandler(this,Zt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Zt.INFO,...e),this._logHandler(this,Zt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Zt.WARN,...e),this._logHandler(this,Zt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Zt.ERROR,...e),this._logHandler(this,Zt.ERROR,...e)}}const Q3=(i,e)=>e.some(n=>i instanceof n);let dx,gx;function W3(){return dx||(dx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function K3(){return gx||(gx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const A_=new WeakMap,g1=new WeakMap,w_=new WeakMap,K0=new WeakMap,eg=new WeakMap;function Z3(i){const e=new Promise((n,a)=>{const u=()=>{i.removeEventListener("success",f),i.removeEventListener("error",x)},f=()=>{n(uo(i.result)),u()},x=()=>{a(i.error),u()};i.addEventListener("success",f),i.addEventListener("error",x)});return e.then(n=>{n instanceof IDBCursor&&A_.set(n,i)}).catch(()=>{}),eg.set(e,i),e}function J3(i){if(g1.has(i))return;const e=new Promise((n,a)=>{const u=()=>{i.removeEventListener("complete",f),i.removeEventListener("error",x),i.removeEventListener("abort",x)},f=()=>{n(),u()},x=()=>{a(i.error||new DOMException("AbortError","AbortError")),u()};i.addEventListener("complete",f),i.addEventListener("error",x),i.addEventListener("abort",x)});g1.set(i,e)}let m1={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return g1.get(i);if(e==="objectStoreNames")return i.objectStoreNames||w_.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return uo(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function $3(i){m1=i(m1)}function ev(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const a=i.call(Z0(this),e,...n);return w_.set(a,e.sort?e.sort():[e]),uo(a)}:K3().includes(i)?function(...e){return i.apply(Z0(this),e),uo(A_.get(this))}:function(...e){return uo(i.apply(Z0(this),e))}}function tv(i){return typeof i=="function"?ev(i):(i instanceof IDBTransaction&&J3(i),Q3(i,W3())?new Proxy(i,m1):i)}function uo(i){if(i instanceof IDBRequest)return Z3(i);if(K0.has(i))return K0.get(i);const e=tv(i);return e!==i&&(K0.set(i,e),eg.set(e,i)),e}const Z0=i=>eg.get(i);function nv(i,e,{blocked:n,upgrade:a,blocking:u,terminated:f}={}){const x=indexedDB.open(i,e),b=uo(x);return a&&x.addEventListener("upgradeneeded",T=>{a(uo(x.result),T.oldVersion,T.newVersion,uo(x.transaction),T)}),n&&x.addEventListener("blocked",T=>n(T.oldVersion,T.newVersion,T)),b.then(T=>{f&&T.addEventListener("close",()=>f()),u&&T.addEventListener("versionchange",E=>u(E.oldVersion,E.newVersion,E))}).catch(()=>{}),b}const iv=["get","getKey","getAll","getAllKeys","count"],rv=["put","add","delete","clear"],J0=new Map;function mx(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(J0.get(e))return J0.get(e);const n=e.replace(/FromIndex$/,""),a=e!==n,u=rv.includes(n);if(!(n in(a?IDBIndex:IDBObjectStore).prototype)||!(u||iv.includes(n)))return;const f=async function(x,...b){const T=this.transaction(x,u?"readwrite":"readonly");let E=T.store;return a&&(E=E.index(b.shift())),(await Promise.all([E[n](...b),u&&T.done]))[0]};return J0.set(e,f),f}$3(i=>({...i,get:(e,n,a)=>mx(e,n)||i.get(e,n,a),has:(e,n)=>!!mx(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(av(n)){const a=n.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(n=>n).join(" ")}}function av(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const p1="@firebase/app",px="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca=new __("@firebase/app"),ov="@firebase/app-compat",lv="@firebase/analytics-compat",cv="@firebase/analytics",uv="@firebase/app-check-compat",hv="@firebase/app-check",fv="@firebase/auth",dv="@firebase/auth-compat",gv="@firebase/database",mv="@firebase/data-connect",pv="@firebase/database-compat",xv="@firebase/functions",yv="@firebase/functions-compat",Ev="@firebase/installations",_v="@firebase/installations-compat",Av="@firebase/messaging",wv="@firebase/messaging-compat",Tv="@firebase/performance",bv="@firebase/performance-compat",Sv="@firebase/remote-config",Cv="@firebase/remote-config-compat",vv="@firebase/storage",Iv="@firebase/storage-compat",Nv="@firebase/firestore",Rv="@firebase/ai",Ov="@firebase/firestore-compat",Dv="firebase",Mv="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1="[DEFAULT]",Lv={[p1]:"fire-core",[ov]:"fire-core-compat",[cv]:"fire-analytics",[lv]:"fire-analytics-compat",[hv]:"fire-app-check",[uv]:"fire-app-check-compat",[fv]:"fire-auth",[dv]:"fire-auth-compat",[gv]:"fire-rtdb",[mv]:"fire-data-connect",[pv]:"fire-rtdb-compat",[xv]:"fire-fn",[yv]:"fire-fn-compat",[Ev]:"fire-iid",[_v]:"fire-iid-compat",[Av]:"fire-fcm",[wv]:"fire-fcm-compat",[Tv]:"fire-perf",[bv]:"fire-perf-compat",[Sv]:"fire-rc",[Cv]:"fire-rc-compat",[vv]:"fire-gcs",[Iv]:"fire-gcs-compat",[Nv]:"fire-fst",[Ov]:"fire-fst-compat",[Rv]:"fire-vertex","fire-js":"fire-js",[Dv]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const of=new Map,Bv=new Map,y1=new Map;function xx(i,e){try{i.container.addComponent(e)}catch(n){Ca.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function lf(i){const e=i.name;if(y1.has(e))return Ca.debug(`There were multiple attempts to register component ${e}.`),!1;y1.set(e,i);for(const n of of.values())xx(n,i);for(const n of Bv.values())xx(n,i);return!0}function Pv(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function kv(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ho=new E_("app","Firebase",Uv);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e,n,a){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new lu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ho.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv=Mv;function T_(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const a={name:x1,automaticDataCollectionEnabled:!0,...e},u=a.name;if(typeof u!="string"||!u)throw ho.create("bad-app-name",{appName:String(u)});if(n||(n=y_()),!n)throw ho.create("no-options");const f=of.get(u);if(f){if(af(n,f.options)&&af(a,f.config))return f;throw ho.create("duplicate-app",{appName:u})}const x=new H3(u);for(const T of y1.values())x.addComponent(T);const b=new Vv(n,a,x);return of.set(u,b),b}function Fv(i=x1){const e=of.get(i);if(!e&&i===x1&&y_())return T_();if(!e)throw ho.create("no-app",{appName:i});return e}function ql(i,e,n){let a=Lv[i]??i;n&&(a+=`-${n}`);const u=a.match(/\s|\//),f=e.match(/\s|\//);if(u||f){const x=[`Unable to register library "${a}" with version "${e}":`];u&&x.push(`library name "${a}" contains illegal characters (whitespace or "/")`),u&&f&&x.push("and"),f&&x.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ca.warn(x.join(" "));return}lf(new lu(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv="firebase-heartbeat-database",Hv=1,cu="firebase-heartbeat-store";let $0=null;function b_(){return $0||($0=nv(zv,Hv,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(cu)}catch(n){console.warn(n)}}}}).catch(i=>{throw ho.create("idb-open",{originalErrorMessage:i.message})})),$0}async function Gv(i){try{const n=(await b_()).transaction(cu),a=await n.objectStore(cu).get(S_(i));return await n.done,a}catch(e){if(e instanceof rc)Ca.warn(e.message);else{const n=ho.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ca.warn(n.message)}}}async function yx(i,e){try{const a=(await b_()).transaction(cu,"readwrite");await a.objectStore(cu).put(e,S_(i)),await a.done}catch(n){if(n instanceof rc)Ca.warn(n.message);else{const a=ho.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ca.warn(a.message)}}}function S_(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv=1024,Xv=30;class qv{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Wv(n),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,n;try{const u=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),f=Ex();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===f||this._heartbeatsCache.heartbeats.some(x=>x.date===f))return;if(this._heartbeatsCache.heartbeats.push({date:f,agent:u}),this._heartbeatsCache.heartbeats.length>Xv){const x=Kv(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(x,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){Ca.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ex(),{heartbeatsToSend:a,unsentEntries:u}=Qv(this._heartbeatsCache.heartbeats),f=sf(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=n,u.length>0?(this._heartbeatsCache.heartbeats=u,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),f}catch(n){return Ca.warn(n),""}}}function Ex(){return new Date().toISOString().substring(0,10)}function Qv(i,e=Yv){const n=[];let a=i.slice();for(const u of i){const f=n.find(x=>x.agent===u.agent);if(f){if(f.dates.push(u.date),_x(n)>e){f.dates.pop();break}}else if(n.push({agent:u.agent,dates:[u.date]}),_x(n)>e){n.pop();break}a=a.slice(1)}return{heartbeatsToSend:n,unsentEntries:a}}class Wv{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return B3()?P3().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Gv(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return yx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return yx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function _x(i){return sf(JSON.stringify({version:2,heartbeats:i})).length}function Kv(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let a=1;a<i.length;a++)i[a].date<n&&(n=i[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(i){lf(new lu("platform-logger",e=>new sv(e),"PRIVATE")),lf(new lu("heartbeat",e=>new qv(e),"PRIVATE")),ql(p1,px,i),ql(p1,px,"esm2020"),ql("fire-js","")}Zv("");var Ax=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fo,C_;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,G){function V(){}V.prototype=G.prototype,j.F=G.prototype,j.prototype=new V,j.prototype.constructor=j,j.D=function(te,W,J){for(var X=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)X[$e-2]=arguments[$e];return G.prototype[W].apply(te,X)}}function n(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,n),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function u(j,G,V){V||(V=0);const te=Array(16);if(typeof G=="string")for(var W=0;W<16;++W)te[W]=G.charCodeAt(V++)|G.charCodeAt(V++)<<8|G.charCodeAt(V++)<<16|G.charCodeAt(V++)<<24;else for(W=0;W<16;++W)te[W]=G[V++]|G[V++]<<8|G[V++]<<16|G[V++]<<24;G=j.g[0],V=j.g[1],W=j.g[2];let J=j.g[3],X;X=G+(J^V&(W^J))+te[0]+3614090360&4294967295,G=V+(X<<7&4294967295|X>>>25),X=J+(W^G&(V^W))+te[1]+3905402710&4294967295,J=G+(X<<12&4294967295|X>>>20),X=W+(V^J&(G^V))+te[2]+606105819&4294967295,W=J+(X<<17&4294967295|X>>>15),X=V+(G^W&(J^G))+te[3]+3250441966&4294967295,V=W+(X<<22&4294967295|X>>>10),X=G+(J^V&(W^J))+te[4]+4118548399&4294967295,G=V+(X<<7&4294967295|X>>>25),X=J+(W^G&(V^W))+te[5]+1200080426&4294967295,J=G+(X<<12&4294967295|X>>>20),X=W+(V^J&(G^V))+te[6]+2821735955&4294967295,W=J+(X<<17&4294967295|X>>>15),X=V+(G^W&(J^G))+te[7]+4249261313&4294967295,V=W+(X<<22&4294967295|X>>>10),X=G+(J^V&(W^J))+te[8]+1770035416&4294967295,G=V+(X<<7&4294967295|X>>>25),X=J+(W^G&(V^W))+te[9]+2336552879&4294967295,J=G+(X<<12&4294967295|X>>>20),X=W+(V^J&(G^V))+te[10]+4294925233&4294967295,W=J+(X<<17&4294967295|X>>>15),X=V+(G^W&(J^G))+te[11]+2304563134&4294967295,V=W+(X<<22&4294967295|X>>>10),X=G+(J^V&(W^J))+te[12]+1804603682&4294967295,G=V+(X<<7&4294967295|X>>>25),X=J+(W^G&(V^W))+te[13]+4254626195&4294967295,J=G+(X<<12&4294967295|X>>>20),X=W+(V^J&(G^V))+te[14]+2792965006&4294967295,W=J+(X<<17&4294967295|X>>>15),X=V+(G^W&(J^G))+te[15]+1236535329&4294967295,V=W+(X<<22&4294967295|X>>>10),X=G+(W^J&(V^W))+te[1]+4129170786&4294967295,G=V+(X<<5&4294967295|X>>>27),X=J+(V^W&(G^V))+te[6]+3225465664&4294967295,J=G+(X<<9&4294967295|X>>>23),X=W+(G^V&(J^G))+te[11]+643717713&4294967295,W=J+(X<<14&4294967295|X>>>18),X=V+(J^G&(W^J))+te[0]+3921069994&4294967295,V=W+(X<<20&4294967295|X>>>12),X=G+(W^J&(V^W))+te[5]+3593408605&4294967295,G=V+(X<<5&4294967295|X>>>27),X=J+(V^W&(G^V))+te[10]+38016083&4294967295,J=G+(X<<9&4294967295|X>>>23),X=W+(G^V&(J^G))+te[15]+3634488961&4294967295,W=J+(X<<14&4294967295|X>>>18),X=V+(J^G&(W^J))+te[4]+3889429448&4294967295,V=W+(X<<20&4294967295|X>>>12),X=G+(W^J&(V^W))+te[9]+568446438&4294967295,G=V+(X<<5&4294967295|X>>>27),X=J+(V^W&(G^V))+te[14]+3275163606&4294967295,J=G+(X<<9&4294967295|X>>>23),X=W+(G^V&(J^G))+te[3]+4107603335&4294967295,W=J+(X<<14&4294967295|X>>>18),X=V+(J^G&(W^J))+te[8]+1163531501&4294967295,V=W+(X<<20&4294967295|X>>>12),X=G+(W^J&(V^W))+te[13]+2850285829&4294967295,G=V+(X<<5&4294967295|X>>>27),X=J+(V^W&(G^V))+te[2]+4243563512&4294967295,J=G+(X<<9&4294967295|X>>>23),X=W+(G^V&(J^G))+te[7]+1735328473&4294967295,W=J+(X<<14&4294967295|X>>>18),X=V+(J^G&(W^J))+te[12]+2368359562&4294967295,V=W+(X<<20&4294967295|X>>>12),X=G+(V^W^J)+te[5]+4294588738&4294967295,G=V+(X<<4&4294967295|X>>>28),X=J+(G^V^W)+te[8]+2272392833&4294967295,J=G+(X<<11&4294967295|X>>>21),X=W+(J^G^V)+te[11]+1839030562&4294967295,W=J+(X<<16&4294967295|X>>>16),X=V+(W^J^G)+te[14]+4259657740&4294967295,V=W+(X<<23&4294967295|X>>>9),X=G+(V^W^J)+te[1]+2763975236&4294967295,G=V+(X<<4&4294967295|X>>>28),X=J+(G^V^W)+te[4]+1272893353&4294967295,J=G+(X<<11&4294967295|X>>>21),X=W+(J^G^V)+te[7]+4139469664&4294967295,W=J+(X<<16&4294967295|X>>>16),X=V+(W^J^G)+te[10]+3200236656&4294967295,V=W+(X<<23&4294967295|X>>>9),X=G+(V^W^J)+te[13]+681279174&4294967295,G=V+(X<<4&4294967295|X>>>28),X=J+(G^V^W)+te[0]+3936430074&4294967295,J=G+(X<<11&4294967295|X>>>21),X=W+(J^G^V)+te[3]+3572445317&4294967295,W=J+(X<<16&4294967295|X>>>16),X=V+(W^J^G)+te[6]+76029189&4294967295,V=W+(X<<23&4294967295|X>>>9),X=G+(V^W^J)+te[9]+3654602809&4294967295,G=V+(X<<4&4294967295|X>>>28),X=J+(G^V^W)+te[12]+3873151461&4294967295,J=G+(X<<11&4294967295|X>>>21),X=W+(J^G^V)+te[15]+530742520&4294967295,W=J+(X<<16&4294967295|X>>>16),X=V+(W^J^G)+te[2]+3299628645&4294967295,V=W+(X<<23&4294967295|X>>>9),X=G+(W^(V|~J))+te[0]+4096336452&4294967295,G=V+(X<<6&4294967295|X>>>26),X=J+(V^(G|~W))+te[7]+1126891415&4294967295,J=G+(X<<10&4294967295|X>>>22),X=W+(G^(J|~V))+te[14]+2878612391&4294967295,W=J+(X<<15&4294967295|X>>>17),X=V+(J^(W|~G))+te[5]+4237533241&4294967295,V=W+(X<<21&4294967295|X>>>11),X=G+(W^(V|~J))+te[12]+1700485571&4294967295,G=V+(X<<6&4294967295|X>>>26),X=J+(V^(G|~W))+te[3]+2399980690&4294967295,J=G+(X<<10&4294967295|X>>>22),X=W+(G^(J|~V))+te[10]+4293915773&4294967295,W=J+(X<<15&4294967295|X>>>17),X=V+(J^(W|~G))+te[1]+2240044497&4294967295,V=W+(X<<21&4294967295|X>>>11),X=G+(W^(V|~J))+te[8]+1873313359&4294967295,G=V+(X<<6&4294967295|X>>>26),X=J+(V^(G|~W))+te[15]+4264355552&4294967295,J=G+(X<<10&4294967295|X>>>22),X=W+(G^(J|~V))+te[6]+2734768916&4294967295,W=J+(X<<15&4294967295|X>>>17),X=V+(J^(W|~G))+te[13]+1309151649&4294967295,V=W+(X<<21&4294967295|X>>>11),X=G+(W^(V|~J))+te[4]+4149444226&4294967295,G=V+(X<<6&4294967295|X>>>26),X=J+(V^(G|~W))+te[11]+3174756917&4294967295,J=G+(X<<10&4294967295|X>>>22),X=W+(G^(J|~V))+te[2]+718787259&4294967295,W=J+(X<<15&4294967295|X>>>17),X=V+(J^(W|~G))+te[9]+3951481745&4294967295,j.g[0]=j.g[0]+G&4294967295,j.g[1]=j.g[1]+(W+(X<<21&4294967295|X>>>11))&4294967295,j.g[2]=j.g[2]+W&4294967295,j.g[3]=j.g[3]+J&4294967295}a.prototype.v=function(j,G){G===void 0&&(G=j.length);const V=G-this.blockSize,te=this.C;let W=this.h,J=0;for(;J<G;){if(W==0)for(;J<=V;)u(this,j,J),J+=this.blockSize;if(typeof j=="string"){for(;J<G;)if(te[W++]=j.charCodeAt(J++),W==this.blockSize){u(this,te),W=0;break}}else for(;J<G;)if(te[W++]=j[J++],W==this.blockSize){u(this,te),W=0;break}}this.h=W,this.o+=G},a.prototype.A=function(){var j=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);j[0]=128;for(var G=1;G<j.length-8;++G)j[G]=0;G=this.o*8;for(var V=j.length-8;V<j.length;++V)j[V]=G&255,G/=256;for(this.v(j),j=Array(16),G=0,V=0;V<4;++V)for(let te=0;te<32;te+=8)j[G++]=this.g[V]>>>te&255;return j};function f(j,G){var V=b;return Object.prototype.hasOwnProperty.call(V,j)?V[j]:V[j]=G(j)}function x(j,G){this.h=G;const V=[];let te=!0;for(let W=j.length-1;W>=0;W--){const J=j[W]|0;te&&J==G||(V[W]=J,te=!1)}this.g=V}var b={};function T(j){return-128<=j&&j<128?f(j,function(G){return new x([G|0],G<0?-1:0)}):new x([j|0],j<0?-1:0)}function E(j){if(isNaN(j)||!isFinite(j))return I;if(j<0)return z(E(-j));const G=[];let V=1;for(let te=0;j>=V;te++)G[te]=j/V|0,V*=4294967296;return new x(G,0)}function C(j,G){if(j.length==0)throw Error("number format error: empty string");if(G=G||10,G<2||36<G)throw Error("radix out of range: "+G);if(j.charAt(0)=="-")return z(C(j.substring(1),G));if(j.indexOf("-")>=0)throw Error('number format error: interior "-" character');const V=E(Math.pow(G,8));let te=I;for(let J=0;J<j.length;J+=8){var W=Math.min(8,j.length-J);const X=parseInt(j.substring(J,J+W),G);W<8?(W=E(Math.pow(G,W)),te=te.j(W).add(E(X))):(te=te.j(V),te=te.add(E(X)))}return te}var I=T(0),M=T(1),k=T(16777216);i=x.prototype,i.m=function(){if(Q(this))return-z(this).m();let j=0,G=1;for(let V=0;V<this.g.length;V++){const te=this.i(V);j+=(te>=0?te:4294967296+te)*G,G*=4294967296}return j},i.toString=function(j){if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(q(this))return"0";if(Q(this))return"-"+z(this).toString(j);const G=E(Math.pow(j,6));var V=this;let te="";for(;;){const W=Se(V,G).g;V=de(V,W.j(G));let J=((V.g.length>0?V.g[0]:V.h)>>>0).toString(j);if(V=W,q(V))return J+te;for(;J.length<6;)J="0"+J;te=J+te}},i.i=function(j){return j<0?0:j<this.g.length?this.g[j]:this.h};function q(j){if(j.h!=0)return!1;for(let G=0;G<j.g.length;G++)if(j.g[G]!=0)return!1;return!0}function Q(j){return j.h==-1}i.l=function(j){return j=de(this,j),Q(j)?-1:q(j)?0:1};function z(j){const G=j.g.length,V=[];for(let te=0;te<G;te++)V[te]=~j.g[te];return new x(V,~j.h).add(M)}i.abs=function(){return Q(this)?z(this):this},i.add=function(j){const G=Math.max(this.g.length,j.g.length),V=[];let te=0;for(let W=0;W<=G;W++){let J=te+(this.i(W)&65535)+(j.i(W)&65535),X=(J>>>16)+(this.i(W)>>>16)+(j.i(W)>>>16);te=X>>>16,J&=65535,X&=65535,V[W]=X<<16|J}return new x(V,V[V.length-1]&-2147483648?-1:0)};function de(j,G){return j.add(z(G))}i.j=function(j){if(q(this)||q(j))return I;if(Q(this))return Q(j)?z(this).j(z(j)):z(z(this).j(j));if(Q(j))return z(this.j(z(j)));if(this.l(k)<0&&j.l(k)<0)return E(this.m()*j.m());const G=this.g.length+j.g.length,V=[];for(var te=0;te<2*G;te++)V[te]=0;for(te=0;te<this.g.length;te++)for(let W=0;W<j.g.length;W++){const J=this.i(te)>>>16,X=this.i(te)&65535,$e=j.i(W)>>>16,he=j.i(W)&65535;V[2*te+2*W]+=X*he,Ee(V,2*te+2*W),V[2*te+2*W+1]+=J*he,Ee(V,2*te+2*W+1),V[2*te+2*W+1]+=X*$e,Ee(V,2*te+2*W+1),V[2*te+2*W+2]+=J*$e,Ee(V,2*te+2*W+2)}for(j=0;j<G;j++)V[j]=V[2*j+1]<<16|V[2*j];for(j=G;j<2*G;j++)V[j]=0;return new x(V,0)};function Ee(j,G){for(;(j[G]&65535)!=j[G];)j[G+1]+=j[G]>>>16,j[G]&=65535,G++}function K(j,G){this.g=j,this.h=G}function Se(j,G){if(q(G))throw Error("division by zero");if(q(j))return new K(I,I);if(Q(j))return G=Se(z(j),G),new K(z(G.g),z(G.h));if(Q(G))return G=Se(j,z(G)),new K(z(G.g),G.h);if(j.g.length>30){if(Q(j)||Q(G))throw Error("slowDivide_ only works with positive integers.");for(var V=M,te=G;te.l(j)<=0;)V=Ve(V),te=Ve(te);var W=ke(V,1),J=ke(te,1);for(te=ke(te,2),V=ke(V,2);!q(te);){var X=J.add(te);X.l(j)<=0&&(W=W.add(V),J=X),te=ke(te,1),V=ke(V,1)}return G=de(j,W.j(G)),new K(W,G)}for(W=I;j.l(G)>=0;){for(V=Math.max(1,Math.floor(j.m()/G.m())),te=Math.ceil(Math.log(V)/Math.LN2),te=te<=48?1:Math.pow(2,te-48),J=E(V),X=J.j(G);Q(X)||X.l(j)>0;)V-=te,J=E(V),X=J.j(G);q(J)&&(J=M),W=W.add(J),j=de(j,X)}return new K(W,j)}i.B=function(j){return Se(this,j).h},i.and=function(j){const G=Math.max(this.g.length,j.g.length),V=[];for(let te=0;te<G;te++)V[te]=this.i(te)&j.i(te);return new x(V,this.h&j.h)},i.or=function(j){const G=Math.max(this.g.length,j.g.length),V=[];for(let te=0;te<G;te++)V[te]=this.i(te)|j.i(te);return new x(V,this.h|j.h)},i.xor=function(j){const G=Math.max(this.g.length,j.g.length),V=[];for(let te=0;te<G;te++)V[te]=this.i(te)^j.i(te);return new x(V,this.h^j.h)};function Ve(j){const G=j.g.length+1,V=[];for(let te=0;te<G;te++)V[te]=j.i(te)<<1|j.i(te-1)>>>31;return new x(V,j.h)}function ke(j,G){const V=G>>5;G%=32;const te=j.g.length-V,W=[];for(let J=0;J<te;J++)W[J]=G>0?j.i(J+V)>>>G|j.i(J+V+1)<<32-G:j.i(J+V);return new x(W,j.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,C_=a,x.prototype.add=x.prototype.add,x.prototype.multiply=x.prototype.j,x.prototype.modulo=x.prototype.B,x.prototype.compare=x.prototype.l,x.prototype.toNumber=x.prototype.m,x.prototype.toString=x.prototype.toString,x.prototype.getBits=x.prototype.i,x.fromNumber=E,x.fromString=C,fo=x}).apply(typeof Ax<"u"?Ax:typeof self<"u"?self:typeof window<"u"?window:{});var Mh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var v_,Wc,I_,Xh,E1,N_,R_,O_;(function(){var i,e=Object.defineProperty;function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mh=="object"&&Mh];for(var N=0;N<p.length;++N){var D=p[N];if(D&&D.Math==Math)return D}throw Error("Cannot find global object")}var a=n(this);function u(p,N){if(N)e:{var D=a;p=p.split(".");for(var F=0;F<p.length-1;F++){var oe=p[F];if(!(oe in D))break e;D=D[oe]}p=p[p.length-1],F=D[p],N=N(F),N!=F&&N!=null&&e(D,p,{configurable:!0,writable:!0,value:N})}}u("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),u("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),u("Object.entries",function(p){return p||function(N){var D=[],F;for(F in N)Object.prototype.hasOwnProperty.call(N,F)&&D.push([F,N[F]]);return D}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},x=this||self;function b(p){var N=typeof p;return N=="object"&&p!=null||N=="function"}function T(p,N,D){return p.call.apply(p.bind,arguments)}function E(p,N,D){return E=T,E.apply(null,arguments)}function C(p,N){var D=Array.prototype.slice.call(arguments,1);return function(){var F=D.slice();return F.push.apply(F,arguments),p.apply(this,F)}}function I(p,N){function D(){}D.prototype=N.prototype,p.Z=N.prototype,p.prototype=new D,p.prototype.constructor=p,p.Ob=function(F,oe,ye){for(var Pe=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)Pe[ct-2]=arguments[ct];return N.prototype[oe].apply(F,Pe)}}var M=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function k(p){const N=p.length;if(N>0){const D=Array(N);for(let F=0;F<N;F++)D[F]=p[F];return D}return[]}function q(p,N){for(let F=1;F<arguments.length;F++){const oe=arguments[F];var D=typeof oe;if(D=D!="object"?D:oe?Array.isArray(oe)?"array":D:"null",D=="array"||D=="object"&&typeof oe.length=="number"){D=p.length||0;const ye=oe.length||0;p.length=D+ye;for(let Pe=0;Pe<ye;Pe++)p[D+Pe]=oe[Pe]}else p.push(oe)}}class Q{constructor(N,D){this.i=N,this.j=D,this.h=0,this.g=null}get(){let N;return this.h>0?(this.h--,N=this.g,this.g=N.next,N.next=null):N=this.i(),N}}function z(p){x.setTimeout(()=>{throw p},0)}function de(){var p=j;let N=null;return p.g&&(N=p.g,p.g=p.g.next,p.g||(p.h=null),N.next=null),N}class Ee{constructor(){this.h=this.g=null}add(N,D){const F=K.get();F.set(N,D),this.h?this.h.next=F:this.g=F,this.h=F}}var K=new Q(()=>new Se,p=>p.reset());class Se{constructor(){this.next=this.g=this.h=null}set(N,D){this.h=N,this.g=D,this.next=null}reset(){this.next=this.g=this.h=null}}let Ve,ke=!1,j=new Ee,G=()=>{const p=Promise.resolve(void 0);Ve=()=>{p.then(V)}};function V(){for(var p;p=de();){try{p.h.call(p.g)}catch(D){z(D)}var N=K;N.j(p),N.h<100&&(N.h++,p.next=N.g,N.g=p)}ke=!1}function te(){this.u=this.u,this.C=this.C}te.prototype.u=!1,te.prototype.dispose=function(){this.u||(this.u=!0,this.N())},te.prototype[Symbol.dispose]=function(){this.dispose()},te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(p,N){this.type=p,this.g=this.target=N,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var J=(function(){if(!x.addEventListener||!Object.defineProperty)return!1;var p=!1,N=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const D=()=>{};x.addEventListener("test",D,N),x.removeEventListener("test",D,N)}catch{}return p})();function X(p){return/^[\s\xa0]*$/.test(p)}function $e(p,N){W.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,N)}I($e,W),$e.prototype.init=function(p,N){const D=this.type=p.type,F=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=N,N=p.relatedTarget,N||(D=="mouseover"?N=p.fromElement:D=="mouseout"&&(N=p.toElement)),this.relatedTarget=N,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&$e.Z.h.call(this)},$e.prototype.h=function(){$e.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var he="closure_listenable_"+(Math.random()*1e6|0),me=0;function we(p,N,D,F,oe){this.listener=p,this.proxy=null,this.src=N,this.type=D,this.capture=!!F,this.ha=oe,this.key=++me,this.da=this.fa=!1}function Ge(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function at(p,N,D){for(const F in p)N.call(D,p[F],F,p)}function ft(p,N){for(const D in p)N.call(void 0,p[D],D,p)}function ne(p){const N={};for(const D in p)N[D]=p[D];return N}const Ae="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Be(p,N){let D,F;for(let oe=1;oe<arguments.length;oe++){F=arguments[oe];for(D in F)p[D]=F[D];for(let ye=0;ye<Ae.length;ye++)D=Ae[ye],Object.prototype.hasOwnProperty.call(F,D)&&(p[D]=F[D])}}function Ue(p){this.src=p,this.g={},this.h=0}Ue.prototype.add=function(p,N,D,F,oe){const ye=p.toString();p=this.g[ye],p||(p=this.g[ye]=[],this.h++);const Pe=Me(p,N,F,oe);return Pe>-1?(N=p[Pe],D||(N.fa=!1)):(N=new we(N,this.src,ye,!!F,oe),N.fa=D,p.push(N)),N};function et(p,N){const D=N.type;if(D in p.g){var F=p.g[D],oe=Array.prototype.indexOf.call(F,N,void 0),ye;(ye=oe>=0)&&Array.prototype.splice.call(F,oe,1),ye&&(Ge(N),p.g[D].length==0&&(delete p.g[D],p.h--))}}function Me(p,N,D,F){for(let oe=0;oe<p.length;++oe){const ye=p[oe];if(!ye.da&&ye.listener==N&&ye.capture==!!D&&ye.ha==F)return oe}return-1}var dt="closure_lm_"+(Math.random()*1e6|0),Et={};function Yt(p,N,D,F,oe){if(Array.isArray(N)){for(let ye=0;ye<N.length;ye++)Yt(p,N[ye],D,F,oe);return null}return D=zt(D),p&&p[he]?p.J(N,D,b(F)?!!F.capture:!1,oe):Yi(p,N,D,!1,F,oe)}function Yi(p,N,D,F,oe,ye){if(!N)throw Error("Invalid event type");const Pe=b(oe)?!!oe.capture:!!oe;let ct=Xi(p);if(ct||(p[dt]=ct=new Ue(p)),D=ct.add(N,D,F,Pe,ye),D.proxy)return D;if(F=En(),D.proxy=F,F.src=p,F.listener=D,p.addEventListener)J||(oe=Pe),oe===void 0&&(oe=!1),p.addEventListener(N.toString(),F,oe);else if(p.attachEvent)p.attachEvent(ai(N.toString()),F);else if(p.addListener&&p.removeListener)p.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return D}function En(){function p(D){return N.call(p.src,p.listener,D)}const N=oi;return p}function gr(p,N,D,F,oe){if(Array.isArray(N))for(var ye=0;ye<N.length;ye++)gr(p,N[ye],D,F,oe);else F=b(F)?!!F.capture:!!F,D=zt(D),p&&p[he]?(p=p.i,ye=String(N).toString(),ye in p.g&&(N=p.g[ye],D=Me(N,D,F,oe),D>-1&&(Ge(N[D]),Array.prototype.splice.call(N,D,1),N.length==0&&(delete p.g[ye],p.h--)))):p&&(p=Xi(p))&&(N=p.g[N.toString()],p=-1,N&&(p=Me(N,D,F,oe)),(D=p>-1?N[p]:null)&&xt(D))}function xt(p){if(typeof p!="number"&&p&&!p.da){var N=p.src;if(N&&N[he])et(N.i,p);else{var D=p.type,F=p.proxy;N.removeEventListener?N.removeEventListener(D,F,p.capture):N.detachEvent?N.detachEvent(ai(D),F):N.addListener&&N.removeListener&&N.removeListener(F),(D=Xi(N))?(et(D,p),D.h==0&&(D.src=null,N[dt]=null)):Ge(p)}}}function ai(p){return p in Et?Et[p]:Et[p]="on"+p}function oi(p,N){if(p.da)p=!0;else{N=new $e(N,this);const D=p.listener,F=p.ha||p.src;p.fa&&xt(p),p=D.call(F,N)}return p}function Xi(p){return p=p[dt],p instanceof Ue?p:null}var _n="__closure_events_fn_"+(Math.random()*1e9>>>0);function zt(p){return typeof p=="function"?p:(p[_n]||(p[_n]=function(N){return p.handleEvent(N)}),p[_n])}function We(){te.call(this),this.i=new Ue(this),this.M=this,this.G=null}I(We,te),We.prototype[he]=!0,We.prototype.removeEventListener=function(p,N,D,F){gr(this,p,N,D,F)};function An(p,N){var D,F=p.G;if(F)for(D=[];F;F=F.G)D.push(F);if(p=p.M,F=N.type||N,typeof N=="string")N=new W(N,p);else if(N instanceof W)N.target=N.target||p;else{var oe=N;N=new W(F,p),Be(N,oe)}oe=!0;let ye,Pe;if(D)for(Pe=D.length-1;Pe>=0;Pe--)ye=N.g=D[Pe],oe=Fe(ye,F,!0,N)&&oe;if(ye=N.g=p,oe=Fe(ye,F,!0,N)&&oe,oe=Fe(ye,F,!1,N)&&oe,D)for(Pe=0;Pe<D.length;Pe++)ye=N.g=D[Pe],oe=Fe(ye,F,!1,N)&&oe}We.prototype.N=function(){if(We.Z.N.call(this),this.i){var p=this.i;for(const N in p.g){const D=p.g[N];for(let F=0;F<D.length;F++)Ge(D[F]);delete p.g[N],p.h--}}this.G=null},We.prototype.J=function(p,N,D,F){return this.i.add(String(p),N,!1,D,F)},We.prototype.K=function(p,N,D,F){return this.i.add(String(p),N,!0,D,F)};function Fe(p,N,D,F){if(N=p.i.g[String(N)],!N)return!0;N=N.concat();let oe=!0;for(let ye=0;ye<N.length;++ye){const Pe=N[ye];if(Pe&&!Pe.da&&Pe.capture==D){const ct=Pe.listener,kn=Pe.ha||Pe.src;Pe.fa&&et(p.i,Pe),oe=ct.call(kn,F)!==!1&&oe}}return oe&&!F.defaultPrevented}function ms(p,N){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=E(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(N)>2147483647?-1:x.setTimeout(p,N||0)}function Cs(p){p.g=ms(()=>{p.g=null,p.i&&(p.i=!1,Cs(p))},p.l);const N=p.h;p.h=null,p.m.apply(null,N)}class hn extends te{constructor(N,D){super(),this.m=N,this.l=D,this.h=null,this.i=!1,this.g=null}j(N){this.h=arguments,this.g?this.i=!0:Cs(this)}N(){super.N(),this.g&&(x.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rr(p){te.call(this),this.h=p,this.g={}}I(Rr,te);var li=[];function vs(p){at(p.g,function(N,D){this.g.hasOwnProperty(D)&&xt(N)},p),p.g={}}Rr.prototype.N=function(){Rr.Z.N.call(this),vs(this)},Rr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pi=x.JSON.stringify,ei=x.JSON.parse,Qs=class{stringify(p){return x.JSON.stringify(p,void 0)}parse(p){return x.JSON.parse(p,void 0)}};function ps(){}function Oa(){}var Xt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Oe(){W.call(this,"d")}I(Oe,W);function qt(){W.call(this,"c")}I(qt,W);var it={},fn=null;function mr(){return fn=fn||new We}it.Ia="serverreachability";function Is(p){W.call(this,it.Ia,p)}I(Is,W);function rr(p){const N=mr();An(N,new Is(N))}it.STAT_EVENT="statevent";function _t(p,N){W.call(this,it.STAT_EVENT,p),this.stat=N}I(_t,W);function sn(p){const N=mr();An(N,new _t(N,p))}it.Ja="timingevent";function re(p,N){W.call(this,it.Ja,p),this.size=N}I(re,W);function lt(p,N){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return x.setTimeout(function(){p()},N)}function Tt(){this.g=!0}Tt.prototype.ua=function(){this.g=!1};function qi(p,N,D,F,oe,ye){p.info(function(){if(p.g)if(ye){var Pe="",ct=ye.split("&");for(let Ht=0;Ht<ct.length;Ht++){var kn=ct[Ht].split("=");if(kn.length>1){const Tn=kn[0];kn=kn[1];const lr=Tn.split("_");Pe=lr.length>=2&&lr[1]=="type"?Pe+(Tn+"="+kn+"&"):Pe+(Tn+"=redacted&")}}}else Pe=null;else Pe=ye;return"XMLHTTP REQ ("+F+") [attempt "+oe+"]: "+N+`
`+D+`
`+Pe})}function Qt(p,N,D,F,oe,ye,Pe){p.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+oe+"]: "+N+`
`+D+`
`+ye+" "+Pe})}function Xn(p,N,D,F){p.info(function(){return"XMLHTTP TEXT ("+N+"): "+wi(p,D)+(F?" "+F:"")})}function Ii(p,N){p.info(function(){return"TIMEOUT: "+N})}Tt.prototype.info=function(){};function wi(p,N){if(!p.g)return N;if(!N)return null;try{const ye=JSON.parse(N);if(ye){for(p=0;p<ye.length;p++)if(Array.isArray(ye[p])){var D=ye[p];if(!(D.length<2)){var F=D[1];if(Array.isArray(F)&&!(F.length<1)){var oe=F[0];if(oe!="noop"&&oe!="stop"&&oe!="close")for(let Pe=1;Pe<F.length;Pe++)F[Pe]=""}}}}return pi(ye)}catch{return N}}var qr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},qn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ws;function Qn(){}I(Qn,ps),Qn.prototype.g=function(){return new XMLHttpRequest},Ws=new Qn;function Ni(p){return encodeURIComponent(String(p))}function Ri(p){var N=1;p=p.split(":");const D=[];for(;N>0&&p.length;)D.push(p.shift()),N--;return p.length&&D.push(p.join(":")),D}function je(p,N,D,F){this.j=p,this.i=N,this.l=D,this.S=F||1,this.V=new Rr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ti}function Ti(){this.i=null,this.g="",this.h=!1}var Dn={},$t={};function Oi(p,N,D){p.M=1,p.A=Wi(Ln(N)),p.u=D,p.R=!0,xs(p,null)}function xs(p,N){p.F=Date.now(),Qr(p),p.B=Ln(p.A);var D=p.B,F=p.S;Array.isArray(F)||(F=[String(F)]),on(D.i,"t",F),p.C=0,D=p.j.L,p.h=new Ti,p.g=ka(p.j,D?N:null,!p.u),p.P>0&&(p.O=new hn(E(p.Y,p,p.g),p.P)),N=p.V,D=p.g,F=p.ba;var oe="readystatechange";Array.isArray(oe)||(oe&&(li[0]=oe.toString()),oe=li);for(let ye=0;ye<oe.length;ye++){const Pe=Yt(D,oe[ye],F||N.handleEvent,!1,N.h||N);if(!Pe)break;N.g[Pe.key]=Pe}N=p.J?ne(p.J):{},p.u?(p.v||(p.v="POST"),N["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,N)):(p.v="GET",p.g.ea(p.B,p.v,null,N)),rr(),qi(p.i,p.v,p.B,p.l,p.S,p.u)}je.prototype.ba=function(p){p=p.target;const N=this.O;N&&yr(p)==3?N.j():this.Y(p)},je.prototype.Y=function(p){try{if(p==this.g)e:{const ct=yr(this.g),kn=this.g.ya(),Ht=this.g.ca();if(!(ct<3)&&(ct!=3||this.g&&(this.h.h||this.g.la()||zn(this.g)))){this.K||ct!=4||kn==7||(kn==8||Ht<=0?rr(3):rr(2)),Sn(this);var N=this.g.ca();this.X=N;var D=Da(this);if(this.o=N==200,Qt(this.i,this.v,this.B,this.l,this.S,ct,N),this.o){if(this.U&&!this.L){t:{if(this.g){var F,oe=this.g;if((F=oe.g?oe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!X(F)){var ye=F;break t}}ye=null}if(p=ye)Xn(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,xi(this,p);else{this.o=!1,this.m=3,sn(12),Qi(this),Rt(this);break e}}if(this.R){p=!0;let Tn;for(;!this.K&&this.C<D.length;)if(Tn=ll(this,D),Tn==$t){ct==4&&(this.m=4,sn(14),p=!1),Xn(this.i,this.l,null,"[Incomplete Response]");break}else if(Tn==Dn){this.m=4,sn(15),Xn(this.i,this.l,D,"[Invalid Chunk]"),p=!1;break}else Xn(this.i,this.l,Tn,null),xi(this,Tn);if(sr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ct!=4||D.length!=0||this.h.h||(this.m=1,sn(16),p=!1),this.o=this.o&&p,!p)Xn(this.i,this.l,D,"[Invalid Chunked Response]"),Qi(this),Rt(this);else if(D.length>0&&!this.W){this.W=!0;var Pe=this.j;Pe.g==this&&Pe.aa&&!Pe.P&&(Pe.j.info("Great, no buffering proxy detected. Bytes received: "+D.length),pe(Pe),Pe.P=!0,sn(11))}}else Xn(this.i,this.l,D,null),xi(this,D);ct==4&&Qi(this),this.o&&!this.K&&(ct==4?ta(this.j,this):(this.o=!1,Qr(this)))}else or(this.g),N==400&&D.indexOf("Unknown SID")>0?(this.m=3,sn(12)):(this.m=0,sn(13)),Qi(this),Rt(this)}}}catch{}finally{}};function Da(p){if(!sr(p))return p.g.la();const N=zn(p.g);if(N==="")return"";let D="";const F=N.length,oe=yr(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return Qi(p),Rt(p),"";p.h.i=new x.TextDecoder}for(let ye=0;ye<F;ye++)p.h.h=!0,D+=p.h.i.decode(N[ye],{stream:!(oe&&ye==F-1)});return N.length=0,p.h.g+=D,p.C=0,p.h.g}function sr(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function ll(p,N){var D=p.C,F=N.indexOf(`
`,D);return F==-1?$t:(D=Number(N.substring(D,F)),isNaN(D)?Dn:(F+=1,F+D>N.length?$t:(N=N.slice(F,F+D),p.C=F+D,N)))}je.prototype.cancel=function(){this.K=!0,Qi(this)};function Qr(p){p.T=Date.now()+p.H,Di(p,p.H)}function Di(p,N){if(p.D!=null)throw Error("WatchDog timer not null");p.D=lt(E(p.aa,p),N)}function Sn(p){p.D&&(x.clearTimeout(p.D),p.D=null)}je.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(Ii(this.i,this.B),this.M!=2&&(rr(),sn(17)),Qi(this),this.m=2,Rt(this)):Di(this,this.T-p)};function Rt(p){p.j.I==0||p.K||ta(p.j,p)}function Qi(p){Sn(p);var N=p.O;N&&typeof N.dispose=="function"&&N.dispose(),p.O=null,vs(p.V),p.g&&(N=p.g,p.g=null,N.abort(),N.dispose())}function xi(p,N){try{var D=p.j;if(D.I!=0&&(D.g==p||Mi(D.h,p))){if(!p.L&&Mi(D.h,p)&&D.I==3){try{var F=D.Ba.g.parse(N)}catch{F=null}if(Array.isArray(F)&&F.length==3){var oe=F;if(oe[0]==0){e:if(!D.v){if(D.g)if(D.g.F+3e3<p.F)Bn(D),_s(D);else break e;ea(D),sn(18)}}else D.xa=oe[1],0<D.xa-D.K&&oe[2]<37500&&D.F&&D.A==0&&!D.C&&(D.C=lt(E(D.Va,D),6e3));en(D.h)<=1&&D.ta&&(D.ta=void 0)}else Zr(D,11)}else if((p.L||D.g==p)&&Bn(D),!X(N))for(oe=D.Ba.g.parse(N),N=0;N<oe.length;N++){let Ht=oe[N];const Tn=Ht[0];if(!(Tn<=D.K))if(D.K=Tn,Ht=Ht[1],D.I==2)if(Ht[0]=="c"){D.M=Ht[1],D.ba=Ht[2];const lr=Ht[3];lr!=null&&(D.ka=lr,D.j.info("VER="+D.ka));const es=Ht[4];es!=null&&(D.za=es,D.j.info("SVER="+D.za));const Si=Ht[5];Si!=null&&typeof Si=="number"&&Si>0&&(F=1.5*Si,D.O=F,D.j.info("backChannelRequestTimeoutMs_="+F)),F=D;const cr=p.g;if(cr){const ia=cr.g?cr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ia){var ye=F.h;ye.g||ia.indexOf("spdy")==-1&&ia.indexOf("quic")==-1&&ia.indexOf("h2")==-1||(ye.j=ye.l,ye.g=new Set,ye.h&&(Io(ye,ye.h),ye.h=null))}if(F.G){const ts=cr.g?cr.g.getResponseHeader("X-HTTP-Session-Id"):null;ts&&(F.wa=ts,rt(F.J,F.G,ts))}}D.I=3,D.l&&D.l.ra(),D.aa&&(D.T=Date.now()-p.F,D.j.info("Handshake RTT: "+D.T+"ms")),F=D;var Pe=p;if(F.na=ul(F,F.L?F.ba:null,F.W),Pe.L){Pt(F.h,Pe);var ct=Pe,kn=F.O;kn&&(ct.H=kn),ct.D&&(Sn(ct),Qr(ct)),F.g=Pe}else Lr(F);D.i.length>0&&Kr(D)}else Ht[0]!="stop"&&Ht[0]!="close"||Zr(D,7);else D.I==3&&(Ht[0]=="stop"||Ht[0]=="close"?Ht[0]=="stop"?Zr(D,7):La(D):Ht[0]!="noop"&&D.l&&D.l.qa(Ht),D.A=0)}}rr(4)}catch{}}var Mn=class{constructor(p,N){this.g=p,this.map=N}};function ve(p){this.l=p||10,x.PerformanceNavigationTiming?(p=x.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(x.chrome&&x.chrome.loadTimes&&x.chrome.loadTimes()&&x.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function vo(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function en(p){return p.h?1:p.g?p.g.size:0}function Mi(p,N){return p.h?p.h==N:p.g?p.g.has(N):!1}function Io(p,N){p.g?p.g.add(N):p.h=N}function Pt(p,N){p.h&&p.h==N?p.h=null:p.g&&p.g.has(N)&&p.g.delete(N)}ve.prototype.cancel=function(){if(this.i=Ot(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function Ot(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let N=p.i;for(const D of p.g.values())N=N.concat(D.G);return N}return k(p.i)}var bt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ns(p,N){if(p){p=p.split("&");for(let D=0;D<p.length;D++){const F=p[D].indexOf("=");let oe,ye=null;F>=0?(oe=p[D].substring(0,F),ye=p[D].substring(F+1)):oe=p[D],N(oe,ye?decodeURIComponent(ye.replace(/\+/g," ")):"")}}}function Li(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let N;p instanceof Li?(this.l=p.l,vt(this,p.j),this.o=p.o,this.g=p.g,Bi(this,p.u),this.h=p.h,No(this,Ro(p.i)),this.m=p.m):p&&(N=String(p).match(bt))?(this.l=!1,vt(this,N[1]||"",!0),this.o=Wr(N[2]||""),this.g=Wr(N[3]||"",!0),Bi(this,N[4]),this.h=Wr(N[5]||"",!0),No(this,N[6]||"",!0),this.m=Wr(N[7]||"")):(this.l=!1,this.i=new ti(null,this.l))}Li.prototype.toString=function(){const p=[];var N=this.j;N&&p.push(pr(N,jn,!0),":");var D=this.g;return(D||N=="file")&&(p.push("//"),(N=this.o)&&p.push(pr(N,jn,!0),"@"),p.push(Ni(D).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D=this.u,D!=null&&p.push(":",String(D))),(D=this.h)&&(this.g&&D.charAt(0)!="/"&&p.push("/"),p.push(pr(D,D.charAt(0)=="/"?H:ce,!0))),(D=this.i.toString())&&p.push("?",D),(D=this.m)&&p.push("#",pr(D,Fn)),p.join("")},Li.prototype.resolve=function(p){const N=Ln(this);let D=!!p.j;D?vt(N,p.j):D=!!p.o,D?N.o=p.o:D=!!p.g,D?N.g=p.g:D=p.u!=null;var F=p.h;if(D)Bi(N,p.u);else if(D=!!p.h){if(F.charAt(0)!="/")if(this.g&&!this.h)F="/"+F;else{var oe=N.h.lastIndexOf("/");oe!=-1&&(F=N.h.slice(0,oe+1)+F)}if(oe=F,oe==".."||oe==".")F="";else if(oe.indexOf("./")!=-1||oe.indexOf("/.")!=-1){F=oe.lastIndexOf("/",0)==0,oe=oe.split("/");const ye=[];for(let Pe=0;Pe<oe.length;){const ct=oe[Pe++];ct=="."?F&&Pe==oe.length&&ye.push(""):ct==".."?((ye.length>1||ye.length==1&&ye[0]!="")&&ye.pop(),F&&Pe==oe.length&&ye.push("")):(ye.push(ct),F=!0)}F=ye.join("/")}else F=oe}return D?N.h=F:D=p.i.toString()!=="",D?No(N,Ro(p.i)):D=!!p.m,D&&(N.m=p.m),N};function Ln(p){return new Li(p)}function vt(p,N,D){p.j=D?Wr(N,!0):N,p.j&&(p.j=p.j.replace(/:$/,""))}function Bi(p,N){if(N){if(N=Number(N),isNaN(N)||N<0)throw Error("Bad port number "+N);p.u=N}else p.u=null}function No(p,N,D){N instanceof ti?(p.i=N,Os(p.i,p.l)):(D||(N=pr(N,Ye)),p.i=new ti(N,p.l))}function rt(p,N,D){p.i.set(N,D)}function Wi(p){return rt(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function Wr(p,N){return p?N?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function pr(p,N,D){return typeof p=="string"?(p=encodeURI(p).replace(N,At),D&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function At(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var jn=/[#\/\?@]/g,ce=/[#\?:]/g,H=/[#\?]/g,Ye=/[#\?@]/g,Fn=/#/g;function ti(p,N){this.h=this.g=null,this.i=p||null,this.j=!!N}function Ki(p){p.g||(p.g=new Map,p.h=0,p.i&&Ns(p.i,function(N,D){p.add(decodeURIComponent(N.replace(/\+/g," ")),D)}))}i=ti.prototype,i.add=function(p,N){Ki(this),this.i=null,p=Rs(this,p);let D=this.g.get(p);return D||this.g.set(p,D=[]),D.push(N),this.h+=1,this};function Ma(p,N){Ki(p),N=Rs(p,N),p.g.has(N)&&(p.i=null,p.h-=p.g.get(N).length,p.g.delete(N))}function bi(p,N){return Ki(p),N=Rs(p,N),p.g.has(N)}i.forEach=function(p,N){Ki(this),this.g.forEach(function(D,F){D.forEach(function(oe){p.call(N,oe,F,this)},this)},this)};function Ke(p,N){Ki(p);let D=[];if(typeof N=="string")bi(p,N)&&(D=D.concat(p.g.get(Rs(p,N))));else for(p=Array.from(p.g.values()),N=0;N<p.length;N++)D=D.concat(p[N]);return D}i.set=function(p,N){return Ki(this),this.i=null,p=Rs(this,p),bi(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[N]),this.h+=1,this},i.get=function(p,N){return p?(p=Ke(this,p),p.length>0?String(p[0]):N):N};function on(p,N,D){Ma(p,N),D.length>0&&(p.i=null,p.g.set(Rs(p,N),k(D)),p.h+=D.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],N=Array.from(this.g.keys());for(let F=0;F<N.length;F++){var D=N[F];const oe=Ni(D);D=Ke(this,D);for(let ye=0;ye<D.length;ye++){let Pe=oe;D[ye]!==""&&(Pe+="="+Ni(D[ye])),p.push(Pe)}}return this.i=p.join("&")};function Ro(p){const N=new ti;return N.i=p.i,p.g&&(N.g=new Map(p.g),N.h=p.h),N}function Rs(p,N){return N=String(N),p.j&&(N=N.toLowerCase()),N}function Os(p,N){N&&!p.j&&(Ki(p),p.i=null,p.g.forEach(function(D,F){const oe=F.toLowerCase();F!=oe&&(Ma(this,F),on(this,oe,D))},p)),p.j=N}function Zi(p,N){const D=new Tt;if(x.Image){const F=new Image;F.onload=C(xr,D,"TestLoadImage: loaded",!0,N,F),F.onerror=C(xr,D,"TestLoadImage: error",!1,N,F),F.onabort=C(xr,D,"TestLoadImage: abort",!1,N,F),F.ontimeout=C(xr,D,"TestLoadImage: timeout",!1,N,F),x.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=p}else N(!1)}function Ks(p,N){const D=new Tt,F=new AbortController,oe=setTimeout(()=>{F.abort(),xr(D,"TestPingServer: timeout",!1,N)},1e4);fetch(p,{signal:F.signal}).then(ye=>{clearTimeout(oe),ye.ok?xr(D,"TestPingServer: ok",!0,N):xr(D,"TestPingServer: server error",!1,N)}).catch(()=>{clearTimeout(oe),xr(D,"TestPingServer: error",!1,N)})}function xr(p,N,D,F,oe){try{oe&&(oe.onload=null,oe.onerror=null,oe.onabort=null,oe.ontimeout=null),F(D)}catch{}}function wn(){this.g=new Qs}function Ji(p){this.i=p.Sb||null,this.h=p.ab||!1}I(Ji,ps),Ji.prototype.g=function(){return new $i(this.i,this.h)};function $i(p,N){We.call(this),this.H=p,this.o=N,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}I($i,We),i=$i.prototype,i.open=function(p,N){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=N,this.readyState=1,nt(this)},i.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const N={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(N.body=p),(this.H||x).fetch(new Request(this.D,N)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ds(this)),this.readyState=0},i.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,nt(this)),this.g&&(this.readyState=3,nt(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof x.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ze(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ze(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}i.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var N=p.value?p.value:new Uint8Array(0);(N=this.B.decode(N,{stream:!p.done}))&&(this.response=this.responseText+=N)}p.done?Ds(this):nt(this),this.readyState==3&&Ze(this)}},i.Oa=function(p){this.g&&(this.response=this.responseText=p,Ds(this))},i.Na=function(p){this.g&&(this.response=p,Ds(this))},i.ga=function(){this.g&&Ds(this)};function Ds(p){p.readyState=4,p.l=null,p.j=null,p.B=null,nt(p)}i.setRequestHeader=function(p,N){this.A.append(p,N)},i.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],N=this.h.entries();for(var D=N.next();!D.done;)D=D.value,p.push(D[0]+": "+D[1]),D=N.next();return p.join(`\r
`)};function nt(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty($i.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function ln(p){let N="";return at(p,function(D,F){N+=F,N+=":",N+=D,N+=`\r
`}),N}function Zs(p,N,D){e:{for(F in D){var F=!1;break e}F=!0}F||(D=ln(D),typeof p=="string"?D!=null&&Ni(D):rt(p,N,D))}function tn(p){We.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}I(tn,We);var Or=/^https?$/i,Dr=["POST","PUT"];i=tn.prototype,i.Fa=function(p){this.H=p},i.ea=function(p,N,D,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);N=N?N.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ws.g(),this.g.onreadystatechange=M(E(this.Ca,this));try{this.B=!0,this.g.open(N,String(p),!0),this.B=!1}catch(ye){Js(this,ye);return}if(p=D||"",D=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var oe in F)D.set(oe,F[oe]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const ye of F.keys())D.set(ye,F.get(ye));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(D.keys()).find(ye=>ye.toLowerCase()=="content-type"),oe=x.FormData&&p instanceof x.FormData,!(Array.prototype.indexOf.call(Dr,N,void 0)>=0)||F||oe||D.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ye,Pe]of D)this.g.setRequestHeader(ye,Pe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(ye){Js(this,ye)}};function Js(p,N){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=N,p.o=5,ys(p),ar(p)}function ys(p){p.A||(p.A=!0,An(p,"complete"),An(p,"error"))}i.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,An(this,"complete"),An(this,"abort"),ar(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ar(this,!0)),tn.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Mr(this):this.Xa())},i.Xa=function(){Mr(this)};function Mr(p){if(p.h&&typeof f<"u"){if(p.v&&yr(p)==4)setTimeout(p.Ca.bind(p),0);else if(An(p,"readystatechange"),yr(p)==4){p.h=!1;try{const ye=p.ca();e:switch(ye){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var N=!0;break e;default:N=!1}var D;if(!(D=N)){var F;if(F=ye===0){let Pe=String(p.D).match(bt)[1]||null;!Pe&&x.self&&x.self.location&&(Pe=x.self.location.protocol.slice(0,-1)),F=!Or.test(Pe?Pe.toLowerCase():"")}D=F}if(D)An(p,"complete"),An(p,"success");else{p.o=6;try{var oe=yr(p)>2?p.g.statusText:""}catch{oe=""}p.l=oe+" ["+p.ca()+"]",ys(p)}}finally{ar(p)}}}}function ar(p,N){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const D=p.g;p.g=null,N||An(p,"ready");try{D.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function yr(p){return p.g?p.g.readyState:0}i.ca=function(){try{return yr(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(p){if(this.g){var N=this.g.responseText;return p&&N.indexOf(p)==0&&(N=N.substring(p.length)),ei(N)}};function zn(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function or(p){const N={};p=(p.g&&yr(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<p.length;F++){if(X(p[F]))continue;var D=Ri(p[F]);const oe=D[0];if(D=D[1],typeof D!="string")continue;D=D.trim();const ye=N[oe]||[];N[oe]=ye,ye.push(D)}ft(N,function(F){return F.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Cn(p,N,D){return D&&D.internalChannelParams&&D.internalChannelParams[p]||N}function Es(p){this.za=0,this.i=[],this.j=new Tt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Cn("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Cn("baseRetryDelayMs",5e3,p),this.Za=Cn("retryDelaySeedMs",1e4,p),this.Ta=Cn("forwardChannelMaxRetries",2,p),this.va=Cn("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new ve(p&&p.concurrentRequestLimit),this.Ba=new wn,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=Es.prototype,i.ka=8,i.I=1,i.connect=function(p,N,D,F){sn(0),this.W=p,this.H=N||{},D&&F!==void 0&&(this.H.OSID=D,this.H.OAID=F),this.F=this.X,this.J=ul(this,null,this.W),Kr(this)};function La(p){if(Ba(p),p.I==3){var N=p.V++,D=Ln(p.J);if(rt(D,"SID",p.M),rt(D,"RID",N),rt(D,"TYPE","terminate"),Ms(p,D),N=new je(p,p.j,N),N.M=2,N.A=Wi(Ln(D)),D=!1,x.navigator&&x.navigator.sendBeacon)try{D=x.navigator.sendBeacon(N.A.toString(),"")}catch{}!D&&x.Image&&(new Image().src=N.A,D=!0),D||(N.g=ka(N.j,null),N.g.ea(N.A)),N.F=Date.now(),Qr(N)}cl(p)}function _s(p){p.g&&(pe(p),p.g.cancel(),p.g=null)}function Ba(p){_s(p),p.v&&(x.clearTimeout(p.v),p.v=null),Bn(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&x.clearTimeout(p.m),p.m=null)}function Kr(p){if(!vo(p.h)&&!p.m){p.m=!0;var N=p.Ea;Ve||G(),ke||(Ve(),ke=!0),j.add(N,p),p.D=0}}function Pa(p,N){return en(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=N.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=lt(E(p.Ea,p,N),Oo(p,p.D)),p.D++,!0)}i.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const oe=new je(this,this.j,p);let ye=this.o;if(this.U&&(ye?(ye=ne(ye),Be(ye,this.U)):ye=this.U),this.u!==null||this.R||(oe.J=ye,ye=null),this.S)e:{for(var N=0,D=0;D<this.i.length;D++){t:{var F=this.i[D];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break t}F=void 0}if(F===void 0)break;if(N+=F,N>4096){N=D;break e}if(N===4096||D===this.i.length-1){N=D+1;break e}}N=1e3}else N=1e3;N=$s(this,oe,N),D=Ln(this.J),rt(D,"RID",p),rt(D,"CVER",22),this.G&&rt(D,"X-HTTP-Session-Id",this.G),Ms(this,D),ye&&(this.R?N="headers="+Ni(ln(ye))+"&"+N:this.u&&Zs(D,this.u,ye)),Io(this.h,oe),this.Ra&&rt(D,"TYPE","init"),this.S?(rt(D,"$req",N),rt(D,"SID","null"),oe.U=!0,Oi(oe,D,null)):Oi(oe,D,N),this.I=2}}else this.I==3&&(p?Wt(this,p):this.i.length==0||vo(this.h)||Wt(this))};function Wt(p,N){var D;N?D=N.l:D=p.V++;const F=Ln(p.J);rt(F,"SID",p.M),rt(F,"RID",D),rt(F,"AID",p.K),Ms(p,F),p.u&&p.o&&Zs(F,p.u,p.o),D=new je(p,p.j,D,p.D+1),p.u===null&&(D.J=p.o),N&&(p.i=N.G.concat(p.i)),N=$s(p,D,1e3),D.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),Io(p.h,D),Oi(D,F,N)}function Ms(p,N){p.H&&at(p.H,function(D,F){rt(N,F,D)}),p.l&&at({},function(D,F){rt(N,F,D)})}function $s(p,N,D){D=Math.min(p.i.length,D);const F=p.l?E(p.l.Ka,p.l,p):null;e:{var oe=p.i;let ct=-1;for(;;){const kn=["count="+D];ct==-1?D>0?(ct=oe[0].g,kn.push("ofs="+ct)):ct=0:kn.push("ofs="+ct);let Ht=!0;for(let Tn=0;Tn<D;Tn++){var ye=oe[Tn].g;const lr=oe[Tn].map;if(ye-=ct,ye<0)ct=Math.max(0,oe[Tn].g-100),Ht=!1;else try{ye="req"+ye+"_"||"";try{var Pe=lr instanceof Map?lr:Object.entries(lr);for(const[es,Si]of Pe){let cr=Si;b(Si)&&(cr=pi(Si)),kn.push(ye+es+"="+encodeURIComponent(cr))}}catch(es){throw kn.push(ye+"type="+encodeURIComponent("_badmap")),es}}catch{F&&F(lr)}}if(Ht){Pe=kn.join("&");break e}}Pe=void 0}return p=p.i.splice(0,D),N.G=p,Pe}function Lr(p){if(!p.g&&!p.v){p.Y=1;var N=p.Da;Ve||G(),ke||(Ve(),ke=!0),j.add(N,p),p.A=0}}function ea(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=lt(E(p.Da,p),Oo(p,p.A)),p.A++,!0)}i.Da=function(){if(this.v=null,gt(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=lt(E(this.Wa,this),p)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,sn(10),_s(this),gt(this))};function pe(p){p.B!=null&&(x.clearTimeout(p.B),p.B=null)}function gt(p){p.g=new je(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var N=Ln(p.na);rt(N,"RID","rpc"),rt(N,"SID",p.M),rt(N,"AID",p.K),rt(N,"CI",p.F?"0":"1"),!p.F&&p.ia&&rt(N,"TO",p.ia),rt(N,"TYPE","xmlhttp"),Ms(p,N),p.u&&p.o&&Zs(N,p.u,p.o),p.O&&(p.g.H=p.O);var D=p.g;p=p.ba,D.M=1,D.A=Wi(Ln(N)),D.u=null,D.R=!0,xs(D,p)}i.Va=function(){this.C!=null&&(this.C=null,_s(this),ea(this),sn(19))};function Bn(p){p.C!=null&&(x.clearTimeout(p.C),p.C=null)}function ta(p,N){var D=null;if(p.g==N){Bn(p),pe(p),p.g=null;var F=2}else if(Mi(p.h,N))D=N.G,Pt(p.h,N),F=1;else return;if(p.I!=0){if(N.o)if(F==1){D=N.u?N.u.length:0,N=Date.now()-N.F;var oe=p.D;F=mr(),An(F,new re(F,D)),Kr(p)}else Lr(p);else if(oe=N.m,oe==3||oe==0&&N.X>0||!(F==1&&Pa(p,N)||F==2&&ea(p)))switch(D&&D.length>0&&(N=p.h,N.i=N.i.concat(D)),oe){case 1:Zr(p,5);break;case 4:Zr(p,10);break;case 3:Zr(p,6);break;default:Zr(p,2)}}}function Oo(p,N){let D=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(D*=2),D*N}function Zr(p,N){if(p.j.info("Error code "+N),N==2){var D=E(p.bb,p),F=p.Ua;const oe=!F;F=new Li(F||"//www.google.com/images/cleardot.gif"),x.location&&x.location.protocol=="http"||vt(F,"https"),Wi(F),oe?Zi(F.toString(),D):Ks(F.toString(),D)}else sn(2);p.I=0,p.l&&p.l.pa(N),cl(p),Ba(p)}i.bb=function(p){p?(this.j.info("Successfully pinged google.com"),sn(2)):(this.j.info("Failed to ping google.com"),sn(1))};function cl(p){if(p.I=0,p.ja=[],p.l){const N=Ot(p.h);(N.length!=0||p.i.length!=0)&&(q(p.ja,N),q(p.ja,p.i),p.h.i.length=0,k(p.i),p.i.length=0),p.l.oa()}}function ul(p,N,D){var F=D instanceof Li?Ln(D):new Li(D);if(F.g!="")N&&(F.g=N+"."+F.g),Bi(F,F.u);else{var oe=x.location;F=oe.protocol,N=N?N+"."+oe.hostname:oe.hostname,oe=+oe.port;const ye=new Li(null);F&&vt(ye,F),N&&(ye.g=N),oe&&Bi(ye,oe),D&&(ye.h=D),F=ye}return D=p.G,N=p.wa,D&&N&&rt(F,D,N),rt(F,"VER",p.ka),Ms(p,F),F}function ka(p,N,D){if(N&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return N=p.Aa&&!p.ma?new tn(new Ji({ab:D})):new tn(p.ma),N.Fa(p.L),N}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Pn(){}i=Pn.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Jr(){}Jr.prototype.g=function(p,N){return new It(p,N)};function It(p,N){We.call(this),this.g=new Es(N),this.l=p,this.h=N&&N.messageUrlParams||null,p=N&&N.messageHeaders||null,N&&N.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=N&&N.initMessageHeaders||null,N&&N.messageContentType&&(p?p["X-WebChannel-Content-Type"]=N.messageContentType:p={"X-WebChannel-Content-Type":N.messageContentType}),N&&N.sa&&(p?p["X-WebChannel-Client-Profile"]=N.sa:p={"X-WebChannel-Client-Profile":N.sa}),this.g.U=p,(p=N&&N.Qb)&&!X(p)&&(this.g.u=p),this.A=N&&N.supportsCrossDomainXhr||!1,this.v=N&&N.sendRawJson||!1,(N=N&&N.httpSessionIdParam)&&!X(N)&&(this.g.G=N,p=this.h,p!==null&&N in p&&(p=this.h,N in p&&delete p[N])),this.j=new Dt(this)}I(It,We),It.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},It.prototype.close=function(){La(this.g)},It.prototype.o=function(p){var N=this.g;if(typeof p=="string"){var D={};D.__data__=p,p=D}else this.v&&(D={},D.__data__=pi(p),p=D);N.i.push(new Mn(N.Ya++,p)),N.I==3&&Kr(N)},It.prototype.N=function(){this.g.l=null,delete this.j,La(this.g),delete this.g,It.Z.N.call(this)};function na(p){Oe.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var N=p.__sm__;if(N){e:{for(const D in N){p=D;break e}p=void 0}(this.i=p)&&(p=this.i,N=N!==null&&p in N?N[p]:void 0),this.data=N}else this.data=p}I(na,Oe);function $r(){qt.call(this),this.status=1}I($r,qt);function Dt(p){this.g=p}I(Dt,Pn),Dt.prototype.ra=function(){An(this.g,"a")},Dt.prototype.qa=function(p){An(this.g,new na(p))},Dt.prototype.pa=function(p){An(this.g,new $r)},Dt.prototype.oa=function(){An(this.g,"b")},Jr.prototype.createWebChannel=Jr.prototype.g,It.prototype.send=It.prototype.o,It.prototype.open=It.prototype.m,It.prototype.close=It.prototype.close,O_=function(){return new Jr},R_=function(){return mr()},N_=it,E1={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},qr.NO_ERROR=0,qr.TIMEOUT=8,qr.HTTP_ERROR=6,Xh=qr,qn.COMPLETE="complete",I_=qn,Oa.EventType=Xt,Xt.OPEN="a",Xt.CLOSE="b",Xt.ERROR="c",Xt.MESSAGE="d",We.prototype.listen=We.prototype.J,Wc=Oa,tn.prototype.listenOnce=tn.prototype.K,tn.prototype.getLastError=tn.prototype.Ha,tn.prototype.getLastErrorCode=tn.prototype.ya,tn.prototype.getStatus=tn.prototype.ca,tn.prototype.getResponseJson=tn.prototype.La,tn.prototype.getResponseText=tn.prototype.la,tn.prototype.send=tn.prototype.ea,tn.prototype.setWithCredentials=tn.prototype.Fa,v_=tn}).apply(typeof Mh<"u"?Mh:typeof self<"u"?self:typeof window<"u"?window:{});const wx="@firebase/firestore",Tx="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nr.UNAUTHENTICATED=new nr(null),nr.GOOGLE_CREDENTIALS=new nr("google-credentials-uid"),nr.FIRST_PARTY=new nr("first-party-uid"),nr.MOCK_USER=new nr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sc="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl=new __("@firebase/firestore");function Vl(){return tl.logLevel}function ze(i,...e){if(tl.logLevel<=Zt.DEBUG){const n=e.map(tg);tl.debug(`Firestore (${sc}): ${i}`,...n)}}function va(i,...e){if(tl.logLevel<=Zt.ERROR){const n=e.map(tg);tl.error(`Firestore (${sc}): ${i}`,...n)}}function Zl(i,...e){if(tl.logLevel<=Zt.WARN){const n=e.map(tg);tl.warn(`Firestore (${sc}): ${i}`,...n)}}function tg(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(i,e,n){let a="Unexpected state";typeof e=="string"?a=e:n=e,D_(i,a,n)}function D_(i,e,n){let a=`FIRESTORE (${sc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{a+=" CONTEXT: "+JSON.stringify(n)}catch{a+=" CONTEXT: "+n}throw va(a),new Error(a)}function un(i,e,n,a){let u="Unexpected state";typeof n=="string"?u=n:a=n,i||D_(e,u,a)}function pt(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qe extends rc{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Jv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(nr.UNAUTHENTICATED)))}shutdown(){}}class $v{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class eI{constructor(e){this.t=e,this.currentUser=nr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){un(this.o===void 0,42304);let a=this.i;const u=T=>this.i!==a?(a=this.i,n(T)):Promise.resolve();let f=new ba;this.o=()=>{this.i++,this.currentUser=this.u(),f.resolve(),f=new ba,e.enqueueRetryable((()=>u(this.currentUser)))};const x=()=>{const T=f;e.enqueueRetryable((async()=>{await T.promise,await u(this.currentUser)}))},b=T=>{ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=T,this.o&&(this.auth.addAuthTokenListener(this.o),x())};this.t.onInit((T=>b(T))),setTimeout((()=>{if(!this.auth){const T=this.t.getImmediate({optional:!0});T?b(T):(ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),f.resolve(),f=new ba)}}),0),x()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((a=>this.i!==e?(ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(un(typeof a.accessToken=="string",31837,{l:a}),new M_(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return un(e===null||typeof e=="string",2055,{h:e}),new nr(e)}}class tI{constructor(e,n,a){this.P=e,this.T=n,this.I=a,this.type="FirstParty",this.user=nr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class nI{constructor(e,n,a){this.P=e,this.T=n,this.I=a}getToken(){return Promise.resolve(new tI(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(nr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class bx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iI{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,kv(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){un(this.o===void 0,3512);const a=f=>{f.error!=null&&ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${f.error.message}`);const x=f.token!==this.m;return this.m=f.token,ze("FirebaseAppCheckTokenProvider",`Received ${x?"new":"existing"} token.`),x?n(f.token):Promise.resolve()};this.o=f=>{e.enqueueRetryable((()=>a(f)))};const u=f=>{ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=f,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((f=>u(f))),setTimeout((()=>{if(!this.appCheck){const f=this.V.getImmediate({optional:!0});f?u(f):ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new bx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(un(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new bx(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let a=0;a<i;a++)n[a]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const u=rI(40);for(let f=0;f<u.length;++f)a.length<20&&u[f]<n&&(a+=e.charAt(u[f]%62))}return a}}function jt(i,e){return i<e?-1:i>e?1:0}function _1(i,e){const n=Math.min(i.length,e.length);for(let a=0;a<n;a++){const u=i.charAt(a),f=e.charAt(a);if(u!==f)return e1(u)===e1(f)?jt(u,f):e1(u)?1:-1}return jt(i.length,e.length)}const sI=55296,aI=57343;function e1(i){const e=i.charCodeAt(0);return e>=sI&&e<=aI}function Jl(i,e,n){return i.length===e.length&&i.every(((a,u)=>n(a,e[u])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx="__name__";class js{constructor(e,n,a){n===void 0?n=0:n>e.length&&ot(637,{offset:n,range:e.length}),a===void 0?a=e.length-n:a>e.length-n&&ot(1746,{length:a,range:e.length-n}),this.segments=e,this.offset=n,this.len=a}get length(){return this.len}isEqual(e){return js.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof js?e.forEach((a=>{n.push(a)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,a=this.limit();n<a;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const a=Math.min(e.length,n.length);for(let u=0;u<a;u++){const f=js.compareSegments(e.get(u),n.get(u));if(f!==0)return f}return jt(e.length,n.length)}static compareSegments(e,n){const a=js.isNumericId(e),u=js.isNumericId(n);return a&&!u?-1:!a&&u?1:a&&u?js.extractNumericId(e).compare(js.extractNumericId(n)):_1(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return fo.fromString(e.substring(4,e.length-2))}}class Rn extends js{construct(e,n,a){return new Rn(e,n,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const a of e){if(a.indexOf("//")>=0)throw new qe(Ne.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);n.push(...a.split("/").filter((u=>u.length>0)))}return new Rn(n)}static emptyPath(){return new Rn([])}}const oI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zi extends js{construct(e,n,a){return new zi(e,n,a)}static isValidIdentifier(e){return oI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zi.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Sx}static keyField(){return new zi([Sx])}static fromServerFormat(e){const n=[];let a="",u=0;const f=()=>{if(a.length===0)throw new qe(Ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(a),a=""};let x=!1;for(;u<e.length;){const b=e[u];if(b==="\\"){if(u+1===e.length)throw new qe(Ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const T=e[u+1];if(T!=="\\"&&T!=="."&&T!=="`")throw new qe(Ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=T,u+=2}else b==="`"?(x=!x,u++):b!=="."||x?(a+=b,u++):(f(),u++)}if(f(),x)throw new qe(Ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zi(n)}static emptyPath(){return new zi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.path=e}static fromPath(e){return new tt(Rn.fromString(e))}static fromName(e){return new tt(Rn.fromString(e).popFirst(5))}static empty(){return new tt(Rn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Rn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Rn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new tt(new Rn(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L_(i,e,n){if(!n)throw new qe(Ne.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function lI(i,e,n,a){if(e===!0&&a===!0)throw new qe(Ne.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function Cx(i){if(!tt.isDocumentKey(i))throw new qe(Ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function vx(i){if(tt.isDocumentKey(i))throw new qe(Ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function B_(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function ig(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":ot(12329,{type:typeof i})}function Ir(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new qe(Ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ig(i);throw new qe(Ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(i,e){const n={typeString:i};return e&&(n.value=e),n}function Eu(i,e){if(!B_(i))throw new qe(Ne.INVALID_ARGUMENT,"JSON must be an object");let n;for(const a in e)if(e[a]){const u=e[a].typeString,f="value"in e[a]?{value:e[a].value}:void 0;if(!(a in i)){n=`JSON missing required field: '${a}'`;break}const x=i[a];if(u&&typeof x!==u){n=`JSON field '${a}' must be a ${u}.`;break}if(f!==void 0&&x!==f.value){n=`Expected '${a}' field to equal '${f.value}'`;break}}if(n)throw new qe(Ne.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix=-62135596800,Nx=1e6;class On{static now(){return On.fromMillis(Date.now())}static fromDate(e){return On.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),a=Math.floor((e-1e3*n)*Nx);return new On(n,a)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new qe(Ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new qe(Ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Ix)throw new qe(Ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new qe(Ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Nx}_compareTo(e){return this.seconds===e.seconds?jt(this.nanoseconds,e.nanoseconds):jt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:On._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Eu(e,On._jsonSchema))return new On(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ix;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}On._jsonSchemaVersion="firestore/timestamp/1.0",On._jsonSchema={type:mi("string",On._jsonSchemaVersion),seconds:mi("number"),nanoseconds:mi("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{static fromTimestamp(e){return new ht(e)}static min(){return new ht(new On(0,0))}static max(){return new ht(new On(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uu=-1;function cI(i,e){const n=i.toTimestamp().seconds,a=i.toTimestamp().nanoseconds+1,u=ht.fromTimestamp(a===1e9?new On(n+1,0):new On(n,a));return new mo(u,tt.empty(),e)}function uI(i){return new mo(i.readTime,i.key,uu)}class mo{constructor(e,n,a){this.readTime=e,this.documentKey=n,this.largestBatchId=a}static min(){return new mo(ht.min(),tt.empty(),uu)}static max(){return new mo(ht.max(),tt.empty(),uu)}}function hI(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=tt.comparator(i.documentKey,e.documentKey),n!==0?n:jt(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ac(i){if(i.code!==Ne.FAILED_PRECONDITION||i.message!==fI)throw i;ze("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ot(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ie(((a,u)=>{this.nextCallback=f=>{this.wrapSuccess(e,f).next(a,u)},this.catchCallback=f=>{this.wrapFailure(n,f).next(a,u)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Ie?n:Ie.resolve(n)}catch(n){return Ie.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Ie.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Ie.reject(n)}static resolve(e){return new Ie(((n,a)=>{n(e)}))}static reject(e){return new Ie(((n,a)=>{a(e)}))}static waitFor(e){return new Ie(((n,a)=>{let u=0,f=0,x=!1;e.forEach((b=>{++u,b.next((()=>{++f,x&&f===u&&n()}),(T=>a(T)))})),x=!0,f===u&&n()}))}static or(e){let n=Ie.resolve(!1);for(const a of e)n=n.next((u=>u?Ie.resolve(u):a()));return n}static forEach(e,n){const a=[];return e.forEach(((u,f)=>{a.push(n.call(this,u,f))})),this.waitFor(a)}static mapArray(e,n){return new Ie(((a,u)=>{const f=e.length,x=new Array(f);let b=0;for(let T=0;T<f;T++){const E=T;n(e[E]).next((C=>{x[E]=C,++b,b===f&&a(x)}),(C=>u(C)))}}))}static doWhile(e,n){return new Ie(((a,u)=>{const f=()=>{e()===!0?n().next((()=>{f()}),u):a()};f()}))}}function gI(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function oc(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>n.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Rf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg=-1;function Of(i){return i==null}function cf(i){return i===0&&1/i==-1/0}function mI(i){return typeof i=="number"&&Number.isInteger(i)&&!cf(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_="";function pI(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=Rx(e)),e=xI(i.get(n),e);return Rx(e)}function xI(i,e){let n=e;const a=i.length;for(let u=0;u<a;u++){const f=i.charAt(u);switch(f){case"\0":n+="";break;case P_:n+="";break;default:n+=f}}return n}function Rx(i){return i+P_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function bo(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function k_(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e,n){this.comparator=e,this.root=n||Fi.EMPTY}insert(e,n){return new Yn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Fi.BLACK,null,null))}remove(e){return new Yn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Fi.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return n.value;a<0?n=n.left:a>0&&(n=n.right)}return null}indexOf(e){let n=0,a=this.root;for(;!a.isEmpty();){const u=this.comparator(e,a.key);if(u===0)return n+a.left.size;u<0?a=a.left:(n+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,a)=>(e(n,a),!1)))}toString(){const e=[];return this.inorderTraversal(((n,a)=>(e.push(`${n}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lh(this.root,e,this.comparator,!0)}}class Lh{constructor(e,n,a,u){this.isReverse=u,this.nodeStack=[];let f=1;for(;!e.isEmpty();)if(f=n?a(e.key,n):1,n&&u&&(f*=-1),f<0)e=this.isReverse?e.left:e.right;else{if(f===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Fi{constructor(e,n,a,u,f){this.key=e,this.value=n,this.color=a??Fi.RED,this.left=u??Fi.EMPTY,this.right=f??Fi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,a,u,f){return new Fi(e??this.key,n??this.value,a??this.color,u??this.left,f??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,a){let u=this;const f=a(e,u.key);return u=f<0?u.copy(null,null,null,u.left.insert(e,n,a),null):f===0?u.copy(null,n,null,null,null):u.copy(null,null,null,null,u.right.insert(e,n,a)),u.fixUp()}removeMin(){if(this.left.isEmpty())return Fi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let a,u=this;if(n(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,n),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),n(e,u.key)===0){if(u.right.isEmpty())return Fi.EMPTY;a=u.right.min(),u=u.copy(a.key,a.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,n))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Fi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Fi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ot(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ot(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ot(27949);return e+(this.isRed()?0:1)}}Fi.EMPTY=null,Fi.RED=!0,Fi.BLACK=!1;Fi.EMPTY=new class{constructor(){this.size=0}get key(){throw ot(57766)}get value(){throw ot(16141)}get color(){throw ot(16727)}get left(){throw ot(29726)}get right(){throw ot(36894)}copy(e,n,a,u,f){return this}insert(e,n,a){return new Fi(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e){this.comparator=e,this.data=new Yn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,a)=>(e(n),!1)))}forEachInRange(e,n){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const u=a.getNext();if(this.comparator(u.key,e[1])>=0)return;n(u.key)}}forEachWhile(e,n){let a;for(a=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Dx(this.data.getIterator())}getIteratorFrom(e){return new Dx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((a=>{n=n.add(a)})),n}isEqual(e){if(!(e instanceof Ai)||this.size!==e.size)return!1;const n=this.data.getIterator(),a=e.data.getIterator();for(;n.hasNext();){const u=n.getNext().key,f=a.getNext().key;if(this.comparator(u,f)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Ai(this.comparator);return n.data=e,n}}class Dx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e){this.fields=e,e.sort(zi.comparator)}static empty(){return new Xr([])}unionWith(e){let n=new Ai(zi.comparator);for(const a of this.fields)n=n.add(a);for(const a of e)n=n.add(a);return new Xr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Jl(this.fields,e.fields,((n,a)=>n.isEqual(a)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(u){try{return atob(u)}catch(f){throw typeof DOMException<"u"&&f instanceof DOMException?new U_("Invalid base64 string: "+f):f}})(e);return new Hi(n)}static fromUint8Array(e){const n=(function(u){let f="";for(let x=0;x<u.length;++x)f+=String.fromCharCode(u[x]);return f})(e);return new Hi(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const a=new Uint8Array(n.length);for(let u=0;u<n.length;u++)a[u]=n.charCodeAt(u);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return jt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Hi.EMPTY_BYTE_STRING=new Hi("");const yI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function po(i){if(un(!!i,39018),typeof i=="string"){let e=0;const n=yI.exec(i);if(un(!!n,46558,{timestamp:i}),n[1]){let u=n[1];u=(u+"000000000").substr(0,9),e=Number(u)}const a=new Date(i);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:ri(i.seconds),nanos:ri(i.nanos)}}function ri(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function xo(i){return typeof i=="string"?Hi.fromBase64String(i):Hi.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_="server_timestamp",j_="__type__",F_="__previous_value__",z_="__local_write_time__";function sg(i){var n,a;return((a=(((n=i==null?void 0:i.mapValue)==null?void 0:n.fields)||{})[j_])==null?void 0:a.stringValue)===V_}function Df(i){const e=i.mapValue.fields[F_];return sg(e)?Df(e):e}function hu(i){const e=po(i.mapValue.fields[z_].timestampValue);return new On(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e,n,a,u,f,x,b,T,E,C){this.databaseId=e,this.appId=n,this.persistenceKey=a,this.host=u,this.ssl=f,this.forceLongPolling=x,this.autoDetectLongPolling=b,this.longPollingOptions=T,this.useFetchStreams=E,this.isUsingEmulator=C}}const uf="(default)";class fu{constructor(e,n){this.projectId=e,this.database=n||uf}static empty(){return new fu("","")}get isDefaultDatabase(){return this.database===uf}isEqual(e){return e instanceof fu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_="__type__",_I="__max__",Bh={mapValue:{}},G_="__vector__",hf="value";function yo(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?sg(i)?4:wI(i)?9007199254740991:AI(i)?10:11:ot(28295,{value:i})}function Ys(i,e){if(i===e)return!0;const n=yo(i);if(n!==yo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return hu(i).isEqual(hu(e));case 3:return(function(u,f){if(typeof u.timestampValue=="string"&&typeof f.timestampValue=="string"&&u.timestampValue.length===f.timestampValue.length)return u.timestampValue===f.timestampValue;const x=po(u.timestampValue),b=po(f.timestampValue);return x.seconds===b.seconds&&x.nanos===b.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(u,f){return xo(u.bytesValue).isEqual(xo(f.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(u,f){return ri(u.geoPointValue.latitude)===ri(f.geoPointValue.latitude)&&ri(u.geoPointValue.longitude)===ri(f.geoPointValue.longitude)})(i,e);case 2:return(function(u,f){if("integerValue"in u&&"integerValue"in f)return ri(u.integerValue)===ri(f.integerValue);if("doubleValue"in u&&"doubleValue"in f){const x=ri(u.doubleValue),b=ri(f.doubleValue);return x===b?cf(x)===cf(b):isNaN(x)&&isNaN(b)}return!1})(i,e);case 9:return Jl(i.arrayValue.values||[],e.arrayValue.values||[],Ys);case 10:case 11:return(function(u,f){const x=u.mapValue.fields||{},b=f.mapValue.fields||{};if(Ox(x)!==Ox(b))return!1;for(const T in x)if(x.hasOwnProperty(T)&&(b[T]===void 0||!Ys(x[T],b[T])))return!1;return!0})(i,e);default:return ot(52216,{left:i})}}function du(i,e){return(i.values||[]).find((n=>Ys(n,e)))!==void 0}function $l(i,e){if(i===e)return 0;const n=yo(i),a=yo(e);if(n!==a)return jt(n,a);switch(n){case 0:case 9007199254740991:return 0;case 1:return jt(i.booleanValue,e.booleanValue);case 2:return(function(f,x){const b=ri(f.integerValue||f.doubleValue),T=ri(x.integerValue||x.doubleValue);return b<T?-1:b>T?1:b===T?0:isNaN(b)?isNaN(T)?0:-1:1})(i,e);case 3:return Mx(i.timestampValue,e.timestampValue);case 4:return Mx(hu(i),hu(e));case 5:return _1(i.stringValue,e.stringValue);case 6:return(function(f,x){const b=xo(f),T=xo(x);return b.compareTo(T)})(i.bytesValue,e.bytesValue);case 7:return(function(f,x){const b=f.split("/"),T=x.split("/");for(let E=0;E<b.length&&E<T.length;E++){const C=jt(b[E],T[E]);if(C!==0)return C}return jt(b.length,T.length)})(i.referenceValue,e.referenceValue);case 8:return(function(f,x){const b=jt(ri(f.latitude),ri(x.latitude));return b!==0?b:jt(ri(f.longitude),ri(x.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return Lx(i.arrayValue,e.arrayValue);case 10:return(function(f,x){var M,k,q,Q;const b=f.fields||{},T=x.fields||{},E=(M=b[hf])==null?void 0:M.arrayValue,C=(k=T[hf])==null?void 0:k.arrayValue,I=jt(((q=E==null?void 0:E.values)==null?void 0:q.length)||0,((Q=C==null?void 0:C.values)==null?void 0:Q.length)||0);return I!==0?I:Lx(E,C)})(i.mapValue,e.mapValue);case 11:return(function(f,x){if(f===Bh.mapValue&&x===Bh.mapValue)return 0;if(f===Bh.mapValue)return 1;if(x===Bh.mapValue)return-1;const b=f.fields||{},T=Object.keys(b),E=x.fields||{},C=Object.keys(E);T.sort(),C.sort();for(let I=0;I<T.length&&I<C.length;++I){const M=_1(T[I],C[I]);if(M!==0)return M;const k=$l(b[T[I]],E[C[I]]);if(k!==0)return k}return jt(T.length,C.length)})(i.mapValue,e.mapValue);default:throw ot(23264,{he:n})}}function Mx(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return jt(i,e);const n=po(i),a=po(e),u=jt(n.seconds,a.seconds);return u!==0?u:jt(n.nanos,a.nanos)}function Lx(i,e){const n=i.values||[],a=e.values||[];for(let u=0;u<n.length&&u<a.length;++u){const f=$l(n[u],a[u]);if(f)return f}return jt(n.length,a.length)}function ec(i){return A1(i)}function A1(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const a=po(n);return`time(${a.seconds},${a.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return xo(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return tt.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let a="[",u=!0;for(const f of n.values||[])u?u=!1:a+=",",a+=A1(f);return a+"]"})(i.arrayValue):"mapValue"in i?(function(n){const a=Object.keys(n.fields||{}).sort();let u="{",f=!0;for(const x of a)f?f=!1:u+=",",u+=`${x}:${A1(n.fields[x])}`;return u+"}"})(i.mapValue):ot(61005,{value:i})}function qh(i){switch(yo(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Df(i);return e?16+qh(e):16;case 5:return 2*i.stringValue.length;case 6:return xo(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((u,f)=>u+qh(f)),0)})(i.arrayValue);case 10:case 11:return(function(a){let u=0;return bo(a.fields,((f,x)=>{u+=f.length+qh(x)})),u})(i.mapValue);default:throw ot(13486,{value:i})}}function w1(i){return!!i&&"integerValue"in i}function ag(i){return!!i&&"arrayValue"in i}function Bx(i){return!!i&&"nullValue"in i}function Px(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Qh(i){return!!i&&"mapValue"in i}function AI(i){var n,a;return((a=(((n=i==null?void 0:i.mapValue)==null?void 0:n.fields)||{})[H_])==null?void 0:a.stringValue)===G_}function nu(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return bo(i.mapValue.fields,((n,a)=>e.mapValue.fields[n]=nu(a))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=nu(i.arrayValue.values[n]);return e}return{...i}}function wI(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===_I}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this.value=e}static empty(){return new vr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let a=0;a<e.length-1;++a)if(n=(n.mapValue.fields||{})[e.get(a)],!Qh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=nu(n)}setAll(e){let n=zi.emptyPath(),a={},u=[];e.forEach(((x,b)=>{if(!n.isImmediateParentOf(b)){const T=this.getFieldsMap(n);this.applyChanges(T,a,u),a={},u=[],n=b.popLast()}x?a[b.lastSegment()]=nu(x):u.push(b.lastSegment())}));const f=this.getFieldsMap(n);this.applyChanges(f,a,u)}delete(e){const n=this.field(e.popLast());Qh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ys(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let a=0;a<e.length;++a){let u=n.mapValue.fields[e.get(a)];Qh(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},n.mapValue.fields[e.get(a)]=u),n=u}return n.mapValue.fields}applyChanges(e,n,a){bo(n,((u,f)=>e[u]=f));for(const u of a)delete e[u]}clone(){return new vr(nu(this.value))}}function Y_(i){const e=[];return bo(i.fields,((n,a)=>{const u=new zi([n]);if(Qh(a)){const f=Y_(a.mapValue).fields;if(f.length===0)e.push(u);else for(const x of f)e.push(u.child(x))}else e.push(u)})),new Xr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e,n,a,u,f,x,b){this.key=e,this.documentType=n,this.version=a,this.readTime=u,this.createTime=f,this.data=x,this.documentState=b}static newInvalidDocument(e){return new ir(e,0,ht.min(),ht.min(),ht.min(),vr.empty(),0)}static newFoundDocument(e,n,a,u){return new ir(e,1,n,ht.min(),a,u,0)}static newNoDocument(e,n){return new ir(e,2,n,ht.min(),ht.min(),vr.empty(),0)}static newUnknownDocument(e,n){return new ir(e,3,n,ht.min(),ht.min(),vr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ht.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ht.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ir&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ir(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e,n){this.position=e,this.inclusive=n}}function kx(i,e,n){let a=0;for(let u=0;u<i.position.length;u++){const f=e[u],x=i.position[u];if(f.field.isKeyField()?a=tt.comparator(tt.fromName(x.referenceValue),n.key):a=$l(x,n.data.field(f.field)),f.dir==="desc"&&(a*=-1),a!==0)break}return a}function Ux(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Ys(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,n="asc"){this.field=e,this.dir=n}}function TI(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{}class _i extends X_{constructor(e,n,a){super(),this.field=e,this.op=n,this.value=a}static create(e,n,a){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,a):new SI(e,n,a):n==="array-contains"?new II(e,a):n==="in"?new NI(e,a):n==="not-in"?new RI(e,a):n==="array-contains-any"?new OI(e,a):new _i(e,n,a)}static createKeyFieldInFilter(e,n,a){return n==="in"?new CI(e,a):new vI(e,a)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison($l(n,this.value)):n!==null&&yo(this.value)===yo(n)&&this.matchesComparison($l(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ot(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xs extends X_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Xs(e,n)}matches(e){return q_(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function q_(i){return i.op==="and"}function Q_(i){return bI(i)&&q_(i)}function bI(i){for(const e of i.filters)if(e instanceof Xs)return!1;return!0}function T1(i){if(i instanceof _i)return i.field.canonicalString()+i.op.toString()+ec(i.value);if(Q_(i))return i.filters.map((e=>T1(e))).join(",");{const e=i.filters.map((n=>T1(n))).join(",");return`${i.op}(${e})`}}function W_(i,e){return i instanceof _i?(function(a,u){return u instanceof _i&&a.op===u.op&&a.field.isEqual(u.field)&&Ys(a.value,u.value)})(i,e):i instanceof Xs?(function(a,u){return u instanceof Xs&&a.op===u.op&&a.filters.length===u.filters.length?a.filters.reduce(((f,x,b)=>f&&W_(x,u.filters[b])),!0):!1})(i,e):void ot(19439)}function K_(i){return i instanceof _i?(function(n){return`${n.field.canonicalString()} ${n.op} ${ec(n.value)}`})(i):i instanceof Xs?(function(n){return n.op.toString()+" {"+n.getFilters().map(K_).join(" ,")+"}"})(i):"Filter"}class SI extends _i{constructor(e,n,a){super(e,n,a),this.key=tt.fromName(a.referenceValue)}matches(e){const n=tt.comparator(e.key,this.key);return this.matchesComparison(n)}}class CI extends _i{constructor(e,n){super(e,"in",n),this.keys=Z_("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class vI extends _i{constructor(e,n){super(e,"not-in",n),this.keys=Z_("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Z_(i,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((a=>tt.fromName(a.referenceValue)))}class II extends _i{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ag(n)&&du(n.arrayValue,this.value)}}class NI extends _i{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&du(this.value.arrayValue,n)}}class RI extends _i{constructor(e,n){super(e,"not-in",n)}matches(e){if(du(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!du(this.value.arrayValue,n)}}class OI extends _i{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ag(n)||!n.arrayValue.values)&&n.arrayValue.values.some((a=>du(this.value.arrayValue,a)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e,n=null,a=[],u=[],f=null,x=null,b=null){this.path=e,this.collectionGroup=n,this.orderBy=a,this.filters=u,this.limit=f,this.startAt=x,this.endAt=b,this.Te=null}}function Vx(i,e=null,n=[],a=[],u=null,f=null,x=null){return new DI(i,e,n,a,u,f,x)}function og(i){const e=pt(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((a=>T1(a))).join(","),n+="|ob:",n+=e.orderBy.map((a=>(function(f){return f.field.canonicalString()+f.dir})(a))).join(","),Of(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((a=>ec(a))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((a=>ec(a))).join(",")),e.Te=n}return e.Te}function lg(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!TI(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!W_(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Ux(i.startAt,e.startAt)&&Ux(i.endAt,e.endAt)}function b1(i){return tt.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,n=null,a=[],u=[],f=null,x="F",b=null,T=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=a,this.filters=u,this.limit=f,this.limitType=x,this.startAt=b,this.endAt=T,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function MI(i,e,n,a,u,f,x,b){return new Mf(i,e,n,a,u,f,x,b)}function Lf(i){return new Mf(i)}function jx(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function LI(i){return i.collectionGroup!==null}function iu(i){const e=pt(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const f of e.explicitOrderBy)e.Ie.push(f),n.add(f.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(x){let b=new Ai(zi.comparator);return x.filters.forEach((T=>{T.getFlattenedFilters().forEach((E=>{E.isInequality()&&(b=b.add(E.field))}))})),b})(e).forEach((f=>{n.has(f.canonicalString())||f.isKeyField()||e.Ie.push(new df(f,a))})),n.has(zi.keyField().canonicalString())||e.Ie.push(new df(zi.keyField(),a))}return e.Ie}function Fs(i){const e=pt(i);return e.Ee||(e.Ee=BI(e,iu(i))),e.Ee}function BI(i,e){if(i.limitType==="F")return Vx(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((u=>{const f=u.dir==="desc"?"asc":"desc";return new df(u.field,f)}));const n=i.endAt?new ff(i.endAt.position,i.endAt.inclusive):null,a=i.startAt?new ff(i.startAt.position,i.startAt.inclusive):null;return Vx(i.path,i.collectionGroup,e,i.filters,i.limit,n,a)}}function S1(i,e,n){return new Mf(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Bf(i,e){return lg(Fs(i),Fs(e))&&i.limitType===e.limitType}function J_(i){return`${og(Fs(i))}|lt:${i.limitType}`}function jl(i){return`Query(target=${(function(n){let a=n.path.canonicalString();return n.collectionGroup!==null&&(a+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(a+=`, filters: [${n.filters.map((u=>K_(u))).join(", ")}]`),Of(n.limit)||(a+=", limit: "+n.limit),n.orderBy.length>0&&(a+=`, orderBy: [${n.orderBy.map((u=>(function(x){return`${x.field.canonicalString()} (${x.dir})`})(u))).join(", ")}]`),n.startAt&&(a+=", startAt: ",a+=n.startAt.inclusive?"b:":"a:",a+=n.startAt.position.map((u=>ec(u))).join(",")),n.endAt&&(a+=", endAt: ",a+=n.endAt.inclusive?"a:":"b:",a+=n.endAt.position.map((u=>ec(u))).join(",")),`Target(${a})`})(Fs(i))}; limitType=${i.limitType})`}function Pf(i,e){return e.isFoundDocument()&&(function(a,u){const f=u.key.path;return a.collectionGroup!==null?u.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(f):tt.isDocumentKey(a.path)?a.path.isEqual(f):a.path.isImmediateParentOf(f)})(i,e)&&(function(a,u){for(const f of iu(a))if(!f.field.isKeyField()&&u.data.field(f.field)===null)return!1;return!0})(i,e)&&(function(a,u){for(const f of a.filters)if(!f.matches(u))return!1;return!0})(i,e)&&(function(a,u){return!(a.startAt&&!(function(x,b,T){const E=kx(x,b,T);return x.inclusive?E<=0:E<0})(a.startAt,iu(a),u)||a.endAt&&!(function(x,b,T){const E=kx(x,b,T);return x.inclusive?E>=0:E>0})(a.endAt,iu(a),u))})(i,e)}function PI(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function $_(i){return(e,n)=>{let a=!1;for(const u of iu(i)){const f=kI(u,e,n);if(f!==0)return f;a=a||u.field.isKeyField()}return 0}}function kI(i,e,n){const a=i.field.isKeyField()?tt.comparator(e.key,n.key):(function(f,x,b){const T=x.data.field(f),E=b.data.field(f);return T!==null&&E!==null?$l(T,E):ot(42886)})(i.field,e,n);switch(i.dir){case"asc":return a;case"desc":return-1*a;default:return ot(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a!==void 0){for(const[u,f]of a)if(this.equalsFn(u,e))return f}}has(e){return this.get(e)!==void 0}set(e,n){const a=this.mapKeyFn(e),u=this.inner[a];if(u===void 0)return this.inner[a]=[[e,n]],void this.innerSize++;for(let f=0;f<u.length;f++)if(this.equalsFn(u[f][0],e))return void(u[f]=[e,n]);u.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return!1;for(let u=0;u<a.length;u++)if(this.equalsFn(a[u][0],e))return a.length===1?delete this.inner[n]:a.splice(u,1),this.innerSize--,!0;return!1}forEach(e){bo(this.inner,((n,a)=>{for(const[u,f]of a)e(u,f)}))}isEmpty(){return k_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI=new Yn(tt.comparator);function Ia(){return UI}const eA=new Yn(tt.comparator);function Kc(...i){let e=eA;for(const n of i)e=e.insert(n.key,n);return e}function tA(i){let e=eA;return i.forEach(((n,a)=>e=e.insert(n,a.overlayedDocument))),e}function Zo(){return ru()}function nA(){return ru()}function ru(){return new sl((i=>i.toString()),((i,e)=>i.isEqual(e)))}const VI=new Yn(tt.comparator),jI=new Ai(tt.comparator);function Ft(...i){let e=jI;for(const n of i)e=e.add(n);return e}const FI=new Ai(jt);function zI(){return FI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cg(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cf(e)?"-0":e}}function iA(i){return{integerValue:""+i}}function HI(i,e){return mI(e)?iA(e):cg(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(){this._=void 0}}function GI(i,e,n){return i instanceof gf?(function(u,f){const x={fields:{[j_]:{stringValue:V_},[z_]:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return f&&sg(f)&&(f=Df(f)),f&&(x.fields[F_]=f),{mapValue:x}})(n,e):i instanceof gu?sA(i,e):i instanceof mu?aA(i,e):(function(u,f){const x=rA(u,f),b=Fx(x)+Fx(u.Ae);return w1(x)&&w1(u.Ae)?iA(b):cg(u.serializer,b)})(i,e)}function YI(i,e,n){return i instanceof gu?sA(i,e):i instanceof mu?aA(i,e):n}function rA(i,e){return i instanceof mf?(function(a){return w1(a)||(function(f){return!!f&&"doubleValue"in f})(a)})(e)?e:{integerValue:0}:null}class gf extends kf{}class gu extends kf{constructor(e){super(),this.elements=e}}function sA(i,e){const n=oA(e);for(const a of i.elements)n.some((u=>Ys(u,a)))||n.push(a);return{arrayValue:{values:n}}}class mu extends kf{constructor(e){super(),this.elements=e}}function aA(i,e){let n=oA(e);for(const a of i.elements)n=n.filter((u=>!Ys(u,a)));return{arrayValue:{values:n}}}class mf extends kf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Fx(i){return ri(i.integerValue||i.doubleValue)}function oA(i){return ag(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function XI(i,e){return i.field.isEqual(e.field)&&(function(a,u){return a instanceof gu&&u instanceof gu||a instanceof mu&&u instanceof mu?Jl(a.elements,u.elements,Ys):a instanceof mf&&u instanceof mf?Ys(a.Ae,u.Ae):a instanceof gf&&u instanceof gf})(i.transform,e.transform)}class qI{constructor(e,n){this.version=e,this.transformResults=n}}class Nr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Nr}static exists(e){return new Nr(void 0,e)}static updateTime(e){return new Nr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Uf{}function lA(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Vf(i.key,Nr.none()):new _u(i.key,i.data,Nr.none());{const n=i.data,a=vr.empty();let u=new Ai(zi.comparator);for(let f of e.fields)if(!u.has(f)){let x=n.field(f);x===null&&f.length>1&&(f=f.popLast(),x=n.field(f)),x===null?a.delete(f):a.set(f,x),u=u.add(f)}return new So(i.key,a,new Xr(u.toArray()),Nr.none())}}function QI(i,e,n){i instanceof _u?(function(u,f,x){const b=u.value.clone(),T=Hx(u.fieldTransforms,f,x.transformResults);b.setAll(T),f.convertToFoundDocument(x.version,b).setHasCommittedMutations()})(i,e,n):i instanceof So?(function(u,f,x){if(!Wh(u.precondition,f))return void f.convertToUnknownDocument(x.version);const b=Hx(u.fieldTransforms,f,x.transformResults),T=f.data;T.setAll(cA(u)),T.setAll(b),f.convertToFoundDocument(x.version,T).setHasCommittedMutations()})(i,e,n):(function(u,f,x){f.convertToNoDocument(x.version).setHasCommittedMutations()})(0,e,n)}function su(i,e,n,a){return i instanceof _u?(function(f,x,b,T){if(!Wh(f.precondition,x))return b;const E=f.value.clone(),C=Gx(f.fieldTransforms,T,x);return E.setAll(C),x.convertToFoundDocument(x.version,E).setHasLocalMutations(),null})(i,e,n,a):i instanceof So?(function(f,x,b,T){if(!Wh(f.precondition,x))return b;const E=Gx(f.fieldTransforms,T,x),C=x.data;return C.setAll(cA(f)),C.setAll(E),x.convertToFoundDocument(x.version,C).setHasLocalMutations(),b===null?null:b.unionWith(f.fieldMask.fields).unionWith(f.fieldTransforms.map((I=>I.field)))})(i,e,n,a):(function(f,x,b){return Wh(f.precondition,x)?(x.convertToNoDocument(x.version).setHasLocalMutations(),null):b})(i,e,n)}function WI(i,e){let n=null;for(const a of i.fieldTransforms){const u=e.data.field(a.field),f=rA(a.transform,u||null);f!=null&&(n===null&&(n=vr.empty()),n.set(a.field,f))}return n||null}function zx(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(a,u){return a===void 0&&u===void 0||!(!a||!u)&&Jl(a,u,((f,x)=>XI(f,x)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class _u extends Uf{constructor(e,n,a,u=[]){super(),this.key=e,this.value=n,this.precondition=a,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class So extends Uf{constructor(e,n,a,u,f=[]){super(),this.key=e,this.data=n,this.fieldMask=a,this.precondition=u,this.fieldTransforms=f,this.type=1}getFieldMask(){return this.fieldMask}}function cA(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const a=i.data.field(n);e.set(n,a)}})),e}function Hx(i,e,n){const a=new Map;un(i.length===n.length,32656,{Re:n.length,Ve:i.length});for(let u=0;u<n.length;u++){const f=i[u],x=f.transform,b=e.data.field(f.field);a.set(f.field,YI(x,b,n[u]))}return a}function Gx(i,e,n){const a=new Map;for(const u of i){const f=u.transform,x=n.data.field(u.field);a.set(u.field,GI(f,x,e))}return a}class Vf extends Uf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class KI extends Uf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e,n,a,u){this.batchId=e,this.localWriteTime=n,this.baseMutations=a,this.mutations=u}applyToRemoteDocument(e,n){const a=n.mutationResults;for(let u=0;u<this.mutations.length;u++){const f=this.mutations[u];f.key.isEqual(e.key)&&QI(f,e,a[u])}}applyToLocalView(e,n){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(n=su(a,e,n,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(n=su(a,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const a=nA();return this.mutations.forEach((u=>{const f=e.get(u.key),x=f.overlayedDocument;let b=this.applyToLocalView(x,f.mutatedFields);b=n.has(u.key)?null:b;const T=lA(x,b);T!==null&&a.set(u.key,T),x.isValidDocument()||x.convertToNoDocument(ht.min())})),a}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ft())}isEqual(e){return this.batchId===e.batchId&&Jl(this.mutations,e.mutations,((n,a)=>zx(n,a)))&&Jl(this.baseMutations,e.baseMutations,((n,a)=>zx(n,a)))}}class ug{constructor(e,n,a,u){this.batch=e,this.commitVersion=n,this.mutationResults=a,this.docVersions=u}static from(e,n,a){un(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let u=(function(){return VI})();const f=e.mutations;for(let x=0;x<f.length;x++)u=u.insert(f[x].key,a[x].version);return new ug(e,n,a,u)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var di,Kt;function e4(i){switch(i){case Ne.OK:return ot(64938);case Ne.CANCELLED:case Ne.UNKNOWN:case Ne.DEADLINE_EXCEEDED:case Ne.RESOURCE_EXHAUSTED:case Ne.INTERNAL:case Ne.UNAVAILABLE:case Ne.UNAUTHENTICATED:return!1;case Ne.INVALID_ARGUMENT:case Ne.NOT_FOUND:case Ne.ALREADY_EXISTS:case Ne.PERMISSION_DENIED:case Ne.FAILED_PRECONDITION:case Ne.ABORTED:case Ne.OUT_OF_RANGE:case Ne.UNIMPLEMENTED:case Ne.DATA_LOSS:return!0;default:return ot(15467,{code:i})}}function uA(i){if(i===void 0)return va("GRPC error has no .code"),Ne.UNKNOWN;switch(i){case di.OK:return Ne.OK;case di.CANCELLED:return Ne.CANCELLED;case di.UNKNOWN:return Ne.UNKNOWN;case di.DEADLINE_EXCEEDED:return Ne.DEADLINE_EXCEEDED;case di.RESOURCE_EXHAUSTED:return Ne.RESOURCE_EXHAUSTED;case di.INTERNAL:return Ne.INTERNAL;case di.UNAVAILABLE:return Ne.UNAVAILABLE;case di.UNAUTHENTICATED:return Ne.UNAUTHENTICATED;case di.INVALID_ARGUMENT:return Ne.INVALID_ARGUMENT;case di.NOT_FOUND:return Ne.NOT_FOUND;case di.ALREADY_EXISTS:return Ne.ALREADY_EXISTS;case di.PERMISSION_DENIED:return Ne.PERMISSION_DENIED;case di.FAILED_PRECONDITION:return Ne.FAILED_PRECONDITION;case di.ABORTED:return Ne.ABORTED;case di.OUT_OF_RANGE:return Ne.OUT_OF_RANGE;case di.UNIMPLEMENTED:return Ne.UNIMPLEMENTED;case di.DATA_LOSS:return Ne.DATA_LOSS;default:return ot(39323,{code:i})}}(Kt=di||(di={}))[Kt.OK=0]="OK",Kt[Kt.CANCELLED=1]="CANCELLED",Kt[Kt.UNKNOWN=2]="UNKNOWN",Kt[Kt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Kt[Kt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Kt[Kt.NOT_FOUND=5]="NOT_FOUND",Kt[Kt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Kt[Kt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Kt[Kt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Kt[Kt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Kt[Kt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Kt[Kt.ABORTED=10]="ABORTED",Kt[Kt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Kt[Kt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Kt[Kt.INTERNAL=13]="INTERNAL",Kt[Kt.UNAVAILABLE=14]="UNAVAILABLE",Kt[Kt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4=new fo([4294967295,4294967295],0);function Yx(i){const e=t4().encode(i),n=new C_;return n.update(e),new Uint8Array(n.digest())}function Xx(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),a=e.getUint32(4,!0),u=e.getUint32(8,!0),f=e.getUint32(12,!0);return[new fo([n,a],0),new fo([u,f],0)]}class hg{constructor(e,n,a){if(this.bitmap=e,this.padding=n,this.hashCount=a,n<0||n>=8)throw new Zc(`Invalid padding: ${n}`);if(a<0)throw new Zc(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new Zc(`Invalid hash count: ${a}`);if(e.length===0&&n!==0)throw new Zc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=fo.fromNumber(this.ge)}ye(e,n,a){let u=e.add(n.multiply(fo.fromNumber(a)));return u.compare(n4)===1&&(u=new fo([u.getBits(0),u.getBits(1)],0)),u.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Yx(e),[a,u]=Xx(n);for(let f=0;f<this.hashCount;f++){const x=this.ye(a,u,f);if(!this.we(x))return!1}return!0}static create(e,n,a){const u=e%8==0?0:8-e%8,f=new Uint8Array(Math.ceil(e/8)),x=new hg(f,u,n);return a.forEach((b=>x.insert(b))),x}insert(e){if(this.ge===0)return;const n=Yx(e),[a,u]=Xx(n);for(let f=0;f<this.hashCount;f++){const x=this.ye(a,u,f);this.Se(x)}}Se(e){const n=Math.floor(e/8),a=e%8;this.bitmap[n]|=1<<a}}class Zc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e,n,a,u,f){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=a,this.documentUpdates=u,this.resolvedLimboDocuments=f}static createSynthesizedRemoteEventForCurrentChange(e,n,a){const u=new Map;return u.set(e,Au.createSynthesizedTargetChangeForCurrentChange(e,n,a)),new jf(ht.min(),u,new Yn(jt),Ia(),Ft())}}class Au{constructor(e,n,a,u,f){this.resumeToken=e,this.current=n,this.addedDocuments=a,this.modifiedDocuments=u,this.removedDocuments=f}static createSynthesizedTargetChangeForCurrentChange(e,n,a){return new Au(a,n,Ft(),Ft(),Ft())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,n,a,u){this.be=e,this.removedTargetIds=n,this.key=a,this.De=u}}class hA{constructor(e,n){this.targetId=e,this.Ce=n}}class fA{constructor(e,n,a=Hi.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=n,this.resumeToken=a,this.cause=u}}class qx{constructor(){this.ve=0,this.Fe=Qx(),this.Me=Hi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ft(),n=Ft(),a=Ft();return this.Fe.forEach(((u,f)=>{switch(f){case 0:e=e.add(u);break;case 2:n=n.add(u);break;case 1:a=a.add(u);break;default:ot(38017,{changeType:f})}})),new Au(this.Me,this.xe,e,n,a)}qe(){this.Oe=!1,this.Fe=Qx()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,un(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class i4{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ia(),this.Je=Ph(),this.He=Ph(),this.Ye=new Yn(jt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const a=this.nt(n);switch(e.state){case 0:this.rt(n)&&a.Le(e.resumeToken);break;case 1:a.Ke(),a.Ne||a.qe(),a.Le(e.resumeToken);break;case 2:a.Ke(),a.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(a.We(),a.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),a.Le(e.resumeToken));break;default:ot(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((a,u)=>{this.rt(u)&&n(u)}))}st(e){const n=e.targetId,a=e.Ce.count,u=this.ot(n);if(u){const f=u.target;if(b1(f))if(a===0){const x=new tt(f.path);this.et(n,x,ir.newNoDocument(x,ht.min()))}else un(a===1,20013,{expectedCount:a});else{const x=this._t(n);if(x!==a){const b=this.ut(e),T=b?this.ct(b,e,x):1;if(T!==0){this.it(n);const E=T===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,E)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:a="",padding:u=0},hashCount:f=0}=n;let x,b;try{x=xo(a).toUint8Array()}catch(T){if(T instanceof U_)return Zl("Decoding the base64 bloom filter in existence filter failed ("+T.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw T}try{b=new hg(x,u,f)}catch(T){return Zl(T instanceof Zc?"BloomFilter error: ":"Applying bloom filter failed: ",T),null}return b.ge===0?null:b}ct(e,n,a){return n.Ce.count===a-this.Pt(e,n.targetId)?0:2}Pt(e,n){const a=this.Ge.getRemoteKeysForTarget(n);let u=0;return a.forEach((f=>{const x=this.Ge.ht(),b=`projects/${x.projectId}/databases/${x.database}/documents/${f.path.canonicalString()}`;e.mightContain(b)||(this.et(n,f,null),u++)})),u}Tt(e){const n=new Map;this.ze.forEach(((f,x)=>{const b=this.ot(x);if(b){if(f.current&&b1(b.target)){const T=new tt(b.target.path);this.It(T).has(x)||this.Et(x,T)||this.et(x,T,ir.newNoDocument(T,e))}f.Be&&(n.set(x,f.ke()),f.qe())}}));let a=Ft();this.He.forEach(((f,x)=>{let b=!0;x.forEachWhile((T=>{const E=this.ot(T);return!E||E.purpose==="TargetPurposeLimboResolution"||(b=!1,!1)})),b&&(a=a.add(f))})),this.je.forEach(((f,x)=>x.setReadTime(e)));const u=new jf(e,n,this.Ye,this.je,a);return this.je=Ia(),this.Je=Ph(),this.He=Ph(),this.Ye=new Yn(jt),u}Xe(e,n){if(!this.rt(e))return;const a=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,a),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,a){if(!this.rt(e))return;const u=this.nt(e);this.Et(e,n)?u.Qe(n,1):u.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),a&&(this.je=this.je.insert(n,a))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new qx,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ai(jt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ai(jt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ze("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new qx),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ph(){return new Yn(tt.comparator)}function Qx(){return new Yn(tt.comparator)}const r4={asc:"ASCENDING",desc:"DESCENDING"},s4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},a4={and:"AND",or:"OR"};class o4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function C1(i,e){return i.useProto3Json||Of(e)?e:{value:e}}function pf(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dA(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function l4(i,e){return pf(i,e.toTimestamp())}function zs(i){return un(!!i,49232),ht.fromTimestamp((function(n){const a=po(n);return new On(a.seconds,a.nanos)})(i))}function fg(i,e){return v1(i,e).canonicalString()}function v1(i,e){const n=(function(u){return new Rn(["projects",u.projectId,"databases",u.database])})(i).child("documents");return e===void 0?n:n.child(e)}function gA(i){const e=Rn.fromString(i);return un(EA(e),10190,{key:e.toString()}),e}function I1(i,e){return fg(i.databaseId,e.path)}function t1(i,e){const n=gA(e);if(n.get(1)!==i.databaseId.projectId)throw new qe(Ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new qe(Ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new tt(pA(n))}function mA(i,e){return fg(i.databaseId,e)}function c4(i){const e=gA(i);return e.length===4?Rn.emptyPath():pA(e)}function N1(i){return new Rn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function pA(i){return un(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function Wx(i,e,n){return{name:I1(i,e),fields:n.value.mapValue.fields}}function u4(i,e){let n;if("targetChange"in e){e.targetChange;const a=(function(E){return E==="NO_CHANGE"?0:E==="ADD"?1:E==="REMOVE"?2:E==="CURRENT"?3:E==="RESET"?4:ot(39313,{state:E})})(e.targetChange.targetChangeType||"NO_CHANGE"),u=e.targetChange.targetIds||[],f=(function(E,C){return E.useProto3Json?(un(C===void 0||typeof C=="string",58123),Hi.fromBase64String(C||"")):(un(C===void 0||C instanceof Buffer||C instanceof Uint8Array,16193),Hi.fromUint8Array(C||new Uint8Array))})(i,e.targetChange.resumeToken),x=e.targetChange.cause,b=x&&(function(E){const C=E.code===void 0?Ne.UNKNOWN:uA(E.code);return new qe(C,E.message||"")})(x);n=new fA(a,u,f,b||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const u=t1(i,a.document.name),f=zs(a.document.updateTime),x=a.document.createTime?zs(a.document.createTime):ht.min(),b=new vr({mapValue:{fields:a.document.fields}}),T=ir.newFoundDocument(u,f,x,b),E=a.targetIds||[],C=a.removedTargetIds||[];n=new Kh(E,C,T.key,T)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const u=t1(i,a.document),f=a.readTime?zs(a.readTime):ht.min(),x=ir.newNoDocument(u,f),b=a.removedTargetIds||[];n=new Kh([],b,x.key,x)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const u=t1(i,a.document),f=a.removedTargetIds||[];n=new Kh([],f,u,null)}else{if(!("filter"in e))return ot(11601,{Rt:e});{e.filter;const a=e.filter;a.targetId;const{count:u=0,unchangedNames:f}=a,x=new $I(u,f),b=a.targetId;n=new hA(b,x)}}return n}function h4(i,e){let n;if(e instanceof _u)n={update:Wx(i,e.key,e.value)};else if(e instanceof Vf)n={delete:I1(i,e.key)};else if(e instanceof So)n={update:Wx(i,e.key,e.data),updateMask:_4(e.fieldMask)};else{if(!(e instanceof KI))return ot(16599,{Vt:e.type});n={verify:I1(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((a=>(function(f,x){const b=x.transform;if(b instanceof gf)return{fieldPath:x.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(b instanceof gu)return{fieldPath:x.field.canonicalString(),appendMissingElements:{values:b.elements}};if(b instanceof mu)return{fieldPath:x.field.canonicalString(),removeAllFromArray:{values:b.elements}};if(b instanceof mf)return{fieldPath:x.field.canonicalString(),increment:b.Ae};throw ot(20930,{transform:x.transform})})(0,a)))),e.precondition.isNone||(n.currentDocument=(function(u,f){return f.updateTime!==void 0?{updateTime:l4(u,f.updateTime)}:f.exists!==void 0?{exists:f.exists}:ot(27497)})(i,e.precondition)),n}function f4(i,e){return i&&i.length>0?(un(e!==void 0,14353),i.map((n=>(function(u,f){let x=u.updateTime?zs(u.updateTime):zs(f);return x.isEqual(ht.min())&&(x=zs(f)),new qI(x,u.transformResults||[])})(n,e)))):[]}function d4(i,e){return{documents:[mA(i,e.path)]}}function g4(i,e){const n={structuredQuery:{}},a=e.path;let u;e.collectionGroup!==null?(u=a,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(u=a.popLast(),n.structuredQuery.from=[{collectionId:a.lastSegment()}]),n.parent=mA(i,u);const f=(function(E){if(E.length!==0)return yA(Xs.create(E,"and"))})(e.filters);f&&(n.structuredQuery.where=f);const x=(function(E){if(E.length!==0)return E.map((C=>(function(M){return{field:Fl(M.field),direction:x4(M.dir)}})(C)))})(e.orderBy);x&&(n.structuredQuery.orderBy=x);const b=C1(i,e.limit);return b!==null&&(n.structuredQuery.limit=b),e.startAt&&(n.structuredQuery.startAt=(function(E){return{before:E.inclusive,values:E.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(E){return{before:!E.inclusive,values:E.position}})(e.endAt)),{ft:n,parent:u}}function m4(i){let e=c4(i.parent);const n=i.structuredQuery,a=n.from?n.from.length:0;let u=null;if(a>0){un(a===1,65062);const C=n.from[0];C.allDescendants?u=C.collectionId:e=e.child(C.collectionId)}let f=[];n.where&&(f=(function(I){const M=xA(I);return M instanceof Xs&&Q_(M)?M.getFilters():[M]})(n.where));let x=[];n.orderBy&&(x=(function(I){return I.map((M=>(function(q){return new df(zl(q.field),(function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(q.direction))})(M)))})(n.orderBy));let b=null;n.limit&&(b=(function(I){let M;return M=typeof I=="object"?I.value:I,Of(M)?null:M})(n.limit));let T=null;n.startAt&&(T=(function(I){const M=!!I.before,k=I.values||[];return new ff(k,M)})(n.startAt));let E=null;return n.endAt&&(E=(function(I){const M=!I.before,k=I.values||[];return new ff(k,M)})(n.endAt)),MI(e,u,x,f,b,"F",T,E)}function p4(i,e){const n=(function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ot(28987,{purpose:u})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function xA(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const a=zl(n.unaryFilter.field);return _i.create(a,"==",{doubleValue:NaN});case"IS_NULL":const u=zl(n.unaryFilter.field);return _i.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const f=zl(n.unaryFilter.field);return _i.create(f,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const x=zl(n.unaryFilter.field);return _i.create(x,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ot(61313);default:return ot(60726)}})(i):i.fieldFilter!==void 0?(function(n){return _i.create(zl(n.fieldFilter.field),(function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ot(58110);default:return ot(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return Xs.create(n.compositeFilter.filters.map((a=>xA(a))),(function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return ot(1026)}})(n.compositeFilter.op))})(i):ot(30097,{filter:i})}function x4(i){return r4[i]}function y4(i){return s4[i]}function E4(i){return a4[i]}function Fl(i){return{fieldPath:i.canonicalString()}}function zl(i){return zi.fromServerFormat(i.fieldPath)}function yA(i){return i instanceof _i?(function(n){if(n.op==="=="){if(Px(n.value))return{unaryFilter:{field:Fl(n.field),op:"IS_NAN"}};if(Bx(n.value))return{unaryFilter:{field:Fl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Px(n.value))return{unaryFilter:{field:Fl(n.field),op:"IS_NOT_NAN"}};if(Bx(n.value))return{unaryFilter:{field:Fl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fl(n.field),op:y4(n.op),value:n.value}}})(i):i instanceof Xs?(function(n){const a=n.getFilters().map((u=>yA(u)));return a.length===1?a[0]:{compositeFilter:{op:E4(n.op),filters:a}}})(i):ot(54877,{filter:i})}function _4(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function EA(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,n,a,u,f=ht.min(),x=ht.min(),b=Hi.EMPTY_BYTE_STRING,T=null){this.target=e,this.targetId=n,this.purpose=a,this.sequenceNumber=u,this.snapshotVersion=f,this.lastLimboFreeSnapshotVersion=x,this.resumeToken=b,this.expectedCount=T}withSequenceNumber(e){return new co(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new co(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new co(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new co(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(e){this.yt=e}}function w4(i){const e=m4({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?S1(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(){this.Cn=new b4}addToCollectionParentIndex(e,n){return this.Cn.add(n),Ie.resolve()}getCollectionParents(e,n){return Ie.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Ie.resolve()}deleteFieldIndex(e,n){return Ie.resolve()}deleteAllFieldIndexes(e){return Ie.resolve()}createTargetIndexes(e,n){return Ie.resolve()}getDocumentsMatchingTarget(e,n){return Ie.resolve(null)}getIndexType(e,n){return Ie.resolve(0)}getFieldIndexes(e,n){return Ie.resolve([])}getNextCollectionGroupToUpdate(e){return Ie.resolve(null)}getMinOffset(e,n){return Ie.resolve(mo.min())}getMinOffsetFromCollectionGroup(e,n){return Ie.resolve(mo.min())}updateCollectionGroup(e,n,a){return Ie.resolve()}updateIndexEntries(e,n){return Ie.resolve()}}class b4{constructor(){this.index={}}add(e){const n=e.lastSegment(),a=e.popLast(),u=this.index[n]||new Ai(Rn.comparator),f=!u.has(a);return this.index[n]=u.add(a),f}has(e){const n=e.lastSegment(),a=e.popLast(),u=this.index[n];return u&&u.has(a)}getEntries(e){return(this.index[e]||new Ai(Rn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_A=41943040;class Cr{static withCacheSize(e){return new Cr(e,Cr.DEFAULT_COLLECTION_PERCENTILE,Cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cr.DEFAULT_COLLECTION_PERCENTILE=10,Cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cr.DEFAULT=new Cr(_A,Cr.DEFAULT_COLLECTION_PERCENTILE,Cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cr.DISABLED=new Cr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new tc(0)}static cr(){return new tc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx="LruGarbageCollector",S4=1048576;function Jx([i,e],[n,a]){const u=jt(i,n);return u===0?jt(e,a):u}class C4{constructor(e){this.Ir=e,this.buffer=new Ai(Jx),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const a=this.buffer.last();Jx(n,a)<0&&(this.buffer=this.buffer.delete(a).add(n))}}get maxValue(){return this.buffer.last()[0]}}class v4{constructor(e,n,a){this.garbageCollector=e,this.asyncQueue=n,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ze(Zx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){oc(n)?ze(Zx,"Ignoring IndexedDB error during garbage collection: ",n):await ac(n)}await this.Vr(3e5)}))}}class I4{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((a=>Math.floor(n/100*a)))}nthSequenceNumber(e,n){if(n===0)return Ie.resolve(Rf.ce);const a=new C4(n);return this.mr.forEachTarget(e,(u=>a.Ar(u.sequenceNumber))).next((()=>this.mr.pr(e,(u=>a.Ar(u))))).next((()=>a.maxValue))}removeTargets(e,n,a){return this.mr.removeTargets(e,n,a)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ze("LruGarbageCollector","Garbage collection skipped; disabled"),Ie.resolve(Kx)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Kx):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let a,u,f,x,b,T,E;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((I=>(I>this.params.maximumSequenceNumbersToCollect?(ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),u=this.params.maximumSequenceNumbersToCollect):u=I,x=Date.now(),this.nthSequenceNumber(e,u)))).next((I=>(a=I,b=Date.now(),this.removeTargets(e,a,n)))).next((I=>(f=I,T=Date.now(),this.removeOrphanedDocuments(e,a)))).next((I=>(E=Date.now(),Vl()<=Zt.DEBUG&&ze("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${x-C}ms
	Determined least recently used ${u} in `+(b-x)+`ms
	Removed ${f} targets in `+(T-b)+`ms
	Removed ${I} documents in `+(E-T)+`ms
Total Duration: ${E-C}ms`),Ie.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:f,documentsRemoved:I}))))}}function N4(i,e){return new I4(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(){this.changes=new sl((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ir.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const a=this.changes.get(n);return a!==void 0?Ie.resolve(a):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(e,n,a,u){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=a,this.indexManager=u}getDocument(e,n){let a=null;return this.documentOverlayCache.getOverlay(e,n).next((u=>(a=u,this.remoteDocumentCache.getEntry(e,n)))).next((u=>(a!==null&&su(a.mutation,u,Xr.empty(),On.now()),u)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((a=>this.getLocalViewOfDocuments(e,a,Ft()).next((()=>a))))}getLocalViewOfDocuments(e,n,a=Ft()){const u=Zo();return this.populateOverlays(e,u,n).next((()=>this.computeViews(e,n,u,a).next((f=>{let x=Kc();return f.forEach(((b,T)=>{x=x.insert(b,T.overlayedDocument)})),x}))))}getOverlayedDocuments(e,n){const a=Zo();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,Ft())))}populateOverlays(e,n,a){const u=[];return a.forEach((f=>{n.has(f)||u.push(f)})),this.documentOverlayCache.getOverlays(e,u).next((f=>{f.forEach(((x,b)=>{n.set(x,b)}))}))}computeViews(e,n,a,u){let f=Ia();const x=ru(),b=(function(){return ru()})();return n.forEach(((T,E)=>{const C=a.get(E.key);u.has(E.key)&&(C===void 0||C.mutation instanceof So)?f=f.insert(E.key,E):C!==void 0?(x.set(E.key,C.mutation.getFieldMask()),su(C.mutation,E,C.mutation.getFieldMask(),On.now())):x.set(E.key,Xr.empty())})),this.recalculateAndSaveOverlays(e,f).next((T=>(T.forEach(((E,C)=>x.set(E,C))),n.forEach(((E,C)=>b.set(E,new O4(C,x.get(E)??null)))),b)))}recalculateAndSaveOverlays(e,n){const a=ru();let u=new Yn(((x,b)=>x-b)),f=Ft();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((x=>{for(const b of x)b.keys().forEach((T=>{const E=n.get(T);if(E===null)return;let C=a.get(T)||Xr.empty();C=b.applyToLocalView(E,C),a.set(T,C);const I=(u.get(b.batchId)||Ft()).add(T);u=u.insert(b.batchId,I)}))})).next((()=>{const x=[],b=u.getReverseIterator();for(;b.hasNext();){const T=b.getNext(),E=T.key,C=T.value,I=nA();C.forEach((M=>{if(!f.has(M)){const k=lA(n.get(M),a.get(M));k!==null&&I.set(M,k),f=f.add(M)}})),x.push(this.documentOverlayCache.saveOverlays(e,E,I))}return Ie.waitFor(x)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,n,a,u){return(function(x){return tt.isDocumentKey(x.path)&&x.collectionGroup===null&&x.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):LI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,a,u):this.getDocumentsMatchingCollectionQuery(e,n,a,u)}getNextDocuments(e,n,a,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,a,u).next((f=>{const x=u-f.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,a.largestBatchId,u-f.size):Ie.resolve(Zo());let b=uu,T=f;return x.next((E=>Ie.forEach(E,((C,I)=>(b<I.largestBatchId&&(b=I.largestBatchId),f.get(C)?Ie.resolve():this.remoteDocumentCache.getEntry(e,C).next((M=>{T=T.insert(C,M)}))))).next((()=>this.populateOverlays(e,E,f))).next((()=>this.computeViews(e,T,E,Ft()))).next((C=>({batchId:b,changes:tA(C)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new tt(n)).next((a=>{let u=Kc();return a.isFoundDocument()&&(u=u.insert(a.key,a)),u}))}getDocumentsMatchingCollectionGroupQuery(e,n,a,u){const f=n.collectionGroup;let x=Kc();return this.indexManager.getCollectionParents(e,f).next((b=>Ie.forEach(b,(T=>{const E=(function(I,M){return new Mf(M,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)})(n,T.child(f));return this.getDocumentsMatchingCollectionQuery(e,E,a,u).next((C=>{C.forEach(((I,M)=>{x=x.insert(I,M)}))}))})).next((()=>x))))}getDocumentsMatchingCollectionQuery(e,n,a,u){let f;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,a.largestBatchId).next((x=>(f=x,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,a,f,u)))).next((x=>{f.forEach(((T,E)=>{const C=E.getKey();x.get(C)===null&&(x=x.insert(C,ir.newInvalidDocument(C)))}));let b=Kc();return x.forEach(((T,E)=>{const C=f.get(T);C!==void 0&&su(C.mutation,E,Xr.empty(),On.now()),Pf(n,E)&&(b=b.insert(T,E))})),b}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Ie.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(u){return{id:u.id,version:u.version,createTime:zs(u.createTime)}})(n)),Ie.resolve()}getNamedQuery(e,n){return Ie.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(u){return{name:u.name,query:w4(u.bundledQuery),readTime:zs(u.readTime)}})(n)),Ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(){this.overlays=new Yn(tt.comparator),this.qr=new Map}getOverlay(e,n){return Ie.resolve(this.overlays.get(n))}getOverlays(e,n){const a=Zo();return Ie.forEach(n,(u=>this.getOverlay(e,u).next((f=>{f!==null&&a.set(u,f)})))).next((()=>a))}saveOverlays(e,n,a){return a.forEach(((u,f)=>{this.St(e,n,f)})),Ie.resolve()}removeOverlaysForBatchId(e,n,a){const u=this.qr.get(a);return u!==void 0&&(u.forEach((f=>this.overlays=this.overlays.remove(f))),this.qr.delete(a)),Ie.resolve()}getOverlaysForCollection(e,n,a){const u=Zo(),f=n.length+1,x=new tt(n.child("")),b=this.overlays.getIteratorFrom(x);for(;b.hasNext();){const T=b.getNext().value,E=T.getKey();if(!n.isPrefixOf(E.path))break;E.path.length===f&&T.largestBatchId>a&&u.set(T.getKey(),T)}return Ie.resolve(u)}getOverlaysForCollectionGroup(e,n,a,u){let f=new Yn(((E,C)=>E-C));const x=this.overlays.getIterator();for(;x.hasNext();){const E=x.getNext().value;if(E.getKey().getCollectionGroup()===n&&E.largestBatchId>a){let C=f.get(E.largestBatchId);C===null&&(C=Zo(),f=f.insert(E.largestBatchId,C)),C.set(E.getKey(),E)}}const b=Zo(),T=f.getIterator();for(;T.hasNext()&&(T.getNext().value.forEach(((E,C)=>b.set(E,C))),!(b.size()>=u)););return Ie.resolve(b)}St(e,n,a){const u=this.overlays.get(a.key);if(u!==null){const x=this.qr.get(u.largestBatchId).delete(a.key);this.qr.set(u.largestBatchId,x)}this.overlays=this.overlays.insert(a.key,new JI(n,a));let f=this.qr.get(n);f===void 0&&(f=Ft(),this.qr.set(n,f)),this.qr.set(n,f.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(){this.sessionToken=Hi.EMPTY_BYTE_STRING}getSessionToken(e){return Ie.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(){this.Qr=new Ai(vi.$r),this.Ur=new Ai(vi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const a=new vi(e,n);this.Qr=this.Qr.add(a),this.Ur=this.Ur.add(a)}Wr(e,n){e.forEach((a=>this.addReference(a,n)))}removeReference(e,n){this.Gr(new vi(e,n))}zr(e,n){e.forEach((a=>this.removeReference(a,n)))}jr(e){const n=new tt(new Rn([])),a=new vi(n,e),u=new vi(n,e+1),f=[];return this.Ur.forEachInRange([a,u],(x=>{this.Gr(x),f.push(x.key)})),f}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new tt(new Rn([])),a=new vi(n,e),u=new vi(n,e+1);let f=Ft();return this.Ur.forEachInRange([a,u],(x=>{f=f.add(x.key)})),f}containsKey(e){const n=new vi(e,0),a=this.Qr.firstAfterOrEqual(n);return a!==null&&e.isEqual(a.key)}}class vi{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return tt.comparator(e.key,n.key)||jt(e.Yr,n.Yr)}static Kr(e,n){return jt(e.Yr,n.Yr)||tt.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ai(vi.$r)}checkEmpty(e){return Ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,a,u){const f=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const x=new ZI(f,n,a,u);this.mutationQueue.push(x);for(const b of u)this.Zr=this.Zr.add(new vi(b.key,f)),this.indexManager.addToCollectionParentIndex(e,b.key.path.popLast());return Ie.resolve(x)}lookupMutationBatch(e,n){return Ie.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const a=n+1,u=this.ei(a),f=u<0?0:u;return Ie.resolve(this.mutationQueue.length>f?this.mutationQueue[f]:null)}getHighestUnacknowledgedBatchId(){return Ie.resolve(this.mutationQueue.length===0?rg:this.tr-1)}getAllMutationBatches(e){return Ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const a=new vi(n,0),u=new vi(n,Number.POSITIVE_INFINITY),f=[];return this.Zr.forEachInRange([a,u],(x=>{const b=this.Xr(x.Yr);f.push(b)})),Ie.resolve(f)}getAllMutationBatchesAffectingDocumentKeys(e,n){let a=new Ai(jt);return n.forEach((u=>{const f=new vi(u,0),x=new vi(u,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([f,x],(b=>{a=a.add(b.Yr)}))})),Ie.resolve(this.ti(a))}getAllMutationBatchesAffectingQuery(e,n){const a=n.path,u=a.length+1;let f=a;tt.isDocumentKey(f)||(f=f.child(""));const x=new vi(new tt(f),0);let b=new Ai(jt);return this.Zr.forEachWhile((T=>{const E=T.key.path;return!!a.isPrefixOf(E)&&(E.length===u&&(b=b.add(T.Yr)),!0)}),x),Ie.resolve(this.ti(b))}ti(e){const n=[];return e.forEach((a=>{const u=this.Xr(a);u!==null&&n.push(u)})),n}removeMutationBatch(e,n){un(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Zr;return Ie.forEach(n.mutations,(u=>{const f=new vi(u.key,n.batchId);return a=a.delete(f),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)})).next((()=>{this.Zr=a}))}ir(e){}containsKey(e,n){const a=new vi(n,0),u=this.Zr.firstAfterOrEqual(a);return Ie.resolve(n.isEqual(u&&u.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ie.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(e){this.ri=e,this.docs=(function(){return new Yn(tt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const a=n.key,u=this.docs.get(a),f=u?u.size:0,x=this.ri(n);return this.docs=this.docs.insert(a,{document:n.mutableCopy(),size:x}),this.size+=x-f,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const a=this.docs.get(n);return Ie.resolve(a?a.document.mutableCopy():ir.newInvalidDocument(n))}getEntries(e,n){let a=Ia();return n.forEach((u=>{const f=this.docs.get(u);a=a.insert(u,f?f.document.mutableCopy():ir.newInvalidDocument(u))})),Ie.resolve(a)}getDocumentsMatchingQuery(e,n,a,u){let f=Ia();const x=n.path,b=new tt(x.child("__id-9223372036854775808__")),T=this.docs.getIteratorFrom(b);for(;T.hasNext();){const{key:E,value:{document:C}}=T.getNext();if(!x.isPrefixOf(E.path))break;E.path.length>x.length+1||hI(uI(C),a)<=0||(u.has(C.key)||Pf(n,C))&&(f=f.insert(C.key,C.mutableCopy()))}return Ie.resolve(f)}getAllFromCollectionGroup(e,n,a,u){ot(9500)}ii(e,n){return Ie.forEach(this.docs,(a=>n(a)))}newChangeBuffer(e){return new U4(this)}getSize(e){return Ie.resolve(this.size)}}class U4 extends R4{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((a,u)=>{u.isValidDocument()?n.push(this.Nr.addEntry(e,u)):this.Nr.removeEntry(a)})),Ie.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e){this.persistence=e,this.si=new sl((n=>og(n)),lg),this.lastRemoteSnapshotVersion=ht.min(),this.highestTargetId=0,this.oi=0,this._i=new dg,this.targetCount=0,this.ai=tc.ur()}forEachTarget(e,n){return this.si.forEach(((a,u)=>n(u))),Ie.resolve()}getLastRemoteSnapshotVersion(e){return Ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ie.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ie.resolve(this.highestTargetId)}setTargetsMetadata(e,n,a){return a&&(this.lastRemoteSnapshotVersion=a),n>this.oi&&(this.oi=n),Ie.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new tc(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Ie.resolve()}updateTargetData(e,n){return this.Pr(n),Ie.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Ie.resolve()}removeTargets(e,n,a){let u=0;const f=[];return this.si.forEach(((x,b)=>{b.sequenceNumber<=n&&a.get(b.targetId)===null&&(this.si.delete(x),f.push(this.removeMatchingKeysForTargetId(e,b.targetId)),u++)})),Ie.waitFor(f).next((()=>u))}getTargetCount(e){return Ie.resolve(this.targetCount)}getTargetData(e,n){const a=this.si.get(n)||null;return Ie.resolve(a)}addMatchingKeys(e,n,a){return this._i.Wr(n,a),Ie.resolve()}removeMatchingKeys(e,n,a){this._i.zr(n,a);const u=this.persistence.referenceDelegate,f=[];return u&&n.forEach((x=>{f.push(u.markPotentiallyOrphaned(e,x))})),Ie.waitFor(f)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Ie.resolve()}getMatchingKeysForTargetId(e,n){const a=this._i.Hr(n);return Ie.resolve(a)}containsKey(e,n){return Ie.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e,n){this.ui={},this.overlays={},this.ci=new Rf(0),this.li=!1,this.li=!0,this.hi=new B4,this.referenceDelegate=e(this),this.Pi=new V4(this),this.indexManager=new T4,this.remoteDocumentCache=(function(u){return new k4(u)})((a=>this.referenceDelegate.Ti(a))),this.serializer=new A4(n),this.Ii=new M4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new L4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let a=this.ui[e.toKey()];return a||(a=new P4(n,this.referenceDelegate),this.ui[e.toKey()]=a),a}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,a){ze("MemoryPersistence","Starting transaction:",e);const u=new j4(this.ci.next());return this.referenceDelegate.Ei(),a(u).next((f=>this.referenceDelegate.di(u).next((()=>f)))).toPromise().then((f=>(u.raiseOnCommittedEvent(),f)))}Ai(e,n){return Ie.or(Object.values(this.ui).map((a=>()=>a.containsKey(e,n))))}}class j4 extends dI{constructor(e){super(),this.currentSequenceNumber=e}}class gg{constructor(e){this.persistence=e,this.Ri=new dg,this.Vi=null}static mi(e){return new gg(e)}get fi(){if(this.Vi)return this.Vi;throw ot(60996)}addReference(e,n,a){return this.Ri.addReference(a,n),this.fi.delete(a.toString()),Ie.resolve()}removeReference(e,n,a){return this.Ri.removeReference(a,n),this.fi.add(a.toString()),Ie.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Ie.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((u=>this.fi.add(u.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,n.targetId).next((u=>{u.forEach((f=>this.fi.add(f.toString())))})).next((()=>a.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ie.forEach(this.fi,(a=>{const u=tt.fromPath(a);return this.gi(e,u).next((f=>{f||n.removeEntry(u,ht.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((a=>{a?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return Ie.or([()=>Ie.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class xf{constructor(e,n){this.persistence=e,this.pi=new sl((a=>pI(a.path)),((a,u)=>a.isEqual(u))),this.garbageCollector=N4(this,n)}static mi(e,n){return new xf(e,n)}Ei(){}di(e){return Ie.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>n.next((u=>a+u))))}wr(e){let n=0;return this.pr(e,(a=>{n++})).next((()=>n))}pr(e,n){return Ie.forEach(this.pi,((a,u)=>this.br(e,a,u).next((f=>f?Ie.resolve():n(u)))))}removeTargets(e,n,a){return this.persistence.getTargetCache().removeTargets(e,n,a)}removeOrphanedDocuments(e,n){let a=0;const u=this.persistence.getRemoteDocumentCache(),f=u.newChangeBuffer();return u.ii(e,(x=>this.br(e,x,n).next((b=>{b||(a++,f.removeEntry(x,ht.min()))})))).next((()=>f.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Ie.resolve()}removeTarget(e,n){const a=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,n,a){return this.pi.set(a,e.currentSequenceNumber),Ie.resolve()}removeReference(e,n,a){return this.pi.set(a,e.currentSequenceNumber),Ie.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Ie.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=qh(e.data.value)),n}br(e,n,a){return Ie.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const u=this.pi.get(n);return Ie.resolve(u!==void 0&&u>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e,n,a,u){this.targetId=e,this.fromCache=n,this.Es=a,this.ds=u}static As(e,n){let a=Ft(),u=Ft();for(const f of n.docChanges)switch(f.type){case 0:a=a.add(f.doc.key);break;case 1:u=u.add(f.doc.key)}return new mg(e,n.fromCache,a,u)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return L3()?8:gI(D3())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,a,u){const f={result:null};return this.ys(e,n).next((x=>{f.result=x})).next((()=>{if(!f.result)return this.ws(e,n,u,a).next((x=>{f.result=x}))})).next((()=>{if(f.result)return;const x=new F4;return this.Ss(e,n,x).next((b=>{if(f.result=b,this.Vs)return this.bs(e,n,x,b.size)}))})).next((()=>f.result))}bs(e,n,a,u){return a.documentReadCount<this.fs?(Vl()<=Zt.DEBUG&&ze("QueryEngine","SDK will not create cache indexes for query:",jl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ie.resolve()):(Vl()<=Zt.DEBUG&&ze("QueryEngine","Query:",jl(n),"scans",a.documentReadCount,"local documents and returns",u,"documents as results."),a.documentReadCount>this.gs*u?(Vl()<=Zt.DEBUG&&ze("QueryEngine","The SDK decides to create cache indexes for query:",jl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fs(n))):Ie.resolve())}ys(e,n){if(jx(n))return Ie.resolve(null);let a=Fs(n);return this.indexManager.getIndexType(e,a).next((u=>u===0?null:(n.limit!==null&&u===1&&(n=S1(n,null,"F"),a=Fs(n)),this.indexManager.getDocumentsMatchingTarget(e,a).next((f=>{const x=Ft(...f);return this.ps.getDocuments(e,x).next((b=>this.indexManager.getMinOffset(e,a).next((T=>{const E=this.Ds(n,b);return this.Cs(n,E,x,T.readTime)?this.ys(e,S1(n,null,"F")):this.vs(e,E,n,T)}))))})))))}ws(e,n,a,u){return jx(n)||u.isEqual(ht.min())?Ie.resolve(null):this.ps.getDocuments(e,a).next((f=>{const x=this.Ds(n,f);return this.Cs(n,x,a,u)?Ie.resolve(null):(Vl()<=Zt.DEBUG&&ze("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),jl(n)),this.vs(e,x,n,cI(u,uu)).next((b=>b)))}))}Ds(e,n){let a=new Ai($_(e));return n.forEach(((u,f)=>{Pf(e,f)&&(a=a.add(f))})),a}Cs(e,n,a,u){if(e.limit===null)return!1;if(a.size!==n.size)return!0;const f=e.limitType==="F"?n.last():n.first();return!!f&&(f.hasPendingWrites||f.version.compareTo(u)>0)}Ss(e,n,a){return Vl()<=Zt.DEBUG&&ze("QueryEngine","Using full collection scan to execute query:",jl(n)),this.ps.getDocumentsMatchingQuery(e,n,mo.min(),a)}vs(e,n,a,u){return this.ps.getDocumentsMatchingQuery(e,a,u).next((f=>(n.forEach((x=>{f=f.insert(x.key,x)})),f)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg="LocalStore",H4=3e8;class G4{constructor(e,n,a,u){this.persistence=e,this.Fs=n,this.serializer=u,this.Ms=new Yn(jt),this.xs=new sl((f=>og(f)),lg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(a)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new D4(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function Y4(i,e,n,a){return new G4(i,e,n,a)}async function wA(i,e){const n=pt(i);return await n.persistence.runTransaction("Handle user change","readonly",(a=>{let u;return n.mutationQueue.getAllMutationBatches(a).next((f=>(u=f,n.Bs(e),n.mutationQueue.getAllMutationBatches(a)))).next((f=>{const x=[],b=[];let T=Ft();for(const E of u){x.push(E.batchId);for(const C of E.mutations)T=T.add(C.key)}for(const E of f){b.push(E.batchId);for(const C of E.mutations)T=T.add(C.key)}return n.localDocuments.getDocuments(a,T).next((E=>({Ls:E,removedBatchIds:x,addedBatchIds:b})))}))}))}function X4(i,e){const n=pt(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const u=e.batch.keys(),f=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(b,T,E,C){const I=E.batch,M=I.keys();let k=Ie.resolve();return M.forEach((q=>{k=k.next((()=>C.getEntry(T,q))).next((Q=>{const z=E.docVersions.get(q);un(z!==null,48541),Q.version.compareTo(z)<0&&(I.applyToRemoteDocument(Q,E),Q.isValidDocument()&&(Q.setReadTime(E.commitVersion),C.addEntry(Q)))}))})),k.next((()=>b.mutationQueue.removeMutationBatch(T,I)))})(n,a,e,f).next((()=>f.apply(a))).next((()=>n.mutationQueue.performConsistencyCheck(a))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(a,u,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(b){let T=Ft();for(let E=0;E<b.mutationResults.length;++E)b.mutationResults[E].transformResults.length>0&&(T=T.add(b.batch.mutations[E].key));return T})(e)))).next((()=>n.localDocuments.getDocuments(a,u)))}))}function TA(i){const e=pt(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function q4(i,e){const n=pt(i),a=e.snapshotVersion;let u=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(f=>{const x=n.Ns.newChangeBuffer({trackRemovals:!0});u=n.Ms;const b=[];e.targetChanges.forEach(((C,I)=>{const M=u.get(I);if(!M)return;b.push(n.Pi.removeMatchingKeys(f,C.removedDocuments,I).next((()=>n.Pi.addMatchingKeys(f,C.addedDocuments,I))));let k=M.withSequenceNumber(f.currentSequenceNumber);e.targetMismatches.get(I)!==null?k=k.withResumeToken(Hi.EMPTY_BYTE_STRING,ht.min()).withLastLimboFreeSnapshotVersion(ht.min()):C.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(C.resumeToken,a)),u=u.insert(I,k),(function(Q,z,de){return Q.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=H4?!0:de.addedDocuments.size+de.modifiedDocuments.size+de.removedDocuments.size>0})(M,k,C)&&b.push(n.Pi.updateTargetData(f,k))}));let T=Ia(),E=Ft();if(e.documentUpdates.forEach((C=>{e.resolvedLimboDocuments.has(C)&&b.push(n.persistence.referenceDelegate.updateLimboDocument(f,C))})),b.push(Q4(f,x,e.documentUpdates).next((C=>{T=C.ks,E=C.qs}))),!a.isEqual(ht.min())){const C=n.Pi.getLastRemoteSnapshotVersion(f).next((I=>n.Pi.setTargetsMetadata(f,f.currentSequenceNumber,a)));b.push(C)}return Ie.waitFor(b).next((()=>x.apply(f))).next((()=>n.localDocuments.getLocalViewOfDocuments(f,T,E))).next((()=>T))})).then((f=>(n.Ms=u,f)))}function Q4(i,e,n){let a=Ft(),u=Ft();return n.forEach((f=>a=a.add(f))),e.getEntries(i,a).next((f=>{let x=Ia();return n.forEach(((b,T)=>{const E=f.get(b);T.isFoundDocument()!==E.isFoundDocument()&&(u=u.add(b)),T.isNoDocument()&&T.version.isEqual(ht.min())?(e.removeEntry(b,T.readTime),x=x.insert(b,T)):!E.isValidDocument()||T.version.compareTo(E.version)>0||T.version.compareTo(E.version)===0&&E.hasPendingWrites?(e.addEntry(T),x=x.insert(b,T)):ze(pg,"Ignoring outdated watch update for ",b,". Current version:",E.version," Watch version:",T.version)})),{ks:x,qs:u}}))}function W4(i,e){const n=pt(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=rg),n.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function K4(i,e){const n=pt(i);return n.persistence.runTransaction("Allocate target","readwrite",(a=>{let u;return n.Pi.getTargetData(a,e).next((f=>f?(u=f,Ie.resolve(u)):n.Pi.allocateTargetId(a).next((x=>(u=new co(e,x,"TargetPurposeListen",a.currentSequenceNumber),n.Pi.addTargetData(a,u).next((()=>u)))))))})).then((a=>{const u=n.Ms.get(a.targetId);return(u===null||a.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(a.targetId,a),n.xs.set(e,a.targetId)),a}))}async function R1(i,e,n){const a=pt(i),u=a.Ms.get(e),f=n?"readwrite":"readwrite-primary";try{n||await a.persistence.runTransaction("Release target",f,(x=>a.persistence.referenceDelegate.removeTarget(x,u)))}catch(x){if(!oc(x))throw x;ze(pg,`Failed to update sequence numbers for target ${e}: ${x}`)}a.Ms=a.Ms.remove(e),a.xs.delete(u.target)}function $x(i,e,n){const a=pt(i);let u=ht.min(),f=Ft();return a.persistence.runTransaction("Execute query","readwrite",(x=>(function(T,E,C){const I=pt(T),M=I.xs.get(C);return M!==void 0?Ie.resolve(I.Ms.get(M)):I.Pi.getTargetData(E,C)})(a,x,Fs(e)).next((b=>{if(b)return u=b.lastLimboFreeSnapshotVersion,a.Pi.getMatchingKeysForTargetId(x,b.targetId).next((T=>{f=T}))})).next((()=>a.Fs.getDocumentsMatchingQuery(x,e,n?u:ht.min(),n?f:Ft()))).next((b=>(Z4(a,PI(e),b),{documents:b,Qs:f})))))}function Z4(i,e,n){let a=i.Os.get(e)||ht.min();n.forEach(((u,f)=>{f.readTime.compareTo(a)>0&&(a=f.readTime)})),i.Os.set(e,a)}class ey{constructor(){this.activeTargetIds=zI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class J4{constructor(){this.Mo=new ey,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,a){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,a){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new ey,Promise.resolve()}handleUserChange(e,n,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty="ConnectivityMonitor";class ny{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ze(ty,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ze(ty,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kh=null;function O1(){return kh===null?kh=(function(){return 268435456+Math.round(2147483648*Math.random())})():kh++,"0x"+kh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1="RestConnection",eN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class tN{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),u=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${a}/databases/${u}`,this.Wo=this.databaseId.database===uf?`project_id=${a}`:`project_id=${a}&database_id=${u}`}Go(e,n,a,u,f){const x=O1(),b=this.zo(e,n.toUriEncodedString());ze(n1,`Sending RPC '${e}' ${x}:`,b,a);const T={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(T,u,f);const{host:E}=new URL(b),C=$1(E);return this.Jo(e,b,T,a,C).then((I=>(ze(n1,`Received RPC '${e}' ${x}: `,I),I)),(I=>{throw Zl(n1,`RPC '${e}' ${x} failed with error: `,I,"url: ",b,"request:",a),I}))}Ho(e,n,a,u,f,x){return this.Go(e,n,a,u,f)}jo(e,n,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+sc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((u,f)=>e[f]=u)),a&&a.headers.forEach(((u,f)=>e[f]=u))}zo(e,n){const a=eN[e];return`${this.Uo}/v1/${n}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tr="WebChannelConnection";class iN extends tN{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,a,u,f){const x=O1();return new Promise(((b,T)=>{const E=new v_;E.setWithCredentials(!0),E.listenOnce(I_.COMPLETE,(()=>{try{switch(E.getLastErrorCode()){case Xh.NO_ERROR:const I=E.getResponseJson();ze(tr,`XHR for RPC '${e}' ${x} received:`,JSON.stringify(I)),b(I);break;case Xh.TIMEOUT:ze(tr,`RPC '${e}' ${x} timed out`),T(new qe(Ne.DEADLINE_EXCEEDED,"Request time out"));break;case Xh.HTTP_ERROR:const M=E.getStatus();if(ze(tr,`RPC '${e}' ${x} failed with status:`,M,"response text:",E.getResponseText()),M>0){let k=E.getResponseJson();Array.isArray(k)&&(k=k[0]);const q=k==null?void 0:k.error;if(q&&q.status&&q.message){const Q=(function(de){const Ee=de.toLowerCase().replace(/_/g,"-");return Object.values(Ne).indexOf(Ee)>=0?Ee:Ne.UNKNOWN})(q.status);T(new qe(Q,q.message))}else T(new qe(Ne.UNKNOWN,"Server responded with status "+E.getStatus()))}else T(new qe(Ne.UNAVAILABLE,"Connection failed."));break;default:ot(9055,{l_:e,streamId:x,h_:E.getLastErrorCode(),P_:E.getLastError()})}}finally{ze(tr,`RPC '${e}' ${x} completed.`)}}));const C=JSON.stringify(u);ze(tr,`RPC '${e}' ${x} sending request:`,u),E.send(n,"POST",C,a,15)}))}T_(e,n,a){const u=O1(),f=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],x=O_(),b=R_(),T={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},E=this.longPollingOptions.timeoutSeconds;E!==void 0&&(T.longPollingTimeout=Math.round(1e3*E)),this.useFetchStreams&&(T.useFetchStreams=!0),this.jo(T.initMessageHeaders,n,a),T.encodeInitMessageHeaders=!0;const C=f.join("");ze(tr,`Creating RPC '${e}' stream ${u}: ${C}`,T);const I=x.createWebChannel(C,T);this.I_(I);let M=!1,k=!1;const q=new nN({Yo:z=>{k?ze(tr,`Not sending because RPC '${e}' stream ${u} is closed:`,z):(M||(ze(tr,`Opening RPC '${e}' stream ${u} transport.`),I.open(),M=!0),ze(tr,`RPC '${e}' stream ${u} sending:`,z),I.send(z))},Zo:()=>I.close()}),Q=(z,de,Ee)=>{z.listen(de,(K=>{try{Ee(K)}catch(Se){setTimeout((()=>{throw Se}),0)}}))};return Q(I,Wc.EventType.OPEN,(()=>{k||(ze(tr,`RPC '${e}' stream ${u} transport opened.`),q.o_())})),Q(I,Wc.EventType.CLOSE,(()=>{k||(k=!0,ze(tr,`RPC '${e}' stream ${u} transport closed`),q.a_(),this.E_(I))})),Q(I,Wc.EventType.ERROR,(z=>{k||(k=!0,Zl(tr,`RPC '${e}' stream ${u} transport errored. Name:`,z.name,"Message:",z.message),q.a_(new qe(Ne.UNAVAILABLE,"The operation could not be completed")))})),Q(I,Wc.EventType.MESSAGE,(z=>{var de;if(!k){const Ee=z.data[0];un(!!Ee,16349);const K=Ee,Se=(K==null?void 0:K.error)||((de=K[0])==null?void 0:de.error);if(Se){ze(tr,`RPC '${e}' stream ${u} received error:`,Se);const Ve=Se.status;let ke=(function(V){const te=di[V];if(te!==void 0)return uA(te)})(Ve),j=Se.message;ke===void 0&&(ke=Ne.INTERNAL,j="Unknown error status: "+Ve+" with message "+Se.message),k=!0,q.a_(new qe(ke,j)),I.close()}else ze(tr,`RPC '${e}' stream ${u} received:`,Ee),q.u_(Ee)}})),Q(b,N_.STAT_EVENT,(z=>{z.stat===E1.PROXY?ze(tr,`RPC '${e}' stream ${u} detected buffering proxy`):z.stat===E1.NOPROXY&&ze(tr,`RPC '${e}' stream ${u} detected no buffering proxy`)})),setTimeout((()=>{q.__()}),0),q}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function i1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ff(i){return new o4(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e,n,a=1e3,u=1.5,f=6e4){this.Mi=e,this.timerId=n,this.d_=a,this.A_=u,this.R_=f,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),a=Math.max(0,Date.now()-this.f_),u=Math.max(0,n-a);u>0&&ze("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${a} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,u,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy="PersistentStream";class SA{constructor(e,n,a,u,f,x,b,T){this.Mi=e,this.S_=a,this.b_=u,this.connection=f,this.authCredentialsProvider=x,this.appCheckCredentialsProvider=b,this.listener=T,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new bA(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Ne.RESOURCE_EXHAUSTED?(va(n.toString()),va("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,u])=>{this.D_===n&&this.G_(a,u)}),(a=>{e((()=>{const u=new qe(Ne.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(u)}))}))}G_(e,n){const a=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{a((()=>this.listener.Xo()))})),this.stream.t_((()=>{a((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((u=>{a((()=>this.z_(u)))})),this.stream.onMessage((u=>{a((()=>++this.F_==1?this.J_(u):this.onNext(u)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ze(iy,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ze(iy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class rN extends SA{constructor(e,n,a,u,f,x){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,a,u,x),this.serializer=f}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=u4(this.serializer,e),a=(function(f){if(!("targetChange"in f))return ht.min();const x=f.targetChange;return x.targetIds&&x.targetIds.length?ht.min():x.readTime?zs(x.readTime):ht.min()})(e);return this.listener.H_(n,a)}Y_(e){const n={};n.database=N1(this.serializer),n.addTarget=(function(f,x){let b;const T=x.target;if(b=b1(T)?{documents:d4(f,T)}:{query:g4(f,T).ft},b.targetId=x.targetId,x.resumeToken.approximateByteSize()>0){b.resumeToken=dA(f,x.resumeToken);const E=C1(f,x.expectedCount);E!==null&&(b.expectedCount=E)}else if(x.snapshotVersion.compareTo(ht.min())>0){b.readTime=pf(f,x.snapshotVersion.toTimestamp());const E=C1(f,x.expectedCount);E!==null&&(b.expectedCount=E)}return b})(this.serializer,e);const a=p4(this.serializer,e);a&&(n.labels=a),this.q_(n)}Z_(e){const n={};n.database=N1(this.serializer),n.removeTarget=e,this.q_(n)}}class sN extends SA{constructor(e,n,a,u,f,x){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,a,u,x),this.serializer=f}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return un(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,un(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){un(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=f4(e.writeResults,e.commitTime),a=zs(e.commitTime);return this.listener.na(a,n)}ra(){const e={};e.database=N1(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((a=>h4(this.serializer,a)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{}class oN extends aN{constructor(e,n,a,u){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=a,this.serializer=u,this.ia=!1}sa(){if(this.ia)throw new qe(Ne.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,a,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,x])=>this.connection.Go(e,v1(n,a),u,f,x))).catch((f=>{throw f.name==="FirebaseError"?(f.code===Ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new qe(Ne.UNKNOWN,f.toString())}))}Ho(e,n,a,u,f){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([x,b])=>this.connection.Ho(e,v1(n,a),u,x,b,f))).catch((x=>{throw x.name==="FirebaseError"?(x.code===Ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),x):new qe(Ne.UNKNOWN,x.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class lN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(va(n),this.aa=!1):ze("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl="RemoteStore";class cN{constructor(e,n,a,u,f){this.localStore=e,this.datastore=n,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=f,this.Aa.Oo((x=>{a.enqueueAndForget((async()=>{al(this)&&(ze(nl,"Restarting streams for network reachability change."),await(async function(T){const E=pt(T);E.Ea.add(4),await wu(E),E.Ra.set("Unknown"),E.Ea.delete(4),await zf(E)})(this))}))})),this.Ra=new lN(a,u)}}async function zf(i){if(al(i))for(const e of i.da)await e(!0)}async function wu(i){for(const e of i.da)await e(!1)}function CA(i,e){const n=pt(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),_g(n)?Eg(n):lc(n).O_()&&yg(n,e))}function xg(i,e){const n=pt(i),a=lc(n);n.Ia.delete(e),a.O_()&&vA(n,e),n.Ia.size===0&&(a.O_()?a.L_():al(n)&&n.Ra.set("Unknown"))}function yg(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ht.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}lc(i).Y_(e)}function vA(i,e){i.Va.Ue(e),lc(i).Z_(e)}function Eg(i){i.Va=new i4({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),lc(i).start(),i.Ra.ua()}function _g(i){return al(i)&&!lc(i).x_()&&i.Ia.size>0}function al(i){return pt(i).Ea.size===0}function IA(i){i.Va=void 0}async function uN(i){i.Ra.set("Online")}async function hN(i){i.Ia.forEach(((e,n)=>{yg(i,e)}))}async function fN(i,e){IA(i),_g(i)?(i.Ra.ha(e),Eg(i)):i.Ra.set("Unknown")}async function dN(i,e,n){if(i.Ra.set("Online"),e instanceof fA&&e.state===2&&e.cause)try{await(async function(u,f){const x=f.cause;for(const b of f.targetIds)u.Ia.has(b)&&(await u.remoteSyncer.rejectListen(b,x),u.Ia.delete(b),u.Va.removeTarget(b))})(i,e)}catch(a){ze(nl,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await yf(i,a)}else if(e instanceof Kh?i.Va.Ze(e):e instanceof hA?i.Va.st(e):i.Va.tt(e),!n.isEqual(ht.min()))try{const a=await TA(i.localStore);n.compareTo(a)>=0&&await(function(f,x){const b=f.Va.Tt(x);return b.targetChanges.forEach(((T,E)=>{if(T.resumeToken.approximateByteSize()>0){const C=f.Ia.get(E);C&&f.Ia.set(E,C.withResumeToken(T.resumeToken,x))}})),b.targetMismatches.forEach(((T,E)=>{const C=f.Ia.get(T);if(!C)return;f.Ia.set(T,C.withResumeToken(Hi.EMPTY_BYTE_STRING,C.snapshotVersion)),vA(f,T);const I=new co(C.target,T,E,C.sequenceNumber);yg(f,I)})),f.remoteSyncer.applyRemoteEvent(b)})(i,n)}catch(a){ze(nl,"Failed to raise snapshot:",a),await yf(i,a)}}async function yf(i,e,n){if(!oc(e))throw e;i.Ea.add(1),await wu(i),i.Ra.set("Offline"),n||(n=()=>TA(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{ze(nl,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await zf(i)}))}function NA(i,e){return e().catch((n=>yf(i,n,e)))}async function Hf(i){const e=pt(i),n=Eo(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:rg;for(;gN(e);)try{const u=await W4(e.localStore,a);if(u===null){e.Ta.length===0&&n.L_();break}a=u.batchId,mN(e,u)}catch(u){await yf(e,u)}RA(e)&&OA(e)}function gN(i){return al(i)&&i.Ta.length<10}function mN(i,e){i.Ta.push(e);const n=Eo(i);n.O_()&&n.X_&&n.ea(e.mutations)}function RA(i){return al(i)&&!Eo(i).x_()&&i.Ta.length>0}function OA(i){Eo(i).start()}async function pN(i){Eo(i).ra()}async function xN(i){const e=Eo(i);for(const n of i.Ta)e.ea(n.mutations)}async function yN(i,e,n){const a=i.Ta.shift(),u=ug.from(a,e,n);await NA(i,(()=>i.remoteSyncer.applySuccessfulWrite(u))),await Hf(i)}async function EN(i,e){e&&Eo(i).X_&&await(async function(a,u){if((function(x){return e4(x)&&x!==Ne.ABORTED})(u.code)){const f=a.Ta.shift();Eo(a).B_(),await NA(a,(()=>a.remoteSyncer.rejectFailedWrite(f.batchId,u))),await Hf(a)}})(i,e),RA(i)&&OA(i)}async function ry(i,e){const n=pt(i);n.asyncQueue.verifyOperationInProgress(),ze(nl,"RemoteStore received new credentials");const a=al(n);n.Ea.add(3),await wu(n),a&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await zf(n)}async function _N(i,e){const n=pt(i);e?(n.Ea.delete(2),await zf(n)):e||(n.Ea.add(2),await wu(n),n.Ra.set("Unknown"))}function lc(i){return i.ma||(i.ma=(function(n,a,u){const f=pt(n);return f.sa(),new rN(a,f.connection,f.authCredentials,f.appCheckCredentials,f.serializer,u)})(i.datastore,i.asyncQueue,{Xo:uN.bind(null,i),t_:hN.bind(null,i),r_:fN.bind(null,i),H_:dN.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),_g(i)?Eg(i):i.Ra.set("Unknown")):(await i.ma.stop(),IA(i))}))),i.ma}function Eo(i){return i.fa||(i.fa=(function(n,a,u){const f=pt(n);return f.sa(),new sN(a,f.connection,f.authCredentials,f.appCheckCredentials,f.serializer,u)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:pN.bind(null,i),r_:EN.bind(null,i),ta:xN.bind(null,i),na:yN.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await Hf(i)):(await i.fa.stop(),i.Ta.length>0&&(ze(nl,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e,n,a,u,f){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=a,this.op=u,this.removalCallback=f,this.deferred=new ba,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((x=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,a,u,f){const x=Date.now()+a,b=new Ag(e,n,x,u,f);return b.start(a),b}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new qe(Ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wg(i,e){if(va("AsyncQueue",`${e}: ${i}`),oc(i))return new qe(Ne.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{static emptySet(e){return new Ql(e.comparator)}constructor(e){this.comparator=e?(n,a)=>e(n,a)||tt.comparator(n.key,a.key):(n,a)=>tt.comparator(n.key,a.key),this.keyedMap=Kc(),this.sortedSet=new Yn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,a)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ql)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;n.hasNext();){const u=n.getNext().key,f=a.getNext().key;if(!u.isEqual(f))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const a=new Ql;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=n,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(){this.ga=new Yn(tt.comparator)}track(e){const n=e.doc.key,a=this.ga.get(n);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(n,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(n,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(n):e.type===1&&a.type===2?this.ga=this.ga.insert(n,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ot(63341,{Rt:e,pa:a}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,a)=>{e.push(a)})),e}}class nc{constructor(e,n,a,u,f,x,b,T,E){this.query=e,this.docs=n,this.oldDocs=a,this.docChanges=u,this.mutatedKeys=f,this.fromCache=x,this.syncStateChanged=b,this.excludesMetadataChanges=T,this.hasCachedResults=E}static fromInitialDocuments(e,n,a,u,f){const x=[];return n.forEach((b=>{x.push({type:0,doc:b})})),new nc(e,n,Ql.emptySet(n),x,a,u,!0,!1,f)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,a=e.docChanges;if(n.length!==a.length)return!1;for(let u=0;u<n.length;u++)if(n[u].type!==a[u].type||!n[u].doc.isEqual(a[u].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class wN{constructor(){this.queries=ay(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,a){const u=pt(n),f=u.queries;u.queries=ay(),f.forEach(((x,b)=>{for(const T of b.Sa)T.onError(a)}))})(this,new qe(Ne.ABORTED,"Firestore shutting down"))}}function ay(){return new sl((i=>J_(i)),Bf)}async function Tg(i,e){const n=pt(i);let a=3;const u=e.query;let f=n.queries.get(u);f?!f.ba()&&e.Da()&&(a=2):(f=new AN,a=e.Da()?0:1);try{switch(a){case 0:f.wa=await n.onListen(u,!0);break;case 1:f.wa=await n.onListen(u,!1);break;case 2:await n.onFirstRemoteStoreListen(u)}}catch(x){const b=wg(x,`Initialization of query '${jl(e.query)}' failed`);return void e.onError(b)}n.queries.set(u,f),f.Sa.push(e),e.va(n.onlineState),f.wa&&e.Fa(f.wa)&&Sg(n)}async function bg(i,e){const n=pt(i),a=e.query;let u=3;const f=n.queries.get(a);if(f){const x=f.Sa.indexOf(e);x>=0&&(f.Sa.splice(x,1),f.Sa.length===0?u=e.Da()?0:1:!f.ba()&&e.Da()&&(u=2))}switch(u){case 0:return n.queries.delete(a),n.onUnlisten(a,!0);case 1:return n.queries.delete(a),n.onUnlisten(a,!1);case 2:return n.onLastRemoteStoreUnlisten(a);default:return}}function TN(i,e){const n=pt(i);let a=!1;for(const u of e){const f=u.query,x=n.queries.get(f);if(x){for(const b of x.Sa)b.Fa(u)&&(a=!0);x.wa=u}}a&&Sg(n)}function bN(i,e,n){const a=pt(i),u=a.queries.get(e);if(u)for(const f of u.Sa)f.onError(n);a.queries.delete(e)}function Sg(i){i.Ca.forEach((e=>{e.next()}))}var D1,oy;(oy=D1||(D1={})).Ma="default",oy.Cache="cache";class Cg{constructor(e,n,a){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const u of e.docChanges)u.type!==3&&a.push(u);e=new nc(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const a=n!=="Offline";return(!this.options.qa||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=nc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==D1.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e){this.key=e}}class MA{constructor(e){this.key=e}}class SN{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ft(),this.mutatedKeys=Ft(),this.eu=$_(e),this.tu=new Ql(this.eu)}get nu(){return this.Ya}ru(e,n){const a=n?n.iu:new sy,u=n?n.tu:this.tu;let f=n?n.mutatedKeys:this.mutatedKeys,x=u,b=!1;const T=this.query.limitType==="F"&&u.size===this.query.limit?u.last():null,E=this.query.limitType==="L"&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal(((C,I)=>{const M=u.get(C),k=Pf(this.query,I)?I:null,q=!!M&&this.mutatedKeys.has(M.key),Q=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let z=!1;M&&k?M.data.isEqual(k.data)?q!==Q&&(a.track({type:3,doc:k}),z=!0):this.su(M,k)||(a.track({type:2,doc:k}),z=!0,(T&&this.eu(k,T)>0||E&&this.eu(k,E)<0)&&(b=!0)):!M&&k?(a.track({type:0,doc:k}),z=!0):M&&!k&&(a.track({type:1,doc:M}),z=!0,(T||E)&&(b=!0)),z&&(k?(x=x.add(k),f=Q?f.add(C):f.delete(C)):(x=x.delete(C),f=f.delete(C)))})),this.query.limit!==null)for(;x.size>this.query.limit;){const C=this.query.limitType==="F"?x.last():x.first();x=x.delete(C.key),f=f.delete(C.key),a.track({type:1,doc:C})}return{tu:x,iu:a,Cs:b,mutatedKeys:f}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,a,u){const f=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const x=e.iu.ya();x.sort(((C,I)=>(function(k,q){const Q=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ot(20277,{Rt:z})}};return Q(k)-Q(q)})(C.type,I.type)||this.eu(C.doc,I.doc))),this.ou(a),u=u??!1;const b=n&&!u?this._u():[],T=this.Xa.size===0&&this.current&&!u?1:0,E=T!==this.Za;return this.Za=T,x.length!==0||E?{snapshot:new nc(this.query,e.tu,f,x,e.mutatedKeys,T===0,E,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:b}:{au:b}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new sy,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ft(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Xa=this.Xa.add(a.key))}));const n=[];return e.forEach((a=>{this.Xa.has(a)||n.push(new MA(a))})),this.Xa.forEach((a=>{e.has(a)||n.push(new DA(a))})),n}cu(e){this.Ya=e.Qs,this.Xa=Ft();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return nc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const vg="SyncEngine";class CN{constructor(e,n,a){this.query=e,this.targetId=n,this.view=a}}class vN{constructor(e){this.key=e,this.hu=!1}}class IN{constructor(e,n,a,u,f,x){this.localStore=e,this.remoteStore=n,this.eventManager=a,this.sharedClientState=u,this.currentUser=f,this.maxConcurrentLimboResolutions=x,this.Pu={},this.Tu=new sl((b=>J_(b)),Bf),this.Iu=new Map,this.Eu=new Set,this.du=new Yn(tt.comparator),this.Au=new Map,this.Ru=new dg,this.Vu={},this.mu=new Map,this.fu=tc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function NN(i,e,n=!0){const a=VA(i);let u;const f=a.Tu.get(e);return f?(a.sharedClientState.addLocalQueryTarget(f.targetId),u=f.view.lu()):u=await LA(a,e,n,!0),u}async function RN(i,e){const n=VA(i);await LA(n,e,!0,!1)}async function LA(i,e,n,a){const u=await K4(i.localStore,Fs(e)),f=u.targetId,x=i.sharedClientState.addLocalQueryTarget(f,n);let b;return a&&(b=await ON(i,e,f,x==="current",u.resumeToken)),i.isPrimaryClient&&n&&CA(i.remoteStore,u),b}async function ON(i,e,n,a,u){i.pu=(I,M,k)=>(async function(Q,z,de,Ee){let K=z.view.ru(de);K.Cs&&(K=await $x(Q.localStore,z.query,!1).then((({documents:j})=>z.view.ru(j,K))));const Se=Ee&&Ee.targetChanges.get(z.targetId),Ve=Ee&&Ee.targetMismatches.get(z.targetId)!=null,ke=z.view.applyChanges(K,Q.isPrimaryClient,Se,Ve);return cy(Q,z.targetId,ke.au),ke.snapshot})(i,I,M,k);const f=await $x(i.localStore,e,!0),x=new SN(e,f.Qs),b=x.ru(f.documents),T=Au.createSynthesizedTargetChangeForCurrentChange(n,a&&i.onlineState!=="Offline",u),E=x.applyChanges(b,i.isPrimaryClient,T);cy(i,n,E.au);const C=new CN(e,n,x);return i.Tu.set(e,C),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),E.snapshot}async function DN(i,e,n){const a=pt(i),u=a.Tu.get(e),f=a.Iu.get(u.targetId);if(f.length>1)return a.Iu.set(u.targetId,f.filter((x=>!Bf(x,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(u.targetId),a.sharedClientState.isActiveQueryTarget(u.targetId)||await R1(a.localStore,u.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(u.targetId),n&&xg(a.remoteStore,u.targetId),M1(a,u.targetId)})).catch(ac)):(M1(a,u.targetId),await R1(a.localStore,u.targetId,!0))}async function MN(i,e){const n=pt(i),a=n.Tu.get(e),u=n.Iu.get(a.targetId);n.isPrimaryClient&&u.length===1&&(n.sharedClientState.removeLocalQueryTarget(a.targetId),xg(n.remoteStore,a.targetId))}async function LN(i,e,n){const a=FN(i);try{const u=await(function(x,b){const T=pt(x),E=On.now(),C=b.reduce(((k,q)=>k.add(q.key)),Ft());let I,M;return T.persistence.runTransaction("Locally write mutations","readwrite",(k=>{let q=Ia(),Q=Ft();return T.Ns.getEntries(k,C).next((z=>{q=z,q.forEach(((de,Ee)=>{Ee.isValidDocument()||(Q=Q.add(de))}))})).next((()=>T.localDocuments.getOverlayedDocuments(k,q))).next((z=>{I=z;const de=[];for(const Ee of b){const K=WI(Ee,I.get(Ee.key).overlayedDocument);K!=null&&de.push(new So(Ee.key,K,Y_(K.value.mapValue),Nr.exists(!0)))}return T.mutationQueue.addMutationBatch(k,E,de,b)})).next((z=>{M=z;const de=z.applyToLocalDocumentSet(I,Q);return T.documentOverlayCache.saveOverlays(k,z.batchId,de)}))})).then((()=>({batchId:M.batchId,changes:tA(I)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(u.batchId),(function(x,b,T){let E=x.Vu[x.currentUser.toKey()];E||(E=new Yn(jt)),E=E.insert(b,T),x.Vu[x.currentUser.toKey()]=E})(a,u.batchId,n),await Tu(a,u.changes),await Hf(a.remoteStore)}catch(u){const f=wg(u,"Failed to persist write");n.reject(f)}}async function BA(i,e){const n=pt(i);try{const a=await q4(n.localStore,e);e.targetChanges.forEach(((u,f)=>{const x=n.Au.get(f);x&&(un(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1,22616),u.addedDocuments.size>0?x.hu=!0:u.modifiedDocuments.size>0?un(x.hu,14607):u.removedDocuments.size>0&&(un(x.hu,42227),x.hu=!1))})),await Tu(n,a,e)}catch(a){await ac(a)}}function ly(i,e,n){const a=pt(i);if(a.isPrimaryClient&&n===0||!a.isPrimaryClient&&n===1){const u=[];a.Tu.forEach(((f,x)=>{const b=x.view.va(e);b.snapshot&&u.push(b.snapshot)})),(function(x,b){const T=pt(x);T.onlineState=b;let E=!1;T.queries.forEach(((C,I)=>{for(const M of I.Sa)M.va(b)&&(E=!0)})),E&&Sg(T)})(a.eventManager,e),u.length&&a.Pu.H_(u),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function BN(i,e,n){const a=pt(i);a.sharedClientState.updateQueryState(e,"rejected",n);const u=a.Au.get(e),f=u&&u.key;if(f){let x=new Yn(tt.comparator);x=x.insert(f,ir.newNoDocument(f,ht.min()));const b=Ft().add(f),T=new jf(ht.min(),new Map,new Yn(jt),x,b);await BA(a,T),a.du=a.du.remove(f),a.Au.delete(e),Ig(a)}else await R1(a.localStore,e,!1).then((()=>M1(a,e,n))).catch(ac)}async function PN(i,e){const n=pt(i),a=e.batch.batchId;try{const u=await X4(n.localStore,e);kA(n,a,null),PA(n,a),n.sharedClientState.updateMutationState(a,"acknowledged"),await Tu(n,u)}catch(u){await ac(u)}}async function kN(i,e,n){const a=pt(i);try{const u=await(function(x,b){const T=pt(x);return T.persistence.runTransaction("Reject batch","readwrite-primary",(E=>{let C;return T.mutationQueue.lookupMutationBatch(E,b).next((I=>(un(I!==null,37113),C=I.keys(),T.mutationQueue.removeMutationBatch(E,I)))).next((()=>T.mutationQueue.performConsistencyCheck(E))).next((()=>T.documentOverlayCache.removeOverlaysForBatchId(E,C,b))).next((()=>T.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(E,C))).next((()=>T.localDocuments.getDocuments(E,C)))}))})(a.localStore,e);kA(a,e,n),PA(a,e),a.sharedClientState.updateMutationState(e,"rejected",n),await Tu(a,u)}catch(u){await ac(u)}}function PA(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function kA(i,e,n){const a=pt(i);let u=a.Vu[a.currentUser.toKey()];if(u){const f=u.get(e);f&&(n?f.reject(n):f.resolve(),u=u.remove(e)),a.Vu[a.currentUser.toKey()]=u}}function M1(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const a of i.Iu.get(e))i.Tu.delete(a),n&&i.Pu.yu(a,n);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((a=>{i.Ru.containsKey(a)||UA(i,a)}))}function UA(i,e){i.Eu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(xg(i.remoteStore,n),i.du=i.du.remove(e),i.Au.delete(n),Ig(i))}function cy(i,e,n){for(const a of n)a instanceof DA?(i.Ru.addReference(a.key,e),UN(i,a)):a instanceof MA?(ze(vg,"Document no longer in limbo: "+a.key),i.Ru.removeReference(a.key,e),i.Ru.containsKey(a.key)||UA(i,a.key)):ot(19791,{wu:a})}function UN(i,e){const n=e.key,a=n.path.canonicalString();i.du.get(n)||i.Eu.has(a)||(ze(vg,"New document in limbo: "+n),i.Eu.add(a),Ig(i))}function Ig(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new tt(Rn.fromString(e)),a=i.fu.next();i.Au.set(a,new vN(n)),i.du=i.du.insert(n,a),CA(i.remoteStore,new co(Fs(Lf(n.path)),a,"TargetPurposeLimboResolution",Rf.ce))}}async function Tu(i,e,n){const a=pt(i),u=[],f=[],x=[];a.Tu.isEmpty()||(a.Tu.forEach(((b,T)=>{x.push(a.pu(T,e,n).then((E=>{var C;if((E||n)&&a.isPrimaryClient){const I=E?!E.fromCache:(C=n==null?void 0:n.targetChanges.get(T.targetId))==null?void 0:C.current;a.sharedClientState.updateQueryState(T.targetId,I?"current":"not-current")}if(E){u.push(E);const I=mg.As(T.targetId,E);f.push(I)}})))})),await Promise.all(x),a.Pu.H_(u),await(async function(T,E){const C=pt(T);try{await C.persistence.runTransaction("notifyLocalViewChanges","readwrite",(I=>Ie.forEach(E,(M=>Ie.forEach(M.Es,(k=>C.persistence.referenceDelegate.addReference(I,M.targetId,k))).next((()=>Ie.forEach(M.ds,(k=>C.persistence.referenceDelegate.removeReference(I,M.targetId,k)))))))))}catch(I){if(!oc(I))throw I;ze(pg,"Failed to update sequence numbers: "+I)}for(const I of E){const M=I.targetId;if(!I.fromCache){const k=C.Ms.get(M),q=k.snapshotVersion,Q=k.withLastLimboFreeSnapshotVersion(q);C.Ms=C.Ms.insert(M,Q)}}})(a.localStore,f))}async function VN(i,e){const n=pt(i);if(!n.currentUser.isEqual(e)){ze(vg,"User change. New user:",e.toKey());const a=await wA(n.localStore,e);n.currentUser=e,(function(f,x){f.mu.forEach((b=>{b.forEach((T=>{T.reject(new qe(Ne.CANCELLED,x))}))})),f.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await Tu(n,a.Ls)}}function jN(i,e){const n=pt(i),a=n.Au.get(e);if(a&&a.hu)return Ft().add(a.key);{let u=Ft();const f=n.Iu.get(e);if(!f)return u;for(const x of f){const b=n.Tu.get(x);u=u.unionWith(b.view.nu)}return u}}function VA(i){const e=pt(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=BA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=BN.bind(null,e),e.Pu.H_=TN.bind(null,e.eventManager),e.Pu.yu=bN.bind(null,e.eventManager),e}function FN(i){const e=pt(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=PN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kN.bind(null,e),e}class Ef{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ff(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Y4(this.persistence,new z4,e.initialUser,this.serializer)}Cu(e){return new AA(gg.mi,this.serializer)}Du(e){return new J4}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ef.provider={build:()=>new Ef};class zN extends Ef{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){un(this.persistence.referenceDelegate instanceof xf,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new v4(a,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Cr.withCacheSize(this.cacheSizeBytes):Cr.DEFAULT;return new AA((a=>xf.mi(a,n)),this.serializer)}}class L1{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>ly(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=VN.bind(null,this.syncEngine),await _N(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new wN})()}createDatastore(e){const n=Ff(e.databaseInfo.databaseId),a=(function(f){return new iN(f)})(e.databaseInfo);return(function(f,x,b,T){return new oN(f,x,b,T)})(e.authCredentials,e.appCheckCredentials,a,n)}createRemoteStore(e){return(function(a,u,f,x,b){return new cN(a,u,f,x,b)})(this.localStore,this.datastore,e.asyncQueue,(n=>ly(this.syncEngine,n,0)),(function(){return ny.v()?new ny:new $4})())}createSyncEngine(e,n){return(function(u,f,x,b,T,E,C){const I=new IN(u,f,x,b,T,E);return C&&(I.gu=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(u){const f=pt(u);ze(nl,"RemoteStore shutting down."),f.Ea.add(5),await wu(f),f.Aa.shutdown(),f.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}L1.provider={build:()=>new L1};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):va("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o="FirestoreClient";class HN{constructor(e,n,a,u,f){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=a,this.databaseInfo=u,this.user=nr.UNAUTHENTICATED,this.clientId=ng.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=f,this.authCredentials.start(a,(async x=>{ze(_o,"Received user=",x.uid),await this.authCredentialListener(x),this.user=x})),this.appCheckCredentials.start(a,(x=>(ze(_o,"Received new app check token=",x),this.appCheckCredentialListener(x,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ba;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const a=wg(n,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function r1(i,e){i.asyncQueue.verifyOperationInProgress(),ze(_o,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let a=n.initialUser;i.setCredentialChangeListener((async u=>{a.isEqual(u)||(await wA(e.localStore,u),a=u)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function uy(i,e){i.asyncQueue.verifyOperationInProgress();const n=await GN(i);ze(_o,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((a=>ry(e.remoteStore,a))),i.setAppCheckTokenChangeListener(((a,u)=>ry(e.remoteStore,u))),i._onlineComponents=e}async function GN(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){ze(_o,"Using user provided OfflineComponentProvider");try{await r1(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(u){return u.name==="FirebaseError"?u.code===Ne.FAILED_PRECONDITION||u.code===Ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||u.code===22||u.code===20||u.code===11})(n))throw n;Zl("Error using user provided cache. Falling back to memory cache: "+n),await r1(i,new Ef)}}else ze(_o,"Using default OfflineComponentProvider"),await r1(i,new zN(void 0));return i._offlineComponents}async function jA(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(ze(_o,"Using user provided OnlineComponentProvider"),await uy(i,i._uninitializedComponentsProvider._online)):(ze(_o,"Using default OnlineComponentProvider"),await uy(i,new L1))),i._onlineComponents}function YN(i){return jA(i).then((e=>e.syncEngine))}async function _f(i){const e=await jA(i),n=e.eventManager;return n.onListen=NN.bind(null,e.syncEngine),n.onUnlisten=DN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=RN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=MN.bind(null,e.syncEngine),n}function XN(i,e,n={}){const a=new ba;return i.asyncQueue.enqueueAndForget((async()=>(function(f,x,b,T,E){const C=new Ng({next:M=>{C.Nu(),x.enqueueAndForget((()=>bg(f,I)));const k=M.docs.has(b);!k&&M.fromCache?E.reject(new qe(Ne.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&M.fromCache&&T&&T.source==="server"?E.reject(new qe(Ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(M)},error:M=>E.reject(M)}),I=new Cg(Lf(b.path),C,{includeMetadataChanges:!0,qa:!0});return Tg(f,I)})(await _f(i),i.asyncQueue,e,n,a))),a.promise}function qN(i,e,n={}){const a=new ba;return i.asyncQueue.enqueueAndForget((async()=>(function(f,x,b,T,E){const C=new Ng({next:M=>{C.Nu(),x.enqueueAndForget((()=>bg(f,I))),M.fromCache&&T.source==="server"?E.reject(new qe(Ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):E.resolve(M)},error:M=>E.reject(M)}),I=new Cg(b,C,{includeMetadataChanges:!0,qa:!0});return Tg(f,I)})(await _f(i),i.asyncQueue,e,n,a))),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA="firestore.googleapis.com",fy=!0;class dy{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new qe(Ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=zA,this.ssl=fy}else this.host=e.host,this.ssl=e.ssl??fy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=_A;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<S4)throw new qe(Ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=FA(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new qe(Ne.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new qe(Ne.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new qe(Ne.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,u){return a.timeoutSeconds===u.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gf{constructor(e,n,a,u){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=a,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new qe(Ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new qe(Ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new Jv;switch(a.type){case"firstParty":return new nI(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new qe(Ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const a=hy.get(n);a&&(ze("ComponentProvider","Removing Datastore"),hy.delete(n),a.terminate())})(this),Promise.resolve()}}function QN(i,e,n,a={}){var E;i=Ir(i,Gf);const u=$1(e),f=i._getSettings(),x={...f,emulatorOptions:i._getEmulatorOptions()},b=`${e}:${n}`;u&&(v3(`https://${b}`),O3("Firestore",!0)),f.host!==zA&&f.host!==b&&Zl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const T={...f,host:b,ssl:u,emulatorOptions:a};if(!af(T,x)&&(i._setSettings(T),a.mockUserToken)){let C,I;if(typeof a.mockUserToken=="string")C=a.mockUserToken,I=nr.MOCK_USER;else{C=I3(a.mockUserToken,(E=i._app)==null?void 0:E.options.projectId);const M=a.mockUserToken.sub||a.mockUserToken.user_id;if(!M)throw new qe(Ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");I=new nr(M)}i._authCredentials=new $v(new M_(C,I))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,n,a){this.converter=n,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new bu(this.firestore,e,this._query)}}class si{constructor(e,n,a){this.converter=n,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new go(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new si(this.firestore,e,this._key)}toJSON(){return{type:si._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,a){if(Eu(n,si._jsonSchema))return new si(e,a||null,new tt(Rn.fromString(n.referencePath)))}}si._jsonSchemaVersion="firestore/documentReference/1.0",si._jsonSchema={type:mi("string",si._jsonSchemaVersion),referencePath:mi("string")};class go extends bu{constructor(e,n,a){super(e,n,Lf(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new si(this.firestore,null,new tt(e))}withConverter(e){return new go(this.firestore,e,this._path)}}function qs(i,e,...n){if(i=Ss(i),L_("collection","path",e),i instanceof Gf){const a=Rn.fromString(e,...n);return vx(a),new go(i,null,a)}{if(!(i instanceof si||i instanceof go))throw new qe(Ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=i._path.child(Rn.fromString(e,...n));return vx(a),new go(i.firestore,null,a)}}function Vn(i,e,...n){if(i=Ss(i),arguments.length===1&&(e=ng.newId()),L_("doc","path",e),i instanceof Gf){const a=Rn.fromString(e,...n);return Cx(a),new si(i,null,new tt(a))}{if(!(i instanceof si||i instanceof go))throw new qe(Ne.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=i._path.child(Rn.fromString(e,...n));return Cx(a),new si(i.firestore,i instanceof go?i.converter:null,new tt(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy="AsyncQueue";class my{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new bA(this,"async_queue_retry"),this._c=()=>{const a=i1();a&&ze(gy,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const n=i1();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=i1();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ba;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!oc(e))throw e;ze(gy,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,va("INTERNAL UNHANDLED ERROR: ",py(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=n,n}enqueueAfterDelay(e,n,a){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const u=Ag.createAndSchedule(this,e,n,a,(f=>this.hc(f)));return this.tc.push(u),u}uc(){this.nc&&ot(47125,{Pc:py(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,a)=>n.targetTimeMs-a.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function py(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xy(i){return(function(n,a){if(typeof n!="object"||n===null)return!1;const u=n;for(const f of a)if(f in u&&typeof u[f]=="function")return!0;return!1})(i,["next","error","complete"])}class Na extends Gf{constructor(e,n,a,u){super(e,n,a,u),this.type="firestore",this._queue=new my,this._persistenceKey=(u==null?void 0:u.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new my(e),this._firestoreClient=void 0,await e}}}function WN(i,e){const n=typeof i=="object"?i:Fv(),a=typeof i=="string"?i:uf,u=Pv(n,"firestore").getImmediate({identifier:a});if(!u._initialized){const f=S3("firestore");f&&QN(u,...f)}return u}function Su(i){if(i._terminated)throw new qe(Ne.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||KN(i),i._firestoreClient}function KN(i){var a,u,f;const e=i._freezeSettings(),n=(function(b,T,E,C){return new EI(b,T,E,C.host,C.ssl,C.experimentalForceLongPolling,C.experimentalAutoDetectLongPolling,FA(C.experimentalLongPollingOptions),C.useFetchStreams,C.isUsingEmulator)})(i._databaseId,((a=i._app)==null?void 0:a.options.appId)||"",i._persistenceKey,e);i._componentsProvider||(u=e.localCache)!=null&&u._offlineComponentProvider&&((f=e.localCache)!=null&&f._onlineComponentProvider)&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new HN(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(b){const T=b==null?void 0:b._online.build();return{_offline:b==null?void 0:b._offline.build(T),_online:T}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e){this._byteString=e}static fromBase64String(e){try{return new us(Hi.fromBase64String(e))}catch(n){throw new qe(Ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new us(Hi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:us._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Eu(e,us._jsonSchema))return us.fromBase64String(e.bytes)}}us._jsonSchemaVersion="firestore/bytes/1.0",us._jsonSchema={type:mi("string",us._jsonSchemaVersion),bytes:mi("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new qe(Ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new qe(Ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new qe(Ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return jt(this._lat,e._lat)||jt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Hs._jsonSchemaVersion}}static fromJSON(e){if(Eu(e,Hs._jsonSchema))return new Hs(e.latitude,e.longitude)}}Hs._jsonSchemaVersion="firestore/geoPoint/1.0",Hs._jsonSchema={type:mi("string",Hs._jsonSchemaVersion),latitude:mi("number"),longitude:mi("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,u){if(a.length!==u.length)return!1;for(let f=0;f<a.length;++f)if(a[f]!==u[f])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Gs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Eu(e,Gs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Gs(e.vectorValues);throw new qe(Ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Gs._jsonSchemaVersion="firestore/vectorValue/1.0",Gs._jsonSchema={type:mi("string",Gs._jsonSchemaVersion),vectorValues:mi("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN=/^__.*__$/;class JN{constructor(e,n,a){this.data=e,this.fieldMask=n,this.fieldTransforms=a}toMutation(e,n){return this.fieldMask!==null?new So(e,this.data,this.fieldMask,n,this.fieldTransforms):new _u(e,this.data,n,this.fieldTransforms)}}class HA{constructor(e,n,a){this.data=e,this.fieldMask=n,this.fieldTransforms=a}toMutation(e,n){return new So(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function GA(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ot(40011,{Ac:i})}}class Og{constructor(e,n,a,u,f,x){this.settings=e,this.databaseId=n,this.serializer=a,this.ignoreUndefinedProperties=u,f===void 0&&this.Rc(),this.fieldTransforms=f||[],this.fieldMask=x||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Og({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var u;const n=(u=this.path)==null?void 0:u.child(e),a=this.Vc({path:n,fc:!1});return a.gc(e),a}yc(e){var u;const n=(u=this.path)==null?void 0:u.child(e),a=this.Vc({path:n,fc:!1});return a.Rc(),a}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Af(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(GA(this.Ac)&&ZN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class $N{constructor(e,n,a){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=a||Ff(e)}Cc(e,n,a,u=!1){return new Og({Ac:e,methodName:n,Dc:a,path:zi.emptyPath(),fc:!1,bc:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Dg(i){const e=i._freezeSettings(),n=Ff(i._databaseId);return new $N(i._databaseId,!!e.ignoreUndefinedProperties,n)}function YA(i,e,n,a,u,f={}){const x=i.Cc(f.merge||f.mergeFields?2:0,e,n,u);Mg("Data must be an object, but it was:",x,a);const b=QA(a,x);let T,E;if(f.merge)T=new Xr(x.fieldMask),E=x.fieldTransforms;else if(f.mergeFields){const C=[];for(const I of f.mergeFields){const M=B1(e,I,n);if(!x.contains(M))throw new qe(Ne.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);KA(C,M)||C.push(M)}T=new Xr(C),E=x.fieldTransforms.filter((I=>T.covers(I.field)))}else T=null,E=x.fieldTransforms;return new JN(new vr(b),T,E)}class Yf extends Rg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yf}}function XA(i,e,n,a){const u=i.Cc(1,e,n);Mg("Data must be an object, but it was:",u,a);const f=[],x=vr.empty();bo(a,((T,E)=>{const C=Lg(e,T,n);E=Ss(E);const I=u.yc(C);if(E instanceof Yf)f.push(C);else{const M=Xf(E,I);M!=null&&(f.push(C),x.set(C,M))}}));const b=new Xr(f);return new HA(x,b,u.fieldTransforms)}function qA(i,e,n,a,u,f){const x=i.Cc(1,e,n),b=[B1(e,a,n)],T=[u];if(f.length%2!=0)throw new qe(Ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let M=0;M<f.length;M+=2)b.push(B1(e,f[M])),T.push(f[M+1]);const E=[],C=vr.empty();for(let M=b.length-1;M>=0;--M)if(!KA(E,b[M])){const k=b[M];let q=T[M];q=Ss(q);const Q=x.yc(k);if(q instanceof Yf)E.push(k);else{const z=Xf(q,Q);z!=null&&(E.push(k),C.set(k,z))}}const I=new Xr(E);return new HA(C,I,x.fieldTransforms)}function Xf(i,e){if(WA(i=Ss(i)))return Mg("Unsupported field value:",e,i),QA(i,e);if(i instanceof Rg)return(function(a,u){if(!GA(u.Ac))throw u.Sc(`${a._methodName}() can only be used with update() and set()`);if(!u.path)throw u.Sc(`${a._methodName}() is not currently supported inside arrays`);const f=a._toFieldTransform(u);f&&u.fieldTransforms.push(f)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(a,u){const f=[];let x=0;for(const b of a){let T=Xf(b,u.wc(x));T==null&&(T={nullValue:"NULL_VALUE"}),f.push(T),x++}return{arrayValue:{values:f}}})(i,e)}return(function(a,u){if((a=Ss(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return HI(u.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const f=On.fromDate(a);return{timestampValue:pf(u.serializer,f)}}if(a instanceof On){const f=new On(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:pf(u.serializer,f)}}if(a instanceof Hs)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof us)return{bytesValue:dA(u.serializer,a._byteString)};if(a instanceof si){const f=u.databaseId,x=a.firestore._databaseId;if(!x.isEqual(f))throw u.Sc(`Document reference is for database ${x.projectId}/${x.database} but should be for database ${f.projectId}/${f.database}`);return{referenceValue:fg(a.firestore._databaseId||u.databaseId,a._key.path)}}if(a instanceof Gs)return(function(x,b){return{mapValue:{fields:{[H_]:{stringValue:G_},[hf]:{arrayValue:{values:x.toArray().map((E=>{if(typeof E!="number")throw b.Sc("VectorValues must only contain numeric values.");return cg(b.serializer,E)}))}}}}}})(a,u);throw u.Sc(`Unsupported field value: ${ig(a)}`)})(i,e)}function QA(i,e){const n={};return k_(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bo(i,((a,u)=>{const f=Xf(u,e.mc(a));f!=null&&(n[a]=f)})),{mapValue:{fields:n}}}function WA(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof On||i instanceof Hs||i instanceof us||i instanceof si||i instanceof Rg||i instanceof Gs)}function Mg(i,e,n){if(!WA(n)||!B_(n)){const a=ig(n);throw a==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+a)}}function B1(i,e,n){if((e=Ss(e))instanceof Cu)return e._internalPath;if(typeof e=="string")return Lg(i,e);throw Af("Field path arguments must be of type string or ",i,!1,void 0,n)}const e6=new RegExp("[~\\*/\\[\\]]");function Lg(i,e,n){if(e.search(e6)>=0)throw Af(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Cu(...e.split("."))._internalPath}catch{throw Af(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Af(i,e,n,a,u){const f=a&&!a.isEmpty(),x=u!==void 0;let b=`Function ${e}() called with invalid data`;n&&(b+=" (via `toFirestore()`)"),b+=". ";let T="";return(f||x)&&(T+=" (found",f&&(T+=` in field ${a}`),x&&(T+=` in document ${u}`),T+=")"),new qe(Ne.INVALID_ARGUMENT,b+i+T)}function KA(i,e){return i.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,n,a,u,f){this._firestore=e,this._userDataWriter=n,this._key=a,this._document=u,this._converter=f}get id(){return this._key.path.lastSegment()}get ref(){return new si(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new t6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(JA("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class t6 extends ZA{data(){return super.data()}}function JA(i,e){return typeof e=="string"?Lg(i,e):e instanceof Cu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new qe(Ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class n6{convertValue(e,n="none"){switch(yo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ri(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(xo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ot(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const a={};return bo(e,((u,f)=>{a[u]=this.convertValue(f,n)})),a}convertVectorValue(e){var a,u,f;const n=(f=(u=(a=e.fields)==null?void 0:a[hf].arrayValue)==null?void 0:u.values)==null?void 0:f.map((x=>ri(x.doubleValue)));return new Gs(n)}convertGeoPoint(e){return new Hs(ri(e.latitude),ri(e.longitude))}convertArray(e,n){return(e.values||[]).map((a=>this.convertValue(a,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const a=Df(e);return a==null?null:this.convertValue(a,n);case"estimate":return this.convertTimestamp(hu(e));default:return null}}convertTimestamp(e){const n=po(e);return new On(n.seconds,n.nanos)}convertDocumentKey(e,n){const a=Rn.fromString(e);un(EA(a),9688,{name:e});const u=new fu(a.get(1),a.get(3)),f=new tt(a.popFirst(5));return u.isEqual(n)||va(`Document ${f} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(i,e,n){let a;return a=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,a}class Jc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Jo extends ZA{constructor(e,n,a,u,f,x){super(e,n,a,u,x),this._firestore=e,this._firestoreImpl=e,this.metadata=f}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Zh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const a=this._document.data.field(JA("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new qe(Ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Jo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Jo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Jo._jsonSchema={type:mi("string",Jo._jsonSchemaVersion),bundleSource:mi("string","DocumentSnapshot"),bundleName:mi("string"),bundle:mi("string")};class Zh extends Jo{data(e={}){return super.data(e)}}class $o{constructor(e,n,a,u){this._firestore=e,this._userDataWriter=n,this._snapshot=u,this.metadata=new Jc(u.hasPendingWrites,u.fromCache),this.query=a}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((a=>{e.call(n,new Zh(this._firestore,this._userDataWriter,a.key,a,new Jc(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new qe(Ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(u,f){if(u._snapshot.oldDocs.isEmpty()){let x=0;return u._snapshot.docChanges.map((b=>{const T=new Zh(u._firestore,u._userDataWriter,b.doc.key,b.doc,new Jc(u._snapshot.mutatedKeys.has(b.doc.key),u._snapshot.fromCache),u.query.converter);return b.doc,{type:"added",doc:T,oldIndex:-1,newIndex:x++}}))}{let x=u._snapshot.oldDocs;return u._snapshot.docChanges.filter((b=>f||b.type!==3)).map((b=>{const T=new Zh(u._firestore,u._userDataWriter,b.doc.key,b.doc,new Jc(u._snapshot.mutatedKeys.has(b.doc.key),u._snapshot.fromCache),u.query.converter);let E=-1,C=-1;return b.type!==0&&(E=x.indexOf(b.doc.key),x=x.delete(b.doc.key)),b.type!==1&&(x=x.add(b.doc),C=x.indexOf(b.doc.key)),{type:i6(b.type),doc:T,oldIndex:E,newIndex:C}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new qe(Ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=$o._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ng.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],a=[],u=[];return this.docs.forEach((f=>{f._document!==null&&(n.push(f._document),a.push(this._userDataWriter.convertObjectMap(f._document.data.value.mapValue.fields,"previous")),u.push(f.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function i6(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ot(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wf(i){i=Ir(i,si);const e=Ir(i.firestore,Na);return XN(Su(e),i._key).then((n=>tw(e,i,n)))}$o._jsonSchemaVersion="firestore/querySnapshot/1.0",$o._jsonSchema={type:mi("string",$o._jsonSchemaVersion),bundleSource:mi("string","QuerySnapshot"),bundleName:mi("string"),bundle:mi("string")};class Bg extends n6{constructor(e){super(),this.firestore=e}convertBytes(e){return new us(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new si(this.firestore,null,n)}}function Pg(i){i=Ir(i,bu);const e=Ir(i.firestore,Na),n=Su(e),a=new Bg(e);return $A(i._query),qN(n,i._query).then((u=>new $o(e,a,i,u)))}function Co(i,e,n){i=Ir(i,si);const a=Ir(i.firestore,Na),u=ew(i.converter,e,n);return Qf(a,[YA(Dg(a),"setDoc",i._key,u,i.converter!==null,n).toMutation(i._key,Nr.none())])}function Ao(i,e,n,...a){i=Ir(i,si);const u=Ir(i.firestore,Na),f=Dg(u);let x;return x=typeof(e=Ss(e))=="string"||e instanceof Cu?qA(f,"updateDoc",i._key,e,n,a):XA(f,"updateDoc",i._key,e),Qf(u,[x.toMutation(i._key,Nr.exists(!0))])}function qf(i){return Qf(Ir(i.firestore,Na),[new Vf(i._key,Nr.none())])}function ol(i,...e){var T,E,C;i=Ss(i);let n={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||xy(e[a])||(n=e[a++]);const u={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(xy(e[a])){const I=e[a];e[a]=(T=I.next)==null?void 0:T.bind(I),e[a+1]=(E=I.error)==null?void 0:E.bind(I),e[a+2]=(C=I.complete)==null?void 0:C.bind(I)}let f,x,b;if(i instanceof si)x=Ir(i.firestore,Na),b=Lf(i._key.path),f={next:I=>{e[a]&&e[a](tw(x,i,I))},error:e[a+1],complete:e[a+2]};else{const I=Ir(i,bu);x=Ir(I.firestore,Na),b=I._query;const M=new Bg(x);f={next:k=>{e[a]&&e[a](new $o(x,M,I,k))},error:e[a+1],complete:e[a+2]},$A(i._query)}return(function(M,k,q,Q){const z=new Ng(Q),de=new Cg(k,z,q);return M.asyncQueue.enqueueAndForget((async()=>Tg(await _f(M),de))),()=>{z.Nu(),M.asyncQueue.enqueueAndForget((async()=>bg(await _f(M),de)))}})(Su(x),b,u,f)}function Qf(i,e){return(function(a,u){const f=new ba;return a.asyncQueue.enqueueAndForget((async()=>LN(await YN(a),u,f))),f.promise})(Su(i),e)}function tw(i,e,n){const a=n.docs.get(e._key),u=new Bg(i);return new Jo(i,u,e._key,a,new Jc(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Dg(e)}set(e,n,a){this._verifyNotCommitted();const u=s1(e,this._firestore),f=ew(u.converter,n,a),x=YA(this._dataReader,"WriteBatch.set",u._key,f,u.converter!==null,a);return this._mutations.push(x.toMutation(u._key,Nr.none())),this}update(e,n,a,...u){this._verifyNotCommitted();const f=s1(e,this._firestore);let x;return x=typeof(n=Ss(n))=="string"||n instanceof Cu?qA(this._dataReader,"WriteBatch.update",f._key,n,a,u):XA(this._dataReader,"WriteBatch.update",f._key,n),this._mutations.push(x.toMutation(f._key,Nr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=s1(e,this._firestore);return this._mutations=this._mutations.concat(new Vf(n._key,Nr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new qe(Ne.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function s1(i,e){if((i=Ss(i)).firestore!==e)throw new qe(Ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wf(i){return Su(i=Ir(i,Na)),new r6(i,(e=>Qf(i,e)))}(function(e,n=!0){(function(u){sc=u})(jv),lf(new lu("firestore",((a,{instanceIdentifier:u,options:f})=>{const x=a.getProvider("app").getImmediate(),b=new Na(new eI(a.getProvider("auth-internal")),new iI(x,a.getProvider("app-check-internal")),(function(E,C){if(!Object.prototype.hasOwnProperty.apply(E.options,["projectId"]))throw new qe(Ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fu(E.options.projectId,C)})(x,u),x);return f={useFetchStreams:n,...f},b._setSettings(f),b}),"PUBLIC").setMultipleInstances(!0)),ql(wx,Tx,e),ql(wx,Tx,"esm2020")})();var s6="firebase",a6="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ql(s6,a6,"app");const o6={apiKey:"AIzaSyDYZ6VUaaDmy-AvS4D9cM3zkN0Vg4lStuk",authDomain:"workshop-36cbe.firebaseapp.com",projectId:"workshop-36cbe",storageBucket:"workshop-36cbe.firebasestorage.app",messagingSenderId:"742601440632",appId:"1:742601440632:web:48e380f7e1441494ba9c8d"},l6=T_(o6),Nt=WN(l6),c6=[{id:"p1",name:"",category:"food",price:150,description:"",imageUrl:"https://images.unsplash.com/photo-1558961363-fa8fdf82db35?q=80&w=400&h=300&auto=format&fit=crop",stock:12},{id:"p2",name:"",category:"food",price:80,description:"",imageUrl:"https://images.unsplash.com/photo-1544467316-e97029d2d47b?q=80&w=400&h=300&auto=format&fit=crop",stock:45},{id:"p3",name:"",category:"electronic",price:12e3,description:"",imageUrl:"https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?q=80&w=400&h=300&auto=format&fit=crop",stock:1},{id:"p4",name:"",category:"ticket",price:320,description:"",imageUrl:"https://images.unsplash.com/photo-1489599849927-2ee91cede3ba?q=80&w=400&h=300&auto=format&fit=crop",stock:8},{id:"p5",name:"",category:"food",price:800,description:"",imageUrl:"https://images.unsplash.com/photo-1544739313-6fad02872377?q=80&w=400&h=300&auto=format&fit=crop",stock:3},{id:"p6",name:"",category:"electronic",price:2500,description:"",imageUrl:"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?q=80&w=400&h=300&auto=format&fit=crop",stock:5}],el=[{name:"",threshold:0,color:"bg-slate-400",icon:""},{name:"",threshold:500,color:"bg-blue-400",icon:""},{name:"",threshold:2e3,color:"bg-green-500",icon:""},{name:"",threshold:5e3,color:"bg-purple-500",icon:""},{name:"",threshold:1e4,color:"bg-orange-500",icon:""},{name:"",threshold:3e4,color:"bg-yellow-500",icon:""}],kg={USER:"workshop_user"},Jt={STUDENTS:"students",MISSIONS:"missions",PRODUCTS:"products",WISHES:"wishes",REDEMPTIONS:"redemptions",CHALLENGE_HISTORY:"challengeHistory",POINT_REASONS:"pointReasons",MISSION_SUBMISSIONS:"missionSubmissions"},nw=[{id:"user_zhou",name:"",points:1200,totalEarned:2500,role:hs.STUDENT,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Zhou",password:"123",grade:"",isApproved:!0},{id:"user_hu",name:"",points:800,totalEarned:1800,role:hs.STUDENT,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Hu",password:"123",grade:"",isApproved:!0},{id:"user_lin",name:"",points:2100,totalEarned:4200,role:hs.STUDENT,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Lin",password:"123",grade:"",isApproved:!0}],yy={id:"user_admin",name:"",points:0,totalEarned:0,role:hs.ADMIN,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Admin",isApproved:!0},Ey={id:"user_guest",name:"",points:0,totalEarned:0,role:hs.GUEST,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Guest",isApproved:!0},iw=async()=>{try{const i=await Pg(qs(Nt,Jt.STUDENTS));return i.empty?(await u6(),nw):i.docs.map(e=>({...e.data(),id:e.id}))}catch(i){return console.error("Error fetching students:",i),[]}},u6=async()=>{const i=Wf(Nt);nw.forEach(e=>{const n=Vn(Nt,Jt.STUDENTS,e.id);i.set(n,e)}),await i.commit()},rw=async i=>{try{await Co(Vn(Nt,Jt.STUDENTS,i.id),i)}catch(e){console.error("Error saving student:",e),alert("")}},h6=async i=>{const e=Wf(Nt);i.forEach(n=>{const a=Vn(Nt,Jt.STUDENTS,n.id);e.set(a,n)}),await e.commit()},f6=async(i,e,n)=>{try{if((await iw()).some(f=>f.name===i))return!1;const u={id:`user_${Date.now()}`,name:i,password:e,grade:n,points:0,totalEarned:0,role:hs.STUDENT,avatar:`https://api.dicebear.com/7.x/avataaars/svg?seed=${i}`,isApproved:!1};return await rw(u),!0}catch(a){return console.error("Error registering student:",a),!1}},d6=async i=>{try{const e=Vn(Nt,Jt.STUDENTS,i);await Ao(e,{isApproved:!0})}catch(e){console.error("Error approving student:",e)}},g6=async i=>{try{await qf(Vn(Nt,Jt.STUDENTS,i))}catch(e){console.error("Error deleting student:",e)}},_y=()=>{const i=localStorage.getItem(kg.USER);return i?JSON.parse(i):null},Jh=async i=>{localStorage.setItem(kg.USER,JSON.stringify(i)),i.role===hs.STUDENT&&await rw(i)},m6=()=>{localStorage.removeItem(kg.USER)},p6=async i=>{try{await Co(Vn(Nt,Jt.REDEMPTIONS,i.id),i)}catch(e){console.error("Error adding redemption:",e)}},x6=async(i,e)=>{try{const n=Vn(Nt,Jt.REDEMPTIONS,i);await Ao(n,{status:e})}catch(n){console.error("Error updating redemption status:",n)}},y6=[{id:"m1",title:"",description:"",points:100,type:"normal",isActive:!0,maxAttempts:1},{id:"m2",title:" 80 ",description:"",points:300,type:"challenge",isActive:!0,maxAttempts:1},{id:"m3",title:" 90 ",description:"",points:1e3,type:"hard",isActive:!0,maxAttempts:1}],E6=async()=>{const i=Wf(Nt);y6.forEach(e=>{const n=Vn(Nt,Jt.MISSIONS,e.id);i.set(n,e)}),await i.commit()},_6=async i=>{try{await Co(Vn(Nt,Jt.MISSIONS,i.id),i)}catch(e){console.error("Error adding mission:",e)}},A6=async i=>{try{const e=Vn(Nt,Jt.MISSIONS,i),n=await wf(e);if(n.exists()){const a=n.data();await Ao(e,{isActive:!a.isActive})}}catch(e){console.error("Error toggling mission:",e)}},w6=async()=>{try{return(await Pg(qs(Nt,Jt.CHALLENGE_HISTORY))).docs.map(e=>({...e.data(),id:e.id}))}catch(i){return console.error("Error fetching challenge history:",i),[]}},T6=async i=>{try{const e=`${i.userId}_${i.missionId}_${Date.now()}`;await Co(Vn(Nt,Jt.CHALLENGE_HISTORY,e),i)}catch(e){console.error("Error adding challenge history:",e)}},b6=async(i,e)=>{try{return(await w6()).some(a=>a.userId===i&&a.missionId===e)}catch(n){return console.error("Error checking mission completion:",n),!1}},S6=async i=>{try{await Co(Vn(Nt,Jt.MISSION_SUBMISSIONS,i.id),i)}catch(e){console.error("Error submitting mission:",e)}},C6=async i=>{try{const e=Vn(Nt,Jt.MISSION_SUBMISSIONS,i),n=await wf(e);if(n.exists()){const a=n.data();await Ao(e,{status:"approved"}),await T6({id:`h_${Date.now()}`,userId:a.userId,missionId:a.missionId,timestamp:Date.now()});const u=Vn(Nt,Jt.STUDENTS,a.userId),f=await wf(u);if(f.exists()){const x=f.data();await Ao(u,{points:x.points+a.points,totalEarned:x.totalEarned+a.points})}}}catch(e){console.error("Error approving mission:",e)}},v6=async i=>{try{const e=Vn(Nt,Jt.MISSION_SUBMISSIONS,i);await Ao(e,{status:"rejected"})}catch(e){console.error("Error rejecting mission:",e)}},sw=i=>ol(qs(Nt,Jt.MISSION_SUBMISSIONS),e=>{i(e.docs.map(n=>({...n.data(),id:n.id})))}),I6=async()=>{const i=Wf(Nt);c6.forEach(e=>{const n=Vn(Nt,Jt.PRODUCTS,e.id);i.set(n,e)}),await i.commit()},N6=async i=>{try{await Co(Vn(Nt,Jt.PRODUCTS,i.id),i)}catch(e){console.error("Error adding product:",e)}},aw=async(i,e)=>{try{const n=Vn(Nt,Jt.PRODUCTS,i);await Ao(n,{stock:Math.max(0,e)})}catch(n){console.error("Error updating product stock:",n)}},R6=async i=>{try{await qf(Vn(Nt,Jt.PRODUCTS,i))}catch(e){console.error("Error deleting product:",e)}},O6=async i=>{try{await Co(Vn(Nt,Jt.POINT_REASONS,i.id),i)}catch(e){console.error("Error adding point reason:",e)}},D6=async i=>{try{await qf(Vn(Nt,Jt.POINT_REASONS,i))}catch(e){console.error("Error deleting point reason:",e)}},M6=i=>ol(qs(Nt,Jt.POINT_REASONS),e=>{const n=e.docs.map(a=>({...a.data(),id:a.id}));i(n)}),L6=async()=>{try{return(await Pg(qs(Nt,Jt.WISHES))).docs.map(e=>({...e.data(),id:e.id}))}catch(i){return console.error("Error fetching wishes:",i),[]}},B6=async i=>{try{if((await L6()).find(a=>a.userId===i.userId)){alert("");return}await Co(Vn(Nt,Jt.WISHES,i.id),i)}catch(e){console.error("Error adding wish:",e),alert(" Firestore  (Test Mode)")}},P6=async i=>{try{await qf(Vn(Nt,Jt.WISHES,i))}catch(e){console.error("Error deleting wish:",e)}},k6=async(i,e)=>{try{const n=Vn(Nt,Jt.WISHES,i),a=await wf(n);if(a.exists()){const f=a.data().likedBy||[];if(f.includes(e)){alert("");return}await Ao(n,{likedBy:[...f,e]})}}catch(n){console.error("Error liking wish:",n)}},U6=i=>ol(qs(Nt,Jt.STUDENTS),e=>{const n=e.docs.map(a=>({...a.data(),id:a.id}));i(n)},e=>{console.error("Error in subscribeToStudents:",e)}),ow=i=>ol(qs(Nt,Jt.MISSIONS),e=>{e.empty&&E6().catch(console.error);const n=e.docs.map(a=>({...a.data(),id:a.id}));i(n)},e=>console.error("Error subscribing to missions:",e)),lw=i=>ol(qs(Nt,Jt.PRODUCTS),e=>{e.empty&&I6().catch(console.error);const n=e.docs.map(a=>({...a.data(),id:a.id}));i(n)},e=>{console.error("Error subscribing to products:",e),alert("")}),cw=i=>ol(qs(Nt,Jt.WISHES),e=>{const n=e.docs.map(a=>({...a.data(),id:a.id}));i(n)},e=>console.error("Error subscribing to wishes:",e)),uw=i=>ol(qs(Nt,Jt.REDEMPTIONS),e=>{const n=e.docs.map(a=>{const u=a.data();return{id:a.id,status:"pending",pointsSpent:0,productName:"",timestamp:Date.now(),userId:"unknown",qrCodeData:"",...u}});i(n)},e=>{console.error("Error subscribing to redemptions:",e)});var V6={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ay;(function(i){i.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",i.OUTCOME_OK="OUTCOME_OK",i.OUTCOME_FAILED="OUTCOME_FAILED",i.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Ay||(Ay={}));var wy;(function(i){i.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",i.PYTHON="PYTHON"})(wy||(wy={}));var Ty;(function(i){i.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",i.SILENT="SILENT",i.WHEN_IDLE="WHEN_IDLE",i.INTERRUPT="INTERRUPT"})(Ty||(Ty={}));var by;(function(i){i.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",i.STRING="STRING",i.NUMBER="NUMBER",i.INTEGER="INTEGER",i.BOOLEAN="BOOLEAN",i.ARRAY="ARRAY",i.OBJECT="OBJECT",i.NULL="NULL"})(by||(by={}));var Sy;(function(i){i.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",i.SIMPLE_SEARCH="SIMPLE_SEARCH",i.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Sy||(Sy={}));var Cy;(function(i){i.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",i.NO_AUTH="NO_AUTH",i.API_KEY_AUTH="API_KEY_AUTH",i.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",i.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",i.OAUTH="OAUTH",i.OIDC_AUTH="OIDC_AUTH"})(Cy||(Cy={}));var vy;(function(i){i.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",i.HTTP_IN_QUERY="HTTP_IN_QUERY",i.HTTP_IN_HEADER="HTTP_IN_HEADER",i.HTTP_IN_PATH="HTTP_IN_PATH",i.HTTP_IN_BODY="HTTP_IN_BODY",i.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(vy||(vy={}));var Iy;(function(i){i.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",i.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",i.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",i.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Iy||(Iy={}));var Ny;(function(i){i.UNSPECIFIED="UNSPECIFIED",i.BLOCKING="BLOCKING",i.NON_BLOCKING="NON_BLOCKING"})(Ny||(Ny={}));var Ry;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(Ry||(Ry={}));var Oy;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE",i.VALIDATED="VALIDATED"})(Oy||(Oy={}));var Dy;(function(i){i.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH",i.MINIMAL="MINIMAL"})(Dy||(Dy={}));var My;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",i.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",i.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",i.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",i.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(My||(My={}));var Ly;(function(i){i.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",i.SEVERITY="SEVERITY",i.PROBABILITY="PROBABILITY"})(Ly||(Ly={}));var By;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE",i.OFF="OFF"})(By||(By={}));var Py;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.IMAGE_SAFETY="IMAGE_SAFETY",i.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",i.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",i.NO_IMAGE="NO_IMAGE",i.IMAGE_RECITATION="IMAGE_RECITATION",i.IMAGE_OTHER="IMAGE_OTHER"})(Py||(Py={}));var ky;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(ky||(ky={}));var Uy;(function(i){i.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",i.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",i.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",i.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",i.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Uy||(Uy={}));var Vy;(function(i){i.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",i.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",i.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",i.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",i.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Vy||(Vy={}));var jy;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.IMAGE_SAFETY="IMAGE_SAFETY",i.MODEL_ARMOR="MODEL_ARMOR",i.JAILBREAK="JAILBREAK"})(jy||(jy={}));var Fy;(function(i){i.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",i.ON_DEMAND="ON_DEMAND",i.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Fy||(Fy={}));var zy;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.AUDIO="AUDIO"})(zy||(zy={}));var Hy;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Hy||(Hy={}));var Gy;(function(i){i.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",i.TUNING_MODE_FULL="TUNING_MODE_FULL",i.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Gy||(Gy={}));var Yy;(function(i){i.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",i.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",i.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",i.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",i.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",i.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",i.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Yy||(Yy={}));var Xy;(function(i){i.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",i.JOB_STATE_QUEUED="JOB_STATE_QUEUED",i.JOB_STATE_PENDING="JOB_STATE_PENDING",i.JOB_STATE_RUNNING="JOB_STATE_RUNNING",i.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",i.JOB_STATE_FAILED="JOB_STATE_FAILED",i.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",i.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",i.JOB_STATE_PAUSED="JOB_STATE_PAUSED",i.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",i.JOB_STATE_UPDATING="JOB_STATE_UPDATING",i.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Xy||(Xy={}));var qy;(function(i){i.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",i.TUNING_TASK_I2V="TUNING_TASK_I2V",i.TUNING_TASK_T2V="TUNING_TASK_T2V",i.TUNING_TASK_R2V="TUNING_TASK_R2V"})(qy||(qy={}));var Qy;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",i.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Qy||(Qy={}));var Wy;(function(i){i.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",i.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",i.BALANCED="BALANCED",i.PRIORITIZE_COST="PRIORITIZE_COST"})(Wy||(Wy={}));var Ky;(function(i){i.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",i.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Ky||(Ky={}));var Zy;(function(i){i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(Zy||(Zy={}));var Jy;(function(i){i.DONT_ALLOW="DONT_ALLOW",i.ALLOW_ADULT="ALLOW_ADULT",i.ALLOW_ALL="ALLOW_ALL"})(Jy||(Jy={}));var $y;(function(i){i.auto="auto",i.en="en",i.ja="ja",i.ko="ko",i.hi="hi",i.zh="zh",i.pt="pt",i.es="es"})($y||($y={}));var eE;(function(i){i.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",i.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",i.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",i.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",i.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(eE||(eE={}));var tE;(function(i){i.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",i.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",i.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",i.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(tE||(tE={}));var nE;(function(i){i.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",i.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",i.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",i.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(nE||(nE={}));var iE;(function(i){i.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",i.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",i.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",i.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",i.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",i.EDIT_MODE_STYLE="EDIT_MODE_STYLE",i.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",i.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(iE||(iE={}));var rE;(function(i){i.FOREGROUND="FOREGROUND",i.BACKGROUND="BACKGROUND",i.PROMPT="PROMPT",i.SEMANTIC="SEMANTIC",i.INTERACTIVE="INTERACTIVE"})(rE||(rE={}));var sE;(function(i){i.ASSET="ASSET",i.STYLE="STYLE"})(sE||(sE={}));var aE;(function(i){i.INSERT="INSERT",i.REMOVE="REMOVE",i.REMOVE_STATIC="REMOVE_STATIC",i.OUTPAINT="OUTPAINT"})(aE||(aE={}));var oE;(function(i){i.OPTIMIZED="OPTIMIZED",i.LOSSLESS="LOSSLESS"})(oE||(oE={}));var lE;(function(i){i.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",i.PREFERENCE_TUNING="PREFERENCE_TUNING"})(lE||(lE={}));var cE;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.STATE_PENDING="STATE_PENDING",i.STATE_ACTIVE="STATE_ACTIVE",i.STATE_FAILED="STATE_FAILED"})(cE||(cE={}));var uE;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.PROCESSING="PROCESSING",i.ACTIVE="ACTIVE",i.FAILED="FAILED"})(uE||(uE={}));var hE;(function(i){i.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",i.UPLOADED="UPLOADED",i.GENERATED="GENERATED",i.REGISTERED="REGISTERED"})(hE||(hE={}));var fE;(function(i){i.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.RESPONSE_REJECTED="RESPONSE_REJECTED",i.NEED_MORE_INPUT="NEED_MORE_INPUT"})(fE||(fE={}));var dE;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.VIDEO="VIDEO",i.AUDIO="AUDIO",i.DOCUMENT="DOCUMENT"})(dE||(dE={}));var gE;(function(i){i.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",i.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",i.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(gE||(gE={}));var mE;(function(i){i.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",i.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",i.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(mE||(mE={}));var pE;(function(i){i.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",i.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",i.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(pE||(pE={}));var xE;(function(i){i.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",i.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",i.NO_INTERRUPTION="NO_INTERRUPTION"})(xE||(xE={}));var yE;(function(i){i.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",i.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",i.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(yE||(yE={}));var EE;(function(i){i.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",i.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",i.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",i.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",i.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",i.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",i.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",i.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",i.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",i.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",i.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",i.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",i.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(EE||(EE={}));var _E;(function(i){i.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",i.QUALITY="QUALITY",i.DIVERSITY="DIVERSITY",i.VOCALIZATION="VOCALIZATION"})(_E||(_E={}));var AE;(function(i){i.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",i.PLAY="PLAY",i.PAUSE="PAUSE",i.STOP="STOP",i.RESET_CONTEXT="RESET_CONTEXT"})(AE||(AE={}));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var wE;(function(i){i.PAGED_ITEM_BATCH_JOBS="batchJobs",i.PAGED_ITEM_MODELS="models",i.PAGED_ITEM_TUNING_JOBS="tuningJobs",i.PAGED_ITEM_FILES="files",i.PAGED_ITEM_CACHED_CONTENTS="cachedContents",i.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",i.PAGED_ITEM_DOCUMENTS="documents"})(wE||(wE={}));function Tf(i,e){var n={};for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&e.indexOf(a)<0&&(n[a]=i[a]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,a=Object.getOwnPropertySymbols(i);u<a.length;u++)e.indexOf(a[u])<0&&Object.prototype.propertyIsEnumerable.call(i,a[u])&&(n[a[u]]=i[a[u]]);return n}function TE(i){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&i[e],a=0;if(n)return n.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&a>=i.length&&(i=void 0),{value:i&&i[a++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Hn(i){return this instanceof Hn?(this.v=i,this):new Hn(i)}function au(i,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=n.apply(i,e||[]),u,f=[];return u=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),b("next"),b("throw"),b("return",x),u[Symbol.asyncIterator]=function(){return this},u;function x(k){return function(q){return Promise.resolve(q).then(k,I)}}function b(k,q){a[k]&&(u[k]=function(Q){return new Promise(function(z,de){f.push([k,Q,z,de])>1||T(k,Q)})},q&&(u[k]=q(u[k])))}function T(k,q){try{E(a[k](q))}catch(Q){M(f[0][3],Q)}}function E(k){k.value instanceof Hn?Promise.resolve(k.value.v).then(C,I):M(f[0][2],k)}function C(k){T("next",k)}function I(k){T("throw",k)}function M(k,q){k(q),f.shift(),f.length&&T(f[0][0],f[0][1])}}function Wl(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],n;return e?e.call(i):(i=typeof TE=="function"?TE(i):i[Symbol.iterator](),n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n);function a(f){n[f]=i[f]&&function(x){return new Promise(function(b,T){x=i[f](x),u(b,T,x.done,x.value)})}}function u(f,x,b,T){Promise.resolve(T).then(function(E){f({value:E,done:b})},x)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let hw=function(){const{crypto:i}=globalThis;if(i!=null&&i.randomUUID)return hw=i.randomUUID.bind(i),i.randomUUID();const e=new Uint8Array(1),n=i?()=>i.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,a=>(+a^n()&15>>+a/4).toString(16))};const j6=()=>hw();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function P1(i){return typeof i=="object"&&i!==null&&("name"in i&&i.name==="AbortError"||"message"in i&&String(i.message).includes("FetchRequestCanceledException"))}const k1=i=>{if(i instanceof Error)return i;if(typeof i=="object"&&i!==null){try{if(Object.prototype.toString.call(i)==="[object Error]"){const e=new Error(i.message,i.cause?{cause:i.cause}:{});return i.stack&&(e.stack=i.stack),i.cause&&!e.cause&&(e.cause=i.cause),i.name&&(e.name=i.name),e}}catch{}try{return new Error(JSON.stringify(i))}catch{}}return new Error(i)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ds extends Error{}class dr extends ds{constructor(e,n,a,u){super(`${dr.makeMessage(e,n,a)}`),this.status=e,this.headers=u,this.error=n}static makeMessage(e,n,a){const u=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):a;return e&&u?`${e} ${u}`:e?`${e} status code (no body)`:u||"(no status code or body)"}static generate(e,n,a,u){if(!e||!u)return new Kf({message:a,cause:k1(n)});const f=n;return e===400?new dw(e,f,a,u):e===401?new gw(e,f,a,u):e===403?new mw(e,f,a,u):e===404?new pw(e,f,a,u):e===409?new xw(e,f,a,u):e===422?new yw(e,f,a,u):e===429?new Ew(e,f,a,u):e>=500?new _w(e,f,a,u):new dr(e,f,a,u)}}class U1 extends dr{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Kf extends dr{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class fw extends Kf{constructor({message:e}={}){super({message:e??"Request timed out."})}}class dw extends dr{}class gw extends dr{}class mw extends dr{}class pw extends dr{}class xw extends dr{}class yw extends dr{}class Ew extends dr{}class _w extends dr{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const F6=/^[a-z][a-z0-9+.-]*:/i,z6=i=>F6.test(i);let V1=i=>(V1=Array.isArray,V1(i));const H6=V1;let G6=H6;const bE=G6;function Y6(i){if(!i)return!0;for(const e in i)return!1;return!0}function X6(i,e){return Object.prototype.hasOwnProperty.call(i,e)}const q6=(i,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new ds(`${i} must be an integer`);if(e<0)throw new ds(`${i} must be a positive integer`);return e},Q6=i=>{try{return JSON.parse(i)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const W6=i=>new Promise(e=>setTimeout(e,i));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Hl="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function K6(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Z6=()=>{var i,e,n,a,u;const f=K6();if(f==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Hl,"X-Stainless-OS":CE(Deno.build.os),"X-Stainless-Arch":SE(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(i=Deno.version)===null||i===void 0?void 0:i.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Hl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(f==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Hl,"X-Stainless-OS":CE((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":SE((a=globalThis.process.arch)!==null&&a!==void 0?a:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(u=globalThis.process.version)!==null&&u!==void 0?u:"unknown"};const x=J6();return x?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Hl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${x.browser}`,"X-Stainless-Runtime-Version":x.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Hl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function J6(){if(typeof navigator>"u"||!navigator)return null;const i=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of i){const a=n.exec(navigator.userAgent);if(a){const u=a[1]||0,f=a[2]||0,x=a[3]||0;return{browser:e,version:`${u}.${f}.${x}`}}}return null}const SE=i=>i==="x32"?"x32":i==="x86_64"||i==="x64"?"x64":i==="arm"?"arm":i==="aarch64"||i==="arm64"?"arm64":i?`other:${i}`:"unknown",CE=i=>(i=i.toLowerCase(),i.includes("ios")?"iOS":i==="android"?"Android":i==="darwin"?"MacOS":i==="win32"?"Windows":i==="freebsd"?"FreeBSD":i==="openbsd"?"OpenBSD":i==="linux"?"Linux":i?`Other:${i}`:"Unknown");let Uh;const $6=()=>Uh??(Uh=Z6());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eR(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Aw(...i){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...i)}function tR(i){let e=Symbol.asyncIterator in i?i[Symbol.asyncIterator]():i[Symbol.iterator]();return Aw({start(){},async pull(n){const{done:a,value:u}=await e.next();a?n.close():n.enqueue(u)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function ww(i){if(i[Symbol.asyncIterator])return i;const e=i.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function nR(i){var e,n;if(i===null||typeof i!="object")return;if(i[Symbol.asyncIterator]){await((n=(e=i[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const a=i.getReader(),u=a.cancel();a.releaseLock(),await u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const iR=({headers:i,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Tw=()=>{var i;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((i=e==null?void 0:e.versions)===null||i===void 0?void 0:i.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function a1(i,e,n){return Tw(),new File(i,e??"unknown_file",n)}function rR(i){return(typeof i=="object"&&i!==null&&("name"in i&&i.name&&String(i.name)||"url"in i&&i.url&&String(i.url)||"filename"in i&&i.filename&&String(i.filename)||"path"in i&&i.path&&String(i.path))||"").split(/[\\/]/).pop()||void 0}const sR=i=>i!=null&&typeof i=="object"&&typeof i[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bw=i=>i!=null&&typeof i=="object"&&typeof i.size=="number"&&typeof i.type=="string"&&typeof i.text=="function"&&typeof i.slice=="function"&&typeof i.arrayBuffer=="function",aR=i=>i!=null&&typeof i=="object"&&typeof i.name=="string"&&typeof i.lastModified=="number"&&bw(i),oR=i=>i!=null&&typeof i=="object"&&typeof i.url=="string"&&typeof i.blob=="function";async function lR(i,e,n){if(Tw(),i=await i,aR(i))return i instanceof File?i:a1([await i.arrayBuffer()],i.name);if(oR(i)){const u=await i.blob();return e||(e=new URL(i.url).pathname.split(/[\\/]/).pop()),a1(await j1(u),e,n)}const a=await j1(i);if(e||(e=rR(i)),!(n!=null&&n.type)){const u=a.find(f=>typeof f=="object"&&"type"in f&&f.type);typeof u=="string"&&(n=Object.assign(Object.assign({},n),{type:u}))}return a1(a,e,n)}async function j1(i){var e,n,a,u,f;let x=[];if(typeof i=="string"||ArrayBuffer.isView(i)||i instanceof ArrayBuffer)x.push(i);else if(bw(i))x.push(i instanceof Blob?i:await i.arrayBuffer());else if(sR(i))try{for(var b=!0,T=Wl(i),E;E=await T.next(),e=E.done,!e;b=!0){u=E.value,b=!1;const C=u;x.push(...await j1(C))}}catch(C){n={error:C}}finally{try{!b&&!e&&(a=T.return)&&await a.call(T)}finally{if(n)throw n.error}}else{const C=(f=i==null?void 0:i.constructor)===null||f===void 0?void 0:f.name;throw new Error(`Unexpected data type: ${typeof i}${C?`; constructor: ${C}`:""}${cR(i)}`)}return x}function cR(i){return typeof i!="object"||i===null?"":`; props: [${Object.getOwnPropertyNames(i).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Sw{constructor(e){this._client=e}}Sw._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Cw(i){return i.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const vE=Object.freeze(Object.create(null)),uR=(i=Cw)=>(function(n,...a){if(n.length===1)return n[0];let u=!1;const f=[],x=n.reduce((C,I,M)=>{var k,q,Q;/[?#]/.test(I)&&(u=!0);const z=a[M];let de=(u?encodeURIComponent:i)(""+z);return M!==a.length&&(z==null||typeof z=="object"&&z.toString===((Q=Object.getPrototypeOf((q=Object.getPrototypeOf((k=z.hasOwnProperty)!==null&&k!==void 0?k:vE))!==null&&q!==void 0?q:vE))===null||Q===void 0?void 0:Q.toString))&&(de=z+"",f.push({start:C.length+I.length,length:de.length,error:`Value of type ${Object.prototype.toString.call(z).slice(8,-1)} is not a valid path parameter`})),C+I+(M===a.length?"":de)},""),b=x.split(/[?#]/,1)[0],T=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let E;for(;(E=T.exec(b))!==null;)f.push({start:E.index,length:E[0].length,error:`Value "${E[0]}" can't be safely passed as a path parameter`});if(f.sort((C,I)=>C.start-I.start),f.length>0){let C=0;const I=f.reduce((M,k)=>{const q=" ".repeat(k.start-C),Q="^".repeat(k.length);return C=k.start+k.length,M+q+Q},"");throw new ds(`Path parameters result in path with invalid segments:
${f.map(M=>M.error).join(`
`)}
${x}
${I}`)}return x}),Vh=uR(Cw);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vw extends Sw{create(e,n){var a;const{api_version:u=this._client.apiVersion}=e,f=Tf(e,["api_version"]);if("model"in f&&"agent_config"in f)throw new ds("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in f&&"generation_config"in f)throw new ds("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Vh`/${u}/interactions`,Object.assign(Object.assign({body:f},n),{stream:(a=e.stream)!==null&&a!==void 0?a:!1}))}delete(e,n={},a){const{api_version:u=this._client.apiVersion}=n??{};return this._client.delete(Vh`/${u}/interactions/${e}`,a)}cancel(e,n={},a){const{api_version:u=this._client.apiVersion}=n??{};return this._client.post(Vh`/${u}/interactions/${e}/cancel`,a)}get(e,n={},a){var u;const f=n??{},{api_version:x=this._client.apiVersion}=f,b=Tf(f,["api_version"]);return this._client.get(Vh`/${x}/interactions/${e}`,Object.assign(Object.assign({query:b},a),{stream:(u=n==null?void 0:n.stream)!==null&&u!==void 0?u:!1}))}}vw._key=Object.freeze(["interactions"]);class Iw extends vw{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hR(i){let e=0;for(const u of i)e+=u.length;const n=new Uint8Array(e);let a=0;for(const u of i)n.set(u,a),a+=u.length;return n}let jh;function Ug(i){let e;return(jh??(e=new globalThis.TextEncoder,jh=e.encode.bind(e)))(i)}let Fh;function IE(i){let e;return(Fh??(e=new globalThis.TextDecoder,Fh=e.decode.bind(e)))(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zf{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Ug(e):e;this.buffer=hR([this.buffer,n]);const a=[];let u;for(;(u=fR(this.buffer,this.carriageReturnIndex))!=null;){if(u.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=u.index;continue}if(this.carriageReturnIndex!=null&&(u.index!==this.carriageReturnIndex+1||u.carriage)){a.push(IE(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const f=this.carriageReturnIndex!==null?u.preceding-1:u.preceding,x=IE(this.buffer.subarray(0,f));a.push(x),this.buffer=this.buffer.subarray(u.index),this.carriageReturnIndex=null}return a}flush(){return this.buffer.length?this.decode(`
`):[]}}Zf.NEWLINE_CHARS=new Set([`
`,"\r"]);Zf.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function fR(i,e){for(let u=e??0;u<i.length;u++){if(i[u]===10)return{preceding:u,index:u+1,carriage:!1};if(i[u]===13)return{preceding:u,index:u+1,carriage:!0}}return null}function dR(i){for(let a=0;a<i.length-1;a++){if(i[a]===10&&i[a+1]===10||i[a]===13&&i[a+1]===13)return a+2;if(i[a]===13&&i[a+1]===10&&a+3<i.length&&i[a+2]===13&&i[a+3]===10)return a+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bf={off:0,error:200,warn:300,info:400,debug:500},NE=(i,e,n)=>{if(i){if(X6(bf,i))return i;fr(n).warn(`${e} was set to ${JSON.stringify(i)}, expected one of ${JSON.stringify(Object.keys(bf))}`)}};function $c(){}function zh(i,e,n){return!e||bf[i]>bf[n]?$c:e[i].bind(e)}const gR={error:$c,warn:$c,info:$c,debug:$c};let RE=new WeakMap;function fr(i){var e;const n=i.logger,a=(e=i.logLevel)!==null&&e!==void 0?e:"off";if(!n)return gR;const u=RE.get(n);if(u&&u[0]===a)return u[1];const f={error:zh("error",n,a),warn:zh("warn",n,a),info:zh("info",n,a),debug:zh("debug",n,a)};return RE.set(n,[a,f]),f}const Ko=i=>(i.options&&(i.options=Object.assign({},i.options),delete i.options.headers),i.headers&&(i.headers=Object.fromEntries((i.headers instanceof Headers?[...i.headers]:Object.entries(i.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in i&&(i.retryOfRequestLogID&&(i.retryOf=i.retryOfRequestLogID),delete i.retryOfRequestLogID),i);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gl{constructor(e,n,a){this.iterator=e,this.controller=n,this.client=a}static fromSSEResponse(e,n,a){let u=!1;const f=a?fr(a):console;function x(){return au(this,arguments,function*(){var T,E,C,I;if(u)throw new ds("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");u=!0;let M=!1;try{try{for(var k=!0,q=Wl(mR(e,n)),Q;Q=yield Hn(q.next()),T=Q.done,!T;k=!0){I=Q.value,k=!1;const z=I;if(!M)if(z.data.startsWith("[DONE]")){M=!0;continue}else try{yield yield Hn(JSON.parse(z.data))}catch(de){throw f.error("Could not parse message into JSON:",z.data),f.error("From chunk:",z.raw),de}}}catch(z){E={error:z}}finally{try{!k&&!T&&(C=q.return)&&(yield Hn(C.call(q)))}finally{if(E)throw E.error}}M=!0}catch(z){if(P1(z))return yield Hn(void 0);throw z}finally{M||n.abort()}})}return new Gl(x,n,a)}static fromReadableStream(e,n,a){let u=!1;function f(){return au(this,arguments,function*(){var T,E,C,I;const M=new Zf,k=ww(e);try{for(var q=!0,Q=Wl(k),z;z=yield Hn(Q.next()),T=z.done,!T;q=!0){I=z.value,q=!1;const de=I;for(const Ee of M.decode(de))yield yield Hn(Ee)}}catch(de){E={error:de}}finally{try{!q&&!T&&(C=Q.return)&&(yield Hn(C.call(Q)))}finally{if(E)throw E.error}}for(const de of M.flush())yield yield Hn(de)})}function x(){return au(this,arguments,function*(){var T,E,C,I;if(u)throw new ds("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");u=!0;let M=!1;try{try{for(var k=!0,q=Wl(f()),Q;Q=yield Hn(q.next()),T=Q.done,!T;k=!0){I=Q.value,k=!1;const z=I;M||z&&(yield yield Hn(JSON.parse(z)))}}catch(z){E={error:z}}finally{try{!k&&!T&&(C=q.return)&&(yield Hn(C.call(q)))}finally{if(E)throw E.error}}M=!0}catch(z){if(P1(z))return yield Hn(void 0);throw z}finally{M||n.abort()}})}return new Gl(x,n,a)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],a=this.iterator(),u=f=>({next:()=>{if(f.length===0){const x=a.next();e.push(x),n.push(x)}return f.shift()}});return[new Gl(()=>u(e),this.controller,this.client),new Gl(()=>u(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return Aw({async start(){n=e[Symbol.asyncIterator]()},async pull(a){try{const{value:u,done:f}=await n.next();if(f)return a.close();const x=Ug(JSON.stringify(u)+`
`);a.enqueue(x)}catch(u){a.error(u)}},async cancel(){var a;await((a=n.return)===null||a===void 0?void 0:a.call(n))}})}}function mR(i,e){return au(this,arguments,function*(){var a,u,f,x;if(!i.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new ds("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new ds("Attempted to iterate over a response with no body");const b=new xR,T=new Zf,E=ww(i.body);try{for(var C=!0,I=Wl(pR(E)),M;M=yield Hn(I.next()),a=M.done,!a;C=!0){x=M.value,C=!1;const k=x;for(const q of T.decode(k)){const Q=b.decode(q);Q&&(yield yield Hn(Q))}}}catch(k){u={error:k}}finally{try{!C&&!a&&(f=I.return)&&(yield Hn(f.call(I)))}finally{if(u)throw u.error}}for(const k of T.flush()){const q=b.decode(k);q&&(yield yield Hn(q))}})}function pR(i){return au(this,arguments,function*(){var n,a,u,f;let x=new Uint8Array;try{for(var b=!0,T=Wl(i),E;E=yield Hn(T.next()),n=E.done,!n;b=!0){f=E.value,b=!1;const C=f;if(C==null)continue;const I=C instanceof ArrayBuffer?new Uint8Array(C):typeof C=="string"?Ug(C):C;let M=new Uint8Array(x.length+I.length);M.set(x),M.set(I,x.length),x=M;let k;for(;(k=dR(x))!==-1;)yield yield Hn(x.slice(0,k)),x=x.slice(k)}}catch(C){a={error:C}}finally{try{!b&&!n&&(u=T.return)&&(yield Hn(u.call(T)))}finally{if(a)throw a.error}}x.length>0&&(yield yield Hn(x))})}class xR{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const f={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],f}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,a,u]=yR(e,":");return u.startsWith(" ")&&(u=u.substring(1)),n==="event"?this.event=u:n==="data"&&this.data.push(u),null}}function yR(i,e){const n=i.indexOf(e);return n!==-1?[i.substring(0,n),e,i.substring(n+e.length)]:[i,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function ER(i,e){const{response:n,requestLogID:a,retryOfRequestLogID:u,startTime:f}=e,x=await(async()=>{var b;if(e.options.stream)return fr(i).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,i):Gl.fromSSEResponse(n,e.controller,i);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const T=n.headers.get("content-type"),E=(b=T==null?void 0:T.split(";")[0])===null||b===void 0?void 0:b.trim();return(E==null?void 0:E.includes("application/json"))||(E==null?void 0:E.endsWith("+json"))?await n.json():await n.text()})();return fr(i).debug(`[${a}] response parsed`,Ko({retryOfRequestLogID:u,url:n.url,status:n.status,body:x,durationMs:Date.now()-f})),x}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vg extends Promise{constructor(e,n,a=ER){super(u=>{u(null)}),this.responsePromise=n,this.parseResponse=a,this.client=e}_thenUnwrap(e){return new Vg(this.client,this.responsePromise,async(n,a)=>e(await this.parseResponse(n,a),a))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Nw=Symbol("brand.privateNullableHeaders");function*_R(i){if(!i)return;if(Nw in i){const{values:a,nulls:u}=i;yield*a.entries();for(const f of u)yield[f,null];return}let e=!1,n;i instanceof Headers?n=i.entries():bE(i)?n=i:(e=!0,n=Object.entries(i??{}));for(let a of n){const u=a[0];if(typeof u!="string")throw new TypeError("expected header name to be a string");const f=bE(a[1])?a[1]:[a[1]];let x=!1;for(const b of f)b!==void 0&&(e&&!x&&(x=!0,yield[u,null]),yield[u,b])}}const Xc=i=>{const e=new Headers,n=new Set;for(const a of i){const u=new Set;for(const[f,x]of _R(a)){const b=f.toLowerCase();u.has(b)||(e.delete(f),u.add(b)),x===null?(e.delete(f),n.add(b)):(e.append(f,x),n.delete(b))}}return{[Nw]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const o1=i=>{var e,n,a,u,f,x;if(typeof globalThis.process<"u")return(a=(n=(e=V6)===null||e===void 0?void 0:e[i])===null||n===void 0?void 0:n.trim())!==null&&a!==void 0?a:void 0;if(typeof globalThis.Deno<"u")return(x=(f=(u=globalThis.Deno.env)===null||u===void 0?void 0:u.get)===null||f===void 0?void 0:f.call(u,i))===null||x===void 0?void 0:x.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Rw;class Jf{constructor(e){var n,a,u,f,x,b,T,{baseURL:E=o1("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:C=(n=o1("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:I="v1beta"}=e,M=Tf(e,["baseURL","apiKey","apiVersion"]);const k=Object.assign(Object.assign({apiKey:C,apiVersion:I},M),{baseURL:E||"https://generativelanguage.googleapis.com"});this.baseURL=k.baseURL,this.timeout=(a=k.timeout)!==null&&a!==void 0?a:Jf.DEFAULT_TIMEOUT,this.logger=(u=k.logger)!==null&&u!==void 0?u:console;const q="warn";this.logLevel=q,this.logLevel=(x=(f=NE(k.logLevel,"ClientOptions.logLevel",this))!==null&&f!==void 0?f:NE(o1("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&x!==void 0?x:q,this.fetchOptions=k.fetchOptions,this.maxRetries=(b=k.maxRetries)!==null&&b!==void 0?b:2,this.fetch=(T=k.fetch)!==null&&T!==void 0?T:eR(),this.encoder=iR,this._options=k,this.apiKey=C,this.apiVersion=I,this.clientAdapter=k.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Xc([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Xc([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Xc([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,a])=>typeof a<"u").map(([n,a])=>{if(typeof a=="string"||typeof a=="number"||typeof a=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(a)}`;if(a===null)return`${encodeURIComponent(n)}=`;throw new ds(`Cannot stringify type ${typeof a}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Hl}`}defaultIdempotencyKey(){return`stainless-node-retry-${j6()}`}makeStatusError(e,n,a,u){return dr.generate(e,n,a,u)}buildURL(e,n,a){const u=!this.baseURLOverridden()&&a||this.baseURL,f=z6(e)?new URL(e):new URL(u+(u.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),x=this.defaultQuery();return Y6(x)||(n=Object.assign(Object.assign({},x),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(f.search=this.stringifyQuery(n)),f.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:a}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,a){return this.request(Promise.resolve(a).then(u=>Object.assign({method:e,path:n},u)))}request(e,n=null){return new Vg(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,a){var u,f,x;const b=await e,T=(u=b.maxRetries)!==null&&u!==void 0?u:this.maxRetries;n==null&&(n=T),await this.prepareOptions(b);const{req:E,url:C,timeout:I}=await this.buildRequest(b,{retryCount:T-n});await this.prepareRequest(E,{url:C,options:b});const M="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),k=a===void 0?"":`, retryOf: ${a}`,q=Date.now();if(fr(this).debug(`[${M}] sending request`,Ko({retryOfRequestLogID:a,method:b.method,url:C,options:b,headers:E.headers})),!((f=b.signal)===null||f===void 0)&&f.aborted)throw new U1;const Q=new AbortController,z=await this.fetchWithTimeout(C,E,I,Q).catch(k1),de=Date.now();if(z instanceof globalThis.Error){const K=`retrying, ${n} attempts remaining`;if(!((x=b.signal)===null||x===void 0)&&x.aborted)throw new U1;const Se=P1(z)||/timed? ?out/i.test(String(z)+("cause"in z?String(z.cause):""));if(n)return fr(this).info(`[${M}] connection ${Se?"timed out":"failed"} - ${K}`),fr(this).debug(`[${M}] connection ${Se?"timed out":"failed"} (${K})`,Ko({retryOfRequestLogID:a,url:C,durationMs:de-q,message:z.message})),this.retryRequest(b,n,a??M);throw fr(this).info(`[${M}] connection ${Se?"timed out":"failed"} - error; no more retries left`),fr(this).debug(`[${M}] connection ${Se?"timed out":"failed"} (error; no more retries left)`,Ko({retryOfRequestLogID:a,url:C,durationMs:de-q,message:z.message})),Se?new fw:new Kf({cause:z})}const Ee=`[${M}${k}] ${E.method} ${C} ${z.ok?"succeeded":"failed"} with status ${z.status} in ${de-q}ms`;if(!z.ok){const K=await this.shouldRetry(z);if(n&&K){const V=`retrying, ${n} attempts remaining`;return await nR(z.body),fr(this).info(`${Ee} - ${V}`),fr(this).debug(`[${M}] response error (${V})`,Ko({retryOfRequestLogID:a,url:z.url,status:z.status,headers:z.headers,durationMs:de-q})),this.retryRequest(b,n,a??M,z.headers)}const Se=K?"error; no more retries left":"error; not retryable";fr(this).info(`${Ee} - ${Se}`);const Ve=await z.text().catch(V=>k1(V).message),ke=Q6(Ve),j=ke?void 0:Ve;throw fr(this).debug(`[${M}] response error (${Se})`,Ko({retryOfRequestLogID:a,url:z.url,status:z.status,headers:z.headers,message:j,durationMs:Date.now()-q})),this.makeStatusError(z.status,ke,j,z.headers)}return fr(this).info(Ee),fr(this).debug(`[${M}] response start`,Ko({retryOfRequestLogID:a,url:z.url,status:z.status,headers:z.headers,durationMs:de-q})),{response:z,options:b,controller:Q,requestLogID:M,retryOfRequestLogID:a,startTime:q}}async fetchWithTimeout(e,n,a,u){const f=n||{},{signal:x,method:b}=f,T=Tf(f,["signal","method"]);x&&x.addEventListener("abort",()=>u.abort());const E=setTimeout(()=>u.abort(),a),C=globalThis.ReadableStream&&T.body instanceof globalThis.ReadableStream||typeof T.body=="object"&&T.body!==null&&Symbol.asyncIterator in T.body,I=Object.assign(Object.assign(Object.assign({signal:u.signal},C?{duplex:"half"}:{}),{method:"GET"}),T);b&&(I.method=b.toUpperCase());try{return await this.fetch.call(void 0,e,I)}finally{clearTimeout(E)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,a,u){var f;let x;const b=u==null?void 0:u.get("retry-after-ms");if(b){const E=parseFloat(b);Number.isNaN(E)||(x=E)}const T=u==null?void 0:u.get("retry-after");if(T&&!x){const E=parseFloat(T);Number.isNaN(E)?x=Date.parse(T)-Date.now():x=E*1e3}if(!(x&&0<=x&&x<60*1e3)){const E=(f=e.maxRetries)!==null&&f!==void 0?f:this.maxRetries;x=this.calculateDefaultRetryTimeoutMillis(n,E)}return await W6(x),this.makeRequest(e,n-1,a)}calculateDefaultRetryTimeoutMillis(e,n){const f=n-e,x=Math.min(.5*Math.pow(2,f),8),b=1-Math.random()*.25;return x*b*1e3}async buildRequest(e,{retryCount:n=0}={}){var a,u,f;const x=Object.assign({},e),{method:b,path:T,query:E,defaultBaseURL:C}=x,I=this.buildURL(T,E,C);"timeout"in x&&q6("timeout",x.timeout),x.timeout=(a=x.timeout)!==null&&a!==void 0?a:this.timeout;const{bodyHeaders:M,body:k}=this.buildBody({options:x}),q=await this.buildHeaders({options:e,method:b,bodyHeaders:M,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:b,headers:q},x.signal&&{signal:x.signal}),globalThis.ReadableStream&&k instanceof globalThis.ReadableStream&&{duplex:"half"}),k&&{body:k}),(u=this.fetchOptions)!==null&&u!==void 0?u:{}),(f=x.fetchOptions)!==null&&f!==void 0?f:{}),url:I,timeout:x.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:a,retryCount:u}){let f={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),f[this.idempotencyHeader]=e.idempotencyKey);const x=await this.authHeaders(e);let b=Xc([f,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(u)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),$6()),this._options.defaultHeaders,a,e.headers,x]);return this.validateHeaders(b),b.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const a=Xc([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&a.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:tR(e)}:this.encoder({body:e,headers:a})}}Jf.DEFAULT_TIMEOUT=6e4;class Gi extends Jf{constructor(){super(...arguments),this.interactions=new Iw(this)}}Rw=Gi;Gi.GeminiNextGenAPIClient=Rw;Gi.GeminiNextGenAPIClientError=ds;Gi.APIError=dr;Gi.APIConnectionError=Kf;Gi.APIConnectionTimeoutError=fw;Gi.APIUserAbortError=U1;Gi.NotFoundError=pw;Gi.ConflictError=xw;Gi.RateLimitError=Ew;Gi.BadRequestError=dw;Gi.AuthenticationError=gw;Gi.InternalServerError=_w;Gi.PermissionDeniedError=mw;Gi.UnprocessableEntityError=yw;Gi.toFile=lR;Gi.Interactions=Iw;const AR=()=>null,wR=async(i,e)=>{try{const n=AR();if(!n)throw new Error("API Key not found");return(await n.models.generateContent({model:"gemini-2.0-flash-exp",contents:`
        
        
        - ${i.name}
        - ${e.name}
        - ${i.points}
        - ${i.totalEarned}

        30-50
        
      `})).text()||""}catch(n){return console.error("Gemini Error:",n),""}},TR=({user:i,rank:e,onUserUpdate:n})=>{const[a,u]=se.useState("..."),[f,x]=se.useState([]),[b,T]=se.useState([]),[E,C]=se.useState(null),[I,M]=se.useState(new Set),k=el[el.indexOf(e)+1]||null,q=k?Math.min(100,(i.totalEarned-e.threshold)/(k.threshold-e.threshold)*100):100;se.useEffect(()=>{(async()=>{const K=await wR(i,e);u(K)})();const de=ow(async K=>{const Se=K.filter(ke=>ke.isActive);x(Se);const Ve=new Set;for(const ke of Se)await b6(i.id,ke.id)&&Ve.add(ke.id);M(Ve)}),Ee=sw(K=>{T(K.filter(Se=>Se.userId===i.id))});return()=>{de(),Ee()}},[i.id,e]);const Q=async z=>{if(!E){if(z.deadline&&z.deadline<Date.now()){alert("");return}C(z.id),setTimeout(async()=>{const de={id:`sub_${Date.now()}`,userId:i.id,userName:i.name,missionId:z.id,missionTitle:z.title,points:z.points,timestamp:Date.now(),status:"pending"};await S6(de),C(null),alert(` 
`)},1e3)}};return v.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-10",children:[v.jsxs("header",{className:"flex flex-col md:flex-row md:items-start justify-between gap-4",children:[v.jsxs("div",{children:[v.jsxs("h1",{className:"text-3xl font-black text-slate-800 tracking-tight",children:["",i.name,""]}),v.jsxs("p",{className:"text-slate-500 mt-1 italic max-w-xl font-medium",children:['"',a,'"']})]}),v.jsxs("div",{className:"bg-amber-50 border border-amber-100 rounded-2xl px-5 py-3 flex items-center gap-3 self-end md:self-start shadow-sm",children:[v.jsx("div",{className:"bg-amber-500 p-2 rounded-xl text-white shadow-lg shadow-amber-200",children:v.jsx(MC,{size:20})}),v.jsxs("div",{children:[v.jsx("p",{className:"text-[10px] text-amber-700 font-black uppercase tracking-widest",children:""}),v.jsxs("p",{className:"text-2xl font-black text-amber-900 leading-none",children:[i.totalEarned.toLocaleString()," ",v.jsx("span",{className:"text-xs font-bold opacity-60",children:"PTS"})]})]})]})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[v.jsxs("div",{className:"md:col-span-2 bg-white rounded-[2.5rem] p-10 border border-slate-100 shadow-xl shadow-slate-200/40 relative overflow-hidden",children:[v.jsxs("div",{className:"flex items-center justify-between mb-12",children:[v.jsxs("div",{children:[v.jsx("h3",{className:"text-slate-400 text-[10px] font-black uppercase tracking-[0.2em] mb-2",children:""}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("span",{className:"text-4xl filter drop-shadow-md",children:e.icon}),v.jsx("span",{className:`text-2xl font-black px-6 py-2 rounded-2xl text-white ${e.color} shadow-xl shadow-indigo-100 border-2 border-white/20`,children:e.name})]})]}),k&&v.jsxs("div",{className:"text-right",children:[v.jsx("h3",{className:"text-slate-400 text-[10px] font-black uppercase tracking-[0.2em] mb-2",children:""}),v.jsxs("div",{className:"flex items-center gap-3 justify-end group",children:[v.jsx("span",{className:"text-lg font-black text-slate-700 group-hover:text-indigo-600 transition-colors",children:k.name}),v.jsx("span",{className:"text-2xl animate-bounce",children:k.icon})]})]})]}),v.jsxs("div",{className:"relative pt-12 pb-6 px-2",children:[v.jsx("div",{className:"h-5 bg-slate-100 rounded-full w-full overflow-hidden border border-slate-200 shadow-inner p-1",children:v.jsx("div",{className:`h-full ${e.color} transition-all duration-1000 ease-out rounded-full relative overflow-hidden`,style:{width:`${q}%`},children:v.jsx("div",{className:"absolute inset-0 bg-white/20 animate-pulse"})})}),v.jsx("div",{className:"absolute top-0 transition-all duration-1000 ease-out",style:{left:`calc(${q}% - 30px)`},children:v.jsxs("div",{className:"relative group cursor-pointer",children:[v.jsx("div",{className:"p-1.5 bg-white rounded-full shadow-2xl border border-slate-50 transition-transform group-hover:scale-110 active:scale-95",children:v.jsx("img",{src:i.avatar,className:`w-14 h-14 rounded-full border-4 border-opacity-30 object-cover ${e.color.replace("bg-","border-")}`,alt:"me"})}),v.jsxs("div",{className:`absolute -top-10 left-1/2 -translate-x-1/2 px-3 py-1 rounded-xl text-[11px] font-black text-white shadow-xl ${e.color} whitespace-nowrap`,children:[" ",Math.round(q),"%"]})]})})]}),v.jsx("p",{className:"text-center text-xs text-slate-400 font-bold mt-8 tracking-wide",children:k?`${k.name} ${k.threshold-i.totalEarned} `:""})]}),v.jsxs("div",{className:"bg-gradient-to-br from-indigo-600 via-indigo-700 to-indigo-900 rounded-[2.5rem] p-10 text-white shadow-2xl shadow-indigo-300 flex flex-col justify-center items-center text-center relative overflow-hidden",children:[v.jsx("div",{className:"absolute -top-10 -right-10 w-40 h-40 bg-white/10 rounded-full blur-3xl"}),v.jsx("div",{className:"absolute -bottom-10 -left-10 w-40 h-40 bg-indigo-500/20 rounded-full blur-3xl"}),v.jsx("div",{className:"w-20 h-20 bg-white/20 backdrop-blur-xl rounded-[2rem] flex items-center justify-center mb-6 border border-white/20 shadow-xl",children:v.jsx(s3,{size:40,className:"text-white drop-shadow-md"})}),v.jsx("h3",{className:"text-indigo-200 text-sm font-black mb-1 uppercase tracking-widest",children:""}),v.jsx("p",{className:"text-6xl font-black mb-4 drop-shadow-lg",children:i.points.toLocaleString()}),v.jsx("div",{className:"px-5 py-1.5 bg-indigo-500/40 backdrop-blur rounded-full text-[10px] font-black tracking-[0.2em] uppercase border border-white/10",children:"SHOPPING POWER"})]})]}),v.jsxs("section",{className:"mt-16",children:[v.jsxs("div",{className:"flex items-center justify-between mb-8",children:[v.jsxs("h2",{className:"text-2xl font-black text-slate-800 flex items-center gap-3",children:[v.jsx(rf,{className:"text-indigo-500",size:28}),""]}),v.jsx("div",{className:"flex items-center gap-4 text-xs font-bold text-slate-400",children:v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx($C,{size:12,className:"text-amber-500"})," "]})})]}),v.jsx("div",{className:"grid grid-cols-1 gap-6",children:f.map(z=>{const de=I.has(z.id);return v.jsx("div",{className:`bg-white border-2 border-slate-50 p-8 rounded-[2.5rem] transition-all group relative overflow-hidden ${de?"opacity-60 grayscale":"shadow-sm hover:shadow-xl"} ${z.id===E?"animate-pulse":""}`,children:v.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-8",children:[v.jsxs("div",{className:"flex gap-8 items-start",children:[v.jsx("div",{className:`w-20 h-20 rounded-3xl flex items-center justify-center shrink-0 shadow-inner ${z.type==="normal"?"bg-emerald-50 text-emerald-600":z.type==="challenge"?"bg-orange-50 text-orange-600":"bg-rose-50 text-rose-600"}`,children:de?v.jsx(u1,{size:36}):z.type==="normal"?v.jsx(rf,{size:36}):z.type==="challenge"?v.jsx(wC,{size:36}):v.jsx(o3,{size:36})}),v.jsxs("div",{children:[v.jsx("div",{className:"flex items-center gap-3 mb-2",children:v.jsx("span",{className:`px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-widest ${z.type==="normal"?"bg-emerald-100 text-emerald-700":z.type==="challenge"?"bg-orange-100 text-orange-700":"bg-rose-100 text-rose-700"}`,children:z.type==="normal"?"":z.type==="challenge"?"":""})}),v.jsx("h3",{className:"text-2xl font-black text-slate-800 transition-colors",children:z.title}),v.jsx("p",{className:"text-slate-500 mt-2 leading-relaxed text-lg font-medium max-w-2xl",children:z.description}),z.deadline&&v.jsxs("div",{className:`mt-3 flex items-center gap-2 text-sm font-black ${z.deadline<Date.now()?"text-rose-500":"text-amber-500"}`,children:[v.jsx(ef,{size:16}),z.deadline<Date.now()?"":` ${new Date(z.deadline).toLocaleString()}`]})]})]}),v.jsxs("div",{className:"flex flex-col md:items-end gap-6 shrink-0",children:[v.jsxs("div",{className:"flex flex-col items-end",children:[v.jsx("span",{className:"text-xs font-bold text-slate-400 mb-1 uppercase tracking-tighter",children:""}),v.jsxs("div",{className:"flex items-baseline gap-2",children:[v.jsx("span",{className:"text-4xl font-black text-indigo-600 tracking-tighter",children:z.points}),v.jsx("span",{className:"text-sm font-bold text-slate-400",children:"PTS"})]})]}),v.jsxs("button",{onClick:()=>Q(z),disabled:E!==null||de||z.deadline!==void 0&&z.deadline<Date.now(),className:`px-10 py-5 rounded-2xl font-black transition-all flex items-center gap-3 shadow-xl ${de?"bg-slate-200 text-slate-500 cursor-not-allowed shadow-none":z.deadline!==void 0&&z.deadline<Date.now()?"bg-slate-200 text-slate-400 cursor-not-allowed shadow-none":z.type==="normal"?"bg-emerald-600 hover:bg-emerald-700 shadow-emerald-100":z.type==="challenge"?"bg-orange-600 hover:bg-orange-700 shadow-orange-100":"bg-rose-600 hover:bg-rose-700 shadow-rose-100"} text-white text-lg active:scale-95 disabled:active:scale-100`,children:[de?"":z.deadline!==void 0&&z.deadline<Date.now()?"":E===z.id?"...":"",!de&&(!z.deadline||z.deadline>=Date.now())&&v.jsx(fC,{size:20})]})]})]})},z.id)})})]})]})},bR=({user:i,onUserUpdate:e})=>{const[n,a]=se.useState(null),[u,f]=se.useState("all"),[x,b]=se.useState([]);se.useEffect(()=>{const C=lw(I=>{b(I)});return()=>C()},[]);const T=x.filter(C=>u==="all"||C.category===u),E=async()=>{if(i.role==="GUEST"){alert("");return}if(!n||i.points<n.price||n.stock<=0)return;const C={id:`red_${Date.now()}`,userId:i.id,productId:n.id,productName:n.name,pointsSpent:n.price,timestamp:Date.now(),status:"pending",qrCodeData:`AUTH_WORKSHOP_${Date.now()}_${n.id}`},I={...i,points:i.points-n.price};await p6(C),await Jh(I),await aw(n.id,1),e(),a(null),alert("  QR Code")};return v.jsxs("div",{className:"space-y-8 pb-20",children:[v.jsxs("header",{children:[v.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:""}),v.jsx("p",{className:"text-slate-500 mt-1",children:""})]}),v.jsx("div",{className:"flex flex-wrap gap-2",children:["all","food","electronic","ticket","other"].map(C=>v.jsx("button",{onClick:()=>f(C),className:`px-6 py-2.5 rounded-2xl text-sm font-bold transition-all ${u===C?"bg-indigo-600 text-white shadow-lg shadow-indigo-100":"bg-white text-slate-600 border border-slate-200 hover:border-indigo-300"}`,children:C==="all"?"":C==="food"?"":C==="electronic"?"":C==="ticket"?"":""},C))}),v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:T.map(C=>{const I=i.points>=C.price,M=C.stock<=0;return v.jsxs("div",{className:`bg-white rounded-[2rem] border border-slate-100 overflow-hidden shadow-sm hover:shadow-2xl transition-all flex flex-col group ${M?"opacity-75 grayscale-[0.5]":""}`,children:[v.jsxs("div",{className:"relative h-56 overflow-hidden",children:[v.jsx("img",{src:C.imageUrl,alt:C.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700"}),v.jsx("div",{className:"absolute top-5 left-5",children:v.jsx("span",{className:"bg-white/90 backdrop-blur text-indigo-600 text-[10px] px-3 py-1.5 rounded-full font-black tracking-widest shadow-sm",children:C.category.toUpperCase()})}),M&&v.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:v.jsx("span",{className:"text-white font-black text-2xl rotate-12 border-4 border-white px-4 py-1",children:"SOLD OUT"})})]}),v.jsxs("div",{className:"p-8 flex flex-col flex-1",children:[v.jsx("div",{className:"flex justify-between items-start mb-2",children:v.jsx("h3",{className:"font-black text-xl text-slate-800 leading-tight",children:C.name})}),v.jsx("p",{className:"text-slate-500 text-sm mb-6 flex-1 leading-relaxed",children:C.description}),v.jsxs("div",{className:"flex items-center gap-2 mb-6 text-slate-400 text-xs font-bold",children:[v.jsx(h1,{size:14}),v.jsxs("span",{children:["",v.jsxs("span",{className:C.stock<=5?"text-red-500":"text-slate-600",children:[C.stock," "]})]})]}),v.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[v.jsxs("div",{className:"flex items-center gap-1 text-indigo-600",children:[v.jsx("span",{className:"text-2xl font-black",children:C.price.toLocaleString()}),v.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-tighter",children:"pts"})]}),v.jsx("button",{onClick:()=>a(C),disabled:!I||M,className:`px-6 py-3 rounded-2xl font-black text-sm transition-all shadow-md ${M?"bg-slate-100 text-slate-400 cursor-not-allowed shadow-none":I?"bg-indigo-600 text-white hover:bg-indigo-700 hover:shadow-indigo-200 active:scale-95":"bg-slate-100 text-slate-400 cursor-not-allowed shadow-none"}`,children:M?"":""})]})]})]},C.id)})}),n&&v.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:v.jsxs("div",{className:"bg-white rounded-[2.5rem] max-w-md w-full p-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[v.jsxs("div",{className:"flex justify-between items-start mb-8",children:[v.jsx("div",{className:"bg-indigo-50 p-4 rounded-2xl text-indigo-600",children:v.jsx(KC,{size:28})}),v.jsx("button",{onClick:()=>a(null),className:"text-slate-400 hover:text-slate-600 bg-slate-50 p-2 rounded-full",children:v.jsx(Kl,{size:24})})]}),v.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-2",children:""}),v.jsxs("p",{className:"text-slate-500 mb-8 leading-relaxed",children:[" ",v.jsxs("span",{className:"font-black text-indigo-600",children:[n.price," "]}),"  ",v.jsxs("span",{className:"font-black text-slate-800",children:["",n.name,""]})," "]}),v.jsxs("div",{className:"bg-slate-50 rounded-[1.5rem] p-6 mb-8 border border-slate-100",children:[v.jsxs("div",{className:"flex justify-between text-sm mb-3",children:[v.jsx("span",{className:"text-slate-500 font-medium",children:""}),v.jsx("span",{className:"font-bold text-slate-800",children:i.points.toLocaleString()})]}),v.jsxs("div",{className:"flex justify-between text-sm mb-5",children:[v.jsx("span",{className:"text-slate-500 font-medium",children:""}),v.jsxs("span",{className:"font-bold text-red-500",children:["-",n.price.toLocaleString()]})]}),v.jsxs("div",{className:"border-t border-slate-200 pt-5 flex justify-between",children:[v.jsx("span",{className:"font-black text-slate-700 text-lg",children:""}),v.jsx("span",{className:"font-black text-indigo-600 text-2xl",children:(i.points-n.price).toLocaleString()})]})]}),v.jsxs("div",{className:"flex flex-col gap-3",children:[v.jsxs("button",{onClick:E,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-5 rounded-[1.25rem] transition-all shadow-xl shadow-indigo-100 flex items-center justify-center gap-3 text-lg",children:[v.jsx(qc,{size:24}),""]}),v.jsx("button",{onClick:()=>a(null),className:"w-full bg-white border border-slate-200 text-slate-600 font-black py-4 rounded-[1.25rem] hover:bg-slate-50 transition-all",children:""})]})]})})]})};var SR=Object.defineProperty,Sf=Object.getOwnPropertySymbols,Ow=Object.prototype.hasOwnProperty,Dw=Object.prototype.propertyIsEnumerable,OE=(i,e,n)=>e in i?SR(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n,F1=(i,e)=>{for(var n in e||(e={}))Ow.call(e,n)&&OE(i,n,e[n]);if(Sf)for(var n of Sf(e))Dw.call(e,n)&&OE(i,n,e[n]);return i},z1=(i,e)=>{var n={};for(var a in i)Ow.call(i,a)&&e.indexOf(a)<0&&(n[a]=i[a]);if(i!=null&&Sf)for(var a of Sf(i))e.indexOf(a)<0&&Dw.call(i,a)&&(n[a]=i[a]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var il;(i=>{const e=class Bt{constructor(T,E,C,I){if(this.version=T,this.errorCorrectionLevel=E,this.modules=[],this.isFunction=[],T<Bt.MIN_VERSION||T>Bt.MAX_VERSION)throw new RangeError("Version value out of range");if(I<-1||I>7)throw new RangeError("Mask value out of range");this.size=T*4+17;let M=[];for(let q=0;q<this.size;q++)M.push(!1);for(let q=0;q<this.size;q++)this.modules.push(M.slice()),this.isFunction.push(M.slice());this.drawFunctionPatterns();const k=this.addEccAndInterleave(C);if(this.drawCodewords(k),I==-1){let q=1e9;for(let Q=0;Q<8;Q++){this.applyMask(Q),this.drawFormatBits(Q);const z=this.getPenaltyScore();z<q&&(I=Q,q=z),this.applyMask(Q)}}u(0<=I&&I<=7),this.mask=I,this.applyMask(I),this.drawFormatBits(I),this.isFunction=[]}static encodeText(T,E){const C=i.QrSegment.makeSegments(T);return Bt.encodeSegments(C,E)}static encodeBinary(T,E){const C=i.QrSegment.makeBytes(T);return Bt.encodeSegments([C],E)}static encodeSegments(T,E,C=1,I=40,M=-1,k=!0){if(!(Bt.MIN_VERSION<=C&&C<=I&&I<=Bt.MAX_VERSION)||M<-1||M>7)throw new RangeError("Invalid value");let q,Q;for(q=C;;q++){const K=Bt.getNumDataCodewords(q,E)*8,Se=x.getTotalBits(T,q);if(Se<=K){Q=Se;break}if(q>=I)throw new RangeError("Data too long")}for(const K of[Bt.Ecc.MEDIUM,Bt.Ecc.QUARTILE,Bt.Ecc.HIGH])k&&Q<=Bt.getNumDataCodewords(q,K)*8&&(E=K);let z=[];for(const K of T){n(K.mode.modeBits,4,z),n(K.numChars,K.mode.numCharCountBits(q),z);for(const Se of K.getData())z.push(Se)}u(z.length==Q);const de=Bt.getNumDataCodewords(q,E)*8;u(z.length<=de),n(0,Math.min(4,de-z.length),z),n(0,(8-z.length%8)%8,z),u(z.length%8==0);for(let K=236;z.length<de;K^=253)n(K,8,z);let Ee=[];for(;Ee.length*8<z.length;)Ee.push(0);return z.forEach((K,Se)=>Ee[Se>>>3]|=K<<7-(Se&7)),new Bt(q,E,Ee,M)}getModule(T,E){return 0<=T&&T<this.size&&0<=E&&E<this.size&&this.modules[E][T]}getModules(){return this.modules}drawFunctionPatterns(){for(let C=0;C<this.size;C++)this.setFunctionModule(6,C,C%2==0),this.setFunctionModule(C,6,C%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const T=this.getAlignmentPatternPositions(),E=T.length;for(let C=0;C<E;C++)for(let I=0;I<E;I++)C==0&&I==0||C==0&&I==E-1||C==E-1&&I==0||this.drawAlignmentPattern(T[C],T[I]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(T){const E=this.errorCorrectionLevel.formatBits<<3|T;let C=E;for(let M=0;M<10;M++)C=C<<1^(C>>>9)*1335;const I=(E<<10|C)^21522;u(I>>>15==0);for(let M=0;M<=5;M++)this.setFunctionModule(8,M,a(I,M));this.setFunctionModule(8,7,a(I,6)),this.setFunctionModule(8,8,a(I,7)),this.setFunctionModule(7,8,a(I,8));for(let M=9;M<15;M++)this.setFunctionModule(14-M,8,a(I,M));for(let M=0;M<8;M++)this.setFunctionModule(this.size-1-M,8,a(I,M));for(let M=8;M<15;M++)this.setFunctionModule(8,this.size-15+M,a(I,M));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let T=this.version;for(let C=0;C<12;C++)T=T<<1^(T>>>11)*7973;const E=this.version<<12|T;u(E>>>18==0);for(let C=0;C<18;C++){const I=a(E,C),M=this.size-11+C%3,k=Math.floor(C/3);this.setFunctionModule(M,k,I),this.setFunctionModule(k,M,I)}}drawFinderPattern(T,E){for(let C=-4;C<=4;C++)for(let I=-4;I<=4;I++){const M=Math.max(Math.abs(I),Math.abs(C)),k=T+I,q=E+C;0<=k&&k<this.size&&0<=q&&q<this.size&&this.setFunctionModule(k,q,M!=2&&M!=4)}}drawAlignmentPattern(T,E){for(let C=-2;C<=2;C++)for(let I=-2;I<=2;I++)this.setFunctionModule(T+I,E+C,Math.max(Math.abs(I),Math.abs(C))!=1)}setFunctionModule(T,E,C){this.modules[E][T]=C,this.isFunction[E][T]=!0}addEccAndInterleave(T){const E=this.version,C=this.errorCorrectionLevel;if(T.length!=Bt.getNumDataCodewords(E,C))throw new RangeError("Invalid argument");const I=Bt.NUM_ERROR_CORRECTION_BLOCKS[C.ordinal][E],M=Bt.ECC_CODEWORDS_PER_BLOCK[C.ordinal][E],k=Math.floor(Bt.getNumRawDataModules(E)/8),q=I-k%I,Q=Math.floor(k/I);let z=[];const de=Bt.reedSolomonComputeDivisor(M);for(let K=0,Se=0;K<I;K++){let Ve=T.slice(Se,Se+Q-M+(K<q?0:1));Se+=Ve.length;const ke=Bt.reedSolomonComputeRemainder(Ve,de);K<q&&Ve.push(0),z.push(Ve.concat(ke))}let Ee=[];for(let K=0;K<z[0].length;K++)z.forEach((Se,Ve)=>{(K!=Q-M||Ve>=q)&&Ee.push(Se[K])});return u(Ee.length==k),Ee}drawCodewords(T){if(T.length!=Math.floor(Bt.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let E=0;for(let C=this.size-1;C>=1;C-=2){C==6&&(C=5);for(let I=0;I<this.size;I++)for(let M=0;M<2;M++){const k=C-M,Q=(C+1&2)==0?this.size-1-I:I;!this.isFunction[Q][k]&&E<T.length*8&&(this.modules[Q][k]=a(T[E>>>3],7-(E&7)),E++)}}u(E==T.length*8)}applyMask(T){if(T<0||T>7)throw new RangeError("Mask value out of range");for(let E=0;E<this.size;E++)for(let C=0;C<this.size;C++){let I;switch(T){case 0:I=(C+E)%2==0;break;case 1:I=E%2==0;break;case 2:I=C%3==0;break;case 3:I=(C+E)%3==0;break;case 4:I=(Math.floor(C/3)+Math.floor(E/2))%2==0;break;case 5:I=C*E%2+C*E%3==0;break;case 6:I=(C*E%2+C*E%3)%2==0;break;case 7:I=((C+E)%2+C*E%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[E][C]&&I&&(this.modules[E][C]=!this.modules[E][C])}}getPenaltyScore(){let T=0;for(let M=0;M<this.size;M++){let k=!1,q=0,Q=[0,0,0,0,0,0,0];for(let z=0;z<this.size;z++)this.modules[M][z]==k?(q++,q==5?T+=Bt.PENALTY_N1:q>5&&T++):(this.finderPenaltyAddHistory(q,Q),k||(T+=this.finderPenaltyCountPatterns(Q)*Bt.PENALTY_N3),k=this.modules[M][z],q=1);T+=this.finderPenaltyTerminateAndCount(k,q,Q)*Bt.PENALTY_N3}for(let M=0;M<this.size;M++){let k=!1,q=0,Q=[0,0,0,0,0,0,0];for(let z=0;z<this.size;z++)this.modules[z][M]==k?(q++,q==5?T+=Bt.PENALTY_N1:q>5&&T++):(this.finderPenaltyAddHistory(q,Q),k||(T+=this.finderPenaltyCountPatterns(Q)*Bt.PENALTY_N3),k=this.modules[z][M],q=1);T+=this.finderPenaltyTerminateAndCount(k,q,Q)*Bt.PENALTY_N3}for(let M=0;M<this.size-1;M++)for(let k=0;k<this.size-1;k++){const q=this.modules[M][k];q==this.modules[M][k+1]&&q==this.modules[M+1][k]&&q==this.modules[M+1][k+1]&&(T+=Bt.PENALTY_N2)}let E=0;for(const M of this.modules)E=M.reduce((k,q)=>k+(q?1:0),E);const C=this.size*this.size,I=Math.ceil(Math.abs(E*20-C*10)/C)-1;return u(0<=I&&I<=9),T+=I*Bt.PENALTY_N4,u(0<=T&&T<=2568888),T}getAlignmentPatternPositions(){if(this.version==1)return[];{const T=Math.floor(this.version/7)+2,E=this.version==32?26:Math.ceil((this.version*4+4)/(T*2-2))*2;let C=[6];for(let I=this.size-7;C.length<T;I-=E)C.splice(1,0,I);return C}}static getNumRawDataModules(T){if(T<Bt.MIN_VERSION||T>Bt.MAX_VERSION)throw new RangeError("Version number out of range");let E=(16*T+128)*T+64;if(T>=2){const C=Math.floor(T/7)+2;E-=(25*C-10)*C-55,T>=7&&(E-=36)}return u(208<=E&&E<=29648),E}static getNumDataCodewords(T,E){return Math.floor(Bt.getNumRawDataModules(T)/8)-Bt.ECC_CODEWORDS_PER_BLOCK[E.ordinal][T]*Bt.NUM_ERROR_CORRECTION_BLOCKS[E.ordinal][T]}static reedSolomonComputeDivisor(T){if(T<1||T>255)throw new RangeError("Degree out of range");let E=[];for(let I=0;I<T-1;I++)E.push(0);E.push(1);let C=1;for(let I=0;I<T;I++){for(let M=0;M<E.length;M++)E[M]=Bt.reedSolomonMultiply(E[M],C),M+1<E.length&&(E[M]^=E[M+1]);C=Bt.reedSolomonMultiply(C,2)}return E}static reedSolomonComputeRemainder(T,E){let C=E.map(I=>0);for(const I of T){const M=I^C.shift();C.push(0),E.forEach((k,q)=>C[q]^=Bt.reedSolomonMultiply(k,M))}return C}static reedSolomonMultiply(T,E){if(T>>>8||E>>>8)throw new RangeError("Byte out of range");let C=0;for(let I=7;I>=0;I--)C=C<<1^(C>>>7)*285,C^=(E>>>I&1)*T;return u(C>>>8==0),C}finderPenaltyCountPatterns(T){const E=T[1];u(E<=this.size*3);const C=E>0&&T[2]==E&&T[3]==E*3&&T[4]==E&&T[5]==E;return(C&&T[0]>=E*4&&T[6]>=E?1:0)+(C&&T[6]>=E*4&&T[0]>=E?1:0)}finderPenaltyTerminateAndCount(T,E,C){return T&&(this.finderPenaltyAddHistory(E,C),E=0),E+=this.size,this.finderPenaltyAddHistory(E,C),this.finderPenaltyCountPatterns(C)}finderPenaltyAddHistory(T,E){E[0]==0&&(T+=this.size),E.pop(),E.unshift(T)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],i.QrCode=e;function n(b,T,E){if(T<0||T>31||b>>>T)throw new RangeError("Value out of range");for(let C=T-1;C>=0;C--)E.push(b>>>C&1)}function a(b,T){return(b>>>T&1)!=0}function u(b){if(!b)throw new Error("Assertion error")}const f=class Jn{constructor(T,E,C){if(this.mode=T,this.numChars=E,this.bitData=C,E<0)throw new RangeError("Invalid argument");this.bitData=C.slice()}static makeBytes(T){let E=[];for(const C of T)n(C,8,E);return new Jn(Jn.Mode.BYTE,T.length,E)}static makeNumeric(T){if(!Jn.isNumeric(T))throw new RangeError("String contains non-numeric characters");let E=[];for(let C=0;C<T.length;){const I=Math.min(T.length-C,3);n(parseInt(T.substring(C,C+I),10),I*3+1,E),C+=I}return new Jn(Jn.Mode.NUMERIC,T.length,E)}static makeAlphanumeric(T){if(!Jn.isAlphanumeric(T))throw new RangeError("String contains unencodable characters in alphanumeric mode");let E=[],C;for(C=0;C+2<=T.length;C+=2){let I=Jn.ALPHANUMERIC_CHARSET.indexOf(T.charAt(C))*45;I+=Jn.ALPHANUMERIC_CHARSET.indexOf(T.charAt(C+1)),n(I,11,E)}return C<T.length&&n(Jn.ALPHANUMERIC_CHARSET.indexOf(T.charAt(C)),6,E),new Jn(Jn.Mode.ALPHANUMERIC,T.length,E)}static makeSegments(T){return T==""?[]:Jn.isNumeric(T)?[Jn.makeNumeric(T)]:Jn.isAlphanumeric(T)?[Jn.makeAlphanumeric(T)]:[Jn.makeBytes(Jn.toUtf8ByteArray(T))]}static makeEci(T){let E=[];if(T<0)throw new RangeError("ECI assignment value out of range");if(T<128)n(T,8,E);else if(T<16384)n(2,2,E),n(T,14,E);else if(T<1e6)n(6,3,E),n(T,21,E);else throw new RangeError("ECI assignment value out of range");return new Jn(Jn.Mode.ECI,0,E)}static isNumeric(T){return Jn.NUMERIC_REGEX.test(T)}static isAlphanumeric(T){return Jn.ALPHANUMERIC_REGEX.test(T)}getData(){return this.bitData.slice()}static getTotalBits(T,E){let C=0;for(const I of T){const M=I.mode.numCharCountBits(E);if(I.numChars>=1<<M)return 1/0;C+=4+M+I.bitData.length}return C}static toUtf8ByteArray(T){T=encodeURI(T);let E=[];for(let C=0;C<T.length;C++)T.charAt(C)!="%"?E.push(T.charCodeAt(C)):(E.push(parseInt(T.substring(C+1,C+3),16)),C+=2);return E}};f.NUMERIC_REGEX=/^[0-9]*$/,f.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,f.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let x=f;i.QrSegment=f})(il||(il={}));(i=>{(e=>{const n=class{constructor(u,f){this.ordinal=u,this.formatBits=f}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),e.Ecc=n})(i.QrCode||(i.QrCode={}))})(il||(il={}));(i=>{(e=>{const n=class{constructor(u,f){this.modeBits=u,this.numBitsCharCount=f}numCharCountBits(u){return this.numBitsCharCount[Math.floor((u+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),e.Mode=n})(i.QrSegment||(i.QrSegment={}))})(il||(il={}));var Yl=il;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var CR={L:Yl.QrCode.Ecc.LOW,M:Yl.QrCode.Ecc.MEDIUM,Q:Yl.QrCode.Ecc.QUARTILE,H:Yl.QrCode.Ecc.HIGH},Mw=128,Lw="L",Bw="#FFFFFF",Pw="#000000",kw=!1,Uw=1,vR=4,IR=0,NR=.1;function Vw(i,e=0){const n=[];return i.forEach(function(a,u){let f=null;a.forEach(function(x,b){if(!x&&f!==null){n.push(`M${f+e} ${u+e}h${b-f}v1H${f+e}z`),f=null;return}if(b===a.length-1){if(!x)return;f===null?n.push(`M${b+e},${u+e} h1v1H${b+e}z`):n.push(`M${f+e},${u+e} h${b+1-f}v1H${f+e}z`);return}x&&f===null&&(f=b)})}),n.join("")}function jw(i,e){return i.slice().map((n,a)=>a<e.y||a>=e.y+e.h?n:n.map((u,f)=>f<e.x||f>=e.x+e.w?u:!1))}function RR(i,e,n,a){if(a==null)return null;const u=i.length+n*2,f=Math.floor(e*NR),x=u/e,b=(a.width||f)*x,T=(a.height||f)*x,E=a.x==null?i.length/2-b/2:a.x*x,C=a.y==null?i.length/2-T/2:a.y*x,I=a.opacity==null?1:a.opacity;let M=null;if(a.excavate){let q=Math.floor(E),Q=Math.floor(C),z=Math.ceil(b+E-q),de=Math.ceil(T+C-Q);M={x:q,y:Q,w:z,h:de}}const k=a.crossOrigin;return{x:E,y:C,h:T,w:b,excavation:M,opacity:I,crossOrigin:k}}function OR(i,e){return e!=null?Math.max(Math.floor(e),0):i?vR:IR}function Fw({value:i,level:e,minVersion:n,includeMargin:a,marginSize:u,imageSettings:f,size:x,boostLevel:b}){let T=gi.useMemo(()=>{const q=(Array.isArray(i)?i:[i]).reduce((Q,z)=>(Q.push(...Yl.QrSegment.makeSegments(z)),Q),[]);return Yl.QrCode.encodeSegments(q,CR[e],n,void 0,void 0,b)},[i,e,n,b]);const{cells:E,margin:C,numCells:I,calculatedImageSettings:M}=gi.useMemo(()=>{let k=T.getModules();const q=OR(a,u),Q=k.length+q*2,z=RR(k,x,q,f);return{cells:k,margin:q,numCells:Q,calculatedImageSettings:z}},[T,x,f,a,u]);return{qrcode:T,margin:C,cells:E,numCells:I,calculatedImageSettings:M}}var DR=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),MR=gi.forwardRef(function(e,n){const a=e,{value:u,size:f=Mw,level:x=Lw,bgColor:b=Bw,fgColor:T=Pw,includeMargin:E=kw,minVersion:C=Uw,boostLevel:I,marginSize:M,imageSettings:k}=a,Q=z1(a,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:z}=Q,de=z1(Q,["style"]),Ee=k==null?void 0:k.src,K=gi.useRef(null),Se=gi.useRef(null),Ve=gi.useCallback($e=>{K.current=$e,typeof n=="function"?n($e):n&&(n.current=$e)},[n]),[ke,j]=gi.useState(!1),{margin:G,cells:V,numCells:te,calculatedImageSettings:W}=Fw({value:u,level:x,minVersion:C,boostLevel:I,includeMargin:E,marginSize:M,imageSettings:k,size:f});gi.useEffect(()=>{if(K.current!=null){const $e=K.current,he=$e.getContext("2d");if(!he)return;let me=V;const we=Se.current,Ge=W!=null&&we!==null&&we.complete&&we.naturalHeight!==0&&we.naturalWidth!==0;Ge&&W.excavation!=null&&(me=jw(V,W.excavation));const at=window.devicePixelRatio||1;$e.height=$e.width=f*at;const ft=f/te*at;he.scale(ft,ft),he.fillStyle=b,he.fillRect(0,0,te,te),he.fillStyle=T,DR?he.fill(new Path2D(Vw(me,G))):V.forEach(function(ne,Ae){ne.forEach(function(Be,Ue){Be&&he.fillRect(Ue+G,Ae+G,1,1)})}),W&&(he.globalAlpha=W.opacity),Ge&&he.drawImage(we,W.x+G,W.y+G,W.w,W.h)}}),gi.useEffect(()=>{j(!1)},[Ee]);const J=F1({height:f,width:f},z);let X=null;return Ee!=null&&(X=gi.createElement("img",{src:Ee,key:Ee,style:{display:"none"},onLoad:()=>{j(!0)},ref:Se,crossOrigin:W==null?void 0:W.crossOrigin})),gi.createElement(gi.Fragment,null,gi.createElement("canvas",F1({style:J,height:f,width:f,ref:Ve,role:"img"},de)),X)});MR.displayName="QRCodeCanvas";var zw=gi.forwardRef(function(e,n){const a=e,{value:u,size:f=Mw,level:x=Lw,bgColor:b=Bw,fgColor:T=Pw,includeMargin:E=kw,minVersion:C=Uw,boostLevel:I,title:M,marginSize:k,imageSettings:q}=a,Q=z1(a,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:z,cells:de,numCells:Ee,calculatedImageSettings:K}=Fw({value:u,level:x,minVersion:C,boostLevel:I,includeMargin:E,marginSize:k,imageSettings:q,size:f});let Se=de,Ve=null;q!=null&&K!=null&&(K.excavation!=null&&(Se=jw(de,K.excavation)),Ve=gi.createElement("image",{href:q.src,height:K.h,width:K.w,x:K.x+z,y:K.y+z,preserveAspectRatio:"none",opacity:K.opacity,crossOrigin:K.crossOrigin}));const ke=Vw(Se,z);return gi.createElement("svg",F1({height:f,width:f,viewBox:`0 0 ${Ee} ${Ee}`,ref:n,role:"img"},Q),!!M&&gi.createElement("title",null,M),gi.createElement("path",{fill:b,d:`M0,0 h${Ee}v${Ee}H0z`,shapeRendering:"crispEdges"}),gi.createElement("path",{fill:T,d:ke,shapeRendering:"crispEdges"}),Ve)});zw.displayName="QRCodeSVG";const LR=({user:i})=>{const[e,n]=se.useState([]),[a,u]=se.useState(null),[f,x]=se.useState(()=>{const E=new Date;return`${E.getFullYear()}-${String(E.getMonth()+1).padStart(2,"0")}`});se.useEffect(()=>{const E=uw(C=>{n(C.filter(I=>I.userId===i.id))});return()=>E()},[i.id]);const b=E=>new Date(E).toLocaleString("zh-TW",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),T=e.filter(E=>{const C=new Date(E.timestamp);return`${C.getFullYear()}-${String(C.getMonth()+1).padStart(2,"0")}`===f});return v.jsxs("div",{className:"space-y-8 animate-in slide-in-from-bottom-4 duration-500",children:[v.jsxs("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[v.jsxs("div",{children:[v.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:""}),v.jsx("p",{className:"text-slate-500 mt-1",children:""})]}),v.jsxs("div",{className:"flex items-center gap-3 bg-white p-2 rounded-2xl border border-slate-100 shadow-sm",children:[v.jsx(ox,{size:18,className:"text-indigo-600 ml-2"}),v.jsx("input",{type:"month",value:f,onChange:E=>x(E.target.value),className:"border-none bg-transparent font-bold text-slate-600 outline-none p-1"})]})]}),T.length===0?v.jsxs("div",{className:"bg-white rounded-3xl p-12 text-center border border-dashed border-slate-200",children:[v.jsx("div",{className:"bg-slate-50 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 text-slate-300",children:v.jsx(tf,{size:40})}),v.jsx("h2",{className:"text-xl font-bold text-slate-800",children:""}),v.jsx("p",{className:"text-slate-400 mt-2",children:""})]}):v.jsx("div",{className:"space-y-4",children:T.map(E=>v.jsxs("div",{className:"bg-white rounded-3xl border border-slate-100 p-6 flex flex-col md:flex-row md:items-center justify-between gap-6 shadow-sm hover:shadow-md transition-shadow",children:[v.jsxs("div",{className:"flex gap-4",children:[v.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center shrink-0 ${E.status==="completed"?"bg-green-50 text-green-600":E.status==="pending"?"bg-indigo-50 text-indigo-600":"bg-red-50 text-red-600"}`,children:E.status==="completed"?v.jsx(xC,{size:24}):E.status==="pending"?v.jsx(ef,{size:24}):v.jsx(gC,{size:24})}),v.jsxs("div",{children:[v.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:E.productName||""}),v.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-400 mt-1",children:[v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx(ox,{size:12})," ",b(E.timestamp||Date.now())]}),v.jsxs("span",{className:"font-bold text-indigo-600",children:["-",E.pointsSpent||0," "]})]})]})]}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("div",{className:`px-4 py-1.5 rounded-full text-xs font-bold ${E.status==="completed"?"bg-green-100 text-green-700":E.status==="pending"?"bg-indigo-100 text-indigo-700":"bg-red-100 text-red-700"}`,children:E.status==="completed"?"":E.status==="pending"?"":""}),E.status==="pending"&&v.jsxs("button",{onClick:()=>u(E),className:"flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-2.5 rounded-xl text-sm font-bold transition-all shadow-lg shadow-indigo-100",children:[v.jsx(VC,{size:18}),""]})]})]},E.id))}),a&&v.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:v.jsxs("div",{className:"bg-white rounded-[2.5rem] max-w-sm w-full p-10 shadow-2xl animate-in zoom-in-95 duration-200 text-center",children:[v.jsx("div",{className:"flex justify-end mb-4 -mt-4 -mr-4",children:v.jsx("button",{onClick:()=>u(null),className:"text-slate-400 hover:text-slate-600 p-2",children:v.jsx(Kl,{size:28})})}),v.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:""}),v.jsx("p",{className:"text-slate-500 mb-8 text-sm",children:""}),v.jsx("div",{className:"aspect-square bg-white border-8 border-indigo-50 rounded-3xl flex items-center justify-center mb-8 shadow-inner overflow-hidden p-6",children:v.jsx(zw,{value:a.qrCodeData,size:256,level:"H",includeMargin:!1,className:"w-full h-full"})}),v.jsx("div",{className:"bg-slate-50 p-4 rounded-2xl text-slate-400 font-mono text-xs mb-8 tracking-widest uppercase",children:a.qrCodeData}),v.jsx("p",{className:"font-bold text-slate-800 mb-1",children:a.productName}),v.jsxs("p",{className:"text-xs text-slate-400",children:["ID: ",a.id]})]})})]})};var He;(function(i){i[i.QR_CODE=0]="QR_CODE",i[i.AZTEC=1]="AZTEC",i[i.CODABAR=2]="CODABAR",i[i.CODE_39=3]="CODE_39",i[i.CODE_93=4]="CODE_93",i[i.CODE_128=5]="CODE_128",i[i.DATA_MATRIX=6]="DATA_MATRIX",i[i.MAXICODE=7]="MAXICODE",i[i.ITF=8]="ITF",i[i.EAN_13=9]="EAN_13",i[i.EAN_8=10]="EAN_8",i[i.PDF_417=11]="PDF_417",i[i.RSS_14=12]="RSS_14",i[i.RSS_EXPANDED=13]="RSS_EXPANDED",i[i.UPC_A=14]="UPC_A",i[i.UPC_E=15]="UPC_E",i[i.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(He||(He={}));var DE=new Map([[He.QR_CODE,"QR_CODE"],[He.AZTEC,"AZTEC"],[He.CODABAR,"CODABAR"],[He.CODE_39,"CODE_39"],[He.CODE_93,"CODE_93"],[He.CODE_128,"CODE_128"],[He.DATA_MATRIX,"DATA_MATRIX"],[He.MAXICODE,"MAXICODE"],[He.ITF,"ITF"],[He.EAN_13,"EAN_13"],[He.EAN_8,"EAN_8"],[He.PDF_417,"PDF_417"],[He.RSS_14,"RSS_14"],[He.RSS_EXPANDED,"RSS_EXPANDED"],[He.UPC_A,"UPC_A"],[He.UPC_E,"UPC_E"],[He.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),ME;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.URL=1]="URL"})(ME||(ME={}));function BR(i){return Object.values(He).includes(i)}var wo;(function(i){i[i.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",i[i.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(wo||(wo={}));var bs=(function(){function i(){}return i.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",i.SCAN_DEFAULT_FPS=2,i.DEFAULT_DISABLE_FLIP=!1,i.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,i.DEFAULT_SUPPORTED_SCAN_TYPE=[wo.SCAN_TYPE_CAMERA,wo.SCAN_TYPE_FILE],i})(),Hw=(function(){function i(e,n){this.format=e,this.formatName=n}return i.prototype.toString=function(){return this.formatName},i.create=function(e){if(!DE.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new i(e,DE.get(e))},i})(),LE=(function(){function i(){}return i.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},i.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},i})(),H1;(function(i){i[i.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",i[i.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",i[i.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(H1||(H1={}));var Gw=(function(){function i(){}return i.createFrom=function(e){return{errorMessage:e,type:H1.UNKWOWN_ERROR}},i})(),Yw=(function(){function i(e){this.verbose=e}return i.prototype.log=function(e){this.verbose&&console.log(e)},i.prototype.warn=function(e){this.verbose&&console.warn(e)},i.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},i.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},i})();function Vs(i){return typeof i>"u"||i===null}function PR(i,e,n){return i>n?n:i<e?e:i}var Xl=(function(){function i(){}return i.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},i.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},i.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},i.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},i.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},i.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},i.scannerPaused=function(){return"Scanner paused"},i})(),mn=(function(){function i(){}return i.scanningStatus=function(){return"Scanning"},i.idleStatus=function(){return"Idle"},i.errorStatus=function(){return"Error"},i.permissionStatus=function(){return"Permission"},i.noCameraFoundErrorStatus=function(){return"No Cameras"},i.lastMatch=function(e){return"Last Match: ".concat(e)},i.codeScannerTitle=function(){return"Code Scanner"},i.cameraPermissionTitle=function(){return"Request Camera Permissions"},i.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},i.noCameraFound=function(){return"No camera found"},i.scanButtonStopScanningText=function(){return"Stop Scanning"},i.scanButtonStartScanningText=function(){return"Start Scanning"},i.torchOnButton=function(){return"Switch On Torch"},i.torchOffButton=function(){return"Switch Off Torch"},i.torchOnFailedMessage=function(){return"Failed to turn on torch"},i.torchOffFailedMessage=function(){return"Failed to turn off torch"},i.scanButtonScanningStarting=function(){return"Launching Camera..."},i.textIfCameraScanSelected=function(){return"Scan an Image File"},i.textIfFileScanSelected=function(){return"Scan using camera directly"},i.selectCamera=function(){return"Select Camera"},i.fileSelectionChooseImage=function(){return"Choose Image"},i.fileSelectionChooseAnother=function(){return"Choose Another"},i.fileSelectionNoImageSelected=function(){return"No image choosen"},i.anonymousCameraPrefix=function(){return"Anonymous Camera"},i.dragAndDropMessage=function(){return"Or drop an image to scan"},i.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},i.zoom=function(){return"zoom"},i.loadingImage=function(){return"Loading image..."},i.cameraScanAltText=function(){return"Camera based scan"},i.fileScanAltText=function(){return"Fule based scan"},i})(),BE=(function(){function i(){}return i.poweredBy=function(){return"Powered by "},i.reportIssues=function(){return"Report issues"},i})(),Xw=(function(){function i(){}return i.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var a=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(a,"."),!0),!1}for(var u=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],f=new Set(u),x=Object.keys(e),b=0,T=x;b<T.length;b++){var E=T[b];if(f.has(E))return n.logError("".concat(E," is not supported videoConstaints."),!0),!1}return!0},i})(),eu={exports:{}},kR=eu.exports,PE;function UR(){return PE||(PE=1,(function(i,e){(function(n,a){a(e)})(kR,(function(n){function a(L){return L==null}var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,r){L.__proto__=r}||function(L,r){for(var o in r)r.hasOwnProperty(o)&&(L[o]=r[o])};function f(L,r){u(L,r);function o(){this.constructor=L}L.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}function x(L,r){var o=Object.setPrototypeOf;o?o(L,r):L.__proto__=r}function b(L,r){r===void 0&&(r=L.constructor);var o=Error.captureStackTrace;o&&o(L,r)}var T=(function(L){f(r,L);function r(o){var l=this.constructor,h=L.call(this,o)||this;return Object.defineProperty(h,"name",{value:l.name,enumerable:!1}),x(h,l.prototype),b(h),h}return r})(Error);class E extends T{constructor(r=void 0){super(r),this.message=r}getKind(){return this.constructor.kind}}E.kind="Exception";class C extends E{}C.kind="ArgumentException";class I extends E{}I.kind="IllegalArgumentException";class M{constructor(r){if(this.binarizer=r,r===null)throw new I("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(r,o){return this.binarizer.getBlackRow(r,o)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(r,o,l,h){const d=this.binarizer.getLuminanceSource().crop(r,o,l,h);return new M(this.binarizer.createBinarizer(d))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new M(this.binarizer.createBinarizer(r))}rotateCounterClockwise45(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new M(this.binarizer.createBinarizer(r))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class k extends E{static getChecksumInstance(){return new k}}k.kind="ChecksumException";class q{constructor(r){this.source=r}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class Q{static arraycopy(r,o,l,h,d){for(;d--;)l[h++]=r[o++]}static currentTimeMillis(){return Date.now()}}class z extends E{}z.kind="IndexOutOfBoundsException";class de extends z{constructor(r=void 0,o=void 0){super(o),this.index=r,this.message=o}}de.kind="ArrayIndexOutOfBoundsException";class Ee{static fill(r,o){for(let l=0,h=r.length;l<h;l++)r[l]=o}static fillWithin(r,o,l,h){Ee.rangeCheck(r.length,o,l);for(let d=o;d<l;d++)r[d]=h}static rangeCheck(r,o,l){if(o>l)throw new I("fromIndex("+o+") > toIndex("+l+")");if(o<0)throw new de(o);if(l>r)throw new de(l)}static asList(...r){return r}static create(r,o,l){return Array.from({length:r}).map(d=>Array.from({length:o}).fill(l))}static createInt32Array(r,o,l){return Array.from({length:r}).map(d=>Int32Array.from({length:o}).fill(l))}static equals(r,o){if(!r||!o||!r.length||!o.length||r.length!==o.length)return!1;for(let l=0,h=r.length;l<h;l++)if(r[l]!==o[l])return!1;return!0}static hashCode(r){if(r===null)return 0;let o=1;for(const l of r)o=31*o+l;return o}static fillUint8Array(r,o){for(let l=0;l!==r.length;l++)r[l]=o}static copyOf(r,o){return r.slice(0,o)}static copyOfUint8Array(r,o){if(r.length<=o){const l=new Uint8Array(o);return l.set(r),l}return r.slice(0,o)}static copyOfRange(r,o,l){const h=l-o,d=new Int32Array(h);return Q.arraycopy(r,o,d,0,h),d}static binarySearch(r,o,l){l===void 0&&(l=Ee.numberComparator);let h=0,d=r.length-1;for(;h<=d;){const m=d+h>>1,y=l(o,r[m]);if(y>0)h=m+1;else if(y<0)d=m-1;else return m}return-h-1}static numberComparator(r,o){return r-o}}class K{static numberOfTrailingZeros(r){let o;if(r===0)return 32;let l=31;return o=r<<16,o!==0&&(l-=16,r=o),o=r<<8,o!==0&&(l-=8,r=o),o=r<<4,o!==0&&(l-=4,r=o),o=r<<2,o!==0&&(l-=2,r=o),l-(r<<1>>>31)}static numberOfLeadingZeros(r){if(r===0)return 32;let o=1;return r>>>16||(o+=16,r<<=16),r>>>24||(o+=8,r<<=8),r>>>28||(o+=4,r<<=4),r>>>30||(o+=2,r<<=2),o-=r>>>31,o}static toHexString(r){return r.toString(16)}static toBinaryString(r){return String(parseInt(String(r),2))}static bitCount(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),r=r+(r>>>4)&252645135,r=r+(r>>>8),r=r+(r>>>16),r&63}static truncDivision(r,o){return Math.trunc(r/o)}static parseInt(r,o=void 0){return parseInt(r,o)}}K.MIN_VALUE_32_BITS=-2147483648,K.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Se{constructor(r,o){r===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=r,o==null?this.bits=Se.makeArray(r):this.bits=o)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(r){if(r>this.bits.length*32){const o=Se.makeArray(r);Q.arraycopy(this.bits,0,o,0,this.bits.length),this.bits=o}}get(r){return(this.bits[Math.floor(r/32)]&1<<(r&31))!==0}set(r){this.bits[Math.floor(r/32)]|=1<<(r&31)}flip(r){this.bits[Math.floor(r/32)]^=1<<(r&31)}getNextSet(r){const o=this.size;if(r>=o)return o;const l=this.bits;let h=Math.floor(r/32),d=l[h];d&=~((1<<(r&31))-1);const m=l.length;for(;d===0;){if(++h===m)return o;d=l[h]}const y=h*32+K.numberOfTrailingZeros(d);return y>o?o:y}getNextUnset(r){const o=this.size;if(r>=o)return o;const l=this.bits;let h=Math.floor(r/32),d=~l[h];d&=~((1<<(r&31))-1);const m=l.length;for(;d===0;){if(++h===m)return o;d=~l[h]}const y=h*32+K.numberOfTrailingZeros(d);return y>o?o:y}setBulk(r,o){this.bits[Math.floor(r/32)]=o}setRange(r,o){if(o<r||r<0||o>this.size)throw new I;if(o===r)return;o--;const l=Math.floor(r/32),h=Math.floor(o/32),d=this.bits;for(let m=l;m<=h;m++){const y=m>l?0:r&31,S=(2<<(m<h?31:o&31))-(1<<y);d[m]|=S}}clear(){const r=this.bits.length,o=this.bits;for(let l=0;l<r;l++)o[l]=0}isRange(r,o,l){if(o<r||r<0||o>this.size)throw new I;if(o===r)return!0;o--;const h=Math.floor(r/32),d=Math.floor(o/32),m=this.bits;for(let y=h;y<=d;y++){const A=y>h?0:r&31,R=(2<<(y<d?31:o&31))-(1<<A)&4294967295;if((m[y]&R)!==(l?R:0))return!1}return!0}appendBit(r){this.ensureCapacity(this.size+1),r&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(r,o){if(o<0||o>32)throw new I("Num bits must be between 0 and 32");this.ensureCapacity(this.size+o);for(let l=o;l>0;l--)this.appendBit((r>>l-1&1)===1)}appendBitArray(r){const o=r.size;this.ensureCapacity(this.size+o);for(let l=0;l<o;l++)this.appendBit(r.get(l))}xor(r){if(this.size!==r.size)throw new I("Sizes don't match");const o=this.bits;for(let l=0,h=o.length;l<h;l++)o[l]^=r.bits[l]}toBytes(r,o,l,h){for(let d=0;d<h;d++){let m=0;for(let y=0;y<8;y++)this.get(r)&&(m|=1<<7-y),r++;o[l+d]=m}}getBitArray(){return this.bits}reverse(){const r=new Int32Array(this.bits.length),o=Math.floor((this.size-1)/32),l=o+1,h=this.bits;for(let d=0;d<l;d++){let m=h[d];m=m>>1&1431655765|(m&1431655765)<<1,m=m>>2&858993459|(m&858993459)<<2,m=m>>4&252645135|(m&252645135)<<4,m=m>>8&16711935|(m&16711935)<<8,m=m>>16&65535|(m&65535)<<16,r[o-d]=m}if(this.size!==l*32){const d=l*32-this.size;let m=r[0]>>>d;for(let y=1;y<l;y++){const A=r[y];m|=A<<32-d,r[y-1]=m,m=A>>>d}r[l-1]=m}this.bits=r}static makeArray(r){return new Int32Array(Math.floor((r+31)/32))}equals(r){if(!(r instanceof Se))return!1;const o=r;return this.size===o.size&&Ee.equals(this.bits,o.bits)}hashCode(){return 31*this.size+Ee.hashCode(this.bits)}toString(){let r="";for(let o=0,l=this.size;o<l;o++)(o&7)===0&&(r+=" "),r+=this.get(o)?"X":".";return r}clone(){return new Se(this.size,this.bits.slice())}}var Ve;(function(L){L[L.OTHER=0]="OTHER",L[L.PURE_BARCODE=1]="PURE_BARCODE",L[L.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",L[L.TRY_HARDER=3]="TRY_HARDER",L[L.CHARACTER_SET=4]="CHARACTER_SET",L[L.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",L[L.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",L[L.ASSUME_GS1=7]="ASSUME_GS1",L[L.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",L[L.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",L[L.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Ve||(Ve={}));var ke=Ve;class j extends E{static getFormatInstance(){return new j}}j.kind="FormatException";var G;(function(L){L[L.Cp437=0]="Cp437",L[L.ISO8859_1=1]="ISO8859_1",L[L.ISO8859_2=2]="ISO8859_2",L[L.ISO8859_3=3]="ISO8859_3",L[L.ISO8859_4=4]="ISO8859_4",L[L.ISO8859_5=5]="ISO8859_5",L[L.ISO8859_6=6]="ISO8859_6",L[L.ISO8859_7=7]="ISO8859_7",L[L.ISO8859_8=8]="ISO8859_8",L[L.ISO8859_9=9]="ISO8859_9",L[L.ISO8859_10=10]="ISO8859_10",L[L.ISO8859_11=11]="ISO8859_11",L[L.ISO8859_13=12]="ISO8859_13",L[L.ISO8859_14=13]="ISO8859_14",L[L.ISO8859_15=14]="ISO8859_15",L[L.ISO8859_16=15]="ISO8859_16",L[L.SJIS=16]="SJIS",L[L.Cp1250=17]="Cp1250",L[L.Cp1251=18]="Cp1251",L[L.Cp1252=19]="Cp1252",L[L.Cp1256=20]="Cp1256",L[L.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",L[L.UTF8=22]="UTF8",L[L.ASCII=23]="ASCII",L[L.Big5=24]="Big5",L[L.GB18030=25]="GB18030",L[L.EUC_KR=26]="EUC_KR"})(G||(G={}));class V{constructor(r,o,l,...h){this.valueIdentifier=r,this.name=l,typeof o=="number"?this.values=Int32Array.from([o]):this.values=o,this.otherEncodingNames=h,V.VALUE_IDENTIFIER_TO_ECI.set(r,this),V.NAME_TO_ECI.set(l,this);const d=this.values;for(let m=0,y=d.length;m!==y;m++){const A=d[m];V.VALUES_TO_ECI.set(A,this)}for(const m of h)V.NAME_TO_ECI.set(m,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(r){if(r<0||r>=900)throw new j("incorect value");const o=V.VALUES_TO_ECI.get(r);if(o===void 0)throw new j("incorect value");return o}static getCharacterSetECIByName(r){const o=V.NAME_TO_ECI.get(r);if(o===void 0)throw new j("incorect value");return o}equals(r){if(!(r instanceof V))return!1;const o=r;return this.getName()===o.getName()}}V.VALUE_IDENTIFIER_TO_ECI=new Map,V.VALUES_TO_ECI=new Map,V.NAME_TO_ECI=new Map,V.Cp437=new V(G.Cp437,Int32Array.from([0,2]),"Cp437"),V.ISO8859_1=new V(G.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),V.ISO8859_2=new V(G.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),V.ISO8859_3=new V(G.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),V.ISO8859_4=new V(G.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),V.ISO8859_5=new V(G.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),V.ISO8859_6=new V(G.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),V.ISO8859_7=new V(G.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),V.ISO8859_8=new V(G.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),V.ISO8859_9=new V(G.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),V.ISO8859_10=new V(G.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),V.ISO8859_11=new V(G.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),V.ISO8859_13=new V(G.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),V.ISO8859_14=new V(G.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),V.ISO8859_15=new V(G.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),V.ISO8859_16=new V(G.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),V.SJIS=new V(G.SJIS,20,"SJIS","Shift_JIS"),V.Cp1250=new V(G.Cp1250,21,"Cp1250","windows-1250"),V.Cp1251=new V(G.Cp1251,22,"Cp1251","windows-1251"),V.Cp1252=new V(G.Cp1252,23,"Cp1252","windows-1252"),V.Cp1256=new V(G.Cp1256,24,"Cp1256","windows-1256"),V.UnicodeBigUnmarked=new V(G.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),V.UTF8=new V(G.UTF8,26,"UTF8","UTF-8"),V.ASCII=new V(G.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),V.Big5=new V(G.Big5,28,"Big5"),V.GB18030=new V(G.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),V.EUC_KR=new V(G.EUC_KR,30,"EUC_KR","EUC-KR");class te extends E{}te.kind="UnsupportedOperationException";class W{static decode(r,o){const l=this.encodingName(o);return this.customDecoder?this.customDecoder(r,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(r,l):new TextDecoder(l).decode(r)}static shouldDecodeOnFallback(r){return!W.isBrowser()&&r==="ISO-8859-1"}static encode(r,o){const l=this.encodingName(o);return this.customEncoder?this.customEncoder(r,l):typeof TextEncoder>"u"?this.encodeFallback(r):new TextEncoder().encode(r)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(r){return typeof r=="string"?r:r.getName()}static encodingCharacterSet(r){return r instanceof V?r:V.getCharacterSetECIByName(r)}static decodeFallback(r,o){const l=this.encodingCharacterSet(o);if(W.isDecodeFallbackSupported(l)){let h="";for(let d=0,m=r.length;d<m;d++){let y=r[d].toString(16);y.length<2&&(y="0"+y),h+="%"+y}return decodeURIComponent(h)}if(l.equals(V.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(r.buffer));throw new te(`Encoding ${this.encodingName(o)} not supported by fallback.`)}static isDecodeFallbackSupported(r){return r.equals(V.UTF8)||r.equals(V.ISO8859_1)||r.equals(V.ASCII)}static encodeFallback(r){const l=btoa(unescape(encodeURIComponent(r))).split(""),h=[];for(let d=0;d<l.length;d++)h.push(l[d].charCodeAt(0));return new Uint8Array(h)}}class J{static castAsNonUtf8Char(r,o=null){const l=o?o.getName():this.ISO88591;return W.decode(new Uint8Array([r]),l)}static guessEncoding(r,o){if(o!=null&&o.get(ke.CHARACTER_SET)!==void 0)return o.get(ke.CHARACTER_SET).toString();const l=r.length;let h=!0,d=!0,m=!0,y=0,A=0,S=0,R=0,B=0,P=0,Y=0,$=0,ee=0,le=0,xe=0;const Le=r.length>3&&r[0]===239&&r[1]===187&&r[2]===191;for(let De=0;De<l&&(h||d||m);De++){const Re=r[De]&255;m&&(y>0?(Re&128)===0?m=!1:y--:(Re&128)!==0&&((Re&64)===0?m=!1:(y++,(Re&32)===0?A++:(y++,(Re&16)===0?S++:(y++,(Re&8)===0?R++:m=!1))))),h&&(Re>127&&Re<160?h=!1:Re>159&&(Re<192||Re===215||Re===247)&&xe++),d&&(B>0?Re<64||Re===127||Re>252?d=!1:B--:Re===128||Re===160||Re>239?d=!1:Re>160&&Re<224?(P++,$=0,Y++,Y>ee&&(ee=Y)):Re>127?(B++,Y=0,$++,$>le&&(le=$)):(Y=0,$=0))}return m&&y>0&&(m=!1),d&&B>0&&(d=!1),m&&(Le||A+S+R>0)?J.UTF8:d&&(J.ASSUME_SHIFT_JIS||ee>=3||le>=3)?J.SHIFT_JIS:h&&d?ee===2&&P===2||xe*10>=l?J.SHIFT_JIS:J.ISO88591:h?J.ISO88591:d?J.SHIFT_JIS:m?J.UTF8:J.PLATFORM_DEFAULT_ENCODING}static format(r,...o){let l=-1;function h(m,y,A,S,R,B){if(m==="%%")return"%";if(o[++l]===void 0)return;m=S?parseInt(S.substr(1)):void 0;let P=R?parseInt(R.substr(1)):void 0,Y;switch(B){case"s":Y=o[l];break;case"c":Y=o[l][0];break;case"f":Y=parseFloat(o[l]).toFixed(m);break;case"p":Y=parseFloat(o[l]).toPrecision(m);break;case"e":Y=parseFloat(o[l]).toExponential(m);break;case"x":Y=parseInt(o[l]).toString(P||16);break;case"d":Y=parseFloat(parseInt(o[l],P||10).toPrecision(m)).toFixed(0);break}Y=typeof Y=="object"?JSON.stringify(Y):(+Y).toString(P);let $=parseInt(A),ee=A&&A[0]+""=="0"?"0":" ";for(;Y.length<$;)Y=y!==void 0?Y+ee:ee+Y;return Y}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(d,h)}static getBytes(r,o){return W.encode(r,o)}static getCharCode(r,o=0){return r.charCodeAt(o)}static getCharAt(r){return String.fromCharCode(r)}}J.SHIFT_JIS=V.SJIS.getName(),J.GB2312="GB2312",J.ISO88591=V.ISO8859_1.getName(),J.EUC_JP="EUC_JP",J.UTF8=V.UTF8.getName(),J.PLATFORM_DEFAULT_ENCODING=J.UTF8,J.ASSUME_SHIFT_JIS=!1;class X{constructor(r=""){this.value=r}enableDecoding(r){return this.encoding=r,this}append(r){return typeof r=="string"?this.value+=r.toString():this.encoding?this.value+=J.castAsNonUtf8Char(r,this.encoding):this.value+=String.fromCharCode(r),this}appendChars(r,o,l){for(let h=o;o<o+l;h++)this.append(r[h]);return this}length(){return this.value.length}charAt(r){return this.value.charAt(r)}deleteCharAt(r){this.value=this.value.substr(0,r)+this.value.substring(r+1)}setCharAt(r,o){this.value=this.value.substr(0,r)+o+this.value.substr(r+1)}substring(r,o){return this.value.substring(r,o)}setLengthToZero(){this.value=""}toString(){return this.value}insert(r,o){this.value=this.value.substr(0,r)+o+this.value.substr(r+o.length)}}class $e{constructor(r,o,l,h){if(this.width=r,this.height=o,this.rowSize=l,this.bits=h,o==null&&(o=r),this.height=o,r<1||o<1)throw new I("Both dimensions must be greater than 0");l==null&&(l=Math.floor((r+31)/32)),this.rowSize=l,h==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(r){const o=r.length,l=r[0].length,h=new $e(l,o);for(let d=0;d<o;d++){const m=r[d];for(let y=0;y<l;y++)m[y]&&h.set(y,d)}return h}static parseFromString(r,o,l){if(r===null)throw new I("stringRepresentation cannot be null");const h=new Array(r.length);let d=0,m=0,y=-1,A=0,S=0;for(;S<r.length;)if(r.charAt(S)===`
`||r.charAt(S)==="\r"){if(d>m){if(y===-1)y=d-m;else if(d-m!==y)throw new I("row lengths do not match");m=d,A++}S++}else if(r.substring(S,S+o.length)===o)S+=o.length,h[d]=!0,d++;else if(r.substring(S,S+l.length)===l)S+=l.length,h[d]=!1,d++;else throw new I("illegal character encountered: "+r.substring(S));if(d>m){if(y===-1)y=d-m;else if(d-m!==y)throw new I("row lengths do not match");A++}const R=new $e(y,A);for(let B=0;B<d;B++)h[B]&&R.set(Math.floor(B%y),Math.floor(B/y));return R}get(r,o){const l=o*this.rowSize+Math.floor(r/32);return(this.bits[l]>>>(r&31)&1)!==0}set(r,o){const l=o*this.rowSize+Math.floor(r/32);this.bits[l]|=1<<(r&31)&4294967295}unset(r,o){const l=o*this.rowSize+Math.floor(r/32);this.bits[l]&=~(1<<(r&31)&4294967295)}flip(r,o){const l=o*this.rowSize+Math.floor(r/32);this.bits[l]^=1<<(r&31)&4294967295}xor(r){if(this.width!==r.getWidth()||this.height!==r.getHeight()||this.rowSize!==r.getRowSize())throw new I("input matrix dimensions do not match");const o=new Se(Math.floor(this.width/32)+1),l=this.rowSize,h=this.bits;for(let d=0,m=this.height;d<m;d++){const y=d*l,A=r.getRow(d,o).getBitArray();for(let S=0;S<l;S++)h[y+S]^=A[S]}}clear(){const r=this.bits,o=r.length;for(let l=0;l<o;l++)r[l]=0}setRegion(r,o,l,h){if(o<0||r<0)throw new I("Left and top must be nonnegative");if(h<1||l<1)throw new I("Height and width must be at least 1");const d=r+l,m=o+h;if(m>this.height||d>this.width)throw new I("The region must fit inside the matrix");const y=this.rowSize,A=this.bits;for(let S=o;S<m;S++){const R=S*y;for(let B=r;B<d;B++)A[R+Math.floor(B/32)]|=1<<(B&31)&4294967295}}getRow(r,o){o==null||o.getSize()<this.width?o=new Se(this.width):o.clear();const l=this.rowSize,h=this.bits,d=r*l;for(let m=0;m<l;m++)o.setBulk(m*32,h[d+m]);return o}setRow(r,o){Q.arraycopy(o.getBitArray(),0,this.bits,r*this.rowSize,this.rowSize)}rotate180(){const r=this.getWidth(),o=this.getHeight();let l=new Se(r),h=new Se(r);for(let d=0,m=Math.floor((o+1)/2);d<m;d++)l=this.getRow(d,l),h=this.getRow(o-1-d,h),l.reverse(),h.reverse(),this.setRow(d,h),this.setRow(o-1-d,l)}getEnclosingRectangle(){const r=this.width,o=this.height,l=this.rowSize,h=this.bits;let d=r,m=o,y=-1,A=-1;for(let S=0;S<o;S++)for(let R=0;R<l;R++){const B=h[S*l+R];if(B!==0){if(S<m&&(m=S),S>A&&(A=S),R*32<d){let P=0;for(;(B<<31-P&4294967295)===0;)P++;R*32+P<d&&(d=R*32+P)}if(R*32+31>y){let P=31;for(;!(B>>>P);)P--;R*32+P>y&&(y=R*32+P)}}}return y<d||A<m?null:Int32Array.from([d,m,y-d+1,A-m+1])}getTopLeftOnBit(){const r=this.rowSize,o=this.bits;let l=0;for(;l<o.length&&o[l]===0;)l++;if(l===o.length)return null;const h=l/r;let d=l%r*32;const m=o[l];let y=0;for(;(m<<31-y&4294967295)===0;)y++;return d+=y,Int32Array.from([d,h])}getBottomRightOnBit(){const r=this.rowSize,o=this.bits;let l=o.length-1;for(;l>=0&&o[l]===0;)l--;if(l<0)return null;const h=Math.floor(l/r);let d=Math.floor(l%r)*32;const m=o[l];let y=31;for(;!(m>>>y);)y--;return d+=y,Int32Array.from([d,h])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(r){if(!(r instanceof $e))return!1;const o=r;return this.width===o.width&&this.height===o.height&&this.rowSize===o.rowSize&&Ee.equals(this.bits,o.bits)}hashCode(){let r=this.width;return r=31*r+this.width,r=31*r+this.height,r=31*r+this.rowSize,r=31*r+Ee.hashCode(this.bits),r}toString(r="X ",o="  ",l=`
`){return this.buildToString(r,o,l)}buildToString(r,o,l){let h=new X;for(let d=0,m=this.height;d<m;d++){for(let y=0,A=this.width;y<A;y++)h.append(this.get(y,d)?r:o);h.append(l)}return h.toString()}clone(){return new $e(this.width,this.height,this.rowSize,this.bits.slice())}}class he extends E{static getNotFoundInstance(){return new he}}he.kind="NotFoundException";class me extends q{constructor(r){super(r),this.luminances=me.EMPTY,this.buckets=new Int32Array(me.LUMINANCE_BUCKETS)}getBlackRow(r,o){const l=this.getLuminanceSource(),h=l.getWidth();o==null||o.getSize()<h?o=new Se(h):o.clear(),this.initArrays(h);const d=l.getRow(r,this.luminances),m=this.buckets;for(let A=0;A<h;A++)m[(d[A]&255)>>me.LUMINANCE_SHIFT]++;const y=me.estimateBlackPoint(m);if(h<3)for(let A=0;A<h;A++)(d[A]&255)<y&&o.set(A);else{let A=d[0]&255,S=d[1]&255;for(let R=1;R<h-1;R++){const B=d[R+1]&255;(S*4-A-B)/2<y&&o.set(R),A=S,S=B}}return o}getBlackMatrix(){const r=this.getLuminanceSource(),o=r.getWidth(),l=r.getHeight(),h=new $e(o,l);this.initArrays(o);const d=this.buckets;for(let A=1;A<5;A++){const S=Math.floor(l*A/5),R=r.getRow(S,this.luminances),B=Math.floor(o*4/5);for(let P=Math.floor(o/5);P<B;P++){const Y=R[P]&255;d[Y>>me.LUMINANCE_SHIFT]++}}const m=me.estimateBlackPoint(d),y=r.getMatrix();for(let A=0;A<l;A++){const S=A*o;for(let R=0;R<o;R++)(y[S+R]&255)<m&&h.set(R,A)}return h}createBinarizer(r){return new me(r)}initArrays(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));const o=this.buckets;for(let l=0;l<me.LUMINANCE_BUCKETS;l++)o[l]=0}static estimateBlackPoint(r){const o=r.length;let l=0,h=0,d=0;for(let R=0;R<o;R++)r[R]>d&&(h=R,d=r[R]),r[R]>l&&(l=r[R]);let m=0,y=0;for(let R=0;R<o;R++){const B=R-h,P=r[R]*B*B;P>y&&(m=R,y=P)}if(h>m){const R=h;h=m,m=R}if(m-h<=o/16)throw new he;let A=m-1,S=-1;for(let R=m-1;R>h;R--){const B=R-h,P=B*B*(m-R)*(l-r[R]);P>S&&(A=R,S=P)}return A<<me.LUMINANCE_SHIFT}}me.LUMINANCE_BITS=5,me.LUMINANCE_SHIFT=8-me.LUMINANCE_BITS,me.LUMINANCE_BUCKETS=1<<me.LUMINANCE_BITS,me.EMPTY=Uint8ClampedArray.from([0]);class we extends me{constructor(r){super(r),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const r=this.getLuminanceSource(),o=r.getWidth(),l=r.getHeight();if(o>=we.MINIMUM_DIMENSION&&l>=we.MINIMUM_DIMENSION){const h=r.getMatrix();let d=o>>we.BLOCK_SIZE_POWER;(o&we.BLOCK_SIZE_MASK)!==0&&d++;let m=l>>we.BLOCK_SIZE_POWER;(l&we.BLOCK_SIZE_MASK)!==0&&m++;const y=we.calculateBlackPoints(h,d,m,o,l),A=new $e(o,l);we.calculateThresholdForBlock(h,d,m,o,l,y,A),this.matrix=A}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(r){return new we(r)}static calculateThresholdForBlock(r,o,l,h,d,m,y){const A=d-we.BLOCK_SIZE,S=h-we.BLOCK_SIZE;for(let R=0;R<l;R++){let B=R<<we.BLOCK_SIZE_POWER;B>A&&(B=A);const P=we.cap(R,2,l-3);for(let Y=0;Y<o;Y++){let $=Y<<we.BLOCK_SIZE_POWER;$>S&&($=S);const ee=we.cap(Y,2,o-3);let le=0;for(let Le=-2;Le<=2;Le++){const De=m[P+Le];le+=De[ee-2]+De[ee-1]+De[ee]+De[ee+1]+De[ee+2]}const xe=le/25;we.thresholdBlock(r,$,B,xe,h,y)}}}static cap(r,o,l){return r<o?o:r>l?l:r}static thresholdBlock(r,o,l,h,d,m){for(let y=0,A=l*d+o;y<we.BLOCK_SIZE;y++,A+=d)for(let S=0;S<we.BLOCK_SIZE;S++)(r[A+S]&255)<=h&&m.set(o+S,l+y)}static calculateBlackPoints(r,o,l,h,d){const m=d-we.BLOCK_SIZE,y=h-we.BLOCK_SIZE,A=new Array(l);for(let S=0;S<l;S++){A[S]=new Int32Array(o);let R=S<<we.BLOCK_SIZE_POWER;R>m&&(R=m);for(let B=0;B<o;B++){let P=B<<we.BLOCK_SIZE_POWER;P>y&&(P=y);let Y=0,$=255,ee=0;for(let xe=0,Le=R*h+P;xe<we.BLOCK_SIZE;xe++,Le+=h){for(let De=0;De<we.BLOCK_SIZE;De++){const Re=r[Le+De]&255;Y+=Re,Re<$&&($=Re),Re>ee&&(ee=Re)}if(ee-$>we.MIN_DYNAMIC_RANGE)for(xe++,Le+=h;xe<we.BLOCK_SIZE;xe++,Le+=h)for(let De=0;De<we.BLOCK_SIZE;De++)Y+=r[Le+De]&255}let le=Y>>we.BLOCK_SIZE_POWER*2;if(ee-$<=we.MIN_DYNAMIC_RANGE&&(le=$/2,S>0&&B>0)){const xe=(A[S-1][B]+2*A[S][B-1]+A[S-1][B-1])/4;$<xe&&(le=xe)}A[S][B]=le}}return A}}we.BLOCK_SIZE_POWER=3,we.BLOCK_SIZE=1<<we.BLOCK_SIZE_POWER,we.BLOCK_SIZE_MASK=we.BLOCK_SIZE-1,we.MINIMUM_DIMENSION=we.BLOCK_SIZE*5,we.MIN_DYNAMIC_RANGE=24;class Ge{constructor(r,o){this.width=r,this.height=o}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(r,o,l,h){throw new te("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new te("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new te("This luminance source does not support rotation by 45 degrees.")}toString(){const r=new Uint8ClampedArray(this.width);let o=new X;for(let l=0;l<this.height;l++){const h=this.getRow(l,r);for(let d=0;d<this.width;d++){const m=h[d]&255;let y;m<64?y="#":m<128?y="+":m<192?y=".":y=" ",o.append(y)}o.append(`
`)}return o.toString()}}class at extends Ge{constructor(r){super(r.getWidth(),r.getHeight()),this.delegate=r}getRow(r,o){const l=this.delegate.getRow(r,o),h=this.getWidth();for(let d=0;d<h;d++)l[d]=255-(l[d]&255);return l}getMatrix(){const r=this.delegate.getMatrix(),o=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(o);for(let h=0;h<o;h++)l[h]=255-(r[h]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(r,o,l,h){return new at(this.delegate.crop(r,o,l,h))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new at(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new at(this.delegate.rotateCounterClockwise45())}}class ft extends Ge{constructor(r){super(r.width,r.height),this.canvas=r,this.tempCanvasElement=null,this.buffer=ft.makeBufferFromCanvasImageData(r)}static makeBufferFromCanvasImageData(r){const o=r.getContext("2d").getImageData(0,0,r.width,r.height);return ft.toGrayscaleBuffer(o.data,r.width,r.height)}static toGrayscaleBuffer(r,o,l){const h=new Uint8ClampedArray(o*l);for(let d=0,m=0,y=r.length;d<y;d+=4,m++){let A;if(r[d+3]===0)A=255;else{const R=r[d],B=r[d+1],P=r[d+2];A=306*R+601*B+117*P+512>>10}h[m]=A}return h}getRow(r,o){if(r<0||r>=this.getHeight())throw new I("Requested row is outside the image: "+r);const l=this.getWidth(),h=r*l;return o===null?o=this.buffer.slice(h,h+l):(o.length<l&&(o=new Uint8ClampedArray(l)),o.set(this.buffer.slice(h,h+l))),o}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(r,o,l,h){return super.crop(r,o,l,h),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement}rotate(r){const o=this.getTempCanvasElement(),l=o.getContext("2d"),h=r*ft.DEGREE_TO_RADIANS,d=this.canvas.width,m=this.canvas.height,y=Math.ceil(Math.abs(Math.cos(h))*d+Math.abs(Math.sin(h))*m),A=Math.ceil(Math.abs(Math.sin(h))*d+Math.abs(Math.cos(h))*m);return o.width=y,o.height=A,l.translate(y/2,A/2),l.rotate(h),l.drawImage(this.canvas,d/-2,m/-2),this.buffer=ft.makeBufferFromCanvasImageData(o),this}invert(){return new at(this)}}ft.DEGREE_TO_RADIANS=Math.PI/180;class ne{constructor(r,o,l){this.deviceId=r,this.label=o,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Ae=(globalThis||Oh||self||window||void 0)&&(globalThis||Oh||self||window||void 0).__awaiter||function(L,r,o,l){function h(d){return d instanceof o?d:new o(function(m){m(d)})}return new(o||(o=Promise))(function(d,m){function y(R){try{S(l.next(R))}catch(B){m(B)}}function A(R){try{S(l.throw(R))}catch(B){m(B)}}function S(R){R.done?d(R.value):h(R.value).then(y,A)}S((l=l.apply(L,r||[])).next())})};class Be{constructor(r,o=500,l){this.reader=r,this.timeBetweenScansMillis=o,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(r){this._timeBetweenDecodingAttempts=r<0?0:r}set hints(r){this._hints=r||null}get hints(){return this._hints}listVideoInputDevices(){return Ae(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const r=yield navigator.mediaDevices.enumerateDevices(),o=[];for(const l of r){const h=l.kind==="video"?"videoinput":l.kind;if(h!=="videoinput")continue;const d=l.deviceId||l.id,m=l.label||`Video device ${o.length+1}`,y=l.groupId,A={deviceId:d,label:m,kind:h,groupId:y};o.push(A)}return o})}getVideoInputDevices(){return Ae(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(o=>new ne(o.deviceId,o.label))})}findDeviceById(r){return Ae(this,void 0,void 0,function*(){const o=yield this.listVideoInputDevices();return o?o.find(l=>l.deviceId===r):null})}decodeFromInputVideoDevice(r,o){return Ae(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(r,o)})}decodeOnceFromVideoDevice(r,o){return Ae(this,void 0,void 0,function*(){this.reset();let l;r?l={deviceId:{exact:r}}:l={facingMode:"environment"};const h={video:l};return yield this.decodeOnceFromConstraints(h,o)})}decodeOnceFromConstraints(r,o){return Ae(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeOnceFromStream(l,o)})}decodeOnceFromStream(r,o){return Ae(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(r,o);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(r,o,l){return Ae(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(r,o,l)})}decodeFromVideoDevice(r,o,l){return Ae(this,void 0,void 0,function*(){let h;r?h={deviceId:{exact:r}}:h={facingMode:"environment"};const d={video:h};return yield this.decodeFromConstraints(d,o,l)})}decodeFromConstraints(r,o,l){return Ae(this,void 0,void 0,function*(){const h=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeFromStream(h,o,l)})}decodeFromStream(r,o,l){return Ae(this,void 0,void 0,function*(){this.reset();const h=yield this.attachStreamToVideo(r,o);return yield this.decodeContinuously(h,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(r,o){return Ae(this,void 0,void 0,function*(){const l=this.prepareVideoElement(o);return this.addVideoSource(l,r),this.videoElement=l,this.stream=r,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(r){return new Promise((o,l)=>this.playVideoOnLoad(r,()=>o()))}playVideoOnLoad(r,o){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(r),r.addEventListener("ended",this.videoEndedListener),r.addEventListener("canplay",this.videoCanPlayListener),r.addEventListener("playing",o),this.tryPlayVideo(r)}isVideoPlaying(r){return r.currentTime>0&&!r.paused&&!r.ended&&r.readyState>2}tryPlayVideo(r){return Ae(this,void 0,void 0,function*(){if(this.isVideoPlaying(r)){console.warn("Trying to play video that is already playing.");return}try{yield r.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(r,o){const l=document.getElementById(r);if(!l)throw new C(`element with id '${r}' not found`);if(l.nodeName.toLowerCase()!==o.toLowerCase())throw new C(`element with id '${r}' must be an ${o} element`);return l}decodeFromImage(r,o){if(!r&&!o)throw new C("either imageElement with a src set or an url must be provided");return o&&!r?this.decodeFromImageUrl(o):this.decodeFromImageElement(r)}decodeFromVideo(r,o){if(!r&&!o)throw new C("Either an element with a src set or an URL must be provided");return o&&!r?this.decodeFromVideoUrl(o):this.decodeFromVideoElement(r)}decodeFromVideoContinuously(r,o,l){if(r===void 0&&o===void 0)throw new C("Either an element with a src set or an URL must be provided");return o&&!r?this.decodeFromVideoUrlContinuously(o,l):this.decodeFromVideoElementContinuously(r,l)}decodeFromImageElement(r){if(!r)throw new C("An image element must be provided.");this.reset();const o=this.prepareImageElement(r);this.imageElement=o;let l;return this.isImageLoaded(o)?l=this.decodeOnce(o,!1,!0):l=this._decodeOnLoadImage(o),l}decodeFromVideoElement(r){const o=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideo(o)}decodeFromVideoElementContinuously(r,o){const l=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideoContinuously(l,o)}_decodeFromVideoElementSetup(r){if(!r)throw new C("A video element must be provided.");this.reset();const o=this.prepareVideoElement(r);return this.videoElement=o,o}decodeFromImageUrl(r){if(!r)throw new C("An URL must be provided.");this.reset();const o=this.prepareImageElement();this.imageElement=o;const l=this._decodeOnLoadImage(o);return o.src=r,l}decodeFromVideoUrl(r){if(!r)throw new C("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),l=this.decodeFromVideoElement(o);return o.src=r,l}decodeFromVideoUrlContinuously(r,o){if(!r)throw new C("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),h=this.decodeFromVideoElementContinuously(l,o);return l.src=r,h}_decodeOnLoadImage(r){return new Promise((o,l)=>{this.imageLoadedListener=()=>this.decodeOnce(r,!1,!0).then(o,l),r.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(r){return Ae(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(r),yield this.decodeOnce(r)})}_decodeOnLoadVideoContinuously(r,o){return Ae(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(r),this.decodeContinuously(r,o)})}isImageLoaded(r){return!(!r.complete||r.naturalWidth===0)}prepareImageElement(r){let o;return typeof r>"u"&&(o=document.createElement("img"),o.width=200,o.height=200),typeof r=="string"&&(o=this.getMediaElement(r,"img")),r instanceof HTMLImageElement&&(o=r),o}prepareVideoElement(r){let o;return!r&&typeof document<"u"&&(o=document.createElement("video"),o.width=200,o.height=200),typeof r=="string"&&(o=this.getMediaElement(r,"video")),r instanceof HTMLVideoElement&&(o=r),o.setAttribute("autoplay","true"),o.setAttribute("muted","true"),o.setAttribute("playsinline","true"),o}decodeOnce(r,o=!0,l=!0){this._stopAsyncDecode=!1;const h=(d,m)=>{if(this._stopAsyncDecode){m(new he("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const y=this.decode(r);d(y)}catch(y){const A=o&&y instanceof he,R=(y instanceof k||y instanceof j)&&l;if(A||R)return setTimeout(h,this._timeBetweenDecodingAttempts,d,m);m(y)}};return new Promise((d,m)=>h(d,m))}decodeContinuously(r,o){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const h=this.decode(r);o(h,null),setTimeout(l,this.timeBetweenScansMillis)}catch(h){o(null,h);const d=h instanceof k||h instanceof j,m=h instanceof he;(d||m)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(r){const o=this.createBinaryBitmap(r);return this.decodeBitmap(o)}_isHTMLVideoElement(r){return r.videoWidth!==0}drawFrameOnCanvas(r,o,l){o||(o={sx:0,sy:0,sWidth:r.videoWidth,sHeight:r.videoHeight,dx:0,dy:0,dWidth:r.videoWidth,dHeight:r.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(r,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}drawImageOnCanvas(r,o,l=this.captureCanvasContext){o||(o={sx:0,sy:0,sWidth:r.naturalWidth,sHeight:r.naturalHeight,dx:0,dy:0,dWidth:r.naturalWidth,dHeight:r.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(r,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}createBinaryBitmap(r){this.getCaptureCanvasContext(r),this._isHTMLVideoElement(r)?this.drawFrameOnCanvas(r):this.drawImageOnCanvas(r);const o=this.getCaptureCanvas(r),l=new ft(o),h=new we(l);return new M(h)}getCaptureCanvasContext(r){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(r).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(r){if(!this.captureCanvas){const o=this.createCaptureCanvas(r);this.captureCanvas=o}return this.captureCanvas}decodeBitmap(r){return this.reader.decode(r,this._hints)}createCaptureCanvas(r){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const o=document.createElement("canvas");let l,h;return typeof r<"u"&&(r instanceof HTMLVideoElement?(l=r.videoWidth,h=r.videoHeight):r instanceof HTMLImageElement&&(l=r.naturalWidth||r.width,h=r.naturalHeight||r.height)),o.style.width=l+"px",o.style.height=h+"px",o.width=l,o.height=h,o}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(r=>r.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(r,o){try{r.srcObject=o}catch{r.src=URL.createObjectURL(o)}}cleanVideoSource(r){try{r.srcObject=null}catch{r.src=""}this.videoElement.removeAttribute("src")}}class Ue{constructor(r,o,l=o==null?0:8*o.length,h,d,m=Q.currentTimeMillis()){this.text=r,this.rawBytes=o,this.numBits=l,this.resultPoints=h,this.format=d,this.timestamp=m,this.text=r,this.rawBytes=o,l==null?this.numBits=o==null?0:8*o.length:this.numBits=l,this.resultPoints=h,this.format=d,this.resultMetadata=null,m==null?this.timestamp=Q.currentTimeMillis():this.timestamp=m}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(r,o){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(r,o)}putAllMetadata(r){r!==null&&(this.resultMetadata===null?this.resultMetadata=r:this.resultMetadata=new Map(r))}addResultPoints(r){const o=this.resultPoints;if(o===null)this.resultPoints=r;else if(r!==null&&r.length>0){const l=new Array(o.length+r.length);Q.arraycopy(o,0,l,0,o.length),Q.arraycopy(r,0,l,o.length,r.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var et;(function(L){L[L.AZTEC=0]="AZTEC",L[L.CODABAR=1]="CODABAR",L[L.CODE_39=2]="CODE_39",L[L.CODE_93=3]="CODE_93",L[L.CODE_128=4]="CODE_128",L[L.DATA_MATRIX=5]="DATA_MATRIX",L[L.EAN_8=6]="EAN_8",L[L.EAN_13=7]="EAN_13",L[L.ITF=8]="ITF",L[L.MAXICODE=9]="MAXICODE",L[L.PDF_417=10]="PDF_417",L[L.QR_CODE=11]="QR_CODE",L[L.RSS_14=12]="RSS_14",L[L.RSS_EXPANDED=13]="RSS_EXPANDED",L[L.UPC_A=14]="UPC_A",L[L.UPC_E=15]="UPC_E",L[L.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(et||(et={}));var Me=et,dt;(function(L){L[L.OTHER=0]="OTHER",L[L.ORIENTATION=1]="ORIENTATION",L[L.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",L[L.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",L[L.ISSUE_NUMBER=4]="ISSUE_NUMBER",L[L.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",L[L.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",L[L.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",L[L.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",L[L.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",L[L.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(dt||(dt={}));var Et=dt;class Yt{constructor(r,o,l,h,d=-1,m=-1){this.rawBytes=r,this.text=o,this.byteSegments=l,this.ecLevel=h,this.structuredAppendSequenceNumber=d,this.structuredAppendParity=m,this.numBits=r==null?0:8*r.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(r){this.numBits=r}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(r){this.errorsCorrected=r}getErasures(){return this.erasures}setErasures(r){this.erasures=r}getOther(){return this.other}setOther(r){this.other=r}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Yi{exp(r){return this.expTable[r]}log(r){if(r===0)throw new I;return this.logTable[r]}static addOrSubtract(r,o){return r^o}}class En{constructor(r,o){if(o.length===0)throw new I;this.field=r;const l=o.length;if(l>1&&o[0]===0){let h=1;for(;h<l&&o[h]===0;)h++;h===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-h),Q.arraycopy(o,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);const o=this.coefficients;let l;if(r===1){l=0;for(let m=0,y=o.length;m!==y;m++){const A=o[m];l=Yi.addOrSubtract(l,A)}return l}l=o[0];const h=o.length,d=this.field;for(let m=1;m<h;m++)l=Yi.addOrSubtract(d.multiply(r,l),o[m]);return l}addOrSubtract(r){if(!this.field.equals(r.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero())return r;if(r.isZero())return this;let o=this.coefficients,l=r.coefficients;if(o.length>l.length){const m=o;o=l,l=m}let h=new Int32Array(l.length);const d=l.length-o.length;Q.arraycopy(l,0,h,0,d);for(let m=d;m<l.length;m++)h[m]=Yi.addOrSubtract(o[m-d],l[m]);return new En(this.field,h)}multiply(r){if(!this.field.equals(r.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero()||r.isZero())return this.field.getZero();const o=this.coefficients,l=o.length,h=r.coefficients,d=h.length,m=new Int32Array(l+d-1),y=this.field;for(let A=0;A<l;A++){const S=o[A];for(let R=0;R<d;R++)m[A+R]=Yi.addOrSubtract(m[A+R],y.multiply(S,h[R]))}return new En(y,m)}multiplyScalar(r){if(r===0)return this.field.getZero();if(r===1)return this;const o=this.coefficients.length,l=this.field,h=new Int32Array(o),d=this.coefficients;for(let m=0;m<o;m++)h[m]=l.multiply(d[m],r);return new En(l,h)}multiplyByMonomial(r,o){if(r<0)throw new I;if(o===0)return this.field.getZero();const l=this.coefficients,h=l.length,d=new Int32Array(h+r),m=this.field;for(let y=0;y<h;y++)d[y]=m.multiply(l[y],o);return new En(m,d)}divide(r){if(!this.field.equals(r.field))throw new I("GenericGFPolys do not have same GenericGF field");if(r.isZero())throw new I("Divide by 0");const o=this.field;let l=o.getZero(),h=this;const d=r.getCoefficient(r.getDegree()),m=o.inverse(d);for(;h.getDegree()>=r.getDegree()&&!h.isZero();){const y=h.getDegree()-r.getDegree(),A=o.multiply(h.getCoefficient(h.getDegree()),m),S=r.multiplyByMonomial(y,A),R=o.buildMonomial(y,A);l=l.addOrSubtract(R),h=h.addOrSubtract(S)}return[l,h]}toString(){let r="";for(let o=this.getDegree();o>=0;o--){let l=this.getCoefficient(o);if(l!==0){if(l<0?(r+=" - ",l=-l):r.length>0&&(r+=" + "),o===0||l!==1){const h=this.field.log(l);h===0?r+="1":h===1?r+="a":(r+="a^",r+=h)}o!==0&&(o===1?r+="x":(r+="x^",r+=o))}}return r}}class gr extends E{}gr.kind="ArithmeticException";class xt extends Yi{constructor(r,o,l){super(),this.primitive=r,this.size=o,this.generatorBase=l;const h=new Int32Array(o);let d=1;for(let y=0;y<o;y++)h[y]=d,d*=2,d>=o&&(d^=r,d&=o-1);this.expTable=h;const m=new Int32Array(o);for(let y=0;y<o-1;y++)m[h[y]]=y;this.logTable=m,this.zero=new En(this,Int32Array.from([0])),this.one=new En(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,o){if(r<0)throw new I;if(o===0)return this.zero;const l=new Int32Array(r+1);return l[0]=o,new En(this,l)}inverse(r){if(r===0)throw new gr;return this.expTable[this.size-this.logTable[r]-1]}multiply(r,o){return r===0||o===0?0:this.expTable[(this.logTable[r]+this.logTable[o])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+K.toHexString(this.primitive)+","+this.size+")"}equals(r){return r===this}}xt.AZTEC_DATA_12=new xt(4201,4096,1),xt.AZTEC_DATA_10=new xt(1033,1024,1),xt.AZTEC_DATA_6=new xt(67,64,1),xt.AZTEC_PARAM=new xt(19,16,1),xt.QR_CODE_FIELD_256=new xt(285,256,0),xt.DATA_MATRIX_FIELD_256=new xt(301,256,1),xt.AZTEC_DATA_8=xt.DATA_MATRIX_FIELD_256,xt.MAXICODE_FIELD_64=xt.AZTEC_DATA_6;class ai extends E{}ai.kind="ReedSolomonException";class oi extends E{}oi.kind="IllegalStateException";class Xi{constructor(r){this.field=r}decode(r,o){const l=this.field,h=new En(l,r),d=new Int32Array(o);let m=!0;for(let Y=0;Y<o;Y++){const $=h.evaluateAt(l.exp(Y+l.getGeneratorBase()));d[d.length-1-Y]=$,$!==0&&(m=!1)}if(m)return;const y=new En(l,d),A=this.runEuclideanAlgorithm(l.buildMonomial(o,1),y,o),S=A[0],R=A[1],B=this.findErrorLocations(S),P=this.findErrorMagnitudes(R,B);for(let Y=0;Y<B.length;Y++){const $=r.length-1-l.log(B[Y]);if($<0)throw new ai("Bad error location");r[$]=xt.addOrSubtract(r[$],P[Y])}}runEuclideanAlgorithm(r,o,l){if(r.getDegree()<o.getDegree()){const Y=r;r=o,o=Y}const h=this.field;let d=r,m=o,y=h.getZero(),A=h.getOne();for(;m.getDegree()>=(l/2|0);){let Y=d,$=y;if(d=m,y=A,d.isZero())throw new ai("r_{i-1} was zero");m=Y;let ee=h.getZero();const le=d.getCoefficient(d.getDegree()),xe=h.inverse(le);for(;m.getDegree()>=d.getDegree()&&!m.isZero();){const Le=m.getDegree()-d.getDegree(),De=h.multiply(m.getCoefficient(m.getDegree()),xe);ee=ee.addOrSubtract(h.buildMonomial(Le,De)),m=m.addOrSubtract(d.multiplyByMonomial(Le,De))}if(A=ee.multiply(y).addOrSubtract($),m.getDegree()>=d.getDegree())throw new oi("Division algorithm failed to reduce polynomial?")}const S=A.getCoefficient(0);if(S===0)throw new ai("sigmaTilde(0) was zero");const R=h.inverse(S),B=A.multiplyScalar(R),P=m.multiplyScalar(R);return[B,P]}findErrorLocations(r){const o=r.getDegree();if(o===1)return Int32Array.from([r.getCoefficient(1)]);const l=new Int32Array(o);let h=0;const d=this.field;for(let m=1;m<d.getSize()&&h<o;m++)r.evaluateAt(m)===0&&(l[h]=d.inverse(m),h++);if(h!==o)throw new ai("Error locator degree does not match number of roots");return l}findErrorMagnitudes(r,o){const l=o.length,h=new Int32Array(l),d=this.field;for(let m=0;m<l;m++){const y=d.inverse(o[m]);let A=1;for(let S=0;S<l;S++)if(m!==S){const R=d.multiply(o[S],y),B=(R&1)===0?R|1:R&-2;A=d.multiply(A,B)}h[m]=d.multiply(r.evaluateAt(y),d.inverse(A)),d.getGeneratorBase()!==0&&(h[m]=d.multiply(h[m],y))}return h}}var _n;(function(L){L[L.UPPER=0]="UPPER",L[L.LOWER=1]="LOWER",L[L.MIXED=2]="MIXED",L[L.DIGIT=3]="DIGIT",L[L.PUNCT=4]="PUNCT",L[L.BINARY=5]="BINARY"})(_n||(_n={}));class zt{decode(r){this.ddata=r;let o=r.getBits(),l=this.extractBits(o),h=this.correctBits(l),d=zt.convertBoolArrayToByteArray(h),m=zt.getEncodedData(h),y=new Yt(d,m,null,null);return y.setNumBits(h.length),y}static highLevelDecode(r){return this.getEncodedData(r)}static getEncodedData(r){let o=r.length,l=_n.UPPER,h=_n.UPPER,d="",m=0;for(;m<o;)if(h===_n.BINARY){if(o-m<5)break;let y=zt.readCode(r,m,5);if(m+=5,y===0){if(o-m<11)break;y=zt.readCode(r,m,11)+31,m+=11}for(let A=0;A<y;A++){if(o-m<8){m=o;break}const S=zt.readCode(r,m,8);d+=J.castAsNonUtf8Char(S),m+=8}h=l}else{let y=h===_n.DIGIT?4:5;if(o-m<y)break;let A=zt.readCode(r,m,y);m+=y;let S=zt.getCharacter(h,A);S.startsWith("CTRL_")?(l=h,h=zt.getTable(S.charAt(5)),S.charAt(6)==="L"&&(l=h)):(d+=S,h=l)}return d}static getTable(r){switch(r){case"L":return _n.LOWER;case"P":return _n.PUNCT;case"M":return _n.MIXED;case"D":return _n.DIGIT;case"B":return _n.BINARY;case"U":default:return _n.UPPER}}static getCharacter(r,o){switch(r){case _n.UPPER:return zt.UPPER_TABLE[o];case _n.LOWER:return zt.LOWER_TABLE[o];case _n.MIXED:return zt.MIXED_TABLE[o];case _n.PUNCT:return zt.PUNCT_TABLE[o];case _n.DIGIT:return zt.DIGIT_TABLE[o];default:throw new oi("Bad table")}}correctBits(r){let o,l;this.ddata.getNbLayers()<=2?(l=6,o=xt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,o=xt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,o=xt.AZTEC_DATA_10):(l=12,o=xt.AZTEC_DATA_12);let h=this.ddata.getNbDatablocks(),d=r.length/l;if(d<h)throw new j;let m=r.length%l,y=new Int32Array(d);for(let P=0;P<d;P++,m+=l)y[P]=zt.readCode(r,m,l);try{new Xi(o).decode(y,d-h)}catch(P){throw new j(P)}let A=(1<<l)-1,S=0;for(let P=0;P<h;P++){let Y=y[P];if(Y===0||Y===A)throw new j;(Y===1||Y===A-1)&&S++}let R=new Array(h*l-S),B=0;for(let P=0;P<h;P++){let Y=y[P];if(Y===1||Y===A-1)R.fill(Y>1,B,B+l-1),B+=l-1;else for(let $=l-1;$>=0;--$)R[B++]=(Y&1<<$)!==0}return R}extractBits(r){let o=this.ddata.isCompact(),l=this.ddata.getNbLayers(),h=(o?11:14)+l*4,d=new Int32Array(h),m=new Array(this.totalBitsInLayer(l,o));if(o)for(let y=0;y<d.length;y++)d[y]=y;else{let y=h+1+2*K.truncDivision(K.truncDivision(h,2)-1,15),A=h/2,S=K.truncDivision(y,2);for(let R=0;R<A;R++){let B=R+K.truncDivision(R,15);d[A-R-1]=S-B-1,d[A+R]=S+B+1}}for(let y=0,A=0;y<l;y++){let S=(l-y)*4+(o?9:12),R=y*2,B=h-1-R;for(let P=0;P<S;P++){let Y=P*2;for(let $=0;$<2;$++)m[A+Y+$]=r.get(d[R+$],d[R+P]),m[A+2*S+Y+$]=r.get(d[R+P],d[B-$]),m[A+4*S+Y+$]=r.get(d[B-$],d[B-P]),m[A+6*S+Y+$]=r.get(d[B-P],d[R+$])}A+=S*8}return m}static readCode(r,o,l){let h=0;for(let d=o;d<o+l;d++)h<<=1,r[d]&&(h|=1);return h}static readByte(r,o){let l=r.length-o;return l>=8?zt.readCode(r,o,8):zt.readCode(r,o,l)<<8-l}static convertBoolArrayToByteArray(r){let o=new Uint8Array((r.length+7)/8);for(let l=0;l<o.length;l++)o[l]=zt.readByte(r,8*l);return o}totalBitsInLayer(r,o){return((o?88:112)+16*r)*r}}zt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],zt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],zt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],zt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],zt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class We{constructor(){}static round(r){return r===NaN?0:r<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:r>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:r+(r<0?-.5:.5)|0}static distance(r,o,l,h){const d=r-l,m=o-h;return Math.sqrt(d*d+m*m)}static sum(r){let o=0;for(let l=0,h=r.length;l!==h;l++){const d=r[l];o+=d}return o}}class An{static floatToIntBits(r){return r}}An.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Fe{constructor(r,o){this.x=r,this.y=o}getX(){return this.x}getY(){return this.y}equals(r){if(r instanceof Fe){const o=r;return this.x===o.x&&this.y===o.y}return!1}hashCode(){return 31*An.floatToIntBits(this.x)+An.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(r){const o=this.distance(r[0],r[1]),l=this.distance(r[1],r[2]),h=this.distance(r[0],r[2]);let d,m,y;if(l>=o&&l>=h?(m=r[0],d=r[1],y=r[2]):h>=l&&h>=o?(m=r[1],d=r[0],y=r[2]):(m=r[2],d=r[0],y=r[1]),this.crossProductZ(d,m,y)<0){const A=d;d=y,y=A}r[0]=d,r[1]=m,r[2]=y}static distance(r,o){return We.distance(r.x,r.y,o.x,o.y)}static crossProductZ(r,o,l){const h=o.x,d=o.y;return(l.x-h)*(r.y-d)-(l.y-d)*(r.x-h)}}class ms{constructor(r,o){this.bits=r,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class Cs extends ms{constructor(r,o,l,h,d){super(r,o),this.compact=l,this.nbDatablocks=h,this.nbLayers=d}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class hn{constructor(r,o,l,h){this.image=r,this.height=r.getHeight(),this.width=r.getWidth(),o==null&&(o=hn.INIT_SIZE),l==null&&(l=r.getWidth()/2|0),h==null&&(h=r.getHeight()/2|0);const d=o/2|0;if(this.leftInit=l-d,this.rightInit=l+d,this.upInit=h-d,this.downInit=h+d,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new he}detect(){let r=this.leftInit,o=this.rightInit,l=this.upInit,h=this.downInit,d=!1,m=!0,y=!1,A=!1,S=!1,R=!1,B=!1;const P=this.width,Y=this.height;for(;m;){m=!1;let $=!0;for(;($||!A)&&o<P;)$=this.containsBlackPoint(l,h,o,!1),$?(o++,m=!0,A=!0):A||o++;if(o>=P){d=!0;break}let ee=!0;for(;(ee||!S)&&h<Y;)ee=this.containsBlackPoint(r,o,h,!0),ee?(h++,m=!0,S=!0):S||h++;if(h>=Y){d=!0;break}let le=!0;for(;(le||!R)&&r>=0;)le=this.containsBlackPoint(l,h,r,!1),le?(r--,m=!0,R=!0):R||r--;if(r<0){d=!0;break}let xe=!0;for(;(xe||!B)&&l>=0;)xe=this.containsBlackPoint(r,o,l,!0),xe?(l--,m=!0,B=!0):B||l--;if(l<0){d=!0;break}m&&(y=!0)}if(!d&&y){const $=o-r;let ee=null;for(let De=1;ee===null&&De<$;De++)ee=this.getBlackPointOnSegment(r,h-De,r+De,h);if(ee==null)throw new he;let le=null;for(let De=1;le===null&&De<$;De++)le=this.getBlackPointOnSegment(r,l+De,r+De,l);if(le==null)throw new he;let xe=null;for(let De=1;xe===null&&De<$;De++)xe=this.getBlackPointOnSegment(o,l+De,o-De,l);if(xe==null)throw new he;let Le=null;for(let De=1;Le===null&&De<$;De++)Le=this.getBlackPointOnSegment(o,h-De,o-De,h);if(Le==null)throw new he;return this.centerEdges(Le,ee,xe,le)}else throw new he}getBlackPointOnSegment(r,o,l,h){const d=We.round(We.distance(r,o,l,h)),m=(l-r)/d,y=(h-o)/d,A=this.image;for(let S=0;S<d;S++){const R=We.round(r+S*m),B=We.round(o+S*y);if(A.get(R,B))return new Fe(R,B)}return null}centerEdges(r,o,l,h){const d=r.getX(),m=r.getY(),y=o.getX(),A=o.getY(),S=l.getX(),R=l.getY(),B=h.getX(),P=h.getY(),Y=hn.CORR;return d<this.width/2?[new Fe(B-Y,P+Y),new Fe(y+Y,A+Y),new Fe(S-Y,R-Y),new Fe(d+Y,m-Y)]:[new Fe(B+Y,P+Y),new Fe(y+Y,A-Y),new Fe(S-Y,R+Y),new Fe(d-Y,m-Y)]}containsBlackPoint(r,o,l,h){const d=this.image;if(h){for(let m=r;m<=o;m++)if(d.get(m,l))return!0}else for(let m=r;m<=o;m++)if(d.get(l,m))return!0;return!1}}hn.INIT_SIZE=10,hn.CORR=1;class Rr{static checkAndNudgePoints(r,o){const l=r.getWidth(),h=r.getHeight();let d=!0;for(let m=0;m<o.length&&d;m+=2){const y=Math.floor(o[m]),A=Math.floor(o[m+1]);if(y<-1||y>l||A<-1||A>h)throw new he;d=!1,y===-1?(o[m]=0,d=!0):y===l&&(o[m]=l-1,d=!0),A===-1?(o[m+1]=0,d=!0):A===h&&(o[m+1]=h-1,d=!0)}d=!0;for(let m=o.length-2;m>=0&&d;m-=2){const y=Math.floor(o[m]),A=Math.floor(o[m+1]);if(y<-1||y>l||A<-1||A>h)throw new he;d=!1,y===-1?(o[m]=0,d=!0):y===l&&(o[m]=l-1,d=!0),A===-1?(o[m+1]=0,d=!0):A===h&&(o[m+1]=h-1,d=!0)}}}class li{constructor(r,o,l,h,d,m,y,A,S){this.a11=r,this.a21=o,this.a31=l,this.a12=h,this.a22=d,this.a32=m,this.a13=y,this.a23=A,this.a33=S}static quadrilateralToQuadrilateral(r,o,l,h,d,m,y,A,S,R,B,P,Y,$,ee,le){const xe=li.quadrilateralToSquare(r,o,l,h,d,m,y,A);return li.squareToQuadrilateral(S,R,B,P,Y,$,ee,le).times(xe)}transformPoints(r){const o=r.length,l=this.a11,h=this.a12,d=this.a13,m=this.a21,y=this.a22,A=this.a23,S=this.a31,R=this.a32,B=this.a33;for(let P=0;P<o;P+=2){const Y=r[P],$=r[P+1],ee=d*Y+A*$+B;r[P]=(l*Y+m*$+S)/ee,r[P+1]=(h*Y+y*$+R)/ee}}transformPointsWithValues(r,o){const l=this.a11,h=this.a12,d=this.a13,m=this.a21,y=this.a22,A=this.a23,S=this.a31,R=this.a32,B=this.a33,P=r.length;for(let Y=0;Y<P;Y++){const $=r[Y],ee=o[Y],le=d*$+A*ee+B;r[Y]=(l*$+m*ee+S)/le,o[Y]=(h*$+y*ee+R)/le}}static squareToQuadrilateral(r,o,l,h,d,m,y,A){const S=r-l+d-y,R=o-h+m-A;if(S===0&&R===0)return new li(l-r,d-l,r,h-o,m-h,o,0,0,1);{const B=l-d,P=y-d,Y=h-m,$=A-m,ee=B*$-P*Y,le=(S*$-P*R)/ee,xe=(B*R-S*Y)/ee;return new li(l-r+le*l,y-r+xe*y,r,h-o+le*h,A-o+xe*A,o,le,xe,1)}}static quadrilateralToSquare(r,o,l,h,d,m,y,A){return li.squareToQuadrilateral(r,o,l,h,d,m,y,A).buildAdjoint()}buildAdjoint(){return new li(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(r){return new li(this.a11*r.a11+this.a21*r.a12+this.a31*r.a13,this.a11*r.a21+this.a21*r.a22+this.a31*r.a23,this.a11*r.a31+this.a21*r.a32+this.a31*r.a33,this.a12*r.a11+this.a22*r.a12+this.a32*r.a13,this.a12*r.a21+this.a22*r.a22+this.a32*r.a23,this.a12*r.a31+this.a22*r.a32+this.a32*r.a33,this.a13*r.a11+this.a23*r.a12+this.a33*r.a13,this.a13*r.a21+this.a23*r.a22+this.a33*r.a23,this.a13*r.a31+this.a23*r.a32+this.a33*r.a33)}}class vs extends Rr{sampleGrid(r,o,l,h,d,m,y,A,S,R,B,P,Y,$,ee,le,xe,Le,De){const Re=li.quadrilateralToQuadrilateral(h,d,m,y,A,S,R,B,P,Y,$,ee,le,xe,Le,De);return this.sampleGridWithTransform(r,o,l,Re)}sampleGridWithTransform(r,o,l,h){if(o<=0||l<=0)throw new he;const d=new $e(o,l),m=new Float32Array(2*o);for(let y=0;y<l;y++){const A=m.length,S=y+.5;for(let R=0;R<A;R+=2)m[R]=R/2+.5,m[R+1]=S;h.transformPoints(m),Rr.checkAndNudgePoints(r,m);try{for(let R=0;R<A;R+=2)r.get(Math.floor(m[R]),Math.floor(m[R+1]))&&d.set(R/2,y)}catch{throw new he}}return d}}class pi{static setGridSampler(r){pi.gridSampler=r}static getInstance(){return pi.gridSampler}}pi.gridSampler=new vs;class ei{constructor(r,o){this.x=r,this.y=o}toResultPoint(){return new Fe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Qs{constructor(r){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=r}detect(){return this.detectMirror(!1)}detectMirror(r){let o=this.getMatrixCenter(),l=this.getBullsEyeCorners(o);if(r){let m=l[0];l[0]=l[2],l[2]=m}this.extractParameters(l);let h=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),d=this.getMatrixCornerPoints(l);return new Cs(h,d,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(r){if(!this.isValidPoint(r[0])||!this.isValidPoint(r[1])||!this.isValidPoint(r[2])||!this.isValidPoint(r[3]))throw new he;let o=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(r[0],r[1],o),this.sampleLine(r[1],r[2],o),this.sampleLine(r[2],r[3],o),this.sampleLine(r[3],r[0],o)]);this.shift=this.getRotation(l,o);let h=0;for(let m=0;m<4;m++){let y=l[(this.shift+m)%4];this.compact?(h<<=7,h+=y>>1&127):(h<<=10,h+=(y>>2&992)+(y>>1&31))}let d=this.getCorrectedParameterData(h,this.compact);this.compact?(this.nbLayers=(d>>6)+1,this.nbDataBlocks=(d&63)+1):(this.nbLayers=(d>>11)+1,this.nbDataBlocks=(d&2047)+1)}getRotation(r,o){let l=0;r.forEach((h,d,m)=>{let y=(h>>o-2<<1)+(h&1);l=(l<<3)+y}),l=((l&1)<<11)+(l>>1);for(let h=0;h<4;h++)if(K.bitCount(l^this.EXPECTED_CORNER_BITS[h])<=2)return h;throw new he}getCorrectedParameterData(r,o){let l,h;o?(l=7,h=2):(l=10,h=4);let d=l-h,m=new Int32Array(l);for(let A=l-1;A>=0;--A)m[A]=r&15,r>>=4;try{new Xi(xt.AZTEC_PARAM).decode(m,d)}catch{throw new he}let y=0;for(let A=0;A<h;A++)y=(y<<4)+m[A];return y}getBullsEyeCorners(r){let o=r,l=r,h=r,d=r,m=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let B=this.getFirstDifferent(o,m,1,-1),P=this.getFirstDifferent(l,m,1,1),Y=this.getFirstDifferent(h,m,-1,1),$=this.getFirstDifferent(d,m,-1,-1);if(this.nbCenterLayers>2){let ee=this.distancePoint($,B)*this.nbCenterLayers/(this.distancePoint(d,o)*(this.nbCenterLayers+2));if(ee<.75||ee>1.25||!this.isWhiteOrBlackRectangle(B,P,Y,$))break}o=B,l=P,h=Y,d=$,m=!m}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new he;this.compact=this.nbCenterLayers===5;let y=new Fe(o.getX()+.5,o.getY()-.5),A=new Fe(l.getX()+.5,l.getY()+.5),S=new Fe(h.getX()-.5,h.getY()+.5),R=new Fe(d.getX()-.5,d.getY()-.5);return this.expandSquare([y,A,S,R],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let r,o,l,h;try{let y=new hn(this.image).detect();r=y[0],o=y[1],l=y[2],h=y[3]}catch{let A=this.image.getWidth()/2,S=this.image.getHeight()/2;r=this.getFirstDifferent(new ei(A+7,S-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new ei(A+7,S+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new ei(A-7,S+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new ei(A-7,S-7),!1,-1,-1).toResultPoint()}let d=We.round((r.getX()+h.getX()+o.getX()+l.getX())/4),m=We.round((r.getY()+h.getY()+o.getY()+l.getY())/4);try{let y=new hn(this.image,15,d,m).detect();r=y[0],o=y[1],l=y[2],h=y[3]}catch{r=this.getFirstDifferent(new ei(d+7,m-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new ei(d+7,m+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new ei(d-7,m+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new ei(d-7,m-7),!1,-1,-1).toResultPoint()}return d=We.round((r.getX()+h.getX()+o.getX()+l.getX())/4),m=We.round((r.getY()+h.getY()+o.getY()+l.getY())/4),new ei(d,m)}getMatrixCornerPoints(r){return this.expandSquare(r,2*this.nbCenterLayers,this.getDimension())}sampleGrid(r,o,l,h,d){let m=pi.getInstance(),y=this.getDimension(),A=y/2-this.nbCenterLayers,S=y/2+this.nbCenterLayers;return m.sampleGrid(r,y,y,A,A,S,A,S,S,A,S,o.getX(),o.getY(),l.getX(),l.getY(),h.getX(),h.getY(),d.getX(),d.getY())}sampleLine(r,o,l){let h=0,d=this.distanceResultPoint(r,o),m=d/l,y=r.getX(),A=r.getY(),S=m*(o.getX()-r.getX())/d,R=m*(o.getY()-r.getY())/d;for(let B=0;B<l;B++)this.image.get(We.round(y+B*S),We.round(A+B*R))&&(h|=1<<l-B-1);return h}isWhiteOrBlackRectangle(r,o,l,h){let d=3;r=new ei(r.getX()-d,r.getY()+d),o=new ei(o.getX()-d,o.getY()-d),l=new ei(l.getX()+d,l.getY()-d),h=new ei(h.getX()+d,h.getY()+d);let m=this.getColor(h,r);if(m===0)return!1;let y=this.getColor(r,o);return y!==m||(y=this.getColor(o,l),y!==m)?!1:(y=this.getColor(l,h),y===m)}getColor(r,o){let l=this.distancePoint(r,o),h=(o.getX()-r.getX())/l,d=(o.getY()-r.getY())/l,m=0,y=r.getX(),A=r.getY(),S=this.image.get(r.getX(),r.getY()),R=Math.ceil(l);for(let P=0;P<R;P++)y+=h,A+=d,this.image.get(We.round(y),We.round(A))!==S&&m++;let B=m/l;return B>.1&&B<.9?0:B<=.1===S?1:-1}getFirstDifferent(r,o,l,h){let d=r.getX()+l,m=r.getY()+h;for(;this.isValid(d,m)&&this.image.get(d,m)===o;)d+=l,m+=h;for(d-=l,m-=h;this.isValid(d,m)&&this.image.get(d,m)===o;)d+=l;for(d-=l;this.isValid(d,m)&&this.image.get(d,m)===o;)m+=h;return m-=h,new ei(d,m)}expandSquare(r,o,l){let h=l/(2*o),d=r[0].getX()-r[2].getX(),m=r[0].getY()-r[2].getY(),y=(r[0].getX()+r[2].getX())/2,A=(r[0].getY()+r[2].getY())/2,S=new Fe(y+h*d,A+h*m),R=new Fe(y-h*d,A-h*m);d=r[1].getX()-r[3].getX(),m=r[1].getY()-r[3].getY(),y=(r[1].getX()+r[3].getX())/2,A=(r[1].getY()+r[3].getY())/2;let B=new Fe(y+h*d,A+h*m),P=new Fe(y-h*d,A-h*m);return[S,B,R,P]}isValid(r,o){return r>=0&&r<this.image.getWidth()&&o>0&&o<this.image.getHeight()}isValidPoint(r){let o=We.round(r.getX()),l=We.round(r.getY());return this.isValid(o,l)}distancePoint(r,o){return We.distance(r.getX(),r.getY(),o.getX(),o.getY())}distanceResultPoint(r,o){return We.distance(r.getX(),r.getY(),o.getX(),o.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(K.truncDivision(this.nbLayers-4,8)+1)+15}}class ps{decode(r,o=null){let l=null,h=new Qs(r.getBlackMatrix()),d=null,m=null;try{let R=h.detectMirror(!1);d=R.getPoints(),this.reportFoundResultPoints(o,d),m=new zt().decode(R)}catch(R){l=R}if(m==null)try{let R=h.detectMirror(!0);d=R.getPoints(),this.reportFoundResultPoints(o,d),m=new zt().decode(R)}catch(R){throw l??R}let y=new Ue(m.getText(),m.getRawBytes(),m.getNumBits(),d,Me.AZTEC,Q.currentTimeMillis()),A=m.getByteSegments();A!=null&&y.putMetadata(Et.BYTE_SEGMENTS,A);let S=m.getECLevel();return S!=null&&y.putMetadata(Et.ERROR_CORRECTION_LEVEL,S),y}reportFoundResultPoints(r,o){if(r!=null){let l=r.get(ke.NEED_RESULT_POINT_CALLBACK);l!=null&&o.forEach((h,d,m)=>{l.foundPossibleResultPoint(h)})}}reset(){}}class Oa extends Be{constructor(r=500){super(new ps,r)}}class Xt{decode(r,o){try{return this.doDecode(r,o)}catch{if(o&&o.get(ke.TRY_HARDER)===!0&&r.isRotateSupported()){const d=r.rotateCounterClockwise(),m=this.doDecode(d,o),y=m.getResultMetadata();let A=270;y!==null&&y.get(Et.ORIENTATION)===!0&&(A=A+y.get(Et.ORIENTATION)%360),m.putMetadata(Et.ORIENTATION,A);const S=m.getResultPoints();if(S!==null){const R=d.getHeight();for(let B=0;B<S.length;B++)S[B]=new Fe(R-S[B].getY()-1,S[B].getX())}return m}else throw new he}}reset(){}doDecode(r,o){const l=r.getWidth(),h=r.getHeight();let d=new Se(l);const m=o&&o.get(ke.TRY_HARDER)===!0,y=Math.max(1,h>>(m?8:5));let A;m?A=h:A=15;const S=Math.trunc(h/2);for(let R=0;R<A;R++){const B=Math.trunc((R+1)/2),P=(R&1)===0,Y=S+y*(P?B:-B);if(Y<0||Y>=h)break;try{d=r.getBlackRow(Y,d)}catch{continue}for(let $=0;$<2;$++){if($===1&&(d.reverse(),o&&o.get(ke.NEED_RESULT_POINT_CALLBACK)===!0)){const ee=new Map;o.forEach((le,xe)=>ee.set(xe,le)),ee.delete(ke.NEED_RESULT_POINT_CALLBACK),o=ee}try{const ee=this.decodeRow(Y,d,o);if($===1){ee.putMetadata(Et.ORIENTATION,180);const le=ee.getResultPoints();le!==null&&(le[0]=new Fe(l-le[0].getX()-1,le[0].getY()),le[1]=new Fe(l-le[1].getX()-1,le[1].getY()))}return ee}catch{}}}throw new he}static recordPattern(r,o,l){const h=l.length;for(let S=0;S<h;S++)l[S]=0;const d=r.getSize();if(o>=d)throw new he;let m=!r.get(o),y=0,A=o;for(;A<d;){if(r.get(A)!==m)l[y]++;else{if(++y===h)break;l[y]=1,m=!m}A++}if(!(y===h||y===h-1&&A===d))throw new he}static recordPatternInReverse(r,o,l){let h=l.length,d=r.get(o);for(;o>0&&h>=0;)r.get(--o)!==d&&(h--,d=!d);if(h>=0)throw new he;Xt.recordPattern(r,o+1,l)}static patternMatchVariance(r,o,l){const h=r.length;let d=0,m=0;for(let S=0;S<h;S++)d+=r[S],m+=o[S];if(d<m)return Number.POSITIVE_INFINITY;const y=d/m;l*=y;let A=0;for(let S=0;S<h;S++){const R=r[S],B=o[S]*y,P=R>B?R-B:B-R;if(P>l)return Number.POSITIVE_INFINITY;A+=P}return A/d}}class Oe extends Xt{static findStartPattern(r){const o=r.getSize(),l=r.getNextSet(0);let h=0,d=Int32Array.from([0,0,0,0,0,0]),m=l,y=!1;const A=6;for(let S=l;S<o;S++)if(r.get(S)!==y)d[h]++;else{if(h===A-1){let R=Oe.MAX_AVG_VARIANCE,B=-1;for(let P=Oe.CODE_START_A;P<=Oe.CODE_START_C;P++){const Y=Xt.patternMatchVariance(d,Oe.CODE_PATTERNS[P],Oe.MAX_INDIVIDUAL_VARIANCE);Y<R&&(R=Y,B=P)}if(B>=0&&r.isRange(Math.max(0,m-(S-m)/2),m,!1))return Int32Array.from([m,S,B]);m+=d[0]+d[1],d=d.slice(2,d.length-1),d[h-1]=0,d[h]=0,h--}else h++;d[h]=1,y=!y}throw new he}static decodeCode(r,o,l){Xt.recordPattern(r,l,o);let h=Oe.MAX_AVG_VARIANCE,d=-1;for(let m=0;m<Oe.CODE_PATTERNS.length;m++){const y=Oe.CODE_PATTERNS[m],A=this.patternMatchVariance(o,y,Oe.MAX_INDIVIDUAL_VARIANCE);A<h&&(h=A,d=m)}if(d>=0)return d;throw new he}decodeRow(r,o,l){const h=l&&l.get(ke.ASSUME_GS1)===!0,d=Oe.findStartPattern(o),m=d[2];let y=0;const A=new Uint8Array(20);A[y++]=m;let S;switch(m){case Oe.CODE_START_A:S=Oe.CODE_CODE_A;break;case Oe.CODE_START_B:S=Oe.CODE_CODE_B;break;case Oe.CODE_START_C:S=Oe.CODE_CODE_C;break;default:throw new j}let R=!1,B=!1,P="",Y=d[0],$=d[1];const ee=Int32Array.from([0,0,0,0,0,0]);let le=0,xe=0,Le=m,De=0,Re=!0,St=!1,ut=!1;for(;!R;){const aa=B;switch(B=!1,le=xe,xe=Oe.decodeCode(o,ee,$),A[y++]=xe,xe!==Oe.CODE_STOP&&(Re=!0),xe!==Oe.CODE_STOP&&(De++,Le+=De*xe),Y=$,$+=ee.reduce((Iu,uc)=>Iu+uc,0),xe){case Oe.CODE_START_A:case Oe.CODE_START_B:case Oe.CODE_START_C:throw new j}switch(S){case Oe.CODE_CODE_A:if(xe<64)ut===St?P+=String.fromCharCode(32+xe):P+=String.fromCharCode(32+xe+128),ut=!1;else if(xe<96)ut===St?P+=String.fromCharCode(xe-64):P+=String.fromCharCode(xe+64),ut=!1;else switch(xe!==Oe.CODE_STOP&&(Re=!1),xe){case Oe.CODE_FNC_1:h&&(P.length===0?P+="]C1":P+="");break;case Oe.CODE_FNC_2:case Oe.CODE_FNC_3:break;case Oe.CODE_FNC_4_A:!St&&ut?(St=!0,ut=!1):St&&ut?(St=!1,ut=!1):ut=!0;break;case Oe.CODE_SHIFT:B=!0,S=Oe.CODE_CODE_B;break;case Oe.CODE_CODE_B:S=Oe.CODE_CODE_B;break;case Oe.CODE_CODE_C:S=Oe.CODE_CODE_C;break;case Oe.CODE_STOP:R=!0;break}break;case Oe.CODE_CODE_B:if(xe<96)ut===St?P+=String.fromCharCode(32+xe):P+=String.fromCharCode(32+xe+128),ut=!1;else switch(xe!==Oe.CODE_STOP&&(Re=!1),xe){case Oe.CODE_FNC_1:h&&(P.length===0?P+="]C1":P+="");break;case Oe.CODE_FNC_2:case Oe.CODE_FNC_3:break;case Oe.CODE_FNC_4_B:!St&&ut?(St=!0,ut=!1):St&&ut?(St=!1,ut=!1):ut=!0;break;case Oe.CODE_SHIFT:B=!0,S=Oe.CODE_CODE_A;break;case Oe.CODE_CODE_A:S=Oe.CODE_CODE_A;break;case Oe.CODE_CODE_C:S=Oe.CODE_CODE_C;break;case Oe.CODE_STOP:R=!0;break}break;case Oe.CODE_CODE_C:if(xe<100)xe<10&&(P+="0"),P+=xe;else switch(xe!==Oe.CODE_STOP&&(Re=!1),xe){case Oe.CODE_FNC_1:h&&(P.length===0?P+="]C1":P+="");break;case Oe.CODE_CODE_A:S=Oe.CODE_CODE_A;break;case Oe.CODE_CODE_B:S=Oe.CODE_CODE_B;break;case Oe.CODE_STOP:R=!0;break}break}aa&&(S=S===Oe.CODE_CODE_A?Oe.CODE_CODE_B:Oe.CODE_CODE_A)}const Wn=$-Y;if($=o.getNextUnset($),!o.isRange($,Math.min(o.getSize(),$+($-Y)/2),!1))throw new he;if(Le-=De*le,Le%103!==le)throw new k;const _r=P.length;if(_r===0)throw new he;_r>0&&Re&&(S===Oe.CODE_CODE_C?P=P.substring(0,_r-2):P=P.substring(0,_r-1));const Pi=(d[1]+d[0])/2,cn=Y+Wn/2,yi=A.length,ur=new Uint8Array(yi);for(let aa=0;aa<yi;aa++)ur[aa]=A[aa];const Va=[new Fe(Pi,r),new Fe(cn,r)];return new Ue(P,ur,0,Va,Me.CODE_128,new Date().getTime())}}Oe.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Oe.MAX_AVG_VARIANCE=.25,Oe.MAX_INDIVIDUAL_VARIANCE=.7,Oe.CODE_SHIFT=98,Oe.CODE_CODE_C=99,Oe.CODE_CODE_B=100,Oe.CODE_CODE_A=101,Oe.CODE_FNC_1=102,Oe.CODE_FNC_2=97,Oe.CODE_FNC_3=96,Oe.CODE_FNC_4_A=101,Oe.CODE_FNC_4_B=100,Oe.CODE_START_A=103,Oe.CODE_START_B=104,Oe.CODE_START_C=105,Oe.CODE_STOP=106;class qt extends Xt{constructor(r=!1,o=!1){super(),this.usingCheckDigit=r,this.extendedMode=o,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(r,o,l){let h=this.counters;h.fill(0),this.decodeRowResult="";let d=qt.findAsteriskPattern(o,h),m=o.getNextSet(d[1]),y=o.getSize(),A,S;do{qt.recordPattern(o,m,h);let ee=qt.toNarrowWidePattern(h);if(ee<0)throw new he;A=qt.patternToChar(ee),this.decodeRowResult+=A,S=m;for(let le of h)m+=le;m=o.getNextSet(m)}while(A!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let R=0;for(let ee of h)R+=ee;let B=m-S-R;if(m!==y&&B*2<R)throw new he;if(this.usingCheckDigit){let ee=this.decodeRowResult.length-1,le=0;for(let xe=0;xe<ee;xe++)le+=qt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(xe));if(this.decodeRowResult.charAt(ee)!==qt.ALPHABET_STRING.charAt(le%43))throw new k;this.decodeRowResult=this.decodeRowResult.substring(0,ee)}if(this.decodeRowResult.length===0)throw new he;let P;this.extendedMode?P=qt.decodeExtended(this.decodeRowResult):P=this.decodeRowResult;let Y=(d[1]+d[0])/2,$=S+R/2;return new Ue(P,null,0,[new Fe(Y,r),new Fe($,r)],Me.CODE_39,new Date().getTime())}static findAsteriskPattern(r,o){let l=r.getSize(),h=r.getNextSet(0),d=0,m=h,y=!1,A=o.length;for(let S=h;S<l;S++)if(r.get(S)!==y)o[d]++;else{if(d===A-1){if(this.toNarrowWidePattern(o)===qt.ASTERISK_ENCODING&&r.isRange(Math.max(0,m-Math.floor((S-m)/2)),m,!1))return[m,S];m+=o[0]+o[1],o.copyWithin(0,2,2+d-1),o[d-1]=0,o[d]=0,d--}else d++;o[d]=1,y=!y}throw new he}static toNarrowWidePattern(r){let o=r.length,l=0,h;do{let d=2147483647;for(let A of r)A<d&&A>l&&(d=A);l=d,h=0;let m=0,y=0;for(let A=0;A<o;A++){let S=r[A];S>l&&(y|=1<<o-1-A,h++,m+=S)}if(h===3){for(let A=0;A<o&&h>0;A++){let S=r[A];if(S>l&&(h--,S*2>=m))return-1}return y}}while(h>3);return-1}static patternToChar(r){for(let o=0;o<qt.CHARACTER_ENCODINGS.length;o++)if(qt.CHARACTER_ENCODINGS[o]===r)return qt.ALPHABET_STRING.charAt(o);if(r===qt.ASTERISK_ENCODING)return"*";throw new he}static decodeExtended(r){let o=r.length,l="";for(let h=0;h<o;h++){let d=r.charAt(h);if(d==="+"||d==="$"||d==="%"||d==="/"){let m=r.charAt(h+1),y="\0";switch(d){case"+":if(m>="A"&&m<="Z")y=String.fromCharCode(m.charCodeAt(0)+32);else throw new j;break;case"$":if(m>="A"&&m<="Z")y=String.fromCharCode(m.charCodeAt(0)-64);else throw new j;break;case"%":if(m>="A"&&m<="E")y=String.fromCharCode(m.charCodeAt(0)-38);else if(m>="F"&&m<="J")y=String.fromCharCode(m.charCodeAt(0)-11);else if(m>="K"&&m<="O")y=String.fromCharCode(m.charCodeAt(0)+16);else if(m>="P"&&m<="T")y=String.fromCharCode(m.charCodeAt(0)+43);else if(m==="U")y="\0";else if(m==="V")y="@";else if(m==="W")y="`";else if(m==="X"||m==="Y"||m==="Z")y="";else throw new j;break;case"/":if(m>="A"&&m<="O")y=String.fromCharCode(m.charCodeAt(0)-32);else if(m==="Z")y=":";else throw new j;break}l+=y,h++}else l+=d}return l}}qt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",qt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],qt.ASTERISK_ENCODING=148;class it extends Xt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(r,o,l){let h=this.decodeStart(o),d=this.decodeEnd(o),m=new X;it.decodeMiddle(o,h[1],d[0],m);let y=m.toString(),A=null;l!=null&&(A=l.get(ke.ALLOWED_LENGTHS)),A==null&&(A=it.DEFAULT_ALLOWED_LENGTHS);let S=y.length,R=!1,B=0;for(let $ of A){if(S===$){R=!0;break}$>B&&(B=$)}if(!R&&S>B&&(R=!0),!R)throw new j;const P=[new Fe(h[1],r),new Fe(d[0],r)];return new Ue(y,null,0,P,Me.ITF,new Date().getTime())}static decodeMiddle(r,o,l,h){let d=new Int32Array(10),m=new Int32Array(5),y=new Int32Array(5);for(d.fill(0),m.fill(0),y.fill(0);o<l;){Xt.recordPattern(r,o,d);for(let S=0;S<5;S++){let R=2*S;m[S]=d[R],y[S]=d[R+1]}let A=it.decodeDigit(m);h.append(A.toString()),A=this.decodeDigit(y),h.append(A.toString()),d.forEach(function(S){o+=S})}}decodeStart(r){let o=it.skipWhiteSpace(r),l=it.findGuardPattern(r,o,it.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(r,l[0]),l}validateQuietZone(r,o){let l=this.narrowLineWidth*10;l=l<o?l:o;for(let h=o-1;l>0&&h>=0&&!r.get(h);h--)l--;if(l!==0)throw new he}static skipWhiteSpace(r){const o=r.getSize(),l=r.getNextSet(0);if(l===o)throw new he;return l}decodeEnd(r){r.reverse();try{let o=it.skipWhiteSpace(r),l;try{l=it.findGuardPattern(r,o,it.END_PATTERN_REVERSED[0])}catch(d){d instanceof he&&(l=it.findGuardPattern(r,o,it.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,l[0]);let h=l[0];return l[0]=r.getSize()-l[1],l[1]=r.getSize()-h,l}finally{r.reverse()}}static findGuardPattern(r,o,l){let h=l.length,d=new Int32Array(h),m=r.getSize(),y=!1,A=0,S=o;d.fill(0);for(let R=o;R<m;R++)if(r.get(R)!==y)d[A]++;else{if(A===h-1){if(Xt.patternMatchVariance(d,l,it.MAX_INDIVIDUAL_VARIANCE)<it.MAX_AVG_VARIANCE)return[S,R];S+=d[0]+d[1],Q.arraycopy(d,2,d,0,A-1),d[A-1]=0,d[A]=0,A--}else A++;d[A]=1,y=!y}throw new he}static decodeDigit(r){let o=it.MAX_AVG_VARIANCE,l=-1,h=it.PATTERNS.length;for(let d=0;d<h;d++){let m=it.PATTERNS[d],y=Xt.patternMatchVariance(r,m,it.MAX_INDIVIDUAL_VARIANCE);y<o?(o=y,l=d):y===o&&(l=-1)}if(l>=0)return l%10;throw new he}}it.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],it.MAX_AVG_VARIANCE=.38,it.MAX_INDIVIDUAL_VARIANCE=.5,it.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],it.START_PATTERN=Int32Array.from([1,1,1,1]),it.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class fn extends Xt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(r){let o=!1,l,h=0,d=Int32Array.from([0,0,0]);for(;!o;){d=Int32Array.from([0,0,0]),l=fn.findGuardPattern(r,h,!1,this.START_END_PATTERN,d);let m=l[0];h=l[1];let y=m-(h-m);y>=0&&(o=r.isRange(y,m,!1))}return l}static checkChecksum(r){return fn.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let o=r.length;if(o===0)return!1;let l=parseInt(r.charAt(o-1),10);return fn.getStandardUPCEANChecksum(r.substring(0,o-1))===l}static getStandardUPCEANChecksum(r){let o=r.length,l=0;for(let h=o-1;h>=0;h-=2){let d=r.charAt(h).charCodeAt(0)-48;if(d<0||d>9)throw new j;l+=d}l*=3;for(let h=o-2;h>=0;h-=2){let d=r.charAt(h).charCodeAt(0)-48;if(d<0||d>9)throw new j;l+=d}return(1e3-l)%10}static decodeEnd(r,o){return fn.findGuardPattern(r,o,!1,fn.START_END_PATTERN,new Int32Array(fn.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(r,o,l,h){return this.findGuardPattern(r,o,l,h,new Int32Array(h.length))}static findGuardPattern(r,o,l,h,d){let m=r.getSize();o=l?r.getNextUnset(o):r.getNextSet(o);let y=0,A=o,S=h.length,R=l;for(let B=o;B<m;B++)if(r.get(B)!==R)d[y]++;else{if(y===S-1){if(Xt.patternMatchVariance(d,h,fn.MAX_INDIVIDUAL_VARIANCE)<fn.MAX_AVG_VARIANCE)return Int32Array.from([A,B]);A+=d[0]+d[1];let P=d.slice(2,d.length-1);for(let Y=0;Y<y-1;Y++)d[Y]=P[Y];d[y-1]=0,d[y]=0,y--}else y++;d[y]=1,R=!R}throw new he}static decodeDigit(r,o,l,h){this.recordPattern(r,l,o);let d=this.MAX_AVG_VARIANCE,m=-1,y=h.length;for(let A=0;A<y;A++){let S=h[A],R=Xt.patternMatchVariance(o,S,fn.MAX_INDIVIDUAL_VARIANCE);R<d&&(d=R,m=A)}if(m>=0)return m;throw new he}}fn.MAX_AVG_VARIANCE=.48,fn.MAX_INDIVIDUAL_VARIANCE=.7,fn.START_END_PATTERN=Int32Array.from([1,1,1]),fn.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),fn.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),fn.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class mr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,o,l){let h=this.decodeRowStringBuffer,d=this.decodeMiddle(o,l,h),m=h.toString(),y=mr.parseExtensionString(m),A=[new Fe((l[0]+l[1])/2,r),new Fe(d,r)],S=new Ue(m,null,0,A,Me.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&S.putAllMetadata(y),S}decodeMiddle(r,o,l){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let d=r.getSize(),m=o[1],y=0;for(let S=0;S<5&&m<d;S++){let R=fn.decodeDigit(r,h,m,fn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+R%10);for(let B of h)m+=B;R>=10&&(y|=1<<4-S),S!==4&&(m=r.getNextSet(m),m=r.getNextUnset(m))}if(l.length!==5)throw new he;let A=this.determineCheckDigit(y);if(mr.extensionChecksum(l.toString())!==A)throw new he;return m}static extensionChecksum(r){let o=r.length,l=0;for(let h=o-2;h>=0;h-=2)l+=r.charAt(h).charCodeAt(0)-48;l*=3;for(let h=o-1;h>=0;h-=2)l+=r.charAt(h).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(r){for(let o=0;o<10;o++)if(r===this.CHECK_DIGIT_ENCODINGS[o])return o;throw new he}static parseExtensionString(r){if(r.length!==5)return null;let o=mr.parseExtension5String(r);return o==null?null:new Map([[Et.SUGGESTED_PRICE,o]])}static parseExtension5String(r){let o;switch(r.charAt(0)){case"0":o="";break;case"5":o="$";break;case"9":switch(r){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}o="";break;default:o="";break}let l=parseInt(r.substring(1)),h=(l/100).toString(),d=l%100,m=d<10?"0"+d:d.toString();return o+h+"."+m}}class Is{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,o,l){let h=this.decodeRowStringBuffer,d=this.decodeMiddle(o,l,h),m=h.toString(),y=Is.parseExtensionString(m),A=[new Fe((l[0]+l[1])/2,r),new Fe(d,r)],S=new Ue(m,null,0,A,Me.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&S.putAllMetadata(y),S}decodeMiddle(r,o,l){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let d=r.getSize(),m=o[1],y=0;for(let A=0;A<2&&m<d;A++){let S=fn.decodeDigit(r,h,m,fn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+S%10);for(let R of h)m+=R;S>=10&&(y|=1<<1-A),A!==1&&(m=r.getNextSet(m),m=r.getNextUnset(m))}if(l.length!==2)throw new he;if(parseInt(l.toString())%4!==y)throw new he;return m}static parseExtensionString(r){return r.length!==2?null:new Map([[Et.ISSUE_NUMBER,parseInt(r)]])}}class rr{static decodeRow(r,o,l){let h=fn.findGuardPattern(o,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new mr().decodeRow(r,o,h)}catch{return new Is().decodeRow(r,o,h)}}}rr.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class _t extends fn{constructor(){super(),this.decodeRowStringBuffer="",_t.L_AND_G_PATTERNS=_t.L_PATTERNS.map(r=>Int32Array.from(r));for(let r=10;r<20;r++){let o=_t.L_PATTERNS[r-10],l=new Int32Array(o.length);for(let h=0;h<o.length;h++)l[h]=o[o.length-h-1];_t.L_AND_G_PATTERNS[r]=l}}decodeRow(r,o,l){let h=_t.findStartGuardPattern(o),d=l==null?null:l.get(ke.NEED_RESULT_POINT_CALLBACK);if(d!=null){const Re=new Fe((h[0]+h[1])/2,r);d.foundPossibleResultPoint(Re)}let m=this.decodeMiddle(o,h,this.decodeRowStringBuffer),y=m.rowOffset,A=m.resultString;if(d!=null){const Re=new Fe(y,r);d.foundPossibleResultPoint(Re)}let S=this.decodeEnd(o,y);if(d!=null){const Re=new Fe((S[0]+S[1])/2,r);d.foundPossibleResultPoint(Re)}let R=S[1],B=R+(R-S[0]);if(B>=o.getSize()||!o.isRange(R,B,!1))throw new he;let P=A.toString();if(P.length<8)throw new j;if(!_t.checkChecksum(P))throw new k;let Y=(h[1]+h[0])/2,$=(S[1]+S[0])/2,ee=this.getBarcodeFormat(),le=[new Fe(Y,r),new Fe($,r)],xe=new Ue(P,null,0,le,ee,new Date().getTime()),Le=0;try{let Re=rr.decodeRow(r,o,S[1]);xe.putMetadata(Et.UPC_EAN_EXTENSION,Re.getText()),xe.putAllMetadata(Re.getResultMetadata()),xe.addResultPoints(Re.getResultPoints()),Le=Re.getText().length}catch{}let De=l==null?null:l.get(ke.ALLOWED_EAN_EXTENSIONS);if(De!=null){let Re=!1;for(let St in De)if(Le.toString()===St){Re=!0;break}if(!Re)throw new he}return xe}decodeEnd(r,o){return _t.findGuardPattern(r,o,!1,_t.START_END_PATTERN,new Int32Array(_t.START_END_PATTERN.length).fill(0))}static checkChecksum(r){return _t.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let o=r.length;if(o===0)return!1;let l=parseInt(r.charAt(o-1),10);return _t.getStandardUPCEANChecksum(r.substring(0,o-1))===l}static getStandardUPCEANChecksum(r){let o=r.length,l=0;for(let h=o-1;h>=0;h-=2){let d=r.charAt(h).charCodeAt(0)-48;if(d<0||d>9)throw new j;l+=d}l*=3;for(let h=o-2;h>=0;h-=2){let d=r.charAt(h).charCodeAt(0)-48;if(d<0||d>9)throw new j;l+=d}return(1e3-l)%10}}class sn extends _t{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,o,l){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let d=r.getSize(),m=o[1],y=0;for(let S=0;S<6&&m<d;S++){let R=_t.decodeDigit(r,h,m,_t.L_AND_G_PATTERNS);l+=String.fromCharCode(48+R%10);for(let B of h)m+=B;R>=10&&(y|=1<<5-S)}l=sn.determineFirstDigit(l,y),m=_t.findGuardPattern(r,m,!0,_t.MIDDLE_PATTERN,new Int32Array(_t.MIDDLE_PATTERN.length).fill(0))[1];for(let S=0;S<6&&m<d;S++){let R=_t.decodeDigit(r,h,m,_t.L_PATTERNS);l+=String.fromCharCode(48+R);for(let B of h)m+=B}return{rowOffset:m,resultString:l}}getBarcodeFormat(){return Me.EAN_13}static determineFirstDigit(r,o){for(let l=0;l<10;l++)if(o===this.FIRST_DIGIT_ENCODINGS[l])return r=String.fromCharCode(48+l)+r,r;throw new he}}sn.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class re extends _t{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,o,l){const h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let d=r.getSize(),m=o[1];for(let A=0;A<4&&m<d;A++){let S=_t.decodeDigit(r,h,m,_t.L_PATTERNS);l+=String.fromCharCode(48+S);for(let R of h)m+=R}m=_t.findGuardPattern(r,m,!0,_t.MIDDLE_PATTERN,new Int32Array(_t.MIDDLE_PATTERN.length).fill(0))[1];for(let A=0;A<4&&m<d;A++){let S=_t.decodeDigit(r,h,m,_t.L_PATTERNS);l+=String.fromCharCode(48+S);for(let R of h)m+=R}return{rowOffset:m,resultString:l}}getBarcodeFormat(){return Me.EAN_8}}class lt extends _t{constructor(){super(...arguments),this.ean13Reader=new sn}getBarcodeFormat(){return Me.UPC_A}decode(r,o){return this.maybeReturnResult(this.ean13Reader.decode(r))}decodeRow(r,o,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,o,l))}decodeMiddle(r,o,l){return this.ean13Reader.decodeMiddle(r,o,l)}maybeReturnResult(r){let o=r.getText();if(o.charAt(0)==="0"){let l=new Ue(o.substring(1),null,null,r.getResultPoints(),Me.UPC_A);return r.getResultMetadata()!=null&&l.putAllMetadata(r.getResultMetadata()),l}else throw new he}reset(){this.ean13Reader.reset()}}class Tt extends _t{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(r,o,l){const h=this.decodeMiddleCounters.map(S=>S);h[0]=0,h[1]=0,h[2]=0,h[3]=0;const d=r.getSize();let m=o[1],y=0;for(let S=0;S<6&&m<d;S++){const R=Tt.decodeDigit(r,h,m,Tt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+R%10);for(let B of h)m+=B;R>=10&&(y|=1<<5-S)}let A=Tt.determineNumSysAndCheckDigit(l,y);return{rowOffset:m,resultString:A}}decodeEnd(r,o){return Tt.findGuardPatternWithoutCounters(r,o,!0,Tt.MIDDLE_END_PATTERN)}checkChecksum(r){return _t.checkChecksum(Tt.convertUPCEtoUPCA(r))}static determineNumSysAndCheckDigit(r,o){for(let l=0;l<=1;l++)for(let h=0;h<10;h++)if(o===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][h]){let d=String.fromCharCode(48+l),m=String.fromCharCode(48+h);return d+r+m}throw he.getNotFoundInstance()}getBarcodeFormat(){return Me.UPC_E}static convertUPCEtoUPCA(r){const o=r.slice(1,7).split("").map(d=>d.charCodeAt(0)),l=new X;l.append(r.charAt(0));let h=o[5];switch(h){case 0:case 1:case 2:l.appendChars(o,0,2),l.append(h),l.append("0000"),l.appendChars(o,2,3);break;case 3:l.appendChars(o,0,3),l.append("00000"),l.appendChars(o,3,2);break;case 4:l.appendChars(o,0,4),l.append("00000"),l.append(o[4]);break;default:l.appendChars(o,0,5),l.append("0000"),l.append(h);break}return r.length>=8&&l.append(r.charAt(7)),l.toString()}}Tt.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Tt.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class qi extends Xt{constructor(r){super();let o=r==null?null:r.get(ke.POSSIBLE_FORMATS),l=[];a(o)?(l.push(new sn),l.push(new lt),l.push(new re),l.push(new Tt)):(o.indexOf(Me.EAN_13)>-1&&l.push(new sn),o.indexOf(Me.UPC_A)>-1&&l.push(new lt),o.indexOf(Me.EAN_8)>-1&&l.push(new re),o.indexOf(Me.UPC_E)>-1&&l.push(new Tt)),this.readers=l}decodeRow(r,o,l){for(let h of this.readers)try{const d=h.decodeRow(r,o,l),m=d.getBarcodeFormat()===Me.EAN_13&&d.getText().charAt(0)==="0",y=l==null?null:l.get(ke.POSSIBLE_FORMATS),A=y==null||y.includes(Me.UPC_A);if(m&&A){const S=d.getRawBytes(),R=new Ue(d.getText().substring(1),S,S?S.length:null,d.getResultPoints(),Me.UPC_A);return R.putAllMetadata(d.getResultMetadata()),R}return d}catch{}throw new he}reset(){for(let r of this.readers)r.reset()}}class Qt extends Xt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(r,o){for(let l=0;l<o.length;l++)if(Xt.patternMatchVariance(r,o[l],Qt.MAX_INDIVIDUAL_VARIANCE)<Qt.MAX_AVG_VARIANCE)return l;throw new he}static count(r){return We.sum(new Int32Array(r))}static increment(r,o){let l=0,h=o[0];for(let d=1;d<r.length;d++)o[d]>h&&(h=o[d],l=d);r[l]++}static decrement(r,o){let l=0,h=o[0];for(let d=1;d<r.length;d++)o[d]<h&&(h=o[d],l=d);r[l]--}static isFinderPattern(r){let o=r[0]+r[1],l=o+r[2]+r[3],h=o/l;if(h>=Qt.MIN_FINDER_PATTERN_RATIO&&h<=Qt.MAX_FINDER_PATTERN_RATIO){let d=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;for(let y of r)y>m&&(m=y),y<d&&(d=y);return m<10*d}return!1}}Qt.MAX_AVG_VARIANCE=.2,Qt.MAX_INDIVIDUAL_VARIANCE=.45,Qt.MIN_FINDER_PATTERN_RATIO=9.5/12,Qt.MAX_FINDER_PATTERN_RATIO=12.5/14;class Xn{constructor(r,o){this.value=r,this.checksumPortion=o}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(r){if(!(r instanceof Xn))return!1;const o=r;return this.value===o.value&&this.checksumPortion===o.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Ii{constructor(r,o,l,h,d){this.value=r,this.startEnd=o,this.value=r,this.startEnd=o,this.resultPoints=new Array,this.resultPoints.push(new Fe(l,d)),this.resultPoints.push(new Fe(h,d))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(r){if(!(r instanceof Ii))return!1;const o=r;return this.value===o.value}hashCode(){return this.value}}class wi{constructor(){}static getRSSvalue(r,o,l){let h=0;for(let A of r)h+=A;let d=0,m=0,y=r.length;for(let A=0;A<y-1;A++){let S;for(S=1,m|=1<<A;S<r[A];S++,m&=~(1<<A)){let R=wi.combins(h-S-1,y-A-2);if(l&&m===0&&h-S-(y-A-1)>=y-A-1&&(R-=wi.combins(h-S-(y-A),y-A-2)),y-A-1>1){let B=0;for(let P=h-S-(y-A-2);P>o;P--)B+=wi.combins(h-S-P-1,y-A-3);R-=B*(y-1-A)}else h-S>o&&R--;d+=R}h-=S}return d}static combins(r,o){let l,h;r-o>o?(h=o,l=r-o):(h=r-o,l=o);let d=1,m=1;for(let y=r;y>l;y--)d*=y,m<=h&&(d/=m,m++);for(;m<=h;)d/=m,m++;return d}}class qr{static buildBitArray(r){let o=r.length*2-1;r[r.length-1].getRightChar()==null&&(o-=1);let l=12*o,h=new Se(l),d=0,y=r[0].getRightChar().getValue();for(let A=11;A>=0;--A)(y&1<<A)!=0&&h.set(d),d++;for(let A=1;A<r.length;++A){let S=r[A],R=S.getLeftChar().getValue();for(let B=11;B>=0;--B)(R&1<<B)!=0&&h.set(d),d++;if(S.getRightChar()!=null){let B=S.getRightChar().getValue();for(let P=11;P>=0;--P)(B&1<<P)!=0&&h.set(d),d++}}return h}}class qn{constructor(r,o){o?this.decodedInformation=null:(this.finished=r,this.decodedInformation=o)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Ws{constructor(r){this.newPosition=r}getNewPosition(){return this.newPosition}}class Qn extends Ws{constructor(r,o){super(r),this.value=o}getValue(){return this.value}isFNC1(){return this.value===Qn.FNC1}}Qn.FNC1="$";class Ni extends Ws{constructor(r,o,l){super(r),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=o}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Ri extends Ws{constructor(r,o,l){if(super(r),o<0||o>10||l<0||l>10)throw new j;this.firstDigit=o,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Ri.FNC1}isSecondDigitFNC1(){return this.secondDigit===Ri.FNC1}isAnyFNC1(){return this.firstDigit===Ri.FNC1||this.secondDigit===Ri.FNC1}}Ri.FNC1=10;class je{constructor(){}static parseFieldsInGeneralPurpose(r){if(!r)return null;if(r.length<2)throw new he;let o=r.substring(0,2);for(let d of je.TWO_DIGIT_DATA_LENGTH)if(d[0]===o)return d[1]===je.VARIABLE_LENGTH?je.processVariableAI(2,d[2],r):je.processFixedAI(2,d[1],r);if(r.length<3)throw new he;let l=r.substring(0,3);for(let d of je.THREE_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===je.VARIABLE_LENGTH?je.processVariableAI(3,d[2],r):je.processFixedAI(3,d[1],r);for(let d of je.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===je.VARIABLE_LENGTH?je.processVariableAI(4,d[2],r):je.processFixedAI(4,d[1],r);if(r.length<4)throw new he;let h=r.substring(0,4);for(let d of je.FOUR_DIGIT_DATA_LENGTH)if(d[0]===h)return d[1]===je.VARIABLE_LENGTH?je.processVariableAI(4,d[2],r):je.processFixedAI(4,d[1],r);throw new he}static processFixedAI(r,o,l){if(l.length<r)throw new he;let h=l.substring(0,r);if(l.length<r+o)throw new he;let d=l.substring(r,r+o),m=l.substring(r+o),y="("+h+")"+d,A=je.parseFieldsInGeneralPurpose(m);return A==null?y:y+A}static processVariableAI(r,o,l){let h=l.substring(0,r),d;l.length<r+o?d=l.length:d=r+o;let m=l.substring(r,d),y=l.substring(d),A="("+h+")"+m,S=je.parseFieldsInGeneralPurpose(y);return S==null?A:A+S}}je.VARIABLE_LENGTH=[],je.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",je.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",je.VARIABLE_LENGTH,20],["22",je.VARIABLE_LENGTH,29],["30",je.VARIABLE_LENGTH,8],["37",je.VARIABLE_LENGTH,8],["90",je.VARIABLE_LENGTH,30],["91",je.VARIABLE_LENGTH,30],["92",je.VARIABLE_LENGTH,30],["93",je.VARIABLE_LENGTH,30],["94",je.VARIABLE_LENGTH,30],["95",je.VARIABLE_LENGTH,30],["96",je.VARIABLE_LENGTH,30],["97",je.VARIABLE_LENGTH,3],["98",je.VARIABLE_LENGTH,30],["99",je.VARIABLE_LENGTH,30]],je.THREE_DIGIT_DATA_LENGTH=[["240",je.VARIABLE_LENGTH,30],["241",je.VARIABLE_LENGTH,30],["242",je.VARIABLE_LENGTH,6],["250",je.VARIABLE_LENGTH,30],["251",je.VARIABLE_LENGTH,30],["253",je.VARIABLE_LENGTH,17],["254",je.VARIABLE_LENGTH,20],["400",je.VARIABLE_LENGTH,30],["401",je.VARIABLE_LENGTH,30],["402",17],["403",je.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",je.VARIABLE_LENGTH,20],["421",je.VARIABLE_LENGTH,15],["422",3],["423",je.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],je.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",je.VARIABLE_LENGTH,15],["391",je.VARIABLE_LENGTH,18],["392",je.VARIABLE_LENGTH,15],["393",je.VARIABLE_LENGTH,18],["703",je.VARIABLE_LENGTH,30]],je.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",je.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",je.VARIABLE_LENGTH,20],["8003",je.VARIABLE_LENGTH,30],["8004",je.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",je.VARIABLE_LENGTH,30],["8008",je.VARIABLE_LENGTH,12],["8018",18],["8020",je.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",je.VARIABLE_LENGTH,70],["8200",je.VARIABLE_LENGTH,70]];class Ti{constructor(r){this.buffer=new X,this.information=r}decodeAllCodes(r,o){let l=o,h=null;do{let d=this.decodeGeneralPurposeField(l,h),m=je.parseFieldsInGeneralPurpose(d.getNewString());if(m!=null&&r.append(m),d.isRemaining()?h=""+d.getRemainingValue():h=null,l===d.getNewPosition())break;l=d.getNewPosition()}while(!0);return r.toString()}isStillNumeric(r){if(r+7>this.information.getSize())return r+4<=this.information.getSize();for(let o=r;o<r+3;++o)if(this.information.get(o))return!0;return this.information.get(r+3)}decodeNumeric(r){if(r+7>this.information.getSize()){let d=this.extractNumericValueFromBitArray(r,4);return d===0?new Ri(this.information.getSize(),Ri.FNC1,Ri.FNC1):new Ri(this.information.getSize(),d-1,Ri.FNC1)}let o=this.extractNumericValueFromBitArray(r,7),l=(o-8)/11,h=(o-8)%11;return new Ri(r+7,l,h)}extractNumericValueFromBitArray(r,o){return Ti.extractNumericValueFromBitArray(this.information,r,o)}static extractNumericValueFromBitArray(r,o,l){let h=0;for(let d=0;d<l;++d)r.get(o+d)&&(h|=1<<l-d-1);return h}decodeGeneralPurposeField(r,o){this.buffer.setLengthToZero(),o!=null&&this.buffer.append(o),this.current.setPosition(r);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new Ni(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new Ni(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let r,o;do{let l=this.current.getPosition();if(this.current.isAlpha()?(o=this.parseAlphaBlock(),r=o.isFinished()):this.current.isIsoIec646()?(o=this.parseIsoIec646Block(),r=o.isFinished()):(o=this.parseNumericBlock(),r=o.isFinished()),!(l!==this.current.getPosition())&&!r)break}while(!r);return o.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let r=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFirstDigitFNC1()){let o;return r.isSecondDigitFNC1()?o=new Ni(this.current.getPosition(),this.buffer.toString()):o=new Ni(this.current.getPosition(),this.buffer.toString(),r.getSecondDigit()),new qn(!0,o)}if(this.buffer.append(r.getFirstDigit()),r.isSecondDigitFNC1()){let o=new Ni(this.current.getPosition(),this.buffer.toString());return new qn(!0,o)}this.buffer.append(r.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new qn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let r=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let o=new Ni(this.current.getPosition(),this.buffer.toString());return new qn(!0,o)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new qn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let r=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let o=new Ni(this.current.getPosition(),this.buffer.toString());return new qn(!0,o)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new qn(!1)}isStillIsoIec646(r){if(r+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(r,5);if(o>=5&&o<16)return!0;if(r+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(r,7);if(l>=64&&l<116)return!0;if(r+8>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(r,8);return h>=232&&h<253}decodeIsoIec646(r){let o=this.extractNumericValueFromBitArray(r,5);if(o===15)return new Qn(r+5,Qn.FNC1);if(o>=5&&o<15)return new Qn(r+5,"0"+(o-5));let l=this.extractNumericValueFromBitArray(r,7);if(l>=64&&l<90)return new Qn(r+7,""+(l+1));if(l>=90&&l<116)return new Qn(r+7,""+(l+7));let h=this.extractNumericValueFromBitArray(r,8),d;switch(h){case 232:d="!";break;case 233:d='"';break;case 234:d="%";break;case 235:d="&";break;case 236:d="'";break;case 237:d="(";break;case 238:d=")";break;case 239:d="*";break;case 240:d="+";break;case 241:d=",";break;case 242:d="-";break;case 243:d=".";break;case 244:d="/";break;case 245:d=":";break;case 246:d=";";break;case 247:d="<";break;case 248:d="=";break;case 249:d=">";break;case 250:d="?";break;case 251:d="_";break;case 252:d=" ";break;default:throw new j}return new Qn(r+8,d)}isStillAlpha(r){if(r+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(r,5);if(o>=5&&o<16)return!0;if(r+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(r,6);return l>=16&&l<63}decodeAlphanumeric(r){let o=this.extractNumericValueFromBitArray(r,5);if(o===15)return new Qn(r+5,Qn.FNC1);if(o>=5&&o<15)return new Qn(r+5,"0"+(o-5));let l=this.extractNumericValueFromBitArray(r,6);if(l>=32&&l<58)return new Qn(r+6,""+(l+33));let h;switch(l){case 58:h="*";break;case 59:h=",";break;case 60:h="-";break;case 61:h=".";break;case 62:h="/";break;default:throw new oi("Decoding invalid alphanumeric value: "+l)}return new Qn(r+6,h)}isAlphaTo646ToAlphaLatch(r){if(r+1>this.information.getSize())return!1;for(let o=0;o<5&&o+r<this.information.getSize();++o)if(o===2){if(!this.information.get(r+2))return!1}else if(this.information.get(r+o))return!1;return!0}isAlphaOr646ToNumericLatch(r){if(r+3>this.information.getSize())return!1;for(let o=r;o<r+3;++o)if(this.information.get(o))return!1;return!0}isNumericToAlphaNumericLatch(r){if(r+1>this.information.getSize())return!1;for(let o=0;o<4&&o+r<this.information.getSize();++o)if(this.information.get(r+o))return!1;return!0}}class Dn{constructor(r){this.information=r,this.generalDecoder=new Ti(r)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class $t extends Dn{constructor(r){super(r)}encodeCompressedGtin(r,o){r.append("(01)");let l=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,o,l)}encodeCompressedGtinWithoutAI(r,o,l){for(let h=0;h<4;++h){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(o+10*h,10);d/100===0&&r.append("0"),d/10===0&&r.append("0"),r.append(d)}$t.appendCheckDigit(r,l)}static appendCheckDigit(r,o){let l=0;for(let h=0;h<13;h++){let d=r.charAt(h+o).charCodeAt(0)-48;l+=(h&1)===0?3*d:d}l=10-l%10,l===10&&(l=0),r.append(l)}}$t.GTIN_SIZE=40;class Oi extends $t{constructor(r){super(r)}parseInformation(){let r=new X;r.append("(01)");let o=r.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(Oi.HEADER_SIZE,4);return r.append(l),this.encodeCompressedGtinWithoutAI(r,Oi.HEADER_SIZE+4,o),this.getGeneralDecoder().decodeAllCodes(r,Oi.HEADER_SIZE+44)}}Oi.HEADER_SIZE=4;class xs extends Dn{constructor(r){super(r)}parseInformation(){let r=new X;return this.getGeneralDecoder().decodeAllCodes(r,xs.HEADER_SIZE)}}xs.HEADER_SIZE=5;class Da extends $t{constructor(r){super(r)}encodeCompressedWeight(r,o,l){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(o,l);this.addWeightCode(r,h);let d=this.checkWeight(h),m=1e5;for(let y=0;y<5;++y)d/m===0&&r.append("0"),m/=10;r.append(d)}}class sr extends Da{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()!=sr.HEADER_SIZE+Da.GTIN_SIZE+sr.WEIGHT_SIZE)throw new he;let r=new X;return this.encodeCompressedGtin(r,sr.HEADER_SIZE),this.encodeCompressedWeight(r,sr.HEADER_SIZE+Da.GTIN_SIZE,sr.WEIGHT_SIZE),r.toString()}}sr.HEADER_SIZE=5,sr.WEIGHT_SIZE=15;class ll extends sr{constructor(r){super(r)}addWeightCode(r,o){r.append("(3103)")}checkWeight(r){return r}}class Qr extends sr{constructor(r){super(r)}addWeightCode(r,o){o<1e4?r.append("(3202)"):r.append("(3203)")}checkWeight(r){return r<1e4?r:r-1e4}}class Di extends $t{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<Di.HEADER_SIZE+$t.GTIN_SIZE)throw new he;let r=new X;this.encodeCompressedGtin(r,Di.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(Di.HEADER_SIZE+$t.GTIN_SIZE,Di.LAST_DIGIT_SIZE);r.append("(392"),r.append(o),r.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(Di.HEADER_SIZE+$t.GTIN_SIZE+Di.LAST_DIGIT_SIZE,null);return r.append(l.getNewString()),r.toString()}}Di.HEADER_SIZE=8,Di.LAST_DIGIT_SIZE=2;class Sn extends $t{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<Sn.HEADER_SIZE+$t.GTIN_SIZE)throw new he;let r=new X;this.encodeCompressedGtin(r,Sn.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(Sn.HEADER_SIZE+$t.GTIN_SIZE,Sn.LAST_DIGIT_SIZE);r.append("(393"),r.append(o),r.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(Sn.HEADER_SIZE+$t.GTIN_SIZE+Sn.LAST_DIGIT_SIZE,Sn.FIRST_THREE_DIGITS_SIZE);l/100==0&&r.append("0"),l/10==0&&r.append("0"),r.append(l);let h=this.getGeneralDecoder().decodeGeneralPurposeField(Sn.HEADER_SIZE+$t.GTIN_SIZE+Sn.LAST_DIGIT_SIZE+Sn.FIRST_THREE_DIGITS_SIZE,null);return r.append(h.getNewString()),r.toString()}}Sn.HEADER_SIZE=8,Sn.LAST_DIGIT_SIZE=2,Sn.FIRST_THREE_DIGITS_SIZE=10;class Rt extends Da{constructor(r,o,l){super(r),this.dateCode=l,this.firstAIdigits=o}parseInformation(){if(this.getInformation().getSize()!=Rt.HEADER_SIZE+Rt.GTIN_SIZE+Rt.WEIGHT_SIZE+Rt.DATE_SIZE)throw new he;let r=new X;return this.encodeCompressedGtin(r,Rt.HEADER_SIZE),this.encodeCompressedWeight(r,Rt.HEADER_SIZE+Rt.GTIN_SIZE,Rt.WEIGHT_SIZE),this.encodeCompressedDate(r,Rt.HEADER_SIZE+Rt.GTIN_SIZE+Rt.WEIGHT_SIZE),r.toString()}encodeCompressedDate(r,o){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(o,Rt.DATE_SIZE);if(l==38400)return;r.append("("),r.append(this.dateCode),r.append(")");let h=l%32;l/=32;let d=l%12+1;l/=12;let m=l;m/10==0&&r.append("0"),r.append(m),d/10==0&&r.append("0"),r.append(d),h/10==0&&r.append("0"),r.append(h)}addWeightCode(r,o){r.append("("),r.append(this.firstAIdigits),r.append(o/1e5),r.append(")")}checkWeight(r){return r%1e5}}Rt.HEADER_SIZE=8,Rt.WEIGHT_SIZE=20,Rt.DATE_SIZE=16;function Qi(L){try{if(L.get(1))return new Oi(L);if(!L.get(2))return new xs(L);switch(Ti.extractNumericValueFromBitArray(L,1,4)){case 4:return new ll(L);case 5:return new Qr(L)}switch(Ti.extractNumericValueFromBitArray(L,1,5)){case 12:return new Di(L);case 13:return new Sn(L)}switch(Ti.extractNumericValueFromBitArray(L,1,7)){case 56:return new Rt(L,"310","11");case 57:return new Rt(L,"320","11");case 58:return new Rt(L,"310","13");case 59:return new Rt(L,"320","13");case 60:return new Rt(L,"310","15");case 61:return new Rt(L,"320","15");case 62:return new Rt(L,"310","17");case 63:return new Rt(L,"320","17")}}catch(r){throw console.log(r),new oi("unknown decoder: "+L)}}class xi{constructor(r,o,l,h){this.leftchar=r,this.rightchar=o,this.finderpattern=l,this.maybeLast=h}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(r,o){return r instanceof xi?xi.equalsOrNull(r.leftchar,o.leftchar)&&xi.equalsOrNull(r.rightchar,o.rightchar)&&xi.equalsOrNull(r.finderpattern,o.finderpattern):!1}static equalsOrNull(r,o){return r===null?o===null:xi.equals(r,o)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Mn{constructor(r,o,l){this.pairs=r,this.rowNumber=o,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(r){return this.checkEqualitity(this,r)}toString(){return"{ "+this.pairs+" }"}equals(r,o){return r instanceof Mn?this.checkEqualitity(r,o)&&r.wasReversed===o.wasReversed:!1}checkEqualitity(r,o){if(!r||!o)return;let l;return r.forEach((h,d)=>{o.forEach(m=>{h.getLeftChar().getValue()===m.getLeftChar().getValue()&&h.getRightChar().getValue()===m.getRightChar().getValue()&&h.getFinderPatter().getValue()===m.getFinderPatter().getValue()&&(l=!0)})}),l}}class ve extends Qt{constructor(r){super(...arguments),this.pairs=new Array(ve.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=r===!0}decodeRow(r,o,l){this.pairs.length=0,this.startFromEven=!1;try{return ve.constructResult(this.decodeRow2pairs(r,o))}catch(h){this.verbose&&console.log(h)}return this.pairs.length=0,this.startFromEven=!0,ve.constructResult(this.decodeRow2pairs(r,o))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(r,o){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(o,this.pairs,r))}catch(d){if(d instanceof he){if(!this.pairs.length)throw new he;l=!0}}if(this.checkChecksum())return this.pairs;let h;if(this.rows.length?h=!0:h=!1,this.storeRow(r,!1),h){let d=this.checkRowsBoolean(!1);if(d!=null||(d=this.checkRowsBoolean(!0),d!=null))return d}throw new he}checkRowsBoolean(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());let o=null;try{o=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return r&&(this.rows=this.rows.reverse()),o}checkRows(r,o){for(let l=o;l<this.rows.length;l++){let h=this.rows[l];this.pairs.length=0;for(let m of r)this.pairs.push(m.getPairs());if(this.pairs.push(h.getPairs()),!ve.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let d=new Array(r);d.push(h);try{return this.checkRows(d,l+1)}catch(m){this.verbose&&console.log(m)}}throw new he}static isValidSequence(r){for(let o of ve.FINDER_PATTERN_SEQUENCES){if(r.length>o.length)continue;let l=!0;for(let h=0;h<r.length;h++)if(r[h].getFinderPattern().getValue()!=o[h]){l=!1;break}if(l)return!0}return!1}storeRow(r,o){let l=0,h=!1,d=!1;for(;l<this.rows.length;){let m=this.rows[l];if(m.getRowNumber()>r){d=m.isEquivalent(this.pairs);break}h=m.isEquivalent(this.pairs),l++}d||h||ve.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new Mn(this.pairs,r,o)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(r,o){for(let l of o)if(l.getPairs().length!==r.length){for(let h of l.getPairs())for(let d of r)if(xi.equals(h,d))break}}static isPartialRow(r,o){for(let l of o){let h=!0;for(let d of r){let m=!1;for(let y of l.getPairs())if(d.equals(y)){m=!0;break}if(!m){h=!1;break}}if(h)return!0}return!1}getRows(){return this.rows}static constructResult(r){let o=qr.buildBitArray(r),h=Qi(o).parseInformation(),d=r[0].getFinderPattern().getResultPoints(),m=r[r.length-1].getFinderPattern().getResultPoints(),y=[d[0],d[1],m[0],m[1]];return new Ue(h,null,null,y,Me.RSS_EXPANDED,null)}checkChecksum(){let r=this.pairs.get(0),o=r.getLeftChar(),l=r.getRightChar();if(l==null)return!1;let h=l.getChecksumPortion(),d=2;for(let y=1;y<this.pairs.size();++y){let A=this.pairs.get(y);h+=A.getLeftChar().getChecksumPortion(),d++;let S=A.getRightChar();S!=null&&(h+=S.getChecksumPortion(),d++)}return h%=211,211*(d-4)+h==o.getValue()}static getNextSecondBar(r,o){let l;return r.get(o)?(l=r.getNextUnset(o),l=r.getNextSet(l)):(l=r.getNextSet(o),l=r.getNextUnset(l)),l}retrieveNextPair(r,o,l){let h=o.length%2==0;this.startFromEven&&(h=!h);let d,m=!0,y=-1;do this.findNextPair(r,o,y),d=this.parseFoundFinderPattern(r,l,h),d==null?y=ve.getNextSecondBar(r,this.startEnd[0]):m=!1;while(m);let A=this.decodeDataCharacter(r,d,h,!0);if(!this.isEmptyPair(o)&&o[o.length-1].mustBeLast())throw new he;let S;try{S=this.decodeDataCharacter(r,d,h,!1)}catch(R){S=null,this.verbose&&console.log(R)}return new xi(A,S,d,!0)}isEmptyPair(r){return r.length===0}findNextPair(r,o,l){let h=this.getDecodeFinderCounters();h[0]=0,h[1]=0,h[2]=0,h[3]=0;let d=r.getSize(),m;l>=0?m=l:this.isEmptyPair(o)?m=0:m=o[o.length-1].getFinderPattern().getStartEnd()[1];let y=o.length%2!=0;this.startFromEven&&(y=!y);let A=!1;for(;m<d&&(A=!r.get(m),!!A);)m++;let S=0,R=m;for(let B=m;B<d;B++)if(r.get(B)!=A)h[S]++;else{if(S==3){if(y&&ve.reverseCounters(h),ve.isFinderPattern(h)){this.startEnd[0]=R,this.startEnd[1]=B;return}y&&ve.reverseCounters(h),R+=h[0]+h[1],h[0]=h[2],h[1]=h[3],h[2]=0,h[3]=0,S--}else S++;h[S]=1,A=!A}throw new he}static reverseCounters(r){let o=r.length;for(let l=0;l<o/2;++l){let h=r[l];r[l]=r[o-l-1],r[o-l-1]=h}}parseFoundFinderPattern(r,o,l){let h,d,m;if(l){let S=this.startEnd[0]-1;for(;S>=0&&!r.get(S);)S--;S++,h=this.startEnd[0]-S,d=S,m=this.startEnd[1]}else d=this.startEnd[0],m=r.getNextUnset(this.startEnd[1]+1),h=m-this.startEnd[1];let y=this.getDecodeFinderCounters();Q.arraycopy(y,0,y,1,y.length-1),y[0]=h;let A;try{A=this.parseFinderValue(y,ve.FINDER_PATTERNS)}catch{return null}return new Ii(A,[d,m],d,m,o)}decodeDataCharacter(r,o,l,h){let d=this.getDataCharacterCounters();for(let cn=0;cn<d.length;cn++)d[cn]=0;if(h)ve.recordPatternInReverse(r,o.getStartEnd()[0],d);else{ve.recordPattern(r,o.getStartEnd()[1],d);for(let cn=0,yi=d.length-1;cn<yi;cn++,yi--){let ur=d[cn];d[cn]=d[yi],d[yi]=ur}}let m=17,y=We.sum(new Int32Array(d))/m,A=(o.getStartEnd()[1]-o.getStartEnd()[0])/15;if(Math.abs(y-A)/A>.3)throw new he;let S=this.getOddCounts(),R=this.getEvenCounts(),B=this.getOddRoundingErrors(),P=this.getEvenRoundingErrors();for(let cn=0;cn<d.length;cn++){let yi=1*d[cn]/y,ur=yi+.5;if(ur<1){if(yi<.3)throw new he;ur=1}else if(ur>8){if(yi>8.7)throw new he;ur=8}let Va=cn/2;(cn&1)==0?(S[Va]=ur,B[Va]=yi-ur):(R[Va]=ur,P[Va]=yi-ur)}this.adjustOddEvenCounts(m);let Y=4*o.getValue()+(l?0:2)+(h?0:1)-1,$=0,ee=0;for(let cn=S.length-1;cn>=0;cn--){if(ve.isNotA1left(o,l,h)){let yi=ve.WEIGHTS[Y][2*cn];ee+=S[cn]*yi}$+=S[cn]}let le=0;for(let cn=R.length-1;cn>=0;cn--)if(ve.isNotA1left(o,l,h)){let yi=ve.WEIGHTS[Y][2*cn+1];le+=R[cn]*yi}let xe=ee+le;if(($&1)!=0||$>13||$<4)throw new he;let Le=(13-$)/2,De=ve.SYMBOL_WIDEST[Le],Re=9-De,St=wi.getRSSvalue(S,De,!0),ut=wi.getRSSvalue(R,Re,!1),Wn=ve.EVEN_TOTAL_SUBSET[Le],_r=ve.GSUM[Le],Pi=St*Wn+ut+_r;return new Xn(Pi,xe)}static isNotA1left(r,o,l){return!(r.getValue()==0&&o&&l)}adjustOddEvenCounts(r){let o=We.sum(new Int32Array(this.getOddCounts())),l=We.sum(new Int32Array(this.getEvenCounts())),h=!1,d=!1;o>13?d=!0:o<4&&(h=!0);let m=!1,y=!1;l>13?y=!0:l<4&&(m=!0);let A=o+l-r,S=(o&1)==1,R=(l&1)==0;if(A==1)if(S){if(R)throw new he;d=!0}else{if(!R)throw new he;y=!0}else if(A==-1)if(S){if(R)throw new he;h=!0}else{if(!R)throw new he;m=!0}else if(A==0){if(S){if(!R)throw new he;o<l?(h=!0,y=!0):(d=!0,m=!0)}else if(R)throw new he}else throw new he;if(h){if(d)throw new he;ve.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&ve.decrement(this.getOddCounts(),this.getOddRoundingErrors()),m){if(y)throw new he;ve.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&ve.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ve.SYMBOL_WIDEST=[7,5,4,3,1],ve.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ve.GSUM=[0,348,1388,2948,3988],ve.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ve.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ve.FINDER_PAT_A=0,ve.FINDER_PAT_B=1,ve.FINDER_PAT_C=2,ve.FINDER_PAT_D=3,ve.FINDER_PAT_E=4,ve.FINDER_PAT_F=5,ve.FINDER_PATTERN_SEQUENCES=[[ve.FINDER_PAT_A,ve.FINDER_PAT_A],[ve.FINDER_PAT_A,ve.FINDER_PAT_B,ve.FINDER_PAT_B],[ve.FINDER_PAT_A,ve.FINDER_PAT_C,ve.FINDER_PAT_B,ve.FINDER_PAT_D],[ve.FINDER_PAT_A,ve.FINDER_PAT_E,ve.FINDER_PAT_B,ve.FINDER_PAT_D,ve.FINDER_PAT_C],[ve.FINDER_PAT_A,ve.FINDER_PAT_E,ve.FINDER_PAT_B,ve.FINDER_PAT_D,ve.FINDER_PAT_D,ve.FINDER_PAT_F],[ve.FINDER_PAT_A,ve.FINDER_PAT_E,ve.FINDER_PAT_B,ve.FINDER_PAT_D,ve.FINDER_PAT_E,ve.FINDER_PAT_F,ve.FINDER_PAT_F],[ve.FINDER_PAT_A,ve.FINDER_PAT_A,ve.FINDER_PAT_B,ve.FINDER_PAT_B,ve.FINDER_PAT_C,ve.FINDER_PAT_C,ve.FINDER_PAT_D,ve.FINDER_PAT_D],[ve.FINDER_PAT_A,ve.FINDER_PAT_A,ve.FINDER_PAT_B,ve.FINDER_PAT_B,ve.FINDER_PAT_C,ve.FINDER_PAT_C,ve.FINDER_PAT_D,ve.FINDER_PAT_E,ve.FINDER_PAT_E],[ve.FINDER_PAT_A,ve.FINDER_PAT_A,ve.FINDER_PAT_B,ve.FINDER_PAT_B,ve.FINDER_PAT_C,ve.FINDER_PAT_C,ve.FINDER_PAT_D,ve.FINDER_PAT_E,ve.FINDER_PAT_F,ve.FINDER_PAT_F],[ve.FINDER_PAT_A,ve.FINDER_PAT_A,ve.FINDER_PAT_B,ve.FINDER_PAT_B,ve.FINDER_PAT_C,ve.FINDER_PAT_D,ve.FINDER_PAT_D,ve.FINDER_PAT_E,ve.FINDER_PAT_E,ve.FINDER_PAT_F,ve.FINDER_PAT_F]],ve.MAX_PAIRS=11;class vo extends Xn{constructor(r,o,l){super(r,o),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class en extends Qt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(r,o,l){const h=this.decodePair(o,!1,r,l);en.addOrTally(this.possibleLeftPairs,h),o.reverse();let d=this.decodePair(o,!0,r,l);en.addOrTally(this.possibleRightPairs,d),o.reverse();for(let m of this.possibleLeftPairs)if(m.getCount()>1){for(let y of this.possibleRightPairs)if(y.getCount()>1&&en.checkChecksum(m,y))return en.constructResult(m,y)}throw new he}static addOrTally(r,o){if(o==null)return;let l=!1;for(let h of r)if(h.getValue()===o.getValue()){h.incrementCount(),l=!0;break}l||r.push(o)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(r,o){let l=4537077*r.getValue()+o.getValue(),h=new String(l).toString(),d=new X;for(let S=13-h.length;S>0;S--)d.append("0");d.append(h);let m=0;for(let S=0;S<13;S++){let R=d.charAt(S).charCodeAt(0)-48;m+=(S&1)===0?3*R:R}m=10-m%10,m===10&&(m=0),d.append(m.toString());let y=r.getFinderPattern().getResultPoints(),A=o.getFinderPattern().getResultPoints();return new Ue(d.toString(),null,0,[y[0],y[1],A[0],A[1]],Me.RSS_14,new Date().getTime())}static checkChecksum(r,o){let l=(r.getChecksumPortion()+16*o.getChecksumPortion())%79,h=9*r.getFinderPattern().getValue()+o.getFinderPattern().getValue();return h>72&&h--,h>8&&h--,l===h}decodePair(r,o,l,h){try{let d=this.findFinderPattern(r,o),m=this.parseFoundFinderPattern(r,l,o,d),y=h==null?null:h.get(ke.NEED_RESULT_POINT_CALLBACK);if(y!=null){let R=(d[0]+d[1])/2;o&&(R=r.getSize()-1-R),y.foundPossibleResultPoint(new Fe(R,l))}let A=this.decodeDataCharacter(r,m,!0),S=this.decodeDataCharacter(r,m,!1);return new vo(1597*A.getValue()+S.getValue(),A.getChecksumPortion()+4*S.getChecksumPortion(),m)}catch{return null}}decodeDataCharacter(r,o,l){let h=this.getDataCharacterCounters();for(let le=0;le<h.length;le++)h[le]=0;if(l)Xt.recordPatternInReverse(r,o.getStartEnd()[0],h);else{Xt.recordPattern(r,o.getStartEnd()[1]+1,h);for(let le=0,xe=h.length-1;le<xe;le++,xe--){let Le=h[le];h[le]=h[xe],h[xe]=Le}}let d=l?16:15,m=We.sum(new Int32Array(h))/d,y=this.getOddCounts(),A=this.getEvenCounts(),S=this.getOddRoundingErrors(),R=this.getEvenRoundingErrors();for(let le=0;le<h.length;le++){let xe=h[le]/m,Le=Math.floor(xe+.5);Le<1?Le=1:Le>8&&(Le=8);let De=Math.floor(le/2);(le&1)===0?(y[De]=Le,S[De]=xe-Le):(A[De]=Le,R[De]=xe-Le)}this.adjustOddEvenCounts(l,d);let B=0,P=0;for(let le=y.length-1;le>=0;le--)P*=9,P+=y[le],B+=y[le];let Y=0,$=0;for(let le=A.length-1;le>=0;le--)Y*=9,Y+=A[le],$+=A[le];let ee=P+3*Y;if(l){if((B&1)!==0||B>12||B<4)throw new he;let le=(12-B)/2,xe=en.OUTSIDE_ODD_WIDEST[le],Le=9-xe,De=wi.getRSSvalue(y,xe,!1),Re=wi.getRSSvalue(A,Le,!0),St=en.OUTSIDE_EVEN_TOTAL_SUBSET[le],ut=en.OUTSIDE_GSUM[le];return new Xn(De*St+Re+ut,ee)}else{if(($&1)!==0||$>10||$<4)throw new he;let le=(10-$)/2,xe=en.INSIDE_ODD_WIDEST[le],Le=9-xe,De=wi.getRSSvalue(y,xe,!0),Re=wi.getRSSvalue(A,Le,!1),St=en.INSIDE_ODD_TOTAL_SUBSET[le],ut=en.INSIDE_GSUM[le];return new Xn(Re*St+De+ut,ee)}}findFinderPattern(r,o){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let h=r.getSize(),d=!1,m=0;for(;m<h&&(d=!r.get(m),o!==d);)m++;let y=0,A=m;for(let S=m;S<h;S++)if(r.get(S)!==d)l[y]++;else{if(y===3){if(Qt.isFinderPattern(l))return[A,S];A+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,y--}else y++;l[y]=1,d=!d}throw new he}parseFoundFinderPattern(r,o,l,h){let d=r.get(h[0]),m=h[0]-1;for(;m>=0&&d!==r.get(m);)m--;m++;const y=h[0]-m,A=this.getDecodeFinderCounters(),S=new Int32Array(A.length);Q.arraycopy(A,0,S,1,A.length-1),S[0]=y;const R=this.parseFinderValue(S,en.FINDER_PATTERNS);let B=m,P=h[1];return l&&(B=r.getSize()-1-B,P=r.getSize()-1-P),new Ii(R,[m,h[1]],B,P,o)}adjustOddEvenCounts(r,o){let l=We.sum(new Int32Array(this.getOddCounts())),h=We.sum(new Int32Array(this.getEvenCounts())),d=!1,m=!1,y=!1,A=!1;r?(l>12?m=!0:l<4&&(d=!0),h>12?A=!0:h<4&&(y=!0)):(l>11?m=!0:l<5&&(d=!0),h>10?A=!0:h<4&&(y=!0));let S=l+h-o,R=(l&1)===(r?1:0),B=(h&1)===1;if(S===1)if(R){if(B)throw new he;m=!0}else{if(!B)throw new he;A=!0}else if(S===-1)if(R){if(B)throw new he;d=!0}else{if(!B)throw new he;y=!0}else if(S===0){if(R){if(!B)throw new he;l<h?(d=!0,A=!0):(m=!0,y=!0)}else if(B)throw new he}else throw new he;if(d){if(m)throw new he;Qt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(m&&Qt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),y){if(A)throw new he;Qt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}A&&Qt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}en.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],en.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],en.OUTSIDE_GSUM=[0,161,961,2015,2715],en.INSIDE_GSUM=[0,336,1036,1516],en.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],en.INSIDE_ODD_WIDEST=[2,4,6,8],en.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Mi extends Xt{constructor(r,o){super(),this.readers=[],this.verbose=o===!0;const l=r?r.get(ke.POSSIBLE_FORMATS):null,h=r&&r.get(ke.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(Me.EAN_13)||l.includes(Me.UPC_A)||l.includes(Me.EAN_8)||l.includes(Me.UPC_E))&&this.readers.push(new qi(r)),l.includes(Me.CODE_39)&&this.readers.push(new qt(h)),l.includes(Me.CODE_128)&&this.readers.push(new Oe),l.includes(Me.ITF)&&this.readers.push(new it),l.includes(Me.RSS_14)&&this.readers.push(new en),l.includes(Me.RSS_EXPANDED)&&this.readers.push(new ve(this.verbose))):(this.readers.push(new qi(r)),this.readers.push(new qt),this.readers.push(new qi(r)),this.readers.push(new Oe),this.readers.push(new it),this.readers.push(new en),this.readers.push(new ve(this.verbose)))}decodeRow(r,o,l){for(let h=0;h<this.readers.length;h++)try{return this.readers[h].decodeRow(r,o,l)}catch{}throw new he}reset(){this.readers.forEach(r=>r.reset())}}class Io extends Be{constructor(r=500,o){super(new Mi(o),r,o)}}class Pt{constructor(r,o,l){this.ecCodewords=r,this.ecBlocks=[o],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Ot{constructor(r,o){this.count=r,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class bt{constructor(r,o,l,h,d,m){this.versionNumber=r,this.symbolSizeRows=o,this.symbolSizeColumns=l,this.dataRegionSizeRows=h,this.dataRegionSizeColumns=d,this.ecBlocks=m;let y=0;const A=m.getECCodewords(),S=m.getECBlocks();for(let R of S)y+=R.getCount()*(R.getDataCodewords()+A);this.totalCodewords=y}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(r,o){if((r&1)!==0||(o&1)!==0)throw new j;for(let l of bt.VERSIONS)if(l.symbolSizeRows===r&&l.symbolSizeColumns===o)return l;throw new j}toString(){return""+this.versionNumber}static buildVersions(){return[new bt(1,10,10,8,8,new Pt(5,new Ot(1,3))),new bt(2,12,12,10,10,new Pt(7,new Ot(1,5))),new bt(3,14,14,12,12,new Pt(10,new Ot(1,8))),new bt(4,16,16,14,14,new Pt(12,new Ot(1,12))),new bt(5,18,18,16,16,new Pt(14,new Ot(1,18))),new bt(6,20,20,18,18,new Pt(18,new Ot(1,22))),new bt(7,22,22,20,20,new Pt(20,new Ot(1,30))),new bt(8,24,24,22,22,new Pt(24,new Ot(1,36))),new bt(9,26,26,24,24,new Pt(28,new Ot(1,44))),new bt(10,32,32,14,14,new Pt(36,new Ot(1,62))),new bt(11,36,36,16,16,new Pt(42,new Ot(1,86))),new bt(12,40,40,18,18,new Pt(48,new Ot(1,114))),new bt(13,44,44,20,20,new Pt(56,new Ot(1,144))),new bt(14,48,48,22,22,new Pt(68,new Ot(1,174))),new bt(15,52,52,24,24,new Pt(42,new Ot(2,102))),new bt(16,64,64,14,14,new Pt(56,new Ot(2,140))),new bt(17,72,72,16,16,new Pt(36,new Ot(4,92))),new bt(18,80,80,18,18,new Pt(48,new Ot(4,114))),new bt(19,88,88,20,20,new Pt(56,new Ot(4,144))),new bt(20,96,96,22,22,new Pt(68,new Ot(4,174))),new bt(21,104,104,24,24,new Pt(56,new Ot(6,136))),new bt(22,120,120,18,18,new Pt(68,new Ot(6,175))),new bt(23,132,132,20,20,new Pt(62,new Ot(8,163))),new bt(24,144,144,22,22,new Pt(62,new Ot(8,156),new Ot(2,155))),new bt(25,8,18,6,16,new Pt(7,new Ot(1,5))),new bt(26,8,32,6,14,new Pt(11,new Ot(1,10))),new bt(27,12,26,10,24,new Pt(14,new Ot(1,16))),new bt(28,12,36,10,16,new Pt(18,new Ot(1,22))),new bt(29,16,36,14,16,new Pt(24,new Ot(1,32))),new bt(30,16,48,14,22,new Pt(28,new Ot(1,49)))]}}bt.VERSIONS=bt.buildVersions();class Ns{constructor(r){const o=r.getHeight();if(o<8||o>144||(o&1)!==0)throw new j;this.version=Ns.readVersion(r),this.mappingBitMatrix=this.extractDataRegion(r),this.readMappingMatrix=new $e(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(r){const o=r.getHeight(),l=r.getWidth();return bt.getVersionForDimensions(o,l)}readCodewords(){const r=new Int8Array(this.version.getTotalCodewords());let o=0,l=4,h=0;const d=this.mappingBitMatrix.getHeight(),m=this.mappingBitMatrix.getWidth();let y=!1,A=!1,S=!1,R=!1;do if(l===d&&h===0&&!y)r[o++]=this.readCorner1(d,m)&255,l-=2,h+=2,y=!0;else if(l===d-2&&h===0&&(m&3)!==0&&!A)r[o++]=this.readCorner2(d,m)&255,l-=2,h+=2,A=!0;else if(l===d+4&&h===2&&(m&7)===0&&!S)r[o++]=this.readCorner3(d,m)&255,l-=2,h+=2,S=!0;else if(l===d-2&&h===0&&(m&7)===4&&!R)r[o++]=this.readCorner4(d,m)&255,l-=2,h+=2,R=!0;else{do l<d&&h>=0&&!this.readMappingMatrix.get(h,l)&&(r[o++]=this.readUtah(l,h,d,m)&255),l-=2,h+=2;while(l>=0&&h<m);l+=1,h+=3;do l>=0&&h<m&&!this.readMappingMatrix.get(h,l)&&(r[o++]=this.readUtah(l,h,d,m)&255),l+=2,h-=2;while(l<d&&h>=0);l+=3,h+=1}while(l<d||h<m);if(o!==this.version.getTotalCodewords())throw new j;return r}readModule(r,o,l,h){return r<0&&(r+=l,o+=4-(l+4&7)),o<0&&(o+=h,r+=4-(h+4&7)),this.readMappingMatrix.set(o,r),this.mappingBitMatrix.get(o,r)}readUtah(r,o,l,h){let d=0;return this.readModule(r-2,o-2,l,h)&&(d|=1),d<<=1,this.readModule(r-2,o-1,l,h)&&(d|=1),d<<=1,this.readModule(r-1,o-2,l,h)&&(d|=1),d<<=1,this.readModule(r-1,o-1,l,h)&&(d|=1),d<<=1,this.readModule(r-1,o,l,h)&&(d|=1),d<<=1,this.readModule(r,o-2,l,h)&&(d|=1),d<<=1,this.readModule(r,o-1,l,h)&&(d|=1),d<<=1,this.readModule(r,o,l,h)&&(d|=1),d}readCorner1(r,o){let l=0;return this.readModule(r-1,0,r,o)&&(l|=1),l<<=1,this.readModule(r-1,1,r,o)&&(l|=1),l<<=1,this.readModule(r-1,2,r,o)&&(l|=1),l<<=1,this.readModule(0,o-2,r,o)&&(l|=1),l<<=1,this.readModule(0,o-1,r,o)&&(l|=1),l<<=1,this.readModule(1,o-1,r,o)&&(l|=1),l<<=1,this.readModule(2,o-1,r,o)&&(l|=1),l<<=1,this.readModule(3,o-1,r,o)&&(l|=1),l}readCorner2(r,o){let l=0;return this.readModule(r-3,0,r,o)&&(l|=1),l<<=1,this.readModule(r-2,0,r,o)&&(l|=1),l<<=1,this.readModule(r-1,0,r,o)&&(l|=1),l<<=1,this.readModule(0,o-4,r,o)&&(l|=1),l<<=1,this.readModule(0,o-3,r,o)&&(l|=1),l<<=1,this.readModule(0,o-2,r,o)&&(l|=1),l<<=1,this.readModule(0,o-1,r,o)&&(l|=1),l<<=1,this.readModule(1,o-1,r,o)&&(l|=1),l}readCorner3(r,o){let l=0;return this.readModule(r-1,0,r,o)&&(l|=1),l<<=1,this.readModule(r-1,o-1,r,o)&&(l|=1),l<<=1,this.readModule(0,o-3,r,o)&&(l|=1),l<<=1,this.readModule(0,o-2,r,o)&&(l|=1),l<<=1,this.readModule(0,o-1,r,o)&&(l|=1),l<<=1,this.readModule(1,o-3,r,o)&&(l|=1),l<<=1,this.readModule(1,o-2,r,o)&&(l|=1),l<<=1,this.readModule(1,o-1,r,o)&&(l|=1),l}readCorner4(r,o){let l=0;return this.readModule(r-3,0,r,o)&&(l|=1),l<<=1,this.readModule(r-2,0,r,o)&&(l|=1),l<<=1,this.readModule(r-1,0,r,o)&&(l|=1),l<<=1,this.readModule(0,o-2,r,o)&&(l|=1),l<<=1,this.readModule(0,o-1,r,o)&&(l|=1),l<<=1,this.readModule(1,o-1,r,o)&&(l|=1),l<<=1,this.readModule(2,o-1,r,o)&&(l|=1),l<<=1,this.readModule(3,o-1,r,o)&&(l|=1),l}extractDataRegion(r){const o=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(r.getHeight()!==o)throw new I("Dimension of bitMatrix must match the version size");const h=this.version.getDataRegionSizeRows(),d=this.version.getDataRegionSizeColumns(),m=o/h|0,y=l/d|0,A=m*h,S=y*d,R=new $e(S,A);for(let B=0;B<m;++B){const P=B*h;for(let Y=0;Y<y;++Y){const $=Y*d;for(let ee=0;ee<h;++ee){const le=B*(h+2)+1+ee,xe=P+ee;for(let Le=0;Le<d;++Le){const De=Y*(d+2)+1+Le;if(r.get(De,le)){const Re=$+Le;R.set(Re,xe)}}}}}return R}}class Li{constructor(r,o){this.numDataCodewords=r,this.codewords=o}static getDataBlocks(r,o){const l=o.getECBlocks();let h=0;const d=l.getECBlocks();for(let ee of d)h+=ee.getCount();const m=new Array(h);let y=0;for(let ee of d)for(let le=0;le<ee.getCount();le++){const xe=ee.getDataCodewords(),Le=l.getECCodewords()+xe;m[y++]=new Li(xe,new Uint8Array(Le))}const S=m[0].codewords.length-l.getECCodewords(),R=S-1;let B=0;for(let ee=0;ee<R;ee++)for(let le=0;le<y;le++)m[le].codewords[ee]=r[B++];const P=o.getVersionNumber()===24,Y=P?8:y;for(let ee=0;ee<Y;ee++)m[ee].codewords[S-1]=r[B++];const $=m[0].codewords.length;for(let ee=S;ee<$;ee++)for(let le=0;le<y;le++){const xe=P?(le+8)%y:le,Le=P&&xe>7?ee-1:ee;m[xe].codewords[Le]=r[B++]}if(B!==r.length)throw new I;return m}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Ln{constructor(r){this.bytes=r,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(r){if(r<1||r>32||r>this.available())throw new I(""+r);let o=0,l=this.bitOffset,h=this.byteOffset;const d=this.bytes;if(l>0){const m=8-l,y=r<m?r:m,A=m-y,S=255>>8-y<<A;o=(d[h]&S)>>A,r-=y,l+=y,l===8&&(l=0,h++)}if(r>0){for(;r>=8;)o=o<<8|d[h]&255,h++,r-=8;if(r>0){const m=8-r,y=255>>m<<m;o=o<<r|(d[h]&y)>>m,l+=r}}return this.bitOffset=l,this.byteOffset=h,o}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var vt;(function(L){L[L.PAD_ENCODE=0]="PAD_ENCODE",L[L.ASCII_ENCODE=1]="ASCII_ENCODE",L[L.C40_ENCODE=2]="C40_ENCODE",L[L.TEXT_ENCODE=3]="TEXT_ENCODE",L[L.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",L[L.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",L[L.BASE256_ENCODE=6]="BASE256_ENCODE"})(vt||(vt={}));class Bi{static decode(r){const o=new Ln(r),l=new X,h=new X,d=new Array;let m=vt.ASCII_ENCODE;do if(m===vt.ASCII_ENCODE)m=this.decodeAsciiSegment(o,l,h);else{switch(m){case vt.C40_ENCODE:this.decodeC40Segment(o,l);break;case vt.TEXT_ENCODE:this.decodeTextSegment(o,l);break;case vt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(o,l);break;case vt.EDIFACT_ENCODE:this.decodeEdifactSegment(o,l);break;case vt.BASE256_ENCODE:this.decodeBase256Segment(o,l,d);break;default:throw new j}m=vt.ASCII_ENCODE}while(m!==vt.PAD_ENCODE&&o.available()>0);return h.length()>0&&l.append(h.toString()),new Yt(r,l.toString(),d.length===0?null:d,null)}static decodeAsciiSegment(r,o,l){let h=!1;do{let d=r.readBits(8);if(d===0)throw new j;if(d<=128)return h&&(d+=128),o.append(String.fromCharCode(d-1)),vt.ASCII_ENCODE;if(d===129)return vt.PAD_ENCODE;if(d<=229){const m=d-130;m<10&&o.append("0"),o.append(""+m)}else switch(d){case 230:return vt.C40_ENCODE;case 231:return vt.BASE256_ENCODE;case 232:o.append("");break;case 233:case 234:break;case 235:h=!0;break;case 236:o.append("[)>05"),l.insert(0,"");break;case 237:o.append("[)>06"),l.insert(0,"");break;case 238:return vt.ANSIX12_ENCODE;case 239:return vt.TEXT_ENCODE;case 240:return vt.EDIFACT_ENCODE;case 241:break;default:if(d!==254||r.available()!==0)throw new j;break}}while(r.available()>0);return vt.ASCII_ENCODE}static decodeC40Segment(r,o){let l=!1;const h=[];let d=0;do{if(r.available()===8)return;const m=r.readBits(8);if(m===254)return;this.parseTwoBytes(m,r.readBits(8),h);for(let y=0;y<3;y++){const A=h[y];switch(d){case 0:if(A<3)d=A+1;else if(A<this.C40_BASIC_SET_CHARS.length){const S=this.C40_BASIC_SET_CHARS[A];l?(o.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):o.append(S)}else throw new j;break;case 1:l?(o.append(String.fromCharCode(A+128)),l=!1):o.append(String.fromCharCode(A)),d=0;break;case 2:if(A<this.C40_SHIFT2_SET_CHARS.length){const S=this.C40_SHIFT2_SET_CHARS[A];l?(o.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):o.append(S)}else switch(A){case 27:o.append("");break;case 30:l=!0;break;default:throw new j}d=0;break;case 3:l?(o.append(String.fromCharCode(A+224)),l=!1):o.append(String.fromCharCode(A+96)),d=0;break;default:throw new j}}}while(r.available()>0)}static decodeTextSegment(r,o){let l=!1,h=[],d=0;do{if(r.available()===8)return;const m=r.readBits(8);if(m===254)return;this.parseTwoBytes(m,r.readBits(8),h);for(let y=0;y<3;y++){const A=h[y];switch(d){case 0:if(A<3)d=A+1;else if(A<this.TEXT_BASIC_SET_CHARS.length){const S=this.TEXT_BASIC_SET_CHARS[A];l?(o.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):o.append(S)}else throw new j;break;case 1:l?(o.append(String.fromCharCode(A+128)),l=!1):o.append(String.fromCharCode(A)),d=0;break;case 2:if(A<this.TEXT_SHIFT2_SET_CHARS.length){const S=this.TEXT_SHIFT2_SET_CHARS[A];l?(o.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):o.append(S)}else switch(A){case 27:o.append("");break;case 30:l=!0;break;default:throw new j}d=0;break;case 3:if(A<this.TEXT_SHIFT3_SET_CHARS.length){const S=this.TEXT_SHIFT3_SET_CHARS[A];l?(o.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):o.append(S),d=0}else throw new j;break;default:throw new j}}}while(r.available()>0)}static decodeAnsiX12Segment(r,o){const l=[];do{if(r.available()===8)return;const h=r.readBits(8);if(h===254)return;this.parseTwoBytes(h,r.readBits(8),l);for(let d=0;d<3;d++){const m=l[d];switch(m){case 0:o.append("\r");break;case 1:o.append("*");break;case 2:o.append(">");break;case 3:o.append(" ");break;default:if(m<14)o.append(String.fromCharCode(m+44));else if(m<40)o.append(String.fromCharCode(m+51));else throw new j;break}}}while(r.available()>0)}static parseTwoBytes(r,o,l){let h=(r<<8)+o-1,d=Math.floor(h/1600);l[0]=d,h-=d*1600,d=Math.floor(h/40),l[1]=d,l[2]=h-d*40}static decodeEdifactSegment(r,o){do{if(r.available()<=16)return;for(let l=0;l<4;l++){let h=r.readBits(6);if(h===31){const d=8-r.getBitOffset();d!==8&&r.readBits(d);return}(h&32)===0&&(h|=64),o.append(String.fromCharCode(h))}}while(r.available()>0)}static decodeBase256Segment(r,o,l){let h=1+r.getByteOffset();const d=this.unrandomize255State(r.readBits(8),h++);let m;if(d===0?m=r.available()/8|0:d<250?m=d:m=250*(d-249)+this.unrandomize255State(r.readBits(8),h++),m<0)throw new j;const y=new Uint8Array(m);for(let A=0;A<m;A++){if(r.available()<8)throw new j;y[A]=this.unrandomize255State(r.readBits(8),h++)}l.push(y);try{o.append(W.decode(y,J.ISO88591))}catch(A){throw new oi("Platform does not support required encoding: "+A.message)}}static unrandomize255State(r,o){const l=149*o%255+1,h=r-l;return h>=0?h:h+256}}Bi.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Bi.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Bi.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Bi.TEXT_SHIFT2_SET_CHARS=Bi.C40_SHIFT2_SET_CHARS,Bi.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class No{constructor(){this.rsDecoder=new Xi(xt.DATA_MATRIX_FIELD_256)}decode(r){const o=new Ns(r),l=o.getVersion(),h=o.readCodewords(),d=Li.getDataBlocks(h,l);let m=0;for(let S of d)m+=S.getNumDataCodewords();const y=new Uint8Array(m),A=d.length;for(let S=0;S<A;S++){const R=d[S],B=R.getCodewords(),P=R.getNumDataCodewords();this.correctErrors(B,P);for(let Y=0;Y<P;Y++)y[Y*A+S]=B[Y]}return Bi.decode(y)}correctErrors(r,o){const l=new Int32Array(r);try{this.rsDecoder.decode(l,r.length-o)}catch{throw new k}for(let h=0;h<o;h++)r[h]=l[h]}}class rt{constructor(r){this.image=r,this.rectangleDetector=new hn(this.image)}detect(){const r=this.rectangleDetector.detect();let o=this.detectSolid1(r);if(o=this.detectSolid2(o),o[3]=this.correctTopRight(o),!o[3])throw new he;o=this.shiftToModuleCenter(o);const l=o[0],h=o[1],d=o[2],m=o[3];let y=this.transitionsBetween(l,m)+1,A=this.transitionsBetween(d,m)+1;(y&1)===1&&(y+=1),(A&1)===1&&(A+=1),4*y<7*A&&4*A<7*y&&(y=A=Math.max(y,A));let S=rt.sampleGrid(this.image,l,h,d,m,y,A);return new ms(S,[l,h,d,m])}static shiftPoint(r,o,l){let h=(o.getX()-r.getX())/(l+1),d=(o.getY()-r.getY())/(l+1);return new Fe(r.getX()+h,r.getY()+d)}static moveAway(r,o,l){let h=r.getX(),d=r.getY();return h<o?h-=1:h+=1,d<l?d-=1:d+=1,new Fe(h,d)}detectSolid1(r){let o=r[0],l=r[1],h=r[3],d=r[2],m=this.transitionsBetween(o,l),y=this.transitionsBetween(l,h),A=this.transitionsBetween(h,d),S=this.transitionsBetween(d,o),R=m,B=[d,o,l,h];return R>y&&(R=y,B[0]=o,B[1]=l,B[2]=h,B[3]=d),R>A&&(R=A,B[0]=l,B[1]=h,B[2]=d,B[3]=o),R>S&&(B[0]=h,B[1]=d,B[2]=o,B[3]=l),B}detectSolid2(r){let o=r[0],l=r[1],h=r[2],d=r[3],m=this.transitionsBetween(o,d),y=rt.shiftPoint(l,h,(m+1)*4),A=rt.shiftPoint(h,l,(m+1)*4),S=this.transitionsBetween(y,o),R=this.transitionsBetween(A,d);return S<R?(r[0]=o,r[1]=l,r[2]=h,r[3]=d):(r[0]=l,r[1]=h,r[2]=d,r[3]=o),r}correctTopRight(r){let o=r[0],l=r[1],h=r[2],d=r[3],m=this.transitionsBetween(o,d),y=this.transitionsBetween(l,d),A=rt.shiftPoint(o,l,(y+1)*4),S=rt.shiftPoint(h,l,(m+1)*4);m=this.transitionsBetween(A,d),y=this.transitionsBetween(S,d);let R=new Fe(d.getX()+(h.getX()-l.getX())/(m+1),d.getY()+(h.getY()-l.getY())/(m+1)),B=new Fe(d.getX()+(o.getX()-l.getX())/(y+1),d.getY()+(o.getY()-l.getY())/(y+1));if(!this.isValid(R))return this.isValid(B)?B:null;if(!this.isValid(B))return R;let P=this.transitionsBetween(A,R)+this.transitionsBetween(S,R),Y=this.transitionsBetween(A,B)+this.transitionsBetween(S,B);return P>Y?R:B}shiftToModuleCenter(r){let o=r[0],l=r[1],h=r[2],d=r[3],m=this.transitionsBetween(o,d)+1,y=this.transitionsBetween(h,d)+1,A=rt.shiftPoint(o,l,y*4),S=rt.shiftPoint(h,l,m*4);m=this.transitionsBetween(A,d)+1,y=this.transitionsBetween(S,d)+1,(m&1)===1&&(m+=1),(y&1)===1&&(y+=1);let R=(o.getX()+l.getX()+h.getX()+d.getX())/4,B=(o.getY()+l.getY()+h.getY()+d.getY())/4;o=rt.moveAway(o,R,B),l=rt.moveAway(l,R,B),h=rt.moveAway(h,R,B),d=rt.moveAway(d,R,B);let P,Y;return A=rt.shiftPoint(o,l,y*4),A=rt.shiftPoint(A,d,m*4),P=rt.shiftPoint(l,o,y*4),P=rt.shiftPoint(P,h,m*4),S=rt.shiftPoint(h,d,y*4),S=rt.shiftPoint(S,l,m*4),Y=rt.shiftPoint(d,h,y*4),Y=rt.shiftPoint(Y,o,m*4),[A,P,S,Y]}isValid(r){return r.getX()>=0&&r.getX()<this.image.getWidth()&&r.getY()>0&&r.getY()<this.image.getHeight()}static sampleGrid(r,o,l,h,d,m,y){return pi.getInstance().sampleGrid(r,m,y,.5,.5,m-.5,.5,m-.5,y-.5,.5,y-.5,o.getX(),o.getY(),d.getX(),d.getY(),h.getX(),h.getY(),l.getX(),l.getY())}transitionsBetween(r,o){let l=Math.trunc(r.getX()),h=Math.trunc(r.getY()),d=Math.trunc(o.getX()),m=Math.trunc(o.getY()),y=Math.abs(m-h)>Math.abs(d-l);if(y){let ee=l;l=h,h=ee,ee=d,d=m,m=ee}let A=Math.abs(d-l),S=Math.abs(m-h),R=-A/2,B=h<m?1:-1,P=l<d?1:-1,Y=0,$=this.image.get(y?h:l,y?l:h);for(let ee=l,le=h;ee!==d;ee+=P){let xe=this.image.get(y?le:ee,y?ee:le);if(xe!==$&&(Y++,$=xe),R+=S,R>0){if(le===m)break;le+=B,R-=A}}return Y}}class Wi{constructor(){this.decoder=new No}decode(r,o=null){let l,h;if(o!=null&&o.has(ke.PURE_BARCODE)){const S=Wi.extractPureBits(r.getBlackMatrix());l=this.decoder.decode(S),h=Wi.NO_POINTS}else{const S=new rt(r.getBlackMatrix()).detect();l=this.decoder.decode(S.getBits()),h=S.getPoints()}const d=l.getRawBytes(),m=new Ue(l.getText(),d,8*d.length,h,Me.DATA_MATRIX,Q.currentTimeMillis()),y=l.getByteSegments();y!=null&&m.putMetadata(Et.BYTE_SEGMENTS,y);const A=l.getECLevel();return A!=null&&m.putMetadata(Et.ERROR_CORRECTION_LEVEL,A),m}reset(){}static extractPureBits(r){const o=r.getTopLeftOnBit(),l=r.getBottomRightOnBit();if(o==null||l==null)throw new he;const h=this.moduleSize(o,r);let d=o[1];const m=l[1];let y=o[0];const S=(l[0]-y+1)/h,R=(m-d+1)/h;if(S<=0||R<=0)throw new he;const B=h/2;d+=B,y+=B;const P=new $e(S,R);for(let Y=0;Y<R;Y++){const $=d+Y*h;for(let ee=0;ee<S;ee++)r.get(y+ee*h,$)&&P.set(ee,Y)}return P}static moduleSize(r,o){const l=o.getWidth();let h=r[0];const d=r[1];for(;h<l&&o.get(h,d);)h++;if(h===l)throw new he;const m=h-r[0];if(m===0)throw new he;return m}}Wi.NO_POINTS=[];class Wr extends Be{constructor(r=500){super(new Wi,r)}}var pr;(function(L){L[L.L=0]="L",L[L.M=1]="M",L[L.Q=2]="Q",L[L.H=3]="H"})(pr||(pr={}));class At{constructor(r,o,l){this.value=r,this.stringValue=o,this.bits=l,At.FOR_BITS.set(l,this),At.FOR_VALUE.set(r,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(r){switch(r){case"L":return At.L;case"M":return At.M;case"Q":return At.Q;case"H":return At.H;default:throw new C(r+"not available")}}toString(){return this.stringValue}equals(r){if(!(r instanceof At))return!1;const o=r;return this.value===o.value}static forBits(r){if(r<0||r>=At.FOR_BITS.size)throw new I;return At.FOR_BITS.get(r)}}At.FOR_BITS=new Map,At.FOR_VALUE=new Map,At.L=new At(pr.L,"L",1),At.M=new At(pr.M,"M",0),At.Q=new At(pr.Q,"Q",3),At.H=new At(pr.H,"H",2);class jn{constructor(r){this.errorCorrectionLevel=At.forBits(r>>3&3),this.dataMask=r&7}static numBitsDiffering(r,o){return K.bitCount(r^o)}static decodeFormatInformation(r,o){const l=jn.doDecodeFormatInformation(r,o);return l!==null?l:jn.doDecodeFormatInformation(r^jn.FORMAT_INFO_MASK_QR,o^jn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(r,o){let l=Number.MAX_SAFE_INTEGER,h=0;for(const d of jn.FORMAT_INFO_DECODE_LOOKUP){const m=d[0];if(m===r||m===o)return new jn(d[1]);let y=jn.numBitsDiffering(r,m);y<l&&(h=d[1],l=y),r!==o&&(y=jn.numBitsDiffering(o,m),y<l&&(h=d[1],l=y))}return l<=3?new jn(h):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(r){if(!(r instanceof jn))return!1;const o=r;return this.errorCorrectionLevel===o.errorCorrectionLevel&&this.dataMask===o.dataMask}}jn.FORMAT_INFO_MASK_QR=21522,jn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ce{constructor(r,...o){this.ecCodewordsPerBlock=r,this.ecBlocks=o}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let r=0;const o=this.ecBlocks;for(const l of o)r+=l.getCount();return r}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class H{constructor(r,o){this.count=r,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ye{constructor(r,o,...l){this.versionNumber=r,this.alignmentPatternCenters=o,this.ecBlocks=l;let h=0;const d=l[0].getECCodewordsPerBlock(),m=l[0].getECBlocks();for(const y of m)h+=y.getCount()*(y.getDataCodewords()+d);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(r){return this.ecBlocks[r.getValue()]}static getProvisionalVersionForDimension(r){if(r%4!==1)throw new j;try{return this.getVersionForNumber((r-17)/4)}catch{throw new j}}static getVersionForNumber(r){if(r<1||r>40)throw new I;return Ye.VERSIONS[r-1]}static decodeVersionInformation(r){let o=Number.MAX_SAFE_INTEGER,l=0;for(let h=0;h<Ye.VERSION_DECODE_INFO.length;h++){const d=Ye.VERSION_DECODE_INFO[h];if(d===r)return Ye.getVersionForNumber(h+7);const m=jn.numBitsDiffering(r,d);m<o&&(l=h+7,o=m)}return o<=3?Ye.getVersionForNumber(l):null}buildFunctionPattern(){const r=this.getDimensionForVersion(),o=new $e(r);o.setRegion(0,0,9,9),o.setRegion(r-8,0,8,9),o.setRegion(0,r-8,9,8);const l=this.alignmentPatternCenters.length;for(let h=0;h<l;h++){const d=this.alignmentPatternCenters[h]-2;for(let m=0;m<l;m++)h===0&&(m===0||m===l-1)||h===l-1&&m===0||o.setRegion(this.alignmentPatternCenters[m]-2,d,5,5)}return o.setRegion(6,9,1,r-17),o.setRegion(9,6,r-17,1),this.versionNumber>6&&(o.setRegion(r-11,0,3,6),o.setRegion(0,r-11,6,3)),o}toString(){return""+this.versionNumber}}Ye.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ye.VERSIONS=[new Ye(1,new Int32Array(0),new ce(7,new H(1,19)),new ce(10,new H(1,16)),new ce(13,new H(1,13)),new ce(17,new H(1,9))),new Ye(2,Int32Array.from([6,18]),new ce(10,new H(1,34)),new ce(16,new H(1,28)),new ce(22,new H(1,22)),new ce(28,new H(1,16))),new Ye(3,Int32Array.from([6,22]),new ce(15,new H(1,55)),new ce(26,new H(1,44)),new ce(18,new H(2,17)),new ce(22,new H(2,13))),new Ye(4,Int32Array.from([6,26]),new ce(20,new H(1,80)),new ce(18,new H(2,32)),new ce(26,new H(2,24)),new ce(16,new H(4,9))),new Ye(5,Int32Array.from([6,30]),new ce(26,new H(1,108)),new ce(24,new H(2,43)),new ce(18,new H(2,15),new H(2,16)),new ce(22,new H(2,11),new H(2,12))),new Ye(6,Int32Array.from([6,34]),new ce(18,new H(2,68)),new ce(16,new H(4,27)),new ce(24,new H(4,19)),new ce(28,new H(4,15))),new Ye(7,Int32Array.from([6,22,38]),new ce(20,new H(2,78)),new ce(18,new H(4,31)),new ce(18,new H(2,14),new H(4,15)),new ce(26,new H(4,13),new H(1,14))),new Ye(8,Int32Array.from([6,24,42]),new ce(24,new H(2,97)),new ce(22,new H(2,38),new H(2,39)),new ce(22,new H(4,18),new H(2,19)),new ce(26,new H(4,14),new H(2,15))),new Ye(9,Int32Array.from([6,26,46]),new ce(30,new H(2,116)),new ce(22,new H(3,36),new H(2,37)),new ce(20,new H(4,16),new H(4,17)),new ce(24,new H(4,12),new H(4,13))),new Ye(10,Int32Array.from([6,28,50]),new ce(18,new H(2,68),new H(2,69)),new ce(26,new H(4,43),new H(1,44)),new ce(24,new H(6,19),new H(2,20)),new ce(28,new H(6,15),new H(2,16))),new Ye(11,Int32Array.from([6,30,54]),new ce(20,new H(4,81)),new ce(30,new H(1,50),new H(4,51)),new ce(28,new H(4,22),new H(4,23)),new ce(24,new H(3,12),new H(8,13))),new Ye(12,Int32Array.from([6,32,58]),new ce(24,new H(2,92),new H(2,93)),new ce(22,new H(6,36),new H(2,37)),new ce(26,new H(4,20),new H(6,21)),new ce(28,new H(7,14),new H(4,15))),new Ye(13,Int32Array.from([6,34,62]),new ce(26,new H(4,107)),new ce(22,new H(8,37),new H(1,38)),new ce(24,new H(8,20),new H(4,21)),new ce(22,new H(12,11),new H(4,12))),new Ye(14,Int32Array.from([6,26,46,66]),new ce(30,new H(3,115),new H(1,116)),new ce(24,new H(4,40),new H(5,41)),new ce(20,new H(11,16),new H(5,17)),new ce(24,new H(11,12),new H(5,13))),new Ye(15,Int32Array.from([6,26,48,70]),new ce(22,new H(5,87),new H(1,88)),new ce(24,new H(5,41),new H(5,42)),new ce(30,new H(5,24),new H(7,25)),new ce(24,new H(11,12),new H(7,13))),new Ye(16,Int32Array.from([6,26,50,74]),new ce(24,new H(5,98),new H(1,99)),new ce(28,new H(7,45),new H(3,46)),new ce(24,new H(15,19),new H(2,20)),new ce(30,new H(3,15),new H(13,16))),new Ye(17,Int32Array.from([6,30,54,78]),new ce(28,new H(1,107),new H(5,108)),new ce(28,new H(10,46),new H(1,47)),new ce(28,new H(1,22),new H(15,23)),new ce(28,new H(2,14),new H(17,15))),new Ye(18,Int32Array.from([6,30,56,82]),new ce(30,new H(5,120),new H(1,121)),new ce(26,new H(9,43),new H(4,44)),new ce(28,new H(17,22),new H(1,23)),new ce(28,new H(2,14),new H(19,15))),new Ye(19,Int32Array.from([6,30,58,86]),new ce(28,new H(3,113),new H(4,114)),new ce(26,new H(3,44),new H(11,45)),new ce(26,new H(17,21),new H(4,22)),new ce(26,new H(9,13),new H(16,14))),new Ye(20,Int32Array.from([6,34,62,90]),new ce(28,new H(3,107),new H(5,108)),new ce(26,new H(3,41),new H(13,42)),new ce(30,new H(15,24),new H(5,25)),new ce(28,new H(15,15),new H(10,16))),new Ye(21,Int32Array.from([6,28,50,72,94]),new ce(28,new H(4,116),new H(4,117)),new ce(26,new H(17,42)),new ce(28,new H(17,22),new H(6,23)),new ce(30,new H(19,16),new H(6,17))),new Ye(22,Int32Array.from([6,26,50,74,98]),new ce(28,new H(2,111),new H(7,112)),new ce(28,new H(17,46)),new ce(30,new H(7,24),new H(16,25)),new ce(24,new H(34,13))),new Ye(23,Int32Array.from([6,30,54,78,102]),new ce(30,new H(4,121),new H(5,122)),new ce(28,new H(4,47),new H(14,48)),new ce(30,new H(11,24),new H(14,25)),new ce(30,new H(16,15),new H(14,16))),new Ye(24,Int32Array.from([6,28,54,80,106]),new ce(30,new H(6,117),new H(4,118)),new ce(28,new H(6,45),new H(14,46)),new ce(30,new H(11,24),new H(16,25)),new ce(30,new H(30,16),new H(2,17))),new Ye(25,Int32Array.from([6,32,58,84,110]),new ce(26,new H(8,106),new H(4,107)),new ce(28,new H(8,47),new H(13,48)),new ce(30,new H(7,24),new H(22,25)),new ce(30,new H(22,15),new H(13,16))),new Ye(26,Int32Array.from([6,30,58,86,114]),new ce(28,new H(10,114),new H(2,115)),new ce(28,new H(19,46),new H(4,47)),new ce(28,new H(28,22),new H(6,23)),new ce(30,new H(33,16),new H(4,17))),new Ye(27,Int32Array.from([6,34,62,90,118]),new ce(30,new H(8,122),new H(4,123)),new ce(28,new H(22,45),new H(3,46)),new ce(30,new H(8,23),new H(26,24)),new ce(30,new H(12,15),new H(28,16))),new Ye(28,Int32Array.from([6,26,50,74,98,122]),new ce(30,new H(3,117),new H(10,118)),new ce(28,new H(3,45),new H(23,46)),new ce(30,new H(4,24),new H(31,25)),new ce(30,new H(11,15),new H(31,16))),new Ye(29,Int32Array.from([6,30,54,78,102,126]),new ce(30,new H(7,116),new H(7,117)),new ce(28,new H(21,45),new H(7,46)),new ce(30,new H(1,23),new H(37,24)),new ce(30,new H(19,15),new H(26,16))),new Ye(30,Int32Array.from([6,26,52,78,104,130]),new ce(30,new H(5,115),new H(10,116)),new ce(28,new H(19,47),new H(10,48)),new ce(30,new H(15,24),new H(25,25)),new ce(30,new H(23,15),new H(25,16))),new Ye(31,Int32Array.from([6,30,56,82,108,134]),new ce(30,new H(13,115),new H(3,116)),new ce(28,new H(2,46),new H(29,47)),new ce(30,new H(42,24),new H(1,25)),new ce(30,new H(23,15),new H(28,16))),new Ye(32,Int32Array.from([6,34,60,86,112,138]),new ce(30,new H(17,115)),new ce(28,new H(10,46),new H(23,47)),new ce(30,new H(10,24),new H(35,25)),new ce(30,new H(19,15),new H(35,16))),new Ye(33,Int32Array.from([6,30,58,86,114,142]),new ce(30,new H(17,115),new H(1,116)),new ce(28,new H(14,46),new H(21,47)),new ce(30,new H(29,24),new H(19,25)),new ce(30,new H(11,15),new H(46,16))),new Ye(34,Int32Array.from([6,34,62,90,118,146]),new ce(30,new H(13,115),new H(6,116)),new ce(28,new H(14,46),new H(23,47)),new ce(30,new H(44,24),new H(7,25)),new ce(30,new H(59,16),new H(1,17))),new Ye(35,Int32Array.from([6,30,54,78,102,126,150]),new ce(30,new H(12,121),new H(7,122)),new ce(28,new H(12,47),new H(26,48)),new ce(30,new H(39,24),new H(14,25)),new ce(30,new H(22,15),new H(41,16))),new Ye(36,Int32Array.from([6,24,50,76,102,128,154]),new ce(30,new H(6,121),new H(14,122)),new ce(28,new H(6,47),new H(34,48)),new ce(30,new H(46,24),new H(10,25)),new ce(30,new H(2,15),new H(64,16))),new Ye(37,Int32Array.from([6,28,54,80,106,132,158]),new ce(30,new H(17,122),new H(4,123)),new ce(28,new H(29,46),new H(14,47)),new ce(30,new H(49,24),new H(10,25)),new ce(30,new H(24,15),new H(46,16))),new Ye(38,Int32Array.from([6,32,58,84,110,136,162]),new ce(30,new H(4,122),new H(18,123)),new ce(28,new H(13,46),new H(32,47)),new ce(30,new H(48,24),new H(14,25)),new ce(30,new H(42,15),new H(32,16))),new Ye(39,Int32Array.from([6,26,54,82,110,138,166]),new ce(30,new H(20,117),new H(4,118)),new ce(28,new H(40,47),new H(7,48)),new ce(30,new H(43,24),new H(22,25)),new ce(30,new H(10,15),new H(67,16))),new Ye(40,Int32Array.from([6,30,58,86,114,142,170]),new ce(30,new H(19,118),new H(6,119)),new ce(28,new H(18,47),new H(31,48)),new ce(30,new H(34,24),new H(34,25)),new ce(30,new H(20,15),new H(61,16)))];var Fn;(function(L){L[L.DATA_MASK_000=0]="DATA_MASK_000",L[L.DATA_MASK_001=1]="DATA_MASK_001",L[L.DATA_MASK_010=2]="DATA_MASK_010",L[L.DATA_MASK_011=3]="DATA_MASK_011",L[L.DATA_MASK_100=4]="DATA_MASK_100",L[L.DATA_MASK_101=5]="DATA_MASK_101",L[L.DATA_MASK_110=6]="DATA_MASK_110",L[L.DATA_MASK_111=7]="DATA_MASK_111"})(Fn||(Fn={}));class ti{constructor(r,o){this.value=r,this.isMasked=o}unmaskBitMatrix(r,o){for(let l=0;l<o;l++)for(let h=0;h<o;h++)this.isMasked(l,h)&&r.flip(h,l)}}ti.values=new Map([[Fn.DATA_MASK_000,new ti(Fn.DATA_MASK_000,(L,r)=>(L+r&1)===0)],[Fn.DATA_MASK_001,new ti(Fn.DATA_MASK_001,(L,r)=>(L&1)===0)],[Fn.DATA_MASK_010,new ti(Fn.DATA_MASK_010,(L,r)=>r%3===0)],[Fn.DATA_MASK_011,new ti(Fn.DATA_MASK_011,(L,r)=>(L+r)%3===0)],[Fn.DATA_MASK_100,new ti(Fn.DATA_MASK_100,(L,r)=>(Math.floor(L/2)+Math.floor(r/3)&1)===0)],[Fn.DATA_MASK_101,new ti(Fn.DATA_MASK_101,(L,r)=>L*r%6===0)],[Fn.DATA_MASK_110,new ti(Fn.DATA_MASK_110,(L,r)=>L*r%6<3)],[Fn.DATA_MASK_111,new ti(Fn.DATA_MASK_111,(L,r)=>(L+r+L*r%3&1)===0)]]);class Ki{constructor(r){const o=r.getHeight();if(o<21||(o&3)!==1)throw new j;this.bitMatrix=r}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let r=0;for(let d=0;d<6;d++)r=this.copyBit(d,8,r);r=this.copyBit(7,8,r),r=this.copyBit(8,8,r),r=this.copyBit(8,7,r);for(let d=5;d>=0;d--)r=this.copyBit(8,d,r);const o=this.bitMatrix.getHeight();let l=0;const h=o-7;for(let d=o-1;d>=h;d--)l=this.copyBit(8,d,l);for(let d=o-8;d<o;d++)l=this.copyBit(d,8,l);if(this.parsedFormatInfo=jn.decodeFormatInformation(r,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new j}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const r=this.bitMatrix.getHeight(),o=Math.floor((r-17)/4);if(o<=6)return Ye.getVersionForNumber(o);let l=0;const h=r-11;for(let m=5;m>=0;m--)for(let y=r-9;y>=h;y--)l=this.copyBit(y,m,l);let d=Ye.decodeVersionInformation(l);if(d!==null&&d.getDimensionForVersion()===r)return this.parsedVersion=d,d;l=0;for(let m=5;m>=0;m--)for(let y=r-9;y>=h;y--)l=this.copyBit(m,y,l);if(d=Ye.decodeVersionInformation(l),d!==null&&d.getDimensionForVersion()===r)return this.parsedVersion=d,d;throw new j}copyBit(r,o,l){return(this.isMirror?this.bitMatrix.get(o,r):this.bitMatrix.get(r,o))?l<<1|1:l<<1}readCodewords(){const r=this.readFormatInformation(),o=this.readVersion(),l=ti.values.get(r.getDataMask()),h=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,h);const d=o.buildFunctionPattern();let m=!0;const y=new Uint8Array(o.getTotalCodewords());let A=0,S=0,R=0;for(let B=h-1;B>0;B-=2){B===6&&B--;for(let P=0;P<h;P++){const Y=m?h-1-P:P;for(let $=0;$<2;$++)d.get(B-$,Y)||(R++,S<<=1,this.bitMatrix.get(B-$,Y)&&(S|=1),R===8&&(y[A++]=S,R=0,S=0))}m=!m}if(A!==o.getTotalCodewords())throw new j;return y}remask(){if(this.parsedFormatInfo===null)return;const r=ti.values[this.parsedFormatInfo.getDataMask()],o=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,o)}setMirror(r){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=r}mirror(){const r=this.bitMatrix;for(let o=0,l=r.getWidth();o<l;o++)for(let h=o+1,d=r.getHeight();h<d;h++)r.get(o,h)!==r.get(h,o)&&(r.flip(h,o),r.flip(o,h))}}class Ma{constructor(r,o){this.numDataCodewords=r,this.codewords=o}static getDataBlocks(r,o,l){if(r.length!==o.getTotalCodewords())throw new I;const h=o.getECBlocksForLevel(l);let d=0;const m=h.getECBlocks();for(const $ of m)d+=$.getCount();const y=new Array(d);let A=0;for(const $ of m)for(let ee=0;ee<$.getCount();ee++){const le=$.getDataCodewords(),xe=h.getECCodewordsPerBlock()+le;y[A++]=new Ma(le,new Uint8Array(xe))}const S=y[0].codewords.length;let R=y.length-1;for(;R>=0&&y[R].codewords.length!==S;)R--;R++;const B=S-h.getECCodewordsPerBlock();let P=0;for(let $=0;$<B;$++)for(let ee=0;ee<A;ee++)y[ee].codewords[$]=r[P++];for(let $=R;$<A;$++)y[$].codewords[B]=r[P++];const Y=y[0].codewords.length;for(let $=B;$<Y;$++)for(let ee=0;ee<A;ee++){const le=ee<R?$:$+1;y[ee].codewords[le]=r[P++]}return y}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var bi;(function(L){L[L.TERMINATOR=0]="TERMINATOR",L[L.NUMERIC=1]="NUMERIC",L[L.ALPHANUMERIC=2]="ALPHANUMERIC",L[L.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",L[L.BYTE=4]="BYTE",L[L.ECI=5]="ECI",L[L.KANJI=6]="KANJI",L[L.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",L[L.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",L[L.HANZI=9]="HANZI"})(bi||(bi={}));class Ke{constructor(r,o,l,h){this.value=r,this.stringValue=o,this.characterCountBitsForVersions=l,this.bits=h,Ke.FOR_BITS.set(h,this),Ke.FOR_VALUE.set(r,this)}static forBits(r){const o=Ke.FOR_BITS.get(r);if(o===void 0)throw new I;return o}getCharacterCountBits(r){const o=r.getVersionNumber();let l;return o<=9?l=0:o<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(r){if(!(r instanceof Ke))return!1;const o=r;return this.value===o.value}toString(){return this.stringValue}}Ke.FOR_BITS=new Map,Ke.FOR_VALUE=new Map,Ke.TERMINATOR=new Ke(bi.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ke.NUMERIC=new Ke(bi.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ke.ALPHANUMERIC=new Ke(bi.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ke.STRUCTURED_APPEND=new Ke(bi.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ke.BYTE=new Ke(bi.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ke.ECI=new Ke(bi.ECI,"ECI",Int32Array.from([0,0,0]),7),Ke.KANJI=new Ke(bi.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ke.FNC1_FIRST_POSITION=new Ke(bi.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ke.FNC1_SECOND_POSITION=new Ke(bi.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ke.HANZI=new Ke(bi.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class on{static decode(r,o,l,h){const d=new Ln(r);let m=new X;const y=new Array;let A=-1,S=-1;try{let R=null,B=!1,P;do{if(d.available()<4)P=Ke.TERMINATOR;else{const Y=d.readBits(4);P=Ke.forBits(Y)}switch(P){case Ke.TERMINATOR:break;case Ke.FNC1_FIRST_POSITION:case Ke.FNC1_SECOND_POSITION:B=!0;break;case Ke.STRUCTURED_APPEND:if(d.available()<16)throw new j;A=d.readBits(8),S=d.readBits(8);break;case Ke.ECI:const Y=on.parseECIValue(d);if(R=V.getCharacterSetECIByValue(Y),R===null)throw new j;break;case Ke.HANZI:const $=d.readBits(4),ee=d.readBits(P.getCharacterCountBits(o));$===on.GB2312_SUBSET&&on.decodeHanziSegment(d,m,ee);break;default:const le=d.readBits(P.getCharacterCountBits(o));switch(P){case Ke.NUMERIC:on.decodeNumericSegment(d,m,le);break;case Ke.ALPHANUMERIC:on.decodeAlphanumericSegment(d,m,le,B);break;case Ke.BYTE:on.decodeByteSegment(d,m,le,R,y,h);break;case Ke.KANJI:on.decodeKanjiSegment(d,m,le);break;default:throw new j}break}}while(P!==Ke.TERMINATOR)}catch{throw new j}return new Yt(r,m.toString(),y.length===0?null:y,l===null?null:l.toString(),A,S)}static decodeHanziSegment(r,o,l){if(l*13>r.available())throw new j;const h=new Uint8Array(2*l);let d=0;for(;l>0;){const m=r.readBits(13);let y=m/96<<8&4294967295|m%96;y<959?y+=41377:y+=42657,h[d]=y>>8&255,h[d+1]=y&255,d+=2,l--}try{o.append(W.decode(h,J.GB2312))}catch(m){throw new j(m)}}static decodeKanjiSegment(r,o,l){if(l*13>r.available())throw new j;const h=new Uint8Array(2*l);let d=0;for(;l>0;){const m=r.readBits(13);let y=m/192<<8&4294967295|m%192;y<7936?y+=33088:y+=49472,h[d]=y>>8,h[d+1]=y,d+=2,l--}try{o.append(W.decode(h,J.SHIFT_JIS))}catch(m){throw new j(m)}}static decodeByteSegment(r,o,l,h,d,m){if(8*l>r.available())throw new j;const y=new Uint8Array(l);for(let S=0;S<l;S++)y[S]=r.readBits(8);let A;h===null?A=J.guessEncoding(y,m):A=h.getName();try{o.append(W.decode(y,A))}catch(S){throw new j(S)}d.push(y)}static toAlphaNumericChar(r){if(r>=on.ALPHANUMERIC_CHARS.length)throw new j;return on.ALPHANUMERIC_CHARS[r]}static decodeAlphanumericSegment(r,o,l,h){const d=o.length();for(;l>1;){if(r.available()<11)throw new j;const m=r.readBits(11);o.append(on.toAlphaNumericChar(Math.floor(m/45))),o.append(on.toAlphaNumericChar(m%45)),l-=2}if(l===1){if(r.available()<6)throw new j;o.append(on.toAlphaNumericChar(r.readBits(6)))}if(h)for(let m=d;m<o.length();m++)o.charAt(m)==="%"&&(m<o.length()-1&&o.charAt(m+1)==="%"?o.deleteCharAt(m+1):o.setCharAt(m,""))}static decodeNumericSegment(r,o,l){for(;l>=3;){if(r.available()<10)throw new j;const h=r.readBits(10);if(h>=1e3)throw new j;o.append(on.toAlphaNumericChar(Math.floor(h/100))),o.append(on.toAlphaNumericChar(Math.floor(h/10)%10)),o.append(on.toAlphaNumericChar(h%10)),l-=3}if(l===2){if(r.available()<7)throw new j;const h=r.readBits(7);if(h>=100)throw new j;o.append(on.toAlphaNumericChar(Math.floor(h/10))),o.append(on.toAlphaNumericChar(h%10))}else if(l===1){if(r.available()<4)throw new j;const h=r.readBits(4);if(h>=10)throw new j;o.append(on.toAlphaNumericChar(h))}}static parseECIValue(r){const o=r.readBits(8);if((o&128)===0)return o&127;if((o&192)===128){const l=r.readBits(8);return(o&63)<<8&4294967295|l}if((o&224)===192){const l=r.readBits(16);return(o&31)<<16&4294967295|l}throw new j}}on.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",on.GB2312_SUBSET=1;class Ro{constructor(r){this.mirrored=r}isMirrored(){return this.mirrored}applyMirroredCorrection(r){if(!this.mirrored||r===null||r.length<3)return;const o=r[0];r[0]=r[2],r[2]=o}}class Rs{constructor(){this.rsDecoder=new Xi(xt.QR_CODE_FIELD_256)}decodeBooleanArray(r,o){return this.decodeBitMatrix($e.parseFromBooleanArray(r),o)}decodeBitMatrix(r,o){const l=new Ki(r);let h=null;try{return this.decodeBitMatrixParser(l,o)}catch(d){h=d}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const d=this.decodeBitMatrixParser(l,o);return d.setOther(new Ro(!0)),d}catch(d){throw h!==null?h:d}}decodeBitMatrixParser(r,o){const l=r.readVersion(),h=r.readFormatInformation().getErrorCorrectionLevel(),d=r.readCodewords(),m=Ma.getDataBlocks(d,l,h);let y=0;for(const R of m)y+=R.getNumDataCodewords();const A=new Uint8Array(y);let S=0;for(const R of m){const B=R.getCodewords(),P=R.getNumDataCodewords();this.correctErrors(B,P);for(let Y=0;Y<P;Y++)A[S++]=B[Y]}return on.decode(A,l,h,o)}correctErrors(r,o){const l=new Int32Array(r);try{this.rsDecoder.decode(l,r.length-o)}catch{throw new k}for(let h=0;h<o;h++)r[h]=l[h]}}class Os extends Fe{constructor(r,o,l){super(r,o),this.estimatedModuleSize=l}aboutEquals(r,o,l){if(Math.abs(o-this.getY())<=r&&Math.abs(l-this.getX())<=r){const h=Math.abs(r-this.estimatedModuleSize);return h<=1||h<=this.estimatedModuleSize}return!1}combineEstimate(r,o,l){const h=(this.getX()+o)/2,d=(this.getY()+r)/2,m=(this.estimatedModuleSize+l)/2;return new Os(h,d,m)}}class Zi{constructor(r,o,l,h,d,m,y){this.image=r,this.startX=o,this.startY=l,this.width=h,this.height=d,this.moduleSize=m,this.resultPointCallback=y,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const r=this.startX,o=this.height,l=this.width,h=r+l,d=this.startY+o/2,m=new Int32Array(3),y=this.image;for(let A=0;A<o;A++){const S=d+((A&1)===0?Math.floor((A+1)/2):-Math.floor((A+1)/2));m[0]=0,m[1]=0,m[2]=0;let R=r;for(;R<h&&!y.get(R,S);)R++;let B=0;for(;R<h;){if(y.get(R,S))if(B===1)m[1]++;else if(B===2){if(this.foundPatternCross(m)){const P=this.handlePossibleCenter(m,S,R);if(P!==null)return P}m[0]=m[2],m[1]=1,m[2]=0,B=1}else m[++B]++;else B===1&&B++,m[B]++;R++}if(this.foundPatternCross(m)){const P=this.handlePossibleCenter(m,S,h);if(P!==null)return P}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new he}static centerFromEnd(r,o){return o-r[2]-r[1]/2}foundPatternCross(r){const o=this.moduleSize,l=o/2;for(let h=0;h<3;h++)if(Math.abs(o-r[h])>=l)return!1;return!0}crossCheckVertical(r,o,l,h){const d=this.image,m=d.getHeight(),y=this.crossCheckStateCount;y[0]=0,y[1]=0,y[2]=0;let A=r;for(;A>=0&&d.get(o,A)&&y[1]<=l;)y[1]++,A--;if(A<0||y[1]>l)return NaN;for(;A>=0&&!d.get(o,A)&&y[0]<=l;)y[0]++,A--;if(y[0]>l)return NaN;for(A=r+1;A<m&&d.get(o,A)&&y[1]<=l;)y[1]++,A++;if(A===m||y[1]>l)return NaN;for(;A<m&&!d.get(o,A)&&y[2]<=l;)y[2]++,A++;if(y[2]>l)return NaN;const S=y[0]+y[1]+y[2];return 5*Math.abs(S-h)>=2*h?NaN:this.foundPatternCross(y)?Zi.centerFromEnd(y,A):NaN}handlePossibleCenter(r,o,l){const h=r[0]+r[1]+r[2],d=Zi.centerFromEnd(r,l),m=this.crossCheckVertical(o,d,2*r[1],h);if(!isNaN(m)){const y=(r[0]+r[1]+r[2])/3;for(const S of this.possibleCenters)if(S.aboutEquals(y,m,d))return S.combineEstimate(m,d,y);const A=new Os(d,m,y);this.possibleCenters.push(A),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(A)}return null}}class Ks extends Fe{constructor(r,o,l,h){super(r,o),this.estimatedModuleSize=l,this.count=h,h===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(r,o,l){if(Math.abs(o-this.getY())<=r&&Math.abs(l-this.getX())<=r){const h=Math.abs(r-this.estimatedModuleSize);return h<=1||h<=this.estimatedModuleSize}return!1}combineEstimate(r,o,l){const h=this.count+1,d=(this.count*this.getX()+o)/h,m=(this.count*this.getY()+r)/h,y=(this.count*this.estimatedModuleSize+l)/h;return new Ks(d,m,y,h)}}class xr{constructor(r){this.bottomLeft=r[0],this.topLeft=r[1],this.topRight=r[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class wn{constructor(r,o){this.image=r,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=o}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(r){const o=r!=null&&r.get(ke.TRY_HARDER)!==void 0,l=r!=null&&r.get(ke.PURE_BARCODE)!==void 0,h=this.image,d=h.getHeight(),m=h.getWidth();let y=Math.floor(3*d/(4*wn.MAX_MODULES));(y<wn.MIN_SKIP||o)&&(y=wn.MIN_SKIP);let A=!1;const S=new Int32Array(5);for(let B=y-1;B<d&&!A;B+=y){S[0]=0,S[1]=0,S[2]=0,S[3]=0,S[4]=0;let P=0;for(let Y=0;Y<m;Y++)if(h.get(Y,B))(P&1)===1&&P++,S[P]++;else if((P&1)===0)if(P===4)if(wn.foundPatternCross(S)){if(this.handlePossibleCenter(S,B,Y,l)===!0)if(y=2,this.hasSkipped===!0)A=this.haveMultiplyConfirmedCenters();else{const ee=this.findRowSkip();ee>S[2]&&(B+=ee-S[2]-y,Y=m-1)}else{S[0]=S[2],S[1]=S[3],S[2]=S[4],S[3]=1,S[4]=0,P=3;continue}P=0,S[0]=0,S[1]=0,S[2]=0,S[3]=0,S[4]=0}else S[0]=S[2],S[1]=S[3],S[2]=S[4],S[3]=1,S[4]=0,P=3;else S[++P]++;else S[P]++;wn.foundPatternCross(S)&&this.handlePossibleCenter(S,B,m,l)===!0&&(y=S[0],this.hasSkipped&&(A=this.haveMultiplyConfirmedCenters()))}const R=this.selectBestPatterns();return Fe.orderBestPatterns(R),new xr(R)}static centerFromEnd(r,o){return o-r[4]-r[3]-r[2]/2}static foundPatternCross(r){let o=0;for(let d=0;d<5;d++){const m=r[d];if(m===0)return!1;o+=m}if(o<7)return!1;const l=o/7,h=l/2;return Math.abs(l-r[0])<h&&Math.abs(l-r[1])<h&&Math.abs(3*l-r[2])<3*h&&Math.abs(l-r[3])<h&&Math.abs(l-r[4])<h}getCrossCheckStateCount(){const r=this.crossCheckStateCount;return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r}crossCheckDiagonal(r,o,l,h){const d=this.getCrossCheckStateCount();let m=0;const y=this.image;for(;r>=m&&o>=m&&y.get(o-m,r-m);)d[2]++,m++;if(r<m||o<m)return!1;for(;r>=m&&o>=m&&!y.get(o-m,r-m)&&d[1]<=l;)d[1]++,m++;if(r<m||o<m||d[1]>l)return!1;for(;r>=m&&o>=m&&y.get(o-m,r-m)&&d[0]<=l;)d[0]++,m++;if(d[0]>l)return!1;const A=y.getHeight(),S=y.getWidth();for(m=1;r+m<A&&o+m<S&&y.get(o+m,r+m);)d[2]++,m++;if(r+m>=A||o+m>=S)return!1;for(;r+m<A&&o+m<S&&!y.get(o+m,r+m)&&d[3]<l;)d[3]++,m++;if(r+m>=A||o+m>=S||d[3]>=l)return!1;for(;r+m<A&&o+m<S&&y.get(o+m,r+m)&&d[4]<l;)d[4]++,m++;if(d[4]>=l)return!1;const R=d[0]+d[1]+d[2]+d[3]+d[4];return Math.abs(R-h)<2*h&&wn.foundPatternCross(d)}crossCheckVertical(r,o,l,h){const d=this.image,m=d.getHeight(),y=this.getCrossCheckStateCount();let A=r;for(;A>=0&&d.get(o,A);)y[2]++,A--;if(A<0)return NaN;for(;A>=0&&!d.get(o,A)&&y[1]<=l;)y[1]++,A--;if(A<0||y[1]>l)return NaN;for(;A>=0&&d.get(o,A)&&y[0]<=l;)y[0]++,A--;if(y[0]>l)return NaN;for(A=r+1;A<m&&d.get(o,A);)y[2]++,A++;if(A===m)return NaN;for(;A<m&&!d.get(o,A)&&y[3]<l;)y[3]++,A++;if(A===m||y[3]>=l)return NaN;for(;A<m&&d.get(o,A)&&y[4]<l;)y[4]++,A++;if(y[4]>=l)return NaN;const S=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(S-h)>=2*h?NaN:wn.foundPatternCross(y)?wn.centerFromEnd(y,A):NaN}crossCheckHorizontal(r,o,l,h){const d=this.image,m=d.getWidth(),y=this.getCrossCheckStateCount();let A=r;for(;A>=0&&d.get(A,o);)y[2]++,A--;if(A<0)return NaN;for(;A>=0&&!d.get(A,o)&&y[1]<=l;)y[1]++,A--;if(A<0||y[1]>l)return NaN;for(;A>=0&&d.get(A,o)&&y[0]<=l;)y[0]++,A--;if(y[0]>l)return NaN;for(A=r+1;A<m&&d.get(A,o);)y[2]++,A++;if(A===m)return NaN;for(;A<m&&!d.get(A,o)&&y[3]<l;)y[3]++,A++;if(A===m||y[3]>=l)return NaN;for(;A<m&&d.get(A,o)&&y[4]<l;)y[4]++,A++;if(y[4]>=l)return NaN;const S=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(S-h)>=h?NaN:wn.foundPatternCross(y)?wn.centerFromEnd(y,A):NaN}handlePossibleCenter(r,o,l,h){const d=r[0]+r[1]+r[2]+r[3]+r[4];let m=wn.centerFromEnd(r,l),y=this.crossCheckVertical(o,Math.floor(m),r[2],d);if(!isNaN(y)&&(m=this.crossCheckHorizontal(Math.floor(m),Math.floor(y),r[2],d),!isNaN(m)&&(!h||this.crossCheckDiagonal(Math.floor(y),Math.floor(m),r[2],d)))){const A=d/7;let S=!1;const R=this.possibleCenters;for(let B=0,P=R.length;B<P;B++){const Y=R[B];if(Y.aboutEquals(A,y,m)){R[B]=Y.combineEstimate(y,m,A),S=!0;break}}if(!S){const B=new Ks(m,y,A);R.push(B),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(B)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let o=null;for(const l of this.possibleCenters)if(l.getCount()>=wn.CENTER_QUORUM)if(o==null)o=l;else return this.hasSkipped=!0,Math.floor((Math.abs(o.getX()-l.getX())-Math.abs(o.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let r=0,o=0;const l=this.possibleCenters.length;for(const m of this.possibleCenters)m.getCount()>=wn.CENTER_QUORUM&&(r++,o+=m.getEstimatedModuleSize());if(r<3)return!1;const h=o/l;let d=0;for(const m of this.possibleCenters)d+=Math.abs(m.getEstimatedModuleSize()-h);return d<=.05*o}selectBestPatterns(){const r=this.possibleCenters.length;if(r<3)throw new he;const o=this.possibleCenters;let l;if(r>3){let h=0,d=0;for(const A of this.possibleCenters){const S=A.getEstimatedModuleSize();h+=S,d+=S*S}l=h/r;let m=Math.sqrt(d/r-l*l);o.sort((A,S)=>{const R=Math.abs(S.getEstimatedModuleSize()-l),B=Math.abs(A.getEstimatedModuleSize()-l);return R<B?-1:R>B?1:0});const y=Math.max(.2*l,m);for(let A=0;A<o.length&&o.length>3;A++){const S=o[A];Math.abs(S.getEstimatedModuleSize()-l)>y&&(o.splice(A,1),A--)}}if(o.length>3){let h=0;for(const d of o)h+=d.getEstimatedModuleSize();l=h/o.length,o.sort((d,m)=>{if(m.getCount()===d.getCount()){const y=Math.abs(m.getEstimatedModuleSize()-l),A=Math.abs(d.getEstimatedModuleSize()-l);return y<A?1:y>A?-1:0}else return m.getCount()-d.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]}}wn.CENTER_QUORUM=2,wn.MIN_SKIP=3,wn.MAX_MODULES=57;class Ji{constructor(r){this.image=r}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(r){this.resultPointCallback=r==null?null:r.get(ke.NEED_RESULT_POINT_CALLBACK);const l=new wn(this.image,this.resultPointCallback).find(r);return this.processFinderPatternInfo(l)}processFinderPatternInfo(r){const o=r.getTopLeft(),l=r.getTopRight(),h=r.getBottomLeft(),d=this.calculateModuleSize(o,l,h);if(d<1)throw new he("No pattern found in proccess finder.");const m=Ji.computeDimension(o,l,h,d),y=Ye.getProvisionalVersionForDimension(m),A=y.getDimensionForVersion()-7;let S=null;if(y.getAlignmentPatternCenters().length>0){const Y=l.getX()-o.getX()+h.getX(),$=l.getY()-o.getY()+h.getY(),ee=1-3/A,le=Math.floor(o.getX()+ee*(Y-o.getX())),xe=Math.floor(o.getY()+ee*($-o.getY()));for(let Le=4;Le<=16;Le<<=1)try{S=this.findAlignmentInRegion(d,le,xe,Le);break}catch(De){if(!(De instanceof he))throw De}}const R=Ji.createTransform(o,l,h,S,m),B=Ji.sampleGrid(this.image,R,m);let P;return S===null?P=[h,o,l]:P=[h,o,l,S],new ms(B,P)}static createTransform(r,o,l,h,d){const m=d-3.5;let y,A,S,R;return h!==null?(y=h.getX(),A=h.getY(),S=m-3,R=S):(y=o.getX()-r.getX()+l.getX(),A=o.getY()-r.getY()+l.getY(),S=m,R=m),li.quadrilateralToQuadrilateral(3.5,3.5,m,3.5,S,R,3.5,m,r.getX(),r.getY(),o.getX(),o.getY(),y,A,l.getX(),l.getY())}static sampleGrid(r,o,l){return pi.getInstance().sampleGridWithTransform(r,l,l,o)}static computeDimension(r,o,l,h){const d=We.round(Fe.distance(r,o)/h),m=We.round(Fe.distance(r,l)/h);let y=Math.floor((d+m)/2)+7;switch(y&3){case 0:y++;break;case 2:y--;break;case 3:throw new he("Dimensions could be not found.")}return y}calculateModuleSize(r,o,l){return(this.calculateModuleSizeOneWay(r,o)+this.calculateModuleSizeOneWay(r,l))/2}calculateModuleSizeOneWay(r,o){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(o.getX()),Math.floor(o.getY())),h=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(r.getX()),Math.floor(r.getY()));return isNaN(l)?h/7:isNaN(h)?l/7:(l+h)/14}sizeOfBlackWhiteBlackRunBothWays(r,o,l,h){let d=this.sizeOfBlackWhiteBlackRun(r,o,l,h),m=1,y=r-(l-r);y<0?(m=r/(r-y),y=0):y>=this.image.getWidth()&&(m=(this.image.getWidth()-1-r)/(y-r),y=this.image.getWidth()-1);let A=Math.floor(o-(h-o)*m);return m=1,A<0?(m=o/(o-A),A=0):A>=this.image.getHeight()&&(m=(this.image.getHeight()-1-o)/(A-o),A=this.image.getHeight()-1),y=Math.floor(r+(y-r)*m),d+=this.sizeOfBlackWhiteBlackRun(r,o,y,A),d-1}sizeOfBlackWhiteBlackRun(r,o,l,h){const d=Math.abs(h-o)>Math.abs(l-r);if(d){let Y=r;r=o,o=Y,Y=l,l=h,h=Y}const m=Math.abs(l-r),y=Math.abs(h-o);let A=-m/2;const S=r<l?1:-1,R=o<h?1:-1;let B=0;const P=l+S;for(let Y=r,$=o;Y!==P;Y+=S){const ee=d?$:Y,le=d?Y:$;if(B===1===this.image.get(ee,le)){if(B===2)return We.distance(Y,$,r,o);B++}if(A+=y,A>0){if($===h)break;$+=R,A-=m}}return B===2?We.distance(l+S,h,r,o):NaN}findAlignmentInRegion(r,o,l,h){const d=Math.floor(h*r),m=Math.max(0,o-d),y=Math.min(this.image.getWidth()-1,o+d);if(y-m<r*3)throw new he("Alignment top exceeds estimated module size.");const A=Math.max(0,l-d),S=Math.min(this.image.getHeight()-1,l+d);if(S-A<r*3)throw new he("Alignment bottom exceeds estimated module size.");return new Zi(this.image,m,A,y-m,S-A,r,this.resultPointCallback).find()}}class $i{constructor(){this.decoder=new Rs}getDecoder(){return this.decoder}decode(r,o){let l,h;if(o!=null&&o.get(ke.PURE_BARCODE)!==void 0){const A=$i.extractPureBits(r.getBlackMatrix());l=this.decoder.decodeBitMatrix(A,o),h=$i.NO_POINTS}else{const A=new Ji(r.getBlackMatrix()).detect(o);l=this.decoder.decodeBitMatrix(A.getBits(),o),h=A.getPoints()}l.getOther()instanceof Ro&&l.getOther().applyMirroredCorrection(h);const d=new Ue(l.getText(),l.getRawBytes(),void 0,h,Me.QR_CODE,void 0),m=l.getByteSegments();m!==null&&d.putMetadata(Et.BYTE_SEGMENTS,m);const y=l.getECLevel();return y!==null&&d.putMetadata(Et.ERROR_CORRECTION_LEVEL,y),l.hasStructuredAppend()&&(d.putMetadata(Et.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),d.putMetadata(Et.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),d}reset(){}static extractPureBits(r){const o=r.getTopLeftOnBit(),l=r.getBottomRightOnBit();if(o===null||l===null)throw new he;const h=this.moduleSize(o,r);let d=o[1],m=l[1],y=o[0],A=l[0];if(y>=A||d>=m)throw new he;if(m-d!==A-y&&(A=y+(m-d),A>=r.getWidth()))throw new he;const S=Math.round((A-y+1)/h),R=Math.round((m-d+1)/h);if(S<=0||R<=0)throw new he;if(R!==S)throw new he;const B=Math.floor(h/2);d+=B,y+=B;const P=y+Math.floor((S-1)*h)-A;if(P>0){if(P>B)throw new he;y-=P}const Y=d+Math.floor((R-1)*h)-m;if(Y>0){if(Y>B)throw new he;d-=Y}const $=new $e(S,R);for(let ee=0;ee<R;ee++){const le=d+Math.floor(ee*h);for(let xe=0;xe<S;xe++)r.get(y+Math.floor(xe*h),le)&&$.set(xe,ee)}return $}static moduleSize(r,o){const l=o.getHeight(),h=o.getWidth();let d=r[0],m=r[1],y=!0,A=0;for(;d<h&&m<l;){if(y!==o.get(d,m)){if(++A===5)break;y=!y}d++,m++}if(d===h||m===l)throw new he;return(d-r[0])/7}}$i.NO_POINTS=new Array;class Ze{PDF417Common(){}static getBitCountSum(r){return We.sum(r)}static toIntArray(r){if(r==null||!r.length)return Ze.EMPTY_INT_ARRAY;const o=new Int32Array(r.length);let l=0;for(const h of r)o[l++]=h;return o}static getCodeword(r){const o=Ee.binarySearch(Ze.SYMBOL_TABLE,r&262143);return o<0?-1:(Ze.CODEWORD_TABLE[o]-1)%Ze.NUMBER_OF_CODEWORDS}}Ze.NUMBER_OF_CODEWORDS=929,Ze.MAX_CODEWORDS_IN_BARCODE=Ze.NUMBER_OF_CODEWORDS-1,Ze.MIN_ROWS_IN_BARCODE=3,Ze.MAX_ROWS_IN_BARCODE=90,Ze.MODULES_IN_CODEWORD=17,Ze.MODULES_IN_STOP_PATTERN=18,Ze.BARS_IN_MODULE=8,Ze.EMPTY_INT_ARRAY=new Int32Array([]),Ze.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Ze.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Ds{constructor(r,o){this.bits=r,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class nt{static detectMultiple(r,o,l){let h=r.getBlackMatrix(),d=nt.detect(l,h);return d.length||(h=h.clone(),h.rotate180(),d=nt.detect(l,h)),new Ds(h,d)}static detect(r,o){const l=new Array;let h=0,d=0,m=!1;for(;h<o.getHeight();){const y=nt.findVertices(o,h,d);if(y[0]==null&&y[3]==null){if(!m)break;m=!1,d=0;for(const A of l)A[1]!=null&&(h=Math.trunc(Math.max(h,A[1].getY()))),A[3]!=null&&(h=Math.max(h,Math.trunc(A[3].getY())));h+=nt.ROW_STEP;continue}if(m=!0,l.push(y),!r)break;y[2]!=null?(d=Math.trunc(y[2].getX()),h=Math.trunc(y[2].getY())):(d=Math.trunc(y[4].getX()),h=Math.trunc(y[4].getY()))}return l}static findVertices(r,o,l){const h=r.getHeight(),d=r.getWidth(),m=new Array(8);return nt.copyToResult(m,nt.findRowsWithPattern(r,h,d,o,l,nt.START_PATTERN),nt.INDEXES_START_PATTERN),m[4]!=null&&(l=Math.trunc(m[4].getX()),o=Math.trunc(m[4].getY())),nt.copyToResult(m,nt.findRowsWithPattern(r,h,d,o,l,nt.STOP_PATTERN),nt.INDEXES_STOP_PATTERN),m}static copyToResult(r,o,l){for(let h=0;h<l.length;h++)r[l[h]]=o[h]}static findRowsWithPattern(r,o,l,h,d,m){const y=new Array(4);let A=!1;const S=new Int32Array(m.length);for(;h<o;h+=nt.ROW_STEP){let B=nt.findGuardPattern(r,d,h,l,!1,m,S);if(B!=null){for(;h>0;){const P=nt.findGuardPattern(r,d,--h,l,!1,m,S);if(P!=null)B=P;else{h++;break}}y[0]=new Fe(B[0],h),y[1]=new Fe(B[1],h),A=!0;break}}let R=h+1;if(A){let B=0,P=Int32Array.from([Math.trunc(y[0].getX()),Math.trunc(y[1].getX())]);for(;R<o;R++){const Y=nt.findGuardPattern(r,P[0],R,l,!1,m,S);if(Y!=null&&Math.abs(P[0]-Y[0])<nt.MAX_PATTERN_DRIFT&&Math.abs(P[1]-Y[1])<nt.MAX_PATTERN_DRIFT)P=Y,B=0;else{if(B>nt.SKIPPED_ROW_COUNT_MAX)break;B++}}R-=B+1,y[2]=new Fe(P[0],R),y[3]=new Fe(P[1],R)}return R-h<nt.BARCODE_MIN_HEIGHT&&Ee.fill(y,null),y}static findGuardPattern(r,o,l,h,d,m,y){Ee.fillWithin(y,0,y.length,0);let A=o,S=0;for(;r.get(A,l)&&A>0&&S++<nt.MAX_PIXEL_DRIFT;)A--;let R=A,B=0,P=m.length;for(let Y=d;R<h;R++)if(r.get(R,l)!==Y)y[B]++;else{if(B===P-1){if(nt.patternMatchVariance(y,m,nt.MAX_INDIVIDUAL_VARIANCE)<nt.MAX_AVG_VARIANCE)return new Int32Array([A,R]);A+=y[0]+y[1],Q.arraycopy(y,2,y,0,B-1),y[B-1]=0,y[B]=0,B--}else B++;y[B]=1,Y=!Y}return B===P-1&&nt.patternMatchVariance(y,m,nt.MAX_INDIVIDUAL_VARIANCE)<nt.MAX_AVG_VARIANCE?new Int32Array([A,R-1]):null}static patternMatchVariance(r,o,l){let h=r.length,d=0,m=0;for(let S=0;S<h;S++)d+=r[S],m+=o[S];if(d<m)return 1/0;let y=d/m;l*=y;let A=0;for(let S=0;S<h;S++){let R=r[S],B=o[S]*y,P=R>B?R-B:B-R;if(P>l)return 1/0;A+=P}return A/d}}nt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),nt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),nt.MAX_AVG_VARIANCE=.42,nt.MAX_INDIVIDUAL_VARIANCE=.8,nt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),nt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),nt.MAX_PIXEL_DRIFT=3,nt.MAX_PATTERN_DRIFT=5,nt.SKIPPED_ROW_COUNT_MAX=25,nt.ROW_STEP=5,nt.BARCODE_MIN_HEIGHT=10;class ln{constructor(r,o){if(o.length===0)throw new I;this.field=r;let l=o.length;if(l>1&&o[0]===0){let h=1;for(;h<l&&o[h]===0;)h++;h===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-h),Q.arraycopy(o,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);if(r===1){let h=0;for(let d of this.coefficients)h=this.field.add(h,d);return h}let o=this.coefficients[0],l=this.coefficients.length;for(let h=1;h<l;h++)o=this.field.add(this.field.multiply(r,o),this.coefficients[h]);return o}add(r){if(!this.field.equals(r.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero())return r;if(r.isZero())return this;let o=this.coefficients,l=r.coefficients;if(o.length>l.length){let m=o;o=l,l=m}let h=new Int32Array(l.length),d=l.length-o.length;Q.arraycopy(l,0,h,0,d);for(let m=d;m<l.length;m++)h[m]=this.field.add(o[m-d],l[m]);return new ln(this.field,h)}subtract(r){if(!this.field.equals(r.field))throw new I("ModulusPolys do not have same ModulusGF field");return r.isZero()?this:this.add(r.negative())}multiply(r){return r instanceof ln?this.multiplyOther(r):this.multiplyScalar(r)}multiplyOther(r){if(!this.field.equals(r.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero()||r.isZero())return new ln(this.field,new Int32Array([0]));let o=this.coefficients,l=o.length,h=r.coefficients,d=h.length,m=new Int32Array(l+d-1);for(let y=0;y<l;y++){let A=o[y];for(let S=0;S<d;S++)m[y+S]=this.field.add(m[y+S],this.field.multiply(A,h[S]))}return new ln(this.field,m)}negative(){let r=this.coefficients.length,o=new Int32Array(r);for(let l=0;l<r;l++)o[l]=this.field.subtract(0,this.coefficients[l]);return new ln(this.field,o)}multiplyScalar(r){if(r===0)return new ln(this.field,new Int32Array([0]));if(r===1)return this;let o=this.coefficients.length,l=new Int32Array(o);for(let h=0;h<o;h++)l[h]=this.field.multiply(this.coefficients[h],r);return new ln(this.field,l)}multiplyByMonomial(r,o){if(r<0)throw new I;if(o===0)return new ln(this.field,new Int32Array([0]));let l=this.coefficients.length,h=new Int32Array(l+r);for(let d=0;d<l;d++)h[d]=this.field.multiply(this.coefficients[d],o);return new ln(this.field,h)}toString(){let r=new X;for(let o=this.getDegree();o>=0;o--){let l=this.getCoefficient(o);l!==0&&(l<0?(r.append(" - "),l=-l):r.length()>0&&r.append(" + "),(o===0||l!==1)&&r.append(l),o!==0&&(o===1?r.append("x"):(r.append("x^"),r.append(o))))}return r.toString()}}class Zs{add(r,o){return(r+o)%this.modulus}subtract(r,o){return(this.modulus+r-o)%this.modulus}exp(r){return this.expTable[r]}log(r){if(r===0)throw new I;return this.logTable[r]}inverse(r){if(r===0)throw new gr;return this.expTable[this.modulus-this.logTable[r]-1]}multiply(r,o){return r===0||o===0?0:this.expTable[(this.logTable[r]+this.logTable[o])%(this.modulus-1)]}getSize(){return this.modulus}equals(r){return r===this}}class tn extends Zs{constructor(r,o){super(),this.modulus=r,this.expTable=new Int32Array(r),this.logTable=new Int32Array(r);let l=1;for(let h=0;h<r;h++)this.expTable[h]=l,l=l*o%r;for(let h=0;h<r-1;h++)this.logTable[this.expTable[h]]=h;this.zero=new ln(this,new Int32Array([0])),this.one=new ln(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,o){if(r<0)throw new I;if(o===0)return this.zero;let l=new Int32Array(r+1);return l[0]=o,new ln(this,l)}}tn.PDF417_GF=new tn(Ze.NUMBER_OF_CODEWORDS,3);class Or{constructor(){this.field=tn.PDF417_GF}decode(r,o,l){let h=new ln(this.field,r),d=new Int32Array(o),m=!1;for(let $=o;$>0;$--){let ee=h.evaluateAt(this.field.exp($));d[o-$]=ee,ee!==0&&(m=!0)}if(!m)return 0;let y=this.field.getOne();if(l!=null)for(const $ of l){let ee=this.field.exp(r.length-1-$),le=new ln(this.field,new Int32Array([this.field.subtract(0,ee),1]));y=y.multiply(le)}let A=new ln(this.field,d),S=this.runEuclideanAlgorithm(this.field.buildMonomial(o,1),A,o),R=S[0],B=S[1],P=this.findErrorLocations(R),Y=this.findErrorMagnitudes(B,R,P);for(let $=0;$<P.length;$++){let ee=r.length-1-this.field.log(P[$]);if(ee<0)throw k.getChecksumInstance();r[ee]=this.field.subtract(r[ee],Y[$])}return P.length}runEuclideanAlgorithm(r,o,l){if(r.getDegree()<o.getDegree()){let P=r;r=o,o=P}let h=r,d=o,m=this.field.getZero(),y=this.field.getOne();for(;d.getDegree()>=Math.round(l/2);){let P=h,Y=m;if(h=d,m=y,h.isZero())throw k.getChecksumInstance();d=P;let $=this.field.getZero(),ee=h.getCoefficient(h.getDegree()),le=this.field.inverse(ee);for(;d.getDegree()>=h.getDegree()&&!d.isZero();){let xe=d.getDegree()-h.getDegree(),Le=this.field.multiply(d.getCoefficient(d.getDegree()),le);$=$.add(this.field.buildMonomial(xe,Le)),d=d.subtract(h.multiplyByMonomial(xe,Le))}y=$.multiply(m).subtract(Y).negative()}let A=y.getCoefficient(0);if(A===0)throw k.getChecksumInstance();let S=this.field.inverse(A),R=y.multiply(S),B=d.multiply(S);return[R,B]}findErrorLocations(r){let o=r.getDegree(),l=new Int32Array(o),h=0;for(let d=1;d<this.field.getSize()&&h<o;d++)r.evaluateAt(d)===0&&(l[h]=this.field.inverse(d),h++);if(h!==o)throw k.getChecksumInstance();return l}findErrorMagnitudes(r,o,l){let h=o.getDegree(),d=new Int32Array(h);for(let S=1;S<=h;S++)d[h-S]=this.field.multiply(S,o.getCoefficient(S));let m=new ln(this.field,d),y=l.length,A=new Int32Array(y);for(let S=0;S<y;S++){let R=this.field.inverse(l[S]),B=this.field.subtract(0,r.evaluateAt(R)),P=this.field.inverse(m.evaluateAt(R));A[S]=this.field.multiply(B,P)}return A}}class Dr{constructor(r,o,l,h,d){r instanceof Dr?this.constructor_2(r):this.constructor_1(r,o,l,h,d)}constructor_1(r,o,l,h,d){const m=o==null||l==null,y=h==null||d==null;if(m&&y)throw new he;m?(o=new Fe(0,h.getY()),l=new Fe(0,d.getY())):y&&(h=new Fe(r.getWidth()-1,o.getY()),d=new Fe(r.getWidth()-1,l.getY())),this.image=r,this.topLeft=o,this.bottomLeft=l,this.topRight=h,this.bottomRight=d,this.minX=Math.trunc(Math.min(o.getX(),l.getX())),this.maxX=Math.trunc(Math.max(h.getX(),d.getX())),this.minY=Math.trunc(Math.min(o.getY(),h.getY())),this.maxY=Math.trunc(Math.max(l.getY(),d.getY()))}constructor_2(r){this.image=r.image,this.topLeft=r.getTopLeft(),this.bottomLeft=r.getBottomLeft(),this.topRight=r.getTopRight(),this.bottomRight=r.getBottomRight(),this.minX=r.getMinX(),this.maxX=r.getMaxX(),this.minY=r.getMinY(),this.maxY=r.getMaxY()}static merge(r,o){return r==null?o:o==null?r:new Dr(r.image,r.topLeft,r.bottomLeft,o.topRight,o.bottomRight)}addMissingRows(r,o,l){let h=this.topLeft,d=this.bottomLeft,m=this.topRight,y=this.bottomRight;if(r>0){let A=l?this.topLeft:this.topRight,S=Math.trunc(A.getY()-r);S<0&&(S=0);let R=new Fe(A.getX(),S);l?h=R:m=R}if(o>0){let A=l?this.bottomLeft:this.bottomRight,S=Math.trunc(A.getY()+o);S>=this.image.getHeight()&&(S=this.image.getHeight()-1);let R=new Fe(A.getX(),S);l?d=R:y=R}return new Dr(this.image,h,d,m,y)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Js{constructor(r,o,l,h){this.columnCount=r,this.errorCorrectionLevel=h,this.rowCountUpperPart=o,this.rowCountLowerPart=l,this.rowCount=o+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class ys{constructor(){this.buffer=""}static form(r,o){let l=-1;function h(m,y,A,S,R,B){if(m==="%%")return"%";if(o[++l]===void 0)return;m=S?parseInt(S.substr(1)):void 0;let P=R?parseInt(R.substr(1)):void 0,Y;switch(B){case"s":Y=o[l];break;case"c":Y=o[l][0];break;case"f":Y=parseFloat(o[l]).toFixed(m);break;case"p":Y=parseFloat(o[l]).toPrecision(m);break;case"e":Y=parseFloat(o[l]).toExponential(m);break;case"x":Y=parseInt(o[l]).toString(P||16);break;case"d":Y=parseFloat(parseInt(o[l],P||10).toPrecision(m)).toFixed(0);break}Y=typeof Y=="object"?JSON.stringify(Y):(+Y).toString(P);let $=parseInt(A),ee=A&&A[0]+""=="0"?"0":" ";for(;Y.length<$;)Y=y!==void 0?Y+ee:ee+Y;return Y}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(d,h)}format(r,...o){this.buffer+=ys.form(r,o)}toString(){return this.buffer}}class Mr{constructor(r){this.boundingBox=new Dr(r),this.codewords=new Array(r.getMaxY()-r.getMinY()+1)}getCodewordNearby(r){let o=this.getCodeword(r);if(o!=null)return o;for(let l=1;l<Mr.MAX_NEARBY_DISTANCE;l++){let h=this.imageRowToCodewordIndex(r)-l;if(h>=0&&(o=this.codewords[h],o!=null)||(h=this.imageRowToCodewordIndex(r)+l,h<this.codewords.length&&(o=this.codewords[h],o!=null)))return o}return null}imageRowToCodewordIndex(r){return r-this.boundingBox.getMinY()}setCodeword(r,o){this.codewords[this.imageRowToCodewordIndex(r)]=o}getCodeword(r){return this.codewords[this.imageRowToCodewordIndex(r)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const r=new ys;let o=0;for(const l of this.codewords){if(l==null){r.format("%3d:    |   %n",o++);continue}r.format("%3d: %3d|%3d%n",o++,l.getRowNumber(),l.getValue())}return r.toString()}}Mr.MAX_NEARBY_DISTANCE=5;class ar{constructor(){this.values=new Map}setValue(r){r=Math.trunc(r);let o=this.values.get(r);o==null&&(o=0),o++,this.values.set(r,o)}getValue(){let r=-1,o=new Array;for(const[l,h]of this.values.entries()){const d={getKey:()=>l,getValue:()=>h};d.getValue()>r?(r=d.getValue(),o=[],o.push(d.getKey())):d.getValue()===r&&o.push(d.getKey())}return Ze.toIntArray(o)}getConfidence(r){return this.values.get(r)}}class yr extends Mr{constructor(r,o){super(r),this._isLeft=o}setRowNumbers(){for(let r of this.getCodewords())r!=null&&r.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(r){let o=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(o,r);let l=this.getBoundingBox(),h=this._isLeft?l.getTopLeft():l.getTopRight(),d=this._isLeft?l.getBottomLeft():l.getBottomRight(),m=this.imageRowToCodewordIndex(Math.trunc(h.getY())),y=this.imageRowToCodewordIndex(Math.trunc(d.getY())),A=-1,S=1,R=0;for(let B=m;B<y;B++){if(o[B]==null)continue;let P=o[B],Y=P.getRowNumber()-A;if(Y===0)R++;else if(Y===1)S=Math.max(S,R),R=1,A=P.getRowNumber();else if(Y<0||P.getRowNumber()>=r.getRowCount()||Y>B)o[B]=null;else{let $;S>2?$=(S-2)*Y:$=Y;let ee=$>=B;for(let le=1;le<=$&&!ee;le++)ee=o[B-le]!=null;ee?o[B]=null:(A=P.getRowNumber(),R=1)}}}getRowHeights(){let r=this.getBarcodeMetadata();if(r==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(r);let o=new Int32Array(r.getRowCount());for(let l of this.getCodewords())if(l!=null){let h=l.getRowNumber();if(h>=o.length)continue;o[h]++}return o}adjustIncompleteIndicatorColumnRowNumbers(r){let o=this.getBoundingBox(),l=this._isLeft?o.getTopLeft():o.getTopRight(),h=this._isLeft?o.getBottomLeft():o.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(l.getY())),m=this.imageRowToCodewordIndex(Math.trunc(h.getY())),y=this.getCodewords(),A=-1;for(let S=d;S<m;S++){if(y[S]==null)continue;let R=y[S];R.setRowNumberAsRowIndicatorColumn();let B=R.getRowNumber()-A;B===0||(B===1?A=R.getRowNumber():R.getRowNumber()>=r.getRowCount()?y[S]=null:A=R.getRowNumber())}}getBarcodeMetadata(){let r=this.getCodewords(),o=new ar,l=new ar,h=new ar,d=new ar;for(let y of r){if(y==null)continue;y.setRowNumberAsRowIndicatorColumn();let A=y.getValue()%30,S=y.getRowNumber();switch(this._isLeft||(S+=2),S%3){case 0:l.setValue(A*3+1);break;case 1:d.setValue(A/3),h.setValue(A%3);break;case 2:o.setValue(A+1);break}}if(o.getValue().length===0||l.getValue().length===0||h.getValue().length===0||d.getValue().length===0||o.getValue()[0]<1||l.getValue()[0]+h.getValue()[0]<Ze.MIN_ROWS_IN_BARCODE||l.getValue()[0]+h.getValue()[0]>Ze.MAX_ROWS_IN_BARCODE)return null;let m=new Js(o.getValue()[0],l.getValue()[0],h.getValue()[0],d.getValue()[0]);return this.removeIncorrectCodewords(r,m),m}removeIncorrectCodewords(r,o){for(let l=0;l<r.length;l++){let h=r[l];if(r[l]==null)continue;let d=h.getValue()%30,m=h.getRowNumber();if(m>o.getRowCount()){r[l]=null;continue}switch(this._isLeft||(m+=2),m%3){case 0:d*3+1!==o.getRowCountUpperPart()&&(r[l]=null);break;case 1:(Math.trunc(d/3)!==o.getErrorCorrectionLevel()||d%3!==o.getRowCountLowerPart())&&(r[l]=null);break;case 2:d+1!==o.getColumnCount()&&(r[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class zn{constructor(r,o){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=r,this.barcodeColumnCount=r.getColumnCount(),this.boundingBox=o,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let r=Ze.MAX_CODEWORDS_IN_BARCODE,o;do o=r,r=this.adjustRowNumbersAndGetCount();while(r>0&&r<o);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(r){r!=null&&r.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let r=this.adjustRowNumbersByRow();if(r===0)return 0;for(let o=1;o<this.barcodeColumnCount+1;o++){let l=this.detectionResultColumns[o].getCodewords();for(let h=0;h<l.length;h++)l[h]!=null&&(l[h].hasValidRowNumber()||this.adjustRowNumbers(o,h,l))}return r}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let r=this.detectionResultColumns[0].getCodewords(),o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<r.length;l++)if(r[l]!=null&&o[l]!=null&&r[l].getRowNumber()===o[l].getRowNumber())for(let h=1;h<=this.barcodeColumnCount;h++){let d=this.detectionResultColumns[h].getCodewords()[l];d!=null&&(d.setRowNumber(r[l].getRowNumber()),d.hasValidRowNumber()||(this.detectionResultColumns[h].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let r=0,o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<o.length;l++){if(o[l]==null)continue;let h=o[l].getRowNumber(),d=0;for(let m=this.barcodeColumnCount+1;m>0&&d<this.ADJUST_ROW_NUMBER_SKIP;m--){let y=this.detectionResultColumns[m].getCodewords()[l];y!=null&&(d=zn.adjustRowNumberIfValid(h,d,y),y.hasValidRowNumber()||r++)}}return r}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let r=0,o=this.detectionResultColumns[0].getCodewords();for(let l=0;l<o.length;l++){if(o[l]==null)continue;let h=o[l].getRowNumber(),d=0;for(let m=1;m<this.barcodeColumnCount+1&&d<this.ADJUST_ROW_NUMBER_SKIP;m++){let y=this.detectionResultColumns[m].getCodewords()[l];y!=null&&(d=zn.adjustRowNumberIfValid(h,d,y),y.hasValidRowNumber()||r++)}}return r}static adjustRowNumberIfValid(r,o,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(r)?(l.setRowNumber(r),o=0):++o),o}adjustRowNumbers(r,o,l){if(!this.detectionResultColumns[r-1])return;let h=l[o],d=this.detectionResultColumns[r-1].getCodewords(),m=d;this.detectionResultColumns[r+1]!=null&&(m=this.detectionResultColumns[r+1].getCodewords());let y=new Array(14);y[2]=d[o],y[3]=m[o],o>0&&(y[0]=l[o-1],y[4]=d[o-1],y[5]=m[o-1]),o>1&&(y[8]=l[o-2],y[10]=d[o-2],y[11]=m[o-2]),o<l.length-1&&(y[1]=l[o+1],y[6]=d[o+1],y[7]=m[o+1]),o<l.length-2&&(y[9]=l[o+2],y[12]=d[o+2],y[13]=m[o+2]);for(let A of y)if(zn.adjustRowNumber(h,A))return}static adjustRowNumber(r,o){return o==null?!1:o.hasValidRowNumber()&&o.getBucket()===r.getBucket()?(r.setRowNumber(o.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(r){this.boundingBox=r}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(r,o){this.detectionResultColumns[r]=o}getDetectionResultColumn(r){return this.detectionResultColumns[r]}toString(){let r=this.detectionResultColumns[0];r==null&&(r=this.detectionResultColumns[this.barcodeColumnCount+1]);let o=new ys;for(let l=0;l<r.getCodewords().length;l++){o.format("CW %3d:",l);for(let h=0;h<this.barcodeColumnCount+2;h++){if(this.detectionResultColumns[h]==null){o.format("    |   ");continue}let d=this.detectionResultColumns[h].getCodewords()[l];if(d==null){o.format("    |   ");continue}o.format(" %3d|%3d",d.getRowNumber(),d.getValue())}o.format("%n")}return o.toString()}}class or{constructor(r,o,l,h){this.rowNumber=or.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(r),this.endX=Math.trunc(o),this.bucket=Math.trunc(l),this.value=Math.trunc(h)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(r){return r!==or.BARCODE_ROW_UNKNOWN&&this.bucket===r%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(r){this.rowNumber=r}toString(){return this.rowNumber+"|"+this.value}}or.BARCODE_ROW_UNKNOWN=-1;class Cn{static initialize(){for(let r=0;r<Ze.SYMBOL_TABLE.length;r++){let o=Ze.SYMBOL_TABLE[r],l=o&1;for(let h=0;h<Ze.BARS_IN_MODULE;h++){let d=0;for(;(o&1)===l;)d+=1,o>>=1;l=o&1,Cn.RATIOS_TABLE[r]||(Cn.RATIOS_TABLE[r]=new Array(Ze.BARS_IN_MODULE)),Cn.RATIOS_TABLE[r][Ze.BARS_IN_MODULE-h-1]=Math.fround(d/Ze.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(r){let o=Cn.getDecodedCodewordValue(Cn.sampleBitCounts(r));return o!==-1?o:Cn.getClosestDecodedValue(r)}static sampleBitCounts(r){let o=We.sum(r),l=new Int32Array(Ze.BARS_IN_MODULE),h=0,d=0;for(let m=0;m<Ze.MODULES_IN_CODEWORD;m++){let y=o/(2*Ze.MODULES_IN_CODEWORD)+m*o/Ze.MODULES_IN_CODEWORD;d+r[h]<=y&&(d+=r[h],h++),l[h]++}return l}static getDecodedCodewordValue(r){let o=Cn.getBitValue(r);return Ze.getCodeword(o)===-1?-1:o}static getBitValue(r){let o=0;for(let l=0;l<r.length;l++)for(let h=0;h<r[l];h++)o=o<<1|(l%2===0?1:0);return Math.trunc(o)}static getClosestDecodedValue(r){let o=We.sum(r),l=new Array(Ze.BARS_IN_MODULE);if(o>1)for(let m=0;m<l.length;m++)l[m]=Math.fround(r[m]/o);let h=An.MAX_VALUE,d=-1;this.bSymbolTableReady||Cn.initialize();for(let m=0;m<Cn.RATIOS_TABLE.length;m++){let y=0,A=Cn.RATIOS_TABLE[m];for(let S=0;S<Ze.BARS_IN_MODULE;S++){let R=Math.fround(A[S]-l[S]);if(y+=Math.fround(R*R),y>=h)break}y<h&&(h=y,d=Ze.SYMBOL_TABLE[m])}return d}}Cn.bSymbolTableReady=!1,Cn.RATIOS_TABLE=new Array(Ze.SYMBOL_TABLE.length).map(L=>new Array(Ze.BARS_IN_MODULE));class Es{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(r){this.segmentIndex=r}getFileId(){return this.fileId}setFileId(r){this.fileId=r}getOptionalData(){return this.optionalData}setOptionalData(r){this.optionalData=r}isLastSegment(){return this.lastSegment}setLastSegment(r){this.lastSegment=r}getSegmentCount(){return this.segmentCount}setSegmentCount(r){this.segmentCount=r}getSender(){return this.sender||null}setSender(r){this.sender=r}getAddressee(){return this.addressee||null}setAddressee(r){this.addressee=r}getFileName(){return this.fileName}setFileName(r){this.fileName=r}getFileSize(){return this.fileSize}setFileSize(r){this.fileSize=r}getChecksum(){return this.checksum}setChecksum(r){this.checksum=r}getTimestamp(){return this.timestamp}setTimestamp(r){this.timestamp=r}}class La{static parseLong(r,o=void 0){return parseInt(r,o)}}class _s extends E{}_s.kind="NullPointerException";class Ba{writeBytes(r){this.writeBytesOffset(r,0,r.length)}writeBytesOffset(r,o,l){if(r==null)throw new _s;if(o<0||o>r.length||l<0||o+l>r.length||o+l<0)throw new z;if(l===0)return;for(let h=0;h<l;h++)this.write(r[o+h])}flush(){}close(){}}class Kr extends E{}class Pa extends Ba{constructor(r=32){if(super(),this.count=0,r<0)throw new I("Negative initial size: "+r);this.buf=new Uint8Array(r)}ensureCapacity(r){r-this.buf.length>0&&this.grow(r)}grow(r){let l=this.buf.length<<1;if(l-r<0&&(l=r),l<0){if(r<0)throw new Kr;l=K.MAX_VALUE}this.buf=Ee.copyOfUint8Array(this.buf,l)}write(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1}writeBytesOffset(r,o,l){if(o<0||o>r.length||l<0||o+l-r.length>0)throw new z;this.ensureCapacity(this.count+l),Q.arraycopy(r,o,this.buf,this.count,l),this.count+=l}writeTo(r){r.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return Ee.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(r){return new String(this.buf).toString()}toString_number(r){return new String(this.buf).toString()}close(){}}var Wt;(function(L){L[L.ALPHA=0]="ALPHA",L[L.LOWER=1]="LOWER",L[L.MIXED=2]="MIXED",L[L.PUNCT=3]="PUNCT",L[L.ALPHA_SHIFT=4]="ALPHA_SHIFT",L[L.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Wt||(Wt={}));function Ms(){if(typeof window<"u")return window.BigInt||null;if(typeof Oh<"u")return Oh.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let $s;function Lr(L){if(typeof $s>"u"&&($s=Ms()),$s===null)throw new Error("BigInt is not supported!");return $s(L)}function ea(){let L=[];L[0]=Lr(1);let r=Lr(900);L[1]=r;for(let o=2;o<16;o++)L[o]=L[o-1]*r;return L}class pe{static decode(r,o){let l=new X(""),h=V.ISO8859_1;l.enableDecoding(h);let d=1,m=r[d++],y=new Es;for(;d<r[0];){switch(m){case pe.TEXT_COMPACTION_MODE_LATCH:d=pe.textCompaction(r,d,l);break;case pe.BYTE_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH_6:d=pe.byteCompaction(m,r,h,d,l);break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(r[d++]);break;case pe.NUMERIC_COMPACTION_MODE_LATCH:d=pe.numericCompaction(r,d,l);break;case pe.ECI_CHARSET:V.getCharacterSetECIByValue(r[d++]);break;case pe.ECI_GENERAL_PURPOSE:d+=2;break;case pe.ECI_USER_DEFINED:d++;break;case pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:d=pe.decodeMacroBlock(r,d,y);break;case pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pe.MACRO_PDF417_TERMINATOR:throw new j;default:d--,d=pe.textCompaction(r,d,l);break}if(d<r.length)m=r[d++];else throw j.getFormatInstance()}if(l.length()===0)throw j.getFormatInstance();let A=new Yt(null,l.toString(),null,o);return A.setOther(y),A}static decodeMacroBlock(r,o,l){if(o+pe.NUMBER_OF_SEQUENCE_CODEWORDS>r[0])throw j.getFormatInstance();let h=new Int32Array(pe.NUMBER_OF_SEQUENCE_CODEWORDS);for(let y=0;y<pe.NUMBER_OF_SEQUENCE_CODEWORDS;y++,o++)h[y]=r[o];l.setSegmentIndex(K.parseInt(pe.decodeBase900toBase10(h,pe.NUMBER_OF_SEQUENCE_CODEWORDS)));let d=new X;o=pe.textCompaction(r,o,d),l.setFileId(d.toString());let m=-1;for(r[o]===pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(m=o+1);o<r[0];)switch(r[o]){case pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(o++,r[o]){case pe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let y=new X;o=pe.textCompaction(r,o+1,y),l.setFileName(y.toString());break;case pe.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let A=new X;o=pe.textCompaction(r,o+1,A),l.setSender(A.toString());break;case pe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let S=new X;o=pe.textCompaction(r,o+1,S),l.setAddressee(S.toString());break;case pe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let R=new X;o=pe.numericCompaction(r,o+1,R),l.setSegmentCount(K.parseInt(R.toString()));break;case pe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let B=new X;o=pe.numericCompaction(r,o+1,B),l.setTimestamp(La.parseLong(B.toString()));break;case pe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let P=new X;o=pe.numericCompaction(r,o+1,P),l.setChecksum(K.parseInt(P.toString()));break;case pe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let Y=new X;o=pe.numericCompaction(r,o+1,Y),l.setFileSize(La.parseLong(Y.toString()));break;default:throw j.getFormatInstance()}break;case pe.MACRO_PDF417_TERMINATOR:o++,l.setLastSegment(!0);break;default:throw j.getFormatInstance()}if(m!==-1){let y=o-m;l.isLastSegment()&&y--,l.setOptionalData(Ee.copyOfRange(r,m,m+y))}return o}static textCompaction(r,o,l){let h=new Int32Array((r[0]-o)*2),d=new Int32Array((r[0]-o)*2),m=0,y=!1;for(;o<r[0]&&!y;){let A=r[o++];if(A<pe.TEXT_COMPACTION_MODE_LATCH)h[m]=A/30,h[m+1]=A%30,m+=2;else switch(A){case pe.TEXT_COMPACTION_MODE_LATCH:h[m++]=pe.TEXT_COMPACTION_MODE_LATCH;break;case pe.BYTE_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH_6:case pe.NUMERIC_COMPACTION_MODE_LATCH:case pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pe.MACRO_PDF417_TERMINATOR:o--,y=!0;break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h[m]=pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,A=r[o++],d[m]=A,m++;break}}return pe.decodeTextCompaction(h,d,m,l),o}static decodeTextCompaction(r,o,l,h){let d=Wt.ALPHA,m=Wt.ALPHA,y=0;for(;y<l;){let A=r[y],S="";switch(d){case Wt.ALPHA:if(A<26)S=String.fromCharCode(65+A);else switch(A){case 26:S=" ";break;case pe.LL:d=Wt.LOWER;break;case pe.ML:d=Wt.MIXED;break;case pe.PS:m=d,d=Wt.PUNCT_SHIFT;break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(o[y]);break;case pe.TEXT_COMPACTION_MODE_LATCH:d=Wt.ALPHA;break}break;case Wt.LOWER:if(A<26)S=String.fromCharCode(97+A);else switch(A){case 26:S=" ";break;case pe.AS:m=d,d=Wt.ALPHA_SHIFT;break;case pe.ML:d=Wt.MIXED;break;case pe.PS:m=d,d=Wt.PUNCT_SHIFT;break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(o[y]);break;case pe.TEXT_COMPACTION_MODE_LATCH:d=Wt.ALPHA;break}break;case Wt.MIXED:if(A<pe.PL)S=pe.MIXED_CHARS[A];else switch(A){case pe.PL:d=Wt.PUNCT;break;case 26:S=" ";break;case pe.LL:d=Wt.LOWER;break;case pe.AL:d=Wt.ALPHA;break;case pe.PS:m=d,d=Wt.PUNCT_SHIFT;break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(o[y]);break;case pe.TEXT_COMPACTION_MODE_LATCH:d=Wt.ALPHA;break}break;case Wt.PUNCT:if(A<pe.PAL)S=pe.PUNCT_CHARS[A];else switch(A){case pe.PAL:d=Wt.ALPHA;break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(o[y]);break;case pe.TEXT_COMPACTION_MODE_LATCH:d=Wt.ALPHA;break}break;case Wt.ALPHA_SHIFT:if(d=m,A<26)S=String.fromCharCode(65+A);else switch(A){case 26:S=" ";break;case pe.TEXT_COMPACTION_MODE_LATCH:d=Wt.ALPHA;break}break;case Wt.PUNCT_SHIFT:if(d=m,A<pe.PAL)S=pe.PUNCT_CHARS[A];else switch(A){case pe.PAL:d=Wt.ALPHA;break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(o[y]);break;case pe.TEXT_COMPACTION_MODE_LATCH:d=Wt.ALPHA;break}break}S!==""&&h.append(S),y++}}static byteCompaction(r,o,l,h,d){let m=new Pa,y=0,A=0,S=!1;switch(r){case pe.BYTE_COMPACTION_MODE_LATCH:let R=new Int32Array(6),B=o[h++];for(;h<o[0]&&!S;)switch(R[y++]=B,A=900*A+B,B=o[h++],B){case pe.TEXT_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH:case pe.NUMERIC_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH_6:case pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pe.MACRO_PDF417_TERMINATOR:h--,S=!0;break;default:if(y%5===0&&y>0){for(let P=0;P<6;++P)m.write(Number(Lr(A)>>Lr(8*(5-P))));A=0,y=0}break}h===o[0]&&B<pe.TEXT_COMPACTION_MODE_LATCH&&(R[y++]=B);for(let P=0;P<y;P++)m.write(R[P]);break;case pe.BYTE_COMPACTION_MODE_LATCH_6:for(;h<o[0]&&!S;){let P=o[h++];if(P<pe.TEXT_COMPACTION_MODE_LATCH)y++,A=900*A+P;else switch(P){case pe.TEXT_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH:case pe.NUMERIC_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH_6:case pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pe.MACRO_PDF417_TERMINATOR:h--,S=!0;break}if(y%5===0&&y>0){for(let Y=0;Y<6;++Y)m.write(Number(Lr(A)>>Lr(8*(5-Y))));A=0,y=0}}break}return d.append(W.decode(m.toByteArray(),l)),h}static numericCompaction(r,o,l){let h=0,d=!1,m=new Int32Array(pe.MAX_NUMERIC_CODEWORDS);for(;o<r[0]&&!d;){let y=r[o++];if(o===r[0]&&(d=!0),y<pe.TEXT_COMPACTION_MODE_LATCH)m[h]=y,h++;else switch(y){case pe.TEXT_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH_6:case pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pe.MACRO_PDF417_TERMINATOR:o--,d=!0;break}(h%pe.MAX_NUMERIC_CODEWORDS===0||y===pe.NUMERIC_COMPACTION_MODE_LATCH||d)&&h>0&&(l.append(pe.decodeBase900toBase10(m,h)),h=0)}return o}static decodeBase900toBase10(r,o){let l=Lr(0);for(let d=0;d<o;d++)l+=pe.EXP900[o-d-1]*Lr(r[d]);let h=l.toString();if(h.charAt(0)!=="1")throw new j;return h.substring(1)}}pe.TEXT_COMPACTION_MODE_LATCH=900,pe.BYTE_COMPACTION_MODE_LATCH=901,pe.NUMERIC_COMPACTION_MODE_LATCH=902,pe.BYTE_COMPACTION_MODE_LATCH_6=924,pe.ECI_USER_DEFINED=925,pe.ECI_GENERAL_PURPOSE=926,pe.ECI_CHARSET=927,pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,pe.MACRO_PDF417_TERMINATOR=922,pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,pe.MAX_NUMERIC_CODEWORDS=15,pe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,pe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,pe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,pe.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,pe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,pe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,pe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,pe.PL=25,pe.LL=27,pe.AS=27,pe.ML=28,pe.AL=28,pe.PS=29,pe.PAL=29,pe.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,pe.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",pe.EXP900=Ms()?ea():[],pe.NUMBER_OF_SEQUENCE_CODEWORDS=2;class gt{constructor(){}static decode(r,o,l,h,d,m,y){let A=new Dr(r,o,l,h,d),S=null,R=null,B;for(let $=!0;;$=!1){if(o!=null&&(S=gt.getRowIndicatorColumn(r,A,o,!0,m,y)),h!=null&&(R=gt.getRowIndicatorColumn(r,A,h,!1,m,y)),B=gt.merge(S,R),B==null)throw he.getNotFoundInstance();let ee=B.getBoundingBox();if($&&ee!=null&&(ee.getMinY()<A.getMinY()||ee.getMaxY()>A.getMaxY()))A=ee;else break}B.setBoundingBox(A);let P=B.getBarcodeColumnCount()+1;B.setDetectionResultColumn(0,S),B.setDetectionResultColumn(P,R);let Y=S!=null;for(let $=1;$<=P;$++){let ee=Y?$:P-$;if(B.getDetectionResultColumn(ee)!==void 0)continue;let le;ee===0||ee===P?le=new yr(A,ee===0):le=new Mr(A),B.setDetectionResultColumn(ee,le);let xe=-1,Le=xe;for(let De=A.getMinY();De<=A.getMaxY();De++){if(xe=gt.getStartColumn(B,ee,De,Y),xe<0||xe>A.getMaxX()){if(Le===-1)continue;xe=Le}let Re=gt.detectCodeword(r,A.getMinX(),A.getMaxX(),Y,xe,De,m,y);Re!=null&&(le.setCodeword(De,Re),Le=xe,m=Math.min(m,Re.getWidth()),y=Math.max(y,Re.getWidth()))}}return gt.createDecoderResult(B)}static merge(r,o){if(r==null&&o==null)return null;let l=gt.getBarcodeMetadata(r,o);if(l==null)return null;let h=Dr.merge(gt.adjustBoundingBox(r),gt.adjustBoundingBox(o));return new zn(l,h)}static adjustBoundingBox(r){if(r==null)return null;let o=r.getRowHeights();if(o==null)return null;let l=gt.getMax(o),h=0;for(let y of o)if(h+=l-y,y>0)break;let d=r.getCodewords();for(let y=0;h>0&&d[y]==null;y++)h--;let m=0;for(let y=o.length-1;y>=0&&(m+=l-o[y],!(o[y]>0));y--);for(let y=d.length-1;m>0&&d[y]==null;y--)m--;return r.getBoundingBox().addMissingRows(h,m,r.isLeft())}static getMax(r){let o=-1;for(let l of r)o=Math.max(o,l);return o}static getBarcodeMetadata(r,o){let l;if(r==null||(l=r.getBarcodeMetadata())==null)return o==null?null:o.getBarcodeMetadata();let h;return o==null||(h=o.getBarcodeMetadata())==null?l:l.getColumnCount()!==h.getColumnCount()&&l.getErrorCorrectionLevel()!==h.getErrorCorrectionLevel()&&l.getRowCount()!==h.getRowCount()?null:l}static getRowIndicatorColumn(r,o,l,h,d,m){let y=new yr(o,h);for(let A=0;A<2;A++){let S=A===0?1:-1,R=Math.trunc(Math.trunc(l.getX()));for(let B=Math.trunc(Math.trunc(l.getY()));B<=o.getMaxY()&&B>=o.getMinY();B+=S){let P=gt.detectCodeword(r,0,r.getWidth(),h,R,B,d,m);P!=null&&(y.setCodeword(B,P),h?R=P.getStartX():R=P.getEndX())}}return y}static adjustCodewordCount(r,o){let l=o[0][1],h=l.getValue(),d=r.getBarcodeColumnCount()*r.getBarcodeRowCount()-gt.getNumberOfECCodeWords(r.getBarcodeECLevel());if(h.length===0){if(d<1||d>Ze.MAX_CODEWORDS_IN_BARCODE)throw he.getNotFoundInstance();l.setValue(d)}else h[0]!==d&&l.setValue(d)}static createDecoderResult(r){let o=gt.createBarcodeMatrix(r);gt.adjustCodewordCount(r,o);let l=new Array,h=new Int32Array(r.getBarcodeRowCount()*r.getBarcodeColumnCount()),d=[],m=new Array;for(let A=0;A<r.getBarcodeRowCount();A++)for(let S=0;S<r.getBarcodeColumnCount();S++){let R=o[A][S+1].getValue(),B=A*r.getBarcodeColumnCount()+S;R.length===0?l.push(B):R.length===1?h[B]=R[0]:(m.push(B),d.push(R))}let y=new Array(d.length);for(let A=0;A<y.length;A++)y[A]=d[A];return gt.createDecoderResultFromAmbiguousValues(r.getBarcodeECLevel(),h,Ze.toIntArray(l),Ze.toIntArray(m),y)}static createDecoderResultFromAmbiguousValues(r,o,l,h,d){let m=new Int32Array(h.length),y=100;for(;y-- >0;){for(let A=0;A<m.length;A++)o[h[A]]=d[A][m[A]];try{return gt.decodeCodewords(o,r,l)}catch(A){if(!(A instanceof k))throw A}if(m.length===0)throw k.getChecksumInstance();for(let A=0;A<m.length;A++)if(m[A]<d[A].length-1){m[A]++;break}else if(m[A]=0,A===m.length-1)throw k.getChecksumInstance()}throw k.getChecksumInstance()}static createBarcodeMatrix(r){let o=Array.from({length:r.getBarcodeRowCount()},()=>new Array(r.getBarcodeColumnCount()+2));for(let h=0;h<o.length;h++)for(let d=0;d<o[h].length;d++)o[h][d]=new ar;let l=0;for(let h of r.getDetectionResultColumns()){if(h!=null){for(let d of h.getCodewords())if(d!=null){let m=d.getRowNumber();if(m>=0){if(m>=o.length)continue;o[m][l].setValue(d.getValue())}}}l++}return o}static isValidBarcodeColumn(r,o){return o>=0&&o<=r.getBarcodeColumnCount()+1}static getStartColumn(r,o,l,h){let d=h?1:-1,m=null;if(gt.isValidBarcodeColumn(r,o-d)&&(m=r.getDetectionResultColumn(o-d).getCodeword(l)),m!=null)return h?m.getEndX():m.getStartX();if(m=r.getDetectionResultColumn(o).getCodewordNearby(l),m!=null)return h?m.getStartX():m.getEndX();if(gt.isValidBarcodeColumn(r,o-d)&&(m=r.getDetectionResultColumn(o-d).getCodewordNearby(l)),m!=null)return h?m.getEndX():m.getStartX();let y=0;for(;gt.isValidBarcodeColumn(r,o-d);){o-=d;for(let A of r.getDetectionResultColumn(o).getCodewords())if(A!=null)return(h?A.getEndX():A.getStartX())+d*y*(A.getEndX()-A.getStartX());y++}return h?r.getBoundingBox().getMinX():r.getBoundingBox().getMaxX()}static detectCodeword(r,o,l,h,d,m,y,A){d=gt.adjustCodewordStartColumn(r,o,l,h,d,m);let S=gt.getModuleBitCount(r,o,l,h,d,m);if(S==null)return null;let R,B=We.sum(S);if(h)R=d+B;else{for(let $=0;$<S.length/2;$++){let ee=S[$];S[$]=S[S.length-1-$],S[S.length-1-$]=ee}R=d,d=R-B}if(!gt.checkCodewordSkew(B,y,A))return null;let P=Cn.getDecodedValue(S),Y=Ze.getCodeword(P);return Y===-1?null:new or(d,R,gt.getCodewordBucketNumber(P),Y)}static getModuleBitCount(r,o,l,h,d,m){let y=d,A=new Int32Array(8),S=0,R=h?1:-1,B=h;for(;(h?y<l:y>=o)&&S<A.length;)r.get(y,m)===B?(A[S]++,y+=R):(S++,B=!B);return S===A.length||y===(h?l:o)&&S===A.length-1?A:null}static getNumberOfECCodeWords(r){return 2<<r}static adjustCodewordStartColumn(r,o,l,h,d,m){let y=d,A=h?-1:1;for(let S=0;S<2;S++){for(;(h?y>=o:y<l)&&h===r.get(y,m);){if(Math.abs(d-y)>gt.CODEWORD_SKEW_SIZE)return d;y+=A}A=-A,h=!h}return y}static checkCodewordSkew(r,o,l){return o-gt.CODEWORD_SKEW_SIZE<=r&&r<=l+gt.CODEWORD_SKEW_SIZE}static decodeCodewords(r,o,l){if(r.length===0)throw j.getFormatInstance();let h=1<<o+1,d=gt.correctErrors(r,l,h);gt.verifyCodewordCount(r,h);let m=pe.decode(r,""+o);return m.setErrorsCorrected(d),m.setErasures(l.length),m}static correctErrors(r,o,l){if(o!=null&&o.length>l/2+gt.MAX_ERRORS||l<0||l>gt.MAX_EC_CODEWORDS)throw k.getChecksumInstance();return gt.errorCorrection.decode(r,l,o)}static verifyCodewordCount(r,o){if(r.length<4)throw j.getFormatInstance();let l=r[0];if(l>r.length)throw j.getFormatInstance();if(l===0)if(o<r.length)r[0]=r.length-o;else throw j.getFormatInstance()}static getBitCountForCodeword(r){let o=new Int32Array(8),l=0,h=o.length-1;for(;!((r&1)!==l&&(l=r&1,h--,h<0));)o[h]++,r>>=1;return o}static getCodewordBucketNumber(r){return r instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(r):this.getCodewordBucketNumber_number(r)}static getCodewordBucketNumber_number(r){return gt.getCodewordBucketNumber(gt.getBitCountForCodeword(r))}static getCodewordBucketNumber_Int32Array(r){return(r[0]-r[2]+r[4]-r[6]+9)%9}static toString(r){let o=new ys;for(let l=0;l<r.length;l++){o.format("Row %2d: ",l);for(let h=0;h<r[l].length;h++){let d=r[l][h];d.getValue().length===0?o.format("        ",null):o.format("%4d(%2d)",d.getValue()[0],d.getConfidence(d.getValue()[0]))}o.format("%n")}return o.toString()}}gt.CODEWORD_SKEW_SIZE=2,gt.MAX_ERRORS=3,gt.MAX_EC_CODEWORDS=512,gt.errorCorrection=new Or;class Bn{decode(r,o=null){let l=Bn.decode(r,o,!1);if(l==null||l.length===0||l[0]==null)throw he.getNotFoundInstance();return l[0]}decodeMultiple(r,o=null){try{return Bn.decode(r,o,!0)}catch(l){throw l instanceof j||l instanceof k?he.getNotFoundInstance():l}}static decode(r,o,l){const h=new Array,d=nt.detectMultiple(r,o,l);for(const m of d.getPoints()){const y=gt.decode(d.getBits(),m[4],m[5],m[6],m[7],Bn.getMinCodewordWidth(m),Bn.getMaxCodewordWidth(m)),A=new Ue(y.getText(),y.getRawBytes(),void 0,m,Me.PDF_417);A.putMetadata(Et.ERROR_CORRECTION_LEVEL,y.getECLevel());const S=y.getOther();S!=null&&A.putMetadata(Et.PDF417_EXTRA_METADATA,S),h.push(A)}return h.map(m=>m)}static getMaxWidth(r,o){return r==null||o==null?0:Math.trunc(Math.abs(r.getX()-o.getX()))}static getMinWidth(r,o){return r==null||o==null?K.MAX_VALUE:Math.trunc(Math.abs(r.getX()-o.getX()))}static getMaxCodewordWidth(r){return Math.floor(Math.max(Math.max(Bn.getMaxWidth(r[0],r[4]),Bn.getMaxWidth(r[6],r[2])*Ze.MODULES_IN_CODEWORD/Ze.MODULES_IN_STOP_PATTERN),Math.max(Bn.getMaxWidth(r[1],r[5]),Bn.getMaxWidth(r[7],r[3])*Ze.MODULES_IN_CODEWORD/Ze.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(r){return Math.floor(Math.min(Math.min(Bn.getMinWidth(r[0],r[4]),Bn.getMinWidth(r[6],r[2])*Ze.MODULES_IN_CODEWORD/Ze.MODULES_IN_STOP_PATTERN),Math.min(Bn.getMinWidth(r[1],r[5]),Bn.getMinWidth(r[7],r[3])*Ze.MODULES_IN_CODEWORD/Ze.MODULES_IN_STOP_PATTERN)))}reset(){}}class ta extends E{}ta.kind="ReaderException";class Oo{constructor(r,o){this.verbose=r===!0,o&&this.setHints(o)}decode(r,o){return o&&this.setHints(o),this.decodeInternal(r)}decodeWithState(r){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(r)}setHints(r){this.hints=r;const o=!a(r)&&r.get(ke.TRY_HARDER)===!0,l=a(r)?null:r.get(ke.POSSIBLE_FORMATS),h=new Array;if(!a(l)){const d=l.some(m=>m===Me.UPC_A||m===Me.UPC_E||m===Me.EAN_13||m===Me.EAN_8||m===Me.CODABAR||m===Me.CODE_39||m===Me.CODE_93||m===Me.CODE_128||m===Me.ITF||m===Me.RSS_14||m===Me.RSS_EXPANDED);d&&!o&&h.push(new Mi(r,this.verbose)),l.includes(Me.QR_CODE)&&h.push(new $i),l.includes(Me.DATA_MATRIX)&&h.push(new Wi),l.includes(Me.AZTEC)&&h.push(new ps),l.includes(Me.PDF_417)&&h.push(new Bn),d&&o&&h.push(new Mi(r,this.verbose))}h.length===0&&(o||h.push(new Mi(r,this.verbose)),h.push(new $i),h.push(new Wi),h.push(new ps),h.push(new Bn),o&&h.push(new Mi(r,this.verbose))),this.readers=h}reset(){if(this.readers!==null)for(const r of this.readers)r.reset()}decodeInternal(r){if(this.readers===null)throw new ta("No readers where selected, nothing can be read.");for(const o of this.readers)try{return o.decode(r,this.hints)}catch(l){if(l instanceof ta)continue}throw new he("No MultiFormat Readers were able to detect the code.")}}class Zr extends Be{constructor(r=null,o=500){const l=new Oo;l.setHints(r),super(l,o)}decodeBitmap(r){return this.reader.decodeWithState(r)}}class cl extends Be{constructor(r=500){super(new Bn,r)}}class ul extends Be{constructor(r=500){super(new $i,r)}}var ka;(function(L){L[L.ERROR_CORRECTION=0]="ERROR_CORRECTION",L[L.CHARACTER_SET=1]="CHARACTER_SET",L[L.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",L[L.MIN_SIZE=3]="MIN_SIZE",L[L.MAX_SIZE=4]="MAX_SIZE",L[L.MARGIN=5]="MARGIN",L[L.PDF417_COMPACT=6]="PDF417_COMPACT",L[L.PDF417_COMPACTION=7]="PDF417_COMPACTION",L[L.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",L[L.AZTEC_LAYERS=9]="AZTEC_LAYERS",L[L.QR_VERSION=10]="QR_VERSION"})(ka||(ka={}));var Pn=ka;class Jr{constructor(r){this.field=r,this.cachedGenerators=[],this.cachedGenerators.push(new En(r,Int32Array.from([1])))}buildGenerator(r){const o=this.cachedGenerators;if(r>=o.length){let l=o[o.length-1];const h=this.field;for(let d=o.length;d<=r;d++){const m=l.multiply(new En(h,Int32Array.from([1,h.exp(d-1+h.getGeneratorBase())])));o.push(m),l=m}}return o[r]}encode(r,o){if(o===0)throw new I("No error correction bytes");const l=r.length-o;if(l<=0)throw new I("No data bytes provided");const h=this.buildGenerator(o),d=new Int32Array(l);Q.arraycopy(r,0,d,0,l);let m=new En(this.field,d);m=m.multiplyByMonomial(o,1);const A=m.divide(h)[1].getCoefficients(),S=o-A.length;for(let R=0;R<S;R++)r[l+R]=0;Q.arraycopy(A,0,r,l+S,A.length)}}class It{constructor(){}static applyMaskPenaltyRule1(r){return It.applyMaskPenaltyRule1Internal(r,!0)+It.applyMaskPenaltyRule1Internal(r,!1)}static applyMaskPenaltyRule2(r){let o=0;const l=r.getArray(),h=r.getWidth(),d=r.getHeight();for(let m=0;m<d-1;m++){const y=l[m];for(let A=0;A<h-1;A++){const S=y[A];S===y[A+1]&&S===l[m+1][A]&&S===l[m+1][A+1]&&o++}}return It.N2*o}static applyMaskPenaltyRule3(r){let o=0;const l=r.getArray(),h=r.getWidth(),d=r.getHeight();for(let m=0;m<d;m++)for(let y=0;y<h;y++){const A=l[m];y+6<h&&A[y]===1&&A[y+1]===0&&A[y+2]===1&&A[y+3]===1&&A[y+4]===1&&A[y+5]===0&&A[y+6]===1&&(It.isWhiteHorizontal(A,y-4,y)||It.isWhiteHorizontal(A,y+7,y+11))&&o++,m+6<d&&l[m][y]===1&&l[m+1][y]===0&&l[m+2][y]===1&&l[m+3][y]===1&&l[m+4][y]===1&&l[m+5][y]===0&&l[m+6][y]===1&&(It.isWhiteVertical(l,y,m-4,m)||It.isWhiteVertical(l,y,m+7,m+11))&&o++}return o*It.N3}static isWhiteHorizontal(r,o,l){o=Math.max(o,0),l=Math.min(l,r.length);for(let h=o;h<l;h++)if(r[h]===1)return!1;return!0}static isWhiteVertical(r,o,l,h){l=Math.max(l,0),h=Math.min(h,r.length);for(let d=l;d<h;d++)if(r[d][o]===1)return!1;return!0}static applyMaskPenaltyRule4(r){let o=0;const l=r.getArray(),h=r.getWidth(),d=r.getHeight();for(let A=0;A<d;A++){const S=l[A];for(let R=0;R<h;R++)S[R]===1&&o++}const m=r.getHeight()*r.getWidth();return Math.floor(Math.abs(o*2-m)*10/m)*It.N4}static getDataMaskBit(r,o,l){let h,d;switch(r){case 0:h=l+o&1;break;case 1:h=l&1;break;case 2:h=o%3;break;case 3:h=(l+o)%3;break;case 4:h=Math.floor(l/2)+Math.floor(o/3)&1;break;case 5:d=l*o,h=(d&1)+d%3;break;case 6:d=l*o,h=(d&1)+d%3&1;break;case 7:d=l*o,h=d%3+(l+o&1)&1;break;default:throw new I("Invalid mask pattern: "+r)}return h===0}static applyMaskPenaltyRule1Internal(r,o){let l=0;const h=o?r.getHeight():r.getWidth(),d=o?r.getWidth():r.getHeight(),m=r.getArray();for(let y=0;y<h;y++){let A=0,S=-1;for(let R=0;R<d;R++){const B=o?m[y][R]:m[R][y];B===S?A++:(A>=5&&(l+=It.N1+(A-5)),A=1,S=B)}A>=5&&(l+=It.N1+(A-5))}return l}}It.N1=3,It.N2=3,It.N3=40,It.N4=10;class na{constructor(r,o){this.width=r,this.height=o;const l=new Array(o);for(let h=0;h!==o;h++)l[h]=new Uint8Array(r);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(r,o){return this.bytes[o][r]}getArray(){return this.bytes}setNumber(r,o,l){this.bytes[o][r]=l}setBoolean(r,o,l){this.bytes[o][r]=l?1:0}clear(r){for(const o of this.bytes)Ee.fill(o,r)}equals(r){if(!(r instanceof na))return!1;const o=r;if(this.width!==o.width||this.height!==o.height)return!1;for(let l=0,h=this.height;l<h;++l){const d=this.bytes[l],m=o.bytes[l];for(let y=0,A=this.width;y<A;++y)if(d[y]!==m[y])return!1}return!0}toString(){const r=new X;for(let o=0,l=this.height;o<l;++o){const h=this.bytes[o];for(let d=0,m=this.width;d<m;++d)switch(h[d]){case 0:r.append(" 0");break;case 1:r.append(" 1");break;default:r.append("  ");break}r.append(`
`)}return r.toString()}}class $r{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const r=new X;return r.append(`<<
`),r.append(" mode: "),r.append(this.mode?this.mode.toString():"null"),r.append(`
 ecLevel: `),r.append(this.ecLevel?this.ecLevel.toString():"null"),r.append(`
 version: `),r.append(this.version?this.version.toString():"null"),r.append(`
 maskPattern: `),r.append(this.maskPattern.toString()),this.matrix?(r.append(`
 matrix:
`),r.append(this.matrix.toString())):r.append(`
 matrix: null
`),r.append(`>>
`),r.toString()}setMode(r){this.mode=r}setECLevel(r){this.ecLevel=r}setVersion(r){this.version=r}setMaskPattern(r){this.maskPattern=r}setMatrix(r){this.matrix=r}static isValidMaskPattern(r){return r>=0&&r<$r.NUM_MASK_PATTERNS}}$r.NUM_MASK_PATTERNS=8;class Dt extends E{}Dt.kind="WriterException";class p{constructor(){}static clearMatrix(r){r.clear(255)}static buildMatrix(r,o,l,h,d){p.clearMatrix(d),p.embedBasicPatterns(l,d),p.embedTypeInfo(o,h,d),p.maybeEmbedVersionInfo(l,d),p.embedDataBits(r,h,d)}static embedBasicPatterns(r,o){p.embedPositionDetectionPatternsAndSeparators(o),p.embedDarkDotAtLeftBottomCorner(o),p.maybeEmbedPositionAdjustmentPatterns(r,o),p.embedTimingPatterns(o)}static embedTypeInfo(r,o,l){const h=new Se;p.makeTypeInfoBits(r,o,h);for(let d=0,m=h.getSize();d<m;++d){const y=h.get(h.getSize()-1-d),A=p.TYPE_INFO_COORDINATES[d],S=A[0],R=A[1];if(l.setBoolean(S,R,y),d<8){const B=l.getWidth()-d-1;l.setBoolean(B,8,y)}else{const P=l.getHeight()-7+(d-8);l.setBoolean(8,P,y)}}}static maybeEmbedVersionInfo(r,o){if(r.getVersionNumber()<7)return;const l=new Se;p.makeVersionInfoBits(r,l);let h=17;for(let d=0;d<6;++d)for(let m=0;m<3;++m){const y=l.get(h);h--,o.setBoolean(d,o.getHeight()-11+m,y),o.setBoolean(o.getHeight()-11+m,d,y)}}static embedDataBits(r,o,l){let h=0,d=-1,m=l.getWidth()-1,y=l.getHeight()-1;for(;m>0;){for(m===6&&(m-=1);y>=0&&y<l.getHeight();){for(let A=0;A<2;++A){const S=m-A;if(!p.isEmpty(l.get(S,y)))continue;let R;h<r.getSize()?(R=r.get(h),++h):R=!1,o!==255&&It.getDataMaskBit(o,S,y)&&(R=!R),l.setBoolean(S,y,R)}y+=d}d=-d,y+=d,m-=2}if(h!==r.getSize())throw new Dt("Not all bits consumed: "+h+"/"+r.getSize())}static findMSBSet(r){return 32-K.numberOfLeadingZeros(r)}static calculateBCHCode(r,o){if(o===0)throw new I("0 polynomial");const l=p.findMSBSet(o);for(r<<=l-1;p.findMSBSet(r)>=l;)r^=o<<p.findMSBSet(r)-l;return r}static makeTypeInfoBits(r,o,l){if(!$r.isValidMaskPattern(o))throw new Dt("Invalid mask pattern");const h=r.getBits()<<3|o;l.appendBits(h,5);const d=p.calculateBCHCode(h,p.TYPE_INFO_POLY);l.appendBits(d,10);const m=new Se;if(m.appendBits(p.TYPE_INFO_MASK_PATTERN,15),l.xor(m),l.getSize()!==15)throw new Dt("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(r,o){o.appendBits(r.getVersionNumber(),6);const l=p.calculateBCHCode(r.getVersionNumber(),p.VERSION_INFO_POLY);if(o.appendBits(l,12),o.getSize()!==18)throw new Dt("should not happen but we got: "+o.getSize())}static isEmpty(r){return r===255}static embedTimingPatterns(r){for(let o=8;o<r.getWidth()-8;++o){const l=(o+1)%2;p.isEmpty(r.get(o,6))&&r.setNumber(o,6,l),p.isEmpty(r.get(6,o))&&r.setNumber(6,o,l)}}static embedDarkDotAtLeftBottomCorner(r){if(r.get(8,r.getHeight()-8)===0)throw new Dt;r.setNumber(8,r.getHeight()-8,1)}static embedHorizontalSeparationPattern(r,o,l){for(let h=0;h<8;++h){if(!p.isEmpty(l.get(r+h,o)))throw new Dt;l.setNumber(r+h,o,0)}}static embedVerticalSeparationPattern(r,o,l){for(let h=0;h<7;++h){if(!p.isEmpty(l.get(r,o+h)))throw new Dt;l.setNumber(r,o+h,0)}}static embedPositionAdjustmentPattern(r,o,l){for(let h=0;h<5;++h){const d=p.POSITION_ADJUSTMENT_PATTERN[h];for(let m=0;m<5;++m)l.setNumber(r+m,o+h,d[m])}}static embedPositionDetectionPattern(r,o,l){for(let h=0;h<7;++h){const d=p.POSITION_DETECTION_PATTERN[h];for(let m=0;m<7;++m)l.setNumber(r+m,o+h,d[m])}}static embedPositionDetectionPatternsAndSeparators(r){const o=p.POSITION_DETECTION_PATTERN[0].length;p.embedPositionDetectionPattern(0,0,r),p.embedPositionDetectionPattern(r.getWidth()-o,0,r),p.embedPositionDetectionPattern(0,r.getWidth()-o,r);const l=8;p.embedHorizontalSeparationPattern(0,l-1,r),p.embedHorizontalSeparationPattern(r.getWidth()-l,l-1,r),p.embedHorizontalSeparationPattern(0,r.getWidth()-l,r);const h=7;p.embedVerticalSeparationPattern(h,0,r),p.embedVerticalSeparationPattern(r.getHeight()-h-1,0,r),p.embedVerticalSeparationPattern(h,r.getHeight()-h,r)}static maybeEmbedPositionAdjustmentPatterns(r,o){if(r.getVersionNumber()<2)return;const l=r.getVersionNumber()-1,h=p.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let d=0,m=h.length;d!==m;d++){const y=h[d];if(y>=0)for(let A=0;A!==m;A++){const S=h[A];S>=0&&p.isEmpty(o.get(S,y))&&p.embedPositionAdjustmentPattern(S-2,y-2,o)}}}}p.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),p.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),p.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),p.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),p.VERSION_INFO_POLY=7973,p.TYPE_INFO_POLY=1335,p.TYPE_INFO_MASK_PATTERN=21522;class N{constructor(r,o){this.dataBytes=r,this.errorCorrectionBytes=o}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class D{constructor(){}static calculateMaskPenalty(r){return It.applyMaskPenaltyRule1(r)+It.applyMaskPenaltyRule2(r)+It.applyMaskPenaltyRule3(r)+It.applyMaskPenaltyRule4(r)}static encode(r,o,l=null){let h=D.DEFAULT_BYTE_MODE_ENCODING;const d=l!==null&&l.get(Pn.CHARACTER_SET)!==void 0;d&&(h=l.get(Pn.CHARACTER_SET).toString());const m=this.chooseMode(r,h),y=new Se;if(m===Ke.BYTE&&(d||D.DEFAULT_BYTE_MODE_ENCODING!==h)){const De=V.getCharacterSetECIByName(h);De!==void 0&&this.appendECI(De,y)}this.appendModeInfo(m,y);const A=new Se;this.appendBytes(r,m,A,h);let S;if(l!==null&&l.get(Pn.QR_VERSION)!==void 0){const De=Number.parseInt(l.get(Pn.QR_VERSION).toString(),10);S=Ye.getVersionForNumber(De);const Re=this.calculateBitsNeeded(m,y,A,S);if(!this.willFit(Re,S,o))throw new Dt("Data too big for requested version")}else S=this.recommendVersion(o,m,y,A);const R=new Se;R.appendBitArray(y);const B=m===Ke.BYTE?A.getSizeInBytes():r.length;this.appendLengthInfo(B,S,m,R),R.appendBitArray(A);const P=S.getECBlocksForLevel(o),Y=S.getTotalCodewords()-P.getTotalECCodewords();this.terminateBits(Y,R);const $=this.interleaveWithECBytes(R,S.getTotalCodewords(),Y,P.getNumBlocks()),ee=new $r;ee.setECLevel(o),ee.setMode(m),ee.setVersion(S);const le=S.getDimensionForVersion(),xe=new na(le,le),Le=this.chooseMaskPattern($,o,S,xe);return ee.setMaskPattern(Le),p.buildMatrix($,o,S,Le,xe),ee.setMatrix(xe),ee}static recommendVersion(r,o,l,h){const d=this.calculateBitsNeeded(o,l,h,Ye.getVersionForNumber(1)),m=this.chooseVersion(d,r),y=this.calculateBitsNeeded(o,l,h,m);return this.chooseVersion(y,r)}static calculateBitsNeeded(r,o,l,h){return o.getSize()+r.getCharacterCountBits(h)+l.getSize()}static getAlphanumericCode(r){return r<D.ALPHANUMERIC_TABLE.length?D.ALPHANUMERIC_TABLE[r]:-1}static chooseMode(r,o=null){if(V.SJIS.getName()===o&&this.isOnlyDoubleByteKanji(r))return Ke.KANJI;let l=!1,h=!1;for(let d=0,m=r.length;d<m;++d){const y=r.charAt(d);if(D.isDigit(y))l=!0;else if(this.getAlphanumericCode(y.charCodeAt(0))!==-1)h=!0;else return Ke.BYTE}return h?Ke.ALPHANUMERIC:l?Ke.NUMERIC:Ke.BYTE}static isOnlyDoubleByteKanji(r){let o;try{o=W.encode(r,V.SJIS)}catch{return!1}const l=o.length;if(l%2!==0)return!1;for(let h=0;h<l;h+=2){const d=o[h]&255;if((d<129||d>159)&&(d<224||d>235))return!1}return!0}static chooseMaskPattern(r,o,l,h){let d=Number.MAX_SAFE_INTEGER,m=-1;for(let y=0;y<$r.NUM_MASK_PATTERNS;y++){p.buildMatrix(r,o,l,y,h);let A=this.calculateMaskPenalty(h);A<d&&(d=A,m=y)}return m}static chooseVersion(r,o){for(let l=1;l<=40;l++){const h=Ye.getVersionForNumber(l);if(D.willFit(r,h,o))return h}throw new Dt("Data too big")}static willFit(r,o,l){const h=o.getTotalCodewords(),m=o.getECBlocksForLevel(l).getTotalECCodewords(),y=h-m,A=(r+7)/8;return y>=A}static terminateBits(r,o){const l=r*8;if(o.getSize()>l)throw new Dt("data bits cannot fit in the QR Code"+o.getSize()+" > "+l);for(let m=0;m<4&&o.getSize()<l;++m)o.appendBit(!1);const h=o.getSize()&7;if(h>0)for(let m=h;m<8;m++)o.appendBit(!1);const d=r-o.getSizeInBytes();for(let m=0;m<d;++m)o.appendBits((m&1)===0?236:17,8);if(o.getSize()!==l)throw new Dt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(r,o,l,h,d,m){if(h>=l)throw new Dt("Block ID too large");const y=r%l,A=l-y,S=Math.floor(r/l),R=S+1,B=Math.floor(o/l),P=B+1,Y=S-B,$=R-P;if(Y!==$)throw new Dt("EC bytes mismatch");if(l!==A+y)throw new Dt("RS blocks mismatch");if(r!==(B+Y)*A+(P+$)*y)throw new Dt("Total bytes mismatch");h<A?(d[0]=B,m[0]=Y):(d[0]=P,m[0]=$)}static interleaveWithECBytes(r,o,l,h){if(r.getSizeInBytes()!==l)throw new Dt("Number of bits and data bytes does not match");let d=0,m=0,y=0;const A=new Array;for(let R=0;R<h;++R){const B=new Int32Array(1),P=new Int32Array(1);D.getNumDataBytesAndNumECBytesForBlockID(o,l,h,R,B,P);const Y=B[0],$=new Uint8Array(Y);r.toBytes(8*d,$,0,Y);const ee=D.generateECBytes($,P[0]);A.push(new N($,ee)),m=Math.max(m,Y),y=Math.max(y,ee.length),d+=B[0]}if(l!==d)throw new Dt("Data bytes does not match offset");const S=new Se;for(let R=0;R<m;++R)for(const B of A){const P=B.getDataBytes();R<P.length&&S.appendBits(P[R],8)}for(let R=0;R<y;++R)for(const B of A){const P=B.getErrorCorrectionBytes();R<P.length&&S.appendBits(P[R],8)}if(o!==S.getSizeInBytes())throw new Dt("Interleaving error: "+o+" and "+S.getSizeInBytes()+" differ.");return S}static generateECBytes(r,o){const l=r.length,h=new Int32Array(l+o);for(let m=0;m<l;m++)h[m]=r[m]&255;new Jr(xt.QR_CODE_FIELD_256).encode(h,o);const d=new Uint8Array(o);for(let m=0;m<o;m++)d[m]=h[l+m];return d}static appendModeInfo(r,o){o.appendBits(r.getBits(),4)}static appendLengthInfo(r,o,l,h){const d=l.getCharacterCountBits(o);if(r>=1<<d)throw new Dt(r+" is bigger than "+((1<<d)-1));h.appendBits(r,d)}static appendBytes(r,o,l,h){switch(o){case Ke.NUMERIC:D.appendNumericBytes(r,l);break;case Ke.ALPHANUMERIC:D.appendAlphanumericBytes(r,l);break;case Ke.BYTE:D.append8BitBytes(r,l,h);break;case Ke.KANJI:D.appendKanjiBytes(r,l);break;default:throw new Dt("Invalid mode: "+o)}}static getDigit(r){return r.charCodeAt(0)-48}static isDigit(r){const o=D.getDigit(r);return o>=0&&o<=9}static appendNumericBytes(r,o){const l=r.length;let h=0;for(;h<l;){const d=D.getDigit(r.charAt(h));if(h+2<l){const m=D.getDigit(r.charAt(h+1)),y=D.getDigit(r.charAt(h+2));o.appendBits(d*100+m*10+y,10),h+=3}else if(h+1<l){const m=D.getDigit(r.charAt(h+1));o.appendBits(d*10+m,7),h+=2}else o.appendBits(d,4),h++}}static appendAlphanumericBytes(r,o){const l=r.length;let h=0;for(;h<l;){const d=D.getAlphanumericCode(r.charCodeAt(h));if(d===-1)throw new Dt;if(h+1<l){const m=D.getAlphanumericCode(r.charCodeAt(h+1));if(m===-1)throw new Dt;o.appendBits(d*45+m,11),h+=2}else o.appendBits(d,6),h++}}static append8BitBytes(r,o,l){let h;try{h=W.encode(r,l)}catch(d){throw new Dt(d)}for(let d=0,m=h.length;d!==m;d++){const y=h[d];o.appendBits(y,8)}}static appendKanjiBytes(r,o){let l;try{l=W.encode(r,V.SJIS)}catch(d){throw new Dt(d)}const h=l.length;for(let d=0;d<h;d+=2){const m=l[d]&255,y=l[d+1]&255,A=m<<8&4294967295|y;let S=-1;if(A>=33088&&A<=40956?S=A-33088:A>=57408&&A<=60351&&(S=A-49472),S===-1)throw new Dt("Invalid byte sequence");const R=(S>>8)*192+(S&255);o.appendBits(R,13)}}static appendECI(r,o){o.appendBits(Ke.ECI.getBits(),4),o.appendBits(r.getValue(),8)}}D.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),D.DEFAULT_BYTE_MODE_ENCODING=V.UTF8.getName();class F{write(r,o,l,h=null){if(r.length===0)throw new I("Found empty contents");if(o<0||l<0)throw new I("Requested dimensions are too small: "+o+"x"+l);let d=At.L,m=F.QUIET_ZONE_SIZE;h!==null&&(h.get(Pn.ERROR_CORRECTION)!==void 0&&(d=At.fromString(h.get(Pn.ERROR_CORRECTION).toString())),h.get(Pn.MARGIN)!==void 0&&(m=Number.parseInt(h.get(Pn.MARGIN).toString(),10)));const y=D.encode(r,d,h);return this.renderResult(y,o,l,m)}writeToDom(r,o,l,h,d=null){typeof r=="string"&&(r=document.querySelector(r));const m=this.write(o,l,h,d);r&&r.appendChild(m)}renderResult(r,o,l,h){const d=r.getMatrix();if(d===null)throw new oi;const m=d.getWidth(),y=d.getHeight(),A=m+h*2,S=y+h*2,R=Math.max(o,A),B=Math.max(l,S),P=Math.min(Math.floor(R/A),Math.floor(B/S)),Y=Math.floor((R-m*P)/2),$=Math.floor((B-y*P)/2),ee=this.createSVGElement(R,B);for(let le=0,xe=$;le<y;le++,xe+=P)for(let Le=0,De=Y;Le<m;Le++,De+=P)if(d.get(Le,le)===1){const Re=this.createSvgRectElement(De,xe,P,P);ee.appendChild(Re)}return ee}createSVGElement(r,o){const l=document.createElementNS(F.SVG_NS,"svg");return l.setAttributeNS(null,"height",r.toString()),l.setAttributeNS(null,"width",o.toString()),l}createSvgRectElement(r,o,l,h){const d=document.createElementNS(F.SVG_NS,"rect");return d.setAttributeNS(null,"x",r.toString()),d.setAttributeNS(null,"y",o.toString()),d.setAttributeNS(null,"height",l.toString()),d.setAttributeNS(null,"width",h.toString()),d.setAttributeNS(null,"fill","#000000"),d}}F.QUIET_ZONE_SIZE=4,F.SVG_NS="http://www.w3.org/2000/svg";class oe{encode(r,o,l,h,d){if(r.length===0)throw new I("Found empty contents");if(o!==Me.QR_CODE)throw new I("Can only encode QR_CODE, but got "+o);if(l<0||h<0)throw new I(`Requested dimensions are too small: ${l}x${h}`);let m=At.L,y=oe.QUIET_ZONE_SIZE;d!==null&&(d.get(Pn.ERROR_CORRECTION)!==void 0&&(m=At.fromString(d.get(Pn.ERROR_CORRECTION).toString())),d.get(Pn.MARGIN)!==void 0&&(y=Number.parseInt(d.get(Pn.MARGIN).toString(),10)));const A=D.encode(r,m,d);return oe.renderResult(A,l,h,y)}static renderResult(r,o,l,h){const d=r.getMatrix();if(d===null)throw new oi;const m=d.getWidth(),y=d.getHeight(),A=m+h*2,S=y+h*2,R=Math.max(o,A),B=Math.max(l,S),P=Math.min(Math.floor(R/A),Math.floor(B/S)),Y=Math.floor((R-m*P)/2),$=Math.floor((B-y*P)/2),ee=new $e(R,B);for(let le=0,xe=$;le<y;le++,xe+=P)for(let Le=0,De=Y;Le<m;Le++,De+=P)d.get(Le,le)===1&&ee.setRegion(De,xe,P,P);return ee}}oe.QUIET_ZONE_SIZE=4;class ye{encode(r,o,l,h,d){let m;switch(o){case Me.QR_CODE:m=new oe;break;default:throw new I("No encoder available for format "+o)}return m.encode(r,o,l,h,d)}}class Pe extends Ge{constructor(r,o,l,h,d,m,y,A){if(super(m,y),this.yuvData=r,this.dataWidth=o,this.dataHeight=l,this.left=h,this.top=d,h+m>o||d+y>l)throw new I("Crop rectangle does not fit within image data.");A&&this.reverseHorizontal(m,y)}getRow(r,o){if(r<0||r>=this.getHeight())throw new I("Requested row is outside the image: "+r);const l=this.getWidth();(o==null||o.length<l)&&(o=new Uint8ClampedArray(l));const h=(r+this.top)*this.dataWidth+this.left;return Q.arraycopy(this.yuvData,h,o,0,l),o}getMatrix(){const r=this.getWidth(),o=this.getHeight();if(r===this.dataWidth&&o===this.dataHeight)return this.yuvData;const l=r*o,h=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return Q.arraycopy(this.yuvData,d,h,0,l),h;for(let m=0;m<o;m++){const y=m*r;Q.arraycopy(this.yuvData,d,h,y,r),d+=this.dataWidth}return h}isCropSupported(){return!0}crop(r,o,l,h){return new Pe(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+o,l,h,!1)}renderThumbnail(){const r=this.getWidth()/Pe.THUMBNAIL_SCALE_FACTOR,o=this.getHeight()/Pe.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(r*o),h=this.yuvData;let d=this.top*this.dataWidth+this.left;for(let m=0;m<o;m++){const y=m*r;for(let A=0;A<r;A++){const S=h[d+A*Pe.THUMBNAIL_SCALE_FACTOR]&255;l[y+A]=4278190080|S*65793}d+=this.dataWidth*Pe.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/Pe.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Pe.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(r,o){const l=this.yuvData;for(let h=0,d=this.top*this.dataWidth+this.left;h<o;h++,d+=this.dataWidth){const m=d+r/2;for(let y=d,A=d+r-1;y<m;y++,A--){const S=l[y];l[y]=l[A],l[A]=S}}}invert(){return new at(this)}}Pe.THUMBNAIL_SCALE_FACTOR=2;class ct extends Ge{constructor(r,o,l,h,d,m,y){if(super(o,l),this.dataWidth=h,this.dataHeight=d,this.left=m,this.top=y,r.BYTES_PER_ELEMENT===4){const A=o*l,S=new Uint8ClampedArray(A);for(let R=0;R<A;R++){const B=r[R],P=B>>16&255,Y=B>>7&510,$=B&255;S[R]=(P+Y+$)/4&255}this.luminances=S}else this.luminances=r;if(h===void 0&&(this.dataWidth=o),d===void 0&&(this.dataHeight=l),m===void 0&&(this.left=0),y===void 0&&(this.top=0),this.left+o>this.dataWidth||this.top+l>this.dataHeight)throw new I("Crop rectangle does not fit within image data.")}getRow(r,o){if(r<0||r>=this.getHeight())throw new I("Requested row is outside the image: "+r);const l=this.getWidth();(o==null||o.length<l)&&(o=new Uint8ClampedArray(l));const h=(r+this.top)*this.dataWidth+this.left;return Q.arraycopy(this.luminances,h,o,0,l),o}getMatrix(){const r=this.getWidth(),o=this.getHeight();if(r===this.dataWidth&&o===this.dataHeight)return this.luminances;const l=r*o,h=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return Q.arraycopy(this.luminances,d,h,0,l),h;for(let m=0;m<o;m++){const y=m*r;Q.arraycopy(this.luminances,d,h,y,r),d+=this.dataWidth}return h}isCropSupported(){return!0}crop(r,o,l,h){return new ct(this.luminances,l,h,this.dataWidth,this.dataHeight,this.left+r,this.top+o)}invert(){return new at(this)}}class kn extends V{static forName(r){return this.getCharacterSetECIByName(r)}}class Ht{}Ht.ISO_8859_1=V.ISO8859_1;class Tn{isCompact(){return this.compact}setCompact(r){this.compact=r}getSize(){return this.size}setSize(r){this.size=r}getLayers(){return this.layers}setLayers(r){this.layers=r}getCodeWords(){return this.codeWords}setCodeWords(r){this.codeWords=r}getMatrix(){return this.matrix}setMatrix(r){this.matrix=r}}class lr{static singletonList(r){return[r]}static min(r,o){return r.sort(o)[0]}}class es{constructor(r){this.previous=r}getPrevious(){return this.previous}}class Si extends es{constructor(r,o,l){super(r),this.value=o,this.bitCount=l}appendTo(r,o){r.appendBits(this.value,this.bitCount)}add(r,o){return new Si(this,r,o)}addBinaryShift(r,o){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Si(this,r,o)}toString(){let r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+K.toBinaryString(r|1<<this.bitCount).substring(1)+">"}}class cr extends Si{constructor(r,o,l){super(r,0,0),this.binaryShiftStart=o,this.binaryShiftByteCount=l}appendTo(r,o){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):l===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(o[this.binaryShiftStart+l],8)}addBinaryShift(r,o){return new cr(this,r,o)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function ia(L,r,o){return new cr(L,r,o)}function ts(L,r,o){return new Si(L,r,o)}const Ua=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Ls=0,hl=1,Er=2,cc=3,Br=4,Do=new Si(null,0,0),ra=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function $f(L){for(let r of L)Ee.fill(r,-1);return L[Ls][Br]=0,L[hl][Br]=0,L[hl][Ls]=28,L[cc][Br]=0,L[Er][Br]=0,L[Er][Ls]=15,L}const Mo=$f(Ee.createInt32Array(6,6));class Pr{constructor(r,o,l,h){this.token=r,this.mode=o,this.binaryShiftByteCount=l,this.bitCount=h}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(r,o){let l=this.bitCount,h=this.token;if(r!==this.mode){let m=ra[this.mode][r];h=ts(h,m&65535,m>>16),l+=m>>16}let d=r===Er?4:5;return h=ts(h,o,d),new Pr(h,r,0,l+d)}shiftAndAppend(r,o){let l=this.token,h=this.mode===Er?4:5;return l=ts(l,Mo[this.mode][r],h),l=ts(l,o,5),new Pr(l,this.mode,0,this.bitCount+h+5)}addBinaryShiftChar(r){let o=this.token,l=this.mode,h=this.bitCount;if(this.mode===Br||this.mode===Er){let y=ra[l][Ls];o=ts(o,y&65535,y>>16),h+=y>>16,l=Ls}let d=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,m=new Pr(o,l,this.binaryShiftByteCount+1,h+d);return m.binaryShiftByteCount===2078&&(m=m.endBinaryShift(r+1)),m}endBinaryShift(r){if(this.binaryShiftByteCount===0)return this;let o=this.token;return o=ia(o,r-this.binaryShiftByteCount,this.binaryShiftByteCount),new Pr(o,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(r){let o=this.bitCount+(ra[this.mode][r.mode]>>16);return this.binaryShiftByteCount<r.binaryShiftByteCount?o+=Pr.calculateBinaryShiftCost(r)-Pr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>r.binaryShiftByteCount&&r.binaryShiftByteCount>0&&(o+=10),o<=r.bitCount}toBitArray(r){let o=[];for(let h=this.endBinaryShift(r.length).token;h!==null;h=h.getPrevious())o.unshift(h);let l=new Se;for(const h of o)h.appendTo(l,r);return l}toString(){return J.format("%s bits=%d bytes=%d",Ua[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(r){return r.binaryShiftByteCount>62?21:r.binaryShiftByteCount>31?20:r.binaryShiftByteCount>0?10:0}}Pr.INITIAL_STATE=new Pr(Do,Ls,0,0);function vu(L){const r=J.getCharCode(" "),o=J.getCharCode("."),l=J.getCharCode(",");L[Ls][r]=1;const h=J.getCharCode("Z"),d=J.getCharCode("A");for(let P=d;P<=h;P++)L[Ls][P]=P-d+2;L[hl][r]=1;const m=J.getCharCode("z"),y=J.getCharCode("a");for(let P=y;P<=m;P++)L[hl][P]=P-y+2;L[Er][r]=1;const A=J.getCharCode("9"),S=J.getCharCode("0");for(let P=S;P<=A;P++)L[Er][P]=P-S+2;L[Er][l]=12,L[Er][o]=13;const R=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let P=0;P<R.length;P++)L[cc][J.getCharCode(R[P])]=P;const B=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let P=0;P<B.length;P++)J.getCharCode(B[P])>0&&(L[Br][J.getCharCode(B[P])]=P);return L}const Lo=vu(Ee.createInt32Array(5,256));class sa{constructor(r){this.text=r}encode(){const r=J.getCharCode(" "),o=J.getCharCode(`
`);let l=lr.singletonList(Pr.INITIAL_STATE);for(let d=0;d<this.text.length;d++){let m,y=d+1<this.text.length?this.text[d+1]:0;switch(this.text[d]){case J.getCharCode("\r"):m=y===o?2:0;break;case J.getCharCode("."):m=y===r?3:0;break;case J.getCharCode(","):m=y===r?4:0;break;case J.getCharCode(":"):m=y===r?5:0;break;default:m=0}m>0?(l=sa.updateStateListForPair(l,d,m),d++):l=this.updateStateListForChar(l,d)}return lr.min(l,(d,m)=>d.getBitCount()-m.getBitCount()).toBitArray(this.text)}updateStateListForChar(r,o){const l=[];for(let h of r)this.updateStateForChar(h,o,l);return sa.simplifyStates(l)}updateStateForChar(r,o,l){let h=this.text[o]&255,d=Lo[r.getMode()][h]>0,m=null;for(let y=0;y<=Br;y++){let A=Lo[y][h];if(A>0){if(m==null&&(m=r.endBinaryShift(o)),!d||y===r.getMode()||y===Er){const S=m.latchAndAppend(y,A);l.push(S)}if(!d&&Mo[r.getMode()][y]>=0){const S=m.shiftAndAppend(y,A);l.push(S)}}}if(r.getBinaryShiftByteCount()>0||Lo[r.getMode()][h]===0){let y=r.addBinaryShiftChar(o);l.push(y)}}static updateStateListForPair(r,o,l){const h=[];for(let d of r)this.updateStateForPair(d,o,l,h);return this.simplifyStates(h)}static updateStateForPair(r,o,l,h){let d=r.endBinaryShift(o);if(h.push(d.latchAndAppend(Br,l)),r.getMode()!==Br&&h.push(d.shiftAndAppend(Br,l)),l===3||l===4){let m=d.latchAndAppend(Er,16-l).latchAndAppend(Er,1);h.push(m)}if(r.getBinaryShiftByteCount()>0){let m=r.addBinaryShiftChar(o).addBinaryShiftChar(o+1);h.push(m)}}static simplifyStates(r){let o=[];for(const l of r){let h=!0;for(const d of o){if(d.isBetterThanOrEqualTo(l)){h=!1;break}l.isBetterThanOrEqualTo(d)&&(o=o.filter(m=>m!==d))}h&&o.push(l)}return o}}class kt{constructor(){}static encodeBytes(r){return kt.encode(r,kt.DEFAULT_EC_PERCENT,kt.DEFAULT_AZTEC_LAYERS)}static encode(r,o,l){let h=new sa(r).encode(),d=K.truncDivision(h.getSize()*o,100)+11,m=h.getSize()+d,y,A,S,R,B;if(l!==kt.DEFAULT_AZTEC_LAYERS){if(y=l<0,A=Math.abs(l),A>(y?kt.MAX_NB_BITS_COMPACT:kt.MAX_NB_BITS))throw new I(J.format("Illegal value %s for layers",l));S=kt.totalBitsInLayer(A,y),R=kt.WORD_SIZE[A];let Re=S-S%R;if(B=kt.stuffBits(h,R),B.getSize()+d>Re)throw new I("Data to large for user specified layer");if(y&&B.getSize()>R*64)throw new I("Data to large for user specified layer")}else{R=0,B=null;for(let Re=0;;Re++){if(Re>kt.MAX_NB_BITS)throw new I("Data too large for an Aztec code");if(y=Re<=3,A=y?Re+1:Re,S=kt.totalBitsInLayer(A,y),m>S)continue;(B==null||R!==kt.WORD_SIZE[A])&&(R=kt.WORD_SIZE[A],B=kt.stuffBits(h,R));let St=S-S%R;if(!(y&&B.getSize()>R*64)&&B.getSize()+d<=St)break}}let P=kt.generateCheckWords(B,S,R),Y=B.getSize()/R,$=kt.generateModeMessage(y,A,Y),ee=(y?11:14)+A*4,le=new Int32Array(ee),xe;if(y){xe=ee;for(let Re=0;Re<le.length;Re++)le[Re]=Re}else{xe=ee+1+2*K.truncDivision(K.truncDivision(ee,2)-1,15);let Re=K.truncDivision(ee,2),St=K.truncDivision(xe,2);for(let ut=0;ut<Re;ut++){let Wn=ut+K.truncDivision(ut,15);le[Re-ut-1]=St-Wn-1,le[Re+ut]=St+Wn+1}}let Le=new $e(xe);for(let Re=0,St=0;Re<A;Re++){let ut=(A-Re)*4+(y?9:12);for(let Wn=0;Wn<ut;Wn++){let _r=Wn*2;for(let Pi=0;Pi<2;Pi++)P.get(St+_r+Pi)&&Le.set(le[Re*2+Pi],le[Re*2+Wn]),P.get(St+ut*2+_r+Pi)&&Le.set(le[Re*2+Wn],le[ee-1-Re*2-Pi]),P.get(St+ut*4+_r+Pi)&&Le.set(le[ee-1-Re*2-Pi],le[ee-1-Re*2-Wn]),P.get(St+ut*6+_r+Pi)&&Le.set(le[ee-1-Re*2-Wn],le[Re*2+Pi])}St+=ut*8}if(kt.drawModeMessage(Le,y,xe,$),y)kt.drawBullsEye(Le,K.truncDivision(xe,2),5);else{kt.drawBullsEye(Le,K.truncDivision(xe,2),7);for(let Re=0,St=0;Re<K.truncDivision(ee,2)-1;Re+=15,St+=16)for(let ut=K.truncDivision(xe,2)&1;ut<xe;ut+=2)Le.set(K.truncDivision(xe,2)-St,ut),Le.set(K.truncDivision(xe,2)+St,ut),Le.set(ut,K.truncDivision(xe,2)-St),Le.set(ut,K.truncDivision(xe,2)+St)}let De=new Tn;return De.setCompact(y),De.setSize(xe),De.setLayers(A),De.setCodeWords(Y),De.setMatrix(Le),De}static drawBullsEye(r,o,l){for(let h=0;h<l;h+=2)for(let d=o-h;d<=o+h;d++)r.set(d,o-h),r.set(d,o+h),r.set(o-h,d),r.set(o+h,d);r.set(o-l,o-l),r.set(o-l+1,o-l),r.set(o-l,o-l+1),r.set(o+l,o-l),r.set(o+l,o-l+1),r.set(o+l,o+l-1)}static generateModeMessage(r,o,l){let h=new Se;return r?(h.appendBits(o-1,2),h.appendBits(l-1,6),h=kt.generateCheckWords(h,28,4)):(h.appendBits(o-1,5),h.appendBits(l-1,11),h=kt.generateCheckWords(h,40,4)),h}static drawModeMessage(r,o,l,h){let d=K.truncDivision(l,2);if(o)for(let m=0;m<7;m++){let y=d-3+m;h.get(m)&&r.set(y,d-5),h.get(m+7)&&r.set(d+5,y),h.get(20-m)&&r.set(y,d+5),h.get(27-m)&&r.set(d-5,y)}else for(let m=0;m<10;m++){let y=d-5+m+K.truncDivision(m,5);h.get(m)&&r.set(y,d-7),h.get(m+10)&&r.set(d+7,y),h.get(29-m)&&r.set(y,d+7),h.get(39-m)&&r.set(d-7,y)}}static generateCheckWords(r,o,l){let h=r.getSize()/l,d=new Jr(kt.getGF(l)),m=K.truncDivision(o,l),y=kt.bitsToWords(r,l,m);d.encode(y,m-h);let A=o%l,S=new Se;S.appendBits(0,A);for(const R of Array.from(y))S.appendBits(R,l);return S}static bitsToWords(r,o,l){let h=new Int32Array(l),d,m;for(d=0,m=r.getSize()/o;d<m;d++){let y=0;for(let A=0;A<o;A++)y|=r.get(d*o+A)?1<<o-A-1:0;h[d]=y}return h}static getGF(r){switch(r){case 4:return xt.AZTEC_PARAM;case 6:return xt.AZTEC_DATA_6;case 8:return xt.AZTEC_DATA_8;case 10:return xt.AZTEC_DATA_10;case 12:return xt.AZTEC_DATA_12;default:throw new I("Unsupported word size "+r)}}static stuffBits(r,o){let l=new Se,h=r.getSize(),d=(1<<o)-2;for(let m=0;m<h;m+=o){let y=0;for(let A=0;A<o;A++)(m+A>=h||r.get(m+A))&&(y|=1<<o-1-A);(y&d)===d?(l.appendBits(y&d,o),m--):(y&d)===0?(l.appendBits(y|1,o),m--):l.appendBits(y,o)}return l}static totalBitsInLayer(r,o){return((o?88:112)+16*r)*r}}kt.DEFAULT_EC_PERCENT=33,kt.DEFAULT_AZTEC_LAYERS=0,kt.MAX_NB_BITS=32,kt.MAX_NB_BITS_COMPACT=4,kt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Bo{encode(r,o,l,h){return this.encodeWithHints(r,o,l,h,null)}encodeWithHints(r,o,l,h,d){let m=Ht.ISO_8859_1,y=kt.DEFAULT_EC_PERCENT,A=kt.DEFAULT_AZTEC_LAYERS;return d!=null&&(d.has(Pn.CHARACTER_SET)&&(m=kn.forName(d.get(Pn.CHARACTER_SET).toString())),d.has(Pn.ERROR_CORRECTION)&&(y=K.parseInt(d.get(Pn.ERROR_CORRECTION).toString())),d.has(Pn.AZTEC_LAYERS)&&(A=K.parseInt(d.get(Pn.AZTEC_LAYERS).toString()))),Bo.encodeLayers(r,o,l,h,m,y,A)}static encodeLayers(r,o,l,h,d,m,y){if(o!==Me.AZTEC)throw new I("Can only encode AZTEC, but got "+o);let A=kt.encode(J.getBytes(r,d),m,y);return Bo.renderResult(A,l,h)}static renderResult(r,o,l){let h=r.getMatrix();if(h==null)throw new oi;let d=h.getWidth(),m=h.getHeight(),y=Math.max(o,d),A=Math.max(l,m),S=Math.min(y/d,A/m),R=(y-d*S)/2,B=(A-m*S)/2,P=new $e(y,A);for(let Y=0,$=B;Y<m;Y++,$+=S)for(let ee=0,le=R;ee<d;ee++,le+=S)h.get(ee,Y)&&P.setRegion(le,$,S,S);return P}}n.AbstractExpandedDecoder=Dn,n.ArgumentException=C,n.ArithmeticException=gr,n.AztecCode=Tn,n.AztecCodeReader=ps,n.AztecCodeWriter=Bo,n.AztecDecoder=zt,n.AztecDetector=Qs,n.AztecDetectorResult=Cs,n.AztecEncoder=kt,n.AztecHighLevelEncoder=sa,n.AztecPoint=ei,n.BarcodeFormat=Me,n.Binarizer=q,n.BinaryBitmap=M,n.BitArray=Se,n.BitMatrix=$e,n.BitSource=Ln,n.BrowserAztecCodeReader=Oa,n.BrowserBarcodeReader=Io,n.BrowserCodeReader=Be,n.BrowserDatamatrixCodeReader=Wr,n.BrowserMultiFormatReader=Zr,n.BrowserPDF417Reader=cl,n.BrowserQRCodeReader=ul,n.BrowserQRCodeSvgWriter=F,n.CharacterSetECI=V,n.ChecksumException=k,n.Code128Reader=Oe,n.Code39Reader=qt,n.DataMatrixDecodedBitStreamParser=Bi,n.DataMatrixReader=Wi,n.DecodeHintType=ke,n.DecoderResult=Yt,n.DefaultGridSampler=vs,n.DetectorResult=ms,n.EAN13Reader=sn,n.EncodeHintType=Pn,n.Exception=E,n.FormatException=j,n.GenericGF=xt,n.GenericGFPoly=En,n.GlobalHistogramBinarizer=me,n.GridSampler=Rr,n.GridSamplerInstance=pi,n.HTMLCanvasElementLuminanceSource=ft,n.HybridBinarizer=we,n.ITFReader=it,n.IllegalArgumentException=I,n.IllegalStateException=oi,n.InvertedLuminanceSource=at,n.LuminanceSource=Ge,n.MathUtils=We,n.MultiFormatOneDReader=Mi,n.MultiFormatReader=Oo,n.MultiFormatWriter=ye,n.NotFoundException=he,n.OneDReader=Xt,n.PDF417DecodedBitStreamParser=pe,n.PDF417DecoderErrorCorrection=Or,n.PDF417Reader=Bn,n.PDF417ResultMetadata=Es,n.PerspectiveTransform=li,n.PlanarYUVLuminanceSource=Pe,n.QRCodeByteMatrix=na,n.QRCodeDataMask=ti,n.QRCodeDecodedBitStreamParser=on,n.QRCodeDecoderErrorCorrectionLevel=At,n.QRCodeDecoderFormatInformation=jn,n.QRCodeEncoder=D,n.QRCodeEncoderQRCode=$r,n.QRCodeMaskUtil=It,n.QRCodeMatrixUtil=p,n.QRCodeMode=Ke,n.QRCodeReader=$i,n.QRCodeVersion=Ye,n.QRCodeWriter=oe,n.RGBLuminanceSource=ct,n.RSS14Reader=en,n.RSSExpandedReader=ve,n.ReaderException=ta,n.ReedSolomonDecoder=Xi,n.ReedSolomonEncoder=Jr,n.ReedSolomonException=ai,n.Result=Ue,n.ResultMetadataType=Et,n.ResultPoint=Fe,n.StringUtils=J,n.UnsupportedOperationException=te,n.VideoInputDevice=ne,n.WhiteRectangleDetector=hn,n.WriterException=Dt,n.ZXingArrays=Ee,n.ZXingCharset=kn,n.ZXingInteger=K,n.ZXingStandardCharsets=Ht,n.ZXingStringBuilder=X,n.ZXingStringEncoding=W,n.ZXingSystem=Q,n.createAbstractExpandedDecoder=Qi,Object.defineProperty(n,"__esModule",{value:!0})}))})(eu,eu.exports)),eu.exports}var Nn=UR();const VR=G1(Nn),jR=gb({__proto__:null,default:VR},[Nn]);var kE=(function(){function i(e,n,a){if(this.formatMap=new Map([[He.QR_CODE,Nn.BarcodeFormat.QR_CODE],[He.AZTEC,Nn.BarcodeFormat.AZTEC],[He.CODABAR,Nn.BarcodeFormat.CODABAR],[He.CODE_39,Nn.BarcodeFormat.CODE_39],[He.CODE_93,Nn.BarcodeFormat.CODE_93],[He.CODE_128,Nn.BarcodeFormat.CODE_128],[He.DATA_MATRIX,Nn.BarcodeFormat.DATA_MATRIX],[He.MAXICODE,Nn.BarcodeFormat.MAXICODE],[He.ITF,Nn.BarcodeFormat.ITF],[He.EAN_13,Nn.BarcodeFormat.EAN_13],[He.EAN_8,Nn.BarcodeFormat.EAN_8],[He.PDF_417,Nn.BarcodeFormat.PDF_417],[He.RSS_14,Nn.BarcodeFormat.RSS_14],[He.RSS_EXPANDED,Nn.BarcodeFormat.RSS_EXPANDED],[He.UPC_A,Nn.BarcodeFormat.UPC_A],[He.UPC_E,Nn.BarcodeFormat.UPC_E],[He.UPC_EAN_EXTENSION,Nn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!jR)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=a;var u=this.createZXingFormats(e),f=new Map;f.set(Nn.DecodeHintType.POSSIBLE_FORMATS,u),f.set(Nn.DecodeHintType.TRY_HARDER,!1),this.hints=f}return i.prototype.decodeAsync=function(e){var n=this;return new Promise(function(a,u){try{a(n.decode(e))}catch(f){u(f)}})},i.prototype.decode=function(e){var n=new Nn.MultiFormatReader(this.verbose,this.hints),a=new Nn.HTMLCanvasElementLuminanceSource(e),u=new Nn.BinaryBitmap(new Nn.HybridBinarizer(a)),f=n.decode(u);return{text:f.text,format:Hw.create(this.toHtml5QrcodeSupportedFormats(f.format)),debugData:this.createDebugData()}},i.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,a,u){e.set(n,a)}),e},i.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},i.prototype.createZXingFormats=function(e){for(var n=[],a=0,u=e;a<u.length;a++){var f=u[a];this.formatMap.has(f)?n.push(this.formatMap.get(f)):this.logger.logError("".concat(f," is not supported by")+"ZXingHtml5QrcodeShim")}return n},i.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},i})(),FR=function(i,e,n,a){function u(f){return f instanceof n?f:new n(function(x){x(f)})}return new(n||(n=Promise))(function(f,x){function b(C){try{E(a.next(C))}catch(I){x(I)}}function T(C){try{E(a.throw(C))}catch(I){x(I)}}function E(C){C.done?f(C.value):u(C.value).then(b,T)}E((a=a.apply(i,e||[])).next())})},zR=function(i,e){var n={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,u,f,x;return x={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function b(E){return function(C){return T([E,C])}}function T(E){if(a)throw new TypeError("Generator is already executing.");for(;x&&(x=0,E[0]&&(n=0)),n;)try{if(a=1,u&&(f=E[0]&2?u.return:E[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,E[1])).done)return f;switch(u=0,f&&(E=[E[0]&2,f.value]),E[0]){case 0:case 1:f=E;break;case 4:return n.label++,{value:E[1],done:!1};case 5:n.label++,u=E[1],E=[0];continue;case 7:E=n.ops.pop(),n.trys.pop();continue;default:if(f=n.trys,!(f=f.length>0&&f[f.length-1])&&(E[0]===6||E[0]===2)){n=0;continue}if(E[0]===3&&(!f||E[1]>f[0]&&E[1]<f[3])){n.label=E[1];break}if(E[0]===6&&n.label<f[1]){n.label=f[1],f=E;break}if(f&&n.label<f[2]){n.label=f[2],n.ops.push(E);break}f[2]&&n.ops.pop(),n.trys.pop();continue}E=e.call(i,n)}catch(C){E=[6,C],u=0}finally{a=f=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},UE=(function(){function i(e,n,a){if(this.formatMap=new Map([[He.QR_CODE,"qr_code"],[He.AZTEC,"aztec"],[He.CODABAR,"codabar"],[He.CODE_39,"code_39"],[He.CODE_93,"code_93"],[He.CODE_128,"code_128"],[He.DATA_MATRIX,"data_matrix"],[He.ITF,"itf"],[He.EAN_13,"ean_13"],[He.EAN_8,"ean_8"],[He.PDF_417,"pdf417"],[He.UPC_A,"upc_a"],[He.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!i.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=a;var u=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(u),!this.detector)throw"BarcodeDetector detector not supported"}return i.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},i.prototype.decodeAsync=function(e){return FR(this,void 0,void 0,function(){var n,a;return zR(this,function(u){switch(u.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=u.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return a=this.selectLargestBarcode(n),[2,{text:a.rawValue,format:Hw.create(this.toHtml5QrcodeSupportedFormats(a.format)),debugData:this.createDebugData()}]}})})},i.prototype.selectLargestBarcode=function(e){for(var n=null,a=0,u=0,f=e;u<f.length;u++){var x=f[u],b=x.boundingBox.width*x.boundingBox.height;b>a&&(a=b,n=x)}if(!n)throw"No largest barcode found";return n},i.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],a=0,u=e;a<u.length;a++){var f=u[a];this.formatMap.has(f)?n.push(this.formatMap.get(f)):this.logger.warn("".concat(f," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},i.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},i.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,a,u){e.set(n,a)}),e},i.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},i})(),VE=function(i,e,n,a){function u(f){return f instanceof n?f:new n(function(x){x(f)})}return new(n||(n=Promise))(function(f,x){function b(C){try{E(a.next(C))}catch(I){x(I)}}function T(C){try{E(a.throw(C))}catch(I){x(I)}}function E(C){C.done?f(C.value):u(C.value).then(b,T)}E((a=a.apply(i,e||[])).next())})},jE=function(i,e){var n={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,u,f,x;return x={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function b(E){return function(C){return T([E,C])}}function T(E){if(a)throw new TypeError("Generator is already executing.");for(;x&&(x=0,E[0]&&(n=0)),n;)try{if(a=1,u&&(f=E[0]&2?u.return:E[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,E[1])).done)return f;switch(u=0,f&&(E=[E[0]&2,f.value]),E[0]){case 0:case 1:f=E;break;case 4:return n.label++,{value:E[1],done:!1};case 5:n.label++,u=E[1],E=[0];continue;case 7:E=n.ops.pop(),n.trys.pop();continue;default:if(f=n.trys,!(f=f.length>0&&f[f.length-1])&&(E[0]===6||E[0]===2)){n=0;continue}if(E[0]===3&&(!f||E[1]>f[0]&&E[1]<f[3])){n.label=E[1];break}if(E[0]===6&&n.label<f[1]){n.label=f[1],f=E;break}if(f&&n.label<f[2]){n.label=f[2],n.ops.push(E);break}f[2]&&n.ops.pop(),n.trys.pop();continue}E=e.call(i,n)}catch(C){E=[6,C],u=0}finally{a=f=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},HR=(function(){function i(e,n,a,u){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=a,n&&UE.isSupported()?(this.primaryDecoder=new UE(e,a,u),this.secondaryDecoder=new kE(e,a,u)):this.primaryDecoder=new kE(e,a,u)}return i.prototype.decodeAsync=function(e){return VE(this,void 0,void 0,function(){var n;return jE(this,function(a){switch(a.label){case 0:n=performance.now(),a.label=1;case 1:return a.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,a.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},i.prototype.decodeRobustlyAsync=function(e){return VE(this,void 0,void 0,function(){var n,a;return jE(this,function(u){switch(u.label){case 0:n=performance.now(),u.label=1;case 1:return u.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,u.sent()];case 3:if(a=u.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw a;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},i.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},i.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},i.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,a=this.executionResults;n<a.length;n++){var u=a[n];e+=u}var f=e/this.executionResults.length;console.log("".concat(f," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},i})(),jg=(function(){var i=function(e,n){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,u){a.__proto__=u}||function(a,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(a[f]=u[f])},i(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");i(e,n);function a(){this.constructor=e}e.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}})(),Cf=function(i,e,n,a){function u(f){return f instanceof n?f:new n(function(x){x(f)})}return new(n||(n=Promise))(function(f,x){function b(C){try{E(a.next(C))}catch(I){x(I)}}function T(C){try{E(a.throw(C))}catch(I){x(I)}}function E(C){C.done?f(C.value):u(C.value).then(b,T)}E((a=a.apply(i,e||[])).next())})},vf=function(i,e){var n={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,u,f,x;return x={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function b(E){return function(C){return T([E,C])}}function T(E){if(a)throw new TypeError("Generator is already executing.");for(;x&&(x=0,E[0]&&(n=0)),n;)try{if(a=1,u&&(f=E[0]&2?u.return:E[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,E[1])).done)return f;switch(u=0,f&&(E=[E[0]&2,f.value]),E[0]){case 0:case 1:f=E;break;case 4:return n.label++,{value:E[1],done:!1};case 5:n.label++,u=E[1],E=[0];continue;case 7:E=n.ops.pop(),n.trys.pop();continue;default:if(f=n.trys,!(f=f.length>0&&f[f.length-1])&&(E[0]===6||E[0]===2)){n=0;continue}if(E[0]===3&&(!f||E[1]>f[0]&&E[1]<f[3])){n.label=E[1];break}if(E[0]===6&&n.label<f[1]){n.label=f[1],f=E;break}if(f&&n.label<f[2]){n.label=f[2],n.ops.push(E);break}f[2]&&n.ops.pop(),n.trys.pop();continue}E=e.call(i,n)}catch(C){E=[6,C],u=0}finally{a=f=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},qw=(function(){function i(e,n){this.name=e,this.track=n}return i.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},i.prototype.apply=function(e){var n={};n[this.name]=e;var a={advanced:[n]};return this.track.applyConstraints(a)},i.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},i})(),GR=(function(i){jg(e,i);function e(n,a){return i.call(this,n,a)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var a={};a[this.name]=n;var u={advanced:[a]};return this.track.applyConstraints(u)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),a=n[this.name];return{min:a.min,max:a.max,step:a.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e})(qw),YR=(function(i){jg(e,i);function e(n){return i.call(this,"zoom",n)||this}return e})(GR),XR=(function(i){jg(e,i);function e(n){return i.call(this,"torch",n)||this}return e})(qw),qR=(function(){function i(e){this.track=e}return i.prototype.zoomFeature=function(){return new YR(this.track)},i.prototype.torchFeature=function(){return new XR(this.track)},i})(),QR=(function(){function i(e,n,a){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=a,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return i.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},i.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var a=e.surface.clientWidth,u=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(a,u),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},i.create=function(e,n,a,u){return Cf(this,void 0,void 0,function(){var f,x;return vf(this,function(b){switch(b.label){case 0:return f=new i(e,n,u),a.aspectRatio?(x={aspectRatio:a.aspectRatio},[4,f.getFirstTrackOrFail().applyConstraints(x)]):[3,2];case 1:b.sent(),b.label=2;case 2:return f.setupSurface(),[2,f]}})})},i.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},i.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},i.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},i.prototype.resume=function(e){this.failIfClosed();var n=this,a=function(){setTimeout(e,200),n.surface.removeEventListener("playing",a)};this.surface.addEventListener("playing",a),this.surface.play()},i.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},i.prototype.getSurface=function(){return this.failIfClosed(),this.surface},i.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},i.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},i.prototype.applyVideoConstraints=function(e){return Cf(this,void 0,void 0,function(){return vf(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},i.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,a){var u=e.mediaStream.getVideoTracks(),f=u.length,x=0;e.mediaStream.getVideoTracks().forEach(function(b){e.mediaStream.removeTrack(b),b.stop(),++x,x>=f&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},i.prototype.getCapabilities=function(){return new qR(this.getFirstTrackOrFail())},i})(),WR=(function(){function i(e){this.mediaStream=e}return i.prototype.render=function(e,n,a){return Cf(this,void 0,void 0,function(){return vf(this,function(u){return[2,QR.create(e,this.mediaStream,n,a)]})})},i.create=function(e){return Cf(this,void 0,void 0,function(){var n,a;return vf(this,function(u){switch(u.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return a=u.sent(),[2,new i(a)]}})})},i})(),FE=function(i,e,n,a){function u(f){return f instanceof n?f:new n(function(x){x(f)})}return new(n||(n=Promise))(function(f,x){function b(C){try{E(a.next(C))}catch(I){x(I)}}function T(C){try{E(a.throw(C))}catch(I){x(I)}}function E(C){C.done?f(C.value):u(C.value).then(b,T)}E((a=a.apply(i,e||[])).next())})},zE=function(i,e){var n={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,u,f,x;return x={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function b(E){return function(C){return T([E,C])}}function T(E){if(a)throw new TypeError("Generator is already executing.");for(;x&&(x=0,E[0]&&(n=0)),n;)try{if(a=1,u&&(f=E[0]&2?u.return:E[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,E[1])).done)return f;switch(u=0,f&&(E=[E[0]&2,f.value]),E[0]){case 0:case 1:f=E;break;case 4:return n.label++,{value:E[1],done:!1};case 5:n.label++,u=E[1],E=[0];continue;case 7:E=n.ops.pop(),n.trys.pop();continue;default:if(f=n.trys,!(f=f.length>0&&f[f.length-1])&&(E[0]===6||E[0]===2)){n=0;continue}if(E[0]===3&&(!f||E[1]>f[0]&&E[1]<f[3])){n.label=E[1];break}if(E[0]===6&&n.label<f[1]){n.label=f[1],f=E;break}if(f&&n.label<f[2]){n.label=f[2],n.ops.push(E);break}f[2]&&n.ops.pop(),n.trys.pop();continue}E=e.call(i,n)}catch(C){E=[6,C],u=0}finally{a=f=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},KR=(function(){function i(){}return i.failIfNotSupported=function(){return FE(this,void 0,void 0,function(){return zE(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new i]})})},i.prototype.create=function(e){return FE(this,void 0,void 0,function(){return zE(this,function(n){return[2,WR.create(e)]})})},i})(),ZR=function(i,e,n,a){function u(f){return f instanceof n?f:new n(function(x){x(f)})}return new(n||(n=Promise))(function(f,x){function b(C){try{E(a.next(C))}catch(I){x(I)}}function T(C){try{E(a.throw(C))}catch(I){x(I)}}function E(C){C.done?f(C.value):u(C.value).then(b,T)}E((a=a.apply(i,e||[])).next())})},JR=function(i,e){var n={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,u,f,x;return x={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function b(E){return function(C){return T([E,C])}}function T(E){if(a)throw new TypeError("Generator is already executing.");for(;x&&(x=0,E[0]&&(n=0)),n;)try{if(a=1,u&&(f=E[0]&2?u.return:E[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,E[1])).done)return f;switch(u=0,f&&(E=[E[0]&2,f.value]),E[0]){case 0:case 1:f=E;break;case 4:return n.label++,{value:E[1],done:!1};case 5:n.label++,u=E[1],E=[0];continue;case 7:E=n.ops.pop(),n.trys.pop();continue;default:if(f=n.trys,!(f=f.length>0&&f[f.length-1])&&(E[0]===6||E[0]===2)){n=0;continue}if(E[0]===3&&(!f||E[1]>f[0]&&E[1]<f[3])){n.label=E[1];break}if(E[0]===6&&n.label<f[1]){n.label=f[1],f=E;break}if(f&&n.label<f[2]){n.label=f[2],n.ops.push(E);break}f[2]&&n.ops.pop(),n.trys.pop();continue}E=e.call(i,n)}catch(C){E=[6,C],u=0}finally{a=f=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},$R=(function(){function i(){}return i.retrieve=function(){if(navigator.mediaDevices)return i.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?i.getCamerasFromMediaStreamTrack():i.rejectWithError()},i.rejectWithError=function(){var e=Xl.unableToQuerySupportedDevices();return i.isHttpsOrLocalhost()||(e=Xl.insecureContextCameraQueryError()),Promise.reject(e)},i.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},i.getCamerasFromMediaDevices=function(){return ZR(this,void 0,void 0,function(){var e,n,a,u,f,x,b;return JR(this,function(T){switch(T.label){case 0:return e=function(E){for(var C=E.getVideoTracks(),I=0,M=C;I<M.length;I++){var k=M[I];k.enabled=!1,k.stop(),E.removeTrack(k)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=T.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(a=T.sent(),u=[],f=0,x=a;f<x.length;f++)b=x[f],b.kind==="videoinput"&&u.push({id:b.deviceId,label:b.label});return e(n),[2,u]}})})},i.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var a=function(f){for(var x=[],b=0,T=f;b<T.length;b++){var E=T[b];E.kind==="video"&&x.push({id:E.id,label:E.label})}e(x)},u=MediaStreamTrack;u.getSources(a)})},i})(),$n;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.NOT_STARTED=1]="NOT_STARTED",i[i.SCANNING=2]="SCANNING",i[i.PAUSED=3]="PAUSED"})($n||($n={}));var e8=(function(){function i(){this.state=$n.NOT_STARTED,this.onGoingTransactionNewState=$n.UNKNOWN}return i.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},i.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},i.prototype.execute=function(){if(this.onGoingTransactionNewState===$n.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=$n.UNKNOWN,this.directTransition(e)},i.prototype.cancel=function(){if(this.onGoingTransactionNewState===$n.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=$n.UNKNOWN},i.prototype.getState=function(){return this.state},i.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==$n.UNKNOWN)throw"Cannot transition to a new state, already under transition"},i.prototype.validateTransition=function(e){switch(this.state){case $n.UNKNOWN:throw"Transition from unknown is not allowed";case $n.NOT_STARTED:this.failIfNewStateIs(e,[$n.PAUSED]);break;case $n.SCANNING:break;case $n.PAUSED:break}},i.prototype.failIfNewStateIs=function(e,n){for(var a=0,u=n;a<u.length;a++){var f=u[a];if(e===f)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},i})(),t8=(function(){function i(e){this.stateManager=e}return i.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},i.prototype.directTransition=function(e){this.stateManager.directTransition(e)},i.prototype.getState=function(){return this.stateManager.getState()},i.prototype.canScanFile=function(){return this.stateManager.getState()===$n.NOT_STARTED},i.prototype.isScanning=function(){return this.stateManager.getState()!==$n.NOT_STARTED},i.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===$n.SCANNING},i.prototype.isPaused=function(){return this.stateManager.getState()===$n.PAUSED},i})(),n8=(function(){function i(){}return i.create=function(){return new t8(new e8)},i})(),i8=(function(){var i=function(e,n){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,u){a.__proto__=u}||function(a,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(a[f]=u[f])},i(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");i(e,n);function a(){this.constructor=e}e.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}})(),Hr=(function(i){i8(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e})(bs),r8=(function(){function i(e,n){this.logger=n,this.fps=Hr.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Hr.DEFAULT_DISABLE_FLIP}return i.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Xw.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},i.prototype.isShadedBoxEnabled=function(){return!Vs(this.qrbox)},i.create=function(e,n){return new i(e,n)},i})(),HE=(function(){function i(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var a;typeof n=="boolean"?this.verbose=n===!0:n&&(a=n,this.verbose=a.verbose===!0,a.experimentalFeatures),this.logger=new Yw(this.verbose),this.qrcode=new HR(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(a),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=n8.create()}return i.prototype.start=function(e,n,a,u){var f=this;if(!e)throw"cameraIdOrConfig is required";if(!a||typeof a!="function")throw"qrCodeSuccessCallback is required and should be a function.";var x;u?x=u:x=this.verbose?this.logger.log:function(){};var b=r8.create(n,this.logger);this.clearElement();var T=!1;b.videoConstraints&&(b.isMediaStreamConstraintsValid()?T=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var E=T,C=document.getElementById(this.elementId);C.clientWidth?C.clientWidth:Hr.DEFAULT_WIDTH,C.style.position="relative",this.shouldScan=!0,this.element=C;var I=this,M=this.stateManagerProxy.startTransition($n.SCANNING);return new Promise(function(k,q){var Q=E?b.videoConstraints:I.createVideoConstraints(e);if(!Q){M.cancel(),q("videoConstraints should be defined");return}var z={};(!E||b.aspectRatio)&&(z.aspectRatio=b.aspectRatio);var de={onRenderSurfaceReady:function(Ee,K){I.setupUi(Ee,K,b),I.isScanning=!0,I.foreverScan(b,a,x)}};KR.failIfNotSupported().then(function(Ee){Ee.create(Q).then(function(K){return K.render(f.element,z,de).then(function(Se){I.renderedCamera=Se,M.execute(),k(null)}).catch(function(Se){M.cancel(),q(Se)})}).catch(function(K){M.cancel(),q(Xl.errorGettingUserMedia(K))})}).catch(function(Ee){M.cancel(),q(Xl.cameraStreamingNotSupported())})})},i.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition($n.PAUSED),this.showPausedState(),(Vs(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},i.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition($n.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},i.prototype.getState=function(){return this.stateManagerProxy.getState()},i.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition($n.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var a=function(){if(e.element){var f=document.getElementById(Hr.SHADED_REGION_ELEMENT_ID);f&&e.element.removeChild(f)}},u=this;return this.renderedCamera.close().then(function(){return u.renderedCamera=null,u.element&&(u.element.removeChild(u.canvasElement),u.canvasElement=null),a(),u.qrRegion&&(u.qrRegion=null),u.context&&(u.context=null),n.execute(),u.hidePausedState(),u.isScanning=!1,Promise.resolve()})},i.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(a){return a.decodedText})},i.prototype.scanFileV2=function(e,n){var a=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Vs(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(u,f){a.possiblyCloseLastScanImageFile(),a.clearElement(),a.lastScanImageFile=URL.createObjectURL(e);var x=new Image;x.onload=function(){var b=x.width,T=x.height,E=document.getElementById(a.elementId),C=E.clientWidth?E.clientWidth:Hr.DEFAULT_WIDTH,I=Math.max(E.clientHeight?E.clientHeight:T,Hr.FILE_SCAN_MIN_HEIGHT),M=a.computeCanvasDrawConfig(b,T,C,I);if(n){var k=a.createCanvasElement(C,I,"qr-canvas-visible");k.style.display="inline-block",E.appendChild(k);var q=k.getContext("2d");if(!q)throw"Unable to get 2d context from canvas";q.canvas.width=C,q.canvas.height=I,q.drawImage(x,0,0,b,T,M.x,M.y,M.width,M.height)}var Q=Hr.FILE_SCAN_HIDDEN_CANVAS_PADDING,z=Math.max(x.width,M.width),de=Math.max(x.height,M.height),Ee=z+2*Q,K=de+2*Q,Se=a.createCanvasElement(Ee,K);E.appendChild(Se);var Ve=Se.getContext("2d");if(!Ve)throw"Unable to get 2d context from canvas";Ve.canvas.width=Ee,Ve.canvas.height=K,Ve.drawImage(x,0,0,b,T,Q,Q,z,de);try{a.qrcode.decodeRobustlyAsync(Se).then(function(ke){u(LE.createFromQrcodeResult(ke))}).catch(f)}catch(ke){f("QR code parse error, error = ".concat(ke))}},x.onerror=f,x.onabort=f,x.onstalled=f,x.onsuspend=f,x.src=URL.createObjectURL(e)})},i.prototype.clear=function(){this.clearElement()},i.getCameras=function(){return $R.retrieve()},i.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},i.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},i.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},i.prototype.applyVideoConstraints=function(e){if(e){if(!Xw.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},i.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},i.prototype.getSupportedFormats=function(e){var n=[He.QR_CODE,He.AZTEC,He.CODABAR,He.CODE_39,He.CODE_93,He.CODE_128,He.DATA_MATRIX,He.MAXICODE,He.ITF,He.EAN_13,He.EAN_8,He.PDF_417,He.RSS_14,He.RSS_EXPANDED,He.UPC_A,He.UPC_E,He.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var a=[],u=0,f=e.formatsToSupport;u<f.length;u++){var x=f[u];BR(x)?a.push(x):this.logger.warn("Invalid format: ".concat(x," passed in config, ignoring."))}if(a.length===0)throw"None of formatsToSupport match supported values.";return a},i.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Vs(e))return!0;if(!Vs(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(Vs(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return Vs(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},i.prototype.validateQrboxSize=function(e,n,a){var u=this,f=a.qrbox;this.validateQrboxConfig(f);var x=this.toQrdimensions(e,n,f),b=function(E){if(E<Hr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Hr.MIN_QR_BOX_SIZE,"px.")},T=function(E){return E>e&&(u.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),E=e),E};b(x.width),b(x.height),x.width=T(x.width)},i.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},i.prototype.toQrdimensions=function(e,n,a){if(typeof a=="number")return{width:a,height:a};if(typeof a=="function")try{return a(e,n)}catch(u){throw new Error("qrbox config was passed as a function but it failed with unknown error"+u)}return a},i.prototype.setupUi=function(e,n,a){a.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,a);var u=Vs(a.qrbox)?{width:e,height:n}:a.qrbox;this.validateQrboxConfig(u);var f=this.toQrdimensions(e,n,u);f.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var x=a.isShadedBoxEnabled()&&f.height<=n,b={x:0,y:0,width:e,height:n},T=x?this.getShadedRegionBounds(e,n,f):b,E=this.createCanvasElement(T.width,T.height),C={willReadFrequently:!0},I=E.getContext("2d",C);I.canvas.width=T.width,I.canvas.height=T.height,this.element.append(E),x&&this.possiblyInsertShadingElement(this.element,e,n,f),this.createScannerPausedUiElement(this.element),this.qrRegion=T,this.context=I,this.canvasElement=E},i.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=Xl.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},i.prototype.scanContext=function(e,n){var a=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(u){return e(u.text,LE.createFromQrcodeResult(u)),a.possiblyUpdateShaders(!0),!0}).catch(function(u){a.possiblyUpdateShaders(!1);var f=Xl.codeParseError(u);return n(f,Gw.createFrom(f)),!1})},i.prototype.foreverScan=function(e,n,a){var u=this;if(this.shouldScan&&this.renderedCamera){var f=this.renderedCamera.getSurface(),x=f.videoWidth/f.clientWidth,b=f.videoHeight/f.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var T=this.qrRegion.width*x,E=this.qrRegion.height*b,C=this.qrRegion.x*x,I=this.qrRegion.y*b;this.context.drawImage(f,C,I,T,E,0,0,this.qrRegion.width,this.qrRegion.height);var M=function(){u.foreverScanTimeout=setTimeout(function(){u.foreverScan(e,n,a)},u.getTimeoutFps(e.fps))};this.scanContext(n,a).then(function(k){!k&&e.disableFlip!==!0?(u.context.translate(u.context.canvas.width,0),u.context.scale(-1,1),u.scanContext(n,a).finally(function(){M()})):M()}).catch(function(k){u.logger.logError("Error happend while scanning context",k),M()})}},i.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",a="deviceId",u={user:!0,environment:!0},f="exact",x=function(q){if(q in u)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(q,"'")},b=Object.keys(e);if(b.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(b.length," keys");var T=Object.keys(e)[0];if(T!==n&&T!==a)throw"Only '".concat(n,"' and '").concat(a,"' ")+" are supported for 'cameraIdOrConfig'";if(T===n){var E=e.facingMode;if(typeof E=="string"){if(x(E))return{facingMode:E}}else if(typeof E=="object")if(f in E){if(x(E["".concat(f)]))return{facingMode:{exact:E["".concat(f)]}}}else throw"'facingMode' should be string or object with"+" ".concat(f," as key.");else{var C=typeof E;throw"Invalid type of 'facingMode' = ".concat(C)}}else{var I=e.deviceId;if(typeof I=="string")return{deviceId:I};if(typeof I=="object"){if(f in I)return{deviceId:{exact:I["".concat(f)]}};throw"'deviceId' should be string or object with"+" ".concat(f," as key.")}else{var M=typeof I;throw"Invalid type of 'deviceId' = ".concat(M)}}}var k=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(k)},i.prototype.computeCanvasDrawConfig=function(e,n,a,u){if(e<=a&&n<=u){var f=(a-e)/2,x=(u-n)/2;return{x:f,y:x,width:e,height:n}}else{var b=e,T=n;return e>a&&(n=a/e*n,e=a),n>u&&(e=u/n*e,n=u),this.logger.log("Image downsampled from "+"".concat(b,"X").concat(T)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,a,u)}},i.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},i.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?Hr.BORDER_SHADER_MATCH_COLOR:Hr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},i.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},i.prototype.createCanvasElement=function(e,n,a){var u=e,f=n,x=document.createElement("canvas");return x.style.width="".concat(u,"px"),x.style.height="".concat(f,"px"),x.style.display="none",x.id=Vs(a)?"qr-canvas":a,x},i.prototype.getShadedRegionBounds=function(e,n,a){if(a.width>e||a.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-a.width)/2,y:(n-a.height)/2,width:a.width,height:a.height}},i.prototype.possiblyInsertShadingElement=function(e,n,a,u){if(!(n-u.width<1||a-u.height<1)){var f=document.createElement("div");f.style.position="absolute";var x=(n-u.width)/2,b=(a-u.height)/2;if(f.style.borderLeft="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderRight="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderTop="".concat(b,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderBottom="".concat(b,"px solid rgba(0, 0, 0, 0.48)"),f.style.boxSizing="border-box",f.style.top="0px",f.style.bottom="0px",f.style.left="0px",f.style.right="0px",f.id="".concat(Hr.SHADED_REGION_ELEMENT_ID),n-u.width<11||a-u.height<11)this.hasBorderShaders=!1;else{var T=5,E=40;this.insertShaderBorders(f,E,T,-T,null,0,!0),this.insertShaderBorders(f,E,T,-T,null,0,!1),this.insertShaderBorders(f,E,T,null,-T,0,!0),this.insertShaderBorders(f,E,T,null,-T,0,!1),this.insertShaderBorders(f,T,E+T,-T,null,-T,!0),this.insertShaderBorders(f,T,E+T,null,-T,-T,!0),this.insertShaderBorders(f,T,E+T,-T,null,-T,!1),this.insertShaderBorders(f,T,E+T,null,-T,-T,!1),this.hasBorderShaders=!0}e.append(f)}},i.prototype.insertShaderBorders=function(e,n,a,u,f,x,b){var T=document.createElement("div");T.style.position="absolute",T.style.backgroundColor=Hr.BORDER_SHADER_DEFAULT_COLOR,T.style.width="".concat(n,"px"),T.style.height="".concat(a,"px"),u!==null&&(T.style.top="".concat(u,"px")),f!==null&&(T.style.bottom="".concat(f,"px")),b?T.style.left="".concat(x,"px"):T.style.right="".concat(x,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(T),e.appendChild(T)},i.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},i.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},i.prototype.getTimeoutFps=function(e){return 1e3/e},i})(),Fg="data:image/svg+xml;base64,",s8=Fg+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",a8=Fg+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",GE=Fg+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",o8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",YE=(function(){function i(){}return i.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},i})(),l8=(function(){function i(){this.data=YE.createDefault();var e=localStorage.getItem(i.LOCAL_STORAGE_KEY);e?this.data=JSON.parse(e):this.reset()}return i.prototype.hasCameraPermissions=function(){return this.data.hasPermission},i.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},i.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},i.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},i.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},i.prototype.reset=function(){this.data=YE.createDefault(),this.flush()},i.prototype.flush=function(){localStorage.setItem(i.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},i.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",i})(),c8=(function(){function i(){this.infoDiv=document.createElement("div")}return i.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=BE.poweredBy();var n=document.createElement("a");n.innerText="ScanApp",n.href="https://scanapp.org",n.target="new",n.style.color="white",this.infoDiv.appendChild(n);var a=document.createElement("br"),u=document.createElement("br");this.infoDiv.appendChild(a),this.infoDiv.appendChild(u);var f=document.createElement("a");f.innerText=BE.reportIssues(),f.href="https://github.com/mebjas/html5-qrcode/issues",f.target="new",f.style.color="white",this.infoDiv.appendChild(f),e.appendChild(this.infoDiv)},i.prototype.show=function(){this.infoDiv.style.display="block"},i.prototype.hide=function(){this.infoDiv.style.display="none"},i})(),u8=(function(){function i(e,n){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=n,this.infoIcon=document.createElement("img")}return i.prototype.renderInto=function(e){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=GE,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(a){return n.onHoverIn()},this.infoIcon.onmouseout=function(a){return n.onHoverOut()},this.infoIcon.onclick=function(a){return n.onClick()},e.appendChild(this.infoIcon)},i.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},i.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},i.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=o8,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=GE,this.infoIcon.style.opacity="0.6")},i})(),h8=(function(){function i(){var e=this;this.infoDiv=new c8,this.infoIcon=new u8(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return i.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},i})(),f8=function(i,e,n,a){function u(f){return f instanceof n?f:new n(function(x){x(f)})}return new(n||(n=Promise))(function(f,x){function b(C){try{E(a.next(C))}catch(I){x(I)}}function T(C){try{E(a.throw(C))}catch(I){x(I)}}function E(C){C.done?f(C.value):u(C.value).then(b,T)}E((a=a.apply(i,e||[])).next())})},d8=function(i,e){var n={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,u,f,x;return x={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function b(E){return function(C){return T([E,C])}}function T(E){if(a)throw new TypeError("Generator is already executing.");for(;x&&(x=0,E[0]&&(n=0)),n;)try{if(a=1,u&&(f=E[0]&2?u.return:E[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,E[1])).done)return f;switch(u=0,f&&(E=[E[0]&2,f.value]),E[0]){case 0:case 1:f=E;break;case 4:return n.label++,{value:E[1],done:!1};case 5:n.label++,u=E[1],E=[0];continue;case 7:E=n.ops.pop(),n.trys.pop();continue;default:if(f=n.trys,!(f=f.length>0&&f[f.length-1])&&(E[0]===6||E[0]===2)){n=0;continue}if(E[0]===3&&(!f||E[1]>f[0]&&E[1]<f[3])){n.label=E[1];break}if(E[0]===6&&n.label<f[1]){n.label=f[1],f=E;break}if(f&&n.label<f[2]){n.label=f[2],n.ops.push(E);break}f[2]&&n.ops.pop(),n.trys.pop();continue}E=e.call(i,n)}catch(C){E=[6,C],u=0}finally{a=f=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},XE=(function(){function i(){}return i.hasPermissions=function(){return f8(this,void 0,void 0,function(){var e,n,a,u;return d8(this,function(f){switch(f.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=f.sent(),n=0,a=e;n<a.length;n++)if(u=a[n],u.kind==="videoinput"&&u.label)return[2,!0];return[2,!1]}})})},i})(),lo=(function(){function i(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return i.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},i.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},i.prototype.isCameraScanRequired=function(){for(var e=0,n=this.supportedScanTypes;e<n.length;e++){var a=n[e];if(i.isCameraScanType(a))return!0}return!1},i.isCameraScanType=function(e){return e===wo.SCAN_TYPE_CAMERA},i.isFileScanType=function(e){return e===wo.SCAN_TYPE_FILE},i.prototype.validateAndReturnScanTypes=function(e){if(!e||e.length===0)return bs.DEFAULT_SUPPORTED_SCAN_TYPE;var n=bs.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>n)throw"Max ".concat(n," values expected for ")+"supportedScanTypes";for(var a=0,u=e;a<u.length;a++){var f=u[a];if(!bs.DEFAULT_SUPPORTED_SCAN_TYPE.includes(f))throw"Unsupported scan type ".concat(f)}return e},i})(),Yr=(function(){function i(){}return i.ALL_ELEMENT_CLASS="html5-qrcode-element",i.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",i.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",i.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",i.TORCH_BUTTON_ID="html5-qrcode-button-torch",i.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",i.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",i.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",i.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",i.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",i.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",i})(),wa=(function(){function i(){}return i.createElement=function(e,n){var a=document.createElement(e);return a.id=n,a.classList.add(Yr.ALL_ELEMENT_CLASS),e==="button"&&a.setAttribute("type","button"),a},i})(),Qw=function(i,e,n,a){function u(f){return f instanceof n?f:new n(function(x){x(f)})}return new(n||(n=Promise))(function(f,x){function b(C){try{E(a.next(C))}catch(I){x(I)}}function T(C){try{E(a.throw(C))}catch(I){x(I)}}function E(C){C.done?f(C.value):u(C.value).then(b,T)}E((a=a.apply(i,e||[])).next())})},Ww=function(i,e){var n={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,u,f,x;return x={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function b(E){return function(C){return T([E,C])}}function T(E){if(a)throw new TypeError("Generator is already executing.");for(;x&&(x=0,E[0]&&(n=0)),n;)try{if(a=1,u&&(f=E[0]&2?u.return:E[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,E[1])).done)return f;switch(u=0,f&&(E=[E[0]&2,f.value]),E[0]){case 0:case 1:f=E;break;case 4:return n.label++,{value:E[1],done:!1};case 5:n.label++,u=E[1],E=[0];continue;case 7:E=n.ops.pop(),n.trys.pop();continue;default:if(f=n.trys,!(f=f.length>0&&f[f.length-1])&&(E[0]===6||E[0]===2)){n=0;continue}if(E[0]===3&&(!f||E[1]>f[0]&&E[1]<f[3])){n.label=E[1];break}if(E[0]===6&&n.label<f[1]){n.label=f[1],f=E;break}if(f&&n.label<f[2]){n.label=f[2],n.ops.push(E);break}f[2]&&n.ops.pop(),n.trys.pop();continue}E=e.call(i,n)}catch(C){E=[6,C],u=0}finally{a=f=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},qE=(function(){function i(e,n,a){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=n,this.onTorchActionFailureCallback=a}return i.prototype.isTorchEnabled=function(){return this.isTorchOn},i.prototype.flipState=function(){return Qw(this,void 0,void 0,function(){var e,n;return Ww(this,function(a){switch(a.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return a.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return n=a.sent(),this.propagateFailure(e,n),this.buttonController.enable(),[3,4];case 4:return[2]}})})},i.prototype.updateUiBasedOnLatestSettings=function(e,n){e===n?(this.buttonController.setText(n?mn.torchOffButton():mn.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},i.prototype.propagateFailure=function(e,n){var a=e?mn.torchOnFailedMessage():mn.torchOffFailedMessage();n&&(a+="; Error = "+n),this.onTorchActionFailureCallback(a)},i.prototype.reset=function(){this.isTorchOn=!1},i})(),g8=(function(){function i(e,n){this.onTorchActionFailureCallback=n,this.torchButton=wa.createElement("button",Yr.TORCH_BUTTON_ID),this.torchController=new qE(e,this,n)}return i.prototype.render=function(e,n){var a=this;this.torchButton.innerText=mn.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var u=this;this.torchButton.addEventListener("click",function(f){return Qw(a,void 0,void 0,function(){return Ww(this,function(x){switch(x.label){case 0:return[4,u.torchController.flipState()];case 1:return x.sent(),u.torchController.isTorchEnabled()?(u.torchButton.classList.remove(Yr.TORCH_BUTTON_CLASS_TORCH_OFF),u.torchButton.classList.add(Yr.TORCH_BUTTON_CLASS_TORCH_ON)):(u.torchButton.classList.remove(Yr.TORCH_BUTTON_CLASS_TORCH_ON),u.torchButton.classList.add(Yr.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},i.prototype.updateTorchCapability=function(e){this.torchController=new qE(e,this,this.onTorchActionFailureCallback)},i.prototype.getTorchButton=function(){return this.torchButton},i.prototype.hide=function(){this.torchButton.style.display="none"},i.prototype.show=function(){this.torchButton.style.display="inline-block"},i.prototype.disable=function(){this.torchButton.disabled=!0},i.prototype.enable=function(){this.torchButton.disabled=!1},i.prototype.setText=function(e){this.torchButton.innerText=e},i.prototype.reset=function(){this.torchButton.innerText=mn.torchOnButton(),this.torchController.reset()},i.create=function(e,n,a,u){var f=new i(n,u);return f.render(e,a),f},i})(),m8=(function(){function i(e,n,a){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=n?"block":"none",e.appendChild(this.fileBasedScanRegion);var u=document.createElement("label");u.setAttribute("for",this.getFileScanInputId()),u.style.display="inline-block",this.fileBasedScanRegion.appendChild(u),this.fileSelectionButton=wa.createElement("button",Yr.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(b){u.click()}),u.append(this.fileSelectionButton),this.fileScanInput=wa.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",u.appendChild(this.fileScanInput);var f=this;this.fileScanInput.addEventListener("change",function(b){if(!(b==null||b.target==null)){var T=b.target;if(!(T.files&&T.files.length===0)){var E=T.files,C=E[0],I=C.name;f.setImageNameToButton(I),a(C)}}});var x=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(x),this.fileBasedScanRegion.addEventListener("dragenter",function(b){f.fileBasedScanRegion.style.border=f.fileBasedScanRegionActiveBorder(),b.stopPropagation(),b.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(b){f.fileBasedScanRegion.style.border=f.fileBasedScanRegionDefaultBorder(),b.stopPropagation(),b.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(b){f.fileBasedScanRegion.style.border=f.fileBasedScanRegionActiveBorder(),b.stopPropagation(),b.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(b){b.stopPropagation(),b.preventDefault(),f.fileBasedScanRegion.style.border=f.fileBasedScanRegionDefaultBorder();var T=b.dataTransfer;if(T){var E=T.files;if(!E||E.length===0)return;for(var C=!1,I=0;I<E.length;++I){var M=E.item(I);if(M){var k=/image.*/;if(M.type.match(k)){C=!0;var q=M.name;f.setImageNameToButton(q),a(M),x.innerText=mn.dragAndDropMessage();break}}}C||(x.innerText=mn.dragAndDropMessageOnlyImages())}})}return i.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},i.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},i.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},i.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},i.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},i.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},i.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},i.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=mn.dragAndDropMessage(),e.style.fontWeight="400",e},i.prototype.setImageNameToButton=function(e){var n=20;if(e.length>n){var a=e.substring(0,8),u=e.length,f=e.substring(u-8,u);e="".concat(a,"....").concat(f)}var x=mn.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=x},i.prototype.setInitialValueToButton=function(){var e=mn.fileSelectionChooseImage()+" - "+mn.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},i.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},i.create=function(e,n,a){var u=new i(e,n,a);return u},i})(),p8=(function(){function i(e){this.selectElement=wa.createElement("select",Yr.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return i.prototype.render=function(e){var n=document.createElement("span");n.style.marginRight="10px";var a=this.cameras.length;if(a===0)throw new Error("No cameras found");if(a===1)n.style.display="none";else{var u=mn.selectCamera();n.innerText="".concat(u," (").concat(this.cameras.length,")  ")}for(var f=1,x=0,b=this.cameras;x<b.length;x++){var T=b[x],E=T.id,C=T.label==null?E:T.label;(!C||C==="")&&(C=[mn.anonymousCameraPrefix(),f++].join(" "));var I=document.createElement("option");I.value=E,I.innerText=C,this.options.push(I),this.selectElement.appendChild(I)}n.appendChild(this.selectElement),e.appendChild(n)},i.prototype.disable=function(){this.selectElement.disabled=!0},i.prototype.isDisabled=function(){return this.selectElement.disabled===!0},i.prototype.enable=function(){this.selectElement.disabled=!1},i.prototype.getValue=function(){return this.selectElement.value},i.prototype.hasValue=function(e){for(var n=0,a=this.options;n<a.length;n++){var u=a[n];if(u.value===e)return!0}return!1},i.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},i.prototype.hasSingleItem=function(){return this.cameras.length===1},i.prototype.numCameras=function(){return this.cameras.length},i.create=function(e,n){var a=new i(n);return a.render(e),a},i})(),x8=(function(){function i(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=wa.createElement("input",Yr.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return i.prototype.render=function(e,n){this.zoomElementContainer.style.display=n?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var a=mn.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(a),this.rangeText.style.marginRight="10px";var u=this;this.rangeInput.addEventListener("input",function(){return u.onValueChange()}),this.rangeInput.addEventListener("change",function(){return u.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},i.prototype.onValueChange=function(){var e=mn.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},i.prototype.setValues=function(e,n,a,u){this.rangeInput.min=e.toString(),this.rangeInput.max=n.toString(),this.rangeInput.step=u.toString(),this.rangeInput.value=a.toString(),this.onValueChange()},i.prototype.show=function(){this.zoomElementContainer.style.display="block"},i.prototype.hide=function(){this.zoomElementContainer.style.display="none"},i.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},i.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},i.create=function(e,n){var a=new i;return a.render(e,n),a},i})(),Gr;(function(i){i[i.STATUS_DEFAULT=0]="STATUS_DEFAULT",i[i.STATUS_SUCCESS=1]="STATUS_SUCCESS",i[i.STATUS_WARNING=2]="STATUS_WARNING",i[i.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Gr||(Gr={}));function y8(i){return{fps:i.fps,qrbox:i.qrbox,aspectRatio:i.aspectRatio,disableFlip:i.disableFlip,videoConstraints:i.videoConstraints}}function E8(i,e){return{formatsToSupport:i.formatsToSupport,useBarCodeDetectorIfSupported:i.useBarCodeDetectorIfSupported,experimentalFeatures:i.experimentalFeatures,verbose:e}}var _8=(function(){function i(e,n,a){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(n),this.verbose=a===!0,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new lo(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new Yw(this.verbose),this.persistedDataManager=new l8,n.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return i.prototype.render=function(e,n){var a=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(f,x){if(e)e(f,x);else{if(a.lastMatchFound===f)return;a.lastMatchFound=f,a.setHeaderMessage(mn.lastMatch(f),Gr.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(f,x){n&&n(f,x)};var u=document.getElementById(this.elementId);if(!u)throw"HTML Element with id=".concat(this.elementId," not found");u.innerHTML="",this.createBasicLayout(u),this.html5Qrcode=new HE(this.getScanRegionId(),E8(this.config,this.verbose))},i.prototype.pause=function(e){(Vs(e)||e!==!0)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},i.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},i.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},i.prototype.clear=function(){var e=this,n=function(){var a=document.getElementById(e.elementId);a&&(a.innerHTML="",e.resetBasicLayout(a))};return this.html5Qrcode?new Promise(function(a,u){if(!e.html5Qrcode){a();return}e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(f){if(!e.html5Qrcode){a();return}e.html5Qrcode.clear(),n(),a()}).catch(function(f){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",f),u(f)}):(e.html5Qrcode.clear(),n(),a())}):Promise.resolve()},i.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},i.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},i.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},i.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},i.prototype.createConfig=function(e){return e?(e.fps||(e.fps=bs.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!bs.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=bs.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=bs.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:bs.SCAN_DEFAULT_FPS,rememberLastUsedCamera:bs.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:bs.DEFAULT_SUPPORTED_SCAN_TYPE}},i.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var n=document.createElement("div"),a=this.getScanRegionId();n.id=a,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",e.appendChild(n),lo.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var u=document.createElement("div"),f=this.getDashboardId();u.id=f,u.style.width="100%",e.appendChild(u),this.setupInitialDashboard(u)},i.prototype.resetBasicLayout=function(e){e.style.border="none"},i.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},i.prototype.createHeader=function(e){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",e.appendChild(n);var a=new h8;a.renderInto(n);var u=document.createElement("div");u.id=this.getHeaderMessageContainerId(),u.style.display="none",u.style.textAlign="center",u.style.fontSize="14px",u.style.padding="2px 10px",u.style.margin="4px",u.style.borderTop="1px solid #f6f6f6",n.appendChild(u)},i.prototype.createSection=function(e){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",e.appendChild(n)},i.prototype.createCameraListUi=function(e,n,a){var u=this;u.showHideScanTypeSwapLink(!1),u.setHeaderMessage(mn.cameraPermissionRequesting());var f=function(){a||u.createPermissionButton(e,n)};HE.getCameras().then(function(x){u.persistedDataManager.setHasPermission(!0),u.showHideScanTypeSwapLink(!0),u.resetHeaderMessage(),x&&x.length>0?(e.removeChild(n),u.renderCameraSelection(x)):(u.setHeaderMessage(mn.noCameraFound(),Gr.STATUS_WARNING),f())}).catch(function(x){u.persistedDataManager.setHasPermission(!1),a?a.disabled=!1:f(),u.setHeaderMessage(x,Gr.STATUS_WARNING),u.showHideScanTypeSwapLink(!0)})},i.prototype.createPermissionButton=function(e,n){var a=this,u=wa.createElement("button",this.getCameraPermissionButtonId());u.innerText=mn.cameraPermissionTitle(),u.addEventListener("click",function(){u.disabled=!0,a.createCameraListUi(e,n,u)}),n.appendChild(u)},i.prototype.createPermissionsUi=function(e,n){var a=this;if(lo.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){XE.hasPermissions().then(function(u){u?a.createCameraListUi(e,n):(a.persistedDataManager.setHasPermission(!1),a.createPermissionButton(e,n))}).catch(function(u){a.persistedDataManager.setHasPermission(!1),a.createPermissionButton(e,n)});return}this.createPermissionButton(e,n)},i.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),n=document.createElement("div");e.appendChild(n);var a=document.createElement("div");a.id=this.getDashboardSectionCameraScanRegionId(),a.style.display=lo.isCameraScanType(this.currentScanType)?"block":"none",n.appendChild(a);var u=document.createElement("div");u.style.textAlign="center",a.appendChild(u),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(a,u),this.renderFileScanUi(n)},i.prototype.renderFileScanUi=function(e){var n=lo.isFileScanType(this.currentScanType),a=this,u=function(f){if(!a.html5Qrcode)throw"html5Qrcode not defined";lo.isFileScanType(a.currentScanType)&&(a.setHeaderMessage(mn.loadingImage()),a.html5Qrcode.scanFileV2(f,!0).then(function(x){a.resetHeaderMessage(),a.qrCodeSuccessCallback(x.decodedText,x)}).catch(function(x){a.setHeaderMessage(x,Gr.STATUS_WARNING),a.qrCodeErrorCallback(x,Gw.createFrom(x))}))};this.fileSelectionUi=m8.create(e,n,u)},i.prototype.renderCameraSelection=function(e){var n=this,a=this,u=document.getElementById(this.getDashboardSectionCameraScanRegionId());u.style.textAlign="center";var f=x8.create(u,!1),x=function(Q){var z=Q.zoomFeature();if(z.isSupported()){f.setOnCameraZoomValueChangeCallback(function(Ee){z.apply(Ee)});var de=1;n.config.defaultZoomValueIfSupported&&(de=n.config.defaultZoomValueIfSupported),de=PR(de,z.min(),z.max()),f.setValues(z.min(),z.max(),de,z.step()),f.show()}},b=p8.create(u,e),T=document.createElement("span"),E=wa.createElement("button",Yr.CAMERA_START_BUTTON_ID);E.innerText=mn.scanButtonStartScanningText(),T.appendChild(E);var C=wa.createElement("button",Yr.CAMERA_STOP_BUTTON_ID);C.innerText=mn.scanButtonStopScanningText(),C.style.display="none",C.disabled=!0,T.appendChild(C);var I,M=function(Q){if(!Q.torchFeature().isSupported()){I&&I.hide();return}I?I.updateTorchCapability(Q.torchFeature()):I=g8.create(T,Q.torchFeature(),{display:"none",marginLeft:"5px"},function(z){a.setHeaderMessage(z,Gr.STATUS_WARNING)}),I.show()};u.appendChild(T);var k=function(Q){Q||(E.style.display="none"),E.innerText=mn.scanButtonStartScanningText(),E.style.opacity="1",E.disabled=!1,Q&&(E.style.display="inline-block")};if(E.addEventListener("click",function(Q){E.innerText=mn.scanButtonScanningStarting(),b.disable(),E.disabled=!0,E.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&a.showHideScanTypeSwapLink(!1),a.resetHeaderMessage();var z=b.getValue();a.persistedDataManager.setLastUsedCameraId(z),a.html5Qrcode.start(z,y8(a.config),a.qrCodeSuccessCallback,a.qrCodeErrorCallback).then(function(de){C.disabled=!1,C.style.display="inline-block",k(!1);var Ee=a.html5Qrcode.getRunningTrackCameraCapabilities();n.config.showTorchButtonIfSupported===!0&&M(Ee),n.config.showZoomSliderIfSupported===!0&&x(Ee)}).catch(function(de){a.showHideScanTypeSwapLink(!0),b.enable(),k(!0),a.setHeaderMessage(de,Gr.STATUS_WARNING)})}),b.hasSingleItem()&&E.click(),C.addEventListener("click",function(Q){if(!a.html5Qrcode)throw"html5Qrcode not defined";C.disabled=!0,a.html5Qrcode.stop().then(function(z){n.scanTypeSelector.hasMoreThanOneScanType()&&a.showHideScanTypeSwapLink(!0),b.enable(),E.disabled=!1,C.style.display="none",E.style.display="inline-block",I&&(I.reset(),I.hide()),f.removeOnCameraZoomValueChangeCallback(),f.hide(),a.insertCameraScanImageToScanRegion()}).catch(function(z){C.disabled=!1,a.setHeaderMessage(z,Gr.STATUS_WARNING)})}),a.persistedDataManager.getLastUsedCameraId()){var q=a.persistedDataManager.getLastUsedCameraId();b.hasValue(q)?(b.setValue(q),E.click()):a.persistedDataManager.resetLastUsedCameraId()}},i.prototype.createSectionSwap=function(){var e=this,n=mn.textIfCameraScanSelected(),a=mn.textIfFileScanSelected(),u=document.getElementById(this.getDashboardSectionId()),f=document.createElement("div");f.style.textAlign="center";var x=wa.createElement("span",this.getDashboardSectionSwapLinkId());x.style.textDecoration="underline",x.style.cursor="pointer",x.innerText=lo.isCameraScanType(this.currentScanType)?n:a,x.addEventListener("click",function(){if(!e.sectionSwapAllowed){e.verbose&&e.logger.logError("Section swap called when not allowed");return}e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,lo.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),x.innerText=a,e.currentScanType=wo.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),x.innerText=n,e.currentScanType=wo.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0}),f.appendChild(x),u.appendChild(f)},i.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,n=this;if(this.persistedDataManager.hasCameraPermissions()){XE.hasPermissions().then(function(a){if(a){var u=document.getElementById(n.getCameraPermissionButtonId());if(!u)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";u.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(a){n.persistedDataManager.setHasPermission(!1)});return}},i.prototype.resetHeaderMessage=function(){var e=document.getElementById(this.getHeaderMessageContainerId());e.style.display="none"},i.prototype.setHeaderMessage=function(e,n){n||(n=Gr.STATUS_DEFAULT);var a=this.getHeaderMessageDiv();switch(a.innerText=e,a.style.display="block",n){case Gr.STATUS_SUCCESS:a.style.background="rgba(106, 175, 80, 0.26)",a.style.color="#477735";break;case Gr.STATUS_WARNING:a.style.background="rgba(203, 36, 49, 0.14)",a.style.color="#cb2431";break;case Gr.STATUS_DEFAULT:default:a.style.background="rgba(0, 0, 0, 0)",a.style.color="rgb(17, 17, 17)";break}},i.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(e!==!0&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},i.prototype.insertCameraScanImageToScanRegion=function(){var e=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){n.innerHTML="<br>",n.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(a){n.innerHTML="<br>",n.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=s8,this.cameraScanImage.alt=mn.cameraScanAltText()},i.prototype.insertFileScanImageToScanRegion=function(){var e=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage){n.innerHTML="<br>",n.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(a){n.innerHTML="<br>",n.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=a8,this.fileScanImage.alt=mn.fileScanAltText()},i.prototype.clearScanRegion=function(){var e=document.getElementById(this.getScanRegionId());e.innerHTML=""},i.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},i.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},i.prototype.getDashboardSectionSwapLinkId=function(){return Yr.SCAN_TYPE_CHANGE_ANCHOR_ID},i.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},i.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},i.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},i.prototype.getCameraPermissionButtonId=function(){return Yr.CAMERA_PERMISSION_BUTTON_ID},i.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},i.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},i.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},i})();const A8=({onRefresh:i})=>{var sn;const[e,n]=se.useState("roster"),[a,u]=se.useState(!1),[f,x]=se.useState([]),[b,T]=se.useState([]),[E,C]=se.useState([]),[I,M]=se.useState([]),[k,q]=se.useState([]),[Q,z]=se.useState([]),[de,Ee]=se.useState([]),[K,Se]=se.useState([]),[Ve,ke]=se.useState(""),[j,G]=se.useState(new Date().toISOString().substring(0,7)),[V,te]=se.useState(""),[W,J]=se.useState(null),[X,$e]=se.useState(""),[he,me]=se.useState(""),[we,Ge]=se.useState("normal"),[at,ft]=se.useState(""),[ne,Ae]=se.useState(!1),[Be,Ue]=se.useState(""),[et,Me]=se.useState("100"),[dt,Et]=se.useState(""),[Yt,Yi]=se.useState(""),[En,gr]=se.useState(!1),[xt,ai]=se.useState(""),[oi,Xi]=se.useState(""),[_n,zt]=se.useState(""),[We,An]=se.useState("other"),[Fe,ms]=se.useState(""),[Cs,hn]=se.useState(!1);se.useEffect(()=>{const re=U6(wi=>{T(wi.filter(qn=>qn.role===hs.STUDENT&&qn.isApproved)),C(wi.filter(qn=>qn.role===hs.STUDENT&&!qn.isApproved));const qr=wi.filter(qn=>qn.role===hs.STUDENT&&qn.isApproved);qr.length>0&&!Be&&Ue(qr[0].id)}),lt=uw(x),Tt=lw(M),qi=ow(q),Qt=M6(z),Xn=cw(Ee),Ii=sw(Se);return()=>{re(),lt(),Tt(),qi(),Qt(),Xn(),Ii()}},[Be]),se.useEffect(()=>{let re=null;return e==="scan"&&(re=new _8("reader",{fps:10,qrbox:{width:250,height:250},aspectRatio:1},!1),re.render(lt=>{te(lt)},()=>{})),()=>{re&&re.clear().catch(lt=>{console.error("Failed to clear scanner",lt)})}},[e]);const Rr=async re=>{const lt=V;if(!lt){alert("");return}u(!0),setTimeout(()=>{const Tt=f.find(qi=>qi.qrCodeData===lt&&qi.status==="pending");Tt?(J(Tt),te("")):alert(" "),u(!1)},1500)},li=async re=>{await x6(re,"completed"),J(null),i(),alert(" ")},vs=async()=>{var qi;const re=parseInt(et);if(isNaN(re)||!Be)return;const lt=b.map(Qt=>Qt.id===Be?{...Qt,points:Qt.points+re,totalEarned:re>0?Qt.totalEarned+re:Qt.totalEarned}:Qt);await h6(lt),i();const Tt=(qi=b.find(Qt=>Qt.id===Be))==null?void 0:qi.name;alert(`  ${Tt}  ${re} 
${dt}`),Me("")},pi=async re=>{await d6(re),alert("")},ei=async re=>{confirm("/")&&await g6(re)},Qs=async re=>{if(re.preventDefault(),!xt||!oi||!_n)return;const lt={id:`prod_${Date.now()}`,name:xt,price:parseInt(oi),stock:parseInt(_n),category:We,description:`${We==="food"?"":We==="electronic"?"":We==="ticket"?"":""}`,imageUrl:Fe||"https://images.unsplash.com/photo-1553456558-aff63285bdd1?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3"};await N6(lt),hn(!1),ai(""),Xi(""),zt(""),ms(""),An("other"),alert("")},ps=async re=>{window.confirm("")&&await R6(re)},Oa=async re=>{if(re.preventDefault(),!X||!he)return;const lt={id:`m_${Date.now()}`,title:X,description:"",points:parseInt(he),type:we,isActive:!0,maxAttempts:1,deadline:at?new Date(at).getTime():void 0};await _6(lt),Ae(!1),$e(""),me(""),Ge("normal"),ft(""),alert("")},Xt=async re=>{window.confirm("")&&await P6(re)},Oe=async()=>{Yt&&(await O6({id:`r_${Date.now()}`,title:Yt}),Yi(""),gr(!1))},qt=async re=>{await D6(re)},it=async re=>{await A6(re)},fn=async(re,lt)=>{await aw(re,lt),alert("")},mr=async re=>{await C6(re),alert("")},Is=async re=>{confirm("")&&await v6(re)},rr=f.filter(re=>{var Xn,Ii;const lt=(((Xn=re.productName)==null?void 0:Xn.toLowerCase())||"").includes(Ve.toLowerCase())||(((Ii=re.id)==null?void 0:Ii.toLowerCase())||"").includes(Ve.toLowerCase()),Tt=new Date(re.timestamp),Qt=`${Tt.getFullYear()}-${String(Tt.getMonth()+1).padStart(2,"0")}`===j;return lt&&Qt}),_t=re=>el.reduce((lt,Tt)=>re>=Tt.threshold?Tt:lt,el[0]);return v.jsxs("div",{className:"space-y-8 pb-20 animate-in fade-in duration-500",children:[v.jsx("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:v.jsxs("div",{children:[v.jsxs("h1",{className:"text-4xl font-black text-slate-800 flex items-center gap-4",children:[v.jsx("div",{className:"bg-indigo-600 p-3 rounded-2xl text-white shadow-xl shadow-indigo-100",children:v.jsx(nf,{size:32})}),""]}),v.jsx("p",{className:"text-slate-500 mt-2 italic font-medium",children:""})]})}),v.jsxs("div",{className:"flex bg-white p-2 rounded-3xl border border-slate-100 shadow-md overflow-x-auto gap-2",children:[v.jsxs("button",{onClick:()=>n("roster"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${e==="roster"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[v.jsx(f3,{size:18})," ",v.jsx("span",{children:""})]}),v.jsxs("button",{onClick:()=>n("approval"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${e==="approval"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50 relative"}`,children:[v.jsx(d1,{size:18})," ",v.jsx("span",{children:""}),E.length>0&&v.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full text-white text-[10px] flex items-center justify-center border-2 border-white",children:E.length})]}),v.jsxs("button",{onClick:()=>n("points"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${e==="points"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[v.jsx(SC,{size:18})," ",v.jsx("span",{children:""})]}),v.jsxs("button",{onClick:()=>n("products"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${e==="products"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[v.jsx(h1,{size:18})," ",v.jsx("span",{children:""})]}),v.jsxs("button",{onClick:()=>n("mission_approval"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${e==="mission_approval"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50 relative"}`,children:[v.jsx(u1,{size:18})," ",v.jsx("span",{children:""}),K.filter(re=>re.status==="pending").length>0&&v.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-pink-500 rounded-full text-white text-[10px] flex items-center justify-center border-2 border-white",children:K.filter(re=>re.status==="pending").length})]}),v.jsxs("button",{onClick:()=>n("scan"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${e==="scan"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[v.jsx(lx,{size:18})," ",v.jsx("span",{children:""})]}),v.jsxs("button",{onClick:()=>n("history"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${e==="history"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[v.jsx(tf,{size:18})," ",v.jsx("span",{children:""})]}),v.jsxs("button",{onClick:()=>n("missions"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${e==="missions"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[v.jsx(rf,{size:18})," ",v.jsx("span",{children:""})]}),v.jsxs("button",{onClick:()=>n("wishes"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${e==="wishes"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50 relative"}`,children:[v.jsx(Yh,{size:18})," ",v.jsx("span",{children:""}),de.length>0&&v.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-pink-500 rounded-full text-white text-[10px] flex items-center justify-center border-2 border-white",children:de.length})]})]}),e==="roster"&&v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 animate-in slide-in-from-bottom-4",children:b.map(re=>{const lt=_t(re.totalEarned);return v.jsxs("div",{className:"bg-white rounded-[2.5rem] p-8 border border-slate-100 shadow-sm hover:shadow-xl transition-all group overflow-hidden relative",children:[v.jsx("div",{className:`absolute top-0 right-0 w-24 h-24 ${lt.color} opacity-5 -translate-y-12 translate-x-12 rounded-full`}),v.jsxs("div",{className:"flex flex-col items-center text-center",children:[v.jsxs("div",{className:"relative mb-6",children:[v.jsx("div",{className:`absolute inset-0 rounded-full blur-xl opacity-20 ${lt.color}`}),v.jsx("img",{src:re.avatar,className:"w-24 h-24 rounded-full border-4 border-white shadow-2xl relative z-10 object-cover",alt:re.name}),v.jsx("div",{className:"absolute -bottom-2 -right-2 w-10 h-10 rounded-2xl bg-white shadow-lg flex items-center justify-center text-xl z-20 border border-slate-50",children:lt.icon})]}),v.jsx("h3",{className:"text-2xl font-black text-slate-800 mb-1",children:re.name}),v.jsx("div",{className:`px-4 py-1 rounded-full text-[10px] font-black text-white uppercase tracking-widest mb-6 ${lt.color} shadow-sm`,children:lt.name}),v.jsxs("div",{className:"w-full grid grid-cols-2 gap-4",children:[v.jsxs("div",{className:"bg-indigo-50/50 p-4 rounded-2xl border border-indigo-50",children:[v.jsx("p",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest mb-1",children:""}),v.jsx("p",{className:"text-xl font-black text-indigo-600",children:re.points.toLocaleString()})]}),v.jsxs("div",{className:"bg-amber-50/50 p-4 rounded-2xl border border-amber-50",children:[v.jsx("p",{className:"text-[10px] font-black text-amber-400 uppercase tracking-widest mb-1",children:""}),v.jsx("p",{className:"text-xl font-black text-amber-600",children:re.totalEarned.toLocaleString()})]})]})]}),v.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-50 flex justify-between items-center",children:[v.jsxs("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-tighter",children:["ID: ",re.id.replace("user_","")]}),v.jsxs("button",{onClick:()=>{Ue(re.id),n("points")},className:"text-indigo-600 font-black text-xs hover:underline flex items-center gap-1",children:[v.jsx(cx,{size:14})," "]})]})]},re.id)})}),e==="points"&&v.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[v.jsxs("div",{className:"flex items-center gap-6 mb-12",children:[v.jsx("div",{className:"w-20 h-20 bg-emerald-50 text-emerald-600 rounded-3xl flex items-center justify-center shadow-inner",children:v.jsx(cx,{size:40})}),v.jsxs("div",{children:[v.jsx("h2",{className:"text-3xl font-black text-slate-800 tracking-tight",children:""}),v.jsx("p",{className:"text-slate-400 font-medium",children:""})]})]}),v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16",children:[v.jsxs("div",{className:"space-y-8",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-[0.2em] mb-4",children:""}),v.jsx("div",{className:"grid grid-cols-3 gap-4",children:b.map(re=>v.jsxs("button",{onClick:()=>Ue(re.id),className:`flex flex-col items-center gap-3 p-4 rounded-3xl border-2 transition-all ${Be===re.id?"border-indigo-600 bg-indigo-50 shadow-lg shadow-indigo-100":"border-slate-50 bg-slate-50/50 hover:bg-white hover:border-slate-200"}`,children:[v.jsx("img",{src:re.avatar,className:"w-12 h-12 rounded-full shadow-sm",alt:re.name}),v.jsx("span",{className:`font-black text-sm ${Be===re.id?"text-indigo-600":"text-slate-600"}`,children:re.name})]},re.id))})]}),v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),v.jsxs("button",{onClick:()=>gr(!En),className:"text-xs font-black text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:[En?v.jsx(Kl,{size:14}):v.jsx(Qc,{size:14}),En?"":""]})]}),En?v.jsxs("div",{className:"bg-slate-50 p-6 rounded-2xl border-2 border-indigo-100 mb-4 animate-in zoom-in-95 duration-200",children:[v.jsxs("div",{className:"flex gap-2",children:[v.jsx("input",{type:"text",placeholder:" (: )",value:Yt,onChange:re=>Yi(re.target.value),className:"flex-1 p-3 border-2 border-slate-200 rounded-xl focus:border-indigo-600 outline-none font-bold"}),v.jsx("button",{onClick:Oe,className:"bg-indigo-600 text-white p-3 rounded-xl hover:bg-indigo-700 shadow-md",children:v.jsx(Qc,{size:20})})]}),v.jsx("div",{className:"mt-4 space-y-2 max-h-40 overflow-y-auto pr-2",children:Q.map(re=>v.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg border border-slate-100",children:[v.jsx("span",{className:"font-bold text-sm text-slate-700",children:re.title}),v.jsx("button",{onClick:()=>qt(re.id),className:"text-rose-500 hover:text-rose-600",children:v.jsx(W0,{size:16})})]},re.id))})]}):v.jsxs("select",{value:dt,onChange:re=>Et(re.target.value),className:"w-full p-5 bg-slate-50 border-2 border-transparent rounded-2xl focus:bg-white focus:border-indigo-600 focus:ring-4 focus:ring-indigo-100 transition-all outline-none font-bold text-slate-700 shadow-inner",children:[v.jsx("option",{value:"",children:"..."}),Q.length>0?Q.map(re=>v.jsx("option",{value:re.title,children:re.title},re.id)):v.jsxs(v.Fragment,{children:[v.jsx("option",{children:""}),v.jsx("option",{children:""}),v.jsx("option",{children:" A++"}),v.jsx("option",{children:""})]}),v.jsx("option",{value:"other",children:""})]}),dt==="other"&&!En&&v.jsx("input",{type:"text",placeholder:"...",value:dt==="other"?"":dt,onChange:re=>Et(re.target.value),className:"w-full mt-4 p-5 bg-white border-2 border-indigo-200 rounded-2xl outline-none font-bold text-slate-700"})]})]}),v.jsxs("div",{className:"space-y-8",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-[0.2em] mb-4",children:""}),v.jsxs("div",{className:"relative",children:[v.jsx("input",{type:"number",value:et,onChange:re=>Me(re.target.value),className:"w-full p-8 text-5xl font-black bg-slate-50 border-2 border-transparent rounded-[2rem] focus:bg-white focus:border-indigo-600 focus:ring-4 focus:ring-indigo-100 transition-all outline-none text-indigo-600 shadow-inner"}),v.jsx("div",{className:"absolute right-8 top-1/2 -translate-y-1/2 flex items-center gap-2 pointer-events-none",children:v.jsx("span",{className:"font-black text-slate-300 text-2xl uppercase tracking-tighter",children:"PTS"})})]})]}),v.jsxs("button",{onClick:vs,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white font-black py-8 rounded-[2rem] transition-all shadow-2xl shadow-emerald-200 flex items-center justify-center gap-4 text-2xl active:scale-95 group",children:[v.jsx(qc,{size:32,className:"group-hover:scale-125 transition-transform"}),""]})]})]})]}),e==="approval"&&v.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[v.jsxs("h2",{className:"text-3xl font-black text-slate-800 mb-8 flex items-center gap-3",children:[v.jsx(d1,{className:"text-indigo-600"}),"",v.jsxs("span",{className:"bg-indigo-100 text-indigo-600 text-sm px-3 py-1 rounded-full",children:[E.length," "]})]}),v.jsx("div",{className:"space-y-4",children:E.length===0?v.jsx("div",{className:"text-center py-20 text-slate-400 font-bold",children:""}):E.map(re=>v.jsxs("div",{className:"flex items-center justify-between p-6 bg-slate-50 rounded-2xl border border-slate-100",children:[v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("div",{className:"w-12 h-12 bg-indigo-200 rounded-full flex items-center justify-center text-indigo-700 font-bold text-xl",children:re.name[0]}),v.jsxs("div",{children:[v.jsx("h3",{className:"font-black text-lg text-slate-800",children:re.name}),v.jsx("p",{className:"text-slate-500 text-sm font-bold",children:re.grade||""})]})]}),v.jsxs("div",{className:"flex gap-3",children:[v.jsx("button",{onClick:()=>pi(re.id),className:"bg-emerald-500 hover:bg-emerald-600 text-white px-6 py-2 rounded-xl font-bold transition-all shadow-lg shadow-emerald-100",children:""}),v.jsx("button",{onClick:()=>ei(re.id),className:"bg-slate-200 hover:bg-rose-500 hover:text-white text-slate-500 px-6 py-2 rounded-xl font-bold transition-all",children:""})]})]},re.id))})]}),e==="products"&&v.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[v.jsxs("div",{className:"flex justify-between items-center mb-8",children:[v.jsxs("h2",{className:"text-3xl font-black text-slate-800 flex items-center gap-3",children:[v.jsx(h1,{className:"text-indigo-600"})," "]}),v.jsxs("button",{onClick:()=>hn(!Cs),className:"bg-indigo-600 text-white px-5 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100",children:[v.jsx(Qc,{size:20})," "]})]}),Cs&&v.jsxs("form",{onSubmit:Qs,className:"bg-slate-50 p-6 rounded-2xl mb-8 border border-slate-200 animate-in fade-in",children:[v.jsx("h3",{className:"font-black text-slate-700 mb-4",children:""}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[v.jsx("input",{placeholder:"",value:xt,onChange:re=>ai(re.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"}),v.jsxs("select",{value:We,onChange:re=>An(re.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500",children:[v.jsx("option",{value:"food",children:""}),v.jsx("option",{value:"electronic",children:""}),v.jsx("option",{value:"ticket",children:""}),v.jsx("option",{value:"other",children:""})]}),v.jsx("input",{placeholder:" ()",value:Fe,onChange:re=>ms(re.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"}),v.jsx("input",{placeholder:" ()",type:"number",value:oi,onChange:re=>Xi(re.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"}),v.jsx("input",{placeholder:"",type:"number",value:_n,onChange:re=>zt(re.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"})]}),v.jsxs("div",{className:"flex justify-end gap-2",children:[v.jsx("button",{type:"button",onClick:()=>hn(!1),className:"px-4 py-2 text-slate-400 font-bold hover:text-slate-600",children:""}),v.jsx("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700",children:""})]})]}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:I.map(re=>v.jsxs("div",{className:"border border-slate-100 rounded-[2rem] p-6 flex flex-col gap-4 group hover:shadow-xl transition-all bg-white relative",children:[v.jsxs("div",{className:"flex gap-4 items-center",children:[v.jsx("img",{src:re.imageUrl,alt:re.name,className:"w-20 h-20 rounded-2xl object-cover shadow-sm"}),v.jsxs("div",{className:"flex-1",children:[v.jsx("h4",{className:"font-black text-slate-800 text-lg",children:re.name}),v.jsx("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest",children:re.category}),v.jsxs("p",{className:"text-indigo-600 font-black",children:[re.price," PTS"]})]}),v.jsx("button",{onClick:()=>ps(re.id),className:"p-2 text-slate-300 hover:text-rose-500 transition-colors",children:v.jsx(W0,{size:18})})]}),v.jsx("div",{className:"flex items-center justify-between pt-4 border-t border-slate-50",children:v.jsxs("div",{className:"flex flex-col",children:[v.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter mb-1",children:""}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("input",{type:"number",defaultValue:re.stock,onBlur:lt=>fn(re.id,parseInt(lt.target.value)||0),className:"w-16 p-2 bg-slate-50 border border-slate-200 rounded-lg text-sm font-black text-slate-700 outline-none focus:ring-2 focus:ring-indigo-500"}),v.jsx("span",{className:`text-[10px] font-black px-2 py-1 rounded-lg ${re.stock>0?"bg-emerald-100 text-emerald-600":"bg-red-100 text-red-600"}`,children:re.stock>0?"ON SALE":"SOLD OUT"})]})]})})]},re.id))})]}),e==="mission_approval"&&v.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[v.jsxs("h2",{className:"text-3xl font-black text-slate-800 mb-8 flex items-center gap-3",children:[v.jsx(u1,{className:"text-emerald-600"}),"",v.jsxs("span",{className:"bg-emerald-100 text-emerald-600 text-sm px-3 py-1 rounded-full",children:[K.filter(re=>re.status==="pending").length," "]})]}),v.jsx("div",{className:"space-y-6",children:K.filter(re=>re.status==="pending").length===0?v.jsx("div",{className:"text-center py-24 text-slate-400 font-bold bg-slate-50 rounded-[3rem] border border-slate-100 border-dashed",children:""}):K.filter(re=>re.status==="pending").map(re=>v.jsxs("div",{className:"bg-slate-50 p-8 rounded-[2.5rem] border border-slate-100 flex flex-col md:flex-row md:items-center justify-between gap-6",children:[v.jsxs("div",{className:"flex items-center gap-6",children:[v.jsx("div",{className:"w-16 h-16 bg-white rounded-2xl shadow-sm flex items-center justify-center text-2xl font-black text-indigo-600 border border-slate-100",children:re.userName[0]}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-xl font-black text-slate-800",children:re.userName}),v.jsxs("p",{className:"text-slate-500 font-bold flex items-center gap-2",children:["",v.jsxs("span",{className:"text-indigo-600",children:["",re.missionTitle,""]})]}),v.jsxs("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest mt-2",children:["",re.points," PTS  ",new Date(re.timestamp).toLocaleString()]})]})]}),v.jsxs("div",{className:"flex gap-4",children:[v.jsxs("button",{onClick:()=>mr(re.id),className:"bg-emerald-600 hover:bg-emerald-700 text-white px-8 py-3 rounded-2xl font-black transition-all shadow-xl shadow-emerald-100 flex items-center gap-2",children:[v.jsx(qc,{size:20})," "]}),v.jsx("button",{onClick:()=>Is(re.id),className:"bg-white hover:bg-rose-50 text-slate-400 hover:text-rose-600 px-8 py-3 rounded-2xl font-black transition-all border border-slate-200",children:""})]})]},re.id))})]}),e==="scan"&&v.jsxs("div",{className:"bg-white rounded-[3rem] p-16 border border-slate-100 text-center shadow-xl animate-in fade-in",children:[v.jsx("div",{className:"bg-indigo-50 w-32 h-32 rounded-[2.5rem] flex items-center justify-center mx-auto mb-8 text-indigo-600 shadow-inner",children:v.jsx(lx,{size:56})}),v.jsx("h2",{className:"text-3xl font-black text-slate-800 mb-4 tracking-tight",children:""}),v.jsx("p",{className:"text-slate-400 mb-8 font-medium max-w-md mx-auto leading-relaxed",children:" QR Code "}),v.jsx("div",{className:"max-w-md mx-auto mb-8 overflow-hidden rounded-[2rem] border-4 border-indigo-50 shadow-inner",children:v.jsx("div",{id:"reader",className:"w-full"})}),v.jsxs("div",{className:"max-w-md mx-auto mb-8",children:[v.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[v.jsx("div",{className:"h-px bg-slate-200 flex-1"}),v.jsx("span",{className:"text-[10px] font-black text-slate-300 uppercase tracking-widest",children:""}),v.jsx("div",{className:"h-px bg-slate-200 flex-1"})]}),v.jsx("input",{type:"text",placeholder:" QR Code ...",value:V,onChange:re=>te(re.target.value),className:"w-full p-4 bg-slate-50 border-2 border-indigo-50 rounded-2xl focus:bg-white focus:border-indigo-600 outline-none font-mono text-xs text-slate-500 text-center"})]}),v.jsx("button",{onClick:()=>Rr(),disabled:a,className:"bg-indigo-600 hover:bg-indigo-700 disabled:bg-slate-300 text-white px-16 py-6 rounded-[2rem] font-black transition-all shadow-2xl shadow-indigo-200 inline-flex items-center justify-center gap-4 text-xl active:scale-95",children:a?"...":""})]}),e==="history"&&v.jsxs("section",{className:"bg-white rounded-[3rem] border border-slate-100 shadow-xl overflow-hidden animate-in fade-in",children:[v.jsxs("div",{className:"p-10 border-b border-slate-50 flex flex-col md:flex-row md:items-center justify-between gap-6",children:[v.jsxs("h2",{className:"font-black text-2xl text-slate-800 flex items-center gap-3",children:[v.jsx(tf,{className:"text-indigo-600"}),""]}),v.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[v.jsx("div",{className:"relative",children:v.jsx("input",{type:"month",value:j,onChange:re=>G(re.target.value),className:"pl-5 pr-5 py-4 rounded-2xl bg-slate-50 border-2 border-transparent focus:bg-white focus:border-indigo-600 focus:ring-4 focus:ring-indigo-100 transition-all outline-none text-sm font-bold shadow-inner"})}),v.jsxs("div",{className:"relative",children:[v.jsx(HC,{className:"absolute left-5 top-1/2 -translate-y-1/2 text-slate-400",size:20}),v.jsx("input",{type:"text",placeholder:"...",value:Ve,onChange:re=>ke(re.target.value),className:"pl-14 pr-8 py-4 rounded-2xl bg-slate-50 border-2 border-transparent focus:bg-white focus:border-indigo-600 focus:ring-4 focus:ring-indigo-100 transition-all outline-none text-sm w-full md:w-80 shadow-inner font-bold"})]})]})]}),v.jsx("div",{className:"overflow-x-auto",children:v.jsxs("table",{className:"w-full",children:[v.jsx("thead",{className:"bg-slate-50/50",children:v.jsxs("tr",{children:[v.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),v.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),v.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),v.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),v.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),v.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""})]})}),v.jsx("tbody",{className:"divide-y divide-slate-50",children:rr.map(re=>{var lt;try{return v.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors",children:[v.jsx("td",{className:"px-10 py-6 whitespace-nowrap",children:v.jsx("span",{className:`px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest ${re.status==="completed"?"bg-emerald-100 text-emerald-700":re.status==="pending"?"bg-amber-100 text-amber-700":"bg-rose-100 text-rose-700"}`,children:re.status==="completed"?"":re.status==="pending"?"":""})}),v.jsx("td",{className:"px-10 py-6 whitespace-nowrap font-black text-slate-800",children:((lt=b.find(Tt=>Tt.id===re.userId))==null?void 0:lt.name)||""}),v.jsx("td",{className:"px-10 py-6 whitespace-nowrap font-bold text-slate-600",children:re.productName}),v.jsxs("td",{className:"px-10 py-6 whitespace-nowrap text-indigo-600 font-black",children:[re.pointsSpent," PTS"]}),v.jsx("td",{className:"px-10 py-6 whitespace-nowrap text-slate-400 text-sm font-bold",children:re.timestamp?new Date(re.timestamp).toLocaleDateString():""}),v.jsx("td",{className:"px-10 py-6 whitespace-nowrap",children:re.status==="pending"?v.jsx("button",{onClick:()=>li(re.id),className:"text-white bg-indigo-600 hover:bg-indigo-700 px-5 py-2.5 rounded-xl text-xs font-black transition-all shadow-xl shadow-indigo-100 active:scale-95",children:""}):v.jsxs("div",{className:"flex items-center gap-2 text-slate-300 font-black text-[10px] tracking-widest",children:[v.jsx(qc,{size:14})," FINISHED"]})})]},re.id)}catch(Tt){return console.error("Row render error",Tt),null}})})]})})]}),e==="missions"&&v.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[v.jsxs("div",{className:"flex justify-between items-center mb-8",children:[v.jsxs("h2",{className:"text-3xl font-black text-slate-800 flex items-center gap-3",children:[v.jsx(rf,{className:"text-indigo-600"})," "]}),v.jsxs("button",{onClick:()=>Ae(!ne),className:"bg-indigo-600 text-white px-5 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100",children:[v.jsx(Qc,{size:18})," "]})]}),ne&&v.jsxs("form",{onSubmit:Oa,className:"bg-slate-50 p-6 rounded-2xl mb-8 border border-slate-200 animate-in fade-in",children:[v.jsx("h3",{className:"font-black text-slate-700 mb-4",children:""}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[v.jsx("input",{placeholder:"",value:X,onChange:re=>$e(re.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"}),v.jsx("input",{placeholder:"",type:"number",value:he,onChange:re=>me(re.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"}),v.jsxs("select",{value:we,onChange:re=>Ge(re.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500",children:[v.jsx("option",{value:"normal",children:""}),v.jsx("option",{value:"challenge",children:""}),v.jsx("option",{value:"hard",children:""})]}),v.jsxs("div",{className:"flex items-center gap-2 p-3 bg-white rounded-xl border border-slate-200",children:[v.jsx(ef,{size:18,className:"text-slate-400"}),v.jsx("input",{type:"datetime-local",value:at,onChange:re=>ft(re.target.value),className:"font-bold outline-none text-slate-600 w-full",placeholder:" ()"})]})]}),v.jsxs("div",{className:"flex justify-end gap-3",children:[v.jsx("button",{type:"button",onClick:()=>Ae(!1),className:"px-4 py-2 rounded-xl font-bold text-slate-400 hover:bg-slate-200 transition-all",children:""}),v.jsx("button",{type:"submit",className:"bg-indigo-600 text-white px-6 py-2 rounded-xl font-bold hover:bg-indigo-700 transition-all shadow-lg",children:""})]})]}),v.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[k.length===0&&v.jsx("div",{className:"text-center py-12 text-slate-400 font-bold bg-slate-50 rounded-2xl border border-slate-100 border-dashed",children:""}),k.map(re=>v.jsxs("div",{className:`flex flex-col md:flex-row md:items-center justify-between p-6 rounded-2xl border transition-all ${re.isActive?"bg-white border-slate-100 shadow-sm":"bg-slate-50 border-slate-100 opacity-60"}`,children:[v.jsxs("div",{className:"flex items-center gap-4 mb-4 md:mb-0",children:[v.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center font-black text-lg shrink-0 ${re.type==="normal"?"bg-emerald-100 text-emerald-600":re.type==="challenge"?"bg-orange-100 text-orange-600":"bg-rose-100 text-rose-600"}`,children:re.type==="normal"?"N":re.type==="challenge"?"C":"H"}),v.jsxs("div",{children:[v.jsxs("h3",{className:"font-black text-lg text-slate-800 flex items-center gap-2",children:[re.title,!re.isActive&&v.jsx("span",{className:"text-[10px] bg-slate-200 text-slate-500 px-2 py-0.5 rounded-full",children:""})]}),v.jsxs("p",{className:"text-slate-400 text-sm font-bold flex items-center gap-2",children:[v.jsxs("span",{className:"text-indigo-500",children:[re.points," PTS"]}),"  ",re.description,re.deadline&&v.jsxs("span",{className:"flex items-center gap-1 text-amber-500 ml-2",children:[v.jsx(ef,{size:14})," ",new Date(re.deadline).toLocaleString()," "]})]})]})]}),v.jsx("button",{onClick:()=>it(re.id),className:`px-4 py-2 rounded-xl font-black text-xs transition-all whitespace-nowrap ${re.isActive?"bg-rose-50 text-rose-600 hover:bg-rose-100":"bg-emerald-50 text-emerald-600 hover:bg-emerald-100"}`,children:re.isActive?"":""})]},re.id))]})]}),e==="wishes"&&v.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[v.jsxs("h2",{className:"text-3xl font-black text-slate-800 mb-8 flex items-center gap-3",children:[v.jsx(Yh,{className:"text-pink-500"})," "]}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:de.length===0?v.jsx("div",{className:"col-span-full py-20 text-center text-slate-400 font-bold",children:""}):de.map(re=>{var lt;return v.jsxs("div",{className:"bg-slate-50 p-6 rounded-[2.5rem] border border-slate-100 relative group",children:[v.jsx("button",{onClick:()=>Xt(re.id),className:"absolute top-4 right-4 p-2 bg-white rounded-full text-slate-300 hover:text-rose-500 hover:shadow-md transition-all opacity-0 group-hover:opacity-100",children:v.jsx(W0,{size:18})}),v.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[v.jsx("img",{src:re.userAvatar,className:"w-12 h-12 rounded-full border-2 border-white shadow-sm",alt:re.userName}),v.jsxs("div",{children:[v.jsx("h4",{className:"font-black text-slate-800",children:re.userName}),v.jsx("p",{className:"text-[10px] text-slate-400 font-bold",children:new Date(re.timestamp).toLocaleString()})]})]}),v.jsxs("h3",{className:"text-xl font-black text-slate-800 mb-2",children:["",re.itemName]}),v.jsxs("p",{className:"text-slate-500 text-sm mb-6 leading-relaxed italic",children:['"',re.description,'"']}),v.jsxs("div",{className:"flex items-center gap-2 text-pink-500 font-black text-sm",children:[v.jsx(Yh,{size:16,fill:"currentColor"})," ",((lt=re.likedBy)==null?void 0:lt.length)||0," "]})]},re.id)})})]}),a&&v.jsxs("div",{className:"fixed inset-0 z-[150] bg-slate-900/95 backdrop-blur-xl flex flex-col items-center justify-center p-8",children:[v.jsxs("div",{className:"relative w-full max-w-lg aspect-square border-8 border-white/5 rounded-[5rem] overflow-hidden shadow-[0_0_100px_rgba(79,70,229,0.3)]",children:[v.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-900 via-indigo-900/20 to-slate-900 flex items-center justify-center",children:v.jsxs("div",{className:"text-center",children:[v.jsx(FC,{size:140,className:"mx-auto mb-10 animate-pulse text-indigo-400"}),v.jsx("p",{className:"text-3xl font-black text-white mb-4 tracking-tight",children:"..."}),v.jsx("p",{className:"text-indigo-300 font-bold tracking-widest uppercase text-xs",children:"AI Computer Vision Active"})]})}),v.jsx("div",{className:"absolute top-0 left-0 w-full h-3 bg-indigo-400 shadow-[0_0_50px_rgba(129,140,248,1)] animate-scan-line"})]}),v.jsxs("button",{onClick:()=>u(!1),className:"mt-16 bg-white/5 hover:bg-white/10 text-white px-12 py-5 rounded-[2rem] font-black transition-all border border-white/10 flex items-center gap-4 text-lg backdrop-blur",children:[v.jsx(Kl,{size:24})," "]}),v.jsx("style",{children:`
            @keyframes scan-line {
              0% { top: 0% }
              100% { top: 100% }
            }
            .animate-scan-line {
              animation: scan-line 3s linear infinite;
            }
          `})]}),W&&v.jsx("div",{className:"fixed inset-0 z-[160] flex items-center justify-center p-4 bg-slate-900/70 backdrop-blur-2xl",children:v.jsxs("div",{className:"bg-white rounded-[4rem] max-w-md w-full p-12 shadow-[0_0_80px_rgba(0,0,0,0.5)] animate-in zoom-in-95 duration-200",children:[v.jsx("div",{className:"bg-emerald-50 w-24 h-24 rounded-[2rem] flex items-center justify-center text-emerald-600 mb-10 mx-auto shadow-inner",children:v.jsx(nf,{size:48})}),v.jsx("h2",{className:"text-3xl font-black text-slate-800 text-center mb-10 tracking-tight",children:""}),v.jsxs("div",{className:"bg-slate-50 rounded-[2.5rem] p-8 space-y-6 mb-12 border border-slate-100 shadow-inner",children:[v.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-slate-200/50",children:[v.jsx("span",{className:"text-slate-400 text-[10px] font-black uppercase tracking-widest",children:""}),v.jsx("span",{className:"font-black text-slate-800 text-xl",children:(sn=b.find(re=>re.id===W.userId))==null?void 0:sn.name})]}),v.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-slate-200/50",children:[v.jsx("span",{className:"text-slate-400 text-[10px] font-black uppercase tracking-widest",children:""}),v.jsx("span",{className:"font-black text-slate-800 text-xl",children:W.productName})]}),v.jsxs("div",{className:"flex justify-between items-center py-2",children:[v.jsx("span",{className:"text-slate-400 text-[10px] font-black uppercase tracking-widest",children:""}),v.jsxs("span",{className:"font-black text-indigo-600 text-2xl",children:[W.pointsSpent," ",v.jsx("span",{className:"text-xs font-bold text-indigo-400",children:"PTS"})]})]})]}),v.jsxs("div",{className:"flex flex-col gap-4",children:[v.jsxs("button",{onClick:()=>li(W.id),className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-6 rounded-2xl transition-all shadow-2xl shadow-indigo-100 flex items-center justify-center gap-4 text-xl active:scale-95",children:[v.jsx(qc,{size:28}),""]}),v.jsx("button",{onClick:()=>J(null),className:"w-full bg-slate-100 text-slate-600 font-bold py-5 rounded-2xl hover:bg-slate-200 transition-all text-lg",children:""})]})]})})]})},w8=({user:i})=>{const[e,n]=se.useState([]),[a,u]=se.useState(!1),[f,x]=se.useState(""),[b,T]=se.useState("");se.useEffect(()=>{const M=cw(k=>{n(k.sort((q,Q)=>Q.timestamp-q.timestamp))});return()=>M()},[]);const E=async M=>{if(M.preventDefault(),!f.trim()||!b.trim())return;const k={id:`wish_${Date.now()}`,userId:i.id,userName:i.name,userAvatar:i.avatar,itemName:f,description:b,timestamp:Date.now(),likedBy:[]};await B6(k),u(!1),x(""),T("")},C=async M=>{await k6(M,i.id)},I=e.some(M=>M.userId===i.id);return v.jsxs("div",{className:"space-y-8 pb-20",children:[v.jsxs("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[v.jsxs("div",{children:[v.jsxs("h1",{className:"text-3xl font-bold text-slate-800 flex items-center gap-3",children:[v.jsx(f1,{className:"text-yellow-500"}),""]}),v.jsx("p",{className:"text-slate-500 mt-1",children:""})]}),v.jsxs("button",{onClick:()=>{I?alert(""):u(!0)},className:`px-6 py-3 rounded-2xl font-bold shadow-lg flex items-center gap-2 transition-all hover:scale-105 ${I?"bg-slate-200 text-slate-400 cursor-not-allowed":"bg-indigo-600 text-white shadow-indigo-100 hover:bg-indigo-700"}`,children:[v.jsx(Qc,{size:20}),v.jsx("span",{children:I?"":""})]})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.map(M=>{var k,q,Q,z;return v.jsxs("div",{className:"bg-white rounded-[2rem] p-6 border border-slate-100 shadow-sm hover:shadow-md transition-all flex flex-col relative overflow-hidden group",children:[v.jsx("div",{className:"absolute -right-4 -top-4 w-24 h-24 bg-yellow-50 rounded-full blur-2xl group-hover:bg-yellow-100 transition-colors"}),v.jsxs("div",{className:"flex items-center gap-3 mb-4 z-10",children:[v.jsx("img",{src:M.userAvatar,alt:M.userName,className:"w-10 h-10 rounded-full border-2 border-white shadow-sm"}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm font-bold text-slate-700",children:M.userName}),v.jsx("p",{className:"text-xs text-slate-400",children:new Date(M.timestamp).toLocaleDateString()})]})]}),v.jsx("h3",{className:"text-xl font-black text-slate-800 mb-2 z-10",children:M.itemName}),v.jsx("p",{className:"text-slate-500 text-sm mb-6 flex-1 z-10",children:M.description}),v.jsx("div",{className:"flex items-center justify-between pt-4 border-t border-slate-50 z-10",children:v.jsxs("button",{onClick:()=>C(M.id),className:`flex items-center gap-2 transition-colors group/like ${(k=M.likedBy)!=null&&k.includes(i.id)?"text-pink-500":"text-slate-400 hover:text-pink-500"}`,children:[v.jsx("div",{className:`p-2 rounded-full transition-colors ${(q=M.likedBy)!=null&&q.includes(i.id)?"bg-pink-50":"hover:bg-pink-50"}`,children:v.jsx(n3,{size:18,className:(Q=M.likedBy)!=null&&Q.includes(i.id)?"fill-pink-500":""})}),v.jsxs("span",{className:"font-bold text-sm",children:[((z=M.likedBy)==null?void 0:z.length)||0," "]})]})})]},M.id)}),e.length===0&&v.jsxs("div",{className:"col-span-full py-20 text-center space-y-4",children:[v.jsx("div",{className:"w-20 h-20 bg-slate-50 rounded-full flex items-center justify-center mx-auto text-slate-300",children:v.jsx(Yh,{size:40})}),v.jsx("p",{className:"text-slate-400 font-bold",children:""})]})]}),a&&v.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:v.jsxs("div",{className:"bg-white rounded-[2.5rem] max-w-lg w-full p-8 shadow-2xl animate-in zoom-in-95 duration-200",children:[v.jsxs("div",{className:"flex justify-between items-center mb-8",children:[v.jsxs("h2",{className:"text-2xl font-black text-slate-800 flex items-center gap-2",children:[v.jsx(f1,{className:"text-indigo-500"}),""]}),v.jsx("button",{onClick:()=>u(!1),className:"text-slate-400 hover:text-slate-600 bg-slate-50 p-2 rounded-full",children:v.jsx(Kl,{size:24})})]}),v.jsxs("form",{onSubmit:E,className:"space-y-6",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-slate-700 font-bold mb-2 ml-1",children:""}),v.jsx("input",{type:"text",value:f,onChange:M=>x(M.target.value),placeholder:"AirPods Pro...",className:"w-full bg-slate-50 border border-slate-200 rounded-2xl px-5 py-4 font-bold text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all placeholder:font-medium",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-slate-700 font-bold mb-2 ml-1",children:""}),v.jsx("textarea",{value:b,onChange:M=>T(M.target.value),placeholder:"...",className:"w-full bg-slate-50 border border-slate-200 rounded-2xl px-5 py-4 font-medium text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all h-32 resize-none placeholder:font-medium",required:!0})]}),v.jsxs("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-5 rounded-[1.25rem] transition-all shadow-xl shadow-indigo-100 flex items-center justify-center gap-3 text-lg",children:[v.jsx(YC,{size:24}),""]})]})]})})]})},T8=({onLogin:i})=>{const[e,n]=se.useState("student"),[a,u]=se.useState(!1),[f,x]=se.useState(""),[b,T]=se.useState(""),[E,C]=se.useState(""),[I,M]=se.useState(""),[k,q]=se.useState(""),Q=async K=>{K.preventDefault();const Ve=(await iw()).find(ke=>ke.name===f);if(!Ve){alert("");return}if(Ve.password&&Ve.password!==b){alert("");return}if(!Ve.isApproved){alert("");return}await Jh(Ve),alert(""),i(Ve)},z=async K=>{K.preventDefault(),await f6(f,b,E)?(alert(""),u(!1),T("")):alert("")},de=K=>{K.preventDefault(),I==="0957999"?(Jh(yy),alert(""),i(yy)):alert("")},Ee=K=>{K.preventDefault(),k.toLowerCase()==="aaa"?(Jh(Ey),alert(""),i(Ey)):alert("")};return v.jsx("div",{className:"min-h-screen bg-[#f8fafc] flex items-center justify-center p-4",children:v.jsxs("div",{className:"bg-white max-w-4xl w-full rounded-[3rem] shadow-2xl overflow-hidden flex flex-col md:flex-row min-h-[600px]",children:[v.jsxs("div",{className:"bg-indigo-600 p-12 text-white md:w-5/12 flex flex-col justify-between relative overflow-hidden",children:[v.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-500 rounded-full -translate-y-1/2 translate-x-1/3 opacity-50"}),v.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-indigo-700 rounded-full translate-y-1/3 -translate-x-1/3 opacity-50"}),v.jsxs("div",{className:"relative z-10",children:[v.jsx("div",{className:"bg-white/20 w-16 h-16 rounded-2xl flex items-center justify-center backdrop-blur-sm mb-6",children:v.jsx(m_,{size:32})}),v.jsx("h1",{className:"text-4xl font-black tracking-tight mb-4",children:""}),v.jsx("p",{className:"text-indigo-100 font-medium text-lg leading-relaxed",children:""})]}),v.jsx("div",{className:"relative z-10 text-sm font-medium text-indigo-200",children:" 2026 Workshop System"})]}),v.jsxs("div",{className:"p-8 md:p-12 md:w-7/12 flex flex-col",children:[!a&&v.jsxs("div",{className:"flex gap-2 mb-10 overflow-x-auto pb-2",children:[v.jsxs("button",{onClick:()=>n("student"),className:`flex-1 min-w-[100px] py-3 rounded-xl font-bold text-sm transition-all flex flex-col items-center gap-1 ${e==="student"?"bg-indigo-50 text-indigo-600 ring-2 ring-indigo-500 ring-offset-2":"bg-slate-50 text-slate-400 hover:bg-slate-100"}`,children:[v.jsx(u3,{size:18})," "]}),v.jsxs("button",{onClick:()=>n("admin"),className:`flex-1 min-w-[100px] py-3 rounded-xl font-bold text-sm transition-all flex flex-col items-center gap-1 ${e==="admin"?"bg-indigo-50 text-indigo-600 ring-2 ring-indigo-500 ring-offset-2":"bg-slate-50 text-slate-400 hover:bg-slate-100"}`,children:[v.jsx(nf,{size:18})," "]}),v.jsxs("button",{onClick:()=>n("guest"),className:`flex-1 min-w-[100px] py-3 rounded-xl font-bold text-sm transition-all flex flex-col items-center gap-1 ${e==="guest"?"bg-indigo-50 text-indigo-600 ring-2 ring-indigo-500 ring-offset-2":"bg-slate-50 text-slate-400 hover:bg-slate-100"}`,children:[v.jsx(_C,{size:18})," "]})]}),!a&&e==="student"&&v.jsxs("form",{onSubmit:Q,className:"space-y-6 flex-1 flex flex-col justify-center animate-in fade-in slide-in-from-right-4 duration-300",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-1",children:""}),v.jsx("p",{className:"text-slate-400",children:""})]}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),v.jsx("input",{type:"text",value:f,onChange:K=>x(K.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:""})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),v.jsx("input",{type:"password",value:b,onChange:K=>T(K.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:""})]})]}),v.jsx("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-4 rounded-2xl shadow-xl shadow-indigo-100 transition-all active:scale-95",children:""}),v.jsx("div",{className:"text-center",children:v.jsx("button",{type:"button",onClick:()=>u(!0),className:"text-indigo-500 font-bold hover:underline",children:""})})]}),a&&v.jsxs("form",{onSubmit:z,className:"space-y-6 flex-1 flex flex-col justify-center animate-in fade-in slide-in-from-right-4 duration-300",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-1",children:""}),v.jsx("p",{className:"text-slate-400",children:""})]}),v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),v.jsx("input",{type:"text",value:f,onChange:K=>x(K.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:"",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),v.jsx("input",{type:"password",value:b,onChange:K=>T(K.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:"",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),v.jsxs("select",{value:E,onChange:K=>C(K.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",children:[v.jsx("option",{children:""}),v.jsx("option",{children:""}),v.jsx("option",{children:""})]})]})]}),v.jsxs("button",{type:"submit",className:"w-full bg-slate-800 hover:bg-slate-900 text-white font-black py-4 rounded-2xl shadow-xl transition-all active:scale-95 flex items-center justify-center gap-2",children:[v.jsx(d1,{size:20}),""]}),v.jsx("div",{className:"text-center",children:v.jsx("button",{type:"button",onClick:()=>u(!1),className:"text-slate-400 font-bold hover:text-slate-600",children:""})})]}),!a&&e==="admin"&&v.jsxs("form",{onSubmit:de,className:"space-y-6 flex-1 flex flex-col justify-center animate-in fade-in slide-in-from-right-4 duration-300",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-1",children:""}),v.jsx("p",{className:"text-slate-400",children:""})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),v.jsx("input",{type:"password",value:I,onChange:K=>M(K.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:"..."})]}),v.jsx("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-4 rounded-2xl shadow-xl shadow-indigo-100 transition-all active:scale-95",children:""})]}),!a&&e==="guest"&&v.jsxs("form",{onSubmit:Ee,className:"space-y-6 flex-1 flex flex-col justify-center animate-in fade-in slide-in-from-right-4 duration-300",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-1",children:""}),v.jsx("p",{className:"text-slate-400",children:""})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),v.jsx("input",{type:"text",value:k,onChange:K=>q(K.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:"..."})]}),v.jsx("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-4 rounded-2xl shadow-xl shadow-indigo-100 transition-all active:scale-95",children:""})]})]})]})})},b8=({user:i,currentRank:e,onSwitchUser:n})=>{const a=To(),[u,f]=se.useState(!1),x=[{path:"/",label:"",icon:NC},{path:"/shop",label:"",icon:QC},{path:"/wishes",label:"",icon:f1},{path:"/history",label:"",icon:tf}];return i.role===hs.ADMIN&&x.push({path:"/admin",label:"",icon:nf}),v.jsxs("nav",{className:"bg-white border-r border-slate-200 w-full md:w-64 md:fixed md:inset-y-0 h-auto md:h-full z-50 shadow-sm",children:[v.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg text-white",children:v.jsx(m_,{size:20})}),v.jsx("span",{className:"text-xl font-bold text-slate-800 tracking-tight",children:""})]}),v.jsx("button",{onClick:()=>f(!u),className:"md:hidden text-slate-600",children:u?v.jsx(Kl,{}):v.jsx(BC,{})})]}),v.jsx("div",{className:`${u?"block":"hidden"} md:block p-4 space-y-2`,children:x.map(b=>{const T=b.icon,E=a.pathname===b.path;return v.jsxs(Z1,{to:b.path,onClick:()=>f(!1),className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 ${E?"bg-indigo-50 text-indigo-700 font-bold shadow-sm":"text-slate-600 hover:bg-slate-50"}`,children:[v.jsx(T,{size:20}),v.jsx("span",{children:b.label})]},b.path)})}),v.jsxs("div",{className:`${u?"block":"hidden"} md:block absolute bottom-0 w-full p-6 border-t border-slate-100 bg-white`,children:[v.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[v.jsx("img",{src:i.avatar,className:"w-10 h-10 rounded-full border-2 border-slate-100 object-cover",alt:"avatar"}),v.jsxs("div",{className:"overflow-hidden",children:[v.jsx("p",{className:"font-bold text-slate-800 truncate text-sm",children:i.name}),v.jsxs("div",{className:`text-[9px] px-2 py-0.5 rounded-full inline-block text-white font-black ${e.color}`,children:[e.icon," ",e.name]})]})]}),v.jsxs("button",{onClick:n,className:"flex items-center gap-2 text-indigo-600 hover:text-indigo-800 transition-colors text-xs font-bold w-full bg-indigo-50 p-2 rounded-lg justify-center mb-2",children:[v.jsx(OC,{size:14}),v.jsx("span",{children:""})]})]})]})},S8=()=>{const[i,e]=se.useState(_y()),n=i?el.reduce((f,x)=>i.totalEarned>=x.threshold?x:f,el[0]):el[0],a=()=>{const f=_y();f&&e(f)},u=()=>{m6(),e(null)};return i?v.jsx(qS,{children:v.jsxs("div",{className:"min-h-screen flex flex-col md:flex-row bg-[#fbfcfd]",children:[v.jsx(b8,{user:i,currentRank:n,onSwitchUser:u}),v.jsx("main",{className:"flex-1 md:ml-64 p-4 md:p-8",children:v.jsx("div",{className:"max-w-6xl mx-auto",children:v.jsxs(TS,{children:[v.jsx(Ul,{path:"/",element:v.jsx(TR,{user:i,rank:n,onUserUpdate:a})}),v.jsx(Ul,{path:"/shop",element:v.jsx(bR,{user:i,onUserUpdate:a})}),v.jsx(Ul,{path:"/wishes",element:v.jsx(w8,{user:i})}),v.jsx(Ul,{path:"/history",element:v.jsx(LR,{user:i})}),v.jsx(Ul,{path:"/admin",element:v.jsx(A8,{onRefresh:a})})]})})})]})}):v.jsx(T8,{onLogin:e})},Kw=document.getElementById("root");if(!Kw)throw new Error("Could not find root element to mount to");const C8=Sb.createRoot(Kw);C8.render(v.jsx(gi.StrictMode,{children:v.jsx(S8,{})}));
