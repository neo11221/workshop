function ZS(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const c in s)if(c!=="default"&&!(c in n)){const h=Object.getOwnPropertyDescriptor(s,c);h&&Object.defineProperty(n,c,h.get?h:{enumerable:!0,get:()=>s[c]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const h of c)if(h.type==="childList")for(const p of h.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&s(p)}).observe(document,{childList:!0,subtree:!0});function t(c){const h={};return c.integrity&&(h.integrity=c.integrity),c.referrerPolicy&&(h.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?h.credentials="include":c.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function s(c){if(c.ep)return;c.ep=!0;const h=t(c);fetch(c.href,h)}})();var Nf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hm(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var J1={exports:{}},Iu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cy;function JS(){if(Cy)return Iu;Cy=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,c,h){var p=null;if(h!==void 0&&(p=""+h),c.key!==void 0&&(p=""+c.key),"key"in c){h={};for(var T in c)T!=="key"&&(h[T]=c[T])}else h=c;return c=h.ref,{$$typeof:n,type:s,key:p,ref:c!==void 0?c:null,props:h}}return Iu.Fragment=e,Iu.jsx=t,Iu.jsxs=t,Iu}var Iy;function $S(){return Iy||(Iy=1,J1.exports=JS()),J1.exports}var A=$S(),$1={exports:{}},wt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ny;function eC(){if(Ny)return wt;Ny=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),p=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),M=Symbol.iterator;function B(ie){return ie===null||typeof ie!="object"?null:(ie=M&&ie[M]||ie["@@iterator"],typeof ie=="function"?ie:null)}var W={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q=Object.assign,Y={};function _e(ie,be,je){this.props=ie,this.context=be,this.refs=Y,this.updater=je||W}_e.prototype.isReactComponent={},_e.prototype.setState=function(ie,be){if(typeof ie!="object"&&typeof ie!="function"&&ie!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ie,be,"setState")},_e.prototype.forceUpdate=function(ie){this.updater.enqueueForceUpdate(this,ie,"forceUpdate")};function ae(){}ae.prototype=_e.prototype;function K(ie,be,je){this.props=ie,this.context=be,this.refs=Y,this.updater=je||W}var ce=K.prototype=new ae;ce.constructor=K,Q(ce,_e.prototype),ce.isPureReactComponent=!0;var Re=Array.isArray;function De(){}var F={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function j(ie,be,je){var Fe=je.ref;return{$$typeof:n,type:ie,key:be,ref:Fe!==void 0?Fe:null,props:je}}function Z(ie,be){return j(ie.type,be,ie.props)}function J(ie){return typeof ie=="object"&&ie!==null&&ie.$$typeof===n}function $(ie){var be={"=":"=0",":":"=2"};return"$"+ie.replace(/[=:]/g,function(je){return be[je]})}var G=/\/+/g;function Qe(ie,be){return typeof ie=="object"&&ie!==null&&ie.key!=null?$(""+ie.key):be.toString(36)}function fe(ie){switch(ie.status){case"fulfilled":return ie.value;case"rejected":throw ie.reason;default:switch(typeof ie.status=="string"?ie.then(De,De):(ie.status="pending",ie.then(function(be){ie.status==="pending"&&(ie.status="fulfilled",ie.value=be)},function(be){ie.status==="pending"&&(ie.status="rejected",ie.reason=be)})),ie.status){case"fulfilled":return ie.value;case"rejected":throw ie.reason}}throw ie}function pe(ie,be,je,Fe,$e){var Be=typeof ie;(Be==="undefined"||Be==="boolean")&&(ie=null);var Ct=!1;if(ie===null)Ct=!0;else switch(Be){case"bigint":case"string":case"number":Ct=!0;break;case"object":switch(ie.$$typeof){case n:case e:Ct=!0;break;case C:return Ct=ie._init,pe(Ct(ie._payload),be,je,Fe,$e)}}if(Ct)return $e=$e(ie),Ct=Fe===""?"."+Qe(ie,0):Fe,Re($e)?(je="",Ct!=null&&(je=Ct.replace(G,"$&/")+"/"),pe($e,be,je,"",function($r){return $r})):$e!=null&&(J($e)&&($e=Z($e,je+($e.key==null||ie&&ie.key===$e.key?"":(""+$e.key).replace(G,"$&/")+"/")+Ct)),be.push($e)),1;Ct=0;var mt=Fe===""?".":Fe+":";if(Re(ie))for(var Qt=0;Qt<ie.length;Qt++)Fe=ie[Qt],Be=mt+Qe(Fe,Qt),Ct+=pe(Fe,be,je,Be,$e);else if(Qt=B(ie),typeof Qt=="function")for(ie=Qt.call(ie),Qt=0;!(Fe=ie.next()).done;)Fe=Fe.value,Be=mt+Qe(Fe,Qt++),Ct+=pe(Fe,be,je,Be,$e);else if(Be==="object"){if(typeof ie.then=="function")return pe(fe(ie),be,je,Fe,$e);throw be=String(ie),Error("Objects are not valid as a React child (found: "+(be==="[object Object]"?"object with keys {"+Object.keys(ie).join(", ")+"}":be)+"). If you meant to render a collection of children, use an array instead.")}return Ct}function ve(ie,be,je){if(ie==null)return ie;var Fe=[],$e=0;return pe(ie,Fe,"","",function(Be){return be.call(je,Be,$e++)}),Fe}function Xe(ie){if(ie._status===-1){var be=ie._result;be=be(),be.then(function(je){(ie._status===0||ie._status===-1)&&(ie._status=1,ie._result=je)},function(je){(ie._status===0||ie._status===-1)&&(ie._status=2,ie._result=je)}),ie._status===-1&&(ie._status=0,ie._result=be)}if(ie._status===1)return ie._result.default;throw ie._result}var dt=typeof reportError=="function"?reportError:function(ie){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var be=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ie=="object"&&ie!==null&&typeof ie.message=="string"?String(ie.message):String(ie),error:ie});if(!window.dispatchEvent(be))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ie);return}console.error(ie)},gt={map:ve,forEach:function(ie,be,je){ve(ie,function(){be.apply(this,arguments)},je)},count:function(ie){var be=0;return ve(ie,function(){be++}),be},toArray:function(ie){return ve(ie,function(be){return be})||[]},only:function(ie){if(!J(ie))throw Error("React.Children.only expected to receive a single React element child.");return ie}};return wt.Activity=I,wt.Children=gt,wt.Component=_e,wt.Fragment=t,wt.Profiler=c,wt.PureComponent=K,wt.StrictMode=s,wt.Suspense=w,wt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,wt.__COMPILER_RUNTIME={__proto__:null,c:function(ie){return F.H.useMemoCache(ie)}},wt.cache=function(ie){return function(){return ie.apply(null,arguments)}},wt.cacheSignal=function(){return null},wt.cloneElement=function(ie,be,je){if(ie==null)throw Error("The argument must be a React element, but you passed "+ie+".");var Fe=Q({},ie.props),$e=ie.key;if(be!=null)for(Be in be.key!==void 0&&($e=""+be.key),be)!V.call(be,Be)||Be==="key"||Be==="__self"||Be==="__source"||Be==="ref"&&be.ref===void 0||(Fe[Be]=be[Be]);var Be=arguments.length-2;if(Be===1)Fe.children=je;else if(1<Be){for(var Ct=Array(Be),mt=0;mt<Be;mt++)Ct[mt]=arguments[mt+2];Fe.children=Ct}return j(ie.type,$e,Fe)},wt.createContext=function(ie){return ie={$$typeof:p,_currentValue:ie,_currentValue2:ie,_threadCount:0,Provider:null,Consumer:null},ie.Provider=ie,ie.Consumer={$$typeof:h,_context:ie},ie},wt.createElement=function(ie,be,je){var Fe,$e={},Be=null;if(be!=null)for(Fe in be.key!==void 0&&(Be=""+be.key),be)V.call(be,Fe)&&Fe!=="key"&&Fe!=="__self"&&Fe!=="__source"&&($e[Fe]=be[Fe]);var Ct=arguments.length-2;if(Ct===1)$e.children=je;else if(1<Ct){for(var mt=Array(Ct),Qt=0;Qt<Ct;Qt++)mt[Qt]=arguments[Qt+2];$e.children=mt}if(ie&&ie.defaultProps)for(Fe in Ct=ie.defaultProps,Ct)$e[Fe]===void 0&&($e[Fe]=Ct[Fe]);return j(ie,Be,$e)},wt.createRef=function(){return{current:null}},wt.forwardRef=function(ie){return{$$typeof:T,render:ie}},wt.isValidElement=J,wt.lazy=function(ie){return{$$typeof:C,_payload:{_status:-1,_result:ie},_init:Xe}},wt.memo=function(ie,be){return{$$typeof:E,type:ie,compare:be===void 0?null:be}},wt.startTransition=function(ie){var be=F.T,je={};F.T=je;try{var Fe=ie(),$e=F.S;$e!==null&&$e(je,Fe),typeof Fe=="object"&&Fe!==null&&typeof Fe.then=="function"&&Fe.then(De,dt)}catch(Be){dt(Be)}finally{be!==null&&je.types!==null&&(be.types=je.types),F.T=be}},wt.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},wt.use=function(ie){return F.H.use(ie)},wt.useActionState=function(ie,be,je){return F.H.useActionState(ie,be,je)},wt.useCallback=function(ie,be){return F.H.useCallback(ie,be)},wt.useContext=function(ie){return F.H.useContext(ie)},wt.useDebugValue=function(){},wt.useDeferredValue=function(ie,be){return F.H.useDeferredValue(ie,be)},wt.useEffect=function(ie,be){return F.H.useEffect(ie,be)},wt.useEffectEvent=function(ie){return F.H.useEffectEvent(ie)},wt.useId=function(){return F.H.useId()},wt.useImperativeHandle=function(ie,be,je){return F.H.useImperativeHandle(ie,be,je)},wt.useInsertionEffect=function(ie,be){return F.H.useInsertionEffect(ie,be)},wt.useLayoutEffect=function(ie,be){return F.H.useLayoutEffect(ie,be)},wt.useMemo=function(ie,be){return F.H.useMemo(ie,be)},wt.useOptimistic=function(ie,be){return F.H.useOptimistic(ie,be)},wt.useReducer=function(ie,be,je){return F.H.useReducer(ie,be,je)},wt.useRef=function(ie){return F.H.useRef(ie)},wt.useState=function(ie){return F.H.useState(ie)},wt.useSyncExternalStore=function(ie,be,je){return F.H.useSyncExternalStore(ie,be,je)},wt.useTransition=function(){return F.H.useTransition()},wt.version="19.2.3",wt}var Ry;function fm(){return Ry||(Ry=1,$1.exports=eC()),$1.exports}var ne=fm();const ir=hm(ne);var eg={exports:{}},Nu={},tg={exports:{}},ng={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oy;function tC(){return Oy||(Oy=1,(function(n){function e(pe,ve){var Xe=pe.length;pe.push(ve);e:for(;0<Xe;){var dt=Xe-1>>>1,gt=pe[dt];if(0<c(gt,ve))pe[dt]=ve,pe[Xe]=gt,Xe=dt;else break e}}function t(pe){return pe.length===0?null:pe[0]}function s(pe){if(pe.length===0)return null;var ve=pe[0],Xe=pe.pop();if(Xe!==ve){pe[0]=Xe;e:for(var dt=0,gt=pe.length,ie=gt>>>1;dt<ie;){var be=2*(dt+1)-1,je=pe[be],Fe=be+1,$e=pe[Fe];if(0>c(je,Xe))Fe<gt&&0>c($e,je)?(pe[dt]=$e,pe[Fe]=Xe,dt=Fe):(pe[dt]=je,pe[be]=Xe,dt=be);else if(Fe<gt&&0>c($e,Xe))pe[dt]=$e,pe[Fe]=Xe,dt=Fe;else break e}}return ve}function c(pe,ve){var Xe=pe.sortIndex-ve.sortIndex;return Xe!==0?Xe:pe.id-ve.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;n.unstable_now=function(){return h.now()}}else{var p=Date,T=p.now();n.unstable_now=function(){return p.now()-T}}var w=[],E=[],C=1,I=null,M=3,B=!1,W=!1,Q=!1,Y=!1,_e=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function ce(pe){for(var ve=t(E);ve!==null;){if(ve.callback===null)s(E);else if(ve.startTime<=pe)s(E),ve.sortIndex=ve.expirationTime,e(w,ve);else break;ve=t(E)}}function Re(pe){if(Q=!1,ce(pe),!W)if(t(w)!==null)W=!0,De||(De=!0,$());else{var ve=t(E);ve!==null&&fe(Re,ve.startTime-pe)}}var De=!1,F=-1,V=5,j=-1;function Z(){return Y?!0:!(n.unstable_now()-j<V)}function J(){if(Y=!1,De){var pe=n.unstable_now();j=pe;var ve=!0;try{e:{W=!1,Q&&(Q=!1,ae(F),F=-1),B=!0;var Xe=M;try{t:{for(ce(pe),I=t(w);I!==null&&!(I.expirationTime>pe&&Z());){var dt=I.callback;if(typeof dt=="function"){I.callback=null,M=I.priorityLevel;var gt=dt(I.expirationTime<=pe);if(pe=n.unstable_now(),typeof gt=="function"){I.callback=gt,ce(pe),ve=!0;break t}I===t(w)&&s(w),ce(pe)}else s(w);I=t(w)}if(I!==null)ve=!0;else{var ie=t(E);ie!==null&&fe(Re,ie.startTime-pe),ve=!1}}break e}finally{I=null,M=Xe,B=!1}ve=void 0}}finally{ve?$():De=!1}}}var $;if(typeof K=="function")$=function(){K(J)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,Qe=G.port2;G.port1.onmessage=J,$=function(){Qe.postMessage(null)}}else $=function(){_e(J,0)};function fe(pe,ve){F=_e(function(){pe(n.unstable_now())},ve)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(pe){pe.callback=null},n.unstable_forceFrameRate=function(pe){0>pe||125<pe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<pe?Math.floor(1e3/pe):5},n.unstable_getCurrentPriorityLevel=function(){return M},n.unstable_next=function(pe){switch(M){case 1:case 2:case 3:var ve=3;break;default:ve=M}var Xe=M;M=ve;try{return pe()}finally{M=Xe}},n.unstable_requestPaint=function(){Y=!0},n.unstable_runWithPriority=function(pe,ve){switch(pe){case 1:case 2:case 3:case 4:case 5:break;default:pe=3}var Xe=M;M=pe;try{return ve()}finally{M=Xe}},n.unstable_scheduleCallback=function(pe,ve,Xe){var dt=n.unstable_now();switch(typeof Xe=="object"&&Xe!==null?(Xe=Xe.delay,Xe=typeof Xe=="number"&&0<Xe?dt+Xe:dt):Xe=dt,pe){case 1:var gt=-1;break;case 2:gt=250;break;case 5:gt=1073741823;break;case 4:gt=1e4;break;default:gt=5e3}return gt=Xe+gt,pe={id:C++,callback:ve,priorityLevel:pe,startTime:Xe,expirationTime:gt,sortIndex:-1},Xe>dt?(pe.sortIndex=Xe,e(E,pe),t(w)===null&&pe===t(E)&&(Q?(ae(F),F=-1):Q=!0,fe(Re,Xe-dt))):(pe.sortIndex=gt,e(w,pe),W||B||(W=!0,De||(De=!0,$()))),pe},n.unstable_shouldYield=Z,n.unstable_wrapCallback=function(pe){var ve=M;return function(){var Xe=M;M=ve;try{return pe.apply(this,arguments)}finally{M=Xe}}}})(ng)),ng}var Dy;function nC(){return Dy||(Dy=1,tg.exports=tC()),tg.exports}var rg={exports:{}},ci={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var My;function rC(){if(My)return ci;My=1;var n=fm();function e(w){var E="https://react.dev/errors/"+w;if(1<arguments.length){E+="?args[]="+encodeURIComponent(arguments[1]);for(var C=2;C<arguments.length;C++)E+="&args[]="+encodeURIComponent(arguments[C])}return"Minified React error #"+w+"; visit "+E+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},c=Symbol.for("react.portal");function h(w,E,C){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:I==null?null:""+I,children:w,containerInfo:E,implementation:C}}var p=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function T(w,E){if(w==="font")return"";if(typeof E=="string")return E==="use-credentials"?E:""}return ci.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,ci.createPortal=function(w,E){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!E||E.nodeType!==1&&E.nodeType!==9&&E.nodeType!==11)throw Error(e(299));return h(w,E,null,C)},ci.flushSync=function(w){var E=p.T,C=s.p;try{if(p.T=null,s.p=2,w)return w()}finally{p.T=E,s.p=C,s.d.f()}},ci.preconnect=function(w,E){typeof w=="string"&&(E?(E=E.crossOrigin,E=typeof E=="string"?E==="use-credentials"?E:"":void 0):E=null,s.d.C(w,E))},ci.prefetchDNS=function(w){typeof w=="string"&&s.d.D(w)},ci.preinit=function(w,E){if(typeof w=="string"&&E&&typeof E.as=="string"){var C=E.as,I=T(C,E.crossOrigin),M=typeof E.integrity=="string"?E.integrity:void 0,B=typeof E.fetchPriority=="string"?E.fetchPriority:void 0;C==="style"?s.d.S(w,typeof E.precedence=="string"?E.precedence:void 0,{crossOrigin:I,integrity:M,fetchPriority:B}):C==="script"&&s.d.X(w,{crossOrigin:I,integrity:M,fetchPriority:B,nonce:typeof E.nonce=="string"?E.nonce:void 0})}},ci.preinitModule=function(w,E){if(typeof w=="string")if(typeof E=="object"&&E!==null){if(E.as==null||E.as==="script"){var C=T(E.as,E.crossOrigin);s.d.M(w,{crossOrigin:C,integrity:typeof E.integrity=="string"?E.integrity:void 0,nonce:typeof E.nonce=="string"?E.nonce:void 0})}}else E==null&&s.d.M(w)},ci.preload=function(w,E){if(typeof w=="string"&&typeof E=="object"&&E!==null&&typeof E.as=="string"){var C=E.as,I=T(C,E.crossOrigin);s.d.L(w,C,{crossOrigin:I,integrity:typeof E.integrity=="string"?E.integrity:void 0,nonce:typeof E.nonce=="string"?E.nonce:void 0,type:typeof E.type=="string"?E.type:void 0,fetchPriority:typeof E.fetchPriority=="string"?E.fetchPriority:void 0,referrerPolicy:typeof E.referrerPolicy=="string"?E.referrerPolicy:void 0,imageSrcSet:typeof E.imageSrcSet=="string"?E.imageSrcSet:void 0,imageSizes:typeof E.imageSizes=="string"?E.imageSizes:void 0,media:typeof E.media=="string"?E.media:void 0})}},ci.preloadModule=function(w,E){if(typeof w=="string")if(E){var C=T(E.as,E.crossOrigin);s.d.m(w,{as:typeof E.as=="string"&&E.as!=="script"?E.as:void 0,crossOrigin:C,integrity:typeof E.integrity=="string"?E.integrity:void 0})}else s.d.m(w)},ci.requestFormReset=function(w){s.d.r(w)},ci.unstable_batchedUpdates=function(w,E){return w(E)},ci.useFormState=function(w,E,C){return p.H.useFormState(w,E,C)},ci.useFormStatus=function(){return p.H.useHostTransitionStatus()},ci.version="19.2.3",ci}var Py;function iC(){if(Py)return rg.exports;Py=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),rg.exports=rC(),rg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ly;function sC(){if(Ly)return Nu;Ly=1;var n=nC(),e=fm(),t=iC();function s(r){var a="https://react.dev/errors/"+r;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function h(r){var a=r,u=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(u=a.return),r=a.return;while(r)}return a.tag===3?u:null}function p(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function T(r){if(r.tag===31){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function w(r){if(h(r)!==r)throw Error(s(188))}function E(r){var a=r.alternate;if(!a){if(a=h(r),a===null)throw Error(s(188));return a!==r?null:r}for(var u=r,g=a;;){var _=u.return;if(_===null)break;var v=_.alternate;if(v===null){if(g=_.return,g!==null){u=g;continue}break}if(_.child===v.child){for(v=_.child;v;){if(v===u)return w(_),r;if(v===g)return w(_),a;v=v.sibling}throw Error(s(188))}if(u.return!==g.return)u=_,g=v;else{for(var O=!1,U=_.child;U;){if(U===u){O=!0,u=_,g=v;break}if(U===g){O=!0,g=_,u=v;break}U=U.sibling}if(!O){for(U=v.child;U;){if(U===u){O=!0,u=v,g=_;break}if(U===g){O=!0,g=v,u=_;break}U=U.sibling}if(!O)throw Error(s(189))}}if(u.alternate!==g)throw Error(s(190))}if(u.tag!==3)throw Error(s(188));return u.stateNode.current===u?r:a}function C(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r;for(r=r.child;r!==null;){if(a=C(r),a!==null)return a;r=r.sibling}return null}var I=Object.assign,M=Symbol.for("react.element"),B=Symbol.for("react.transitional.element"),W=Symbol.for("react.portal"),Q=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),_e=Symbol.for("react.profiler"),ae=Symbol.for("react.consumer"),K=Symbol.for("react.context"),ce=Symbol.for("react.forward_ref"),Re=Symbol.for("react.suspense"),De=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),Z=Symbol.for("react.memo_cache_sentinel"),J=Symbol.iterator;function $(r){return r===null||typeof r!="object"?null:(r=J&&r[J]||r["@@iterator"],typeof r=="function"?r:null)}var G=Symbol.for("react.client.reference");function Qe(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===G?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case Q:return"Fragment";case _e:return"Profiler";case Y:return"StrictMode";case Re:return"Suspense";case De:return"SuspenseList";case j:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case W:return"Portal";case K:return r.displayName||"Context";case ae:return(r._context.displayName||"Context")+".Consumer";case ce:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case F:return a=r.displayName||null,a!==null?a:Qe(r.type)||"Memo";case V:a=r._payload,r=r._init;try{return Qe(r(a))}catch{}}return null}var fe=Array.isArray,pe=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Xe={pending:!1,data:null,method:null,action:null},dt=[],gt=-1;function ie(r){return{current:r}}function be(r){0>gt||(r.current=dt[gt],dt[gt]=null,gt--)}function je(r,a){gt++,dt[gt]=r.current,r.current=a}var Fe=ie(null),$e=ie(null),Be=ie(null),Ct=ie(null);function mt(r,a){switch(je(Be,a),je($e,r),je(Fe,null),a.nodeType){case 9:case 11:r=(r=a.documentElement)&&(r=r.namespaceURI)?Qx(r):0;break;default:if(r=a.tagName,a=a.namespaceURI)a=Qx(a),r=Zx(a,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}be(Fe),je(Fe,r)}function Qt(){be(Fe),be($e),be(Be)}function $r(r){r.memoizedState!==null&&je(Ct,r);var a=Fe.current,u=Zx(a,r.type);a!==u&&(je($e,r),je(Fe,u))}function Mn(r){$e.current===r&&(be(Fe),be($e)),Ct.current===r&&(be(Ct),vu._currentValue=Xe)}var Ai,bt;function gr(r){if(Ai===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);Ai=a&&a[1]||"",bt=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ai+r+bt}var Sr=!1;function ei(r,a){if(!r||Sr)return"";Sr=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(a){var Ie=function(){throw Error()};if(Object.defineProperty(Ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ie,[])}catch(we){var me=we}Reflect.construct(r,[],Ie)}else{try{Ie.call()}catch(we){me=we}r.call(Ie.prototype)}}else{try{throw Error()}catch(we){me=we}(Ie=r())&&typeof Ie.catch=="function"&&Ie.catch(function(){})}}catch(we){if(we&&me&&typeof we.stack=="string")return[we.stack,me.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=g.DetermineComponentFrameRoot(),O=v[0],U=v[1];if(O&&U){var ee=O.split(`
`),ge=U.split(`
`);for(_=g=0;g<ee.length&&!ee[g].includes("DetermineComponentFrameRoot");)g++;for(;_<ge.length&&!ge[_].includes("DetermineComponentFrameRoot");)_++;if(g===ee.length||_===ge.length)for(g=ee.length-1,_=ge.length-1;1<=g&&0<=_&&ee[g]!==ge[_];)_--;for(;1<=g&&0<=_;g--,_--)if(ee[g]!==ge[_]){if(g!==1||_!==1)do if(g--,_--,0>_||ee[g]!==ge[_]){var Ae=`
`+ee[g].replace(" at new "," at ");return r.displayName&&Ae.includes("<anonymous>")&&(Ae=Ae.replace("<anonymous>",r.displayName)),Ae}while(1<=g&&0<=_);break}}}finally{Sr=!1,Error.prepareStackTrace=u}return(u=r?r.displayName||r.name:"")?gr(u):""}function An(r,a){switch(r.tag){case 26:case 27:case 5:return gr(r.type);case 16:return gr("Lazy");case 13:return r.child!==a&&a!==null?gr("Suspense Fallback"):gr("Suspense");case 19:return gr("SuspenseList");case 0:case 15:return ei(r.type,!1);case 11:return ei(r.type.render,!1);case 1:return ei(r.type,!0);case 31:return gr("Activity");default:return""}}function Zt(r){try{var a="",u=null;do a+=An(r,u),u=r,r=r.return;while(r);return a}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var et=Object.prototype.hasOwnProperty,pn=n.unstable_scheduleCallback,ze=n.unstable_cancelCallback,is=n.unstable_shouldYield,ss=n.unstable_requestPaint,xn=n.unstable_now,ti=n.unstable_getCurrentPriorityLevel,mr=n.unstable_ImmediatePriority,as=n.unstable_UserBlockingPriority,pr=n.unstable_NormalPriority,Pn=n.unstable_LowPriority,Ls=n.unstable_IdlePriority,vi=n.log,ia=n.unstable_setDisableYieldValue,kt=null,Le=null;function zt(r){if(typeof vi=="function"&&ia(r),Le&&typeof Le.setStrictMode=="function")try{Le.setStrictMode(kt,r)}catch{}}var ot=Math.clz32?Math.clz32:As,Jt=Math.log,ni=Math.LN2;function As(r){return r>>>=0,r===0?32:31-(Jt(r)/ni|0)|0}var ri=256,At=262144,ln=4194304;function ii(r){var a=r&42;if(a!==0)return a;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Fr(r,a,u){var g=r.pendingLanes;if(g===0)return 0;var _=0,v=r.suspendedLanes,O=r.pingedLanes;r=r.warmLanes;var U=g&134217727;return U!==0?(g=U&~v,g!==0?_=ii(g):(O&=U,O!==0?_=ii(O):u||(u=U&~r,u!==0&&(_=ii(u))))):(U=g&~v,U!==0?_=ii(U):O!==0?_=ii(O):u||(u=g&~r,u!==0&&(_=ii(u)))),_===0?0:a!==0&&a!==_&&(a&v)===0&&(v=_&-_,u=a&-a,v>=u||v===32&&(u&4194048)!==0)?a:_}function Nn(r,a){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&a)===0}function ks(r,a){switch(r){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fn(){var r=ln;return ln<<=1,(ln&62914560)===0&&(ln=4194304),r}function sr(r){for(var a=[],u=0;31>u;u++)a.push(r);return a}function zr(r,a){r.pendingLanes|=a,a!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Lr(r,a,u,g,_,v){var O=r.pendingLanes;r.pendingLanes=u,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=u,r.entangledLanes&=u,r.errorRecoveryDisabledLanes&=u,r.shellSuspendCounter=0;var U=r.entanglements,ee=r.expirationTimes,ge=r.hiddenUpdates;for(u=O&~u;0<u;){var Ae=31-ot(u),Ie=1<<Ae;U[Ae]=0,ee[Ae]=-1;var me=ge[Ae];if(me!==null)for(ge[Ae]=null,Ae=0;Ae<me.length;Ae++){var we=me[Ae];we!==null&&(we.lane&=-536870913)}u&=~Ie}g!==0&&si(r,g,0),v!==0&&_===0&&r.tag!==0&&(r.suspendedLanes|=v&~(O&~a))}function si(r,a,u){r.pendingLanes|=a,r.suspendedLanes&=~a;var g=31-ot(a);r.entangledLanes|=a,r.entanglements[g]=r.entanglements[g]|1073741824|u&261930}function xr(r,a){var u=r.entangledLanes|=a;for(r=r.entanglements;u;){var g=31-ot(u),_=1<<g;_&a|r[g]&a&&(r[g]|=a),u&=~_}}function Bi(r,a){var u=a&-a;return u=(u&42)!==0?1:Rn(u),(u&(r.suspendedLanes|a))!==0?0:u}function Rn(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function ar(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function or(){var r=ve.p;return r!==0?r:(r=window.event,r===void 0?32:_y(r.type))}function He(r,a){var u=ve.p;try{return ve.p=r,a()}finally{ve.p=u}}var Jn=Math.random().toString(36).slice(2),Dt="__reactFiber$"+Jn,Bt="__reactProps$"+Jn,lr="__reactContainer$"+Jn,Ti="__reactEvents$"+Jn,vs="__reactListeners$"+Jn,Hr="__reactHandles$"+Jn,Qa="__reactResources$"+Jn,Si="__reactMarker$"+Jn;function yr(r){delete r[Dt],delete r[Bt],delete r[Ti],delete r[vs],delete r[Hr]}function yn(r){var a=r[Dt];if(a)return a;for(var u=r.parentNode;u;){if(a=u[lr]||u[Dt]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(r=iy(r);r!==null;){if(u=r[Dt])return u;r=iy(r)}return a}r=u,u=r.parentNode}return null}function Nt(r){if(r=r[Dt]||r[lr]){var a=r.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return r}return null}function kr(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r.stateNode;throw Error(s(33))}function cr(r){var a=r[Qa];return a||(a=r[Qa]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function On(r){r[Si]=!0}var Ce=new Set,sa={};function Ht(r,a){Cr(r,a),Cr(r+"Capture",a)}function Cr(r,a){for(sa[r]=a,r=0;r<a.length;r++)Ce.add(a[r])}var aa=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Pt={},Mt={};function vt(r){return et.call(Mt,r)?!0:et.call(Pt,r)?!1:aa.test(r)?Mt[r]=!0:(Pt[r]=!0,!1)}function os(r,a,u){if(vt(a))if(u===null)r.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":r.removeAttribute(a);return;case"boolean":var g=a.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){r.removeAttribute(a);return}}r.setAttribute(a,""+u)}}function Ir(r,a,u){if(u===null)r.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttribute(a,""+u)}}function Dn(r,a,u,g){if(g===null)r.removeAttribute(u);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(u);return}r.setAttributeNS(a,u,""+g)}}function Rt(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Nr(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function oa(r,a,u){var g=Object.getOwnPropertyDescriptor(r.constructor.prototype,a);if(!r.hasOwnProperty(a)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var _=g.get,v=g.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return _.call(this)},set:function(O){u=""+O,v.call(this,O)}}),Object.defineProperty(r,a,{enumerable:g.enumerable}),{getValue:function(){return u},setValue:function(O){u=""+O},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function st(r){if(!r._valueTracker){var a=Nr(r)?"checked":"value";r._valueTracker=oa(r,a,""+r[a])}}function Rr(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var u=a.getValue(),g="";return r&&(g=Nr(r)?r.checked?"true":"false":r.value),r=g,r!==u?(a.setValue(r),!0):!1}function X(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Me=/[\n"\\]/g;function Pe(r){return r.replace(Me,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function tt(r,a,u,g,_,v,O,U){r.name="",O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?r.type=O:r.removeAttribute("type"),a!=null?O==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+Rt(a)):r.value!==""+Rt(a)&&(r.value=""+Rt(a)):O!=="submit"&&O!=="reset"||r.removeAttribute("value"),a!=null?H(r,O,Rt(a)):u!=null?H(r,O,Rt(u)):g!=null&&r.removeAttribute("value"),_==null&&v!=null&&(r.defaultChecked=!!v),_!=null&&(r.checked=_&&typeof _!="function"&&typeof _!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?r.name=""+Rt(U):r.removeAttribute("name")}function le(r,a,u,g,_,v,O,U){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(r.type=v),a!=null||u!=null){if(!(v!=="submit"&&v!=="reset"||a!=null)){st(r);return}u=u!=null?""+Rt(u):"",a=a!=null?""+Rt(a):u,U||a===r.value||(r.value=a),r.defaultValue=a}g=g??_,g=typeof g!="function"&&typeof g!="symbol"&&!!g,r.checked=U?r.checked:!!g,r.defaultChecked=!!g,O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(r.name=O),st(r)}function H(r,a,u){a==="number"&&X(r.ownerDocument)===r||r.defaultValue===""+u||(r.defaultValue=""+u)}function qe(r,a,u,g){if(r=r.options,a){a={};for(var _=0;_<u.length;_++)a["$"+u[_]]=!0;for(u=0;u<r.length;u++)_=a.hasOwnProperty("$"+r[u].value),r[u].selected!==_&&(r[u].selected=_),_&&g&&(r[u].defaultSelected=!0)}else{for(u=""+Rt(u),a=null,_=0;_<r.length;_++){if(r[_].value===u){r[_].selected=!0,g&&(r[_].defaultSelected=!0);return}a!==null||r[_].disabled||(a=r[_])}a!==null&&(a.selected=!0)}}function Ln(r,a,u){if(a!=null&&(a=""+Rt(a),a!==r.value&&(r.value=a),u==null)){r.defaultValue!==a&&(r.defaultValue=a);return}r.defaultValue=u!=null?""+Rt(u):""}function Xn(r,a,u,g){if(a==null){if(g!=null){if(u!=null)throw Error(s(92));if(fe(g)){if(1<g.length)throw Error(s(93));g=g[0]}u=g}u==null&&(u=""),a=u}u=Rt(a),r.defaultValue=u,g=r.textContent,g===u&&g!==""&&g!==null&&(r.value=g),st(r)}function vn(r,a){if(a){var u=r.firstChild;if(u&&u===r.lastChild&&u.nodeType===3){u.nodeValue=a;return}}r.textContent=a}var Ts=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Tn(r,a,u){var g=a.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?g?r.setProperty(a,""):a==="float"?r.cssFloat="":r[a]="":g?r.setProperty(a,u):typeof u!="number"||u===0||Ts.has(a)?a==="float"?r.cssFloat=u:r[a]=(""+u).trim():r[a]=u+"px"}function Je(r,a,u){if(a!=null&&typeof a!="object")throw Error(s(62));if(r=r.style,u!=null){for(var g in u)!u.hasOwnProperty(g)||a!=null&&a.hasOwnProperty(g)||(g.indexOf("--")===0?r.setProperty(g,""):g==="float"?r.cssFloat="":r[g]="");for(var _ in a)g=a[_],a.hasOwnProperty(_)&&u[_]!==g&&Tn(r,_,g)}else for(var v in a)a.hasOwnProperty(v)&&Tn(r,v,a[v])}function un(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Bs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Us(r){return Bs.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function ai(){}var la=null;function Ci(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Sn=null,oi=null;function li(r){var a=Nt(r);if(a&&(r=a.stateNode)){var u=r[Bt]||null;e:switch(r=a.stateNode,a.type){case"input":if(tt(r,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),a=u.name,u.type==="radio"&&a!=null){for(u=r;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Pe(""+a)+'"][type="radio"]'),a=0;a<u.length;a++){var g=u[a];if(g!==r&&g.form===r.form){var _=g[Bt]||null;if(!_)throw Error(s(90));tt(g,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(a=0;a<u.length;a++)g=u[a],g.form===r.form&&Rr(g)}break e;case"textarea":Ln(r,u.value,u.defaultValue);break e;case"select":a=u.value,a!=null&&qe(r,!!u.multiple,a,!1)}}}var nt=!1;function Vs(r,a,u){if(nt)return r(a,u);nt=!0;try{var g=r(a);return g}finally{if(nt=!1,(Sn!==null||oi!==null)&&(of(),Sn&&(a=Sn,r=oi,oi=Sn=null,li(a),r)))for(a=0;a<r.length;a++)li(r[a])}}function lt(r,a){var u=r.stateNode;if(u===null)return null;var g=u[Bt]||null;if(g===null)return null;u=g[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(r=r.type,g=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!g;break e;default:r=!1}if(r)return null;if(u&&typeof u!="function")throw Error(s(231,a,typeof u));return u}var hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ca=!1;if(hn)try{var sn={};Object.defineProperty(sn,"passive",{get:function(){ca=!0}}),window.addEventListener("test",sn,sn),window.removeEventListener("test",sn,sn)}catch{ca=!1}var Ui=null,Vi=null,ua=null;function Ss(){if(ua)return ua;var r,a=Vi,u=a.length,g,_="value"in Ui?Ui.value:Ui.textContent,v=_.length;for(r=0;r<u&&a[r]===_[r];r++);var O=u-r;for(g=1;g<=O&&a[u-g]===_[v-g];g++);return ua=_.slice(r,1<g?1-g:void 0)}function ji(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function di(){return!0}function Ii(){return!1}function Wn(r){function a(u,g,_,v,O){this._reactName=u,this._targetInst=_,this.type=g,this.nativeEvent=v,this.target=O,this.currentTarget=null;for(var U in r)r.hasOwnProperty(U)&&(u=r[U],this[U]=u?u(v):v[U]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?di:Ii,this.isPropagationStopped=Ii,this}return I(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=di)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=di)},persist:function(){},isPersistent:di}),a}var gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kn=Wn(gi),Cs=I({},gi,{view:0,detail:0}),Za=Wn(Cs),Is,Ja,ls,$a=I({},Cs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:us,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ls&&(ls&&r.type==="mousemove"?(Is=r.screenX-ls.screenX,Ja=r.screenY-ls.screenY):Ja=Is=0,ls=r),Is)},movementY:function(r){return"movementY"in r?r.movementY:Ja}}),tn=Wn($a),js=I({},$a,{dataTransfer:0}),ha=Wn(js),Fi=I({},Cs,{relatedTarget:0}),fa=Wn(Fi),xe=I({},gi,{animationName:0,elapsedTime:0,pseudoElement:0}),_t=Wn(xe),zn=I({},gi,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),da=Wn(zn),$o=I({},gi,{data:0}),cs=Wn($o),Ml={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hn(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=eo[r])?!!a[r]:!1}function us(){return Hn}var Lt=I({},Cs,{key:function(r){if(r.key){var a=Ml[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=ji(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Pl[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:us,charCode:function(r){return r.type==="keypress"?ji(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ji(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),ga=Wn(Lt),hs=I({},$a,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ut=Wn(hs),x=I({},Cs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:us}),N=Wn(x),D=I({},gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),z=Wn(D),ue=I({},$a,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Ee=Wn(ue),Ve=I({},gi,{newState:0,oldState:0}),pt=Wn(Ve),Gn=[9,13,27,32],$t=hn&&"CompositionEvent"in window,Cn=null;hn&&"documentMode"in document&&(Cn=document.documentMode);var mi=hn&&"TextEvent"in window&&!Cn,fs=hn&&(!$t||Cn&&8<Cn&&11>=Cn),Br=" ",pi=!1;function ma(r,a){switch(r){case"keyup":return Gn.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ds(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var to=!1;function Fs(r,a){switch(r){case"compositionend":return ds(a);case"keypress":return a.which!==32?null:(pi=!0,Br);case"textInput":return r=a.data,r===Br&&pi?null:r;default:return null}}function Ll(r,a){if(to)return r==="compositionend"||!$t&&ma(r,a)?(r=Ss(),ua=Vi=Ui=null,to=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return fs&&a.locale!=="ko"?null:a.data;default:return null}}var Ni={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wc(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!Ni[r.type]:a==="textarea"}function zi(r,a,u,g){Sn?oi?oi.push(g):oi=[g]:Sn=g,a=gf(a,"onChange"),0<a.length&&(u=new kn("onChange","change",null,u,g),r.push({event:u,listeners:a}))}var el=null,pa=null;function h0(r){Gx(r,0)}function tl(r){var a=kr(r);if(Rr(a))return r}function Hi(r,a){if(r==="change")return a}var vh=!1;if(hn){var nl;if(hn){var xa="oninput"in document;if(!xa){var Gt=document.createElement("div");Gt.setAttribute("oninput","return;"),xa=typeof Gt.oninput=="function"}nl=xa}else nl=!1;vh=nl&&(!document.documentMode||9<document.documentMode)}function rl(){el&&(el.detachEvent("onpropertychange",P),pa=el=null)}function P(r){if(r.propertyName==="value"&&tl(pa)){var a=[];zi(a,pa,r,Ci(r)),Vs(h0,a)}}function i(r,a,u){r==="focusin"?(rl(),el=a,pa=u,el.attachEvent("onpropertychange",P)):r==="focusout"&&rl()}function o(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return tl(pa)}function l(r,a){if(r==="click")return tl(a)}function f(r,a){if(r==="input"||r==="change")return tl(a)}function d(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var m=typeof Object.is=="function"?Object.is:d;function y(r,a){if(m(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var u=Object.keys(r),g=Object.keys(a);if(u.length!==g.length)return!1;for(g=0;g<u.length;g++){var _=u[g];if(!et.call(a,_)||!m(r[_],a[_]))return!1}return!0}function b(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function S(r,a){var u=b(r);r=0;for(var g;u;){if(u.nodeType===3){if(g=r+u.textContent.length,r<=a&&g>=a)return{node:u,offset:a-r};r=g}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=b(u)}}function R(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?R(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function L(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var a=X(r.document);a instanceof r.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)r=a.contentWindow;else break;a=X(r.document)}return a}function k(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}var q=hn&&"documentMode"in document&&11>=document.documentMode,te=null,re=null,he=null,ye=!1;function Ue(r,a,u){var g=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;ye||te==null||te!==X(g)||(g=te,"selectionStart"in g&&k(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),he&&y(he,g)||(he=g,g=gf(re,"onSelect"),0<g.length&&(a=new kn("onSelect","select",null,a,u),r.push({event:a,listeners:g}),a.target=te)))}function ke(r,a){var u={};return u[r.toLowerCase()]=a.toLowerCase(),u["Webkit"+r]="webkit"+a,u["Moz"+r]="moz"+a,u}var Oe={animationend:ke("Animation","AnimationEnd"),animationiteration:ke("Animation","AnimationIteration"),animationstart:ke("Animation","AnimationStart"),transitionrun:ke("Transition","TransitionRun"),transitionstart:ke("Transition","TransitionStart"),transitioncancel:ke("Transition","TransitionCancel"),transitionend:ke("Transition","TransitionEnd")},Ot={},Et={};hn&&(Et=document.createElement("div").style,"AnimationEvent"in window||(delete Oe.animationend.animation,delete Oe.animationiteration.animation,delete Oe.animationstart.animation),"TransitionEvent"in window||delete Oe.transitionend.transition);function $n(r){if(Ot[r])return Ot[r];if(!Oe[r])return r;var a=Oe[r],u;for(u in a)if(a.hasOwnProperty(u)&&u in Et)return Ot[r]=a[u];return r}var Ri=$n("animationend"),Gr=$n("animationiteration"),fn=$n("animationstart"),Or=$n("transitionrun"),xi=$n("transitionstart"),no=$n("transitioncancel"),ya=$n("transitionend"),Th=new Map,Kc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Kc.push("scrollEnd");function Ns(r,a){Th.set(r,a),Ht(a,[r])}var Sh=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},gs=[],kl=0,f0=0;function Ch(){for(var r=kl,a=f0=kl=0;a<r;){var u=gs[a];gs[a++]=null;var g=gs[a];gs[a++]=null;var _=gs[a];gs[a++]=null;var v=gs[a];if(gs[a++]=null,g!==null&&_!==null){var O=g.pending;O===null?_.next=_:(_.next=O.next,O.next=_),g.pending=_}v!==0&&Tp(u,_,v)}}function Ih(r,a,u,g){gs[kl++]=r,gs[kl++]=a,gs[kl++]=u,gs[kl++]=g,f0|=g,r.lanes|=g,r=r.alternate,r!==null&&(r.lanes|=g)}function d0(r,a,u,g){return Ih(r,a,u,g),Nh(r)}function il(r,a){return Ih(r,null,null,a),Nh(r)}function Tp(r,a,u){r.lanes|=u;var g=r.alternate;g!==null&&(g.lanes|=u);for(var _=!1,v=r.return;v!==null;)v.childLanes|=u,g=v.alternate,g!==null&&(g.childLanes|=u),v.tag===22&&(r=v.stateNode,r===null||r._visibility&1||(_=!0)),r=v,v=v.return;return r.tag===3?(v=r.stateNode,_&&a!==null&&(_=31-ot(u),r=v.hiddenUpdates,g=r[_],g===null?r[_]=[a]:g.push(a),a.lane=u|536870912),v):null}function Nh(r){if(50<xu)throw xu=0,b1=null,Error(s(185));for(var a=r.return;a!==null;)r=a,a=r.return;return r.tag===3?r.stateNode:null}var Bl={};function PT(r,a,u,g){this.tag=r,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gi(r,a,u,g){return new PT(r,a,u,g)}function g0(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Ea(r,a){var u=r.alternate;return u===null?(u=Gi(r.tag,a,r.key,r.mode),u.elementType=r.elementType,u.type=r.type,u.stateNode=r.stateNode,u.alternate=r,r.alternate=u):(u.pendingProps=a,u.type=r.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=r.flags&65011712,u.childLanes=r.childLanes,u.lanes=r.lanes,u.child=r.child,u.memoizedProps=r.memoizedProps,u.memoizedState=r.memoizedState,u.updateQueue=r.updateQueue,a=r.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=r.sibling,u.index=r.index,u.ref=r.ref,u.refCleanup=r.refCleanup,u}function Sp(r,a){r.flags&=65011714;var u=r.alternate;return u===null?(r.childLanes=0,r.lanes=a,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=u.childLanes,r.lanes=u.lanes,r.child=u.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=u.memoizedProps,r.memoizedState=u.memoizedState,r.updateQueue=u.updateQueue,r.type=u.type,a=u.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),r}function Rh(r,a,u,g,_,v){var O=0;if(g=r,typeof r=="function")g0(r)&&(O=1);else if(typeof r=="string")O=VS(r,u,Fe.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case j:return r=Gi(31,u,a,_),r.elementType=j,r.lanes=v,r;case Q:return sl(u.children,_,v,a);case Y:O=8,_|=24;break;case _e:return r=Gi(12,u,a,_|2),r.elementType=_e,r.lanes=v,r;case Re:return r=Gi(13,u,a,_),r.elementType=Re,r.lanes=v,r;case De:return r=Gi(19,u,a,_),r.elementType=De,r.lanes=v,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case K:O=10;break e;case ae:O=9;break e;case ce:O=11;break e;case F:O=14;break e;case V:O=16,g=null;break e}O=29,u=Error(s(130,r===null?"null":typeof r,"")),g=null}return a=Gi(O,u,a,_),a.elementType=r,a.type=g,a.lanes=v,a}function sl(r,a,u,g){return r=Gi(7,r,g,a),r.lanes=u,r}function m0(r,a,u){return r=Gi(6,r,null,a),r.lanes=u,r}function Cp(r){var a=Gi(18,null,null,0);return a.stateNode=r,a}function p0(r,a,u){return a=Gi(4,r.children!==null?r.children:[],r.key,a),a.lanes=u,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}var Ip=new WeakMap;function ms(r,a){if(typeof r=="object"&&r!==null){var u=Ip.get(r);return u!==void 0?u:(a={value:r,source:a,stack:Zt(a)},Ip.set(r,a),a)}return{value:r,source:a,stack:Zt(a)}}var Ul=[],Vl=0,Oh=null,Qc=0,ps=[],xs=0,ro=null,zs=1,Hs="";function _a(r,a){Ul[Vl++]=Qc,Ul[Vl++]=Oh,Oh=r,Qc=a}function Np(r,a,u){ps[xs++]=zs,ps[xs++]=Hs,ps[xs++]=ro,ro=r;var g=zs;r=Hs;var _=32-ot(g)-1;g&=~(1<<_),u+=1;var v=32-ot(a)+_;if(30<v){var O=_-_%5;v=(g&(1<<O)-1).toString(32),g>>=O,_-=O,zs=1<<32-ot(a)+_|u<<_|g,Hs=v+r}else zs=1<<v|u<<_|g,Hs=r}function x0(r){r.return!==null&&(_a(r,1),Np(r,1,0))}function y0(r){for(;r===Oh;)Oh=Ul[--Vl],Ul[Vl]=null,Qc=Ul[--Vl],Ul[Vl]=null;for(;r===ro;)ro=ps[--xs],ps[xs]=null,Hs=ps[--xs],ps[xs]=null,zs=ps[--xs],ps[xs]=null}function Rp(r,a){ps[xs++]=zs,ps[xs++]=Hs,ps[xs++]=ro,zs=a.id,Hs=a.overflow,ro=r}var qr=null,Bn=null,en=!1,io=null,ys=!1,E0=Error(s(519));function so(r){var a=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Zc(ms(a,r)),E0}function Op(r){var a=r.stateNode,u=r.type,g=r.memoizedProps;switch(a[Dt]=r,a[Bt]=g,u){case"dialog":jt("cancel",a),jt("close",a);break;case"iframe":case"object":case"embed":jt("load",a);break;case"video":case"audio":for(u=0;u<Eu.length;u++)jt(Eu[u],a);break;case"source":jt("error",a);break;case"img":case"image":case"link":jt("error",a),jt("load",a);break;case"details":jt("toggle",a);break;case"input":jt("invalid",a),le(a,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":jt("invalid",a);break;case"textarea":jt("invalid",a),Xn(a,g.value,g.defaultValue,g.children)}u=g.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||a.textContent===""+u||g.suppressHydrationWarning===!0||Wx(a.textContent,u)?(g.popover!=null&&(jt("beforetoggle",a),jt("toggle",a)),g.onScroll!=null&&jt("scroll",a),g.onScrollEnd!=null&&jt("scrollend",a),g.onClick!=null&&(a.onclick=ai),a=!0):a=!1,a||so(r,!0)}function Dp(r){for(qr=r.return;qr;)switch(qr.tag){case 5:case 31:case 13:ys=!1;return;case 27:case 3:ys=!0;return;default:qr=qr.return}}function jl(r){if(r!==qr)return!1;if(!en)return Dp(r),en=!0,!1;var a=r.tag,u;if((u=a!==3&&a!==27)&&((u=a===5)&&(u=r.type,u=!(u!=="form"&&u!=="button")||B1(r.type,r.memoizedProps)),u=!u),u&&Bn&&so(r),Dp(r),a===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));Bn=ry(r)}else if(a===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));Bn=ry(r)}else a===27?(a=Bn,_o(r.type)?(r=z1,z1=null,Bn=r):Bn=a):Bn=qr?_s(r.stateNode.nextSibling):null;return!0}function al(){Bn=qr=null,en=!1}function _0(){var r=io;return r!==null&&(Pi===null?Pi=r:Pi.push.apply(Pi,r),io=null),r}function Zc(r){io===null?io=[r]:io.push(r)}var w0=ie(null),ol=null,wa=null;function ao(r,a,u){je(w0,a._currentValue),a._currentValue=u}function ba(r){r._currentValue=w0.current,be(w0)}function b0(r,a,u){for(;r!==null;){var g=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,g!==null&&(g.childLanes|=a)):g!==null&&(g.childLanes&a)!==a&&(g.childLanes|=a),r===u)break;r=r.return}}function A0(r,a,u,g){var _=r.child;for(_!==null&&(_.return=r);_!==null;){var v=_.dependencies;if(v!==null){var O=_.child;v=v.firstContext;e:for(;v!==null;){var U=v;v=_;for(var ee=0;ee<a.length;ee++)if(U.context===a[ee]){v.lanes|=u,U=v.alternate,U!==null&&(U.lanes|=u),b0(v.return,u,r),g||(O=null);break e}v=U.next}}else if(_.tag===18){if(O=_.return,O===null)throw Error(s(341));O.lanes|=u,v=O.alternate,v!==null&&(v.lanes|=u),b0(O,u,r),O=null}else O=_.child;if(O!==null)O.return=_;else for(O=_;O!==null;){if(O===r){O=null;break}if(_=O.sibling,_!==null){_.return=O.return,O=_;break}O=O.return}_=O}}function Fl(r,a,u,g){r=null;for(var _=a,v=!1;_!==null;){if(!v){if((_.flags&524288)!==0)v=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var O=_.alternate;if(O===null)throw Error(s(387));if(O=O.memoizedProps,O!==null){var U=_.type;m(_.pendingProps.value,O.value)||(r!==null?r.push(U):r=[U])}}else if(_===Ct.current){if(O=_.alternate,O===null)throw Error(s(387));O.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(r!==null?r.push(vu):r=[vu])}_=_.return}r!==null&&A0(a,r,u,g),a.flags|=262144}function Dh(r){for(r=r.firstContext;r!==null;){if(!m(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function ll(r){ol=r,wa=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Yr(r){return Mp(ol,r)}function Mh(r,a){return ol===null&&ll(r),Mp(r,a)}function Mp(r,a){var u=a._currentValue;if(a={context:a,memoizedValue:u,next:null},wa===null){if(r===null)throw Error(s(308));wa=a,r.dependencies={lanes:0,firstContext:a},r.flags|=524288}else wa=wa.next=a;return u}var LT=typeof AbortController<"u"?AbortController:function(){var r=[],a=this.signal={aborted:!1,addEventListener:function(u,g){r.push(g)}};this.abort=function(){a.aborted=!0,r.forEach(function(u){return u()})}},kT=n.unstable_scheduleCallback,BT=n.unstable_NormalPriority,Er={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function v0(){return{controller:new LT,data:new Map,refCount:0}}function Jc(r){r.refCount--,r.refCount===0&&kT(BT,function(){r.controller.abort()})}var $c=null,T0=0,zl=0,Hl=null;function UT(r,a){if($c===null){var u=$c=[];T0=0,zl=I1(),Hl={status:"pending",value:void 0,then:function(g){u.push(g)}}}return T0++,a.then(Pp,Pp),a}function Pp(){if(--T0===0&&$c!==null){Hl!==null&&(Hl.status="fulfilled");var r=$c;$c=null,zl=0,Hl=null;for(var a=0;a<r.length;a++)(0,r[a])()}}function VT(r,a){var u=[],g={status:"pending",value:null,reason:null,then:function(_){u.push(_)}};return r.then(function(){g.status="fulfilled",g.value=a;for(var _=0;_<u.length;_++)(0,u[_])(a)},function(_){for(g.status="rejected",g.reason=_,_=0;_<u.length;_++)(0,u[_])(void 0)}),g}var Lp=pe.S;pe.S=function(r,a){yx=xn(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&UT(r,a),Lp!==null&&Lp(r,a)};var cl=ie(null);function S0(){var r=cl.current;return r!==null?r:In.pooledCache}function Ph(r,a){a===null?je(cl,cl.current):je(cl,a.pool)}function kp(){var r=S0();return r===null?null:{parent:Er._currentValue,pool:r}}var Gl=Error(s(460)),C0=Error(s(474)),Lh=Error(s(542)),kh={then:function(){}};function Bp(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Up(r,a,u){switch(u=r[u],u===void 0?r.push(a):u!==a&&(a.then(ai,ai),a=u),a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,jp(r),r;default:if(typeof a.status=="string")a.then(ai,ai);else{if(r=In,r!==null&&100<r.shellSuspendCounter)throw Error(s(482));r=a,r.status="pending",r.then(function(g){if(a.status==="pending"){var _=a;_.status="fulfilled",_.value=g}},function(g){if(a.status==="pending"){var _=a;_.status="rejected",_.reason=g}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,jp(r),r}throw hl=a,Gl}}function ul(r){try{var a=r._init;return a(r._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(hl=u,Gl):u}}var hl=null;function Vp(){if(hl===null)throw Error(s(459));var r=hl;return hl=null,r}function jp(r){if(r===Gl||r===Lh)throw Error(s(483))}var ql=null,eu=0;function Bh(r){var a=eu;return eu+=1,ql===null&&(ql=[]),Up(ql,r,a)}function tu(r,a){a=a.props.ref,r.ref=a!==void 0?a:null}function Uh(r,a){throw a.$$typeof===M?Error(s(525)):(r=Object.prototype.toString.call(a),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r)))}function Fp(r){function a(oe,se){if(r){var de=oe.deletions;de===null?(oe.deletions=[se],oe.flags|=16):de.push(se)}}function u(oe,se){if(!r)return null;for(;se!==null;)a(oe,se),se=se.sibling;return null}function g(oe){for(var se=new Map;oe!==null;)oe.key!==null?se.set(oe.key,oe):se.set(oe.index,oe),oe=oe.sibling;return se}function _(oe,se){return oe=Ea(oe,se),oe.index=0,oe.sibling=null,oe}function v(oe,se,de){return oe.index=de,r?(de=oe.alternate,de!==null?(de=de.index,de<se?(oe.flags|=67108866,se):de):(oe.flags|=67108866,se)):(oe.flags|=1048576,se)}function O(oe){return r&&oe.alternate===null&&(oe.flags|=67108866),oe}function U(oe,se,de,Se){return se===null||se.tag!==6?(se=m0(de,oe.mode,Se),se.return=oe,se):(se=_(se,de),se.return=oe,se)}function ee(oe,se,de,Se){var it=de.type;return it===Q?Ae(oe,se,de.props.children,Se,de.key):se!==null&&(se.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===V&&ul(it)===se.type)?(se=_(se,de.props),tu(se,de),se.return=oe,se):(se=Rh(de.type,de.key,de.props,null,oe.mode,Se),tu(se,de),se.return=oe,se)}function ge(oe,se,de,Se){return se===null||se.tag!==4||se.stateNode.containerInfo!==de.containerInfo||se.stateNode.implementation!==de.implementation?(se=p0(de,oe.mode,Se),se.return=oe,se):(se=_(se,de.children||[]),se.return=oe,se)}function Ae(oe,se,de,Se,it){return se===null||se.tag!==7?(se=sl(de,oe.mode,Se,it),se.return=oe,se):(se=_(se,de),se.return=oe,se)}function Ie(oe,se,de){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return se=m0(""+se,oe.mode,de),se.return=oe,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case B:return de=Rh(se.type,se.key,se.props,null,oe.mode,de),tu(de,se),de.return=oe,de;case W:return se=p0(se,oe.mode,de),se.return=oe,se;case V:return se=ul(se),Ie(oe,se,de)}if(fe(se)||$(se))return se=sl(se,oe.mode,de,null),se.return=oe,se;if(typeof se.then=="function")return Ie(oe,Bh(se),de);if(se.$$typeof===K)return Ie(oe,Mh(oe,se),de);Uh(oe,se)}return null}function me(oe,se,de,Se){var it=se!==null?se.key:null;if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return it!==null?null:U(oe,se,""+de,Se);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case B:return de.key===it?ee(oe,se,de,Se):null;case W:return de.key===it?ge(oe,se,de,Se):null;case V:return de=ul(de),me(oe,se,de,Se)}if(fe(de)||$(de))return it!==null?null:Ae(oe,se,de,Se,null);if(typeof de.then=="function")return me(oe,se,Bh(de),Se);if(de.$$typeof===K)return me(oe,se,Mh(oe,de),Se);Uh(oe,de)}return null}function we(oe,se,de,Se,it){if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return oe=oe.get(de)||null,U(se,oe,""+Se,it);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case B:return oe=oe.get(Se.key===null?de:Se.key)||null,ee(se,oe,Se,it);case W:return oe=oe.get(Se.key===null?de:Se.key)||null,ge(se,oe,Se,it);case V:return Se=ul(Se),we(oe,se,de,Se,it)}if(fe(Se)||$(Se))return oe=oe.get(de)||null,Ae(se,oe,Se,it,null);if(typeof Se.then=="function")return we(oe,se,de,Bh(Se),it);if(Se.$$typeof===K)return we(oe,se,de,Mh(se,Se),it);Uh(se,Se)}return null}function Ke(oe,se,de,Se){for(var it=null,an=null,Ze=se,It=se=0,Yt=null;Ze!==null&&It<de.length;It++){Ze.index>It?(Yt=Ze,Ze=null):Yt=Ze.sibling;var on=me(oe,Ze,de[It],Se);if(on===null){Ze===null&&(Ze=Yt);break}r&&Ze&&on.alternate===null&&a(oe,Ze),se=v(on,se,It),an===null?it=on:an.sibling=on,an=on,Ze=Yt}if(It===de.length)return u(oe,Ze),en&&_a(oe,It),it;if(Ze===null){for(;It<de.length;It++)Ze=Ie(oe,de[It],Se),Ze!==null&&(se=v(Ze,se,It),an===null?it=Ze:an.sibling=Ze,an=Ze);return en&&_a(oe,It),it}for(Ze=g(Ze);It<de.length;It++)Yt=we(Ze,oe,It,de[It],Se),Yt!==null&&(r&&Yt.alternate!==null&&Ze.delete(Yt.key===null?It:Yt.key),se=v(Yt,se,It),an===null?it=Yt:an.sibling=Yt,an=Yt);return r&&Ze.forEach(function(To){return a(oe,To)}),en&&_a(oe,It),it}function ct(oe,se,de,Se){if(de==null)throw Error(s(151));for(var it=null,an=null,Ze=se,It=se=0,Yt=null,on=de.next();Ze!==null&&!on.done;It++,on=de.next()){Ze.index>It?(Yt=Ze,Ze=null):Yt=Ze.sibling;var To=me(oe,Ze,on.value,Se);if(To===null){Ze===null&&(Ze=Yt);break}r&&Ze&&To.alternate===null&&a(oe,Ze),se=v(To,se,It),an===null?it=To:an.sibling=To,an=To,Ze=Yt}if(on.done)return u(oe,Ze),en&&_a(oe,It),it;if(Ze===null){for(;!on.done;It++,on=de.next())on=Ie(oe,on.value,Se),on!==null&&(se=v(on,se,It),an===null?it=on:an.sibling=on,an=on);return en&&_a(oe,It),it}for(Ze=g(Ze);!on.done;It++,on=de.next())on=we(Ze,oe,It,on.value,Se),on!==null&&(r&&on.alternate!==null&&Ze.delete(on.key===null?It:on.key),se=v(on,se,It),an===null?it=on:an.sibling=on,an=on);return r&&Ze.forEach(function(QS){return a(oe,QS)}),en&&_a(oe,It),it}function wn(oe,se,de,Se){if(typeof de=="object"&&de!==null&&de.type===Q&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case B:e:{for(var it=de.key;se!==null;){if(se.key===it){if(it=de.type,it===Q){if(se.tag===7){u(oe,se.sibling),Se=_(se,de.props.children),Se.return=oe,oe=Se;break e}}else if(se.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===V&&ul(it)===se.type){u(oe,se.sibling),Se=_(se,de.props),tu(Se,de),Se.return=oe,oe=Se;break e}u(oe,se);break}else a(oe,se);se=se.sibling}de.type===Q?(Se=sl(de.props.children,oe.mode,Se,de.key),Se.return=oe,oe=Se):(Se=Rh(de.type,de.key,de.props,null,oe.mode,Se),tu(Se,de),Se.return=oe,oe=Se)}return O(oe);case W:e:{for(it=de.key;se!==null;){if(se.key===it)if(se.tag===4&&se.stateNode.containerInfo===de.containerInfo&&se.stateNode.implementation===de.implementation){u(oe,se.sibling),Se=_(se,de.children||[]),Se.return=oe,oe=Se;break e}else{u(oe,se);break}else a(oe,se);se=se.sibling}Se=p0(de,oe.mode,Se),Se.return=oe,oe=Se}return O(oe);case V:return de=ul(de),wn(oe,se,de,Se)}if(fe(de))return Ke(oe,se,de,Se);if($(de)){if(it=$(de),typeof it!="function")throw Error(s(150));return de=it.call(de),ct(oe,se,de,Se)}if(typeof de.then=="function")return wn(oe,se,Bh(de),Se);if(de.$$typeof===K)return wn(oe,se,Mh(oe,de),Se);Uh(oe,de)}return typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint"?(de=""+de,se!==null&&se.tag===6?(u(oe,se.sibling),Se=_(se,de),Se.return=oe,oe=Se):(u(oe,se),Se=m0(de,oe.mode,Se),Se.return=oe,oe=Se),O(oe)):u(oe,se)}return function(oe,se,de,Se){try{eu=0;var it=wn(oe,se,de,Se);return ql=null,it}catch(Ze){if(Ze===Gl||Ze===Lh)throw Ze;var an=Gi(29,Ze,null,oe.mode);return an.lanes=Se,an.return=oe,an}finally{}}}var fl=Fp(!0),zp=Fp(!1),oo=!1;function I0(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function N0(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function lo(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function co(r,a,u){var g=r.updateQueue;if(g===null)return null;if(g=g.shared,(cn&2)!==0){var _=g.pending;return _===null?a.next=a:(a.next=_.next,_.next=a),g.pending=a,a=Nh(r),Tp(r,null,u),a}return Ih(r,g,a,u),Nh(r)}function nu(r,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194048)!==0)){var g=a.lanes;g&=r.pendingLanes,u|=g,a.lanes=u,xr(r,u)}}function R0(r,a){var u=r.updateQueue,g=r.alternate;if(g!==null&&(g=g.updateQueue,u===g)){var _=null,v=null;if(u=u.firstBaseUpdate,u!==null){do{var O={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};v===null?_=v=O:v=v.next=O,u=u.next}while(u!==null);v===null?_=v=a:v=v.next=a}else _=v=a;u={baseState:g.baseState,firstBaseUpdate:_,lastBaseUpdate:v,shared:g.shared,callbacks:g.callbacks},r.updateQueue=u;return}r=u.lastBaseUpdate,r===null?u.firstBaseUpdate=a:r.next=a,u.lastBaseUpdate=a}var O0=!1;function ru(){if(O0){var r=Hl;if(r!==null)throw r}}function iu(r,a,u,g){O0=!1;var _=r.updateQueue;oo=!1;var v=_.firstBaseUpdate,O=_.lastBaseUpdate,U=_.shared.pending;if(U!==null){_.shared.pending=null;var ee=U,ge=ee.next;ee.next=null,O===null?v=ge:O.next=ge,O=ee;var Ae=r.alternate;Ae!==null&&(Ae=Ae.updateQueue,U=Ae.lastBaseUpdate,U!==O&&(U===null?Ae.firstBaseUpdate=ge:U.next=ge,Ae.lastBaseUpdate=ee))}if(v!==null){var Ie=_.baseState;O=0,Ae=ge=ee=null,U=v;do{var me=U.lane&-536870913,we=me!==U.lane;if(we?(qt&me)===me:(g&me)===me){me!==0&&me===zl&&(O0=!0),Ae!==null&&(Ae=Ae.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});e:{var Ke=r,ct=U;me=a;var wn=u;switch(ct.tag){case 1:if(Ke=ct.payload,typeof Ke=="function"){Ie=Ke.call(wn,Ie,me);break e}Ie=Ke;break e;case 3:Ke.flags=Ke.flags&-65537|128;case 0:if(Ke=ct.payload,me=typeof Ke=="function"?Ke.call(wn,Ie,me):Ke,me==null)break e;Ie=I({},Ie,me);break e;case 2:oo=!0}}me=U.callback,me!==null&&(r.flags|=64,we&&(r.flags|=8192),we=_.callbacks,we===null?_.callbacks=[me]:we.push(me))}else we={lane:me,tag:U.tag,payload:U.payload,callback:U.callback,next:null},Ae===null?(ge=Ae=we,ee=Ie):Ae=Ae.next=we,O|=me;if(U=U.next,U===null){if(U=_.shared.pending,U===null)break;we=U,U=we.next,we.next=null,_.lastBaseUpdate=we,_.shared.pending=null}}while(!0);Ae===null&&(ee=Ie),_.baseState=ee,_.firstBaseUpdate=ge,_.lastBaseUpdate=Ae,v===null&&(_.shared.lanes=0),mo|=O,r.lanes=O,r.memoizedState=Ie}}function Hp(r,a){if(typeof r!="function")throw Error(s(191,r));r.call(a)}function Gp(r,a){var u=r.callbacks;if(u!==null)for(r.callbacks=null,r=0;r<u.length;r++)Hp(u[r],a)}var Yl=ie(null),Vh=ie(0);function qp(r,a){r=Oa,je(Vh,r),je(Yl,a),Oa=r|a.baseLanes}function D0(){je(Vh,Oa),je(Yl,Yl.current)}function M0(){Oa=Vh.current,be(Yl),be(Vh)}var qi=ie(null),Es=null;function uo(r){var a=r.alternate;je(ur,ur.current&1),je(qi,r),Es===null&&(a===null||Yl.current!==null||a.memoizedState!==null)&&(Es=r)}function P0(r){je(ur,ur.current),je(qi,r),Es===null&&(Es=r)}function Yp(r){r.tag===22?(je(ur,ur.current),je(qi,r),Es===null&&(Es=r)):ho()}function ho(){je(ur,ur.current),je(qi,qi.current)}function Yi(r){be(qi),Es===r&&(Es=null),be(ur)}var ur=ie(0);function jh(r){for(var a=r;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||j1(u)||F1(u)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Aa=0,Tt=null,En=null,_r=null,Fh=!1,Xl=!1,dl=!1,zh=0,su=0,Wl=null,jT=0;function er(){throw Error(s(321))}function L0(r,a){if(a===null)return!1;for(var u=0;u<a.length&&u<r.length;u++)if(!m(r[u],a[u]))return!1;return!0}function k0(r,a,u,g,_,v){return Aa=v,Tt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,pe.H=r===null||r.memoizedState===null?N2:Z0,dl=!1,v=u(g,_),dl=!1,Xl&&(v=Wp(a,u,g,_)),Xp(r),v}function Xp(r){pe.H=lu;var a=En!==null&&En.next!==null;if(Aa=0,_r=En=Tt=null,Fh=!1,su=0,Wl=null,a)throw Error(s(300));r===null||wr||(r=r.dependencies,r!==null&&Dh(r)&&(wr=!0))}function Wp(r,a,u,g){Tt=r;var _=0;do{if(Xl&&(Wl=null),su=0,Xl=!1,25<=_)throw Error(s(301));if(_+=1,_r=En=null,r.updateQueue!=null){var v=r.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}pe.H=R2,v=a(u,g)}while(Xl);return v}function FT(){var r=pe.H,a=r.useState()[0];return a=typeof a.then=="function"?au(a):a,r=r.useState()[0],(En!==null?En.memoizedState:null)!==r&&(Tt.flags|=1024),a}function B0(){var r=zh!==0;return zh=0,r}function U0(r,a,u){a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~u}function V0(r){if(Fh){for(r=r.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Fh=!1}Aa=0,_r=En=Tt=null,Xl=!1,su=zh=0,Wl=null}function yi(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _r===null?Tt.memoizedState=_r=r:_r=_r.next=r,_r}function hr(){if(En===null){var r=Tt.alternate;r=r!==null?r.memoizedState:null}else r=En.next;var a=_r===null?Tt.memoizedState:_r.next;if(a!==null)_r=a,En=r;else{if(r===null)throw Tt.alternate===null?Error(s(467)):Error(s(310));En=r,r={memoizedState:En.memoizedState,baseState:En.baseState,baseQueue:En.baseQueue,queue:En.queue,next:null},_r===null?Tt.memoizedState=_r=r:_r=_r.next=r}return _r}function Hh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function au(r){var a=su;return su+=1,Wl===null&&(Wl=[]),r=Up(Wl,r,a),a=Tt,(_r===null?a.memoizedState:_r.next)===null&&(a=a.alternate,pe.H=a===null||a.memoizedState===null?N2:Z0),r}function Gh(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return au(r);if(r.$$typeof===K)return Yr(r)}throw Error(s(438,String(r)))}function j0(r){var a=null,u=Tt.updateQueue;if(u!==null&&(a=u.memoCache),a==null){var g=Tt.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(a={data:g.data.map(function(_){return _.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),u===null&&(u=Hh(),Tt.updateQueue=u),u.memoCache=a,u=a.data[a.index],u===void 0)for(u=a.data[a.index]=Array(r),g=0;g<r;g++)u[g]=Z;return a.index++,u}function va(r,a){return typeof a=="function"?a(r):a}function qh(r){var a=hr();return F0(a,En,r)}function F0(r,a,u){var g=r.queue;if(g===null)throw Error(s(311));g.lastRenderedReducer=u;var _=r.baseQueue,v=g.pending;if(v!==null){if(_!==null){var O=_.next;_.next=v.next,v.next=O}a.baseQueue=_=v,g.pending=null}if(v=r.baseState,_===null)r.memoizedState=v;else{a=_.next;var U=O=null,ee=null,ge=a,Ae=!1;do{var Ie=ge.lane&-536870913;if(Ie!==ge.lane?(qt&Ie)===Ie:(Aa&Ie)===Ie){var me=ge.revertLane;if(me===0)ee!==null&&(ee=ee.next={lane:0,revertLane:0,gesture:null,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null}),Ie===zl&&(Ae=!0);else if((Aa&me)===me){ge=ge.next,me===zl&&(Ae=!0);continue}else Ie={lane:0,revertLane:ge.revertLane,gesture:null,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},ee===null?(U=ee=Ie,O=v):ee=ee.next=Ie,Tt.lanes|=me,mo|=me;Ie=ge.action,dl&&u(v,Ie),v=ge.hasEagerState?ge.eagerState:u(v,Ie)}else me={lane:Ie,revertLane:ge.revertLane,gesture:ge.gesture,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},ee===null?(U=ee=me,O=v):ee=ee.next=me,Tt.lanes|=Ie,mo|=Ie;ge=ge.next}while(ge!==null&&ge!==a);if(ee===null?O=v:ee.next=U,!m(v,r.memoizedState)&&(wr=!0,Ae&&(u=Hl,u!==null)))throw u;r.memoizedState=v,r.baseState=O,r.baseQueue=ee,g.lastRenderedState=v}return _===null&&(g.lanes=0),[r.memoizedState,g.dispatch]}function z0(r){var a=hr(),u=a.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=r;var g=u.dispatch,_=u.pending,v=a.memoizedState;if(_!==null){u.pending=null;var O=_=_.next;do v=r(v,O.action),O=O.next;while(O!==_);m(v,a.memoizedState)||(wr=!0),a.memoizedState=v,a.baseQueue===null&&(a.baseState=v),u.lastRenderedState=v}return[v,g]}function Kp(r,a,u){var g=Tt,_=hr(),v=en;if(v){if(u===void 0)throw Error(s(407));u=u()}else u=a();var O=!m((En||_).memoizedState,u);if(O&&(_.memoizedState=u,wr=!0),_=_.queue,q0(Jp.bind(null,g,_,r),[r]),_.getSnapshot!==a||O||_r!==null&&_r.memoizedState.tag&1){if(g.flags|=2048,Kl(9,{destroy:void 0},Zp.bind(null,g,_,u,a),null),In===null)throw Error(s(349));v||(Aa&127)!==0||Qp(g,a,u)}return u}function Qp(r,a,u){r.flags|=16384,r={getSnapshot:a,value:u},a=Tt.updateQueue,a===null?(a=Hh(),Tt.updateQueue=a,a.stores=[r]):(u=a.stores,u===null?a.stores=[r]:u.push(r))}function Zp(r,a,u,g){a.value=u,a.getSnapshot=g,$p(a)&&e2(r)}function Jp(r,a,u){return u(function(){$p(a)&&e2(r)})}function $p(r){var a=r.getSnapshot;r=r.value;try{var u=a();return!m(r,u)}catch{return!0}}function e2(r){var a=il(r,2);a!==null&&Li(a,r,2)}function H0(r){var a=yi();if(typeof r=="function"){var u=r;if(r=u(),dl){zt(!0);try{u()}finally{zt(!1)}}}return a.memoizedState=a.baseState=r,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:r},a}function t2(r,a,u,g){return r.baseState=u,F0(r,En,typeof g=="function"?g:va)}function zT(r,a,u,g,_){if(Wh(r))throw Error(s(485));if(r=a.action,r!==null){var v={payload:_,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(O){v.listeners.push(O)}};pe.T!==null?u(!0):v.isTransition=!1,g(v),u=a.pending,u===null?(v.next=a.pending=v,n2(a,v)):(v.next=u.next,a.pending=u.next=v)}}function n2(r,a){var u=a.action,g=a.payload,_=r.state;if(a.isTransition){var v=pe.T,O={};pe.T=O;try{var U=u(_,g),ee=pe.S;ee!==null&&ee(O,U),r2(r,a,U)}catch(ge){G0(r,a,ge)}finally{v!==null&&O.types!==null&&(v.types=O.types),pe.T=v}}else try{v=u(_,g),r2(r,a,v)}catch(ge){G0(r,a,ge)}}function r2(r,a,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(g){i2(r,a,g)},function(g){return G0(r,a,g)}):i2(r,a,u)}function i2(r,a,u){a.status="fulfilled",a.value=u,s2(a),r.state=u,a=r.pending,a!==null&&(u=a.next,u===a?r.pending=null:(u=u.next,a.next=u,n2(r,u)))}function G0(r,a,u){var g=r.pending;if(r.pending=null,g!==null){g=g.next;do a.status="rejected",a.reason=u,s2(a),a=a.next;while(a!==g)}r.action=null}function s2(r){r=r.listeners;for(var a=0;a<r.length;a++)(0,r[a])()}function a2(r,a){return a}function o2(r,a){if(en){var u=In.formState;if(u!==null){e:{var g=Tt;if(en){if(Bn){t:{for(var _=Bn,v=ys;_.nodeType!==8;){if(!v){_=null;break t}if(_=_s(_.nextSibling),_===null){_=null;break t}}v=_.data,_=v==="F!"||v==="F"?_:null}if(_){Bn=_s(_.nextSibling),g=_.data==="F!";break e}}so(g)}g=!1}g&&(a=u[0])}}return u=yi(),u.memoizedState=u.baseState=a,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a2,lastRenderedState:a},u.queue=g,u=S2.bind(null,Tt,g),g.dispatch=u,g=H0(!1),v=Q0.bind(null,Tt,!1,g.queue),g=yi(),_={state:a,dispatch:null,action:r,pending:null},g.queue=_,u=zT.bind(null,Tt,_,v,u),_.dispatch=u,g.memoizedState=r,[a,u,!1]}function l2(r){var a=hr();return c2(a,En,r)}function c2(r,a,u){if(a=F0(r,a,a2)[0],r=qh(va)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var g=au(a)}catch(O){throw O===Gl?Lh:O}else g=a;a=hr();var _=a.queue,v=_.dispatch;return u!==a.memoizedState&&(Tt.flags|=2048,Kl(9,{destroy:void 0},HT.bind(null,_,u),null)),[g,v,r]}function HT(r,a){r.action=a}function u2(r){var a=hr(),u=En;if(u!==null)return c2(a,u,r);hr(),a=a.memoizedState,u=hr();var g=u.queue.dispatch;return u.memoizedState=r,[a,g,!1]}function Kl(r,a,u,g){return r={tag:r,create:u,deps:g,inst:a,next:null},a=Tt.updateQueue,a===null&&(a=Hh(),Tt.updateQueue=a),u=a.lastEffect,u===null?a.lastEffect=r.next=r:(g=u.next,u.next=r,r.next=g,a.lastEffect=r),r}function h2(){return hr().memoizedState}function Yh(r,a,u,g){var _=yi();Tt.flags|=r,_.memoizedState=Kl(1|a,{destroy:void 0},u,g===void 0?null:g)}function Xh(r,a,u,g){var _=hr();g=g===void 0?null:g;var v=_.memoizedState.inst;En!==null&&g!==null&&L0(g,En.memoizedState.deps)?_.memoizedState=Kl(a,v,u,g):(Tt.flags|=r,_.memoizedState=Kl(1|a,v,u,g))}function f2(r,a){Yh(8390656,8,r,a)}function q0(r,a){Xh(2048,8,r,a)}function GT(r){Tt.flags|=4;var a=Tt.updateQueue;if(a===null)a=Hh(),Tt.updateQueue=a,a.events=[r];else{var u=a.events;u===null?a.events=[r]:u.push(r)}}function d2(r){var a=hr().memoizedState;return GT({ref:a,nextImpl:r}),function(){if((cn&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}function g2(r,a){return Xh(4,2,r,a)}function m2(r,a){return Xh(4,4,r,a)}function p2(r,a){if(typeof a=="function"){r=r();var u=a(r);return function(){typeof u=="function"?u():a(null)}}if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function x2(r,a,u){u=u!=null?u.concat([r]):null,Xh(4,4,p2.bind(null,a,r),u)}function Y0(){}function y2(r,a){var u=hr();a=a===void 0?null:a;var g=u.memoizedState;return a!==null&&L0(a,g[1])?g[0]:(u.memoizedState=[r,a],r)}function E2(r,a){var u=hr();a=a===void 0?null:a;var g=u.memoizedState;if(a!==null&&L0(a,g[1]))return g[0];if(g=r(),dl){zt(!0);try{r()}finally{zt(!1)}}return u.memoizedState=[g,a],g}function X0(r,a,u){return u===void 0||(Aa&1073741824)!==0&&(qt&261930)===0?r.memoizedState=a:(r.memoizedState=u,r=_x(),Tt.lanes|=r,mo|=r,u)}function _2(r,a,u,g){return m(u,a)?u:Yl.current!==null?(r=X0(r,u,g),m(r,a)||(wr=!0),r):(Aa&42)===0||(Aa&1073741824)!==0&&(qt&261930)===0?(wr=!0,r.memoizedState=u):(r=_x(),Tt.lanes|=r,mo|=r,a)}function w2(r,a,u,g,_){var v=ve.p;ve.p=v!==0&&8>v?v:8;var O=pe.T,U={};pe.T=U,Q0(r,!1,a,u);try{var ee=_(),ge=pe.S;if(ge!==null&&ge(U,ee),ee!==null&&typeof ee=="object"&&typeof ee.then=="function"){var Ae=VT(ee,g);ou(r,a,Ae,Ki(r))}else ou(r,a,g,Ki(r))}catch(Ie){ou(r,a,{then:function(){},status:"rejected",reason:Ie},Ki())}finally{ve.p=v,O!==null&&U.types!==null&&(O.types=U.types),pe.T=O}}function qT(){}function W0(r,a,u,g){if(r.tag!==5)throw Error(s(476));var _=b2(r).queue;w2(r,_,a,Xe,u===null?qT:function(){return A2(r),u(g)})}function b2(r){var a=r.memoizedState;if(a!==null)return a;a={memoizedState:Xe,baseState:Xe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:Xe},next:null};var u={};return a.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:u},next:null},r.memoizedState=a,r=r.alternate,r!==null&&(r.memoizedState=a),a}function A2(r){var a=b2(r);a.next===null&&(a=r.alternate.memoizedState),ou(r,a.next.queue,{},Ki())}function K0(){return Yr(vu)}function v2(){return hr().memoizedState}function T2(){return hr().memoizedState}function YT(r){for(var a=r.return;a!==null;){switch(a.tag){case 24:case 3:var u=Ki();r=lo(u);var g=co(a,r,u);g!==null&&(Li(g,a,u),nu(g,a,u)),a={cache:v0()},r.payload=a;return}a=a.return}}function XT(r,a,u){var g=Ki();u={lane:g,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Wh(r)?C2(a,u):(u=d0(r,a,u,g),u!==null&&(Li(u,r,g),I2(u,a,g)))}function S2(r,a,u){var g=Ki();ou(r,a,u,g)}function ou(r,a,u,g){var _={lane:g,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Wh(r))C2(a,_);else{var v=r.alternate;if(r.lanes===0&&(v===null||v.lanes===0)&&(v=a.lastRenderedReducer,v!==null))try{var O=a.lastRenderedState,U=v(O,u);if(_.hasEagerState=!0,_.eagerState=U,m(U,O))return Ih(r,a,_,0),In===null&&Ch(),!1}catch{}finally{}if(u=d0(r,a,_,g),u!==null)return Li(u,r,g),I2(u,a,g),!0}return!1}function Q0(r,a,u,g){if(g={lane:2,revertLane:I1(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},Wh(r)){if(a)throw Error(s(479))}else a=d0(r,u,g,2),a!==null&&Li(a,r,2)}function Wh(r){var a=r.alternate;return r===Tt||a!==null&&a===Tt}function C2(r,a){Xl=Fh=!0;var u=r.pending;u===null?a.next=a:(a.next=u.next,u.next=a),r.pending=a}function I2(r,a,u){if((u&4194048)!==0){var g=a.lanes;g&=r.pendingLanes,u|=g,a.lanes=u,xr(r,u)}}var lu={readContext:Yr,use:Gh,useCallback:er,useContext:er,useEffect:er,useImperativeHandle:er,useLayoutEffect:er,useInsertionEffect:er,useMemo:er,useReducer:er,useRef:er,useState:er,useDebugValue:er,useDeferredValue:er,useTransition:er,useSyncExternalStore:er,useId:er,useHostTransitionStatus:er,useFormState:er,useActionState:er,useOptimistic:er,useMemoCache:er,useCacheRefresh:er};lu.useEffectEvent=er;var N2={readContext:Yr,use:Gh,useCallback:function(r,a){return yi().memoizedState=[r,a===void 0?null:a],r},useContext:Yr,useEffect:f2,useImperativeHandle:function(r,a,u){u=u!=null?u.concat([r]):null,Yh(4194308,4,p2.bind(null,a,r),u)},useLayoutEffect:function(r,a){return Yh(4194308,4,r,a)},useInsertionEffect:function(r,a){Yh(4,2,r,a)},useMemo:function(r,a){var u=yi();a=a===void 0?null:a;var g=r();if(dl){zt(!0);try{r()}finally{zt(!1)}}return u.memoizedState=[g,a],g},useReducer:function(r,a,u){var g=yi();if(u!==void 0){var _=u(a);if(dl){zt(!0);try{u(a)}finally{zt(!1)}}}else _=a;return g.memoizedState=g.baseState=_,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:_},g.queue=r,r=r.dispatch=XT.bind(null,Tt,r),[g.memoizedState,r]},useRef:function(r){var a=yi();return r={current:r},a.memoizedState=r},useState:function(r){r=H0(r);var a=r.queue,u=S2.bind(null,Tt,a);return a.dispatch=u,[r.memoizedState,u]},useDebugValue:Y0,useDeferredValue:function(r,a){var u=yi();return X0(u,r,a)},useTransition:function(){var r=H0(!1);return r=w2.bind(null,Tt,r.queue,!0,!1),yi().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,a,u){var g=Tt,_=yi();if(en){if(u===void 0)throw Error(s(407));u=u()}else{if(u=a(),In===null)throw Error(s(349));(qt&127)!==0||Qp(g,a,u)}_.memoizedState=u;var v={value:u,getSnapshot:a};return _.queue=v,f2(Jp.bind(null,g,v,r),[r]),g.flags|=2048,Kl(9,{destroy:void 0},Zp.bind(null,g,v,u,a),null),u},useId:function(){var r=yi(),a=In.identifierPrefix;if(en){var u=Hs,g=zs;u=(g&~(1<<32-ot(g)-1)).toString(32)+u,a="_"+a+"R_"+u,u=zh++,0<u&&(a+="H"+u.toString(32)),a+="_"}else u=jT++,a="_"+a+"r_"+u.toString(32)+"_";return r.memoizedState=a},useHostTransitionStatus:K0,useFormState:o2,useActionState:o2,useOptimistic:function(r){var a=yi();a.memoizedState=a.baseState=r;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=u,a=Q0.bind(null,Tt,!0,u),u.dispatch=a,[r,a]},useMemoCache:j0,useCacheRefresh:function(){return yi().memoizedState=YT.bind(null,Tt)},useEffectEvent:function(r){var a=yi(),u={impl:r};return a.memoizedState=u,function(){if((cn&2)!==0)throw Error(s(440));return u.impl.apply(void 0,arguments)}}},Z0={readContext:Yr,use:Gh,useCallback:y2,useContext:Yr,useEffect:q0,useImperativeHandle:x2,useInsertionEffect:g2,useLayoutEffect:m2,useMemo:E2,useReducer:qh,useRef:h2,useState:function(){return qh(va)},useDebugValue:Y0,useDeferredValue:function(r,a){var u=hr();return _2(u,En.memoizedState,r,a)},useTransition:function(){var r=qh(va)[0],a=hr().memoizedState;return[typeof r=="boolean"?r:au(r),a]},useSyncExternalStore:Kp,useId:v2,useHostTransitionStatus:K0,useFormState:l2,useActionState:l2,useOptimistic:function(r,a){var u=hr();return t2(u,En,r,a)},useMemoCache:j0,useCacheRefresh:T2};Z0.useEffectEvent=d2;var R2={readContext:Yr,use:Gh,useCallback:y2,useContext:Yr,useEffect:q0,useImperativeHandle:x2,useInsertionEffect:g2,useLayoutEffect:m2,useMemo:E2,useReducer:z0,useRef:h2,useState:function(){return z0(va)},useDebugValue:Y0,useDeferredValue:function(r,a){var u=hr();return En===null?X0(u,r,a):_2(u,En.memoizedState,r,a)},useTransition:function(){var r=z0(va)[0],a=hr().memoizedState;return[typeof r=="boolean"?r:au(r),a]},useSyncExternalStore:Kp,useId:v2,useHostTransitionStatus:K0,useFormState:u2,useActionState:u2,useOptimistic:function(r,a){var u=hr();return En!==null?t2(u,En,r,a):(u.baseState=r,[r,u.queue.dispatch])},useMemoCache:j0,useCacheRefresh:T2};R2.useEffectEvent=d2;function J0(r,a,u,g){a=r.memoizedState,u=u(g,a),u=u==null?a:I({},a,u),r.memoizedState=u,r.lanes===0&&(r.updateQueue.baseState=u)}var $0={enqueueSetState:function(r,a,u){r=r._reactInternals;var g=Ki(),_=lo(g);_.payload=a,u!=null&&(_.callback=u),a=co(r,_,g),a!==null&&(Li(a,r,g),nu(a,r,g))},enqueueReplaceState:function(r,a,u){r=r._reactInternals;var g=Ki(),_=lo(g);_.tag=1,_.payload=a,u!=null&&(_.callback=u),a=co(r,_,g),a!==null&&(Li(a,r,g),nu(a,r,g))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var u=Ki(),g=lo(u);g.tag=2,a!=null&&(g.callback=a),a=co(r,g,u),a!==null&&(Li(a,r,u),nu(a,r,u))}};function O2(r,a,u,g,_,v,O){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(g,v,O):a.prototype&&a.prototype.isPureReactComponent?!y(u,g)||!y(_,v):!0}function D2(r,a,u,g){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,g),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,g),a.state!==r&&$0.enqueueReplaceState(a,a.state,null)}function gl(r,a){var u=a;if("ref"in a){u={};for(var g in a)g!=="ref"&&(u[g]=a[g])}if(r=r.defaultProps){u===a&&(u=I({},u));for(var _ in r)u[_]===void 0&&(u[_]=r[_])}return u}function M2(r){Sh(r)}function P2(r){console.error(r)}function L2(r){Sh(r)}function Kh(r,a){try{var u=r.onUncaughtError;u(a.value,{componentStack:a.stack})}catch(g){setTimeout(function(){throw g})}}function k2(r,a,u){try{var g=r.onCaughtError;g(u.value,{componentStack:u.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function e1(r,a,u){return u=lo(u),u.tag=3,u.payload={element:null},u.callback=function(){Kh(r,a)},u}function B2(r){return r=lo(r),r.tag=3,r}function U2(r,a,u,g){var _=u.type.getDerivedStateFromError;if(typeof _=="function"){var v=g.value;r.payload=function(){return _(v)},r.callback=function(){k2(a,u,g)}}var O=u.stateNode;O!==null&&typeof O.componentDidCatch=="function"&&(r.callback=function(){k2(a,u,g),typeof _!="function"&&(po===null?po=new Set([this]):po.add(this));var U=g.stack;this.componentDidCatch(g.value,{componentStack:U!==null?U:""})})}function WT(r,a,u,g,_){if(u.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(a=u.alternate,a!==null&&Fl(a,u,_,!0),u=qi.current,u!==null){switch(u.tag){case 31:case 13:return Es===null?lf():u.alternate===null&&tr===0&&(tr=3),u.flags&=-257,u.flags|=65536,u.lanes=_,g===kh?u.flags|=16384:(a=u.updateQueue,a===null?u.updateQueue=new Set([g]):a.add(g),T1(r,g,_)),!1;case 22:return u.flags|=65536,g===kh?u.flags|=16384:(a=u.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([g])},u.updateQueue=a):(u=a.retryQueue,u===null?a.retryQueue=new Set([g]):u.add(g)),T1(r,g,_)),!1}throw Error(s(435,u.tag))}return T1(r,g,_),lf(),!1}if(en)return a=qi.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=_,g!==E0&&(r=Error(s(422),{cause:g}),Zc(ms(r,u)))):(g!==E0&&(a=Error(s(423),{cause:g}),Zc(ms(a,u))),r=r.current.alternate,r.flags|=65536,_&=-_,r.lanes|=_,g=ms(g,u),_=e1(r.stateNode,g,_),R0(r,_),tr!==4&&(tr=2)),!1;var v=Error(s(520),{cause:g});if(v=ms(v,u),pu===null?pu=[v]:pu.push(v),tr!==4&&(tr=2),a===null)return!0;g=ms(g,u),u=a;do{switch(u.tag){case 3:return u.flags|=65536,r=_&-_,u.lanes|=r,r=e1(u.stateNode,g,r),R0(u,r),!1;case 1:if(a=u.type,v=u.stateNode,(u.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(po===null||!po.has(v))))return u.flags|=65536,_&=-_,u.lanes|=_,_=B2(_),U2(_,r,u,g),R0(u,_),!1}u=u.return}while(u!==null);return!1}var t1=Error(s(461)),wr=!1;function Xr(r,a,u,g){a.child=r===null?zp(a,null,u,g):fl(a,r.child,u,g)}function V2(r,a,u,g,_){u=u.render;var v=a.ref;if("ref"in g){var O={};for(var U in g)U!=="ref"&&(O[U]=g[U])}else O=g;return ll(a),g=k0(r,a,u,O,v,_),U=B0(),r!==null&&!wr?(U0(r,a,_),Ta(r,a,_)):(en&&U&&x0(a),a.flags|=1,Xr(r,a,g,_),a.child)}function j2(r,a,u,g,_){if(r===null){var v=u.type;return typeof v=="function"&&!g0(v)&&v.defaultProps===void 0&&u.compare===null?(a.tag=15,a.type=v,F2(r,a,v,g,_)):(r=Rh(u.type,null,g,a,a.mode,_),r.ref=a.ref,r.return=a,a.child=r)}if(v=r.child,!c1(r,_)){var O=v.memoizedProps;if(u=u.compare,u=u!==null?u:y,u(O,g)&&r.ref===a.ref)return Ta(r,a,_)}return a.flags|=1,r=Ea(v,g),r.ref=a.ref,r.return=a,a.child=r}function F2(r,a,u,g,_){if(r!==null){var v=r.memoizedProps;if(y(v,g)&&r.ref===a.ref)if(wr=!1,a.pendingProps=g=v,c1(r,_))(r.flags&131072)!==0&&(wr=!0);else return a.lanes=r.lanes,Ta(r,a,_)}return n1(r,a,u,g,_)}function z2(r,a,u,g){var _=g.children,v=r!==null?r.memoizedState:null;if(r===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((a.flags&128)!==0){if(v=v!==null?v.baseLanes|u:u,r!==null){for(g=a.child=r.child,_=0;g!==null;)_=_|g.lanes|g.childLanes,g=g.sibling;g=_&~v}else g=0,a.child=null;return H2(r,a,v,u,g)}if((u&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},r!==null&&Ph(a,v!==null?v.cachePool:null),v!==null?qp(a,v):D0(),Yp(a);else return g=a.lanes=536870912,H2(r,a,v!==null?v.baseLanes|u:u,u,g)}else v!==null?(Ph(a,v.cachePool),qp(a,v),ho(),a.memoizedState=null):(r!==null&&Ph(a,null),D0(),ho());return Xr(r,a,_,u),a.child}function cu(r,a){return r!==null&&r.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function H2(r,a,u,g,_){var v=S0();return v=v===null?null:{parent:Er._currentValue,pool:v},a.memoizedState={baseLanes:u,cachePool:v},r!==null&&Ph(a,null),D0(),Yp(a),r!==null&&Fl(r,a,g,!0),a.childLanes=_,null}function Qh(r,a){return a=Jh({mode:a.mode,children:a.children},r.mode),a.ref=r.ref,r.child=a,a.return=r,a}function G2(r,a,u){return fl(a,r.child,null,u),r=Qh(a,a.pendingProps),r.flags|=2,Yi(a),a.memoizedState=null,r}function KT(r,a,u){var g=a.pendingProps,_=(a.flags&128)!==0;if(a.flags&=-129,r===null){if(en){if(g.mode==="hidden")return r=Qh(a,g),a.lanes=536870912,cu(null,r);if(P0(a),(r=Bn)?(r=ny(r,ys),r=r!==null&&r.data==="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:ro!==null?{id:zs,overflow:Hs}:null,retryLane:536870912,hydrationErrors:null},u=Cp(r),u.return=a,a.child=u,qr=a,Bn=null)):r=null,r===null)throw so(a);return a.lanes=536870912,null}return Qh(a,g)}var v=r.memoizedState;if(v!==null){var O=v.dehydrated;if(P0(a),_)if(a.flags&256)a.flags&=-257,a=G2(r,a,u);else if(a.memoizedState!==null)a.child=r.child,a.flags|=128,a=null;else throw Error(s(558));else if(wr||Fl(r,a,u,!1),_=(u&r.childLanes)!==0,wr||_){if(g=In,g!==null&&(O=Bi(g,u),O!==0&&O!==v.retryLane))throw v.retryLane=O,il(r,O),Li(g,r,O),t1;lf(),a=G2(r,a,u)}else r=v.treeContext,Bn=_s(O.nextSibling),qr=a,en=!0,io=null,ys=!1,r!==null&&Rp(a,r),a=Qh(a,g),a.flags|=4096;return a}return r=Ea(r.child,{mode:g.mode,children:g.children}),r.ref=a.ref,a.child=r,r.return=a,r}function Zh(r,a){var u=a.ref;if(u===null)r!==null&&r.ref!==null&&(a.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(s(284));(r===null||r.ref!==u)&&(a.flags|=4194816)}}function n1(r,a,u,g,_){return ll(a),u=k0(r,a,u,g,void 0,_),g=B0(),r!==null&&!wr?(U0(r,a,_),Ta(r,a,_)):(en&&g&&x0(a),a.flags|=1,Xr(r,a,u,_),a.child)}function q2(r,a,u,g,_,v){return ll(a),a.updateQueue=null,u=Wp(a,g,u,_),Xp(r),g=B0(),r!==null&&!wr?(U0(r,a,v),Ta(r,a,v)):(en&&g&&x0(a),a.flags|=1,Xr(r,a,u,v),a.child)}function Y2(r,a,u,g,_){if(ll(a),a.stateNode===null){var v=Bl,O=u.contextType;typeof O=="object"&&O!==null&&(v=Yr(O)),v=new u(g,v),a.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=$0,a.stateNode=v,v._reactInternals=a,v=a.stateNode,v.props=g,v.state=a.memoizedState,v.refs={},I0(a),O=u.contextType,v.context=typeof O=="object"&&O!==null?Yr(O):Bl,v.state=a.memoizedState,O=u.getDerivedStateFromProps,typeof O=="function"&&(J0(a,u,O,g),v.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(O=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),O!==v.state&&$0.enqueueReplaceState(v,v.state,null),iu(a,g,v,_),ru(),v.state=a.memoizedState),typeof v.componentDidMount=="function"&&(a.flags|=4194308),g=!0}else if(r===null){v=a.stateNode;var U=a.memoizedProps,ee=gl(u,U);v.props=ee;var ge=v.context,Ae=u.contextType;O=Bl,typeof Ae=="object"&&Ae!==null&&(O=Yr(Ae));var Ie=u.getDerivedStateFromProps;Ae=typeof Ie=="function"||typeof v.getSnapshotBeforeUpdate=="function",U=a.pendingProps!==U,Ae||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(U||ge!==O)&&D2(a,v,g,O),oo=!1;var me=a.memoizedState;v.state=me,iu(a,g,v,_),ru(),ge=a.memoizedState,U||me!==ge||oo?(typeof Ie=="function"&&(J0(a,u,Ie,g),ge=a.memoizedState),(ee=oo||O2(a,u,ee,g,me,ge,O))?(Ae||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(a.flags|=4194308)):(typeof v.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=g,a.memoizedState=ge),v.props=g,v.state=ge,v.context=O,g=ee):(typeof v.componentDidMount=="function"&&(a.flags|=4194308),g=!1)}else{v=a.stateNode,N0(r,a),O=a.memoizedProps,Ae=gl(u,O),v.props=Ae,Ie=a.pendingProps,me=v.context,ge=u.contextType,ee=Bl,typeof ge=="object"&&ge!==null&&(ee=Yr(ge)),U=u.getDerivedStateFromProps,(ge=typeof U=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(O!==Ie||me!==ee)&&D2(a,v,g,ee),oo=!1,me=a.memoizedState,v.state=me,iu(a,g,v,_),ru();var we=a.memoizedState;O!==Ie||me!==we||oo||r!==null&&r.dependencies!==null&&Dh(r.dependencies)?(typeof U=="function"&&(J0(a,u,U,g),we=a.memoizedState),(Ae=oo||O2(a,u,Ae,g,me,we,ee)||r!==null&&r.dependencies!==null&&Dh(r.dependencies))?(ge||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(g,we,ee),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(g,we,ee)),typeof v.componentDidUpdate=="function"&&(a.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof v.componentDidUpdate!="function"||O===r.memoizedProps&&me===r.memoizedState||(a.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||O===r.memoizedProps&&me===r.memoizedState||(a.flags|=1024),a.memoizedProps=g,a.memoizedState=we),v.props=g,v.state=we,v.context=ee,g=Ae):(typeof v.componentDidUpdate!="function"||O===r.memoizedProps&&me===r.memoizedState||(a.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||O===r.memoizedProps&&me===r.memoizedState||(a.flags|=1024),g=!1)}return v=g,Zh(r,a),g=(a.flags&128)!==0,v||g?(v=a.stateNode,u=g&&typeof u.getDerivedStateFromError!="function"?null:v.render(),a.flags|=1,r!==null&&g?(a.child=fl(a,r.child,null,_),a.child=fl(a,null,u,_)):Xr(r,a,u,_),a.memoizedState=v.state,r=a.child):r=Ta(r,a,_),r}function X2(r,a,u,g){return al(),a.flags|=256,Xr(r,a,u,g),a.child}var r1={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function i1(r){return{baseLanes:r,cachePool:kp()}}function s1(r,a,u){return r=r!==null?r.childLanes&~u:0,a&&(r|=Wi),r}function W2(r,a,u){var g=a.pendingProps,_=!1,v=(a.flags&128)!==0,O;if((O=v)||(O=r!==null&&r.memoizedState===null?!1:(ur.current&2)!==0),O&&(_=!0,a.flags&=-129),O=(a.flags&32)!==0,a.flags&=-33,r===null){if(en){if(_?uo(a):ho(),(r=Bn)?(r=ny(r,ys),r=r!==null&&r.data!=="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:ro!==null?{id:zs,overflow:Hs}:null,retryLane:536870912,hydrationErrors:null},u=Cp(r),u.return=a,a.child=u,qr=a,Bn=null)):r=null,r===null)throw so(a);return F1(r)?a.lanes=32:a.lanes=536870912,null}var U=g.children;return g=g.fallback,_?(ho(),_=a.mode,U=Jh({mode:"hidden",children:U},_),g=sl(g,_,u,null),U.return=a,g.return=a,U.sibling=g,a.child=U,g=a.child,g.memoizedState=i1(u),g.childLanes=s1(r,O,u),a.memoizedState=r1,cu(null,g)):(uo(a),a1(a,U))}var ee=r.memoizedState;if(ee!==null&&(U=ee.dehydrated,U!==null)){if(v)a.flags&256?(uo(a),a.flags&=-257,a=o1(r,a,u)):a.memoizedState!==null?(ho(),a.child=r.child,a.flags|=128,a=null):(ho(),U=g.fallback,_=a.mode,g=Jh({mode:"visible",children:g.children},_),U=sl(U,_,u,null),U.flags|=2,g.return=a,U.return=a,g.sibling=U,a.child=g,fl(a,r.child,null,u),g=a.child,g.memoizedState=i1(u),g.childLanes=s1(r,O,u),a.memoizedState=r1,a=cu(null,g));else if(uo(a),F1(U)){if(O=U.nextSibling&&U.nextSibling.dataset,O)var ge=O.dgst;O=ge,g=Error(s(419)),g.stack="",g.digest=O,Zc({value:g,source:null,stack:null}),a=o1(r,a,u)}else if(wr||Fl(r,a,u,!1),O=(u&r.childLanes)!==0,wr||O){if(O=In,O!==null&&(g=Bi(O,u),g!==0&&g!==ee.retryLane))throw ee.retryLane=g,il(r,g),Li(O,r,g),t1;j1(U)||lf(),a=o1(r,a,u)}else j1(U)?(a.flags|=192,a.child=r.child,a=null):(r=ee.treeContext,Bn=_s(U.nextSibling),qr=a,en=!0,io=null,ys=!1,r!==null&&Rp(a,r),a=a1(a,g.children),a.flags|=4096);return a}return _?(ho(),U=g.fallback,_=a.mode,ee=r.child,ge=ee.sibling,g=Ea(ee,{mode:"hidden",children:g.children}),g.subtreeFlags=ee.subtreeFlags&65011712,ge!==null?U=Ea(ge,U):(U=sl(U,_,u,null),U.flags|=2),U.return=a,g.return=a,g.sibling=U,a.child=g,cu(null,g),g=a.child,U=r.child.memoizedState,U===null?U=i1(u):(_=U.cachePool,_!==null?(ee=Er._currentValue,_=_.parent!==ee?{parent:ee,pool:ee}:_):_=kp(),U={baseLanes:U.baseLanes|u,cachePool:_}),g.memoizedState=U,g.childLanes=s1(r,O,u),a.memoizedState=r1,cu(r.child,g)):(uo(a),u=r.child,r=u.sibling,u=Ea(u,{mode:"visible",children:g.children}),u.return=a,u.sibling=null,r!==null&&(O=a.deletions,O===null?(a.deletions=[r],a.flags|=16):O.push(r)),a.child=u,a.memoizedState=null,u)}function a1(r,a){return a=Jh({mode:"visible",children:a},r.mode),a.return=r,r.child=a}function Jh(r,a){return r=Gi(22,r,null,a),r.lanes=0,r}function o1(r,a,u){return fl(a,r.child,null,u),r=a1(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function K2(r,a,u){r.lanes|=a;var g=r.alternate;g!==null&&(g.lanes|=a),b0(r.return,a,u)}function l1(r,a,u,g,_,v){var O=r.memoizedState;O===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:g,tail:u,tailMode:_,treeForkCount:v}:(O.isBackwards=a,O.rendering=null,O.renderingStartTime=0,O.last=g,O.tail=u,O.tailMode=_,O.treeForkCount=v)}function Q2(r,a,u){var g=a.pendingProps,_=g.revealOrder,v=g.tail;g=g.children;var O=ur.current,U=(O&2)!==0;if(U?(O=O&1|2,a.flags|=128):O&=1,je(ur,O),Xr(r,a,g,u),g=en?Qc:0,!U&&r!==null&&(r.flags&128)!==0)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&K2(r,u,a);else if(r.tag===19)K2(r,u,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(_){case"forwards":for(u=a.child,_=null;u!==null;)r=u.alternate,r!==null&&jh(r)===null&&(_=u),u=u.sibling;u=_,u===null?(_=a.child,a.child=null):(_=u.sibling,u.sibling=null),l1(a,!1,_,u,v,g);break;case"backwards":case"unstable_legacy-backwards":for(u=null,_=a.child,a.child=null;_!==null;){if(r=_.alternate,r!==null&&jh(r)===null){a.child=_;break}r=_.sibling,_.sibling=u,u=_,_=r}l1(a,!0,u,null,v,g);break;case"together":l1(a,!1,null,null,void 0,g);break;default:a.memoizedState=null}return a.child}function Ta(r,a,u){if(r!==null&&(a.dependencies=r.dependencies),mo|=a.lanes,(u&a.childLanes)===0)if(r!==null){if(Fl(r,a,u,!1),(u&a.childLanes)===0)return null}else return null;if(r!==null&&a.child!==r.child)throw Error(s(153));if(a.child!==null){for(r=a.child,u=Ea(r,r.pendingProps),a.child=u,u.return=a;r.sibling!==null;)r=r.sibling,u=u.sibling=Ea(r,r.pendingProps),u.return=a;u.sibling=null}return a.child}function c1(r,a){return(r.lanes&a)!==0?!0:(r=r.dependencies,!!(r!==null&&Dh(r)))}function QT(r,a,u){switch(a.tag){case 3:mt(a,a.stateNode.containerInfo),ao(a,Er,r.memoizedState.cache),al();break;case 27:case 5:$r(a);break;case 4:mt(a,a.stateNode.containerInfo);break;case 10:ao(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,P0(a),null;break;case 13:var g=a.memoizedState;if(g!==null)return g.dehydrated!==null?(uo(a),a.flags|=128,null):(u&a.child.childLanes)!==0?W2(r,a,u):(uo(a),r=Ta(r,a,u),r!==null?r.sibling:null);uo(a);break;case 19:var _=(r.flags&128)!==0;if(g=(u&a.childLanes)!==0,g||(Fl(r,a,u,!1),g=(u&a.childLanes)!==0),_){if(g)return Q2(r,a,u);a.flags|=128}if(_=a.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),je(ur,ur.current),g)break;return null;case 22:return a.lanes=0,z2(r,a,u,a.pendingProps);case 24:ao(a,Er,r.memoizedState.cache)}return Ta(r,a,u)}function Z2(r,a,u){if(r!==null)if(r.memoizedProps!==a.pendingProps)wr=!0;else{if(!c1(r,u)&&(a.flags&128)===0)return wr=!1,QT(r,a,u);wr=(r.flags&131072)!==0}else wr=!1,en&&(a.flags&1048576)!==0&&Np(a,Qc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var g=a.pendingProps;if(r=ul(a.elementType),a.type=r,typeof r=="function")g0(r)?(g=gl(r,g),a.tag=1,a=Y2(null,a,r,g,u)):(a.tag=0,a=n1(null,a,r,g,u));else{if(r!=null){var _=r.$$typeof;if(_===ce){a.tag=11,a=V2(null,a,r,g,u);break e}else if(_===F){a.tag=14,a=j2(null,a,r,g,u);break e}}throw a=Qe(r)||r,Error(s(306,a,""))}}return a;case 0:return n1(r,a,a.type,a.pendingProps,u);case 1:return g=a.type,_=gl(g,a.pendingProps),Y2(r,a,g,_,u);case 3:e:{if(mt(a,a.stateNode.containerInfo),r===null)throw Error(s(387));g=a.pendingProps;var v=a.memoizedState;_=v.element,N0(r,a),iu(a,g,null,u);var O=a.memoizedState;if(g=O.cache,ao(a,Er,g),g!==v.cache&&A0(a,[Er],u,!0),ru(),g=O.element,v.isDehydrated)if(v={element:g,isDehydrated:!1,cache:O.cache},a.updateQueue.baseState=v,a.memoizedState=v,a.flags&256){a=X2(r,a,g,u);break e}else if(g!==_){_=ms(Error(s(424)),a),Zc(_),a=X2(r,a,g,u);break e}else{switch(r=a.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Bn=_s(r.firstChild),qr=a,en=!0,io=null,ys=!0,u=zp(a,null,g,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(al(),g===_){a=Ta(r,a,u);break e}Xr(r,a,g,u)}a=a.child}return a;case 26:return Zh(r,a),r===null?(u=ly(a.type,null,a.pendingProps,null))?a.memoizedState=u:en||(u=a.type,r=a.pendingProps,g=mf(Be.current).createElement(u),g[Dt]=a,g[Bt]=r,Wr(g,u,r),On(g),a.stateNode=g):a.memoizedState=ly(a.type,r.memoizedProps,a.pendingProps,r.memoizedState),null;case 27:return $r(a),r===null&&en&&(g=a.stateNode=sy(a.type,a.pendingProps,Be.current),qr=a,ys=!0,_=Bn,_o(a.type)?(z1=_,Bn=_s(g.firstChild)):Bn=_),Xr(r,a,a.pendingProps.children,u),Zh(r,a),r===null&&(a.flags|=4194304),a.child;case 5:return r===null&&en&&((_=g=Bn)&&(g=SS(g,a.type,a.pendingProps,ys),g!==null?(a.stateNode=g,qr=a,Bn=_s(g.firstChild),ys=!1,_=!0):_=!1),_||so(a)),$r(a),_=a.type,v=a.pendingProps,O=r!==null?r.memoizedProps:null,g=v.children,B1(_,v)?g=null:O!==null&&B1(_,O)&&(a.flags|=32),a.memoizedState!==null&&(_=k0(r,a,FT,null,null,u),vu._currentValue=_),Zh(r,a),Xr(r,a,g,u),a.child;case 6:return r===null&&en&&((r=u=Bn)&&(u=CS(u,a.pendingProps,ys),u!==null?(a.stateNode=u,qr=a,Bn=null,r=!0):r=!1),r||so(a)),null;case 13:return W2(r,a,u);case 4:return mt(a,a.stateNode.containerInfo),g=a.pendingProps,r===null?a.child=fl(a,null,g,u):Xr(r,a,g,u),a.child;case 11:return V2(r,a,a.type,a.pendingProps,u);case 7:return Xr(r,a,a.pendingProps,u),a.child;case 8:return Xr(r,a,a.pendingProps.children,u),a.child;case 12:return Xr(r,a,a.pendingProps.children,u),a.child;case 10:return g=a.pendingProps,ao(a,a.type,g.value),Xr(r,a,g.children,u),a.child;case 9:return _=a.type._context,g=a.pendingProps.children,ll(a),_=Yr(_),g=g(_),a.flags|=1,Xr(r,a,g,u),a.child;case 14:return j2(r,a,a.type,a.pendingProps,u);case 15:return F2(r,a,a.type,a.pendingProps,u);case 19:return Q2(r,a,u);case 31:return KT(r,a,u);case 22:return z2(r,a,u,a.pendingProps);case 24:return ll(a),g=Yr(Er),r===null?(_=S0(),_===null&&(_=In,v=v0(),_.pooledCache=v,v.refCount++,v!==null&&(_.pooledCacheLanes|=u),_=v),a.memoizedState={parent:g,cache:_},I0(a),ao(a,Er,_)):((r.lanes&u)!==0&&(N0(r,a),iu(a,null,null,u),ru()),_=r.memoizedState,v=a.memoizedState,_.parent!==g?(_={parent:g,cache:g},a.memoizedState=_,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=_),ao(a,Er,g)):(g=v.cache,ao(a,Er,g),g!==_.cache&&A0(a,[Er],u,!0))),Xr(r,a,a.pendingProps.children,u),a.child;case 29:throw a.pendingProps}throw Error(s(156,a.tag))}function Sa(r){r.flags|=4}function u1(r,a,u,g,_){if((a=(r.mode&32)!==0)&&(a=!1),a){if(r.flags|=16777216,(_&335544128)===_)if(r.stateNode.complete)r.flags|=8192;else if(vx())r.flags|=8192;else throw hl=kh,C0}else r.flags&=-16777217}function J2(r,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!dy(a))if(vx())r.flags|=8192;else throw hl=kh,C0}function $h(r,a){a!==null&&(r.flags|=4),r.flags&16384&&(a=r.tag!==22?Fn():536870912,r.lanes|=a,$l|=a)}function uu(r,a){if(!en)switch(r.tailMode){case"hidden":a=r.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?r.tail=null:u.sibling=null;break;case"collapsed":u=r.tail;for(var g=null;u!==null;)u.alternate!==null&&(g=u),u=u.sibling;g===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:g.sibling=null}}function Un(r){var a=r.alternate!==null&&r.alternate.child===r.child,u=0,g=0;if(a)for(var _=r.child;_!==null;)u|=_.lanes|_.childLanes,g|=_.subtreeFlags&65011712,g|=_.flags&65011712,_.return=r,_=_.sibling;else for(_=r.child;_!==null;)u|=_.lanes|_.childLanes,g|=_.subtreeFlags,g|=_.flags,_.return=r,_=_.sibling;return r.subtreeFlags|=g,r.childLanes=u,a}function ZT(r,a,u){var g=a.pendingProps;switch(y0(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Un(a),null;case 1:return Un(a),null;case 3:return u=a.stateNode,g=null,r!==null&&(g=r.memoizedState.cache),a.memoizedState.cache!==g&&(a.flags|=2048),ba(Er),Qt(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(r===null||r.child===null)&&(jl(a)?Sa(a):r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,_0())),Un(a),null;case 26:var _=a.type,v=a.memoizedState;return r===null?(Sa(a),v!==null?(Un(a),J2(a,v)):(Un(a),u1(a,_,null,g,u))):v?v!==r.memoizedState?(Sa(a),Un(a),J2(a,v)):(Un(a),a.flags&=-16777217):(r=r.memoizedProps,r!==g&&Sa(a),Un(a),u1(a,_,r,g,u)),null;case 27:if(Mn(a),u=Be.current,_=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==g&&Sa(a);else{if(!g){if(a.stateNode===null)throw Error(s(166));return Un(a),null}r=Fe.current,jl(a)?Op(a):(r=sy(_,g,u),a.stateNode=r,Sa(a))}return Un(a),null;case 5:if(Mn(a),_=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==g&&Sa(a);else{if(!g){if(a.stateNode===null)throw Error(s(166));return Un(a),null}if(v=Fe.current,jl(a))Op(a);else{var O=mf(Be.current);switch(v){case 1:v=O.createElementNS("http://www.w3.org/2000/svg",_);break;case 2:v=O.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;default:switch(_){case"svg":v=O.createElementNS("http://www.w3.org/2000/svg",_);break;case"math":v=O.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;case"script":v=O.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof g.is=="string"?O.createElement("select",{is:g.is}):O.createElement("select"),g.multiple?v.multiple=!0:g.size&&(v.size=g.size);break;default:v=typeof g.is=="string"?O.createElement(_,{is:g.is}):O.createElement(_)}}v[Dt]=a,v[Bt]=g;e:for(O=a.child;O!==null;){if(O.tag===5||O.tag===6)v.appendChild(O.stateNode);else if(O.tag!==4&&O.tag!==27&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===a)break e;for(;O.sibling===null;){if(O.return===null||O.return===a)break e;O=O.return}O.sibling.return=O.return,O=O.sibling}a.stateNode=v;e:switch(Wr(v,_,g),_){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&Sa(a)}}return Un(a),u1(a,a.type,r===null?null:r.memoizedProps,a.pendingProps,u),null;case 6:if(r&&a.stateNode!=null)r.memoizedProps!==g&&Sa(a);else{if(typeof g!="string"&&a.stateNode===null)throw Error(s(166));if(r=Be.current,jl(a)){if(r=a.stateNode,u=a.memoizedProps,g=null,_=qr,_!==null)switch(_.tag){case 27:case 5:g=_.memoizedProps}r[Dt]=a,r=!!(r.nodeValue===u||g!==null&&g.suppressHydrationWarning===!0||Wx(r.nodeValue,u)),r||so(a,!0)}else r=mf(r).createTextNode(g),r[Dt]=a,a.stateNode=r}return Un(a),null;case 31:if(u=a.memoizedState,r===null||r.memoizedState!==null){if(g=jl(a),u!==null){if(r===null){if(!g)throw Error(s(318));if(r=a.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(557));r[Dt]=a}else al(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Un(a),r=!1}else u=_0(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=u),r=!0;if(!r)return a.flags&256?(Yi(a),a):(Yi(a),null);if((a.flags&128)!==0)throw Error(s(558))}return Un(a),null;case 13:if(g=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(_=jl(a),g!==null&&g.dehydrated!==null){if(r===null){if(!_)throw Error(s(318));if(_=a.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(s(317));_[Dt]=a}else al(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Un(a),_=!1}else _=_0(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=_),_=!0;if(!_)return a.flags&256?(Yi(a),a):(Yi(a),null)}return Yi(a),(a.flags&128)!==0?(a.lanes=u,a):(u=g!==null,r=r!==null&&r.memoizedState!==null,u&&(g=a.child,_=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(_=g.alternate.memoizedState.cachePool.pool),v=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(v=g.memoizedState.cachePool.pool),v!==_&&(g.flags|=2048)),u!==r&&u&&(a.child.flags|=8192),$h(a,a.updateQueue),Un(a),null);case 4:return Qt(),r===null&&D1(a.stateNode.containerInfo),Un(a),null;case 10:return ba(a.type),Un(a),null;case 19:if(be(ur),g=a.memoizedState,g===null)return Un(a),null;if(_=(a.flags&128)!==0,v=g.rendering,v===null)if(_)uu(g,!1);else{if(tr!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(v=jh(r),v!==null){for(a.flags|=128,uu(g,!1),r=v.updateQueue,a.updateQueue=r,$h(a,r),a.subtreeFlags=0,r=u,u=a.child;u!==null;)Sp(u,r),u=u.sibling;return je(ur,ur.current&1|2),en&&_a(a,g.treeForkCount),a.child}r=r.sibling}g.tail!==null&&xn()>sf&&(a.flags|=128,_=!0,uu(g,!1),a.lanes=4194304)}else{if(!_)if(r=jh(v),r!==null){if(a.flags|=128,_=!0,r=r.updateQueue,a.updateQueue=r,$h(a,r),uu(g,!0),g.tail===null&&g.tailMode==="hidden"&&!v.alternate&&!en)return Un(a),null}else 2*xn()-g.renderingStartTime>sf&&u!==536870912&&(a.flags|=128,_=!0,uu(g,!1),a.lanes=4194304);g.isBackwards?(v.sibling=a.child,a.child=v):(r=g.last,r!==null?r.sibling=v:a.child=v,g.last=v)}return g.tail!==null?(r=g.tail,g.rendering=r,g.tail=r.sibling,g.renderingStartTime=xn(),r.sibling=null,u=ur.current,je(ur,_?u&1|2:u&1),en&&_a(a,g.treeForkCount),r):(Un(a),null);case 22:case 23:return Yi(a),M0(),g=a.memoizedState!==null,r!==null?r.memoizedState!==null!==g&&(a.flags|=8192):g&&(a.flags|=8192),g?(u&536870912)!==0&&(a.flags&128)===0&&(Un(a),a.subtreeFlags&6&&(a.flags|=8192)):Un(a),u=a.updateQueue,u!==null&&$h(a,u.retryQueue),u=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),g=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(g=a.memoizedState.cachePool.pool),g!==u&&(a.flags|=2048),r!==null&&be(cl),null;case 24:return u=null,r!==null&&(u=r.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),ba(Er),Un(a),null;case 25:return null;case 30:return null}throw Error(s(156,a.tag))}function JT(r,a){switch(y0(a),a.tag){case 1:return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return ba(Er),Qt(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 26:case 27:case 5:return Mn(a),null;case 31:if(a.memoizedState!==null){if(Yi(a),a.alternate===null)throw Error(s(340));al()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 13:if(Yi(a),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(s(340));al()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return be(ur),null;case 4:return Qt(),null;case 10:return ba(a.type),null;case 22:case 23:return Yi(a),M0(),r!==null&&be(cl),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 24:return ba(Er),null;case 25:return null;default:return null}}function $2(r,a){switch(y0(a),a.tag){case 3:ba(Er),Qt();break;case 26:case 27:case 5:Mn(a);break;case 4:Qt();break;case 31:a.memoizedState!==null&&Yi(a);break;case 13:Yi(a);break;case 19:be(ur);break;case 10:ba(a.type);break;case 22:case 23:Yi(a),M0(),r!==null&&be(cl);break;case 24:ba(Er)}}function hu(r,a){try{var u=a.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var _=g.next;u=_;do{if((u.tag&r)===r){g=void 0;var v=u.create,O=u.inst;g=v(),O.destroy=g}u=u.next}while(u!==_)}}catch(U){gn(a,a.return,U)}}function fo(r,a,u){try{var g=a.updateQueue,_=g!==null?g.lastEffect:null;if(_!==null){var v=_.next;g=v;do{if((g.tag&r)===r){var O=g.inst,U=O.destroy;if(U!==void 0){O.destroy=void 0,_=a;var ee=u,ge=U;try{ge()}catch(Ae){gn(_,ee,Ae)}}}g=g.next}while(g!==v)}}catch(Ae){gn(a,a.return,Ae)}}function ex(r){var a=r.updateQueue;if(a!==null){var u=r.stateNode;try{Gp(a,u)}catch(g){gn(r,r.return,g)}}}function tx(r,a,u){u.props=gl(r.type,r.memoizedProps),u.state=r.memoizedState;try{u.componentWillUnmount()}catch(g){gn(r,a,g)}}function fu(r,a){try{var u=r.ref;if(u!==null){switch(r.tag){case 26:case 27:case 5:var g=r.stateNode;break;case 30:g=r.stateNode;break;default:g=r.stateNode}typeof u=="function"?r.refCleanup=u(g):u.current=g}}catch(_){gn(r,a,_)}}function Gs(r,a){var u=r.ref,g=r.refCleanup;if(u!==null)if(typeof g=="function")try{g()}catch(_){gn(r,a,_)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(_){gn(r,a,_)}else u.current=null}function nx(r){var a=r.type,u=r.memoizedProps,g=r.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":u.autoFocus&&g.focus();break e;case"img":u.src?g.src=u.src:u.srcSet&&(g.srcset=u.srcSet)}}catch(_){gn(r,r.return,_)}}function h1(r,a,u){try{var g=r.stateNode;_S(g,r.type,u,a),g[Bt]=a}catch(_){gn(r,r.return,_)}}function rx(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&_o(r.type)||r.tag===4}function f1(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||rx(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&_o(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function d1(r,a,u){var g=r.tag;if(g===5||g===6)r=r.stateNode,a?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(r,a):(a=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,a.appendChild(r),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=ai));else if(g!==4&&(g===27&&_o(r.type)&&(u=r.stateNode,a=null),r=r.child,r!==null))for(d1(r,a,u),r=r.sibling;r!==null;)d1(r,a,u),r=r.sibling}function ef(r,a,u){var g=r.tag;if(g===5||g===6)r=r.stateNode,a?u.insertBefore(r,a):u.appendChild(r);else if(g!==4&&(g===27&&_o(r.type)&&(u=r.stateNode),r=r.child,r!==null))for(ef(r,a,u),r=r.sibling;r!==null;)ef(r,a,u),r=r.sibling}function ix(r){var a=r.stateNode,u=r.memoizedProps;try{for(var g=r.type,_=a.attributes;_.length;)a.removeAttributeNode(_[0]);Wr(a,g,u),a[Dt]=r,a[Bt]=u}catch(v){gn(r,r.return,v)}}var Ca=!1,br=!1,g1=!1,sx=typeof WeakSet=="function"?WeakSet:Set,Ur=null;function $T(r,a){if(r=r.containerInfo,L1=bf,r=L(r),k(r)){if("selectionStart"in r)var u={start:r.selectionStart,end:r.selectionEnd};else e:{u=(u=r.ownerDocument)&&u.defaultView||window;var g=u.getSelection&&u.getSelection();if(g&&g.rangeCount!==0){u=g.anchorNode;var _=g.anchorOffset,v=g.focusNode;g=g.focusOffset;try{u.nodeType,v.nodeType}catch{u=null;break e}var O=0,U=-1,ee=-1,ge=0,Ae=0,Ie=r,me=null;t:for(;;){for(var we;Ie!==u||_!==0&&Ie.nodeType!==3||(U=O+_),Ie!==v||g!==0&&Ie.nodeType!==3||(ee=O+g),Ie.nodeType===3&&(O+=Ie.nodeValue.length),(we=Ie.firstChild)!==null;)me=Ie,Ie=we;for(;;){if(Ie===r)break t;if(me===u&&++ge===_&&(U=O),me===v&&++Ae===g&&(ee=O),(we=Ie.nextSibling)!==null)break;Ie=me,me=Ie.parentNode}Ie=we}u=U===-1||ee===-1?null:{start:U,end:ee}}else u=null}u=u||{start:0,end:0}}else u=null;for(k1={focusedElem:r,selectionRange:u},bf=!1,Ur=a;Ur!==null;)if(a=Ur,r=a.child,(a.subtreeFlags&1028)!==0&&r!==null)r.return=a,Ur=r;else for(;Ur!==null;){switch(a=Ur,v=a.alternate,r=a.flags,a.tag){case 0:if((r&4)!==0&&(r=a.updateQueue,r=r!==null?r.events:null,r!==null))for(u=0;u<r.length;u++)_=r[u],_.ref.impl=_.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&v!==null){r=void 0,u=a,_=v.memoizedProps,v=v.memoizedState,g=u.stateNode;try{var Ke=gl(u.type,_);r=g.getSnapshotBeforeUpdate(Ke,v),g.__reactInternalSnapshotBeforeUpdate=r}catch(ct){gn(u,u.return,ct)}}break;case 3:if((r&1024)!==0){if(r=a.stateNode.containerInfo,u=r.nodeType,u===9)V1(r);else if(u===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":V1(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(s(163))}if(r=a.sibling,r!==null){r.return=a.return,Ur=r;break}Ur=a.return}}function ax(r,a,u){var g=u.flags;switch(u.tag){case 0:case 11:case 15:Na(r,u),g&4&&hu(5,u);break;case 1:if(Na(r,u),g&4)if(r=u.stateNode,a===null)try{r.componentDidMount()}catch(O){gn(u,u.return,O)}else{var _=gl(u.type,a.memoizedProps);a=a.memoizedState;try{r.componentDidUpdate(_,a,r.__reactInternalSnapshotBeforeUpdate)}catch(O){gn(u,u.return,O)}}g&64&&ex(u),g&512&&fu(u,u.return);break;case 3:if(Na(r,u),g&64&&(r=u.updateQueue,r!==null)){if(a=null,u.child!==null)switch(u.child.tag){case 27:case 5:a=u.child.stateNode;break;case 1:a=u.child.stateNode}try{Gp(r,a)}catch(O){gn(u,u.return,O)}}break;case 27:a===null&&g&4&&ix(u);case 26:case 5:Na(r,u),a===null&&g&4&&nx(u),g&512&&fu(u,u.return);break;case 12:Na(r,u);break;case 31:Na(r,u),g&4&&cx(r,u);break;case 13:Na(r,u),g&4&&ux(r,u),g&64&&(r=u.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(u=lS.bind(null,u),IS(r,u))));break;case 22:if(g=u.memoizedState!==null||Ca,!g){a=a!==null&&a.memoizedState!==null||br,_=Ca;var v=br;Ca=g,(br=a)&&!v?Ra(r,u,(u.subtreeFlags&8772)!==0):Na(r,u),Ca=_,br=v}break;case 30:break;default:Na(r,u)}}function ox(r){var a=r.alternate;a!==null&&(r.alternate=null,ox(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&yr(a)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var qn=null,Oi=!1;function Ia(r,a,u){for(u=u.child;u!==null;)lx(r,a,u),u=u.sibling}function lx(r,a,u){if(Le&&typeof Le.onCommitFiberUnmount=="function")try{Le.onCommitFiberUnmount(kt,u)}catch{}switch(u.tag){case 26:br||Gs(u,a),Ia(r,a,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:br||Gs(u,a);var g=qn,_=Oi;_o(u.type)&&(qn=u.stateNode,Oi=!1),Ia(r,a,u),wu(u.stateNode),qn=g,Oi=_;break;case 5:br||Gs(u,a);case 6:if(g=qn,_=Oi,qn=null,Ia(r,a,u),qn=g,Oi=_,qn!==null)if(Oi)try{(qn.nodeType===9?qn.body:qn.nodeName==="HTML"?qn.ownerDocument.body:qn).removeChild(u.stateNode)}catch(v){gn(u,a,v)}else try{qn.removeChild(u.stateNode)}catch(v){gn(u,a,v)}break;case 18:qn!==null&&(Oi?(r=qn,ey(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,u.stateNode),oc(r)):ey(qn,u.stateNode));break;case 4:g=qn,_=Oi,qn=u.stateNode.containerInfo,Oi=!0,Ia(r,a,u),qn=g,Oi=_;break;case 0:case 11:case 14:case 15:fo(2,u,a),br||fo(4,u,a),Ia(r,a,u);break;case 1:br||(Gs(u,a),g=u.stateNode,typeof g.componentWillUnmount=="function"&&tx(u,a,g)),Ia(r,a,u);break;case 21:Ia(r,a,u);break;case 22:br=(g=br)||u.memoizedState!==null,Ia(r,a,u),br=g;break;default:Ia(r,a,u)}}function cx(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{oc(r)}catch(u){gn(a,a.return,u)}}}function ux(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{oc(r)}catch(u){gn(a,a.return,u)}}function eS(r){switch(r.tag){case 31:case 13:case 19:var a=r.stateNode;return a===null&&(a=r.stateNode=new sx),a;case 22:return r=r.stateNode,a=r._retryCache,a===null&&(a=r._retryCache=new sx),a;default:throw Error(s(435,r.tag))}}function tf(r,a){var u=eS(r);a.forEach(function(g){if(!u.has(g)){u.add(g);var _=cS.bind(null,r,g);g.then(_,_)}})}function Di(r,a){var u=a.deletions;if(u!==null)for(var g=0;g<u.length;g++){var _=u[g],v=r,O=a,U=O;e:for(;U!==null;){switch(U.tag){case 27:if(_o(U.type)){qn=U.stateNode,Oi=!1;break e}break;case 5:qn=U.stateNode,Oi=!1;break e;case 3:case 4:qn=U.stateNode.containerInfo,Oi=!0;break e}U=U.return}if(qn===null)throw Error(s(160));lx(v,O,_),qn=null,Oi=!1,v=_.alternate,v!==null&&(v.return=null),_.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)hx(a,r),a=a.sibling}var Rs=null;function hx(r,a){var u=r.alternate,g=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Di(a,r),Mi(r),g&4&&(fo(3,r,r.return),hu(3,r),fo(5,r,r.return));break;case 1:Di(a,r),Mi(r),g&512&&(br||u===null||Gs(u,u.return)),g&64&&Ca&&(r=r.updateQueue,r!==null&&(g=r.callbacks,g!==null&&(u=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=u===null?g:u.concat(g))));break;case 26:var _=Rs;if(Di(a,r),Mi(r),g&512&&(br||u===null||Gs(u,u.return)),g&4){var v=u!==null?u.memoizedState:null;if(g=r.memoizedState,u===null)if(g===null)if(r.stateNode===null){e:{g=r.type,u=r.memoizedProps,_=_.ownerDocument||_;t:switch(g){case"title":v=_.getElementsByTagName("title")[0],(!v||v[Si]||v[Dt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=_.createElement(g),_.head.insertBefore(v,_.querySelector("head > title"))),Wr(v,g,u),v[Dt]=r,On(v),g=v;break e;case"link":var O=hy("link","href",_).get(g+(u.href||""));if(O){for(var U=0;U<O.length;U++)if(v=O[U],v.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&v.getAttribute("rel")===(u.rel==null?null:u.rel)&&v.getAttribute("title")===(u.title==null?null:u.title)&&v.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){O.splice(U,1);break t}}v=_.createElement(g),Wr(v,g,u),_.head.appendChild(v);break;case"meta":if(O=hy("meta","content",_).get(g+(u.content||""))){for(U=0;U<O.length;U++)if(v=O[U],v.getAttribute("content")===(u.content==null?null:""+u.content)&&v.getAttribute("name")===(u.name==null?null:u.name)&&v.getAttribute("property")===(u.property==null?null:u.property)&&v.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&v.getAttribute("charset")===(u.charSet==null?null:u.charSet)){O.splice(U,1);break t}}v=_.createElement(g),Wr(v,g,u),_.head.appendChild(v);break;default:throw Error(s(468,g))}v[Dt]=r,On(v),g=v}r.stateNode=g}else fy(_,r.type,r.stateNode);else r.stateNode=uy(_,g,r.memoizedProps);else v!==g?(v===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):v.count--,g===null?fy(_,r.type,r.stateNode):uy(_,g,r.memoizedProps)):g===null&&r.stateNode!==null&&h1(r,r.memoizedProps,u.memoizedProps)}break;case 27:Di(a,r),Mi(r),g&512&&(br||u===null||Gs(u,u.return)),u!==null&&g&4&&h1(r,r.memoizedProps,u.memoizedProps);break;case 5:if(Di(a,r),Mi(r),g&512&&(br||u===null||Gs(u,u.return)),r.flags&32){_=r.stateNode;try{vn(_,"")}catch(Ke){gn(r,r.return,Ke)}}g&4&&r.stateNode!=null&&(_=r.memoizedProps,h1(r,_,u!==null?u.memoizedProps:_)),g&1024&&(g1=!0);break;case 6:if(Di(a,r),Mi(r),g&4){if(r.stateNode===null)throw Error(s(162));g=r.memoizedProps,u=r.stateNode;try{u.nodeValue=g}catch(Ke){gn(r,r.return,Ke)}}break;case 3:if(yf=null,_=Rs,Rs=pf(a.containerInfo),Di(a,r),Rs=_,Mi(r),g&4&&u!==null&&u.memoizedState.isDehydrated)try{oc(a.containerInfo)}catch(Ke){gn(r,r.return,Ke)}g1&&(g1=!1,fx(r));break;case 4:g=Rs,Rs=pf(r.stateNode.containerInfo),Di(a,r),Mi(r),Rs=g;break;case 12:Di(a,r),Mi(r);break;case 31:Di(a,r),Mi(r),g&4&&(g=r.updateQueue,g!==null&&(r.updateQueue=null,tf(r,g)));break;case 13:Di(a,r),Mi(r),r.child.flags&8192&&r.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(rf=xn()),g&4&&(g=r.updateQueue,g!==null&&(r.updateQueue=null,tf(r,g)));break;case 22:_=r.memoizedState!==null;var ee=u!==null&&u.memoizedState!==null,ge=Ca,Ae=br;if(Ca=ge||_,br=Ae||ee,Di(a,r),br=Ae,Ca=ge,Mi(r),g&8192)e:for(a=r.stateNode,a._visibility=_?a._visibility&-2:a._visibility|1,_&&(u===null||ee||Ca||br||ml(r)),u=null,a=r;;){if(a.tag===5||a.tag===26){if(u===null){ee=u=a;try{if(v=ee.stateNode,_)O=v.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none";else{U=ee.stateNode;var Ie=ee.memoizedProps.style,me=Ie!=null&&Ie.hasOwnProperty("display")?Ie.display:null;U.style.display=me==null||typeof me=="boolean"?"":(""+me).trim()}}catch(Ke){gn(ee,ee.return,Ke)}}}else if(a.tag===6){if(u===null){ee=a;try{ee.stateNode.nodeValue=_?"":ee.memoizedProps}catch(Ke){gn(ee,ee.return,Ke)}}}else if(a.tag===18){if(u===null){ee=a;try{var we=ee.stateNode;_?ty(we,!0):ty(ee.stateNode,!1)}catch(Ke){gn(ee,ee.return,Ke)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===r)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break e;for(;a.sibling===null;){if(a.return===null||a.return===r)break e;u===a&&(u=null),a=a.return}u===a&&(u=null),a.sibling.return=a.return,a=a.sibling}g&4&&(g=r.updateQueue,g!==null&&(u=g.retryQueue,u!==null&&(g.retryQueue=null,tf(r,u))));break;case 19:Di(a,r),Mi(r),g&4&&(g=r.updateQueue,g!==null&&(r.updateQueue=null,tf(r,g)));break;case 30:break;case 21:break;default:Di(a,r),Mi(r)}}function Mi(r){var a=r.flags;if(a&2){try{for(var u,g=r.return;g!==null;){if(rx(g)){u=g;break}g=g.return}if(u==null)throw Error(s(160));switch(u.tag){case 27:var _=u.stateNode,v=f1(r);ef(r,v,_);break;case 5:var O=u.stateNode;u.flags&32&&(vn(O,""),u.flags&=-33);var U=f1(r);ef(r,U,O);break;case 3:case 4:var ee=u.stateNode.containerInfo,ge=f1(r);d1(r,ge,ee);break;default:throw Error(s(161))}}catch(Ae){gn(r,r.return,Ae)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function fx(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var a=r;fx(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),r=r.sibling}}function Na(r,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)ax(r,a.alternate,a),a=a.sibling}function ml(r){for(r=r.child;r!==null;){var a=r;switch(a.tag){case 0:case 11:case 14:case 15:fo(4,a,a.return),ml(a);break;case 1:Gs(a,a.return);var u=a.stateNode;typeof u.componentWillUnmount=="function"&&tx(a,a.return,u),ml(a);break;case 27:wu(a.stateNode);case 26:case 5:Gs(a,a.return),ml(a);break;case 22:a.memoizedState===null&&ml(a);break;case 30:ml(a);break;default:ml(a)}r=r.sibling}}function Ra(r,a,u){for(u=u&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var g=a.alternate,_=r,v=a,O=v.flags;switch(v.tag){case 0:case 11:case 15:Ra(_,v,u),hu(4,v);break;case 1:if(Ra(_,v,u),g=v,_=g.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(ge){gn(g,g.return,ge)}if(g=v,_=g.updateQueue,_!==null){var U=g.stateNode;try{var ee=_.shared.hiddenCallbacks;if(ee!==null)for(_.shared.hiddenCallbacks=null,_=0;_<ee.length;_++)Hp(ee[_],U)}catch(ge){gn(g,g.return,ge)}}u&&O&64&&ex(v),fu(v,v.return);break;case 27:ix(v);case 26:case 5:Ra(_,v,u),u&&g===null&&O&4&&nx(v),fu(v,v.return);break;case 12:Ra(_,v,u);break;case 31:Ra(_,v,u),u&&O&4&&cx(_,v);break;case 13:Ra(_,v,u),u&&O&4&&ux(_,v);break;case 22:v.memoizedState===null&&Ra(_,v,u),fu(v,v.return);break;case 30:break;default:Ra(_,v,u)}a=a.sibling}}function m1(r,a){var u=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==u&&(r!=null&&r.refCount++,u!=null&&Jc(u))}function p1(r,a){r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&Jc(r))}function Os(r,a,u,g){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)dx(r,a,u,g),a=a.sibling}function dx(r,a,u,g){var _=a.flags;switch(a.tag){case 0:case 11:case 15:Os(r,a,u,g),_&2048&&hu(9,a);break;case 1:Os(r,a,u,g);break;case 3:Os(r,a,u,g),_&2048&&(r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&Jc(r)));break;case 12:if(_&2048){Os(r,a,u,g),r=a.stateNode;try{var v=a.memoizedProps,O=v.id,U=v.onPostCommit;typeof U=="function"&&U(O,a.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(ee){gn(a,a.return,ee)}}else Os(r,a,u,g);break;case 31:Os(r,a,u,g);break;case 13:Os(r,a,u,g);break;case 23:break;case 22:v=a.stateNode,O=a.alternate,a.memoizedState!==null?v._visibility&2?Os(r,a,u,g):du(r,a):v._visibility&2?Os(r,a,u,g):(v._visibility|=2,Ql(r,a,u,g,(a.subtreeFlags&10256)!==0||!1)),_&2048&&m1(O,a);break;case 24:Os(r,a,u,g),_&2048&&p1(a.alternate,a);break;default:Os(r,a,u,g)}}function Ql(r,a,u,g,_){for(_=_&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var v=r,O=a,U=u,ee=g,ge=O.flags;switch(O.tag){case 0:case 11:case 15:Ql(v,O,U,ee,_),hu(8,O);break;case 23:break;case 22:var Ae=O.stateNode;O.memoizedState!==null?Ae._visibility&2?Ql(v,O,U,ee,_):du(v,O):(Ae._visibility|=2,Ql(v,O,U,ee,_)),_&&ge&2048&&m1(O.alternate,O);break;case 24:Ql(v,O,U,ee,_),_&&ge&2048&&p1(O.alternate,O);break;default:Ql(v,O,U,ee,_)}a=a.sibling}}function du(r,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var u=r,g=a,_=g.flags;switch(g.tag){case 22:du(u,g),_&2048&&m1(g.alternate,g);break;case 24:du(u,g),_&2048&&p1(g.alternate,g);break;default:du(u,g)}a=a.sibling}}var gu=8192;function Zl(r,a,u){if(r.subtreeFlags&gu)for(r=r.child;r!==null;)gx(r,a,u),r=r.sibling}function gx(r,a,u){switch(r.tag){case 26:Zl(r,a,u),r.flags&gu&&r.memoizedState!==null&&jS(u,Rs,r.memoizedState,r.memoizedProps);break;case 5:Zl(r,a,u);break;case 3:case 4:var g=Rs;Rs=pf(r.stateNode.containerInfo),Zl(r,a,u),Rs=g;break;case 22:r.memoizedState===null&&(g=r.alternate,g!==null&&g.memoizedState!==null?(g=gu,gu=16777216,Zl(r,a,u),gu=g):Zl(r,a,u));break;default:Zl(r,a,u)}}function mx(r){var a=r.alternate;if(a!==null&&(r=a.child,r!==null)){a.child=null;do a=r.sibling,r.sibling=null,r=a;while(r!==null)}}function mu(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var g=a[u];Ur=g,xx(g,r)}mx(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)px(r),r=r.sibling}function px(r){switch(r.tag){case 0:case 11:case 15:mu(r),r.flags&2048&&fo(9,r,r.return);break;case 3:mu(r);break;case 12:mu(r);break;case 22:var a=r.stateNode;r.memoizedState!==null&&a._visibility&2&&(r.return===null||r.return.tag!==13)?(a._visibility&=-3,nf(r)):mu(r);break;default:mu(r)}}function nf(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var g=a[u];Ur=g,xx(g,r)}mx(r)}for(r=r.child;r!==null;){switch(a=r,a.tag){case 0:case 11:case 15:fo(8,a,a.return),nf(a);break;case 22:u=a.stateNode,u._visibility&2&&(u._visibility&=-3,nf(a));break;default:nf(a)}r=r.sibling}}function xx(r,a){for(;Ur!==null;){var u=Ur;switch(u.tag){case 0:case 11:case 15:fo(8,u,a);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var g=u.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Jc(u.memoizedState.cache)}if(g=u.child,g!==null)g.return=u,Ur=g;else e:for(u=r;Ur!==null;){g=Ur;var _=g.sibling,v=g.return;if(ox(g),g===u){Ur=null;break e}if(_!==null){_.return=v,Ur=_;break e}Ur=v}}}var tS={getCacheForType:function(r){var a=Yr(Er),u=a.data.get(r);return u===void 0&&(u=r(),a.data.set(r,u)),u},cacheSignal:function(){return Yr(Er).controller.signal}},nS=typeof WeakMap=="function"?WeakMap:Map,cn=0,In=null,Vt=null,qt=0,dn=0,Xi=null,go=!1,Jl=!1,x1=!1,Oa=0,tr=0,mo=0,pl=0,y1=0,Wi=0,$l=0,pu=null,Pi=null,E1=!1,rf=0,yx=0,sf=1/0,af=null,po=null,Dr=0,xo=null,ec=null,Da=0,_1=0,w1=null,Ex=null,xu=0,b1=null;function Ki(){return(cn&2)!==0&&qt!==0?qt&-qt:pe.T!==null?I1():or()}function _x(){if(Wi===0)if((qt&536870912)===0||en){var r=At;At<<=1,(At&3932160)===0&&(At=262144),Wi=r}else Wi=536870912;return r=qi.current,r!==null&&(r.flags|=32),Wi}function Li(r,a,u){(r===In&&(dn===2||dn===9)||r.cancelPendingCommit!==null)&&(tc(r,0),yo(r,qt,Wi,!1)),zr(r,u),((cn&2)===0||r!==In)&&(r===In&&((cn&2)===0&&(pl|=u),tr===4&&yo(r,qt,Wi,!1)),qs(r))}function wx(r,a,u){if((cn&6)!==0)throw Error(s(327));var g=!u&&(a&127)===0&&(a&r.expiredLanes)===0||Nn(r,a),_=g?sS(r,a):v1(r,a,!0),v=g;do{if(_===0){Jl&&!g&&yo(r,a,0,!1);break}else{if(u=r.current.alternate,v&&!rS(u)){_=v1(r,a,!1),v=!1;continue}if(_===2){if(v=a,r.errorRecoveryDisabledLanes&v)var O=0;else O=r.pendingLanes&-536870913,O=O!==0?O:O&536870912?536870912:0;if(O!==0){a=O;e:{var U=r;_=pu;var ee=U.current.memoizedState.isDehydrated;if(ee&&(tc(U,O).flags|=256),O=v1(U,O,!1),O!==2){if(x1&&!ee){U.errorRecoveryDisabledLanes|=v,pl|=v,_=4;break e}v=Pi,Pi=_,v!==null&&(Pi===null?Pi=v:Pi.push.apply(Pi,v))}_=O}if(v=!1,_!==2)continue}}if(_===1){tc(r,0),yo(r,a,0,!0);break}e:{switch(g=r,v=_,v){case 0:case 1:throw Error(s(345));case 4:if((a&4194048)!==a)break;case 6:yo(g,a,Wi,!go);break e;case 2:Pi=null;break;case 3:case 5:break;default:throw Error(s(329))}if((a&62914560)===a&&(_=rf+300-xn(),10<_)){if(yo(g,a,Wi,!go),Fr(g,0,!0)!==0)break e;Da=a,g.timeoutHandle=Jx(bx.bind(null,g,u,Pi,af,E1,a,Wi,pl,$l,go,v,"Throttled",-0,0),_);break e}bx(g,u,Pi,af,E1,a,Wi,pl,$l,go,v,null,-0,0)}}break}while(!0);qs(r)}function bx(r,a,u,g,_,v,O,U,ee,ge,Ae,Ie,me,we){if(r.timeoutHandle=-1,Ie=a.subtreeFlags,Ie&8192||(Ie&16785408)===16785408){Ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ai},gx(a,v,Ie);var Ke=(v&62914560)===v?rf-xn():(v&4194048)===v?yx-xn():0;if(Ke=FS(Ie,Ke),Ke!==null){Da=v,r.cancelPendingCommit=Ke(Rx.bind(null,r,a,v,u,g,_,O,U,ee,Ae,Ie,null,me,we)),yo(r,v,O,!ge);return}}Rx(r,a,v,u,g,_,O,U,ee)}function rS(r){for(var a=r;;){var u=a.tag;if((u===0||u===11||u===15)&&a.flags&16384&&(u=a.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var g=0;g<u.length;g++){var _=u[g],v=_.getSnapshot;_=_.value;try{if(!m(v(),_))return!1}catch{return!1}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function yo(r,a,u,g){a&=~y1,a&=~pl,r.suspendedLanes|=a,r.pingedLanes&=~a,g&&(r.warmLanes|=a),g=r.expirationTimes;for(var _=a;0<_;){var v=31-ot(_),O=1<<v;g[v]=-1,_&=~O}u!==0&&si(r,u,a)}function of(){return(cn&6)===0?(yu(0),!1):!0}function A1(){if(Vt!==null){if(dn===0)var r=Vt.return;else r=Vt,wa=ol=null,V0(r),ql=null,eu=0,r=Vt;for(;r!==null;)$2(r.alternate,r),r=r.return;Vt=null}}function tc(r,a){var u=r.timeoutHandle;u!==-1&&(r.timeoutHandle=-1,AS(u)),u=r.cancelPendingCommit,u!==null&&(r.cancelPendingCommit=null,u()),Da=0,A1(),In=r,Vt=u=Ea(r.current,null),qt=a,dn=0,Xi=null,go=!1,Jl=Nn(r,a),x1=!1,$l=Wi=y1=pl=mo=tr=0,Pi=pu=null,E1=!1,(a&8)!==0&&(a|=a&32);var g=r.entangledLanes;if(g!==0)for(r=r.entanglements,g&=a;0<g;){var _=31-ot(g),v=1<<_;a|=r[_],g&=~v}return Oa=a,Ch(),u}function Ax(r,a){Tt=null,pe.H=lu,a===Gl||a===Lh?(a=Vp(),dn=3):a===C0?(a=Vp(),dn=4):dn=a===t1?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Xi=a,Vt===null&&(tr=1,Kh(r,ms(a,r.current)))}function vx(){var r=qi.current;return r===null?!0:(qt&4194048)===qt?Es===null:(qt&62914560)===qt||(qt&536870912)!==0?r===Es:!1}function Tx(){var r=pe.H;return pe.H=lu,r===null?lu:r}function Sx(){var r=pe.A;return pe.A=tS,r}function lf(){tr=4,go||(qt&4194048)!==qt&&qi.current!==null||(Jl=!0),(mo&134217727)===0&&(pl&134217727)===0||In===null||yo(In,qt,Wi,!1)}function v1(r,a,u){var g=cn;cn|=2;var _=Tx(),v=Sx();(In!==r||qt!==a)&&(af=null,tc(r,a)),a=!1;var O=tr;e:do try{if(dn!==0&&Vt!==null){var U=Vt,ee=Xi;switch(dn){case 8:A1(),O=6;break e;case 3:case 2:case 9:case 6:qi.current===null&&(a=!0);var ge=dn;if(dn=0,Xi=null,nc(r,U,ee,ge),u&&Jl){O=0;break e}break;default:ge=dn,dn=0,Xi=null,nc(r,U,ee,ge)}}iS(),O=tr;break}catch(Ae){Ax(r,Ae)}while(!0);return a&&r.shellSuspendCounter++,wa=ol=null,cn=g,pe.H=_,pe.A=v,Vt===null&&(In=null,qt=0,Ch()),O}function iS(){for(;Vt!==null;)Cx(Vt)}function sS(r,a){var u=cn;cn|=2;var g=Tx(),_=Sx();In!==r||qt!==a?(af=null,sf=xn()+500,tc(r,a)):Jl=Nn(r,a);e:do try{if(dn!==0&&Vt!==null){a=Vt;var v=Xi;t:switch(dn){case 1:dn=0,Xi=null,nc(r,a,v,1);break;case 2:case 9:if(Bp(v)){dn=0,Xi=null,Ix(a);break}a=function(){dn!==2&&dn!==9||In!==r||(dn=7),qs(r)},v.then(a,a);break e;case 3:dn=7;break e;case 4:dn=5;break e;case 7:Bp(v)?(dn=0,Xi=null,Ix(a)):(dn=0,Xi=null,nc(r,a,v,7));break;case 5:var O=null;switch(Vt.tag){case 26:O=Vt.memoizedState;case 5:case 27:var U=Vt;if(O?dy(O):U.stateNode.complete){dn=0,Xi=null;var ee=U.sibling;if(ee!==null)Vt=ee;else{var ge=U.return;ge!==null?(Vt=ge,cf(ge)):Vt=null}break t}}dn=0,Xi=null,nc(r,a,v,5);break;case 6:dn=0,Xi=null,nc(r,a,v,6);break;case 8:A1(),tr=6;break e;default:throw Error(s(462))}}aS();break}catch(Ae){Ax(r,Ae)}while(!0);return wa=ol=null,pe.H=g,pe.A=_,cn=u,Vt!==null?0:(In=null,qt=0,Ch(),tr)}function aS(){for(;Vt!==null&&!is();)Cx(Vt)}function Cx(r){var a=Z2(r.alternate,r,Oa);r.memoizedProps=r.pendingProps,a===null?cf(r):Vt=a}function Ix(r){var a=r,u=a.alternate;switch(a.tag){case 15:case 0:a=q2(u,a,a.pendingProps,a.type,void 0,qt);break;case 11:a=q2(u,a,a.pendingProps,a.type.render,a.ref,qt);break;case 5:V0(a);default:$2(u,a),a=Vt=Sp(a,Oa),a=Z2(u,a,Oa)}r.memoizedProps=r.pendingProps,a===null?cf(r):Vt=a}function nc(r,a,u,g){wa=ol=null,V0(a),ql=null,eu=0;var _=a.return;try{if(WT(r,_,a,u,qt)){tr=1,Kh(r,ms(u,r.current)),Vt=null;return}}catch(v){if(_!==null)throw Vt=_,v;tr=1,Kh(r,ms(u,r.current)),Vt=null;return}a.flags&32768?(en||g===1?r=!0:Jl||(qt&536870912)!==0?r=!1:(go=r=!0,(g===2||g===9||g===3||g===6)&&(g=qi.current,g!==null&&g.tag===13&&(g.flags|=16384))),Nx(a,r)):cf(a)}function cf(r){var a=r;do{if((a.flags&32768)!==0){Nx(a,go);return}r=a.return;var u=ZT(a.alternate,a,Oa);if(u!==null){Vt=u;return}if(a=a.sibling,a!==null){Vt=a;return}Vt=a=r}while(a!==null);tr===0&&(tr=5)}function Nx(r,a){do{var u=JT(r.alternate,r);if(u!==null){u.flags&=32767,Vt=u;return}if(u=r.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!a&&(r=r.sibling,r!==null)){Vt=r;return}Vt=r=u}while(r!==null);tr=6,Vt=null}function Rx(r,a,u,g,_,v,O,U,ee){r.cancelPendingCommit=null;do uf();while(Dr!==0);if((cn&6)!==0)throw Error(s(327));if(a!==null){if(a===r.current)throw Error(s(177));if(v=a.lanes|a.childLanes,v|=f0,Lr(r,u,v,O,U,ee),r===In&&(Vt=In=null,qt=0),ec=a,xo=r,Da=u,_1=v,w1=_,Ex=g,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,uS(pr,function(){return Lx(),null})):(r.callbackNode=null,r.callbackPriority=0),g=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||g){g=pe.T,pe.T=null,_=ve.p,ve.p=2,O=cn,cn|=4;try{$T(r,a,u)}finally{cn=O,ve.p=_,pe.T=g}}Dr=1,Ox(),Dx(),Mx()}}function Ox(){if(Dr===1){Dr=0;var r=xo,a=ec,u=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||u){u=pe.T,pe.T=null;var g=ve.p;ve.p=2;var _=cn;cn|=4;try{hx(a,r);var v=k1,O=L(r.containerInfo),U=v.focusedElem,ee=v.selectionRange;if(O!==U&&U&&U.ownerDocument&&R(U.ownerDocument.documentElement,U)){if(ee!==null&&k(U)){var ge=ee.start,Ae=ee.end;if(Ae===void 0&&(Ae=ge),"selectionStart"in U)U.selectionStart=ge,U.selectionEnd=Math.min(Ae,U.value.length);else{var Ie=U.ownerDocument||document,me=Ie&&Ie.defaultView||window;if(me.getSelection){var we=me.getSelection(),Ke=U.textContent.length,ct=Math.min(ee.start,Ke),wn=ee.end===void 0?ct:Math.min(ee.end,Ke);!we.extend&&ct>wn&&(O=wn,wn=ct,ct=O);var oe=S(U,ct),se=S(U,wn);if(oe&&se&&(we.rangeCount!==1||we.anchorNode!==oe.node||we.anchorOffset!==oe.offset||we.focusNode!==se.node||we.focusOffset!==se.offset)){var de=Ie.createRange();de.setStart(oe.node,oe.offset),we.removeAllRanges(),ct>wn?(we.addRange(de),we.extend(se.node,se.offset)):(de.setEnd(se.node,se.offset),we.addRange(de))}}}}for(Ie=[],we=U;we=we.parentNode;)we.nodeType===1&&Ie.push({element:we,left:we.scrollLeft,top:we.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<Ie.length;U++){var Se=Ie[U];Se.element.scrollLeft=Se.left,Se.element.scrollTop=Se.top}}bf=!!L1,k1=L1=null}finally{cn=_,ve.p=g,pe.T=u}}r.current=a,Dr=2}}function Dx(){if(Dr===2){Dr=0;var r=xo,a=ec,u=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||u){u=pe.T,pe.T=null;var g=ve.p;ve.p=2;var _=cn;cn|=4;try{ax(r,a.alternate,a)}finally{cn=_,ve.p=g,pe.T=u}}Dr=3}}function Mx(){if(Dr===4||Dr===3){Dr=0,ss();var r=xo,a=ec,u=Da,g=Ex;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Dr=5:(Dr=0,ec=xo=null,Px(r,r.pendingLanes));var _=r.pendingLanes;if(_===0&&(po=null),ar(u),a=a.stateNode,Le&&typeof Le.onCommitFiberRoot=="function")try{Le.onCommitFiberRoot(kt,a,void 0,(a.current.flags&128)===128)}catch{}if(g!==null){a=pe.T,_=ve.p,ve.p=2,pe.T=null;try{for(var v=r.onRecoverableError,O=0;O<g.length;O++){var U=g[O];v(U.value,{componentStack:U.stack})}}finally{pe.T=a,ve.p=_}}(Da&3)!==0&&uf(),qs(r),_=r.pendingLanes,(u&261930)!==0&&(_&42)!==0?r===b1?xu++:(xu=0,b1=r):xu=0,yu(0)}}function Px(r,a){(r.pooledCacheLanes&=a)===0&&(a=r.pooledCache,a!=null&&(r.pooledCache=null,Jc(a)))}function uf(){return Ox(),Dx(),Mx(),Lx()}function Lx(){if(Dr!==5)return!1;var r=xo,a=_1;_1=0;var u=ar(Da),g=pe.T,_=ve.p;try{ve.p=32>u?32:u,pe.T=null,u=w1,w1=null;var v=xo,O=Da;if(Dr=0,ec=xo=null,Da=0,(cn&6)!==0)throw Error(s(331));var U=cn;if(cn|=4,px(v.current),dx(v,v.current,O,u),cn=U,yu(0,!1),Le&&typeof Le.onPostCommitFiberRoot=="function")try{Le.onPostCommitFiberRoot(kt,v)}catch{}return!0}finally{ve.p=_,pe.T=g,Px(r,a)}}function kx(r,a,u){a=ms(u,a),a=e1(r.stateNode,a,2),r=co(r,a,2),r!==null&&(zr(r,2),qs(r))}function gn(r,a,u){if(r.tag===3)kx(r,r,u);else for(;a!==null;){if(a.tag===3){kx(a,r,u);break}else if(a.tag===1){var g=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(po===null||!po.has(g))){r=ms(u,r),u=B2(2),g=co(a,u,2),g!==null&&(U2(u,g,a,r),zr(g,2),qs(g));break}}a=a.return}}function T1(r,a,u){var g=r.pingCache;if(g===null){g=r.pingCache=new nS;var _=new Set;g.set(a,_)}else _=g.get(a),_===void 0&&(_=new Set,g.set(a,_));_.has(u)||(x1=!0,_.add(u),r=oS.bind(null,r,a,u),a.then(r,r))}function oS(r,a,u){var g=r.pingCache;g!==null&&g.delete(a),r.pingedLanes|=r.suspendedLanes&u,r.warmLanes&=~u,In===r&&(qt&u)===u&&(tr===4||tr===3&&(qt&62914560)===qt&&300>xn()-rf?(cn&2)===0&&tc(r,0):y1|=u,$l===qt&&($l=0)),qs(r)}function Bx(r,a){a===0&&(a=Fn()),r=il(r,a),r!==null&&(zr(r,a),qs(r))}function lS(r){var a=r.memoizedState,u=0;a!==null&&(u=a.retryLane),Bx(r,u)}function cS(r,a){var u=0;switch(r.tag){case 31:case 13:var g=r.stateNode,_=r.memoizedState;_!==null&&(u=_.retryLane);break;case 19:g=r.stateNode;break;case 22:g=r.stateNode._retryCache;break;default:throw Error(s(314))}g!==null&&g.delete(a),Bx(r,u)}function uS(r,a){return pn(r,a)}var hf=null,rc=null,S1=!1,ff=!1,C1=!1,Eo=0;function qs(r){r!==rc&&r.next===null&&(rc===null?hf=rc=r:rc=rc.next=r),ff=!0,S1||(S1=!0,fS())}function yu(r,a){if(!C1&&ff){C1=!0;do for(var u=!1,g=hf;g!==null;){if(r!==0){var _=g.pendingLanes;if(_===0)var v=0;else{var O=g.suspendedLanes,U=g.pingedLanes;v=(1<<31-ot(42|r)+1)-1,v&=_&~(O&~U),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(u=!0,Fx(g,v))}else v=qt,v=Fr(g,g===In?v:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(v&3)===0||Nn(g,v)||(u=!0,Fx(g,v));g=g.next}while(u);C1=!1}}function hS(){Ux()}function Ux(){ff=S1=!1;var r=0;Eo!==0&&bS()&&(r=Eo);for(var a=xn(),u=null,g=hf;g!==null;){var _=g.next,v=Vx(g,a);v===0?(g.next=null,u===null?hf=_:u.next=_,_===null&&(rc=u)):(u=g,(r!==0||(v&3)!==0)&&(ff=!0)),g=_}Dr!==0&&Dr!==5||yu(r),Eo!==0&&(Eo=0)}function Vx(r,a){for(var u=r.suspendedLanes,g=r.pingedLanes,_=r.expirationTimes,v=r.pendingLanes&-62914561;0<v;){var O=31-ot(v),U=1<<O,ee=_[O];ee===-1?((U&u)===0||(U&g)!==0)&&(_[O]=ks(U,a)):ee<=a&&(r.expiredLanes|=U),v&=~U}if(a=In,u=qt,u=Fr(r,r===a?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),g=r.callbackNode,u===0||r===a&&(dn===2||dn===9)||r.cancelPendingCommit!==null)return g!==null&&g!==null&&ze(g),r.callbackNode=null,r.callbackPriority=0;if((u&3)===0||Nn(r,u)){if(a=u&-u,a===r.callbackPriority)return a;switch(g!==null&&ze(g),ar(u)){case 2:case 8:u=as;break;case 32:u=pr;break;case 268435456:u=Ls;break;default:u=pr}return g=jx.bind(null,r),u=pn(u,g),r.callbackPriority=a,r.callbackNode=u,a}return g!==null&&g!==null&&ze(g),r.callbackPriority=2,r.callbackNode=null,2}function jx(r,a){if(Dr!==0&&Dr!==5)return r.callbackNode=null,r.callbackPriority=0,null;var u=r.callbackNode;if(uf()&&r.callbackNode!==u)return null;var g=qt;return g=Fr(r,r===In?g:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),g===0?null:(wx(r,g,a),Vx(r,xn()),r.callbackNode!=null&&r.callbackNode===u?jx.bind(null,r):null)}function Fx(r,a){if(uf())return null;wx(r,a,!0)}function fS(){vS(function(){(cn&6)!==0?pn(mr,hS):Ux()})}function I1(){if(Eo===0){var r=zl;r===0&&(r=ri,ri<<=1,(ri&261888)===0&&(ri=256)),Eo=r}return Eo}function zx(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Us(""+r)}function Hx(r,a){var u=a.ownerDocument.createElement("input");return u.name=a.name,u.value=a.value,r.id&&u.setAttribute("form",r.id),a.parentNode.insertBefore(u,a),r=new FormData(r),u.parentNode.removeChild(u),r}function dS(r,a,u,g,_){if(a==="submit"&&u&&u.stateNode===_){var v=zx((_[Bt]||null).action),O=g.submitter;O&&(a=(a=O[Bt]||null)?zx(a.formAction):O.getAttribute("formAction"),a!==null&&(v=a,O=null));var U=new kn("action","action",null,g,_);r.push({event:U,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(Eo!==0){var ee=O?Hx(_,O):new FormData(_);W0(u,{pending:!0,data:ee,method:_.method,action:v},null,ee)}}else typeof v=="function"&&(U.preventDefault(),ee=O?Hx(_,O):new FormData(_),W0(u,{pending:!0,data:ee,method:_.method,action:v},v,ee))},currentTarget:_}]})}}for(var N1=0;N1<Kc.length;N1++){var R1=Kc[N1],gS=R1.toLowerCase(),mS=R1[0].toUpperCase()+R1.slice(1);Ns(gS,"on"+mS)}Ns(Ri,"onAnimationEnd"),Ns(Gr,"onAnimationIteration"),Ns(fn,"onAnimationStart"),Ns("dblclick","onDoubleClick"),Ns("focusin","onFocus"),Ns("focusout","onBlur"),Ns(Or,"onTransitionRun"),Ns(xi,"onTransitionStart"),Ns(no,"onTransitionCancel"),Ns(ya,"onTransitionEnd"),Cr("onMouseEnter",["mouseout","mouseover"]),Cr("onMouseLeave",["mouseout","mouseover"]),Cr("onPointerEnter",["pointerout","pointerover"]),Cr("onPointerLeave",["pointerout","pointerover"]),Ht("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ht("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ht("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ht("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ht("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ht("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Eu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Eu));function Gx(r,a){a=(a&4)!==0;for(var u=0;u<r.length;u++){var g=r[u],_=g.event;g=g.listeners;e:{var v=void 0;if(a)for(var O=g.length-1;0<=O;O--){var U=g[O],ee=U.instance,ge=U.currentTarget;if(U=U.listener,ee!==v&&_.isPropagationStopped())break e;v=U,_.currentTarget=ge;try{v(_)}catch(Ae){Sh(Ae)}_.currentTarget=null,v=ee}else for(O=0;O<g.length;O++){if(U=g[O],ee=U.instance,ge=U.currentTarget,U=U.listener,ee!==v&&_.isPropagationStopped())break e;v=U,_.currentTarget=ge;try{v(_)}catch(Ae){Sh(Ae)}_.currentTarget=null,v=ee}}}}function jt(r,a){var u=a[Ti];u===void 0&&(u=a[Ti]=new Set);var g=r+"__bubble";u.has(g)||(qx(a,r,2,!1),u.add(g))}function O1(r,a,u){var g=0;a&&(g|=4),qx(u,r,g,a)}var df="_reactListening"+Math.random().toString(36).slice(2);function D1(r){if(!r[df]){r[df]=!0,Ce.forEach(function(u){u!=="selectionchange"&&(pS.has(u)||O1(u,!1,r),O1(u,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[df]||(a[df]=!0,O1("selectionchange",!1,a))}}function qx(r,a,u,g){switch(_y(a)){case 2:var _=GS;break;case 8:_=qS;break;default:_=X1}u=_.bind(null,a,u,r),_=void 0,!ca||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(_=!0),g?_!==void 0?r.addEventListener(a,u,{capture:!0,passive:_}):r.addEventListener(a,u,!0):_!==void 0?r.addEventListener(a,u,{passive:_}):r.addEventListener(a,u,!1)}function M1(r,a,u,g,_){var v=g;if((a&1)===0&&(a&2)===0&&g!==null)e:for(;;){if(g===null)return;var O=g.tag;if(O===3||O===4){var U=g.stateNode.containerInfo;if(U===_)break;if(O===4)for(O=g.return;O!==null;){var ee=O.tag;if((ee===3||ee===4)&&O.stateNode.containerInfo===_)return;O=O.return}for(;U!==null;){if(O=yn(U),O===null)return;if(ee=O.tag,ee===5||ee===6||ee===26||ee===27){g=v=O;continue e}U=U.parentNode}}g=g.return}Vs(function(){var ge=v,Ae=Ci(u),Ie=[];e:{var me=Th.get(r);if(me!==void 0){var we=kn,Ke=r;switch(r){case"keypress":if(ji(u)===0)break e;case"keydown":case"keyup":we=ga;break;case"focusin":Ke="focus",we=fa;break;case"focusout":Ke="blur",we=fa;break;case"beforeblur":case"afterblur":we=fa;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=tn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=ha;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=N;break;case Ri:case Gr:case fn:we=_t;break;case ya:we=z;break;case"scroll":case"scrollend":we=Za;break;case"wheel":we=Ee;break;case"copy":case"cut":case"paste":we=da;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=Ut;break;case"toggle":case"beforetoggle":we=pt}var ct=(a&4)!==0,wn=!ct&&(r==="scroll"||r==="scrollend"),oe=ct?me!==null?me+"Capture":null:me;ct=[];for(var se=ge,de;se!==null;){var Se=se;if(de=Se.stateNode,Se=Se.tag,Se!==5&&Se!==26&&Se!==27||de===null||oe===null||(Se=lt(se,oe),Se!=null&&ct.push(_u(se,Se,de))),wn)break;se=se.return}0<ct.length&&(me=new we(me,Ke,null,u,Ae),Ie.push({event:me,listeners:ct}))}}if((a&7)===0){e:{if(me=r==="mouseover"||r==="pointerover",we=r==="mouseout"||r==="pointerout",me&&u!==la&&(Ke=u.relatedTarget||u.fromElement)&&(yn(Ke)||Ke[lr]))break e;if((we||me)&&(me=Ae.window===Ae?Ae:(me=Ae.ownerDocument)?me.defaultView||me.parentWindow:window,we?(Ke=u.relatedTarget||u.toElement,we=ge,Ke=Ke?yn(Ke):null,Ke!==null&&(wn=h(Ke),ct=Ke.tag,Ke!==wn||ct!==5&&ct!==27&&ct!==6)&&(Ke=null)):(we=null,Ke=ge),we!==Ke)){if(ct=tn,Se="onMouseLeave",oe="onMouseEnter",se="mouse",(r==="pointerout"||r==="pointerover")&&(ct=Ut,Se="onPointerLeave",oe="onPointerEnter",se="pointer"),wn=we==null?me:kr(we),de=Ke==null?me:kr(Ke),me=new ct(Se,se+"leave",we,u,Ae),me.target=wn,me.relatedTarget=de,Se=null,yn(Ae)===ge&&(ct=new ct(oe,se+"enter",Ke,u,Ae),ct.target=de,ct.relatedTarget=wn,Se=ct),wn=Se,we&&Ke)t:{for(ct=xS,oe=we,se=Ke,de=0,Se=oe;Se;Se=ct(Se))de++;Se=0;for(var it=se;it;it=ct(it))Se++;for(;0<de-Se;)oe=ct(oe),de--;for(;0<Se-de;)se=ct(se),Se--;for(;de--;){if(oe===se||se!==null&&oe===se.alternate){ct=oe;break t}oe=ct(oe),se=ct(se)}ct=null}else ct=null;we!==null&&Yx(Ie,me,we,ct,!1),Ke!==null&&wn!==null&&Yx(Ie,wn,Ke,ct,!0)}}e:{if(me=ge?kr(ge):window,we=me.nodeName&&me.nodeName.toLowerCase(),we==="select"||we==="input"&&me.type==="file")var an=Hi;else if(Wc(me))if(vh)an=f;else{an=o;var Ze=i}else we=me.nodeName,!we||we.toLowerCase()!=="input"||me.type!=="checkbox"&&me.type!=="radio"?ge&&un(ge.elementType)&&(an=Hi):an=l;if(an&&(an=an(r,ge))){zi(Ie,an,u,Ae);break e}Ze&&Ze(r,me,ge),r==="focusout"&&ge&&me.type==="number"&&ge.memoizedProps.value!=null&&H(me,"number",me.value)}switch(Ze=ge?kr(ge):window,r){case"focusin":(Wc(Ze)||Ze.contentEditable==="true")&&(te=Ze,re=ge,he=null);break;case"focusout":he=re=te=null;break;case"mousedown":ye=!0;break;case"contextmenu":case"mouseup":case"dragend":ye=!1,Ue(Ie,u,Ae);break;case"selectionchange":if(q)break;case"keydown":case"keyup":Ue(Ie,u,Ae)}var It;if($t)e:{switch(r){case"compositionstart":var Yt="onCompositionStart";break e;case"compositionend":Yt="onCompositionEnd";break e;case"compositionupdate":Yt="onCompositionUpdate";break e}Yt=void 0}else to?ma(r,u)&&(Yt="onCompositionEnd"):r==="keydown"&&u.keyCode===229&&(Yt="onCompositionStart");Yt&&(fs&&u.locale!=="ko"&&(to||Yt!=="onCompositionStart"?Yt==="onCompositionEnd"&&to&&(It=Ss()):(Ui=Ae,Vi="value"in Ui?Ui.value:Ui.textContent,to=!0)),Ze=gf(ge,Yt),0<Ze.length&&(Yt=new cs(Yt,r,null,u,Ae),Ie.push({event:Yt,listeners:Ze}),It?Yt.data=It:(It=ds(u),It!==null&&(Yt.data=It)))),(It=mi?Fs(r,u):Ll(r,u))&&(Yt=gf(ge,"onBeforeInput"),0<Yt.length&&(Ze=new cs("onBeforeInput","beforeinput",null,u,Ae),Ie.push({event:Ze,listeners:Yt}),Ze.data=It)),dS(Ie,r,ge,u,Ae)}Gx(Ie,a)})}function _u(r,a,u){return{instance:r,listener:a,currentTarget:u}}function gf(r,a){for(var u=a+"Capture",g=[];r!==null;){var _=r,v=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||v===null||(_=lt(r,u),_!=null&&g.unshift(_u(r,_,v)),_=lt(r,a),_!=null&&g.push(_u(r,_,v))),r.tag===3)return g;r=r.return}return[]}function xS(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function Yx(r,a,u,g,_){for(var v=a._reactName,O=[];u!==null&&u!==g;){var U=u,ee=U.alternate,ge=U.stateNode;if(U=U.tag,ee!==null&&ee===g)break;U!==5&&U!==26&&U!==27||ge===null||(ee=ge,_?(ge=lt(u,v),ge!=null&&O.unshift(_u(u,ge,ee))):_||(ge=lt(u,v),ge!=null&&O.push(_u(u,ge,ee)))),u=u.return}O.length!==0&&r.push({event:a,listeners:O})}var yS=/\r\n?/g,ES=/\u0000|\uFFFD/g;function Xx(r){return(typeof r=="string"?r:""+r).replace(yS,`
`).replace(ES,"")}function Wx(r,a){return a=Xx(a),Xx(r)===a}function _n(r,a,u,g,_,v){switch(u){case"children":typeof g=="string"?a==="body"||a==="textarea"&&g===""||vn(r,g):(typeof g=="number"||typeof g=="bigint")&&a!=="body"&&vn(r,""+g);break;case"className":Ir(r,"class",g);break;case"tabIndex":Ir(r,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Ir(r,u,g);break;case"style":Je(r,g,v);break;case"data":if(a!=="object"){Ir(r,"data",g);break}case"src":case"href":if(g===""&&(a!=="a"||u!=="href")){r.removeAttribute(u);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){r.removeAttribute(u);break}g=Us(""+g),r.setAttribute(u,g);break;case"action":case"formAction":if(typeof g=="function"){r.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(u==="formAction"?(a!=="input"&&_n(r,a,"name",_.name,_,null),_n(r,a,"formEncType",_.formEncType,_,null),_n(r,a,"formMethod",_.formMethod,_,null),_n(r,a,"formTarget",_.formTarget,_,null)):(_n(r,a,"encType",_.encType,_,null),_n(r,a,"method",_.method,_,null),_n(r,a,"target",_.target,_,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){r.removeAttribute(u);break}g=Us(""+g),r.setAttribute(u,g);break;case"onClick":g!=null&&(r.onclick=ai);break;case"onScroll":g!=null&&jt("scroll",r);break;case"onScrollEnd":g!=null&&jt("scrollend",r);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(s(61));if(u=g.__html,u!=null){if(_.children!=null)throw Error(s(60));r.innerHTML=u}}break;case"multiple":r.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":r.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){r.removeAttribute("xlink:href");break}u=Us(""+g),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?r.setAttribute(u,""+g):r.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?r.setAttribute(u,""):r.removeAttribute(u);break;case"capture":case"download":g===!0?r.setAttribute(u,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?r.setAttribute(u,g):r.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?r.setAttribute(u,g):r.removeAttribute(u);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?r.removeAttribute(u):r.setAttribute(u,g);break;case"popover":jt("beforetoggle",r),jt("toggle",r),os(r,"popover",g);break;case"xlinkActuate":Dn(r,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Dn(r,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Dn(r,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Dn(r,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Dn(r,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Dn(r,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Dn(r,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Dn(r,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Dn(r,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":os(r,"is",g);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=Jo.get(u)||u,os(r,u,g))}}function P1(r,a,u,g,_,v){switch(u){case"style":Je(r,g,v);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(s(61));if(u=g.__html,u!=null){if(_.children!=null)throw Error(s(60));r.innerHTML=u}}break;case"children":typeof g=="string"?vn(r,g):(typeof g=="number"||typeof g=="bigint")&&vn(r,""+g);break;case"onScroll":g!=null&&jt("scroll",r);break;case"onScrollEnd":g!=null&&jt("scrollend",r);break;case"onClick":g!=null&&(r.onclick=ai);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!sa.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(_=u.endsWith("Capture"),a=u.slice(2,_?u.length-7:void 0),v=r[Bt]||null,v=v!=null?v[u]:null,typeof v=="function"&&r.removeEventListener(a,v,_),typeof g=="function")){typeof v!="function"&&v!==null&&(u in r?r[u]=null:r.hasAttribute(u)&&r.removeAttribute(u)),r.addEventListener(a,g,_);break e}u in r?r[u]=g:g===!0?r.setAttribute(u,""):os(r,u,g)}}}function Wr(r,a,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":jt("error",r),jt("load",r);var g=!1,_=!1,v;for(v in u)if(u.hasOwnProperty(v)){var O=u[v];if(O!=null)switch(v){case"src":g=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:_n(r,a,v,O,u,null)}}_&&_n(r,a,"srcSet",u.srcSet,u,null),g&&_n(r,a,"src",u.src,u,null);return;case"input":jt("invalid",r);var U=v=O=_=null,ee=null,ge=null;for(g in u)if(u.hasOwnProperty(g)){var Ae=u[g];if(Ae!=null)switch(g){case"name":_=Ae;break;case"type":O=Ae;break;case"checked":ee=Ae;break;case"defaultChecked":ge=Ae;break;case"value":v=Ae;break;case"defaultValue":U=Ae;break;case"children":case"dangerouslySetInnerHTML":if(Ae!=null)throw Error(s(137,a));break;default:_n(r,a,g,Ae,u,null)}}le(r,v,U,ee,ge,O,_,!1);return;case"select":jt("invalid",r),g=O=v=null;for(_ in u)if(u.hasOwnProperty(_)&&(U=u[_],U!=null))switch(_){case"value":v=U;break;case"defaultValue":O=U;break;case"multiple":g=U;default:_n(r,a,_,U,u,null)}a=v,u=O,r.multiple=!!g,a!=null?qe(r,!!g,a,!1):u!=null&&qe(r,!!g,u,!0);return;case"textarea":jt("invalid",r),v=_=g=null;for(O in u)if(u.hasOwnProperty(O)&&(U=u[O],U!=null))switch(O){case"value":g=U;break;case"defaultValue":_=U;break;case"children":v=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(s(91));break;default:_n(r,a,O,U,u,null)}Xn(r,g,_,v);return;case"option":for(ee in u)if(u.hasOwnProperty(ee)&&(g=u[ee],g!=null))switch(ee){case"selected":r.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:_n(r,a,ee,g,u,null)}return;case"dialog":jt("beforetoggle",r),jt("toggle",r),jt("cancel",r),jt("close",r);break;case"iframe":case"object":jt("load",r);break;case"video":case"audio":for(g=0;g<Eu.length;g++)jt(Eu[g],r);break;case"image":jt("error",r),jt("load",r);break;case"details":jt("toggle",r);break;case"embed":case"source":case"link":jt("error",r),jt("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ge in u)if(u.hasOwnProperty(ge)&&(g=u[ge],g!=null))switch(ge){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:_n(r,a,ge,g,u,null)}return;default:if(un(a)){for(Ae in u)u.hasOwnProperty(Ae)&&(g=u[Ae],g!==void 0&&P1(r,a,Ae,g,u,void 0));return}}for(U in u)u.hasOwnProperty(U)&&(g=u[U],g!=null&&_n(r,a,U,g,u,null))}function _S(r,a,u,g){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,v=null,O=null,U=null,ee=null,ge=null,Ae=null;for(we in u){var Ie=u[we];if(u.hasOwnProperty(we)&&Ie!=null)switch(we){case"checked":break;case"value":break;case"defaultValue":ee=Ie;default:g.hasOwnProperty(we)||_n(r,a,we,null,g,Ie)}}for(var me in g){var we=g[me];if(Ie=u[me],g.hasOwnProperty(me)&&(we!=null||Ie!=null))switch(me){case"type":v=we;break;case"name":_=we;break;case"checked":ge=we;break;case"defaultChecked":Ae=we;break;case"value":O=we;break;case"defaultValue":U=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(s(137,a));break;default:we!==Ie&&_n(r,a,me,we,g,Ie)}}tt(r,O,U,ee,ge,Ae,v,_);return;case"select":we=O=U=me=null;for(v in u)if(ee=u[v],u.hasOwnProperty(v)&&ee!=null)switch(v){case"value":break;case"multiple":we=ee;default:g.hasOwnProperty(v)||_n(r,a,v,null,g,ee)}for(_ in g)if(v=g[_],ee=u[_],g.hasOwnProperty(_)&&(v!=null||ee!=null))switch(_){case"value":me=v;break;case"defaultValue":U=v;break;case"multiple":O=v;default:v!==ee&&_n(r,a,_,v,g,ee)}a=U,u=O,g=we,me!=null?qe(r,!!u,me,!1):!!g!=!!u&&(a!=null?qe(r,!!u,a,!0):qe(r,!!u,u?[]:"",!1));return;case"textarea":we=me=null;for(U in u)if(_=u[U],u.hasOwnProperty(U)&&_!=null&&!g.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:_n(r,a,U,null,g,_)}for(O in g)if(_=g[O],v=u[O],g.hasOwnProperty(O)&&(_!=null||v!=null))switch(O){case"value":me=_;break;case"defaultValue":we=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(s(91));break;default:_!==v&&_n(r,a,O,_,g,v)}Ln(r,me,we);return;case"option":for(var Ke in u)if(me=u[Ke],u.hasOwnProperty(Ke)&&me!=null&&!g.hasOwnProperty(Ke))switch(Ke){case"selected":r.selected=!1;break;default:_n(r,a,Ke,null,g,me)}for(ee in g)if(me=g[ee],we=u[ee],g.hasOwnProperty(ee)&&me!==we&&(me!=null||we!=null))switch(ee){case"selected":r.selected=me&&typeof me!="function"&&typeof me!="symbol";break;default:_n(r,a,ee,me,g,we)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ct in u)me=u[ct],u.hasOwnProperty(ct)&&me!=null&&!g.hasOwnProperty(ct)&&_n(r,a,ct,null,g,me);for(ge in g)if(me=g[ge],we=u[ge],g.hasOwnProperty(ge)&&me!==we&&(me!=null||we!=null))switch(ge){case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(s(137,a));break;default:_n(r,a,ge,me,g,we)}return;default:if(un(a)){for(var wn in u)me=u[wn],u.hasOwnProperty(wn)&&me!==void 0&&!g.hasOwnProperty(wn)&&P1(r,a,wn,void 0,g,me);for(Ae in g)me=g[Ae],we=u[Ae],!g.hasOwnProperty(Ae)||me===we||me===void 0&&we===void 0||P1(r,a,Ae,me,g,we);return}}for(var oe in u)me=u[oe],u.hasOwnProperty(oe)&&me!=null&&!g.hasOwnProperty(oe)&&_n(r,a,oe,null,g,me);for(Ie in g)me=g[Ie],we=u[Ie],!g.hasOwnProperty(Ie)||me===we||me==null&&we==null||_n(r,a,Ie,me,g,we)}function Kx(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function wS(){if(typeof performance.getEntriesByType=="function"){for(var r=0,a=0,u=performance.getEntriesByType("resource"),g=0;g<u.length;g++){var _=u[g],v=_.transferSize,O=_.initiatorType,U=_.duration;if(v&&U&&Kx(O)){for(O=0,U=_.responseEnd,g+=1;g<u.length;g++){var ee=u[g],ge=ee.startTime;if(ge>U)break;var Ae=ee.transferSize,Ie=ee.initiatorType;Ae&&Kx(Ie)&&(ee=ee.responseEnd,O+=Ae*(ee<U?1:(U-ge)/(ee-ge)))}if(--g,a+=8*(v+O)/(_.duration/1e3),r++,10<r)break}}if(0<r)return a/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var L1=null,k1=null;function mf(r){return r.nodeType===9?r:r.ownerDocument}function Qx(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Zx(r,a){if(r===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&a==="foreignObject"?0:r}function B1(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var U1=null;function bS(){var r=window.event;return r&&r.type==="popstate"?r===U1?!1:(U1=r,!0):(U1=null,!1)}var Jx=typeof setTimeout=="function"?setTimeout:void 0,AS=typeof clearTimeout=="function"?clearTimeout:void 0,$x=typeof Promise=="function"?Promise:void 0,vS=typeof queueMicrotask=="function"?queueMicrotask:typeof $x<"u"?function(r){return $x.resolve(null).then(r).catch(TS)}:Jx;function TS(r){setTimeout(function(){throw r})}function _o(r){return r==="head"}function ey(r,a){var u=a,g=0;do{var _=u.nextSibling;if(r.removeChild(u),_&&_.nodeType===8)if(u=_.data,u==="/$"||u==="/&"){if(g===0){r.removeChild(_),oc(a);return}g--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")g++;else if(u==="html")wu(r.ownerDocument.documentElement);else if(u==="head"){u=r.ownerDocument.head,wu(u);for(var v=u.firstChild;v;){var O=v.nextSibling,U=v.nodeName;v[Si]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&v.rel.toLowerCase()==="stylesheet"||u.removeChild(v),v=O}}else u==="body"&&wu(r.ownerDocument.body);u=_}while(u);oc(a)}function ty(r,a){var u=r;r=0;do{var g=u.nextSibling;if(u.nodeType===1?a?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(a?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(r===0)break;r--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||r++;u=g}while(u)}function V1(r){var a=r.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var u=a;switch(a=a.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":V1(u),yr(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}r.removeChild(u)}}function SS(r,a,u,g){for(;r.nodeType===1;){var _=u;if(r.nodeName.toLowerCase()!==a.toLowerCase()){if(!g&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(g){if(!r[Si])switch(a){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(v=r.getAttribute("rel"),v==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(v!==_.rel||r.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||r.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||r.getAttribute("title")!==(_.title==null?null:_.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(v=r.getAttribute("src"),(v!==(_.src==null?null:_.src)||r.getAttribute("type")!==(_.type==null?null:_.type)||r.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&v&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(a==="input"&&r.type==="hidden"){var v=_.name==null?null:""+_.name;if(_.type==="hidden"&&r.getAttribute("name")===v)return r}else return r;if(r=_s(r.nextSibling),r===null)break}return null}function CS(r,a,u){if(a==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!u||(r=_s(r.nextSibling),r===null))return null;return r}function ny(r,a){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!a||(r=_s(r.nextSibling),r===null))return null;return r}function j1(r){return r.data==="$?"||r.data==="$~"}function F1(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function IS(r,a){var u=r.ownerDocument;if(r.data==="$~")r._reactRetry=a;else if(r.data!=="$?"||u.readyState!=="loading")a();else{var g=function(){a(),u.removeEventListener("DOMContentLoaded",g)};u.addEventListener("DOMContentLoaded",g),r._reactRetry=g}}function _s(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return r}var z1=null;function ry(r){r=r.nextSibling;for(var a=0;r;){if(r.nodeType===8){var u=r.data;if(u==="/$"||u==="/&"){if(a===0)return _s(r.nextSibling);a--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||a++}r=r.nextSibling}return null}function iy(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var u=r.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(a===0)return r;a--}else u!=="/$"&&u!=="/&"||a++}r=r.previousSibling}return null}function sy(r,a,u){switch(a=mf(u),r){case"html":if(r=a.documentElement,!r)throw Error(s(452));return r;case"head":if(r=a.head,!r)throw Error(s(453));return r;case"body":if(r=a.body,!r)throw Error(s(454));return r;default:throw Error(s(451))}}function wu(r){for(var a=r.attributes;a.length;)r.removeAttributeNode(a[0]);yr(r)}var ws=new Map,ay=new Set;function pf(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Ma=ve.d;ve.d={f:NS,r:RS,D:OS,C:DS,L:MS,m:PS,X:kS,S:LS,M:BS};function NS(){var r=Ma.f(),a=of();return r||a}function RS(r){var a=Nt(r);a!==null&&a.tag===5&&a.type==="form"?A2(a):Ma.r(r)}var ic=typeof document>"u"?null:document;function oy(r,a,u){var g=ic;if(g&&typeof a=="string"&&a){var _=Pe(a);_='link[rel="'+r+'"][href="'+_+'"]',typeof u=="string"&&(_+='[crossorigin="'+u+'"]'),ay.has(_)||(ay.add(_),r={rel:r,crossOrigin:u,href:a},g.querySelector(_)===null&&(a=g.createElement("link"),Wr(a,"link",r),On(a),g.head.appendChild(a)))}}function OS(r){Ma.D(r),oy("dns-prefetch",r,null)}function DS(r,a){Ma.C(r,a),oy("preconnect",r,a)}function MS(r,a,u){Ma.L(r,a,u);var g=ic;if(g&&r&&a){var _='link[rel="preload"][as="'+Pe(a)+'"]';a==="image"&&u&&u.imageSrcSet?(_+='[imagesrcset="'+Pe(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(_+='[imagesizes="'+Pe(u.imageSizes)+'"]')):_+='[href="'+Pe(r)+'"]';var v=_;switch(a){case"style":v=sc(r);break;case"script":v=ac(r)}ws.has(v)||(r=I({rel:"preload",href:a==="image"&&u&&u.imageSrcSet?void 0:r,as:a},u),ws.set(v,r),g.querySelector(_)!==null||a==="style"&&g.querySelector(bu(v))||a==="script"&&g.querySelector(Au(v))||(a=g.createElement("link"),Wr(a,"link",r),On(a),g.head.appendChild(a)))}}function PS(r,a){Ma.m(r,a);var u=ic;if(u&&r){var g=a&&typeof a.as=="string"?a.as:"script",_='link[rel="modulepreload"][as="'+Pe(g)+'"][href="'+Pe(r)+'"]',v=_;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=ac(r)}if(!ws.has(v)&&(r=I({rel:"modulepreload",href:r},a),ws.set(v,r),u.querySelector(_)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Au(v)))return}g=u.createElement("link"),Wr(g,"link",r),On(g),u.head.appendChild(g)}}}function LS(r,a,u){Ma.S(r,a,u);var g=ic;if(g&&r){var _=cr(g).hoistableStyles,v=sc(r);a=a||"default";var O=_.get(v);if(!O){var U={loading:0,preload:null};if(O=g.querySelector(bu(v)))U.loading=5;else{r=I({rel:"stylesheet",href:r,"data-precedence":a},u),(u=ws.get(v))&&H1(r,u);var ee=O=g.createElement("link");On(ee),Wr(ee,"link",r),ee._p=new Promise(function(ge,Ae){ee.onload=ge,ee.onerror=Ae}),ee.addEventListener("load",function(){U.loading|=1}),ee.addEventListener("error",function(){U.loading|=2}),U.loading|=4,xf(O,a,g)}O={type:"stylesheet",instance:O,count:1,state:U},_.set(v,O)}}}function kS(r,a){Ma.X(r,a);var u=ic;if(u&&r){var g=cr(u).hoistableScripts,_=ac(r),v=g.get(_);v||(v=u.querySelector(Au(_)),v||(r=I({src:r,async:!0},a),(a=ws.get(_))&&G1(r,a),v=u.createElement("script"),On(v),Wr(v,"link",r),u.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},g.set(_,v))}}function BS(r,a){Ma.M(r,a);var u=ic;if(u&&r){var g=cr(u).hoistableScripts,_=ac(r),v=g.get(_);v||(v=u.querySelector(Au(_)),v||(r=I({src:r,async:!0,type:"module"},a),(a=ws.get(_))&&G1(r,a),v=u.createElement("script"),On(v),Wr(v,"link",r),u.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},g.set(_,v))}}function ly(r,a,u,g){var _=(_=Be.current)?pf(_):null;if(!_)throw Error(s(446));switch(r){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(a=sc(u.href),u=cr(_).hoistableStyles,g=u.get(a),g||(g={type:"style",instance:null,count:0,state:null},u.set(a,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){r=sc(u.href);var v=cr(_).hoistableStyles,O=v.get(r);if(O||(_=_.ownerDocument||_,O={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(r,O),(v=_.querySelector(bu(r)))&&!v._p&&(O.instance=v,O.state.loading=5),ws.has(r)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},ws.set(r,u),v||US(_,r,u,O.state))),a&&g===null)throw Error(s(528,""));return O}if(a&&g!==null)throw Error(s(529,""));return null;case"script":return a=u.async,u=u.src,typeof u=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=ac(u),u=cr(_).hoistableScripts,g=u.get(a),g||(g={type:"script",instance:null,count:0,state:null},u.set(a,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,r))}}function sc(r){return'href="'+Pe(r)+'"'}function bu(r){return'link[rel="stylesheet"]['+r+"]"}function cy(r){return I({},r,{"data-precedence":r.precedence,precedence:null})}function US(r,a,u,g){r.querySelector('link[rel="preload"][as="style"]['+a+"]")?g.loading=1:(a=r.createElement("link"),g.preload=a,a.addEventListener("load",function(){return g.loading|=1}),a.addEventListener("error",function(){return g.loading|=2}),Wr(a,"link",u),On(a),r.head.appendChild(a))}function ac(r){return'[src="'+Pe(r)+'"]'}function Au(r){return"script[async]"+r}function uy(r,a,u){if(a.count++,a.instance===null)switch(a.type){case"style":var g=r.querySelector('style[data-href~="'+Pe(u.href)+'"]');if(g)return a.instance=g,On(g),g;var _=I({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return g=(r.ownerDocument||r).createElement("style"),On(g),Wr(g,"style",_),xf(g,u.precedence,r),a.instance=g;case"stylesheet":_=sc(u.href);var v=r.querySelector(bu(_));if(v)return a.state.loading|=4,a.instance=v,On(v),v;g=cy(u),(_=ws.get(_))&&H1(g,_),v=(r.ownerDocument||r).createElement("link"),On(v);var O=v;return O._p=new Promise(function(U,ee){O.onload=U,O.onerror=ee}),Wr(v,"link",g),a.state.loading|=4,xf(v,u.precedence,r),a.instance=v;case"script":return v=ac(u.src),(_=r.querySelector(Au(v)))?(a.instance=_,On(_),_):(g=u,(_=ws.get(v))&&(g=I({},u),G1(g,_)),r=r.ownerDocument||r,_=r.createElement("script"),On(_),Wr(_,"link",g),r.head.appendChild(_),a.instance=_);case"void":return null;default:throw Error(s(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(g=a.instance,a.state.loading|=4,xf(g,u.precedence,r));return a.instance}function xf(r,a,u){for(var g=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=g.length?g[g.length-1]:null,v=_,O=0;O<g.length;O++){var U=g[O];if(U.dataset.precedence===a)v=U;else if(v!==_)break}v?v.parentNode.insertBefore(r,v.nextSibling):(a=u.nodeType===9?u.head:u,a.insertBefore(r,a.firstChild))}function H1(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.title==null&&(r.title=a.title)}function G1(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.integrity==null&&(r.integrity=a.integrity)}var yf=null;function hy(r,a,u){if(yf===null){var g=new Map,_=yf=new Map;_.set(u,g)}else _=yf,g=_.get(u),g||(g=new Map,_.set(u,g));if(g.has(r))return g;for(g.set(r,null),u=u.getElementsByTagName(r),_=0;_<u.length;_++){var v=u[_];if(!(v[Si]||v[Dt]||r==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var O=v.getAttribute(a)||"";O=r+O;var U=g.get(O);U?U.push(v):g.set(O,[v])}}return g}function fy(r,a,u){r=r.ownerDocument||r,r.head.insertBefore(u,a==="title"?r.querySelector("head > title"):null)}function VS(r,a,u){if(u===1||a.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return r=a.disabled,typeof a.precedence=="string"&&r==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function dy(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function jS(r,a,u,g){if(u.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var _=sc(g.href),v=a.querySelector(bu(_));if(v){a=v._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(r.count++,r=Ef.bind(r),a.then(r,r)),u.state.loading|=4,u.instance=v,On(v);return}v=a.ownerDocument||a,g=cy(g),(_=ws.get(_))&&H1(g,_),v=v.createElement("link"),On(v);var O=v;O._p=new Promise(function(U,ee){O.onload=U,O.onerror=ee}),Wr(v,"link",g),u.instance=v}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(u,a),(a=u.state.preload)&&(u.state.loading&3)===0&&(r.count++,u=Ef.bind(r),a.addEventListener("load",u),a.addEventListener("error",u))}}var q1=0;function FS(r,a){return r.stylesheets&&r.count===0&&wf(r,r.stylesheets),0<r.count||0<r.imgCount?function(u){var g=setTimeout(function(){if(r.stylesheets&&wf(r,r.stylesheets),r.unsuspend){var v=r.unsuspend;r.unsuspend=null,v()}},6e4+a);0<r.imgBytes&&q1===0&&(q1=62500*wS());var _=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&wf(r,r.stylesheets),r.unsuspend)){var v=r.unsuspend;r.unsuspend=null,v()}},(r.imgBytes>q1?50:800)+a);return r.unsuspend=u,function(){r.unsuspend=null,clearTimeout(g),clearTimeout(_)}}:null}function Ef(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)wf(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var _f=null;function wf(r,a){r.stylesheets=null,r.unsuspend!==null&&(r.count++,_f=new Map,a.forEach(zS,r),_f=null,Ef.call(r))}function zS(r,a){if(!(a.state.loading&4)){var u=_f.get(r);if(u)var g=u.get(null);else{u=new Map,_f.set(r,u);for(var _=r.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<_.length;v++){var O=_[v];(O.nodeName==="LINK"||O.getAttribute("media")!=="not all")&&(u.set(O.dataset.precedence,O),g=O)}g&&u.set(null,g)}_=a.instance,O=_.getAttribute("data-precedence"),v=u.get(O)||g,v===g&&u.set(null,_),u.set(O,_),this.count++,g=Ef.bind(this),_.addEventListener("load",g),_.addEventListener("error",g),v?v.parentNode.insertBefore(_,v.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(_,r.firstChild)),a.state.loading|=4}}var vu={$$typeof:K,Provider:null,Consumer:null,_currentValue:Xe,_currentValue2:Xe,_threadCount:0};function HS(r,a,u,g,_,v,O,U,ee){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=sr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sr(0),this.hiddenUpdates=sr(null),this.identifierPrefix=g,this.onUncaughtError=_,this.onCaughtError=v,this.onRecoverableError=O,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ee,this.incompleteTransitions=new Map}function gy(r,a,u,g,_,v,O,U,ee,ge,Ae,Ie){return r=new HS(r,a,u,O,ee,ge,Ae,Ie,U),a=1,v===!0&&(a|=24),v=Gi(3,null,null,a),r.current=v,v.stateNode=r,a=v0(),a.refCount++,r.pooledCache=a,a.refCount++,v.memoizedState={element:g,isDehydrated:u,cache:a},I0(v),r}function my(r){return r?(r=Bl,r):Bl}function py(r,a,u,g,_,v){_=my(_),g.context===null?g.context=_:g.pendingContext=_,g=lo(a),g.payload={element:u},v=v===void 0?null:v,v!==null&&(g.callback=v),u=co(r,g,a),u!==null&&(Li(u,r,a),nu(u,r,a))}function xy(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var u=r.retryLane;r.retryLane=u!==0&&u<a?u:a}}function Y1(r,a){xy(r,a),(r=r.alternate)&&xy(r,a)}function yy(r){if(r.tag===13||r.tag===31){var a=il(r,67108864);a!==null&&Li(a,r,67108864),Y1(r,67108864)}}function Ey(r){if(r.tag===13||r.tag===31){var a=Ki();a=Rn(a);var u=il(r,a);u!==null&&Li(u,r,a),Y1(r,a)}}var bf=!0;function GS(r,a,u,g){var _=pe.T;pe.T=null;var v=ve.p;try{ve.p=2,X1(r,a,u,g)}finally{ve.p=v,pe.T=_}}function qS(r,a,u,g){var _=pe.T;pe.T=null;var v=ve.p;try{ve.p=8,X1(r,a,u,g)}finally{ve.p=v,pe.T=_}}function X1(r,a,u,g){if(bf){var _=W1(g);if(_===null)M1(r,a,g,Af,u),wy(r,g);else if(XS(_,r,a,u,g))g.stopPropagation();else if(wy(r,g),a&4&&-1<YS.indexOf(r)){for(;_!==null;){var v=Nt(_);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var O=ii(v.pendingLanes);if(O!==0){var U=v;for(U.pendingLanes|=2,U.entangledLanes|=2;O;){var ee=1<<31-ot(O);U.entanglements[1]|=ee,O&=~ee}qs(v),(cn&6)===0&&(sf=xn()+500,yu(0))}}break;case 31:case 13:U=il(v,2),U!==null&&Li(U,v,2),of(),Y1(v,2)}if(v=W1(g),v===null&&M1(r,a,g,Af,u),v===_)break;_=v}_!==null&&g.stopPropagation()}else M1(r,a,g,null,u)}}function W1(r){return r=Ci(r),K1(r)}var Af=null;function K1(r){if(Af=null,r=yn(r),r!==null){var a=h(r);if(a===null)r=null;else{var u=a.tag;if(u===13){if(r=p(a),r!==null)return r;r=null}else if(u===31){if(r=T(a),r!==null)return r;r=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null)}}return Af=r,null}function _y(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ti()){case mr:return 2;case as:return 8;case pr:case Pn:return 32;case Ls:return 268435456;default:return 32}default:return 32}}var Q1=!1,wo=null,bo=null,Ao=null,Tu=new Map,Su=new Map,vo=[],YS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function wy(r,a){switch(r){case"focusin":case"focusout":wo=null;break;case"dragenter":case"dragleave":bo=null;break;case"mouseover":case"mouseout":Ao=null;break;case"pointerover":case"pointerout":Tu.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Su.delete(a.pointerId)}}function Cu(r,a,u,g,_,v){return r===null||r.nativeEvent!==v?(r={blockedOn:a,domEventName:u,eventSystemFlags:g,nativeEvent:v,targetContainers:[_]},a!==null&&(a=Nt(a),a!==null&&yy(a)),r):(r.eventSystemFlags|=g,a=r.targetContainers,_!==null&&a.indexOf(_)===-1&&a.push(_),r)}function XS(r,a,u,g,_){switch(a){case"focusin":return wo=Cu(wo,r,a,u,g,_),!0;case"dragenter":return bo=Cu(bo,r,a,u,g,_),!0;case"mouseover":return Ao=Cu(Ao,r,a,u,g,_),!0;case"pointerover":var v=_.pointerId;return Tu.set(v,Cu(Tu.get(v)||null,r,a,u,g,_)),!0;case"gotpointercapture":return v=_.pointerId,Su.set(v,Cu(Su.get(v)||null,r,a,u,g,_)),!0}return!1}function by(r){var a=yn(r.target);if(a!==null){var u=h(a);if(u!==null){if(a=u.tag,a===13){if(a=p(u),a!==null){r.blockedOn=a,He(r.priority,function(){Ey(u)});return}}else if(a===31){if(a=T(u),a!==null){r.blockedOn=a,He(r.priority,function(){Ey(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){r.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}r.blockedOn=null}function vf(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var u=W1(r.nativeEvent);if(u===null){u=r.nativeEvent;var g=new u.constructor(u.type,u);la=g,u.target.dispatchEvent(g),la=null}else return a=Nt(u),a!==null&&yy(a),r.blockedOn=u,!1;a.shift()}return!0}function Ay(r,a,u){vf(r)&&u.delete(a)}function WS(){Q1=!1,wo!==null&&vf(wo)&&(wo=null),bo!==null&&vf(bo)&&(bo=null),Ao!==null&&vf(Ao)&&(Ao=null),Tu.forEach(Ay),Su.forEach(Ay)}function Tf(r,a){r.blockedOn===a&&(r.blockedOn=null,Q1||(Q1=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,WS)))}var Sf=null;function vy(r){Sf!==r&&(Sf=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Sf===r&&(Sf=null);for(var a=0;a<r.length;a+=3){var u=r[a],g=r[a+1],_=r[a+2];if(typeof g!="function"){if(K1(g||u)===null)continue;break}var v=Nt(u);v!==null&&(r.splice(a,3),a-=3,W0(v,{pending:!0,data:_,method:u.method,action:g},g,_))}}))}function oc(r){function a(ee){return Tf(ee,r)}wo!==null&&Tf(wo,r),bo!==null&&Tf(bo,r),Ao!==null&&Tf(Ao,r),Tu.forEach(a),Su.forEach(a);for(var u=0;u<vo.length;u++){var g=vo[u];g.blockedOn===r&&(g.blockedOn=null)}for(;0<vo.length&&(u=vo[0],u.blockedOn===null);)by(u),u.blockedOn===null&&vo.shift();if(u=(r.ownerDocument||r).$$reactFormReplay,u!=null)for(g=0;g<u.length;g+=3){var _=u[g],v=u[g+1],O=_[Bt]||null;if(typeof v=="function")O||vy(u);else if(O){var U=null;if(v&&v.hasAttribute("formAction")){if(_=v,O=v[Bt]||null)U=O.formAction;else if(K1(_)!==null)continue}else U=O.action;typeof U=="function"?u[g+1]=U:(u.splice(g,3),g-=3),vy(u)}}}function Ty(){function r(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(O){return _=O})},focusReset:"manual",scroll:"manual"})}function a(){_!==null&&(_(),_=null),g||setTimeout(u,20)}function u(){if(!g&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,_=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(u,100),function(){g=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),_!==null&&(_(),_=null)}}}function Z1(r){this._internalRoot=r}Cf.prototype.render=Z1.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(s(409));var u=a.current,g=Ki();py(u,g,r,a,null,null)},Cf.prototype.unmount=Z1.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;py(r.current,2,null,r,null,null),of(),a[lr]=null}};function Cf(r){this._internalRoot=r}Cf.prototype.unstable_scheduleHydration=function(r){if(r){var a=or();r={blockedOn:null,target:r,priority:a};for(var u=0;u<vo.length&&a!==0&&a<vo[u].priority;u++);vo.splice(u,0,r),u===0&&by(r)}};var Sy=e.version;if(Sy!=="19.2.3")throw Error(s(527,Sy,"19.2.3"));ve.findDOMNode=function(r){var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=E(a),r=r!==null?C(r):null,r=r===null?null:r.stateNode,r};var KS={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:pe,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var If=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!If.isDisabled&&If.supportsFiber)try{kt=If.inject(KS),Le=If}catch{}}return Nu.createRoot=function(r,a){if(!c(r))throw Error(s(299));var u=!1,g="",_=M2,v=P2,O=L2;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onUncaughtError!==void 0&&(_=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(O=a.onRecoverableError)),a=gy(r,1,!1,null,null,u,g,null,_,v,O,Ty),r[lr]=a.current,D1(r),new Z1(a)},Nu.hydrateRoot=function(r,a,u){if(!c(r))throw Error(s(299));var g=!1,_="",v=M2,O=P2,U=L2,ee=null;return u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(_=u.identifierPrefix),u.onUncaughtError!==void 0&&(v=u.onUncaughtError),u.onCaughtError!==void 0&&(O=u.onCaughtError),u.onRecoverableError!==void 0&&(U=u.onRecoverableError),u.formState!==void 0&&(ee=u.formState)),a=gy(r,1,!0,a,u??null,g,_,ee,v,O,U,Ty),a.context=my(null),u=a.current,g=Ki(),g=Rn(g),_=lo(g),_.callback=null,co(u,_,g),u=g,a.current.lanes=u,zr(a,u),qs(a),r[lr]=a.current,D1(r),new Cf(a)},Nu.version="19.2.3",Nu}var ky;function aC(){if(ky)return eg.exports;ky=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),eg.exports=sC(),eg.exports}var oC=aC();const lC=hm(oC);/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var By="popstate";function cC(n={}){function e(c,h){let{pathname:p="/",search:T="",hash:w=""}=Nl(c.location.hash.substring(1));return!p.startsWith("/")&&!p.startsWith(".")&&(p="/"+p),Ag("",{pathname:p,search:T,hash:w},h.state&&h.state.usr||null,h.state&&h.state.key||"default")}function t(c,h){let p=c.document.querySelector("base"),T="";if(p&&p.getAttribute("href")){let w=c.location.href,E=w.indexOf("#");T=E===-1?w:w.slice(0,E)}return T+"#"+(typeof h=="string"?h:Qu(h))}function s(c,h){ts(c.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(h)})`)}return hC(e,t,s,n)}function Yn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function ts(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function uC(){return Math.random().toString(36).substring(2,10)}function Uy(n,e){return{usr:n.state,key:n.key,idx:e}}function Ag(n,e,t=null,s){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Nl(e):e,state:t,key:e&&e.key||s||uC()}}function Qu({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Nl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substring(s),n=n.substring(0,s)),n&&(e.pathname=n)}return e}function hC(n,e,t,s={}){let{window:c=document.defaultView,v5Compat:h=!1}=s,p=c.history,T="POP",w=null,E=C();E==null&&(E=0,p.replaceState({...p.state,idx:E},""));function C(){return(p.state||{idx:null}).idx}function I(){T="POP";let Y=C(),_e=Y==null?null:Y-E;E=Y,w&&w({action:T,location:Q.location,delta:_e})}function M(Y,_e){T="PUSH";let ae=Ag(Q.location,Y,_e);t&&t(ae,Y),E=C()+1;let K=Uy(ae,E),ce=Q.createHref(ae);try{p.pushState(K,"",ce)}catch(Re){if(Re instanceof DOMException&&Re.name==="DataCloneError")throw Re;c.location.assign(ce)}h&&w&&w({action:T,location:Q.location,delta:1})}function B(Y,_e){T="REPLACE";let ae=Ag(Q.location,Y,_e);t&&t(ae,Y),E=C();let K=Uy(ae,E),ce=Q.createHref(ae);p.replaceState(K,"",ce),h&&w&&w({action:T,location:Q.location,delta:0})}function W(Y){return fC(Y)}let Q={get action(){return T},get location(){return n(c,p)},listen(Y){if(w)throw new Error("A history only accepts one active listener");return c.addEventListener(By,I),w=Y,()=>{c.removeEventListener(By,I),w=null}},createHref(Y){return e(c,Y)},createURL:W,encodeLocation(Y){let _e=W(Y);return{pathname:_e.pathname,search:_e.search,hash:_e.hash}},push:M,replace:B,go(Y){return p.go(Y)}};return Q}function fC(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Yn(t,"No window.location.(origin|href) available to create URL");let s=typeof n=="string"?n:Qu(n);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function Zw(n,e,t="/"){return dC(n,e,t,!1)}function dC(n,e,t,s){let c=typeof e=="string"?Nl(e):e,h=ja(c.pathname||"/",t);if(h==null)return null;let p=Jw(n);gC(p);let T=null;for(let w=0;T==null&&w<p.length;++w){let E=TC(h);T=AC(p[w],E,s)}return T}function Jw(n,e=[],t=[],s="",c=!1){let h=(p,T,w=c,E)=>{let C={relativePath:E===void 0?p.path||"":E,caseSensitive:p.caseSensitive===!0,childrenIndex:T,route:p};if(C.relativePath.startsWith("/")){if(!C.relativePath.startsWith(s)&&w)return;Yn(C.relativePath.startsWith(s),`Absolute route path "${C.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),C.relativePath=C.relativePath.slice(s.length)}let I=Va([s,C.relativePath]),M=t.concat(C);p.children&&p.children.length>0&&(Yn(p.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${I}".`),Jw(p.children,e,M,I,w)),!(p.path==null&&!p.index)&&e.push({path:I,score:wC(I,p.index),routesMeta:M})};return n.forEach((p,T)=>{var w;if(p.path===""||!((w=p.path)!=null&&w.includes("?")))h(p,T);else for(let E of $w(p.path))h(p,T,!0,E)}),e}function $w(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,c=t.endsWith("?"),h=t.replace(/\?$/,"");if(s.length===0)return c?[h,""]:[h];let p=$w(s.join("/")),T=[];return T.push(...p.map(w=>w===""?h:[h,w].join("/"))),c&&T.push(...p),T.map(w=>n.startsWith("/")&&w===""?"/":w)}function gC(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:bC(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var mC=/^:[\w-]+$/,pC=3,xC=2,yC=1,EC=10,_C=-2,Vy=n=>n==="*";function wC(n,e){let t=n.split("/"),s=t.length;return t.some(Vy)&&(s+=_C),e&&(s+=xC),t.filter(c=>!Vy(c)).reduce((c,h)=>c+(mC.test(h)?pC:h===""?yC:EC),s)}function bC(n,e){return n.length===e.length&&n.slice(0,-1).every((s,c)=>s===e[c])?n[n.length-1]-e[e.length-1]:0}function AC(n,e,t=!1){let{routesMeta:s}=n,c={},h="/",p=[];for(let T=0;T<s.length;++T){let w=s[T],E=T===s.length-1,C=h==="/"?e:e.slice(h.length)||"/",I=nd({path:w.relativePath,caseSensitive:w.caseSensitive,end:E},C),M=w.route;if(!I&&E&&t&&!s[s.length-1].route.index&&(I=nd({path:w.relativePath,caseSensitive:w.caseSensitive,end:!1},C)),!I)return null;Object.assign(c,I.params),p.push({params:c,pathname:Va([h,I.pathname]),pathnameBase:NC(Va([h,I.pathnameBase])),route:M}),I.pathnameBase!=="/"&&(h=Va([h,I.pathnameBase]))}return p}function nd(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=vC(n.path,n.caseSensitive,n.end),c=e.match(t);if(!c)return null;let h=c[0],p=h.replace(/(.)\/+$/,"$1"),T=c.slice(1);return{params:s.reduce((E,{paramName:C,isOptional:I},M)=>{if(C==="*"){let W=T[M]||"";p=h.slice(0,h.length-W.length).replace(/(.)\/+$/,"$1")}const B=T[M];return I&&!B?E[C]=void 0:E[C]=(B||"").replace(/%2F/g,"/"),E},{}),pathname:h,pathnameBase:p,pattern:n}}function vC(n,e=!1,t=!0){ts(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let s=[],c="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(p,T,w)=>(s.push({paramName:T,isOptional:w!=null}),w?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(s.push({paramName:"*"}),c+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?c+="\\/*$":n!==""&&n!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,e?void 0:"i"),s]}function TC(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ts(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function ja(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}var eb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,SC=n=>eb.test(n);function CC(n,e="/"){let{pathname:t,search:s="",hash:c=""}=typeof n=="string"?Nl(n):n,h;if(t)if(SC(t))h=t;else{if(t.includes("//")){let p=t;t=t.replace(/\/\/+/g,"/"),ts(!1,`Pathnames cannot have embedded double slashes - normalizing ${p} -> ${t}`)}t.startsWith("/")?h=jy(t.substring(1),"/"):h=jy(t,e)}else h=e;return{pathname:h,search:RC(s),hash:OC(c)}}function jy(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(c=>{c===".."?t.length>1&&t.pop():c!=="."&&t.push(c)}),t.length>1?t.join("/"):"/"}function ig(n,e,t,s){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function IC(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function dm(n){let e=IC(n);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function gm(n,e,t,s=!1){let c;typeof n=="string"?c=Nl(n):(c={...n},Yn(!c.pathname||!c.pathname.includes("?"),ig("?","pathname","search",c)),Yn(!c.pathname||!c.pathname.includes("#"),ig("#","pathname","hash",c)),Yn(!c.search||!c.search.includes("#"),ig("#","search","hash",c)));let h=n===""||c.pathname==="",p=h?"/":c.pathname,T;if(p==null)T=t;else{let I=e.length-1;if(!s&&p.startsWith("..")){let M=p.split("/");for(;M[0]==="..";)M.shift(),I-=1;c.pathname=M.join("/")}T=I>=0?e[I]:"/"}let w=CC(c,T),E=p&&p!=="/"&&p.endsWith("/"),C=(h||p===".")&&t.endsWith("/");return!w.pathname.endsWith("/")&&(E||C)&&(w.pathname+="/"),w}var Va=n=>n.join("/").replace(/\/\/+/g,"/"),NC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),RC=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,OC=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,DC=class{constructor(n,e,t,s=!1){this.status=n,this.statusText=e||"",this.internal=s,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function MC(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function PC(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var tb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function nb(n,e){let t=n;if(typeof t!="string"||!eb.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let s=t,c=!1;if(tb)try{let h=new URL(window.location.href),p=t.startsWith("//")?new URL(h.protocol+t):new URL(t),T=ja(p.pathname,e);p.origin===h.origin&&T!=null?t=T+p.search+p.hash:c=!0}catch{ts(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:c,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var rb=["POST","PUT","PATCH","DELETE"];new Set(rb);var LC=["GET",...rb];new Set(LC);var Lc=ne.createContext(null);Lc.displayName="DataRouter";var Bd=ne.createContext(null);Bd.displayName="DataRouterState";var kC=ne.createContext(!1),ib=ne.createContext({isTransitioning:!1});ib.displayName="ViewTransition";var BC=ne.createContext(new Map);BC.displayName="Fetchers";var UC=ne.createContext(null);UC.displayName="Await";var ns=ne.createContext(null);ns.displayName="Navigation";var ah=ne.createContext(null);ah.displayName="Location";var ra=ne.createContext({outlet:null,matches:[],isDataRoute:!1});ra.displayName="Route";var mm=ne.createContext(null);mm.displayName="RouteError";var sb="REACT_ROUTER_ERROR",VC="REDIRECT",jC="ROUTE_ERROR_RESPONSE";function FC(n){if(n.startsWith(`${sb}:${VC}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function zC(n){if(n.startsWith(`${sb}:${jC}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new DC(e.status,e.statusText,e.data)}catch{}}function HC(n,{relative:e}={}){Yn(kc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=ne.useContext(ns),{hash:c,pathname:h,search:p}=oh(n,{relative:e}),T=h;return t!=="/"&&(T=h==="/"?t:Va([t,h])),s.createHref({pathname:T,search:p,hash:c})}function kc(){return ne.useContext(ah)!=null}function Ya(){return Yn(kc(),"useLocation() may be used only in the context of a <Router> component."),ne.useContext(ah).location}var ab="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ob(n){ne.useContext(ns).static||ne.useLayoutEffect(n)}function lb(){let{isDataRoute:n}=ne.useContext(ra);return n?nI():GC()}function GC(){Yn(kc(),"useNavigate() may be used only in the context of a <Router> component.");let n=ne.useContext(Lc),{basename:e,navigator:t}=ne.useContext(ns),{matches:s}=ne.useContext(ra),{pathname:c}=Ya(),h=JSON.stringify(dm(s)),p=ne.useRef(!1);return ob(()=>{p.current=!0}),ne.useCallback((w,E={})=>{if(ts(p.current,ab),!p.current)return;if(typeof w=="number"){t.go(w);return}let C=gm(w,JSON.parse(h),c,E.relative==="path");n==null&&e!=="/"&&(C.pathname=C.pathname==="/"?e:Va([e,C.pathname])),(E.replace?t.replace:t.push)(C,E.state,E)},[e,t,h,c,n])}ne.createContext(null);function oh(n,{relative:e}={}){let{matches:t}=ne.useContext(ra),{pathname:s}=Ya(),c=JSON.stringify(dm(t));return ne.useMemo(()=>gm(n,JSON.parse(c),s,e==="path"),[n,c,s,e])}function qC(n,e){return cb(n,e)}function cb(n,e,t,s,c){var ae;Yn(kc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:h}=ne.useContext(ns),{matches:p}=ne.useContext(ra),T=p[p.length-1],w=T?T.params:{},E=T?T.pathname:"/",C=T?T.pathnameBase:"/",I=T&&T.route;{let K=I&&I.path||"";hb(E,!I||K.endsWith("*")||K.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${E}" (under <Route path="${K}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${K}"> to <Route path="${K==="/"?"*":`${K}/*`}">.`)}let M=Ya(),B;if(e){let K=typeof e=="string"?Nl(e):e;Yn(C==="/"||((ae=K.pathname)==null?void 0:ae.startsWith(C)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${C}" but pathname "${K.pathname}" was given in the \`location\` prop.`),B=K}else B=M;let W=B.pathname||"/",Q=W;if(C!=="/"){let K=C.replace(/^\//,"").split("/");Q="/"+W.replace(/^\//,"").split("/").slice(K.length).join("/")}let Y=Zw(n,{pathname:Q});ts(I||Y!=null,`No routes matched location "${B.pathname}${B.search}${B.hash}" `),ts(Y==null||Y[Y.length-1].route.element!==void 0||Y[Y.length-1].route.Component!==void 0||Y[Y.length-1].route.lazy!==void 0,`Matched leaf route at location "${B.pathname}${B.search}${B.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _e=QC(Y&&Y.map(K=>Object.assign({},K,{params:Object.assign({},w,K.params),pathname:Va([C,h.encodeLocation?h.encodeLocation(K.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:K.pathname]),pathnameBase:K.pathnameBase==="/"?C:Va([C,h.encodeLocation?h.encodeLocation(K.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:K.pathnameBase])})),p,t,s,c);return e&&_e?ne.createElement(ah.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...B},navigationType:"POP"}},_e):_e}function YC(){let n=tI(),e=MC(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:s},h={padding:"2px 4px",backgroundColor:s},p=null;return console.error("Error handled by React Router default ErrorBoundary:",n),p=ne.createElement(ne.Fragment,null,ne.createElement("p",null," Hey developer "),ne.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ne.createElement("code",{style:h},"ErrorBoundary")," or"," ",ne.createElement("code",{style:h},"errorElement")," prop on your route.")),ne.createElement(ne.Fragment,null,ne.createElement("h2",null,"Unexpected Application Error!"),ne.createElement("h3",{style:{fontStyle:"italic"}},e),t?ne.createElement("pre",{style:c},t):null,p)}var XC=ne.createElement(YC,null),ub=class extends ne.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=zC(n.digest);t&&(n=t)}let e=n!==void 0?ne.createElement(ra.Provider,{value:this.props.routeContext},ne.createElement(mm.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?ne.createElement(WC,{error:n},e):e}};ub.contextType=kC;var sg=new WeakMap;function WC({children:n,error:e}){let{basename:t}=ne.useContext(ns);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let s=FC(e.digest);if(s){let c=sg.get(e);if(c)throw c;let h=nb(s.location,t);if(tb&&!sg.get(e))if(h.isExternal||s.reloadDocument)window.location.href=h.absoluteURL||h.to;else{const p=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(h.to,{replace:s.replace}));throw sg.set(e,p),p}return ne.createElement("meta",{httpEquiv:"refresh",content:`0;url=${h.absoluteURL||h.to}`})}}return n}function KC({routeContext:n,match:e,children:t}){let s=ne.useContext(Lc);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),ne.createElement(ra.Provider,{value:n},t)}function QC(n,e=[],t=null,s=null,c=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let h=n,p=t==null?void 0:t.errors;if(p!=null){let C=h.findIndex(I=>I.route.id&&(p==null?void 0:p[I.route.id])!==void 0);Yn(C>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(p).join(",")}`),h=h.slice(0,Math.min(h.length,C+1))}let T=!1,w=-1;if(t)for(let C=0;C<h.length;C++){let I=h[C];if((I.route.HydrateFallback||I.route.hydrateFallbackElement)&&(w=C),I.route.id){let{loaderData:M,errors:B}=t,W=I.route.loader&&!M.hasOwnProperty(I.route.id)&&(!B||B[I.route.id]===void 0);if(I.route.lazy||W){T=!0,w>=0?h=h.slice(0,w+1):h=[h[0]];break}}}let E=t&&s?(C,I)=>{var M,B;s(C,{location:t.location,params:((B=(M=t.matches)==null?void 0:M[0])==null?void 0:B.params)??{},unstable_pattern:PC(t.matches),errorInfo:I})}:void 0;return h.reduceRight((C,I,M)=>{let B,W=!1,Q=null,Y=null;t&&(B=p&&I.route.id?p[I.route.id]:void 0,Q=I.route.errorElement||XC,T&&(w<0&&M===0?(hb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),W=!0,Y=null):w===M&&(W=!0,Y=I.route.hydrateFallbackElement||null)));let _e=e.concat(h.slice(0,M+1)),ae=()=>{let K;return B?K=Q:W?K=Y:I.route.Component?K=ne.createElement(I.route.Component,null):I.route.element?K=I.route.element:K=C,ne.createElement(KC,{match:I,routeContext:{outlet:C,matches:_e,isDataRoute:t!=null},children:K})};return t&&(I.route.ErrorBoundary||I.route.errorElement||M===0)?ne.createElement(ub,{location:t.location,revalidation:t.revalidation,component:Q,error:B,children:ae(),routeContext:{outlet:null,matches:_e,isDataRoute:!0},onError:E}):ae()},null)}function pm(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ZC(n){let e=ne.useContext(Lc);return Yn(e,pm(n)),e}function JC(n){let e=ne.useContext(Bd);return Yn(e,pm(n)),e}function $C(n){let e=ne.useContext(ra);return Yn(e,pm(n)),e}function xm(n){let e=$C(n),t=e.matches[e.matches.length-1];return Yn(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function eI(){return xm("useRouteId")}function tI(){var s;let n=ne.useContext(mm),e=JC("useRouteError"),t=xm("useRouteError");return n!==void 0?n:(s=e.errors)==null?void 0:s[t]}function nI(){let{router:n}=ZC("useNavigate"),e=xm("useNavigate"),t=ne.useRef(!1);return ob(()=>{t.current=!0}),ne.useCallback(async(c,h={})=>{ts(t.current,ab),t.current&&(typeof c=="number"?await n.navigate(c):await n.navigate(c,{fromRouteId:e,...h}))},[n,e])}var Fy={};function hb(n,e,t){!e&&!Fy[n]&&(Fy[n]=!0,ts(!1,t))}ne.memo(rI);function rI({routes:n,future:e,state:t,onError:s}){return cb(n,void 0,t,s,e)}function iI({to:n,replace:e,state:t,relative:s}){Yn(kc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:c}=ne.useContext(ns);ts(!c,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:h}=ne.useContext(ra),{pathname:p}=Ya(),T=lb(),w=gm(n,dm(h),p,s==="path"),E=JSON.stringify(w);return ne.useEffect(()=>{T(JSON.parse(E),{replace:e,state:t,relative:s})},[T,E,s,e,t]),null}function xl(n){Yn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function sI({basename:n="/",children:e=null,location:t,navigationType:s="POP",navigator:c,static:h=!1,unstable_useTransitions:p}){Yn(!kc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let T=n.replace(/^\/*/,"/"),w=ne.useMemo(()=>({basename:T,navigator:c,static:h,unstable_useTransitions:p,future:{}}),[T,c,h,p]);typeof t=="string"&&(t=Nl(t));let{pathname:E="/",search:C="",hash:I="",state:M=null,key:B="default"}=t,W=ne.useMemo(()=>{let Q=ja(E,T);return Q==null?null:{location:{pathname:Q,search:C,hash:I,state:M,key:B},navigationType:s}},[T,E,C,I,M,B,s]);return ts(W!=null,`<Router basename="${T}"> is not able to match the URL "${E}${C}${I}" because it does not start with the basename, so the <Router> won't render anything.`),W==null?null:ne.createElement(ns.Provider,{value:w},ne.createElement(ah.Provider,{children:e,value:W}))}function aI({children:n,location:e}){return qC(vg(n),e)}function vg(n,e=[]){let t=[];return ne.Children.forEach(n,(s,c)=>{if(!ne.isValidElement(s))return;let h=[...e,c];if(s.type===ne.Fragment){t.push.apply(t,vg(s.props.children,h));return}Yn(s.type===xl,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Yn(!s.props.index||!s.props.children,"An index route cannot have child routes.");let p={id:s.props.id||h.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(p.children=vg(s.props.children,h)),t.push(p)}),t}var Hf="get",Gf="application/x-www-form-urlencoded";function Ud(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function oI(n){return Ud(n)&&n.tagName.toLowerCase()==="button"}function lI(n){return Ud(n)&&n.tagName.toLowerCase()==="form"}function cI(n){return Ud(n)&&n.tagName.toLowerCase()==="input"}function uI(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function hI(n,e){return n.button===0&&(!e||e==="_self")&&!uI(n)}var Rf=null;function fI(){if(Rf===null)try{new FormData(document.createElement("form"),0),Rf=!1}catch{Rf=!0}return Rf}var dI=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ag(n){return n!=null&&!dI.has(n)?(ts(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Gf}"`),null):n}function gI(n,e){let t,s,c,h,p;if(lI(n)){let T=n.getAttribute("action");s=T?ja(T,e):null,t=n.getAttribute("method")||Hf,c=ag(n.getAttribute("enctype"))||Gf,h=new FormData(n)}else if(oI(n)||cI(n)&&(n.type==="submit"||n.type==="image")){let T=n.form;if(T==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let w=n.getAttribute("formaction")||T.getAttribute("action");if(s=w?ja(w,e):null,t=n.getAttribute("formmethod")||T.getAttribute("method")||Hf,c=ag(n.getAttribute("formenctype"))||ag(T.getAttribute("enctype"))||Gf,h=new FormData(T,n),!fI()){let{name:E,type:C,value:I}=n;if(C==="image"){let M=E?`${E}.`:"";h.append(`${M}x`,"0"),h.append(`${M}y`,"0")}else E&&h.append(E,I)}}else{if(Ud(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Hf,s=null,c=Gf,p=n}return h&&c==="text/plain"&&(p=h,h=void 0),{action:s,method:t.toLowerCase(),encType:c,formData:h,body:p}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ym(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function mI(n,e,t,s){let c=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?c.pathname.endsWith("/")?c.pathname=`${c.pathname}_.${s}`:c.pathname=`${c.pathname}.${s}`:c.pathname==="/"?c.pathname=`_root.${s}`:e&&ja(c.pathname,e)==="/"?c.pathname=`${e.replace(/\/$/,"")}/_root.${s}`:c.pathname=`${c.pathname.replace(/\/$/,"")}.${s}`,c}async function pI(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function xI(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function yI(n,e,t){let s=await Promise.all(n.map(async c=>{let h=e.routes[c.route.id];if(h){let p=await pI(h,t);return p.links?p.links():[]}return[]}));return bI(s.flat(1).filter(xI).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function zy(n,e,t,s,c,h){let p=(w,E)=>t[E]?w.route.id!==t[E].route.id:!0,T=(w,E)=>{var C;return t[E].pathname!==w.pathname||((C=t[E].route.path)==null?void 0:C.endsWith("*"))&&t[E].params["*"]!==w.params["*"]};return h==="assets"?e.filter((w,E)=>p(w,E)||T(w,E)):h==="data"?e.filter((w,E)=>{var I;let C=s.routes[w.route.id];if(!C||!C.hasLoader)return!1;if(p(w,E)||T(w,E))return!0;if(w.route.shouldRevalidate){let M=w.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:((I=t[0])==null?void 0:I.params)||{},nextUrl:new URL(n,window.origin),nextParams:w.params,defaultShouldRevalidate:!0});if(typeof M=="boolean")return M}return!0}):[]}function EI(n,e,{includeHydrateFallback:t}={}){return _I(n.map(s=>{let c=e.routes[s.route.id];if(!c)return[];let h=[c.module];return c.clientActionModule&&(h=h.concat(c.clientActionModule)),c.clientLoaderModule&&(h=h.concat(c.clientLoaderModule)),t&&c.hydrateFallbackModule&&(h=h.concat(c.hydrateFallbackModule)),c.imports&&(h=h.concat(c.imports)),h}).flat(1))}function _I(n){return[...new Set(n)]}function wI(n){let e={},t=Object.keys(n).sort();for(let s of t)e[s]=n[s];return e}function bI(n,e){let t=new Set;return new Set(e),n.reduce((s,c)=>{let h=JSON.stringify(wI(c));return t.has(h)||(t.add(h),s.push({key:h,link:c})),s},[])}function fb(){let n=ne.useContext(Lc);return ym(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function AI(){let n=ne.useContext(Bd);return ym(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Em=ne.createContext(void 0);Em.displayName="FrameworkContext";function db(){let n=ne.useContext(Em);return ym(n,"You must render this element inside a <HydratedRouter> element"),n}function vI(n,e){let t=ne.useContext(Em),[s,c]=ne.useState(!1),[h,p]=ne.useState(!1),{onFocus:T,onBlur:w,onMouseEnter:E,onMouseLeave:C,onTouchStart:I}=e,M=ne.useRef(null);ne.useEffect(()=>{if(n==="render"&&p(!0),n==="viewport"){let Q=_e=>{_e.forEach(ae=>{p(ae.isIntersecting)})},Y=new IntersectionObserver(Q,{threshold:.5});return M.current&&Y.observe(M.current),()=>{Y.disconnect()}}},[n]),ne.useEffect(()=>{if(s){let Q=setTimeout(()=>{p(!0)},100);return()=>{clearTimeout(Q)}}},[s]);let B=()=>{c(!0)},W=()=>{c(!1),p(!1)};return t?n!=="intent"?[h,M,{}]:[h,M,{onFocus:Ru(T,B),onBlur:Ru(w,W),onMouseEnter:Ru(E,B),onMouseLeave:Ru(C,W),onTouchStart:Ru(I,B)}]:[!1,M,{}]}function Ru(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function TI({page:n,...e}){let{router:t}=fb(),s=ne.useMemo(()=>Zw(t.routes,n,t.basename),[t.routes,n,t.basename]);return s?ne.createElement(CI,{page:n,matches:s,...e}):null}function SI(n){let{manifest:e,routeModules:t}=db(),[s,c]=ne.useState([]);return ne.useEffect(()=>{let h=!1;return yI(n,e,t).then(p=>{h||c(p)}),()=>{h=!0}},[n,e,t]),s}function CI({page:n,matches:e,...t}){let s=Ya(),{future:c,manifest:h,routeModules:p}=db(),{basename:T}=fb(),{loaderData:w,matches:E}=AI(),C=ne.useMemo(()=>zy(n,e,E,h,s,"data"),[n,e,E,h,s]),I=ne.useMemo(()=>zy(n,e,E,h,s,"assets"),[n,e,E,h,s]),M=ne.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let Q=new Set,Y=!1;if(e.forEach(ae=>{var ce;let K=h.routes[ae.route.id];!K||!K.hasLoader||(!C.some(Re=>Re.route.id===ae.route.id)&&ae.route.id in w&&((ce=p[ae.route.id])!=null&&ce.shouldRevalidate)||K.hasClientLoader?Y=!0:Q.add(ae.route.id))}),Q.size===0)return[];let _e=mI(n,T,c.unstable_trailingSlashAwareDataRequests,"data");return Y&&Q.size>0&&_e.searchParams.set("_routes",e.filter(ae=>Q.has(ae.route.id)).map(ae=>ae.route.id).join(",")),[_e.pathname+_e.search]},[T,c.unstable_trailingSlashAwareDataRequests,w,s,h,C,e,n,p]),B=ne.useMemo(()=>EI(I,h),[I,h]),W=SI(I);return ne.createElement(ne.Fragment,null,M.map(Q=>ne.createElement("link",{key:Q,rel:"prefetch",as:"fetch",href:Q,...t})),B.map(Q=>ne.createElement("link",{key:Q,rel:"modulepreload",href:Q,...t})),W.map(({key:Q,link:Y})=>ne.createElement("link",{key:Q,nonce:t.nonce,...Y})))}function II(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var NI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{NI&&(window.__reactRouterVersion="7.12.0")}catch{}function RI({basename:n,children:e,unstable_useTransitions:t,window:s}){let c=ne.useRef();c.current==null&&(c.current=cC({window:s,v5Compat:!0}));let h=c.current,[p,T]=ne.useState({action:h.action,location:h.location}),w=ne.useCallback(E=>{t===!1?T(E):ne.startTransition(()=>T(E))},[t]);return ne.useLayoutEffect(()=>h.listen(w),[h,w]),ne.createElement(sI,{basename:n,children:e,location:p.location,navigationType:p.action,navigator:h,unstable_useTransitions:t})}var gb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rd=ne.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:c,reloadDocument:h,replace:p,state:T,target:w,to:E,preventScrollReset:C,viewTransition:I,unstable_defaultShouldRevalidate:M,...B},W){let{basename:Q,unstable_useTransitions:Y}=ne.useContext(ns),_e=typeof E=="string"&&gb.test(E),ae=nb(E,Q);E=ae.to;let K=HC(E,{relative:c}),[ce,Re,De]=vI(s,B),F=PI(E,{replace:p,state:T,target:w,preventScrollReset:C,relative:c,viewTransition:I,unstable_defaultShouldRevalidate:M,unstable_useTransitions:Y});function V(Z){e&&e(Z),Z.defaultPrevented||F(Z)}let j=ne.createElement("a",{...B,...De,href:ae.absoluteURL||K,onClick:ae.isExternal||h?e:V,ref:II(W,Re),target:w,"data-discover":!_e&&t==="render"?"true":void 0});return ce&&!_e?ne.createElement(ne.Fragment,null,j,ne.createElement(TI,{page:K})):j});rd.displayName="Link";var OI=ne.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:c=!1,style:h,to:p,viewTransition:T,children:w,...E},C){let I=oh(p,{relative:E.relative}),M=Ya(),B=ne.useContext(Bd),{navigator:W,basename:Q}=ne.useContext(ns),Y=B!=null&&VI(I)&&T===!0,_e=W.encodeLocation?W.encodeLocation(I).pathname:I.pathname,ae=M.pathname,K=B&&B.navigation&&B.navigation.location?B.navigation.location.pathname:null;t||(ae=ae.toLowerCase(),K=K?K.toLowerCase():null,_e=_e.toLowerCase()),K&&Q&&(K=ja(K,Q)||K);const ce=_e!=="/"&&_e.endsWith("/")?_e.length-1:_e.length;let Re=ae===_e||!c&&ae.startsWith(_e)&&ae.charAt(ce)==="/",De=K!=null&&(K===_e||!c&&K.startsWith(_e)&&K.charAt(_e.length)==="/"),F={isActive:Re,isPending:De,isTransitioning:Y},V=Re?e:void 0,j;typeof s=="function"?j=s(F):j=[s,Re?"active":null,De?"pending":null,Y?"transitioning":null].filter(Boolean).join(" ");let Z=typeof h=="function"?h(F):h;return ne.createElement(rd,{...E,"aria-current":V,className:j,ref:C,style:Z,to:p,viewTransition:T},typeof w=="function"?w(F):w)});OI.displayName="NavLink";var DI=ne.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:c,state:h,method:p=Hf,action:T,onSubmit:w,relative:E,preventScrollReset:C,viewTransition:I,unstable_defaultShouldRevalidate:M,...B},W)=>{let{unstable_useTransitions:Q}=ne.useContext(ns),Y=BI(),_e=UI(T,{relative:E}),ae=p.toLowerCase()==="get"?"get":"post",K=typeof T=="string"&&gb.test(T),ce=Re=>{if(w&&w(Re),Re.defaultPrevented)return;Re.preventDefault();let De=Re.nativeEvent.submitter,F=(De==null?void 0:De.getAttribute("formmethod"))||p,V=()=>Y(De||Re.currentTarget,{fetcherKey:e,method:F,navigate:t,replace:c,state:h,relative:E,preventScrollReset:C,viewTransition:I,unstable_defaultShouldRevalidate:M});Q&&t!==!1?ne.startTransition(()=>V()):V()};return ne.createElement("form",{ref:W,method:ae,action:_e,onSubmit:s?w:ce,...B,"data-discover":!K&&n==="render"?"true":void 0})});DI.displayName="Form";function MI(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mb(n){let e=ne.useContext(Lc);return Yn(e,MI(n)),e}function PI(n,{target:e,replace:t,state:s,preventScrollReset:c,relative:h,viewTransition:p,unstable_defaultShouldRevalidate:T,unstable_useTransitions:w}={}){let E=lb(),C=Ya(),I=oh(n,{relative:h});return ne.useCallback(M=>{if(hI(M,e)){M.preventDefault();let B=t!==void 0?t:Qu(C)===Qu(I),W=()=>E(n,{replace:B,state:s,preventScrollReset:c,relative:h,viewTransition:p,unstable_defaultShouldRevalidate:T});w?ne.startTransition(()=>W()):W()}},[C,E,I,t,s,e,n,c,h,p,T,w])}var LI=0,kI=()=>`__${String(++LI)}__`;function BI(){let{router:n}=mb("useSubmit"),{basename:e}=ne.useContext(ns),t=eI(),s=n.fetch,c=n.navigate;return ne.useCallback(async(h,p={})=>{let{action:T,method:w,encType:E,formData:C,body:I}=gI(h,e);if(p.navigate===!1){let M=p.fetcherKey||kI();await s(M,t,p.action||T,{unstable_defaultShouldRevalidate:p.unstable_defaultShouldRevalidate,preventScrollReset:p.preventScrollReset,formData:C,body:I,formMethod:p.method||w,formEncType:p.encType||E,flushSync:p.flushSync})}else await c(p.action||T,{unstable_defaultShouldRevalidate:p.unstable_defaultShouldRevalidate,preventScrollReset:p.preventScrollReset,formData:C,body:I,formMethod:p.method||w,formEncType:p.encType||E,replace:p.replace,state:p.state,fromRouteId:t,flushSync:p.flushSync,viewTransition:p.viewTransition})},[s,c,e,t])}function UI(n,{relative:e}={}){let{basename:t}=ne.useContext(ns),s=ne.useContext(ra);Yn(s,"useFormAction must be used inside a RouteContext");let[c]=s.matches.slice(-1),h={...oh(n||".",{relative:e})},p=Ya();if(n==null){h.search=p.search;let T=new URLSearchParams(h.search),w=T.getAll("index");if(w.some(C=>C==="")){T.delete("index"),w.filter(I=>I).forEach(I=>T.append("index",I));let C=T.toString();h.search=C?`?${C}`:""}}return(!n||n===".")&&c.route.index&&(h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(h.pathname=h.pathname==="/"?t:Va([t,h.pathname])),Qu(h)}function VI(n,{relative:e}={}){let t=ne.useContext(ib);Yn(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=mb("useViewTransitionState"),c=oh(n,{relative:e});if(!t.isTransitioning)return!1;let h=ja(t.currentLocation.pathname,s)||t.currentLocation.pathname,p=ja(t.nextLocation.pathname,s)||t.nextLocation.pathname;return nd(c.pathname,p)!=null||nd(c.pathname,h)!=null}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jI=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),FI=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),Hy=n=>{const e=FI(n);return e.charAt(0).toUpperCase()+e.slice(1)},pb=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),zI=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var HI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GI=ne.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:c="",children:h,iconNode:p,...T},w)=>ne.createElement("svg",{ref:w,...HI,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:pb("lucide",c),...!h&&!zI(T)&&{"aria-hidden":"true"},...T},[...p.map(([E,C])=>ne.createElement(E,C)),...Array.isArray(h)?h:[h]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=(n,e)=>{const t=ne.forwardRef(({className:s,...c},h)=>ne.createElement(GI,{ref:h,iconNode:e,className:pb(`lucide-${jI(Hy(n))}`,`lucide-${n}`,s),...c}));return t.displayName=Hy(n),t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qI=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Gy=ut("calendar",qI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YI=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Tg=ut("camera",YI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XI=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],lc=ut("check",XI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WI=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],xb=ut("chevron-left",WI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KI=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Sg=ut("chevron-right",KI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],yb=ut("circle-alert",QI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZI=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Zu=ut("circle-check-big",ZI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],$I=ut("circle-check",JI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],_c=ut("clock",e3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],n3=ut("coins",t3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],i3=ut("eye",r3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],a3=ut("flame",s3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],qy=ut("gift",o3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],c3=ut("graduation-cap",l3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],h3=ut("grip-vertical",u3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],qf=ut("heart",f3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],id=ut("history",d3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Yy=ut("image",g3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Eb=ut("info",m3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],x3=ut("layout-dashboard",p3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],E3=ut("log-out",y3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],w3=ut("medal",_3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],A3=ut("menu",b3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],Xy=ut("monitor",v3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Cg=ut("package",T3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],cc=ut("plus",S3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],I3=ut("qr-code",C3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],R3=ut("refresh-ccw",N3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],D3=ut("refresh-cw",O3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],P3=ut("scan-line",M3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],k3=ut("search",L3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],U3=ut("send",B3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],j3=ut("settings",V3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],sd=ut("shield-check",F3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z3=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],H3=ut("shopping-bag",z3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G3=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],q3=ut("shopping-cart",G3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y3=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Wy=ut("smartphone",Y3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X3=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],ad=ut("sparkles",X3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],K3=ut("star",W3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],ju=ut("target",Q3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z3=[["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}],["path",{d:"M7 10v12",key:"1qc93n"}]],J3=ut("thumbs-up",Z3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $3=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ou=ut("trash-2",$3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],tN=ut("trending-up",eN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nN=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],rN=ut("triangle-alert",nN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iN=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Ky=ut("trophy",iN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sN=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Ig=ut("upload",sN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Ng=ut("user-plus",aN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oN=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],lN=ut("user",oN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cN=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],uN=ut("users",cN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hN=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ka=ut("x",hN),_b=ne.createContext(void 0),Bc=()=>{const n=ne.useContext(_b);if(!n)throw new Error("useAlert must be used within an AlertProvider");return n},fN=({children:n})=>{const[e,t]=ne.useState(null),s=(h,p="info")=>{t({message:h,type:p})},c=()=>{t(null)};return A.jsxs(_b.Provider,{value:{showAlert:s,hideAlert:c},children:[n,e&&A.jsx(dN,{message:e.message,type:e.type,onClose:c})]})},dN=({message:n,type:e,onClose:t})=>{const s={success:A.jsx(Zu,{className:"text-emerald-500",size:32}),error:A.jsx(yb,{className:"text-rose-500",size:32}),info:A.jsx(Eb,{className:"text-indigo-500",size:32})},c={success:"bg-emerald-50",error:"bg-rose-50",info:"bg-indigo-50"};return A.jsx("div",{className:"fixed inset-0 z-[999] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:A.jsx("div",{className:"bg-white rounded-[2.5rem] max-w-sm w-full p-8 shadow-2xl animate-in zoom-in-95 duration-200 border border-slate-100",children:A.jsxs("div",{className:"flex flex-col items-center text-center",children:[A.jsx("div",{className:`${c[e]} p-4 rounded-2xl mb-6`,children:s[e]}),A.jsx("h3",{className:"text-xl font-black text-slate-800 mb-2",children:""}),A.jsx("p",{className:"text-slate-500 font-bold leading-relaxed mb-8",children:n}),A.jsx("button",{onClick:t,className:"w-full bg-slate-900 hover:bg-slate-800 text-white font-black py-4 rounded-2xl transition-all active:scale-95 shadow-lg shadow-slate-200",children:""})]})})})},gN=()=>{};var Qy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let c=n.charCodeAt(s);c<128?e[t++]=c:c<2048?(e[t++]=c>>6|192,e[t++]=c&63|128):(c&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(c=65536+((c&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=c>>18|240,e[t++]=c>>12&63|128,e[t++]=c>>6&63|128,e[t++]=c&63|128):(e[t++]=c>>12|224,e[t++]=c>>6&63|128,e[t++]=c&63|128)}return e},mN=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const c=n[t++];if(c<128)e[s++]=String.fromCharCode(c);else if(c>191&&c<224){const h=n[t++];e[s++]=String.fromCharCode((c&31)<<6|h&63)}else if(c>239&&c<365){const h=n[t++],p=n[t++],T=n[t++],w=((c&7)<<18|(h&63)<<12|(p&63)<<6|T&63)-65536;e[s++]=String.fromCharCode(55296+(w>>10)),e[s++]=String.fromCharCode(56320+(w&1023))}else{const h=n[t++],p=n[t++];e[s++]=String.fromCharCode((c&15)<<12|(h&63)<<6|p&63)}}return e.join("")},bb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let c=0;c<n.length;c+=3){const h=n[c],p=c+1<n.length,T=p?n[c+1]:0,w=c+2<n.length,E=w?n[c+2]:0,C=h>>2,I=(h&3)<<4|T>>4;let M=(T&15)<<2|E>>6,B=E&63;w||(B=64,p||(M=64)),s.push(t[C],t[I],t[M],t[B])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(wb(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):mN(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let c=0;c<n.length;){const h=t[n.charAt(c++)],T=c<n.length?t[n.charAt(c)]:0;++c;const E=c<n.length?t[n.charAt(c)]:64;++c;const I=c<n.length?t[n.charAt(c)]:64;if(++c,h==null||T==null||E==null||I==null)throw new pN;const M=h<<2|T>>4;if(s.push(M),E!==64){const B=T<<4&240|E>>2;if(s.push(B),I!==64){const W=E<<6&192|I;s.push(W)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class pN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xN=function(n){const e=wb(n);return bb.encodeByteArray(e,!0)},od=function(n){return xN(n).replace(/\./g,"")},Ab=function(n){try{return bb.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN=()=>yN().__FIREBASE_DEFAULTS__,_N=()=>{if(typeof process>"u"||typeof Qy>"u")return;const n=Qy.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},wN=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Ab(n[1]);return e&&JSON.parse(e)},Vd=()=>{try{return gN()||EN()||_N()||wN()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},vb=n=>{var e,t;return(t=(e=Vd())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},bN=n=>{const e=vb(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},Tb=()=>{var n;return(n=Vd())==null?void 0:n.config},Sb=n=>{var e;return(e=Vd())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Cb(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vN(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",c=n.iat||0,h=n.sub||n.user_id;if(!h)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const p={iss:`https://securetoken.google.com/${s}`,aud:s,iat:c,exp:c+3600,auth_time:c,sub:h,user_id:h,firebase:{sign_in_provider:"custom",identities:{}},...n};return[od(JSON.stringify(t)),od(JSON.stringify(p)),""].join(".")}const Fu={};function TN(){const n={prod:[],emulator:[]};for(const e of Object.keys(Fu))Fu[e]?n.emulator.push(e):n.prod.push(e);return n}function SN(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Zy=!1;function Ib(n,e){if(typeof window>"u"||typeof document>"u"||!Uc(window.location.host)||Fu[n]===e||Fu[n]||Zy)return;Fu[n]=e;function t(M){return`__firebase__banner__${M}`}const s="__firebase__banner",h=TN().prod.length>0;function p(){const M=document.getElementById(s);M&&M.remove()}function T(M){M.style.display="flex",M.style.background="#7faaf0",M.style.position="fixed",M.style.bottom="5px",M.style.left="5px",M.style.padding=".5em",M.style.borderRadius="5px",M.style.alignItems="center"}function w(M,B){M.setAttribute("width","24"),M.setAttribute("id",B),M.setAttribute("height","24"),M.setAttribute("viewBox","0 0 24 24"),M.setAttribute("fill","none"),M.style.marginLeft="-6px"}function E(){const M=document.createElement("span");return M.style.cursor="pointer",M.style.marginLeft="16px",M.style.fontSize="24px",M.innerHTML=" &times;",M.onclick=()=>{Zy=!0,p()},M}function C(M,B){M.setAttribute("id",B),M.innerText="Learn more",M.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",M.setAttribute("target","__blank"),M.style.paddingLeft="5px",M.style.textDecoration="underline"}function I(){const M=SN(s),B=t("text"),W=document.getElementById(B)||document.createElement("span"),Q=t("learnmore"),Y=document.getElementById(Q)||document.createElement("a"),_e=t("preprendIcon"),ae=document.getElementById(_e)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(M.created){const K=M.element;T(K),C(Y,Q);const ce=E();w(ae,_e),K.append(ae,W,Y,ce),document.body.appendChild(K)}h?(W.innerText="Preview backend disconnected.",ae.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ae.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,W.innerText="Preview backend running in this workspace."),W.setAttribute("id",B)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function CN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fi())}function IN(){var e;const n=(e=Vd())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function NN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function RN(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function ON(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function DN(){const n=fi();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function MN(){return!IN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function PN(){try{return typeof indexedDB=="object"}catch{return!1}}function LN(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",c=self.indexedDB.open(s);c.onsuccess=()=>{c.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},c.onupgradeneeded=()=>{t=!1},c.onerror=()=>{var h;e(((h=c.error)==null?void 0:h.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN="FirebaseError";class Xa extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=kN,Object.setPrototypeOf(this,Xa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lh.prototype.create)}}class lh{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},c=`${this.service}/${e}`,h=this.errors[e],p=h?BN(h,s):"Error",T=`${this.serviceName}: ${p} (${c}).`;return new Xa(c,T,s)}}function BN(n,e){return n.replace(UN,(t,s)=>{const c=e[s];return c!=null?String(c):`<${s}?>`})}const UN=/\{\$([^}]+)}/g;function VN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Al(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const c of t){if(!s.includes(c))return!1;const h=n[c],p=e[c];if(Jy(h)&&Jy(p)){if(!Al(h,p))return!1}else if(h!==p)return!1}for(const c of s)if(!t.includes(c))return!1;return!0}function Jy(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ch(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(c=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(c))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Mu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[c,h]=s.split("=");e[decodeURIComponent(c)]=decodeURIComponent(h)}}),e}function Pu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function jN(n,e){const t=new FN(n,e);return t.subscribe.bind(t)}class FN{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let c;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");zN(e,["next","error","complete"])?c=e:c={next:e,error:t,complete:s},c.next===void 0&&(c.next=og),c.error===void 0&&(c.error=og),c.complete===void 0&&(c.complete=og);const h=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?c.error(this.finalError):c.complete()}catch{}}),this.observers.push(c),h}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zN(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function og(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(n){return n&&n._delegate?n._delegate:n}class vl{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new AN;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const c=this.getOrInitializeService({instanceIdentifier:t});c&&s.resolve(c)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(c){if(s)return null;throw c}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qN(e))try{this.getOrInitializeService({instanceIdentifier:yl})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(t);try{const h=this.getOrInitializeService({instanceIdentifier:c});s.resolve(h)}catch{}}}}clearInstance(e=yl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=yl){return this.instances.has(e)}getOptions(e=yl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const c=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[h,p]of this.instancesDeferred.entries()){const T=this.normalizeInstanceIdentifier(h);s===T&&p.resolve(c)}return c}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),c=this.onInitCallbacks.get(s)??new Set;c.add(e),this.onInitCallbacks.set(s,c);const h=this.instances.get(s);return h&&e(h,s),()=>{c.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const c of s)try{c(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:GN(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=yl){return this.component?this.component.multipleInstances?e:yl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function GN(n){return n===yl?void 0:n}function qN(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new HN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Xt||(Xt={}));const XN={debug:Xt.DEBUG,verbose:Xt.VERBOSE,info:Xt.INFO,warn:Xt.WARN,error:Xt.ERROR,silent:Xt.SILENT},WN=Xt.INFO,KN={[Xt.DEBUG]:"log",[Xt.VERBOSE]:"log",[Xt.INFO]:"info",[Xt.WARN]:"warn",[Xt.ERROR]:"error"},QN=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),c=KN[e];if(c)console[c](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _m{constructor(e){this.name=e,this._logLevel=WN,this._logHandler=QN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?XN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xt.DEBUG,...e),this._logHandler(this,Xt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xt.VERBOSE,...e),this._logHandler(this,Xt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xt.INFO,...e),this._logHandler(this,Xt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xt.WARN,...e),this._logHandler(this,Xt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xt.ERROR,...e),this._logHandler(this,Xt.ERROR,...e)}}const ZN=(n,e)=>e.some(t=>n instanceof t);let $y,eE;function JN(){return $y||($y=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $N(){return eE||(eE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Nb=new WeakMap,Rg=new WeakMap,Rb=new WeakMap,lg=new WeakMap,wm=new WeakMap;function e4(n){const e=new Promise((t,s)=>{const c=()=>{n.removeEventListener("success",h),n.removeEventListener("error",p)},h=()=>{t(Mo(n.result)),c()},p=()=>{s(n.error),c()};n.addEventListener("success",h),n.addEventListener("error",p)});return e.then(t=>{t instanceof IDBCursor&&Nb.set(t,n)}).catch(()=>{}),wm.set(e,n),e}function t4(n){if(Rg.has(n))return;const e=new Promise((t,s)=>{const c=()=>{n.removeEventListener("complete",h),n.removeEventListener("error",p),n.removeEventListener("abort",p)},h=()=>{t(),c()},p=()=>{s(n.error||new DOMException("AbortError","AbortError")),c()};n.addEventListener("complete",h),n.addEventListener("error",p),n.addEventListener("abort",p)});Rg.set(n,e)}let Og={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Rg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Rb.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Mo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function n4(n){Og=n(Og)}function r4(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(cg(this),e,...t);return Rb.set(s,e.sort?e.sort():[e]),Mo(s)}:$N().includes(n)?function(...e){return n.apply(cg(this),e),Mo(Nb.get(this))}:function(...e){return Mo(n.apply(cg(this),e))}}function i4(n){return typeof n=="function"?r4(n):(n instanceof IDBTransaction&&t4(n),ZN(n,JN())?new Proxy(n,Og):n)}function Mo(n){if(n instanceof IDBRequest)return e4(n);if(lg.has(n))return lg.get(n);const e=i4(n);return e!==n&&(lg.set(n,e),wm.set(e,n)),e}const cg=n=>wm.get(n);function s4(n,e,{blocked:t,upgrade:s,blocking:c,terminated:h}={}){const p=indexedDB.open(n,e),T=Mo(p);return s&&p.addEventListener("upgradeneeded",w=>{s(Mo(p.result),w.oldVersion,w.newVersion,Mo(p.transaction),w)}),t&&p.addEventListener("blocked",w=>t(w.oldVersion,w.newVersion,w)),T.then(w=>{h&&w.addEventListener("close",()=>h()),c&&w.addEventListener("versionchange",E=>c(E.oldVersion,E.newVersion,E))}).catch(()=>{}),T}const a4=["get","getKey","getAll","getAllKeys","count"],o4=["put","add","delete","clear"],ug=new Map;function tE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ug.get(e))return ug.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,c=o4.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(c||a4.includes(t)))return;const h=async function(p,...T){const w=this.transaction(p,c?"readwrite":"readonly");let E=w.store;return s&&(E=E.index(T.shift())),(await Promise.all([E[t](...T),c&&w.done]))[0]};return ug.set(e,h),h}n4(n=>({...n,get:(e,t,s)=>tE(e,t)||n.get(e,t,s),has:(e,t)=>!!tE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(c4(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function c4(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Dg="@firebase/app",nE="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fa=new _m("@firebase/app"),u4="@firebase/app-compat",h4="@firebase/analytics-compat",f4="@firebase/analytics",d4="@firebase/app-check-compat",g4="@firebase/app-check",m4="@firebase/auth",p4="@firebase/auth-compat",x4="@firebase/database",y4="@firebase/data-connect",E4="@firebase/database-compat",_4="@firebase/functions",w4="@firebase/functions-compat",b4="@firebase/installations",A4="@firebase/installations-compat",v4="@firebase/messaging",T4="@firebase/messaging-compat",S4="@firebase/performance",C4="@firebase/performance-compat",I4="@firebase/remote-config",N4="@firebase/remote-config-compat",R4="@firebase/storage",O4="@firebase/storage-compat",D4="@firebase/firestore",M4="@firebase/ai",P4="@firebase/firestore-compat",L4="firebase",k4="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg="[DEFAULT]",B4={[Dg]:"fire-core",[u4]:"fire-core-compat",[f4]:"fire-analytics",[h4]:"fire-analytics-compat",[g4]:"fire-app-check",[d4]:"fire-app-check-compat",[m4]:"fire-auth",[p4]:"fire-auth-compat",[x4]:"fire-rtdb",[y4]:"fire-data-connect",[E4]:"fire-rtdb-compat",[_4]:"fire-fn",[w4]:"fire-fn-compat",[b4]:"fire-iid",[A4]:"fire-iid-compat",[v4]:"fire-fcm",[T4]:"fire-fcm-compat",[S4]:"fire-perf",[C4]:"fire-perf-compat",[I4]:"fire-rc",[N4]:"fire-rc-compat",[R4]:"fire-gcs",[O4]:"fire-gcs-compat",[D4]:"fire-fst",[P4]:"fire-fst-compat",[M4]:"fire-vertex","fire-js":"fire-js",[L4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ld=new Map,U4=new Map,Pg=new Map;function rE(n,e){try{n.container.addComponent(e)}catch(t){Fa.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Sc(n){const e=n.name;if(Pg.has(e))return Fa.debug(`There were multiple attempts to register component ${e}.`),!1;Pg.set(e,n);for(const t of ld.values())rE(t,n);for(const t of U4.values())rE(t,n);return!0}function bm(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Zi(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Po=new lh("app","Firebase",V4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new vl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Po.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vc=k4;function Ob(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:Mg,automaticDataCollectionEnabled:!0,...e},c=s.name;if(typeof c!="string"||!c)throw Po.create("bad-app-name",{appName:String(c)});if(t||(t=Tb()),!t)throw Po.create("no-options");const h=ld.get(c);if(h){if(Al(t,h.options)&&Al(s,h.config))return h;throw Po.create("duplicate-app",{appName:c})}const p=new YN(c);for(const w of Pg.values())p.addComponent(w);const T=new j4(t,s,p);return ld.set(c,T),T}function Db(n=Mg){const e=ld.get(n);if(!e&&n===Mg&&Tb())return Ob();if(!e)throw Po.create("no-app",{appName:n});return e}function Lo(n,e,t){let s=B4[n]??n;t&&(s+=`-${t}`);const c=s.match(/\s|\//),h=e.match(/\s|\//);if(c||h){const p=[`Unable to register library "${s}" with version "${e}":`];c&&p.push(`library name "${s}" contains illegal characters (whitespace or "/")`),c&&h&&p.push("and"),h&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fa.warn(p.join(" "));return}Sc(new vl(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4="firebase-heartbeat-database",z4=1,Ju="firebase-heartbeat-store";let hg=null;function Mb(){return hg||(hg=s4(F4,z4,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ju)}catch(t){console.warn(t)}}}}).catch(n=>{throw Po.create("idb-open",{originalErrorMessage:n.message})})),hg}async function H4(n){try{const t=(await Mb()).transaction(Ju),s=await t.objectStore(Ju).get(Pb(n));return await t.done,s}catch(e){if(e instanceof Xa)Fa.warn(e.message);else{const t=Po.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Fa.warn(t.message)}}}async function iE(n,e){try{const s=(await Mb()).transaction(Ju,"readwrite");await s.objectStore(Ju).put(e,Pb(n)),await s.done}catch(t){if(t instanceof Xa)Fa.warn(t.message);else{const s=Po.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Fa.warn(s.message)}}}function Pb(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4=1024,q4=30;class Y4{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new W4(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const c=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),h=sE();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===h||this._heartbeatsCache.heartbeats.some(p=>p.date===h))return;if(this._heartbeatsCache.heartbeats.push({date:h,agent:c}),this._heartbeatsCache.heartbeats.length>q4){const p=K4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(p,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Fa.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=sE(),{heartbeatsToSend:s,unsentEntries:c}=X4(this._heartbeatsCache.heartbeats),h=od(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,c.length>0?(this._heartbeatsCache.heartbeats=c,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),h}catch(t){return Fa.warn(t),""}}}function sE(){return new Date().toISOString().substring(0,10)}function X4(n,e=G4){const t=[];let s=n.slice();for(const c of n){const h=t.find(p=>p.agent===c.agent);if(h){if(h.dates.push(c.date),aE(t)>e){h.dates.pop();break}}else if(t.push({agent:c.agent,dates:[c.date]}),aE(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class W4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return PN()?LN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await H4(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return iE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return iE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function aE(n){return od(JSON.stringify({version:2,heartbeats:n})).length}function K4(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q4(n){Sc(new vl("platform-logger",e=>new l4(e),"PRIVATE")),Sc(new vl("heartbeat",e=>new Y4(e),"PRIVATE")),Lo(Dg,nE,n),Lo(Dg,nE,"esm2020"),Lo("fire-js","")}Q4("");var oE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ko,Lb;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(F,V){function j(){}j.prototype=V.prototype,F.F=V.prototype,F.prototype=new j,F.prototype.constructor=F,F.D=function(Z,J,$){for(var G=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)G[Qe-2]=arguments[Qe];return V.prototype[J].apply(Z,G)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function c(F,V,j){j||(j=0);const Z=Array(16);if(typeof V=="string")for(var J=0;J<16;++J)Z[J]=V.charCodeAt(j++)|V.charCodeAt(j++)<<8|V.charCodeAt(j++)<<16|V.charCodeAt(j++)<<24;else for(J=0;J<16;++J)Z[J]=V[j++]|V[j++]<<8|V[j++]<<16|V[j++]<<24;V=F.g[0],j=F.g[1],J=F.g[2];let $=F.g[3],G;G=V+($^j&(J^$))+Z[0]+3614090360&4294967295,V=j+(G<<7&4294967295|G>>>25),G=$+(J^V&(j^J))+Z[1]+3905402710&4294967295,$=V+(G<<12&4294967295|G>>>20),G=J+(j^$&(V^j))+Z[2]+606105819&4294967295,J=$+(G<<17&4294967295|G>>>15),G=j+(V^J&($^V))+Z[3]+3250441966&4294967295,j=J+(G<<22&4294967295|G>>>10),G=V+($^j&(J^$))+Z[4]+4118548399&4294967295,V=j+(G<<7&4294967295|G>>>25),G=$+(J^V&(j^J))+Z[5]+1200080426&4294967295,$=V+(G<<12&4294967295|G>>>20),G=J+(j^$&(V^j))+Z[6]+2821735955&4294967295,J=$+(G<<17&4294967295|G>>>15),G=j+(V^J&($^V))+Z[7]+4249261313&4294967295,j=J+(G<<22&4294967295|G>>>10),G=V+($^j&(J^$))+Z[8]+1770035416&4294967295,V=j+(G<<7&4294967295|G>>>25),G=$+(J^V&(j^J))+Z[9]+2336552879&4294967295,$=V+(G<<12&4294967295|G>>>20),G=J+(j^$&(V^j))+Z[10]+4294925233&4294967295,J=$+(G<<17&4294967295|G>>>15),G=j+(V^J&($^V))+Z[11]+2304563134&4294967295,j=J+(G<<22&4294967295|G>>>10),G=V+($^j&(J^$))+Z[12]+1804603682&4294967295,V=j+(G<<7&4294967295|G>>>25),G=$+(J^V&(j^J))+Z[13]+4254626195&4294967295,$=V+(G<<12&4294967295|G>>>20),G=J+(j^$&(V^j))+Z[14]+2792965006&4294967295,J=$+(G<<17&4294967295|G>>>15),G=j+(V^J&($^V))+Z[15]+1236535329&4294967295,j=J+(G<<22&4294967295|G>>>10),G=V+(J^$&(j^J))+Z[1]+4129170786&4294967295,V=j+(G<<5&4294967295|G>>>27),G=$+(j^J&(V^j))+Z[6]+3225465664&4294967295,$=V+(G<<9&4294967295|G>>>23),G=J+(V^j&($^V))+Z[11]+643717713&4294967295,J=$+(G<<14&4294967295|G>>>18),G=j+($^V&(J^$))+Z[0]+3921069994&4294967295,j=J+(G<<20&4294967295|G>>>12),G=V+(J^$&(j^J))+Z[5]+3593408605&4294967295,V=j+(G<<5&4294967295|G>>>27),G=$+(j^J&(V^j))+Z[10]+38016083&4294967295,$=V+(G<<9&4294967295|G>>>23),G=J+(V^j&($^V))+Z[15]+3634488961&4294967295,J=$+(G<<14&4294967295|G>>>18),G=j+($^V&(J^$))+Z[4]+3889429448&4294967295,j=J+(G<<20&4294967295|G>>>12),G=V+(J^$&(j^J))+Z[9]+568446438&4294967295,V=j+(G<<5&4294967295|G>>>27),G=$+(j^J&(V^j))+Z[14]+3275163606&4294967295,$=V+(G<<9&4294967295|G>>>23),G=J+(V^j&($^V))+Z[3]+4107603335&4294967295,J=$+(G<<14&4294967295|G>>>18),G=j+($^V&(J^$))+Z[8]+1163531501&4294967295,j=J+(G<<20&4294967295|G>>>12),G=V+(J^$&(j^J))+Z[13]+2850285829&4294967295,V=j+(G<<5&4294967295|G>>>27),G=$+(j^J&(V^j))+Z[2]+4243563512&4294967295,$=V+(G<<9&4294967295|G>>>23),G=J+(V^j&($^V))+Z[7]+1735328473&4294967295,J=$+(G<<14&4294967295|G>>>18),G=j+($^V&(J^$))+Z[12]+2368359562&4294967295,j=J+(G<<20&4294967295|G>>>12),G=V+(j^J^$)+Z[5]+4294588738&4294967295,V=j+(G<<4&4294967295|G>>>28),G=$+(V^j^J)+Z[8]+2272392833&4294967295,$=V+(G<<11&4294967295|G>>>21),G=J+($^V^j)+Z[11]+1839030562&4294967295,J=$+(G<<16&4294967295|G>>>16),G=j+(J^$^V)+Z[14]+4259657740&4294967295,j=J+(G<<23&4294967295|G>>>9),G=V+(j^J^$)+Z[1]+2763975236&4294967295,V=j+(G<<4&4294967295|G>>>28),G=$+(V^j^J)+Z[4]+1272893353&4294967295,$=V+(G<<11&4294967295|G>>>21),G=J+($^V^j)+Z[7]+4139469664&4294967295,J=$+(G<<16&4294967295|G>>>16),G=j+(J^$^V)+Z[10]+3200236656&4294967295,j=J+(G<<23&4294967295|G>>>9),G=V+(j^J^$)+Z[13]+681279174&4294967295,V=j+(G<<4&4294967295|G>>>28),G=$+(V^j^J)+Z[0]+3936430074&4294967295,$=V+(G<<11&4294967295|G>>>21),G=J+($^V^j)+Z[3]+3572445317&4294967295,J=$+(G<<16&4294967295|G>>>16),G=j+(J^$^V)+Z[6]+76029189&4294967295,j=J+(G<<23&4294967295|G>>>9),G=V+(j^J^$)+Z[9]+3654602809&4294967295,V=j+(G<<4&4294967295|G>>>28),G=$+(V^j^J)+Z[12]+3873151461&4294967295,$=V+(G<<11&4294967295|G>>>21),G=J+($^V^j)+Z[15]+530742520&4294967295,J=$+(G<<16&4294967295|G>>>16),G=j+(J^$^V)+Z[2]+3299628645&4294967295,j=J+(G<<23&4294967295|G>>>9),G=V+(J^(j|~$))+Z[0]+4096336452&4294967295,V=j+(G<<6&4294967295|G>>>26),G=$+(j^(V|~J))+Z[7]+1126891415&4294967295,$=V+(G<<10&4294967295|G>>>22),G=J+(V^($|~j))+Z[14]+2878612391&4294967295,J=$+(G<<15&4294967295|G>>>17),G=j+($^(J|~V))+Z[5]+4237533241&4294967295,j=J+(G<<21&4294967295|G>>>11),G=V+(J^(j|~$))+Z[12]+1700485571&4294967295,V=j+(G<<6&4294967295|G>>>26),G=$+(j^(V|~J))+Z[3]+2399980690&4294967295,$=V+(G<<10&4294967295|G>>>22),G=J+(V^($|~j))+Z[10]+4293915773&4294967295,J=$+(G<<15&4294967295|G>>>17),G=j+($^(J|~V))+Z[1]+2240044497&4294967295,j=J+(G<<21&4294967295|G>>>11),G=V+(J^(j|~$))+Z[8]+1873313359&4294967295,V=j+(G<<6&4294967295|G>>>26),G=$+(j^(V|~J))+Z[15]+4264355552&4294967295,$=V+(G<<10&4294967295|G>>>22),G=J+(V^($|~j))+Z[6]+2734768916&4294967295,J=$+(G<<15&4294967295|G>>>17),G=j+($^(J|~V))+Z[13]+1309151649&4294967295,j=J+(G<<21&4294967295|G>>>11),G=V+(J^(j|~$))+Z[4]+4149444226&4294967295,V=j+(G<<6&4294967295|G>>>26),G=$+(j^(V|~J))+Z[11]+3174756917&4294967295,$=V+(G<<10&4294967295|G>>>22),G=J+(V^($|~j))+Z[2]+718787259&4294967295,J=$+(G<<15&4294967295|G>>>17),G=j+($^(J|~V))+Z[9]+3951481745&4294967295,F.g[0]=F.g[0]+V&4294967295,F.g[1]=F.g[1]+(J+(G<<21&4294967295|G>>>11))&4294967295,F.g[2]=F.g[2]+J&4294967295,F.g[3]=F.g[3]+$&4294967295}s.prototype.v=function(F,V){V===void 0&&(V=F.length);const j=V-this.blockSize,Z=this.C;let J=this.h,$=0;for(;$<V;){if(J==0)for(;$<=j;)c(this,F,$),$+=this.blockSize;if(typeof F=="string"){for(;$<V;)if(Z[J++]=F.charCodeAt($++),J==this.blockSize){c(this,Z),J=0;break}}else for(;$<V;)if(Z[J++]=F[$++],J==this.blockSize){c(this,Z),J=0;break}}this.h=J,this.o+=V},s.prototype.A=function(){var F=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);F[0]=128;for(var V=1;V<F.length-8;++V)F[V]=0;V=this.o*8;for(var j=F.length-8;j<F.length;++j)F[j]=V&255,V/=256;for(this.v(F),F=Array(16),V=0,j=0;j<4;++j)for(let Z=0;Z<32;Z+=8)F[V++]=this.g[j]>>>Z&255;return F};function h(F,V){var j=T;return Object.prototype.hasOwnProperty.call(j,F)?j[F]:j[F]=V(F)}function p(F,V){this.h=V;const j=[];let Z=!0;for(let J=F.length-1;J>=0;J--){const $=F[J]|0;Z&&$==V||(j[J]=$,Z=!1)}this.g=j}var T={};function w(F){return-128<=F&&F<128?h(F,function(V){return new p([V|0],V<0?-1:0)}):new p([F|0],F<0?-1:0)}function E(F){if(isNaN(F)||!isFinite(F))return I;if(F<0)return Y(E(-F));const V=[];let j=1;for(let Z=0;F>=j;Z++)V[Z]=F/j|0,j*=4294967296;return new p(V,0)}function C(F,V){if(F.length==0)throw Error("number format error: empty string");if(V=V||10,V<2||36<V)throw Error("radix out of range: "+V);if(F.charAt(0)=="-")return Y(C(F.substring(1),V));if(F.indexOf("-")>=0)throw Error('number format error: interior "-" character');const j=E(Math.pow(V,8));let Z=I;for(let $=0;$<F.length;$+=8){var J=Math.min(8,F.length-$);const G=parseInt(F.substring($,$+J),V);J<8?(J=E(Math.pow(V,J)),Z=Z.j(J).add(E(G))):(Z=Z.j(j),Z=Z.add(E(G)))}return Z}var I=w(0),M=w(1),B=w(16777216);n=p.prototype,n.m=function(){if(Q(this))return-Y(this).m();let F=0,V=1;for(let j=0;j<this.g.length;j++){const Z=this.i(j);F+=(Z>=0?Z:4294967296+Z)*V,V*=4294967296}return F},n.toString=function(F){if(F=F||10,F<2||36<F)throw Error("radix out of range: "+F);if(W(this))return"0";if(Q(this))return"-"+Y(this).toString(F);const V=E(Math.pow(F,6));var j=this;let Z="";for(;;){const J=ce(j,V).g;j=_e(j,J.j(V));let $=((j.g.length>0?j.g[0]:j.h)>>>0).toString(F);if(j=J,W(j))return $+Z;for(;$.length<6;)$="0"+$;Z=$+Z}},n.i=function(F){return F<0?0:F<this.g.length?this.g[F]:this.h};function W(F){if(F.h!=0)return!1;for(let V=0;V<F.g.length;V++)if(F.g[V]!=0)return!1;return!0}function Q(F){return F.h==-1}n.l=function(F){return F=_e(this,F),Q(F)?-1:W(F)?0:1};function Y(F){const V=F.g.length,j=[];for(let Z=0;Z<V;Z++)j[Z]=~F.g[Z];return new p(j,~F.h).add(M)}n.abs=function(){return Q(this)?Y(this):this},n.add=function(F){const V=Math.max(this.g.length,F.g.length),j=[];let Z=0;for(let J=0;J<=V;J++){let $=Z+(this.i(J)&65535)+(F.i(J)&65535),G=($>>>16)+(this.i(J)>>>16)+(F.i(J)>>>16);Z=G>>>16,$&=65535,G&=65535,j[J]=G<<16|$}return new p(j,j[j.length-1]&-2147483648?-1:0)};function _e(F,V){return F.add(Y(V))}n.j=function(F){if(W(this)||W(F))return I;if(Q(this))return Q(F)?Y(this).j(Y(F)):Y(Y(this).j(F));if(Q(F))return Y(this.j(Y(F)));if(this.l(B)<0&&F.l(B)<0)return E(this.m()*F.m());const V=this.g.length+F.g.length,j=[];for(var Z=0;Z<2*V;Z++)j[Z]=0;for(Z=0;Z<this.g.length;Z++)for(let J=0;J<F.g.length;J++){const $=this.i(Z)>>>16,G=this.i(Z)&65535,Qe=F.i(J)>>>16,fe=F.i(J)&65535;j[2*Z+2*J]+=G*fe,ae(j,2*Z+2*J),j[2*Z+2*J+1]+=$*fe,ae(j,2*Z+2*J+1),j[2*Z+2*J+1]+=G*Qe,ae(j,2*Z+2*J+1),j[2*Z+2*J+2]+=$*Qe,ae(j,2*Z+2*J+2)}for(F=0;F<V;F++)j[F]=j[2*F+1]<<16|j[2*F];for(F=V;F<2*V;F++)j[F]=0;return new p(j,0)};function ae(F,V){for(;(F[V]&65535)!=F[V];)F[V+1]+=F[V]>>>16,F[V]&=65535,V++}function K(F,V){this.g=F,this.h=V}function ce(F,V){if(W(V))throw Error("division by zero");if(W(F))return new K(I,I);if(Q(F))return V=ce(Y(F),V),new K(Y(V.g),Y(V.h));if(Q(V))return V=ce(F,Y(V)),new K(Y(V.g),V.h);if(F.g.length>30){if(Q(F)||Q(V))throw Error("slowDivide_ only works with positive integers.");for(var j=M,Z=V;Z.l(F)<=0;)j=Re(j),Z=Re(Z);var J=De(j,1),$=De(Z,1);for(Z=De(Z,2),j=De(j,2);!W(Z);){var G=$.add(Z);G.l(F)<=0&&(J=J.add(j),$=G),Z=De(Z,1),j=De(j,1)}return V=_e(F,J.j(V)),new K(J,V)}for(J=I;F.l(V)>=0;){for(j=Math.max(1,Math.floor(F.m()/V.m())),Z=Math.ceil(Math.log(j)/Math.LN2),Z=Z<=48?1:Math.pow(2,Z-48),$=E(j),G=$.j(V);Q(G)||G.l(F)>0;)j-=Z,$=E(j),G=$.j(V);W($)&&($=M),J=J.add($),F=_e(F,G)}return new K(J,F)}n.B=function(F){return ce(this,F).h},n.and=function(F){const V=Math.max(this.g.length,F.g.length),j=[];for(let Z=0;Z<V;Z++)j[Z]=this.i(Z)&F.i(Z);return new p(j,this.h&F.h)},n.or=function(F){const V=Math.max(this.g.length,F.g.length),j=[];for(let Z=0;Z<V;Z++)j[Z]=this.i(Z)|F.i(Z);return new p(j,this.h|F.h)},n.xor=function(F){const V=Math.max(this.g.length,F.g.length),j=[];for(let Z=0;Z<V;Z++)j[Z]=this.i(Z)^F.i(Z);return new p(j,this.h^F.h)};function Re(F){const V=F.g.length+1,j=[];for(let Z=0;Z<V;Z++)j[Z]=F.i(Z)<<1|F.i(Z-1)>>>31;return new p(j,F.h)}function De(F,V){const j=V>>5;V%=32;const Z=F.g.length-j,J=[];for(let $=0;$<Z;$++)J[$]=V>0?F.i($+j)>>>V|F.i($+j+1)<<32-V:F.i($+j);return new p(J,F.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Lb=s,p.prototype.add=p.prototype.add,p.prototype.multiply=p.prototype.j,p.prototype.modulo=p.prototype.B,p.prototype.compare=p.prototype.l,p.prototype.toNumber=p.prototype.m,p.prototype.toString=p.prototype.toString,p.prototype.getBits=p.prototype.i,p.fromNumber=E,p.fromString=C,ko=p}).apply(typeof oE<"u"?oE:typeof self<"u"?self:typeof window<"u"?window:{});var Of=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kb,Lu,Bb,Yf,Lg,Ub,Vb,jb;(function(){var n,e=Object.defineProperty;function t(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof Of=="object"&&Of];for(var N=0;N<x.length;++N){var D=x[N];if(D&&D.Math==Math)return D}throw Error("Cannot find global object")}var s=t(this);function c(x,N){if(N)e:{var D=s;x=x.split(".");for(var z=0;z<x.length-1;z++){var ue=x[z];if(!(ue in D))break e;D=D[ue]}x=x[x.length-1],z=D[x],N=N(z),N!=z&&N!=null&&e(D,x,{configurable:!0,writable:!0,value:N})}}c("Symbol.dispose",function(x){return x||Symbol("Symbol.dispose")}),c("Array.prototype.values",function(x){return x||function(){return this[Symbol.iterator]()}}),c("Object.entries",function(x){return x||function(N){var D=[],z;for(z in N)Object.prototype.hasOwnProperty.call(N,z)&&D.push([z,N[z]]);return D}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},p=this||self;function T(x){var N=typeof x;return N=="object"&&x!=null||N=="function"}function w(x,N,D){return x.call.apply(x.bind,arguments)}function E(x,N,D){return E=w,E.apply(null,arguments)}function C(x,N){var D=Array.prototype.slice.call(arguments,1);return function(){var z=D.slice();return z.push.apply(z,arguments),x.apply(this,z)}}function I(x,N){function D(){}D.prototype=N.prototype,x.Z=N.prototype,x.prototype=new D,x.prototype.constructor=x,x.Ob=function(z,ue,Ee){for(var Ve=Array(arguments.length-2),pt=2;pt<arguments.length;pt++)Ve[pt-2]=arguments[pt];return N.prototype[ue].apply(z,Ve)}}var M=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?x=>x&&AsyncContext.Snapshot.wrap(x):x=>x;function B(x){const N=x.length;if(N>0){const D=Array(N);for(let z=0;z<N;z++)D[z]=x[z];return D}return[]}function W(x,N){for(let z=1;z<arguments.length;z++){const ue=arguments[z];var D=typeof ue;if(D=D!="object"?D:ue?Array.isArray(ue)?"array":D:"null",D=="array"||D=="object"&&typeof ue.length=="number"){D=x.length||0;const Ee=ue.length||0;x.length=D+Ee;for(let Ve=0;Ve<Ee;Ve++)x[D+Ve]=ue[Ve]}else x.push(ue)}}class Q{constructor(N,D){this.i=N,this.j=D,this.h=0,this.g=null}get(){let N;return this.h>0?(this.h--,N=this.g,this.g=N.next,N.next=null):N=this.i(),N}}function Y(x){p.setTimeout(()=>{throw x},0)}function _e(){var x=F;let N=null;return x.g&&(N=x.g,x.g=x.g.next,x.g||(x.h=null),N.next=null),N}class ae{constructor(){this.h=this.g=null}add(N,D){const z=K.get();z.set(N,D),this.h?this.h.next=z:this.g=z,this.h=z}}var K=new Q(()=>new ce,x=>x.reset());class ce{constructor(){this.next=this.g=this.h=null}set(N,D){this.h=N,this.g=D,this.next=null}reset(){this.next=this.g=this.h=null}}let Re,De=!1,F=new ae,V=()=>{const x=Promise.resolve(void 0);Re=()=>{x.then(j)}};function j(){for(var x;x=_e();){try{x.h.call(x.g)}catch(D){Y(D)}var N=K;N.j(x),N.h<100&&(N.h++,x.next=N.g,N.g=x)}De=!1}function Z(){this.u=this.u,this.C=this.C}Z.prototype.u=!1,Z.prototype.dispose=function(){this.u||(this.u=!0,this.N())},Z.prototype[Symbol.dispose]=function(){this.dispose()},Z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function J(x,N){this.type=x,this.g=this.target=N,this.defaultPrevented=!1}J.prototype.h=function(){this.defaultPrevented=!0};var $=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var x=!1,N=Object.defineProperty({},"passive",{get:function(){x=!0}});try{const D=()=>{};p.addEventListener("test",D,N),p.removeEventListener("test",D,N)}catch{}return x})();function G(x){return/^[\s\xa0]*$/.test(x)}function Qe(x,N){J.call(this,x?x.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,x&&this.init(x,N)}I(Qe,J),Qe.prototype.init=function(x,N){const D=this.type=x.type,z=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:null;this.target=x.target||x.srcElement,this.g=N,N=x.relatedTarget,N||(D=="mouseover"?N=x.fromElement:D=="mouseout"&&(N=x.toElement)),this.relatedTarget=N,z?(this.clientX=z.clientX!==void 0?z.clientX:z.pageX,this.clientY=z.clientY!==void 0?z.clientY:z.pageY,this.screenX=z.screenX||0,this.screenY=z.screenY||0):(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0),this.button=x.button,this.key=x.key||"",this.ctrlKey=x.ctrlKey,this.altKey=x.altKey,this.shiftKey=x.shiftKey,this.metaKey=x.metaKey,this.pointerId=x.pointerId||0,this.pointerType=x.pointerType,this.state=x.state,this.i=x,x.defaultPrevented&&Qe.Z.h.call(this)},Qe.prototype.h=function(){Qe.Z.h.call(this);const x=this.i;x.preventDefault?x.preventDefault():x.returnValue=!1};var fe="closure_listenable_"+(Math.random()*1e6|0),pe=0;function ve(x,N,D,z,ue){this.listener=x,this.proxy=null,this.src=N,this.type=D,this.capture=!!z,this.ha=ue,this.key=++pe,this.da=this.fa=!1}function Xe(x){x.da=!0,x.listener=null,x.proxy=null,x.src=null,x.ha=null}function dt(x,N,D){for(const z in x)N.call(D,x[z],z,x)}function gt(x,N){for(const D in x)N.call(void 0,x[D],D,x)}function ie(x){const N={};for(const D in x)N[D]=x[D];return N}const be="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function je(x,N){let D,z;for(let ue=1;ue<arguments.length;ue++){z=arguments[ue];for(D in z)x[D]=z[D];for(let Ee=0;Ee<be.length;Ee++)D=be[Ee],Object.prototype.hasOwnProperty.call(z,D)&&(x[D]=z[D])}}function Fe(x){this.src=x,this.g={},this.h=0}Fe.prototype.add=function(x,N,D,z,ue){const Ee=x.toString();x=this.g[Ee],x||(x=this.g[Ee]=[],this.h++);const Ve=Be(x,N,z,ue);return Ve>-1?(N=x[Ve],D||(N.fa=!1)):(N=new ve(N,this.src,Ee,!!z,ue),N.fa=D,x.push(N)),N};function $e(x,N){const D=N.type;if(D in x.g){var z=x.g[D],ue=Array.prototype.indexOf.call(z,N,void 0),Ee;(Ee=ue>=0)&&Array.prototype.splice.call(z,ue,1),Ee&&(Xe(N),x.g[D].length==0&&(delete x.g[D],x.h--))}}function Be(x,N,D,z){for(let ue=0;ue<x.length;++ue){const Ee=x[ue];if(!Ee.da&&Ee.listener==N&&Ee.capture==!!D&&Ee.ha==z)return ue}return-1}var Ct="closure_lm_"+(Math.random()*1e6|0),mt={};function Qt(x,N,D,z,ue){if(Array.isArray(N)){for(let Ee=0;Ee<N.length;Ee++)Qt(x,N[Ee],D,z,ue);return null}return D=Zt(D),x&&x[fe]?x.J(N,D,T(z)?!!z.capture:!1,ue):$r(x,N,D,!1,z,ue)}function $r(x,N,D,z,ue,Ee){if(!N)throw Error("Invalid event type");const Ve=T(ue)?!!ue.capture:!!ue;let pt=ei(x);if(pt||(x[Ct]=pt=new Fe(x)),D=pt.add(N,D,z,Ve,Ee),D.proxy)return D;if(z=Mn(),D.proxy=z,z.src=x,z.listener=D,x.addEventListener)$||(ue=Ve),ue===void 0&&(ue=!1),x.addEventListener(N.toString(),z,ue);else if(x.attachEvent)x.attachEvent(gr(N.toString()),z);else if(x.addListener&&x.removeListener)x.addListener(z);else throw Error("addEventListener and attachEvent are unavailable.");return D}function Mn(){function x(D){return N.call(x.src,x.listener,D)}const N=Sr;return x}function Ai(x,N,D,z,ue){if(Array.isArray(N))for(var Ee=0;Ee<N.length;Ee++)Ai(x,N[Ee],D,z,ue);else z=T(z)?!!z.capture:!!z,D=Zt(D),x&&x[fe]?(x=x.i,Ee=String(N).toString(),Ee in x.g&&(N=x.g[Ee],D=Be(N,D,z,ue),D>-1&&(Xe(N[D]),Array.prototype.splice.call(N,D,1),N.length==0&&(delete x.g[Ee],x.h--)))):x&&(x=ei(x))&&(N=x.g[N.toString()],x=-1,N&&(x=Be(N,D,z,ue)),(D=x>-1?N[x]:null)&&bt(D))}function bt(x){if(typeof x!="number"&&x&&!x.da){var N=x.src;if(N&&N[fe])$e(N.i,x);else{var D=x.type,z=x.proxy;N.removeEventListener?N.removeEventListener(D,z,x.capture):N.detachEvent?N.detachEvent(gr(D),z):N.addListener&&N.removeListener&&N.removeListener(z),(D=ei(N))?($e(D,x),D.h==0&&(D.src=null,N[Ct]=null)):Xe(x)}}}function gr(x){return x in mt?mt[x]:mt[x]="on"+x}function Sr(x,N){if(x.da)x=!0;else{N=new Qe(N,this);const D=x.listener,z=x.ha||x.src;x.fa&&bt(x),x=D.call(z,N)}return x}function ei(x){return x=x[Ct],x instanceof Fe?x:null}var An="__closure_events_fn_"+(Math.random()*1e9>>>0);function Zt(x){return typeof x=="function"?x:(x[An]||(x[An]=function(N){return x.handleEvent(N)}),x[An])}function et(){Z.call(this),this.i=new Fe(this),this.M=this,this.G=null}I(et,Z),et.prototype[fe]=!0,et.prototype.removeEventListener=function(x,N,D,z){Ai(this,x,N,D,z)};function pn(x,N){var D,z=x.G;if(z)for(D=[];z;z=z.G)D.push(z);if(x=x.M,z=N.type||N,typeof N=="string")N=new J(N,x);else if(N instanceof J)N.target=N.target||x;else{var ue=N;N=new J(z,x),je(N,ue)}ue=!0;let Ee,Ve;if(D)for(Ve=D.length-1;Ve>=0;Ve--)Ee=N.g=D[Ve],ue=ze(Ee,z,!0,N)&&ue;if(Ee=N.g=x,ue=ze(Ee,z,!0,N)&&ue,ue=ze(Ee,z,!1,N)&&ue,D)for(Ve=0;Ve<D.length;Ve++)Ee=N.g=D[Ve],ue=ze(Ee,z,!1,N)&&ue}et.prototype.N=function(){if(et.Z.N.call(this),this.i){var x=this.i;for(const N in x.g){const D=x.g[N];for(let z=0;z<D.length;z++)Xe(D[z]);delete x.g[N],x.h--}}this.G=null},et.prototype.J=function(x,N,D,z){return this.i.add(String(x),N,!1,D,z)},et.prototype.K=function(x,N,D,z){return this.i.add(String(x),N,!0,D,z)};function ze(x,N,D,z){if(N=x.i.g[String(N)],!N)return!0;N=N.concat();let ue=!0;for(let Ee=0;Ee<N.length;++Ee){const Ve=N[Ee];if(Ve&&!Ve.da&&Ve.capture==D){const pt=Ve.listener,Gn=Ve.ha||Ve.src;Ve.fa&&$e(x.i,Ve),ue=pt.call(Gn,z)!==!1&&ue}}return ue&&!z.defaultPrevented}function is(x,N){if(typeof x!="function")if(x&&typeof x.handleEvent=="function")x=E(x.handleEvent,x);else throw Error("Invalid listener argument");return Number(N)>2147483647?-1:p.setTimeout(x,N||0)}function ss(x){x.g=is(()=>{x.g=null,x.i&&(x.i=!1,ss(x))},x.l);const N=x.h;x.h=null,x.m.apply(null,N)}class xn extends Z{constructor(N,D){super(),this.m=N,this.l=D,this.h=null,this.i=!1,this.g=null}j(N){this.h=arguments,this.g?this.i=!0:ss(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ti(x){Z.call(this),this.h=x,this.g={}}I(ti,Z);var mr=[];function as(x){dt(x.g,function(N,D){this.g.hasOwnProperty(D)&&bt(N)},x),x.g={}}ti.prototype.N=function(){ti.Z.N.call(this),as(this)},ti.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pr=p.JSON.stringify,Pn=p.JSON.parse,Ls=class{stringify(x){return p.JSON.stringify(x,void 0)}parse(x){return p.JSON.parse(x,void 0)}};function vi(){}function ia(){}var kt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Le(){J.call(this,"d")}I(Le,J);function zt(){J.call(this,"c")}I(zt,J);var ot={},Jt=null;function ni(){return Jt=Jt||new et}ot.Ia="serverreachability";function As(x){J.call(this,ot.Ia,x)}I(As,J);function ri(x){const N=ni();pn(N,new As(N))}ot.STAT_EVENT="statevent";function At(x,N){J.call(this,ot.STAT_EVENT,x),this.stat=N}I(At,J);function ln(x){const N=ni();pn(N,new At(N,x))}ot.Ja="timingevent";function ii(x,N){J.call(this,ot.Ja,x),this.size=N}I(ii,J);function Fr(x,N){if(typeof x!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){x()},N)}function Nn(){this.g=!0}Nn.prototype.ua=function(){this.g=!1};function ks(x,N,D,z,ue,Ee){x.info(function(){if(x.g)if(Ee){var Ve="",pt=Ee.split("&");for(let $t=0;$t<pt.length;$t++){var Gn=pt[$t].split("=");if(Gn.length>1){const Cn=Gn[0];Gn=Gn[1];const mi=Cn.split("_");Ve=mi.length>=2&&mi[1]=="type"?Ve+(Cn+"="+Gn+"&"):Ve+(Cn+"=redacted&")}}}else Ve=null;else Ve=Ee;return"XMLHTTP REQ ("+z+") [attempt "+ue+"]: "+N+`
`+D+`
`+Ve})}function Fn(x,N,D,z,ue,Ee,Ve){x.info(function(){return"XMLHTTP RESP ("+z+") [ attempt "+ue+"]: "+N+`
`+D+`
`+Ee+" "+Ve})}function sr(x,N,D,z){x.info(function(){return"XMLHTTP TEXT ("+N+"): "+Lr(x,D)+(z?" "+z:"")})}function zr(x,N){x.info(function(){return"TIMEOUT: "+N})}Nn.prototype.info=function(){};function Lr(x,N){if(!x.g)return N;if(!N)return null;try{const Ee=JSON.parse(N);if(Ee){for(x=0;x<Ee.length;x++)if(Array.isArray(Ee[x])){var D=Ee[x];if(!(D.length<2)){var z=D[1];if(Array.isArray(z)&&!(z.length<1)){var ue=z[0];if(ue!="noop"&&ue!="stop"&&ue!="close")for(let Ve=1;Ve<z.length;Ve++)z[Ve]=""}}}}return pr(Ee)}catch{return N}}var si={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},xr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Bi;function Rn(){}I(Rn,vi),Rn.prototype.g=function(){return new XMLHttpRequest},Bi=new Rn;function ar(x){return encodeURIComponent(String(x))}function or(x){var N=1;x=x.split(":");const D=[];for(;N>0&&x.length;)D.push(x.shift()),N--;return x.length&&D.push(x.join(":")),D}function He(x,N,D,z){this.j=x,this.i=N,this.l=D,this.S=z||1,this.V=new ti(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Jn}function Jn(){this.i=null,this.g="",this.h=!1}var Dt={},Bt={};function lr(x,N,D){x.M=1,x.A=Rr(Dn(N)),x.u=D,x.R=!0,Ti(x,null)}function Ti(x,N){x.F=Date.now(),Si(x),x.B=Dn(x.A);var D=x.B,z=x.S;Array.isArray(z)||(z=[String(z)]),un(D.i,"t",z),x.C=0,D=x.j.L,x.h=new Jn,x.g=eo(x.j,D?N:null,!x.u),x.P>0&&(x.O=new xn(E(x.Y,x,x.g),x.P)),N=x.V,D=x.g,z=x.ba;var ue="readystatechange";Array.isArray(ue)||(ue&&(mr[0]=ue.toString()),ue=mr);for(let Ee=0;Ee<ue.length;Ee++){const Ve=Qt(D,ue[Ee],z||N.handleEvent,!1,N.h||N);if(!Ve)break;N.g[Ve.key]=Ve}N=x.J?ie(x.J):{},x.u?(x.v||(x.v="POST"),N["Content-Type"]="application/x-www-form-urlencoded",x.g.ea(x.B,x.v,x.u,N)):(x.v="GET",x.g.ea(x.B,x.v,null,N)),ri(),ks(x.i,x.v,x.B,x.l,x.S,x.u)}He.prototype.ba=function(x){x=x.target;const N=this.O;N&&Ii(x)==3?N.j():this.Y(x)},He.prototype.Y=function(x){try{if(x==this.g)e:{const pt=Ii(this.g),Gn=this.g.ya(),$t=this.g.ca();if(!(pt<3)&&(pt!=3||this.g&&(this.h.h||this.g.la()||Wn(this.g)))){this.K||pt!=4||Gn==7||(Gn==8||$t<=0?ri(3):ri(2)),yn(this);var N=this.g.ca();this.X=N;var D=vs(this);if(this.o=N==200,Fn(this.i,this.v,this.B,this.l,this.S,pt,N),this.o){if(this.U&&!this.L){t:{if(this.g){var z,ue=this.g;if((z=ue.g?ue.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(z)){var Ee=z;break t}}Ee=null}if(x=Ee)sr(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,cr(this,x);else{this.o=!1,this.m=3,ln(12),kr(this),Nt(this);break e}}if(this.R){x=!0;let Cn;for(;!this.K&&this.C<D.length;)if(Cn=Qa(this,D),Cn==Bt){pt==4&&(this.m=4,ln(14),x=!1),sr(this.i,this.l,null,"[Incomplete Response]");break}else if(Cn==Dt){this.m=4,ln(15),sr(this.i,this.l,D,"[Invalid Chunk]"),x=!1;break}else sr(this.i,this.l,Cn,null),cr(this,Cn);if(Hr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pt!=4||D.length!=0||this.h.h||(this.m=1,ln(16),x=!1),this.o=this.o&&x,!x)sr(this.i,this.l,D,"[Invalid Chunked Response]"),kr(this),Nt(this);else if(D.length>0&&!this.W){this.W=!0;var Ve=this.j;Ve.g==this&&Ve.aa&&!Ve.P&&(Ve.j.info("Great, no buffering proxy detected. Bytes received: "+D.length),xe(Ve),Ve.P=!0,ln(11))}}else sr(this.i,this.l,D,null),cr(this,D);pt==4&&kr(this),this.o&&!this.K&&(pt==4?da(this.j,this):(this.o=!1,Si(this)))}else gi(this.g),N==400&&D.indexOf("Unknown SID")>0?(this.m=3,ln(12)):(this.m=0,ln(13)),kr(this),Nt(this)}}}catch{}finally{}};function vs(x){if(!Hr(x))return x.g.la();const N=Wn(x.g);if(N==="")return"";let D="";const z=N.length,ue=Ii(x.g)==4;if(!x.h.i){if(typeof TextDecoder>"u")return kr(x),Nt(x),"";x.h.i=new p.TextDecoder}for(let Ee=0;Ee<z;Ee++)x.h.h=!0,D+=x.h.i.decode(N[Ee],{stream:!(ue&&Ee==z-1)});return N.length=0,x.h.g+=D,x.C=0,x.h.g}function Hr(x){return x.g?x.v=="GET"&&x.M!=2&&x.j.Aa:!1}function Qa(x,N){var D=x.C,z=N.indexOf(`
`,D);return z==-1?Bt:(D=Number(N.substring(D,z)),isNaN(D)?Dt:(z+=1,z+D>N.length?Bt:(N=N.slice(z,z+D),x.C=z+D,N)))}He.prototype.cancel=function(){this.K=!0,kr(this)};function Si(x){x.T=Date.now()+x.H,yr(x,x.H)}function yr(x,N){if(x.D!=null)throw Error("WatchDog timer not null");x.D=Fr(E(x.aa,x),N)}function yn(x){x.D&&(p.clearTimeout(x.D),x.D=null)}He.prototype.aa=function(){this.D=null;const x=Date.now();x-this.T>=0?(zr(this.i,this.B),this.M!=2&&(ri(),ln(17)),kr(this),this.m=2,Nt(this)):yr(this,this.T-x)};function Nt(x){x.j.I==0||x.K||da(x.j,x)}function kr(x){yn(x);var N=x.O;N&&typeof N.dispose=="function"&&N.dispose(),x.O=null,as(x.V),x.g&&(N=x.g,x.g=null,N.abort(),N.dispose())}function cr(x,N){try{var D=x.j;if(D.I!=0&&(D.g==x||Cr(D.h,x))){if(!x.L&&Cr(D.h,x)&&D.I==3){try{var z=D.Ba.g.parse(N)}catch{z=null}if(Array.isArray(z)&&z.length==3){var ue=z;if(ue[0]==0){e:if(!D.v){if(D.g)if(D.g.F+3e3<x.F)zn(D),Is(D);else break e;fa(D),ln(18)}}else D.xa=ue[1],0<D.xa-D.K&&ue[2]<37500&&D.F&&D.A==0&&!D.C&&(D.C=Fr(E(D.Va,D),6e3));Ht(D.h)<=1&&D.ta&&(D.ta=void 0)}else cs(D,11)}else if((x.L||D.g==x)&&zn(D),!G(N))for(ue=D.Ba.g.parse(N),N=0;N<ue.length;N++){let $t=ue[N];const Cn=$t[0];if(!(Cn<=D.K))if(D.K=Cn,$t=$t[1],D.I==2)if($t[0]=="c"){D.M=$t[1],D.ba=$t[2];const mi=$t[3];mi!=null&&(D.ka=mi,D.j.info("VER="+D.ka));const fs=$t[4];fs!=null&&(D.za=fs,D.j.info("SVER="+D.za));const Br=$t[5];Br!=null&&typeof Br=="number"&&Br>0&&(z=1.5*Br,D.O=z,D.j.info("backChannelRequestTimeoutMs_="+z)),z=D;const pi=x.g;if(pi){const ma=pi.g?pi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ma){var Ee=z.h;Ee.g||ma.indexOf("spdy")==-1&&ma.indexOf("quic")==-1&&ma.indexOf("h2")==-1||(Ee.j=Ee.l,Ee.g=new Set,Ee.h&&(aa(Ee,Ee.h),Ee.h=null))}if(z.G){const ds=pi.g?pi.g.getResponseHeader("X-HTTP-Session-Id"):null;ds&&(z.wa=ds,st(z.J,z.G,ds))}}D.I=3,D.l&&D.l.ra(),D.aa&&(D.T=Date.now()-x.F,D.j.info("Handshake RTT: "+D.T+"ms")),z=D;var Ve=x;if(z.na=Pl(z,z.L?z.ba:null,z.W),Ve.L){Pt(z.h,Ve);var pt=Ve,Gn=z.O;Gn&&(pt.H=Gn),pt.D&&(yn(pt),Si(pt)),z.g=Ve}else Fi(z);D.i.length>0&&ls(D)}else $t[0]!="stop"&&$t[0]!="close"||cs(D,7);else D.I==3&&($t[0]=="stop"||$t[0]=="close"?$t[0]=="stop"?cs(D,7):Za(D):$t[0]!="noop"&&D.l&&D.l.qa($t),D.A=0)}}ri(4)}catch{}}var On=class{constructor(x,N){this.g=x,this.map=N}};function Ce(x){this.l=x||10,p.PerformanceNavigationTiming?(x=p.performance.getEntriesByType("navigation"),x=x.length>0&&(x[0].nextHopProtocol=="hq"||x[0].nextHopProtocol=="h2")):x=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=x?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function sa(x){return x.h?!0:x.g?x.g.size>=x.j:!1}function Ht(x){return x.h?1:x.g?x.g.size:0}function Cr(x,N){return x.h?x.h==N:x.g?x.g.has(N):!1}function aa(x,N){x.g?x.g.add(N):x.h=N}function Pt(x,N){x.h&&x.h==N?x.h=null:x.g&&x.g.has(N)&&x.g.delete(N)}Ce.prototype.cancel=function(){if(this.i=Mt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const x of this.g.values())x.cancel();this.g.clear()}};function Mt(x){if(x.h!=null)return x.i.concat(x.h.G);if(x.g!=null&&x.g.size!==0){let N=x.i;for(const D of x.g.values())N=N.concat(D.G);return N}return B(x.i)}var vt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function os(x,N){if(x){x=x.split("&");for(let D=0;D<x.length;D++){const z=x[D].indexOf("=");let ue,Ee=null;z>=0?(ue=x[D].substring(0,z),Ee=x[D].substring(z+1)):ue=x[D],N(ue,Ee?decodeURIComponent(Ee.replace(/\+/g," ")):"")}}}function Ir(x){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let N;x instanceof Ir?(this.l=x.l,Rt(this,x.j),this.o=x.o,this.g=x.g,Nr(this,x.u),this.h=x.h,oa(this,Jo(x.i)),this.m=x.m):x&&(N=String(x).match(vt))?(this.l=!1,Rt(this,N[1]||"",!0),this.o=X(N[2]||""),this.g=X(N[3]||"",!0),Nr(this,N[4]),this.h=X(N[5]||"",!0),oa(this,N[6]||"",!0),this.m=X(N[7]||"")):(this.l=!1,this.i=new Xn(null,this.l))}Ir.prototype.toString=function(){const x=[];var N=this.j;N&&x.push(Me(N,tt,!0),":");var D=this.g;return(D||N=="file")&&(x.push("//"),(N=this.o)&&x.push(Me(N,tt,!0),"@"),x.push(ar(D).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D=this.u,D!=null&&x.push(":",String(D))),(D=this.h)&&(this.g&&D.charAt(0)!="/"&&x.push("/"),x.push(Me(D,D.charAt(0)=="/"?H:le,!0))),(D=this.i.toString())&&x.push("?",D),(D=this.m)&&x.push("#",Me(D,Ln)),x.join("")},Ir.prototype.resolve=function(x){const N=Dn(this);let D=!!x.j;D?Rt(N,x.j):D=!!x.o,D?N.o=x.o:D=!!x.g,D?N.g=x.g:D=x.u!=null;var z=x.h;if(D)Nr(N,x.u);else if(D=!!x.h){if(z.charAt(0)!="/")if(this.g&&!this.h)z="/"+z;else{var ue=N.h.lastIndexOf("/");ue!=-1&&(z=N.h.slice(0,ue+1)+z)}if(ue=z,ue==".."||ue==".")z="";else if(ue.indexOf("./")!=-1||ue.indexOf("/.")!=-1){z=ue.lastIndexOf("/",0)==0,ue=ue.split("/");const Ee=[];for(let Ve=0;Ve<ue.length;){const pt=ue[Ve++];pt=="."?z&&Ve==ue.length&&Ee.push(""):pt==".."?((Ee.length>1||Ee.length==1&&Ee[0]!="")&&Ee.pop(),z&&Ve==ue.length&&Ee.push("")):(Ee.push(pt),z=!0)}z=Ee.join("/")}else z=ue}return D?N.h=z:D=x.i.toString()!=="",D?oa(N,Jo(x.i)):D=!!x.m,D&&(N.m=x.m),N};function Dn(x){return new Ir(x)}function Rt(x,N,D){x.j=D?X(N,!0):N,x.j&&(x.j=x.j.replace(/:$/,""))}function Nr(x,N){if(N){if(N=Number(N),isNaN(N)||N<0)throw Error("Bad port number "+N);x.u=N}else x.u=null}function oa(x,N,D){N instanceof Xn?(x.i=N,Us(x.i,x.l)):(D||(N=Me(N,qe)),x.i=new Xn(N,x.l))}function st(x,N,D){x.i.set(N,D)}function Rr(x){return st(x,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),x}function X(x,N){return x?N?decodeURI(x.replace(/%25/g,"%2525")):decodeURIComponent(x):""}function Me(x,N,D){return typeof x=="string"?(x=encodeURI(x).replace(N,Pe),D&&(x=x.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x):null}function Pe(x){return x=x.charCodeAt(0),"%"+(x>>4&15).toString(16)+(x&15).toString(16)}var tt=/[#\/\?@]/g,le=/[#\?:]/g,H=/[#\?]/g,qe=/[#\?@]/g,Ln=/#/g;function Xn(x,N){this.h=this.g=null,this.i=x||null,this.j=!!N}function vn(x){x.g||(x.g=new Map,x.h=0,x.i&&os(x.i,function(N,D){x.add(decodeURIComponent(N.replace(/\+/g," ")),D)}))}n=Xn.prototype,n.add=function(x,N){vn(this),this.i=null,x=Bs(this,x);let D=this.g.get(x);return D||this.g.set(x,D=[]),D.push(N),this.h+=1,this};function Ts(x,N){vn(x),N=Bs(x,N),x.g.has(N)&&(x.i=null,x.h-=x.g.get(N).length,x.g.delete(N))}function Tn(x,N){return vn(x),N=Bs(x,N),x.g.has(N)}n.forEach=function(x,N){vn(this),this.g.forEach(function(D,z){D.forEach(function(ue){x.call(N,ue,z,this)},this)},this)};function Je(x,N){vn(x);let D=[];if(typeof N=="string")Tn(x,N)&&(D=D.concat(x.g.get(Bs(x,N))));else for(x=Array.from(x.g.values()),N=0;N<x.length;N++)D=D.concat(x[N]);return D}n.set=function(x,N){return vn(this),this.i=null,x=Bs(this,x),Tn(this,x)&&(this.h-=this.g.get(x).length),this.g.set(x,[N]),this.h+=1,this},n.get=function(x,N){return x?(x=Je(this,x),x.length>0?String(x[0]):N):N};function un(x,N,D){Ts(x,N),D.length>0&&(x.i=null,x.g.set(Bs(x,N),B(D)),x.h+=D.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const x=[],N=Array.from(this.g.keys());for(let z=0;z<N.length;z++){var D=N[z];const ue=ar(D);D=Je(this,D);for(let Ee=0;Ee<D.length;Ee++){let Ve=ue;D[Ee]!==""&&(Ve+="="+ar(D[Ee])),x.push(Ve)}}return this.i=x.join("&")};function Jo(x){const N=new Xn;return N.i=x.i,x.g&&(N.g=new Map(x.g),N.h=x.h),N}function Bs(x,N){return N=String(N),x.j&&(N=N.toLowerCase()),N}function Us(x,N){N&&!x.j&&(vn(x),x.i=null,x.g.forEach(function(D,z){const ue=z.toLowerCase();z!=ue&&(Ts(this,z),un(this,ue,D))},x)),x.j=N}function ai(x,N){const D=new Nn;if(p.Image){const z=new Image;z.onload=C(Ci,D,"TestLoadImage: loaded",!0,N,z),z.onerror=C(Ci,D,"TestLoadImage: error",!1,N,z),z.onabort=C(Ci,D,"TestLoadImage: abort",!1,N,z),z.ontimeout=C(Ci,D,"TestLoadImage: timeout",!1,N,z),p.setTimeout(function(){z.ontimeout&&z.ontimeout()},1e4),z.src=x}else N(!1)}function la(x,N){const D=new Nn,z=new AbortController,ue=setTimeout(()=>{z.abort(),Ci(D,"TestPingServer: timeout",!1,N)},1e4);fetch(x,{signal:z.signal}).then(Ee=>{clearTimeout(ue),Ee.ok?Ci(D,"TestPingServer: ok",!0,N):Ci(D,"TestPingServer: server error",!1,N)}).catch(()=>{clearTimeout(ue),Ci(D,"TestPingServer: error",!1,N)})}function Ci(x,N,D,z,ue){try{ue&&(ue.onload=null,ue.onerror=null,ue.onabort=null,ue.ontimeout=null),z(D)}catch{}}function Sn(){this.g=new Ls}function oi(x){this.i=x.Sb||null,this.h=x.ab||!1}I(oi,vi),oi.prototype.g=function(){return new li(this.i,this.h)};function li(x,N){et.call(this),this.H=x,this.o=N,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}I(li,et),n=li.prototype,n.open=function(x,N){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=x,this.D=N,this.readyState=1,lt(this)},n.send=function(x){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const N={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};x&&(N.body=x),(this.H||p).fetch(new Request(this.D,N)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Vs(this)),this.readyState=0},n.Pa=function(x){if(this.g&&(this.l=x,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=x.headers,this.readyState=2,lt(this)),this.g&&(this.readyState=3,lt(this),this.g)))if(this.responseType==="arraybuffer")x.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in x){if(this.j=x.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;nt(this)}else x.text().then(this.Oa.bind(this),this.ga.bind(this))};function nt(x){x.j.read().then(x.Ma.bind(x)).catch(x.ga.bind(x))}n.Ma=function(x){if(this.g){if(this.o&&x.value)this.response.push(x.value);else if(!this.o){var N=x.value?x.value:new Uint8Array(0);(N=this.B.decode(N,{stream:!x.done}))&&(this.response=this.responseText+=N)}x.done?Vs(this):lt(this),this.readyState==3&&nt(this)}},n.Oa=function(x){this.g&&(this.response=this.responseText=x,Vs(this))},n.Na=function(x){this.g&&(this.response=x,Vs(this))},n.ga=function(){this.g&&Vs(this)};function Vs(x){x.readyState=4,x.l=null,x.j=null,x.B=null,lt(x)}n.setRequestHeader=function(x,N){this.A.append(x,N)},n.getResponseHeader=function(x){return this.h&&this.h.get(x.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const x=[],N=this.h.entries();for(var D=N.next();!D.done;)D=D.value,x.push(D[0]+": "+D[1]),D=N.next();return x.join(`\r
`)};function lt(x){x.onreadystatechange&&x.onreadystatechange.call(x)}Object.defineProperty(li.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(x){this.m=x?"include":"same-origin"}});function hn(x){let N="";return dt(x,function(D,z){N+=z,N+=":",N+=D,N+=`\r
`}),N}function ca(x,N,D){e:{for(z in D){var z=!1;break e}z=!0}z||(D=hn(D),typeof x=="string"?D!=null&&ar(D):st(x,N,D))}function sn(x){et.call(this),this.headers=new Map,this.L=x||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}I(sn,et);var Ui=/^https?$/i,Vi=["POST","PUT"];n=sn.prototype,n.Fa=function(x){this.H=x},n.ea=function(x,N,D,z){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+x);N=N?N.toUpperCase():"GET",this.D=x,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Bi.g(),this.g.onreadystatechange=M(E(this.Ca,this));try{this.B=!0,this.g.open(N,String(x),!0),this.B=!1}catch(Ee){ua(this,Ee);return}if(x=D||"",D=new Map(this.headers),z)if(Object.getPrototypeOf(z)===Object.prototype)for(var ue in z)D.set(ue,z[ue]);else if(typeof z.keys=="function"&&typeof z.get=="function")for(const Ee of z.keys())D.set(Ee,z.get(Ee));else throw Error("Unknown input type for opt_headers: "+String(z));z=Array.from(D.keys()).find(Ee=>Ee.toLowerCase()=="content-type"),ue=p.FormData&&x instanceof p.FormData,!(Array.prototype.indexOf.call(Vi,N,void 0)>=0)||z||ue||D.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ee,Ve]of D)this.g.setRequestHeader(Ee,Ve);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(x),this.v=!1}catch(Ee){ua(this,Ee)}};function ua(x,N){x.h=!1,x.g&&(x.j=!0,x.g.abort(),x.j=!1),x.l=N,x.o=5,Ss(x),di(x)}function Ss(x){x.A||(x.A=!0,pn(x,"complete"),pn(x,"error"))}n.abort=function(x){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=x||7,pn(this,"complete"),pn(this,"abort"),di(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),di(this,!0)),sn.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?ji(this):this.Xa())},n.Xa=function(){ji(this)};function ji(x){if(x.h&&typeof h<"u"){if(x.v&&Ii(x)==4)setTimeout(x.Ca.bind(x),0);else if(pn(x,"readystatechange"),Ii(x)==4){x.h=!1;try{const Ee=x.ca();e:switch(Ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var N=!0;break e;default:N=!1}var D;if(!(D=N)){var z;if(z=Ee===0){let Ve=String(x.D).match(vt)[1]||null;!Ve&&p.self&&p.self.location&&(Ve=p.self.location.protocol.slice(0,-1)),z=!Ui.test(Ve?Ve.toLowerCase():"")}D=z}if(D)pn(x,"complete"),pn(x,"success");else{x.o=6;try{var ue=Ii(x)>2?x.g.statusText:""}catch{ue=""}x.l=ue+" ["+x.ca()+"]",Ss(x)}}finally{di(x)}}}}function di(x,N){if(x.g){x.m&&(clearTimeout(x.m),x.m=null);const D=x.g;x.g=null,N||pn(x,"ready");try{D.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Ii(x){return x.g?x.g.readyState:0}n.ca=function(){try{return Ii(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(x){if(this.g){var N=this.g.responseText;return x&&N.indexOf(x)==0&&(N=N.substring(x.length)),Pn(N)}};function Wn(x){try{if(!x.g)return null;if("response"in x.g)return x.g.response;switch(x.F){case"":case"text":return x.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in x.g)return x.g.mozResponseArrayBuffer}return null}catch{return null}}function gi(x){const N={};x=(x.g&&Ii(x)>=2&&x.g.getAllResponseHeaders()||"").split(`\r
`);for(let z=0;z<x.length;z++){if(G(x[z]))continue;var D=or(x[z]);const ue=D[0];if(D=D[1],typeof D!="string")continue;D=D.trim();const Ee=N[ue]||[];N[ue]=Ee,Ee.push(D)}gt(N,function(z){return z.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function kn(x,N,D){return D&&D.internalChannelParams&&D.internalChannelParams[x]||N}function Cs(x){this.za=0,this.i=[],this.j=new Nn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=kn("failFast",!1,x),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=kn("baseRetryDelayMs",5e3,x),this.Za=kn("retryDelaySeedMs",1e4,x),this.Ta=kn("forwardChannelMaxRetries",2,x),this.va=kn("forwardChannelRequestTimeoutMs",2e4,x),this.ma=x&&x.xmlHttpFactory||void 0,this.Ua=x&&x.Rb||void 0,this.Aa=x&&x.useFetchStreams||!1,this.O=void 0,this.L=x&&x.supportsCrossDomainXhr||!1,this.M="",this.h=new Ce(x&&x.concurrentRequestLimit),this.Ba=new Sn,this.S=x&&x.fastHandshake||!1,this.R=x&&x.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=x&&x.Pb||!1,x&&x.ua&&this.j.ua(),x&&x.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&x&&x.detectBufferingProxy||!1,this.ia=void 0,x&&x.longPollingTimeout&&x.longPollingTimeout>0&&(this.ia=x.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Cs.prototype,n.ka=8,n.I=1,n.connect=function(x,N,D,z){ln(0),this.W=x,this.H=N||{},D&&z!==void 0&&(this.H.OSID=D,this.H.OAID=z),this.F=this.X,this.J=Pl(this,null,this.W),ls(this)};function Za(x){if(Ja(x),x.I==3){var N=x.V++,D=Dn(x.J);if(st(D,"SID",x.M),st(D,"RID",N),st(D,"TYPE","terminate"),js(x,D),N=new He(x,x.j,N),N.M=2,N.A=Rr(Dn(D)),D=!1,p.navigator&&p.navigator.sendBeacon)try{D=p.navigator.sendBeacon(N.A.toString(),"")}catch{}!D&&p.Image&&(new Image().src=N.A,D=!0),D||(N.g=eo(N.j,null),N.g.ea(N.A)),N.F=Date.now(),Si(N)}Ml(x)}function Is(x){x.g&&(xe(x),x.g.cancel(),x.g=null)}function Ja(x){Is(x),x.v&&(p.clearTimeout(x.v),x.v=null),zn(x),x.h.cancel(),x.m&&(typeof x.m=="number"&&p.clearTimeout(x.m),x.m=null)}function ls(x){if(!sa(x.h)&&!x.m){x.m=!0;var N=x.Ea;Re||V(),De||(Re(),De=!0),F.add(N,x),x.D=0}}function $a(x,N){return Ht(x.h)>=x.h.j-(x.m?1:0)?!1:x.m?(x.i=N.G.concat(x.i),!0):x.I==1||x.I==2||x.D>=(x.Sa?0:x.Ta)?!1:(x.m=Fr(E(x.Ea,x,N),$o(x,x.D)),x.D++,!0)}n.Ea=function(x){if(this.m)if(this.m=null,this.I==1){if(!x){this.V=Math.floor(Math.random()*1e5),x=this.V++;const ue=new He(this,this.j,x);let Ee=this.o;if(this.U&&(Ee?(Ee=ie(Ee),je(Ee,this.U)):Ee=this.U),this.u!==null||this.R||(ue.J=Ee,Ee=null),this.S)e:{for(var N=0,D=0;D<this.i.length;D++){t:{var z=this.i[D];if("__data__"in z.map&&(z=z.map.__data__,typeof z=="string")){z=z.length;break t}z=void 0}if(z===void 0)break;if(N+=z,N>4096){N=D;break e}if(N===4096||D===this.i.length-1){N=D+1;break e}}N=1e3}else N=1e3;N=ha(this,ue,N),D=Dn(this.J),st(D,"RID",x),st(D,"CVER",22),this.G&&st(D,"X-HTTP-Session-Id",this.G),js(this,D),Ee&&(this.R?N="headers="+ar(hn(Ee))+"&"+N:this.u&&ca(D,this.u,Ee)),aa(this.h,ue),this.Ra&&st(D,"TYPE","init"),this.S?(st(D,"$req",N),st(D,"SID","null"),ue.U=!0,lr(ue,D,null)):lr(ue,D,N),this.I=2}}else this.I==3&&(x?tn(this,x):this.i.length==0||sa(this.h)||tn(this))};function tn(x,N){var D;N?D=N.l:D=x.V++;const z=Dn(x.J);st(z,"SID",x.M),st(z,"RID",D),st(z,"AID",x.K),js(x,z),x.u&&x.o&&ca(z,x.u,x.o),D=new He(x,x.j,D,x.D+1),x.u===null&&(D.J=x.o),N&&(x.i=N.G.concat(x.i)),N=ha(x,D,1e3),D.H=Math.round(x.va*.5)+Math.round(x.va*.5*Math.random()),aa(x.h,D),lr(D,z,N)}function js(x,N){x.H&&dt(x.H,function(D,z){st(N,z,D)}),x.l&&dt({},function(D,z){st(N,z,D)})}function ha(x,N,D){D=Math.min(x.i.length,D);const z=x.l?E(x.l.Ka,x.l,x):null;e:{var ue=x.i;let pt=-1;for(;;){const Gn=["count="+D];pt==-1?D>0?(pt=ue[0].g,Gn.push("ofs="+pt)):pt=0:Gn.push("ofs="+pt);let $t=!0;for(let Cn=0;Cn<D;Cn++){var Ee=ue[Cn].g;const mi=ue[Cn].map;if(Ee-=pt,Ee<0)pt=Math.max(0,ue[Cn].g-100),$t=!1;else try{Ee="req"+Ee+"_"||"";try{var Ve=mi instanceof Map?mi:Object.entries(mi);for(const[fs,Br]of Ve){let pi=Br;T(Br)&&(pi=pr(Br)),Gn.push(Ee+fs+"="+encodeURIComponent(pi))}}catch(fs){throw Gn.push(Ee+"type="+encodeURIComponent("_badmap")),fs}}catch{z&&z(mi)}}if($t){Ve=Gn.join("&");break e}}Ve=void 0}return x=x.i.splice(0,D),N.G=x,Ve}function Fi(x){if(!x.g&&!x.v){x.Y=1;var N=x.Da;Re||V(),De||(Re(),De=!0),F.add(N,x),x.A=0}}function fa(x){return x.g||x.v||x.A>=3?!1:(x.Y++,x.v=Fr(E(x.Da,x),$o(x,x.A)),x.A++,!0)}n.Da=function(){if(this.v=null,_t(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var x=4*this.T;this.j.info("BP detection timer enabled: "+x),this.B=Fr(E(this.Wa,this),x)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ln(10),Is(this),_t(this))};function xe(x){x.B!=null&&(p.clearTimeout(x.B),x.B=null)}function _t(x){x.g=new He(x,x.j,"rpc",x.Y),x.u===null&&(x.g.J=x.o),x.g.P=0;var N=Dn(x.na);st(N,"RID","rpc"),st(N,"SID",x.M),st(N,"AID",x.K),st(N,"CI",x.F?"0":"1"),!x.F&&x.ia&&st(N,"TO",x.ia),st(N,"TYPE","xmlhttp"),js(x,N),x.u&&x.o&&ca(N,x.u,x.o),x.O&&(x.g.H=x.O);var D=x.g;x=x.ba,D.M=1,D.A=Rr(Dn(N)),D.u=null,D.R=!0,Ti(D,x)}n.Va=function(){this.C!=null&&(this.C=null,Is(this),fa(this),ln(19))};function zn(x){x.C!=null&&(p.clearTimeout(x.C),x.C=null)}function da(x,N){var D=null;if(x.g==N){zn(x),xe(x),x.g=null;var z=2}else if(Cr(x.h,N))D=N.G,Pt(x.h,N),z=1;else return;if(x.I!=0){if(N.o)if(z==1){D=N.u?N.u.length:0,N=Date.now()-N.F;var ue=x.D;z=ni(),pn(z,new ii(z,D)),ls(x)}else Fi(x);else if(ue=N.m,ue==3||ue==0&&N.X>0||!(z==1&&$a(x,N)||z==2&&fa(x)))switch(D&&D.length>0&&(N=x.h,N.i=N.i.concat(D)),ue){case 1:cs(x,5);break;case 4:cs(x,10);break;case 3:cs(x,6);break;default:cs(x,2)}}}function $o(x,N){let D=x.Qa+Math.floor(Math.random()*x.Za);return x.isActive()||(D*=2),D*N}function cs(x,N){if(x.j.info("Error code "+N),N==2){var D=E(x.bb,x),z=x.Ua;const ue=!z;z=new Ir(z||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||Rt(z,"https"),Rr(z),ue?ai(z.toString(),D):la(z.toString(),D)}else ln(2);x.I=0,x.l&&x.l.pa(N),Ml(x),Ja(x)}n.bb=function(x){x?(this.j.info("Successfully pinged google.com"),ln(2)):(this.j.info("Failed to ping google.com"),ln(1))};function Ml(x){if(x.I=0,x.ja=[],x.l){const N=Mt(x.h);(N.length!=0||x.i.length!=0)&&(W(x.ja,N),W(x.ja,x.i),x.h.i.length=0,B(x.i),x.i.length=0),x.l.oa()}}function Pl(x,N,D){var z=D instanceof Ir?Dn(D):new Ir(D);if(z.g!="")N&&(z.g=N+"."+z.g),Nr(z,z.u);else{var ue=p.location;z=ue.protocol,N=N?N+"."+ue.hostname:ue.hostname,ue=+ue.port;const Ee=new Ir(null);z&&Rt(Ee,z),N&&(Ee.g=N),ue&&Nr(Ee,ue),D&&(Ee.h=D),z=Ee}return D=x.G,N=x.wa,D&&N&&st(z,D,N),st(z,"VER",x.ka),js(x,z),z}function eo(x,N,D){if(N&&!x.L)throw Error("Can't create secondary domain capable XhrIo object.");return N=x.Aa&&!x.ma?new sn(new oi({ab:D})):new sn(x.ma),N.Fa(x.L),N}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hn(){}n=Hn.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function us(){}us.prototype.g=function(x,N){return new Lt(x,N)};function Lt(x,N){et.call(this),this.g=new Cs(N),this.l=x,this.h=N&&N.messageUrlParams||null,x=N&&N.messageHeaders||null,N&&N.clientProtocolHeaderRequired&&(x?x["X-Client-Protocol"]="webchannel":x={"X-Client-Protocol":"webchannel"}),this.g.o=x,x=N&&N.initMessageHeaders||null,N&&N.messageContentType&&(x?x["X-WebChannel-Content-Type"]=N.messageContentType:x={"X-WebChannel-Content-Type":N.messageContentType}),N&&N.sa&&(x?x["X-WebChannel-Client-Profile"]=N.sa:x={"X-WebChannel-Client-Profile":N.sa}),this.g.U=x,(x=N&&N.Qb)&&!G(x)&&(this.g.u=x),this.A=N&&N.supportsCrossDomainXhr||!1,this.v=N&&N.sendRawJson||!1,(N=N&&N.httpSessionIdParam)&&!G(N)&&(this.g.G=N,x=this.h,x!==null&&N in x&&(x=this.h,N in x&&delete x[N])),this.j=new Ut(this)}I(Lt,et),Lt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Lt.prototype.close=function(){Za(this.g)},Lt.prototype.o=function(x){var N=this.g;if(typeof x=="string"){var D={};D.__data__=x,x=D}else this.v&&(D={},D.__data__=pr(x),x=D);N.i.push(new On(N.Ya++,x)),N.I==3&&ls(N)},Lt.prototype.N=function(){this.g.l=null,delete this.j,Za(this.g),delete this.g,Lt.Z.N.call(this)};function ga(x){Le.call(this),x.__headers__&&(this.headers=x.__headers__,this.statusCode=x.__status__,delete x.__headers__,delete x.__status__);var N=x.__sm__;if(N){e:{for(const D in N){x=D;break e}x=void 0}(this.i=x)&&(x=this.i,N=N!==null&&x in N?N[x]:void 0),this.data=N}else this.data=x}I(ga,Le);function hs(){zt.call(this),this.status=1}I(hs,zt);function Ut(x){this.g=x}I(Ut,Hn),Ut.prototype.ra=function(){pn(this.g,"a")},Ut.prototype.qa=function(x){pn(this.g,new ga(x))},Ut.prototype.pa=function(x){pn(this.g,new hs)},Ut.prototype.oa=function(){pn(this.g,"b")},us.prototype.createWebChannel=us.prototype.g,Lt.prototype.send=Lt.prototype.o,Lt.prototype.open=Lt.prototype.m,Lt.prototype.close=Lt.prototype.close,jb=function(){return new us},Vb=function(){return ni()},Ub=ot,Lg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},si.NO_ERROR=0,si.TIMEOUT=8,si.HTTP_ERROR=6,Yf=si,xr.COMPLETE="complete",Bb=xr,ia.EventType=kt,kt.OPEN="a",kt.CLOSE="b",kt.ERROR="c",kt.MESSAGE="d",et.prototype.listen=et.prototype.J,Lu=ia,sn.prototype.listenOnce=sn.prototype.K,sn.prototype.getLastError=sn.prototype.Ha,sn.prototype.getLastErrorCode=sn.prototype.ya,sn.prototype.getStatus=sn.prototype.ca,sn.prototype.getResponseJson=sn.prototype.La,sn.prototype.getResponseText=sn.prototype.la,sn.prototype.send=sn.prototype.ea,sn.prototype.setWithCredentials=sn.prototype.Fa,kb=sn}).apply(typeof Of<"u"?Of:typeof self<"u"?self:typeof window<"u"?window:{});const lE="@firebase/firestore",cE="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hi.UNAUTHENTICATED=new hi(null),hi.GOOGLE_CREDENTIALS=new hi("google-credentials-uid"),hi.FIRST_PARTY=new hi("first-party-uid"),hi.MOCK_USER=new hi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jc="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tl=new _m("@firebase/firestore");function uc(){return Tl.logLevel}function Ye(n,...e){if(Tl.logLevel<=Xt.DEBUG){const t=e.map(Am);Tl.debug(`Firestore (${jc}): ${n}`,...t)}}function za(n,...e){if(Tl.logLevel<=Xt.ERROR){const t=e.map(Am);Tl.error(`Firestore (${jc}): ${n}`,...t)}}function Cc(n,...e){if(Tl.logLevel<=Xt.WARN){const t=e.map(Am);Tl.warn(`Firestore (${jc}): ${n}`,...t)}}function Am(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,Fb(n,s,t)}function Fb(n,e,t){let s=`FIRESTORE (${jc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw za(s),new Error(s)}function rn(n,e,t,s){let c="Unexpected state";typeof t=="string"?c=t:s=t,n||Fb(e,c,s)}function yt(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ge extends Xa{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Z4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(hi.UNAUTHENTICATED)))}shutdown(){}}class J4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class $4{constructor(e){this.t=e,this.currentUser=hi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){rn(this.o===void 0,42304);let s=this.i;const c=w=>this.i!==s?(s=this.i,t(w)):Promise.resolve();let h=new Xs;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Xs,e.enqueueRetryable((()=>c(this.currentUser)))};const p=()=>{const w=h;e.enqueueRetryable((async()=>{await w.promise,await c(this.currentUser)}))},T=w=>{Ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.o&&(this.auth.addAuthTokenListener(this.o),p())};this.t.onInit((w=>T(w))),setTimeout((()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?T(w):(Ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Xs)}}),0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(Ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(rn(typeof s.accessToken=="string",31837,{l:s}),new zb(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return rn(e===null||typeof e=="string",2055,{h:e}),new hi(e)}}class eR{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=hi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class tR{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new eR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(hi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class uE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Zi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){rn(this.o===void 0,3512);const s=h=>{h.error!=null&&Ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const p=h.token!==this.m;return this.m=h.token,Ye("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?t(h.token):Promise.resolve()};this.o=h=>{e.enqueueRetryable((()=>s(h)))};const c=h=>{Ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((h=>c(h))),setTimeout((()=>{if(!this.appCheck){const h=this.V.getImmediate({optional:!0});h?c(h):Ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new uE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(rn(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new uE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const c=rR(40);for(let h=0;h<c.length;++h)s.length<20&&c[h]<t&&(s+=e.charAt(c[h]%62))}return s}}function Wt(n,e){return n<e?-1:n>e?1:0}function kg(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const c=n.charAt(s),h=e.charAt(s);if(c!==h)return fg(c)===fg(h)?Wt(c,h):fg(c)?1:-1}return Wt(n.length,e.length)}const iR=55296,sR=57343;function fg(n){const e=n.charCodeAt(0);return e>=iR&&e<=sR}function Ic(n,e,t){return n.length===e.length&&n.every(((s,c)=>t(s,e[c])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE="__name__";class Ys{constructor(e,t,s){t===void 0?t=0:t>e.length&&at(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&at(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Ys.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ys?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let c=0;c<s;c++){const h=Ys.compareSegments(e.get(c),t.get(c));if(h!==0)return h}return Wt(e.length,t.length)}static compareSegments(e,t){const s=Ys.isNumericId(e),c=Ys.isNumericId(t);return s&&!c?-1:!s&&c?1:s&&c?Ys.extractNumericId(e).compare(Ys.extractNumericId(t)):kg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ko.fromString(e.substring(4,e.length-2))}}class bn extends Ys{construct(e,t,s){return new bn(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Ge(Te.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((c=>c.length>0)))}return new bn(t)}static emptyPath(){return new bn([])}}const aR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qr extends Ys{construct(e,t,s){return new Qr(e,t,s)}static isValidIdentifier(e){return aR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===hE}static keyField(){return new Qr([hE])}static fromServerFormat(e){const t=[];let s="",c=0;const h=()=>{if(s.length===0)throw new Ge(Te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let p=!1;for(;c<e.length;){const T=e[c];if(T==="\\"){if(c+1===e.length)throw new Ge(Te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[c+1];if(w!=="\\"&&w!=="."&&w!=="`")throw new Ge(Te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=w,c+=2}else T==="`"?(p=!p,c++):T!=="."||p?(s+=T,c++):(h(),c++)}if(h(),p)throw new Ge(Te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qr(t)}static emptyPath(){return new Qr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.path=e}static fromPath(e){return new rt(bn.fromString(e))}static fromName(e){return new rt(bn.fromString(e).popFirst(5))}static empty(){return new rt(bn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&bn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return bn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new rt(new bn(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(n,e,t){if(!t)throw new Ge(Te.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function oR(n,e,t,s){if(e===!0&&s===!0)throw new Ge(Te.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function fE(n){if(!rt.isDocumentKey(n))throw new Ge(Te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function dE(n){if(rt.isDocumentKey(n))throw new Ge(Te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Gb(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function jd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":at(12329,{type:typeof n})}function wi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ge(Te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=jd(n);throw new Ge(Te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(n,e){const t={typeString:n};return e&&(t.value=e),t}function uh(n,e){if(!Gb(n))throw new Ge(Te.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const c=e[s].typeString,h="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const p=n[s];if(c&&typeof p!==c){t=`JSON field '${s}' must be a ${c}.`;break}if(h!==void 0&&p!==h.value){t=`Expected '${s}' field to equal '${h.value}'`;break}}if(t)throw new Ge(Te.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE=-62135596800,mE=1e6;class jn{static now(){return jn.fromMillis(Date.now())}static fromDate(e){return jn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*mE);return new jn(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ge(Te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ge(Te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<gE)throw new Ge(Te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ge(Te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/mE}_compareTo(e){return this.seconds===e.seconds?Wt(this.nanoseconds,e.nanoseconds):Wt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:jn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(uh(e,jn._jsonSchema))return new jn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-gE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}jn._jsonSchemaVersion="firestore/timestamp/1.0",jn._jsonSchema={type:Tr("string",jn._jsonSchemaVersion),seconds:Tr("number"),nanoseconds:Tr("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{static fromTimestamp(e){return new ht(e)}static min(){return new ht(new jn(0,0))}static max(){return new ht(new jn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $u=-1;function lR(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,c=ht.fromTimestamp(s===1e9?new jn(t+1,0):new jn(t,s));return new jo(c,rt.empty(),e)}function cR(n){return new jo(n.readTime,n.key,$u)}class jo{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new jo(ht.min(),rt.empty(),$u)}static max(){return new jo(ht.max(),rt.empty(),$u)}}function uR(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=rt.comparator(n.documentKey,e.documentKey),t!==0?t:Wt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fc(n){if(n.code!==Te.FAILED_PRECONDITION||n.message!==hR)throw n;Ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&at(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ne(((s,c)=>{this.nextCallback=h=>{this.wrapSuccess(e,h).next(s,c)},this.catchCallback=h=>{this.wrapFailure(t,h).next(s,c)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Ne?t:Ne.resolve(t)}catch(t){return Ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Ne.reject(t)}static resolve(e){return new Ne(((t,s)=>{t(e)}))}static reject(e){return new Ne(((t,s)=>{s(e)}))}static waitFor(e){return new Ne(((t,s)=>{let c=0,h=0,p=!1;e.forEach((T=>{++c,T.next((()=>{++h,p&&h===c&&t()}),(w=>s(w)))})),p=!0,h===c&&t()}))}static or(e){let t=Ne.resolve(!1);for(const s of e)t=t.next((c=>c?Ne.resolve(c):s()));return t}static forEach(e,t){const s=[];return e.forEach(((c,h)=>{s.push(t.call(this,c,h))})),this.waitFor(s)}static mapArray(e,t){return new Ne(((s,c)=>{const h=e.length,p=new Array(h);let T=0;for(let w=0;w<h;w++){const E=w;t(e[E]).next((C=>{p[E]=C,++T,T===h&&s(p)}),(C=>c(C)))}}))}static doWhile(e,t){return new Ne(((s,c)=>{const h=()=>{e()===!0?t().next((()=>{h()}),c):s()};h()}))}}function dR(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function zc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Fd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm=-1;function hh(n){return n==null}function cd(n){return n===0&&1/n==-1/0}function gR(n){return typeof n=="number"&&Number.isInteger(n)&&!cd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb="";function mR(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=pE(e)),e=pR(n.get(t),e);return pE(e)}function pR(n,e){let t=e;const s=n.length;for(let c=0;c<s;c++){const h=n.charAt(c);switch(h){case"\0":t+="";break;case qb:t+="";break;default:t+=h}}return t}function pE(n){return n+qb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Yo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Yb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,t){this.comparator=e,this.root=t||Kr.EMPTY}insert(e,t){return new Zn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Kr.BLACK,null,null))}remove(e){return new Zn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const c=this.comparator(e,s.key);if(c===0)return t+s.left.size;c<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Df(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Df(this.root,e,this.comparator,!1)}getReverseIterator(){return new Df(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Df(this.root,e,this.comparator,!0)}}class Df{constructor(e,t,s,c){this.isReverse=c,this.nodeStack=[];let h=1;for(;!e.isEmpty();)if(h=t?s(e.key,t):1,t&&c&&(h*=-1),h<0)e=this.isReverse?e.left:e.right;else{if(h===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Kr{constructor(e,t,s,c,h){this.key=e,this.value=t,this.color=s??Kr.RED,this.left=c??Kr.EMPTY,this.right=h??Kr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,c,h){return new Kr(e??this.key,t??this.value,s??this.color,c??this.left,h??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let c=this;const h=s(e,c.key);return c=h<0?c.copy(null,null,null,c.left.insert(e,t,s),null):h===0?c.copy(null,t,null,null,null):c.copy(null,null,null,null,c.right.insert(e,t,s)),c.fixUp()}removeMin(){if(this.left.isEmpty())return Kr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,c=this;if(t(e,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(e,t),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),t(e,c.key)===0){if(c.right.isEmpty())return Kr.EMPTY;s=c.right.min(),c=c.copy(s.key,s.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(e,t))}return c.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Kr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Kr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw at(43730,{key:this.key,value:this.value});if(this.right.isRed())throw at(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw at(27949);return e+(this.isRed()?0:1)}}Kr.EMPTY=null,Kr.RED=!0,Kr.BLACK=!1;Kr.EMPTY=new class{constructor(){this.size=0}get key(){throw at(57766)}get value(){throw at(16141)}get color(){throw at(16727)}get left(){throw at(29726)}get right(){throw at(36894)}copy(e,t,s,c,h){return this}insert(e,t,s){return new Kr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e){this.comparator=e,this.data=new Zn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const c=s.getNext();if(this.comparator(c.key,e[1])>=0)return;t(c.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new yE(this.data.getIterator())}getIteratorFrom(e){return new yE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Pr)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const c=t.getNext().key,h=s.getNext().key;if(this.comparator(c,h)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Pr(this.comparator);return t.data=e,t}}class yE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this.fields=e,e.sort(Qr.comparator)}static empty(){return new $i([])}unionWith(e){let t=new Pr(Qr.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new $i(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ic(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(c){try{return atob(c)}catch(h){throw typeof DOMException<"u"&&h instanceof DOMException?new Xb("Invalid base64 string: "+h):h}})(e);return new Zr(t)}static fromUint8Array(e){const t=(function(c){let h="";for(let p=0;p<c.length;++p)h+=String.fromCharCode(c[p]);return h})(e);return new Zr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let c=0;c<t.length;c++)s[c]=t.charCodeAt(c);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Wt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zr.EMPTY_BYTE_STRING=new Zr("");const xR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fo(n){if(rn(!!n,39018),typeof n=="string"){let e=0;const t=xR.exec(n);if(rn(!!t,46558,{timestamp:n}),t[1]){let c=t[1];c=(c+"000000000").substr(0,9),e=Number(c)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:fr(n.seconds),nanos:fr(n.nanos)}}function fr(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function zo(n){return typeof n=="string"?Zr.fromBase64String(n):Zr.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb="server_timestamp",Kb="__type__",Qb="__previous_value__",Zb="__local_write_time__";function Sm(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Kb])==null?void 0:s.stringValue)===Wb}function zd(n){const e=n.mapValue.fields[Qb];return Sm(e)?zd(e):e}function eh(n){const e=Fo(n.mapValue.fields[Zb].timestampValue);return new jn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e,t,s,c,h,p,T,w,E,C){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=c,this.ssl=h,this.forceLongPolling=p,this.autoDetectLongPolling=T,this.longPollingOptions=w,this.useFetchStreams=E,this.isUsingEmulator=C}}const ud="(default)";class th{constructor(e,t){this.projectId=e,this.database=t||ud}static empty(){return new th("","")}get isDefaultDatabase(){return this.database===ud}isEqual(e){return e instanceof th&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb="__type__",ER="__max__",Mf={mapValue:{}},$b="__vector__",hd="value";function Ho(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Sm(n)?4:wR(n)?9007199254740991:_R(n)?10:11:at(28295,{value:n})}function ta(n,e){if(n===e)return!0;const t=Ho(n);if(t!==Ho(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return eh(n).isEqual(eh(e));case 3:return(function(c,h){if(typeof c.timestampValue=="string"&&typeof h.timestampValue=="string"&&c.timestampValue.length===h.timestampValue.length)return c.timestampValue===h.timestampValue;const p=Fo(c.timestampValue),T=Fo(h.timestampValue);return p.seconds===T.seconds&&p.nanos===T.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(c,h){return zo(c.bytesValue).isEqual(zo(h.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(c,h){return fr(c.geoPointValue.latitude)===fr(h.geoPointValue.latitude)&&fr(c.geoPointValue.longitude)===fr(h.geoPointValue.longitude)})(n,e);case 2:return(function(c,h){if("integerValue"in c&&"integerValue"in h)return fr(c.integerValue)===fr(h.integerValue);if("doubleValue"in c&&"doubleValue"in h){const p=fr(c.doubleValue),T=fr(h.doubleValue);return p===T?cd(p)===cd(T):isNaN(p)&&isNaN(T)}return!1})(n,e);case 9:return Ic(n.arrayValue.values||[],e.arrayValue.values||[],ta);case 10:case 11:return(function(c,h){const p=c.mapValue.fields||{},T=h.mapValue.fields||{};if(xE(p)!==xE(T))return!1;for(const w in p)if(p.hasOwnProperty(w)&&(T[w]===void 0||!ta(p[w],T[w])))return!1;return!0})(n,e);default:return at(52216,{left:n})}}function nh(n,e){return(n.values||[]).find((t=>ta(t,e)))!==void 0}function Nc(n,e){if(n===e)return 0;const t=Ho(n),s=Ho(e);if(t!==s)return Wt(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Wt(n.booleanValue,e.booleanValue);case 2:return(function(h,p){const T=fr(h.integerValue||h.doubleValue),w=fr(p.integerValue||p.doubleValue);return T<w?-1:T>w?1:T===w?0:isNaN(T)?isNaN(w)?0:-1:1})(n,e);case 3:return EE(n.timestampValue,e.timestampValue);case 4:return EE(eh(n),eh(e));case 5:return kg(n.stringValue,e.stringValue);case 6:return(function(h,p){const T=zo(h),w=zo(p);return T.compareTo(w)})(n.bytesValue,e.bytesValue);case 7:return(function(h,p){const T=h.split("/"),w=p.split("/");for(let E=0;E<T.length&&E<w.length;E++){const C=Wt(T[E],w[E]);if(C!==0)return C}return Wt(T.length,w.length)})(n.referenceValue,e.referenceValue);case 8:return(function(h,p){const T=Wt(fr(h.latitude),fr(p.latitude));return T!==0?T:Wt(fr(h.longitude),fr(p.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return _E(n.arrayValue,e.arrayValue);case 10:return(function(h,p){var M,B,W,Q;const T=h.fields||{},w=p.fields||{},E=(M=T[hd])==null?void 0:M.arrayValue,C=(B=w[hd])==null?void 0:B.arrayValue,I=Wt(((W=E==null?void 0:E.values)==null?void 0:W.length)||0,((Q=C==null?void 0:C.values)==null?void 0:Q.length)||0);return I!==0?I:_E(E,C)})(n.mapValue,e.mapValue);case 11:return(function(h,p){if(h===Mf.mapValue&&p===Mf.mapValue)return 0;if(h===Mf.mapValue)return 1;if(p===Mf.mapValue)return-1;const T=h.fields||{},w=Object.keys(T),E=p.fields||{},C=Object.keys(E);w.sort(),C.sort();for(let I=0;I<w.length&&I<C.length;++I){const M=kg(w[I],C[I]);if(M!==0)return M;const B=Nc(T[w[I]],E[C[I]]);if(B!==0)return B}return Wt(w.length,C.length)})(n.mapValue,e.mapValue);default:throw at(23264,{he:t})}}function EE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Wt(n,e);const t=Fo(n),s=Fo(e),c=Wt(t.seconds,s.seconds);return c!==0?c:Wt(t.nanos,s.nanos)}function _E(n,e){const t=n.values||[],s=e.values||[];for(let c=0;c<t.length&&c<s.length;++c){const h=Nc(t[c],s[c]);if(h)return h}return Wt(t.length,s.length)}function Rc(n){return Bg(n)}function Bg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=Fo(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return zo(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return rt.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",c=!0;for(const h of t.values||[])c?c=!1:s+=",",s+=Bg(h);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let c="{",h=!0;for(const p of s)h?h=!1:c+=",",c+=`${p}:${Bg(t.fields[p])}`;return c+"}"})(n.mapValue):at(61005,{value:n})}function Xf(n){switch(Ho(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=zd(n);return e?16+Xf(e):16;case 5:return 2*n.stringValue.length;case 6:return zo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((c,h)=>c+Xf(h)),0)})(n.arrayValue);case 10:case 11:return(function(s){let c=0;return Yo(s.fields,((h,p)=>{c+=h.length+Xf(p)})),c})(n.mapValue);default:throw at(13486,{value:n})}}function wE(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ug(n){return!!n&&"integerValue"in n}function Cm(n){return!!n&&"arrayValue"in n}function bE(n){return!!n&&"nullValue"in n}function AE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Wf(n){return!!n&&"mapValue"in n}function _R(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Jb])==null?void 0:s.stringValue)===$b}function zu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Yo(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=zu(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=zu(n.arrayValue.values[t]);return e}return{...n}}function wR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===ER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e){this.value=e}static empty(){return new _i({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Wf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=zu(t)}setAll(e){let t=Qr.emptyPath(),s={},c=[];e.forEach(((p,T)=>{if(!t.isImmediateParentOf(T)){const w=this.getFieldsMap(t);this.applyChanges(w,s,c),s={},c=[],t=T.popLast()}p?s[T.lastSegment()]=zu(p):c.push(T.lastSegment())}));const h=this.getFieldsMap(t);this.applyChanges(h,s,c)}delete(e){const t=this.field(e.popLast());Wf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ta(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let c=t.mapValue.fields[e.get(s)];Wf(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=c),t=c}return t.mapValue.fields}applyChanges(e,t,s){Yo(t,((c,h)=>e[c]=h));for(const c of s)delete e[c]}clone(){return new _i(zu(this.value))}}function eA(n){const e=[];return Yo(n.fields,((t,s)=>{const c=new Qr([t]);if(Wf(s)){const h=eA(s.mapValue).fields;if(h.length===0)e.push(c);else for(const p of h)e.push(c.child(p))}else e.push(c)})),new $i(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,t,s,c,h,p,T){this.key=e,this.documentType=t,this.version=s,this.readTime=c,this.createTime=h,this.data=p,this.documentState=T}static newInvalidDocument(e){return new jr(e,0,ht.min(),ht.min(),ht.min(),_i.empty(),0)}static newFoundDocument(e,t,s,c){return new jr(e,1,t,ht.min(),s,c,0)}static newNoDocument(e,t){return new jr(e,2,t,ht.min(),ht.min(),_i.empty(),0)}static newUnknownDocument(e,t){return new jr(e,3,t,ht.min(),ht.min(),_i.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ht.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_i.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_i.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ht.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof jr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,t){this.position=e,this.inclusive=t}}function vE(n,e,t){let s=0;for(let c=0;c<n.position.length;c++){const h=e[c],p=n.position[c];if(h.field.isKeyField()?s=rt.comparator(rt.fromName(p.referenceValue),t.key):s=Nc(p,t.data.field(h.field)),h.dir==="desc"&&(s*=-1),s!==0)break}return s}function TE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ta(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e,t="asc"){this.field=e,this.dir=t}}function bR(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{}class vr extends tA{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new vR(e,t,s):t==="array-contains"?new CR(e,s):t==="in"?new IR(e,s):t==="not-in"?new NR(e,s):t==="array-contains-any"?new RR(e,s):new vr(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new TR(e,s):new SR(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Nc(t,this.value)):t!==null&&Ho(this.value)===Ho(t)&&this.matchesComparison(Nc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return at(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ms extends tA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ms(e,t)}matches(e){return nA(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function nA(n){return n.op==="and"}function rA(n){return AR(n)&&nA(n)}function AR(n){for(const e of n.filters)if(e instanceof Ms)return!1;return!0}function Vg(n){if(n instanceof vr)return n.field.canonicalString()+n.op.toString()+Rc(n.value);if(rA(n))return n.filters.map((e=>Vg(e))).join(",");{const e=n.filters.map((t=>Vg(t))).join(",");return`${n.op}(${e})`}}function iA(n,e){return n instanceof vr?(function(s,c){return c instanceof vr&&s.op===c.op&&s.field.isEqual(c.field)&&ta(s.value,c.value)})(n,e):n instanceof Ms?(function(s,c){return c instanceof Ms&&s.op===c.op&&s.filters.length===c.filters.length?s.filters.reduce(((h,p,T)=>h&&iA(p,c.filters[T])),!0):!1})(n,e):void at(19439)}function sA(n){return n instanceof vr?(function(t){return`${t.field.canonicalString()} ${t.op} ${Rc(t.value)}`})(n):n instanceof Ms?(function(t){return t.op.toString()+" {"+t.getFilters().map(sA).join(" ,")+"}"})(n):"Filter"}class vR extends vr{constructor(e,t,s){super(e,t,s),this.key=rt.fromName(s.referenceValue)}matches(e){const t=rt.comparator(e.key,this.key);return this.matchesComparison(t)}}class TR extends vr{constructor(e,t){super(e,"in",t),this.keys=aA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class SR extends vr{constructor(e,t){super(e,"not-in",t),this.keys=aA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function aA(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>rt.fromName(s.referenceValue)))}class CR extends vr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Cm(t)&&nh(t.arrayValue,this.value)}}class IR extends vr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&nh(this.value.arrayValue,t)}}class NR extends vr{constructor(e,t){super(e,"not-in",t)}matches(e){if(nh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!nh(this.value.arrayValue,t)}}class RR extends vr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Cm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>nh(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e,t=null,s=[],c=[],h=null,p=null,T=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=c,this.limit=h,this.startAt=p,this.endAt=T,this.Te=null}}function SE(n,e=null,t=[],s=[],c=null,h=null,p=null){return new OR(n,e,t,s,c,h,p)}function Im(n){const e=yt(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Vg(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(h){return h.field.canonicalString()+h.dir})(s))).join(","),hh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Rc(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Rc(s))).join(",")),e.Te=t}return e.Te}function Nm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!bR(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!iA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!TE(n.startAt,e.startAt)&&TE(n.endAt,e.endAt)}function jg(n){return rt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,t=null,s=[],c=[],h=null,p="F",T=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=c,this.limit=h,this.limitType=p,this.startAt=T,this.endAt=w,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function DR(n,e,t,s,c,h,p,T){return new fh(n,e,t,s,c,h,p,T)}function Hd(n){return new fh(n)}function CE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function oA(n){return n.collectionGroup!==null}function Hu(n){const e=yt(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const h of e.explicitOrderBy)e.Ie.push(h),t.add(h.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(p){let T=new Pr(Qr.comparator);return p.filters.forEach((w=>{w.getFlattenedFilters().forEach((E=>{E.isInequality()&&(T=T.add(E.field))}))})),T})(e).forEach((h=>{t.has(h.canonicalString())||h.isKeyField()||e.Ie.push(new dd(h,s))})),t.has(Qr.keyField().canonicalString())||e.Ie.push(new dd(Qr.keyField(),s))}return e.Ie}function Ws(n){const e=yt(n);return e.Ee||(e.Ee=MR(e,Hu(n))),e.Ee}function MR(n,e){if(n.limitType==="F")return SE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((c=>{const h=c.dir==="desc"?"asc":"desc";return new dd(c.field,h)}));const t=n.endAt?new fd(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new fd(n.startAt.position,n.startAt.inclusive):null;return SE(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Fg(n,e){const t=n.filters.concat([e]);return new fh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function gd(n,e,t){return new fh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Gd(n,e){return Nm(Ws(n),Ws(e))&&n.limitType===e.limitType}function lA(n){return`${Im(Ws(n))}|lt:${n.limitType}`}function hc(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((c=>sA(c))).join(", ")}]`),hh(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((c=>(function(p){return`${p.field.canonicalString()} (${p.dir})`})(c))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((c=>Rc(c))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((c=>Rc(c))).join(",")),`Target(${s})`})(Ws(n))}; limitType=${n.limitType})`}function qd(n,e){return e.isFoundDocument()&&(function(s,c){const h=c.key.path;return s.collectionGroup!==null?c.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(h):rt.isDocumentKey(s.path)?s.path.isEqual(h):s.path.isImmediateParentOf(h)})(n,e)&&(function(s,c){for(const h of Hu(s))if(!h.field.isKeyField()&&c.data.field(h.field)===null)return!1;return!0})(n,e)&&(function(s,c){for(const h of s.filters)if(!h.matches(c))return!1;return!0})(n,e)&&(function(s,c){return!(s.startAt&&!(function(p,T,w){const E=vE(p,T,w);return p.inclusive?E<=0:E<0})(s.startAt,Hu(s),c)||s.endAt&&!(function(p,T,w){const E=vE(p,T,w);return p.inclusive?E>=0:E>0})(s.endAt,Hu(s),c))})(n,e)}function PR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function cA(n){return(e,t)=>{let s=!1;for(const c of Hu(n)){const h=LR(c,e,t);if(h!==0)return h;s=s||c.field.isKeyField()}return 0}}function LR(n,e,t){const s=n.field.isKeyField()?rt.comparator(e.key,t.key):(function(h,p,T){const w=p.data.field(h),E=T.data.field(h);return w!==null&&E!==null?Nc(w,E):at(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return at(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[c,h]of s)if(this.equalsFn(c,e))return h}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),c=this.inner[s];if(c===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let h=0;h<c.length;h++)if(this.equalsFn(c[h][0],e))return void(c[h]=[e,t]);c.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let c=0;c<s.length;c++)if(this.equalsFn(s[c][0],e))return s.length===1?delete this.inner[t]:s.splice(c,1),this.innerSize--,!0;return!1}forEach(e){Yo(this.inner,((t,s)=>{for(const[c,h]of s)e(c,h)}))}isEmpty(){return Yb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR=new Zn(rt.comparator);function Ha(){return kR}const uA=new Zn(rt.comparator);function ku(...n){let e=uA;for(const t of n)e=e.insert(t.key,t);return e}function hA(n){let e=uA;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function wl(){return Gu()}function fA(){return Gu()}function Gu(){return new Rl((n=>n.toString()),((n,e)=>n.isEqual(e)))}const BR=new Zn(rt.comparator),UR=new Pr(rt.comparator);function Kt(...n){let e=UR;for(const t of n)e=e.add(t);return e}const VR=new Pr(Wt);function jR(){return VR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cd(e)?"-0":e}}function dA(n){return{integerValue:""+n}}function FR(n,e){return gR(e)?dA(e):Rm(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(){this._=void 0}}function zR(n,e,t){return n instanceof md?(function(c,h){const p={fields:{[Kb]:{stringValue:Wb},[Zb]:{timestampValue:{seconds:c.seconds,nanos:c.nanoseconds}}}};return h&&Sm(h)&&(h=zd(h)),h&&(p.fields[Qb]=h),{mapValue:p}})(t,e):n instanceof rh?mA(n,e):n instanceof ih?pA(n,e):(function(c,h){const p=gA(c,h),T=IE(p)+IE(c.Ae);return Ug(p)&&Ug(c.Ae)?dA(T):Rm(c.serializer,T)})(n,e)}function HR(n,e,t){return n instanceof rh?mA(n,e):n instanceof ih?pA(n,e):t}function gA(n,e){return n instanceof pd?(function(s){return Ug(s)||(function(h){return!!h&&"doubleValue"in h})(s)})(e)?e:{integerValue:0}:null}class md extends Yd{}class rh extends Yd{constructor(e){super(),this.elements=e}}function mA(n,e){const t=xA(e);for(const s of n.elements)t.some((c=>ta(c,s)))||t.push(s);return{arrayValue:{values:t}}}class ih extends Yd{constructor(e){super(),this.elements=e}}function pA(n,e){let t=xA(e);for(const s of n.elements)t=t.filter((c=>!ta(c,s)));return{arrayValue:{values:t}}}class pd extends Yd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function IE(n){return fr(n.integerValue||n.doubleValue)}function xA(n){return Cm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function GR(n,e){return n.field.isEqual(e.field)&&(function(s,c){return s instanceof rh&&c instanceof rh||s instanceof ih&&c instanceof ih?Ic(s.elements,c.elements,ta):s instanceof pd&&c instanceof pd?ta(s.Ae,c.Ae):s instanceof md&&c instanceof md})(n.transform,e.transform)}class qR{constructor(e,t){this.version=e,this.transformResults=t}}class Mr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Mr}static exists(e){return new Mr(void 0,e)}static updateTime(e){return new Mr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Kf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Xd{}function yA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new gh(n.key,Mr.none()):new dh(n.key,n.data,Mr.none());{const t=n.data,s=_i.empty();let c=new Pr(Qr.comparator);for(let h of e.fields)if(!c.has(h)){let p=t.field(h);p===null&&h.length>1&&(h=h.popLast(),p=t.field(h)),p===null?s.delete(h):s.set(h,p),c=c.add(h)}return new Xo(n.key,s,new $i(c.toArray()),Mr.none())}}function YR(n,e,t){n instanceof dh?(function(c,h,p){const T=c.value.clone(),w=RE(c.fieldTransforms,h,p.transformResults);T.setAll(w),h.convertToFoundDocument(p.version,T).setHasCommittedMutations()})(n,e,t):n instanceof Xo?(function(c,h,p){if(!Kf(c.precondition,h))return void h.convertToUnknownDocument(p.version);const T=RE(c.fieldTransforms,h,p.transformResults),w=h.data;w.setAll(EA(c)),w.setAll(T),h.convertToFoundDocument(p.version,w).setHasCommittedMutations()})(n,e,t):(function(c,h,p){h.convertToNoDocument(p.version).setHasCommittedMutations()})(0,e,t)}function qu(n,e,t,s){return n instanceof dh?(function(h,p,T,w){if(!Kf(h.precondition,p))return T;const E=h.value.clone(),C=OE(h.fieldTransforms,w,p);return E.setAll(C),p.convertToFoundDocument(p.version,E).setHasLocalMutations(),null})(n,e,t,s):n instanceof Xo?(function(h,p,T,w){if(!Kf(h.precondition,p))return T;const E=OE(h.fieldTransforms,w,p),C=p.data;return C.setAll(EA(h)),C.setAll(E),p.convertToFoundDocument(p.version,C).setHasLocalMutations(),T===null?null:T.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map((I=>I.field)))})(n,e,t,s):(function(h,p,T){return Kf(h.precondition,p)?(p.convertToNoDocument(p.version).setHasLocalMutations(),null):T})(n,e,t)}function XR(n,e){let t=null;for(const s of n.fieldTransforms){const c=e.data.field(s.field),h=gA(s.transform,c||null);h!=null&&(t===null&&(t=_i.empty()),t.set(s.field,h))}return t||null}function NE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,c){return s===void 0&&c===void 0||!(!s||!c)&&Ic(s,c,((h,p)=>GR(h,p)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class dh extends Xd{constructor(e,t,s,c=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=c,this.type=0}getFieldMask(){return null}}class Xo extends Xd{constructor(e,t,s,c,h=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=c,this.fieldTransforms=h,this.type=1}getFieldMask(){return this.fieldMask}}function EA(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function RE(n,e,t){const s=new Map;rn(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let c=0;c<t.length;c++){const h=n[c],p=h.transform,T=e.data.field(h.field);s.set(h.field,HR(p,T,t[c]))}return s}function OE(n,e,t){const s=new Map;for(const c of n){const h=c.transform,p=t.data.field(c.field);s.set(c.field,zR(h,p,e))}return s}class gh extends Xd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _A extends Xd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e,t,s,c){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=c}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let c=0;c<this.mutations.length;c++){const h=this.mutations[c];h.key.isEqual(e.key)&&YR(h,e,s[c])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=qu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=qu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=fA();return this.mutations.forEach((c=>{const h=e.get(c.key),p=h.overlayedDocument;let T=this.applyToLocalView(p,h.mutatedFields);T=t.has(c.key)?null:T;const w=yA(p,T);w!==null&&s.set(c.key,w),p.isValidDocument()||p.convertToNoDocument(ht.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Kt())}isEqual(e){return this.batchId===e.batchId&&Ic(this.mutations,e.mutations,((t,s)=>NE(t,s)))&&Ic(this.baseMutations,e.baseMutations,((t,s)=>NE(t,s)))}}class Om{constructor(e,t,s,c){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=c}static from(e,t,s){rn(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let c=(function(){return BR})();const h=e.mutations;for(let p=0;p<h.length;p++)c=c.insert(h[p].key,s[p].version);return new Om(e,t,s,c)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ar,nn;function wA(n){switch(n){case Te.OK:return at(64938);case Te.CANCELLED:case Te.UNKNOWN:case Te.DEADLINE_EXCEEDED:case Te.RESOURCE_EXHAUSTED:case Te.INTERNAL:case Te.UNAVAILABLE:case Te.UNAUTHENTICATED:return!1;case Te.INVALID_ARGUMENT:case Te.NOT_FOUND:case Te.ALREADY_EXISTS:case Te.PERMISSION_DENIED:case Te.FAILED_PRECONDITION:case Te.ABORTED:case Te.OUT_OF_RANGE:case Te.UNIMPLEMENTED:case Te.DATA_LOSS:return!0;default:return at(15467,{code:n})}}function bA(n){if(n===void 0)return za("GRPC error has no .code"),Te.UNKNOWN;switch(n){case Ar.OK:return Te.OK;case Ar.CANCELLED:return Te.CANCELLED;case Ar.UNKNOWN:return Te.UNKNOWN;case Ar.DEADLINE_EXCEEDED:return Te.DEADLINE_EXCEEDED;case Ar.RESOURCE_EXHAUSTED:return Te.RESOURCE_EXHAUSTED;case Ar.INTERNAL:return Te.INTERNAL;case Ar.UNAVAILABLE:return Te.UNAVAILABLE;case Ar.UNAUTHENTICATED:return Te.UNAUTHENTICATED;case Ar.INVALID_ARGUMENT:return Te.INVALID_ARGUMENT;case Ar.NOT_FOUND:return Te.NOT_FOUND;case Ar.ALREADY_EXISTS:return Te.ALREADY_EXISTS;case Ar.PERMISSION_DENIED:return Te.PERMISSION_DENIED;case Ar.FAILED_PRECONDITION:return Te.FAILED_PRECONDITION;case Ar.ABORTED:return Te.ABORTED;case Ar.OUT_OF_RANGE:return Te.OUT_OF_RANGE;case Ar.UNIMPLEMENTED:return Te.UNIMPLEMENTED;case Ar.DATA_LOSS:return Te.DATA_LOSS;default:return at(39323,{code:n})}}(nn=Ar||(Ar={}))[nn.OK=0]="OK",nn[nn.CANCELLED=1]="CANCELLED",nn[nn.UNKNOWN=2]="UNKNOWN",nn[nn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nn[nn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nn[nn.NOT_FOUND=5]="NOT_FOUND",nn[nn.ALREADY_EXISTS=6]="ALREADY_EXISTS",nn[nn.PERMISSION_DENIED=7]="PERMISSION_DENIED",nn[nn.UNAUTHENTICATED=16]="UNAUTHENTICATED",nn[nn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nn[nn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nn[nn.ABORTED=10]="ABORTED",nn[nn.OUT_OF_RANGE=11]="OUT_OF_RANGE",nn[nn.UNIMPLEMENTED=12]="UNIMPLEMENTED",nn[nn.INTERNAL=13]="INTERNAL",nn[nn.UNAVAILABLE=14]="UNAVAILABLE",nn[nn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR=new ko([4294967295,4294967295],0);function DE(n){const e=ZR().encode(n),t=new Lb;return t.update(e),new Uint8Array(t.digest())}function ME(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),c=e.getUint32(8,!0),h=e.getUint32(12,!0);return[new ko([t,s],0),new ko([c,h],0)]}class Dm{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Bu(`Invalid padding: ${t}`);if(s<0)throw new Bu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Bu(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Bu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ko.fromNumber(this.ge)}ye(e,t,s){let c=e.add(t.multiply(ko.fromNumber(s)));return c.compare(JR)===1&&(c=new ko([c.getBits(0),c.getBits(1)],0)),c.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=DE(e),[s,c]=ME(t);for(let h=0;h<this.hashCount;h++){const p=this.ye(s,c,h);if(!this.we(p))return!1}return!0}static create(e,t,s){const c=e%8==0?0:8-e%8,h=new Uint8Array(Math.ceil(e/8)),p=new Dm(h,c,t);return s.forEach((T=>p.insert(T))),p}insert(e){if(this.ge===0)return;const t=DE(e),[s,c]=ME(t);for(let h=0;h<this.hashCount;h++){const p=this.ye(s,c,h);this.Se(p)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Bu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,t,s,c,h){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=c,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const c=new Map;return c.set(e,mh.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Wd(ht.min(),c,new Zn(Wt),Ha(),Kt())}}class mh{constructor(e,t,s,c,h){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=c,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new mh(s,t,Kt(),Kt(),Kt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,t,s,c){this.be=e,this.removedTargetIds=t,this.key=s,this.De=c}}class AA{constructor(e,t){this.targetId=e,this.Ce=t}}class vA{constructor(e,t,s=Zr.EMPTY_BYTE_STRING,c=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=c}}class PE{constructor(){this.ve=0,this.Fe=LE(),this.Me=Zr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Kt(),t=Kt(),s=Kt();return this.Fe.forEach(((c,h)=>{switch(h){case 0:e=e.add(c);break;case 2:t=t.add(c);break;case 1:s=s.add(c);break;default:at(38017,{changeType:h})}})),new mh(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=LE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,rn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class $R{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ha(),this.Je=Pf(),this.He=Pf(),this.Ye=new Zn(Wt)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:at(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,c)=>{this.rt(c)&&t(c)}))}st(e){const t=e.targetId,s=e.Ce.count,c=this.ot(t);if(c){const h=c.target;if(jg(h))if(s===0){const p=new rt(h.path);this.et(t,p,jr.newNoDocument(p,ht.min()))}else rn(s===1,20013,{expectedCount:s});else{const p=this._t(t);if(p!==s){const T=this.ut(e),w=T?this.ct(T,e,p):1;if(w!==0){this.it(t);const E=w===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,E)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:c=0},hashCount:h=0}=t;let p,T;try{p=zo(s).toUint8Array()}catch(w){if(w instanceof Xb)return Cc("Decoding the base64 bloom filter in existence filter failed ("+w.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw w}try{T=new Dm(p,c,h)}catch(w){return Cc(w instanceof Bu?"BloomFilter error: ":"Applying bloom filter failed: ",w),null}return T.ge===0?null:T}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let c=0;return s.forEach((h=>{const p=this.Ge.ht(),T=`projects/${p.projectId}/databases/${p.database}/documents/${h.path.canonicalString()}`;e.mightContain(T)||(this.et(t,h,null),c++)})),c}Tt(e){const t=new Map;this.ze.forEach(((h,p)=>{const T=this.ot(p);if(T){if(h.current&&jg(T.target)){const w=new rt(T.target.path);this.It(w).has(p)||this.Et(p,w)||this.et(p,w,jr.newNoDocument(w,e))}h.Be&&(t.set(p,h.ke()),h.qe())}}));let s=Kt();this.He.forEach(((h,p)=>{let T=!0;p.forEachWhile((w=>{const E=this.ot(w);return!E||E.purpose==="TargetPurposeLimboResolution"||(T=!1,!1)})),T&&(s=s.add(h))})),this.je.forEach(((h,p)=>p.setReadTime(e)));const c=new Wd(e,t,this.Ye,this.je,s);return this.je=Ha(),this.Je=Pf(),this.He=Pf(),this.Ye=new Zn(Wt),c}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const c=this.nt(e);this.Et(e,t)?c.Qe(t,1):c.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new PE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Pr(Wt),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Pr(Wt),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ye("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new PE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Pf(){return new Zn(rt.comparator)}function LE(){return new Zn(rt.comparator)}const e6={asc:"ASCENDING",desc:"DESCENDING"},t6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},n6={and:"AND",or:"OR"};class r6{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function zg(n,e){return n.useProto3Json||hh(e)?e:{value:e}}function xd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function TA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function i6(n,e){return xd(n,e.toTimestamp())}function es(n){return rn(!!n,49232),ht.fromTimestamp((function(t){const s=Fo(t);return new jn(s.seconds,s.nanos)})(n))}function Mm(n,e){return Hg(n,e).canonicalString()}function Hg(n,e){const t=(function(c){return new bn(["projects",c.projectId,"databases",c.database])})(n).child("documents");return e===void 0?t:t.child(e)}function SA(n){const e=bn.fromString(n);return rn(DA(e),10190,{key:e.toString()}),e}function yd(n,e){return Mm(n.databaseId,e.path)}function Yu(n,e){const t=SA(e);if(t.get(1)!==n.databaseId.projectId)throw new Ge(Te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ge(Te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new rt(IA(t))}function CA(n,e){return Mm(n.databaseId,e)}function s6(n){const e=SA(n);return e.length===4?bn.emptyPath():IA(e)}function Gg(n){return new bn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function IA(n){return rn(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function kE(n,e,t){return{name:yd(n,e),fields:t.value.mapValue.fields}}function a6(n,e){return"found"in e?(function(s,c){rn(!!c.found,43571),c.found.name,c.found.updateTime;const h=Yu(s,c.found.name),p=es(c.found.updateTime),T=c.found.createTime?es(c.found.createTime):ht.min(),w=new _i({mapValue:{fields:c.found.fields}});return jr.newFoundDocument(h,p,T,w)})(n,e):"missing"in e?(function(s,c){rn(!!c.missing,3894),rn(!!c.readTime,22933);const h=Yu(s,c.missing),p=es(c.readTime);return jr.newNoDocument(h,p)})(n,e):at(7234,{result:e})}function o6(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(E){return E==="NO_CHANGE"?0:E==="ADD"?1:E==="REMOVE"?2:E==="CURRENT"?3:E==="RESET"?4:at(39313,{state:E})})(e.targetChange.targetChangeType||"NO_CHANGE"),c=e.targetChange.targetIds||[],h=(function(E,C){return E.useProto3Json?(rn(C===void 0||typeof C=="string",58123),Zr.fromBase64String(C||"")):(rn(C===void 0||C instanceof Buffer||C instanceof Uint8Array,16193),Zr.fromUint8Array(C||new Uint8Array))})(n,e.targetChange.resumeToken),p=e.targetChange.cause,T=p&&(function(E){const C=E.code===void 0?Te.UNKNOWN:bA(E.code);return new Ge(C,E.message||"")})(p);t=new vA(s,c,h,T||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const c=Yu(n,s.document.name),h=es(s.document.updateTime),p=s.document.createTime?es(s.document.createTime):ht.min(),T=new _i({mapValue:{fields:s.document.fields}}),w=jr.newFoundDocument(c,h,p,T),E=s.targetIds||[],C=s.removedTargetIds||[];t=new Qf(E,C,w.key,w)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const c=Yu(n,s.document),h=s.readTime?es(s.readTime):ht.min(),p=jr.newNoDocument(c,h),T=s.removedTargetIds||[];t=new Qf([],T,p.key,p)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const c=Yu(n,s.document),h=s.removedTargetIds||[];t=new Qf([],h,c,null)}else{if(!("filter"in e))return at(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:c=0,unchangedNames:h}=s,p=new QR(c,h),T=s.targetId;t=new AA(T,p)}}return t}function NA(n,e){let t;if(e instanceof dh)t={update:kE(n,e.key,e.value)};else if(e instanceof gh)t={delete:yd(n,e.key)};else if(e instanceof Xo)t={update:kE(n,e.key,e.data),updateMask:p6(e.fieldMask)};else{if(!(e instanceof _A))return at(16599,{Vt:e.type});t={verify:yd(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(h,p){const T=p.transform;if(T instanceof md)return{fieldPath:p.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(T instanceof rh)return{fieldPath:p.field.canonicalString(),appendMissingElements:{values:T.elements}};if(T instanceof ih)return{fieldPath:p.field.canonicalString(),removeAllFromArray:{values:T.elements}};if(T instanceof pd)return{fieldPath:p.field.canonicalString(),increment:T.Ae};throw at(20930,{transform:p.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(c,h){return h.updateTime!==void 0?{updateTime:i6(c,h.updateTime)}:h.exists!==void 0?{exists:h.exists}:at(27497)})(n,e.precondition)),t}function l6(n,e){return n&&n.length>0?(rn(e!==void 0,14353),n.map((t=>(function(c,h){let p=c.updateTime?es(c.updateTime):es(h);return p.isEqual(ht.min())&&(p=es(h)),new qR(p,c.transformResults||[])})(t,e)))):[]}function c6(n,e){return{documents:[CA(n,e.path)]}}function u6(n,e){const t={structuredQuery:{}},s=e.path;let c;e.collectionGroup!==null?(c=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(c=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=CA(n,c);const h=(function(E){if(E.length!==0)return OA(Ms.create(E,"and"))})(e.filters);h&&(t.structuredQuery.where=h);const p=(function(E){if(E.length!==0)return E.map((C=>(function(M){return{field:fc(M.field),direction:d6(M.dir)}})(C)))})(e.orderBy);p&&(t.structuredQuery.orderBy=p);const T=zg(n,e.limit);return T!==null&&(t.structuredQuery.limit=T),e.startAt&&(t.structuredQuery.startAt=(function(E){return{before:E.inclusive,values:E.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(E){return{before:!E.inclusive,values:E.position}})(e.endAt)),{ft:t,parent:c}}function h6(n){let e=s6(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let c=null;if(s>0){rn(s===1,65062);const C=t.from[0];C.allDescendants?c=C.collectionId:e=e.child(C.collectionId)}let h=[];t.where&&(h=(function(I){const M=RA(I);return M instanceof Ms&&rA(M)?M.getFilters():[M]})(t.where));let p=[];t.orderBy&&(p=(function(I){return I.map((M=>(function(W){return new dd(dc(W.field),(function(Y){switch(Y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(W.direction))})(M)))})(t.orderBy));let T=null;t.limit&&(T=(function(I){let M;return M=typeof I=="object"?I.value:I,hh(M)?null:M})(t.limit));let w=null;t.startAt&&(w=(function(I){const M=!!I.before,B=I.values||[];return new fd(B,M)})(t.startAt));let E=null;return t.endAt&&(E=(function(I){const M=!I.before,B=I.values||[];return new fd(B,M)})(t.endAt)),DR(e,c,p,h,T,"F",w,E)}function f6(n,e){const t=(function(c){switch(c){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return at(28987,{purpose:c})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function RA(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=dc(t.unaryFilter.field);return vr.create(s,"==",{doubleValue:NaN});case"IS_NULL":const c=dc(t.unaryFilter.field);return vr.create(c,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const h=dc(t.unaryFilter.field);return vr.create(h,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const p=dc(t.unaryFilter.field);return vr.create(p,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return at(61313);default:return at(60726)}})(n):n.fieldFilter!==void 0?(function(t){return vr.create(dc(t.fieldFilter.field),(function(c){switch(c){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return at(58110);default:return at(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ms.create(t.compositeFilter.filters.map((s=>RA(s))),(function(c){switch(c){case"AND":return"and";case"OR":return"or";default:return at(1026)}})(t.compositeFilter.op))})(n):at(30097,{filter:n})}function d6(n){return e6[n]}function g6(n){return t6[n]}function m6(n){return n6[n]}function fc(n){return{fieldPath:n.canonicalString()}}function dc(n){return Qr.fromServerFormat(n.fieldPath)}function OA(n){return n instanceof vr?(function(t){if(t.op==="=="){if(AE(t.value))return{unaryFilter:{field:fc(t.field),op:"IS_NAN"}};if(bE(t.value))return{unaryFilter:{field:fc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(AE(t.value))return{unaryFilter:{field:fc(t.field),op:"IS_NOT_NAN"}};if(bE(t.value))return{unaryFilter:{field:fc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fc(t.field),op:g6(t.op),value:t.value}}})(n):n instanceof Ms?(function(t){const s=t.getFilters().map((c=>OA(c)));return s.length===1?s[0]:{compositeFilter:{op:m6(t.op),filters:s}}})(n):at(54877,{filter:n})}function p6(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function DA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,t,s,c,h=ht.min(),p=ht.min(),T=Zr.EMPTY_BYTE_STRING,w=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=c,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=T,this.expectedCount=w}withSequenceNumber(e){return new Oo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Oo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Oo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Oo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{constructor(e){this.yt=e}}function y6(n){const e=h6({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?gd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E6{constructor(){this.Cn=new _6}addToCollectionParentIndex(e,t){return this.Cn.add(t),Ne.resolve()}getCollectionParents(e,t){return Ne.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Ne.resolve()}deleteFieldIndex(e,t){return Ne.resolve()}deleteAllFieldIndexes(e){return Ne.resolve()}createTargetIndexes(e,t){return Ne.resolve()}getDocumentsMatchingTarget(e,t){return Ne.resolve(null)}getIndexType(e,t){return Ne.resolve(0)}getFieldIndexes(e,t){return Ne.resolve([])}getNextCollectionGroupToUpdate(e){return Ne.resolve(null)}getMinOffset(e,t){return Ne.resolve(jo.min())}getMinOffsetFromCollectionGroup(e,t){return Ne.resolve(jo.min())}updateCollectionGroup(e,t,s){return Ne.resolve()}updateIndexEntries(e,t){return Ne.resolve()}}class _6{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),c=this.index[t]||new Pr(bn.comparator),h=!c.has(s);return this.index[t]=c.add(s),h}has(e){const t=e.lastSegment(),s=e.popLast(),c=this.index[t];return c&&c.has(s)}getEntries(e){return(this.index[e]||new Pr(bn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},MA=41943040;class ki{static withCacheSize(e){return new ki(e,ki.DEFAULT_COLLECTION_PERCENTILE,ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ki.DEFAULT_COLLECTION_PERCENTILE=10,ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ki.DEFAULT=new ki(MA,ki.DEFAULT_COLLECTION_PERCENTILE,ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ki.DISABLED=new ki(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Oc(0)}static cr(){return new Oc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE="LruGarbageCollector",w6=1048576;function VE([n,e],[t,s]){const c=Wt(n,t);return c===0?Wt(e,s):c}class b6{constructor(e){this.Ir=e,this.buffer=new Pr(VE),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();VE(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class A6{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ye(UE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){zc(t)?Ye(UE,"Ignoring IndexedDB error during garbage collection: ",t):await Fc(t)}await this.Vr(3e5)}))}}class v6{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return Ne.resolve(Fd.ce);const s=new b6(t);return this.mr.forEachTarget(e,(c=>s.Ar(c.sequenceNumber))).next((()=>this.mr.pr(e,(c=>s.Ar(c))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ye("LruGarbageCollector","Garbage collection skipped; disabled"),Ne.resolve(BE)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),BE):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,c,h,p,T,w,E;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((I=>(I>this.params.maximumSequenceNumbersToCollect?(Ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),c=this.params.maximumSequenceNumbersToCollect):c=I,p=Date.now(),this.nthSequenceNumber(e,c)))).next((I=>(s=I,T=Date.now(),this.removeTargets(e,s,t)))).next((I=>(h=I,w=Date.now(),this.removeOrphanedDocuments(e,s)))).next((I=>(E=Date.now(),uc()<=Xt.DEBUG&&Ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${p-C}ms
	Determined least recently used ${c} in `+(T-p)+`ms
	Removed ${h} targets in `+(w-T)+`ms
	Removed ${I} documents in `+(E-w)+`ms
Total Duration: ${E-C}ms`),Ne.resolve({didRun:!0,sequenceNumbersCollected:c,targetsRemoved:h,documentsRemoved:I}))))}}function T6(n,e){return new v6(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S6{constructor(){this.changes=new Rl((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,jr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?Ne.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{constructor(e,t,s,c){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=c}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((c=>(s=c,this.remoteDocumentCache.getEntry(e,t)))).next((c=>(s!==null&&qu(s.mutation,c,$i.empty(),jn.now()),c)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Kt()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Kt()){const c=wl();return this.populateOverlays(e,c,t).next((()=>this.computeViews(e,t,c,s).next((h=>{let p=ku();return h.forEach(((T,w)=>{p=p.insert(T,w.overlayedDocument)})),p}))))}getOverlayedDocuments(e,t){const s=wl();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Kt())))}populateOverlays(e,t,s){const c=[];return s.forEach((h=>{t.has(h)||c.push(h)})),this.documentOverlayCache.getOverlays(e,c).next((h=>{h.forEach(((p,T)=>{t.set(p,T)}))}))}computeViews(e,t,s,c){let h=Ha();const p=Gu(),T=(function(){return Gu()})();return t.forEach(((w,E)=>{const C=s.get(E.key);c.has(E.key)&&(C===void 0||C.mutation instanceof Xo)?h=h.insert(E.key,E):C!==void 0?(p.set(E.key,C.mutation.getFieldMask()),qu(C.mutation,E,C.mutation.getFieldMask(),jn.now())):p.set(E.key,$i.empty())})),this.recalculateAndSaveOverlays(e,h).next((w=>(w.forEach(((E,C)=>p.set(E,C))),t.forEach(((E,C)=>T.set(E,new C6(C,p.get(E)??null)))),T)))}recalculateAndSaveOverlays(e,t){const s=Gu();let c=new Zn(((p,T)=>p-T)),h=Kt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((p=>{for(const T of p)T.keys().forEach((w=>{const E=t.get(w);if(E===null)return;let C=s.get(w)||$i.empty();C=T.applyToLocalView(E,C),s.set(w,C);const I=(c.get(T.batchId)||Kt()).add(w);c=c.insert(T.batchId,I)}))})).next((()=>{const p=[],T=c.getReverseIterator();for(;T.hasNext();){const w=T.getNext(),E=w.key,C=w.value,I=fA();C.forEach((M=>{if(!h.has(M)){const B=yA(t.get(M),s.get(M));B!==null&&I.set(M,B),h=h.add(M)}})),p.push(this.documentOverlayCache.saveOverlays(e,E,I))}return Ne.waitFor(p)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,c){return(function(p){return rt.isDocumentKey(p.path)&&p.collectionGroup===null&&p.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):oA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,c):this.getDocumentsMatchingCollectionQuery(e,t,s,c)}getNextDocuments(e,t,s,c){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,c).next((h=>{const p=c-h.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,c-h.size):Ne.resolve(wl());let T=$u,w=h;return p.next((E=>Ne.forEach(E,((C,I)=>(T<I.largestBatchId&&(T=I.largestBatchId),h.get(C)?Ne.resolve():this.remoteDocumentCache.getEntry(e,C).next((M=>{w=w.insert(C,M)}))))).next((()=>this.populateOverlays(e,E,h))).next((()=>this.computeViews(e,w,E,Kt()))).next((C=>({batchId:T,changes:hA(C)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new rt(t)).next((s=>{let c=ku();return s.isFoundDocument()&&(c=c.insert(s.key,s)),c}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,c){const h=t.collectionGroup;let p=ku();return this.indexManager.getCollectionParents(e,h).next((T=>Ne.forEach(T,(w=>{const E=(function(I,M){return new fh(M,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)})(t,w.child(h));return this.getDocumentsMatchingCollectionQuery(e,E,s,c).next((C=>{C.forEach(((I,M)=>{p=p.insert(I,M)}))}))})).next((()=>p))))}getDocumentsMatchingCollectionQuery(e,t,s,c){let h;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((p=>(h=p,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,h,c)))).next((p=>{h.forEach(((w,E)=>{const C=E.getKey();p.get(C)===null&&(p=p.insert(C,jr.newInvalidDocument(C)))}));let T=ku();return p.forEach(((w,E)=>{const C=h.get(w);C!==void 0&&qu(C.mutation,E,$i.empty(),jn.now()),qd(t,E)&&(T=T.insert(w,E))})),T}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N6{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Ne.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(c){return{id:c.id,version:c.version,createTime:es(c.createTime)}})(t)),Ne.resolve()}getNamedQuery(e,t){return Ne.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(c){return{name:c.name,query:y6(c.bundledQuery),readTime:es(c.readTime)}})(t)),Ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(){this.overlays=new Zn(rt.comparator),this.qr=new Map}getOverlay(e,t){return Ne.resolve(this.overlays.get(t))}getOverlays(e,t){const s=wl();return Ne.forEach(t,(c=>this.getOverlay(e,c).next((h=>{h!==null&&s.set(c,h)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((c,h)=>{this.St(e,t,h)})),Ne.resolve()}removeOverlaysForBatchId(e,t,s){const c=this.qr.get(s);return c!==void 0&&(c.forEach((h=>this.overlays=this.overlays.remove(h))),this.qr.delete(s)),Ne.resolve()}getOverlaysForCollection(e,t,s){const c=wl(),h=t.length+1,p=new rt(t.child("")),T=this.overlays.getIteratorFrom(p);for(;T.hasNext();){const w=T.getNext().value,E=w.getKey();if(!t.isPrefixOf(E.path))break;E.path.length===h&&w.largestBatchId>s&&c.set(w.getKey(),w)}return Ne.resolve(c)}getOverlaysForCollectionGroup(e,t,s,c){let h=new Zn(((E,C)=>E-C));const p=this.overlays.getIterator();for(;p.hasNext();){const E=p.getNext().value;if(E.getKey().getCollectionGroup()===t&&E.largestBatchId>s){let C=h.get(E.largestBatchId);C===null&&(C=wl(),h=h.insert(E.largestBatchId,C)),C.set(E.getKey(),E)}}const T=wl(),w=h.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach(((E,C)=>T.set(E,C))),!(T.size()>=c)););return Ne.resolve(T)}St(e,t,s){const c=this.overlays.get(s.key);if(c!==null){const p=this.qr.get(c.largestBatchId).delete(s.key);this.qr.set(c.largestBatchId,p)}this.overlays=this.overlays.insert(s.key,new KR(t,s));let h=this.qr.get(t);h===void 0&&(h=Kt(),this.qr.set(t,h)),this.qr.set(t,h.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(){this.sessionToken=Zr.EMPTY_BYTE_STRING}getSessionToken(e){return Ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(){this.Qr=new Pr(Vr.$r),this.Ur=new Pr(Vr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Vr(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Vr(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new rt(new bn([])),s=new Vr(t,e),c=new Vr(t,e+1),h=[];return this.Ur.forEachInRange([s,c],(p=>{this.Gr(p),h.push(p.key)})),h}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new rt(new bn([])),s=new Vr(t,e),c=new Vr(t,e+1);let h=Kt();return this.Ur.forEachInRange([s,c],(p=>{h=h.add(p.key)})),h}containsKey(e){const t=new Vr(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Vr{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return rt.comparator(e.key,t.key)||Wt(e.Yr,t.Yr)}static Kr(e,t){return Wt(e.Yr,t.Yr)||rt.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Pr(Vr.$r)}checkEmpty(e){return Ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,c){const h=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const p=new WR(h,t,s,c);this.mutationQueue.push(p);for(const T of c)this.Zr=this.Zr.add(new Vr(T.key,h)),this.indexManager.addToCollectionParentIndex(e,T.key.path.popLast());return Ne.resolve(p)}lookupMutationBatch(e,t){return Ne.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,c=this.ei(s),h=c<0?0:c;return Ne.resolve(this.mutationQueue.length>h?this.mutationQueue[h]:null)}getHighestUnacknowledgedBatchId(){return Ne.resolve(this.mutationQueue.length===0?Tm:this.tr-1)}getAllMutationBatches(e){return Ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Vr(t,0),c=new Vr(t,Number.POSITIVE_INFINITY),h=[];return this.Zr.forEachInRange([s,c],(p=>{const T=this.Xr(p.Yr);h.push(T)})),Ne.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Pr(Wt);return t.forEach((c=>{const h=new Vr(c,0),p=new Vr(c,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([h,p],(T=>{s=s.add(T.Yr)}))})),Ne.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,c=s.length+1;let h=s;rt.isDocumentKey(h)||(h=h.child(""));const p=new Vr(new rt(h),0);let T=new Pr(Wt);return this.Zr.forEachWhile((w=>{const E=w.key.path;return!!s.isPrefixOf(E)&&(E.length===c&&(T=T.add(w.Yr)),!0)}),p),Ne.resolve(this.ti(T))}ti(e){const t=[];return e.forEach((s=>{const c=this.Xr(s);c!==null&&t.push(c)})),t}removeMutationBatch(e,t){rn(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return Ne.forEach(t.mutations,(c=>{const h=new Vr(c.key,t.batchId);return s=s.delete(h),this.referenceDelegate.markPotentiallyOrphaned(e,c.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Vr(t,0),c=this.Zr.firstAfterOrEqual(s);return Ne.resolve(t.isEqual(c&&c.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ne.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(e){this.ri=e,this.docs=(function(){return new Zn(rt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,c=this.docs.get(s),h=c?c.size:0,p=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:p}),this.size+=p-h,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Ne.resolve(s?s.document.mutableCopy():jr.newInvalidDocument(t))}getEntries(e,t){let s=Ha();return t.forEach((c=>{const h=this.docs.get(c);s=s.insert(c,h?h.document.mutableCopy():jr.newInvalidDocument(c))})),Ne.resolve(s)}getDocumentsMatchingQuery(e,t,s,c){let h=Ha();const p=t.path,T=new rt(p.child("__id-9223372036854775808__")),w=this.docs.getIteratorFrom(T);for(;w.hasNext();){const{key:E,value:{document:C}}=w.getNext();if(!p.isPrefixOf(E.path))break;E.path.length>p.length+1||uR(cR(C),s)<=0||(c.has(C.key)||qd(t,C))&&(h=h.insert(C.key,C.mutableCopy()))}return Ne.resolve(h)}getAllFromCollectionGroup(e,t,s,c){at(9500)}ii(e,t){return Ne.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new P6(this)}getSize(e){return Ne.resolve(this.size)}}class P6 extends S6{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,c)=>{c.isValidDocument()?t.push(this.Nr.addEntry(e,c)):this.Nr.removeEntry(s)})),Ne.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(e){this.persistence=e,this.si=new Rl((t=>Im(t)),Nm),this.lastRemoteSnapshotVersion=ht.min(),this.highestTargetId=0,this.oi=0,this._i=new Pm,this.targetCount=0,this.ai=Oc.ur()}forEachTarget(e,t){return this.si.forEach(((s,c)=>t(c))),Ne.resolve()}getLastRemoteSnapshotVersion(e){return Ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ne.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),Ne.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Oc(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Ne.resolve()}updateTargetData(e,t){return this.Pr(t),Ne.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Ne.resolve()}removeTargets(e,t,s){let c=0;const h=[];return this.si.forEach(((p,T)=>{T.sequenceNumber<=t&&s.get(T.targetId)===null&&(this.si.delete(p),h.push(this.removeMatchingKeysForTargetId(e,T.targetId)),c++)})),Ne.waitFor(h).next((()=>c))}getTargetCount(e){return Ne.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return Ne.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),Ne.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const c=this.persistence.referenceDelegate,h=[];return c&&t.forEach((p=>{h.push(c.markPotentiallyOrphaned(e,p))})),Ne.waitFor(h)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Ne.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return Ne.resolve(s)}containsKey(e,t){return Ne.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e,t){this.ui={},this.overlays={},this.ci=new Fd(0),this.li=!1,this.li=!0,this.hi=new O6,this.referenceDelegate=e(this),this.Pi=new L6(this),this.indexManager=new E6,this.remoteDocumentCache=(function(c){return new M6(c)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new x6(t),this.Ii=new N6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new R6,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new D6(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){Ye("MemoryPersistence","Starting transaction:",e);const c=new k6(this.ci.next());return this.referenceDelegate.Ei(),s(c).next((h=>this.referenceDelegate.di(c).next((()=>h)))).toPromise().then((h=>(c.raiseOnCommittedEvent(),h)))}Ai(e,t){return Ne.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class k6 extends fR{constructor(e){super(),this.currentSequenceNumber=e}}class Lm{constructor(e){this.persistence=e,this.Ri=new Pm,this.Vi=null}static mi(e){return new Lm(e)}get fi(){if(this.Vi)return this.Vi;throw at(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),Ne.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),Ne.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Ne.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((c=>this.fi.add(c.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((c=>{c.forEach((h=>this.fi.add(h.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ne.forEach(this.fi,(s=>{const c=rt.fromPath(s);return this.gi(e,c).next((h=>{h||t.removeEntry(c,ht.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return Ne.or([()=>Ne.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Ed{constructor(e,t){this.persistence=e,this.pi=new Rl((s=>mR(s.path)),((s,c)=>s.isEqual(c))),this.garbageCollector=T6(this,t)}static mi(e,t){return new Ed(e,t)}Ei(){}di(e){return Ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((c=>s+c))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return Ne.forEach(this.pi,((s,c)=>this.br(e,s,c).next((h=>h?Ne.resolve():t(c)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const c=this.persistence.getRemoteDocumentCache(),h=c.newChangeBuffer();return c.ii(e,(p=>this.br(e,p,t).next((T=>{T||(s++,h.removeEntry(p,ht.min()))})))).next((()=>h.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Ne.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),Ne.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),Ne.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Ne.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Xf(e.data.value)),t}br(e,t,s){return Ne.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const c=this.pi.get(t);return Ne.resolve(c!==void 0&&c>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,t,s,c){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=c}static As(e,t){let s=Kt(),c=Kt();for(const h of t.docChanges)switch(h.type){case 0:s=s.add(h.doc.key);break;case 1:c=c.add(h.doc.key)}return new km(e,t.fromCache,s,c)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return MN()?8:dR(fi())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,c){const h={result:null};return this.ys(e,t).next((p=>{h.result=p})).next((()=>{if(!h.result)return this.ws(e,t,c,s).next((p=>{h.result=p}))})).next((()=>{if(h.result)return;const p=new B6;return this.Ss(e,t,p).next((T=>{if(h.result=T,this.Vs)return this.bs(e,t,p,T.size)}))})).next((()=>h.result))}bs(e,t,s,c){return s.documentReadCount<this.fs?(uc()<=Xt.DEBUG&&Ye("QueryEngine","SDK will not create cache indexes for query:",hc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ne.resolve()):(uc()<=Xt.DEBUG&&Ye("QueryEngine","Query:",hc(t),"scans",s.documentReadCount,"local documents and returns",c,"documents as results."),s.documentReadCount>this.gs*c?(uc()<=Xt.DEBUG&&Ye("QueryEngine","The SDK decides to create cache indexes for query:",hc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ws(t))):Ne.resolve())}ys(e,t){if(CE(t))return Ne.resolve(null);let s=Ws(t);return this.indexManager.getIndexType(e,s).next((c=>c===0?null:(t.limit!==null&&c===1&&(t=gd(t,null,"F"),s=Ws(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((h=>{const p=Kt(...h);return this.ps.getDocuments(e,p).next((T=>this.indexManager.getMinOffset(e,s).next((w=>{const E=this.Ds(t,T);return this.Cs(t,E,p,w.readTime)?this.ys(e,gd(t,null,"F")):this.vs(e,E,t,w)}))))})))))}ws(e,t,s,c){return CE(t)||c.isEqual(ht.min())?Ne.resolve(null):this.ps.getDocuments(e,s).next((h=>{const p=this.Ds(t,h);return this.Cs(t,p,s,c)?Ne.resolve(null):(uc()<=Xt.DEBUG&&Ye("QueryEngine","Re-using previous result from %s to execute query: %s",c.toString(),hc(t)),this.vs(e,p,t,lR(c,$u)).next((T=>T)))}))}Ds(e,t){let s=new Pr(cA(e));return t.forEach(((c,h)=>{qd(e,h)&&(s=s.add(h))})),s}Cs(e,t,s,c){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const h=e.limitType==="F"?t.last():t.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(c)>0)}Ss(e,t,s){return uc()<=Xt.DEBUG&&Ye("QueryEngine","Using full collection scan to execute query:",hc(t)),this.ps.getDocumentsMatchingQuery(e,t,jo.min(),s)}vs(e,t,s,c){return this.ps.getDocumentsMatchingQuery(e,s,c).next((h=>(t.forEach((p=>{h=h.insert(p.key,p)})),h)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm="LocalStore",V6=3e8;class j6{constructor(e,t,s,c){this.persistence=e,this.Fs=t,this.serializer=c,this.Ms=new Zn(Wt),this.xs=new Rl((h=>Im(h)),Nm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new I6(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function F6(n,e,t,s){return new j6(n,e,t,s)}async function LA(n,e){const t=yt(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let c;return t.mutationQueue.getAllMutationBatches(s).next((h=>(c=h,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((h=>{const p=[],T=[];let w=Kt();for(const E of c){p.push(E.batchId);for(const C of E.mutations)w=w.add(C.key)}for(const E of h){T.push(E.batchId);for(const C of E.mutations)w=w.add(C.key)}return t.localDocuments.getDocuments(s,w).next((E=>({Ls:E,removedBatchIds:p,addedBatchIds:T})))}))}))}function z6(n,e){const t=yt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const c=e.batch.keys(),h=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(T,w,E,C){const I=E.batch,M=I.keys();let B=Ne.resolve();return M.forEach((W=>{B=B.next((()=>C.getEntry(w,W))).next((Q=>{const Y=E.docVersions.get(W);rn(Y!==null,48541),Q.version.compareTo(Y)<0&&(I.applyToRemoteDocument(Q,E),Q.isValidDocument()&&(Q.setReadTime(E.commitVersion),C.addEntry(Q)))}))})),B.next((()=>T.mutationQueue.removeMutationBatch(w,I)))})(t,s,e,h).next((()=>h.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,c,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(T){let w=Kt();for(let E=0;E<T.mutationResults.length;++E)T.mutationResults[E].transformResults.length>0&&(w=w.add(T.batch.mutations[E].key));return w})(e)))).next((()=>t.localDocuments.getDocuments(s,c)))}))}function kA(n){const e=yt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function H6(n,e){const t=yt(n),s=e.snapshotVersion;let c=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(h=>{const p=t.Ns.newChangeBuffer({trackRemovals:!0});c=t.Ms;const T=[];e.targetChanges.forEach(((C,I)=>{const M=c.get(I);if(!M)return;T.push(t.Pi.removeMatchingKeys(h,C.removedDocuments,I).next((()=>t.Pi.addMatchingKeys(h,C.addedDocuments,I))));let B=M.withSequenceNumber(h.currentSequenceNumber);e.targetMismatches.get(I)!==null?B=B.withResumeToken(Zr.EMPTY_BYTE_STRING,ht.min()).withLastLimboFreeSnapshotVersion(ht.min()):C.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(C.resumeToken,s)),c=c.insert(I,B),(function(Q,Y,_e){return Q.resumeToken.approximateByteSize()===0||Y.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=V6?!0:_e.addedDocuments.size+_e.modifiedDocuments.size+_e.removedDocuments.size>0})(M,B,C)&&T.push(t.Pi.updateTargetData(h,B))}));let w=Ha(),E=Kt();if(e.documentUpdates.forEach((C=>{e.resolvedLimboDocuments.has(C)&&T.push(t.persistence.referenceDelegate.updateLimboDocument(h,C))})),T.push(G6(h,p,e.documentUpdates).next((C=>{w=C.ks,E=C.qs}))),!s.isEqual(ht.min())){const C=t.Pi.getLastRemoteSnapshotVersion(h).next((I=>t.Pi.setTargetsMetadata(h,h.currentSequenceNumber,s)));T.push(C)}return Ne.waitFor(T).next((()=>p.apply(h))).next((()=>t.localDocuments.getLocalViewOfDocuments(h,w,E))).next((()=>w))})).then((h=>(t.Ms=c,h)))}function G6(n,e,t){let s=Kt(),c=Kt();return t.forEach((h=>s=s.add(h))),e.getEntries(n,s).next((h=>{let p=Ha();return t.forEach(((T,w)=>{const E=h.get(T);w.isFoundDocument()!==E.isFoundDocument()&&(c=c.add(T)),w.isNoDocument()&&w.version.isEqual(ht.min())?(e.removeEntry(T,w.readTime),p=p.insert(T,w)):!E.isValidDocument()||w.version.compareTo(E.version)>0||w.version.compareTo(E.version)===0&&E.hasPendingWrites?(e.addEntry(w),p=p.insert(T,w)):Ye(Bm,"Ignoring outdated watch update for ",T,". Current version:",E.version," Watch version:",w.version)})),{ks:p,qs:c}}))}function q6(n,e){const t=yt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Tm),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function Y6(n,e){const t=yt(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let c;return t.Pi.getTargetData(s,e).next((h=>h?(c=h,Ne.resolve(c)):t.Pi.allocateTargetId(s).next((p=>(c=new Oo(e,p,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,c).next((()=>c)))))))})).then((s=>{const c=t.Ms.get(s.targetId);return(c===null||s.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function qg(n,e,t){const s=yt(n),c=s.Ms.get(e),h=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",h,(p=>s.persistence.referenceDelegate.removeTarget(p,c)))}catch(p){if(!zc(p))throw p;Ye(Bm,`Failed to update sequence numbers for target ${e}: ${p}`)}s.Ms=s.Ms.remove(e),s.xs.delete(c.target)}function jE(n,e,t){const s=yt(n);let c=ht.min(),h=Kt();return s.persistence.runTransaction("Execute query","readwrite",(p=>(function(w,E,C){const I=yt(w),M=I.xs.get(C);return M!==void 0?Ne.resolve(I.Ms.get(M)):I.Pi.getTargetData(E,C)})(s,p,Ws(e)).next((T=>{if(T)return c=T.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(p,T.targetId).next((w=>{h=w}))})).next((()=>s.Fs.getDocumentsMatchingQuery(p,e,t?c:ht.min(),t?h:Kt()))).next((T=>(X6(s,PR(e),T),{documents:T,Qs:h})))))}function X6(n,e,t){let s=n.Os.get(e)||ht.min();t.forEach(((c,h)=>{h.readTime.compareTo(s)>0&&(s=h.readTime)})),n.Os.set(e,s)}class FE{constructor(){this.activeTargetIds=jR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class W6{constructor(){this.Mo=new FE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new FE,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE="ConnectivityMonitor";class HE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ye(zE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ye(zE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lf=null;function Yg(){return Lf===null?Lf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Lf++,"0x"+Lf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg="RestConnection",Q6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Z6{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${c}`,this.Wo=this.databaseId.database===ud?`project_id=${s}`:`project_id=${s}&database_id=${c}`}Go(e,t,s,c,h){const p=Yg(),T=this.zo(e,t.toUriEncodedString());Ye(dg,`Sending RPC '${e}' ${p}:`,T,s);const w={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(w,c,h);const{host:E}=new URL(T),C=Uc(E);return this.Jo(e,T,w,s,C).then((I=>(Ye(dg,`Received RPC '${e}' ${p}: `,I),I)),(I=>{throw Cc(dg,`RPC '${e}' ${p} failed with error: `,I,"url: ",T,"request:",s),I}))}Ho(e,t,s,c,h,p){return this.Go(e,t,s,c,h)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+jc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((c,h)=>e[h]=c)),s&&s.headers.forEach(((c,h)=>e[h]=c))}zo(e,t){const s=Q6[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ui="WebChannelConnection";class $6 extends Z6{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,c,h){const p=Yg();return new Promise(((T,w)=>{const E=new kb;E.setWithCredentials(!0),E.listenOnce(Bb.COMPLETE,(()=>{try{switch(E.getLastErrorCode()){case Yf.NO_ERROR:const I=E.getResponseJson();Ye(ui,`XHR for RPC '${e}' ${p} received:`,JSON.stringify(I)),T(I);break;case Yf.TIMEOUT:Ye(ui,`RPC '${e}' ${p} timed out`),w(new Ge(Te.DEADLINE_EXCEEDED,"Request time out"));break;case Yf.HTTP_ERROR:const M=E.getStatus();if(Ye(ui,`RPC '${e}' ${p} failed with status:`,M,"response text:",E.getResponseText()),M>0){let B=E.getResponseJson();Array.isArray(B)&&(B=B[0]);const W=B==null?void 0:B.error;if(W&&W.status&&W.message){const Q=(function(_e){const ae=_e.toLowerCase().replace(/_/g,"-");return Object.values(Te).indexOf(ae)>=0?ae:Te.UNKNOWN})(W.status);w(new Ge(Q,W.message))}else w(new Ge(Te.UNKNOWN,"Server responded with status "+E.getStatus()))}else w(new Ge(Te.UNAVAILABLE,"Connection failed."));break;default:at(9055,{l_:e,streamId:p,h_:E.getLastErrorCode(),P_:E.getLastError()})}}finally{Ye(ui,`RPC '${e}' ${p} completed.`)}}));const C=JSON.stringify(c);Ye(ui,`RPC '${e}' ${p} sending request:`,c),E.send(t,"POST",C,s,15)}))}T_(e,t,s){const c=Yg(),h=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],p=jb(),T=Vb(),w={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},E=this.longPollingOptions.timeoutSeconds;E!==void 0&&(w.longPollingTimeout=Math.round(1e3*E)),this.useFetchStreams&&(w.useFetchStreams=!0),this.jo(w.initMessageHeaders,t,s),w.encodeInitMessageHeaders=!0;const C=h.join("");Ye(ui,`Creating RPC '${e}' stream ${c}: ${C}`,w);const I=p.createWebChannel(C,w);this.I_(I);let M=!1,B=!1;const W=new J6({Yo:Y=>{B?Ye(ui,`Not sending because RPC '${e}' stream ${c} is closed:`,Y):(M||(Ye(ui,`Opening RPC '${e}' stream ${c} transport.`),I.open(),M=!0),Ye(ui,`RPC '${e}' stream ${c} sending:`,Y),I.send(Y))},Zo:()=>I.close()}),Q=(Y,_e,ae)=>{Y.listen(_e,(K=>{try{ae(K)}catch(ce){setTimeout((()=>{throw ce}),0)}}))};return Q(I,Lu.EventType.OPEN,(()=>{B||(Ye(ui,`RPC '${e}' stream ${c} transport opened.`),W.o_())})),Q(I,Lu.EventType.CLOSE,(()=>{B||(B=!0,Ye(ui,`RPC '${e}' stream ${c} transport closed`),W.a_(),this.E_(I))})),Q(I,Lu.EventType.ERROR,(Y=>{B||(B=!0,Cc(ui,`RPC '${e}' stream ${c} transport errored. Name:`,Y.name,"Message:",Y.message),W.a_(new Ge(Te.UNAVAILABLE,"The operation could not be completed")))})),Q(I,Lu.EventType.MESSAGE,(Y=>{var _e;if(!B){const ae=Y.data[0];rn(!!ae,16349);const K=ae,ce=(K==null?void 0:K.error)||((_e=K[0])==null?void 0:_e.error);if(ce){Ye(ui,`RPC '${e}' stream ${c} received error:`,ce);const Re=ce.status;let De=(function(j){const Z=Ar[j];if(Z!==void 0)return bA(Z)})(Re),F=ce.message;De===void 0&&(De=Te.INTERNAL,F="Unknown error status: "+Re+" with message "+ce.message),B=!0,W.a_(new Ge(De,F)),I.close()}else Ye(ui,`RPC '${e}' stream ${c} received:`,ae),W.u_(ae)}})),Q(T,Ub.STAT_EVENT,(Y=>{Y.stat===Lg.PROXY?Ye(ui,`RPC '${e}' stream ${c} detected buffering proxy`):Y.stat===Lg.NOPROXY&&Ye(ui,`RPC '${e}' stream ${c} detected no buffering proxy`)})),setTimeout((()=>{W.__()}),0),W}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function gg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(n){return new r6(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e,t,s=1e3,c=1.5,h=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=c,this.R_=h,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),c=Math.max(0,t-s);c>0&&Ye("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,c,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE="PersistentStream";class BA{constructor(e,t,s,c,h,p,T,w){this.Mi=e,this.S_=s,this.b_=c,this.connection=h,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=T,this.listener=w,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Um(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Te.RESOURCE_EXHAUSTED?(za(t.toString()),za("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,c])=>{this.D_===t&&this.G_(s,c)}),(s=>{e((()=>{const c=new Ge(Te.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(c)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((c=>{s((()=>this.z_(c)))})),this.stream.onMessage((c=>{s((()=>++this.F_==1?this.J_(c):this.onNext(c)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ye(GE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Ye(GE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class e8 extends BA{constructor(e,t,s,c,h,p){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,c,p),this.serializer=h}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=o6(this.serializer,e),s=(function(h){if(!("targetChange"in h))return ht.min();const p=h.targetChange;return p.targetIds&&p.targetIds.length?ht.min():p.readTime?es(p.readTime):ht.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Gg(this.serializer),t.addTarget=(function(h,p){let T;const w=p.target;if(T=jg(w)?{documents:c6(h,w)}:{query:u6(h,w).ft},T.targetId=p.targetId,p.resumeToken.approximateByteSize()>0){T.resumeToken=TA(h,p.resumeToken);const E=zg(h,p.expectedCount);E!==null&&(T.expectedCount=E)}else if(p.snapshotVersion.compareTo(ht.min())>0){T.readTime=xd(h,p.snapshotVersion.toTimestamp());const E=zg(h,p.expectedCount);E!==null&&(T.expectedCount=E)}return T})(this.serializer,e);const s=f6(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Gg(this.serializer),t.removeTarget=e,this.q_(t)}}class t8 extends BA{constructor(e,t,s,c,h,p){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,c,p),this.serializer=h}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return rn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,rn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){rn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=l6(e.writeResults,e.commitTime),s=es(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Gg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>NA(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n8{}class r8 extends n8{constructor(e,t,s,c){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=c,this.ia=!1}sa(){if(this.ia)throw new Ge(Te.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,p])=>this.connection.Go(e,Hg(t,s),c,h,p))).catch((h=>{throw h.name==="FirebaseError"?(h.code===Te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Ge(Te.UNKNOWN,h.toString())}))}Ho(e,t,s,c,h){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([p,T])=>this.connection.Ho(e,Hg(t,s),c,p,T,h))).catch((p=>{throw p.name==="FirebaseError"?(p.code===Te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new Ge(Te.UNKNOWN,p.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class i8{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(za(t),this.aa=!1):Ye("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sl="RemoteStore";class s8{constructor(e,t,s,c,h){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=h,this.Aa.Oo((p=>{s.enqueueAndForget((async()=>{Ol(this)&&(Ye(Sl,"Restarting streams for network reachability change."),await(async function(w){const E=yt(w);E.Ea.add(4),await ph(E),E.Ra.set("Unknown"),E.Ea.delete(4),await Qd(E)})(this))}))})),this.Ra=new i8(s,c)}}async function Qd(n){if(Ol(n))for(const e of n.da)await e(!0)}async function ph(n){for(const e of n.da)await e(!1)}function UA(n,e){const t=yt(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),zm(t)?Fm(t):Hc(t).O_()&&jm(t,e))}function Vm(n,e){const t=yt(n),s=Hc(t);t.Ia.delete(e),s.O_()&&VA(t,e),t.Ia.size===0&&(s.O_()?s.L_():Ol(t)&&t.Ra.set("Unknown"))}function jm(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ht.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Hc(n).Y_(e)}function VA(n,e){n.Va.Ue(e),Hc(n).Z_(e)}function Fm(n){n.Va=new $R({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Hc(n).start(),n.Ra.ua()}function zm(n){return Ol(n)&&!Hc(n).x_()&&n.Ia.size>0}function Ol(n){return yt(n).Ea.size===0}function jA(n){n.Va=void 0}async function a8(n){n.Ra.set("Online")}async function o8(n){n.Ia.forEach(((e,t)=>{jm(n,e)}))}async function l8(n,e){jA(n),zm(n)?(n.Ra.ha(e),Fm(n)):n.Ra.set("Unknown")}async function c8(n,e,t){if(n.Ra.set("Online"),e instanceof vA&&e.state===2&&e.cause)try{await(async function(c,h){const p=h.cause;for(const T of h.targetIds)c.Ia.has(T)&&(await c.remoteSyncer.rejectListen(T,p),c.Ia.delete(T),c.Va.removeTarget(T))})(n,e)}catch(s){Ye(Sl,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await _d(n,s)}else if(e instanceof Qf?n.Va.Ze(e):e instanceof AA?n.Va.st(e):n.Va.tt(e),!t.isEqual(ht.min()))try{const s=await kA(n.localStore);t.compareTo(s)>=0&&await(function(h,p){const T=h.Va.Tt(p);return T.targetChanges.forEach(((w,E)=>{if(w.resumeToken.approximateByteSize()>0){const C=h.Ia.get(E);C&&h.Ia.set(E,C.withResumeToken(w.resumeToken,p))}})),T.targetMismatches.forEach(((w,E)=>{const C=h.Ia.get(w);if(!C)return;h.Ia.set(w,C.withResumeToken(Zr.EMPTY_BYTE_STRING,C.snapshotVersion)),VA(h,w);const I=new Oo(C.target,w,E,C.sequenceNumber);jm(h,I)})),h.remoteSyncer.applyRemoteEvent(T)})(n,t)}catch(s){Ye(Sl,"Failed to raise snapshot:",s),await _d(n,s)}}async function _d(n,e,t){if(!zc(e))throw e;n.Ea.add(1),await ph(n),n.Ra.set("Offline"),t||(t=()=>kA(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Ye(Sl,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Qd(n)}))}function FA(n,e){return e().catch((t=>_d(n,t,e)))}async function Zd(n){const e=yt(n),t=Go(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Tm;for(;u8(e);)try{const c=await q6(e.localStore,s);if(c===null){e.Ta.length===0&&t.L_();break}s=c.batchId,h8(e,c)}catch(c){await _d(e,c)}zA(e)&&HA(e)}function u8(n){return Ol(n)&&n.Ta.length<10}function h8(n,e){n.Ta.push(e);const t=Go(n);t.O_()&&t.X_&&t.ea(e.mutations)}function zA(n){return Ol(n)&&!Go(n).x_()&&n.Ta.length>0}function HA(n){Go(n).start()}async function f8(n){Go(n).ra()}async function d8(n){const e=Go(n);for(const t of n.Ta)e.ea(t.mutations)}async function g8(n,e,t){const s=n.Ta.shift(),c=Om.from(s,e,t);await FA(n,(()=>n.remoteSyncer.applySuccessfulWrite(c))),await Zd(n)}async function m8(n,e){e&&Go(n).X_&&await(async function(s,c){if((function(p){return wA(p)&&p!==Te.ABORTED})(c.code)){const h=s.Ta.shift();Go(s).B_(),await FA(s,(()=>s.remoteSyncer.rejectFailedWrite(h.batchId,c))),await Zd(s)}})(n,e),zA(n)&&HA(n)}async function qE(n,e){const t=yt(n);t.asyncQueue.verifyOperationInProgress(),Ye(Sl,"RemoteStore received new credentials");const s=Ol(t);t.Ea.add(3),await ph(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Qd(t)}async function p8(n,e){const t=yt(n);e?(t.Ea.delete(2),await Qd(t)):e||(t.Ea.add(2),await ph(t),t.Ra.set("Unknown"))}function Hc(n){return n.ma||(n.ma=(function(t,s,c){const h=yt(t);return h.sa(),new e8(s,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,c)})(n.datastore,n.asyncQueue,{Xo:a8.bind(null,n),t_:o8.bind(null,n),r_:l8.bind(null,n),H_:c8.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),zm(n)?Fm(n):n.Ra.set("Unknown")):(await n.ma.stop(),jA(n))}))),n.ma}function Go(n){return n.fa||(n.fa=(function(t,s,c){const h=yt(t);return h.sa(),new t8(s,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,c)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:f8.bind(null,n),r_:m8.bind(null,n),ta:d8.bind(null,n),na:g8.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Zd(n)):(await n.fa.stop(),n.Ta.length>0&&(Ye(Sl,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e,t,s,c,h){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=c,this.removalCallback=h,this.deferred=new Xs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((p=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,c,h){const p=Date.now()+s,T=new Hm(e,t,p,c,h);return T.start(s),T}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ge(Te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gm(n,e){if(za("AsyncQueue",`${e}: ${n}`),zc(n))return new Ge(Te.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{static emptySet(e){return new wc(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||rt.comparator(t.key,s.key):(t,s)=>rt.comparator(t.key,s.key),this.keyedMap=ku(),this.sortedSet=new Zn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof wc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const c=t.getNext().key,h=s.getNext().key;if(!c.isEqual(h))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new wc;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(){this.ga=new Zn(rt.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):at(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Dc{constructor(e,t,s,c,h,p,T,w,E){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=c,this.mutatedKeys=h,this.fromCache=p,this.syncStateChanged=T,this.excludesMetadataChanges=w,this.hasCachedResults=E}static fromInitialDocuments(e,t,s,c,h){const p=[];return t.forEach((T=>{p.push({type:0,doc:T})})),new Dc(e,t,wc.emptySet(t),p,s,c,!0,!1,h)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let c=0;c<t.length;c++)if(t[c].type!==s[c].type||!t[c].doc.isEqual(s[c].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x8{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class y8{constructor(){this.queries=XE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const c=yt(t),h=c.queries;c.queries=XE(),h.forEach(((p,T)=>{for(const w of T.Sa)w.onError(s)}))})(this,new Ge(Te.ABORTED,"Firestore shutting down"))}}function XE(){return new Rl((n=>lA(n)),Gd)}async function qm(n,e){const t=yt(n);let s=3;const c=e.query;let h=t.queries.get(c);h?!h.ba()&&e.Da()&&(s=2):(h=new x8,s=e.Da()?0:1);try{switch(s){case 0:h.wa=await t.onListen(c,!0);break;case 1:h.wa=await t.onListen(c,!1);break;case 2:await t.onFirstRemoteStoreListen(c)}}catch(p){const T=Gm(p,`Initialization of query '${hc(e.query)}' failed`);return void e.onError(T)}t.queries.set(c,h),h.Sa.push(e),e.va(t.onlineState),h.wa&&e.Fa(h.wa)&&Xm(t)}async function Ym(n,e){const t=yt(n),s=e.query;let c=3;const h=t.queries.get(s);if(h){const p=h.Sa.indexOf(e);p>=0&&(h.Sa.splice(p,1),h.Sa.length===0?c=e.Da()?0:1:!h.ba()&&e.Da()&&(c=2))}switch(c){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function E8(n,e){const t=yt(n);let s=!1;for(const c of e){const h=c.query,p=t.queries.get(h);if(p){for(const T of p.Sa)T.Fa(c)&&(s=!0);p.wa=c}}s&&Xm(t)}function _8(n,e,t){const s=yt(n),c=s.queries.get(e);if(c)for(const h of c.Sa)h.onError(t);s.queries.delete(e)}function Xm(n){n.Ca.forEach((e=>{e.next()}))}var Xg,WE;(WE=Xg||(Xg={})).Ma="default",WE.Cache="cache";class Wm{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const c of e.docChanges)c.type!==3&&s.push(c);e=new Dc(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Dc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Xg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e){this.key=e}}class qA{constructor(e){this.key=e}}class w8{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Kt(),this.mutatedKeys=Kt(),this.eu=cA(e),this.tu=new wc(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new YE,c=t?t.tu:this.tu;let h=t?t.mutatedKeys:this.mutatedKeys,p=c,T=!1;const w=this.query.limitType==="F"&&c.size===this.query.limit?c.last():null,E=this.query.limitType==="L"&&c.size===this.query.limit?c.first():null;if(e.inorderTraversal(((C,I)=>{const M=c.get(C),B=qd(this.query,I)?I:null,W=!!M&&this.mutatedKeys.has(M.key),Q=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let Y=!1;M&&B?M.data.isEqual(B.data)?W!==Q&&(s.track({type:3,doc:B}),Y=!0):this.su(M,B)||(s.track({type:2,doc:B}),Y=!0,(w&&this.eu(B,w)>0||E&&this.eu(B,E)<0)&&(T=!0)):!M&&B?(s.track({type:0,doc:B}),Y=!0):M&&!B&&(s.track({type:1,doc:M}),Y=!0,(w||E)&&(T=!0)),Y&&(B?(p=p.add(B),h=Q?h.add(C):h.delete(C)):(p=p.delete(C),h=h.delete(C)))})),this.query.limit!==null)for(;p.size>this.query.limit;){const C=this.query.limitType==="F"?p.last():p.first();p=p.delete(C.key),h=h.delete(C.key),s.track({type:1,doc:C})}return{tu:p,iu:s,Cs:T,mutatedKeys:h}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,c){const h=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const p=e.iu.ya();p.sort(((C,I)=>(function(B,W){const Q=Y=>{switch(Y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return at(20277,{Rt:Y})}};return Q(B)-Q(W)})(C.type,I.type)||this.eu(C.doc,I.doc))),this.ou(s),c=c??!1;const T=t&&!c?this._u():[],w=this.Xa.size===0&&this.current&&!c?1:0,E=w!==this.Za;return this.Za=w,p.length!==0||E?{snapshot:new Dc(this.query,e.tu,h,p,e.mutatedKeys,w===0,E,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:T}:{au:T}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new YE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Kt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new qA(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new GA(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=Kt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Dc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Km="SyncEngine";class b8{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class A8{constructor(e){this.key=e,this.hu=!1}}class v8{constructor(e,t,s,c,h,p){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=c,this.currentUser=h,this.maxConcurrentLimboResolutions=p,this.Pu={},this.Tu=new Rl((T=>lA(T)),Gd),this.Iu=new Map,this.Eu=new Set,this.du=new Zn(rt.comparator),this.Au=new Map,this.Ru=new Pm,this.Vu={},this.mu=new Map,this.fu=Oc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function T8(n,e,t=!0){const s=ZA(n);let c;const h=s.Tu.get(e);return h?(s.sharedClientState.addLocalQueryTarget(h.targetId),c=h.view.lu()):c=await YA(s,e,t,!0),c}async function S8(n,e){const t=ZA(n);await YA(t,e,!0,!1)}async function YA(n,e,t,s){const c=await Y6(n.localStore,Ws(e)),h=c.targetId,p=n.sharedClientState.addLocalQueryTarget(h,t);let T;return s&&(T=await C8(n,e,h,p==="current",c.resumeToken)),n.isPrimaryClient&&t&&UA(n.remoteStore,c),T}async function C8(n,e,t,s,c){n.pu=(I,M,B)=>(async function(Q,Y,_e,ae){let K=Y.view.ru(_e);K.Cs&&(K=await jE(Q.localStore,Y.query,!1).then((({documents:F})=>Y.view.ru(F,K))));const ce=ae&&ae.targetChanges.get(Y.targetId),Re=ae&&ae.targetMismatches.get(Y.targetId)!=null,De=Y.view.applyChanges(K,Q.isPrimaryClient,ce,Re);return QE(Q,Y.targetId,De.au),De.snapshot})(n,I,M,B);const h=await jE(n.localStore,e,!0),p=new w8(e,h.Qs),T=p.ru(h.documents),w=mh.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",c),E=p.applyChanges(T,n.isPrimaryClient,w);QE(n,t,E.au);const C=new b8(e,t,p);return n.Tu.set(e,C),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),E.snapshot}async function I8(n,e,t){const s=yt(n),c=s.Tu.get(e),h=s.Iu.get(c.targetId);if(h.length>1)return s.Iu.set(c.targetId,h.filter((p=>!Gd(p,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(c.targetId),s.sharedClientState.isActiveQueryTarget(c.targetId)||await qg(s.localStore,c.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(c.targetId),t&&Vm(s.remoteStore,c.targetId),Wg(s,c.targetId)})).catch(Fc)):(Wg(s,c.targetId),await qg(s.localStore,c.targetId,!0))}async function N8(n,e){const t=yt(n),s=t.Tu.get(e),c=t.Iu.get(s.targetId);t.isPrimaryClient&&c.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Vm(t.remoteStore,s.targetId))}async function R8(n,e,t){const s=B8(n);try{const c=await(function(p,T){const w=yt(p),E=jn.now(),C=T.reduce(((B,W)=>B.add(W.key)),Kt());let I,M;return w.persistence.runTransaction("Locally write mutations","readwrite",(B=>{let W=Ha(),Q=Kt();return w.Ns.getEntries(B,C).next((Y=>{W=Y,W.forEach(((_e,ae)=>{ae.isValidDocument()||(Q=Q.add(_e))}))})).next((()=>w.localDocuments.getOverlayedDocuments(B,W))).next((Y=>{I=Y;const _e=[];for(const ae of T){const K=XR(ae,I.get(ae.key).overlayedDocument);K!=null&&_e.push(new Xo(ae.key,K,eA(K.value.mapValue),Mr.exists(!0)))}return w.mutationQueue.addMutationBatch(B,E,_e,T)})).next((Y=>{M=Y;const _e=Y.applyToLocalDocumentSet(I,Q);return w.documentOverlayCache.saveOverlays(B,Y.batchId,_e)}))})).then((()=>({batchId:M.batchId,changes:hA(I)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(c.batchId),(function(p,T,w){let E=p.Vu[p.currentUser.toKey()];E||(E=new Zn(Wt)),E=E.insert(T,w),p.Vu[p.currentUser.toKey()]=E})(s,c.batchId,t),await xh(s,c.changes),await Zd(s.remoteStore)}catch(c){const h=Gm(c,"Failed to persist write");t.reject(h)}}async function XA(n,e){const t=yt(n);try{const s=await H6(t.localStore,e);e.targetChanges.forEach(((c,h)=>{const p=t.Au.get(h);p&&(rn(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1,22616),c.addedDocuments.size>0?p.hu=!0:c.modifiedDocuments.size>0?rn(p.hu,14607):c.removedDocuments.size>0&&(rn(p.hu,42227),p.hu=!1))})),await xh(t,s,e)}catch(s){await Fc(s)}}function KE(n,e,t){const s=yt(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const c=[];s.Tu.forEach(((h,p)=>{const T=p.view.va(e);T.snapshot&&c.push(T.snapshot)})),(function(p,T){const w=yt(p);w.onlineState=T;let E=!1;w.queries.forEach(((C,I)=>{for(const M of I.Sa)M.va(T)&&(E=!0)})),E&&Xm(w)})(s.eventManager,e),c.length&&s.Pu.H_(c),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function O8(n,e,t){const s=yt(n);s.sharedClientState.updateQueryState(e,"rejected",t);const c=s.Au.get(e),h=c&&c.key;if(h){let p=new Zn(rt.comparator);p=p.insert(h,jr.newNoDocument(h,ht.min()));const T=Kt().add(h),w=new Wd(ht.min(),new Map,new Zn(Wt),p,T);await XA(s,w),s.du=s.du.remove(h),s.Au.delete(e),Qm(s)}else await qg(s.localStore,e,!1).then((()=>Wg(s,e,t))).catch(Fc)}async function D8(n,e){const t=yt(n),s=e.batch.batchId;try{const c=await z6(t.localStore,e);KA(t,s,null),WA(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await xh(t,c)}catch(c){await Fc(c)}}async function M8(n,e,t){const s=yt(n);try{const c=await(function(p,T){const w=yt(p);return w.persistence.runTransaction("Reject batch","readwrite-primary",(E=>{let C;return w.mutationQueue.lookupMutationBatch(E,T).next((I=>(rn(I!==null,37113),C=I.keys(),w.mutationQueue.removeMutationBatch(E,I)))).next((()=>w.mutationQueue.performConsistencyCheck(E))).next((()=>w.documentOverlayCache.removeOverlaysForBatchId(E,C,T))).next((()=>w.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(E,C))).next((()=>w.localDocuments.getDocuments(E,C)))}))})(s.localStore,e);KA(s,e,t),WA(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await xh(s,c)}catch(c){await Fc(c)}}function WA(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function KA(n,e,t){const s=yt(n);let c=s.Vu[s.currentUser.toKey()];if(c){const h=c.get(e);h&&(t?h.reject(t):h.resolve(),c=c.remove(e)),s.Vu[s.currentUser.toKey()]=c}}function Wg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||QA(n,s)}))}function QA(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Vm(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Qm(n))}function QE(n,e,t){for(const s of t)s instanceof GA?(n.Ru.addReference(s.key,e),P8(n,s)):s instanceof qA?(Ye(Km,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||QA(n,s.key)):at(19791,{wu:s})}function P8(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(Ye(Km,"New document in limbo: "+t),n.Eu.add(s),Qm(n))}function Qm(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new rt(bn.fromString(e)),s=n.fu.next();n.Au.set(s,new A8(t)),n.du=n.du.insert(t,s),UA(n.remoteStore,new Oo(Ws(Hd(t.path)),s,"TargetPurposeLimboResolution",Fd.ce))}}async function xh(n,e,t){const s=yt(n),c=[],h=[],p=[];s.Tu.isEmpty()||(s.Tu.forEach(((T,w)=>{p.push(s.pu(w,e,t).then((E=>{var C;if((E||t)&&s.isPrimaryClient){const I=E?!E.fromCache:(C=t==null?void 0:t.targetChanges.get(w.targetId))==null?void 0:C.current;s.sharedClientState.updateQueryState(w.targetId,I?"current":"not-current")}if(E){c.push(E);const I=km.As(w.targetId,E);h.push(I)}})))})),await Promise.all(p),s.Pu.H_(c),await(async function(w,E){const C=yt(w);try{await C.persistence.runTransaction("notifyLocalViewChanges","readwrite",(I=>Ne.forEach(E,(M=>Ne.forEach(M.Es,(B=>C.persistence.referenceDelegate.addReference(I,M.targetId,B))).next((()=>Ne.forEach(M.ds,(B=>C.persistence.referenceDelegate.removeReference(I,M.targetId,B)))))))))}catch(I){if(!zc(I))throw I;Ye(Bm,"Failed to update sequence numbers: "+I)}for(const I of E){const M=I.targetId;if(!I.fromCache){const B=C.Ms.get(M),W=B.snapshotVersion,Q=B.withLastLimboFreeSnapshotVersion(W);C.Ms=C.Ms.insert(M,Q)}}})(s.localStore,h))}async function L8(n,e){const t=yt(n);if(!t.currentUser.isEqual(e)){Ye(Km,"User change. New user:",e.toKey());const s=await LA(t.localStore,e);t.currentUser=e,(function(h,p){h.mu.forEach((T=>{T.forEach((w=>{w.reject(new Ge(Te.CANCELLED,p))}))})),h.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await xh(t,s.Ls)}}function k8(n,e){const t=yt(n),s=t.Au.get(e);if(s&&s.hu)return Kt().add(s.key);{let c=Kt();const h=t.Iu.get(e);if(!h)return c;for(const p of h){const T=t.Tu.get(p);c=c.unionWith(T.view.nu)}return c}}function ZA(n){const e=yt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=XA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=k8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=O8.bind(null,e),e.Pu.H_=E8.bind(null,e.eventManager),e.Pu.yu=_8.bind(null,e.eventManager),e}function B8(n){const e=yt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=D8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=M8.bind(null,e),e}class wd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Kd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return F6(this.persistence,new U6,e.initialUser,this.serializer)}Cu(e){return new PA(Lm.mi,this.serializer)}Du(e){return new W6}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wd.provider={build:()=>new wd};class U8 extends wd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){rn(this.persistence.referenceDelegate instanceof Ed,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new A6(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ki.withCacheSize(this.cacheSizeBytes):ki.DEFAULT;return new PA((s=>Ed.mi(s,t)),this.serializer)}}class Kg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>KE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=L8.bind(null,this.syncEngine),await p8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new y8})()}createDatastore(e){const t=Kd(e.databaseInfo.databaseId),s=(function(h){return new $6(h)})(e.databaseInfo);return(function(h,p,T,w){return new r8(h,p,T,w)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,c,h,p,T){return new s8(s,c,h,p,T)})(this.localStore,this.datastore,e.asyncQueue,(t=>KE(this.syncEngine,t,0)),(function(){return HE.v()?new HE:new K6})())}createSyncEngine(e,t){return(function(c,h,p,T,w,E,C){const I=new v8(c,h,p,T,w,E);return C&&(I.gu=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(c){const h=yt(c);Ye(Sl,"RemoteStore shutting down."),h.Ea.add(5),await ph(h),h.Aa.shutdown(),h.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Kg.provider={build:()=>new Kg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):za("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V8{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Ge(Te.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(c,h){const p=yt(c),T={documents:h.map((I=>yd(p.serializer,I)))},w=await p.Ho("BatchGetDocuments",p.serializer.databaseId,bn.emptyPath(),T,h.length),E=new Map;w.forEach((I=>{const M=a6(p.serializer,I);E.set(M.key.toString(),M)}));const C=[];return h.forEach((I=>{const M=E.get(I.toString());rn(!!M,55234,{key:I}),C.push(M)})),C})(this.datastore,e);return t.forEach((s=>this.recordVersion(s))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new gh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,s)=>{const c=rt.fromPath(s);this.mutations.push(new _A(c,this.precondition(c)))})),await(async function(s,c){const h=yt(s),p={writes:c.map((T=>NA(h.serializer,T)))};await h.Go("Commit",h.serializer.databaseId,bn.emptyPath(),p)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw at(50498,{Gu:e.constructor.name});t=ht.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new Ge(Te.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ht.min())?Mr.exists(!1):Mr.updateTime(t):Mr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ht.min()))throw new Ge(Te.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Mr.updateTime(t)}return Mr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j8{constructor(e,t,s,c,h){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=c,this.deferred=h,this.zu=s.maxAttempts,this.M_=new Um(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new V8(this.datastore),t=this.Hu(e);t&&t.then((s=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(s)})).catch((c=>{this.Yu(c)}))))})).catch((s=>{this.Yu(s)}))}))}Hu(e){try{const t=this.updateFunction(e);return!hh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!wA(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo="FirestoreClient";class F8{constructor(e,t,s,c,h){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=c,this.user=hi.UNAUTHENTICATED,this.clientId=vm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=h,this.authCredentials.start(s,(async p=>{Ye(qo,"Received user=",p.uid),await this.authCredentialListener(p),this.user=p})),this.appCheckCredentials.start(s,(p=>(Ye(qo,"Received new app check token=",p),this.appCheckCredentialListener(p,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Gm(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function mg(n,e){n.asyncQueue.verifyOperationInProgress(),Ye(qo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async c=>{s.isEqual(c)||(await LA(e.localStore,c),s=c)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function ZE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await z8(n);Ye(qo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>qE(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,c)=>qE(e.remoteStore,c))),n._onlineComponents=e}async function z8(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ye(qo,"Using user provided OfflineComponentProvider");try{await mg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(c){return c.name==="FirebaseError"?c.code===Te.FAILED_PRECONDITION||c.code===Te.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||c.code===22||c.code===20||c.code===11})(t))throw t;Cc("Error using user provided cache. Falling back to memory cache: "+t),await mg(n,new wd)}}else Ye(qo,"Using default OfflineComponentProvider"),await mg(n,new U8(void 0));return n._offlineComponents}async function Jm(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ye(qo,"Using user provided OnlineComponentProvider"),await ZE(n,n._uninitializedComponentsProvider._online)):(Ye(qo,"Using default OnlineComponentProvider"),await ZE(n,new Kg))),n._onlineComponents}function H8(n){return Jm(n).then((e=>e.syncEngine))}function G8(n){return Jm(n).then((e=>e.datastore))}async function bd(n){const e=await Jm(n),t=e.eventManager;return t.onListen=T8.bind(null,e.syncEngine),t.onUnlisten=I8.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=S8.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=N8.bind(null,e.syncEngine),t}function q8(n,e,t={}){const s=new Xs;return n.asyncQueue.enqueueAndForget((async()=>(function(h,p,T,w,E){const C=new Zm({next:M=>{C.Nu(),p.enqueueAndForget((()=>Ym(h,I)));const B=M.docs.has(T);!B&&M.fromCache?E.reject(new Ge(Te.UNAVAILABLE,"Failed to get document because the client is offline.")):B&&M.fromCache&&w&&w.source==="server"?E.reject(new Ge(Te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(M)},error:M=>E.reject(M)}),I=new Wm(Hd(T.path),C,{includeMetadataChanges:!0,qa:!0});return qm(h,I)})(await bd(n),n.asyncQueue,e,t,s))),s.promise}function Y8(n,e,t={}){const s=new Xs;return n.asyncQueue.enqueueAndForget((async()=>(function(h,p,T,w,E){const C=new Zm({next:M=>{C.Nu(),p.enqueueAndForget((()=>Ym(h,I))),M.fromCache&&w.source==="server"?E.reject(new Ge(Te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):E.resolve(M)},error:M=>E.reject(M)}),I=new Wm(T,C,{includeMetadataChanges:!0,qa:!0});return qm(h,I)})(await bd(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A="firestore.googleapis.com",$E=!0;class e_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ge(Te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$A,this.ssl=$E}else this.host=e.host,this.ssl=e.ssl??$E;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=MA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<w6)throw new Ge(Te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}oR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JA(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ge(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ge(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ge(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,c){return s.timeoutSeconds===c.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jd{constructor(e,t,s,c){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=c,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new e_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ge(Te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ge(Te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new e_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new Z4;switch(s.type){case"firstParty":return new tR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Ge(Te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=JE.get(t);s&&(Ye("ComponentProvider","Removing Datastore"),JE.delete(t),s.terminate())})(this),Promise.resolve()}}function X8(n,e,t,s={}){var E;n=wi(n,Jd);const c=Uc(e),h=n._getSettings(),p={...h,emulatorOptions:n._getEmulatorOptions()},T=`${e}:${t}`;c&&(Cb(`https://${T}`),Ib("Firestore",!0)),h.host!==$A&&h.host!==T&&Cc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const w={...h,host:T,ssl:c,emulatorOptions:s};if(!Al(w,p)&&(n._setSettings(w),s.mockUserToken)){let C,I;if(typeof s.mockUserToken=="string")C=s.mockUserToken,I=hi.MOCK_USER;else{C=vN(s.mockUserToken,(E=n._app)==null?void 0:E.options.projectId);const M=s.mockUserToken.sub||s.mockUserToken.user_id;if(!M)throw new Ge(Te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");I=new hi(M)}n._authCredentials=new J4(new zb(C,I))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Wo(this.firestore,e,this._query)}}class Qn{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qn(this.firestore,e,this._key)}toJSON(){return{type:Qn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(uh(t,Qn._jsonSchema))return new Qn(e,s||null,new rt(bn.fromString(t.referencePath)))}}Qn._jsonSchemaVersion="firestore/documentReference/1.0",Qn._jsonSchema={type:Tr("string",Qn._jsonSchemaVersion),referencePath:Tr("string")};class Bo extends Wo{constructor(e,t,s){super(e,t,Hd(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qn(this.firestore,null,new rt(e))}withConverter(e){return new Bo(this.firestore,e,this._path)}}function rs(n,e,...t){if(n=dr(n),Hb("collection","path",e),n instanceof Jd){const s=bn.fromString(e,...t);return dE(s),new Bo(n,null,s)}{if(!(n instanceof Qn||n instanceof Bo))throw new Ge(Te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(bn.fromString(e,...t));return dE(s),new Bo(n.firestore,null,s)}}function mn(n,e,...t){if(n=dr(n),arguments.length===1&&(e=vm.newId()),Hb("doc","path",e),n instanceof Jd){const s=bn.fromString(e,...t);return fE(s),new Qn(n,null,new rt(s))}{if(!(n instanceof Qn||n instanceof Bo))throw new Ge(Te.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(bn.fromString(e,...t));return fE(s),new Qn(n.firestore,n instanceof Bo?n.converter:null,new rt(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_="AsyncQueue";class n_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Um(this,"async_queue_retry"),this._c=()=>{const s=gg();s&&Ye(t_,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=gg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=gg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Xs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!zc(e))throw e;Ye(t_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,za("INTERNAL UNHANDLED ERROR: ",r_(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const c=Hm.createAndSchedule(this,e,t,s,(h=>this.hc(h)));return this.tc.push(c),c}uc(){this.nc&&at(47125,{Pc:r_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function r_(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i_(n){return(function(t,s){if(typeof t!="object"||t===null)return!1;const c=t;for(const h of s)if(h in c&&typeof c[h]=="function")return!0;return!1})(n,["next","error","complete"])}class na extends Jd{constructor(e,t,s,c){super(e,t,s,c),this.type="firestore",this._queue=new n_,this._persistenceKey=(c==null?void 0:c.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new n_(e),this._firestoreClient=void 0,await e}}}function W8(n,e){const t=typeof n=="object"?n:Db(),s=typeof n=="string"?n:ud,c=bm(t,"firestore").getImmediate({identifier:s});if(!c._initialized){const h=bN("firestore");h&&X8(c,...h)}return c}function Gc(n){if(n._terminated)throw new Ge(Te.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||K8(n),n._firestoreClient}function K8(n){var s,c,h;const e=n._freezeSettings(),t=(function(T,w,E,C){return new yR(T,w,E,C.host,C.ssl,C.experimentalForceLongPolling,C.experimentalAutoDetectLongPolling,JA(C.experimentalLongPollingOptions),C.useFetchStreams,C.isUsingEmulator)})(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(c=e.localCache)!=null&&c._offlineComponentProvider&&((h=e.localCache)!=null&&h._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new F8(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(T){const w=T==null?void 0:T._online.build();return{_offline:T==null?void 0:T._offline.build(w),_online:w}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ji(Zr.fromBase64String(e))}catch(t){throw new Ge(Te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ji(Zr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ji._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(uh(e,Ji._jsonSchema))return Ji.fromBase64String(e.bytes)}}Ji._jsonSchemaVersion="firestore/bytes/1.0",Ji._jsonSchema={type:Tr("string",Ji._jsonSchemaVersion),bytes:Tr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ge(Te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ge(Te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ge(Te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Wt(this._lat,e._lat)||Wt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ks._jsonSchemaVersion}}static fromJSON(e){if(uh(e,Ks._jsonSchema))return new Ks(e.latitude,e.longitude)}}Ks._jsonSchemaVersion="firestore/geoPoint/1.0",Ks._jsonSchema={type:Tr("string",Ks._jsonSchemaVersion),latitude:Tr("number"),longitude:Tr("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,c){if(s.length!==c.length)return!1;for(let h=0;h<s.length;++h)if(s[h]!==c[h])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Qs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(uh(e,Qs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Qs(e.vectorValues);throw new Ge(Te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Qs._jsonSchemaVersion="firestore/vectorValue/1.0",Qs._jsonSchema={type:Tr("string",Qs._jsonSchemaVersion),vectorValues:Tr("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q8=/^__.*__$/;class Z8{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Xo(e,this.data,this.fieldMask,t,this.fieldTransforms):new dh(e,this.data,t,this.fieldTransforms)}}class ev{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Xo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function tv(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw at(40011,{Ac:n})}}class ep{constructor(e,t,s,c,h,p){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=c,h===void 0&&this.Rc(),this.fieldTransforms=h||[],this.fieldMask=p||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ep({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var c;const t=(c=this.path)==null?void 0:c.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var c;const t=(c=this.path)==null?void 0:c.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ad(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(tv(this.Ac)&&Q8.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class J8{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Kd(e)}Cc(e,t,s,c=!1){return new ep({Ac:e,methodName:t,Dc:s,path:Qr.emptyPath(),fc:!1,bc:c},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yh(n){const e=n._freezeSettings(),t=Kd(n._databaseId);return new J8(n._databaseId,!!e.ignoreUndefinedProperties,t)}function tp(n,e,t,s,c,h={}){const p=n.Cc(h.merge||h.mergeFields?2:0,e,t,c);ip("Data must be an object, but it was:",p,s);const T=nv(s,p);let w,E;if(h.merge)w=new $i(p.fieldMask),E=p.fieldTransforms;else if(h.mergeFields){const C=[];for(const I of h.mergeFields){const M=Qg(e,I,t);if(!p.contains(M))throw new Ge(Te.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);iv(C,M)||C.push(M)}w=new $i(C),E=p.fieldTransforms.filter((I=>w.covers(I.field)))}else w=null,E=p.fieldTransforms;return new Z8(new _i(T),w,E)}class $d extends $m{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $d}}function np(n,e,t,s){const c=n.Cc(1,e,t);ip("Data must be an object, but it was:",c,s);const h=[],p=_i.empty();Yo(s,((w,E)=>{const C=sp(e,w,t);E=dr(E);const I=c.yc(C);if(E instanceof $d)h.push(C);else{const M=Eh(E,I);M!=null&&(h.push(C),p.set(C,M))}}));const T=new $i(h);return new ev(p,T,c.fieldTransforms)}function rp(n,e,t,s,c,h){const p=n.Cc(1,e,t),T=[Qg(e,s,t)],w=[c];if(h.length%2!=0)throw new Ge(Te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let M=0;M<h.length;M+=2)T.push(Qg(e,h[M])),w.push(h[M+1]);const E=[],C=_i.empty();for(let M=T.length-1;M>=0;--M)if(!iv(E,T[M])){const B=T[M];let W=w[M];W=dr(W);const Q=p.yc(B);if(W instanceof $d)E.push(B);else{const Y=Eh(W,Q);Y!=null&&(E.push(B),C.set(B,Y))}}const I=new $i(E);return new ev(C,I,p.fieldTransforms)}function $8(n,e,t,s=!1){return Eh(t,n.Cc(s?4:3,e))}function Eh(n,e){if(rv(n=dr(n)))return ip("Unsupported field value:",e,n),nv(n,e);if(n instanceof $m)return(function(s,c){if(!tv(c.Ac))throw c.Sc(`${s._methodName}() can only be used with update() and set()`);if(!c.path)throw c.Sc(`${s._methodName}() is not currently supported inside arrays`);const h=s._toFieldTransform(c);h&&c.fieldTransforms.push(h)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,c){const h=[];let p=0;for(const T of s){let w=Eh(T,c.wc(p));w==null&&(w={nullValue:"NULL_VALUE"}),h.push(w),p++}return{arrayValue:{values:h}}})(n,e)}return(function(s,c){if((s=dr(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return FR(c.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const h=jn.fromDate(s);return{timestampValue:xd(c.serializer,h)}}if(s instanceof jn){const h=new jn(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:xd(c.serializer,h)}}if(s instanceof Ks)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ji)return{bytesValue:TA(c.serializer,s._byteString)};if(s instanceof Qn){const h=c.databaseId,p=s.firestore._databaseId;if(!p.isEqual(h))throw c.Sc(`Document reference is for database ${p.projectId}/${p.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:Mm(s.firestore._databaseId||c.databaseId,s._key.path)}}if(s instanceof Qs)return(function(p,T){return{mapValue:{fields:{[Jb]:{stringValue:$b},[hd]:{arrayValue:{values:p.toArray().map((E=>{if(typeof E!="number")throw T.Sc("VectorValues must only contain numeric values.");return Rm(T.serializer,E)}))}}}}}})(s,c);throw c.Sc(`Unsupported field value: ${jd(s)}`)})(n,e)}function nv(n,e){const t={};return Yb(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yo(n,((s,c)=>{const h=Eh(c,e.mc(s));h!=null&&(t[s]=h)})),{mapValue:{fields:t}}}function rv(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof jn||n instanceof Ks||n instanceof Ji||n instanceof Qn||n instanceof $m||n instanceof Qs)}function ip(n,e,t){if(!rv(t)||!Gb(t)){const s=jd(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function Qg(n,e,t){if((e=dr(e))instanceof qc)return e._internalPath;if(typeof e=="string")return sp(n,e);throw Ad("Field path arguments must be of type string or ",n,!1,void 0,t)}const eO=new RegExp("[~\\*/\\[\\]]");function sp(n,e,t){if(e.search(eO)>=0)throw Ad(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new qc(...e.split("."))._internalPath}catch{throw Ad(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ad(n,e,t,s,c){const h=s&&!s.isEmpty(),p=c!==void 0;let T=`Function ${e}() called with invalid data`;t&&(T+=" (via `toFirestore()`)"),T+=". ";let w="";return(h||p)&&(w+=" (found",h&&(w+=` in field ${s}`),p&&(w+=` in document ${c}`),w+=")"),new Ge(Te.INVALID_ARGUMENT,T+n+w)}function iv(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,t,s,c,h){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=c,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new Qn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new tO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ap("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class tO extends vd{data(){return super.data()}}function ap(n,e){return typeof e=="string"?sp(n,e):e instanceof qc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ge(Te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class op{}class av extends op{}function e0(n,e,...t){let s=[];e instanceof op&&s.push(e),s=s.concat(t),(function(h){const p=h.filter((w=>w instanceof lp)).length,T=h.filter((w=>w instanceof t0)).length;if(p>1||p>0&&T>0)throw new Ge(Te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const c of s)n=c._apply(n);return n}class t0 extends av{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new t0(e,t,s)}_apply(e){const t=this._parse(e);return ov(e._query,t),new Wo(e.firestore,e.converter,Fg(e._query,t))}_parse(e){const t=yh(e.firestore);return(function(h,p,T,w,E,C,I){let M;if(E.isKeyField()){if(C==="array-contains"||C==="array-contains-any")throw new Ge(Te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if(C==="in"||C==="not-in"){a_(I,C);const W=[];for(const Q of I)W.push(s_(w,h,Q));M={arrayValue:{values:W}}}else M=s_(w,h,I)}else C!=="in"&&C!=="not-in"&&C!=="array-contains-any"||a_(I,C),M=$8(T,p,I,C==="in"||C==="not-in");return vr.create(E,C,M)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Xu(n,e,t){const s=e,c=ap("where",n);return t0._create(c,s,t)}class lp extends op{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new lp(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:Ms.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(c,h){let p=c;const T=h.getFlattenedFilters();for(const w of T)ov(p,w),p=Fg(p,w)})(e._query,t),new Wo(e.firestore,e.converter,Fg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class cp extends av{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new cp(e,t,s)}_apply(e){return new Wo(e.firestore,e.converter,gd(e._query,this._limit,this._limitType))}}function nO(n){return cp._create("limit",n,"F")}function s_(n,e,t){if(typeof(t=dr(t))=="string"){if(t==="")throw new Ge(Te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!oA(e)&&t.indexOf("/")!==-1)throw new Ge(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(bn.fromString(t));if(!rt.isDocumentKey(s))throw new Ge(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return wE(n,new rt(s))}if(t instanceof Qn)return wE(n,t._key);throw new Ge(Te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jd(t)}.`)}function a_(n,e){if(!Array.isArray(n)||n.length===0)throw new Ge(Te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ov(n,e){const t=(function(c,h){for(const p of c)for(const T of p.getFlattenedFilters())if(h.indexOf(T.op)>=0)return T.op;return null})(n.filters,(function(c){switch(c){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ge(Te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ge(Te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class lv{convertValue(e,t="none"){switch(Ho(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(zo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw at(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Yo(e,((c,h)=>{s[c]=this.convertValue(h,t)})),s}convertVectorValue(e){var s,c,h;const t=(h=(c=(s=e.fields)==null?void 0:s[hd].arrayValue)==null?void 0:c.values)==null?void 0:h.map((p=>fr(p.doubleValue)));return new Qs(t)}convertGeoPoint(e){return new Ks(fr(e.latitude),fr(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=zd(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(eh(e));default:return null}}convertTimestamp(e){const t=Fo(e);return new jn(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=bn.fromString(e);rn(DA(s),9688,{name:e});const c=new th(s.get(1),s.get(3)),h=new rt(s.popFirst(5));return c.isEqual(t)||za(`Document ${h} contains a document reference within a different database (${c.projectId}/${c.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class rO extends lv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ji(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qn(this.firestore,null,t)}}class mc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Uo extends vd{constructor(e,t,s,c,h,p){super(e,t,s,c,p),this._firestore=e,this._firestoreImpl=e,this.metadata=h}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Zf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(ap("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ge(Te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Uo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Uo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Uo._jsonSchema={type:Tr("string",Uo._jsonSchemaVersion),bundleSource:Tr("string","DocumentSnapshot"),bundleName:Tr("string"),bundle:Tr("string")};class Zf extends Uo{data(e={}){return super.data(e)}}class bl{constructor(e,t,s,c){this._firestore=e,this._userDataWriter=t,this._snapshot=c,this.metadata=new mc(c.hasPendingWrites,c.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Zf(this._firestore,this._userDataWriter,s.key,s,new mc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ge(Te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(c,h){if(c._snapshot.oldDocs.isEmpty()){let p=0;return c._snapshot.docChanges.map((T=>{const w=new Zf(c._firestore,c._userDataWriter,T.doc.key,T.doc,new mc(c._snapshot.mutatedKeys.has(T.doc.key),c._snapshot.fromCache),c.query.converter);return T.doc,{type:"added",doc:w,oldIndex:-1,newIndex:p++}}))}{let p=c._snapshot.oldDocs;return c._snapshot.docChanges.filter((T=>h||T.type!==3)).map((T=>{const w=new Zf(c._firestore,c._userDataWriter,T.doc.key,T.doc,new mc(c._snapshot.mutatedKeys.has(T.doc.key),c._snapshot.fromCache),c.query.converter);let E=-1,C=-1;return T.type!==0&&(E=p.indexOf(T.doc.key),p=p.delete(T.doc.key)),T.type!==1&&(p=p.add(T.doc),C=p.indexOf(T.doc.key)),{type:iO(T.type),doc:w,oldIndex:E,newIndex:C}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ge(Te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=bl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=vm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],c=[];return this.docs.forEach((h=>{h._document!==null&&(t.push(h._document),s.push(this._userDataWriter.convertObjectMap(h._document.data.value.mapValue.fields,"previous")),c.push(h.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function iO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return at(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(n){n=wi(n,Qn);const e=wi(n.firestore,na);return q8(Gc(e),n._key).then((t=>uv(e,n,t)))}bl._jsonSchemaVersion="firestore/querySnapshot/1.0",bl._jsonSchema={type:Tr("string",bl._jsonSchemaVersion),bundleSource:Tr("string","QuerySnapshot"),bundleName:Tr("string"),bundle:Tr("string")};class n0 extends lv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ji(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qn(this.firestore,null,t)}}function r0(n){n=wi(n,Wo);const e=wi(n.firestore,na),t=Gc(e),s=new n0(e);return sv(n._query),Y8(t,n._query).then((c=>new bl(e,s,n,c)))}function Ko(n,e,t){n=wi(n,Qn);const s=wi(n.firestore,na),c=up(n.converter,e,t);return i0(s,[tp(yh(s),"setDoc",n._key,c,n.converter!==null,t).toMutation(n._key,Mr.none())])}function Dl(n,e,t,...s){n=wi(n,Qn);const c=wi(n.firestore,na),h=yh(c);let p;return p=typeof(e=dr(e))=="string"||e instanceof qc?rp(h,"updateDoc",n._key,e,t,s):np(h,"updateDoc",n._key,e),i0(c,[p.toMutation(n._key,Mr.exists(!0))])}function Yc(n){return i0(wi(n.firestore,na),[new gh(n._key,Mr.none())])}function Wa(n,...e){var w,E,C;n=dr(n);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||i_(e[s])||(t=e[s++]);const c={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(i_(e[s])){const I=e[s];e[s]=(w=I.next)==null?void 0:w.bind(I),e[s+1]=(E=I.error)==null?void 0:E.bind(I),e[s+2]=(C=I.complete)==null?void 0:C.bind(I)}let h,p,T;if(n instanceof Qn)p=wi(n.firestore,na),T=Hd(n._key.path),h={next:I=>{e[s]&&e[s](uv(p,n,I))},error:e[s+1],complete:e[s+2]};else{const I=wi(n,Wo);p=wi(I.firestore,na),T=I._query;const M=new n0(p);h={next:B=>{e[s]&&e[s](new bl(p,M,I,B))},error:e[s+1],complete:e[s+2]},sv(n._query)}return(function(M,B,W,Q){const Y=new Zm(Q),_e=new Wm(B,Y,W);return M.asyncQueue.enqueueAndForget((async()=>qm(await bd(M),_e))),()=>{Y.Nu(),M.asyncQueue.enqueueAndForget((async()=>Ym(await bd(M),_e)))}})(Gc(p),T,c,h)}function i0(n,e){return(function(s,c){const h=new Xs;return s.asyncQueue.enqueueAndForget((async()=>R8(await H8(s),c,h))),h.promise})(Gc(n),e)}function uv(n,e,t){const s=t.docs.get(e._key),c=new n0(n);return new Uo(n,c,e._key,s,new mc(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=yh(e)}set(e,t,s){this._verifyNotCommitted();const c=Do(e,this._firestore),h=up(c.converter,t,s),p=tp(this._dataReader,"WriteBatch.set",c._key,h,c.converter!==null,s);return this._mutations.push(p.toMutation(c._key,Mr.none())),this}update(e,t,s,...c){this._verifyNotCommitted();const h=Do(e,this._firestore);let p;return p=typeof(t=dr(t))=="string"||t instanceof qc?rp(this._dataReader,"WriteBatch.update",h._key,t,s,c):np(this._dataReader,"WriteBatch.update",h._key,t),this._mutations.push(p.toMutation(h._key,Mr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Do(e,this._firestore);return this._mutations=this._mutations.concat(new gh(t._key,Mr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ge(Te.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Do(n,e){if((n=dr(n)).firestore!==e)throw new Ge(Te.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=yh(e)}get(e){const t=Do(e,this._firestore),s=new rO(this._firestore);return this._transaction.lookup([t._key]).then((c=>{if(!c||c.length!==1)return at(24041);const h=c[0];if(h.isFoundDocument())return new vd(this._firestore,s,h.key,h,t.converter);if(h.isNoDocument())return new vd(this._firestore,s,t._key,null,t.converter);throw at(18433,{doc:h})}))}set(e,t,s){const c=Do(e,this._firestore),h=up(c.converter,t,s),p=tp(this._dataReader,"Transaction.set",c._key,h,c.converter!==null,s);return this._transaction.set(c._key,p),this}update(e,t,s,...c){const h=Do(e,this._firestore);let p;return p=typeof(t=dr(t))=="string"||t instanceof qc?rp(this._dataReader,"Transaction.update",h._key,t,s,c):np(this._dataReader,"Transaction.update",h._key,t),this._transaction.update(h._key,p),this}delete(e){const t=Do(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO extends oO{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Do(e,this._firestore),s=new n0(this._firestore);return super.get(e).then((c=>new Uo(this._firestore,s,t._key,c._document,new mc(!1,!1),t.converter)))}}function hp(n,e,t){n=wi(n,na);const s={...sO,...t};return(function(h){if(h.maxAttempts<1)throw new Ge(Te.INVALID_ARGUMENT,"Max attempts must be at least 1")})(s),(function(h,p,T){const w=new Xs;return h.asyncQueue.enqueueAndForget((async()=>{const E=await G8(h);new j8(h.asyncQueue,E,T,p,w).ju()})),w.promise})(Gc(n),(c=>e(new lO(n,c))),s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cO(n){return Gc(n=wi(n,na)),new aO(n,(e=>i0(n,e)))}(function(e,t=!0){(function(c){jc=c})(Vc),Sc(new vl("firestore",((s,{instanceIdentifier:c,options:h})=>{const p=s.getProvider("app").getImmediate(),T=new na(new $4(s.getProvider("auth-internal")),new nR(p,s.getProvider("app-check-internal")),(function(E,C){if(!Object.prototype.hasOwnProperty.apply(E.options,["projectId"]))throw new Ge(Te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new th(E.options.projectId,C)})(p,c),p);return h={useFetchStreams:t,...h},T._setSettings(h),T}),"PUBLIC").setMultipleInstances(!0)),Lo(lE,cE,e),Lo(lE,cE,"esm2020")})();var uO="firebase",hO="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Lo(uO,hO,"app");function hv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const fO=hv,fv=new lh("auth","Firebase",hv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Td=new _m("@firebase/auth");function dO(n,...e){Td.logLevel<=Xt.WARN&&Td.warn(`Auth (${Vc}): ${n}`,...e)}function Jf(n,...e){Td.logLevel<=Xt.ERROR&&Td.error(`Auth (${Vc}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ps(n,...e){throw fp(n,...e)}function Zs(n,...e){return fp(n,...e)}function dv(n,e,t){const s={...fO(),[e]:t};return new lh("auth","Firebase",s).create(e,{appName:n.name})}function Js(n){return dv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fp(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return fv.create(n,...e)}function ft(n,e,...t){if(!n)throw fp(e,...t)}function Ba(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Jf(e),new Error(e)}function Ga(n,e){n||Ba(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function gO(){return o_()==="http:"||o_()==="https:"}function o_(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(gO()||RN()||"connection"in navigator)?navigator.onLine:!0}function pO(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ga(t>e,"Short delay should be less than long delay!"),this.isMobile=CN()||ON()}get(){return mO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dp(n,e){Ga(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ba("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ba("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ba("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],EO=new _h(3e4,6e4);function Qo(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Ka(n,e,t,s,c={}){return mv(n,c,async()=>{let h={},p={};s&&(e==="GET"?p=s:h={body:JSON.stringify(s)});const T=ch({key:n.config.apiKey,...p}).slice(1),w=await n._getAdditionalHeaders();w["Content-Type"]="application/json",n.languageCode&&(w["X-Firebase-Locale"]=n.languageCode);const E={method:e,headers:w,...h};return NN()||(E.referrerPolicy="no-referrer"),n.emulatorConfig&&Uc(n.emulatorConfig.host)&&(E.credentials="include"),gv.fetch()(await pv(n,n.config.apiHost,t,T),E)})}async function mv(n,e,t){n._canInitEmulator=!1;const s={...xO,...e};try{const c=new wO(n),h=await Promise.race([t(),c.promise]);c.clearNetworkTimeout();const p=await h.json();if("needConfirmation"in p)throw kf(n,"account-exists-with-different-credential",p);if(h.ok&&!("errorMessage"in p))return p;{const T=h.ok?p.errorMessage:p.error.message,[w,E]=T.split(" : ");if(w==="FEDERATED_USER_ID_ALREADY_LINKED")throw kf(n,"credential-already-in-use",p);if(w==="EMAIL_EXISTS")throw kf(n,"email-already-in-use",p);if(w==="USER_DISABLED")throw kf(n,"user-disabled",p);const C=s[w]||w.toLowerCase().replace(/[_\s]+/g,"-");if(E)throw dv(n,C,E);Ps(n,C)}}catch(c){if(c instanceof Xa)throw c;Ps(n,"network-request-failed",{message:String(c)})}}async function wh(n,e,t,s,c={}){const h=await Ka(n,e,t,s,c);return"mfaPendingCredential"in h&&Ps(n,"multi-factor-auth-required",{_serverResponse:h}),h}async function pv(n,e,t,s){const c=`${e}${t}?${s}`,h=n,p=h.config.emulator?dp(n.config,c):`${n.config.apiScheme}://${c}`;return yO.includes(t)&&(await h._persistenceManagerAvailable,h._getPersistenceType()==="COOKIE")?h._getPersistence()._getFinalTarget(p).toString():p}function _O(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class wO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Zs(this.auth,"network-request-failed")),EO.get())})}}function kf(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const c=Zs(n,e,s);return c.customData._tokenResponse=t,c}function l_(n){return n!==void 0&&n.enterprise!==void 0}class bO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return _O(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function AO(n,e){return Ka(n,"GET","/v2/recaptchaConfig",Qo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vO(n,e){return Ka(n,"POST","/v1/accounts:delete",e)}async function Sd(n,e){return Ka(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function TO(n,e=!1){const t=dr(n),s=await t.getIdToken(e),c=gp(s);ft(c&&c.exp&&c.auth_time&&c.iat,t.auth,"internal-error");const h=typeof c.firebase=="object"?c.firebase:void 0,p=h==null?void 0:h.sign_in_provider;return{claims:c,token:s,authTime:Wu(pg(c.auth_time)),issuedAtTime:Wu(pg(c.iat)),expirationTime:Wu(pg(c.exp)),signInProvider:p||null,signInSecondFactor:(h==null?void 0:h.sign_in_second_factor)||null}}function pg(n){return Number(n)*1e3}function gp(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return Jf("JWT malformed, contained fewer than 3 sections"),null;try{const c=Ab(t);return c?JSON.parse(c):(Jf("Failed to decode base64 JWT payload"),null)}catch(c){return Jf("Caught error parsing JWT payload as JSON",c==null?void 0:c.toString()),null}}function c_(n){const e=gp(n);return ft(e,"internal-error"),ft(typeof e.exp<"u","internal-error"),ft(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mc(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Xa&&SO(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function SO({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wu(this.lastLoginAt),this.creationTime=Wu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cd(n){var I;const e=n.auth,t=await n.getIdToken(),s=await Mc(n,Sd(e,{idToken:t}));ft(s==null?void 0:s.users.length,e,"internal-error");const c=s.users[0];n._notifyReloadListener(c);const h=(I=c.providerUserInfo)!=null&&I.length?xv(c.providerUserInfo):[],p=NO(n.providerData,h),T=n.isAnonymous,w=!(n.email&&c.passwordHash)&&!(p!=null&&p.length),E=T?w:!1,C={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:p,metadata:new Jg(c.createdAt,c.lastLoginAt),isAnonymous:E};Object.assign(n,C)}async function IO(n){const e=dr(n);await Cd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function NO(n,e){return[...n.filter(s=>!e.some(c=>c.providerId===s.providerId)),...e]}function xv(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RO(n,e){const t=await mv(n,{},async()=>{const s=ch({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:c,apiKey:h}=n.config,p=await pv(n,c,"/v1/token",`key=${h}`),T=await n._getAdditionalHeaders();T["Content-Type"]="application/x-www-form-urlencoded";const w={method:"POST",headers:T,body:s};return n.emulatorConfig&&Uc(n.emulatorConfig.host)&&(w.credentials="include"),gv.fetch()(p,w)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function OO(n,e){return Ka(n,"POST","/v2/accounts:revokeToken",Qo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ft(e.idToken,"internal-error"),ft(typeof e.idToken<"u","internal-error"),ft(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):c_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ft(e.length!==0,"internal-error");const t=c_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ft(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:c,expiresIn:h}=await RO(e,t);this.updateTokensAndExpiration(s,c,Number(h))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:c,expirationTime:h}=t,p=new bc;return s&&(ft(typeof s=="string","internal-error",{appName:e}),p.refreshToken=s),c&&(ft(typeof c=="string","internal-error",{appName:e}),p.accessToken=c),h&&(ft(typeof h=="number","internal-error",{appName:e}),p.expirationTime=h),p}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bc,this.toJSON())}_performRefresh(){return Ba("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function So(n,e){ft(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ds{constructor({uid:e,auth:t,stsTokenManager:s,...c}){this.providerId="firebase",this.proactiveRefresh=new CO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new Jg(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(e){const t=await Mc(this,this.stsTokenManager.getToken(this.auth,e));return ft(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return TO(this,e)}reload(){return IO(this)}_assign(e){this!==e&&(ft(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ds({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ft(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Cd(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zi(this.auth.app))return Promise.reject(Js(this.auth));const e=await this.getIdToken();return await Mc(this,vO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,c=t.email??void 0,h=t.phoneNumber??void 0,p=t.photoURL??void 0,T=t.tenantId??void 0,w=t._redirectEventId??void 0,E=t.createdAt??void 0,C=t.lastLoginAt??void 0,{uid:I,emailVerified:M,isAnonymous:B,providerData:W,stsTokenManager:Q}=t;ft(I&&Q,e,"internal-error");const Y=bc.fromJSON(this.name,Q);ft(typeof I=="string",e,"internal-error"),So(s,e.name),So(c,e.name),ft(typeof M=="boolean",e,"internal-error"),ft(typeof B=="boolean",e,"internal-error"),So(h,e.name),So(p,e.name),So(T,e.name),So(w,e.name),So(E,e.name),So(C,e.name);const _e=new Ds({uid:I,auth:e,email:c,emailVerified:M,displayName:s,isAnonymous:B,photoURL:p,phoneNumber:h,tenantId:T,stsTokenManager:Y,createdAt:E,lastLoginAt:C});return W&&Array.isArray(W)&&(_e.providerData=W.map(ae=>({...ae}))),w&&(_e._redirectEventId=w),_e}static async _fromIdTokenResponse(e,t,s=!1){const c=new bc;c.updateFromServerResponse(t);const h=new Ds({uid:t.localId,auth:e,stsTokenManager:c,isAnonymous:s});return await Cd(h),h}static async _fromGetAccountInfoResponse(e,t,s){const c=t.users[0];ft(c.localId!==void 0,"internal-error");const h=c.providerUserInfo!==void 0?xv(c.providerUserInfo):[],p=!(c.email&&c.passwordHash)&&!(h!=null&&h.length),T=new bc;T.updateFromIdToken(s);const w=new Ds({uid:c.localId,auth:e,stsTokenManager:T,isAnonymous:p}),E={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:h,metadata:new Jg(c.createdAt,c.lastLoginAt),isAnonymous:!(c.email&&c.passwordHash)&&!(h!=null&&h.length)};return Object.assign(w,E),w}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_=new Map;function Ua(n){Ga(n instanceof Function,"Expected a class definition");let e=u_.get(n);return e?(Ga(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,u_.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}yv.type="NONE";const h_=yv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(n,e,t){return`firebase:${n}:${e}:${t}`}class Ac{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:c,name:h}=this.auth;this.fullUserKey=$f(this.userKey,c.apiKey,h),this.fullPersistenceKey=$f("persistence",c.apiKey,h),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Sd(this.auth,{idToken:e}).catch(()=>{});return t?Ds._fromGetAccountInfoResponse(this.auth,t,e):null}return Ds._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Ac(Ua(h_),e,s);const c=(await Promise.all(t.map(async E=>{if(await E._isAvailable())return E}))).filter(E=>E);let h=c[0]||Ua(h_);const p=$f(s,e.config.apiKey,e.name);let T=null;for(const E of t)try{const C=await E._get(p);if(C){let I;if(typeof C=="string"){const M=await Sd(e,{idToken:C}).catch(()=>{});if(!M)break;I=await Ds._fromGetAccountInfoResponse(e,M,C)}else I=Ds._fromJSON(e,C);E!==h&&(T=I),h=E;break}}catch{}const w=c.filter(E=>E._shouldAllowMigration);return!h._shouldAllowMigration||!w.length?new Ac(h,e,s):(h=w[0],T&&await h._set(p,T.toJSON()),await Promise.all(t.map(async E=>{if(E!==h)try{await E._remove(p)}catch{}})),new Ac(h,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ev(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(vv(e))return"Blackberry";if(Tv(e))return"Webos";if(_v(e))return"Safari";if((e.includes("chrome/")||wv(e))&&!e.includes("edge/"))return"Chrome";if(Av(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function Ev(n=fi()){return/firefox\//i.test(n)}function _v(n=fi()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function wv(n=fi()){return/crios\//i.test(n)}function bv(n=fi()){return/iemobile/i.test(n)}function Av(n=fi()){return/android/i.test(n)}function vv(n=fi()){return/blackberry/i.test(n)}function Tv(n=fi()){return/webos/i.test(n)}function mp(n=fi()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function DO(n=fi()){var e;return mp(n)&&!!((e=window.navigator)!=null&&e.standalone)}function MO(){return DN()&&document.documentMode===10}function Sv(n=fi()){return mp(n)||Av(n)||Tv(n)||vv(n)||/windows phone/i.test(n)||bv(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(n,e=[]){let t;switch(n){case"Browser":t=f_(fi());break;case"Worker":t=`${f_(fi())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Vc}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=h=>new Promise((p,T)=>{try{const w=e(h);p(w)}catch(w){T(w)}});s.onAbort=t,this.queue.push(s);const c=this.queue.length-1;return()=>{this.queue[c]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const c of t)try{c()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LO(n,e={}){return Ka(n,"GET","/v2/passwordPolicy",Qo(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO=6;class BO{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??kO,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,c=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),c&&(t.meetsMaxPasswordLength=e.length<=c)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let c=0;c<e.length;c++)s=e.charAt(c),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,c,h){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=c)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{constructor(e,t,s,c){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=c,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new d_(this),this.idTokenSubscription=new d_(this),this.beforeStateQueue=new PO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=c.sdkClientVersion,this._persistenceManagerAvailable=new Promise(h=>this._resolvePersistenceManagerAvailable=h)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ua(t)),this._initializationPromise=this.queue(async()=>{var s,c,h;if(!this._deleted&&(this.persistenceManager=await Ac.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((c=this._popupRedirectResolver)!=null&&c._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((h=this.currentUser)==null?void 0:h.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Sd(this,{idToken:e}),s=await Ds._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var h;if(Zi(this.app)){const p=this.app.settings.authIdToken;return p?new Promise(T=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(p).then(T,T))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,c=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const p=(h=this.redirectUser)==null?void 0:h._redirectEventId,T=s==null?void 0:s._redirectEventId,w=await this.tryRedirectSignIn(e);(!p||p===T)&&(w!=null&&w.user)&&(s=w.user,c=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(s)}catch(p){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(p))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ft(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Cd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=pO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zi(this.app))return Promise.reject(Js(this));const t=e?dr(e):null;return t&&ft(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ft(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zi(this.app)?Promise.reject(Js(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zi(this.app)?Promise.reject(Js(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ua(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await LO(this),t=new BO(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new lh("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await OO(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ua(e)||this._popupRedirectResolver;ft(t,this,"argument-error"),this.redirectPersistenceManager=await Ac.create(this,[Ua(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,c){if(this._deleted)return()=>{};const h=typeof t=="function"?t:t.next.bind(t);let p=!1;const T=this._isInitialized?Promise.resolve():this._initializationPromise;if(ft(T,this,"internal-error"),T.then(()=>{p||h(this.currentUser)}),typeof t=="function"){const w=e.addObserver(t,s,c);return()=>{p=!0,w()}}else{const w=e.addObserver(t);return()=>{p=!0,w()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ft(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Cv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var c;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((c=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:c.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(Zi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&dO(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Zo(n){return dr(n)}class d_{constructor(e){this.auth=e,this.observer=null,this.addObserver=jN(t=>this.observer=t)}get next(){return ft(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let s0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function VO(n){s0=n}function Iv(n){return s0.loadJS(n)}function jO(){return s0.recaptchaEnterpriseScript}function FO(){return s0.gapiScript}function zO(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class HO{constructor(){this.enterprise=new GO}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class GO{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const qO="recaptcha-enterprise",Nv="NO_RECAPTCHA";class YO{constructor(e){this.type=qO,this.auth=Zo(e)}async verify(e="verify",t=!1){async function s(h){if(!t){if(h.tenantId==null&&h._agentRecaptchaConfig!=null)return h._agentRecaptchaConfig.siteKey;if(h.tenantId!=null&&h._tenantRecaptchaConfigs[h.tenantId]!==void 0)return h._tenantRecaptchaConfigs[h.tenantId].siteKey}return new Promise(async(p,T)=>{AO(h,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(w=>{if(w.recaptchaKey===void 0)T(new Error("recaptcha Enterprise site key undefined"));else{const E=new bO(w);return h.tenantId==null?h._agentRecaptchaConfig=E:h._tenantRecaptchaConfigs[h.tenantId]=E,p(E.siteKey)}}).catch(w=>{T(w)})})}function c(h,p,T){const w=window.grecaptcha;l_(w)?w.enterprise.ready(()=>{w.enterprise.execute(h,{action:e}).then(E=>{p(E)}).catch(()=>{p(Nv)})}):T(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new HO().execute("siteKey",{action:"verify"}):new Promise((h,p)=>{s(this.auth).then(T=>{if(!t&&l_(window.grecaptcha))c(T,h,p);else{if(typeof window>"u"){p(new Error("RecaptchaVerifier is only supported in browser"));return}let w=jO();w.length!==0&&(w+=T),Iv(w).then(()=>{c(T,h,p)}).catch(E=>{p(E)})}}).catch(T=>{p(T)})})}}async function g_(n,e,t,s=!1,c=!1){const h=new YO(n);let p;if(c)p=Nv;else try{p=await h.verify(t)}catch{p=await h.verify(t,!0)}const T={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in T){const w=T.phoneEnrollmentInfo.phoneNumber,E=T.phoneEnrollmentInfo.recaptchaToken;Object.assign(T,{phoneEnrollmentInfo:{phoneNumber:w,recaptchaToken:E,captchaResponse:p,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in T){const w=T.phoneSignInInfo.recaptchaToken;Object.assign(T,{phoneSignInInfo:{recaptchaToken:w,captchaResponse:p,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return T}return s?Object.assign(T,{captchaResp:p}):Object.assign(T,{captchaResponse:p}),Object.assign(T,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(T,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),T}async function $g(n,e,t,s,c){var h;if((h=n._getRecaptchaConfig())!=null&&h.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const p=await g_(n,e,t,t==="getOobCode");return s(n,p)}else return s(n,e).catch(async p=>{if(p.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const T=await g_(n,e,t,t==="getOobCode");return s(n,T)}else return Promise.reject(p)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XO(n,e){const t=bm(n,"auth");if(t.isInitialized()){const c=t.getImmediate(),h=t.getOptions();if(Al(h,e??{}))return c;Ps(c,"already-initialized")}return t.initialize({options:e})}function WO(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(Ua);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function KO(n,e,t){const s=Zo(n);ft(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const c=!1,h=Rv(e),{host:p,port:T}=QO(e),w=T===null?"":`:${T}`,E={url:`${h}//${p}${w}/`},C=Object.freeze({host:p,port:T,protocol:h.replace(":",""),options:Object.freeze({disableWarnings:c})});if(!s._canInitEmulator){ft(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),ft(Al(E,s.config.emulator)&&Al(C,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=E,s.emulatorConfig=C,s.settings.appVerificationDisabledForTesting=!0,Uc(p)?(Cb(`${h}//${p}${w}`),Ib("Auth",!0)):ZO()}function Rv(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function QO(n){const e=Rv(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",c=/^(\[[^\]]+\])(:|$)/.exec(s);if(c){const h=c[1];return{host:h,port:m_(s.substr(h.length+1))}}else{const[h,p]=s.split(":");return{host:h,port:m_(p)}}}function m_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function ZO(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ba("not implemented")}_getIdTokenResponse(e){return Ba("not implemented")}_linkToIdToken(e,t){return Ba("not implemented")}_getReauthenticationResolver(e){return Ba("not implemented")}}async function JO(n,e){return Ka(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $O(n,e){return wh(n,"POST","/v1/accounts:signInWithPassword",Qo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e5(n,e){return wh(n,"POST","/v1/accounts:signInWithEmailLink",Qo(n,e))}async function t5(n,e){return wh(n,"POST","/v1/accounts:signInWithEmailLink",Qo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh extends pp{constructor(e,t,s,c=null){super("password",s),this._email=e,this._password=t,this._tenantId=c}static _fromEmailAndPassword(e,t){return new sh(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new sh(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $g(e,t,"signInWithPassword",$O);case"emailLink":return e5(e,{email:this._email,oobCode:this._password});default:Ps(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $g(e,s,"signUpPassword",JO);case"emailLink":return t5(e,{idToken:t,email:this._email,oobCode:this._password});default:Ps(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vc(n,e){return wh(n,"POST","/v1/accounts:signInWithIdp",Qo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n5="http://localhost";class Cl extends pp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Cl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ps("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:c,...h}=t;if(!s||!c)return null;const p=new Cl(s,c);return p.idToken=h.idToken||void 0,p.accessToken=h.accessToken||void 0,p.secret=h.secret,p.nonce=h.nonce,p.pendingToken=h.pendingToken||null,p}_getIdTokenResponse(e){const t=this.buildRequest();return vc(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,vc(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,vc(e,t)}buildRequest(){const e={requestUri:n5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ch(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r5(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function i5(n){const e=Mu(Pu(n)).link,t=e?Mu(Pu(e)).deep_link_id:null,s=Mu(Pu(n)).deep_link_id;return(s?Mu(Pu(s)).link:null)||s||t||e||n}class xp{constructor(e){const t=Mu(Pu(e)),s=t.apiKey??null,c=t.oobCode??null,h=r5(t.mode??null);ft(s&&c&&h,"argument-error"),this.apiKey=s,this.operation=h,this.code=c,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=i5(e);try{return new xp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(){this.providerId=Xc.PROVIDER_ID}static credential(e,t){return sh._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=xp.parseLink(t);return ft(s,"argument-error"),sh._fromEmailAndCode(e,s.code,s.tenantId)}}Xc.PROVIDER_ID="password";Xc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Xc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh extends Ov{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co extends bh{constructor(){super("facebook.com")}static credential(e){return Cl._fromParams({providerId:Co.PROVIDER_ID,signInMethod:Co.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Co.credentialFromTaggedObject(e)}static credentialFromError(e){return Co.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Co.credential(e.oauthAccessToken)}catch{return null}}}Co.FACEBOOK_SIGN_IN_METHOD="facebook.com";Co.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io extends bh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Cl._fromParams({providerId:Io.PROVIDER_ID,signInMethod:Io.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Io.credentialFromTaggedObject(e)}static credentialFromError(e){return Io.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Io.credential(t,s)}catch{return null}}}Io.GOOGLE_SIGN_IN_METHOD="google.com";Io.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No extends bh{constructor(){super("github.com")}static credential(e){return Cl._fromParams({providerId:No.PROVIDER_ID,signInMethod:No.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return No.credentialFromTaggedObject(e)}static credentialFromError(e){return No.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return No.credential(e.oauthAccessToken)}catch{return null}}}No.GITHUB_SIGN_IN_METHOD="github.com";No.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro extends bh{constructor(){super("twitter.com")}static credential(e,t){return Cl._fromParams({providerId:Ro.PROVIDER_ID,signInMethod:Ro.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ro.credentialFromTaggedObject(e)}static credentialFromError(e){return Ro.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Ro.credential(t,s)}catch{return null}}}Ro.TWITTER_SIGN_IN_METHOD="twitter.com";Ro.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dv(n,e){return wh(n,"POST","/v1/accounts:signUp",Qo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,c=!1){const h=await Ds._fromIdTokenResponse(e,s,c),p=p_(s);return new qa({user:h,providerId:p,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const c=p_(s);return new qa({user:e,providerId:c,_tokenResponse:s,operationType:t})}}function p_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s5(n){var c;if(Zi(n.app))return Promise.reject(Js(n));const e=Zo(n);if(await e._initializationPromise,(c=e.currentUser)!=null&&c.isAnonymous)return new qa({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await Dv(e,{returnSecureToken:!0}),s=await qa._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id extends Xa{constructor(e,t,s,c){super(t.code,t.message),this.operationType=s,this.user=c,Object.setPrototypeOf(this,Id.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,c){return new Id(e,t,s,c)}}function Mv(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(h=>{throw h.code==="auth/multi-factor-auth-required"?Id._fromErrorAndOperation(n,h,e,s):h})}async function a5(n,e,t=!1){const s=await Mc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return qa._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o5(n,e,t=!1){const{auth:s}=n;if(Zi(s.app))return Promise.reject(Js(s));const c="reauthenticate";try{const h=await Mc(n,Mv(s,c,e,n),t);ft(h.idToken,s,"internal-error");const p=gp(h.idToken);ft(p,s,"internal-error");const{sub:T}=p;return ft(n.uid===T,s,"user-mismatch"),qa._forOperation(n,c,h)}catch(h){throw(h==null?void 0:h.code)==="auth/user-not-found"&&Ps(s,"user-mismatch"),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pv(n,e,t=!1){if(Zi(n.app))return Promise.reject(Js(n));const s="signIn",c=await Mv(n,s,e),h=await qa._fromIdTokenResponse(n,s,c);return t||await n._updateCurrentUser(h.user),h}async function l5(n,e){return Pv(Zo(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lv(n){const e=Zo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function c5(n,e,t){if(Zi(n.app))return Promise.reject(Js(n));const s=Zo(n),p=await $g(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Dv).catch(w=>{throw w.code==="auth/password-does-not-meet-requirements"&&Lv(n),w}),T=await qa._fromIdTokenResponse(s,"signIn",p);return await s._updateCurrentUser(T.user),T}function xg(n,e,t){return Zi(n.app)?Promise.reject(Js(n)):l5(dr(n),Xc.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&Lv(n),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u5(n,e){return Ka(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h5(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const s=dr(n),h={idToken:await s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},p=await Mc(s,u5(s.auth,h));s.displayName=p.displayName||null,s.photoURL=p.photoUrl||null;const T=s.providerData.find(({providerId:w})=>w==="password");T&&(T.displayName=s.displayName,T.photoURL=s.photoURL),await s._updateTokensIfNecessary(p)}function f5(n,e,t,s){return dr(n).onIdTokenChanged(e,t,s)}function d5(n,e,t){return dr(n).beforeAuthStateChanged(e,t)}const Nd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Nd,"1"),this.storage.removeItem(Nd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g5=1e3,m5=10;class Bv extends kv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Sv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),c=this.localCache[t];s!==c&&e(t,c,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((p,T,w)=>{this.notifyListeners(p,w)});return}const s=e.key;t?this.detachListener():this.stopPolling();const c=()=>{const p=this.storage.getItem(s);!t&&this.localCache[s]===p||this.notifyListeners(s,p)},h=this.storage.getItem(s);MO()&&h!==e.newValue&&e.newValue!==e.oldValue?setTimeout(c,m5):c()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const c of Array.from(s))c(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},g5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Bv.type="LOCAL";const p5=Bv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv extends kv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Uv.type="SESSION";const Vv=Uv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x5(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(c=>c.isListeningto(e));if(t)return t;const s=new a0(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:c,data:h}=t.data,p=this.handlersMap[c];if(!(p!=null&&p.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:c});const T=Array.from(p).map(async E=>E(t.origin,h)),w=await x5(T);t.ports[0].postMessage({status:"done",eventId:s,eventType:c,response:w})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}a0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yp(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const c=typeof MessageChannel<"u"?new MessageChannel:null;if(!c)throw new Error("connection_unavailable");let h,p;return new Promise((T,w)=>{const E=yp("",20);c.port1.start();const C=setTimeout(()=>{w(new Error("unsupported_event"))},s);p={messageChannel:c,onMessage(I){const M=I;if(M.data.eventId===E)switch(M.data.status){case"ack":clearTimeout(C),h=setTimeout(()=>{w(new Error("timeout"))},3e3);break;case"done":clearTimeout(h),T(M.data.response);break;default:clearTimeout(C),clearTimeout(h),w(new Error("invalid_response"));break}}},this.handlers.add(p),c.port1.addEventListener("message",p.onMessage),this.target.postMessage({eventType:e,eventId:E,data:t},[c.port2])}).finally(()=>{p&&this.removeMessageHandler(p)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $s(){return window}function E5(n){$s().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(){return typeof $s().WorkerGlobalScope<"u"&&typeof $s().importScripts=="function"}async function _5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function w5(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function b5(){return jv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="firebaseLocalStorageDb",A5=1,Rd="firebaseLocalStorage",zv="fbase_key";class Ah{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function o0(n,e){return n.transaction([Rd],e?"readwrite":"readonly").objectStore(Rd)}function v5(){const n=indexedDB.deleteDatabase(Fv);return new Ah(n).toPromise()}function em(){const n=indexedDB.open(Fv,A5);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Rd,{keyPath:zv})}catch(c){t(c)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Rd)?e(s):(s.close(),await v5(),e(await em()))})})}async function x_(n,e,t){const s=o0(n,!0).put({[zv]:e,value:t});return new Ah(s).toPromise()}async function T5(n,e){const t=o0(n,!1).get(e),s=await new Ah(t).toPromise();return s===void 0?null:s.value}function y_(n,e){const t=o0(n,!0).delete(e);return new Ah(t).toPromise()}const S5=800,C5=3;class Hv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await em(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>C5)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=a0._getInstance(b5()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await _5(),!this.activeServiceWorker)return;this.sender=new y5(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||w5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await em();return await x_(e,Nd,"1"),await y_(e,Nd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>x_(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>T5(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>y_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(c=>{const h=o0(c,!1).getAll();return new Ah(h).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:c,value:h}of e)s.add(c),JSON.stringify(this.localCache[c])!==JSON.stringify(h)&&(this.notifyListeners(c,h),t.push(c));for(const c of Object.keys(this.localCache))this.localCache[c]&&!s.has(c)&&(this.notifyListeners(c,null),t.push(c));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const c of Array.from(s))c(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),S5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Hv.type="LOCAL";const I5=Hv;new _h(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N5(n,e){return e?Ua(e):(ft(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep extends pp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return vc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return vc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function R5(n){return Pv(n.auth,new Ep(n),n.bypassAuthState)}function O5(n){const{auth:e,user:t}=n;return ft(t,e,"internal-error"),o5(t,new Ep(n),n.bypassAuthState)}async function D5(n){const{auth:e,user:t}=n;return ft(t,e,"internal-error"),a5(t,new Ep(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e,t,s,c,h=!1){this.auth=e,this.resolver=s,this.user=c,this.bypassAuthState=h,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:c,tenantId:h,error:p,type:T}=e;if(p){this.reject(p);return}const w={auth:this.auth,requestUri:t,sessionId:s,tenantId:h||void 0,postBody:c||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(T)(w))}catch(E){this.reject(E)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return R5;case"linkViaPopup":case"linkViaRedirect":return D5;case"reauthViaPopup":case"reauthViaRedirect":return O5;default:Ps(this.auth,"internal-error")}}resolve(e){Ga(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ga(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M5=new _h(2e3,1e4);class pc extends Gv{constructor(e,t,s,c,h){super(e,t,c,h),this.provider=s,this.authWindow=null,this.pollId=null,pc.currentPopupAction&&pc.currentPopupAction.cancel(),pc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ft(e,this.auth,"internal-error"),e}async onExecution(){Ga(this.filter.length===1,"Popup operations only handle one event");const e=yp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Zs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Zs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,pc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,M5.get())};e()}}pc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P5="pendingRedirect",ed=new Map;class L5 extends Gv{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=ed.get(this.auth._key());if(!e){try{const s=await k5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}ed.set(this.auth._key(),e)}return this.bypassAuthState||ed.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function k5(n,e){const t=V5(e),s=U5(n);if(!await s._isAvailable())return!1;const c=await s._get(t)==="true";return await s._remove(t),c}function B5(n,e){ed.set(n._key(),e)}function U5(n){return Ua(n._redirectPersistence)}function V5(n){return $f(P5,n.config.apiKey,n.name)}async function j5(n,e,t=!1){if(Zi(n.app))return Promise.reject(Js(n));const s=Zo(n),c=N5(s,e),p=await new L5(s,c,t).execute();return p&&!t&&(delete p.user._redirectEventId,await s._persistUserIfCurrent(p.user),await s._setRedirectUser(null,e)),p}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F5=600*1e3;class z5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!H5(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!qv(e)){const c=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(Zs(this.auth,c))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=F5&&this.cachedEventUids.clear(),this.cachedEventUids.has(E_(e))}saveEventToCache(e){this.cachedEventUids.add(E_(e)),this.lastProcessedEventTime=Date.now()}}function E_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function qv({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function H5(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qv(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G5(n,e={}){return Ka(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Y5=/^https?/;async function X5(n){if(n.config.emulator)return;const{authorizedDomains:e}=await G5(n);for(const t of e)try{if(W5(t))return}catch{}Ps(n,"unauthorized-domain")}function W5(n){const e=Zg(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const p=new URL(n);return p.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&p.hostname===s}if(!Y5.test(t))return!1;if(q5.test(n))return s===n;const c=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+c+"|"+c+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K5=new _h(3e4,6e4);function __(){const n=$s().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Q5(n){return new Promise((e,t)=>{var c,h,p;function s(){__(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{__(),t(Zs(n,"network-request-failed"))},timeout:K5.get()})}if((h=(c=$s().gapi)==null?void 0:c.iframes)!=null&&h.Iframe)e(gapi.iframes.getContext());else if((p=$s().gapi)!=null&&p.load)s();else{const T=zO("iframefcb");return $s()[T]=()=>{gapi.load?s():t(Zs(n,"network-request-failed"))},Iv(`${FO()}?onload=${T}`).catch(w=>t(w))}}).catch(e=>{throw td=null,e})}let td=null;function Z5(n){return td=td||Q5(n),td}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J5=new _h(5e3,15e3),$5="__/auth/iframe",eD="emulator/auth/iframe",tD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rD(n){const e=n.config;ft(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?dp(e,eD):`https://${n.config.authDomain}/${$5}`,s={apiKey:e.apiKey,appName:n.name,v:Vc},c=nD.get(n.config.apiHost);c&&(s.eid=c);const h=n._getFrameworks();return h.length&&(s.fw=h.join(",")),`${t}?${ch(s).slice(1)}`}async function iD(n){const e=await Z5(n),t=$s().gapi;return ft(t,n,"internal-error"),e.open({where:document.body,url:rD(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tD,dontclear:!0},s=>new Promise(async(c,h)=>{await s.restyle({setHideOnLeave:!1});const p=Zs(n,"network-request-failed"),T=$s().setTimeout(()=>{h(p)},J5.get());function w(){$s().clearTimeout(T),c(s)}s.ping(w).then(w,()=>{h(p)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},aD=500,oD=600,lD="_blank",cD="http://localhost";class w_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function uD(n,e,t,s=aD,c=oD){const h=Math.max((window.screen.availHeight-c)/2,0).toString(),p=Math.max((window.screen.availWidth-s)/2,0).toString();let T="";const w={...sD,width:s.toString(),height:c.toString(),top:h,left:p},E=fi().toLowerCase();t&&(T=wv(E)?lD:t),Ev(E)&&(e=e||cD,w.scrollbars="yes");const C=Object.entries(w).reduce((M,[B,W])=>`${M}${B}=${W},`,"");if(DO(E)&&T!=="_self")return hD(e||"",T),new w_(null);const I=window.open(e||"",T,C);ft(I,n,"popup-blocked");try{I.focus()}catch{}return new w_(I)}function hD(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD="__/auth/handler",dD="emulator/auth/handler",gD=encodeURIComponent("fac");async function b_(n,e,t,s,c,h){ft(n.config.authDomain,n,"auth-domain-config-required"),ft(n.config.apiKey,n,"invalid-api-key");const p={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:Vc,eventId:c};if(e instanceof Ov){e.setDefaultLanguage(n.languageCode),p.providerId=e.providerId||"",VN(e.getCustomParameters())||(p.customParameters=JSON.stringify(e.getCustomParameters()));for(const[C,I]of Object.entries({}))p[C]=I}if(e instanceof bh){const C=e.getScopes().filter(I=>I!=="");C.length>0&&(p.scopes=C.join(","))}n.tenantId&&(p.tid=n.tenantId);const T=p;for(const C of Object.keys(T))T[C]===void 0&&delete T[C];const w=await n._getAppCheckToken(),E=w?`#${gD}=${encodeURIComponent(w)}`:"";return`${mD(n)}?${ch(T).slice(1)}${E}`}function mD({config:n}){return n.emulator?dp(n,dD):`https://${n.authDomain}/${fD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg="webStorageSupport";class pD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Vv,this._completeRedirectFn=j5,this._overrideRedirectResult=B5}async _openPopup(e,t,s,c){var p;Ga((p=this.eventManagers[e._key()])==null?void 0:p.manager,"_initialize() not called before _openPopup()");const h=await b_(e,t,s,Zg(),c);return uD(e,h,yp())}async _openRedirect(e,t,s,c){await this._originValidation(e);const h=await b_(e,t,s,Zg(),c);return E5(h),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:c,promise:h}=this.eventManagers[t];return c?Promise.resolve(c):(Ga(h,"If manager is not set, promise should be"),h)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await iD(e),s=new z5(e);return t.register("authEvent",c=>(ft(c==null?void 0:c.authEvent,e,"invalid-auth-event"),{status:s.onEvent(c.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(yg,{type:yg},c=>{var p;const h=(p=c==null?void 0:c[0])==null?void 0:p[yg];h!==void 0&&t(!!h),Ps(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=X5(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Sv()||_v()||mp()}}const xD=pD;var A_="@firebase/auth",v_="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ft(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ED(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _D(n){Sc(new vl("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),c=e.getProvider("heartbeat"),h=e.getProvider("app-check-internal"),{apiKey:p,authDomain:T}=s.options;ft(p&&!p.includes(":"),"invalid-api-key",{appName:s.name});const w={apiKey:p,authDomain:T,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Cv(n)},E=new UO(s,c,h,w);return WO(E,t),E},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Sc(new vl("auth-internal",e=>{const t=Zo(e.getProvider("auth").getImmediate());return(s=>new yD(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Lo(A_,v_,ED(n)),Lo(A_,v_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD=300,bD=Sb("authIdTokenMaxAge")||wD;let T_=null;const AD=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>bD)return;const c=t==null?void 0:t.token;T_!==c&&(T_=c,await fetch(n,{method:c?"POST":"DELETE",headers:c?{Authorization:`Bearer ${c}`}:{}}))};function vD(n=Db()){const e=bm(n,"auth");if(e.isInitialized())return e.getImmediate();const t=XO(n,{popupRedirectResolver:xD,persistence:[I5,p5,Vv]}),s=Sb("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const h=new URL(s,location.origin);if(location.origin===h.origin){const p=AD(h.toString());d5(t,p,()=>p(t.currentUser)),f5(t,T=>p(T))}}const c=vb("auth");return c&&KO(t,`http://${c}`),t}function TD(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}VO({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=c=>{const h=Zs("internal-error");h.customData=c,t(h)},s.type="text/javascript",s.charset="UTF-8",TD().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_D("Browser");const SD={apiKey:"AIzaSyCH_rXgZIgy7R03m2Oiyzze9LVKoTISaVA",authDomain:"workshop-36cbe.firebaseapp.com",projectId:"workshop-36cbe",storageBucket:"workshop-36cbe.firebasestorage.app",messagingSenderId:"742601440632",appId:"1:742601440632:web:48e380f7e1441494ba9c8d"};let Pc;try{Pc=Ob(SD)}catch(n){console.error("Firebase init failed:",n),Pc={name:"[Placeholder]"}}const xt=Pc.name!=="[Placeholder]"?W8(Pc):null,El=Pc.name!=="[Placeholder]"?vD(Pc):null;var ea=(n=>(n.STUDENT="STUDENT",n.ADMIN="ADMIN",n.GUEST="GUEST",n))(ea||{});const Vo=[{name:"",threshold:0,color:"bg-slate-400",icon:""},{name:"",threshold:500,color:"bg-blue-400",icon:""},{name:"",threshold:2e3,color:"bg-green-500",icon:""},{name:"",threshold:5e3,color:"bg-purple-500",icon:""},{name:"",threshold:1e4,color:"bg-orange-500",icon:""},{name:"",threshold:25e3,color:"bg-yellow-500",icon:""}],_p={USER:"workshop_user"},tm=["","","","","","","",""],Eg=[{text:"",author:" (William Butler Yeats)"},{text:"",author:" (Winston Churchill)"},{text:" 20  80 ",author:" (Henry Ford)"},{text:"",author:" (Nelson Mandela)"},{text:"",author:" (Steve Jobs)"},{text:"",author:""},{text:"",author:""},{text:"",author:" (Aristotle)"},{text:"",author:" (Thomas Edison)"},{text:"",author:" (Pablo Picasso)"}],St={STUDENTS:"students",MISSIONS:"missions",PRODUCTS:"products",WISHES:"wishes",REDEMPTIONS:"redemptions",CHALLENGE_HISTORY:"challengeHistory",POINT_REASONS:"pointReasons",MISSION_SUBMISSIONS:"missionSubmissions",PRODUCT_CATEGORIES:"productCategories",BANNERS:"banners"},Bf={id:"user_admin",name:"",points:0,totalEarned:0,role:ea.ADMIN,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Admin",isApproved:!0},S_={id:"user_guest",name:"",points:0,totalEarned:0,role:ea.GUEST,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Guest",isApproved:!0},C_=async()=>{try{return(await r0(rs(xt,St.STUDENTS))).docs.map(e=>({...e.data(),id:e.id}))}catch(n){return console.error("Error fetching students:",n),[]}},nm=async n=>{try{await Ko(mn(xt,St.STUDENTS,n.id),n)}catch(e){console.error("Error saving student:",e),console.error("")}},CD=async n=>{try{const e=mn(xt,St.STUDENTS,n);await Dl(e,{isApproved:!0})}catch(e){console.error("Error approving student:",e)}},ID=async(n,e)=>{try{await hp(xt,async t=>{const s=mn(xt,St.STUDENTS,n),c=await t.get(s);if(!c.exists())throw new Error("");const h=c.data();t.update(s,{points:h.points+e,totalEarned:e>0?h.totalEarned+e:h.totalEarned})})}catch(t){throw console.error("Error issuing points (Transaction):",t),t}},ND=async n=>{try{await Yc(mn(xt,St.STUDENTS,n))}catch(e){console.error("Error deleting student:",e)}},I_=()=>{const n=localStorage.getItem(_p.USER);return n?JSON.parse(n):null},La=async n=>{localStorage.setItem(_p.USER,JSON.stringify(n)),n.role===ea.STUDENT&&await nm(n)},RD=async()=>{localStorage.removeItem(_p.USER),await El.signOut()},OD=async(n,e)=>{try{return await hp(xt,async s=>{const c=mn(xt,St.STUDENTS,n.id),h=mn(xt,St.PRODUCTS,e.id),p=mn(xt,St.REDEMPTIONS,`red_${Date.now()}`),T=await s.get(c),w=await s.get(h);if(!T.exists())throw new Error("");if(!w.exists())throw new Error("");const E=T.data(),C=w.data();if(E.points<C.price)return{success:!1,message:""};if(C.stock<=0)return{success:!1,message:""};s.update(c,{points:E.points-C.price}),s.update(h,{stock:C.stock-1});const I={id:p.id,userId:n.id,productId:e.id,productName:e.name,pointsSpent:e.price,timestamp:Date.now(),status:"pending",qrCodeData:`AUTH_WORKSHOP_${Date.now()}_${e.id}`};return s.set(p,I),{success:!0,message:""}})}catch(t){return console.error("Redemption transaction failed:",t),{success:!1,message:`: ${t.message}`}}},DD=async(n,e)=>{try{const t=mn(xt,St.REDEMPTIONS,n);await Dl(t,{status:e})}catch(t){console.error("Error updating redemption status:",t)}},MD=async n=>{try{const e=`cat_${Date.now()}`;await Ko(mn(xt,St.PRODUCT_CATEGORIES,e),{id:e,name:n})}catch(e){console.error("Error adding category:",e)}},PD=async n=>{try{await Yc(mn(xt,St.PRODUCT_CATEGORIES,n))}catch(e){console.error("Error deleting category:",e)}},Yv=n=>Wa(rs(xt,St.PRODUCT_CATEGORIES),e=>{const t=e.docs.map(s=>({...s.data(),id:s.id}));n(t)}),LD=async n=>{try{await Ko(mn(xt,St.MISSIONS,n.id),n)}catch(e){console.error("Error adding mission:",e)}},kD=async n=>{try{const e=mn(xt,St.MISSIONS,n),t=await cv(e);if(t.exists()){const s=t.data();await Dl(e,{isActive:!s.isActive})}}catch(e){console.error("Error toggling mission:",e)}},BD=async(n,e)=>{try{const t=new Date;t.setHours(0,0,0,0);const s=e0(rs(xt,St.CHALLENGE_HISTORY),Xu("userId","==",n),Xu("missionId","==",e),Xu("timestamp",">=",t.getTime()),nO(1));return!(await r0(s)).empty}catch(t){return console.error("Error checking mission completion:",t),!1}},UD=async n=>{try{const e=new Date;e.setHours(0,0,0,0);const t=e0(rs(xt,St.CHALLENGE_HISTORY),Xu("userId","==",n),Xu("timestamp",">=",e.getTime())),s=await r0(t),c=new Set;return s.forEach(h=>{const p=h.data();p.missionId&&c.add(p.missionId)}),c}catch(e){return console.error("Error fetching today completed missions:",e),new Set}},VD=async n=>{try{if(await BD(n.userId,n.missionId)){console.warn("Mission already completed today");return}const t=new Date;if(t.setHours(0,0,0,0),(await r0(e0(rs(xt,St.MISSION_SUBMISSIONS)))).docs.find(h=>{const p=h.data();return p.userId===n.userId&&p.missionId===n.missionId&&p.status==="pending"&&p.timestamp>=t.getTime()})){console.warn("Mission submission already pending today");return}await Ko(mn(xt,St.MISSION_SUBMISSIONS,n.id),n)}catch(e){console.error("Error submitting mission:",e)}},jD=async n=>{try{await hp(xt,async e=>{const t=mn(xt,St.MISSION_SUBMISSIONS,n),s=await e.get(t);if(!s.exists())throw new Error("");const c=s.data();if(c.status!=="pending")throw new Error("");const h=mn(xt,St.STUDENTS,c.userId),p=await e.get(h);e.update(t,{status:"approved"});const T=`h_${Date.now()}`,w=mn(xt,St.CHALLENGE_HISTORY,T);if(e.set(w,{id:T,userId:c.userId,missionId:c.missionId,timestamp:Date.now()}),p.exists()){const E=p.data();e.update(h,{points:E.points+c.points,totalEarned:E.totalEarned+c.points})}})}catch(e){throw console.error("Error approving mission (Transaction):",e),e}},FD=async n=>{try{const e=mn(xt,St.MISSION_SUBMISSIONS,n);await Dl(e,{status:"rejected"})}catch(e){console.error("Error rejecting mission:",e)}},Xv=n=>Wa(rs(xt,St.MISSION_SUBMISSIONS),e=>{n(e.docs.map(t=>({...t.data(),id:t.id})))}),zD=async n=>{try{await Ko(mn(xt,St.PRODUCTS,n.id),n)}catch(e){console.error("Error adding product:",e)}},HD=async(n,e)=>{try{const t=mn(xt,St.PRODUCTS,n);await Dl(t,{stock:Math.max(0,e)})}catch(t){console.error("Error updating product stock:",t)}},GD=async n=>{try{await Yc(mn(xt,St.PRODUCTS,n))}catch(e){console.error("Error deleting product:",e)}},qD=async n=>{try{await Ko(mn(xt,St.POINT_REASONS,n.id),n)}catch(e){console.error("Error adding point reason:",e)}},YD=async n=>{try{await Yc(mn(xt,St.POINT_REASONS,n))}catch(e){console.error("Error deleting point reason:",e)}},XD=n=>Wa(rs(xt,St.POINT_REASONS),e=>{const t=e.docs.map(s=>({...s.data(),id:s.id}));n(t)}),WD=async n=>{try{await Ko(mn(xt,St.WISHES,n.id),n)}catch(e){console.error("Error adding wish:",e)}},KD=async(n,e)=>{try{const t=mn(xt,St.WISHES,n);await Dl(t,e)}catch(t){console.error("Error updating wish:",t)}},QD=async n=>{try{await Yc(mn(xt,St.WISHES,n))}catch(e){console.error("Error deleting wish:",e)}},ZD=async(n,e)=>{try{const t=mn(xt,St.WISHES,n),s=await cv(t);if(s.exists()){const h=s.data().likedBy||[];if(h.includes(e)){console.error("");return}await Dl(t,{likedBy:[...h,e]})}}catch(t){console.error("Error liking wish:",t)}},JD=n=>Wa(rs(xt,St.STUDENTS),e=>{const t=e.docs.map(s=>({...s.data(),id:s.id}));n(t)},e=>{console.error("Error in subscribeToStudents:",e)}),Wv=n=>Wa(rs(xt,St.MISSIONS),e=>{const t=e.docs.map(s=>({...s.data(),id:s.id}));n(t)},e=>console.error("Error subscribing to missions:",e)),Kv=n=>Wa(rs(xt,St.PRODUCTS),e=>{const t=e.docs.map(s=>({...s.data(),id:s.id}));n(t)},e=>{console.error("Error subscribing to products:",e),console.error("")}),Qv=n=>Wa(rs(xt,St.WISHES),e=>{const t=e.docs.map(s=>({...s.data(),id:s.id}));n(t)},e=>console.error("Error subscribing to wishes:",e)),Zv=n=>Wa(rs(xt,St.REDEMPTIONS),e=>{const t=e.docs.map(s=>{const c=s.data();return{id:s.id,status:"pending",pointsSpent:0,productName:"",timestamp:Date.now(),userId:"unknown",qrCodeData:"",...c}});n(t)},e=>{console.error("Error subscribing to redemptions:",e)}),$D=async(n,e="",t="center",s="h-48",c="md:h-72")=>{try{const h={id:`banner_${Date.now()}`,imageUrl:n,tag:e,active:!0,timestamp:Date.now(),objectPosition:t,mobileHeight:s,desktopHeight:c};await Ko(mn(xt,St.BANNERS,h.id),h)}catch(h){throw console.error("Error adding banner:",h),h}},eM=async n=>{try{await Yc(mn(xt,St.BANNERS,n))}catch(e){throw console.error("Error deleting banner:",e),e}},wp=n=>{const e=e0(rs(xt,St.BANNERS));return Wa(e,t=>{const s=t.docs.map(c=>c.data());s.sort((c,h)=>c.order!==void 0&&h.order!==void 0?c.order-h.order:c.order!==void 0?-1:h.order!==void 0?1:h.timestamp-c.timestamp),n(s)},t=>{console.error("Error subscribing to banners:",t)})},tM=async n=>{try{const e=cO(xt);n.forEach((t,s)=>{const c=mn(xt,St.BANNERS,t.id);e.update(c,{order:s})}),await e.commit()}catch(e){throw console.error("Error updating banner order:",e),e}},nM=({user:n,onUserUpdate:e})=>{const{showAlert:t}=Bc(),[s,c]=ne.useState(!1),h=T=>{var C;const w=(C=T.target.files)==null?void 0:C[0];if(!w)return;if(w.size>500*1024){t(" 500KB ","error");return}if(!w.type.startsWith("image/")){t(" JPG  PNG ","error");return}c(!0);const E=new FileReader;E.onloadend=async()=>{try{const I=E.result,M={...n,avatar:I};await La(M),e(),t("","success")}catch(I){console.error("Error updating avatar:",I),t("","error")}finally{c(!1)}},E.readAsDataURL(w)},p=async()=>{if(confirm(""))try{const T=`https://api.dicebear.com/7.x/avataaars/svg?seed=${n.name}&mouth=smile&eyebrows=defaultNatural&eyes=default`,w={...n,avatar:T};await La(w),e(),t("","success")}catch(T){console.error("Error resetting avatar:",T),t("","error")}};return A.jsxs("div",{className:"space-y-8 pb-20 animate-in fade-in duration-500",children:[A.jsxs("header",{children:[A.jsxs("h1",{className:"text-3xl font-black text-slate-800 flex items-center gap-3",children:[A.jsx(ad,{className:"text-indigo-500"}),""]}),A.jsx("p",{className:"text-slate-500 mt-1 font-medium",children:""})]}),A.jsx("div",{className:"bg-white rounded-[2.5rem] p-8 border border-slate-100 shadow-xl shadow-slate-200/50",children:A.jsxs("div",{className:"flex flex-col items-center gap-6",children:[A.jsxs("div",{className:"relative group",children:[A.jsx("div",{className:"absolute inset-0 bg-indigo-500 rounded-full blur-xl opacity-20 group-hover:opacity-40 transition-opacity"}),A.jsx("img",{src:n.avatar,alt:n.name,className:"w-40 h-40 rounded-full border-4 border-white shadow-2xl object-cover relative z-10"}),A.jsxs("label",{className:"absolute bottom-0 right-0 z-20 cursor-pointer",children:[A.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:h,disabled:s}),A.jsx("div",{className:"bg-slate-800 text-white p-3 rounded-2xl hover:bg-slate-700 transition-colors shadow-lg hover:scale-105 active:scale-95",children:A.jsx(Tg,{size:20})})]})]}),A.jsxs("div",{className:"text-center",children:[A.jsx("h2",{className:"text-2xl font-black text-slate-800",children:n.name}),A.jsxs("div",{className:"flex items-center justify-center gap-2 mt-1",children:[A.jsx("span",{className:"text-slate-400 font-bold text-sm uppercase tracking-wider",children:n.role==="ADMIN"?"":""}),A.jsxs("span",{className:"px-2 py-0.5 rounded-lg bg-indigo-100 text-indigo-700 text-xs font-black",children:["Lv.",Math.floor(n.totalEarned/500)+1]})]})]}),A.jsxs("div",{className:"w-full max-w-sm space-y-4 pt-6 mt-6 border-t border-slate-50",children:[A.jsxs("label",{className:"block w-full cursor-pointer",children:[A.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:h,disabled:s}),A.jsxs("div",{className:"w-full bg-indigo-50 hover:bg-indigo-100 text-indigo-600 font-bold py-4 rounded-2xl transition-all flex items-center justify-center gap-2 border-2 border-transparent hover:border-indigo-200",children:[A.jsx(Ig,{size:20}),s?"...":""]})]}),A.jsxs("button",{onClick:p,className:"w-full bg-slate-50 hover:bg-slate-100 text-slate-500 font-bold py-4 rounded-2xl transition-all flex items-center justify-center gap-2",children:[A.jsx(D3,{size:20}),""]})]}),A.jsx("div",{className:"bg-amber-50 rounded-2xl p-4 text-xs font-bold text-amber-600/80 leading-relaxed text-center max-w-sm",children:"  500KB "})]})})]})};var rM={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var N_;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(N_||(N_={}));var R_;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(R_||(R_={}));var O_;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(O_||(O_={}));var D_;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(D_||(D_={}));var M_;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(M_||(M_={}));var P_;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(P_||(P_={}));var L_;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(L_||(L_={}));var k_;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(k_||(k_={}));var B_;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(B_||(B_={}));var U_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(U_||(U_={}));var V_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(V_||(V_={}));var j_;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(j_||(j_={}));var F_;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(F_||(F_={}));var z_;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(z_||(z_={}));var H_;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(H_||(H_={}));var G_;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(G_||(G_={}));var q_;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(q_||(q_={}));var Y_;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Y_||(Y_={}));var X_;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(X_||(X_={}));var W_;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(W_||(W_={}));var K_;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(K_||(K_={}));var Q_;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Q_||(Q_={}));var Z_;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Z_||(Z_={}));var J_;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(J_||(J_={}));var $_;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})($_||($_={}));var ew;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(ew||(ew={}));var tw;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(tw||(tw={}));var nw;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(nw||(nw={}));var rw;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(rw||(rw={}));var iw;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(iw||(iw={}));var sw;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(sw||(sw={}));var aw;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(aw||(aw={}));var ow;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(ow||(ow={}));var lw;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(lw||(lw={}));var cw;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(cw||(cw={}));var uw;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(uw||(uw={}));var hw;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(hw||(hw={}));var fw;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(fw||(fw={}));var dw;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(dw||(dw={}));var gw;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(gw||(gw={}));var mw;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(mw||(mw={}));var pw;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(pw||(pw={}));var xw;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(xw||(xw={}));var yw;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(yw||(yw={}));var Ew;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(Ew||(Ew={}));var _w;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(_w||(_w={}));var ww;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(ww||(ww={}));var bw;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(bw||(bw={}));var Aw;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Aw||(Aw={}));var vw;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(vw||(vw={}));var Tw;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(Tw||(Tw={}));var Sw;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Sw||(Sw={}));var Cw;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Cw||(Cw={}));var Iw;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(Iw||(Iw={}));var Nw;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Nw||(Nw={}));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Rw;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Rw||(Rw={}));function Od(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(n);c<s.length;c++)e.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(n,s[c])&&(t[s[c]]=n[s[c]]);return t}function Ow(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Kn(n){return this instanceof Kn?(this.v=n,this):new Kn(n)}function Ku(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),c,h=[];return c=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),T("next"),T("throw"),T("return",p),c[Symbol.asyncIterator]=function(){return this},c;function p(B){return function(W){return Promise.resolve(W).then(B,I)}}function T(B,W){s[B]&&(c[B]=function(Q){return new Promise(function(Y,_e){h.push([B,Q,Y,_e])>1||w(B,Q)})},W&&(c[B]=W(c[B])))}function w(B,W){try{E(s[B](W))}catch(Q){M(h[0][3],Q)}}function E(B){B.value instanceof Kn?Promise.resolve(B.value.v).then(C,I):M(h[0][2],B)}function C(B){w("next",B)}function I(B){w("throw",B)}function M(B,W){B(W),h.shift(),h.length&&w(h[0][0],h[0][1])}}function Tc(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Ow=="function"?Ow(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(h){t[h]=n[h]&&function(p){return new Promise(function(T,w){p=n[h](p),c(T,w,p.done,p.value)})}}function c(h,p,T,w){Promise.resolve(w).then(function(E){h({value:E,done:T})},p)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Jv=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return Jv=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^t()&15>>+s/4).toString(16))};const iM=()=>Jv();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rm(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const im=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bs extends Error{}class bi extends bs{constructor(e,t,s,c){super(`${bi.makeMessage(e,t,s)}`),this.status=e,this.headers=c,this.error=t}static makeMessage(e,t,s){const c=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):s;return e&&c?`${e} ${c}`:e?`${e} status code (no body)`:c||"(no status code or body)"}static generate(e,t,s,c){if(!e||!c)return new l0({message:s,cause:im(t)});const h=t;return e===400?new eT(e,h,s,c):e===401?new tT(e,h,s,c):e===403?new nT(e,h,s,c):e===404?new rT(e,h,s,c):e===409?new iT(e,h,s,c):e===422?new sT(e,h,s,c):e===429?new aT(e,h,s,c):e>=500?new oT(e,h,s,c):new bi(e,h,s,c)}}class sm extends bi{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class l0 extends bi{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class $v extends l0{constructor({message:e}={}){super({message:e??"Request timed out."})}}class eT extends bi{}class tT extends bi{}class nT extends bi{}class rT extends bi{}class iT extends bi{}class sT extends bi{}class aT extends bi{}class oT extends bi{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sM=/^[a-z][a-z0-9+.-]*:/i,aM=n=>sM.test(n);let am=n=>(am=Array.isArray,am(n));const oM=am;let lM=oM;const Dw=lM;function cM(n){if(!n)return!0;for(const e in n)return!1;return!0}function uM(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const hM=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new bs(`${n} must be an integer`);if(e<0)throw new bs(`${n} must be a positive integer`);return e},fM=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dM=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gc="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gM(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const mM=()=>{var n,e,t,s,c;const h=gM();if(h==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":gc,"X-Stainless-OS":Pw(Deno.build.os),"X-Stainless-Arch":Mw(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":gc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(h==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":gc,"X-Stainless-OS":Pw((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":Mw((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(c=globalThis.process.version)!==null&&c!==void 0?c:"unknown"};const p=pM();return p?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":gc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${p.browser}`,"X-Stainless-Runtime-Version":p.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":gc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function pM(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const s=t.exec(navigator.userAgent);if(s){const c=s[1]||0,h=s[2]||0,p=s[3]||0;return{browser:e,version:`${c}.${h}.${p}`}}}return null}const Mw=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",Pw=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let Uf;const xM=()=>Uf??(Uf=mM());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yM(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function lT(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function EM(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return lT({start(){},async pull(t){const{done:s,value:c}=await e.next();s?t.close():t.enqueue(c)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function cT(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function _M(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const s=n.getReader(),c=s.cancel();s.releaseLock(),await c}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wM=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uT=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function _g(n,e,t){return uT(),new File(n,e??"unknown_file",t)}function bM(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const AM=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hT=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",vM=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&hT(n),TM=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function SM(n,e,t){if(uT(),n=await n,vM(n))return n instanceof File?n:_g([await n.arrayBuffer()],n.name);if(TM(n)){const c=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),_g(await om(c),e,t)}const s=await om(n);if(e||(e=bM(n)),!(t!=null&&t.type)){const c=s.find(h=>typeof h=="object"&&"type"in h&&h.type);typeof c=="string"&&(t=Object.assign(Object.assign({},t),{type:c}))}return _g(s,e,t)}async function om(n){var e,t,s,c,h;let p=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)p.push(n);else if(hT(n))p.push(n instanceof Blob?n:await n.arrayBuffer());else if(AM(n))try{for(var T=!0,w=Tc(n),E;E=await w.next(),e=E.done,!e;T=!0){c=E.value,T=!1;const C=c;p.push(...await om(C))}}catch(C){t={error:C}}finally{try{!T&&!e&&(s=w.return)&&await s.call(w)}finally{if(t)throw t.error}}else{const C=(h=n==null?void 0:n.constructor)===null||h===void 0?void 0:h.name;throw new Error(`Unexpected data type: ${typeof n}${C?`; constructor: ${C}`:""}${CM(n)}`)}return p}function CM(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fT{constructor(e){this._client=e}}fT._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dT(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Lw=Object.freeze(Object.create(null)),IM=(n=dT)=>(function(t,...s){if(t.length===1)return t[0];let c=!1;const h=[],p=t.reduce((C,I,M)=>{var B,W,Q;/[?#]/.test(I)&&(c=!0);const Y=s[M];let _e=(c?encodeURIComponent:n)(""+Y);return M!==s.length&&(Y==null||typeof Y=="object"&&Y.toString===((Q=Object.getPrototypeOf((W=Object.getPrototypeOf((B=Y.hasOwnProperty)!==null&&B!==void 0?B:Lw))!==null&&W!==void 0?W:Lw))===null||Q===void 0?void 0:Q.toString))&&(_e=Y+"",h.push({start:C.length+I.length,length:_e.length,error:`Value of type ${Object.prototype.toString.call(Y).slice(8,-1)} is not a valid path parameter`})),C+I+(M===s.length?"":_e)},""),T=p.split(/[?#]/,1)[0],w=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let E;for(;(E=w.exec(T))!==null;)h.push({start:E.index,length:E[0].length,error:`Value "${E[0]}" can't be safely passed as a path parameter`});if(h.sort((C,I)=>C.start-I.start),h.length>0){let C=0;const I=h.reduce((M,B)=>{const W=" ".repeat(B.start-C),Q="^".repeat(B.length);return C=B.start+B.length,M+W+Q},"");throw new bs(`Path parameters result in path with invalid segments:
${h.map(M=>M.error).join(`
`)}
${p}
${I}`)}return p}),Vf=IM(dT);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gT extends fT{create(e,t){var s;const{api_version:c=this._client.apiVersion}=e,h=Od(e,["api_version"]);if("model"in h&&"agent_config"in h)throw new bs("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in h&&"generation_config"in h)throw new bs("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Vf`/${c}/interactions`,Object.assign(Object.assign({body:h},t),{stream:(s=e.stream)!==null&&s!==void 0?s:!1}))}delete(e,t={},s){const{api_version:c=this._client.apiVersion}=t??{};return this._client.delete(Vf`/${c}/interactions/${e}`,s)}cancel(e,t={},s){const{api_version:c=this._client.apiVersion}=t??{};return this._client.post(Vf`/${c}/interactions/${e}/cancel`,s)}get(e,t={},s){var c;const h=t??{},{api_version:p=this._client.apiVersion}=h,T=Od(h,["api_version"]);return this._client.get(Vf`/${p}/interactions/${e}`,Object.assign(Object.assign({query:T},s),{stream:(c=t==null?void 0:t.stream)!==null&&c!==void 0?c:!1}))}}gT._key=Object.freeze(["interactions"]);class mT extends gT{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NM(n){let e=0;for(const c of n)e+=c.length;const t=new Uint8Array(e);let s=0;for(const c of n)t.set(c,s),s+=c.length;return t}let jf;function bp(n){let e;return(jf??(e=new globalThis.TextEncoder,jf=e.encode.bind(e)))(n)}let Ff;function kw(n){let e;return(Ff??(e=new globalThis.TextDecoder,Ff=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class c0{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?bp(e):e;this.buffer=NM([this.buffer,t]);const s=[];let c;for(;(c=RM(this.buffer,this.carriageReturnIndex))!=null;){if(c.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=c.index;continue}if(this.carriageReturnIndex!=null&&(c.index!==this.carriageReturnIndex+1||c.carriage)){s.push(kw(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const h=this.carriageReturnIndex!==null?c.preceding-1:c.preceding,p=kw(this.buffer.subarray(0,h));s.push(p),this.buffer=this.buffer.subarray(c.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}c0.NEWLINE_CHARS=new Set([`
`,"\r"]);c0.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function RM(n,e){for(let c=e??0;c<n.length;c++){if(n[c]===10)return{preceding:c,index:c+1,carriage:!1};if(n[c]===13)return{preceding:c,index:c+1,carriage:!0}}return null}function OM(n){for(let s=0;s<n.length-1;s++){if(n[s]===10&&n[s+1]===10||n[s]===13&&n[s+1]===13)return s+2;if(n[s]===13&&n[s+1]===10&&s+3<n.length&&n[s+2]===13&&n[s+3]===10)return s+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Dd={off:0,error:200,warn:300,info:400,debug:500},Bw=(n,e,t)=>{if(n){if(uM(Dd,n))return n;Ei(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Dd))}`)}};function Uu(){}function zf(n,e,t){return!e||Dd[n]>Dd[t]?Uu:e[n].bind(e)}const DM={error:Uu,warn:Uu,info:Uu,debug:Uu};let Uw=new WeakMap;function Ei(n){var e;const t=n.logger,s=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return DM;const c=Uw.get(t);if(c&&c[0]===s)return c[1];const h={error:zf("error",t,s),warn:zf("warn",t,s),info:zf("info",t,s),debug:zf("debug",t,s)};return Uw.set(t,[s,h]),h}const _l=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xc{constructor(e,t,s){this.iterator=e,this.controller=t,this.client=s}static fromSSEResponse(e,t,s){let c=!1;const h=s?Ei(s):console;function p(){return Ku(this,arguments,function*(){var w,E,C,I;if(c)throw new bs("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");c=!0;let M=!1;try{try{for(var B=!0,W=Tc(MM(e,t)),Q;Q=yield Kn(W.next()),w=Q.done,!w;B=!0){I=Q.value,B=!1;const Y=I;if(!M)if(Y.data.startsWith("[DONE]")){M=!0;continue}else try{yield yield Kn(JSON.parse(Y.data))}catch(_e){throw h.error("Could not parse message into JSON:",Y.data),h.error("From chunk:",Y.raw),_e}}}catch(Y){E={error:Y}}finally{try{!B&&!w&&(C=W.return)&&(yield Kn(C.call(W)))}finally{if(E)throw E.error}}M=!0}catch(Y){if(rm(Y))return yield Kn(void 0);throw Y}finally{M||t.abort()}})}return new xc(p,t,s)}static fromReadableStream(e,t,s){let c=!1;function h(){return Ku(this,arguments,function*(){var w,E,C,I;const M=new c0,B=cT(e);try{for(var W=!0,Q=Tc(B),Y;Y=yield Kn(Q.next()),w=Y.done,!w;W=!0){I=Y.value,W=!1;const _e=I;for(const ae of M.decode(_e))yield yield Kn(ae)}}catch(_e){E={error:_e}}finally{try{!W&&!w&&(C=Q.return)&&(yield Kn(C.call(Q)))}finally{if(E)throw E.error}}for(const _e of M.flush())yield yield Kn(_e)})}function p(){return Ku(this,arguments,function*(){var w,E,C,I;if(c)throw new bs("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");c=!0;let M=!1;try{try{for(var B=!0,W=Tc(h()),Q;Q=yield Kn(W.next()),w=Q.done,!w;B=!0){I=Q.value,B=!1;const Y=I;M||Y&&(yield yield Kn(JSON.parse(Y)))}}catch(Y){E={error:Y}}finally{try{!B&&!w&&(C=W.return)&&(yield Kn(C.call(W)))}finally{if(E)throw E.error}}M=!0}catch(Y){if(rm(Y))return yield Kn(void 0);throw Y}finally{M||t.abort()}})}return new xc(p,t,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],s=this.iterator(),c=h=>({next:()=>{if(h.length===0){const p=s.next();e.push(p),t.push(p)}return h.shift()}});return[new xc(()=>c(e),this.controller,this.client),new xc(()=>c(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return lT({async start(){t=e[Symbol.asyncIterator]()},async pull(s){try{const{value:c,done:h}=await t.next();if(h)return s.close();const p=bp(JSON.stringify(c)+`
`);s.enqueue(p)}catch(c){s.error(c)}},async cancel(){var s;await((s=t.return)===null||s===void 0?void 0:s.call(t))}})}}function MM(n,e){return Ku(this,arguments,function*(){var s,c,h,p;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new bs("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new bs("Attempted to iterate over a response with no body");const T=new LM,w=new c0,E=cT(n.body);try{for(var C=!0,I=Tc(PM(E)),M;M=yield Kn(I.next()),s=M.done,!s;C=!0){p=M.value,C=!1;const B=p;for(const W of w.decode(B)){const Q=T.decode(W);Q&&(yield yield Kn(Q))}}}catch(B){c={error:B}}finally{try{!C&&!s&&(h=I.return)&&(yield Kn(h.call(I)))}finally{if(c)throw c.error}}for(const B of w.flush()){const W=T.decode(B);W&&(yield yield Kn(W))}})}function PM(n){return Ku(this,arguments,function*(){var t,s,c,h;let p=new Uint8Array;try{for(var T=!0,w=Tc(n),E;E=yield Kn(w.next()),t=E.done,!t;T=!0){h=E.value,T=!1;const C=h;if(C==null)continue;const I=C instanceof ArrayBuffer?new Uint8Array(C):typeof C=="string"?bp(C):C;let M=new Uint8Array(p.length+I.length);M.set(p),M.set(I,p.length),p=M;let B;for(;(B=OM(p))!==-1;)yield yield Kn(p.slice(0,B)),p=p.slice(B)}}catch(C){s={error:C}}finally{try{!T&&!t&&(c=w.return)&&(yield Kn(c.call(w)))}finally{if(s)throw s.error}}p.length>0&&(yield yield Kn(p))})}class LM{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const h={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],h}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,s,c]=kM(e,":");return c.startsWith(" ")&&(c=c.substring(1)),t==="event"?this.event=c:t==="data"&&this.data.push(c),null}}function kM(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function BM(n,e){const{response:t,requestLogID:s,retryOfRequestLogID:c,startTime:h}=e,p=await(async()=>{var T;if(e.options.stream)return Ei(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):xc.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const w=t.headers.get("content-type"),E=(T=w==null?void 0:w.split(";")[0])===null||T===void 0?void 0:T.trim();return(E==null?void 0:E.includes("application/json"))||(E==null?void 0:E.endsWith("+json"))?await t.json():await t.text()})();return Ei(n).debug(`[${s}] response parsed`,_l({retryOfRequestLogID:c,url:t.url,status:t.status,body:p,durationMs:Date.now()-h})),p}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ap extends Promise{constructor(e,t,s=BM){super(c=>{c(null)}),this.responsePromise=t,this.parseResponse=s,this.client=e}_thenUnwrap(e){return new Ap(this.client,this.responsePromise,async(t,s)=>e(await this.parseResponse(t,s),s))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pT=Symbol("brand.privateNullableHeaders");function*UM(n){if(!n)return;if(pT in n){const{values:s,nulls:c}=n;yield*s.entries();for(const h of c)yield[h,null];return}let e=!1,t;n instanceof Headers?t=n.entries():Dw(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let s of t){const c=s[0];if(typeof c!="string")throw new TypeError("expected header name to be a string");const h=Dw(s[1])?s[1]:[s[1]];let p=!1;for(const T of h)T!==void 0&&(e&&!p&&(p=!0,yield[c,null]),yield[c,T])}}const Du=n=>{const e=new Headers,t=new Set;for(const s of n){const c=new Set;for(const[h,p]of UM(s)){const T=h.toLowerCase();c.has(T)||(e.delete(h),c.add(T)),p===null?(e.delete(h),t.add(T)):(e.append(h,p),t.delete(T))}}return{[pT]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wg=n=>{var e,t,s,c,h,p;if(typeof globalThis.process<"u")return(s=(t=(e=rM)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(p=(h=(c=globalThis.Deno.env)===null||c===void 0?void 0:c.get)===null||h===void 0?void 0:h.call(c,n))===null||p===void 0?void 0:p.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var xT;class u0{constructor(e){var t,s,c,h,p,T,w,{baseURL:E=wg("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:C=(t=wg("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:I="v1beta"}=e,M=Od(e,["baseURL","apiKey","apiVersion"]);const B=Object.assign(Object.assign({apiKey:C,apiVersion:I},M),{baseURL:E||"https://generativelanguage.googleapis.com"});this.baseURL=B.baseURL,this.timeout=(s=B.timeout)!==null&&s!==void 0?s:u0.DEFAULT_TIMEOUT,this.logger=(c=B.logger)!==null&&c!==void 0?c:console;const W="warn";this.logLevel=W,this.logLevel=(p=(h=Bw(B.logLevel,"ClientOptions.logLevel",this))!==null&&h!==void 0?h:Bw(wg("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&p!==void 0?p:W,this.fetchOptions=B.fetchOptions,this.maxRetries=(T=B.maxRetries)!==null&&T!==void 0?T:2,this.fetch=(w=B.fetch)!==null&&w!==void 0?w:yM(),this.encoder=wM,this._options=B,this.apiKey=C,this.apiVersion=I,this.clientAdapter=B.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=Du([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return Du([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Du([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,s])=>typeof s<"u").map(([t,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(t)}=`;throw new bs(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${gc}`}defaultIdempotencyKey(){return`stainless-node-retry-${iM()}`}makeStatusError(e,t,s,c){return bi.generate(e,t,s,c)}buildURL(e,t,s){const c=!this.baseURLOverridden()&&s||this.baseURL,h=aM(e)?new URL(e):new URL(c+(c.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),p=this.defaultQuery();return cM(p)||(t=Object.assign(Object.assign({},p),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(h.search=this.stringifyQuery(t)),h.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:s}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,s){return this.request(Promise.resolve(s).then(c=>Object.assign({method:e,path:t},c)))}request(e,t=null){return new Ap(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,s){var c,h,p;const T=await e,w=(c=T.maxRetries)!==null&&c!==void 0?c:this.maxRetries;t==null&&(t=w),await this.prepareOptions(T);const{req:E,url:C,timeout:I}=await this.buildRequest(T,{retryCount:w-t});await this.prepareRequest(E,{url:C,options:T});const M="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),B=s===void 0?"":`, retryOf: ${s}`,W=Date.now();if(Ei(this).debug(`[${M}] sending request`,_l({retryOfRequestLogID:s,method:T.method,url:C,options:T,headers:E.headers})),!((h=T.signal)===null||h===void 0)&&h.aborted)throw new sm;const Q=new AbortController,Y=await this.fetchWithTimeout(C,E,I,Q).catch(im),_e=Date.now();if(Y instanceof globalThis.Error){const K=`retrying, ${t} attempts remaining`;if(!((p=T.signal)===null||p===void 0)&&p.aborted)throw new sm;const ce=rm(Y)||/timed? ?out/i.test(String(Y)+("cause"in Y?String(Y.cause):""));if(t)return Ei(this).info(`[${M}] connection ${ce?"timed out":"failed"} - ${K}`),Ei(this).debug(`[${M}] connection ${ce?"timed out":"failed"} (${K})`,_l({retryOfRequestLogID:s,url:C,durationMs:_e-W,message:Y.message})),this.retryRequest(T,t,s??M);throw Ei(this).info(`[${M}] connection ${ce?"timed out":"failed"} - error; no more retries left`),Ei(this).debug(`[${M}] connection ${ce?"timed out":"failed"} (error; no more retries left)`,_l({retryOfRequestLogID:s,url:C,durationMs:_e-W,message:Y.message})),ce?new $v:new l0({cause:Y})}const ae=`[${M}${B}] ${E.method} ${C} ${Y.ok?"succeeded":"failed"} with status ${Y.status} in ${_e-W}ms`;if(!Y.ok){const K=await this.shouldRetry(Y);if(t&&K){const j=`retrying, ${t} attempts remaining`;return await _M(Y.body),Ei(this).info(`${ae} - ${j}`),Ei(this).debug(`[${M}] response error (${j})`,_l({retryOfRequestLogID:s,url:Y.url,status:Y.status,headers:Y.headers,durationMs:_e-W})),this.retryRequest(T,t,s??M,Y.headers)}const ce=K?"error; no more retries left":"error; not retryable";Ei(this).info(`${ae} - ${ce}`);const Re=await Y.text().catch(j=>im(j).message),De=fM(Re),F=De?void 0:Re;throw Ei(this).debug(`[${M}] response error (${ce})`,_l({retryOfRequestLogID:s,url:Y.url,status:Y.status,headers:Y.headers,message:F,durationMs:Date.now()-W})),this.makeStatusError(Y.status,De,F,Y.headers)}return Ei(this).info(ae),Ei(this).debug(`[${M}] response start`,_l({retryOfRequestLogID:s,url:Y.url,status:Y.status,headers:Y.headers,durationMs:_e-W})),{response:Y,options:T,controller:Q,requestLogID:M,retryOfRequestLogID:s,startTime:W}}async fetchWithTimeout(e,t,s,c){const h=t||{},{signal:p,method:T}=h,w=Od(h,["signal","method"]);p&&p.addEventListener("abort",()=>c.abort());const E=setTimeout(()=>c.abort(),s),C=globalThis.ReadableStream&&w.body instanceof globalThis.ReadableStream||typeof w.body=="object"&&w.body!==null&&Symbol.asyncIterator in w.body,I=Object.assign(Object.assign(Object.assign({signal:c.signal},C?{duplex:"half"}:{}),{method:"GET"}),w);T&&(I.method=T.toUpperCase());try{return await this.fetch.call(void 0,e,I)}finally{clearTimeout(E)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,s,c){var h;let p;const T=c==null?void 0:c.get("retry-after-ms");if(T){const E=parseFloat(T);Number.isNaN(E)||(p=E)}const w=c==null?void 0:c.get("retry-after");if(w&&!p){const E=parseFloat(w);Number.isNaN(E)?p=Date.parse(w)-Date.now():p=E*1e3}if(!(p&&0<=p&&p<60*1e3)){const E=(h=e.maxRetries)!==null&&h!==void 0?h:this.maxRetries;p=this.calculateDefaultRetryTimeoutMillis(t,E)}return await dM(p),this.makeRequest(e,t-1,s)}calculateDefaultRetryTimeoutMillis(e,t){const h=t-e,p=Math.min(.5*Math.pow(2,h),8),T=1-Math.random()*.25;return p*T*1e3}async buildRequest(e,{retryCount:t=0}={}){var s,c,h;const p=Object.assign({},e),{method:T,path:w,query:E,defaultBaseURL:C}=p,I=this.buildURL(w,E,C);"timeout"in p&&hM("timeout",p.timeout),p.timeout=(s=p.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:M,body:B}=this.buildBody({options:p}),W=await this.buildHeaders({options:e,method:T,bodyHeaders:M,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:T,headers:W},p.signal&&{signal:p.signal}),globalThis.ReadableStream&&B instanceof globalThis.ReadableStream&&{duplex:"half"}),B&&{body:B}),(c=this.fetchOptions)!==null&&c!==void 0?c:{}),(h=p.fetchOptions)!==null&&h!==void 0?h:{}),url:I,timeout:p.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:s,retryCount:c}){let h={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),h[this.idempotencyHeader]=e.idempotencyKey);const p=await this.authHeaders(e);let T=Du([h,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(c)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),xM()),this._options.defaultHeaders,s,e.headers,p]);return this.validateHeaders(T),T.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=Du([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:EM(e)}:this.encoder({body:e,headers:s})}}u0.DEFAULT_TIMEOUT=6e4;class Jr extends u0{constructor(){super(...arguments),this.interactions=new mT(this)}}xT=Jr;Jr.GeminiNextGenAPIClient=xT;Jr.GeminiNextGenAPIClientError=bs;Jr.APIError=bi;Jr.APIConnectionError=l0;Jr.APIConnectionTimeoutError=$v;Jr.APIUserAbortError=sm;Jr.NotFoundError=rT;Jr.ConflictError=iT;Jr.RateLimitError=aT;Jr.BadRequestError=eT;Jr.AuthenticationError=tT;Jr.InternalServerError=oT;Jr.PermissionDeniedError=nT;Jr.UnprocessableEntityError=sT;Jr.toFile=SM;Jr.Interactions=mT;const VM=()=>null,jM=async(n,e)=>{const t=Eg[Math.floor(Math.random()*Eg.length)],s=`${t.text} ${t.author}`;try{const c=VM();return c&&(await c.models.generateContent({model:"gemini-2.0-flash-exp",contents:`
        
        
        - ${n.name}
        - ${e.name}
        - ${n.points}
        - ${n.totalEarned}

        
        ${Eg.map(p=>`${p.text}-- ${p.author}`).join(`
`)}

        30-60
        
      `})).text()||s}catch(c){return console.error("Gemini Error:",c),s}},FM=({user:n,rank:e,onUserUpdate:t})=>{const{showAlert:s}=Bc(),[c,h]=ne.useState("..."),[p,T]=ne.useState([]),[w,E]=ne.useState([]),[C,I]=ne.useState(null),[M,B]=ne.useState(new Set),[W,Q]=ne.useState(!1),[Y,_e]=ne.useState([]),[ae,K]=ne.useState(0),ce=Vo[Vo.indexOf(e)+1]||null,Re=ce?Math.min(100,(n.totalEarned-e.threshold)/(ce.threshold-e.threshold)*100):100,De=Math.floor(n.totalEarned/500)+1;ne.useEffect(()=>{(async()=>{const G=await jM(n,e);h(G)})();const j=Wv(async G=>{const Qe=G.filter(pe=>pe.isActive);T(Qe);const fe=await UD(n.id);B(fe)}),Z=Xv(G=>{const Qe=new Date;Qe.setHours(0,0,0,0),E(G.filter(fe=>fe.userId===n.id&&fe.timestamp>=Qe.getTime()))}),J=wp(_e);let $;return Y.length>1&&($=setInterval(()=>{K(G=>(G+1)%Y.length)},5e3)),()=>{j(),Z(),J(),$&&clearInterval($)}},[n.id,e,Y.length]);const F=async V=>{if(C)return;if(V.deadline&&V.deadline<Date.now()){s("","error");return}if(w.some(Z=>Z.missionId===V.id&&Z.status==="pending")){s("","info");return}I(V.id);try{await VD({id:`sub_${Date.now()}`,userId:n.id,userName:n.name,missionId:V.id,missionTitle:V.title,points:V.points,timestamp:Date.now(),status:"pending"}),s("","success")}catch(Z){console.error("Error submitting mission:",Z),s("","error")}finally{I(null)}};return A.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-10 relative",children:[W&&A.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:A.jsxs("div",{className:"bg-white rounded-[2.5rem] max-w-lg w-full p-8 shadow-2xl animate-in zoom-in-95 duration-200 border border-slate-100 relative",children:[A.jsx("button",{onClick:()=>Q(!1),className:"absolute top-6 right-6 p-2 bg-slate-100 rounded-full hover:bg-slate-200 transition-colors text-slate-500",children:A.jsx(ka,{size:20})}),A.jsxs("h3",{className:"text-2xl font-black text-slate-800 mb-6 flex items-center gap-3",children:[A.jsx(Ky,{className:"text-amber-500"}),""]}),A.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto pr-2 custom-scrollbar",children:Vo.map((V,j)=>A.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-2xl ${n.totalEarned>=V.threshold?"bg-indigo-50 border-2 border-indigo-100":"bg-slate-50 border border-slate-100 grayscale opacity-70"}`,children:[A.jsx("div",{className:"text-3xl",children:V.icon}),A.jsxs("div",{className:"flex-1",children:[A.jsx("h4",{className:"font-bold text-slate-800",children:V.name}),A.jsxs("p",{className:"text-xs text-slate-500 font-bold mt-0.5",children:[" ",V.threshold.toLocaleString()," "]})]}),n.totalEarned>=V.threshold&&A.jsx("div",{className:"bg-indigo-500 text-white p-1 rounded-full",children:A.jsx(Zu,{size:16})})]},V.name))}),A.jsx("div",{className:"mt-6 text-center",children:A.jsx("p",{className:"text-xs text-slate-400 font-bold",children:""})})]})}),A.jsxs("header",{className:"flex flex-col md:flex-row md:items-start justify-between gap-4",children:[A.jsxs("div",{children:[A.jsxs("h1",{className:"text-3xl font-black text-slate-800 tracking-tight",children:["",n.name,""]}),A.jsxs("p",{className:"text-slate-500 mt-1 italic max-w-xl font-medium",children:['"',c,'"']})]}),A.jsxs("div",{className:"bg-amber-50 border border-amber-100 rounded-2xl px-5 py-3 flex items-center gap-3 self-end md:self-start shadow-sm",children:[A.jsx("div",{className:"bg-amber-500 p-2 rounded-xl text-white shadow-lg shadow-amber-200",children:A.jsx(w3,{size:20})}),A.jsxs("div",{children:[A.jsx("p",{className:"text-[10px] text-amber-700 font-black uppercase tracking-widest",children:""}),A.jsxs("p",{className:"text-2xl font-black text-amber-900 leading-none",children:[n.totalEarned.toLocaleString()," ",A.jsx("span",{className:"text-xs font-bold opacity-60",children:"PTS"})]})]})]})]}),Y.length>0&&(()=>{const V={"h-32":"128px","h-40":"160px","h-48":"192px","h-56":"224px","h-64":"256px"},j={"md:h-48":"192px","md:h-64":"256px","md:h-72":"288px","md:h-80":"320px","md:h-96":"384px"},Z=Y[ae],J=V[(Z==null?void 0:Z.mobileHeight)||"h-48"]||"192px",$=j[(Z==null?void 0:Z.desktopHeight)||"md:h-72"]||"288px";return A.jsxs("div",{className:"relative w-full rounded-[3.5rem] overflow-hidden shadow-2xl shadow-indigo-100 group border-4 border-white transition-all duration-500",style:{height:typeof window<"u"&&window.innerWidth>=768?$:J},children:[A.jsx("div",{className:"flex transition-transform duration-700 ease-in-out h-full",style:{transform:`translateX(-${ae*100}%)`},children:Y.map(G=>A.jsxs("div",{className:"min-w-full h-full relative",children:[A.jsx("img",{src:G.imageUrl,alt:"banner",className:"w-full h-full object-cover",style:{objectPosition:G.objectPosition||"center"}}),A.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent flex items-end justify-start p-12",children:A.jsx("div",{className:"mt-auto",children:A.jsx("span",{className:"bg-indigo-600/90 backdrop-blur text-white px-4 py-2 rounded-xl text-xs font-black uppercase tracking-[0.2em] shadow-lg",children:G.tag||""})})})]},G.id))}),A.jsx("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 flex gap-3",children:Y.map((G,Qe)=>A.jsx("button",{onClick:()=>K(Qe),className:`w-2.5 h-2.5 rounded-full transition-all ${ae===Qe?"bg-white w-10 shadow-lg":"bg-white/40 hover:bg-white/80"}`},Qe))}),A.jsx("button",{onClick:()=>K(G=>(G-1+Y.length)%Y.length),className:"absolute left-6 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/40 backdrop-blur p-4 rounded-full text-white opacity-0 group-hover:opacity-100 transition-all border border-white/10",children:A.jsx(xb,{size:24})}),A.jsx("button",{onClick:()=>K(G=>(G+1)%Y.length),className:"absolute right-6 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/40 backdrop-blur p-4 rounded-full text-white opacity-0 group-hover:opacity-100 transition-all border border-white/10",children:A.jsx(Sg,{size:24})})]})})(),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[A.jsxs("div",{className:"md:col-span-2 bg-white rounded-[2.5rem] p-10 border border-slate-100 shadow-xl shadow-slate-200/40 relative overflow-hidden",children:[A.jsxs("div",{className:"flex items-center justify-between mb-12",children:[A.jsxs("div",{children:[A.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[A.jsx("h3",{className:"text-slate-400 text-[10px] font-black uppercase tracking-[0.2em]",children:""}),A.jsx("button",{onClick:()=>Q(!0),className:"text-indigo-400 hover:text-indigo-600 transition-colors",title:"",children:A.jsx(Eb,{size:14})})]}),A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx("span",{className:"text-4xl filter drop-shadow-md",children:e.icon}),A.jsxs("span",{className:`text-2xl font-black px-6 py-2 rounded-2xl text-white ${e.color} shadow-xl shadow-indigo-100 border-2 border-white/20 flex items-center gap-2`,children:[e.name," ",A.jsxs("span",{className:"text-sm bg-white/20 px-2 py-0.5 rounded-lg border border-white/20",children:["Lv.",De]})]})]})]}),ce&&A.jsxs("div",{className:"text-right",children:[A.jsx("h3",{className:"text-slate-400 text-[10px] font-black uppercase tracking-[0.2em] mb-2",children:""}),A.jsxs("div",{className:"flex items-center gap-3 justify-end group",children:[A.jsx("span",{className:"text-lg font-black text-slate-700 group-hover:text-indigo-600 transition-colors",children:ce.name}),A.jsx("span",{className:"text-2xl animate-bounce",children:ce.icon})]})]})]}),A.jsxs("div",{className:"relative pt-12 pb-6 px-2",children:[A.jsx("div",{className:"h-5 bg-slate-100 rounded-full w-full overflow-hidden border border-slate-200 shadow-inner p-1",children:A.jsx("div",{className:`h-full ${e.color} transition-all duration-1000 ease-out rounded-full relative overflow-hidden`,style:{width:`${Re}%`},children:A.jsx("div",{className:"absolute inset-0 bg-white/20 animate-pulse"})})}),A.jsx("div",{className:"absolute top-0 transition-all duration-1000 ease-out",style:{left:`calc(${Re}% - 30px)`},children:A.jsxs("div",{className:"relative group cursor-pointer",children:[A.jsx("div",{className:"p-1.5 bg-white rounded-full shadow-2xl border border-slate-50 transition-transform group-hover:scale-110 active:scale-95",children:A.jsx("img",{src:n.avatar,className:`w-14 h-14 rounded-full border-4 border-opacity-30 object-cover ${e.color.replace("bg-","border-")}`,alt:"me"})}),A.jsxs("div",{className:`absolute -top-10 left-1/2 -translate-x-1/2 px-3 py-1 rounded-xl text-[11px] font-black text-white shadow-xl ${e.color} whitespace-nowrap`,children:[" ",Math.round(Re),"%"]})]})})]}),A.jsx("p",{className:"text-center text-xs text-slate-400 font-bold mt-8 tracking-wide",children:ce?`${ce.name} ${ce.threshold-n.totalEarned} `:""})]}),A.jsxs("div",{className:"bg-gradient-to-br from-indigo-600 via-indigo-700 to-indigo-900 rounded-[2.5rem] p-10 text-white shadow-2xl shadow-indigo-300 flex flex-col justify-center items-center text-center relative overflow-hidden",children:[A.jsx("div",{className:"absolute -top-10 -right-10 w-40 h-40 bg-white/10 rounded-full blur-3xl"}),A.jsx("div",{className:"absolute -bottom-10 -left-10 w-40 h-40 bg-indigo-500/20 rounded-full blur-3xl"}),A.jsx("div",{className:"w-20 h-20 bg-white/20 backdrop-blur-xl rounded-[2rem] flex items-center justify-center mb-6 border border-white/20 shadow-xl",children:A.jsx(tN,{size:40,className:"text-white drop-shadow-md"})}),A.jsx("h3",{className:"text-indigo-200 text-sm font-black mb-1 uppercase tracking-widest",children:""}),A.jsx("p",{className:"text-6xl font-black mb-4 drop-shadow-lg",children:n.points.toLocaleString()}),A.jsx("div",{className:"px-5 py-1.5 bg-indigo-500/40 backdrop-blur rounded-full text-[10px] font-black tracking-[0.2em] uppercase border border-white/10",children:"SHOPPING POWER"})]})]}),A.jsxs("section",{className:"mt-16",children:[A.jsxs("div",{className:"flex items-center justify-between mb-8",children:[A.jsxs("h2",{className:"text-2xl font-black text-slate-800 flex items-center gap-3",children:[A.jsx(ju,{className:"text-indigo-500",size:28}),""]}),A.jsx("div",{className:"flex items-center gap-4 text-xs font-bold text-slate-400",children:A.jsxs("span",{className:"flex items-center gap-1",children:[A.jsx(K3,{size:12,className:"text-amber-500"})," "]})})]}),A.jsx("div",{className:"grid grid-cols-1 gap-6",children:p.map(V=>{const j=M.has(V.id);return A.jsx("div",{className:`bg-white border-2 border-slate-50 p-8 rounded-[2.5rem] transition-all group relative overflow-hidden ${j?"opacity-60 grayscale":"shadow-sm hover:shadow-xl"} ${V.id===C?"animate-pulse":""}`,children:A.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-8",children:[A.jsxs("div",{className:"flex gap-8 items-start",children:[A.jsx("div",{className:`w-20 h-20 rounded-3xl flex items-center justify-center shrink-0 shadow-inner ${V.type==="normal"?"bg-emerald-50 text-emerald-600":V.type==="challenge"?"bg-orange-50 text-orange-600":"bg-rose-50 text-rose-600"}`,children:j?A.jsx(Zu,{size:36}):V.type==="normal"?A.jsx(ju,{size:36}):V.type==="challenge"?A.jsx(a3,{size:36}):A.jsx(Ky,{size:36})}),A.jsxs("div",{children:[A.jsx("div",{className:"flex items-center gap-3 mb-2",children:A.jsx("span",{className:`px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-widest ${V.type==="normal"?"bg-emerald-100 text-emerald-700":V.type==="challenge"?"bg-orange-100 text-orange-700":"bg-rose-100 text-rose-700"}`,children:V.type==="normal"?"":V.type==="challenge"?"":""})}),A.jsx("h3",{className:"text-2xl font-black text-slate-800 transition-colors",children:V.title}),A.jsx("p",{className:"text-slate-500 mt-2 leading-relaxed text-lg font-medium max-w-2xl",children:V.description}),V.deadline&&A.jsxs("div",{className:`mt-3 flex items-center gap-2 text-sm font-black ${V.deadline<Date.now()?"text-rose-500":"text-amber-500"}`,children:[A.jsx(_c,{size:16}),V.deadline<Date.now()?"":` ${new Date(V.deadline).toLocaleString()}`]})]})]}),A.jsxs("div",{className:"flex flex-col md:items-end gap-6 shrink-0",children:[A.jsxs("div",{className:"flex flex-col items-end",children:[A.jsx("span",{className:"text-xs font-bold text-slate-400 mb-1 uppercase tracking-tighter",children:""}),A.jsxs("div",{className:"flex items-baseline gap-2",children:[A.jsx("span",{className:"text-4xl font-black text-indigo-600 tracking-tighter",children:V.points}),A.jsx("span",{className:"text-sm font-bold text-slate-400",children:"PTS"})]})]}),A.jsxs("button",{onClick:()=>F(V),disabled:C!==null||j||w.some(Z=>Z.missionId===V.id&&Z.status==="pending")||V.deadline!==void 0&&V.deadline<Date.now(),className:`px-10 py-5 rounded-2xl font-black transition-all flex items-center gap-3 shadow-xl ${j?"bg-slate-200 text-slate-500 cursor-not-allowed shadow-none":w.some(Z=>Z.missionId===V.id&&Z.status==="pending")?"bg-amber-100 text-amber-600 cursor-not-allowed shadow-none":V.deadline!==void 0&&V.deadline<Date.now()?"bg-slate-200 text-slate-400 cursor-not-allowed shadow-none":V.type==="normal"?"bg-emerald-600 hover:bg-emerald-700 shadow-emerald-100":V.type==="challenge"?"bg-orange-600 hover:bg-orange-700 shadow-orange-100":"bg-rose-600 hover:bg-rose-700 shadow-rose-100"} text-white text-lg active:scale-95 disabled:active:scale-100`,children:[j?"":w.some(Z=>Z.missionId===V.id&&Z.status==="pending")?"":V.deadline!==void 0&&V.deadline<Date.now()?"":C===V.id?"...":"",!j&&!w.some(Z=>Z.missionId===V.id&&Z.status==="pending")&&(!V.deadline||V.deadline>=Date.now())&&A.jsx(Sg,{size:20})]})]})]})},V.id)})})]})]})},zM=({user:n,onUserUpdate:e})=>{var _e,ae;const{showAlert:t}=Bc(),[s,c]=ne.useState(null),[h,p]=ne.useState("all"),[T,w]=ne.useState([]),[E,C]=ne.useState([]),[I,M]=ne.useState([]),[B,W]=ne.useState(0);ne.useEffect(()=>{if(I.length>1){const K=setInterval(()=>{W(ce=>(ce+1)%I.length)},5e3);return()=>clearInterval(K)}},[I.length]),ne.useEffect(()=>{const K=Kv(De=>{w(De)}),ce=Yv(De=>{C(De)}),Re=wp(M);return()=>{K(),ce(),Re()}},[]);const Q=T.filter(K=>h==="all"||K.category===h),Y=async()=>{if(n.role==="GUEST"){t("","info");return}if(!s||n.points<s.price||s.stock<=0)return;const K=await OD(n,s);if(K.success){const ce={...n,points:n.points-s.price};await La(ce),e(),c(null),t(` ${K.message} QR Code`,"success")}else t(K.message,"error")};return A.jsxs("div",{className:"space-y-8 pb-20",children:[A.jsxs("header",{children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:""}),A.jsx("p",{className:"text-slate-500 mt-1",children:""})]}),I.length>0&&A.jsxs("div",{className:`relative w-full ${((_e=I[B])==null?void 0:_e.mobileHeight)||"h-48"} ${((ae=I[B])==null?void 0:ae.desktopHeight)||"md:h-64"} rounded-[2.5rem] overflow-hidden shadow-2xl shadow-indigo-100 group transition-all duration-500`,children:[A.jsx("div",{className:"flex transition-transform duration-700 ease-in-out h-full",style:{transform:`translateX(-${B*100}%)`},children:I.map(K=>A.jsxs("div",{className:"min-w-full h-full relative",children:[A.jsx("img",{src:K.imageUrl,alt:"banner",className:"w-full h-full object-cover",style:{objectPosition:K.objectPosition||"center"}}),A.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent flex items-end p-8",children:A.jsx("div",{className:"mt-auto",children:A.jsx("span",{className:"bg-indigo-600/90 backdrop-blur text-white px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-[0.2em] shadow-lg",children:K.tag||""})})})]},K.id))}),A.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2",children:I.map((K,ce)=>A.jsx("button",{onClick:()=>W(ce),className:`w-2 h-2 rounded-full transition-all ${B===ce?"bg-white w-6":"bg-white/50 hover:bg-white/80"}`},ce))}),A.jsx("button",{onClick:()=>W(K=>(K-1+I.length)%I.length),className:"absolute left-4 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/40 backdrop-blur p-2 rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity",children:A.jsx(xb,{size:20})}),A.jsx("button",{onClick:()=>W(K=>(K+1)%I.length),className:"absolute right-4 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/40 backdrop-blur p-2 rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity",children:A.jsx(Sg,{size:20})})]}),A.jsxs("div",{className:"flex flex-wrap gap-2",children:[A.jsx("button",{onClick:()=>p("all"),className:`px-6 py-2.5 rounded-2xl text-sm font-bold transition-all ${h==="all"?"bg-indigo-600 text-white shadow-lg shadow-indigo-100":"bg-white text-slate-600 border border-slate-200 hover:border-indigo-300"}`,children:""}),E.map(K=>A.jsx("button",{onClick:()=>p(K.name),className:`px-6 py-2.5 rounded-2xl text-sm font-bold transition-all ${h===K.name?"bg-indigo-600 text-white shadow-lg shadow-indigo-100":"bg-white text-slate-600 border border-slate-200 hover:border-indigo-300"}`,children:K.name},K.id))]}),A.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:Q.map(K=>{const ce=n.points>=K.price,Re=K.stock<=0;return A.jsxs("div",{className:`bg-white rounded-[2rem] border border-slate-100 overflow-hidden shadow-sm hover:shadow-2xl transition-all flex flex-col group ${Re?"opacity-75 grayscale-[0.5]":""}`,children:[A.jsxs("div",{className:"relative h-56 overflow-hidden",children:[A.jsx("img",{src:K.imageUrl,alt:K.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700"}),A.jsx("div",{className:"absolute top-5 left-5",children:A.jsx("span",{className:"bg-white/90 backdrop-blur text-indigo-600 text-[10px] px-3 py-1.5 rounded-full font-black tracking-widest shadow-sm",children:K.category.toUpperCase()})}),Re&&A.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:A.jsx("span",{className:"text-white font-black text-2xl rotate-12 border-4 border-white px-4 py-1",children:"SOLD OUT"})})]}),A.jsxs("div",{className:"p-8 flex flex-col flex-1",children:[A.jsx("div",{className:"flex justify-between items-start mb-2",children:A.jsx("h3",{className:"font-black text-xl text-slate-800 leading-tight",children:K.name})}),A.jsx("p",{className:"text-slate-500 text-sm mb-6 flex-1 leading-relaxed",children:K.description}),A.jsxs("div",{className:"flex items-center gap-2 mb-6 text-slate-400 text-xs font-bold",children:[A.jsx(Cg,{size:14}),A.jsxs("span",{children:["",A.jsxs("span",{className:K.stock<=5?"text-red-500":"text-slate-600",children:[K.stock," "]})]})]}),A.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[A.jsxs("div",{className:"flex items-center gap-1 text-indigo-600",children:[A.jsx("span",{className:"text-2xl font-black",children:K.price.toLocaleString()}),A.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-tighter",children:"pts"})]}),A.jsx("button",{onClick:()=>c(K),disabled:!ce||Re,className:`px-6 py-3 rounded-2xl font-black text-sm transition-all shadow-md ${Re?"bg-slate-100 text-slate-400 cursor-not-allowed shadow-none":ce?"bg-indigo-600 text-white hover:bg-indigo-700 hover:shadow-indigo-200 active:scale-95":"bg-slate-100 text-slate-400 cursor-not-allowed shadow-none"}`,children:Re?"":""})]})]})]},K.id)})}),s&&A.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:A.jsxs("div",{className:"bg-white rounded-[2.5rem] max-w-md w-full p-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[A.jsxs("div",{className:"flex justify-between items-start mb-8",children:[A.jsx("div",{className:"bg-indigo-50 p-4 rounded-2xl text-indigo-600",children:A.jsx(q3,{size:28})}),A.jsx("button",{onClick:()=>c(null),className:"text-slate-400 hover:text-slate-600 bg-slate-50 p-2 rounded-full",children:A.jsx(ka,{size:24})})]}),A.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-2",children:""}),A.jsxs("p",{className:"text-slate-500 mb-8 leading-relaxed",children:[" ",A.jsxs("span",{className:"font-black text-indigo-600",children:[s.price," "]}),"  ",A.jsxs("span",{className:"font-black text-slate-800",children:["",s.name,""]})," "]}),A.jsxs("div",{className:"bg-slate-50 rounded-[1.5rem] p-6 mb-8 border border-slate-100",children:[A.jsxs("div",{className:"flex justify-between text-sm mb-3",children:[A.jsx("span",{className:"text-slate-500 font-medium",children:""}),A.jsx("span",{className:"font-bold text-slate-800",children:n.points.toLocaleString()})]}),A.jsxs("div",{className:"flex justify-between text-sm mb-5",children:[A.jsx("span",{className:"text-slate-500 font-medium",children:""}),A.jsxs("span",{className:"font-bold text-red-500",children:["-",s.price.toLocaleString()]})]}),A.jsxs("div",{className:"border-t border-slate-200 pt-5 flex justify-between",children:[A.jsx("span",{className:"font-black text-slate-700 text-lg",children:""}),A.jsx("span",{className:"font-black text-indigo-600 text-2xl",children:(n.points-s.price).toLocaleString()})]})]}),A.jsxs("div",{className:"flex flex-col gap-3",children:[A.jsxs("button",{onClick:Y,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-5 rounded-[1.25rem] transition-all shadow-xl shadow-indigo-100 flex items-center justify-center gap-3 text-lg",children:[A.jsx(lc,{size:24}),""]}),A.jsx("button",{onClick:()=>c(null),className:"w-full bg-white border border-slate-200 text-slate-600 font-black py-4 rounded-[1.25rem] hover:bg-slate-50 transition-all",children:""})]})]})})]})};var HM=Object.defineProperty,Md=Object.getOwnPropertySymbols,yT=Object.prototype.hasOwnProperty,ET=Object.prototype.propertyIsEnumerable,Vw=(n,e,t)=>e in n?HM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,lm=(n,e)=>{for(var t in e||(e={}))yT.call(e,t)&&Vw(n,t,e[t]);if(Md)for(var t of Md(e))ET.call(e,t)&&Vw(n,t,e[t]);return n},cm=(n,e)=>{var t={};for(var s in n)yT.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&Md)for(var s of Md(n))e.indexOf(s)<0&&ET.call(n,s)&&(t[s]=n[s]);return t};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Il;(n=>{const e=class Ft{constructor(w,E,C,I){if(this.version=w,this.errorCorrectionLevel=E,this.modules=[],this.isFunction=[],w<Ft.MIN_VERSION||w>Ft.MAX_VERSION)throw new RangeError("Version value out of range");if(I<-1||I>7)throw new RangeError("Mask value out of range");this.size=w*4+17;let M=[];for(let W=0;W<this.size;W++)M.push(!1);for(let W=0;W<this.size;W++)this.modules.push(M.slice()),this.isFunction.push(M.slice());this.drawFunctionPatterns();const B=this.addEccAndInterleave(C);if(this.drawCodewords(B),I==-1){let W=1e9;for(let Q=0;Q<8;Q++){this.applyMask(Q),this.drawFormatBits(Q);const Y=this.getPenaltyScore();Y<W&&(I=Q,W=Y),this.applyMask(Q)}}c(0<=I&&I<=7),this.mask=I,this.applyMask(I),this.drawFormatBits(I),this.isFunction=[]}static encodeText(w,E){const C=n.QrSegment.makeSegments(w);return Ft.encodeSegments(C,E)}static encodeBinary(w,E){const C=n.QrSegment.makeBytes(w);return Ft.encodeSegments([C],E)}static encodeSegments(w,E,C=1,I=40,M=-1,B=!0){if(!(Ft.MIN_VERSION<=C&&C<=I&&I<=Ft.MAX_VERSION)||M<-1||M>7)throw new RangeError("Invalid value");let W,Q;for(W=C;;W++){const K=Ft.getNumDataCodewords(W,E)*8,ce=p.getTotalBits(w,W);if(ce<=K){Q=ce;break}if(W>=I)throw new RangeError("Data too long")}for(const K of[Ft.Ecc.MEDIUM,Ft.Ecc.QUARTILE,Ft.Ecc.HIGH])B&&Q<=Ft.getNumDataCodewords(W,K)*8&&(E=K);let Y=[];for(const K of w){t(K.mode.modeBits,4,Y),t(K.numChars,K.mode.numCharCountBits(W),Y);for(const ce of K.getData())Y.push(ce)}c(Y.length==Q);const _e=Ft.getNumDataCodewords(W,E)*8;c(Y.length<=_e),t(0,Math.min(4,_e-Y.length),Y),t(0,(8-Y.length%8)%8,Y),c(Y.length%8==0);for(let K=236;Y.length<_e;K^=253)t(K,8,Y);let ae=[];for(;ae.length*8<Y.length;)ae.push(0);return Y.forEach((K,ce)=>ae[ce>>>3]|=K<<7-(ce&7)),new Ft(W,E,ae,M)}getModule(w,E){return 0<=w&&w<this.size&&0<=E&&E<this.size&&this.modules[E][w]}getModules(){return this.modules}drawFunctionPatterns(){for(let C=0;C<this.size;C++)this.setFunctionModule(6,C,C%2==0),this.setFunctionModule(C,6,C%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const w=this.getAlignmentPatternPositions(),E=w.length;for(let C=0;C<E;C++)for(let I=0;I<E;I++)C==0&&I==0||C==0&&I==E-1||C==E-1&&I==0||this.drawAlignmentPattern(w[C],w[I]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(w){const E=this.errorCorrectionLevel.formatBits<<3|w;let C=E;for(let M=0;M<10;M++)C=C<<1^(C>>>9)*1335;const I=(E<<10|C)^21522;c(I>>>15==0);for(let M=0;M<=5;M++)this.setFunctionModule(8,M,s(I,M));this.setFunctionModule(8,7,s(I,6)),this.setFunctionModule(8,8,s(I,7)),this.setFunctionModule(7,8,s(I,8));for(let M=9;M<15;M++)this.setFunctionModule(14-M,8,s(I,M));for(let M=0;M<8;M++)this.setFunctionModule(this.size-1-M,8,s(I,M));for(let M=8;M<15;M++)this.setFunctionModule(8,this.size-15+M,s(I,M));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let w=this.version;for(let C=0;C<12;C++)w=w<<1^(w>>>11)*7973;const E=this.version<<12|w;c(E>>>18==0);for(let C=0;C<18;C++){const I=s(E,C),M=this.size-11+C%3,B=Math.floor(C/3);this.setFunctionModule(M,B,I),this.setFunctionModule(B,M,I)}}drawFinderPattern(w,E){for(let C=-4;C<=4;C++)for(let I=-4;I<=4;I++){const M=Math.max(Math.abs(I),Math.abs(C)),B=w+I,W=E+C;0<=B&&B<this.size&&0<=W&&W<this.size&&this.setFunctionModule(B,W,M!=2&&M!=4)}}drawAlignmentPattern(w,E){for(let C=-2;C<=2;C++)for(let I=-2;I<=2;I++)this.setFunctionModule(w+I,E+C,Math.max(Math.abs(I),Math.abs(C))!=1)}setFunctionModule(w,E,C){this.modules[E][w]=C,this.isFunction[E][w]=!0}addEccAndInterleave(w){const E=this.version,C=this.errorCorrectionLevel;if(w.length!=Ft.getNumDataCodewords(E,C))throw new RangeError("Invalid argument");const I=Ft.NUM_ERROR_CORRECTION_BLOCKS[C.ordinal][E],M=Ft.ECC_CODEWORDS_PER_BLOCK[C.ordinal][E],B=Math.floor(Ft.getNumRawDataModules(E)/8),W=I-B%I,Q=Math.floor(B/I);let Y=[];const _e=Ft.reedSolomonComputeDivisor(M);for(let K=0,ce=0;K<I;K++){let Re=w.slice(ce,ce+Q-M+(K<W?0:1));ce+=Re.length;const De=Ft.reedSolomonComputeRemainder(Re,_e);K<W&&Re.push(0),Y.push(Re.concat(De))}let ae=[];for(let K=0;K<Y[0].length;K++)Y.forEach((ce,Re)=>{(K!=Q-M||Re>=W)&&ae.push(ce[K])});return c(ae.length==B),ae}drawCodewords(w){if(w.length!=Math.floor(Ft.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let E=0;for(let C=this.size-1;C>=1;C-=2){C==6&&(C=5);for(let I=0;I<this.size;I++)for(let M=0;M<2;M++){const B=C-M,Q=(C+1&2)==0?this.size-1-I:I;!this.isFunction[Q][B]&&E<w.length*8&&(this.modules[Q][B]=s(w[E>>>3],7-(E&7)),E++)}}c(E==w.length*8)}applyMask(w){if(w<0||w>7)throw new RangeError("Mask value out of range");for(let E=0;E<this.size;E++)for(let C=0;C<this.size;C++){let I;switch(w){case 0:I=(C+E)%2==0;break;case 1:I=E%2==0;break;case 2:I=C%3==0;break;case 3:I=(C+E)%3==0;break;case 4:I=(Math.floor(C/3)+Math.floor(E/2))%2==0;break;case 5:I=C*E%2+C*E%3==0;break;case 6:I=(C*E%2+C*E%3)%2==0;break;case 7:I=((C+E)%2+C*E%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[E][C]&&I&&(this.modules[E][C]=!this.modules[E][C])}}getPenaltyScore(){let w=0;for(let M=0;M<this.size;M++){let B=!1,W=0,Q=[0,0,0,0,0,0,0];for(let Y=0;Y<this.size;Y++)this.modules[M][Y]==B?(W++,W==5?w+=Ft.PENALTY_N1:W>5&&w++):(this.finderPenaltyAddHistory(W,Q),B||(w+=this.finderPenaltyCountPatterns(Q)*Ft.PENALTY_N3),B=this.modules[M][Y],W=1);w+=this.finderPenaltyTerminateAndCount(B,W,Q)*Ft.PENALTY_N3}for(let M=0;M<this.size;M++){let B=!1,W=0,Q=[0,0,0,0,0,0,0];for(let Y=0;Y<this.size;Y++)this.modules[Y][M]==B?(W++,W==5?w+=Ft.PENALTY_N1:W>5&&w++):(this.finderPenaltyAddHistory(W,Q),B||(w+=this.finderPenaltyCountPatterns(Q)*Ft.PENALTY_N3),B=this.modules[Y][M],W=1);w+=this.finderPenaltyTerminateAndCount(B,W,Q)*Ft.PENALTY_N3}for(let M=0;M<this.size-1;M++)for(let B=0;B<this.size-1;B++){const W=this.modules[M][B];W==this.modules[M][B+1]&&W==this.modules[M+1][B]&&W==this.modules[M+1][B+1]&&(w+=Ft.PENALTY_N2)}let E=0;for(const M of this.modules)E=M.reduce((B,W)=>B+(W?1:0),E);const C=this.size*this.size,I=Math.ceil(Math.abs(E*20-C*10)/C)-1;return c(0<=I&&I<=9),w+=I*Ft.PENALTY_N4,c(0<=w&&w<=2568888),w}getAlignmentPatternPositions(){if(this.version==1)return[];{const w=Math.floor(this.version/7)+2,E=this.version==32?26:Math.ceil((this.version*4+4)/(w*2-2))*2;let C=[6];for(let I=this.size-7;C.length<w;I-=E)C.splice(1,0,I);return C}}static getNumRawDataModules(w){if(w<Ft.MIN_VERSION||w>Ft.MAX_VERSION)throw new RangeError("Version number out of range");let E=(16*w+128)*w+64;if(w>=2){const C=Math.floor(w/7)+2;E-=(25*C-10)*C-55,w>=7&&(E-=36)}return c(208<=E&&E<=29648),E}static getNumDataCodewords(w,E){return Math.floor(Ft.getNumRawDataModules(w)/8)-Ft.ECC_CODEWORDS_PER_BLOCK[E.ordinal][w]*Ft.NUM_ERROR_CORRECTION_BLOCKS[E.ordinal][w]}static reedSolomonComputeDivisor(w){if(w<1||w>255)throw new RangeError("Degree out of range");let E=[];for(let I=0;I<w-1;I++)E.push(0);E.push(1);let C=1;for(let I=0;I<w;I++){for(let M=0;M<E.length;M++)E[M]=Ft.reedSolomonMultiply(E[M],C),M+1<E.length&&(E[M]^=E[M+1]);C=Ft.reedSolomonMultiply(C,2)}return E}static reedSolomonComputeRemainder(w,E){let C=E.map(I=>0);for(const I of w){const M=I^C.shift();C.push(0),E.forEach((B,W)=>C[W]^=Ft.reedSolomonMultiply(B,M))}return C}static reedSolomonMultiply(w,E){if(w>>>8||E>>>8)throw new RangeError("Byte out of range");let C=0;for(let I=7;I>=0;I--)C=C<<1^(C>>>7)*285,C^=(E>>>I&1)*w;return c(C>>>8==0),C}finderPenaltyCountPatterns(w){const E=w[1];c(E<=this.size*3);const C=E>0&&w[2]==E&&w[3]==E*3&&w[4]==E&&w[5]==E;return(C&&w[0]>=E*4&&w[6]>=E?1:0)+(C&&w[6]>=E*4&&w[0]>=E?1:0)}finderPenaltyTerminateAndCount(w,E,C){return w&&(this.finderPenaltyAddHistory(E,C),E=0),E+=this.size,this.finderPenaltyAddHistory(E,C),this.finderPenaltyCountPatterns(C)}finderPenaltyAddHistory(w,E){E[0]==0&&(w+=this.size),E.pop(),E.unshift(w)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],n.QrCode=e;function t(T,w,E){if(w<0||w>31||T>>>w)throw new RangeError("Value out of range");for(let C=w-1;C>=0;C--)E.push(T>>>C&1)}function s(T,w){return(T>>>w&1)!=0}function c(T){if(!T)throw new Error("Assertion error")}const h=class nr{constructor(w,E,C){if(this.mode=w,this.numChars=E,this.bitData=C,E<0)throw new RangeError("Invalid argument");this.bitData=C.slice()}static makeBytes(w){let E=[];for(const C of w)t(C,8,E);return new nr(nr.Mode.BYTE,w.length,E)}static makeNumeric(w){if(!nr.isNumeric(w))throw new RangeError("String contains non-numeric characters");let E=[];for(let C=0;C<w.length;){const I=Math.min(w.length-C,3);t(parseInt(w.substring(C,C+I),10),I*3+1,E),C+=I}return new nr(nr.Mode.NUMERIC,w.length,E)}static makeAlphanumeric(w){if(!nr.isAlphanumeric(w))throw new RangeError("String contains unencodable characters in alphanumeric mode");let E=[],C;for(C=0;C+2<=w.length;C+=2){let I=nr.ALPHANUMERIC_CHARSET.indexOf(w.charAt(C))*45;I+=nr.ALPHANUMERIC_CHARSET.indexOf(w.charAt(C+1)),t(I,11,E)}return C<w.length&&t(nr.ALPHANUMERIC_CHARSET.indexOf(w.charAt(C)),6,E),new nr(nr.Mode.ALPHANUMERIC,w.length,E)}static makeSegments(w){return w==""?[]:nr.isNumeric(w)?[nr.makeNumeric(w)]:nr.isAlphanumeric(w)?[nr.makeAlphanumeric(w)]:[nr.makeBytes(nr.toUtf8ByteArray(w))]}static makeEci(w){let E=[];if(w<0)throw new RangeError("ECI assignment value out of range");if(w<128)t(w,8,E);else if(w<16384)t(2,2,E),t(w,14,E);else if(w<1e6)t(6,3,E),t(w,21,E);else throw new RangeError("ECI assignment value out of range");return new nr(nr.Mode.ECI,0,E)}static isNumeric(w){return nr.NUMERIC_REGEX.test(w)}static isAlphanumeric(w){return nr.ALPHANUMERIC_REGEX.test(w)}getData(){return this.bitData.slice()}static getTotalBits(w,E){let C=0;for(const I of w){const M=I.mode.numCharCountBits(E);if(I.numChars>=1<<M)return 1/0;C+=4+M+I.bitData.length}return C}static toUtf8ByteArray(w){w=encodeURI(w);let E=[];for(let C=0;C<w.length;C++)w.charAt(C)!="%"?E.push(w.charCodeAt(C)):(E.push(parseInt(w.substring(C+1,C+3),16)),C+=2);return E}};h.NUMERIC_REGEX=/^[0-9]*$/,h.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,h.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let p=h;n.QrSegment=h})(Il||(Il={}));(n=>{(e=>{const t=class{constructor(c,h){this.ordinal=c,this.formatBits=h}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2),e.Ecc=t})(n.QrCode||(n.QrCode={}))})(Il||(Il={}));(n=>{(e=>{const t=class{constructor(c,h){this.modeBits=c,this.numBitsCharCount=h}numCharCountBits(c){return this.numBitsCharCount[Math.floor((c+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]),e.Mode=t})(n.QrSegment||(n.QrSegment={}))})(Il||(Il={}));var yc=Il;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var GM={L:yc.QrCode.Ecc.LOW,M:yc.QrCode.Ecc.MEDIUM,Q:yc.QrCode.Ecc.QUARTILE,H:yc.QrCode.Ecc.HIGH},_T=128,wT="L",bT="#FFFFFF",AT="#000000",vT=!1,TT=1,qM=4,YM=0,XM=.1;function ST(n,e=0){const t=[];return n.forEach(function(s,c){let h=null;s.forEach(function(p,T){if(!p&&h!==null){t.push(`M${h+e} ${c+e}h${T-h}v1H${h+e}z`),h=null;return}if(T===s.length-1){if(!p)return;h===null?t.push(`M${T+e},${c+e} h1v1H${T+e}z`):t.push(`M${h+e},${c+e} h${T+1-h}v1H${h+e}z`);return}p&&h===null&&(h=T)})}),t.join("")}function CT(n,e){return n.slice().map((t,s)=>s<e.y||s>=e.y+e.h?t:t.map((c,h)=>h<e.x||h>=e.x+e.w?c:!1))}function WM(n,e,t,s){if(s==null)return null;const c=n.length+t*2,h=Math.floor(e*XM),p=c/e,T=(s.width||h)*p,w=(s.height||h)*p,E=s.x==null?n.length/2-T/2:s.x*p,C=s.y==null?n.length/2-w/2:s.y*p,I=s.opacity==null?1:s.opacity;let M=null;if(s.excavate){let W=Math.floor(E),Q=Math.floor(C),Y=Math.ceil(T+E-W),_e=Math.ceil(w+C-Q);M={x:W,y:Q,w:Y,h:_e}}const B=s.crossOrigin;return{x:E,y:C,h:w,w:T,excavation:M,opacity:I,crossOrigin:B}}function KM(n,e){return e!=null?Math.max(Math.floor(e),0):n?qM:YM}function IT({value:n,level:e,minVersion:t,includeMargin:s,marginSize:c,imageSettings:h,size:p,boostLevel:T}){let w=ir.useMemo(()=>{const W=(Array.isArray(n)?n:[n]).reduce((Q,Y)=>(Q.push(...yc.QrSegment.makeSegments(Y)),Q),[]);return yc.QrCode.encodeSegments(W,GM[e],t,void 0,void 0,T)},[n,e,t,T]);const{cells:E,margin:C,numCells:I,calculatedImageSettings:M}=ir.useMemo(()=>{let B=w.getModules();const W=KM(s,c),Q=B.length+W*2,Y=WM(B,p,W,h);return{cells:B,margin:W,numCells:Q,calculatedImageSettings:Y}},[w,p,h,s,c]);return{qrcode:w,margin:C,cells:E,numCells:I,calculatedImageSettings:M}}var QM=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),ZM=ir.forwardRef(function(e,t){const s=e,{value:c,size:h=_T,level:p=wT,bgColor:T=bT,fgColor:w=AT,includeMargin:E=vT,minVersion:C=TT,boostLevel:I,marginSize:M,imageSettings:B}=s,Q=cm(s,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:Y}=Q,_e=cm(Q,["style"]),ae=B==null?void 0:B.src,K=ir.useRef(null),ce=ir.useRef(null),Re=ir.useCallback(Qe=>{K.current=Qe,typeof t=="function"?t(Qe):t&&(t.current=Qe)},[t]),[De,F]=ir.useState(!1),{margin:V,cells:j,numCells:Z,calculatedImageSettings:J}=IT({value:c,level:p,minVersion:C,boostLevel:I,includeMargin:E,marginSize:M,imageSettings:B,size:h});ir.useEffect(()=>{if(K.current!=null){const Qe=K.current,fe=Qe.getContext("2d");if(!fe)return;let pe=j;const ve=ce.current,Xe=J!=null&&ve!==null&&ve.complete&&ve.naturalHeight!==0&&ve.naturalWidth!==0;Xe&&J.excavation!=null&&(pe=CT(j,J.excavation));const dt=window.devicePixelRatio||1;Qe.height=Qe.width=h*dt;const gt=h/Z*dt;fe.scale(gt,gt),fe.fillStyle=T,fe.fillRect(0,0,Z,Z),fe.fillStyle=w,QM?fe.fill(new Path2D(ST(pe,V))):j.forEach(function(ie,be){ie.forEach(function(je,Fe){je&&fe.fillRect(Fe+V,be+V,1,1)})}),J&&(fe.globalAlpha=J.opacity),Xe&&fe.drawImage(ve,J.x+V,J.y+V,J.w,J.h)}}),ir.useEffect(()=>{F(!1)},[ae]);const $=lm({height:h,width:h},Y);let G=null;return ae!=null&&(G=ir.createElement("img",{src:ae,key:ae,style:{display:"none"},onLoad:()=>{F(!0)},ref:ce,crossOrigin:J==null?void 0:J.crossOrigin})),ir.createElement(ir.Fragment,null,ir.createElement("canvas",lm({style:$,height:h,width:h,ref:Re,role:"img"},_e)),G)});ZM.displayName="QRCodeCanvas";var NT=ir.forwardRef(function(e,t){const s=e,{value:c,size:h=_T,level:p=wT,bgColor:T=bT,fgColor:w=AT,includeMargin:E=vT,minVersion:C=TT,boostLevel:I,title:M,marginSize:B,imageSettings:W}=s,Q=cm(s,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:Y,cells:_e,numCells:ae,calculatedImageSettings:K}=IT({value:c,level:p,minVersion:C,boostLevel:I,includeMargin:E,marginSize:B,imageSettings:W,size:h});let ce=_e,Re=null;W!=null&&K!=null&&(K.excavation!=null&&(ce=CT(_e,K.excavation)),Re=ir.createElement("image",{href:W.src,height:K.h,width:K.w,x:K.x+Y,y:K.y+Y,preserveAspectRatio:"none",opacity:K.opacity,crossOrigin:K.crossOrigin}));const De=ST(ce,Y);return ir.createElement("svg",lm({height:h,width:h,viewBox:`0 0 ${ae} ${ae}`,ref:t,role:"img"},Q),!!M&&ir.createElement("title",null,M),ir.createElement("path",{fill:T,d:`M0,0 h${ae}v${ae}H0z`,shapeRendering:"crispEdges"}),ir.createElement("path",{fill:w,d:De,shapeRendering:"crispEdges"}),Re)});NT.displayName="QRCodeSVG";const JM=({user:n})=>{const[e,t]=ne.useState([]),[s,c]=ne.useState(null),[h,p]=ne.useState(()=>{const E=new Date;return`${E.getFullYear()}-${String(E.getMonth()+1).padStart(2,"0")}`});ne.useEffect(()=>{const E=Zv(C=>{t(C.filter(I=>I.userId===n.id))});return()=>E()},[n.id]);const T=E=>new Date(E).toLocaleString("zh-TW",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),w=e.filter(E=>{const C=new Date(E.timestamp);return`${C.getFullYear()}-${String(C.getMonth()+1).padStart(2,"0")}`===h});return A.jsxs("div",{className:"space-y-8 animate-in slide-in-from-bottom-4 duration-500",children:[A.jsxs("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[A.jsxs("div",{children:[A.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:""}),A.jsx("p",{className:"text-slate-500 mt-1",children:""})]}),A.jsxs("div",{className:"flex items-center gap-3 bg-white p-2 rounded-2xl border border-slate-100 shadow-sm",children:[A.jsx(Gy,{size:18,className:"text-indigo-600 ml-2"}),A.jsx("input",{type:"month",value:h,onChange:E=>p(E.target.value),className:"border-none bg-transparent font-bold text-slate-600 outline-none p-1"})]})]}),w.length===0?A.jsxs("div",{className:"bg-white rounded-3xl p-12 text-center border border-dashed border-slate-200",children:[A.jsx("div",{className:"bg-slate-50 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 text-slate-300",children:A.jsx(id,{size:40})}),A.jsx("h2",{className:"text-xl font-bold text-slate-800",children:""}),A.jsx("p",{className:"text-slate-400 mt-2",children:""})]}):A.jsx("div",{className:"space-y-4",children:w.map(E=>A.jsxs("div",{className:"bg-white rounded-3xl border border-slate-100 p-6 flex flex-col md:flex-row md:items-center justify-between gap-6 shadow-sm hover:shadow-md transition-shadow",children:[A.jsxs("div",{className:"flex gap-4",children:[A.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center shrink-0 ${E.status==="completed"?"bg-green-50 text-green-600":E.status==="pending"?"bg-indigo-50 text-indigo-600":"bg-red-50 text-red-600"}`,children:E.status==="completed"?A.jsx($I,{size:24}):E.status==="pending"?A.jsx(_c,{size:24}):A.jsx(yb,{size:24})}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:E.productName||""}),A.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-400 mt-1",children:[A.jsxs("span",{className:"flex items-center gap-1",children:[A.jsx(Gy,{size:12})," ",T(E.timestamp||Date.now())]}),A.jsxs("span",{className:"font-bold text-indigo-600",children:["-",E.pointsSpent||0," "]})]})]})]}),A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx("div",{className:`px-4 py-1.5 rounded-full text-xs font-bold ${E.status==="completed"?"bg-green-100 text-green-700":E.status==="pending"?"bg-indigo-100 text-indigo-700":"bg-red-100 text-red-700"}`,children:E.status==="completed"?"":E.status==="pending"?"":""}),E.status==="pending"&&A.jsxs("button",{onClick:()=>c(E),className:"flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-2.5 rounded-xl text-sm font-bold transition-all shadow-lg shadow-indigo-100",children:[A.jsx(I3,{size:18}),""]})]})]},E.id))}),s&&A.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:A.jsxs("div",{className:"bg-white rounded-[2.5rem] max-w-sm w-full p-10 shadow-2xl animate-in zoom-in-95 duration-200 text-center",children:[A.jsx("div",{className:"flex justify-end mb-4 -mt-4 -mr-4",children:A.jsx("button",{onClick:()=>c(null),className:"text-slate-400 hover:text-slate-600 p-2",children:A.jsx(ka,{size:28})})}),A.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:""}),A.jsx("p",{className:"text-slate-500 mb-8 text-sm",children:""}),A.jsx("div",{className:"aspect-square bg-white border-8 border-indigo-50 rounded-3xl flex items-center justify-center mb-8 shadow-inner overflow-hidden p-6",children:A.jsx(NT,{value:s.qrCodeData,size:256,level:"H",includeMargin:!1,className:"w-full h-full"})}),A.jsx("div",{className:"bg-slate-50 p-4 rounded-2xl text-slate-400 font-mono text-xs mb-8 tracking-widest uppercase",children:s.qrCodeData}),A.jsx("p",{className:"font-bold text-slate-800 mb-1",children:s.productName}),A.jsxs("p",{className:"text-xs text-slate-400",children:["ID: ",s.id]})]})})]})};var We;(function(n){n[n.QR_CODE=0]="QR_CODE",n[n.AZTEC=1]="AZTEC",n[n.CODABAR=2]="CODABAR",n[n.CODE_39=3]="CODE_39",n[n.CODE_93=4]="CODE_93",n[n.CODE_128=5]="CODE_128",n[n.DATA_MATRIX=6]="DATA_MATRIX",n[n.MAXICODE=7]="MAXICODE",n[n.ITF=8]="ITF",n[n.EAN_13=9]="EAN_13",n[n.EAN_8=10]="EAN_8",n[n.PDF_417=11]="PDF_417",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(We||(We={}));var jw=new Map([[We.QR_CODE,"QR_CODE"],[We.AZTEC,"AZTEC"],[We.CODABAR,"CODABAR"],[We.CODE_39,"CODE_39"],[We.CODE_93,"CODE_93"],[We.CODE_128,"CODE_128"],[We.DATA_MATRIX,"DATA_MATRIX"],[We.MAXICODE,"MAXICODE"],[We.ITF,"ITF"],[We.EAN_13,"EAN_13"],[We.EAN_8,"EAN_8"],[We.PDF_417,"PDF_417"],[We.RSS_14,"RSS_14"],[We.RSS_EXPANDED,"RSS_EXPANDED"],[We.UPC_A,"UPC_A"],[We.UPC_E,"UPC_E"],[We.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Fw;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.URL=1]="URL"})(Fw||(Fw={}));function $M(n){return Object.values(We).includes(n)}var Pd;(function(n){n[n.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",n[n.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Pd||(Pd={}));var e9=(function(){function n(){}return n.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",n.SCAN_DEFAULT_FPS=2,n.DEFAULT_DISABLE_FLIP=!1,n.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,n.DEFAULT_SUPPORTED_SCAN_TYPE=[Pd.SCAN_TYPE_CAMERA,Pd.SCAN_TYPE_FILE],n})(),RT=(function(){function n(e,t){this.format=e,this.formatName=t}return n.prototype.toString=function(){return this.formatName},n.create=function(e){if(!jw.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new n(e,jw.get(e))},n})(),zw=(function(){function n(){}return n.createFromText=function(e){var t={text:e};return{decodedText:e,result:t}},n.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},n})(),um;(function(n){n[n.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",n[n.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",n[n.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(um||(um={}));var t9=(function(){function n(){}return n.createFrom=function(e){return{errorMessage:e,type:um.UNKWOWN_ERROR}},n})(),n9=(function(){function n(e){this.verbose=e}return n.prototype.log=function(e){this.verbose&&console.log(e)},n.prototype.warn=function(e){this.verbose&&console.warn(e)},n.prototype.logError=function(e,t){(this.verbose||t===!0)&&console.error(e)},n.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},n})();function Pa(n){return typeof n>"u"||n===null}var Ec=(function(){function n(){}return n.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},n.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},n.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},n.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},n.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},n.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},n.scannerPaused=function(){return"Scanner paused"},n})(),OT=(function(){function n(){}return n.isMediaStreamConstraintsValid=function(e,t){if(typeof e!="object"){var s=typeof e;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(s,"."),!0),!1}for(var c=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],h=new Set(c),p=Object.keys(e),T=0,w=p;T<w.length;T++){var E=w[T];if(h.has(E))return t.logError("".concat(E," is not supported videoConstaints."),!0),!1}return!0},n})(),Vu={exports:{}},r9=Vu.exports,Hw;function i9(){return Hw||(Hw=1,(function(n,e){(function(t,s){s(e)})(r9,(function(t){function s(P){return P==null}var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,i){P.__proto__=i}||function(P,i){for(var o in i)i.hasOwnProperty(o)&&(P[o]=i[o])};function h(P,i){c(P,i);function o(){this.constructor=P}P.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}function p(P,i){var o=Object.setPrototypeOf;o?o(P,i):P.__proto__=i}function T(P,i){i===void 0&&(i=P.constructor);var o=Error.captureStackTrace;o&&o(P,i)}var w=(function(P){h(i,P);function i(o){var l=this.constructor,f=P.call(this,o)||this;return Object.defineProperty(f,"name",{value:l.name,enumerable:!1}),p(f,l.prototype),T(f),f}return i})(Error);class E extends w{constructor(i=void 0){super(i),this.message=i}getKind(){return this.constructor.kind}}E.kind="Exception";class C extends E{}C.kind="ArgumentException";class I extends E{}I.kind="IllegalArgumentException";class M{constructor(i){if(this.binarizer=i,i===null)throw new I("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(i,o){return this.binarizer.getBlackRow(i,o)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(i,o,l,f){const d=this.binarizer.getLuminanceSource().crop(i,o,l,f);return new M(this.binarizer.createBinarizer(d))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new M(this.binarizer.createBinarizer(i))}rotateCounterClockwise45(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new M(this.binarizer.createBinarizer(i))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class B extends E{static getChecksumInstance(){return new B}}B.kind="ChecksumException";class W{constructor(i){this.source=i}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class Q{static arraycopy(i,o,l,f,d){for(;d--;)l[f++]=i[o++]}static currentTimeMillis(){return Date.now()}}class Y extends E{}Y.kind="IndexOutOfBoundsException";class _e extends Y{constructor(i=void 0,o=void 0){super(o),this.index=i,this.message=o}}_e.kind="ArrayIndexOutOfBoundsException";class ae{static fill(i,o){for(let l=0,f=i.length;l<f;l++)i[l]=o}static fillWithin(i,o,l,f){ae.rangeCheck(i.length,o,l);for(let d=o;d<l;d++)i[d]=f}static rangeCheck(i,o,l){if(o>l)throw new I("fromIndex("+o+") > toIndex("+l+")");if(o<0)throw new _e(o);if(l>i)throw new _e(l)}static asList(...i){return i}static create(i,o,l){return Array.from({length:i}).map(d=>Array.from({length:o}).fill(l))}static createInt32Array(i,o,l){return Array.from({length:i}).map(d=>Int32Array.from({length:o}).fill(l))}static equals(i,o){if(!i||!o||!i.length||!o.length||i.length!==o.length)return!1;for(let l=0,f=i.length;l<f;l++)if(i[l]!==o[l])return!1;return!0}static hashCode(i){if(i===null)return 0;let o=1;for(const l of i)o=31*o+l;return o}static fillUint8Array(i,o){for(let l=0;l!==i.length;l++)i[l]=o}static copyOf(i,o){return i.slice(0,o)}static copyOfUint8Array(i,o){if(i.length<=o){const l=new Uint8Array(o);return l.set(i),l}return i.slice(0,o)}static copyOfRange(i,o,l){const f=l-o,d=new Int32Array(f);return Q.arraycopy(i,o,d,0,f),d}static binarySearch(i,o,l){l===void 0&&(l=ae.numberComparator);let f=0,d=i.length-1;for(;f<=d;){const m=d+f>>1,y=l(o,i[m]);if(y>0)f=m+1;else if(y<0)d=m-1;else return m}return-f-1}static numberComparator(i,o){return i-o}}class K{static numberOfTrailingZeros(i){let o;if(i===0)return 32;let l=31;return o=i<<16,o!==0&&(l-=16,i=o),o=i<<8,o!==0&&(l-=8,i=o),o=i<<4,o!==0&&(l-=4,i=o),o=i<<2,o!==0&&(l-=2,i=o),l-(i<<1>>>31)}static numberOfLeadingZeros(i){if(i===0)return 32;let o=1;return i>>>16||(o+=16,i<<=16),i>>>24||(o+=8,i<<=8),i>>>28||(o+=4,i<<=4),i>>>30||(o+=2,i<<=2),o-=i>>>31,o}static toHexString(i){return i.toString(16)}static toBinaryString(i){return String(parseInt(String(i),2))}static bitCount(i){return i=i-(i>>>1&1431655765),i=(i&858993459)+(i>>>2&858993459),i=i+(i>>>4)&252645135,i=i+(i>>>8),i=i+(i>>>16),i&63}static truncDivision(i,o){return Math.trunc(i/o)}static parseInt(i,o=void 0){return parseInt(i,o)}}K.MIN_VALUE_32_BITS=-2147483648,K.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ce{constructor(i,o){i===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=i,o==null?this.bits=ce.makeArray(i):this.bits=o)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(i){if(i>this.bits.length*32){const o=ce.makeArray(i);Q.arraycopy(this.bits,0,o,0,this.bits.length),this.bits=o}}get(i){return(this.bits[Math.floor(i/32)]&1<<(i&31))!==0}set(i){this.bits[Math.floor(i/32)]|=1<<(i&31)}flip(i){this.bits[Math.floor(i/32)]^=1<<(i&31)}getNextSet(i){const o=this.size;if(i>=o)return o;const l=this.bits;let f=Math.floor(i/32),d=l[f];d&=~((1<<(i&31))-1);const m=l.length;for(;d===0;){if(++f===m)return o;d=l[f]}const y=f*32+K.numberOfTrailingZeros(d);return y>o?o:y}getNextUnset(i){const o=this.size;if(i>=o)return o;const l=this.bits;let f=Math.floor(i/32),d=~l[f];d&=~((1<<(i&31))-1);const m=l.length;for(;d===0;){if(++f===m)return o;d=~l[f]}const y=f*32+K.numberOfTrailingZeros(d);return y>o?o:y}setBulk(i,o){this.bits[Math.floor(i/32)]=o}setRange(i,o){if(o<i||i<0||o>this.size)throw new I;if(o===i)return;o--;const l=Math.floor(i/32),f=Math.floor(o/32),d=this.bits;for(let m=l;m<=f;m++){const y=m>l?0:i&31,S=(2<<(m<f?31:o&31))-(1<<y);d[m]|=S}}clear(){const i=this.bits.length,o=this.bits;for(let l=0;l<i;l++)o[l]=0}isRange(i,o,l){if(o<i||i<0||o>this.size)throw new I;if(o===i)return!0;o--;const f=Math.floor(i/32),d=Math.floor(o/32),m=this.bits;for(let y=f;y<=d;y++){const b=y>f?0:i&31,R=(2<<(y<d?31:o&31))-(1<<b)&4294967295;if((m[y]&R)!==(l?R:0))return!1}return!0}appendBit(i){this.ensureCapacity(this.size+1),i&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(i,o){if(o<0||o>32)throw new I("Num bits must be between 0 and 32");this.ensureCapacity(this.size+o);for(let l=o;l>0;l--)this.appendBit((i>>l-1&1)===1)}appendBitArray(i){const o=i.size;this.ensureCapacity(this.size+o);for(let l=0;l<o;l++)this.appendBit(i.get(l))}xor(i){if(this.size!==i.size)throw new I("Sizes don't match");const o=this.bits;for(let l=0,f=o.length;l<f;l++)o[l]^=i.bits[l]}toBytes(i,o,l,f){for(let d=0;d<f;d++){let m=0;for(let y=0;y<8;y++)this.get(i)&&(m|=1<<7-y),i++;o[l+d]=m}}getBitArray(){return this.bits}reverse(){const i=new Int32Array(this.bits.length),o=Math.floor((this.size-1)/32),l=o+1,f=this.bits;for(let d=0;d<l;d++){let m=f[d];m=m>>1&1431655765|(m&1431655765)<<1,m=m>>2&858993459|(m&858993459)<<2,m=m>>4&252645135|(m&252645135)<<4,m=m>>8&16711935|(m&16711935)<<8,m=m>>16&65535|(m&65535)<<16,i[o-d]=m}if(this.size!==l*32){const d=l*32-this.size;let m=i[0]>>>d;for(let y=1;y<l;y++){const b=i[y];m|=b<<32-d,i[y-1]=m,m=b>>>d}i[l-1]=m}this.bits=i}static makeArray(i){return new Int32Array(Math.floor((i+31)/32))}equals(i){if(!(i instanceof ce))return!1;const o=i;return this.size===o.size&&ae.equals(this.bits,o.bits)}hashCode(){return 31*this.size+ae.hashCode(this.bits)}toString(){let i="";for(let o=0,l=this.size;o<l;o++)(o&7)===0&&(i+=" "),i+=this.get(o)?"X":".";return i}clone(){return new ce(this.size,this.bits.slice())}}var Re;(function(P){P[P.OTHER=0]="OTHER",P[P.PURE_BARCODE=1]="PURE_BARCODE",P[P.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",P[P.TRY_HARDER=3]="TRY_HARDER",P[P.CHARACTER_SET=4]="CHARACTER_SET",P[P.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",P[P.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",P[P.ASSUME_GS1=7]="ASSUME_GS1",P[P.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",P[P.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",P[P.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Re||(Re={}));var De=Re;class F extends E{static getFormatInstance(){return new F}}F.kind="FormatException";var V;(function(P){P[P.Cp437=0]="Cp437",P[P.ISO8859_1=1]="ISO8859_1",P[P.ISO8859_2=2]="ISO8859_2",P[P.ISO8859_3=3]="ISO8859_3",P[P.ISO8859_4=4]="ISO8859_4",P[P.ISO8859_5=5]="ISO8859_5",P[P.ISO8859_6=6]="ISO8859_6",P[P.ISO8859_7=7]="ISO8859_7",P[P.ISO8859_8=8]="ISO8859_8",P[P.ISO8859_9=9]="ISO8859_9",P[P.ISO8859_10=10]="ISO8859_10",P[P.ISO8859_11=11]="ISO8859_11",P[P.ISO8859_13=12]="ISO8859_13",P[P.ISO8859_14=13]="ISO8859_14",P[P.ISO8859_15=14]="ISO8859_15",P[P.ISO8859_16=15]="ISO8859_16",P[P.SJIS=16]="SJIS",P[P.Cp1250=17]="Cp1250",P[P.Cp1251=18]="Cp1251",P[P.Cp1252=19]="Cp1252",P[P.Cp1256=20]="Cp1256",P[P.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",P[P.UTF8=22]="UTF8",P[P.ASCII=23]="ASCII",P[P.Big5=24]="Big5",P[P.GB18030=25]="GB18030",P[P.EUC_KR=26]="EUC_KR"})(V||(V={}));class j{constructor(i,o,l,...f){this.valueIdentifier=i,this.name=l,typeof o=="number"?this.values=Int32Array.from([o]):this.values=o,this.otherEncodingNames=f,j.VALUE_IDENTIFIER_TO_ECI.set(i,this),j.NAME_TO_ECI.set(l,this);const d=this.values;for(let m=0,y=d.length;m!==y;m++){const b=d[m];j.VALUES_TO_ECI.set(b,this)}for(const m of f)j.NAME_TO_ECI.set(m,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(i){if(i<0||i>=900)throw new F("incorect value");const o=j.VALUES_TO_ECI.get(i);if(o===void 0)throw new F("incorect value");return o}static getCharacterSetECIByName(i){const o=j.NAME_TO_ECI.get(i);if(o===void 0)throw new F("incorect value");return o}equals(i){if(!(i instanceof j))return!1;const o=i;return this.getName()===o.getName()}}j.VALUE_IDENTIFIER_TO_ECI=new Map,j.VALUES_TO_ECI=new Map,j.NAME_TO_ECI=new Map,j.Cp437=new j(V.Cp437,Int32Array.from([0,2]),"Cp437"),j.ISO8859_1=new j(V.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),j.ISO8859_2=new j(V.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),j.ISO8859_3=new j(V.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),j.ISO8859_4=new j(V.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),j.ISO8859_5=new j(V.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),j.ISO8859_6=new j(V.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),j.ISO8859_7=new j(V.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),j.ISO8859_8=new j(V.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),j.ISO8859_9=new j(V.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),j.ISO8859_10=new j(V.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),j.ISO8859_11=new j(V.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),j.ISO8859_13=new j(V.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),j.ISO8859_14=new j(V.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),j.ISO8859_15=new j(V.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),j.ISO8859_16=new j(V.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),j.SJIS=new j(V.SJIS,20,"SJIS","Shift_JIS"),j.Cp1250=new j(V.Cp1250,21,"Cp1250","windows-1250"),j.Cp1251=new j(V.Cp1251,22,"Cp1251","windows-1251"),j.Cp1252=new j(V.Cp1252,23,"Cp1252","windows-1252"),j.Cp1256=new j(V.Cp1256,24,"Cp1256","windows-1256"),j.UnicodeBigUnmarked=new j(V.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),j.UTF8=new j(V.UTF8,26,"UTF8","UTF-8"),j.ASCII=new j(V.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),j.Big5=new j(V.Big5,28,"Big5"),j.GB18030=new j(V.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),j.EUC_KR=new j(V.EUC_KR,30,"EUC_KR","EUC-KR");class Z extends E{}Z.kind="UnsupportedOperationException";class J{static decode(i,o){const l=this.encodingName(o);return this.customDecoder?this.customDecoder(i,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(i,l):new TextDecoder(l).decode(i)}static shouldDecodeOnFallback(i){return!J.isBrowser()&&i==="ISO-8859-1"}static encode(i,o){const l=this.encodingName(o);return this.customEncoder?this.customEncoder(i,l):typeof TextEncoder>"u"?this.encodeFallback(i):new TextEncoder().encode(i)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(i){return typeof i=="string"?i:i.getName()}static encodingCharacterSet(i){return i instanceof j?i:j.getCharacterSetECIByName(i)}static decodeFallback(i,o){const l=this.encodingCharacterSet(o);if(J.isDecodeFallbackSupported(l)){let f="";for(let d=0,m=i.length;d<m;d++){let y=i[d].toString(16);y.length<2&&(y="0"+y),f+="%"+y}return decodeURIComponent(f)}if(l.equals(j.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(i.buffer));throw new Z(`Encoding ${this.encodingName(o)} not supported by fallback.`)}static isDecodeFallbackSupported(i){return i.equals(j.UTF8)||i.equals(j.ISO8859_1)||i.equals(j.ASCII)}static encodeFallback(i){const l=btoa(unescape(encodeURIComponent(i))).split(""),f=[];for(let d=0;d<l.length;d++)f.push(l[d].charCodeAt(0));return new Uint8Array(f)}}class ${static castAsNonUtf8Char(i,o=null){const l=o?o.getName():this.ISO88591;return J.decode(new Uint8Array([i]),l)}static guessEncoding(i,o){if(o!=null&&o.get(De.CHARACTER_SET)!==void 0)return o.get(De.CHARACTER_SET).toString();const l=i.length;let f=!0,d=!0,m=!0,y=0,b=0,S=0,R=0,L=0,k=0,q=0,te=0,re=0,he=0,ye=0;const Ue=i.length>3&&i[0]===239&&i[1]===187&&i[2]===191;for(let ke=0;ke<l&&(f||d||m);ke++){const Oe=i[ke]&255;m&&(y>0?(Oe&128)===0?m=!1:y--:(Oe&128)!==0&&((Oe&64)===0?m=!1:(y++,(Oe&32)===0?b++:(y++,(Oe&16)===0?S++:(y++,(Oe&8)===0?R++:m=!1))))),f&&(Oe>127&&Oe<160?f=!1:Oe>159&&(Oe<192||Oe===215||Oe===247)&&ye++),d&&(L>0?Oe<64||Oe===127||Oe>252?d=!1:L--:Oe===128||Oe===160||Oe>239?d=!1:Oe>160&&Oe<224?(k++,te=0,q++,q>re&&(re=q)):Oe>127?(L++,q=0,te++,te>he&&(he=te)):(q=0,te=0))}return m&&y>0&&(m=!1),d&&L>0&&(d=!1),m&&(Ue||b+S+R>0)?$.UTF8:d&&($.ASSUME_SHIFT_JIS||re>=3||he>=3)?$.SHIFT_JIS:f&&d?re===2&&k===2||ye*10>=l?$.SHIFT_JIS:$.ISO88591:f?$.ISO88591:d?$.SHIFT_JIS:m?$.UTF8:$.PLATFORM_DEFAULT_ENCODING}static format(i,...o){let l=-1;function f(m,y,b,S,R,L){if(m==="%%")return"%";if(o[++l]===void 0)return;m=S?parseInt(S.substr(1)):void 0;let k=R?parseInt(R.substr(1)):void 0,q;switch(L){case"s":q=o[l];break;case"c":q=o[l][0];break;case"f":q=parseFloat(o[l]).toFixed(m);break;case"p":q=parseFloat(o[l]).toPrecision(m);break;case"e":q=parseFloat(o[l]).toExponential(m);break;case"x":q=parseInt(o[l]).toString(k||16);break;case"d":q=parseFloat(parseInt(o[l],k||10).toPrecision(m)).toFixed(0);break}q=typeof q=="object"?JSON.stringify(q):(+q).toString(k);let te=parseInt(b),re=b&&b[0]+""=="0"?"0":" ";for(;q.length<te;)q=y!==void 0?q+re:re+q;return q}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(d,f)}static getBytes(i,o){return J.encode(i,o)}static getCharCode(i,o=0){return i.charCodeAt(o)}static getCharAt(i){return String.fromCharCode(i)}}$.SHIFT_JIS=j.SJIS.getName(),$.GB2312="GB2312",$.ISO88591=j.ISO8859_1.getName(),$.EUC_JP="EUC_JP",$.UTF8=j.UTF8.getName(),$.PLATFORM_DEFAULT_ENCODING=$.UTF8,$.ASSUME_SHIFT_JIS=!1;class G{constructor(i=""){this.value=i}enableDecoding(i){return this.encoding=i,this}append(i){return typeof i=="string"?this.value+=i.toString():this.encoding?this.value+=$.castAsNonUtf8Char(i,this.encoding):this.value+=String.fromCharCode(i),this}appendChars(i,o,l){for(let f=o;o<o+l;f++)this.append(i[f]);return this}length(){return this.value.length}charAt(i){return this.value.charAt(i)}deleteCharAt(i){this.value=this.value.substr(0,i)+this.value.substring(i+1)}setCharAt(i,o){this.value=this.value.substr(0,i)+o+this.value.substr(i+1)}substring(i,o){return this.value.substring(i,o)}setLengthToZero(){this.value=""}toString(){return this.value}insert(i,o){this.value=this.value.substr(0,i)+o+this.value.substr(i+o.length)}}class Qe{constructor(i,o,l,f){if(this.width=i,this.height=o,this.rowSize=l,this.bits=f,o==null&&(o=i),this.height=o,i<1||o<1)throw new I("Both dimensions must be greater than 0");l==null&&(l=Math.floor((i+31)/32)),this.rowSize=l,f==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(i){const o=i.length,l=i[0].length,f=new Qe(l,o);for(let d=0;d<o;d++){const m=i[d];for(let y=0;y<l;y++)m[y]&&f.set(y,d)}return f}static parseFromString(i,o,l){if(i===null)throw new I("stringRepresentation cannot be null");const f=new Array(i.length);let d=0,m=0,y=-1,b=0,S=0;for(;S<i.length;)if(i.charAt(S)===`
`||i.charAt(S)==="\r"){if(d>m){if(y===-1)y=d-m;else if(d-m!==y)throw new I("row lengths do not match");m=d,b++}S++}else if(i.substring(S,S+o.length)===o)S+=o.length,f[d]=!0,d++;else if(i.substring(S,S+l.length)===l)S+=l.length,f[d]=!1,d++;else throw new I("illegal character encountered: "+i.substring(S));if(d>m){if(y===-1)y=d-m;else if(d-m!==y)throw new I("row lengths do not match");b++}const R=new Qe(y,b);for(let L=0;L<d;L++)f[L]&&R.set(Math.floor(L%y),Math.floor(L/y));return R}get(i,o){const l=o*this.rowSize+Math.floor(i/32);return(this.bits[l]>>>(i&31)&1)!==0}set(i,o){const l=o*this.rowSize+Math.floor(i/32);this.bits[l]|=1<<(i&31)&4294967295}unset(i,o){const l=o*this.rowSize+Math.floor(i/32);this.bits[l]&=~(1<<(i&31)&4294967295)}flip(i,o){const l=o*this.rowSize+Math.floor(i/32);this.bits[l]^=1<<(i&31)&4294967295}xor(i){if(this.width!==i.getWidth()||this.height!==i.getHeight()||this.rowSize!==i.getRowSize())throw new I("input matrix dimensions do not match");const o=new ce(Math.floor(this.width/32)+1),l=this.rowSize,f=this.bits;for(let d=0,m=this.height;d<m;d++){const y=d*l,b=i.getRow(d,o).getBitArray();for(let S=0;S<l;S++)f[y+S]^=b[S]}}clear(){const i=this.bits,o=i.length;for(let l=0;l<o;l++)i[l]=0}setRegion(i,o,l,f){if(o<0||i<0)throw new I("Left and top must be nonnegative");if(f<1||l<1)throw new I("Height and width must be at least 1");const d=i+l,m=o+f;if(m>this.height||d>this.width)throw new I("The region must fit inside the matrix");const y=this.rowSize,b=this.bits;for(let S=o;S<m;S++){const R=S*y;for(let L=i;L<d;L++)b[R+Math.floor(L/32)]|=1<<(L&31)&4294967295}}getRow(i,o){o==null||o.getSize()<this.width?o=new ce(this.width):o.clear();const l=this.rowSize,f=this.bits,d=i*l;for(let m=0;m<l;m++)o.setBulk(m*32,f[d+m]);return o}setRow(i,o){Q.arraycopy(o.getBitArray(),0,this.bits,i*this.rowSize,this.rowSize)}rotate180(){const i=this.getWidth(),o=this.getHeight();let l=new ce(i),f=new ce(i);for(let d=0,m=Math.floor((o+1)/2);d<m;d++)l=this.getRow(d,l),f=this.getRow(o-1-d,f),l.reverse(),f.reverse(),this.setRow(d,f),this.setRow(o-1-d,l)}getEnclosingRectangle(){const i=this.width,o=this.height,l=this.rowSize,f=this.bits;let d=i,m=o,y=-1,b=-1;for(let S=0;S<o;S++)for(let R=0;R<l;R++){const L=f[S*l+R];if(L!==0){if(S<m&&(m=S),S>b&&(b=S),R*32<d){let k=0;for(;(L<<31-k&4294967295)===0;)k++;R*32+k<d&&(d=R*32+k)}if(R*32+31>y){let k=31;for(;!(L>>>k);)k--;R*32+k>y&&(y=R*32+k)}}}return y<d||b<m?null:Int32Array.from([d,m,y-d+1,b-m+1])}getTopLeftOnBit(){const i=this.rowSize,o=this.bits;let l=0;for(;l<o.length&&o[l]===0;)l++;if(l===o.length)return null;const f=l/i;let d=l%i*32;const m=o[l];let y=0;for(;(m<<31-y&4294967295)===0;)y++;return d+=y,Int32Array.from([d,f])}getBottomRightOnBit(){const i=this.rowSize,o=this.bits;let l=o.length-1;for(;l>=0&&o[l]===0;)l--;if(l<0)return null;const f=Math.floor(l/i);let d=Math.floor(l%i)*32;const m=o[l];let y=31;for(;!(m>>>y);)y--;return d+=y,Int32Array.from([d,f])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(i){if(!(i instanceof Qe))return!1;const o=i;return this.width===o.width&&this.height===o.height&&this.rowSize===o.rowSize&&ae.equals(this.bits,o.bits)}hashCode(){let i=this.width;return i=31*i+this.width,i=31*i+this.height,i=31*i+this.rowSize,i=31*i+ae.hashCode(this.bits),i}toString(i="X ",o="  ",l=`
`){return this.buildToString(i,o,l)}buildToString(i,o,l){let f=new G;for(let d=0,m=this.height;d<m;d++){for(let y=0,b=this.width;y<b;y++)f.append(this.get(y,d)?i:o);f.append(l)}return f.toString()}clone(){return new Qe(this.width,this.height,this.rowSize,this.bits.slice())}}class fe extends E{static getNotFoundInstance(){return new fe}}fe.kind="NotFoundException";class pe extends W{constructor(i){super(i),this.luminances=pe.EMPTY,this.buckets=new Int32Array(pe.LUMINANCE_BUCKETS)}getBlackRow(i,o){const l=this.getLuminanceSource(),f=l.getWidth();o==null||o.getSize()<f?o=new ce(f):o.clear(),this.initArrays(f);const d=l.getRow(i,this.luminances),m=this.buckets;for(let b=0;b<f;b++)m[(d[b]&255)>>pe.LUMINANCE_SHIFT]++;const y=pe.estimateBlackPoint(m);if(f<3)for(let b=0;b<f;b++)(d[b]&255)<y&&o.set(b);else{let b=d[0]&255,S=d[1]&255;for(let R=1;R<f-1;R++){const L=d[R+1]&255;(S*4-b-L)/2<y&&o.set(R),b=S,S=L}}return o}getBlackMatrix(){const i=this.getLuminanceSource(),o=i.getWidth(),l=i.getHeight(),f=new Qe(o,l);this.initArrays(o);const d=this.buckets;for(let b=1;b<5;b++){const S=Math.floor(l*b/5),R=i.getRow(S,this.luminances),L=Math.floor(o*4/5);for(let k=Math.floor(o/5);k<L;k++){const q=R[k]&255;d[q>>pe.LUMINANCE_SHIFT]++}}const m=pe.estimateBlackPoint(d),y=i.getMatrix();for(let b=0;b<l;b++){const S=b*o;for(let R=0;R<o;R++)(y[S+R]&255)<m&&f.set(R,b)}return f}createBinarizer(i){return new pe(i)}initArrays(i){this.luminances.length<i&&(this.luminances=new Uint8ClampedArray(i));const o=this.buckets;for(let l=0;l<pe.LUMINANCE_BUCKETS;l++)o[l]=0}static estimateBlackPoint(i){const o=i.length;let l=0,f=0,d=0;for(let R=0;R<o;R++)i[R]>d&&(f=R,d=i[R]),i[R]>l&&(l=i[R]);let m=0,y=0;for(let R=0;R<o;R++){const L=R-f,k=i[R]*L*L;k>y&&(m=R,y=k)}if(f>m){const R=f;f=m,m=R}if(m-f<=o/16)throw new fe;let b=m-1,S=-1;for(let R=m-1;R>f;R--){const L=R-f,k=L*L*(m-R)*(l-i[R]);k>S&&(b=R,S=k)}return b<<pe.LUMINANCE_SHIFT}}pe.LUMINANCE_BITS=5,pe.LUMINANCE_SHIFT=8-pe.LUMINANCE_BITS,pe.LUMINANCE_BUCKETS=1<<pe.LUMINANCE_BITS,pe.EMPTY=Uint8ClampedArray.from([0]);class ve extends pe{constructor(i){super(i),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const i=this.getLuminanceSource(),o=i.getWidth(),l=i.getHeight();if(o>=ve.MINIMUM_DIMENSION&&l>=ve.MINIMUM_DIMENSION){const f=i.getMatrix();let d=o>>ve.BLOCK_SIZE_POWER;(o&ve.BLOCK_SIZE_MASK)!==0&&d++;let m=l>>ve.BLOCK_SIZE_POWER;(l&ve.BLOCK_SIZE_MASK)!==0&&m++;const y=ve.calculateBlackPoints(f,d,m,o,l),b=new Qe(o,l);ve.calculateThresholdForBlock(f,d,m,o,l,y,b),this.matrix=b}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(i){return new ve(i)}static calculateThresholdForBlock(i,o,l,f,d,m,y){const b=d-ve.BLOCK_SIZE,S=f-ve.BLOCK_SIZE;for(let R=0;R<l;R++){let L=R<<ve.BLOCK_SIZE_POWER;L>b&&(L=b);const k=ve.cap(R,2,l-3);for(let q=0;q<o;q++){let te=q<<ve.BLOCK_SIZE_POWER;te>S&&(te=S);const re=ve.cap(q,2,o-3);let he=0;for(let Ue=-2;Ue<=2;Ue++){const ke=m[k+Ue];he+=ke[re-2]+ke[re-1]+ke[re]+ke[re+1]+ke[re+2]}const ye=he/25;ve.thresholdBlock(i,te,L,ye,f,y)}}}static cap(i,o,l){return i<o?o:i>l?l:i}static thresholdBlock(i,o,l,f,d,m){for(let y=0,b=l*d+o;y<ve.BLOCK_SIZE;y++,b+=d)for(let S=0;S<ve.BLOCK_SIZE;S++)(i[b+S]&255)<=f&&m.set(o+S,l+y)}static calculateBlackPoints(i,o,l,f,d){const m=d-ve.BLOCK_SIZE,y=f-ve.BLOCK_SIZE,b=new Array(l);for(let S=0;S<l;S++){b[S]=new Int32Array(o);let R=S<<ve.BLOCK_SIZE_POWER;R>m&&(R=m);for(let L=0;L<o;L++){let k=L<<ve.BLOCK_SIZE_POWER;k>y&&(k=y);let q=0,te=255,re=0;for(let ye=0,Ue=R*f+k;ye<ve.BLOCK_SIZE;ye++,Ue+=f){for(let ke=0;ke<ve.BLOCK_SIZE;ke++){const Oe=i[Ue+ke]&255;q+=Oe,Oe<te&&(te=Oe),Oe>re&&(re=Oe)}if(re-te>ve.MIN_DYNAMIC_RANGE)for(ye++,Ue+=f;ye<ve.BLOCK_SIZE;ye++,Ue+=f)for(let ke=0;ke<ve.BLOCK_SIZE;ke++)q+=i[Ue+ke]&255}let he=q>>ve.BLOCK_SIZE_POWER*2;if(re-te<=ve.MIN_DYNAMIC_RANGE&&(he=te/2,S>0&&L>0)){const ye=(b[S-1][L]+2*b[S][L-1]+b[S-1][L-1])/4;te<ye&&(he=ye)}b[S][L]=he}}return b}}ve.BLOCK_SIZE_POWER=3,ve.BLOCK_SIZE=1<<ve.BLOCK_SIZE_POWER,ve.BLOCK_SIZE_MASK=ve.BLOCK_SIZE-1,ve.MINIMUM_DIMENSION=ve.BLOCK_SIZE*5,ve.MIN_DYNAMIC_RANGE=24;class Xe{constructor(i,o){this.width=i,this.height=o}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(i,o,l,f){throw new Z("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Z("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Z("This luminance source does not support rotation by 45 degrees.")}toString(){const i=new Uint8ClampedArray(this.width);let o=new G;for(let l=0;l<this.height;l++){const f=this.getRow(l,i);for(let d=0;d<this.width;d++){const m=f[d]&255;let y;m<64?y="#":m<128?y="+":m<192?y=".":y=" ",o.append(y)}o.append(`
`)}return o.toString()}}class dt extends Xe{constructor(i){super(i.getWidth(),i.getHeight()),this.delegate=i}getRow(i,o){const l=this.delegate.getRow(i,o),f=this.getWidth();for(let d=0;d<f;d++)l[d]=255-(l[d]&255);return l}getMatrix(){const i=this.delegate.getMatrix(),o=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(o);for(let f=0;f<o;f++)l[f]=255-(i[f]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(i,o,l,f){return new dt(this.delegate.crop(i,o,l,f))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new dt(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new dt(this.delegate.rotateCounterClockwise45())}}class gt extends Xe{constructor(i){super(i.width,i.height),this.canvas=i,this.tempCanvasElement=null,this.buffer=gt.makeBufferFromCanvasImageData(i)}static makeBufferFromCanvasImageData(i){const o=i.getContext("2d").getImageData(0,0,i.width,i.height);return gt.toGrayscaleBuffer(o.data,i.width,i.height)}static toGrayscaleBuffer(i,o,l){const f=new Uint8ClampedArray(o*l);for(let d=0,m=0,y=i.length;d<y;d+=4,m++){let b;if(i[d+3]===0)b=255;else{const R=i[d],L=i[d+1],k=i[d+2];b=306*R+601*L+117*k+512>>10}f[m]=b}return f}getRow(i,o){if(i<0||i>=this.getHeight())throw new I("Requested row is outside the image: "+i);const l=this.getWidth(),f=i*l;return o===null?o=this.buffer.slice(f,f+l):(o.length<l&&(o=new Uint8ClampedArray(l)),o.set(this.buffer.slice(f,f+l))),o}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(i,o,l,f){return super.crop(i,o,l,f),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const i=this.canvas.ownerDocument.createElement("canvas");i.width=this.canvas.width,i.height=this.canvas.height,this.tempCanvasElement=i}return this.tempCanvasElement}rotate(i){const o=this.getTempCanvasElement(),l=o.getContext("2d"),f=i*gt.DEGREE_TO_RADIANS,d=this.canvas.width,m=this.canvas.height,y=Math.ceil(Math.abs(Math.cos(f))*d+Math.abs(Math.sin(f))*m),b=Math.ceil(Math.abs(Math.sin(f))*d+Math.abs(Math.cos(f))*m);return o.width=y,o.height=b,l.translate(y/2,b/2),l.rotate(f),l.drawImage(this.canvas,d/-2,m/-2),this.buffer=gt.makeBufferFromCanvasImageData(o),this}invert(){return new dt(this)}}gt.DEGREE_TO_RADIANS=Math.PI/180;class ie{constructor(i,o,l){this.deviceId=i,this.label=o,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var be=(globalThis||Nf||self||window||void 0)&&(globalThis||Nf||self||window||void 0).__awaiter||function(P,i,o,l){function f(d){return d instanceof o?d:new o(function(m){m(d)})}return new(o||(o=Promise))(function(d,m){function y(R){try{S(l.next(R))}catch(L){m(L)}}function b(R){try{S(l.throw(R))}catch(L){m(L)}}function S(R){R.done?d(R.value):f(R.value).then(y,b)}S((l=l.apply(P,i||[])).next())})};class je{constructor(i,o=500,l){this.reader=i,this.timeBetweenScansMillis=o,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(i){this._timeBetweenDecodingAttempts=i<0?0:i}set hints(i){this._hints=i||null}get hints(){return this._hints}listVideoInputDevices(){return be(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const i=yield navigator.mediaDevices.enumerateDevices(),o=[];for(const l of i){const f=l.kind==="video"?"videoinput":l.kind;if(f!=="videoinput")continue;const d=l.deviceId||l.id,m=l.label||`Video device ${o.length+1}`,y=l.groupId,b={deviceId:d,label:m,kind:f,groupId:y};o.push(b)}return o})}getVideoInputDevices(){return be(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(o=>new ie(o.deviceId,o.label))})}findDeviceById(i){return be(this,void 0,void 0,function*(){const o=yield this.listVideoInputDevices();return o?o.find(l=>l.deviceId===i):null})}decodeFromInputVideoDevice(i,o){return be(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(i,o)})}decodeOnceFromVideoDevice(i,o){return be(this,void 0,void 0,function*(){this.reset();let l;i?l={deviceId:{exact:i}}:l={facingMode:"environment"};const f={video:l};return yield this.decodeOnceFromConstraints(f,o)})}decodeOnceFromConstraints(i,o){return be(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeOnceFromStream(l,o)})}decodeOnceFromStream(i,o){return be(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(i,o);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(i,o,l){return be(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(i,o,l)})}decodeFromVideoDevice(i,o,l){return be(this,void 0,void 0,function*(){let f;i?f={deviceId:{exact:i}}:f={facingMode:"environment"};const d={video:f};return yield this.decodeFromConstraints(d,o,l)})}decodeFromConstraints(i,o,l){return be(this,void 0,void 0,function*(){const f=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeFromStream(f,o,l)})}decodeFromStream(i,o,l){return be(this,void 0,void 0,function*(){this.reset();const f=yield this.attachStreamToVideo(i,o);return yield this.decodeContinuously(f,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(i,o){return be(this,void 0,void 0,function*(){const l=this.prepareVideoElement(o);return this.addVideoSource(l,i),this.videoElement=l,this.stream=i,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(i){return new Promise((o,l)=>this.playVideoOnLoad(i,()=>o()))}playVideoOnLoad(i,o){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(i),i.addEventListener("ended",this.videoEndedListener),i.addEventListener("canplay",this.videoCanPlayListener),i.addEventListener("playing",o),this.tryPlayVideo(i)}isVideoPlaying(i){return i.currentTime>0&&!i.paused&&!i.ended&&i.readyState>2}tryPlayVideo(i){return be(this,void 0,void 0,function*(){if(this.isVideoPlaying(i)){console.warn("Trying to play video that is already playing.");return}try{yield i.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(i,o){const l=document.getElementById(i);if(!l)throw new C(`element with id '${i}' not found`);if(l.nodeName.toLowerCase()!==o.toLowerCase())throw new C(`element with id '${i}' must be an ${o} element`);return l}decodeFromImage(i,o){if(!i&&!o)throw new C("either imageElement with a src set or an url must be provided");return o&&!i?this.decodeFromImageUrl(o):this.decodeFromImageElement(i)}decodeFromVideo(i,o){if(!i&&!o)throw new C("Either an element with a src set or an URL must be provided");return o&&!i?this.decodeFromVideoUrl(o):this.decodeFromVideoElement(i)}decodeFromVideoContinuously(i,o,l){if(i===void 0&&o===void 0)throw new C("Either an element with a src set or an URL must be provided");return o&&!i?this.decodeFromVideoUrlContinuously(o,l):this.decodeFromVideoElementContinuously(i,l)}decodeFromImageElement(i){if(!i)throw new C("An image element must be provided.");this.reset();const o=this.prepareImageElement(i);this.imageElement=o;let l;return this.isImageLoaded(o)?l=this.decodeOnce(o,!1,!0):l=this._decodeOnLoadImage(o),l}decodeFromVideoElement(i){const o=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideo(o)}decodeFromVideoElementContinuously(i,o){const l=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideoContinuously(l,o)}_decodeFromVideoElementSetup(i){if(!i)throw new C("A video element must be provided.");this.reset();const o=this.prepareVideoElement(i);return this.videoElement=o,o}decodeFromImageUrl(i){if(!i)throw new C("An URL must be provided.");this.reset();const o=this.prepareImageElement();this.imageElement=o;const l=this._decodeOnLoadImage(o);return o.src=i,l}decodeFromVideoUrl(i){if(!i)throw new C("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),l=this.decodeFromVideoElement(o);return o.src=i,l}decodeFromVideoUrlContinuously(i,o){if(!i)throw new C("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),f=this.decodeFromVideoElementContinuously(l,o);return l.src=i,f}_decodeOnLoadImage(i){return new Promise((o,l)=>{this.imageLoadedListener=()=>this.decodeOnce(i,!1,!0).then(o,l),i.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(i){return be(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(i),yield this.decodeOnce(i)})}_decodeOnLoadVideoContinuously(i,o){return be(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(i),this.decodeContinuously(i,o)})}isImageLoaded(i){return!(!i.complete||i.naturalWidth===0)}prepareImageElement(i){let o;return typeof i>"u"&&(o=document.createElement("img"),o.width=200,o.height=200),typeof i=="string"&&(o=this.getMediaElement(i,"img")),i instanceof HTMLImageElement&&(o=i),o}prepareVideoElement(i){let o;return!i&&typeof document<"u"&&(o=document.createElement("video"),o.width=200,o.height=200),typeof i=="string"&&(o=this.getMediaElement(i,"video")),i instanceof HTMLVideoElement&&(o=i),o.setAttribute("autoplay","true"),o.setAttribute("muted","true"),o.setAttribute("playsinline","true"),o}decodeOnce(i,o=!0,l=!0){this._stopAsyncDecode=!1;const f=(d,m)=>{if(this._stopAsyncDecode){m(new fe("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const y=this.decode(i);d(y)}catch(y){const b=o&&y instanceof fe,R=(y instanceof B||y instanceof F)&&l;if(b||R)return setTimeout(f,this._timeBetweenDecodingAttempts,d,m);m(y)}};return new Promise((d,m)=>f(d,m))}decodeContinuously(i,o){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const f=this.decode(i);o(f,null),setTimeout(l,this.timeBetweenScansMillis)}catch(f){o(null,f);const d=f instanceof B||f instanceof F,m=f instanceof fe;(d||m)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(i){const o=this.createBinaryBitmap(i);return this.decodeBitmap(o)}_isHTMLVideoElement(i){return i.videoWidth!==0}drawFrameOnCanvas(i,o,l){o||(o={sx:0,sy:0,sWidth:i.videoWidth,sHeight:i.videoHeight,dx:0,dy:0,dWidth:i.videoWidth,dHeight:i.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(i,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}drawImageOnCanvas(i,o,l=this.captureCanvasContext){o||(o={sx:0,sy:0,sWidth:i.naturalWidth,sHeight:i.naturalHeight,dx:0,dy:0,dWidth:i.naturalWidth,dHeight:i.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(i,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}createBinaryBitmap(i){this.getCaptureCanvasContext(i),this._isHTMLVideoElement(i)?this.drawFrameOnCanvas(i):this.drawImageOnCanvas(i);const o=this.getCaptureCanvas(i),l=new gt(o),f=new ve(l);return new M(f)}getCaptureCanvasContext(i){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(i).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(i){if(!this.captureCanvas){const o=this.createCaptureCanvas(i);this.captureCanvas=o}return this.captureCanvas}decodeBitmap(i){return this.reader.decode(i,this._hints)}createCaptureCanvas(i){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const o=document.createElement("canvas");let l,f;return typeof i<"u"&&(i instanceof HTMLVideoElement?(l=i.videoWidth,f=i.videoHeight):i instanceof HTMLImageElement&&(l=i.naturalWidth||i.width,f=i.naturalHeight||i.height)),o.style.width=l+"px",o.style.height=f+"px",o.width=l,o.height=f,o}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(i=>i.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(i,o){try{i.srcObject=o}catch{i.src=URL.createObjectURL(o)}}cleanVideoSource(i){try{i.srcObject=null}catch{i.src=""}this.videoElement.removeAttribute("src")}}class Fe{constructor(i,o,l=o==null?0:8*o.length,f,d,m=Q.currentTimeMillis()){this.text=i,this.rawBytes=o,this.numBits=l,this.resultPoints=f,this.format=d,this.timestamp=m,this.text=i,this.rawBytes=o,l==null?this.numBits=o==null?0:8*o.length:this.numBits=l,this.resultPoints=f,this.format=d,this.resultMetadata=null,m==null?this.timestamp=Q.currentTimeMillis():this.timestamp=m}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(i,o){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(i,o)}putAllMetadata(i){i!==null&&(this.resultMetadata===null?this.resultMetadata=i:this.resultMetadata=new Map(i))}addResultPoints(i){const o=this.resultPoints;if(o===null)this.resultPoints=i;else if(i!==null&&i.length>0){const l=new Array(o.length+i.length);Q.arraycopy(o,0,l,0,o.length),Q.arraycopy(i,0,l,o.length,i.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var $e;(function(P){P[P.AZTEC=0]="AZTEC",P[P.CODABAR=1]="CODABAR",P[P.CODE_39=2]="CODE_39",P[P.CODE_93=3]="CODE_93",P[P.CODE_128=4]="CODE_128",P[P.DATA_MATRIX=5]="DATA_MATRIX",P[P.EAN_8=6]="EAN_8",P[P.EAN_13=7]="EAN_13",P[P.ITF=8]="ITF",P[P.MAXICODE=9]="MAXICODE",P[P.PDF_417=10]="PDF_417",P[P.QR_CODE=11]="QR_CODE",P[P.RSS_14=12]="RSS_14",P[P.RSS_EXPANDED=13]="RSS_EXPANDED",P[P.UPC_A=14]="UPC_A",P[P.UPC_E=15]="UPC_E",P[P.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})($e||($e={}));var Be=$e,Ct;(function(P){P[P.OTHER=0]="OTHER",P[P.ORIENTATION=1]="ORIENTATION",P[P.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",P[P.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",P[P.ISSUE_NUMBER=4]="ISSUE_NUMBER",P[P.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",P[P.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",P[P.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",P[P.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",P[P.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",P[P.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Ct||(Ct={}));var mt=Ct;class Qt{constructor(i,o,l,f,d=-1,m=-1){this.rawBytes=i,this.text=o,this.byteSegments=l,this.ecLevel=f,this.structuredAppendSequenceNumber=d,this.structuredAppendParity=m,this.numBits=i==null?0:8*i.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(i){this.numBits=i}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(i){this.errorsCorrected=i}getErasures(){return this.erasures}setErasures(i){this.erasures=i}getOther(){return this.other}setOther(i){this.other=i}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class $r{exp(i){return this.expTable[i]}log(i){if(i===0)throw new I;return this.logTable[i]}static addOrSubtract(i,o){return i^o}}class Mn{constructor(i,o){if(o.length===0)throw new I;this.field=i;const l=o.length;if(l>1&&o[0]===0){let f=1;for(;f<l&&o[f]===0;)f++;f===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-f),Q.arraycopy(o,f,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);const o=this.coefficients;let l;if(i===1){l=0;for(let m=0,y=o.length;m!==y;m++){const b=o[m];l=$r.addOrSubtract(l,b)}return l}l=o[0];const f=o.length,d=this.field;for(let m=1;m<f;m++)l=$r.addOrSubtract(d.multiply(i,l),o[m]);return l}addOrSubtract(i){if(!this.field.equals(i.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero())return i;if(i.isZero())return this;let o=this.coefficients,l=i.coefficients;if(o.length>l.length){const m=o;o=l,l=m}let f=new Int32Array(l.length);const d=l.length-o.length;Q.arraycopy(l,0,f,0,d);for(let m=d;m<l.length;m++)f[m]=$r.addOrSubtract(o[m-d],l[m]);return new Mn(this.field,f)}multiply(i){if(!this.field.equals(i.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero()||i.isZero())return this.field.getZero();const o=this.coefficients,l=o.length,f=i.coefficients,d=f.length,m=new Int32Array(l+d-1),y=this.field;for(let b=0;b<l;b++){const S=o[b];for(let R=0;R<d;R++)m[b+R]=$r.addOrSubtract(m[b+R],y.multiply(S,f[R]))}return new Mn(y,m)}multiplyScalar(i){if(i===0)return this.field.getZero();if(i===1)return this;const o=this.coefficients.length,l=this.field,f=new Int32Array(o),d=this.coefficients;for(let m=0;m<o;m++)f[m]=l.multiply(d[m],i);return new Mn(l,f)}multiplyByMonomial(i,o){if(i<0)throw new I;if(o===0)return this.field.getZero();const l=this.coefficients,f=l.length,d=new Int32Array(f+i),m=this.field;for(let y=0;y<f;y++)d[y]=m.multiply(l[y],o);return new Mn(m,d)}divide(i){if(!this.field.equals(i.field))throw new I("GenericGFPolys do not have same GenericGF field");if(i.isZero())throw new I("Divide by 0");const o=this.field;let l=o.getZero(),f=this;const d=i.getCoefficient(i.getDegree()),m=o.inverse(d);for(;f.getDegree()>=i.getDegree()&&!f.isZero();){const y=f.getDegree()-i.getDegree(),b=o.multiply(f.getCoefficient(f.getDegree()),m),S=i.multiplyByMonomial(y,b),R=o.buildMonomial(y,b);l=l.addOrSubtract(R),f=f.addOrSubtract(S)}return[l,f]}toString(){let i="";for(let o=this.getDegree();o>=0;o--){let l=this.getCoefficient(o);if(l!==0){if(l<0?(i+=" - ",l=-l):i.length>0&&(i+=" + "),o===0||l!==1){const f=this.field.log(l);f===0?i+="1":f===1?i+="a":(i+="a^",i+=f)}o!==0&&(o===1?i+="x":(i+="x^",i+=o))}}return i}}class Ai extends E{}Ai.kind="ArithmeticException";class bt extends $r{constructor(i,o,l){super(),this.primitive=i,this.size=o,this.generatorBase=l;const f=new Int32Array(o);let d=1;for(let y=0;y<o;y++)f[y]=d,d*=2,d>=o&&(d^=i,d&=o-1);this.expTable=f;const m=new Int32Array(o);for(let y=0;y<o-1;y++)m[f[y]]=y;this.logTable=m,this.zero=new Mn(this,Int32Array.from([0])),this.one=new Mn(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,o){if(i<0)throw new I;if(o===0)return this.zero;const l=new Int32Array(i+1);return l[0]=o,new Mn(this,l)}inverse(i){if(i===0)throw new Ai;return this.expTable[this.size-this.logTable[i]-1]}multiply(i,o){return i===0||o===0?0:this.expTable[(this.logTable[i]+this.logTable[o])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+K.toHexString(this.primitive)+","+this.size+")"}equals(i){return i===this}}bt.AZTEC_DATA_12=new bt(4201,4096,1),bt.AZTEC_DATA_10=new bt(1033,1024,1),bt.AZTEC_DATA_6=new bt(67,64,1),bt.AZTEC_PARAM=new bt(19,16,1),bt.QR_CODE_FIELD_256=new bt(285,256,0),bt.DATA_MATRIX_FIELD_256=new bt(301,256,1),bt.AZTEC_DATA_8=bt.DATA_MATRIX_FIELD_256,bt.MAXICODE_FIELD_64=bt.AZTEC_DATA_6;class gr extends E{}gr.kind="ReedSolomonException";class Sr extends E{}Sr.kind="IllegalStateException";class ei{constructor(i){this.field=i}decode(i,o){const l=this.field,f=new Mn(l,i),d=new Int32Array(o);let m=!0;for(let q=0;q<o;q++){const te=f.evaluateAt(l.exp(q+l.getGeneratorBase()));d[d.length-1-q]=te,te!==0&&(m=!1)}if(m)return;const y=new Mn(l,d),b=this.runEuclideanAlgorithm(l.buildMonomial(o,1),y,o),S=b[0],R=b[1],L=this.findErrorLocations(S),k=this.findErrorMagnitudes(R,L);for(let q=0;q<L.length;q++){const te=i.length-1-l.log(L[q]);if(te<0)throw new gr("Bad error location");i[te]=bt.addOrSubtract(i[te],k[q])}}runEuclideanAlgorithm(i,o,l){if(i.getDegree()<o.getDegree()){const q=i;i=o,o=q}const f=this.field;let d=i,m=o,y=f.getZero(),b=f.getOne();for(;m.getDegree()>=(l/2|0);){let q=d,te=y;if(d=m,y=b,d.isZero())throw new gr("r_{i-1} was zero");m=q;let re=f.getZero();const he=d.getCoefficient(d.getDegree()),ye=f.inverse(he);for(;m.getDegree()>=d.getDegree()&&!m.isZero();){const Ue=m.getDegree()-d.getDegree(),ke=f.multiply(m.getCoefficient(m.getDegree()),ye);re=re.addOrSubtract(f.buildMonomial(Ue,ke)),m=m.addOrSubtract(d.multiplyByMonomial(Ue,ke))}if(b=re.multiply(y).addOrSubtract(te),m.getDegree()>=d.getDegree())throw new Sr("Division algorithm failed to reduce polynomial?")}const S=b.getCoefficient(0);if(S===0)throw new gr("sigmaTilde(0) was zero");const R=f.inverse(S),L=b.multiplyScalar(R),k=m.multiplyScalar(R);return[L,k]}findErrorLocations(i){const o=i.getDegree();if(o===1)return Int32Array.from([i.getCoefficient(1)]);const l=new Int32Array(o);let f=0;const d=this.field;for(let m=1;m<d.getSize()&&f<o;m++)i.evaluateAt(m)===0&&(l[f]=d.inverse(m),f++);if(f!==o)throw new gr("Error locator degree does not match number of roots");return l}findErrorMagnitudes(i,o){const l=o.length,f=new Int32Array(l),d=this.field;for(let m=0;m<l;m++){const y=d.inverse(o[m]);let b=1;for(let S=0;S<l;S++)if(m!==S){const R=d.multiply(o[S],y),L=(R&1)===0?R|1:R&-2;b=d.multiply(b,L)}f[m]=d.multiply(i.evaluateAt(y),d.inverse(b)),d.getGeneratorBase()!==0&&(f[m]=d.multiply(f[m],y))}return f}}var An;(function(P){P[P.UPPER=0]="UPPER",P[P.LOWER=1]="LOWER",P[P.MIXED=2]="MIXED",P[P.DIGIT=3]="DIGIT",P[P.PUNCT=4]="PUNCT",P[P.BINARY=5]="BINARY"})(An||(An={}));class Zt{decode(i){this.ddata=i;let o=i.getBits(),l=this.extractBits(o),f=this.correctBits(l),d=Zt.convertBoolArrayToByteArray(f),m=Zt.getEncodedData(f),y=new Qt(d,m,null,null);return y.setNumBits(f.length),y}static highLevelDecode(i){return this.getEncodedData(i)}static getEncodedData(i){let o=i.length,l=An.UPPER,f=An.UPPER,d="",m=0;for(;m<o;)if(f===An.BINARY){if(o-m<5)break;let y=Zt.readCode(i,m,5);if(m+=5,y===0){if(o-m<11)break;y=Zt.readCode(i,m,11)+31,m+=11}for(let b=0;b<y;b++){if(o-m<8){m=o;break}const S=Zt.readCode(i,m,8);d+=$.castAsNonUtf8Char(S),m+=8}f=l}else{let y=f===An.DIGIT?4:5;if(o-m<y)break;let b=Zt.readCode(i,m,y);m+=y;let S=Zt.getCharacter(f,b);S.startsWith("CTRL_")?(l=f,f=Zt.getTable(S.charAt(5)),S.charAt(6)==="L"&&(l=f)):(d+=S,f=l)}return d}static getTable(i){switch(i){case"L":return An.LOWER;case"P":return An.PUNCT;case"M":return An.MIXED;case"D":return An.DIGIT;case"B":return An.BINARY;case"U":default:return An.UPPER}}static getCharacter(i,o){switch(i){case An.UPPER:return Zt.UPPER_TABLE[o];case An.LOWER:return Zt.LOWER_TABLE[o];case An.MIXED:return Zt.MIXED_TABLE[o];case An.PUNCT:return Zt.PUNCT_TABLE[o];case An.DIGIT:return Zt.DIGIT_TABLE[o];default:throw new Sr("Bad table")}}correctBits(i){let o,l;this.ddata.getNbLayers()<=2?(l=6,o=bt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,o=bt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,o=bt.AZTEC_DATA_10):(l=12,o=bt.AZTEC_DATA_12);let f=this.ddata.getNbDatablocks(),d=i.length/l;if(d<f)throw new F;let m=i.length%l,y=new Int32Array(d);for(let k=0;k<d;k++,m+=l)y[k]=Zt.readCode(i,m,l);try{new ei(o).decode(y,d-f)}catch(k){throw new F(k)}let b=(1<<l)-1,S=0;for(let k=0;k<f;k++){let q=y[k];if(q===0||q===b)throw new F;(q===1||q===b-1)&&S++}let R=new Array(f*l-S),L=0;for(let k=0;k<f;k++){let q=y[k];if(q===1||q===b-1)R.fill(q>1,L,L+l-1),L+=l-1;else for(let te=l-1;te>=0;--te)R[L++]=(q&1<<te)!==0}return R}extractBits(i){let o=this.ddata.isCompact(),l=this.ddata.getNbLayers(),f=(o?11:14)+l*4,d=new Int32Array(f),m=new Array(this.totalBitsInLayer(l,o));if(o)for(let y=0;y<d.length;y++)d[y]=y;else{let y=f+1+2*K.truncDivision(K.truncDivision(f,2)-1,15),b=f/2,S=K.truncDivision(y,2);for(let R=0;R<b;R++){let L=R+K.truncDivision(R,15);d[b-R-1]=S-L-1,d[b+R]=S+L+1}}for(let y=0,b=0;y<l;y++){let S=(l-y)*4+(o?9:12),R=y*2,L=f-1-R;for(let k=0;k<S;k++){let q=k*2;for(let te=0;te<2;te++)m[b+q+te]=i.get(d[R+te],d[R+k]),m[b+2*S+q+te]=i.get(d[R+k],d[L-te]),m[b+4*S+q+te]=i.get(d[L-te],d[L-k]),m[b+6*S+q+te]=i.get(d[L-k],d[R+te])}b+=S*8}return m}static readCode(i,o,l){let f=0;for(let d=o;d<o+l;d++)f<<=1,i[d]&&(f|=1);return f}static readByte(i,o){let l=i.length-o;return l>=8?Zt.readCode(i,o,8):Zt.readCode(i,o,l)<<8-l}static convertBoolArrayToByteArray(i){let o=new Uint8Array((i.length+7)/8);for(let l=0;l<o.length;l++)o[l]=Zt.readByte(i,8*l);return o}totalBitsInLayer(i,o){return((o?88:112)+16*i)*i}}Zt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Zt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Zt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Zt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Zt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class et{constructor(){}static round(i){return i===NaN?0:i<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:i>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:i+(i<0?-.5:.5)|0}static distance(i,o,l,f){const d=i-l,m=o-f;return Math.sqrt(d*d+m*m)}static sum(i){let o=0;for(let l=0,f=i.length;l!==f;l++){const d=i[l];o+=d}return o}}class pn{static floatToIntBits(i){return i}}pn.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ze{constructor(i,o){this.x=i,this.y=o}getX(){return this.x}getY(){return this.y}equals(i){if(i instanceof ze){const o=i;return this.x===o.x&&this.y===o.y}return!1}hashCode(){return 31*pn.floatToIntBits(this.x)+pn.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(i){const o=this.distance(i[0],i[1]),l=this.distance(i[1],i[2]),f=this.distance(i[0],i[2]);let d,m,y;if(l>=o&&l>=f?(m=i[0],d=i[1],y=i[2]):f>=l&&f>=o?(m=i[1],d=i[0],y=i[2]):(m=i[2],d=i[0],y=i[1]),this.crossProductZ(d,m,y)<0){const b=d;d=y,y=b}i[0]=d,i[1]=m,i[2]=y}static distance(i,o){return et.distance(i.x,i.y,o.x,o.y)}static crossProductZ(i,o,l){const f=o.x,d=o.y;return(l.x-f)*(i.y-d)-(l.y-d)*(i.x-f)}}class is{constructor(i,o){this.bits=i,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class ss extends is{constructor(i,o,l,f,d){super(i,o),this.compact=l,this.nbDatablocks=f,this.nbLayers=d}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class xn{constructor(i,o,l,f){this.image=i,this.height=i.getHeight(),this.width=i.getWidth(),o==null&&(o=xn.INIT_SIZE),l==null&&(l=i.getWidth()/2|0),f==null&&(f=i.getHeight()/2|0);const d=o/2|0;if(this.leftInit=l-d,this.rightInit=l+d,this.upInit=f-d,this.downInit=f+d,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new fe}detect(){let i=this.leftInit,o=this.rightInit,l=this.upInit,f=this.downInit,d=!1,m=!0,y=!1,b=!1,S=!1,R=!1,L=!1;const k=this.width,q=this.height;for(;m;){m=!1;let te=!0;for(;(te||!b)&&o<k;)te=this.containsBlackPoint(l,f,o,!1),te?(o++,m=!0,b=!0):b||o++;if(o>=k){d=!0;break}let re=!0;for(;(re||!S)&&f<q;)re=this.containsBlackPoint(i,o,f,!0),re?(f++,m=!0,S=!0):S||f++;if(f>=q){d=!0;break}let he=!0;for(;(he||!R)&&i>=0;)he=this.containsBlackPoint(l,f,i,!1),he?(i--,m=!0,R=!0):R||i--;if(i<0){d=!0;break}let ye=!0;for(;(ye||!L)&&l>=0;)ye=this.containsBlackPoint(i,o,l,!0),ye?(l--,m=!0,L=!0):L||l--;if(l<0){d=!0;break}m&&(y=!0)}if(!d&&y){const te=o-i;let re=null;for(let ke=1;re===null&&ke<te;ke++)re=this.getBlackPointOnSegment(i,f-ke,i+ke,f);if(re==null)throw new fe;let he=null;for(let ke=1;he===null&&ke<te;ke++)he=this.getBlackPointOnSegment(i,l+ke,i+ke,l);if(he==null)throw new fe;let ye=null;for(let ke=1;ye===null&&ke<te;ke++)ye=this.getBlackPointOnSegment(o,l+ke,o-ke,l);if(ye==null)throw new fe;let Ue=null;for(let ke=1;Ue===null&&ke<te;ke++)Ue=this.getBlackPointOnSegment(o,f-ke,o-ke,f);if(Ue==null)throw new fe;return this.centerEdges(Ue,re,ye,he)}else throw new fe}getBlackPointOnSegment(i,o,l,f){const d=et.round(et.distance(i,o,l,f)),m=(l-i)/d,y=(f-o)/d,b=this.image;for(let S=0;S<d;S++){const R=et.round(i+S*m),L=et.round(o+S*y);if(b.get(R,L))return new ze(R,L)}return null}centerEdges(i,o,l,f){const d=i.getX(),m=i.getY(),y=o.getX(),b=o.getY(),S=l.getX(),R=l.getY(),L=f.getX(),k=f.getY(),q=xn.CORR;return d<this.width/2?[new ze(L-q,k+q),new ze(y+q,b+q),new ze(S-q,R-q),new ze(d+q,m-q)]:[new ze(L+q,k+q),new ze(y+q,b-q),new ze(S-q,R+q),new ze(d-q,m-q)]}containsBlackPoint(i,o,l,f){const d=this.image;if(f){for(let m=i;m<=o;m++)if(d.get(m,l))return!0}else for(let m=i;m<=o;m++)if(d.get(l,m))return!0;return!1}}xn.INIT_SIZE=10,xn.CORR=1;class ti{static checkAndNudgePoints(i,o){const l=i.getWidth(),f=i.getHeight();let d=!0;for(let m=0;m<o.length&&d;m+=2){const y=Math.floor(o[m]),b=Math.floor(o[m+1]);if(y<-1||y>l||b<-1||b>f)throw new fe;d=!1,y===-1?(o[m]=0,d=!0):y===l&&(o[m]=l-1,d=!0),b===-1?(o[m+1]=0,d=!0):b===f&&(o[m+1]=f-1,d=!0)}d=!0;for(let m=o.length-2;m>=0&&d;m-=2){const y=Math.floor(o[m]),b=Math.floor(o[m+1]);if(y<-1||y>l||b<-1||b>f)throw new fe;d=!1,y===-1?(o[m]=0,d=!0):y===l&&(o[m]=l-1,d=!0),b===-1?(o[m+1]=0,d=!0):b===f&&(o[m+1]=f-1,d=!0)}}}class mr{constructor(i,o,l,f,d,m,y,b,S){this.a11=i,this.a21=o,this.a31=l,this.a12=f,this.a22=d,this.a32=m,this.a13=y,this.a23=b,this.a33=S}static quadrilateralToQuadrilateral(i,o,l,f,d,m,y,b,S,R,L,k,q,te,re,he){const ye=mr.quadrilateralToSquare(i,o,l,f,d,m,y,b);return mr.squareToQuadrilateral(S,R,L,k,q,te,re,he).times(ye)}transformPoints(i){const o=i.length,l=this.a11,f=this.a12,d=this.a13,m=this.a21,y=this.a22,b=this.a23,S=this.a31,R=this.a32,L=this.a33;for(let k=0;k<o;k+=2){const q=i[k],te=i[k+1],re=d*q+b*te+L;i[k]=(l*q+m*te+S)/re,i[k+1]=(f*q+y*te+R)/re}}transformPointsWithValues(i,o){const l=this.a11,f=this.a12,d=this.a13,m=this.a21,y=this.a22,b=this.a23,S=this.a31,R=this.a32,L=this.a33,k=i.length;for(let q=0;q<k;q++){const te=i[q],re=o[q],he=d*te+b*re+L;i[q]=(l*te+m*re+S)/he,o[q]=(f*te+y*re+R)/he}}static squareToQuadrilateral(i,o,l,f,d,m,y,b){const S=i-l+d-y,R=o-f+m-b;if(S===0&&R===0)return new mr(l-i,d-l,i,f-o,m-f,o,0,0,1);{const L=l-d,k=y-d,q=f-m,te=b-m,re=L*te-k*q,he=(S*te-k*R)/re,ye=(L*R-S*q)/re;return new mr(l-i+he*l,y-i+ye*y,i,f-o+he*f,b-o+ye*b,o,he,ye,1)}}static quadrilateralToSquare(i,o,l,f,d,m,y,b){return mr.squareToQuadrilateral(i,o,l,f,d,m,y,b).buildAdjoint()}buildAdjoint(){return new mr(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(i){return new mr(this.a11*i.a11+this.a21*i.a12+this.a31*i.a13,this.a11*i.a21+this.a21*i.a22+this.a31*i.a23,this.a11*i.a31+this.a21*i.a32+this.a31*i.a33,this.a12*i.a11+this.a22*i.a12+this.a32*i.a13,this.a12*i.a21+this.a22*i.a22+this.a32*i.a23,this.a12*i.a31+this.a22*i.a32+this.a32*i.a33,this.a13*i.a11+this.a23*i.a12+this.a33*i.a13,this.a13*i.a21+this.a23*i.a22+this.a33*i.a23,this.a13*i.a31+this.a23*i.a32+this.a33*i.a33)}}class as extends ti{sampleGrid(i,o,l,f,d,m,y,b,S,R,L,k,q,te,re,he,ye,Ue,ke){const Oe=mr.quadrilateralToQuadrilateral(f,d,m,y,b,S,R,L,k,q,te,re,he,ye,Ue,ke);return this.sampleGridWithTransform(i,o,l,Oe)}sampleGridWithTransform(i,o,l,f){if(o<=0||l<=0)throw new fe;const d=new Qe(o,l),m=new Float32Array(2*o);for(let y=0;y<l;y++){const b=m.length,S=y+.5;for(let R=0;R<b;R+=2)m[R]=R/2+.5,m[R+1]=S;f.transformPoints(m),ti.checkAndNudgePoints(i,m);try{for(let R=0;R<b;R+=2)i.get(Math.floor(m[R]),Math.floor(m[R+1]))&&d.set(R/2,y)}catch{throw new fe}}return d}}class pr{static setGridSampler(i){pr.gridSampler=i}static getInstance(){return pr.gridSampler}}pr.gridSampler=new as;class Pn{constructor(i,o){this.x=i,this.y=o}toResultPoint(){return new ze(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Ls{constructor(i){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=i}detect(){return this.detectMirror(!1)}detectMirror(i){let o=this.getMatrixCenter(),l=this.getBullsEyeCorners(o);if(i){let m=l[0];l[0]=l[2],l[2]=m}this.extractParameters(l);let f=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),d=this.getMatrixCornerPoints(l);return new ss(f,d,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(i){if(!this.isValidPoint(i[0])||!this.isValidPoint(i[1])||!this.isValidPoint(i[2])||!this.isValidPoint(i[3]))throw new fe;let o=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(i[0],i[1],o),this.sampleLine(i[1],i[2],o),this.sampleLine(i[2],i[3],o),this.sampleLine(i[3],i[0],o)]);this.shift=this.getRotation(l,o);let f=0;for(let m=0;m<4;m++){let y=l[(this.shift+m)%4];this.compact?(f<<=7,f+=y>>1&127):(f<<=10,f+=(y>>2&992)+(y>>1&31))}let d=this.getCorrectedParameterData(f,this.compact);this.compact?(this.nbLayers=(d>>6)+1,this.nbDataBlocks=(d&63)+1):(this.nbLayers=(d>>11)+1,this.nbDataBlocks=(d&2047)+1)}getRotation(i,o){let l=0;i.forEach((f,d,m)=>{let y=(f>>o-2<<1)+(f&1);l=(l<<3)+y}),l=((l&1)<<11)+(l>>1);for(let f=0;f<4;f++)if(K.bitCount(l^this.EXPECTED_CORNER_BITS[f])<=2)return f;throw new fe}getCorrectedParameterData(i,o){let l,f;o?(l=7,f=2):(l=10,f=4);let d=l-f,m=new Int32Array(l);for(let b=l-1;b>=0;--b)m[b]=i&15,i>>=4;try{new ei(bt.AZTEC_PARAM).decode(m,d)}catch{throw new fe}let y=0;for(let b=0;b<f;b++)y=(y<<4)+m[b];return y}getBullsEyeCorners(i){let o=i,l=i,f=i,d=i,m=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let L=this.getFirstDifferent(o,m,1,-1),k=this.getFirstDifferent(l,m,1,1),q=this.getFirstDifferent(f,m,-1,1),te=this.getFirstDifferent(d,m,-1,-1);if(this.nbCenterLayers>2){let re=this.distancePoint(te,L)*this.nbCenterLayers/(this.distancePoint(d,o)*(this.nbCenterLayers+2));if(re<.75||re>1.25||!this.isWhiteOrBlackRectangle(L,k,q,te))break}o=L,l=k,f=q,d=te,m=!m}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new fe;this.compact=this.nbCenterLayers===5;let y=new ze(o.getX()+.5,o.getY()-.5),b=new ze(l.getX()+.5,l.getY()+.5),S=new ze(f.getX()-.5,f.getY()+.5),R=new ze(d.getX()-.5,d.getY()-.5);return this.expandSquare([y,b,S,R],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let i,o,l,f;try{let y=new xn(this.image).detect();i=y[0],o=y[1],l=y[2],f=y[3]}catch{let b=this.image.getWidth()/2,S=this.image.getHeight()/2;i=this.getFirstDifferent(new Pn(b+7,S-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new Pn(b+7,S+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Pn(b-7,S+7),!1,-1,1).toResultPoint(),f=this.getFirstDifferent(new Pn(b-7,S-7),!1,-1,-1).toResultPoint()}let d=et.round((i.getX()+f.getX()+o.getX()+l.getX())/4),m=et.round((i.getY()+f.getY()+o.getY()+l.getY())/4);try{let y=new xn(this.image,15,d,m).detect();i=y[0],o=y[1],l=y[2],f=y[3]}catch{i=this.getFirstDifferent(new Pn(d+7,m-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new Pn(d+7,m+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Pn(d-7,m+7),!1,-1,1).toResultPoint(),f=this.getFirstDifferent(new Pn(d-7,m-7),!1,-1,-1).toResultPoint()}return d=et.round((i.getX()+f.getX()+o.getX()+l.getX())/4),m=et.round((i.getY()+f.getY()+o.getY()+l.getY())/4),new Pn(d,m)}getMatrixCornerPoints(i){return this.expandSquare(i,2*this.nbCenterLayers,this.getDimension())}sampleGrid(i,o,l,f,d){let m=pr.getInstance(),y=this.getDimension(),b=y/2-this.nbCenterLayers,S=y/2+this.nbCenterLayers;return m.sampleGrid(i,y,y,b,b,S,b,S,S,b,S,o.getX(),o.getY(),l.getX(),l.getY(),f.getX(),f.getY(),d.getX(),d.getY())}sampleLine(i,o,l){let f=0,d=this.distanceResultPoint(i,o),m=d/l,y=i.getX(),b=i.getY(),S=m*(o.getX()-i.getX())/d,R=m*(o.getY()-i.getY())/d;for(let L=0;L<l;L++)this.image.get(et.round(y+L*S),et.round(b+L*R))&&(f|=1<<l-L-1);return f}isWhiteOrBlackRectangle(i,o,l,f){let d=3;i=new Pn(i.getX()-d,i.getY()+d),o=new Pn(o.getX()-d,o.getY()-d),l=new Pn(l.getX()+d,l.getY()-d),f=new Pn(f.getX()+d,f.getY()+d);let m=this.getColor(f,i);if(m===0)return!1;let y=this.getColor(i,o);return y!==m||(y=this.getColor(o,l),y!==m)?!1:(y=this.getColor(l,f),y===m)}getColor(i,o){let l=this.distancePoint(i,o),f=(o.getX()-i.getX())/l,d=(o.getY()-i.getY())/l,m=0,y=i.getX(),b=i.getY(),S=this.image.get(i.getX(),i.getY()),R=Math.ceil(l);for(let k=0;k<R;k++)y+=f,b+=d,this.image.get(et.round(y),et.round(b))!==S&&m++;let L=m/l;return L>.1&&L<.9?0:L<=.1===S?1:-1}getFirstDifferent(i,o,l,f){let d=i.getX()+l,m=i.getY()+f;for(;this.isValid(d,m)&&this.image.get(d,m)===o;)d+=l,m+=f;for(d-=l,m-=f;this.isValid(d,m)&&this.image.get(d,m)===o;)d+=l;for(d-=l;this.isValid(d,m)&&this.image.get(d,m)===o;)m+=f;return m-=f,new Pn(d,m)}expandSquare(i,o,l){let f=l/(2*o),d=i[0].getX()-i[2].getX(),m=i[0].getY()-i[2].getY(),y=(i[0].getX()+i[2].getX())/2,b=(i[0].getY()+i[2].getY())/2,S=new ze(y+f*d,b+f*m),R=new ze(y-f*d,b-f*m);d=i[1].getX()-i[3].getX(),m=i[1].getY()-i[3].getY(),y=(i[1].getX()+i[3].getX())/2,b=(i[1].getY()+i[3].getY())/2;let L=new ze(y+f*d,b+f*m),k=new ze(y-f*d,b-f*m);return[S,L,R,k]}isValid(i,o){return i>=0&&i<this.image.getWidth()&&o>0&&o<this.image.getHeight()}isValidPoint(i){let o=et.round(i.getX()),l=et.round(i.getY());return this.isValid(o,l)}distancePoint(i,o){return et.distance(i.getX(),i.getY(),o.getX(),o.getY())}distanceResultPoint(i,o){return et.distance(i.getX(),i.getY(),o.getX(),o.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(K.truncDivision(this.nbLayers-4,8)+1)+15}}class vi{decode(i,o=null){let l=null,f=new Ls(i.getBlackMatrix()),d=null,m=null;try{let R=f.detectMirror(!1);d=R.getPoints(),this.reportFoundResultPoints(o,d),m=new Zt().decode(R)}catch(R){l=R}if(m==null)try{let R=f.detectMirror(!0);d=R.getPoints(),this.reportFoundResultPoints(o,d),m=new Zt().decode(R)}catch(R){throw l??R}let y=new Fe(m.getText(),m.getRawBytes(),m.getNumBits(),d,Be.AZTEC,Q.currentTimeMillis()),b=m.getByteSegments();b!=null&&y.putMetadata(mt.BYTE_SEGMENTS,b);let S=m.getECLevel();return S!=null&&y.putMetadata(mt.ERROR_CORRECTION_LEVEL,S),y}reportFoundResultPoints(i,o){if(i!=null){let l=i.get(De.NEED_RESULT_POINT_CALLBACK);l!=null&&o.forEach((f,d,m)=>{l.foundPossibleResultPoint(f)})}}reset(){}}class ia extends je{constructor(i=500){super(new vi,i)}}class kt{decode(i,o){try{return this.doDecode(i,o)}catch{if(o&&o.get(De.TRY_HARDER)===!0&&i.isRotateSupported()){const d=i.rotateCounterClockwise(),m=this.doDecode(d,o),y=m.getResultMetadata();let b=270;y!==null&&y.get(mt.ORIENTATION)===!0&&(b=b+y.get(mt.ORIENTATION)%360),m.putMetadata(mt.ORIENTATION,b);const S=m.getResultPoints();if(S!==null){const R=d.getHeight();for(let L=0;L<S.length;L++)S[L]=new ze(R-S[L].getY()-1,S[L].getX())}return m}else throw new fe}}reset(){}doDecode(i,o){const l=i.getWidth(),f=i.getHeight();let d=new ce(l);const m=o&&o.get(De.TRY_HARDER)===!0,y=Math.max(1,f>>(m?8:5));let b;m?b=f:b=15;const S=Math.trunc(f/2);for(let R=0;R<b;R++){const L=Math.trunc((R+1)/2),k=(R&1)===0,q=S+y*(k?L:-L);if(q<0||q>=f)break;try{d=i.getBlackRow(q,d)}catch{continue}for(let te=0;te<2;te++){if(te===1&&(d.reverse(),o&&o.get(De.NEED_RESULT_POINT_CALLBACK)===!0)){const re=new Map;o.forEach((he,ye)=>re.set(ye,he)),re.delete(De.NEED_RESULT_POINT_CALLBACK),o=re}try{const re=this.decodeRow(q,d,o);if(te===1){re.putMetadata(mt.ORIENTATION,180);const he=re.getResultPoints();he!==null&&(he[0]=new ze(l-he[0].getX()-1,he[0].getY()),he[1]=new ze(l-he[1].getX()-1,he[1].getY()))}return re}catch{}}}throw new fe}static recordPattern(i,o,l){const f=l.length;for(let S=0;S<f;S++)l[S]=0;const d=i.getSize();if(o>=d)throw new fe;let m=!i.get(o),y=0,b=o;for(;b<d;){if(i.get(b)!==m)l[y]++;else{if(++y===f)break;l[y]=1,m=!m}b++}if(!(y===f||y===f-1&&b===d))throw new fe}static recordPatternInReverse(i,o,l){let f=l.length,d=i.get(o);for(;o>0&&f>=0;)i.get(--o)!==d&&(f--,d=!d);if(f>=0)throw new fe;kt.recordPattern(i,o+1,l)}static patternMatchVariance(i,o,l){const f=i.length;let d=0,m=0;for(let S=0;S<f;S++)d+=i[S],m+=o[S];if(d<m)return Number.POSITIVE_INFINITY;const y=d/m;l*=y;let b=0;for(let S=0;S<f;S++){const R=i[S],L=o[S]*y,k=R>L?R-L:L-R;if(k>l)return Number.POSITIVE_INFINITY;b+=k}return b/d}}class Le extends kt{static findStartPattern(i){const o=i.getSize(),l=i.getNextSet(0);let f=0,d=Int32Array.from([0,0,0,0,0,0]),m=l,y=!1;const b=6;for(let S=l;S<o;S++)if(i.get(S)!==y)d[f]++;else{if(f===b-1){let R=Le.MAX_AVG_VARIANCE,L=-1;for(let k=Le.CODE_START_A;k<=Le.CODE_START_C;k++){const q=kt.patternMatchVariance(d,Le.CODE_PATTERNS[k],Le.MAX_INDIVIDUAL_VARIANCE);q<R&&(R=q,L=k)}if(L>=0&&i.isRange(Math.max(0,m-(S-m)/2),m,!1))return Int32Array.from([m,S,L]);m+=d[0]+d[1],d=d.slice(2,d.length-1),d[f-1]=0,d[f]=0,f--}else f++;d[f]=1,y=!y}throw new fe}static decodeCode(i,o,l){kt.recordPattern(i,l,o);let f=Le.MAX_AVG_VARIANCE,d=-1;for(let m=0;m<Le.CODE_PATTERNS.length;m++){const y=Le.CODE_PATTERNS[m],b=this.patternMatchVariance(o,y,Le.MAX_INDIVIDUAL_VARIANCE);b<f&&(f=b,d=m)}if(d>=0)return d;throw new fe}decodeRow(i,o,l){const f=l&&l.get(De.ASSUME_GS1)===!0,d=Le.findStartPattern(o),m=d[2];let y=0;const b=new Uint8Array(20);b[y++]=m;let S;switch(m){case Le.CODE_START_A:S=Le.CODE_CODE_A;break;case Le.CODE_START_B:S=Le.CODE_CODE_B;break;case Le.CODE_START_C:S=Le.CODE_CODE_C;break;default:throw new F}let R=!1,L=!1,k="",q=d[0],te=d[1];const re=Int32Array.from([0,0,0,0,0,0]);let he=0,ye=0,Ue=m,ke=0,Oe=!0,Ot=!1,Et=!1;for(;!R;){const ya=L;switch(L=!1,he=ye,ye=Le.decodeCode(o,re,te),b[y++]=ye,ye!==Le.CODE_STOP&&(Oe=!0),ye!==Le.CODE_STOP&&(ke++,Ue+=ke*ye),q=te,te+=re.reduce((Th,Kc)=>Th+Kc,0),ye){case Le.CODE_START_A:case Le.CODE_START_B:case Le.CODE_START_C:throw new F}switch(S){case Le.CODE_CODE_A:if(ye<64)Et===Ot?k+=String.fromCharCode(32+ye):k+=String.fromCharCode(32+ye+128),Et=!1;else if(ye<96)Et===Ot?k+=String.fromCharCode(ye-64):k+=String.fromCharCode(ye+64),Et=!1;else switch(ye!==Le.CODE_STOP&&(Oe=!1),ye){case Le.CODE_FNC_1:f&&(k.length===0?k+="]C1":k+="");break;case Le.CODE_FNC_2:case Le.CODE_FNC_3:break;case Le.CODE_FNC_4_A:!Ot&&Et?(Ot=!0,Et=!1):Ot&&Et?(Ot=!1,Et=!1):Et=!0;break;case Le.CODE_SHIFT:L=!0,S=Le.CODE_CODE_B;break;case Le.CODE_CODE_B:S=Le.CODE_CODE_B;break;case Le.CODE_CODE_C:S=Le.CODE_CODE_C;break;case Le.CODE_STOP:R=!0;break}break;case Le.CODE_CODE_B:if(ye<96)Et===Ot?k+=String.fromCharCode(32+ye):k+=String.fromCharCode(32+ye+128),Et=!1;else switch(ye!==Le.CODE_STOP&&(Oe=!1),ye){case Le.CODE_FNC_1:f&&(k.length===0?k+="]C1":k+="");break;case Le.CODE_FNC_2:case Le.CODE_FNC_3:break;case Le.CODE_FNC_4_B:!Ot&&Et?(Ot=!0,Et=!1):Ot&&Et?(Ot=!1,Et=!1):Et=!0;break;case Le.CODE_SHIFT:L=!0,S=Le.CODE_CODE_A;break;case Le.CODE_CODE_A:S=Le.CODE_CODE_A;break;case Le.CODE_CODE_C:S=Le.CODE_CODE_C;break;case Le.CODE_STOP:R=!0;break}break;case Le.CODE_CODE_C:if(ye<100)ye<10&&(k+="0"),k+=ye;else switch(ye!==Le.CODE_STOP&&(Oe=!1),ye){case Le.CODE_FNC_1:f&&(k.length===0?k+="]C1":k+="");break;case Le.CODE_CODE_A:S=Le.CODE_CODE_A;break;case Le.CODE_CODE_B:S=Le.CODE_CODE_B;break;case Le.CODE_STOP:R=!0;break}break}ya&&(S=S===Le.CODE_CODE_A?Le.CODE_CODE_B:Le.CODE_CODE_A)}const $n=te-q;if(te=o.getNextUnset(te),!o.isRange(te,Math.min(o.getSize(),te+(te-q)/2),!1))throw new fe;if(Ue-=ke*he,Ue%103!==he)throw new B;const Ri=k.length;if(Ri===0)throw new fe;Ri>0&&Oe&&(S===Le.CODE_CODE_C?k=k.substring(0,Ri-2):k=k.substring(0,Ri-1));const Gr=(d[1]+d[0])/2,fn=q+$n/2,Or=b.length,xi=new Uint8Array(Or);for(let ya=0;ya<Or;ya++)xi[ya]=b[ya];const no=[new ze(Gr,i),new ze(fn,i)];return new Fe(k,xi,0,no,Be.CODE_128,new Date().getTime())}}Le.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Le.MAX_AVG_VARIANCE=.25,Le.MAX_INDIVIDUAL_VARIANCE=.7,Le.CODE_SHIFT=98,Le.CODE_CODE_C=99,Le.CODE_CODE_B=100,Le.CODE_CODE_A=101,Le.CODE_FNC_1=102,Le.CODE_FNC_2=97,Le.CODE_FNC_3=96,Le.CODE_FNC_4_A=101,Le.CODE_FNC_4_B=100,Le.CODE_START_A=103,Le.CODE_START_B=104,Le.CODE_START_C=105,Le.CODE_STOP=106;class zt extends kt{constructor(i=!1,o=!1){super(),this.usingCheckDigit=i,this.extendedMode=o,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(i,o,l){let f=this.counters;f.fill(0),this.decodeRowResult="";let d=zt.findAsteriskPattern(o,f),m=o.getNextSet(d[1]),y=o.getSize(),b,S;do{zt.recordPattern(o,m,f);let re=zt.toNarrowWidePattern(f);if(re<0)throw new fe;b=zt.patternToChar(re),this.decodeRowResult+=b,S=m;for(let he of f)m+=he;m=o.getNextSet(m)}while(b!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let R=0;for(let re of f)R+=re;let L=m-S-R;if(m!==y&&L*2<R)throw new fe;if(this.usingCheckDigit){let re=this.decodeRowResult.length-1,he=0;for(let ye=0;ye<re;ye++)he+=zt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ye));if(this.decodeRowResult.charAt(re)!==zt.ALPHABET_STRING.charAt(he%43))throw new B;this.decodeRowResult=this.decodeRowResult.substring(0,re)}if(this.decodeRowResult.length===0)throw new fe;let k;this.extendedMode?k=zt.decodeExtended(this.decodeRowResult):k=this.decodeRowResult;let q=(d[1]+d[0])/2,te=S+R/2;return new Fe(k,null,0,[new ze(q,i),new ze(te,i)],Be.CODE_39,new Date().getTime())}static findAsteriskPattern(i,o){let l=i.getSize(),f=i.getNextSet(0),d=0,m=f,y=!1,b=o.length;for(let S=f;S<l;S++)if(i.get(S)!==y)o[d]++;else{if(d===b-1){if(this.toNarrowWidePattern(o)===zt.ASTERISK_ENCODING&&i.isRange(Math.max(0,m-Math.floor((S-m)/2)),m,!1))return[m,S];m+=o[0]+o[1],o.copyWithin(0,2,2+d-1),o[d-1]=0,o[d]=0,d--}else d++;o[d]=1,y=!y}throw new fe}static toNarrowWidePattern(i){let o=i.length,l=0,f;do{let d=2147483647;for(let b of i)b<d&&b>l&&(d=b);l=d,f=0;let m=0,y=0;for(let b=0;b<o;b++){let S=i[b];S>l&&(y|=1<<o-1-b,f++,m+=S)}if(f===3){for(let b=0;b<o&&f>0;b++){let S=i[b];if(S>l&&(f--,S*2>=m))return-1}return y}}while(f>3);return-1}static patternToChar(i){for(let o=0;o<zt.CHARACTER_ENCODINGS.length;o++)if(zt.CHARACTER_ENCODINGS[o]===i)return zt.ALPHABET_STRING.charAt(o);if(i===zt.ASTERISK_ENCODING)return"*";throw new fe}static decodeExtended(i){let o=i.length,l="";for(let f=0;f<o;f++){let d=i.charAt(f);if(d==="+"||d==="$"||d==="%"||d==="/"){let m=i.charAt(f+1),y="\0";switch(d){case"+":if(m>="A"&&m<="Z")y=String.fromCharCode(m.charCodeAt(0)+32);else throw new F;break;case"$":if(m>="A"&&m<="Z")y=String.fromCharCode(m.charCodeAt(0)-64);else throw new F;break;case"%":if(m>="A"&&m<="E")y=String.fromCharCode(m.charCodeAt(0)-38);else if(m>="F"&&m<="J")y=String.fromCharCode(m.charCodeAt(0)-11);else if(m>="K"&&m<="O")y=String.fromCharCode(m.charCodeAt(0)+16);else if(m>="P"&&m<="T")y=String.fromCharCode(m.charCodeAt(0)+43);else if(m==="U")y="\0";else if(m==="V")y="@";else if(m==="W")y="`";else if(m==="X"||m==="Y"||m==="Z")y="";else throw new F;break;case"/":if(m>="A"&&m<="O")y=String.fromCharCode(m.charCodeAt(0)-32);else if(m==="Z")y=":";else throw new F;break}l+=y,f++}else l+=d}return l}}zt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",zt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],zt.ASTERISK_ENCODING=148;class ot extends kt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(i,o,l){let f=this.decodeStart(o),d=this.decodeEnd(o),m=new G;ot.decodeMiddle(o,f[1],d[0],m);let y=m.toString(),b=null;l!=null&&(b=l.get(De.ALLOWED_LENGTHS)),b==null&&(b=ot.DEFAULT_ALLOWED_LENGTHS);let S=y.length,R=!1,L=0;for(let te of b){if(S===te){R=!0;break}te>L&&(L=te)}if(!R&&S>L&&(R=!0),!R)throw new F;const k=[new ze(f[1],i),new ze(d[0],i)];return new Fe(y,null,0,k,Be.ITF,new Date().getTime())}static decodeMiddle(i,o,l,f){let d=new Int32Array(10),m=new Int32Array(5),y=new Int32Array(5);for(d.fill(0),m.fill(0),y.fill(0);o<l;){kt.recordPattern(i,o,d);for(let S=0;S<5;S++){let R=2*S;m[S]=d[R],y[S]=d[R+1]}let b=ot.decodeDigit(m);f.append(b.toString()),b=this.decodeDigit(y),f.append(b.toString()),d.forEach(function(S){o+=S})}}decodeStart(i){let o=ot.skipWhiteSpace(i),l=ot.findGuardPattern(i,o,ot.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(i,l[0]),l}validateQuietZone(i,o){let l=this.narrowLineWidth*10;l=l<o?l:o;for(let f=o-1;l>0&&f>=0&&!i.get(f);f--)l--;if(l!==0)throw new fe}static skipWhiteSpace(i){const o=i.getSize(),l=i.getNextSet(0);if(l===o)throw new fe;return l}decodeEnd(i){i.reverse();try{let o=ot.skipWhiteSpace(i),l;try{l=ot.findGuardPattern(i,o,ot.END_PATTERN_REVERSED[0])}catch(d){d instanceof fe&&(l=ot.findGuardPattern(i,o,ot.END_PATTERN_REVERSED[1]))}this.validateQuietZone(i,l[0]);let f=l[0];return l[0]=i.getSize()-l[1],l[1]=i.getSize()-f,l}finally{i.reverse()}}static findGuardPattern(i,o,l){let f=l.length,d=new Int32Array(f),m=i.getSize(),y=!1,b=0,S=o;d.fill(0);for(let R=o;R<m;R++)if(i.get(R)!==y)d[b]++;else{if(b===f-1){if(kt.patternMatchVariance(d,l,ot.MAX_INDIVIDUAL_VARIANCE)<ot.MAX_AVG_VARIANCE)return[S,R];S+=d[0]+d[1],Q.arraycopy(d,2,d,0,b-1),d[b-1]=0,d[b]=0,b--}else b++;d[b]=1,y=!y}throw new fe}static decodeDigit(i){let o=ot.MAX_AVG_VARIANCE,l=-1,f=ot.PATTERNS.length;for(let d=0;d<f;d++){let m=ot.PATTERNS[d],y=kt.patternMatchVariance(i,m,ot.MAX_INDIVIDUAL_VARIANCE);y<o?(o=y,l=d):y===o&&(l=-1)}if(l>=0)return l%10;throw new fe}}ot.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],ot.MAX_AVG_VARIANCE=.38,ot.MAX_INDIVIDUAL_VARIANCE=.5,ot.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],ot.START_PATTERN=Int32Array.from([1,1,1,1]),ot.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Jt extends kt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(i){let o=!1,l,f=0,d=Int32Array.from([0,0,0]);for(;!o;){d=Int32Array.from([0,0,0]),l=Jt.findGuardPattern(i,f,!1,this.START_END_PATTERN,d);let m=l[0];f=l[1];let y=m-(f-m);y>=0&&(o=i.isRange(y,m,!1))}return l}static checkChecksum(i){return Jt.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let o=i.length;if(o===0)return!1;let l=parseInt(i.charAt(o-1),10);return Jt.getStandardUPCEANChecksum(i.substring(0,o-1))===l}static getStandardUPCEANChecksum(i){let o=i.length,l=0;for(let f=o-1;f>=0;f-=2){let d=i.charAt(f).charCodeAt(0)-48;if(d<0||d>9)throw new F;l+=d}l*=3;for(let f=o-2;f>=0;f-=2){let d=i.charAt(f).charCodeAt(0)-48;if(d<0||d>9)throw new F;l+=d}return(1e3-l)%10}static decodeEnd(i,o){return Jt.findGuardPattern(i,o,!1,Jt.START_END_PATTERN,new Int32Array(Jt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(i,o,l,f){return this.findGuardPattern(i,o,l,f,new Int32Array(f.length))}static findGuardPattern(i,o,l,f,d){let m=i.getSize();o=l?i.getNextUnset(o):i.getNextSet(o);let y=0,b=o,S=f.length,R=l;for(let L=o;L<m;L++)if(i.get(L)!==R)d[y]++;else{if(y===S-1){if(kt.patternMatchVariance(d,f,Jt.MAX_INDIVIDUAL_VARIANCE)<Jt.MAX_AVG_VARIANCE)return Int32Array.from([b,L]);b+=d[0]+d[1];let k=d.slice(2,d.length-1);for(let q=0;q<y-1;q++)d[q]=k[q];d[y-1]=0,d[y]=0,y--}else y++;d[y]=1,R=!R}throw new fe}static decodeDigit(i,o,l,f){this.recordPattern(i,l,o);let d=this.MAX_AVG_VARIANCE,m=-1,y=f.length;for(let b=0;b<y;b++){let S=f[b],R=kt.patternMatchVariance(o,S,Jt.MAX_INDIVIDUAL_VARIANCE);R<d&&(d=R,m=b)}if(m>=0)return m;throw new fe}}Jt.MAX_AVG_VARIANCE=.48,Jt.MAX_INDIVIDUAL_VARIANCE=.7,Jt.START_END_PATTERN=Int32Array.from([1,1,1]),Jt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Jt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Jt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class ni{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,o,l){let f=this.decodeRowStringBuffer,d=this.decodeMiddle(o,l,f),m=f.toString(),y=ni.parseExtensionString(m),b=[new ze((l[0]+l[1])/2,i),new ze(d,i)],S=new Fe(m,null,0,b,Be.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&S.putAllMetadata(y),S}decodeMiddle(i,o,l){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=i.getSize(),m=o[1],y=0;for(let S=0;S<5&&m<d;S++){let R=Jt.decodeDigit(i,f,m,Jt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+R%10);for(let L of f)m+=L;R>=10&&(y|=1<<4-S),S!==4&&(m=i.getNextSet(m),m=i.getNextUnset(m))}if(l.length!==5)throw new fe;let b=this.determineCheckDigit(y);if(ni.extensionChecksum(l.toString())!==b)throw new fe;return m}static extensionChecksum(i){let o=i.length,l=0;for(let f=o-2;f>=0;f-=2)l+=i.charAt(f).charCodeAt(0)-48;l*=3;for(let f=o-1;f>=0;f-=2)l+=i.charAt(f).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(i){for(let o=0;o<10;o++)if(i===this.CHECK_DIGIT_ENCODINGS[o])return o;throw new fe}static parseExtensionString(i){if(i.length!==5)return null;let o=ni.parseExtension5String(i);return o==null?null:new Map([[mt.SUGGESTED_PRICE,o]])}static parseExtension5String(i){let o;switch(i.charAt(0)){case"0":o="";break;case"5":o="$";break;case"9":switch(i){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}o="";break;default:o="";break}let l=parseInt(i.substring(1)),f=(l/100).toString(),d=l%100,m=d<10?"0"+d:d.toString();return o+f+"."+m}}class As{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,o,l){let f=this.decodeRowStringBuffer,d=this.decodeMiddle(o,l,f),m=f.toString(),y=As.parseExtensionString(m),b=[new ze((l[0]+l[1])/2,i),new ze(d,i)],S=new Fe(m,null,0,b,Be.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&S.putAllMetadata(y),S}decodeMiddle(i,o,l){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=i.getSize(),m=o[1],y=0;for(let b=0;b<2&&m<d;b++){let S=Jt.decodeDigit(i,f,m,Jt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+S%10);for(let R of f)m+=R;S>=10&&(y|=1<<1-b),b!==1&&(m=i.getNextSet(m),m=i.getNextUnset(m))}if(l.length!==2)throw new fe;if(parseInt(l.toString())%4!==y)throw new fe;return m}static parseExtensionString(i){return i.length!==2?null:new Map([[mt.ISSUE_NUMBER,parseInt(i)]])}}class ri{static decodeRow(i,o,l){let f=Jt.findGuardPattern(o,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new ni().decodeRow(i,o,f)}catch{return new As().decodeRow(i,o,f)}}}ri.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class At extends Jt{constructor(){super(),this.decodeRowStringBuffer="",At.L_AND_G_PATTERNS=At.L_PATTERNS.map(i=>Int32Array.from(i));for(let i=10;i<20;i++){let o=At.L_PATTERNS[i-10],l=new Int32Array(o.length);for(let f=0;f<o.length;f++)l[f]=o[o.length-f-1];At.L_AND_G_PATTERNS[i]=l}}decodeRow(i,o,l){let f=At.findStartGuardPattern(o),d=l==null?null:l.get(De.NEED_RESULT_POINT_CALLBACK);if(d!=null){const Oe=new ze((f[0]+f[1])/2,i);d.foundPossibleResultPoint(Oe)}let m=this.decodeMiddle(o,f,this.decodeRowStringBuffer),y=m.rowOffset,b=m.resultString;if(d!=null){const Oe=new ze(y,i);d.foundPossibleResultPoint(Oe)}let S=this.decodeEnd(o,y);if(d!=null){const Oe=new ze((S[0]+S[1])/2,i);d.foundPossibleResultPoint(Oe)}let R=S[1],L=R+(R-S[0]);if(L>=o.getSize()||!o.isRange(R,L,!1))throw new fe;let k=b.toString();if(k.length<8)throw new F;if(!At.checkChecksum(k))throw new B;let q=(f[1]+f[0])/2,te=(S[1]+S[0])/2,re=this.getBarcodeFormat(),he=[new ze(q,i),new ze(te,i)],ye=new Fe(k,null,0,he,re,new Date().getTime()),Ue=0;try{let Oe=ri.decodeRow(i,o,S[1]);ye.putMetadata(mt.UPC_EAN_EXTENSION,Oe.getText()),ye.putAllMetadata(Oe.getResultMetadata()),ye.addResultPoints(Oe.getResultPoints()),Ue=Oe.getText().length}catch{}let ke=l==null?null:l.get(De.ALLOWED_EAN_EXTENSIONS);if(ke!=null){let Oe=!1;for(let Ot in ke)if(Ue.toString()===Ot){Oe=!0;break}if(!Oe)throw new fe}return ye}decodeEnd(i,o){return At.findGuardPattern(i,o,!1,At.START_END_PATTERN,new Int32Array(At.START_END_PATTERN.length).fill(0))}static checkChecksum(i){return At.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let o=i.length;if(o===0)return!1;let l=parseInt(i.charAt(o-1),10);return At.getStandardUPCEANChecksum(i.substring(0,o-1))===l}static getStandardUPCEANChecksum(i){let o=i.length,l=0;for(let f=o-1;f>=0;f-=2){let d=i.charAt(f).charCodeAt(0)-48;if(d<0||d>9)throw new F;l+=d}l*=3;for(let f=o-2;f>=0;f-=2){let d=i.charAt(f).charCodeAt(0)-48;if(d<0||d>9)throw new F;l+=d}return(1e3-l)%10}}class ln extends At{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,o,l){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=i.getSize(),m=o[1],y=0;for(let S=0;S<6&&m<d;S++){let R=At.decodeDigit(i,f,m,At.L_AND_G_PATTERNS);l+=String.fromCharCode(48+R%10);for(let L of f)m+=L;R>=10&&(y|=1<<5-S)}l=ln.determineFirstDigit(l,y),m=At.findGuardPattern(i,m,!0,At.MIDDLE_PATTERN,new Int32Array(At.MIDDLE_PATTERN.length).fill(0))[1];for(let S=0;S<6&&m<d;S++){let R=At.decodeDigit(i,f,m,At.L_PATTERNS);l+=String.fromCharCode(48+R);for(let L of f)m+=L}return{rowOffset:m,resultString:l}}getBarcodeFormat(){return Be.EAN_13}static determineFirstDigit(i,o){for(let l=0;l<10;l++)if(o===this.FIRST_DIGIT_ENCODINGS[l])return i=String.fromCharCode(48+l)+i,i;throw new fe}}ln.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class ii extends At{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,o,l){const f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=i.getSize(),m=o[1];for(let b=0;b<4&&m<d;b++){let S=At.decodeDigit(i,f,m,At.L_PATTERNS);l+=String.fromCharCode(48+S);for(let R of f)m+=R}m=At.findGuardPattern(i,m,!0,At.MIDDLE_PATTERN,new Int32Array(At.MIDDLE_PATTERN.length).fill(0))[1];for(let b=0;b<4&&m<d;b++){let S=At.decodeDigit(i,f,m,At.L_PATTERNS);l+=String.fromCharCode(48+S);for(let R of f)m+=R}return{rowOffset:m,resultString:l}}getBarcodeFormat(){return Be.EAN_8}}class Fr extends At{constructor(){super(...arguments),this.ean13Reader=new ln}getBarcodeFormat(){return Be.UPC_A}decode(i,o){return this.maybeReturnResult(this.ean13Reader.decode(i))}decodeRow(i,o,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(i,o,l))}decodeMiddle(i,o,l){return this.ean13Reader.decodeMiddle(i,o,l)}maybeReturnResult(i){let o=i.getText();if(o.charAt(0)==="0"){let l=new Fe(o.substring(1),null,null,i.getResultPoints(),Be.UPC_A);return i.getResultMetadata()!=null&&l.putAllMetadata(i.getResultMetadata()),l}else throw new fe}reset(){this.ean13Reader.reset()}}class Nn extends At{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(i,o,l){const f=this.decodeMiddleCounters.map(S=>S);f[0]=0,f[1]=0,f[2]=0,f[3]=0;const d=i.getSize();let m=o[1],y=0;for(let S=0;S<6&&m<d;S++){const R=Nn.decodeDigit(i,f,m,Nn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+R%10);for(let L of f)m+=L;R>=10&&(y|=1<<5-S)}let b=Nn.determineNumSysAndCheckDigit(l,y);return{rowOffset:m,resultString:b}}decodeEnd(i,o){return Nn.findGuardPatternWithoutCounters(i,o,!0,Nn.MIDDLE_END_PATTERN)}checkChecksum(i){return At.checkChecksum(Nn.convertUPCEtoUPCA(i))}static determineNumSysAndCheckDigit(i,o){for(let l=0;l<=1;l++)for(let f=0;f<10;f++)if(o===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][f]){let d=String.fromCharCode(48+l),m=String.fromCharCode(48+f);return d+i+m}throw fe.getNotFoundInstance()}getBarcodeFormat(){return Be.UPC_E}static convertUPCEtoUPCA(i){const o=i.slice(1,7).split("").map(d=>d.charCodeAt(0)),l=new G;l.append(i.charAt(0));let f=o[5];switch(f){case 0:case 1:case 2:l.appendChars(o,0,2),l.append(f),l.append("0000"),l.appendChars(o,2,3);break;case 3:l.appendChars(o,0,3),l.append("00000"),l.appendChars(o,3,2);break;case 4:l.appendChars(o,0,4),l.append("00000"),l.append(o[4]);break;default:l.appendChars(o,0,5),l.append("0000"),l.append(f);break}return i.length>=8&&l.append(i.charAt(7)),l.toString()}}Nn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Nn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class ks extends kt{constructor(i){super();let o=i==null?null:i.get(De.POSSIBLE_FORMATS),l=[];s(o)?(l.push(new ln),l.push(new Fr),l.push(new ii),l.push(new Nn)):(o.indexOf(Be.EAN_13)>-1&&l.push(new ln),o.indexOf(Be.UPC_A)>-1&&l.push(new Fr),o.indexOf(Be.EAN_8)>-1&&l.push(new ii),o.indexOf(Be.UPC_E)>-1&&l.push(new Nn)),this.readers=l}decodeRow(i,o,l){for(let f of this.readers)try{const d=f.decodeRow(i,o,l),m=d.getBarcodeFormat()===Be.EAN_13&&d.getText().charAt(0)==="0",y=l==null?null:l.get(De.POSSIBLE_FORMATS),b=y==null||y.includes(Be.UPC_A);if(m&&b){const S=d.getRawBytes(),R=new Fe(d.getText().substring(1),S,S?S.length:null,d.getResultPoints(),Be.UPC_A);return R.putAllMetadata(d.getResultMetadata()),R}return d}catch{}throw new fe}reset(){for(let i of this.readers)i.reset()}}class Fn extends kt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(i,o){for(let l=0;l<o.length;l++)if(kt.patternMatchVariance(i,o[l],Fn.MAX_INDIVIDUAL_VARIANCE)<Fn.MAX_AVG_VARIANCE)return l;throw new fe}static count(i){return et.sum(new Int32Array(i))}static increment(i,o){let l=0,f=o[0];for(let d=1;d<i.length;d++)o[d]>f&&(f=o[d],l=d);i[l]++}static decrement(i,o){let l=0,f=o[0];for(let d=1;d<i.length;d++)o[d]<f&&(f=o[d],l=d);i[l]--}static isFinderPattern(i){let o=i[0]+i[1],l=o+i[2]+i[3],f=o/l;if(f>=Fn.MIN_FINDER_PATTERN_RATIO&&f<=Fn.MAX_FINDER_PATTERN_RATIO){let d=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;for(let y of i)y>m&&(m=y),y<d&&(d=y);return m<10*d}return!1}}Fn.MAX_AVG_VARIANCE=.2,Fn.MAX_INDIVIDUAL_VARIANCE=.45,Fn.MIN_FINDER_PATTERN_RATIO=9.5/12,Fn.MAX_FINDER_PATTERN_RATIO=12.5/14;class sr{constructor(i,o){this.value=i,this.checksumPortion=o}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(i){if(!(i instanceof sr))return!1;const o=i;return this.value===o.value&&this.checksumPortion===o.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class zr{constructor(i,o,l,f,d){this.value=i,this.startEnd=o,this.value=i,this.startEnd=o,this.resultPoints=new Array,this.resultPoints.push(new ze(l,d)),this.resultPoints.push(new ze(f,d))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(i){if(!(i instanceof zr))return!1;const o=i;return this.value===o.value}hashCode(){return this.value}}class Lr{constructor(){}static getRSSvalue(i,o,l){let f=0;for(let b of i)f+=b;let d=0,m=0,y=i.length;for(let b=0;b<y-1;b++){let S;for(S=1,m|=1<<b;S<i[b];S++,m&=~(1<<b)){let R=Lr.combins(f-S-1,y-b-2);if(l&&m===0&&f-S-(y-b-1)>=y-b-1&&(R-=Lr.combins(f-S-(y-b),y-b-2)),y-b-1>1){let L=0;for(let k=f-S-(y-b-2);k>o;k--)L+=Lr.combins(f-S-k-1,y-b-3);R-=L*(y-1-b)}else f-S>o&&R--;d+=R}f-=S}return d}static combins(i,o){let l,f;i-o>o?(f=o,l=i-o):(f=i-o,l=o);let d=1,m=1;for(let y=i;y>l;y--)d*=y,m<=f&&(d/=m,m++);for(;m<=f;)d/=m,m++;return d}}class si{static buildBitArray(i){let o=i.length*2-1;i[i.length-1].getRightChar()==null&&(o-=1);let l=12*o,f=new ce(l),d=0,y=i[0].getRightChar().getValue();for(let b=11;b>=0;--b)(y&1<<b)!=0&&f.set(d),d++;for(let b=1;b<i.length;++b){let S=i[b],R=S.getLeftChar().getValue();for(let L=11;L>=0;--L)(R&1<<L)!=0&&f.set(d),d++;if(S.getRightChar()!=null){let L=S.getRightChar().getValue();for(let k=11;k>=0;--k)(L&1<<k)!=0&&f.set(d),d++}}return f}}class xr{constructor(i,o){o?this.decodedInformation=null:(this.finished=i,this.decodedInformation=o)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Bi{constructor(i){this.newPosition=i}getNewPosition(){return this.newPosition}}class Rn extends Bi{constructor(i,o){super(i),this.value=o}getValue(){return this.value}isFNC1(){return this.value===Rn.FNC1}}Rn.FNC1="$";class ar extends Bi{constructor(i,o,l){super(i),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=o}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class or extends Bi{constructor(i,o,l){if(super(i),o<0||o>10||l<0||l>10)throw new F;this.firstDigit=o,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===or.FNC1}isSecondDigitFNC1(){return this.secondDigit===or.FNC1}isAnyFNC1(){return this.firstDigit===or.FNC1||this.secondDigit===or.FNC1}}or.FNC1=10;class He{constructor(){}static parseFieldsInGeneralPurpose(i){if(!i)return null;if(i.length<2)throw new fe;let o=i.substring(0,2);for(let d of He.TWO_DIGIT_DATA_LENGTH)if(d[0]===o)return d[1]===He.VARIABLE_LENGTH?He.processVariableAI(2,d[2],i):He.processFixedAI(2,d[1],i);if(i.length<3)throw new fe;let l=i.substring(0,3);for(let d of He.THREE_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===He.VARIABLE_LENGTH?He.processVariableAI(3,d[2],i):He.processFixedAI(3,d[1],i);for(let d of He.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===He.VARIABLE_LENGTH?He.processVariableAI(4,d[2],i):He.processFixedAI(4,d[1],i);if(i.length<4)throw new fe;let f=i.substring(0,4);for(let d of He.FOUR_DIGIT_DATA_LENGTH)if(d[0]===f)return d[1]===He.VARIABLE_LENGTH?He.processVariableAI(4,d[2],i):He.processFixedAI(4,d[1],i);throw new fe}static processFixedAI(i,o,l){if(l.length<i)throw new fe;let f=l.substring(0,i);if(l.length<i+o)throw new fe;let d=l.substring(i,i+o),m=l.substring(i+o),y="("+f+")"+d,b=He.parseFieldsInGeneralPurpose(m);return b==null?y:y+b}static processVariableAI(i,o,l){let f=l.substring(0,i),d;l.length<i+o?d=l.length:d=i+o;let m=l.substring(i,d),y=l.substring(d),b="("+f+")"+m,S=He.parseFieldsInGeneralPurpose(y);return S==null?b:b+S}}He.VARIABLE_LENGTH=[],He.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",He.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",He.VARIABLE_LENGTH,20],["22",He.VARIABLE_LENGTH,29],["30",He.VARIABLE_LENGTH,8],["37",He.VARIABLE_LENGTH,8],["90",He.VARIABLE_LENGTH,30],["91",He.VARIABLE_LENGTH,30],["92",He.VARIABLE_LENGTH,30],["93",He.VARIABLE_LENGTH,30],["94",He.VARIABLE_LENGTH,30],["95",He.VARIABLE_LENGTH,30],["96",He.VARIABLE_LENGTH,30],["97",He.VARIABLE_LENGTH,3],["98",He.VARIABLE_LENGTH,30],["99",He.VARIABLE_LENGTH,30]],He.THREE_DIGIT_DATA_LENGTH=[["240",He.VARIABLE_LENGTH,30],["241",He.VARIABLE_LENGTH,30],["242",He.VARIABLE_LENGTH,6],["250",He.VARIABLE_LENGTH,30],["251",He.VARIABLE_LENGTH,30],["253",He.VARIABLE_LENGTH,17],["254",He.VARIABLE_LENGTH,20],["400",He.VARIABLE_LENGTH,30],["401",He.VARIABLE_LENGTH,30],["402",17],["403",He.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",He.VARIABLE_LENGTH,20],["421",He.VARIABLE_LENGTH,15],["422",3],["423",He.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],He.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",He.VARIABLE_LENGTH,15],["391",He.VARIABLE_LENGTH,18],["392",He.VARIABLE_LENGTH,15],["393",He.VARIABLE_LENGTH,18],["703",He.VARIABLE_LENGTH,30]],He.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",He.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",He.VARIABLE_LENGTH,20],["8003",He.VARIABLE_LENGTH,30],["8004",He.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",He.VARIABLE_LENGTH,30],["8008",He.VARIABLE_LENGTH,12],["8018",18],["8020",He.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",He.VARIABLE_LENGTH,70],["8200",He.VARIABLE_LENGTH,70]];class Jn{constructor(i){this.buffer=new G,this.information=i}decodeAllCodes(i,o){let l=o,f=null;do{let d=this.decodeGeneralPurposeField(l,f),m=He.parseFieldsInGeneralPurpose(d.getNewString());if(m!=null&&i.append(m),d.isRemaining()?f=""+d.getRemainingValue():f=null,l===d.getNewPosition())break;l=d.getNewPosition()}while(!0);return i.toString()}isStillNumeric(i){if(i+7>this.information.getSize())return i+4<=this.information.getSize();for(let o=i;o<i+3;++o)if(this.information.get(o))return!0;return this.information.get(i+3)}decodeNumeric(i){if(i+7>this.information.getSize()){let d=this.extractNumericValueFromBitArray(i,4);return d===0?new or(this.information.getSize(),or.FNC1,or.FNC1):new or(this.information.getSize(),d-1,or.FNC1)}let o=this.extractNumericValueFromBitArray(i,7),l=(o-8)/11,f=(o-8)%11;return new or(i+7,l,f)}extractNumericValueFromBitArray(i,o){return Jn.extractNumericValueFromBitArray(this.information,i,o)}static extractNumericValueFromBitArray(i,o,l){let f=0;for(let d=0;d<l;++d)i.get(o+d)&&(f|=1<<l-d-1);return f}decodeGeneralPurposeField(i,o){this.buffer.setLengthToZero(),o!=null&&this.buffer.append(o),this.current.setPosition(i);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new ar(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new ar(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let i,o;do{let l=this.current.getPosition();if(this.current.isAlpha()?(o=this.parseAlphaBlock(),i=o.isFinished()):this.current.isIsoIec646()?(o=this.parseIsoIec646Block(),i=o.isFinished()):(o=this.parseNumericBlock(),i=o.isFinished()),!(l!==this.current.getPosition())&&!i)break}while(!i);return o.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let i=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFirstDigitFNC1()){let o;return i.isSecondDigitFNC1()?o=new ar(this.current.getPosition(),this.buffer.toString()):o=new ar(this.current.getPosition(),this.buffer.toString(),i.getSecondDigit()),new xr(!0,o)}if(this.buffer.append(i.getFirstDigit()),i.isSecondDigitFNC1()){let o=new ar(this.current.getPosition(),this.buffer.toString());return new xr(!0,o)}this.buffer.append(i.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new xr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let i=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let o=new ar(this.current.getPosition(),this.buffer.toString());return new xr(!0,o)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new xr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let i=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let o=new ar(this.current.getPosition(),this.buffer.toString());return new xr(!0,o)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new xr(!1)}isStillIsoIec646(i){if(i+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(i,5);if(o>=5&&o<16)return!0;if(i+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,7);if(l>=64&&l<116)return!0;if(i+8>this.information.getSize())return!1;let f=this.extractNumericValueFromBitArray(i,8);return f>=232&&f<253}decodeIsoIec646(i){let o=this.extractNumericValueFromBitArray(i,5);if(o===15)return new Rn(i+5,Rn.FNC1);if(o>=5&&o<15)return new Rn(i+5,"0"+(o-5));let l=this.extractNumericValueFromBitArray(i,7);if(l>=64&&l<90)return new Rn(i+7,""+(l+1));if(l>=90&&l<116)return new Rn(i+7,""+(l+7));let f=this.extractNumericValueFromBitArray(i,8),d;switch(f){case 232:d="!";break;case 233:d='"';break;case 234:d="%";break;case 235:d="&";break;case 236:d="'";break;case 237:d="(";break;case 238:d=")";break;case 239:d="*";break;case 240:d="+";break;case 241:d=",";break;case 242:d="-";break;case 243:d=".";break;case 244:d="/";break;case 245:d=":";break;case 246:d=";";break;case 247:d="<";break;case 248:d="=";break;case 249:d=">";break;case 250:d="?";break;case 251:d="_";break;case 252:d=" ";break;default:throw new F}return new Rn(i+8,d)}isStillAlpha(i){if(i+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(i,5);if(o>=5&&o<16)return!0;if(i+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,6);return l>=16&&l<63}decodeAlphanumeric(i){let o=this.extractNumericValueFromBitArray(i,5);if(o===15)return new Rn(i+5,Rn.FNC1);if(o>=5&&o<15)return new Rn(i+5,"0"+(o-5));let l=this.extractNumericValueFromBitArray(i,6);if(l>=32&&l<58)return new Rn(i+6,""+(l+33));let f;switch(l){case 58:f="*";break;case 59:f=",";break;case 60:f="-";break;case 61:f=".";break;case 62:f="/";break;default:throw new Sr("Decoding invalid alphanumeric value: "+l)}return new Rn(i+6,f)}isAlphaTo646ToAlphaLatch(i){if(i+1>this.information.getSize())return!1;for(let o=0;o<5&&o+i<this.information.getSize();++o)if(o===2){if(!this.information.get(i+2))return!1}else if(this.information.get(i+o))return!1;return!0}isAlphaOr646ToNumericLatch(i){if(i+3>this.information.getSize())return!1;for(let o=i;o<i+3;++o)if(this.information.get(o))return!1;return!0}isNumericToAlphaNumericLatch(i){if(i+1>this.information.getSize())return!1;for(let o=0;o<4&&o+i<this.information.getSize();++o)if(this.information.get(i+o))return!1;return!0}}class Dt{constructor(i){this.information=i,this.generalDecoder=new Jn(i)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Bt extends Dt{constructor(i){super(i)}encodeCompressedGtin(i,o){i.append("(01)");let l=i.length();i.append("9"),this.encodeCompressedGtinWithoutAI(i,o,l)}encodeCompressedGtinWithoutAI(i,o,l){for(let f=0;f<4;++f){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(o+10*f,10);d/100===0&&i.append("0"),d/10===0&&i.append("0"),i.append(d)}Bt.appendCheckDigit(i,l)}static appendCheckDigit(i,o){let l=0;for(let f=0;f<13;f++){let d=i.charAt(f+o).charCodeAt(0)-48;l+=(f&1)===0?3*d:d}l=10-l%10,l===10&&(l=0),i.append(l)}}Bt.GTIN_SIZE=40;class lr extends Bt{constructor(i){super(i)}parseInformation(){let i=new G;i.append("(01)");let o=i.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(lr.HEADER_SIZE,4);return i.append(l),this.encodeCompressedGtinWithoutAI(i,lr.HEADER_SIZE+4,o),this.getGeneralDecoder().decodeAllCodes(i,lr.HEADER_SIZE+44)}}lr.HEADER_SIZE=4;class Ti extends Dt{constructor(i){super(i)}parseInformation(){let i=new G;return this.getGeneralDecoder().decodeAllCodes(i,Ti.HEADER_SIZE)}}Ti.HEADER_SIZE=5;class vs extends Bt{constructor(i){super(i)}encodeCompressedWeight(i,o,l){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(o,l);this.addWeightCode(i,f);let d=this.checkWeight(f),m=1e5;for(let y=0;y<5;++y)d/m===0&&i.append("0"),m/=10;i.append(d)}}class Hr extends vs{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()!=Hr.HEADER_SIZE+vs.GTIN_SIZE+Hr.WEIGHT_SIZE)throw new fe;let i=new G;return this.encodeCompressedGtin(i,Hr.HEADER_SIZE),this.encodeCompressedWeight(i,Hr.HEADER_SIZE+vs.GTIN_SIZE,Hr.WEIGHT_SIZE),i.toString()}}Hr.HEADER_SIZE=5,Hr.WEIGHT_SIZE=15;class Qa extends Hr{constructor(i){super(i)}addWeightCode(i,o){i.append("(3103)")}checkWeight(i){return i}}class Si extends Hr{constructor(i){super(i)}addWeightCode(i,o){o<1e4?i.append("(3202)"):i.append("(3203)")}checkWeight(i){return i<1e4?i:i-1e4}}class yr extends Bt{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<yr.HEADER_SIZE+Bt.GTIN_SIZE)throw new fe;let i=new G;this.encodeCompressedGtin(i,yr.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(yr.HEADER_SIZE+Bt.GTIN_SIZE,yr.LAST_DIGIT_SIZE);i.append("(392"),i.append(o),i.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(yr.HEADER_SIZE+Bt.GTIN_SIZE+yr.LAST_DIGIT_SIZE,null);return i.append(l.getNewString()),i.toString()}}yr.HEADER_SIZE=8,yr.LAST_DIGIT_SIZE=2;class yn extends Bt{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<yn.HEADER_SIZE+Bt.GTIN_SIZE)throw new fe;let i=new G;this.encodeCompressedGtin(i,yn.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(yn.HEADER_SIZE+Bt.GTIN_SIZE,yn.LAST_DIGIT_SIZE);i.append("(393"),i.append(o),i.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(yn.HEADER_SIZE+Bt.GTIN_SIZE+yn.LAST_DIGIT_SIZE,yn.FIRST_THREE_DIGITS_SIZE);l/100==0&&i.append("0"),l/10==0&&i.append("0"),i.append(l);let f=this.getGeneralDecoder().decodeGeneralPurposeField(yn.HEADER_SIZE+Bt.GTIN_SIZE+yn.LAST_DIGIT_SIZE+yn.FIRST_THREE_DIGITS_SIZE,null);return i.append(f.getNewString()),i.toString()}}yn.HEADER_SIZE=8,yn.LAST_DIGIT_SIZE=2,yn.FIRST_THREE_DIGITS_SIZE=10;class Nt extends vs{constructor(i,o,l){super(i),this.dateCode=l,this.firstAIdigits=o}parseInformation(){if(this.getInformation().getSize()!=Nt.HEADER_SIZE+Nt.GTIN_SIZE+Nt.WEIGHT_SIZE+Nt.DATE_SIZE)throw new fe;let i=new G;return this.encodeCompressedGtin(i,Nt.HEADER_SIZE),this.encodeCompressedWeight(i,Nt.HEADER_SIZE+Nt.GTIN_SIZE,Nt.WEIGHT_SIZE),this.encodeCompressedDate(i,Nt.HEADER_SIZE+Nt.GTIN_SIZE+Nt.WEIGHT_SIZE),i.toString()}encodeCompressedDate(i,o){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(o,Nt.DATE_SIZE);if(l==38400)return;i.append("("),i.append(this.dateCode),i.append(")");let f=l%32;l/=32;let d=l%12+1;l/=12;let m=l;m/10==0&&i.append("0"),i.append(m),d/10==0&&i.append("0"),i.append(d),f/10==0&&i.append("0"),i.append(f)}addWeightCode(i,o){i.append("("),i.append(this.firstAIdigits),i.append(o/1e5),i.append(")")}checkWeight(i){return i%1e5}}Nt.HEADER_SIZE=8,Nt.WEIGHT_SIZE=20,Nt.DATE_SIZE=16;function kr(P){try{if(P.get(1))return new lr(P);if(!P.get(2))return new Ti(P);switch(Jn.extractNumericValueFromBitArray(P,1,4)){case 4:return new Qa(P);case 5:return new Si(P)}switch(Jn.extractNumericValueFromBitArray(P,1,5)){case 12:return new yr(P);case 13:return new yn(P)}switch(Jn.extractNumericValueFromBitArray(P,1,7)){case 56:return new Nt(P,"310","11");case 57:return new Nt(P,"320","11");case 58:return new Nt(P,"310","13");case 59:return new Nt(P,"320","13");case 60:return new Nt(P,"310","15");case 61:return new Nt(P,"320","15");case 62:return new Nt(P,"310","17");case 63:return new Nt(P,"320","17")}}catch(i){throw console.log(i),new Sr("unknown decoder: "+P)}}class cr{constructor(i,o,l,f){this.leftchar=i,this.rightchar=o,this.finderpattern=l,this.maybeLast=f}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(i,o){return i instanceof cr?cr.equalsOrNull(i.leftchar,o.leftchar)&&cr.equalsOrNull(i.rightchar,o.rightchar)&&cr.equalsOrNull(i.finderpattern,o.finderpattern):!1}static equalsOrNull(i,o){return i===null?o===null:cr.equals(i,o)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class On{constructor(i,o,l){this.pairs=i,this.rowNumber=o,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(i){return this.checkEqualitity(this,i)}toString(){return"{ "+this.pairs+" }"}equals(i,o){return i instanceof On?this.checkEqualitity(i,o)&&i.wasReversed===o.wasReversed:!1}checkEqualitity(i,o){if(!i||!o)return;let l;return i.forEach((f,d)=>{o.forEach(m=>{f.getLeftChar().getValue()===m.getLeftChar().getValue()&&f.getRightChar().getValue()===m.getRightChar().getValue()&&f.getFinderPatter().getValue()===m.getFinderPatter().getValue()&&(l=!0)})}),l}}class Ce extends Fn{constructor(i){super(...arguments),this.pairs=new Array(Ce.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=i===!0}decodeRow(i,o,l){this.pairs.length=0,this.startFromEven=!1;try{return Ce.constructResult(this.decodeRow2pairs(i,o))}catch(f){this.verbose&&console.log(f)}return this.pairs.length=0,this.startFromEven=!0,Ce.constructResult(this.decodeRow2pairs(i,o))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(i,o){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(o,this.pairs,i))}catch(d){if(d instanceof fe){if(!this.pairs.length)throw new fe;l=!0}}if(this.checkChecksum())return this.pairs;let f;if(this.rows.length?f=!0:f=!1,this.storeRow(i,!1),f){let d=this.checkRowsBoolean(!1);if(d!=null||(d=this.checkRowsBoolean(!0),d!=null))return d}throw new fe}checkRowsBoolean(i){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,i&&(this.rows=this.rows.reverse());let o=null;try{o=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return i&&(this.rows=this.rows.reverse()),o}checkRows(i,o){for(let l=o;l<this.rows.length;l++){let f=this.rows[l];this.pairs.length=0;for(let m of i)this.pairs.push(m.getPairs());if(this.pairs.push(f.getPairs()),!Ce.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let d=new Array(i);d.push(f);try{return this.checkRows(d,l+1)}catch(m){this.verbose&&console.log(m)}}throw new fe}static isValidSequence(i){for(let o of Ce.FINDER_PATTERN_SEQUENCES){if(i.length>o.length)continue;let l=!0;for(let f=0;f<i.length;f++)if(i[f].getFinderPattern().getValue()!=o[f]){l=!1;break}if(l)return!0}return!1}storeRow(i,o){let l=0,f=!1,d=!1;for(;l<this.rows.length;){let m=this.rows[l];if(m.getRowNumber()>i){d=m.isEquivalent(this.pairs);break}f=m.isEquivalent(this.pairs),l++}d||f||Ce.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new On(this.pairs,i,o)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(i,o){for(let l of o)if(l.getPairs().length!==i.length){for(let f of l.getPairs())for(let d of i)if(cr.equals(f,d))break}}static isPartialRow(i,o){for(let l of o){let f=!0;for(let d of i){let m=!1;for(let y of l.getPairs())if(d.equals(y)){m=!0;break}if(!m){f=!1;break}}if(f)return!0}return!1}getRows(){return this.rows}static constructResult(i){let o=si.buildBitArray(i),f=kr(o).parseInformation(),d=i[0].getFinderPattern().getResultPoints(),m=i[i.length-1].getFinderPattern().getResultPoints(),y=[d[0],d[1],m[0],m[1]];return new Fe(f,null,null,y,Be.RSS_EXPANDED,null)}checkChecksum(){let i=this.pairs.get(0),o=i.getLeftChar(),l=i.getRightChar();if(l==null)return!1;let f=l.getChecksumPortion(),d=2;for(let y=1;y<this.pairs.size();++y){let b=this.pairs.get(y);f+=b.getLeftChar().getChecksumPortion(),d++;let S=b.getRightChar();S!=null&&(f+=S.getChecksumPortion(),d++)}return f%=211,211*(d-4)+f==o.getValue()}static getNextSecondBar(i,o){let l;return i.get(o)?(l=i.getNextUnset(o),l=i.getNextSet(l)):(l=i.getNextSet(o),l=i.getNextUnset(l)),l}retrieveNextPair(i,o,l){let f=o.length%2==0;this.startFromEven&&(f=!f);let d,m=!0,y=-1;do this.findNextPair(i,o,y),d=this.parseFoundFinderPattern(i,l,f),d==null?y=Ce.getNextSecondBar(i,this.startEnd[0]):m=!1;while(m);let b=this.decodeDataCharacter(i,d,f,!0);if(!this.isEmptyPair(o)&&o[o.length-1].mustBeLast())throw new fe;let S;try{S=this.decodeDataCharacter(i,d,f,!1)}catch(R){S=null,this.verbose&&console.log(R)}return new cr(b,S,d,!0)}isEmptyPair(i){return i.length===0}findNextPair(i,o,l){let f=this.getDecodeFinderCounters();f[0]=0,f[1]=0,f[2]=0,f[3]=0;let d=i.getSize(),m;l>=0?m=l:this.isEmptyPair(o)?m=0:m=o[o.length-1].getFinderPattern().getStartEnd()[1];let y=o.length%2!=0;this.startFromEven&&(y=!y);let b=!1;for(;m<d&&(b=!i.get(m),!!b);)m++;let S=0,R=m;for(let L=m;L<d;L++)if(i.get(L)!=b)f[S]++;else{if(S==3){if(y&&Ce.reverseCounters(f),Ce.isFinderPattern(f)){this.startEnd[0]=R,this.startEnd[1]=L;return}y&&Ce.reverseCounters(f),R+=f[0]+f[1],f[0]=f[2],f[1]=f[3],f[2]=0,f[3]=0,S--}else S++;f[S]=1,b=!b}throw new fe}static reverseCounters(i){let o=i.length;for(let l=0;l<o/2;++l){let f=i[l];i[l]=i[o-l-1],i[o-l-1]=f}}parseFoundFinderPattern(i,o,l){let f,d,m;if(l){let S=this.startEnd[0]-1;for(;S>=0&&!i.get(S);)S--;S++,f=this.startEnd[0]-S,d=S,m=this.startEnd[1]}else d=this.startEnd[0],m=i.getNextUnset(this.startEnd[1]+1),f=m-this.startEnd[1];let y=this.getDecodeFinderCounters();Q.arraycopy(y,0,y,1,y.length-1),y[0]=f;let b;try{b=this.parseFinderValue(y,Ce.FINDER_PATTERNS)}catch{return null}return new zr(b,[d,m],d,m,o)}decodeDataCharacter(i,o,l,f){let d=this.getDataCharacterCounters();for(let fn=0;fn<d.length;fn++)d[fn]=0;if(f)Ce.recordPatternInReverse(i,o.getStartEnd()[0],d);else{Ce.recordPattern(i,o.getStartEnd()[1],d);for(let fn=0,Or=d.length-1;fn<Or;fn++,Or--){let xi=d[fn];d[fn]=d[Or],d[Or]=xi}}let m=17,y=et.sum(new Int32Array(d))/m,b=(o.getStartEnd()[1]-o.getStartEnd()[0])/15;if(Math.abs(y-b)/b>.3)throw new fe;let S=this.getOddCounts(),R=this.getEvenCounts(),L=this.getOddRoundingErrors(),k=this.getEvenRoundingErrors();for(let fn=0;fn<d.length;fn++){let Or=1*d[fn]/y,xi=Or+.5;if(xi<1){if(Or<.3)throw new fe;xi=1}else if(xi>8){if(Or>8.7)throw new fe;xi=8}let no=fn/2;(fn&1)==0?(S[no]=xi,L[no]=Or-xi):(R[no]=xi,k[no]=Or-xi)}this.adjustOddEvenCounts(m);let q=4*o.getValue()+(l?0:2)+(f?0:1)-1,te=0,re=0;for(let fn=S.length-1;fn>=0;fn--){if(Ce.isNotA1left(o,l,f)){let Or=Ce.WEIGHTS[q][2*fn];re+=S[fn]*Or}te+=S[fn]}let he=0;for(let fn=R.length-1;fn>=0;fn--)if(Ce.isNotA1left(o,l,f)){let Or=Ce.WEIGHTS[q][2*fn+1];he+=R[fn]*Or}let ye=re+he;if((te&1)!=0||te>13||te<4)throw new fe;let Ue=(13-te)/2,ke=Ce.SYMBOL_WIDEST[Ue],Oe=9-ke,Ot=Lr.getRSSvalue(S,ke,!0),Et=Lr.getRSSvalue(R,Oe,!1),$n=Ce.EVEN_TOTAL_SUBSET[Ue],Ri=Ce.GSUM[Ue],Gr=Ot*$n+Et+Ri;return new sr(Gr,ye)}static isNotA1left(i,o,l){return!(i.getValue()==0&&o&&l)}adjustOddEvenCounts(i){let o=et.sum(new Int32Array(this.getOddCounts())),l=et.sum(new Int32Array(this.getEvenCounts())),f=!1,d=!1;o>13?d=!0:o<4&&(f=!0);let m=!1,y=!1;l>13?y=!0:l<4&&(m=!0);let b=o+l-i,S=(o&1)==1,R=(l&1)==0;if(b==1)if(S){if(R)throw new fe;d=!0}else{if(!R)throw new fe;y=!0}else if(b==-1)if(S){if(R)throw new fe;f=!0}else{if(!R)throw new fe;m=!0}else if(b==0){if(S){if(!R)throw new fe;o<l?(f=!0,y=!0):(d=!0,m=!0)}else if(R)throw new fe}else throw new fe;if(f){if(d)throw new fe;Ce.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&Ce.decrement(this.getOddCounts(),this.getOddRoundingErrors()),m){if(y)throw new fe;Ce.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&Ce.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ce.SYMBOL_WIDEST=[7,5,4,3,1],Ce.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Ce.GSUM=[0,348,1388,2948,3988],Ce.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Ce.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Ce.FINDER_PAT_A=0,Ce.FINDER_PAT_B=1,Ce.FINDER_PAT_C=2,Ce.FINDER_PAT_D=3,Ce.FINDER_PAT_E=4,Ce.FINDER_PAT_F=5,Ce.FINDER_PATTERN_SEQUENCES=[[Ce.FINDER_PAT_A,Ce.FINDER_PAT_A],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_B,Ce.FINDER_PAT_B],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_C,Ce.FINDER_PAT_B,Ce.FINDER_PAT_D],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_E,Ce.FINDER_PAT_B,Ce.FINDER_PAT_D,Ce.FINDER_PAT_C],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_E,Ce.FINDER_PAT_B,Ce.FINDER_PAT_D,Ce.FINDER_PAT_D,Ce.FINDER_PAT_F],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_E,Ce.FINDER_PAT_B,Ce.FINDER_PAT_D,Ce.FINDER_PAT_E,Ce.FINDER_PAT_F,Ce.FINDER_PAT_F],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_A,Ce.FINDER_PAT_B,Ce.FINDER_PAT_B,Ce.FINDER_PAT_C,Ce.FINDER_PAT_C,Ce.FINDER_PAT_D,Ce.FINDER_PAT_D],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_A,Ce.FINDER_PAT_B,Ce.FINDER_PAT_B,Ce.FINDER_PAT_C,Ce.FINDER_PAT_C,Ce.FINDER_PAT_D,Ce.FINDER_PAT_E,Ce.FINDER_PAT_E],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_A,Ce.FINDER_PAT_B,Ce.FINDER_PAT_B,Ce.FINDER_PAT_C,Ce.FINDER_PAT_C,Ce.FINDER_PAT_D,Ce.FINDER_PAT_E,Ce.FINDER_PAT_F,Ce.FINDER_PAT_F],[Ce.FINDER_PAT_A,Ce.FINDER_PAT_A,Ce.FINDER_PAT_B,Ce.FINDER_PAT_B,Ce.FINDER_PAT_C,Ce.FINDER_PAT_D,Ce.FINDER_PAT_D,Ce.FINDER_PAT_E,Ce.FINDER_PAT_E,Ce.FINDER_PAT_F,Ce.FINDER_PAT_F]],Ce.MAX_PAIRS=11;class sa extends sr{constructor(i,o,l){super(i,o),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Ht extends Fn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(i,o,l){const f=this.decodePair(o,!1,i,l);Ht.addOrTally(this.possibleLeftPairs,f),o.reverse();let d=this.decodePair(o,!0,i,l);Ht.addOrTally(this.possibleRightPairs,d),o.reverse();for(let m of this.possibleLeftPairs)if(m.getCount()>1){for(let y of this.possibleRightPairs)if(y.getCount()>1&&Ht.checkChecksum(m,y))return Ht.constructResult(m,y)}throw new fe}static addOrTally(i,o){if(o==null)return;let l=!1;for(let f of i)if(f.getValue()===o.getValue()){f.incrementCount(),l=!0;break}l||i.push(o)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(i,o){let l=4537077*i.getValue()+o.getValue(),f=new String(l).toString(),d=new G;for(let S=13-f.length;S>0;S--)d.append("0");d.append(f);let m=0;for(let S=0;S<13;S++){let R=d.charAt(S).charCodeAt(0)-48;m+=(S&1)===0?3*R:R}m=10-m%10,m===10&&(m=0),d.append(m.toString());let y=i.getFinderPattern().getResultPoints(),b=o.getFinderPattern().getResultPoints();return new Fe(d.toString(),null,0,[y[0],y[1],b[0],b[1]],Be.RSS_14,new Date().getTime())}static checkChecksum(i,o){let l=(i.getChecksumPortion()+16*o.getChecksumPortion())%79,f=9*i.getFinderPattern().getValue()+o.getFinderPattern().getValue();return f>72&&f--,f>8&&f--,l===f}decodePair(i,o,l,f){try{let d=this.findFinderPattern(i,o),m=this.parseFoundFinderPattern(i,l,o,d),y=f==null?null:f.get(De.NEED_RESULT_POINT_CALLBACK);if(y!=null){let R=(d[0]+d[1])/2;o&&(R=i.getSize()-1-R),y.foundPossibleResultPoint(new ze(R,l))}let b=this.decodeDataCharacter(i,m,!0),S=this.decodeDataCharacter(i,m,!1);return new sa(1597*b.getValue()+S.getValue(),b.getChecksumPortion()+4*S.getChecksumPortion(),m)}catch{return null}}decodeDataCharacter(i,o,l){let f=this.getDataCharacterCounters();for(let he=0;he<f.length;he++)f[he]=0;if(l)kt.recordPatternInReverse(i,o.getStartEnd()[0],f);else{kt.recordPattern(i,o.getStartEnd()[1]+1,f);for(let he=0,ye=f.length-1;he<ye;he++,ye--){let Ue=f[he];f[he]=f[ye],f[ye]=Ue}}let d=l?16:15,m=et.sum(new Int32Array(f))/d,y=this.getOddCounts(),b=this.getEvenCounts(),S=this.getOddRoundingErrors(),R=this.getEvenRoundingErrors();for(let he=0;he<f.length;he++){let ye=f[he]/m,Ue=Math.floor(ye+.5);Ue<1?Ue=1:Ue>8&&(Ue=8);let ke=Math.floor(he/2);(he&1)===0?(y[ke]=Ue,S[ke]=ye-Ue):(b[ke]=Ue,R[ke]=ye-Ue)}this.adjustOddEvenCounts(l,d);let L=0,k=0;for(let he=y.length-1;he>=0;he--)k*=9,k+=y[he],L+=y[he];let q=0,te=0;for(let he=b.length-1;he>=0;he--)q*=9,q+=b[he],te+=b[he];let re=k+3*q;if(l){if((L&1)!==0||L>12||L<4)throw new fe;let he=(12-L)/2,ye=Ht.OUTSIDE_ODD_WIDEST[he],Ue=9-ye,ke=Lr.getRSSvalue(y,ye,!1),Oe=Lr.getRSSvalue(b,Ue,!0),Ot=Ht.OUTSIDE_EVEN_TOTAL_SUBSET[he],Et=Ht.OUTSIDE_GSUM[he];return new sr(ke*Ot+Oe+Et,re)}else{if((te&1)!==0||te>10||te<4)throw new fe;let he=(10-te)/2,ye=Ht.INSIDE_ODD_WIDEST[he],Ue=9-ye,ke=Lr.getRSSvalue(y,ye,!0),Oe=Lr.getRSSvalue(b,Ue,!1),Ot=Ht.INSIDE_ODD_TOTAL_SUBSET[he],Et=Ht.INSIDE_GSUM[he];return new sr(Oe*Ot+ke+Et,re)}}findFinderPattern(i,o){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let f=i.getSize(),d=!1,m=0;for(;m<f&&(d=!i.get(m),o!==d);)m++;let y=0,b=m;for(let S=m;S<f;S++)if(i.get(S)!==d)l[y]++;else{if(y===3){if(Fn.isFinderPattern(l))return[b,S];b+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,y--}else y++;l[y]=1,d=!d}throw new fe}parseFoundFinderPattern(i,o,l,f){let d=i.get(f[0]),m=f[0]-1;for(;m>=0&&d!==i.get(m);)m--;m++;const y=f[0]-m,b=this.getDecodeFinderCounters(),S=new Int32Array(b.length);Q.arraycopy(b,0,S,1,b.length-1),S[0]=y;const R=this.parseFinderValue(S,Ht.FINDER_PATTERNS);let L=m,k=f[1];return l&&(L=i.getSize()-1-L,k=i.getSize()-1-k),new zr(R,[m,f[1]],L,k,o)}adjustOddEvenCounts(i,o){let l=et.sum(new Int32Array(this.getOddCounts())),f=et.sum(new Int32Array(this.getEvenCounts())),d=!1,m=!1,y=!1,b=!1;i?(l>12?m=!0:l<4&&(d=!0),f>12?b=!0:f<4&&(y=!0)):(l>11?m=!0:l<5&&(d=!0),f>10?b=!0:f<4&&(y=!0));let S=l+f-o,R=(l&1)===(i?1:0),L=(f&1)===1;if(S===1)if(R){if(L)throw new fe;m=!0}else{if(!L)throw new fe;b=!0}else if(S===-1)if(R){if(L)throw new fe;d=!0}else{if(!L)throw new fe;y=!0}else if(S===0){if(R){if(!L)throw new fe;l<f?(d=!0,b=!0):(m=!0,y=!0)}else if(L)throw new fe}else throw new fe;if(d){if(m)throw new fe;Fn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(m&&Fn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),y){if(b)throw new fe;Fn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}b&&Fn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ht.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Ht.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Ht.OUTSIDE_GSUM=[0,161,961,2015,2715],Ht.INSIDE_GSUM=[0,336,1036,1516],Ht.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Ht.INSIDE_ODD_WIDEST=[2,4,6,8],Ht.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Cr extends kt{constructor(i,o){super(),this.readers=[],this.verbose=o===!0;const l=i?i.get(De.POSSIBLE_FORMATS):null,f=i&&i.get(De.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(Be.EAN_13)||l.includes(Be.UPC_A)||l.includes(Be.EAN_8)||l.includes(Be.UPC_E))&&this.readers.push(new ks(i)),l.includes(Be.CODE_39)&&this.readers.push(new zt(f)),l.includes(Be.CODE_128)&&this.readers.push(new Le),l.includes(Be.ITF)&&this.readers.push(new ot),l.includes(Be.RSS_14)&&this.readers.push(new Ht),l.includes(Be.RSS_EXPANDED)&&this.readers.push(new Ce(this.verbose))):(this.readers.push(new ks(i)),this.readers.push(new zt),this.readers.push(new ks(i)),this.readers.push(new Le),this.readers.push(new ot),this.readers.push(new Ht),this.readers.push(new Ce(this.verbose)))}decodeRow(i,o,l){for(let f=0;f<this.readers.length;f++)try{return this.readers[f].decodeRow(i,o,l)}catch{}throw new fe}reset(){this.readers.forEach(i=>i.reset())}}class aa extends je{constructor(i=500,o){super(new Cr(o),i,o)}}class Pt{constructor(i,o,l){this.ecCodewords=i,this.ecBlocks=[o],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Mt{constructor(i,o){this.count=i,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class vt{constructor(i,o,l,f,d,m){this.versionNumber=i,this.symbolSizeRows=o,this.symbolSizeColumns=l,this.dataRegionSizeRows=f,this.dataRegionSizeColumns=d,this.ecBlocks=m;let y=0;const b=m.getECCodewords(),S=m.getECBlocks();for(let R of S)y+=R.getCount()*(R.getDataCodewords()+b);this.totalCodewords=y}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(i,o){if((i&1)!==0||(o&1)!==0)throw new F;for(let l of vt.VERSIONS)if(l.symbolSizeRows===i&&l.symbolSizeColumns===o)return l;throw new F}toString(){return""+this.versionNumber}static buildVersions(){return[new vt(1,10,10,8,8,new Pt(5,new Mt(1,3))),new vt(2,12,12,10,10,new Pt(7,new Mt(1,5))),new vt(3,14,14,12,12,new Pt(10,new Mt(1,8))),new vt(4,16,16,14,14,new Pt(12,new Mt(1,12))),new vt(5,18,18,16,16,new Pt(14,new Mt(1,18))),new vt(6,20,20,18,18,new Pt(18,new Mt(1,22))),new vt(7,22,22,20,20,new Pt(20,new Mt(1,30))),new vt(8,24,24,22,22,new Pt(24,new Mt(1,36))),new vt(9,26,26,24,24,new Pt(28,new Mt(1,44))),new vt(10,32,32,14,14,new Pt(36,new Mt(1,62))),new vt(11,36,36,16,16,new Pt(42,new Mt(1,86))),new vt(12,40,40,18,18,new Pt(48,new Mt(1,114))),new vt(13,44,44,20,20,new Pt(56,new Mt(1,144))),new vt(14,48,48,22,22,new Pt(68,new Mt(1,174))),new vt(15,52,52,24,24,new Pt(42,new Mt(2,102))),new vt(16,64,64,14,14,new Pt(56,new Mt(2,140))),new vt(17,72,72,16,16,new Pt(36,new Mt(4,92))),new vt(18,80,80,18,18,new Pt(48,new Mt(4,114))),new vt(19,88,88,20,20,new Pt(56,new Mt(4,144))),new vt(20,96,96,22,22,new Pt(68,new Mt(4,174))),new vt(21,104,104,24,24,new Pt(56,new Mt(6,136))),new vt(22,120,120,18,18,new Pt(68,new Mt(6,175))),new vt(23,132,132,20,20,new Pt(62,new Mt(8,163))),new vt(24,144,144,22,22,new Pt(62,new Mt(8,156),new Mt(2,155))),new vt(25,8,18,6,16,new Pt(7,new Mt(1,5))),new vt(26,8,32,6,14,new Pt(11,new Mt(1,10))),new vt(27,12,26,10,24,new Pt(14,new Mt(1,16))),new vt(28,12,36,10,16,new Pt(18,new Mt(1,22))),new vt(29,16,36,14,16,new Pt(24,new Mt(1,32))),new vt(30,16,48,14,22,new Pt(28,new Mt(1,49)))]}}vt.VERSIONS=vt.buildVersions();class os{constructor(i){const o=i.getHeight();if(o<8||o>144||(o&1)!==0)throw new F;this.version=os.readVersion(i),this.mappingBitMatrix=this.extractDataRegion(i),this.readMappingMatrix=new Qe(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(i){const o=i.getHeight(),l=i.getWidth();return vt.getVersionForDimensions(o,l)}readCodewords(){const i=new Int8Array(this.version.getTotalCodewords());let o=0,l=4,f=0;const d=this.mappingBitMatrix.getHeight(),m=this.mappingBitMatrix.getWidth();let y=!1,b=!1,S=!1,R=!1;do if(l===d&&f===0&&!y)i[o++]=this.readCorner1(d,m)&255,l-=2,f+=2,y=!0;else if(l===d-2&&f===0&&(m&3)!==0&&!b)i[o++]=this.readCorner2(d,m)&255,l-=2,f+=2,b=!0;else if(l===d+4&&f===2&&(m&7)===0&&!S)i[o++]=this.readCorner3(d,m)&255,l-=2,f+=2,S=!0;else if(l===d-2&&f===0&&(m&7)===4&&!R)i[o++]=this.readCorner4(d,m)&255,l-=2,f+=2,R=!0;else{do l<d&&f>=0&&!this.readMappingMatrix.get(f,l)&&(i[o++]=this.readUtah(l,f,d,m)&255),l-=2,f+=2;while(l>=0&&f<m);l+=1,f+=3;do l>=0&&f<m&&!this.readMappingMatrix.get(f,l)&&(i[o++]=this.readUtah(l,f,d,m)&255),l+=2,f-=2;while(l<d&&f>=0);l+=3,f+=1}while(l<d||f<m);if(o!==this.version.getTotalCodewords())throw new F;return i}readModule(i,o,l,f){return i<0&&(i+=l,o+=4-(l+4&7)),o<0&&(o+=f,i+=4-(f+4&7)),this.readMappingMatrix.set(o,i),this.mappingBitMatrix.get(o,i)}readUtah(i,o,l,f){let d=0;return this.readModule(i-2,o-2,l,f)&&(d|=1),d<<=1,this.readModule(i-2,o-1,l,f)&&(d|=1),d<<=1,this.readModule(i-1,o-2,l,f)&&(d|=1),d<<=1,this.readModule(i-1,o-1,l,f)&&(d|=1),d<<=1,this.readModule(i-1,o,l,f)&&(d|=1),d<<=1,this.readModule(i,o-2,l,f)&&(d|=1),d<<=1,this.readModule(i,o-1,l,f)&&(d|=1),d<<=1,this.readModule(i,o,l,f)&&(d|=1),d}readCorner1(i,o){let l=0;return this.readModule(i-1,0,i,o)&&(l|=1),l<<=1,this.readModule(i-1,1,i,o)&&(l|=1),l<<=1,this.readModule(i-1,2,i,o)&&(l|=1),l<<=1,this.readModule(0,o-2,i,o)&&(l|=1),l<<=1,this.readModule(0,o-1,i,o)&&(l|=1),l<<=1,this.readModule(1,o-1,i,o)&&(l|=1),l<<=1,this.readModule(2,o-1,i,o)&&(l|=1),l<<=1,this.readModule(3,o-1,i,o)&&(l|=1),l}readCorner2(i,o){let l=0;return this.readModule(i-3,0,i,o)&&(l|=1),l<<=1,this.readModule(i-2,0,i,o)&&(l|=1),l<<=1,this.readModule(i-1,0,i,o)&&(l|=1),l<<=1,this.readModule(0,o-4,i,o)&&(l|=1),l<<=1,this.readModule(0,o-3,i,o)&&(l|=1),l<<=1,this.readModule(0,o-2,i,o)&&(l|=1),l<<=1,this.readModule(0,o-1,i,o)&&(l|=1),l<<=1,this.readModule(1,o-1,i,o)&&(l|=1),l}readCorner3(i,o){let l=0;return this.readModule(i-1,0,i,o)&&(l|=1),l<<=1,this.readModule(i-1,o-1,i,o)&&(l|=1),l<<=1,this.readModule(0,o-3,i,o)&&(l|=1),l<<=1,this.readModule(0,o-2,i,o)&&(l|=1),l<<=1,this.readModule(0,o-1,i,o)&&(l|=1),l<<=1,this.readModule(1,o-3,i,o)&&(l|=1),l<<=1,this.readModule(1,o-2,i,o)&&(l|=1),l<<=1,this.readModule(1,o-1,i,o)&&(l|=1),l}readCorner4(i,o){let l=0;return this.readModule(i-3,0,i,o)&&(l|=1),l<<=1,this.readModule(i-2,0,i,o)&&(l|=1),l<<=1,this.readModule(i-1,0,i,o)&&(l|=1),l<<=1,this.readModule(0,o-2,i,o)&&(l|=1),l<<=1,this.readModule(0,o-1,i,o)&&(l|=1),l<<=1,this.readModule(1,o-1,i,o)&&(l|=1),l<<=1,this.readModule(2,o-1,i,o)&&(l|=1),l<<=1,this.readModule(3,o-1,i,o)&&(l|=1),l}extractDataRegion(i){const o=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(i.getHeight()!==o)throw new I("Dimension of bitMatrix must match the version size");const f=this.version.getDataRegionSizeRows(),d=this.version.getDataRegionSizeColumns(),m=o/f|0,y=l/d|0,b=m*f,S=y*d,R=new Qe(S,b);for(let L=0;L<m;++L){const k=L*f;for(let q=0;q<y;++q){const te=q*d;for(let re=0;re<f;++re){const he=L*(f+2)+1+re,ye=k+re;for(let Ue=0;Ue<d;++Ue){const ke=q*(d+2)+1+Ue;if(i.get(ke,he)){const Oe=te+Ue;R.set(Oe,ye)}}}}}return R}}class Ir{constructor(i,o){this.numDataCodewords=i,this.codewords=o}static getDataBlocks(i,o){const l=o.getECBlocks();let f=0;const d=l.getECBlocks();for(let re of d)f+=re.getCount();const m=new Array(f);let y=0;for(let re of d)for(let he=0;he<re.getCount();he++){const ye=re.getDataCodewords(),Ue=l.getECCodewords()+ye;m[y++]=new Ir(ye,new Uint8Array(Ue))}const S=m[0].codewords.length-l.getECCodewords(),R=S-1;let L=0;for(let re=0;re<R;re++)for(let he=0;he<y;he++)m[he].codewords[re]=i[L++];const k=o.getVersionNumber()===24,q=k?8:y;for(let re=0;re<q;re++)m[re].codewords[S-1]=i[L++];const te=m[0].codewords.length;for(let re=S;re<te;re++)for(let he=0;he<y;he++){const ye=k?(he+8)%y:he,Ue=k&&ye>7?re-1:re;m[ye].codewords[Ue]=i[L++]}if(L!==i.length)throw new I;return m}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Dn{constructor(i){this.bytes=i,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(i){if(i<1||i>32||i>this.available())throw new I(""+i);let o=0,l=this.bitOffset,f=this.byteOffset;const d=this.bytes;if(l>0){const m=8-l,y=i<m?i:m,b=m-y,S=255>>8-y<<b;o=(d[f]&S)>>b,i-=y,l+=y,l===8&&(l=0,f++)}if(i>0){for(;i>=8;)o=o<<8|d[f]&255,f++,i-=8;if(i>0){const m=8-i,y=255>>m<<m;o=o<<i|(d[f]&y)>>m,l+=i}}return this.bitOffset=l,this.byteOffset=f,o}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Rt;(function(P){P[P.PAD_ENCODE=0]="PAD_ENCODE",P[P.ASCII_ENCODE=1]="ASCII_ENCODE",P[P.C40_ENCODE=2]="C40_ENCODE",P[P.TEXT_ENCODE=3]="TEXT_ENCODE",P[P.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",P[P.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",P[P.BASE256_ENCODE=6]="BASE256_ENCODE"})(Rt||(Rt={}));class Nr{static decode(i){const o=new Dn(i),l=new G,f=new G,d=new Array;let m=Rt.ASCII_ENCODE;do if(m===Rt.ASCII_ENCODE)m=this.decodeAsciiSegment(o,l,f);else{switch(m){case Rt.C40_ENCODE:this.decodeC40Segment(o,l);break;case Rt.TEXT_ENCODE:this.decodeTextSegment(o,l);break;case Rt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(o,l);break;case Rt.EDIFACT_ENCODE:this.decodeEdifactSegment(o,l);break;case Rt.BASE256_ENCODE:this.decodeBase256Segment(o,l,d);break;default:throw new F}m=Rt.ASCII_ENCODE}while(m!==Rt.PAD_ENCODE&&o.available()>0);return f.length()>0&&l.append(f.toString()),new Qt(i,l.toString(),d.length===0?null:d,null)}static decodeAsciiSegment(i,o,l){let f=!1;do{let d=i.readBits(8);if(d===0)throw new F;if(d<=128)return f&&(d+=128),o.append(String.fromCharCode(d-1)),Rt.ASCII_ENCODE;if(d===129)return Rt.PAD_ENCODE;if(d<=229){const m=d-130;m<10&&o.append("0"),o.append(""+m)}else switch(d){case 230:return Rt.C40_ENCODE;case 231:return Rt.BASE256_ENCODE;case 232:o.append("");break;case 233:case 234:break;case 235:f=!0;break;case 236:o.append("[)>05"),l.insert(0,"");break;case 237:o.append("[)>06"),l.insert(0,"");break;case 238:return Rt.ANSIX12_ENCODE;case 239:return Rt.TEXT_ENCODE;case 240:return Rt.EDIFACT_ENCODE;case 241:break;default:if(d!==254||i.available()!==0)throw new F;break}}while(i.available()>0);return Rt.ASCII_ENCODE}static decodeC40Segment(i,o){let l=!1;const f=[];let d=0;do{if(i.available()===8)return;const m=i.readBits(8);if(m===254)return;this.parseTwoBytes(m,i.readBits(8),f);for(let y=0;y<3;y++){const b=f[y];switch(d){case 0:if(b<3)d=b+1;else if(b<this.C40_BASIC_SET_CHARS.length){const S=this.C40_BASIC_SET_CHARS[b];l?(o.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):o.append(S)}else throw new F;break;case 1:l?(o.append(String.fromCharCode(b+128)),l=!1):o.append(String.fromCharCode(b)),d=0;break;case 2:if(b<this.C40_SHIFT2_SET_CHARS.length){const S=this.C40_SHIFT2_SET_CHARS[b];l?(o.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):o.append(S)}else switch(b){case 27:o.append("");break;case 30:l=!0;break;default:throw new F}d=0;break;case 3:l?(o.append(String.fromCharCode(b+224)),l=!1):o.append(String.fromCharCode(b+96)),d=0;break;default:throw new F}}}while(i.available()>0)}static decodeTextSegment(i,o){let l=!1,f=[],d=0;do{if(i.available()===8)return;const m=i.readBits(8);if(m===254)return;this.parseTwoBytes(m,i.readBits(8),f);for(let y=0;y<3;y++){const b=f[y];switch(d){case 0:if(b<3)d=b+1;else if(b<this.TEXT_BASIC_SET_CHARS.length){const S=this.TEXT_BASIC_SET_CHARS[b];l?(o.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):o.append(S)}else throw new F;break;case 1:l?(o.append(String.fromCharCode(b+128)),l=!1):o.append(String.fromCharCode(b)),d=0;break;case 2:if(b<this.TEXT_SHIFT2_SET_CHARS.length){const S=this.TEXT_SHIFT2_SET_CHARS[b];l?(o.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):o.append(S)}else switch(b){case 27:o.append("");break;case 30:l=!0;break;default:throw new F}d=0;break;case 3:if(b<this.TEXT_SHIFT3_SET_CHARS.length){const S=this.TEXT_SHIFT3_SET_CHARS[b];l?(o.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):o.append(S),d=0}else throw new F;break;default:throw new F}}}while(i.available()>0)}static decodeAnsiX12Segment(i,o){const l=[];do{if(i.available()===8)return;const f=i.readBits(8);if(f===254)return;this.parseTwoBytes(f,i.readBits(8),l);for(let d=0;d<3;d++){const m=l[d];switch(m){case 0:o.append("\r");break;case 1:o.append("*");break;case 2:o.append(">");break;case 3:o.append(" ");break;default:if(m<14)o.append(String.fromCharCode(m+44));else if(m<40)o.append(String.fromCharCode(m+51));else throw new F;break}}}while(i.available()>0)}static parseTwoBytes(i,o,l){let f=(i<<8)+o-1,d=Math.floor(f/1600);l[0]=d,f-=d*1600,d=Math.floor(f/40),l[1]=d,l[2]=f-d*40}static decodeEdifactSegment(i,o){do{if(i.available()<=16)return;for(let l=0;l<4;l++){let f=i.readBits(6);if(f===31){const d=8-i.getBitOffset();d!==8&&i.readBits(d);return}(f&32)===0&&(f|=64),o.append(String.fromCharCode(f))}}while(i.available()>0)}static decodeBase256Segment(i,o,l){let f=1+i.getByteOffset();const d=this.unrandomize255State(i.readBits(8),f++);let m;if(d===0?m=i.available()/8|0:d<250?m=d:m=250*(d-249)+this.unrandomize255State(i.readBits(8),f++),m<0)throw new F;const y=new Uint8Array(m);for(let b=0;b<m;b++){if(i.available()<8)throw new F;y[b]=this.unrandomize255State(i.readBits(8),f++)}l.push(y);try{o.append(J.decode(y,$.ISO88591))}catch(b){throw new Sr("Platform does not support required encoding: "+b.message)}}static unrandomize255State(i,o){const l=149*o%255+1,f=i-l;return f>=0?f:f+256}}Nr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Nr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Nr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Nr.TEXT_SHIFT2_SET_CHARS=Nr.C40_SHIFT2_SET_CHARS,Nr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class oa{constructor(){this.rsDecoder=new ei(bt.DATA_MATRIX_FIELD_256)}decode(i){const o=new os(i),l=o.getVersion(),f=o.readCodewords(),d=Ir.getDataBlocks(f,l);let m=0;for(let S of d)m+=S.getNumDataCodewords();const y=new Uint8Array(m),b=d.length;for(let S=0;S<b;S++){const R=d[S],L=R.getCodewords(),k=R.getNumDataCodewords();this.correctErrors(L,k);for(let q=0;q<k;q++)y[q*b+S]=L[q]}return Nr.decode(y)}correctErrors(i,o){const l=new Int32Array(i);try{this.rsDecoder.decode(l,i.length-o)}catch{throw new B}for(let f=0;f<o;f++)i[f]=l[f]}}class st{constructor(i){this.image=i,this.rectangleDetector=new xn(this.image)}detect(){const i=this.rectangleDetector.detect();let o=this.detectSolid1(i);if(o=this.detectSolid2(o),o[3]=this.correctTopRight(o),!o[3])throw new fe;o=this.shiftToModuleCenter(o);const l=o[0],f=o[1],d=o[2],m=o[3];let y=this.transitionsBetween(l,m)+1,b=this.transitionsBetween(d,m)+1;(y&1)===1&&(y+=1),(b&1)===1&&(b+=1),4*y<7*b&&4*b<7*y&&(y=b=Math.max(y,b));let S=st.sampleGrid(this.image,l,f,d,m,y,b);return new is(S,[l,f,d,m])}static shiftPoint(i,o,l){let f=(o.getX()-i.getX())/(l+1),d=(o.getY()-i.getY())/(l+1);return new ze(i.getX()+f,i.getY()+d)}static moveAway(i,o,l){let f=i.getX(),d=i.getY();return f<o?f-=1:f+=1,d<l?d-=1:d+=1,new ze(f,d)}detectSolid1(i){let o=i[0],l=i[1],f=i[3],d=i[2],m=this.transitionsBetween(o,l),y=this.transitionsBetween(l,f),b=this.transitionsBetween(f,d),S=this.transitionsBetween(d,o),R=m,L=[d,o,l,f];return R>y&&(R=y,L[0]=o,L[1]=l,L[2]=f,L[3]=d),R>b&&(R=b,L[0]=l,L[1]=f,L[2]=d,L[3]=o),R>S&&(L[0]=f,L[1]=d,L[2]=o,L[3]=l),L}detectSolid2(i){let o=i[0],l=i[1],f=i[2],d=i[3],m=this.transitionsBetween(o,d),y=st.shiftPoint(l,f,(m+1)*4),b=st.shiftPoint(f,l,(m+1)*4),S=this.transitionsBetween(y,o),R=this.transitionsBetween(b,d);return S<R?(i[0]=o,i[1]=l,i[2]=f,i[3]=d):(i[0]=l,i[1]=f,i[2]=d,i[3]=o),i}correctTopRight(i){let o=i[0],l=i[1],f=i[2],d=i[3],m=this.transitionsBetween(o,d),y=this.transitionsBetween(l,d),b=st.shiftPoint(o,l,(y+1)*4),S=st.shiftPoint(f,l,(m+1)*4);m=this.transitionsBetween(b,d),y=this.transitionsBetween(S,d);let R=new ze(d.getX()+(f.getX()-l.getX())/(m+1),d.getY()+(f.getY()-l.getY())/(m+1)),L=new ze(d.getX()+(o.getX()-l.getX())/(y+1),d.getY()+(o.getY()-l.getY())/(y+1));if(!this.isValid(R))return this.isValid(L)?L:null;if(!this.isValid(L))return R;let k=this.transitionsBetween(b,R)+this.transitionsBetween(S,R),q=this.transitionsBetween(b,L)+this.transitionsBetween(S,L);return k>q?R:L}shiftToModuleCenter(i){let o=i[0],l=i[1],f=i[2],d=i[3],m=this.transitionsBetween(o,d)+1,y=this.transitionsBetween(f,d)+1,b=st.shiftPoint(o,l,y*4),S=st.shiftPoint(f,l,m*4);m=this.transitionsBetween(b,d)+1,y=this.transitionsBetween(S,d)+1,(m&1)===1&&(m+=1),(y&1)===1&&(y+=1);let R=(o.getX()+l.getX()+f.getX()+d.getX())/4,L=(o.getY()+l.getY()+f.getY()+d.getY())/4;o=st.moveAway(o,R,L),l=st.moveAway(l,R,L),f=st.moveAway(f,R,L),d=st.moveAway(d,R,L);let k,q;return b=st.shiftPoint(o,l,y*4),b=st.shiftPoint(b,d,m*4),k=st.shiftPoint(l,o,y*4),k=st.shiftPoint(k,f,m*4),S=st.shiftPoint(f,d,y*4),S=st.shiftPoint(S,l,m*4),q=st.shiftPoint(d,f,y*4),q=st.shiftPoint(q,o,m*4),[b,k,S,q]}isValid(i){return i.getX()>=0&&i.getX()<this.image.getWidth()&&i.getY()>0&&i.getY()<this.image.getHeight()}static sampleGrid(i,o,l,f,d,m,y){return pr.getInstance().sampleGrid(i,m,y,.5,.5,m-.5,.5,m-.5,y-.5,.5,y-.5,o.getX(),o.getY(),d.getX(),d.getY(),f.getX(),f.getY(),l.getX(),l.getY())}transitionsBetween(i,o){let l=Math.trunc(i.getX()),f=Math.trunc(i.getY()),d=Math.trunc(o.getX()),m=Math.trunc(o.getY()),y=Math.abs(m-f)>Math.abs(d-l);if(y){let re=l;l=f,f=re,re=d,d=m,m=re}let b=Math.abs(d-l),S=Math.abs(m-f),R=-b/2,L=f<m?1:-1,k=l<d?1:-1,q=0,te=this.image.get(y?f:l,y?l:f);for(let re=l,he=f;re!==d;re+=k){let ye=this.image.get(y?he:re,y?re:he);if(ye!==te&&(q++,te=ye),R+=S,R>0){if(he===m)break;he+=L,R-=b}}return q}}class Rr{constructor(){this.decoder=new oa}decode(i,o=null){let l,f;if(o!=null&&o.has(De.PURE_BARCODE)){const S=Rr.extractPureBits(i.getBlackMatrix());l=this.decoder.decode(S),f=Rr.NO_POINTS}else{const S=new st(i.getBlackMatrix()).detect();l=this.decoder.decode(S.getBits()),f=S.getPoints()}const d=l.getRawBytes(),m=new Fe(l.getText(),d,8*d.length,f,Be.DATA_MATRIX,Q.currentTimeMillis()),y=l.getByteSegments();y!=null&&m.putMetadata(mt.BYTE_SEGMENTS,y);const b=l.getECLevel();return b!=null&&m.putMetadata(mt.ERROR_CORRECTION_LEVEL,b),m}reset(){}static extractPureBits(i){const o=i.getTopLeftOnBit(),l=i.getBottomRightOnBit();if(o==null||l==null)throw new fe;const f=this.moduleSize(o,i);let d=o[1];const m=l[1];let y=o[0];const S=(l[0]-y+1)/f,R=(m-d+1)/f;if(S<=0||R<=0)throw new fe;const L=f/2;d+=L,y+=L;const k=new Qe(S,R);for(let q=0;q<R;q++){const te=d+q*f;for(let re=0;re<S;re++)i.get(y+re*f,te)&&k.set(re,q)}return k}static moduleSize(i,o){const l=o.getWidth();let f=i[0];const d=i[1];for(;f<l&&o.get(f,d);)f++;if(f===l)throw new fe;const m=f-i[0];if(m===0)throw new fe;return m}}Rr.NO_POINTS=[];class X extends je{constructor(i=500){super(new Rr,i)}}var Me;(function(P){P[P.L=0]="L",P[P.M=1]="M",P[P.Q=2]="Q",P[P.H=3]="H"})(Me||(Me={}));class Pe{constructor(i,o,l){this.value=i,this.stringValue=o,this.bits=l,Pe.FOR_BITS.set(l,this),Pe.FOR_VALUE.set(i,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(i){switch(i){case"L":return Pe.L;case"M":return Pe.M;case"Q":return Pe.Q;case"H":return Pe.H;default:throw new C(i+"not available")}}toString(){return this.stringValue}equals(i){if(!(i instanceof Pe))return!1;const o=i;return this.value===o.value}static forBits(i){if(i<0||i>=Pe.FOR_BITS.size)throw new I;return Pe.FOR_BITS.get(i)}}Pe.FOR_BITS=new Map,Pe.FOR_VALUE=new Map,Pe.L=new Pe(Me.L,"L",1),Pe.M=new Pe(Me.M,"M",0),Pe.Q=new Pe(Me.Q,"Q",3),Pe.H=new Pe(Me.H,"H",2);class tt{constructor(i){this.errorCorrectionLevel=Pe.forBits(i>>3&3),this.dataMask=i&7}static numBitsDiffering(i,o){return K.bitCount(i^o)}static decodeFormatInformation(i,o){const l=tt.doDecodeFormatInformation(i,o);return l!==null?l:tt.doDecodeFormatInformation(i^tt.FORMAT_INFO_MASK_QR,o^tt.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(i,o){let l=Number.MAX_SAFE_INTEGER,f=0;for(const d of tt.FORMAT_INFO_DECODE_LOOKUP){const m=d[0];if(m===i||m===o)return new tt(d[1]);let y=tt.numBitsDiffering(i,m);y<l&&(f=d[1],l=y),i!==o&&(y=tt.numBitsDiffering(o,m),y<l&&(f=d[1],l=y))}return l<=3?new tt(f):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(i){if(!(i instanceof tt))return!1;const o=i;return this.errorCorrectionLevel===o.errorCorrectionLevel&&this.dataMask===o.dataMask}}tt.FORMAT_INFO_MASK_QR=21522,tt.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class le{constructor(i,...o){this.ecCodewordsPerBlock=i,this.ecBlocks=o}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let i=0;const o=this.ecBlocks;for(const l of o)i+=l.getCount();return i}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class H{constructor(i,o){this.count=i,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class qe{constructor(i,o,...l){this.versionNumber=i,this.alignmentPatternCenters=o,this.ecBlocks=l;let f=0;const d=l[0].getECCodewordsPerBlock(),m=l[0].getECBlocks();for(const y of m)f+=y.getCount()*(y.getDataCodewords()+d);this.totalCodewords=f}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(i){return this.ecBlocks[i.getValue()]}static getProvisionalVersionForDimension(i){if(i%4!==1)throw new F;try{return this.getVersionForNumber((i-17)/4)}catch{throw new F}}static getVersionForNumber(i){if(i<1||i>40)throw new I;return qe.VERSIONS[i-1]}static decodeVersionInformation(i){let o=Number.MAX_SAFE_INTEGER,l=0;for(let f=0;f<qe.VERSION_DECODE_INFO.length;f++){const d=qe.VERSION_DECODE_INFO[f];if(d===i)return qe.getVersionForNumber(f+7);const m=tt.numBitsDiffering(i,d);m<o&&(l=f+7,o=m)}return o<=3?qe.getVersionForNumber(l):null}buildFunctionPattern(){const i=this.getDimensionForVersion(),o=new Qe(i);o.setRegion(0,0,9,9),o.setRegion(i-8,0,8,9),o.setRegion(0,i-8,9,8);const l=this.alignmentPatternCenters.length;for(let f=0;f<l;f++){const d=this.alignmentPatternCenters[f]-2;for(let m=0;m<l;m++)f===0&&(m===0||m===l-1)||f===l-1&&m===0||o.setRegion(this.alignmentPatternCenters[m]-2,d,5,5)}return o.setRegion(6,9,1,i-17),o.setRegion(9,6,i-17,1),this.versionNumber>6&&(o.setRegion(i-11,0,3,6),o.setRegion(0,i-11,6,3)),o}toString(){return""+this.versionNumber}}qe.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),qe.VERSIONS=[new qe(1,new Int32Array(0),new le(7,new H(1,19)),new le(10,new H(1,16)),new le(13,new H(1,13)),new le(17,new H(1,9))),new qe(2,Int32Array.from([6,18]),new le(10,new H(1,34)),new le(16,new H(1,28)),new le(22,new H(1,22)),new le(28,new H(1,16))),new qe(3,Int32Array.from([6,22]),new le(15,new H(1,55)),new le(26,new H(1,44)),new le(18,new H(2,17)),new le(22,new H(2,13))),new qe(4,Int32Array.from([6,26]),new le(20,new H(1,80)),new le(18,new H(2,32)),new le(26,new H(2,24)),new le(16,new H(4,9))),new qe(5,Int32Array.from([6,30]),new le(26,new H(1,108)),new le(24,new H(2,43)),new le(18,new H(2,15),new H(2,16)),new le(22,new H(2,11),new H(2,12))),new qe(6,Int32Array.from([6,34]),new le(18,new H(2,68)),new le(16,new H(4,27)),new le(24,new H(4,19)),new le(28,new H(4,15))),new qe(7,Int32Array.from([6,22,38]),new le(20,new H(2,78)),new le(18,new H(4,31)),new le(18,new H(2,14),new H(4,15)),new le(26,new H(4,13),new H(1,14))),new qe(8,Int32Array.from([6,24,42]),new le(24,new H(2,97)),new le(22,new H(2,38),new H(2,39)),new le(22,new H(4,18),new H(2,19)),new le(26,new H(4,14),new H(2,15))),new qe(9,Int32Array.from([6,26,46]),new le(30,new H(2,116)),new le(22,new H(3,36),new H(2,37)),new le(20,new H(4,16),new H(4,17)),new le(24,new H(4,12),new H(4,13))),new qe(10,Int32Array.from([6,28,50]),new le(18,new H(2,68),new H(2,69)),new le(26,new H(4,43),new H(1,44)),new le(24,new H(6,19),new H(2,20)),new le(28,new H(6,15),new H(2,16))),new qe(11,Int32Array.from([6,30,54]),new le(20,new H(4,81)),new le(30,new H(1,50),new H(4,51)),new le(28,new H(4,22),new H(4,23)),new le(24,new H(3,12),new H(8,13))),new qe(12,Int32Array.from([6,32,58]),new le(24,new H(2,92),new H(2,93)),new le(22,new H(6,36),new H(2,37)),new le(26,new H(4,20),new H(6,21)),new le(28,new H(7,14),new H(4,15))),new qe(13,Int32Array.from([6,34,62]),new le(26,new H(4,107)),new le(22,new H(8,37),new H(1,38)),new le(24,new H(8,20),new H(4,21)),new le(22,new H(12,11),new H(4,12))),new qe(14,Int32Array.from([6,26,46,66]),new le(30,new H(3,115),new H(1,116)),new le(24,new H(4,40),new H(5,41)),new le(20,new H(11,16),new H(5,17)),new le(24,new H(11,12),new H(5,13))),new qe(15,Int32Array.from([6,26,48,70]),new le(22,new H(5,87),new H(1,88)),new le(24,new H(5,41),new H(5,42)),new le(30,new H(5,24),new H(7,25)),new le(24,new H(11,12),new H(7,13))),new qe(16,Int32Array.from([6,26,50,74]),new le(24,new H(5,98),new H(1,99)),new le(28,new H(7,45),new H(3,46)),new le(24,new H(15,19),new H(2,20)),new le(30,new H(3,15),new H(13,16))),new qe(17,Int32Array.from([6,30,54,78]),new le(28,new H(1,107),new H(5,108)),new le(28,new H(10,46),new H(1,47)),new le(28,new H(1,22),new H(15,23)),new le(28,new H(2,14),new H(17,15))),new qe(18,Int32Array.from([6,30,56,82]),new le(30,new H(5,120),new H(1,121)),new le(26,new H(9,43),new H(4,44)),new le(28,new H(17,22),new H(1,23)),new le(28,new H(2,14),new H(19,15))),new qe(19,Int32Array.from([6,30,58,86]),new le(28,new H(3,113),new H(4,114)),new le(26,new H(3,44),new H(11,45)),new le(26,new H(17,21),new H(4,22)),new le(26,new H(9,13),new H(16,14))),new qe(20,Int32Array.from([6,34,62,90]),new le(28,new H(3,107),new H(5,108)),new le(26,new H(3,41),new H(13,42)),new le(30,new H(15,24),new H(5,25)),new le(28,new H(15,15),new H(10,16))),new qe(21,Int32Array.from([6,28,50,72,94]),new le(28,new H(4,116),new H(4,117)),new le(26,new H(17,42)),new le(28,new H(17,22),new H(6,23)),new le(30,new H(19,16),new H(6,17))),new qe(22,Int32Array.from([6,26,50,74,98]),new le(28,new H(2,111),new H(7,112)),new le(28,new H(17,46)),new le(30,new H(7,24),new H(16,25)),new le(24,new H(34,13))),new qe(23,Int32Array.from([6,30,54,78,102]),new le(30,new H(4,121),new H(5,122)),new le(28,new H(4,47),new H(14,48)),new le(30,new H(11,24),new H(14,25)),new le(30,new H(16,15),new H(14,16))),new qe(24,Int32Array.from([6,28,54,80,106]),new le(30,new H(6,117),new H(4,118)),new le(28,new H(6,45),new H(14,46)),new le(30,new H(11,24),new H(16,25)),new le(30,new H(30,16),new H(2,17))),new qe(25,Int32Array.from([6,32,58,84,110]),new le(26,new H(8,106),new H(4,107)),new le(28,new H(8,47),new H(13,48)),new le(30,new H(7,24),new H(22,25)),new le(30,new H(22,15),new H(13,16))),new qe(26,Int32Array.from([6,30,58,86,114]),new le(28,new H(10,114),new H(2,115)),new le(28,new H(19,46),new H(4,47)),new le(28,new H(28,22),new H(6,23)),new le(30,new H(33,16),new H(4,17))),new qe(27,Int32Array.from([6,34,62,90,118]),new le(30,new H(8,122),new H(4,123)),new le(28,new H(22,45),new H(3,46)),new le(30,new H(8,23),new H(26,24)),new le(30,new H(12,15),new H(28,16))),new qe(28,Int32Array.from([6,26,50,74,98,122]),new le(30,new H(3,117),new H(10,118)),new le(28,new H(3,45),new H(23,46)),new le(30,new H(4,24),new H(31,25)),new le(30,new H(11,15),new H(31,16))),new qe(29,Int32Array.from([6,30,54,78,102,126]),new le(30,new H(7,116),new H(7,117)),new le(28,new H(21,45),new H(7,46)),new le(30,new H(1,23),new H(37,24)),new le(30,new H(19,15),new H(26,16))),new qe(30,Int32Array.from([6,26,52,78,104,130]),new le(30,new H(5,115),new H(10,116)),new le(28,new H(19,47),new H(10,48)),new le(30,new H(15,24),new H(25,25)),new le(30,new H(23,15),new H(25,16))),new qe(31,Int32Array.from([6,30,56,82,108,134]),new le(30,new H(13,115),new H(3,116)),new le(28,new H(2,46),new H(29,47)),new le(30,new H(42,24),new H(1,25)),new le(30,new H(23,15),new H(28,16))),new qe(32,Int32Array.from([6,34,60,86,112,138]),new le(30,new H(17,115)),new le(28,new H(10,46),new H(23,47)),new le(30,new H(10,24),new H(35,25)),new le(30,new H(19,15),new H(35,16))),new qe(33,Int32Array.from([6,30,58,86,114,142]),new le(30,new H(17,115),new H(1,116)),new le(28,new H(14,46),new H(21,47)),new le(30,new H(29,24),new H(19,25)),new le(30,new H(11,15),new H(46,16))),new qe(34,Int32Array.from([6,34,62,90,118,146]),new le(30,new H(13,115),new H(6,116)),new le(28,new H(14,46),new H(23,47)),new le(30,new H(44,24),new H(7,25)),new le(30,new H(59,16),new H(1,17))),new qe(35,Int32Array.from([6,30,54,78,102,126,150]),new le(30,new H(12,121),new H(7,122)),new le(28,new H(12,47),new H(26,48)),new le(30,new H(39,24),new H(14,25)),new le(30,new H(22,15),new H(41,16))),new qe(36,Int32Array.from([6,24,50,76,102,128,154]),new le(30,new H(6,121),new H(14,122)),new le(28,new H(6,47),new H(34,48)),new le(30,new H(46,24),new H(10,25)),new le(30,new H(2,15),new H(64,16))),new qe(37,Int32Array.from([6,28,54,80,106,132,158]),new le(30,new H(17,122),new H(4,123)),new le(28,new H(29,46),new H(14,47)),new le(30,new H(49,24),new H(10,25)),new le(30,new H(24,15),new H(46,16))),new qe(38,Int32Array.from([6,32,58,84,110,136,162]),new le(30,new H(4,122),new H(18,123)),new le(28,new H(13,46),new H(32,47)),new le(30,new H(48,24),new H(14,25)),new le(30,new H(42,15),new H(32,16))),new qe(39,Int32Array.from([6,26,54,82,110,138,166]),new le(30,new H(20,117),new H(4,118)),new le(28,new H(40,47),new H(7,48)),new le(30,new H(43,24),new H(22,25)),new le(30,new H(10,15),new H(67,16))),new qe(40,Int32Array.from([6,30,58,86,114,142,170]),new le(30,new H(19,118),new H(6,119)),new le(28,new H(18,47),new H(31,48)),new le(30,new H(34,24),new H(34,25)),new le(30,new H(20,15),new H(61,16)))];var Ln;(function(P){P[P.DATA_MASK_000=0]="DATA_MASK_000",P[P.DATA_MASK_001=1]="DATA_MASK_001",P[P.DATA_MASK_010=2]="DATA_MASK_010",P[P.DATA_MASK_011=3]="DATA_MASK_011",P[P.DATA_MASK_100=4]="DATA_MASK_100",P[P.DATA_MASK_101=5]="DATA_MASK_101",P[P.DATA_MASK_110=6]="DATA_MASK_110",P[P.DATA_MASK_111=7]="DATA_MASK_111"})(Ln||(Ln={}));class Xn{constructor(i,o){this.value=i,this.isMasked=o}unmaskBitMatrix(i,o){for(let l=0;l<o;l++)for(let f=0;f<o;f++)this.isMasked(l,f)&&i.flip(f,l)}}Xn.values=new Map([[Ln.DATA_MASK_000,new Xn(Ln.DATA_MASK_000,(P,i)=>(P+i&1)===0)],[Ln.DATA_MASK_001,new Xn(Ln.DATA_MASK_001,(P,i)=>(P&1)===0)],[Ln.DATA_MASK_010,new Xn(Ln.DATA_MASK_010,(P,i)=>i%3===0)],[Ln.DATA_MASK_011,new Xn(Ln.DATA_MASK_011,(P,i)=>(P+i)%3===0)],[Ln.DATA_MASK_100,new Xn(Ln.DATA_MASK_100,(P,i)=>(Math.floor(P/2)+Math.floor(i/3)&1)===0)],[Ln.DATA_MASK_101,new Xn(Ln.DATA_MASK_101,(P,i)=>P*i%6===0)],[Ln.DATA_MASK_110,new Xn(Ln.DATA_MASK_110,(P,i)=>P*i%6<3)],[Ln.DATA_MASK_111,new Xn(Ln.DATA_MASK_111,(P,i)=>(P+i+P*i%3&1)===0)]]);class vn{constructor(i){const o=i.getHeight();if(o<21||(o&3)!==1)throw new F;this.bitMatrix=i}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let i=0;for(let d=0;d<6;d++)i=this.copyBit(d,8,i);i=this.copyBit(7,8,i),i=this.copyBit(8,8,i),i=this.copyBit(8,7,i);for(let d=5;d>=0;d--)i=this.copyBit(8,d,i);const o=this.bitMatrix.getHeight();let l=0;const f=o-7;for(let d=o-1;d>=f;d--)l=this.copyBit(8,d,l);for(let d=o-8;d<o;d++)l=this.copyBit(d,8,l);if(this.parsedFormatInfo=tt.decodeFormatInformation(i,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new F}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const i=this.bitMatrix.getHeight(),o=Math.floor((i-17)/4);if(o<=6)return qe.getVersionForNumber(o);let l=0;const f=i-11;for(let m=5;m>=0;m--)for(let y=i-9;y>=f;y--)l=this.copyBit(y,m,l);let d=qe.decodeVersionInformation(l);if(d!==null&&d.getDimensionForVersion()===i)return this.parsedVersion=d,d;l=0;for(let m=5;m>=0;m--)for(let y=i-9;y>=f;y--)l=this.copyBit(m,y,l);if(d=qe.decodeVersionInformation(l),d!==null&&d.getDimensionForVersion()===i)return this.parsedVersion=d,d;throw new F}copyBit(i,o,l){return(this.isMirror?this.bitMatrix.get(o,i):this.bitMatrix.get(i,o))?l<<1|1:l<<1}readCodewords(){const i=this.readFormatInformation(),o=this.readVersion(),l=Xn.values.get(i.getDataMask()),f=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,f);const d=o.buildFunctionPattern();let m=!0;const y=new Uint8Array(o.getTotalCodewords());let b=0,S=0,R=0;for(let L=f-1;L>0;L-=2){L===6&&L--;for(let k=0;k<f;k++){const q=m?f-1-k:k;for(let te=0;te<2;te++)d.get(L-te,q)||(R++,S<<=1,this.bitMatrix.get(L-te,q)&&(S|=1),R===8&&(y[b++]=S,R=0,S=0))}m=!m}if(b!==o.getTotalCodewords())throw new F;return y}remask(){if(this.parsedFormatInfo===null)return;const i=Xn.values[this.parsedFormatInfo.getDataMask()],o=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,o)}setMirror(i){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=i}mirror(){const i=this.bitMatrix;for(let o=0,l=i.getWidth();o<l;o++)for(let f=o+1,d=i.getHeight();f<d;f++)i.get(o,f)!==i.get(f,o)&&(i.flip(f,o),i.flip(o,f))}}class Ts{constructor(i,o){this.numDataCodewords=i,this.codewords=o}static getDataBlocks(i,o,l){if(i.length!==o.getTotalCodewords())throw new I;const f=o.getECBlocksForLevel(l);let d=0;const m=f.getECBlocks();for(const te of m)d+=te.getCount();const y=new Array(d);let b=0;for(const te of m)for(let re=0;re<te.getCount();re++){const he=te.getDataCodewords(),ye=f.getECCodewordsPerBlock()+he;y[b++]=new Ts(he,new Uint8Array(ye))}const S=y[0].codewords.length;let R=y.length-1;for(;R>=0&&y[R].codewords.length!==S;)R--;R++;const L=S-f.getECCodewordsPerBlock();let k=0;for(let te=0;te<L;te++)for(let re=0;re<b;re++)y[re].codewords[te]=i[k++];for(let te=R;te<b;te++)y[te].codewords[L]=i[k++];const q=y[0].codewords.length;for(let te=L;te<q;te++)for(let re=0;re<b;re++){const he=re<R?te:te+1;y[re].codewords[he]=i[k++]}return y}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Tn;(function(P){P[P.TERMINATOR=0]="TERMINATOR",P[P.NUMERIC=1]="NUMERIC",P[P.ALPHANUMERIC=2]="ALPHANUMERIC",P[P.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",P[P.BYTE=4]="BYTE",P[P.ECI=5]="ECI",P[P.KANJI=6]="KANJI",P[P.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",P[P.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",P[P.HANZI=9]="HANZI"})(Tn||(Tn={}));class Je{constructor(i,o,l,f){this.value=i,this.stringValue=o,this.characterCountBitsForVersions=l,this.bits=f,Je.FOR_BITS.set(f,this),Je.FOR_VALUE.set(i,this)}static forBits(i){const o=Je.FOR_BITS.get(i);if(o===void 0)throw new I;return o}getCharacterCountBits(i){const o=i.getVersionNumber();let l;return o<=9?l=0:o<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(i){if(!(i instanceof Je))return!1;const o=i;return this.value===o.value}toString(){return this.stringValue}}Je.FOR_BITS=new Map,Je.FOR_VALUE=new Map,Je.TERMINATOR=new Je(Tn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Je.NUMERIC=new Je(Tn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Je.ALPHANUMERIC=new Je(Tn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Je.STRUCTURED_APPEND=new Je(Tn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Je.BYTE=new Je(Tn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Je.ECI=new Je(Tn.ECI,"ECI",Int32Array.from([0,0,0]),7),Je.KANJI=new Je(Tn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Je.FNC1_FIRST_POSITION=new Je(Tn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Je.FNC1_SECOND_POSITION=new Je(Tn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Je.HANZI=new Je(Tn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class un{static decode(i,o,l,f){const d=new Dn(i);let m=new G;const y=new Array;let b=-1,S=-1;try{let R=null,L=!1,k;do{if(d.available()<4)k=Je.TERMINATOR;else{const q=d.readBits(4);k=Je.forBits(q)}switch(k){case Je.TERMINATOR:break;case Je.FNC1_FIRST_POSITION:case Je.FNC1_SECOND_POSITION:L=!0;break;case Je.STRUCTURED_APPEND:if(d.available()<16)throw new F;b=d.readBits(8),S=d.readBits(8);break;case Je.ECI:const q=un.parseECIValue(d);if(R=j.getCharacterSetECIByValue(q),R===null)throw new F;break;case Je.HANZI:const te=d.readBits(4),re=d.readBits(k.getCharacterCountBits(o));te===un.GB2312_SUBSET&&un.decodeHanziSegment(d,m,re);break;default:const he=d.readBits(k.getCharacterCountBits(o));switch(k){case Je.NUMERIC:un.decodeNumericSegment(d,m,he);break;case Je.ALPHANUMERIC:un.decodeAlphanumericSegment(d,m,he,L);break;case Je.BYTE:un.decodeByteSegment(d,m,he,R,y,f);break;case Je.KANJI:un.decodeKanjiSegment(d,m,he);break;default:throw new F}break}}while(k!==Je.TERMINATOR)}catch{throw new F}return new Qt(i,m.toString(),y.length===0?null:y,l===null?null:l.toString(),b,S)}static decodeHanziSegment(i,o,l){if(l*13>i.available())throw new F;const f=new Uint8Array(2*l);let d=0;for(;l>0;){const m=i.readBits(13);let y=m/96<<8&4294967295|m%96;y<959?y+=41377:y+=42657,f[d]=y>>8&255,f[d+1]=y&255,d+=2,l--}try{o.append(J.decode(f,$.GB2312))}catch(m){throw new F(m)}}static decodeKanjiSegment(i,o,l){if(l*13>i.available())throw new F;const f=new Uint8Array(2*l);let d=0;for(;l>0;){const m=i.readBits(13);let y=m/192<<8&4294967295|m%192;y<7936?y+=33088:y+=49472,f[d]=y>>8,f[d+1]=y,d+=2,l--}try{o.append(J.decode(f,$.SHIFT_JIS))}catch(m){throw new F(m)}}static decodeByteSegment(i,o,l,f,d,m){if(8*l>i.available())throw new F;const y=new Uint8Array(l);for(let S=0;S<l;S++)y[S]=i.readBits(8);let b;f===null?b=$.guessEncoding(y,m):b=f.getName();try{o.append(J.decode(y,b))}catch(S){throw new F(S)}d.push(y)}static toAlphaNumericChar(i){if(i>=un.ALPHANUMERIC_CHARS.length)throw new F;return un.ALPHANUMERIC_CHARS[i]}static decodeAlphanumericSegment(i,o,l,f){const d=o.length();for(;l>1;){if(i.available()<11)throw new F;const m=i.readBits(11);o.append(un.toAlphaNumericChar(Math.floor(m/45))),o.append(un.toAlphaNumericChar(m%45)),l-=2}if(l===1){if(i.available()<6)throw new F;o.append(un.toAlphaNumericChar(i.readBits(6)))}if(f)for(let m=d;m<o.length();m++)o.charAt(m)==="%"&&(m<o.length()-1&&o.charAt(m+1)==="%"?o.deleteCharAt(m+1):o.setCharAt(m,""))}static decodeNumericSegment(i,o,l){for(;l>=3;){if(i.available()<10)throw new F;const f=i.readBits(10);if(f>=1e3)throw new F;o.append(un.toAlphaNumericChar(Math.floor(f/100))),o.append(un.toAlphaNumericChar(Math.floor(f/10)%10)),o.append(un.toAlphaNumericChar(f%10)),l-=3}if(l===2){if(i.available()<7)throw new F;const f=i.readBits(7);if(f>=100)throw new F;o.append(un.toAlphaNumericChar(Math.floor(f/10))),o.append(un.toAlphaNumericChar(f%10))}else if(l===1){if(i.available()<4)throw new F;const f=i.readBits(4);if(f>=10)throw new F;o.append(un.toAlphaNumericChar(f))}}static parseECIValue(i){const o=i.readBits(8);if((o&128)===0)return o&127;if((o&192)===128){const l=i.readBits(8);return(o&63)<<8&4294967295|l}if((o&224)===192){const l=i.readBits(16);return(o&31)<<16&4294967295|l}throw new F}}un.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",un.GB2312_SUBSET=1;class Jo{constructor(i){this.mirrored=i}isMirrored(){return this.mirrored}applyMirroredCorrection(i){if(!this.mirrored||i===null||i.length<3)return;const o=i[0];i[0]=i[2],i[2]=o}}class Bs{constructor(){this.rsDecoder=new ei(bt.QR_CODE_FIELD_256)}decodeBooleanArray(i,o){return this.decodeBitMatrix(Qe.parseFromBooleanArray(i),o)}decodeBitMatrix(i,o){const l=new vn(i);let f=null;try{return this.decodeBitMatrixParser(l,o)}catch(d){f=d}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const d=this.decodeBitMatrixParser(l,o);return d.setOther(new Jo(!0)),d}catch(d){throw f!==null?f:d}}decodeBitMatrixParser(i,o){const l=i.readVersion(),f=i.readFormatInformation().getErrorCorrectionLevel(),d=i.readCodewords(),m=Ts.getDataBlocks(d,l,f);let y=0;for(const R of m)y+=R.getNumDataCodewords();const b=new Uint8Array(y);let S=0;for(const R of m){const L=R.getCodewords(),k=R.getNumDataCodewords();this.correctErrors(L,k);for(let q=0;q<k;q++)b[S++]=L[q]}return un.decode(b,l,f,o)}correctErrors(i,o){const l=new Int32Array(i);try{this.rsDecoder.decode(l,i.length-o)}catch{throw new B}for(let f=0;f<o;f++)i[f]=l[f]}}class Us extends ze{constructor(i,o,l){super(i,o),this.estimatedModuleSize=l}aboutEquals(i,o,l){if(Math.abs(o-this.getY())<=i&&Math.abs(l-this.getX())<=i){const f=Math.abs(i-this.estimatedModuleSize);return f<=1||f<=this.estimatedModuleSize}return!1}combineEstimate(i,o,l){const f=(this.getX()+o)/2,d=(this.getY()+i)/2,m=(this.estimatedModuleSize+l)/2;return new Us(f,d,m)}}class ai{constructor(i,o,l,f,d,m,y){this.image=i,this.startX=o,this.startY=l,this.width=f,this.height=d,this.moduleSize=m,this.resultPointCallback=y,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const i=this.startX,o=this.height,l=this.width,f=i+l,d=this.startY+o/2,m=new Int32Array(3),y=this.image;for(let b=0;b<o;b++){const S=d+((b&1)===0?Math.floor((b+1)/2):-Math.floor((b+1)/2));m[0]=0,m[1]=0,m[2]=0;let R=i;for(;R<f&&!y.get(R,S);)R++;let L=0;for(;R<f;){if(y.get(R,S))if(L===1)m[1]++;else if(L===2){if(this.foundPatternCross(m)){const k=this.handlePossibleCenter(m,S,R);if(k!==null)return k}m[0]=m[2],m[1]=1,m[2]=0,L=1}else m[++L]++;else L===1&&L++,m[L]++;R++}if(this.foundPatternCross(m)){const k=this.handlePossibleCenter(m,S,f);if(k!==null)return k}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new fe}static centerFromEnd(i,o){return o-i[2]-i[1]/2}foundPatternCross(i){const o=this.moduleSize,l=o/2;for(let f=0;f<3;f++)if(Math.abs(o-i[f])>=l)return!1;return!0}crossCheckVertical(i,o,l,f){const d=this.image,m=d.getHeight(),y=this.crossCheckStateCount;y[0]=0,y[1]=0,y[2]=0;let b=i;for(;b>=0&&d.get(o,b)&&y[1]<=l;)y[1]++,b--;if(b<0||y[1]>l)return NaN;for(;b>=0&&!d.get(o,b)&&y[0]<=l;)y[0]++,b--;if(y[0]>l)return NaN;for(b=i+1;b<m&&d.get(o,b)&&y[1]<=l;)y[1]++,b++;if(b===m||y[1]>l)return NaN;for(;b<m&&!d.get(o,b)&&y[2]<=l;)y[2]++,b++;if(y[2]>l)return NaN;const S=y[0]+y[1]+y[2];return 5*Math.abs(S-f)>=2*f?NaN:this.foundPatternCross(y)?ai.centerFromEnd(y,b):NaN}handlePossibleCenter(i,o,l){const f=i[0]+i[1]+i[2],d=ai.centerFromEnd(i,l),m=this.crossCheckVertical(o,d,2*i[1],f);if(!isNaN(m)){const y=(i[0]+i[1]+i[2])/3;for(const S of this.possibleCenters)if(S.aboutEquals(y,m,d))return S.combineEstimate(m,d,y);const b=new Us(d,m,y);this.possibleCenters.push(b),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(b)}return null}}class la extends ze{constructor(i,o,l,f){super(i,o),this.estimatedModuleSize=l,this.count=f,f===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(i,o,l){if(Math.abs(o-this.getY())<=i&&Math.abs(l-this.getX())<=i){const f=Math.abs(i-this.estimatedModuleSize);return f<=1||f<=this.estimatedModuleSize}return!1}combineEstimate(i,o,l){const f=this.count+1,d=(this.count*this.getX()+o)/f,m=(this.count*this.getY()+i)/f,y=(this.count*this.estimatedModuleSize+l)/f;return new la(d,m,y,f)}}class Ci{constructor(i){this.bottomLeft=i[0],this.topLeft=i[1],this.topRight=i[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Sn{constructor(i,o){this.image=i,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=o}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(i){const o=i!=null&&i.get(De.TRY_HARDER)!==void 0,l=i!=null&&i.get(De.PURE_BARCODE)!==void 0,f=this.image,d=f.getHeight(),m=f.getWidth();let y=Math.floor(3*d/(4*Sn.MAX_MODULES));(y<Sn.MIN_SKIP||o)&&(y=Sn.MIN_SKIP);let b=!1;const S=new Int32Array(5);for(let L=y-1;L<d&&!b;L+=y){S[0]=0,S[1]=0,S[2]=0,S[3]=0,S[4]=0;let k=0;for(let q=0;q<m;q++)if(f.get(q,L))(k&1)===1&&k++,S[k]++;else if((k&1)===0)if(k===4)if(Sn.foundPatternCross(S)){if(this.handlePossibleCenter(S,L,q,l)===!0)if(y=2,this.hasSkipped===!0)b=this.haveMultiplyConfirmedCenters();else{const re=this.findRowSkip();re>S[2]&&(L+=re-S[2]-y,q=m-1)}else{S[0]=S[2],S[1]=S[3],S[2]=S[4],S[3]=1,S[4]=0,k=3;continue}k=0,S[0]=0,S[1]=0,S[2]=0,S[3]=0,S[4]=0}else S[0]=S[2],S[1]=S[3],S[2]=S[4],S[3]=1,S[4]=0,k=3;else S[++k]++;else S[k]++;Sn.foundPatternCross(S)&&this.handlePossibleCenter(S,L,m,l)===!0&&(y=S[0],this.hasSkipped&&(b=this.haveMultiplyConfirmedCenters()))}const R=this.selectBestPatterns();return ze.orderBestPatterns(R),new Ci(R)}static centerFromEnd(i,o){return o-i[4]-i[3]-i[2]/2}static foundPatternCross(i){let o=0;for(let d=0;d<5;d++){const m=i[d];if(m===0)return!1;o+=m}if(o<7)return!1;const l=o/7,f=l/2;return Math.abs(l-i[0])<f&&Math.abs(l-i[1])<f&&Math.abs(3*l-i[2])<3*f&&Math.abs(l-i[3])<f&&Math.abs(l-i[4])<f}getCrossCheckStateCount(){const i=this.crossCheckStateCount;return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i}crossCheckDiagonal(i,o,l,f){const d=this.getCrossCheckStateCount();let m=0;const y=this.image;for(;i>=m&&o>=m&&y.get(o-m,i-m);)d[2]++,m++;if(i<m||o<m)return!1;for(;i>=m&&o>=m&&!y.get(o-m,i-m)&&d[1]<=l;)d[1]++,m++;if(i<m||o<m||d[1]>l)return!1;for(;i>=m&&o>=m&&y.get(o-m,i-m)&&d[0]<=l;)d[0]++,m++;if(d[0]>l)return!1;const b=y.getHeight(),S=y.getWidth();for(m=1;i+m<b&&o+m<S&&y.get(o+m,i+m);)d[2]++,m++;if(i+m>=b||o+m>=S)return!1;for(;i+m<b&&o+m<S&&!y.get(o+m,i+m)&&d[3]<l;)d[3]++,m++;if(i+m>=b||o+m>=S||d[3]>=l)return!1;for(;i+m<b&&o+m<S&&y.get(o+m,i+m)&&d[4]<l;)d[4]++,m++;if(d[4]>=l)return!1;const R=d[0]+d[1]+d[2]+d[3]+d[4];return Math.abs(R-f)<2*f&&Sn.foundPatternCross(d)}crossCheckVertical(i,o,l,f){const d=this.image,m=d.getHeight(),y=this.getCrossCheckStateCount();let b=i;for(;b>=0&&d.get(o,b);)y[2]++,b--;if(b<0)return NaN;for(;b>=0&&!d.get(o,b)&&y[1]<=l;)y[1]++,b--;if(b<0||y[1]>l)return NaN;for(;b>=0&&d.get(o,b)&&y[0]<=l;)y[0]++,b--;if(y[0]>l)return NaN;for(b=i+1;b<m&&d.get(o,b);)y[2]++,b++;if(b===m)return NaN;for(;b<m&&!d.get(o,b)&&y[3]<l;)y[3]++,b++;if(b===m||y[3]>=l)return NaN;for(;b<m&&d.get(o,b)&&y[4]<l;)y[4]++,b++;if(y[4]>=l)return NaN;const S=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(S-f)>=2*f?NaN:Sn.foundPatternCross(y)?Sn.centerFromEnd(y,b):NaN}crossCheckHorizontal(i,o,l,f){const d=this.image,m=d.getWidth(),y=this.getCrossCheckStateCount();let b=i;for(;b>=0&&d.get(b,o);)y[2]++,b--;if(b<0)return NaN;for(;b>=0&&!d.get(b,o)&&y[1]<=l;)y[1]++,b--;if(b<0||y[1]>l)return NaN;for(;b>=0&&d.get(b,o)&&y[0]<=l;)y[0]++,b--;if(y[0]>l)return NaN;for(b=i+1;b<m&&d.get(b,o);)y[2]++,b++;if(b===m)return NaN;for(;b<m&&!d.get(b,o)&&y[3]<l;)y[3]++,b++;if(b===m||y[3]>=l)return NaN;for(;b<m&&d.get(b,o)&&y[4]<l;)y[4]++,b++;if(y[4]>=l)return NaN;const S=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(S-f)>=f?NaN:Sn.foundPatternCross(y)?Sn.centerFromEnd(y,b):NaN}handlePossibleCenter(i,o,l,f){const d=i[0]+i[1]+i[2]+i[3]+i[4];let m=Sn.centerFromEnd(i,l),y=this.crossCheckVertical(o,Math.floor(m),i[2],d);if(!isNaN(y)&&(m=this.crossCheckHorizontal(Math.floor(m),Math.floor(y),i[2],d),!isNaN(m)&&(!f||this.crossCheckDiagonal(Math.floor(y),Math.floor(m),i[2],d)))){const b=d/7;let S=!1;const R=this.possibleCenters;for(let L=0,k=R.length;L<k;L++){const q=R[L];if(q.aboutEquals(b,y,m)){R[L]=q.combineEstimate(y,m,b),S=!0;break}}if(!S){const L=new la(m,y,b);R.push(L),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(L)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let o=null;for(const l of this.possibleCenters)if(l.getCount()>=Sn.CENTER_QUORUM)if(o==null)o=l;else return this.hasSkipped=!0,Math.floor((Math.abs(o.getX()-l.getX())-Math.abs(o.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let i=0,o=0;const l=this.possibleCenters.length;for(const m of this.possibleCenters)m.getCount()>=Sn.CENTER_QUORUM&&(i++,o+=m.getEstimatedModuleSize());if(i<3)return!1;const f=o/l;let d=0;for(const m of this.possibleCenters)d+=Math.abs(m.getEstimatedModuleSize()-f);return d<=.05*o}selectBestPatterns(){const i=this.possibleCenters.length;if(i<3)throw new fe;const o=this.possibleCenters;let l;if(i>3){let f=0,d=0;for(const b of this.possibleCenters){const S=b.getEstimatedModuleSize();f+=S,d+=S*S}l=f/i;let m=Math.sqrt(d/i-l*l);o.sort((b,S)=>{const R=Math.abs(S.getEstimatedModuleSize()-l),L=Math.abs(b.getEstimatedModuleSize()-l);return R<L?-1:R>L?1:0});const y=Math.max(.2*l,m);for(let b=0;b<o.length&&o.length>3;b++){const S=o[b];Math.abs(S.getEstimatedModuleSize()-l)>y&&(o.splice(b,1),b--)}}if(o.length>3){let f=0;for(const d of o)f+=d.getEstimatedModuleSize();l=f/o.length,o.sort((d,m)=>{if(m.getCount()===d.getCount()){const y=Math.abs(m.getEstimatedModuleSize()-l),b=Math.abs(d.getEstimatedModuleSize()-l);return y<b?1:y>b?-1:0}else return m.getCount()-d.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]}}Sn.CENTER_QUORUM=2,Sn.MIN_SKIP=3,Sn.MAX_MODULES=57;class oi{constructor(i){this.image=i}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(i){this.resultPointCallback=i==null?null:i.get(De.NEED_RESULT_POINT_CALLBACK);const l=new Sn(this.image,this.resultPointCallback).find(i);return this.processFinderPatternInfo(l)}processFinderPatternInfo(i){const o=i.getTopLeft(),l=i.getTopRight(),f=i.getBottomLeft(),d=this.calculateModuleSize(o,l,f);if(d<1)throw new fe("No pattern found in proccess finder.");const m=oi.computeDimension(o,l,f,d),y=qe.getProvisionalVersionForDimension(m),b=y.getDimensionForVersion()-7;let S=null;if(y.getAlignmentPatternCenters().length>0){const q=l.getX()-o.getX()+f.getX(),te=l.getY()-o.getY()+f.getY(),re=1-3/b,he=Math.floor(o.getX()+re*(q-o.getX())),ye=Math.floor(o.getY()+re*(te-o.getY()));for(let Ue=4;Ue<=16;Ue<<=1)try{S=this.findAlignmentInRegion(d,he,ye,Ue);break}catch(ke){if(!(ke instanceof fe))throw ke}}const R=oi.createTransform(o,l,f,S,m),L=oi.sampleGrid(this.image,R,m);let k;return S===null?k=[f,o,l]:k=[f,o,l,S],new is(L,k)}static createTransform(i,o,l,f,d){const m=d-3.5;let y,b,S,R;return f!==null?(y=f.getX(),b=f.getY(),S=m-3,R=S):(y=o.getX()-i.getX()+l.getX(),b=o.getY()-i.getY()+l.getY(),S=m,R=m),mr.quadrilateralToQuadrilateral(3.5,3.5,m,3.5,S,R,3.5,m,i.getX(),i.getY(),o.getX(),o.getY(),y,b,l.getX(),l.getY())}static sampleGrid(i,o,l){return pr.getInstance().sampleGridWithTransform(i,l,l,o)}static computeDimension(i,o,l,f){const d=et.round(ze.distance(i,o)/f),m=et.round(ze.distance(i,l)/f);let y=Math.floor((d+m)/2)+7;switch(y&3){case 0:y++;break;case 2:y--;break;case 3:throw new fe("Dimensions could be not found.")}return y}calculateModuleSize(i,o,l){return(this.calculateModuleSizeOneWay(i,o)+this.calculateModuleSizeOneWay(i,l))/2}calculateModuleSizeOneWay(i,o){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(o.getX()),Math.floor(o.getY())),f=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(i.getX()),Math.floor(i.getY()));return isNaN(l)?f/7:isNaN(f)?l/7:(l+f)/14}sizeOfBlackWhiteBlackRunBothWays(i,o,l,f){let d=this.sizeOfBlackWhiteBlackRun(i,o,l,f),m=1,y=i-(l-i);y<0?(m=i/(i-y),y=0):y>=this.image.getWidth()&&(m=(this.image.getWidth()-1-i)/(y-i),y=this.image.getWidth()-1);let b=Math.floor(o-(f-o)*m);return m=1,b<0?(m=o/(o-b),b=0):b>=this.image.getHeight()&&(m=(this.image.getHeight()-1-o)/(b-o),b=this.image.getHeight()-1),y=Math.floor(i+(y-i)*m),d+=this.sizeOfBlackWhiteBlackRun(i,o,y,b),d-1}sizeOfBlackWhiteBlackRun(i,o,l,f){const d=Math.abs(f-o)>Math.abs(l-i);if(d){let q=i;i=o,o=q,q=l,l=f,f=q}const m=Math.abs(l-i),y=Math.abs(f-o);let b=-m/2;const S=i<l?1:-1,R=o<f?1:-1;let L=0;const k=l+S;for(let q=i,te=o;q!==k;q+=S){const re=d?te:q,he=d?q:te;if(L===1===this.image.get(re,he)){if(L===2)return et.distance(q,te,i,o);L++}if(b+=y,b>0){if(te===f)break;te+=R,b-=m}}return L===2?et.distance(l+S,f,i,o):NaN}findAlignmentInRegion(i,o,l,f){const d=Math.floor(f*i),m=Math.max(0,o-d),y=Math.min(this.image.getWidth()-1,o+d);if(y-m<i*3)throw new fe("Alignment top exceeds estimated module size.");const b=Math.max(0,l-d),S=Math.min(this.image.getHeight()-1,l+d);if(S-b<i*3)throw new fe("Alignment bottom exceeds estimated module size.");return new ai(this.image,m,b,y-m,S-b,i,this.resultPointCallback).find()}}class li{constructor(){this.decoder=new Bs}getDecoder(){return this.decoder}decode(i,o){let l,f;if(o!=null&&o.get(De.PURE_BARCODE)!==void 0){const b=li.extractPureBits(i.getBlackMatrix());l=this.decoder.decodeBitMatrix(b,o),f=li.NO_POINTS}else{const b=new oi(i.getBlackMatrix()).detect(o);l=this.decoder.decodeBitMatrix(b.getBits(),o),f=b.getPoints()}l.getOther()instanceof Jo&&l.getOther().applyMirroredCorrection(f);const d=new Fe(l.getText(),l.getRawBytes(),void 0,f,Be.QR_CODE,void 0),m=l.getByteSegments();m!==null&&d.putMetadata(mt.BYTE_SEGMENTS,m);const y=l.getECLevel();return y!==null&&d.putMetadata(mt.ERROR_CORRECTION_LEVEL,y),l.hasStructuredAppend()&&(d.putMetadata(mt.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),d.putMetadata(mt.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),d}reset(){}static extractPureBits(i){const o=i.getTopLeftOnBit(),l=i.getBottomRightOnBit();if(o===null||l===null)throw new fe;const f=this.moduleSize(o,i);let d=o[1],m=l[1],y=o[0],b=l[0];if(y>=b||d>=m)throw new fe;if(m-d!==b-y&&(b=y+(m-d),b>=i.getWidth()))throw new fe;const S=Math.round((b-y+1)/f),R=Math.round((m-d+1)/f);if(S<=0||R<=0)throw new fe;if(R!==S)throw new fe;const L=Math.floor(f/2);d+=L,y+=L;const k=y+Math.floor((S-1)*f)-b;if(k>0){if(k>L)throw new fe;y-=k}const q=d+Math.floor((R-1)*f)-m;if(q>0){if(q>L)throw new fe;d-=q}const te=new Qe(S,R);for(let re=0;re<R;re++){const he=d+Math.floor(re*f);for(let ye=0;ye<S;ye++)i.get(y+Math.floor(ye*f),he)&&te.set(ye,re)}return te}static moduleSize(i,o){const l=o.getHeight(),f=o.getWidth();let d=i[0],m=i[1],y=!0,b=0;for(;d<f&&m<l;){if(y!==o.get(d,m)){if(++b===5)break;y=!y}d++,m++}if(d===f||m===l)throw new fe;return(d-i[0])/7}}li.NO_POINTS=new Array;class nt{PDF417Common(){}static getBitCountSum(i){return et.sum(i)}static toIntArray(i){if(i==null||!i.length)return nt.EMPTY_INT_ARRAY;const o=new Int32Array(i.length);let l=0;for(const f of i)o[l++]=f;return o}static getCodeword(i){const o=ae.binarySearch(nt.SYMBOL_TABLE,i&262143);return o<0?-1:(nt.CODEWORD_TABLE[o]-1)%nt.NUMBER_OF_CODEWORDS}}nt.NUMBER_OF_CODEWORDS=929,nt.MAX_CODEWORDS_IN_BARCODE=nt.NUMBER_OF_CODEWORDS-1,nt.MIN_ROWS_IN_BARCODE=3,nt.MAX_ROWS_IN_BARCODE=90,nt.MODULES_IN_CODEWORD=17,nt.MODULES_IN_STOP_PATTERN=18,nt.BARS_IN_MODULE=8,nt.EMPTY_INT_ARRAY=new Int32Array([]),nt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),nt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Vs{constructor(i,o){this.bits=i,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class lt{static detectMultiple(i,o,l){let f=i.getBlackMatrix(),d=lt.detect(l,f);return d.length||(f=f.clone(),f.rotate180(),d=lt.detect(l,f)),new Vs(f,d)}static detect(i,o){const l=new Array;let f=0,d=0,m=!1;for(;f<o.getHeight();){const y=lt.findVertices(o,f,d);if(y[0]==null&&y[3]==null){if(!m)break;m=!1,d=0;for(const b of l)b[1]!=null&&(f=Math.trunc(Math.max(f,b[1].getY()))),b[3]!=null&&(f=Math.max(f,Math.trunc(b[3].getY())));f+=lt.ROW_STEP;continue}if(m=!0,l.push(y),!i)break;y[2]!=null?(d=Math.trunc(y[2].getX()),f=Math.trunc(y[2].getY())):(d=Math.trunc(y[4].getX()),f=Math.trunc(y[4].getY()))}return l}static findVertices(i,o,l){const f=i.getHeight(),d=i.getWidth(),m=new Array(8);return lt.copyToResult(m,lt.findRowsWithPattern(i,f,d,o,l,lt.START_PATTERN),lt.INDEXES_START_PATTERN),m[4]!=null&&(l=Math.trunc(m[4].getX()),o=Math.trunc(m[4].getY())),lt.copyToResult(m,lt.findRowsWithPattern(i,f,d,o,l,lt.STOP_PATTERN),lt.INDEXES_STOP_PATTERN),m}static copyToResult(i,o,l){for(let f=0;f<l.length;f++)i[l[f]]=o[f]}static findRowsWithPattern(i,o,l,f,d,m){const y=new Array(4);let b=!1;const S=new Int32Array(m.length);for(;f<o;f+=lt.ROW_STEP){let L=lt.findGuardPattern(i,d,f,l,!1,m,S);if(L!=null){for(;f>0;){const k=lt.findGuardPattern(i,d,--f,l,!1,m,S);if(k!=null)L=k;else{f++;break}}y[0]=new ze(L[0],f),y[1]=new ze(L[1],f),b=!0;break}}let R=f+1;if(b){let L=0,k=Int32Array.from([Math.trunc(y[0].getX()),Math.trunc(y[1].getX())]);for(;R<o;R++){const q=lt.findGuardPattern(i,k[0],R,l,!1,m,S);if(q!=null&&Math.abs(k[0]-q[0])<lt.MAX_PATTERN_DRIFT&&Math.abs(k[1]-q[1])<lt.MAX_PATTERN_DRIFT)k=q,L=0;else{if(L>lt.SKIPPED_ROW_COUNT_MAX)break;L++}}R-=L+1,y[2]=new ze(k[0],R),y[3]=new ze(k[1],R)}return R-f<lt.BARCODE_MIN_HEIGHT&&ae.fill(y,null),y}static findGuardPattern(i,o,l,f,d,m,y){ae.fillWithin(y,0,y.length,0);let b=o,S=0;for(;i.get(b,l)&&b>0&&S++<lt.MAX_PIXEL_DRIFT;)b--;let R=b,L=0,k=m.length;for(let q=d;R<f;R++)if(i.get(R,l)!==q)y[L]++;else{if(L===k-1){if(lt.patternMatchVariance(y,m,lt.MAX_INDIVIDUAL_VARIANCE)<lt.MAX_AVG_VARIANCE)return new Int32Array([b,R]);b+=y[0]+y[1],Q.arraycopy(y,2,y,0,L-1),y[L-1]=0,y[L]=0,L--}else L++;y[L]=1,q=!q}return L===k-1&&lt.patternMatchVariance(y,m,lt.MAX_INDIVIDUAL_VARIANCE)<lt.MAX_AVG_VARIANCE?new Int32Array([b,R-1]):null}static patternMatchVariance(i,o,l){let f=i.length,d=0,m=0;for(let S=0;S<f;S++)d+=i[S],m+=o[S];if(d<m)return 1/0;let y=d/m;l*=y;let b=0;for(let S=0;S<f;S++){let R=i[S],L=o[S]*y,k=R>L?R-L:L-R;if(k>l)return 1/0;b+=k}return b/d}}lt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),lt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),lt.MAX_AVG_VARIANCE=.42,lt.MAX_INDIVIDUAL_VARIANCE=.8,lt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),lt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),lt.MAX_PIXEL_DRIFT=3,lt.MAX_PATTERN_DRIFT=5,lt.SKIPPED_ROW_COUNT_MAX=25,lt.ROW_STEP=5,lt.BARCODE_MIN_HEIGHT=10;class hn{constructor(i,o){if(o.length===0)throw new I;this.field=i;let l=o.length;if(l>1&&o[0]===0){let f=1;for(;f<l&&o[f]===0;)f++;f===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-f),Q.arraycopy(o,f,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);if(i===1){let f=0;for(let d of this.coefficients)f=this.field.add(f,d);return f}let o=this.coefficients[0],l=this.coefficients.length;for(let f=1;f<l;f++)o=this.field.add(this.field.multiply(i,o),this.coefficients[f]);return o}add(i){if(!this.field.equals(i.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero())return i;if(i.isZero())return this;let o=this.coefficients,l=i.coefficients;if(o.length>l.length){let m=o;o=l,l=m}let f=new Int32Array(l.length),d=l.length-o.length;Q.arraycopy(l,0,f,0,d);for(let m=d;m<l.length;m++)f[m]=this.field.add(o[m-d],l[m]);return new hn(this.field,f)}subtract(i){if(!this.field.equals(i.field))throw new I("ModulusPolys do not have same ModulusGF field");return i.isZero()?this:this.add(i.negative())}multiply(i){return i instanceof hn?this.multiplyOther(i):this.multiplyScalar(i)}multiplyOther(i){if(!this.field.equals(i.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero()||i.isZero())return new hn(this.field,new Int32Array([0]));let o=this.coefficients,l=o.length,f=i.coefficients,d=f.length,m=new Int32Array(l+d-1);for(let y=0;y<l;y++){let b=o[y];for(let S=0;S<d;S++)m[y+S]=this.field.add(m[y+S],this.field.multiply(b,f[S]))}return new hn(this.field,m)}negative(){let i=this.coefficients.length,o=new Int32Array(i);for(let l=0;l<i;l++)o[l]=this.field.subtract(0,this.coefficients[l]);return new hn(this.field,o)}multiplyScalar(i){if(i===0)return new hn(this.field,new Int32Array([0]));if(i===1)return this;let o=this.coefficients.length,l=new Int32Array(o);for(let f=0;f<o;f++)l[f]=this.field.multiply(this.coefficients[f],i);return new hn(this.field,l)}multiplyByMonomial(i,o){if(i<0)throw new I;if(o===0)return new hn(this.field,new Int32Array([0]));let l=this.coefficients.length,f=new Int32Array(l+i);for(let d=0;d<l;d++)f[d]=this.field.multiply(this.coefficients[d],o);return new hn(this.field,f)}toString(){let i=new G;for(let o=this.getDegree();o>=0;o--){let l=this.getCoefficient(o);l!==0&&(l<0?(i.append(" - "),l=-l):i.length()>0&&i.append(" + "),(o===0||l!==1)&&i.append(l),o!==0&&(o===1?i.append("x"):(i.append("x^"),i.append(o))))}return i.toString()}}class ca{add(i,o){return(i+o)%this.modulus}subtract(i,o){return(this.modulus+i-o)%this.modulus}exp(i){return this.expTable[i]}log(i){if(i===0)throw new I;return this.logTable[i]}inverse(i){if(i===0)throw new Ai;return this.expTable[this.modulus-this.logTable[i]-1]}multiply(i,o){return i===0||o===0?0:this.expTable[(this.logTable[i]+this.logTable[o])%(this.modulus-1)]}getSize(){return this.modulus}equals(i){return i===this}}class sn extends ca{constructor(i,o){super(),this.modulus=i,this.expTable=new Int32Array(i),this.logTable=new Int32Array(i);let l=1;for(let f=0;f<i;f++)this.expTable[f]=l,l=l*o%i;for(let f=0;f<i-1;f++)this.logTable[this.expTable[f]]=f;this.zero=new hn(this,new Int32Array([0])),this.one=new hn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,o){if(i<0)throw new I;if(o===0)return this.zero;let l=new Int32Array(i+1);return l[0]=o,new hn(this,l)}}sn.PDF417_GF=new sn(nt.NUMBER_OF_CODEWORDS,3);class Ui{constructor(){this.field=sn.PDF417_GF}decode(i,o,l){let f=new hn(this.field,i),d=new Int32Array(o),m=!1;for(let te=o;te>0;te--){let re=f.evaluateAt(this.field.exp(te));d[o-te]=re,re!==0&&(m=!0)}if(!m)return 0;let y=this.field.getOne();if(l!=null)for(const te of l){let re=this.field.exp(i.length-1-te),he=new hn(this.field,new Int32Array([this.field.subtract(0,re),1]));y=y.multiply(he)}let b=new hn(this.field,d),S=this.runEuclideanAlgorithm(this.field.buildMonomial(o,1),b,o),R=S[0],L=S[1],k=this.findErrorLocations(R),q=this.findErrorMagnitudes(L,R,k);for(let te=0;te<k.length;te++){let re=i.length-1-this.field.log(k[te]);if(re<0)throw B.getChecksumInstance();i[re]=this.field.subtract(i[re],q[te])}return k.length}runEuclideanAlgorithm(i,o,l){if(i.getDegree()<o.getDegree()){let k=i;i=o,o=k}let f=i,d=o,m=this.field.getZero(),y=this.field.getOne();for(;d.getDegree()>=Math.round(l/2);){let k=f,q=m;if(f=d,m=y,f.isZero())throw B.getChecksumInstance();d=k;let te=this.field.getZero(),re=f.getCoefficient(f.getDegree()),he=this.field.inverse(re);for(;d.getDegree()>=f.getDegree()&&!d.isZero();){let ye=d.getDegree()-f.getDegree(),Ue=this.field.multiply(d.getCoefficient(d.getDegree()),he);te=te.add(this.field.buildMonomial(ye,Ue)),d=d.subtract(f.multiplyByMonomial(ye,Ue))}y=te.multiply(m).subtract(q).negative()}let b=y.getCoefficient(0);if(b===0)throw B.getChecksumInstance();let S=this.field.inverse(b),R=y.multiply(S),L=d.multiply(S);return[R,L]}findErrorLocations(i){let o=i.getDegree(),l=new Int32Array(o),f=0;for(let d=1;d<this.field.getSize()&&f<o;d++)i.evaluateAt(d)===0&&(l[f]=this.field.inverse(d),f++);if(f!==o)throw B.getChecksumInstance();return l}findErrorMagnitudes(i,o,l){let f=o.getDegree(),d=new Int32Array(f);for(let S=1;S<=f;S++)d[f-S]=this.field.multiply(S,o.getCoefficient(S));let m=new hn(this.field,d),y=l.length,b=new Int32Array(y);for(let S=0;S<y;S++){let R=this.field.inverse(l[S]),L=this.field.subtract(0,i.evaluateAt(R)),k=this.field.inverse(m.evaluateAt(R));b[S]=this.field.multiply(L,k)}return b}}class Vi{constructor(i,o,l,f,d){i instanceof Vi?this.constructor_2(i):this.constructor_1(i,o,l,f,d)}constructor_1(i,o,l,f,d){const m=o==null||l==null,y=f==null||d==null;if(m&&y)throw new fe;m?(o=new ze(0,f.getY()),l=new ze(0,d.getY())):y&&(f=new ze(i.getWidth()-1,o.getY()),d=new ze(i.getWidth()-1,l.getY())),this.image=i,this.topLeft=o,this.bottomLeft=l,this.topRight=f,this.bottomRight=d,this.minX=Math.trunc(Math.min(o.getX(),l.getX())),this.maxX=Math.trunc(Math.max(f.getX(),d.getX())),this.minY=Math.trunc(Math.min(o.getY(),f.getY())),this.maxY=Math.trunc(Math.max(l.getY(),d.getY()))}constructor_2(i){this.image=i.image,this.topLeft=i.getTopLeft(),this.bottomLeft=i.getBottomLeft(),this.topRight=i.getTopRight(),this.bottomRight=i.getBottomRight(),this.minX=i.getMinX(),this.maxX=i.getMaxX(),this.minY=i.getMinY(),this.maxY=i.getMaxY()}static merge(i,o){return i==null?o:o==null?i:new Vi(i.image,i.topLeft,i.bottomLeft,o.topRight,o.bottomRight)}addMissingRows(i,o,l){let f=this.topLeft,d=this.bottomLeft,m=this.topRight,y=this.bottomRight;if(i>0){let b=l?this.topLeft:this.topRight,S=Math.trunc(b.getY()-i);S<0&&(S=0);let R=new ze(b.getX(),S);l?f=R:m=R}if(o>0){let b=l?this.bottomLeft:this.bottomRight,S=Math.trunc(b.getY()+o);S>=this.image.getHeight()&&(S=this.image.getHeight()-1);let R=new ze(b.getX(),S);l?d=R:y=R}return new Vi(this.image,f,d,m,y)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class ua{constructor(i,o,l,f){this.columnCount=i,this.errorCorrectionLevel=f,this.rowCountUpperPart=o,this.rowCountLowerPart=l,this.rowCount=o+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Ss{constructor(){this.buffer=""}static form(i,o){let l=-1;function f(m,y,b,S,R,L){if(m==="%%")return"%";if(o[++l]===void 0)return;m=S?parseInt(S.substr(1)):void 0;let k=R?parseInt(R.substr(1)):void 0,q;switch(L){case"s":q=o[l];break;case"c":q=o[l][0];break;case"f":q=parseFloat(o[l]).toFixed(m);break;case"p":q=parseFloat(o[l]).toPrecision(m);break;case"e":q=parseFloat(o[l]).toExponential(m);break;case"x":q=parseInt(o[l]).toString(k||16);break;case"d":q=parseFloat(parseInt(o[l],k||10).toPrecision(m)).toFixed(0);break}q=typeof q=="object"?JSON.stringify(q):(+q).toString(k);let te=parseInt(b),re=b&&b[0]+""=="0"?"0":" ";for(;q.length<te;)q=y!==void 0?q+re:re+q;return q}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(d,f)}format(i,...o){this.buffer+=Ss.form(i,o)}toString(){return this.buffer}}class ji{constructor(i){this.boundingBox=new Vi(i),this.codewords=new Array(i.getMaxY()-i.getMinY()+1)}getCodewordNearby(i){let o=this.getCodeword(i);if(o!=null)return o;for(let l=1;l<ji.MAX_NEARBY_DISTANCE;l++){let f=this.imageRowToCodewordIndex(i)-l;if(f>=0&&(o=this.codewords[f],o!=null)||(f=this.imageRowToCodewordIndex(i)+l,f<this.codewords.length&&(o=this.codewords[f],o!=null)))return o}return null}imageRowToCodewordIndex(i){return i-this.boundingBox.getMinY()}setCodeword(i,o){this.codewords[this.imageRowToCodewordIndex(i)]=o}getCodeword(i){return this.codewords[this.imageRowToCodewordIndex(i)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const i=new Ss;let o=0;for(const l of this.codewords){if(l==null){i.format("%3d:    |   %n",o++);continue}i.format("%3d: %3d|%3d%n",o++,l.getRowNumber(),l.getValue())}return i.toString()}}ji.MAX_NEARBY_DISTANCE=5;class di{constructor(){this.values=new Map}setValue(i){i=Math.trunc(i);let o=this.values.get(i);o==null&&(o=0),o++,this.values.set(i,o)}getValue(){let i=-1,o=new Array;for(const[l,f]of this.values.entries()){const d={getKey:()=>l,getValue:()=>f};d.getValue()>i?(i=d.getValue(),o=[],o.push(d.getKey())):d.getValue()===i&&o.push(d.getKey())}return nt.toIntArray(o)}getConfidence(i){return this.values.get(i)}}class Ii extends ji{constructor(i,o){super(i),this._isLeft=o}setRowNumbers(){for(let i of this.getCodewords())i!=null&&i.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(i){let o=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(o,i);let l=this.getBoundingBox(),f=this._isLeft?l.getTopLeft():l.getTopRight(),d=this._isLeft?l.getBottomLeft():l.getBottomRight(),m=this.imageRowToCodewordIndex(Math.trunc(f.getY())),y=this.imageRowToCodewordIndex(Math.trunc(d.getY())),b=-1,S=1,R=0;for(let L=m;L<y;L++){if(o[L]==null)continue;let k=o[L],q=k.getRowNumber()-b;if(q===0)R++;else if(q===1)S=Math.max(S,R),R=1,b=k.getRowNumber();else if(q<0||k.getRowNumber()>=i.getRowCount()||q>L)o[L]=null;else{let te;S>2?te=(S-2)*q:te=q;let re=te>=L;for(let he=1;he<=te&&!re;he++)re=o[L-he]!=null;re?o[L]=null:(b=k.getRowNumber(),R=1)}}}getRowHeights(){let i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);let o=new Int32Array(i.getRowCount());for(let l of this.getCodewords())if(l!=null){let f=l.getRowNumber();if(f>=o.length)continue;o[f]++}return o}adjustIncompleteIndicatorColumnRowNumbers(i){let o=this.getBoundingBox(),l=this._isLeft?o.getTopLeft():o.getTopRight(),f=this._isLeft?o.getBottomLeft():o.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(l.getY())),m=this.imageRowToCodewordIndex(Math.trunc(f.getY())),y=this.getCodewords(),b=-1;for(let S=d;S<m;S++){if(y[S]==null)continue;let R=y[S];R.setRowNumberAsRowIndicatorColumn();let L=R.getRowNumber()-b;L===0||(L===1?b=R.getRowNumber():R.getRowNumber()>=i.getRowCount()?y[S]=null:b=R.getRowNumber())}}getBarcodeMetadata(){let i=this.getCodewords(),o=new di,l=new di,f=new di,d=new di;for(let y of i){if(y==null)continue;y.setRowNumberAsRowIndicatorColumn();let b=y.getValue()%30,S=y.getRowNumber();switch(this._isLeft||(S+=2),S%3){case 0:l.setValue(b*3+1);break;case 1:d.setValue(b/3),f.setValue(b%3);break;case 2:o.setValue(b+1);break}}if(o.getValue().length===0||l.getValue().length===0||f.getValue().length===0||d.getValue().length===0||o.getValue()[0]<1||l.getValue()[0]+f.getValue()[0]<nt.MIN_ROWS_IN_BARCODE||l.getValue()[0]+f.getValue()[0]>nt.MAX_ROWS_IN_BARCODE)return null;let m=new ua(o.getValue()[0],l.getValue()[0],f.getValue()[0],d.getValue()[0]);return this.removeIncorrectCodewords(i,m),m}removeIncorrectCodewords(i,o){for(let l=0;l<i.length;l++){let f=i[l];if(i[l]==null)continue;let d=f.getValue()%30,m=f.getRowNumber();if(m>o.getRowCount()){i[l]=null;continue}switch(this._isLeft||(m+=2),m%3){case 0:d*3+1!==o.getRowCountUpperPart()&&(i[l]=null);break;case 1:(Math.trunc(d/3)!==o.getErrorCorrectionLevel()||d%3!==o.getRowCountLowerPart())&&(i[l]=null);break;case 2:d+1!==o.getColumnCount()&&(i[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Wn{constructor(i,o){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=i,this.barcodeColumnCount=i.getColumnCount(),this.boundingBox=o,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let i=nt.MAX_CODEWORDS_IN_BARCODE,o;do o=i,i=this.adjustRowNumbersAndGetCount();while(i>0&&i<o);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(i){i!=null&&i.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let i=this.adjustRowNumbersByRow();if(i===0)return 0;for(let o=1;o<this.barcodeColumnCount+1;o++){let l=this.detectionResultColumns[o].getCodewords();for(let f=0;f<l.length;f++)l[f]!=null&&(l[f].hasValidRowNumber()||this.adjustRowNumbers(o,f,l))}return i}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let i=this.detectionResultColumns[0].getCodewords(),o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<i.length;l++)if(i[l]!=null&&o[l]!=null&&i[l].getRowNumber()===o[l].getRowNumber())for(let f=1;f<=this.barcodeColumnCount;f++){let d=this.detectionResultColumns[f].getCodewords()[l];d!=null&&(d.setRowNumber(i[l].getRowNumber()),d.hasValidRowNumber()||(this.detectionResultColumns[f].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let i=0,o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<o.length;l++){if(o[l]==null)continue;let f=o[l].getRowNumber(),d=0;for(let m=this.barcodeColumnCount+1;m>0&&d<this.ADJUST_ROW_NUMBER_SKIP;m--){let y=this.detectionResultColumns[m].getCodewords()[l];y!=null&&(d=Wn.adjustRowNumberIfValid(f,d,y),y.hasValidRowNumber()||i++)}}return i}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let i=0,o=this.detectionResultColumns[0].getCodewords();for(let l=0;l<o.length;l++){if(o[l]==null)continue;let f=o[l].getRowNumber(),d=0;for(let m=1;m<this.barcodeColumnCount+1&&d<this.ADJUST_ROW_NUMBER_SKIP;m++){let y=this.detectionResultColumns[m].getCodewords()[l];y!=null&&(d=Wn.adjustRowNumberIfValid(f,d,y),y.hasValidRowNumber()||i++)}}return i}static adjustRowNumberIfValid(i,o,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(i)?(l.setRowNumber(i),o=0):++o),o}adjustRowNumbers(i,o,l){if(!this.detectionResultColumns[i-1])return;let f=l[o],d=this.detectionResultColumns[i-1].getCodewords(),m=d;this.detectionResultColumns[i+1]!=null&&(m=this.detectionResultColumns[i+1].getCodewords());let y=new Array(14);y[2]=d[o],y[3]=m[o],o>0&&(y[0]=l[o-1],y[4]=d[o-1],y[5]=m[o-1]),o>1&&(y[8]=l[o-2],y[10]=d[o-2],y[11]=m[o-2]),o<l.length-1&&(y[1]=l[o+1],y[6]=d[o+1],y[7]=m[o+1]),o<l.length-2&&(y[9]=l[o+2],y[12]=d[o+2],y[13]=m[o+2]);for(let b of y)if(Wn.adjustRowNumber(f,b))return}static adjustRowNumber(i,o){return o==null?!1:o.hasValidRowNumber()&&o.getBucket()===i.getBucket()?(i.setRowNumber(o.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(i){this.boundingBox=i}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(i,o){this.detectionResultColumns[i]=o}getDetectionResultColumn(i){return this.detectionResultColumns[i]}toString(){let i=this.detectionResultColumns[0];i==null&&(i=this.detectionResultColumns[this.barcodeColumnCount+1]);let o=new Ss;for(let l=0;l<i.getCodewords().length;l++){o.format("CW %3d:",l);for(let f=0;f<this.barcodeColumnCount+2;f++){if(this.detectionResultColumns[f]==null){o.format("    |   ");continue}let d=this.detectionResultColumns[f].getCodewords()[l];if(d==null){o.format("    |   ");continue}o.format(" %3d|%3d",d.getRowNumber(),d.getValue())}o.format("%n")}return o.toString()}}class gi{constructor(i,o,l,f){this.rowNumber=gi.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(i),this.endX=Math.trunc(o),this.bucket=Math.trunc(l),this.value=Math.trunc(f)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(i){return i!==gi.BARCODE_ROW_UNKNOWN&&this.bucket===i%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(i){this.rowNumber=i}toString(){return this.rowNumber+"|"+this.value}}gi.BARCODE_ROW_UNKNOWN=-1;class kn{static initialize(){for(let i=0;i<nt.SYMBOL_TABLE.length;i++){let o=nt.SYMBOL_TABLE[i],l=o&1;for(let f=0;f<nt.BARS_IN_MODULE;f++){let d=0;for(;(o&1)===l;)d+=1,o>>=1;l=o&1,kn.RATIOS_TABLE[i]||(kn.RATIOS_TABLE[i]=new Array(nt.BARS_IN_MODULE)),kn.RATIOS_TABLE[i][nt.BARS_IN_MODULE-f-1]=Math.fround(d/nt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(i){let o=kn.getDecodedCodewordValue(kn.sampleBitCounts(i));return o!==-1?o:kn.getClosestDecodedValue(i)}static sampleBitCounts(i){let o=et.sum(i),l=new Int32Array(nt.BARS_IN_MODULE),f=0,d=0;for(let m=0;m<nt.MODULES_IN_CODEWORD;m++){let y=o/(2*nt.MODULES_IN_CODEWORD)+m*o/nt.MODULES_IN_CODEWORD;d+i[f]<=y&&(d+=i[f],f++),l[f]++}return l}static getDecodedCodewordValue(i){let o=kn.getBitValue(i);return nt.getCodeword(o)===-1?-1:o}static getBitValue(i){let o=0;for(let l=0;l<i.length;l++)for(let f=0;f<i[l];f++)o=o<<1|(l%2===0?1:0);return Math.trunc(o)}static getClosestDecodedValue(i){let o=et.sum(i),l=new Array(nt.BARS_IN_MODULE);if(o>1)for(let m=0;m<l.length;m++)l[m]=Math.fround(i[m]/o);let f=pn.MAX_VALUE,d=-1;this.bSymbolTableReady||kn.initialize();for(let m=0;m<kn.RATIOS_TABLE.length;m++){let y=0,b=kn.RATIOS_TABLE[m];for(let S=0;S<nt.BARS_IN_MODULE;S++){let R=Math.fround(b[S]-l[S]);if(y+=Math.fround(R*R),y>=f)break}y<f&&(f=y,d=nt.SYMBOL_TABLE[m])}return d}}kn.bSymbolTableReady=!1,kn.RATIOS_TABLE=new Array(nt.SYMBOL_TABLE.length).map(P=>new Array(nt.BARS_IN_MODULE));class Cs{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(i){this.segmentIndex=i}getFileId(){return this.fileId}setFileId(i){this.fileId=i}getOptionalData(){return this.optionalData}setOptionalData(i){this.optionalData=i}isLastSegment(){return this.lastSegment}setLastSegment(i){this.lastSegment=i}getSegmentCount(){return this.segmentCount}setSegmentCount(i){this.segmentCount=i}getSender(){return this.sender||null}setSender(i){this.sender=i}getAddressee(){return this.addressee||null}setAddressee(i){this.addressee=i}getFileName(){return this.fileName}setFileName(i){this.fileName=i}getFileSize(){return this.fileSize}setFileSize(i){this.fileSize=i}getChecksum(){return this.checksum}setChecksum(i){this.checksum=i}getTimestamp(){return this.timestamp}setTimestamp(i){this.timestamp=i}}class Za{static parseLong(i,o=void 0){return parseInt(i,o)}}class Is extends E{}Is.kind="NullPointerException";class Ja{writeBytes(i){this.writeBytesOffset(i,0,i.length)}writeBytesOffset(i,o,l){if(i==null)throw new Is;if(o<0||o>i.length||l<0||o+l>i.length||o+l<0)throw new Y;if(l===0)return;for(let f=0;f<l;f++)this.write(i[o+f])}flush(){}close(){}}class ls extends E{}class $a extends Ja{constructor(i=32){if(super(),this.count=0,i<0)throw new I("Negative initial size: "+i);this.buf=new Uint8Array(i)}ensureCapacity(i){i-this.buf.length>0&&this.grow(i)}grow(i){let l=this.buf.length<<1;if(l-i<0&&(l=i),l<0){if(i<0)throw new ls;l=K.MAX_VALUE}this.buf=ae.copyOfUint8Array(this.buf,l)}write(i){this.ensureCapacity(this.count+1),this.buf[this.count]=i,this.count+=1}writeBytesOffset(i,o,l){if(o<0||o>i.length||l<0||o+l-i.length>0)throw new Y;this.ensureCapacity(this.count+l),Q.arraycopy(i,o,this.buf,this.count,l),this.count+=l}writeTo(i){i.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return ae.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(i){return i?typeof i=="string"?this.toString_string(i):this.toString_number(i):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(i){return new String(this.buf).toString()}toString_number(i){return new String(this.buf).toString()}close(){}}var tn;(function(P){P[P.ALPHA=0]="ALPHA",P[P.LOWER=1]="LOWER",P[P.MIXED=2]="MIXED",P[P.PUNCT=3]="PUNCT",P[P.ALPHA_SHIFT=4]="ALPHA_SHIFT",P[P.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(tn||(tn={}));function js(){if(typeof window<"u")return window.BigInt||null;if(typeof Nf<"u")return Nf.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let ha;function Fi(P){if(typeof ha>"u"&&(ha=js()),ha===null)throw new Error("BigInt is not supported!");return ha(P)}function fa(){let P=[];P[0]=Fi(1);let i=Fi(900);P[1]=i;for(let o=2;o<16;o++)P[o]=P[o-1]*i;return P}class xe{static decode(i,o){let l=new G(""),f=j.ISO8859_1;l.enableDecoding(f);let d=1,m=i[d++],y=new Cs;for(;d<i[0];){switch(m){case xe.TEXT_COMPACTION_MODE_LATCH:d=xe.textCompaction(i,d,l);break;case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:d=xe.byteCompaction(m,i,f,d,l);break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(i[d++]);break;case xe.NUMERIC_COMPACTION_MODE_LATCH:d=xe.numericCompaction(i,d,l);break;case xe.ECI_CHARSET:j.getCharacterSetECIByValue(i[d++]);break;case xe.ECI_GENERAL_PURPOSE:d+=2;break;case xe.ECI_USER_DEFINED:d++;break;case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:d=xe.decodeMacroBlock(i,d,y);break;case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:throw new F;default:d--,d=xe.textCompaction(i,d,l);break}if(d<i.length)m=i[d++];else throw F.getFormatInstance()}if(l.length()===0)throw F.getFormatInstance();let b=new Qt(null,l.toString(),null,o);return b.setOther(y),b}static decodeMacroBlock(i,o,l){if(o+xe.NUMBER_OF_SEQUENCE_CODEWORDS>i[0])throw F.getFormatInstance();let f=new Int32Array(xe.NUMBER_OF_SEQUENCE_CODEWORDS);for(let y=0;y<xe.NUMBER_OF_SEQUENCE_CODEWORDS;y++,o++)f[y]=i[o];l.setSegmentIndex(K.parseInt(xe.decodeBase900toBase10(f,xe.NUMBER_OF_SEQUENCE_CODEWORDS)));let d=new G;o=xe.textCompaction(i,o,d),l.setFileId(d.toString());let m=-1;for(i[o]===xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(m=o+1);o<i[0];)switch(i[o]){case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(o++,i[o]){case xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let y=new G;o=xe.textCompaction(i,o+1,y),l.setFileName(y.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let b=new G;o=xe.textCompaction(i,o+1,b),l.setSender(b.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let S=new G;o=xe.textCompaction(i,o+1,S),l.setAddressee(S.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let R=new G;o=xe.numericCompaction(i,o+1,R),l.setSegmentCount(K.parseInt(R.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let L=new G;o=xe.numericCompaction(i,o+1,L),l.setTimestamp(Za.parseLong(L.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let k=new G;o=xe.numericCompaction(i,o+1,k),l.setChecksum(K.parseInt(k.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let q=new G;o=xe.numericCompaction(i,o+1,q),l.setFileSize(Za.parseLong(q.toString()));break;default:throw F.getFormatInstance()}break;case xe.MACRO_PDF417_TERMINATOR:o++,l.setLastSegment(!0);break;default:throw F.getFormatInstance()}if(m!==-1){let y=o-m;l.isLastSegment()&&y--,l.setOptionalData(ae.copyOfRange(i,m,m+y))}return o}static textCompaction(i,o,l){let f=new Int32Array((i[0]-o)*2),d=new Int32Array((i[0]-o)*2),m=0,y=!1;for(;o<i[0]&&!y;){let b=i[o++];if(b<xe.TEXT_COMPACTION_MODE_LATCH)f[m]=b/30,f[m+1]=b%30,m+=2;else switch(b){case xe.TEXT_COMPACTION_MODE_LATCH:f[m++]=xe.TEXT_COMPACTION_MODE_LATCH;break;case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:o--,y=!0;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f[m]=xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,b=i[o++],d[m]=b,m++;break}}return xe.decodeTextCompaction(f,d,m,l),o}static decodeTextCompaction(i,o,l,f){let d=tn.ALPHA,m=tn.ALPHA,y=0;for(;y<l;){let b=i[y],S="";switch(d){case tn.ALPHA:if(b<26)S=String.fromCharCode(65+b);else switch(b){case 26:S=" ";break;case xe.LL:d=tn.LOWER;break;case xe.ML:d=tn.MIXED;break;case xe.PS:m=d,d=tn.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[y]);break;case xe.TEXT_COMPACTION_MODE_LATCH:d=tn.ALPHA;break}break;case tn.LOWER:if(b<26)S=String.fromCharCode(97+b);else switch(b){case 26:S=" ";break;case xe.AS:m=d,d=tn.ALPHA_SHIFT;break;case xe.ML:d=tn.MIXED;break;case xe.PS:m=d,d=tn.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[y]);break;case xe.TEXT_COMPACTION_MODE_LATCH:d=tn.ALPHA;break}break;case tn.MIXED:if(b<xe.PL)S=xe.MIXED_CHARS[b];else switch(b){case xe.PL:d=tn.PUNCT;break;case 26:S=" ";break;case xe.LL:d=tn.LOWER;break;case xe.AL:d=tn.ALPHA;break;case xe.PS:m=d,d=tn.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[y]);break;case xe.TEXT_COMPACTION_MODE_LATCH:d=tn.ALPHA;break}break;case tn.PUNCT:if(b<xe.PAL)S=xe.PUNCT_CHARS[b];else switch(b){case xe.PAL:d=tn.ALPHA;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[y]);break;case xe.TEXT_COMPACTION_MODE_LATCH:d=tn.ALPHA;break}break;case tn.ALPHA_SHIFT:if(d=m,b<26)S=String.fromCharCode(65+b);else switch(b){case 26:S=" ";break;case xe.TEXT_COMPACTION_MODE_LATCH:d=tn.ALPHA;break}break;case tn.PUNCT_SHIFT:if(d=m,b<xe.PAL)S=xe.PUNCT_CHARS[b];else switch(b){case xe.PAL:d=tn.ALPHA;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[y]);break;case xe.TEXT_COMPACTION_MODE_LATCH:d=tn.ALPHA;break}break}S!==""&&f.append(S),y++}}static byteCompaction(i,o,l,f,d){let m=new $a,y=0,b=0,S=!1;switch(i){case xe.BYTE_COMPACTION_MODE_LATCH:let R=new Int32Array(6),L=o[f++];for(;f<o[0]&&!S;)switch(R[y++]=L,b=900*b+L,L=o[f++],L){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:f--,S=!0;break;default:if(y%5===0&&y>0){for(let k=0;k<6;++k)m.write(Number(Fi(b)>>Fi(8*(5-k))));b=0,y=0}break}f===o[0]&&L<xe.TEXT_COMPACTION_MODE_LATCH&&(R[y++]=L);for(let k=0;k<y;k++)m.write(R[k]);break;case xe.BYTE_COMPACTION_MODE_LATCH_6:for(;f<o[0]&&!S;){let k=o[f++];if(k<xe.TEXT_COMPACTION_MODE_LATCH)y++,b=900*b+k;else switch(k){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:f--,S=!0;break}if(y%5===0&&y>0){for(let q=0;q<6;++q)m.write(Number(Fi(b)>>Fi(8*(5-q))));b=0,y=0}}break}return d.append(J.decode(m.toByteArray(),l)),f}static numericCompaction(i,o,l){let f=0,d=!1,m=new Int32Array(xe.MAX_NUMERIC_CODEWORDS);for(;o<i[0]&&!d;){let y=i[o++];if(o===i[0]&&(d=!0),y<xe.TEXT_COMPACTION_MODE_LATCH)m[f]=y,f++;else switch(y){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:o--,d=!0;break}(f%xe.MAX_NUMERIC_CODEWORDS===0||y===xe.NUMERIC_COMPACTION_MODE_LATCH||d)&&f>0&&(l.append(xe.decodeBase900toBase10(m,f)),f=0)}return o}static decodeBase900toBase10(i,o){let l=Fi(0);for(let d=0;d<o;d++)l+=xe.EXP900[o-d-1]*Fi(i[d]);let f=l.toString();if(f.charAt(0)!=="1")throw new F;return f.substring(1)}}xe.TEXT_COMPACTION_MODE_LATCH=900,xe.BYTE_COMPACTION_MODE_LATCH=901,xe.NUMERIC_COMPACTION_MODE_LATCH=902,xe.BYTE_COMPACTION_MODE_LATCH_6=924,xe.ECI_USER_DEFINED=925,xe.ECI_GENERAL_PURPOSE=926,xe.ECI_CHARSET=927,xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,xe.MACRO_PDF417_TERMINATOR=922,xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,xe.MAX_NUMERIC_CODEWORDS=15,xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,xe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,xe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,xe.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,xe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,xe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,xe.PL=25,xe.LL=27,xe.AS=27,xe.ML=28,xe.AL=28,xe.PS=29,xe.PAL=29,xe.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,xe.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",xe.EXP900=js()?fa():[],xe.NUMBER_OF_SEQUENCE_CODEWORDS=2;class _t{constructor(){}static decode(i,o,l,f,d,m,y){let b=new Vi(i,o,l,f,d),S=null,R=null,L;for(let te=!0;;te=!1){if(o!=null&&(S=_t.getRowIndicatorColumn(i,b,o,!0,m,y)),f!=null&&(R=_t.getRowIndicatorColumn(i,b,f,!1,m,y)),L=_t.merge(S,R),L==null)throw fe.getNotFoundInstance();let re=L.getBoundingBox();if(te&&re!=null&&(re.getMinY()<b.getMinY()||re.getMaxY()>b.getMaxY()))b=re;else break}L.setBoundingBox(b);let k=L.getBarcodeColumnCount()+1;L.setDetectionResultColumn(0,S),L.setDetectionResultColumn(k,R);let q=S!=null;for(let te=1;te<=k;te++){let re=q?te:k-te;if(L.getDetectionResultColumn(re)!==void 0)continue;let he;re===0||re===k?he=new Ii(b,re===0):he=new ji(b),L.setDetectionResultColumn(re,he);let ye=-1,Ue=ye;for(let ke=b.getMinY();ke<=b.getMaxY();ke++){if(ye=_t.getStartColumn(L,re,ke,q),ye<0||ye>b.getMaxX()){if(Ue===-1)continue;ye=Ue}let Oe=_t.detectCodeword(i,b.getMinX(),b.getMaxX(),q,ye,ke,m,y);Oe!=null&&(he.setCodeword(ke,Oe),Ue=ye,m=Math.min(m,Oe.getWidth()),y=Math.max(y,Oe.getWidth()))}}return _t.createDecoderResult(L)}static merge(i,o){if(i==null&&o==null)return null;let l=_t.getBarcodeMetadata(i,o);if(l==null)return null;let f=Vi.merge(_t.adjustBoundingBox(i),_t.adjustBoundingBox(o));return new Wn(l,f)}static adjustBoundingBox(i){if(i==null)return null;let o=i.getRowHeights();if(o==null)return null;let l=_t.getMax(o),f=0;for(let y of o)if(f+=l-y,y>0)break;let d=i.getCodewords();for(let y=0;f>0&&d[y]==null;y++)f--;let m=0;for(let y=o.length-1;y>=0&&(m+=l-o[y],!(o[y]>0));y--);for(let y=d.length-1;m>0&&d[y]==null;y--)m--;return i.getBoundingBox().addMissingRows(f,m,i.isLeft())}static getMax(i){let o=-1;for(let l of i)o=Math.max(o,l);return o}static getBarcodeMetadata(i,o){let l;if(i==null||(l=i.getBarcodeMetadata())==null)return o==null?null:o.getBarcodeMetadata();let f;return o==null||(f=o.getBarcodeMetadata())==null?l:l.getColumnCount()!==f.getColumnCount()&&l.getErrorCorrectionLevel()!==f.getErrorCorrectionLevel()&&l.getRowCount()!==f.getRowCount()?null:l}static getRowIndicatorColumn(i,o,l,f,d,m){let y=new Ii(o,f);for(let b=0;b<2;b++){let S=b===0?1:-1,R=Math.trunc(Math.trunc(l.getX()));for(let L=Math.trunc(Math.trunc(l.getY()));L<=o.getMaxY()&&L>=o.getMinY();L+=S){let k=_t.detectCodeword(i,0,i.getWidth(),f,R,L,d,m);k!=null&&(y.setCodeword(L,k),f?R=k.getStartX():R=k.getEndX())}}return y}static adjustCodewordCount(i,o){let l=o[0][1],f=l.getValue(),d=i.getBarcodeColumnCount()*i.getBarcodeRowCount()-_t.getNumberOfECCodeWords(i.getBarcodeECLevel());if(f.length===0){if(d<1||d>nt.MAX_CODEWORDS_IN_BARCODE)throw fe.getNotFoundInstance();l.setValue(d)}else f[0]!==d&&l.setValue(d)}static createDecoderResult(i){let o=_t.createBarcodeMatrix(i);_t.adjustCodewordCount(i,o);let l=new Array,f=new Int32Array(i.getBarcodeRowCount()*i.getBarcodeColumnCount()),d=[],m=new Array;for(let b=0;b<i.getBarcodeRowCount();b++)for(let S=0;S<i.getBarcodeColumnCount();S++){let R=o[b][S+1].getValue(),L=b*i.getBarcodeColumnCount()+S;R.length===0?l.push(L):R.length===1?f[L]=R[0]:(m.push(L),d.push(R))}let y=new Array(d.length);for(let b=0;b<y.length;b++)y[b]=d[b];return _t.createDecoderResultFromAmbiguousValues(i.getBarcodeECLevel(),f,nt.toIntArray(l),nt.toIntArray(m),y)}static createDecoderResultFromAmbiguousValues(i,o,l,f,d){let m=new Int32Array(f.length),y=100;for(;y-- >0;){for(let b=0;b<m.length;b++)o[f[b]]=d[b][m[b]];try{return _t.decodeCodewords(o,i,l)}catch(b){if(!(b instanceof B))throw b}if(m.length===0)throw B.getChecksumInstance();for(let b=0;b<m.length;b++)if(m[b]<d[b].length-1){m[b]++;break}else if(m[b]=0,b===m.length-1)throw B.getChecksumInstance()}throw B.getChecksumInstance()}static createBarcodeMatrix(i){let o=Array.from({length:i.getBarcodeRowCount()},()=>new Array(i.getBarcodeColumnCount()+2));for(let f=0;f<o.length;f++)for(let d=0;d<o[f].length;d++)o[f][d]=new di;let l=0;for(let f of i.getDetectionResultColumns()){if(f!=null){for(let d of f.getCodewords())if(d!=null){let m=d.getRowNumber();if(m>=0){if(m>=o.length)continue;o[m][l].setValue(d.getValue())}}}l++}return o}static isValidBarcodeColumn(i,o){return o>=0&&o<=i.getBarcodeColumnCount()+1}static getStartColumn(i,o,l,f){let d=f?1:-1,m=null;if(_t.isValidBarcodeColumn(i,o-d)&&(m=i.getDetectionResultColumn(o-d).getCodeword(l)),m!=null)return f?m.getEndX():m.getStartX();if(m=i.getDetectionResultColumn(o).getCodewordNearby(l),m!=null)return f?m.getStartX():m.getEndX();if(_t.isValidBarcodeColumn(i,o-d)&&(m=i.getDetectionResultColumn(o-d).getCodewordNearby(l)),m!=null)return f?m.getEndX():m.getStartX();let y=0;for(;_t.isValidBarcodeColumn(i,o-d);){o-=d;for(let b of i.getDetectionResultColumn(o).getCodewords())if(b!=null)return(f?b.getEndX():b.getStartX())+d*y*(b.getEndX()-b.getStartX());y++}return f?i.getBoundingBox().getMinX():i.getBoundingBox().getMaxX()}static detectCodeword(i,o,l,f,d,m,y,b){d=_t.adjustCodewordStartColumn(i,o,l,f,d,m);let S=_t.getModuleBitCount(i,o,l,f,d,m);if(S==null)return null;let R,L=et.sum(S);if(f)R=d+L;else{for(let te=0;te<S.length/2;te++){let re=S[te];S[te]=S[S.length-1-te],S[S.length-1-te]=re}R=d,d=R-L}if(!_t.checkCodewordSkew(L,y,b))return null;let k=kn.getDecodedValue(S),q=nt.getCodeword(k);return q===-1?null:new gi(d,R,_t.getCodewordBucketNumber(k),q)}static getModuleBitCount(i,o,l,f,d,m){let y=d,b=new Int32Array(8),S=0,R=f?1:-1,L=f;for(;(f?y<l:y>=o)&&S<b.length;)i.get(y,m)===L?(b[S]++,y+=R):(S++,L=!L);return S===b.length||y===(f?l:o)&&S===b.length-1?b:null}static getNumberOfECCodeWords(i){return 2<<i}static adjustCodewordStartColumn(i,o,l,f,d,m){let y=d,b=f?-1:1;for(let S=0;S<2;S++){for(;(f?y>=o:y<l)&&f===i.get(y,m);){if(Math.abs(d-y)>_t.CODEWORD_SKEW_SIZE)return d;y+=b}b=-b,f=!f}return y}static checkCodewordSkew(i,o,l){return o-_t.CODEWORD_SKEW_SIZE<=i&&i<=l+_t.CODEWORD_SKEW_SIZE}static decodeCodewords(i,o,l){if(i.length===0)throw F.getFormatInstance();let f=1<<o+1,d=_t.correctErrors(i,l,f);_t.verifyCodewordCount(i,f);let m=xe.decode(i,""+o);return m.setErrorsCorrected(d),m.setErasures(l.length),m}static correctErrors(i,o,l){if(o!=null&&o.length>l/2+_t.MAX_ERRORS||l<0||l>_t.MAX_EC_CODEWORDS)throw B.getChecksumInstance();return _t.errorCorrection.decode(i,l,o)}static verifyCodewordCount(i,o){if(i.length<4)throw F.getFormatInstance();let l=i[0];if(l>i.length)throw F.getFormatInstance();if(l===0)if(o<i.length)i[0]=i.length-o;else throw F.getFormatInstance()}static getBitCountForCodeword(i){let o=new Int32Array(8),l=0,f=o.length-1;for(;!((i&1)!==l&&(l=i&1,f--,f<0));)o[f]++,i>>=1;return o}static getCodewordBucketNumber(i){return i instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(i):this.getCodewordBucketNumber_number(i)}static getCodewordBucketNumber_number(i){return _t.getCodewordBucketNumber(_t.getBitCountForCodeword(i))}static getCodewordBucketNumber_Int32Array(i){return(i[0]-i[2]+i[4]-i[6]+9)%9}static toString(i){let o=new Ss;for(let l=0;l<i.length;l++){o.format("Row %2d: ",l);for(let f=0;f<i[l].length;f++){let d=i[l][f];d.getValue().length===0?o.format("        ",null):o.format("%4d(%2d)",d.getValue()[0],d.getConfidence(d.getValue()[0]))}o.format("%n")}return o.toString()}}_t.CODEWORD_SKEW_SIZE=2,_t.MAX_ERRORS=3,_t.MAX_EC_CODEWORDS=512,_t.errorCorrection=new Ui;class zn{decode(i,o=null){let l=zn.decode(i,o,!1);if(l==null||l.length===0||l[0]==null)throw fe.getNotFoundInstance();return l[0]}decodeMultiple(i,o=null){try{return zn.decode(i,o,!0)}catch(l){throw l instanceof F||l instanceof B?fe.getNotFoundInstance():l}}static decode(i,o,l){const f=new Array,d=lt.detectMultiple(i,o,l);for(const m of d.getPoints()){const y=_t.decode(d.getBits(),m[4],m[5],m[6],m[7],zn.getMinCodewordWidth(m),zn.getMaxCodewordWidth(m)),b=new Fe(y.getText(),y.getRawBytes(),void 0,m,Be.PDF_417);b.putMetadata(mt.ERROR_CORRECTION_LEVEL,y.getECLevel());const S=y.getOther();S!=null&&b.putMetadata(mt.PDF417_EXTRA_METADATA,S),f.push(b)}return f.map(m=>m)}static getMaxWidth(i,o){return i==null||o==null?0:Math.trunc(Math.abs(i.getX()-o.getX()))}static getMinWidth(i,o){return i==null||o==null?K.MAX_VALUE:Math.trunc(Math.abs(i.getX()-o.getX()))}static getMaxCodewordWidth(i){return Math.floor(Math.max(Math.max(zn.getMaxWidth(i[0],i[4]),zn.getMaxWidth(i[6],i[2])*nt.MODULES_IN_CODEWORD/nt.MODULES_IN_STOP_PATTERN),Math.max(zn.getMaxWidth(i[1],i[5]),zn.getMaxWidth(i[7],i[3])*nt.MODULES_IN_CODEWORD/nt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(i){return Math.floor(Math.min(Math.min(zn.getMinWidth(i[0],i[4]),zn.getMinWidth(i[6],i[2])*nt.MODULES_IN_CODEWORD/nt.MODULES_IN_STOP_PATTERN),Math.min(zn.getMinWidth(i[1],i[5]),zn.getMinWidth(i[7],i[3])*nt.MODULES_IN_CODEWORD/nt.MODULES_IN_STOP_PATTERN)))}reset(){}}class da extends E{}da.kind="ReaderException";class $o{constructor(i,o){this.verbose=i===!0,o&&this.setHints(o)}decode(i,o){return o&&this.setHints(o),this.decodeInternal(i)}decodeWithState(i){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(i)}setHints(i){this.hints=i;const o=!s(i)&&i.get(De.TRY_HARDER)===!0,l=s(i)?null:i.get(De.POSSIBLE_FORMATS),f=new Array;if(!s(l)){const d=l.some(m=>m===Be.UPC_A||m===Be.UPC_E||m===Be.EAN_13||m===Be.EAN_8||m===Be.CODABAR||m===Be.CODE_39||m===Be.CODE_93||m===Be.CODE_128||m===Be.ITF||m===Be.RSS_14||m===Be.RSS_EXPANDED);d&&!o&&f.push(new Cr(i,this.verbose)),l.includes(Be.QR_CODE)&&f.push(new li),l.includes(Be.DATA_MATRIX)&&f.push(new Rr),l.includes(Be.AZTEC)&&f.push(new vi),l.includes(Be.PDF_417)&&f.push(new zn),d&&o&&f.push(new Cr(i,this.verbose))}f.length===0&&(o||f.push(new Cr(i,this.verbose)),f.push(new li),f.push(new Rr),f.push(new vi),f.push(new zn),o&&f.push(new Cr(i,this.verbose))),this.readers=f}reset(){if(this.readers!==null)for(const i of this.readers)i.reset()}decodeInternal(i){if(this.readers===null)throw new da("No readers where selected, nothing can be read.");for(const o of this.readers)try{return o.decode(i,this.hints)}catch(l){if(l instanceof da)continue}throw new fe("No MultiFormat Readers were able to detect the code.")}}class cs extends je{constructor(i=null,o=500){const l=new $o;l.setHints(i),super(l,o)}decodeBitmap(i){return this.reader.decodeWithState(i)}}class Ml extends je{constructor(i=500){super(new zn,i)}}class Pl extends je{constructor(i=500){super(new li,i)}}var eo;(function(P){P[P.ERROR_CORRECTION=0]="ERROR_CORRECTION",P[P.CHARACTER_SET=1]="CHARACTER_SET",P[P.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",P[P.MIN_SIZE=3]="MIN_SIZE",P[P.MAX_SIZE=4]="MAX_SIZE",P[P.MARGIN=5]="MARGIN",P[P.PDF417_COMPACT=6]="PDF417_COMPACT",P[P.PDF417_COMPACTION=7]="PDF417_COMPACTION",P[P.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",P[P.AZTEC_LAYERS=9]="AZTEC_LAYERS",P[P.QR_VERSION=10]="QR_VERSION"})(eo||(eo={}));var Hn=eo;class us{constructor(i){this.field=i,this.cachedGenerators=[],this.cachedGenerators.push(new Mn(i,Int32Array.from([1])))}buildGenerator(i){const o=this.cachedGenerators;if(i>=o.length){let l=o[o.length-1];const f=this.field;for(let d=o.length;d<=i;d++){const m=l.multiply(new Mn(f,Int32Array.from([1,f.exp(d-1+f.getGeneratorBase())])));o.push(m),l=m}}return o[i]}encode(i,o){if(o===0)throw new I("No error correction bytes");const l=i.length-o;if(l<=0)throw new I("No data bytes provided");const f=this.buildGenerator(o),d=new Int32Array(l);Q.arraycopy(i,0,d,0,l);let m=new Mn(this.field,d);m=m.multiplyByMonomial(o,1);const b=m.divide(f)[1].getCoefficients(),S=o-b.length;for(let R=0;R<S;R++)i[l+R]=0;Q.arraycopy(b,0,i,l+S,b.length)}}class Lt{constructor(){}static applyMaskPenaltyRule1(i){return Lt.applyMaskPenaltyRule1Internal(i,!0)+Lt.applyMaskPenaltyRule1Internal(i,!1)}static applyMaskPenaltyRule2(i){let o=0;const l=i.getArray(),f=i.getWidth(),d=i.getHeight();for(let m=0;m<d-1;m++){const y=l[m];for(let b=0;b<f-1;b++){const S=y[b];S===y[b+1]&&S===l[m+1][b]&&S===l[m+1][b+1]&&o++}}return Lt.N2*o}static applyMaskPenaltyRule3(i){let o=0;const l=i.getArray(),f=i.getWidth(),d=i.getHeight();for(let m=0;m<d;m++)for(let y=0;y<f;y++){const b=l[m];y+6<f&&b[y]===1&&b[y+1]===0&&b[y+2]===1&&b[y+3]===1&&b[y+4]===1&&b[y+5]===0&&b[y+6]===1&&(Lt.isWhiteHorizontal(b,y-4,y)||Lt.isWhiteHorizontal(b,y+7,y+11))&&o++,m+6<d&&l[m][y]===1&&l[m+1][y]===0&&l[m+2][y]===1&&l[m+3][y]===1&&l[m+4][y]===1&&l[m+5][y]===0&&l[m+6][y]===1&&(Lt.isWhiteVertical(l,y,m-4,m)||Lt.isWhiteVertical(l,y,m+7,m+11))&&o++}return o*Lt.N3}static isWhiteHorizontal(i,o,l){o=Math.max(o,0),l=Math.min(l,i.length);for(let f=o;f<l;f++)if(i[f]===1)return!1;return!0}static isWhiteVertical(i,o,l,f){l=Math.max(l,0),f=Math.min(f,i.length);for(let d=l;d<f;d++)if(i[d][o]===1)return!1;return!0}static applyMaskPenaltyRule4(i){let o=0;const l=i.getArray(),f=i.getWidth(),d=i.getHeight();for(let b=0;b<d;b++){const S=l[b];for(let R=0;R<f;R++)S[R]===1&&o++}const m=i.getHeight()*i.getWidth();return Math.floor(Math.abs(o*2-m)*10/m)*Lt.N4}static getDataMaskBit(i,o,l){let f,d;switch(i){case 0:f=l+o&1;break;case 1:f=l&1;break;case 2:f=o%3;break;case 3:f=(l+o)%3;break;case 4:f=Math.floor(l/2)+Math.floor(o/3)&1;break;case 5:d=l*o,f=(d&1)+d%3;break;case 6:d=l*o,f=(d&1)+d%3&1;break;case 7:d=l*o,f=d%3+(l+o&1)&1;break;default:throw new I("Invalid mask pattern: "+i)}return f===0}static applyMaskPenaltyRule1Internal(i,o){let l=0;const f=o?i.getHeight():i.getWidth(),d=o?i.getWidth():i.getHeight(),m=i.getArray();for(let y=0;y<f;y++){let b=0,S=-1;for(let R=0;R<d;R++){const L=o?m[y][R]:m[R][y];L===S?b++:(b>=5&&(l+=Lt.N1+(b-5)),b=1,S=L)}b>=5&&(l+=Lt.N1+(b-5))}return l}}Lt.N1=3,Lt.N2=3,Lt.N3=40,Lt.N4=10;class ga{constructor(i,o){this.width=i,this.height=o;const l=new Array(o);for(let f=0;f!==o;f++)l[f]=new Uint8Array(i);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(i,o){return this.bytes[o][i]}getArray(){return this.bytes}setNumber(i,o,l){this.bytes[o][i]=l}setBoolean(i,o,l){this.bytes[o][i]=l?1:0}clear(i){for(const o of this.bytes)ae.fill(o,i)}equals(i){if(!(i instanceof ga))return!1;const o=i;if(this.width!==o.width||this.height!==o.height)return!1;for(let l=0,f=this.height;l<f;++l){const d=this.bytes[l],m=o.bytes[l];for(let y=0,b=this.width;y<b;++y)if(d[y]!==m[y])return!1}return!0}toString(){const i=new G;for(let o=0,l=this.height;o<l;++o){const f=this.bytes[o];for(let d=0,m=this.width;d<m;++d)switch(f[d]){case 0:i.append(" 0");break;case 1:i.append(" 1");break;default:i.append("  ");break}i.append(`
`)}return i.toString()}}class hs{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const i=new G;return i.append(`<<
`),i.append(" mode: "),i.append(this.mode?this.mode.toString():"null"),i.append(`
 ecLevel: `),i.append(this.ecLevel?this.ecLevel.toString():"null"),i.append(`
 version: `),i.append(this.version?this.version.toString():"null"),i.append(`
 maskPattern: `),i.append(this.maskPattern.toString()),this.matrix?(i.append(`
 matrix:
`),i.append(this.matrix.toString())):i.append(`
 matrix: null
`),i.append(`>>
`),i.toString()}setMode(i){this.mode=i}setECLevel(i){this.ecLevel=i}setVersion(i){this.version=i}setMaskPattern(i){this.maskPattern=i}setMatrix(i){this.matrix=i}static isValidMaskPattern(i){return i>=0&&i<hs.NUM_MASK_PATTERNS}}hs.NUM_MASK_PATTERNS=8;class Ut extends E{}Ut.kind="WriterException";class x{constructor(){}static clearMatrix(i){i.clear(255)}static buildMatrix(i,o,l,f,d){x.clearMatrix(d),x.embedBasicPatterns(l,d),x.embedTypeInfo(o,f,d),x.maybeEmbedVersionInfo(l,d),x.embedDataBits(i,f,d)}static embedBasicPatterns(i,o){x.embedPositionDetectionPatternsAndSeparators(o),x.embedDarkDotAtLeftBottomCorner(o),x.maybeEmbedPositionAdjustmentPatterns(i,o),x.embedTimingPatterns(o)}static embedTypeInfo(i,o,l){const f=new ce;x.makeTypeInfoBits(i,o,f);for(let d=0,m=f.getSize();d<m;++d){const y=f.get(f.getSize()-1-d),b=x.TYPE_INFO_COORDINATES[d],S=b[0],R=b[1];if(l.setBoolean(S,R,y),d<8){const L=l.getWidth()-d-1;l.setBoolean(L,8,y)}else{const k=l.getHeight()-7+(d-8);l.setBoolean(8,k,y)}}}static maybeEmbedVersionInfo(i,o){if(i.getVersionNumber()<7)return;const l=new ce;x.makeVersionInfoBits(i,l);let f=17;for(let d=0;d<6;++d)for(let m=0;m<3;++m){const y=l.get(f);f--,o.setBoolean(d,o.getHeight()-11+m,y),o.setBoolean(o.getHeight()-11+m,d,y)}}static embedDataBits(i,o,l){let f=0,d=-1,m=l.getWidth()-1,y=l.getHeight()-1;for(;m>0;){for(m===6&&(m-=1);y>=0&&y<l.getHeight();){for(let b=0;b<2;++b){const S=m-b;if(!x.isEmpty(l.get(S,y)))continue;let R;f<i.getSize()?(R=i.get(f),++f):R=!1,o!==255&&Lt.getDataMaskBit(o,S,y)&&(R=!R),l.setBoolean(S,y,R)}y+=d}d=-d,y+=d,m-=2}if(f!==i.getSize())throw new Ut("Not all bits consumed: "+f+"/"+i.getSize())}static findMSBSet(i){return 32-K.numberOfLeadingZeros(i)}static calculateBCHCode(i,o){if(o===0)throw new I("0 polynomial");const l=x.findMSBSet(o);for(i<<=l-1;x.findMSBSet(i)>=l;)i^=o<<x.findMSBSet(i)-l;return i}static makeTypeInfoBits(i,o,l){if(!hs.isValidMaskPattern(o))throw new Ut("Invalid mask pattern");const f=i.getBits()<<3|o;l.appendBits(f,5);const d=x.calculateBCHCode(f,x.TYPE_INFO_POLY);l.appendBits(d,10);const m=new ce;if(m.appendBits(x.TYPE_INFO_MASK_PATTERN,15),l.xor(m),l.getSize()!==15)throw new Ut("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(i,o){o.appendBits(i.getVersionNumber(),6);const l=x.calculateBCHCode(i.getVersionNumber(),x.VERSION_INFO_POLY);if(o.appendBits(l,12),o.getSize()!==18)throw new Ut("should not happen but we got: "+o.getSize())}static isEmpty(i){return i===255}static embedTimingPatterns(i){for(let o=8;o<i.getWidth()-8;++o){const l=(o+1)%2;x.isEmpty(i.get(o,6))&&i.setNumber(o,6,l),x.isEmpty(i.get(6,o))&&i.setNumber(6,o,l)}}static embedDarkDotAtLeftBottomCorner(i){if(i.get(8,i.getHeight()-8)===0)throw new Ut;i.setNumber(8,i.getHeight()-8,1)}static embedHorizontalSeparationPattern(i,o,l){for(let f=0;f<8;++f){if(!x.isEmpty(l.get(i+f,o)))throw new Ut;l.setNumber(i+f,o,0)}}static embedVerticalSeparationPattern(i,o,l){for(let f=0;f<7;++f){if(!x.isEmpty(l.get(i,o+f)))throw new Ut;l.setNumber(i,o+f,0)}}static embedPositionAdjustmentPattern(i,o,l){for(let f=0;f<5;++f){const d=x.POSITION_ADJUSTMENT_PATTERN[f];for(let m=0;m<5;++m)l.setNumber(i+m,o+f,d[m])}}static embedPositionDetectionPattern(i,o,l){for(let f=0;f<7;++f){const d=x.POSITION_DETECTION_PATTERN[f];for(let m=0;m<7;++m)l.setNumber(i+m,o+f,d[m])}}static embedPositionDetectionPatternsAndSeparators(i){const o=x.POSITION_DETECTION_PATTERN[0].length;x.embedPositionDetectionPattern(0,0,i),x.embedPositionDetectionPattern(i.getWidth()-o,0,i),x.embedPositionDetectionPattern(0,i.getWidth()-o,i);const l=8;x.embedHorizontalSeparationPattern(0,l-1,i),x.embedHorizontalSeparationPattern(i.getWidth()-l,l-1,i),x.embedHorizontalSeparationPattern(0,i.getWidth()-l,i);const f=7;x.embedVerticalSeparationPattern(f,0,i),x.embedVerticalSeparationPattern(i.getHeight()-f-1,0,i),x.embedVerticalSeparationPattern(f,i.getHeight()-f,i)}static maybeEmbedPositionAdjustmentPatterns(i,o){if(i.getVersionNumber()<2)return;const l=i.getVersionNumber()-1,f=x.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let d=0,m=f.length;d!==m;d++){const y=f[d];if(y>=0)for(let b=0;b!==m;b++){const S=f[b];S>=0&&x.isEmpty(o.get(S,y))&&x.embedPositionAdjustmentPattern(S-2,y-2,o)}}}}x.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),x.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),x.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),x.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),x.VERSION_INFO_POLY=7973,x.TYPE_INFO_POLY=1335,x.TYPE_INFO_MASK_PATTERN=21522;class N{constructor(i,o){this.dataBytes=i,this.errorCorrectionBytes=o}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class D{constructor(){}static calculateMaskPenalty(i){return Lt.applyMaskPenaltyRule1(i)+Lt.applyMaskPenaltyRule2(i)+Lt.applyMaskPenaltyRule3(i)+Lt.applyMaskPenaltyRule4(i)}static encode(i,o,l=null){let f=D.DEFAULT_BYTE_MODE_ENCODING;const d=l!==null&&l.get(Hn.CHARACTER_SET)!==void 0;d&&(f=l.get(Hn.CHARACTER_SET).toString());const m=this.chooseMode(i,f),y=new ce;if(m===Je.BYTE&&(d||D.DEFAULT_BYTE_MODE_ENCODING!==f)){const ke=j.getCharacterSetECIByName(f);ke!==void 0&&this.appendECI(ke,y)}this.appendModeInfo(m,y);const b=new ce;this.appendBytes(i,m,b,f);let S;if(l!==null&&l.get(Hn.QR_VERSION)!==void 0){const ke=Number.parseInt(l.get(Hn.QR_VERSION).toString(),10);S=qe.getVersionForNumber(ke);const Oe=this.calculateBitsNeeded(m,y,b,S);if(!this.willFit(Oe,S,o))throw new Ut("Data too big for requested version")}else S=this.recommendVersion(o,m,y,b);const R=new ce;R.appendBitArray(y);const L=m===Je.BYTE?b.getSizeInBytes():i.length;this.appendLengthInfo(L,S,m,R),R.appendBitArray(b);const k=S.getECBlocksForLevel(o),q=S.getTotalCodewords()-k.getTotalECCodewords();this.terminateBits(q,R);const te=this.interleaveWithECBytes(R,S.getTotalCodewords(),q,k.getNumBlocks()),re=new hs;re.setECLevel(o),re.setMode(m),re.setVersion(S);const he=S.getDimensionForVersion(),ye=new ga(he,he),Ue=this.chooseMaskPattern(te,o,S,ye);return re.setMaskPattern(Ue),x.buildMatrix(te,o,S,Ue,ye),re.setMatrix(ye),re}static recommendVersion(i,o,l,f){const d=this.calculateBitsNeeded(o,l,f,qe.getVersionForNumber(1)),m=this.chooseVersion(d,i),y=this.calculateBitsNeeded(o,l,f,m);return this.chooseVersion(y,i)}static calculateBitsNeeded(i,o,l,f){return o.getSize()+i.getCharacterCountBits(f)+l.getSize()}static getAlphanumericCode(i){return i<D.ALPHANUMERIC_TABLE.length?D.ALPHANUMERIC_TABLE[i]:-1}static chooseMode(i,o=null){if(j.SJIS.getName()===o&&this.isOnlyDoubleByteKanji(i))return Je.KANJI;let l=!1,f=!1;for(let d=0,m=i.length;d<m;++d){const y=i.charAt(d);if(D.isDigit(y))l=!0;else if(this.getAlphanumericCode(y.charCodeAt(0))!==-1)f=!0;else return Je.BYTE}return f?Je.ALPHANUMERIC:l?Je.NUMERIC:Je.BYTE}static isOnlyDoubleByteKanji(i){let o;try{o=J.encode(i,j.SJIS)}catch{return!1}const l=o.length;if(l%2!==0)return!1;for(let f=0;f<l;f+=2){const d=o[f]&255;if((d<129||d>159)&&(d<224||d>235))return!1}return!0}static chooseMaskPattern(i,o,l,f){let d=Number.MAX_SAFE_INTEGER,m=-1;for(let y=0;y<hs.NUM_MASK_PATTERNS;y++){x.buildMatrix(i,o,l,y,f);let b=this.calculateMaskPenalty(f);b<d&&(d=b,m=y)}return m}static chooseVersion(i,o){for(let l=1;l<=40;l++){const f=qe.getVersionForNumber(l);if(D.willFit(i,f,o))return f}throw new Ut("Data too big")}static willFit(i,o,l){const f=o.getTotalCodewords(),m=o.getECBlocksForLevel(l).getTotalECCodewords(),y=f-m,b=(i+7)/8;return y>=b}static terminateBits(i,o){const l=i*8;if(o.getSize()>l)throw new Ut("data bits cannot fit in the QR Code"+o.getSize()+" > "+l);for(let m=0;m<4&&o.getSize()<l;++m)o.appendBit(!1);const f=o.getSize()&7;if(f>0)for(let m=f;m<8;m++)o.appendBit(!1);const d=i-o.getSizeInBytes();for(let m=0;m<d;++m)o.appendBits((m&1)===0?236:17,8);if(o.getSize()!==l)throw new Ut("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(i,o,l,f,d,m){if(f>=l)throw new Ut("Block ID too large");const y=i%l,b=l-y,S=Math.floor(i/l),R=S+1,L=Math.floor(o/l),k=L+1,q=S-L,te=R-k;if(q!==te)throw new Ut("EC bytes mismatch");if(l!==b+y)throw new Ut("RS blocks mismatch");if(i!==(L+q)*b+(k+te)*y)throw new Ut("Total bytes mismatch");f<b?(d[0]=L,m[0]=q):(d[0]=k,m[0]=te)}static interleaveWithECBytes(i,o,l,f){if(i.getSizeInBytes()!==l)throw new Ut("Number of bits and data bytes does not match");let d=0,m=0,y=0;const b=new Array;for(let R=0;R<f;++R){const L=new Int32Array(1),k=new Int32Array(1);D.getNumDataBytesAndNumECBytesForBlockID(o,l,f,R,L,k);const q=L[0],te=new Uint8Array(q);i.toBytes(8*d,te,0,q);const re=D.generateECBytes(te,k[0]);b.push(new N(te,re)),m=Math.max(m,q),y=Math.max(y,re.length),d+=L[0]}if(l!==d)throw new Ut("Data bytes does not match offset");const S=new ce;for(let R=0;R<m;++R)for(const L of b){const k=L.getDataBytes();R<k.length&&S.appendBits(k[R],8)}for(let R=0;R<y;++R)for(const L of b){const k=L.getErrorCorrectionBytes();R<k.length&&S.appendBits(k[R],8)}if(o!==S.getSizeInBytes())throw new Ut("Interleaving error: "+o+" and "+S.getSizeInBytes()+" differ.");return S}static generateECBytes(i,o){const l=i.length,f=new Int32Array(l+o);for(let m=0;m<l;m++)f[m]=i[m]&255;new us(bt.QR_CODE_FIELD_256).encode(f,o);const d=new Uint8Array(o);for(let m=0;m<o;m++)d[m]=f[l+m];return d}static appendModeInfo(i,o){o.appendBits(i.getBits(),4)}static appendLengthInfo(i,o,l,f){const d=l.getCharacterCountBits(o);if(i>=1<<d)throw new Ut(i+" is bigger than "+((1<<d)-1));f.appendBits(i,d)}static appendBytes(i,o,l,f){switch(o){case Je.NUMERIC:D.appendNumericBytes(i,l);break;case Je.ALPHANUMERIC:D.appendAlphanumericBytes(i,l);break;case Je.BYTE:D.append8BitBytes(i,l,f);break;case Je.KANJI:D.appendKanjiBytes(i,l);break;default:throw new Ut("Invalid mode: "+o)}}static getDigit(i){return i.charCodeAt(0)-48}static isDigit(i){const o=D.getDigit(i);return o>=0&&o<=9}static appendNumericBytes(i,o){const l=i.length;let f=0;for(;f<l;){const d=D.getDigit(i.charAt(f));if(f+2<l){const m=D.getDigit(i.charAt(f+1)),y=D.getDigit(i.charAt(f+2));o.appendBits(d*100+m*10+y,10),f+=3}else if(f+1<l){const m=D.getDigit(i.charAt(f+1));o.appendBits(d*10+m,7),f+=2}else o.appendBits(d,4),f++}}static appendAlphanumericBytes(i,o){const l=i.length;let f=0;for(;f<l;){const d=D.getAlphanumericCode(i.charCodeAt(f));if(d===-1)throw new Ut;if(f+1<l){const m=D.getAlphanumericCode(i.charCodeAt(f+1));if(m===-1)throw new Ut;o.appendBits(d*45+m,11),f+=2}else o.appendBits(d,6),f++}}static append8BitBytes(i,o,l){let f;try{f=J.encode(i,l)}catch(d){throw new Ut(d)}for(let d=0,m=f.length;d!==m;d++){const y=f[d];o.appendBits(y,8)}}static appendKanjiBytes(i,o){let l;try{l=J.encode(i,j.SJIS)}catch(d){throw new Ut(d)}const f=l.length;for(let d=0;d<f;d+=2){const m=l[d]&255,y=l[d+1]&255,b=m<<8&4294967295|y;let S=-1;if(b>=33088&&b<=40956?S=b-33088:b>=57408&&b<=60351&&(S=b-49472),S===-1)throw new Ut("Invalid byte sequence");const R=(S>>8)*192+(S&255);o.appendBits(R,13)}}static appendECI(i,o){o.appendBits(Je.ECI.getBits(),4),o.appendBits(i.getValue(),8)}}D.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),D.DEFAULT_BYTE_MODE_ENCODING=j.UTF8.getName();class z{write(i,o,l,f=null){if(i.length===0)throw new I("Found empty contents");if(o<0||l<0)throw new I("Requested dimensions are too small: "+o+"x"+l);let d=Pe.L,m=z.QUIET_ZONE_SIZE;f!==null&&(f.get(Hn.ERROR_CORRECTION)!==void 0&&(d=Pe.fromString(f.get(Hn.ERROR_CORRECTION).toString())),f.get(Hn.MARGIN)!==void 0&&(m=Number.parseInt(f.get(Hn.MARGIN).toString(),10)));const y=D.encode(i,d,f);return this.renderResult(y,o,l,m)}writeToDom(i,o,l,f,d=null){typeof i=="string"&&(i=document.querySelector(i));const m=this.write(o,l,f,d);i&&i.appendChild(m)}renderResult(i,o,l,f){const d=i.getMatrix();if(d===null)throw new Sr;const m=d.getWidth(),y=d.getHeight(),b=m+f*2,S=y+f*2,R=Math.max(o,b),L=Math.max(l,S),k=Math.min(Math.floor(R/b),Math.floor(L/S)),q=Math.floor((R-m*k)/2),te=Math.floor((L-y*k)/2),re=this.createSVGElement(R,L);for(let he=0,ye=te;he<y;he++,ye+=k)for(let Ue=0,ke=q;Ue<m;Ue++,ke+=k)if(d.get(Ue,he)===1){const Oe=this.createSvgRectElement(ke,ye,k,k);re.appendChild(Oe)}return re}createSVGElement(i,o){const l=document.createElementNS(z.SVG_NS,"svg");return l.setAttributeNS(null,"height",i.toString()),l.setAttributeNS(null,"width",o.toString()),l}createSvgRectElement(i,o,l,f){const d=document.createElementNS(z.SVG_NS,"rect");return d.setAttributeNS(null,"x",i.toString()),d.setAttributeNS(null,"y",o.toString()),d.setAttributeNS(null,"height",l.toString()),d.setAttributeNS(null,"width",f.toString()),d.setAttributeNS(null,"fill","#000000"),d}}z.QUIET_ZONE_SIZE=4,z.SVG_NS="http://www.w3.org/2000/svg";class ue{encode(i,o,l,f,d){if(i.length===0)throw new I("Found empty contents");if(o!==Be.QR_CODE)throw new I("Can only encode QR_CODE, but got "+o);if(l<0||f<0)throw new I(`Requested dimensions are too small: ${l}x${f}`);let m=Pe.L,y=ue.QUIET_ZONE_SIZE;d!==null&&(d.get(Hn.ERROR_CORRECTION)!==void 0&&(m=Pe.fromString(d.get(Hn.ERROR_CORRECTION).toString())),d.get(Hn.MARGIN)!==void 0&&(y=Number.parseInt(d.get(Hn.MARGIN).toString(),10)));const b=D.encode(i,m,d);return ue.renderResult(b,l,f,y)}static renderResult(i,o,l,f){const d=i.getMatrix();if(d===null)throw new Sr;const m=d.getWidth(),y=d.getHeight(),b=m+f*2,S=y+f*2,R=Math.max(o,b),L=Math.max(l,S),k=Math.min(Math.floor(R/b),Math.floor(L/S)),q=Math.floor((R-m*k)/2),te=Math.floor((L-y*k)/2),re=new Qe(R,L);for(let he=0,ye=te;he<y;he++,ye+=k)for(let Ue=0,ke=q;Ue<m;Ue++,ke+=k)d.get(Ue,he)===1&&re.setRegion(ke,ye,k,k);return re}}ue.QUIET_ZONE_SIZE=4;class Ee{encode(i,o,l,f,d){let m;switch(o){case Be.QR_CODE:m=new ue;break;default:throw new I("No encoder available for format "+o)}return m.encode(i,o,l,f,d)}}class Ve extends Xe{constructor(i,o,l,f,d,m,y,b){if(super(m,y),this.yuvData=i,this.dataWidth=o,this.dataHeight=l,this.left=f,this.top=d,f+m>o||d+y>l)throw new I("Crop rectangle does not fit within image data.");b&&this.reverseHorizontal(m,y)}getRow(i,o){if(i<0||i>=this.getHeight())throw new I("Requested row is outside the image: "+i);const l=this.getWidth();(o==null||o.length<l)&&(o=new Uint8ClampedArray(l));const f=(i+this.top)*this.dataWidth+this.left;return Q.arraycopy(this.yuvData,f,o,0,l),o}getMatrix(){const i=this.getWidth(),o=this.getHeight();if(i===this.dataWidth&&o===this.dataHeight)return this.yuvData;const l=i*o,f=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return Q.arraycopy(this.yuvData,d,f,0,l),f;for(let m=0;m<o;m++){const y=m*i;Q.arraycopy(this.yuvData,d,f,y,i),d+=this.dataWidth}return f}isCropSupported(){return!0}crop(i,o,l,f){return new Ve(this.yuvData,this.dataWidth,this.dataHeight,this.left+i,this.top+o,l,f,!1)}renderThumbnail(){const i=this.getWidth()/Ve.THUMBNAIL_SCALE_FACTOR,o=this.getHeight()/Ve.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(i*o),f=this.yuvData;let d=this.top*this.dataWidth+this.left;for(let m=0;m<o;m++){const y=m*i;for(let b=0;b<i;b++){const S=f[d+b*Ve.THUMBNAIL_SCALE_FACTOR]&255;l[y+b]=4278190080|S*65793}d+=this.dataWidth*Ve.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/Ve.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Ve.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(i,o){const l=this.yuvData;for(let f=0,d=this.top*this.dataWidth+this.left;f<o;f++,d+=this.dataWidth){const m=d+i/2;for(let y=d,b=d+i-1;y<m;y++,b--){const S=l[y];l[y]=l[b],l[b]=S}}}invert(){return new dt(this)}}Ve.THUMBNAIL_SCALE_FACTOR=2;class pt extends Xe{constructor(i,o,l,f,d,m,y){if(super(o,l),this.dataWidth=f,this.dataHeight=d,this.left=m,this.top=y,i.BYTES_PER_ELEMENT===4){const b=o*l,S=new Uint8ClampedArray(b);for(let R=0;R<b;R++){const L=i[R],k=L>>16&255,q=L>>7&510,te=L&255;S[R]=(k+q+te)/4&255}this.luminances=S}else this.luminances=i;if(f===void 0&&(this.dataWidth=o),d===void 0&&(this.dataHeight=l),m===void 0&&(this.left=0),y===void 0&&(this.top=0),this.left+o>this.dataWidth||this.top+l>this.dataHeight)throw new I("Crop rectangle does not fit within image data.")}getRow(i,o){if(i<0||i>=this.getHeight())throw new I("Requested row is outside the image: "+i);const l=this.getWidth();(o==null||o.length<l)&&(o=new Uint8ClampedArray(l));const f=(i+this.top)*this.dataWidth+this.left;return Q.arraycopy(this.luminances,f,o,0,l),o}getMatrix(){const i=this.getWidth(),o=this.getHeight();if(i===this.dataWidth&&o===this.dataHeight)return this.luminances;const l=i*o,f=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return Q.arraycopy(this.luminances,d,f,0,l),f;for(let m=0;m<o;m++){const y=m*i;Q.arraycopy(this.luminances,d,f,y,i),d+=this.dataWidth}return f}isCropSupported(){return!0}crop(i,o,l,f){return new pt(this.luminances,l,f,this.dataWidth,this.dataHeight,this.left+i,this.top+o)}invert(){return new dt(this)}}class Gn extends j{static forName(i){return this.getCharacterSetECIByName(i)}}class $t{}$t.ISO_8859_1=j.ISO8859_1;class Cn{isCompact(){return this.compact}setCompact(i){this.compact=i}getSize(){return this.size}setSize(i){this.size=i}getLayers(){return this.layers}setLayers(i){this.layers=i}getCodeWords(){return this.codeWords}setCodeWords(i){this.codeWords=i}getMatrix(){return this.matrix}setMatrix(i){this.matrix=i}}class mi{static singletonList(i){return[i]}static min(i,o){return i.sort(o)[0]}}class fs{constructor(i){this.previous=i}getPrevious(){return this.previous}}class Br extends fs{constructor(i,o,l){super(i),this.value=o,this.bitCount=l}appendTo(i,o){i.appendBits(this.value,this.bitCount)}add(i,o){return new Br(this,i,o)}addBinaryShift(i,o){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Br(this,i,o)}toString(){let i=this.value&(1<<this.bitCount)-1;return i|=1<<this.bitCount,"<"+K.toBinaryString(i|1<<this.bitCount).substring(1)+">"}}class pi extends Br{constructor(i,o,l){super(i,0,0),this.binaryShiftStart=o,this.binaryShiftByteCount=l}appendTo(i,o){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(i.appendBits(31,5),this.binaryShiftByteCount>62?i.appendBits(this.binaryShiftByteCount-31,16):l===0?i.appendBits(Math.min(this.binaryShiftByteCount,31),5):i.appendBits(this.binaryShiftByteCount-31,5)),i.appendBits(o[this.binaryShiftStart+l],8)}addBinaryShift(i,o){return new pi(this,i,o)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function ma(P,i,o){return new pi(P,i,o)}function ds(P,i,o){return new Br(P,i,o)}const to=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Fs=0,Ll=1,Ni=2,Wc=3,zi=4,el=new Br(null,0,0),pa=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function h0(P){for(let i of P)ae.fill(i,-1);return P[Fs][zi]=0,P[Ll][zi]=0,P[Ll][Fs]=28,P[Wc][zi]=0,P[Ni][zi]=0,P[Ni][Fs]=15,P}const tl=h0(ae.createInt32Array(6,6));class Hi{constructor(i,o,l,f){this.token=i,this.mode=o,this.binaryShiftByteCount=l,this.bitCount=f}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(i,o){let l=this.bitCount,f=this.token;if(i!==this.mode){let m=pa[this.mode][i];f=ds(f,m&65535,m>>16),l+=m>>16}let d=i===Ni?4:5;return f=ds(f,o,d),new Hi(f,i,0,l+d)}shiftAndAppend(i,o){let l=this.token,f=this.mode===Ni?4:5;return l=ds(l,tl[this.mode][i],f),l=ds(l,o,5),new Hi(l,this.mode,0,this.bitCount+f+5)}addBinaryShiftChar(i){let o=this.token,l=this.mode,f=this.bitCount;if(this.mode===zi||this.mode===Ni){let y=pa[l][Fs];o=ds(o,y&65535,y>>16),f+=y>>16,l=Fs}let d=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,m=new Hi(o,l,this.binaryShiftByteCount+1,f+d);return m.binaryShiftByteCount===2078&&(m=m.endBinaryShift(i+1)),m}endBinaryShift(i){if(this.binaryShiftByteCount===0)return this;let o=this.token;return o=ma(o,i-this.binaryShiftByteCount,this.binaryShiftByteCount),new Hi(o,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(i){let o=this.bitCount+(pa[this.mode][i.mode]>>16);return this.binaryShiftByteCount<i.binaryShiftByteCount?o+=Hi.calculateBinaryShiftCost(i)-Hi.calculateBinaryShiftCost(this):this.binaryShiftByteCount>i.binaryShiftByteCount&&i.binaryShiftByteCount>0&&(o+=10),o<=i.bitCount}toBitArray(i){let o=[];for(let f=this.endBinaryShift(i.length).token;f!==null;f=f.getPrevious())o.unshift(f);let l=new ce;for(const f of o)f.appendTo(l,i);return l}toString(){return $.format("%s bits=%d bytes=%d",to[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(i){return i.binaryShiftByteCount>62?21:i.binaryShiftByteCount>31?20:i.binaryShiftByteCount>0?10:0}}Hi.INITIAL_STATE=new Hi(el,Fs,0,0);function vh(P){const i=$.getCharCode(" "),o=$.getCharCode("."),l=$.getCharCode(",");P[Fs][i]=1;const f=$.getCharCode("Z"),d=$.getCharCode("A");for(let k=d;k<=f;k++)P[Fs][k]=k-d+2;P[Ll][i]=1;const m=$.getCharCode("z"),y=$.getCharCode("a");for(let k=y;k<=m;k++)P[Ll][k]=k-y+2;P[Ni][i]=1;const b=$.getCharCode("9"),S=$.getCharCode("0");for(let k=S;k<=b;k++)P[Ni][k]=k-S+2;P[Ni][l]=12,P[Ni][o]=13;const R=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let k=0;k<R.length;k++)P[Wc][$.getCharCode(R[k])]=k;const L=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let k=0;k<L.length;k++)$.getCharCode(L[k])>0&&(P[zi][$.getCharCode(L[k])]=k);return P}const nl=vh(ae.createInt32Array(5,256));class xa{constructor(i){this.text=i}encode(){const i=$.getCharCode(" "),o=$.getCharCode(`
`);let l=mi.singletonList(Hi.INITIAL_STATE);for(let d=0;d<this.text.length;d++){let m,y=d+1<this.text.length?this.text[d+1]:0;switch(this.text[d]){case $.getCharCode("\r"):m=y===o?2:0;break;case $.getCharCode("."):m=y===i?3:0;break;case $.getCharCode(","):m=y===i?4:0;break;case $.getCharCode(":"):m=y===i?5:0;break;default:m=0}m>0?(l=xa.updateStateListForPair(l,d,m),d++):l=this.updateStateListForChar(l,d)}return mi.min(l,(d,m)=>d.getBitCount()-m.getBitCount()).toBitArray(this.text)}updateStateListForChar(i,o){const l=[];for(let f of i)this.updateStateForChar(f,o,l);return xa.simplifyStates(l)}updateStateForChar(i,o,l){let f=this.text[o]&255,d=nl[i.getMode()][f]>0,m=null;for(let y=0;y<=zi;y++){let b=nl[y][f];if(b>0){if(m==null&&(m=i.endBinaryShift(o)),!d||y===i.getMode()||y===Ni){const S=m.latchAndAppend(y,b);l.push(S)}if(!d&&tl[i.getMode()][y]>=0){const S=m.shiftAndAppend(y,b);l.push(S)}}}if(i.getBinaryShiftByteCount()>0||nl[i.getMode()][f]===0){let y=i.addBinaryShiftChar(o);l.push(y)}}static updateStateListForPair(i,o,l){const f=[];for(let d of i)this.updateStateForPair(d,o,l,f);return this.simplifyStates(f)}static updateStateForPair(i,o,l,f){let d=i.endBinaryShift(o);if(f.push(d.latchAndAppend(zi,l)),i.getMode()!==zi&&f.push(d.shiftAndAppend(zi,l)),l===3||l===4){let m=d.latchAndAppend(Ni,16-l).latchAndAppend(Ni,1);f.push(m)}if(i.getBinaryShiftByteCount()>0){let m=i.addBinaryShiftChar(o).addBinaryShiftChar(o+1);f.push(m)}}static simplifyStates(i){let o=[];for(const l of i){let f=!0;for(const d of o){if(d.isBetterThanOrEqualTo(l)){f=!1;break}l.isBetterThanOrEqualTo(d)&&(o=o.filter(m=>m!==d))}f&&o.push(l)}return o}}class Gt{constructor(){}static encodeBytes(i){return Gt.encode(i,Gt.DEFAULT_EC_PERCENT,Gt.DEFAULT_AZTEC_LAYERS)}static encode(i,o,l){let f=new xa(i).encode(),d=K.truncDivision(f.getSize()*o,100)+11,m=f.getSize()+d,y,b,S,R,L;if(l!==Gt.DEFAULT_AZTEC_LAYERS){if(y=l<0,b=Math.abs(l),b>(y?Gt.MAX_NB_BITS_COMPACT:Gt.MAX_NB_BITS))throw new I($.format("Illegal value %s for layers",l));S=Gt.totalBitsInLayer(b,y),R=Gt.WORD_SIZE[b];let Oe=S-S%R;if(L=Gt.stuffBits(f,R),L.getSize()+d>Oe)throw new I("Data to large for user specified layer");if(y&&L.getSize()>R*64)throw new I("Data to large for user specified layer")}else{R=0,L=null;for(let Oe=0;;Oe++){if(Oe>Gt.MAX_NB_BITS)throw new I("Data too large for an Aztec code");if(y=Oe<=3,b=y?Oe+1:Oe,S=Gt.totalBitsInLayer(b,y),m>S)continue;(L==null||R!==Gt.WORD_SIZE[b])&&(R=Gt.WORD_SIZE[b],L=Gt.stuffBits(f,R));let Ot=S-S%R;if(!(y&&L.getSize()>R*64)&&L.getSize()+d<=Ot)break}}let k=Gt.generateCheckWords(L,S,R),q=L.getSize()/R,te=Gt.generateModeMessage(y,b,q),re=(y?11:14)+b*4,he=new Int32Array(re),ye;if(y){ye=re;for(let Oe=0;Oe<he.length;Oe++)he[Oe]=Oe}else{ye=re+1+2*K.truncDivision(K.truncDivision(re,2)-1,15);let Oe=K.truncDivision(re,2),Ot=K.truncDivision(ye,2);for(let Et=0;Et<Oe;Et++){let $n=Et+K.truncDivision(Et,15);he[Oe-Et-1]=Ot-$n-1,he[Oe+Et]=Ot+$n+1}}let Ue=new Qe(ye);for(let Oe=0,Ot=0;Oe<b;Oe++){let Et=(b-Oe)*4+(y?9:12);for(let $n=0;$n<Et;$n++){let Ri=$n*2;for(let Gr=0;Gr<2;Gr++)k.get(Ot+Ri+Gr)&&Ue.set(he[Oe*2+Gr],he[Oe*2+$n]),k.get(Ot+Et*2+Ri+Gr)&&Ue.set(he[Oe*2+$n],he[re-1-Oe*2-Gr]),k.get(Ot+Et*4+Ri+Gr)&&Ue.set(he[re-1-Oe*2-Gr],he[re-1-Oe*2-$n]),k.get(Ot+Et*6+Ri+Gr)&&Ue.set(he[re-1-Oe*2-$n],he[Oe*2+Gr])}Ot+=Et*8}if(Gt.drawModeMessage(Ue,y,ye,te),y)Gt.drawBullsEye(Ue,K.truncDivision(ye,2),5);else{Gt.drawBullsEye(Ue,K.truncDivision(ye,2),7);for(let Oe=0,Ot=0;Oe<K.truncDivision(re,2)-1;Oe+=15,Ot+=16)for(let Et=K.truncDivision(ye,2)&1;Et<ye;Et+=2)Ue.set(K.truncDivision(ye,2)-Ot,Et),Ue.set(K.truncDivision(ye,2)+Ot,Et),Ue.set(Et,K.truncDivision(ye,2)-Ot),Ue.set(Et,K.truncDivision(ye,2)+Ot)}let ke=new Cn;return ke.setCompact(y),ke.setSize(ye),ke.setLayers(b),ke.setCodeWords(q),ke.setMatrix(Ue),ke}static drawBullsEye(i,o,l){for(let f=0;f<l;f+=2)for(let d=o-f;d<=o+f;d++)i.set(d,o-f),i.set(d,o+f),i.set(o-f,d),i.set(o+f,d);i.set(o-l,o-l),i.set(o-l+1,o-l),i.set(o-l,o-l+1),i.set(o+l,o-l),i.set(o+l,o-l+1),i.set(o+l,o+l-1)}static generateModeMessage(i,o,l){let f=new ce;return i?(f.appendBits(o-1,2),f.appendBits(l-1,6),f=Gt.generateCheckWords(f,28,4)):(f.appendBits(o-1,5),f.appendBits(l-1,11),f=Gt.generateCheckWords(f,40,4)),f}static drawModeMessage(i,o,l,f){let d=K.truncDivision(l,2);if(o)for(let m=0;m<7;m++){let y=d-3+m;f.get(m)&&i.set(y,d-5),f.get(m+7)&&i.set(d+5,y),f.get(20-m)&&i.set(y,d+5),f.get(27-m)&&i.set(d-5,y)}else for(let m=0;m<10;m++){let y=d-5+m+K.truncDivision(m,5);f.get(m)&&i.set(y,d-7),f.get(m+10)&&i.set(d+7,y),f.get(29-m)&&i.set(y,d+7),f.get(39-m)&&i.set(d-7,y)}}static generateCheckWords(i,o,l){let f=i.getSize()/l,d=new us(Gt.getGF(l)),m=K.truncDivision(o,l),y=Gt.bitsToWords(i,l,m);d.encode(y,m-f);let b=o%l,S=new ce;S.appendBits(0,b);for(const R of Array.from(y))S.appendBits(R,l);return S}static bitsToWords(i,o,l){let f=new Int32Array(l),d,m;for(d=0,m=i.getSize()/o;d<m;d++){let y=0;for(let b=0;b<o;b++)y|=i.get(d*o+b)?1<<o-b-1:0;f[d]=y}return f}static getGF(i){switch(i){case 4:return bt.AZTEC_PARAM;case 6:return bt.AZTEC_DATA_6;case 8:return bt.AZTEC_DATA_8;case 10:return bt.AZTEC_DATA_10;case 12:return bt.AZTEC_DATA_12;default:throw new I("Unsupported word size "+i)}}static stuffBits(i,o){let l=new ce,f=i.getSize(),d=(1<<o)-2;for(let m=0;m<f;m+=o){let y=0;for(let b=0;b<o;b++)(m+b>=f||i.get(m+b))&&(y|=1<<o-1-b);(y&d)===d?(l.appendBits(y&d,o),m--):(y&d)===0?(l.appendBits(y|1,o),m--):l.appendBits(y,o)}return l}static totalBitsInLayer(i,o){return((o?88:112)+16*i)*i}}Gt.DEFAULT_EC_PERCENT=33,Gt.DEFAULT_AZTEC_LAYERS=0,Gt.MAX_NB_BITS=32,Gt.MAX_NB_BITS_COMPACT=4,Gt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class rl{encode(i,o,l,f){return this.encodeWithHints(i,o,l,f,null)}encodeWithHints(i,o,l,f,d){let m=$t.ISO_8859_1,y=Gt.DEFAULT_EC_PERCENT,b=Gt.DEFAULT_AZTEC_LAYERS;return d!=null&&(d.has(Hn.CHARACTER_SET)&&(m=Gn.forName(d.get(Hn.CHARACTER_SET).toString())),d.has(Hn.ERROR_CORRECTION)&&(y=K.parseInt(d.get(Hn.ERROR_CORRECTION).toString())),d.has(Hn.AZTEC_LAYERS)&&(b=K.parseInt(d.get(Hn.AZTEC_LAYERS).toString()))),rl.encodeLayers(i,o,l,f,m,y,b)}static encodeLayers(i,o,l,f,d,m,y){if(o!==Be.AZTEC)throw new I("Can only encode AZTEC, but got "+o);let b=Gt.encode($.getBytes(i,d),m,y);return rl.renderResult(b,l,f)}static renderResult(i,o,l){let f=i.getMatrix();if(f==null)throw new Sr;let d=f.getWidth(),m=f.getHeight(),y=Math.max(o,d),b=Math.max(l,m),S=Math.min(y/d,b/m),R=(y-d*S)/2,L=(b-m*S)/2,k=new Qe(y,b);for(let q=0,te=L;q<m;q++,te+=S)for(let re=0,he=R;re<d;re++,he+=S)f.get(re,q)&&k.setRegion(he,te,S,S);return k}}t.AbstractExpandedDecoder=Dt,t.ArgumentException=C,t.ArithmeticException=Ai,t.AztecCode=Cn,t.AztecCodeReader=vi,t.AztecCodeWriter=rl,t.AztecDecoder=Zt,t.AztecDetector=Ls,t.AztecDetectorResult=ss,t.AztecEncoder=Gt,t.AztecHighLevelEncoder=xa,t.AztecPoint=Pn,t.BarcodeFormat=Be,t.Binarizer=W,t.BinaryBitmap=M,t.BitArray=ce,t.BitMatrix=Qe,t.BitSource=Dn,t.BrowserAztecCodeReader=ia,t.BrowserBarcodeReader=aa,t.BrowserCodeReader=je,t.BrowserDatamatrixCodeReader=X,t.BrowserMultiFormatReader=cs,t.BrowserPDF417Reader=Ml,t.BrowserQRCodeReader=Pl,t.BrowserQRCodeSvgWriter=z,t.CharacterSetECI=j,t.ChecksumException=B,t.Code128Reader=Le,t.Code39Reader=zt,t.DataMatrixDecodedBitStreamParser=Nr,t.DataMatrixReader=Rr,t.DecodeHintType=De,t.DecoderResult=Qt,t.DefaultGridSampler=as,t.DetectorResult=is,t.EAN13Reader=ln,t.EncodeHintType=Hn,t.Exception=E,t.FormatException=F,t.GenericGF=bt,t.GenericGFPoly=Mn,t.GlobalHistogramBinarizer=pe,t.GridSampler=ti,t.GridSamplerInstance=pr,t.HTMLCanvasElementLuminanceSource=gt,t.HybridBinarizer=ve,t.ITFReader=ot,t.IllegalArgumentException=I,t.IllegalStateException=Sr,t.InvertedLuminanceSource=dt,t.LuminanceSource=Xe,t.MathUtils=et,t.MultiFormatOneDReader=Cr,t.MultiFormatReader=$o,t.MultiFormatWriter=Ee,t.NotFoundException=fe,t.OneDReader=kt,t.PDF417DecodedBitStreamParser=xe,t.PDF417DecoderErrorCorrection=Ui,t.PDF417Reader=zn,t.PDF417ResultMetadata=Cs,t.PerspectiveTransform=mr,t.PlanarYUVLuminanceSource=Ve,t.QRCodeByteMatrix=ga,t.QRCodeDataMask=Xn,t.QRCodeDecodedBitStreamParser=un,t.QRCodeDecoderErrorCorrectionLevel=Pe,t.QRCodeDecoderFormatInformation=tt,t.QRCodeEncoder=D,t.QRCodeEncoderQRCode=hs,t.QRCodeMaskUtil=Lt,t.QRCodeMatrixUtil=x,t.QRCodeMode=Je,t.QRCodeReader=li,t.QRCodeVersion=qe,t.QRCodeWriter=ue,t.RGBLuminanceSource=pt,t.RSS14Reader=Ht,t.RSSExpandedReader=Ce,t.ReaderException=da,t.ReedSolomonDecoder=ei,t.ReedSolomonEncoder=us,t.ReedSolomonException=gr,t.Result=Fe,t.ResultMetadataType=mt,t.ResultPoint=ze,t.StringUtils=$,t.UnsupportedOperationException=Z,t.VideoInputDevice=ie,t.WhiteRectangleDetector=xn,t.WriterException=Ut,t.ZXingArrays=ae,t.ZXingCharset=Gn,t.ZXingInteger=K,t.ZXingStandardCharsets=$t,t.ZXingStringBuilder=G,t.ZXingStringEncoding=J,t.ZXingSystem=Q,t.createAbstractExpandedDecoder=kr,Object.defineProperty(t,"__esModule",{value:!0})}))})(Vu,Vu.exports)),Vu.exports}var Vn=i9();const s9=hm(Vn),a9=ZS({__proto__:null,default:s9},[Vn]);var Gw=(function(){function n(e,t,s){if(this.formatMap=new Map([[We.QR_CODE,Vn.BarcodeFormat.QR_CODE],[We.AZTEC,Vn.BarcodeFormat.AZTEC],[We.CODABAR,Vn.BarcodeFormat.CODABAR],[We.CODE_39,Vn.BarcodeFormat.CODE_39],[We.CODE_93,Vn.BarcodeFormat.CODE_93],[We.CODE_128,Vn.BarcodeFormat.CODE_128],[We.DATA_MATRIX,Vn.BarcodeFormat.DATA_MATRIX],[We.MAXICODE,Vn.BarcodeFormat.MAXICODE],[We.ITF,Vn.BarcodeFormat.ITF],[We.EAN_13,Vn.BarcodeFormat.EAN_13],[We.EAN_8,Vn.BarcodeFormat.EAN_8],[We.PDF_417,Vn.BarcodeFormat.PDF_417],[We.RSS_14,Vn.BarcodeFormat.RSS_14],[We.RSS_EXPANDED,Vn.BarcodeFormat.RSS_EXPANDED],[We.UPC_A,Vn.BarcodeFormat.UPC_A],[We.UPC_E,Vn.BarcodeFormat.UPC_E],[We.UPC_EAN_EXTENSION,Vn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!a9)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=s;var c=this.createZXingFormats(e),h=new Map;h.set(Vn.DecodeHintType.POSSIBLE_FORMATS,c),h.set(Vn.DecodeHintType.TRY_HARDER,!1),this.hints=h}return n.prototype.decodeAsync=function(e){var t=this;return new Promise(function(s,c){try{s(t.decode(e))}catch(h){c(h)}})},n.prototype.decode=function(e){var t=new Vn.MultiFormatReader(this.verbose,this.hints),s=new Vn.HTMLCanvasElementLuminanceSource(e),c=new Vn.BinaryBitmap(new Vn.HybridBinarizer(s)),h=t.decode(c);return{text:h.text,format:RT.create(this.toHtml5QrcodeSupportedFormats(h.format)),debugData:this.createDebugData()}},n.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,s,c){e.set(t,s)}),e},n.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},n.prototype.createZXingFormats=function(e){for(var t=[],s=0,c=e;s<c.length;s++){var h=c[s];this.formatMap.has(h)?t.push(this.formatMap.get(h)):this.logger.logError("".concat(h," is not supported by")+"ZXingHtml5QrcodeShim")}return t},n.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},n})(),o9=function(n,e,t,s){function c(h){return h instanceof t?h:new t(function(p){p(h)})}return new(t||(t=Promise))(function(h,p){function T(C){try{E(s.next(C))}catch(I){p(I)}}function w(C){try{E(s.throw(C))}catch(I){p(I)}}function E(C){C.done?h(C.value):c(C.value).then(T,w)}E((s=s.apply(n,e||[])).next())})},l9=function(n,e){var t={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},s,c,h,p;return p={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function T(E){return function(C){return w([E,C])}}function w(E){if(s)throw new TypeError("Generator is already executing.");for(;p&&(p=0,E[0]&&(t=0)),t;)try{if(s=1,c&&(h=E[0]&2?c.return:E[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,E[1])).done)return h;switch(c=0,h&&(E=[E[0]&2,h.value]),E[0]){case 0:case 1:h=E;break;case 4:return t.label++,{value:E[1],done:!1};case 5:t.label++,c=E[1],E=[0];continue;case 7:E=t.ops.pop(),t.trys.pop();continue;default:if(h=t.trys,!(h=h.length>0&&h[h.length-1])&&(E[0]===6||E[0]===2)){t=0;continue}if(E[0]===3&&(!h||E[1]>h[0]&&E[1]<h[3])){t.label=E[1];break}if(E[0]===6&&t.label<h[1]){t.label=h[1],h=E;break}if(h&&t.label<h[2]){t.label=h[2],t.ops.push(E);break}h[2]&&t.ops.pop(),t.trys.pop();continue}E=e.call(n,t)}catch(C){E=[6,C],c=0}finally{s=h=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},qw=(function(){function n(e,t,s){if(this.formatMap=new Map([[We.QR_CODE,"qr_code"],[We.AZTEC,"aztec"],[We.CODABAR,"codabar"],[We.CODE_39,"code_39"],[We.CODE_93,"code_93"],[We.CODE_128,"code_128"],[We.DATA_MATRIX,"data_matrix"],[We.ITF,"itf"],[We.EAN_13,"ean_13"],[We.EAN_8,"ean_8"],[We.PDF_417,"pdf417"],[We.UPC_A,"upc_a"],[We.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!n.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=t,this.logger=s;var c=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(c),!this.detector)throw"BarcodeDetector detector not supported"}return n.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},n.prototype.decodeAsync=function(e){return o9(this,void 0,void 0,function(){var t,s;return l9(this,function(c){switch(c.label){case 0:return[4,this.detector.detect(e)];case 1:if(t=c.sent(),!t||t.length===0)throw"No barcode or QR code detected.";return s=this.selectLargestBarcode(t),[2,{text:s.rawValue,format:RT.create(this.toHtml5QrcodeSupportedFormats(s.format)),debugData:this.createDebugData()}]}})})},n.prototype.selectLargestBarcode=function(e){for(var t=null,s=0,c=0,h=e;c<h.length;c++){var p=h[c],T=p.boundingBox.width*p.boundingBox.height;T>s&&(s=T,t=p)}if(!t)throw"No largest barcode found";return t},n.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],s=0,c=e;s<c.length;s++){var h=c[s];this.formatMap.has(h)?t.push(this.formatMap.get(h)):this.logger.warn("".concat(h," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},n.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},n.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,s,c){e.set(t,s)}),e},n.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},n})(),Yw=function(n,e,t,s){function c(h){return h instanceof t?h:new t(function(p){p(h)})}return new(t||(t=Promise))(function(h,p){function T(C){try{E(s.next(C))}catch(I){p(I)}}function w(C){try{E(s.throw(C))}catch(I){p(I)}}function E(C){C.done?h(C.value):c(C.value).then(T,w)}E((s=s.apply(n,e||[])).next())})},Xw=function(n,e){var t={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},s,c,h,p;return p={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function T(E){return function(C){return w([E,C])}}function w(E){if(s)throw new TypeError("Generator is already executing.");for(;p&&(p=0,E[0]&&(t=0)),t;)try{if(s=1,c&&(h=E[0]&2?c.return:E[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,E[1])).done)return h;switch(c=0,h&&(E=[E[0]&2,h.value]),E[0]){case 0:case 1:h=E;break;case 4:return t.label++,{value:E[1],done:!1};case 5:t.label++,c=E[1],E=[0];continue;case 7:E=t.ops.pop(),t.trys.pop();continue;default:if(h=t.trys,!(h=h.length>0&&h[h.length-1])&&(E[0]===6||E[0]===2)){t=0;continue}if(E[0]===3&&(!h||E[1]>h[0]&&E[1]<h[3])){t.label=E[1];break}if(E[0]===6&&t.label<h[1]){t.label=h[1],h=E;break}if(h&&t.label<h[2]){t.label=h[2],t.ops.push(E);break}h[2]&&t.ops.pop(),t.trys.pop();continue}E=e.call(n,t)}catch(C){E=[6,C],c=0}finally{s=h=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},c9=(function(){function n(e,t,s,c){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=s,t&&qw.isSupported()?(this.primaryDecoder=new qw(e,s,c),this.secondaryDecoder=new Gw(e,s,c)):this.primaryDecoder=new Gw(e,s,c)}return n.prototype.decodeAsync=function(e){return Yw(this,void 0,void 0,function(){var t;return Xw(this,function(s){switch(s.label){case 0:t=performance.now(),s.label=1;case 1:return s.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,s.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},n.prototype.decodeRobustlyAsync=function(e){return Yw(this,void 0,void 0,function(){var t,s;return Xw(this,function(c){switch(c.label){case 0:t=performance.now(),c.label=1;case 1:return c.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,c.sent()];case 3:if(s=c.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw s;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},n.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},n.prototype.possiblyLogPerformance=function(e){if(this.verbose){var t=performance.now()-e;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},n.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,s=this.executionResults;t<s.length;t++){var c=s[t];e+=c}var h=e/this.executionResults.length;console.log("".concat(h," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},n})(),vp=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(s[h]=c[h])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function s(){this.constructor=e}e.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}})(),Ld=function(n,e,t,s){function c(h){return h instanceof t?h:new t(function(p){p(h)})}return new(t||(t=Promise))(function(h,p){function T(C){try{E(s.next(C))}catch(I){p(I)}}function w(C){try{E(s.throw(C))}catch(I){p(I)}}function E(C){C.done?h(C.value):c(C.value).then(T,w)}E((s=s.apply(n,e||[])).next())})},kd=function(n,e){var t={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},s,c,h,p;return p={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function T(E){return function(C){return w([E,C])}}function w(E){if(s)throw new TypeError("Generator is already executing.");for(;p&&(p=0,E[0]&&(t=0)),t;)try{if(s=1,c&&(h=E[0]&2?c.return:E[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,E[1])).done)return h;switch(c=0,h&&(E=[E[0]&2,h.value]),E[0]){case 0:case 1:h=E;break;case 4:return t.label++,{value:E[1],done:!1};case 5:t.label++,c=E[1],E=[0];continue;case 7:E=t.ops.pop(),t.trys.pop();continue;default:if(h=t.trys,!(h=h.length>0&&h[h.length-1])&&(E[0]===6||E[0]===2)){t=0;continue}if(E[0]===3&&(!h||E[1]>h[0]&&E[1]<h[3])){t.label=E[1];break}if(E[0]===6&&t.label<h[1]){t.label=h[1],h=E;break}if(h&&t.label<h[2]){t.label=h[2],t.ops.push(E);break}h[2]&&t.ops.pop(),t.trys.pop();continue}E=e.call(n,t)}catch(C){E=[6,C],c=0}finally{s=h=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},DT=(function(){function n(e,t){this.name=e,this.track=t}return n.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},n.prototype.apply=function(e){var t={};t[this.name]=e;var s={advanced:[t]};return this.track.applyConstraints(s)},n.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var t=e[this.name];return t}return null},n})(),u9=(function(n){vp(e,n);function e(t,s){return n.call(this,t,s)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(t){var s={};s[this.name]=t;var c={advanced:[s]};return this.track.applyConstraints(c)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var t=this.track.getCapabilities(),s=t[this.name];return{min:s.min,max:s.max,step:s.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e})(DT),h9=(function(n){vp(e,n);function e(t){return n.call(this,"zoom",t)||this}return e})(u9),f9=(function(n){vp(e,n);function e(t){return n.call(this,"torch",t)||this}return e})(DT),d9=(function(){function n(e){this.track=e}return n.prototype.zoomFeature=function(){return new h9(this.track)},n.prototype.torchFeature=function(){return new f9(this.track)},n})(),g9=(function(){function n(e,t,s){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=s,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return n.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width="".concat(e,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},n.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var s=e.surface.clientWidth,c=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(s,c),e.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},n.create=function(e,t,s,c){return Ld(this,void 0,void 0,function(){var h,p;return kd(this,function(T){switch(T.label){case 0:return h=new n(e,t,c),s.aspectRatio?(p={aspectRatio:s.aspectRatio},[4,h.getFirstTrackOrFail().applyConstraints(p)]):[3,2];case 1:T.sent(),T.label=2;case 2:return h.setupSurface(),[2,h]}})})},n.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},n.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},n.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},n.prototype.resume=function(e){this.failIfClosed();var t=this,s=function(){setTimeout(e,200),t.surface.removeEventListener("playing",s)};this.surface.addEventListener("playing",s),this.surface.play()},n.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},n.prototype.getSurface=function(){return this.failIfClosed(),this.surface},n.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},n.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},n.prototype.applyVideoConstraints=function(e){return Ld(this,void 0,void 0,function(){return kd(this,function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},n.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(t,s){var c=e.mediaStream.getVideoTracks(),h=c.length,p=0;e.mediaStream.getVideoTracks().forEach(function(T){e.mediaStream.removeTrack(T),T.stop(),++p,p>=h&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())})})},n.prototype.getCapabilities=function(){return new d9(this.getFirstTrackOrFail())},n})(),m9=(function(){function n(e){this.mediaStream=e}return n.prototype.render=function(e,t,s){return Ld(this,void 0,void 0,function(){return kd(this,function(c){return[2,g9.create(e,this.mediaStream,t,s)]})})},n.create=function(e){return Ld(this,void 0,void 0,function(){var t,s;return kd(this,function(c){switch(c.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return t={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(t)];case 1:return s=c.sent(),[2,new n(s)]}})})},n})(),Ww=function(n,e,t,s){function c(h){return h instanceof t?h:new t(function(p){p(h)})}return new(t||(t=Promise))(function(h,p){function T(C){try{E(s.next(C))}catch(I){p(I)}}function w(C){try{E(s.throw(C))}catch(I){p(I)}}function E(C){C.done?h(C.value):c(C.value).then(T,w)}E((s=s.apply(n,e||[])).next())})},Kw=function(n,e){var t={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},s,c,h,p;return p={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function T(E){return function(C){return w([E,C])}}function w(E){if(s)throw new TypeError("Generator is already executing.");for(;p&&(p=0,E[0]&&(t=0)),t;)try{if(s=1,c&&(h=E[0]&2?c.return:E[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,E[1])).done)return h;switch(c=0,h&&(E=[E[0]&2,h.value]),E[0]){case 0:case 1:h=E;break;case 4:return t.label++,{value:E[1],done:!1};case 5:t.label++,c=E[1],E=[0];continue;case 7:E=t.ops.pop(),t.trys.pop();continue;default:if(h=t.trys,!(h=h.length>0&&h[h.length-1])&&(E[0]===6||E[0]===2)){t=0;continue}if(E[0]===3&&(!h||E[1]>h[0]&&E[1]<h[3])){t.label=E[1];break}if(E[0]===6&&t.label<h[1]){t.label=h[1],h=E;break}if(h&&t.label<h[2]){t.label=h[2],t.ops.push(E);break}h[2]&&t.ops.pop(),t.trys.pop();continue}E=e.call(n,t)}catch(C){E=[6,C],c=0}finally{s=h=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},p9=(function(){function n(){}return n.failIfNotSupported=function(){return Ww(this,void 0,void 0,function(){return Kw(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new n]})})},n.prototype.create=function(e){return Ww(this,void 0,void 0,function(){return Kw(this,function(t){return[2,m9.create(e)]})})},n})(),x9=function(n,e,t,s){function c(h){return h instanceof t?h:new t(function(p){p(h)})}return new(t||(t=Promise))(function(h,p){function T(C){try{E(s.next(C))}catch(I){p(I)}}function w(C){try{E(s.throw(C))}catch(I){p(I)}}function E(C){C.done?h(C.value):c(C.value).then(T,w)}E((s=s.apply(n,e||[])).next())})},y9=function(n,e){var t={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},s,c,h,p;return p={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function T(E){return function(C){return w([E,C])}}function w(E){if(s)throw new TypeError("Generator is already executing.");for(;p&&(p=0,E[0]&&(t=0)),t;)try{if(s=1,c&&(h=E[0]&2?c.return:E[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,E[1])).done)return h;switch(c=0,h&&(E=[E[0]&2,h.value]),E[0]){case 0:case 1:h=E;break;case 4:return t.label++,{value:E[1],done:!1};case 5:t.label++,c=E[1],E=[0];continue;case 7:E=t.ops.pop(),t.trys.pop();continue;default:if(h=t.trys,!(h=h.length>0&&h[h.length-1])&&(E[0]===6||E[0]===2)){t=0;continue}if(E[0]===3&&(!h||E[1]>h[0]&&E[1]<h[3])){t.label=E[1];break}if(E[0]===6&&t.label<h[1]){t.label=h[1],h=E;break}if(h&&t.label<h[2]){t.label=h[2],t.ops.push(E);break}h[2]&&t.ops.pop(),t.trys.pop();continue}E=e.call(n,t)}catch(C){E=[6,C],c=0}finally{s=h=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},E9=(function(){function n(){}return n.retrieve=function(){if(navigator.mediaDevices)return n.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?n.getCamerasFromMediaStreamTrack():n.rejectWithError()},n.rejectWithError=function(){var e=Ec.unableToQuerySupportedDevices();return n.isHttpsOrLocalhost()||(e=Ec.insecureContextCameraQueryError()),Promise.reject(e)},n.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},n.getCamerasFromMediaDevices=function(){return x9(this,void 0,void 0,function(){var e,t,s,c,h,p,T;return y9(this,function(w){switch(w.label){case 0:return e=function(E){for(var C=E.getVideoTracks(),I=0,M=C;I<M.length;I++){var B=M[I];B.enabled=!1,B.stop(),E.removeTrack(B)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=w.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(s=w.sent(),c=[],h=0,p=s;h<p.length;h++)T=p[h],T.kind==="videoinput"&&c.push({id:T.deviceId,label:T.label});return e(t),[2,c]}})})},n.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,t){var s=function(h){for(var p=[],T=0,w=h;T<w.length;T++){var E=w[T];E.kind==="video"&&p.push({id:E.id,label:E.label})}e(p)},c=MediaStreamTrack;c.getSources(s)})},n})(),rr;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.NOT_STARTED=1]="NOT_STARTED",n[n.SCANNING=2]="SCANNING",n[n.PAUSED=3]="PAUSED"})(rr||(rr={}));var _9=(function(){function n(){this.state=rr.NOT_STARTED,this.onGoingTransactionNewState=rr.UNKNOWN}return n.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},n.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},n.prototype.execute=function(){if(this.onGoingTransactionNewState===rr.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=rr.UNKNOWN,this.directTransition(e)},n.prototype.cancel=function(){if(this.onGoingTransactionNewState===rr.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=rr.UNKNOWN},n.prototype.getState=function(){return this.state},n.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==rr.UNKNOWN)throw"Cannot transition to a new state, already under transition"},n.prototype.validateTransition=function(e){switch(this.state){case rr.UNKNOWN:throw"Transition from unknown is not allowed";case rr.NOT_STARTED:this.failIfNewStateIs(e,[rr.PAUSED]);break;case rr.SCANNING:break;case rr.PAUSED:break}},n.prototype.failIfNewStateIs=function(e,t){for(var s=0,c=t;s<c.length;s++){var h=c[s];if(e===h)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},n})(),w9=(function(){function n(e){this.stateManager=e}return n.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},n.prototype.directTransition=function(e){this.stateManager.directTransition(e)},n.prototype.getState=function(){return this.stateManager.getState()},n.prototype.canScanFile=function(){return this.stateManager.getState()===rr.NOT_STARTED},n.prototype.isScanning=function(){return this.stateManager.getState()!==rr.NOT_STARTED},n.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===rr.SCANNING},n.prototype.isPaused=function(){return this.stateManager.getState()===rr.PAUSED},n})(),b9=(function(){function n(){}return n.create=function(){return new w9(new _9)},n})(),A9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(s[h]=c[h])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function s(){this.constructor=e}e.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}})(),Qi=(function(n){A9(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e})(e9),v9=(function(){function n(e,t){this.logger=t,this.fps=Qi.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Qi.DEFAULT_DISABLE_FLIP}return n.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?OT.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},n.prototype.isShadedBoxEnabled=function(){return!Pa(this.qrbox)},n.create=function(e,t){return new n(e,t)},n})(),T9=(function(){function n(e,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var s;typeof t=="boolean"?this.verbose=t===!0:t&&(s=t,this.verbose=s.verbose===!0,s.experimentalFeatures),this.logger=new n9(this.verbose),this.qrcode=new c9(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(s),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=b9.create()}return n.prototype.start=function(e,t,s,c){var h=this;if(!e)throw"cameraIdOrConfig is required";if(!s||typeof s!="function")throw"qrCodeSuccessCallback is required and should be a function.";var p;c?p=c:p=this.verbose?this.logger.log:function(){};var T=v9.create(t,this.logger);this.clearElement();var w=!1;T.videoConstraints&&(T.isMediaStreamConstraintsValid()?w=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var E=w,C=document.getElementById(this.elementId);C.clientWidth?C.clientWidth:Qi.DEFAULT_WIDTH,C.style.position="relative",this.shouldScan=!0,this.element=C;var I=this,M=this.stateManagerProxy.startTransition(rr.SCANNING);return new Promise(function(B,W){var Q=E?T.videoConstraints:I.createVideoConstraints(e);if(!Q){M.cancel(),W("videoConstraints should be defined");return}var Y={};(!E||T.aspectRatio)&&(Y.aspectRatio=T.aspectRatio);var _e={onRenderSurfaceReady:function(ae,K){I.setupUi(ae,K,T),I.isScanning=!0,I.foreverScan(T,s,p)}};p9.failIfNotSupported().then(function(ae){ae.create(Q).then(function(K){return K.render(h.element,Y,_e).then(function(ce){I.renderedCamera=ce,M.execute(),B(null)}).catch(function(ce){M.cancel(),W(ce)})}).catch(function(K){M.cancel(),W(Ec.errorGettingUserMedia(K))})}).catch(function(ae){M.cancel(),W(Ec.cameraStreamingNotSupported())})})},n.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(rr.PAUSED),this.showPausedState(),(Pa(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},n.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,t=function(){e.stateManagerProxy.directTransition(rr.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){t();return}this.renderedCamera.resume(function(){t()})},n.prototype.getState=function(){return this.stateManagerProxy.getState()},n.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(rr.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var s=function(){if(e.element){var h=document.getElementById(Qi.SHADED_REGION_ELEMENT_ID);h&&e.element.removeChild(h)}},c=this;return this.renderedCamera.close().then(function(){return c.renderedCamera=null,c.element&&(c.element.removeChild(c.canvasElement),c.canvasElement=null),s(),c.qrRegion&&(c.qrRegion=null),c.context&&(c.context=null),t.execute(),c.hidePausedState(),c.isScanning=!1,Promise.resolve()})},n.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then(function(s){return s.decodedText})},n.prototype.scanFileV2=function(e,t){var s=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Pa(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(c,h){s.possiblyCloseLastScanImageFile(),s.clearElement(),s.lastScanImageFile=URL.createObjectURL(e);var p=new Image;p.onload=function(){var T=p.width,w=p.height,E=document.getElementById(s.elementId),C=E.clientWidth?E.clientWidth:Qi.DEFAULT_WIDTH,I=Math.max(E.clientHeight?E.clientHeight:w,Qi.FILE_SCAN_MIN_HEIGHT),M=s.computeCanvasDrawConfig(T,w,C,I);if(t){var B=s.createCanvasElement(C,I,"qr-canvas-visible");B.style.display="inline-block",E.appendChild(B);var W=B.getContext("2d");if(!W)throw"Unable to get 2d context from canvas";W.canvas.width=C,W.canvas.height=I,W.drawImage(p,0,0,T,w,M.x,M.y,M.width,M.height)}var Q=Qi.FILE_SCAN_HIDDEN_CANVAS_PADDING,Y=Math.max(p.width,M.width),_e=Math.max(p.height,M.height),ae=Y+2*Q,K=_e+2*Q,ce=s.createCanvasElement(ae,K);E.appendChild(ce);var Re=ce.getContext("2d");if(!Re)throw"Unable to get 2d context from canvas";Re.canvas.width=ae,Re.canvas.height=K,Re.drawImage(p,0,0,T,w,Q,Q,Y,_e);try{s.qrcode.decodeRobustlyAsync(ce).then(function(De){c(zw.createFromQrcodeResult(De))}).catch(h)}catch(De){h("QR code parse error, error = ".concat(De))}},p.onerror=h,p.onabort=h,p.onstalled=h,p.onsuspend=h,p.src=URL.createObjectURL(e)})},n.prototype.clear=function(){this.clearElement()},n.getCameras=function(){return E9.retrieve()},n.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},n.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},n.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},n.prototype.applyVideoConstraints=function(e){if(e){if(!OT.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},n.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},n.prototype.getSupportedFormats=function(e){var t=[We.QR_CODE,We.AZTEC,We.CODABAR,We.CODE_39,We.CODE_93,We.CODE_128,We.DATA_MATRIX,We.MAXICODE,We.ITF,We.EAN_13,We.EAN_8,We.PDF_417,We.RSS_14,We.RSS_EXPANDED,We.UPC_A,We.UPC_E,We.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var s=[],c=0,h=e.formatsToSupport;c<h.length;c++){var p=h[c];$M(p)?s.push(p):this.logger.warn("Invalid format: ".concat(p," passed in config, ignoring."))}if(s.length===0)throw"None of formatsToSupport match supported values.";return s},n.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Pa(e))return!0;if(!Pa(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(Pa(e.experimentalFeatures))return!0;var t=e.experimentalFeatures;return Pa(t.useBarCodeDetectorIfSupported)?!0:t.useBarCodeDetectorIfSupported!==!1},n.prototype.validateQrboxSize=function(e,t,s){var c=this,h=s.qrbox;this.validateQrboxConfig(h);var p=this.toQrdimensions(e,t,h),T=function(E){if(E<Qi.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Qi.MIN_QR_BOX_SIZE,"px.")},w=function(E){return E>e&&(c.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),E=e),E};T(p.width),T(p.height),p.width=w(p.width)},n.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},n.prototype.toQrdimensions=function(e,t,s){if(typeof s=="number")return{width:s,height:s};if(typeof s=="function")try{return s(e,t)}catch(c){throw new Error("qrbox config was passed as a function but it failed with unknown error"+c)}return s},n.prototype.setupUi=function(e,t,s){s.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,s);var c=Pa(s.qrbox)?{width:e,height:t}:s.qrbox;this.validateQrboxConfig(c);var h=this.toQrdimensions(e,t,c);h.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var p=s.isShadedBoxEnabled()&&h.height<=t,T={x:0,y:0,width:e,height:t},w=p?this.getShadedRegionBounds(e,t,h):T,E=this.createCanvasElement(w.width,w.height),C={willReadFrequently:!0},I=E.getContext("2d",C);I.canvas.width=w.width,I.canvas.height=w.height,this.element.append(E),p&&this.possiblyInsertShadingElement(this.element,e,t,h),this.createScannerPausedUiElement(this.element),this.qrRegion=w,this.context=I,this.canvasElement=E},n.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText=Ec.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},n.prototype.scanContext=function(e,t){var s=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(c){return e(c.text,zw.createFromQrcodeResult(c)),s.possiblyUpdateShaders(!0),!0}).catch(function(c){s.possiblyUpdateShaders(!1);var h=Ec.codeParseError(c);return t(h,t9.createFrom(h)),!1})},n.prototype.foreverScan=function(e,t,s){var c=this;if(this.shouldScan&&this.renderedCamera){var h=this.renderedCamera.getSurface(),p=h.videoWidth/h.clientWidth,T=h.videoHeight/h.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var w=this.qrRegion.width*p,E=this.qrRegion.height*T,C=this.qrRegion.x*p,I=this.qrRegion.y*T;this.context.drawImage(h,C,I,w,E,0,0,this.qrRegion.width,this.qrRegion.height);var M=function(){c.foreverScanTimeout=setTimeout(function(){c.foreverScan(e,t,s)},c.getTimeoutFps(e.fps))};this.scanContext(t,s).then(function(B){!B&&e.disableFlip!==!0?(c.context.translate(c.context.canvas.width,0),c.context.scale(-1,1),c.scanContext(t,s).finally(function(){M()})):M()}).catch(function(B){c.logger.logError("Error happend while scanning context",B),M()})}},n.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var t="facingMode",s="deviceId",c={user:!0,environment:!0},h="exact",p=function(W){if(W in c)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(W,"'")},T=Object.keys(e);if(T.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(T.length," keys");var w=Object.keys(e)[0];if(w!==t&&w!==s)throw"Only '".concat(t,"' and '").concat(s,"' ")+" are supported for 'cameraIdOrConfig'";if(w===t){var E=e.facingMode;if(typeof E=="string"){if(p(E))return{facingMode:E}}else if(typeof E=="object")if(h in E){if(p(E["".concat(h)]))return{facingMode:{exact:E["".concat(h)]}}}else throw"'facingMode' should be string or object with"+" ".concat(h," as key.");else{var C=typeof E;throw"Invalid type of 'facingMode' = ".concat(C)}}else{var I=e.deviceId;if(typeof I=="string")return{deviceId:I};if(typeof I=="object"){if(h in I)return{deviceId:{exact:I["".concat(h)]}};throw"'deviceId' should be string or object with"+" ".concat(h," as key.")}else{var M=typeof I;throw"Invalid type of 'deviceId' = ".concat(M)}}}var B=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(B)},n.prototype.computeCanvasDrawConfig=function(e,t,s,c){if(e<=s&&t<=c){var h=(s-e)/2,p=(c-t)/2;return{x:h,y:p,width:e,height:t}}else{var T=e,w=t;return e>s&&(t=s/e*t,e=s),t>c&&(e=c/t*e,t=c),this.logger.log("Image downsampled from "+"".concat(T,"X").concat(w)+" to ".concat(e,"X").concat(t,".")),this.computeCanvasDrawConfig(e,t,s,c)}},n.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},n.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=e?Qi.BORDER_SHADER_MATCH_COLOR:Qi.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},n.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},n.prototype.createCanvasElement=function(e,t,s){var c=e,h=t,p=document.createElement("canvas");return p.style.width="".concat(c,"px"),p.style.height="".concat(h,"px"),p.style.display="none",p.id=Pa(s)?"qr-canvas":s,p},n.prototype.getShadedRegionBounds=function(e,t,s){if(s.width>e||s.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-s.width)/2,y:(t-s.height)/2,width:s.width,height:s.height}},n.prototype.possiblyInsertShadingElement=function(e,t,s,c){if(!(t-c.width<1||s-c.height<1)){var h=document.createElement("div");h.style.position="absolute";var p=(t-c.width)/2,T=(s-c.height)/2;if(h.style.borderLeft="".concat(p,"px solid rgba(0, 0, 0, 0.48)"),h.style.borderRight="".concat(p,"px solid rgba(0, 0, 0, 0.48)"),h.style.borderTop="".concat(T,"px solid rgba(0, 0, 0, 0.48)"),h.style.borderBottom="".concat(T,"px solid rgba(0, 0, 0, 0.48)"),h.style.boxSizing="border-box",h.style.top="0px",h.style.bottom="0px",h.style.left="0px",h.style.right="0px",h.id="".concat(Qi.SHADED_REGION_ELEMENT_ID),t-c.width<11||s-c.height<11)this.hasBorderShaders=!1;else{var w=5,E=40;this.insertShaderBorders(h,E,w,-w,null,0,!0),this.insertShaderBorders(h,E,w,-w,null,0,!1),this.insertShaderBorders(h,E,w,null,-w,0,!0),this.insertShaderBorders(h,E,w,null,-w,0,!1),this.insertShaderBorders(h,w,E+w,-w,null,-w,!0),this.insertShaderBorders(h,w,E+w,null,-w,-w,!0),this.insertShaderBorders(h,w,E+w,-w,null,-w,!1),this.insertShaderBorders(h,w,E+w,null,-w,-w,!1),this.hasBorderShaders=!0}e.append(h)}},n.prototype.insertShaderBorders=function(e,t,s,c,h,p,T){var w=document.createElement("div");w.style.position="absolute",w.style.backgroundColor=Qi.BORDER_SHADER_DEFAULT_COLOR,w.style.width="".concat(t,"px"),w.style.height="".concat(s,"px"),c!==null&&(w.style.top="".concat(c,"px")),h!==null&&(w.style.bottom="".concat(h,"px")),T?w.style.left="".concat(p,"px"):w.style.right="".concat(p,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(w),e.appendChild(w)},n.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},n.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},n.prototype.getTimeoutFps=function(e){return 1e3/e},n})(),Qw;(function(n){n[n.STATUS_DEFAULT=0]="STATUS_DEFAULT",n[n.STATUS_SUCCESS=1]="STATUS_SUCCESS",n[n.STATUS_WARNING=2]="STATUS_WARNING",n[n.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Qw||(Qw={}));const S9=({onRefresh:n})=>{var Rr;const{showAlert:e}=Bc(),[t,s]=ne.useState("roster"),[c,h]=ne.useState(!1),[p,T]=ne.useState(!1),[w,E]=ne.useState([]),[C,I]=ne.useState([]),[M,B]=ne.useState([]),[W,Q]=ne.useState([]),[Y,_e]=ne.useState([]),[ae,K]=ne.useState([]),[ce,Re]=ne.useState([]),[De,F]=ne.useState([]),[V,j]=ne.useState(""),[Z,J]=ne.useState(new Date().toISOString().substring(0,7)),[$,G]=ne.useState(""),[Qe,fe]=ne.useState([]),[pe,ve]=ne.useState([]),[Xe,dt]=ne.useState([]),[gt,ie]=ne.useState(null),[be,je]=ne.useState("desktop"),[Fe,$e]=ne.useState(!1),[Be,Ct]=ne.useState(""),[mt,Qt]=ne.useState(null),$r=ir.useRef(w);ir.useEffect(()=>{$r.current=w},[w]);const[Mn,Ai]=ne.useState(""),[bt,gr]=ne.useState(""),[Sr,ei]=ne.useState("normal"),[An,Zt]=ne.useState(""),[et,pn]=ne.useState(!1),[ze,is]=ne.useState(""),[ss,xn]=ne.useState("100"),[ti,mr]=ne.useState(""),[as,pr]=ne.useState(""),[Pn,Ls]=ne.useState(!1),[vi,ia]=ne.useState(""),[kt,Le]=ne.useState(""),[zt,ot]=ne.useState(""),[Jt,ni]=ne.useState(""),[As,ri]=ne.useState(""),[At,ln]=ne.useState(""),[ii,Fr]=ne.useState(!1),[Nn,ks]=ne.useState(null),[Fn,sr]=ne.useState(""),[zr,Lr]=ne.useState(""),[si,xr]=ne.useState("center"),[Bi,Rn]=ne.useState("h-48"),[ar,or]=ne.useState("md:h-72"),[He,Jn]=ne.useState(!1),[Dt,Bt]=ne.useState(null),[lr,Ti]=ne.useState(""),[vs,Hr]=ne.useState(!1);ne.useEffect(()=>{const X=JD(vn=>{I(vn.filter(Tn=>Tn.role===ea.STUDENT&&Tn.isApproved)),B(vn.filter(Tn=>Tn.role===ea.STUDENT&&!Tn.isApproved));const Ts=vn.filter(Tn=>Tn.role===ea.STUDENT&&Tn.isApproved);Ts.length>0&&!ze&&is(Ts[0].id)}),Me=Zv(E),Pe=Kv(Q),tt=Wv(_e),le=XD(K),H=Qv(Re),qe=Xv(F),Ln=Yv(vn=>{fe(vn),vn.length>0&&!Jt&&ni(vn[0].name)}),Xn=wp(vn=>{ve(vn),dt(vn)});return()=>{X(),Me(),Pe(),tt(),le(),H(),qe(),Ln(),Xn()}},[ze,Jt]),ne.useEffect(()=>{let X=null;return(async()=>{if(t==="scan")try{X=new T9("reader"),await X.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250},aspectRatio:1},Pe=>{Pe&&Qa(Pe)},()=>{})}catch(Pe){console.error("Unable to start scanner",Pe)}})(),()=>{X&&X.isScanning&&X.stop().then(()=>{X==null||X.clear()}).catch(Pe=>console.error("Failed to stop scanner",Pe))}},[t]);const Qa=X=>{if(mt)return;const Me=$r.current.find(Pe=>Pe.qrCodeData===X&&Pe.status==="pending");Me&&Qt(Me)},Si=async X=>{const Me=Be;if(!Me){e("","error");return}h(!0),setTimeout(()=>{const Pe=w.find(tt=>tt.qrCodeData===Me&&tt.status==="pending");Pe?(Qt(Pe),Ct("")):e("","error"),h(!1)},800)},yr=async X=>{mt&&(await DD(X,"completed"),Qt(null),e("","success"))},yn=async()=>{if(p)return;const X=parseInt(ss);if(!(isNaN(X)||!ze)){T(!0);try{console.log(`[Points] Issuing ${X} to ${ze}...`),await ID(ze,X),xn("");const Me=C.find(Pe=>Pe.id===ze);e(` ${(Me==null?void 0:Me.name)||""} ${X} `,"success")}catch(Me){console.error("[Points] Error:",Me),e(`: ${Me.message}`,"error")}finally{T(!1)}}},Nt=X=>new Promise((Me,Pe)=>{const tt=new FileReader;tt.onload=()=>Me(tt.result),tt.onerror=Pe,tt.readAsDataURL(X)}),kr=async X=>{var Pe;const Me=(Pe=X.target.files)==null?void 0:Pe[0];if(Me){if(Me.size>500*1024){e(" 500KB ","error");return}try{const tt=await Nt(Me);ri(tt),ks(tt)}catch{e("","error")}}},cr=async X=>{var Pe;const Me=(Pe=X.target.files)==null?void 0:Pe[0];if(Me){if(Me.size>500*1024){e(" 500KB ","error");return}try{const tt=await Nt(Me);sr(tt),Bt(tt)}catch{e("","error")}}},On=async(X,Me)=>{const Pe={...X,grade:Me};await nm(Pe),e(` ${X.name}  ${Me}`,"success")},Ce=async(X,Me,Pe)=>{const tt=parseInt(Pe);if(isNaN(tt))return;const le={...X,[Me]:tt};await nm(le)},sa=async X=>{await CD(X),e("","success")},Ht=async X=>{confirm("/")&&await ND(X)},Cr=async X=>{if(X.preventDefault(),!vi||!kt||!zt){e("","error");return}if(vi&&kt){const Me={id:`prod_${Date.now()}`,name:vi,category:Jt,price:parseInt(kt),description:At||`${Jt==="food"?"":Jt==="electronic"?"":Jt==="ticket"?"":""}`,imageUrl:As||"https://images.unsplash.com/photo-1553456558-aff63285bdd1?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3",stock:parseInt(zt)||99};await zD(Me),Fr(!1),ia(""),Le(""),ot(""),ri(""),ks(null),ni("other"),ln(""),e("","success")}},aa=async X=>{window.confirm("")&&await GD(X)},Pt=async X=>{if(X.preventDefault(),!Mn||!bt){e("","error");return}const Me={id:`m_${Date.now()}`,title:Mn,description:"",points:parseInt(bt),type:Sr,isActive:!0,maxAttempts:1,deadline:An?new Date(An).getTime():void 0};await LD(Me),pn(!1),Ai(""),gr(""),ei("normal"),Zt(""),e("","success")},Mt=async X=>{if(window.confirm(""))try{await QD(X),e("","success")}catch(Me){e(`: ${Me.message}`,"error")}},vt=async()=>{if(!as){e("","error");return}await qD({id:`r_${Date.now()}`,title:as}),pr(""),Ls(!1),e("","success")},os=async X=>{await YD(X)},Ir=async X=>{await kD(X)},Dn=async(X,Me)=>{await HD(X,Me),e("","success")},Rt=async X=>{try{await jD(X),e("","success")}catch(Me){e(`: ${Me.message||""}`,"error")}},Nr=async X=>{confirm("")&&await FD(X)},oa=w.filter(X=>{var H,qe;const Me=(((H=X.productName)==null?void 0:H.toLowerCase())||"").includes(V.toLowerCase())||(((qe=X.id)==null?void 0:qe.toLowerCase())||"").includes(V.toLowerCase()),Pe=new Date(X.timestamp),le=`${Pe.getFullYear()}-${String(Pe.getMonth()+1).padStart(2,"0")}`===Z;return Me&&le}),st=X=>Vo.reduce((Me,Pe)=>X>=Pe.threshold?Pe:Me,Vo[0]);return A.jsxs("div",{className:"space-y-8 pb-20 animate-in fade-in duration-500",children:[A.jsx("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:A.jsxs("div",{children:[A.jsxs("h1",{className:"text-4xl font-black text-slate-800 flex items-center gap-4",children:[A.jsx("div",{className:"bg-indigo-600 p-3 rounded-2xl text-white shadow-xl shadow-indigo-100",children:A.jsx(sd,{size:32})}),""]}),A.jsx("p",{className:"text-slate-500 mt-2 italic font-medium",children:""})]})}),A.jsxs("div",{className:"flex bg-white p-2 rounded-3xl border border-slate-100 shadow-md overflow-x-auto gap-2",children:[A.jsxs("button",{onClick:()=>s("roster"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${t==="roster"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[A.jsx(uN,{size:18})," ",A.jsx("span",{children:""})]}),A.jsxs("button",{onClick:()=>s("approval"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${t==="approval"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50 relative"}`,children:[A.jsx(Ng,{size:18})," ",A.jsx("span",{children:""}),M.length>0&&A.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full text-white text-[10px] flex items-center justify-center border-2 border-white",children:M.length})]}),A.jsxs("button",{onClick:()=>s("points"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${t==="points"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[A.jsx(c3,{size:18})," ",A.jsx("span",{children:""})]}),A.jsxs("button",{onClick:()=>s("products"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${t==="products"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[A.jsx(Cg,{size:18})," ",A.jsx("span",{children:""})]}),A.jsxs("button",{onClick:()=>s("banners"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${t==="banners"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[A.jsx(Yy,{size:18})," ",A.jsx("span",{children:""})]}),A.jsxs("button",{onClick:()=>s("mission_approval"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${t==="mission_approval"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50 relative"}`,children:[A.jsx(Zu,{size:18})," ",A.jsx("span",{children:""}),De.filter(X=>X.status==="pending").length>0&&A.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-pink-500 rounded-full text-white text-[10px] flex items-center justify-center border-2 border-white",children:De.filter(X=>X.status==="pending").length})]}),A.jsxs("button",{onClick:()=>s("scan"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${t==="scan"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[A.jsx(Tg,{size:18})," ",A.jsx("span",{children:""})]}),A.jsxs("button",{onClick:()=>s("history"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${t==="history"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[A.jsx(id,{size:18})," ",A.jsx("span",{children:""})]}),A.jsxs("button",{onClick:()=>s("missions"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${t==="missions"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[A.jsx(ju,{size:18})," ",A.jsx("span",{children:""})]}),A.jsxs("button",{onClick:()=>s("wishes"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${t==="wishes"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50 relative"}`,children:[A.jsx(qf,{size:18})," ",A.jsx("span",{children:""}),ce.length>0&&A.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-pink-500 rounded-full text-white text-[10px] flex items-center justify-center border-2 border-white",children:ce.length})]})]}),t==="roster"&&A.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 animate-in slide-in-from-bottom-4",children:C.map(X=>{const Me=st(X.totalEarned);return A.jsxs("div",{className:"bg-white rounded-[2.5rem] p-8 border border-slate-100 shadow-sm hover:shadow-xl transition-all group overflow-hidden relative",children:[A.jsx("div",{className:`absolute top-0 right-0 w-24 h-24 ${Me.color} opacity-5 -translate-y-12 translate-x-12 rounded-full`}),A.jsxs("div",{className:"flex flex-col items-center text-center",children:[A.jsxs("div",{className:"relative mb-6",children:[A.jsx("div",{className:`absolute inset-0 rounded-full blur-xl opacity-20 ${Me.color}`}),A.jsx("img",{src:X.avatar,className:"w-24 h-24 rounded-full border-4 border-white shadow-2xl relative z-10 object-cover",alt:X.name}),A.jsx("div",{className:"absolute -bottom-2 -right-2 w-10 h-10 rounded-2xl bg-white shadow-lg flex items-center justify-center text-xl z-20 border border-slate-50",children:Me.icon})]}),A.jsx("h3",{className:"text-2xl font-black text-slate-800 mb-1",children:X.name}),A.jsx("div",{className:`px-4 py-1 rounded-full text-[10px] font-black text-white uppercase tracking-widest mb-2 ${Me.color} shadow-sm`,children:Me.name}),A.jsx("div",{className:"mb-6",children:A.jsx("select",{value:X.grade||"",onChange:Pe=>On(X,Pe.target.value),className:"text-xs font-bold text-slate-500 bg-slate-50 border border-slate-100 rounded-lg px-2 py-1 outline-none pointer-events-auto",children:tm.map(Pe=>A.jsx("option",{value:Pe,children:Pe},Pe))})}),A.jsxs("div",{className:"w-full grid grid-cols-2 gap-4",children:[A.jsxs("div",{className:"bg-indigo-50/50 p-4 rounded-2xl border border-indigo-50",children:[A.jsx("p",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest mb-1",children:""}),A.jsx("input",{type:"number",defaultValue:X.points,onBlur:Pe=>Ce(X,"points",Pe.target.value),className:"w-full bg-transparent text-xl font-black text-indigo-600 focus:outline-none"})]}),A.jsxs("div",{className:"bg-amber-50/50 p-4 rounded-2xl border border-amber-50",children:[A.jsx("p",{className:"text-[10px] font-black text-amber-400 uppercase tracking-widest mb-1",children:""}),A.jsx("input",{type:"number",defaultValue:X.totalEarned,onBlur:Pe=>Ce(X,"totalEarned",Pe.target.value),className:"w-full bg-transparent text-xl font-black text-amber-600 focus:outline-none"})]})]})]}),A.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-50 flex justify-between items-center gap-4",children:[A.jsxs("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-tighter truncate max-w-[80px]",children:["ID: ",X.id.replace("user_","")]}),A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsxs("button",{onClick:()=>{is(X.id),s("points")},className:"text-indigo-600 font-black text-xs hover:underline flex items-center gap-1",children:[A.jsx(qy,{size:14})," "]}),A.jsx("button",{onClick:()=>Ht(X.id),className:"text-slate-300 hover:text-rose-500 transition-colors",title:"",children:A.jsx(Ou,{size:16})})]})]})]},X.id)})}),t==="points"&&A.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[A.jsxs("div",{className:"flex items-center gap-6 mb-12",children:[A.jsx("div",{className:"w-20 h-20 bg-emerald-50 text-emerald-600 rounded-3xl flex items-center justify-center shadow-inner",children:A.jsx(qy,{size:40})}),A.jsxs("div",{children:[A.jsx("h2",{className:"text-3xl font-black text-slate-800 tracking-tight",children:""}),A.jsx("p",{className:"text-slate-400 font-medium",children:""})]})]}),A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16",children:[A.jsxs("div",{className:"space-y-8",children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("span",{className:"text-[10px] font-bold text-slate-400",children:":"}),A.jsxs("select",{value:$,onChange:X=>G(X.target.value),className:"text-[10px] font-bold text-slate-600 bg-slate-50 border border-slate-200 rounded-lg px-2 py-1 outline-none",children:[A.jsx("option",{value:"",children:""}),tm.map(X=>A.jsx("option",{value:X,children:X},X))]})]})]}),A.jsx("div",{className:"grid grid-cols-3 gap-4 max-h-[400px] overflow-y-auto p-2",children:C.filter(X=>$===""||X.grade===$).map(X=>A.jsxs("button",{onClick:()=>is(X.id),className:`flex flex-col items-center gap-3 p-4 rounded-3xl border-2 transition-all ${ze===X.id?"border-indigo-600 bg-indigo-50 shadow-lg shadow-indigo-100":"border-slate-50 bg-slate-50/50 hover:bg-white hover:border-slate-200"}`,children:[A.jsx("img",{src:X.avatar,className:"w-12 h-12 rounded-full shadow-sm",alt:X.name}),A.jsx("span",{className:`font-black text-sm ${ze===X.id?"text-indigo-600":"text-slate-600"}`,children:X.name})]},X.id))})]}),A.jsxs("div",{children:[A.jsxs("div",{className:"flex items-center justify-between mb-4",children:[A.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),A.jsxs("button",{onClick:()=>Ls(!Pn),className:"text-xs font-black text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:[Pn?A.jsx(ka,{size:14}):A.jsx(cc,{size:14}),Pn?"":""]})]}),Pn?A.jsxs("div",{className:"bg-slate-50 p-6 rounded-2xl border-2 border-indigo-100 mb-4 animate-in zoom-in-95 duration-200",children:[A.jsxs("div",{className:"flex gap-2",children:[A.jsx("input",{type:"text",placeholder:" (: )",value:as,onChange:X=>pr(X.target.value),className:"flex-1 p-3 border-2 border-slate-200 rounded-xl focus:border-indigo-600 outline-none font-bold"}),A.jsx("button",{onClick:vt,className:"bg-indigo-600 text-white p-3 rounded-xl hover:bg-indigo-700 shadow-md",children:A.jsx(cc,{size:20})})]}),A.jsx("div",{className:"mt-4 space-y-2 max-h-40 overflow-y-auto pr-2",children:ae.map(X=>A.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg border border-slate-100",children:[A.jsx("span",{className:"font-bold text-sm text-slate-700",children:X.title}),A.jsx("button",{onClick:()=>os(X.id),className:"text-rose-500 hover:text-rose-600",children:A.jsx(Ou,{size:16})})]},X.id))})]}):A.jsxs("select",{value:ti,onChange:X=>mr(X.target.value),className:"w-full p-5 bg-slate-50 border-2 border-transparent rounded-2xl focus:bg-white focus:border-indigo-600 focus:ring-4 focus:ring-indigo-100 transition-all outline-none font-bold text-slate-700 shadow-inner",children:[A.jsx("option",{value:"",children:"..."}),ae.length>0?ae.map(X=>A.jsx("option",{value:X.title,children:X.title},X.id)):A.jsxs(A.Fragment,{children:[A.jsx("option",{children:""}),A.jsx("option",{children:""}),A.jsx("option",{children:" A++"}),A.jsx("option",{children:""})]}),A.jsx("option",{value:"other",children:""})]}),ti==="other"&&!Pn&&A.jsx("input",{type:"text",placeholder:"...",value:ti==="other"?"":ti,onChange:X=>mr(X.target.value),className:"w-full mt-4 p-5 bg-white border-2 border-indigo-200 rounded-2xl outline-none font-bold text-slate-700"})]})]}),A.jsxs("div",{className:"space-y-8",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-[0.2em] mb-4",children:""}),A.jsxs("div",{className:"relative",children:[A.jsx("input",{type:"number",value:ss,onChange:X=>xn(X.target.value),className:"w-full p-8 text-5xl font-black bg-slate-50 border-2 border-transparent rounded-[2rem] focus:bg-white focus:border-indigo-600 focus:ring-4 focus:ring-indigo-100 transition-all outline-none text-indigo-600 shadow-inner"}),A.jsx("div",{className:"absolute right-8 top-1/2 -translate-y-1/2 flex items-center gap-2 pointer-events-none",children:A.jsx("span",{className:"font-black text-slate-300 text-2xl uppercase tracking-tighter",children:"PTS"})})]})]}),A.jsx("button",{onClick:yn,disabled:p||!ze||!ss,className:`w-full text-white font-black py-8 rounded-[2rem] transition-all shadow-2xl flex items-center justify-center gap-4 text-2xl active:scale-95 group ${p||!ze||!ss?"bg-slate-300 shadow-none cursor-not-allowed":"bg-emerald-600 hover:bg-emerald-700 shadow-emerald-200"}`,children:p?A.jsxs(A.Fragment,{children:[A.jsx(_c,{size:32,className:"animate-spin"}),"..."]}):A.jsxs(A.Fragment,{children:[A.jsx(lc,{size:32,className:"group-hover:scale-125 transition-transform"}),""]})})]})]}),t==="approval"&&A.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[A.jsxs("h2",{className:"text-3xl font-black text-slate-800 mb-8 flex items-center gap-3",children:[A.jsx(Ng,{className:"text-indigo-600"}),"",A.jsxs("span",{className:"bg-indigo-100 text-indigo-600 text-sm px-3 py-1 rounded-full",children:[M.length," "]})]}),A.jsx("div",{className:"space-y-4",children:M.length===0?A.jsx("div",{className:"text-center py-20 text-slate-400 font-bold",children:""}):M.map(X=>A.jsxs("div",{className:"flex items-center justify-between p-6 bg-slate-50 rounded-2xl border border-slate-100",children:[A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx("div",{className:"w-12 h-12 bg-indigo-200 rounded-full flex items-center justify-center text-indigo-700 font-bold text-xl",children:X.name[0]}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-black text-lg text-slate-800",children:X.name}),A.jsx("p",{className:"text-slate-500 text-sm font-bold",children:X.grade||""})]})]}),A.jsxs("div",{className:"flex gap-3",children:[A.jsx("button",{onClick:()=>sa(X.id),className:"bg-emerald-500 hover:bg-emerald-600 text-white px-6 py-2 rounded-xl font-bold transition-all shadow-lg shadow-emerald-100",children:""}),A.jsx("button",{onClick:()=>Ht(X.id),className:"bg-slate-200 hover:bg-rose-500 hover:text-white text-slate-500 px-6 py-2 rounded-xl font-bold transition-all",children:""})]})]},X.id))})]}),t==="products"&&A.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[A.jsxs("div",{className:"flex justify-between items-center mb-8",children:[A.jsxs("h2",{className:"text-3xl font-black text-slate-800 flex items-center gap-3",children:[A.jsx(Cg,{className:"text-indigo-600"})," "]}),A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsxs("button",{onClick:()=>Hr(!vs),className:"bg-slate-100 text-slate-600 px-5 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-slate-200 transition-all border border-slate-200",children:[A.jsx(ju,{size:18})," "]}),A.jsxs("button",{onClick:()=>Fr(!ii),className:"bg-indigo-600 text-white px-5 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100",children:[A.jsx(cc,{size:20})," "]})]})]}),vs&&A.jsxs("div",{className:"bg-slate-50 p-6 rounded-2xl mb-8 border border-slate-200 animate-in fade-in",children:[A.jsx("h3",{className:"font-black text-slate-700 mb-4",children:""}),A.jsxs("div",{className:"flex gap-4 mb-6",children:[A.jsx("input",{placeholder:" (: )",value:lr,onChange:X=>Ti(X.target.value),className:"flex-1 p-3 rounded-xl border border-slate-200 font-bold outline-none"}),A.jsx("button",{onClick:()=>{lr&&(MD(lr),Ti(""))},className:"bg-emerald-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-emerald-700",children:""})]}),A.jsx("div",{className:"flex flex-wrap gap-3",children:Qe.map(X=>A.jsxs("div",{className:"bg-white px-4 py-2 rounded-xl border border-slate-200 flex items-center gap-2 shadow-sm font-bold text-slate-600",children:[X.name,A.jsx("button",{onClick:()=>PD(X.id),className:"text-slate-300 hover:text-rose-500",children:A.jsx(ka,{size:14})})]},X.id))})]}),ii&&A.jsxs("form",{onSubmit:Cr,className:"bg-slate-50 p-6 rounded-2xl mb-8 border border-slate-200 animate-in fade-in",children:[A.jsx("h3",{className:"font-black text-slate-700 mb-4",children:""}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[A.jsx("input",{placeholder:"",value:vi,onChange:X=>ia(X.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"}),A.jsxs("select",{value:Jt,onChange:X=>ni(X.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500",children:[Qe.map(X=>A.jsx("option",{value:X.name,children:X.name},X.id)),Qe.length===0&&A.jsx("option",{value:"",children:""})]}),A.jsxs("div",{className:"flex flex-col gap-2",children:[A.jsxs("label",{className:"flex items-center justify-center gap-2 p-3 rounded-xl border-2 border-dashed border-slate-300 hover:border-indigo-400 hover:bg-indigo-50 transition-all cursor-pointer font-bold text-slate-500 hover:text-indigo-600",children:[A.jsx(Ig,{size:18}),As?"":" (500KB)",A.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:kr})]}),Nn&&A.jsx("img",{src:Nn,className:"h-20 w-auto object-cover rounded-lg border border-slate-200",alt:"preview"})]}),A.jsx("input",{placeholder:" ()",type:"number",value:kt,onChange:X=>Le(X.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"}),A.jsx("textarea",{placeholder:" ()",value:At,onChange:X=>ln(X.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500 md:col-span-2 h-24"}),A.jsx("input",{placeholder:"",type:"number",value:zt,onChange:X=>ot(X.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"})]}),A.jsxs("div",{className:"flex justify-end gap-2",children:[A.jsx("button",{type:"button",onClick:()=>Fr(!1),className:"px-4 py-2 text-slate-400 font-bold hover:text-slate-600",children:""}),A.jsx("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700",children:""})]})]}),A.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:W.map(X=>A.jsxs("div",{className:"border border-slate-100 rounded-[2rem] p-6 flex flex-col gap-4 group hover:shadow-xl transition-all bg-white relative",children:[A.jsxs("div",{className:"flex gap-4 items-center",children:[A.jsx("img",{src:X.imageUrl,alt:X.name,className:"w-20 h-20 rounded-2xl object-cover shadow-sm"}),A.jsxs("div",{className:"flex-1",children:[A.jsx("h4",{className:"font-black text-slate-800 text-lg",children:X.name}),A.jsx("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest",children:X.category}),A.jsxs("p",{className:"text-indigo-600 font-black",children:[X.price," PTS"]})]}),A.jsx("button",{onClick:()=>aa(X.id),className:"p-2 text-slate-300 hover:text-rose-500 transition-colors",children:A.jsx(Ou,{size:18})})]}),A.jsx("div",{className:"flex items-center justify-between pt-4 border-t border-slate-50",children:A.jsxs("div",{className:"flex flex-col",children:[A.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter mb-1",children:""}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("input",{type:"number",defaultValue:X.stock,onBlur:Me=>Dn(X.id,parseInt(Me.target.value)||0),className:"w-16 p-2 bg-slate-50 border border-slate-200 rounded-lg text-sm font-black text-slate-700 outline-none focus:ring-2 focus:ring-indigo-500"}),A.jsx("span",{className:`text-[10px] font-black px-2 py-1 rounded-lg ${X.stock>0?"bg-emerald-100 text-emerald-600":"bg-red-100 text-red-600"}`,children:X.stock>0?"ON SALE":"SOLD OUT"})]})]})})]},X.id))})]}),t==="mission_approval"&&A.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[A.jsxs("h2",{className:"text-3xl font-black text-slate-800 mb-8 flex items-center gap-3",children:[A.jsx(Zu,{className:"text-emerald-600"}),"",A.jsxs("span",{className:"bg-emerald-100 text-emerald-600 text-sm px-3 py-1 rounded-full",children:[De.filter(X=>X.status==="pending").length," "]})]}),A.jsx("div",{className:"space-y-6",children:De.filter(X=>X.status==="pending").length===0?A.jsx("div",{className:"text-center py-24 text-slate-400 font-bold bg-slate-50 rounded-[3rem] border border-slate-100 border-dashed",children:""}):De.filter(X=>X.status==="pending").map(X=>A.jsxs("div",{className:"bg-slate-50 p-8 rounded-[2.5rem] border border-slate-100 flex flex-col md:flex-row md:items-center justify-between gap-6",children:[A.jsxs("div",{className:"flex items-center gap-6",children:[A.jsx("div",{className:"w-16 h-16 bg-white rounded-2xl shadow-sm flex items-center justify-center text-2xl font-black text-indigo-600 border border-slate-100",children:X.userName[0]}),A.jsxs("div",{children:[A.jsx("h3",{className:"text-xl font-black text-slate-800",children:X.userName}),A.jsxs("p",{className:"text-slate-500 font-bold flex items-center gap-2",children:["",A.jsxs("span",{className:"text-indigo-600",children:["",X.missionTitle,""]})]}),A.jsxs("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest mt-2",children:["",X.points," PTS  ",new Date(X.timestamp).toLocaleString()]})]})]}),A.jsxs("div",{className:"flex gap-4",children:[A.jsxs("button",{onClick:()=>Rt(X.id),className:"bg-emerald-600 hover:bg-emerald-700 text-white px-8 py-3 rounded-2xl font-black transition-all shadow-xl shadow-emerald-100 flex items-center gap-2",children:[A.jsx(lc,{size:20})," "]}),A.jsx("button",{onClick:()=>Nr(X.id),className:"bg-white hover:bg-rose-50 text-slate-400 hover:text-rose-600 px-8 py-3 rounded-2xl font-black transition-all border border-slate-200",children:""})]})]},X.id))})]}),t==="scan"&&A.jsxs("div",{className:"bg-white rounded-[3rem] p-16 border border-slate-100 text-center shadow-xl animate-in fade-in",children:[A.jsx("div",{className:"bg-indigo-50 w-32 h-32 rounded-[2.5rem] flex items-center justify-center mx-auto mb-8 text-indigo-600 shadow-inner",children:A.jsx(Tg,{size:56})}),A.jsx("h2",{className:"text-3xl font-black text-slate-800 mb-4 tracking-tight",children:"QR Code "}),A.jsx("p",{className:"text-slate-400 mb-8 font-medium max-w-md mx-auto leading-relaxed",children:" QR Code "}),A.jsx("div",{className:"max-w-md mx-auto mb-8 overflow-hidden rounded-[2rem] border-4 border-indigo-50 shadow-inner",children:A.jsx("div",{id:"reader",className:"w-full"})}),A.jsxs("div",{className:"max-w-md mx-auto mb-8",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[A.jsx("div",{className:"h-px bg-slate-200 flex-1"}),A.jsx("span",{className:"text-[10px] font-black text-slate-300 uppercase tracking-widest",children:""}),A.jsx("div",{className:"h-px bg-slate-200 flex-1"})]}),A.jsx("input",{type:"text",placeholder:" QR Code ...",value:Be,onChange:X=>Ct(X.target.value),className:"w-full p-4 bg-slate-50 border-2 border-indigo-50 rounded-2xl focus:bg-white focus:border-indigo-600 outline-none font-mono text-xs text-slate-500 text-center"})]}),A.jsx("button",{onClick:()=>Si(),disabled:c,className:"bg-indigo-600 hover:bg-indigo-700 disabled:bg-slate-300 text-white px-16 py-6 rounded-[2rem] font-black transition-all shadow-2xl shadow-indigo-200 inline-flex items-center justify-center gap-4 text-xl active:scale-95",children:c?"...":""})]}),t==="history"&&A.jsxs("section",{className:"bg-white rounded-[3rem] border border-slate-100 shadow-xl overflow-hidden animate-in fade-in",children:[A.jsxs("div",{className:"p-10 border-b border-slate-50 flex flex-col md:flex-row md:items-center justify-between gap-6",children:[A.jsxs("h2",{className:"font-black text-2xl text-slate-800 flex items-center gap-3",children:[A.jsx(id,{className:"text-indigo-600"}),""]}),A.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[A.jsx("div",{className:"relative",children:A.jsx("input",{type:"month",value:Z,onChange:X=>J(X.target.value),className:"pl-5 pr-5 py-4 rounded-2xl bg-slate-50 border-2 border-transparent focus:bg-white focus:border-indigo-600 focus:ring-4 focus:ring-indigo-100 transition-all outline-none text-sm font-bold shadow-inner"})}),A.jsxs("div",{className:"relative",children:[A.jsx(k3,{className:"absolute left-5 top-1/2 -translate-y-1/2 text-slate-400",size:20}),A.jsx("input",{type:"text",placeholder:"...",value:V,onChange:X=>j(X.target.value),className:"pl-14 pr-8 py-4 rounded-2xl bg-slate-50 border-2 border-transparent focus:bg-white focus:border-indigo-600 focus:ring-4 focus:ring-indigo-100 transition-all outline-none text-sm w-full md:w-80 shadow-inner font-bold"})]})]})]}),A.jsx("div",{className:"overflow-x-auto",children:A.jsxs("table",{className:"w-full",children:[A.jsx("thead",{className:"bg-slate-50/50",children:A.jsxs("tr",{children:[A.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),A.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),A.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),A.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),A.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),A.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""})]})}),A.jsx("tbody",{className:"divide-y divide-slate-50",children:oa.map(X=>{var Me;try{return A.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors",children:[A.jsx("td",{className:"px-10 py-6 whitespace-nowrap",children:A.jsx("span",{className:`px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest ${X.status==="completed"?"bg-emerald-100 text-emerald-700":X.status==="pending"?"bg-amber-100 text-amber-700":"bg-rose-100 text-rose-700"}`,children:X.status==="completed"?"":X.status==="pending"?"":""})}),A.jsx("td",{className:"px-10 py-6 whitespace-nowrap font-black text-slate-800",children:((Me=C.find(Pe=>Pe.id===X.userId))==null?void 0:Me.name)||""}),A.jsx("td",{className:"px-10 py-6 whitespace-nowrap font-bold text-slate-600",children:X.productName}),A.jsxs("td",{className:"px-10 py-6 whitespace-nowrap text-indigo-600 font-black",children:[X.pointsSpent," PTS"]}),A.jsx("td",{className:"px-10 py-6 whitespace-nowrap text-slate-400 text-sm font-bold",children:X.timestamp?new Date(X.timestamp).toLocaleDateString():""}),A.jsx("td",{className:"px-10 py-6 whitespace-nowrap",children:X.status==="pending"?A.jsx("button",{onClick:()=>yr(X.id),className:"text-white bg-indigo-600 hover:bg-indigo-700 px-5 py-2.5 rounded-xl text-xs font-black transition-all shadow-xl shadow-indigo-100 active:scale-95",children:""}):A.jsxs("div",{className:"flex items-center gap-2 text-slate-300 font-black text-[10px] tracking-widest",children:[A.jsx(lc,{size:14})," FINISHED"]})})]},X.id)}catch(Pe){return console.error("Row render error",Pe),null}})})]})})]}),t==="banners"&&A.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[A.jsxs("div",{className:"flex justify-between items-center mb-8",children:[A.jsxs("h2",{className:"text-3xl font-black text-slate-800 flex items-center gap-3",children:[A.jsx(Yy,{className:"text-indigo-600"})," "]}),A.jsxs("button",{onClick:()=>Jn(!0),className:"bg-indigo-600 text-white px-5 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100",children:[A.jsx(cc,{size:20})," "]})]}),A.jsx("div",{className:"space-y-4",children:Xe.length===0?A.jsx("div",{className:"py-12 text-center text-slate-400 font-bold bg-slate-50 rounded-2xl border border-slate-200 border-dashed",children:""}):Xe.map((X,Me)=>A.jsxs("div",{draggable:!0,onDragStart:()=>ie(Me),onDragOver:Pe=>{if(Pe.preventDefault(),gt===null||gt===Me)return;const tt=[...Xe],[le]=tt.splice(gt,1);tt.splice(Me,0,le),ie(Me),dt(tt)},onDragEnd:async()=>{ie(null),await tM(Xe)},className:`flex items-center gap-4 bg-slate-50 rounded-2xl border border-slate-100 overflow-hidden group transition-all ${gt===Me?"opacity-50 scale-[0.98]":"hover:shadow-md"}`,children:[A.jsx("div",{className:"pl-4 text-slate-300 cursor-grab active:cursor-grabbing shrink-0",children:A.jsx(h3,{size:24})}),A.jsx("img",{src:X.imageUrl,alt:X.tag,className:"w-32 h-20 object-cover shrink-0",style:{objectPosition:X.objectPosition||"center"}}),A.jsxs("div",{className:"flex-1 min-w-0",children:[A.jsx("span",{className:"bg-indigo-100 text-indigo-700 px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-widest",children:X.tag||""}),A.jsxs("p",{className:"text-xs text-slate-400 font-bold mt-2",children:[" ",X.mobileHeight||"h-48","   ",X.desktopHeight||"md:h-72"]})]}),A.jsxs("span",{className:"text-[10px] font-black text-slate-300 px-2 shrink-0",children:["#",Me+1]}),A.jsx("button",{onClick:async()=>{confirm("")&&(await eM(X.id),e("","success"))},className:"p-4 text-slate-300 hover:text-rose-500 transition-colors opacity-0 group-hover:opacity-100 shrink-0",children:A.jsx(Ou,{size:18})})]},X.id))})]}),He&&A.jsx("div",{className:"fixed inset-0 z-[200] bg-slate-900/80 backdrop-blur-lg flex items-center justify-center p-4 animate-in fade-in duration-200",children:A.jsxs("div",{className:"bg-white w-full max-w-6xl rounded-[3rem] shadow-2xl overflow-hidden flex flex-col md:flex-row",style:{maxHeight:"92vh"},children:[A.jsxs("div",{className:"flex-1 bg-slate-100 flex flex-col",children:[A.jsxs("div",{className:"flex items-center gap-2 p-4 bg-white border-b border-slate-100",children:[A.jsx("span",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mr-2",children:""}),A.jsxs("button",{onClick:()=>je("desktop"),className:`flex items-center gap-1 px-4 py-2 rounded-xl text-xs font-black transition-all ${be==="desktop"?"bg-indigo-600 text-white shadow-md":"text-slate-400 hover:bg-slate-50"}`,children:[A.jsx(Xy,{size:14})," "]}),A.jsxs("button",{onClick:()=>je("mobile"),className:`flex items-center gap-1 px-4 py-2 rounded-xl text-xs font-black transition-all ${be==="mobile"?"bg-indigo-600 text-white shadow-md":"text-slate-400 hover:bg-slate-50"}`,children:[A.jsx(Wy,{size:14})," "]})]}),A.jsx("div",{className:"flex-1 flex items-center justify-center p-8 overflow-auto",children:be==="desktop"?A.jsx("div",{className:"w-full max-w-2xl bg-white rounded-[2rem] overflow-hidden shadow-xl border-4 border-white ring-1 ring-slate-200",children:A.jsxs("div",{className:`relative w-full overflow-hidden rounded-[2rem] ${ar||"md:h-72"} h-72 ${Dt?"cursor-crosshair":""}`,onMouseDown:X=>{if(!Dt)return;$e(!0);const Me=X.currentTarget.getBoundingClientRect(),Pe=Math.round((X.clientX-Me.left)/Me.width*100),tt=Math.round((X.clientY-Me.top)/Me.height*100);xr(`${Pe}% ${tt}%`)},onMouseMove:X=>{if(!Fe||!Dt)return;const Me=X.currentTarget.getBoundingClientRect(),Pe=Math.round((X.clientX-Me.left)/Me.width*100),tt=Math.round((X.clientY-Me.top)/Me.height*100);xr(`${Pe}% ${tt}%`)},onMouseUp:()=>$e(!1),onMouseLeave:()=>$e(!1),children:[Dt?A.jsxs(A.Fragment,{children:[A.jsx("img",{src:Dt,alt:"preview",className:"w-full h-full object-cover transition-[object-position] duration-100 select-none pointer-events-none",style:{objectPosition:si||"center"},draggable:!1}),(()=>{const X=(si||"50% 50%").split(" "),Me=parseFloat(X[0])||50,Pe=parseFloat(X[1])||50;return A.jsxs("div",{className:"absolute w-6 h-6 -translate-x-1/2 -translate-y-1/2 pointer-events-none",style:{left:`${Me}%`,top:`${Pe}%`},children:[A.jsx("div",{className:"w-6 h-6 rounded-full border-4 border-white shadow-lg bg-indigo-500/70 animate-pulse"}),A.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:A.jsx("div",{className:"w-1 h-1 bg-white rounded-full"})})]})})()]}):A.jsx("div",{className:"w-full h-full bg-slate-200 flex items-center justify-center",children:A.jsx("p",{className:"text-slate-400 font-bold text-lg",children:""})}),A.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent flex items-end p-8 pointer-events-none",children:A.jsx("span",{className:"bg-indigo-600/90 backdrop-blur text-white px-4 py-2 rounded-xl text-xs font-black uppercase tracking-wider",children:zr||""})})]})}):A.jsxs("div",{className:"w-72 bg-white rounded-[2.5rem] overflow-hidden shadow-2xl border-4 border-slate-800 ring-4 ring-slate-700",children:[A.jsx("div",{className:"bg-slate-800 h-6 flex items-center justify-center",children:A.jsx("div",{className:"w-16 h-1.5 bg-slate-600 rounded-full"})}),A.jsxs("div",{className:`relative w-full overflow-hidden ${Bi||"h-48"} ${Dt?"cursor-crosshair":""}`,onMouseDown:X=>{if(!Dt)return;$e(!0);const Me=X.currentTarget.getBoundingClientRect(),Pe=Math.round((X.clientX-Me.left)/Me.width*100),tt=Math.round((X.clientY-Me.top)/Me.height*100);xr(`${Pe}% ${tt}%`)},onMouseMove:X=>{if(!Fe||!Dt)return;const Me=X.currentTarget.getBoundingClientRect(),Pe=Math.round((X.clientX-Me.left)/Me.width*100),tt=Math.round((X.clientY-Me.top)/Me.height*100);xr(`${Pe}% ${tt}%`)},onMouseUp:()=>$e(!1),onMouseLeave:()=>$e(!1),children:[Dt?A.jsxs(A.Fragment,{children:[A.jsx("img",{src:Dt,alt:"preview",className:"w-full h-full object-cover transition-[object-position] duration-100 select-none pointer-events-none",style:{objectPosition:si||"center"},draggable:!1}),(()=>{const X=(si||"50% 50%").split(" "),Me=parseFloat(X[0])||50,Pe=parseFloat(X[1])||50;return A.jsx("div",{className:"absolute w-5 h-5 -translate-x-1/2 -translate-y-1/2 pointer-events-none",style:{left:`${Me}%`,top:`${Pe}%`},children:A.jsx("div",{className:"w-5 h-5 rounded-full border-4 border-white shadow-lg bg-indigo-500/70 animate-pulse"})})})()]}):A.jsx("div",{className:"w-full h-full bg-slate-200 flex items-center justify-center",children:A.jsx("p",{className:"text-slate-400 font-bold text-sm",children:""})}),A.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent flex items-end p-4 pointer-events-none",children:A.jsx("span",{className:"bg-indigo-600/90 backdrop-blur text-white px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-wider",children:zr||""})})]}),A.jsx("div",{className:"p-3 bg-white h-16"})]})})]}),A.jsxs("div",{className:"w-full md:w-96 flex flex-col border-l border-slate-100 overflow-y-auto",children:[A.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between",children:[A.jsx("h3",{className:"text-xl font-black text-slate-800",children:""}),A.jsx("button",{onClick:()=>{Jn(!1),sr(""),Bt(null),Lr(""),xr("center"),Rn("h-48"),or("md:h-72")},className:"p-2 rounded-xl text-slate-400 hover:bg-slate-100 hover:text-slate-600 transition-all",children:A.jsx(ka,{size:20})})]}),A.jsxs("div",{className:"p-6 space-y-6 flex-1",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-widest mb-3",children:"1.  (500KB)"}),A.jsxs("label",{className:`flex items-center justify-center gap-2 p-6 rounded-2xl border-2 border-dashed cursor-pointer font-bold transition-all ${Dt?"border-emerald-300 bg-emerald-50 text-emerald-600":"border-slate-300 hover:border-indigo-400 hover:bg-indigo-50 text-slate-500 hover:text-indigo-600"}`,children:[A.jsx(Ig,{size:20}),Dt?" ":"",A.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:cr})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-widest mb-3",children:"2. "}),A.jsx("input",{list:"banner-tags-modal",value:zr,onChange:X=>Lr(X.target.value),placeholder:"...",className:"w-full p-4 rounded-2xl border-2 border-slate-100 font-bold text-slate-700 outline-none focus:border-indigo-500 transition-all"}),A.jsxs("datalist",{id:"banner-tags-modal",children:[A.jsx("option",{value:""}),A.jsx("option",{value:""}),A.jsx("option",{value:""}),A.jsx("option",{value:""}),A.jsx("option",{value:""})]})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-widest mb-2",children:"3. "}),A.jsx("div",{className:"bg-slate-50 rounded-xl p-3 border border-slate-100",children:A.jsx("p",{className:"text-xs font-bold text-slate-400 text-center",children:Dt?A.jsxs(A.Fragment,{children:[A.jsx("span",{className:"text-indigo-500 font-black",children:" "}),A.jsx("br",{}),A.jsxs("span",{className:"text-[10px] font-bold text-slate-300",children:["(",si,")"]})]}):""})})]}),A.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[A.jsxs("div",{children:[A.jsxs("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-widest mb-3 flex items-center gap-1",children:[A.jsx(Wy,{size:12})," "]}),A.jsxs("select",{value:Bi,onChange:X=>Rn(X.target.value),className:"w-full p-3 rounded-xl border-2 border-slate-100 font-bold text-slate-700 outline-none focus:border-indigo-500 text-sm",children:[A.jsx("option",{value:"h-32",children:" 128px"}),A.jsx("option",{value:"h-40",children:" 160px"}),A.jsx("option",{value:"h-48",children:" 192px"}),A.jsx("option",{value:"h-56",children:" 224px"}),A.jsx("option",{value:"h-64",children:" 256px"})]})]}),A.jsxs("div",{children:[A.jsxs("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-widest mb-3 flex items-center gap-1",children:[A.jsx(Xy,{size:12})," "]}),A.jsxs("select",{value:ar,onChange:X=>or(X.target.value),className:"w-full p-3 rounded-xl border-2 border-slate-100 font-bold text-slate-700 outline-none focus:border-indigo-500 text-sm",children:[A.jsx("option",{value:"md:h-48",children:" 192px"}),A.jsx("option",{value:"md:h-64",children:" 256px"}),A.jsx("option",{value:"md:h-72",children:" 288px"}),A.jsx("option",{value:"md:h-80",children:" 320px"}),A.jsx("option",{value:"md:h-96",children:" 384px"})]})]})]})]}),A.jsx("div",{className:"p-6 border-t border-slate-100",children:A.jsxs("button",{onClick:async()=>{if(!Fn){e("","error");return}await $D(Fn,zr,si,Bi,ar),sr(""),Lr(""),xr("center"),Rn("h-48"),or("md:h-72"),Bt(null),Jn(!1),e("","success")},className:`w-full py-5 rounded-2xl font-black text-lg transition-all active:scale-95 flex items-center justify-center gap-3 ${Dt?"bg-emerald-600 hover:bg-emerald-700 text-white shadow-xl shadow-emerald-100":"bg-slate-200 text-slate-400 cursor-not-allowed"}`,children:[A.jsx(lc,{size:24})," "]})})]})]})}),t==="missions"&&A.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[A.jsxs("div",{className:"flex justify-between items-center mb-8",children:[A.jsxs("h2",{className:"text-3xl font-black text-slate-800 flex items-center gap-3",children:[A.jsx(ju,{className:"text-indigo-600"})," "]}),A.jsxs("button",{onClick:()=>pn(!et),className:"bg-indigo-600 text-white px-5 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100",children:[A.jsx(cc,{size:18})," "]})]}),et&&A.jsxs("form",{onSubmit:Pt,className:"bg-slate-50 p-6 rounded-2xl mb-8 border border-slate-200 animate-in fade-in",children:[A.jsx("h3",{className:"font-black text-slate-700 mb-4",children:""}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[A.jsx("input",{placeholder:"",value:Mn,onChange:X=>Ai(X.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"}),A.jsx("input",{placeholder:"",type:"number",value:bt,onChange:X=>gr(X.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"}),A.jsxs("select",{value:Sr,onChange:X=>ei(X.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500",children:[A.jsx("option",{value:"normal",children:""}),A.jsx("option",{value:"challenge",children:""}),A.jsx("option",{value:"hard",children:""})]}),A.jsxs("div",{className:"flex items-center gap-2 p-3 bg-white rounded-xl border border-slate-200",children:[A.jsx(_c,{size:18,className:"text-slate-400"}),A.jsx("input",{type:"datetime-local",value:An,onChange:X=>Zt(X.target.value),className:"font-bold outline-none text-slate-600 w-full",placeholder:" ()"})]})]}),A.jsxs("div",{className:"flex justify-end gap-3",children:[A.jsx("button",{type:"button",onClick:()=>pn(!1),className:"px-4 py-2 rounded-xl font-bold text-slate-400 hover:bg-slate-200 transition-all",children:""}),A.jsx("button",{type:"submit",className:"bg-indigo-600 text-white px-6 py-2 rounded-xl font-bold hover:bg-indigo-700 transition-all shadow-lg",children:""})]})]}),A.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[Y.length===0&&A.jsx("div",{className:"text-center py-12 text-slate-400 font-bold bg-slate-50 rounded-2xl border border-slate-100 border-dashed",children:""}),Y.map(X=>A.jsxs("div",{className:`flex flex-col md:flex-row md:items-center justify-between p-6 rounded-2xl border transition-all ${X.isActive?"bg-white border-slate-100 shadow-sm":"bg-slate-50 border-slate-100 opacity-60"}`,children:[A.jsxs("div",{className:"flex items-center gap-4 mb-4 md:mb-0",children:[A.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center font-black text-lg shrink-0 ${X.type==="normal"?"bg-emerald-100 text-emerald-600":X.type==="challenge"?"bg-orange-100 text-orange-600":"bg-rose-100 text-rose-600"}`,children:X.type==="normal"?"N":X.type==="challenge"?"C":"H"}),A.jsxs("div",{children:[A.jsxs("h3",{className:"font-black text-lg text-slate-800 flex items-center gap-2",children:[X.title,!X.isActive&&A.jsx("span",{className:"text-[10px] bg-slate-200 text-slate-500 px-2 py-0.5 rounded-full",children:""})]}),A.jsxs("p",{className:"text-slate-400 text-sm font-bold flex items-center gap-2",children:[A.jsxs("span",{className:"text-indigo-500",children:[X.points," PTS"]}),"  ",X.description,X.deadline&&A.jsxs("span",{className:"flex items-center gap-1 text-amber-500 ml-2",children:[A.jsx(_c,{size:14})," ",new Date(X.deadline).toLocaleString()," "]})]})]})]}),A.jsx("button",{onClick:()=>Ir(X.id),className:`px-4 py-2 rounded-xl font-black text-xs transition-all whitespace-nowrap ${X.isActive?"bg-rose-50 text-rose-600 hover:bg-rose-100":"bg-emerald-50 text-emerald-600 hover:bg-emerald-100"}`,children:X.isActive?"":""})]},X.id))]})]}),t==="wishes"&&A.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[A.jsxs("h2",{className:"text-3xl font-black text-slate-800 mb-8 flex items-center gap-3",children:[A.jsx(qf,{className:"text-pink-500"})," "]}),A.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:ce.length===0?A.jsx("div",{className:"col-span-full py-20 text-center text-slate-400 font-bold",children:""}):ce.map(X=>{var Me;return A.jsxs("div",{className:"bg-slate-50 p-6 rounded-[2.5rem] border border-slate-100 relative group",children:[A.jsx("button",{onClick:()=>Mt(X.id),className:"absolute top-4 right-4 p-2 bg-white rounded-full text-slate-300 hover:text-rose-500 hover:shadow-md transition-all opacity-0 group-hover:opacity-100",children:A.jsx(Ou,{size:18})}),A.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[A.jsx("img",{src:X.userAvatar,className:"w-12 h-12 rounded-full border-2 border-white shadow-sm",alt:X.userName}),A.jsxs("div",{children:[A.jsx("h4",{className:"font-black text-slate-800",children:X.userName}),A.jsx("p",{className:"text-[10px] text-slate-400 font-bold",children:new Date(X.timestamp).toLocaleString()})]})]}),A.jsxs("h3",{className:"text-xl font-black text-slate-800 mb-2",children:["",X.itemName]}),A.jsxs("p",{className:"text-slate-500 text-sm mb-6 leading-relaxed italic",children:['"',X.description,'"']}),A.jsxs("div",{className:"flex items-center gap-2 text-pink-500 font-black text-sm",children:[A.jsx(qf,{size:16,fill:"currentColor"})," ",((Me=X.likedBy)==null?void 0:Me.length)||0," "]})]},X.id)})})]}),c&&A.jsxs("div",{className:"fixed inset-0 z-[150] bg-slate-900/95 backdrop-blur-xl flex flex-col items-center justify-center p-8",children:[A.jsxs("div",{className:"relative w-full max-w-lg aspect-square border-8 border-white/5 rounded-[5rem] overflow-hidden shadow-[0_0_100px_rgba(79,70,229,0.3)]",children:[A.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-900 via-indigo-900/20 to-slate-900 flex items-center justify-center",children:A.jsxs("div",{className:"text-center",children:[A.jsx(P3,{size:140,className:"mx-auto mb-10 animate-pulse text-indigo-400"}),A.jsx("p",{className:"text-3xl font-black text-white mb-4 tracking-tight",children:"..."}),A.jsx("p",{className:"text-indigo-300 font-bold tracking-widest uppercase text-xs",children:"AI Computer Vision Active"})]})}),A.jsx("div",{className:"absolute top-0 left-0 w-full h-3 bg-indigo-400 shadow-[0_0_50px_rgba(129,140,248,1)] animate-scan-line"})]}),A.jsxs("button",{onClick:()=>h(!1),className:"mt-16 bg-white/5 hover:bg-white/10 text-white px-12 py-5 rounded-[2rem] font-black transition-all border border-white/10 flex items-center gap-4 text-lg backdrop-blur",children:[A.jsx(ka,{size:24})," "]}),A.jsx("style",{children:`
            @keyframes scan-line {
              0% { top: 0% }
              100% { top: 100% }
            }
            .animate-scan-line {
              animation: scan-line 3s linear infinite;
            }
          `})]}),mt&&A.jsx("div",{className:"fixed inset-0 z-[160] flex items-center justify-center p-4 bg-slate-900/70 backdrop-blur-2xl",children:A.jsxs("div",{className:"bg-white rounded-[4rem] max-w-md w-full p-12 shadow-[0_0_80px_rgba(0,0,0,0.5)] animate-in zoom-in-95 duration-200",children:[A.jsx("div",{className:"bg-emerald-50 w-24 h-24 rounded-[2rem] flex items-center justify-center text-emerald-600 mb-10 mx-auto shadow-inner",children:A.jsx(sd,{size:48})}),A.jsx("h2",{className:"text-3xl font-black text-slate-800 text-center mb-10 tracking-tight",children:""}),A.jsxs("div",{className:"bg-slate-50 rounded-[2.5rem] p-8 space-y-6 mb-12 border border-slate-100 shadow-inner",children:[A.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-slate-200/50",children:[A.jsx("span",{className:"text-slate-400 text-[10px] font-black uppercase tracking-widest",children:""}),A.jsx("span",{className:"font-black text-slate-800 text-xl",children:(Rr=C.find(X=>X.id===mt.userId))==null?void 0:Rr.name})]}),A.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-slate-200/50",children:[A.jsx("span",{className:"text-slate-400 text-[10px] font-black uppercase tracking-widest",children:""}),A.jsx("span",{className:"font-black text-slate-800 text-xl",children:mt.productName})]}),A.jsxs("div",{className:"flex justify-between items-center py-2",children:[A.jsx("span",{className:"text-slate-400 text-[10px] font-black uppercase tracking-widest",children:""}),A.jsxs("span",{className:"font-black text-indigo-600 text-2xl",children:[mt.pointsSpent," ",A.jsx("span",{className:"text-xs font-bold text-indigo-400",children:"PTS"})]})]})]}),A.jsxs("div",{className:"flex flex-col gap-4",children:[A.jsxs("button",{onClick:()=>yr(mt.id),className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-6 rounded-2xl transition-all shadow-2xl shadow-indigo-100 flex items-center justify-center gap-4 text-xl active:scale-95",children:[A.jsx(lc,{size:28}),""]}),A.jsx("button",{onClick:()=>Qt(null),className:"w-full bg-slate-100 text-slate-600 font-bold py-5 rounded-2xl hover:bg-slate-200 transition-all text-lg",children:""})]})]})})]})},C9=30,bg=C9*24*60*60*1e3,I9=({user:n,onUserUpdate:e})=>{const{showAlert:t}=Bc(),[s,c]=ne.useState([]),[h,p]=ne.useState(!1),[T,w]=ne.useState(""),[E,C]=ne.useState(""),[I,M]=ne.useState(null),B=s.filter(ae=>ae.userId===n.id).sort((ae,K)=>K.timestamp-ae.timestamp)[0],W=B&&Date.now()-B.timestamp<bg;ne.useEffect(()=>{const ae=Qv(K=>{c(K.sort((ce,Re)=>Re.timestamp-ce.timestamp))});return()=>ae()},[]),ne.useEffect(()=>{const ae=()=>{if(!B)return null;const ce=B.timestamp+bg-Date.now();return ce<=0?null:{d:Math.floor(ce/864e5),h:Math.floor(ce/36e5%24),m:Math.floor(ce/1e3/60%60),s:Math.floor(ce/1e3%60)}},K=setInterval(()=>{M(ae())},1e3);return M(ae()),()=>clearInterval(K)},[B]);const Q=async ae=>{if(ae.preventDefault(),!T.trim()||!E.trim())return;const K={id:`wish_${Date.now()}`,userId:n.id,userName:n.name,userAvatar:n.avatar,itemName:T,description:E,timestamp:Date.now(),likedBy:[]};await WD(K),p(!1),w(""),C(""),t("","success")},Y=async(ae,K)=>{if(K!=null&&K.includes(n.id)){t("","info");return}await ZD(ae,n.id)},_e=async()=>{if(n.points<500){t(" 500 ","error");return}if(confirm(" 500 "))try{const K={...n,points:n.points-500};await La(K),B&&await KD(B.id,{timestamp:Date.now()-(bg+1e5)}),t("","success"),e()}catch{t("","error")}};return A.jsxs("div",{className:"space-y-8 pb-20",children:[A.jsxs("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[A.jsxs("div",{children:[A.jsxs("h1",{className:"text-3xl font-bold text-slate-800 flex items-center gap-3",children:[A.jsx(ad,{className:"text-yellow-500"}),""]}),A.jsx("p",{className:"text-slate-500 mt-1",children:""})]}),A.jsxs("button",{onClick:()=>{W?t("","info"):p(!0)},className:`px-6 py-3 rounded-2xl font-black shadow-lg flex flex-col items-center gap-1 transition-all hover:scale-105 min-w-[200px] ${W?"bg-slate-100 text-slate-400 cursor-not-allowed border border-slate-200":"bg-indigo-600 text-white shadow-indigo-100 hover:bg-indigo-700"}`,children:[A.jsxs("div",{className:"flex items-center gap-2",children:[W?A.jsx(_c,{size:18}):A.jsx(cc,{size:20}),A.jsx("span",{children:W?"":""})]}),W&&I&&A.jsxs("div",{className:"flex flex-col items-center",children:[A.jsxs("span",{className:"text-[10px] font-bold font-mono tracking-tight",children:[I.d," ",I.h," ",I.m," ",I.s,""]}),A.jsxs("button",{onClick:ae=>{ae.stopPropagation(),_e()},className:"mt-2 bg-amber-100 text-amber-700 px-3 py-1 rounded-full text-[10px] font-black flex items-center gap-1 hover:bg-amber-200 transition-colors shadow-sm",children:[A.jsx(n3,{size:10}),"500 PTS "]})]})]})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.map(ae=>{var K,ce,Re,De;return A.jsxs("div",{className:"bg-white rounded-[2rem] p-6 border border-slate-100 shadow-sm hover:shadow-md transition-all flex flex-col relative overflow-hidden group",children:[A.jsx("div",{className:"absolute -right-4 -top-4 w-24 h-24 bg-yellow-50 rounded-full blur-2xl group-hover:bg-yellow-100 transition-colors"}),A.jsxs("div",{className:"flex items-center gap-3 mb-4 z-10",children:[A.jsx("img",{src:ae.userAvatar,alt:ae.userName,className:"w-10 h-10 rounded-full border-2 border-white shadow-sm"}),A.jsxs("div",{children:[A.jsx("p",{className:"text-sm font-bold text-slate-700",children:ae.userName}),A.jsx("p",{className:"text-xs text-slate-400",children:new Date(ae.timestamp).toLocaleDateString()})]})]}),A.jsx("h3",{className:"text-xl font-black text-slate-800 mb-2 z-10",children:ae.itemName}),A.jsx("p",{className:"text-slate-500 text-sm mb-6 flex-1 z-10",children:ae.description}),A.jsx("div",{className:"flex items-center justify-between pt-4 border-t border-slate-50 z-10",children:A.jsxs("button",{onClick:()=>Y(ae.id,ae.likedBy),className:`flex items-center gap-2 transition-colors group/like ${(K=ae.likedBy)!=null&&K.includes(n.id)?"text-pink-500":"text-slate-400 hover:text-pink-500"}`,children:[A.jsx("div",{className:`p-2 rounded-full transition-colors ${(ce=ae.likedBy)!=null&&ce.includes(n.id)?"bg-pink-50":"hover:bg-pink-50"}`,children:A.jsx(J3,{size:18,className:(Re=ae.likedBy)!=null&&Re.includes(n.id)?"fill-pink-500":""})}),A.jsxs("span",{className:"font-bold text-sm",children:[((De=ae.likedBy)==null?void 0:De.length)||0," "]})]})})]},ae.id)}),s.length===0&&A.jsxs("div",{className:"col-span-full py-20 text-center space-y-4",children:[A.jsx("div",{className:"w-20 h-20 bg-slate-50 rounded-full flex items-center justify-center mx-auto text-slate-300",children:A.jsx(qf,{size:40})}),A.jsx("p",{className:"text-slate-400 font-bold",children:""})]})]}),h&&A.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:A.jsxs("div",{className:"bg-white rounded-[2.5rem] max-w-lg w-full p-8 shadow-2xl animate-in zoom-in-95 duration-200",children:[A.jsxs("div",{className:"flex justify-between items-center mb-8",children:[A.jsxs("h2",{className:"text-2xl font-black text-slate-800 flex items-center gap-2",children:[A.jsx(ad,{className:"text-indigo-500"}),""]}),A.jsx("button",{onClick:()=>p(!1),className:"text-slate-400 hover:text-slate-600 bg-slate-50 p-2 rounded-full",children:A.jsx(ka,{size:24})})]}),A.jsxs("form",{onSubmit:Q,className:"space-y-6",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-slate-700 font-bold mb-2 ml-1",children:""}),A.jsx("input",{type:"text",value:T,onChange:ae=>w(ae.target.value),placeholder:"AirPods Pro...",className:"w-full bg-slate-50 border border-slate-200 rounded-2xl px-5 py-4 font-bold text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all placeholder:font-medium",required:!0})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-slate-700 font-bold mb-2 ml-1",children:""}),A.jsx("textarea",{value:E,onChange:ae=>C(ae.target.value),placeholder:"...",className:"w-full bg-slate-50 border border-slate-200 rounded-2xl px-5 py-4 font-medium text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all h-32 resize-none placeholder:font-medium",required:!0})]}),A.jsxs("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-5 rounded-[1.25rem] transition-all shadow-xl shadow-indigo-100 flex items-center justify-center gap-3 text-lg",children:[A.jsx(U3,{size:24}),""]})]})]})})]})},N9=({onLogin:n})=>{const{showAlert:e}=Bc(),[t,s]=ne.useState("student"),[c,h]=ne.useState(!1),[p,T]=ne.useState(""),[w,E]=ne.useState(""),[C,I]=ne.useState(""),[M,B]=ne.useState(""),[W,Q]=ne.useState(""),Y=async ce=>{ce.preventDefault();try{const De=(await C_()).find(V=>V.name===p);if(!De){e("","error");return}if(!De.isApproved){e("","info");return}const F=`${De.id}@workshop.local`;await xg(El,F,w),await La(De),e("","success"),n(De)}catch(Re){console.error("Login error:",Re),Re.code==="auth/invalid-credential"||Re.code==="auth/wrong-password"?e(" ()","error"):Re.code==="auth/user-not-found"?e("","error"):e(`: ${Re.message}`,"error")}},_e=async ce=>{ce.preventDefault();try{if((await C_()).some(Z=>Z.name===p)){e("","error");return}const De=p,F=`${De}@workshop.local`,V=await c5(El,F,w);await h5(V.user,{displayName:p});const j={id:De,name:p,password:w,grade:C,points:0,totalEarned:0,role:ea.STUDENT,avatar:`https://api.dicebear.com/7.x/avataaars/svg?seed=${p}&mouth=smile&eyebrows=defaultNatural&eyes=default`,isApproved:!1};await La(j),await El.signOut(),e("","success"),h(!1),E("")}catch(Re){console.error("Registration error:",Re),Re.code==="auth/email-already-in-use"?e(" (Email )","error"):e(`: ${Re.message}`,"error")}},ae=async ce=>{if(ce.preventDefault(),M==="0857999")try{await xg(El,"admin@workshop.local","0857999"),La(Bf),e("","success"),n(Bf)}catch(Re){console.error("Admin login error:",Re),e(`: ${Re.code||Re.message}`,"error")}else try{await xg(El,"admin@workshop.local",M),La(Bf),e("","success"),n(Bf)}catch(Re){console.error("Admin login error:",Re),e(`: ${Re.code||Re.message}`,"error")}},K=async ce=>{if(ce.preventDefault(),W.toLowerCase()==="aaa")try{await s5(El),La(S_),e("","success"),n(S_)}catch(Re){console.error("Guest login error:",Re),Re.code==="auth/admin-restricted-operation"?e(" Console  Anonymous","error"):e("","error")}else e("","error")};return A.jsx("div",{className:"min-h-screen bg-[#f8fafc] flex items-center justify-center p-4",children:A.jsxs("div",{className:"bg-white max-w-4xl w-full rounded-[3rem] shadow-2xl overflow-hidden flex flex-col md:flex-row min-h-[600px]",children:[A.jsxs("div",{className:"bg-indigo-600 p-12 text-white md:w-5/12 flex flex-col justify-between relative overflow-hidden",children:[A.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-500 rounded-full -translate-y-1/2 translate-x-1/3 opacity-50"}),A.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-indigo-700 rounded-full translate-y-1/3 -translate-x-1/3 opacity-50"}),A.jsxs("div",{className:"relative z-10",children:[A.jsx("div",{className:"bg-white w-16 h-16 rounded-2xl flex items-center justify-center p-2 mb-6 shadow-xl",children:A.jsx("img",{src:"/wenhong_cramschool/wenhong_logo.jpg",className:"w-full h-full rounded-xl object-cover",alt:"logo"})}),A.jsx("h1",{className:"text-4xl font-black tracking-tight mb-4",children:""}),A.jsx("p",{className:"text-indigo-100 font-medium text-lg leading-relaxed",children:""})]}),A.jsx("div",{className:"relative z-10 text-sm font-medium text-indigo-200",children:" 2026 Workshop System"})]}),A.jsxs("div",{className:"p-8 md:p-12 md:w-7/12 flex flex-col",children:[!c&&A.jsxs("div",{className:"flex gap-2 mb-10 overflow-x-auto pb-2",children:[A.jsxs("button",{onClick:()=>s("student"),className:`flex-1 min-w-[100px] py-3 rounded-xl font-bold text-sm transition-all flex flex-col items-center gap-1 ${t==="student"?"bg-indigo-50 text-indigo-600 ring-2 ring-indigo-500 ring-offset-2":"bg-slate-50 text-slate-400 hover:bg-slate-100"}`,children:[A.jsx(lN,{size:18})," "]}),A.jsxs("button",{onClick:()=>s("admin"),className:`flex-1 min-w-[100px] py-3 rounded-xl font-bold text-sm transition-all flex flex-col items-center gap-1 ${t==="admin"?"bg-indigo-50 text-indigo-600 ring-2 ring-indigo-500 ring-offset-2":"bg-slate-50 text-slate-400 hover:bg-slate-100"}`,children:[A.jsx(sd,{size:18})," "]}),A.jsxs("button",{onClick:()=>s("guest"),className:`flex-1 min-w-[100px] py-3 rounded-xl font-bold text-sm transition-all flex flex-col items-center gap-1 ${t==="guest"?"bg-indigo-50 text-indigo-600 ring-2 ring-500 ring-offset-2":"bg-slate-50 text-slate-400 hover:bg-slate-100"}`,children:[A.jsx(i3,{size:18})," "]})]}),!c&&t==="student"&&A.jsxs("form",{onSubmit:Y,className:"space-y-6 flex-1 flex flex-col justify-center animate-in fade-in slide-in-from-right-4 duration-300",children:[A.jsxs("div",{children:[A.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-1",children:""}),A.jsx("p",{className:"text-slate-400",children:""})]}),A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),A.jsx("input",{type:"text",value:p,onChange:ce=>T(ce.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:""})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),A.jsx("input",{type:"password",value:w,onChange:ce=>E(ce.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:""})]})]}),A.jsx("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-4 rounded-2xl shadow-xl shadow-indigo-100 transition-all active:scale-95",children:""}),A.jsx("div",{className:"text-center",children:A.jsx("button",{type:"button",onClick:()=>h(!0),className:"text-indigo-500 font-bold hover:underline",children:""})})]}),c&&A.jsxs("form",{onSubmit:_e,className:"space-y-6 flex-1 flex flex-col justify-center animate-in fade-in slide-in-from-right-4 duration-300",children:[A.jsxs("div",{children:[A.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-1",children:""}),A.jsx("p",{className:"text-slate-400",children:""})]}),A.jsxs("div",{className:"space-y-3",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),A.jsx("input",{type:"text",value:p,onChange:ce=>T(ce.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:"",required:!0})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),A.jsx("input",{type:"password",value:w,onChange:ce=>E(ce.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:"",required:!0})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),A.jsx("select",{value:C,onChange:ce=>I(ce.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl px-5 py-4 font-bold text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all appearance-none",children:tm.map(ce=>A.jsx("option",{value:ce,children:ce},ce))})]})]}),A.jsxs("button",{type:"submit",className:"w-full bg-slate-800 hover:bg-slate-900 text-white font-black py-4 rounded-2xl shadow-xl transition-all active:scale-95 flex items-center justify-center gap-2",children:[A.jsx(Ng,{size:20}),""]}),A.jsx("div",{className:"text-center",children:A.jsx("button",{type:"button",onClick:()=>h(!1),className:"text-slate-400 font-bold hover:text-slate-600",children:""})})]}),!c&&t==="admin"&&A.jsxs("form",{onSubmit:ae,className:"space-y-6 flex-1 flex flex-col justify-center animate-in fade-in slide-in-from-right-4 duration-300",children:[A.jsxs("div",{children:[A.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-1",children:""}),A.jsx("p",{className:"text-slate-400",children:""})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),A.jsx("input",{type:"password",value:M,onChange:ce=>B(ce.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:"..."})]}),A.jsx("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-4 rounded-2xl shadow-xl shadow-indigo-100 transition-all active:scale-95",children:""})]}),!c&&t==="guest"&&A.jsxs("form",{onSubmit:K,className:"space-y-6 flex-1 flex flex-col justify-center animate-in fade-in slide-in-from-right-4 duration-300",children:[A.jsxs("div",{children:[A.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-1",children:""}),A.jsx("p",{className:"text-slate-400",children:""})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),A.jsx("input",{type:"text",value:W,onChange:ce=>Q(ce.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:"..."})]}),A.jsx("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-4 rounded-2xl shadow-xl shadow-indigo-100 transition-all active:scale-95",children:""})]})]})]})})};class R9 extends ne.Component{constructor(){super(...arguments),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Uncaught error:",e,t)}render(){return this.state.hasError?A.jsx("div",{className:"min-h-screen flex items-center justify-center p-6 bg-slate-50",children:A.jsxs("div",{className:"max-w-md w-full bg-white rounded-[2.5rem] shadow-2xl p-10 text-center border border-red-100",children:[A.jsx("div",{className:"bg-red-50 w-20 h-20 rounded-3xl flex items-center justify-center mx-auto mb-8 border border-red-100 animate-pulse",children:A.jsx(rN,{className:"text-red-500",size:40})}),A.jsx("h1",{className:"text-2xl font-black text-slate-800 mb-4",children:""}),A.jsx("p",{className:"text-slate-500 mb-10 leading-relaxed font-medium",children:""}),this.state.error&&A.jsx("div",{className:"mb-8 p-4 bg-slate-50 rounded-2xl text-[10px] font-mono text-slate-400 overflow-auto max-h-32 text-left border border-slate-100 italic",children:this.state.error.toString()}),A.jsxs("button",{onClick:()=>window.location.reload(),className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-5 rounded-2xl transition-all shadow-xl shadow-indigo-100 flex items-center justify-center gap-3 active:scale-95",children:[A.jsx(R3,{size:24}),""]})]})}):this.props.children}}const O9=({user:n,currentRank:e,onSwitchUser:t})=>{const s=Ya(),[c,h]=ne.useState(!1),p=[{path:"/",label:"",icon:x3},{path:"/shop",label:"",icon:H3},{path:"/wishes",label:"",icon:ad},{path:"/history",label:"",icon:id}];return n.role===ea.ADMIN&&p.push({path:"/admin",label:"",icon:sd}),A.jsxs("nav",{className:"bg-white border-r border-slate-200 w-full md:w-64 md:fixed md:inset-y-0 h-auto md:h-full z-50 shadow-sm",children:[A.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("img",{src:"/wenhong_cramschool/wenhong_logo.jpg",className:"w-8 h-8 rounded-lg shadow-sm object-cover",alt:"logo"}),A.jsx("span",{className:"text-xl font-bold text-slate-800 tracking-tight",children:""})]}),A.jsx("button",{onClick:()=>h(!c),className:"md:hidden text-slate-600",children:c?A.jsx(ka,{}):A.jsx(A3,{})})]}),A.jsx("div",{className:`${c?"block":"hidden"} md:block p-4 space-y-2`,children:p.map(T=>{const w=T.icon,E=s.pathname===T.path;return A.jsxs(rd,{to:T.path,onClick:()=>h(!1),className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 ${E?"bg-indigo-50 text-indigo-700 font-bold shadow-sm":"text-slate-600 hover:bg-slate-50"}`,children:[A.jsx(w,{size:20}),A.jsx("span",{children:T.label})]},T.path)})}),A.jsxs("div",{className:`${c?"block":"hidden"} md:block absolute bottom-0 w-full p-6 border-t border-slate-100 bg-white`,children:[A.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[A.jsx("img",{src:n.avatar,className:"w-10 h-10 rounded-full border-2 border-slate-100 object-cover",alt:"avatar"}),A.jsxs("div",{className:"overflow-hidden",children:[A.jsx("p",{className:"font-bold text-slate-800 truncate text-sm",children:n.name}),A.jsxs("div",{className:`text-[9px] px-2 py-0.5 rounded-full inline-block text-white font-black ${e.color}`,children:[e.icon," ",e.name," Lv.",Math.floor(n.totalEarned/500)+1]})]})]}),A.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-indigo-600 hover:text-indigo-800 transition-colors text-xs font-bold w-full bg-indigo-50 p-2 rounded-lg justify-center mb-2",children:[A.jsx(E3,{size:14}),A.jsx("span",{children:""})]}),A.jsxs(rd,{to:"/settings",className:"flex items-center gap-2 text-slate-400 hover:text-slate-600 transition-colors text-xs font-bold w-full p-2 justify-center",children:[A.jsx(j3,{size:14}),A.jsx("span",{children:""})]})]})]})},D9=()=>{const[n,e]=ne.useState(I_()),t=n?Vo.reduce((h,p)=>n.totalEarned>=p.threshold?p:h,Vo[0]):Vo[0],s=()=>{const h=I_();h&&e(h)},c=()=>{RD(),e(null)};return A.jsx(R9,{children:A.jsx(fN,{children:n?A.jsx(RI,{children:A.jsxs("div",{className:"min-h-screen flex flex-col md:flex-row bg-[#fbfcfd]",children:[A.jsx(O9,{user:n,currentRank:t,onSwitchUser:c}),A.jsx("main",{className:"flex-1 md:ml-64 p-4 md:p-8",children:A.jsx("div",{className:"max-w-6xl mx-auto",children:A.jsxs(aI,{children:[A.jsx(xl,{path:"/",element:A.jsx(FM,{user:n,rank:t,onUserUpdate:s})}),A.jsx(xl,{path:"/shop",element:A.jsx(zM,{user:n,onUserUpdate:s})}),A.jsx(xl,{path:"/wishes",element:A.jsx(I9,{user:n,onUserUpdate:s})}),A.jsx(xl,{path:"/history",element:A.jsx(JM,{user:n})}),A.jsx(xl,{path:"/admin",element:n.role===ea.ADMIN?A.jsx(S9,{onRefresh:s}):A.jsx(iI,{to:"/",replace:!0})}),A.jsx(xl,{path:"/settings",element:A.jsx(nM,{user:n,onUserUpdate:s})})]})})})]})}):A.jsx(N9,{onLogin:e})})})},MT=document.getElementById("root");if(!MT)throw new Error("Could not find root element to mount to");const M9=lC.createRoot(MT),P9=()=>A.jsxs(A.Fragment,{children:[A.jsx(D9,{}),!1]});M9.render(A.jsx(ir.StrictMode,{children:A.jsx(P9,{})}));
