function E3(i,e){for(var n=0;n<e.length;n++){const o=e[n];if(typeof o!="string"&&!Array.isArray(o)){for(const u in o)if(u!=="default"&&!(u in i)){const d=Object.getOwnPropertyDescriptor(o,u);d&&Object.defineProperty(i,u,d.get?d:{enumerable:!0,get:()=>o[u]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const y of d.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&o(y)}).observe(document,{childList:!0,subtree:!0});function n(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(u){if(u.ep)return;u.ep=!0;const d=n(u);fetch(u.href,d)}})();var Dh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function q1(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var z0={exports:{}},Fc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G2;function _3(){if(G2)return Fc;G2=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(o,u,d){var y=null;if(d!==void 0&&(y=""+d),u.key!==void 0&&(y=""+u.key),"key"in u){d={};for(var v in u)v!=="key"&&(d[v]=u[v])}else d=u;return u=d.ref,{$$typeof:i,type:o,key:y,ref:u!==void 0?u:null,props:d}}return Fc.Fragment=e,Fc.jsx=n,Fc.jsxs=n,Fc}var q2;function w3(){return q2||(q2=1,z0.exports=_3()),z0.exports}var T=w3(),H0={exports:{}},mt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y2;function A3(){if(Y2)return mt;Y2=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),y=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),M=Symbol.iterator;function U(ie){return ie===null||typeof ie!="object"?null:(ie=M&&ie[M]||ie["@@iterator"],typeof ie=="function"?ie:null)}var X={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},K=Object.assign,z={};function oe(ie,Ae,ke){this.props=ie,this.context=Ae,this.refs=z,this.updater=ke||X}oe.prototype.isReactComponent={},oe.prototype.setState=function(ie,Ae){if(typeof ie!="object"&&typeof ie!="function"&&ie!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ie,Ae,"setState")},oe.prototype.forceUpdate=function(ie){this.updater.enqueueForceUpdate(this,ie,"forceUpdate")};function he(){}he.prototype=oe.prototype;function ee(ie,Ae,ke){this.props=ie,this.context=Ae,this.refs=z,this.updater=ke||X}var ae=ee.prototype=new he;ae.constructor=ee,K(ae,oe.prototype),ae.isPureReactComponent=!0;var Ve=Array.isArray;function Ne(){}var j={H:null,A:null,T:null,S:null},G=Object.prototype.hasOwnProperty;function V(ie,Ae,ke){var Ue=ke.ref;return{$$typeof:i,type:ie,key:Ae,ref:Ue!==void 0?Ue:null,props:ke}}function te(ie,Ae){return V(ie.type,Ae,ie.props)}function W(ie){return typeof ie=="object"&&ie!==null&&ie.$$typeof===i}function J(ie){var Ae={"=":"=0",":":"=2"};return"$"+ie.replace(/[=:]/g,function(ke){return Ae[ke]})}var Y=/\/+/g;function et(ie,Ae){return typeof ie=="object"&&ie!==null&&ie.key!=null?J(""+ie.key):Ae.toString(36)}function me(ie){switch(ie.status){case"fulfilled":return ie.value;case"rejected":throw ie.reason;default:switch(typeof ie.status=="string"?ie.then(Ne,Ne):(ie.status="pending",ie.then(function(Ae){ie.status==="pending"&&(ie.status="fulfilled",ie.value=Ae)},function(Ae){ie.status==="pending"&&(ie.status="rejected",ie.reason=Ae)})),ie.status){case"fulfilled":return ie.value;case"rejected":throw ie.reason}}throw ie}function pe(ie,Ae,ke,Ue,tt){var Le=typeof ie;(Le==="undefined"||Le==="boolean")&&(ie=null);var At=!1;if(ie===null)At=!0;else switch(Le){case"bigint":case"string":case"number":At=!0;break;case"object":switch(ie.$$typeof){case i:case e:At=!0;break;case S:return At=ie._init,pe(At(ie._payload),Ae,ke,Ue,tt)}}if(At)return tt=tt(ie),At=Ue===""?"."+et(ie,0):Ue,Ve(tt)?(ke="",At!=null&&(ke=At.replace(Y,"$&/")+"/"),pe(tt,Ae,ke,"",function(Li){return Li})):tt!=null&&(W(tt)&&(tt=te(tt,ke+(tt.key==null||ie&&ie.key===tt.key?"":(""+tt.key).replace(Y,"$&/")+"/")+At)),Ae.push(tt)),1;At=0;var _t=Ue===""?".":Ue+":";if(Ve(ie))for(var Nt=0;Nt<ie.length;Nt++)Ue=ie[Nt],Le=_t+et(Ue,Nt),At+=pe(Ue,Ae,ke,Le,tt);else if(Nt=U(ie),typeof Nt=="function")for(ie=Nt.call(ie),Nt=0;!(Ue=ie.next()).done;)Ue=Ue.value,Le=_t+et(Ue,Nt++),At+=pe(Ue,Ae,ke,Le,tt);else if(Le==="object"){if(typeof ie.then=="function")return pe(me(ie),Ae,ke,Ue,tt);throw Ae=String(ie),Error("Objects are not valid as a React child (found: "+(Ae==="[object Object]"?"object with keys {"+Object.keys(ie).join(", ")+"}":Ae)+"). If you meant to render a collection of children, use an array instead.")}return At}function be(ie,Ae,ke){if(ie==null)return ie;var Ue=[],tt=0;return pe(ie,Ue,"","",function(Le){return Ae.call(ke,Le,tt++)}),Ue}function qe(ie){if(ie._status===-1){var Ae=ie._result;Ae=Ae(),Ae.then(function(ke){(ie._status===0||ie._status===-1)&&(ie._status=1,ie._result=ke)},function(ke){(ie._status===0||ie._status===-1)&&(ie._status=2,ie._result=ke)}),ie._status===-1&&(ie._status=0,ie._result=Ae)}if(ie._status===1)return ie._result.default;throw ie._result}var ot=typeof reportError=="function"?reportError:function(ie){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ie=="object"&&ie!==null&&typeof ie.message=="string"?String(ie.message):String(ie),error:ie});if(!window.dispatchEvent(Ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ie);return}console.error(ie)},dt={map:be,forEach:function(ie,Ae,ke){be(ie,function(){Ae.apply(this,arguments)},ke)},count:function(ie){var Ae=0;return be(ie,function(){Ae++}),Ae},toArray:function(ie){return be(ie,function(Ae){return Ae})||[]},only:function(ie){if(!W(ie))throw Error("React.Children.only expected to receive a single React element child.");return ie}};return mt.Activity=I,mt.Children=dt,mt.Component=oe,mt.Fragment=n,mt.Profiler=u,mt.PureComponent=ee,mt.StrictMode=o,mt.Suspense=b,mt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,mt.__COMPILER_RUNTIME={__proto__:null,c:function(ie){return j.H.useMemoCache(ie)}},mt.cache=function(ie){return function(){return ie.apply(null,arguments)}},mt.cacheSignal=function(){return null},mt.cloneElement=function(ie,Ae,ke){if(ie==null)throw Error("The argument must be a React element, but you passed "+ie+".");var Ue=K({},ie.props),tt=ie.key;if(Ae!=null)for(Le in Ae.key!==void 0&&(tt=""+Ae.key),Ae)!G.call(Ae,Le)||Le==="key"||Le==="__self"||Le==="__source"||Le==="ref"&&Ae.ref===void 0||(Ue[Le]=Ae[Le]);var Le=arguments.length-2;if(Le===1)Ue.children=ke;else if(1<Le){for(var At=Array(Le),_t=0;_t<Le;_t++)At[_t]=arguments[_t+2];Ue.children=At}return V(ie.type,tt,Ue)},mt.createContext=function(ie){return ie={$$typeof:y,_currentValue:ie,_currentValue2:ie,_threadCount:0,Provider:null,Consumer:null},ie.Provider=ie,ie.Consumer={$$typeof:d,_context:ie},ie},mt.createElement=function(ie,Ae,ke){var Ue,tt={},Le=null;if(Ae!=null)for(Ue in Ae.key!==void 0&&(Le=""+Ae.key),Ae)G.call(Ae,Ue)&&Ue!=="key"&&Ue!=="__self"&&Ue!=="__source"&&(tt[Ue]=Ae[Ue]);var At=arguments.length-2;if(At===1)tt.children=ke;else if(1<At){for(var _t=Array(At),Nt=0;Nt<At;Nt++)_t[Nt]=arguments[Nt+2];tt.children=_t}if(ie&&ie.defaultProps)for(Ue in At=ie.defaultProps,At)tt[Ue]===void 0&&(tt[Ue]=At[Ue]);return V(ie,Le,tt)},mt.createRef=function(){return{current:null}},mt.forwardRef=function(ie){return{$$typeof:v,render:ie}},mt.isValidElement=W,mt.lazy=function(ie){return{$$typeof:S,_payload:{_status:-1,_result:ie},_init:qe}},mt.memo=function(ie,Ae){return{$$typeof:_,type:ie,compare:Ae===void 0?null:Ae}},mt.startTransition=function(ie){var Ae=j.T,ke={};j.T=ke;try{var Ue=ie(),tt=j.S;tt!==null&&tt(ke,Ue),typeof Ue=="object"&&Ue!==null&&typeof Ue.then=="function"&&Ue.then(Ne,ot)}catch(Le){ot(Le)}finally{Ae!==null&&ke.types!==null&&(Ae.types=ke.types),j.T=Ae}},mt.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},mt.use=function(ie){return j.H.use(ie)},mt.useActionState=function(ie,Ae,ke){return j.H.useActionState(ie,Ae,ke)},mt.useCallback=function(ie,Ae){return j.H.useCallback(ie,Ae)},mt.useContext=function(ie){return j.H.useContext(ie)},mt.useDebugValue=function(){},mt.useDeferredValue=function(ie,Ae){return j.H.useDeferredValue(ie,Ae)},mt.useEffect=function(ie,Ae){return j.H.useEffect(ie,Ae)},mt.useEffectEvent=function(ie){return j.H.useEffectEvent(ie)},mt.useId=function(){return j.H.useId()},mt.useImperativeHandle=function(ie,Ae,ke){return j.H.useImperativeHandle(ie,Ae,ke)},mt.useInsertionEffect=function(ie,Ae){return j.H.useInsertionEffect(ie,Ae)},mt.useLayoutEffect=function(ie,Ae){return j.H.useLayoutEffect(ie,Ae)},mt.useMemo=function(ie,Ae){return j.H.useMemo(ie,Ae)},mt.useOptimistic=function(ie,Ae){return j.H.useOptimistic(ie,Ae)},mt.useReducer=function(ie,Ae,ke){return j.H.useReducer(ie,Ae,ke)},mt.useRef=function(ie){return j.H.useRef(ie)},mt.useState=function(ie){return j.H.useState(ie)},mt.useSyncExternalStore=function(ie,Ae,ke){return j.H.useSyncExternalStore(ie,Ae,ke)},mt.useTransition=function(){return j.H.useTransition()},mt.version="19.2.3",mt}var X2;function Y1(){return X2||(X2=1,H0.exports=A3()),H0.exports}var se=Y1();const ri=q1(se);var G0={exports:{}},zc={},q0={exports:{}},Y0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K2;function b3(){return K2||(K2=1,(function(i){function e(pe,be){var qe=pe.length;pe.push(be);e:for(;0<qe;){var ot=qe-1>>>1,dt=pe[ot];if(0<u(dt,be))pe[ot]=be,pe[qe]=dt,qe=ot;else break e}}function n(pe){return pe.length===0?null:pe[0]}function o(pe){if(pe.length===0)return null;var be=pe[0],qe=pe.pop();if(qe!==be){pe[0]=qe;e:for(var ot=0,dt=pe.length,ie=dt>>>1;ot<ie;){var Ae=2*(ot+1)-1,ke=pe[Ae],Ue=Ae+1,tt=pe[Ue];if(0>u(ke,qe))Ue<dt&&0>u(tt,ke)?(pe[ot]=tt,pe[Ue]=qe,ot=Ue):(pe[ot]=ke,pe[Ae]=qe,ot=Ae);else if(Ue<dt&&0>u(tt,qe))pe[ot]=tt,pe[Ue]=qe,ot=Ue;else break e}}return be}function u(pe,be){var qe=pe.sortIndex-be.sortIndex;return qe!==0?qe:pe.id-be.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;i.unstable_now=function(){return d.now()}}else{var y=Date,v=y.now();i.unstable_now=function(){return y.now()-v}}var b=[],_=[],S=1,I=null,M=3,U=!1,X=!1,K=!1,z=!1,oe=typeof setTimeout=="function"?setTimeout:null,he=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;function ae(pe){for(var be=n(_);be!==null;){if(be.callback===null)o(_);else if(be.startTime<=pe)o(_),be.sortIndex=be.expirationTime,e(b,be);else break;be=n(_)}}function Ve(pe){if(K=!1,ae(pe),!X)if(n(b)!==null)X=!0,Ne||(Ne=!0,J());else{var be=n(_);be!==null&&me(Ve,be.startTime-pe)}}var Ne=!1,j=-1,G=5,V=-1;function te(){return z?!0:!(i.unstable_now()-V<G)}function W(){if(z=!1,Ne){var pe=i.unstable_now();V=pe;var be=!0;try{e:{X=!1,K&&(K=!1,he(j),j=-1),U=!0;var qe=M;try{t:{for(ae(pe),I=n(b);I!==null&&!(I.expirationTime>pe&&te());){var ot=I.callback;if(typeof ot=="function"){I.callback=null,M=I.priorityLevel;var dt=ot(I.expirationTime<=pe);if(pe=i.unstable_now(),typeof dt=="function"){I.callback=dt,ae(pe),be=!0;break t}I===n(b)&&o(b),ae(pe)}else o(b);I=n(b)}if(I!==null)be=!0;else{var ie=n(_);ie!==null&&me(Ve,ie.startTime-pe),be=!1}}break e}finally{I=null,M=qe,U=!1}be=void 0}}finally{be?J():Ne=!1}}}var J;if(typeof ee=="function")J=function(){ee(W)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,et=Y.port2;Y.port1.onmessage=W,J=function(){et.postMessage(null)}}else J=function(){oe(W,0)};function me(pe,be){j=oe(function(){pe(i.unstable_now())},be)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(pe){pe.callback=null},i.unstable_forceFrameRate=function(pe){0>pe||125<pe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<pe?Math.floor(1e3/pe):5},i.unstable_getCurrentPriorityLevel=function(){return M},i.unstable_next=function(pe){switch(M){case 1:case 2:case 3:var be=3;break;default:be=M}var qe=M;M=be;try{return pe()}finally{M=qe}},i.unstable_requestPaint=function(){z=!0},i.unstable_runWithPriority=function(pe,be){switch(pe){case 1:case 2:case 3:case 4:case 5:break;default:pe=3}var qe=M;M=pe;try{return be()}finally{M=qe}},i.unstable_scheduleCallback=function(pe,be,qe){var ot=i.unstable_now();switch(typeof qe=="object"&&qe!==null?(qe=qe.delay,qe=typeof qe=="number"&&0<qe?ot+qe:ot):qe=ot,pe){case 1:var dt=-1;break;case 2:dt=250;break;case 5:dt=1073741823;break;case 4:dt=1e4;break;default:dt=5e3}return dt=qe+dt,pe={id:S++,callback:be,priorityLevel:pe,startTime:qe,expirationTime:dt,sortIndex:-1},qe>ot?(pe.sortIndex=qe,e(_,pe),n(b)===null&&pe===n(_)&&(K?(he(j),j=-1):K=!0,me(Ve,qe-ot))):(pe.sortIndex=dt,e(b,pe),X||U||(X=!0,Ne||(Ne=!0,J()))),pe},i.unstable_shouldYield=te,i.unstable_wrapCallback=function(pe){var be=M;return function(){var qe=M;M=be;try{return pe.apply(this,arguments)}finally{M=qe}}}})(Y0)),Y0}var W2;function T3(){return W2||(W2=1,q0.exports=b3()),q0.exports}var X0={exports:{}},tr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q2;function v3(){if(Q2)return tr;Q2=1;var i=Y1();function e(b){var _="https://react.dev/errors/"+b;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)_+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+b+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var o={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},u=Symbol.for("react.portal");function d(b,_,S){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:I==null?null:""+I,children:b,containerInfo:_,implementation:S}}var y=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function v(b,_){if(b==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return tr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,tr.createPortal=function(b,_){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return d(b,_,null,S)},tr.flushSync=function(b){var _=y.T,S=o.p;try{if(y.T=null,o.p=2,b)return b()}finally{y.T=_,o.p=S,o.d.f()}},tr.preconnect=function(b,_){typeof b=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,o.d.C(b,_))},tr.prefetchDNS=function(b){typeof b=="string"&&o.d.D(b)},tr.preinit=function(b,_){if(typeof b=="string"&&_&&typeof _.as=="string"){var S=_.as,I=v(S,_.crossOrigin),M=typeof _.integrity=="string"?_.integrity:void 0,U=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;S==="style"?o.d.S(b,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:I,integrity:M,fetchPriority:U}):S==="script"&&o.d.X(b,{crossOrigin:I,integrity:M,fetchPriority:U,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},tr.preinitModule=function(b,_){if(typeof b=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var S=v(_.as,_.crossOrigin);o.d.M(b,{crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&o.d.M(b)},tr.preload=function(b,_){if(typeof b=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var S=_.as,I=v(S,_.crossOrigin);o.d.L(b,S,{crossOrigin:I,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},tr.preloadModule=function(b,_){if(typeof b=="string")if(_){var S=v(_.as,_.crossOrigin);o.d.m(b,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else o.d.m(b)},tr.requestFormReset=function(b){o.d.r(b)},tr.unstable_batchedUpdates=function(b,_){return b(_)},tr.useFormState=function(b,_,S){return y.H.useFormState(b,_,S)},tr.useFormStatus=function(){return y.H.useHostTransitionStatus()},tr.version="19.2.3",tr}var Z2;function C3(){if(Z2)return X0.exports;Z2=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),X0.exports=v3(),X0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J2;function S3(){if(J2)return zc;J2=1;var i=T3(),e=Y1(),n=C3();function o(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function d(t){var s=t,c=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(c=s.return),t=s.return;while(t)}return s.tag===3?c:null}function y(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function v(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function b(t){if(d(t)!==t)throw Error(o(188))}function _(t){var s=t.alternate;if(!s){if(s=d(t),s===null)throw Error(o(188));return s!==t?null:t}for(var c=t,g=s;;){var E=c.return;if(E===null)break;var A=E.alternate;if(A===null){if(g=E.return,g!==null){c=g;continue}break}if(E.child===A.child){for(A=E.child;A;){if(A===c)return b(E),t;if(A===g)return b(E),s;A=A.sibling}throw Error(o(188))}if(c.return!==g.return)c=E,g=A;else{for(var O=!1,k=E.child;k;){if(k===c){O=!0,c=E,g=A;break}if(k===g){O=!0,g=E,c=A;break}k=k.sibling}if(!O){for(k=A.child;k;){if(k===c){O=!0,c=A,g=E;break}if(k===g){O=!0,g=A,c=E;break}k=k.sibling}if(!O)throw Error(o(189))}}if(c.alternate!==g)throw Error(o(190))}if(c.tag!==3)throw Error(o(188));return c.stateNode.current===c?t:s}function S(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=S(t),s!==null)return s;t=t.sibling}return null}var I=Object.assign,M=Symbol.for("react.element"),U=Symbol.for("react.transitional.element"),X=Symbol.for("react.portal"),K=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),oe=Symbol.for("react.profiler"),he=Symbol.for("react.consumer"),ee=Symbol.for("react.context"),ae=Symbol.for("react.forward_ref"),Ve=Symbol.for("react.suspense"),Ne=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),te=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function J(t){return t===null||typeof t!="object"?null:(t=W&&t[W]||t["@@iterator"],typeof t=="function"?t:null)}var Y=Symbol.for("react.client.reference");function et(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Y?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case K:return"Fragment";case oe:return"Profiler";case z:return"StrictMode";case Ve:return"Suspense";case Ne:return"SuspenseList";case V:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case X:return"Portal";case ee:return t.displayName||"Context";case he:return(t._context.displayName||"Context")+".Consumer";case ae:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case j:return s=t.displayName||null,s!==null?s:et(t.type)||"Memo";case G:s=t._payload,t=t._init;try{return et(t(s))}catch{}}return null}var me=Array.isArray,pe=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,qe={pending:!1,data:null,method:null,action:null},ot=[],dt=-1;function ie(t){return{current:t}}function Ae(t){0>dt||(t.current=ot[dt],ot[dt]=null,dt--)}function ke(t,s){dt++,ot[dt]=t.current,t.current=s}var Ue=ie(null),tt=ie(null),Le=ie(null),At=ie(null);function _t(t,s){switch(ke(Le,s),ke(tt,t),ke(Ue,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?d2(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=d2(s),t=g2(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Ae(Ue),ke(Ue,t)}function Nt(){Ae(Ue),Ae(tt),Ae(Le)}function Li(t){t.memoizedState!==null&&ke(At,t);var s=Ue.current,c=g2(s,t.type);s!==c&&(ke(tt,t),ke(Ue,c))}function Sn(t){tt.current===t&&(Ae(Ue),Ae(tt)),At.current===t&&(Ae(At),kc._currentValue=qe)}var xr,Et;function fi(t){if(xr===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);xr=s&&s[1]||"",Et=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xr+t+Et}var di=!1;function Xi(t,s){if(!t||di)return"";di=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(s){var Se=function(){throw Error()};if(Object.defineProperty(Se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Se,[])}catch(we){var xe=we}Reflect.construct(t,[],Se)}else{try{Se.call()}catch(we){xe=we}t.call(Se.prototype)}}else{try{throw Error()}catch(we){xe=we}(Se=t())&&typeof Se.catch=="function"&&Se.catch(function(){})}}catch(we){if(we&&xe&&typeof we.stack=="string")return[we.stack,xe.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=g.DetermineComponentFrameRoot(),O=A[0],k=A[1];if(O&&k){var Q=O.split(`
`),ge=k.split(`
`);for(E=g=0;g<Q.length&&!Q[g].includes("DetermineComponentFrameRoot");)g++;for(;E<ge.length&&!ge[E].includes("DetermineComponentFrameRoot");)E++;if(g===Q.length||E===ge.length)for(g=Q.length-1,E=ge.length-1;1<=g&&0<=E&&Q[g]!==ge[E];)E--;for(;1<=g&&0<=E;g--,E--)if(Q[g]!==ge[E]){if(g!==1||E!==1)do if(g--,E--,0>E||Q[g]!==ge[E]){var Te=`
`+Q[g].replace(" at new "," at ");return t.displayName&&Te.includes("<anonymous>")&&(Te=Te.replace("<anonymous>",t.displayName)),Te}while(1<=g&&0<=E);break}}}finally{di=!1,Error.prepareStackTrace=c}return(c=t?t.displayName||t.name:"")?fi(c):""}function fn(t,s){switch(t.tag){case 26:case 27:case 5:return fi(t.type);case 16:return fi("Lazy");case 13:return t.child!==s&&s!==null?fi("Suspense Fallback"):fi("Suspense");case 19:return fi("SuspenseList");case 0:case 15:return Xi(t.type,!1);case 11:return Xi(t.type.render,!1);case 1:return Xi(t.type,!0);case 31:return fi("Activity");default:return""}}function Yt(t){try{var s="",c=null;do s+=fn(t,c),c=t,t=t.return;while(t);return s}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var We=Object.prototype.hasOwnProperty,_n=i.unstable_scheduleCallback,Fe=i.unstable_cancelCallback,ps=i.unstable_shouldYield,xs=i.unstable_requestPaint,mn=i.unstable_now,bi=i.unstable_getCurrentPriorityLevel,ai=i.unstable_ImmediatePriority,ys=i.unstable_UserBlockingPriority,gi=i.unstable_NormalPriority,Wn=i.unstable_LowPriority,Ns=i.unstable_IdlePriority,Kr=i.log,Rs=i.unstable_setDisableYieldValue,Ut=null,De=null;function Xt(t){if(typeof Kr=="function"&&Rs(t),De&&typeof De.setStrictMode=="function")try{De.setStrictMode(Ut,t)}catch{}}var nt=Math.clz32?Math.clz32:Es,sn=Math.log,sr=Math.LN2;function Es(t){return t>>>=0,t===0?32:31-(sn(t)/sr|0)|0}var ar=256,bt=262144,on=4194304;function Ki(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function or(t,s,c){var g=t.pendingLanes;if(g===0)return 0;var E=0,A=t.suspendedLanes,O=t.pingedLanes;t=t.warmLanes;var k=g&134217727;return k!==0?(g=k&~A,g!==0?E=Ki(g):(O&=k,O!==0?E=Ki(O):c||(c=k&~t,c!==0&&(E=Ki(c))))):(k=g&~A,k!==0?E=Ki(k):O!==0?E=Ki(O):c||(c=g&~t,c!==0&&(E=Ki(c)))),E===0?0:s!==0&&s!==E&&(s&A)===0&&(A=E&-E,c=s&-s,A>=c||A===32&&(c&4194048)!==0)?s:E}function In(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function Ks(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ln(){var t=on;return on<<=1,(on&62914560)===0&&(on=4194304),t}function Ti(t){for(var s=[],c=0;31>c;c++)s.push(t);return s}function yr(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Wi(t,s,c,g,E,A){var O=t.pendingLanes;t.pendingLanes=c,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=c,t.entangledLanes&=c,t.errorRecoveryDisabledLanes&=c,t.shellSuspendCounter=0;var k=t.entanglements,Q=t.expirationTimes,ge=t.hiddenUpdates;for(c=O&~c;0<c;){var Te=31-nt(c),Se=1<<Te;k[Te]=0,Q[Te]=-1;var xe=ge[Te];if(xe!==null)for(ge[Te]=null,Te=0;Te<xe.length;Te++){var we=xe[Te];we!==null&&(we.lane&=-536870913)}c&=~Se}g!==0&&_s(t,g,0),A!==0&&E===0&&t.tag!==0&&(t.suspendedLanes|=A&~(O&~s))}function _s(t,s,c){t.pendingLanes|=s,t.suspendedLanes&=~s;var g=31-nt(s);t.entangledLanes|=s,t.entanglements[g]=t.entanglements[g]|1073741824|c&261930}function lr(t,s){var c=t.entangledLanes|=s;for(t=t.entanglements;c;){var g=31-nt(c),E=1<<g;E&s|t[g]&s&&(t[g]|=s),c&=~E}}function ws(t,s){var c=s&-s;return c=(c&42)!==0?1:Pn(c),(c&(t.suspendedLanes|s))!==0?0:c}function Pn(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function vi(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Ci(){var t=be.p;return t!==0?t:(t=window.event,t===void 0?32:k2(t.type))}function je(t,s){var c=be.p;try{return be.p=t,s()}finally{be.p=c}}var mi=Math.random().toString(36).slice(2),vn="__reactFiber$"+mi,Vt="__reactProps$"+mi,Z="__reactContainer$"+mi,at="__reactEvents$"+mi,ct="__reactListeners$"+mi,zn="__reactHandles$"+mi,oi="__reactResources$"+mi,Qn="__reactMarker$"+mi;function Zn(t){delete t[vn],delete t[Vt],delete t[at],delete t[ct],delete t[zn]}function pn(t){var s=t[vn];if(s)return s;for(var c=t.parentNode;c;){if(s=c[Z]||c[vn]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(t=w2(t);t!==null;){if(c=t[vn])return c;t=w2(t)}return s}t=c,c=t.parentNode}return null}function Rt(t){if(t=t[vn]||t[Z]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function Bn(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(o(33))}function Jn(t){var s=t[oi];return s||(s=t[oi]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function $t(t){t[Qn]=!0}var Ie=new Set,To={};function en(t,s){Pi(t,s),Pi(t+"Capture",s)}function Pi(t,s){for(To[t]=s,t=0;t<s.length;t++)Ie.add(s[t])}var vo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),jt={},Mt={};function Ct(t){return We.call(Mt,t)?!0:We.call(jt,t)?!1:vo.test(t)?Mt[t]=!0:(jt[t]=!0,!1)}function Os(t,s,c){if(Ct(s))if(c===null)t.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var g=s.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+c)}}function Bi(t,s,c){if(c===null)t.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+c)}}function kn(t,s,c,g){if(g===null)t.removeAttribute(c);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(c);return}t.setAttributeNS(s,c,""+g)}}function Ot(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ki(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Co(t,s,c){var g=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var E=g.get,A=g.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return E.call(this)},set:function(O){c=""+O,A.call(this,O)}}),Object.defineProperty(t,s,{enumerable:g.enumerable}),{getValue:function(){return c},setValue:function(O){c=""+O},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function rt(t){if(!t._valueTracker){var s=ki(t)?"checked":"value";t._valueTracker=Co(t,s,""+t[s])}}function Qi(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var c=s.getValue(),g="";return t&&(g=ki(t)?t.checked?"true":"false":t.value),t=g,t!==c?(s.setValue(t),!0):!1}function Wr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Er=/[\n"\\]/g;function Tt(t){return t.replace(Er,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Hn(t,s,c,g,E,A,O,k){t.name="",O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?t.type=O:t.removeAttribute("type"),s!=null?O==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+Ot(s)):t.value!==""+Ot(s)&&(t.value=""+Ot(s)):O!=="submit"&&O!=="reset"||t.removeAttribute("value"),s!=null?H(t,O,Ot(s)):c!=null?H(t,O,Ot(c)):g!=null&&t.removeAttribute("value"),E==null&&A!=null&&(t.defaultChecked=!!A),E!=null&&(t.checked=E&&typeof E!="function"&&typeof E!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?t.name=""+Ot(k):t.removeAttribute("name")}function fe(t,s,c,g,E,A,O,k){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(t.type=A),s!=null||c!=null){if(!(A!=="submit"&&A!=="reset"||s!=null)){rt(t);return}c=c!=null?""+Ot(c):"",s=s!=null?""+Ot(s):c,k||s===t.value||(t.value=s),t.defaultValue=s}g=g??E,g=typeof g!="function"&&typeof g!="symbol"&&!!g,t.checked=k?t.checked:!!g,t.defaultChecked=!!g,O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(t.name=O),rt(t)}function H(t,s,c){s==="number"&&Wr(t.ownerDocument)===t||t.defaultValue===""+c||(t.defaultValue=""+c)}function Ye(t,s,c,g){if(t=t.options,s){s={};for(var E=0;E<c.length;E++)s["$"+c[E]]=!0;for(c=0;c<t.length;c++)E=s.hasOwnProperty("$"+t[c].value),t[c].selected!==E&&(t[c].selected=E),E&&g&&(t[c].defaultSelected=!0)}else{for(c=""+Ot(c),s=null,E=0;E<t.length;E++){if(t[E].value===c){t[E].selected=!0,g&&(t[E].defaultSelected=!0);return}s!==null||t[E].disabled||(s=t[E])}s!==null&&(s.selected=!0)}}function Gn(t,s,c){if(s!=null&&(s=""+Ot(s),s!==t.value&&(t.value=s),c==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=c!=null?""+Ot(c):""}function li(t,s,c,g){if(s==null){if(g!=null){if(c!=null)throw Error(o(92));if(me(g)){if(1<g.length)throw Error(o(93));g=g[0]}c=g}c==null&&(c=""),s=c}c=Ot(s),t.defaultValue=c,g=t.textContent,g===c&&g!==""&&g!==null&&(t.value=g),rt(t)}function Zi(t,s){if(s){var c=t.firstChild;if(c&&c===t.lastChild&&c.nodeType===3){c.nodeValue=s;return}}t.textContent=s}var Oa=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ri(t,s,c){var g=s.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?g?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":g?t.setProperty(s,c):typeof c!="number"||c===0||Oa.has(s)?s==="float"?t.cssFloat=c:t[s]=(""+c).trim():t[s]=c+"px"}function Qe(t,s,c){if(s!=null&&typeof s!="object")throw Error(o(62));if(t=t.style,c!=null){for(var g in c)!c.hasOwnProperty(g)||s!=null&&s.hasOwnProperty(g)||(g.indexOf("--")===0?t.setProperty(g,""):g==="float"?t.cssFloat="":t[g]="");for(var E in s)g=s[E],s.hasOwnProperty(E)&&c[E]!==g&&Ri(t,E,g)}else for(var A in s)s.hasOwnProperty(A)&&Ri(t,A,s[A])}function ln(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var So=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ds=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ms(t){return Ds.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Ji(){}var Ws=null;function _r(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var wn=null,$i=null;function er(t){var s=Rt(t);if(s&&(t=s.stateNode)){var c=t[Vt]||null;e:switch(t=s.stateNode,s.type){case"input":if(Hn(t,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),s=c.name,c.type==="radio"&&s!=null){for(c=t;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Tt(""+s)+'"][type="radio"]'),s=0;s<c.length;s++){var g=c[s];if(g!==t&&g.form===t.form){var E=g[Vt]||null;if(!E)throw Error(o(90));Hn(g,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(s=0;s<c.length;s++)g=c[s],g.form===t.form&&Qi(g)}break e;case"textarea":Gn(t,c.value,c.defaultValue);break e;case"select":s=c.value,s!=null&&Ye(t,!!c.multiple,s,!1)}}}var Ze=!1;function Ls(t,s,c){if(Ze)return t(s,c);Ze=!0;try{var g=t(s);return g}finally{if(Ze=!1,(wn!==null||$i!==null)&&(uh(),wn&&(s=wn,t=$i,$i=wn=null,er(s),t)))for(s=0;s<t.length;s++)er(t[s])}}function it(t,s){var c=t.stateNode;if(c===null)return null;var g=c[Vt]||null;if(g===null)return null;c=g[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(t=t.type,g=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!g;break e;default:t=!1}if(t)return null;if(c&&typeof c!="function")throw Error(o(231,s,typeof c));return c}var cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qs=!1;if(cn)try{var tn={};Object.defineProperty(tn,"passive",{get:function(){Qs=!0}}),window.addEventListener("test",tn,tn),window.removeEventListener("test",tn,tn)}catch{Qs=!1}var Mr=null,Lr=null,Zs=null;function As(){if(Zs)return Zs;var t,s=Lr,c=s.length,g,E="value"in Mr?Mr.value:Mr.textContent,A=E.length;for(t=0;t<c&&s[t]===E[t];t++);var O=c-t;for(g=1;g<=O&&s[c-g]===E[A-g];g++);return Zs=E.slice(t,1<g?1-g:void 0)}function Pr(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function cr(){return!0}function wr(){return!1}function qn(t){function s(c,g,E,A,O){this._reactName=c,this._targetInst=E,this.type=g,this.nativeEvent=A,this.target=O,this.currentTarget=null;for(var k in t)t.hasOwnProperty(k)&&(c=t[k],this[k]=c?c(A):A[k]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?cr:wr,this.isPropagationStopped=wr,this}return I(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=cr)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=cr)},persist:function(){},isPersistent:cr}),s}var ur={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nn=qn(ur),bs=I({},ur,{view:0,detail:0}),Da=qn(bs),Ts,Ma,Qr,La=I({},bs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Qr&&(Qr&&t.type==="mousemove"?(Ts=t.screenX-Qr.screenX,Ma=t.screenY-Qr.screenY):Ma=Ts=0,Qr=t),Ts)},movementY:function(t){return"movementY"in t?t.movementY:Ma}}),Qt=qn(La),Ps=I({},La,{dataTransfer:0}),Js=qn(Ps),Br=I({},bs,{relatedTarget:0}),$s=qn(Br),ye=I({},ur,{animationName:0,elapsedTime:0,pseudoElement:0}),gt=qn(ye),Un=I({},ur,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ea=qn(Un),Io=I({},ur,{data:0}),Zr=qn(Io),al={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ol={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pa={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vn(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Pa[t])?!!s[t]:!1}function Jr(){return Vn}var Dt=I({},bs,{key:function(t){if(t.key){var s=al[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Pr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ol[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jr,charCode:function(t){return t.type==="keypress"?Pr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Pr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ta=qn(Dt),$r=I({},La,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lt=qn($r),p=I({},bs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jr}),N=qn(p),D=I({},ur,{propertyName:0,elapsedTime:0,pseudoElement:0}),F=qn(D),ce=I({},La,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),_e=qn(ce),Be=I({},ur,{newState:0,oldState:0}),ut=qn(Be),jn=[9,13,27,32],Kt=cn&&"CompositionEvent"in window,An=null;cn&&"documentMode"in document&&(An=document.documentMode);var hr=cn&&"TextEvent"in window&&!An,es=cn&&(!Kt||An&&8<An&&11>=An),Oi=" ",fr=!1;function na(t,s){switch(t){case"keyup":return jn.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ts(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ba=!1;function Bs(t,s){switch(t){case"compositionend":return ts(s);case"keypress":return s.which!==32?null:(fr=!0,Oi);case"textInput":return t=s.data,t===Oi&&fr?null:t;default:return null}}function ll(t,s){if(Ba)return t==="compositionend"||!Kt&&na(t,s)?(t=As(),Zs=Lr=Mr=null,Ba=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return es&&s.locale!=="ko"?null:s.data;default:return null}}var Ar={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oc(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Ar[t.type]:s==="textarea"}function kr(t,s,c,g){wn?$i?$i.push(g):$i=[g]:wn=g,s=xh(s,"onChange"),0<s.length&&(c=new Nn("onChange","change",null,c,g),t.push({event:c,listeners:s}))}var No=null,ia=null;function td(t){o2(t,0)}function Ro(t){var s=Bn(t);if(Qi(s))return t}function Ur(t,s){if(t==="change")return s}var Iu=!1;if(cn){var Oo;if(cn){var ra="oninput"in document;if(!ra){var Ft=document.createElement("div");Ft.setAttribute("oninput","return;"),ra=typeof Ft.oninput=="function"}Oo=ra}else Oo=!1;Iu=Oo&&(!document.documentMode||9<document.documentMode)}function Do(){No&&(No.detachEvent("onpropertychange",L),ia=No=null)}function L(t){if(t.propertyName==="value"&&Ro(ia)){var s=[];kr(s,ia,t,_r(t)),Ls(td,s)}}function r(t,s,c){t==="focusin"?(Do(),No=s,ia=c,No.attachEvent("onpropertychange",L)):t==="focusout"&&Do()}function a(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ro(ia)}function l(t,s){if(t==="click")return Ro(s)}function h(t,s){if(t==="input"||t==="change")return Ro(s)}function f(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var m=typeof Object.is=="function"?Object.is:f;function x(t,s){if(m(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var c=Object.keys(t),g=Object.keys(s);if(c.length!==g.length)return!1;for(g=0;g<c.length;g++){var E=c[g];if(!We.call(s,E)||!m(t[E],s[E]))return!1}return!0}function w(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function C(t,s){var c=w(t);t=0;for(var g;c;){if(c.nodeType===3){if(g=t+c.textContent.length,t<=s&&g>=s)return{node:c,offset:s-t};t=g}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=w(c)}}function R(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?R(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function P(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=Wr(t.document);s instanceof t.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)t=s.contentWindow;else break;s=Wr(t.document)}return s}function B(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var q=cn&&"documentMode"in document&&11>=document.documentMode,$=null,ne=null,ue=null,Ee=!1;function Pe(t,s,c){var g=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Ee||$==null||$!==Wr(g)||(g=$,"selectionStart"in g&&B(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),ue&&x(ue,g)||(ue=g,g=xh(ne,"onSelect"),0<g.length&&(s=new Nn("onSelect","select",null,s,c),t.push({event:s,listeners:g}),s.target=$)))}function Me(t,s){var c={};return c[t.toLowerCase()]=s.toLowerCase(),c["Webkit"+t]="webkit"+s,c["Moz"+t]="moz"+s,c}var Oe={animationend:Me("Animation","AnimationEnd"),animationiteration:Me("Animation","AnimationIteration"),animationstart:Me("Animation","AnimationStart"),transitionrun:Me("Transition","TransitionRun"),transitionstart:Me("Transition","TransitionStart"),transitioncancel:Me("Transition","TransitionCancel"),transitionend:Me("Transition","TransitionEnd")},St={},ht={};cn&&(ht=document.createElement("div").style,"AnimationEvent"in window||(delete Oe.animationend.animation,delete Oe.animationiteration.animation,delete Oe.animationstart.animation),"TransitionEvent"in window||delete Oe.transitionend.transition);function $n(t){if(St[t])return St[t];if(!Oe[t])return t;var s=Oe[t],c;for(c in s)if(s.hasOwnProperty(c)&&c in ht)return St[t]=s[c];return t}var br=$n("animationend"),Ui=$n("animationiteration"),un=$n("animationstart"),Si=$n("transitionrun"),dr=$n("transitionstart"),ka=$n("transitioncancel"),sa=$n("transitionend"),Nu=new Map,lc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");lc.push("scrollEnd");function vs(t,s){Nu.set(t,s),en(s,[t])}var Ru=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ns=[],cl=0,nd=0;function Ou(){for(var t=cl,s=nd=cl=0;s<t;){var c=ns[s];ns[s++]=null;var g=ns[s];ns[s++]=null;var E=ns[s];ns[s++]=null;var A=ns[s];if(ns[s++]=null,g!==null&&E!==null){var O=g.pending;O===null?E.next=E:(E.next=O.next,O.next=E),g.pending=E}A!==0&&zg(c,E,A)}}function Du(t,s,c,g){ns[cl++]=t,ns[cl++]=s,ns[cl++]=c,ns[cl++]=g,nd|=g,t.lanes|=g,t=t.alternate,t!==null&&(t.lanes|=g)}function id(t,s,c,g){return Du(t,s,c,g),Mu(t)}function Mo(t,s){return Du(t,null,null,s),Mu(t)}function zg(t,s,c){t.lanes|=c;var g=t.alternate;g!==null&&(g.lanes|=c);for(var E=!1,A=t.return;A!==null;)A.childLanes|=c,g=A.alternate,g!==null&&(g.childLanes|=c),A.tag===22&&(t=A.stateNode,t===null||t._visibility&1||(E=!0)),t=A,A=A.return;return t.tag===3?(A=t.stateNode,E&&s!==null&&(E=31-nt(c),t=A.hiddenUpdates,g=t[E],g===null?t[E]=[s]:g.push(s),s.lane=c|536870912),A):null}function Mu(t){if(50<Rc)throw Rc=0,f0=null,Error(o(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var ul={};function nb(t,s,c,g){this.tag=t,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vr(t,s,c,g){return new nb(t,s,c,g)}function rd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function aa(t,s){var c=t.alternate;return c===null?(c=Vr(t.tag,s,t.key,t.mode),c.elementType=t.elementType,c.type=t.type,c.stateNode=t.stateNode,c.alternate=t,t.alternate=c):(c.pendingProps=s,c.type=t.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=t.flags&65011712,c.childLanes=t.childLanes,c.lanes=t.lanes,c.child=t.child,c.memoizedProps=t.memoizedProps,c.memoizedState=t.memoizedState,c.updateQueue=t.updateQueue,s=t.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=t.sibling,c.index=t.index,c.ref=t.ref,c.refCleanup=t.refCleanup,c}function Hg(t,s){t.flags&=65011714;var c=t.alternate;return c===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=c.childLanes,t.lanes=c.lanes,t.child=c.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=c.memoizedProps,t.memoizedState=c.memoizedState,t.updateQueue=c.updateQueue,t.type=c.type,s=c.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function Lu(t,s,c,g,E,A){var O=0;if(g=t,typeof t=="function")rd(t)&&(O=1);else if(typeof t=="string")O=o3(t,c,Ue.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case V:return t=Vr(31,c,s,E),t.elementType=V,t.lanes=A,t;case K:return Lo(c.children,E,A,s);case z:O=8,E|=24;break;case oe:return t=Vr(12,c,s,E|2),t.elementType=oe,t.lanes=A,t;case Ve:return t=Vr(13,c,s,E),t.elementType=Ve,t.lanes=A,t;case Ne:return t=Vr(19,c,s,E),t.elementType=Ne,t.lanes=A,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ee:O=10;break e;case he:O=9;break e;case ae:O=11;break e;case j:O=14;break e;case G:O=16,g=null;break e}O=29,c=Error(o(130,t===null?"null":typeof t,"")),g=null}return s=Vr(O,c,s,E),s.elementType=t,s.type=g,s.lanes=A,s}function Lo(t,s,c,g){return t=Vr(7,t,g,s),t.lanes=c,t}function sd(t,s,c){return t=Vr(6,t,null,s),t.lanes=c,t}function Gg(t){var s=Vr(18,null,null,0);return s.stateNode=t,s}function ad(t,s,c){return s=Vr(4,t.children!==null?t.children:[],t.key,s),s.lanes=c,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var qg=new WeakMap;function is(t,s){if(typeof t=="object"&&t!==null){var c=qg.get(t);return c!==void 0?c:(s={value:t,source:s,stack:Yt(s)},qg.set(t,s),s)}return{value:t,source:s,stack:Yt(s)}}var hl=[],fl=0,Pu=null,cc=0,rs=[],ss=0,Ua=null,ks=1,Us="";function oa(t,s){hl[fl++]=cc,hl[fl++]=Pu,Pu=t,cc=s}function Yg(t,s,c){rs[ss++]=ks,rs[ss++]=Us,rs[ss++]=Ua,Ua=t;var g=ks;t=Us;var E=32-nt(g)-1;g&=~(1<<E),c+=1;var A=32-nt(s)+E;if(30<A){var O=E-E%5;A=(g&(1<<O)-1).toString(32),g>>=O,E-=O,ks=1<<32-nt(s)+E|c<<E|g,Us=A+t}else ks=1<<A|c<<E|g,Us=t}function od(t){t.return!==null&&(oa(t,1),Yg(t,1,0))}function ld(t){for(;t===Pu;)Pu=hl[--fl],hl[fl]=null,cc=hl[--fl],hl[fl]=null;for(;t===Ua;)Ua=rs[--ss],rs[ss]=null,Us=rs[--ss],rs[ss]=null,ks=rs[--ss],rs[ss]=null}function Xg(t,s){rs[ss++]=ks,rs[ss++]=Us,rs[ss++]=Ua,ks=s.id,Us=s.overflow,Ua=t}var Vi=null,Rn=null,Wt=!1,Va=null,as=!1,cd=Error(o(519));function ja(t){var s=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw uc(is(s,t)),cd}function Kg(t){var s=t.stateNode,c=t.type,g=t.memoizedProps;switch(s[vn]=t,s[Vt]=g,c){case"dialog":Bt("cancel",s),Bt("close",s);break;case"iframe":case"object":case"embed":Bt("load",s);break;case"video":case"audio":for(c=0;c<Dc.length;c++)Bt(Dc[c],s);break;case"source":Bt("error",s);break;case"img":case"image":case"link":Bt("error",s),Bt("load",s);break;case"details":Bt("toggle",s);break;case"input":Bt("invalid",s),fe(s,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":Bt("invalid",s);break;case"textarea":Bt("invalid",s),li(s,g.value,g.defaultValue,g.children)}c=g.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||s.textContent===""+c||g.suppressHydrationWarning===!0||h2(s.textContent,c)?(g.popover!=null&&(Bt("beforetoggle",s),Bt("toggle",s)),g.onScroll!=null&&Bt("scroll",s),g.onScrollEnd!=null&&Bt("scrollend",s),g.onClick!=null&&(s.onclick=Ji),s=!0):s=!1,s||ja(t,!0)}function Wg(t){for(Vi=t.return;Vi;)switch(Vi.tag){case 5:case 31:case 13:as=!1;return;case 27:case 3:as=!0;return;default:Vi=Vi.return}}function dl(t){if(t!==Vi)return!1;if(!Wt)return Wg(t),Wt=!0,!1;var s=t.tag,c;if((c=s!==3&&s!==27)&&((c=s===5)&&(c=t.type,c=!(c!=="form"&&c!=="button")||S0(t.type,t.memoizedProps)),c=!c),c&&Rn&&ja(t),Wg(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));Rn=_2(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));Rn=_2(t)}else s===27?(s=Rn,eo(t.type)?(t=D0,D0=null,Rn=t):Rn=s):Rn=Vi?ls(t.stateNode.nextSibling):null;return!0}function Po(){Rn=Vi=null,Wt=!1}function ud(){var t=Va;return t!==null&&(Sr===null?Sr=t:Sr.push.apply(Sr,t),Va=null),t}function uc(t){Va===null?Va=[t]:Va.push(t)}var hd=ie(null),Bo=null,la=null;function Fa(t,s,c){ke(hd,s._currentValue),s._currentValue=c}function ca(t){t._currentValue=hd.current,Ae(hd)}function fd(t,s,c){for(;t!==null;){var g=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,g!==null&&(g.childLanes|=s)):g!==null&&(g.childLanes&s)!==s&&(g.childLanes|=s),t===c)break;t=t.return}}function dd(t,s,c,g){var E=t.child;for(E!==null&&(E.return=t);E!==null;){var A=E.dependencies;if(A!==null){var O=E.child;A=A.firstContext;e:for(;A!==null;){var k=A;A=E;for(var Q=0;Q<s.length;Q++)if(k.context===s[Q]){A.lanes|=c,k=A.alternate,k!==null&&(k.lanes|=c),fd(A.return,c,t),g||(O=null);break e}A=k.next}}else if(E.tag===18){if(O=E.return,O===null)throw Error(o(341));O.lanes|=c,A=O.alternate,A!==null&&(A.lanes|=c),fd(O,c,t),O=null}else O=E.child;if(O!==null)O.return=E;else for(O=E;O!==null;){if(O===t){O=null;break}if(E=O.sibling,E!==null){E.return=O.return,O=E;break}O=O.return}E=O}}function gl(t,s,c,g){t=null;for(var E=s,A=!1;E!==null;){if(!A){if((E.flags&524288)!==0)A=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var O=E.alternate;if(O===null)throw Error(o(387));if(O=O.memoizedProps,O!==null){var k=E.type;m(E.pendingProps.value,O.value)||(t!==null?t.push(k):t=[k])}}else if(E===At.current){if(O=E.alternate,O===null)throw Error(o(387));O.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(t!==null?t.push(kc):t=[kc])}E=E.return}t!==null&&dd(s,t,c,g),s.flags|=262144}function Bu(t){for(t=t.firstContext;t!==null;){if(!m(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ko(t){Bo=t,la=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function ji(t){return Qg(Bo,t)}function ku(t,s){return Bo===null&&ko(t),Qg(t,s)}function Qg(t,s){var c=s._currentValue;if(s={context:s,memoizedValue:c,next:null},la===null){if(t===null)throw Error(o(308));la=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else la=la.next=s;return c}var ib=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(c,g){t.push(g)}};this.abort=function(){s.aborted=!0,t.forEach(function(c){return c()})}},rb=i.unstable_scheduleCallback,sb=i.unstable_NormalPriority,pi={$$typeof:ee,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gd(){return{controller:new ib,data:new Map,refCount:0}}function hc(t){t.refCount--,t.refCount===0&&rb(sb,function(){t.controller.abort()})}var fc=null,md=0,ml=0,pl=null;function ab(t,s){if(fc===null){var c=fc=[];md=0,ml=y0(),pl={status:"pending",value:void 0,then:function(g){c.push(g)}}}return md++,s.then(Zg,Zg),s}function Zg(){if(--md===0&&fc!==null){pl!==null&&(pl.status="fulfilled");var t=fc;fc=null,ml=0,pl=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function ob(t,s){var c=[],g={status:"pending",value:null,reason:null,then:function(E){c.push(E)}};return t.then(function(){g.status="fulfilled",g.value=s;for(var E=0;E<c.length;E++)(0,c[E])(s)},function(E){for(g.status="rejected",g.reason=E,E=0;E<c.length;E++)(0,c[E])(void 0)}),g}var Jg=pe.S;pe.S=function(t,s){Pp=mn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&ab(t,s),Jg!==null&&Jg(t,s)};var Uo=ie(null);function pd(){var t=Uo.current;return t!==null?t:bn.pooledCache}function Uu(t,s){s===null?ke(Uo,Uo.current):ke(Uo,s.pool)}function $g(){var t=pd();return t===null?null:{parent:pi._currentValue,pool:t}}var xl=Error(o(460)),xd=Error(o(474)),Vu=Error(o(542)),ju={then:function(){}};function em(t){return t=t.status,t==="fulfilled"||t==="rejected"}function tm(t,s,c){switch(c=t[c],c===void 0?t.push(s):c!==s&&(s.then(Ji,Ji),s=c),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,im(t),t;default:if(typeof s.status=="string")s.then(Ji,Ji);else{if(t=bn,t!==null&&100<t.shellSuspendCounter)throw Error(o(482));t=s,t.status="pending",t.then(function(g){if(s.status==="pending"){var E=s;E.status="fulfilled",E.value=g}},function(g){if(s.status==="pending"){var E=s;E.status="rejected",E.reason=g}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,im(t),t}throw jo=s,xl}}function Vo(t){try{var s=t._init;return s(t._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(jo=c,xl):c}}var jo=null;function nm(){if(jo===null)throw Error(o(459));var t=jo;return jo=null,t}function im(t){if(t===xl||t===Vu)throw Error(o(483))}var yl=null,dc=0;function Fu(t){var s=dc;return dc+=1,yl===null&&(yl=[]),tm(yl,t,s)}function gc(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function zu(t,s){throw s.$$typeof===M?Error(o(525)):(t=Object.prototype.toString.call(s),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function rm(t){function s(le,re){if(t){var de=le.deletions;de===null?(le.deletions=[re],le.flags|=16):de.push(re)}}function c(le,re){if(!t)return null;for(;re!==null;)s(le,re),re=re.sibling;return null}function g(le){for(var re=new Map;le!==null;)le.key!==null?re.set(le.key,le):re.set(le.index,le),le=le.sibling;return re}function E(le,re){return le=aa(le,re),le.index=0,le.sibling=null,le}function A(le,re,de){return le.index=de,t?(de=le.alternate,de!==null?(de=de.index,de<re?(le.flags|=67108866,re):de):(le.flags|=67108866,re)):(le.flags|=1048576,re)}function O(le){return t&&le.alternate===null&&(le.flags|=67108866),le}function k(le,re,de,ve){return re===null||re.tag!==6?(re=sd(de,le.mode,ve),re.return=le,re):(re=E(re,de),re.return=le,re)}function Q(le,re,de,ve){var Je=de.type;return Je===K?Te(le,re,de.props.children,ve,de.key):re!==null&&(re.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===G&&Vo(Je)===re.type)?(re=E(re,de.props),gc(re,de),re.return=le,re):(re=Lu(de.type,de.key,de.props,null,le.mode,ve),gc(re,de),re.return=le,re)}function ge(le,re,de,ve){return re===null||re.tag!==4||re.stateNode.containerInfo!==de.containerInfo||re.stateNode.implementation!==de.implementation?(re=ad(de,le.mode,ve),re.return=le,re):(re=E(re,de.children||[]),re.return=le,re)}function Te(le,re,de,ve,Je){return re===null||re.tag!==7?(re=Lo(de,le.mode,ve,Je),re.return=le,re):(re=E(re,de),re.return=le,re)}function Se(le,re,de){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return re=sd(""+re,le.mode,de),re.return=le,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case U:return de=Lu(re.type,re.key,re.props,null,le.mode,de),gc(de,re),de.return=le,de;case X:return re=ad(re,le.mode,de),re.return=le,re;case G:return re=Vo(re),Se(le,re,de)}if(me(re)||J(re))return re=Lo(re,le.mode,de,null),re.return=le,re;if(typeof re.then=="function")return Se(le,Fu(re),de);if(re.$$typeof===ee)return Se(le,ku(le,re),de);zu(le,re)}return null}function xe(le,re,de,ve){var Je=re!==null?re.key:null;if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return Je!==null?null:k(le,re,""+de,ve);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case U:return de.key===Je?Q(le,re,de,ve):null;case X:return de.key===Je?ge(le,re,de,ve):null;case G:return de=Vo(de),xe(le,re,de,ve)}if(me(de)||J(de))return Je!==null?null:Te(le,re,de,ve,null);if(typeof de.then=="function")return xe(le,re,Fu(de),ve);if(de.$$typeof===ee)return xe(le,re,ku(le,de),ve);zu(le,de)}return null}function we(le,re,de,ve,Je){if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return le=le.get(de)||null,k(re,le,""+ve,Je);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case U:return le=le.get(ve.key===null?de:ve.key)||null,Q(re,le,ve,Je);case X:return le=le.get(ve.key===null?de:ve.key)||null,ge(re,le,ve,Je);case G:return ve=Vo(ve),we(le,re,de,ve,Je)}if(me(ve)||J(ve))return le=le.get(de)||null,Te(re,le,ve,Je,null);if(typeof ve.then=="function")return we(le,re,de,Fu(ve),Je);if(ve.$$typeof===ee)return we(le,re,de,ku(re,ve),Je);zu(re,ve)}return null}function Xe(le,re,de,ve){for(var Je=null,nn=null,Ke=re,vt=re=0,Ht=null;Ke!==null&&vt<de.length;vt++){Ke.index>vt?(Ht=Ke,Ke=null):Ht=Ke.sibling;var rn=xe(le,Ke,de[vt],ve);if(rn===null){Ke===null&&(Ke=Ht);break}t&&Ke&&rn.alternate===null&&s(le,Ke),re=A(rn,re,vt),nn===null?Je=rn:nn.sibling=rn,nn=rn,Ke=Ht}if(vt===de.length)return c(le,Ke),Wt&&oa(le,vt),Je;if(Ke===null){for(;vt<de.length;vt++)Ke=Se(le,de[vt],ve),Ke!==null&&(re=A(Ke,re,vt),nn===null?Je=Ke:nn.sibling=Ke,nn=Ke);return Wt&&oa(le,vt),Je}for(Ke=g(Ke);vt<de.length;vt++)Ht=we(Ke,le,vt,de[vt],ve),Ht!==null&&(t&&Ht.alternate!==null&&Ke.delete(Ht.key===null?vt:Ht.key),re=A(Ht,re,vt),nn===null?Je=Ht:nn.sibling=Ht,nn=Ht);return t&&Ke.forEach(function(so){return s(le,so)}),Wt&&oa(le,vt),Je}function st(le,re,de,ve){if(de==null)throw Error(o(151));for(var Je=null,nn=null,Ke=re,vt=re=0,Ht=null,rn=de.next();Ke!==null&&!rn.done;vt++,rn=de.next()){Ke.index>vt?(Ht=Ke,Ke=null):Ht=Ke.sibling;var so=xe(le,Ke,rn.value,ve);if(so===null){Ke===null&&(Ke=Ht);break}t&&Ke&&so.alternate===null&&s(le,Ke),re=A(so,re,vt),nn===null?Je=so:nn.sibling=so,nn=so,Ke=Ht}if(rn.done)return c(le,Ke),Wt&&oa(le,vt),Je;if(Ke===null){for(;!rn.done;vt++,rn=de.next())rn=Se(le,rn.value,ve),rn!==null&&(re=A(rn,re,vt),nn===null?Je=rn:nn.sibling=rn,nn=rn);return Wt&&oa(le,vt),Je}for(Ke=g(Ke);!rn.done;vt++,rn=de.next())rn=we(Ke,le,vt,rn.value,ve),rn!==null&&(t&&rn.alternate!==null&&Ke.delete(rn.key===null?vt:rn.key),re=A(rn,re,vt),nn===null?Je=rn:nn.sibling=rn,nn=rn);return t&&Ke.forEach(function(y3){return s(le,y3)}),Wt&&oa(le,vt),Je}function En(le,re,de,ve){if(typeof de=="object"&&de!==null&&de.type===K&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case U:e:{for(var Je=de.key;re!==null;){if(re.key===Je){if(Je=de.type,Je===K){if(re.tag===7){c(le,re.sibling),ve=E(re,de.props.children),ve.return=le,le=ve;break e}}else if(re.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===G&&Vo(Je)===re.type){c(le,re.sibling),ve=E(re,de.props),gc(ve,de),ve.return=le,le=ve;break e}c(le,re);break}else s(le,re);re=re.sibling}de.type===K?(ve=Lo(de.props.children,le.mode,ve,de.key),ve.return=le,le=ve):(ve=Lu(de.type,de.key,de.props,null,le.mode,ve),gc(ve,de),ve.return=le,le=ve)}return O(le);case X:e:{for(Je=de.key;re!==null;){if(re.key===Je)if(re.tag===4&&re.stateNode.containerInfo===de.containerInfo&&re.stateNode.implementation===de.implementation){c(le,re.sibling),ve=E(re,de.children||[]),ve.return=le,le=ve;break e}else{c(le,re);break}else s(le,re);re=re.sibling}ve=ad(de,le.mode,ve),ve.return=le,le=ve}return O(le);case G:return de=Vo(de),En(le,re,de,ve)}if(me(de))return Xe(le,re,de,ve);if(J(de)){if(Je=J(de),typeof Je!="function")throw Error(o(150));return de=Je.call(de),st(le,re,de,ve)}if(typeof de.then=="function")return En(le,re,Fu(de),ve);if(de.$$typeof===ee)return En(le,re,ku(le,de),ve);zu(le,de)}return typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint"?(de=""+de,re!==null&&re.tag===6?(c(le,re.sibling),ve=E(re,de),ve.return=le,le=ve):(c(le,re),ve=sd(de,le.mode,ve),ve.return=le,le=ve),O(le)):c(le,re)}return function(le,re,de,ve){try{dc=0;var Je=En(le,re,de,ve);return yl=null,Je}catch(Ke){if(Ke===xl||Ke===Vu)throw Ke;var nn=Vr(29,Ke,null,le.mode);return nn.lanes=ve,nn.return=le,nn}finally{}}}var Fo=rm(!0),sm=rm(!1),za=!1;function yd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ed(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ha(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ga(t,s,c){var g=t.updateQueue;if(g===null)return null;if(g=g.shared,(an&2)!==0){var E=g.pending;return E===null?s.next=s:(s.next=E.next,E.next=s),g.pending=s,s=Mu(t),zg(t,null,c),s}return Du(t,g,s,c),Mu(t)}function mc(t,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194048)!==0)){var g=s.lanes;g&=t.pendingLanes,c|=g,s.lanes=c,lr(t,c)}}function _d(t,s){var c=t.updateQueue,g=t.alternate;if(g!==null&&(g=g.updateQueue,c===g)){var E=null,A=null;if(c=c.firstBaseUpdate,c!==null){do{var O={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};A===null?E=A=O:A=A.next=O,c=c.next}while(c!==null);A===null?E=A=s:A=A.next=s}else E=A=s;c={baseState:g.baseState,firstBaseUpdate:E,lastBaseUpdate:A,shared:g.shared,callbacks:g.callbacks},t.updateQueue=c;return}t=c.lastBaseUpdate,t===null?c.firstBaseUpdate=s:t.next=s,c.lastBaseUpdate=s}var wd=!1;function pc(){if(wd){var t=pl;if(t!==null)throw t}}function xc(t,s,c,g){wd=!1;var E=t.updateQueue;za=!1;var A=E.firstBaseUpdate,O=E.lastBaseUpdate,k=E.shared.pending;if(k!==null){E.shared.pending=null;var Q=k,ge=Q.next;Q.next=null,O===null?A=ge:O.next=ge,O=Q;var Te=t.alternate;Te!==null&&(Te=Te.updateQueue,k=Te.lastBaseUpdate,k!==O&&(k===null?Te.firstBaseUpdate=ge:k.next=ge,Te.lastBaseUpdate=Q))}if(A!==null){var Se=E.baseState;O=0,Te=ge=Q=null,k=A;do{var xe=k.lane&-536870913,we=xe!==k.lane;if(we?(zt&xe)===xe:(g&xe)===xe){xe!==0&&xe===ml&&(wd=!0),Te!==null&&(Te=Te.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var Xe=t,st=k;xe=s;var En=c;switch(st.tag){case 1:if(Xe=st.payload,typeof Xe=="function"){Se=Xe.call(En,Se,xe);break e}Se=Xe;break e;case 3:Xe.flags=Xe.flags&-65537|128;case 0:if(Xe=st.payload,xe=typeof Xe=="function"?Xe.call(En,Se,xe):Xe,xe==null)break e;Se=I({},Se,xe);break e;case 2:za=!0}}xe=k.callback,xe!==null&&(t.flags|=64,we&&(t.flags|=8192),we=E.callbacks,we===null?E.callbacks=[xe]:we.push(xe))}else we={lane:xe,tag:k.tag,payload:k.payload,callback:k.callback,next:null},Te===null?(ge=Te=we,Q=Se):Te=Te.next=we,O|=xe;if(k=k.next,k===null){if(k=E.shared.pending,k===null)break;we=k,k=we.next,we.next=null,E.lastBaseUpdate=we,E.shared.pending=null}}while(!0);Te===null&&(Q=Se),E.baseState=Q,E.firstBaseUpdate=ge,E.lastBaseUpdate=Te,A===null&&(E.shared.lanes=0),Wa|=O,t.lanes=O,t.memoizedState=Se}}function am(t,s){if(typeof t!="function")throw Error(o(191,t));t.call(s)}function om(t,s){var c=t.callbacks;if(c!==null)for(t.callbacks=null,t=0;t<c.length;t++)am(c[t],s)}var El=ie(null),Hu=ie(0);function lm(t,s){t=ya,ke(Hu,t),ke(El,s),ya=t|s.baseLanes}function Ad(){ke(Hu,ya),ke(El,El.current)}function bd(){ya=Hu.current,Ae(El),Ae(Hu)}var jr=ie(null),os=null;function qa(t){var s=t.alternate;ke(ci,ci.current&1),ke(jr,t),os===null&&(s===null||El.current!==null||s.memoizedState!==null)&&(os=t)}function Td(t){ke(ci,ci.current),ke(jr,t),os===null&&(os=t)}function cm(t){t.tag===22?(ke(ci,ci.current),ke(jr,t),os===null&&(os=t)):Ya()}function Ya(){ke(ci,ci.current),ke(jr,jr.current)}function Fr(t){Ae(jr),os===t&&(os=null),Ae(ci)}var ci=ie(0);function Gu(t){for(var s=t;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||R0(c)||O0(c)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ua=0,wt=null,xn=null,xi=null,qu=!1,_l=!1,zo=!1,Yu=0,yc=0,wl=null,lb=0;function ei(){throw Error(o(321))}function vd(t,s){if(s===null)return!1;for(var c=0;c<s.length&&c<t.length;c++)if(!m(t[c],s[c]))return!1;return!0}function Cd(t,s,c,g,E,A){return ua=A,wt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,pe.H=t===null||t.memoizedState===null?Ym:Fd,zo=!1,A=c(g,E),zo=!1,_l&&(A=hm(s,c,g,E)),um(t),A}function um(t){pe.H=wc;var s=xn!==null&&xn.next!==null;if(ua=0,xi=xn=wt=null,qu=!1,yc=0,wl=null,s)throw Error(o(300));t===null||yi||(t=t.dependencies,t!==null&&Bu(t)&&(yi=!0))}function hm(t,s,c,g){wt=t;var E=0;do{if(_l&&(wl=null),yc=0,_l=!1,25<=E)throw Error(o(301));if(E+=1,xi=xn=null,t.updateQueue!=null){var A=t.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}pe.H=Xm,A=s(c,g)}while(_l);return A}function cb(){var t=pe.H,s=t.useState()[0];return s=typeof s.then=="function"?Ec(s):s,t=t.useState()[0],(xn!==null?xn.memoizedState:null)!==t&&(wt.flags|=1024),s}function Sd(){var t=Yu!==0;return Yu=0,t}function Id(t,s,c){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~c}function Nd(t){if(qu){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}qu=!1}ua=0,xi=xn=wt=null,_l=!1,yc=Yu=0,wl=null}function gr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xi===null?wt.memoizedState=xi=t:xi=xi.next=t,xi}function ui(){if(xn===null){var t=wt.alternate;t=t!==null?t.memoizedState:null}else t=xn.next;var s=xi===null?wt.memoizedState:xi.next;if(s!==null)xi=s,xn=t;else{if(t===null)throw wt.alternate===null?Error(o(467)):Error(o(310));xn=t,t={memoizedState:xn.memoizedState,baseState:xn.baseState,baseQueue:xn.baseQueue,queue:xn.queue,next:null},xi===null?wt.memoizedState=xi=t:xi=xi.next=t}return xi}function Xu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ec(t){var s=yc;return yc+=1,wl===null&&(wl=[]),t=tm(wl,t,s),s=wt,(xi===null?s.memoizedState:xi.next)===null&&(s=s.alternate,pe.H=s===null||s.memoizedState===null?Ym:Fd),t}function Ku(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Ec(t);if(t.$$typeof===ee)return ji(t)}throw Error(o(438,String(t)))}function Rd(t){var s=null,c=wt.updateQueue;if(c!==null&&(s=c.memoCache),s==null){var g=wt.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(s={data:g.data.map(function(E){return E.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),c===null&&(c=Xu(),wt.updateQueue=c),c.memoCache=s,c=s.data[s.index],c===void 0)for(c=s.data[s.index]=Array(t),g=0;g<t;g++)c[g]=te;return s.index++,c}function ha(t,s){return typeof s=="function"?s(t):s}function Wu(t){var s=ui();return Od(s,xn,t)}function Od(t,s,c){var g=t.queue;if(g===null)throw Error(o(311));g.lastRenderedReducer=c;var E=t.baseQueue,A=g.pending;if(A!==null){if(E!==null){var O=E.next;E.next=A.next,A.next=O}s.baseQueue=E=A,g.pending=null}if(A=t.baseState,E===null)t.memoizedState=A;else{s=E.next;var k=O=null,Q=null,ge=s,Te=!1;do{var Se=ge.lane&-536870913;if(Se!==ge.lane?(zt&Se)===Se:(ua&Se)===Se){var xe=ge.revertLane;if(xe===0)Q!==null&&(Q=Q.next={lane:0,revertLane:0,gesture:null,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null}),Se===ml&&(Te=!0);else if((ua&xe)===xe){ge=ge.next,xe===ml&&(Te=!0);continue}else Se={lane:0,revertLane:ge.revertLane,gesture:null,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},Q===null?(k=Q=Se,O=A):Q=Q.next=Se,wt.lanes|=xe,Wa|=xe;Se=ge.action,zo&&c(A,Se),A=ge.hasEagerState?ge.eagerState:c(A,Se)}else xe={lane:Se,revertLane:ge.revertLane,gesture:ge.gesture,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},Q===null?(k=Q=xe,O=A):Q=Q.next=xe,wt.lanes|=Se,Wa|=Se;ge=ge.next}while(ge!==null&&ge!==s);if(Q===null?O=A:Q.next=k,!m(A,t.memoizedState)&&(yi=!0,Te&&(c=pl,c!==null)))throw c;t.memoizedState=A,t.baseState=O,t.baseQueue=Q,g.lastRenderedState=A}return E===null&&(g.lanes=0),[t.memoizedState,g.dispatch]}function Dd(t){var s=ui(),c=s.queue;if(c===null)throw Error(o(311));c.lastRenderedReducer=t;var g=c.dispatch,E=c.pending,A=s.memoizedState;if(E!==null){c.pending=null;var O=E=E.next;do A=t(A,O.action),O=O.next;while(O!==E);m(A,s.memoizedState)||(yi=!0),s.memoizedState=A,s.baseQueue===null&&(s.baseState=A),c.lastRenderedState=A}return[A,g]}function fm(t,s,c){var g=wt,E=ui(),A=Wt;if(A){if(c===void 0)throw Error(o(407));c=c()}else c=s();var O=!m((xn||E).memoizedState,c);if(O&&(E.memoizedState=c,yi=!0),E=E.queue,Pd(mm.bind(null,g,E,t),[t]),E.getSnapshot!==s||O||xi!==null&&xi.memoizedState.tag&1){if(g.flags|=2048,Al(9,{destroy:void 0},gm.bind(null,g,E,c,s),null),bn===null)throw Error(o(349));A||(ua&127)!==0||dm(g,s,c)}return c}function dm(t,s,c){t.flags|=16384,t={getSnapshot:s,value:c},s=wt.updateQueue,s===null?(s=Xu(),wt.updateQueue=s,s.stores=[t]):(c=s.stores,c===null?s.stores=[t]:c.push(t))}function gm(t,s,c,g){s.value=c,s.getSnapshot=g,pm(s)&&xm(t)}function mm(t,s,c){return c(function(){pm(s)&&xm(t)})}function pm(t){var s=t.getSnapshot;t=t.value;try{var c=s();return!m(t,c)}catch{return!0}}function xm(t){var s=Mo(t,2);s!==null&&Ir(s,t,2)}function Md(t){var s=gr();if(typeof t=="function"){var c=t;if(t=c(),zo){Xt(!0);try{c()}finally{Xt(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ha,lastRenderedState:t},s}function ym(t,s,c,g){return t.baseState=c,Od(t,xn,typeof g=="function"?g:ha)}function ub(t,s,c,g,E){if(Ju(t))throw Error(o(485));if(t=s.action,t!==null){var A={payload:E,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(O){A.listeners.push(O)}};pe.T!==null?c(!0):A.isTransition=!1,g(A),c=s.pending,c===null?(A.next=s.pending=A,Em(s,A)):(A.next=c.next,s.pending=c.next=A)}}function Em(t,s){var c=s.action,g=s.payload,E=t.state;if(s.isTransition){var A=pe.T,O={};pe.T=O;try{var k=c(E,g),Q=pe.S;Q!==null&&Q(O,k),_m(t,s,k)}catch(ge){Ld(t,s,ge)}finally{A!==null&&O.types!==null&&(A.types=O.types),pe.T=A}}else try{A=c(E,g),_m(t,s,A)}catch(ge){Ld(t,s,ge)}}function _m(t,s,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(g){wm(t,s,g)},function(g){return Ld(t,s,g)}):wm(t,s,c)}function wm(t,s,c){s.status="fulfilled",s.value=c,Am(s),t.state=c,s=t.pending,s!==null&&(c=s.next,c===s?t.pending=null:(c=c.next,s.next=c,Em(t,c)))}function Ld(t,s,c){var g=t.pending;if(t.pending=null,g!==null){g=g.next;do s.status="rejected",s.reason=c,Am(s),s=s.next;while(s!==g)}t.action=null}function Am(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function bm(t,s){return s}function Tm(t,s){if(Wt){var c=bn.formState;if(c!==null){e:{var g=wt;if(Wt){if(Rn){t:{for(var E=Rn,A=as;E.nodeType!==8;){if(!A){E=null;break t}if(E=ls(E.nextSibling),E===null){E=null;break t}}A=E.data,E=A==="F!"||A==="F"?E:null}if(E){Rn=ls(E.nextSibling),g=E.data==="F!";break e}}ja(g)}g=!1}g&&(s=c[0])}}return c=gr(),c.memoizedState=c.baseState=s,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bm,lastRenderedState:s},c.queue=g,c=Hm.bind(null,wt,g),g.dispatch=c,g=Md(!1),A=jd.bind(null,wt,!1,g.queue),g=gr(),E={state:s,dispatch:null,action:t,pending:null},g.queue=E,c=ub.bind(null,wt,E,A,c),E.dispatch=c,g.memoizedState=t,[s,c,!1]}function vm(t){var s=ui();return Cm(s,xn,t)}function Cm(t,s,c){if(s=Od(t,s,bm)[0],t=Wu(ha)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var g=Ec(s)}catch(O){throw O===xl?Vu:O}else g=s;s=ui();var E=s.queue,A=E.dispatch;return c!==s.memoizedState&&(wt.flags|=2048,Al(9,{destroy:void 0},hb.bind(null,E,c),null)),[g,A,t]}function hb(t,s){t.action=s}function Sm(t){var s=ui(),c=xn;if(c!==null)return Cm(s,c,t);ui(),s=s.memoizedState,c=ui();var g=c.queue.dispatch;return c.memoizedState=t,[s,g,!1]}function Al(t,s,c,g){return t={tag:t,create:c,deps:g,inst:s,next:null},s=wt.updateQueue,s===null&&(s=Xu(),wt.updateQueue=s),c=s.lastEffect,c===null?s.lastEffect=t.next=t:(g=c.next,c.next=t,t.next=g,s.lastEffect=t),t}function Im(){return ui().memoizedState}function Qu(t,s,c,g){var E=gr();wt.flags|=t,E.memoizedState=Al(1|s,{destroy:void 0},c,g===void 0?null:g)}function Zu(t,s,c,g){var E=ui();g=g===void 0?null:g;var A=E.memoizedState.inst;xn!==null&&g!==null&&vd(g,xn.memoizedState.deps)?E.memoizedState=Al(s,A,c,g):(wt.flags|=t,E.memoizedState=Al(1|s,A,c,g))}function Nm(t,s){Qu(8390656,8,t,s)}function Pd(t,s){Zu(2048,8,t,s)}function fb(t){wt.flags|=4;var s=wt.updateQueue;if(s===null)s=Xu(),wt.updateQueue=s,s.events=[t];else{var c=s.events;c===null?s.events=[t]:c.push(t)}}function Rm(t){var s=ui().memoizedState;return fb({ref:s,nextImpl:t}),function(){if((an&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}function Om(t,s){return Zu(4,2,t,s)}function Dm(t,s){return Zu(4,4,t,s)}function Mm(t,s){if(typeof s=="function"){t=t();var c=s(t);return function(){typeof c=="function"?c():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Lm(t,s,c){c=c!=null?c.concat([t]):null,Zu(4,4,Mm.bind(null,s,t),c)}function Bd(){}function Pm(t,s){var c=ui();s=s===void 0?null:s;var g=c.memoizedState;return s!==null&&vd(s,g[1])?g[0]:(c.memoizedState=[t,s],t)}function Bm(t,s){var c=ui();s=s===void 0?null:s;var g=c.memoizedState;if(s!==null&&vd(s,g[1]))return g[0];if(g=t(),zo){Xt(!0);try{t()}finally{Xt(!1)}}return c.memoizedState=[g,s],g}function kd(t,s,c){return c===void 0||(ua&1073741824)!==0&&(zt&261930)===0?t.memoizedState=s:(t.memoizedState=c,t=kp(),wt.lanes|=t,Wa|=t,c)}function km(t,s,c,g){return m(c,s)?c:El.current!==null?(t=kd(t,c,g),m(t,s)||(yi=!0),t):(ua&42)===0||(ua&1073741824)!==0&&(zt&261930)===0?(yi=!0,t.memoizedState=c):(t=kp(),wt.lanes|=t,Wa|=t,s)}function Um(t,s,c,g,E){var A=be.p;be.p=A!==0&&8>A?A:8;var O=pe.T,k={};pe.T=k,jd(t,!1,s,c);try{var Q=E(),ge=pe.S;if(ge!==null&&ge(k,Q),Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var Te=ob(Q,g);_c(t,s,Te,Gr(t))}else _c(t,s,g,Gr(t))}catch(Se){_c(t,s,{then:function(){},status:"rejected",reason:Se},Gr())}finally{be.p=A,O!==null&&k.types!==null&&(O.types=k.types),pe.T=O}}function db(){}function Ud(t,s,c,g){if(t.tag!==5)throw Error(o(476));var E=Vm(t).queue;Um(t,E,s,qe,c===null?db:function(){return jm(t),c(g)})}function Vm(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:qe,baseState:qe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ha,lastRenderedState:qe},next:null};var c={};return s.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ha,lastRenderedState:c},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function jm(t){var s=Vm(t);s.next===null&&(s=t.alternate.memoizedState),_c(t,s.next.queue,{},Gr())}function Vd(){return ji(kc)}function Fm(){return ui().memoizedState}function zm(){return ui().memoizedState}function gb(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var c=Gr();t=Ha(c);var g=Ga(s,t,c);g!==null&&(Ir(g,s,c),mc(g,s,c)),s={cache:gd()},t.payload=s;return}s=s.return}}function mb(t,s,c){var g=Gr();c={lane:g,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Ju(t)?Gm(s,c):(c=id(t,s,c,g),c!==null&&(Ir(c,t,g),qm(c,s,g)))}function Hm(t,s,c){var g=Gr();_c(t,s,c,g)}function _c(t,s,c,g){var E={lane:g,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Ju(t))Gm(s,E);else{var A=t.alternate;if(t.lanes===0&&(A===null||A.lanes===0)&&(A=s.lastRenderedReducer,A!==null))try{var O=s.lastRenderedState,k=A(O,c);if(E.hasEagerState=!0,E.eagerState=k,m(k,O))return Du(t,s,E,0),bn===null&&Ou(),!1}catch{}finally{}if(c=id(t,s,E,g),c!==null)return Ir(c,t,g),qm(c,s,g),!0}return!1}function jd(t,s,c,g){if(g={lane:2,revertLane:y0(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},Ju(t)){if(s)throw Error(o(479))}else s=id(t,c,g,2),s!==null&&Ir(s,t,2)}function Ju(t){var s=t.alternate;return t===wt||s!==null&&s===wt}function Gm(t,s){_l=qu=!0;var c=t.pending;c===null?s.next=s:(s.next=c.next,c.next=s),t.pending=s}function qm(t,s,c){if((c&4194048)!==0){var g=s.lanes;g&=t.pendingLanes,c|=g,s.lanes=c,lr(t,c)}}var wc={readContext:ji,use:Ku,useCallback:ei,useContext:ei,useEffect:ei,useImperativeHandle:ei,useLayoutEffect:ei,useInsertionEffect:ei,useMemo:ei,useReducer:ei,useRef:ei,useState:ei,useDebugValue:ei,useDeferredValue:ei,useTransition:ei,useSyncExternalStore:ei,useId:ei,useHostTransitionStatus:ei,useFormState:ei,useActionState:ei,useOptimistic:ei,useMemoCache:ei,useCacheRefresh:ei};wc.useEffectEvent=ei;var Ym={readContext:ji,use:Ku,useCallback:function(t,s){return gr().memoizedState=[t,s===void 0?null:s],t},useContext:ji,useEffect:Nm,useImperativeHandle:function(t,s,c){c=c!=null?c.concat([t]):null,Qu(4194308,4,Mm.bind(null,s,t),c)},useLayoutEffect:function(t,s){return Qu(4194308,4,t,s)},useInsertionEffect:function(t,s){Qu(4,2,t,s)},useMemo:function(t,s){var c=gr();s=s===void 0?null:s;var g=t();if(zo){Xt(!0);try{t()}finally{Xt(!1)}}return c.memoizedState=[g,s],g},useReducer:function(t,s,c){var g=gr();if(c!==void 0){var E=c(s);if(zo){Xt(!0);try{c(s)}finally{Xt(!1)}}}else E=s;return g.memoizedState=g.baseState=E,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:E},g.queue=t,t=t.dispatch=mb.bind(null,wt,t),[g.memoizedState,t]},useRef:function(t){var s=gr();return t={current:t},s.memoizedState=t},useState:function(t){t=Md(t);var s=t.queue,c=Hm.bind(null,wt,s);return s.dispatch=c,[t.memoizedState,c]},useDebugValue:Bd,useDeferredValue:function(t,s){var c=gr();return kd(c,t,s)},useTransition:function(){var t=Md(!1);return t=Um.bind(null,wt,t.queue,!0,!1),gr().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,c){var g=wt,E=gr();if(Wt){if(c===void 0)throw Error(o(407));c=c()}else{if(c=s(),bn===null)throw Error(o(349));(zt&127)!==0||dm(g,s,c)}E.memoizedState=c;var A={value:c,getSnapshot:s};return E.queue=A,Nm(mm.bind(null,g,A,t),[t]),g.flags|=2048,Al(9,{destroy:void 0},gm.bind(null,g,A,c,s),null),c},useId:function(){var t=gr(),s=bn.identifierPrefix;if(Wt){var c=Us,g=ks;c=(g&~(1<<32-nt(g)-1)).toString(32)+c,s="_"+s+"R_"+c,c=Yu++,0<c&&(s+="H"+c.toString(32)),s+="_"}else c=lb++,s="_"+s+"r_"+c.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:Vd,useFormState:Tm,useActionState:Tm,useOptimistic:function(t){var s=gr();s.memoizedState=s.baseState=t;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=c,s=jd.bind(null,wt,!0,c),c.dispatch=s,[t,s]},useMemoCache:Rd,useCacheRefresh:function(){return gr().memoizedState=gb.bind(null,wt)},useEffectEvent:function(t){var s=gr(),c={impl:t};return s.memoizedState=c,function(){if((an&2)!==0)throw Error(o(440));return c.impl.apply(void 0,arguments)}}},Fd={readContext:ji,use:Ku,useCallback:Pm,useContext:ji,useEffect:Pd,useImperativeHandle:Lm,useInsertionEffect:Om,useLayoutEffect:Dm,useMemo:Bm,useReducer:Wu,useRef:Im,useState:function(){return Wu(ha)},useDebugValue:Bd,useDeferredValue:function(t,s){var c=ui();return km(c,xn.memoizedState,t,s)},useTransition:function(){var t=Wu(ha)[0],s=ui().memoizedState;return[typeof t=="boolean"?t:Ec(t),s]},useSyncExternalStore:fm,useId:Fm,useHostTransitionStatus:Vd,useFormState:vm,useActionState:vm,useOptimistic:function(t,s){var c=ui();return ym(c,xn,t,s)},useMemoCache:Rd,useCacheRefresh:zm};Fd.useEffectEvent=Rm;var Xm={readContext:ji,use:Ku,useCallback:Pm,useContext:ji,useEffect:Pd,useImperativeHandle:Lm,useInsertionEffect:Om,useLayoutEffect:Dm,useMemo:Bm,useReducer:Dd,useRef:Im,useState:function(){return Dd(ha)},useDebugValue:Bd,useDeferredValue:function(t,s){var c=ui();return xn===null?kd(c,t,s):km(c,xn.memoizedState,t,s)},useTransition:function(){var t=Dd(ha)[0],s=ui().memoizedState;return[typeof t=="boolean"?t:Ec(t),s]},useSyncExternalStore:fm,useId:Fm,useHostTransitionStatus:Vd,useFormState:Sm,useActionState:Sm,useOptimistic:function(t,s){var c=ui();return xn!==null?ym(c,xn,t,s):(c.baseState=t,[t,c.queue.dispatch])},useMemoCache:Rd,useCacheRefresh:zm};Xm.useEffectEvent=Rm;function zd(t,s,c,g){s=t.memoizedState,c=c(g,s),c=c==null?s:I({},s,c),t.memoizedState=c,t.lanes===0&&(t.updateQueue.baseState=c)}var Hd={enqueueSetState:function(t,s,c){t=t._reactInternals;var g=Gr(),E=Ha(g);E.payload=s,c!=null&&(E.callback=c),s=Ga(t,E,g),s!==null&&(Ir(s,t,g),mc(s,t,g))},enqueueReplaceState:function(t,s,c){t=t._reactInternals;var g=Gr(),E=Ha(g);E.tag=1,E.payload=s,c!=null&&(E.callback=c),s=Ga(t,E,g),s!==null&&(Ir(s,t,g),mc(s,t,g))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var c=Gr(),g=Ha(c);g.tag=2,s!=null&&(g.callback=s),s=Ga(t,g,c),s!==null&&(Ir(s,t,c),mc(s,t,c))}};function Km(t,s,c,g,E,A,O){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(g,A,O):s.prototype&&s.prototype.isPureReactComponent?!x(c,g)||!x(E,A):!0}function Wm(t,s,c,g){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,g),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,g),s.state!==t&&Hd.enqueueReplaceState(s,s.state,null)}function Ho(t,s){var c=s;if("ref"in s){c={};for(var g in s)g!=="ref"&&(c[g]=s[g])}if(t=t.defaultProps){c===s&&(c=I({},c));for(var E in t)c[E]===void 0&&(c[E]=t[E])}return c}function Qm(t){Ru(t)}function Zm(t){console.error(t)}function Jm(t){Ru(t)}function $u(t,s){try{var c=t.onUncaughtError;c(s.value,{componentStack:s.stack})}catch(g){setTimeout(function(){throw g})}}function $m(t,s,c){try{var g=t.onCaughtError;g(c.value,{componentStack:c.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function Gd(t,s,c){return c=Ha(c),c.tag=3,c.payload={element:null},c.callback=function(){$u(t,s)},c}function ep(t){return t=Ha(t),t.tag=3,t}function tp(t,s,c,g){var E=c.type.getDerivedStateFromError;if(typeof E=="function"){var A=g.value;t.payload=function(){return E(A)},t.callback=function(){$m(s,c,g)}}var O=c.stateNode;O!==null&&typeof O.componentDidCatch=="function"&&(t.callback=function(){$m(s,c,g),typeof E!="function"&&(Qa===null?Qa=new Set([this]):Qa.add(this));var k=g.stack;this.componentDidCatch(g.value,{componentStack:k!==null?k:""})})}function pb(t,s,c,g,E){if(c.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(s=c.alternate,s!==null&&gl(s,c,E,!0),c=jr.current,c!==null){switch(c.tag){case 31:case 13:return os===null?hh():c.alternate===null&&ti===0&&(ti=3),c.flags&=-257,c.flags|=65536,c.lanes=E,g===ju?c.flags|=16384:(s=c.updateQueue,s===null?c.updateQueue=new Set([g]):s.add(g),m0(t,g,E)),!1;case 22:return c.flags|=65536,g===ju?c.flags|=16384:(s=c.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([g])},c.updateQueue=s):(c=s.retryQueue,c===null?s.retryQueue=new Set([g]):c.add(g)),m0(t,g,E)),!1}throw Error(o(435,c.tag))}return m0(t,g,E),hh(),!1}if(Wt)return s=jr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=E,g!==cd&&(t=Error(o(422),{cause:g}),uc(is(t,c)))):(g!==cd&&(s=Error(o(423),{cause:g}),uc(is(s,c))),t=t.current.alternate,t.flags|=65536,E&=-E,t.lanes|=E,g=is(g,c),E=Gd(t.stateNode,g,E),_d(t,E),ti!==4&&(ti=2)),!1;var A=Error(o(520),{cause:g});if(A=is(A,c),Nc===null?Nc=[A]:Nc.push(A),ti!==4&&(ti=2),s===null)return!0;g=is(g,c),c=s;do{switch(c.tag){case 3:return c.flags|=65536,t=E&-E,c.lanes|=t,t=Gd(c.stateNode,g,t),_d(c,t),!1;case 1:if(s=c.type,A=c.stateNode,(c.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Qa===null||!Qa.has(A))))return c.flags|=65536,E&=-E,c.lanes|=E,E=ep(E),tp(E,t,c,g),_d(c,E),!1}c=c.return}while(c!==null);return!1}var qd=Error(o(461)),yi=!1;function Fi(t,s,c,g){s.child=t===null?sm(s,null,c,g):Fo(s,t.child,c,g)}function np(t,s,c,g,E){c=c.render;var A=s.ref;if("ref"in g){var O={};for(var k in g)k!=="ref"&&(O[k]=g[k])}else O=g;return ko(s),g=Cd(t,s,c,O,A,E),k=Sd(),t!==null&&!yi?(Id(t,s,E),fa(t,s,E)):(Wt&&k&&od(s),s.flags|=1,Fi(t,s,g,E),s.child)}function ip(t,s,c,g,E){if(t===null){var A=c.type;return typeof A=="function"&&!rd(A)&&A.defaultProps===void 0&&c.compare===null?(s.tag=15,s.type=A,rp(t,s,A,g,E)):(t=Lu(c.type,null,g,s,s.mode,E),t.ref=s.ref,t.return=s,s.child=t)}if(A=t.child,!$d(t,E)){var O=A.memoizedProps;if(c=c.compare,c=c!==null?c:x,c(O,g)&&t.ref===s.ref)return fa(t,s,E)}return s.flags|=1,t=aa(A,g),t.ref=s.ref,t.return=s,s.child=t}function rp(t,s,c,g,E){if(t!==null){var A=t.memoizedProps;if(x(A,g)&&t.ref===s.ref)if(yi=!1,s.pendingProps=g=A,$d(t,E))(t.flags&131072)!==0&&(yi=!0);else return s.lanes=t.lanes,fa(t,s,E)}return Yd(t,s,c,g,E)}function sp(t,s,c,g){var E=g.children,A=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((s.flags&128)!==0){if(A=A!==null?A.baseLanes|c:c,t!==null){for(g=s.child=t.child,E=0;g!==null;)E=E|g.lanes|g.childLanes,g=g.sibling;g=E&~A}else g=0,s.child=null;return ap(t,s,A,c,g)}if((c&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&Uu(s,A!==null?A.cachePool:null),A!==null?lm(s,A):Ad(),cm(s);else return g=s.lanes=536870912,ap(t,s,A!==null?A.baseLanes|c:c,c,g)}else A!==null?(Uu(s,A.cachePool),lm(s,A),Ya(),s.memoizedState=null):(t!==null&&Uu(s,null),Ad(),Ya());return Fi(t,s,E,c),s.child}function Ac(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function ap(t,s,c,g,E){var A=pd();return A=A===null?null:{parent:pi._currentValue,pool:A},s.memoizedState={baseLanes:c,cachePool:A},t!==null&&Uu(s,null),Ad(),cm(s),t!==null&&gl(t,s,g,!0),s.childLanes=E,null}function eh(t,s){return s=nh({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function op(t,s,c){return Fo(s,t.child,null,c),t=eh(s,s.pendingProps),t.flags|=2,Fr(s),s.memoizedState=null,t}function xb(t,s,c){var g=s.pendingProps,E=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(Wt){if(g.mode==="hidden")return t=eh(s,g),s.lanes=536870912,Ac(null,t);if(Td(s),(t=Rn)?(t=E2(t,as),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Ua!==null?{id:ks,overflow:Us}:null,retryLane:536870912,hydrationErrors:null},c=Gg(t),c.return=s,s.child=c,Vi=s,Rn=null)):t=null,t===null)throw ja(s);return s.lanes=536870912,null}return eh(s,g)}var A=t.memoizedState;if(A!==null){var O=A.dehydrated;if(Td(s),E)if(s.flags&256)s.flags&=-257,s=op(t,s,c);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(o(558));else if(yi||gl(t,s,c,!1),E=(c&t.childLanes)!==0,yi||E){if(g=bn,g!==null&&(O=ws(g,c),O!==0&&O!==A.retryLane))throw A.retryLane=O,Mo(t,O),Ir(g,t,O),qd;hh(),s=op(t,s,c)}else t=A.treeContext,Rn=ls(O.nextSibling),Vi=s,Wt=!0,Va=null,as=!1,t!==null&&Xg(s,t),s=eh(s,g),s.flags|=4096;return s}return t=aa(t.child,{mode:g.mode,children:g.children}),t.ref=s.ref,s.child=t,t.return=s,t}function th(t,s){var c=s.ref;if(c===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(o(284));(t===null||t.ref!==c)&&(s.flags|=4194816)}}function Yd(t,s,c,g,E){return ko(s),c=Cd(t,s,c,g,void 0,E),g=Sd(),t!==null&&!yi?(Id(t,s,E),fa(t,s,E)):(Wt&&g&&od(s),s.flags|=1,Fi(t,s,c,E),s.child)}function lp(t,s,c,g,E,A){return ko(s),s.updateQueue=null,c=hm(s,g,c,E),um(t),g=Sd(),t!==null&&!yi?(Id(t,s,A),fa(t,s,A)):(Wt&&g&&od(s),s.flags|=1,Fi(t,s,c,A),s.child)}function cp(t,s,c,g,E){if(ko(s),s.stateNode===null){var A=ul,O=c.contextType;typeof O=="object"&&O!==null&&(A=ji(O)),A=new c(g,A),s.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=Hd,s.stateNode=A,A._reactInternals=s,A=s.stateNode,A.props=g,A.state=s.memoizedState,A.refs={},yd(s),O=c.contextType,A.context=typeof O=="object"&&O!==null?ji(O):ul,A.state=s.memoizedState,O=c.getDerivedStateFromProps,typeof O=="function"&&(zd(s,c,O,g),A.state=s.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(O=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),O!==A.state&&Hd.enqueueReplaceState(A,A.state,null),xc(s,g,A,E),pc(),A.state=s.memoizedState),typeof A.componentDidMount=="function"&&(s.flags|=4194308),g=!0}else if(t===null){A=s.stateNode;var k=s.memoizedProps,Q=Ho(c,k);A.props=Q;var ge=A.context,Te=c.contextType;O=ul,typeof Te=="object"&&Te!==null&&(O=ji(Te));var Se=c.getDerivedStateFromProps;Te=typeof Se=="function"||typeof A.getSnapshotBeforeUpdate=="function",k=s.pendingProps!==k,Te||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(k||ge!==O)&&Wm(s,A,g,O),za=!1;var xe=s.memoizedState;A.state=xe,xc(s,g,A,E),pc(),ge=s.memoizedState,k||xe!==ge||za?(typeof Se=="function"&&(zd(s,c,Se,g),ge=s.memoizedState),(Q=za||Km(s,c,Q,g,xe,ge,O))?(Te||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(s.flags|=4194308)):(typeof A.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=g,s.memoizedState=ge),A.props=g,A.state=ge,A.context=O,g=Q):(typeof A.componentDidMount=="function"&&(s.flags|=4194308),g=!1)}else{A=s.stateNode,Ed(t,s),O=s.memoizedProps,Te=Ho(c,O),A.props=Te,Se=s.pendingProps,xe=A.context,ge=c.contextType,Q=ul,typeof ge=="object"&&ge!==null&&(Q=ji(ge)),k=c.getDerivedStateFromProps,(ge=typeof k=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(O!==Se||xe!==Q)&&Wm(s,A,g,Q),za=!1,xe=s.memoizedState,A.state=xe,xc(s,g,A,E),pc();var we=s.memoizedState;O!==Se||xe!==we||za||t!==null&&t.dependencies!==null&&Bu(t.dependencies)?(typeof k=="function"&&(zd(s,c,k,g),we=s.memoizedState),(Te=za||Km(s,c,Te,g,xe,we,Q)||t!==null&&t.dependencies!==null&&Bu(t.dependencies))?(ge||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(g,we,Q),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(g,we,Q)),typeof A.componentDidUpdate=="function"&&(s.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof A.componentDidUpdate!="function"||O===t.memoizedProps&&xe===t.memoizedState||(s.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||O===t.memoizedProps&&xe===t.memoizedState||(s.flags|=1024),s.memoizedProps=g,s.memoizedState=we),A.props=g,A.state=we,A.context=Q,g=Te):(typeof A.componentDidUpdate!="function"||O===t.memoizedProps&&xe===t.memoizedState||(s.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||O===t.memoizedProps&&xe===t.memoizedState||(s.flags|=1024),g=!1)}return A=g,th(t,s),g=(s.flags&128)!==0,A||g?(A=s.stateNode,c=g&&typeof c.getDerivedStateFromError!="function"?null:A.render(),s.flags|=1,t!==null&&g?(s.child=Fo(s,t.child,null,E),s.child=Fo(s,null,c,E)):Fi(t,s,c,E),s.memoizedState=A.state,t=s.child):t=fa(t,s,E),t}function up(t,s,c,g){return Po(),s.flags|=256,Fi(t,s,c,g),s.child}var Xd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Kd(t){return{baseLanes:t,cachePool:$g()}}function Wd(t,s,c){return t=t!==null?t.childLanes&~c:0,s&&(t|=Hr),t}function hp(t,s,c){var g=s.pendingProps,E=!1,A=(s.flags&128)!==0,O;if((O=A)||(O=t!==null&&t.memoizedState===null?!1:(ci.current&2)!==0),O&&(E=!0,s.flags&=-129),O=(s.flags&32)!==0,s.flags&=-33,t===null){if(Wt){if(E?qa(s):Ya(),(t=Rn)?(t=E2(t,as),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Ua!==null?{id:ks,overflow:Us}:null,retryLane:536870912,hydrationErrors:null},c=Gg(t),c.return=s,s.child=c,Vi=s,Rn=null)):t=null,t===null)throw ja(s);return O0(t)?s.lanes=32:s.lanes=536870912,null}var k=g.children;return g=g.fallback,E?(Ya(),E=s.mode,k=nh({mode:"hidden",children:k},E),g=Lo(g,E,c,null),k.return=s,g.return=s,k.sibling=g,s.child=k,g=s.child,g.memoizedState=Kd(c),g.childLanes=Wd(t,O,c),s.memoizedState=Xd,Ac(null,g)):(qa(s),Qd(s,k))}var Q=t.memoizedState;if(Q!==null&&(k=Q.dehydrated,k!==null)){if(A)s.flags&256?(qa(s),s.flags&=-257,s=Zd(t,s,c)):s.memoizedState!==null?(Ya(),s.child=t.child,s.flags|=128,s=null):(Ya(),k=g.fallback,E=s.mode,g=nh({mode:"visible",children:g.children},E),k=Lo(k,E,c,null),k.flags|=2,g.return=s,k.return=s,g.sibling=k,s.child=g,Fo(s,t.child,null,c),g=s.child,g.memoizedState=Kd(c),g.childLanes=Wd(t,O,c),s.memoizedState=Xd,s=Ac(null,g));else if(qa(s),O0(k)){if(O=k.nextSibling&&k.nextSibling.dataset,O)var ge=O.dgst;O=ge,g=Error(o(419)),g.stack="",g.digest=O,uc({value:g,source:null,stack:null}),s=Zd(t,s,c)}else if(yi||gl(t,s,c,!1),O=(c&t.childLanes)!==0,yi||O){if(O=bn,O!==null&&(g=ws(O,c),g!==0&&g!==Q.retryLane))throw Q.retryLane=g,Mo(t,g),Ir(O,t,g),qd;R0(k)||hh(),s=Zd(t,s,c)}else R0(k)?(s.flags|=192,s.child=t.child,s=null):(t=Q.treeContext,Rn=ls(k.nextSibling),Vi=s,Wt=!0,Va=null,as=!1,t!==null&&Xg(s,t),s=Qd(s,g.children),s.flags|=4096);return s}return E?(Ya(),k=g.fallback,E=s.mode,Q=t.child,ge=Q.sibling,g=aa(Q,{mode:"hidden",children:g.children}),g.subtreeFlags=Q.subtreeFlags&65011712,ge!==null?k=aa(ge,k):(k=Lo(k,E,c,null),k.flags|=2),k.return=s,g.return=s,g.sibling=k,s.child=g,Ac(null,g),g=s.child,k=t.child.memoizedState,k===null?k=Kd(c):(E=k.cachePool,E!==null?(Q=pi._currentValue,E=E.parent!==Q?{parent:Q,pool:Q}:E):E=$g(),k={baseLanes:k.baseLanes|c,cachePool:E}),g.memoizedState=k,g.childLanes=Wd(t,O,c),s.memoizedState=Xd,Ac(t.child,g)):(qa(s),c=t.child,t=c.sibling,c=aa(c,{mode:"visible",children:g.children}),c.return=s,c.sibling=null,t!==null&&(O=s.deletions,O===null?(s.deletions=[t],s.flags|=16):O.push(t)),s.child=c,s.memoizedState=null,c)}function Qd(t,s){return s=nh({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function nh(t,s){return t=Vr(22,t,null,s),t.lanes=0,t}function Zd(t,s,c){return Fo(s,t.child,null,c),t=Qd(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function fp(t,s,c){t.lanes|=s;var g=t.alternate;g!==null&&(g.lanes|=s),fd(t.return,s,c)}function Jd(t,s,c,g,E,A){var O=t.memoizedState;O===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:g,tail:c,tailMode:E,treeForkCount:A}:(O.isBackwards=s,O.rendering=null,O.renderingStartTime=0,O.last=g,O.tail=c,O.tailMode=E,O.treeForkCount=A)}function dp(t,s,c){var g=s.pendingProps,E=g.revealOrder,A=g.tail;g=g.children;var O=ci.current,k=(O&2)!==0;if(k?(O=O&1|2,s.flags|=128):O&=1,ke(ci,O),Fi(t,s,g,c),g=Wt?cc:0,!k&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&fp(t,c,s);else if(t.tag===19)fp(t,c,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(E){case"forwards":for(c=s.child,E=null;c!==null;)t=c.alternate,t!==null&&Gu(t)===null&&(E=c),c=c.sibling;c=E,c===null?(E=s.child,s.child=null):(E=c.sibling,c.sibling=null),Jd(s,!1,E,c,A,g);break;case"backwards":case"unstable_legacy-backwards":for(c=null,E=s.child,s.child=null;E!==null;){if(t=E.alternate,t!==null&&Gu(t)===null){s.child=E;break}t=E.sibling,E.sibling=c,c=E,E=t}Jd(s,!0,c,null,A,g);break;case"together":Jd(s,!1,null,null,void 0,g);break;default:s.memoizedState=null}return s.child}function fa(t,s,c){if(t!==null&&(s.dependencies=t.dependencies),Wa|=s.lanes,(c&s.childLanes)===0)if(t!==null){if(gl(t,s,c,!1),(c&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(o(153));if(s.child!==null){for(t=s.child,c=aa(t,t.pendingProps),s.child=c,c.return=s;t.sibling!==null;)t=t.sibling,c=c.sibling=aa(t,t.pendingProps),c.return=s;c.sibling=null}return s.child}function $d(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&Bu(t)))}function yb(t,s,c){switch(s.tag){case 3:_t(s,s.stateNode.containerInfo),Fa(s,pi,t.memoizedState.cache),Po();break;case 27:case 5:Li(s);break;case 4:_t(s,s.stateNode.containerInfo);break;case 10:Fa(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Td(s),null;break;case 13:var g=s.memoizedState;if(g!==null)return g.dehydrated!==null?(qa(s),s.flags|=128,null):(c&s.child.childLanes)!==0?hp(t,s,c):(qa(s),t=fa(t,s,c),t!==null?t.sibling:null);qa(s);break;case 19:var E=(t.flags&128)!==0;if(g=(c&s.childLanes)!==0,g||(gl(t,s,c,!1),g=(c&s.childLanes)!==0),E){if(g)return dp(t,s,c);s.flags|=128}if(E=s.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),ke(ci,ci.current),g)break;return null;case 22:return s.lanes=0,sp(t,s,c,s.pendingProps);case 24:Fa(s,pi,t.memoizedState.cache)}return fa(t,s,c)}function gp(t,s,c){if(t!==null)if(t.memoizedProps!==s.pendingProps)yi=!0;else{if(!$d(t,c)&&(s.flags&128)===0)return yi=!1,yb(t,s,c);yi=(t.flags&131072)!==0}else yi=!1,Wt&&(s.flags&1048576)!==0&&Yg(s,cc,s.index);switch(s.lanes=0,s.tag){case 16:e:{var g=s.pendingProps;if(t=Vo(s.elementType),s.type=t,typeof t=="function")rd(t)?(g=Ho(t,g),s.tag=1,s=cp(null,s,t,g,c)):(s.tag=0,s=Yd(null,s,t,g,c));else{if(t!=null){var E=t.$$typeof;if(E===ae){s.tag=11,s=np(null,s,t,g,c);break e}else if(E===j){s.tag=14,s=ip(null,s,t,g,c);break e}}throw s=et(t)||t,Error(o(306,s,""))}}return s;case 0:return Yd(t,s,s.type,s.pendingProps,c);case 1:return g=s.type,E=Ho(g,s.pendingProps),cp(t,s,g,E,c);case 3:e:{if(_t(s,s.stateNode.containerInfo),t===null)throw Error(o(387));g=s.pendingProps;var A=s.memoizedState;E=A.element,Ed(t,s),xc(s,g,null,c);var O=s.memoizedState;if(g=O.cache,Fa(s,pi,g),g!==A.cache&&dd(s,[pi],c,!0),pc(),g=O.element,A.isDehydrated)if(A={element:g,isDehydrated:!1,cache:O.cache},s.updateQueue.baseState=A,s.memoizedState=A,s.flags&256){s=up(t,s,g,c);break e}else if(g!==E){E=is(Error(o(424)),s),uc(E),s=up(t,s,g,c);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Rn=ls(t.firstChild),Vi=s,Wt=!0,Va=null,as=!0,c=sm(s,null,g,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Po(),g===E){s=fa(t,s,c);break e}Fi(t,s,g,c)}s=s.child}return s;case 26:return th(t,s),t===null?(c=v2(s.type,null,s.pendingProps,null))?s.memoizedState=c:Wt||(c=s.type,t=s.pendingProps,g=yh(Le.current).createElement(c),g[vn]=s,g[Vt]=t,zi(g,c,t),$t(g),s.stateNode=g):s.memoizedState=v2(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return Li(s),t===null&&Wt&&(g=s.stateNode=A2(s.type,s.pendingProps,Le.current),Vi=s,as=!0,E=Rn,eo(s.type)?(D0=E,Rn=ls(g.firstChild)):Rn=E),Fi(t,s,s.pendingProps.children,c),th(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&Wt&&((E=g=Rn)&&(g=Kb(g,s.type,s.pendingProps,as),g!==null?(s.stateNode=g,Vi=s,Rn=ls(g.firstChild),as=!1,E=!0):E=!1),E||ja(s)),Li(s),E=s.type,A=s.pendingProps,O=t!==null?t.memoizedProps:null,g=A.children,S0(E,A)?g=null:O!==null&&S0(E,O)&&(s.flags|=32),s.memoizedState!==null&&(E=Cd(t,s,cb,null,null,c),kc._currentValue=E),th(t,s),Fi(t,s,g,c),s.child;case 6:return t===null&&Wt&&((t=c=Rn)&&(c=Wb(c,s.pendingProps,as),c!==null?(s.stateNode=c,Vi=s,Rn=null,t=!0):t=!1),t||ja(s)),null;case 13:return hp(t,s,c);case 4:return _t(s,s.stateNode.containerInfo),g=s.pendingProps,t===null?s.child=Fo(s,null,g,c):Fi(t,s,g,c),s.child;case 11:return np(t,s,s.type,s.pendingProps,c);case 7:return Fi(t,s,s.pendingProps,c),s.child;case 8:return Fi(t,s,s.pendingProps.children,c),s.child;case 12:return Fi(t,s,s.pendingProps.children,c),s.child;case 10:return g=s.pendingProps,Fa(s,s.type,g.value),Fi(t,s,g.children,c),s.child;case 9:return E=s.type._context,g=s.pendingProps.children,ko(s),E=ji(E),g=g(E),s.flags|=1,Fi(t,s,g,c),s.child;case 14:return ip(t,s,s.type,s.pendingProps,c);case 15:return rp(t,s,s.type,s.pendingProps,c);case 19:return dp(t,s,c);case 31:return xb(t,s,c);case 22:return sp(t,s,c,s.pendingProps);case 24:return ko(s),g=ji(pi),t===null?(E=pd(),E===null&&(E=bn,A=gd(),E.pooledCache=A,A.refCount++,A!==null&&(E.pooledCacheLanes|=c),E=A),s.memoizedState={parent:g,cache:E},yd(s),Fa(s,pi,E)):((t.lanes&c)!==0&&(Ed(t,s),xc(s,null,null,c),pc()),E=t.memoizedState,A=s.memoizedState,E.parent!==g?(E={parent:g,cache:g},s.memoizedState=E,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=E),Fa(s,pi,g)):(g=A.cache,Fa(s,pi,g),g!==E.cache&&dd(s,[pi],c,!0))),Fi(t,s,s.pendingProps.children,c),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}function da(t){t.flags|=4}function e0(t,s,c,g,E){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(E&335544128)===E)if(t.stateNode.complete)t.flags|=8192;else if(Fp())t.flags|=8192;else throw jo=ju,xd}else t.flags&=-16777217}function mp(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!R2(s))if(Fp())t.flags|=8192;else throw jo=ju,xd}function ih(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?Ln():536870912,t.lanes|=s,Cl|=s)}function bc(t,s){if(!Wt)switch(t.tailMode){case"hidden":s=t.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?t.tail=null:c.sibling=null;break;case"collapsed":c=t.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:g.sibling=null}}function On(t){var s=t.alternate!==null&&t.alternate.child===t.child,c=0,g=0;if(s)for(var E=t.child;E!==null;)c|=E.lanes|E.childLanes,g|=E.subtreeFlags&65011712,g|=E.flags&65011712,E.return=t,E=E.sibling;else for(E=t.child;E!==null;)c|=E.lanes|E.childLanes,g|=E.subtreeFlags,g|=E.flags,E.return=t,E=E.sibling;return t.subtreeFlags|=g,t.childLanes=c,s}function Eb(t,s,c){var g=s.pendingProps;switch(ld(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return On(s),null;case 1:return On(s),null;case 3:return c=s.stateNode,g=null,t!==null&&(g=t.memoizedState.cache),s.memoizedState.cache!==g&&(s.flags|=2048),ca(pi),Nt(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(t===null||t.child===null)&&(dl(s)?da(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,ud())),On(s),null;case 26:var E=s.type,A=s.memoizedState;return t===null?(da(s),A!==null?(On(s),mp(s,A)):(On(s),e0(s,E,null,g,c))):A?A!==t.memoizedState?(da(s),On(s),mp(s,A)):(On(s),s.flags&=-16777217):(t=t.memoizedProps,t!==g&&da(s),On(s),e0(s,E,t,g,c)),null;case 27:if(Sn(s),c=Le.current,E=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==g&&da(s);else{if(!g){if(s.stateNode===null)throw Error(o(166));return On(s),null}t=Ue.current,dl(s)?Kg(s):(t=A2(E,g,c),s.stateNode=t,da(s))}return On(s),null;case 5:if(Sn(s),E=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==g&&da(s);else{if(!g){if(s.stateNode===null)throw Error(o(166));return On(s),null}if(A=Ue.current,dl(s))Kg(s);else{var O=yh(Le.current);switch(A){case 1:A=O.createElementNS("http://www.w3.org/2000/svg",E);break;case 2:A=O.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;default:switch(E){case"svg":A=O.createElementNS("http://www.w3.org/2000/svg",E);break;case"math":A=O.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;case"script":A=O.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof g.is=="string"?O.createElement("select",{is:g.is}):O.createElement("select"),g.multiple?A.multiple=!0:g.size&&(A.size=g.size);break;default:A=typeof g.is=="string"?O.createElement(E,{is:g.is}):O.createElement(E)}}A[vn]=s,A[Vt]=g;e:for(O=s.child;O!==null;){if(O.tag===5||O.tag===6)A.appendChild(O.stateNode);else if(O.tag!==4&&O.tag!==27&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===s)break e;for(;O.sibling===null;){if(O.return===null||O.return===s)break e;O=O.return}O.sibling.return=O.return,O=O.sibling}s.stateNode=A;e:switch(zi(A,E,g),E){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&da(s)}}return On(s),e0(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,c),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==g&&da(s);else{if(typeof g!="string"&&s.stateNode===null)throw Error(o(166));if(t=Le.current,dl(s)){if(t=s.stateNode,c=s.memoizedProps,g=null,E=Vi,E!==null)switch(E.tag){case 27:case 5:g=E.memoizedProps}t[vn]=s,t=!!(t.nodeValue===c||g!==null&&g.suppressHydrationWarning===!0||h2(t.nodeValue,c)),t||ja(s,!0)}else t=yh(t).createTextNode(g),t[vn]=s,s.stateNode=t}return On(s),null;case 31:if(c=s.memoizedState,t===null||t.memoizedState!==null){if(g=dl(s),c!==null){if(t===null){if(!g)throw Error(o(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(557));t[vn]=s}else Po(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;On(s),t=!1}else c=ud(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=c),t=!0;if(!t)return s.flags&256?(Fr(s),s):(Fr(s),null);if((s.flags&128)!==0)throw Error(o(558))}return On(s),null;case 13:if(g=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(E=dl(s),g!==null&&g.dehydrated!==null){if(t===null){if(!E)throw Error(o(318));if(E=s.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(o(317));E[vn]=s}else Po(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;On(s),E=!1}else E=ud(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=E),E=!0;if(!E)return s.flags&256?(Fr(s),s):(Fr(s),null)}return Fr(s),(s.flags&128)!==0?(s.lanes=c,s):(c=g!==null,t=t!==null&&t.memoizedState!==null,c&&(g=s.child,E=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(E=g.alternate.memoizedState.cachePool.pool),A=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(A=g.memoizedState.cachePool.pool),A!==E&&(g.flags|=2048)),c!==t&&c&&(s.child.flags|=8192),ih(s,s.updateQueue),On(s),null);case 4:return Nt(),t===null&&A0(s.stateNode.containerInfo),On(s),null;case 10:return ca(s.type),On(s),null;case 19:if(Ae(ci),g=s.memoizedState,g===null)return On(s),null;if(E=(s.flags&128)!==0,A=g.rendering,A===null)if(E)bc(g,!1);else{if(ti!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(A=Gu(t),A!==null){for(s.flags|=128,bc(g,!1),t=A.updateQueue,s.updateQueue=t,ih(s,t),s.subtreeFlags=0,t=c,c=s.child;c!==null;)Hg(c,t),c=c.sibling;return ke(ci,ci.current&1|2),Wt&&oa(s,g.treeForkCount),s.child}t=t.sibling}g.tail!==null&&mn()>lh&&(s.flags|=128,E=!0,bc(g,!1),s.lanes=4194304)}else{if(!E)if(t=Gu(A),t!==null){if(s.flags|=128,E=!0,t=t.updateQueue,s.updateQueue=t,ih(s,t),bc(g,!0),g.tail===null&&g.tailMode==="hidden"&&!A.alternate&&!Wt)return On(s),null}else 2*mn()-g.renderingStartTime>lh&&c!==536870912&&(s.flags|=128,E=!0,bc(g,!1),s.lanes=4194304);g.isBackwards?(A.sibling=s.child,s.child=A):(t=g.last,t!==null?t.sibling=A:s.child=A,g.last=A)}return g.tail!==null?(t=g.tail,g.rendering=t,g.tail=t.sibling,g.renderingStartTime=mn(),t.sibling=null,c=ci.current,ke(ci,E?c&1|2:c&1),Wt&&oa(s,g.treeForkCount),t):(On(s),null);case 22:case 23:return Fr(s),bd(),g=s.memoizedState!==null,t!==null?t.memoizedState!==null!==g&&(s.flags|=8192):g&&(s.flags|=8192),g?(c&536870912)!==0&&(s.flags&128)===0&&(On(s),s.subtreeFlags&6&&(s.flags|=8192)):On(s),c=s.updateQueue,c!==null&&ih(s,c.retryQueue),c=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(c=t.memoizedState.cachePool.pool),g=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(g=s.memoizedState.cachePool.pool),g!==c&&(s.flags|=2048),t!==null&&Ae(Uo),null;case 24:return c=null,t!==null&&(c=t.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),ca(pi),On(s),null;case 25:return null;case 30:return null}throw Error(o(156,s.tag))}function _b(t,s){switch(ld(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return ca(pi),Nt(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return Sn(s),null;case 31:if(s.memoizedState!==null){if(Fr(s),s.alternate===null)throw Error(o(340));Po()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(Fr(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(o(340));Po()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return Ae(ci),null;case 4:return Nt(),null;case 10:return ca(s.type),null;case 22:case 23:return Fr(s),bd(),t!==null&&Ae(Uo),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return ca(pi),null;case 25:return null;default:return null}}function pp(t,s){switch(ld(s),s.tag){case 3:ca(pi),Nt();break;case 26:case 27:case 5:Sn(s);break;case 4:Nt();break;case 31:s.memoizedState!==null&&Fr(s);break;case 13:Fr(s);break;case 19:Ae(ci);break;case 10:ca(s.type);break;case 22:case 23:Fr(s),bd(),t!==null&&Ae(Uo);break;case 24:ca(pi)}}function Tc(t,s){try{var c=s.updateQueue,g=c!==null?c.lastEffect:null;if(g!==null){var E=g.next;c=E;do{if((c.tag&t)===t){g=void 0;var A=c.create,O=c.inst;g=A(),O.destroy=g}c=c.next}while(c!==E)}}catch(k){gn(s,s.return,k)}}function Xa(t,s,c){try{var g=s.updateQueue,E=g!==null?g.lastEffect:null;if(E!==null){var A=E.next;g=A;do{if((g.tag&t)===t){var O=g.inst,k=O.destroy;if(k!==void 0){O.destroy=void 0,E=s;var Q=c,ge=k;try{ge()}catch(Te){gn(E,Q,Te)}}}g=g.next}while(g!==A)}}catch(Te){gn(s,s.return,Te)}}function xp(t){var s=t.updateQueue;if(s!==null){var c=t.stateNode;try{om(s,c)}catch(g){gn(t,t.return,g)}}}function yp(t,s,c){c.props=Ho(t.type,t.memoizedProps),c.state=t.memoizedState;try{c.componentWillUnmount()}catch(g){gn(t,s,g)}}function vc(t,s){try{var c=t.ref;if(c!==null){switch(t.tag){case 26:case 27:case 5:var g=t.stateNode;break;case 30:g=t.stateNode;break;default:g=t.stateNode}typeof c=="function"?t.refCleanup=c(g):c.current=g}}catch(E){gn(t,s,E)}}function Vs(t,s){var c=t.ref,g=t.refCleanup;if(c!==null)if(typeof g=="function")try{g()}catch(E){gn(t,s,E)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(E){gn(t,s,E)}else c.current=null}function Ep(t){var s=t.type,c=t.memoizedProps,g=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":c.autoFocus&&g.focus();break e;case"img":c.src?g.src=c.src:c.srcSet&&(g.srcset=c.srcSet)}}catch(E){gn(t,t.return,E)}}function t0(t,s,c){try{var g=t.stateNode;zb(g,t.type,c,s),g[Vt]=s}catch(E){gn(t,t.return,E)}}function _p(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&eo(t.type)||t.tag===4}function n0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||_p(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&eo(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function i0(t,s,c){var g=t.tag;if(g===5||g===6)t=t.stateNode,s?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(t,s):(s=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,s.appendChild(t),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=Ji));else if(g!==4&&(g===27&&eo(t.type)&&(c=t.stateNode,s=null),t=t.child,t!==null))for(i0(t,s,c),t=t.sibling;t!==null;)i0(t,s,c),t=t.sibling}function rh(t,s,c){var g=t.tag;if(g===5||g===6)t=t.stateNode,s?c.insertBefore(t,s):c.appendChild(t);else if(g!==4&&(g===27&&eo(t.type)&&(c=t.stateNode),t=t.child,t!==null))for(rh(t,s,c),t=t.sibling;t!==null;)rh(t,s,c),t=t.sibling}function wp(t){var s=t.stateNode,c=t.memoizedProps;try{for(var g=t.type,E=s.attributes;E.length;)s.removeAttributeNode(E[0]);zi(s,g,c),s[vn]=t,s[Vt]=c}catch(A){gn(t,t.return,A)}}var ga=!1,Ei=!1,r0=!1,Ap=typeof WeakSet=="function"?WeakSet:Set,Di=null;function wb(t,s){if(t=t.containerInfo,v0=vh,t=P(t),B(t)){if("selectionStart"in t)var c={start:t.selectionStart,end:t.selectionEnd};else e:{c=(c=t.ownerDocument)&&c.defaultView||window;var g=c.getSelection&&c.getSelection();if(g&&g.rangeCount!==0){c=g.anchorNode;var E=g.anchorOffset,A=g.focusNode;g=g.focusOffset;try{c.nodeType,A.nodeType}catch{c=null;break e}var O=0,k=-1,Q=-1,ge=0,Te=0,Se=t,xe=null;t:for(;;){for(var we;Se!==c||E!==0&&Se.nodeType!==3||(k=O+E),Se!==A||g!==0&&Se.nodeType!==3||(Q=O+g),Se.nodeType===3&&(O+=Se.nodeValue.length),(we=Se.firstChild)!==null;)xe=Se,Se=we;for(;;){if(Se===t)break t;if(xe===c&&++ge===E&&(k=O),xe===A&&++Te===g&&(Q=O),(we=Se.nextSibling)!==null)break;Se=xe,xe=Se.parentNode}Se=we}c=k===-1||Q===-1?null:{start:k,end:Q}}else c=null}c=c||{start:0,end:0}}else c=null;for(C0={focusedElem:t,selectionRange:c},vh=!1,Di=s;Di!==null;)if(s=Di,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,Di=t;else for(;Di!==null;){switch(s=Di,A=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(c=0;c<t.length;c++)E=t[c],E.ref.impl=E.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&A!==null){t=void 0,c=s,E=A.memoizedProps,A=A.memoizedState,g=c.stateNode;try{var Xe=Ho(c.type,E);t=g.getSnapshotBeforeUpdate(Xe,A),g.__reactInternalSnapshotBeforeUpdate=t}catch(st){gn(c,c.return,st)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,c=t.nodeType,c===9)N0(t);else if(c===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":N0(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(o(163))}if(t=s.sibling,t!==null){t.return=s.return,Di=t;break}Di=s.return}}function bp(t,s,c){var g=c.flags;switch(c.tag){case 0:case 11:case 15:pa(t,c),g&4&&Tc(5,c);break;case 1:if(pa(t,c),g&4)if(t=c.stateNode,s===null)try{t.componentDidMount()}catch(O){gn(c,c.return,O)}else{var E=Ho(c.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(E,s,t.__reactInternalSnapshotBeforeUpdate)}catch(O){gn(c,c.return,O)}}g&64&&xp(c),g&512&&vc(c,c.return);break;case 3:if(pa(t,c),g&64&&(t=c.updateQueue,t!==null)){if(s=null,c.child!==null)switch(c.child.tag){case 27:case 5:s=c.child.stateNode;break;case 1:s=c.child.stateNode}try{om(t,s)}catch(O){gn(c,c.return,O)}}break;case 27:s===null&&g&4&&wp(c);case 26:case 5:pa(t,c),s===null&&g&4&&Ep(c),g&512&&vc(c,c.return);break;case 12:pa(t,c);break;case 31:pa(t,c),g&4&&Cp(t,c);break;case 13:pa(t,c),g&4&&Sp(t,c),g&64&&(t=c.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(c=Rb.bind(null,c),Qb(t,c))));break;case 22:if(g=c.memoizedState!==null||ga,!g){s=s!==null&&s.memoizedState!==null||Ei,E=ga;var A=Ei;ga=g,(Ei=s)&&!A?xa(t,c,(c.subtreeFlags&8772)!==0):pa(t,c),ga=E,Ei=A}break;case 30:break;default:pa(t,c)}}function Tp(t){var s=t.alternate;s!==null&&(t.alternate=null,Tp(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&Zn(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Fn=null,Tr=!1;function ma(t,s,c){for(c=c.child;c!==null;)vp(t,s,c),c=c.sibling}function vp(t,s,c){if(De&&typeof De.onCommitFiberUnmount=="function")try{De.onCommitFiberUnmount(Ut,c)}catch{}switch(c.tag){case 26:Ei||Vs(c,s),ma(t,s,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Ei||Vs(c,s);var g=Fn,E=Tr;eo(c.type)&&(Fn=c.stateNode,Tr=!1),ma(t,s,c),Lc(c.stateNode),Fn=g,Tr=E;break;case 5:Ei||Vs(c,s);case 6:if(g=Fn,E=Tr,Fn=null,ma(t,s,c),Fn=g,Tr=E,Fn!==null)if(Tr)try{(Fn.nodeType===9?Fn.body:Fn.nodeName==="HTML"?Fn.ownerDocument.body:Fn).removeChild(c.stateNode)}catch(A){gn(c,s,A)}else try{Fn.removeChild(c.stateNode)}catch(A){gn(c,s,A)}break;case 18:Fn!==null&&(Tr?(t=Fn,x2(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,c.stateNode),Ll(t)):x2(Fn,c.stateNode));break;case 4:g=Fn,E=Tr,Fn=c.stateNode.containerInfo,Tr=!0,ma(t,s,c),Fn=g,Tr=E;break;case 0:case 11:case 14:case 15:Xa(2,c,s),Ei||Xa(4,c,s),ma(t,s,c);break;case 1:Ei||(Vs(c,s),g=c.stateNode,typeof g.componentWillUnmount=="function"&&yp(c,s,g)),ma(t,s,c);break;case 21:ma(t,s,c);break;case 22:Ei=(g=Ei)||c.memoizedState!==null,ma(t,s,c),Ei=g;break;default:ma(t,s,c)}}function Cp(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ll(t)}catch(c){gn(s,s.return,c)}}}function Sp(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ll(t)}catch(c){gn(s,s.return,c)}}function Ab(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new Ap),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new Ap),s;default:throw Error(o(435,t.tag))}}function sh(t,s){var c=Ab(t);s.forEach(function(g){if(!c.has(g)){c.add(g);var E=Ob.bind(null,t,g);g.then(E,E)}})}function vr(t,s){var c=s.deletions;if(c!==null)for(var g=0;g<c.length;g++){var E=c[g],A=t,O=s,k=O;e:for(;k!==null;){switch(k.tag){case 27:if(eo(k.type)){Fn=k.stateNode,Tr=!1;break e}break;case 5:Fn=k.stateNode,Tr=!1;break e;case 3:case 4:Fn=k.stateNode.containerInfo,Tr=!0;break e}k=k.return}if(Fn===null)throw Error(o(160));vp(A,O,E),Fn=null,Tr=!1,A=E.alternate,A!==null&&(A.return=null),E.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Ip(s,t),s=s.sibling}var Cs=null;function Ip(t,s){var c=t.alternate,g=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:vr(s,t),Cr(t),g&4&&(Xa(3,t,t.return),Tc(3,t),Xa(5,t,t.return));break;case 1:vr(s,t),Cr(t),g&512&&(Ei||c===null||Vs(c,c.return)),g&64&&ga&&(t=t.updateQueue,t!==null&&(g=t.callbacks,g!==null&&(c=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=c===null?g:c.concat(g))));break;case 26:var E=Cs;if(vr(s,t),Cr(t),g&512&&(Ei||c===null||Vs(c,c.return)),g&4){var A=c!==null?c.memoizedState:null;if(g=t.memoizedState,c===null)if(g===null)if(t.stateNode===null){e:{g=t.type,c=t.memoizedProps,E=E.ownerDocument||E;t:switch(g){case"title":A=E.getElementsByTagName("title")[0],(!A||A[Qn]||A[vn]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=E.createElement(g),E.head.insertBefore(A,E.querySelector("head > title"))),zi(A,g,c),A[vn]=t,$t(A),g=A;break e;case"link":var O=I2("link","href",E).get(g+(c.href||""));if(O){for(var k=0;k<O.length;k++)if(A=O[k],A.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&A.getAttribute("rel")===(c.rel==null?null:c.rel)&&A.getAttribute("title")===(c.title==null?null:c.title)&&A.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){O.splice(k,1);break t}}A=E.createElement(g),zi(A,g,c),E.head.appendChild(A);break;case"meta":if(O=I2("meta","content",E).get(g+(c.content||""))){for(k=0;k<O.length;k++)if(A=O[k],A.getAttribute("content")===(c.content==null?null:""+c.content)&&A.getAttribute("name")===(c.name==null?null:c.name)&&A.getAttribute("property")===(c.property==null?null:c.property)&&A.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&A.getAttribute("charset")===(c.charSet==null?null:c.charSet)){O.splice(k,1);break t}}A=E.createElement(g),zi(A,g,c),E.head.appendChild(A);break;default:throw Error(o(468,g))}A[vn]=t,$t(A),g=A}t.stateNode=g}else N2(E,t.type,t.stateNode);else t.stateNode=S2(E,g,t.memoizedProps);else A!==g?(A===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):A.count--,g===null?N2(E,t.type,t.stateNode):S2(E,g,t.memoizedProps)):g===null&&t.stateNode!==null&&t0(t,t.memoizedProps,c.memoizedProps)}break;case 27:vr(s,t),Cr(t),g&512&&(Ei||c===null||Vs(c,c.return)),c!==null&&g&4&&t0(t,t.memoizedProps,c.memoizedProps);break;case 5:if(vr(s,t),Cr(t),g&512&&(Ei||c===null||Vs(c,c.return)),t.flags&32){E=t.stateNode;try{Zi(E,"")}catch(Xe){gn(t,t.return,Xe)}}g&4&&t.stateNode!=null&&(E=t.memoizedProps,t0(t,E,c!==null?c.memoizedProps:E)),g&1024&&(r0=!0);break;case 6:if(vr(s,t),Cr(t),g&4){if(t.stateNode===null)throw Error(o(162));g=t.memoizedProps,c=t.stateNode;try{c.nodeValue=g}catch(Xe){gn(t,t.return,Xe)}}break;case 3:if(wh=null,E=Cs,Cs=Eh(s.containerInfo),vr(s,t),Cs=E,Cr(t),g&4&&c!==null&&c.memoizedState.isDehydrated)try{Ll(s.containerInfo)}catch(Xe){gn(t,t.return,Xe)}r0&&(r0=!1,Np(t));break;case 4:g=Cs,Cs=Eh(t.stateNode.containerInfo),vr(s,t),Cr(t),Cs=g;break;case 12:vr(s,t),Cr(t);break;case 31:vr(s,t),Cr(t),g&4&&(g=t.updateQueue,g!==null&&(t.updateQueue=null,sh(t,g)));break;case 13:vr(s,t),Cr(t),t.child.flags&8192&&t.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(oh=mn()),g&4&&(g=t.updateQueue,g!==null&&(t.updateQueue=null,sh(t,g)));break;case 22:E=t.memoizedState!==null;var Q=c!==null&&c.memoizedState!==null,ge=ga,Te=Ei;if(ga=ge||E,Ei=Te||Q,vr(s,t),Ei=Te,ga=ge,Cr(t),g&8192)e:for(s=t.stateNode,s._visibility=E?s._visibility&-2:s._visibility|1,E&&(c===null||Q||ga||Ei||Go(t)),c=null,s=t;;){if(s.tag===5||s.tag===26){if(c===null){Q=c=s;try{if(A=Q.stateNode,E)O=A.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none";else{k=Q.stateNode;var Se=Q.memoizedProps.style,xe=Se!=null&&Se.hasOwnProperty("display")?Se.display:null;k.style.display=xe==null||typeof xe=="boolean"?"":(""+xe).trim()}}catch(Xe){gn(Q,Q.return,Xe)}}}else if(s.tag===6){if(c===null){Q=s;try{Q.stateNode.nodeValue=E?"":Q.memoizedProps}catch(Xe){gn(Q,Q.return,Xe)}}}else if(s.tag===18){if(c===null){Q=s;try{var we=Q.stateNode;E?y2(we,!0):y2(Q.stateNode,!1)}catch(Xe){gn(Q,Q.return,Xe)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;c===s&&(c=null),s=s.return}c===s&&(c=null),s.sibling.return=s.return,s=s.sibling}g&4&&(g=t.updateQueue,g!==null&&(c=g.retryQueue,c!==null&&(g.retryQueue=null,sh(t,c))));break;case 19:vr(s,t),Cr(t),g&4&&(g=t.updateQueue,g!==null&&(t.updateQueue=null,sh(t,g)));break;case 30:break;case 21:break;default:vr(s,t),Cr(t)}}function Cr(t){var s=t.flags;if(s&2){try{for(var c,g=t.return;g!==null;){if(_p(g)){c=g;break}g=g.return}if(c==null)throw Error(o(160));switch(c.tag){case 27:var E=c.stateNode,A=n0(t);rh(t,A,E);break;case 5:var O=c.stateNode;c.flags&32&&(Zi(O,""),c.flags&=-33);var k=n0(t);rh(t,k,O);break;case 3:case 4:var Q=c.stateNode.containerInfo,ge=n0(t);i0(t,ge,Q);break;default:throw Error(o(161))}}catch(Te){gn(t,t.return,Te)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function Np(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;Np(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function pa(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)bp(t,s.alternate,s),s=s.sibling}function Go(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:Xa(4,s,s.return),Go(s);break;case 1:Vs(s,s.return);var c=s.stateNode;typeof c.componentWillUnmount=="function"&&yp(s,s.return,c),Go(s);break;case 27:Lc(s.stateNode);case 26:case 5:Vs(s,s.return),Go(s);break;case 22:s.memoizedState===null&&Go(s);break;case 30:Go(s);break;default:Go(s)}t=t.sibling}}function xa(t,s,c){for(c=c&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var g=s.alternate,E=t,A=s,O=A.flags;switch(A.tag){case 0:case 11:case 15:xa(E,A,c),Tc(4,A);break;case 1:if(xa(E,A,c),g=A,E=g.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(ge){gn(g,g.return,ge)}if(g=A,E=g.updateQueue,E!==null){var k=g.stateNode;try{var Q=E.shared.hiddenCallbacks;if(Q!==null)for(E.shared.hiddenCallbacks=null,E=0;E<Q.length;E++)am(Q[E],k)}catch(ge){gn(g,g.return,ge)}}c&&O&64&&xp(A),vc(A,A.return);break;case 27:wp(A);case 26:case 5:xa(E,A,c),c&&g===null&&O&4&&Ep(A),vc(A,A.return);break;case 12:xa(E,A,c);break;case 31:xa(E,A,c),c&&O&4&&Cp(E,A);break;case 13:xa(E,A,c),c&&O&4&&Sp(E,A);break;case 22:A.memoizedState===null&&xa(E,A,c),vc(A,A.return);break;case 30:break;default:xa(E,A,c)}s=s.sibling}}function s0(t,s){var c=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(c=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==c&&(t!=null&&t.refCount++,c!=null&&hc(c))}function a0(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&hc(t))}function Ss(t,s,c,g){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Rp(t,s,c,g),s=s.sibling}function Rp(t,s,c,g){var E=s.flags;switch(s.tag){case 0:case 11:case 15:Ss(t,s,c,g),E&2048&&Tc(9,s);break;case 1:Ss(t,s,c,g);break;case 3:Ss(t,s,c,g),E&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&hc(t)));break;case 12:if(E&2048){Ss(t,s,c,g),t=s.stateNode;try{var A=s.memoizedProps,O=A.id,k=A.onPostCommit;typeof k=="function"&&k(O,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(Q){gn(s,s.return,Q)}}else Ss(t,s,c,g);break;case 31:Ss(t,s,c,g);break;case 13:Ss(t,s,c,g);break;case 23:break;case 22:A=s.stateNode,O=s.alternate,s.memoizedState!==null?A._visibility&2?Ss(t,s,c,g):Cc(t,s):A._visibility&2?Ss(t,s,c,g):(A._visibility|=2,bl(t,s,c,g,(s.subtreeFlags&10256)!==0||!1)),E&2048&&s0(O,s);break;case 24:Ss(t,s,c,g),E&2048&&a0(s.alternate,s);break;default:Ss(t,s,c,g)}}function bl(t,s,c,g,E){for(E=E&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var A=t,O=s,k=c,Q=g,ge=O.flags;switch(O.tag){case 0:case 11:case 15:bl(A,O,k,Q,E),Tc(8,O);break;case 23:break;case 22:var Te=O.stateNode;O.memoizedState!==null?Te._visibility&2?bl(A,O,k,Q,E):Cc(A,O):(Te._visibility|=2,bl(A,O,k,Q,E)),E&&ge&2048&&s0(O.alternate,O);break;case 24:bl(A,O,k,Q,E),E&&ge&2048&&a0(O.alternate,O);break;default:bl(A,O,k,Q,E)}s=s.sibling}}function Cc(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var c=t,g=s,E=g.flags;switch(g.tag){case 22:Cc(c,g),E&2048&&s0(g.alternate,g);break;case 24:Cc(c,g),E&2048&&a0(g.alternate,g);break;default:Cc(c,g)}s=s.sibling}}var Sc=8192;function Tl(t,s,c){if(t.subtreeFlags&Sc)for(t=t.child;t!==null;)Op(t,s,c),t=t.sibling}function Op(t,s,c){switch(t.tag){case 26:Tl(t,s,c),t.flags&Sc&&t.memoizedState!==null&&l3(c,Cs,t.memoizedState,t.memoizedProps);break;case 5:Tl(t,s,c);break;case 3:case 4:var g=Cs;Cs=Eh(t.stateNode.containerInfo),Tl(t,s,c),Cs=g;break;case 22:t.memoizedState===null&&(g=t.alternate,g!==null&&g.memoizedState!==null?(g=Sc,Sc=16777216,Tl(t,s,c),Sc=g):Tl(t,s,c));break;default:Tl(t,s,c)}}function Dp(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Ic(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var g=s[c];Di=g,Lp(g,t)}Dp(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Mp(t),t=t.sibling}function Mp(t){switch(t.tag){case 0:case 11:case 15:Ic(t),t.flags&2048&&Xa(9,t,t.return);break;case 3:Ic(t);break;case 12:Ic(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,ah(t)):Ic(t);break;default:Ic(t)}}function ah(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var g=s[c];Di=g,Lp(g,t)}Dp(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:Xa(8,s,s.return),ah(s);break;case 22:c=s.stateNode,c._visibility&2&&(c._visibility&=-3,ah(s));break;default:ah(s)}t=t.sibling}}function Lp(t,s){for(;Di!==null;){var c=Di;switch(c.tag){case 0:case 11:case 15:Xa(8,c,s);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var g=c.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:hc(c.memoizedState.cache)}if(g=c.child,g!==null)g.return=c,Di=g;else e:for(c=t;Di!==null;){g=Di;var E=g.sibling,A=g.return;if(Tp(g),g===c){Di=null;break e}if(E!==null){E.return=A,Di=E;break e}Di=A}}}var bb={getCacheForType:function(t){var s=ji(pi),c=s.data.get(t);return c===void 0&&(c=t(),s.data.set(t,c)),c},cacheSignal:function(){return ji(pi).controller.signal}},Tb=typeof WeakMap=="function"?WeakMap:Map,an=0,bn=null,Pt=null,zt=0,dn=0,zr=null,Ka=!1,vl=!1,o0=!1,ya=0,ti=0,Wa=0,qo=0,l0=0,Hr=0,Cl=0,Nc=null,Sr=null,c0=!1,oh=0,Pp=0,lh=1/0,ch=null,Qa=null,Ii=0,Za=null,Sl=null,Ea=0,u0=0,h0=null,Bp=null,Rc=0,f0=null;function Gr(){return(an&2)!==0&&zt!==0?zt&-zt:pe.T!==null?y0():Ci()}function kp(){if(Hr===0)if((zt&536870912)===0||Wt){var t=bt;bt<<=1,(bt&3932160)===0&&(bt=262144),Hr=t}else Hr=536870912;return t=jr.current,t!==null&&(t.flags|=32),Hr}function Ir(t,s,c){(t===bn&&(dn===2||dn===9)||t.cancelPendingCommit!==null)&&(Il(t,0),Ja(t,zt,Hr,!1)),yr(t,c),((an&2)===0||t!==bn)&&(t===bn&&((an&2)===0&&(qo|=c),ti===4&&Ja(t,zt,Hr,!1)),js(t))}function Up(t,s,c){if((an&6)!==0)throw Error(o(327));var g=!c&&(s&127)===0&&(s&t.expiredLanes)===0||In(t,s),E=g?Sb(t,s):g0(t,s,!0),A=g;do{if(E===0){vl&&!g&&Ja(t,s,0,!1);break}else{if(c=t.current.alternate,A&&!vb(c)){E=g0(t,s,!1),A=!1;continue}if(E===2){if(A=s,t.errorRecoveryDisabledLanes&A)var O=0;else O=t.pendingLanes&-536870913,O=O!==0?O:O&536870912?536870912:0;if(O!==0){s=O;e:{var k=t;E=Nc;var Q=k.current.memoizedState.isDehydrated;if(Q&&(Il(k,O).flags|=256),O=g0(k,O,!1),O!==2){if(o0&&!Q){k.errorRecoveryDisabledLanes|=A,qo|=A,E=4;break e}A=Sr,Sr=E,A!==null&&(Sr===null?Sr=A:Sr.push.apply(Sr,A))}E=O}if(A=!1,E!==2)continue}}if(E===1){Il(t,0),Ja(t,s,0,!0);break}e:{switch(g=t,A=E,A){case 0:case 1:throw Error(o(345));case 4:if((s&4194048)!==s)break;case 6:Ja(g,s,Hr,!Ka);break e;case 2:Sr=null;break;case 3:case 5:break;default:throw Error(o(329))}if((s&62914560)===s&&(E=oh+300-mn(),10<E)){if(Ja(g,s,Hr,!Ka),or(g,0,!0)!==0)break e;Ea=s,g.timeoutHandle=m2(Vp.bind(null,g,c,Sr,ch,c0,s,Hr,qo,Cl,Ka,A,"Throttled",-0,0),E);break e}Vp(g,c,Sr,ch,c0,s,Hr,qo,Cl,Ka,A,null,-0,0)}}break}while(!0);js(t)}function Vp(t,s,c,g,E,A,O,k,Q,ge,Te,Se,xe,we){if(t.timeoutHandle=-1,Se=s.subtreeFlags,Se&8192||(Se&16785408)===16785408){Se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ji},Op(s,A,Se);var Xe=(A&62914560)===A?oh-mn():(A&4194048)===A?Pp-mn():0;if(Xe=c3(Se,Xe),Xe!==null){Ea=A,t.cancelPendingCommit=Xe(Xp.bind(null,t,s,A,c,g,E,O,k,Q,Te,Se,null,xe,we)),Ja(t,A,O,!ge);return}}Xp(t,s,A,c,g,E,O,k,Q)}function vb(t){for(var s=t;;){var c=s.tag;if((c===0||c===11||c===15)&&s.flags&16384&&(c=s.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var g=0;g<c.length;g++){var E=c[g],A=E.getSnapshot;E=E.value;try{if(!m(A(),E))return!1}catch{return!1}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ja(t,s,c,g){s&=~l0,s&=~qo,t.suspendedLanes|=s,t.pingedLanes&=~s,g&&(t.warmLanes|=s),g=t.expirationTimes;for(var E=s;0<E;){var A=31-nt(E),O=1<<A;g[A]=-1,E&=~O}c!==0&&_s(t,c,s)}function uh(){return(an&6)===0?(Oc(0),!1):!0}function d0(){if(Pt!==null){if(dn===0)var t=Pt.return;else t=Pt,la=Bo=null,Nd(t),yl=null,dc=0,t=Pt;for(;t!==null;)pp(t.alternate,t),t=t.return;Pt=null}}function Il(t,s){var c=t.timeoutHandle;c!==-1&&(t.timeoutHandle=-1,qb(c)),c=t.cancelPendingCommit,c!==null&&(t.cancelPendingCommit=null,c()),Ea=0,d0(),bn=t,Pt=c=aa(t.current,null),zt=s,dn=0,zr=null,Ka=!1,vl=In(t,s),o0=!1,Cl=Hr=l0=qo=Wa=ti=0,Sr=Nc=null,c0=!1,(s&8)!==0&&(s|=s&32);var g=t.entangledLanes;if(g!==0)for(t=t.entanglements,g&=s;0<g;){var E=31-nt(g),A=1<<E;s|=t[E],g&=~A}return ya=s,Ou(),c}function jp(t,s){wt=null,pe.H=wc,s===xl||s===Vu?(s=nm(),dn=3):s===xd?(s=nm(),dn=4):dn=s===qd?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,zr=s,Pt===null&&(ti=1,$u(t,is(s,t.current)))}function Fp(){var t=jr.current;return t===null?!0:(zt&4194048)===zt?os===null:(zt&62914560)===zt||(zt&536870912)!==0?t===os:!1}function zp(){var t=pe.H;return pe.H=wc,t===null?wc:t}function Hp(){var t=pe.A;return pe.A=bb,t}function hh(){ti=4,Ka||(zt&4194048)!==zt&&jr.current!==null||(vl=!0),(Wa&134217727)===0&&(qo&134217727)===0||bn===null||Ja(bn,zt,Hr,!1)}function g0(t,s,c){var g=an;an|=2;var E=zp(),A=Hp();(bn!==t||zt!==s)&&(ch=null,Il(t,s)),s=!1;var O=ti;e:do try{if(dn!==0&&Pt!==null){var k=Pt,Q=zr;switch(dn){case 8:d0(),O=6;break e;case 3:case 2:case 9:case 6:jr.current===null&&(s=!0);var ge=dn;if(dn=0,zr=null,Nl(t,k,Q,ge),c&&vl){O=0;break e}break;default:ge=dn,dn=0,zr=null,Nl(t,k,Q,ge)}}Cb(),O=ti;break}catch(Te){jp(t,Te)}while(!0);return s&&t.shellSuspendCounter++,la=Bo=null,an=g,pe.H=E,pe.A=A,Pt===null&&(bn=null,zt=0,Ou()),O}function Cb(){for(;Pt!==null;)Gp(Pt)}function Sb(t,s){var c=an;an|=2;var g=zp(),E=Hp();bn!==t||zt!==s?(ch=null,lh=mn()+500,Il(t,s)):vl=In(t,s);e:do try{if(dn!==0&&Pt!==null){s=Pt;var A=zr;t:switch(dn){case 1:dn=0,zr=null,Nl(t,s,A,1);break;case 2:case 9:if(em(A)){dn=0,zr=null,qp(s);break}s=function(){dn!==2&&dn!==9||bn!==t||(dn=7),js(t)},A.then(s,s);break e;case 3:dn=7;break e;case 4:dn=5;break e;case 7:em(A)?(dn=0,zr=null,qp(s)):(dn=0,zr=null,Nl(t,s,A,7));break;case 5:var O=null;switch(Pt.tag){case 26:O=Pt.memoizedState;case 5:case 27:var k=Pt;if(O?R2(O):k.stateNode.complete){dn=0,zr=null;var Q=k.sibling;if(Q!==null)Pt=Q;else{var ge=k.return;ge!==null?(Pt=ge,fh(ge)):Pt=null}break t}}dn=0,zr=null,Nl(t,s,A,5);break;case 6:dn=0,zr=null,Nl(t,s,A,6);break;case 8:d0(),ti=6;break e;default:throw Error(o(462))}}Ib();break}catch(Te){jp(t,Te)}while(!0);return la=Bo=null,pe.H=g,pe.A=E,an=c,Pt!==null?0:(bn=null,zt=0,Ou(),ti)}function Ib(){for(;Pt!==null&&!ps();)Gp(Pt)}function Gp(t){var s=gp(t.alternate,t,ya);t.memoizedProps=t.pendingProps,s===null?fh(t):Pt=s}function qp(t){var s=t,c=s.alternate;switch(s.tag){case 15:case 0:s=lp(c,s,s.pendingProps,s.type,void 0,zt);break;case 11:s=lp(c,s,s.pendingProps,s.type.render,s.ref,zt);break;case 5:Nd(s);default:pp(c,s),s=Pt=Hg(s,ya),s=gp(c,s,ya)}t.memoizedProps=t.pendingProps,s===null?fh(t):Pt=s}function Nl(t,s,c,g){la=Bo=null,Nd(s),yl=null,dc=0;var E=s.return;try{if(pb(t,E,s,c,zt)){ti=1,$u(t,is(c,t.current)),Pt=null;return}}catch(A){if(E!==null)throw Pt=E,A;ti=1,$u(t,is(c,t.current)),Pt=null;return}s.flags&32768?(Wt||g===1?t=!0:vl||(zt&536870912)!==0?t=!1:(Ka=t=!0,(g===2||g===9||g===3||g===6)&&(g=jr.current,g!==null&&g.tag===13&&(g.flags|=16384))),Yp(s,t)):fh(s)}function fh(t){var s=t;do{if((s.flags&32768)!==0){Yp(s,Ka);return}t=s.return;var c=Eb(s.alternate,s,ya);if(c!==null){Pt=c;return}if(s=s.sibling,s!==null){Pt=s;return}Pt=s=t}while(s!==null);ti===0&&(ti=5)}function Yp(t,s){do{var c=_b(t.alternate,t);if(c!==null){c.flags&=32767,Pt=c;return}if(c=t.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!s&&(t=t.sibling,t!==null)){Pt=t;return}Pt=t=c}while(t!==null);ti=6,Pt=null}function Xp(t,s,c,g,E,A,O,k,Q){t.cancelPendingCommit=null;do dh();while(Ii!==0);if((an&6)!==0)throw Error(o(327));if(s!==null){if(s===t.current)throw Error(o(177));if(A=s.lanes|s.childLanes,A|=nd,Wi(t,c,A,O,k,Q),t===bn&&(Pt=bn=null,zt=0),Sl=s,Za=t,Ea=c,u0=A,h0=E,Bp=g,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Db(gi,function(){return Jp(),null})):(t.callbackNode=null,t.callbackPriority=0),g=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||g){g=pe.T,pe.T=null,E=be.p,be.p=2,O=an,an|=4;try{wb(t,s,c)}finally{an=O,be.p=E,pe.T=g}}Ii=1,Kp(),Wp(),Qp()}}function Kp(){if(Ii===1){Ii=0;var t=Za,s=Sl,c=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||c){c=pe.T,pe.T=null;var g=be.p;be.p=2;var E=an;an|=4;try{Ip(s,t);var A=C0,O=P(t.containerInfo),k=A.focusedElem,Q=A.selectionRange;if(O!==k&&k&&k.ownerDocument&&R(k.ownerDocument.documentElement,k)){if(Q!==null&&B(k)){var ge=Q.start,Te=Q.end;if(Te===void 0&&(Te=ge),"selectionStart"in k)k.selectionStart=ge,k.selectionEnd=Math.min(Te,k.value.length);else{var Se=k.ownerDocument||document,xe=Se&&Se.defaultView||window;if(xe.getSelection){var we=xe.getSelection(),Xe=k.textContent.length,st=Math.min(Q.start,Xe),En=Q.end===void 0?st:Math.min(Q.end,Xe);!we.extend&&st>En&&(O=En,En=st,st=O);var le=C(k,st),re=C(k,En);if(le&&re&&(we.rangeCount!==1||we.anchorNode!==le.node||we.anchorOffset!==le.offset||we.focusNode!==re.node||we.focusOffset!==re.offset)){var de=Se.createRange();de.setStart(le.node,le.offset),we.removeAllRanges(),st>En?(we.addRange(de),we.extend(re.node,re.offset)):(de.setEnd(re.node,re.offset),we.addRange(de))}}}}for(Se=[],we=k;we=we.parentNode;)we.nodeType===1&&Se.push({element:we,left:we.scrollLeft,top:we.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<Se.length;k++){var ve=Se[k];ve.element.scrollLeft=ve.left,ve.element.scrollTop=ve.top}}vh=!!v0,C0=v0=null}finally{an=E,be.p=g,pe.T=c}}t.current=s,Ii=2}}function Wp(){if(Ii===2){Ii=0;var t=Za,s=Sl,c=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||c){c=pe.T,pe.T=null;var g=be.p;be.p=2;var E=an;an|=4;try{bp(t,s.alternate,s)}finally{an=E,be.p=g,pe.T=c}}Ii=3}}function Qp(){if(Ii===4||Ii===3){Ii=0,xs();var t=Za,s=Sl,c=Ea,g=Bp;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Ii=5:(Ii=0,Sl=Za=null,Zp(t,t.pendingLanes));var E=t.pendingLanes;if(E===0&&(Qa=null),vi(c),s=s.stateNode,De&&typeof De.onCommitFiberRoot=="function")try{De.onCommitFiberRoot(Ut,s,void 0,(s.current.flags&128)===128)}catch{}if(g!==null){s=pe.T,E=be.p,be.p=2,pe.T=null;try{for(var A=t.onRecoverableError,O=0;O<g.length;O++){var k=g[O];A(k.value,{componentStack:k.stack})}}finally{pe.T=s,be.p=E}}(Ea&3)!==0&&dh(),js(t),E=t.pendingLanes,(c&261930)!==0&&(E&42)!==0?t===f0?Rc++:(Rc=0,f0=t):Rc=0,Oc(0)}}function Zp(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,hc(s)))}function dh(){return Kp(),Wp(),Qp(),Jp()}function Jp(){if(Ii!==5)return!1;var t=Za,s=u0;u0=0;var c=vi(Ea),g=pe.T,E=be.p;try{be.p=32>c?32:c,pe.T=null,c=h0,h0=null;var A=Za,O=Ea;if(Ii=0,Sl=Za=null,Ea=0,(an&6)!==0)throw Error(o(331));var k=an;if(an|=4,Mp(A.current),Rp(A,A.current,O,c),an=k,Oc(0,!1),De&&typeof De.onPostCommitFiberRoot=="function")try{De.onPostCommitFiberRoot(Ut,A)}catch{}return!0}finally{be.p=E,pe.T=g,Zp(t,s)}}function $p(t,s,c){s=is(c,s),s=Gd(t.stateNode,s,2),t=Ga(t,s,2),t!==null&&(yr(t,2),js(t))}function gn(t,s,c){if(t.tag===3)$p(t,t,c);else for(;s!==null;){if(s.tag===3){$p(s,t,c);break}else if(s.tag===1){var g=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Qa===null||!Qa.has(g))){t=is(c,t),c=ep(2),g=Ga(s,c,2),g!==null&&(tp(c,g,s,t),yr(g,2),js(g));break}}s=s.return}}function m0(t,s,c){var g=t.pingCache;if(g===null){g=t.pingCache=new Tb;var E=new Set;g.set(s,E)}else E=g.get(s),E===void 0&&(E=new Set,g.set(s,E));E.has(c)||(o0=!0,E.add(c),t=Nb.bind(null,t,s,c),s.then(t,t))}function Nb(t,s,c){var g=t.pingCache;g!==null&&g.delete(s),t.pingedLanes|=t.suspendedLanes&c,t.warmLanes&=~c,bn===t&&(zt&c)===c&&(ti===4||ti===3&&(zt&62914560)===zt&&300>mn()-oh?(an&2)===0&&Il(t,0):l0|=c,Cl===zt&&(Cl=0)),js(t)}function e2(t,s){s===0&&(s=Ln()),t=Mo(t,s),t!==null&&(yr(t,s),js(t))}function Rb(t){var s=t.memoizedState,c=0;s!==null&&(c=s.retryLane),e2(t,c)}function Ob(t,s){var c=0;switch(t.tag){case 31:case 13:var g=t.stateNode,E=t.memoizedState;E!==null&&(c=E.retryLane);break;case 19:g=t.stateNode;break;case 22:g=t.stateNode._retryCache;break;default:throw Error(o(314))}g!==null&&g.delete(s),e2(t,c)}function Db(t,s){return _n(t,s)}var gh=null,Rl=null,p0=!1,mh=!1,x0=!1,$a=0;function js(t){t!==Rl&&t.next===null&&(Rl===null?gh=Rl=t:Rl=Rl.next=t),mh=!0,p0||(p0=!0,Lb())}function Oc(t,s){if(!x0&&mh){x0=!0;do for(var c=!1,g=gh;g!==null;){if(t!==0){var E=g.pendingLanes;if(E===0)var A=0;else{var O=g.suspendedLanes,k=g.pingedLanes;A=(1<<31-nt(42|t)+1)-1,A&=E&~(O&~k),A=A&201326741?A&201326741|1:A?A|2:0}A!==0&&(c=!0,r2(g,A))}else A=zt,A=or(g,g===bn?A:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(A&3)===0||In(g,A)||(c=!0,r2(g,A));g=g.next}while(c);x0=!1}}function Mb(){t2()}function t2(){mh=p0=!1;var t=0;$a!==0&&Gb()&&(t=$a);for(var s=mn(),c=null,g=gh;g!==null;){var E=g.next,A=n2(g,s);A===0?(g.next=null,c===null?gh=E:c.next=E,E===null&&(Rl=c)):(c=g,(t!==0||(A&3)!==0)&&(mh=!0)),g=E}Ii!==0&&Ii!==5||Oc(t),$a!==0&&($a=0)}function n2(t,s){for(var c=t.suspendedLanes,g=t.pingedLanes,E=t.expirationTimes,A=t.pendingLanes&-62914561;0<A;){var O=31-nt(A),k=1<<O,Q=E[O];Q===-1?((k&c)===0||(k&g)!==0)&&(E[O]=Ks(k,s)):Q<=s&&(t.expiredLanes|=k),A&=~k}if(s=bn,c=zt,c=or(t,t===s?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),g=t.callbackNode,c===0||t===s&&(dn===2||dn===9)||t.cancelPendingCommit!==null)return g!==null&&g!==null&&Fe(g),t.callbackNode=null,t.callbackPriority=0;if((c&3)===0||In(t,c)){if(s=c&-c,s===t.callbackPriority)return s;switch(g!==null&&Fe(g),vi(c)){case 2:case 8:c=ys;break;case 32:c=gi;break;case 268435456:c=Ns;break;default:c=gi}return g=i2.bind(null,t),c=_n(c,g),t.callbackPriority=s,t.callbackNode=c,s}return g!==null&&g!==null&&Fe(g),t.callbackPriority=2,t.callbackNode=null,2}function i2(t,s){if(Ii!==0&&Ii!==5)return t.callbackNode=null,t.callbackPriority=0,null;var c=t.callbackNode;if(dh()&&t.callbackNode!==c)return null;var g=zt;return g=or(t,t===bn?g:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),g===0?null:(Up(t,g,s),n2(t,mn()),t.callbackNode!=null&&t.callbackNode===c?i2.bind(null,t):null)}function r2(t,s){if(dh())return null;Up(t,s,!0)}function Lb(){Yb(function(){(an&6)!==0?_n(ai,Mb):t2()})}function y0(){if($a===0){var t=ml;t===0&&(t=ar,ar<<=1,(ar&261888)===0&&(ar=256)),$a=t}return $a}function s2(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ms(""+t)}function a2(t,s){var c=s.ownerDocument.createElement("input");return c.name=s.name,c.value=s.value,t.id&&c.setAttribute("form",t.id),s.parentNode.insertBefore(c,s),t=new FormData(t),c.parentNode.removeChild(c),t}function Pb(t,s,c,g,E){if(s==="submit"&&c&&c.stateNode===E){var A=s2((E[Vt]||null).action),O=g.submitter;O&&(s=(s=O[Vt]||null)?s2(s.formAction):O.getAttribute("formAction"),s!==null&&(A=s,O=null));var k=new Nn("action","action",null,g,E);t.push({event:k,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if($a!==0){var Q=O?a2(E,O):new FormData(E);Ud(c,{pending:!0,data:Q,method:E.method,action:A},null,Q)}}else typeof A=="function"&&(k.preventDefault(),Q=O?a2(E,O):new FormData(E),Ud(c,{pending:!0,data:Q,method:E.method,action:A},A,Q))},currentTarget:E}]})}}for(var E0=0;E0<lc.length;E0++){var _0=lc[E0],Bb=_0.toLowerCase(),kb=_0[0].toUpperCase()+_0.slice(1);vs(Bb,"on"+kb)}vs(br,"onAnimationEnd"),vs(Ui,"onAnimationIteration"),vs(un,"onAnimationStart"),vs("dblclick","onDoubleClick"),vs("focusin","onFocus"),vs("focusout","onBlur"),vs(Si,"onTransitionRun"),vs(dr,"onTransitionStart"),vs(ka,"onTransitionCancel"),vs(sa,"onTransitionEnd"),Pi("onMouseEnter",["mouseout","mouseover"]),Pi("onMouseLeave",["mouseout","mouseover"]),Pi("onPointerEnter",["pointerout","pointerover"]),Pi("onPointerLeave",["pointerout","pointerover"]),en("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),en("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),en("onBeforeInput",["compositionend","keypress","textInput","paste"]),en("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),en("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),en("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ub=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Dc));function o2(t,s){s=(s&4)!==0;for(var c=0;c<t.length;c++){var g=t[c],E=g.event;g=g.listeners;e:{var A=void 0;if(s)for(var O=g.length-1;0<=O;O--){var k=g[O],Q=k.instance,ge=k.currentTarget;if(k=k.listener,Q!==A&&E.isPropagationStopped())break e;A=k,E.currentTarget=ge;try{A(E)}catch(Te){Ru(Te)}E.currentTarget=null,A=Q}else for(O=0;O<g.length;O++){if(k=g[O],Q=k.instance,ge=k.currentTarget,k=k.listener,Q!==A&&E.isPropagationStopped())break e;A=k,E.currentTarget=ge;try{A(E)}catch(Te){Ru(Te)}E.currentTarget=null,A=Q}}}}function Bt(t,s){var c=s[at];c===void 0&&(c=s[at]=new Set);var g=t+"__bubble";c.has(g)||(l2(s,t,2,!1),c.add(g))}function w0(t,s,c){var g=0;s&&(g|=4),l2(c,t,g,s)}var ph="_reactListening"+Math.random().toString(36).slice(2);function A0(t){if(!t[ph]){t[ph]=!0,Ie.forEach(function(c){c!=="selectionchange"&&(Ub.has(c)||w0(c,!1,t),w0(c,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[ph]||(s[ph]=!0,w0("selectionchange",!1,s))}}function l2(t,s,c,g){switch(k2(s)){case 2:var E=f3;break;case 8:E=d3;break;default:E=k0}c=E.bind(null,s,c,t),E=void 0,!Qs||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(E=!0),g?E!==void 0?t.addEventListener(s,c,{capture:!0,passive:E}):t.addEventListener(s,c,!0):E!==void 0?t.addEventListener(s,c,{passive:E}):t.addEventListener(s,c,!1)}function b0(t,s,c,g,E){var A=g;if((s&1)===0&&(s&2)===0&&g!==null)e:for(;;){if(g===null)return;var O=g.tag;if(O===3||O===4){var k=g.stateNode.containerInfo;if(k===E)break;if(O===4)for(O=g.return;O!==null;){var Q=O.tag;if((Q===3||Q===4)&&O.stateNode.containerInfo===E)return;O=O.return}for(;k!==null;){if(O=pn(k),O===null)return;if(Q=O.tag,Q===5||Q===6||Q===26||Q===27){g=A=O;continue e}k=k.parentNode}}g=g.return}Ls(function(){var ge=A,Te=_r(c),Se=[];e:{var xe=Nu.get(t);if(xe!==void 0){var we=Nn,Xe=t;switch(t){case"keypress":if(Pr(c)===0)break e;case"keydown":case"keyup":we=ta;break;case"focusin":Xe="focus",we=$s;break;case"focusout":Xe="blur",we=$s;break;case"beforeblur":case"afterblur":we=$s;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=Qt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=Js;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=N;break;case br:case Ui:case un:we=gt;break;case sa:we=F;break;case"scroll":case"scrollend":we=Da;break;case"wheel":we=_e;break;case"copy":case"cut":case"paste":we=ea;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=Lt;break;case"toggle":case"beforetoggle":we=ut}var st=(s&4)!==0,En=!st&&(t==="scroll"||t==="scrollend"),le=st?xe!==null?xe+"Capture":null:xe;st=[];for(var re=ge,de;re!==null;){var ve=re;if(de=ve.stateNode,ve=ve.tag,ve!==5&&ve!==26&&ve!==27||de===null||le===null||(ve=it(re,le),ve!=null&&st.push(Mc(re,ve,de))),En)break;re=re.return}0<st.length&&(xe=new we(xe,Xe,null,c,Te),Se.push({event:xe,listeners:st}))}}if((s&7)===0){e:{if(xe=t==="mouseover"||t==="pointerover",we=t==="mouseout"||t==="pointerout",xe&&c!==Ws&&(Xe=c.relatedTarget||c.fromElement)&&(pn(Xe)||Xe[Z]))break e;if((we||xe)&&(xe=Te.window===Te?Te:(xe=Te.ownerDocument)?xe.defaultView||xe.parentWindow:window,we?(Xe=c.relatedTarget||c.toElement,we=ge,Xe=Xe?pn(Xe):null,Xe!==null&&(En=d(Xe),st=Xe.tag,Xe!==En||st!==5&&st!==27&&st!==6)&&(Xe=null)):(we=null,Xe=ge),we!==Xe)){if(st=Qt,ve="onMouseLeave",le="onMouseEnter",re="mouse",(t==="pointerout"||t==="pointerover")&&(st=Lt,ve="onPointerLeave",le="onPointerEnter",re="pointer"),En=we==null?xe:Bn(we),de=Xe==null?xe:Bn(Xe),xe=new st(ve,re+"leave",we,c,Te),xe.target=En,xe.relatedTarget=de,ve=null,pn(Te)===ge&&(st=new st(le,re+"enter",Xe,c,Te),st.target=de,st.relatedTarget=En,ve=st),En=ve,we&&Xe)t:{for(st=Vb,le=we,re=Xe,de=0,ve=le;ve;ve=st(ve))de++;ve=0;for(var Je=re;Je;Je=st(Je))ve++;for(;0<de-ve;)le=st(le),de--;for(;0<ve-de;)re=st(re),ve--;for(;de--;){if(le===re||re!==null&&le===re.alternate){st=le;break t}le=st(le),re=st(re)}st=null}else st=null;we!==null&&c2(Se,xe,we,st,!1),Xe!==null&&En!==null&&c2(Se,En,Xe,st,!0)}}e:{if(xe=ge?Bn(ge):window,we=xe.nodeName&&xe.nodeName.toLowerCase(),we==="select"||we==="input"&&xe.type==="file")var nn=Ur;else if(oc(xe))if(Iu)nn=h;else{nn=a;var Ke=r}else we=xe.nodeName,!we||we.toLowerCase()!=="input"||xe.type!=="checkbox"&&xe.type!=="radio"?ge&&ln(ge.elementType)&&(nn=Ur):nn=l;if(nn&&(nn=nn(t,ge))){kr(Se,nn,c,Te);break e}Ke&&Ke(t,xe,ge),t==="focusout"&&ge&&xe.type==="number"&&ge.memoizedProps.value!=null&&H(xe,"number",xe.value)}switch(Ke=ge?Bn(ge):window,t){case"focusin":(oc(Ke)||Ke.contentEditable==="true")&&($=Ke,ne=ge,ue=null);break;case"focusout":ue=ne=$=null;break;case"mousedown":Ee=!0;break;case"contextmenu":case"mouseup":case"dragend":Ee=!1,Pe(Se,c,Te);break;case"selectionchange":if(q)break;case"keydown":case"keyup":Pe(Se,c,Te)}var vt;if(Kt)e:{switch(t){case"compositionstart":var Ht="onCompositionStart";break e;case"compositionend":Ht="onCompositionEnd";break e;case"compositionupdate":Ht="onCompositionUpdate";break e}Ht=void 0}else Ba?na(t,c)&&(Ht="onCompositionEnd"):t==="keydown"&&c.keyCode===229&&(Ht="onCompositionStart");Ht&&(es&&c.locale!=="ko"&&(Ba||Ht!=="onCompositionStart"?Ht==="onCompositionEnd"&&Ba&&(vt=As()):(Mr=Te,Lr="value"in Mr?Mr.value:Mr.textContent,Ba=!0)),Ke=xh(ge,Ht),0<Ke.length&&(Ht=new Zr(Ht,t,null,c,Te),Se.push({event:Ht,listeners:Ke}),vt?Ht.data=vt:(vt=ts(c),vt!==null&&(Ht.data=vt)))),(vt=hr?Bs(t,c):ll(t,c))&&(Ht=xh(ge,"onBeforeInput"),0<Ht.length&&(Ke=new Zr("onBeforeInput","beforeinput",null,c,Te),Se.push({event:Ke,listeners:Ht}),Ke.data=vt)),Pb(Se,t,ge,c,Te)}o2(Se,s)})}function Mc(t,s,c){return{instance:t,listener:s,currentTarget:c}}function xh(t,s){for(var c=s+"Capture",g=[];t!==null;){var E=t,A=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||A===null||(E=it(t,c),E!=null&&g.unshift(Mc(t,E,A)),E=it(t,s),E!=null&&g.push(Mc(t,E,A))),t.tag===3)return g;t=t.return}return[]}function Vb(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function c2(t,s,c,g,E){for(var A=s._reactName,O=[];c!==null&&c!==g;){var k=c,Q=k.alternate,ge=k.stateNode;if(k=k.tag,Q!==null&&Q===g)break;k!==5&&k!==26&&k!==27||ge===null||(Q=ge,E?(ge=it(c,A),ge!=null&&O.unshift(Mc(c,ge,Q))):E||(ge=it(c,A),ge!=null&&O.push(Mc(c,ge,Q)))),c=c.return}O.length!==0&&t.push({event:s,listeners:O})}var jb=/\r\n?/g,Fb=/\u0000|\uFFFD/g;function u2(t){return(typeof t=="string"?t:""+t).replace(jb,`
`).replace(Fb,"")}function h2(t,s){return s=u2(s),u2(t)===s}function yn(t,s,c,g,E,A){switch(c){case"children":typeof g=="string"?s==="body"||s==="textarea"&&g===""||Zi(t,g):(typeof g=="number"||typeof g=="bigint")&&s!=="body"&&Zi(t,""+g);break;case"className":Bi(t,"class",g);break;case"tabIndex":Bi(t,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Bi(t,c,g);break;case"style":Qe(t,g,A);break;case"data":if(s!=="object"){Bi(t,"data",g);break}case"src":case"href":if(g===""&&(s!=="a"||c!=="href")){t.removeAttribute(c);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){t.removeAttribute(c);break}g=Ms(""+g),t.setAttribute(c,g);break;case"action":case"formAction":if(typeof g=="function"){t.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(c==="formAction"?(s!=="input"&&yn(t,s,"name",E.name,E,null),yn(t,s,"formEncType",E.formEncType,E,null),yn(t,s,"formMethod",E.formMethod,E,null),yn(t,s,"formTarget",E.formTarget,E,null)):(yn(t,s,"encType",E.encType,E,null),yn(t,s,"method",E.method,E,null),yn(t,s,"target",E.target,E,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){t.removeAttribute(c);break}g=Ms(""+g),t.setAttribute(c,g);break;case"onClick":g!=null&&(t.onclick=Ji);break;case"onScroll":g!=null&&Bt("scroll",t);break;case"onScrollEnd":g!=null&&Bt("scrollend",t);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(o(61));if(c=g.__html,c!=null){if(E.children!=null)throw Error(o(60));t.innerHTML=c}}break;case"multiple":t.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":t.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){t.removeAttribute("xlink:href");break}c=Ms(""+g),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?t.setAttribute(c,""+g):t.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?t.setAttribute(c,""):t.removeAttribute(c);break;case"capture":case"download":g===!0?t.setAttribute(c,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?t.setAttribute(c,g):t.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?t.setAttribute(c,g):t.removeAttribute(c);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?t.removeAttribute(c):t.setAttribute(c,g);break;case"popover":Bt("beforetoggle",t),Bt("toggle",t),Os(t,"popover",g);break;case"xlinkActuate":kn(t,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":kn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":kn(t,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":kn(t,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":kn(t,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":kn(t,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":kn(t,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":kn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":kn(t,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Os(t,"is",g);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=So.get(c)||c,Os(t,c,g))}}function T0(t,s,c,g,E,A){switch(c){case"style":Qe(t,g,A);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(o(61));if(c=g.__html,c!=null){if(E.children!=null)throw Error(o(60));t.innerHTML=c}}break;case"children":typeof g=="string"?Zi(t,g):(typeof g=="number"||typeof g=="bigint")&&Zi(t,""+g);break;case"onScroll":g!=null&&Bt("scroll",t);break;case"onScrollEnd":g!=null&&Bt("scrollend",t);break;case"onClick":g!=null&&(t.onclick=Ji);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!To.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(E=c.endsWith("Capture"),s=c.slice(2,E?c.length-7:void 0),A=t[Vt]||null,A=A!=null?A[c]:null,typeof A=="function"&&t.removeEventListener(s,A,E),typeof g=="function")){typeof A!="function"&&A!==null&&(c in t?t[c]=null:t.hasAttribute(c)&&t.removeAttribute(c)),t.addEventListener(s,g,E);break e}c in t?t[c]=g:g===!0?t.setAttribute(c,""):Os(t,c,g)}}}function zi(t,s,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Bt("error",t),Bt("load",t);var g=!1,E=!1,A;for(A in c)if(c.hasOwnProperty(A)){var O=c[A];if(O!=null)switch(A){case"src":g=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:yn(t,s,A,O,c,null)}}E&&yn(t,s,"srcSet",c.srcSet,c,null),g&&yn(t,s,"src",c.src,c,null);return;case"input":Bt("invalid",t);var k=A=O=E=null,Q=null,ge=null;for(g in c)if(c.hasOwnProperty(g)){var Te=c[g];if(Te!=null)switch(g){case"name":E=Te;break;case"type":O=Te;break;case"checked":Q=Te;break;case"defaultChecked":ge=Te;break;case"value":A=Te;break;case"defaultValue":k=Te;break;case"children":case"dangerouslySetInnerHTML":if(Te!=null)throw Error(o(137,s));break;default:yn(t,s,g,Te,c,null)}}fe(t,A,k,Q,ge,O,E,!1);return;case"select":Bt("invalid",t),g=O=A=null;for(E in c)if(c.hasOwnProperty(E)&&(k=c[E],k!=null))switch(E){case"value":A=k;break;case"defaultValue":O=k;break;case"multiple":g=k;default:yn(t,s,E,k,c,null)}s=A,c=O,t.multiple=!!g,s!=null?Ye(t,!!g,s,!1):c!=null&&Ye(t,!!g,c,!0);return;case"textarea":Bt("invalid",t),A=E=g=null;for(O in c)if(c.hasOwnProperty(O)&&(k=c[O],k!=null))switch(O){case"value":g=k;break;case"defaultValue":E=k;break;case"children":A=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(o(91));break;default:yn(t,s,O,k,c,null)}li(t,g,E,A);return;case"option":for(Q in c)if(c.hasOwnProperty(Q)&&(g=c[Q],g!=null))switch(Q){case"selected":t.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:yn(t,s,Q,g,c,null)}return;case"dialog":Bt("beforetoggle",t),Bt("toggle",t),Bt("cancel",t),Bt("close",t);break;case"iframe":case"object":Bt("load",t);break;case"video":case"audio":for(g=0;g<Dc.length;g++)Bt(Dc[g],t);break;case"image":Bt("error",t),Bt("load",t);break;case"details":Bt("toggle",t);break;case"embed":case"source":case"link":Bt("error",t),Bt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ge in c)if(c.hasOwnProperty(ge)&&(g=c[ge],g!=null))switch(ge){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:yn(t,s,ge,g,c,null)}return;default:if(ln(s)){for(Te in c)c.hasOwnProperty(Te)&&(g=c[Te],g!==void 0&&T0(t,s,Te,g,c,void 0));return}}for(k in c)c.hasOwnProperty(k)&&(g=c[k],g!=null&&yn(t,s,k,g,c,null))}function zb(t,s,c,g){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,A=null,O=null,k=null,Q=null,ge=null,Te=null;for(we in c){var Se=c[we];if(c.hasOwnProperty(we)&&Se!=null)switch(we){case"checked":break;case"value":break;case"defaultValue":Q=Se;default:g.hasOwnProperty(we)||yn(t,s,we,null,g,Se)}}for(var xe in g){var we=g[xe];if(Se=c[xe],g.hasOwnProperty(xe)&&(we!=null||Se!=null))switch(xe){case"type":A=we;break;case"name":E=we;break;case"checked":ge=we;break;case"defaultChecked":Te=we;break;case"value":O=we;break;case"defaultValue":k=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(o(137,s));break;default:we!==Se&&yn(t,s,xe,we,g,Se)}}Hn(t,O,k,Q,ge,Te,A,E);return;case"select":we=O=k=xe=null;for(A in c)if(Q=c[A],c.hasOwnProperty(A)&&Q!=null)switch(A){case"value":break;case"multiple":we=Q;default:g.hasOwnProperty(A)||yn(t,s,A,null,g,Q)}for(E in g)if(A=g[E],Q=c[E],g.hasOwnProperty(E)&&(A!=null||Q!=null))switch(E){case"value":xe=A;break;case"defaultValue":k=A;break;case"multiple":O=A;default:A!==Q&&yn(t,s,E,A,g,Q)}s=k,c=O,g=we,xe!=null?Ye(t,!!c,xe,!1):!!g!=!!c&&(s!=null?Ye(t,!!c,s,!0):Ye(t,!!c,c?[]:"",!1));return;case"textarea":we=xe=null;for(k in c)if(E=c[k],c.hasOwnProperty(k)&&E!=null&&!g.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:yn(t,s,k,null,g,E)}for(O in g)if(E=g[O],A=c[O],g.hasOwnProperty(O)&&(E!=null||A!=null))switch(O){case"value":xe=E;break;case"defaultValue":we=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(o(91));break;default:E!==A&&yn(t,s,O,E,g,A)}Gn(t,xe,we);return;case"option":for(var Xe in c)if(xe=c[Xe],c.hasOwnProperty(Xe)&&xe!=null&&!g.hasOwnProperty(Xe))switch(Xe){case"selected":t.selected=!1;break;default:yn(t,s,Xe,null,g,xe)}for(Q in g)if(xe=g[Q],we=c[Q],g.hasOwnProperty(Q)&&xe!==we&&(xe!=null||we!=null))switch(Q){case"selected":t.selected=xe&&typeof xe!="function"&&typeof xe!="symbol";break;default:yn(t,s,Q,xe,g,we)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var st in c)xe=c[st],c.hasOwnProperty(st)&&xe!=null&&!g.hasOwnProperty(st)&&yn(t,s,st,null,g,xe);for(ge in g)if(xe=g[ge],we=c[ge],g.hasOwnProperty(ge)&&xe!==we&&(xe!=null||we!=null))switch(ge){case"children":case"dangerouslySetInnerHTML":if(xe!=null)throw Error(o(137,s));break;default:yn(t,s,ge,xe,g,we)}return;default:if(ln(s)){for(var En in c)xe=c[En],c.hasOwnProperty(En)&&xe!==void 0&&!g.hasOwnProperty(En)&&T0(t,s,En,void 0,g,xe);for(Te in g)xe=g[Te],we=c[Te],!g.hasOwnProperty(Te)||xe===we||xe===void 0&&we===void 0||T0(t,s,Te,xe,g,we);return}}for(var le in c)xe=c[le],c.hasOwnProperty(le)&&xe!=null&&!g.hasOwnProperty(le)&&yn(t,s,le,null,g,xe);for(Se in g)xe=g[Se],we=c[Se],!g.hasOwnProperty(Se)||xe===we||xe==null&&we==null||yn(t,s,Se,xe,g,we)}function f2(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Hb(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,c=performance.getEntriesByType("resource"),g=0;g<c.length;g++){var E=c[g],A=E.transferSize,O=E.initiatorType,k=E.duration;if(A&&k&&f2(O)){for(O=0,k=E.responseEnd,g+=1;g<c.length;g++){var Q=c[g],ge=Q.startTime;if(ge>k)break;var Te=Q.transferSize,Se=Q.initiatorType;Te&&f2(Se)&&(Q=Q.responseEnd,O+=Te*(Q<k?1:(k-ge)/(Q-ge)))}if(--g,s+=8*(A+O)/(E.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var v0=null,C0=null;function yh(t){return t.nodeType===9?t:t.ownerDocument}function d2(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function g2(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function S0(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var I0=null;function Gb(){var t=window.event;return t&&t.type==="popstate"?t===I0?!1:(I0=t,!0):(I0=null,!1)}var m2=typeof setTimeout=="function"?setTimeout:void 0,qb=typeof clearTimeout=="function"?clearTimeout:void 0,p2=typeof Promise=="function"?Promise:void 0,Yb=typeof queueMicrotask=="function"?queueMicrotask:typeof p2<"u"?function(t){return p2.resolve(null).then(t).catch(Xb)}:m2;function Xb(t){setTimeout(function(){throw t})}function eo(t){return t==="head"}function x2(t,s){var c=s,g=0;do{var E=c.nextSibling;if(t.removeChild(c),E&&E.nodeType===8)if(c=E.data,c==="/$"||c==="/&"){if(g===0){t.removeChild(E),Ll(s);return}g--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")g++;else if(c==="html")Lc(t.ownerDocument.documentElement);else if(c==="head"){c=t.ownerDocument.head,Lc(c);for(var A=c.firstChild;A;){var O=A.nextSibling,k=A.nodeName;A[Qn]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&A.rel.toLowerCase()==="stylesheet"||c.removeChild(A),A=O}}else c==="body"&&Lc(t.ownerDocument.body);c=E}while(c);Ll(s)}function y2(t,s){var c=t;t=0;do{var g=c.nextSibling;if(c.nodeType===1?s?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(s?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),g&&g.nodeType===8)if(c=g.data,c==="/$"){if(t===0)break;t--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||t++;c=g}while(c)}function N0(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var c=s;switch(s=s.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":N0(c),Zn(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}t.removeChild(c)}}function Kb(t,s,c,g){for(;t.nodeType===1;){var E=c;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!g&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(g){if(!t[Qn])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(A=t.getAttribute("rel"),A==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(A!==E.rel||t.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||t.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||t.getAttribute("title")!==(E.title==null?null:E.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(A=t.getAttribute("src"),(A!==(E.src==null?null:E.src)||t.getAttribute("type")!==(E.type==null?null:E.type)||t.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&A&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var A=E.name==null?null:""+E.name;if(E.type==="hidden"&&t.getAttribute("name")===A)return t}else return t;if(t=ls(t.nextSibling),t===null)break}return null}function Wb(t,s,c){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!c||(t=ls(t.nextSibling),t===null))return null;return t}function E2(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=ls(t.nextSibling),t===null))return null;return t}function R0(t){return t.data==="$?"||t.data==="$~"}function O0(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Qb(t,s){var c=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||c.readyState!=="loading")s();else{var g=function(){s(),c.removeEventListener("DOMContentLoaded",g)};c.addEventListener("DOMContentLoaded",g),t._reactRetry=g}}function ls(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var D0=null;function _2(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var c=t.data;if(c==="/$"||c==="/&"){if(s===0)return ls(t.nextSibling);s--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||s++}t=t.nextSibling}return null}function w2(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var c=t.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(s===0)return t;s--}else c!=="/$"&&c!=="/&"||s++}t=t.previousSibling}return null}function A2(t,s,c){switch(s=yh(c),t){case"html":if(t=s.documentElement,!t)throw Error(o(452));return t;case"head":if(t=s.head,!t)throw Error(o(453));return t;case"body":if(t=s.body,!t)throw Error(o(454));return t;default:throw Error(o(451))}}function Lc(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Zn(t)}var cs=new Map,b2=new Set;function Eh(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var _a=be.d;be.d={f:Zb,r:Jb,D:$b,C:e3,L:t3,m:n3,X:r3,S:i3,M:s3};function Zb(){var t=_a.f(),s=uh();return t||s}function Jb(t){var s=Rt(t);s!==null&&s.tag===5&&s.type==="form"?jm(s):_a.r(t)}var Ol=typeof document>"u"?null:document;function T2(t,s,c){var g=Ol;if(g&&typeof s=="string"&&s){var E=Tt(s);E='link[rel="'+t+'"][href="'+E+'"]',typeof c=="string"&&(E+='[crossorigin="'+c+'"]'),b2.has(E)||(b2.add(E),t={rel:t,crossOrigin:c,href:s},g.querySelector(E)===null&&(s=g.createElement("link"),zi(s,"link",t),$t(s),g.head.appendChild(s)))}}function $b(t){_a.D(t),T2("dns-prefetch",t,null)}function e3(t,s){_a.C(t,s),T2("preconnect",t,s)}function t3(t,s,c){_a.L(t,s,c);var g=Ol;if(g&&t&&s){var E='link[rel="preload"][as="'+Tt(s)+'"]';s==="image"&&c&&c.imageSrcSet?(E+='[imagesrcset="'+Tt(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(E+='[imagesizes="'+Tt(c.imageSizes)+'"]')):E+='[href="'+Tt(t)+'"]';var A=E;switch(s){case"style":A=Dl(t);break;case"script":A=Ml(t)}cs.has(A)||(t=I({rel:"preload",href:s==="image"&&c&&c.imageSrcSet?void 0:t,as:s},c),cs.set(A,t),g.querySelector(E)!==null||s==="style"&&g.querySelector(Pc(A))||s==="script"&&g.querySelector(Bc(A))||(s=g.createElement("link"),zi(s,"link",t),$t(s),g.head.appendChild(s)))}}function n3(t,s){_a.m(t,s);var c=Ol;if(c&&t){var g=s&&typeof s.as=="string"?s.as:"script",E='link[rel="modulepreload"][as="'+Tt(g)+'"][href="'+Tt(t)+'"]',A=E;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=Ml(t)}if(!cs.has(A)&&(t=I({rel:"modulepreload",href:t},s),cs.set(A,t),c.querySelector(E)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Bc(A)))return}g=c.createElement("link"),zi(g,"link",t),$t(g),c.head.appendChild(g)}}}function i3(t,s,c){_a.S(t,s,c);var g=Ol;if(g&&t){var E=Jn(g).hoistableStyles,A=Dl(t);s=s||"default";var O=E.get(A);if(!O){var k={loading:0,preload:null};if(O=g.querySelector(Pc(A)))k.loading=5;else{t=I({rel:"stylesheet",href:t,"data-precedence":s},c),(c=cs.get(A))&&M0(t,c);var Q=O=g.createElement("link");$t(Q),zi(Q,"link",t),Q._p=new Promise(function(ge,Te){Q.onload=ge,Q.onerror=Te}),Q.addEventListener("load",function(){k.loading|=1}),Q.addEventListener("error",function(){k.loading|=2}),k.loading|=4,_h(O,s,g)}O={type:"stylesheet",instance:O,count:1,state:k},E.set(A,O)}}}function r3(t,s){_a.X(t,s);var c=Ol;if(c&&t){var g=Jn(c).hoistableScripts,E=Ml(t),A=g.get(E);A||(A=c.querySelector(Bc(E)),A||(t=I({src:t,async:!0},s),(s=cs.get(E))&&L0(t,s),A=c.createElement("script"),$t(A),zi(A,"link",t),c.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},g.set(E,A))}}function s3(t,s){_a.M(t,s);var c=Ol;if(c&&t){var g=Jn(c).hoistableScripts,E=Ml(t),A=g.get(E);A||(A=c.querySelector(Bc(E)),A||(t=I({src:t,async:!0,type:"module"},s),(s=cs.get(E))&&L0(t,s),A=c.createElement("script"),$t(A),zi(A,"link",t),c.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},g.set(E,A))}}function v2(t,s,c,g){var E=(E=Le.current)?Eh(E):null;if(!E)throw Error(o(446));switch(t){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(s=Dl(c.href),c=Jn(E).hoistableStyles,g=c.get(s),g||(g={type:"style",instance:null,count:0,state:null},c.set(s,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){t=Dl(c.href);var A=Jn(E).hoistableStyles,O=A.get(t);if(O||(E=E.ownerDocument||E,O={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(t,O),(A=E.querySelector(Pc(t)))&&!A._p&&(O.instance=A,O.state.loading=5),cs.has(t)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},cs.set(t,c),A||a3(E,t,c,O.state))),s&&g===null)throw Error(o(528,""));return O}if(s&&g!==null)throw Error(o(529,""));return null;case"script":return s=c.async,c=c.src,typeof c=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Ml(c),c=Jn(E).hoistableScripts,g=c.get(s),g||(g={type:"script",instance:null,count:0,state:null},c.set(s,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,t))}}function Dl(t){return'href="'+Tt(t)+'"'}function Pc(t){return'link[rel="stylesheet"]['+t+"]"}function C2(t){return I({},t,{"data-precedence":t.precedence,precedence:null})}function a3(t,s,c,g){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?g.loading=1:(s=t.createElement("link"),g.preload=s,s.addEventListener("load",function(){return g.loading|=1}),s.addEventListener("error",function(){return g.loading|=2}),zi(s,"link",c),$t(s),t.head.appendChild(s))}function Ml(t){return'[src="'+Tt(t)+'"]'}function Bc(t){return"script[async]"+t}function S2(t,s,c){if(s.count++,s.instance===null)switch(s.type){case"style":var g=t.querySelector('style[data-href~="'+Tt(c.href)+'"]');if(g)return s.instance=g,$t(g),g;var E=I({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return g=(t.ownerDocument||t).createElement("style"),$t(g),zi(g,"style",E),_h(g,c.precedence,t),s.instance=g;case"stylesheet":E=Dl(c.href);var A=t.querySelector(Pc(E));if(A)return s.state.loading|=4,s.instance=A,$t(A),A;g=C2(c),(E=cs.get(E))&&M0(g,E),A=(t.ownerDocument||t).createElement("link"),$t(A);var O=A;return O._p=new Promise(function(k,Q){O.onload=k,O.onerror=Q}),zi(A,"link",g),s.state.loading|=4,_h(A,c.precedence,t),s.instance=A;case"script":return A=Ml(c.src),(E=t.querySelector(Bc(A)))?(s.instance=E,$t(E),E):(g=c,(E=cs.get(A))&&(g=I({},c),L0(g,E)),t=t.ownerDocument||t,E=t.createElement("script"),$t(E),zi(E,"link",g),t.head.appendChild(E),s.instance=E);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(g=s.instance,s.state.loading|=4,_h(g,c.precedence,t));return s.instance}function _h(t,s,c){for(var g=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=g.length?g[g.length-1]:null,A=E,O=0;O<g.length;O++){var k=g[O];if(k.dataset.precedence===s)A=k;else if(A!==E)break}A?A.parentNode.insertBefore(t,A.nextSibling):(s=c.nodeType===9?c.head:c,s.insertBefore(t,s.firstChild))}function M0(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function L0(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var wh=null;function I2(t,s,c){if(wh===null){var g=new Map,E=wh=new Map;E.set(c,g)}else E=wh,g=E.get(c),g||(g=new Map,E.set(c,g));if(g.has(t))return g;for(g.set(t,null),c=c.getElementsByTagName(t),E=0;E<c.length;E++){var A=c[E];if(!(A[Qn]||A[vn]||t==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var O=A.getAttribute(s)||"";O=t+O;var k=g.get(O);k?k.push(A):g.set(O,[A])}}return g}function N2(t,s,c){t=t.ownerDocument||t,t.head.insertBefore(c,s==="title"?t.querySelector("head > title"):null)}function o3(t,s,c){if(c===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function R2(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function l3(t,s,c,g){if(c.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var E=Dl(g.href),A=s.querySelector(Pc(E));if(A){s=A._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=Ah.bind(t),s.then(t,t)),c.state.loading|=4,c.instance=A,$t(A);return}A=s.ownerDocument||s,g=C2(g),(E=cs.get(E))&&M0(g,E),A=A.createElement("link"),$t(A);var O=A;O._p=new Promise(function(k,Q){O.onload=k,O.onerror=Q}),zi(A,"link",g),c.instance=A}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(c,s),(s=c.state.preload)&&(c.state.loading&3)===0&&(t.count++,c=Ah.bind(t),s.addEventListener("load",c),s.addEventListener("error",c))}}var P0=0;function c3(t,s){return t.stylesheets&&t.count===0&&Th(t,t.stylesheets),0<t.count||0<t.imgCount?function(c){var g=setTimeout(function(){if(t.stylesheets&&Th(t,t.stylesheets),t.unsuspend){var A=t.unsuspend;t.unsuspend=null,A()}},6e4+s);0<t.imgBytes&&P0===0&&(P0=62500*Hb());var E=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Th(t,t.stylesheets),t.unsuspend)){var A=t.unsuspend;t.unsuspend=null,A()}},(t.imgBytes>P0?50:800)+s);return t.unsuspend=c,function(){t.unsuspend=null,clearTimeout(g),clearTimeout(E)}}:null}function Ah(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Th(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var bh=null;function Th(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,bh=new Map,s.forEach(u3,t),bh=null,Ah.call(t))}function u3(t,s){if(!(s.state.loading&4)){var c=bh.get(t);if(c)var g=c.get(null);else{c=new Map,bh.set(t,c);for(var E=t.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<E.length;A++){var O=E[A];(O.nodeName==="LINK"||O.getAttribute("media")!=="not all")&&(c.set(O.dataset.precedence,O),g=O)}g&&c.set(null,g)}E=s.instance,O=E.getAttribute("data-precedence"),A=c.get(O)||g,A===g&&c.set(null,E),c.set(O,E),this.count++,g=Ah.bind(this),E.addEventListener("load",g),E.addEventListener("error",g),A?A.parentNode.insertBefore(E,A.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(E,t.firstChild)),s.state.loading|=4}}var kc={$$typeof:ee,Provider:null,Consumer:null,_currentValue:qe,_currentValue2:qe,_threadCount:0};function h3(t,s,c,g,E,A,O,k,Q){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ti(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ti(0),this.hiddenUpdates=Ti(null),this.identifierPrefix=g,this.onUncaughtError=E,this.onCaughtError=A,this.onRecoverableError=O,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Q,this.incompleteTransitions=new Map}function O2(t,s,c,g,E,A,O,k,Q,ge,Te,Se){return t=new h3(t,s,c,O,Q,ge,Te,Se,k),s=1,A===!0&&(s|=24),A=Vr(3,null,null,s),t.current=A,A.stateNode=t,s=gd(),s.refCount++,t.pooledCache=s,s.refCount++,A.memoizedState={element:g,isDehydrated:c,cache:s},yd(A),t}function D2(t){return t?(t=ul,t):ul}function M2(t,s,c,g,E,A){E=D2(E),g.context===null?g.context=E:g.pendingContext=E,g=Ha(s),g.payload={element:c},A=A===void 0?null:A,A!==null&&(g.callback=A),c=Ga(t,g,s),c!==null&&(Ir(c,t,s),mc(c,t,s))}function L2(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var c=t.retryLane;t.retryLane=c!==0&&c<s?c:s}}function B0(t,s){L2(t,s),(t=t.alternate)&&L2(t,s)}function P2(t){if(t.tag===13||t.tag===31){var s=Mo(t,67108864);s!==null&&Ir(s,t,67108864),B0(t,67108864)}}function B2(t){if(t.tag===13||t.tag===31){var s=Gr();s=Pn(s);var c=Mo(t,s);c!==null&&Ir(c,t,s),B0(t,s)}}var vh=!0;function f3(t,s,c,g){var E=pe.T;pe.T=null;var A=be.p;try{be.p=2,k0(t,s,c,g)}finally{be.p=A,pe.T=E}}function d3(t,s,c,g){var E=pe.T;pe.T=null;var A=be.p;try{be.p=8,k0(t,s,c,g)}finally{be.p=A,pe.T=E}}function k0(t,s,c,g){if(vh){var E=U0(g);if(E===null)b0(t,s,g,Ch,c),U2(t,g);else if(m3(E,t,s,c,g))g.stopPropagation();else if(U2(t,g),s&4&&-1<g3.indexOf(t)){for(;E!==null;){var A=Rt(E);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var O=Ki(A.pendingLanes);if(O!==0){var k=A;for(k.pendingLanes|=2,k.entangledLanes|=2;O;){var Q=1<<31-nt(O);k.entanglements[1]|=Q,O&=~Q}js(A),(an&6)===0&&(lh=mn()+500,Oc(0))}}break;case 31:case 13:k=Mo(A,2),k!==null&&Ir(k,A,2),uh(),B0(A,2)}if(A=U0(g),A===null&&b0(t,s,g,Ch,c),A===E)break;E=A}E!==null&&g.stopPropagation()}else b0(t,s,g,null,c)}}function U0(t){return t=_r(t),V0(t)}var Ch=null;function V0(t){if(Ch=null,t=pn(t),t!==null){var s=d(t);if(s===null)t=null;else{var c=s.tag;if(c===13){if(t=y(s),t!==null)return t;t=null}else if(c===31){if(t=v(s),t!==null)return t;t=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return Ch=t,null}function k2(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(bi()){case ai:return 2;case ys:return 8;case gi:case Wn:return 32;case Ns:return 268435456;default:return 32}default:return 32}}var j0=!1,to=null,no=null,io=null,Uc=new Map,Vc=new Map,ro=[],g3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function U2(t,s){switch(t){case"focusin":case"focusout":to=null;break;case"dragenter":case"dragleave":no=null;break;case"mouseover":case"mouseout":io=null;break;case"pointerover":case"pointerout":Uc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vc.delete(s.pointerId)}}function jc(t,s,c,g,E,A){return t===null||t.nativeEvent!==A?(t={blockedOn:s,domEventName:c,eventSystemFlags:g,nativeEvent:A,targetContainers:[E]},s!==null&&(s=Rt(s),s!==null&&P2(s)),t):(t.eventSystemFlags|=g,s=t.targetContainers,E!==null&&s.indexOf(E)===-1&&s.push(E),t)}function m3(t,s,c,g,E){switch(s){case"focusin":return to=jc(to,t,s,c,g,E),!0;case"dragenter":return no=jc(no,t,s,c,g,E),!0;case"mouseover":return io=jc(io,t,s,c,g,E),!0;case"pointerover":var A=E.pointerId;return Uc.set(A,jc(Uc.get(A)||null,t,s,c,g,E)),!0;case"gotpointercapture":return A=E.pointerId,Vc.set(A,jc(Vc.get(A)||null,t,s,c,g,E)),!0}return!1}function V2(t){var s=pn(t.target);if(s!==null){var c=d(s);if(c!==null){if(s=c.tag,s===13){if(s=y(c),s!==null){t.blockedOn=s,je(t.priority,function(){B2(c)});return}}else if(s===31){if(s=v(c),s!==null){t.blockedOn=s,je(t.priority,function(){B2(c)});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){t.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Sh(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var c=U0(t.nativeEvent);if(c===null){c=t.nativeEvent;var g=new c.constructor(c.type,c);Ws=g,c.target.dispatchEvent(g),Ws=null}else return s=Rt(c),s!==null&&P2(s),t.blockedOn=c,!1;s.shift()}return!0}function j2(t,s,c){Sh(t)&&c.delete(s)}function p3(){j0=!1,to!==null&&Sh(to)&&(to=null),no!==null&&Sh(no)&&(no=null),io!==null&&Sh(io)&&(io=null),Uc.forEach(j2),Vc.forEach(j2)}function Ih(t,s){t.blockedOn===s&&(t.blockedOn=null,j0||(j0=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,p3)))}var Nh=null;function F2(t){Nh!==t&&(Nh=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Nh===t&&(Nh=null);for(var s=0;s<t.length;s+=3){var c=t[s],g=t[s+1],E=t[s+2];if(typeof g!="function"){if(V0(g||c)===null)continue;break}var A=Rt(c);A!==null&&(t.splice(s,3),s-=3,Ud(A,{pending:!0,data:E,method:c.method,action:g},g,E))}}))}function Ll(t){function s(Q){return Ih(Q,t)}to!==null&&Ih(to,t),no!==null&&Ih(no,t),io!==null&&Ih(io,t),Uc.forEach(s),Vc.forEach(s);for(var c=0;c<ro.length;c++){var g=ro[c];g.blockedOn===t&&(g.blockedOn=null)}for(;0<ro.length&&(c=ro[0],c.blockedOn===null);)V2(c),c.blockedOn===null&&ro.shift();if(c=(t.ownerDocument||t).$$reactFormReplay,c!=null)for(g=0;g<c.length;g+=3){var E=c[g],A=c[g+1],O=E[Vt]||null;if(typeof A=="function")O||F2(c);else if(O){var k=null;if(A&&A.hasAttribute("formAction")){if(E=A,O=A[Vt]||null)k=O.formAction;else if(V0(E)!==null)continue}else k=O.action;typeof k=="function"?c[g+1]=k:(c.splice(g,3),g-=3),F2(c)}}}function z2(){function t(A){A.canIntercept&&A.info==="react-transition"&&A.intercept({handler:function(){return new Promise(function(O){return E=O})},focusReset:"manual",scroll:"manual"})}function s(){E!==null&&(E(),E=null),g||setTimeout(c,20)}function c(){if(!g&&!navigation.transition){var A=navigation.currentEntry;A&&A.url!=null&&navigation.navigate(A.url,{state:A.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,E=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(c,100),function(){g=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),E!==null&&(E(),E=null)}}}function F0(t){this._internalRoot=t}Rh.prototype.render=F0.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(o(409));var c=s.current,g=Gr();M2(c,g,t,s,null,null)},Rh.prototype.unmount=F0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;M2(t.current,2,null,t,null,null),uh(),s[Z]=null}};function Rh(t){this._internalRoot=t}Rh.prototype.unstable_scheduleHydration=function(t){if(t){var s=Ci();t={blockedOn:null,target:t,priority:s};for(var c=0;c<ro.length&&s!==0&&s<ro[c].priority;c++);ro.splice(c,0,t),c===0&&V2(t)}};var H2=e.version;if(H2!=="19.2.3")throw Error(o(527,H2,"19.2.3"));be.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=_(s),t=t!==null?S(t):null,t=t===null?null:t.stateNode,t};var x3={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:pe,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oh.isDisabled&&Oh.supportsFiber)try{Ut=Oh.inject(x3),De=Oh}catch{}}return zc.createRoot=function(t,s){if(!u(t))throw Error(o(299));var c=!1,g="",E=Qm,A=Zm,O=Jm;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(g=s.identifierPrefix),s.onUncaughtError!==void 0&&(E=s.onUncaughtError),s.onCaughtError!==void 0&&(A=s.onCaughtError),s.onRecoverableError!==void 0&&(O=s.onRecoverableError)),s=O2(t,1,!1,null,null,c,g,null,E,A,O,z2),t[Z]=s.current,A0(t),new F0(s)},zc.hydrateRoot=function(t,s,c){if(!u(t))throw Error(o(299));var g=!1,E="",A=Qm,O=Zm,k=Jm,Q=null;return c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(E=c.identifierPrefix),c.onUncaughtError!==void 0&&(A=c.onUncaughtError),c.onCaughtError!==void 0&&(O=c.onCaughtError),c.onRecoverableError!==void 0&&(k=c.onRecoverableError),c.formState!==void 0&&(Q=c.formState)),s=O2(t,1,!0,s,c??null,g,E,Q,A,O,k,z2),s.context=D2(null),c=s.current,g=Gr(),g=Pn(g),E=Ha(g),E.callback=null,Ga(c,E,g),c=g,s.current.lanes=c,yr(s,c),js(s),t[Z]=s.current,A0(t),new Rh(s)},zc.version="19.2.3",zc}var $2;function I3(){if($2)return G0.exports;$2=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),G0.exports=S3(),G0.exports}var N3=I3();const R3=q1(N3);/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ex="popstate";function O3(i={}){function e(u,d){let{pathname:y="/",search:v="",hash:b=""}=nl(u.location.hash.substring(1));return!y.startsWith("/")&&!y.startsWith(".")&&(y="/"+y),c1("",{pathname:y,search:v,hash:b},d.state&&d.state.usr||null,d.state&&d.state.key||"default")}function n(u,d){let y=u.document.querySelector("base"),v="";if(y&&y.getAttribute("href")){let b=u.location.href,_=b.indexOf("#");v=_===-1?b:b.slice(0,_)}return v+"#"+(typeof d=="string"?d:ru(d))}function o(u,d){fs(u.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(d)})`)}return M3(e,n,o,i)}function Xn(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function fs(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function D3(){return Math.random().toString(36).substring(2,10)}function tx(i,e){return{usr:i.state,key:i.key,idx:e}}function c1(i,e,n=null,o){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?nl(e):e,state:n,key:e&&e.key||o||D3()}}function ru({pathname:i="/",search:e="",hash:n=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function nl(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substring(n),i=i.substring(0,n));let o=i.indexOf("?");o>=0&&(e.search=i.substring(o),i=i.substring(0,o)),i&&(e.pathname=i)}return e}function M3(i,e,n,o={}){let{window:u=document.defaultView,v5Compat:d=!1}=o,y=u.history,v="POP",b=null,_=S();_==null&&(_=0,y.replaceState({...y.state,idx:_},""));function S(){return(y.state||{idx:null}).idx}function I(){v="POP";let z=S(),oe=z==null?null:z-_;_=z,b&&b({action:v,location:K.location,delta:oe})}function M(z,oe){v="PUSH";let he=c1(K.location,z,oe);n&&n(he,z),_=S()+1;let ee=tx(he,_),ae=K.createHref(he);try{y.pushState(ee,"",ae)}catch(Ve){if(Ve instanceof DOMException&&Ve.name==="DataCloneError")throw Ve;u.location.assign(ae)}d&&b&&b({action:v,location:K.location,delta:1})}function U(z,oe){v="REPLACE";let he=c1(K.location,z,oe);n&&n(he,z),_=S();let ee=tx(he,_),ae=K.createHref(he);y.replaceState(ee,"",ae),d&&b&&b({action:v,location:K.location,delta:0})}function X(z){return L3(z)}let K={get action(){return v},get location(){return i(u,y)},listen(z){if(b)throw new Error("A history only accepts one active listener");return u.addEventListener(ex,I),b=z,()=>{u.removeEventListener(ex,I),b=null}},createHref(z){return e(u,z)},createURL:X,encodeLocation(z){let oe=X(z);return{pathname:oe.pathname,search:oe.search,hash:oe.hash}},push:M,replace:U,go(z){return y.go(z)}};return K}function L3(i,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Xn(n,"No window.location.(origin|href) available to create URL");let o=typeof i=="string"?i:ru(i);return o=o.replace(/ $/,"%20"),!e&&o.startsWith("//")&&(o=n+o),new URL(o,n)}function KE(i,e,n="/"){return P3(i,e,n,!1)}function P3(i,e,n,o){let u=typeof e=="string"?nl(e):e,d=Ta(u.pathname||"/",n);if(d==null)return null;let y=WE(i);B3(y);let v=null;for(let b=0;v==null&&b<y.length;++b){let _=X3(d);v=q3(y[b],_,o)}return v}function WE(i,e=[],n=[],o="",u=!1){let d=(y,v,b=u,_)=>{let S={relativePath:_===void 0?y.path||"":_,caseSensitive:y.caseSensitive===!0,childrenIndex:v,route:y};if(S.relativePath.startsWith("/")){if(!S.relativePath.startsWith(o)&&b)return;Xn(S.relativePath.startsWith(o),`Absolute route path "${S.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),S.relativePath=S.relativePath.slice(o.length)}let I=Aa([o,S.relativePath]),M=n.concat(S);y.children&&y.children.length>0&&(Xn(y.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${I}".`),WE(y.children,e,M,I,b)),!(y.path==null&&!y.index)&&e.push({path:I,score:H3(I,y.index),routesMeta:M})};return i.forEach((y,v)=>{var b;if(y.path===""||!((b=y.path)!=null&&b.includes("?")))d(y,v);else for(let _ of QE(y.path))d(y,v,!0,_)}),e}function QE(i){let e=i.split("/");if(e.length===0)return[];let[n,...o]=e,u=n.endsWith("?"),d=n.replace(/\?$/,"");if(o.length===0)return u?[d,""]:[d];let y=QE(o.join("/")),v=[];return v.push(...y.map(b=>b===""?d:[d,b].join("/"))),u&&v.push(...y),v.map(b=>i.startsWith("/")&&b===""?"/":b)}function B3(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:G3(e.routesMeta.map(o=>o.childrenIndex),n.routesMeta.map(o=>o.childrenIndex)))}var k3=/^:[\w-]+$/,U3=3,V3=2,j3=1,F3=10,z3=-2,nx=i=>i==="*";function H3(i,e){let n=i.split("/"),o=n.length;return n.some(nx)&&(o+=z3),e&&(o+=V3),n.filter(u=>!nx(u)).reduce((u,d)=>u+(k3.test(d)?U3:d===""?j3:F3),o)}function G3(i,e){return i.length===e.length&&i.slice(0,-1).every((o,u)=>o===e[u])?i[i.length-1]-e[e.length-1]:0}function q3(i,e,n=!1){let{routesMeta:o}=i,u={},d="/",y=[];for(let v=0;v<o.length;++v){let b=o[v],_=v===o.length-1,S=d==="/"?e:e.slice(d.length)||"/",I=ef({path:b.relativePath,caseSensitive:b.caseSensitive,end:_},S),M=b.route;if(!I&&_&&n&&!o[o.length-1].route.index&&(I=ef({path:b.relativePath,caseSensitive:b.caseSensitive,end:!1},S)),!I)return null;Object.assign(u,I.params),y.push({params:u,pathname:Aa([d,I.pathname]),pathnameBase:Z3(Aa([d,I.pathnameBase])),route:M}),I.pathnameBase!=="/"&&(d=Aa([d,I.pathnameBase]))}return y}function ef(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,o]=Y3(i.path,i.caseSensitive,i.end),u=e.match(n);if(!u)return null;let d=u[0],y=d.replace(/(.)\/+$/,"$1"),v=u.slice(1);return{params:o.reduce((_,{paramName:S,isOptional:I},M)=>{if(S==="*"){let X=v[M]||"";y=d.slice(0,d.length-X.length).replace(/(.)\/+$/,"$1")}const U=v[M];return I&&!U?_[S]=void 0:_[S]=(U||"").replace(/%2F/g,"/"),_},{}),pathname:d,pathnameBase:y,pattern:i}}function Y3(i,e=!1,n=!0){fs(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let o=[],u="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(y,v,b)=>(o.push({paramName:v,isOptional:b!=null}),b?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(o.push({paramName:"*"}),u+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?u+="\\/*$":i!==""&&i!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,e?void 0:"i"),o]}function X3(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return fs(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function Ta(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,o=i.charAt(n);return o&&o!=="/"?null:i.slice(n)||"/"}var ZE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,K3=i=>ZE.test(i);function W3(i,e="/"){let{pathname:n,search:o="",hash:u=""}=typeof i=="string"?nl(i):i,d;if(n)if(K3(n))d=n;else{if(n.includes("//")){let y=n;n=n.replace(/\/\/+/g,"/"),fs(!1,`Pathnames cannot have embedded double slashes - normalizing ${y} -> ${n}`)}n.startsWith("/")?d=ix(n.substring(1),"/"):d=ix(n,e)}else d=e;return{pathname:d,search:J3(o),hash:$3(u)}}function ix(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(u=>{u===".."?n.length>1&&n.pop():u!=="."&&n.push(u)}),n.length>1?n.join("/"):"/"}function K0(i,e,n,o){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Q3(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function JE(i){let e=Q3(i);return e.map((n,o)=>o===e.length-1?n.pathname:n.pathnameBase)}function $E(i,e,n,o=!1){let u;typeof i=="string"?u=nl(i):(u={...i},Xn(!u.pathname||!u.pathname.includes("?"),K0("?","pathname","search",u)),Xn(!u.pathname||!u.pathname.includes("#"),K0("#","pathname","hash",u)),Xn(!u.search||!u.search.includes("#"),K0("#","search","hash",u)));let d=i===""||u.pathname==="",y=d?"/":u.pathname,v;if(y==null)v=n;else{let I=e.length-1;if(!o&&y.startsWith("..")){let M=y.split("/");for(;M[0]==="..";)M.shift(),I-=1;u.pathname=M.join("/")}v=I>=0?e[I]:"/"}let b=W3(u,v),_=y&&y!=="/"&&y.endsWith("/"),S=(d||y===".")&&n.endsWith("/");return!b.pathname.endsWith("/")&&(_||S)&&(b.pathname+="/"),b}var Aa=i=>i.join("/").replace(/\/\/+/g,"/"),Z3=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),J3=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,$3=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i,eT=class{constructor(i,e,n,o=!1){this.status=i,this.statusText=e||"",this.internal=o,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function tT(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}function nT(i){return i.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var e_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function t_(i,e){let n=i;if(typeof n!="string"||!ZE.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let o=n,u=!1;if(e_)try{let d=new URL(window.location.href),y=n.startsWith("//")?new URL(d.protocol+n):new URL(n),v=Ta(y.pathname,e);y.origin===d.origin&&v!=null?n=v+y.search+y.hash:u=!0}catch{fs(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:o,isExternal:u,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var n_=["POST","PUT","PATCH","DELETE"];new Set(n_);var iT=["GET",...n_];new Set(iT);var ec=se.createContext(null);ec.displayName="DataRouter";var Rf=se.createContext(null);Rf.displayName="DataRouterState";var rT=se.createContext(!1),i_=se.createContext({isTransitioning:!1});i_.displayName="ViewTransition";var sT=se.createContext(new Map);sT.displayName="Fetchers";var aT=se.createContext(null);aT.displayName="Await";var ms=se.createContext(null);ms.displayName="Navigation";var mu=se.createContext(null);mu.displayName="Location";var Na=se.createContext({outlet:null,matches:[],isDataRoute:!1});Na.displayName="Route";var X1=se.createContext(null);X1.displayName="RouteError";var r_="REACT_ROUTER_ERROR",oT="REDIRECT",lT="ROUTE_ERROR_RESPONSE";function cT(i){if(i.startsWith(`${r_}:${oT}:{`))try{let e=JSON.parse(i.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function uT(i){if(i.startsWith(`${r_}:${lT}:{`))try{let e=JSON.parse(i.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new eT(e.status,e.statusText,e.data)}catch{}}function hT(i,{relative:e}={}){Xn(pu(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:o}=se.useContext(ms),{hash:u,pathname:d,search:y}=xu(i,{relative:e}),v=d;return n!=="/"&&(v=d==="/"?n:Aa([n,d])),o.createHref({pathname:v,search:y,hash:u})}function pu(){return se.useContext(mu)!=null}function wo(){return Xn(pu(),"useLocation() may be used only in the context of a <Router> component."),se.useContext(mu).location}var s_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function a_(i){se.useContext(ms).static||se.useLayoutEffect(i)}function fT(){let{isDataRoute:i}=se.useContext(Na);return i?vT():dT()}function dT(){Xn(pu(),"useNavigate() may be used only in the context of a <Router> component.");let i=se.useContext(ec),{basename:e,navigator:n}=se.useContext(ms),{matches:o}=se.useContext(Na),{pathname:u}=wo(),d=JSON.stringify(JE(o)),y=se.useRef(!1);return a_(()=>{y.current=!0}),se.useCallback((b,_={})=>{if(fs(y.current,s_),!y.current)return;if(typeof b=="number"){n.go(b);return}let S=$E(b,JSON.parse(d),u,_.relative==="path");i==null&&e!=="/"&&(S.pathname=S.pathname==="/"?e:Aa([e,S.pathname])),(_.replace?n.replace:n.push)(S,_.state,_)},[e,n,d,u,i])}se.createContext(null);function xu(i,{relative:e}={}){let{matches:n}=se.useContext(Na),{pathname:o}=wo(),u=JSON.stringify(JE(n));return se.useMemo(()=>$E(i,JSON.parse(u),o,e==="path"),[i,u,o,e])}function gT(i,e){return o_(i,e)}function o_(i,e,n,o,u){var he;Xn(pu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:d}=se.useContext(ms),{matches:y}=se.useContext(Na),v=y[y.length-1],b=v?v.params:{},_=v?v.pathname:"/",S=v?v.pathnameBase:"/",I=v&&v.route;{let ee=I&&I.path||"";c_(_,!I||ee.endsWith("*")||ee.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${_}" (under <Route path="${ee}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${ee}"> to <Route path="${ee==="/"?"*":`${ee}/*`}">.`)}let M=wo(),U;if(e){let ee=typeof e=="string"?nl(e):e;Xn(S==="/"||((he=ee.pathname)==null?void 0:he.startsWith(S)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${S}" but pathname "${ee.pathname}" was given in the \`location\` prop.`),U=ee}else U=M;let X=U.pathname||"/",K=X;if(S!=="/"){let ee=S.replace(/^\//,"").split("/");K="/"+X.replace(/^\//,"").split("/").slice(ee.length).join("/")}let z=KE(i,{pathname:K});fs(I||z!=null,`No routes matched location "${U.pathname}${U.search}${U.hash}" `),fs(z==null||z[z.length-1].route.element!==void 0||z[z.length-1].route.Component!==void 0||z[z.length-1].route.lazy!==void 0,`Matched leaf route at location "${U.pathname}${U.search}${U.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let oe=ET(z&&z.map(ee=>Object.assign({},ee,{params:Object.assign({},b,ee.params),pathname:Aa([S,d.encodeLocation?d.encodeLocation(ee.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:ee.pathname]),pathnameBase:ee.pathnameBase==="/"?S:Aa([S,d.encodeLocation?d.encodeLocation(ee.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:ee.pathnameBase])})),y,n,o,u);return e&&oe?se.createElement(mu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...U},navigationType:"POP"}},oe):oe}function mT(){let i=TT(),e=tT(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,o="rgba(200,200,200, 0.5)",u={padding:"0.5rem",backgroundColor:o},d={padding:"2px 4px",backgroundColor:o},y=null;return console.error("Error handled by React Router default ErrorBoundary:",i),y=se.createElement(se.Fragment,null,se.createElement("p",null," Hey developer "),se.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",se.createElement("code",{style:d},"ErrorBoundary")," or"," ",se.createElement("code",{style:d},"errorElement")," prop on your route.")),se.createElement(se.Fragment,null,se.createElement("h2",null,"Unexpected Application Error!"),se.createElement("h3",{style:{fontStyle:"italic"}},e),n?se.createElement("pre",{style:u},n):null,y)}var pT=se.createElement(mT,null),l_=class extends se.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){this.props.onError?this.props.onError(i,e):console.error("React Router caught the following error during render",i)}render(){let i=this.state.error;if(this.context&&typeof i=="object"&&i&&"digest"in i&&typeof i.digest=="string"){const n=uT(i.digest);n&&(i=n)}let e=i!==void 0?se.createElement(Na.Provider,{value:this.props.routeContext},se.createElement(X1.Provider,{value:i,children:this.props.component})):this.props.children;return this.context?se.createElement(xT,{error:i},e):e}};l_.contextType=rT;var W0=new WeakMap;function xT({children:i,error:e}){let{basename:n}=se.useContext(ms);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let o=cT(e.digest);if(o){let u=W0.get(e);if(u)throw u;let d=t_(o.location,n);if(e_&&!W0.get(e))if(d.isExternal||o.reloadDocument)window.location.href=d.absoluteURL||d.to;else{const y=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(d.to,{replace:o.replace}));throw W0.set(e,y),y}return se.createElement("meta",{httpEquiv:"refresh",content:`0;url=${d.absoluteURL||d.to}`})}}return i}function yT({routeContext:i,match:e,children:n}){let o=se.useContext(ec);return o&&o.static&&o.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=e.route.id),se.createElement(Na.Provider,{value:i},n)}function ET(i,e=[],n=null,o=null,u=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let d=i,y=n==null?void 0:n.errors;if(y!=null){let S=d.findIndex(I=>I.route.id&&(y==null?void 0:y[I.route.id])!==void 0);Xn(S>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(y).join(",")}`),d=d.slice(0,Math.min(d.length,S+1))}let v=!1,b=-1;if(n)for(let S=0;S<d.length;S++){let I=d[S];if((I.route.HydrateFallback||I.route.hydrateFallbackElement)&&(b=S),I.route.id){let{loaderData:M,errors:U}=n,X=I.route.loader&&!M.hasOwnProperty(I.route.id)&&(!U||U[I.route.id]===void 0);if(I.route.lazy||X){v=!0,b>=0?d=d.slice(0,b+1):d=[d[0]];break}}}let _=n&&o?(S,I)=>{var M,U;o(S,{location:n.location,params:((U=(M=n.matches)==null?void 0:M[0])==null?void 0:U.params)??{},unstable_pattern:nT(n.matches),errorInfo:I})}:void 0;return d.reduceRight((S,I,M)=>{let U,X=!1,K=null,z=null;n&&(U=y&&I.route.id?y[I.route.id]:void 0,K=I.route.errorElement||pT,v&&(b<0&&M===0?(c_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),X=!0,z=null):b===M&&(X=!0,z=I.route.hydrateFallbackElement||null)));let oe=e.concat(d.slice(0,M+1)),he=()=>{let ee;return U?ee=K:X?ee=z:I.route.Component?ee=se.createElement(I.route.Component,null):I.route.element?ee=I.route.element:ee=S,se.createElement(yT,{match:I,routeContext:{outlet:S,matches:oe,isDataRoute:n!=null},children:ee})};return n&&(I.route.ErrorBoundary||I.route.errorElement||M===0)?se.createElement(l_,{location:n.location,revalidation:n.revalidation,component:K,error:U,children:he(),routeContext:{outlet:null,matches:oe,isDataRoute:!0},onError:_}):he()},null)}function K1(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _T(i){let e=se.useContext(ec);return Xn(e,K1(i)),e}function wT(i){let e=se.useContext(Rf);return Xn(e,K1(i)),e}function AT(i){let e=se.useContext(Na);return Xn(e,K1(i)),e}function W1(i){let e=AT(i),n=e.matches[e.matches.length-1];return Xn(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function bT(){return W1("useRouteId")}function TT(){var o;let i=se.useContext(X1),e=wT("useRouteError"),n=W1("useRouteError");return i!==void 0?i:(o=e.errors)==null?void 0:o[n]}function vT(){let{router:i}=_T("useNavigate"),e=W1("useNavigate"),n=se.useRef(!1);return a_(()=>{n.current=!0}),se.useCallback(async(u,d={})=>{fs(n.current,s_),n.current&&(typeof u=="number"?await i.navigate(u):await i.navigate(u,{fromRouteId:e,...d}))},[i,e])}var rx={};function c_(i,e,n){!e&&!rx[i]&&(rx[i]=!0,fs(!1,n))}se.memo(CT);function CT({routes:i,future:e,state:n,onError:o}){return o_(i,void 0,n,o,e)}function Yo(i){Xn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ST({basename:i="/",children:e=null,location:n,navigationType:o="POP",navigator:u,static:d=!1,unstable_useTransitions:y}){Xn(!pu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let v=i.replace(/^\/*/,"/"),b=se.useMemo(()=>({basename:v,navigator:u,static:d,unstable_useTransitions:y,future:{}}),[v,u,d,y]);typeof n=="string"&&(n=nl(n));let{pathname:_="/",search:S="",hash:I="",state:M=null,key:U="default"}=n,X=se.useMemo(()=>{let K=Ta(_,v);return K==null?null:{location:{pathname:K,search:S,hash:I,state:M,key:U},navigationType:o}},[v,_,S,I,M,U,o]);return fs(X!=null,`<Router basename="${v}"> is not able to match the URL "${_}${S}${I}" because it does not start with the basename, so the <Router> won't render anything.`),X==null?null:se.createElement(ms.Provider,{value:b},se.createElement(mu.Provider,{children:e,value:X}))}function IT({children:i,location:e}){return gT(u1(i),e)}function u1(i,e=[]){let n=[];return se.Children.forEach(i,(o,u)=>{if(!se.isValidElement(o))return;let d=[...e,u];if(o.type===se.Fragment){n.push.apply(n,u1(o.props.children,d));return}Xn(o.type===Yo,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Xn(!o.props.index||!o.props.children,"An index route cannot have child routes.");let y={id:o.props.id||d.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,middleware:o.props.middleware,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(y.children=u1(o.props.children,d)),n.push(y)}),n}var qh="get",Yh="application/x-www-form-urlencoded";function Of(i){return typeof HTMLElement<"u"&&i instanceof HTMLElement}function NT(i){return Of(i)&&i.tagName.toLowerCase()==="button"}function RT(i){return Of(i)&&i.tagName.toLowerCase()==="form"}function OT(i){return Of(i)&&i.tagName.toLowerCase()==="input"}function DT(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function MT(i,e){return i.button===0&&(!e||e==="_self")&&!DT(i)}var Mh=null;function LT(){if(Mh===null)try{new FormData(document.createElement("form"),0),Mh=!1}catch{Mh=!0}return Mh}var PT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Q0(i){return i!=null&&!PT.has(i)?(fs(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Yh}"`),null):i}function BT(i,e){let n,o,u,d,y;if(RT(i)){let v=i.getAttribute("action");o=v?Ta(v,e):null,n=i.getAttribute("method")||qh,u=Q0(i.getAttribute("enctype"))||Yh,d=new FormData(i)}else if(NT(i)||OT(i)&&(i.type==="submit"||i.type==="image")){let v=i.form;if(v==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let b=i.getAttribute("formaction")||v.getAttribute("action");if(o=b?Ta(b,e):null,n=i.getAttribute("formmethod")||v.getAttribute("method")||qh,u=Q0(i.getAttribute("formenctype"))||Q0(v.getAttribute("enctype"))||Yh,d=new FormData(v,i),!LT()){let{name:_,type:S,value:I}=i;if(S==="image"){let M=_?`${_}.`:"";d.append(`${M}x`,"0"),d.append(`${M}y`,"0")}else _&&d.append(_,I)}}else{if(Of(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=qh,o=null,u=Yh,y=i}return d&&u==="text/plain"&&(y=d,d=void 0),{action:o,method:n.toLowerCase(),encType:u,formData:d,body:y}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Q1(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function kT(i,e,n,o){let u=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return n?u.pathname.endsWith("/")?u.pathname=`${u.pathname}_.${o}`:u.pathname=`${u.pathname}.${o}`:u.pathname==="/"?u.pathname=`_root.${o}`:e&&Ta(u.pathname,e)==="/"?u.pathname=`${e.replace(/\/$/,"")}/_root.${o}`:u.pathname=`${u.pathname.replace(/\/$/,"")}.${o}`,u}async function UT(i,e){if(i.id in e)return e[i.id];try{let n=await import(i.module);return e[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function VT(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function jT(i,e,n){let o=await Promise.all(i.map(async u=>{let d=e.routes[u.route.id];if(d){let y=await UT(d,n);return y.links?y.links():[]}return[]}));return GT(o.flat(1).filter(VT).filter(u=>u.rel==="stylesheet"||u.rel==="preload").map(u=>u.rel==="stylesheet"?{...u,rel:"prefetch",as:"style"}:{...u,rel:"prefetch"}))}function sx(i,e,n,o,u,d){let y=(b,_)=>n[_]?b.route.id!==n[_].route.id:!0,v=(b,_)=>{var S;return n[_].pathname!==b.pathname||((S=n[_].route.path)==null?void 0:S.endsWith("*"))&&n[_].params["*"]!==b.params["*"]};return d==="assets"?e.filter((b,_)=>y(b,_)||v(b,_)):d==="data"?e.filter((b,_)=>{var I;let S=o.routes[b.route.id];if(!S||!S.hasLoader)return!1;if(y(b,_)||v(b,_))return!0;if(b.route.shouldRevalidate){let M=b.route.shouldRevalidate({currentUrl:new URL(u.pathname+u.search+u.hash,window.origin),currentParams:((I=n[0])==null?void 0:I.params)||{},nextUrl:new URL(i,window.origin),nextParams:b.params,defaultShouldRevalidate:!0});if(typeof M=="boolean")return M}return!0}):[]}function FT(i,e,{includeHydrateFallback:n}={}){return zT(i.map(o=>{let u=e.routes[o.route.id];if(!u)return[];let d=[u.module];return u.clientActionModule&&(d=d.concat(u.clientActionModule)),u.clientLoaderModule&&(d=d.concat(u.clientLoaderModule)),n&&u.hydrateFallbackModule&&(d=d.concat(u.hydrateFallbackModule)),u.imports&&(d=d.concat(u.imports)),d}).flat(1))}function zT(i){return[...new Set(i)]}function HT(i){let e={},n=Object.keys(i).sort();for(let o of n)e[o]=i[o];return e}function GT(i,e){let n=new Set;return new Set(e),i.reduce((o,u)=>{let d=JSON.stringify(HT(u));return n.has(d)||(n.add(d),o.push({key:d,link:u})),o},[])}function u_(){let i=se.useContext(ec);return Q1(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function qT(){let i=se.useContext(Rf);return Q1(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Z1=se.createContext(void 0);Z1.displayName="FrameworkContext";function h_(){let i=se.useContext(Z1);return Q1(i,"You must render this element inside a <HydratedRouter> element"),i}function YT(i,e){let n=se.useContext(Z1),[o,u]=se.useState(!1),[d,y]=se.useState(!1),{onFocus:v,onBlur:b,onMouseEnter:_,onMouseLeave:S,onTouchStart:I}=e,M=se.useRef(null);se.useEffect(()=>{if(i==="render"&&y(!0),i==="viewport"){let K=oe=>{oe.forEach(he=>{y(he.isIntersecting)})},z=new IntersectionObserver(K,{threshold:.5});return M.current&&z.observe(M.current),()=>{z.disconnect()}}},[i]),se.useEffect(()=>{if(o){let K=setTimeout(()=>{y(!0)},100);return()=>{clearTimeout(K)}}},[o]);let U=()=>{u(!0)},X=()=>{u(!1),y(!1)};return n?i!=="intent"?[d,M,{}]:[d,M,{onFocus:Hc(v,U),onBlur:Hc(b,X),onMouseEnter:Hc(_,U),onMouseLeave:Hc(S,X),onTouchStart:Hc(I,U)}]:[!1,M,{}]}function Hc(i,e){return n=>{i&&i(n),n.defaultPrevented||e(n)}}function XT({page:i,...e}){let{router:n}=u_(),o=se.useMemo(()=>KE(n.routes,i,n.basename),[n.routes,i,n.basename]);return o?se.createElement(WT,{page:i,matches:o,...e}):null}function KT(i){let{manifest:e,routeModules:n}=h_(),[o,u]=se.useState([]);return se.useEffect(()=>{let d=!1;return jT(i,e,n).then(y=>{d||u(y)}),()=>{d=!0}},[i,e,n]),o}function WT({page:i,matches:e,...n}){let o=wo(),{future:u,manifest:d,routeModules:y}=h_(),{basename:v}=u_(),{loaderData:b,matches:_}=qT(),S=se.useMemo(()=>sx(i,e,_,d,o,"data"),[i,e,_,d,o]),I=se.useMemo(()=>sx(i,e,_,d,o,"assets"),[i,e,_,d,o]),M=se.useMemo(()=>{if(i===o.pathname+o.search+o.hash)return[];let K=new Set,z=!1;if(e.forEach(he=>{var ae;let ee=d.routes[he.route.id];!ee||!ee.hasLoader||(!S.some(Ve=>Ve.route.id===he.route.id)&&he.route.id in b&&((ae=y[he.route.id])!=null&&ae.shouldRevalidate)||ee.hasClientLoader?z=!0:K.add(he.route.id))}),K.size===0)return[];let oe=kT(i,v,u.unstable_trailingSlashAwareDataRequests,"data");return z&&K.size>0&&oe.searchParams.set("_routes",e.filter(he=>K.has(he.route.id)).map(he=>he.route.id).join(",")),[oe.pathname+oe.search]},[v,u.unstable_trailingSlashAwareDataRequests,b,o,d,S,e,i,y]),U=se.useMemo(()=>FT(I,d),[I,d]),X=KT(I);return se.createElement(se.Fragment,null,M.map(K=>se.createElement("link",{key:K,rel:"prefetch",as:"fetch",href:K,...n})),U.map(K=>se.createElement("link",{key:K,rel:"modulepreload",href:K,...n})),X.map(({key:K,link:z})=>se.createElement("link",{key:K,nonce:n.nonce,...z})))}function QT(...i){return e=>{i.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var ZT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ZT&&(window.__reactRouterVersion="7.12.0")}catch{}function JT({basename:i,children:e,unstable_useTransitions:n,window:o}){let u=se.useRef();u.current==null&&(u.current=O3({window:o,v5Compat:!0}));let d=u.current,[y,v]=se.useState({action:d.action,location:d.location}),b=se.useCallback(_=>{n===!1?v(_):se.startTransition(()=>v(_))},[n]);return se.useLayoutEffect(()=>d.listen(b),[d,b]),se.createElement(ST,{basename:i,children:e,location:y.location,navigationType:y.action,navigator:d,unstable_useTransitions:n})}var f_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tf=se.forwardRef(function({onClick:e,discover:n="render",prefetch:o="none",relative:u,reloadDocument:d,replace:y,state:v,target:b,to:_,preventScrollReset:S,viewTransition:I,unstable_defaultShouldRevalidate:M,...U},X){let{basename:K,unstable_useTransitions:z}=se.useContext(ms),oe=typeof _=="string"&&f_.test(_),he=t_(_,K);_=he.to;let ee=hT(_,{relative:u}),[ae,Ve,Ne]=YT(o,U),j=nv(_,{replace:y,state:v,target:b,preventScrollReset:S,relative:u,viewTransition:I,unstable_defaultShouldRevalidate:M,unstable_useTransitions:z});function G(te){e&&e(te),te.defaultPrevented||j(te)}let V=se.createElement("a",{...U,...Ne,href:he.absoluteURL||ee,onClick:he.isExternal||d?e:G,ref:QT(X,Ve),target:b,"data-discover":!oe&&n==="render"?"true":void 0});return ae&&!oe?se.createElement(se.Fragment,null,V,se.createElement(XT,{page:ee})):V});tf.displayName="Link";var $T=se.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:o="",end:u=!1,style:d,to:y,viewTransition:v,children:b,..._},S){let I=xu(y,{relative:_.relative}),M=wo(),U=se.useContext(Rf),{navigator:X,basename:K}=se.useContext(ms),z=U!=null&&ov(I)&&v===!0,oe=X.encodeLocation?X.encodeLocation(I).pathname:I.pathname,he=M.pathname,ee=U&&U.navigation&&U.navigation.location?U.navigation.location.pathname:null;n||(he=he.toLowerCase(),ee=ee?ee.toLowerCase():null,oe=oe.toLowerCase()),ee&&K&&(ee=Ta(ee,K)||ee);const ae=oe!=="/"&&oe.endsWith("/")?oe.length-1:oe.length;let Ve=he===oe||!u&&he.startsWith(oe)&&he.charAt(ae)==="/",Ne=ee!=null&&(ee===oe||!u&&ee.startsWith(oe)&&ee.charAt(oe.length)==="/"),j={isActive:Ve,isPending:Ne,isTransitioning:z},G=Ve?e:void 0,V;typeof o=="function"?V=o(j):V=[o,Ve?"active":null,Ne?"pending":null,z?"transitioning":null].filter(Boolean).join(" ");let te=typeof d=="function"?d(j):d;return se.createElement(tf,{..._,"aria-current":G,className:V,ref:S,style:te,to:y,viewTransition:v},typeof b=="function"?b(j):b)});$T.displayName="NavLink";var ev=se.forwardRef(({discover:i="render",fetcherKey:e,navigate:n,reloadDocument:o,replace:u,state:d,method:y=qh,action:v,onSubmit:b,relative:_,preventScrollReset:S,viewTransition:I,unstable_defaultShouldRevalidate:M,...U},X)=>{let{unstable_useTransitions:K}=se.useContext(ms),z=sv(),oe=av(v,{relative:_}),he=y.toLowerCase()==="get"?"get":"post",ee=typeof v=="string"&&f_.test(v),ae=Ve=>{if(b&&b(Ve),Ve.defaultPrevented)return;Ve.preventDefault();let Ne=Ve.nativeEvent.submitter,j=(Ne==null?void 0:Ne.getAttribute("formmethod"))||y,G=()=>z(Ne||Ve.currentTarget,{fetcherKey:e,method:j,navigate:n,replace:u,state:d,relative:_,preventScrollReset:S,viewTransition:I,unstable_defaultShouldRevalidate:M});K&&n!==!1?se.startTransition(()=>G()):G()};return se.createElement("form",{ref:X,method:he,action:oe,onSubmit:o?b:ae,...U,"data-discover":!ee&&i==="render"?"true":void 0})});ev.displayName="Form";function tv(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function d_(i){let e=se.useContext(ec);return Xn(e,tv(i)),e}function nv(i,{target:e,replace:n,state:o,preventScrollReset:u,relative:d,viewTransition:y,unstable_defaultShouldRevalidate:v,unstable_useTransitions:b}={}){let _=fT(),S=wo(),I=xu(i,{relative:d});return se.useCallback(M=>{if(MT(M,e)){M.preventDefault();let U=n!==void 0?n:ru(S)===ru(I),X=()=>_(i,{replace:U,state:o,preventScrollReset:u,relative:d,viewTransition:y,unstable_defaultShouldRevalidate:v});b?se.startTransition(()=>X()):X()}},[S,_,I,n,o,e,i,u,d,y,v,b])}var iv=0,rv=()=>`__${String(++iv)}__`;function sv(){let{router:i}=d_("useSubmit"),{basename:e}=se.useContext(ms),n=bT(),o=i.fetch,u=i.navigate;return se.useCallback(async(d,y={})=>{let{action:v,method:b,encType:_,formData:S,body:I}=BT(d,e);if(y.navigate===!1){let M=y.fetcherKey||rv();await o(M,n,y.action||v,{unstable_defaultShouldRevalidate:y.unstable_defaultShouldRevalidate,preventScrollReset:y.preventScrollReset,formData:S,body:I,formMethod:y.method||b,formEncType:y.encType||_,flushSync:y.flushSync})}else await u(y.action||v,{unstable_defaultShouldRevalidate:y.unstable_defaultShouldRevalidate,preventScrollReset:y.preventScrollReset,formData:S,body:I,formMethod:y.method||b,formEncType:y.encType||_,replace:y.replace,state:y.state,fromRouteId:n,flushSync:y.flushSync,viewTransition:y.viewTransition})},[o,u,e,n])}function av(i,{relative:e}={}){let{basename:n}=se.useContext(ms),o=se.useContext(Na);Xn(o,"useFormAction must be used inside a RouteContext");let[u]=o.matches.slice(-1),d={...xu(i||".",{relative:e})},y=wo();if(i==null){d.search=y.search;let v=new URLSearchParams(d.search),b=v.getAll("index");if(b.some(S=>S==="")){v.delete("index"),b.filter(I=>I).forEach(I=>v.append("index",I));let S=v.toString();d.search=S?`?${S}`:""}}return(!i||i===".")&&u.route.index&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(d.pathname=d.pathname==="/"?n:Aa([n,d.pathname])),ru(d)}function ov(i,{relative:e}={}){let n=se.useContext(i_);Xn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=d_("useViewTransitionState"),u=xu(i,{relative:e});if(!n.isTransitioning)return!1;let d=Ta(n.currentLocation.pathname,o)||n.currentLocation.pathname,y=Ta(n.nextLocation.pathname,o)||n.nextLocation.pathname;return ef(u.pathname,y)!=null||ef(u.pathname,d)!=null}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),cv=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,o)=>o?o.toUpperCase():n.toLowerCase()),ax=i=>{const e=cv(i);return e.charAt(0).toUpperCase()+e.slice(1)},g_=(...i)=>i.filter((e,n,o)=>!!e&&e.trim()!==""&&o.indexOf(e)===n).join(" ").trim(),uv=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var hv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=se.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:u="",children:d,iconNode:y,...v},b)=>se.createElement("svg",{ref:b,...hv,width:e,height:e,stroke:i,strokeWidth:o?Number(n)*24/Number(e):n,className:g_("lucide",u),...!d&&!uv(v)&&{"aria-hidden":"true"},...v},[...y.map(([_,S])=>se.createElement(_,S)),...Array.isArray(d)?d:[d]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=(i,e)=>{const n=se.forwardRef(({className:o,...u},d)=>se.createElement(fv,{ref:d,iconNode:e,className:g_(`lucide-${lv(ax(i))}`,`lucide-${i}`,o),...u}));return n.displayName=ax(i),n};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ox=yt("calendar",dv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gv=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],h1=yt("camera",gv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Wo=yt("check",mv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],xv=yt("chevron-right",pv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],m_=yt("circle-alert",yv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],su=yt("circle-check-big",Ev);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],wv=yt("circle-check",_v);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Av=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],au=yt("clock",Av);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Tv=yt("eye",bv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],Cv=yt("flame",vv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],lx=yt("gift",Sv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iv=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Nv=yt("graduation-cap",Iv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rv=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Xh=yt("heart",Rv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ov=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],nf=yt("history",Ov);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],cx=yt("image",Dv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],p_=yt("info",Mv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lv=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Pv=yt("layout-dashboard",Lv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bv=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],kv=yt("log-out",Bv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uv=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],Vv=yt("medal",Uv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Fv=yt("menu",jv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],f1=yt("package",zv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hv=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Pl=yt("plus",Hv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gv=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],qv=yt("qr-code",Gv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yv=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Xv=yt("refresh-cw",Yv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kv=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],Wv=yt("scan-line",Kv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qv=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Zv=yt("search",Qv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jv=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],$v=yt("send",Jv);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],tC=yt("settings",eC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],rf=yt("shield-check",nC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],rC=yt("shopping-bag",iC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],aC=yt("shopping-cart",sC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],sf=yt("sparkles",oC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],cC=yt("star",lC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Zc=yt("target",uC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=[["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}],["path",{d:"M7 10v12",key:"1qc93n"}]],fC=yt("thumbs-up",hC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Lh=yt("trash-2",dC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gC=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],mC=yt("trending-up",gC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],ux=yt("trophy",pC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],yC=yt("upload",xC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],d1=yt("user-plus",EC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],wC=yt("user",_C);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],bC=yt("users",AC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],oo=yt("x",TC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],x_=yt("zap",vC),y_=se.createContext(void 0),tc=()=>{const i=se.useContext(y_);if(!i)throw new Error("useAlert must be used within an AlertProvider");return i},CC=({children:i})=>{const[e,n]=se.useState(null),o=(d,y="info")=>{n({message:d,type:y})},u=()=>{n(null)};return T.jsxs(y_.Provider,{value:{showAlert:o,hideAlert:u},children:[i,e&&T.jsx(SC,{message:e.message,type:e.type,onClose:u})]})},SC=({message:i,type:e,onClose:n})=>{const o={success:T.jsx(su,{className:"text-emerald-500",size:32}),error:T.jsx(m_,{className:"text-rose-500",size:32}),info:T.jsx(p_,{className:"text-indigo-500",size:32})},u={success:"bg-emerald-50",error:"bg-rose-50",info:"bg-indigo-50"};return T.jsx("div",{className:"fixed inset-0 z-[999] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:T.jsx("div",{className:"bg-white rounded-[2.5rem] max-w-sm w-full p-8 shadow-2xl animate-in zoom-in-95 duration-200 border border-slate-100",children:T.jsxs("div",{className:"flex flex-col items-center text-center",children:[T.jsx("div",{className:`${u[e]} p-4 rounded-2xl mb-6`,children:o[e]}),T.jsx("h3",{className:"text-xl font-black text-slate-800 mb-2",children:""}),T.jsx("p",{className:"text-slate-500 font-bold leading-relaxed mb-8",children:i}),T.jsx("button",{onClick:n,className:"w-full bg-slate-900 hover:bg-slate-800 text-white font-black py-4 rounded-2xl transition-all active:scale-95 shadow-lg shadow-slate-200",children:""})]})})})},IC=()=>{};var hx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_=function(i){const e=[];let n=0;for(let o=0;o<i.length;o++){let u=i.charCodeAt(o);u<128?e[n++]=u:u<2048?(e[n++]=u>>6|192,e[n++]=u&63|128):(u&64512)===55296&&o+1<i.length&&(i.charCodeAt(o+1)&64512)===56320?(u=65536+((u&1023)<<10)+(i.charCodeAt(++o)&1023),e[n++]=u>>18|240,e[n++]=u>>12&63|128,e[n++]=u>>6&63|128,e[n++]=u&63|128):(e[n++]=u>>12|224,e[n++]=u>>6&63|128,e[n++]=u&63|128)}return e},NC=function(i){const e=[];let n=0,o=0;for(;n<i.length;){const u=i[n++];if(u<128)e[o++]=String.fromCharCode(u);else if(u>191&&u<224){const d=i[n++];e[o++]=String.fromCharCode((u&31)<<6|d&63)}else if(u>239&&u<365){const d=i[n++],y=i[n++],v=i[n++],b=((u&7)<<18|(d&63)<<12|(y&63)<<6|v&63)-65536;e[o++]=String.fromCharCode(55296+(b>>10)),e[o++]=String.fromCharCode(56320+(b&1023))}else{const d=i[n++],y=i[n++];e[o++]=String.fromCharCode((u&15)<<12|(d&63)<<6|y&63)}}return e.join("")},__={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let u=0;u<i.length;u+=3){const d=i[u],y=u+1<i.length,v=y?i[u+1]:0,b=u+2<i.length,_=b?i[u+2]:0,S=d>>2,I=(d&3)<<4|v>>4;let M=(v&15)<<2|_>>6,U=_&63;b||(U=64,y||(M=64)),o.push(n[S],n[I],n[M],n[U])}return o.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(E_(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):NC(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let u=0;u<i.length;){const d=n[i.charAt(u++)],v=u<i.length?n[i.charAt(u)]:0;++u;const _=u<i.length?n[i.charAt(u)]:64;++u;const I=u<i.length?n[i.charAt(u)]:64;if(++u,d==null||v==null||_==null||I==null)throw new RC;const M=d<<2|v>>4;if(o.push(M),_!==64){const U=v<<4&240|_>>2;if(o.push(U),I!==64){const X=_<<6&192|I;o.push(X)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class RC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const OC=function(i){const e=E_(i);return __.encodeByteArray(e,!0)},af=function(i){return OC(i).replace(/\./g,"")},DC=function(i){try{return __.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=()=>MC().__FIREBASE_DEFAULTS__,PC=()=>{if(typeof process>"u"||typeof hx>"u")return;const i=hx.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},BC=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&DC(i[1]);return e&&JSON.parse(e)},J1=()=>{try{return IC()||LC()||PC()||BC()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},kC=i=>{var e,n;return(n=(e=J1())==null?void 0:e.emulatorHosts)==null?void 0:n[i]},UC=i=>{const e=kC(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),o]:[e.substring(0,n),o]},w_=()=>{var i;return(i=J1())==null?void 0:i.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,o)=>{n?this.reject(n):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,o))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function jC(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},o=e||"demo-project",u=i.iat||0,d=i.sub||i.user_id;if(!d)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const y={iss:`https://securetoken.google.com/${o}`,aud:o,iat:u,exp:u+3600,auth_time:u,sub:d,user_id:d,firebase:{sign_in_provider:"custom",identities:{}},...i};return[af(JSON.stringify(n)),af(JSON.stringify(y)),""].join(".")}const Jc={};function zC(){const i={prod:[],emulator:[]};for(const e of Object.keys(Jc))Jc[e]?i.emulator.push(e):i.prod.push(e);return i}function HC(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let fx=!1;function GC(i,e){if(typeof window>"u"||typeof document>"u"||!$1(window.location.host)||Jc[i]===e||Jc[i]||fx)return;Jc[i]=e;function n(M){return`__firebase__banner__${M}`}const o="__firebase__banner",d=zC().prod.length>0;function y(){const M=document.getElementById(o);M&&M.remove()}function v(M){M.style.display="flex",M.style.background="#7faaf0",M.style.position="fixed",M.style.bottom="5px",M.style.left="5px",M.style.padding=".5em",M.style.borderRadius="5px",M.style.alignItems="center"}function b(M,U){M.setAttribute("width","24"),M.setAttribute("id",U),M.setAttribute("height","24"),M.setAttribute("viewBox","0 0 24 24"),M.setAttribute("fill","none"),M.style.marginLeft="-6px"}function _(){const M=document.createElement("span");return M.style.cursor="pointer",M.style.marginLeft="16px",M.style.fontSize="24px",M.innerHTML=" &times;",M.onclick=()=>{fx=!0,y()},M}function S(M,U){M.setAttribute("id",U),M.innerText="Learn more",M.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",M.setAttribute("target","__blank"),M.style.paddingLeft="5px",M.style.textDecoration="underline"}function I(){const M=HC(o),U=n("text"),X=document.getElementById(U)||document.createElement("span"),K=n("learnmore"),z=document.getElementById(K)||document.createElement("a"),oe=n("preprendIcon"),he=document.getElementById(oe)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(M.created){const ee=M.element;v(ee),S(z,K);const ae=_();b(he,oe),ee.append(he,X,z,ae),document.body.appendChild(ee)}d?(X.innerText="Preview backend disconnected.",he.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(he.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,X.innerText="Preview backend running in this workspace."),X.setAttribute("id",U)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qC(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YC(){var e;const i=(e=J1())==null?void 0:e.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function XC(){return!YC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function KC(){try{return typeof indexedDB=="object"}catch{return!1}}function WC(){return new Promise((i,e)=>{try{let n=!0;const o="validate-browser-context-for-indexeddb-analytics-module",u=self.indexedDB.open(o);u.onsuccess=()=>{u.result.close(),n||self.indexedDB.deleteDatabase(o),i(!0)},u.onupgradeneeded=()=>{n=!1},u.onerror=()=>{var d;e(((d=u.error)==null?void 0:d.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC="FirebaseError";class nc extends Error{constructor(e,n,o){super(n),this.code=e,this.customData=o,this.name=QC,Object.setPrototypeOf(this,nc.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,A_.prototype.create)}}class A_{constructor(e,n,o){this.service=e,this.serviceName=n,this.errors=o}create(e,...n){const o=n[0]||{},u=`${this.service}/${e}`,d=this.errors[e],y=d?ZC(d,o):"Error",v=`${this.serviceName}: ${y} (${u}).`;return new nc(u,v,o)}}function ZC(i,e){return i.replace(JC,(n,o)=>{const u=e[o];return u!=null?String(u):`<${o}?>`})}const JC=/\{\$([^}]+)}/g;function of(i,e){if(i===e)return!0;const n=Object.keys(i),o=Object.keys(e);for(const u of n){if(!o.includes(u))return!1;const d=i[u],y=e[u];if(dx(d)&&dx(y)){if(!of(d,y))return!1}else if(d!==y)return!1}for(const u of o)if(!n.includes(u))return!1;return!0}function dx(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(i){return i&&i._delegate?i._delegate:i}class ou{constructor(e,n,o){this.name=e,this.instanceFactory=n,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const o=new VC;if(this.instancesDeferred.set(n,o),this.isInitialized(n)||this.shouldAutoInitialize())try{const u=this.getOrInitializeService({instanceIdentifier:n});u&&o.resolve(u)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(tS(e))try{this.getOrInitializeService({instanceIdentifier:Xo})}catch{}for(const[n,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(n);try{const d=this.getOrInitializeService({instanceIdentifier:u});o.resolve(d)}catch{}}}}clearInstance(e=Xo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xo){return this.instances.has(e)}getOptions(e=Xo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const u=this.getOrInitializeService({instanceIdentifier:o,options:n});for(const[d,y]of this.instancesDeferred.entries()){const v=this.normalizeInstanceIdentifier(d);o===v&&y.resolve(u)}return u}onInit(e,n){const o=this.normalizeInstanceIdentifier(n),u=this.onInitCallbacks.get(o)??new Set;u.add(e),this.onInitCallbacks.set(o,u);const d=this.instances.get(o);return d&&e(d,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const o=this.onInitCallbacks.get(n);if(o)for(const u of o)try{u(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:eS(e),options:n}),this.instances.set(e,o),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=Xo){return this.component?this.component.multipleInstances?e:Xo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function eS(i){return i===Xo?void 0:i}function tS(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new $C(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jt;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Jt||(Jt={}));const iS={debug:Jt.DEBUG,verbose:Jt.VERBOSE,info:Jt.INFO,warn:Jt.WARN,error:Jt.ERROR,silent:Jt.SILENT},rS=Jt.INFO,sS={[Jt.DEBUG]:"log",[Jt.VERBOSE]:"log",[Jt.INFO]:"info",[Jt.WARN]:"warn",[Jt.ERROR]:"error"},aS=(i,e,...n)=>{if(e<i.logLevel)return;const o=new Date().toISOString(),u=sS[e];if(u)console[u](`[${o}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class b_{constructor(e){this.name=e,this._logLevel=rS,this._logHandler=aS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Jt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?iS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Jt.DEBUG,...e),this._logHandler(this,Jt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Jt.VERBOSE,...e),this._logHandler(this,Jt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Jt.INFO,...e),this._logHandler(this,Jt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Jt.WARN,...e),this._logHandler(this,Jt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Jt.ERROR,...e),this._logHandler(this,Jt.ERROR,...e)}}const oS=(i,e)=>e.some(n=>i instanceof n);let gx,mx;function lS(){return gx||(gx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cS(){return mx||(mx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const T_=new WeakMap,g1=new WeakMap,v_=new WeakMap,Z0=new WeakMap,eg=new WeakMap;function uS(i){const e=new Promise((n,o)=>{const u=()=>{i.removeEventListener("success",d),i.removeEventListener("error",y)},d=()=>{n(lo(i.result)),u()},y=()=>{o(i.error),u()};i.addEventListener("success",d),i.addEventListener("error",y)});return e.then(n=>{n instanceof IDBCursor&&T_.set(n,i)}).catch(()=>{}),eg.set(e,i),e}function hS(i){if(g1.has(i))return;const e=new Promise((n,o)=>{const u=()=>{i.removeEventListener("complete",d),i.removeEventListener("error",y),i.removeEventListener("abort",y)},d=()=>{n(),u()},y=()=>{o(i.error||new DOMException("AbortError","AbortError")),u()};i.addEventListener("complete",d),i.addEventListener("error",y),i.addEventListener("abort",y)});g1.set(i,e)}let m1={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return g1.get(i);if(e==="objectStoreNames")return i.objectStoreNames||v_.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return lo(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function fS(i){m1=i(m1)}function dS(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const o=i.call(J0(this),e,...n);return v_.set(o,e.sort?e.sort():[e]),lo(o)}:cS().includes(i)?function(...e){return i.apply(J0(this),e),lo(T_.get(this))}:function(...e){return lo(i.apply(J0(this),e))}}function gS(i){return typeof i=="function"?dS(i):(i instanceof IDBTransaction&&hS(i),oS(i,lS())?new Proxy(i,m1):i)}function lo(i){if(i instanceof IDBRequest)return uS(i);if(Z0.has(i))return Z0.get(i);const e=gS(i);return e!==i&&(Z0.set(i,e),eg.set(e,i)),e}const J0=i=>eg.get(i);function mS(i,e,{blocked:n,upgrade:o,blocking:u,terminated:d}={}){const y=indexedDB.open(i,e),v=lo(y);return o&&y.addEventListener("upgradeneeded",b=>{o(lo(y.result),b.oldVersion,b.newVersion,lo(y.transaction),b)}),n&&y.addEventListener("blocked",b=>n(b.oldVersion,b.newVersion,b)),v.then(b=>{d&&b.addEventListener("close",()=>d()),u&&b.addEventListener("versionchange",_=>u(_.oldVersion,_.newVersion,_))}).catch(()=>{}),v}const pS=["get","getKey","getAll","getAllKeys","count"],xS=["put","add","delete","clear"],$0=new Map;function px(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if($0.get(e))return $0.get(e);const n=e.replace(/FromIndex$/,""),o=e!==n,u=xS.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!(u||pS.includes(n)))return;const d=async function(y,...v){const b=this.transaction(y,u?"readwrite":"readonly");let _=b.store;return o&&(_=_.index(v.shift())),(await Promise.all([_[n](...v),u&&b.done]))[0]};return $0.set(e,d),d}fS(i=>({...i,get:(e,n,o)=>px(e,n)||i.get(e,n,o),has:(e,n)=>!!px(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ES(n)){const o=n.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(n=>n).join(" ")}}function ES(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const p1="@firebase/app",xx="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va=new b_("@firebase/app"),_S="@firebase/app-compat",wS="@firebase/analytics-compat",AS="@firebase/analytics",bS="@firebase/app-check-compat",TS="@firebase/app-check",vS="@firebase/auth",CS="@firebase/auth-compat",SS="@firebase/database",IS="@firebase/data-connect",NS="@firebase/database-compat",RS="@firebase/functions",OS="@firebase/functions-compat",DS="@firebase/installations",MS="@firebase/installations-compat",LS="@firebase/messaging",PS="@firebase/messaging-compat",BS="@firebase/performance",kS="@firebase/performance-compat",US="@firebase/remote-config",VS="@firebase/remote-config-compat",jS="@firebase/storage",FS="@firebase/storage-compat",zS="@firebase/firestore",HS="@firebase/ai",GS="@firebase/firestore-compat",qS="firebase",YS="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1="[DEFAULT]",XS={[p1]:"fire-core",[_S]:"fire-core-compat",[AS]:"fire-analytics",[wS]:"fire-analytics-compat",[TS]:"fire-app-check",[bS]:"fire-app-check-compat",[vS]:"fire-auth",[CS]:"fire-auth-compat",[SS]:"fire-rtdb",[IS]:"fire-data-connect",[NS]:"fire-rtdb-compat",[RS]:"fire-fn",[OS]:"fire-fn-compat",[DS]:"fire-iid",[MS]:"fire-iid-compat",[LS]:"fire-fcm",[PS]:"fire-fcm-compat",[BS]:"fire-perf",[kS]:"fire-perf-compat",[US]:"fire-rc",[VS]:"fire-rc-compat",[jS]:"fire-gcs",[FS]:"fire-gcs-compat",[zS]:"fire-fst",[GS]:"fire-fst-compat",[HS]:"fire-vertex","fire-js":"fire-js",[qS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lf=new Map,KS=new Map,y1=new Map;function yx(i,e){try{i.container.addComponent(e)}catch(n){va.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function cf(i){const e=i.name;if(y1.has(e))return va.debug(`There were multiple attempts to register component ${e}.`),!1;y1.set(e,i);for(const n of lf.values())yx(n,i);for(const n of KS.values())yx(n,i);return!0}function WS(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function QS(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},co=new A_("app","Firebase",ZS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e,n,o){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new ou("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw co.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S=YS;function C_(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const o={name:x1,automaticDataCollectionEnabled:!0,...e},u=o.name;if(typeof u!="string"||!u)throw co.create("bad-app-name",{appName:String(u)});if(n||(n=w_()),!n)throw co.create("no-options");const d=lf.get(u);if(d){if(of(n,d.options)&&of(o,d.config))return d;throw co.create("duplicate-app",{appName:u})}const y=new nS(u);for(const b of y1.values())y.addComponent(b);const v=new JS(n,o,y);return lf.set(u,v),v}function e4(i=x1){const e=lf.get(i);if(!e&&i===x1&&w_())return C_();if(!e)throw co.create("no-app",{appName:i});return e}function Gl(i,e,n){let o=XS[i]??i;n&&(o+=`-${n}`);const u=o.match(/\s|\//),d=e.match(/\s|\//);if(u||d){const y=[`Unable to register library "${o}" with version "${e}":`];u&&y.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&d&&y.push("and"),d&&y.push(`version name "${e}" contains illegal characters (whitespace or "/")`),va.warn(y.join(" "));return}cf(new ou(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t4="firebase-heartbeat-database",n4=1,lu="firebase-heartbeat-store";let e1=null;function S_(){return e1||(e1=mS(t4,n4,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(lu)}catch(n){console.warn(n)}}}}).catch(i=>{throw co.create("idb-open",{originalErrorMessage:i.message})})),e1}async function i4(i){try{const n=(await S_()).transaction(lu),o=await n.objectStore(lu).get(I_(i));return await n.done,o}catch(e){if(e instanceof nc)va.warn(e.message);else{const n=co.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});va.warn(n.message)}}}async function Ex(i,e){try{const o=(await S_()).transaction(lu,"readwrite");await o.objectStore(lu).put(e,I_(i)),await o.done}catch(n){if(n instanceof nc)va.warn(n.message);else{const o=co.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});va.warn(o.message)}}}function I_(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4=1024,s4=30;class a4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new l4(n),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var e,n;try{const u=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),d=_x();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===d||this._heartbeatsCache.heartbeats.some(y=>y.date===d))return;if(this._heartbeatsCache.heartbeats.push({date:d,agent:u}),this._heartbeatsCache.heartbeats.length>s4){const y=c4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(y,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(o){va.warn(o)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=_x(),{heartbeatsToSend:o,unsentEntries:u}=o4(this._heartbeatsCache.heartbeats),d=af(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=n,u.length>0?(this._heartbeatsCache.heartbeats=u,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),d}catch(n){return va.warn(n),""}}}function _x(){return new Date().toISOString().substring(0,10)}function o4(i,e=r4){const n=[];let o=i.slice();for(const u of i){const d=n.find(y=>y.agent===u.agent);if(d){if(d.dates.push(u.date),wx(n)>e){d.dates.pop();break}}else if(n.push({agent:u.agent,dates:[u.date]}),wx(n)>e){n.pop();break}o=o.slice(1)}return{heartbeatsToSend:n,unsentEntries:o}}class l4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return KC()?WC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await i4(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return Ex(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return Ex(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function wx(i){return af(JSON.stringify({version:2,heartbeats:i})).length}function c4(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let o=1;o<i.length;o++)i[o].date<n&&(n=i[o].date,e=o);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u4(i){cf(new ou("platform-logger",e=>new yS(e),"PRIVATE")),cf(new ou("heartbeat",e=>new a4(e),"PRIVATE")),Gl(p1,xx,i),Gl(p1,xx,"esm2020"),Gl("fire-js","")}u4("");var Ax=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var uo,N_;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,G){function V(){}V.prototype=G.prototype,j.F=G.prototype,j.prototype=new V,j.prototype.constructor=j,j.D=function(te,W,J){for(var Y=Array(arguments.length-2),et=2;et<arguments.length;et++)Y[et-2]=arguments[et];return G.prototype[W].apply(te,Y)}}function n(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(o,n),o.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function u(j,G,V){V||(V=0);const te=Array(16);if(typeof G=="string")for(var W=0;W<16;++W)te[W]=G.charCodeAt(V++)|G.charCodeAt(V++)<<8|G.charCodeAt(V++)<<16|G.charCodeAt(V++)<<24;else for(W=0;W<16;++W)te[W]=G[V++]|G[V++]<<8|G[V++]<<16|G[V++]<<24;G=j.g[0],V=j.g[1],W=j.g[2];let J=j.g[3],Y;Y=G+(J^V&(W^J))+te[0]+3614090360&4294967295,G=V+(Y<<7&4294967295|Y>>>25),Y=J+(W^G&(V^W))+te[1]+3905402710&4294967295,J=G+(Y<<12&4294967295|Y>>>20),Y=W+(V^J&(G^V))+te[2]+606105819&4294967295,W=J+(Y<<17&4294967295|Y>>>15),Y=V+(G^W&(J^G))+te[3]+3250441966&4294967295,V=W+(Y<<22&4294967295|Y>>>10),Y=G+(J^V&(W^J))+te[4]+4118548399&4294967295,G=V+(Y<<7&4294967295|Y>>>25),Y=J+(W^G&(V^W))+te[5]+1200080426&4294967295,J=G+(Y<<12&4294967295|Y>>>20),Y=W+(V^J&(G^V))+te[6]+2821735955&4294967295,W=J+(Y<<17&4294967295|Y>>>15),Y=V+(G^W&(J^G))+te[7]+4249261313&4294967295,V=W+(Y<<22&4294967295|Y>>>10),Y=G+(J^V&(W^J))+te[8]+1770035416&4294967295,G=V+(Y<<7&4294967295|Y>>>25),Y=J+(W^G&(V^W))+te[9]+2336552879&4294967295,J=G+(Y<<12&4294967295|Y>>>20),Y=W+(V^J&(G^V))+te[10]+4294925233&4294967295,W=J+(Y<<17&4294967295|Y>>>15),Y=V+(G^W&(J^G))+te[11]+2304563134&4294967295,V=W+(Y<<22&4294967295|Y>>>10),Y=G+(J^V&(W^J))+te[12]+1804603682&4294967295,G=V+(Y<<7&4294967295|Y>>>25),Y=J+(W^G&(V^W))+te[13]+4254626195&4294967295,J=G+(Y<<12&4294967295|Y>>>20),Y=W+(V^J&(G^V))+te[14]+2792965006&4294967295,W=J+(Y<<17&4294967295|Y>>>15),Y=V+(G^W&(J^G))+te[15]+1236535329&4294967295,V=W+(Y<<22&4294967295|Y>>>10),Y=G+(W^J&(V^W))+te[1]+4129170786&4294967295,G=V+(Y<<5&4294967295|Y>>>27),Y=J+(V^W&(G^V))+te[6]+3225465664&4294967295,J=G+(Y<<9&4294967295|Y>>>23),Y=W+(G^V&(J^G))+te[11]+643717713&4294967295,W=J+(Y<<14&4294967295|Y>>>18),Y=V+(J^G&(W^J))+te[0]+3921069994&4294967295,V=W+(Y<<20&4294967295|Y>>>12),Y=G+(W^J&(V^W))+te[5]+3593408605&4294967295,G=V+(Y<<5&4294967295|Y>>>27),Y=J+(V^W&(G^V))+te[10]+38016083&4294967295,J=G+(Y<<9&4294967295|Y>>>23),Y=W+(G^V&(J^G))+te[15]+3634488961&4294967295,W=J+(Y<<14&4294967295|Y>>>18),Y=V+(J^G&(W^J))+te[4]+3889429448&4294967295,V=W+(Y<<20&4294967295|Y>>>12),Y=G+(W^J&(V^W))+te[9]+568446438&4294967295,G=V+(Y<<5&4294967295|Y>>>27),Y=J+(V^W&(G^V))+te[14]+3275163606&4294967295,J=G+(Y<<9&4294967295|Y>>>23),Y=W+(G^V&(J^G))+te[3]+4107603335&4294967295,W=J+(Y<<14&4294967295|Y>>>18),Y=V+(J^G&(W^J))+te[8]+1163531501&4294967295,V=W+(Y<<20&4294967295|Y>>>12),Y=G+(W^J&(V^W))+te[13]+2850285829&4294967295,G=V+(Y<<5&4294967295|Y>>>27),Y=J+(V^W&(G^V))+te[2]+4243563512&4294967295,J=G+(Y<<9&4294967295|Y>>>23),Y=W+(G^V&(J^G))+te[7]+1735328473&4294967295,W=J+(Y<<14&4294967295|Y>>>18),Y=V+(J^G&(W^J))+te[12]+2368359562&4294967295,V=W+(Y<<20&4294967295|Y>>>12),Y=G+(V^W^J)+te[5]+4294588738&4294967295,G=V+(Y<<4&4294967295|Y>>>28),Y=J+(G^V^W)+te[8]+2272392833&4294967295,J=G+(Y<<11&4294967295|Y>>>21),Y=W+(J^G^V)+te[11]+1839030562&4294967295,W=J+(Y<<16&4294967295|Y>>>16),Y=V+(W^J^G)+te[14]+4259657740&4294967295,V=W+(Y<<23&4294967295|Y>>>9),Y=G+(V^W^J)+te[1]+2763975236&4294967295,G=V+(Y<<4&4294967295|Y>>>28),Y=J+(G^V^W)+te[4]+1272893353&4294967295,J=G+(Y<<11&4294967295|Y>>>21),Y=W+(J^G^V)+te[7]+4139469664&4294967295,W=J+(Y<<16&4294967295|Y>>>16),Y=V+(W^J^G)+te[10]+3200236656&4294967295,V=W+(Y<<23&4294967295|Y>>>9),Y=G+(V^W^J)+te[13]+681279174&4294967295,G=V+(Y<<4&4294967295|Y>>>28),Y=J+(G^V^W)+te[0]+3936430074&4294967295,J=G+(Y<<11&4294967295|Y>>>21),Y=W+(J^G^V)+te[3]+3572445317&4294967295,W=J+(Y<<16&4294967295|Y>>>16),Y=V+(W^J^G)+te[6]+76029189&4294967295,V=W+(Y<<23&4294967295|Y>>>9),Y=G+(V^W^J)+te[9]+3654602809&4294967295,G=V+(Y<<4&4294967295|Y>>>28),Y=J+(G^V^W)+te[12]+3873151461&4294967295,J=G+(Y<<11&4294967295|Y>>>21),Y=W+(J^G^V)+te[15]+530742520&4294967295,W=J+(Y<<16&4294967295|Y>>>16),Y=V+(W^J^G)+te[2]+3299628645&4294967295,V=W+(Y<<23&4294967295|Y>>>9),Y=G+(W^(V|~J))+te[0]+4096336452&4294967295,G=V+(Y<<6&4294967295|Y>>>26),Y=J+(V^(G|~W))+te[7]+1126891415&4294967295,J=G+(Y<<10&4294967295|Y>>>22),Y=W+(G^(J|~V))+te[14]+2878612391&4294967295,W=J+(Y<<15&4294967295|Y>>>17),Y=V+(J^(W|~G))+te[5]+4237533241&4294967295,V=W+(Y<<21&4294967295|Y>>>11),Y=G+(W^(V|~J))+te[12]+1700485571&4294967295,G=V+(Y<<6&4294967295|Y>>>26),Y=J+(V^(G|~W))+te[3]+2399980690&4294967295,J=G+(Y<<10&4294967295|Y>>>22),Y=W+(G^(J|~V))+te[10]+4293915773&4294967295,W=J+(Y<<15&4294967295|Y>>>17),Y=V+(J^(W|~G))+te[1]+2240044497&4294967295,V=W+(Y<<21&4294967295|Y>>>11),Y=G+(W^(V|~J))+te[8]+1873313359&4294967295,G=V+(Y<<6&4294967295|Y>>>26),Y=J+(V^(G|~W))+te[15]+4264355552&4294967295,J=G+(Y<<10&4294967295|Y>>>22),Y=W+(G^(J|~V))+te[6]+2734768916&4294967295,W=J+(Y<<15&4294967295|Y>>>17),Y=V+(J^(W|~G))+te[13]+1309151649&4294967295,V=W+(Y<<21&4294967295|Y>>>11),Y=G+(W^(V|~J))+te[4]+4149444226&4294967295,G=V+(Y<<6&4294967295|Y>>>26),Y=J+(V^(G|~W))+te[11]+3174756917&4294967295,J=G+(Y<<10&4294967295|Y>>>22),Y=W+(G^(J|~V))+te[2]+718787259&4294967295,W=J+(Y<<15&4294967295|Y>>>17),Y=V+(J^(W|~G))+te[9]+3951481745&4294967295,j.g[0]=j.g[0]+G&4294967295,j.g[1]=j.g[1]+(W+(Y<<21&4294967295|Y>>>11))&4294967295,j.g[2]=j.g[2]+W&4294967295,j.g[3]=j.g[3]+J&4294967295}o.prototype.v=function(j,G){G===void 0&&(G=j.length);const V=G-this.blockSize,te=this.C;let W=this.h,J=0;for(;J<G;){if(W==0)for(;J<=V;)u(this,j,J),J+=this.blockSize;if(typeof j=="string"){for(;J<G;)if(te[W++]=j.charCodeAt(J++),W==this.blockSize){u(this,te),W=0;break}}else for(;J<G;)if(te[W++]=j[J++],W==this.blockSize){u(this,te),W=0;break}}this.h=W,this.o+=G},o.prototype.A=function(){var j=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);j[0]=128;for(var G=1;G<j.length-8;++G)j[G]=0;G=this.o*8;for(var V=j.length-8;V<j.length;++V)j[V]=G&255,G/=256;for(this.v(j),j=Array(16),G=0,V=0;V<4;++V)for(let te=0;te<32;te+=8)j[G++]=this.g[V]>>>te&255;return j};function d(j,G){var V=v;return Object.prototype.hasOwnProperty.call(V,j)?V[j]:V[j]=G(j)}function y(j,G){this.h=G;const V=[];let te=!0;for(let W=j.length-1;W>=0;W--){const J=j[W]|0;te&&J==G||(V[W]=J,te=!1)}this.g=V}var v={};function b(j){return-128<=j&&j<128?d(j,function(G){return new y([G|0],G<0?-1:0)}):new y([j|0],j<0?-1:0)}function _(j){if(isNaN(j)||!isFinite(j))return I;if(j<0)return z(_(-j));const G=[];let V=1;for(let te=0;j>=V;te++)G[te]=j/V|0,V*=4294967296;return new y(G,0)}function S(j,G){if(j.length==0)throw Error("number format error: empty string");if(G=G||10,G<2||36<G)throw Error("radix out of range: "+G);if(j.charAt(0)=="-")return z(S(j.substring(1),G));if(j.indexOf("-")>=0)throw Error('number format error: interior "-" character');const V=_(Math.pow(G,8));let te=I;for(let J=0;J<j.length;J+=8){var W=Math.min(8,j.length-J);const Y=parseInt(j.substring(J,J+W),G);W<8?(W=_(Math.pow(G,W)),te=te.j(W).add(_(Y))):(te=te.j(V),te=te.add(_(Y)))}return te}var I=b(0),M=b(1),U=b(16777216);i=y.prototype,i.m=function(){if(K(this))return-z(this).m();let j=0,G=1;for(let V=0;V<this.g.length;V++){const te=this.i(V);j+=(te>=0?te:4294967296+te)*G,G*=4294967296}return j},i.toString=function(j){if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(X(this))return"0";if(K(this))return"-"+z(this).toString(j);const G=_(Math.pow(j,6));var V=this;let te="";for(;;){const W=ae(V,G).g;V=oe(V,W.j(G));let J=((V.g.length>0?V.g[0]:V.h)>>>0).toString(j);if(V=W,X(V))return J+te;for(;J.length<6;)J="0"+J;te=J+te}},i.i=function(j){return j<0?0:j<this.g.length?this.g[j]:this.h};function X(j){if(j.h!=0)return!1;for(let G=0;G<j.g.length;G++)if(j.g[G]!=0)return!1;return!0}function K(j){return j.h==-1}i.l=function(j){return j=oe(this,j),K(j)?-1:X(j)?0:1};function z(j){const G=j.g.length,V=[];for(let te=0;te<G;te++)V[te]=~j.g[te];return new y(V,~j.h).add(M)}i.abs=function(){return K(this)?z(this):this},i.add=function(j){const G=Math.max(this.g.length,j.g.length),V=[];let te=0;for(let W=0;W<=G;W++){let J=te+(this.i(W)&65535)+(j.i(W)&65535),Y=(J>>>16)+(this.i(W)>>>16)+(j.i(W)>>>16);te=Y>>>16,J&=65535,Y&=65535,V[W]=Y<<16|J}return new y(V,V[V.length-1]&-2147483648?-1:0)};function oe(j,G){return j.add(z(G))}i.j=function(j){if(X(this)||X(j))return I;if(K(this))return K(j)?z(this).j(z(j)):z(z(this).j(j));if(K(j))return z(this.j(z(j)));if(this.l(U)<0&&j.l(U)<0)return _(this.m()*j.m());const G=this.g.length+j.g.length,V=[];for(var te=0;te<2*G;te++)V[te]=0;for(te=0;te<this.g.length;te++)for(let W=0;W<j.g.length;W++){const J=this.i(te)>>>16,Y=this.i(te)&65535,et=j.i(W)>>>16,me=j.i(W)&65535;V[2*te+2*W]+=Y*me,he(V,2*te+2*W),V[2*te+2*W+1]+=J*me,he(V,2*te+2*W+1),V[2*te+2*W+1]+=Y*et,he(V,2*te+2*W+1),V[2*te+2*W+2]+=J*et,he(V,2*te+2*W+2)}for(j=0;j<G;j++)V[j]=V[2*j+1]<<16|V[2*j];for(j=G;j<2*G;j++)V[j]=0;return new y(V,0)};function he(j,G){for(;(j[G]&65535)!=j[G];)j[G+1]+=j[G]>>>16,j[G]&=65535,G++}function ee(j,G){this.g=j,this.h=G}function ae(j,G){if(X(G))throw Error("division by zero");if(X(j))return new ee(I,I);if(K(j))return G=ae(z(j),G),new ee(z(G.g),z(G.h));if(K(G))return G=ae(j,z(G)),new ee(z(G.g),G.h);if(j.g.length>30){if(K(j)||K(G))throw Error("slowDivide_ only works with positive integers.");for(var V=M,te=G;te.l(j)<=0;)V=Ve(V),te=Ve(te);var W=Ne(V,1),J=Ne(te,1);for(te=Ne(te,2),V=Ne(V,2);!X(te);){var Y=J.add(te);Y.l(j)<=0&&(W=W.add(V),J=Y),te=Ne(te,1),V=Ne(V,1)}return G=oe(j,W.j(G)),new ee(W,G)}for(W=I;j.l(G)>=0;){for(V=Math.max(1,Math.floor(j.m()/G.m())),te=Math.ceil(Math.log(V)/Math.LN2),te=te<=48?1:Math.pow(2,te-48),J=_(V),Y=J.j(G);K(Y)||Y.l(j)>0;)V-=te,J=_(V),Y=J.j(G);X(J)&&(J=M),W=W.add(J),j=oe(j,Y)}return new ee(W,j)}i.B=function(j){return ae(this,j).h},i.and=function(j){const G=Math.max(this.g.length,j.g.length),V=[];for(let te=0;te<G;te++)V[te]=this.i(te)&j.i(te);return new y(V,this.h&j.h)},i.or=function(j){const G=Math.max(this.g.length,j.g.length),V=[];for(let te=0;te<G;te++)V[te]=this.i(te)|j.i(te);return new y(V,this.h|j.h)},i.xor=function(j){const G=Math.max(this.g.length,j.g.length),V=[];for(let te=0;te<G;te++)V[te]=this.i(te)^j.i(te);return new y(V,this.h^j.h)};function Ve(j){const G=j.g.length+1,V=[];for(let te=0;te<G;te++)V[te]=j.i(te)<<1|j.i(te-1)>>>31;return new y(V,j.h)}function Ne(j,G){const V=G>>5;G%=32;const te=j.g.length-V,W=[];for(let J=0;J<te;J++)W[J]=G>0?j.i(J+V)>>>G|j.i(J+V+1)<<32-G:j.i(J+V);return new y(W,j.h)}o.prototype.digest=o.prototype.A,o.prototype.reset=o.prototype.u,o.prototype.update=o.prototype.v,N_=o,y.prototype.add=y.prototype.add,y.prototype.multiply=y.prototype.j,y.prototype.modulo=y.prototype.B,y.prototype.compare=y.prototype.l,y.prototype.toNumber=y.prototype.m,y.prototype.toString=y.prototype.toString,y.prototype.getBits=y.prototype.i,y.fromNumber=_,y.fromString=S,uo=y}).apply(typeof Ax<"u"?Ax:typeof self<"u"?self:typeof window<"u"?window:{});var Ph=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var R_,qc,O_,Kh,E1,D_,M_,L_;(function(){var i,e=Object.defineProperty;function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ph=="object"&&Ph];for(var N=0;N<p.length;++N){var D=p[N];if(D&&D.Math==Math)return D}throw Error("Cannot find global object")}var o=n(this);function u(p,N){if(N)e:{var D=o;p=p.split(".");for(var F=0;F<p.length-1;F++){var ce=p[F];if(!(ce in D))break e;D=D[ce]}p=p[p.length-1],F=D[p],N=N(F),N!=F&&N!=null&&e(D,p,{configurable:!0,writable:!0,value:N})}}u("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),u("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),u("Object.entries",function(p){return p||function(N){var D=[],F;for(F in N)Object.prototype.hasOwnProperty.call(N,F)&&D.push([F,N[F]]);return D}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},y=this||self;function v(p){var N=typeof p;return N=="object"&&p!=null||N=="function"}function b(p,N,D){return p.call.apply(p.bind,arguments)}function _(p,N,D){return _=b,_.apply(null,arguments)}function S(p,N){var D=Array.prototype.slice.call(arguments,1);return function(){var F=D.slice();return F.push.apply(F,arguments),p.apply(this,F)}}function I(p,N){function D(){}D.prototype=N.prototype,p.Z=N.prototype,p.prototype=new D,p.prototype.constructor=p,p.Ob=function(F,ce,_e){for(var Be=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)Be[ut-2]=arguments[ut];return N.prototype[ce].apply(F,Be)}}var M=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function U(p){const N=p.length;if(N>0){const D=Array(N);for(let F=0;F<N;F++)D[F]=p[F];return D}return[]}function X(p,N){for(let F=1;F<arguments.length;F++){const ce=arguments[F];var D=typeof ce;if(D=D!="object"?D:ce?Array.isArray(ce)?"array":D:"null",D=="array"||D=="object"&&typeof ce.length=="number"){D=p.length||0;const _e=ce.length||0;p.length=D+_e;for(let Be=0;Be<_e;Be++)p[D+Be]=ce[Be]}else p.push(ce)}}class K{constructor(N,D){this.i=N,this.j=D,this.h=0,this.g=null}get(){let N;return this.h>0?(this.h--,N=this.g,this.g=N.next,N.next=null):N=this.i(),N}}function z(p){y.setTimeout(()=>{throw p},0)}function oe(){var p=j;let N=null;return p.g&&(N=p.g,p.g=p.g.next,p.g||(p.h=null),N.next=null),N}class he{constructor(){this.h=this.g=null}add(N,D){const F=ee.get();F.set(N,D),this.h?this.h.next=F:this.g=F,this.h=F}}var ee=new K(()=>new ae,p=>p.reset());class ae{constructor(){this.next=this.g=this.h=null}set(N,D){this.h=N,this.g=D,this.next=null}reset(){this.next=this.g=this.h=null}}let Ve,Ne=!1,j=new he,G=()=>{const p=Promise.resolve(void 0);Ve=()=>{p.then(V)}};function V(){for(var p;p=oe();){try{p.h.call(p.g)}catch(D){z(D)}var N=ee;N.j(p),N.h<100&&(N.h++,p.next=N.g,N.g=p)}Ne=!1}function te(){this.u=this.u,this.C=this.C}te.prototype.u=!1,te.prototype.dispose=function(){this.u||(this.u=!0,this.N())},te.prototype[Symbol.dispose]=function(){this.dispose()},te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(p,N){this.type=p,this.g=this.target=N,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var J=(function(){if(!y.addEventListener||!Object.defineProperty)return!1;var p=!1,N=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const D=()=>{};y.addEventListener("test",D,N),y.removeEventListener("test",D,N)}catch{}return p})();function Y(p){return/^[\s\xa0]*$/.test(p)}function et(p,N){W.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,N)}I(et,W),et.prototype.init=function(p,N){const D=this.type=p.type,F=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=N,N=p.relatedTarget,N||(D=="mouseover"?N=p.fromElement:D=="mouseout"&&(N=p.toElement)),this.relatedTarget=N,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&et.Z.h.call(this)},et.prototype.h=function(){et.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var me="closure_listenable_"+(Math.random()*1e6|0),pe=0;function be(p,N,D,F,ce){this.listener=p,this.proxy=null,this.src=N,this.type=D,this.capture=!!F,this.ha=ce,this.key=++pe,this.da=this.fa=!1}function qe(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function ot(p,N,D){for(const F in p)N.call(D,p[F],F,p)}function dt(p,N){for(const D in p)N.call(void 0,p[D],D,p)}function ie(p){const N={};for(const D in p)N[D]=p[D];return N}const Ae="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ke(p,N){let D,F;for(let ce=1;ce<arguments.length;ce++){F=arguments[ce];for(D in F)p[D]=F[D];for(let _e=0;_e<Ae.length;_e++)D=Ae[_e],Object.prototype.hasOwnProperty.call(F,D)&&(p[D]=F[D])}}function Ue(p){this.src=p,this.g={},this.h=0}Ue.prototype.add=function(p,N,D,F,ce){const _e=p.toString();p=this.g[_e],p||(p=this.g[_e]=[],this.h++);const Be=Le(p,N,F,ce);return Be>-1?(N=p[Be],D||(N.fa=!1)):(N=new be(N,this.src,_e,!!F,ce),N.fa=D,p.push(N)),N};function tt(p,N){const D=N.type;if(D in p.g){var F=p.g[D],ce=Array.prototype.indexOf.call(F,N,void 0),_e;(_e=ce>=0)&&Array.prototype.splice.call(F,ce,1),_e&&(qe(N),p.g[D].length==0&&(delete p.g[D],p.h--))}}function Le(p,N,D,F){for(let ce=0;ce<p.length;++ce){const _e=p[ce];if(!_e.da&&_e.listener==N&&_e.capture==!!D&&_e.ha==F)return ce}return-1}var At="closure_lm_"+(Math.random()*1e6|0),_t={};function Nt(p,N,D,F,ce){if(Array.isArray(N)){for(let _e=0;_e<N.length;_e++)Nt(p,N[_e],D,F,ce);return null}return D=Yt(D),p&&p[me]?p.J(N,D,v(F)?!!F.capture:!1,ce):Li(p,N,D,!1,F,ce)}function Li(p,N,D,F,ce,_e){if(!N)throw Error("Invalid event type");const Be=v(ce)?!!ce.capture:!!ce;let ut=Xi(p);if(ut||(p[At]=ut=new Ue(p)),D=ut.add(N,D,F,Be,_e),D.proxy)return D;if(F=Sn(),D.proxy=F,F.src=p,F.listener=D,p.addEventListener)J||(ce=Be),ce===void 0&&(ce=!1),p.addEventListener(N.toString(),F,ce);else if(p.attachEvent)p.attachEvent(fi(N.toString()),F);else if(p.addListener&&p.removeListener)p.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return D}function Sn(){function p(D){return N.call(p.src,p.listener,D)}const N=di;return p}function xr(p,N,D,F,ce){if(Array.isArray(N))for(var _e=0;_e<N.length;_e++)xr(p,N[_e],D,F,ce);else F=v(F)?!!F.capture:!!F,D=Yt(D),p&&p[me]?(p=p.i,_e=String(N).toString(),_e in p.g&&(N=p.g[_e],D=Le(N,D,F,ce),D>-1&&(qe(N[D]),Array.prototype.splice.call(N,D,1),N.length==0&&(delete p.g[_e],p.h--)))):p&&(p=Xi(p))&&(N=p.g[N.toString()],p=-1,N&&(p=Le(N,D,F,ce)),(D=p>-1?N[p]:null)&&Et(D))}function Et(p){if(typeof p!="number"&&p&&!p.da){var N=p.src;if(N&&N[me])tt(N.i,p);else{var D=p.type,F=p.proxy;N.removeEventListener?N.removeEventListener(D,F,p.capture):N.detachEvent?N.detachEvent(fi(D),F):N.addListener&&N.removeListener&&N.removeListener(F),(D=Xi(N))?(tt(D,p),D.h==0&&(D.src=null,N[At]=null)):qe(p)}}}function fi(p){return p in _t?_t[p]:_t[p]="on"+p}function di(p,N){if(p.da)p=!0;else{N=new et(N,this);const D=p.listener,F=p.ha||p.src;p.fa&&Et(p),p=D.call(F,N)}return p}function Xi(p){return p=p[At],p instanceof Ue?p:null}var fn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Yt(p){return typeof p=="function"?p:(p[fn]||(p[fn]=function(N){return p.handleEvent(N)}),p[fn])}function We(){te.call(this),this.i=new Ue(this),this.M=this,this.G=null}I(We,te),We.prototype[me]=!0,We.prototype.removeEventListener=function(p,N,D,F){xr(this,p,N,D,F)};function _n(p,N){var D,F=p.G;if(F)for(D=[];F;F=F.G)D.push(F);if(p=p.M,F=N.type||N,typeof N=="string")N=new W(N,p);else if(N instanceof W)N.target=N.target||p;else{var ce=N;N=new W(F,p),ke(N,ce)}ce=!0;let _e,Be;if(D)for(Be=D.length-1;Be>=0;Be--)_e=N.g=D[Be],ce=Fe(_e,F,!0,N)&&ce;if(_e=N.g=p,ce=Fe(_e,F,!0,N)&&ce,ce=Fe(_e,F,!1,N)&&ce,D)for(Be=0;Be<D.length;Be++)_e=N.g=D[Be],ce=Fe(_e,F,!1,N)&&ce}We.prototype.N=function(){if(We.Z.N.call(this),this.i){var p=this.i;for(const N in p.g){const D=p.g[N];for(let F=0;F<D.length;F++)qe(D[F]);delete p.g[N],p.h--}}this.G=null},We.prototype.J=function(p,N,D,F){return this.i.add(String(p),N,!1,D,F)},We.prototype.K=function(p,N,D,F){return this.i.add(String(p),N,!0,D,F)};function Fe(p,N,D,F){if(N=p.i.g[String(N)],!N)return!0;N=N.concat();let ce=!0;for(let _e=0;_e<N.length;++_e){const Be=N[_e];if(Be&&!Be.da&&Be.capture==D){const ut=Be.listener,jn=Be.ha||Be.src;Be.fa&&tt(p.i,Be),ce=ut.call(jn,F)!==!1&&ce}}return ce&&!F.defaultPrevented}function ps(p,N){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=_(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(N)>2147483647?-1:y.setTimeout(p,N||0)}function xs(p){p.g=ps(()=>{p.g=null,p.i&&(p.i=!1,xs(p))},p.l);const N=p.h;p.h=null,p.m.apply(null,N)}class mn extends te{constructor(N,D){super(),this.m=N,this.l=D,this.h=null,this.i=!1,this.g=null}j(N){this.h=arguments,this.g?this.i=!0:xs(this)}N(){super.N(),this.g&&(y.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bi(p){te.call(this),this.h=p,this.g={}}I(bi,te);var ai=[];function ys(p){ot(p.g,function(N,D){this.g.hasOwnProperty(D)&&Et(N)},p),p.g={}}bi.prototype.N=function(){bi.Z.N.call(this),ys(this)},bi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gi=y.JSON.stringify,Wn=y.JSON.parse,Ns=class{stringify(p){return y.JSON.stringify(p,void 0)}parse(p){return y.JSON.parse(p,void 0)}};function Kr(){}function Rs(){}var Ut={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function De(){W.call(this,"d")}I(De,W);function Xt(){W.call(this,"c")}I(Xt,W);var nt={},sn=null;function sr(){return sn=sn||new We}nt.Ia="serverreachability";function Es(p){W.call(this,nt.Ia,p)}I(Es,W);function ar(p){const N=sr();_n(N,new Es(N))}nt.STAT_EVENT="statevent";function bt(p,N){W.call(this,nt.STAT_EVENT,p),this.stat=N}I(bt,W);function on(p){const N=sr();_n(N,new bt(N,p))}nt.Ja="timingevent";function Ki(p,N){W.call(this,nt.Ja,p),this.size=N}I(Ki,W);function or(p,N){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return y.setTimeout(function(){p()},N)}function In(){this.g=!0}In.prototype.ua=function(){this.g=!1};function Ks(p,N,D,F,ce,_e){p.info(function(){if(p.g)if(_e){var Be="",ut=_e.split("&");for(let Kt=0;Kt<ut.length;Kt++){var jn=ut[Kt].split("=");if(jn.length>1){const An=jn[0];jn=jn[1];const hr=An.split("_");Be=hr.length>=2&&hr[1]=="type"?Be+(An+"="+jn+"&"):Be+(An+"=redacted&")}}}else Be=null;else Be=_e;return"XMLHTTP REQ ("+F+") [attempt "+ce+"]: "+N+`
`+D+`
`+Be})}function Ln(p,N,D,F,ce,_e,Be){p.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+ce+"]: "+N+`
`+D+`
`+_e+" "+Be})}function Ti(p,N,D,F){p.info(function(){return"XMLHTTP TEXT ("+N+"): "+Wi(p,D)+(F?" "+F:"")})}function yr(p,N){p.info(function(){return"TIMEOUT: "+N})}In.prototype.info=function(){};function Wi(p,N){if(!p.g)return N;if(!N)return null;try{const _e=JSON.parse(N);if(_e){for(p=0;p<_e.length;p++)if(Array.isArray(_e[p])){var D=_e[p];if(!(D.length<2)){var F=D[1];if(Array.isArray(F)&&!(F.length<1)){var ce=F[0];if(ce!="noop"&&ce!="stop"&&ce!="close")for(let Be=1;Be<F.length;Be++)F[Be]=""}}}}return gi(_e)}catch{return N}}var _s={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},lr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ws;function Pn(){}I(Pn,Kr),Pn.prototype.g=function(){return new XMLHttpRequest},ws=new Pn;function vi(p){return encodeURIComponent(String(p))}function Ci(p){var N=1;p=p.split(":");const D=[];for(;N>0&&p.length;)D.push(p.shift()),N--;return p.length&&D.push(p.join(":")),D}function je(p,N,D,F){this.j=p,this.i=N,this.l=D,this.S=F||1,this.V=new bi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new mi}function mi(){this.i=null,this.g="",this.h=!1}var vn={},Vt={};function Z(p,N,D){p.M=1,p.A=Qi(kn(N)),p.u=D,p.R=!0,at(p,null)}function at(p,N){p.F=Date.now(),Qn(p),p.B=kn(p.A);var D=p.B,F=p.S;Array.isArray(F)||(F=[String(F)]),ln(D.i,"t",F),p.C=0,D=p.j.L,p.h=new mi,p.g=Pa(p.j,D?N:null,!p.u),p.P>0&&(p.O=new mn(_(p.Y,p,p.g),p.P)),N=p.V,D=p.g,F=p.ba;var ce="readystatechange";Array.isArray(ce)||(ce&&(ai[0]=ce.toString()),ce=ai);for(let _e=0;_e<ce.length;_e++){const Be=Nt(D,ce[_e],F||N.handleEvent,!1,N.h||N);if(!Be)break;N.g[Be.key]=Be}N=p.J?ie(p.J):{},p.u?(p.v||(p.v="POST"),N["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,N)):(p.v="GET",p.g.ea(p.B,p.v,null,N)),ar(),Ks(p.i,p.v,p.B,p.l,p.S,p.u)}je.prototype.ba=function(p){p=p.target;const N=this.O;N&&wr(p)==3?N.j():this.Y(p)},je.prototype.Y=function(p){try{if(p==this.g)e:{const ut=wr(this.g),jn=this.g.ya(),Kt=this.g.ca();if(!(ut<3)&&(ut!=3||this.g&&(this.h.h||this.g.la()||qn(this.g)))){this.K||ut!=4||jn==7||(jn==8||Kt<=0?ar(3):ar(2)),pn(this);var N=this.g.ca();this.X=N;var D=ct(this);if(this.o=N==200,Ln(this.i,this.v,this.B,this.l,this.S,ut,N),this.o){if(this.U&&!this.L){t:{if(this.g){var F,ce=this.g;if((F=ce.g?ce.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(F)){var _e=F;break t}}_e=null}if(p=_e)Ti(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Jn(this,p);else{this.o=!1,this.m=3,on(12),Bn(this),Rt(this);break e}}if(this.R){p=!0;let An;for(;!this.K&&this.C<D.length;)if(An=oi(this,D),An==Vt){ut==4&&(this.m=4,on(14),p=!1),Ti(this.i,this.l,null,"[Incomplete Response]");break}else if(An==vn){this.m=4,on(15),Ti(this.i,this.l,D,"[Invalid Chunk]"),p=!1;break}else Ti(this.i,this.l,An,null),Jn(this,An);if(zn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ut!=4||D.length!=0||this.h.h||(this.m=1,on(16),p=!1),this.o=this.o&&p,!p)Ti(this.i,this.l,D,"[Invalid Chunked Response]"),Bn(this),Rt(this);else if(D.length>0&&!this.W){this.W=!0;var Be=this.j;Be.g==this&&Be.aa&&!Be.P&&(Be.j.info("Great, no buffering proxy detected. Bytes received: "+D.length),ye(Be),Be.P=!0,on(11))}}else Ti(this.i,this.l,D,null),Jn(this,D);ut==4&&Bn(this),this.o&&!this.K&&(ut==4?ea(this.j,this):(this.o=!1,Qn(this)))}else ur(this.g),N==400&&D.indexOf("Unknown SID")>0?(this.m=3,on(12)):(this.m=0,on(13)),Bn(this),Rt(this)}}}catch{}finally{}};function ct(p){if(!zn(p))return p.g.la();const N=qn(p.g);if(N==="")return"";let D="";const F=N.length,ce=wr(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return Bn(p),Rt(p),"";p.h.i=new y.TextDecoder}for(let _e=0;_e<F;_e++)p.h.h=!0,D+=p.h.i.decode(N[_e],{stream:!(ce&&_e==F-1)});return N.length=0,p.h.g+=D,p.C=0,p.h.g}function zn(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function oi(p,N){var D=p.C,F=N.indexOf(`
`,D);return F==-1?Vt:(D=Number(N.substring(D,F)),isNaN(D)?vn:(F+=1,F+D>N.length?Vt:(N=N.slice(F,F+D),p.C=F+D,N)))}je.prototype.cancel=function(){this.K=!0,Bn(this)};function Qn(p){p.T=Date.now()+p.H,Zn(p,p.H)}function Zn(p,N){if(p.D!=null)throw Error("WatchDog timer not null");p.D=or(_(p.aa,p),N)}function pn(p){p.D&&(y.clearTimeout(p.D),p.D=null)}je.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(yr(this.i,this.B),this.M!=2&&(ar(),on(17)),Bn(this),this.m=2,Rt(this)):Zn(this,this.T-p)};function Rt(p){p.j.I==0||p.K||ea(p.j,p)}function Bn(p){pn(p);var N=p.O;N&&typeof N.dispose=="function"&&N.dispose(),p.O=null,ys(p.V),p.g&&(N=p.g,p.g=null,N.abort(),N.dispose())}function Jn(p,N){try{var D=p.j;if(D.I!=0&&(D.g==p||Pi(D.h,p))){if(!p.L&&Pi(D.h,p)&&D.I==3){try{var F=D.Ba.g.parse(N)}catch{F=null}if(Array.isArray(F)&&F.length==3){var ce=F;if(ce[0]==0){e:if(!D.v){if(D.g)if(D.g.F+3e3<p.F)Un(D),Ts(D);else break e;$s(D),on(18)}}else D.xa=ce[1],0<D.xa-D.K&&ce[2]<37500&&D.F&&D.A==0&&!D.C&&(D.C=or(_(D.Va,D),6e3));en(D.h)<=1&&D.ta&&(D.ta=void 0)}else Zr(D,11)}else if((p.L||D.g==p)&&Un(D),!Y(N))for(ce=D.Ba.g.parse(N),N=0;N<ce.length;N++){let Kt=ce[N];const An=Kt[0];if(!(An<=D.K))if(D.K=An,Kt=Kt[1],D.I==2)if(Kt[0]=="c"){D.M=Kt[1],D.ba=Kt[2];const hr=Kt[3];hr!=null&&(D.ka=hr,D.j.info("VER="+D.ka));const es=Kt[4];es!=null&&(D.za=es,D.j.info("SVER="+D.za));const Oi=Kt[5];Oi!=null&&typeof Oi=="number"&&Oi>0&&(F=1.5*Oi,D.O=F,D.j.info("backChannelRequestTimeoutMs_="+F)),F=D;const fr=p.g;if(fr){const na=fr.g?fr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(na){var _e=F.h;_e.g||na.indexOf("spdy")==-1&&na.indexOf("quic")==-1&&na.indexOf("h2")==-1||(_e.j=_e.l,_e.g=new Set,_e.h&&(vo(_e,_e.h),_e.h=null))}if(F.G){const ts=fr.g?fr.g.getResponseHeader("X-HTTP-Session-Id"):null;ts&&(F.wa=ts,rt(F.J,F.G,ts))}}D.I=3,D.l&&D.l.ra(),D.aa&&(D.T=Date.now()-p.F,D.j.info("Handshake RTT: "+D.T+"ms")),F=D;var Be=p;if(F.na=ol(F,F.L?F.ba:null,F.W),Be.L){jt(F.h,Be);var ut=Be,jn=F.O;jn&&(ut.H=jn),ut.D&&(pn(ut),Qn(ut)),F.g=Be}else Br(F);D.i.length>0&&Qr(D)}else Kt[0]!="stop"&&Kt[0]!="close"||Zr(D,7);else D.I==3&&(Kt[0]=="stop"||Kt[0]=="close"?Kt[0]=="stop"?Zr(D,7):Da(D):Kt[0]!="noop"&&D.l&&D.l.qa(Kt),D.A=0)}}ar(4)}catch{}}var $t=class{constructor(p,N){this.g=p,this.map=N}};function Ie(p){this.l=p||10,y.PerformanceNavigationTiming?(p=y.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(y.chrome&&y.chrome.loadTimes&&y.chrome.loadTimes()&&y.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function To(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function en(p){return p.h?1:p.g?p.g.size:0}function Pi(p,N){return p.h?p.h==N:p.g?p.g.has(N):!1}function vo(p,N){p.g?p.g.add(N):p.h=N}function jt(p,N){p.h&&p.h==N?p.h=null:p.g&&p.g.has(N)&&p.g.delete(N)}Ie.prototype.cancel=function(){if(this.i=Mt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function Mt(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let N=p.i;for(const D of p.g.values())N=N.concat(D.G);return N}return U(p.i)}var Ct=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Os(p,N){if(p){p=p.split("&");for(let D=0;D<p.length;D++){const F=p[D].indexOf("=");let ce,_e=null;F>=0?(ce=p[D].substring(0,F),_e=p[D].substring(F+1)):ce=p[D],N(ce,_e?decodeURIComponent(_e.replace(/\+/g," ")):"")}}}function Bi(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let N;p instanceof Bi?(this.l=p.l,Ot(this,p.j),this.o=p.o,this.g=p.g,ki(this,p.u),this.h=p.h,Co(this,So(p.i)),this.m=p.m):p&&(N=String(p).match(Ct))?(this.l=!1,Ot(this,N[1]||"",!0),this.o=Wr(N[2]||""),this.g=Wr(N[3]||"",!0),ki(this,N[4]),this.h=Wr(N[5]||"",!0),Co(this,N[6]||"",!0),this.m=Wr(N[7]||"")):(this.l=!1,this.i=new li(null,this.l))}Bi.prototype.toString=function(){const p=[];var N=this.j;N&&p.push(Er(N,Hn,!0),":");var D=this.g;return(D||N=="file")&&(p.push("//"),(N=this.o)&&p.push(Er(N,Hn,!0),"@"),p.push(vi(D).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D=this.u,D!=null&&p.push(":",String(D))),(D=this.h)&&(this.g&&D.charAt(0)!="/"&&p.push("/"),p.push(Er(D,D.charAt(0)=="/"?H:fe,!0))),(D=this.i.toString())&&p.push("?",D),(D=this.m)&&p.push("#",Er(D,Gn)),p.join("")},Bi.prototype.resolve=function(p){const N=kn(this);let D=!!p.j;D?Ot(N,p.j):D=!!p.o,D?N.o=p.o:D=!!p.g,D?N.g=p.g:D=p.u!=null;var F=p.h;if(D)ki(N,p.u);else if(D=!!p.h){if(F.charAt(0)!="/")if(this.g&&!this.h)F="/"+F;else{var ce=N.h.lastIndexOf("/");ce!=-1&&(F=N.h.slice(0,ce+1)+F)}if(ce=F,ce==".."||ce==".")F="";else if(ce.indexOf("./")!=-1||ce.indexOf("/.")!=-1){F=ce.lastIndexOf("/",0)==0,ce=ce.split("/");const _e=[];for(let Be=0;Be<ce.length;){const ut=ce[Be++];ut=="."?F&&Be==ce.length&&_e.push(""):ut==".."?((_e.length>1||_e.length==1&&_e[0]!="")&&_e.pop(),F&&Be==ce.length&&_e.push("")):(_e.push(ut),F=!0)}F=_e.join("/")}else F=ce}return D?N.h=F:D=p.i.toString()!=="",D?Co(N,So(p.i)):D=!!p.m,D&&(N.m=p.m),N};function kn(p){return new Bi(p)}function Ot(p,N,D){p.j=D?Wr(N,!0):N,p.j&&(p.j=p.j.replace(/:$/,""))}function ki(p,N){if(N){if(N=Number(N),isNaN(N)||N<0)throw Error("Bad port number "+N);p.u=N}else p.u=null}function Co(p,N,D){N instanceof li?(p.i=N,Ms(p.i,p.l)):(D||(N=Er(N,Ye)),p.i=new li(N,p.l))}function rt(p,N,D){p.i.set(N,D)}function Qi(p){return rt(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function Wr(p,N){return p?N?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Er(p,N,D){return typeof p=="string"?(p=encodeURI(p).replace(N,Tt),D&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function Tt(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var Hn=/[#\/\?@]/g,fe=/[#\?:]/g,H=/[#\?]/g,Ye=/[#\?@]/g,Gn=/#/g;function li(p,N){this.h=this.g=null,this.i=p||null,this.j=!!N}function Zi(p){p.g||(p.g=new Map,p.h=0,p.i&&Os(p.i,function(N,D){p.add(decodeURIComponent(N.replace(/\+/g," ")),D)}))}i=li.prototype,i.add=function(p,N){Zi(this),this.i=null,p=Ds(this,p);let D=this.g.get(p);return D||this.g.set(p,D=[]),D.push(N),this.h+=1,this};function Oa(p,N){Zi(p),N=Ds(p,N),p.g.has(N)&&(p.i=null,p.h-=p.g.get(N).length,p.g.delete(N))}function Ri(p,N){return Zi(p),N=Ds(p,N),p.g.has(N)}i.forEach=function(p,N){Zi(this),this.g.forEach(function(D,F){D.forEach(function(ce){p.call(N,ce,F,this)},this)},this)};function Qe(p,N){Zi(p);let D=[];if(typeof N=="string")Ri(p,N)&&(D=D.concat(p.g.get(Ds(p,N))));else for(p=Array.from(p.g.values()),N=0;N<p.length;N++)D=D.concat(p[N]);return D}i.set=function(p,N){return Zi(this),this.i=null,p=Ds(this,p),Ri(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[N]),this.h+=1,this},i.get=function(p,N){return p?(p=Qe(this,p),p.length>0?String(p[0]):N):N};function ln(p,N,D){Oa(p,N),D.length>0&&(p.i=null,p.g.set(Ds(p,N),U(D)),p.h+=D.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],N=Array.from(this.g.keys());for(let F=0;F<N.length;F++){var D=N[F];const ce=vi(D);D=Qe(this,D);for(let _e=0;_e<D.length;_e++){let Be=ce;D[_e]!==""&&(Be+="="+vi(D[_e])),p.push(Be)}}return this.i=p.join("&")};function So(p){const N=new li;return N.i=p.i,p.g&&(N.g=new Map(p.g),N.h=p.h),N}function Ds(p,N){return N=String(N),p.j&&(N=N.toLowerCase()),N}function Ms(p,N){N&&!p.j&&(Zi(p),p.i=null,p.g.forEach(function(D,F){const ce=F.toLowerCase();F!=ce&&(Oa(this,F),ln(this,ce,D))},p)),p.j=N}function Ji(p,N){const D=new In;if(y.Image){const F=new Image;F.onload=S(_r,D,"TestLoadImage: loaded",!0,N,F),F.onerror=S(_r,D,"TestLoadImage: error",!1,N,F),F.onabort=S(_r,D,"TestLoadImage: abort",!1,N,F),F.ontimeout=S(_r,D,"TestLoadImage: timeout",!1,N,F),y.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=p}else N(!1)}function Ws(p,N){const D=new In,F=new AbortController,ce=setTimeout(()=>{F.abort(),_r(D,"TestPingServer: timeout",!1,N)},1e4);fetch(p,{signal:F.signal}).then(_e=>{clearTimeout(ce),_e.ok?_r(D,"TestPingServer: ok",!0,N):_r(D,"TestPingServer: server error",!1,N)}).catch(()=>{clearTimeout(ce),_r(D,"TestPingServer: error",!1,N)})}function _r(p,N,D,F,ce){try{ce&&(ce.onload=null,ce.onerror=null,ce.onabort=null,ce.ontimeout=null),F(D)}catch{}}function wn(){this.g=new Ns}function $i(p){this.i=p.Sb||null,this.h=p.ab||!1}I($i,Kr),$i.prototype.g=function(){return new er(this.i,this.h)};function er(p,N){We.call(this),this.H=p,this.o=N,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}I(er,We),i=er.prototype,i.open=function(p,N){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=N,this.readyState=1,it(this)},i.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const N={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(N.body=p),(this.H||y).fetch(new Request(this.D,N)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ls(this)),this.readyState=0},i.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,it(this)),this.g&&(this.readyState=3,it(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof y.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ze(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ze(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}i.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var N=p.value?p.value:new Uint8Array(0);(N=this.B.decode(N,{stream:!p.done}))&&(this.response=this.responseText+=N)}p.done?Ls(this):it(this),this.readyState==3&&Ze(this)}},i.Oa=function(p){this.g&&(this.response=this.responseText=p,Ls(this))},i.Na=function(p){this.g&&(this.response=p,Ls(this))},i.ga=function(){this.g&&Ls(this)};function Ls(p){p.readyState=4,p.l=null,p.j=null,p.B=null,it(p)}i.setRequestHeader=function(p,N){this.A.append(p,N)},i.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],N=this.h.entries();for(var D=N.next();!D.done;)D=D.value,p.push(D[0]+": "+D[1]),D=N.next();return p.join(`\r
`)};function it(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(er.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function cn(p){let N="";return ot(p,function(D,F){N+=F,N+=":",N+=D,N+=`\r
`}),N}function Qs(p,N,D){e:{for(F in D){var F=!1;break e}F=!0}F||(D=cn(D),typeof p=="string"?D!=null&&vi(D):rt(p,N,D))}function tn(p){We.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}I(tn,We);var Mr=/^https?$/i,Lr=["POST","PUT"];i=tn.prototype,i.Fa=function(p){this.H=p},i.ea=function(p,N,D,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);N=N?N.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ws.g(),this.g.onreadystatechange=M(_(this.Ca,this));try{this.B=!0,this.g.open(N,String(p),!0),this.B=!1}catch(_e){Zs(this,_e);return}if(p=D||"",D=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var ce in F)D.set(ce,F[ce]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const _e of F.keys())D.set(_e,F.get(_e));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(D.keys()).find(_e=>_e.toLowerCase()=="content-type"),ce=y.FormData&&p instanceof y.FormData,!(Array.prototype.indexOf.call(Lr,N,void 0)>=0)||F||ce||D.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[_e,Be]of D)this.g.setRequestHeader(_e,Be);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(_e){Zs(this,_e)}};function Zs(p,N){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=N,p.o=5,As(p),cr(p)}function As(p){p.A||(p.A=!0,_n(p,"complete"),_n(p,"error"))}i.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,_n(this,"complete"),_n(this,"abort"),cr(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),cr(this,!0)),tn.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Pr(this):this.Xa())},i.Xa=function(){Pr(this)};function Pr(p){if(p.h&&typeof d<"u"){if(p.v&&wr(p)==4)setTimeout(p.Ca.bind(p),0);else if(_n(p,"readystatechange"),wr(p)==4){p.h=!1;try{const _e=p.ca();e:switch(_e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var N=!0;break e;default:N=!1}var D;if(!(D=N)){var F;if(F=_e===0){let Be=String(p.D).match(Ct)[1]||null;!Be&&y.self&&y.self.location&&(Be=y.self.location.protocol.slice(0,-1)),F=!Mr.test(Be?Be.toLowerCase():"")}D=F}if(D)_n(p,"complete"),_n(p,"success");else{p.o=6;try{var ce=wr(p)>2?p.g.statusText:""}catch{ce=""}p.l=ce+" ["+p.ca()+"]",As(p)}}finally{cr(p)}}}}function cr(p,N){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const D=p.g;p.g=null,N||_n(p,"ready");try{D.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function wr(p){return p.g?p.g.readyState:0}i.ca=function(){try{return wr(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(p){if(this.g){var N=this.g.responseText;return p&&N.indexOf(p)==0&&(N=N.substring(p.length)),Wn(N)}};function qn(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function ur(p){const N={};p=(p.g&&wr(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<p.length;F++){if(Y(p[F]))continue;var D=Ci(p[F]);const ce=D[0];if(D=D[1],typeof D!="string")continue;D=D.trim();const _e=N[ce]||[];N[ce]=_e,_e.push(D)}dt(N,function(F){return F.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Nn(p,N,D){return D&&D.internalChannelParams&&D.internalChannelParams[p]||N}function bs(p){this.za=0,this.i=[],this.j=new In,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Nn("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Nn("baseRetryDelayMs",5e3,p),this.Za=Nn("retryDelaySeedMs",1e4,p),this.Ta=Nn("forwardChannelMaxRetries",2,p),this.va=Nn("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new Ie(p&&p.concurrentRequestLimit),this.Ba=new wn,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=bs.prototype,i.ka=8,i.I=1,i.connect=function(p,N,D,F){on(0),this.W=p,this.H=N||{},D&&F!==void 0&&(this.H.OSID=D,this.H.OAID=F),this.F=this.X,this.J=ol(this,null,this.W),Qr(this)};function Da(p){if(Ma(p),p.I==3){var N=p.V++,D=kn(p.J);if(rt(D,"SID",p.M),rt(D,"RID",N),rt(D,"TYPE","terminate"),Ps(p,D),N=new je(p,p.j,N),N.M=2,N.A=Qi(kn(D)),D=!1,y.navigator&&y.navigator.sendBeacon)try{D=y.navigator.sendBeacon(N.A.toString(),"")}catch{}!D&&y.Image&&(new Image().src=N.A,D=!0),D||(N.g=Pa(N.j,null),N.g.ea(N.A)),N.F=Date.now(),Qn(N)}al(p)}function Ts(p){p.g&&(ye(p),p.g.cancel(),p.g=null)}function Ma(p){Ts(p),p.v&&(y.clearTimeout(p.v),p.v=null),Un(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&y.clearTimeout(p.m),p.m=null)}function Qr(p){if(!To(p.h)&&!p.m){p.m=!0;var N=p.Ea;Ve||G(),Ne||(Ve(),Ne=!0),j.add(N,p),p.D=0}}function La(p,N){return en(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=N.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=or(_(p.Ea,p,N),Io(p,p.D)),p.D++,!0)}i.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const ce=new je(this,this.j,p);let _e=this.o;if(this.U&&(_e?(_e=ie(_e),ke(_e,this.U)):_e=this.U),this.u!==null||this.R||(ce.J=_e,_e=null),this.S)e:{for(var N=0,D=0;D<this.i.length;D++){t:{var F=this.i[D];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break t}F=void 0}if(F===void 0)break;if(N+=F,N>4096){N=D;break e}if(N===4096||D===this.i.length-1){N=D+1;break e}}N=1e3}else N=1e3;N=Js(this,ce,N),D=kn(this.J),rt(D,"RID",p),rt(D,"CVER",22),this.G&&rt(D,"X-HTTP-Session-Id",this.G),Ps(this,D),_e&&(this.R?N="headers="+vi(cn(_e))+"&"+N:this.u&&Qs(D,this.u,_e)),vo(this.h,ce),this.Ra&&rt(D,"TYPE","init"),this.S?(rt(D,"$req",N),rt(D,"SID","null"),ce.U=!0,Z(ce,D,null)):Z(ce,D,N),this.I=2}}else this.I==3&&(p?Qt(this,p):this.i.length==0||To(this.h)||Qt(this))};function Qt(p,N){var D;N?D=N.l:D=p.V++;const F=kn(p.J);rt(F,"SID",p.M),rt(F,"RID",D),rt(F,"AID",p.K),Ps(p,F),p.u&&p.o&&Qs(F,p.u,p.o),D=new je(p,p.j,D,p.D+1),p.u===null&&(D.J=p.o),N&&(p.i=N.G.concat(p.i)),N=Js(p,D,1e3),D.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),vo(p.h,D),Z(D,F,N)}function Ps(p,N){p.H&&ot(p.H,function(D,F){rt(N,F,D)}),p.l&&ot({},function(D,F){rt(N,F,D)})}function Js(p,N,D){D=Math.min(p.i.length,D);const F=p.l?_(p.l.Ka,p.l,p):null;e:{var ce=p.i;let ut=-1;for(;;){const jn=["count="+D];ut==-1?D>0?(ut=ce[0].g,jn.push("ofs="+ut)):ut=0:jn.push("ofs="+ut);let Kt=!0;for(let An=0;An<D;An++){var _e=ce[An].g;const hr=ce[An].map;if(_e-=ut,_e<0)ut=Math.max(0,ce[An].g-100),Kt=!1;else try{_e="req"+_e+"_"||"";try{var Be=hr instanceof Map?hr:Object.entries(hr);for(const[es,Oi]of Be){let fr=Oi;v(Oi)&&(fr=gi(Oi)),jn.push(_e+es+"="+encodeURIComponent(fr))}}catch(es){throw jn.push(_e+"type="+encodeURIComponent("_badmap")),es}}catch{F&&F(hr)}}if(Kt){Be=jn.join("&");break e}}Be=void 0}return p=p.i.splice(0,D),N.G=p,Be}function Br(p){if(!p.g&&!p.v){p.Y=1;var N=p.Da;Ve||G(),Ne||(Ve(),Ne=!0),j.add(N,p),p.A=0}}function $s(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=or(_(p.Da,p),Io(p,p.A)),p.A++,!0)}i.Da=function(){if(this.v=null,gt(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=or(_(this.Wa,this),p)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,on(10),Ts(this),gt(this))};function ye(p){p.B!=null&&(y.clearTimeout(p.B),p.B=null)}function gt(p){p.g=new je(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var N=kn(p.na);rt(N,"RID","rpc"),rt(N,"SID",p.M),rt(N,"AID",p.K),rt(N,"CI",p.F?"0":"1"),!p.F&&p.ia&&rt(N,"TO",p.ia),rt(N,"TYPE","xmlhttp"),Ps(p,N),p.u&&p.o&&Qs(N,p.u,p.o),p.O&&(p.g.H=p.O);var D=p.g;p=p.ba,D.M=1,D.A=Qi(kn(N)),D.u=null,D.R=!0,at(D,p)}i.Va=function(){this.C!=null&&(this.C=null,Ts(this),$s(this),on(19))};function Un(p){p.C!=null&&(y.clearTimeout(p.C),p.C=null)}function ea(p,N){var D=null;if(p.g==N){Un(p),ye(p),p.g=null;var F=2}else if(Pi(p.h,N))D=N.G,jt(p.h,N),F=1;else return;if(p.I!=0){if(N.o)if(F==1){D=N.u?N.u.length:0,N=Date.now()-N.F;var ce=p.D;F=sr(),_n(F,new Ki(F,D)),Qr(p)}else Br(p);else if(ce=N.m,ce==3||ce==0&&N.X>0||!(F==1&&La(p,N)||F==2&&$s(p)))switch(D&&D.length>0&&(N=p.h,N.i=N.i.concat(D)),ce){case 1:Zr(p,5);break;case 4:Zr(p,10);break;case 3:Zr(p,6);break;default:Zr(p,2)}}}function Io(p,N){let D=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(D*=2),D*N}function Zr(p,N){if(p.j.info("Error code "+N),N==2){var D=_(p.bb,p),F=p.Ua;const ce=!F;F=new Bi(F||"//www.google.com/images/cleardot.gif"),y.location&&y.location.protocol=="http"||Ot(F,"https"),Qi(F),ce?Ji(F.toString(),D):Ws(F.toString(),D)}else on(2);p.I=0,p.l&&p.l.pa(N),al(p),Ma(p)}i.bb=function(p){p?(this.j.info("Successfully pinged google.com"),on(2)):(this.j.info("Failed to ping google.com"),on(1))};function al(p){if(p.I=0,p.ja=[],p.l){const N=Mt(p.h);(N.length!=0||p.i.length!=0)&&(X(p.ja,N),X(p.ja,p.i),p.h.i.length=0,U(p.i),p.i.length=0),p.l.oa()}}function ol(p,N,D){var F=D instanceof Bi?kn(D):new Bi(D);if(F.g!="")N&&(F.g=N+"."+F.g),ki(F,F.u);else{var ce=y.location;F=ce.protocol,N=N?N+"."+ce.hostname:ce.hostname,ce=+ce.port;const _e=new Bi(null);F&&Ot(_e,F),N&&(_e.g=N),ce&&ki(_e,ce),D&&(_e.h=D),F=_e}return D=p.G,N=p.wa,D&&N&&rt(F,D,N),rt(F,"VER",p.ka),Ps(p,F),F}function Pa(p,N,D){if(N&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return N=p.Aa&&!p.ma?new tn(new $i({ab:D})):new tn(p.ma),N.Fa(p.L),N}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Vn(){}i=Vn.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Jr(){}Jr.prototype.g=function(p,N){return new Dt(p,N)};function Dt(p,N){We.call(this),this.g=new bs(N),this.l=p,this.h=N&&N.messageUrlParams||null,p=N&&N.messageHeaders||null,N&&N.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=N&&N.initMessageHeaders||null,N&&N.messageContentType&&(p?p["X-WebChannel-Content-Type"]=N.messageContentType:p={"X-WebChannel-Content-Type":N.messageContentType}),N&&N.sa&&(p?p["X-WebChannel-Client-Profile"]=N.sa:p={"X-WebChannel-Client-Profile":N.sa}),this.g.U=p,(p=N&&N.Qb)&&!Y(p)&&(this.g.u=p),this.A=N&&N.supportsCrossDomainXhr||!1,this.v=N&&N.sendRawJson||!1,(N=N&&N.httpSessionIdParam)&&!Y(N)&&(this.g.G=N,p=this.h,p!==null&&N in p&&(p=this.h,N in p&&delete p[N])),this.j=new Lt(this)}I(Dt,We),Dt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Dt.prototype.close=function(){Da(this.g)},Dt.prototype.o=function(p){var N=this.g;if(typeof p=="string"){var D={};D.__data__=p,p=D}else this.v&&(D={},D.__data__=gi(p),p=D);N.i.push(new $t(N.Ya++,p)),N.I==3&&Qr(N)},Dt.prototype.N=function(){this.g.l=null,delete this.j,Da(this.g),delete this.g,Dt.Z.N.call(this)};function ta(p){De.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var N=p.__sm__;if(N){e:{for(const D in N){p=D;break e}p=void 0}(this.i=p)&&(p=this.i,N=N!==null&&p in N?N[p]:void 0),this.data=N}else this.data=p}I(ta,De);function $r(){Xt.call(this),this.status=1}I($r,Xt);function Lt(p){this.g=p}I(Lt,Vn),Lt.prototype.ra=function(){_n(this.g,"a")},Lt.prototype.qa=function(p){_n(this.g,new ta(p))},Lt.prototype.pa=function(p){_n(this.g,new $r)},Lt.prototype.oa=function(){_n(this.g,"b")},Jr.prototype.createWebChannel=Jr.prototype.g,Dt.prototype.send=Dt.prototype.o,Dt.prototype.open=Dt.prototype.m,Dt.prototype.close=Dt.prototype.close,L_=function(){return new Jr},M_=function(){return sr()},D_=nt,E1={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},_s.NO_ERROR=0,_s.TIMEOUT=8,_s.HTTP_ERROR=6,Kh=_s,lr.COMPLETE="complete",O_=lr,Rs.EventType=Ut,Ut.OPEN="a",Ut.CLOSE="b",Ut.ERROR="c",Ut.MESSAGE="d",We.prototype.listen=We.prototype.J,qc=Rs,tn.prototype.listenOnce=tn.prototype.K,tn.prototype.getLastError=tn.prototype.Ha,tn.prototype.getLastErrorCode=tn.prototype.ya,tn.prototype.getStatus=tn.prototype.ca,tn.prototype.getResponseJson=tn.prototype.La,tn.prototype.getResponseText=tn.prototype.la,tn.prototype.send=tn.prototype.ea,tn.prototype.setWithCredentials=tn.prototype.Fa,R_=tn}).apply(typeof Ph<"u"?Ph:typeof self<"u"?self:typeof window<"u"?window:{});const bx="@firebase/firestore",Tx="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ir.UNAUTHENTICATED=new ir(null),ir.GOOGLE_CREDENTIALS=new ir("google-credentials-uid"),ir.FIRST_PARTY=new ir("first-party-uid"),ir.MOCK_USER=new ir("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ic="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o=new b_("@firebase/firestore");function Bl(){return $o.logLevel}function He(i,...e){if($o.logLevel<=Jt.DEBUG){const n=e.map(tg);$o.debug(`Firestore (${ic}): ${i}`,...n)}}function Ca(i,...e){if($o.logLevel<=Jt.ERROR){const n=e.map(tg);$o.error(`Firestore (${ic}): ${i}`,...n)}}function Kl(i,...e){if($o.logLevel<=Jt.WARN){const n=e.map(tg);$o.warn(`Firestore (${ic}): ${i}`,...n)}}function tg(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(i,e,n){let o="Unexpected state";typeof e=="string"?o=e:n=e,P_(i,o,n)}function P_(i,e,n){let o=`FIRESTORE (${ic}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{o+=" CONTEXT: "+JSON.stringify(n)}catch{o+=" CONTEXT: "+n}throw Ca(o),new Error(o)}function hn(i,e,n,o){let u="Unexpected state";typeof n=="string"?u=n:o=n,i||P_(e,u,o)}function pt(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ze extends nc{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class h4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(ir.UNAUTHENTICATED)))}shutdown(){}}class f4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class d4{constructor(e){this.t=e,this.currentUser=ir.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){hn(this.o===void 0,42304);let o=this.i;const u=b=>this.i!==o?(o=this.i,n(b)):Promise.resolve();let d=new ba;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new ba,e.enqueueRetryable((()=>u(this.currentUser)))};const y=()=>{const b=d;e.enqueueRetryable((async()=>{await b.promise,await u(this.currentUser)}))},v=b=>{He("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.o&&(this.auth.addAuthTokenListener(this.o),y())};this.t.onInit((b=>v(b))),setTimeout((()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?v(b):(He("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new ba)}}),0),y()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((o=>this.i!==e?(He("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(hn(typeof o.accessToken=="string",31837,{l:o}),new B_(o.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return hn(e===null||typeof e=="string",2055,{h:e}),new ir(e)}}class g4{constructor(e,n,o){this.P=e,this.T=n,this.I=o,this.type="FirstParty",this.user=ir.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class m4{constructor(e,n,o){this.P=e,this.T=n,this.I=o}getToken(){return Promise.resolve(new g4(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(ir.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class vx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class p4{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,QS(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){hn(this.o===void 0,3512);const o=d=>{d.error!=null&&He("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const y=d.token!==this.m;return this.m=d.token,He("FirebaseAppCheckTokenProvider",`Received ${y?"new":"existing"} token.`),y?n(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable((()=>o(d)))};const u=d=>{He("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((d=>u(d))),setTimeout((()=>{if(!this.appCheck){const d=this.V.getImmediate({optional:!0});d?u(d):He("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new vx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(hn(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new vx(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x4(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let o=0;o<i;o++)n[o]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let o="";for(;o.length<20;){const u=x4(40);for(let d=0;d<u.length;++d)o.length<20&&u[d]<n&&(o+=e.charAt(u[d]%62))}return o}}function Gt(i,e){return i<e?-1:i>e?1:0}function _1(i,e){const n=Math.min(i.length,e.length);for(let o=0;o<n;o++){const u=i.charAt(o),d=e.charAt(o);if(u!==d)return t1(u)===t1(d)?Gt(u,d):t1(u)?1:-1}return Gt(i.length,e.length)}const y4=55296,E4=57343;function t1(i){const e=i.charCodeAt(0);return e>=y4&&e<=E4}function Wl(i,e,n){return i.length===e.length&&i.every(((o,u)=>n(o,e[u])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx="__name__";class Fs{constructor(e,n,o){n===void 0?n=0:n>e.length&&lt(637,{offset:n,range:e.length}),o===void 0?o=e.length-n:o>e.length-n&&lt(1746,{length:o,range:e.length-n}),this.segments=e,this.offset=n,this.len=o}get length(){return this.len}isEqual(e){return Fs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Fs?e.forEach((o=>{n.push(o)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,o=this.limit();n<o;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const o=Math.min(e.length,n.length);for(let u=0;u<o;u++){const d=Fs.compareSegments(e.get(u),n.get(u));if(d!==0)return d}return Gt(e.length,n.length)}static compareSegments(e,n){const o=Fs.isNumericId(e),u=Fs.isNumericId(n);return o&&!u?-1:!o&&u?1:o&&u?Fs.extractNumericId(e).compare(Fs.extractNumericId(n)):_1(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return uo.fromString(e.substring(4,e.length-2))}}class Cn extends Fs{construct(e,n,o){return new Cn(e,n,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const o of e){if(o.indexOf("//")>=0)throw new ze(Ce.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);n.push(...o.split("/").filter((u=>u.length>0)))}return new Cn(n)}static emptyPath(){return new Cn([])}}const _4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gi extends Fs{construct(e,n,o){return new Gi(e,n,o)}static isValidIdentifier(e){return _4.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gi.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Cx}static keyField(){return new Gi([Cx])}static fromServerFormat(e){const n=[];let o="",u=0;const d=()=>{if(o.length===0)throw new ze(Ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(o),o=""};let y=!1;for(;u<e.length;){const v=e[u];if(v==="\\"){if(u+1===e.length)throw new ze(Ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const b=e[u+1];if(b!=="\\"&&b!=="."&&b!=="`")throw new ze(Ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=b,u+=2}else v==="`"?(y=!y,u++):v!=="."||y?(o+=v,u++):(d(),u++)}if(d(),y)throw new ze(Ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gi(n)}static emptyPath(){return new Gi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e){this.path=e}static fromPath(e){return new $e(Cn.fromString(e))}static fromName(e){return new $e(Cn.fromString(e).popFirst(5))}static empty(){return new $e(Cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Cn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Cn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new Cn(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(i,e,n){if(!n)throw new ze(Ce.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function w4(i,e,n,o){if(e===!0&&o===!0)throw new ze(Ce.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function Sx(i){if(!$e.isDocumentKey(i))throw new ze(Ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Ix(i){if($e.isDocumentKey(i))throw new ze(Ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function U_(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Df(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(o){return o.constructor?o.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":lt(12329,{type:typeof i})}function Or(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ze(Ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Df(i);throw new ze(Ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ai(i,e){const n={typeString:i};return e&&(n.value=e),n}function yu(i,e){if(!U_(i))throw new ze(Ce.INVALID_ARGUMENT,"JSON must be an object");let n;for(const o in e)if(e[o]){const u=e[o].typeString,d="value"in e[o]?{value:e[o].value}:void 0;if(!(o in i)){n=`JSON missing required field: '${o}'`;break}const y=i[o];if(u&&typeof y!==u){n=`JSON field '${o}' must be a ${u}.`;break}if(d!==void 0&&y!==d.value){n=`Expected '${o}' field to equal '${d.value}'`;break}}if(n)throw new ze(Ce.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx=-62135596800,Rx=1e6;class Mn{static now(){return Mn.fromMillis(Date.now())}static fromDate(e){return Mn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),o=Math.floor((e-1e3*n)*Rx);return new Mn(n,o)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ze(Ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ze(Ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Nx)throw new ze(Ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ze(Ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Rx}_compareTo(e){return this.seconds===e.seconds?Gt(this.nanoseconds,e.nanoseconds):Gt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Mn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(yu(e,Mn._jsonSchema))return new Mn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Nx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Mn._jsonSchemaVersion="firestore/timestamp/1.0",Mn._jsonSchema={type:Ai("string",Mn._jsonSchemaVersion),seconds:Ai("number"),nanoseconds:Ai("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{static fromTimestamp(e){return new ft(e)}static min(){return new ft(new Mn(0,0))}static max(){return new ft(new Mn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu=-1;function A4(i,e){const n=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,u=ft.fromTimestamp(o===1e9?new Mn(n+1,0):new Mn(n,o));return new go(u,$e.empty(),e)}function b4(i){return new go(i.readTime,i.key,cu)}class go{constructor(e,n,o){this.readTime=e,this.documentKey=n,this.largestBatchId=o}static min(){return new go(ft.min(),$e.empty(),cu)}static max(){return new go(ft.max(),$e.empty(),cu)}}function T4(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=$e.comparator(i.documentKey,e.documentKey),n!==0?n:Gt(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class C4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rc(i){if(i.code!==Ce.FAILED_PRECONDITION||i.message!==v4)throw i;He("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&lt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Re(((o,u)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(o,u)},this.catchCallback=d=>{this.wrapFailure(n,d).next(o,u)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Re?n:Re.resolve(n)}catch(n){return Re.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Re.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Re.reject(n)}static resolve(e){return new Re(((n,o)=>{n(e)}))}static reject(e){return new Re(((n,o)=>{o(e)}))}static waitFor(e){return new Re(((n,o)=>{let u=0,d=0,y=!1;e.forEach((v=>{++u,v.next((()=>{++d,y&&d===u&&n()}),(b=>o(b)))})),y=!0,d===u&&n()}))}static or(e){let n=Re.resolve(!1);for(const o of e)n=n.next((u=>u?Re.resolve(u):o()));return n}static forEach(e,n){const o=[];return e.forEach(((u,d)=>{o.push(n.call(this,u,d))})),this.waitFor(o)}static mapArray(e,n){return new Re(((o,u)=>{const d=e.length,y=new Array(d);let v=0;for(let b=0;b<d;b++){const _=b;n(e[_]).next((S=>{y[_]=S,++v,v===d&&o(y)}),(S=>u(S)))}}))}static doWhile(e,n){return new Re(((o,u)=>{const d=()=>{e()===!0?n().next((()=>{d()}),u):o()};d()}))}}function S4(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function sc(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=o=>this.ae(o),this.ue=o=>n.writeSequenceNumber(o))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Mf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ig=-1;function Lf(i){return i==null}function uf(i){return i===0&&1/i==-1/0}function I4(i){return typeof i=="number"&&Number.isInteger(i)&&!uf(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_="";function N4(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=Ox(e)),e=R4(i.get(n),e);return Ox(e)}function R4(i,e){let n=e;const o=i.length;for(let u=0;u<o;u++){const d=i.charAt(u);switch(d){case"\0":n+="";break;case V_:n+="";break;default:n+=d}}return n}function Ox(i){return i+V_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Ao(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function j_(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,n){this.comparator=e,this.root=n||Hi.EMPTY}insert(e,n){return new Kn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Hi.BLACK,null,null))}remove(e){return new Kn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Hi.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(o===0)return n.value;o<0?n=n.left:o>0&&(n=n.right)}return null}indexOf(e){let n=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(u===0)return n+o.left.size;u<0?o=o.left:(n+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,o)=>(e(n,o),!1)))}toString(){const e=[];return this.inorderTraversal(((n,o)=>(e.push(`${n}:${o}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bh(this.root,e,this.comparator,!0)}}class Bh{constructor(e,n,o,u){this.isReverse=u,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=n?o(e.key,n):1,n&&u&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(d===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Hi{constructor(e,n,o,u,d){this.key=e,this.value=n,this.color=o??Hi.RED,this.left=u??Hi.EMPTY,this.right=d??Hi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,o,u,d){return new Hi(e??this.key,n??this.value,o??this.color,u??this.left,d??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let u=this;const d=o(e,u.key);return u=d<0?u.copy(null,null,null,u.left.insert(e,n,o),null):d===0?u.copy(null,n,null,null,null):u.copy(null,null,null,null,u.right.insert(e,n,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return Hi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let o,u=this;if(n(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,n),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),n(e,u.key)===0){if(u.right.isEmpty())return Hi.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,n))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Hi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Hi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw lt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw lt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw lt(27949);return e+(this.isRed()?0:1)}}Hi.EMPTY=null,Hi.RED=!0,Hi.BLACK=!1;Hi.EMPTY=new class{constructor(){this.size=0}get key(){throw lt(57766)}get value(){throw lt(16141)}get color(){throw lt(16727)}get left(){throw lt(29726)}get right(){throw lt(36894)}copy(e,n,o,u,d){return this}insert(e,n,o){return new Hi(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e){this.comparator=e,this.data=new Kn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,o)=>(e(n),!1)))}forEachInRange(e,n){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;n(u.key)}}forEachWhile(e,n){let o;for(o=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Mx(this.data.getIterator())}getIteratorFrom(e){return new Mx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((o=>{n=n.add(o)})),n}isEqual(e){if(!(e instanceof Ni)||this.size!==e.size)return!1;const n=this.data.getIterator(),o=e.data.getIterator();for(;n.hasNext();){const u=n.getNext().key,d=o.getNext().key;if(this.comparator(u,d)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Ni(this.comparator);return n.data=e,n}}class Mx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e){this.fields=e,e.sort(Gi.comparator)}static empty(){return new Yr([])}unionWith(e){let n=new Ni(Gi.comparator);for(const o of this.fields)n=n.add(o);for(const o of e)n=n.add(o);return new Yr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Wl(this.fields,e.fields,((n,o)=>n.isEqual(o)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(u){try{return atob(u)}catch(d){throw typeof DOMException<"u"&&d instanceof DOMException?new F_("Invalid base64 string: "+d):d}})(e);return new qi(n)}static fromUint8Array(e){const n=(function(u){let d="";for(let y=0;y<u.length;++y)d+=String.fromCharCode(u[y]);return d})(e);return new qi(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const o=new Uint8Array(n.length);for(let u=0;u<n.length;u++)o[u]=n.charCodeAt(u);return o})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Gt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qi.EMPTY_BYTE_STRING=new qi("");const O4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mo(i){if(hn(!!i,39018),typeof i=="string"){let e=0;const n=O4.exec(i);if(hn(!!n,46558,{timestamp:i}),n[1]){let u=n[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:hi(i.seconds),nanos:hi(i.nanos)}}function hi(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function po(i){return typeof i=="string"?qi.fromBase64String(i):qi.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_="server_timestamp",H_="__type__",G_="__previous_value__",q_="__local_write_time__";function rg(i){var n,o;return((o=(((n=i==null?void 0:i.mapValue)==null?void 0:n.fields)||{})[H_])==null?void 0:o.stringValue)===z_}function Pf(i){const e=i.mapValue.fields[G_];return rg(e)?Pf(e):e}function uu(i){const e=mo(i.mapValue.fields[q_].timestampValue);return new Mn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(e,n,o,u,d,y,v,b,_,S){this.databaseId=e,this.appId=n,this.persistenceKey=o,this.host=u,this.ssl=d,this.forceLongPolling=y,this.autoDetectLongPolling=v,this.longPollingOptions=b,this.useFetchStreams=_,this.isUsingEmulator=S}}const hf="(default)";class hu{constructor(e,n){this.projectId=e,this.database=n||hf}static empty(){return new hu("","")}get isDefaultDatabase(){return this.database===hf}isEqual(e){return e instanceof hu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_="__type__",M4="__max__",kh={mapValue:{}},X_="__vector__",ff="value";function xo(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?rg(i)?4:P4(i)?9007199254740991:L4(i)?10:11:lt(28295,{value:i})}function Ys(i,e){if(i===e)return!0;const n=xo(i);if(n!==xo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return uu(i).isEqual(uu(e));case 3:return(function(u,d){if(typeof u.timestampValue=="string"&&typeof d.timestampValue=="string"&&u.timestampValue.length===d.timestampValue.length)return u.timestampValue===d.timestampValue;const y=mo(u.timestampValue),v=mo(d.timestampValue);return y.seconds===v.seconds&&y.nanos===v.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(u,d){return po(u.bytesValue).isEqual(po(d.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(u,d){return hi(u.geoPointValue.latitude)===hi(d.geoPointValue.latitude)&&hi(u.geoPointValue.longitude)===hi(d.geoPointValue.longitude)})(i,e);case 2:return(function(u,d){if("integerValue"in u&&"integerValue"in d)return hi(u.integerValue)===hi(d.integerValue);if("doubleValue"in u&&"doubleValue"in d){const y=hi(u.doubleValue),v=hi(d.doubleValue);return y===v?uf(y)===uf(v):isNaN(y)&&isNaN(v)}return!1})(i,e);case 9:return Wl(i.arrayValue.values||[],e.arrayValue.values||[],Ys);case 10:case 11:return(function(u,d){const y=u.mapValue.fields||{},v=d.mapValue.fields||{};if(Dx(y)!==Dx(v))return!1;for(const b in y)if(y.hasOwnProperty(b)&&(v[b]===void 0||!Ys(y[b],v[b])))return!1;return!0})(i,e);default:return lt(52216,{left:i})}}function fu(i,e){return(i.values||[]).find((n=>Ys(n,e)))!==void 0}function Ql(i,e){if(i===e)return 0;const n=xo(i),o=xo(e);if(n!==o)return Gt(n,o);switch(n){case 0:case 9007199254740991:return 0;case 1:return Gt(i.booleanValue,e.booleanValue);case 2:return(function(d,y){const v=hi(d.integerValue||d.doubleValue),b=hi(y.integerValue||y.doubleValue);return v<b?-1:v>b?1:v===b?0:isNaN(v)?isNaN(b)?0:-1:1})(i,e);case 3:return Lx(i.timestampValue,e.timestampValue);case 4:return Lx(uu(i),uu(e));case 5:return _1(i.stringValue,e.stringValue);case 6:return(function(d,y){const v=po(d),b=po(y);return v.compareTo(b)})(i.bytesValue,e.bytesValue);case 7:return(function(d,y){const v=d.split("/"),b=y.split("/");for(let _=0;_<v.length&&_<b.length;_++){const S=Gt(v[_],b[_]);if(S!==0)return S}return Gt(v.length,b.length)})(i.referenceValue,e.referenceValue);case 8:return(function(d,y){const v=Gt(hi(d.latitude),hi(y.latitude));return v!==0?v:Gt(hi(d.longitude),hi(y.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return Px(i.arrayValue,e.arrayValue);case 10:return(function(d,y){var M,U,X,K;const v=d.fields||{},b=y.fields||{},_=(M=v[ff])==null?void 0:M.arrayValue,S=(U=b[ff])==null?void 0:U.arrayValue,I=Gt(((X=_==null?void 0:_.values)==null?void 0:X.length)||0,((K=S==null?void 0:S.values)==null?void 0:K.length)||0);return I!==0?I:Px(_,S)})(i.mapValue,e.mapValue);case 11:return(function(d,y){if(d===kh.mapValue&&y===kh.mapValue)return 0;if(d===kh.mapValue)return 1;if(y===kh.mapValue)return-1;const v=d.fields||{},b=Object.keys(v),_=y.fields||{},S=Object.keys(_);b.sort(),S.sort();for(let I=0;I<b.length&&I<S.length;++I){const M=_1(b[I],S[I]);if(M!==0)return M;const U=Ql(v[b[I]],_[S[I]]);if(U!==0)return U}return Gt(b.length,S.length)})(i.mapValue,e.mapValue);default:throw lt(23264,{he:n})}}function Lx(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Gt(i,e);const n=mo(i),o=mo(e),u=Gt(n.seconds,o.seconds);return u!==0?u:Gt(n.nanos,o.nanos)}function Px(i,e){const n=i.values||[],o=e.values||[];for(let u=0;u<n.length&&u<o.length;++u){const d=Ql(n[u],o[u]);if(d)return d}return Gt(n.length,o.length)}function Zl(i){return w1(i)}function w1(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const o=mo(n);return`time(${o.seconds},${o.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return po(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return $e.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let o="[",u=!0;for(const d of n.values||[])u?u=!1:o+=",",o+=w1(d);return o+"]"})(i.arrayValue):"mapValue"in i?(function(n){const o=Object.keys(n.fields||{}).sort();let u="{",d=!0;for(const y of o)d?d=!1:u+=",",u+=`${y}:${w1(n.fields[y])}`;return u+"}"})(i.mapValue):lt(61005,{value:i})}function Wh(i){switch(xo(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Pf(i);return e?16+Wh(e):16;case 5:return 2*i.stringValue.length;case 6:return po(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(o){return(o.values||[]).reduce(((u,d)=>u+Wh(d)),0)})(i.arrayValue);case 10:case 11:return(function(o){let u=0;return Ao(o.fields,((d,y)=>{u+=d.length+Wh(y)})),u})(i.mapValue);default:throw lt(13486,{value:i})}}function Bx(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function A1(i){return!!i&&"integerValue"in i}function sg(i){return!!i&&"arrayValue"in i}function kx(i){return!!i&&"nullValue"in i}function Ux(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Qh(i){return!!i&&"mapValue"in i}function L4(i){var n,o;return((o=(((n=i==null?void 0:i.mapValue)==null?void 0:n.fields)||{})[Y_])==null?void 0:o.stringValue)===X_}function $c(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return Ao(i.mapValue.fields,((n,o)=>e.mapValue.fields[n]=$c(o))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=$c(i.arrayValue.values[n]);return e}return{...i}}function P4(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===M4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e){this.value=e}static empty(){return new Rr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let o=0;o<e.length-1;++o)if(n=(n.mapValue.fields||{})[e.get(o)],!Qh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=$c(n)}setAll(e){let n=Gi.emptyPath(),o={},u=[];e.forEach(((y,v)=>{if(!n.isImmediateParentOf(v)){const b=this.getFieldsMap(n);this.applyChanges(b,o,u),o={},u=[],n=v.popLast()}y?o[v.lastSegment()]=$c(y):u.push(v.lastSegment())}));const d=this.getFieldsMap(n);this.applyChanges(d,o,u)}delete(e){const n=this.field(e.popLast());Qh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ys(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=n.mapValue.fields[e.get(o)];Qh(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},n.mapValue.fields[e.get(o)]=u),n=u}return n.mapValue.fields}applyChanges(e,n,o){Ao(n,((u,d)=>e[u]=d));for(const u of o)delete e[u]}clone(){return new Rr($c(this.value))}}function K_(i){const e=[];return Ao(i.fields,((n,o)=>{const u=new Gi([n]);if(Qh(o)){const d=K_(o.mapValue).fields;if(d.length===0)e.push(u);else for(const y of d)e.push(u.child(y))}else e.push(u)})),new Yr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,n,o,u,d,y,v){this.key=e,this.documentType=n,this.version=o,this.readTime=u,this.createTime=d,this.data=y,this.documentState=v}static newInvalidDocument(e){return new rr(e,0,ft.min(),ft.min(),ft.min(),Rr.empty(),0)}static newFoundDocument(e,n,o,u){return new rr(e,1,n,ft.min(),o,u,0)}static newNoDocument(e,n){return new rr(e,2,n,ft.min(),ft.min(),Rr.empty(),0)}static newUnknownDocument(e,n){return new rr(e,3,n,ft.min(),ft.min(),Rr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ft.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ft.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof rr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,n){this.position=e,this.inclusive=n}}function Vx(i,e,n){let o=0;for(let u=0;u<i.position.length;u++){const d=e[u],y=i.position[u];if(d.field.isKeyField()?o=$e.comparator($e.fromName(y.referenceValue),n.key):o=Ql(y,n.data.field(d.field)),d.dir==="desc"&&(o*=-1),o!==0)break}return o}function jx(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Ys(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,n="asc"){this.field=e,this.dir=n}}function B4(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{}class wi extends W_{constructor(e,n,o){super(),this.field=e,this.op=n,this.value=o}static create(e,n,o){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,o):new U4(e,n,o):n==="array-contains"?new F4(e,o):n==="in"?new z4(e,o):n==="not-in"?new H4(e,o):n==="array-contains-any"?new G4(e,o):new wi(e,n,o)}static createKeyFieldInFilter(e,n,o){return n==="in"?new V4(e,o):new j4(e,o)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ql(n,this.value)):n!==null&&xo(this.value)===xo(n)&&this.matchesComparison(Ql(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return lt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Is extends W_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Is(e,n)}matches(e){return Q_(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Q_(i){return i.op==="and"}function Z_(i){return k4(i)&&Q_(i)}function k4(i){for(const e of i.filters)if(e instanceof Is)return!1;return!0}function b1(i){if(i instanceof wi)return i.field.canonicalString()+i.op.toString()+Zl(i.value);if(Z_(i))return i.filters.map((e=>b1(e))).join(",");{const e=i.filters.map((n=>b1(n))).join(",");return`${i.op}(${e})`}}function J_(i,e){return i instanceof wi?(function(o,u){return u instanceof wi&&o.op===u.op&&o.field.isEqual(u.field)&&Ys(o.value,u.value)})(i,e):i instanceof Is?(function(o,u){return u instanceof Is&&o.op===u.op&&o.filters.length===u.filters.length?o.filters.reduce(((d,y,v)=>d&&J_(y,u.filters[v])),!0):!1})(i,e):void lt(19439)}function $_(i){return i instanceof wi?(function(n){return`${n.field.canonicalString()} ${n.op} ${Zl(n.value)}`})(i):i instanceof Is?(function(n){return n.op.toString()+" {"+n.getFilters().map($_).join(" ,")+"}"})(i):"Filter"}class U4 extends wi{constructor(e,n,o){super(e,n,o),this.key=$e.fromName(o.referenceValue)}matches(e){const n=$e.comparator(e.key,this.key);return this.matchesComparison(n)}}class V4 extends wi{constructor(e,n){super(e,"in",n),this.keys=ew("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class j4 extends wi{constructor(e,n){super(e,"not-in",n),this.keys=ew("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function ew(i,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((o=>$e.fromName(o.referenceValue)))}class F4 extends wi{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return sg(n)&&fu(n.arrayValue,this.value)}}class z4 extends wi{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&fu(this.value.arrayValue,n)}}class H4 extends wi{constructor(e,n){super(e,"not-in",n)}matches(e){if(fu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!fu(this.value.arrayValue,n)}}class G4 extends wi{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!sg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((o=>fu(this.value.arrayValue,o)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(e,n=null,o=[],u=[],d=null,y=null,v=null){this.path=e,this.collectionGroup=n,this.orderBy=o,this.filters=u,this.limit=d,this.startAt=y,this.endAt=v,this.Te=null}}function Fx(i,e=null,n=[],o=[],u=null,d=null,y=null){return new q4(i,e,n,o,u,d,y)}function ag(i){const e=pt(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((o=>b1(o))).join(","),n+="|ob:",n+=e.orderBy.map((o=>(function(d){return d.field.canonicalString()+d.dir})(o))).join(","),Lf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((o=>Zl(o))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((o=>Zl(o))).join(",")),e.Te=n}return e.Te}function og(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!B4(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!J_(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!jx(i.startAt,e.startAt)&&jx(i.endAt,e.endAt)}function T1(i){return $e.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n=null,o=[],u=[],d=null,y="F",v=null,b=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=o,this.filters=u,this.limit=d,this.limitType=y,this.startAt=v,this.endAt=b,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Y4(i,e,n,o,u,d,y,v){return new Eu(i,e,n,o,u,d,y,v)}function Bf(i){return new Eu(i)}function zx(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function tw(i){return i.collectionGroup!==null}function eu(i){const e=pt(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const d of e.explicitOrderBy)e.Ie.push(d),n.add(d.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(y){let v=new Ni(Gi.comparator);return y.filters.forEach((b=>{b.getFlattenedFilters().forEach((_=>{_.isInequality()&&(v=v.add(_.field))}))})),v})(e).forEach((d=>{n.has(d.canonicalString())||d.isKeyField()||e.Ie.push(new gf(d,o))})),n.has(Gi.keyField().canonicalString())||e.Ie.push(new gf(Gi.keyField(),o))}return e.Ie}function zs(i){const e=pt(i);return e.Ee||(e.Ee=X4(e,eu(i))),e.Ee}function X4(i,e){if(i.limitType==="F")return Fx(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((u=>{const d=u.dir==="desc"?"asc":"desc";return new gf(u.field,d)}));const n=i.endAt?new df(i.endAt.position,i.endAt.inclusive):null,o=i.startAt?new df(i.startAt.position,i.startAt.inclusive):null;return Fx(i.path,i.collectionGroup,e,i.filters,i.limit,n,o)}}function v1(i,e){const n=i.filters.concat([e]);return new Eu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function C1(i,e,n){return new Eu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function kf(i,e){return og(zs(i),zs(e))&&i.limitType===e.limitType}function nw(i){return`${ag(zs(i))}|lt:${i.limitType}`}function kl(i){return`Query(target=${(function(n){let o=n.path.canonicalString();return n.collectionGroup!==null&&(o+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(o+=`, filters: [${n.filters.map((u=>$_(u))).join(", ")}]`),Lf(n.limit)||(o+=", limit: "+n.limit),n.orderBy.length>0&&(o+=`, orderBy: [${n.orderBy.map((u=>(function(y){return`${y.field.canonicalString()} (${y.dir})`})(u))).join(", ")}]`),n.startAt&&(o+=", startAt: ",o+=n.startAt.inclusive?"b:":"a:",o+=n.startAt.position.map((u=>Zl(u))).join(",")),n.endAt&&(o+=", endAt: ",o+=n.endAt.inclusive?"a:":"b:",o+=n.endAt.position.map((u=>Zl(u))).join(",")),`Target(${o})`})(zs(i))}; limitType=${i.limitType})`}function Uf(i,e){return e.isFoundDocument()&&(function(o,u){const d=u.key.path;return o.collectionGroup!==null?u.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(d):$e.isDocumentKey(o.path)?o.path.isEqual(d):o.path.isImmediateParentOf(d)})(i,e)&&(function(o,u){for(const d of eu(o))if(!d.field.isKeyField()&&u.data.field(d.field)===null)return!1;return!0})(i,e)&&(function(o,u){for(const d of o.filters)if(!d.matches(u))return!1;return!0})(i,e)&&(function(o,u){return!(o.startAt&&!(function(y,v,b){const _=Vx(y,v,b);return y.inclusive?_<=0:_<0})(o.startAt,eu(o),u)||o.endAt&&!(function(y,v,b){const _=Vx(y,v,b);return y.inclusive?_>=0:_>0})(o.endAt,eu(o),u))})(i,e)}function K4(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function iw(i){return(e,n)=>{let o=!1;for(const u of eu(i)){const d=W4(u,e,n);if(d!==0)return d;o=o||u.field.isKeyField()}return 0}}function W4(i,e,n){const o=i.field.isKeyField()?$e.comparator(e.key,n.key):(function(d,y,v){const b=y.data.field(d),_=v.data.field(d);return b!==null&&_!==null?Ql(b,_):lt(42886)})(i.field,e,n);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return lt(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),o=this.inner[n];if(o!==void 0){for(const[u,d]of o)if(this.equalsFn(u,e))return d}}has(e){return this.get(e)!==void 0}set(e,n){const o=this.mapKeyFn(e),u=this.inner[o];if(u===void 0)return this.inner[o]=[[e,n]],void this.innerSize++;for(let d=0;d<u.length;d++)if(this.equalsFn(u[d][0],e))return void(u[d]=[e,n]);u.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),o=this.inner[n];if(o===void 0)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return o.length===1?delete this.inner[n]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){Ao(this.inner,((n,o)=>{for(const[u,d]of o)e(u,d)}))}isEmpty(){return j_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4=new Kn($e.comparator);function Sa(){return Q4}const rw=new Kn($e.comparator);function Yc(...i){let e=rw;for(const n of i)e=e.insert(n.key,n);return e}function sw(i){let e=rw;return i.forEach(((n,o)=>e=e.insert(n,o.overlayedDocument))),e}function Qo(){return tu()}function aw(){return tu()}function tu(){return new il((i=>i.toString()),((i,e)=>i.isEqual(e)))}const Z4=new Kn($e.comparator),J4=new Ni($e.comparator);function qt(...i){let e=J4;for(const n of i)e=e.add(n);return e}const $4=new Ni(Gt);function eI(){return $4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lg(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uf(e)?"-0":e}}function ow(i){return{integerValue:""+i}}function tI(i,e){return I4(e)?ow(e):lg(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(){this._=void 0}}function nI(i,e,n){return i instanceof mf?(function(u,d){const y={fields:{[H_]:{stringValue:z_},[q_]:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return d&&rg(d)&&(d=Pf(d)),d&&(y.fields[G_]=d),{mapValue:y}})(n,e):i instanceof du?cw(i,e):i instanceof gu?uw(i,e):(function(u,d){const y=lw(u,d),v=Hx(y)+Hx(u.Ae);return A1(y)&&A1(u.Ae)?ow(v):lg(u.serializer,v)})(i,e)}function iI(i,e,n){return i instanceof du?cw(i,e):i instanceof gu?uw(i,e):n}function lw(i,e){return i instanceof pf?(function(o){return A1(o)||(function(d){return!!d&&"doubleValue"in d})(o)})(e)?e:{integerValue:0}:null}class mf extends Vf{}class du extends Vf{constructor(e){super(),this.elements=e}}function cw(i,e){const n=hw(e);for(const o of i.elements)n.some((u=>Ys(u,o)))||n.push(o);return{arrayValue:{values:n}}}class gu extends Vf{constructor(e){super(),this.elements=e}}function uw(i,e){let n=hw(e);for(const o of i.elements)n=n.filter((u=>!Ys(u,o)));return{arrayValue:{values:n}}}class pf extends Vf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Hx(i){return hi(i.integerValue||i.doubleValue)}function hw(i){return sg(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function rI(i,e){return i.field.isEqual(e.field)&&(function(o,u){return o instanceof du&&u instanceof du||o instanceof gu&&u instanceof gu?Wl(o.elements,u.elements,Ys):o instanceof pf&&u instanceof pf?Ys(o.Ae,u.Ae):o instanceof mf&&u instanceof mf})(i.transform,e.transform)}class sI{constructor(e,n){this.version=e,this.transformResults=n}}class Dr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Dr}static exists(e){return new Dr(void 0,e)}static updateTime(e){return new Dr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class jf{}function fw(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Ff(i.key,Dr.none()):new _u(i.key,i.data,Dr.none());{const n=i.data,o=Rr.empty();let u=new Ni(Gi.comparator);for(let d of e.fields)if(!u.has(d)){let y=n.field(d);y===null&&d.length>1&&(d=d.popLast(),y=n.field(d)),y===null?o.delete(d):o.set(d,y),u=u.add(d)}return new bo(i.key,o,new Yr(u.toArray()),Dr.none())}}function aI(i,e,n){i instanceof _u?(function(u,d,y){const v=u.value.clone(),b=qx(u.fieldTransforms,d,y.transformResults);v.setAll(b),d.convertToFoundDocument(y.version,v).setHasCommittedMutations()})(i,e,n):i instanceof bo?(function(u,d,y){if(!Zh(u.precondition,d))return void d.convertToUnknownDocument(y.version);const v=qx(u.fieldTransforms,d,y.transformResults),b=d.data;b.setAll(dw(u)),b.setAll(v),d.convertToFoundDocument(y.version,b).setHasCommittedMutations()})(i,e,n):(function(u,d,y){d.convertToNoDocument(y.version).setHasCommittedMutations()})(0,e,n)}function nu(i,e,n,o){return i instanceof _u?(function(d,y,v,b){if(!Zh(d.precondition,y))return v;const _=d.value.clone(),S=Yx(d.fieldTransforms,b,y);return _.setAll(S),y.convertToFoundDocument(y.version,_).setHasLocalMutations(),null})(i,e,n,o):i instanceof bo?(function(d,y,v,b){if(!Zh(d.precondition,y))return v;const _=Yx(d.fieldTransforms,b,y),S=y.data;return S.setAll(dw(d)),S.setAll(_),y.convertToFoundDocument(y.version,S).setHasLocalMutations(),v===null?null:v.unionWith(d.fieldMask.fields).unionWith(d.fieldTransforms.map((I=>I.field)))})(i,e,n,o):(function(d,y,v){return Zh(d.precondition,y)?(y.convertToNoDocument(y.version).setHasLocalMutations(),null):v})(i,e,n)}function oI(i,e){let n=null;for(const o of i.fieldTransforms){const u=e.data.field(o.field),d=lw(o.transform,u||null);d!=null&&(n===null&&(n=Rr.empty()),n.set(o.field,d))}return n||null}function Gx(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(o,u){return o===void 0&&u===void 0||!(!o||!u)&&Wl(o,u,((d,y)=>rI(d,y)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class _u extends jf{constructor(e,n,o,u=[]){super(),this.key=e,this.value=n,this.precondition=o,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class bo extends jf{constructor(e,n,o,u,d=[]){super(),this.key=e,this.data=n,this.fieldMask=o,this.precondition=u,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function dw(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const o=i.data.field(n);e.set(n,o)}})),e}function qx(i,e,n){const o=new Map;hn(i.length===n.length,32656,{Re:n.length,Ve:i.length});for(let u=0;u<n.length;u++){const d=i[u],y=d.transform,v=e.data.field(d.field);o.set(d.field,iI(y,v,n[u]))}return o}function Yx(i,e,n){const o=new Map;for(const u of i){const d=u.transform,y=n.data.field(u.field);o.set(u.field,nI(d,y,e))}return o}class Ff extends jf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lI extends jf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e,n,o,u){this.batchId=e,this.localWriteTime=n,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,n){const o=n.mutationResults;for(let u=0;u<this.mutations.length;u++){const d=this.mutations[u];d.key.isEqual(e.key)&&aI(d,e,o[u])}}applyToLocalView(e,n){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(n=nu(o,e,n,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(n=nu(o,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const o=aw();return this.mutations.forEach((u=>{const d=e.get(u.key),y=d.overlayedDocument;let v=this.applyToLocalView(y,d.mutatedFields);v=n.has(u.key)?null:v;const b=fw(y,v);b!==null&&o.set(u.key,b),y.isValidDocument()||y.convertToNoDocument(ft.min())})),o}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),qt())}isEqual(e){return this.batchId===e.batchId&&Wl(this.mutations,e.mutations,((n,o)=>Gx(n,o)))&&Wl(this.baseMutations,e.baseMutations,((n,o)=>Gx(n,o)))}}class cg{constructor(e,n,o,u){this.batch=e,this.commitVersion=n,this.mutationResults=o,this.docVersions=u}static from(e,n,o){hn(e.mutations.length===o.length,58842,{me:e.mutations.length,fe:o.length});let u=(function(){return Z4})();const d=e.mutations;for(let y=0;y<d.length;y++)u=u.insert(d[y].key,o[y].version);return new cg(e,n,o,u)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _i,Zt;function fI(i){switch(i){case Ce.OK:return lt(64938);case Ce.CANCELLED:case Ce.UNKNOWN:case Ce.DEADLINE_EXCEEDED:case Ce.RESOURCE_EXHAUSTED:case Ce.INTERNAL:case Ce.UNAVAILABLE:case Ce.UNAUTHENTICATED:return!1;case Ce.INVALID_ARGUMENT:case Ce.NOT_FOUND:case Ce.ALREADY_EXISTS:case Ce.PERMISSION_DENIED:case Ce.FAILED_PRECONDITION:case Ce.ABORTED:case Ce.OUT_OF_RANGE:case Ce.UNIMPLEMENTED:case Ce.DATA_LOSS:return!0;default:return lt(15467,{code:i})}}function gw(i){if(i===void 0)return Ca("GRPC error has no .code"),Ce.UNKNOWN;switch(i){case _i.OK:return Ce.OK;case _i.CANCELLED:return Ce.CANCELLED;case _i.UNKNOWN:return Ce.UNKNOWN;case _i.DEADLINE_EXCEEDED:return Ce.DEADLINE_EXCEEDED;case _i.RESOURCE_EXHAUSTED:return Ce.RESOURCE_EXHAUSTED;case _i.INTERNAL:return Ce.INTERNAL;case _i.UNAVAILABLE:return Ce.UNAVAILABLE;case _i.UNAUTHENTICATED:return Ce.UNAUTHENTICATED;case _i.INVALID_ARGUMENT:return Ce.INVALID_ARGUMENT;case _i.NOT_FOUND:return Ce.NOT_FOUND;case _i.ALREADY_EXISTS:return Ce.ALREADY_EXISTS;case _i.PERMISSION_DENIED:return Ce.PERMISSION_DENIED;case _i.FAILED_PRECONDITION:return Ce.FAILED_PRECONDITION;case _i.ABORTED:return Ce.ABORTED;case _i.OUT_OF_RANGE:return Ce.OUT_OF_RANGE;case _i.UNIMPLEMENTED:return Ce.UNIMPLEMENTED;case _i.DATA_LOSS:return Ce.DATA_LOSS;default:return lt(39323,{code:i})}}(Zt=_i||(_i={}))[Zt.OK=0]="OK",Zt[Zt.CANCELLED=1]="CANCELLED",Zt[Zt.UNKNOWN=2]="UNKNOWN",Zt[Zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zt[Zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zt[Zt.NOT_FOUND=5]="NOT_FOUND",Zt[Zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zt[Zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zt[Zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zt[Zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zt[Zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zt[Zt.ABORTED=10]="ABORTED",Zt[Zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zt[Zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zt[Zt.INTERNAL=13]="INTERNAL",Zt[Zt.UNAVAILABLE=14]="UNAVAILABLE",Zt[Zt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI=new uo([4294967295,4294967295],0);function Xx(i){const e=dI().encode(i),n=new N_;return n.update(e),new Uint8Array(n.digest())}function Kx(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),o=e.getUint32(4,!0),u=e.getUint32(8,!0),d=e.getUint32(12,!0);return[new uo([n,o],0),new uo([u,d],0)]}class ug{constructor(e,n,o){if(this.bitmap=e,this.padding=n,this.hashCount=o,n<0||n>=8)throw new Xc(`Invalid padding: ${n}`);if(o<0)throw new Xc(`Invalid hash count: ${o}`);if(e.length>0&&this.hashCount===0)throw new Xc(`Invalid hash count: ${o}`);if(e.length===0&&n!==0)throw new Xc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=uo.fromNumber(this.ge)}ye(e,n,o){let u=e.add(n.multiply(uo.fromNumber(o)));return u.compare(gI)===1&&(u=new uo([u.getBits(0),u.getBits(1)],0)),u.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Xx(e),[o,u]=Kx(n);for(let d=0;d<this.hashCount;d++){const y=this.ye(o,u,d);if(!this.we(y))return!1}return!0}static create(e,n,o){const u=e%8==0?0:8-e%8,d=new Uint8Array(Math.ceil(e/8)),y=new ug(d,u,n);return o.forEach((v=>y.insert(v))),y}insert(e){if(this.ge===0)return;const n=Xx(e),[o,u]=Kx(n);for(let d=0;d<this.hashCount;d++){const y=this.ye(o,u,d);this.Se(y)}}Se(e){const n=Math.floor(e/8),o=e%8;this.bitmap[n]|=1<<o}}class Xc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,n,o,u,d){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,n,o){const u=new Map;return u.set(e,wu.createSynthesizedTargetChangeForCurrentChange(e,n,o)),new zf(ft.min(),u,new Kn(Gt),Sa(),qt())}}class wu{constructor(e,n,o,u,d){this.resumeToken=e,this.current=n,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,n,o){return new wu(o,n,qt(),qt(),qt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e,n,o,u){this.be=e,this.removedTargetIds=n,this.key=o,this.De=u}}class mw{constructor(e,n){this.targetId=e,this.Ce=n}}class pw{constructor(e,n,o=qi.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=n,this.resumeToken=o,this.cause=u}}class Wx{constructor(){this.ve=0,this.Fe=Qx(),this.Me=qi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=qt(),n=qt(),o=qt();return this.Fe.forEach(((u,d)=>{switch(d){case 0:e=e.add(u);break;case 2:n=n.add(u);break;case 1:o=o.add(u);break;default:lt(38017,{changeType:d})}})),new wu(this.Me,this.xe,e,n,o)}qe(){this.Oe=!1,this.Fe=Qx()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,hn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class mI{constructor(e){this.Ge=e,this.ze=new Map,this.je=Sa(),this.Je=Uh(),this.He=Uh(),this.Ye=new Kn(Gt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const o=this.nt(n);switch(e.state){case 0:this.rt(n)&&o.Le(e.resumeToken);break;case 1:o.Ke(),o.Ne||o.qe(),o.Le(e.resumeToken);break;case 2:o.Ke(),o.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(o.We(),o.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),o.Le(e.resumeToken));break;default:lt(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((o,u)=>{this.rt(u)&&n(u)}))}st(e){const n=e.targetId,o=e.Ce.count,u=this.ot(n);if(u){const d=u.target;if(T1(d))if(o===0){const y=new $e(d.path);this.et(n,y,rr.newNoDocument(y,ft.min()))}else hn(o===1,20013,{expectedCount:o});else{const y=this._t(n);if(y!==o){const v=this.ut(e),b=v?this.ct(v,e,y):1;if(b!==0){this.it(n);const _=b===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,_)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:o="",padding:u=0},hashCount:d=0}=n;let y,v;try{y=po(o).toUint8Array()}catch(b){if(b instanceof F_)return Kl("Decoding the base64 bloom filter in existence filter failed ("+b.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw b}try{v=new ug(y,u,d)}catch(b){return Kl(b instanceof Xc?"BloomFilter error: ":"Applying bloom filter failed: ",b),null}return v.ge===0?null:v}ct(e,n,o){return n.Ce.count===o-this.Pt(e,n.targetId)?0:2}Pt(e,n){const o=this.Ge.getRemoteKeysForTarget(n);let u=0;return o.forEach((d=>{const y=this.Ge.ht(),v=`projects/${y.projectId}/databases/${y.database}/documents/${d.path.canonicalString()}`;e.mightContain(v)||(this.et(n,d,null),u++)})),u}Tt(e){const n=new Map;this.ze.forEach(((d,y)=>{const v=this.ot(y);if(v){if(d.current&&T1(v.target)){const b=new $e(v.target.path);this.It(b).has(y)||this.Et(y,b)||this.et(y,b,rr.newNoDocument(b,e))}d.Be&&(n.set(y,d.ke()),d.qe())}}));let o=qt();this.He.forEach(((d,y)=>{let v=!0;y.forEachWhile((b=>{const _=this.ot(b);return!_||_.purpose==="TargetPurposeLimboResolution"||(v=!1,!1)})),v&&(o=o.add(d))})),this.je.forEach(((d,y)=>y.setReadTime(e)));const u=new zf(e,n,this.Ye,this.je,o);return this.je=Sa(),this.Je=Uh(),this.He=Uh(),this.Ye=new Kn(Gt),u}Xe(e,n){if(!this.rt(e))return;const o=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,o),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,o){if(!this.rt(e))return;const u=this.nt(e);this.Et(e,n)?u.Qe(n,1):u.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),o&&(this.je=this.je.insert(n,o))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Wx,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ni(Gt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ni(Gt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||He("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Wx),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Uh(){return new Kn($e.comparator)}function Qx(){return new Kn($e.comparator)}const pI={asc:"ASCENDING",desc:"DESCENDING"},xI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yI={and:"AND",or:"OR"};class EI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function S1(i,e){return i.useProto3Json||Lf(e)?e:{value:e}}function xf(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xw(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function _I(i,e){return xf(i,e.toTimestamp())}function Hs(i){return hn(!!i,49232),ft.fromTimestamp((function(n){const o=mo(n);return new Mn(o.seconds,o.nanos)})(i))}function hg(i,e){return I1(i,e).canonicalString()}function I1(i,e){const n=(function(u){return new Cn(["projects",u.projectId,"databases",u.database])})(i).child("documents");return e===void 0?n:n.child(e)}function yw(i){const e=Cn.fromString(i);return hn(bw(e),10190,{key:e.toString()}),e}function N1(i,e){return hg(i.databaseId,e.path)}function n1(i,e){const n=yw(e);if(n.get(1)!==i.databaseId.projectId)throw new ze(Ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new ze(Ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new $e(_w(n))}function Ew(i,e){return hg(i.databaseId,e)}function wI(i){const e=yw(i);return e.length===4?Cn.emptyPath():_w(e)}function R1(i){return new Cn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function _w(i){return hn(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function Zx(i,e,n){return{name:N1(i,e),fields:n.value.mapValue.fields}}function AI(i,e){let n;if("targetChange"in e){e.targetChange;const o=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:lt(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),u=e.targetChange.targetIds||[],d=(function(_,S){return _.useProto3Json?(hn(S===void 0||typeof S=="string",58123),qi.fromBase64String(S||"")):(hn(S===void 0||S instanceof Buffer||S instanceof Uint8Array,16193),qi.fromUint8Array(S||new Uint8Array))})(i,e.targetChange.resumeToken),y=e.targetChange.cause,v=y&&(function(_){const S=_.code===void 0?Ce.UNKNOWN:gw(_.code);return new ze(S,_.message||"")})(y);n=new pw(o,u,d,v||null)}else if("documentChange"in e){e.documentChange;const o=e.documentChange;o.document,o.document.name,o.document.updateTime;const u=n1(i,o.document.name),d=Hs(o.document.updateTime),y=o.document.createTime?Hs(o.document.createTime):ft.min(),v=new Rr({mapValue:{fields:o.document.fields}}),b=rr.newFoundDocument(u,d,y,v),_=o.targetIds||[],S=o.removedTargetIds||[];n=new Jh(_,S,b.key,b)}else if("documentDelete"in e){e.documentDelete;const o=e.documentDelete;o.document;const u=n1(i,o.document),d=o.readTime?Hs(o.readTime):ft.min(),y=rr.newNoDocument(u,d),v=o.removedTargetIds||[];n=new Jh([],v,y.key,y)}else if("documentRemove"in e){e.documentRemove;const o=e.documentRemove;o.document;const u=n1(i,o.document),d=o.removedTargetIds||[];n=new Jh([],d,u,null)}else{if(!("filter"in e))return lt(11601,{Rt:e});{e.filter;const o=e.filter;o.targetId;const{count:u=0,unchangedNames:d}=o,y=new hI(u,d),v=o.targetId;n=new mw(v,y)}}return n}function bI(i,e){let n;if(e instanceof _u)n={update:Zx(i,e.key,e.value)};else if(e instanceof Ff)n={delete:N1(i,e.key)};else if(e instanceof bo)n={update:Zx(i,e.key,e.data),updateMask:DI(e.fieldMask)};else{if(!(e instanceof lI))return lt(16599,{Vt:e.type});n={verify:N1(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((o=>(function(d,y){const v=y.transform;if(v instanceof mf)return{fieldPath:y.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(v instanceof du)return{fieldPath:y.field.canonicalString(),appendMissingElements:{values:v.elements}};if(v instanceof gu)return{fieldPath:y.field.canonicalString(),removeAllFromArray:{values:v.elements}};if(v instanceof pf)return{fieldPath:y.field.canonicalString(),increment:v.Ae};throw lt(20930,{transform:y.transform})})(0,o)))),e.precondition.isNone||(n.currentDocument=(function(u,d){return d.updateTime!==void 0?{updateTime:_I(u,d.updateTime)}:d.exists!==void 0?{exists:d.exists}:lt(27497)})(i,e.precondition)),n}function TI(i,e){return i&&i.length>0?(hn(e!==void 0,14353),i.map((n=>(function(u,d){let y=u.updateTime?Hs(u.updateTime):Hs(d);return y.isEqual(ft.min())&&(y=Hs(d)),new sI(y,u.transformResults||[])})(n,e)))):[]}function vI(i,e){return{documents:[Ew(i,e.path)]}}function CI(i,e){const n={structuredQuery:{}},o=e.path;let u;e.collectionGroup!==null?(u=o,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(u=o.popLast(),n.structuredQuery.from=[{collectionId:o.lastSegment()}]),n.parent=Ew(i,u);const d=(function(_){if(_.length!==0)return Aw(Is.create(_,"and"))})(e.filters);d&&(n.structuredQuery.where=d);const y=(function(_){if(_.length!==0)return _.map((S=>(function(M){return{field:Ul(M.field),direction:NI(M.dir)}})(S)))})(e.orderBy);y&&(n.structuredQuery.orderBy=y);const v=S1(i,e.limit);return v!==null&&(n.structuredQuery.limit=v),e.startAt&&(n.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{ft:n,parent:u}}function SI(i){let e=wI(i.parent);const n=i.structuredQuery,o=n.from?n.from.length:0;let u=null;if(o>0){hn(o===1,65062);const S=n.from[0];S.allDescendants?u=S.collectionId:e=e.child(S.collectionId)}let d=[];n.where&&(d=(function(I){const M=ww(I);return M instanceof Is&&Z_(M)?M.getFilters():[M]})(n.where));let y=[];n.orderBy&&(y=(function(I){return I.map((M=>(function(X){return new gf(Vl(X.field),(function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(X.direction))})(M)))})(n.orderBy));let v=null;n.limit&&(v=(function(I){let M;return M=typeof I=="object"?I.value:I,Lf(M)?null:M})(n.limit));let b=null;n.startAt&&(b=(function(I){const M=!!I.before,U=I.values||[];return new df(U,M)})(n.startAt));let _=null;return n.endAt&&(_=(function(I){const M=!I.before,U=I.values||[];return new df(U,M)})(n.endAt)),Y4(e,u,y,d,v,"F",b,_)}function II(i,e){const n=(function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return lt(28987,{purpose:u})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ww(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const o=Vl(n.unaryFilter.field);return wi.create(o,"==",{doubleValue:NaN});case"IS_NULL":const u=Vl(n.unaryFilter.field);return wi.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const d=Vl(n.unaryFilter.field);return wi.create(d,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const y=Vl(n.unaryFilter.field);return wi.create(y,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return lt(61313);default:return lt(60726)}})(i):i.fieldFilter!==void 0?(function(n){return wi.create(Vl(n.fieldFilter.field),(function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return lt(58110);default:return lt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return Is.create(n.compositeFilter.filters.map((o=>ww(o))),(function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return lt(1026)}})(n.compositeFilter.op))})(i):lt(30097,{filter:i})}function NI(i){return pI[i]}function RI(i){return xI[i]}function OI(i){return yI[i]}function Ul(i){return{fieldPath:i.canonicalString()}}function Vl(i){return Gi.fromServerFormat(i.fieldPath)}function Aw(i){return i instanceof wi?(function(n){if(n.op==="=="){if(Ux(n.value))return{unaryFilter:{field:Ul(n.field),op:"IS_NAN"}};if(kx(n.value))return{unaryFilter:{field:Ul(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ux(n.value))return{unaryFilter:{field:Ul(n.field),op:"IS_NOT_NAN"}};if(kx(n.value))return{unaryFilter:{field:Ul(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ul(n.field),op:RI(n.op),value:n.value}}})(i):i instanceof Is?(function(n){const o=n.getFilters().map((u=>Aw(u)));return o.length===1?o[0]:{compositeFilter:{op:OI(n.op),filters:o}}})(i):lt(54877,{filter:i})}function DI(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function bw(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,n,o,u,d=ft.min(),y=ft.min(),v=qi.EMPTY_BYTE_STRING,b=null){this.target=e,this.targetId=n,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=y,this.resumeToken=v,this.expectedCount=b}withSequenceNumber(e){return new ao(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ao(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ao(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ao(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e){this.yt=e}}function LI(i){const e=SI({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?C1(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(){this.Cn=new BI}addToCollectionParentIndex(e,n){return this.Cn.add(n),Re.resolve()}getCollectionParents(e,n){return Re.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Re.resolve()}deleteFieldIndex(e,n){return Re.resolve()}deleteAllFieldIndexes(e){return Re.resolve()}createTargetIndexes(e,n){return Re.resolve()}getDocumentsMatchingTarget(e,n){return Re.resolve(null)}getIndexType(e,n){return Re.resolve(0)}getFieldIndexes(e,n){return Re.resolve([])}getNextCollectionGroupToUpdate(e){return Re.resolve(null)}getMinOffset(e,n){return Re.resolve(go.min())}getMinOffsetFromCollectionGroup(e,n){return Re.resolve(go.min())}updateCollectionGroup(e,n,o){return Re.resolve()}updateIndexEntries(e,n){return Re.resolve()}}class BI{constructor(){this.index={}}add(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n]||new Ni(Cn.comparator),d=!u.has(o);return this.index[n]=u.add(o),d}has(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n];return u&&u.has(o)}getEntries(e){return(this.index[e]||new Ni(Cn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Tw=41943040;class Nr{static withCacheSize(e){return new Nr(e,Nr.DEFAULT_COLLECTION_PERCENTILE,Nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nr.DEFAULT_COLLECTION_PERCENTILE=10,Nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nr.DEFAULT=new Nr(Tw,Nr.DEFAULT_COLLECTION_PERCENTILE,Nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nr.DISABLED=new Nr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Jl(0)}static cr(){return new Jl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x="LruGarbageCollector",kI=1048576;function ey([i,e],[n,o]){const u=Gt(i,n);return u===0?Gt(e,o):u}class UI{constructor(e){this.Ir=e,this.buffer=new Ni(ey),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const o=this.buffer.last();ey(n,o)<0&&(this.buffer=this.buffer.delete(o).add(n))}}get maxValue(){return this.buffer.last()[0]}}class VI{constructor(e,n,o){this.garbageCollector=e,this.asyncQueue=n,this.localStore=o,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){He($x,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){sc(n)?He($x,"Ignoring IndexedDB error during garbage collection: ",n):await rc(n)}await this.Vr(3e5)}))}}class jI{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((o=>Math.floor(n/100*o)))}nthSequenceNumber(e,n){if(n===0)return Re.resolve(Mf.ce);const o=new UI(n);return this.mr.forEachTarget(e,(u=>o.Ar(u.sequenceNumber))).next((()=>this.mr.pr(e,(u=>o.Ar(u))))).next((()=>o.maxValue))}removeTargets(e,n,o){return this.mr.removeTargets(e,n,o)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(He("LruGarbageCollector","Garbage collection skipped; disabled"),Re.resolve(Jx)):this.getCacheSize(e).next((o=>o<this.params.cacheSizeCollectionThreshold?(He("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Jx):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let o,u,d,y,v,b,_;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((I=>(I>this.params.maximumSequenceNumbersToCollect?(He("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),u=this.params.maximumSequenceNumbersToCollect):u=I,y=Date.now(),this.nthSequenceNumber(e,u)))).next((I=>(o=I,v=Date.now(),this.removeTargets(e,o,n)))).next((I=>(d=I,b=Date.now(),this.removeOrphanedDocuments(e,o)))).next((I=>(_=Date.now(),Bl()<=Jt.DEBUG&&He("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${y-S}ms
	Determined least recently used ${u} in `+(v-y)+`ms
	Removed ${d} targets in `+(b-v)+`ms
	Removed ${I} documents in `+(_-b)+`ms
Total Duration: ${_-S}ms`),Re.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:d,documentsRemoved:I}))))}}function FI(i,e){return new jI(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(){this.changes=new il((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,rr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const o=this.changes.get(n);return o!==void 0?Re.resolve(o):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e,n,o,u){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=o,this.indexManager=u}getDocument(e,n){let o=null;return this.documentOverlayCache.getOverlay(e,n).next((u=>(o=u,this.remoteDocumentCache.getEntry(e,n)))).next((u=>(o!==null&&nu(o.mutation,u,Yr.empty(),Mn.now()),u)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((o=>this.getLocalViewOfDocuments(e,o,qt()).next((()=>o))))}getLocalViewOfDocuments(e,n,o=qt()){const u=Qo();return this.populateOverlays(e,u,n).next((()=>this.computeViews(e,n,u,o).next((d=>{let y=Yc();return d.forEach(((v,b)=>{y=y.insert(v,b.overlayedDocument)})),y}))))}getOverlayedDocuments(e,n){const o=Qo();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,qt())))}populateOverlays(e,n,o){const u=[];return o.forEach((d=>{n.has(d)||u.push(d)})),this.documentOverlayCache.getOverlays(e,u).next((d=>{d.forEach(((y,v)=>{n.set(y,v)}))}))}computeViews(e,n,o,u){let d=Sa();const y=tu(),v=(function(){return tu()})();return n.forEach(((b,_)=>{const S=o.get(_.key);u.has(_.key)&&(S===void 0||S.mutation instanceof bo)?d=d.insert(_.key,_):S!==void 0?(y.set(_.key,S.mutation.getFieldMask()),nu(S.mutation,_,S.mutation.getFieldMask(),Mn.now())):y.set(_.key,Yr.empty())})),this.recalculateAndSaveOverlays(e,d).next((b=>(b.forEach(((_,S)=>y.set(_,S))),n.forEach(((_,S)=>v.set(_,new HI(S,y.get(_)??null)))),v)))}recalculateAndSaveOverlays(e,n){const o=tu();let u=new Kn(((y,v)=>y-v)),d=qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((y=>{for(const v of y)v.keys().forEach((b=>{const _=n.get(b);if(_===null)return;let S=o.get(b)||Yr.empty();S=v.applyToLocalView(_,S),o.set(b,S);const I=(u.get(v.batchId)||qt()).add(b);u=u.insert(v.batchId,I)}))})).next((()=>{const y=[],v=u.getReverseIterator();for(;v.hasNext();){const b=v.getNext(),_=b.key,S=b.value,I=aw();S.forEach((M=>{if(!d.has(M)){const U=fw(n.get(M),o.get(M));U!==null&&I.set(M,U),d=d.add(M)}})),y.push(this.documentOverlayCache.saveOverlays(e,_,I))}return Re.waitFor(y)})).next((()=>o))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((o=>this.recalculateAndSaveOverlays(e,o)))}getDocumentsMatchingQuery(e,n,o,u){return(function(y){return $e.isDocumentKey(y.path)&&y.collectionGroup===null&&y.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):tw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,o,u):this.getDocumentsMatchingCollectionQuery(e,n,o,u)}getNextDocuments(e,n,o,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,o,u).next((d=>{const y=u-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,o.largestBatchId,u-d.size):Re.resolve(Qo());let v=cu,b=d;return y.next((_=>Re.forEach(_,((S,I)=>(v<I.largestBatchId&&(v=I.largestBatchId),d.get(S)?Re.resolve():this.remoteDocumentCache.getEntry(e,S).next((M=>{b=b.insert(S,M)}))))).next((()=>this.populateOverlays(e,_,d))).next((()=>this.computeViews(e,b,_,qt()))).next((S=>({batchId:v,changes:sw(S)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new $e(n)).next((o=>{let u=Yc();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u}))}getDocumentsMatchingCollectionGroupQuery(e,n,o,u){const d=n.collectionGroup;let y=Yc();return this.indexManager.getCollectionParents(e,d).next((v=>Re.forEach(v,(b=>{const _=(function(I,M){return new Eu(M,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)})(n,b.child(d));return this.getDocumentsMatchingCollectionQuery(e,_,o,u).next((S=>{S.forEach(((I,M)=>{y=y.insert(I,M)}))}))})).next((()=>y))))}getDocumentsMatchingCollectionQuery(e,n,o,u){let d;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,o.largestBatchId).next((y=>(d=y,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,o,d,u)))).next((y=>{d.forEach(((b,_)=>{const S=_.getKey();y.get(S)===null&&(y=y.insert(S,rr.newInvalidDocument(S)))}));let v=Yc();return y.forEach(((b,_)=>{const S=d.get(b);S!==void 0&&nu(S.mutation,_,Yr.empty(),Mn.now()),Uf(n,_)&&(v=v.insert(b,_))})),v}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Re.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(u){return{id:u.id,version:u.version,createTime:Hs(u.createTime)}})(n)),Re.resolve()}getNamedQuery(e,n){return Re.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(u){return{name:u.name,query:LI(u.bundledQuery),readTime:Hs(u.readTime)}})(n)),Re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(){this.overlays=new Kn($e.comparator),this.qr=new Map}getOverlay(e,n){return Re.resolve(this.overlays.get(n))}getOverlays(e,n){const o=Qo();return Re.forEach(n,(u=>this.getOverlay(e,u).next((d=>{d!==null&&o.set(u,d)})))).next((()=>o))}saveOverlays(e,n,o){return o.forEach(((u,d)=>{this.St(e,n,d)})),Re.resolve()}removeOverlaysForBatchId(e,n,o){const u=this.qr.get(o);return u!==void 0&&(u.forEach((d=>this.overlays=this.overlays.remove(d))),this.qr.delete(o)),Re.resolve()}getOverlaysForCollection(e,n,o){const u=Qo(),d=n.length+1,y=new $e(n.child("")),v=this.overlays.getIteratorFrom(y);for(;v.hasNext();){const b=v.getNext().value,_=b.getKey();if(!n.isPrefixOf(_.path))break;_.path.length===d&&b.largestBatchId>o&&u.set(b.getKey(),b)}return Re.resolve(u)}getOverlaysForCollectionGroup(e,n,o,u){let d=new Kn(((_,S)=>_-S));const y=this.overlays.getIterator();for(;y.hasNext();){const _=y.getNext().value;if(_.getKey().getCollectionGroup()===n&&_.largestBatchId>o){let S=d.get(_.largestBatchId);S===null&&(S=Qo(),d=d.insert(_.largestBatchId,S)),S.set(_.getKey(),_)}}const v=Qo(),b=d.getIterator();for(;b.hasNext()&&(b.getNext().value.forEach(((_,S)=>v.set(_,S))),!(v.size()>=u)););return Re.resolve(v)}St(e,n,o){const u=this.overlays.get(o.key);if(u!==null){const y=this.qr.get(u.largestBatchId).delete(o.key);this.qr.set(u.largestBatchId,y)}this.overlays=this.overlays.insert(o.key,new uI(n,o));let d=this.qr.get(n);d===void 0&&(d=qt(),this.qr.set(n,d)),this.qr.set(n,d.add(o.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(){this.sessionToken=qi.EMPTY_BYTE_STRING}getSessionToken(e){return Re.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(){this.Qr=new Ni(Mi.$r),this.Ur=new Ni(Mi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const o=new Mi(e,n);this.Qr=this.Qr.add(o),this.Ur=this.Ur.add(o)}Wr(e,n){e.forEach((o=>this.addReference(o,n)))}removeReference(e,n){this.Gr(new Mi(e,n))}zr(e,n){e.forEach((o=>this.removeReference(o,n)))}jr(e){const n=new $e(new Cn([])),o=new Mi(n,e),u=new Mi(n,e+1),d=[];return this.Ur.forEachInRange([o,u],(y=>{this.Gr(y),d.push(y.key)})),d}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new $e(new Cn([])),o=new Mi(n,e),u=new Mi(n,e+1);let d=qt();return this.Ur.forEachInRange([o,u],(y=>{d=d.add(y.key)})),d}containsKey(e){const n=new Mi(e,0),o=this.Qr.firstAfterOrEqual(n);return o!==null&&e.isEqual(o.key)}}class Mi{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return $e.comparator(e.key,n.key)||Gt(e.Yr,n.Yr)}static Kr(e,n){return Gt(e.Yr,n.Yr)||$e.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ni(Mi.$r)}checkEmpty(e){return Re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,o,u){const d=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const y=new cI(d,n,o,u);this.mutationQueue.push(y);for(const v of u)this.Zr=this.Zr.add(new Mi(v.key,d)),this.indexManager.addToCollectionParentIndex(e,v.key.path.popLast());return Re.resolve(y)}lookupMutationBatch(e,n){return Re.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const o=n+1,u=this.ei(o),d=u<0?0:u;return Re.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return Re.resolve(this.mutationQueue.length===0?ig:this.tr-1)}getAllMutationBatches(e){return Re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const o=new Mi(n,0),u=new Mi(n,Number.POSITIVE_INFINITY),d=[];return this.Zr.forEachInRange([o,u],(y=>{const v=this.Xr(y.Yr);d.push(v)})),Re.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new Ni(Gt);return n.forEach((u=>{const d=new Mi(u,0),y=new Mi(u,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([d,y],(v=>{o=o.add(v.Yr)}))})),Re.resolve(this.ti(o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,u=o.length+1;let d=o;$e.isDocumentKey(d)||(d=d.child(""));const y=new Mi(new $e(d),0);let v=new Ni(Gt);return this.Zr.forEachWhile((b=>{const _=b.key.path;return!!o.isPrefixOf(_)&&(_.length===u&&(v=v.add(b.Yr)),!0)}),y),Re.resolve(this.ti(v))}ti(e){const n=[];return e.forEach((o=>{const u=this.Xr(o);u!==null&&n.push(u)})),n}removeMutationBatch(e,n){hn(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let o=this.Zr;return Re.forEach(n.mutations,(u=>{const d=new Mi(u.key,n.batchId);return o=o.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)})).next((()=>{this.Zr=o}))}ir(e){}containsKey(e,n){const o=new Mi(n,0),u=this.Zr.firstAfterOrEqual(o);return Re.resolve(n.isEqual(u&&u.key))}performConsistencyCheck(e){return this.mutationQueue.length,Re.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e){this.ri=e,this.docs=(function(){return new Kn($e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const o=n.key,u=this.docs.get(o),d=u?u.size:0,y=this.ri(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:y}),this.size+=y-d,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const o=this.docs.get(n);return Re.resolve(o?o.document.mutableCopy():rr.newInvalidDocument(n))}getEntries(e,n){let o=Sa();return n.forEach((u=>{const d=this.docs.get(u);o=o.insert(u,d?d.document.mutableCopy():rr.newInvalidDocument(u))})),Re.resolve(o)}getDocumentsMatchingQuery(e,n,o,u){let d=Sa();const y=n.path,v=new $e(y.child("__id-9223372036854775808__")),b=this.docs.getIteratorFrom(v);for(;b.hasNext();){const{key:_,value:{document:S}}=b.getNext();if(!y.isPrefixOf(_.path))break;_.path.length>y.length+1||T4(b4(S),o)<=0||(u.has(S.key)||Uf(n,S))&&(d=d.insert(S.key,S.mutableCopy()))}return Re.resolve(d)}getAllFromCollectionGroup(e,n,o,u){lt(9500)}ii(e,n){return Re.forEach(this.docs,(o=>n(o)))}newChangeBuffer(e){return new QI(this)}getSize(e){return Re.resolve(this.size)}}class QI extends zI{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((o,u)=>{u.isValidDocument()?n.push(this.Nr.addEntry(e,u)):this.Nr.removeEntry(o)})),Re.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e){this.persistence=e,this.si=new il((n=>ag(n)),og),this.lastRemoteSnapshotVersion=ft.min(),this.highestTargetId=0,this.oi=0,this._i=new fg,this.targetCount=0,this.ai=Jl.ur()}forEachTarget(e,n){return this.si.forEach(((o,u)=>n(u))),Re.resolve()}getLastRemoteSnapshotVersion(e){return Re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Re.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Re.resolve(this.highestTargetId)}setTargetsMetadata(e,n,o){return o&&(this.lastRemoteSnapshotVersion=o),n>this.oi&&(this.oi=n),Re.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Jl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Re.resolve()}updateTargetData(e,n){return this.Pr(n),Re.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Re.resolve()}removeTargets(e,n,o){let u=0;const d=[];return this.si.forEach(((y,v)=>{v.sequenceNumber<=n&&o.get(v.targetId)===null&&(this.si.delete(y),d.push(this.removeMatchingKeysForTargetId(e,v.targetId)),u++)})),Re.waitFor(d).next((()=>u))}getTargetCount(e){return Re.resolve(this.targetCount)}getTargetData(e,n){const o=this.si.get(n)||null;return Re.resolve(o)}addMatchingKeys(e,n,o){return this._i.Wr(n,o),Re.resolve()}removeMatchingKeys(e,n,o){this._i.zr(n,o);const u=this.persistence.referenceDelegate,d=[];return u&&n.forEach((y=>{d.push(u.markPotentiallyOrphaned(e,y))})),Re.waitFor(d)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Re.resolve()}getMatchingKeysForTargetId(e,n){const o=this._i.Hr(n);return Re.resolve(o)}containsKey(e,n){return Re.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e,n){this.ui={},this.overlays={},this.ci=new Mf(0),this.li=!1,this.li=!0,this.hi=new XI,this.referenceDelegate=e(this),this.Pi=new ZI(this),this.indexManager=new PI,this.remoteDocumentCache=(function(u){return new WI(u)})((o=>this.referenceDelegate.Ti(o))),this.serializer=new MI(n),this.Ii=new qI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new YI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let o=this.ui[e.toKey()];return o||(o=new KI(n,this.referenceDelegate),this.ui[e.toKey()]=o),o}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,o){He("MemoryPersistence","Starting transaction:",e);const u=new JI(this.ci.next());return this.referenceDelegate.Ei(),o(u).next((d=>this.referenceDelegate.di(u).next((()=>d)))).toPromise().then((d=>(u.raiseOnCommittedEvent(),d)))}Ai(e,n){return Re.or(Object.values(this.ui).map((o=>()=>o.containsKey(e,n))))}}class JI extends C4{constructor(e){super(),this.currentSequenceNumber=e}}class dg{constructor(e){this.persistence=e,this.Ri=new fg,this.Vi=null}static mi(e){return new dg(e)}get fi(){if(this.Vi)return this.Vi;throw lt(60996)}addReference(e,n,o){return this.Ri.addReference(o,n),this.fi.delete(o.toString()),Re.resolve()}removeReference(e,n,o){return this.Ri.removeReference(o,n),this.fi.add(o.toString()),Re.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Re.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((u=>this.fi.add(u.toString())));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,n.targetId).next((u=>{u.forEach((d=>this.fi.add(d.toString())))})).next((()=>o.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Re.forEach(this.fi,(o=>{const u=$e.fromPath(o);return this.gi(e,u).next((d=>{d||n.removeEntry(u,ft.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((o=>{o?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return Re.or([()=>Re.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class yf{constructor(e,n){this.persistence=e,this.pi=new il((o=>N4(o.path)),((o,u)=>o.isEqual(u))),this.garbageCollector=FI(this,n)}static mi(e,n){return new yf(e,n)}Ei(){}di(e){return Re.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((o=>n.next((u=>o+u))))}wr(e){let n=0;return this.pr(e,(o=>{n++})).next((()=>n))}pr(e,n){return Re.forEach(this.pi,((o,u)=>this.br(e,o,u).next((d=>d?Re.resolve():n(u)))))}removeTargets(e,n,o){return this.persistence.getTargetCache().removeTargets(e,n,o)}removeOrphanedDocuments(e,n){let o=0;const u=this.persistence.getRemoteDocumentCache(),d=u.newChangeBuffer();return u.ii(e,(y=>this.br(e,y,n).next((v=>{v||(o++,d.removeEntry(y,ft.min()))})))).next((()=>d.apply(e))).next((()=>o))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Re.resolve()}removeTarget(e,n){const o=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,o)}addReference(e,n,o){return this.pi.set(o,e.currentSequenceNumber),Re.resolve()}removeReference(e,n,o){return this.pi.set(o,e.currentSequenceNumber),Re.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Re.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Wh(e.data.value)),n}br(e,n,o){return Re.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const u=this.pi.get(n);return Re.resolve(u!==void 0&&u>o)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e,n,o,u){this.targetId=e,this.fromCache=n,this.Es=o,this.ds=u}static As(e,n){let o=qt(),u=qt();for(const d of n.docChanges)switch(d.type){case 0:o=o.add(d.doc.key);break;case 1:u=u.add(d.doc.key)}return new gg(e,n.fromCache,o,u)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return XC()?8:S4(qC())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,o,u){const d={result:null};return this.ys(e,n).next((y=>{d.result=y})).next((()=>{if(!d.result)return this.ws(e,n,u,o).next((y=>{d.result=y}))})).next((()=>{if(d.result)return;const y=new $I;return this.Ss(e,n,y).next((v=>{if(d.result=v,this.Vs)return this.bs(e,n,y,v.size)}))})).next((()=>d.result))}bs(e,n,o,u){return o.documentReadCount<this.fs?(Bl()<=Jt.DEBUG&&He("QueryEngine","SDK will not create cache indexes for query:",kl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Re.resolve()):(Bl()<=Jt.DEBUG&&He("QueryEngine","Query:",kl(n),"scans",o.documentReadCount,"local documents and returns",u,"documents as results."),o.documentReadCount>this.gs*u?(Bl()<=Jt.DEBUG&&He("QueryEngine","The SDK decides to create cache indexes for query:",kl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zs(n))):Re.resolve())}ys(e,n){if(zx(n))return Re.resolve(null);let o=zs(n);return this.indexManager.getIndexType(e,o).next((u=>u===0?null:(n.limit!==null&&u===1&&(n=C1(n,null,"F"),o=zs(n)),this.indexManager.getDocumentsMatchingTarget(e,o).next((d=>{const y=qt(...d);return this.ps.getDocuments(e,y).next((v=>this.indexManager.getMinOffset(e,o).next((b=>{const _=this.Ds(n,v);return this.Cs(n,_,y,b.readTime)?this.ys(e,C1(n,null,"F")):this.vs(e,_,n,b)}))))})))))}ws(e,n,o,u){return zx(n)||u.isEqual(ft.min())?Re.resolve(null):this.ps.getDocuments(e,o).next((d=>{const y=this.Ds(n,d);return this.Cs(n,y,o,u)?Re.resolve(null):(Bl()<=Jt.DEBUG&&He("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),kl(n)),this.vs(e,y,n,A4(u,cu)).next((v=>v)))}))}Ds(e,n){let o=new Ni(iw(e));return n.forEach(((u,d)=>{Uf(e,d)&&(o=o.add(d))})),o}Cs(e,n,o,u){if(e.limit===null)return!1;if(o.size!==n.size)return!0;const d=e.limitType==="F"?n.last():n.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(u)>0)}Ss(e,n,o){return Bl()<=Jt.DEBUG&&He("QueryEngine","Using full collection scan to execute query:",kl(n)),this.ps.getDocumentsMatchingQuery(e,n,go.min(),o)}vs(e,n,o,u){return this.ps.getDocumentsMatchingQuery(e,o,u).next((d=>(n.forEach((y=>{d=d.insert(y.key,y)})),d)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg="LocalStore",tN=3e8;class nN{constructor(e,n,o,u){this.persistence=e,this.Fs=n,this.serializer=u,this.Ms=new Kn(Gt),this.xs=new il((d=>ag(d)),og),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(o)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new GI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function iN(i,e,n,o){return new nN(i,e,n,o)}async function Cw(i,e){const n=pt(i);return await n.persistence.runTransaction("Handle user change","readonly",(o=>{let u;return n.mutationQueue.getAllMutationBatches(o).next((d=>(u=d,n.Bs(e),n.mutationQueue.getAllMutationBatches(o)))).next((d=>{const y=[],v=[];let b=qt();for(const _ of u){y.push(_.batchId);for(const S of _.mutations)b=b.add(S.key)}for(const _ of d){v.push(_.batchId);for(const S of _.mutations)b=b.add(S.key)}return n.localDocuments.getDocuments(o,b).next((_=>({Ls:_,removedBatchIds:y,addedBatchIds:v})))}))}))}function rN(i,e){const n=pt(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(o=>{const u=e.batch.keys(),d=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(v,b,_,S){const I=_.batch,M=I.keys();let U=Re.resolve();return M.forEach((X=>{U=U.next((()=>S.getEntry(b,X))).next((K=>{const z=_.docVersions.get(X);hn(z!==null,48541),K.version.compareTo(z)<0&&(I.applyToRemoteDocument(K,_),K.isValidDocument()&&(K.setReadTime(_.commitVersion),S.addEntry(K)))}))})),U.next((()=>v.mutationQueue.removeMutationBatch(b,I)))})(n,o,e,d).next((()=>d.apply(o))).next((()=>n.mutationQueue.performConsistencyCheck(o))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(o,u,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,(function(v){let b=qt();for(let _=0;_<v.mutationResults.length;++_)v.mutationResults[_].transformResults.length>0&&(b=b.add(v.batch.mutations[_].key));return b})(e)))).next((()=>n.localDocuments.getDocuments(o,u)))}))}function Sw(i){const e=pt(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function sN(i,e){const n=pt(i),o=e.snapshotVersion;let u=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(d=>{const y=n.Ns.newChangeBuffer({trackRemovals:!0});u=n.Ms;const v=[];e.targetChanges.forEach(((S,I)=>{const M=u.get(I);if(!M)return;v.push(n.Pi.removeMatchingKeys(d,S.removedDocuments,I).next((()=>n.Pi.addMatchingKeys(d,S.addedDocuments,I))));let U=M.withSequenceNumber(d.currentSequenceNumber);e.targetMismatches.get(I)!==null?U=U.withResumeToken(qi.EMPTY_BYTE_STRING,ft.min()).withLastLimboFreeSnapshotVersion(ft.min()):S.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(S.resumeToken,o)),u=u.insert(I,U),(function(K,z,oe){return K.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-K.snapshotVersion.toMicroseconds()>=tN?!0:oe.addedDocuments.size+oe.modifiedDocuments.size+oe.removedDocuments.size>0})(M,U,S)&&v.push(n.Pi.updateTargetData(d,U))}));let b=Sa(),_=qt();if(e.documentUpdates.forEach((S=>{e.resolvedLimboDocuments.has(S)&&v.push(n.persistence.referenceDelegate.updateLimboDocument(d,S))})),v.push(aN(d,y,e.documentUpdates).next((S=>{b=S.ks,_=S.qs}))),!o.isEqual(ft.min())){const S=n.Pi.getLastRemoteSnapshotVersion(d).next((I=>n.Pi.setTargetsMetadata(d,d.currentSequenceNumber,o)));v.push(S)}return Re.waitFor(v).next((()=>y.apply(d))).next((()=>n.localDocuments.getLocalViewOfDocuments(d,b,_))).next((()=>b))})).then((d=>(n.Ms=u,d)))}function aN(i,e,n){let o=qt(),u=qt();return n.forEach((d=>o=o.add(d))),e.getEntries(i,o).next((d=>{let y=Sa();return n.forEach(((v,b)=>{const _=d.get(v);b.isFoundDocument()!==_.isFoundDocument()&&(u=u.add(v)),b.isNoDocument()&&b.version.isEqual(ft.min())?(e.removeEntry(v,b.readTime),y=y.insert(v,b)):!_.isValidDocument()||b.version.compareTo(_.version)>0||b.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(b),y=y.insert(v,b)):He(mg,"Ignoring outdated watch update for ",v,". Current version:",_.version," Watch version:",b.version)})),{ks:y,qs:u}}))}function oN(i,e){const n=pt(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(o=>(e===void 0&&(e=ig),n.mutationQueue.getNextMutationBatchAfterBatchId(o,e))))}function lN(i,e){const n=pt(i);return n.persistence.runTransaction("Allocate target","readwrite",(o=>{let u;return n.Pi.getTargetData(o,e).next((d=>d?(u=d,Re.resolve(u)):n.Pi.allocateTargetId(o).next((y=>(u=new ao(e,y,"TargetPurposeListen",o.currentSequenceNumber),n.Pi.addTargetData(o,u).next((()=>u)))))))})).then((o=>{const u=n.Ms.get(o.targetId);return(u===null||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(o.targetId,o),n.xs.set(e,o.targetId)),o}))}async function O1(i,e,n){const o=pt(i),u=o.Ms.get(e),d=n?"readwrite":"readwrite-primary";try{n||await o.persistence.runTransaction("Release target",d,(y=>o.persistence.referenceDelegate.removeTarget(y,u)))}catch(y){if(!sc(y))throw y;He(mg,`Failed to update sequence numbers for target ${e}: ${y}`)}o.Ms=o.Ms.remove(e),o.xs.delete(u.target)}function ty(i,e,n){const o=pt(i);let u=ft.min(),d=qt();return o.persistence.runTransaction("Execute query","readwrite",(y=>(function(b,_,S){const I=pt(b),M=I.xs.get(S);return M!==void 0?Re.resolve(I.Ms.get(M)):I.Pi.getTargetData(_,S)})(o,y,zs(e)).next((v=>{if(v)return u=v.lastLimboFreeSnapshotVersion,o.Pi.getMatchingKeysForTargetId(y,v.targetId).next((b=>{d=b}))})).next((()=>o.Fs.getDocumentsMatchingQuery(y,e,n?u:ft.min(),n?d:qt()))).next((v=>(cN(o,K4(e),v),{documents:v,Qs:d})))))}function cN(i,e,n){let o=i.Os.get(e)||ft.min();n.forEach(((u,d)=>{d.readTime.compareTo(o)>0&&(o=d.readTime)})),i.Os.set(e,o)}class ny{constructor(){this.activeTargetIds=eI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class uN{constructor(){this.Mo=new ny,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,o){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,o){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new ny,Promise.resolve()}handleUserChange(e,n,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy="ConnectivityMonitor";class ry{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){He(iy,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){He(iy,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vh=null;function D1(){return Vh===null?Vh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Vh++,"0x"+Vh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1="RestConnection",fN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class dN{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),u=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${o}/databases/${u}`,this.Wo=this.databaseId.database===hf?`project_id=${o}`:`project_id=${o}&database_id=${u}`}Go(e,n,o,u,d){const y=D1(),v=this.zo(e,n.toUriEncodedString());He(i1,`Sending RPC '${e}' ${y}:`,v,o);const b={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(b,u,d);const{host:_}=new URL(v),S=$1(_);return this.Jo(e,v,b,o,S).then((I=>(He(i1,`Received RPC '${e}' ${y}: `,I),I)),(I=>{throw Kl(i1,`RPC '${e}' ${y} failed with error: `,I,"url: ",v,"request:",o),I}))}Ho(e,n,o,u,d,y){return this.Go(e,n,o,u,d)}jo(e,n,o){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ic})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((u,d)=>e[d]=u)),o&&o.headers.forEach(((u,d)=>e[d]=u))}zo(e,n){const o=fN[e];return`${this.Uo}/v1/${n}:${o}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr="WebChannelConnection";class mN extends dN{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,o,u,d){const y=D1();return new Promise(((v,b)=>{const _=new R_;_.setWithCredentials(!0),_.listenOnce(O_.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case Kh.NO_ERROR:const I=_.getResponseJson();He(nr,`XHR for RPC '${e}' ${y} received:`,JSON.stringify(I)),v(I);break;case Kh.TIMEOUT:He(nr,`RPC '${e}' ${y} timed out`),b(new ze(Ce.DEADLINE_EXCEEDED,"Request time out"));break;case Kh.HTTP_ERROR:const M=_.getStatus();if(He(nr,`RPC '${e}' ${y} failed with status:`,M,"response text:",_.getResponseText()),M>0){let U=_.getResponseJson();Array.isArray(U)&&(U=U[0]);const X=U==null?void 0:U.error;if(X&&X.status&&X.message){const K=(function(oe){const he=oe.toLowerCase().replace(/_/g,"-");return Object.values(Ce).indexOf(he)>=0?he:Ce.UNKNOWN})(X.status);b(new ze(K,X.message))}else b(new ze(Ce.UNKNOWN,"Server responded with status "+_.getStatus()))}else b(new ze(Ce.UNAVAILABLE,"Connection failed."));break;default:lt(9055,{l_:e,streamId:y,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{He(nr,`RPC '${e}' ${y} completed.`)}}));const S=JSON.stringify(u);He(nr,`RPC '${e}' ${y} sending request:`,u),_.send(n,"POST",S,o,15)}))}T_(e,n,o){const u=D1(),d=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],y=L_(),v=M_(),b={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(b.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(b.useFetchStreams=!0),this.jo(b.initMessageHeaders,n,o),b.encodeInitMessageHeaders=!0;const S=d.join("");He(nr,`Creating RPC '${e}' stream ${u}: ${S}`,b);const I=y.createWebChannel(S,b);this.I_(I);let M=!1,U=!1;const X=new gN({Yo:z=>{U?He(nr,`Not sending because RPC '${e}' stream ${u} is closed:`,z):(M||(He(nr,`Opening RPC '${e}' stream ${u} transport.`),I.open(),M=!0),He(nr,`RPC '${e}' stream ${u} sending:`,z),I.send(z))},Zo:()=>I.close()}),K=(z,oe,he)=>{z.listen(oe,(ee=>{try{he(ee)}catch(ae){setTimeout((()=>{throw ae}),0)}}))};return K(I,qc.EventType.OPEN,(()=>{U||(He(nr,`RPC '${e}' stream ${u} transport opened.`),X.o_())})),K(I,qc.EventType.CLOSE,(()=>{U||(U=!0,He(nr,`RPC '${e}' stream ${u} transport closed`),X.a_(),this.E_(I))})),K(I,qc.EventType.ERROR,(z=>{U||(U=!0,Kl(nr,`RPC '${e}' stream ${u} transport errored. Name:`,z.name,"Message:",z.message),X.a_(new ze(Ce.UNAVAILABLE,"The operation could not be completed")))})),K(I,qc.EventType.MESSAGE,(z=>{var oe;if(!U){const he=z.data[0];hn(!!he,16349);const ee=he,ae=(ee==null?void 0:ee.error)||((oe=ee[0])==null?void 0:oe.error);if(ae){He(nr,`RPC '${e}' stream ${u} received error:`,ae);const Ve=ae.status;let Ne=(function(V){const te=_i[V];if(te!==void 0)return gw(te)})(Ve),j=ae.message;Ne===void 0&&(Ne=Ce.INTERNAL,j="Unknown error status: "+Ve+" with message "+ae.message),U=!0,X.a_(new ze(Ne,j)),I.close()}else He(nr,`RPC '${e}' stream ${u} received:`,he),X.u_(he)}})),K(v,D_.STAT_EVENT,(z=>{z.stat===E1.PROXY?He(nr,`RPC '${e}' stream ${u} detected buffering proxy`):z.stat===E1.NOPROXY&&He(nr,`RPC '${e}' stream ${u} detected no buffering proxy`)})),setTimeout((()=>{X.__()}),0),X}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function r1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(i){return new EI(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e,n,o=1e3,u=1.5,d=6e4){this.Mi=e,this.timerId=n,this.d_=o,this.A_=u,this.R_=d,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),o=Math.max(0,Date.now()-this.f_),u=Math.max(0,n-o);u>0&&He("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${o} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,u,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy="PersistentStream";class Nw{constructor(e,n,o,u,d,y,v,b){this.Mi=e,this.S_=o,this.b_=u,this.connection=d,this.authCredentialsProvider=y,this.appCheckCredentialsProvider=v,this.listener=b,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Iw(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Ce.RESOURCE_EXHAUSTED?(Ca(n.toString()),Ca("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([o,u])=>{this.D_===n&&this.G_(o,u)}),(o=>{e((()=>{const u=new ze(Ce.UNKNOWN,"Fetching auth token failed: "+o.message);return this.z_(u)}))}))}G_(e,n){const o=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{o((()=>this.listener.Xo()))})),this.stream.t_((()=>{o((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((u=>{o((()=>this.z_(u)))})),this.stream.onMessage((u=>{o((()=>++this.F_==1?this.J_(u):this.onNext(u)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return He(sy,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(He(sy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class pN extends Nw{constructor(e,n,o,u,d,y){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,u,y),this.serializer=d}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=AI(this.serializer,e),o=(function(d){if(!("targetChange"in d))return ft.min();const y=d.targetChange;return y.targetIds&&y.targetIds.length?ft.min():y.readTime?Hs(y.readTime):ft.min()})(e);return this.listener.H_(n,o)}Y_(e){const n={};n.database=R1(this.serializer),n.addTarget=(function(d,y){let v;const b=y.target;if(v=T1(b)?{documents:vI(d,b)}:{query:CI(d,b).ft},v.targetId=y.targetId,y.resumeToken.approximateByteSize()>0){v.resumeToken=xw(d,y.resumeToken);const _=S1(d,y.expectedCount);_!==null&&(v.expectedCount=_)}else if(y.snapshotVersion.compareTo(ft.min())>0){v.readTime=xf(d,y.snapshotVersion.toTimestamp());const _=S1(d,y.expectedCount);_!==null&&(v.expectedCount=_)}return v})(this.serializer,e);const o=II(this.serializer,e);o&&(n.labels=o),this.q_(n)}Z_(e){const n={};n.database=R1(this.serializer),n.removeTarget=e,this.q_(n)}}class xN extends Nw{constructor(e,n,o,u,d,y){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,o,u,y),this.serializer=d}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return hn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,hn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){hn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=TI(e.writeResults,e.commitTime),o=Hs(e.commitTime);return this.listener.na(o,n)}ra(){const e={};e.database=R1(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((o=>bI(this.serializer,o)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{}class EN extends yN{constructor(e,n,o,u){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=o,this.serializer=u,this.ia=!1}sa(){if(this.ia)throw new ze(Ce.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,y])=>this.connection.Go(e,I1(n,o),u,d,y))).catch((d=>{throw d.name==="FirebaseError"?(d.code===Ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ze(Ce.UNKNOWN,d.toString())}))}Ho(e,n,o,u,d){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([y,v])=>this.connection.Ho(e,I1(n,o),u,y,v,d))).catch((y=>{throw y.name==="FirebaseError"?(y.code===Ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),y):new ze(Ce.UNKNOWN,y.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class _N{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ca(n),this.aa=!1):He("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el="RemoteStore";class wN{constructor(e,n,o,u,d){this.localStore=e,this.datastore=n,this.asyncQueue=o,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=d,this.Aa.Oo((y=>{o.enqueueAndForget((async()=>{rl(this)&&(He(el,"Restarting streams for network reachability change."),await(async function(b){const _=pt(b);_.Ea.add(4),await Au(_),_.Ra.set("Unknown"),_.Ea.delete(4),await Gf(_)})(this))}))})),this.Ra=new _N(o,u)}}async function Gf(i){if(rl(i))for(const e of i.da)await e(!0)}async function Au(i){for(const e of i.da)await e(!1)}function Rw(i,e){const n=pt(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Eg(n)?yg(n):ac(n).O_()&&xg(n,e))}function pg(i,e){const n=pt(i),o=ac(n);n.Ia.delete(e),o.O_()&&Ow(n,e),n.Ia.size===0&&(o.O_()?o.L_():rl(n)&&n.Ra.set("Unknown"))}function xg(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ft.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ac(i).Y_(e)}function Ow(i,e){i.Va.Ue(e),ac(i).Z_(e)}function yg(i){i.Va=new mI({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),ac(i).start(),i.Ra.ua()}function Eg(i){return rl(i)&&!ac(i).x_()&&i.Ia.size>0}function rl(i){return pt(i).Ea.size===0}function Dw(i){i.Va=void 0}async function AN(i){i.Ra.set("Online")}async function bN(i){i.Ia.forEach(((e,n)=>{xg(i,e)}))}async function TN(i,e){Dw(i),Eg(i)?(i.Ra.ha(e),yg(i)):i.Ra.set("Unknown")}async function vN(i,e,n){if(i.Ra.set("Online"),e instanceof pw&&e.state===2&&e.cause)try{await(async function(u,d){const y=d.cause;for(const v of d.targetIds)u.Ia.has(v)&&(await u.remoteSyncer.rejectListen(v,y),u.Ia.delete(v),u.Va.removeTarget(v))})(i,e)}catch(o){He(el,"Failed to remove targets %s: %s ",e.targetIds.join(","),o),await Ef(i,o)}else if(e instanceof Jh?i.Va.Ze(e):e instanceof mw?i.Va.st(e):i.Va.tt(e),!n.isEqual(ft.min()))try{const o=await Sw(i.localStore);n.compareTo(o)>=0&&await(function(d,y){const v=d.Va.Tt(y);return v.targetChanges.forEach(((b,_)=>{if(b.resumeToken.approximateByteSize()>0){const S=d.Ia.get(_);S&&d.Ia.set(_,S.withResumeToken(b.resumeToken,y))}})),v.targetMismatches.forEach(((b,_)=>{const S=d.Ia.get(b);if(!S)return;d.Ia.set(b,S.withResumeToken(qi.EMPTY_BYTE_STRING,S.snapshotVersion)),Ow(d,b);const I=new ao(S.target,b,_,S.sequenceNumber);xg(d,I)})),d.remoteSyncer.applyRemoteEvent(v)})(i,n)}catch(o){He(el,"Failed to raise snapshot:",o),await Ef(i,o)}}async function Ef(i,e,n){if(!sc(e))throw e;i.Ea.add(1),await Au(i),i.Ra.set("Offline"),n||(n=()=>Sw(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{He(el,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await Gf(i)}))}function Mw(i,e){return e().catch((n=>Ef(i,n,e)))}async function qf(i){const e=pt(i),n=yo(e);let o=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ig;for(;CN(e);)try{const u=await oN(e.localStore,o);if(u===null){e.Ta.length===0&&n.L_();break}o=u.batchId,SN(e,u)}catch(u){await Ef(e,u)}Lw(e)&&Pw(e)}function CN(i){return rl(i)&&i.Ta.length<10}function SN(i,e){i.Ta.push(e);const n=yo(i);n.O_()&&n.X_&&n.ea(e.mutations)}function Lw(i){return rl(i)&&!yo(i).x_()&&i.Ta.length>0}function Pw(i){yo(i).start()}async function IN(i){yo(i).ra()}async function NN(i){const e=yo(i);for(const n of i.Ta)e.ea(n.mutations)}async function RN(i,e,n){const o=i.Ta.shift(),u=cg.from(o,e,n);await Mw(i,(()=>i.remoteSyncer.applySuccessfulWrite(u))),await qf(i)}async function ON(i,e){e&&yo(i).X_&&await(async function(o,u){if((function(y){return fI(y)&&y!==Ce.ABORTED})(u.code)){const d=o.Ta.shift();yo(o).B_(),await Mw(o,(()=>o.remoteSyncer.rejectFailedWrite(d.batchId,u))),await qf(o)}})(i,e),Lw(i)&&Pw(i)}async function ay(i,e){const n=pt(i);n.asyncQueue.verifyOperationInProgress(),He(el,"RemoteStore received new credentials");const o=rl(n);n.Ea.add(3),await Au(n),o&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Gf(n)}async function DN(i,e){const n=pt(i);e?(n.Ea.delete(2),await Gf(n)):e||(n.Ea.add(2),await Au(n),n.Ra.set("Unknown"))}function ac(i){return i.ma||(i.ma=(function(n,o,u){const d=pt(n);return d.sa(),new pN(o,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,u)})(i.datastore,i.asyncQueue,{Xo:AN.bind(null,i),t_:bN.bind(null,i),r_:TN.bind(null,i),H_:vN.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),Eg(i)?yg(i):i.Ra.set("Unknown")):(await i.ma.stop(),Dw(i))}))),i.ma}function yo(i){return i.fa||(i.fa=(function(n,o,u){const d=pt(n);return d.sa(),new xN(o,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,u)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:IN.bind(null,i),r_:ON.bind(null,i),ta:NN.bind(null,i),na:RN.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await qf(i)):(await i.fa.stop(),i.Ta.length>0&&(He(el,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e,n,o,u,d){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=o,this.op=u,this.removalCallback=d,this.deferred=new ba,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((y=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,o,u,d){const y=Date.now()+o,v=new _g(e,n,y,u,d);return v.start(o),v}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ze(Ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wg(i,e){if(Ca("AsyncQueue",`${e}: ${i}`),sc(i))return new ze(Ce.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{static emptySet(e){return new ql(e.comparator)}constructor(e){this.comparator=e?(n,o)=>e(n,o)||$e.comparator(n.key,o.key):(n,o)=>$e.comparator(n.key,o.key),this.keyedMap=Yc(),this.sortedSet=new Kn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,o)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ql)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;n.hasNext();){const u=n.getNext().key,d=o.getNext().key;if(!u.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const o=new ql;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=n,o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(){this.ga=new Kn($e.comparator)}track(e){const n=e.doc.key,o=this.ga.get(n);o?e.type!==0&&o.type===3?this.ga=this.ga.insert(n,e):e.type===3&&o.type!==1?this.ga=this.ga.insert(n,{type:o.type,doc:e.doc}):e.type===2&&o.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&o.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&o.type===0?this.ga=this.ga.remove(n):e.type===1&&o.type===2?this.ga=this.ga.insert(n,{type:1,doc:o.doc}):e.type===0&&o.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):lt(63341,{Rt:e,pa:o}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,o)=>{e.push(o)})),e}}class $l{constructor(e,n,o,u,d,y,v,b,_){this.query=e,this.docs=n,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=d,this.fromCache=y,this.syncStateChanged=v,this.excludesMetadataChanges=b,this.hasCachedResults=_}static fromInitialDocuments(e,n,o,u,d){const y=[];return n.forEach((v=>{y.push({type:0,doc:v})})),new $l(e,n,ql.emptySet(n),y,o,u,!0,!1,d)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,o=e.docChanges;if(n.length!==o.length)return!1;for(let u=0;u<n.length;u++)if(n[u].type!==o[u].type||!n[u].doc.isEqual(o[u].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class LN{constructor(){this.queries=ly(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,o){const u=pt(n),d=u.queries;u.queries=ly(),d.forEach(((y,v)=>{for(const b of v.Sa)b.onError(o)}))})(this,new ze(Ce.ABORTED,"Firestore shutting down"))}}function ly(){return new il((i=>nw(i)),kf)}async function Ag(i,e){const n=pt(i);let o=3;const u=e.query;let d=n.queries.get(u);d?!d.ba()&&e.Da()&&(o=2):(d=new MN,o=e.Da()?0:1);try{switch(o){case 0:d.wa=await n.onListen(u,!0);break;case 1:d.wa=await n.onListen(u,!1);break;case 2:await n.onFirstRemoteStoreListen(u)}}catch(y){const v=wg(y,`Initialization of query '${kl(e.query)}' failed`);return void e.onError(v)}n.queries.set(u,d),d.Sa.push(e),e.va(n.onlineState),d.wa&&e.Fa(d.wa)&&Tg(n)}async function bg(i,e){const n=pt(i),o=e.query;let u=3;const d=n.queries.get(o);if(d){const y=d.Sa.indexOf(e);y>=0&&(d.Sa.splice(y,1),d.Sa.length===0?u=e.Da()?0:1:!d.ba()&&e.Da()&&(u=2))}switch(u){case 0:return n.queries.delete(o),n.onUnlisten(o,!0);case 1:return n.queries.delete(o),n.onUnlisten(o,!1);case 2:return n.onLastRemoteStoreUnlisten(o);default:return}}function PN(i,e){const n=pt(i);let o=!1;for(const u of e){const d=u.query,y=n.queries.get(d);if(y){for(const v of y.Sa)v.Fa(u)&&(o=!0);y.wa=u}}o&&Tg(n)}function BN(i,e,n){const o=pt(i),u=o.queries.get(e);if(u)for(const d of u.Sa)d.onError(n);o.queries.delete(e)}function Tg(i){i.Ca.forEach((e=>{e.next()}))}var M1,cy;(cy=M1||(M1={})).Ma="default",cy.Cache="cache";class vg{constructor(e,n,o){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=o||{}}Fa(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)u.type!==3&&o.push(u);e=new $l(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const o=n!=="Offline";return(!this.options.qa||!o)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=$l.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==M1.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e){this.key=e}}class kw{constructor(e){this.key=e}}class kN{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=qt(),this.mutatedKeys=qt(),this.eu=iw(e),this.tu=new ql(this.eu)}get nu(){return this.Ya}ru(e,n){const o=n?n.iu:new oy,u=n?n.tu:this.tu;let d=n?n.mutatedKeys:this.mutatedKeys,y=u,v=!1;const b=this.query.limitType==="F"&&u.size===this.query.limit?u.last():null,_=this.query.limitType==="L"&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal(((S,I)=>{const M=u.get(S),U=Uf(this.query,I)?I:null,X=!!M&&this.mutatedKeys.has(M.key),K=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let z=!1;M&&U?M.data.isEqual(U.data)?X!==K&&(o.track({type:3,doc:U}),z=!0):this.su(M,U)||(o.track({type:2,doc:U}),z=!0,(b&&this.eu(U,b)>0||_&&this.eu(U,_)<0)&&(v=!0)):!M&&U?(o.track({type:0,doc:U}),z=!0):M&&!U&&(o.track({type:1,doc:M}),z=!0,(b||_)&&(v=!0)),z&&(U?(y=y.add(U),d=K?d.add(S):d.delete(S)):(y=y.delete(S),d=d.delete(S)))})),this.query.limit!==null)for(;y.size>this.query.limit;){const S=this.query.limitType==="F"?y.last():y.first();y=y.delete(S.key),d=d.delete(S.key),o.track({type:1,doc:S})}return{tu:y,iu:o,Cs:v,mutatedKeys:d}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,o,u){const d=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const y=e.iu.ya();y.sort(((S,I)=>(function(U,X){const K=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt(20277,{Rt:z})}};return K(U)-K(X)})(S.type,I.type)||this.eu(S.doc,I.doc))),this.ou(o),u=u??!1;const v=n&&!u?this._u():[],b=this.Xa.size===0&&this.current&&!u?1:0,_=b!==this.Za;return this.Za=b,y.length!==0||_?{snapshot:new $l(this.query,e.tu,d,y,e.mutatedKeys,b===0,_,!1,!!o&&o.resumeToken.approximateByteSize()>0),au:v}:{au:v}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new oy,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=qt(),this.tu.forEach((o=>{this.uu(o.key)&&(this.Xa=this.Xa.add(o.key))}));const n=[];return e.forEach((o=>{this.Xa.has(o)||n.push(new kw(o))})),this.Xa.forEach((o=>{e.has(o)||n.push(new Bw(o))})),n}cu(e){this.Ya=e.Qs,this.Xa=qt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return $l.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Cg="SyncEngine";class UN{constructor(e,n,o){this.query=e,this.targetId=n,this.view=o}}class VN{constructor(e){this.key=e,this.hu=!1}}class jN{constructor(e,n,o,u,d,y){this.localStore=e,this.remoteStore=n,this.eventManager=o,this.sharedClientState=u,this.currentUser=d,this.maxConcurrentLimboResolutions=y,this.Pu={},this.Tu=new il((v=>nw(v)),kf),this.Iu=new Map,this.Eu=new Set,this.du=new Kn($e.comparator),this.Au=new Map,this.Ru=new fg,this.Vu={},this.mu=new Map,this.fu=Jl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function FN(i,e,n=!0){const o=Hw(i);let u;const d=o.Tu.get(e);return d?(o.sharedClientState.addLocalQueryTarget(d.targetId),u=d.view.lu()):u=await Uw(o,e,n,!0),u}async function zN(i,e){const n=Hw(i);await Uw(n,e,!0,!1)}async function Uw(i,e,n,o){const u=await lN(i.localStore,zs(e)),d=u.targetId,y=i.sharedClientState.addLocalQueryTarget(d,n);let v;return o&&(v=await HN(i,e,d,y==="current",u.resumeToken)),i.isPrimaryClient&&n&&Rw(i.remoteStore,u),v}async function HN(i,e,n,o,u){i.pu=(I,M,U)=>(async function(K,z,oe,he){let ee=z.view.ru(oe);ee.Cs&&(ee=await ty(K.localStore,z.query,!1).then((({documents:j})=>z.view.ru(j,ee))));const ae=he&&he.targetChanges.get(z.targetId),Ve=he&&he.targetMismatches.get(z.targetId)!=null,Ne=z.view.applyChanges(ee,K.isPrimaryClient,ae,Ve);return hy(K,z.targetId,Ne.au),Ne.snapshot})(i,I,M,U);const d=await ty(i.localStore,e,!0),y=new kN(e,d.Qs),v=y.ru(d.documents),b=wu.createSynthesizedTargetChangeForCurrentChange(n,o&&i.onlineState!=="Offline",u),_=y.applyChanges(v,i.isPrimaryClient,b);hy(i,n,_.au);const S=new UN(e,n,y);return i.Tu.set(e,S),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),_.snapshot}async function GN(i,e,n){const o=pt(i),u=o.Tu.get(e),d=o.Iu.get(u.targetId);if(d.length>1)return o.Iu.set(u.targetId,d.filter((y=>!kf(y,e)))),void o.Tu.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(u.targetId),o.sharedClientState.isActiveQueryTarget(u.targetId)||await O1(o.localStore,u.targetId,!1).then((()=>{o.sharedClientState.clearQueryState(u.targetId),n&&pg(o.remoteStore,u.targetId),L1(o,u.targetId)})).catch(rc)):(L1(o,u.targetId),await O1(o.localStore,u.targetId,!0))}async function qN(i,e){const n=pt(i),o=n.Tu.get(e),u=n.Iu.get(o.targetId);n.isPrimaryClient&&u.length===1&&(n.sharedClientState.removeLocalQueryTarget(o.targetId),pg(n.remoteStore,o.targetId))}async function YN(i,e,n){const o=$N(i);try{const u=await(function(y,v){const b=pt(y),_=Mn.now(),S=v.reduce(((U,X)=>U.add(X.key)),qt());let I,M;return b.persistence.runTransaction("Locally write mutations","readwrite",(U=>{let X=Sa(),K=qt();return b.Ns.getEntries(U,S).next((z=>{X=z,X.forEach(((oe,he)=>{he.isValidDocument()||(K=K.add(oe))}))})).next((()=>b.localDocuments.getOverlayedDocuments(U,X))).next((z=>{I=z;const oe=[];for(const he of v){const ee=oI(he,I.get(he.key).overlayedDocument);ee!=null&&oe.push(new bo(he.key,ee,K_(ee.value.mapValue),Dr.exists(!0)))}return b.mutationQueue.addMutationBatch(U,_,oe,v)})).next((z=>{M=z;const oe=z.applyToLocalDocumentSet(I,K);return b.documentOverlayCache.saveOverlays(U,z.batchId,oe)}))})).then((()=>({batchId:M.batchId,changes:sw(I)})))})(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),(function(y,v,b){let _=y.Vu[y.currentUser.toKey()];_||(_=new Kn(Gt)),_=_.insert(v,b),y.Vu[y.currentUser.toKey()]=_})(o,u.batchId,n),await bu(o,u.changes),await qf(o.remoteStore)}catch(u){const d=wg(u,"Failed to persist write");n.reject(d)}}async function Vw(i,e){const n=pt(i);try{const o=await sN(n.localStore,e);e.targetChanges.forEach(((u,d)=>{const y=n.Au.get(d);y&&(hn(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1,22616),u.addedDocuments.size>0?y.hu=!0:u.modifiedDocuments.size>0?hn(y.hu,14607):u.removedDocuments.size>0&&(hn(y.hu,42227),y.hu=!1))})),await bu(n,o,e)}catch(o){await rc(o)}}function uy(i,e,n){const o=pt(i);if(o.isPrimaryClient&&n===0||!o.isPrimaryClient&&n===1){const u=[];o.Tu.forEach(((d,y)=>{const v=y.view.va(e);v.snapshot&&u.push(v.snapshot)})),(function(y,v){const b=pt(y);b.onlineState=v;let _=!1;b.queries.forEach(((S,I)=>{for(const M of I.Sa)M.va(v)&&(_=!0)})),_&&Tg(b)})(o.eventManager,e),u.length&&o.Pu.H_(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}async function XN(i,e,n){const o=pt(i);o.sharedClientState.updateQueryState(e,"rejected",n);const u=o.Au.get(e),d=u&&u.key;if(d){let y=new Kn($e.comparator);y=y.insert(d,rr.newNoDocument(d,ft.min()));const v=qt().add(d),b=new zf(ft.min(),new Map,new Kn(Gt),y,v);await Vw(o,b),o.du=o.du.remove(d),o.Au.delete(e),Sg(o)}else await O1(o.localStore,e,!1).then((()=>L1(o,e,n))).catch(rc)}async function KN(i,e){const n=pt(i),o=e.batch.batchId;try{const u=await rN(n.localStore,e);Fw(n,o,null),jw(n,o),n.sharedClientState.updateMutationState(o,"acknowledged"),await bu(n,u)}catch(u){await rc(u)}}async function WN(i,e,n){const o=pt(i);try{const u=await(function(y,v){const b=pt(y);return b.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let S;return b.mutationQueue.lookupMutationBatch(_,v).next((I=>(hn(I!==null,37113),S=I.keys(),b.mutationQueue.removeMutationBatch(_,I)))).next((()=>b.mutationQueue.performConsistencyCheck(_))).next((()=>b.documentOverlayCache.removeOverlaysForBatchId(_,S,v))).next((()=>b.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,S))).next((()=>b.localDocuments.getDocuments(_,S)))}))})(o.localStore,e);Fw(o,e,n),jw(o,e),o.sharedClientState.updateMutationState(e,"rejected",n),await bu(o,u)}catch(u){await rc(u)}}function jw(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function Fw(i,e,n){const o=pt(i);let u=o.Vu[o.currentUser.toKey()];if(u){const d=u.get(e);d&&(n?d.reject(n):d.resolve(),u=u.remove(e)),o.Vu[o.currentUser.toKey()]=u}}function L1(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.Iu.get(e))i.Tu.delete(o),n&&i.Pu.yu(o,n);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((o=>{i.Ru.containsKey(o)||zw(i,o)}))}function zw(i,e){i.Eu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(pg(i.remoteStore,n),i.du=i.du.remove(e),i.Au.delete(n),Sg(i))}function hy(i,e,n){for(const o of n)o instanceof Bw?(i.Ru.addReference(o.key,e),QN(i,o)):o instanceof kw?(He(Cg,"Document no longer in limbo: "+o.key),i.Ru.removeReference(o.key,e),i.Ru.containsKey(o.key)||zw(i,o.key)):lt(19791,{wu:o})}function QN(i,e){const n=e.key,o=n.path.canonicalString();i.du.get(n)||i.Eu.has(o)||(He(Cg,"New document in limbo: "+n),i.Eu.add(o),Sg(i))}function Sg(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new $e(Cn.fromString(e)),o=i.fu.next();i.Au.set(o,new VN(n)),i.du=i.du.insert(n,o),Rw(i.remoteStore,new ao(zs(Bf(n.path)),o,"TargetPurposeLimboResolution",Mf.ce))}}async function bu(i,e,n){const o=pt(i),u=[],d=[],y=[];o.Tu.isEmpty()||(o.Tu.forEach(((v,b)=>{y.push(o.pu(b,e,n).then((_=>{var S;if((_||n)&&o.isPrimaryClient){const I=_?!_.fromCache:(S=n==null?void 0:n.targetChanges.get(b.targetId))==null?void 0:S.current;o.sharedClientState.updateQueryState(b.targetId,I?"current":"not-current")}if(_){u.push(_);const I=gg.As(b.targetId,_);d.push(I)}})))})),await Promise.all(y),o.Pu.H_(u),await(async function(b,_){const S=pt(b);try{await S.persistence.runTransaction("notifyLocalViewChanges","readwrite",(I=>Re.forEach(_,(M=>Re.forEach(M.Es,(U=>S.persistence.referenceDelegate.addReference(I,M.targetId,U))).next((()=>Re.forEach(M.ds,(U=>S.persistence.referenceDelegate.removeReference(I,M.targetId,U)))))))))}catch(I){if(!sc(I))throw I;He(mg,"Failed to update sequence numbers: "+I)}for(const I of _){const M=I.targetId;if(!I.fromCache){const U=S.Ms.get(M),X=U.snapshotVersion,K=U.withLastLimboFreeSnapshotVersion(X);S.Ms=S.Ms.insert(M,K)}}})(o.localStore,d))}async function ZN(i,e){const n=pt(i);if(!n.currentUser.isEqual(e)){He(Cg,"User change. New user:",e.toKey());const o=await Cw(n.localStore,e);n.currentUser=e,(function(d,y){d.mu.forEach((v=>{v.forEach((b=>{b.reject(new ze(Ce.CANCELLED,y))}))})),d.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),await bu(n,o.Ls)}}function JN(i,e){const n=pt(i),o=n.Au.get(e);if(o&&o.hu)return qt().add(o.key);{let u=qt();const d=n.Iu.get(e);if(!d)return u;for(const y of d){const v=n.Tu.get(y);u=u.unionWith(v.view.nu)}return u}}function Hw(i){const e=pt(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Vw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=JN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=XN.bind(null,e),e.Pu.H_=PN.bind(null,e.eventManager),e.Pu.yu=BN.bind(null,e.eventManager),e}function $N(i){const e=pt(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=KN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=WN.bind(null,e),e}class _f{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Hf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return iN(this.persistence,new eN,e.initialUser,this.serializer)}Cu(e){return new vw(dg.mi,this.serializer)}Du(e){return new uN}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_f.provider={build:()=>new _f};class e6 extends _f{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){hn(this.persistence.referenceDelegate instanceof yf,46915);const o=this.persistence.referenceDelegate.garbageCollector;return new VI(o,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Nr.withCacheSize(this.cacheSizeBytes):Nr.DEFAULT;return new vw((o=>yf.mi(o,n)),this.serializer)}}class P1{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>uy(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=ZN.bind(null,this.syncEngine),await DN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new LN})()}createDatastore(e){const n=Hf(e.databaseInfo.databaseId),o=(function(d){return new mN(d)})(e.databaseInfo);return(function(d,y,v,b){return new EN(d,y,v,b)})(e.authCredentials,e.appCheckCredentials,o,n)}createRemoteStore(e){return(function(o,u,d,y,v){return new wN(o,u,d,y,v)})(this.localStore,this.datastore,e.asyncQueue,(n=>uy(this.syncEngine,n,0)),(function(){return ry.v()?new ry:new hN})())}createSyncEngine(e,n){return(function(u,d,y,v,b,_,S){const I=new jN(u,d,y,v,b,_);return S&&(I.gu=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(u){const d=pt(u);He(el,"RemoteStore shutting down."),d.Ea.add(5),await Au(d),d.Aa.shutdown(),d.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}P1.provider={build:()=>new P1};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ca("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo="FirestoreClient";class t6{constructor(e,n,o,u,d){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=o,this.databaseInfo=u,this.user=ir.UNAUTHENTICATED,this.clientId=ng.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=d,this.authCredentials.start(o,(async y=>{He(Eo,"Received user=",y.uid),await this.authCredentialListener(y),this.user=y})),this.appCheckCredentials.start(o,(y=>(He(Eo,"Received new app check token=",y),this.appCheckCredentialListener(y,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ba;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const o=wg(n,"Failed to shutdown persistence");e.reject(o)}})),e.promise}}async function s1(i,e){i.asyncQueue.verifyOperationInProgress(),He(Eo,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let o=n.initialUser;i.setCredentialChangeListener((async u=>{o.isEqual(u)||(await Cw(e.localStore,u),o=u)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function fy(i,e){i.asyncQueue.verifyOperationInProgress();const n=await n6(i);He(Eo,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((o=>ay(e.remoteStore,o))),i.setAppCheckTokenChangeListener(((o,u)=>ay(e.remoteStore,u))),i._onlineComponents=e}async function n6(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){He(Eo,"Using user provided OfflineComponentProvider");try{await s1(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(u){return u.name==="FirebaseError"?u.code===Ce.FAILED_PRECONDITION||u.code===Ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||u.code===22||u.code===20||u.code===11})(n))throw n;Kl("Error using user provided cache. Falling back to memory cache: "+n),await s1(i,new _f)}}else He(Eo,"Using default OfflineComponentProvider"),await s1(i,new e6(void 0));return i._offlineComponents}async function Gw(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(He(Eo,"Using user provided OnlineComponentProvider"),await fy(i,i._uninitializedComponentsProvider._online)):(He(Eo,"Using default OnlineComponentProvider"),await fy(i,new P1))),i._onlineComponents}function i6(i){return Gw(i).then((e=>e.syncEngine))}async function wf(i){const e=await Gw(i),n=e.eventManager;return n.onListen=FN.bind(null,e.syncEngine),n.onUnlisten=GN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=zN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=qN.bind(null,e.syncEngine),n}function r6(i,e,n={}){const o=new ba;return i.asyncQueue.enqueueAndForget((async()=>(function(d,y,v,b,_){const S=new Ig({next:M=>{S.Nu(),y.enqueueAndForget((()=>bg(d,I)));const U=M.docs.has(v);!U&&M.fromCache?_.reject(new ze(Ce.UNAVAILABLE,"Failed to get document because the client is offline.")):U&&M.fromCache&&b&&b.source==="server"?_.reject(new ze(Ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(M)},error:M=>_.reject(M)}),I=new vg(Bf(v.path),S,{includeMetadataChanges:!0,qa:!0});return Ag(d,I)})(await wf(i),i.asyncQueue,e,n,o))),o.promise}function s6(i,e,n={}){const o=new ba;return i.asyncQueue.enqueueAndForget((async()=>(function(d,y,v,b,_){const S=new Ig({next:M=>{S.Nu(),y.enqueueAndForget((()=>bg(d,I))),M.fromCache&&b.source==="server"?_.reject(new ze(Ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(M)},error:M=>_.reject(M)}),I=new vg(v,S,{includeMetadataChanges:!0,qa:!0});return Ag(d,I)})(await wf(i),i.asyncQueue,e,n,o))),o.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yw="firestore.googleapis.com",gy=!0;class my{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ze(Ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Yw,this.ssl=gy}else this.host=e.host,this.ssl=e.ssl??gy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Tw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<kI)throw new ze(Ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}w4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qw(e.experimentalLongPollingOptions??{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ze(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ze(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ze(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(o,u){return o.timeoutSeconds===u.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yf{constructor(e,n,o,u){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new my({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ze(Ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ze(Ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new my(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(o){if(!o)return new h4;switch(o.type){case"firstParty":return new m4(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new ze(Ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const o=dy.get(n);o&&(He("ComponentProvider","Removing Datastore"),dy.delete(n),o.terminate())})(this),Promise.resolve()}}function a6(i,e,n,o={}){var _;i=Or(i,Yf);const u=$1(e),d=i._getSettings(),y={...d,emulatorOptions:i._getEmulatorOptions()},v=`${e}:${n}`;u&&(jC(`https://${v}`),GC("Firestore",!0)),d.host!==Yw&&d.host!==v&&Kl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const b={...d,host:v,ssl:u,emulatorOptions:o};if(!of(b,y)&&(i._setSettings(b),o.mockUserToken)){let S,I;if(typeof o.mockUserToken=="string")S=o.mockUserToken,I=ir.MOCK_USER;else{S=FC(o.mockUserToken,(_=i._app)==null?void 0:_.options.projectId);const M=o.mockUserToken.sub||o.mockUserToken.user_id;if(!M)throw new ze(Ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");I=new ir(M)}i._authCredentials=new f4(new B_(S,I))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e,n,o){this.converter=n,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new sl(this.firestore,e,this._query)}}class si{constructor(e,n,o){this.converter=n,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ho(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new si(this.firestore,e,this._key)}toJSON(){return{type:si._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,o){if(yu(n,si._jsonSchema))return new si(e,o||null,new $e(Cn.fromString(n.referencePath)))}}si._jsonSchemaVersion="firestore/documentReference/1.0",si._jsonSchema={type:Ai("string",si._jsonSchemaVersion),referencePath:Ai("string")};class ho extends sl{constructor(e,n,o){super(e,n,Bf(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new si(this.firestore,null,new $e(e))}withConverter(e){return new ho(this.firestore,e,this._path)}}function Xr(i,e,...n){if(i=ds(i),k_("collection","path",e),i instanceof Yf){const o=Cn.fromString(e,...n);return Ix(o),new ho(i,null,o)}{if(!(i instanceof si||i instanceof ho))throw new ze(Ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Cn.fromString(e,...n));return Ix(o),new ho(i.firestore,null,o)}}function Tn(i,e,...n){if(i=ds(i),arguments.length===1&&(e=ng.newId()),k_("doc","path",e),i instanceof Yf){const o=Cn.fromString(e,...n);return Sx(o),new si(i,null,new $e(o))}{if(!(i instanceof si||i instanceof ho))throw new ze(Ce.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Cn.fromString(e,...n));return Sx(o),new si(i.firestore,i instanceof ho?i.converter:null,new $e(o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py="AsyncQueue";class xy{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Iw(this,"async_queue_retry"),this._c=()=>{const o=r1();o&&He(py,"Visibility state changed to "+o.visibilityState),this.M_.w_()},this.ac=e;const n=r1();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=r1();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ba;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!sc(e))throw e;He(py,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((o=>{throw this.nc=o,this.rc=!1,Ca("INTERNAL UNHANDLED ERROR: ",yy(o)),o})).then((o=>(this.rc=!1,o))))));return this.ac=n,n}enqueueAfterDelay(e,n,o){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const u=_g.createAndSchedule(this,e,n,o,(d=>this.hc(d)));return this.tc.push(u),u}uc(){this.nc&&lt(47125,{Pc:yy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,o)=>n.targetTimeMs-o.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function yy(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(i){return(function(n,o){if(typeof n!="object"||n===null)return!1;const u=n;for(const d of o)if(d in u&&typeof u[d]=="function")return!0;return!1})(i,["next","error","complete"])}class Ia extends Yf{constructor(e,n,o,u){super(e,n,o,u),this.type="firestore",this._queue=new xy,this._persistenceKey=(u==null?void 0:u.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new xy(e),this._firestoreClient=void 0,await e}}}function o6(i,e){const n=typeof i=="object"?i:e4(),o=typeof i=="string"?i:hf,u=WS(n,"firestore").getImmediate({identifier:o});if(!u._initialized){const d=UC("firestore");d&&a6(u,...d)}return u}function Tu(i){if(i._terminated)throw new ze(Ce.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||l6(i),i._firestoreClient}function l6(i){var o,u,d;const e=i._freezeSettings(),n=(function(v,b,_,S){return new D4(v,b,_,S.host,S.ssl,S.experimentalForceLongPolling,S.experimentalAutoDetectLongPolling,qw(S.experimentalLongPollingOptions),S.useFetchStreams,S.isUsingEmulator)})(i._databaseId,((o=i._app)==null?void 0:o.options.appId)||"",i._persistenceKey,e);i._componentsProvider||(u=e.localCache)!=null&&u._offlineComponentProvider&&((d=e.localCache)!=null&&d._onlineComponentProvider)&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new t6(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(v){const b=v==null?void 0:v._online.build();return{_offline:v==null?void 0:v._offline.build(b),_online:b}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e){this._byteString=e}static fromBase64String(e){try{return new us(qi.fromBase64String(e))}catch(n){throw new ze(Ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new us(qi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:us._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(yu(e,us._jsonSchema))return us.fromBase64String(e.bytes)}}us._jsonSchemaVersion="firestore/bytes/1.0",us._jsonSchema={type:Ai("string",us._jsonSchemaVersion),bytes:Ai("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ze(Ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ze(Ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ze(Ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Gt(this._lat,e._lat)||Gt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Gs._jsonSchemaVersion}}static fromJSON(e){if(yu(e,Gs._jsonSchema))return new Gs(e.latitude,e.longitude)}}Gs._jsonSchemaVersion="firestore/geoPoint/1.0",Gs._jsonSchema={type:Ai("string",Gs._jsonSchemaVersion),latitude:Ai("number"),longitude:Ai("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(o,u){if(o.length!==u.length)return!1;for(let d=0;d<o.length;++d)if(o[d]!==u[d])return!1;return!0})(this._values,e._values)}toJSON(){return{type:qs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(yu(e,qs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new qs(e.vectorValues);throw new ze(Ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}qs._jsonSchemaVersion="firestore/vectorValue/1.0",qs._jsonSchema={type:Ai("string",qs._jsonSchemaVersion),vectorValues:Ai("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c6=/^__.*__$/;class u6{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return this.fieldMask!==null?new bo(e,this.data,this.fieldMask,n,this.fieldTransforms):new _u(e,this.data,n,this.fieldTransforms)}}class Xw{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return new bo(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Kw(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt(40011,{Ac:i})}}class Rg{constructor(e,n,o,u,d,y){this.settings=e,this.databaseId=n,this.serializer=o,this.ignoreUndefinedProperties=u,d===void 0&&this.Rc(),this.fieldTransforms=d||[],this.fieldMask=y||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Rg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var u;const n=(u=this.path)==null?void 0:u.child(e),o=this.Vc({path:n,fc:!1});return o.gc(e),o}yc(e){var u;const n=(u=this.path)==null?void 0:u.child(e),o=this.Vc({path:n,fc:!1});return o.Rc(),o}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Af(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Kw(this.Ac)&&c6.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class h6{constructor(e,n,o){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=o||Hf(e)}Cc(e,n,o,u=!1){return new Rg({Ac:e,methodName:n,Dc:o,path:Gi.emptyPath(),fc:!1,bc:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xf(i){const e=i._freezeSettings(),n=Hf(i._databaseId);return new h6(i._databaseId,!!e.ignoreUndefinedProperties,n)}function Ww(i,e,n,o,u,d={}){const y=i.Cc(d.merge||d.mergeFields?2:0,e,n,u);Og("Data must be an object, but it was:",y,o);const v=Jw(o,y);let b,_;if(d.merge)b=new Yr(y.fieldMask),_=y.fieldTransforms;else if(d.mergeFields){const S=[];for(const I of d.mergeFields){const M=B1(e,I,n);if(!y.contains(M))throw new ze(Ce.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);eA(S,M)||S.push(M)}b=new Yr(S),_=y.fieldTransforms.filter((I=>b.covers(I.field)))}else b=null,_=y.fieldTransforms;return new u6(new Rr(v),b,_)}class Kf extends Ng{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Kf}}function Qw(i,e,n,o){const u=i.Cc(1,e,n);Og("Data must be an object, but it was:",u,o);const d=[],y=Rr.empty();Ao(o,((b,_)=>{const S=Dg(e,b,n);_=ds(_);const I=u.yc(S);if(_ instanceof Kf)d.push(S);else{const M=Cu(_,I);M!=null&&(d.push(S),y.set(S,M))}}));const v=new Yr(d);return new Xw(y,v,u.fieldTransforms)}function Zw(i,e,n,o,u,d){const y=i.Cc(1,e,n),v=[B1(e,o,n)],b=[u];if(d.length%2!=0)throw new ze(Ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let M=0;M<d.length;M+=2)v.push(B1(e,d[M])),b.push(d[M+1]);const _=[],S=Rr.empty();for(let M=v.length-1;M>=0;--M)if(!eA(_,v[M])){const U=v[M];let X=b[M];X=ds(X);const K=y.yc(U);if(X instanceof Kf)_.push(U);else{const z=Cu(X,K);z!=null&&(_.push(U),S.set(U,z))}}const I=new Yr(_);return new Xw(S,I,y.fieldTransforms)}function f6(i,e,n,o=!1){return Cu(n,i.Cc(o?4:3,e))}function Cu(i,e){if($w(i=ds(i)))return Og("Unsupported field value:",e,i),Jw(i,e);if(i instanceof Ng)return(function(o,u){if(!Kw(u.Ac))throw u.Sc(`${o._methodName}() can only be used with update() and set()`);if(!u.path)throw u.Sc(`${o._methodName}() is not currently supported inside arrays`);const d=o._toFieldTransform(u);d&&u.fieldTransforms.push(d)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(o,u){const d=[];let y=0;for(const v of o){let b=Cu(v,u.wc(y));b==null&&(b={nullValue:"NULL_VALUE"}),d.push(b),y++}return{arrayValue:{values:d}}})(i,e)}return(function(o,u){if((o=ds(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return tI(u.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){const d=Mn.fromDate(o);return{timestampValue:xf(u.serializer,d)}}if(o instanceof Mn){const d=new Mn(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:xf(u.serializer,d)}}if(o instanceof Gs)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof us)return{bytesValue:xw(u.serializer,o._byteString)};if(o instanceof si){const d=u.databaseId,y=o.firestore._databaseId;if(!y.isEqual(d))throw u.Sc(`Document reference is for database ${y.projectId}/${y.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:hg(o.firestore._databaseId||u.databaseId,o._key.path)}}if(o instanceof qs)return(function(y,v){return{mapValue:{fields:{[Y_]:{stringValue:X_},[ff]:{arrayValue:{values:y.toArray().map((_=>{if(typeof _!="number")throw v.Sc("VectorValues must only contain numeric values.");return lg(v.serializer,_)}))}}}}}})(o,u);throw u.Sc(`Unsupported field value: ${Df(o)}`)})(i,e)}function Jw(i,e){const n={};return j_(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ao(i,((o,u)=>{const d=Cu(u,e.mc(o));d!=null&&(n[o]=d)})),{mapValue:{fields:n}}}function $w(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Mn||i instanceof Gs||i instanceof us||i instanceof si||i instanceof Ng||i instanceof qs)}function Og(i,e,n){if(!$w(n)||!U_(n)){const o=Df(n);throw o==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+o)}}function B1(i,e,n){if((e=ds(e))instanceof vu)return e._internalPath;if(typeof e=="string")return Dg(i,e);throw Af("Field path arguments must be of type string or ",i,!1,void 0,n)}const d6=new RegExp("[~\\*/\\[\\]]");function Dg(i,e,n){if(e.search(d6)>=0)throw Af(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new vu(...e.split("."))._internalPath}catch{throw Af(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Af(i,e,n,o,u){const d=o&&!o.isEmpty(),y=u!==void 0;let v=`Function ${e}() called with invalid data`;n&&(v+=" (via `toFirestore()`)"),v+=". ";let b="";return(d||y)&&(b+=" (found",d&&(b+=` in field ${o}`),y&&(b+=` in document ${u}`),b+=")"),new ze(Ce.INVALID_ARGUMENT,v+i+b)}function eA(i,e){return i.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,n,o,u,d){this._firestore=e,this._userDataWriter=n,this._key=o,this._document=u,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new si(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new g6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(nA("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class g6 extends tA{data(){return super.data()}}function nA(i,e){return typeof e=="string"?Dg(i,e):e instanceof vu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ze(Ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Mg{}class m6 extends Mg{}function rA(i,e,...n){let o=[];e instanceof Mg&&o.push(e),o=o.concat(n),(function(d){const y=d.filter((b=>b instanceof Pg)).length,v=d.filter((b=>b instanceof Lg)).length;if(y>1||y>0&&v>0)throw new ze(Ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(o);for(const u of o)i=u._apply(i);return i}class Lg extends m6{constructor(e,n,o){super(),this._field=e,this._op=n,this._value=o,this.type="where"}static _create(e,n,o){return new Lg(e,n,o)}_apply(e){const n=this._parse(e);return sA(e._query,n),new sl(e.firestore,e.converter,v1(e._query,n))}_parse(e){const n=Xf(e.firestore);return(function(d,y,v,b,_,S,I){let M;if(_.isKeyField()){if(S==="array-contains"||S==="array-contains-any")throw new ze(Ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${S}' queries on documentId().`);if(S==="in"||S==="not-in"){wy(I,S);const X=[];for(const K of I)X.push(_y(b,d,K));M={arrayValue:{values:X}}}else M=_y(b,d,I)}else S!=="in"&&S!=="not-in"&&S!=="array-contains-any"||wy(I,S),M=f6(v,y,I,S==="in"||S==="not-in");return wi.create(_,S,M)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Pg extends Mg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Pg(e,n)}_parse(e){const n=this._queryConstraints.map((o=>o._parse(e))).filter((o=>o.getFilters().length>0));return n.length===1?n[0]:Is.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(u,d){let y=u;const v=d.getFlattenedFilters();for(const b of v)sA(y,b),y=v1(y,b)})(e._query,n),new sl(e.firestore,e.converter,v1(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function _y(i,e,n){if(typeof(n=ds(n))=="string"){if(n==="")throw new ze(Ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tw(e)&&n.indexOf("/")!==-1)throw new ze(Ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const o=e.path.child(Cn.fromString(n));if(!$e.isDocumentKey(o))throw new ze(Ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Bx(i,new $e(o))}if(n instanceof si)return Bx(i,n._key);throw new ze(Ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Df(n)}.`)}function wy(i,e){if(!Array.isArray(i)||i.length===0)throw new ze(Ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function sA(i,e){const n=(function(u,d){for(const y of u)for(const v of y.getFlattenedFilters())if(d.indexOf(v.op)>=0)return v.op;return null})(i.filters,(function(u){switch(u){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ze(Ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ze(Ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class p6{convertValue(e,n="none"){switch(xo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return hi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(po(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw lt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const o={};return Ao(e,((u,d)=>{o[u]=this.convertValue(d,n)})),o}convertVectorValue(e){var o,u,d;const n=(d=(u=(o=e.fields)==null?void 0:o[ff].arrayValue)==null?void 0:u.values)==null?void 0:d.map((y=>hi(y.doubleValue)));return new qs(n)}convertGeoPoint(e){return new Gs(hi(e.latitude),hi(e.longitude))}convertArray(e,n){return(e.values||[]).map((o=>this.convertValue(o,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const o=Pf(e);return o==null?null:this.convertValue(o,n);case"estimate":return this.convertTimestamp(uu(e));default:return null}}convertTimestamp(e){const n=mo(e);return new Mn(n.seconds,n.nanos)}convertDocumentKey(e,n){const o=Cn.fromString(e);hn(bw(o),9688,{name:e});const u=new hu(o.get(1),o.get(3)),d=new $e(o.popFirst(5));return u.isEqual(n)||Ca(`Document ${d} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(i,e,n){let o;return o=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,o}class Kc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zo extends tA{constructor(e,n,o,u,d,y){super(e,n,o,u,y),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new $h(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const o=this._document.data.field(nA("DocumentSnapshot.get",e));if(o!==null)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ze(Ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Zo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Zo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Zo._jsonSchema={type:Ai("string",Zo._jsonSchemaVersion),bundleSource:Ai("string","DocumentSnapshot"),bundleName:Ai("string"),bundle:Ai("string")};class $h extends Zo{data(e={}){return super.data(e)}}class Jo{constructor(e,n,o,u){this._firestore=e,this._userDataWriter=n,this._snapshot=u,this.metadata=new Kc(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((o=>{e.call(n,new $h(this._firestore,this._userDataWriter,o.key,o,new Kc(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ze(Ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(u,d){if(u._snapshot.oldDocs.isEmpty()){let y=0;return u._snapshot.docChanges.map((v=>{const b=new $h(u._firestore,u._userDataWriter,v.doc.key,v.doc,new Kc(u._snapshot.mutatedKeys.has(v.doc.key),u._snapshot.fromCache),u.query.converter);return v.doc,{type:"added",doc:b,oldIndex:-1,newIndex:y++}}))}{let y=u._snapshot.oldDocs;return u._snapshot.docChanges.filter((v=>d||v.type!==3)).map((v=>{const b=new $h(u._firestore,u._userDataWriter,v.doc.key,v.doc,new Kc(u._snapshot.mutatedKeys.has(v.doc.key),u._snapshot.fromCache),u.query.converter);let _=-1,S=-1;return v.type!==0&&(_=y.indexOf(v.doc.key),y=y.delete(v.doc.key)),v.type!==1&&(y=y.add(v.doc),S=y.indexOf(v.doc.key)),{type:x6(v.type),doc:b,oldIndex:_,newIndex:S}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ze(Ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Jo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ng.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],o=[],u=[];return this.docs.forEach((d=>{d._document!==null&&(n.push(d._document),o.push(this._userDataWriter.convertObjectMap(d._document.data.value.mapValue.fields,"previous")),u.push(d.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function x6(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lt(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(i){i=Or(i,si);const e=Or(i.firestore,Ia);return r6(Tu(e),i._key).then((n=>oA(e,i,n)))}Jo._jsonSchemaVersion="firestore/querySnapshot/1.0",Jo._jsonSchema={type:Ai("string",Jo._jsonSchemaVersion),bundleSource:Ai("string","QuerySnapshot"),bundleName:Ai("string"),bundle:Ai("string")};class Bg extends p6{constructor(e){super(),this.firestore=e}convertBytes(e){return new us(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new si(this.firestore,null,n)}}function Wf(i){i=Or(i,sl);const e=Or(i.firestore,Ia),n=Tu(e),o=new Bg(e);return iA(i._query),s6(n,i._query).then((u=>new Jo(e,o,i,u)))}function Xs(i,e,n){i=Or(i,si);const o=Or(i.firestore,Ia),u=aA(i.converter,e,n);return Qf(o,[Ww(Xf(o),"setDoc",i._key,u,i.converter!==null,n).toMutation(i._key,Dr.none())])}function _o(i,e,n,...o){i=Or(i,si);const u=Or(i.firestore,Ia),d=Xf(u);let y;return y=typeof(e=ds(e))=="string"||e instanceof vu?Zw(d,"updateDoc",i._key,e,n,o):Qw(d,"updateDoc",i._key,e),Qf(u,[y.toMutation(i._key,Dr.exists(!0))])}function Su(i){return Qf(Or(i.firestore,Ia),[new Ff(i._key,Dr.none())])}function Ra(i,...e){var b,_,S;i=ds(i);let n={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Ey(e[o])||(n=e[o++]);const u={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Ey(e[o])){const I=e[o];e[o]=(b=I.next)==null?void 0:b.bind(I),e[o+1]=(_=I.error)==null?void 0:_.bind(I),e[o+2]=(S=I.complete)==null?void 0:S.bind(I)}let d,y,v;if(i instanceof si)y=Or(i.firestore,Ia),v=Bf(i._key.path),d={next:I=>{e[o]&&e[o](oA(y,i,I))},error:e[o+1],complete:e[o+2]};else{const I=Or(i,sl);y=Or(I.firestore,Ia),v=I._query;const M=new Bg(y);d={next:U=>{e[o]&&e[o](new Jo(y,M,I,U))},error:e[o+1],complete:e[o+2]},iA(i._query)}return(function(M,U,X,K){const z=new Ig(K),oe=new vg(U,z,X);return M.asyncQueue.enqueueAndForget((async()=>Ag(await wf(M),oe))),()=>{z.Nu(),M.asyncQueue.enqueueAndForget((async()=>bg(await wf(M),oe)))}})(Tu(y),v,u,d)}function Qf(i,e){return(function(o,u){const d=new ba;return o.asyncQueue.enqueueAndForget((async()=>YN(await i6(o),u,d))),d.promise})(Tu(i),e)}function oA(i,e,n){const o=n.docs.get(e._key),u=new Bg(i);return new Zo(i,u,e._key,o,new Kc(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Xf(e)}set(e,n,o){this._verifyNotCommitted();const u=a1(e,this._firestore),d=aA(u.converter,n,o),y=Ww(this._dataReader,"WriteBatch.set",u._key,d,u.converter!==null,o);return this._mutations.push(y.toMutation(u._key,Dr.none())),this}update(e,n,o,...u){this._verifyNotCommitted();const d=a1(e,this._firestore);let y;return y=typeof(n=ds(n))=="string"||n instanceof vu?Zw(this._dataReader,"WriteBatch.update",d._key,n,o,u):Qw(this._dataReader,"WriteBatch.update",d._key,n),this._mutations.push(y.toMutation(d._key,Dr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=a1(e,this._firestore);return this._mutations=this._mutations.concat(new Ff(n._key,Dr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ze(Ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function a1(i,e){if((i=ds(i)).firestore!==e)throw new ze(Ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zf(i){return Tu(i=Or(i,Ia)),new y6(i,(e=>Qf(i,e)))}(function(e,n=!0){(function(u){ic=u})($S),cf(new ou("firestore",((o,{instanceIdentifier:u,options:d})=>{const y=o.getProvider("app").getImmediate(),v=new Ia(new d4(o.getProvider("auth-internal")),new p4(y,o.getProvider("app-check-internal")),(function(_,S){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new ze(Ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hu(_.options.projectId,S)})(y,u),y);return d={useFetchStreams:n,...d},v._setSettings(d),v}),"PUBLIC").setMultipleInstances(!0)),Gl(bx,Tx,e),Gl(bx,Tx,"esm2020")})();var E6="firebase",_6="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gl(E6,_6,"app");const w6={apiKey:"AIzaSyDYZ6VUaaDmy-AvS4D9cM3zkN0Vg4lStuk",authDomain:"workshop-36cbe.firebaseapp.com",projectId:"workshop-36cbe",storageBucket:"workshop-36cbe.firebasestorage.app",messagingSenderId:"742601440632",appId:"1:742601440632:web:48e380f7e1441494ba9c8d"},A6=C_(w6),xt=o6(A6);var hs=(i=>(i.STUDENT="STUDENT",i.ADMIN="ADMIN",i.GUEST="GUEST",i))(hs||{});const b6=[{id:"p1",name:"",category:"food",price:150,description:"",imageUrl:"https://images.unsplash.com/photo-1558961363-fa8fdf82db35?q=80&w=400&h=300&auto=format&fit=crop",stock:12},{id:"p2",name:"",category:"food",price:80,description:"",imageUrl:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTd073NRJm_EnCeDAQmJCtozQj3hVaKtDXggA&s",stock:45},{id:"p3",name:"",category:"electronic",price:12e3,description:"",imageUrl:"https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?q=80&w=400&h=300&auto=format&fit=crop",stock:1},{id:"p4",name:"",category:"ticket",price:320,description:"",imageUrl:"https://images.unsplash.com/photo-1489599849927-2ee91cede3ba?q=80&w=400&h=300&auto=format&fit=crop",stock:8},{id:"p5",name:"",category:"food",price:800,description:"",imageUrl:"https://images.unsplash.com/photo-1544739313-6fad02872377?q=80&w=400&h=300&auto=format&fit=crop",stock:3},{id:"p6",name:"",category:"electronic",price:2500,description:"",imageUrl:"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?q=80&w=400&h=300&auto=format&fit=crop",stock:5}],fo=[{name:"",threshold:0,color:"bg-slate-400",icon:""},{name:"",threshold:500,color:"bg-blue-400",icon:""},{name:"",threshold:2e3,color:"bg-green-500",icon:""},{name:"",threshold:5e3,color:"bg-purple-500",icon:""},{name:"",threshold:1e4,color:"bg-orange-500",icon:""},{name:"",threshold:25e3,color:"bg-yellow-500",icon:""}],kg={USER:"workshop_user"},lA=["","","","","","","",""],It={STUDENTS:"students",MISSIONS:"missions",PRODUCTS:"products",WISHES:"wishes",REDEMPTIONS:"redemptions",CHALLENGE_HISTORY:"challengeHistory",POINT_REASONS:"pointReasons",MISSION_SUBMISSIONS:"missionSubmissions",PRODUCT_CATEGORIES:"productCategories",BANNERS:"banners"},cA=[{id:"user_zhou",name:"",points:1200,totalEarned:2500,role:hs.STUDENT,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Zhou",password:"123",grade:"",isApproved:!0},{id:"user_hu",name:"",points:800,totalEarned:1800,role:hs.STUDENT,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Hu",password:"123",grade:"",isApproved:!0},{id:"user_lin",name:"",points:2100,totalEarned:4200,role:hs.STUDENT,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Lin",password:"123",grade:"",isApproved:!0}],Ay={id:"user_admin",name:"",points:0,totalEarned:0,role:hs.ADMIN,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Admin",isApproved:!0},by={id:"user_guest",name:"",points:0,totalEarned:0,role:hs.GUEST,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Guest",isApproved:!0},uA=async()=>{try{const i=await Wf(Xr(xt,It.STUDENTS));return i.empty?(await T6(),cA):i.docs.map(e=>({...e.data(),id:e.id}))}catch(i){return console.error("Error fetching students:",i),[]}},T6=async()=>{const i=Zf(xt);cA.forEach(e=>{const n=Tn(xt,It.STUDENTS,e.id);i.set(n,e)}),await i.commit()},Ug=async i=>{try{await Xs(Tn(xt,It.STUDENTS,i.id),i)}catch(e){console.error("Error saving student:",e),console.error("")}},v6=async i=>{const e=Zf(xt);i.forEach(n=>{const o=Tn(xt,It.STUDENTS,n.id);e.set(o,n)}),await e.commit()},C6=async(i,e,n)=>{try{if((await uA()).some(d=>d.name===i))return!1;const u={id:`user_${Date.now()}`,name:i,password:e,grade:n,points:0,totalEarned:0,role:hs.STUDENT,avatar:`https://api.dicebear.com/7.x/avataaars/svg?seed=${i}&mouth=smile`,isApproved:!1};return await Ug(u),!0}catch(o){return console.error("Error registering student:",o),!1}},S6=async i=>{try{const e=Tn(xt,It.STUDENTS,i);await _o(e,{isApproved:!0})}catch(e){console.error("Error approving student:",e)}},I6=async i=>{try{await Su(Tn(xt,It.STUDENTS,i))}catch(e){console.error("Error deleting student:",e)}},Ty=()=>{const i=localStorage.getItem(kg.USER);return i?JSON.parse(i):null},Yl=async i=>{localStorage.setItem(kg.USER,JSON.stringify(i)),i.role===hs.STUDENT&&await Ug(i)},N6=()=>{localStorage.removeItem(kg.USER)},R6=async i=>{try{await Xs(Tn(xt,It.REDEMPTIONS,i.id),i)}catch(e){console.error("Error adding redemption:",e)}},O6=async(i,e)=>{try{const n=Tn(xt,It.REDEMPTIONS,i);await _o(n,{status:e})}catch(n){console.error("Error updating redemption status:",n)}},D6=async i=>{try{const e=`cat_${Date.now()}`;await Xs(Tn(xt,It.PRODUCT_CATEGORIES,e),{id:e,name:i})}catch(e){console.error("Error adding category:",e)}},M6=async i=>{try{await Su(Tn(xt,It.PRODUCT_CATEGORIES,i))}catch(e){console.error("Error deleting category:",e)}},hA=i=>Ra(Xr(xt,It.PRODUCT_CATEGORIES),e=>{const n=e.docs.map(o=>({...o.data(),id:o.id}));i(n)}),L6=[{id:"m1",title:"",description:"",points:100,type:"normal",isActive:!0,maxAttempts:1},{id:"m2",title:" 80 ",description:"",points:300,type:"challenge",isActive:!0,maxAttempts:1},{id:"m3",title:" 90 ",description:"",points:1e3,type:"hard",isActive:!0,maxAttempts:1}],P6=async()=>{const i=Zf(xt);L6.forEach(e=>{const n=Tn(xt,It.MISSIONS,e.id);i.set(n,e)}),await i.commit()},B6=async i=>{try{await Xs(Tn(xt,It.MISSIONS,i.id),i)}catch(e){console.error("Error adding mission:",e)}},k6=async i=>{try{const e=Tn(xt,It.MISSIONS,i),n=await bf(e);if(n.exists()){const o=n.data();await _o(e,{isActive:!o.isActive})}}catch(e){console.error("Error toggling mission:",e)}},U6=async()=>{try{return(await Wf(Xr(xt,It.CHALLENGE_HISTORY))).docs.map(e=>({...e.data(),id:e.id}))}catch(i){return console.error("Error fetching challenge history:",i),[]}},V6=async i=>{try{const e=`${i.userId}_${i.missionId}_${Date.now()}`;await Xs(Tn(xt,It.CHALLENGE_HISTORY,e),i)}catch(e){console.error("Error adding challenge history:",e)}},fA=async(i,e)=>{try{const n=await U6(),o=new Date;return o.setHours(0,0,0,0),n.some(u=>u.userId===i&&u.missionId===e&&u.timestamp>=o.getTime())}catch(n){return console.error("Error checking mission completion:",n),!1}},j6=async i=>{try{if(await fA(i.userId,i.missionId)){console.warn("Mission already completed today");return}const n=new Date;if(n.setHours(0,0,0,0),(await Wf(rA(Xr(xt,It.MISSION_SUBMISSIONS)))).docs.find(d=>{const y=d.data();return y.userId===i.userId&&y.missionId===i.missionId&&y.status==="pending"&&y.timestamp>=n.getTime()})){console.warn("Mission submission already pending today");return}await Xs(Tn(xt,It.MISSION_SUBMISSIONS,i.id),i)}catch(e){console.error("Error submitting mission:",e)}},F6=async i=>{try{const e=Tn(xt,It.MISSION_SUBMISSIONS,i),n=await bf(e);if(n.exists()){const o=n.data();await _o(e,{status:"approved"}),await V6({id:`h_${Date.now()}`,userId:o.userId,missionId:o.missionId,timestamp:Date.now()});const u=Tn(xt,It.STUDENTS,o.userId),d=await bf(u);if(d.exists()){const y=d.data();await _o(u,{points:y.points+o.points,totalEarned:y.totalEarned+o.points})}}}catch(e){console.error("Error approving mission:",e)}},z6=async i=>{try{const e=Tn(xt,It.MISSION_SUBMISSIONS,i);await _o(e,{status:"rejected"})}catch(e){console.error("Error rejecting mission:",e)}},dA=i=>Ra(Xr(xt,It.MISSION_SUBMISSIONS),e=>{i(e.docs.map(n=>({...n.data(),id:n.id})))}),H6=async()=>{const i=Zf(xt);b6.forEach(e=>{const n=Tn(xt,It.PRODUCTS,e.id);i.set(n,e)}),await i.commit()},G6=async i=>{try{await Xs(Tn(xt,It.PRODUCTS,i.id),i)}catch(e){console.error("Error adding product:",e)}},gA=async(i,e)=>{try{const n=Tn(xt,It.PRODUCTS,i);await _o(n,{stock:Math.max(0,e)})}catch(n){console.error("Error updating product stock:",n)}},q6=async i=>{try{await Su(Tn(xt,It.PRODUCTS,i))}catch(e){console.error("Error deleting product:",e)}},Y6=async i=>{try{await Xs(Tn(xt,It.POINT_REASONS,i.id),i)}catch(e){console.error("Error adding point reason:",e)}},X6=async i=>{try{await Su(Tn(xt,It.POINT_REASONS,i))}catch(e){console.error("Error deleting point reason:",e)}},K6=i=>Ra(Xr(xt,It.POINT_REASONS),e=>{const n=e.docs.map(o=>({...o.data(),id:o.id}));i(n)}),W6=async()=>{try{return(await Wf(Xr(xt,It.WISHES))).docs.map(e=>({...e.data(),id:e.id}))}catch(i){return console.error("Error fetching wishes:",i),[]}},Q6=async i=>{try{if((await W6()).find(o=>o.userId===i.userId)){console.error("");return}await Xs(Tn(xt,It.WISHES,i.id),i)}catch(e){console.error("Error adding wish:",e),console.error(" Firestore  (Test Mode)")}},Z6=async(i,e)=>{try{const n=Tn(xt,It.WISHES,i),o=await bf(n);if(o.exists()){const d=o.data().likedBy||[];if(d.includes(e)){console.error("");return}await _o(n,{likedBy:[...d,e]})}}catch(n){console.error("Error liking wish:",n)}},J6=i=>Ra(Xr(xt,It.STUDENTS),e=>{const n=e.docs.map(o=>({...o.data(),id:o.id}));i(n)},e=>{console.error("Error in subscribeToStudents:",e)}),mA=i=>Ra(Xr(xt,It.MISSIONS),e=>{e.empty&&P6().catch(console.error);const n=e.docs.map(o=>({...o.data(),id:o.id}));i(n)},e=>console.error("Error subscribing to missions:",e)),pA=i=>Ra(Xr(xt,It.PRODUCTS),e=>{e.empty&&H6().catch(console.error);const n=e.docs.map(o=>({...o.data(),id:o.id}));i(n)},e=>{console.error("Error subscribing to products:",e),console.error("")}),xA=i=>Ra(Xr(xt,It.WISHES),e=>{const n=e.docs.map(o=>({...o.data(),id:o.id}));i(n)},e=>console.error("Error subscribing to wishes:",e)),yA=i=>Ra(Xr(xt,It.REDEMPTIONS),e=>{const n=e.docs.map(o=>{const u=o.data();return{id:o.id,status:"pending",pointsSpent:0,productName:"",timestamp:Date.now(),userId:"unknown",qrCodeData:"",...u}});i(n)},e=>{console.error("Error subscribing to redemptions:",e)}),$6=async i=>{try{const e={id:`banner_${Date.now()}`,imageUrl:i,active:!0,timestamp:Date.now()};await Xs(Tn(xt,It.BANNERS,e.id),e)}catch(e){throw console.error("Error adding banner:",e),e}},e8=async i=>{try{await Su(Tn(xt,It.BANNERS,i))}catch(e){throw console.error("Error deleting banner:",e),e}},EA=i=>{const e=rA(Xr(xt,It.BANNERS));return Ra(e,n=>{const o=n.docs.map(u=>u.data());o.sort((u,d)=>d.timestamp-u.timestamp),i(o)},n=>{console.error("Error subscribing to banners:",n)})},t8=({user:i,onUserUpdate:e})=>{const{showAlert:n}=tc(),[o,u]=se.useState(!1),d=v=>{var S;const b=(S=v.target.files)==null?void 0:S[0];if(!b)return;if(b.size>100*1024){n(" 100KB ","error");return}if(!b.type.startsWith("image/")){n(" JPG  PNG ","error");return}u(!0);const _=new FileReader;_.onloadend=async()=>{try{const I=_.result,M={...i,avatar:I};await Yl(M),e(),n("","success")}catch(I){console.error("Error updating avatar:",I),n("","error")}finally{u(!1)}},_.readAsDataURL(b)},y=async()=>{if(confirm(""))try{const v=`https://api.dicebear.com/7.x/avataaars/svg?seed=${i.name}&mouth=smile`,b={...i,avatar:v};await Yl(b),e(),n("","success")}catch(v){console.error("Error resetting avatar:",v),n("","error")}};return T.jsxs("div",{className:"space-y-8 pb-20 animate-in fade-in duration-500",children:[T.jsxs("header",{children:[T.jsxs("h1",{className:"text-3xl font-black text-slate-800 flex items-center gap-3",children:[T.jsx(sf,{className:"text-indigo-500"}),""]}),T.jsx("p",{className:"text-slate-500 mt-1 font-medium",children:""})]}),T.jsx("div",{className:"bg-white rounded-[2.5rem] p-8 border border-slate-100 shadow-xl shadow-slate-200/50",children:T.jsxs("div",{className:"flex flex-col items-center gap-6",children:[T.jsxs("div",{className:"relative group",children:[T.jsx("div",{className:"absolute inset-0 bg-indigo-500 rounded-full blur-xl opacity-20 group-hover:opacity-40 transition-opacity"}),T.jsx("img",{src:i.avatar,alt:i.name,className:"w-40 h-40 rounded-full border-4 border-white shadow-2xl object-cover relative z-10"}),T.jsxs("label",{className:"absolute bottom-0 right-0 z-20 cursor-pointer",children:[T.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:d,disabled:o}),T.jsx("div",{className:"bg-slate-800 text-white p-3 rounded-2xl hover:bg-slate-700 transition-colors shadow-lg hover:scale-105 active:scale-95",children:T.jsx(h1,{size:20})})]})]}),T.jsxs("div",{className:"text-center",children:[T.jsx("h2",{className:"text-2xl font-black text-slate-800",children:i.name}),T.jsxs("div",{className:"flex items-center justify-center gap-2 mt-1",children:[T.jsx("span",{className:"text-slate-400 font-bold text-sm uppercase tracking-wider",children:i.role==="ADMIN"?"":""}),T.jsxs("span",{className:"px-2 py-0.5 rounded-lg bg-indigo-100 text-indigo-700 text-xs font-black",children:["Lv.",Math.floor(i.totalEarned/500)+1]})]})]}),T.jsxs("div",{className:"w-full max-w-sm space-y-4 pt-6 mt-6 border-t border-slate-50",children:[T.jsxs("label",{className:"block w-full cursor-pointer",children:[T.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:d,disabled:o}),T.jsxs("div",{className:"w-full bg-indigo-50 hover:bg-indigo-100 text-indigo-600 font-bold py-4 rounded-2xl transition-all flex items-center justify-center gap-2 border-2 border-transparent hover:border-indigo-200",children:[T.jsx(yC,{size:20}),o?"...":""]})]}),T.jsxs("button",{onClick:y,className:"w-full bg-slate-50 hover:bg-slate-100 text-slate-500 font-bold py-4 rounded-2xl transition-all flex items-center justify-center gap-2",children:[T.jsx(Xv,{size:20}),""]})]}),T.jsx("div",{className:"bg-amber-50 rounded-2xl p-4 text-xs font-bold text-amber-600/80 leading-relaxed text-center max-w-sm",children:"  100KB "})]})})]})};var n8={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var vy;(function(i){i.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",i.OUTCOME_OK="OUTCOME_OK",i.OUTCOME_FAILED="OUTCOME_FAILED",i.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(vy||(vy={}));var Cy;(function(i){i.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",i.PYTHON="PYTHON"})(Cy||(Cy={}));var Sy;(function(i){i.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",i.SILENT="SILENT",i.WHEN_IDLE="WHEN_IDLE",i.INTERRUPT="INTERRUPT"})(Sy||(Sy={}));var Iy;(function(i){i.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",i.STRING="STRING",i.NUMBER="NUMBER",i.INTEGER="INTEGER",i.BOOLEAN="BOOLEAN",i.ARRAY="ARRAY",i.OBJECT="OBJECT",i.NULL="NULL"})(Iy||(Iy={}));var Ny;(function(i){i.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",i.SIMPLE_SEARCH="SIMPLE_SEARCH",i.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Ny||(Ny={}));var Ry;(function(i){i.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",i.NO_AUTH="NO_AUTH",i.API_KEY_AUTH="API_KEY_AUTH",i.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",i.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",i.OAUTH="OAUTH",i.OIDC_AUTH="OIDC_AUTH"})(Ry||(Ry={}));var Oy;(function(i){i.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",i.HTTP_IN_QUERY="HTTP_IN_QUERY",i.HTTP_IN_HEADER="HTTP_IN_HEADER",i.HTTP_IN_PATH="HTTP_IN_PATH",i.HTTP_IN_BODY="HTTP_IN_BODY",i.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Oy||(Oy={}));var Dy;(function(i){i.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",i.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",i.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",i.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Dy||(Dy={}));var My;(function(i){i.UNSPECIFIED="UNSPECIFIED",i.BLOCKING="BLOCKING",i.NON_BLOCKING="NON_BLOCKING"})(My||(My={}));var Ly;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(Ly||(Ly={}));var Py;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE",i.VALIDATED="VALIDATED"})(Py||(Py={}));var By;(function(i){i.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH",i.MINIMAL="MINIMAL"})(By||(By={}));var ky;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",i.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",i.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",i.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",i.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(ky||(ky={}));var Uy;(function(i){i.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",i.SEVERITY="SEVERITY",i.PROBABILITY="PROBABILITY"})(Uy||(Uy={}));var Vy;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE",i.OFF="OFF"})(Vy||(Vy={}));var jy;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.IMAGE_SAFETY="IMAGE_SAFETY",i.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",i.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",i.NO_IMAGE="NO_IMAGE",i.IMAGE_RECITATION="IMAGE_RECITATION",i.IMAGE_OTHER="IMAGE_OTHER"})(jy||(jy={}));var Fy;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(Fy||(Fy={}));var zy;(function(i){i.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",i.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",i.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",i.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",i.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(zy||(zy={}));var Hy;(function(i){i.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",i.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",i.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",i.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",i.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Hy||(Hy={}));var Gy;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.IMAGE_SAFETY="IMAGE_SAFETY",i.MODEL_ARMOR="MODEL_ARMOR",i.JAILBREAK="JAILBREAK"})(Gy||(Gy={}));var qy;(function(i){i.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",i.ON_DEMAND="ON_DEMAND",i.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(qy||(qy={}));var Yy;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.AUDIO="AUDIO"})(Yy||(Yy={}));var Xy;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Xy||(Xy={}));var Ky;(function(i){i.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",i.TUNING_MODE_FULL="TUNING_MODE_FULL",i.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Ky||(Ky={}));var Wy;(function(i){i.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",i.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",i.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",i.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",i.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",i.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",i.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Wy||(Wy={}));var Qy;(function(i){i.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",i.JOB_STATE_QUEUED="JOB_STATE_QUEUED",i.JOB_STATE_PENDING="JOB_STATE_PENDING",i.JOB_STATE_RUNNING="JOB_STATE_RUNNING",i.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",i.JOB_STATE_FAILED="JOB_STATE_FAILED",i.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",i.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",i.JOB_STATE_PAUSED="JOB_STATE_PAUSED",i.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",i.JOB_STATE_UPDATING="JOB_STATE_UPDATING",i.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Qy||(Qy={}));var Zy;(function(i){i.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",i.TUNING_TASK_I2V="TUNING_TASK_I2V",i.TUNING_TASK_T2V="TUNING_TASK_T2V",i.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Zy||(Zy={}));var Jy;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",i.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Jy||(Jy={}));var $y;(function(i){i.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",i.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",i.BALANCED="BALANCED",i.PRIORITIZE_COST="PRIORITIZE_COST"})($y||($y={}));var eE;(function(i){i.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",i.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(eE||(eE={}));var tE;(function(i){i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(tE||(tE={}));var nE;(function(i){i.DONT_ALLOW="DONT_ALLOW",i.ALLOW_ADULT="ALLOW_ADULT",i.ALLOW_ALL="ALLOW_ALL"})(nE||(nE={}));var iE;(function(i){i.auto="auto",i.en="en",i.ja="ja",i.ko="ko",i.hi="hi",i.zh="zh",i.pt="pt",i.es="es"})(iE||(iE={}));var rE;(function(i){i.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",i.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",i.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",i.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",i.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(rE||(rE={}));var sE;(function(i){i.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",i.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",i.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",i.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(sE||(sE={}));var aE;(function(i){i.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",i.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",i.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",i.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(aE||(aE={}));var oE;(function(i){i.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",i.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",i.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",i.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",i.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",i.EDIT_MODE_STYLE="EDIT_MODE_STYLE",i.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",i.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(oE||(oE={}));var lE;(function(i){i.FOREGROUND="FOREGROUND",i.BACKGROUND="BACKGROUND",i.PROMPT="PROMPT",i.SEMANTIC="SEMANTIC",i.INTERACTIVE="INTERACTIVE"})(lE||(lE={}));var cE;(function(i){i.ASSET="ASSET",i.STYLE="STYLE"})(cE||(cE={}));var uE;(function(i){i.INSERT="INSERT",i.REMOVE="REMOVE",i.REMOVE_STATIC="REMOVE_STATIC",i.OUTPAINT="OUTPAINT"})(uE||(uE={}));var hE;(function(i){i.OPTIMIZED="OPTIMIZED",i.LOSSLESS="LOSSLESS"})(hE||(hE={}));var fE;(function(i){i.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",i.PREFERENCE_TUNING="PREFERENCE_TUNING"})(fE||(fE={}));var dE;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.STATE_PENDING="STATE_PENDING",i.STATE_ACTIVE="STATE_ACTIVE",i.STATE_FAILED="STATE_FAILED"})(dE||(dE={}));var gE;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.PROCESSING="PROCESSING",i.ACTIVE="ACTIVE",i.FAILED="FAILED"})(gE||(gE={}));var mE;(function(i){i.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",i.UPLOADED="UPLOADED",i.GENERATED="GENERATED",i.REGISTERED="REGISTERED"})(mE||(mE={}));var pE;(function(i){i.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.RESPONSE_REJECTED="RESPONSE_REJECTED",i.NEED_MORE_INPUT="NEED_MORE_INPUT"})(pE||(pE={}));var xE;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.VIDEO="VIDEO",i.AUDIO="AUDIO",i.DOCUMENT="DOCUMENT"})(xE||(xE={}));var yE;(function(i){i.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",i.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",i.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(yE||(yE={}));var EE;(function(i){i.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",i.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",i.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(EE||(EE={}));var _E;(function(i){i.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",i.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",i.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(_E||(_E={}));var wE;(function(i){i.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",i.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",i.NO_INTERRUPTION="NO_INTERRUPTION"})(wE||(wE={}));var AE;(function(i){i.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",i.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",i.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(AE||(AE={}));var bE;(function(i){i.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",i.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",i.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",i.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",i.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",i.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",i.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",i.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",i.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",i.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",i.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",i.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",i.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(bE||(bE={}));var TE;(function(i){i.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",i.QUALITY="QUALITY",i.DIVERSITY="DIVERSITY",i.VOCALIZATION="VOCALIZATION"})(TE||(TE={}));var vE;(function(i){i.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",i.PLAY="PLAY",i.PAUSE="PAUSE",i.STOP="STOP",i.RESET_CONTEXT="RESET_CONTEXT"})(vE||(vE={}));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var CE;(function(i){i.PAGED_ITEM_BATCH_JOBS="batchJobs",i.PAGED_ITEM_MODELS="models",i.PAGED_ITEM_TUNING_JOBS="tuningJobs",i.PAGED_ITEM_FILES="files",i.PAGED_ITEM_CACHED_CONTENTS="cachedContents",i.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",i.PAGED_ITEM_DOCUMENTS="documents"})(CE||(CE={}));function Tf(i,e){var n={};for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&e.indexOf(o)<0&&(n[o]=i[o]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(i);u<o.length;u++)e.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(i,o[u])&&(n[o[u]]=i[o[u]]);return n}function SE(i){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&i[e],o=0;if(n)return n.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&o>=i.length&&(i=void 0),{value:i&&i[o++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Yn(i){return this instanceof Yn?(this.v=i,this):new Yn(i)}function iu(i,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(i,e||[]),u,d=[];return u=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),v("next"),v("throw"),v("return",y),u[Symbol.asyncIterator]=function(){return this},u;function y(U){return function(X){return Promise.resolve(X).then(U,I)}}function v(U,X){o[U]&&(u[U]=function(K){return new Promise(function(z,oe){d.push([U,K,z,oe])>1||b(U,K)})},X&&(u[U]=X(u[U])))}function b(U,X){try{_(o[U](X))}catch(K){M(d[0][3],K)}}function _(U){U.value instanceof Yn?Promise.resolve(U.value.v).then(S,I):M(d[0][2],U)}function S(U){b("next",U)}function I(U){b("throw",U)}function M(U,X){U(X),d.shift(),d.length&&b(d[0][0],d[0][1])}}function Xl(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],n;return e?e.call(i):(i=typeof SE=="function"?SE(i):i[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(d){n[d]=i[d]&&function(y){return new Promise(function(v,b){y=i[d](y),u(v,b,y.done,y.value)})}}function u(d,y,v,b){Promise.resolve(b).then(function(_){d({value:_,done:v})},y)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let _A=function(){const{crypto:i}=globalThis;if(i!=null&&i.randomUUID)return _A=i.randomUUID.bind(i),i.randomUUID();const e=new Uint8Array(1),n=i?()=>i.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^n()&15>>+o/4).toString(16))};const i8=()=>_A();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function k1(i){return typeof i=="object"&&i!==null&&("name"in i&&i.name==="AbortError"||"message"in i&&String(i.message).includes("FetchRequestCanceledException"))}const U1=i=>{if(i instanceof Error)return i;if(typeof i=="object"&&i!==null){try{if(Object.prototype.toString.call(i)==="[object Error]"){const e=new Error(i.message,i.cause?{cause:i.cause}:{});return i.stack&&(e.stack=i.stack),i.cause&&!e.cause&&(e.cause=i.cause),i.name&&(e.name=i.name),e}}catch{}try{return new Error(JSON.stringify(i))}catch{}}return new Error(i)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gs extends Error{}class pr extends gs{constructor(e,n,o,u){super(`${pr.makeMessage(e,n,o)}`),this.status=e,this.headers=u,this.error=n}static makeMessage(e,n,o){const u=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):o;return e&&u?`${e} ${u}`:e?`${e} status code (no body)`:u||"(no status code or body)"}static generate(e,n,o,u){if(!e||!u)return new Jf({message:o,cause:U1(n)});const d=n;return e===400?new AA(e,d,o,u):e===401?new bA(e,d,o,u):e===403?new TA(e,d,o,u):e===404?new vA(e,d,o,u):e===409?new CA(e,d,o,u):e===422?new SA(e,d,o,u):e===429?new IA(e,d,o,u):e>=500?new NA(e,d,o,u):new pr(e,d,o,u)}}class V1 extends pr{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Jf extends pr{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class wA extends Jf{constructor({message:e}={}){super({message:e??"Request timed out."})}}class AA extends pr{}class bA extends pr{}class TA extends pr{}class vA extends pr{}class CA extends pr{}class SA extends pr{}class IA extends pr{}class NA extends pr{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const r8=/^[a-z][a-z0-9+.-]*:/i,s8=i=>r8.test(i);let j1=i=>(j1=Array.isArray,j1(i));const a8=j1;let o8=a8;const IE=o8;function l8(i){if(!i)return!0;for(const e in i)return!1;return!0}function c8(i,e){return Object.prototype.hasOwnProperty.call(i,e)}const u8=(i,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new gs(`${i} must be an integer`);if(e<0)throw new gs(`${i} must be a positive integer`);return e},h8=i=>{try{return JSON.parse(i)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const f8=i=>new Promise(e=>setTimeout(e,i));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jl="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function d8(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const g8=()=>{var i,e,n,o,u;const d=d8();if(d==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jl,"X-Stainless-OS":RE(Deno.build.os),"X-Stainless-Arch":NE(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(i=Deno.version)===null||i===void 0?void 0:i.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(d==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jl,"X-Stainless-OS":RE((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":NE((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(u=globalThis.process.version)!==null&&u!==void 0?u:"unknown"};const y=m8();return y?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${y.browser}`,"X-Stainless-Runtime-Version":y.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function m8(){if(typeof navigator>"u"||!navigator)return null;const i=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of i){const o=n.exec(navigator.userAgent);if(o){const u=o[1]||0,d=o[2]||0,y=o[3]||0;return{browser:e,version:`${u}.${d}.${y}`}}}return null}const NE=i=>i==="x32"?"x32":i==="x86_64"||i==="x64"?"x64":i==="arm"?"arm":i==="aarch64"||i==="arm64"?"arm64":i?`other:${i}`:"unknown",RE=i=>(i=i.toLowerCase(),i.includes("ios")?"iOS":i==="android"?"Android":i==="darwin"?"MacOS":i==="win32"?"Windows":i==="freebsd"?"FreeBSD":i==="openbsd"?"OpenBSD":i==="linux"?"Linux":i?`Other:${i}`:"Unknown");let jh;const p8=()=>jh??(jh=g8());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function x8(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function RA(...i){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...i)}function y8(i){let e=Symbol.asyncIterator in i?i[Symbol.asyncIterator]():i[Symbol.iterator]();return RA({start(){},async pull(n){const{done:o,value:u}=await e.next();o?n.close():n.enqueue(u)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function OA(i){if(i[Symbol.asyncIterator])return i;const e=i.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function E8(i){var e,n;if(i===null||typeof i!="object")return;if(i[Symbol.asyncIterator]){await((n=(e=i[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const o=i.getReader(),u=o.cancel();o.releaseLock(),await u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _8=({headers:i,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const DA=()=>{var i;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((i=e==null?void 0:e.versions)===null||i===void 0?void 0:i.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function o1(i,e,n){return DA(),new File(i,e??"unknown_file",n)}function w8(i){return(typeof i=="object"&&i!==null&&("name"in i&&i.name&&String(i.name)||"url"in i&&i.url&&String(i.url)||"filename"in i&&i.filename&&String(i.filename)||"path"in i&&i.path&&String(i.path))||"").split(/[\\/]/).pop()||void 0}const A8=i=>i!=null&&typeof i=="object"&&typeof i[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const MA=i=>i!=null&&typeof i=="object"&&typeof i.size=="number"&&typeof i.type=="string"&&typeof i.text=="function"&&typeof i.slice=="function"&&typeof i.arrayBuffer=="function",b8=i=>i!=null&&typeof i=="object"&&typeof i.name=="string"&&typeof i.lastModified=="number"&&MA(i),T8=i=>i!=null&&typeof i=="object"&&typeof i.url=="string"&&typeof i.blob=="function";async function v8(i,e,n){if(DA(),i=await i,b8(i))return i instanceof File?i:o1([await i.arrayBuffer()],i.name);if(T8(i)){const u=await i.blob();return e||(e=new URL(i.url).pathname.split(/[\\/]/).pop()),o1(await F1(u),e,n)}const o=await F1(i);if(e||(e=w8(i)),!(n!=null&&n.type)){const u=o.find(d=>typeof d=="object"&&"type"in d&&d.type);typeof u=="string"&&(n=Object.assign(Object.assign({},n),{type:u}))}return o1(o,e,n)}async function F1(i){var e,n,o,u,d;let y=[];if(typeof i=="string"||ArrayBuffer.isView(i)||i instanceof ArrayBuffer)y.push(i);else if(MA(i))y.push(i instanceof Blob?i:await i.arrayBuffer());else if(A8(i))try{for(var v=!0,b=Xl(i),_;_=await b.next(),e=_.done,!e;v=!0){u=_.value,v=!1;const S=u;y.push(...await F1(S))}}catch(S){n={error:S}}finally{try{!v&&!e&&(o=b.return)&&await o.call(b)}finally{if(n)throw n.error}}else{const S=(d=i==null?void 0:i.constructor)===null||d===void 0?void 0:d.name;throw new Error(`Unexpected data type: ${typeof i}${S?`; constructor: ${S}`:""}${C8(i)}`)}return y}function C8(i){return typeof i!="object"||i===null?"":`; props: [${Object.getOwnPropertyNames(i).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LA{constructor(e){this._client=e}}LA._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function PA(i){return i.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const OE=Object.freeze(Object.create(null)),S8=(i=PA)=>(function(n,...o){if(n.length===1)return n[0];let u=!1;const d=[],y=n.reduce((S,I,M)=>{var U,X,K;/[?#]/.test(I)&&(u=!0);const z=o[M];let oe=(u?encodeURIComponent:i)(""+z);return M!==o.length&&(z==null||typeof z=="object"&&z.toString===((K=Object.getPrototypeOf((X=Object.getPrototypeOf((U=z.hasOwnProperty)!==null&&U!==void 0?U:OE))!==null&&X!==void 0?X:OE))===null||K===void 0?void 0:K.toString))&&(oe=z+"",d.push({start:S.length+I.length,length:oe.length,error:`Value of type ${Object.prototype.toString.call(z).slice(8,-1)} is not a valid path parameter`})),S+I+(M===o.length?"":oe)},""),v=y.split(/[?#]/,1)[0],b=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let _;for(;(_=b.exec(v))!==null;)d.push({start:_.index,length:_[0].length,error:`Value "${_[0]}" can't be safely passed as a path parameter`});if(d.sort((S,I)=>S.start-I.start),d.length>0){let S=0;const I=d.reduce((M,U)=>{const X=" ".repeat(U.start-S),K="^".repeat(U.length);return S=U.start+U.length,M+X+K},"");throw new gs(`Path parameters result in path with invalid segments:
${d.map(M=>M.error).join(`
`)}
${y}
${I}`)}return y}),Fh=S8(PA);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BA extends LA{create(e,n){var o;const{api_version:u=this._client.apiVersion}=e,d=Tf(e,["api_version"]);if("model"in d&&"agent_config"in d)throw new gs("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in d&&"generation_config"in d)throw new gs("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Fh`/${u}/interactions`,Object.assign(Object.assign({body:d},n),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,n={},o){const{api_version:u=this._client.apiVersion}=n??{};return this._client.delete(Fh`/${u}/interactions/${e}`,o)}cancel(e,n={},o){const{api_version:u=this._client.apiVersion}=n??{};return this._client.post(Fh`/${u}/interactions/${e}/cancel`,o)}get(e,n={},o){var u;const d=n??{},{api_version:y=this._client.apiVersion}=d,v=Tf(d,["api_version"]);return this._client.get(Fh`/${y}/interactions/${e}`,Object.assign(Object.assign({query:v},o),{stream:(u=n==null?void 0:n.stream)!==null&&u!==void 0?u:!1}))}}BA._key=Object.freeze(["interactions"]);class kA extends BA{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function I8(i){let e=0;for(const u of i)e+=u.length;const n=new Uint8Array(e);let o=0;for(const u of i)n.set(u,o),o+=u.length;return n}let zh;function Vg(i){let e;return(zh??(e=new globalThis.TextEncoder,zh=e.encode.bind(e)))(i)}let Hh;function DE(i){let e;return(Hh??(e=new globalThis.TextDecoder,Hh=e.decode.bind(e)))(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $f{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Vg(e):e;this.buffer=I8([this.buffer,n]);const o=[];let u;for(;(u=N8(this.buffer,this.carriageReturnIndex))!=null;){if(u.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=u.index;continue}if(this.carriageReturnIndex!=null&&(u.index!==this.carriageReturnIndex+1||u.carriage)){o.push(DE(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const d=this.carriageReturnIndex!==null?u.preceding-1:u.preceding,y=DE(this.buffer.subarray(0,d));o.push(y),this.buffer=this.buffer.subarray(u.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}$f.NEWLINE_CHARS=new Set([`
`,"\r"]);$f.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function N8(i,e){for(let u=e??0;u<i.length;u++){if(i[u]===10)return{preceding:u,index:u+1,carriage:!1};if(i[u]===13)return{preceding:u,index:u+1,carriage:!0}}return null}function R8(i){for(let o=0;o<i.length-1;o++){if(i[o]===10&&i[o+1]===10||i[o]===13&&i[o+1]===13)return o+2;if(i[o]===13&&i[o+1]===10&&o+3<i.length&&i[o+2]===13&&i[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vf={off:0,error:200,warn:300,info:400,debug:500},ME=(i,e,n)=>{if(i){if(c8(vf,i))return i;mr(n).warn(`${e} was set to ${JSON.stringify(i)}, expected one of ${JSON.stringify(Object.keys(vf))}`)}};function Wc(){}function Gh(i,e,n){return!e||vf[i]>vf[n]?Wc:e[i].bind(e)}const O8={error:Wc,warn:Wc,info:Wc,debug:Wc};let LE=new WeakMap;function mr(i){var e;const n=i.logger,o=(e=i.logLevel)!==null&&e!==void 0?e:"off";if(!n)return O8;const u=LE.get(n);if(u&&u[0]===o)return u[1];const d={error:Gh("error",n,o),warn:Gh("warn",n,o),info:Gh("info",n,o),debug:Gh("debug",n,o)};return LE.set(n,[o,d]),d}const Ko=i=>(i.options&&(i.options=Object.assign({},i.options),delete i.options.headers),i.headers&&(i.headers=Object.fromEntries((i.headers instanceof Headers?[...i.headers]:Object.entries(i.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in i&&(i.retryOfRequestLogID&&(i.retryOf=i.retryOfRequestLogID),delete i.retryOfRequestLogID),i);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fl{constructor(e,n,o){this.iterator=e,this.controller=n,this.client=o}static fromSSEResponse(e,n,o){let u=!1;const d=o?mr(o):console;function y(){return iu(this,arguments,function*(){var b,_,S,I;if(u)throw new gs("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");u=!0;let M=!1;try{try{for(var U=!0,X=Xl(D8(e,n)),K;K=yield Yn(X.next()),b=K.done,!b;U=!0){I=K.value,U=!1;const z=I;if(!M)if(z.data.startsWith("[DONE]")){M=!0;continue}else try{yield yield Yn(JSON.parse(z.data))}catch(oe){throw d.error("Could not parse message into JSON:",z.data),d.error("From chunk:",z.raw),oe}}}catch(z){_={error:z}}finally{try{!U&&!b&&(S=X.return)&&(yield Yn(S.call(X)))}finally{if(_)throw _.error}}M=!0}catch(z){if(k1(z))return yield Yn(void 0);throw z}finally{M||n.abort()}})}return new Fl(y,n,o)}static fromReadableStream(e,n,o){let u=!1;function d(){return iu(this,arguments,function*(){var b,_,S,I;const M=new $f,U=OA(e);try{for(var X=!0,K=Xl(U),z;z=yield Yn(K.next()),b=z.done,!b;X=!0){I=z.value,X=!1;const oe=I;for(const he of M.decode(oe))yield yield Yn(he)}}catch(oe){_={error:oe}}finally{try{!X&&!b&&(S=K.return)&&(yield Yn(S.call(K)))}finally{if(_)throw _.error}}for(const oe of M.flush())yield yield Yn(oe)})}function y(){return iu(this,arguments,function*(){var b,_,S,I;if(u)throw new gs("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");u=!0;let M=!1;try{try{for(var U=!0,X=Xl(d()),K;K=yield Yn(X.next()),b=K.done,!b;U=!0){I=K.value,U=!1;const z=I;M||z&&(yield yield Yn(JSON.parse(z)))}}catch(z){_={error:z}}finally{try{!U&&!b&&(S=X.return)&&(yield Yn(S.call(X)))}finally{if(_)throw _.error}}M=!0}catch(z){if(k1(z))return yield Yn(void 0);throw z}finally{M||n.abort()}})}return new Fl(y,n,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],o=this.iterator(),u=d=>({next:()=>{if(d.length===0){const y=o.next();e.push(y),n.push(y)}return d.shift()}});return[new Fl(()=>u(e),this.controller,this.client),new Fl(()=>u(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return RA({async start(){n=e[Symbol.asyncIterator]()},async pull(o){try{const{value:u,done:d}=await n.next();if(d)return o.close();const y=Vg(JSON.stringify(u)+`
`);o.enqueue(y)}catch(u){o.error(u)}},async cancel(){var o;await((o=n.return)===null||o===void 0?void 0:o.call(n))}})}}function D8(i,e){return iu(this,arguments,function*(){var o,u,d,y;if(!i.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new gs("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new gs("Attempted to iterate over a response with no body");const v=new L8,b=new $f,_=OA(i.body);try{for(var S=!0,I=Xl(M8(_)),M;M=yield Yn(I.next()),o=M.done,!o;S=!0){y=M.value,S=!1;const U=y;for(const X of b.decode(U)){const K=v.decode(X);K&&(yield yield Yn(K))}}}catch(U){u={error:U}}finally{try{!S&&!o&&(d=I.return)&&(yield Yn(d.call(I)))}finally{if(u)throw u.error}}for(const U of b.flush()){const X=v.decode(U);X&&(yield yield Yn(X))}})}function M8(i){return iu(this,arguments,function*(){var n,o,u,d;let y=new Uint8Array;try{for(var v=!0,b=Xl(i),_;_=yield Yn(b.next()),n=_.done,!n;v=!0){d=_.value,v=!1;const S=d;if(S==null)continue;const I=S instanceof ArrayBuffer?new Uint8Array(S):typeof S=="string"?Vg(S):S;let M=new Uint8Array(y.length+I.length);M.set(y),M.set(I,y.length),y=M;let U;for(;(U=R8(y))!==-1;)yield yield Yn(y.slice(0,U)),y=y.slice(U)}}catch(S){o={error:S}}finally{try{!v&&!n&&(u=b.return)&&(yield Yn(u.call(b)))}finally{if(o)throw o.error}}y.length>0&&(yield yield Yn(y))})}class L8{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const d={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],d}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,o,u]=P8(e,":");return u.startsWith(" ")&&(u=u.substring(1)),n==="event"?this.event=u:n==="data"&&this.data.push(u),null}}function P8(i,e){const n=i.indexOf(e);return n!==-1?[i.substring(0,n),e,i.substring(n+e.length)]:[i,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function B8(i,e){const{response:n,requestLogID:o,retryOfRequestLogID:u,startTime:d}=e,y=await(async()=>{var v;if(e.options.stream)return mr(i).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,i):Fl.fromSSEResponse(n,e.controller,i);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const b=n.headers.get("content-type"),_=(v=b==null?void 0:b.split(";")[0])===null||v===void 0?void 0:v.trim();return(_==null?void 0:_.includes("application/json"))||(_==null?void 0:_.endsWith("+json"))?await n.json():await n.text()})();return mr(i).debug(`[${o}] response parsed`,Ko({retryOfRequestLogID:u,url:n.url,status:n.status,body:y,durationMs:Date.now()-d})),y}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jg extends Promise{constructor(e,n,o=B8){super(u=>{u(null)}),this.responsePromise=n,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new jg(this.client,this.responsePromise,async(n,o)=>e(await this.parseResponse(n,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const UA=Symbol("brand.privateNullableHeaders");function*k8(i){if(!i)return;if(UA in i){const{values:o,nulls:u}=i;yield*o.entries();for(const d of u)yield[d,null];return}let e=!1,n;i instanceof Headers?n=i.entries():IE(i)?n=i:(e=!0,n=Object.entries(i??{}));for(let o of n){const u=o[0];if(typeof u!="string")throw new TypeError("expected header name to be a string");const d=IE(o[1])?o[1]:[o[1]];let y=!1;for(const v of d)v!==void 0&&(e&&!y&&(y=!0,yield[u,null]),yield[u,v])}}const Gc=i=>{const e=new Headers,n=new Set;for(const o of i){const u=new Set;for(const[d,y]of k8(o)){const v=d.toLowerCase();u.has(v)||(e.delete(d),u.add(v)),y===null?(e.delete(d),n.add(v)):(e.append(d,y),n.delete(v))}}return{[UA]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const l1=i=>{var e,n,o,u,d,y;if(typeof globalThis.process<"u")return(o=(n=(e=n8)===null||e===void 0?void 0:e[i])===null||n===void 0?void 0:n.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(y=(d=(u=globalThis.Deno.env)===null||u===void 0?void 0:u.get)===null||d===void 0?void 0:d.call(u,i))===null||y===void 0?void 0:y.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var VA;class ed{constructor(e){var n,o,u,d,y,v,b,{baseURL:_=l1("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:S=(n=l1("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:I="v1beta"}=e,M=Tf(e,["baseURL","apiKey","apiVersion"]);const U=Object.assign(Object.assign({apiKey:S,apiVersion:I},M),{baseURL:_||"https://generativelanguage.googleapis.com"});this.baseURL=U.baseURL,this.timeout=(o=U.timeout)!==null&&o!==void 0?o:ed.DEFAULT_TIMEOUT,this.logger=(u=U.logger)!==null&&u!==void 0?u:console;const X="warn";this.logLevel=X,this.logLevel=(y=(d=ME(U.logLevel,"ClientOptions.logLevel",this))!==null&&d!==void 0?d:ME(l1("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&y!==void 0?y:X,this.fetchOptions=U.fetchOptions,this.maxRetries=(v=U.maxRetries)!==null&&v!==void 0?v:2,this.fetch=(b=U.fetch)!==null&&b!==void 0?b:x8(),this.encoder=_8,this._options=U,this.apiKey=S,this.apiVersion=I,this.clientAdapter=U.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Gc([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Gc([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Gc([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,o])=>typeof o<"u").map(([n,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(n)}=`;throw new gs(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${jl}`}defaultIdempotencyKey(){return`stainless-node-retry-${i8()}`}makeStatusError(e,n,o,u){return pr.generate(e,n,o,u)}buildURL(e,n,o){const u=!this.baseURLOverridden()&&o||this.baseURL,d=s8(e)?new URL(e):new URL(u+(u.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),y=this.defaultQuery();return l8(y)||(n=Object.assign(Object.assign({},y),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(d.search=this.stringifyQuery(n)),d.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:o}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,o){return this.request(Promise.resolve(o).then(u=>Object.assign({method:e,path:n},u)))}request(e,n=null){return new jg(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,o){var u,d,y;const v=await e,b=(u=v.maxRetries)!==null&&u!==void 0?u:this.maxRetries;n==null&&(n=b),await this.prepareOptions(v);const{req:_,url:S,timeout:I}=await this.buildRequest(v,{retryCount:b-n});await this.prepareRequest(_,{url:S,options:v});const M="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),U=o===void 0?"":`, retryOf: ${o}`,X=Date.now();if(mr(this).debug(`[${M}] sending request`,Ko({retryOfRequestLogID:o,method:v.method,url:S,options:v,headers:_.headers})),!((d=v.signal)===null||d===void 0)&&d.aborted)throw new V1;const K=new AbortController,z=await this.fetchWithTimeout(S,_,I,K).catch(U1),oe=Date.now();if(z instanceof globalThis.Error){const ee=`retrying, ${n} attempts remaining`;if(!((y=v.signal)===null||y===void 0)&&y.aborted)throw new V1;const ae=k1(z)||/timed? ?out/i.test(String(z)+("cause"in z?String(z.cause):""));if(n)return mr(this).info(`[${M}] connection ${ae?"timed out":"failed"} - ${ee}`),mr(this).debug(`[${M}] connection ${ae?"timed out":"failed"} (${ee})`,Ko({retryOfRequestLogID:o,url:S,durationMs:oe-X,message:z.message})),this.retryRequest(v,n,o??M);throw mr(this).info(`[${M}] connection ${ae?"timed out":"failed"} - error; no more retries left`),mr(this).debug(`[${M}] connection ${ae?"timed out":"failed"} (error; no more retries left)`,Ko({retryOfRequestLogID:o,url:S,durationMs:oe-X,message:z.message})),ae?new wA:new Jf({cause:z})}const he=`[${M}${U}] ${_.method} ${S} ${z.ok?"succeeded":"failed"} with status ${z.status} in ${oe-X}ms`;if(!z.ok){const ee=await this.shouldRetry(z);if(n&&ee){const V=`retrying, ${n} attempts remaining`;return await E8(z.body),mr(this).info(`${he} - ${V}`),mr(this).debug(`[${M}] response error (${V})`,Ko({retryOfRequestLogID:o,url:z.url,status:z.status,headers:z.headers,durationMs:oe-X})),this.retryRequest(v,n,o??M,z.headers)}const ae=ee?"error; no more retries left":"error; not retryable";mr(this).info(`${he} - ${ae}`);const Ve=await z.text().catch(V=>U1(V).message),Ne=h8(Ve),j=Ne?void 0:Ve;throw mr(this).debug(`[${M}] response error (${ae})`,Ko({retryOfRequestLogID:o,url:z.url,status:z.status,headers:z.headers,message:j,durationMs:Date.now()-X})),this.makeStatusError(z.status,Ne,j,z.headers)}return mr(this).info(he),mr(this).debug(`[${M}] response start`,Ko({retryOfRequestLogID:o,url:z.url,status:z.status,headers:z.headers,durationMs:oe-X})),{response:z,options:v,controller:K,requestLogID:M,retryOfRequestLogID:o,startTime:X}}async fetchWithTimeout(e,n,o,u){const d=n||{},{signal:y,method:v}=d,b=Tf(d,["signal","method"]);y&&y.addEventListener("abort",()=>u.abort());const _=setTimeout(()=>u.abort(),o),S=globalThis.ReadableStream&&b.body instanceof globalThis.ReadableStream||typeof b.body=="object"&&b.body!==null&&Symbol.asyncIterator in b.body,I=Object.assign(Object.assign(Object.assign({signal:u.signal},S?{duplex:"half"}:{}),{method:"GET"}),b);v&&(I.method=v.toUpperCase());try{return await this.fetch.call(void 0,e,I)}finally{clearTimeout(_)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,o,u){var d;let y;const v=u==null?void 0:u.get("retry-after-ms");if(v){const _=parseFloat(v);Number.isNaN(_)||(y=_)}const b=u==null?void 0:u.get("retry-after");if(b&&!y){const _=parseFloat(b);Number.isNaN(_)?y=Date.parse(b)-Date.now():y=_*1e3}if(!(y&&0<=y&&y<60*1e3)){const _=(d=e.maxRetries)!==null&&d!==void 0?d:this.maxRetries;y=this.calculateDefaultRetryTimeoutMillis(n,_)}return await f8(y),this.makeRequest(e,n-1,o)}calculateDefaultRetryTimeoutMillis(e,n){const d=n-e,y=Math.min(.5*Math.pow(2,d),8),v=1-Math.random()*.25;return y*v*1e3}async buildRequest(e,{retryCount:n=0}={}){var o,u,d;const y=Object.assign({},e),{method:v,path:b,query:_,defaultBaseURL:S}=y,I=this.buildURL(b,_,S);"timeout"in y&&u8("timeout",y.timeout),y.timeout=(o=y.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:M,body:U}=this.buildBody({options:y}),X=await this.buildHeaders({options:e,method:v,bodyHeaders:M,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:v,headers:X},y.signal&&{signal:y.signal}),globalThis.ReadableStream&&U instanceof globalThis.ReadableStream&&{duplex:"half"}),U&&{body:U}),(u=this.fetchOptions)!==null&&u!==void 0?u:{}),(d=y.fetchOptions)!==null&&d!==void 0?d:{}),url:I,timeout:y.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:o,retryCount:u}){let d={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),d[this.idempotencyHeader]=e.idempotencyKey);const y=await this.authHeaders(e);let v=Gc([d,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(u)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),p8()),this._options.defaultHeaders,o,e.headers,y]);return this.validateHeaders(v),v.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=Gc([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:y8(e)}:this.encoder({body:e,headers:o})}}ed.DEFAULT_TIMEOUT=6e4;class Yi extends ed{constructor(){super(...arguments),this.interactions=new kA(this)}}VA=Yi;Yi.GeminiNextGenAPIClient=VA;Yi.GeminiNextGenAPIClientError=gs;Yi.APIError=pr;Yi.APIConnectionError=Jf;Yi.APIConnectionTimeoutError=wA;Yi.APIUserAbortError=V1;Yi.NotFoundError=vA;Yi.ConflictError=CA;Yi.RateLimitError=IA;Yi.BadRequestError=AA;Yi.AuthenticationError=bA;Yi.InternalServerError=NA;Yi.PermissionDeniedError=TA;Yi.UnprocessableEntityError=SA;Yi.toFile=v8;Yi.Interactions=kA;const U8=()=>null,V8=async(i,e)=>{try{const n=U8();if(!n)throw new Error("API Key not found");return(await n.models.generateContent({model:"gemini-2.0-flash-exp",contents:`
        
        
        - ${i.name}
        - ${e.name}
        - ${i.points}
        - ${i.totalEarned}

        30-50
        
      `})).text()||""}catch(n){return console.error("Gemini Error:",n),""}},j8=({user:i,rank:e,onUserUpdate:n})=>{const{showAlert:o}=tc(),[u,d]=se.useState("..."),[y,v]=se.useState([]),[b,_]=se.useState([]),[S,I]=se.useState(null),[M,U]=se.useState(new Set),[X,K]=se.useState(!1),z=fo[fo.indexOf(e)+1]||null,oe=z?Math.min(100,(i.totalEarned-e.threshold)/(z.threshold-e.threshold)*100):100,he=Math.floor(i.totalEarned/500)+1;se.useEffect(()=>{(async()=>{const j=await V8(i,e);d(j)})();const Ve=mA(async j=>{const G=j.filter(te=>te.isActive);v(G);const V=new Set;for(const te of G)await fA(i.id,te.id)&&V.add(te.id);U(V)}),Ne=dA(j=>{const G=new Date;G.setHours(0,0,0,0),_(j.filter(V=>V.userId===i.id&&V.timestamp>=G.getTime()))});return()=>{Ve(),Ne()}},[i.id,e]);const ee=async ae=>{if(S)return;if(ae.deadline&&ae.deadline<Date.now()){o("","error");return}if(b.some(Ne=>Ne.missionId===ae.id&&Ne.status==="pending")){o("","info");return}I(ae.id);try{await j6({id:`sub_${Date.now()}`,userId:i.id,userName:i.name,missionId:ae.id,missionTitle:ae.title,points:ae.points,timestamp:Date.now(),status:"pending"}),o("","success")}catch(Ne){console.error("Error submitting mission:",Ne),o("","error")}finally{I(null)}};return T.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-10 relative",children:[X&&T.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:T.jsxs("div",{className:"bg-white rounded-[2.5rem] max-w-lg w-full p-8 shadow-2xl animate-in zoom-in-95 duration-200 border border-slate-100 relative",children:[T.jsx("button",{onClick:()=>K(!1),className:"absolute top-6 right-6 p-2 bg-slate-100 rounded-full hover:bg-slate-200 transition-colors text-slate-500",children:T.jsx(oo,{size:20})}),T.jsxs("h3",{className:"text-2xl font-black text-slate-800 mb-6 flex items-center gap-3",children:[T.jsx(ux,{className:"text-amber-500"}),""]}),T.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto pr-2 custom-scrollbar",children:fo.map((ae,Ve)=>T.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-2xl ${i.totalEarned>=ae.threshold?"bg-indigo-50 border-2 border-indigo-100":"bg-slate-50 border border-slate-100 grayscale opacity-70"}`,children:[T.jsx("div",{className:"text-3xl",children:ae.icon}),T.jsxs("div",{className:"flex-1",children:[T.jsx("h4",{className:"font-bold text-slate-800",children:ae.name}),T.jsxs("p",{className:"text-xs text-slate-500 font-bold mt-0.5",children:[" ",ae.threshold.toLocaleString()," "]})]}),i.totalEarned>=ae.threshold&&T.jsx("div",{className:"bg-indigo-500 text-white p-1 rounded-full",children:T.jsx(su,{size:16})})]},ae.name))}),T.jsx("div",{className:"mt-6 text-center",children:T.jsx("p",{className:"text-xs text-slate-400 font-bold",children:""})})]})}),T.jsxs("header",{className:"flex flex-col md:flex-row md:items-start justify-between gap-4",children:[T.jsxs("div",{children:[T.jsxs("h1",{className:"text-3xl font-black text-slate-800 tracking-tight",children:["",i.name,""]}),T.jsxs("p",{className:"text-slate-500 mt-1 italic max-w-xl font-medium",children:['"',u,'"']})]}),T.jsxs("div",{className:"bg-amber-50 border border-amber-100 rounded-2xl px-5 py-3 flex items-center gap-3 self-end md:self-start shadow-sm",children:[T.jsx("div",{className:"bg-amber-500 p-2 rounded-xl text-white shadow-lg shadow-amber-200",children:T.jsx(Vv,{size:20})}),T.jsxs("div",{children:[T.jsx("p",{className:"text-[10px] text-amber-700 font-black uppercase tracking-widest",children:""}),T.jsxs("p",{className:"text-2xl font-black text-amber-900 leading-none",children:[i.totalEarned.toLocaleString()," ",T.jsx("span",{className:"text-xs font-bold opacity-60",children:"PTS"})]})]})]})]}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[T.jsxs("div",{className:"md:col-span-2 bg-white rounded-[2.5rem] p-10 border border-slate-100 shadow-xl shadow-slate-200/40 relative overflow-hidden",children:[T.jsxs("div",{className:"flex items-center justify-between mb-12",children:[T.jsxs("div",{children:[T.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[T.jsx("h3",{className:"text-slate-400 text-[10px] font-black uppercase tracking-[0.2em]",children:""}),T.jsx("button",{onClick:()=>K(!0),className:"text-indigo-400 hover:text-indigo-600 transition-colors",title:"",children:T.jsx(p_,{size:14})})]}),T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("span",{className:"text-4xl filter drop-shadow-md",children:e.icon}),T.jsxs("span",{className:`text-2xl font-black px-6 py-2 rounded-2xl text-white ${e.color} shadow-xl shadow-indigo-100 border-2 border-white/20 flex items-center gap-2`,children:[e.name," ",T.jsxs("span",{className:"text-sm bg-white/20 px-2 py-0.5 rounded-lg border border-white/20",children:["Lv.",he]})]})]})]}),z&&T.jsxs("div",{className:"text-right",children:[T.jsx("h3",{className:"text-slate-400 text-[10px] font-black uppercase tracking-[0.2em] mb-2",children:""}),T.jsxs("div",{className:"flex items-center gap-3 justify-end group",children:[T.jsx("span",{className:"text-lg font-black text-slate-700 group-hover:text-indigo-600 transition-colors",children:z.name}),T.jsx("span",{className:"text-2xl animate-bounce",children:z.icon})]})]})]}),T.jsxs("div",{className:"relative pt-12 pb-6 px-2",children:[T.jsx("div",{className:"h-5 bg-slate-100 rounded-full w-full overflow-hidden border border-slate-200 shadow-inner p-1",children:T.jsx("div",{className:`h-full ${e.color} transition-all duration-1000 ease-out rounded-full relative overflow-hidden`,style:{width:`${oe}%`},children:T.jsx("div",{className:"absolute inset-0 bg-white/20 animate-pulse"})})}),T.jsx("div",{className:"absolute top-0 transition-all duration-1000 ease-out",style:{left:`calc(${oe}% - 30px)`},children:T.jsxs("div",{className:"relative group cursor-pointer",children:[T.jsx("div",{className:"p-1.5 bg-white rounded-full shadow-2xl border border-slate-50 transition-transform group-hover:scale-110 active:scale-95",children:T.jsx("img",{src:i.avatar,className:`w-14 h-14 rounded-full border-4 border-opacity-30 object-cover ${e.color.replace("bg-","border-")}`,alt:"me"})}),T.jsxs("div",{className:`absolute -top-10 left-1/2 -translate-x-1/2 px-3 py-1 rounded-xl text-[11px] font-black text-white shadow-xl ${e.color} whitespace-nowrap`,children:[" ",Math.round(oe),"%"]})]})})]}),T.jsx("p",{className:"text-center text-xs text-slate-400 font-bold mt-8 tracking-wide",children:z?`${z.name} ${z.threshold-i.totalEarned} `:""})]}),T.jsxs("div",{className:"bg-gradient-to-br from-indigo-600 via-indigo-700 to-indigo-900 rounded-[2.5rem] p-10 text-white shadow-2xl shadow-indigo-300 flex flex-col justify-center items-center text-center relative overflow-hidden",children:[T.jsx("div",{className:"absolute -top-10 -right-10 w-40 h-40 bg-white/10 rounded-full blur-3xl"}),T.jsx("div",{className:"absolute -bottom-10 -left-10 w-40 h-40 bg-indigo-500/20 rounded-full blur-3xl"}),T.jsx("div",{className:"w-20 h-20 bg-white/20 backdrop-blur-xl rounded-[2rem] flex items-center justify-center mb-6 border border-white/20 shadow-xl",children:T.jsx(mC,{size:40,className:"text-white drop-shadow-md"})}),T.jsx("h3",{className:"text-indigo-200 text-sm font-black mb-1 uppercase tracking-widest",children:""}),T.jsx("p",{className:"text-6xl font-black mb-4 drop-shadow-lg",children:i.points.toLocaleString()}),T.jsx("div",{className:"px-5 py-1.5 bg-indigo-500/40 backdrop-blur rounded-full text-[10px] font-black tracking-[0.2em] uppercase border border-white/10",children:"SHOPPING POWER"})]})]}),T.jsxs("section",{className:"mt-16",children:[T.jsxs("div",{className:"flex items-center justify-between mb-8",children:[T.jsxs("h2",{className:"text-2xl font-black text-slate-800 flex items-center gap-3",children:[T.jsx(Zc,{className:"text-indigo-500",size:28}),""]}),T.jsx("div",{className:"flex items-center gap-4 text-xs font-bold text-slate-400",children:T.jsxs("span",{className:"flex items-center gap-1",children:[T.jsx(cC,{size:12,className:"text-amber-500"})," "]})})]}),T.jsx("div",{className:"grid grid-cols-1 gap-6",children:y.map(ae=>{const Ve=M.has(ae.id);return T.jsx("div",{className:`bg-white border-2 border-slate-50 p-8 rounded-[2.5rem] transition-all group relative overflow-hidden ${Ve?"opacity-60 grayscale":"shadow-sm hover:shadow-xl"} ${ae.id===S?"animate-pulse":""}`,children:T.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-8",children:[T.jsxs("div",{className:"flex gap-8 items-start",children:[T.jsx("div",{className:`w-20 h-20 rounded-3xl flex items-center justify-center shrink-0 shadow-inner ${ae.type==="normal"?"bg-emerald-50 text-emerald-600":ae.type==="challenge"?"bg-orange-50 text-orange-600":"bg-rose-50 text-rose-600"}`,children:Ve?T.jsx(su,{size:36}):ae.type==="normal"?T.jsx(Zc,{size:36}):ae.type==="challenge"?T.jsx(Cv,{size:36}):T.jsx(ux,{size:36})}),T.jsxs("div",{children:[T.jsx("div",{className:"flex items-center gap-3 mb-2",children:T.jsx("span",{className:`px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-widest ${ae.type==="normal"?"bg-emerald-100 text-emerald-700":ae.type==="challenge"?"bg-orange-100 text-orange-700":"bg-rose-100 text-rose-700"}`,children:ae.type==="normal"?"":ae.type==="challenge"?"":""})}),T.jsx("h3",{className:"text-2xl font-black text-slate-800 transition-colors",children:ae.title}),T.jsx("p",{className:"text-slate-500 mt-2 leading-relaxed text-lg font-medium max-w-2xl",children:ae.description}),ae.deadline&&T.jsxs("div",{className:`mt-3 flex items-center gap-2 text-sm font-black ${ae.deadline<Date.now()?"text-rose-500":"text-amber-500"}`,children:[T.jsx(au,{size:16}),ae.deadline<Date.now()?"":` ${new Date(ae.deadline).toLocaleString()}`]})]})]}),T.jsxs("div",{className:"flex flex-col md:items-end gap-6 shrink-0",children:[T.jsxs("div",{className:"flex flex-col items-end",children:[T.jsx("span",{className:"text-xs font-bold text-slate-400 mb-1 uppercase tracking-tighter",children:""}),T.jsxs("div",{className:"flex items-baseline gap-2",children:[T.jsx("span",{className:"text-4xl font-black text-indigo-600 tracking-tighter",children:ae.points}),T.jsx("span",{className:"text-sm font-bold text-slate-400",children:"PTS"})]})]}),T.jsxs("button",{onClick:()=>ee(ae),disabled:S!==null||Ve||b.some(Ne=>Ne.missionId===ae.id&&Ne.status==="pending")||ae.deadline!==void 0&&ae.deadline<Date.now(),className:`px-10 py-5 rounded-2xl font-black transition-all flex items-center gap-3 shadow-xl ${Ve?"bg-slate-200 text-slate-500 cursor-not-allowed shadow-none":b.some(Ne=>Ne.missionId===ae.id&&Ne.status==="pending")?"bg-amber-100 text-amber-600 cursor-not-allowed shadow-none":ae.deadline!==void 0&&ae.deadline<Date.now()?"bg-slate-200 text-slate-400 cursor-not-allowed shadow-none":ae.type==="normal"?"bg-emerald-600 hover:bg-emerald-700 shadow-emerald-100":ae.type==="challenge"?"bg-orange-600 hover:bg-orange-700 shadow-orange-100":"bg-rose-600 hover:bg-rose-700 shadow-rose-100"} text-white text-lg active:scale-95 disabled:active:scale-100`,children:[Ve?"":b.some(Ne=>Ne.missionId===ae.id&&Ne.status==="pending")?"":ae.deadline!==void 0&&ae.deadline<Date.now()?"":S===ae.id?"...":"",!Ve&&!b.some(Ne=>Ne.missionId===ae.id&&Ne.status==="pending")&&(!ae.deadline||ae.deadline>=Date.now())&&T.jsx(xv,{size:20})]})]})]})},ae.id)})})]})]})},F8=({user:i,onUserUpdate:e})=>{const{showAlert:n}=tc(),[o,u]=se.useState(null),[d,y]=se.useState("all"),[v,b]=se.useState([]),[_,S]=se.useState([]),[I,M]=se.useState([]),[U,X]=se.useState(0);se.useEffect(()=>{if(I.length>1){const oe=setInterval(()=>{X(he=>(he+1)%I.length)},5e3);return()=>clearInterval(oe)}},[I.length]),se.useEffect(()=>{const oe=pA(ae=>{b(ae)}),he=hA(ae=>{S(ae)}),ee=EA(M);return()=>{oe(),he(),ee()}},[]);const K=v.filter(oe=>d==="all"||oe.category===d),z=async()=>{if(i.role==="GUEST"){n("","info");return}if(!o||i.points<o.price||o.stock<=0)return;const oe={id:`red_${Date.now()}`,userId:i.id,productId:o.id,productName:o.name,pointsSpent:o.price,timestamp:Date.now(),status:"pending",qrCodeData:`AUTH_WORKSHOP_${Date.now()}_${o.id}`},he={...i,points:i.points-o.price};await R6(oe),await Yl(he),await gA(o.id,1),e(),u(null),n("  QR Code","success")};return T.jsxs("div",{className:"space-y-8 pb-20",children:[T.jsxs("header",{children:[T.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:""}),T.jsx("p",{className:"text-slate-500 mt-1",children:""})]}),I.length>0&&T.jsxs("div",{className:"relative w-full h-48 md:h-64 rounded-[2.5rem] overflow-hidden shadow-2xl shadow-indigo-100 group",children:[T.jsx("div",{className:"flex transition-transform duration-700 ease-in-out h-full",style:{transform:`translateX(-${U*100}%)`},children:I.map(oe=>T.jsxs("div",{className:"min-w-full h-full relative",children:[T.jsx("img",{src:oe.imageUrl,alt:"banner",className:"w-full h-full object-cover"}),T.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent flex items-end p-8"})]},oe.id))}),T.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2",children:I.map((oe,he)=>T.jsx("button",{onClick:()=>X(he),className:`w-2 h-2 rounded-full transition-all ${U===he?"bg-white w-6":"bg-white/50 hover:bg-white/80"}`},he))}),T.jsx("button",{onClick:()=>X(oe=>(oe-1+I.length)%I.length),className:"absolute left-4 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/40 backdrop-blur p-2 rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity",children:T.jsx(Wo,{className:"rotate-180",size:20})}),T.jsx("button",{onClick:()=>X(oe=>(oe+1)%I.length),className:"absolute right-4 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/40 backdrop-blur p-2 rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity",children:T.jsx(Wo,{size:20})})]}),T.jsxs("div",{className:"flex flex-wrap gap-2",children:[T.jsx("button",{onClick:()=>y("all"),className:`px-6 py-2.5 rounded-2xl text-sm font-bold transition-all ${d==="all"?"bg-indigo-600 text-white shadow-lg shadow-indigo-100":"bg-white text-slate-600 border border-slate-200 hover:border-indigo-300"}`,children:""}),_.map(oe=>T.jsx("button",{onClick:()=>y(oe.name),className:`px-6 py-2.5 rounded-2xl text-sm font-bold transition-all ${d===oe.name?"bg-indigo-600 text-white shadow-lg shadow-indigo-100":"bg-white text-slate-600 border border-slate-200 hover:border-indigo-300"}`,children:oe.name},oe.id))]}),T.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:K.map(oe=>{const he=i.points>=oe.price,ee=oe.stock<=0;return T.jsxs("div",{className:`bg-white rounded-[2rem] border border-slate-100 overflow-hidden shadow-sm hover:shadow-2xl transition-all flex flex-col group ${ee?"opacity-75 grayscale-[0.5]":""}`,children:[T.jsxs("div",{className:"relative h-56 overflow-hidden",children:[T.jsx("img",{src:oe.imageUrl,alt:oe.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700"}),T.jsx("div",{className:"absolute top-5 left-5",children:T.jsx("span",{className:"bg-white/90 backdrop-blur text-indigo-600 text-[10px] px-3 py-1.5 rounded-full font-black tracking-widest shadow-sm",children:oe.category.toUpperCase()})}),ee&&T.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:T.jsx("span",{className:"text-white font-black text-2xl rotate-12 border-4 border-white px-4 py-1",children:"SOLD OUT"})})]}),T.jsxs("div",{className:"p-8 flex flex-col flex-1",children:[T.jsx("div",{className:"flex justify-between items-start mb-2",children:T.jsx("h3",{className:"font-black text-xl text-slate-800 leading-tight",children:oe.name})}),T.jsx("p",{className:"text-slate-500 text-sm mb-6 flex-1 leading-relaxed",children:oe.description}),T.jsxs("div",{className:"flex items-center gap-2 mb-6 text-slate-400 text-xs font-bold",children:[T.jsx(f1,{size:14}),T.jsxs("span",{children:["",T.jsxs("span",{className:oe.stock<=5?"text-red-500":"text-slate-600",children:[oe.stock," "]})]})]}),T.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[T.jsxs("div",{className:"flex items-center gap-1 text-indigo-600",children:[T.jsx("span",{className:"text-2xl font-black",children:oe.price.toLocaleString()}),T.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-tighter",children:"pts"})]}),T.jsx("button",{onClick:()=>u(oe),disabled:!he||ee,className:`px-6 py-3 rounded-2xl font-black text-sm transition-all shadow-md ${ee?"bg-slate-100 text-slate-400 cursor-not-allowed shadow-none":he?"bg-indigo-600 text-white hover:bg-indigo-700 hover:shadow-indigo-200 active:scale-95":"bg-slate-100 text-slate-400 cursor-not-allowed shadow-none"}`,children:ee?"":""})]})]})]},oe.id)})}),o&&T.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:T.jsxs("div",{className:"bg-white rounded-[2.5rem] max-w-md w-full p-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[T.jsxs("div",{className:"flex justify-between items-start mb-8",children:[T.jsx("div",{className:"bg-indigo-50 p-4 rounded-2xl text-indigo-600",children:T.jsx(aC,{size:28})}),T.jsx("button",{onClick:()=>u(null),className:"text-slate-400 hover:text-slate-600 bg-slate-50 p-2 rounded-full",children:T.jsx(oo,{size:24})})]}),T.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-2",children:""}),T.jsxs("p",{className:"text-slate-500 mb-8 leading-relaxed",children:[" ",T.jsxs("span",{className:"font-black text-indigo-600",children:[o.price," "]}),"  ",T.jsxs("span",{className:"font-black text-slate-800",children:["",o.name,""]})," "]}),T.jsxs("div",{className:"bg-slate-50 rounded-[1.5rem] p-6 mb-8 border border-slate-100",children:[T.jsxs("div",{className:"flex justify-between text-sm mb-3",children:[T.jsx("span",{className:"text-slate-500 font-medium",children:""}),T.jsx("span",{className:"font-bold text-slate-800",children:i.points.toLocaleString()})]}),T.jsxs("div",{className:"flex justify-between text-sm mb-5",children:[T.jsx("span",{className:"text-slate-500 font-medium",children:""}),T.jsxs("span",{className:"font-bold text-red-500",children:["-",o.price.toLocaleString()]})]}),T.jsxs("div",{className:"border-t border-slate-200 pt-5 flex justify-between",children:[T.jsx("span",{className:"font-black text-slate-700 text-lg",children:""}),T.jsx("span",{className:"font-black text-indigo-600 text-2xl",children:(i.points-o.price).toLocaleString()})]})]}),T.jsxs("div",{className:"flex flex-col gap-3",children:[T.jsxs("button",{onClick:z,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-5 rounded-[1.25rem] transition-all shadow-xl shadow-indigo-100 flex items-center justify-center gap-3 text-lg",children:[T.jsx(Wo,{size:24}),""]}),T.jsx("button",{onClick:()=>u(null),className:"w-full bg-white border border-slate-200 text-slate-600 font-black py-4 rounded-[1.25rem] hover:bg-slate-50 transition-all",children:""})]})]})})]})};var z8=Object.defineProperty,Cf=Object.getOwnPropertySymbols,jA=Object.prototype.hasOwnProperty,FA=Object.prototype.propertyIsEnumerable,PE=(i,e,n)=>e in i?z8(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n,z1=(i,e)=>{for(var n in e||(e={}))jA.call(e,n)&&PE(i,n,e[n]);if(Cf)for(var n of Cf(e))FA.call(e,n)&&PE(i,n,e[n]);return i},H1=(i,e)=>{var n={};for(var o in i)jA.call(i,o)&&e.indexOf(o)<0&&(n[o]=i[o]);if(i!=null&&Cf)for(var o of Cf(i))e.indexOf(o)<0&&FA.call(i,o)&&(n[o]=i[o]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var tl;(i=>{const e=class kt{constructor(b,_,S,I){if(this.version=b,this.errorCorrectionLevel=_,this.modules=[],this.isFunction=[],b<kt.MIN_VERSION||b>kt.MAX_VERSION)throw new RangeError("Version value out of range");if(I<-1||I>7)throw new RangeError("Mask value out of range");this.size=b*4+17;let M=[];for(let X=0;X<this.size;X++)M.push(!1);for(let X=0;X<this.size;X++)this.modules.push(M.slice()),this.isFunction.push(M.slice());this.drawFunctionPatterns();const U=this.addEccAndInterleave(S);if(this.drawCodewords(U),I==-1){let X=1e9;for(let K=0;K<8;K++){this.applyMask(K),this.drawFormatBits(K);const z=this.getPenaltyScore();z<X&&(I=K,X=z),this.applyMask(K)}}u(0<=I&&I<=7),this.mask=I,this.applyMask(I),this.drawFormatBits(I),this.isFunction=[]}static encodeText(b,_){const S=i.QrSegment.makeSegments(b);return kt.encodeSegments(S,_)}static encodeBinary(b,_){const S=i.QrSegment.makeBytes(b);return kt.encodeSegments([S],_)}static encodeSegments(b,_,S=1,I=40,M=-1,U=!0){if(!(kt.MIN_VERSION<=S&&S<=I&&I<=kt.MAX_VERSION)||M<-1||M>7)throw new RangeError("Invalid value");let X,K;for(X=S;;X++){const ee=kt.getNumDataCodewords(X,_)*8,ae=y.getTotalBits(b,X);if(ae<=ee){K=ae;break}if(X>=I)throw new RangeError("Data too long")}for(const ee of[kt.Ecc.MEDIUM,kt.Ecc.QUARTILE,kt.Ecc.HIGH])U&&K<=kt.getNumDataCodewords(X,ee)*8&&(_=ee);let z=[];for(const ee of b){n(ee.mode.modeBits,4,z),n(ee.numChars,ee.mode.numCharCountBits(X),z);for(const ae of ee.getData())z.push(ae)}u(z.length==K);const oe=kt.getNumDataCodewords(X,_)*8;u(z.length<=oe),n(0,Math.min(4,oe-z.length),z),n(0,(8-z.length%8)%8,z),u(z.length%8==0);for(let ee=236;z.length<oe;ee^=253)n(ee,8,z);let he=[];for(;he.length*8<z.length;)he.push(0);return z.forEach((ee,ae)=>he[ae>>>3]|=ee<<7-(ae&7)),new kt(X,_,he,M)}getModule(b,_){return 0<=b&&b<this.size&&0<=_&&_<this.size&&this.modules[_][b]}getModules(){return this.modules}drawFunctionPatterns(){for(let S=0;S<this.size;S++)this.setFunctionModule(6,S,S%2==0),this.setFunctionModule(S,6,S%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const b=this.getAlignmentPatternPositions(),_=b.length;for(let S=0;S<_;S++)for(let I=0;I<_;I++)S==0&&I==0||S==0&&I==_-1||S==_-1&&I==0||this.drawAlignmentPattern(b[S],b[I]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(b){const _=this.errorCorrectionLevel.formatBits<<3|b;let S=_;for(let M=0;M<10;M++)S=S<<1^(S>>>9)*1335;const I=(_<<10|S)^21522;u(I>>>15==0);for(let M=0;M<=5;M++)this.setFunctionModule(8,M,o(I,M));this.setFunctionModule(8,7,o(I,6)),this.setFunctionModule(8,8,o(I,7)),this.setFunctionModule(7,8,o(I,8));for(let M=9;M<15;M++)this.setFunctionModule(14-M,8,o(I,M));for(let M=0;M<8;M++)this.setFunctionModule(this.size-1-M,8,o(I,M));for(let M=8;M<15;M++)this.setFunctionModule(8,this.size-15+M,o(I,M));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let b=this.version;for(let S=0;S<12;S++)b=b<<1^(b>>>11)*7973;const _=this.version<<12|b;u(_>>>18==0);for(let S=0;S<18;S++){const I=o(_,S),M=this.size-11+S%3,U=Math.floor(S/3);this.setFunctionModule(M,U,I),this.setFunctionModule(U,M,I)}}drawFinderPattern(b,_){for(let S=-4;S<=4;S++)for(let I=-4;I<=4;I++){const M=Math.max(Math.abs(I),Math.abs(S)),U=b+I,X=_+S;0<=U&&U<this.size&&0<=X&&X<this.size&&this.setFunctionModule(U,X,M!=2&&M!=4)}}drawAlignmentPattern(b,_){for(let S=-2;S<=2;S++)for(let I=-2;I<=2;I++)this.setFunctionModule(b+I,_+S,Math.max(Math.abs(I),Math.abs(S))!=1)}setFunctionModule(b,_,S){this.modules[_][b]=S,this.isFunction[_][b]=!0}addEccAndInterleave(b){const _=this.version,S=this.errorCorrectionLevel;if(b.length!=kt.getNumDataCodewords(_,S))throw new RangeError("Invalid argument");const I=kt.NUM_ERROR_CORRECTION_BLOCKS[S.ordinal][_],M=kt.ECC_CODEWORDS_PER_BLOCK[S.ordinal][_],U=Math.floor(kt.getNumRawDataModules(_)/8),X=I-U%I,K=Math.floor(U/I);let z=[];const oe=kt.reedSolomonComputeDivisor(M);for(let ee=0,ae=0;ee<I;ee++){let Ve=b.slice(ae,ae+K-M+(ee<X?0:1));ae+=Ve.length;const Ne=kt.reedSolomonComputeRemainder(Ve,oe);ee<X&&Ve.push(0),z.push(Ve.concat(Ne))}let he=[];for(let ee=0;ee<z[0].length;ee++)z.forEach((ae,Ve)=>{(ee!=K-M||Ve>=X)&&he.push(ae[ee])});return u(he.length==U),he}drawCodewords(b){if(b.length!=Math.floor(kt.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let _=0;for(let S=this.size-1;S>=1;S-=2){S==6&&(S=5);for(let I=0;I<this.size;I++)for(let M=0;M<2;M++){const U=S-M,K=(S+1&2)==0?this.size-1-I:I;!this.isFunction[K][U]&&_<b.length*8&&(this.modules[K][U]=o(b[_>>>3],7-(_&7)),_++)}}u(_==b.length*8)}applyMask(b){if(b<0||b>7)throw new RangeError("Mask value out of range");for(let _=0;_<this.size;_++)for(let S=0;S<this.size;S++){let I;switch(b){case 0:I=(S+_)%2==0;break;case 1:I=_%2==0;break;case 2:I=S%3==0;break;case 3:I=(S+_)%3==0;break;case 4:I=(Math.floor(S/3)+Math.floor(_/2))%2==0;break;case 5:I=S*_%2+S*_%3==0;break;case 6:I=(S*_%2+S*_%3)%2==0;break;case 7:I=((S+_)%2+S*_%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[_][S]&&I&&(this.modules[_][S]=!this.modules[_][S])}}getPenaltyScore(){let b=0;for(let M=0;M<this.size;M++){let U=!1,X=0,K=[0,0,0,0,0,0,0];for(let z=0;z<this.size;z++)this.modules[M][z]==U?(X++,X==5?b+=kt.PENALTY_N1:X>5&&b++):(this.finderPenaltyAddHistory(X,K),U||(b+=this.finderPenaltyCountPatterns(K)*kt.PENALTY_N3),U=this.modules[M][z],X=1);b+=this.finderPenaltyTerminateAndCount(U,X,K)*kt.PENALTY_N3}for(let M=0;M<this.size;M++){let U=!1,X=0,K=[0,0,0,0,0,0,0];for(let z=0;z<this.size;z++)this.modules[z][M]==U?(X++,X==5?b+=kt.PENALTY_N1:X>5&&b++):(this.finderPenaltyAddHistory(X,K),U||(b+=this.finderPenaltyCountPatterns(K)*kt.PENALTY_N3),U=this.modules[z][M],X=1);b+=this.finderPenaltyTerminateAndCount(U,X,K)*kt.PENALTY_N3}for(let M=0;M<this.size-1;M++)for(let U=0;U<this.size-1;U++){const X=this.modules[M][U];X==this.modules[M][U+1]&&X==this.modules[M+1][U]&&X==this.modules[M+1][U+1]&&(b+=kt.PENALTY_N2)}let _=0;for(const M of this.modules)_=M.reduce((U,X)=>U+(X?1:0),_);const S=this.size*this.size,I=Math.ceil(Math.abs(_*20-S*10)/S)-1;return u(0<=I&&I<=9),b+=I*kt.PENALTY_N4,u(0<=b&&b<=2568888),b}getAlignmentPatternPositions(){if(this.version==1)return[];{const b=Math.floor(this.version/7)+2,_=this.version==32?26:Math.ceil((this.version*4+4)/(b*2-2))*2;let S=[6];for(let I=this.size-7;S.length<b;I-=_)S.splice(1,0,I);return S}}static getNumRawDataModules(b){if(b<kt.MIN_VERSION||b>kt.MAX_VERSION)throw new RangeError("Version number out of range");let _=(16*b+128)*b+64;if(b>=2){const S=Math.floor(b/7)+2;_-=(25*S-10)*S-55,b>=7&&(_-=36)}return u(208<=_&&_<=29648),_}static getNumDataCodewords(b,_){return Math.floor(kt.getNumRawDataModules(b)/8)-kt.ECC_CODEWORDS_PER_BLOCK[_.ordinal][b]*kt.NUM_ERROR_CORRECTION_BLOCKS[_.ordinal][b]}static reedSolomonComputeDivisor(b){if(b<1||b>255)throw new RangeError("Degree out of range");let _=[];for(let I=0;I<b-1;I++)_.push(0);_.push(1);let S=1;for(let I=0;I<b;I++){for(let M=0;M<_.length;M++)_[M]=kt.reedSolomonMultiply(_[M],S),M+1<_.length&&(_[M]^=_[M+1]);S=kt.reedSolomonMultiply(S,2)}return _}static reedSolomonComputeRemainder(b,_){let S=_.map(I=>0);for(const I of b){const M=I^S.shift();S.push(0),_.forEach((U,X)=>S[X]^=kt.reedSolomonMultiply(U,M))}return S}static reedSolomonMultiply(b,_){if(b>>>8||_>>>8)throw new RangeError("Byte out of range");let S=0;for(let I=7;I>=0;I--)S=S<<1^(S>>>7)*285,S^=(_>>>I&1)*b;return u(S>>>8==0),S}finderPenaltyCountPatterns(b){const _=b[1];u(_<=this.size*3);const S=_>0&&b[2]==_&&b[3]==_*3&&b[4]==_&&b[5]==_;return(S&&b[0]>=_*4&&b[6]>=_?1:0)+(S&&b[6]>=_*4&&b[0]>=_?1:0)}finderPenaltyTerminateAndCount(b,_,S){return b&&(this.finderPenaltyAddHistory(_,S),_=0),_+=this.size,this.finderPenaltyAddHistory(_,S),this.finderPenaltyCountPatterns(S)}finderPenaltyAddHistory(b,_){_[0]==0&&(b+=this.size),_.pop(),_.unshift(b)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],i.QrCode=e;function n(v,b,_){if(b<0||b>31||v>>>b)throw new RangeError("Value out of range");for(let S=b-1;S>=0;S--)_.push(v>>>S&1)}function o(v,b){return(v>>>b&1)!=0}function u(v){if(!v)throw new Error("Assertion error")}const d=class ni{constructor(b,_,S){if(this.mode=b,this.numChars=_,this.bitData=S,_<0)throw new RangeError("Invalid argument");this.bitData=S.slice()}static makeBytes(b){let _=[];for(const S of b)n(S,8,_);return new ni(ni.Mode.BYTE,b.length,_)}static makeNumeric(b){if(!ni.isNumeric(b))throw new RangeError("String contains non-numeric characters");let _=[];for(let S=0;S<b.length;){const I=Math.min(b.length-S,3);n(parseInt(b.substring(S,S+I),10),I*3+1,_),S+=I}return new ni(ni.Mode.NUMERIC,b.length,_)}static makeAlphanumeric(b){if(!ni.isAlphanumeric(b))throw new RangeError("String contains unencodable characters in alphanumeric mode");let _=[],S;for(S=0;S+2<=b.length;S+=2){let I=ni.ALPHANUMERIC_CHARSET.indexOf(b.charAt(S))*45;I+=ni.ALPHANUMERIC_CHARSET.indexOf(b.charAt(S+1)),n(I,11,_)}return S<b.length&&n(ni.ALPHANUMERIC_CHARSET.indexOf(b.charAt(S)),6,_),new ni(ni.Mode.ALPHANUMERIC,b.length,_)}static makeSegments(b){return b==""?[]:ni.isNumeric(b)?[ni.makeNumeric(b)]:ni.isAlphanumeric(b)?[ni.makeAlphanumeric(b)]:[ni.makeBytes(ni.toUtf8ByteArray(b))]}static makeEci(b){let _=[];if(b<0)throw new RangeError("ECI assignment value out of range");if(b<128)n(b,8,_);else if(b<16384)n(2,2,_),n(b,14,_);else if(b<1e6)n(6,3,_),n(b,21,_);else throw new RangeError("ECI assignment value out of range");return new ni(ni.Mode.ECI,0,_)}static isNumeric(b){return ni.NUMERIC_REGEX.test(b)}static isAlphanumeric(b){return ni.ALPHANUMERIC_REGEX.test(b)}getData(){return this.bitData.slice()}static getTotalBits(b,_){let S=0;for(const I of b){const M=I.mode.numCharCountBits(_);if(I.numChars>=1<<M)return 1/0;S+=4+M+I.bitData.length}return S}static toUtf8ByteArray(b){b=encodeURI(b);let _=[];for(let S=0;S<b.length;S++)b.charAt(S)!="%"?_.push(b.charCodeAt(S)):(_.push(parseInt(b.substring(S+1,S+3),16)),S+=2);return _}};d.NUMERIC_REGEX=/^[0-9]*$/,d.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,d.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let y=d;i.QrSegment=d})(tl||(tl={}));(i=>{(e=>{const n=class{constructor(u,d){this.ordinal=u,this.formatBits=d}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),e.Ecc=n})(i.QrCode||(i.QrCode={}))})(tl||(tl={}));(i=>{(e=>{const n=class{constructor(u,d){this.modeBits=u,this.numBitsCharCount=d}numCharCountBits(u){return this.numBitsCharCount[Math.floor((u+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),e.Mode=n})(i.QrSegment||(i.QrSegment={}))})(tl||(tl={}));var zl=tl;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var H8={L:zl.QrCode.Ecc.LOW,M:zl.QrCode.Ecc.MEDIUM,Q:zl.QrCode.Ecc.QUARTILE,H:zl.QrCode.Ecc.HIGH},zA=128,HA="L",GA="#FFFFFF",qA="#000000",YA=!1,XA=1,G8=4,q8=0,Y8=.1;function KA(i,e=0){const n=[];return i.forEach(function(o,u){let d=null;o.forEach(function(y,v){if(!y&&d!==null){n.push(`M${d+e} ${u+e}h${v-d}v1H${d+e}z`),d=null;return}if(v===o.length-1){if(!y)return;d===null?n.push(`M${v+e},${u+e} h1v1H${v+e}z`):n.push(`M${d+e},${u+e} h${v+1-d}v1H${d+e}z`);return}y&&d===null&&(d=v)})}),n.join("")}function WA(i,e){return i.slice().map((n,o)=>o<e.y||o>=e.y+e.h?n:n.map((u,d)=>d<e.x||d>=e.x+e.w?u:!1))}function X8(i,e,n,o){if(o==null)return null;const u=i.length+n*2,d=Math.floor(e*Y8),y=u/e,v=(o.width||d)*y,b=(o.height||d)*y,_=o.x==null?i.length/2-v/2:o.x*y,S=o.y==null?i.length/2-b/2:o.y*y,I=o.opacity==null?1:o.opacity;let M=null;if(o.excavate){let X=Math.floor(_),K=Math.floor(S),z=Math.ceil(v+_-X),oe=Math.ceil(b+S-K);M={x:X,y:K,w:z,h:oe}}const U=o.crossOrigin;return{x:_,y:S,h:b,w:v,excavation:M,opacity:I,crossOrigin:U}}function K8(i,e){return e!=null?Math.max(Math.floor(e),0):i?G8:q8}function QA({value:i,level:e,minVersion:n,includeMargin:o,marginSize:u,imageSettings:d,size:y,boostLevel:v}){let b=ri.useMemo(()=>{const X=(Array.isArray(i)?i:[i]).reduce((K,z)=>(K.push(...zl.QrSegment.makeSegments(z)),K),[]);return zl.QrCode.encodeSegments(X,H8[e],n,void 0,void 0,v)},[i,e,n,v]);const{cells:_,margin:S,numCells:I,calculatedImageSettings:M}=ri.useMemo(()=>{let U=b.getModules();const X=K8(o,u),K=U.length+X*2,z=X8(U,y,X,d);return{cells:U,margin:X,numCells:K,calculatedImageSettings:z}},[b,y,d,o,u]);return{qrcode:b,margin:S,cells:_,numCells:I,calculatedImageSettings:M}}var W8=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),Q8=ri.forwardRef(function(e,n){const o=e,{value:u,size:d=zA,level:y=HA,bgColor:v=GA,fgColor:b=qA,includeMargin:_=YA,minVersion:S=XA,boostLevel:I,marginSize:M,imageSettings:U}=o,K=H1(o,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:z}=K,oe=H1(K,["style"]),he=U==null?void 0:U.src,ee=ri.useRef(null),ae=ri.useRef(null),Ve=ri.useCallback(et=>{ee.current=et,typeof n=="function"?n(et):n&&(n.current=et)},[n]),[Ne,j]=ri.useState(!1),{margin:G,cells:V,numCells:te,calculatedImageSettings:W}=QA({value:u,level:y,minVersion:S,boostLevel:I,includeMargin:_,marginSize:M,imageSettings:U,size:d});ri.useEffect(()=>{if(ee.current!=null){const et=ee.current,me=et.getContext("2d");if(!me)return;let pe=V;const be=ae.current,qe=W!=null&&be!==null&&be.complete&&be.naturalHeight!==0&&be.naturalWidth!==0;qe&&W.excavation!=null&&(pe=WA(V,W.excavation));const ot=window.devicePixelRatio||1;et.height=et.width=d*ot;const dt=d/te*ot;me.scale(dt,dt),me.fillStyle=v,me.fillRect(0,0,te,te),me.fillStyle=b,W8?me.fill(new Path2D(KA(pe,G))):V.forEach(function(ie,Ae){ie.forEach(function(ke,Ue){ke&&me.fillRect(Ue+G,Ae+G,1,1)})}),W&&(me.globalAlpha=W.opacity),qe&&me.drawImage(be,W.x+G,W.y+G,W.w,W.h)}}),ri.useEffect(()=>{j(!1)},[he]);const J=z1({height:d,width:d},z);let Y=null;return he!=null&&(Y=ri.createElement("img",{src:he,key:he,style:{display:"none"},onLoad:()=>{j(!0)},ref:ae,crossOrigin:W==null?void 0:W.crossOrigin})),ri.createElement(ri.Fragment,null,ri.createElement("canvas",z1({style:J,height:d,width:d,ref:Ve,role:"img"},oe)),Y)});Q8.displayName="QRCodeCanvas";var ZA=ri.forwardRef(function(e,n){const o=e,{value:u,size:d=zA,level:y=HA,bgColor:v=GA,fgColor:b=qA,includeMargin:_=YA,minVersion:S=XA,boostLevel:I,title:M,marginSize:U,imageSettings:X}=o,K=H1(o,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:z,cells:oe,numCells:he,calculatedImageSettings:ee}=QA({value:u,level:y,minVersion:S,boostLevel:I,includeMargin:_,marginSize:U,imageSettings:X,size:d});let ae=oe,Ve=null;X!=null&&ee!=null&&(ee.excavation!=null&&(ae=WA(oe,ee.excavation)),Ve=ri.createElement("image",{href:X.src,height:ee.h,width:ee.w,x:ee.x+z,y:ee.y+z,preserveAspectRatio:"none",opacity:ee.opacity,crossOrigin:ee.crossOrigin}));const Ne=KA(ae,z);return ri.createElement("svg",z1({height:d,width:d,viewBox:`0 0 ${he} ${he}`,ref:n,role:"img"},K),!!M&&ri.createElement("title",null,M),ri.createElement("path",{fill:v,d:`M0,0 h${he}v${he}H0z`,shapeRendering:"crispEdges"}),ri.createElement("path",{fill:b,d:Ne,shapeRendering:"crispEdges"}),Ve)});ZA.displayName="QRCodeSVG";const Z8=({user:i})=>{const[e,n]=se.useState([]),[o,u]=se.useState(null),[d,y]=se.useState(()=>{const _=new Date;return`${_.getFullYear()}-${String(_.getMonth()+1).padStart(2,"0")}`});se.useEffect(()=>{const _=yA(S=>{n(S.filter(I=>I.userId===i.id))});return()=>_()},[i.id]);const v=_=>new Date(_).toLocaleString("zh-TW",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),b=e.filter(_=>{const S=new Date(_.timestamp);return`${S.getFullYear()}-${String(S.getMonth()+1).padStart(2,"0")}`===d});return T.jsxs("div",{className:"space-y-8 animate-in slide-in-from-bottom-4 duration-500",children:[T.jsxs("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[T.jsxs("div",{children:[T.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:""}),T.jsx("p",{className:"text-slate-500 mt-1",children:""})]}),T.jsxs("div",{className:"flex items-center gap-3 bg-white p-2 rounded-2xl border border-slate-100 shadow-sm",children:[T.jsx(ox,{size:18,className:"text-indigo-600 ml-2"}),T.jsx("input",{type:"month",value:d,onChange:_=>y(_.target.value),className:"border-none bg-transparent font-bold text-slate-600 outline-none p-1"})]})]}),b.length===0?T.jsxs("div",{className:"bg-white rounded-3xl p-12 text-center border border-dashed border-slate-200",children:[T.jsx("div",{className:"bg-slate-50 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 text-slate-300",children:T.jsx(nf,{size:40})}),T.jsx("h2",{className:"text-xl font-bold text-slate-800",children:""}),T.jsx("p",{className:"text-slate-400 mt-2",children:""})]}):T.jsx("div",{className:"space-y-4",children:b.map(_=>T.jsxs("div",{className:"bg-white rounded-3xl border border-slate-100 p-6 flex flex-col md:flex-row md:items-center justify-between gap-6 shadow-sm hover:shadow-md transition-shadow",children:[T.jsxs("div",{className:"flex gap-4",children:[T.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center shrink-0 ${_.status==="completed"?"bg-green-50 text-green-600":_.status==="pending"?"bg-indigo-50 text-indigo-600":"bg-red-50 text-red-600"}`,children:_.status==="completed"?T.jsx(wv,{size:24}):_.status==="pending"?T.jsx(au,{size:24}):T.jsx(m_,{size:24})}),T.jsxs("div",{children:[T.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:_.productName||""}),T.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-400 mt-1",children:[T.jsxs("span",{className:"flex items-center gap-1",children:[T.jsx(ox,{size:12})," ",v(_.timestamp||Date.now())]}),T.jsxs("span",{className:"font-bold text-indigo-600",children:["-",_.pointsSpent||0," "]})]})]})]}),T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("div",{className:`px-4 py-1.5 rounded-full text-xs font-bold ${_.status==="completed"?"bg-green-100 text-green-700":_.status==="pending"?"bg-indigo-100 text-indigo-700":"bg-red-100 text-red-700"}`,children:_.status==="completed"?"":_.status==="pending"?"":""}),_.status==="pending"&&T.jsxs("button",{onClick:()=>u(_),className:"flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-2.5 rounded-xl text-sm font-bold transition-all shadow-lg shadow-indigo-100",children:[T.jsx(qv,{size:18}),""]})]})]},_.id))}),o&&T.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:T.jsxs("div",{className:"bg-white rounded-[2.5rem] max-w-sm w-full p-10 shadow-2xl animate-in zoom-in-95 duration-200 text-center",children:[T.jsx("div",{className:"flex justify-end mb-4 -mt-4 -mr-4",children:T.jsx("button",{onClick:()=>u(null),className:"text-slate-400 hover:text-slate-600 p-2",children:T.jsx(oo,{size:28})})}),T.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:""}),T.jsx("p",{className:"text-slate-500 mb-8 text-sm",children:""}),T.jsx("div",{className:"aspect-square bg-white border-8 border-indigo-50 rounded-3xl flex items-center justify-center mb-8 shadow-inner overflow-hidden p-6",children:T.jsx(ZA,{value:o.qrCodeData,size:256,level:"H",includeMargin:!1,className:"w-full h-full"})}),T.jsx("div",{className:"bg-slate-50 p-4 rounded-2xl text-slate-400 font-mono text-xs mb-8 tracking-widest uppercase",children:o.qrCodeData}),T.jsx("p",{className:"font-bold text-slate-800 mb-1",children:o.productName}),T.jsxs("p",{className:"text-xs text-slate-400",children:["ID: ",o.id]})]})})]})};var Ge;(function(i){i[i.QR_CODE=0]="QR_CODE",i[i.AZTEC=1]="AZTEC",i[i.CODABAR=2]="CODABAR",i[i.CODE_39=3]="CODE_39",i[i.CODE_93=4]="CODE_93",i[i.CODE_128=5]="CODE_128",i[i.DATA_MATRIX=6]="DATA_MATRIX",i[i.MAXICODE=7]="MAXICODE",i[i.ITF=8]="ITF",i[i.EAN_13=9]="EAN_13",i[i.EAN_8=10]="EAN_8",i[i.PDF_417=11]="PDF_417",i[i.RSS_14=12]="RSS_14",i[i.RSS_EXPANDED=13]="RSS_EXPANDED",i[i.UPC_A=14]="UPC_A",i[i.UPC_E=15]="UPC_E",i[i.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ge||(Ge={}));var BE=new Map([[Ge.QR_CODE,"QR_CODE"],[Ge.AZTEC,"AZTEC"],[Ge.CODABAR,"CODABAR"],[Ge.CODE_39,"CODE_39"],[Ge.CODE_93,"CODE_93"],[Ge.CODE_128,"CODE_128"],[Ge.DATA_MATRIX,"DATA_MATRIX"],[Ge.MAXICODE,"MAXICODE"],[Ge.ITF,"ITF"],[Ge.EAN_13,"EAN_13"],[Ge.EAN_8,"EAN_8"],[Ge.PDF_417,"PDF_417"],[Ge.RSS_14,"RSS_14"],[Ge.RSS_EXPANDED,"RSS_EXPANDED"],[Ge.UPC_A,"UPC_A"],[Ge.UPC_E,"UPC_E"],[Ge.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),kE;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.URL=1]="URL"})(kE||(kE={}));function J8(i){return Object.values(Ge).includes(i)}var Sf;(function(i){i[i.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",i[i.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Sf||(Sf={}));var $8=(function(){function i(){}return i.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",i.SCAN_DEFAULT_FPS=2,i.DEFAULT_DISABLE_FLIP=!1,i.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,i.DEFAULT_SUPPORTED_SCAN_TYPE=[Sf.SCAN_TYPE_CAMERA,Sf.SCAN_TYPE_FILE],i})(),JA=(function(){function i(e,n){this.format=e,this.formatName=n}return i.prototype.toString=function(){return this.formatName},i.create=function(e){if(!BE.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new i(e,BE.get(e))},i})(),UE=(function(){function i(){}return i.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},i.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},i})(),G1;(function(i){i[i.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",i[i.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",i[i.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(G1||(G1={}));var eR=(function(){function i(){}return i.createFrom=function(e){return{errorMessage:e,type:G1.UNKWOWN_ERROR}},i})(),tR=(function(){function i(e){this.verbose=e}return i.prototype.log=function(e){this.verbose&&console.log(e)},i.prototype.warn=function(e){this.verbose&&console.warn(e)},i.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},i.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},i})();function wa(i){return typeof i>"u"||i===null}var Hl=(function(){function i(){}return i.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},i.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},i.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},i.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},i.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},i.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},i.scannerPaused=function(){return"Scanner paused"},i})(),$A=(function(){function i(){}return i.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var o=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(o,"."),!0),!1}for(var u=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],d=new Set(u),y=Object.keys(e),v=0,b=y;v<b.length;v++){var _=b[v];if(d.has(_))return n.logError("".concat(_," is not supported videoConstaints."),!0),!1}return!0},i})(),Qc={exports:{}},nR=Qc.exports,VE;function iR(){return VE||(VE=1,(function(i,e){(function(n,o){o(e)})(nR,(function(n){function o(L){return L==null}var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,r){L.__proto__=r}||function(L,r){for(var a in r)r.hasOwnProperty(a)&&(L[a]=r[a])};function d(L,r){u(L,r);function a(){this.constructor=L}L.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}function y(L,r){var a=Object.setPrototypeOf;a?a(L,r):L.__proto__=r}function v(L,r){r===void 0&&(r=L.constructor);var a=Error.captureStackTrace;a&&a(L,r)}var b=(function(L){d(r,L);function r(a){var l=this.constructor,h=L.call(this,a)||this;return Object.defineProperty(h,"name",{value:l.name,enumerable:!1}),y(h,l.prototype),v(h),h}return r})(Error);class _ extends b{constructor(r=void 0){super(r),this.message=r}getKind(){return this.constructor.kind}}_.kind="Exception";class S extends _{}S.kind="ArgumentException";class I extends _{}I.kind="IllegalArgumentException";class M{constructor(r){if(this.binarizer=r,r===null)throw new I("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(r,a){return this.binarizer.getBlackRow(r,a)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(r,a,l,h){const f=this.binarizer.getLuminanceSource().crop(r,a,l,h);return new M(this.binarizer.createBinarizer(f))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new M(this.binarizer.createBinarizer(r))}rotateCounterClockwise45(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new M(this.binarizer.createBinarizer(r))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class U extends _{static getChecksumInstance(){return new U}}U.kind="ChecksumException";class X{constructor(r){this.source=r}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class K{static arraycopy(r,a,l,h,f){for(;f--;)l[h++]=r[a++]}static currentTimeMillis(){return Date.now()}}class z extends _{}z.kind="IndexOutOfBoundsException";class oe extends z{constructor(r=void 0,a=void 0){super(a),this.index=r,this.message=a}}oe.kind="ArrayIndexOutOfBoundsException";class he{static fill(r,a){for(let l=0,h=r.length;l<h;l++)r[l]=a}static fillWithin(r,a,l,h){he.rangeCheck(r.length,a,l);for(let f=a;f<l;f++)r[f]=h}static rangeCheck(r,a,l){if(a>l)throw new I("fromIndex("+a+") > toIndex("+l+")");if(a<0)throw new oe(a);if(l>r)throw new oe(l)}static asList(...r){return r}static create(r,a,l){return Array.from({length:r}).map(f=>Array.from({length:a}).fill(l))}static createInt32Array(r,a,l){return Array.from({length:r}).map(f=>Int32Array.from({length:a}).fill(l))}static equals(r,a){if(!r||!a||!r.length||!a.length||r.length!==a.length)return!1;for(let l=0,h=r.length;l<h;l++)if(r[l]!==a[l])return!1;return!0}static hashCode(r){if(r===null)return 0;let a=1;for(const l of r)a=31*a+l;return a}static fillUint8Array(r,a){for(let l=0;l!==r.length;l++)r[l]=a}static copyOf(r,a){return r.slice(0,a)}static copyOfUint8Array(r,a){if(r.length<=a){const l=new Uint8Array(a);return l.set(r),l}return r.slice(0,a)}static copyOfRange(r,a,l){const h=l-a,f=new Int32Array(h);return K.arraycopy(r,a,f,0,h),f}static binarySearch(r,a,l){l===void 0&&(l=he.numberComparator);let h=0,f=r.length-1;for(;h<=f;){const m=f+h>>1,x=l(a,r[m]);if(x>0)h=m+1;else if(x<0)f=m-1;else return m}return-h-1}static numberComparator(r,a){return r-a}}class ee{static numberOfTrailingZeros(r){let a;if(r===0)return 32;let l=31;return a=r<<16,a!==0&&(l-=16,r=a),a=r<<8,a!==0&&(l-=8,r=a),a=r<<4,a!==0&&(l-=4,r=a),a=r<<2,a!==0&&(l-=2,r=a),l-(r<<1>>>31)}static numberOfLeadingZeros(r){if(r===0)return 32;let a=1;return r>>>16||(a+=16,r<<=16),r>>>24||(a+=8,r<<=8),r>>>28||(a+=4,r<<=4),r>>>30||(a+=2,r<<=2),a-=r>>>31,a}static toHexString(r){return r.toString(16)}static toBinaryString(r){return String(parseInt(String(r),2))}static bitCount(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),r=r+(r>>>4)&252645135,r=r+(r>>>8),r=r+(r>>>16),r&63}static truncDivision(r,a){return Math.trunc(r/a)}static parseInt(r,a=void 0){return parseInt(r,a)}}ee.MIN_VALUE_32_BITS=-2147483648,ee.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ae{constructor(r,a){r===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=r,a==null?this.bits=ae.makeArray(r):this.bits=a)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(r){if(r>this.bits.length*32){const a=ae.makeArray(r);K.arraycopy(this.bits,0,a,0,this.bits.length),this.bits=a}}get(r){return(this.bits[Math.floor(r/32)]&1<<(r&31))!==0}set(r){this.bits[Math.floor(r/32)]|=1<<(r&31)}flip(r){this.bits[Math.floor(r/32)]^=1<<(r&31)}getNextSet(r){const a=this.size;if(r>=a)return a;const l=this.bits;let h=Math.floor(r/32),f=l[h];f&=~((1<<(r&31))-1);const m=l.length;for(;f===0;){if(++h===m)return a;f=l[h]}const x=h*32+ee.numberOfTrailingZeros(f);return x>a?a:x}getNextUnset(r){const a=this.size;if(r>=a)return a;const l=this.bits;let h=Math.floor(r/32),f=~l[h];f&=~((1<<(r&31))-1);const m=l.length;for(;f===0;){if(++h===m)return a;f=~l[h]}const x=h*32+ee.numberOfTrailingZeros(f);return x>a?a:x}setBulk(r,a){this.bits[Math.floor(r/32)]=a}setRange(r,a){if(a<r||r<0||a>this.size)throw new I;if(a===r)return;a--;const l=Math.floor(r/32),h=Math.floor(a/32),f=this.bits;for(let m=l;m<=h;m++){const x=m>l?0:r&31,C=(2<<(m<h?31:a&31))-(1<<x);f[m]|=C}}clear(){const r=this.bits.length,a=this.bits;for(let l=0;l<r;l++)a[l]=0}isRange(r,a,l){if(a<r||r<0||a>this.size)throw new I;if(a===r)return!0;a--;const h=Math.floor(r/32),f=Math.floor(a/32),m=this.bits;for(let x=h;x<=f;x++){const w=x>h?0:r&31,R=(2<<(x<f?31:a&31))-(1<<w)&4294967295;if((m[x]&R)!==(l?R:0))return!1}return!0}appendBit(r){this.ensureCapacity(this.size+1),r&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(r,a){if(a<0||a>32)throw new I("Num bits must be between 0 and 32");this.ensureCapacity(this.size+a);for(let l=a;l>0;l--)this.appendBit((r>>l-1&1)===1)}appendBitArray(r){const a=r.size;this.ensureCapacity(this.size+a);for(let l=0;l<a;l++)this.appendBit(r.get(l))}xor(r){if(this.size!==r.size)throw new I("Sizes don't match");const a=this.bits;for(let l=0,h=a.length;l<h;l++)a[l]^=r.bits[l]}toBytes(r,a,l,h){for(let f=0;f<h;f++){let m=0;for(let x=0;x<8;x++)this.get(r)&&(m|=1<<7-x),r++;a[l+f]=m}}getBitArray(){return this.bits}reverse(){const r=new Int32Array(this.bits.length),a=Math.floor((this.size-1)/32),l=a+1,h=this.bits;for(let f=0;f<l;f++){let m=h[f];m=m>>1&1431655765|(m&1431655765)<<1,m=m>>2&858993459|(m&858993459)<<2,m=m>>4&252645135|(m&252645135)<<4,m=m>>8&16711935|(m&16711935)<<8,m=m>>16&65535|(m&65535)<<16,r[a-f]=m}if(this.size!==l*32){const f=l*32-this.size;let m=r[0]>>>f;for(let x=1;x<l;x++){const w=r[x];m|=w<<32-f,r[x-1]=m,m=w>>>f}r[l-1]=m}this.bits=r}static makeArray(r){return new Int32Array(Math.floor((r+31)/32))}equals(r){if(!(r instanceof ae))return!1;const a=r;return this.size===a.size&&he.equals(this.bits,a.bits)}hashCode(){return 31*this.size+he.hashCode(this.bits)}toString(){let r="";for(let a=0,l=this.size;a<l;a++)(a&7)===0&&(r+=" "),r+=this.get(a)?"X":".";return r}clone(){return new ae(this.size,this.bits.slice())}}var Ve;(function(L){L[L.OTHER=0]="OTHER",L[L.PURE_BARCODE=1]="PURE_BARCODE",L[L.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",L[L.TRY_HARDER=3]="TRY_HARDER",L[L.CHARACTER_SET=4]="CHARACTER_SET",L[L.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",L[L.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",L[L.ASSUME_GS1=7]="ASSUME_GS1",L[L.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",L[L.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",L[L.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Ve||(Ve={}));var Ne=Ve;class j extends _{static getFormatInstance(){return new j}}j.kind="FormatException";var G;(function(L){L[L.Cp437=0]="Cp437",L[L.ISO8859_1=1]="ISO8859_1",L[L.ISO8859_2=2]="ISO8859_2",L[L.ISO8859_3=3]="ISO8859_3",L[L.ISO8859_4=4]="ISO8859_4",L[L.ISO8859_5=5]="ISO8859_5",L[L.ISO8859_6=6]="ISO8859_6",L[L.ISO8859_7=7]="ISO8859_7",L[L.ISO8859_8=8]="ISO8859_8",L[L.ISO8859_9=9]="ISO8859_9",L[L.ISO8859_10=10]="ISO8859_10",L[L.ISO8859_11=11]="ISO8859_11",L[L.ISO8859_13=12]="ISO8859_13",L[L.ISO8859_14=13]="ISO8859_14",L[L.ISO8859_15=14]="ISO8859_15",L[L.ISO8859_16=15]="ISO8859_16",L[L.SJIS=16]="SJIS",L[L.Cp1250=17]="Cp1250",L[L.Cp1251=18]="Cp1251",L[L.Cp1252=19]="Cp1252",L[L.Cp1256=20]="Cp1256",L[L.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",L[L.UTF8=22]="UTF8",L[L.ASCII=23]="ASCII",L[L.Big5=24]="Big5",L[L.GB18030=25]="GB18030",L[L.EUC_KR=26]="EUC_KR"})(G||(G={}));class V{constructor(r,a,l,...h){this.valueIdentifier=r,this.name=l,typeof a=="number"?this.values=Int32Array.from([a]):this.values=a,this.otherEncodingNames=h,V.VALUE_IDENTIFIER_TO_ECI.set(r,this),V.NAME_TO_ECI.set(l,this);const f=this.values;for(let m=0,x=f.length;m!==x;m++){const w=f[m];V.VALUES_TO_ECI.set(w,this)}for(const m of h)V.NAME_TO_ECI.set(m,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(r){if(r<0||r>=900)throw new j("incorect value");const a=V.VALUES_TO_ECI.get(r);if(a===void 0)throw new j("incorect value");return a}static getCharacterSetECIByName(r){const a=V.NAME_TO_ECI.get(r);if(a===void 0)throw new j("incorect value");return a}equals(r){if(!(r instanceof V))return!1;const a=r;return this.getName()===a.getName()}}V.VALUE_IDENTIFIER_TO_ECI=new Map,V.VALUES_TO_ECI=new Map,V.NAME_TO_ECI=new Map,V.Cp437=new V(G.Cp437,Int32Array.from([0,2]),"Cp437"),V.ISO8859_1=new V(G.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),V.ISO8859_2=new V(G.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),V.ISO8859_3=new V(G.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),V.ISO8859_4=new V(G.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),V.ISO8859_5=new V(G.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),V.ISO8859_6=new V(G.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),V.ISO8859_7=new V(G.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),V.ISO8859_8=new V(G.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),V.ISO8859_9=new V(G.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),V.ISO8859_10=new V(G.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),V.ISO8859_11=new V(G.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),V.ISO8859_13=new V(G.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),V.ISO8859_14=new V(G.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),V.ISO8859_15=new V(G.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),V.ISO8859_16=new V(G.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),V.SJIS=new V(G.SJIS,20,"SJIS","Shift_JIS"),V.Cp1250=new V(G.Cp1250,21,"Cp1250","windows-1250"),V.Cp1251=new V(G.Cp1251,22,"Cp1251","windows-1251"),V.Cp1252=new V(G.Cp1252,23,"Cp1252","windows-1252"),V.Cp1256=new V(G.Cp1256,24,"Cp1256","windows-1256"),V.UnicodeBigUnmarked=new V(G.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),V.UTF8=new V(G.UTF8,26,"UTF8","UTF-8"),V.ASCII=new V(G.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),V.Big5=new V(G.Big5,28,"Big5"),V.GB18030=new V(G.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),V.EUC_KR=new V(G.EUC_KR,30,"EUC_KR","EUC-KR");class te extends _{}te.kind="UnsupportedOperationException";class W{static decode(r,a){const l=this.encodingName(a);return this.customDecoder?this.customDecoder(r,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(r,l):new TextDecoder(l).decode(r)}static shouldDecodeOnFallback(r){return!W.isBrowser()&&r==="ISO-8859-1"}static encode(r,a){const l=this.encodingName(a);return this.customEncoder?this.customEncoder(r,l):typeof TextEncoder>"u"?this.encodeFallback(r):new TextEncoder().encode(r)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(r){return typeof r=="string"?r:r.getName()}static encodingCharacterSet(r){return r instanceof V?r:V.getCharacterSetECIByName(r)}static decodeFallback(r,a){const l=this.encodingCharacterSet(a);if(W.isDecodeFallbackSupported(l)){let h="";for(let f=0,m=r.length;f<m;f++){let x=r[f].toString(16);x.length<2&&(x="0"+x),h+="%"+x}return decodeURIComponent(h)}if(l.equals(V.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(r.buffer));throw new te(`Encoding ${this.encodingName(a)} not supported by fallback.`)}static isDecodeFallbackSupported(r){return r.equals(V.UTF8)||r.equals(V.ISO8859_1)||r.equals(V.ASCII)}static encodeFallback(r){const l=btoa(unescape(encodeURIComponent(r))).split(""),h=[];for(let f=0;f<l.length;f++)h.push(l[f].charCodeAt(0));return new Uint8Array(h)}}class J{static castAsNonUtf8Char(r,a=null){const l=a?a.getName():this.ISO88591;return W.decode(new Uint8Array([r]),l)}static guessEncoding(r,a){if(a!=null&&a.get(Ne.CHARACTER_SET)!==void 0)return a.get(Ne.CHARACTER_SET).toString();const l=r.length;let h=!0,f=!0,m=!0,x=0,w=0,C=0,R=0,P=0,B=0,q=0,$=0,ne=0,ue=0,Ee=0;const Pe=r.length>3&&r[0]===239&&r[1]===187&&r[2]===191;for(let Me=0;Me<l&&(h||f||m);Me++){const Oe=r[Me]&255;m&&(x>0?(Oe&128)===0?m=!1:x--:(Oe&128)!==0&&((Oe&64)===0?m=!1:(x++,(Oe&32)===0?w++:(x++,(Oe&16)===0?C++:(x++,(Oe&8)===0?R++:m=!1))))),h&&(Oe>127&&Oe<160?h=!1:Oe>159&&(Oe<192||Oe===215||Oe===247)&&Ee++),f&&(P>0?Oe<64||Oe===127||Oe>252?f=!1:P--:Oe===128||Oe===160||Oe>239?f=!1:Oe>160&&Oe<224?(B++,$=0,q++,q>ne&&(ne=q)):Oe>127?(P++,q=0,$++,$>ue&&(ue=$)):(q=0,$=0))}return m&&x>0&&(m=!1),f&&P>0&&(f=!1),m&&(Pe||w+C+R>0)?J.UTF8:f&&(J.ASSUME_SHIFT_JIS||ne>=3||ue>=3)?J.SHIFT_JIS:h&&f?ne===2&&B===2||Ee*10>=l?J.SHIFT_JIS:J.ISO88591:h?J.ISO88591:f?J.SHIFT_JIS:m?J.UTF8:J.PLATFORM_DEFAULT_ENCODING}static format(r,...a){let l=-1;function h(m,x,w,C,R,P){if(m==="%%")return"%";if(a[++l]===void 0)return;m=C?parseInt(C.substr(1)):void 0;let B=R?parseInt(R.substr(1)):void 0,q;switch(P){case"s":q=a[l];break;case"c":q=a[l][0];break;case"f":q=parseFloat(a[l]).toFixed(m);break;case"p":q=parseFloat(a[l]).toPrecision(m);break;case"e":q=parseFloat(a[l]).toExponential(m);break;case"x":q=parseInt(a[l]).toString(B||16);break;case"d":q=parseFloat(parseInt(a[l],B||10).toPrecision(m)).toFixed(0);break}q=typeof q=="object"?JSON.stringify(q):(+q).toString(B);let $=parseInt(w),ne=w&&w[0]+""=="0"?"0":" ";for(;q.length<$;)q=x!==void 0?q+ne:ne+q;return q}let f=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(f,h)}static getBytes(r,a){return W.encode(r,a)}static getCharCode(r,a=0){return r.charCodeAt(a)}static getCharAt(r){return String.fromCharCode(r)}}J.SHIFT_JIS=V.SJIS.getName(),J.GB2312="GB2312",J.ISO88591=V.ISO8859_1.getName(),J.EUC_JP="EUC_JP",J.UTF8=V.UTF8.getName(),J.PLATFORM_DEFAULT_ENCODING=J.UTF8,J.ASSUME_SHIFT_JIS=!1;class Y{constructor(r=""){this.value=r}enableDecoding(r){return this.encoding=r,this}append(r){return typeof r=="string"?this.value+=r.toString():this.encoding?this.value+=J.castAsNonUtf8Char(r,this.encoding):this.value+=String.fromCharCode(r),this}appendChars(r,a,l){for(let h=a;a<a+l;h++)this.append(r[h]);return this}length(){return this.value.length}charAt(r){return this.value.charAt(r)}deleteCharAt(r){this.value=this.value.substr(0,r)+this.value.substring(r+1)}setCharAt(r,a){this.value=this.value.substr(0,r)+a+this.value.substr(r+1)}substring(r,a){return this.value.substring(r,a)}setLengthToZero(){this.value=""}toString(){return this.value}insert(r,a){this.value=this.value.substr(0,r)+a+this.value.substr(r+a.length)}}class et{constructor(r,a,l,h){if(this.width=r,this.height=a,this.rowSize=l,this.bits=h,a==null&&(a=r),this.height=a,r<1||a<1)throw new I("Both dimensions must be greater than 0");l==null&&(l=Math.floor((r+31)/32)),this.rowSize=l,h==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(r){const a=r.length,l=r[0].length,h=new et(l,a);for(let f=0;f<a;f++){const m=r[f];for(let x=0;x<l;x++)m[x]&&h.set(x,f)}return h}static parseFromString(r,a,l){if(r===null)throw new I("stringRepresentation cannot be null");const h=new Array(r.length);let f=0,m=0,x=-1,w=0,C=0;for(;C<r.length;)if(r.charAt(C)===`
`||r.charAt(C)==="\r"){if(f>m){if(x===-1)x=f-m;else if(f-m!==x)throw new I("row lengths do not match");m=f,w++}C++}else if(r.substring(C,C+a.length)===a)C+=a.length,h[f]=!0,f++;else if(r.substring(C,C+l.length)===l)C+=l.length,h[f]=!1,f++;else throw new I("illegal character encountered: "+r.substring(C));if(f>m){if(x===-1)x=f-m;else if(f-m!==x)throw new I("row lengths do not match");w++}const R=new et(x,w);for(let P=0;P<f;P++)h[P]&&R.set(Math.floor(P%x),Math.floor(P/x));return R}get(r,a){const l=a*this.rowSize+Math.floor(r/32);return(this.bits[l]>>>(r&31)&1)!==0}set(r,a){const l=a*this.rowSize+Math.floor(r/32);this.bits[l]|=1<<(r&31)&4294967295}unset(r,a){const l=a*this.rowSize+Math.floor(r/32);this.bits[l]&=~(1<<(r&31)&4294967295)}flip(r,a){const l=a*this.rowSize+Math.floor(r/32);this.bits[l]^=1<<(r&31)&4294967295}xor(r){if(this.width!==r.getWidth()||this.height!==r.getHeight()||this.rowSize!==r.getRowSize())throw new I("input matrix dimensions do not match");const a=new ae(Math.floor(this.width/32)+1),l=this.rowSize,h=this.bits;for(let f=0,m=this.height;f<m;f++){const x=f*l,w=r.getRow(f,a).getBitArray();for(let C=0;C<l;C++)h[x+C]^=w[C]}}clear(){const r=this.bits,a=r.length;for(let l=0;l<a;l++)r[l]=0}setRegion(r,a,l,h){if(a<0||r<0)throw new I("Left and top must be nonnegative");if(h<1||l<1)throw new I("Height and width must be at least 1");const f=r+l,m=a+h;if(m>this.height||f>this.width)throw new I("The region must fit inside the matrix");const x=this.rowSize,w=this.bits;for(let C=a;C<m;C++){const R=C*x;for(let P=r;P<f;P++)w[R+Math.floor(P/32)]|=1<<(P&31)&4294967295}}getRow(r,a){a==null||a.getSize()<this.width?a=new ae(this.width):a.clear();const l=this.rowSize,h=this.bits,f=r*l;for(let m=0;m<l;m++)a.setBulk(m*32,h[f+m]);return a}setRow(r,a){K.arraycopy(a.getBitArray(),0,this.bits,r*this.rowSize,this.rowSize)}rotate180(){const r=this.getWidth(),a=this.getHeight();let l=new ae(r),h=new ae(r);for(let f=0,m=Math.floor((a+1)/2);f<m;f++)l=this.getRow(f,l),h=this.getRow(a-1-f,h),l.reverse(),h.reverse(),this.setRow(f,h),this.setRow(a-1-f,l)}getEnclosingRectangle(){const r=this.width,a=this.height,l=this.rowSize,h=this.bits;let f=r,m=a,x=-1,w=-1;for(let C=0;C<a;C++)for(let R=0;R<l;R++){const P=h[C*l+R];if(P!==0){if(C<m&&(m=C),C>w&&(w=C),R*32<f){let B=0;for(;(P<<31-B&4294967295)===0;)B++;R*32+B<f&&(f=R*32+B)}if(R*32+31>x){let B=31;for(;!(P>>>B);)B--;R*32+B>x&&(x=R*32+B)}}}return x<f||w<m?null:Int32Array.from([f,m,x-f+1,w-m+1])}getTopLeftOnBit(){const r=this.rowSize,a=this.bits;let l=0;for(;l<a.length&&a[l]===0;)l++;if(l===a.length)return null;const h=l/r;let f=l%r*32;const m=a[l];let x=0;for(;(m<<31-x&4294967295)===0;)x++;return f+=x,Int32Array.from([f,h])}getBottomRightOnBit(){const r=this.rowSize,a=this.bits;let l=a.length-1;for(;l>=0&&a[l]===0;)l--;if(l<0)return null;const h=Math.floor(l/r);let f=Math.floor(l%r)*32;const m=a[l];let x=31;for(;!(m>>>x);)x--;return f+=x,Int32Array.from([f,h])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(r){if(!(r instanceof et))return!1;const a=r;return this.width===a.width&&this.height===a.height&&this.rowSize===a.rowSize&&he.equals(this.bits,a.bits)}hashCode(){let r=this.width;return r=31*r+this.width,r=31*r+this.height,r=31*r+this.rowSize,r=31*r+he.hashCode(this.bits),r}toString(r="X ",a="  ",l=`
`){return this.buildToString(r,a,l)}buildToString(r,a,l){let h=new Y;for(let f=0,m=this.height;f<m;f++){for(let x=0,w=this.width;x<w;x++)h.append(this.get(x,f)?r:a);h.append(l)}return h.toString()}clone(){return new et(this.width,this.height,this.rowSize,this.bits.slice())}}class me extends _{static getNotFoundInstance(){return new me}}me.kind="NotFoundException";class pe extends X{constructor(r){super(r),this.luminances=pe.EMPTY,this.buckets=new Int32Array(pe.LUMINANCE_BUCKETS)}getBlackRow(r,a){const l=this.getLuminanceSource(),h=l.getWidth();a==null||a.getSize()<h?a=new ae(h):a.clear(),this.initArrays(h);const f=l.getRow(r,this.luminances),m=this.buckets;for(let w=0;w<h;w++)m[(f[w]&255)>>pe.LUMINANCE_SHIFT]++;const x=pe.estimateBlackPoint(m);if(h<3)for(let w=0;w<h;w++)(f[w]&255)<x&&a.set(w);else{let w=f[0]&255,C=f[1]&255;for(let R=1;R<h-1;R++){const P=f[R+1]&255;(C*4-w-P)/2<x&&a.set(R),w=C,C=P}}return a}getBlackMatrix(){const r=this.getLuminanceSource(),a=r.getWidth(),l=r.getHeight(),h=new et(a,l);this.initArrays(a);const f=this.buckets;for(let w=1;w<5;w++){const C=Math.floor(l*w/5),R=r.getRow(C,this.luminances),P=Math.floor(a*4/5);for(let B=Math.floor(a/5);B<P;B++){const q=R[B]&255;f[q>>pe.LUMINANCE_SHIFT]++}}const m=pe.estimateBlackPoint(f),x=r.getMatrix();for(let w=0;w<l;w++){const C=w*a;for(let R=0;R<a;R++)(x[C+R]&255)<m&&h.set(R,w)}return h}createBinarizer(r){return new pe(r)}initArrays(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));const a=this.buckets;for(let l=0;l<pe.LUMINANCE_BUCKETS;l++)a[l]=0}static estimateBlackPoint(r){const a=r.length;let l=0,h=0,f=0;for(let R=0;R<a;R++)r[R]>f&&(h=R,f=r[R]),r[R]>l&&(l=r[R]);let m=0,x=0;for(let R=0;R<a;R++){const P=R-h,B=r[R]*P*P;B>x&&(m=R,x=B)}if(h>m){const R=h;h=m,m=R}if(m-h<=a/16)throw new me;let w=m-1,C=-1;for(let R=m-1;R>h;R--){const P=R-h,B=P*P*(m-R)*(l-r[R]);B>C&&(w=R,C=B)}return w<<pe.LUMINANCE_SHIFT}}pe.LUMINANCE_BITS=5,pe.LUMINANCE_SHIFT=8-pe.LUMINANCE_BITS,pe.LUMINANCE_BUCKETS=1<<pe.LUMINANCE_BITS,pe.EMPTY=Uint8ClampedArray.from([0]);class be extends pe{constructor(r){super(r),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const r=this.getLuminanceSource(),a=r.getWidth(),l=r.getHeight();if(a>=be.MINIMUM_DIMENSION&&l>=be.MINIMUM_DIMENSION){const h=r.getMatrix();let f=a>>be.BLOCK_SIZE_POWER;(a&be.BLOCK_SIZE_MASK)!==0&&f++;let m=l>>be.BLOCK_SIZE_POWER;(l&be.BLOCK_SIZE_MASK)!==0&&m++;const x=be.calculateBlackPoints(h,f,m,a,l),w=new et(a,l);be.calculateThresholdForBlock(h,f,m,a,l,x,w),this.matrix=w}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(r){return new be(r)}static calculateThresholdForBlock(r,a,l,h,f,m,x){const w=f-be.BLOCK_SIZE,C=h-be.BLOCK_SIZE;for(let R=0;R<l;R++){let P=R<<be.BLOCK_SIZE_POWER;P>w&&(P=w);const B=be.cap(R,2,l-3);for(let q=0;q<a;q++){let $=q<<be.BLOCK_SIZE_POWER;$>C&&($=C);const ne=be.cap(q,2,a-3);let ue=0;for(let Pe=-2;Pe<=2;Pe++){const Me=m[B+Pe];ue+=Me[ne-2]+Me[ne-1]+Me[ne]+Me[ne+1]+Me[ne+2]}const Ee=ue/25;be.thresholdBlock(r,$,P,Ee,h,x)}}}static cap(r,a,l){return r<a?a:r>l?l:r}static thresholdBlock(r,a,l,h,f,m){for(let x=0,w=l*f+a;x<be.BLOCK_SIZE;x++,w+=f)for(let C=0;C<be.BLOCK_SIZE;C++)(r[w+C]&255)<=h&&m.set(a+C,l+x)}static calculateBlackPoints(r,a,l,h,f){const m=f-be.BLOCK_SIZE,x=h-be.BLOCK_SIZE,w=new Array(l);for(let C=0;C<l;C++){w[C]=new Int32Array(a);let R=C<<be.BLOCK_SIZE_POWER;R>m&&(R=m);for(let P=0;P<a;P++){let B=P<<be.BLOCK_SIZE_POWER;B>x&&(B=x);let q=0,$=255,ne=0;for(let Ee=0,Pe=R*h+B;Ee<be.BLOCK_SIZE;Ee++,Pe+=h){for(let Me=0;Me<be.BLOCK_SIZE;Me++){const Oe=r[Pe+Me]&255;q+=Oe,Oe<$&&($=Oe),Oe>ne&&(ne=Oe)}if(ne-$>be.MIN_DYNAMIC_RANGE)for(Ee++,Pe+=h;Ee<be.BLOCK_SIZE;Ee++,Pe+=h)for(let Me=0;Me<be.BLOCK_SIZE;Me++)q+=r[Pe+Me]&255}let ue=q>>be.BLOCK_SIZE_POWER*2;if(ne-$<=be.MIN_DYNAMIC_RANGE&&(ue=$/2,C>0&&P>0)){const Ee=(w[C-1][P]+2*w[C][P-1]+w[C-1][P-1])/4;$<Ee&&(ue=Ee)}w[C][P]=ue}}return w}}be.BLOCK_SIZE_POWER=3,be.BLOCK_SIZE=1<<be.BLOCK_SIZE_POWER,be.BLOCK_SIZE_MASK=be.BLOCK_SIZE-1,be.MINIMUM_DIMENSION=be.BLOCK_SIZE*5,be.MIN_DYNAMIC_RANGE=24;class qe{constructor(r,a){this.width=r,this.height=a}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(r,a,l,h){throw new te("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new te("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new te("This luminance source does not support rotation by 45 degrees.")}toString(){const r=new Uint8ClampedArray(this.width);let a=new Y;for(let l=0;l<this.height;l++){const h=this.getRow(l,r);for(let f=0;f<this.width;f++){const m=h[f]&255;let x;m<64?x="#":m<128?x="+":m<192?x=".":x=" ",a.append(x)}a.append(`
`)}return a.toString()}}class ot extends qe{constructor(r){super(r.getWidth(),r.getHeight()),this.delegate=r}getRow(r,a){const l=this.delegate.getRow(r,a),h=this.getWidth();for(let f=0;f<h;f++)l[f]=255-(l[f]&255);return l}getMatrix(){const r=this.delegate.getMatrix(),a=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(a);for(let h=0;h<a;h++)l[h]=255-(r[h]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(r,a,l,h){return new ot(this.delegate.crop(r,a,l,h))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ot(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ot(this.delegate.rotateCounterClockwise45())}}class dt extends qe{constructor(r){super(r.width,r.height),this.canvas=r,this.tempCanvasElement=null,this.buffer=dt.makeBufferFromCanvasImageData(r)}static makeBufferFromCanvasImageData(r){const a=r.getContext("2d").getImageData(0,0,r.width,r.height);return dt.toGrayscaleBuffer(a.data,r.width,r.height)}static toGrayscaleBuffer(r,a,l){const h=new Uint8ClampedArray(a*l);for(let f=0,m=0,x=r.length;f<x;f+=4,m++){let w;if(r[f+3]===0)w=255;else{const R=r[f],P=r[f+1],B=r[f+2];w=306*R+601*P+117*B+512>>10}h[m]=w}return h}getRow(r,a){if(r<0||r>=this.getHeight())throw new I("Requested row is outside the image: "+r);const l=this.getWidth(),h=r*l;return a===null?a=this.buffer.slice(h,h+l):(a.length<l&&(a=new Uint8ClampedArray(l)),a.set(this.buffer.slice(h,h+l))),a}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(r,a,l,h){return super.crop(r,a,l,h),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement}rotate(r){const a=this.getTempCanvasElement(),l=a.getContext("2d"),h=r*dt.DEGREE_TO_RADIANS,f=this.canvas.width,m=this.canvas.height,x=Math.ceil(Math.abs(Math.cos(h))*f+Math.abs(Math.sin(h))*m),w=Math.ceil(Math.abs(Math.sin(h))*f+Math.abs(Math.cos(h))*m);return a.width=x,a.height=w,l.translate(x/2,w/2),l.rotate(h),l.drawImage(this.canvas,f/-2,m/-2),this.buffer=dt.makeBufferFromCanvasImageData(a),this}invert(){return new ot(this)}}dt.DEGREE_TO_RADIANS=Math.PI/180;class ie{constructor(r,a,l){this.deviceId=r,this.label=a,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Ae=(globalThis||Dh||self||window||void 0)&&(globalThis||Dh||self||window||void 0).__awaiter||function(L,r,a,l){function h(f){return f instanceof a?f:new a(function(m){m(f)})}return new(a||(a=Promise))(function(f,m){function x(R){try{C(l.next(R))}catch(P){m(P)}}function w(R){try{C(l.throw(R))}catch(P){m(P)}}function C(R){R.done?f(R.value):h(R.value).then(x,w)}C((l=l.apply(L,r||[])).next())})};class ke{constructor(r,a=500,l){this.reader=r,this.timeBetweenScansMillis=a,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(r){this._timeBetweenDecodingAttempts=r<0?0:r}set hints(r){this._hints=r||null}get hints(){return this._hints}listVideoInputDevices(){return Ae(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const r=yield navigator.mediaDevices.enumerateDevices(),a=[];for(const l of r){const h=l.kind==="video"?"videoinput":l.kind;if(h!=="videoinput")continue;const f=l.deviceId||l.id,m=l.label||`Video device ${a.length+1}`,x=l.groupId,w={deviceId:f,label:m,kind:h,groupId:x};a.push(w)}return a})}getVideoInputDevices(){return Ae(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(a=>new ie(a.deviceId,a.label))})}findDeviceById(r){return Ae(this,void 0,void 0,function*(){const a=yield this.listVideoInputDevices();return a?a.find(l=>l.deviceId===r):null})}decodeFromInputVideoDevice(r,a){return Ae(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(r,a)})}decodeOnceFromVideoDevice(r,a){return Ae(this,void 0,void 0,function*(){this.reset();let l;r?l={deviceId:{exact:r}}:l={facingMode:"environment"};const h={video:l};return yield this.decodeOnceFromConstraints(h,a)})}decodeOnceFromConstraints(r,a){return Ae(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeOnceFromStream(l,a)})}decodeOnceFromStream(r,a){return Ae(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(r,a);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(r,a,l){return Ae(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(r,a,l)})}decodeFromVideoDevice(r,a,l){return Ae(this,void 0,void 0,function*(){let h;r?h={deviceId:{exact:r}}:h={facingMode:"environment"};const f={video:h};return yield this.decodeFromConstraints(f,a,l)})}decodeFromConstraints(r,a,l){return Ae(this,void 0,void 0,function*(){const h=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeFromStream(h,a,l)})}decodeFromStream(r,a,l){return Ae(this,void 0,void 0,function*(){this.reset();const h=yield this.attachStreamToVideo(r,a);return yield this.decodeContinuously(h,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(r,a){return Ae(this,void 0,void 0,function*(){const l=this.prepareVideoElement(a);return this.addVideoSource(l,r),this.videoElement=l,this.stream=r,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(r){return new Promise((a,l)=>this.playVideoOnLoad(r,()=>a()))}playVideoOnLoad(r,a){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(r),r.addEventListener("ended",this.videoEndedListener),r.addEventListener("canplay",this.videoCanPlayListener),r.addEventListener("playing",a),this.tryPlayVideo(r)}isVideoPlaying(r){return r.currentTime>0&&!r.paused&&!r.ended&&r.readyState>2}tryPlayVideo(r){return Ae(this,void 0,void 0,function*(){if(this.isVideoPlaying(r)){console.warn("Trying to play video that is already playing.");return}try{yield r.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(r,a){const l=document.getElementById(r);if(!l)throw new S(`element with id '${r}' not found`);if(l.nodeName.toLowerCase()!==a.toLowerCase())throw new S(`element with id '${r}' must be an ${a} element`);return l}decodeFromImage(r,a){if(!r&&!a)throw new S("either imageElement with a src set or an url must be provided");return a&&!r?this.decodeFromImageUrl(a):this.decodeFromImageElement(r)}decodeFromVideo(r,a){if(!r&&!a)throw new S("Either an element with a src set or an URL must be provided");return a&&!r?this.decodeFromVideoUrl(a):this.decodeFromVideoElement(r)}decodeFromVideoContinuously(r,a,l){if(r===void 0&&a===void 0)throw new S("Either an element with a src set or an URL must be provided");return a&&!r?this.decodeFromVideoUrlContinuously(a,l):this.decodeFromVideoElementContinuously(r,l)}decodeFromImageElement(r){if(!r)throw new S("An image element must be provided.");this.reset();const a=this.prepareImageElement(r);this.imageElement=a;let l;return this.isImageLoaded(a)?l=this.decodeOnce(a,!1,!0):l=this._decodeOnLoadImage(a),l}decodeFromVideoElement(r){const a=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideo(a)}decodeFromVideoElementContinuously(r,a){const l=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideoContinuously(l,a)}_decodeFromVideoElementSetup(r){if(!r)throw new S("A video element must be provided.");this.reset();const a=this.prepareVideoElement(r);return this.videoElement=a,a}decodeFromImageUrl(r){if(!r)throw new S("An URL must be provided.");this.reset();const a=this.prepareImageElement();this.imageElement=a;const l=this._decodeOnLoadImage(a);return a.src=r,l}decodeFromVideoUrl(r){if(!r)throw new S("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),l=this.decodeFromVideoElement(a);return a.src=r,l}decodeFromVideoUrlContinuously(r,a){if(!r)throw new S("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),h=this.decodeFromVideoElementContinuously(l,a);return l.src=r,h}_decodeOnLoadImage(r){return new Promise((a,l)=>{this.imageLoadedListener=()=>this.decodeOnce(r,!1,!0).then(a,l),r.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(r){return Ae(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(r),yield this.decodeOnce(r)})}_decodeOnLoadVideoContinuously(r,a){return Ae(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(r),this.decodeContinuously(r,a)})}isImageLoaded(r){return!(!r.complete||r.naturalWidth===0)}prepareImageElement(r){let a;return typeof r>"u"&&(a=document.createElement("img"),a.width=200,a.height=200),typeof r=="string"&&(a=this.getMediaElement(r,"img")),r instanceof HTMLImageElement&&(a=r),a}prepareVideoElement(r){let a;return!r&&typeof document<"u"&&(a=document.createElement("video"),a.width=200,a.height=200),typeof r=="string"&&(a=this.getMediaElement(r,"video")),r instanceof HTMLVideoElement&&(a=r),a.setAttribute("autoplay","true"),a.setAttribute("muted","true"),a.setAttribute("playsinline","true"),a}decodeOnce(r,a=!0,l=!0){this._stopAsyncDecode=!1;const h=(f,m)=>{if(this._stopAsyncDecode){m(new me("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const x=this.decode(r);f(x)}catch(x){const w=a&&x instanceof me,R=(x instanceof U||x instanceof j)&&l;if(w||R)return setTimeout(h,this._timeBetweenDecodingAttempts,f,m);m(x)}};return new Promise((f,m)=>h(f,m))}decodeContinuously(r,a){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const h=this.decode(r);a(h,null),setTimeout(l,this.timeBetweenScansMillis)}catch(h){a(null,h);const f=h instanceof U||h instanceof j,m=h instanceof me;(f||m)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(r){const a=this.createBinaryBitmap(r);return this.decodeBitmap(a)}_isHTMLVideoElement(r){return r.videoWidth!==0}drawFrameOnCanvas(r,a,l){a||(a={sx:0,sy:0,sWidth:r.videoWidth,sHeight:r.videoHeight,dx:0,dy:0,dWidth:r.videoWidth,dHeight:r.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(r,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}drawImageOnCanvas(r,a,l=this.captureCanvasContext){a||(a={sx:0,sy:0,sWidth:r.naturalWidth,sHeight:r.naturalHeight,dx:0,dy:0,dWidth:r.naturalWidth,dHeight:r.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(r,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}createBinaryBitmap(r){this.getCaptureCanvasContext(r),this._isHTMLVideoElement(r)?this.drawFrameOnCanvas(r):this.drawImageOnCanvas(r);const a=this.getCaptureCanvas(r),l=new dt(a),h=new be(l);return new M(h)}getCaptureCanvasContext(r){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(r).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(r){if(!this.captureCanvas){const a=this.createCaptureCanvas(r);this.captureCanvas=a}return this.captureCanvas}decodeBitmap(r){return this.reader.decode(r,this._hints)}createCaptureCanvas(r){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const a=document.createElement("canvas");let l,h;return typeof r<"u"&&(r instanceof HTMLVideoElement?(l=r.videoWidth,h=r.videoHeight):r instanceof HTMLImageElement&&(l=r.naturalWidth||r.width,h=r.naturalHeight||r.height)),a.style.width=l+"px",a.style.height=h+"px",a.width=l,a.height=h,a}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(r=>r.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(r,a){try{r.srcObject=a}catch{r.src=URL.createObjectURL(a)}}cleanVideoSource(r){try{r.srcObject=null}catch{r.src=""}this.videoElement.removeAttribute("src")}}class Ue{constructor(r,a,l=a==null?0:8*a.length,h,f,m=K.currentTimeMillis()){this.text=r,this.rawBytes=a,this.numBits=l,this.resultPoints=h,this.format=f,this.timestamp=m,this.text=r,this.rawBytes=a,l==null?this.numBits=a==null?0:8*a.length:this.numBits=l,this.resultPoints=h,this.format=f,this.resultMetadata=null,m==null?this.timestamp=K.currentTimeMillis():this.timestamp=m}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(r,a){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(r,a)}putAllMetadata(r){r!==null&&(this.resultMetadata===null?this.resultMetadata=r:this.resultMetadata=new Map(r))}addResultPoints(r){const a=this.resultPoints;if(a===null)this.resultPoints=r;else if(r!==null&&r.length>0){const l=new Array(a.length+r.length);K.arraycopy(a,0,l,0,a.length),K.arraycopy(r,0,l,a.length,r.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var tt;(function(L){L[L.AZTEC=0]="AZTEC",L[L.CODABAR=1]="CODABAR",L[L.CODE_39=2]="CODE_39",L[L.CODE_93=3]="CODE_93",L[L.CODE_128=4]="CODE_128",L[L.DATA_MATRIX=5]="DATA_MATRIX",L[L.EAN_8=6]="EAN_8",L[L.EAN_13=7]="EAN_13",L[L.ITF=8]="ITF",L[L.MAXICODE=9]="MAXICODE",L[L.PDF_417=10]="PDF_417",L[L.QR_CODE=11]="QR_CODE",L[L.RSS_14=12]="RSS_14",L[L.RSS_EXPANDED=13]="RSS_EXPANDED",L[L.UPC_A=14]="UPC_A",L[L.UPC_E=15]="UPC_E",L[L.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(tt||(tt={}));var Le=tt,At;(function(L){L[L.OTHER=0]="OTHER",L[L.ORIENTATION=1]="ORIENTATION",L[L.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",L[L.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",L[L.ISSUE_NUMBER=4]="ISSUE_NUMBER",L[L.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",L[L.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",L[L.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",L[L.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",L[L.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",L[L.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(At||(At={}));var _t=At;class Nt{constructor(r,a,l,h,f=-1,m=-1){this.rawBytes=r,this.text=a,this.byteSegments=l,this.ecLevel=h,this.structuredAppendSequenceNumber=f,this.structuredAppendParity=m,this.numBits=r==null?0:8*r.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(r){this.numBits=r}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(r){this.errorsCorrected=r}getErasures(){return this.erasures}setErasures(r){this.erasures=r}getOther(){return this.other}setOther(r){this.other=r}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Li{exp(r){return this.expTable[r]}log(r){if(r===0)throw new I;return this.logTable[r]}static addOrSubtract(r,a){return r^a}}class Sn{constructor(r,a){if(a.length===0)throw new I;this.field=r;const l=a.length;if(l>1&&a[0]===0){let h=1;for(;h<l&&a[h]===0;)h++;h===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-h),K.arraycopy(a,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);const a=this.coefficients;let l;if(r===1){l=0;for(let m=0,x=a.length;m!==x;m++){const w=a[m];l=Li.addOrSubtract(l,w)}return l}l=a[0];const h=a.length,f=this.field;for(let m=1;m<h;m++)l=Li.addOrSubtract(f.multiply(r,l),a[m]);return l}addOrSubtract(r){if(!this.field.equals(r.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero())return r;if(r.isZero())return this;let a=this.coefficients,l=r.coefficients;if(a.length>l.length){const m=a;a=l,l=m}let h=new Int32Array(l.length);const f=l.length-a.length;K.arraycopy(l,0,h,0,f);for(let m=f;m<l.length;m++)h[m]=Li.addOrSubtract(a[m-f],l[m]);return new Sn(this.field,h)}multiply(r){if(!this.field.equals(r.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero()||r.isZero())return this.field.getZero();const a=this.coefficients,l=a.length,h=r.coefficients,f=h.length,m=new Int32Array(l+f-1),x=this.field;for(let w=0;w<l;w++){const C=a[w];for(let R=0;R<f;R++)m[w+R]=Li.addOrSubtract(m[w+R],x.multiply(C,h[R]))}return new Sn(x,m)}multiplyScalar(r){if(r===0)return this.field.getZero();if(r===1)return this;const a=this.coefficients.length,l=this.field,h=new Int32Array(a),f=this.coefficients;for(let m=0;m<a;m++)h[m]=l.multiply(f[m],r);return new Sn(l,h)}multiplyByMonomial(r,a){if(r<0)throw new I;if(a===0)return this.field.getZero();const l=this.coefficients,h=l.length,f=new Int32Array(h+r),m=this.field;for(let x=0;x<h;x++)f[x]=m.multiply(l[x],a);return new Sn(m,f)}divide(r){if(!this.field.equals(r.field))throw new I("GenericGFPolys do not have same GenericGF field");if(r.isZero())throw new I("Divide by 0");const a=this.field;let l=a.getZero(),h=this;const f=r.getCoefficient(r.getDegree()),m=a.inverse(f);for(;h.getDegree()>=r.getDegree()&&!h.isZero();){const x=h.getDegree()-r.getDegree(),w=a.multiply(h.getCoefficient(h.getDegree()),m),C=r.multiplyByMonomial(x,w),R=a.buildMonomial(x,w);l=l.addOrSubtract(R),h=h.addOrSubtract(C)}return[l,h]}toString(){let r="";for(let a=this.getDegree();a>=0;a--){let l=this.getCoefficient(a);if(l!==0){if(l<0?(r+=" - ",l=-l):r.length>0&&(r+=" + "),a===0||l!==1){const h=this.field.log(l);h===0?r+="1":h===1?r+="a":(r+="a^",r+=h)}a!==0&&(a===1?r+="x":(r+="x^",r+=a))}}return r}}class xr extends _{}xr.kind="ArithmeticException";class Et extends Li{constructor(r,a,l){super(),this.primitive=r,this.size=a,this.generatorBase=l;const h=new Int32Array(a);let f=1;for(let x=0;x<a;x++)h[x]=f,f*=2,f>=a&&(f^=r,f&=a-1);this.expTable=h;const m=new Int32Array(a);for(let x=0;x<a-1;x++)m[h[x]]=x;this.logTable=m,this.zero=new Sn(this,Int32Array.from([0])),this.one=new Sn(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,a){if(r<0)throw new I;if(a===0)return this.zero;const l=new Int32Array(r+1);return l[0]=a,new Sn(this,l)}inverse(r){if(r===0)throw new xr;return this.expTable[this.size-this.logTable[r]-1]}multiply(r,a){return r===0||a===0?0:this.expTable[(this.logTable[r]+this.logTable[a])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+ee.toHexString(this.primitive)+","+this.size+")"}equals(r){return r===this}}Et.AZTEC_DATA_12=new Et(4201,4096,1),Et.AZTEC_DATA_10=new Et(1033,1024,1),Et.AZTEC_DATA_6=new Et(67,64,1),Et.AZTEC_PARAM=new Et(19,16,1),Et.QR_CODE_FIELD_256=new Et(285,256,0),Et.DATA_MATRIX_FIELD_256=new Et(301,256,1),Et.AZTEC_DATA_8=Et.DATA_MATRIX_FIELD_256,Et.MAXICODE_FIELD_64=Et.AZTEC_DATA_6;class fi extends _{}fi.kind="ReedSolomonException";class di extends _{}di.kind="IllegalStateException";class Xi{constructor(r){this.field=r}decode(r,a){const l=this.field,h=new Sn(l,r),f=new Int32Array(a);let m=!0;for(let q=0;q<a;q++){const $=h.evaluateAt(l.exp(q+l.getGeneratorBase()));f[f.length-1-q]=$,$!==0&&(m=!1)}if(m)return;const x=new Sn(l,f),w=this.runEuclideanAlgorithm(l.buildMonomial(a,1),x,a),C=w[0],R=w[1],P=this.findErrorLocations(C),B=this.findErrorMagnitudes(R,P);for(let q=0;q<P.length;q++){const $=r.length-1-l.log(P[q]);if($<0)throw new fi("Bad error location");r[$]=Et.addOrSubtract(r[$],B[q])}}runEuclideanAlgorithm(r,a,l){if(r.getDegree()<a.getDegree()){const q=r;r=a,a=q}const h=this.field;let f=r,m=a,x=h.getZero(),w=h.getOne();for(;m.getDegree()>=(l/2|0);){let q=f,$=x;if(f=m,x=w,f.isZero())throw new fi("r_{i-1} was zero");m=q;let ne=h.getZero();const ue=f.getCoefficient(f.getDegree()),Ee=h.inverse(ue);for(;m.getDegree()>=f.getDegree()&&!m.isZero();){const Pe=m.getDegree()-f.getDegree(),Me=h.multiply(m.getCoefficient(m.getDegree()),Ee);ne=ne.addOrSubtract(h.buildMonomial(Pe,Me)),m=m.addOrSubtract(f.multiplyByMonomial(Pe,Me))}if(w=ne.multiply(x).addOrSubtract($),m.getDegree()>=f.getDegree())throw new di("Division algorithm failed to reduce polynomial?")}const C=w.getCoefficient(0);if(C===0)throw new fi("sigmaTilde(0) was zero");const R=h.inverse(C),P=w.multiplyScalar(R),B=m.multiplyScalar(R);return[P,B]}findErrorLocations(r){const a=r.getDegree();if(a===1)return Int32Array.from([r.getCoefficient(1)]);const l=new Int32Array(a);let h=0;const f=this.field;for(let m=1;m<f.getSize()&&h<a;m++)r.evaluateAt(m)===0&&(l[h]=f.inverse(m),h++);if(h!==a)throw new fi("Error locator degree does not match number of roots");return l}findErrorMagnitudes(r,a){const l=a.length,h=new Int32Array(l),f=this.field;for(let m=0;m<l;m++){const x=f.inverse(a[m]);let w=1;for(let C=0;C<l;C++)if(m!==C){const R=f.multiply(a[C],x),P=(R&1)===0?R|1:R&-2;w=f.multiply(w,P)}h[m]=f.multiply(r.evaluateAt(x),f.inverse(w)),f.getGeneratorBase()!==0&&(h[m]=f.multiply(h[m],x))}return h}}var fn;(function(L){L[L.UPPER=0]="UPPER",L[L.LOWER=1]="LOWER",L[L.MIXED=2]="MIXED",L[L.DIGIT=3]="DIGIT",L[L.PUNCT=4]="PUNCT",L[L.BINARY=5]="BINARY"})(fn||(fn={}));class Yt{decode(r){this.ddata=r;let a=r.getBits(),l=this.extractBits(a),h=this.correctBits(l),f=Yt.convertBoolArrayToByteArray(h),m=Yt.getEncodedData(h),x=new Nt(f,m,null,null);return x.setNumBits(h.length),x}static highLevelDecode(r){return this.getEncodedData(r)}static getEncodedData(r){let a=r.length,l=fn.UPPER,h=fn.UPPER,f="",m=0;for(;m<a;)if(h===fn.BINARY){if(a-m<5)break;let x=Yt.readCode(r,m,5);if(m+=5,x===0){if(a-m<11)break;x=Yt.readCode(r,m,11)+31,m+=11}for(let w=0;w<x;w++){if(a-m<8){m=a;break}const C=Yt.readCode(r,m,8);f+=J.castAsNonUtf8Char(C),m+=8}h=l}else{let x=h===fn.DIGIT?4:5;if(a-m<x)break;let w=Yt.readCode(r,m,x);m+=x;let C=Yt.getCharacter(h,w);C.startsWith("CTRL_")?(l=h,h=Yt.getTable(C.charAt(5)),C.charAt(6)==="L"&&(l=h)):(f+=C,h=l)}return f}static getTable(r){switch(r){case"L":return fn.LOWER;case"P":return fn.PUNCT;case"M":return fn.MIXED;case"D":return fn.DIGIT;case"B":return fn.BINARY;case"U":default:return fn.UPPER}}static getCharacter(r,a){switch(r){case fn.UPPER:return Yt.UPPER_TABLE[a];case fn.LOWER:return Yt.LOWER_TABLE[a];case fn.MIXED:return Yt.MIXED_TABLE[a];case fn.PUNCT:return Yt.PUNCT_TABLE[a];case fn.DIGIT:return Yt.DIGIT_TABLE[a];default:throw new di("Bad table")}}correctBits(r){let a,l;this.ddata.getNbLayers()<=2?(l=6,a=Et.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,a=Et.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,a=Et.AZTEC_DATA_10):(l=12,a=Et.AZTEC_DATA_12);let h=this.ddata.getNbDatablocks(),f=r.length/l;if(f<h)throw new j;let m=r.length%l,x=new Int32Array(f);for(let B=0;B<f;B++,m+=l)x[B]=Yt.readCode(r,m,l);try{new Xi(a).decode(x,f-h)}catch(B){throw new j(B)}let w=(1<<l)-1,C=0;for(let B=0;B<h;B++){let q=x[B];if(q===0||q===w)throw new j;(q===1||q===w-1)&&C++}let R=new Array(h*l-C),P=0;for(let B=0;B<h;B++){let q=x[B];if(q===1||q===w-1)R.fill(q>1,P,P+l-1),P+=l-1;else for(let $=l-1;$>=0;--$)R[P++]=(q&1<<$)!==0}return R}extractBits(r){let a=this.ddata.isCompact(),l=this.ddata.getNbLayers(),h=(a?11:14)+l*4,f=new Int32Array(h),m=new Array(this.totalBitsInLayer(l,a));if(a)for(let x=0;x<f.length;x++)f[x]=x;else{let x=h+1+2*ee.truncDivision(ee.truncDivision(h,2)-1,15),w=h/2,C=ee.truncDivision(x,2);for(let R=0;R<w;R++){let P=R+ee.truncDivision(R,15);f[w-R-1]=C-P-1,f[w+R]=C+P+1}}for(let x=0,w=0;x<l;x++){let C=(l-x)*4+(a?9:12),R=x*2,P=h-1-R;for(let B=0;B<C;B++){let q=B*2;for(let $=0;$<2;$++)m[w+q+$]=r.get(f[R+$],f[R+B]),m[w+2*C+q+$]=r.get(f[R+B],f[P-$]),m[w+4*C+q+$]=r.get(f[P-$],f[P-B]),m[w+6*C+q+$]=r.get(f[P-B],f[R+$])}w+=C*8}return m}static readCode(r,a,l){let h=0;for(let f=a;f<a+l;f++)h<<=1,r[f]&&(h|=1);return h}static readByte(r,a){let l=r.length-a;return l>=8?Yt.readCode(r,a,8):Yt.readCode(r,a,l)<<8-l}static convertBoolArrayToByteArray(r){let a=new Uint8Array((r.length+7)/8);for(let l=0;l<a.length;l++)a[l]=Yt.readByte(r,8*l);return a}totalBitsInLayer(r,a){return((a?88:112)+16*r)*r}}Yt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Yt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Yt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Yt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Yt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class We{constructor(){}static round(r){return r===NaN?0:r<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:r>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:r+(r<0?-.5:.5)|0}static distance(r,a,l,h){const f=r-l,m=a-h;return Math.sqrt(f*f+m*m)}static sum(r){let a=0;for(let l=0,h=r.length;l!==h;l++){const f=r[l];a+=f}return a}}class _n{static floatToIntBits(r){return r}}_n.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Fe{constructor(r,a){this.x=r,this.y=a}getX(){return this.x}getY(){return this.y}equals(r){if(r instanceof Fe){const a=r;return this.x===a.x&&this.y===a.y}return!1}hashCode(){return 31*_n.floatToIntBits(this.x)+_n.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(r){const a=this.distance(r[0],r[1]),l=this.distance(r[1],r[2]),h=this.distance(r[0],r[2]);let f,m,x;if(l>=a&&l>=h?(m=r[0],f=r[1],x=r[2]):h>=l&&h>=a?(m=r[1],f=r[0],x=r[2]):(m=r[2],f=r[0],x=r[1]),this.crossProductZ(f,m,x)<0){const w=f;f=x,x=w}r[0]=f,r[1]=m,r[2]=x}static distance(r,a){return We.distance(r.x,r.y,a.x,a.y)}static crossProductZ(r,a,l){const h=a.x,f=a.y;return(l.x-h)*(r.y-f)-(l.y-f)*(r.x-h)}}class ps{constructor(r,a){this.bits=r,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class xs extends ps{constructor(r,a,l,h,f){super(r,a),this.compact=l,this.nbDatablocks=h,this.nbLayers=f}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class mn{constructor(r,a,l,h){this.image=r,this.height=r.getHeight(),this.width=r.getWidth(),a==null&&(a=mn.INIT_SIZE),l==null&&(l=r.getWidth()/2|0),h==null&&(h=r.getHeight()/2|0);const f=a/2|0;if(this.leftInit=l-f,this.rightInit=l+f,this.upInit=h-f,this.downInit=h+f,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new me}detect(){let r=this.leftInit,a=this.rightInit,l=this.upInit,h=this.downInit,f=!1,m=!0,x=!1,w=!1,C=!1,R=!1,P=!1;const B=this.width,q=this.height;for(;m;){m=!1;let $=!0;for(;($||!w)&&a<B;)$=this.containsBlackPoint(l,h,a,!1),$?(a++,m=!0,w=!0):w||a++;if(a>=B){f=!0;break}let ne=!0;for(;(ne||!C)&&h<q;)ne=this.containsBlackPoint(r,a,h,!0),ne?(h++,m=!0,C=!0):C||h++;if(h>=q){f=!0;break}let ue=!0;for(;(ue||!R)&&r>=0;)ue=this.containsBlackPoint(l,h,r,!1),ue?(r--,m=!0,R=!0):R||r--;if(r<0){f=!0;break}let Ee=!0;for(;(Ee||!P)&&l>=0;)Ee=this.containsBlackPoint(r,a,l,!0),Ee?(l--,m=!0,P=!0):P||l--;if(l<0){f=!0;break}m&&(x=!0)}if(!f&&x){const $=a-r;let ne=null;for(let Me=1;ne===null&&Me<$;Me++)ne=this.getBlackPointOnSegment(r,h-Me,r+Me,h);if(ne==null)throw new me;let ue=null;for(let Me=1;ue===null&&Me<$;Me++)ue=this.getBlackPointOnSegment(r,l+Me,r+Me,l);if(ue==null)throw new me;let Ee=null;for(let Me=1;Ee===null&&Me<$;Me++)Ee=this.getBlackPointOnSegment(a,l+Me,a-Me,l);if(Ee==null)throw new me;let Pe=null;for(let Me=1;Pe===null&&Me<$;Me++)Pe=this.getBlackPointOnSegment(a,h-Me,a-Me,h);if(Pe==null)throw new me;return this.centerEdges(Pe,ne,Ee,ue)}else throw new me}getBlackPointOnSegment(r,a,l,h){const f=We.round(We.distance(r,a,l,h)),m=(l-r)/f,x=(h-a)/f,w=this.image;for(let C=0;C<f;C++){const R=We.round(r+C*m),P=We.round(a+C*x);if(w.get(R,P))return new Fe(R,P)}return null}centerEdges(r,a,l,h){const f=r.getX(),m=r.getY(),x=a.getX(),w=a.getY(),C=l.getX(),R=l.getY(),P=h.getX(),B=h.getY(),q=mn.CORR;return f<this.width/2?[new Fe(P-q,B+q),new Fe(x+q,w+q),new Fe(C-q,R-q),new Fe(f+q,m-q)]:[new Fe(P+q,B+q),new Fe(x+q,w-q),new Fe(C-q,R+q),new Fe(f-q,m-q)]}containsBlackPoint(r,a,l,h){const f=this.image;if(h){for(let m=r;m<=a;m++)if(f.get(m,l))return!0}else for(let m=r;m<=a;m++)if(f.get(l,m))return!0;return!1}}mn.INIT_SIZE=10,mn.CORR=1;class bi{static checkAndNudgePoints(r,a){const l=r.getWidth(),h=r.getHeight();let f=!0;for(let m=0;m<a.length&&f;m+=2){const x=Math.floor(a[m]),w=Math.floor(a[m+1]);if(x<-1||x>l||w<-1||w>h)throw new me;f=!1,x===-1?(a[m]=0,f=!0):x===l&&(a[m]=l-1,f=!0),w===-1?(a[m+1]=0,f=!0):w===h&&(a[m+1]=h-1,f=!0)}f=!0;for(let m=a.length-2;m>=0&&f;m-=2){const x=Math.floor(a[m]),w=Math.floor(a[m+1]);if(x<-1||x>l||w<-1||w>h)throw new me;f=!1,x===-1?(a[m]=0,f=!0):x===l&&(a[m]=l-1,f=!0),w===-1?(a[m+1]=0,f=!0):w===h&&(a[m+1]=h-1,f=!0)}}}class ai{constructor(r,a,l,h,f,m,x,w,C){this.a11=r,this.a21=a,this.a31=l,this.a12=h,this.a22=f,this.a32=m,this.a13=x,this.a23=w,this.a33=C}static quadrilateralToQuadrilateral(r,a,l,h,f,m,x,w,C,R,P,B,q,$,ne,ue){const Ee=ai.quadrilateralToSquare(r,a,l,h,f,m,x,w);return ai.squareToQuadrilateral(C,R,P,B,q,$,ne,ue).times(Ee)}transformPoints(r){const a=r.length,l=this.a11,h=this.a12,f=this.a13,m=this.a21,x=this.a22,w=this.a23,C=this.a31,R=this.a32,P=this.a33;for(let B=0;B<a;B+=2){const q=r[B],$=r[B+1],ne=f*q+w*$+P;r[B]=(l*q+m*$+C)/ne,r[B+1]=(h*q+x*$+R)/ne}}transformPointsWithValues(r,a){const l=this.a11,h=this.a12,f=this.a13,m=this.a21,x=this.a22,w=this.a23,C=this.a31,R=this.a32,P=this.a33,B=r.length;for(let q=0;q<B;q++){const $=r[q],ne=a[q],ue=f*$+w*ne+P;r[q]=(l*$+m*ne+C)/ue,a[q]=(h*$+x*ne+R)/ue}}static squareToQuadrilateral(r,a,l,h,f,m,x,w){const C=r-l+f-x,R=a-h+m-w;if(C===0&&R===0)return new ai(l-r,f-l,r,h-a,m-h,a,0,0,1);{const P=l-f,B=x-f,q=h-m,$=w-m,ne=P*$-B*q,ue=(C*$-B*R)/ne,Ee=(P*R-C*q)/ne;return new ai(l-r+ue*l,x-r+Ee*x,r,h-a+ue*h,w-a+Ee*w,a,ue,Ee,1)}}static quadrilateralToSquare(r,a,l,h,f,m,x,w){return ai.squareToQuadrilateral(r,a,l,h,f,m,x,w).buildAdjoint()}buildAdjoint(){return new ai(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(r){return new ai(this.a11*r.a11+this.a21*r.a12+this.a31*r.a13,this.a11*r.a21+this.a21*r.a22+this.a31*r.a23,this.a11*r.a31+this.a21*r.a32+this.a31*r.a33,this.a12*r.a11+this.a22*r.a12+this.a32*r.a13,this.a12*r.a21+this.a22*r.a22+this.a32*r.a23,this.a12*r.a31+this.a22*r.a32+this.a32*r.a33,this.a13*r.a11+this.a23*r.a12+this.a33*r.a13,this.a13*r.a21+this.a23*r.a22+this.a33*r.a23,this.a13*r.a31+this.a23*r.a32+this.a33*r.a33)}}class ys extends bi{sampleGrid(r,a,l,h,f,m,x,w,C,R,P,B,q,$,ne,ue,Ee,Pe,Me){const Oe=ai.quadrilateralToQuadrilateral(h,f,m,x,w,C,R,P,B,q,$,ne,ue,Ee,Pe,Me);return this.sampleGridWithTransform(r,a,l,Oe)}sampleGridWithTransform(r,a,l,h){if(a<=0||l<=0)throw new me;const f=new et(a,l),m=new Float32Array(2*a);for(let x=0;x<l;x++){const w=m.length,C=x+.5;for(let R=0;R<w;R+=2)m[R]=R/2+.5,m[R+1]=C;h.transformPoints(m),bi.checkAndNudgePoints(r,m);try{for(let R=0;R<w;R+=2)r.get(Math.floor(m[R]),Math.floor(m[R+1]))&&f.set(R/2,x)}catch{throw new me}}return f}}class gi{static setGridSampler(r){gi.gridSampler=r}static getInstance(){return gi.gridSampler}}gi.gridSampler=new ys;class Wn{constructor(r,a){this.x=r,this.y=a}toResultPoint(){return new Fe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Ns{constructor(r){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=r}detect(){return this.detectMirror(!1)}detectMirror(r){let a=this.getMatrixCenter(),l=this.getBullsEyeCorners(a);if(r){let m=l[0];l[0]=l[2],l[2]=m}this.extractParameters(l);let h=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),f=this.getMatrixCornerPoints(l);return new xs(h,f,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(r){if(!this.isValidPoint(r[0])||!this.isValidPoint(r[1])||!this.isValidPoint(r[2])||!this.isValidPoint(r[3]))throw new me;let a=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(r[0],r[1],a),this.sampleLine(r[1],r[2],a),this.sampleLine(r[2],r[3],a),this.sampleLine(r[3],r[0],a)]);this.shift=this.getRotation(l,a);let h=0;for(let m=0;m<4;m++){let x=l[(this.shift+m)%4];this.compact?(h<<=7,h+=x>>1&127):(h<<=10,h+=(x>>2&992)+(x>>1&31))}let f=this.getCorrectedParameterData(h,this.compact);this.compact?(this.nbLayers=(f>>6)+1,this.nbDataBlocks=(f&63)+1):(this.nbLayers=(f>>11)+1,this.nbDataBlocks=(f&2047)+1)}getRotation(r,a){let l=0;r.forEach((h,f,m)=>{let x=(h>>a-2<<1)+(h&1);l=(l<<3)+x}),l=((l&1)<<11)+(l>>1);for(let h=0;h<4;h++)if(ee.bitCount(l^this.EXPECTED_CORNER_BITS[h])<=2)return h;throw new me}getCorrectedParameterData(r,a){let l,h;a?(l=7,h=2):(l=10,h=4);let f=l-h,m=new Int32Array(l);for(let w=l-1;w>=0;--w)m[w]=r&15,r>>=4;try{new Xi(Et.AZTEC_PARAM).decode(m,f)}catch{throw new me}let x=0;for(let w=0;w<h;w++)x=(x<<4)+m[w];return x}getBullsEyeCorners(r){let a=r,l=r,h=r,f=r,m=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let P=this.getFirstDifferent(a,m,1,-1),B=this.getFirstDifferent(l,m,1,1),q=this.getFirstDifferent(h,m,-1,1),$=this.getFirstDifferent(f,m,-1,-1);if(this.nbCenterLayers>2){let ne=this.distancePoint($,P)*this.nbCenterLayers/(this.distancePoint(f,a)*(this.nbCenterLayers+2));if(ne<.75||ne>1.25||!this.isWhiteOrBlackRectangle(P,B,q,$))break}a=P,l=B,h=q,f=$,m=!m}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new me;this.compact=this.nbCenterLayers===5;let x=new Fe(a.getX()+.5,a.getY()-.5),w=new Fe(l.getX()+.5,l.getY()+.5),C=new Fe(h.getX()-.5,h.getY()+.5),R=new Fe(f.getX()-.5,f.getY()-.5);return this.expandSquare([x,w,C,R],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let r,a,l,h;try{let x=new mn(this.image).detect();r=x[0],a=x[1],l=x[2],h=x[3]}catch{let w=this.image.getWidth()/2,C=this.image.getHeight()/2;r=this.getFirstDifferent(new Wn(w+7,C-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new Wn(w+7,C+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Wn(w-7,C+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new Wn(w-7,C-7),!1,-1,-1).toResultPoint()}let f=We.round((r.getX()+h.getX()+a.getX()+l.getX())/4),m=We.round((r.getY()+h.getY()+a.getY()+l.getY())/4);try{let x=new mn(this.image,15,f,m).detect();r=x[0],a=x[1],l=x[2],h=x[3]}catch{r=this.getFirstDifferent(new Wn(f+7,m-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new Wn(f+7,m+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Wn(f-7,m+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new Wn(f-7,m-7),!1,-1,-1).toResultPoint()}return f=We.round((r.getX()+h.getX()+a.getX()+l.getX())/4),m=We.round((r.getY()+h.getY()+a.getY()+l.getY())/4),new Wn(f,m)}getMatrixCornerPoints(r){return this.expandSquare(r,2*this.nbCenterLayers,this.getDimension())}sampleGrid(r,a,l,h,f){let m=gi.getInstance(),x=this.getDimension(),w=x/2-this.nbCenterLayers,C=x/2+this.nbCenterLayers;return m.sampleGrid(r,x,x,w,w,C,w,C,C,w,C,a.getX(),a.getY(),l.getX(),l.getY(),h.getX(),h.getY(),f.getX(),f.getY())}sampleLine(r,a,l){let h=0,f=this.distanceResultPoint(r,a),m=f/l,x=r.getX(),w=r.getY(),C=m*(a.getX()-r.getX())/f,R=m*(a.getY()-r.getY())/f;for(let P=0;P<l;P++)this.image.get(We.round(x+P*C),We.round(w+P*R))&&(h|=1<<l-P-1);return h}isWhiteOrBlackRectangle(r,a,l,h){let f=3;r=new Wn(r.getX()-f,r.getY()+f),a=new Wn(a.getX()-f,a.getY()-f),l=new Wn(l.getX()+f,l.getY()-f),h=new Wn(h.getX()+f,h.getY()+f);let m=this.getColor(h,r);if(m===0)return!1;let x=this.getColor(r,a);return x!==m||(x=this.getColor(a,l),x!==m)?!1:(x=this.getColor(l,h),x===m)}getColor(r,a){let l=this.distancePoint(r,a),h=(a.getX()-r.getX())/l,f=(a.getY()-r.getY())/l,m=0,x=r.getX(),w=r.getY(),C=this.image.get(r.getX(),r.getY()),R=Math.ceil(l);for(let B=0;B<R;B++)x+=h,w+=f,this.image.get(We.round(x),We.round(w))!==C&&m++;let P=m/l;return P>.1&&P<.9?0:P<=.1===C?1:-1}getFirstDifferent(r,a,l,h){let f=r.getX()+l,m=r.getY()+h;for(;this.isValid(f,m)&&this.image.get(f,m)===a;)f+=l,m+=h;for(f-=l,m-=h;this.isValid(f,m)&&this.image.get(f,m)===a;)f+=l;for(f-=l;this.isValid(f,m)&&this.image.get(f,m)===a;)m+=h;return m-=h,new Wn(f,m)}expandSquare(r,a,l){let h=l/(2*a),f=r[0].getX()-r[2].getX(),m=r[0].getY()-r[2].getY(),x=(r[0].getX()+r[2].getX())/2,w=(r[0].getY()+r[2].getY())/2,C=new Fe(x+h*f,w+h*m),R=new Fe(x-h*f,w-h*m);f=r[1].getX()-r[3].getX(),m=r[1].getY()-r[3].getY(),x=(r[1].getX()+r[3].getX())/2,w=(r[1].getY()+r[3].getY())/2;let P=new Fe(x+h*f,w+h*m),B=new Fe(x-h*f,w-h*m);return[C,P,R,B]}isValid(r,a){return r>=0&&r<this.image.getWidth()&&a>0&&a<this.image.getHeight()}isValidPoint(r){let a=We.round(r.getX()),l=We.round(r.getY());return this.isValid(a,l)}distancePoint(r,a){return We.distance(r.getX(),r.getY(),a.getX(),a.getY())}distanceResultPoint(r,a){return We.distance(r.getX(),r.getY(),a.getX(),a.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(ee.truncDivision(this.nbLayers-4,8)+1)+15}}class Kr{decode(r,a=null){let l=null,h=new Ns(r.getBlackMatrix()),f=null,m=null;try{let R=h.detectMirror(!1);f=R.getPoints(),this.reportFoundResultPoints(a,f),m=new Yt().decode(R)}catch(R){l=R}if(m==null)try{let R=h.detectMirror(!0);f=R.getPoints(),this.reportFoundResultPoints(a,f),m=new Yt().decode(R)}catch(R){throw l??R}let x=new Ue(m.getText(),m.getRawBytes(),m.getNumBits(),f,Le.AZTEC,K.currentTimeMillis()),w=m.getByteSegments();w!=null&&x.putMetadata(_t.BYTE_SEGMENTS,w);let C=m.getECLevel();return C!=null&&x.putMetadata(_t.ERROR_CORRECTION_LEVEL,C),x}reportFoundResultPoints(r,a){if(r!=null){let l=r.get(Ne.NEED_RESULT_POINT_CALLBACK);l!=null&&a.forEach((h,f,m)=>{l.foundPossibleResultPoint(h)})}}reset(){}}class Rs extends ke{constructor(r=500){super(new Kr,r)}}class Ut{decode(r,a){try{return this.doDecode(r,a)}catch{if(a&&a.get(Ne.TRY_HARDER)===!0&&r.isRotateSupported()){const f=r.rotateCounterClockwise(),m=this.doDecode(f,a),x=m.getResultMetadata();let w=270;x!==null&&x.get(_t.ORIENTATION)===!0&&(w=w+x.get(_t.ORIENTATION)%360),m.putMetadata(_t.ORIENTATION,w);const C=m.getResultPoints();if(C!==null){const R=f.getHeight();for(let P=0;P<C.length;P++)C[P]=new Fe(R-C[P].getY()-1,C[P].getX())}return m}else throw new me}}reset(){}doDecode(r,a){const l=r.getWidth(),h=r.getHeight();let f=new ae(l);const m=a&&a.get(Ne.TRY_HARDER)===!0,x=Math.max(1,h>>(m?8:5));let w;m?w=h:w=15;const C=Math.trunc(h/2);for(let R=0;R<w;R++){const P=Math.trunc((R+1)/2),B=(R&1)===0,q=C+x*(B?P:-P);if(q<0||q>=h)break;try{f=r.getBlackRow(q,f)}catch{continue}for(let $=0;$<2;$++){if($===1&&(f.reverse(),a&&a.get(Ne.NEED_RESULT_POINT_CALLBACK)===!0)){const ne=new Map;a.forEach((ue,Ee)=>ne.set(Ee,ue)),ne.delete(Ne.NEED_RESULT_POINT_CALLBACK),a=ne}try{const ne=this.decodeRow(q,f,a);if($===1){ne.putMetadata(_t.ORIENTATION,180);const ue=ne.getResultPoints();ue!==null&&(ue[0]=new Fe(l-ue[0].getX()-1,ue[0].getY()),ue[1]=new Fe(l-ue[1].getX()-1,ue[1].getY()))}return ne}catch{}}}throw new me}static recordPattern(r,a,l){const h=l.length;for(let C=0;C<h;C++)l[C]=0;const f=r.getSize();if(a>=f)throw new me;let m=!r.get(a),x=0,w=a;for(;w<f;){if(r.get(w)!==m)l[x]++;else{if(++x===h)break;l[x]=1,m=!m}w++}if(!(x===h||x===h-1&&w===f))throw new me}static recordPatternInReverse(r,a,l){let h=l.length,f=r.get(a);for(;a>0&&h>=0;)r.get(--a)!==f&&(h--,f=!f);if(h>=0)throw new me;Ut.recordPattern(r,a+1,l)}static patternMatchVariance(r,a,l){const h=r.length;let f=0,m=0;for(let C=0;C<h;C++)f+=r[C],m+=a[C];if(f<m)return Number.POSITIVE_INFINITY;const x=f/m;l*=x;let w=0;for(let C=0;C<h;C++){const R=r[C],P=a[C]*x,B=R>P?R-P:P-R;if(B>l)return Number.POSITIVE_INFINITY;w+=B}return w/f}}class De extends Ut{static findStartPattern(r){const a=r.getSize(),l=r.getNextSet(0);let h=0,f=Int32Array.from([0,0,0,0,0,0]),m=l,x=!1;const w=6;for(let C=l;C<a;C++)if(r.get(C)!==x)f[h]++;else{if(h===w-1){let R=De.MAX_AVG_VARIANCE,P=-1;for(let B=De.CODE_START_A;B<=De.CODE_START_C;B++){const q=Ut.patternMatchVariance(f,De.CODE_PATTERNS[B],De.MAX_INDIVIDUAL_VARIANCE);q<R&&(R=q,P=B)}if(P>=0&&r.isRange(Math.max(0,m-(C-m)/2),m,!1))return Int32Array.from([m,C,P]);m+=f[0]+f[1],f=f.slice(2,f.length-1),f[h-1]=0,f[h]=0,h--}else h++;f[h]=1,x=!x}throw new me}static decodeCode(r,a,l){Ut.recordPattern(r,l,a);let h=De.MAX_AVG_VARIANCE,f=-1;for(let m=0;m<De.CODE_PATTERNS.length;m++){const x=De.CODE_PATTERNS[m],w=this.patternMatchVariance(a,x,De.MAX_INDIVIDUAL_VARIANCE);w<h&&(h=w,f=m)}if(f>=0)return f;throw new me}decodeRow(r,a,l){const h=l&&l.get(Ne.ASSUME_GS1)===!0,f=De.findStartPattern(a),m=f[2];let x=0;const w=new Uint8Array(20);w[x++]=m;let C;switch(m){case De.CODE_START_A:C=De.CODE_CODE_A;break;case De.CODE_START_B:C=De.CODE_CODE_B;break;case De.CODE_START_C:C=De.CODE_CODE_C;break;default:throw new j}let R=!1,P=!1,B="",q=f[0],$=f[1];const ne=Int32Array.from([0,0,0,0,0,0]);let ue=0,Ee=0,Pe=m,Me=0,Oe=!0,St=!1,ht=!1;for(;!R;){const sa=P;switch(P=!1,ue=Ee,Ee=De.decodeCode(a,ne,$),w[x++]=Ee,Ee!==De.CODE_STOP&&(Oe=!0),Ee!==De.CODE_STOP&&(Me++,Pe+=Me*Ee),q=$,$+=ne.reduce((Nu,lc)=>Nu+lc,0),Ee){case De.CODE_START_A:case De.CODE_START_B:case De.CODE_START_C:throw new j}switch(C){case De.CODE_CODE_A:if(Ee<64)ht===St?B+=String.fromCharCode(32+Ee):B+=String.fromCharCode(32+Ee+128),ht=!1;else if(Ee<96)ht===St?B+=String.fromCharCode(Ee-64):B+=String.fromCharCode(Ee+64),ht=!1;else switch(Ee!==De.CODE_STOP&&(Oe=!1),Ee){case De.CODE_FNC_1:h&&(B.length===0?B+="]C1":B+="");break;case De.CODE_FNC_2:case De.CODE_FNC_3:break;case De.CODE_FNC_4_A:!St&&ht?(St=!0,ht=!1):St&&ht?(St=!1,ht=!1):ht=!0;break;case De.CODE_SHIFT:P=!0,C=De.CODE_CODE_B;break;case De.CODE_CODE_B:C=De.CODE_CODE_B;break;case De.CODE_CODE_C:C=De.CODE_CODE_C;break;case De.CODE_STOP:R=!0;break}break;case De.CODE_CODE_B:if(Ee<96)ht===St?B+=String.fromCharCode(32+Ee):B+=String.fromCharCode(32+Ee+128),ht=!1;else switch(Ee!==De.CODE_STOP&&(Oe=!1),Ee){case De.CODE_FNC_1:h&&(B.length===0?B+="]C1":B+="");break;case De.CODE_FNC_2:case De.CODE_FNC_3:break;case De.CODE_FNC_4_B:!St&&ht?(St=!0,ht=!1):St&&ht?(St=!1,ht=!1):ht=!0;break;case De.CODE_SHIFT:P=!0,C=De.CODE_CODE_A;break;case De.CODE_CODE_A:C=De.CODE_CODE_A;break;case De.CODE_CODE_C:C=De.CODE_CODE_C;break;case De.CODE_STOP:R=!0;break}break;case De.CODE_CODE_C:if(Ee<100)Ee<10&&(B+="0"),B+=Ee;else switch(Ee!==De.CODE_STOP&&(Oe=!1),Ee){case De.CODE_FNC_1:h&&(B.length===0?B+="]C1":B+="");break;case De.CODE_CODE_A:C=De.CODE_CODE_A;break;case De.CODE_CODE_B:C=De.CODE_CODE_B;break;case De.CODE_STOP:R=!0;break}break}sa&&(C=C===De.CODE_CODE_A?De.CODE_CODE_B:De.CODE_CODE_A)}const $n=$-q;if($=a.getNextUnset($),!a.isRange($,Math.min(a.getSize(),$+($-q)/2),!1))throw new me;if(Pe-=Me*ue,Pe%103!==ue)throw new U;const br=B.length;if(br===0)throw new me;br>0&&Oe&&(C===De.CODE_CODE_C?B=B.substring(0,br-2):B=B.substring(0,br-1));const Ui=(f[1]+f[0])/2,un=q+$n/2,Si=w.length,dr=new Uint8Array(Si);for(let sa=0;sa<Si;sa++)dr[sa]=w[sa];const ka=[new Fe(Ui,r),new Fe(un,r)];return new Ue(B,dr,0,ka,Le.CODE_128,new Date().getTime())}}De.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],De.MAX_AVG_VARIANCE=.25,De.MAX_INDIVIDUAL_VARIANCE=.7,De.CODE_SHIFT=98,De.CODE_CODE_C=99,De.CODE_CODE_B=100,De.CODE_CODE_A=101,De.CODE_FNC_1=102,De.CODE_FNC_2=97,De.CODE_FNC_3=96,De.CODE_FNC_4_A=101,De.CODE_FNC_4_B=100,De.CODE_START_A=103,De.CODE_START_B=104,De.CODE_START_C=105,De.CODE_STOP=106;class Xt extends Ut{constructor(r=!1,a=!1){super(),this.usingCheckDigit=r,this.extendedMode=a,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(r,a,l){let h=this.counters;h.fill(0),this.decodeRowResult="";let f=Xt.findAsteriskPattern(a,h),m=a.getNextSet(f[1]),x=a.getSize(),w,C;do{Xt.recordPattern(a,m,h);let ne=Xt.toNarrowWidePattern(h);if(ne<0)throw new me;w=Xt.patternToChar(ne),this.decodeRowResult+=w,C=m;for(let ue of h)m+=ue;m=a.getNextSet(m)}while(w!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let R=0;for(let ne of h)R+=ne;let P=m-C-R;if(m!==x&&P*2<R)throw new me;if(this.usingCheckDigit){let ne=this.decodeRowResult.length-1,ue=0;for(let Ee=0;Ee<ne;Ee++)ue+=Xt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Ee));if(this.decodeRowResult.charAt(ne)!==Xt.ALPHABET_STRING.charAt(ue%43))throw new U;this.decodeRowResult=this.decodeRowResult.substring(0,ne)}if(this.decodeRowResult.length===0)throw new me;let B;this.extendedMode?B=Xt.decodeExtended(this.decodeRowResult):B=this.decodeRowResult;let q=(f[1]+f[0])/2,$=C+R/2;return new Ue(B,null,0,[new Fe(q,r),new Fe($,r)],Le.CODE_39,new Date().getTime())}static findAsteriskPattern(r,a){let l=r.getSize(),h=r.getNextSet(0),f=0,m=h,x=!1,w=a.length;for(let C=h;C<l;C++)if(r.get(C)!==x)a[f]++;else{if(f===w-1){if(this.toNarrowWidePattern(a)===Xt.ASTERISK_ENCODING&&r.isRange(Math.max(0,m-Math.floor((C-m)/2)),m,!1))return[m,C];m+=a[0]+a[1],a.copyWithin(0,2,2+f-1),a[f-1]=0,a[f]=0,f--}else f++;a[f]=1,x=!x}throw new me}static toNarrowWidePattern(r){let a=r.length,l=0,h;do{let f=2147483647;for(let w of r)w<f&&w>l&&(f=w);l=f,h=0;let m=0,x=0;for(let w=0;w<a;w++){let C=r[w];C>l&&(x|=1<<a-1-w,h++,m+=C)}if(h===3){for(let w=0;w<a&&h>0;w++){let C=r[w];if(C>l&&(h--,C*2>=m))return-1}return x}}while(h>3);return-1}static patternToChar(r){for(let a=0;a<Xt.CHARACTER_ENCODINGS.length;a++)if(Xt.CHARACTER_ENCODINGS[a]===r)return Xt.ALPHABET_STRING.charAt(a);if(r===Xt.ASTERISK_ENCODING)return"*";throw new me}static decodeExtended(r){let a=r.length,l="";for(let h=0;h<a;h++){let f=r.charAt(h);if(f==="+"||f==="$"||f==="%"||f==="/"){let m=r.charAt(h+1),x="\0";switch(f){case"+":if(m>="A"&&m<="Z")x=String.fromCharCode(m.charCodeAt(0)+32);else throw new j;break;case"$":if(m>="A"&&m<="Z")x=String.fromCharCode(m.charCodeAt(0)-64);else throw new j;break;case"%":if(m>="A"&&m<="E")x=String.fromCharCode(m.charCodeAt(0)-38);else if(m>="F"&&m<="J")x=String.fromCharCode(m.charCodeAt(0)-11);else if(m>="K"&&m<="O")x=String.fromCharCode(m.charCodeAt(0)+16);else if(m>="P"&&m<="T")x=String.fromCharCode(m.charCodeAt(0)+43);else if(m==="U")x="\0";else if(m==="V")x="@";else if(m==="W")x="`";else if(m==="X"||m==="Y"||m==="Z")x="";else throw new j;break;case"/":if(m>="A"&&m<="O")x=String.fromCharCode(m.charCodeAt(0)-32);else if(m==="Z")x=":";else throw new j;break}l+=x,h++}else l+=f}return l}}Xt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Xt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Xt.ASTERISK_ENCODING=148;class nt extends Ut{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(r,a,l){let h=this.decodeStart(a),f=this.decodeEnd(a),m=new Y;nt.decodeMiddle(a,h[1],f[0],m);let x=m.toString(),w=null;l!=null&&(w=l.get(Ne.ALLOWED_LENGTHS)),w==null&&(w=nt.DEFAULT_ALLOWED_LENGTHS);let C=x.length,R=!1,P=0;for(let $ of w){if(C===$){R=!0;break}$>P&&(P=$)}if(!R&&C>P&&(R=!0),!R)throw new j;const B=[new Fe(h[1],r),new Fe(f[0],r)];return new Ue(x,null,0,B,Le.ITF,new Date().getTime())}static decodeMiddle(r,a,l,h){let f=new Int32Array(10),m=new Int32Array(5),x=new Int32Array(5);for(f.fill(0),m.fill(0),x.fill(0);a<l;){Ut.recordPattern(r,a,f);for(let C=0;C<5;C++){let R=2*C;m[C]=f[R],x[C]=f[R+1]}let w=nt.decodeDigit(m);h.append(w.toString()),w=this.decodeDigit(x),h.append(w.toString()),f.forEach(function(C){a+=C})}}decodeStart(r){let a=nt.skipWhiteSpace(r),l=nt.findGuardPattern(r,a,nt.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(r,l[0]),l}validateQuietZone(r,a){let l=this.narrowLineWidth*10;l=l<a?l:a;for(let h=a-1;l>0&&h>=0&&!r.get(h);h--)l--;if(l!==0)throw new me}static skipWhiteSpace(r){const a=r.getSize(),l=r.getNextSet(0);if(l===a)throw new me;return l}decodeEnd(r){r.reverse();try{let a=nt.skipWhiteSpace(r),l;try{l=nt.findGuardPattern(r,a,nt.END_PATTERN_REVERSED[0])}catch(f){f instanceof me&&(l=nt.findGuardPattern(r,a,nt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,l[0]);let h=l[0];return l[0]=r.getSize()-l[1],l[1]=r.getSize()-h,l}finally{r.reverse()}}static findGuardPattern(r,a,l){let h=l.length,f=new Int32Array(h),m=r.getSize(),x=!1,w=0,C=a;f.fill(0);for(let R=a;R<m;R++)if(r.get(R)!==x)f[w]++;else{if(w===h-1){if(Ut.patternMatchVariance(f,l,nt.MAX_INDIVIDUAL_VARIANCE)<nt.MAX_AVG_VARIANCE)return[C,R];C+=f[0]+f[1],K.arraycopy(f,2,f,0,w-1),f[w-1]=0,f[w]=0,w--}else w++;f[w]=1,x=!x}throw new me}static decodeDigit(r){let a=nt.MAX_AVG_VARIANCE,l=-1,h=nt.PATTERNS.length;for(let f=0;f<h;f++){let m=nt.PATTERNS[f],x=Ut.patternMatchVariance(r,m,nt.MAX_INDIVIDUAL_VARIANCE);x<a?(a=x,l=f):x===a&&(l=-1)}if(l>=0)return l%10;throw new me}}nt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],nt.MAX_AVG_VARIANCE=.38,nt.MAX_INDIVIDUAL_VARIANCE=.5,nt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],nt.START_PATTERN=Int32Array.from([1,1,1,1]),nt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class sn extends Ut{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(r){let a=!1,l,h=0,f=Int32Array.from([0,0,0]);for(;!a;){f=Int32Array.from([0,0,0]),l=sn.findGuardPattern(r,h,!1,this.START_END_PATTERN,f);let m=l[0];h=l[1];let x=m-(h-m);x>=0&&(a=r.isRange(x,m,!1))}return l}static checkChecksum(r){return sn.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let a=r.length;if(a===0)return!1;let l=parseInt(r.charAt(a-1),10);return sn.getStandardUPCEANChecksum(r.substring(0,a-1))===l}static getStandardUPCEANChecksum(r){let a=r.length,l=0;for(let h=a-1;h>=0;h-=2){let f=r.charAt(h).charCodeAt(0)-48;if(f<0||f>9)throw new j;l+=f}l*=3;for(let h=a-2;h>=0;h-=2){let f=r.charAt(h).charCodeAt(0)-48;if(f<0||f>9)throw new j;l+=f}return(1e3-l)%10}static decodeEnd(r,a){return sn.findGuardPattern(r,a,!1,sn.START_END_PATTERN,new Int32Array(sn.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(r,a,l,h){return this.findGuardPattern(r,a,l,h,new Int32Array(h.length))}static findGuardPattern(r,a,l,h,f){let m=r.getSize();a=l?r.getNextUnset(a):r.getNextSet(a);let x=0,w=a,C=h.length,R=l;for(let P=a;P<m;P++)if(r.get(P)!==R)f[x]++;else{if(x===C-1){if(Ut.patternMatchVariance(f,h,sn.MAX_INDIVIDUAL_VARIANCE)<sn.MAX_AVG_VARIANCE)return Int32Array.from([w,P]);w+=f[0]+f[1];let B=f.slice(2,f.length-1);for(let q=0;q<x-1;q++)f[q]=B[q];f[x-1]=0,f[x]=0,x--}else x++;f[x]=1,R=!R}throw new me}static decodeDigit(r,a,l,h){this.recordPattern(r,l,a);let f=this.MAX_AVG_VARIANCE,m=-1,x=h.length;for(let w=0;w<x;w++){let C=h[w],R=Ut.patternMatchVariance(a,C,sn.MAX_INDIVIDUAL_VARIANCE);R<f&&(f=R,m=w)}if(m>=0)return m;throw new me}}sn.MAX_AVG_VARIANCE=.48,sn.MAX_INDIVIDUAL_VARIANCE=.7,sn.START_END_PATTERN=Int32Array.from([1,1,1]),sn.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),sn.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),sn.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class sr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,a,l){let h=this.decodeRowStringBuffer,f=this.decodeMiddle(a,l,h),m=h.toString(),x=sr.parseExtensionString(m),w=[new Fe((l[0]+l[1])/2,r),new Fe(f,r)],C=new Ue(m,null,0,w,Le.UPC_EAN_EXTENSION,new Date().getTime());return x!=null&&C.putAllMetadata(x),C}decodeMiddle(r,a,l){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=r.getSize(),m=a[1],x=0;for(let C=0;C<5&&m<f;C++){let R=sn.decodeDigit(r,h,m,sn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+R%10);for(let P of h)m+=P;R>=10&&(x|=1<<4-C),C!==4&&(m=r.getNextSet(m),m=r.getNextUnset(m))}if(l.length!==5)throw new me;let w=this.determineCheckDigit(x);if(sr.extensionChecksum(l.toString())!==w)throw new me;return m}static extensionChecksum(r){let a=r.length,l=0;for(let h=a-2;h>=0;h-=2)l+=r.charAt(h).charCodeAt(0)-48;l*=3;for(let h=a-1;h>=0;h-=2)l+=r.charAt(h).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(r){for(let a=0;a<10;a++)if(r===this.CHECK_DIGIT_ENCODINGS[a])return a;throw new me}static parseExtensionString(r){if(r.length!==5)return null;let a=sr.parseExtension5String(r);return a==null?null:new Map([[_t.SUGGESTED_PRICE,a]])}static parseExtension5String(r){let a;switch(r.charAt(0)){case"0":a="";break;case"5":a="$";break;case"9":switch(r){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}a="";break;default:a="";break}let l=parseInt(r.substring(1)),h=(l/100).toString(),f=l%100,m=f<10?"0"+f:f.toString();return a+h+"."+m}}class Es{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,a,l){let h=this.decodeRowStringBuffer,f=this.decodeMiddle(a,l,h),m=h.toString(),x=Es.parseExtensionString(m),w=[new Fe((l[0]+l[1])/2,r),new Fe(f,r)],C=new Ue(m,null,0,w,Le.UPC_EAN_EXTENSION,new Date().getTime());return x!=null&&C.putAllMetadata(x),C}decodeMiddle(r,a,l){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=r.getSize(),m=a[1],x=0;for(let w=0;w<2&&m<f;w++){let C=sn.decodeDigit(r,h,m,sn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+C%10);for(let R of h)m+=R;C>=10&&(x|=1<<1-w),w!==1&&(m=r.getNextSet(m),m=r.getNextUnset(m))}if(l.length!==2)throw new me;if(parseInt(l.toString())%4!==x)throw new me;return m}static parseExtensionString(r){return r.length!==2?null:new Map([[_t.ISSUE_NUMBER,parseInt(r)]])}}class ar{static decodeRow(r,a,l){let h=sn.findGuardPattern(a,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new sr().decodeRow(r,a,h)}catch{return new Es().decodeRow(r,a,h)}}}ar.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class bt extends sn{constructor(){super(),this.decodeRowStringBuffer="",bt.L_AND_G_PATTERNS=bt.L_PATTERNS.map(r=>Int32Array.from(r));for(let r=10;r<20;r++){let a=bt.L_PATTERNS[r-10],l=new Int32Array(a.length);for(let h=0;h<a.length;h++)l[h]=a[a.length-h-1];bt.L_AND_G_PATTERNS[r]=l}}decodeRow(r,a,l){let h=bt.findStartGuardPattern(a),f=l==null?null:l.get(Ne.NEED_RESULT_POINT_CALLBACK);if(f!=null){const Oe=new Fe((h[0]+h[1])/2,r);f.foundPossibleResultPoint(Oe)}let m=this.decodeMiddle(a,h,this.decodeRowStringBuffer),x=m.rowOffset,w=m.resultString;if(f!=null){const Oe=new Fe(x,r);f.foundPossibleResultPoint(Oe)}let C=this.decodeEnd(a,x);if(f!=null){const Oe=new Fe((C[0]+C[1])/2,r);f.foundPossibleResultPoint(Oe)}let R=C[1],P=R+(R-C[0]);if(P>=a.getSize()||!a.isRange(R,P,!1))throw new me;let B=w.toString();if(B.length<8)throw new j;if(!bt.checkChecksum(B))throw new U;let q=(h[1]+h[0])/2,$=(C[1]+C[0])/2,ne=this.getBarcodeFormat(),ue=[new Fe(q,r),new Fe($,r)],Ee=new Ue(B,null,0,ue,ne,new Date().getTime()),Pe=0;try{let Oe=ar.decodeRow(r,a,C[1]);Ee.putMetadata(_t.UPC_EAN_EXTENSION,Oe.getText()),Ee.putAllMetadata(Oe.getResultMetadata()),Ee.addResultPoints(Oe.getResultPoints()),Pe=Oe.getText().length}catch{}let Me=l==null?null:l.get(Ne.ALLOWED_EAN_EXTENSIONS);if(Me!=null){let Oe=!1;for(let St in Me)if(Pe.toString()===St){Oe=!0;break}if(!Oe)throw new me}return Ee}decodeEnd(r,a){return bt.findGuardPattern(r,a,!1,bt.START_END_PATTERN,new Int32Array(bt.START_END_PATTERN.length).fill(0))}static checkChecksum(r){return bt.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let a=r.length;if(a===0)return!1;let l=parseInt(r.charAt(a-1),10);return bt.getStandardUPCEANChecksum(r.substring(0,a-1))===l}static getStandardUPCEANChecksum(r){let a=r.length,l=0;for(let h=a-1;h>=0;h-=2){let f=r.charAt(h).charCodeAt(0)-48;if(f<0||f>9)throw new j;l+=f}l*=3;for(let h=a-2;h>=0;h-=2){let f=r.charAt(h).charCodeAt(0)-48;if(f<0||f>9)throw new j;l+=f}return(1e3-l)%10}}class on extends bt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,a,l){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=r.getSize(),m=a[1],x=0;for(let C=0;C<6&&m<f;C++){let R=bt.decodeDigit(r,h,m,bt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+R%10);for(let P of h)m+=P;R>=10&&(x|=1<<5-C)}l=on.determineFirstDigit(l,x),m=bt.findGuardPattern(r,m,!0,bt.MIDDLE_PATTERN,new Int32Array(bt.MIDDLE_PATTERN.length).fill(0))[1];for(let C=0;C<6&&m<f;C++){let R=bt.decodeDigit(r,h,m,bt.L_PATTERNS);l+=String.fromCharCode(48+R);for(let P of h)m+=P}return{rowOffset:m,resultString:l}}getBarcodeFormat(){return Le.EAN_13}static determineFirstDigit(r,a){for(let l=0;l<10;l++)if(a===this.FIRST_DIGIT_ENCODINGS[l])return r=String.fromCharCode(48+l)+r,r;throw new me}}on.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Ki extends bt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,a,l){const h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=r.getSize(),m=a[1];for(let w=0;w<4&&m<f;w++){let C=bt.decodeDigit(r,h,m,bt.L_PATTERNS);l+=String.fromCharCode(48+C);for(let R of h)m+=R}m=bt.findGuardPattern(r,m,!0,bt.MIDDLE_PATTERN,new Int32Array(bt.MIDDLE_PATTERN.length).fill(0))[1];for(let w=0;w<4&&m<f;w++){let C=bt.decodeDigit(r,h,m,bt.L_PATTERNS);l+=String.fromCharCode(48+C);for(let R of h)m+=R}return{rowOffset:m,resultString:l}}getBarcodeFormat(){return Le.EAN_8}}class or extends bt{constructor(){super(...arguments),this.ean13Reader=new on}getBarcodeFormat(){return Le.UPC_A}decode(r,a){return this.maybeReturnResult(this.ean13Reader.decode(r))}decodeRow(r,a,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,a,l))}decodeMiddle(r,a,l){return this.ean13Reader.decodeMiddle(r,a,l)}maybeReturnResult(r){let a=r.getText();if(a.charAt(0)==="0"){let l=new Ue(a.substring(1),null,null,r.getResultPoints(),Le.UPC_A);return r.getResultMetadata()!=null&&l.putAllMetadata(r.getResultMetadata()),l}else throw new me}reset(){this.ean13Reader.reset()}}class In extends bt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(r,a,l){const h=this.decodeMiddleCounters.map(C=>C);h[0]=0,h[1]=0,h[2]=0,h[3]=0;const f=r.getSize();let m=a[1],x=0;for(let C=0;C<6&&m<f;C++){const R=In.decodeDigit(r,h,m,In.L_AND_G_PATTERNS);l+=String.fromCharCode(48+R%10);for(let P of h)m+=P;R>=10&&(x|=1<<5-C)}let w=In.determineNumSysAndCheckDigit(l,x);return{rowOffset:m,resultString:w}}decodeEnd(r,a){return In.findGuardPatternWithoutCounters(r,a,!0,In.MIDDLE_END_PATTERN)}checkChecksum(r){return bt.checkChecksum(In.convertUPCEtoUPCA(r))}static determineNumSysAndCheckDigit(r,a){for(let l=0;l<=1;l++)for(let h=0;h<10;h++)if(a===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][h]){let f=String.fromCharCode(48+l),m=String.fromCharCode(48+h);return f+r+m}throw me.getNotFoundInstance()}getBarcodeFormat(){return Le.UPC_E}static convertUPCEtoUPCA(r){const a=r.slice(1,7).split("").map(f=>f.charCodeAt(0)),l=new Y;l.append(r.charAt(0));let h=a[5];switch(h){case 0:case 1:case 2:l.appendChars(a,0,2),l.append(h),l.append("0000"),l.appendChars(a,2,3);break;case 3:l.appendChars(a,0,3),l.append("00000"),l.appendChars(a,3,2);break;case 4:l.appendChars(a,0,4),l.append("00000"),l.append(a[4]);break;default:l.appendChars(a,0,5),l.append("0000"),l.append(h);break}return r.length>=8&&l.append(r.charAt(7)),l.toString()}}In.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),In.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Ks extends Ut{constructor(r){super();let a=r==null?null:r.get(Ne.POSSIBLE_FORMATS),l=[];o(a)?(l.push(new on),l.push(new or),l.push(new Ki),l.push(new In)):(a.indexOf(Le.EAN_13)>-1&&l.push(new on),a.indexOf(Le.UPC_A)>-1&&l.push(new or),a.indexOf(Le.EAN_8)>-1&&l.push(new Ki),a.indexOf(Le.UPC_E)>-1&&l.push(new In)),this.readers=l}decodeRow(r,a,l){for(let h of this.readers)try{const f=h.decodeRow(r,a,l),m=f.getBarcodeFormat()===Le.EAN_13&&f.getText().charAt(0)==="0",x=l==null?null:l.get(Ne.POSSIBLE_FORMATS),w=x==null||x.includes(Le.UPC_A);if(m&&w){const C=f.getRawBytes(),R=new Ue(f.getText().substring(1),C,C?C.length:null,f.getResultPoints(),Le.UPC_A);return R.putAllMetadata(f.getResultMetadata()),R}return f}catch{}throw new me}reset(){for(let r of this.readers)r.reset()}}class Ln extends Ut{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(r,a){for(let l=0;l<a.length;l++)if(Ut.patternMatchVariance(r,a[l],Ln.MAX_INDIVIDUAL_VARIANCE)<Ln.MAX_AVG_VARIANCE)return l;throw new me}static count(r){return We.sum(new Int32Array(r))}static increment(r,a){let l=0,h=a[0];for(let f=1;f<r.length;f++)a[f]>h&&(h=a[f],l=f);r[l]++}static decrement(r,a){let l=0,h=a[0];for(let f=1;f<r.length;f++)a[f]<h&&(h=a[f],l=f);r[l]--}static isFinderPattern(r){let a=r[0]+r[1],l=a+r[2]+r[3],h=a/l;if(h>=Ln.MIN_FINDER_PATTERN_RATIO&&h<=Ln.MAX_FINDER_PATTERN_RATIO){let f=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;for(let x of r)x>m&&(m=x),x<f&&(f=x);return m<10*f}return!1}}Ln.MAX_AVG_VARIANCE=.2,Ln.MAX_INDIVIDUAL_VARIANCE=.45,Ln.MIN_FINDER_PATTERN_RATIO=9.5/12,Ln.MAX_FINDER_PATTERN_RATIO=12.5/14;class Ti{constructor(r,a){this.value=r,this.checksumPortion=a}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(r){if(!(r instanceof Ti))return!1;const a=r;return this.value===a.value&&this.checksumPortion===a.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class yr{constructor(r,a,l,h,f){this.value=r,this.startEnd=a,this.value=r,this.startEnd=a,this.resultPoints=new Array,this.resultPoints.push(new Fe(l,f)),this.resultPoints.push(new Fe(h,f))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(r){if(!(r instanceof yr))return!1;const a=r;return this.value===a.value}hashCode(){return this.value}}class Wi{constructor(){}static getRSSvalue(r,a,l){let h=0;for(let w of r)h+=w;let f=0,m=0,x=r.length;for(let w=0;w<x-1;w++){let C;for(C=1,m|=1<<w;C<r[w];C++,m&=~(1<<w)){let R=Wi.combins(h-C-1,x-w-2);if(l&&m===0&&h-C-(x-w-1)>=x-w-1&&(R-=Wi.combins(h-C-(x-w),x-w-2)),x-w-1>1){let P=0;for(let B=h-C-(x-w-2);B>a;B--)P+=Wi.combins(h-C-B-1,x-w-3);R-=P*(x-1-w)}else h-C>a&&R--;f+=R}h-=C}return f}static combins(r,a){let l,h;r-a>a?(h=a,l=r-a):(h=r-a,l=a);let f=1,m=1;for(let x=r;x>l;x--)f*=x,m<=h&&(f/=m,m++);for(;m<=h;)f/=m,m++;return f}}class _s{static buildBitArray(r){let a=r.length*2-1;r[r.length-1].getRightChar()==null&&(a-=1);let l=12*a,h=new ae(l),f=0,x=r[0].getRightChar().getValue();for(let w=11;w>=0;--w)(x&1<<w)!=0&&h.set(f),f++;for(let w=1;w<r.length;++w){let C=r[w],R=C.getLeftChar().getValue();for(let P=11;P>=0;--P)(R&1<<P)!=0&&h.set(f),f++;if(C.getRightChar()!=null){let P=C.getRightChar().getValue();for(let B=11;B>=0;--B)(P&1<<B)!=0&&h.set(f),f++}}return h}}class lr{constructor(r,a){a?this.decodedInformation=null:(this.finished=r,this.decodedInformation=a)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class ws{constructor(r){this.newPosition=r}getNewPosition(){return this.newPosition}}class Pn extends ws{constructor(r,a){super(r),this.value=a}getValue(){return this.value}isFNC1(){return this.value===Pn.FNC1}}Pn.FNC1="$";class vi extends ws{constructor(r,a,l){super(r),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=a}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Ci extends ws{constructor(r,a,l){if(super(r),a<0||a>10||l<0||l>10)throw new j;this.firstDigit=a,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Ci.FNC1}isSecondDigitFNC1(){return this.secondDigit===Ci.FNC1}isAnyFNC1(){return this.firstDigit===Ci.FNC1||this.secondDigit===Ci.FNC1}}Ci.FNC1=10;class je{constructor(){}static parseFieldsInGeneralPurpose(r){if(!r)return null;if(r.length<2)throw new me;let a=r.substring(0,2);for(let f of je.TWO_DIGIT_DATA_LENGTH)if(f[0]===a)return f[1]===je.VARIABLE_LENGTH?je.processVariableAI(2,f[2],r):je.processFixedAI(2,f[1],r);if(r.length<3)throw new me;let l=r.substring(0,3);for(let f of je.THREE_DIGIT_DATA_LENGTH)if(f[0]===l)return f[1]===je.VARIABLE_LENGTH?je.processVariableAI(3,f[2],r):je.processFixedAI(3,f[1],r);for(let f of je.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(f[0]===l)return f[1]===je.VARIABLE_LENGTH?je.processVariableAI(4,f[2],r):je.processFixedAI(4,f[1],r);if(r.length<4)throw new me;let h=r.substring(0,4);for(let f of je.FOUR_DIGIT_DATA_LENGTH)if(f[0]===h)return f[1]===je.VARIABLE_LENGTH?je.processVariableAI(4,f[2],r):je.processFixedAI(4,f[1],r);throw new me}static processFixedAI(r,a,l){if(l.length<r)throw new me;let h=l.substring(0,r);if(l.length<r+a)throw new me;let f=l.substring(r,r+a),m=l.substring(r+a),x="("+h+")"+f,w=je.parseFieldsInGeneralPurpose(m);return w==null?x:x+w}static processVariableAI(r,a,l){let h=l.substring(0,r),f;l.length<r+a?f=l.length:f=r+a;let m=l.substring(r,f),x=l.substring(f),w="("+h+")"+m,C=je.parseFieldsInGeneralPurpose(x);return C==null?w:w+C}}je.VARIABLE_LENGTH=[],je.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",je.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",je.VARIABLE_LENGTH,20],["22",je.VARIABLE_LENGTH,29],["30",je.VARIABLE_LENGTH,8],["37",je.VARIABLE_LENGTH,8],["90",je.VARIABLE_LENGTH,30],["91",je.VARIABLE_LENGTH,30],["92",je.VARIABLE_LENGTH,30],["93",je.VARIABLE_LENGTH,30],["94",je.VARIABLE_LENGTH,30],["95",je.VARIABLE_LENGTH,30],["96",je.VARIABLE_LENGTH,30],["97",je.VARIABLE_LENGTH,3],["98",je.VARIABLE_LENGTH,30],["99",je.VARIABLE_LENGTH,30]],je.THREE_DIGIT_DATA_LENGTH=[["240",je.VARIABLE_LENGTH,30],["241",je.VARIABLE_LENGTH,30],["242",je.VARIABLE_LENGTH,6],["250",je.VARIABLE_LENGTH,30],["251",je.VARIABLE_LENGTH,30],["253",je.VARIABLE_LENGTH,17],["254",je.VARIABLE_LENGTH,20],["400",je.VARIABLE_LENGTH,30],["401",je.VARIABLE_LENGTH,30],["402",17],["403",je.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",je.VARIABLE_LENGTH,20],["421",je.VARIABLE_LENGTH,15],["422",3],["423",je.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],je.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",je.VARIABLE_LENGTH,15],["391",je.VARIABLE_LENGTH,18],["392",je.VARIABLE_LENGTH,15],["393",je.VARIABLE_LENGTH,18],["703",je.VARIABLE_LENGTH,30]],je.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",je.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",je.VARIABLE_LENGTH,20],["8003",je.VARIABLE_LENGTH,30],["8004",je.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",je.VARIABLE_LENGTH,30],["8008",je.VARIABLE_LENGTH,12],["8018",18],["8020",je.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",je.VARIABLE_LENGTH,70],["8200",je.VARIABLE_LENGTH,70]];class mi{constructor(r){this.buffer=new Y,this.information=r}decodeAllCodes(r,a){let l=a,h=null;do{let f=this.decodeGeneralPurposeField(l,h),m=je.parseFieldsInGeneralPurpose(f.getNewString());if(m!=null&&r.append(m),f.isRemaining()?h=""+f.getRemainingValue():h=null,l===f.getNewPosition())break;l=f.getNewPosition()}while(!0);return r.toString()}isStillNumeric(r){if(r+7>this.information.getSize())return r+4<=this.information.getSize();for(let a=r;a<r+3;++a)if(this.information.get(a))return!0;return this.information.get(r+3)}decodeNumeric(r){if(r+7>this.information.getSize()){let f=this.extractNumericValueFromBitArray(r,4);return f===0?new Ci(this.information.getSize(),Ci.FNC1,Ci.FNC1):new Ci(this.information.getSize(),f-1,Ci.FNC1)}let a=this.extractNumericValueFromBitArray(r,7),l=(a-8)/11,h=(a-8)%11;return new Ci(r+7,l,h)}extractNumericValueFromBitArray(r,a){return mi.extractNumericValueFromBitArray(this.information,r,a)}static extractNumericValueFromBitArray(r,a,l){let h=0;for(let f=0;f<l;++f)r.get(a+f)&&(h|=1<<l-f-1);return h}decodeGeneralPurposeField(r,a){this.buffer.setLengthToZero(),a!=null&&this.buffer.append(a),this.current.setPosition(r);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new vi(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new vi(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let r,a;do{let l=this.current.getPosition();if(this.current.isAlpha()?(a=this.parseAlphaBlock(),r=a.isFinished()):this.current.isIsoIec646()?(a=this.parseIsoIec646Block(),r=a.isFinished()):(a=this.parseNumericBlock(),r=a.isFinished()),!(l!==this.current.getPosition())&&!r)break}while(!r);return a.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let r=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFirstDigitFNC1()){let a;return r.isSecondDigitFNC1()?a=new vi(this.current.getPosition(),this.buffer.toString()):a=new vi(this.current.getPosition(),this.buffer.toString(),r.getSecondDigit()),new lr(!0,a)}if(this.buffer.append(r.getFirstDigit()),r.isSecondDigitFNC1()){let a=new vi(this.current.getPosition(),this.buffer.toString());return new lr(!0,a)}this.buffer.append(r.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new lr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let r=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let a=new vi(this.current.getPosition(),this.buffer.toString());return new lr(!0,a)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new lr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let r=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let a=new vi(this.current.getPosition(),this.buffer.toString());return new lr(!0,a)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new lr(!1)}isStillIsoIec646(r){if(r+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(r,5);if(a>=5&&a<16)return!0;if(r+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(r,7);if(l>=64&&l<116)return!0;if(r+8>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(r,8);return h>=232&&h<253}decodeIsoIec646(r){let a=this.extractNumericValueFromBitArray(r,5);if(a===15)return new Pn(r+5,Pn.FNC1);if(a>=5&&a<15)return new Pn(r+5,"0"+(a-5));let l=this.extractNumericValueFromBitArray(r,7);if(l>=64&&l<90)return new Pn(r+7,""+(l+1));if(l>=90&&l<116)return new Pn(r+7,""+(l+7));let h=this.extractNumericValueFromBitArray(r,8),f;switch(h){case 232:f="!";break;case 233:f='"';break;case 234:f="%";break;case 235:f="&";break;case 236:f="'";break;case 237:f="(";break;case 238:f=")";break;case 239:f="*";break;case 240:f="+";break;case 241:f=",";break;case 242:f="-";break;case 243:f=".";break;case 244:f="/";break;case 245:f=":";break;case 246:f=";";break;case 247:f="<";break;case 248:f="=";break;case 249:f=">";break;case 250:f="?";break;case 251:f="_";break;case 252:f=" ";break;default:throw new j}return new Pn(r+8,f)}isStillAlpha(r){if(r+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(r,5);if(a>=5&&a<16)return!0;if(r+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(r,6);return l>=16&&l<63}decodeAlphanumeric(r){let a=this.extractNumericValueFromBitArray(r,5);if(a===15)return new Pn(r+5,Pn.FNC1);if(a>=5&&a<15)return new Pn(r+5,"0"+(a-5));let l=this.extractNumericValueFromBitArray(r,6);if(l>=32&&l<58)return new Pn(r+6,""+(l+33));let h;switch(l){case 58:h="*";break;case 59:h=",";break;case 60:h="-";break;case 61:h=".";break;case 62:h="/";break;default:throw new di("Decoding invalid alphanumeric value: "+l)}return new Pn(r+6,h)}isAlphaTo646ToAlphaLatch(r){if(r+1>this.information.getSize())return!1;for(let a=0;a<5&&a+r<this.information.getSize();++a)if(a===2){if(!this.information.get(r+2))return!1}else if(this.information.get(r+a))return!1;return!0}isAlphaOr646ToNumericLatch(r){if(r+3>this.information.getSize())return!1;for(let a=r;a<r+3;++a)if(this.information.get(a))return!1;return!0}isNumericToAlphaNumericLatch(r){if(r+1>this.information.getSize())return!1;for(let a=0;a<4&&a+r<this.information.getSize();++a)if(this.information.get(r+a))return!1;return!0}}class vn{constructor(r){this.information=r,this.generalDecoder=new mi(r)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Vt extends vn{constructor(r){super(r)}encodeCompressedGtin(r,a){r.append("(01)");let l=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,a,l)}encodeCompressedGtinWithoutAI(r,a,l){for(let h=0;h<4;++h){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(a+10*h,10);f/100===0&&r.append("0"),f/10===0&&r.append("0"),r.append(f)}Vt.appendCheckDigit(r,l)}static appendCheckDigit(r,a){let l=0;for(let h=0;h<13;h++){let f=r.charAt(h+a).charCodeAt(0)-48;l+=(h&1)===0?3*f:f}l=10-l%10,l===10&&(l=0),r.append(l)}}Vt.GTIN_SIZE=40;class Z extends Vt{constructor(r){super(r)}parseInformation(){let r=new Y;r.append("(01)");let a=r.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(Z.HEADER_SIZE,4);return r.append(l),this.encodeCompressedGtinWithoutAI(r,Z.HEADER_SIZE+4,a),this.getGeneralDecoder().decodeAllCodes(r,Z.HEADER_SIZE+44)}}Z.HEADER_SIZE=4;class at extends vn{constructor(r){super(r)}parseInformation(){let r=new Y;return this.getGeneralDecoder().decodeAllCodes(r,at.HEADER_SIZE)}}at.HEADER_SIZE=5;class ct extends Vt{constructor(r){super(r)}encodeCompressedWeight(r,a,l){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(a,l);this.addWeightCode(r,h);let f=this.checkWeight(h),m=1e5;for(let x=0;x<5;++x)f/m===0&&r.append("0"),m/=10;r.append(f)}}class zn extends ct{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()!=zn.HEADER_SIZE+ct.GTIN_SIZE+zn.WEIGHT_SIZE)throw new me;let r=new Y;return this.encodeCompressedGtin(r,zn.HEADER_SIZE),this.encodeCompressedWeight(r,zn.HEADER_SIZE+ct.GTIN_SIZE,zn.WEIGHT_SIZE),r.toString()}}zn.HEADER_SIZE=5,zn.WEIGHT_SIZE=15;class oi extends zn{constructor(r){super(r)}addWeightCode(r,a){r.append("(3103)")}checkWeight(r){return r}}class Qn extends zn{constructor(r){super(r)}addWeightCode(r,a){a<1e4?r.append("(3202)"):r.append("(3203)")}checkWeight(r){return r<1e4?r:r-1e4}}class Zn extends Vt{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<Zn.HEADER_SIZE+Vt.GTIN_SIZE)throw new me;let r=new Y;this.encodeCompressedGtin(r,Zn.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(Zn.HEADER_SIZE+Vt.GTIN_SIZE,Zn.LAST_DIGIT_SIZE);r.append("(392"),r.append(a),r.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(Zn.HEADER_SIZE+Vt.GTIN_SIZE+Zn.LAST_DIGIT_SIZE,null);return r.append(l.getNewString()),r.toString()}}Zn.HEADER_SIZE=8,Zn.LAST_DIGIT_SIZE=2;class pn extends Vt{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<pn.HEADER_SIZE+Vt.GTIN_SIZE)throw new me;let r=new Y;this.encodeCompressedGtin(r,pn.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(pn.HEADER_SIZE+Vt.GTIN_SIZE,pn.LAST_DIGIT_SIZE);r.append("(393"),r.append(a),r.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(pn.HEADER_SIZE+Vt.GTIN_SIZE+pn.LAST_DIGIT_SIZE,pn.FIRST_THREE_DIGITS_SIZE);l/100==0&&r.append("0"),l/10==0&&r.append("0"),r.append(l);let h=this.getGeneralDecoder().decodeGeneralPurposeField(pn.HEADER_SIZE+Vt.GTIN_SIZE+pn.LAST_DIGIT_SIZE+pn.FIRST_THREE_DIGITS_SIZE,null);return r.append(h.getNewString()),r.toString()}}pn.HEADER_SIZE=8,pn.LAST_DIGIT_SIZE=2,pn.FIRST_THREE_DIGITS_SIZE=10;class Rt extends ct{constructor(r,a,l){super(r),this.dateCode=l,this.firstAIdigits=a}parseInformation(){if(this.getInformation().getSize()!=Rt.HEADER_SIZE+Rt.GTIN_SIZE+Rt.WEIGHT_SIZE+Rt.DATE_SIZE)throw new me;let r=new Y;return this.encodeCompressedGtin(r,Rt.HEADER_SIZE),this.encodeCompressedWeight(r,Rt.HEADER_SIZE+Rt.GTIN_SIZE,Rt.WEIGHT_SIZE),this.encodeCompressedDate(r,Rt.HEADER_SIZE+Rt.GTIN_SIZE+Rt.WEIGHT_SIZE),r.toString()}encodeCompressedDate(r,a){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(a,Rt.DATE_SIZE);if(l==38400)return;r.append("("),r.append(this.dateCode),r.append(")");let h=l%32;l/=32;let f=l%12+1;l/=12;let m=l;m/10==0&&r.append("0"),r.append(m),f/10==0&&r.append("0"),r.append(f),h/10==0&&r.append("0"),r.append(h)}addWeightCode(r,a){r.append("("),r.append(this.firstAIdigits),r.append(a/1e5),r.append(")")}checkWeight(r){return r%1e5}}Rt.HEADER_SIZE=8,Rt.WEIGHT_SIZE=20,Rt.DATE_SIZE=16;function Bn(L){try{if(L.get(1))return new Z(L);if(!L.get(2))return new at(L);switch(mi.extractNumericValueFromBitArray(L,1,4)){case 4:return new oi(L);case 5:return new Qn(L)}switch(mi.extractNumericValueFromBitArray(L,1,5)){case 12:return new Zn(L);case 13:return new pn(L)}switch(mi.extractNumericValueFromBitArray(L,1,7)){case 56:return new Rt(L,"310","11");case 57:return new Rt(L,"320","11");case 58:return new Rt(L,"310","13");case 59:return new Rt(L,"320","13");case 60:return new Rt(L,"310","15");case 61:return new Rt(L,"320","15");case 62:return new Rt(L,"310","17");case 63:return new Rt(L,"320","17")}}catch(r){throw console.log(r),new di("unknown decoder: "+L)}}class Jn{constructor(r,a,l,h){this.leftchar=r,this.rightchar=a,this.finderpattern=l,this.maybeLast=h}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(r,a){return r instanceof Jn?Jn.equalsOrNull(r.leftchar,a.leftchar)&&Jn.equalsOrNull(r.rightchar,a.rightchar)&&Jn.equalsOrNull(r.finderpattern,a.finderpattern):!1}static equalsOrNull(r,a){return r===null?a===null:Jn.equals(r,a)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class $t{constructor(r,a,l){this.pairs=r,this.rowNumber=a,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(r){return this.checkEqualitity(this,r)}toString(){return"{ "+this.pairs+" }"}equals(r,a){return r instanceof $t?this.checkEqualitity(r,a)&&r.wasReversed===a.wasReversed:!1}checkEqualitity(r,a){if(!r||!a)return;let l;return r.forEach((h,f)=>{a.forEach(m=>{h.getLeftChar().getValue()===m.getLeftChar().getValue()&&h.getRightChar().getValue()===m.getRightChar().getValue()&&h.getFinderPatter().getValue()===m.getFinderPatter().getValue()&&(l=!0)})}),l}}class Ie extends Ln{constructor(r){super(...arguments),this.pairs=new Array(Ie.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=r===!0}decodeRow(r,a,l){this.pairs.length=0,this.startFromEven=!1;try{return Ie.constructResult(this.decodeRow2pairs(r,a))}catch(h){this.verbose&&console.log(h)}return this.pairs.length=0,this.startFromEven=!0,Ie.constructResult(this.decodeRow2pairs(r,a))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(r,a){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(a,this.pairs,r))}catch(f){if(f instanceof me){if(!this.pairs.length)throw new me;l=!0}}if(this.checkChecksum())return this.pairs;let h;if(this.rows.length?h=!0:h=!1,this.storeRow(r,!1),h){let f=this.checkRowsBoolean(!1);if(f!=null||(f=this.checkRowsBoolean(!0),f!=null))return f}throw new me}checkRowsBoolean(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());let a=null;try{a=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return r&&(this.rows=this.rows.reverse()),a}checkRows(r,a){for(let l=a;l<this.rows.length;l++){let h=this.rows[l];this.pairs.length=0;for(let m of r)this.pairs.push(m.getPairs());if(this.pairs.push(h.getPairs()),!Ie.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let f=new Array(r);f.push(h);try{return this.checkRows(f,l+1)}catch(m){this.verbose&&console.log(m)}}throw new me}static isValidSequence(r){for(let a of Ie.FINDER_PATTERN_SEQUENCES){if(r.length>a.length)continue;let l=!0;for(let h=0;h<r.length;h++)if(r[h].getFinderPattern().getValue()!=a[h]){l=!1;break}if(l)return!0}return!1}storeRow(r,a){let l=0,h=!1,f=!1;for(;l<this.rows.length;){let m=this.rows[l];if(m.getRowNumber()>r){f=m.isEquivalent(this.pairs);break}h=m.isEquivalent(this.pairs),l++}f||h||Ie.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new $t(this.pairs,r,a)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(r,a){for(let l of a)if(l.getPairs().length!==r.length){for(let h of l.getPairs())for(let f of r)if(Jn.equals(h,f))break}}static isPartialRow(r,a){for(let l of a){let h=!0;for(let f of r){let m=!1;for(let x of l.getPairs())if(f.equals(x)){m=!0;break}if(!m){h=!1;break}}if(h)return!0}return!1}getRows(){return this.rows}static constructResult(r){let a=_s.buildBitArray(r),h=Bn(a).parseInformation(),f=r[0].getFinderPattern().getResultPoints(),m=r[r.length-1].getFinderPattern().getResultPoints(),x=[f[0],f[1],m[0],m[1]];return new Ue(h,null,null,x,Le.RSS_EXPANDED,null)}checkChecksum(){let r=this.pairs.get(0),a=r.getLeftChar(),l=r.getRightChar();if(l==null)return!1;let h=l.getChecksumPortion(),f=2;for(let x=1;x<this.pairs.size();++x){let w=this.pairs.get(x);h+=w.getLeftChar().getChecksumPortion(),f++;let C=w.getRightChar();C!=null&&(h+=C.getChecksumPortion(),f++)}return h%=211,211*(f-4)+h==a.getValue()}static getNextSecondBar(r,a){let l;return r.get(a)?(l=r.getNextUnset(a),l=r.getNextSet(l)):(l=r.getNextSet(a),l=r.getNextUnset(l)),l}retrieveNextPair(r,a,l){let h=a.length%2==0;this.startFromEven&&(h=!h);let f,m=!0,x=-1;do this.findNextPair(r,a,x),f=this.parseFoundFinderPattern(r,l,h),f==null?x=Ie.getNextSecondBar(r,this.startEnd[0]):m=!1;while(m);let w=this.decodeDataCharacter(r,f,h,!0);if(!this.isEmptyPair(a)&&a[a.length-1].mustBeLast())throw new me;let C;try{C=this.decodeDataCharacter(r,f,h,!1)}catch(R){C=null,this.verbose&&console.log(R)}return new Jn(w,C,f,!0)}isEmptyPair(r){return r.length===0}findNextPair(r,a,l){let h=this.getDecodeFinderCounters();h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=r.getSize(),m;l>=0?m=l:this.isEmptyPair(a)?m=0:m=a[a.length-1].getFinderPattern().getStartEnd()[1];let x=a.length%2!=0;this.startFromEven&&(x=!x);let w=!1;for(;m<f&&(w=!r.get(m),!!w);)m++;let C=0,R=m;for(let P=m;P<f;P++)if(r.get(P)!=w)h[C]++;else{if(C==3){if(x&&Ie.reverseCounters(h),Ie.isFinderPattern(h)){this.startEnd[0]=R,this.startEnd[1]=P;return}x&&Ie.reverseCounters(h),R+=h[0]+h[1],h[0]=h[2],h[1]=h[3],h[2]=0,h[3]=0,C--}else C++;h[C]=1,w=!w}throw new me}static reverseCounters(r){let a=r.length;for(let l=0;l<a/2;++l){let h=r[l];r[l]=r[a-l-1],r[a-l-1]=h}}parseFoundFinderPattern(r,a,l){let h,f,m;if(l){let C=this.startEnd[0]-1;for(;C>=0&&!r.get(C);)C--;C++,h=this.startEnd[0]-C,f=C,m=this.startEnd[1]}else f=this.startEnd[0],m=r.getNextUnset(this.startEnd[1]+1),h=m-this.startEnd[1];let x=this.getDecodeFinderCounters();K.arraycopy(x,0,x,1,x.length-1),x[0]=h;let w;try{w=this.parseFinderValue(x,Ie.FINDER_PATTERNS)}catch{return null}return new yr(w,[f,m],f,m,a)}decodeDataCharacter(r,a,l,h){let f=this.getDataCharacterCounters();for(let un=0;un<f.length;un++)f[un]=0;if(h)Ie.recordPatternInReverse(r,a.getStartEnd()[0],f);else{Ie.recordPattern(r,a.getStartEnd()[1],f);for(let un=0,Si=f.length-1;un<Si;un++,Si--){let dr=f[un];f[un]=f[Si],f[Si]=dr}}let m=17,x=We.sum(new Int32Array(f))/m,w=(a.getStartEnd()[1]-a.getStartEnd()[0])/15;if(Math.abs(x-w)/w>.3)throw new me;let C=this.getOddCounts(),R=this.getEvenCounts(),P=this.getOddRoundingErrors(),B=this.getEvenRoundingErrors();for(let un=0;un<f.length;un++){let Si=1*f[un]/x,dr=Si+.5;if(dr<1){if(Si<.3)throw new me;dr=1}else if(dr>8){if(Si>8.7)throw new me;dr=8}let ka=un/2;(un&1)==0?(C[ka]=dr,P[ka]=Si-dr):(R[ka]=dr,B[ka]=Si-dr)}this.adjustOddEvenCounts(m);let q=4*a.getValue()+(l?0:2)+(h?0:1)-1,$=0,ne=0;for(let un=C.length-1;un>=0;un--){if(Ie.isNotA1left(a,l,h)){let Si=Ie.WEIGHTS[q][2*un];ne+=C[un]*Si}$+=C[un]}let ue=0;for(let un=R.length-1;un>=0;un--)if(Ie.isNotA1left(a,l,h)){let Si=Ie.WEIGHTS[q][2*un+1];ue+=R[un]*Si}let Ee=ne+ue;if(($&1)!=0||$>13||$<4)throw new me;let Pe=(13-$)/2,Me=Ie.SYMBOL_WIDEST[Pe],Oe=9-Me,St=Wi.getRSSvalue(C,Me,!0),ht=Wi.getRSSvalue(R,Oe,!1),$n=Ie.EVEN_TOTAL_SUBSET[Pe],br=Ie.GSUM[Pe],Ui=St*$n+ht+br;return new Ti(Ui,Ee)}static isNotA1left(r,a,l){return!(r.getValue()==0&&a&&l)}adjustOddEvenCounts(r){let a=We.sum(new Int32Array(this.getOddCounts())),l=We.sum(new Int32Array(this.getEvenCounts())),h=!1,f=!1;a>13?f=!0:a<4&&(h=!0);let m=!1,x=!1;l>13?x=!0:l<4&&(m=!0);let w=a+l-r,C=(a&1)==1,R=(l&1)==0;if(w==1)if(C){if(R)throw new me;f=!0}else{if(!R)throw new me;x=!0}else if(w==-1)if(C){if(R)throw new me;h=!0}else{if(!R)throw new me;m=!0}else if(w==0){if(C){if(!R)throw new me;a<l?(h=!0,x=!0):(f=!0,m=!0)}else if(R)throw new me}else throw new me;if(h){if(f)throw new me;Ie.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&Ie.decrement(this.getOddCounts(),this.getOddRoundingErrors()),m){if(x)throw new me;Ie.increment(this.getEvenCounts(),this.getOddRoundingErrors())}x&&Ie.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ie.SYMBOL_WIDEST=[7,5,4,3,1],Ie.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Ie.GSUM=[0,348,1388,2948,3988],Ie.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Ie.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Ie.FINDER_PAT_A=0,Ie.FINDER_PAT_B=1,Ie.FINDER_PAT_C=2,Ie.FINDER_PAT_D=3,Ie.FINDER_PAT_E=4,Ie.FINDER_PAT_F=5,Ie.FINDER_PATTERN_SEQUENCES=[[Ie.FINDER_PAT_A,Ie.FINDER_PAT_A],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_B,Ie.FINDER_PAT_B],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_C,Ie.FINDER_PAT_B,Ie.FINDER_PAT_D],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_E,Ie.FINDER_PAT_B,Ie.FINDER_PAT_D,Ie.FINDER_PAT_C],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_E,Ie.FINDER_PAT_B,Ie.FINDER_PAT_D,Ie.FINDER_PAT_D,Ie.FINDER_PAT_F],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_E,Ie.FINDER_PAT_B,Ie.FINDER_PAT_D,Ie.FINDER_PAT_E,Ie.FINDER_PAT_F,Ie.FINDER_PAT_F],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_A,Ie.FINDER_PAT_B,Ie.FINDER_PAT_B,Ie.FINDER_PAT_C,Ie.FINDER_PAT_C,Ie.FINDER_PAT_D,Ie.FINDER_PAT_D],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_A,Ie.FINDER_PAT_B,Ie.FINDER_PAT_B,Ie.FINDER_PAT_C,Ie.FINDER_PAT_C,Ie.FINDER_PAT_D,Ie.FINDER_PAT_E,Ie.FINDER_PAT_E],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_A,Ie.FINDER_PAT_B,Ie.FINDER_PAT_B,Ie.FINDER_PAT_C,Ie.FINDER_PAT_C,Ie.FINDER_PAT_D,Ie.FINDER_PAT_E,Ie.FINDER_PAT_F,Ie.FINDER_PAT_F],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_A,Ie.FINDER_PAT_B,Ie.FINDER_PAT_B,Ie.FINDER_PAT_C,Ie.FINDER_PAT_D,Ie.FINDER_PAT_D,Ie.FINDER_PAT_E,Ie.FINDER_PAT_E,Ie.FINDER_PAT_F,Ie.FINDER_PAT_F]],Ie.MAX_PAIRS=11;class To extends Ti{constructor(r,a,l){super(r,a),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class en extends Ln{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(r,a,l){const h=this.decodePair(a,!1,r,l);en.addOrTally(this.possibleLeftPairs,h),a.reverse();let f=this.decodePair(a,!0,r,l);en.addOrTally(this.possibleRightPairs,f),a.reverse();for(let m of this.possibleLeftPairs)if(m.getCount()>1){for(let x of this.possibleRightPairs)if(x.getCount()>1&&en.checkChecksum(m,x))return en.constructResult(m,x)}throw new me}static addOrTally(r,a){if(a==null)return;let l=!1;for(let h of r)if(h.getValue()===a.getValue()){h.incrementCount(),l=!0;break}l||r.push(a)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(r,a){let l=4537077*r.getValue()+a.getValue(),h=new String(l).toString(),f=new Y;for(let C=13-h.length;C>0;C--)f.append("0");f.append(h);let m=0;for(let C=0;C<13;C++){let R=f.charAt(C).charCodeAt(0)-48;m+=(C&1)===0?3*R:R}m=10-m%10,m===10&&(m=0),f.append(m.toString());let x=r.getFinderPattern().getResultPoints(),w=a.getFinderPattern().getResultPoints();return new Ue(f.toString(),null,0,[x[0],x[1],w[0],w[1]],Le.RSS_14,new Date().getTime())}static checkChecksum(r,a){let l=(r.getChecksumPortion()+16*a.getChecksumPortion())%79,h=9*r.getFinderPattern().getValue()+a.getFinderPattern().getValue();return h>72&&h--,h>8&&h--,l===h}decodePair(r,a,l,h){try{let f=this.findFinderPattern(r,a),m=this.parseFoundFinderPattern(r,l,a,f),x=h==null?null:h.get(Ne.NEED_RESULT_POINT_CALLBACK);if(x!=null){let R=(f[0]+f[1])/2;a&&(R=r.getSize()-1-R),x.foundPossibleResultPoint(new Fe(R,l))}let w=this.decodeDataCharacter(r,m,!0),C=this.decodeDataCharacter(r,m,!1);return new To(1597*w.getValue()+C.getValue(),w.getChecksumPortion()+4*C.getChecksumPortion(),m)}catch{return null}}decodeDataCharacter(r,a,l){let h=this.getDataCharacterCounters();for(let ue=0;ue<h.length;ue++)h[ue]=0;if(l)Ut.recordPatternInReverse(r,a.getStartEnd()[0],h);else{Ut.recordPattern(r,a.getStartEnd()[1]+1,h);for(let ue=0,Ee=h.length-1;ue<Ee;ue++,Ee--){let Pe=h[ue];h[ue]=h[Ee],h[Ee]=Pe}}let f=l?16:15,m=We.sum(new Int32Array(h))/f,x=this.getOddCounts(),w=this.getEvenCounts(),C=this.getOddRoundingErrors(),R=this.getEvenRoundingErrors();for(let ue=0;ue<h.length;ue++){let Ee=h[ue]/m,Pe=Math.floor(Ee+.5);Pe<1?Pe=1:Pe>8&&(Pe=8);let Me=Math.floor(ue/2);(ue&1)===0?(x[Me]=Pe,C[Me]=Ee-Pe):(w[Me]=Pe,R[Me]=Ee-Pe)}this.adjustOddEvenCounts(l,f);let P=0,B=0;for(let ue=x.length-1;ue>=0;ue--)B*=9,B+=x[ue],P+=x[ue];let q=0,$=0;for(let ue=w.length-1;ue>=0;ue--)q*=9,q+=w[ue],$+=w[ue];let ne=B+3*q;if(l){if((P&1)!==0||P>12||P<4)throw new me;let ue=(12-P)/2,Ee=en.OUTSIDE_ODD_WIDEST[ue],Pe=9-Ee,Me=Wi.getRSSvalue(x,Ee,!1),Oe=Wi.getRSSvalue(w,Pe,!0),St=en.OUTSIDE_EVEN_TOTAL_SUBSET[ue],ht=en.OUTSIDE_GSUM[ue];return new Ti(Me*St+Oe+ht,ne)}else{if(($&1)!==0||$>10||$<4)throw new me;let ue=(10-$)/2,Ee=en.INSIDE_ODD_WIDEST[ue],Pe=9-Ee,Me=Wi.getRSSvalue(x,Ee,!0),Oe=Wi.getRSSvalue(w,Pe,!1),St=en.INSIDE_ODD_TOTAL_SUBSET[ue],ht=en.INSIDE_GSUM[ue];return new Ti(Oe*St+Me+ht,ne)}}findFinderPattern(r,a){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let h=r.getSize(),f=!1,m=0;for(;m<h&&(f=!r.get(m),a!==f);)m++;let x=0,w=m;for(let C=m;C<h;C++)if(r.get(C)!==f)l[x]++;else{if(x===3){if(Ln.isFinderPattern(l))return[w,C];w+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,x--}else x++;l[x]=1,f=!f}throw new me}parseFoundFinderPattern(r,a,l,h){let f=r.get(h[0]),m=h[0]-1;for(;m>=0&&f!==r.get(m);)m--;m++;const x=h[0]-m,w=this.getDecodeFinderCounters(),C=new Int32Array(w.length);K.arraycopy(w,0,C,1,w.length-1),C[0]=x;const R=this.parseFinderValue(C,en.FINDER_PATTERNS);let P=m,B=h[1];return l&&(P=r.getSize()-1-P,B=r.getSize()-1-B),new yr(R,[m,h[1]],P,B,a)}adjustOddEvenCounts(r,a){let l=We.sum(new Int32Array(this.getOddCounts())),h=We.sum(new Int32Array(this.getEvenCounts())),f=!1,m=!1,x=!1,w=!1;r?(l>12?m=!0:l<4&&(f=!0),h>12?w=!0:h<4&&(x=!0)):(l>11?m=!0:l<5&&(f=!0),h>10?w=!0:h<4&&(x=!0));let C=l+h-a,R=(l&1)===(r?1:0),P=(h&1)===1;if(C===1)if(R){if(P)throw new me;m=!0}else{if(!P)throw new me;w=!0}else if(C===-1)if(R){if(P)throw new me;f=!0}else{if(!P)throw new me;x=!0}else if(C===0){if(R){if(!P)throw new me;l<h?(f=!0,w=!0):(m=!0,x=!0)}else if(P)throw new me}else throw new me;if(f){if(m)throw new me;Ln.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(m&&Ln.decrement(this.getOddCounts(),this.getOddRoundingErrors()),x){if(w)throw new me;Ln.increment(this.getEvenCounts(),this.getOddRoundingErrors())}w&&Ln.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}en.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],en.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],en.OUTSIDE_GSUM=[0,161,961,2015,2715],en.INSIDE_GSUM=[0,336,1036,1516],en.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],en.INSIDE_ODD_WIDEST=[2,4,6,8],en.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Pi extends Ut{constructor(r,a){super(),this.readers=[],this.verbose=a===!0;const l=r?r.get(Ne.POSSIBLE_FORMATS):null,h=r&&r.get(Ne.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(Le.EAN_13)||l.includes(Le.UPC_A)||l.includes(Le.EAN_8)||l.includes(Le.UPC_E))&&this.readers.push(new Ks(r)),l.includes(Le.CODE_39)&&this.readers.push(new Xt(h)),l.includes(Le.CODE_128)&&this.readers.push(new De),l.includes(Le.ITF)&&this.readers.push(new nt),l.includes(Le.RSS_14)&&this.readers.push(new en),l.includes(Le.RSS_EXPANDED)&&this.readers.push(new Ie(this.verbose))):(this.readers.push(new Ks(r)),this.readers.push(new Xt),this.readers.push(new Ks(r)),this.readers.push(new De),this.readers.push(new nt),this.readers.push(new en),this.readers.push(new Ie(this.verbose)))}decodeRow(r,a,l){for(let h=0;h<this.readers.length;h++)try{return this.readers[h].decodeRow(r,a,l)}catch{}throw new me}reset(){this.readers.forEach(r=>r.reset())}}class vo extends ke{constructor(r=500,a){super(new Pi(a),r,a)}}class jt{constructor(r,a,l){this.ecCodewords=r,this.ecBlocks=[a],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Mt{constructor(r,a){this.count=r,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ct{constructor(r,a,l,h,f,m){this.versionNumber=r,this.symbolSizeRows=a,this.symbolSizeColumns=l,this.dataRegionSizeRows=h,this.dataRegionSizeColumns=f,this.ecBlocks=m;let x=0;const w=m.getECCodewords(),C=m.getECBlocks();for(let R of C)x+=R.getCount()*(R.getDataCodewords()+w);this.totalCodewords=x}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(r,a){if((r&1)!==0||(a&1)!==0)throw new j;for(let l of Ct.VERSIONS)if(l.symbolSizeRows===r&&l.symbolSizeColumns===a)return l;throw new j}toString(){return""+this.versionNumber}static buildVersions(){return[new Ct(1,10,10,8,8,new jt(5,new Mt(1,3))),new Ct(2,12,12,10,10,new jt(7,new Mt(1,5))),new Ct(3,14,14,12,12,new jt(10,new Mt(1,8))),new Ct(4,16,16,14,14,new jt(12,new Mt(1,12))),new Ct(5,18,18,16,16,new jt(14,new Mt(1,18))),new Ct(6,20,20,18,18,new jt(18,new Mt(1,22))),new Ct(7,22,22,20,20,new jt(20,new Mt(1,30))),new Ct(8,24,24,22,22,new jt(24,new Mt(1,36))),new Ct(9,26,26,24,24,new jt(28,new Mt(1,44))),new Ct(10,32,32,14,14,new jt(36,new Mt(1,62))),new Ct(11,36,36,16,16,new jt(42,new Mt(1,86))),new Ct(12,40,40,18,18,new jt(48,new Mt(1,114))),new Ct(13,44,44,20,20,new jt(56,new Mt(1,144))),new Ct(14,48,48,22,22,new jt(68,new Mt(1,174))),new Ct(15,52,52,24,24,new jt(42,new Mt(2,102))),new Ct(16,64,64,14,14,new jt(56,new Mt(2,140))),new Ct(17,72,72,16,16,new jt(36,new Mt(4,92))),new Ct(18,80,80,18,18,new jt(48,new Mt(4,114))),new Ct(19,88,88,20,20,new jt(56,new Mt(4,144))),new Ct(20,96,96,22,22,new jt(68,new Mt(4,174))),new Ct(21,104,104,24,24,new jt(56,new Mt(6,136))),new Ct(22,120,120,18,18,new jt(68,new Mt(6,175))),new Ct(23,132,132,20,20,new jt(62,new Mt(8,163))),new Ct(24,144,144,22,22,new jt(62,new Mt(8,156),new Mt(2,155))),new Ct(25,8,18,6,16,new jt(7,new Mt(1,5))),new Ct(26,8,32,6,14,new jt(11,new Mt(1,10))),new Ct(27,12,26,10,24,new jt(14,new Mt(1,16))),new Ct(28,12,36,10,16,new jt(18,new Mt(1,22))),new Ct(29,16,36,14,16,new jt(24,new Mt(1,32))),new Ct(30,16,48,14,22,new jt(28,new Mt(1,49)))]}}Ct.VERSIONS=Ct.buildVersions();class Os{constructor(r){const a=r.getHeight();if(a<8||a>144||(a&1)!==0)throw new j;this.version=Os.readVersion(r),this.mappingBitMatrix=this.extractDataRegion(r),this.readMappingMatrix=new et(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(r){const a=r.getHeight(),l=r.getWidth();return Ct.getVersionForDimensions(a,l)}readCodewords(){const r=new Int8Array(this.version.getTotalCodewords());let a=0,l=4,h=0;const f=this.mappingBitMatrix.getHeight(),m=this.mappingBitMatrix.getWidth();let x=!1,w=!1,C=!1,R=!1;do if(l===f&&h===0&&!x)r[a++]=this.readCorner1(f,m)&255,l-=2,h+=2,x=!0;else if(l===f-2&&h===0&&(m&3)!==0&&!w)r[a++]=this.readCorner2(f,m)&255,l-=2,h+=2,w=!0;else if(l===f+4&&h===2&&(m&7)===0&&!C)r[a++]=this.readCorner3(f,m)&255,l-=2,h+=2,C=!0;else if(l===f-2&&h===0&&(m&7)===4&&!R)r[a++]=this.readCorner4(f,m)&255,l-=2,h+=2,R=!0;else{do l<f&&h>=0&&!this.readMappingMatrix.get(h,l)&&(r[a++]=this.readUtah(l,h,f,m)&255),l-=2,h+=2;while(l>=0&&h<m);l+=1,h+=3;do l>=0&&h<m&&!this.readMappingMatrix.get(h,l)&&(r[a++]=this.readUtah(l,h,f,m)&255),l+=2,h-=2;while(l<f&&h>=0);l+=3,h+=1}while(l<f||h<m);if(a!==this.version.getTotalCodewords())throw new j;return r}readModule(r,a,l,h){return r<0&&(r+=l,a+=4-(l+4&7)),a<0&&(a+=h,r+=4-(h+4&7)),this.readMappingMatrix.set(a,r),this.mappingBitMatrix.get(a,r)}readUtah(r,a,l,h){let f=0;return this.readModule(r-2,a-2,l,h)&&(f|=1),f<<=1,this.readModule(r-2,a-1,l,h)&&(f|=1),f<<=1,this.readModule(r-1,a-2,l,h)&&(f|=1),f<<=1,this.readModule(r-1,a-1,l,h)&&(f|=1),f<<=1,this.readModule(r-1,a,l,h)&&(f|=1),f<<=1,this.readModule(r,a-2,l,h)&&(f|=1),f<<=1,this.readModule(r,a-1,l,h)&&(f|=1),f<<=1,this.readModule(r,a,l,h)&&(f|=1),f}readCorner1(r,a){let l=0;return this.readModule(r-1,0,r,a)&&(l|=1),l<<=1,this.readModule(r-1,1,r,a)&&(l|=1),l<<=1,this.readModule(r-1,2,r,a)&&(l|=1),l<<=1,this.readModule(0,a-2,r,a)&&(l|=1),l<<=1,this.readModule(0,a-1,r,a)&&(l|=1),l<<=1,this.readModule(1,a-1,r,a)&&(l|=1),l<<=1,this.readModule(2,a-1,r,a)&&(l|=1),l<<=1,this.readModule(3,a-1,r,a)&&(l|=1),l}readCorner2(r,a){let l=0;return this.readModule(r-3,0,r,a)&&(l|=1),l<<=1,this.readModule(r-2,0,r,a)&&(l|=1),l<<=1,this.readModule(r-1,0,r,a)&&(l|=1),l<<=1,this.readModule(0,a-4,r,a)&&(l|=1),l<<=1,this.readModule(0,a-3,r,a)&&(l|=1),l<<=1,this.readModule(0,a-2,r,a)&&(l|=1),l<<=1,this.readModule(0,a-1,r,a)&&(l|=1),l<<=1,this.readModule(1,a-1,r,a)&&(l|=1),l}readCorner3(r,a){let l=0;return this.readModule(r-1,0,r,a)&&(l|=1),l<<=1,this.readModule(r-1,a-1,r,a)&&(l|=1),l<<=1,this.readModule(0,a-3,r,a)&&(l|=1),l<<=1,this.readModule(0,a-2,r,a)&&(l|=1),l<<=1,this.readModule(0,a-1,r,a)&&(l|=1),l<<=1,this.readModule(1,a-3,r,a)&&(l|=1),l<<=1,this.readModule(1,a-2,r,a)&&(l|=1),l<<=1,this.readModule(1,a-1,r,a)&&(l|=1),l}readCorner4(r,a){let l=0;return this.readModule(r-3,0,r,a)&&(l|=1),l<<=1,this.readModule(r-2,0,r,a)&&(l|=1),l<<=1,this.readModule(r-1,0,r,a)&&(l|=1),l<<=1,this.readModule(0,a-2,r,a)&&(l|=1),l<<=1,this.readModule(0,a-1,r,a)&&(l|=1),l<<=1,this.readModule(1,a-1,r,a)&&(l|=1),l<<=1,this.readModule(2,a-1,r,a)&&(l|=1),l<<=1,this.readModule(3,a-1,r,a)&&(l|=1),l}extractDataRegion(r){const a=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(r.getHeight()!==a)throw new I("Dimension of bitMatrix must match the version size");const h=this.version.getDataRegionSizeRows(),f=this.version.getDataRegionSizeColumns(),m=a/h|0,x=l/f|0,w=m*h,C=x*f,R=new et(C,w);for(let P=0;P<m;++P){const B=P*h;for(let q=0;q<x;++q){const $=q*f;for(let ne=0;ne<h;++ne){const ue=P*(h+2)+1+ne,Ee=B+ne;for(let Pe=0;Pe<f;++Pe){const Me=q*(f+2)+1+Pe;if(r.get(Me,ue)){const Oe=$+Pe;R.set(Oe,Ee)}}}}}return R}}class Bi{constructor(r,a){this.numDataCodewords=r,this.codewords=a}static getDataBlocks(r,a){const l=a.getECBlocks();let h=0;const f=l.getECBlocks();for(let ne of f)h+=ne.getCount();const m=new Array(h);let x=0;for(let ne of f)for(let ue=0;ue<ne.getCount();ue++){const Ee=ne.getDataCodewords(),Pe=l.getECCodewords()+Ee;m[x++]=new Bi(Ee,new Uint8Array(Pe))}const C=m[0].codewords.length-l.getECCodewords(),R=C-1;let P=0;for(let ne=0;ne<R;ne++)for(let ue=0;ue<x;ue++)m[ue].codewords[ne]=r[P++];const B=a.getVersionNumber()===24,q=B?8:x;for(let ne=0;ne<q;ne++)m[ne].codewords[C-1]=r[P++];const $=m[0].codewords.length;for(let ne=C;ne<$;ne++)for(let ue=0;ue<x;ue++){const Ee=B?(ue+8)%x:ue,Pe=B&&Ee>7?ne-1:ne;m[Ee].codewords[Pe]=r[P++]}if(P!==r.length)throw new I;return m}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class kn{constructor(r){this.bytes=r,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(r){if(r<1||r>32||r>this.available())throw new I(""+r);let a=0,l=this.bitOffset,h=this.byteOffset;const f=this.bytes;if(l>0){const m=8-l,x=r<m?r:m,w=m-x,C=255>>8-x<<w;a=(f[h]&C)>>w,r-=x,l+=x,l===8&&(l=0,h++)}if(r>0){for(;r>=8;)a=a<<8|f[h]&255,h++,r-=8;if(r>0){const m=8-r,x=255>>m<<m;a=a<<r|(f[h]&x)>>m,l+=r}}return this.bitOffset=l,this.byteOffset=h,a}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Ot;(function(L){L[L.PAD_ENCODE=0]="PAD_ENCODE",L[L.ASCII_ENCODE=1]="ASCII_ENCODE",L[L.C40_ENCODE=2]="C40_ENCODE",L[L.TEXT_ENCODE=3]="TEXT_ENCODE",L[L.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",L[L.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",L[L.BASE256_ENCODE=6]="BASE256_ENCODE"})(Ot||(Ot={}));class ki{static decode(r){const a=new kn(r),l=new Y,h=new Y,f=new Array;let m=Ot.ASCII_ENCODE;do if(m===Ot.ASCII_ENCODE)m=this.decodeAsciiSegment(a,l,h);else{switch(m){case Ot.C40_ENCODE:this.decodeC40Segment(a,l);break;case Ot.TEXT_ENCODE:this.decodeTextSegment(a,l);break;case Ot.ANSIX12_ENCODE:this.decodeAnsiX12Segment(a,l);break;case Ot.EDIFACT_ENCODE:this.decodeEdifactSegment(a,l);break;case Ot.BASE256_ENCODE:this.decodeBase256Segment(a,l,f);break;default:throw new j}m=Ot.ASCII_ENCODE}while(m!==Ot.PAD_ENCODE&&a.available()>0);return h.length()>0&&l.append(h.toString()),new Nt(r,l.toString(),f.length===0?null:f,null)}static decodeAsciiSegment(r,a,l){let h=!1;do{let f=r.readBits(8);if(f===0)throw new j;if(f<=128)return h&&(f+=128),a.append(String.fromCharCode(f-1)),Ot.ASCII_ENCODE;if(f===129)return Ot.PAD_ENCODE;if(f<=229){const m=f-130;m<10&&a.append("0"),a.append(""+m)}else switch(f){case 230:return Ot.C40_ENCODE;case 231:return Ot.BASE256_ENCODE;case 232:a.append("");break;case 233:case 234:break;case 235:h=!0;break;case 236:a.append("[)>05"),l.insert(0,"");break;case 237:a.append("[)>06"),l.insert(0,"");break;case 238:return Ot.ANSIX12_ENCODE;case 239:return Ot.TEXT_ENCODE;case 240:return Ot.EDIFACT_ENCODE;case 241:break;default:if(f!==254||r.available()!==0)throw new j;break}}while(r.available()>0);return Ot.ASCII_ENCODE}static decodeC40Segment(r,a){let l=!1;const h=[];let f=0;do{if(r.available()===8)return;const m=r.readBits(8);if(m===254)return;this.parseTwoBytes(m,r.readBits(8),h);for(let x=0;x<3;x++){const w=h[x];switch(f){case 0:if(w<3)f=w+1;else if(w<this.C40_BASIC_SET_CHARS.length){const C=this.C40_BASIC_SET_CHARS[w];l?(a.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):a.append(C)}else throw new j;break;case 1:l?(a.append(String.fromCharCode(w+128)),l=!1):a.append(String.fromCharCode(w)),f=0;break;case 2:if(w<this.C40_SHIFT2_SET_CHARS.length){const C=this.C40_SHIFT2_SET_CHARS[w];l?(a.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):a.append(C)}else switch(w){case 27:a.append("");break;case 30:l=!0;break;default:throw new j}f=0;break;case 3:l?(a.append(String.fromCharCode(w+224)),l=!1):a.append(String.fromCharCode(w+96)),f=0;break;default:throw new j}}}while(r.available()>0)}static decodeTextSegment(r,a){let l=!1,h=[],f=0;do{if(r.available()===8)return;const m=r.readBits(8);if(m===254)return;this.parseTwoBytes(m,r.readBits(8),h);for(let x=0;x<3;x++){const w=h[x];switch(f){case 0:if(w<3)f=w+1;else if(w<this.TEXT_BASIC_SET_CHARS.length){const C=this.TEXT_BASIC_SET_CHARS[w];l?(a.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):a.append(C)}else throw new j;break;case 1:l?(a.append(String.fromCharCode(w+128)),l=!1):a.append(String.fromCharCode(w)),f=0;break;case 2:if(w<this.TEXT_SHIFT2_SET_CHARS.length){const C=this.TEXT_SHIFT2_SET_CHARS[w];l?(a.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):a.append(C)}else switch(w){case 27:a.append("");break;case 30:l=!0;break;default:throw new j}f=0;break;case 3:if(w<this.TEXT_SHIFT3_SET_CHARS.length){const C=this.TEXT_SHIFT3_SET_CHARS[w];l?(a.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):a.append(C),f=0}else throw new j;break;default:throw new j}}}while(r.available()>0)}static decodeAnsiX12Segment(r,a){const l=[];do{if(r.available()===8)return;const h=r.readBits(8);if(h===254)return;this.parseTwoBytes(h,r.readBits(8),l);for(let f=0;f<3;f++){const m=l[f];switch(m){case 0:a.append("\r");break;case 1:a.append("*");break;case 2:a.append(">");break;case 3:a.append(" ");break;default:if(m<14)a.append(String.fromCharCode(m+44));else if(m<40)a.append(String.fromCharCode(m+51));else throw new j;break}}}while(r.available()>0)}static parseTwoBytes(r,a,l){let h=(r<<8)+a-1,f=Math.floor(h/1600);l[0]=f,h-=f*1600,f=Math.floor(h/40),l[1]=f,l[2]=h-f*40}static decodeEdifactSegment(r,a){do{if(r.available()<=16)return;for(let l=0;l<4;l++){let h=r.readBits(6);if(h===31){const f=8-r.getBitOffset();f!==8&&r.readBits(f);return}(h&32)===0&&(h|=64),a.append(String.fromCharCode(h))}}while(r.available()>0)}static decodeBase256Segment(r,a,l){let h=1+r.getByteOffset();const f=this.unrandomize255State(r.readBits(8),h++);let m;if(f===0?m=r.available()/8|0:f<250?m=f:m=250*(f-249)+this.unrandomize255State(r.readBits(8),h++),m<0)throw new j;const x=new Uint8Array(m);for(let w=0;w<m;w++){if(r.available()<8)throw new j;x[w]=this.unrandomize255State(r.readBits(8),h++)}l.push(x);try{a.append(W.decode(x,J.ISO88591))}catch(w){throw new di("Platform does not support required encoding: "+w.message)}}static unrandomize255State(r,a){const l=149*a%255+1,h=r-l;return h>=0?h:h+256}}ki.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],ki.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],ki.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],ki.TEXT_SHIFT2_SET_CHARS=ki.C40_SHIFT2_SET_CHARS,ki.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Co{constructor(){this.rsDecoder=new Xi(Et.DATA_MATRIX_FIELD_256)}decode(r){const a=new Os(r),l=a.getVersion(),h=a.readCodewords(),f=Bi.getDataBlocks(h,l);let m=0;for(let C of f)m+=C.getNumDataCodewords();const x=new Uint8Array(m),w=f.length;for(let C=0;C<w;C++){const R=f[C],P=R.getCodewords(),B=R.getNumDataCodewords();this.correctErrors(P,B);for(let q=0;q<B;q++)x[q*w+C]=P[q]}return ki.decode(x)}correctErrors(r,a){const l=new Int32Array(r);try{this.rsDecoder.decode(l,r.length-a)}catch{throw new U}for(let h=0;h<a;h++)r[h]=l[h]}}class rt{constructor(r){this.image=r,this.rectangleDetector=new mn(this.image)}detect(){const r=this.rectangleDetector.detect();let a=this.detectSolid1(r);if(a=this.detectSolid2(a),a[3]=this.correctTopRight(a),!a[3])throw new me;a=this.shiftToModuleCenter(a);const l=a[0],h=a[1],f=a[2],m=a[3];let x=this.transitionsBetween(l,m)+1,w=this.transitionsBetween(f,m)+1;(x&1)===1&&(x+=1),(w&1)===1&&(w+=1),4*x<7*w&&4*w<7*x&&(x=w=Math.max(x,w));let C=rt.sampleGrid(this.image,l,h,f,m,x,w);return new ps(C,[l,h,f,m])}static shiftPoint(r,a,l){let h=(a.getX()-r.getX())/(l+1),f=(a.getY()-r.getY())/(l+1);return new Fe(r.getX()+h,r.getY()+f)}static moveAway(r,a,l){let h=r.getX(),f=r.getY();return h<a?h-=1:h+=1,f<l?f-=1:f+=1,new Fe(h,f)}detectSolid1(r){let a=r[0],l=r[1],h=r[3],f=r[2],m=this.transitionsBetween(a,l),x=this.transitionsBetween(l,h),w=this.transitionsBetween(h,f),C=this.transitionsBetween(f,a),R=m,P=[f,a,l,h];return R>x&&(R=x,P[0]=a,P[1]=l,P[2]=h,P[3]=f),R>w&&(R=w,P[0]=l,P[1]=h,P[2]=f,P[3]=a),R>C&&(P[0]=h,P[1]=f,P[2]=a,P[3]=l),P}detectSolid2(r){let a=r[0],l=r[1],h=r[2],f=r[3],m=this.transitionsBetween(a,f),x=rt.shiftPoint(l,h,(m+1)*4),w=rt.shiftPoint(h,l,(m+1)*4),C=this.transitionsBetween(x,a),R=this.transitionsBetween(w,f);return C<R?(r[0]=a,r[1]=l,r[2]=h,r[3]=f):(r[0]=l,r[1]=h,r[2]=f,r[3]=a),r}correctTopRight(r){let a=r[0],l=r[1],h=r[2],f=r[3],m=this.transitionsBetween(a,f),x=this.transitionsBetween(l,f),w=rt.shiftPoint(a,l,(x+1)*4),C=rt.shiftPoint(h,l,(m+1)*4);m=this.transitionsBetween(w,f),x=this.transitionsBetween(C,f);let R=new Fe(f.getX()+(h.getX()-l.getX())/(m+1),f.getY()+(h.getY()-l.getY())/(m+1)),P=new Fe(f.getX()+(a.getX()-l.getX())/(x+1),f.getY()+(a.getY()-l.getY())/(x+1));if(!this.isValid(R))return this.isValid(P)?P:null;if(!this.isValid(P))return R;let B=this.transitionsBetween(w,R)+this.transitionsBetween(C,R),q=this.transitionsBetween(w,P)+this.transitionsBetween(C,P);return B>q?R:P}shiftToModuleCenter(r){let a=r[0],l=r[1],h=r[2],f=r[3],m=this.transitionsBetween(a,f)+1,x=this.transitionsBetween(h,f)+1,w=rt.shiftPoint(a,l,x*4),C=rt.shiftPoint(h,l,m*4);m=this.transitionsBetween(w,f)+1,x=this.transitionsBetween(C,f)+1,(m&1)===1&&(m+=1),(x&1)===1&&(x+=1);let R=(a.getX()+l.getX()+h.getX()+f.getX())/4,P=(a.getY()+l.getY()+h.getY()+f.getY())/4;a=rt.moveAway(a,R,P),l=rt.moveAway(l,R,P),h=rt.moveAway(h,R,P),f=rt.moveAway(f,R,P);let B,q;return w=rt.shiftPoint(a,l,x*4),w=rt.shiftPoint(w,f,m*4),B=rt.shiftPoint(l,a,x*4),B=rt.shiftPoint(B,h,m*4),C=rt.shiftPoint(h,f,x*4),C=rt.shiftPoint(C,l,m*4),q=rt.shiftPoint(f,h,x*4),q=rt.shiftPoint(q,a,m*4),[w,B,C,q]}isValid(r){return r.getX()>=0&&r.getX()<this.image.getWidth()&&r.getY()>0&&r.getY()<this.image.getHeight()}static sampleGrid(r,a,l,h,f,m,x){return gi.getInstance().sampleGrid(r,m,x,.5,.5,m-.5,.5,m-.5,x-.5,.5,x-.5,a.getX(),a.getY(),f.getX(),f.getY(),h.getX(),h.getY(),l.getX(),l.getY())}transitionsBetween(r,a){let l=Math.trunc(r.getX()),h=Math.trunc(r.getY()),f=Math.trunc(a.getX()),m=Math.trunc(a.getY()),x=Math.abs(m-h)>Math.abs(f-l);if(x){let ne=l;l=h,h=ne,ne=f,f=m,m=ne}let w=Math.abs(f-l),C=Math.abs(m-h),R=-w/2,P=h<m?1:-1,B=l<f?1:-1,q=0,$=this.image.get(x?h:l,x?l:h);for(let ne=l,ue=h;ne!==f;ne+=B){let Ee=this.image.get(x?ue:ne,x?ne:ue);if(Ee!==$&&(q++,$=Ee),R+=C,R>0){if(ue===m)break;ue+=P,R-=w}}return q}}class Qi{constructor(){this.decoder=new Co}decode(r,a=null){let l,h;if(a!=null&&a.has(Ne.PURE_BARCODE)){const C=Qi.extractPureBits(r.getBlackMatrix());l=this.decoder.decode(C),h=Qi.NO_POINTS}else{const C=new rt(r.getBlackMatrix()).detect();l=this.decoder.decode(C.getBits()),h=C.getPoints()}const f=l.getRawBytes(),m=new Ue(l.getText(),f,8*f.length,h,Le.DATA_MATRIX,K.currentTimeMillis()),x=l.getByteSegments();x!=null&&m.putMetadata(_t.BYTE_SEGMENTS,x);const w=l.getECLevel();return w!=null&&m.putMetadata(_t.ERROR_CORRECTION_LEVEL,w),m}reset(){}static extractPureBits(r){const a=r.getTopLeftOnBit(),l=r.getBottomRightOnBit();if(a==null||l==null)throw new me;const h=this.moduleSize(a,r);let f=a[1];const m=l[1];let x=a[0];const C=(l[0]-x+1)/h,R=(m-f+1)/h;if(C<=0||R<=0)throw new me;const P=h/2;f+=P,x+=P;const B=new et(C,R);for(let q=0;q<R;q++){const $=f+q*h;for(let ne=0;ne<C;ne++)r.get(x+ne*h,$)&&B.set(ne,q)}return B}static moduleSize(r,a){const l=a.getWidth();let h=r[0];const f=r[1];for(;h<l&&a.get(h,f);)h++;if(h===l)throw new me;const m=h-r[0];if(m===0)throw new me;return m}}Qi.NO_POINTS=[];class Wr extends ke{constructor(r=500){super(new Qi,r)}}var Er;(function(L){L[L.L=0]="L",L[L.M=1]="M",L[L.Q=2]="Q",L[L.H=3]="H"})(Er||(Er={}));class Tt{constructor(r,a,l){this.value=r,this.stringValue=a,this.bits=l,Tt.FOR_BITS.set(l,this),Tt.FOR_VALUE.set(r,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(r){switch(r){case"L":return Tt.L;case"M":return Tt.M;case"Q":return Tt.Q;case"H":return Tt.H;default:throw new S(r+"not available")}}toString(){return this.stringValue}equals(r){if(!(r instanceof Tt))return!1;const a=r;return this.value===a.value}static forBits(r){if(r<0||r>=Tt.FOR_BITS.size)throw new I;return Tt.FOR_BITS.get(r)}}Tt.FOR_BITS=new Map,Tt.FOR_VALUE=new Map,Tt.L=new Tt(Er.L,"L",1),Tt.M=new Tt(Er.M,"M",0),Tt.Q=new Tt(Er.Q,"Q",3),Tt.H=new Tt(Er.H,"H",2);class Hn{constructor(r){this.errorCorrectionLevel=Tt.forBits(r>>3&3),this.dataMask=r&7}static numBitsDiffering(r,a){return ee.bitCount(r^a)}static decodeFormatInformation(r,a){const l=Hn.doDecodeFormatInformation(r,a);return l!==null?l:Hn.doDecodeFormatInformation(r^Hn.FORMAT_INFO_MASK_QR,a^Hn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(r,a){let l=Number.MAX_SAFE_INTEGER,h=0;for(const f of Hn.FORMAT_INFO_DECODE_LOOKUP){const m=f[0];if(m===r||m===a)return new Hn(f[1]);let x=Hn.numBitsDiffering(r,m);x<l&&(h=f[1],l=x),r!==a&&(x=Hn.numBitsDiffering(a,m),x<l&&(h=f[1],l=x))}return l<=3?new Hn(h):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(r){if(!(r instanceof Hn))return!1;const a=r;return this.errorCorrectionLevel===a.errorCorrectionLevel&&this.dataMask===a.dataMask}}Hn.FORMAT_INFO_MASK_QR=21522,Hn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class fe{constructor(r,...a){this.ecCodewordsPerBlock=r,this.ecBlocks=a}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let r=0;const a=this.ecBlocks;for(const l of a)r+=l.getCount();return r}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class H{constructor(r,a){this.count=r,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ye{constructor(r,a,...l){this.versionNumber=r,this.alignmentPatternCenters=a,this.ecBlocks=l;let h=0;const f=l[0].getECCodewordsPerBlock(),m=l[0].getECBlocks();for(const x of m)h+=x.getCount()*(x.getDataCodewords()+f);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(r){return this.ecBlocks[r.getValue()]}static getProvisionalVersionForDimension(r){if(r%4!==1)throw new j;try{return this.getVersionForNumber((r-17)/4)}catch{throw new j}}static getVersionForNumber(r){if(r<1||r>40)throw new I;return Ye.VERSIONS[r-1]}static decodeVersionInformation(r){let a=Number.MAX_SAFE_INTEGER,l=0;for(let h=0;h<Ye.VERSION_DECODE_INFO.length;h++){const f=Ye.VERSION_DECODE_INFO[h];if(f===r)return Ye.getVersionForNumber(h+7);const m=Hn.numBitsDiffering(r,f);m<a&&(l=h+7,a=m)}return a<=3?Ye.getVersionForNumber(l):null}buildFunctionPattern(){const r=this.getDimensionForVersion(),a=new et(r);a.setRegion(0,0,9,9),a.setRegion(r-8,0,8,9),a.setRegion(0,r-8,9,8);const l=this.alignmentPatternCenters.length;for(let h=0;h<l;h++){const f=this.alignmentPatternCenters[h]-2;for(let m=0;m<l;m++)h===0&&(m===0||m===l-1)||h===l-1&&m===0||a.setRegion(this.alignmentPatternCenters[m]-2,f,5,5)}return a.setRegion(6,9,1,r-17),a.setRegion(9,6,r-17,1),this.versionNumber>6&&(a.setRegion(r-11,0,3,6),a.setRegion(0,r-11,6,3)),a}toString(){return""+this.versionNumber}}Ye.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ye.VERSIONS=[new Ye(1,new Int32Array(0),new fe(7,new H(1,19)),new fe(10,new H(1,16)),new fe(13,new H(1,13)),new fe(17,new H(1,9))),new Ye(2,Int32Array.from([6,18]),new fe(10,new H(1,34)),new fe(16,new H(1,28)),new fe(22,new H(1,22)),new fe(28,new H(1,16))),new Ye(3,Int32Array.from([6,22]),new fe(15,new H(1,55)),new fe(26,new H(1,44)),new fe(18,new H(2,17)),new fe(22,new H(2,13))),new Ye(4,Int32Array.from([6,26]),new fe(20,new H(1,80)),new fe(18,new H(2,32)),new fe(26,new H(2,24)),new fe(16,new H(4,9))),new Ye(5,Int32Array.from([6,30]),new fe(26,new H(1,108)),new fe(24,new H(2,43)),new fe(18,new H(2,15),new H(2,16)),new fe(22,new H(2,11),new H(2,12))),new Ye(6,Int32Array.from([6,34]),new fe(18,new H(2,68)),new fe(16,new H(4,27)),new fe(24,new H(4,19)),new fe(28,new H(4,15))),new Ye(7,Int32Array.from([6,22,38]),new fe(20,new H(2,78)),new fe(18,new H(4,31)),new fe(18,new H(2,14),new H(4,15)),new fe(26,new H(4,13),new H(1,14))),new Ye(8,Int32Array.from([6,24,42]),new fe(24,new H(2,97)),new fe(22,new H(2,38),new H(2,39)),new fe(22,new H(4,18),new H(2,19)),new fe(26,new H(4,14),new H(2,15))),new Ye(9,Int32Array.from([6,26,46]),new fe(30,new H(2,116)),new fe(22,new H(3,36),new H(2,37)),new fe(20,new H(4,16),new H(4,17)),new fe(24,new H(4,12),new H(4,13))),new Ye(10,Int32Array.from([6,28,50]),new fe(18,new H(2,68),new H(2,69)),new fe(26,new H(4,43),new H(1,44)),new fe(24,new H(6,19),new H(2,20)),new fe(28,new H(6,15),new H(2,16))),new Ye(11,Int32Array.from([6,30,54]),new fe(20,new H(4,81)),new fe(30,new H(1,50),new H(4,51)),new fe(28,new H(4,22),new H(4,23)),new fe(24,new H(3,12),new H(8,13))),new Ye(12,Int32Array.from([6,32,58]),new fe(24,new H(2,92),new H(2,93)),new fe(22,new H(6,36),new H(2,37)),new fe(26,new H(4,20),new H(6,21)),new fe(28,new H(7,14),new H(4,15))),new Ye(13,Int32Array.from([6,34,62]),new fe(26,new H(4,107)),new fe(22,new H(8,37),new H(1,38)),new fe(24,new H(8,20),new H(4,21)),new fe(22,new H(12,11),new H(4,12))),new Ye(14,Int32Array.from([6,26,46,66]),new fe(30,new H(3,115),new H(1,116)),new fe(24,new H(4,40),new H(5,41)),new fe(20,new H(11,16),new H(5,17)),new fe(24,new H(11,12),new H(5,13))),new Ye(15,Int32Array.from([6,26,48,70]),new fe(22,new H(5,87),new H(1,88)),new fe(24,new H(5,41),new H(5,42)),new fe(30,new H(5,24),new H(7,25)),new fe(24,new H(11,12),new H(7,13))),new Ye(16,Int32Array.from([6,26,50,74]),new fe(24,new H(5,98),new H(1,99)),new fe(28,new H(7,45),new H(3,46)),new fe(24,new H(15,19),new H(2,20)),new fe(30,new H(3,15),new H(13,16))),new Ye(17,Int32Array.from([6,30,54,78]),new fe(28,new H(1,107),new H(5,108)),new fe(28,new H(10,46),new H(1,47)),new fe(28,new H(1,22),new H(15,23)),new fe(28,new H(2,14),new H(17,15))),new Ye(18,Int32Array.from([6,30,56,82]),new fe(30,new H(5,120),new H(1,121)),new fe(26,new H(9,43),new H(4,44)),new fe(28,new H(17,22),new H(1,23)),new fe(28,new H(2,14),new H(19,15))),new Ye(19,Int32Array.from([6,30,58,86]),new fe(28,new H(3,113),new H(4,114)),new fe(26,new H(3,44),new H(11,45)),new fe(26,new H(17,21),new H(4,22)),new fe(26,new H(9,13),new H(16,14))),new Ye(20,Int32Array.from([6,34,62,90]),new fe(28,new H(3,107),new H(5,108)),new fe(26,new H(3,41),new H(13,42)),new fe(30,new H(15,24),new H(5,25)),new fe(28,new H(15,15),new H(10,16))),new Ye(21,Int32Array.from([6,28,50,72,94]),new fe(28,new H(4,116),new H(4,117)),new fe(26,new H(17,42)),new fe(28,new H(17,22),new H(6,23)),new fe(30,new H(19,16),new H(6,17))),new Ye(22,Int32Array.from([6,26,50,74,98]),new fe(28,new H(2,111),new H(7,112)),new fe(28,new H(17,46)),new fe(30,new H(7,24),new H(16,25)),new fe(24,new H(34,13))),new Ye(23,Int32Array.from([6,30,54,78,102]),new fe(30,new H(4,121),new H(5,122)),new fe(28,new H(4,47),new H(14,48)),new fe(30,new H(11,24),new H(14,25)),new fe(30,new H(16,15),new H(14,16))),new Ye(24,Int32Array.from([6,28,54,80,106]),new fe(30,new H(6,117),new H(4,118)),new fe(28,new H(6,45),new H(14,46)),new fe(30,new H(11,24),new H(16,25)),new fe(30,new H(30,16),new H(2,17))),new Ye(25,Int32Array.from([6,32,58,84,110]),new fe(26,new H(8,106),new H(4,107)),new fe(28,new H(8,47),new H(13,48)),new fe(30,new H(7,24),new H(22,25)),new fe(30,new H(22,15),new H(13,16))),new Ye(26,Int32Array.from([6,30,58,86,114]),new fe(28,new H(10,114),new H(2,115)),new fe(28,new H(19,46),new H(4,47)),new fe(28,new H(28,22),new H(6,23)),new fe(30,new H(33,16),new H(4,17))),new Ye(27,Int32Array.from([6,34,62,90,118]),new fe(30,new H(8,122),new H(4,123)),new fe(28,new H(22,45),new H(3,46)),new fe(30,new H(8,23),new H(26,24)),new fe(30,new H(12,15),new H(28,16))),new Ye(28,Int32Array.from([6,26,50,74,98,122]),new fe(30,new H(3,117),new H(10,118)),new fe(28,new H(3,45),new H(23,46)),new fe(30,new H(4,24),new H(31,25)),new fe(30,new H(11,15),new H(31,16))),new Ye(29,Int32Array.from([6,30,54,78,102,126]),new fe(30,new H(7,116),new H(7,117)),new fe(28,new H(21,45),new H(7,46)),new fe(30,new H(1,23),new H(37,24)),new fe(30,new H(19,15),new H(26,16))),new Ye(30,Int32Array.from([6,26,52,78,104,130]),new fe(30,new H(5,115),new H(10,116)),new fe(28,new H(19,47),new H(10,48)),new fe(30,new H(15,24),new H(25,25)),new fe(30,new H(23,15),new H(25,16))),new Ye(31,Int32Array.from([6,30,56,82,108,134]),new fe(30,new H(13,115),new H(3,116)),new fe(28,new H(2,46),new H(29,47)),new fe(30,new H(42,24),new H(1,25)),new fe(30,new H(23,15),new H(28,16))),new Ye(32,Int32Array.from([6,34,60,86,112,138]),new fe(30,new H(17,115)),new fe(28,new H(10,46),new H(23,47)),new fe(30,new H(10,24),new H(35,25)),new fe(30,new H(19,15),new H(35,16))),new Ye(33,Int32Array.from([6,30,58,86,114,142]),new fe(30,new H(17,115),new H(1,116)),new fe(28,new H(14,46),new H(21,47)),new fe(30,new H(29,24),new H(19,25)),new fe(30,new H(11,15),new H(46,16))),new Ye(34,Int32Array.from([6,34,62,90,118,146]),new fe(30,new H(13,115),new H(6,116)),new fe(28,new H(14,46),new H(23,47)),new fe(30,new H(44,24),new H(7,25)),new fe(30,new H(59,16),new H(1,17))),new Ye(35,Int32Array.from([6,30,54,78,102,126,150]),new fe(30,new H(12,121),new H(7,122)),new fe(28,new H(12,47),new H(26,48)),new fe(30,new H(39,24),new H(14,25)),new fe(30,new H(22,15),new H(41,16))),new Ye(36,Int32Array.from([6,24,50,76,102,128,154]),new fe(30,new H(6,121),new H(14,122)),new fe(28,new H(6,47),new H(34,48)),new fe(30,new H(46,24),new H(10,25)),new fe(30,new H(2,15),new H(64,16))),new Ye(37,Int32Array.from([6,28,54,80,106,132,158]),new fe(30,new H(17,122),new H(4,123)),new fe(28,new H(29,46),new H(14,47)),new fe(30,new H(49,24),new H(10,25)),new fe(30,new H(24,15),new H(46,16))),new Ye(38,Int32Array.from([6,32,58,84,110,136,162]),new fe(30,new H(4,122),new H(18,123)),new fe(28,new H(13,46),new H(32,47)),new fe(30,new H(48,24),new H(14,25)),new fe(30,new H(42,15),new H(32,16))),new Ye(39,Int32Array.from([6,26,54,82,110,138,166]),new fe(30,new H(20,117),new H(4,118)),new fe(28,new H(40,47),new H(7,48)),new fe(30,new H(43,24),new H(22,25)),new fe(30,new H(10,15),new H(67,16))),new Ye(40,Int32Array.from([6,30,58,86,114,142,170]),new fe(30,new H(19,118),new H(6,119)),new fe(28,new H(18,47),new H(31,48)),new fe(30,new H(34,24),new H(34,25)),new fe(30,new H(20,15),new H(61,16)))];var Gn;(function(L){L[L.DATA_MASK_000=0]="DATA_MASK_000",L[L.DATA_MASK_001=1]="DATA_MASK_001",L[L.DATA_MASK_010=2]="DATA_MASK_010",L[L.DATA_MASK_011=3]="DATA_MASK_011",L[L.DATA_MASK_100=4]="DATA_MASK_100",L[L.DATA_MASK_101=5]="DATA_MASK_101",L[L.DATA_MASK_110=6]="DATA_MASK_110",L[L.DATA_MASK_111=7]="DATA_MASK_111"})(Gn||(Gn={}));class li{constructor(r,a){this.value=r,this.isMasked=a}unmaskBitMatrix(r,a){for(let l=0;l<a;l++)for(let h=0;h<a;h++)this.isMasked(l,h)&&r.flip(h,l)}}li.values=new Map([[Gn.DATA_MASK_000,new li(Gn.DATA_MASK_000,(L,r)=>(L+r&1)===0)],[Gn.DATA_MASK_001,new li(Gn.DATA_MASK_001,(L,r)=>(L&1)===0)],[Gn.DATA_MASK_010,new li(Gn.DATA_MASK_010,(L,r)=>r%3===0)],[Gn.DATA_MASK_011,new li(Gn.DATA_MASK_011,(L,r)=>(L+r)%3===0)],[Gn.DATA_MASK_100,new li(Gn.DATA_MASK_100,(L,r)=>(Math.floor(L/2)+Math.floor(r/3)&1)===0)],[Gn.DATA_MASK_101,new li(Gn.DATA_MASK_101,(L,r)=>L*r%6===0)],[Gn.DATA_MASK_110,new li(Gn.DATA_MASK_110,(L,r)=>L*r%6<3)],[Gn.DATA_MASK_111,new li(Gn.DATA_MASK_111,(L,r)=>(L+r+L*r%3&1)===0)]]);class Zi{constructor(r){const a=r.getHeight();if(a<21||(a&3)!==1)throw new j;this.bitMatrix=r}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let r=0;for(let f=0;f<6;f++)r=this.copyBit(f,8,r);r=this.copyBit(7,8,r),r=this.copyBit(8,8,r),r=this.copyBit(8,7,r);for(let f=5;f>=0;f--)r=this.copyBit(8,f,r);const a=this.bitMatrix.getHeight();let l=0;const h=a-7;for(let f=a-1;f>=h;f--)l=this.copyBit(8,f,l);for(let f=a-8;f<a;f++)l=this.copyBit(f,8,l);if(this.parsedFormatInfo=Hn.decodeFormatInformation(r,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new j}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const r=this.bitMatrix.getHeight(),a=Math.floor((r-17)/4);if(a<=6)return Ye.getVersionForNumber(a);let l=0;const h=r-11;for(let m=5;m>=0;m--)for(let x=r-9;x>=h;x--)l=this.copyBit(x,m,l);let f=Ye.decodeVersionInformation(l);if(f!==null&&f.getDimensionForVersion()===r)return this.parsedVersion=f,f;l=0;for(let m=5;m>=0;m--)for(let x=r-9;x>=h;x--)l=this.copyBit(m,x,l);if(f=Ye.decodeVersionInformation(l),f!==null&&f.getDimensionForVersion()===r)return this.parsedVersion=f,f;throw new j}copyBit(r,a,l){return(this.isMirror?this.bitMatrix.get(a,r):this.bitMatrix.get(r,a))?l<<1|1:l<<1}readCodewords(){const r=this.readFormatInformation(),a=this.readVersion(),l=li.values.get(r.getDataMask()),h=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,h);const f=a.buildFunctionPattern();let m=!0;const x=new Uint8Array(a.getTotalCodewords());let w=0,C=0,R=0;for(let P=h-1;P>0;P-=2){P===6&&P--;for(let B=0;B<h;B++){const q=m?h-1-B:B;for(let $=0;$<2;$++)f.get(P-$,q)||(R++,C<<=1,this.bitMatrix.get(P-$,q)&&(C|=1),R===8&&(x[w++]=C,R=0,C=0))}m=!m}if(w!==a.getTotalCodewords())throw new j;return x}remask(){if(this.parsedFormatInfo===null)return;const r=li.values[this.parsedFormatInfo.getDataMask()],a=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,a)}setMirror(r){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=r}mirror(){const r=this.bitMatrix;for(let a=0,l=r.getWidth();a<l;a++)for(let h=a+1,f=r.getHeight();h<f;h++)r.get(a,h)!==r.get(h,a)&&(r.flip(h,a),r.flip(a,h))}}class Oa{constructor(r,a){this.numDataCodewords=r,this.codewords=a}static getDataBlocks(r,a,l){if(r.length!==a.getTotalCodewords())throw new I;const h=a.getECBlocksForLevel(l);let f=0;const m=h.getECBlocks();for(const $ of m)f+=$.getCount();const x=new Array(f);let w=0;for(const $ of m)for(let ne=0;ne<$.getCount();ne++){const ue=$.getDataCodewords(),Ee=h.getECCodewordsPerBlock()+ue;x[w++]=new Oa(ue,new Uint8Array(Ee))}const C=x[0].codewords.length;let R=x.length-1;for(;R>=0&&x[R].codewords.length!==C;)R--;R++;const P=C-h.getECCodewordsPerBlock();let B=0;for(let $=0;$<P;$++)for(let ne=0;ne<w;ne++)x[ne].codewords[$]=r[B++];for(let $=R;$<w;$++)x[$].codewords[P]=r[B++];const q=x[0].codewords.length;for(let $=P;$<q;$++)for(let ne=0;ne<w;ne++){const ue=ne<R?$:$+1;x[ne].codewords[ue]=r[B++]}return x}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Ri;(function(L){L[L.TERMINATOR=0]="TERMINATOR",L[L.NUMERIC=1]="NUMERIC",L[L.ALPHANUMERIC=2]="ALPHANUMERIC",L[L.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",L[L.BYTE=4]="BYTE",L[L.ECI=5]="ECI",L[L.KANJI=6]="KANJI",L[L.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",L[L.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",L[L.HANZI=9]="HANZI"})(Ri||(Ri={}));class Qe{constructor(r,a,l,h){this.value=r,this.stringValue=a,this.characterCountBitsForVersions=l,this.bits=h,Qe.FOR_BITS.set(h,this),Qe.FOR_VALUE.set(r,this)}static forBits(r){const a=Qe.FOR_BITS.get(r);if(a===void 0)throw new I;return a}getCharacterCountBits(r){const a=r.getVersionNumber();let l;return a<=9?l=0:a<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(r){if(!(r instanceof Qe))return!1;const a=r;return this.value===a.value}toString(){return this.stringValue}}Qe.FOR_BITS=new Map,Qe.FOR_VALUE=new Map,Qe.TERMINATOR=new Qe(Ri.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Qe.NUMERIC=new Qe(Ri.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Qe.ALPHANUMERIC=new Qe(Ri.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Qe.STRUCTURED_APPEND=new Qe(Ri.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Qe.BYTE=new Qe(Ri.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Qe.ECI=new Qe(Ri.ECI,"ECI",Int32Array.from([0,0,0]),7),Qe.KANJI=new Qe(Ri.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Qe.FNC1_FIRST_POSITION=new Qe(Ri.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Qe.FNC1_SECOND_POSITION=new Qe(Ri.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Qe.HANZI=new Qe(Ri.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class ln{static decode(r,a,l,h){const f=new kn(r);let m=new Y;const x=new Array;let w=-1,C=-1;try{let R=null,P=!1,B;do{if(f.available()<4)B=Qe.TERMINATOR;else{const q=f.readBits(4);B=Qe.forBits(q)}switch(B){case Qe.TERMINATOR:break;case Qe.FNC1_FIRST_POSITION:case Qe.FNC1_SECOND_POSITION:P=!0;break;case Qe.STRUCTURED_APPEND:if(f.available()<16)throw new j;w=f.readBits(8),C=f.readBits(8);break;case Qe.ECI:const q=ln.parseECIValue(f);if(R=V.getCharacterSetECIByValue(q),R===null)throw new j;break;case Qe.HANZI:const $=f.readBits(4),ne=f.readBits(B.getCharacterCountBits(a));$===ln.GB2312_SUBSET&&ln.decodeHanziSegment(f,m,ne);break;default:const ue=f.readBits(B.getCharacterCountBits(a));switch(B){case Qe.NUMERIC:ln.decodeNumericSegment(f,m,ue);break;case Qe.ALPHANUMERIC:ln.decodeAlphanumericSegment(f,m,ue,P);break;case Qe.BYTE:ln.decodeByteSegment(f,m,ue,R,x,h);break;case Qe.KANJI:ln.decodeKanjiSegment(f,m,ue);break;default:throw new j}break}}while(B!==Qe.TERMINATOR)}catch{throw new j}return new Nt(r,m.toString(),x.length===0?null:x,l===null?null:l.toString(),w,C)}static decodeHanziSegment(r,a,l){if(l*13>r.available())throw new j;const h=new Uint8Array(2*l);let f=0;for(;l>0;){const m=r.readBits(13);let x=m/96<<8&4294967295|m%96;x<959?x+=41377:x+=42657,h[f]=x>>8&255,h[f+1]=x&255,f+=2,l--}try{a.append(W.decode(h,J.GB2312))}catch(m){throw new j(m)}}static decodeKanjiSegment(r,a,l){if(l*13>r.available())throw new j;const h=new Uint8Array(2*l);let f=0;for(;l>0;){const m=r.readBits(13);let x=m/192<<8&4294967295|m%192;x<7936?x+=33088:x+=49472,h[f]=x>>8,h[f+1]=x,f+=2,l--}try{a.append(W.decode(h,J.SHIFT_JIS))}catch(m){throw new j(m)}}static decodeByteSegment(r,a,l,h,f,m){if(8*l>r.available())throw new j;const x=new Uint8Array(l);for(let C=0;C<l;C++)x[C]=r.readBits(8);let w;h===null?w=J.guessEncoding(x,m):w=h.getName();try{a.append(W.decode(x,w))}catch(C){throw new j(C)}f.push(x)}static toAlphaNumericChar(r){if(r>=ln.ALPHANUMERIC_CHARS.length)throw new j;return ln.ALPHANUMERIC_CHARS[r]}static decodeAlphanumericSegment(r,a,l,h){const f=a.length();for(;l>1;){if(r.available()<11)throw new j;const m=r.readBits(11);a.append(ln.toAlphaNumericChar(Math.floor(m/45))),a.append(ln.toAlphaNumericChar(m%45)),l-=2}if(l===1){if(r.available()<6)throw new j;a.append(ln.toAlphaNumericChar(r.readBits(6)))}if(h)for(let m=f;m<a.length();m++)a.charAt(m)==="%"&&(m<a.length()-1&&a.charAt(m+1)==="%"?a.deleteCharAt(m+1):a.setCharAt(m,""))}static decodeNumericSegment(r,a,l){for(;l>=3;){if(r.available()<10)throw new j;const h=r.readBits(10);if(h>=1e3)throw new j;a.append(ln.toAlphaNumericChar(Math.floor(h/100))),a.append(ln.toAlphaNumericChar(Math.floor(h/10)%10)),a.append(ln.toAlphaNumericChar(h%10)),l-=3}if(l===2){if(r.available()<7)throw new j;const h=r.readBits(7);if(h>=100)throw new j;a.append(ln.toAlphaNumericChar(Math.floor(h/10))),a.append(ln.toAlphaNumericChar(h%10))}else if(l===1){if(r.available()<4)throw new j;const h=r.readBits(4);if(h>=10)throw new j;a.append(ln.toAlphaNumericChar(h))}}static parseECIValue(r){const a=r.readBits(8);if((a&128)===0)return a&127;if((a&192)===128){const l=r.readBits(8);return(a&63)<<8&4294967295|l}if((a&224)===192){const l=r.readBits(16);return(a&31)<<16&4294967295|l}throw new j}}ln.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",ln.GB2312_SUBSET=1;class So{constructor(r){this.mirrored=r}isMirrored(){return this.mirrored}applyMirroredCorrection(r){if(!this.mirrored||r===null||r.length<3)return;const a=r[0];r[0]=r[2],r[2]=a}}class Ds{constructor(){this.rsDecoder=new Xi(Et.QR_CODE_FIELD_256)}decodeBooleanArray(r,a){return this.decodeBitMatrix(et.parseFromBooleanArray(r),a)}decodeBitMatrix(r,a){const l=new Zi(r);let h=null;try{return this.decodeBitMatrixParser(l,a)}catch(f){h=f}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const f=this.decodeBitMatrixParser(l,a);return f.setOther(new So(!0)),f}catch(f){throw h!==null?h:f}}decodeBitMatrixParser(r,a){const l=r.readVersion(),h=r.readFormatInformation().getErrorCorrectionLevel(),f=r.readCodewords(),m=Oa.getDataBlocks(f,l,h);let x=0;for(const R of m)x+=R.getNumDataCodewords();const w=new Uint8Array(x);let C=0;for(const R of m){const P=R.getCodewords(),B=R.getNumDataCodewords();this.correctErrors(P,B);for(let q=0;q<B;q++)w[C++]=P[q]}return ln.decode(w,l,h,a)}correctErrors(r,a){const l=new Int32Array(r);try{this.rsDecoder.decode(l,r.length-a)}catch{throw new U}for(let h=0;h<a;h++)r[h]=l[h]}}class Ms extends Fe{constructor(r,a,l){super(r,a),this.estimatedModuleSize=l}aboutEquals(r,a,l){if(Math.abs(a-this.getY())<=r&&Math.abs(l-this.getX())<=r){const h=Math.abs(r-this.estimatedModuleSize);return h<=1||h<=this.estimatedModuleSize}return!1}combineEstimate(r,a,l){const h=(this.getX()+a)/2,f=(this.getY()+r)/2,m=(this.estimatedModuleSize+l)/2;return new Ms(h,f,m)}}class Ji{constructor(r,a,l,h,f,m,x){this.image=r,this.startX=a,this.startY=l,this.width=h,this.height=f,this.moduleSize=m,this.resultPointCallback=x,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const r=this.startX,a=this.height,l=this.width,h=r+l,f=this.startY+a/2,m=new Int32Array(3),x=this.image;for(let w=0;w<a;w++){const C=f+((w&1)===0?Math.floor((w+1)/2):-Math.floor((w+1)/2));m[0]=0,m[1]=0,m[2]=0;let R=r;for(;R<h&&!x.get(R,C);)R++;let P=0;for(;R<h;){if(x.get(R,C))if(P===1)m[1]++;else if(P===2){if(this.foundPatternCross(m)){const B=this.handlePossibleCenter(m,C,R);if(B!==null)return B}m[0]=m[2],m[1]=1,m[2]=0,P=1}else m[++P]++;else P===1&&P++,m[P]++;R++}if(this.foundPatternCross(m)){const B=this.handlePossibleCenter(m,C,h);if(B!==null)return B}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new me}static centerFromEnd(r,a){return a-r[2]-r[1]/2}foundPatternCross(r){const a=this.moduleSize,l=a/2;for(let h=0;h<3;h++)if(Math.abs(a-r[h])>=l)return!1;return!0}crossCheckVertical(r,a,l,h){const f=this.image,m=f.getHeight(),x=this.crossCheckStateCount;x[0]=0,x[1]=0,x[2]=0;let w=r;for(;w>=0&&f.get(a,w)&&x[1]<=l;)x[1]++,w--;if(w<0||x[1]>l)return NaN;for(;w>=0&&!f.get(a,w)&&x[0]<=l;)x[0]++,w--;if(x[0]>l)return NaN;for(w=r+1;w<m&&f.get(a,w)&&x[1]<=l;)x[1]++,w++;if(w===m||x[1]>l)return NaN;for(;w<m&&!f.get(a,w)&&x[2]<=l;)x[2]++,w++;if(x[2]>l)return NaN;const C=x[0]+x[1]+x[2];return 5*Math.abs(C-h)>=2*h?NaN:this.foundPatternCross(x)?Ji.centerFromEnd(x,w):NaN}handlePossibleCenter(r,a,l){const h=r[0]+r[1]+r[2],f=Ji.centerFromEnd(r,l),m=this.crossCheckVertical(a,f,2*r[1],h);if(!isNaN(m)){const x=(r[0]+r[1]+r[2])/3;for(const C of this.possibleCenters)if(C.aboutEquals(x,m,f))return C.combineEstimate(m,f,x);const w=new Ms(f,m,x);this.possibleCenters.push(w),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(w)}return null}}class Ws extends Fe{constructor(r,a,l,h){super(r,a),this.estimatedModuleSize=l,this.count=h,h===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(r,a,l){if(Math.abs(a-this.getY())<=r&&Math.abs(l-this.getX())<=r){const h=Math.abs(r-this.estimatedModuleSize);return h<=1||h<=this.estimatedModuleSize}return!1}combineEstimate(r,a,l){const h=this.count+1,f=(this.count*this.getX()+a)/h,m=(this.count*this.getY()+r)/h,x=(this.count*this.estimatedModuleSize+l)/h;return new Ws(f,m,x,h)}}class _r{constructor(r){this.bottomLeft=r[0],this.topLeft=r[1],this.topRight=r[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class wn{constructor(r,a){this.image=r,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=a}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(r){const a=r!=null&&r.get(Ne.TRY_HARDER)!==void 0,l=r!=null&&r.get(Ne.PURE_BARCODE)!==void 0,h=this.image,f=h.getHeight(),m=h.getWidth();let x=Math.floor(3*f/(4*wn.MAX_MODULES));(x<wn.MIN_SKIP||a)&&(x=wn.MIN_SKIP);let w=!1;const C=new Int32Array(5);for(let P=x-1;P<f&&!w;P+=x){C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0;let B=0;for(let q=0;q<m;q++)if(h.get(q,P))(B&1)===1&&B++,C[B]++;else if((B&1)===0)if(B===4)if(wn.foundPatternCross(C)){if(this.handlePossibleCenter(C,P,q,l)===!0)if(x=2,this.hasSkipped===!0)w=this.haveMultiplyConfirmedCenters();else{const ne=this.findRowSkip();ne>C[2]&&(P+=ne-C[2]-x,q=m-1)}else{C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,B=3;continue}B=0,C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0}else C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,B=3;else C[++B]++;else C[B]++;wn.foundPatternCross(C)&&this.handlePossibleCenter(C,P,m,l)===!0&&(x=C[0],this.hasSkipped&&(w=this.haveMultiplyConfirmedCenters()))}const R=this.selectBestPatterns();return Fe.orderBestPatterns(R),new _r(R)}static centerFromEnd(r,a){return a-r[4]-r[3]-r[2]/2}static foundPatternCross(r){let a=0;for(let f=0;f<5;f++){const m=r[f];if(m===0)return!1;a+=m}if(a<7)return!1;const l=a/7,h=l/2;return Math.abs(l-r[0])<h&&Math.abs(l-r[1])<h&&Math.abs(3*l-r[2])<3*h&&Math.abs(l-r[3])<h&&Math.abs(l-r[4])<h}getCrossCheckStateCount(){const r=this.crossCheckStateCount;return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r}crossCheckDiagonal(r,a,l,h){const f=this.getCrossCheckStateCount();let m=0;const x=this.image;for(;r>=m&&a>=m&&x.get(a-m,r-m);)f[2]++,m++;if(r<m||a<m)return!1;for(;r>=m&&a>=m&&!x.get(a-m,r-m)&&f[1]<=l;)f[1]++,m++;if(r<m||a<m||f[1]>l)return!1;for(;r>=m&&a>=m&&x.get(a-m,r-m)&&f[0]<=l;)f[0]++,m++;if(f[0]>l)return!1;const w=x.getHeight(),C=x.getWidth();for(m=1;r+m<w&&a+m<C&&x.get(a+m,r+m);)f[2]++,m++;if(r+m>=w||a+m>=C)return!1;for(;r+m<w&&a+m<C&&!x.get(a+m,r+m)&&f[3]<l;)f[3]++,m++;if(r+m>=w||a+m>=C||f[3]>=l)return!1;for(;r+m<w&&a+m<C&&x.get(a+m,r+m)&&f[4]<l;)f[4]++,m++;if(f[4]>=l)return!1;const R=f[0]+f[1]+f[2]+f[3]+f[4];return Math.abs(R-h)<2*h&&wn.foundPatternCross(f)}crossCheckVertical(r,a,l,h){const f=this.image,m=f.getHeight(),x=this.getCrossCheckStateCount();let w=r;for(;w>=0&&f.get(a,w);)x[2]++,w--;if(w<0)return NaN;for(;w>=0&&!f.get(a,w)&&x[1]<=l;)x[1]++,w--;if(w<0||x[1]>l)return NaN;for(;w>=0&&f.get(a,w)&&x[0]<=l;)x[0]++,w--;if(x[0]>l)return NaN;for(w=r+1;w<m&&f.get(a,w);)x[2]++,w++;if(w===m)return NaN;for(;w<m&&!f.get(a,w)&&x[3]<l;)x[3]++,w++;if(w===m||x[3]>=l)return NaN;for(;w<m&&f.get(a,w)&&x[4]<l;)x[4]++,w++;if(x[4]>=l)return NaN;const C=x[0]+x[1]+x[2]+x[3]+x[4];return 5*Math.abs(C-h)>=2*h?NaN:wn.foundPatternCross(x)?wn.centerFromEnd(x,w):NaN}crossCheckHorizontal(r,a,l,h){const f=this.image,m=f.getWidth(),x=this.getCrossCheckStateCount();let w=r;for(;w>=0&&f.get(w,a);)x[2]++,w--;if(w<0)return NaN;for(;w>=0&&!f.get(w,a)&&x[1]<=l;)x[1]++,w--;if(w<0||x[1]>l)return NaN;for(;w>=0&&f.get(w,a)&&x[0]<=l;)x[0]++,w--;if(x[0]>l)return NaN;for(w=r+1;w<m&&f.get(w,a);)x[2]++,w++;if(w===m)return NaN;for(;w<m&&!f.get(w,a)&&x[3]<l;)x[3]++,w++;if(w===m||x[3]>=l)return NaN;for(;w<m&&f.get(w,a)&&x[4]<l;)x[4]++,w++;if(x[4]>=l)return NaN;const C=x[0]+x[1]+x[2]+x[3]+x[4];return 5*Math.abs(C-h)>=h?NaN:wn.foundPatternCross(x)?wn.centerFromEnd(x,w):NaN}handlePossibleCenter(r,a,l,h){const f=r[0]+r[1]+r[2]+r[3]+r[4];let m=wn.centerFromEnd(r,l),x=this.crossCheckVertical(a,Math.floor(m),r[2],f);if(!isNaN(x)&&(m=this.crossCheckHorizontal(Math.floor(m),Math.floor(x),r[2],f),!isNaN(m)&&(!h||this.crossCheckDiagonal(Math.floor(x),Math.floor(m),r[2],f)))){const w=f/7;let C=!1;const R=this.possibleCenters;for(let P=0,B=R.length;P<B;P++){const q=R[P];if(q.aboutEquals(w,x,m)){R[P]=q.combineEstimate(x,m,w),C=!0;break}}if(!C){const P=new Ws(m,x,w);R.push(P),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(P)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let a=null;for(const l of this.possibleCenters)if(l.getCount()>=wn.CENTER_QUORUM)if(a==null)a=l;else return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-l.getX())-Math.abs(a.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let r=0,a=0;const l=this.possibleCenters.length;for(const m of this.possibleCenters)m.getCount()>=wn.CENTER_QUORUM&&(r++,a+=m.getEstimatedModuleSize());if(r<3)return!1;const h=a/l;let f=0;for(const m of this.possibleCenters)f+=Math.abs(m.getEstimatedModuleSize()-h);return f<=.05*a}selectBestPatterns(){const r=this.possibleCenters.length;if(r<3)throw new me;const a=this.possibleCenters;let l;if(r>3){let h=0,f=0;for(const w of this.possibleCenters){const C=w.getEstimatedModuleSize();h+=C,f+=C*C}l=h/r;let m=Math.sqrt(f/r-l*l);a.sort((w,C)=>{const R=Math.abs(C.getEstimatedModuleSize()-l),P=Math.abs(w.getEstimatedModuleSize()-l);return R<P?-1:R>P?1:0});const x=Math.max(.2*l,m);for(let w=0;w<a.length&&a.length>3;w++){const C=a[w];Math.abs(C.getEstimatedModuleSize()-l)>x&&(a.splice(w,1),w--)}}if(a.length>3){let h=0;for(const f of a)h+=f.getEstimatedModuleSize();l=h/a.length,a.sort((f,m)=>{if(m.getCount()===f.getCount()){const x=Math.abs(m.getEstimatedModuleSize()-l),w=Math.abs(f.getEstimatedModuleSize()-l);return x<w?1:x>w?-1:0}else return m.getCount()-f.getCount()}),a.splice(3)}return[a[0],a[1],a[2]]}}wn.CENTER_QUORUM=2,wn.MIN_SKIP=3,wn.MAX_MODULES=57;class $i{constructor(r){this.image=r}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(r){this.resultPointCallback=r==null?null:r.get(Ne.NEED_RESULT_POINT_CALLBACK);const l=new wn(this.image,this.resultPointCallback).find(r);return this.processFinderPatternInfo(l)}processFinderPatternInfo(r){const a=r.getTopLeft(),l=r.getTopRight(),h=r.getBottomLeft(),f=this.calculateModuleSize(a,l,h);if(f<1)throw new me("No pattern found in proccess finder.");const m=$i.computeDimension(a,l,h,f),x=Ye.getProvisionalVersionForDimension(m),w=x.getDimensionForVersion()-7;let C=null;if(x.getAlignmentPatternCenters().length>0){const q=l.getX()-a.getX()+h.getX(),$=l.getY()-a.getY()+h.getY(),ne=1-3/w,ue=Math.floor(a.getX()+ne*(q-a.getX())),Ee=Math.floor(a.getY()+ne*($-a.getY()));for(let Pe=4;Pe<=16;Pe<<=1)try{C=this.findAlignmentInRegion(f,ue,Ee,Pe);break}catch(Me){if(!(Me instanceof me))throw Me}}const R=$i.createTransform(a,l,h,C,m),P=$i.sampleGrid(this.image,R,m);let B;return C===null?B=[h,a,l]:B=[h,a,l,C],new ps(P,B)}static createTransform(r,a,l,h,f){const m=f-3.5;let x,w,C,R;return h!==null?(x=h.getX(),w=h.getY(),C=m-3,R=C):(x=a.getX()-r.getX()+l.getX(),w=a.getY()-r.getY()+l.getY(),C=m,R=m),ai.quadrilateralToQuadrilateral(3.5,3.5,m,3.5,C,R,3.5,m,r.getX(),r.getY(),a.getX(),a.getY(),x,w,l.getX(),l.getY())}static sampleGrid(r,a,l){return gi.getInstance().sampleGridWithTransform(r,l,l,a)}static computeDimension(r,a,l,h){const f=We.round(Fe.distance(r,a)/h),m=We.round(Fe.distance(r,l)/h);let x=Math.floor((f+m)/2)+7;switch(x&3){case 0:x++;break;case 2:x--;break;case 3:throw new me("Dimensions could be not found.")}return x}calculateModuleSize(r,a,l){return(this.calculateModuleSizeOneWay(r,a)+this.calculateModuleSizeOneWay(r,l))/2}calculateModuleSizeOneWay(r,a){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(a.getX()),Math.floor(a.getY())),h=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.getX()),Math.floor(a.getY()),Math.floor(r.getX()),Math.floor(r.getY()));return isNaN(l)?h/7:isNaN(h)?l/7:(l+h)/14}sizeOfBlackWhiteBlackRunBothWays(r,a,l,h){let f=this.sizeOfBlackWhiteBlackRun(r,a,l,h),m=1,x=r-(l-r);x<0?(m=r/(r-x),x=0):x>=this.image.getWidth()&&(m=(this.image.getWidth()-1-r)/(x-r),x=this.image.getWidth()-1);let w=Math.floor(a-(h-a)*m);return m=1,w<0?(m=a/(a-w),w=0):w>=this.image.getHeight()&&(m=(this.image.getHeight()-1-a)/(w-a),w=this.image.getHeight()-1),x=Math.floor(r+(x-r)*m),f+=this.sizeOfBlackWhiteBlackRun(r,a,x,w),f-1}sizeOfBlackWhiteBlackRun(r,a,l,h){const f=Math.abs(h-a)>Math.abs(l-r);if(f){let q=r;r=a,a=q,q=l,l=h,h=q}const m=Math.abs(l-r),x=Math.abs(h-a);let w=-m/2;const C=r<l?1:-1,R=a<h?1:-1;let P=0;const B=l+C;for(let q=r,$=a;q!==B;q+=C){const ne=f?$:q,ue=f?q:$;if(P===1===this.image.get(ne,ue)){if(P===2)return We.distance(q,$,r,a);P++}if(w+=x,w>0){if($===h)break;$+=R,w-=m}}return P===2?We.distance(l+C,h,r,a):NaN}findAlignmentInRegion(r,a,l,h){const f=Math.floor(h*r),m=Math.max(0,a-f),x=Math.min(this.image.getWidth()-1,a+f);if(x-m<r*3)throw new me("Alignment top exceeds estimated module size.");const w=Math.max(0,l-f),C=Math.min(this.image.getHeight()-1,l+f);if(C-w<r*3)throw new me("Alignment bottom exceeds estimated module size.");return new Ji(this.image,m,w,x-m,C-w,r,this.resultPointCallback).find()}}class er{constructor(){this.decoder=new Ds}getDecoder(){return this.decoder}decode(r,a){let l,h;if(a!=null&&a.get(Ne.PURE_BARCODE)!==void 0){const w=er.extractPureBits(r.getBlackMatrix());l=this.decoder.decodeBitMatrix(w,a),h=er.NO_POINTS}else{const w=new $i(r.getBlackMatrix()).detect(a);l=this.decoder.decodeBitMatrix(w.getBits(),a),h=w.getPoints()}l.getOther()instanceof So&&l.getOther().applyMirroredCorrection(h);const f=new Ue(l.getText(),l.getRawBytes(),void 0,h,Le.QR_CODE,void 0),m=l.getByteSegments();m!==null&&f.putMetadata(_t.BYTE_SEGMENTS,m);const x=l.getECLevel();return x!==null&&f.putMetadata(_t.ERROR_CORRECTION_LEVEL,x),l.hasStructuredAppend()&&(f.putMetadata(_t.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),f.putMetadata(_t.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),f}reset(){}static extractPureBits(r){const a=r.getTopLeftOnBit(),l=r.getBottomRightOnBit();if(a===null||l===null)throw new me;const h=this.moduleSize(a,r);let f=a[1],m=l[1],x=a[0],w=l[0];if(x>=w||f>=m)throw new me;if(m-f!==w-x&&(w=x+(m-f),w>=r.getWidth()))throw new me;const C=Math.round((w-x+1)/h),R=Math.round((m-f+1)/h);if(C<=0||R<=0)throw new me;if(R!==C)throw new me;const P=Math.floor(h/2);f+=P,x+=P;const B=x+Math.floor((C-1)*h)-w;if(B>0){if(B>P)throw new me;x-=B}const q=f+Math.floor((R-1)*h)-m;if(q>0){if(q>P)throw new me;f-=q}const $=new et(C,R);for(let ne=0;ne<R;ne++){const ue=f+Math.floor(ne*h);for(let Ee=0;Ee<C;Ee++)r.get(x+Math.floor(Ee*h),ue)&&$.set(Ee,ne)}return $}static moduleSize(r,a){const l=a.getHeight(),h=a.getWidth();let f=r[0],m=r[1],x=!0,w=0;for(;f<h&&m<l;){if(x!==a.get(f,m)){if(++w===5)break;x=!x}f++,m++}if(f===h||m===l)throw new me;return(f-r[0])/7}}er.NO_POINTS=new Array;class Ze{PDF417Common(){}static getBitCountSum(r){return We.sum(r)}static toIntArray(r){if(r==null||!r.length)return Ze.EMPTY_INT_ARRAY;const a=new Int32Array(r.length);let l=0;for(const h of r)a[l++]=h;return a}static getCodeword(r){const a=he.binarySearch(Ze.SYMBOL_TABLE,r&262143);return a<0?-1:(Ze.CODEWORD_TABLE[a]-1)%Ze.NUMBER_OF_CODEWORDS}}Ze.NUMBER_OF_CODEWORDS=929,Ze.MAX_CODEWORDS_IN_BARCODE=Ze.NUMBER_OF_CODEWORDS-1,Ze.MIN_ROWS_IN_BARCODE=3,Ze.MAX_ROWS_IN_BARCODE=90,Ze.MODULES_IN_CODEWORD=17,Ze.MODULES_IN_STOP_PATTERN=18,Ze.BARS_IN_MODULE=8,Ze.EMPTY_INT_ARRAY=new Int32Array([]),Ze.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Ze.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Ls{constructor(r,a){this.bits=r,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class it{static detectMultiple(r,a,l){let h=r.getBlackMatrix(),f=it.detect(l,h);return f.length||(h=h.clone(),h.rotate180(),f=it.detect(l,h)),new Ls(h,f)}static detect(r,a){const l=new Array;let h=0,f=0,m=!1;for(;h<a.getHeight();){const x=it.findVertices(a,h,f);if(x[0]==null&&x[3]==null){if(!m)break;m=!1,f=0;for(const w of l)w[1]!=null&&(h=Math.trunc(Math.max(h,w[1].getY()))),w[3]!=null&&(h=Math.max(h,Math.trunc(w[3].getY())));h+=it.ROW_STEP;continue}if(m=!0,l.push(x),!r)break;x[2]!=null?(f=Math.trunc(x[2].getX()),h=Math.trunc(x[2].getY())):(f=Math.trunc(x[4].getX()),h=Math.trunc(x[4].getY()))}return l}static findVertices(r,a,l){const h=r.getHeight(),f=r.getWidth(),m=new Array(8);return it.copyToResult(m,it.findRowsWithPattern(r,h,f,a,l,it.START_PATTERN),it.INDEXES_START_PATTERN),m[4]!=null&&(l=Math.trunc(m[4].getX()),a=Math.trunc(m[4].getY())),it.copyToResult(m,it.findRowsWithPattern(r,h,f,a,l,it.STOP_PATTERN),it.INDEXES_STOP_PATTERN),m}static copyToResult(r,a,l){for(let h=0;h<l.length;h++)r[l[h]]=a[h]}static findRowsWithPattern(r,a,l,h,f,m){const x=new Array(4);let w=!1;const C=new Int32Array(m.length);for(;h<a;h+=it.ROW_STEP){let P=it.findGuardPattern(r,f,h,l,!1,m,C);if(P!=null){for(;h>0;){const B=it.findGuardPattern(r,f,--h,l,!1,m,C);if(B!=null)P=B;else{h++;break}}x[0]=new Fe(P[0],h),x[1]=new Fe(P[1],h),w=!0;break}}let R=h+1;if(w){let P=0,B=Int32Array.from([Math.trunc(x[0].getX()),Math.trunc(x[1].getX())]);for(;R<a;R++){const q=it.findGuardPattern(r,B[0],R,l,!1,m,C);if(q!=null&&Math.abs(B[0]-q[0])<it.MAX_PATTERN_DRIFT&&Math.abs(B[1]-q[1])<it.MAX_PATTERN_DRIFT)B=q,P=0;else{if(P>it.SKIPPED_ROW_COUNT_MAX)break;P++}}R-=P+1,x[2]=new Fe(B[0],R),x[3]=new Fe(B[1],R)}return R-h<it.BARCODE_MIN_HEIGHT&&he.fill(x,null),x}static findGuardPattern(r,a,l,h,f,m,x){he.fillWithin(x,0,x.length,0);let w=a,C=0;for(;r.get(w,l)&&w>0&&C++<it.MAX_PIXEL_DRIFT;)w--;let R=w,P=0,B=m.length;for(let q=f;R<h;R++)if(r.get(R,l)!==q)x[P]++;else{if(P===B-1){if(it.patternMatchVariance(x,m,it.MAX_INDIVIDUAL_VARIANCE)<it.MAX_AVG_VARIANCE)return new Int32Array([w,R]);w+=x[0]+x[1],K.arraycopy(x,2,x,0,P-1),x[P-1]=0,x[P]=0,P--}else P++;x[P]=1,q=!q}return P===B-1&&it.patternMatchVariance(x,m,it.MAX_INDIVIDUAL_VARIANCE)<it.MAX_AVG_VARIANCE?new Int32Array([w,R-1]):null}static patternMatchVariance(r,a,l){let h=r.length,f=0,m=0;for(let C=0;C<h;C++)f+=r[C],m+=a[C];if(f<m)return 1/0;let x=f/m;l*=x;let w=0;for(let C=0;C<h;C++){let R=r[C],P=a[C]*x,B=R>P?R-P:P-R;if(B>l)return 1/0;w+=B}return w/f}}it.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),it.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),it.MAX_AVG_VARIANCE=.42,it.MAX_INDIVIDUAL_VARIANCE=.8,it.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),it.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),it.MAX_PIXEL_DRIFT=3,it.MAX_PATTERN_DRIFT=5,it.SKIPPED_ROW_COUNT_MAX=25,it.ROW_STEP=5,it.BARCODE_MIN_HEIGHT=10;class cn{constructor(r,a){if(a.length===0)throw new I;this.field=r;let l=a.length;if(l>1&&a[0]===0){let h=1;for(;h<l&&a[h]===0;)h++;h===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-h),K.arraycopy(a,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);if(r===1){let h=0;for(let f of this.coefficients)h=this.field.add(h,f);return h}let a=this.coefficients[0],l=this.coefficients.length;for(let h=1;h<l;h++)a=this.field.add(this.field.multiply(r,a),this.coefficients[h]);return a}add(r){if(!this.field.equals(r.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero())return r;if(r.isZero())return this;let a=this.coefficients,l=r.coefficients;if(a.length>l.length){let m=a;a=l,l=m}let h=new Int32Array(l.length),f=l.length-a.length;K.arraycopy(l,0,h,0,f);for(let m=f;m<l.length;m++)h[m]=this.field.add(a[m-f],l[m]);return new cn(this.field,h)}subtract(r){if(!this.field.equals(r.field))throw new I("ModulusPolys do not have same ModulusGF field");return r.isZero()?this:this.add(r.negative())}multiply(r){return r instanceof cn?this.multiplyOther(r):this.multiplyScalar(r)}multiplyOther(r){if(!this.field.equals(r.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero()||r.isZero())return new cn(this.field,new Int32Array([0]));let a=this.coefficients,l=a.length,h=r.coefficients,f=h.length,m=new Int32Array(l+f-1);for(let x=0;x<l;x++){let w=a[x];for(let C=0;C<f;C++)m[x+C]=this.field.add(m[x+C],this.field.multiply(w,h[C]))}return new cn(this.field,m)}negative(){let r=this.coefficients.length,a=new Int32Array(r);for(let l=0;l<r;l++)a[l]=this.field.subtract(0,this.coefficients[l]);return new cn(this.field,a)}multiplyScalar(r){if(r===0)return new cn(this.field,new Int32Array([0]));if(r===1)return this;let a=this.coefficients.length,l=new Int32Array(a);for(let h=0;h<a;h++)l[h]=this.field.multiply(this.coefficients[h],r);return new cn(this.field,l)}multiplyByMonomial(r,a){if(r<0)throw new I;if(a===0)return new cn(this.field,new Int32Array([0]));let l=this.coefficients.length,h=new Int32Array(l+r);for(let f=0;f<l;f++)h[f]=this.field.multiply(this.coefficients[f],a);return new cn(this.field,h)}toString(){let r=new Y;for(let a=this.getDegree();a>=0;a--){let l=this.getCoefficient(a);l!==0&&(l<0?(r.append(" - "),l=-l):r.length()>0&&r.append(" + "),(a===0||l!==1)&&r.append(l),a!==0&&(a===1?r.append("x"):(r.append("x^"),r.append(a))))}return r.toString()}}class Qs{add(r,a){return(r+a)%this.modulus}subtract(r,a){return(this.modulus+r-a)%this.modulus}exp(r){return this.expTable[r]}log(r){if(r===0)throw new I;return this.logTable[r]}inverse(r){if(r===0)throw new xr;return this.expTable[this.modulus-this.logTable[r]-1]}multiply(r,a){return r===0||a===0?0:this.expTable[(this.logTable[r]+this.logTable[a])%(this.modulus-1)]}getSize(){return this.modulus}equals(r){return r===this}}class tn extends Qs{constructor(r,a){super(),this.modulus=r,this.expTable=new Int32Array(r),this.logTable=new Int32Array(r);let l=1;for(let h=0;h<r;h++)this.expTable[h]=l,l=l*a%r;for(let h=0;h<r-1;h++)this.logTable[this.expTable[h]]=h;this.zero=new cn(this,new Int32Array([0])),this.one=new cn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,a){if(r<0)throw new I;if(a===0)return this.zero;let l=new Int32Array(r+1);return l[0]=a,new cn(this,l)}}tn.PDF417_GF=new tn(Ze.NUMBER_OF_CODEWORDS,3);class Mr{constructor(){this.field=tn.PDF417_GF}decode(r,a,l){let h=new cn(this.field,r),f=new Int32Array(a),m=!1;for(let $=a;$>0;$--){let ne=h.evaluateAt(this.field.exp($));f[a-$]=ne,ne!==0&&(m=!0)}if(!m)return 0;let x=this.field.getOne();if(l!=null)for(const $ of l){let ne=this.field.exp(r.length-1-$),ue=new cn(this.field,new Int32Array([this.field.subtract(0,ne),1]));x=x.multiply(ue)}let w=new cn(this.field,f),C=this.runEuclideanAlgorithm(this.field.buildMonomial(a,1),w,a),R=C[0],P=C[1],B=this.findErrorLocations(R),q=this.findErrorMagnitudes(P,R,B);for(let $=0;$<B.length;$++){let ne=r.length-1-this.field.log(B[$]);if(ne<0)throw U.getChecksumInstance();r[ne]=this.field.subtract(r[ne],q[$])}return B.length}runEuclideanAlgorithm(r,a,l){if(r.getDegree()<a.getDegree()){let B=r;r=a,a=B}let h=r,f=a,m=this.field.getZero(),x=this.field.getOne();for(;f.getDegree()>=Math.round(l/2);){let B=h,q=m;if(h=f,m=x,h.isZero())throw U.getChecksumInstance();f=B;let $=this.field.getZero(),ne=h.getCoefficient(h.getDegree()),ue=this.field.inverse(ne);for(;f.getDegree()>=h.getDegree()&&!f.isZero();){let Ee=f.getDegree()-h.getDegree(),Pe=this.field.multiply(f.getCoefficient(f.getDegree()),ue);$=$.add(this.field.buildMonomial(Ee,Pe)),f=f.subtract(h.multiplyByMonomial(Ee,Pe))}x=$.multiply(m).subtract(q).negative()}let w=x.getCoefficient(0);if(w===0)throw U.getChecksumInstance();let C=this.field.inverse(w),R=x.multiply(C),P=f.multiply(C);return[R,P]}findErrorLocations(r){let a=r.getDegree(),l=new Int32Array(a),h=0;for(let f=1;f<this.field.getSize()&&h<a;f++)r.evaluateAt(f)===0&&(l[h]=this.field.inverse(f),h++);if(h!==a)throw U.getChecksumInstance();return l}findErrorMagnitudes(r,a,l){let h=a.getDegree(),f=new Int32Array(h);for(let C=1;C<=h;C++)f[h-C]=this.field.multiply(C,a.getCoefficient(C));let m=new cn(this.field,f),x=l.length,w=new Int32Array(x);for(let C=0;C<x;C++){let R=this.field.inverse(l[C]),P=this.field.subtract(0,r.evaluateAt(R)),B=this.field.inverse(m.evaluateAt(R));w[C]=this.field.multiply(P,B)}return w}}class Lr{constructor(r,a,l,h,f){r instanceof Lr?this.constructor_2(r):this.constructor_1(r,a,l,h,f)}constructor_1(r,a,l,h,f){const m=a==null||l==null,x=h==null||f==null;if(m&&x)throw new me;m?(a=new Fe(0,h.getY()),l=new Fe(0,f.getY())):x&&(h=new Fe(r.getWidth()-1,a.getY()),f=new Fe(r.getWidth()-1,l.getY())),this.image=r,this.topLeft=a,this.bottomLeft=l,this.topRight=h,this.bottomRight=f,this.minX=Math.trunc(Math.min(a.getX(),l.getX())),this.maxX=Math.trunc(Math.max(h.getX(),f.getX())),this.minY=Math.trunc(Math.min(a.getY(),h.getY())),this.maxY=Math.trunc(Math.max(l.getY(),f.getY()))}constructor_2(r){this.image=r.image,this.topLeft=r.getTopLeft(),this.bottomLeft=r.getBottomLeft(),this.topRight=r.getTopRight(),this.bottomRight=r.getBottomRight(),this.minX=r.getMinX(),this.maxX=r.getMaxX(),this.minY=r.getMinY(),this.maxY=r.getMaxY()}static merge(r,a){return r==null?a:a==null?r:new Lr(r.image,r.topLeft,r.bottomLeft,a.topRight,a.bottomRight)}addMissingRows(r,a,l){let h=this.topLeft,f=this.bottomLeft,m=this.topRight,x=this.bottomRight;if(r>0){let w=l?this.topLeft:this.topRight,C=Math.trunc(w.getY()-r);C<0&&(C=0);let R=new Fe(w.getX(),C);l?h=R:m=R}if(a>0){let w=l?this.bottomLeft:this.bottomRight,C=Math.trunc(w.getY()+a);C>=this.image.getHeight()&&(C=this.image.getHeight()-1);let R=new Fe(w.getX(),C);l?f=R:x=R}return new Lr(this.image,h,f,m,x)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Zs{constructor(r,a,l,h){this.columnCount=r,this.errorCorrectionLevel=h,this.rowCountUpperPart=a,this.rowCountLowerPart=l,this.rowCount=a+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class As{constructor(){this.buffer=""}static form(r,a){let l=-1;function h(m,x,w,C,R,P){if(m==="%%")return"%";if(a[++l]===void 0)return;m=C?parseInt(C.substr(1)):void 0;let B=R?parseInt(R.substr(1)):void 0,q;switch(P){case"s":q=a[l];break;case"c":q=a[l][0];break;case"f":q=parseFloat(a[l]).toFixed(m);break;case"p":q=parseFloat(a[l]).toPrecision(m);break;case"e":q=parseFloat(a[l]).toExponential(m);break;case"x":q=parseInt(a[l]).toString(B||16);break;case"d":q=parseFloat(parseInt(a[l],B||10).toPrecision(m)).toFixed(0);break}q=typeof q=="object"?JSON.stringify(q):(+q).toString(B);let $=parseInt(w),ne=w&&w[0]+""=="0"?"0":" ";for(;q.length<$;)q=x!==void 0?q+ne:ne+q;return q}let f=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(f,h)}format(r,...a){this.buffer+=As.form(r,a)}toString(){return this.buffer}}class Pr{constructor(r){this.boundingBox=new Lr(r),this.codewords=new Array(r.getMaxY()-r.getMinY()+1)}getCodewordNearby(r){let a=this.getCodeword(r);if(a!=null)return a;for(let l=1;l<Pr.MAX_NEARBY_DISTANCE;l++){let h=this.imageRowToCodewordIndex(r)-l;if(h>=0&&(a=this.codewords[h],a!=null)||(h=this.imageRowToCodewordIndex(r)+l,h<this.codewords.length&&(a=this.codewords[h],a!=null)))return a}return null}imageRowToCodewordIndex(r){return r-this.boundingBox.getMinY()}setCodeword(r,a){this.codewords[this.imageRowToCodewordIndex(r)]=a}getCodeword(r){return this.codewords[this.imageRowToCodewordIndex(r)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const r=new As;let a=0;for(const l of this.codewords){if(l==null){r.format("%3d:    |   %n",a++);continue}r.format("%3d: %3d|%3d%n",a++,l.getRowNumber(),l.getValue())}return r.toString()}}Pr.MAX_NEARBY_DISTANCE=5;class cr{constructor(){this.values=new Map}setValue(r){r=Math.trunc(r);let a=this.values.get(r);a==null&&(a=0),a++,this.values.set(r,a)}getValue(){let r=-1,a=new Array;for(const[l,h]of this.values.entries()){const f={getKey:()=>l,getValue:()=>h};f.getValue()>r?(r=f.getValue(),a=[],a.push(f.getKey())):f.getValue()===r&&a.push(f.getKey())}return Ze.toIntArray(a)}getConfidence(r){return this.values.get(r)}}class wr extends Pr{constructor(r,a){super(r),this._isLeft=a}setRowNumbers(){for(let r of this.getCodewords())r!=null&&r.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(r){let a=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(a,r);let l=this.getBoundingBox(),h=this._isLeft?l.getTopLeft():l.getTopRight(),f=this._isLeft?l.getBottomLeft():l.getBottomRight(),m=this.imageRowToCodewordIndex(Math.trunc(h.getY())),x=this.imageRowToCodewordIndex(Math.trunc(f.getY())),w=-1,C=1,R=0;for(let P=m;P<x;P++){if(a[P]==null)continue;let B=a[P],q=B.getRowNumber()-w;if(q===0)R++;else if(q===1)C=Math.max(C,R),R=1,w=B.getRowNumber();else if(q<0||B.getRowNumber()>=r.getRowCount()||q>P)a[P]=null;else{let $;C>2?$=(C-2)*q:$=q;let ne=$>=P;for(let ue=1;ue<=$&&!ne;ue++)ne=a[P-ue]!=null;ne?a[P]=null:(w=B.getRowNumber(),R=1)}}}getRowHeights(){let r=this.getBarcodeMetadata();if(r==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(r);let a=new Int32Array(r.getRowCount());for(let l of this.getCodewords())if(l!=null){let h=l.getRowNumber();if(h>=a.length)continue;a[h]++}return a}adjustIncompleteIndicatorColumnRowNumbers(r){let a=this.getBoundingBox(),l=this._isLeft?a.getTopLeft():a.getTopRight(),h=this._isLeft?a.getBottomLeft():a.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(l.getY())),m=this.imageRowToCodewordIndex(Math.trunc(h.getY())),x=this.getCodewords(),w=-1;for(let C=f;C<m;C++){if(x[C]==null)continue;let R=x[C];R.setRowNumberAsRowIndicatorColumn();let P=R.getRowNumber()-w;P===0||(P===1?w=R.getRowNumber():R.getRowNumber()>=r.getRowCount()?x[C]=null:w=R.getRowNumber())}}getBarcodeMetadata(){let r=this.getCodewords(),a=new cr,l=new cr,h=new cr,f=new cr;for(let x of r){if(x==null)continue;x.setRowNumberAsRowIndicatorColumn();let w=x.getValue()%30,C=x.getRowNumber();switch(this._isLeft||(C+=2),C%3){case 0:l.setValue(w*3+1);break;case 1:f.setValue(w/3),h.setValue(w%3);break;case 2:a.setValue(w+1);break}}if(a.getValue().length===0||l.getValue().length===0||h.getValue().length===0||f.getValue().length===0||a.getValue()[0]<1||l.getValue()[0]+h.getValue()[0]<Ze.MIN_ROWS_IN_BARCODE||l.getValue()[0]+h.getValue()[0]>Ze.MAX_ROWS_IN_BARCODE)return null;let m=new Zs(a.getValue()[0],l.getValue()[0],h.getValue()[0],f.getValue()[0]);return this.removeIncorrectCodewords(r,m),m}removeIncorrectCodewords(r,a){for(let l=0;l<r.length;l++){let h=r[l];if(r[l]==null)continue;let f=h.getValue()%30,m=h.getRowNumber();if(m>a.getRowCount()){r[l]=null;continue}switch(this._isLeft||(m+=2),m%3){case 0:f*3+1!==a.getRowCountUpperPart()&&(r[l]=null);break;case 1:(Math.trunc(f/3)!==a.getErrorCorrectionLevel()||f%3!==a.getRowCountLowerPart())&&(r[l]=null);break;case 2:f+1!==a.getColumnCount()&&(r[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class qn{constructor(r,a){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=r,this.barcodeColumnCount=r.getColumnCount(),this.boundingBox=a,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let r=Ze.MAX_CODEWORDS_IN_BARCODE,a;do a=r,r=this.adjustRowNumbersAndGetCount();while(r>0&&r<a);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(r){r!=null&&r.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let r=this.adjustRowNumbersByRow();if(r===0)return 0;for(let a=1;a<this.barcodeColumnCount+1;a++){let l=this.detectionResultColumns[a].getCodewords();for(let h=0;h<l.length;h++)l[h]!=null&&(l[h].hasValidRowNumber()||this.adjustRowNumbers(a,h,l))}return r}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let r=this.detectionResultColumns[0].getCodewords(),a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<r.length;l++)if(r[l]!=null&&a[l]!=null&&r[l].getRowNumber()===a[l].getRowNumber())for(let h=1;h<=this.barcodeColumnCount;h++){let f=this.detectionResultColumns[h].getCodewords()[l];f!=null&&(f.setRowNumber(r[l].getRowNumber()),f.hasValidRowNumber()||(this.detectionResultColumns[h].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let r=0,a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<a.length;l++){if(a[l]==null)continue;let h=a[l].getRowNumber(),f=0;for(let m=this.barcodeColumnCount+1;m>0&&f<this.ADJUST_ROW_NUMBER_SKIP;m--){let x=this.detectionResultColumns[m].getCodewords()[l];x!=null&&(f=qn.adjustRowNumberIfValid(h,f,x),x.hasValidRowNumber()||r++)}}return r}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let r=0,a=this.detectionResultColumns[0].getCodewords();for(let l=0;l<a.length;l++){if(a[l]==null)continue;let h=a[l].getRowNumber(),f=0;for(let m=1;m<this.barcodeColumnCount+1&&f<this.ADJUST_ROW_NUMBER_SKIP;m++){let x=this.detectionResultColumns[m].getCodewords()[l];x!=null&&(f=qn.adjustRowNumberIfValid(h,f,x),x.hasValidRowNumber()||r++)}}return r}static adjustRowNumberIfValid(r,a,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(r)?(l.setRowNumber(r),a=0):++a),a}adjustRowNumbers(r,a,l){if(!this.detectionResultColumns[r-1])return;let h=l[a],f=this.detectionResultColumns[r-1].getCodewords(),m=f;this.detectionResultColumns[r+1]!=null&&(m=this.detectionResultColumns[r+1].getCodewords());let x=new Array(14);x[2]=f[a],x[3]=m[a],a>0&&(x[0]=l[a-1],x[4]=f[a-1],x[5]=m[a-1]),a>1&&(x[8]=l[a-2],x[10]=f[a-2],x[11]=m[a-2]),a<l.length-1&&(x[1]=l[a+1],x[6]=f[a+1],x[7]=m[a+1]),a<l.length-2&&(x[9]=l[a+2],x[12]=f[a+2],x[13]=m[a+2]);for(let w of x)if(qn.adjustRowNumber(h,w))return}static adjustRowNumber(r,a){return a==null?!1:a.hasValidRowNumber()&&a.getBucket()===r.getBucket()?(r.setRowNumber(a.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(r){this.boundingBox=r}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(r,a){this.detectionResultColumns[r]=a}getDetectionResultColumn(r){return this.detectionResultColumns[r]}toString(){let r=this.detectionResultColumns[0];r==null&&(r=this.detectionResultColumns[this.barcodeColumnCount+1]);let a=new As;for(let l=0;l<r.getCodewords().length;l++){a.format("CW %3d:",l);for(let h=0;h<this.barcodeColumnCount+2;h++){if(this.detectionResultColumns[h]==null){a.format("    |   ");continue}let f=this.detectionResultColumns[h].getCodewords()[l];if(f==null){a.format("    |   ");continue}a.format(" %3d|%3d",f.getRowNumber(),f.getValue())}a.format("%n")}return a.toString()}}class ur{constructor(r,a,l,h){this.rowNumber=ur.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(r),this.endX=Math.trunc(a),this.bucket=Math.trunc(l),this.value=Math.trunc(h)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(r){return r!==ur.BARCODE_ROW_UNKNOWN&&this.bucket===r%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(r){this.rowNumber=r}toString(){return this.rowNumber+"|"+this.value}}ur.BARCODE_ROW_UNKNOWN=-1;class Nn{static initialize(){for(let r=0;r<Ze.SYMBOL_TABLE.length;r++){let a=Ze.SYMBOL_TABLE[r],l=a&1;for(let h=0;h<Ze.BARS_IN_MODULE;h++){let f=0;for(;(a&1)===l;)f+=1,a>>=1;l=a&1,Nn.RATIOS_TABLE[r]||(Nn.RATIOS_TABLE[r]=new Array(Ze.BARS_IN_MODULE)),Nn.RATIOS_TABLE[r][Ze.BARS_IN_MODULE-h-1]=Math.fround(f/Ze.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(r){let a=Nn.getDecodedCodewordValue(Nn.sampleBitCounts(r));return a!==-1?a:Nn.getClosestDecodedValue(r)}static sampleBitCounts(r){let a=We.sum(r),l=new Int32Array(Ze.BARS_IN_MODULE),h=0,f=0;for(let m=0;m<Ze.MODULES_IN_CODEWORD;m++){let x=a/(2*Ze.MODULES_IN_CODEWORD)+m*a/Ze.MODULES_IN_CODEWORD;f+r[h]<=x&&(f+=r[h],h++),l[h]++}return l}static getDecodedCodewordValue(r){let a=Nn.getBitValue(r);return Ze.getCodeword(a)===-1?-1:a}static getBitValue(r){let a=0;for(let l=0;l<r.length;l++)for(let h=0;h<r[l];h++)a=a<<1|(l%2===0?1:0);return Math.trunc(a)}static getClosestDecodedValue(r){let a=We.sum(r),l=new Array(Ze.BARS_IN_MODULE);if(a>1)for(let m=0;m<l.length;m++)l[m]=Math.fround(r[m]/a);let h=_n.MAX_VALUE,f=-1;this.bSymbolTableReady||Nn.initialize();for(let m=0;m<Nn.RATIOS_TABLE.length;m++){let x=0,w=Nn.RATIOS_TABLE[m];for(let C=0;C<Ze.BARS_IN_MODULE;C++){let R=Math.fround(w[C]-l[C]);if(x+=Math.fround(R*R),x>=h)break}x<h&&(h=x,f=Ze.SYMBOL_TABLE[m])}return f}}Nn.bSymbolTableReady=!1,Nn.RATIOS_TABLE=new Array(Ze.SYMBOL_TABLE.length).map(L=>new Array(Ze.BARS_IN_MODULE));class bs{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(r){this.segmentIndex=r}getFileId(){return this.fileId}setFileId(r){this.fileId=r}getOptionalData(){return this.optionalData}setOptionalData(r){this.optionalData=r}isLastSegment(){return this.lastSegment}setLastSegment(r){this.lastSegment=r}getSegmentCount(){return this.segmentCount}setSegmentCount(r){this.segmentCount=r}getSender(){return this.sender||null}setSender(r){this.sender=r}getAddressee(){return this.addressee||null}setAddressee(r){this.addressee=r}getFileName(){return this.fileName}setFileName(r){this.fileName=r}getFileSize(){return this.fileSize}setFileSize(r){this.fileSize=r}getChecksum(){return this.checksum}setChecksum(r){this.checksum=r}getTimestamp(){return this.timestamp}setTimestamp(r){this.timestamp=r}}class Da{static parseLong(r,a=void 0){return parseInt(r,a)}}class Ts extends _{}Ts.kind="NullPointerException";class Ma{writeBytes(r){this.writeBytesOffset(r,0,r.length)}writeBytesOffset(r,a,l){if(r==null)throw new Ts;if(a<0||a>r.length||l<0||a+l>r.length||a+l<0)throw new z;if(l===0)return;for(let h=0;h<l;h++)this.write(r[a+h])}flush(){}close(){}}class Qr extends _{}class La extends Ma{constructor(r=32){if(super(),this.count=0,r<0)throw new I("Negative initial size: "+r);this.buf=new Uint8Array(r)}ensureCapacity(r){r-this.buf.length>0&&this.grow(r)}grow(r){let l=this.buf.length<<1;if(l-r<0&&(l=r),l<0){if(r<0)throw new Qr;l=ee.MAX_VALUE}this.buf=he.copyOfUint8Array(this.buf,l)}write(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1}writeBytesOffset(r,a,l){if(a<0||a>r.length||l<0||a+l-r.length>0)throw new z;this.ensureCapacity(this.count+l),K.arraycopy(r,a,this.buf,this.count,l),this.count+=l}writeTo(r){r.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return he.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(r){return new String(this.buf).toString()}toString_number(r){return new String(this.buf).toString()}close(){}}var Qt;(function(L){L[L.ALPHA=0]="ALPHA",L[L.LOWER=1]="LOWER",L[L.MIXED=2]="MIXED",L[L.PUNCT=3]="PUNCT",L[L.ALPHA_SHIFT=4]="ALPHA_SHIFT",L[L.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Qt||(Qt={}));function Ps(){if(typeof window<"u")return window.BigInt||null;if(typeof Dh<"u")return Dh.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Js;function Br(L){if(typeof Js>"u"&&(Js=Ps()),Js===null)throw new Error("BigInt is not supported!");return Js(L)}function $s(){let L=[];L[0]=Br(1);let r=Br(900);L[1]=r;for(let a=2;a<16;a++)L[a]=L[a-1]*r;return L}class ye{static decode(r,a){let l=new Y(""),h=V.ISO8859_1;l.enableDecoding(h);let f=1,m=r[f++],x=new bs;for(;f<r[0];){switch(m){case ye.TEXT_COMPACTION_MODE_LATCH:f=ye.textCompaction(r,f,l);break;case ye.BYTE_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH_6:f=ye.byteCompaction(m,r,h,f,l);break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(r[f++]);break;case ye.NUMERIC_COMPACTION_MODE_LATCH:f=ye.numericCompaction(r,f,l);break;case ye.ECI_CHARSET:V.getCharacterSetECIByValue(r[f++]);break;case ye.ECI_GENERAL_PURPOSE:f+=2;break;case ye.ECI_USER_DEFINED:f++;break;case ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:f=ye.decodeMacroBlock(r,f,x);break;case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ye.MACRO_PDF417_TERMINATOR:throw new j;default:f--,f=ye.textCompaction(r,f,l);break}if(f<r.length)m=r[f++];else throw j.getFormatInstance()}if(l.length()===0)throw j.getFormatInstance();let w=new Nt(null,l.toString(),null,a);return w.setOther(x),w}static decodeMacroBlock(r,a,l){if(a+ye.NUMBER_OF_SEQUENCE_CODEWORDS>r[0])throw j.getFormatInstance();let h=new Int32Array(ye.NUMBER_OF_SEQUENCE_CODEWORDS);for(let x=0;x<ye.NUMBER_OF_SEQUENCE_CODEWORDS;x++,a++)h[x]=r[a];l.setSegmentIndex(ee.parseInt(ye.decodeBase900toBase10(h,ye.NUMBER_OF_SEQUENCE_CODEWORDS)));let f=new Y;a=ye.textCompaction(r,a,f),l.setFileId(f.toString());let m=-1;for(r[a]===ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(m=a+1);a<r[0];)switch(r[a]){case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(a++,r[a]){case ye.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let x=new Y;a=ye.textCompaction(r,a+1,x),l.setFileName(x.toString());break;case ye.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let w=new Y;a=ye.textCompaction(r,a+1,w),l.setSender(w.toString());break;case ye.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let C=new Y;a=ye.textCompaction(r,a+1,C),l.setAddressee(C.toString());break;case ye.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let R=new Y;a=ye.numericCompaction(r,a+1,R),l.setSegmentCount(ee.parseInt(R.toString()));break;case ye.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let P=new Y;a=ye.numericCompaction(r,a+1,P),l.setTimestamp(Da.parseLong(P.toString()));break;case ye.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let B=new Y;a=ye.numericCompaction(r,a+1,B),l.setChecksum(ee.parseInt(B.toString()));break;case ye.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let q=new Y;a=ye.numericCompaction(r,a+1,q),l.setFileSize(Da.parseLong(q.toString()));break;default:throw j.getFormatInstance()}break;case ye.MACRO_PDF417_TERMINATOR:a++,l.setLastSegment(!0);break;default:throw j.getFormatInstance()}if(m!==-1){let x=a-m;l.isLastSegment()&&x--,l.setOptionalData(he.copyOfRange(r,m,m+x))}return a}static textCompaction(r,a,l){let h=new Int32Array((r[0]-a)*2),f=new Int32Array((r[0]-a)*2),m=0,x=!1;for(;a<r[0]&&!x;){let w=r[a++];if(w<ye.TEXT_COMPACTION_MODE_LATCH)h[m]=w/30,h[m+1]=w%30,m+=2;else switch(w){case ye.TEXT_COMPACTION_MODE_LATCH:h[m++]=ye.TEXT_COMPACTION_MODE_LATCH;break;case ye.BYTE_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH_6:case ye.NUMERIC_COMPACTION_MODE_LATCH:case ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ye.MACRO_PDF417_TERMINATOR:a--,x=!0;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h[m]=ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,w=r[a++],f[m]=w,m++;break}}return ye.decodeTextCompaction(h,f,m,l),a}static decodeTextCompaction(r,a,l,h){let f=Qt.ALPHA,m=Qt.ALPHA,x=0;for(;x<l;){let w=r[x],C="";switch(f){case Qt.ALPHA:if(w<26)C=String.fromCharCode(65+w);else switch(w){case 26:C=" ";break;case ye.LL:f=Qt.LOWER;break;case ye.ML:f=Qt.MIXED;break;case ye.PS:m=f,f=Qt.PUNCT_SHIFT;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(a[x]);break;case ye.TEXT_COMPACTION_MODE_LATCH:f=Qt.ALPHA;break}break;case Qt.LOWER:if(w<26)C=String.fromCharCode(97+w);else switch(w){case 26:C=" ";break;case ye.AS:m=f,f=Qt.ALPHA_SHIFT;break;case ye.ML:f=Qt.MIXED;break;case ye.PS:m=f,f=Qt.PUNCT_SHIFT;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(a[x]);break;case ye.TEXT_COMPACTION_MODE_LATCH:f=Qt.ALPHA;break}break;case Qt.MIXED:if(w<ye.PL)C=ye.MIXED_CHARS[w];else switch(w){case ye.PL:f=Qt.PUNCT;break;case 26:C=" ";break;case ye.LL:f=Qt.LOWER;break;case ye.AL:f=Qt.ALPHA;break;case ye.PS:m=f,f=Qt.PUNCT_SHIFT;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(a[x]);break;case ye.TEXT_COMPACTION_MODE_LATCH:f=Qt.ALPHA;break}break;case Qt.PUNCT:if(w<ye.PAL)C=ye.PUNCT_CHARS[w];else switch(w){case ye.PAL:f=Qt.ALPHA;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(a[x]);break;case ye.TEXT_COMPACTION_MODE_LATCH:f=Qt.ALPHA;break}break;case Qt.ALPHA_SHIFT:if(f=m,w<26)C=String.fromCharCode(65+w);else switch(w){case 26:C=" ";break;case ye.TEXT_COMPACTION_MODE_LATCH:f=Qt.ALPHA;break}break;case Qt.PUNCT_SHIFT:if(f=m,w<ye.PAL)C=ye.PUNCT_CHARS[w];else switch(w){case ye.PAL:f=Qt.ALPHA;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(a[x]);break;case ye.TEXT_COMPACTION_MODE_LATCH:f=Qt.ALPHA;break}break}C!==""&&h.append(C),x++}}static byteCompaction(r,a,l,h,f){let m=new La,x=0,w=0,C=!1;switch(r){case ye.BYTE_COMPACTION_MODE_LATCH:let R=new Int32Array(6),P=a[h++];for(;h<a[0]&&!C;)switch(R[x++]=P,w=900*w+P,P=a[h++],P){case ye.TEXT_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH:case ye.NUMERIC_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH_6:case ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ye.MACRO_PDF417_TERMINATOR:h--,C=!0;break;default:if(x%5===0&&x>0){for(let B=0;B<6;++B)m.write(Number(Br(w)>>Br(8*(5-B))));w=0,x=0}break}h===a[0]&&P<ye.TEXT_COMPACTION_MODE_LATCH&&(R[x++]=P);for(let B=0;B<x;B++)m.write(R[B]);break;case ye.BYTE_COMPACTION_MODE_LATCH_6:for(;h<a[0]&&!C;){let B=a[h++];if(B<ye.TEXT_COMPACTION_MODE_LATCH)x++,w=900*w+B;else switch(B){case ye.TEXT_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH:case ye.NUMERIC_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH_6:case ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ye.MACRO_PDF417_TERMINATOR:h--,C=!0;break}if(x%5===0&&x>0){for(let q=0;q<6;++q)m.write(Number(Br(w)>>Br(8*(5-q))));w=0,x=0}}break}return f.append(W.decode(m.toByteArray(),l)),h}static numericCompaction(r,a,l){let h=0,f=!1,m=new Int32Array(ye.MAX_NUMERIC_CODEWORDS);for(;a<r[0]&&!f;){let x=r[a++];if(a===r[0]&&(f=!0),x<ye.TEXT_COMPACTION_MODE_LATCH)m[h]=x,h++;else switch(x){case ye.TEXT_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH_6:case ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ye.MACRO_PDF417_TERMINATOR:a--,f=!0;break}(h%ye.MAX_NUMERIC_CODEWORDS===0||x===ye.NUMERIC_COMPACTION_MODE_LATCH||f)&&h>0&&(l.append(ye.decodeBase900toBase10(m,h)),h=0)}return a}static decodeBase900toBase10(r,a){let l=Br(0);for(let f=0;f<a;f++)l+=ye.EXP900[a-f-1]*Br(r[f]);let h=l.toString();if(h.charAt(0)!=="1")throw new j;return h.substring(1)}}ye.TEXT_COMPACTION_MODE_LATCH=900,ye.BYTE_COMPACTION_MODE_LATCH=901,ye.NUMERIC_COMPACTION_MODE_LATCH=902,ye.BYTE_COMPACTION_MODE_LATCH_6=924,ye.ECI_USER_DEFINED=925,ye.ECI_GENERAL_PURPOSE=926,ye.ECI_CHARSET=927,ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ye.MACRO_PDF417_TERMINATOR=922,ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ye.MAX_NUMERIC_CODEWORDS=15,ye.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ye.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ye.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ye.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ye.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ye.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ye.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ye.PL=25,ye.LL=27,ye.AS=27,ye.ML=28,ye.AL=28,ye.PS=29,ye.PAL=29,ye.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ye.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ye.EXP900=Ps()?$s():[],ye.NUMBER_OF_SEQUENCE_CODEWORDS=2;class gt{constructor(){}static decode(r,a,l,h,f,m,x){let w=new Lr(r,a,l,h,f),C=null,R=null,P;for(let $=!0;;$=!1){if(a!=null&&(C=gt.getRowIndicatorColumn(r,w,a,!0,m,x)),h!=null&&(R=gt.getRowIndicatorColumn(r,w,h,!1,m,x)),P=gt.merge(C,R),P==null)throw me.getNotFoundInstance();let ne=P.getBoundingBox();if($&&ne!=null&&(ne.getMinY()<w.getMinY()||ne.getMaxY()>w.getMaxY()))w=ne;else break}P.setBoundingBox(w);let B=P.getBarcodeColumnCount()+1;P.setDetectionResultColumn(0,C),P.setDetectionResultColumn(B,R);let q=C!=null;for(let $=1;$<=B;$++){let ne=q?$:B-$;if(P.getDetectionResultColumn(ne)!==void 0)continue;let ue;ne===0||ne===B?ue=new wr(w,ne===0):ue=new Pr(w),P.setDetectionResultColumn(ne,ue);let Ee=-1,Pe=Ee;for(let Me=w.getMinY();Me<=w.getMaxY();Me++){if(Ee=gt.getStartColumn(P,ne,Me,q),Ee<0||Ee>w.getMaxX()){if(Pe===-1)continue;Ee=Pe}let Oe=gt.detectCodeword(r,w.getMinX(),w.getMaxX(),q,Ee,Me,m,x);Oe!=null&&(ue.setCodeword(Me,Oe),Pe=Ee,m=Math.min(m,Oe.getWidth()),x=Math.max(x,Oe.getWidth()))}}return gt.createDecoderResult(P)}static merge(r,a){if(r==null&&a==null)return null;let l=gt.getBarcodeMetadata(r,a);if(l==null)return null;let h=Lr.merge(gt.adjustBoundingBox(r),gt.adjustBoundingBox(a));return new qn(l,h)}static adjustBoundingBox(r){if(r==null)return null;let a=r.getRowHeights();if(a==null)return null;let l=gt.getMax(a),h=0;for(let x of a)if(h+=l-x,x>0)break;let f=r.getCodewords();for(let x=0;h>0&&f[x]==null;x++)h--;let m=0;for(let x=a.length-1;x>=0&&(m+=l-a[x],!(a[x]>0));x--);for(let x=f.length-1;m>0&&f[x]==null;x--)m--;return r.getBoundingBox().addMissingRows(h,m,r.isLeft())}static getMax(r){let a=-1;for(let l of r)a=Math.max(a,l);return a}static getBarcodeMetadata(r,a){let l;if(r==null||(l=r.getBarcodeMetadata())==null)return a==null?null:a.getBarcodeMetadata();let h;return a==null||(h=a.getBarcodeMetadata())==null?l:l.getColumnCount()!==h.getColumnCount()&&l.getErrorCorrectionLevel()!==h.getErrorCorrectionLevel()&&l.getRowCount()!==h.getRowCount()?null:l}static getRowIndicatorColumn(r,a,l,h,f,m){let x=new wr(a,h);for(let w=0;w<2;w++){let C=w===0?1:-1,R=Math.trunc(Math.trunc(l.getX()));for(let P=Math.trunc(Math.trunc(l.getY()));P<=a.getMaxY()&&P>=a.getMinY();P+=C){let B=gt.detectCodeword(r,0,r.getWidth(),h,R,P,f,m);B!=null&&(x.setCodeword(P,B),h?R=B.getStartX():R=B.getEndX())}}return x}static adjustCodewordCount(r,a){let l=a[0][1],h=l.getValue(),f=r.getBarcodeColumnCount()*r.getBarcodeRowCount()-gt.getNumberOfECCodeWords(r.getBarcodeECLevel());if(h.length===0){if(f<1||f>Ze.MAX_CODEWORDS_IN_BARCODE)throw me.getNotFoundInstance();l.setValue(f)}else h[0]!==f&&l.setValue(f)}static createDecoderResult(r){let a=gt.createBarcodeMatrix(r);gt.adjustCodewordCount(r,a);let l=new Array,h=new Int32Array(r.getBarcodeRowCount()*r.getBarcodeColumnCount()),f=[],m=new Array;for(let w=0;w<r.getBarcodeRowCount();w++)for(let C=0;C<r.getBarcodeColumnCount();C++){let R=a[w][C+1].getValue(),P=w*r.getBarcodeColumnCount()+C;R.length===0?l.push(P):R.length===1?h[P]=R[0]:(m.push(P),f.push(R))}let x=new Array(f.length);for(let w=0;w<x.length;w++)x[w]=f[w];return gt.createDecoderResultFromAmbiguousValues(r.getBarcodeECLevel(),h,Ze.toIntArray(l),Ze.toIntArray(m),x)}static createDecoderResultFromAmbiguousValues(r,a,l,h,f){let m=new Int32Array(h.length),x=100;for(;x-- >0;){for(let w=0;w<m.length;w++)a[h[w]]=f[w][m[w]];try{return gt.decodeCodewords(a,r,l)}catch(w){if(!(w instanceof U))throw w}if(m.length===0)throw U.getChecksumInstance();for(let w=0;w<m.length;w++)if(m[w]<f[w].length-1){m[w]++;break}else if(m[w]=0,w===m.length-1)throw U.getChecksumInstance()}throw U.getChecksumInstance()}static createBarcodeMatrix(r){let a=Array.from({length:r.getBarcodeRowCount()},()=>new Array(r.getBarcodeColumnCount()+2));for(let h=0;h<a.length;h++)for(let f=0;f<a[h].length;f++)a[h][f]=new cr;let l=0;for(let h of r.getDetectionResultColumns()){if(h!=null){for(let f of h.getCodewords())if(f!=null){let m=f.getRowNumber();if(m>=0){if(m>=a.length)continue;a[m][l].setValue(f.getValue())}}}l++}return a}static isValidBarcodeColumn(r,a){return a>=0&&a<=r.getBarcodeColumnCount()+1}static getStartColumn(r,a,l,h){let f=h?1:-1,m=null;if(gt.isValidBarcodeColumn(r,a-f)&&(m=r.getDetectionResultColumn(a-f).getCodeword(l)),m!=null)return h?m.getEndX():m.getStartX();if(m=r.getDetectionResultColumn(a).getCodewordNearby(l),m!=null)return h?m.getStartX():m.getEndX();if(gt.isValidBarcodeColumn(r,a-f)&&(m=r.getDetectionResultColumn(a-f).getCodewordNearby(l)),m!=null)return h?m.getEndX():m.getStartX();let x=0;for(;gt.isValidBarcodeColumn(r,a-f);){a-=f;for(let w of r.getDetectionResultColumn(a).getCodewords())if(w!=null)return(h?w.getEndX():w.getStartX())+f*x*(w.getEndX()-w.getStartX());x++}return h?r.getBoundingBox().getMinX():r.getBoundingBox().getMaxX()}static detectCodeword(r,a,l,h,f,m,x,w){f=gt.adjustCodewordStartColumn(r,a,l,h,f,m);let C=gt.getModuleBitCount(r,a,l,h,f,m);if(C==null)return null;let R,P=We.sum(C);if(h)R=f+P;else{for(let $=0;$<C.length/2;$++){let ne=C[$];C[$]=C[C.length-1-$],C[C.length-1-$]=ne}R=f,f=R-P}if(!gt.checkCodewordSkew(P,x,w))return null;let B=Nn.getDecodedValue(C),q=Ze.getCodeword(B);return q===-1?null:new ur(f,R,gt.getCodewordBucketNumber(B),q)}static getModuleBitCount(r,a,l,h,f,m){let x=f,w=new Int32Array(8),C=0,R=h?1:-1,P=h;for(;(h?x<l:x>=a)&&C<w.length;)r.get(x,m)===P?(w[C]++,x+=R):(C++,P=!P);return C===w.length||x===(h?l:a)&&C===w.length-1?w:null}static getNumberOfECCodeWords(r){return 2<<r}static adjustCodewordStartColumn(r,a,l,h,f,m){let x=f,w=h?-1:1;for(let C=0;C<2;C++){for(;(h?x>=a:x<l)&&h===r.get(x,m);){if(Math.abs(f-x)>gt.CODEWORD_SKEW_SIZE)return f;x+=w}w=-w,h=!h}return x}static checkCodewordSkew(r,a,l){return a-gt.CODEWORD_SKEW_SIZE<=r&&r<=l+gt.CODEWORD_SKEW_SIZE}static decodeCodewords(r,a,l){if(r.length===0)throw j.getFormatInstance();let h=1<<a+1,f=gt.correctErrors(r,l,h);gt.verifyCodewordCount(r,h);let m=ye.decode(r,""+a);return m.setErrorsCorrected(f),m.setErasures(l.length),m}static correctErrors(r,a,l){if(a!=null&&a.length>l/2+gt.MAX_ERRORS||l<0||l>gt.MAX_EC_CODEWORDS)throw U.getChecksumInstance();return gt.errorCorrection.decode(r,l,a)}static verifyCodewordCount(r,a){if(r.length<4)throw j.getFormatInstance();let l=r[0];if(l>r.length)throw j.getFormatInstance();if(l===0)if(a<r.length)r[0]=r.length-a;else throw j.getFormatInstance()}static getBitCountForCodeword(r){let a=new Int32Array(8),l=0,h=a.length-1;for(;!((r&1)!==l&&(l=r&1,h--,h<0));)a[h]++,r>>=1;return a}static getCodewordBucketNumber(r){return r instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(r):this.getCodewordBucketNumber_number(r)}static getCodewordBucketNumber_number(r){return gt.getCodewordBucketNumber(gt.getBitCountForCodeword(r))}static getCodewordBucketNumber_Int32Array(r){return(r[0]-r[2]+r[4]-r[6]+9)%9}static toString(r){let a=new As;for(let l=0;l<r.length;l++){a.format("Row %2d: ",l);for(let h=0;h<r[l].length;h++){let f=r[l][h];f.getValue().length===0?a.format("        ",null):a.format("%4d(%2d)",f.getValue()[0],f.getConfidence(f.getValue()[0]))}a.format("%n")}return a.toString()}}gt.CODEWORD_SKEW_SIZE=2,gt.MAX_ERRORS=3,gt.MAX_EC_CODEWORDS=512,gt.errorCorrection=new Mr;class Un{decode(r,a=null){let l=Un.decode(r,a,!1);if(l==null||l.length===0||l[0]==null)throw me.getNotFoundInstance();return l[0]}decodeMultiple(r,a=null){try{return Un.decode(r,a,!0)}catch(l){throw l instanceof j||l instanceof U?me.getNotFoundInstance():l}}static decode(r,a,l){const h=new Array,f=it.detectMultiple(r,a,l);for(const m of f.getPoints()){const x=gt.decode(f.getBits(),m[4],m[5],m[6],m[7],Un.getMinCodewordWidth(m),Un.getMaxCodewordWidth(m)),w=new Ue(x.getText(),x.getRawBytes(),void 0,m,Le.PDF_417);w.putMetadata(_t.ERROR_CORRECTION_LEVEL,x.getECLevel());const C=x.getOther();C!=null&&w.putMetadata(_t.PDF417_EXTRA_METADATA,C),h.push(w)}return h.map(m=>m)}static getMaxWidth(r,a){return r==null||a==null?0:Math.trunc(Math.abs(r.getX()-a.getX()))}static getMinWidth(r,a){return r==null||a==null?ee.MAX_VALUE:Math.trunc(Math.abs(r.getX()-a.getX()))}static getMaxCodewordWidth(r){return Math.floor(Math.max(Math.max(Un.getMaxWidth(r[0],r[4]),Un.getMaxWidth(r[6],r[2])*Ze.MODULES_IN_CODEWORD/Ze.MODULES_IN_STOP_PATTERN),Math.max(Un.getMaxWidth(r[1],r[5]),Un.getMaxWidth(r[7],r[3])*Ze.MODULES_IN_CODEWORD/Ze.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(r){return Math.floor(Math.min(Math.min(Un.getMinWidth(r[0],r[4]),Un.getMinWidth(r[6],r[2])*Ze.MODULES_IN_CODEWORD/Ze.MODULES_IN_STOP_PATTERN),Math.min(Un.getMinWidth(r[1],r[5]),Un.getMinWidth(r[7],r[3])*Ze.MODULES_IN_CODEWORD/Ze.MODULES_IN_STOP_PATTERN)))}reset(){}}class ea extends _{}ea.kind="ReaderException";class Io{constructor(r,a){this.verbose=r===!0,a&&this.setHints(a)}decode(r,a){return a&&this.setHints(a),this.decodeInternal(r)}decodeWithState(r){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(r)}setHints(r){this.hints=r;const a=!o(r)&&r.get(Ne.TRY_HARDER)===!0,l=o(r)?null:r.get(Ne.POSSIBLE_FORMATS),h=new Array;if(!o(l)){const f=l.some(m=>m===Le.UPC_A||m===Le.UPC_E||m===Le.EAN_13||m===Le.EAN_8||m===Le.CODABAR||m===Le.CODE_39||m===Le.CODE_93||m===Le.CODE_128||m===Le.ITF||m===Le.RSS_14||m===Le.RSS_EXPANDED);f&&!a&&h.push(new Pi(r,this.verbose)),l.includes(Le.QR_CODE)&&h.push(new er),l.includes(Le.DATA_MATRIX)&&h.push(new Qi),l.includes(Le.AZTEC)&&h.push(new Kr),l.includes(Le.PDF_417)&&h.push(new Un),f&&a&&h.push(new Pi(r,this.verbose))}h.length===0&&(a||h.push(new Pi(r,this.verbose)),h.push(new er),h.push(new Qi),h.push(new Kr),h.push(new Un),a&&h.push(new Pi(r,this.verbose))),this.readers=h}reset(){if(this.readers!==null)for(const r of this.readers)r.reset()}decodeInternal(r){if(this.readers===null)throw new ea("No readers where selected, nothing can be read.");for(const a of this.readers)try{return a.decode(r,this.hints)}catch(l){if(l instanceof ea)continue}throw new me("No MultiFormat Readers were able to detect the code.")}}class Zr extends ke{constructor(r=null,a=500){const l=new Io;l.setHints(r),super(l,a)}decodeBitmap(r){return this.reader.decodeWithState(r)}}class al extends ke{constructor(r=500){super(new Un,r)}}class ol extends ke{constructor(r=500){super(new er,r)}}var Pa;(function(L){L[L.ERROR_CORRECTION=0]="ERROR_CORRECTION",L[L.CHARACTER_SET=1]="CHARACTER_SET",L[L.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",L[L.MIN_SIZE=3]="MIN_SIZE",L[L.MAX_SIZE=4]="MAX_SIZE",L[L.MARGIN=5]="MARGIN",L[L.PDF417_COMPACT=6]="PDF417_COMPACT",L[L.PDF417_COMPACTION=7]="PDF417_COMPACTION",L[L.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",L[L.AZTEC_LAYERS=9]="AZTEC_LAYERS",L[L.QR_VERSION=10]="QR_VERSION"})(Pa||(Pa={}));var Vn=Pa;class Jr{constructor(r){this.field=r,this.cachedGenerators=[],this.cachedGenerators.push(new Sn(r,Int32Array.from([1])))}buildGenerator(r){const a=this.cachedGenerators;if(r>=a.length){let l=a[a.length-1];const h=this.field;for(let f=a.length;f<=r;f++){const m=l.multiply(new Sn(h,Int32Array.from([1,h.exp(f-1+h.getGeneratorBase())])));a.push(m),l=m}}return a[r]}encode(r,a){if(a===0)throw new I("No error correction bytes");const l=r.length-a;if(l<=0)throw new I("No data bytes provided");const h=this.buildGenerator(a),f=new Int32Array(l);K.arraycopy(r,0,f,0,l);let m=new Sn(this.field,f);m=m.multiplyByMonomial(a,1);const w=m.divide(h)[1].getCoefficients(),C=a-w.length;for(let R=0;R<C;R++)r[l+R]=0;K.arraycopy(w,0,r,l+C,w.length)}}class Dt{constructor(){}static applyMaskPenaltyRule1(r){return Dt.applyMaskPenaltyRule1Internal(r,!0)+Dt.applyMaskPenaltyRule1Internal(r,!1)}static applyMaskPenaltyRule2(r){let a=0;const l=r.getArray(),h=r.getWidth(),f=r.getHeight();for(let m=0;m<f-1;m++){const x=l[m];for(let w=0;w<h-1;w++){const C=x[w];C===x[w+1]&&C===l[m+1][w]&&C===l[m+1][w+1]&&a++}}return Dt.N2*a}static applyMaskPenaltyRule3(r){let a=0;const l=r.getArray(),h=r.getWidth(),f=r.getHeight();for(let m=0;m<f;m++)for(let x=0;x<h;x++){const w=l[m];x+6<h&&w[x]===1&&w[x+1]===0&&w[x+2]===1&&w[x+3]===1&&w[x+4]===1&&w[x+5]===0&&w[x+6]===1&&(Dt.isWhiteHorizontal(w,x-4,x)||Dt.isWhiteHorizontal(w,x+7,x+11))&&a++,m+6<f&&l[m][x]===1&&l[m+1][x]===0&&l[m+2][x]===1&&l[m+3][x]===1&&l[m+4][x]===1&&l[m+5][x]===0&&l[m+6][x]===1&&(Dt.isWhiteVertical(l,x,m-4,m)||Dt.isWhiteVertical(l,x,m+7,m+11))&&a++}return a*Dt.N3}static isWhiteHorizontal(r,a,l){a=Math.max(a,0),l=Math.min(l,r.length);for(let h=a;h<l;h++)if(r[h]===1)return!1;return!0}static isWhiteVertical(r,a,l,h){l=Math.max(l,0),h=Math.min(h,r.length);for(let f=l;f<h;f++)if(r[f][a]===1)return!1;return!0}static applyMaskPenaltyRule4(r){let a=0;const l=r.getArray(),h=r.getWidth(),f=r.getHeight();for(let w=0;w<f;w++){const C=l[w];for(let R=0;R<h;R++)C[R]===1&&a++}const m=r.getHeight()*r.getWidth();return Math.floor(Math.abs(a*2-m)*10/m)*Dt.N4}static getDataMaskBit(r,a,l){let h,f;switch(r){case 0:h=l+a&1;break;case 1:h=l&1;break;case 2:h=a%3;break;case 3:h=(l+a)%3;break;case 4:h=Math.floor(l/2)+Math.floor(a/3)&1;break;case 5:f=l*a,h=(f&1)+f%3;break;case 6:f=l*a,h=(f&1)+f%3&1;break;case 7:f=l*a,h=f%3+(l+a&1)&1;break;default:throw new I("Invalid mask pattern: "+r)}return h===0}static applyMaskPenaltyRule1Internal(r,a){let l=0;const h=a?r.getHeight():r.getWidth(),f=a?r.getWidth():r.getHeight(),m=r.getArray();for(let x=0;x<h;x++){let w=0,C=-1;for(let R=0;R<f;R++){const P=a?m[x][R]:m[R][x];P===C?w++:(w>=5&&(l+=Dt.N1+(w-5)),w=1,C=P)}w>=5&&(l+=Dt.N1+(w-5))}return l}}Dt.N1=3,Dt.N2=3,Dt.N3=40,Dt.N4=10;class ta{constructor(r,a){this.width=r,this.height=a;const l=new Array(a);for(let h=0;h!==a;h++)l[h]=new Uint8Array(r);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(r,a){return this.bytes[a][r]}getArray(){return this.bytes}setNumber(r,a,l){this.bytes[a][r]=l}setBoolean(r,a,l){this.bytes[a][r]=l?1:0}clear(r){for(const a of this.bytes)he.fill(a,r)}equals(r){if(!(r instanceof ta))return!1;const a=r;if(this.width!==a.width||this.height!==a.height)return!1;for(let l=0,h=this.height;l<h;++l){const f=this.bytes[l],m=a.bytes[l];for(let x=0,w=this.width;x<w;++x)if(f[x]!==m[x])return!1}return!0}toString(){const r=new Y;for(let a=0,l=this.height;a<l;++a){const h=this.bytes[a];for(let f=0,m=this.width;f<m;++f)switch(h[f]){case 0:r.append(" 0");break;case 1:r.append(" 1");break;default:r.append("  ");break}r.append(`
`)}return r.toString()}}class $r{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const r=new Y;return r.append(`<<
`),r.append(" mode: "),r.append(this.mode?this.mode.toString():"null"),r.append(`
 ecLevel: `),r.append(this.ecLevel?this.ecLevel.toString():"null"),r.append(`
 version: `),r.append(this.version?this.version.toString():"null"),r.append(`
 maskPattern: `),r.append(this.maskPattern.toString()),this.matrix?(r.append(`
 matrix:
`),r.append(this.matrix.toString())):r.append(`
 matrix: null
`),r.append(`>>
`),r.toString()}setMode(r){this.mode=r}setECLevel(r){this.ecLevel=r}setVersion(r){this.version=r}setMaskPattern(r){this.maskPattern=r}setMatrix(r){this.matrix=r}static isValidMaskPattern(r){return r>=0&&r<$r.NUM_MASK_PATTERNS}}$r.NUM_MASK_PATTERNS=8;class Lt extends _{}Lt.kind="WriterException";class p{constructor(){}static clearMatrix(r){r.clear(255)}static buildMatrix(r,a,l,h,f){p.clearMatrix(f),p.embedBasicPatterns(l,f),p.embedTypeInfo(a,h,f),p.maybeEmbedVersionInfo(l,f),p.embedDataBits(r,h,f)}static embedBasicPatterns(r,a){p.embedPositionDetectionPatternsAndSeparators(a),p.embedDarkDotAtLeftBottomCorner(a),p.maybeEmbedPositionAdjustmentPatterns(r,a),p.embedTimingPatterns(a)}static embedTypeInfo(r,a,l){const h=new ae;p.makeTypeInfoBits(r,a,h);for(let f=0,m=h.getSize();f<m;++f){const x=h.get(h.getSize()-1-f),w=p.TYPE_INFO_COORDINATES[f],C=w[0],R=w[1];if(l.setBoolean(C,R,x),f<8){const P=l.getWidth()-f-1;l.setBoolean(P,8,x)}else{const B=l.getHeight()-7+(f-8);l.setBoolean(8,B,x)}}}static maybeEmbedVersionInfo(r,a){if(r.getVersionNumber()<7)return;const l=new ae;p.makeVersionInfoBits(r,l);let h=17;for(let f=0;f<6;++f)for(let m=0;m<3;++m){const x=l.get(h);h--,a.setBoolean(f,a.getHeight()-11+m,x),a.setBoolean(a.getHeight()-11+m,f,x)}}static embedDataBits(r,a,l){let h=0,f=-1,m=l.getWidth()-1,x=l.getHeight()-1;for(;m>0;){for(m===6&&(m-=1);x>=0&&x<l.getHeight();){for(let w=0;w<2;++w){const C=m-w;if(!p.isEmpty(l.get(C,x)))continue;let R;h<r.getSize()?(R=r.get(h),++h):R=!1,a!==255&&Dt.getDataMaskBit(a,C,x)&&(R=!R),l.setBoolean(C,x,R)}x+=f}f=-f,x+=f,m-=2}if(h!==r.getSize())throw new Lt("Not all bits consumed: "+h+"/"+r.getSize())}static findMSBSet(r){return 32-ee.numberOfLeadingZeros(r)}static calculateBCHCode(r,a){if(a===0)throw new I("0 polynomial");const l=p.findMSBSet(a);for(r<<=l-1;p.findMSBSet(r)>=l;)r^=a<<p.findMSBSet(r)-l;return r}static makeTypeInfoBits(r,a,l){if(!$r.isValidMaskPattern(a))throw new Lt("Invalid mask pattern");const h=r.getBits()<<3|a;l.appendBits(h,5);const f=p.calculateBCHCode(h,p.TYPE_INFO_POLY);l.appendBits(f,10);const m=new ae;if(m.appendBits(p.TYPE_INFO_MASK_PATTERN,15),l.xor(m),l.getSize()!==15)throw new Lt("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(r,a){a.appendBits(r.getVersionNumber(),6);const l=p.calculateBCHCode(r.getVersionNumber(),p.VERSION_INFO_POLY);if(a.appendBits(l,12),a.getSize()!==18)throw new Lt("should not happen but we got: "+a.getSize())}static isEmpty(r){return r===255}static embedTimingPatterns(r){for(let a=8;a<r.getWidth()-8;++a){const l=(a+1)%2;p.isEmpty(r.get(a,6))&&r.setNumber(a,6,l),p.isEmpty(r.get(6,a))&&r.setNumber(6,a,l)}}static embedDarkDotAtLeftBottomCorner(r){if(r.get(8,r.getHeight()-8)===0)throw new Lt;r.setNumber(8,r.getHeight()-8,1)}static embedHorizontalSeparationPattern(r,a,l){for(let h=0;h<8;++h){if(!p.isEmpty(l.get(r+h,a)))throw new Lt;l.setNumber(r+h,a,0)}}static embedVerticalSeparationPattern(r,a,l){for(let h=0;h<7;++h){if(!p.isEmpty(l.get(r,a+h)))throw new Lt;l.setNumber(r,a+h,0)}}static embedPositionAdjustmentPattern(r,a,l){for(let h=0;h<5;++h){const f=p.POSITION_ADJUSTMENT_PATTERN[h];for(let m=0;m<5;++m)l.setNumber(r+m,a+h,f[m])}}static embedPositionDetectionPattern(r,a,l){for(let h=0;h<7;++h){const f=p.POSITION_DETECTION_PATTERN[h];for(let m=0;m<7;++m)l.setNumber(r+m,a+h,f[m])}}static embedPositionDetectionPatternsAndSeparators(r){const a=p.POSITION_DETECTION_PATTERN[0].length;p.embedPositionDetectionPattern(0,0,r),p.embedPositionDetectionPattern(r.getWidth()-a,0,r),p.embedPositionDetectionPattern(0,r.getWidth()-a,r);const l=8;p.embedHorizontalSeparationPattern(0,l-1,r),p.embedHorizontalSeparationPattern(r.getWidth()-l,l-1,r),p.embedHorizontalSeparationPattern(0,r.getWidth()-l,r);const h=7;p.embedVerticalSeparationPattern(h,0,r),p.embedVerticalSeparationPattern(r.getHeight()-h-1,0,r),p.embedVerticalSeparationPattern(h,r.getHeight()-h,r)}static maybeEmbedPositionAdjustmentPatterns(r,a){if(r.getVersionNumber()<2)return;const l=r.getVersionNumber()-1,h=p.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let f=0,m=h.length;f!==m;f++){const x=h[f];if(x>=0)for(let w=0;w!==m;w++){const C=h[w];C>=0&&p.isEmpty(a.get(C,x))&&p.embedPositionAdjustmentPattern(C-2,x-2,a)}}}}p.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),p.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),p.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),p.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),p.VERSION_INFO_POLY=7973,p.TYPE_INFO_POLY=1335,p.TYPE_INFO_MASK_PATTERN=21522;class N{constructor(r,a){this.dataBytes=r,this.errorCorrectionBytes=a}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class D{constructor(){}static calculateMaskPenalty(r){return Dt.applyMaskPenaltyRule1(r)+Dt.applyMaskPenaltyRule2(r)+Dt.applyMaskPenaltyRule3(r)+Dt.applyMaskPenaltyRule4(r)}static encode(r,a,l=null){let h=D.DEFAULT_BYTE_MODE_ENCODING;const f=l!==null&&l.get(Vn.CHARACTER_SET)!==void 0;f&&(h=l.get(Vn.CHARACTER_SET).toString());const m=this.chooseMode(r,h),x=new ae;if(m===Qe.BYTE&&(f||D.DEFAULT_BYTE_MODE_ENCODING!==h)){const Me=V.getCharacterSetECIByName(h);Me!==void 0&&this.appendECI(Me,x)}this.appendModeInfo(m,x);const w=new ae;this.appendBytes(r,m,w,h);let C;if(l!==null&&l.get(Vn.QR_VERSION)!==void 0){const Me=Number.parseInt(l.get(Vn.QR_VERSION).toString(),10);C=Ye.getVersionForNumber(Me);const Oe=this.calculateBitsNeeded(m,x,w,C);if(!this.willFit(Oe,C,a))throw new Lt("Data too big for requested version")}else C=this.recommendVersion(a,m,x,w);const R=new ae;R.appendBitArray(x);const P=m===Qe.BYTE?w.getSizeInBytes():r.length;this.appendLengthInfo(P,C,m,R),R.appendBitArray(w);const B=C.getECBlocksForLevel(a),q=C.getTotalCodewords()-B.getTotalECCodewords();this.terminateBits(q,R);const $=this.interleaveWithECBytes(R,C.getTotalCodewords(),q,B.getNumBlocks()),ne=new $r;ne.setECLevel(a),ne.setMode(m),ne.setVersion(C);const ue=C.getDimensionForVersion(),Ee=new ta(ue,ue),Pe=this.chooseMaskPattern($,a,C,Ee);return ne.setMaskPattern(Pe),p.buildMatrix($,a,C,Pe,Ee),ne.setMatrix(Ee),ne}static recommendVersion(r,a,l,h){const f=this.calculateBitsNeeded(a,l,h,Ye.getVersionForNumber(1)),m=this.chooseVersion(f,r),x=this.calculateBitsNeeded(a,l,h,m);return this.chooseVersion(x,r)}static calculateBitsNeeded(r,a,l,h){return a.getSize()+r.getCharacterCountBits(h)+l.getSize()}static getAlphanumericCode(r){return r<D.ALPHANUMERIC_TABLE.length?D.ALPHANUMERIC_TABLE[r]:-1}static chooseMode(r,a=null){if(V.SJIS.getName()===a&&this.isOnlyDoubleByteKanji(r))return Qe.KANJI;let l=!1,h=!1;for(let f=0,m=r.length;f<m;++f){const x=r.charAt(f);if(D.isDigit(x))l=!0;else if(this.getAlphanumericCode(x.charCodeAt(0))!==-1)h=!0;else return Qe.BYTE}return h?Qe.ALPHANUMERIC:l?Qe.NUMERIC:Qe.BYTE}static isOnlyDoubleByteKanji(r){let a;try{a=W.encode(r,V.SJIS)}catch{return!1}const l=a.length;if(l%2!==0)return!1;for(let h=0;h<l;h+=2){const f=a[h]&255;if((f<129||f>159)&&(f<224||f>235))return!1}return!0}static chooseMaskPattern(r,a,l,h){let f=Number.MAX_SAFE_INTEGER,m=-1;for(let x=0;x<$r.NUM_MASK_PATTERNS;x++){p.buildMatrix(r,a,l,x,h);let w=this.calculateMaskPenalty(h);w<f&&(f=w,m=x)}return m}static chooseVersion(r,a){for(let l=1;l<=40;l++){const h=Ye.getVersionForNumber(l);if(D.willFit(r,h,a))return h}throw new Lt("Data too big")}static willFit(r,a,l){const h=a.getTotalCodewords(),m=a.getECBlocksForLevel(l).getTotalECCodewords(),x=h-m,w=(r+7)/8;return x>=w}static terminateBits(r,a){const l=r*8;if(a.getSize()>l)throw new Lt("data bits cannot fit in the QR Code"+a.getSize()+" > "+l);for(let m=0;m<4&&a.getSize()<l;++m)a.appendBit(!1);const h=a.getSize()&7;if(h>0)for(let m=h;m<8;m++)a.appendBit(!1);const f=r-a.getSizeInBytes();for(let m=0;m<f;++m)a.appendBits((m&1)===0?236:17,8);if(a.getSize()!==l)throw new Lt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(r,a,l,h,f,m){if(h>=l)throw new Lt("Block ID too large");const x=r%l,w=l-x,C=Math.floor(r/l),R=C+1,P=Math.floor(a/l),B=P+1,q=C-P,$=R-B;if(q!==$)throw new Lt("EC bytes mismatch");if(l!==w+x)throw new Lt("RS blocks mismatch");if(r!==(P+q)*w+(B+$)*x)throw new Lt("Total bytes mismatch");h<w?(f[0]=P,m[0]=q):(f[0]=B,m[0]=$)}static interleaveWithECBytes(r,a,l,h){if(r.getSizeInBytes()!==l)throw new Lt("Number of bits and data bytes does not match");let f=0,m=0,x=0;const w=new Array;for(let R=0;R<h;++R){const P=new Int32Array(1),B=new Int32Array(1);D.getNumDataBytesAndNumECBytesForBlockID(a,l,h,R,P,B);const q=P[0],$=new Uint8Array(q);r.toBytes(8*f,$,0,q);const ne=D.generateECBytes($,B[0]);w.push(new N($,ne)),m=Math.max(m,q),x=Math.max(x,ne.length),f+=P[0]}if(l!==f)throw new Lt("Data bytes does not match offset");const C=new ae;for(let R=0;R<m;++R)for(const P of w){const B=P.getDataBytes();R<B.length&&C.appendBits(B[R],8)}for(let R=0;R<x;++R)for(const P of w){const B=P.getErrorCorrectionBytes();R<B.length&&C.appendBits(B[R],8)}if(a!==C.getSizeInBytes())throw new Lt("Interleaving error: "+a+" and "+C.getSizeInBytes()+" differ.");return C}static generateECBytes(r,a){const l=r.length,h=new Int32Array(l+a);for(let m=0;m<l;m++)h[m]=r[m]&255;new Jr(Et.QR_CODE_FIELD_256).encode(h,a);const f=new Uint8Array(a);for(let m=0;m<a;m++)f[m]=h[l+m];return f}static appendModeInfo(r,a){a.appendBits(r.getBits(),4)}static appendLengthInfo(r,a,l,h){const f=l.getCharacterCountBits(a);if(r>=1<<f)throw new Lt(r+" is bigger than "+((1<<f)-1));h.appendBits(r,f)}static appendBytes(r,a,l,h){switch(a){case Qe.NUMERIC:D.appendNumericBytes(r,l);break;case Qe.ALPHANUMERIC:D.appendAlphanumericBytes(r,l);break;case Qe.BYTE:D.append8BitBytes(r,l,h);break;case Qe.KANJI:D.appendKanjiBytes(r,l);break;default:throw new Lt("Invalid mode: "+a)}}static getDigit(r){return r.charCodeAt(0)-48}static isDigit(r){const a=D.getDigit(r);return a>=0&&a<=9}static appendNumericBytes(r,a){const l=r.length;let h=0;for(;h<l;){const f=D.getDigit(r.charAt(h));if(h+2<l){const m=D.getDigit(r.charAt(h+1)),x=D.getDigit(r.charAt(h+2));a.appendBits(f*100+m*10+x,10),h+=3}else if(h+1<l){const m=D.getDigit(r.charAt(h+1));a.appendBits(f*10+m,7),h+=2}else a.appendBits(f,4),h++}}static appendAlphanumericBytes(r,a){const l=r.length;let h=0;for(;h<l;){const f=D.getAlphanumericCode(r.charCodeAt(h));if(f===-1)throw new Lt;if(h+1<l){const m=D.getAlphanumericCode(r.charCodeAt(h+1));if(m===-1)throw new Lt;a.appendBits(f*45+m,11),h+=2}else a.appendBits(f,6),h++}}static append8BitBytes(r,a,l){let h;try{h=W.encode(r,l)}catch(f){throw new Lt(f)}for(let f=0,m=h.length;f!==m;f++){const x=h[f];a.appendBits(x,8)}}static appendKanjiBytes(r,a){let l;try{l=W.encode(r,V.SJIS)}catch(f){throw new Lt(f)}const h=l.length;for(let f=0;f<h;f+=2){const m=l[f]&255,x=l[f+1]&255,w=m<<8&4294967295|x;let C=-1;if(w>=33088&&w<=40956?C=w-33088:w>=57408&&w<=60351&&(C=w-49472),C===-1)throw new Lt("Invalid byte sequence");const R=(C>>8)*192+(C&255);a.appendBits(R,13)}}static appendECI(r,a){a.appendBits(Qe.ECI.getBits(),4),a.appendBits(r.getValue(),8)}}D.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),D.DEFAULT_BYTE_MODE_ENCODING=V.UTF8.getName();class F{write(r,a,l,h=null){if(r.length===0)throw new I("Found empty contents");if(a<0||l<0)throw new I("Requested dimensions are too small: "+a+"x"+l);let f=Tt.L,m=F.QUIET_ZONE_SIZE;h!==null&&(h.get(Vn.ERROR_CORRECTION)!==void 0&&(f=Tt.fromString(h.get(Vn.ERROR_CORRECTION).toString())),h.get(Vn.MARGIN)!==void 0&&(m=Number.parseInt(h.get(Vn.MARGIN).toString(),10)));const x=D.encode(r,f,h);return this.renderResult(x,a,l,m)}writeToDom(r,a,l,h,f=null){typeof r=="string"&&(r=document.querySelector(r));const m=this.write(a,l,h,f);r&&r.appendChild(m)}renderResult(r,a,l,h){const f=r.getMatrix();if(f===null)throw new di;const m=f.getWidth(),x=f.getHeight(),w=m+h*2,C=x+h*2,R=Math.max(a,w),P=Math.max(l,C),B=Math.min(Math.floor(R/w),Math.floor(P/C)),q=Math.floor((R-m*B)/2),$=Math.floor((P-x*B)/2),ne=this.createSVGElement(R,P);for(let ue=0,Ee=$;ue<x;ue++,Ee+=B)for(let Pe=0,Me=q;Pe<m;Pe++,Me+=B)if(f.get(Pe,ue)===1){const Oe=this.createSvgRectElement(Me,Ee,B,B);ne.appendChild(Oe)}return ne}createSVGElement(r,a){const l=document.createElementNS(F.SVG_NS,"svg");return l.setAttributeNS(null,"height",r.toString()),l.setAttributeNS(null,"width",a.toString()),l}createSvgRectElement(r,a,l,h){const f=document.createElementNS(F.SVG_NS,"rect");return f.setAttributeNS(null,"x",r.toString()),f.setAttributeNS(null,"y",a.toString()),f.setAttributeNS(null,"height",l.toString()),f.setAttributeNS(null,"width",h.toString()),f.setAttributeNS(null,"fill","#000000"),f}}F.QUIET_ZONE_SIZE=4,F.SVG_NS="http://www.w3.org/2000/svg";class ce{encode(r,a,l,h,f){if(r.length===0)throw new I("Found empty contents");if(a!==Le.QR_CODE)throw new I("Can only encode QR_CODE, but got "+a);if(l<0||h<0)throw new I(`Requested dimensions are too small: ${l}x${h}`);let m=Tt.L,x=ce.QUIET_ZONE_SIZE;f!==null&&(f.get(Vn.ERROR_CORRECTION)!==void 0&&(m=Tt.fromString(f.get(Vn.ERROR_CORRECTION).toString())),f.get(Vn.MARGIN)!==void 0&&(x=Number.parseInt(f.get(Vn.MARGIN).toString(),10)));const w=D.encode(r,m,f);return ce.renderResult(w,l,h,x)}static renderResult(r,a,l,h){const f=r.getMatrix();if(f===null)throw new di;const m=f.getWidth(),x=f.getHeight(),w=m+h*2,C=x+h*2,R=Math.max(a,w),P=Math.max(l,C),B=Math.min(Math.floor(R/w),Math.floor(P/C)),q=Math.floor((R-m*B)/2),$=Math.floor((P-x*B)/2),ne=new et(R,P);for(let ue=0,Ee=$;ue<x;ue++,Ee+=B)for(let Pe=0,Me=q;Pe<m;Pe++,Me+=B)f.get(Pe,ue)===1&&ne.setRegion(Me,Ee,B,B);return ne}}ce.QUIET_ZONE_SIZE=4;class _e{encode(r,a,l,h,f){let m;switch(a){case Le.QR_CODE:m=new ce;break;default:throw new I("No encoder available for format "+a)}return m.encode(r,a,l,h,f)}}class Be extends qe{constructor(r,a,l,h,f,m,x,w){if(super(m,x),this.yuvData=r,this.dataWidth=a,this.dataHeight=l,this.left=h,this.top=f,h+m>a||f+x>l)throw new I("Crop rectangle does not fit within image data.");w&&this.reverseHorizontal(m,x)}getRow(r,a){if(r<0||r>=this.getHeight())throw new I("Requested row is outside the image: "+r);const l=this.getWidth();(a==null||a.length<l)&&(a=new Uint8ClampedArray(l));const h=(r+this.top)*this.dataWidth+this.left;return K.arraycopy(this.yuvData,h,a,0,l),a}getMatrix(){const r=this.getWidth(),a=this.getHeight();if(r===this.dataWidth&&a===this.dataHeight)return this.yuvData;const l=r*a,h=new Uint8ClampedArray(l);let f=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return K.arraycopy(this.yuvData,f,h,0,l),h;for(let m=0;m<a;m++){const x=m*r;K.arraycopy(this.yuvData,f,h,x,r),f+=this.dataWidth}return h}isCropSupported(){return!0}crop(r,a,l,h){return new Be(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+a,l,h,!1)}renderThumbnail(){const r=this.getWidth()/Be.THUMBNAIL_SCALE_FACTOR,a=this.getHeight()/Be.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(r*a),h=this.yuvData;let f=this.top*this.dataWidth+this.left;for(let m=0;m<a;m++){const x=m*r;for(let w=0;w<r;w++){const C=h[f+w*Be.THUMBNAIL_SCALE_FACTOR]&255;l[x+w]=4278190080|C*65793}f+=this.dataWidth*Be.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/Be.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Be.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(r,a){const l=this.yuvData;for(let h=0,f=this.top*this.dataWidth+this.left;h<a;h++,f+=this.dataWidth){const m=f+r/2;for(let x=f,w=f+r-1;x<m;x++,w--){const C=l[x];l[x]=l[w],l[w]=C}}}invert(){return new ot(this)}}Be.THUMBNAIL_SCALE_FACTOR=2;class ut extends qe{constructor(r,a,l,h,f,m,x){if(super(a,l),this.dataWidth=h,this.dataHeight=f,this.left=m,this.top=x,r.BYTES_PER_ELEMENT===4){const w=a*l,C=new Uint8ClampedArray(w);for(let R=0;R<w;R++){const P=r[R],B=P>>16&255,q=P>>7&510,$=P&255;C[R]=(B+q+$)/4&255}this.luminances=C}else this.luminances=r;if(h===void 0&&(this.dataWidth=a),f===void 0&&(this.dataHeight=l),m===void 0&&(this.left=0),x===void 0&&(this.top=0),this.left+a>this.dataWidth||this.top+l>this.dataHeight)throw new I("Crop rectangle does not fit within image data.")}getRow(r,a){if(r<0||r>=this.getHeight())throw new I("Requested row is outside the image: "+r);const l=this.getWidth();(a==null||a.length<l)&&(a=new Uint8ClampedArray(l));const h=(r+this.top)*this.dataWidth+this.left;return K.arraycopy(this.luminances,h,a,0,l),a}getMatrix(){const r=this.getWidth(),a=this.getHeight();if(r===this.dataWidth&&a===this.dataHeight)return this.luminances;const l=r*a,h=new Uint8ClampedArray(l);let f=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return K.arraycopy(this.luminances,f,h,0,l),h;for(let m=0;m<a;m++){const x=m*r;K.arraycopy(this.luminances,f,h,x,r),f+=this.dataWidth}return h}isCropSupported(){return!0}crop(r,a,l,h){return new ut(this.luminances,l,h,this.dataWidth,this.dataHeight,this.left+r,this.top+a)}invert(){return new ot(this)}}class jn extends V{static forName(r){return this.getCharacterSetECIByName(r)}}class Kt{}Kt.ISO_8859_1=V.ISO8859_1;class An{isCompact(){return this.compact}setCompact(r){this.compact=r}getSize(){return this.size}setSize(r){this.size=r}getLayers(){return this.layers}setLayers(r){this.layers=r}getCodeWords(){return this.codeWords}setCodeWords(r){this.codeWords=r}getMatrix(){return this.matrix}setMatrix(r){this.matrix=r}}class hr{static singletonList(r){return[r]}static min(r,a){return r.sort(a)[0]}}class es{constructor(r){this.previous=r}getPrevious(){return this.previous}}class Oi extends es{constructor(r,a,l){super(r),this.value=a,this.bitCount=l}appendTo(r,a){r.appendBits(this.value,this.bitCount)}add(r,a){return new Oi(this,r,a)}addBinaryShift(r,a){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Oi(this,r,a)}toString(){let r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+ee.toBinaryString(r|1<<this.bitCount).substring(1)+">"}}class fr extends Oi{constructor(r,a,l){super(r,0,0),this.binaryShiftStart=a,this.binaryShiftByteCount=l}appendTo(r,a){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):l===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(a[this.binaryShiftStart+l],8)}addBinaryShift(r,a){return new fr(this,r,a)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function na(L,r,a){return new fr(L,r,a)}function ts(L,r,a){return new Oi(L,r,a)}const Ba=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Bs=0,ll=1,Ar=2,oc=3,kr=4,No=new Oi(null,0,0),ia=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function td(L){for(let r of L)he.fill(r,-1);return L[Bs][kr]=0,L[ll][kr]=0,L[ll][Bs]=28,L[oc][kr]=0,L[Ar][kr]=0,L[Ar][Bs]=15,L}const Ro=td(he.createInt32Array(6,6));class Ur{constructor(r,a,l,h){this.token=r,this.mode=a,this.binaryShiftByteCount=l,this.bitCount=h}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(r,a){let l=this.bitCount,h=this.token;if(r!==this.mode){let m=ia[this.mode][r];h=ts(h,m&65535,m>>16),l+=m>>16}let f=r===Ar?4:5;return h=ts(h,a,f),new Ur(h,r,0,l+f)}shiftAndAppend(r,a){let l=this.token,h=this.mode===Ar?4:5;return l=ts(l,Ro[this.mode][r],h),l=ts(l,a,5),new Ur(l,this.mode,0,this.bitCount+h+5)}addBinaryShiftChar(r){let a=this.token,l=this.mode,h=this.bitCount;if(this.mode===kr||this.mode===Ar){let x=ia[l][Bs];a=ts(a,x&65535,x>>16),h+=x>>16,l=Bs}let f=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,m=new Ur(a,l,this.binaryShiftByteCount+1,h+f);return m.binaryShiftByteCount===2078&&(m=m.endBinaryShift(r+1)),m}endBinaryShift(r){if(this.binaryShiftByteCount===0)return this;let a=this.token;return a=na(a,r-this.binaryShiftByteCount,this.binaryShiftByteCount),new Ur(a,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(r){let a=this.bitCount+(ia[this.mode][r.mode]>>16);return this.binaryShiftByteCount<r.binaryShiftByteCount?a+=Ur.calculateBinaryShiftCost(r)-Ur.calculateBinaryShiftCost(this):this.binaryShiftByteCount>r.binaryShiftByteCount&&r.binaryShiftByteCount>0&&(a+=10),a<=r.bitCount}toBitArray(r){let a=[];for(let h=this.endBinaryShift(r.length).token;h!==null;h=h.getPrevious())a.unshift(h);let l=new ae;for(const h of a)h.appendTo(l,r);return l}toString(){return J.format("%s bits=%d bytes=%d",Ba[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(r){return r.binaryShiftByteCount>62?21:r.binaryShiftByteCount>31?20:r.binaryShiftByteCount>0?10:0}}Ur.INITIAL_STATE=new Ur(No,Bs,0,0);function Iu(L){const r=J.getCharCode(" "),a=J.getCharCode("."),l=J.getCharCode(",");L[Bs][r]=1;const h=J.getCharCode("Z"),f=J.getCharCode("A");for(let B=f;B<=h;B++)L[Bs][B]=B-f+2;L[ll][r]=1;const m=J.getCharCode("z"),x=J.getCharCode("a");for(let B=x;B<=m;B++)L[ll][B]=B-x+2;L[Ar][r]=1;const w=J.getCharCode("9"),C=J.getCharCode("0");for(let B=C;B<=w;B++)L[Ar][B]=B-C+2;L[Ar][l]=12,L[Ar][a]=13;const R=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let B=0;B<R.length;B++)L[oc][J.getCharCode(R[B])]=B;const P=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let B=0;B<P.length;B++)J.getCharCode(P[B])>0&&(L[kr][J.getCharCode(P[B])]=B);return L}const Oo=Iu(he.createInt32Array(5,256));class ra{constructor(r){this.text=r}encode(){const r=J.getCharCode(" "),a=J.getCharCode(`
`);let l=hr.singletonList(Ur.INITIAL_STATE);for(let f=0;f<this.text.length;f++){let m,x=f+1<this.text.length?this.text[f+1]:0;switch(this.text[f]){case J.getCharCode("\r"):m=x===a?2:0;break;case J.getCharCode("."):m=x===r?3:0;break;case J.getCharCode(","):m=x===r?4:0;break;case J.getCharCode(":"):m=x===r?5:0;break;default:m=0}m>0?(l=ra.updateStateListForPair(l,f,m),f++):l=this.updateStateListForChar(l,f)}return hr.min(l,(f,m)=>f.getBitCount()-m.getBitCount()).toBitArray(this.text)}updateStateListForChar(r,a){const l=[];for(let h of r)this.updateStateForChar(h,a,l);return ra.simplifyStates(l)}updateStateForChar(r,a,l){let h=this.text[a]&255,f=Oo[r.getMode()][h]>0,m=null;for(let x=0;x<=kr;x++){let w=Oo[x][h];if(w>0){if(m==null&&(m=r.endBinaryShift(a)),!f||x===r.getMode()||x===Ar){const C=m.latchAndAppend(x,w);l.push(C)}if(!f&&Ro[r.getMode()][x]>=0){const C=m.shiftAndAppend(x,w);l.push(C)}}}if(r.getBinaryShiftByteCount()>0||Oo[r.getMode()][h]===0){let x=r.addBinaryShiftChar(a);l.push(x)}}static updateStateListForPair(r,a,l){const h=[];for(let f of r)this.updateStateForPair(f,a,l,h);return this.simplifyStates(h)}static updateStateForPair(r,a,l,h){let f=r.endBinaryShift(a);if(h.push(f.latchAndAppend(kr,l)),r.getMode()!==kr&&h.push(f.shiftAndAppend(kr,l)),l===3||l===4){let m=f.latchAndAppend(Ar,16-l).latchAndAppend(Ar,1);h.push(m)}if(r.getBinaryShiftByteCount()>0){let m=r.addBinaryShiftChar(a).addBinaryShiftChar(a+1);h.push(m)}}static simplifyStates(r){let a=[];for(const l of r){let h=!0;for(const f of a){if(f.isBetterThanOrEqualTo(l)){h=!1;break}l.isBetterThanOrEqualTo(f)&&(a=a.filter(m=>m!==f))}h&&a.push(l)}return a}}class Ft{constructor(){}static encodeBytes(r){return Ft.encode(r,Ft.DEFAULT_EC_PERCENT,Ft.DEFAULT_AZTEC_LAYERS)}static encode(r,a,l){let h=new ra(r).encode(),f=ee.truncDivision(h.getSize()*a,100)+11,m=h.getSize()+f,x,w,C,R,P;if(l!==Ft.DEFAULT_AZTEC_LAYERS){if(x=l<0,w=Math.abs(l),w>(x?Ft.MAX_NB_BITS_COMPACT:Ft.MAX_NB_BITS))throw new I(J.format("Illegal value %s for layers",l));C=Ft.totalBitsInLayer(w,x),R=Ft.WORD_SIZE[w];let Oe=C-C%R;if(P=Ft.stuffBits(h,R),P.getSize()+f>Oe)throw new I("Data to large for user specified layer");if(x&&P.getSize()>R*64)throw new I("Data to large for user specified layer")}else{R=0,P=null;for(let Oe=0;;Oe++){if(Oe>Ft.MAX_NB_BITS)throw new I("Data too large for an Aztec code");if(x=Oe<=3,w=x?Oe+1:Oe,C=Ft.totalBitsInLayer(w,x),m>C)continue;(P==null||R!==Ft.WORD_SIZE[w])&&(R=Ft.WORD_SIZE[w],P=Ft.stuffBits(h,R));let St=C-C%R;if(!(x&&P.getSize()>R*64)&&P.getSize()+f<=St)break}}let B=Ft.generateCheckWords(P,C,R),q=P.getSize()/R,$=Ft.generateModeMessage(x,w,q),ne=(x?11:14)+w*4,ue=new Int32Array(ne),Ee;if(x){Ee=ne;for(let Oe=0;Oe<ue.length;Oe++)ue[Oe]=Oe}else{Ee=ne+1+2*ee.truncDivision(ee.truncDivision(ne,2)-1,15);let Oe=ee.truncDivision(ne,2),St=ee.truncDivision(Ee,2);for(let ht=0;ht<Oe;ht++){let $n=ht+ee.truncDivision(ht,15);ue[Oe-ht-1]=St-$n-1,ue[Oe+ht]=St+$n+1}}let Pe=new et(Ee);for(let Oe=0,St=0;Oe<w;Oe++){let ht=(w-Oe)*4+(x?9:12);for(let $n=0;$n<ht;$n++){let br=$n*2;for(let Ui=0;Ui<2;Ui++)B.get(St+br+Ui)&&Pe.set(ue[Oe*2+Ui],ue[Oe*2+$n]),B.get(St+ht*2+br+Ui)&&Pe.set(ue[Oe*2+$n],ue[ne-1-Oe*2-Ui]),B.get(St+ht*4+br+Ui)&&Pe.set(ue[ne-1-Oe*2-Ui],ue[ne-1-Oe*2-$n]),B.get(St+ht*6+br+Ui)&&Pe.set(ue[ne-1-Oe*2-$n],ue[Oe*2+Ui])}St+=ht*8}if(Ft.drawModeMessage(Pe,x,Ee,$),x)Ft.drawBullsEye(Pe,ee.truncDivision(Ee,2),5);else{Ft.drawBullsEye(Pe,ee.truncDivision(Ee,2),7);for(let Oe=0,St=0;Oe<ee.truncDivision(ne,2)-1;Oe+=15,St+=16)for(let ht=ee.truncDivision(Ee,2)&1;ht<Ee;ht+=2)Pe.set(ee.truncDivision(Ee,2)-St,ht),Pe.set(ee.truncDivision(Ee,2)+St,ht),Pe.set(ht,ee.truncDivision(Ee,2)-St),Pe.set(ht,ee.truncDivision(Ee,2)+St)}let Me=new An;return Me.setCompact(x),Me.setSize(Ee),Me.setLayers(w),Me.setCodeWords(q),Me.setMatrix(Pe),Me}static drawBullsEye(r,a,l){for(let h=0;h<l;h+=2)for(let f=a-h;f<=a+h;f++)r.set(f,a-h),r.set(f,a+h),r.set(a-h,f),r.set(a+h,f);r.set(a-l,a-l),r.set(a-l+1,a-l),r.set(a-l,a-l+1),r.set(a+l,a-l),r.set(a+l,a-l+1),r.set(a+l,a+l-1)}static generateModeMessage(r,a,l){let h=new ae;return r?(h.appendBits(a-1,2),h.appendBits(l-1,6),h=Ft.generateCheckWords(h,28,4)):(h.appendBits(a-1,5),h.appendBits(l-1,11),h=Ft.generateCheckWords(h,40,4)),h}static drawModeMessage(r,a,l,h){let f=ee.truncDivision(l,2);if(a)for(let m=0;m<7;m++){let x=f-3+m;h.get(m)&&r.set(x,f-5),h.get(m+7)&&r.set(f+5,x),h.get(20-m)&&r.set(x,f+5),h.get(27-m)&&r.set(f-5,x)}else for(let m=0;m<10;m++){let x=f-5+m+ee.truncDivision(m,5);h.get(m)&&r.set(x,f-7),h.get(m+10)&&r.set(f+7,x),h.get(29-m)&&r.set(x,f+7),h.get(39-m)&&r.set(f-7,x)}}static generateCheckWords(r,a,l){let h=r.getSize()/l,f=new Jr(Ft.getGF(l)),m=ee.truncDivision(a,l),x=Ft.bitsToWords(r,l,m);f.encode(x,m-h);let w=a%l,C=new ae;C.appendBits(0,w);for(const R of Array.from(x))C.appendBits(R,l);return C}static bitsToWords(r,a,l){let h=new Int32Array(l),f,m;for(f=0,m=r.getSize()/a;f<m;f++){let x=0;for(let w=0;w<a;w++)x|=r.get(f*a+w)?1<<a-w-1:0;h[f]=x}return h}static getGF(r){switch(r){case 4:return Et.AZTEC_PARAM;case 6:return Et.AZTEC_DATA_6;case 8:return Et.AZTEC_DATA_8;case 10:return Et.AZTEC_DATA_10;case 12:return Et.AZTEC_DATA_12;default:throw new I("Unsupported word size "+r)}}static stuffBits(r,a){let l=new ae,h=r.getSize(),f=(1<<a)-2;for(let m=0;m<h;m+=a){let x=0;for(let w=0;w<a;w++)(m+w>=h||r.get(m+w))&&(x|=1<<a-1-w);(x&f)===f?(l.appendBits(x&f,a),m--):(x&f)===0?(l.appendBits(x|1,a),m--):l.appendBits(x,a)}return l}static totalBitsInLayer(r,a){return((a?88:112)+16*r)*r}}Ft.DEFAULT_EC_PERCENT=33,Ft.DEFAULT_AZTEC_LAYERS=0,Ft.MAX_NB_BITS=32,Ft.MAX_NB_BITS_COMPACT=4,Ft.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Do{encode(r,a,l,h){return this.encodeWithHints(r,a,l,h,null)}encodeWithHints(r,a,l,h,f){let m=Kt.ISO_8859_1,x=Ft.DEFAULT_EC_PERCENT,w=Ft.DEFAULT_AZTEC_LAYERS;return f!=null&&(f.has(Vn.CHARACTER_SET)&&(m=jn.forName(f.get(Vn.CHARACTER_SET).toString())),f.has(Vn.ERROR_CORRECTION)&&(x=ee.parseInt(f.get(Vn.ERROR_CORRECTION).toString())),f.has(Vn.AZTEC_LAYERS)&&(w=ee.parseInt(f.get(Vn.AZTEC_LAYERS).toString()))),Do.encodeLayers(r,a,l,h,m,x,w)}static encodeLayers(r,a,l,h,f,m,x){if(a!==Le.AZTEC)throw new I("Can only encode AZTEC, but got "+a);let w=Ft.encode(J.getBytes(r,f),m,x);return Do.renderResult(w,l,h)}static renderResult(r,a,l){let h=r.getMatrix();if(h==null)throw new di;let f=h.getWidth(),m=h.getHeight(),x=Math.max(a,f),w=Math.max(l,m),C=Math.min(x/f,w/m),R=(x-f*C)/2,P=(w-m*C)/2,B=new et(x,w);for(let q=0,$=P;q<m;q++,$+=C)for(let ne=0,ue=R;ne<f;ne++,ue+=C)h.get(ne,q)&&B.setRegion(ue,$,C,C);return B}}n.AbstractExpandedDecoder=vn,n.ArgumentException=S,n.ArithmeticException=xr,n.AztecCode=An,n.AztecCodeReader=Kr,n.AztecCodeWriter=Do,n.AztecDecoder=Yt,n.AztecDetector=Ns,n.AztecDetectorResult=xs,n.AztecEncoder=Ft,n.AztecHighLevelEncoder=ra,n.AztecPoint=Wn,n.BarcodeFormat=Le,n.Binarizer=X,n.BinaryBitmap=M,n.BitArray=ae,n.BitMatrix=et,n.BitSource=kn,n.BrowserAztecCodeReader=Rs,n.BrowserBarcodeReader=vo,n.BrowserCodeReader=ke,n.BrowserDatamatrixCodeReader=Wr,n.BrowserMultiFormatReader=Zr,n.BrowserPDF417Reader=al,n.BrowserQRCodeReader=ol,n.BrowserQRCodeSvgWriter=F,n.CharacterSetECI=V,n.ChecksumException=U,n.Code128Reader=De,n.Code39Reader=Xt,n.DataMatrixDecodedBitStreamParser=ki,n.DataMatrixReader=Qi,n.DecodeHintType=Ne,n.DecoderResult=Nt,n.DefaultGridSampler=ys,n.DetectorResult=ps,n.EAN13Reader=on,n.EncodeHintType=Vn,n.Exception=_,n.FormatException=j,n.GenericGF=Et,n.GenericGFPoly=Sn,n.GlobalHistogramBinarizer=pe,n.GridSampler=bi,n.GridSamplerInstance=gi,n.HTMLCanvasElementLuminanceSource=dt,n.HybridBinarizer=be,n.ITFReader=nt,n.IllegalArgumentException=I,n.IllegalStateException=di,n.InvertedLuminanceSource=ot,n.LuminanceSource=qe,n.MathUtils=We,n.MultiFormatOneDReader=Pi,n.MultiFormatReader=Io,n.MultiFormatWriter=_e,n.NotFoundException=me,n.OneDReader=Ut,n.PDF417DecodedBitStreamParser=ye,n.PDF417DecoderErrorCorrection=Mr,n.PDF417Reader=Un,n.PDF417ResultMetadata=bs,n.PerspectiveTransform=ai,n.PlanarYUVLuminanceSource=Be,n.QRCodeByteMatrix=ta,n.QRCodeDataMask=li,n.QRCodeDecodedBitStreamParser=ln,n.QRCodeDecoderErrorCorrectionLevel=Tt,n.QRCodeDecoderFormatInformation=Hn,n.QRCodeEncoder=D,n.QRCodeEncoderQRCode=$r,n.QRCodeMaskUtil=Dt,n.QRCodeMatrixUtil=p,n.QRCodeMode=Qe,n.QRCodeReader=er,n.QRCodeVersion=Ye,n.QRCodeWriter=ce,n.RGBLuminanceSource=ut,n.RSS14Reader=en,n.RSSExpandedReader=Ie,n.ReaderException=ea,n.ReedSolomonDecoder=Xi,n.ReedSolomonEncoder=Jr,n.ReedSolomonException=fi,n.Result=Ue,n.ResultMetadataType=_t,n.ResultPoint=Fe,n.StringUtils=J,n.UnsupportedOperationException=te,n.VideoInputDevice=ie,n.WhiteRectangleDetector=mn,n.WriterException=Lt,n.ZXingArrays=he,n.ZXingCharset=jn,n.ZXingInteger=ee,n.ZXingStandardCharsets=Kt,n.ZXingStringBuilder=Y,n.ZXingStringEncoding=W,n.ZXingSystem=K,n.createAbstractExpandedDecoder=Bn,Object.defineProperty(n,"__esModule",{value:!0})}))})(Qc,Qc.exports)),Qc.exports}var Dn=iR();const rR=q1(Dn),sR=E3({__proto__:null,default:rR},[Dn]);var jE=(function(){function i(e,n,o){if(this.formatMap=new Map([[Ge.QR_CODE,Dn.BarcodeFormat.QR_CODE],[Ge.AZTEC,Dn.BarcodeFormat.AZTEC],[Ge.CODABAR,Dn.BarcodeFormat.CODABAR],[Ge.CODE_39,Dn.BarcodeFormat.CODE_39],[Ge.CODE_93,Dn.BarcodeFormat.CODE_93],[Ge.CODE_128,Dn.BarcodeFormat.CODE_128],[Ge.DATA_MATRIX,Dn.BarcodeFormat.DATA_MATRIX],[Ge.MAXICODE,Dn.BarcodeFormat.MAXICODE],[Ge.ITF,Dn.BarcodeFormat.ITF],[Ge.EAN_13,Dn.BarcodeFormat.EAN_13],[Ge.EAN_8,Dn.BarcodeFormat.EAN_8],[Ge.PDF_417,Dn.BarcodeFormat.PDF_417],[Ge.RSS_14,Dn.BarcodeFormat.RSS_14],[Ge.RSS_EXPANDED,Dn.BarcodeFormat.RSS_EXPANDED],[Ge.UPC_A,Dn.BarcodeFormat.UPC_A],[Ge.UPC_E,Dn.BarcodeFormat.UPC_E],[Ge.UPC_EAN_EXTENSION,Dn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!sR)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=o;var u=this.createZXingFormats(e),d=new Map;d.set(Dn.DecodeHintType.POSSIBLE_FORMATS,u),d.set(Dn.DecodeHintType.TRY_HARDER,!1),this.hints=d}return i.prototype.decodeAsync=function(e){var n=this;return new Promise(function(o,u){try{o(n.decode(e))}catch(d){u(d)}})},i.prototype.decode=function(e){var n=new Dn.MultiFormatReader(this.verbose,this.hints),o=new Dn.HTMLCanvasElementLuminanceSource(e),u=new Dn.BinaryBitmap(new Dn.HybridBinarizer(o)),d=n.decode(u);return{text:d.text,format:JA.create(this.toHtml5QrcodeSupportedFormats(d.format)),debugData:this.createDebugData()}},i.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,o,u){e.set(n,o)}),e},i.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},i.prototype.createZXingFormats=function(e){for(var n=[],o=0,u=e;o<u.length;o++){var d=u[o];this.formatMap.has(d)?n.push(this.formatMap.get(d)):this.logger.logError("".concat(d," is not supported by")+"ZXingHtml5QrcodeShim")}return n},i.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},i})(),aR=function(i,e,n,o){function u(d){return d instanceof n?d:new n(function(y){y(d)})}return new(n||(n=Promise))(function(d,y){function v(S){try{_(o.next(S))}catch(I){y(I)}}function b(S){try{_(o.throw(S))}catch(I){y(I)}}function _(S){S.done?d(S.value):u(S.value).then(v,b)}_((o=o.apply(i,e||[])).next())})},oR=function(i,e){var n={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,u,d,y;return y={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function v(_){return function(S){return b([_,S])}}function b(_){if(o)throw new TypeError("Generator is already executing.");for(;y&&(y=0,_[0]&&(n=0)),n;)try{if(o=1,u&&(d=_[0]&2?u.return:_[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,_[1])).done)return d;switch(u=0,d&&(_=[_[0]&2,d.value]),_[0]){case 0:case 1:d=_;break;case 4:return n.label++,{value:_[1],done:!1};case 5:n.label++,u=_[1],_=[0];continue;case 7:_=n.ops.pop(),n.trys.pop();continue;default:if(d=n.trys,!(d=d.length>0&&d[d.length-1])&&(_[0]===6||_[0]===2)){n=0;continue}if(_[0]===3&&(!d||_[1]>d[0]&&_[1]<d[3])){n.label=_[1];break}if(_[0]===6&&n.label<d[1]){n.label=d[1],d=_;break}if(d&&n.label<d[2]){n.label=d[2],n.ops.push(_);break}d[2]&&n.ops.pop(),n.trys.pop();continue}_=e.call(i,n)}catch(S){_=[6,S],u=0}finally{o=d=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},FE=(function(){function i(e,n,o){if(this.formatMap=new Map([[Ge.QR_CODE,"qr_code"],[Ge.AZTEC,"aztec"],[Ge.CODABAR,"codabar"],[Ge.CODE_39,"code_39"],[Ge.CODE_93,"code_93"],[Ge.CODE_128,"code_128"],[Ge.DATA_MATRIX,"data_matrix"],[Ge.ITF,"itf"],[Ge.EAN_13,"ean_13"],[Ge.EAN_8,"ean_8"],[Ge.PDF_417,"pdf417"],[Ge.UPC_A,"upc_a"],[Ge.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!i.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=o;var u=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(u),!this.detector)throw"BarcodeDetector detector not supported"}return i.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},i.prototype.decodeAsync=function(e){return aR(this,void 0,void 0,function(){var n,o;return oR(this,function(u){switch(u.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=u.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return o=this.selectLargestBarcode(n),[2,{text:o.rawValue,format:JA.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}]}})})},i.prototype.selectLargestBarcode=function(e){for(var n=null,o=0,u=0,d=e;u<d.length;u++){var y=d[u],v=y.boundingBox.width*y.boundingBox.height;v>o&&(o=v,n=y)}if(!n)throw"No largest barcode found";return n},i.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],o=0,u=e;o<u.length;o++){var d=u[o];this.formatMap.has(d)?n.push(this.formatMap.get(d)):this.logger.warn("".concat(d," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},i.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},i.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,o,u){e.set(n,o)}),e},i.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},i})(),zE=function(i,e,n,o){function u(d){return d instanceof n?d:new n(function(y){y(d)})}return new(n||(n=Promise))(function(d,y){function v(S){try{_(o.next(S))}catch(I){y(I)}}function b(S){try{_(o.throw(S))}catch(I){y(I)}}function _(S){S.done?d(S.value):u(S.value).then(v,b)}_((o=o.apply(i,e||[])).next())})},HE=function(i,e){var n={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,u,d,y;return y={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function v(_){return function(S){return b([_,S])}}function b(_){if(o)throw new TypeError("Generator is already executing.");for(;y&&(y=0,_[0]&&(n=0)),n;)try{if(o=1,u&&(d=_[0]&2?u.return:_[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,_[1])).done)return d;switch(u=0,d&&(_=[_[0]&2,d.value]),_[0]){case 0:case 1:d=_;break;case 4:return n.label++,{value:_[1],done:!1};case 5:n.label++,u=_[1],_=[0];continue;case 7:_=n.ops.pop(),n.trys.pop();continue;default:if(d=n.trys,!(d=d.length>0&&d[d.length-1])&&(_[0]===6||_[0]===2)){n=0;continue}if(_[0]===3&&(!d||_[1]>d[0]&&_[1]<d[3])){n.label=_[1];break}if(_[0]===6&&n.label<d[1]){n.label=d[1],d=_;break}if(d&&n.label<d[2]){n.label=d[2],n.ops.push(_);break}d[2]&&n.ops.pop(),n.trys.pop();continue}_=e.call(i,n)}catch(S){_=[6,S],u=0}finally{o=d=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},lR=(function(){function i(e,n,o,u){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=o,n&&FE.isSupported()?(this.primaryDecoder=new FE(e,o,u),this.secondaryDecoder=new jE(e,o,u)):this.primaryDecoder=new jE(e,o,u)}return i.prototype.decodeAsync=function(e){return zE(this,void 0,void 0,function(){var n;return HE(this,function(o){switch(o.label){case 0:n=performance.now(),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,o.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},i.prototype.decodeRobustlyAsync=function(e){return zE(this,void 0,void 0,function(){var n,o;return HE(this,function(u){switch(u.label){case 0:n=performance.now(),u.label=1;case 1:return u.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,u.sent()];case 3:if(o=u.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw o;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},i.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},i.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},i.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,o=this.executionResults;n<o.length;n++){var u=o[n];e+=u}var d=e/this.executionResults.length;console.log("".concat(d," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},i})(),Fg=(function(){var i=function(e,n){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,u){o.__proto__=u}||function(o,u){for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(o[d]=u[d])},i(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");i(e,n);function o(){this.constructor=e}e.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),If=function(i,e,n,o){function u(d){return d instanceof n?d:new n(function(y){y(d)})}return new(n||(n=Promise))(function(d,y){function v(S){try{_(o.next(S))}catch(I){y(I)}}function b(S){try{_(o.throw(S))}catch(I){y(I)}}function _(S){S.done?d(S.value):u(S.value).then(v,b)}_((o=o.apply(i,e||[])).next())})},Nf=function(i,e){var n={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,u,d,y;return y={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function v(_){return function(S){return b([_,S])}}function b(_){if(o)throw new TypeError("Generator is already executing.");for(;y&&(y=0,_[0]&&(n=0)),n;)try{if(o=1,u&&(d=_[0]&2?u.return:_[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,_[1])).done)return d;switch(u=0,d&&(_=[_[0]&2,d.value]),_[0]){case 0:case 1:d=_;break;case 4:return n.label++,{value:_[1],done:!1};case 5:n.label++,u=_[1],_=[0];continue;case 7:_=n.ops.pop(),n.trys.pop();continue;default:if(d=n.trys,!(d=d.length>0&&d[d.length-1])&&(_[0]===6||_[0]===2)){n=0;continue}if(_[0]===3&&(!d||_[1]>d[0]&&_[1]<d[3])){n.label=_[1];break}if(_[0]===6&&n.label<d[1]){n.label=d[1],d=_;break}if(d&&n.label<d[2]){n.label=d[2],n.ops.push(_);break}d[2]&&n.ops.pop(),n.trys.pop();continue}_=e.call(i,n)}catch(S){_=[6,S],u=0}finally{o=d=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},eb=(function(){function i(e,n){this.name=e,this.track=n}return i.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},i.prototype.apply=function(e){var n={};n[this.name]=e;var o={advanced:[n]};return this.track.applyConstraints(o)},i.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},i})(),cR=(function(i){Fg(e,i);function e(n,o){return i.call(this,n,o)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var o={};o[this.name]=n;var u={advanced:[o]};return this.track.applyConstraints(u)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),o=n[this.name];return{min:o.min,max:o.max,step:o.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e})(eb),uR=(function(i){Fg(e,i);function e(n){return i.call(this,"zoom",n)||this}return e})(cR),hR=(function(i){Fg(e,i);function e(n){return i.call(this,"torch",n)||this}return e})(eb),fR=(function(){function i(e){this.track=e}return i.prototype.zoomFeature=function(){return new uR(this.track)},i.prototype.torchFeature=function(){return new hR(this.track)},i})(),dR=(function(){function i(e,n,o){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=o,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return i.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},i.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var o=e.surface.clientWidth,u=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(o,u),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},i.create=function(e,n,o,u){return If(this,void 0,void 0,function(){var d,y;return Nf(this,function(v){switch(v.label){case 0:return d=new i(e,n,u),o.aspectRatio?(y={aspectRatio:o.aspectRatio},[4,d.getFirstTrackOrFail().applyConstraints(y)]):[3,2];case 1:v.sent(),v.label=2;case 2:return d.setupSurface(),[2,d]}})})},i.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},i.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},i.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},i.prototype.resume=function(e){this.failIfClosed();var n=this,o=function(){setTimeout(e,200),n.surface.removeEventListener("playing",o)};this.surface.addEventListener("playing",o),this.surface.play()},i.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},i.prototype.getSurface=function(){return this.failIfClosed(),this.surface},i.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},i.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},i.prototype.applyVideoConstraints=function(e){return If(this,void 0,void 0,function(){return Nf(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},i.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,o){var u=e.mediaStream.getVideoTracks(),d=u.length,y=0;e.mediaStream.getVideoTracks().forEach(function(v){e.mediaStream.removeTrack(v),v.stop(),++y,y>=d&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},i.prototype.getCapabilities=function(){return new fR(this.getFirstTrackOrFail())},i})(),gR=(function(){function i(e){this.mediaStream=e}return i.prototype.render=function(e,n,o){return If(this,void 0,void 0,function(){return Nf(this,function(u){return[2,dR.create(e,this.mediaStream,n,o)]})})},i.create=function(e){return If(this,void 0,void 0,function(){var n,o;return Nf(this,function(u){switch(u.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return o=u.sent(),[2,new i(o)]}})})},i})(),GE=function(i,e,n,o){function u(d){return d instanceof n?d:new n(function(y){y(d)})}return new(n||(n=Promise))(function(d,y){function v(S){try{_(o.next(S))}catch(I){y(I)}}function b(S){try{_(o.throw(S))}catch(I){y(I)}}function _(S){S.done?d(S.value):u(S.value).then(v,b)}_((o=o.apply(i,e||[])).next())})},qE=function(i,e){var n={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,u,d,y;return y={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function v(_){return function(S){return b([_,S])}}function b(_){if(o)throw new TypeError("Generator is already executing.");for(;y&&(y=0,_[0]&&(n=0)),n;)try{if(o=1,u&&(d=_[0]&2?u.return:_[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,_[1])).done)return d;switch(u=0,d&&(_=[_[0]&2,d.value]),_[0]){case 0:case 1:d=_;break;case 4:return n.label++,{value:_[1],done:!1};case 5:n.label++,u=_[1],_=[0];continue;case 7:_=n.ops.pop(),n.trys.pop();continue;default:if(d=n.trys,!(d=d.length>0&&d[d.length-1])&&(_[0]===6||_[0]===2)){n=0;continue}if(_[0]===3&&(!d||_[1]>d[0]&&_[1]<d[3])){n.label=_[1];break}if(_[0]===6&&n.label<d[1]){n.label=d[1],d=_;break}if(d&&n.label<d[2]){n.label=d[2],n.ops.push(_);break}d[2]&&n.ops.pop(),n.trys.pop();continue}_=e.call(i,n)}catch(S){_=[6,S],u=0}finally{o=d=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},mR=(function(){function i(){}return i.failIfNotSupported=function(){return GE(this,void 0,void 0,function(){return qE(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new i]})})},i.prototype.create=function(e){return GE(this,void 0,void 0,function(){return qE(this,function(n){return[2,gR.create(e)]})})},i})(),pR=function(i,e,n,o){function u(d){return d instanceof n?d:new n(function(y){y(d)})}return new(n||(n=Promise))(function(d,y){function v(S){try{_(o.next(S))}catch(I){y(I)}}function b(S){try{_(o.throw(S))}catch(I){y(I)}}function _(S){S.done?d(S.value):u(S.value).then(v,b)}_((o=o.apply(i,e||[])).next())})},xR=function(i,e){var n={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,u,d,y;return y={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function v(_){return function(S){return b([_,S])}}function b(_){if(o)throw new TypeError("Generator is already executing.");for(;y&&(y=0,_[0]&&(n=0)),n;)try{if(o=1,u&&(d=_[0]&2?u.return:_[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,_[1])).done)return d;switch(u=0,d&&(_=[_[0]&2,d.value]),_[0]){case 0:case 1:d=_;break;case 4:return n.label++,{value:_[1],done:!1};case 5:n.label++,u=_[1],_=[0];continue;case 7:_=n.ops.pop(),n.trys.pop();continue;default:if(d=n.trys,!(d=d.length>0&&d[d.length-1])&&(_[0]===6||_[0]===2)){n=0;continue}if(_[0]===3&&(!d||_[1]>d[0]&&_[1]<d[3])){n.label=_[1];break}if(_[0]===6&&n.label<d[1]){n.label=d[1],d=_;break}if(d&&n.label<d[2]){n.label=d[2],n.ops.push(_);break}d[2]&&n.ops.pop(),n.trys.pop();continue}_=e.call(i,n)}catch(S){_=[6,S],u=0}finally{o=d=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},yR=(function(){function i(){}return i.retrieve=function(){if(navigator.mediaDevices)return i.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?i.getCamerasFromMediaStreamTrack():i.rejectWithError()},i.rejectWithError=function(){var e=Hl.unableToQuerySupportedDevices();return i.isHttpsOrLocalhost()||(e=Hl.insecureContextCameraQueryError()),Promise.reject(e)},i.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},i.getCamerasFromMediaDevices=function(){return pR(this,void 0,void 0,function(){var e,n,o,u,d,y,v;return xR(this,function(b){switch(b.label){case 0:return e=function(_){for(var S=_.getVideoTracks(),I=0,M=S;I<M.length;I++){var U=M[I];U.enabled=!1,U.stop(),_.removeTrack(U)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=b.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(o=b.sent(),u=[],d=0,y=o;d<y.length;d++)v=y[d],v.kind==="videoinput"&&u.push({id:v.deviceId,label:v.label});return e(n),[2,u]}})})},i.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var o=function(d){for(var y=[],v=0,b=d;v<b.length;v++){var _=b[v];_.kind==="video"&&y.push({id:_.id,label:_.label})}e(y)},u=MediaStreamTrack;u.getSources(o)})},i})(),ii;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.NOT_STARTED=1]="NOT_STARTED",i[i.SCANNING=2]="SCANNING",i[i.PAUSED=3]="PAUSED"})(ii||(ii={}));var ER=(function(){function i(){this.state=ii.NOT_STARTED,this.onGoingTransactionNewState=ii.UNKNOWN}return i.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},i.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},i.prototype.execute=function(){if(this.onGoingTransactionNewState===ii.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=ii.UNKNOWN,this.directTransition(e)},i.prototype.cancel=function(){if(this.onGoingTransactionNewState===ii.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=ii.UNKNOWN},i.prototype.getState=function(){return this.state},i.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==ii.UNKNOWN)throw"Cannot transition to a new state, already under transition"},i.prototype.validateTransition=function(e){switch(this.state){case ii.UNKNOWN:throw"Transition from unknown is not allowed";case ii.NOT_STARTED:this.failIfNewStateIs(e,[ii.PAUSED]);break;case ii.SCANNING:break;case ii.PAUSED:break}},i.prototype.failIfNewStateIs=function(e,n){for(var o=0,u=n;o<u.length;o++){var d=u[o];if(e===d)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},i})(),_R=(function(){function i(e){this.stateManager=e}return i.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},i.prototype.directTransition=function(e){this.stateManager.directTransition(e)},i.prototype.getState=function(){return this.stateManager.getState()},i.prototype.canScanFile=function(){return this.stateManager.getState()===ii.NOT_STARTED},i.prototype.isScanning=function(){return this.stateManager.getState()!==ii.NOT_STARTED},i.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===ii.SCANNING},i.prototype.isPaused=function(){return this.stateManager.getState()===ii.PAUSED},i})(),wR=(function(){function i(){}return i.create=function(){return new _R(new ER)},i})(),AR=(function(){var i=function(e,n){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,u){o.__proto__=u}||function(o,u){for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(o[d]=u[d])},i(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");i(e,n);function o(){this.constructor=e}e.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),qr=(function(i){AR(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e})($8),bR=(function(){function i(e,n){this.logger=n,this.fps=qr.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=qr.DEFAULT_DISABLE_FLIP}return i.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?$A.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},i.prototype.isShadedBoxEnabled=function(){return!wa(this.qrbox)},i.create=function(e,n){return new i(e,n)},i})(),TR=(function(){function i(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var o;typeof n=="boolean"?this.verbose=n===!0:n&&(o=n,this.verbose=o.verbose===!0,o.experimentalFeatures),this.logger=new tR(this.verbose),this.qrcode=new lR(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(o),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=wR.create()}return i.prototype.start=function(e,n,o,u){var d=this;if(!e)throw"cameraIdOrConfig is required";if(!o||typeof o!="function")throw"qrCodeSuccessCallback is required and should be a function.";var y;u?y=u:y=this.verbose?this.logger.log:function(){};var v=bR.create(n,this.logger);this.clearElement();var b=!1;v.videoConstraints&&(v.isMediaStreamConstraintsValid()?b=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var _=b,S=document.getElementById(this.elementId);S.clientWidth?S.clientWidth:qr.DEFAULT_WIDTH,S.style.position="relative",this.shouldScan=!0,this.element=S;var I=this,M=this.stateManagerProxy.startTransition(ii.SCANNING);return new Promise(function(U,X){var K=_?v.videoConstraints:I.createVideoConstraints(e);if(!K){M.cancel(),X("videoConstraints should be defined");return}var z={};(!_||v.aspectRatio)&&(z.aspectRatio=v.aspectRatio);var oe={onRenderSurfaceReady:function(he,ee){I.setupUi(he,ee,v),I.isScanning=!0,I.foreverScan(v,o,y)}};mR.failIfNotSupported().then(function(he){he.create(K).then(function(ee){return ee.render(d.element,z,oe).then(function(ae){I.renderedCamera=ae,M.execute(),U(null)}).catch(function(ae){M.cancel(),X(ae)})}).catch(function(ee){M.cancel(),X(Hl.errorGettingUserMedia(ee))})}).catch(function(he){M.cancel(),X(Hl.cameraStreamingNotSupported())})})},i.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(ii.PAUSED),this.showPausedState(),(wa(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},i.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(ii.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},i.prototype.getState=function(){return this.stateManagerProxy.getState()},i.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(ii.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var o=function(){if(e.element){var d=document.getElementById(qr.SHADED_REGION_ELEMENT_ID);d&&e.element.removeChild(d)}},u=this;return this.renderedCamera.close().then(function(){return u.renderedCamera=null,u.element&&(u.element.removeChild(u.canvasElement),u.canvasElement=null),o(),u.qrRegion&&(u.qrRegion=null),u.context&&(u.context=null),n.execute(),u.hidePausedState(),u.isScanning=!1,Promise.resolve()})},i.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(o){return o.decodedText})},i.prototype.scanFileV2=function(e,n){var o=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(wa(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(u,d){o.possiblyCloseLastScanImageFile(),o.clearElement(),o.lastScanImageFile=URL.createObjectURL(e);var y=new Image;y.onload=function(){var v=y.width,b=y.height,_=document.getElementById(o.elementId),S=_.clientWidth?_.clientWidth:qr.DEFAULT_WIDTH,I=Math.max(_.clientHeight?_.clientHeight:b,qr.FILE_SCAN_MIN_HEIGHT),M=o.computeCanvasDrawConfig(v,b,S,I);if(n){var U=o.createCanvasElement(S,I,"qr-canvas-visible");U.style.display="inline-block",_.appendChild(U);var X=U.getContext("2d");if(!X)throw"Unable to get 2d context from canvas";X.canvas.width=S,X.canvas.height=I,X.drawImage(y,0,0,v,b,M.x,M.y,M.width,M.height)}var K=qr.FILE_SCAN_HIDDEN_CANVAS_PADDING,z=Math.max(y.width,M.width),oe=Math.max(y.height,M.height),he=z+2*K,ee=oe+2*K,ae=o.createCanvasElement(he,ee);_.appendChild(ae);var Ve=ae.getContext("2d");if(!Ve)throw"Unable to get 2d context from canvas";Ve.canvas.width=he,Ve.canvas.height=ee,Ve.drawImage(y,0,0,v,b,K,K,z,oe);try{o.qrcode.decodeRobustlyAsync(ae).then(function(Ne){u(UE.createFromQrcodeResult(Ne))}).catch(d)}catch(Ne){d("QR code parse error, error = ".concat(Ne))}},y.onerror=d,y.onabort=d,y.onstalled=d,y.onsuspend=d,y.src=URL.createObjectURL(e)})},i.prototype.clear=function(){this.clearElement()},i.getCameras=function(){return yR.retrieve()},i.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},i.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},i.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},i.prototype.applyVideoConstraints=function(e){if(e){if(!$A.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},i.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},i.prototype.getSupportedFormats=function(e){var n=[Ge.QR_CODE,Ge.AZTEC,Ge.CODABAR,Ge.CODE_39,Ge.CODE_93,Ge.CODE_128,Ge.DATA_MATRIX,Ge.MAXICODE,Ge.ITF,Ge.EAN_13,Ge.EAN_8,Ge.PDF_417,Ge.RSS_14,Ge.RSS_EXPANDED,Ge.UPC_A,Ge.UPC_E,Ge.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var o=[],u=0,d=e.formatsToSupport;u<d.length;u++){var y=d[u];J8(y)?o.push(y):this.logger.warn("Invalid format: ".concat(y," passed in config, ignoring."))}if(o.length===0)throw"None of formatsToSupport match supported values.";return o},i.prototype.getUseBarCodeDetectorIfSupported=function(e){if(wa(e))return!0;if(!wa(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(wa(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return wa(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},i.prototype.validateQrboxSize=function(e,n,o){var u=this,d=o.qrbox;this.validateQrboxConfig(d);var y=this.toQrdimensions(e,n,d),v=function(_){if(_<qr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(qr.MIN_QR_BOX_SIZE,"px.")},b=function(_){return _>e&&(u.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),_=e),_};v(y.width),v(y.height),y.width=b(y.width)},i.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},i.prototype.toQrdimensions=function(e,n,o){if(typeof o=="number")return{width:o,height:o};if(typeof o=="function")try{return o(e,n)}catch(u){throw new Error("qrbox config was passed as a function but it failed with unknown error"+u)}return o},i.prototype.setupUi=function(e,n,o){o.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,o);var u=wa(o.qrbox)?{width:e,height:n}:o.qrbox;this.validateQrboxConfig(u);var d=this.toQrdimensions(e,n,u);d.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var y=o.isShadedBoxEnabled()&&d.height<=n,v={x:0,y:0,width:e,height:n},b=y?this.getShadedRegionBounds(e,n,d):v,_=this.createCanvasElement(b.width,b.height),S={willReadFrequently:!0},I=_.getContext("2d",S);I.canvas.width=b.width,I.canvas.height=b.height,this.element.append(_),y&&this.possiblyInsertShadingElement(this.element,e,n,d),this.createScannerPausedUiElement(this.element),this.qrRegion=b,this.context=I,this.canvasElement=_},i.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=Hl.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},i.prototype.scanContext=function(e,n){var o=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(u){return e(u.text,UE.createFromQrcodeResult(u)),o.possiblyUpdateShaders(!0),!0}).catch(function(u){o.possiblyUpdateShaders(!1);var d=Hl.codeParseError(u);return n(d,eR.createFrom(d)),!1})},i.prototype.foreverScan=function(e,n,o){var u=this;if(this.shouldScan&&this.renderedCamera){var d=this.renderedCamera.getSurface(),y=d.videoWidth/d.clientWidth,v=d.videoHeight/d.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var b=this.qrRegion.width*y,_=this.qrRegion.height*v,S=this.qrRegion.x*y,I=this.qrRegion.y*v;this.context.drawImage(d,S,I,b,_,0,0,this.qrRegion.width,this.qrRegion.height);var M=function(){u.foreverScanTimeout=setTimeout(function(){u.foreverScan(e,n,o)},u.getTimeoutFps(e.fps))};this.scanContext(n,o).then(function(U){!U&&e.disableFlip!==!0?(u.context.translate(u.context.canvas.width,0),u.context.scale(-1,1),u.scanContext(n,o).finally(function(){M()})):M()}).catch(function(U){u.logger.logError("Error happend while scanning context",U),M()})}},i.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",o="deviceId",u={user:!0,environment:!0},d="exact",y=function(X){if(X in u)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(X,"'")},v=Object.keys(e);if(v.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(v.length," keys");var b=Object.keys(e)[0];if(b!==n&&b!==o)throw"Only '".concat(n,"' and '").concat(o,"' ")+" are supported for 'cameraIdOrConfig'";if(b===n){var _=e.facingMode;if(typeof _=="string"){if(y(_))return{facingMode:_}}else if(typeof _=="object")if(d in _){if(y(_["".concat(d)]))return{facingMode:{exact:_["".concat(d)]}}}else throw"'facingMode' should be string or object with"+" ".concat(d," as key.");else{var S=typeof _;throw"Invalid type of 'facingMode' = ".concat(S)}}else{var I=e.deviceId;if(typeof I=="string")return{deviceId:I};if(typeof I=="object"){if(d in I)return{deviceId:{exact:I["".concat(d)]}};throw"'deviceId' should be string or object with"+" ".concat(d," as key.")}else{var M=typeof I;throw"Invalid type of 'deviceId' = ".concat(M)}}}var U=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(U)},i.prototype.computeCanvasDrawConfig=function(e,n,o,u){if(e<=o&&n<=u){var d=(o-e)/2,y=(u-n)/2;return{x:d,y,width:e,height:n}}else{var v=e,b=n;return e>o&&(n=o/e*n,e=o),n>u&&(e=u/n*e,n=u),this.logger.log("Image downsampled from "+"".concat(v,"X").concat(b)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,o,u)}},i.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},i.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?qr.BORDER_SHADER_MATCH_COLOR:qr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},i.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},i.prototype.createCanvasElement=function(e,n,o){var u=e,d=n,y=document.createElement("canvas");return y.style.width="".concat(u,"px"),y.style.height="".concat(d,"px"),y.style.display="none",y.id=wa(o)?"qr-canvas":o,y},i.prototype.getShadedRegionBounds=function(e,n,o){if(o.width>e||o.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-o.width)/2,y:(n-o.height)/2,width:o.width,height:o.height}},i.prototype.possiblyInsertShadingElement=function(e,n,o,u){if(!(n-u.width<1||o-u.height<1)){var d=document.createElement("div");d.style.position="absolute";var y=(n-u.width)/2,v=(o-u.height)/2;if(d.style.borderLeft="".concat(y,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderRight="".concat(y,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderTop="".concat(v,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderBottom="".concat(v,"px solid rgba(0, 0, 0, 0.48)"),d.style.boxSizing="border-box",d.style.top="0px",d.style.bottom="0px",d.style.left="0px",d.style.right="0px",d.id="".concat(qr.SHADED_REGION_ELEMENT_ID),n-u.width<11||o-u.height<11)this.hasBorderShaders=!1;else{var b=5,_=40;this.insertShaderBorders(d,_,b,-b,null,0,!0),this.insertShaderBorders(d,_,b,-b,null,0,!1),this.insertShaderBorders(d,_,b,null,-b,0,!0),this.insertShaderBorders(d,_,b,null,-b,0,!1),this.insertShaderBorders(d,b,_+b,-b,null,-b,!0),this.insertShaderBorders(d,b,_+b,null,-b,-b,!0),this.insertShaderBorders(d,b,_+b,-b,null,-b,!1),this.insertShaderBorders(d,b,_+b,null,-b,-b,!1),this.hasBorderShaders=!0}e.append(d)}},i.prototype.insertShaderBorders=function(e,n,o,u,d,y,v){var b=document.createElement("div");b.style.position="absolute",b.style.backgroundColor=qr.BORDER_SHADER_DEFAULT_COLOR,b.style.width="".concat(n,"px"),b.style.height="".concat(o,"px"),u!==null&&(b.style.top="".concat(u,"px")),d!==null&&(b.style.bottom="".concat(d,"px")),v?b.style.left="".concat(y,"px"):b.style.right="".concat(y,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(b),e.appendChild(b)},i.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},i.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},i.prototype.getTimeoutFps=function(e){return 1e3/e},i})(),YE;(function(i){i[i.STATUS_DEFAULT=0]="STATUS_DEFAULT",i[i.STATUS_SUCCESS=1]="STATUS_SUCCESS",i[i.STATUS_WARNING=2]="STATUS_WARNING",i[i.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(YE||(YE={}));const vR=({onRefresh:i})=>{var Vt;const{showAlert:e}=tc(),[n,o]=se.useState("roster"),[u,d]=se.useState(!1),[y,v]=se.useState([]),[b,_]=se.useState([]),[S,I]=se.useState([]),[M,U]=se.useState([]),[X,K]=se.useState([]),[z,oe]=se.useState([]),[he,ee]=se.useState([]),[ae,Ve]=se.useState([]),[Ne,j]=se.useState(""),[G,V]=se.useState(new Date().toISOString().substring(0,7)),[te,W]=se.useState([]),[J,Y]=se.useState([]),[et,me]=se.useState(""),[pe,be]=se.useState(null),qe=ri.useRef(y);ri.useEffect(()=>{qe.current=y},[y]);const[ot,dt]=se.useState(""),[ie,Ae]=se.useState(""),[ke,Ue]=se.useState("normal"),[tt,Le]=se.useState(""),[At,_t]=se.useState(!1),[Nt,Li]=se.useState(""),[Sn,xr]=se.useState("100"),[Et,fi]=se.useState(""),[di,Xi]=se.useState(""),[fn,Yt]=se.useState(!1),[We,_n]=se.useState(""),[Fe,ps]=se.useState(""),[xs,mn]=se.useState(""),[bi,ai]=se.useState(""),[ys,gi]=se.useState(""),[Wn,Ns]=se.useState(""),[Kr,Rs]=se.useState(!1),[Ut,De]=se.useState(""),[Xt,nt]=se.useState(!1),[sn,sr]=se.useState(""),[Es,ar]=se.useState(!1);se.useEffect(()=>{const Z=J6(Bn=>{_(Bn.filter($t=>$t.role===hs.STUDENT&&$t.isApproved)),I(Bn.filter($t=>$t.role===hs.STUDENT&&!$t.isApproved));const Jn=Bn.filter($t=>$t.role===hs.STUDENT&&$t.isApproved);Jn.length>0&&!Nt&&Li(Jn[0].id)}),at=yA(v),ct=pA(U),zn=mA(K),oi=K6(oe),Qn=xA(ee),Zn=dA(Ve),pn=hA(Bn=>{W(Bn),Bn.length>0&&!bi&&ai(Bn[0].name)}),Rt=EA(Y);return()=>{Z(),at(),ct(),zn(),oi(),Qn(),Zn(),pn(),Rt()}},[Nt,bi]),se.useEffect(()=>{let Z=null;return(async()=>{if(n==="scan")try{Z=new TR("reader"),await Z.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250},aspectRatio:1},ct=>{ct&&bt(ct)},()=>{})}catch(ct){console.error("Unable to start scanner",ct)}})(),()=>{Z&&Z.isScanning&&Z.stop().then(()=>{Z==null||Z.clear()}).catch(ct=>console.error("Failed to stop scanner",ct))}},[n]);const bt=Z=>{if(pe)return;const at=qe.current.find(ct=>ct.qrCodeData===Z&&ct.status==="pending");at&&be(at)},on=async Z=>{const at=et;if(!at){e("","error");return}d(!0),setTimeout(()=>{const ct=y.find(zn=>zn.qrCodeData===at&&zn.status==="pending");ct?(be(ct),me("")):e("","error"),d(!1)},800)},Ki=async Z=>{pe&&(await O6(Z,"completed"),be(null),e("","success"))},or=async()=>{const Z=parseInt(Sn);if(isNaN(Z)||!Nt)return;const at=b.find(oi=>oi.id===Nt);if(!at){e("","error");return}const ct=parseInt(Sn);if(isNaN(ct)||ct<=0){e("","error");return}const zn=b.map(oi=>oi.id===Nt?{...oi,points:oi.points+Z,totalEarned:Z>0?oi.totalEarned+Z:oi.totalEarned}:oi);await v6(zn),i(),_(oi=>oi.map(Qn=>Qn.id===Nt?{...Qn,points:Qn.points+ct}:Qn)),xr(""),e(` ${at.name} ${ct} `,"success")},In=async(Z,at)=>{const ct={...Z,grade:at};await Ug(ct),e(` ${Z.name}  ${at}`,"success")},Ks=async Z=>{await S6(Z),e("","success")},Ln=async Z=>{confirm("/")&&await I6(Z)},Ti=async Z=>{if(Z.preventDefault(),!We||!Fe||!xs){e("","error");return}if(We&&Fe){const at={id:`prod_${Date.now()}`,name:We,category:bi,price:parseInt(Fe),description:Wn||`${bi==="food"?"":bi==="electronic"?"":bi==="ticket"?"":""}`,imageUrl:ys||"https://images.unsplash.com/photo-1553456558-aff63285bdd1?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3",stock:parseInt(xs)||99};await G6(at),Rs(!1),_n(""),ps(""),mn(""),gi(""),ai("other"),Ns(""),e("","success")}},yr=async Z=>{window.confirm("")&&await q6(Z)},Wi=async Z=>{if(Z.preventDefault(),!ot||!ie){e("","error");return}const at={id:`m_${Date.now()}`,title:ot,description:"",points:parseInt(ie),type:ke,isActive:!0,maxAttempts:1,deadline:tt?new Date(tt).getTime():void 0};await B6(at),_t(!1),dt(""),Ae(""),Ue("normal"),Le(""),e("","success")},_s=async Z=>{window.confirm("")&&e("","success")},lr=async()=>{if(!di){e("","error");return}await Y6({id:`r_${Date.now()}`,title:di}),Xi(""),Yt(!1),e("","success")},ws=async Z=>{await X6(Z)},Pn=async Z=>{await k6(Z)},vi=async(Z,at)=>{await gA(Z,at),e("","success")},Ci=async Z=>{await F6(Z),e("","success")},je=async Z=>{confirm("")&&await z6(Z)},mi=y.filter(Z=>{var Qn,Zn;const at=(((Qn=Z.productName)==null?void 0:Qn.toLowerCase())||"").includes(Ne.toLowerCase())||(((Zn=Z.id)==null?void 0:Zn.toLowerCase())||"").includes(Ne.toLowerCase()),ct=new Date(Z.timestamp),oi=`${ct.getFullYear()}-${String(ct.getMonth()+1).padStart(2,"0")}`===G;return at&&oi}),vn=Z=>fo.reduce((at,ct)=>Z>=ct.threshold?ct:at,fo[0]);return T.jsxs("div",{className:"space-y-8 pb-20 animate-in fade-in duration-500",children:[T.jsx("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:T.jsxs("div",{children:[T.jsxs("h1",{className:"text-4xl font-black text-slate-800 flex items-center gap-4",children:[T.jsx("div",{className:"bg-indigo-600 p-3 rounded-2xl text-white shadow-xl shadow-indigo-100",children:T.jsx(rf,{size:32})}),""]}),T.jsx("p",{className:"text-slate-500 mt-2 italic font-medium",children:""})]})}),T.jsxs("div",{className:"flex bg-white p-2 rounded-3xl border border-slate-100 shadow-md overflow-x-auto gap-2",children:[T.jsxs("button",{onClick:()=>o("roster"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${n==="roster"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[T.jsx(bC,{size:18})," ",T.jsx("span",{children:""})]}),T.jsxs("button",{onClick:()=>o("approval"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${n==="approval"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50 relative"}`,children:[T.jsx(d1,{size:18})," ",T.jsx("span",{children:""}),S.length>0&&T.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full text-white text-[10px] flex items-center justify-center border-2 border-white",children:S.length})]}),T.jsxs("button",{onClick:()=>o("points"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${n==="points"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[T.jsx(Nv,{size:18})," ",T.jsx("span",{children:""})]}),T.jsxs("button",{onClick:()=>o("products"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${n==="products"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[T.jsx(f1,{size:18})," ",T.jsx("span",{children:""})]}),T.jsxs("button",{onClick:()=>o("banners"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${n==="banners"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[T.jsx(cx,{size:18})," ",T.jsx("span",{children:""})]}),T.jsxs("button",{onClick:()=>o("mission_approval"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${n==="mission_approval"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50 relative"}`,children:[T.jsx(su,{size:18})," ",T.jsx("span",{children:""}),ae.filter(Z=>Z.status==="pending").length>0&&T.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-pink-500 rounded-full text-white text-[10px] flex items-center justify-center border-2 border-white",children:ae.filter(Z=>Z.status==="pending").length})]}),T.jsxs("button",{onClick:()=>o("scan"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${n==="scan"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[T.jsx(h1,{size:18})," ",T.jsx("span",{children:""})]}),T.jsxs("button",{onClick:()=>o("history"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${n==="history"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[T.jsx(nf,{size:18})," ",T.jsx("span",{children:""})]}),T.jsxs("button",{onClick:()=>o("missions"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${n==="missions"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[T.jsx(Zc,{size:18})," ",T.jsx("span",{children:""})]}),T.jsxs("button",{onClick:()=>o("wishes"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${n==="wishes"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50 relative"}`,children:[T.jsx(Xh,{size:18})," ",T.jsx("span",{children:""}),he.length>0&&T.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-pink-500 rounded-full text-white text-[10px] flex items-center justify-center border-2 border-white",children:he.length})]})]}),n==="roster"&&T.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 animate-in slide-in-from-bottom-4",children:b.map(Z=>{const at=vn(Z.totalEarned);return T.jsxs("div",{className:"bg-white rounded-[2.5rem] p-8 border border-slate-100 shadow-sm hover:shadow-xl transition-all group overflow-hidden relative",children:[T.jsx("div",{className:`absolute top-0 right-0 w-24 h-24 ${at.color} opacity-5 -translate-y-12 translate-x-12 rounded-full`}),T.jsxs("div",{className:"flex flex-col items-center text-center",children:[T.jsxs("div",{className:"relative mb-6",children:[T.jsx("div",{className:`absolute inset-0 rounded-full blur-xl opacity-20 ${at.color}`}),T.jsx("img",{src:Z.avatar,className:"w-24 h-24 rounded-full border-4 border-white shadow-2xl relative z-10 object-cover",alt:Z.name}),T.jsx("div",{className:"absolute -bottom-2 -right-2 w-10 h-10 rounded-2xl bg-white shadow-lg flex items-center justify-center text-xl z-20 border border-slate-50",children:at.icon})]}),T.jsx("h3",{className:"text-2xl font-black text-slate-800 mb-1",children:Z.name}),T.jsx("div",{className:`px-4 py-1 rounded-full text-[10px] font-black text-white uppercase tracking-widest mb-2 ${at.color} shadow-sm`,children:at.name}),T.jsx("div",{className:"mb-6",children:T.jsx("select",{value:Z.grade||"",onChange:ct=>In(Z,ct.target.value),className:"text-xs font-bold text-slate-500 bg-slate-50 border border-slate-100 rounded-lg px-2 py-1 outline-none pointer-events-auto",children:lA.map(ct=>T.jsx("option",{value:ct,children:ct},ct))})}),T.jsxs("div",{className:"w-full grid grid-cols-2 gap-4",children:[T.jsxs("div",{className:"bg-indigo-50/50 p-4 rounded-2xl border border-indigo-50",children:[T.jsx("p",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest mb-1",children:""}),T.jsx("p",{className:"text-xl font-black text-indigo-600",children:Z.points.toLocaleString()})]}),T.jsxs("div",{className:"bg-amber-50/50 p-4 rounded-2xl border border-amber-50",children:[T.jsx("p",{className:"text-[10px] font-black text-amber-400 uppercase tracking-widest mb-1",children:""}),T.jsx("p",{className:"text-xl font-black text-amber-600",children:Z.totalEarned.toLocaleString()})]})]})]}),T.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-50 flex justify-between items-center gap-4",children:[T.jsxs("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-tighter truncate max-w-[80px]",children:["ID: ",Z.id.replace("user_","")]}),T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsxs("button",{onClick:()=>{Li(Z.id),o("points")},className:"text-indigo-600 font-black text-xs hover:underline flex items-center gap-1",children:[T.jsx(lx,{size:14})," "]}),T.jsx("button",{onClick:()=>Ln(Z.id),className:"text-slate-300 hover:text-rose-500 transition-colors",title:"",children:T.jsx(Lh,{size:16})})]})]})]},Z.id)})}),n==="points"&&T.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[T.jsxs("div",{className:"flex items-center gap-6 mb-12",children:[T.jsx("div",{className:"w-20 h-20 bg-emerald-50 text-emerald-600 rounded-3xl flex items-center justify-center shadow-inner",children:T.jsx(lx,{size:40})}),T.jsxs("div",{children:[T.jsx("h2",{className:"text-3xl font-black text-slate-800 tracking-tight",children:""}),T.jsx("p",{className:"text-slate-400 font-medium",children:""})]})]}),T.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16",children:[T.jsxs("div",{className:"space-y-8",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-[0.2em] mb-4",children:""}),T.jsx("div",{className:"grid grid-cols-3 gap-4",children:b.map(Z=>T.jsxs("button",{onClick:()=>Li(Z.id),className:`flex flex-col items-center gap-3 p-4 rounded-3xl border-2 transition-all ${Nt===Z.id?"border-indigo-600 bg-indigo-50 shadow-lg shadow-indigo-100":"border-slate-50 bg-slate-50/50 hover:bg-white hover:border-slate-200"}`,children:[T.jsx("img",{src:Z.avatar,className:"w-12 h-12 rounded-full shadow-sm",alt:Z.name}),T.jsx("span",{className:`font-black text-sm ${Nt===Z.id?"text-indigo-600":"text-slate-600"}`,children:Z.name})]},Z.id))})]}),T.jsxs("div",{children:[T.jsxs("div",{className:"flex items-center justify-between mb-4",children:[T.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),T.jsxs("button",{onClick:()=>Yt(!fn),className:"text-xs font-black text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:[fn?T.jsx(oo,{size:14}):T.jsx(Pl,{size:14}),fn?"":""]})]}),fn?T.jsxs("div",{className:"bg-slate-50 p-6 rounded-2xl border-2 border-indigo-100 mb-4 animate-in zoom-in-95 duration-200",children:[T.jsxs("div",{className:"flex gap-2",children:[T.jsx("input",{type:"text",placeholder:" (: )",value:di,onChange:Z=>Xi(Z.target.value),className:"flex-1 p-3 border-2 border-slate-200 rounded-xl focus:border-indigo-600 outline-none font-bold"}),T.jsx("button",{onClick:lr,className:"bg-indigo-600 text-white p-3 rounded-xl hover:bg-indigo-700 shadow-md",children:T.jsx(Pl,{size:20})})]}),T.jsx("div",{className:"mt-4 space-y-2 max-h-40 overflow-y-auto pr-2",children:z.map(Z=>T.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg border border-slate-100",children:[T.jsx("span",{className:"font-bold text-sm text-slate-700",children:Z.title}),T.jsx("button",{onClick:()=>ws(Z.id),className:"text-rose-500 hover:text-rose-600",children:T.jsx(Lh,{size:16})})]},Z.id))})]}):T.jsxs("select",{value:Et,onChange:Z=>fi(Z.target.value),className:"w-full p-5 bg-slate-50 border-2 border-transparent rounded-2xl focus:bg-white focus:border-indigo-600 focus:ring-4 focus:ring-indigo-100 transition-all outline-none font-bold text-slate-700 shadow-inner",children:[T.jsx("option",{value:"",children:"..."}),z.length>0?z.map(Z=>T.jsx("option",{value:Z.title,children:Z.title},Z.id)):T.jsxs(T.Fragment,{children:[T.jsx("option",{children:""}),T.jsx("option",{children:""}),T.jsx("option",{children:" A++"}),T.jsx("option",{children:""})]}),T.jsx("option",{value:"other",children:""})]}),Et==="other"&&!fn&&T.jsx("input",{type:"text",placeholder:"...",value:Et==="other"?"":Et,onChange:Z=>fi(Z.target.value),className:"w-full mt-4 p-5 bg-white border-2 border-indigo-200 rounded-2xl outline-none font-bold text-slate-700"})]})]}),T.jsxs("div",{className:"space-y-8",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-[0.2em] mb-4",children:""}),T.jsxs("div",{className:"relative",children:[T.jsx("input",{type:"number",value:Sn,onChange:Z=>xr(Z.target.value),className:"w-full p-8 text-5xl font-black bg-slate-50 border-2 border-transparent rounded-[2rem] focus:bg-white focus:border-indigo-600 focus:ring-4 focus:ring-indigo-100 transition-all outline-none text-indigo-600 shadow-inner"}),T.jsx("div",{className:"absolute right-8 top-1/2 -translate-y-1/2 flex items-center gap-2 pointer-events-none",children:T.jsx("span",{className:"font-black text-slate-300 text-2xl uppercase tracking-tighter",children:"PTS"})})]})]}),T.jsxs("button",{onClick:or,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white font-black py-8 rounded-[2rem] transition-all shadow-2xl shadow-emerald-200 flex items-center justify-center gap-4 text-2xl active:scale-95 group",children:[T.jsx(Wo,{size:32,className:"group-hover:scale-125 transition-transform"}),""]})]})]})]}),n==="approval"&&T.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[T.jsxs("h2",{className:"text-3xl font-black text-slate-800 mb-8 flex items-center gap-3",children:[T.jsx(d1,{className:"text-indigo-600"}),"",T.jsxs("span",{className:"bg-indigo-100 text-indigo-600 text-sm px-3 py-1 rounded-full",children:[S.length," "]})]}),T.jsx("div",{className:"space-y-4",children:S.length===0?T.jsx("div",{className:"text-center py-20 text-slate-400 font-bold",children:""}):S.map(Z=>T.jsxs("div",{className:"flex items-center justify-between p-6 bg-slate-50 rounded-2xl border border-slate-100",children:[T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("div",{className:"w-12 h-12 bg-indigo-200 rounded-full flex items-center justify-center text-indigo-700 font-bold text-xl",children:Z.name[0]}),T.jsxs("div",{children:[T.jsx("h3",{className:"font-black text-lg text-slate-800",children:Z.name}),T.jsx("p",{className:"text-slate-500 text-sm font-bold",children:Z.grade||""})]})]}),T.jsxs("div",{className:"flex gap-3",children:[T.jsx("button",{onClick:()=>Ks(Z.id),className:"bg-emerald-500 hover:bg-emerald-600 text-white px-6 py-2 rounded-xl font-bold transition-all shadow-lg shadow-emerald-100",children:""}),T.jsx("button",{onClick:()=>Ln(Z.id),className:"bg-slate-200 hover:bg-rose-500 hover:text-white text-slate-500 px-6 py-2 rounded-xl font-bold transition-all",children:""})]})]},Z.id))})]}),n==="products"&&T.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[T.jsxs("div",{className:"flex justify-between items-center mb-8",children:[T.jsxs("h2",{className:"text-3xl font-black text-slate-800 flex items-center gap-3",children:[T.jsx(f1,{className:"text-indigo-600"})," "]}),T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsxs("button",{onClick:()=>ar(!Es),className:"bg-slate-100 text-slate-600 px-5 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-slate-200 transition-all border border-slate-200",children:[T.jsx(Zc,{size:18})," "]}),T.jsxs("button",{onClick:()=>Rs(!Kr),className:"bg-indigo-600 text-white px-5 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100",children:[T.jsx(Pl,{size:20})," "]})]})]}),Es&&T.jsxs("div",{className:"bg-slate-50 p-6 rounded-2xl mb-8 border border-slate-200 animate-in fade-in",children:[T.jsx("h3",{className:"font-black text-slate-700 mb-4",children:""}),T.jsxs("div",{className:"flex gap-4 mb-6",children:[T.jsx("input",{placeholder:" (: )",value:sn,onChange:Z=>sr(Z.target.value),className:"flex-1 p-3 rounded-xl border border-slate-200 font-bold outline-none"}),T.jsx("button",{onClick:()=>{sn&&(D6(sn),sr(""))},className:"bg-emerald-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-emerald-700",children:""})]}),T.jsx("div",{className:"flex flex-wrap gap-3",children:te.map(Z=>T.jsxs("div",{className:"bg-white px-4 py-2 rounded-xl border border-slate-200 flex items-center gap-2 shadow-sm font-bold text-slate-600",children:[Z.name,T.jsx("button",{onClick:()=>M6(Z.id),className:"text-slate-300 hover:text-rose-500",children:T.jsx(oo,{size:14})})]},Z.id))})]}),Kr&&T.jsxs("form",{onSubmit:Ti,className:"bg-slate-50 p-6 rounded-2xl mb-8 border border-slate-200 animate-in fade-in",children:[T.jsx("h3",{className:"font-black text-slate-700 mb-4",children:""}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[T.jsx("input",{placeholder:"",value:We,onChange:Z=>_n(Z.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"}),T.jsxs("select",{value:bi,onChange:Z=>ai(Z.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500",children:[te.map(Z=>T.jsx("option",{value:Z.name,children:Z.name},Z.id)),te.length===0&&T.jsx("option",{value:"",children:""})]}),T.jsx("input",{placeholder:" ()",value:ys,onChange:Z=>gi(Z.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"}),T.jsx("input",{placeholder:" ()",type:"number",value:Fe,onChange:Z=>ps(Z.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"}),T.jsx("textarea",{placeholder:" ()",value:Wn,onChange:Z=>Ns(Z.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500 md:col-span-2 h-24"}),T.jsx("input",{placeholder:"",type:"number",value:xs,onChange:Z=>mn(Z.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"})]}),T.jsxs("div",{className:"flex justify-end gap-2",children:[T.jsx("button",{type:"button",onClick:()=>Rs(!1),className:"px-4 py-2 text-slate-400 font-bold hover:text-slate-600",children:""}),T.jsx("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700",children:""})]})]}),T.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:M.map(Z=>T.jsxs("div",{className:"border border-slate-100 rounded-[2rem] p-6 flex flex-col gap-4 group hover:shadow-xl transition-all bg-white relative",children:[T.jsxs("div",{className:"flex gap-4 items-center",children:[T.jsx("img",{src:Z.imageUrl,alt:Z.name,className:"w-20 h-20 rounded-2xl object-cover shadow-sm"}),T.jsxs("div",{className:"flex-1",children:[T.jsx("h4",{className:"font-black text-slate-800 text-lg",children:Z.name}),T.jsx("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest",children:Z.category}),T.jsxs("p",{className:"text-indigo-600 font-black",children:[Z.price," PTS"]})]}),T.jsx("button",{onClick:()=>yr(Z.id),className:"p-2 text-slate-300 hover:text-rose-500 transition-colors",children:T.jsx(Lh,{size:18})})]}),T.jsx("div",{className:"flex items-center justify-between pt-4 border-t border-slate-50",children:T.jsxs("div",{className:"flex flex-col",children:[T.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter mb-1",children:""}),T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("input",{type:"number",defaultValue:Z.stock,onBlur:at=>vi(Z.id,parseInt(at.target.value)||0),className:"w-16 p-2 bg-slate-50 border border-slate-200 rounded-lg text-sm font-black text-slate-700 outline-none focus:ring-2 focus:ring-indigo-500"}),T.jsx("span",{className:`text-[10px] font-black px-2 py-1 rounded-lg ${Z.stock>0?"bg-emerald-100 text-emerald-600":"bg-red-100 text-red-600"}`,children:Z.stock>0?"ON SALE":"SOLD OUT"})]})]})})]},Z.id))})]}),n==="mission_approval"&&T.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[T.jsxs("h2",{className:"text-3xl font-black text-slate-800 mb-8 flex items-center gap-3",children:[T.jsx(su,{className:"text-emerald-600"}),"",T.jsxs("span",{className:"bg-emerald-100 text-emerald-600 text-sm px-3 py-1 rounded-full",children:[ae.filter(Z=>Z.status==="pending").length," "]})]}),T.jsx("div",{className:"space-y-6",children:ae.filter(Z=>Z.status==="pending").length===0?T.jsx("div",{className:"text-center py-24 text-slate-400 font-bold bg-slate-50 rounded-[3rem] border border-slate-100 border-dashed",children:""}):ae.filter(Z=>Z.status==="pending").map(Z=>T.jsxs("div",{className:"bg-slate-50 p-8 rounded-[2.5rem] border border-slate-100 flex flex-col md:flex-row md:items-center justify-between gap-6",children:[T.jsxs("div",{className:"flex items-center gap-6",children:[T.jsx("div",{className:"w-16 h-16 bg-white rounded-2xl shadow-sm flex items-center justify-center text-2xl font-black text-indigo-600 border border-slate-100",children:Z.userName[0]}),T.jsxs("div",{children:[T.jsx("h3",{className:"text-xl font-black text-slate-800",children:Z.userName}),T.jsxs("p",{className:"text-slate-500 font-bold flex items-center gap-2",children:["",T.jsxs("span",{className:"text-indigo-600",children:["",Z.missionTitle,""]})]}),T.jsxs("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest mt-2",children:["",Z.points," PTS  ",new Date(Z.timestamp).toLocaleString()]})]})]}),T.jsxs("div",{className:"flex gap-4",children:[T.jsxs("button",{onClick:()=>Ci(Z.id),className:"bg-emerald-600 hover:bg-emerald-700 text-white px-8 py-3 rounded-2xl font-black transition-all shadow-xl shadow-emerald-100 flex items-center gap-2",children:[T.jsx(Wo,{size:20})," "]}),T.jsx("button",{onClick:()=>je(Z.id),className:"bg-white hover:bg-rose-50 text-slate-400 hover:text-rose-600 px-8 py-3 rounded-2xl font-black transition-all border border-slate-200",children:""})]})]},Z.id))})]}),n==="scan"&&T.jsxs("div",{className:"bg-white rounded-[3rem] p-16 border border-slate-100 text-center shadow-xl animate-in fade-in",children:[T.jsx("div",{className:"bg-indigo-50 w-32 h-32 rounded-[2.5rem] flex items-center justify-center mx-auto mb-8 text-indigo-600 shadow-inner",children:T.jsx(h1,{size:56})}),T.jsx("h2",{className:"text-3xl font-black text-slate-800 mb-4 tracking-tight",children:"QR Code "}),T.jsx("p",{className:"text-slate-400 mb-8 font-medium max-w-md mx-auto leading-relaxed",children:" QR Code "}),T.jsx("div",{className:"max-w-md mx-auto mb-8 overflow-hidden rounded-[2rem] border-4 border-indigo-50 shadow-inner",children:T.jsx("div",{id:"reader",className:"w-full"})}),T.jsxs("div",{className:"max-w-md mx-auto mb-8",children:[T.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[T.jsx("div",{className:"h-px bg-slate-200 flex-1"}),T.jsx("span",{className:"text-[10px] font-black text-slate-300 uppercase tracking-widest",children:""}),T.jsx("div",{className:"h-px bg-slate-200 flex-1"})]}),T.jsx("input",{type:"text",placeholder:" QR Code ...",value:et,onChange:Z=>me(Z.target.value),className:"w-full p-4 bg-slate-50 border-2 border-indigo-50 rounded-2xl focus:bg-white focus:border-indigo-600 outline-none font-mono text-xs text-slate-500 text-center"})]}),T.jsx("button",{onClick:()=>on(),disabled:u,className:"bg-indigo-600 hover:bg-indigo-700 disabled:bg-slate-300 text-white px-16 py-6 rounded-[2rem] font-black transition-all shadow-2xl shadow-indigo-200 inline-flex items-center justify-center gap-4 text-xl active:scale-95",children:u?"...":""})]}),n==="history"&&T.jsxs("section",{className:"bg-white rounded-[3rem] border border-slate-100 shadow-xl overflow-hidden animate-in fade-in",children:[T.jsxs("div",{className:"p-10 border-b border-slate-50 flex flex-col md:flex-row md:items-center justify-between gap-6",children:[T.jsxs("h2",{className:"font-black text-2xl text-slate-800 flex items-center gap-3",children:[T.jsx(nf,{className:"text-indigo-600"}),""]}),T.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[T.jsx("div",{className:"relative",children:T.jsx("input",{type:"month",value:G,onChange:Z=>V(Z.target.value),className:"pl-5 pr-5 py-4 rounded-2xl bg-slate-50 border-2 border-transparent focus:bg-white focus:border-indigo-600 focus:ring-4 focus:ring-indigo-100 transition-all outline-none text-sm font-bold shadow-inner"})}),T.jsxs("div",{className:"relative",children:[T.jsx(Zv,{className:"absolute left-5 top-1/2 -translate-y-1/2 text-slate-400",size:20}),T.jsx("input",{type:"text",placeholder:"...",value:Ne,onChange:Z=>j(Z.target.value),className:"pl-14 pr-8 py-4 rounded-2xl bg-slate-50 border-2 border-transparent focus:bg-white focus:border-indigo-600 focus:ring-4 focus:ring-indigo-100 transition-all outline-none text-sm w-full md:w-80 shadow-inner font-bold"})]})]})]}),T.jsx("div",{className:"overflow-x-auto",children:T.jsxs("table",{className:"w-full",children:[T.jsx("thead",{className:"bg-slate-50/50",children:T.jsxs("tr",{children:[T.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),T.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),T.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),T.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),T.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),T.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""})]})}),T.jsx("tbody",{className:"divide-y divide-slate-50",children:mi.map(Z=>{var at;try{return T.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors",children:[T.jsx("td",{className:"px-10 py-6 whitespace-nowrap",children:T.jsx("span",{className:`px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest ${Z.status==="completed"?"bg-emerald-100 text-emerald-700":Z.status==="pending"?"bg-amber-100 text-amber-700":"bg-rose-100 text-rose-700"}`,children:Z.status==="completed"?"":Z.status==="pending"?"":""})}),T.jsx("td",{className:"px-10 py-6 whitespace-nowrap font-black text-slate-800",children:((at=b.find(ct=>ct.id===Z.userId))==null?void 0:at.name)||""}),T.jsx("td",{className:"px-10 py-6 whitespace-nowrap font-bold text-slate-600",children:Z.productName}),T.jsxs("td",{className:"px-10 py-6 whitespace-nowrap text-indigo-600 font-black",children:[Z.pointsSpent," PTS"]}),T.jsx("td",{className:"px-10 py-6 whitespace-nowrap text-slate-400 text-sm font-bold",children:Z.timestamp?new Date(Z.timestamp).toLocaleDateString():""}),T.jsx("td",{className:"px-10 py-6 whitespace-nowrap",children:Z.status==="pending"?T.jsx("button",{onClick:()=>Ki(Z.id),className:"text-white bg-indigo-600 hover:bg-indigo-700 px-5 py-2.5 rounded-xl text-xs font-black transition-all shadow-xl shadow-indigo-100 active:scale-95",children:""}):T.jsxs("div",{className:"flex items-center gap-2 text-slate-300 font-black text-[10px] tracking-widest",children:[T.jsx(Wo,{size:14})," FINISHED"]})})]},Z.id)}catch(ct){return console.error("Row render error",ct),null}})})]})})]}),n==="banners"&&T.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[T.jsxs("div",{className:"flex justify-between items-center mb-8",children:[T.jsxs("h2",{className:"text-3xl font-black text-slate-800 flex items-center gap-3",children:[T.jsx(cx,{className:"text-indigo-600"})," "]}),T.jsxs("button",{onClick:()=>nt(!Xt),className:"bg-indigo-600 text-white px-5 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100",children:[T.jsx(Pl,{size:20})," "]})]}),Xt&&T.jsxs("div",{className:"bg-slate-50 p-6 rounded-2xl mb-8 border border-slate-200 animate-in fade-in",children:[T.jsx("h3",{className:"font-black text-slate-700 mb-4",children:""}),T.jsxs("div",{className:"flex gap-4",children:[T.jsx("input",{placeholder:"https://...",value:Ut,onChange:Z=>De(Z.target.value),className:"flex-1 p-3 rounded-xl border border-slate-200 font-bold outline-none"}),T.jsx("button",{onClick:async()=>{Ut&&(await $6(Ut),De(""),nt(!1),e("","success"))},className:"bg-emerald-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-emerald-700",children:""})]})]}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6",children:[J.map(Z=>T.jsxs("div",{className:"relative group rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-all",children:[T.jsx("img",{src:Z.imageUrl,alt:"banner",className:"w-full h-48 object-cover"}),T.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-all flex items-center justify-center",children:T.jsx("button",{onClick:async()=>{confirm("")&&(await e8(Z.id),e("","success"))},className:"bg-white text-rose-500 px-6 py-2 rounded-xl font-black hover:bg-rose-50",children:" "})})]},Z.id)),J.length===0&&T.jsx("div",{className:"col-span-full py-12 text-center text-slate-400 font-bold bg-slate-50 rounded-2xl border border-slate-200 border-dashed",children:""})]})]}),n==="missions"&&T.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[T.jsxs("div",{className:"flex justify-between items-center mb-8",children:[T.jsxs("h2",{className:"text-3xl font-black text-slate-800 flex items-center gap-3",children:[T.jsx(Zc,{className:"text-indigo-600"})," "]}),T.jsxs("button",{onClick:()=>_t(!At),className:"bg-indigo-600 text-white px-5 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100",children:[T.jsx(Pl,{size:18})," "]})]}),At&&T.jsxs("form",{onSubmit:Wi,className:"bg-slate-50 p-6 rounded-2xl mb-8 border border-slate-200 animate-in fade-in",children:[T.jsx("h3",{className:"font-black text-slate-700 mb-4",children:""}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[T.jsx("input",{placeholder:"",value:ot,onChange:Z=>dt(Z.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"}),T.jsx("input",{placeholder:"",type:"number",value:ie,onChange:Z=>Ae(Z.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"}),T.jsxs("select",{value:ke,onChange:Z=>Ue(Z.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500",children:[T.jsx("option",{value:"normal",children:""}),T.jsx("option",{value:"challenge",children:""}),T.jsx("option",{value:"hard",children:""})]}),T.jsxs("div",{className:"flex items-center gap-2 p-3 bg-white rounded-xl border border-slate-200",children:[T.jsx(au,{size:18,className:"text-slate-400"}),T.jsx("input",{type:"datetime-local",value:tt,onChange:Z=>Le(Z.target.value),className:"font-bold outline-none text-slate-600 w-full",placeholder:" ()"})]})]}),T.jsxs("div",{className:"flex justify-end gap-3",children:[T.jsx("button",{type:"button",onClick:()=>_t(!1),className:"px-4 py-2 rounded-xl font-bold text-slate-400 hover:bg-slate-200 transition-all",children:""}),T.jsx("button",{type:"submit",className:"bg-indigo-600 text-white px-6 py-2 rounded-xl font-bold hover:bg-indigo-700 transition-all shadow-lg",children:""})]})]}),T.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[X.length===0&&T.jsx("div",{className:"text-center py-12 text-slate-400 font-bold bg-slate-50 rounded-2xl border border-slate-100 border-dashed",children:""}),X.map(Z=>T.jsxs("div",{className:`flex flex-col md:flex-row md:items-center justify-between p-6 rounded-2xl border transition-all ${Z.isActive?"bg-white border-slate-100 shadow-sm":"bg-slate-50 border-slate-100 opacity-60"}`,children:[T.jsxs("div",{className:"flex items-center gap-4 mb-4 md:mb-0",children:[T.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center font-black text-lg shrink-0 ${Z.type==="normal"?"bg-emerald-100 text-emerald-600":Z.type==="challenge"?"bg-orange-100 text-orange-600":"bg-rose-100 text-rose-600"}`,children:Z.type==="normal"?"N":Z.type==="challenge"?"C":"H"}),T.jsxs("div",{children:[T.jsxs("h3",{className:"font-black text-lg text-slate-800 flex items-center gap-2",children:[Z.title,!Z.isActive&&T.jsx("span",{className:"text-[10px] bg-slate-200 text-slate-500 px-2 py-0.5 rounded-full",children:""})]}),T.jsxs("p",{className:"text-slate-400 text-sm font-bold flex items-center gap-2",children:[T.jsxs("span",{className:"text-indigo-500",children:[Z.points," PTS"]}),"  ",Z.description,Z.deadline&&T.jsxs("span",{className:"flex items-center gap-1 text-amber-500 ml-2",children:[T.jsx(au,{size:14})," ",new Date(Z.deadline).toLocaleString()," "]})]})]})]}),T.jsx("button",{onClick:()=>Pn(Z.id),className:`px-4 py-2 rounded-xl font-black text-xs transition-all whitespace-nowrap ${Z.isActive?"bg-rose-50 text-rose-600 hover:bg-rose-100":"bg-emerald-50 text-emerald-600 hover:bg-emerald-100"}`,children:Z.isActive?"":""})]},Z.id))]})]}),n==="wishes"&&T.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[T.jsxs("h2",{className:"text-3xl font-black text-slate-800 mb-8 flex items-center gap-3",children:[T.jsx(Xh,{className:"text-pink-500"})," "]}),T.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:he.length===0?T.jsx("div",{className:"col-span-full py-20 text-center text-slate-400 font-bold",children:""}):he.map(Z=>{var at;return T.jsxs("div",{className:"bg-slate-50 p-6 rounded-[2.5rem] border border-slate-100 relative group",children:[T.jsx("button",{onClick:()=>_s(Z.id),className:"absolute top-4 right-4 p-2 bg-white rounded-full text-slate-300 hover:text-rose-500 hover:shadow-md transition-all opacity-0 group-hover:opacity-100",children:T.jsx(Lh,{size:18})}),T.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[T.jsx("img",{src:Z.userAvatar,className:"w-12 h-12 rounded-full border-2 border-white shadow-sm",alt:Z.userName}),T.jsxs("div",{children:[T.jsx("h4",{className:"font-black text-slate-800",children:Z.userName}),T.jsx("p",{className:"text-[10px] text-slate-400 font-bold",children:new Date(Z.timestamp).toLocaleString()})]})]}),T.jsxs("h3",{className:"text-xl font-black text-slate-800 mb-2",children:["",Z.itemName]}),T.jsxs("p",{className:"text-slate-500 text-sm mb-6 leading-relaxed italic",children:['"',Z.description,'"']}),T.jsxs("div",{className:"flex items-center gap-2 text-pink-500 font-black text-sm",children:[T.jsx(Xh,{size:16,fill:"currentColor"})," ",((at=Z.likedBy)==null?void 0:at.length)||0," "]})]},Z.id)})})]}),u&&T.jsxs("div",{className:"fixed inset-0 z-[150] bg-slate-900/95 backdrop-blur-xl flex flex-col items-center justify-center p-8",children:[T.jsxs("div",{className:"relative w-full max-w-lg aspect-square border-8 border-white/5 rounded-[5rem] overflow-hidden shadow-[0_0_100px_rgba(79,70,229,0.3)]",children:[T.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-900 via-indigo-900/20 to-slate-900 flex items-center justify-center",children:T.jsxs("div",{className:"text-center",children:[T.jsx(Wv,{size:140,className:"mx-auto mb-10 animate-pulse text-indigo-400"}),T.jsx("p",{className:"text-3xl font-black text-white mb-4 tracking-tight",children:"..."}),T.jsx("p",{className:"text-indigo-300 font-bold tracking-widest uppercase text-xs",children:"AI Computer Vision Active"})]})}),T.jsx("div",{className:"absolute top-0 left-0 w-full h-3 bg-indigo-400 shadow-[0_0_50px_rgba(129,140,248,1)] animate-scan-line"})]}),T.jsxs("button",{onClick:()=>d(!1),className:"mt-16 bg-white/5 hover:bg-white/10 text-white px-12 py-5 rounded-[2rem] font-black transition-all border border-white/10 flex items-center gap-4 text-lg backdrop-blur",children:[T.jsx(oo,{size:24})," "]}),T.jsx("style",{children:`
            @keyframes scan-line {
              0% { top: 0% }
              100% { top: 100% }
            }
            .animate-scan-line {
              animation: scan-line 3s linear infinite;
            }
          `})]}),pe&&T.jsx("div",{className:"fixed inset-0 z-[160] flex items-center justify-center p-4 bg-slate-900/70 backdrop-blur-2xl",children:T.jsxs("div",{className:"bg-white rounded-[4rem] max-w-md w-full p-12 shadow-[0_0_80px_rgba(0,0,0,0.5)] animate-in zoom-in-95 duration-200",children:[T.jsx("div",{className:"bg-emerald-50 w-24 h-24 rounded-[2rem] flex items-center justify-center text-emerald-600 mb-10 mx-auto shadow-inner",children:T.jsx(rf,{size:48})}),T.jsx("h2",{className:"text-3xl font-black text-slate-800 text-center mb-10 tracking-tight",children:""}),T.jsxs("div",{className:"bg-slate-50 rounded-[2.5rem] p-8 space-y-6 mb-12 border border-slate-100 shadow-inner",children:[T.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-slate-200/50",children:[T.jsx("span",{className:"text-slate-400 text-[10px] font-black uppercase tracking-widest",children:""}),T.jsx("span",{className:"font-black text-slate-800 text-xl",children:(Vt=b.find(Z=>Z.id===pe.userId))==null?void 0:Vt.name})]}),T.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-slate-200/50",children:[T.jsx("span",{className:"text-slate-400 text-[10px] font-black uppercase tracking-widest",children:""}),T.jsx("span",{className:"font-black text-slate-800 text-xl",children:pe.productName})]}),T.jsxs("div",{className:"flex justify-between items-center py-2",children:[T.jsx("span",{className:"text-slate-400 text-[10px] font-black uppercase tracking-widest",children:""}),T.jsxs("span",{className:"font-black text-indigo-600 text-2xl",children:[pe.pointsSpent," ",T.jsx("span",{className:"text-xs font-bold text-indigo-400",children:"PTS"})]})]})]}),T.jsxs("div",{className:"flex flex-col gap-4",children:[T.jsxs("button",{onClick:()=>Ki(pe.id),className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-6 rounded-2xl transition-all shadow-2xl shadow-indigo-100 flex items-center justify-center gap-4 text-xl active:scale-95",children:[T.jsx(Wo,{size:28}),""]}),T.jsx("button",{onClick:()=>be(null),className:"w-full bg-slate-100 text-slate-600 font-bold py-5 rounded-2xl hover:bg-slate-200 transition-all text-lg",children:""})]})]})})]})},CR=30,XE=CR*24*60*60*1e3,SR=({user:i})=>{const{showAlert:e}=tc(),[n,o]=se.useState([]),[u,d]=se.useState(!1),[y,v]=se.useState(""),[b,_]=se.useState(""),[S,I]=se.useState(null),M=n.filter(z=>z.userId===i.id).sort((z,oe)=>oe.timestamp-z.timestamp)[0],U=M&&Date.now()-M.timestamp<XE;se.useEffect(()=>{const z=xA(oe=>{o(oe.sort((he,ee)=>ee.timestamp-he.timestamp))});return()=>z()},[]),se.useEffect(()=>{const z=()=>{if(!M)return null;const he=M.timestamp+XE-Date.now();return he<=0?null:{d:Math.floor(he/864e5),h:Math.floor(he/36e5%24),m:Math.floor(he/1e3/60%60),s:Math.floor(he/1e3%60)}},oe=setInterval(()=>{I(z())},1e3);return I(z()),()=>clearInterval(oe)},[M]);const X=async z=>{if(z.preventDefault(),!y.trim()||!b.trim())return;const oe={id:`wish_${Date.now()}`,userId:i.id,userName:i.name,userAvatar:i.avatar,itemName:y,description:b,timestamp:Date.now(),likedBy:[]};await Q6(oe),d(!1),v(""),_(""),e("","success")},K=async(z,oe)=>{if(oe!=null&&oe.includes(i.id)){e("","info");return}await Z6(z,i.id)};return T.jsxs("div",{className:"space-y-8 pb-20",children:[T.jsxs("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[T.jsxs("div",{children:[T.jsxs("h1",{className:"text-3xl font-bold text-slate-800 flex items-center gap-3",children:[T.jsx(sf,{className:"text-yellow-500"}),""]}),T.jsx("p",{className:"text-slate-500 mt-1",children:""})]}),T.jsxs("button",{onClick:()=>{U?e("","info"):d(!0)},className:`px-6 py-3 rounded-2xl font-black shadow-lg flex flex-col items-center gap-1 transition-all hover:scale-105 min-w-[200px] ${U?"bg-slate-100 text-slate-400 cursor-not-allowed border border-slate-200":"bg-indigo-600 text-white shadow-indigo-100 hover:bg-indigo-700"}`,children:[T.jsxs("div",{className:"flex items-center gap-2",children:[U?T.jsx(au,{size:18}):T.jsx(Pl,{size:20}),T.jsx("span",{children:U?"":""})]}),U&&S&&T.jsxs("span",{className:"text-[10px] font-bold font-mono tracking-tight",children:[S.d," ",S.h," ",S.m," ",S.s,""]})]})]}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[n.map(z=>{var oe,he,ee,ae;return T.jsxs("div",{className:"bg-white rounded-[2rem] p-6 border border-slate-100 shadow-sm hover:shadow-md transition-all flex flex-col relative overflow-hidden group",children:[T.jsx("div",{className:"absolute -right-4 -top-4 w-24 h-24 bg-yellow-50 rounded-full blur-2xl group-hover:bg-yellow-100 transition-colors"}),T.jsxs("div",{className:"flex items-center gap-3 mb-4 z-10",children:[T.jsx("img",{src:z.userAvatar,alt:z.userName,className:"w-10 h-10 rounded-full border-2 border-white shadow-sm"}),T.jsxs("div",{children:[T.jsx("p",{className:"text-sm font-bold text-slate-700",children:z.userName}),T.jsx("p",{className:"text-xs text-slate-400",children:new Date(z.timestamp).toLocaleDateString()})]})]}),T.jsx("h3",{className:"text-xl font-black text-slate-800 mb-2 z-10",children:z.itemName}),T.jsx("p",{className:"text-slate-500 text-sm mb-6 flex-1 z-10",children:z.description}),T.jsx("div",{className:"flex items-center justify-between pt-4 border-t border-slate-50 z-10",children:T.jsxs("button",{onClick:()=>K(z.id,z.likedBy),className:`flex items-center gap-2 transition-colors group/like ${(oe=z.likedBy)!=null&&oe.includes(i.id)?"text-pink-500":"text-slate-400 hover:text-pink-500"}`,children:[T.jsx("div",{className:`p-2 rounded-full transition-colors ${(he=z.likedBy)!=null&&he.includes(i.id)?"bg-pink-50":"hover:bg-pink-50"}`,children:T.jsx(fC,{size:18,className:(ee=z.likedBy)!=null&&ee.includes(i.id)?"fill-pink-500":""})}),T.jsxs("span",{className:"font-bold text-sm",children:[((ae=z.likedBy)==null?void 0:ae.length)||0," "]})]})})]},z.id)}),n.length===0&&T.jsxs("div",{className:"col-span-full py-20 text-center space-y-4",children:[T.jsx("div",{className:"w-20 h-20 bg-slate-50 rounded-full flex items-center justify-center mx-auto text-slate-300",children:T.jsx(Xh,{size:40})}),T.jsx("p",{className:"text-slate-400 font-bold",children:""})]})]}),u&&T.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:T.jsxs("div",{className:"bg-white rounded-[2.5rem] max-w-lg w-full p-8 shadow-2xl animate-in zoom-in-95 duration-200",children:[T.jsxs("div",{className:"flex justify-between items-center mb-8",children:[T.jsxs("h2",{className:"text-2xl font-black text-slate-800 flex items-center gap-2",children:[T.jsx(sf,{className:"text-indigo-500"}),""]}),T.jsx("button",{onClick:()=>d(!1),className:"text-slate-400 hover:text-slate-600 bg-slate-50 p-2 rounded-full",children:T.jsx(oo,{size:24})})]}),T.jsxs("form",{onSubmit:X,className:"space-y-6",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-slate-700 font-bold mb-2 ml-1",children:""}),T.jsx("input",{type:"text",value:y,onChange:z=>v(z.target.value),placeholder:"AirPods Pro...",className:"w-full bg-slate-50 border border-slate-200 rounded-2xl px-5 py-4 font-bold text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all placeholder:font-medium",required:!0})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-slate-700 font-bold mb-2 ml-1",children:""}),T.jsx("textarea",{value:b,onChange:z=>_(z.target.value),placeholder:"...",className:"w-full bg-slate-50 border border-slate-200 rounded-2xl px-5 py-4 font-medium text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all h-32 resize-none placeholder:font-medium",required:!0})]}),T.jsxs("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-5 rounded-[1.25rem] transition-all shadow-xl shadow-indigo-100 flex items-center justify-center gap-3 text-lg",children:[T.jsx($v,{size:24}),""]})]})]})})]})},IR=({onLogin:i})=>{const{showAlert:e}=tc(),[n,o]=se.useState("student"),[u,d]=se.useState(!1),[y,v]=se.useState(""),[b,_]=se.useState(""),[S,I]=se.useState(""),[M,U]=se.useState(""),[X,K]=se.useState(""),z=async ae=>{ae.preventDefault();const Ne=(await uA()).find(j=>j.name===y);if(!Ne){e("","error");return}if(Ne.password&&Ne.password!==b){e("","error");return}if(!Ne.isApproved){e("","info");return}await Yl(Ne),e("","success"),i(Ne)},oe=async ae=>{ae.preventDefault(),await C6(y,b,S)?(e("","success"),d(!1),_("")):e("","error")},he=ae=>{ae.preventDefault(),M==="0957999"?(Yl(Ay),e("","success"),i(Ay)):e("","error")},ee=ae=>{ae.preventDefault(),X.toLowerCase()==="aaa"?(Yl(by),e("","success"),i(by)):e("","error")};return T.jsx("div",{className:"min-h-screen bg-[#f8fafc] flex items-center justify-center p-4",children:T.jsxs("div",{className:"bg-white max-w-4xl w-full rounded-[3rem] shadow-2xl overflow-hidden flex flex-col md:flex-row min-h-[600px]",children:[T.jsxs("div",{className:"bg-indigo-600 p-12 text-white md:w-5/12 flex flex-col justify-between relative overflow-hidden",children:[T.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-500 rounded-full -translate-y-1/2 translate-x-1/3 opacity-50"}),T.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-indigo-700 rounded-full translate-y-1/3 -translate-x-1/3 opacity-50"}),T.jsxs("div",{className:"relative z-10",children:[T.jsx("div",{className:"bg-white/20 w-16 h-16 rounded-2xl flex items-center justify-center backdrop-blur-sm mb-6",children:T.jsx(x_,{size:32})}),T.jsx("h1",{className:"text-4xl font-black tracking-tight mb-4",children:""}),T.jsx("p",{className:"text-indigo-100 font-medium text-lg leading-relaxed",children:""})]}),T.jsx("div",{className:"relative z-10 text-sm font-medium text-indigo-200",children:" 2026 Workshop System"})]}),T.jsxs("div",{className:"p-8 md:p-12 md:w-7/12 flex flex-col",children:[!u&&T.jsxs("div",{className:"flex gap-2 mb-10 overflow-x-auto pb-2",children:[T.jsxs("button",{onClick:()=>o("student"),className:`flex-1 min-w-[100px] py-3 rounded-xl font-bold text-sm transition-all flex flex-col items-center gap-1 ${n==="student"?"bg-indigo-50 text-indigo-600 ring-2 ring-indigo-500 ring-offset-2":"bg-slate-50 text-slate-400 hover:bg-slate-100"}`,children:[T.jsx(wC,{size:18})," "]}),T.jsxs("button",{onClick:()=>o("admin"),className:`flex-1 min-w-[100px] py-3 rounded-xl font-bold text-sm transition-all flex flex-col items-center gap-1 ${n==="admin"?"bg-indigo-50 text-indigo-600 ring-2 ring-indigo-500 ring-offset-2":"bg-slate-50 text-slate-400 hover:bg-slate-100"}`,children:[T.jsx(rf,{size:18})," "]}),T.jsxs("button",{onClick:()=>o("guest"),className:`flex-1 min-w-[100px] py-3 rounded-xl font-bold text-sm transition-all flex flex-col items-center gap-1 ${n==="guest"?"bg-indigo-50 text-indigo-600 ring-2 ring-500 ring-offset-2":"bg-slate-50 text-slate-400 hover:bg-slate-100"}`,children:[T.jsx(Tv,{size:18})," "]})]}),!u&&n==="student"&&T.jsxs("form",{onSubmit:z,className:"space-y-6 flex-1 flex flex-col justify-center animate-in fade-in slide-in-from-right-4 duration-300",children:[T.jsxs("div",{children:[T.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-1",children:""}),T.jsx("p",{className:"text-slate-400",children:""})]}),T.jsxs("div",{className:"space-y-4",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),T.jsx("input",{type:"text",value:y,onChange:ae=>v(ae.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:""})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),T.jsx("input",{type:"password",value:b,onChange:ae=>_(ae.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:""})]})]}),T.jsx("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-4 rounded-2xl shadow-xl shadow-indigo-100 transition-all active:scale-95",children:""}),T.jsx("div",{className:"text-center",children:T.jsx("button",{type:"button",onClick:()=>d(!0),className:"text-indigo-500 font-bold hover:underline",children:""})})]}),u&&T.jsxs("form",{onSubmit:oe,className:"space-y-6 flex-1 flex flex-col justify-center animate-in fade-in slide-in-from-right-4 duration-300",children:[T.jsxs("div",{children:[T.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-1",children:""}),T.jsx("p",{className:"text-slate-400",children:""})]}),T.jsxs("div",{className:"space-y-3",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),T.jsx("input",{type:"text",value:y,onChange:ae=>v(ae.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:"",required:!0})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),T.jsx("input",{type:"password",value:b,onChange:ae=>_(ae.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:"",required:!0})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),T.jsx("select",{value:S,onChange:ae=>I(ae.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl px-5 py-4 font-bold text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all appearance-none",children:lA.map(ae=>T.jsx("option",{value:ae,children:ae},ae))})]})]}),T.jsxs("button",{type:"submit",className:"w-full bg-slate-800 hover:bg-slate-900 text-white font-black py-4 rounded-2xl shadow-xl transition-all active:scale-95 flex items-center justify-center gap-2",children:[T.jsx(d1,{size:20}),""]}),T.jsx("div",{className:"text-center",children:T.jsx("button",{type:"button",onClick:()=>d(!1),className:"text-slate-400 font-bold hover:text-slate-600",children:""})})]}),!u&&n==="admin"&&T.jsxs("form",{onSubmit:he,className:"space-y-6 flex-1 flex flex-col justify-center animate-in fade-in slide-in-from-right-4 duration-300",children:[T.jsxs("div",{children:[T.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-1",children:""}),T.jsx("p",{className:"text-slate-400",children:""})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),T.jsx("input",{type:"password",value:M,onChange:ae=>U(ae.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:"..."})]}),T.jsx("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-4 rounded-2xl shadow-xl shadow-indigo-100 transition-all active:scale-95",children:""})]}),!u&&n==="guest"&&T.jsxs("form",{onSubmit:ee,className:"space-y-6 flex-1 flex flex-col justify-center animate-in fade-in slide-in-from-right-4 duration-300",children:[T.jsxs("div",{children:[T.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-1",children:""}),T.jsx("p",{className:"text-slate-400",children:""})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),T.jsx("input",{type:"text",value:X,onChange:ae=>K(ae.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:"..."})]}),T.jsx("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-4 rounded-2xl shadow-xl shadow-indigo-100 transition-all active:scale-95",children:""})]})]})]})})},NR=({user:i,currentRank:e,onSwitchUser:n})=>{const o=wo(),[u,d]=se.useState(!1),y=[{path:"/",label:"",icon:Pv},{path:"/shop",label:"",icon:rC},{path:"/wishes",label:"",icon:sf},{path:"/history",label:"",icon:nf}];return i.role===hs.ADMIN&&y.push({path:"/admin",label:"",icon:rf}),T.jsxs("nav",{className:"bg-white border-r border-slate-200 w-full md:w-64 md:fixed md:inset-y-0 h-auto md:h-full z-50 shadow-sm",children:[T.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between",children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("div",{className:"bg-indigo-600 p-2 rounded-lg text-white",children:T.jsx(x_,{size:20})}),T.jsx("span",{className:"text-xl font-bold text-slate-800 tracking-tight",children:""})]}),T.jsx("button",{onClick:()=>d(!u),className:"md:hidden text-slate-600",children:u?T.jsx(oo,{}):T.jsx(Fv,{})})]}),T.jsx("div",{className:`${u?"block":"hidden"} md:block p-4 space-y-2`,children:y.map(v=>{const b=v.icon,_=o.pathname===v.path;return T.jsxs(tf,{to:v.path,onClick:()=>d(!1),className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 ${_?"bg-indigo-50 text-indigo-700 font-bold shadow-sm":"text-slate-600 hover:bg-slate-50"}`,children:[T.jsx(b,{size:20}),T.jsx("span",{children:v.label})]},v.path)})}),T.jsxs("div",{className:`${u?"block":"hidden"} md:block absolute bottom-0 w-full p-6 border-t border-slate-100 bg-white`,children:[T.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[T.jsx("img",{src:i.avatar,className:"w-10 h-10 rounded-full border-2 border-slate-100 object-cover",alt:"avatar"}),T.jsxs("div",{className:"overflow-hidden",children:[T.jsx("p",{className:"font-bold text-slate-800 truncate text-sm",children:i.name}),T.jsxs("div",{className:`text-[9px] px-2 py-0.5 rounded-full inline-block text-white font-black ${e.color}`,children:[e.icon," ",e.name," Lv.",Math.floor(i.totalEarned/500)+1]})]})]}),T.jsxs("button",{onClick:n,className:"flex items-center gap-2 text-indigo-600 hover:text-indigo-800 transition-colors text-xs font-bold w-full bg-indigo-50 p-2 rounded-lg justify-center mb-2",children:[T.jsx(kv,{size:14}),T.jsx("span",{children:""})]}),T.jsxs(tf,{to:"/settings",className:"flex items-center gap-2 text-slate-400 hover:text-slate-600 transition-colors text-xs font-bold w-full p-2 justify-center",children:[T.jsx(tC,{size:14}),T.jsx("span",{children:""})]})]})]})},RR=()=>{const[i,e]=se.useState(Ty()),n=i?fo.reduce((d,y)=>i.totalEarned>=y.threshold?y:d,fo[0]):fo[0],o=()=>{const d=Ty();d&&e(d)},u=()=>{N6(),e(null)};return T.jsx(CC,{children:i?T.jsx(JT,{children:T.jsxs("div",{className:"min-h-screen flex flex-col md:flex-row bg-[#fbfcfd]",children:[T.jsx(NR,{user:i,currentRank:n,onSwitchUser:u}),T.jsx("main",{className:"flex-1 md:ml-64 p-4 md:p-8",children:T.jsx("div",{className:"max-w-6xl mx-auto",children:T.jsxs(IT,{children:[T.jsx(Yo,{path:"/",element:T.jsx(j8,{user:i,rank:n,onUserUpdate:o})}),T.jsx(Yo,{path:"/shop",element:T.jsx(F8,{user:i,onUserUpdate:o})}),T.jsx(Yo,{path:"/wishes",element:T.jsx(SR,{user:i})}),T.jsx(Yo,{path:"/history",element:T.jsx(Z8,{user:i})}),T.jsx(Yo,{path:"/admin",element:T.jsx(vR,{onRefresh:o})}),T.jsx(Yo,{path:"/settings",element:T.jsx(t8,{user:i,onUserUpdate:o})})]})})})]})}):T.jsx(IR,{onLogin:e})})},tb=document.getElementById("root");if(!tb)throw new Error("Could not find root element to mount to");const OR=R3.createRoot(tb);OR.render(T.jsx(ri.StrictMode,{children:T.jsx(RR,{})}));
