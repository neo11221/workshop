function YS(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const c in s)if(c!=="default"&&!(c in n)){const f=Object.getOwnPropertyDescriptor(s,c);f&&Object.defineProperty(n,c,f.get?f:{enumerable:!0,get:()=>s[c]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const f of c)if(f.type==="childList")for(const p of f.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&s(p)}).observe(document,{childList:!0,subtree:!0});function t(c){const f={};return c.integrity&&(f.integrity=c.integrity),c.referrerPolicy&&(f.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?f.credentials="include":c.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function s(c){if(c.ep)return;c.ep=!0;const f=t(c);fetch(c.href,f)}})();var bf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hm(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var K1={exports:{}},_u={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ey;function XS(){if(Ey)return _u;Ey=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,c,f){var p=null;if(f!==void 0&&(p=""+f),c.key!==void 0&&(p=""+c.key),"key"in c){f={};for(var T in c)T!=="key"&&(f[T]=c[T])}else f=c;return c=f.ref,{$$typeof:n,type:s,key:p,ref:c!==void 0?c:null,props:f}}return _u.Fragment=e,_u.jsx=t,_u.jsxs=t,_u}var _y;function WS(){return _y||(_y=1,K1.exports=XS()),K1.exports}var v=WS(),Q1={exports:{}},Et={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wy;function KS(){if(wy)return Et;wy=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),p=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),M=Symbol.iterator;function B(ie){return ie===null||typeof ie!="object"?null:(ie=M&&ie[M]||ie["@@iterator"],typeof ie=="function"?ie:null)}var W={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$=Object.assign,q={};function _e(ie,Ae,Ve){this.props=ie,this.context=Ae,this.refs=q,this.updater=Ve||W}_e.prototype.isReactComponent={},_e.prototype.setState=function(ie,Ae){if(typeof ie!="object"&&typeof ie!="function"&&ie!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ie,Ae,"setState")},_e.prototype.forceUpdate=function(ie){this.updater.enqueueForceUpdate(this,ie,"forceUpdate")};function ae(){}ae.prototype=_e.prototype;function Q(ie,Ae,Ve){this.props=ie,this.context=Ae,this.refs=q,this.updater=Ve||W}var le=Q.prototype=new ae;le.constructor=Q,$(le,_e.prototype),le.isPureReactComponent=!0;var De=Array.isArray;function Oe(){}var j={H:null,A:null,T:null,S:null},H=Object.prototype.hasOwnProperty;function V(ie,Ae,Ve){var je=Ve.ref;return{$$typeof:n,type:ie,key:Ae,ref:je!==void 0?je:null,props:Ve}}function Y(ie,Ae){return V(ie.type,Ae,ie.props)}function Z(ie){return typeof ie=="object"&&ie!==null&&ie.$$typeof===n}function J(ie){var Ae={"=":"=0",":":"=2"};return"$"+ie.replace(/[=:]/g,function(Ve){return Ae[Ve]})}var K=/\/+/g;function $e(ie,Ae){return typeof ie=="object"&&ie!==null&&ie.key!=null?J(""+ie.key):Ae.toString(36)}function fe(ie){switch(ie.status){case"fulfilled":return ie.value;case"rejected":throw ie.reason;default:switch(typeof ie.status=="string"?ie.then(Oe,Oe):(ie.status="pending",ie.then(function(Ae){ie.status==="pending"&&(ie.status="fulfilled",ie.value=Ae)},function(Ae){ie.status==="pending"&&(ie.status="rejected",ie.reason=Ae)})),ie.status){case"fulfilled":return ie.value;case"rejected":throw ie.reason}}throw ie}function me(ie,Ae,Ve,je,rt){var Pe=typeof ie;(Pe==="undefined"||Pe==="boolean")&&(ie=null);var wt=!1;if(ie===null)wt=!0;else switch(Pe){case"bigint":case"string":case"number":wt=!0;break;case"object":switch(ie.$$typeof){case n:case e:wt=!0;break;case C:return wt=ie._init,me(wt(ie._payload),Ae,Ve,je,rt)}}if(wt)return rt=rt(ie),wt=je===""?"."+$e(ie,0):je,De(rt)?(Ve="",wt!=null&&(Ve=wt.replace(K,"$&/")+"/"),me(rt,Ae,Ve,"",function(kr){return kr})):rt!=null&&(Z(rt)&&(rt=Y(rt,Ve+(rt.key==null||ie&&ie.key===rt.key?"":(""+rt.key).replace(K,"$&/")+"/")+wt)),Ae.push(rt)),1;wt=0;var vt=je===""?".":je+":";if(De(ie))for(var en=0;en<ie.length;en++)je=ie[en],Pe=vt+$e(je,en),wt+=me(je,Ae,Ve,Pe,rt);else if(en=B(ie),typeof en=="function")for(ie=en.call(ie),en=0;!(je=ie.next()).done;)je=je.value,Pe=vt+$e(je,en++),wt+=me(je,Ae,Ve,Pe,rt);else if(Pe==="object"){if(typeof ie.then=="function")return me(fe(ie),Ae,Ve,je,rt);throw Ae=String(ie),Error("Objects are not valid as a React child (found: "+(Ae==="[object Object]"?"object with keys {"+Object.keys(ie).join(", ")+"}":Ae)+"). If you meant to render a collection of children, use an array instead.")}return wt}function be(ie,Ae,Ve){if(ie==null)return ie;var je=[],rt=0;return me(ie,je,"","",function(Pe){return Ae.call(Ve,Pe,rt++)}),je}function Ge(ie){if(ie._status===-1){var Ae=ie._result;Ae=Ae(),Ae.then(function(Ve){(ie._status===0||ie._status===-1)&&(ie._status=1,ie._result=Ve)},function(Ve){(ie._status===0||ie._status===-1)&&(ie._status=2,ie._result=Ve)}),ie._status===-1&&(ie._status=0,ie._result=Ae)}if(ie._status===1)return ie._result.default;throw ie._result}var lt=typeof reportError=="function"?reportError:function(ie){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ie=="object"&&ie!==null&&typeof ie.message=="string"?String(ie.message):String(ie),error:ie});if(!window.dispatchEvent(Ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ie);return}console.error(ie)},xt={map:be,forEach:function(ie,Ae,Ve){be(ie,function(){Ae.apply(this,arguments)},Ve)},count:function(ie){var Ae=0;return be(ie,function(){Ae++}),Ae},toArray:function(ie){return be(ie,function(Ae){return Ae})||[]},only:function(ie){if(!Z(ie))throw Error("React.Children.only expected to receive a single React element child.");return ie}};return Et.Activity=I,Et.Children=xt,Et.Component=_e,Et.Fragment=t,Et.Profiler=c,Et.PureComponent=Q,Et.StrictMode=s,Et.Suspense=w,Et.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,Et.__COMPILER_RUNTIME={__proto__:null,c:function(ie){return j.H.useMemoCache(ie)}},Et.cache=function(ie){return function(){return ie.apply(null,arguments)}},Et.cacheSignal=function(){return null},Et.cloneElement=function(ie,Ae,Ve){if(ie==null)throw Error("The argument must be a React element, but you passed "+ie+".");var je=$({},ie.props),rt=ie.key;if(Ae!=null)for(Pe in Ae.key!==void 0&&(rt=""+Ae.key),Ae)!H.call(Ae,Pe)||Pe==="key"||Pe==="__self"||Pe==="__source"||Pe==="ref"&&Ae.ref===void 0||(je[Pe]=Ae[Pe]);var Pe=arguments.length-2;if(Pe===1)je.children=Ve;else if(1<Pe){for(var wt=Array(Pe),vt=0;vt<Pe;vt++)wt[vt]=arguments[vt+2];je.children=wt}return V(ie.type,rt,je)},Et.createContext=function(ie){return ie={$$typeof:p,_currentValue:ie,_currentValue2:ie,_threadCount:0,Provider:null,Consumer:null},ie.Provider=ie,ie.Consumer={$$typeof:f,_context:ie},ie},Et.createElement=function(ie,Ae,Ve){var je,rt={},Pe=null;if(Ae!=null)for(je in Ae.key!==void 0&&(Pe=""+Ae.key),Ae)H.call(Ae,je)&&je!=="key"&&je!=="__self"&&je!=="__source"&&(rt[je]=Ae[je]);var wt=arguments.length-2;if(wt===1)rt.children=Ve;else if(1<wt){for(var vt=Array(wt),en=0;en<wt;en++)vt[en]=arguments[en+2];rt.children=vt}if(ie&&ie.defaultProps)for(je in wt=ie.defaultProps,wt)rt[je]===void 0&&(rt[je]=wt[je]);return V(ie,Pe,rt)},Et.createRef=function(){return{current:null}},Et.forwardRef=function(ie){return{$$typeof:T,render:ie}},Et.isValidElement=Z,Et.lazy=function(ie){return{$$typeof:C,_payload:{_status:-1,_result:ie},_init:Ge}},Et.memo=function(ie,Ae){return{$$typeof:E,type:ie,compare:Ae===void 0?null:Ae}},Et.startTransition=function(ie){var Ae=j.T,Ve={};j.T=Ve;try{var je=ie(),rt=j.S;rt!==null&&rt(Ve,je),typeof je=="object"&&je!==null&&typeof je.then=="function"&&je.then(Oe,lt)}catch(Pe){lt(Pe)}finally{Ae!==null&&Ve.types!==null&&(Ae.types=Ve.types),j.T=Ae}},Et.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},Et.use=function(ie){return j.H.use(ie)},Et.useActionState=function(ie,Ae,Ve){return j.H.useActionState(ie,Ae,Ve)},Et.useCallback=function(ie,Ae){return j.H.useCallback(ie,Ae)},Et.useContext=function(ie){return j.H.useContext(ie)},Et.useDebugValue=function(){},Et.useDeferredValue=function(ie,Ae){return j.H.useDeferredValue(ie,Ae)},Et.useEffect=function(ie,Ae){return j.H.useEffect(ie,Ae)},Et.useEffectEvent=function(ie){return j.H.useEffectEvent(ie)},Et.useId=function(){return j.H.useId()},Et.useImperativeHandle=function(ie,Ae,Ve){return j.H.useImperativeHandle(ie,Ae,Ve)},Et.useInsertionEffect=function(ie,Ae){return j.H.useInsertionEffect(ie,Ae)},Et.useLayoutEffect=function(ie,Ae){return j.H.useLayoutEffect(ie,Ae)},Et.useMemo=function(ie,Ae){return j.H.useMemo(ie,Ae)},Et.useOptimistic=function(ie,Ae){return j.H.useOptimistic(ie,Ae)},Et.useReducer=function(ie,Ae,Ve){return j.H.useReducer(ie,Ae,Ve)},Et.useRef=function(ie){return j.H.useRef(ie)},Et.useState=function(ie){return j.H.useState(ie)},Et.useSyncExternalStore=function(ie,Ae,Ve){return j.H.useSyncExternalStore(ie,Ae,Ve)},Et.useTransition=function(){return j.H.useTransition()},Et.version="19.2.3",Et}var Ay;function fm(){return Ay||(Ay=1,Q1.exports=KS()),Q1.exports}var re=fm();const nr=hm(re);var Z1={exports:{}},wu={},J1={exports:{}},$1={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var by;function QS(){return by||(by=1,(function(n){function e(me,be){var Ge=me.length;me.push(be);e:for(;0<Ge;){var lt=Ge-1>>>1,xt=me[lt];if(0<c(xt,be))me[lt]=be,me[Ge]=xt,Ge=lt;else break e}}function t(me){return me.length===0?null:me[0]}function s(me){if(me.length===0)return null;var be=me[0],Ge=me.pop();if(Ge!==be){me[0]=Ge;e:for(var lt=0,xt=me.length,ie=xt>>>1;lt<ie;){var Ae=2*(lt+1)-1,Ve=me[Ae],je=Ae+1,rt=me[je];if(0>c(Ve,Ge))je<xt&&0>c(rt,Ve)?(me[lt]=rt,me[je]=Ge,lt=je):(me[lt]=Ve,me[Ae]=Ge,lt=Ae);else if(je<xt&&0>c(rt,Ge))me[lt]=rt,me[je]=Ge,lt=je;else break e}}return be}function c(me,be){var Ge=me.sortIndex-be.sortIndex;return Ge!==0?Ge:me.id-be.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;n.unstable_now=function(){return f.now()}}else{var p=Date,T=p.now();n.unstable_now=function(){return p.now()-T}}var w=[],E=[],C=1,I=null,M=3,B=!1,W=!1,$=!1,q=!1,_e=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function le(me){for(var be=t(E);be!==null;){if(be.callback===null)s(E);else if(be.startTime<=me)s(E),be.sortIndex=be.expirationTime,e(w,be);else break;be=t(E)}}function De(me){if($=!1,le(me),!W)if(t(w)!==null)W=!0,Oe||(Oe=!0,J());else{var be=t(E);be!==null&&fe(De,be.startTime-me)}}var Oe=!1,j=-1,H=5,V=-1;function Y(){return q?!0:!(n.unstable_now()-V<H)}function Z(){if(q=!1,Oe){var me=n.unstable_now();V=me;var be=!0;try{e:{W=!1,$&&($=!1,ae(j),j=-1),B=!0;var Ge=M;try{t:{for(le(me),I=t(w);I!==null&&!(I.expirationTime>me&&Y());){var lt=I.callback;if(typeof lt=="function"){I.callback=null,M=I.priorityLevel;var xt=lt(I.expirationTime<=me);if(me=n.unstable_now(),typeof xt=="function"){I.callback=xt,le(me),be=!0;break t}I===t(w)&&s(w),le(me)}else s(w);I=t(w)}if(I!==null)be=!0;else{var ie=t(E);ie!==null&&fe(De,ie.startTime-me),be=!1}}break e}finally{I=null,M=Ge,B=!1}be=void 0}}finally{be?J():Oe=!1}}}var J;if(typeof Q=="function")J=function(){Q(Z)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,$e=K.port2;K.port1.onmessage=Z,J=function(){$e.postMessage(null)}}else J=function(){_e(Z,0)};function fe(me,be){j=_e(function(){me(n.unstable_now())},be)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(me){me.callback=null},n.unstable_forceFrameRate=function(me){0>me||125<me?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<me?Math.floor(1e3/me):5},n.unstable_getCurrentPriorityLevel=function(){return M},n.unstable_next=function(me){switch(M){case 1:case 2:case 3:var be=3;break;default:be=M}var Ge=M;M=be;try{return me()}finally{M=Ge}},n.unstable_requestPaint=function(){q=!0},n.unstable_runWithPriority=function(me,be){switch(me){case 1:case 2:case 3:case 4:case 5:break;default:me=3}var Ge=M;M=me;try{return be()}finally{M=Ge}},n.unstable_scheduleCallback=function(me,be,Ge){var lt=n.unstable_now();switch(typeof Ge=="object"&&Ge!==null?(Ge=Ge.delay,Ge=typeof Ge=="number"&&0<Ge?lt+Ge:lt):Ge=lt,me){case 1:var xt=-1;break;case 2:xt=250;break;case 5:xt=1073741823;break;case 4:xt=1e4;break;default:xt=5e3}return xt=Ge+xt,me={id:C++,callback:be,priorityLevel:me,startTime:Ge,expirationTime:xt,sortIndex:-1},Ge>lt?(me.sortIndex=Ge,e(E,me),t(w)===null&&me===t(E)&&($?(ae(j),j=-1):$=!0,fe(De,Ge-lt))):(me.sortIndex=xt,e(w,me),W||B||(W=!0,Oe||(Oe=!0,J()))),me},n.unstable_shouldYield=Y,n.unstable_wrapCallback=function(me){var be=M;return function(){var Ge=M;M=be;try{return me.apply(this,arguments)}finally{M=Ge}}}})($1)),$1}var Ty;function ZS(){return Ty||(Ty=1,J1.exports=QS()),J1.exports}var eg={exports:{}},ii={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vy;function JS(){if(vy)return ii;vy=1;var n=fm();function e(w){var E="https://react.dev/errors/"+w;if(1<arguments.length){E+="?args[]="+encodeURIComponent(arguments[1]);for(var C=2;C<arguments.length;C++)E+="&args[]="+encodeURIComponent(arguments[C])}return"Minified React error #"+w+"; visit "+E+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},c=Symbol.for("react.portal");function f(w,E,C){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:I==null?null:""+I,children:w,containerInfo:E,implementation:C}}var p=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function T(w,E){if(w==="font")return"";if(typeof E=="string")return E==="use-credentials"?E:""}return ii.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,ii.createPortal=function(w,E){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!E||E.nodeType!==1&&E.nodeType!==9&&E.nodeType!==11)throw Error(e(299));return f(w,E,null,C)},ii.flushSync=function(w){var E=p.T,C=s.p;try{if(p.T=null,s.p=2,w)return w()}finally{p.T=E,s.p=C,s.d.f()}},ii.preconnect=function(w,E){typeof w=="string"&&(E?(E=E.crossOrigin,E=typeof E=="string"?E==="use-credentials"?E:"":void 0):E=null,s.d.C(w,E))},ii.prefetchDNS=function(w){typeof w=="string"&&s.d.D(w)},ii.preinit=function(w,E){if(typeof w=="string"&&E&&typeof E.as=="string"){var C=E.as,I=T(C,E.crossOrigin),M=typeof E.integrity=="string"?E.integrity:void 0,B=typeof E.fetchPriority=="string"?E.fetchPriority:void 0;C==="style"?s.d.S(w,typeof E.precedence=="string"?E.precedence:void 0,{crossOrigin:I,integrity:M,fetchPriority:B}):C==="script"&&s.d.X(w,{crossOrigin:I,integrity:M,fetchPriority:B,nonce:typeof E.nonce=="string"?E.nonce:void 0})}},ii.preinitModule=function(w,E){if(typeof w=="string")if(typeof E=="object"&&E!==null){if(E.as==null||E.as==="script"){var C=T(E.as,E.crossOrigin);s.d.M(w,{crossOrigin:C,integrity:typeof E.integrity=="string"?E.integrity:void 0,nonce:typeof E.nonce=="string"?E.nonce:void 0})}}else E==null&&s.d.M(w)},ii.preload=function(w,E){if(typeof w=="string"&&typeof E=="object"&&E!==null&&typeof E.as=="string"){var C=E.as,I=T(C,E.crossOrigin);s.d.L(w,C,{crossOrigin:I,integrity:typeof E.integrity=="string"?E.integrity:void 0,nonce:typeof E.nonce=="string"?E.nonce:void 0,type:typeof E.type=="string"?E.type:void 0,fetchPriority:typeof E.fetchPriority=="string"?E.fetchPriority:void 0,referrerPolicy:typeof E.referrerPolicy=="string"?E.referrerPolicy:void 0,imageSrcSet:typeof E.imageSrcSet=="string"?E.imageSrcSet:void 0,imageSizes:typeof E.imageSizes=="string"?E.imageSizes:void 0,media:typeof E.media=="string"?E.media:void 0})}},ii.preloadModule=function(w,E){if(typeof w=="string")if(E){var C=T(E.as,E.crossOrigin);s.d.m(w,{as:typeof E.as=="string"&&E.as!=="script"?E.as:void 0,crossOrigin:C,integrity:typeof E.integrity=="string"?E.integrity:void 0})}else s.d.m(w)},ii.requestFormReset=function(w){s.d.r(w)},ii.unstable_batchedUpdates=function(w,E){return w(E)},ii.useFormState=function(w,E,C){return p.H.useFormState(w,E,C)},ii.useFormStatus=function(){return p.H.useHostTransitionStatus()},ii.version="19.2.3",ii}var Sy;function $S(){if(Sy)return eg.exports;Sy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),eg.exports=JS(),eg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cy;function eC(){if(Cy)return wu;Cy=1;var n=ZS(),e=fm(),t=$S();function s(r){var a="https://react.dev/errors/"+r;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function f(r){var a=r,u=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(u=a.return),r=a.return;while(r)}return a.tag===3?u:null}function p(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function T(r){if(r.tag===31){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function w(r){if(f(r)!==r)throw Error(s(188))}function E(r){var a=r.alternate;if(!a){if(a=f(r),a===null)throw Error(s(188));return a!==r?null:r}for(var u=r,g=a;;){var _=u.return;if(_===null)break;var b=_.alternate;if(b===null){if(g=_.return,g!==null){u=g;continue}break}if(_.child===b.child){for(b=_.child;b;){if(b===u)return w(_),r;if(b===g)return w(_),a;b=b.sibling}throw Error(s(188))}if(u.return!==g.return)u=_,g=b;else{for(var O=!1,U=_.child;U;){if(U===u){O=!0,u=_,g=b;break}if(U===g){O=!0,g=_,u=b;break}U=U.sibling}if(!O){for(U=b.child;U;){if(U===u){O=!0,u=b,g=_;break}if(U===g){O=!0,g=b,u=_;break}U=U.sibling}if(!O)throw Error(s(189))}}if(u.alternate!==g)throw Error(s(190))}if(u.tag!==3)throw Error(s(188));return u.stateNode.current===u?r:a}function C(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r;for(r=r.child;r!==null;){if(a=C(r),a!==null)return a;r=r.sibling}return null}var I=Object.assign,M=Symbol.for("react.element"),B=Symbol.for("react.transitional.element"),W=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),_e=Symbol.for("react.profiler"),ae=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),le=Symbol.for("react.forward_ref"),De=Symbol.for("react.suspense"),Oe=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),Y=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function J(r){return r===null||typeof r!="object"?null:(r=Z&&r[Z]||r["@@iterator"],typeof r=="function"?r:null)}var K=Symbol.for("react.client.reference");function $e(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===K?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case $:return"Fragment";case _e:return"Profiler";case q:return"StrictMode";case De:return"Suspense";case Oe:return"SuspenseList";case V:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case W:return"Portal";case Q:return r.displayName||"Context";case ae:return(r._context.displayName||"Context")+".Consumer";case le:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case j:return a=r.displayName||null,a!==null?a:$e(r.type)||"Memo";case H:a=r._payload,r=r._init;try{return $e(r(a))}catch{}}return null}var fe=Array.isArray,me=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ge={pending:!1,data:null,method:null,action:null},lt=[],xt=-1;function ie(r){return{current:r}}function Ae(r){0>xt||(r.current=lt[xt],lt[xt]=null,xt--)}function Ve(r,a){xt++,lt[xt]=r.current,r.current=a}var je=ie(null),rt=ie(null),Pe=ie(null),wt=ie(null);function vt(r,a){switch(Ve(Pe,a),Ve(rt,r),Ve(je,null),a.nodeType){case 9:case 11:r=(r=a.documentElement)&&(r=r.namespaceURI)?Hx(r):0;break;default:if(r=a.tagName,a=a.namespaceURI)a=Hx(a),r=zx(a,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}Ae(je),Ve(je,r)}function en(){Ae(je),Ae(rt),Ae(Pe)}function kr(r){r.memoizedState!==null&&Ve(wt,r);var a=je.current,u=zx(a,r.type);a!==u&&(Ve(rt,r),Ve(je,u))}function ln(r){rt.current===r&&(Ae(je),Ae(rt)),wt.current===r&&(Ae(wt),pu._currentValue=Ge)}var ci,At;function hr(r){if(ci===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);ci=a&&a[1]||"",At=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ci+r+At}var ir=!1;function Wr(r,a){if(!r||ir)return"";ir=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(a){var Ce=function(){throw Error()};if(Object.defineProperty(Ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ce,[])}catch(we){var pe=we}Reflect.construct(r,[],Ce)}else{try{Ce.call()}catch(we){pe=we}r.call(Ce.prototype)}}else{try{throw Error()}catch(we){pe=we}(Ce=r())&&typeof Ce.catch=="function"&&Ce.catch(function(){})}}catch(we){if(we&&pe&&typeof we.stack=="string")return[we.stack,pe.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=g.DetermineComponentFrameRoot(),O=b[0],U=b[1];if(O&&U){var ee=O.split(`
`),ge=U.split(`
`);for(_=g=0;g<ee.length&&!ee[g].includes("DetermineComponentFrameRoot");)g++;for(;_<ge.length&&!ge[_].includes("DetermineComponentFrameRoot");)_++;if(g===ee.length||_===ge.length)for(g=ee.length-1,_=ge.length-1;1<=g&&0<=_&&ee[g]!==ge[_];)_--;for(;1<=g&&0<=_;g--,_--)if(ee[g]!==ge[_]){if(g!==1||_!==1)do if(g--,_--,0>_||ee[g]!==ge[_]){var Te=`
`+ee[g].replace(" at new "," at ");return r.displayName&&Te.includes("<anonymous>")&&(Te=Te.replace("<anonymous>",r.displayName)),Te}while(1<=g&&0<=_);break}}}finally{ir=!1,Error.prepareStackTrace=u}return(u=r?r.displayName||r.name:"")?hr(u):""}function wn(r,a){switch(r.tag){case 26:case 27:case 5:return hr(r.type);case 16:return hr("Lazy");case 13:return r.child!==a&&a!==null?hr("Suspense Fallback"):hr("Suspense");case 19:return hr("SuspenseList");case 0:case 15:return Wr(r.type,!1);case 11:return Wr(r.type.render,!1);case 1:return Wr(r.type,!0);case 31:return hr("Activity");default:return""}}function qt(r){try{var a="",u=null;do a+=wn(r,u),u=r,r=r.return;while(r);return a}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var Ze=Object.prototype.hasOwnProperty,An=n.unstable_scheduleCallback,He=n.unstable_cancelCallback,As=n.unstable_shouldYield,es=n.unstable_requestPaint,mn=n.unstable_now,ui=n.unstable_getCurrentPriorityLevel,fr=n.unstable_ImmediatePriority,Kr=n.unstable_UserBlockingPriority,sr=n.unstable_NormalPriority,Kn=n.unstable_LowPriority,Ls=n.unstable_IdlePriority,ts=n.log,ta=n.unstable_setDisableYieldValue,Yt=null,Me=null;function Xt(r){if(typeof ts=="function"&&ta(r),Me&&typeof Me.setStrictMode=="function")try{Me.setStrictMode(Yt,r)}catch{}}var st=Math.clz32?Math.clz32:bs,sn=Math.log,hi=Math.LN2;function bs(r){return r>>>=0,r===0?32:31-(sn(r)/hi|0)|0}var Qr=256,bt=262144,an=4194304;function Zr(r){var a=r&42;if(a!==0)return a;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Jr(r,a,u){var g=r.pendingLanes;if(g===0)return 0;var _=0,b=r.suspendedLanes,O=r.pingedLanes;r=r.warmLanes;var U=g&134217727;return U!==0?(g=U&~b,g!==0?_=Zr(g):(O&=U,O!==0?_=Zr(O):u||(u=U&~r,u!==0&&(_=Zr(u))))):(U=g&~b,U!==0?_=Zr(U):O!==0?_=Zr(O):u||(u=g&~r,u!==0&&(_=Zr(u)))),_===0?0:a!==0&&a!==_&&(a&b)===0&&(b=_&-_,u=a&-a,b>=u||b===32&&(u&4194048)!==0)?a:_}function Cn(r,a){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&a)===0}function Ps(r,a){switch(r){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pn(){var r=an;return an<<=1,(an&62914560)===0&&(an=4194304),r}function dr(r){for(var a=[],u=0;31>u;u++)a.push(r);return a}function fi(r,a){r.pendingLanes|=a,a!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Br(r,a,u,g,_,b){var O=r.pendingLanes;r.pendingLanes=u,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=u,r.entangledLanes&=u,r.errorRecoveryDisabledLanes&=u,r.shellSuspendCounter=0;var U=r.entanglements,ee=r.expirationTimes,ge=r.hiddenUpdates;for(u=O&~u;0<u;){var Te=31-st(u),Ce=1<<Te;U[Te]=0,ee[Te]=-1;var pe=ge[Te];if(pe!==null)for(ge[Te]=null,Te=0;Te<pe.length;Te++){var we=pe[Te];we!==null&&(we.lane&=-536870913)}u&=~Ce}g!==0&&ki(r,g,0),b!==0&&_===0&&r.tag!==0&&(r.suspendedLanes|=b&~(O&~a))}function ki(r,a,u){r.pendingLanes|=a,r.suspendedLanes&=~a;var g=31-st(a);r.entangledLanes|=a,r.entanglements[g]=r.entanglements[g]|1073741824|u&261930}function $r(r,a){var u=r.entangledLanes|=a;for(r=r.entanglements;u;){var g=31-st(u),_=1<<g;_&a|r[g]&a&&(r[g]|=a),u&=~_}}function ns(r,a){var u=a&-a;return u=(u&42)!==0?1:kn(u),(u&(r.suspendedLanes|a))!==0?0:u}function kn(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function br(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Tr(){var r=be.p;return r!==0?r:(r=window.event,r===void 0?32:fy(r.type))}function Fe(r,a){var u=be.p;try{return be.p=r,a()}finally{be.p=u}}var gr=Math.random().toString(36).slice(2),bn="__reactFiber$"+gr,Wt="__reactProps$"+gr,vr="__reactContainer$"+gr,Bi="__reactEvents$"+gr,Ts="__reactListeners$"+gr,Ur="__reactHandles$"+gr,na="__reactResources$"+gr,Ai="__reactMarker$"+gr;function Sr(r){delete r[bn],delete r[Wt],delete r[Bi],delete r[Ts],delete r[Ur]}function pn(r){var a=r[bn];if(a)return a;for(var u=r.parentNode;u;){if(a=u[vr]||u[bn]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(r=Qx(r);r!==null;){if(u=r[bn])return u;r=Qx(r)}return a}r=u,u=r.parentNode}return null}function Dt(r){if(r=r[bn]||r[vr]){var a=r.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return r}return null}function Or(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r.stateNode;throw Error(s(33))}function ar(r){var a=r[na];return a||(a=r[na]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function In(r){r[Ai]=!0}var Ie=new Set,ra={};function Kt(r,a){Cr(r,a),Cr(r+"Capture",a)}function Cr(r,a){for(ra[r]=a,r=0;r<a.length;r++)Ie.add(a[r])}var ia=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Mt={},X={};function Ue(r){return Ze.call(X,r)?!0:Ze.call(Mt,r)?!1:ia.test(r)?X[r]=!0:(Mt[r]=!0,!1)}function Ke(r,a,u){if(Ue(a))if(u===null)r.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":r.removeAttribute(a);return;case"boolean":var g=a.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){r.removeAttribute(a);return}}r.setAttribute(a,""+u)}}function St(r,a,u){if(u===null)r.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttribute(a,""+u)}}function Ct(r,a,u,g){if(g===null)r.removeAttribute(u);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(u);return}r.setAttributeNS(a,u,""+g)}}function ht(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Qn(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function sa(r,a,u){var g=Object.getOwnPropertyDescriptor(r.constructor.prototype,a);if(!r.hasOwnProperty(a)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var _=g.get,b=g.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return _.call(this)},set:function(O){u=""+O,b.call(this,O)}}),Object.defineProperty(r,a,{enumerable:g.enumerable}),{getValue:function(){return u},setValue:function(O){u=""+O},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function it(r){if(!r._valueTracker){var a=Qn(r)?"checked":"value";r._valueTracker=sa(r,a,""+r[a])}}function Bn(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var u=a.getValue(),g="";return r&&(g=Qn(r)?r.checked?"true":"false":r.value),r=g,r!==u?(a.setValue(r),!0):!1}function di(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Hn=/[\n"\\]/g;function It(r){return r.replace(Hn,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function zn(r,a,u,g,_,b,O,U){r.name="",O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?r.type=O:r.removeAttribute("type"),a!=null?O==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+ht(a)):r.value!==""+ht(a)&&(r.value=""+ht(a)):O!=="submit"&&O!=="reset"||r.removeAttribute("value"),a!=null?z(r,O,ht(a)):u!=null?z(r,O,ht(u)):g!=null&&r.removeAttribute("value"),_==null&&b!=null&&(r.defaultChecked=!!b),_!=null&&(r.checked=_&&typeof _!="function"&&typeof _!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?r.name=""+ht(U):r.removeAttribute("name")}function he(r,a,u,g,_,b,O,U){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(r.type=b),a!=null||u!=null){if(!(b!=="submit"&&b!=="reset"||a!=null)){it(r);return}u=u!=null?""+ht(u):"",a=a!=null?""+ht(a):u,U||a===r.value||(r.value=a),r.defaultValue=a}g=g??_,g=typeof g!="function"&&typeof g!="symbol"&&!!g,r.checked=U?r.checked:!!g,r.defaultChecked=!!g,O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(r.name=O),it(r)}function z(r,a,u){a==="number"&&di(r.ownerDocument)===r||r.defaultValue===""+u||(r.defaultValue=""+u)}function Xe(r,a,u,g){if(r=r.options,a){a={};for(var _=0;_<u.length;_++)a["$"+u[_]]=!0;for(u=0;u<r.length;u++)_=a.hasOwnProperty("$"+r[u].value),r[u].selected!==_&&(r[u].selected=_),_&&g&&(r[u].defaultSelected=!0)}else{for(u=""+ht(u),a=null,_=0;_<r.length;_++){if(r[_].value===u){r[_].selected=!0,g&&(r[_].defaultSelected=!0);return}a!==null||r[_].disabled||(a=r[_])}a!==null&&(a.selected=!0)}}function Gn(r,a,u){if(a!=null&&(a=""+ht(a),a!==r.value&&(r.value=a),u==null)){r.defaultValue!==a&&(r.defaultValue=a);return}r.defaultValue=u!=null?""+ht(u):""}function or(r,a,u,g){if(a==null){if(g!=null){if(u!=null)throw Error(s(92));if(fe(g)){if(1<g.length)throw Error(s(93));g=g[0]}u=g}u==null&&(u=""),a=u}u=ht(a),r.defaultValue=u,g=r.textContent,g===u&&g!==""&&g!==null&&(r.value=g),it(r)}function ei(r,a){if(a){var u=r.firstChild;if(u&&u===r.lastChild&&u.nodeType===3){u.nodeValue=a;return}}r.textContent=a}var Qa=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Dr(r,a,u){var g=a.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?g?r.setProperty(a,""):a==="float"?r.cssFloat="":r[a]="":g?r.setProperty(a,u):typeof u!="number"||u===0||Qa.has(a)?a==="float"?r.cssFloat=u:r[a]=(""+u).trim():r[a]=u+"px"}function Je(r,a,u){if(a!=null&&typeof a!="object")throw Error(s(62));if(r=r.style,u!=null){for(var g in u)!u.hasOwnProperty(g)||a!=null&&a.hasOwnProperty(g)||(g.indexOf("--")===0?r.setProperty(g,""):g==="float"?r.cssFloat="":r[g]="");for(var _ in a)g=a[_],a.hasOwnProperty(_)&&u[_]!==g&&Dr(r,_,g)}else for(var b in a)a.hasOwnProperty(b)&&Dr(r,b,a[b])}function cn(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ks=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Bs(r){return ks.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function ti(){}var aa=null;function bi(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Tn=null,ni=null;function ri(r){var a=Dt(r);if(a&&(r=a.stateNode)){var u=r[Wt]||null;e:switch(r=a.stateNode,a.type){case"input":if(zn(r,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),a=u.name,u.type==="radio"&&a!=null){for(u=r;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+It(""+a)+'"][type="radio"]'),a=0;a<u.length;a++){var g=u[a];if(g!==r&&g.form===r.form){var _=g[Wt]||null;if(!_)throw Error(s(90));zn(g,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(a=0;a<u.length;a++)g=u[a],g.form===r.form&&Bn(g)}break e;case"textarea":Gn(r,u.value,u.defaultValue);break e;case"select":a=u.value,a!=null&&Xe(r,!!u.multiple,a,!1)}}}var et=!1;function Us(r,a,u){if(et)return r(a,u);et=!0;try{var g=r(a);return g}finally{if(et=!1,(Tn!==null||ni!==null)&&(ef(),Tn&&(a=Tn,r=ni,ni=Tn=null,ri(a),r)))for(a=0;a<r.length;a++)ri(r[a])}}function at(r,a){var u=r.stateNode;if(u===null)return null;var g=u[Wt]||null;if(g===null)return null;u=g[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(r=r.type,g=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!g;break e;default:r=!1}if(r)return null;if(u&&typeof u!="function")throw Error(s(231,a,typeof u));return u}var un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oa=!1;if(un)try{var tn={};Object.defineProperty(tn,"passive",{get:function(){oa=!0}}),window.addEventListener("test",tn,tn),window.removeEventListener("test",tn,tn)}catch{oa=!1}var Ui=null,Vi=null,la=null;function vs(){if(la)return la;var r,a=Vi,u=a.length,g,_="value"in Ui?Ui.value:Ui.textContent,b=_.length;for(r=0;r<u&&a[r]===_[r];r++);var O=u-r;for(g=1;g<=O&&a[u-g]===_[b-g];g++);return la=_.slice(r,1<g?1-g:void 0)}function ji(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function gi(){return!0}function Ti(){return!1}function qn(r){function a(u,g,_,b,O){this._reactName=u,this._targetInst=_,this.type=g,this.nativeEvent=b,this.target=O,this.currentTarget=null;for(var U in r)r.hasOwnProperty(U)&&(u=r[U],this[U]=u?u(b):b[U]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?gi:Ti,this.isPropagationStopped=Ti,this}return I(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=gi)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=gi)},persist:function(){},isPersistent:gi}),a}var mi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rn=qn(mi),Ss=I({},mi,{view:0,detail:0}),Za=qn(Ss),Cs,Ja,rs,$a=I({},Ss,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ss,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==rs&&(rs&&r.type==="mousemove"?(Cs=r.screenX-rs.screenX,Ja=r.screenY-rs.screenY):Ja=Cs=0,rs=r),Cs)},movementY:function(r){return"movementY"in r?r.movementY:Ja}}),Jt=qn($a),Vs=I({},$a,{dataTransfer:0}),ca=qn(Vs),Fi=I({},Ss,{relatedTarget:0}),ua=qn(Fi),xe=I({},mi,{animationName:0,elapsedTime:0,pseudoElement:0}),yt=qn(xe),Un=I({},mi,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),ha=qn(Un),Jo=I({},mi,{data:0}),is=qn(Jo),Dl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ml={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vn(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=eo[r])?!!a[r]:!1}function ss(){return Vn}var Lt=I({},Ss,{key:function(r){if(r.key){var a=Dl[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=ji(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Ml[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ss,charCode:function(r){return r.type==="keypress"?ji(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ji(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),fa=qn(Lt),as=I({},$a,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pt=qn(as),x=I({},Ss,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ss}),N=qn(x),D=I({},mi,{propertyName:0,elapsedTime:0,pseudoElement:0}),F=qn(D),ce=I({},$a,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Ee=qn(ce),Be=I({},mi,{newState:0,oldState:0}),ft=qn(Be),jn=[9,13,27,32],Qt=un&&"CompositionEvent"in window,vn=null;un&&"documentMode"in document&&(vn=document.documentMode);var pi=un&&"TextEvent"in window&&!vn,os=un&&(!Qt||vn&&8<vn&&11>=vn),Mr=" ",xi=!1;function da(r,a){switch(r){case"keyup":return jn.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ls(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var to=!1;function js(r,a){switch(r){case"compositionend":return ls(a);case"keypress":return a.which!==32?null:(xi=!0,Mr);case"textInput":return r=a.data,r===Mr&&xi?null:r;default:return null}}function Ll(r,a){if(to)return r==="compositionend"||!Qt&&da(r,a)?(r=vs(),la=Vi=Ui=null,to=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return os&&a.locale!=="ko"?null:a.data;default:return null}}var vi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jc(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!vi[r.type]:a==="textarea"}function Hi(r,a,u,g){Tn?ni?ni.push(g):ni=[g]:Tn=g,a=lf(a,"onChange"),0<a.length&&(u=new Rn("onChange","change",null,u,g),r.push({event:u,listeners:a}))}var $o=null,ga=null;function l0(r){kx(r,0)}function el(r){var a=Or(r);if(Bn(a))return r}function zi(r,a){if(r==="change")return a}var yh=!1;if(un){var tl;if(un){var ma="oninput"in document;if(!ma){var Vt=document.createElement("div");Vt.setAttribute("oninput","return;"),ma=typeof Vt.oninput=="function"}tl=ma}else tl=!1;yh=tl&&(!document.documentMode||9<document.documentMode)}function nl(){$o&&($o.detachEvent("onpropertychange",L),ga=$o=null)}function L(r){if(r.propertyName==="value"&&el(ga)){var a=[];Hi(a,ga,r,bi(r)),Us(l0,a)}}function i(r,a,u){r==="focusin"?(nl(),$o=a,ga=u,$o.attachEvent("onpropertychange",L)):r==="focusout"&&nl()}function o(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return el(ga)}function l(r,a){if(r==="click")return el(a)}function h(r,a){if(r==="input"||r==="change")return el(a)}function d(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var m=typeof Object.is=="function"?Object.is:d;function y(r,a){if(m(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var u=Object.keys(r),g=Object.keys(a);if(u.length!==g.length)return!1;for(g=0;g<u.length;g++){var _=u[g];if(!Ze.call(a,_)||!m(r[_],a[_]))return!1}return!0}function A(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function S(r,a){var u=A(r);r=0;for(var g;u;){if(u.nodeType===3){if(g=r+u.textContent.length,r<=a&&g>=a)return{node:u,offset:a-r};r=g}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=A(u)}}function R(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?R(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function P(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var a=di(r.document);a instanceof r.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)r=a.contentWindow;else break;a=di(r.document)}return a}function k(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}var G=un&&"documentMode"in document&&11>=document.documentMode,te=null,ne=null,ue=null,ye=!1;function ke(r,a,u){var g=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;ye||te==null||te!==di(g)||(g=te,"selectionStart"in g&&k(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),ue&&y(ue,g)||(ue=g,g=lf(ne,"onSelect"),0<g.length&&(a=new Rn("onSelect","select",null,a,u),r.push({event:a,listeners:g}),a.target=te)))}function Le(r,a){var u={};return u[r.toLowerCase()]=a.toLowerCase(),u["Webkit"+r]="webkit"+a,u["Moz"+r]="moz"+a,u}var Re={animationend:Le("Animation","AnimationEnd"),animationiteration:Le("Animation","AnimationIteration"),animationstart:Le("Animation","AnimationStart"),transitionrun:Le("Transition","TransitionRun"),transitionstart:Le("Transition","TransitionStart"),transitioncancel:Le("Transition","TransitionCancel"),transitionend:Le("Transition","TransitionEnd")},Ot={},dt={};un&&(dt=document.createElement("div").style,"AnimationEvent"in window||(delete Re.animationend.animation,delete Re.animationiteration.animation,delete Re.animationstart.animation),"TransitionEvent"in window||delete Re.transitionend.transition);function Zn(r){if(Ot[r])return Ot[r];if(!Re[r])return r;var a=Re[r],u;for(u in a)if(a.hasOwnProperty(u)&&u in dt)return Ot[r]=a[u];return r}var Si=Zn("animationend"),Vr=Zn("animationiteration"),hn=Zn("animationstart"),Ir=Zn("transitionrun"),yi=Zn("transitionstart"),no=Zn("transitioncancel"),pa=Zn("transitionend"),Eh=new Map,Fc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Fc.push("scrollEnd");function Is(r,a){Eh.set(r,a),Kt(a,[r])}var _h=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},cs=[],Pl=0,c0=0;function wh(){for(var r=Pl,a=c0=Pl=0;a<r;){var u=cs[a];cs[a++]=null;var g=cs[a];cs[a++]=null;var _=cs[a];cs[a++]=null;var b=cs[a];if(cs[a++]=null,g!==null&&_!==null){var O=g.pending;O===null?_.next=_:(_.next=O.next,O.next=_),g.pending=_}b!==0&&xp(u,_,b)}}function Ah(r,a,u,g){cs[Pl++]=r,cs[Pl++]=a,cs[Pl++]=u,cs[Pl++]=g,c0|=g,r.lanes|=g,r=r.alternate,r!==null&&(r.lanes|=g)}function u0(r,a,u,g){return Ah(r,a,u,g),bh(r)}function rl(r,a){return Ah(r,null,null,a),bh(r)}function xp(r,a,u){r.lanes|=u;var g=r.alternate;g!==null&&(g.lanes|=u);for(var _=!1,b=r.return;b!==null;)b.childLanes|=u,g=b.alternate,g!==null&&(g.childLanes|=u),b.tag===22&&(r=b.stateNode,r===null||r._visibility&1||(_=!0)),r=b,b=b.return;return r.tag===3?(b=r.stateNode,_&&a!==null&&(_=31-st(u),r=b.hiddenUpdates,g=r[_],g===null?r[_]=[a]:g.push(a),a.lane=u|536870912),b):null}function bh(r){if(50<cu)throw cu=0,E1=null,Error(s(185));for(var a=r.return;a!==null;)r=a,a=r.return;return r.tag===3?r.stateNode:null}var kl={};function Nv(r,a,u,g){this.tag=r,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gi(r,a,u,g){return new Nv(r,a,u,g)}function h0(r){return r=r.prototype,!(!r||!r.isReactComponent)}function xa(r,a){var u=r.alternate;return u===null?(u=Gi(r.tag,a,r.key,r.mode),u.elementType=r.elementType,u.type=r.type,u.stateNode=r.stateNode,u.alternate=r,r.alternate=u):(u.pendingProps=a,u.type=r.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=r.flags&65011712,u.childLanes=r.childLanes,u.lanes=r.lanes,u.child=r.child,u.memoizedProps=r.memoizedProps,u.memoizedState=r.memoizedState,u.updateQueue=r.updateQueue,a=r.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=r.sibling,u.index=r.index,u.ref=r.ref,u.refCleanup=r.refCleanup,u}function yp(r,a){r.flags&=65011714;var u=r.alternate;return u===null?(r.childLanes=0,r.lanes=a,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=u.childLanes,r.lanes=u.lanes,r.child=u.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=u.memoizedProps,r.memoizedState=u.memoizedState,r.updateQueue=u.updateQueue,r.type=u.type,a=u.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),r}function Th(r,a,u,g,_,b){var O=0;if(g=r,typeof r=="function")h0(r)&&(O=1);else if(typeof r=="string")O=LS(r,u,je.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case V:return r=Gi(31,u,a,_),r.elementType=V,r.lanes=b,r;case $:return il(u.children,_,b,a);case q:O=8,_|=24;break;case _e:return r=Gi(12,u,a,_|2),r.elementType=_e,r.lanes=b,r;case De:return r=Gi(13,u,a,_),r.elementType=De,r.lanes=b,r;case Oe:return r=Gi(19,u,a,_),r.elementType=Oe,r.lanes=b,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case Q:O=10;break e;case ae:O=9;break e;case le:O=11;break e;case j:O=14;break e;case H:O=16,g=null;break e}O=29,u=Error(s(130,r===null?"null":typeof r,"")),g=null}return a=Gi(O,u,a,_),a.elementType=r,a.type=g,a.lanes=b,a}function il(r,a,u,g){return r=Gi(7,r,g,a),r.lanes=u,r}function f0(r,a,u){return r=Gi(6,r,null,a),r.lanes=u,r}function Ep(r){var a=Gi(18,null,null,0);return a.stateNode=r,a}function d0(r,a,u){return a=Gi(4,r.children!==null?r.children:[],r.key,a),a.lanes=u,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}var _p=new WeakMap;function us(r,a){if(typeof r=="object"&&r!==null){var u=_p.get(r);return u!==void 0?u:(a={value:r,source:a,stack:qt(a)},_p.set(r,a),a)}return{value:r,source:a,stack:qt(a)}}var Bl=[],Ul=0,vh=null,Hc=0,hs=[],fs=0,ro=null,Fs=1,Hs="";function ya(r,a){Bl[Ul++]=Hc,Bl[Ul++]=vh,vh=r,Hc=a}function wp(r,a,u){hs[fs++]=Fs,hs[fs++]=Hs,hs[fs++]=ro,ro=r;var g=Fs;r=Hs;var _=32-st(g)-1;g&=~(1<<_),u+=1;var b=32-st(a)+_;if(30<b){var O=_-_%5;b=(g&(1<<O)-1).toString(32),g>>=O,_-=O,Fs=1<<32-st(a)+_|u<<_|g,Hs=b+r}else Fs=1<<b|u<<_|g,Hs=r}function g0(r){r.return!==null&&(ya(r,1),wp(r,1,0))}function m0(r){for(;r===vh;)vh=Bl[--Ul],Bl[Ul]=null,Hc=Bl[--Ul],Bl[Ul]=null;for(;r===ro;)ro=hs[--fs],hs[fs]=null,Hs=hs[--fs],hs[fs]=null,Fs=hs[--fs],hs[fs]=null}function Ap(r,a){hs[fs++]=Fs,hs[fs++]=Hs,hs[fs++]=ro,Fs=a.id,Hs=a.overflow,ro=r}var jr=null,On=null,Zt=!1,io=null,ds=!1,p0=Error(s(519));function so(r){var a=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw zc(us(a,r)),p0}function bp(r){var a=r.stateNode,u=r.type,g=r.memoizedProps;switch(a[bn]=r,a[Wt]=g,u){case"dialog":Bt("cancel",a),Bt("close",a);break;case"iframe":case"object":case"embed":Bt("load",a);break;case"video":case"audio":for(u=0;u<hu.length;u++)Bt(hu[u],a);break;case"source":Bt("error",a);break;case"img":case"image":case"link":Bt("error",a),Bt("load",a);break;case"details":Bt("toggle",a);break;case"input":Bt("invalid",a),he(a,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":Bt("invalid",a);break;case"textarea":Bt("invalid",a),or(a,g.value,g.defaultValue,g.children)}u=g.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||a.textContent===""+u||g.suppressHydrationWarning===!0||jx(a.textContent,u)?(g.popover!=null&&(Bt("beforetoggle",a),Bt("toggle",a)),g.onScroll!=null&&Bt("scroll",a),g.onScrollEnd!=null&&Bt("scrollend",a),g.onClick!=null&&(a.onclick=ti),a=!0):a=!1,a||so(r,!0)}function Tp(r){for(jr=r.return;jr;)switch(jr.tag){case 5:case 31:case 13:ds=!1;return;case 27:case 3:ds=!0;return;default:jr=jr.return}}function Vl(r){if(r!==jr)return!1;if(!Zt)return Tp(r),Zt=!0,!1;var a=r.tag,u;if((u=a!==3&&a!==27)&&((u=a===5)&&(u=r.type,u=!(u!=="form"&&u!=="button")||L1(r.type,r.memoizedProps)),u=!u),u&&On&&so(r),Tp(r),a===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));On=Kx(r)}else if(a===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));On=Kx(r)}else a===27?(a=On,_o(r.type)?(r=V1,V1=null,On=r):On=a):On=jr?ms(r.stateNode.nextSibling):null;return!0}function sl(){On=jr=null,Zt=!1}function x0(){var r=io;return r!==null&&(Ri===null?Ri=r:Ri.push.apply(Ri,r),io=null),r}function zc(r){io===null?io=[r]:io.push(r)}var y0=ie(null),al=null,Ea=null;function ao(r,a,u){Ve(y0,a._currentValue),a._currentValue=u}function _a(r){r._currentValue=y0.current,Ae(y0)}function E0(r,a,u){for(;r!==null;){var g=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,g!==null&&(g.childLanes|=a)):g!==null&&(g.childLanes&a)!==a&&(g.childLanes|=a),r===u)break;r=r.return}}function _0(r,a,u,g){var _=r.child;for(_!==null&&(_.return=r);_!==null;){var b=_.dependencies;if(b!==null){var O=_.child;b=b.firstContext;e:for(;b!==null;){var U=b;b=_;for(var ee=0;ee<a.length;ee++)if(U.context===a[ee]){b.lanes|=u,U=b.alternate,U!==null&&(U.lanes|=u),E0(b.return,u,r),g||(O=null);break e}b=U.next}}else if(_.tag===18){if(O=_.return,O===null)throw Error(s(341));O.lanes|=u,b=O.alternate,b!==null&&(b.lanes|=u),E0(O,u,r),O=null}else O=_.child;if(O!==null)O.return=_;else for(O=_;O!==null;){if(O===r){O=null;break}if(_=O.sibling,_!==null){_.return=O.return,O=_;break}O=O.return}_=O}}function jl(r,a,u,g){r=null;for(var _=a,b=!1;_!==null;){if(!b){if((_.flags&524288)!==0)b=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var O=_.alternate;if(O===null)throw Error(s(387));if(O=O.memoizedProps,O!==null){var U=_.type;m(_.pendingProps.value,O.value)||(r!==null?r.push(U):r=[U])}}else if(_===wt.current){if(O=_.alternate,O===null)throw Error(s(387));O.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(r!==null?r.push(pu):r=[pu])}_=_.return}r!==null&&_0(a,r,u,g),a.flags|=262144}function Sh(r){for(r=r.firstContext;r!==null;){if(!m(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function ol(r){al=r,Ea=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Fr(r){return vp(al,r)}function Ch(r,a){return al===null&&ol(r),vp(r,a)}function vp(r,a){var u=a._currentValue;if(a={context:a,memoizedValue:u,next:null},Ea===null){if(r===null)throw Error(s(308));Ea=a,r.dependencies={lanes:0,firstContext:a},r.flags|=524288}else Ea=Ea.next=a;return u}var Rv=typeof AbortController<"u"?AbortController:function(){var r=[],a=this.signal={aborted:!1,addEventListener:function(u,g){r.push(g)}};this.abort=function(){a.aborted=!0,r.forEach(function(u){return u()})}},Ov=n.unstable_scheduleCallback,Dv=n.unstable_NormalPriority,mr={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function w0(){return{controller:new Rv,data:new Map,refCount:0}}function Gc(r){r.refCount--,r.refCount===0&&Ov(Dv,function(){r.controller.abort()})}var qc=null,A0=0,Fl=0,Hl=null;function Mv(r,a){if(qc===null){var u=qc=[];A0=0,Fl=v1(),Hl={status:"pending",value:void 0,then:function(g){u.push(g)}}}return A0++,a.then(Sp,Sp),a}function Sp(){if(--A0===0&&qc!==null){Hl!==null&&(Hl.status="fulfilled");var r=qc;qc=null,Fl=0,Hl=null;for(var a=0;a<r.length;a++)(0,r[a])()}}function Lv(r,a){var u=[],g={status:"pending",value:null,reason:null,then:function(_){u.push(_)}};return r.then(function(){g.status="fulfilled",g.value=a;for(var _=0;_<u.length;_++)(0,u[_])(a)},function(_){for(g.status="rejected",g.reason=_,_=0;_<u.length;_++)(0,u[_])(void 0)}),g}var Cp=me.S;me.S=function(r,a){ux=mn(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&Mv(r,a),Cp!==null&&Cp(r,a)};var ll=ie(null);function b0(){var r=ll.current;return r!==null?r:Sn.pooledCache}function Ih(r,a){a===null?Ve(ll,ll.current):Ve(ll,a.pool)}function Ip(){var r=b0();return r===null?null:{parent:mr._currentValue,pool:r}}var zl=Error(s(460)),T0=Error(s(474)),Nh=Error(s(542)),Rh={then:function(){}};function Np(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Rp(r,a,u){switch(u=r[u],u===void 0?r.push(a):u!==a&&(a.then(ti,ti),a=u),a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,Dp(r),r;default:if(typeof a.status=="string")a.then(ti,ti);else{if(r=Sn,r!==null&&100<r.shellSuspendCounter)throw Error(s(482));r=a,r.status="pending",r.then(function(g){if(a.status==="pending"){var _=a;_.status="fulfilled",_.value=g}},function(g){if(a.status==="pending"){var _=a;_.status="rejected",_.reason=g}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,Dp(r),r}throw ul=a,zl}}function cl(r){try{var a=r._init;return a(r._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(ul=u,zl):u}}var ul=null;function Op(){if(ul===null)throw Error(s(459));var r=ul;return ul=null,r}function Dp(r){if(r===zl||r===Nh)throw Error(s(483))}var Gl=null,Yc=0;function Oh(r){var a=Yc;return Yc+=1,Gl===null&&(Gl=[]),Rp(Gl,r,a)}function Xc(r,a){a=a.props.ref,r.ref=a!==void 0?a:null}function Dh(r,a){throw a.$$typeof===M?Error(s(525)):(r=Object.prototype.toString.call(a),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r)))}function Mp(r){function a(oe,se){if(r){var de=oe.deletions;de===null?(oe.deletions=[se],oe.flags|=16):de.push(se)}}function u(oe,se){if(!r)return null;for(;se!==null;)a(oe,se),se=se.sibling;return null}function g(oe){for(var se=new Map;oe!==null;)oe.key!==null?se.set(oe.key,oe):se.set(oe.index,oe),oe=oe.sibling;return se}function _(oe,se){return oe=xa(oe,se),oe.index=0,oe.sibling=null,oe}function b(oe,se,de){return oe.index=de,r?(de=oe.alternate,de!==null?(de=de.index,de<se?(oe.flags|=67108866,se):de):(oe.flags|=67108866,se)):(oe.flags|=1048576,se)}function O(oe){return r&&oe.alternate===null&&(oe.flags|=67108866),oe}function U(oe,se,de,ve){return se===null||se.tag!==6?(se=f0(de,oe.mode,ve),se.return=oe,se):(se=_(se,de),se.return=oe,se)}function ee(oe,se,de,ve){var tt=de.type;return tt===$?Te(oe,se,de.props.children,ve,de.key):se!==null&&(se.elementType===tt||typeof tt=="object"&&tt!==null&&tt.$$typeof===H&&cl(tt)===se.type)?(se=_(se,de.props),Xc(se,de),se.return=oe,se):(se=Th(de.type,de.key,de.props,null,oe.mode,ve),Xc(se,de),se.return=oe,se)}function ge(oe,se,de,ve){return se===null||se.tag!==4||se.stateNode.containerInfo!==de.containerInfo||se.stateNode.implementation!==de.implementation?(se=d0(de,oe.mode,ve),se.return=oe,se):(se=_(se,de.children||[]),se.return=oe,se)}function Te(oe,se,de,ve,tt){return se===null||se.tag!==7?(se=il(de,oe.mode,ve,tt),se.return=oe,se):(se=_(se,de),se.return=oe,se)}function Ce(oe,se,de){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return se=f0(""+se,oe.mode,de),se.return=oe,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case B:return de=Th(se.type,se.key,se.props,null,oe.mode,de),Xc(de,se),de.return=oe,de;case W:return se=d0(se,oe.mode,de),se.return=oe,se;case H:return se=cl(se),Ce(oe,se,de)}if(fe(se)||J(se))return se=il(se,oe.mode,de,null),se.return=oe,se;if(typeof se.then=="function")return Ce(oe,Oh(se),de);if(se.$$typeof===Q)return Ce(oe,Ch(oe,se),de);Dh(oe,se)}return null}function pe(oe,se,de,ve){var tt=se!==null?se.key:null;if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return tt!==null?null:U(oe,se,""+de,ve);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case B:return de.key===tt?ee(oe,se,de,ve):null;case W:return de.key===tt?ge(oe,se,de,ve):null;case H:return de=cl(de),pe(oe,se,de,ve)}if(fe(de)||J(de))return tt!==null?null:Te(oe,se,de,ve,null);if(typeof de.then=="function")return pe(oe,se,Oh(de),ve);if(de.$$typeof===Q)return pe(oe,se,Ch(oe,de),ve);Dh(oe,de)}return null}function we(oe,se,de,ve,tt){if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return oe=oe.get(de)||null,U(se,oe,""+ve,tt);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case B:return oe=oe.get(ve.key===null?de:ve.key)||null,ee(se,oe,ve,tt);case W:return oe=oe.get(ve.key===null?de:ve.key)||null,ge(se,oe,ve,tt);case H:return ve=cl(ve),we(oe,se,de,ve,tt)}if(fe(ve)||J(ve))return oe=oe.get(de)||null,Te(se,oe,ve,tt,null);if(typeof ve.then=="function")return we(oe,se,de,Oh(ve),tt);if(ve.$$typeof===Q)return we(oe,se,de,Ch(se,ve),tt);Dh(se,ve)}return null}function We(oe,se,de,ve){for(var tt=null,nn=null,Qe=se,Nt=se=0,Ft=null;Qe!==null&&Nt<de.length;Nt++){Qe.index>Nt?(Ft=Qe,Qe=null):Ft=Qe.sibling;var rn=pe(oe,Qe,de[Nt],ve);if(rn===null){Qe===null&&(Qe=Ft);break}r&&Qe&&rn.alternate===null&&a(oe,Qe),se=b(rn,se,Nt),nn===null?tt=rn:nn.sibling=rn,nn=rn,Qe=Ft}if(Nt===de.length)return u(oe,Qe),Zt&&ya(oe,Nt),tt;if(Qe===null){for(;Nt<de.length;Nt++)Qe=Ce(oe,de[Nt],ve),Qe!==null&&(se=b(Qe,se,Nt),nn===null?tt=Qe:nn.sibling=Qe,nn=Qe);return Zt&&ya(oe,Nt),tt}for(Qe=g(Qe);Nt<de.length;Nt++)Ft=we(Qe,oe,Nt,de[Nt],ve),Ft!==null&&(r&&Ft.alternate!==null&&Qe.delete(Ft.key===null?Nt:Ft.key),se=b(Ft,se,Nt),nn===null?tt=Ft:nn.sibling=Ft,nn=Ft);return r&&Qe.forEach(function(vo){return a(oe,vo)}),Zt&&ya(oe,Nt),tt}function ot(oe,se,de,ve){if(de==null)throw Error(s(151));for(var tt=null,nn=null,Qe=se,Nt=se=0,Ft=null,rn=de.next();Qe!==null&&!rn.done;Nt++,rn=de.next()){Qe.index>Nt?(Ft=Qe,Qe=null):Ft=Qe.sibling;var vo=pe(oe,Qe,rn.value,ve);if(vo===null){Qe===null&&(Qe=Ft);break}r&&Qe&&vo.alternate===null&&a(oe,Qe),se=b(vo,se,Nt),nn===null?tt=vo:nn.sibling=vo,nn=vo,Qe=Ft}if(rn.done)return u(oe,Qe),Zt&&ya(oe,Nt),tt;if(Qe===null){for(;!rn.done;Nt++,rn=de.next())rn=Ce(oe,rn.value,ve),rn!==null&&(se=b(rn,se,Nt),nn===null?tt=rn:nn.sibling=rn,nn=rn);return Zt&&ya(oe,Nt),tt}for(Qe=g(Qe);!rn.done;Nt++,rn=de.next())rn=we(Qe,oe,Nt,rn.value,ve),rn!==null&&(r&&rn.alternate!==null&&Qe.delete(rn.key===null?Nt:rn.key),se=b(rn,se,Nt),nn===null?tt=rn:nn.sibling=rn,nn=rn);return r&&Qe.forEach(function(qS){return a(oe,qS)}),Zt&&ya(oe,Nt),tt}function En(oe,se,de,ve){if(typeof de=="object"&&de!==null&&de.type===$&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case B:e:{for(var tt=de.key;se!==null;){if(se.key===tt){if(tt=de.type,tt===$){if(se.tag===7){u(oe,se.sibling),ve=_(se,de.props.children),ve.return=oe,oe=ve;break e}}else if(se.elementType===tt||typeof tt=="object"&&tt!==null&&tt.$$typeof===H&&cl(tt)===se.type){u(oe,se.sibling),ve=_(se,de.props),Xc(ve,de),ve.return=oe,oe=ve;break e}u(oe,se);break}else a(oe,se);se=se.sibling}de.type===$?(ve=il(de.props.children,oe.mode,ve,de.key),ve.return=oe,oe=ve):(ve=Th(de.type,de.key,de.props,null,oe.mode,ve),Xc(ve,de),ve.return=oe,oe=ve)}return O(oe);case W:e:{for(tt=de.key;se!==null;){if(se.key===tt)if(se.tag===4&&se.stateNode.containerInfo===de.containerInfo&&se.stateNode.implementation===de.implementation){u(oe,se.sibling),ve=_(se,de.children||[]),ve.return=oe,oe=ve;break e}else{u(oe,se);break}else a(oe,se);se=se.sibling}ve=d0(de,oe.mode,ve),ve.return=oe,oe=ve}return O(oe);case H:return de=cl(de),En(oe,se,de,ve)}if(fe(de))return We(oe,se,de,ve);if(J(de)){if(tt=J(de),typeof tt!="function")throw Error(s(150));return de=tt.call(de),ot(oe,se,de,ve)}if(typeof de.then=="function")return En(oe,se,Oh(de),ve);if(de.$$typeof===Q)return En(oe,se,Ch(oe,de),ve);Dh(oe,de)}return typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint"?(de=""+de,se!==null&&se.tag===6?(u(oe,se.sibling),ve=_(se,de),ve.return=oe,oe=ve):(u(oe,se),ve=f0(de,oe.mode,ve),ve.return=oe,oe=ve),O(oe)):u(oe,se)}return function(oe,se,de,ve){try{Yc=0;var tt=En(oe,se,de,ve);return Gl=null,tt}catch(Qe){if(Qe===zl||Qe===Nh)throw Qe;var nn=Gi(29,Qe,null,oe.mode);return nn.lanes=ve,nn.return=oe,nn}finally{}}}var hl=Mp(!0),Lp=Mp(!1),oo=!1;function v0(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function S0(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function lo(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function co(r,a,u){var g=r.updateQueue;if(g===null)return null;if(g=g.shared,(on&2)!==0){var _=g.pending;return _===null?a.next=a:(a.next=_.next,_.next=a),g.pending=a,a=bh(r),xp(r,null,u),a}return Ah(r,g,a,u),bh(r)}function Wc(r,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194048)!==0)){var g=a.lanes;g&=r.pendingLanes,u|=g,a.lanes=u,$r(r,u)}}function C0(r,a){var u=r.updateQueue,g=r.alternate;if(g!==null&&(g=g.updateQueue,u===g)){var _=null,b=null;if(u=u.firstBaseUpdate,u!==null){do{var O={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};b===null?_=b=O:b=b.next=O,u=u.next}while(u!==null);b===null?_=b=a:b=b.next=a}else _=b=a;u={baseState:g.baseState,firstBaseUpdate:_,lastBaseUpdate:b,shared:g.shared,callbacks:g.callbacks},r.updateQueue=u;return}r=u.lastBaseUpdate,r===null?u.firstBaseUpdate=a:r.next=a,u.lastBaseUpdate=a}var I0=!1;function Kc(){if(I0){var r=Hl;if(r!==null)throw r}}function Qc(r,a,u,g){I0=!1;var _=r.updateQueue;oo=!1;var b=_.firstBaseUpdate,O=_.lastBaseUpdate,U=_.shared.pending;if(U!==null){_.shared.pending=null;var ee=U,ge=ee.next;ee.next=null,O===null?b=ge:O.next=ge,O=ee;var Te=r.alternate;Te!==null&&(Te=Te.updateQueue,U=Te.lastBaseUpdate,U!==O&&(U===null?Te.firstBaseUpdate=ge:U.next=ge,Te.lastBaseUpdate=ee))}if(b!==null){var Ce=_.baseState;O=0,Te=ge=ee=null,U=b;do{var pe=U.lane&-536870913,we=pe!==U.lane;if(we?(jt&pe)===pe:(g&pe)===pe){pe!==0&&pe===Fl&&(I0=!0),Te!==null&&(Te=Te.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});e:{var We=r,ot=U;pe=a;var En=u;switch(ot.tag){case 1:if(We=ot.payload,typeof We=="function"){Ce=We.call(En,Ce,pe);break e}Ce=We;break e;case 3:We.flags=We.flags&-65537|128;case 0:if(We=ot.payload,pe=typeof We=="function"?We.call(En,Ce,pe):We,pe==null)break e;Ce=I({},Ce,pe);break e;case 2:oo=!0}}pe=U.callback,pe!==null&&(r.flags|=64,we&&(r.flags|=8192),we=_.callbacks,we===null?_.callbacks=[pe]:we.push(pe))}else we={lane:pe,tag:U.tag,payload:U.payload,callback:U.callback,next:null},Te===null?(ge=Te=we,ee=Ce):Te=Te.next=we,O|=pe;if(U=U.next,U===null){if(U=_.shared.pending,U===null)break;we=U,U=we.next,we.next=null,_.lastBaseUpdate=we,_.shared.pending=null}}while(!0);Te===null&&(ee=Ce),_.baseState=ee,_.firstBaseUpdate=ge,_.lastBaseUpdate=Te,b===null&&(_.shared.lanes=0),mo|=O,r.lanes=O,r.memoizedState=Ce}}function Pp(r,a){if(typeof r!="function")throw Error(s(191,r));r.call(a)}function kp(r,a){var u=r.callbacks;if(u!==null)for(r.callbacks=null,r=0;r<u.length;r++)Pp(u[r],a)}var ql=ie(null),Mh=ie(0);function Bp(r,a){r=Na,Ve(Mh,r),Ve(ql,a),Na=r|a.baseLanes}function N0(){Ve(Mh,Na),Ve(ql,ql.current)}function R0(){Na=Mh.current,Ae(ql),Ae(Mh)}var qi=ie(null),gs=null;function uo(r){var a=r.alternate;Ve(lr,lr.current&1),Ve(qi,r),gs===null&&(a===null||ql.current!==null||a.memoizedState!==null)&&(gs=r)}function O0(r){Ve(lr,lr.current),Ve(qi,r),gs===null&&(gs=r)}function Up(r){r.tag===22?(Ve(lr,lr.current),Ve(qi,r),gs===null&&(gs=r)):ho()}function ho(){Ve(lr,lr.current),Ve(qi,qi.current)}function Yi(r){Ae(qi),gs===r&&(gs=null),Ae(lr)}var lr=ie(0);function Lh(r){for(var a=r;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||B1(u)||U1(u)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var wa=0,Tt=null,xn=null,pr=null,Ph=!1,Yl=!1,fl=!1,kh=0,Zc=0,Xl=null,Pv=0;function Jn(){throw Error(s(321))}function D0(r,a){if(a===null)return!1;for(var u=0;u<a.length&&u<r.length;u++)if(!m(r[u],a[u]))return!1;return!0}function M0(r,a,u,g,_,b){return wa=b,Tt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,me.H=r===null||r.memoizedState===null?w2:W0,fl=!1,b=u(g,_),fl=!1,Yl&&(b=jp(a,u,g,_)),Vp(r),b}function Vp(r){me.H=eu;var a=xn!==null&&xn.next!==null;if(wa=0,pr=xn=Tt=null,Ph=!1,Zc=0,Xl=null,a)throw Error(s(300));r===null||xr||(r=r.dependencies,r!==null&&Sh(r)&&(xr=!0))}function jp(r,a,u,g){Tt=r;var _=0;do{if(Yl&&(Xl=null),Zc=0,Yl=!1,25<=_)throw Error(s(301));if(_+=1,pr=xn=null,r.updateQueue!=null){var b=r.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}me.H=A2,b=a(u,g)}while(Yl);return b}function kv(){var r=me.H,a=r.useState()[0];return a=typeof a.then=="function"?Jc(a):a,r=r.useState()[0],(xn!==null?xn.memoizedState:null)!==r&&(Tt.flags|=1024),a}function L0(){var r=kh!==0;return kh=0,r}function P0(r,a,u){a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~u}function k0(r){if(Ph){for(r=r.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Ph=!1}wa=0,pr=xn=Tt=null,Yl=!1,Zc=kh=0,Xl=null}function Ei(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pr===null?Tt.memoizedState=pr=r:pr=pr.next=r,pr}function cr(){if(xn===null){var r=Tt.alternate;r=r!==null?r.memoizedState:null}else r=xn.next;var a=pr===null?Tt.memoizedState:pr.next;if(a!==null)pr=a,xn=r;else{if(r===null)throw Tt.alternate===null?Error(s(467)):Error(s(310));xn=r,r={memoizedState:xn.memoizedState,baseState:xn.baseState,baseQueue:xn.baseQueue,queue:xn.queue,next:null},pr===null?Tt.memoizedState=pr=r:pr=pr.next=r}return pr}function Bh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Jc(r){var a=Zc;return Zc+=1,Xl===null&&(Xl=[]),r=Rp(Xl,r,a),a=Tt,(pr===null?a.memoizedState:pr.next)===null&&(a=a.alternate,me.H=a===null||a.memoizedState===null?w2:W0),r}function Uh(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Jc(r);if(r.$$typeof===Q)return Fr(r)}throw Error(s(438,String(r)))}function B0(r){var a=null,u=Tt.updateQueue;if(u!==null&&(a=u.memoCache),a==null){var g=Tt.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(a={data:g.data.map(function(_){return _.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),u===null&&(u=Bh(),Tt.updateQueue=u),u.memoCache=a,u=a.data[a.index],u===void 0)for(u=a.data[a.index]=Array(r),g=0;g<r;g++)u[g]=Y;return a.index++,u}function Aa(r,a){return typeof a=="function"?a(r):a}function Vh(r){var a=cr();return U0(a,xn,r)}function U0(r,a,u){var g=r.queue;if(g===null)throw Error(s(311));g.lastRenderedReducer=u;var _=r.baseQueue,b=g.pending;if(b!==null){if(_!==null){var O=_.next;_.next=b.next,b.next=O}a.baseQueue=_=b,g.pending=null}if(b=r.baseState,_===null)r.memoizedState=b;else{a=_.next;var U=O=null,ee=null,ge=a,Te=!1;do{var Ce=ge.lane&-536870913;if(Ce!==ge.lane?(jt&Ce)===Ce:(wa&Ce)===Ce){var pe=ge.revertLane;if(pe===0)ee!==null&&(ee=ee.next={lane:0,revertLane:0,gesture:null,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null}),Ce===Fl&&(Te=!0);else if((wa&pe)===pe){ge=ge.next,pe===Fl&&(Te=!0);continue}else Ce={lane:0,revertLane:ge.revertLane,gesture:null,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},ee===null?(U=ee=Ce,O=b):ee=ee.next=Ce,Tt.lanes|=pe,mo|=pe;Ce=ge.action,fl&&u(b,Ce),b=ge.hasEagerState?ge.eagerState:u(b,Ce)}else pe={lane:Ce,revertLane:ge.revertLane,gesture:ge.gesture,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},ee===null?(U=ee=pe,O=b):ee=ee.next=pe,Tt.lanes|=Ce,mo|=Ce;ge=ge.next}while(ge!==null&&ge!==a);if(ee===null?O=b:ee.next=U,!m(b,r.memoizedState)&&(xr=!0,Te&&(u=Hl,u!==null)))throw u;r.memoizedState=b,r.baseState=O,r.baseQueue=ee,g.lastRenderedState=b}return _===null&&(g.lanes=0),[r.memoizedState,g.dispatch]}function V0(r){var a=cr(),u=a.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=r;var g=u.dispatch,_=u.pending,b=a.memoizedState;if(_!==null){u.pending=null;var O=_=_.next;do b=r(b,O.action),O=O.next;while(O!==_);m(b,a.memoizedState)||(xr=!0),a.memoizedState=b,a.baseQueue===null&&(a.baseState=b),u.lastRenderedState=b}return[b,g]}function Fp(r,a,u){var g=Tt,_=cr(),b=Zt;if(b){if(u===void 0)throw Error(s(407));u=u()}else u=a();var O=!m((xn||_).memoizedState,u);if(O&&(_.memoizedState=u,xr=!0),_=_.queue,H0(Gp.bind(null,g,_,r),[r]),_.getSnapshot!==a||O||pr!==null&&pr.memoizedState.tag&1){if(g.flags|=2048,Wl(9,{destroy:void 0},zp.bind(null,g,_,u,a),null),Sn===null)throw Error(s(349));b||(wa&127)!==0||Hp(g,a,u)}return u}function Hp(r,a,u){r.flags|=16384,r={getSnapshot:a,value:u},a=Tt.updateQueue,a===null?(a=Bh(),Tt.updateQueue=a,a.stores=[r]):(u=a.stores,u===null?a.stores=[r]:u.push(r))}function zp(r,a,u,g){a.value=u,a.getSnapshot=g,qp(a)&&Yp(r)}function Gp(r,a,u){return u(function(){qp(a)&&Yp(r)})}function qp(r){var a=r.getSnapshot;r=r.value;try{var u=a();return!m(r,u)}catch{return!0}}function Yp(r){var a=rl(r,2);a!==null&&Oi(a,r,2)}function j0(r){var a=Ei();if(typeof r=="function"){var u=r;if(r=u(),fl){Xt(!0);try{u()}finally{Xt(!1)}}}return a.memoizedState=a.baseState=r,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:r},a}function Xp(r,a,u,g){return r.baseState=u,U0(r,xn,typeof g=="function"?g:Aa)}function Bv(r,a,u,g,_){if(Hh(r))throw Error(s(485));if(r=a.action,r!==null){var b={payload:_,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(O){b.listeners.push(O)}};me.T!==null?u(!0):b.isTransition=!1,g(b),u=a.pending,u===null?(b.next=a.pending=b,Wp(a,b)):(b.next=u.next,a.pending=u.next=b)}}function Wp(r,a){var u=a.action,g=a.payload,_=r.state;if(a.isTransition){var b=me.T,O={};me.T=O;try{var U=u(_,g),ee=me.S;ee!==null&&ee(O,U),Kp(r,a,U)}catch(ge){F0(r,a,ge)}finally{b!==null&&O.types!==null&&(b.types=O.types),me.T=b}}else try{b=u(_,g),Kp(r,a,b)}catch(ge){F0(r,a,ge)}}function Kp(r,a,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(g){Qp(r,a,g)},function(g){return F0(r,a,g)}):Qp(r,a,u)}function Qp(r,a,u){a.status="fulfilled",a.value=u,Zp(a),r.state=u,a=r.pending,a!==null&&(u=a.next,u===a?r.pending=null:(u=u.next,a.next=u,Wp(r,u)))}function F0(r,a,u){var g=r.pending;if(r.pending=null,g!==null){g=g.next;do a.status="rejected",a.reason=u,Zp(a),a=a.next;while(a!==g)}r.action=null}function Zp(r){r=r.listeners;for(var a=0;a<r.length;a++)(0,r[a])()}function Jp(r,a){return a}function $p(r,a){if(Zt){var u=Sn.formState;if(u!==null){e:{var g=Tt;if(Zt){if(On){t:{for(var _=On,b=ds;_.nodeType!==8;){if(!b){_=null;break t}if(_=ms(_.nextSibling),_===null){_=null;break t}}b=_.data,_=b==="F!"||b==="F"?_:null}if(_){On=ms(_.nextSibling),g=_.data==="F!";break e}}so(g)}g=!1}g&&(a=u[0])}}return u=Ei(),u.memoizedState=u.baseState=a,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jp,lastRenderedState:a},u.queue=g,u=y2.bind(null,Tt,g),g.dispatch=u,g=j0(!1),b=X0.bind(null,Tt,!1,g.queue),g=Ei(),_={state:a,dispatch:null,action:r,pending:null},g.queue=_,u=Bv.bind(null,Tt,_,b,u),_.dispatch=u,g.memoizedState=r,[a,u,!1]}function e2(r){var a=cr();return t2(a,xn,r)}function t2(r,a,u){if(a=U0(r,a,Jp)[0],r=Vh(Aa)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var g=Jc(a)}catch(O){throw O===zl?Nh:O}else g=a;a=cr();var _=a.queue,b=_.dispatch;return u!==a.memoizedState&&(Tt.flags|=2048,Wl(9,{destroy:void 0},Uv.bind(null,_,u),null)),[g,b,r]}function Uv(r,a){r.action=a}function n2(r){var a=cr(),u=xn;if(u!==null)return t2(a,u,r);cr(),a=a.memoizedState,u=cr();var g=u.queue.dispatch;return u.memoizedState=r,[a,g,!1]}function Wl(r,a,u,g){return r={tag:r,create:u,deps:g,inst:a,next:null},a=Tt.updateQueue,a===null&&(a=Bh(),Tt.updateQueue=a),u=a.lastEffect,u===null?a.lastEffect=r.next=r:(g=u.next,u.next=r,r.next=g,a.lastEffect=r),r}function r2(){return cr().memoizedState}function jh(r,a,u,g){var _=Ei();Tt.flags|=r,_.memoizedState=Wl(1|a,{destroy:void 0},u,g===void 0?null:g)}function Fh(r,a,u,g){var _=cr();g=g===void 0?null:g;var b=_.memoizedState.inst;xn!==null&&g!==null&&D0(g,xn.memoizedState.deps)?_.memoizedState=Wl(a,b,u,g):(Tt.flags|=r,_.memoizedState=Wl(1|a,b,u,g))}function i2(r,a){jh(8390656,8,r,a)}function H0(r,a){Fh(2048,8,r,a)}function Vv(r){Tt.flags|=4;var a=Tt.updateQueue;if(a===null)a=Bh(),Tt.updateQueue=a,a.events=[r];else{var u=a.events;u===null?a.events=[r]:u.push(r)}}function s2(r){var a=cr().memoizedState;return Vv({ref:a,nextImpl:r}),function(){if((on&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}function a2(r,a){return Fh(4,2,r,a)}function o2(r,a){return Fh(4,4,r,a)}function l2(r,a){if(typeof a=="function"){r=r();var u=a(r);return function(){typeof u=="function"?u():a(null)}}if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function c2(r,a,u){u=u!=null?u.concat([r]):null,Fh(4,4,l2.bind(null,a,r),u)}function z0(){}function u2(r,a){var u=cr();a=a===void 0?null:a;var g=u.memoizedState;return a!==null&&D0(a,g[1])?g[0]:(u.memoizedState=[r,a],r)}function h2(r,a){var u=cr();a=a===void 0?null:a;var g=u.memoizedState;if(a!==null&&D0(a,g[1]))return g[0];if(g=r(),fl){Xt(!0);try{r()}finally{Xt(!1)}}return u.memoizedState=[g,a],g}function G0(r,a,u){return u===void 0||(wa&1073741824)!==0&&(jt&261930)===0?r.memoizedState=a:(r.memoizedState=u,r=fx(),Tt.lanes|=r,mo|=r,u)}function f2(r,a,u,g){return m(u,a)?u:ql.current!==null?(r=G0(r,u,g),m(r,a)||(xr=!0),r):(wa&42)===0||(wa&1073741824)!==0&&(jt&261930)===0?(xr=!0,r.memoizedState=u):(r=fx(),Tt.lanes|=r,mo|=r,a)}function d2(r,a,u,g,_){var b=be.p;be.p=b!==0&&8>b?b:8;var O=me.T,U={};me.T=U,X0(r,!1,a,u);try{var ee=_(),ge=me.S;if(ge!==null&&ge(U,ee),ee!==null&&typeof ee=="object"&&typeof ee.then=="function"){var Te=Lv(ee,g);$c(r,a,Te,Ki(r))}else $c(r,a,g,Ki(r))}catch(Ce){$c(r,a,{then:function(){},status:"rejected",reason:Ce},Ki())}finally{be.p=b,O!==null&&U.types!==null&&(O.types=U.types),me.T=O}}function jv(){}function q0(r,a,u,g){if(r.tag!==5)throw Error(s(476));var _=g2(r).queue;d2(r,_,a,Ge,u===null?jv:function(){return m2(r),u(g)})}function g2(r){var a=r.memoizedState;if(a!==null)return a;a={memoizedState:Ge,baseState:Ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:Ge},next:null};var u={};return a.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:u},next:null},r.memoizedState=a,r=r.alternate,r!==null&&(r.memoizedState=a),a}function m2(r){var a=g2(r);a.next===null&&(a=r.alternate.memoizedState),$c(r,a.next.queue,{},Ki())}function Y0(){return Fr(pu)}function p2(){return cr().memoizedState}function x2(){return cr().memoizedState}function Fv(r){for(var a=r.return;a!==null;){switch(a.tag){case 24:case 3:var u=Ki();r=lo(u);var g=co(a,r,u);g!==null&&(Oi(g,a,u),Wc(g,a,u)),a={cache:w0()},r.payload=a;return}a=a.return}}function Hv(r,a,u){var g=Ki();u={lane:g,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Hh(r)?E2(a,u):(u=u0(r,a,u,g),u!==null&&(Oi(u,r,g),_2(u,a,g)))}function y2(r,a,u){var g=Ki();$c(r,a,u,g)}function $c(r,a,u,g){var _={lane:g,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Hh(r))E2(a,_);else{var b=r.alternate;if(r.lanes===0&&(b===null||b.lanes===0)&&(b=a.lastRenderedReducer,b!==null))try{var O=a.lastRenderedState,U=b(O,u);if(_.hasEagerState=!0,_.eagerState=U,m(U,O))return Ah(r,a,_,0),Sn===null&&wh(),!1}catch{}finally{}if(u=u0(r,a,_,g),u!==null)return Oi(u,r,g),_2(u,a,g),!0}return!1}function X0(r,a,u,g){if(g={lane:2,revertLane:v1(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},Hh(r)){if(a)throw Error(s(479))}else a=u0(r,u,g,2),a!==null&&Oi(a,r,2)}function Hh(r){var a=r.alternate;return r===Tt||a!==null&&a===Tt}function E2(r,a){Yl=Ph=!0;var u=r.pending;u===null?a.next=a:(a.next=u.next,u.next=a),r.pending=a}function _2(r,a,u){if((u&4194048)!==0){var g=a.lanes;g&=r.pendingLanes,u|=g,a.lanes=u,$r(r,u)}}var eu={readContext:Fr,use:Uh,useCallback:Jn,useContext:Jn,useEffect:Jn,useImperativeHandle:Jn,useLayoutEffect:Jn,useInsertionEffect:Jn,useMemo:Jn,useReducer:Jn,useRef:Jn,useState:Jn,useDebugValue:Jn,useDeferredValue:Jn,useTransition:Jn,useSyncExternalStore:Jn,useId:Jn,useHostTransitionStatus:Jn,useFormState:Jn,useActionState:Jn,useOptimistic:Jn,useMemoCache:Jn,useCacheRefresh:Jn};eu.useEffectEvent=Jn;var w2={readContext:Fr,use:Uh,useCallback:function(r,a){return Ei().memoizedState=[r,a===void 0?null:a],r},useContext:Fr,useEffect:i2,useImperativeHandle:function(r,a,u){u=u!=null?u.concat([r]):null,jh(4194308,4,l2.bind(null,a,r),u)},useLayoutEffect:function(r,a){return jh(4194308,4,r,a)},useInsertionEffect:function(r,a){jh(4,2,r,a)},useMemo:function(r,a){var u=Ei();a=a===void 0?null:a;var g=r();if(fl){Xt(!0);try{r()}finally{Xt(!1)}}return u.memoizedState=[g,a],g},useReducer:function(r,a,u){var g=Ei();if(u!==void 0){var _=u(a);if(fl){Xt(!0);try{u(a)}finally{Xt(!1)}}}else _=a;return g.memoizedState=g.baseState=_,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:_},g.queue=r,r=r.dispatch=Hv.bind(null,Tt,r),[g.memoizedState,r]},useRef:function(r){var a=Ei();return r={current:r},a.memoizedState=r},useState:function(r){r=j0(r);var a=r.queue,u=y2.bind(null,Tt,a);return a.dispatch=u,[r.memoizedState,u]},useDebugValue:z0,useDeferredValue:function(r,a){var u=Ei();return G0(u,r,a)},useTransition:function(){var r=j0(!1);return r=d2.bind(null,Tt,r.queue,!0,!1),Ei().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,a,u){var g=Tt,_=Ei();if(Zt){if(u===void 0)throw Error(s(407));u=u()}else{if(u=a(),Sn===null)throw Error(s(349));(jt&127)!==0||Hp(g,a,u)}_.memoizedState=u;var b={value:u,getSnapshot:a};return _.queue=b,i2(Gp.bind(null,g,b,r),[r]),g.flags|=2048,Wl(9,{destroy:void 0},zp.bind(null,g,b,u,a),null),u},useId:function(){var r=Ei(),a=Sn.identifierPrefix;if(Zt){var u=Hs,g=Fs;u=(g&~(1<<32-st(g)-1)).toString(32)+u,a="_"+a+"R_"+u,u=kh++,0<u&&(a+="H"+u.toString(32)),a+="_"}else u=Pv++,a="_"+a+"r_"+u.toString(32)+"_";return r.memoizedState=a},useHostTransitionStatus:Y0,useFormState:$p,useActionState:$p,useOptimistic:function(r){var a=Ei();a.memoizedState=a.baseState=r;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=u,a=X0.bind(null,Tt,!0,u),u.dispatch=a,[r,a]},useMemoCache:B0,useCacheRefresh:function(){return Ei().memoizedState=Fv.bind(null,Tt)},useEffectEvent:function(r){var a=Ei(),u={impl:r};return a.memoizedState=u,function(){if((on&2)!==0)throw Error(s(440));return u.impl.apply(void 0,arguments)}}},W0={readContext:Fr,use:Uh,useCallback:u2,useContext:Fr,useEffect:H0,useImperativeHandle:c2,useInsertionEffect:a2,useLayoutEffect:o2,useMemo:h2,useReducer:Vh,useRef:r2,useState:function(){return Vh(Aa)},useDebugValue:z0,useDeferredValue:function(r,a){var u=cr();return f2(u,xn.memoizedState,r,a)},useTransition:function(){var r=Vh(Aa)[0],a=cr().memoizedState;return[typeof r=="boolean"?r:Jc(r),a]},useSyncExternalStore:Fp,useId:p2,useHostTransitionStatus:Y0,useFormState:e2,useActionState:e2,useOptimistic:function(r,a){var u=cr();return Xp(u,xn,r,a)},useMemoCache:B0,useCacheRefresh:x2};W0.useEffectEvent=s2;var A2={readContext:Fr,use:Uh,useCallback:u2,useContext:Fr,useEffect:H0,useImperativeHandle:c2,useInsertionEffect:a2,useLayoutEffect:o2,useMemo:h2,useReducer:V0,useRef:r2,useState:function(){return V0(Aa)},useDebugValue:z0,useDeferredValue:function(r,a){var u=cr();return xn===null?G0(u,r,a):f2(u,xn.memoizedState,r,a)},useTransition:function(){var r=V0(Aa)[0],a=cr().memoizedState;return[typeof r=="boolean"?r:Jc(r),a]},useSyncExternalStore:Fp,useId:p2,useHostTransitionStatus:Y0,useFormState:n2,useActionState:n2,useOptimistic:function(r,a){var u=cr();return xn!==null?Xp(u,xn,r,a):(u.baseState=r,[r,u.queue.dispatch])},useMemoCache:B0,useCacheRefresh:x2};A2.useEffectEvent=s2;function K0(r,a,u,g){a=r.memoizedState,u=u(g,a),u=u==null?a:I({},a,u),r.memoizedState=u,r.lanes===0&&(r.updateQueue.baseState=u)}var Q0={enqueueSetState:function(r,a,u){r=r._reactInternals;var g=Ki(),_=lo(g);_.payload=a,u!=null&&(_.callback=u),a=co(r,_,g),a!==null&&(Oi(a,r,g),Wc(a,r,g))},enqueueReplaceState:function(r,a,u){r=r._reactInternals;var g=Ki(),_=lo(g);_.tag=1,_.payload=a,u!=null&&(_.callback=u),a=co(r,_,g),a!==null&&(Oi(a,r,g),Wc(a,r,g))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var u=Ki(),g=lo(u);g.tag=2,a!=null&&(g.callback=a),a=co(r,g,u),a!==null&&(Oi(a,r,u),Wc(a,r,u))}};function b2(r,a,u,g,_,b,O){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(g,b,O):a.prototype&&a.prototype.isPureReactComponent?!y(u,g)||!y(_,b):!0}function T2(r,a,u,g){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,g),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,g),a.state!==r&&Q0.enqueueReplaceState(a,a.state,null)}function dl(r,a){var u=a;if("ref"in a){u={};for(var g in a)g!=="ref"&&(u[g]=a[g])}if(r=r.defaultProps){u===a&&(u=I({},u));for(var _ in r)u[_]===void 0&&(u[_]=r[_])}return u}function v2(r){_h(r)}function S2(r){console.error(r)}function C2(r){_h(r)}function zh(r,a){try{var u=r.onUncaughtError;u(a.value,{componentStack:a.stack})}catch(g){setTimeout(function(){throw g})}}function I2(r,a,u){try{var g=r.onCaughtError;g(u.value,{componentStack:u.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function Z0(r,a,u){return u=lo(u),u.tag=3,u.payload={element:null},u.callback=function(){zh(r,a)},u}function N2(r){return r=lo(r),r.tag=3,r}function R2(r,a,u,g){var _=u.type.getDerivedStateFromError;if(typeof _=="function"){var b=g.value;r.payload=function(){return _(b)},r.callback=function(){I2(a,u,g)}}var O=u.stateNode;O!==null&&typeof O.componentDidCatch=="function"&&(r.callback=function(){I2(a,u,g),typeof _!="function"&&(po===null?po=new Set([this]):po.add(this));var U=g.stack;this.componentDidCatch(g.value,{componentStack:U!==null?U:""})})}function zv(r,a,u,g,_){if(u.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(a=u.alternate,a!==null&&jl(a,u,_,!0),u=qi.current,u!==null){switch(u.tag){case 31:case 13:return gs===null?tf():u.alternate===null&&$n===0&&($n=3),u.flags&=-257,u.flags|=65536,u.lanes=_,g===Rh?u.flags|=16384:(a=u.updateQueue,a===null?u.updateQueue=new Set([g]):a.add(g),A1(r,g,_)),!1;case 22:return u.flags|=65536,g===Rh?u.flags|=16384:(a=u.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([g])},u.updateQueue=a):(u=a.retryQueue,u===null?a.retryQueue=new Set([g]):u.add(g)),A1(r,g,_)),!1}throw Error(s(435,u.tag))}return A1(r,g,_),tf(),!1}if(Zt)return a=qi.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=_,g!==p0&&(r=Error(s(422),{cause:g}),zc(us(r,u)))):(g!==p0&&(a=Error(s(423),{cause:g}),zc(us(a,u))),r=r.current.alternate,r.flags|=65536,_&=-_,r.lanes|=_,g=us(g,u),_=Z0(r.stateNode,g,_),C0(r,_),$n!==4&&($n=2)),!1;var b=Error(s(520),{cause:g});if(b=us(b,u),lu===null?lu=[b]:lu.push(b),$n!==4&&($n=2),a===null)return!0;g=us(g,u),u=a;do{switch(u.tag){case 3:return u.flags|=65536,r=_&-_,u.lanes|=r,r=Z0(u.stateNode,g,r),C0(u,r),!1;case 1:if(a=u.type,b=u.stateNode,(u.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(po===null||!po.has(b))))return u.flags|=65536,_&=-_,u.lanes|=_,_=N2(_),R2(_,r,u,g),C0(u,_),!1}u=u.return}while(u!==null);return!1}var J0=Error(s(461)),xr=!1;function Hr(r,a,u,g){a.child=r===null?Lp(a,null,u,g):hl(a,r.child,u,g)}function O2(r,a,u,g,_){u=u.render;var b=a.ref;if("ref"in g){var O={};for(var U in g)U!=="ref"&&(O[U]=g[U])}else O=g;return ol(a),g=M0(r,a,u,O,b,_),U=L0(),r!==null&&!xr?(P0(r,a,_),ba(r,a,_)):(Zt&&U&&g0(a),a.flags|=1,Hr(r,a,g,_),a.child)}function D2(r,a,u,g,_){if(r===null){var b=u.type;return typeof b=="function"&&!h0(b)&&b.defaultProps===void 0&&u.compare===null?(a.tag=15,a.type=b,M2(r,a,b,g,_)):(r=Th(u.type,null,g,a,a.mode,_),r.ref=a.ref,r.return=a,a.child=r)}if(b=r.child,!a1(r,_)){var O=b.memoizedProps;if(u=u.compare,u=u!==null?u:y,u(O,g)&&r.ref===a.ref)return ba(r,a,_)}return a.flags|=1,r=xa(b,g),r.ref=a.ref,r.return=a,a.child=r}function M2(r,a,u,g,_){if(r!==null){var b=r.memoizedProps;if(y(b,g)&&r.ref===a.ref)if(xr=!1,a.pendingProps=g=b,a1(r,_))(r.flags&131072)!==0&&(xr=!0);else return a.lanes=r.lanes,ba(r,a,_)}return $0(r,a,u,g,_)}function L2(r,a,u,g){var _=g.children,b=r!==null?r.memoizedState:null;if(r===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((a.flags&128)!==0){if(b=b!==null?b.baseLanes|u:u,r!==null){for(g=a.child=r.child,_=0;g!==null;)_=_|g.lanes|g.childLanes,g=g.sibling;g=_&~b}else g=0,a.child=null;return P2(r,a,b,u,g)}if((u&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},r!==null&&Ih(a,b!==null?b.cachePool:null),b!==null?Bp(a,b):N0(),Up(a);else return g=a.lanes=536870912,P2(r,a,b!==null?b.baseLanes|u:u,u,g)}else b!==null?(Ih(a,b.cachePool),Bp(a,b),ho(),a.memoizedState=null):(r!==null&&Ih(a,null),N0(),ho());return Hr(r,a,_,u),a.child}function tu(r,a){return r!==null&&r.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function P2(r,a,u,g,_){var b=b0();return b=b===null?null:{parent:mr._currentValue,pool:b},a.memoizedState={baseLanes:u,cachePool:b},r!==null&&Ih(a,null),N0(),Up(a),r!==null&&jl(r,a,g,!0),a.childLanes=_,null}function Gh(r,a){return a=Yh({mode:a.mode,children:a.children},r.mode),a.ref=r.ref,r.child=a,a.return=r,a}function k2(r,a,u){return hl(a,r.child,null,u),r=Gh(a,a.pendingProps),r.flags|=2,Yi(a),a.memoizedState=null,r}function Gv(r,a,u){var g=a.pendingProps,_=(a.flags&128)!==0;if(a.flags&=-129,r===null){if(Zt){if(g.mode==="hidden")return r=Gh(a,g),a.lanes=536870912,tu(null,r);if(O0(a),(r=On)?(r=Wx(r,ds),r=r!==null&&r.data==="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:ro!==null?{id:Fs,overflow:Hs}:null,retryLane:536870912,hydrationErrors:null},u=Ep(r),u.return=a,a.child=u,jr=a,On=null)):r=null,r===null)throw so(a);return a.lanes=536870912,null}return Gh(a,g)}var b=r.memoizedState;if(b!==null){var O=b.dehydrated;if(O0(a),_)if(a.flags&256)a.flags&=-257,a=k2(r,a,u);else if(a.memoizedState!==null)a.child=r.child,a.flags|=128,a=null;else throw Error(s(558));else if(xr||jl(r,a,u,!1),_=(u&r.childLanes)!==0,xr||_){if(g=Sn,g!==null&&(O=ns(g,u),O!==0&&O!==b.retryLane))throw b.retryLane=O,rl(r,O),Oi(g,r,O),J0;tf(),a=k2(r,a,u)}else r=b.treeContext,On=ms(O.nextSibling),jr=a,Zt=!0,io=null,ds=!1,r!==null&&Ap(a,r),a=Gh(a,g),a.flags|=4096;return a}return r=xa(r.child,{mode:g.mode,children:g.children}),r.ref=a.ref,a.child=r,r.return=a,r}function qh(r,a){var u=a.ref;if(u===null)r!==null&&r.ref!==null&&(a.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(s(284));(r===null||r.ref!==u)&&(a.flags|=4194816)}}function $0(r,a,u,g,_){return ol(a),u=M0(r,a,u,g,void 0,_),g=L0(),r!==null&&!xr?(P0(r,a,_),ba(r,a,_)):(Zt&&g&&g0(a),a.flags|=1,Hr(r,a,u,_),a.child)}function B2(r,a,u,g,_,b){return ol(a),a.updateQueue=null,u=jp(a,g,u,_),Vp(r),g=L0(),r!==null&&!xr?(P0(r,a,b),ba(r,a,b)):(Zt&&g&&g0(a),a.flags|=1,Hr(r,a,u,b),a.child)}function U2(r,a,u,g,_){if(ol(a),a.stateNode===null){var b=kl,O=u.contextType;typeof O=="object"&&O!==null&&(b=Fr(O)),b=new u(g,b),a.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Q0,a.stateNode=b,b._reactInternals=a,b=a.stateNode,b.props=g,b.state=a.memoizedState,b.refs={},v0(a),O=u.contextType,b.context=typeof O=="object"&&O!==null?Fr(O):kl,b.state=a.memoizedState,O=u.getDerivedStateFromProps,typeof O=="function"&&(K0(a,u,O,g),b.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(O=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),O!==b.state&&Q0.enqueueReplaceState(b,b.state,null),Qc(a,g,b,_),Kc(),b.state=a.memoizedState),typeof b.componentDidMount=="function"&&(a.flags|=4194308),g=!0}else if(r===null){b=a.stateNode;var U=a.memoizedProps,ee=dl(u,U);b.props=ee;var ge=b.context,Te=u.contextType;O=kl,typeof Te=="object"&&Te!==null&&(O=Fr(Te));var Ce=u.getDerivedStateFromProps;Te=typeof Ce=="function"||typeof b.getSnapshotBeforeUpdate=="function",U=a.pendingProps!==U,Te||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(U||ge!==O)&&T2(a,b,g,O),oo=!1;var pe=a.memoizedState;b.state=pe,Qc(a,g,b,_),Kc(),ge=a.memoizedState,U||pe!==ge||oo?(typeof Ce=="function"&&(K0(a,u,Ce,g),ge=a.memoizedState),(ee=oo||b2(a,u,ee,g,pe,ge,O))?(Te||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(a.flags|=4194308)):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=g,a.memoizedState=ge),b.props=g,b.state=ge,b.context=O,g=ee):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),g=!1)}else{b=a.stateNode,S0(r,a),O=a.memoizedProps,Te=dl(u,O),b.props=Te,Ce=a.pendingProps,pe=b.context,ge=u.contextType,ee=kl,typeof ge=="object"&&ge!==null&&(ee=Fr(ge)),U=u.getDerivedStateFromProps,(ge=typeof U=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(O!==Ce||pe!==ee)&&T2(a,b,g,ee),oo=!1,pe=a.memoizedState,b.state=pe,Qc(a,g,b,_),Kc();var we=a.memoizedState;O!==Ce||pe!==we||oo||r!==null&&r.dependencies!==null&&Sh(r.dependencies)?(typeof U=="function"&&(K0(a,u,U,g),we=a.memoizedState),(Te=oo||b2(a,u,Te,g,pe,we,ee)||r!==null&&r.dependencies!==null&&Sh(r.dependencies))?(ge||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(g,we,ee),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(g,we,ee)),typeof b.componentDidUpdate=="function"&&(a.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof b.componentDidUpdate!="function"||O===r.memoizedProps&&pe===r.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||O===r.memoizedProps&&pe===r.memoizedState||(a.flags|=1024),a.memoizedProps=g,a.memoizedState=we),b.props=g,b.state=we,b.context=ee,g=Te):(typeof b.componentDidUpdate!="function"||O===r.memoizedProps&&pe===r.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||O===r.memoizedProps&&pe===r.memoizedState||(a.flags|=1024),g=!1)}return b=g,qh(r,a),g=(a.flags&128)!==0,b||g?(b=a.stateNode,u=g&&typeof u.getDerivedStateFromError!="function"?null:b.render(),a.flags|=1,r!==null&&g?(a.child=hl(a,r.child,null,_),a.child=hl(a,null,u,_)):Hr(r,a,u,_),a.memoizedState=b.state,r=a.child):r=ba(r,a,_),r}function V2(r,a,u,g){return sl(),a.flags|=256,Hr(r,a,u,g),a.child}var e1={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function t1(r){return{baseLanes:r,cachePool:Ip()}}function n1(r,a,u){return r=r!==null?r.childLanes&~u:0,a&&(r|=Wi),r}function j2(r,a,u){var g=a.pendingProps,_=!1,b=(a.flags&128)!==0,O;if((O=b)||(O=r!==null&&r.memoizedState===null?!1:(lr.current&2)!==0),O&&(_=!0,a.flags&=-129),O=(a.flags&32)!==0,a.flags&=-33,r===null){if(Zt){if(_?uo(a):ho(),(r=On)?(r=Wx(r,ds),r=r!==null&&r.data!=="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:ro!==null?{id:Fs,overflow:Hs}:null,retryLane:536870912,hydrationErrors:null},u=Ep(r),u.return=a,a.child=u,jr=a,On=null)):r=null,r===null)throw so(a);return U1(r)?a.lanes=32:a.lanes=536870912,null}var U=g.children;return g=g.fallback,_?(ho(),_=a.mode,U=Yh({mode:"hidden",children:U},_),g=il(g,_,u,null),U.return=a,g.return=a,U.sibling=g,a.child=U,g=a.child,g.memoizedState=t1(u),g.childLanes=n1(r,O,u),a.memoizedState=e1,tu(null,g)):(uo(a),r1(a,U))}var ee=r.memoizedState;if(ee!==null&&(U=ee.dehydrated,U!==null)){if(b)a.flags&256?(uo(a),a.flags&=-257,a=i1(r,a,u)):a.memoizedState!==null?(ho(),a.child=r.child,a.flags|=128,a=null):(ho(),U=g.fallback,_=a.mode,g=Yh({mode:"visible",children:g.children},_),U=il(U,_,u,null),U.flags|=2,g.return=a,U.return=a,g.sibling=U,a.child=g,hl(a,r.child,null,u),g=a.child,g.memoizedState=t1(u),g.childLanes=n1(r,O,u),a.memoizedState=e1,a=tu(null,g));else if(uo(a),U1(U)){if(O=U.nextSibling&&U.nextSibling.dataset,O)var ge=O.dgst;O=ge,g=Error(s(419)),g.stack="",g.digest=O,zc({value:g,source:null,stack:null}),a=i1(r,a,u)}else if(xr||jl(r,a,u,!1),O=(u&r.childLanes)!==0,xr||O){if(O=Sn,O!==null&&(g=ns(O,u),g!==0&&g!==ee.retryLane))throw ee.retryLane=g,rl(r,g),Oi(O,r,g),J0;B1(U)||tf(),a=i1(r,a,u)}else B1(U)?(a.flags|=192,a.child=r.child,a=null):(r=ee.treeContext,On=ms(U.nextSibling),jr=a,Zt=!0,io=null,ds=!1,r!==null&&Ap(a,r),a=r1(a,g.children),a.flags|=4096);return a}return _?(ho(),U=g.fallback,_=a.mode,ee=r.child,ge=ee.sibling,g=xa(ee,{mode:"hidden",children:g.children}),g.subtreeFlags=ee.subtreeFlags&65011712,ge!==null?U=xa(ge,U):(U=il(U,_,u,null),U.flags|=2),U.return=a,g.return=a,g.sibling=U,a.child=g,tu(null,g),g=a.child,U=r.child.memoizedState,U===null?U=t1(u):(_=U.cachePool,_!==null?(ee=mr._currentValue,_=_.parent!==ee?{parent:ee,pool:ee}:_):_=Ip(),U={baseLanes:U.baseLanes|u,cachePool:_}),g.memoizedState=U,g.childLanes=n1(r,O,u),a.memoizedState=e1,tu(r.child,g)):(uo(a),u=r.child,r=u.sibling,u=xa(u,{mode:"visible",children:g.children}),u.return=a,u.sibling=null,r!==null&&(O=a.deletions,O===null?(a.deletions=[r],a.flags|=16):O.push(r)),a.child=u,a.memoizedState=null,u)}function r1(r,a){return a=Yh({mode:"visible",children:a},r.mode),a.return=r,r.child=a}function Yh(r,a){return r=Gi(22,r,null,a),r.lanes=0,r}function i1(r,a,u){return hl(a,r.child,null,u),r=r1(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function F2(r,a,u){r.lanes|=a;var g=r.alternate;g!==null&&(g.lanes|=a),E0(r.return,a,u)}function s1(r,a,u,g,_,b){var O=r.memoizedState;O===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:g,tail:u,tailMode:_,treeForkCount:b}:(O.isBackwards=a,O.rendering=null,O.renderingStartTime=0,O.last=g,O.tail=u,O.tailMode=_,O.treeForkCount=b)}function H2(r,a,u){var g=a.pendingProps,_=g.revealOrder,b=g.tail;g=g.children;var O=lr.current,U=(O&2)!==0;if(U?(O=O&1|2,a.flags|=128):O&=1,Ve(lr,O),Hr(r,a,g,u),g=Zt?Hc:0,!U&&r!==null&&(r.flags&128)!==0)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&F2(r,u,a);else if(r.tag===19)F2(r,u,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(_){case"forwards":for(u=a.child,_=null;u!==null;)r=u.alternate,r!==null&&Lh(r)===null&&(_=u),u=u.sibling;u=_,u===null?(_=a.child,a.child=null):(_=u.sibling,u.sibling=null),s1(a,!1,_,u,b,g);break;case"backwards":case"unstable_legacy-backwards":for(u=null,_=a.child,a.child=null;_!==null;){if(r=_.alternate,r!==null&&Lh(r)===null){a.child=_;break}r=_.sibling,_.sibling=u,u=_,_=r}s1(a,!0,u,null,b,g);break;case"together":s1(a,!1,null,null,void 0,g);break;default:a.memoizedState=null}return a.child}function ba(r,a,u){if(r!==null&&(a.dependencies=r.dependencies),mo|=a.lanes,(u&a.childLanes)===0)if(r!==null){if(jl(r,a,u,!1),(u&a.childLanes)===0)return null}else return null;if(r!==null&&a.child!==r.child)throw Error(s(153));if(a.child!==null){for(r=a.child,u=xa(r,r.pendingProps),a.child=u,u.return=a;r.sibling!==null;)r=r.sibling,u=u.sibling=xa(r,r.pendingProps),u.return=a;u.sibling=null}return a.child}function a1(r,a){return(r.lanes&a)!==0?!0:(r=r.dependencies,!!(r!==null&&Sh(r)))}function qv(r,a,u){switch(a.tag){case 3:vt(a,a.stateNode.containerInfo),ao(a,mr,r.memoizedState.cache),sl();break;case 27:case 5:kr(a);break;case 4:vt(a,a.stateNode.containerInfo);break;case 10:ao(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,O0(a),null;break;case 13:var g=a.memoizedState;if(g!==null)return g.dehydrated!==null?(uo(a),a.flags|=128,null):(u&a.child.childLanes)!==0?j2(r,a,u):(uo(a),r=ba(r,a,u),r!==null?r.sibling:null);uo(a);break;case 19:var _=(r.flags&128)!==0;if(g=(u&a.childLanes)!==0,g||(jl(r,a,u,!1),g=(u&a.childLanes)!==0),_){if(g)return H2(r,a,u);a.flags|=128}if(_=a.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),Ve(lr,lr.current),g)break;return null;case 22:return a.lanes=0,L2(r,a,u,a.pendingProps);case 24:ao(a,mr,r.memoizedState.cache)}return ba(r,a,u)}function z2(r,a,u){if(r!==null)if(r.memoizedProps!==a.pendingProps)xr=!0;else{if(!a1(r,u)&&(a.flags&128)===0)return xr=!1,qv(r,a,u);xr=(r.flags&131072)!==0}else xr=!1,Zt&&(a.flags&1048576)!==0&&wp(a,Hc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var g=a.pendingProps;if(r=cl(a.elementType),a.type=r,typeof r=="function")h0(r)?(g=dl(r,g),a.tag=1,a=U2(null,a,r,g,u)):(a.tag=0,a=$0(null,a,r,g,u));else{if(r!=null){var _=r.$$typeof;if(_===le){a.tag=11,a=O2(null,a,r,g,u);break e}else if(_===j){a.tag=14,a=D2(null,a,r,g,u);break e}}throw a=$e(r)||r,Error(s(306,a,""))}}return a;case 0:return $0(r,a,a.type,a.pendingProps,u);case 1:return g=a.type,_=dl(g,a.pendingProps),U2(r,a,g,_,u);case 3:e:{if(vt(a,a.stateNode.containerInfo),r===null)throw Error(s(387));g=a.pendingProps;var b=a.memoizedState;_=b.element,S0(r,a),Qc(a,g,null,u);var O=a.memoizedState;if(g=O.cache,ao(a,mr,g),g!==b.cache&&_0(a,[mr],u,!0),Kc(),g=O.element,b.isDehydrated)if(b={element:g,isDehydrated:!1,cache:O.cache},a.updateQueue.baseState=b,a.memoizedState=b,a.flags&256){a=V2(r,a,g,u);break e}else if(g!==_){_=us(Error(s(424)),a),zc(_),a=V2(r,a,g,u);break e}else{switch(r=a.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(On=ms(r.firstChild),jr=a,Zt=!0,io=null,ds=!0,u=Lp(a,null,g,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(sl(),g===_){a=ba(r,a,u);break e}Hr(r,a,g,u)}a=a.child}return a;case 26:return qh(r,a),r===null?(u=ey(a.type,null,a.pendingProps,null))?a.memoizedState=u:Zt||(u=a.type,r=a.pendingProps,g=cf(Pe.current).createElement(u),g[bn]=a,g[Wt]=r,zr(g,u,r),In(g),a.stateNode=g):a.memoizedState=ey(a.type,r.memoizedProps,a.pendingProps,r.memoizedState),null;case 27:return kr(a),r===null&&Zt&&(g=a.stateNode=Zx(a.type,a.pendingProps,Pe.current),jr=a,ds=!0,_=On,_o(a.type)?(V1=_,On=ms(g.firstChild)):On=_),Hr(r,a,a.pendingProps.children,u),qh(r,a),r===null&&(a.flags|=4194304),a.child;case 5:return r===null&&Zt&&((_=g=On)&&(g=wS(g,a.type,a.pendingProps,ds),g!==null?(a.stateNode=g,jr=a,On=ms(g.firstChild),ds=!1,_=!0):_=!1),_||so(a)),kr(a),_=a.type,b=a.pendingProps,O=r!==null?r.memoizedProps:null,g=b.children,L1(_,b)?g=null:O!==null&&L1(_,O)&&(a.flags|=32),a.memoizedState!==null&&(_=M0(r,a,kv,null,null,u),pu._currentValue=_),qh(r,a),Hr(r,a,g,u),a.child;case 6:return r===null&&Zt&&((r=u=On)&&(u=AS(u,a.pendingProps,ds),u!==null?(a.stateNode=u,jr=a,On=null,r=!0):r=!1),r||so(a)),null;case 13:return j2(r,a,u);case 4:return vt(a,a.stateNode.containerInfo),g=a.pendingProps,r===null?a.child=hl(a,null,g,u):Hr(r,a,g,u),a.child;case 11:return O2(r,a,a.type,a.pendingProps,u);case 7:return Hr(r,a,a.pendingProps,u),a.child;case 8:return Hr(r,a,a.pendingProps.children,u),a.child;case 12:return Hr(r,a,a.pendingProps.children,u),a.child;case 10:return g=a.pendingProps,ao(a,a.type,g.value),Hr(r,a,g.children,u),a.child;case 9:return _=a.type._context,g=a.pendingProps.children,ol(a),_=Fr(_),g=g(_),a.flags|=1,Hr(r,a,g,u),a.child;case 14:return D2(r,a,a.type,a.pendingProps,u);case 15:return M2(r,a,a.type,a.pendingProps,u);case 19:return H2(r,a,u);case 31:return Gv(r,a,u);case 22:return L2(r,a,u,a.pendingProps);case 24:return ol(a),g=Fr(mr),r===null?(_=b0(),_===null&&(_=Sn,b=w0(),_.pooledCache=b,b.refCount++,b!==null&&(_.pooledCacheLanes|=u),_=b),a.memoizedState={parent:g,cache:_},v0(a),ao(a,mr,_)):((r.lanes&u)!==0&&(S0(r,a),Qc(a,null,null,u),Kc()),_=r.memoizedState,b=a.memoizedState,_.parent!==g?(_={parent:g,cache:g},a.memoizedState=_,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=_),ao(a,mr,g)):(g=b.cache,ao(a,mr,g),g!==_.cache&&_0(a,[mr],u,!0))),Hr(r,a,a.pendingProps.children,u),a.child;case 29:throw a.pendingProps}throw Error(s(156,a.tag))}function Ta(r){r.flags|=4}function o1(r,a,u,g,_){if((a=(r.mode&32)!==0)&&(a=!1),a){if(r.flags|=16777216,(_&335544128)===_)if(r.stateNode.complete)r.flags|=8192;else if(px())r.flags|=8192;else throw ul=Rh,T0}else r.flags&=-16777217}function G2(r,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!sy(a))if(px())r.flags|=8192;else throw ul=Rh,T0}function Xh(r,a){a!==null&&(r.flags|=4),r.flags&16384&&(a=r.tag!==22?Pn():536870912,r.lanes|=a,Jl|=a)}function nu(r,a){if(!Zt)switch(r.tailMode){case"hidden":a=r.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?r.tail=null:u.sibling=null;break;case"collapsed":u=r.tail;for(var g=null;u!==null;)u.alternate!==null&&(g=u),u=u.sibling;g===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:g.sibling=null}}function Dn(r){var a=r.alternate!==null&&r.alternate.child===r.child,u=0,g=0;if(a)for(var _=r.child;_!==null;)u|=_.lanes|_.childLanes,g|=_.subtreeFlags&65011712,g|=_.flags&65011712,_.return=r,_=_.sibling;else for(_=r.child;_!==null;)u|=_.lanes|_.childLanes,g|=_.subtreeFlags,g|=_.flags,_.return=r,_=_.sibling;return r.subtreeFlags|=g,r.childLanes=u,a}function Yv(r,a,u){var g=a.pendingProps;switch(m0(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dn(a),null;case 1:return Dn(a),null;case 3:return u=a.stateNode,g=null,r!==null&&(g=r.memoizedState.cache),a.memoizedState.cache!==g&&(a.flags|=2048),_a(mr),en(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(r===null||r.child===null)&&(Vl(a)?Ta(a):r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,x0())),Dn(a),null;case 26:var _=a.type,b=a.memoizedState;return r===null?(Ta(a),b!==null?(Dn(a),G2(a,b)):(Dn(a),o1(a,_,null,g,u))):b?b!==r.memoizedState?(Ta(a),Dn(a),G2(a,b)):(Dn(a),a.flags&=-16777217):(r=r.memoizedProps,r!==g&&Ta(a),Dn(a),o1(a,_,r,g,u)),null;case 27:if(ln(a),u=Pe.current,_=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==g&&Ta(a);else{if(!g){if(a.stateNode===null)throw Error(s(166));return Dn(a),null}r=je.current,Vl(a)?bp(a):(r=Zx(_,g,u),a.stateNode=r,Ta(a))}return Dn(a),null;case 5:if(ln(a),_=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==g&&Ta(a);else{if(!g){if(a.stateNode===null)throw Error(s(166));return Dn(a),null}if(b=je.current,Vl(a))bp(a);else{var O=cf(Pe.current);switch(b){case 1:b=O.createElementNS("http://www.w3.org/2000/svg",_);break;case 2:b=O.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;default:switch(_){case"svg":b=O.createElementNS("http://www.w3.org/2000/svg",_);break;case"math":b=O.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;case"script":b=O.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof g.is=="string"?O.createElement("select",{is:g.is}):O.createElement("select"),g.multiple?b.multiple=!0:g.size&&(b.size=g.size);break;default:b=typeof g.is=="string"?O.createElement(_,{is:g.is}):O.createElement(_)}}b[bn]=a,b[Wt]=g;e:for(O=a.child;O!==null;){if(O.tag===5||O.tag===6)b.appendChild(O.stateNode);else if(O.tag!==4&&O.tag!==27&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===a)break e;for(;O.sibling===null;){if(O.return===null||O.return===a)break e;O=O.return}O.sibling.return=O.return,O=O.sibling}a.stateNode=b;e:switch(zr(b,_,g),_){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&Ta(a)}}return Dn(a),o1(a,a.type,r===null?null:r.memoizedProps,a.pendingProps,u),null;case 6:if(r&&a.stateNode!=null)r.memoizedProps!==g&&Ta(a);else{if(typeof g!="string"&&a.stateNode===null)throw Error(s(166));if(r=Pe.current,Vl(a)){if(r=a.stateNode,u=a.memoizedProps,g=null,_=jr,_!==null)switch(_.tag){case 27:case 5:g=_.memoizedProps}r[bn]=a,r=!!(r.nodeValue===u||g!==null&&g.suppressHydrationWarning===!0||jx(r.nodeValue,u)),r||so(a,!0)}else r=cf(r).createTextNode(g),r[bn]=a,a.stateNode=r}return Dn(a),null;case 31:if(u=a.memoizedState,r===null||r.memoizedState!==null){if(g=Vl(a),u!==null){if(r===null){if(!g)throw Error(s(318));if(r=a.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(557));r[bn]=a}else sl(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Dn(a),r=!1}else u=x0(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=u),r=!0;if(!r)return a.flags&256?(Yi(a),a):(Yi(a),null);if((a.flags&128)!==0)throw Error(s(558))}return Dn(a),null;case 13:if(g=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(_=Vl(a),g!==null&&g.dehydrated!==null){if(r===null){if(!_)throw Error(s(318));if(_=a.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(s(317));_[bn]=a}else sl(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Dn(a),_=!1}else _=x0(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=_),_=!0;if(!_)return a.flags&256?(Yi(a),a):(Yi(a),null)}return Yi(a),(a.flags&128)!==0?(a.lanes=u,a):(u=g!==null,r=r!==null&&r.memoizedState!==null,u&&(g=a.child,_=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(_=g.alternate.memoizedState.cachePool.pool),b=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(b=g.memoizedState.cachePool.pool),b!==_&&(g.flags|=2048)),u!==r&&u&&(a.child.flags|=8192),Xh(a,a.updateQueue),Dn(a),null);case 4:return en(),r===null&&N1(a.stateNode.containerInfo),Dn(a),null;case 10:return _a(a.type),Dn(a),null;case 19:if(Ae(lr),g=a.memoizedState,g===null)return Dn(a),null;if(_=(a.flags&128)!==0,b=g.rendering,b===null)if(_)nu(g,!1);else{if($n!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(b=Lh(r),b!==null){for(a.flags|=128,nu(g,!1),r=b.updateQueue,a.updateQueue=r,Xh(a,r),a.subtreeFlags=0,r=u,u=a.child;u!==null;)yp(u,r),u=u.sibling;return Ve(lr,lr.current&1|2),Zt&&ya(a,g.treeForkCount),a.child}r=r.sibling}g.tail!==null&&mn()>Jh&&(a.flags|=128,_=!0,nu(g,!1),a.lanes=4194304)}else{if(!_)if(r=Lh(b),r!==null){if(a.flags|=128,_=!0,r=r.updateQueue,a.updateQueue=r,Xh(a,r),nu(g,!0),g.tail===null&&g.tailMode==="hidden"&&!b.alternate&&!Zt)return Dn(a),null}else 2*mn()-g.renderingStartTime>Jh&&u!==536870912&&(a.flags|=128,_=!0,nu(g,!1),a.lanes=4194304);g.isBackwards?(b.sibling=a.child,a.child=b):(r=g.last,r!==null?r.sibling=b:a.child=b,g.last=b)}return g.tail!==null?(r=g.tail,g.rendering=r,g.tail=r.sibling,g.renderingStartTime=mn(),r.sibling=null,u=lr.current,Ve(lr,_?u&1|2:u&1),Zt&&ya(a,g.treeForkCount),r):(Dn(a),null);case 22:case 23:return Yi(a),R0(),g=a.memoizedState!==null,r!==null?r.memoizedState!==null!==g&&(a.flags|=8192):g&&(a.flags|=8192),g?(u&536870912)!==0&&(a.flags&128)===0&&(Dn(a),a.subtreeFlags&6&&(a.flags|=8192)):Dn(a),u=a.updateQueue,u!==null&&Xh(a,u.retryQueue),u=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),g=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(g=a.memoizedState.cachePool.pool),g!==u&&(a.flags|=2048),r!==null&&Ae(ll),null;case 24:return u=null,r!==null&&(u=r.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),_a(mr),Dn(a),null;case 25:return null;case 30:return null}throw Error(s(156,a.tag))}function Xv(r,a){switch(m0(a),a.tag){case 1:return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return _a(mr),en(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 26:case 27:case 5:return ln(a),null;case 31:if(a.memoizedState!==null){if(Yi(a),a.alternate===null)throw Error(s(340));sl()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 13:if(Yi(a),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(s(340));sl()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return Ae(lr),null;case 4:return en(),null;case 10:return _a(a.type),null;case 22:case 23:return Yi(a),R0(),r!==null&&Ae(ll),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 24:return _a(mr),null;case 25:return null;default:return null}}function q2(r,a){switch(m0(a),a.tag){case 3:_a(mr),en();break;case 26:case 27:case 5:ln(a);break;case 4:en();break;case 31:a.memoizedState!==null&&Yi(a);break;case 13:Yi(a);break;case 19:Ae(lr);break;case 10:_a(a.type);break;case 22:case 23:Yi(a),R0(),r!==null&&Ae(ll);break;case 24:_a(mr)}}function ru(r,a){try{var u=a.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var _=g.next;u=_;do{if((u.tag&r)===r){g=void 0;var b=u.create,O=u.inst;g=b(),O.destroy=g}u=u.next}while(u!==_)}}catch(U){gn(a,a.return,U)}}function fo(r,a,u){try{var g=a.updateQueue,_=g!==null?g.lastEffect:null;if(_!==null){var b=_.next;g=b;do{if((g.tag&r)===r){var O=g.inst,U=O.destroy;if(U!==void 0){O.destroy=void 0,_=a;var ee=u,ge=U;try{ge()}catch(Te){gn(_,ee,Te)}}}g=g.next}while(g!==b)}}catch(Te){gn(a,a.return,Te)}}function Y2(r){var a=r.updateQueue;if(a!==null){var u=r.stateNode;try{kp(a,u)}catch(g){gn(r,r.return,g)}}}function X2(r,a,u){u.props=dl(r.type,r.memoizedProps),u.state=r.memoizedState;try{u.componentWillUnmount()}catch(g){gn(r,a,g)}}function iu(r,a){try{var u=r.ref;if(u!==null){switch(r.tag){case 26:case 27:case 5:var g=r.stateNode;break;case 30:g=r.stateNode;break;default:g=r.stateNode}typeof u=="function"?r.refCleanup=u(g):u.current=g}}catch(_){gn(r,a,_)}}function zs(r,a){var u=r.ref,g=r.refCleanup;if(u!==null)if(typeof g=="function")try{g()}catch(_){gn(r,a,_)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(_){gn(r,a,_)}else u.current=null}function W2(r){var a=r.type,u=r.memoizedProps,g=r.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":u.autoFocus&&g.focus();break e;case"img":u.src?g.src=u.src:u.srcSet&&(g.srcset=u.srcSet)}}catch(_){gn(r,r.return,_)}}function l1(r,a,u){try{var g=r.stateNode;mS(g,r.type,u,a),g[Wt]=a}catch(_){gn(r,r.return,_)}}function K2(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&_o(r.type)||r.tag===4}function c1(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||K2(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&_o(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function u1(r,a,u){var g=r.tag;if(g===5||g===6)r=r.stateNode,a?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(r,a):(a=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,a.appendChild(r),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=ti));else if(g!==4&&(g===27&&_o(r.type)&&(u=r.stateNode,a=null),r=r.child,r!==null))for(u1(r,a,u),r=r.sibling;r!==null;)u1(r,a,u),r=r.sibling}function Wh(r,a,u){var g=r.tag;if(g===5||g===6)r=r.stateNode,a?u.insertBefore(r,a):u.appendChild(r);else if(g!==4&&(g===27&&_o(r.type)&&(u=r.stateNode),r=r.child,r!==null))for(Wh(r,a,u),r=r.sibling;r!==null;)Wh(r,a,u),r=r.sibling}function Q2(r){var a=r.stateNode,u=r.memoizedProps;try{for(var g=r.type,_=a.attributes;_.length;)a.removeAttributeNode(_[0]);zr(a,g,u),a[bn]=r,a[Wt]=u}catch(b){gn(r,r.return,b)}}var va=!1,yr=!1,h1=!1,Z2=typeof WeakSet=="function"?WeakSet:Set,Lr=null;function Wv(r,a){if(r=r.containerInfo,D1=pf,r=P(r),k(r)){if("selectionStart"in r)var u={start:r.selectionStart,end:r.selectionEnd};else e:{u=(u=r.ownerDocument)&&u.defaultView||window;var g=u.getSelection&&u.getSelection();if(g&&g.rangeCount!==0){u=g.anchorNode;var _=g.anchorOffset,b=g.focusNode;g=g.focusOffset;try{u.nodeType,b.nodeType}catch{u=null;break e}var O=0,U=-1,ee=-1,ge=0,Te=0,Ce=r,pe=null;t:for(;;){for(var we;Ce!==u||_!==0&&Ce.nodeType!==3||(U=O+_),Ce!==b||g!==0&&Ce.nodeType!==3||(ee=O+g),Ce.nodeType===3&&(O+=Ce.nodeValue.length),(we=Ce.firstChild)!==null;)pe=Ce,Ce=we;for(;;){if(Ce===r)break t;if(pe===u&&++ge===_&&(U=O),pe===b&&++Te===g&&(ee=O),(we=Ce.nextSibling)!==null)break;Ce=pe,pe=Ce.parentNode}Ce=we}u=U===-1||ee===-1?null:{start:U,end:ee}}else u=null}u=u||{start:0,end:0}}else u=null;for(M1={focusedElem:r,selectionRange:u},pf=!1,Lr=a;Lr!==null;)if(a=Lr,r=a.child,(a.subtreeFlags&1028)!==0&&r!==null)r.return=a,Lr=r;else for(;Lr!==null;){switch(a=Lr,b=a.alternate,r=a.flags,a.tag){case 0:if((r&4)!==0&&(r=a.updateQueue,r=r!==null?r.events:null,r!==null))for(u=0;u<r.length;u++)_=r[u],_.ref.impl=_.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&b!==null){r=void 0,u=a,_=b.memoizedProps,b=b.memoizedState,g=u.stateNode;try{var We=dl(u.type,_);r=g.getSnapshotBeforeUpdate(We,b),g.__reactInternalSnapshotBeforeUpdate=r}catch(ot){gn(u,u.return,ot)}}break;case 3:if((r&1024)!==0){if(r=a.stateNode.containerInfo,u=r.nodeType,u===9)k1(r);else if(u===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":k1(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(s(163))}if(r=a.sibling,r!==null){r.return=a.return,Lr=r;break}Lr=a.return}}function J2(r,a,u){var g=u.flags;switch(u.tag){case 0:case 11:case 15:Ca(r,u),g&4&&ru(5,u);break;case 1:if(Ca(r,u),g&4)if(r=u.stateNode,a===null)try{r.componentDidMount()}catch(O){gn(u,u.return,O)}else{var _=dl(u.type,a.memoizedProps);a=a.memoizedState;try{r.componentDidUpdate(_,a,r.__reactInternalSnapshotBeforeUpdate)}catch(O){gn(u,u.return,O)}}g&64&&Y2(u),g&512&&iu(u,u.return);break;case 3:if(Ca(r,u),g&64&&(r=u.updateQueue,r!==null)){if(a=null,u.child!==null)switch(u.child.tag){case 27:case 5:a=u.child.stateNode;break;case 1:a=u.child.stateNode}try{kp(r,a)}catch(O){gn(u,u.return,O)}}break;case 27:a===null&&g&4&&Q2(u);case 26:case 5:Ca(r,u),a===null&&g&4&&W2(u),g&512&&iu(u,u.return);break;case 12:Ca(r,u);break;case 31:Ca(r,u),g&4&&tx(r,u);break;case 13:Ca(r,u),g&4&&nx(r,u),g&64&&(r=u.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(u=rS.bind(null,u),bS(r,u))));break;case 22:if(g=u.memoizedState!==null||va,!g){a=a!==null&&a.memoizedState!==null||yr,_=va;var b=yr;va=g,(yr=a)&&!b?Ia(r,u,(u.subtreeFlags&8772)!==0):Ca(r,u),va=_,yr=b}break;case 30:break;default:Ca(r,u)}}function $2(r){var a=r.alternate;a!==null&&(r.alternate=null,$2(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&Sr(a)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Fn=null,Ci=!1;function Sa(r,a,u){for(u=u.child;u!==null;)ex(r,a,u),u=u.sibling}function ex(r,a,u){if(Me&&typeof Me.onCommitFiberUnmount=="function")try{Me.onCommitFiberUnmount(Yt,u)}catch{}switch(u.tag){case 26:yr||zs(u,a),Sa(r,a,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:yr||zs(u,a);var g=Fn,_=Ci;_o(u.type)&&(Fn=u.stateNode,Ci=!1),Sa(r,a,u),du(u.stateNode),Fn=g,Ci=_;break;case 5:yr||zs(u,a);case 6:if(g=Fn,_=Ci,Fn=null,Sa(r,a,u),Fn=g,Ci=_,Fn!==null)if(Ci)try{(Fn.nodeType===9?Fn.body:Fn.nodeName==="HTML"?Fn.ownerDocument.body:Fn).removeChild(u.stateNode)}catch(b){gn(u,a,b)}else try{Fn.removeChild(u.stateNode)}catch(b){gn(u,a,b)}break;case 18:Fn!==null&&(Ci?(r=Fn,Yx(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,u.stateNode),ac(r)):Yx(Fn,u.stateNode));break;case 4:g=Fn,_=Ci,Fn=u.stateNode.containerInfo,Ci=!0,Sa(r,a,u),Fn=g,Ci=_;break;case 0:case 11:case 14:case 15:fo(2,u,a),yr||fo(4,u,a),Sa(r,a,u);break;case 1:yr||(zs(u,a),g=u.stateNode,typeof g.componentWillUnmount=="function"&&X2(u,a,g)),Sa(r,a,u);break;case 21:Sa(r,a,u);break;case 22:yr=(g=yr)||u.memoizedState!==null,Sa(r,a,u),yr=g;break;default:Sa(r,a,u)}}function tx(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{ac(r)}catch(u){gn(a,a.return,u)}}}function nx(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{ac(r)}catch(u){gn(a,a.return,u)}}function Kv(r){switch(r.tag){case 31:case 13:case 19:var a=r.stateNode;return a===null&&(a=r.stateNode=new Z2),a;case 22:return r=r.stateNode,a=r._retryCache,a===null&&(a=r._retryCache=new Z2),a;default:throw Error(s(435,r.tag))}}function Kh(r,a){var u=Kv(r);a.forEach(function(g){if(!u.has(g)){u.add(g);var _=iS.bind(null,r,g);g.then(_,_)}})}function Ii(r,a){var u=a.deletions;if(u!==null)for(var g=0;g<u.length;g++){var _=u[g],b=r,O=a,U=O;e:for(;U!==null;){switch(U.tag){case 27:if(_o(U.type)){Fn=U.stateNode,Ci=!1;break e}break;case 5:Fn=U.stateNode,Ci=!1;break e;case 3:case 4:Fn=U.stateNode.containerInfo,Ci=!0;break e}U=U.return}if(Fn===null)throw Error(s(160));ex(b,O,_),Fn=null,Ci=!1,b=_.alternate,b!==null&&(b.return=null),_.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)rx(a,r),a=a.sibling}var Ns=null;function rx(r,a){var u=r.alternate,g=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Ii(a,r),Ni(r),g&4&&(fo(3,r,r.return),ru(3,r),fo(5,r,r.return));break;case 1:Ii(a,r),Ni(r),g&512&&(yr||u===null||zs(u,u.return)),g&64&&va&&(r=r.updateQueue,r!==null&&(g=r.callbacks,g!==null&&(u=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=u===null?g:u.concat(g))));break;case 26:var _=Ns;if(Ii(a,r),Ni(r),g&512&&(yr||u===null||zs(u,u.return)),g&4){var b=u!==null?u.memoizedState:null;if(g=r.memoizedState,u===null)if(g===null)if(r.stateNode===null){e:{g=r.type,u=r.memoizedProps,_=_.ownerDocument||_;t:switch(g){case"title":b=_.getElementsByTagName("title")[0],(!b||b[Ai]||b[bn]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=_.createElement(g),_.head.insertBefore(b,_.querySelector("head > title"))),zr(b,g,u),b[bn]=r,In(b),g=b;break e;case"link":var O=ry("link","href",_).get(g+(u.href||""));if(O){for(var U=0;U<O.length;U++)if(b=O[U],b.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&b.getAttribute("rel")===(u.rel==null?null:u.rel)&&b.getAttribute("title")===(u.title==null?null:u.title)&&b.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){O.splice(U,1);break t}}b=_.createElement(g),zr(b,g,u),_.head.appendChild(b);break;case"meta":if(O=ry("meta","content",_).get(g+(u.content||""))){for(U=0;U<O.length;U++)if(b=O[U],b.getAttribute("content")===(u.content==null?null:""+u.content)&&b.getAttribute("name")===(u.name==null?null:u.name)&&b.getAttribute("property")===(u.property==null?null:u.property)&&b.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&b.getAttribute("charset")===(u.charSet==null?null:u.charSet)){O.splice(U,1);break t}}b=_.createElement(g),zr(b,g,u),_.head.appendChild(b);break;default:throw Error(s(468,g))}b[bn]=r,In(b),g=b}r.stateNode=g}else iy(_,r.type,r.stateNode);else r.stateNode=ny(_,g,r.memoizedProps);else b!==g?(b===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):b.count--,g===null?iy(_,r.type,r.stateNode):ny(_,g,r.memoizedProps)):g===null&&r.stateNode!==null&&l1(r,r.memoizedProps,u.memoizedProps)}break;case 27:Ii(a,r),Ni(r),g&512&&(yr||u===null||zs(u,u.return)),u!==null&&g&4&&l1(r,r.memoizedProps,u.memoizedProps);break;case 5:if(Ii(a,r),Ni(r),g&512&&(yr||u===null||zs(u,u.return)),r.flags&32){_=r.stateNode;try{ei(_,"")}catch(We){gn(r,r.return,We)}}g&4&&r.stateNode!=null&&(_=r.memoizedProps,l1(r,_,u!==null?u.memoizedProps:_)),g&1024&&(h1=!0);break;case 6:if(Ii(a,r),Ni(r),g&4){if(r.stateNode===null)throw Error(s(162));g=r.memoizedProps,u=r.stateNode;try{u.nodeValue=g}catch(We){gn(r,r.return,We)}}break;case 3:if(ff=null,_=Ns,Ns=uf(a.containerInfo),Ii(a,r),Ns=_,Ni(r),g&4&&u!==null&&u.memoizedState.isDehydrated)try{ac(a.containerInfo)}catch(We){gn(r,r.return,We)}h1&&(h1=!1,ix(r));break;case 4:g=Ns,Ns=uf(r.stateNode.containerInfo),Ii(a,r),Ni(r),Ns=g;break;case 12:Ii(a,r),Ni(r);break;case 31:Ii(a,r),Ni(r),g&4&&(g=r.updateQueue,g!==null&&(r.updateQueue=null,Kh(r,g)));break;case 13:Ii(a,r),Ni(r),r.child.flags&8192&&r.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Zh=mn()),g&4&&(g=r.updateQueue,g!==null&&(r.updateQueue=null,Kh(r,g)));break;case 22:_=r.memoizedState!==null;var ee=u!==null&&u.memoizedState!==null,ge=va,Te=yr;if(va=ge||_,yr=Te||ee,Ii(a,r),yr=Te,va=ge,Ni(r),g&8192)e:for(a=r.stateNode,a._visibility=_?a._visibility&-2:a._visibility|1,_&&(u===null||ee||va||yr||gl(r)),u=null,a=r;;){if(a.tag===5||a.tag===26){if(u===null){ee=u=a;try{if(b=ee.stateNode,_)O=b.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none";else{U=ee.stateNode;var Ce=ee.memoizedProps.style,pe=Ce!=null&&Ce.hasOwnProperty("display")?Ce.display:null;U.style.display=pe==null||typeof pe=="boolean"?"":(""+pe).trim()}}catch(We){gn(ee,ee.return,We)}}}else if(a.tag===6){if(u===null){ee=a;try{ee.stateNode.nodeValue=_?"":ee.memoizedProps}catch(We){gn(ee,ee.return,We)}}}else if(a.tag===18){if(u===null){ee=a;try{var we=ee.stateNode;_?Xx(we,!0):Xx(ee.stateNode,!1)}catch(We){gn(ee,ee.return,We)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===r)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break e;for(;a.sibling===null;){if(a.return===null||a.return===r)break e;u===a&&(u=null),a=a.return}u===a&&(u=null),a.sibling.return=a.return,a=a.sibling}g&4&&(g=r.updateQueue,g!==null&&(u=g.retryQueue,u!==null&&(g.retryQueue=null,Kh(r,u))));break;case 19:Ii(a,r),Ni(r),g&4&&(g=r.updateQueue,g!==null&&(r.updateQueue=null,Kh(r,g)));break;case 30:break;case 21:break;default:Ii(a,r),Ni(r)}}function Ni(r){var a=r.flags;if(a&2){try{for(var u,g=r.return;g!==null;){if(K2(g)){u=g;break}g=g.return}if(u==null)throw Error(s(160));switch(u.tag){case 27:var _=u.stateNode,b=c1(r);Wh(r,b,_);break;case 5:var O=u.stateNode;u.flags&32&&(ei(O,""),u.flags&=-33);var U=c1(r);Wh(r,U,O);break;case 3:case 4:var ee=u.stateNode.containerInfo,ge=c1(r);u1(r,ge,ee);break;default:throw Error(s(161))}}catch(Te){gn(r,r.return,Te)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function ix(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var a=r;ix(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),r=r.sibling}}function Ca(r,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)J2(r,a.alternate,a),a=a.sibling}function gl(r){for(r=r.child;r!==null;){var a=r;switch(a.tag){case 0:case 11:case 14:case 15:fo(4,a,a.return),gl(a);break;case 1:zs(a,a.return);var u=a.stateNode;typeof u.componentWillUnmount=="function"&&X2(a,a.return,u),gl(a);break;case 27:du(a.stateNode);case 26:case 5:zs(a,a.return),gl(a);break;case 22:a.memoizedState===null&&gl(a);break;case 30:gl(a);break;default:gl(a)}r=r.sibling}}function Ia(r,a,u){for(u=u&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var g=a.alternate,_=r,b=a,O=b.flags;switch(b.tag){case 0:case 11:case 15:Ia(_,b,u),ru(4,b);break;case 1:if(Ia(_,b,u),g=b,_=g.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(ge){gn(g,g.return,ge)}if(g=b,_=g.updateQueue,_!==null){var U=g.stateNode;try{var ee=_.shared.hiddenCallbacks;if(ee!==null)for(_.shared.hiddenCallbacks=null,_=0;_<ee.length;_++)Pp(ee[_],U)}catch(ge){gn(g,g.return,ge)}}u&&O&64&&Y2(b),iu(b,b.return);break;case 27:Q2(b);case 26:case 5:Ia(_,b,u),u&&g===null&&O&4&&W2(b),iu(b,b.return);break;case 12:Ia(_,b,u);break;case 31:Ia(_,b,u),u&&O&4&&tx(_,b);break;case 13:Ia(_,b,u),u&&O&4&&nx(_,b);break;case 22:b.memoizedState===null&&Ia(_,b,u),iu(b,b.return);break;case 30:break;default:Ia(_,b,u)}a=a.sibling}}function f1(r,a){var u=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==u&&(r!=null&&r.refCount++,u!=null&&Gc(u))}function d1(r,a){r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&Gc(r))}function Rs(r,a,u,g){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)sx(r,a,u,g),a=a.sibling}function sx(r,a,u,g){var _=a.flags;switch(a.tag){case 0:case 11:case 15:Rs(r,a,u,g),_&2048&&ru(9,a);break;case 1:Rs(r,a,u,g);break;case 3:Rs(r,a,u,g),_&2048&&(r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&Gc(r)));break;case 12:if(_&2048){Rs(r,a,u,g),r=a.stateNode;try{var b=a.memoizedProps,O=b.id,U=b.onPostCommit;typeof U=="function"&&U(O,a.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(ee){gn(a,a.return,ee)}}else Rs(r,a,u,g);break;case 31:Rs(r,a,u,g);break;case 13:Rs(r,a,u,g);break;case 23:break;case 22:b=a.stateNode,O=a.alternate,a.memoizedState!==null?b._visibility&2?Rs(r,a,u,g):su(r,a):b._visibility&2?Rs(r,a,u,g):(b._visibility|=2,Kl(r,a,u,g,(a.subtreeFlags&10256)!==0||!1)),_&2048&&f1(O,a);break;case 24:Rs(r,a,u,g),_&2048&&d1(a.alternate,a);break;default:Rs(r,a,u,g)}}function Kl(r,a,u,g,_){for(_=_&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var b=r,O=a,U=u,ee=g,ge=O.flags;switch(O.tag){case 0:case 11:case 15:Kl(b,O,U,ee,_),ru(8,O);break;case 23:break;case 22:var Te=O.stateNode;O.memoizedState!==null?Te._visibility&2?Kl(b,O,U,ee,_):su(b,O):(Te._visibility|=2,Kl(b,O,U,ee,_)),_&&ge&2048&&f1(O.alternate,O);break;case 24:Kl(b,O,U,ee,_),_&&ge&2048&&d1(O.alternate,O);break;default:Kl(b,O,U,ee,_)}a=a.sibling}}function su(r,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var u=r,g=a,_=g.flags;switch(g.tag){case 22:su(u,g),_&2048&&f1(g.alternate,g);break;case 24:su(u,g),_&2048&&d1(g.alternate,g);break;default:su(u,g)}a=a.sibling}}var au=8192;function Ql(r,a,u){if(r.subtreeFlags&au)for(r=r.child;r!==null;)ax(r,a,u),r=r.sibling}function ax(r,a,u){switch(r.tag){case 26:Ql(r,a,u),r.flags&au&&r.memoizedState!==null&&PS(u,Ns,r.memoizedState,r.memoizedProps);break;case 5:Ql(r,a,u);break;case 3:case 4:var g=Ns;Ns=uf(r.stateNode.containerInfo),Ql(r,a,u),Ns=g;break;case 22:r.memoizedState===null&&(g=r.alternate,g!==null&&g.memoizedState!==null?(g=au,au=16777216,Ql(r,a,u),au=g):Ql(r,a,u));break;default:Ql(r,a,u)}}function ox(r){var a=r.alternate;if(a!==null&&(r=a.child,r!==null)){a.child=null;do a=r.sibling,r.sibling=null,r=a;while(r!==null)}}function ou(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var g=a[u];Lr=g,cx(g,r)}ox(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)lx(r),r=r.sibling}function lx(r){switch(r.tag){case 0:case 11:case 15:ou(r),r.flags&2048&&fo(9,r,r.return);break;case 3:ou(r);break;case 12:ou(r);break;case 22:var a=r.stateNode;r.memoizedState!==null&&a._visibility&2&&(r.return===null||r.return.tag!==13)?(a._visibility&=-3,Qh(r)):ou(r);break;default:ou(r)}}function Qh(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var g=a[u];Lr=g,cx(g,r)}ox(r)}for(r=r.child;r!==null;){switch(a=r,a.tag){case 0:case 11:case 15:fo(8,a,a.return),Qh(a);break;case 22:u=a.stateNode,u._visibility&2&&(u._visibility&=-3,Qh(a));break;default:Qh(a)}r=r.sibling}}function cx(r,a){for(;Lr!==null;){var u=Lr;switch(u.tag){case 0:case 11:case 15:fo(8,u,a);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var g=u.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Gc(u.memoizedState.cache)}if(g=u.child,g!==null)g.return=u,Lr=g;else e:for(u=r;Lr!==null;){g=Lr;var _=g.sibling,b=g.return;if($2(g),g===u){Lr=null;break e}if(_!==null){_.return=b,Lr=_;break e}Lr=b}}}var Qv={getCacheForType:function(r){var a=Fr(mr),u=a.data.get(r);return u===void 0&&(u=r(),a.data.set(r,u)),u},cacheSignal:function(){return Fr(mr).controller.signal}},Zv=typeof WeakMap=="function"?WeakMap:Map,on=0,Sn=null,kt=null,jt=0,dn=0,Xi=null,go=!1,Zl=!1,g1=!1,Na=0,$n=0,mo=0,ml=0,m1=0,Wi=0,Jl=0,lu=null,Ri=null,p1=!1,Zh=0,ux=0,Jh=1/0,$h=null,po=null,Nr=0,xo=null,$l=null,Ra=0,x1=0,y1=null,hx=null,cu=0,E1=null;function Ki(){return(on&2)!==0&&jt!==0?jt&-jt:me.T!==null?v1():Tr()}function fx(){if(Wi===0)if((jt&536870912)===0||Zt){var r=bt;bt<<=1,(bt&3932160)===0&&(bt=262144),Wi=r}else Wi=536870912;return r=qi.current,r!==null&&(r.flags|=32),Wi}function Oi(r,a,u){(r===Sn&&(dn===2||dn===9)||r.cancelPendingCommit!==null)&&(ec(r,0),yo(r,jt,Wi,!1)),fi(r,u),((on&2)===0||r!==Sn)&&(r===Sn&&((on&2)===0&&(ml|=u),$n===4&&yo(r,jt,Wi,!1)),Gs(r))}function dx(r,a,u){if((on&6)!==0)throw Error(s(327));var g=!u&&(a&127)===0&&(a&r.expiredLanes)===0||Cn(r,a),_=g?eS(r,a):w1(r,a,!0),b=g;do{if(_===0){Zl&&!g&&yo(r,a,0,!1);break}else{if(u=r.current.alternate,b&&!Jv(u)){_=w1(r,a,!1),b=!1;continue}if(_===2){if(b=a,r.errorRecoveryDisabledLanes&b)var O=0;else O=r.pendingLanes&-536870913,O=O!==0?O:O&536870912?536870912:0;if(O!==0){a=O;e:{var U=r;_=lu;var ee=U.current.memoizedState.isDehydrated;if(ee&&(ec(U,O).flags|=256),O=w1(U,O,!1),O!==2){if(g1&&!ee){U.errorRecoveryDisabledLanes|=b,ml|=b,_=4;break e}b=Ri,Ri=_,b!==null&&(Ri===null?Ri=b:Ri.push.apply(Ri,b))}_=O}if(b=!1,_!==2)continue}}if(_===1){ec(r,0),yo(r,a,0,!0);break}e:{switch(g=r,b=_,b){case 0:case 1:throw Error(s(345));case 4:if((a&4194048)!==a)break;case 6:yo(g,a,Wi,!go);break e;case 2:Ri=null;break;case 3:case 5:break;default:throw Error(s(329))}if((a&62914560)===a&&(_=Zh+300-mn(),10<_)){if(yo(g,a,Wi,!go),Jr(g,0,!0)!==0)break e;Ra=a,g.timeoutHandle=Gx(gx.bind(null,g,u,Ri,$h,p1,a,Wi,ml,Jl,go,b,"Throttled",-0,0),_);break e}gx(g,u,Ri,$h,p1,a,Wi,ml,Jl,go,b,null,-0,0)}}break}while(!0);Gs(r)}function gx(r,a,u,g,_,b,O,U,ee,ge,Te,Ce,pe,we){if(r.timeoutHandle=-1,Ce=a.subtreeFlags,Ce&8192||(Ce&16785408)===16785408){Ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ti},ax(a,b,Ce);var We=(b&62914560)===b?Zh-mn():(b&4194048)===b?ux-mn():0;if(We=kS(Ce,We),We!==null){Ra=b,r.cancelPendingCommit=We(Ax.bind(null,r,a,b,u,g,_,O,U,ee,Te,Ce,null,pe,we)),yo(r,b,O,!ge);return}}Ax(r,a,b,u,g,_,O,U,ee)}function Jv(r){for(var a=r;;){var u=a.tag;if((u===0||u===11||u===15)&&a.flags&16384&&(u=a.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var g=0;g<u.length;g++){var _=u[g],b=_.getSnapshot;_=_.value;try{if(!m(b(),_))return!1}catch{return!1}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function yo(r,a,u,g){a&=~m1,a&=~ml,r.suspendedLanes|=a,r.pingedLanes&=~a,g&&(r.warmLanes|=a),g=r.expirationTimes;for(var _=a;0<_;){var b=31-st(_),O=1<<b;g[b]=-1,_&=~O}u!==0&&ki(r,u,a)}function ef(){return(on&6)===0?(uu(0),!1):!0}function _1(){if(kt!==null){if(dn===0)var r=kt.return;else r=kt,Ea=al=null,k0(r),Gl=null,Yc=0,r=kt;for(;r!==null;)q2(r.alternate,r),r=r.return;kt=null}}function ec(r,a){var u=r.timeoutHandle;u!==-1&&(r.timeoutHandle=-1,yS(u)),u=r.cancelPendingCommit,u!==null&&(r.cancelPendingCommit=null,u()),Ra=0,_1(),Sn=r,kt=u=xa(r.current,null),jt=a,dn=0,Xi=null,go=!1,Zl=Cn(r,a),g1=!1,Jl=Wi=m1=ml=mo=$n=0,Ri=lu=null,p1=!1,(a&8)!==0&&(a|=a&32);var g=r.entangledLanes;if(g!==0)for(r=r.entanglements,g&=a;0<g;){var _=31-st(g),b=1<<_;a|=r[_],g&=~b}return Na=a,wh(),u}function mx(r,a){Tt=null,me.H=eu,a===zl||a===Nh?(a=Op(),dn=3):a===T0?(a=Op(),dn=4):dn=a===J0?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Xi=a,kt===null&&($n=1,zh(r,us(a,r.current)))}function px(){var r=qi.current;return r===null?!0:(jt&4194048)===jt?gs===null:(jt&62914560)===jt||(jt&536870912)!==0?r===gs:!1}function xx(){var r=me.H;return me.H=eu,r===null?eu:r}function yx(){var r=me.A;return me.A=Qv,r}function tf(){$n=4,go||(jt&4194048)!==jt&&qi.current!==null||(Zl=!0),(mo&134217727)===0&&(ml&134217727)===0||Sn===null||yo(Sn,jt,Wi,!1)}function w1(r,a,u){var g=on;on|=2;var _=xx(),b=yx();(Sn!==r||jt!==a)&&($h=null,ec(r,a)),a=!1;var O=$n;e:do try{if(dn!==0&&kt!==null){var U=kt,ee=Xi;switch(dn){case 8:_1(),O=6;break e;case 3:case 2:case 9:case 6:qi.current===null&&(a=!0);var ge=dn;if(dn=0,Xi=null,tc(r,U,ee,ge),u&&Zl){O=0;break e}break;default:ge=dn,dn=0,Xi=null,tc(r,U,ee,ge)}}$v(),O=$n;break}catch(Te){mx(r,Te)}while(!0);return a&&r.shellSuspendCounter++,Ea=al=null,on=g,me.H=_,me.A=b,kt===null&&(Sn=null,jt=0,wh()),O}function $v(){for(;kt!==null;)Ex(kt)}function eS(r,a){var u=on;on|=2;var g=xx(),_=yx();Sn!==r||jt!==a?($h=null,Jh=mn()+500,ec(r,a)):Zl=Cn(r,a);e:do try{if(dn!==0&&kt!==null){a=kt;var b=Xi;t:switch(dn){case 1:dn=0,Xi=null,tc(r,a,b,1);break;case 2:case 9:if(Np(b)){dn=0,Xi=null,_x(a);break}a=function(){dn!==2&&dn!==9||Sn!==r||(dn=7),Gs(r)},b.then(a,a);break e;case 3:dn=7;break e;case 4:dn=5;break e;case 7:Np(b)?(dn=0,Xi=null,_x(a)):(dn=0,Xi=null,tc(r,a,b,7));break;case 5:var O=null;switch(kt.tag){case 26:O=kt.memoizedState;case 5:case 27:var U=kt;if(O?sy(O):U.stateNode.complete){dn=0,Xi=null;var ee=U.sibling;if(ee!==null)kt=ee;else{var ge=U.return;ge!==null?(kt=ge,nf(ge)):kt=null}break t}}dn=0,Xi=null,tc(r,a,b,5);break;case 6:dn=0,Xi=null,tc(r,a,b,6);break;case 8:_1(),$n=6;break e;default:throw Error(s(462))}}tS();break}catch(Te){mx(r,Te)}while(!0);return Ea=al=null,me.H=g,me.A=_,on=u,kt!==null?0:(Sn=null,jt=0,wh(),$n)}function tS(){for(;kt!==null&&!As();)Ex(kt)}function Ex(r){var a=z2(r.alternate,r,Na);r.memoizedProps=r.pendingProps,a===null?nf(r):kt=a}function _x(r){var a=r,u=a.alternate;switch(a.tag){case 15:case 0:a=B2(u,a,a.pendingProps,a.type,void 0,jt);break;case 11:a=B2(u,a,a.pendingProps,a.type.render,a.ref,jt);break;case 5:k0(a);default:q2(u,a),a=kt=yp(a,Na),a=z2(u,a,Na)}r.memoizedProps=r.pendingProps,a===null?nf(r):kt=a}function tc(r,a,u,g){Ea=al=null,k0(a),Gl=null,Yc=0;var _=a.return;try{if(zv(r,_,a,u,jt)){$n=1,zh(r,us(u,r.current)),kt=null;return}}catch(b){if(_!==null)throw kt=_,b;$n=1,zh(r,us(u,r.current)),kt=null;return}a.flags&32768?(Zt||g===1?r=!0:Zl||(jt&536870912)!==0?r=!1:(go=r=!0,(g===2||g===9||g===3||g===6)&&(g=qi.current,g!==null&&g.tag===13&&(g.flags|=16384))),wx(a,r)):nf(a)}function nf(r){var a=r;do{if((a.flags&32768)!==0){wx(a,go);return}r=a.return;var u=Yv(a.alternate,a,Na);if(u!==null){kt=u;return}if(a=a.sibling,a!==null){kt=a;return}kt=a=r}while(a!==null);$n===0&&($n=5)}function wx(r,a){do{var u=Xv(r.alternate,r);if(u!==null){u.flags&=32767,kt=u;return}if(u=r.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!a&&(r=r.sibling,r!==null)){kt=r;return}kt=r=u}while(r!==null);$n=6,kt=null}function Ax(r,a,u,g,_,b,O,U,ee){r.cancelPendingCommit=null;do rf();while(Nr!==0);if((on&6)!==0)throw Error(s(327));if(a!==null){if(a===r.current)throw Error(s(177));if(b=a.lanes|a.childLanes,b|=c0,Br(r,u,b,O,U,ee),r===Sn&&(kt=Sn=null,jt=0),$l=a,xo=r,Ra=u,x1=b,y1=_,hx=g,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,sS(sr,function(){return Cx(),null})):(r.callbackNode=null,r.callbackPriority=0),g=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||g){g=me.T,me.T=null,_=be.p,be.p=2,O=on,on|=4;try{Wv(r,a,u)}finally{on=O,be.p=_,me.T=g}}Nr=1,bx(),Tx(),vx()}}function bx(){if(Nr===1){Nr=0;var r=xo,a=$l,u=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||u){u=me.T,me.T=null;var g=be.p;be.p=2;var _=on;on|=4;try{rx(a,r);var b=M1,O=P(r.containerInfo),U=b.focusedElem,ee=b.selectionRange;if(O!==U&&U&&U.ownerDocument&&R(U.ownerDocument.documentElement,U)){if(ee!==null&&k(U)){var ge=ee.start,Te=ee.end;if(Te===void 0&&(Te=ge),"selectionStart"in U)U.selectionStart=ge,U.selectionEnd=Math.min(Te,U.value.length);else{var Ce=U.ownerDocument||document,pe=Ce&&Ce.defaultView||window;if(pe.getSelection){var we=pe.getSelection(),We=U.textContent.length,ot=Math.min(ee.start,We),En=ee.end===void 0?ot:Math.min(ee.end,We);!we.extend&&ot>En&&(O=En,En=ot,ot=O);var oe=S(U,ot),se=S(U,En);if(oe&&se&&(we.rangeCount!==1||we.anchorNode!==oe.node||we.anchorOffset!==oe.offset||we.focusNode!==se.node||we.focusOffset!==se.offset)){var de=Ce.createRange();de.setStart(oe.node,oe.offset),we.removeAllRanges(),ot>En?(we.addRange(de),we.extend(se.node,se.offset)):(de.setEnd(se.node,se.offset),we.addRange(de))}}}}for(Ce=[],we=U;we=we.parentNode;)we.nodeType===1&&Ce.push({element:we,left:we.scrollLeft,top:we.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<Ce.length;U++){var ve=Ce[U];ve.element.scrollLeft=ve.left,ve.element.scrollTop=ve.top}}pf=!!D1,M1=D1=null}finally{on=_,be.p=g,me.T=u}}r.current=a,Nr=2}}function Tx(){if(Nr===2){Nr=0;var r=xo,a=$l,u=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||u){u=me.T,me.T=null;var g=be.p;be.p=2;var _=on;on|=4;try{J2(r,a.alternate,a)}finally{on=_,be.p=g,me.T=u}}Nr=3}}function vx(){if(Nr===4||Nr===3){Nr=0,es();var r=xo,a=$l,u=Ra,g=hx;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Nr=5:(Nr=0,$l=xo=null,Sx(r,r.pendingLanes));var _=r.pendingLanes;if(_===0&&(po=null),br(u),a=a.stateNode,Me&&typeof Me.onCommitFiberRoot=="function")try{Me.onCommitFiberRoot(Yt,a,void 0,(a.current.flags&128)===128)}catch{}if(g!==null){a=me.T,_=be.p,be.p=2,me.T=null;try{for(var b=r.onRecoverableError,O=0;O<g.length;O++){var U=g[O];b(U.value,{componentStack:U.stack})}}finally{me.T=a,be.p=_}}(Ra&3)!==0&&rf(),Gs(r),_=r.pendingLanes,(u&261930)!==0&&(_&42)!==0?r===E1?cu++:(cu=0,E1=r):cu=0,uu(0)}}function Sx(r,a){(r.pooledCacheLanes&=a)===0&&(a=r.pooledCache,a!=null&&(r.pooledCache=null,Gc(a)))}function rf(){return bx(),Tx(),vx(),Cx()}function Cx(){if(Nr!==5)return!1;var r=xo,a=x1;x1=0;var u=br(Ra),g=me.T,_=be.p;try{be.p=32>u?32:u,me.T=null,u=y1,y1=null;var b=xo,O=Ra;if(Nr=0,$l=xo=null,Ra=0,(on&6)!==0)throw Error(s(331));var U=on;if(on|=4,lx(b.current),sx(b,b.current,O,u),on=U,uu(0,!1),Me&&typeof Me.onPostCommitFiberRoot=="function")try{Me.onPostCommitFiberRoot(Yt,b)}catch{}return!0}finally{be.p=_,me.T=g,Sx(r,a)}}function Ix(r,a,u){a=us(u,a),a=Z0(r.stateNode,a,2),r=co(r,a,2),r!==null&&(fi(r,2),Gs(r))}function gn(r,a,u){if(r.tag===3)Ix(r,r,u);else for(;a!==null;){if(a.tag===3){Ix(a,r,u);break}else if(a.tag===1){var g=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(po===null||!po.has(g))){r=us(u,r),u=N2(2),g=co(a,u,2),g!==null&&(R2(u,g,a,r),fi(g,2),Gs(g));break}}a=a.return}}function A1(r,a,u){var g=r.pingCache;if(g===null){g=r.pingCache=new Zv;var _=new Set;g.set(a,_)}else _=g.get(a),_===void 0&&(_=new Set,g.set(a,_));_.has(u)||(g1=!0,_.add(u),r=nS.bind(null,r,a,u),a.then(r,r))}function nS(r,a,u){var g=r.pingCache;g!==null&&g.delete(a),r.pingedLanes|=r.suspendedLanes&u,r.warmLanes&=~u,Sn===r&&(jt&u)===u&&($n===4||$n===3&&(jt&62914560)===jt&&300>mn()-Zh?(on&2)===0&&ec(r,0):m1|=u,Jl===jt&&(Jl=0)),Gs(r)}function Nx(r,a){a===0&&(a=Pn()),r=rl(r,a),r!==null&&(fi(r,a),Gs(r))}function rS(r){var a=r.memoizedState,u=0;a!==null&&(u=a.retryLane),Nx(r,u)}function iS(r,a){var u=0;switch(r.tag){case 31:case 13:var g=r.stateNode,_=r.memoizedState;_!==null&&(u=_.retryLane);break;case 19:g=r.stateNode;break;case 22:g=r.stateNode._retryCache;break;default:throw Error(s(314))}g!==null&&g.delete(a),Nx(r,u)}function sS(r,a){return An(r,a)}var sf=null,nc=null,b1=!1,af=!1,T1=!1,Eo=0;function Gs(r){r!==nc&&r.next===null&&(nc===null?sf=nc=r:nc=nc.next=r),af=!0,b1||(b1=!0,oS())}function uu(r,a){if(!T1&&af){T1=!0;do for(var u=!1,g=sf;g!==null;){if(r!==0){var _=g.pendingLanes;if(_===0)var b=0;else{var O=g.suspendedLanes,U=g.pingedLanes;b=(1<<31-st(42|r)+1)-1,b&=_&~(O&~U),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(u=!0,Mx(g,b))}else b=jt,b=Jr(g,g===Sn?b:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(b&3)===0||Cn(g,b)||(u=!0,Mx(g,b));g=g.next}while(u);T1=!1}}function aS(){Rx()}function Rx(){af=b1=!1;var r=0;Eo!==0&&xS()&&(r=Eo);for(var a=mn(),u=null,g=sf;g!==null;){var _=g.next,b=Ox(g,a);b===0?(g.next=null,u===null?sf=_:u.next=_,_===null&&(nc=u)):(u=g,(r!==0||(b&3)!==0)&&(af=!0)),g=_}Nr!==0&&Nr!==5||uu(r),Eo!==0&&(Eo=0)}function Ox(r,a){for(var u=r.suspendedLanes,g=r.pingedLanes,_=r.expirationTimes,b=r.pendingLanes&-62914561;0<b;){var O=31-st(b),U=1<<O,ee=_[O];ee===-1?((U&u)===0||(U&g)!==0)&&(_[O]=Ps(U,a)):ee<=a&&(r.expiredLanes|=U),b&=~U}if(a=Sn,u=jt,u=Jr(r,r===a?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),g=r.callbackNode,u===0||r===a&&(dn===2||dn===9)||r.cancelPendingCommit!==null)return g!==null&&g!==null&&He(g),r.callbackNode=null,r.callbackPriority=0;if((u&3)===0||Cn(r,u)){if(a=u&-u,a===r.callbackPriority)return a;switch(g!==null&&He(g),br(u)){case 2:case 8:u=Kr;break;case 32:u=sr;break;case 268435456:u=Ls;break;default:u=sr}return g=Dx.bind(null,r),u=An(u,g),r.callbackPriority=a,r.callbackNode=u,a}return g!==null&&g!==null&&He(g),r.callbackPriority=2,r.callbackNode=null,2}function Dx(r,a){if(Nr!==0&&Nr!==5)return r.callbackNode=null,r.callbackPriority=0,null;var u=r.callbackNode;if(rf()&&r.callbackNode!==u)return null;var g=jt;return g=Jr(r,r===Sn?g:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),g===0?null:(dx(r,g,a),Ox(r,mn()),r.callbackNode!=null&&r.callbackNode===u?Dx.bind(null,r):null)}function Mx(r,a){if(rf())return null;dx(r,a,!0)}function oS(){ES(function(){(on&6)!==0?An(fr,aS):Rx()})}function v1(){if(Eo===0){var r=Fl;r===0&&(r=Qr,Qr<<=1,(Qr&261888)===0&&(Qr=256)),Eo=r}return Eo}function Lx(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Bs(""+r)}function Px(r,a){var u=a.ownerDocument.createElement("input");return u.name=a.name,u.value=a.value,r.id&&u.setAttribute("form",r.id),a.parentNode.insertBefore(u,a),r=new FormData(r),u.parentNode.removeChild(u),r}function lS(r,a,u,g,_){if(a==="submit"&&u&&u.stateNode===_){var b=Lx((_[Wt]||null).action),O=g.submitter;O&&(a=(a=O[Wt]||null)?Lx(a.formAction):O.getAttribute("formAction"),a!==null&&(b=a,O=null));var U=new Rn("action","action",null,g,_);r.push({event:U,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(Eo!==0){var ee=O?Px(_,O):new FormData(_);q0(u,{pending:!0,data:ee,method:_.method,action:b},null,ee)}}else typeof b=="function"&&(U.preventDefault(),ee=O?Px(_,O):new FormData(_),q0(u,{pending:!0,data:ee,method:_.method,action:b},b,ee))},currentTarget:_}]})}}for(var S1=0;S1<Fc.length;S1++){var C1=Fc[S1],cS=C1.toLowerCase(),uS=C1[0].toUpperCase()+C1.slice(1);Is(cS,"on"+uS)}Is(Si,"onAnimationEnd"),Is(Vr,"onAnimationIteration"),Is(hn,"onAnimationStart"),Is("dblclick","onDoubleClick"),Is("focusin","onFocus"),Is("focusout","onBlur"),Is(Ir,"onTransitionRun"),Is(yi,"onTransitionStart"),Is(no,"onTransitionCancel"),Is(pa,"onTransitionEnd"),Cr("onMouseEnter",["mouseout","mouseover"]),Cr("onMouseLeave",["mouseout","mouseover"]),Cr("onPointerEnter",["pointerout","pointerover"]),Cr("onPointerLeave",["pointerout","pointerover"]),Kt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Kt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Kt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Kt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Kt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Kt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hu));function kx(r,a){a=(a&4)!==0;for(var u=0;u<r.length;u++){var g=r[u],_=g.event;g=g.listeners;e:{var b=void 0;if(a)for(var O=g.length-1;0<=O;O--){var U=g[O],ee=U.instance,ge=U.currentTarget;if(U=U.listener,ee!==b&&_.isPropagationStopped())break e;b=U,_.currentTarget=ge;try{b(_)}catch(Te){_h(Te)}_.currentTarget=null,b=ee}else for(O=0;O<g.length;O++){if(U=g[O],ee=U.instance,ge=U.currentTarget,U=U.listener,ee!==b&&_.isPropagationStopped())break e;b=U,_.currentTarget=ge;try{b(_)}catch(Te){_h(Te)}_.currentTarget=null,b=ee}}}}function Bt(r,a){var u=a[Bi];u===void 0&&(u=a[Bi]=new Set);var g=r+"__bubble";u.has(g)||(Bx(a,r,2,!1),u.add(g))}function I1(r,a,u){var g=0;a&&(g|=4),Bx(u,r,g,a)}var of="_reactListening"+Math.random().toString(36).slice(2);function N1(r){if(!r[of]){r[of]=!0,Ie.forEach(function(u){u!=="selectionchange"&&(hS.has(u)||I1(u,!1,r),I1(u,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[of]||(a[of]=!0,I1("selectionchange",!1,a))}}function Bx(r,a,u,g){switch(fy(a)){case 2:var _=VS;break;case 8:_=jS;break;default:_=G1}u=_.bind(null,a,u,r),_=void 0,!oa||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(_=!0),g?_!==void 0?r.addEventListener(a,u,{capture:!0,passive:_}):r.addEventListener(a,u,!0):_!==void 0?r.addEventListener(a,u,{passive:_}):r.addEventListener(a,u,!1)}function R1(r,a,u,g,_){var b=g;if((a&1)===0&&(a&2)===0&&g!==null)e:for(;;){if(g===null)return;var O=g.tag;if(O===3||O===4){var U=g.stateNode.containerInfo;if(U===_)break;if(O===4)for(O=g.return;O!==null;){var ee=O.tag;if((ee===3||ee===4)&&O.stateNode.containerInfo===_)return;O=O.return}for(;U!==null;){if(O=pn(U),O===null)return;if(ee=O.tag,ee===5||ee===6||ee===26||ee===27){g=b=O;continue e}U=U.parentNode}}g=g.return}Us(function(){var ge=b,Te=bi(u),Ce=[];e:{var pe=Eh.get(r);if(pe!==void 0){var we=Rn,We=r;switch(r){case"keypress":if(ji(u)===0)break e;case"keydown":case"keyup":we=fa;break;case"focusin":We="focus",we=ua;break;case"focusout":We="blur",we=ua;break;case"beforeblur":case"afterblur":we=ua;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=Jt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=ca;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=N;break;case Si:case Vr:case hn:we=yt;break;case pa:we=F;break;case"scroll":case"scrollend":we=Za;break;case"wheel":we=Ee;break;case"copy":case"cut":case"paste":we=ha;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=Pt;break;case"toggle":case"beforetoggle":we=ft}var ot=(a&4)!==0,En=!ot&&(r==="scroll"||r==="scrollend"),oe=ot?pe!==null?pe+"Capture":null:pe;ot=[];for(var se=ge,de;se!==null;){var ve=se;if(de=ve.stateNode,ve=ve.tag,ve!==5&&ve!==26&&ve!==27||de===null||oe===null||(ve=at(se,oe),ve!=null&&ot.push(fu(se,ve,de))),En)break;se=se.return}0<ot.length&&(pe=new we(pe,We,null,u,Te),Ce.push({event:pe,listeners:ot}))}}if((a&7)===0){e:{if(pe=r==="mouseover"||r==="pointerover",we=r==="mouseout"||r==="pointerout",pe&&u!==aa&&(We=u.relatedTarget||u.fromElement)&&(pn(We)||We[vr]))break e;if((we||pe)&&(pe=Te.window===Te?Te:(pe=Te.ownerDocument)?pe.defaultView||pe.parentWindow:window,we?(We=u.relatedTarget||u.toElement,we=ge,We=We?pn(We):null,We!==null&&(En=f(We),ot=We.tag,We!==En||ot!==5&&ot!==27&&ot!==6)&&(We=null)):(we=null,We=ge),we!==We)){if(ot=Jt,ve="onMouseLeave",oe="onMouseEnter",se="mouse",(r==="pointerout"||r==="pointerover")&&(ot=Pt,ve="onPointerLeave",oe="onPointerEnter",se="pointer"),En=we==null?pe:Or(we),de=We==null?pe:Or(We),pe=new ot(ve,se+"leave",we,u,Te),pe.target=En,pe.relatedTarget=de,ve=null,pn(Te)===ge&&(ot=new ot(oe,se+"enter",We,u,Te),ot.target=de,ot.relatedTarget=En,ve=ot),En=ve,we&&We)t:{for(ot=fS,oe=we,se=We,de=0,ve=oe;ve;ve=ot(ve))de++;ve=0;for(var tt=se;tt;tt=ot(tt))ve++;for(;0<de-ve;)oe=ot(oe),de--;for(;0<ve-de;)se=ot(se),ve--;for(;de--;){if(oe===se||se!==null&&oe===se.alternate){ot=oe;break t}oe=ot(oe),se=ot(se)}ot=null}else ot=null;we!==null&&Ux(Ce,pe,we,ot,!1),We!==null&&En!==null&&Ux(Ce,En,We,ot,!0)}}e:{if(pe=ge?Or(ge):window,we=pe.nodeName&&pe.nodeName.toLowerCase(),we==="select"||we==="input"&&pe.type==="file")var nn=zi;else if(jc(pe))if(yh)nn=h;else{nn=o;var Qe=i}else we=pe.nodeName,!we||we.toLowerCase()!=="input"||pe.type!=="checkbox"&&pe.type!=="radio"?ge&&cn(ge.elementType)&&(nn=zi):nn=l;if(nn&&(nn=nn(r,ge))){Hi(Ce,nn,u,Te);break e}Qe&&Qe(r,pe,ge),r==="focusout"&&ge&&pe.type==="number"&&ge.memoizedProps.value!=null&&z(pe,"number",pe.value)}switch(Qe=ge?Or(ge):window,r){case"focusin":(jc(Qe)||Qe.contentEditable==="true")&&(te=Qe,ne=ge,ue=null);break;case"focusout":ue=ne=te=null;break;case"mousedown":ye=!0;break;case"contextmenu":case"mouseup":case"dragend":ye=!1,ke(Ce,u,Te);break;case"selectionchange":if(G)break;case"keydown":case"keyup":ke(Ce,u,Te)}var Nt;if(Qt)e:{switch(r){case"compositionstart":var Ft="onCompositionStart";break e;case"compositionend":Ft="onCompositionEnd";break e;case"compositionupdate":Ft="onCompositionUpdate";break e}Ft=void 0}else to?da(r,u)&&(Ft="onCompositionEnd"):r==="keydown"&&u.keyCode===229&&(Ft="onCompositionStart");Ft&&(os&&u.locale!=="ko"&&(to||Ft!=="onCompositionStart"?Ft==="onCompositionEnd"&&to&&(Nt=vs()):(Ui=Te,Vi="value"in Ui?Ui.value:Ui.textContent,to=!0)),Qe=lf(ge,Ft),0<Qe.length&&(Ft=new is(Ft,r,null,u,Te),Ce.push({event:Ft,listeners:Qe}),Nt?Ft.data=Nt:(Nt=ls(u),Nt!==null&&(Ft.data=Nt)))),(Nt=pi?js(r,u):Ll(r,u))&&(Ft=lf(ge,"onBeforeInput"),0<Ft.length&&(Qe=new is("onBeforeInput","beforeinput",null,u,Te),Ce.push({event:Qe,listeners:Ft}),Qe.data=Nt)),lS(Ce,r,ge,u,Te)}kx(Ce,a)})}function fu(r,a,u){return{instance:r,listener:a,currentTarget:u}}function lf(r,a){for(var u=a+"Capture",g=[];r!==null;){var _=r,b=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||b===null||(_=at(r,u),_!=null&&g.unshift(fu(r,_,b)),_=at(r,a),_!=null&&g.push(fu(r,_,b))),r.tag===3)return g;r=r.return}return[]}function fS(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function Ux(r,a,u,g,_){for(var b=a._reactName,O=[];u!==null&&u!==g;){var U=u,ee=U.alternate,ge=U.stateNode;if(U=U.tag,ee!==null&&ee===g)break;U!==5&&U!==26&&U!==27||ge===null||(ee=ge,_?(ge=at(u,b),ge!=null&&O.unshift(fu(u,ge,ee))):_||(ge=at(u,b),ge!=null&&O.push(fu(u,ge,ee)))),u=u.return}O.length!==0&&r.push({event:a,listeners:O})}var dS=/\r\n?/g,gS=/\u0000|\uFFFD/g;function Vx(r){return(typeof r=="string"?r:""+r).replace(dS,`
`).replace(gS,"")}function jx(r,a){return a=Vx(a),Vx(r)===a}function yn(r,a,u,g,_,b){switch(u){case"children":typeof g=="string"?a==="body"||a==="textarea"&&g===""||ei(r,g):(typeof g=="number"||typeof g=="bigint")&&a!=="body"&&ei(r,""+g);break;case"className":St(r,"class",g);break;case"tabIndex":St(r,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":St(r,u,g);break;case"style":Je(r,g,b);break;case"data":if(a!=="object"){St(r,"data",g);break}case"src":case"href":if(g===""&&(a!=="a"||u!=="href")){r.removeAttribute(u);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){r.removeAttribute(u);break}g=Bs(""+g),r.setAttribute(u,g);break;case"action":case"formAction":if(typeof g=="function"){r.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(u==="formAction"?(a!=="input"&&yn(r,a,"name",_.name,_,null),yn(r,a,"formEncType",_.formEncType,_,null),yn(r,a,"formMethod",_.formMethod,_,null),yn(r,a,"formTarget",_.formTarget,_,null)):(yn(r,a,"encType",_.encType,_,null),yn(r,a,"method",_.method,_,null),yn(r,a,"target",_.target,_,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){r.removeAttribute(u);break}g=Bs(""+g),r.setAttribute(u,g);break;case"onClick":g!=null&&(r.onclick=ti);break;case"onScroll":g!=null&&Bt("scroll",r);break;case"onScrollEnd":g!=null&&Bt("scrollend",r);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(s(61));if(u=g.__html,u!=null){if(_.children!=null)throw Error(s(60));r.innerHTML=u}}break;case"multiple":r.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":r.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){r.removeAttribute("xlink:href");break}u=Bs(""+g),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?r.setAttribute(u,""+g):r.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?r.setAttribute(u,""):r.removeAttribute(u);break;case"capture":case"download":g===!0?r.setAttribute(u,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?r.setAttribute(u,g):r.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?r.setAttribute(u,g):r.removeAttribute(u);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?r.removeAttribute(u):r.setAttribute(u,g);break;case"popover":Bt("beforetoggle",r),Bt("toggle",r),Ke(r,"popover",g);break;case"xlinkActuate":Ct(r,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Ct(r,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Ct(r,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Ct(r,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Ct(r,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Ct(r,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Ct(r,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Ct(r,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Ct(r,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Ke(r,"is",g);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=Zo.get(u)||u,Ke(r,u,g))}}function O1(r,a,u,g,_,b){switch(u){case"style":Je(r,g,b);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(s(61));if(u=g.__html,u!=null){if(_.children!=null)throw Error(s(60));r.innerHTML=u}}break;case"children":typeof g=="string"?ei(r,g):(typeof g=="number"||typeof g=="bigint")&&ei(r,""+g);break;case"onScroll":g!=null&&Bt("scroll",r);break;case"onScrollEnd":g!=null&&Bt("scrollend",r);break;case"onClick":g!=null&&(r.onclick=ti);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ra.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(_=u.endsWith("Capture"),a=u.slice(2,_?u.length-7:void 0),b=r[Wt]||null,b=b!=null?b[u]:null,typeof b=="function"&&r.removeEventListener(a,b,_),typeof g=="function")){typeof b!="function"&&b!==null&&(u in r?r[u]=null:r.hasAttribute(u)&&r.removeAttribute(u)),r.addEventListener(a,g,_);break e}u in r?r[u]=g:g===!0?r.setAttribute(u,""):Ke(r,u,g)}}}function zr(r,a,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Bt("error",r),Bt("load",r);var g=!1,_=!1,b;for(b in u)if(u.hasOwnProperty(b)){var O=u[b];if(O!=null)switch(b){case"src":g=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:yn(r,a,b,O,u,null)}}_&&yn(r,a,"srcSet",u.srcSet,u,null),g&&yn(r,a,"src",u.src,u,null);return;case"input":Bt("invalid",r);var U=b=O=_=null,ee=null,ge=null;for(g in u)if(u.hasOwnProperty(g)){var Te=u[g];if(Te!=null)switch(g){case"name":_=Te;break;case"type":O=Te;break;case"checked":ee=Te;break;case"defaultChecked":ge=Te;break;case"value":b=Te;break;case"defaultValue":U=Te;break;case"children":case"dangerouslySetInnerHTML":if(Te!=null)throw Error(s(137,a));break;default:yn(r,a,g,Te,u,null)}}he(r,b,U,ee,ge,O,_,!1);return;case"select":Bt("invalid",r),g=O=b=null;for(_ in u)if(u.hasOwnProperty(_)&&(U=u[_],U!=null))switch(_){case"value":b=U;break;case"defaultValue":O=U;break;case"multiple":g=U;default:yn(r,a,_,U,u,null)}a=b,u=O,r.multiple=!!g,a!=null?Xe(r,!!g,a,!1):u!=null&&Xe(r,!!g,u,!0);return;case"textarea":Bt("invalid",r),b=_=g=null;for(O in u)if(u.hasOwnProperty(O)&&(U=u[O],U!=null))switch(O){case"value":g=U;break;case"defaultValue":_=U;break;case"children":b=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(s(91));break;default:yn(r,a,O,U,u,null)}or(r,g,_,b);return;case"option":for(ee in u)if(u.hasOwnProperty(ee)&&(g=u[ee],g!=null))switch(ee){case"selected":r.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:yn(r,a,ee,g,u,null)}return;case"dialog":Bt("beforetoggle",r),Bt("toggle",r),Bt("cancel",r),Bt("close",r);break;case"iframe":case"object":Bt("load",r);break;case"video":case"audio":for(g=0;g<hu.length;g++)Bt(hu[g],r);break;case"image":Bt("error",r),Bt("load",r);break;case"details":Bt("toggle",r);break;case"embed":case"source":case"link":Bt("error",r),Bt("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ge in u)if(u.hasOwnProperty(ge)&&(g=u[ge],g!=null))switch(ge){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:yn(r,a,ge,g,u,null)}return;default:if(cn(a)){for(Te in u)u.hasOwnProperty(Te)&&(g=u[Te],g!==void 0&&O1(r,a,Te,g,u,void 0));return}}for(U in u)u.hasOwnProperty(U)&&(g=u[U],g!=null&&yn(r,a,U,g,u,null))}function mS(r,a,u,g){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,b=null,O=null,U=null,ee=null,ge=null,Te=null;for(we in u){var Ce=u[we];if(u.hasOwnProperty(we)&&Ce!=null)switch(we){case"checked":break;case"value":break;case"defaultValue":ee=Ce;default:g.hasOwnProperty(we)||yn(r,a,we,null,g,Ce)}}for(var pe in g){var we=g[pe];if(Ce=u[pe],g.hasOwnProperty(pe)&&(we!=null||Ce!=null))switch(pe){case"type":b=we;break;case"name":_=we;break;case"checked":ge=we;break;case"defaultChecked":Te=we;break;case"value":O=we;break;case"defaultValue":U=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(s(137,a));break;default:we!==Ce&&yn(r,a,pe,we,g,Ce)}}zn(r,O,U,ee,ge,Te,b,_);return;case"select":we=O=U=pe=null;for(b in u)if(ee=u[b],u.hasOwnProperty(b)&&ee!=null)switch(b){case"value":break;case"multiple":we=ee;default:g.hasOwnProperty(b)||yn(r,a,b,null,g,ee)}for(_ in g)if(b=g[_],ee=u[_],g.hasOwnProperty(_)&&(b!=null||ee!=null))switch(_){case"value":pe=b;break;case"defaultValue":U=b;break;case"multiple":O=b;default:b!==ee&&yn(r,a,_,b,g,ee)}a=U,u=O,g=we,pe!=null?Xe(r,!!u,pe,!1):!!g!=!!u&&(a!=null?Xe(r,!!u,a,!0):Xe(r,!!u,u?[]:"",!1));return;case"textarea":we=pe=null;for(U in u)if(_=u[U],u.hasOwnProperty(U)&&_!=null&&!g.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:yn(r,a,U,null,g,_)}for(O in g)if(_=g[O],b=u[O],g.hasOwnProperty(O)&&(_!=null||b!=null))switch(O){case"value":pe=_;break;case"defaultValue":we=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(s(91));break;default:_!==b&&yn(r,a,O,_,g,b)}Gn(r,pe,we);return;case"option":for(var We in u)if(pe=u[We],u.hasOwnProperty(We)&&pe!=null&&!g.hasOwnProperty(We))switch(We){case"selected":r.selected=!1;break;default:yn(r,a,We,null,g,pe)}for(ee in g)if(pe=g[ee],we=u[ee],g.hasOwnProperty(ee)&&pe!==we&&(pe!=null||we!=null))switch(ee){case"selected":r.selected=pe&&typeof pe!="function"&&typeof pe!="symbol";break;default:yn(r,a,ee,pe,g,we)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ot in u)pe=u[ot],u.hasOwnProperty(ot)&&pe!=null&&!g.hasOwnProperty(ot)&&yn(r,a,ot,null,g,pe);for(ge in g)if(pe=g[ge],we=u[ge],g.hasOwnProperty(ge)&&pe!==we&&(pe!=null||we!=null))switch(ge){case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(s(137,a));break;default:yn(r,a,ge,pe,g,we)}return;default:if(cn(a)){for(var En in u)pe=u[En],u.hasOwnProperty(En)&&pe!==void 0&&!g.hasOwnProperty(En)&&O1(r,a,En,void 0,g,pe);for(Te in g)pe=g[Te],we=u[Te],!g.hasOwnProperty(Te)||pe===we||pe===void 0&&we===void 0||O1(r,a,Te,pe,g,we);return}}for(var oe in u)pe=u[oe],u.hasOwnProperty(oe)&&pe!=null&&!g.hasOwnProperty(oe)&&yn(r,a,oe,null,g,pe);for(Ce in g)pe=g[Ce],we=u[Ce],!g.hasOwnProperty(Ce)||pe===we||pe==null&&we==null||yn(r,a,Ce,pe,g,we)}function Fx(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function pS(){if(typeof performance.getEntriesByType=="function"){for(var r=0,a=0,u=performance.getEntriesByType("resource"),g=0;g<u.length;g++){var _=u[g],b=_.transferSize,O=_.initiatorType,U=_.duration;if(b&&U&&Fx(O)){for(O=0,U=_.responseEnd,g+=1;g<u.length;g++){var ee=u[g],ge=ee.startTime;if(ge>U)break;var Te=ee.transferSize,Ce=ee.initiatorType;Te&&Fx(Ce)&&(ee=ee.responseEnd,O+=Te*(ee<U?1:(U-ge)/(ee-ge)))}if(--g,a+=8*(b+O)/(_.duration/1e3),r++,10<r)break}}if(0<r)return a/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var D1=null,M1=null;function cf(r){return r.nodeType===9?r:r.ownerDocument}function Hx(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zx(r,a){if(r===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&a==="foreignObject"?0:r}function L1(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var P1=null;function xS(){var r=window.event;return r&&r.type==="popstate"?r===P1?!1:(P1=r,!0):(P1=null,!1)}var Gx=typeof setTimeout=="function"?setTimeout:void 0,yS=typeof clearTimeout=="function"?clearTimeout:void 0,qx=typeof Promise=="function"?Promise:void 0,ES=typeof queueMicrotask=="function"?queueMicrotask:typeof qx<"u"?function(r){return qx.resolve(null).then(r).catch(_S)}:Gx;function _S(r){setTimeout(function(){throw r})}function _o(r){return r==="head"}function Yx(r,a){var u=a,g=0;do{var _=u.nextSibling;if(r.removeChild(u),_&&_.nodeType===8)if(u=_.data,u==="/$"||u==="/&"){if(g===0){r.removeChild(_),ac(a);return}g--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")g++;else if(u==="html")du(r.ownerDocument.documentElement);else if(u==="head"){u=r.ownerDocument.head,du(u);for(var b=u.firstChild;b;){var O=b.nextSibling,U=b.nodeName;b[Ai]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&b.rel.toLowerCase()==="stylesheet"||u.removeChild(b),b=O}}else u==="body"&&du(r.ownerDocument.body);u=_}while(u);ac(a)}function Xx(r,a){var u=r;r=0;do{var g=u.nextSibling;if(u.nodeType===1?a?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(a?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(r===0)break;r--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||r++;u=g}while(u)}function k1(r){var a=r.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var u=a;switch(a=a.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":k1(u),Sr(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}r.removeChild(u)}}function wS(r,a,u,g){for(;r.nodeType===1;){var _=u;if(r.nodeName.toLowerCase()!==a.toLowerCase()){if(!g&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(g){if(!r[Ai])switch(a){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(b=r.getAttribute("rel"),b==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(b!==_.rel||r.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||r.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||r.getAttribute("title")!==(_.title==null?null:_.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(b=r.getAttribute("src"),(b!==(_.src==null?null:_.src)||r.getAttribute("type")!==(_.type==null?null:_.type)||r.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&b&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(a==="input"&&r.type==="hidden"){var b=_.name==null?null:""+_.name;if(_.type==="hidden"&&r.getAttribute("name")===b)return r}else return r;if(r=ms(r.nextSibling),r===null)break}return null}function AS(r,a,u){if(a==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!u||(r=ms(r.nextSibling),r===null))return null;return r}function Wx(r,a){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!a||(r=ms(r.nextSibling),r===null))return null;return r}function B1(r){return r.data==="$?"||r.data==="$~"}function U1(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function bS(r,a){var u=r.ownerDocument;if(r.data==="$~")r._reactRetry=a;else if(r.data!=="$?"||u.readyState!=="loading")a();else{var g=function(){a(),u.removeEventListener("DOMContentLoaded",g)};u.addEventListener("DOMContentLoaded",g),r._reactRetry=g}}function ms(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return r}var V1=null;function Kx(r){r=r.nextSibling;for(var a=0;r;){if(r.nodeType===8){var u=r.data;if(u==="/$"||u==="/&"){if(a===0)return ms(r.nextSibling);a--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||a++}r=r.nextSibling}return null}function Qx(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var u=r.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(a===0)return r;a--}else u!=="/$"&&u!=="/&"||a++}r=r.previousSibling}return null}function Zx(r,a,u){switch(a=cf(u),r){case"html":if(r=a.documentElement,!r)throw Error(s(452));return r;case"head":if(r=a.head,!r)throw Error(s(453));return r;case"body":if(r=a.body,!r)throw Error(s(454));return r;default:throw Error(s(451))}}function du(r){for(var a=r.attributes;a.length;)r.removeAttributeNode(a[0]);Sr(r)}var ps=new Map,Jx=new Set;function uf(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Oa=be.d;be.d={f:TS,r:vS,D:SS,C:CS,L:IS,m:NS,X:OS,S:RS,M:DS};function TS(){var r=Oa.f(),a=ef();return r||a}function vS(r){var a=Dt(r);a!==null&&a.tag===5&&a.type==="form"?m2(a):Oa.r(r)}var rc=typeof document>"u"?null:document;function $x(r,a,u){var g=rc;if(g&&typeof a=="string"&&a){var _=It(a);_='link[rel="'+r+'"][href="'+_+'"]',typeof u=="string"&&(_+='[crossorigin="'+u+'"]'),Jx.has(_)||(Jx.add(_),r={rel:r,crossOrigin:u,href:a},g.querySelector(_)===null&&(a=g.createElement("link"),zr(a,"link",r),In(a),g.head.appendChild(a)))}}function SS(r){Oa.D(r),$x("dns-prefetch",r,null)}function CS(r,a){Oa.C(r,a),$x("preconnect",r,a)}function IS(r,a,u){Oa.L(r,a,u);var g=rc;if(g&&r&&a){var _='link[rel="preload"][as="'+It(a)+'"]';a==="image"&&u&&u.imageSrcSet?(_+='[imagesrcset="'+It(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(_+='[imagesizes="'+It(u.imageSizes)+'"]')):_+='[href="'+It(r)+'"]';var b=_;switch(a){case"style":b=ic(r);break;case"script":b=sc(r)}ps.has(b)||(r=I({rel:"preload",href:a==="image"&&u&&u.imageSrcSet?void 0:r,as:a},u),ps.set(b,r),g.querySelector(_)!==null||a==="style"&&g.querySelector(gu(b))||a==="script"&&g.querySelector(mu(b))||(a=g.createElement("link"),zr(a,"link",r),In(a),g.head.appendChild(a)))}}function NS(r,a){Oa.m(r,a);var u=rc;if(u&&r){var g=a&&typeof a.as=="string"?a.as:"script",_='link[rel="modulepreload"][as="'+It(g)+'"][href="'+It(r)+'"]',b=_;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=sc(r)}if(!ps.has(b)&&(r=I({rel:"modulepreload",href:r},a),ps.set(b,r),u.querySelector(_)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(mu(b)))return}g=u.createElement("link"),zr(g,"link",r),In(g),u.head.appendChild(g)}}}function RS(r,a,u){Oa.S(r,a,u);var g=rc;if(g&&r){var _=ar(g).hoistableStyles,b=ic(r);a=a||"default";var O=_.get(b);if(!O){var U={loading:0,preload:null};if(O=g.querySelector(gu(b)))U.loading=5;else{r=I({rel:"stylesheet",href:r,"data-precedence":a},u),(u=ps.get(b))&&j1(r,u);var ee=O=g.createElement("link");In(ee),zr(ee,"link",r),ee._p=new Promise(function(ge,Te){ee.onload=ge,ee.onerror=Te}),ee.addEventListener("load",function(){U.loading|=1}),ee.addEventListener("error",function(){U.loading|=2}),U.loading|=4,hf(O,a,g)}O={type:"stylesheet",instance:O,count:1,state:U},_.set(b,O)}}}function OS(r,a){Oa.X(r,a);var u=rc;if(u&&r){var g=ar(u).hoistableScripts,_=sc(r),b=g.get(_);b||(b=u.querySelector(mu(_)),b||(r=I({src:r,async:!0},a),(a=ps.get(_))&&F1(r,a),b=u.createElement("script"),In(b),zr(b,"link",r),u.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},g.set(_,b))}}function DS(r,a){Oa.M(r,a);var u=rc;if(u&&r){var g=ar(u).hoistableScripts,_=sc(r),b=g.get(_);b||(b=u.querySelector(mu(_)),b||(r=I({src:r,async:!0,type:"module"},a),(a=ps.get(_))&&F1(r,a),b=u.createElement("script"),In(b),zr(b,"link",r),u.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},g.set(_,b))}}function ey(r,a,u,g){var _=(_=Pe.current)?uf(_):null;if(!_)throw Error(s(446));switch(r){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(a=ic(u.href),u=ar(_).hoistableStyles,g=u.get(a),g||(g={type:"style",instance:null,count:0,state:null},u.set(a,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){r=ic(u.href);var b=ar(_).hoistableStyles,O=b.get(r);if(O||(_=_.ownerDocument||_,O={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(r,O),(b=_.querySelector(gu(r)))&&!b._p&&(O.instance=b,O.state.loading=5),ps.has(r)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},ps.set(r,u),b||MS(_,r,u,O.state))),a&&g===null)throw Error(s(528,""));return O}if(a&&g!==null)throw Error(s(529,""));return null;case"script":return a=u.async,u=u.src,typeof u=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=sc(u),u=ar(_).hoistableScripts,g=u.get(a),g||(g={type:"script",instance:null,count:0,state:null},u.set(a,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,r))}}function ic(r){return'href="'+It(r)+'"'}function gu(r){return'link[rel="stylesheet"]['+r+"]"}function ty(r){return I({},r,{"data-precedence":r.precedence,precedence:null})}function MS(r,a,u,g){r.querySelector('link[rel="preload"][as="style"]['+a+"]")?g.loading=1:(a=r.createElement("link"),g.preload=a,a.addEventListener("load",function(){return g.loading|=1}),a.addEventListener("error",function(){return g.loading|=2}),zr(a,"link",u),In(a),r.head.appendChild(a))}function sc(r){return'[src="'+It(r)+'"]'}function mu(r){return"script[async]"+r}function ny(r,a,u){if(a.count++,a.instance===null)switch(a.type){case"style":var g=r.querySelector('style[data-href~="'+It(u.href)+'"]');if(g)return a.instance=g,In(g),g;var _=I({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return g=(r.ownerDocument||r).createElement("style"),In(g),zr(g,"style",_),hf(g,u.precedence,r),a.instance=g;case"stylesheet":_=ic(u.href);var b=r.querySelector(gu(_));if(b)return a.state.loading|=4,a.instance=b,In(b),b;g=ty(u),(_=ps.get(_))&&j1(g,_),b=(r.ownerDocument||r).createElement("link"),In(b);var O=b;return O._p=new Promise(function(U,ee){O.onload=U,O.onerror=ee}),zr(b,"link",g),a.state.loading|=4,hf(b,u.precedence,r),a.instance=b;case"script":return b=sc(u.src),(_=r.querySelector(mu(b)))?(a.instance=_,In(_),_):(g=u,(_=ps.get(b))&&(g=I({},u),F1(g,_)),r=r.ownerDocument||r,_=r.createElement("script"),In(_),zr(_,"link",g),r.head.appendChild(_),a.instance=_);case"void":return null;default:throw Error(s(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(g=a.instance,a.state.loading|=4,hf(g,u.precedence,r));return a.instance}function hf(r,a,u){for(var g=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=g.length?g[g.length-1]:null,b=_,O=0;O<g.length;O++){var U=g[O];if(U.dataset.precedence===a)b=U;else if(b!==_)break}b?b.parentNode.insertBefore(r,b.nextSibling):(a=u.nodeType===9?u.head:u,a.insertBefore(r,a.firstChild))}function j1(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.title==null&&(r.title=a.title)}function F1(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.integrity==null&&(r.integrity=a.integrity)}var ff=null;function ry(r,a,u){if(ff===null){var g=new Map,_=ff=new Map;_.set(u,g)}else _=ff,g=_.get(u),g||(g=new Map,_.set(u,g));if(g.has(r))return g;for(g.set(r,null),u=u.getElementsByTagName(r),_=0;_<u.length;_++){var b=u[_];if(!(b[Ai]||b[bn]||r==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var O=b.getAttribute(a)||"";O=r+O;var U=g.get(O);U?U.push(b):g.set(O,[b])}}return g}function iy(r,a,u){r=r.ownerDocument||r,r.head.insertBefore(u,a==="title"?r.querySelector("head > title"):null)}function LS(r,a,u){if(u===1||a.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return r=a.disabled,typeof a.precedence=="string"&&r==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function sy(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function PS(r,a,u,g){if(u.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var _=ic(g.href),b=a.querySelector(gu(_));if(b){a=b._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(r.count++,r=df.bind(r),a.then(r,r)),u.state.loading|=4,u.instance=b,In(b);return}b=a.ownerDocument||a,g=ty(g),(_=ps.get(_))&&j1(g,_),b=b.createElement("link"),In(b);var O=b;O._p=new Promise(function(U,ee){O.onload=U,O.onerror=ee}),zr(b,"link",g),u.instance=b}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(u,a),(a=u.state.preload)&&(u.state.loading&3)===0&&(r.count++,u=df.bind(r),a.addEventListener("load",u),a.addEventListener("error",u))}}var H1=0;function kS(r,a){return r.stylesheets&&r.count===0&&mf(r,r.stylesheets),0<r.count||0<r.imgCount?function(u){var g=setTimeout(function(){if(r.stylesheets&&mf(r,r.stylesheets),r.unsuspend){var b=r.unsuspend;r.unsuspend=null,b()}},6e4+a);0<r.imgBytes&&H1===0&&(H1=62500*pS());var _=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&mf(r,r.stylesheets),r.unsuspend)){var b=r.unsuspend;r.unsuspend=null,b()}},(r.imgBytes>H1?50:800)+a);return r.unsuspend=u,function(){r.unsuspend=null,clearTimeout(g),clearTimeout(_)}}:null}function df(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)mf(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var gf=null;function mf(r,a){r.stylesheets=null,r.unsuspend!==null&&(r.count++,gf=new Map,a.forEach(BS,r),gf=null,df.call(r))}function BS(r,a){if(!(a.state.loading&4)){var u=gf.get(r);if(u)var g=u.get(null);else{u=new Map,gf.set(r,u);for(var _=r.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<_.length;b++){var O=_[b];(O.nodeName==="LINK"||O.getAttribute("media")!=="not all")&&(u.set(O.dataset.precedence,O),g=O)}g&&u.set(null,g)}_=a.instance,O=_.getAttribute("data-precedence"),b=u.get(O)||g,b===g&&u.set(null,_),u.set(O,_),this.count++,g=df.bind(this),_.addEventListener("load",g),_.addEventListener("error",g),b?b.parentNode.insertBefore(_,b.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(_,r.firstChild)),a.state.loading|=4}}var pu={$$typeof:Q,Provider:null,Consumer:null,_currentValue:Ge,_currentValue2:Ge,_threadCount:0};function US(r,a,u,g,_,b,O,U,ee){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=dr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dr(0),this.hiddenUpdates=dr(null),this.identifierPrefix=g,this.onUncaughtError=_,this.onCaughtError=b,this.onRecoverableError=O,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ee,this.incompleteTransitions=new Map}function ay(r,a,u,g,_,b,O,U,ee,ge,Te,Ce){return r=new US(r,a,u,O,ee,ge,Te,Ce,U),a=1,b===!0&&(a|=24),b=Gi(3,null,null,a),r.current=b,b.stateNode=r,a=w0(),a.refCount++,r.pooledCache=a,a.refCount++,b.memoizedState={element:g,isDehydrated:u,cache:a},v0(b),r}function oy(r){return r?(r=kl,r):kl}function ly(r,a,u,g,_,b){_=oy(_),g.context===null?g.context=_:g.pendingContext=_,g=lo(a),g.payload={element:u},b=b===void 0?null:b,b!==null&&(g.callback=b),u=co(r,g,a),u!==null&&(Oi(u,r,a),Wc(u,r,a))}function cy(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var u=r.retryLane;r.retryLane=u!==0&&u<a?u:a}}function z1(r,a){cy(r,a),(r=r.alternate)&&cy(r,a)}function uy(r){if(r.tag===13||r.tag===31){var a=rl(r,67108864);a!==null&&Oi(a,r,67108864),z1(r,67108864)}}function hy(r){if(r.tag===13||r.tag===31){var a=Ki();a=kn(a);var u=rl(r,a);u!==null&&Oi(u,r,a),z1(r,a)}}var pf=!0;function VS(r,a,u,g){var _=me.T;me.T=null;var b=be.p;try{be.p=2,G1(r,a,u,g)}finally{be.p=b,me.T=_}}function jS(r,a,u,g){var _=me.T;me.T=null;var b=be.p;try{be.p=8,G1(r,a,u,g)}finally{be.p=b,me.T=_}}function G1(r,a,u,g){if(pf){var _=q1(g);if(_===null)R1(r,a,g,xf,u),dy(r,g);else if(HS(_,r,a,u,g))g.stopPropagation();else if(dy(r,g),a&4&&-1<FS.indexOf(r)){for(;_!==null;){var b=Dt(_);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var O=Zr(b.pendingLanes);if(O!==0){var U=b;for(U.pendingLanes|=2,U.entangledLanes|=2;O;){var ee=1<<31-st(O);U.entanglements[1]|=ee,O&=~ee}Gs(b),(on&6)===0&&(Jh=mn()+500,uu(0))}}break;case 31:case 13:U=rl(b,2),U!==null&&Oi(U,b,2),ef(),z1(b,2)}if(b=q1(g),b===null&&R1(r,a,g,xf,u),b===_)break;_=b}_!==null&&g.stopPropagation()}else R1(r,a,g,null,u)}}function q1(r){return r=bi(r),Y1(r)}var xf=null;function Y1(r){if(xf=null,r=pn(r),r!==null){var a=f(r);if(a===null)r=null;else{var u=a.tag;if(u===13){if(r=p(a),r!==null)return r;r=null}else if(u===31){if(r=T(a),r!==null)return r;r=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null)}}return xf=r,null}function fy(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ui()){case fr:return 2;case Kr:return 8;case sr:case Kn:return 32;case Ls:return 268435456;default:return 32}default:return 32}}var X1=!1,wo=null,Ao=null,bo=null,xu=new Map,yu=new Map,To=[],FS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function dy(r,a){switch(r){case"focusin":case"focusout":wo=null;break;case"dragenter":case"dragleave":Ao=null;break;case"mouseover":case"mouseout":bo=null;break;case"pointerover":case"pointerout":xu.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":yu.delete(a.pointerId)}}function Eu(r,a,u,g,_,b){return r===null||r.nativeEvent!==b?(r={blockedOn:a,domEventName:u,eventSystemFlags:g,nativeEvent:b,targetContainers:[_]},a!==null&&(a=Dt(a),a!==null&&uy(a)),r):(r.eventSystemFlags|=g,a=r.targetContainers,_!==null&&a.indexOf(_)===-1&&a.push(_),r)}function HS(r,a,u,g,_){switch(a){case"focusin":return wo=Eu(wo,r,a,u,g,_),!0;case"dragenter":return Ao=Eu(Ao,r,a,u,g,_),!0;case"mouseover":return bo=Eu(bo,r,a,u,g,_),!0;case"pointerover":var b=_.pointerId;return xu.set(b,Eu(xu.get(b)||null,r,a,u,g,_)),!0;case"gotpointercapture":return b=_.pointerId,yu.set(b,Eu(yu.get(b)||null,r,a,u,g,_)),!0}return!1}function gy(r){var a=pn(r.target);if(a!==null){var u=f(a);if(u!==null){if(a=u.tag,a===13){if(a=p(u),a!==null){r.blockedOn=a,Fe(r.priority,function(){hy(u)});return}}else if(a===31){if(a=T(u),a!==null){r.blockedOn=a,Fe(r.priority,function(){hy(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){r.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}r.blockedOn=null}function yf(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var u=q1(r.nativeEvent);if(u===null){u=r.nativeEvent;var g=new u.constructor(u.type,u);aa=g,u.target.dispatchEvent(g),aa=null}else return a=Dt(u),a!==null&&uy(a),r.blockedOn=u,!1;a.shift()}return!0}function my(r,a,u){yf(r)&&u.delete(a)}function zS(){X1=!1,wo!==null&&yf(wo)&&(wo=null),Ao!==null&&yf(Ao)&&(Ao=null),bo!==null&&yf(bo)&&(bo=null),xu.forEach(my),yu.forEach(my)}function Ef(r,a){r.blockedOn===a&&(r.blockedOn=null,X1||(X1=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,zS)))}var _f=null;function py(r){_f!==r&&(_f=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){_f===r&&(_f=null);for(var a=0;a<r.length;a+=3){var u=r[a],g=r[a+1],_=r[a+2];if(typeof g!="function"){if(Y1(g||u)===null)continue;break}var b=Dt(u);b!==null&&(r.splice(a,3),a-=3,q0(b,{pending:!0,data:_,method:u.method,action:g},g,_))}}))}function ac(r){function a(ee){return Ef(ee,r)}wo!==null&&Ef(wo,r),Ao!==null&&Ef(Ao,r),bo!==null&&Ef(bo,r),xu.forEach(a),yu.forEach(a);for(var u=0;u<To.length;u++){var g=To[u];g.blockedOn===r&&(g.blockedOn=null)}for(;0<To.length&&(u=To[0],u.blockedOn===null);)gy(u),u.blockedOn===null&&To.shift();if(u=(r.ownerDocument||r).$$reactFormReplay,u!=null)for(g=0;g<u.length;g+=3){var _=u[g],b=u[g+1],O=_[Wt]||null;if(typeof b=="function")O||py(u);else if(O){var U=null;if(b&&b.hasAttribute("formAction")){if(_=b,O=b[Wt]||null)U=O.formAction;else if(Y1(_)!==null)continue}else U=O.action;typeof U=="function"?u[g+1]=U:(u.splice(g,3),g-=3),py(u)}}}function xy(){function r(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(O){return _=O})},focusReset:"manual",scroll:"manual"})}function a(){_!==null&&(_(),_=null),g||setTimeout(u,20)}function u(){if(!g&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,_=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(u,100),function(){g=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),_!==null&&(_(),_=null)}}}function W1(r){this._internalRoot=r}wf.prototype.render=W1.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(s(409));var u=a.current,g=Ki();ly(u,g,r,a,null,null)},wf.prototype.unmount=W1.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;ly(r.current,2,null,r,null,null),ef(),a[vr]=null}};function wf(r){this._internalRoot=r}wf.prototype.unstable_scheduleHydration=function(r){if(r){var a=Tr();r={blockedOn:null,target:r,priority:a};for(var u=0;u<To.length&&a!==0&&a<To[u].priority;u++);To.splice(u,0,r),u===0&&gy(r)}};var yy=e.version;if(yy!=="19.2.3")throw Error(s(527,yy,"19.2.3"));be.findDOMNode=function(r){var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=E(a),r=r!==null?C(r):null,r=r===null?null:r.stateNode,r};var GS={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:me,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Af=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Af.isDisabled&&Af.supportsFiber)try{Yt=Af.inject(GS),Me=Af}catch{}}return wu.createRoot=function(r,a){if(!c(r))throw Error(s(299));var u=!1,g="",_=v2,b=S2,O=C2;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onUncaughtError!==void 0&&(_=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(O=a.onRecoverableError)),a=ay(r,1,!1,null,null,u,g,null,_,b,O,xy),r[vr]=a.current,N1(r),new W1(a)},wu.hydrateRoot=function(r,a,u){if(!c(r))throw Error(s(299));var g=!1,_="",b=v2,O=S2,U=C2,ee=null;return u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(_=u.identifierPrefix),u.onUncaughtError!==void 0&&(b=u.onUncaughtError),u.onCaughtError!==void 0&&(O=u.onCaughtError),u.onRecoverableError!==void 0&&(U=u.onRecoverableError),u.formState!==void 0&&(ee=u.formState)),a=ay(r,1,!0,a,u??null,g,_,ee,b,O,U,xy),a.context=oy(null),u=a.current,g=Ki(),g=kn(g),_=lo(g),_.callback=null,co(u,_,g),u=g,a.current.lanes=u,fi(a,u),Gs(a),r[vr]=a.current,N1(r),new wf(a)},wu.version="19.2.3",wu}var Iy;function tC(){if(Iy)return Z1.exports;Iy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Z1.exports=eC(),Z1.exports}var nC=tC();const rC=hm(nC);/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Ny="popstate";function iC(n={}){function e(c,f){let{pathname:p="/",search:T="",hash:w=""}=Nl(c.location.hash.substring(1));return!p.startsWith("/")&&!p.startsWith(".")&&(p="/"+p),Ag("",{pathname:p,search:T,hash:w},f.state&&f.state.usr||null,f.state&&f.state.key||"default")}function t(c,f){let p=c.document.querySelector("base"),T="";if(p&&p.getAttribute("href")){let w=c.location.href,E=w.indexOf("#");T=E===-1?w:w.slice(0,E)}return T+"#"+(typeof f=="string"?f:Hu(f))}function s(c,f){Es(c.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(f)})`)}return aC(e,t,s,n)}function Xn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Es(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function sC(){return Math.random().toString(36).substring(2,10)}function Ry(n,e){return{usr:n.state,key:n.key,idx:e}}function Ag(n,e,t=null,s){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Nl(e):e,state:t,key:e&&e.key||s||sC()}}function Hu({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Nl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substring(s),n=n.substring(0,s)),n&&(e.pathname=n)}return e}function aC(n,e,t,s={}){let{window:c=document.defaultView,v5Compat:f=!1}=s,p=c.history,T="POP",w=null,E=C();E==null&&(E=0,p.replaceState({...p.state,idx:E},""));function C(){return(p.state||{idx:null}).idx}function I(){T="POP";let q=C(),_e=q==null?null:q-E;E=q,w&&w({action:T,location:$.location,delta:_e})}function M(q,_e){T="PUSH";let ae=Ag($.location,q,_e);t&&t(ae,q),E=C()+1;let Q=Ry(ae,E),le=$.createHref(ae);try{p.pushState(Q,"",le)}catch(De){if(De instanceof DOMException&&De.name==="DataCloneError")throw De;c.location.assign(le)}f&&w&&w({action:T,location:$.location,delta:1})}function B(q,_e){T="REPLACE";let ae=Ag($.location,q,_e);t&&t(ae,q),E=C();let Q=Ry(ae,E),le=$.createHref(ae);p.replaceState(Q,"",le),f&&w&&w({action:T,location:$.location,delta:0})}function W(q){return oC(q)}let $={get action(){return T},get location(){return n(c,p)},listen(q){if(w)throw new Error("A history only accepts one active listener");return c.addEventListener(Ny,I),w=q,()=>{c.removeEventListener(Ny,I),w=null}},createHref(q){return e(c,q)},createURL:W,encodeLocation(q){let _e=W(q);return{pathname:_e.pathname,search:_e.search,hash:_e.hash}},push:M,replace:B,go(q){return p.go(q)}};return $}function oC(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Xn(t,"No window.location.(origin|href) available to create URL");let s=typeof n=="string"?n:Hu(n);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function Fw(n,e,t="/"){return lC(n,e,t,!1)}function lC(n,e,t,s){let c=typeof e=="string"?Nl(e):e,f=Ua(c.pathname||"/",t);if(f==null)return null;let p=Hw(n);cC(p);let T=null;for(let w=0;T==null&&w<p.length;++w){let E=_C(f);T=yC(p[w],E,s)}return T}function Hw(n,e=[],t=[],s="",c=!1){let f=(p,T,w=c,E)=>{let C={relativePath:E===void 0?p.path||"":E,caseSensitive:p.caseSensitive===!0,childrenIndex:T,route:p};if(C.relativePath.startsWith("/")){if(!C.relativePath.startsWith(s)&&w)return;Xn(C.relativePath.startsWith(s),`Absolute route path "${C.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),C.relativePath=C.relativePath.slice(s.length)}let I=ka([s,C.relativePath]),M=t.concat(C);p.children&&p.children.length>0&&(Xn(p.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${I}".`),Hw(p.children,e,M,I,w)),!(p.path==null&&!p.index)&&e.push({path:I,score:pC(I,p.index),routesMeta:M})};return n.forEach((p,T)=>{var w;if(p.path===""||!((w=p.path)!=null&&w.includes("?")))f(p,T);else for(let E of zw(p.path))f(p,T,!0,E)}),e}function zw(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,c=t.endsWith("?"),f=t.replace(/\?$/,"");if(s.length===0)return c?[f,""]:[f];let p=zw(s.join("/")),T=[];return T.push(...p.map(w=>w===""?f:[f,w].join("/"))),c&&T.push(...p),T.map(w=>n.startsWith("/")&&w===""?"/":w)}function cC(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:xC(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var uC=/^:[\w-]+$/,hC=3,fC=2,dC=1,gC=10,mC=-2,Oy=n=>n==="*";function pC(n,e){let t=n.split("/"),s=t.length;return t.some(Oy)&&(s+=mC),e&&(s+=fC),t.filter(c=>!Oy(c)).reduce((c,f)=>c+(uC.test(f)?hC:f===""?dC:gC),s)}function xC(n,e){return n.length===e.length&&n.slice(0,-1).every((s,c)=>s===e[c])?n[n.length-1]-e[e.length-1]:0}function yC(n,e,t=!1){let{routesMeta:s}=n,c={},f="/",p=[];for(let T=0;T<s.length;++T){let w=s[T],E=T===s.length-1,C=f==="/"?e:e.slice(f.length)||"/",I=Zf({path:w.relativePath,caseSensitive:w.caseSensitive,end:E},C),M=w.route;if(!I&&E&&t&&!s[s.length-1].route.index&&(I=Zf({path:w.relativePath,caseSensitive:w.caseSensitive,end:!1},C)),!I)return null;Object.assign(c,I.params),p.push({params:c,pathname:ka([f,I.pathname]),pathnameBase:TC(ka([f,I.pathnameBase])),route:M}),I.pathnameBase!=="/"&&(f=ka([f,I.pathnameBase]))}return p}function Zf(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=EC(n.path,n.caseSensitive,n.end),c=e.match(t);if(!c)return null;let f=c[0],p=f.replace(/(.)\/+$/,"$1"),T=c.slice(1);return{params:s.reduce((E,{paramName:C,isOptional:I},M)=>{if(C==="*"){let W=T[M]||"";p=f.slice(0,f.length-W.length).replace(/(.)\/+$/,"$1")}const B=T[M];return I&&!B?E[C]=void 0:E[C]=(B||"").replace(/%2F/g,"/"),E},{}),pathname:f,pathnameBase:p,pattern:n}}function EC(n,e=!1,t=!0){Es(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let s=[],c="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(p,T,w)=>(s.push({paramName:T,isOptional:w!=null}),w?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(s.push({paramName:"*"}),c+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?c+="\\/*$":n!==""&&n!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,e?void 0:"i"),s]}function _C(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Es(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ua(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}var Gw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wC=n=>Gw.test(n);function AC(n,e="/"){let{pathname:t,search:s="",hash:c=""}=typeof n=="string"?Nl(n):n,f;if(t)if(wC(t))f=t;else{if(t.includes("//")){let p=t;t=t.replace(/\/\/+/g,"/"),Es(!1,`Pathnames cannot have embedded double slashes - normalizing ${p} -> ${t}`)}t.startsWith("/")?f=Dy(t.substring(1),"/"):f=Dy(t,e)}else f=e;return{pathname:f,search:vC(s),hash:SC(c)}}function Dy(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(c=>{c===".."?t.length>1&&t.pop():c!=="."&&t.push(c)}),t.length>1?t.join("/"):"/"}function tg(n,e,t,s){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function bC(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function qw(n){let e=bC(n);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function Yw(n,e,t,s=!1){let c;typeof n=="string"?c=Nl(n):(c={...n},Xn(!c.pathname||!c.pathname.includes("?"),tg("?","pathname","search",c)),Xn(!c.pathname||!c.pathname.includes("#"),tg("#","pathname","hash",c)),Xn(!c.search||!c.search.includes("#"),tg("#","search","hash",c)));let f=n===""||c.pathname==="",p=f?"/":c.pathname,T;if(p==null)T=t;else{let I=e.length-1;if(!s&&p.startsWith("..")){let M=p.split("/");for(;M[0]==="..";)M.shift(),I-=1;c.pathname=M.join("/")}T=I>=0?e[I]:"/"}let w=AC(c,T),E=p&&p!=="/"&&p.endsWith("/"),C=(f||p===".")&&t.endsWith("/");return!w.pathname.endsWith("/")&&(E||C)&&(w.pathname+="/"),w}var ka=n=>n.join("/").replace(/\/\/+/g,"/"),TC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),vC=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,SC=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,CC=class{constructor(n,e,t,s=!1){this.status=n,this.statusText=e||"",this.internal=s,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function IC(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function NC(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Xw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ww(n,e){let t=n;if(typeof t!="string"||!Gw.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let s=t,c=!1;if(Xw)try{let f=new URL(window.location.href),p=t.startsWith("//")?new URL(f.protocol+t):new URL(t),T=Ua(p.pathname,e);p.origin===f.origin&&T!=null?t=T+p.search+p.hash:c=!0}catch{Es(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:c,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Kw=["POST","PUT","PATCH","DELETE"];new Set(Kw);var RC=["GET",...Kw];new Set(RC);var Oc=re.createContext(null);Oc.displayName="DataRouter";var Od=re.createContext(null);Od.displayName="DataRouterState";var OC=re.createContext(!1),Qw=re.createContext({isTransitioning:!1});Qw.displayName="ViewTransition";var DC=re.createContext(new Map);DC.displayName="Fetchers";var MC=re.createContext(null);MC.displayName="Await";var ws=re.createContext(null);ws.displayName="Navigation";var $u=re.createContext(null);$u.displayName="Location";var Ya=re.createContext({outlet:null,matches:[],isDataRoute:!1});Ya.displayName="Route";var dm=re.createContext(null);dm.displayName="RouteError";var Zw="REACT_ROUTER_ERROR",LC="REDIRECT",PC="ROUTE_ERROR_RESPONSE";function kC(n){if(n.startsWith(`${Zw}:${LC}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function BC(n){if(n.startsWith(`${Zw}:${PC}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new CC(e.status,e.statusText,e.data)}catch{}}function UC(n,{relative:e}={}){Xn(eh(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=re.useContext(ws),{hash:c,pathname:f,search:p}=th(n,{relative:e}),T=f;return t!=="/"&&(T=f==="/"?t:ka([t,f])),s.createHref({pathname:T,search:p,hash:c})}function eh(){return re.useContext($u)!=null}function qo(){return Xn(eh(),"useLocation() may be used only in the context of a <Router> component."),re.useContext($u).location}var Jw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function $w(n){re.useContext(ws).static||re.useLayoutEffect(n)}function VC(){let{isDataRoute:n}=re.useContext(Ya);return n?JC():jC()}function jC(){Xn(eh(),"useNavigate() may be used only in the context of a <Router> component.");let n=re.useContext(Oc),{basename:e,navigator:t}=re.useContext(ws),{matches:s}=re.useContext(Ya),{pathname:c}=qo(),f=JSON.stringify(qw(s)),p=re.useRef(!1);return $w(()=>{p.current=!0}),re.useCallback((w,E={})=>{if(Es(p.current,Jw),!p.current)return;if(typeof w=="number"){t.go(w);return}let C=Yw(w,JSON.parse(f),c,E.relative==="path");n==null&&e!=="/"&&(C.pathname=C.pathname==="/"?e:ka([e,C.pathname])),(E.replace?t.replace:t.push)(C,E.state,E)},[e,t,f,c,n])}re.createContext(null);function th(n,{relative:e}={}){let{matches:t}=re.useContext(Ya),{pathname:s}=qo(),c=JSON.stringify(qw(t));return re.useMemo(()=>Yw(n,JSON.parse(c),s,e==="path"),[n,c,s,e])}function FC(n,e){return eA(n,e)}function eA(n,e,t,s,c){var ae;Xn(eh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:f}=re.useContext(ws),{matches:p}=re.useContext(Ya),T=p[p.length-1],w=T?T.params:{},E=T?T.pathname:"/",C=T?T.pathnameBase:"/",I=T&&T.route;{let Q=I&&I.path||"";nA(E,!I||Q.endsWith("*")||Q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${E}" (under <Route path="${Q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Q}"> to <Route path="${Q==="/"?"*":`${Q}/*`}">.`)}let M=qo(),B;if(e){let Q=typeof e=="string"?Nl(e):e;Xn(C==="/"||((ae=Q.pathname)==null?void 0:ae.startsWith(C)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${C}" but pathname "${Q.pathname}" was given in the \`location\` prop.`),B=Q}else B=M;let W=B.pathname||"/",$=W;if(C!=="/"){let Q=C.replace(/^\//,"").split("/");$="/"+W.replace(/^\//,"").split("/").slice(Q.length).join("/")}let q=Fw(n,{pathname:$});Es(I||q!=null,`No routes matched location "${B.pathname}${B.search}${B.hash}" `),Es(q==null||q[q.length-1].route.element!==void 0||q[q.length-1].route.Component!==void 0||q[q.length-1].route.lazy!==void 0,`Matched leaf route at location "${B.pathname}${B.search}${B.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _e=YC(q&&q.map(Q=>Object.assign({},Q,{params:Object.assign({},w,Q.params),pathname:ka([C,f.encodeLocation?f.encodeLocation(Q.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Q.pathname]),pathnameBase:Q.pathnameBase==="/"?C:ka([C,f.encodeLocation?f.encodeLocation(Q.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Q.pathnameBase])})),p,t,s,c);return e&&_e?re.createElement($u.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...B},navigationType:"POP"}},_e):_e}function HC(){let n=ZC(),e=IC(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:s},f={padding:"2px 4px",backgroundColor:s},p=null;return console.error("Error handled by React Router default ErrorBoundary:",n),p=re.createElement(re.Fragment,null,re.createElement("p",null," Hey developer "),re.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",re.createElement("code",{style:f},"ErrorBoundary")," or"," ",re.createElement("code",{style:f},"errorElement")," prop on your route.")),re.createElement(re.Fragment,null,re.createElement("h2",null,"Unexpected Application Error!"),re.createElement("h3",{style:{fontStyle:"italic"}},e),t?re.createElement("pre",{style:c},t):null,p)}var zC=re.createElement(HC,null),tA=class extends re.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=BC(n.digest);t&&(n=t)}let e=n!==void 0?re.createElement(Ya.Provider,{value:this.props.routeContext},re.createElement(dm.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?re.createElement(GC,{error:n},e):e}};tA.contextType=OC;var ng=new WeakMap;function GC({children:n,error:e}){let{basename:t}=re.useContext(ws);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let s=kC(e.digest);if(s){let c=ng.get(e);if(c)throw c;let f=Ww(s.location,t);if(Xw&&!ng.get(e))if(f.isExternal||s.reloadDocument)window.location.href=f.absoluteURL||f.to;else{const p=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(f.to,{replace:s.replace}));throw ng.set(e,p),p}return re.createElement("meta",{httpEquiv:"refresh",content:`0;url=${f.absoluteURL||f.to}`})}}return n}function qC({routeContext:n,match:e,children:t}){let s=re.useContext(Oc);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),re.createElement(Ya.Provider,{value:n},t)}function YC(n,e=[],t=null,s=null,c=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let f=n,p=t==null?void 0:t.errors;if(p!=null){let C=f.findIndex(I=>I.route.id&&(p==null?void 0:p[I.route.id])!==void 0);Xn(C>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(p).join(",")}`),f=f.slice(0,Math.min(f.length,C+1))}let T=!1,w=-1;if(t)for(let C=0;C<f.length;C++){let I=f[C];if((I.route.HydrateFallback||I.route.hydrateFallbackElement)&&(w=C),I.route.id){let{loaderData:M,errors:B}=t,W=I.route.loader&&!M.hasOwnProperty(I.route.id)&&(!B||B[I.route.id]===void 0);if(I.route.lazy||W){T=!0,w>=0?f=f.slice(0,w+1):f=[f[0]];break}}}let E=t&&s?(C,I)=>{var M,B;s(C,{location:t.location,params:((B=(M=t.matches)==null?void 0:M[0])==null?void 0:B.params)??{},unstable_pattern:NC(t.matches),errorInfo:I})}:void 0;return f.reduceRight((C,I,M)=>{let B,W=!1,$=null,q=null;t&&(B=p&&I.route.id?p[I.route.id]:void 0,$=I.route.errorElement||zC,T&&(w<0&&M===0?(nA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),W=!0,q=null):w===M&&(W=!0,q=I.route.hydrateFallbackElement||null)));let _e=e.concat(f.slice(0,M+1)),ae=()=>{let Q;return B?Q=$:W?Q=q:I.route.Component?Q=re.createElement(I.route.Component,null):I.route.element?Q=I.route.element:Q=C,re.createElement(qC,{match:I,routeContext:{outlet:C,matches:_e,isDataRoute:t!=null},children:Q})};return t&&(I.route.ErrorBoundary||I.route.errorElement||M===0)?re.createElement(tA,{location:t.location,revalidation:t.revalidation,component:$,error:B,children:ae(),routeContext:{outlet:null,matches:_e,isDataRoute:!0},onError:E}):ae()},null)}function gm(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function XC(n){let e=re.useContext(Oc);return Xn(e,gm(n)),e}function WC(n){let e=re.useContext(Od);return Xn(e,gm(n)),e}function KC(n){let e=re.useContext(Ya);return Xn(e,gm(n)),e}function mm(n){let e=KC(n),t=e.matches[e.matches.length-1];return Xn(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function QC(){return mm("useRouteId")}function ZC(){var s;let n=re.useContext(dm),e=WC("useRouteError"),t=mm("useRouteError");return n!==void 0?n:(s=e.errors)==null?void 0:s[t]}function JC(){let{router:n}=XC("useNavigate"),e=mm("useNavigate"),t=re.useRef(!1);return $w(()=>{t.current=!0}),re.useCallback(async(c,f={})=>{Es(t.current,Jw),t.current&&(typeof c=="number"?await n.navigate(c):await n.navigate(c,{fromRouteId:e,...f}))},[n,e])}var My={};function nA(n,e,t){!e&&!My[n]&&(My[n]=!0,Es(!1,t))}re.memo($C);function $C({routes:n,future:e,state:t,onError:s}){return eA(n,void 0,t,s,e)}function pl(n){Xn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function eI({basename:n="/",children:e=null,location:t,navigationType:s="POP",navigator:c,static:f=!1,unstable_useTransitions:p}){Xn(!eh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let T=n.replace(/^\/*/,"/"),w=re.useMemo(()=>({basename:T,navigator:c,static:f,unstable_useTransitions:p,future:{}}),[T,c,f,p]);typeof t=="string"&&(t=Nl(t));let{pathname:E="/",search:C="",hash:I="",state:M=null,key:B="default"}=t,W=re.useMemo(()=>{let $=Ua(E,T);return $==null?null:{location:{pathname:$,search:C,hash:I,state:M,key:B},navigationType:s}},[T,E,C,I,M,B,s]);return Es(W!=null,`<Router basename="${T}"> is not able to match the URL "${E}${C}${I}" because it does not start with the basename, so the <Router> won't render anything.`),W==null?null:re.createElement(ws.Provider,{value:w},re.createElement($u.Provider,{children:e,value:W}))}function tI({children:n,location:e}){return FC(bg(n),e)}function bg(n,e=[]){let t=[];return re.Children.forEach(n,(s,c)=>{if(!re.isValidElement(s))return;let f=[...e,c];if(s.type===re.Fragment){t.push.apply(t,bg(s.props.children,f));return}Xn(s.type===pl,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Xn(!s.props.index||!s.props.children,"An index route cannot have child routes.");let p={id:s.props.id||f.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(p.children=bg(s.props.children,f)),t.push(p)}),t}var Uf="get",Vf="application/x-www-form-urlencoded";function Dd(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function nI(n){return Dd(n)&&n.tagName.toLowerCase()==="button"}function rI(n){return Dd(n)&&n.tagName.toLowerCase()==="form"}function iI(n){return Dd(n)&&n.tagName.toLowerCase()==="input"}function sI(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function aI(n,e){return n.button===0&&(!e||e==="_self")&&!sI(n)}var Tf=null;function oI(){if(Tf===null)try{new FormData(document.createElement("form"),0),Tf=!1}catch{Tf=!0}return Tf}var lI=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function rg(n){return n!=null&&!lI.has(n)?(Es(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Vf}"`),null):n}function cI(n,e){let t,s,c,f,p;if(rI(n)){let T=n.getAttribute("action");s=T?Ua(T,e):null,t=n.getAttribute("method")||Uf,c=rg(n.getAttribute("enctype"))||Vf,f=new FormData(n)}else if(nI(n)||iI(n)&&(n.type==="submit"||n.type==="image")){let T=n.form;if(T==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let w=n.getAttribute("formaction")||T.getAttribute("action");if(s=w?Ua(w,e):null,t=n.getAttribute("formmethod")||T.getAttribute("method")||Uf,c=rg(n.getAttribute("formenctype"))||rg(T.getAttribute("enctype"))||Vf,f=new FormData(T,n),!oI()){let{name:E,type:C,value:I}=n;if(C==="image"){let M=E?`${E}.`:"";f.append(`${M}x`,"0"),f.append(`${M}y`,"0")}else E&&f.append(E,I)}}else{if(Dd(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Uf,s=null,c=Vf,p=n}return f&&c==="text/plain"&&(p=f,f=void 0),{action:s,method:t.toLowerCase(),encType:c,formData:f,body:p}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function pm(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function uI(n,e,t,s){let c=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?c.pathname.endsWith("/")?c.pathname=`${c.pathname}_.${s}`:c.pathname=`${c.pathname}.${s}`:c.pathname==="/"?c.pathname=`_root.${s}`:e&&Ua(c.pathname,e)==="/"?c.pathname=`${e.replace(/\/$/,"")}/_root.${s}`:c.pathname=`${c.pathname.replace(/\/$/,"")}.${s}`,c}async function hI(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function fI(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function dI(n,e,t){let s=await Promise.all(n.map(async c=>{let f=e.routes[c.route.id];if(f){let p=await hI(f,t);return p.links?p.links():[]}return[]}));return xI(s.flat(1).filter(fI).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function Ly(n,e,t,s,c,f){let p=(w,E)=>t[E]?w.route.id!==t[E].route.id:!0,T=(w,E)=>{var C;return t[E].pathname!==w.pathname||((C=t[E].route.path)==null?void 0:C.endsWith("*"))&&t[E].params["*"]!==w.params["*"]};return f==="assets"?e.filter((w,E)=>p(w,E)||T(w,E)):f==="data"?e.filter((w,E)=>{var I;let C=s.routes[w.route.id];if(!C||!C.hasLoader)return!1;if(p(w,E)||T(w,E))return!0;if(w.route.shouldRevalidate){let M=w.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:((I=t[0])==null?void 0:I.params)||{},nextUrl:new URL(n,window.origin),nextParams:w.params,defaultShouldRevalidate:!0});if(typeof M=="boolean")return M}return!0}):[]}function gI(n,e,{includeHydrateFallback:t}={}){return mI(n.map(s=>{let c=e.routes[s.route.id];if(!c)return[];let f=[c.module];return c.clientActionModule&&(f=f.concat(c.clientActionModule)),c.clientLoaderModule&&(f=f.concat(c.clientLoaderModule)),t&&c.hydrateFallbackModule&&(f=f.concat(c.hydrateFallbackModule)),c.imports&&(f=f.concat(c.imports)),f}).flat(1))}function mI(n){return[...new Set(n)]}function pI(n){let e={},t=Object.keys(n).sort();for(let s of t)e[s]=n[s];return e}function xI(n,e){let t=new Set;return new Set(e),n.reduce((s,c)=>{let f=JSON.stringify(pI(c));return t.has(f)||(t.add(f),s.push({key:f,link:c})),s},[])}function rA(){let n=re.useContext(Oc);return pm(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function yI(){let n=re.useContext(Od);return pm(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var xm=re.createContext(void 0);xm.displayName="FrameworkContext";function iA(){let n=re.useContext(xm);return pm(n,"You must render this element inside a <HydratedRouter> element"),n}function EI(n,e){let t=re.useContext(xm),[s,c]=re.useState(!1),[f,p]=re.useState(!1),{onFocus:T,onBlur:w,onMouseEnter:E,onMouseLeave:C,onTouchStart:I}=e,M=re.useRef(null);re.useEffect(()=>{if(n==="render"&&p(!0),n==="viewport"){let $=_e=>{_e.forEach(ae=>{p(ae.isIntersecting)})},q=new IntersectionObserver($,{threshold:.5});return M.current&&q.observe(M.current),()=>{q.disconnect()}}},[n]),re.useEffect(()=>{if(s){let $=setTimeout(()=>{p(!0)},100);return()=>{clearTimeout($)}}},[s]);let B=()=>{c(!0)},W=()=>{c(!1),p(!1)};return t?n!=="intent"?[f,M,{}]:[f,M,{onFocus:Au(T,B),onBlur:Au(w,W),onMouseEnter:Au(E,B),onMouseLeave:Au(C,W),onTouchStart:Au(I,B)}]:[!1,M,{}]}function Au(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function _I({page:n,...e}){let{router:t}=rA(),s=re.useMemo(()=>Fw(t.routes,n,t.basename),[t.routes,n,t.basename]);return s?re.createElement(AI,{page:n,matches:s,...e}):null}function wI(n){let{manifest:e,routeModules:t}=iA(),[s,c]=re.useState([]);return re.useEffect(()=>{let f=!1;return dI(n,e,t).then(p=>{f||c(p)}),()=>{f=!0}},[n,e,t]),s}function AI({page:n,matches:e,...t}){let s=qo(),{future:c,manifest:f,routeModules:p}=iA(),{basename:T}=rA(),{loaderData:w,matches:E}=yI(),C=re.useMemo(()=>Ly(n,e,E,f,s,"data"),[n,e,E,f,s]),I=re.useMemo(()=>Ly(n,e,E,f,s,"assets"),[n,e,E,f,s]),M=re.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let $=new Set,q=!1;if(e.forEach(ae=>{var le;let Q=f.routes[ae.route.id];!Q||!Q.hasLoader||(!C.some(De=>De.route.id===ae.route.id)&&ae.route.id in w&&((le=p[ae.route.id])!=null&&le.shouldRevalidate)||Q.hasClientLoader?q=!0:$.add(ae.route.id))}),$.size===0)return[];let _e=uI(n,T,c.unstable_trailingSlashAwareDataRequests,"data");return q&&$.size>0&&_e.searchParams.set("_routes",e.filter(ae=>$.has(ae.route.id)).map(ae=>ae.route.id).join(",")),[_e.pathname+_e.search]},[T,c.unstable_trailingSlashAwareDataRequests,w,s,f,C,e,n,p]),B=re.useMemo(()=>gI(I,f),[I,f]),W=wI(I);return re.createElement(re.Fragment,null,M.map($=>re.createElement("link",{key:$,rel:"prefetch",as:"fetch",href:$,...t})),B.map($=>re.createElement("link",{key:$,rel:"modulepreload",href:$,...t})),W.map(({key:$,link:q})=>re.createElement("link",{key:$,nonce:t.nonce,...q})))}function bI(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var TI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{TI&&(window.__reactRouterVersion="7.12.0")}catch{}function vI({basename:n,children:e,unstable_useTransitions:t,window:s}){let c=re.useRef();c.current==null&&(c.current=iC({window:s,v5Compat:!0}));let f=c.current,[p,T]=re.useState({action:f.action,location:f.location}),w=re.useCallback(E=>{t===!1?T(E):re.startTransition(()=>T(E))},[t]);return re.useLayoutEffect(()=>f.listen(w),[f,w]),re.createElement(eI,{basename:n,children:e,location:p.location,navigationType:p.action,navigator:f,unstable_useTransitions:t})}var sA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Jf=re.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:c,reloadDocument:f,replace:p,state:T,target:w,to:E,preventScrollReset:C,viewTransition:I,unstable_defaultShouldRevalidate:M,...B},W){let{basename:$,unstable_useTransitions:q}=re.useContext(ws),_e=typeof E=="string"&&sA.test(E),ae=Ww(E,$);E=ae.to;let Q=UC(E,{relative:c}),[le,De,Oe]=EI(s,B),j=NI(E,{replace:p,state:T,target:w,preventScrollReset:C,relative:c,viewTransition:I,unstable_defaultShouldRevalidate:M,unstable_useTransitions:q});function H(Y){e&&e(Y),Y.defaultPrevented||j(Y)}let V=re.createElement("a",{...B,...Oe,href:ae.absoluteURL||Q,onClick:ae.isExternal||f?e:H,ref:bI(W,De),target:w,"data-discover":!_e&&t==="render"?"true":void 0});return le&&!_e?re.createElement(re.Fragment,null,V,re.createElement(_I,{page:Q})):V});Jf.displayName="Link";var SI=re.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:c=!1,style:f,to:p,viewTransition:T,children:w,...E},C){let I=th(p,{relative:E.relative}),M=qo(),B=re.useContext(Od),{navigator:W,basename:$}=re.useContext(ws),q=B!=null&&LI(I)&&T===!0,_e=W.encodeLocation?W.encodeLocation(I).pathname:I.pathname,ae=M.pathname,Q=B&&B.navigation&&B.navigation.location?B.navigation.location.pathname:null;t||(ae=ae.toLowerCase(),Q=Q?Q.toLowerCase():null,_e=_e.toLowerCase()),Q&&$&&(Q=Ua(Q,$)||Q);const le=_e!=="/"&&_e.endsWith("/")?_e.length-1:_e.length;let De=ae===_e||!c&&ae.startsWith(_e)&&ae.charAt(le)==="/",Oe=Q!=null&&(Q===_e||!c&&Q.startsWith(_e)&&Q.charAt(_e.length)==="/"),j={isActive:De,isPending:Oe,isTransitioning:q},H=De?e:void 0,V;typeof s=="function"?V=s(j):V=[s,De?"active":null,Oe?"pending":null,q?"transitioning":null].filter(Boolean).join(" ");let Y=typeof f=="function"?f(j):f;return re.createElement(Jf,{...E,"aria-current":H,className:V,ref:C,style:Y,to:p,viewTransition:T},typeof w=="function"?w(j):w)});SI.displayName="NavLink";var CI=re.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:c,state:f,method:p=Uf,action:T,onSubmit:w,relative:E,preventScrollReset:C,viewTransition:I,unstable_defaultShouldRevalidate:M,...B},W)=>{let{unstable_useTransitions:$}=re.useContext(ws),q=DI(),_e=MI(T,{relative:E}),ae=p.toLowerCase()==="get"?"get":"post",Q=typeof T=="string"&&sA.test(T),le=De=>{if(w&&w(De),De.defaultPrevented)return;De.preventDefault();let Oe=De.nativeEvent.submitter,j=(Oe==null?void 0:Oe.getAttribute("formmethod"))||p,H=()=>q(Oe||De.currentTarget,{fetcherKey:e,method:j,navigate:t,replace:c,state:f,relative:E,preventScrollReset:C,viewTransition:I,unstable_defaultShouldRevalidate:M});$&&t!==!1?re.startTransition(()=>H()):H()};return re.createElement("form",{ref:W,method:ae,action:_e,onSubmit:s?w:le,...B,"data-discover":!Q&&n==="render"?"true":void 0})});CI.displayName="Form";function II(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function aA(n){let e=re.useContext(Oc);return Xn(e,II(n)),e}function NI(n,{target:e,replace:t,state:s,preventScrollReset:c,relative:f,viewTransition:p,unstable_defaultShouldRevalidate:T,unstable_useTransitions:w}={}){let E=VC(),C=qo(),I=th(n,{relative:f});return re.useCallback(M=>{if(aI(M,e)){M.preventDefault();let B=t!==void 0?t:Hu(C)===Hu(I),W=()=>E(n,{replace:B,state:s,preventScrollReset:c,relative:f,viewTransition:p,unstable_defaultShouldRevalidate:T});w?re.startTransition(()=>W()):W()}},[C,E,I,t,s,e,n,c,f,p,T,w])}var RI=0,OI=()=>`__${String(++RI)}__`;function DI(){let{router:n}=aA("useSubmit"),{basename:e}=re.useContext(ws),t=QC(),s=n.fetch,c=n.navigate;return re.useCallback(async(f,p={})=>{let{action:T,method:w,encType:E,formData:C,body:I}=cI(f,e);if(p.navigate===!1){let M=p.fetcherKey||OI();await s(M,t,p.action||T,{unstable_defaultShouldRevalidate:p.unstable_defaultShouldRevalidate,preventScrollReset:p.preventScrollReset,formData:C,body:I,formMethod:p.method||w,formEncType:p.encType||E,flushSync:p.flushSync})}else await c(p.action||T,{unstable_defaultShouldRevalidate:p.unstable_defaultShouldRevalidate,preventScrollReset:p.preventScrollReset,formData:C,body:I,formMethod:p.method||w,formEncType:p.encType||E,replace:p.replace,state:p.state,fromRouteId:t,flushSync:p.flushSync,viewTransition:p.viewTransition})},[s,c,e,t])}function MI(n,{relative:e}={}){let{basename:t}=re.useContext(ws),s=re.useContext(Ya);Xn(s,"useFormAction must be used inside a RouteContext");let[c]=s.matches.slice(-1),f={...th(n||".",{relative:e})},p=qo();if(n==null){f.search=p.search;let T=new URLSearchParams(f.search),w=T.getAll("index");if(w.some(C=>C==="")){T.delete("index"),w.filter(I=>I).forEach(I=>T.append("index",I));let C=T.toString();f.search=C?`?${C}`:""}}return(!n||n===".")&&c.route.index&&(f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(f.pathname=f.pathname==="/"?t:ka([t,f.pathname])),Hu(f)}function LI(n,{relative:e}={}){let t=re.useContext(Qw);Xn(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=aA("useViewTransitionState"),c=th(n,{relative:e});if(!t.isTransitioning)return!1;let f=Ua(t.currentLocation.pathname,s)||t.currentLocation.pathname,p=Ua(t.nextLocation.pathname,s)||t.nextLocation.pathname;return Zf(c.pathname,p)!=null||Zf(c.pathname,f)!=null}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PI=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),kI=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),Py=n=>{const e=kI(n);return e.charAt(0).toUpperCase()+e.slice(1)},oA=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),BI=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var UI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VI=re.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:c="",children:f,iconNode:p,...T},w)=>re.createElement("svg",{ref:w,...UI,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:oA("lucide",c),...!f&&!BI(T)&&{"aria-hidden":"true"},...T},[...p.map(([E,C])=>re.createElement(E,C)),...Array.isArray(f)?f:[f]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=(n,e)=>{const t=re.forwardRef(({className:s,...c},f)=>re.createElement(VI,{ref:f,iconNode:e,className:oA(`lucide-${PI(Py(n))}`,`lucide-${n}`,s),...c}));return t.displayName=Py(n),t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jI=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ky=pt("calendar",jI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FI=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Tg=pt("camera",FI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HI=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Tu=pt("check",HI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zI=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],lA=pt("chevron-left",zI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GI=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],vg=pt("chevron-right",GI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],cA=pt("circle-alert",qI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YI=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],zu=pt("circle-check-big",YI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],WI=pt("circle-check",XI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KI=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Gu=pt("clock",KI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QI=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],ZI=pt("coins",QI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JI=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],$I=pt("eye",JI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],t3=pt("flame",e3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],By=pt("gift",n3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],i3=pt("graduation-cap",r3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],jf=pt("heart",s3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],$f=pt("history",a3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Uy=pt("image",o3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],uA=pt("info",l3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],u3=pt("layout-dashboard",c3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],f3=pt("log-out",h3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],g3=pt("medal",d3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],p3=pt("menu",m3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Sg=pt("package",x3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],oc=pt("plus",y3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],_3=pt("qr-code",E3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],A3=pt("refresh-cw",w3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],T3=pt("scan-line",b3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],S3=pt("search",v3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],I3=pt("send",C3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],R3=pt("settings",N3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ed=pt("shield-check",O3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],M3=pt("shopping-bag",D3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],P3=pt("shopping-cart",L3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],td=pt("sparkles",k3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],U3=pt("star",B3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Mu=pt("target",V3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=[["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}],["path",{d:"M7 10v12",key:"1qc93n"}]],F3=pt("thumbs-up",j3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H3=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],vf=pt("trash-2",H3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z3=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],G3=pt("trending-up",z3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q3=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Vy=pt("trophy",q3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y3=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Cg=pt("upload",Y3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Ig=pt("user-plus",X3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],K3=pt("user",W3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Z3=pt("users",Q3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Do=pt("x",J3),hA=re.createContext(void 0),Dc=()=>{const n=re.useContext(hA);if(!n)throw new Error("useAlert must be used within an AlertProvider");return n},$3=({children:n})=>{const[e,t]=re.useState(null),s=(f,p="info")=>{t({message:f,type:p})},c=()=>{t(null)};return v.jsxs(hA.Provider,{value:{showAlert:s,hideAlert:c},children:[n,e&&v.jsx(eN,{message:e.message,type:e.type,onClose:c})]})},eN=({message:n,type:e,onClose:t})=>{const s={success:v.jsx(zu,{className:"text-emerald-500",size:32}),error:v.jsx(cA,{className:"text-rose-500",size:32}),info:v.jsx(uA,{className:"text-indigo-500",size:32})},c={success:"bg-emerald-50",error:"bg-rose-50",info:"bg-indigo-50"};return v.jsx("div",{className:"fixed inset-0 z-[999] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:v.jsx("div",{className:"bg-white rounded-[2.5rem] max-w-sm w-full p-8 shadow-2xl animate-in zoom-in-95 duration-200 border border-slate-100",children:v.jsxs("div",{className:"flex flex-col items-center text-center",children:[v.jsx("div",{className:`${c[e]} p-4 rounded-2xl mb-6`,children:s[e]}),v.jsx("h3",{className:"text-xl font-black text-slate-800 mb-2",children:""}),v.jsx("p",{className:"text-slate-500 font-bold leading-relaxed mb-8",children:n}),v.jsx("button",{onClick:t,className:"w-full bg-slate-900 hover:bg-slate-800 text-white font-black py-4 rounded-2xl transition-all active:scale-95 shadow-lg shadow-slate-200",children:""})]})})})},tN=()=>{};var jy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let c=n.charCodeAt(s);c<128?e[t++]=c:c<2048?(e[t++]=c>>6|192,e[t++]=c&63|128):(c&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(c=65536+((c&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=c>>18|240,e[t++]=c>>12&63|128,e[t++]=c>>6&63|128,e[t++]=c&63|128):(e[t++]=c>>12|224,e[t++]=c>>6&63|128,e[t++]=c&63|128)}return e},nN=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const c=n[t++];if(c<128)e[s++]=String.fromCharCode(c);else if(c>191&&c<224){const f=n[t++];e[s++]=String.fromCharCode((c&31)<<6|f&63)}else if(c>239&&c<365){const f=n[t++],p=n[t++],T=n[t++],w=((c&7)<<18|(f&63)<<12|(p&63)<<6|T&63)-65536;e[s++]=String.fromCharCode(55296+(w>>10)),e[s++]=String.fromCharCode(56320+(w&1023))}else{const f=n[t++],p=n[t++];e[s++]=String.fromCharCode((c&15)<<12|(f&63)<<6|p&63)}}return e.join("")},dA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let c=0;c<n.length;c+=3){const f=n[c],p=c+1<n.length,T=p?n[c+1]:0,w=c+2<n.length,E=w?n[c+2]:0,C=f>>2,I=(f&3)<<4|T>>4;let M=(T&15)<<2|E>>6,B=E&63;w||(B=64,p||(M=64)),s.push(t[C],t[I],t[M],t[B])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(fA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):nN(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let c=0;c<n.length;){const f=t[n.charAt(c++)],T=c<n.length?t[n.charAt(c)]:0;++c;const E=c<n.length?t[n.charAt(c)]:64;++c;const I=c<n.length?t[n.charAt(c)]:64;if(++c,f==null||T==null||E==null||I==null)throw new rN;const M=f<<2|T>>4;if(s.push(M),E!==64){const B=T<<4&240|E>>2;if(s.push(B),I!==64){const W=E<<6&192|I;s.push(W)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class rN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const iN=function(n){const e=fA(n);return dA.encodeByteArray(e,!0)},nd=function(n){return iN(n).replace(/\./g,"")},gA=function(n){try{return dA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=()=>sN().__FIREBASE_DEFAULTS__,oN=()=>{if(typeof process>"u"||typeof jy>"u")return;const n=jy.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},lN=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&gA(n[1]);return e&&JSON.parse(e)},Md=()=>{try{return tN()||aN()||oN()||lN()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},mA=n=>{var e,t;return(t=(e=Md())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},cN=n=>{const e=mA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},pA=()=>{var n;return(n=Md())==null?void 0:n.config},xA=n=>{var e;return(e=Md())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mc(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function yA(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hN(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",c=n.iat||0,f=n.sub||n.user_id;if(!f)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const p={iss:`https://securetoken.google.com/${s}`,aud:s,iat:c,exp:c+3600,auth_time:c,sub:f,user_id:f,firebase:{sign_in_provider:"custom",identities:{}},...n};return[nd(JSON.stringify(t)),nd(JSON.stringify(p)),""].join(".")}const Lu={};function fN(){const n={prod:[],emulator:[]};for(const e of Object.keys(Lu))Lu[e]?n.emulator.push(e):n.prod.push(e);return n}function dN(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Fy=!1;function EA(n,e){if(typeof window>"u"||typeof document>"u"||!Mc(window.location.host)||Lu[n]===e||Lu[n]||Fy)return;Lu[n]=e;function t(M){return`__firebase__banner__${M}`}const s="__firebase__banner",f=fN().prod.length>0;function p(){const M=document.getElementById(s);M&&M.remove()}function T(M){M.style.display="flex",M.style.background="#7faaf0",M.style.position="fixed",M.style.bottom="5px",M.style.left="5px",M.style.padding=".5em",M.style.borderRadius="5px",M.style.alignItems="center"}function w(M,B){M.setAttribute("width","24"),M.setAttribute("id",B),M.setAttribute("height","24"),M.setAttribute("viewBox","0 0 24 24"),M.setAttribute("fill","none"),M.style.marginLeft="-6px"}function E(){const M=document.createElement("span");return M.style.cursor="pointer",M.style.marginLeft="16px",M.style.fontSize="24px",M.innerHTML=" &times;",M.onclick=()=>{Fy=!0,p()},M}function C(M,B){M.setAttribute("id",B),M.innerText="Learn more",M.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",M.setAttribute("target","__blank"),M.style.paddingLeft="5px",M.style.textDecoration="underline"}function I(){const M=dN(s),B=t("text"),W=document.getElementById(B)||document.createElement("span"),$=t("learnmore"),q=document.getElementById($)||document.createElement("a"),_e=t("preprendIcon"),ae=document.getElementById(_e)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(M.created){const Q=M.element;T(Q),C(q,$);const le=E();w(ae,_e),Q.append(ae,W,q,le),document.body.appendChild(Q)}f?(W.innerText="Preview backend disconnected.",ae.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ae.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,W.innerText="Preview backend running in this workspace."),W.setAttribute("id",B)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(li())}function mN(){var e;const n=(e=Md())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function xN(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function yN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function EN(){const n=li();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function _N(){return!mN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wN(){try{return typeof indexedDB=="object"}catch{return!1}}function AN(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",c=self.indexedDB.open(s);c.onsuccess=()=>{c.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},c.onupgradeneeded=()=>{t=!1},c.onerror=()=>{var f;e(((f=c.error)==null?void 0:f.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN="FirebaseError";class Xa extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=bN,Object.setPrototypeOf(this,Xa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nh.prototype.create)}}class nh{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},c=`${this.service}/${e}`,f=this.errors[e],p=f?TN(f,s):"Error",T=`${this.serviceName}: ${p} (${c}).`;return new Xa(c,T,s)}}function TN(n,e){return n.replace(vN,(t,s)=>{const c=e[s];return c!=null?String(c):`<${s}?>`})}const vN=/\{\$([^}]+)}/g;function SN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function bl(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const c of t){if(!s.includes(c))return!1;const f=n[c],p=e[c];if(Hy(f)&&Hy(p)){if(!bl(f,p))return!1}else if(f!==p)return!1}for(const c of s)if(!t.includes(c))return!1;return!0}function Hy(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rh(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(c=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(c))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function vu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[c,f]=s.split("=");e[decodeURIComponent(c)]=decodeURIComponent(f)}}),e}function Su(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function CN(n,e){const t=new IN(n,e);return t.subscribe.bind(t)}class IN{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let c;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");NN(e,["next","error","complete"])?c=e:c={next:e,error:t,complete:s},c.next===void 0&&(c.next=ig),c.error===void 0&&(c.error=ig),c.complete===void 0&&(c.complete=ig);const f=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?c.error(this.finalError):c.complete()}catch{}}),this.observers.push(c),f}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function NN(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ig(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(n){return n&&n._delegate?n._delegate:n}class Tl{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new uN;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const c=this.getOrInitializeService({instanceIdentifier:t});c&&s.resolve(c)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(c){if(s)return null;throw c}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(DN(e))try{this.getOrInitializeService({instanceIdentifier:xl})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(t);try{const f=this.getOrInitializeService({instanceIdentifier:c});s.resolve(f)}catch{}}}}clearInstance(e=xl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xl){return this.instances.has(e)}getOptions(e=xl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const c=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[f,p]of this.instancesDeferred.entries()){const T=this.normalizeInstanceIdentifier(f);s===T&&p.resolve(c)}return c}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),c=this.onInitCallbacks.get(s)??new Set;c.add(e),this.onInitCallbacks.set(s,c);const f=this.instances.get(s);return f&&e(f,s),()=>{c.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const c of s)try{c(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:ON(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=xl){return this.component?this.component.multipleInstances?e:xl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ON(n){return n===xl?void 0:n}function DN(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new RN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ht;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ht||(Ht={}));const LN={debug:Ht.DEBUG,verbose:Ht.VERBOSE,info:Ht.INFO,warn:Ht.WARN,error:Ht.ERROR,silent:Ht.SILENT},PN=Ht.INFO,kN={[Ht.DEBUG]:"log",[Ht.VERBOSE]:"log",[Ht.INFO]:"info",[Ht.WARN]:"warn",[Ht.ERROR]:"error"},BN=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),c=kN[e];if(c)console[c](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ym{constructor(e){this.name=e,this._logLevel=PN,this._logHandler=BN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ht))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?LN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ht.DEBUG,...e),this._logHandler(this,Ht.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ht.VERBOSE,...e),this._logHandler(this,Ht.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ht.INFO,...e),this._logHandler(this,Ht.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ht.WARN,...e),this._logHandler(this,Ht.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ht.ERROR,...e),this._logHandler(this,Ht.ERROR,...e)}}const UN=(n,e)=>e.some(t=>n instanceof t);let zy,Gy;function VN(){return zy||(zy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jN(){return Gy||(Gy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _A=new WeakMap,Ng=new WeakMap,wA=new WeakMap,sg=new WeakMap,Em=new WeakMap;function FN(n){const e=new Promise((t,s)=>{const c=()=>{n.removeEventListener("success",f),n.removeEventListener("error",p)},f=()=>{t(Mo(n.result)),c()},p=()=>{s(n.error),c()};n.addEventListener("success",f),n.addEventListener("error",p)});return e.then(t=>{t instanceof IDBCursor&&_A.set(t,n)}).catch(()=>{}),Em.set(e,n),e}function HN(n){if(Ng.has(n))return;const e=new Promise((t,s)=>{const c=()=>{n.removeEventListener("complete",f),n.removeEventListener("error",p),n.removeEventListener("abort",p)},f=()=>{t(),c()},p=()=>{s(n.error||new DOMException("AbortError","AbortError")),c()};n.addEventListener("complete",f),n.addEventListener("error",p),n.addEventListener("abort",p)});Ng.set(n,e)}let Rg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ng.get(n);if(e==="objectStoreNames")return n.objectStoreNames||wA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Mo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function zN(n){Rg=n(Rg)}function GN(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(ag(this),e,...t);return wA.set(s,e.sort?e.sort():[e]),Mo(s)}:jN().includes(n)?function(...e){return n.apply(ag(this),e),Mo(_A.get(this))}:function(...e){return Mo(n.apply(ag(this),e))}}function qN(n){return typeof n=="function"?GN(n):(n instanceof IDBTransaction&&HN(n),UN(n,VN())?new Proxy(n,Rg):n)}function Mo(n){if(n instanceof IDBRequest)return FN(n);if(sg.has(n))return sg.get(n);const e=qN(n);return e!==n&&(sg.set(n,e),Em.set(e,n)),e}const ag=n=>Em.get(n);function YN(n,e,{blocked:t,upgrade:s,blocking:c,terminated:f}={}){const p=indexedDB.open(n,e),T=Mo(p);return s&&p.addEventListener("upgradeneeded",w=>{s(Mo(p.result),w.oldVersion,w.newVersion,Mo(p.transaction),w)}),t&&p.addEventListener("blocked",w=>t(w.oldVersion,w.newVersion,w)),T.then(w=>{f&&w.addEventListener("close",()=>f()),c&&w.addEventListener("versionchange",E=>c(E.oldVersion,E.newVersion,E))}).catch(()=>{}),T}const XN=["get","getKey","getAll","getAllKeys","count"],WN=["put","add","delete","clear"],og=new Map;function qy(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(og.get(e))return og.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,c=WN.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(c||XN.includes(t)))return;const f=async function(p,...T){const w=this.transaction(p,c?"readwrite":"readonly");let E=w.store;return s&&(E=E.index(T.shift())),(await Promise.all([E[t](...T),c&&w.done]))[0]};return og.set(e,f),f}zN(n=>({...n,get:(e,t,s)=>qy(e,t)||n.get(e,t,s),has:(e,t)=>!!qy(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(QN(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function QN(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Og="@firebase/app",Yy="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va=new ym("@firebase/app"),ZN="@firebase/app-compat",JN="@firebase/analytics-compat",$N="@firebase/analytics",e4="@firebase/app-check-compat",t4="@firebase/app-check",n4="@firebase/auth",r4="@firebase/auth-compat",i4="@firebase/database",s4="@firebase/data-connect",a4="@firebase/database-compat",o4="@firebase/functions",l4="@firebase/functions-compat",c4="@firebase/installations",u4="@firebase/installations-compat",h4="@firebase/messaging",f4="@firebase/messaging-compat",d4="@firebase/performance",g4="@firebase/performance-compat",m4="@firebase/remote-config",p4="@firebase/remote-config-compat",x4="@firebase/storage",y4="@firebase/storage-compat",E4="@firebase/firestore",_4="@firebase/ai",w4="@firebase/firestore-compat",A4="firebase",b4="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dg="[DEFAULT]",T4={[Og]:"fire-core",[ZN]:"fire-core-compat",[$N]:"fire-analytics",[JN]:"fire-analytics-compat",[t4]:"fire-app-check",[e4]:"fire-app-check-compat",[n4]:"fire-auth",[r4]:"fire-auth-compat",[i4]:"fire-rtdb",[s4]:"fire-data-connect",[a4]:"fire-rtdb-compat",[o4]:"fire-fn",[l4]:"fire-fn-compat",[c4]:"fire-iid",[u4]:"fire-iid-compat",[h4]:"fire-fcm",[f4]:"fire-fcm-compat",[d4]:"fire-perf",[g4]:"fire-perf-compat",[m4]:"fire-rc",[p4]:"fire-rc-compat",[x4]:"fire-gcs",[y4]:"fire-gcs-compat",[E4]:"fire-fst",[w4]:"fire-fst-compat",[_4]:"fire-vertex","fire-js":"fire-js",[A4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rd=new Map,v4=new Map,Mg=new Map;function Xy(n,e){try{n.container.addComponent(e)}catch(t){Va.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ac(n){const e=n.name;if(Mg.has(e))return Va.debug(`There were multiple attempts to register component ${e}.`),!1;Mg.set(e,n);for(const t of rd.values())Xy(t,n);for(const t of v4.values())Xy(t,n);return!0}function _m(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Zi(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Lo=new nh("app","Firebase",S4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Tl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Lo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc=b4;function AA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:Dg,automaticDataCollectionEnabled:!0,...e},c=s.name;if(typeof c!="string"||!c)throw Lo.create("bad-app-name",{appName:String(c)});if(t||(t=pA()),!t)throw Lo.create("no-options");const f=rd.get(c);if(f){if(bl(t,f.options)&&bl(s,f.config))return f;throw Lo.create("duplicate-app",{appName:c})}const p=new MN(c);for(const w of Mg.values())p.addComponent(w);const T=new C4(t,s,p);return rd.set(c,T),T}function bA(n=Dg){const e=rd.get(n);if(!e&&n===Dg&&pA())return AA();if(!e)throw Lo.create("no-app",{appName:n});return e}function Po(n,e,t){let s=T4[n]??n;t&&(s+=`-${t}`);const c=s.match(/\s|\//),f=e.match(/\s|\//);if(c||f){const p=[`Unable to register library "${s}" with version "${e}":`];c&&p.push(`library name "${s}" contains illegal characters (whitespace or "/")`),c&&f&&p.push("and"),f&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Va.warn(p.join(" "));return}Ac(new Tl(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I4="firebase-heartbeat-database",N4=1,qu="firebase-heartbeat-store";let lg=null;function TA(){return lg||(lg=YN(I4,N4,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(qu)}catch(t){console.warn(t)}}}}).catch(n=>{throw Lo.create("idb-open",{originalErrorMessage:n.message})})),lg}async function R4(n){try{const t=(await TA()).transaction(qu),s=await t.objectStore(qu).get(vA(n));return await t.done,s}catch(e){if(e instanceof Xa)Va.warn(e.message);else{const t=Lo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Va.warn(t.message)}}}async function Wy(n,e){try{const s=(await TA()).transaction(qu,"readwrite");await s.objectStore(qu).put(e,vA(n)),await s.done}catch(t){if(t instanceof Xa)Va.warn(t.message);else{const s=Lo.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Va.warn(s.message)}}}function vA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4=1024,D4=30;class M4{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new P4(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const c=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),f=Ky();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===f||this._heartbeatsCache.heartbeats.some(p=>p.date===f))return;if(this._heartbeatsCache.heartbeats.push({date:f,agent:c}),this._heartbeatsCache.heartbeats.length>D4){const p=k4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(p,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Va.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Ky(),{heartbeatsToSend:s,unsentEntries:c}=L4(this._heartbeatsCache.heartbeats),f=nd(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,c.length>0?(this._heartbeatsCache.heartbeats=c,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),f}catch(t){return Va.warn(t),""}}}function Ky(){return new Date().toISOString().substring(0,10)}function L4(n,e=O4){const t=[];let s=n.slice();for(const c of n){const f=t.find(p=>p.agent===c.agent);if(f){if(f.dates.push(c.date),Qy(t)>e){f.dates.pop();break}}else if(t.push({agent:c.agent,dates:[c.date]}),Qy(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class P4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wN()?AN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await R4(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Wy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Wy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Qy(n){return nd(JSON.stringify({version:2,heartbeats:n})).length}function k4(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B4(n){Ac(new Tl("platform-logger",e=>new KN(e),"PRIVATE")),Ac(new Tl("heartbeat",e=>new M4(e),"PRIVATE")),Po(Og,Yy,n),Po(Og,Yy,"esm2020"),Po("fire-js","")}B4("");var Zy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ko,SA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,H){function V(){}V.prototype=H.prototype,j.F=H.prototype,j.prototype=new V,j.prototype.constructor=j,j.D=function(Y,Z,J){for(var K=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)K[$e-2]=arguments[$e];return H.prototype[Z].apply(Y,K)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function c(j,H,V){V||(V=0);const Y=Array(16);if(typeof H=="string")for(var Z=0;Z<16;++Z)Y[Z]=H.charCodeAt(V++)|H.charCodeAt(V++)<<8|H.charCodeAt(V++)<<16|H.charCodeAt(V++)<<24;else for(Z=0;Z<16;++Z)Y[Z]=H[V++]|H[V++]<<8|H[V++]<<16|H[V++]<<24;H=j.g[0],V=j.g[1],Z=j.g[2];let J=j.g[3],K;K=H+(J^V&(Z^J))+Y[0]+3614090360&4294967295,H=V+(K<<7&4294967295|K>>>25),K=J+(Z^H&(V^Z))+Y[1]+3905402710&4294967295,J=H+(K<<12&4294967295|K>>>20),K=Z+(V^J&(H^V))+Y[2]+606105819&4294967295,Z=J+(K<<17&4294967295|K>>>15),K=V+(H^Z&(J^H))+Y[3]+3250441966&4294967295,V=Z+(K<<22&4294967295|K>>>10),K=H+(J^V&(Z^J))+Y[4]+4118548399&4294967295,H=V+(K<<7&4294967295|K>>>25),K=J+(Z^H&(V^Z))+Y[5]+1200080426&4294967295,J=H+(K<<12&4294967295|K>>>20),K=Z+(V^J&(H^V))+Y[6]+2821735955&4294967295,Z=J+(K<<17&4294967295|K>>>15),K=V+(H^Z&(J^H))+Y[7]+4249261313&4294967295,V=Z+(K<<22&4294967295|K>>>10),K=H+(J^V&(Z^J))+Y[8]+1770035416&4294967295,H=V+(K<<7&4294967295|K>>>25),K=J+(Z^H&(V^Z))+Y[9]+2336552879&4294967295,J=H+(K<<12&4294967295|K>>>20),K=Z+(V^J&(H^V))+Y[10]+4294925233&4294967295,Z=J+(K<<17&4294967295|K>>>15),K=V+(H^Z&(J^H))+Y[11]+2304563134&4294967295,V=Z+(K<<22&4294967295|K>>>10),K=H+(J^V&(Z^J))+Y[12]+1804603682&4294967295,H=V+(K<<7&4294967295|K>>>25),K=J+(Z^H&(V^Z))+Y[13]+4254626195&4294967295,J=H+(K<<12&4294967295|K>>>20),K=Z+(V^J&(H^V))+Y[14]+2792965006&4294967295,Z=J+(K<<17&4294967295|K>>>15),K=V+(H^Z&(J^H))+Y[15]+1236535329&4294967295,V=Z+(K<<22&4294967295|K>>>10),K=H+(Z^J&(V^Z))+Y[1]+4129170786&4294967295,H=V+(K<<5&4294967295|K>>>27),K=J+(V^Z&(H^V))+Y[6]+3225465664&4294967295,J=H+(K<<9&4294967295|K>>>23),K=Z+(H^V&(J^H))+Y[11]+643717713&4294967295,Z=J+(K<<14&4294967295|K>>>18),K=V+(J^H&(Z^J))+Y[0]+3921069994&4294967295,V=Z+(K<<20&4294967295|K>>>12),K=H+(Z^J&(V^Z))+Y[5]+3593408605&4294967295,H=V+(K<<5&4294967295|K>>>27),K=J+(V^Z&(H^V))+Y[10]+38016083&4294967295,J=H+(K<<9&4294967295|K>>>23),K=Z+(H^V&(J^H))+Y[15]+3634488961&4294967295,Z=J+(K<<14&4294967295|K>>>18),K=V+(J^H&(Z^J))+Y[4]+3889429448&4294967295,V=Z+(K<<20&4294967295|K>>>12),K=H+(Z^J&(V^Z))+Y[9]+568446438&4294967295,H=V+(K<<5&4294967295|K>>>27),K=J+(V^Z&(H^V))+Y[14]+3275163606&4294967295,J=H+(K<<9&4294967295|K>>>23),K=Z+(H^V&(J^H))+Y[3]+4107603335&4294967295,Z=J+(K<<14&4294967295|K>>>18),K=V+(J^H&(Z^J))+Y[8]+1163531501&4294967295,V=Z+(K<<20&4294967295|K>>>12),K=H+(Z^J&(V^Z))+Y[13]+2850285829&4294967295,H=V+(K<<5&4294967295|K>>>27),K=J+(V^Z&(H^V))+Y[2]+4243563512&4294967295,J=H+(K<<9&4294967295|K>>>23),K=Z+(H^V&(J^H))+Y[7]+1735328473&4294967295,Z=J+(K<<14&4294967295|K>>>18),K=V+(J^H&(Z^J))+Y[12]+2368359562&4294967295,V=Z+(K<<20&4294967295|K>>>12),K=H+(V^Z^J)+Y[5]+4294588738&4294967295,H=V+(K<<4&4294967295|K>>>28),K=J+(H^V^Z)+Y[8]+2272392833&4294967295,J=H+(K<<11&4294967295|K>>>21),K=Z+(J^H^V)+Y[11]+1839030562&4294967295,Z=J+(K<<16&4294967295|K>>>16),K=V+(Z^J^H)+Y[14]+4259657740&4294967295,V=Z+(K<<23&4294967295|K>>>9),K=H+(V^Z^J)+Y[1]+2763975236&4294967295,H=V+(K<<4&4294967295|K>>>28),K=J+(H^V^Z)+Y[4]+1272893353&4294967295,J=H+(K<<11&4294967295|K>>>21),K=Z+(J^H^V)+Y[7]+4139469664&4294967295,Z=J+(K<<16&4294967295|K>>>16),K=V+(Z^J^H)+Y[10]+3200236656&4294967295,V=Z+(K<<23&4294967295|K>>>9),K=H+(V^Z^J)+Y[13]+681279174&4294967295,H=V+(K<<4&4294967295|K>>>28),K=J+(H^V^Z)+Y[0]+3936430074&4294967295,J=H+(K<<11&4294967295|K>>>21),K=Z+(J^H^V)+Y[3]+3572445317&4294967295,Z=J+(K<<16&4294967295|K>>>16),K=V+(Z^J^H)+Y[6]+76029189&4294967295,V=Z+(K<<23&4294967295|K>>>9),K=H+(V^Z^J)+Y[9]+3654602809&4294967295,H=V+(K<<4&4294967295|K>>>28),K=J+(H^V^Z)+Y[12]+3873151461&4294967295,J=H+(K<<11&4294967295|K>>>21),K=Z+(J^H^V)+Y[15]+530742520&4294967295,Z=J+(K<<16&4294967295|K>>>16),K=V+(Z^J^H)+Y[2]+3299628645&4294967295,V=Z+(K<<23&4294967295|K>>>9),K=H+(Z^(V|~J))+Y[0]+4096336452&4294967295,H=V+(K<<6&4294967295|K>>>26),K=J+(V^(H|~Z))+Y[7]+1126891415&4294967295,J=H+(K<<10&4294967295|K>>>22),K=Z+(H^(J|~V))+Y[14]+2878612391&4294967295,Z=J+(K<<15&4294967295|K>>>17),K=V+(J^(Z|~H))+Y[5]+4237533241&4294967295,V=Z+(K<<21&4294967295|K>>>11),K=H+(Z^(V|~J))+Y[12]+1700485571&4294967295,H=V+(K<<6&4294967295|K>>>26),K=J+(V^(H|~Z))+Y[3]+2399980690&4294967295,J=H+(K<<10&4294967295|K>>>22),K=Z+(H^(J|~V))+Y[10]+4293915773&4294967295,Z=J+(K<<15&4294967295|K>>>17),K=V+(J^(Z|~H))+Y[1]+2240044497&4294967295,V=Z+(K<<21&4294967295|K>>>11),K=H+(Z^(V|~J))+Y[8]+1873313359&4294967295,H=V+(K<<6&4294967295|K>>>26),K=J+(V^(H|~Z))+Y[15]+4264355552&4294967295,J=H+(K<<10&4294967295|K>>>22),K=Z+(H^(J|~V))+Y[6]+2734768916&4294967295,Z=J+(K<<15&4294967295|K>>>17),K=V+(J^(Z|~H))+Y[13]+1309151649&4294967295,V=Z+(K<<21&4294967295|K>>>11),K=H+(Z^(V|~J))+Y[4]+4149444226&4294967295,H=V+(K<<6&4294967295|K>>>26),K=J+(V^(H|~Z))+Y[11]+3174756917&4294967295,J=H+(K<<10&4294967295|K>>>22),K=Z+(H^(J|~V))+Y[2]+718787259&4294967295,Z=J+(K<<15&4294967295|K>>>17),K=V+(J^(Z|~H))+Y[9]+3951481745&4294967295,j.g[0]=j.g[0]+H&4294967295,j.g[1]=j.g[1]+(Z+(K<<21&4294967295|K>>>11))&4294967295,j.g[2]=j.g[2]+Z&4294967295,j.g[3]=j.g[3]+J&4294967295}s.prototype.v=function(j,H){H===void 0&&(H=j.length);const V=H-this.blockSize,Y=this.C;let Z=this.h,J=0;for(;J<H;){if(Z==0)for(;J<=V;)c(this,j,J),J+=this.blockSize;if(typeof j=="string"){for(;J<H;)if(Y[Z++]=j.charCodeAt(J++),Z==this.blockSize){c(this,Y),Z=0;break}}else for(;J<H;)if(Y[Z++]=j[J++],Z==this.blockSize){c(this,Y),Z=0;break}}this.h=Z,this.o+=H},s.prototype.A=function(){var j=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);j[0]=128;for(var H=1;H<j.length-8;++H)j[H]=0;H=this.o*8;for(var V=j.length-8;V<j.length;++V)j[V]=H&255,H/=256;for(this.v(j),j=Array(16),H=0,V=0;V<4;++V)for(let Y=0;Y<32;Y+=8)j[H++]=this.g[V]>>>Y&255;return j};function f(j,H){var V=T;return Object.prototype.hasOwnProperty.call(V,j)?V[j]:V[j]=H(j)}function p(j,H){this.h=H;const V=[];let Y=!0;for(let Z=j.length-1;Z>=0;Z--){const J=j[Z]|0;Y&&J==H||(V[Z]=J,Y=!1)}this.g=V}var T={};function w(j){return-128<=j&&j<128?f(j,function(H){return new p([H|0],H<0?-1:0)}):new p([j|0],j<0?-1:0)}function E(j){if(isNaN(j)||!isFinite(j))return I;if(j<0)return q(E(-j));const H=[];let V=1;for(let Y=0;j>=V;Y++)H[Y]=j/V|0,V*=4294967296;return new p(H,0)}function C(j,H){if(j.length==0)throw Error("number format error: empty string");if(H=H||10,H<2||36<H)throw Error("radix out of range: "+H);if(j.charAt(0)=="-")return q(C(j.substring(1),H));if(j.indexOf("-")>=0)throw Error('number format error: interior "-" character');const V=E(Math.pow(H,8));let Y=I;for(let J=0;J<j.length;J+=8){var Z=Math.min(8,j.length-J);const K=parseInt(j.substring(J,J+Z),H);Z<8?(Z=E(Math.pow(H,Z)),Y=Y.j(Z).add(E(K))):(Y=Y.j(V),Y=Y.add(E(K)))}return Y}var I=w(0),M=w(1),B=w(16777216);n=p.prototype,n.m=function(){if($(this))return-q(this).m();let j=0,H=1;for(let V=0;V<this.g.length;V++){const Y=this.i(V);j+=(Y>=0?Y:4294967296+Y)*H,H*=4294967296}return j},n.toString=function(j){if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(W(this))return"0";if($(this))return"-"+q(this).toString(j);const H=E(Math.pow(j,6));var V=this;let Y="";for(;;){const Z=le(V,H).g;V=_e(V,Z.j(H));let J=((V.g.length>0?V.g[0]:V.h)>>>0).toString(j);if(V=Z,W(V))return J+Y;for(;J.length<6;)J="0"+J;Y=J+Y}},n.i=function(j){return j<0?0:j<this.g.length?this.g[j]:this.h};function W(j){if(j.h!=0)return!1;for(let H=0;H<j.g.length;H++)if(j.g[H]!=0)return!1;return!0}function $(j){return j.h==-1}n.l=function(j){return j=_e(this,j),$(j)?-1:W(j)?0:1};function q(j){const H=j.g.length,V=[];for(let Y=0;Y<H;Y++)V[Y]=~j.g[Y];return new p(V,~j.h).add(M)}n.abs=function(){return $(this)?q(this):this},n.add=function(j){const H=Math.max(this.g.length,j.g.length),V=[];let Y=0;for(let Z=0;Z<=H;Z++){let J=Y+(this.i(Z)&65535)+(j.i(Z)&65535),K=(J>>>16)+(this.i(Z)>>>16)+(j.i(Z)>>>16);Y=K>>>16,J&=65535,K&=65535,V[Z]=K<<16|J}return new p(V,V[V.length-1]&-2147483648?-1:0)};function _e(j,H){return j.add(q(H))}n.j=function(j){if(W(this)||W(j))return I;if($(this))return $(j)?q(this).j(q(j)):q(q(this).j(j));if($(j))return q(this.j(q(j)));if(this.l(B)<0&&j.l(B)<0)return E(this.m()*j.m());const H=this.g.length+j.g.length,V=[];for(var Y=0;Y<2*H;Y++)V[Y]=0;for(Y=0;Y<this.g.length;Y++)for(let Z=0;Z<j.g.length;Z++){const J=this.i(Y)>>>16,K=this.i(Y)&65535,$e=j.i(Z)>>>16,fe=j.i(Z)&65535;V[2*Y+2*Z]+=K*fe,ae(V,2*Y+2*Z),V[2*Y+2*Z+1]+=J*fe,ae(V,2*Y+2*Z+1),V[2*Y+2*Z+1]+=K*$e,ae(V,2*Y+2*Z+1),V[2*Y+2*Z+2]+=J*$e,ae(V,2*Y+2*Z+2)}for(j=0;j<H;j++)V[j]=V[2*j+1]<<16|V[2*j];for(j=H;j<2*H;j++)V[j]=0;return new p(V,0)};function ae(j,H){for(;(j[H]&65535)!=j[H];)j[H+1]+=j[H]>>>16,j[H]&=65535,H++}function Q(j,H){this.g=j,this.h=H}function le(j,H){if(W(H))throw Error("division by zero");if(W(j))return new Q(I,I);if($(j))return H=le(q(j),H),new Q(q(H.g),q(H.h));if($(H))return H=le(j,q(H)),new Q(q(H.g),H.h);if(j.g.length>30){if($(j)||$(H))throw Error("slowDivide_ only works with positive integers.");for(var V=M,Y=H;Y.l(j)<=0;)V=De(V),Y=De(Y);var Z=Oe(V,1),J=Oe(Y,1);for(Y=Oe(Y,2),V=Oe(V,2);!W(Y);){var K=J.add(Y);K.l(j)<=0&&(Z=Z.add(V),J=K),Y=Oe(Y,1),V=Oe(V,1)}return H=_e(j,Z.j(H)),new Q(Z,H)}for(Z=I;j.l(H)>=0;){for(V=Math.max(1,Math.floor(j.m()/H.m())),Y=Math.ceil(Math.log(V)/Math.LN2),Y=Y<=48?1:Math.pow(2,Y-48),J=E(V),K=J.j(H);$(K)||K.l(j)>0;)V-=Y,J=E(V),K=J.j(H);W(J)&&(J=M),Z=Z.add(J),j=_e(j,K)}return new Q(Z,j)}n.B=function(j){return le(this,j).h},n.and=function(j){const H=Math.max(this.g.length,j.g.length),V=[];for(let Y=0;Y<H;Y++)V[Y]=this.i(Y)&j.i(Y);return new p(V,this.h&j.h)},n.or=function(j){const H=Math.max(this.g.length,j.g.length),V=[];for(let Y=0;Y<H;Y++)V[Y]=this.i(Y)|j.i(Y);return new p(V,this.h|j.h)},n.xor=function(j){const H=Math.max(this.g.length,j.g.length),V=[];for(let Y=0;Y<H;Y++)V[Y]=this.i(Y)^j.i(Y);return new p(V,this.h^j.h)};function De(j){const H=j.g.length+1,V=[];for(let Y=0;Y<H;Y++)V[Y]=j.i(Y)<<1|j.i(Y-1)>>>31;return new p(V,j.h)}function Oe(j,H){const V=H>>5;H%=32;const Y=j.g.length-V,Z=[];for(let J=0;J<Y;J++)Z[J]=H>0?j.i(J+V)>>>H|j.i(J+V+1)<<32-H:j.i(J+V);return new p(Z,j.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,SA=s,p.prototype.add=p.prototype.add,p.prototype.multiply=p.prototype.j,p.prototype.modulo=p.prototype.B,p.prototype.compare=p.prototype.l,p.prototype.toNumber=p.prototype.m,p.prototype.toString=p.prototype.toString,p.prototype.getBits=p.prototype.i,p.fromNumber=E,p.fromString=C,ko=p}).apply(typeof Zy<"u"?Zy:typeof self<"u"?self:typeof window<"u"?window:{});var Sf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var CA,Cu,IA,Ff,Lg,NA,RA,OA;(function(){var n,e=Object.defineProperty;function t(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sf=="object"&&Sf];for(var N=0;N<x.length;++N){var D=x[N];if(D&&D.Math==Math)return D}throw Error("Cannot find global object")}var s=t(this);function c(x,N){if(N)e:{var D=s;x=x.split(".");for(var F=0;F<x.length-1;F++){var ce=x[F];if(!(ce in D))break e;D=D[ce]}x=x[x.length-1],F=D[x],N=N(F),N!=F&&N!=null&&e(D,x,{configurable:!0,writable:!0,value:N})}}c("Symbol.dispose",function(x){return x||Symbol("Symbol.dispose")}),c("Array.prototype.values",function(x){return x||function(){return this[Symbol.iterator]()}}),c("Object.entries",function(x){return x||function(N){var D=[],F;for(F in N)Object.prototype.hasOwnProperty.call(N,F)&&D.push([F,N[F]]);return D}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},p=this||self;function T(x){var N=typeof x;return N=="object"&&x!=null||N=="function"}function w(x,N,D){return x.call.apply(x.bind,arguments)}function E(x,N,D){return E=w,E.apply(null,arguments)}function C(x,N){var D=Array.prototype.slice.call(arguments,1);return function(){var F=D.slice();return F.push.apply(F,arguments),x.apply(this,F)}}function I(x,N){function D(){}D.prototype=N.prototype,x.Z=N.prototype,x.prototype=new D,x.prototype.constructor=x,x.Ob=function(F,ce,Ee){for(var Be=Array(arguments.length-2),ft=2;ft<arguments.length;ft++)Be[ft-2]=arguments[ft];return N.prototype[ce].apply(F,Be)}}var M=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?x=>x&&AsyncContext.Snapshot.wrap(x):x=>x;function B(x){const N=x.length;if(N>0){const D=Array(N);for(let F=0;F<N;F++)D[F]=x[F];return D}return[]}function W(x,N){for(let F=1;F<arguments.length;F++){const ce=arguments[F];var D=typeof ce;if(D=D!="object"?D:ce?Array.isArray(ce)?"array":D:"null",D=="array"||D=="object"&&typeof ce.length=="number"){D=x.length||0;const Ee=ce.length||0;x.length=D+Ee;for(let Be=0;Be<Ee;Be++)x[D+Be]=ce[Be]}else x.push(ce)}}class ${constructor(N,D){this.i=N,this.j=D,this.h=0,this.g=null}get(){let N;return this.h>0?(this.h--,N=this.g,this.g=N.next,N.next=null):N=this.i(),N}}function q(x){p.setTimeout(()=>{throw x},0)}function _e(){var x=j;let N=null;return x.g&&(N=x.g,x.g=x.g.next,x.g||(x.h=null),N.next=null),N}class ae{constructor(){this.h=this.g=null}add(N,D){const F=Q.get();F.set(N,D),this.h?this.h.next=F:this.g=F,this.h=F}}var Q=new $(()=>new le,x=>x.reset());class le{constructor(){this.next=this.g=this.h=null}set(N,D){this.h=N,this.g=D,this.next=null}reset(){this.next=this.g=this.h=null}}let De,Oe=!1,j=new ae,H=()=>{const x=Promise.resolve(void 0);De=()=>{x.then(V)}};function V(){for(var x;x=_e();){try{x.h.call(x.g)}catch(D){q(D)}var N=Q;N.j(x),N.h<100&&(N.h++,x.next=N.g,N.g=x)}Oe=!1}function Y(){this.u=this.u,this.C=this.C}Y.prototype.u=!1,Y.prototype.dispose=function(){this.u||(this.u=!0,this.N())},Y.prototype[Symbol.dispose]=function(){this.dispose()},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Z(x,N){this.type=x,this.g=this.target=N,this.defaultPrevented=!1}Z.prototype.h=function(){this.defaultPrevented=!0};var J=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var x=!1,N=Object.defineProperty({},"passive",{get:function(){x=!0}});try{const D=()=>{};p.addEventListener("test",D,N),p.removeEventListener("test",D,N)}catch{}return x})();function K(x){return/^[\s\xa0]*$/.test(x)}function $e(x,N){Z.call(this,x?x.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,x&&this.init(x,N)}I($e,Z),$e.prototype.init=function(x,N){const D=this.type=x.type,F=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:null;this.target=x.target||x.srcElement,this.g=N,N=x.relatedTarget,N||(D=="mouseover"?N=x.fromElement:D=="mouseout"&&(N=x.toElement)),this.relatedTarget=N,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0),this.button=x.button,this.key=x.key||"",this.ctrlKey=x.ctrlKey,this.altKey=x.altKey,this.shiftKey=x.shiftKey,this.metaKey=x.metaKey,this.pointerId=x.pointerId||0,this.pointerType=x.pointerType,this.state=x.state,this.i=x,x.defaultPrevented&&$e.Z.h.call(this)},$e.prototype.h=function(){$e.Z.h.call(this);const x=this.i;x.preventDefault?x.preventDefault():x.returnValue=!1};var fe="closure_listenable_"+(Math.random()*1e6|0),me=0;function be(x,N,D,F,ce){this.listener=x,this.proxy=null,this.src=N,this.type=D,this.capture=!!F,this.ha=ce,this.key=++me,this.da=this.fa=!1}function Ge(x){x.da=!0,x.listener=null,x.proxy=null,x.src=null,x.ha=null}function lt(x,N,D){for(const F in x)N.call(D,x[F],F,x)}function xt(x,N){for(const D in x)N.call(void 0,x[D],D,x)}function ie(x){const N={};for(const D in x)N[D]=x[D];return N}const Ae="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ve(x,N){let D,F;for(let ce=1;ce<arguments.length;ce++){F=arguments[ce];for(D in F)x[D]=F[D];for(let Ee=0;Ee<Ae.length;Ee++)D=Ae[Ee],Object.prototype.hasOwnProperty.call(F,D)&&(x[D]=F[D])}}function je(x){this.src=x,this.g={},this.h=0}je.prototype.add=function(x,N,D,F,ce){const Ee=x.toString();x=this.g[Ee],x||(x=this.g[Ee]=[],this.h++);const Be=Pe(x,N,F,ce);return Be>-1?(N=x[Be],D||(N.fa=!1)):(N=new be(N,this.src,Ee,!!F,ce),N.fa=D,x.push(N)),N};function rt(x,N){const D=N.type;if(D in x.g){var F=x.g[D],ce=Array.prototype.indexOf.call(F,N,void 0),Ee;(Ee=ce>=0)&&Array.prototype.splice.call(F,ce,1),Ee&&(Ge(N),x.g[D].length==0&&(delete x.g[D],x.h--))}}function Pe(x,N,D,F){for(let ce=0;ce<x.length;++ce){const Ee=x[ce];if(!Ee.da&&Ee.listener==N&&Ee.capture==!!D&&Ee.ha==F)return ce}return-1}var wt="closure_lm_"+(Math.random()*1e6|0),vt={};function en(x,N,D,F,ce){if(Array.isArray(N)){for(let Ee=0;Ee<N.length;Ee++)en(x,N[Ee],D,F,ce);return null}return D=qt(D),x&&x[fe]?x.J(N,D,T(F)?!!F.capture:!1,ce):kr(x,N,D,!1,F,ce)}function kr(x,N,D,F,ce,Ee){if(!N)throw Error("Invalid event type");const Be=T(ce)?!!ce.capture:!!ce;let ft=Wr(x);if(ft||(x[wt]=ft=new je(x)),D=ft.add(N,D,F,Be,Ee),D.proxy)return D;if(F=ln(),D.proxy=F,F.src=x,F.listener=D,x.addEventListener)J||(ce=Be),ce===void 0&&(ce=!1),x.addEventListener(N.toString(),F,ce);else if(x.attachEvent)x.attachEvent(hr(N.toString()),F);else if(x.addListener&&x.removeListener)x.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return D}function ln(){function x(D){return N.call(x.src,x.listener,D)}const N=ir;return x}function ci(x,N,D,F,ce){if(Array.isArray(N))for(var Ee=0;Ee<N.length;Ee++)ci(x,N[Ee],D,F,ce);else F=T(F)?!!F.capture:!!F,D=qt(D),x&&x[fe]?(x=x.i,Ee=String(N).toString(),Ee in x.g&&(N=x.g[Ee],D=Pe(N,D,F,ce),D>-1&&(Ge(N[D]),Array.prototype.splice.call(N,D,1),N.length==0&&(delete x.g[Ee],x.h--)))):x&&(x=Wr(x))&&(N=x.g[N.toString()],x=-1,N&&(x=Pe(N,D,F,ce)),(D=x>-1?N[x]:null)&&At(D))}function At(x){if(typeof x!="number"&&x&&!x.da){var N=x.src;if(N&&N[fe])rt(N.i,x);else{var D=x.type,F=x.proxy;N.removeEventListener?N.removeEventListener(D,F,x.capture):N.detachEvent?N.detachEvent(hr(D),F):N.addListener&&N.removeListener&&N.removeListener(F),(D=Wr(N))?(rt(D,x),D.h==0&&(D.src=null,N[wt]=null)):Ge(x)}}}function hr(x){return x in vt?vt[x]:vt[x]="on"+x}function ir(x,N){if(x.da)x=!0;else{N=new $e(N,this);const D=x.listener,F=x.ha||x.src;x.fa&&At(x),x=D.call(F,N)}return x}function Wr(x){return x=x[wt],x instanceof je?x:null}var wn="__closure_events_fn_"+(Math.random()*1e9>>>0);function qt(x){return typeof x=="function"?x:(x[wn]||(x[wn]=function(N){return x.handleEvent(N)}),x[wn])}function Ze(){Y.call(this),this.i=new je(this),this.M=this,this.G=null}I(Ze,Y),Ze.prototype[fe]=!0,Ze.prototype.removeEventListener=function(x,N,D,F){ci(this,x,N,D,F)};function An(x,N){var D,F=x.G;if(F)for(D=[];F;F=F.G)D.push(F);if(x=x.M,F=N.type||N,typeof N=="string")N=new Z(N,x);else if(N instanceof Z)N.target=N.target||x;else{var ce=N;N=new Z(F,x),Ve(N,ce)}ce=!0;let Ee,Be;if(D)for(Be=D.length-1;Be>=0;Be--)Ee=N.g=D[Be],ce=He(Ee,F,!0,N)&&ce;if(Ee=N.g=x,ce=He(Ee,F,!0,N)&&ce,ce=He(Ee,F,!1,N)&&ce,D)for(Be=0;Be<D.length;Be++)Ee=N.g=D[Be],ce=He(Ee,F,!1,N)&&ce}Ze.prototype.N=function(){if(Ze.Z.N.call(this),this.i){var x=this.i;for(const N in x.g){const D=x.g[N];for(let F=0;F<D.length;F++)Ge(D[F]);delete x.g[N],x.h--}}this.G=null},Ze.prototype.J=function(x,N,D,F){return this.i.add(String(x),N,!1,D,F)},Ze.prototype.K=function(x,N,D,F){return this.i.add(String(x),N,!0,D,F)};function He(x,N,D,F){if(N=x.i.g[String(N)],!N)return!0;N=N.concat();let ce=!0;for(let Ee=0;Ee<N.length;++Ee){const Be=N[Ee];if(Be&&!Be.da&&Be.capture==D){const ft=Be.listener,jn=Be.ha||Be.src;Be.fa&&rt(x.i,Be),ce=ft.call(jn,F)!==!1&&ce}}return ce&&!F.defaultPrevented}function As(x,N){if(typeof x!="function")if(x&&typeof x.handleEvent=="function")x=E(x.handleEvent,x);else throw Error("Invalid listener argument");return Number(N)>2147483647?-1:p.setTimeout(x,N||0)}function es(x){x.g=As(()=>{x.g=null,x.i&&(x.i=!1,es(x))},x.l);const N=x.h;x.h=null,x.m.apply(null,N)}class mn extends Y{constructor(N,D){super(),this.m=N,this.l=D,this.h=null,this.i=!1,this.g=null}j(N){this.h=arguments,this.g?this.i=!0:es(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ui(x){Y.call(this),this.h=x,this.g={}}I(ui,Y);var fr=[];function Kr(x){lt(x.g,function(N,D){this.g.hasOwnProperty(D)&&At(N)},x),x.g={}}ui.prototype.N=function(){ui.Z.N.call(this),Kr(this)},ui.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var sr=p.JSON.stringify,Kn=p.JSON.parse,Ls=class{stringify(x){return p.JSON.stringify(x,void 0)}parse(x){return p.JSON.parse(x,void 0)}};function ts(){}function ta(){}var Yt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Me(){Z.call(this,"d")}I(Me,Z);function Xt(){Z.call(this,"c")}I(Xt,Z);var st={},sn=null;function hi(){return sn=sn||new Ze}st.Ia="serverreachability";function bs(x){Z.call(this,st.Ia,x)}I(bs,Z);function Qr(x){const N=hi();An(N,new bs(N))}st.STAT_EVENT="statevent";function bt(x,N){Z.call(this,st.STAT_EVENT,x),this.stat=N}I(bt,Z);function an(x){const N=hi();An(N,new bt(N,x))}st.Ja="timingevent";function Zr(x,N){Z.call(this,st.Ja,x),this.size=N}I(Zr,Z);function Jr(x,N){if(typeof x!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){x()},N)}function Cn(){this.g=!0}Cn.prototype.ua=function(){this.g=!1};function Ps(x,N,D,F,ce,Ee){x.info(function(){if(x.g)if(Ee){var Be="",ft=Ee.split("&");for(let Qt=0;Qt<ft.length;Qt++){var jn=ft[Qt].split("=");if(jn.length>1){const vn=jn[0];jn=jn[1];const pi=vn.split("_");Be=pi.length>=2&&pi[1]=="type"?Be+(vn+"="+jn+"&"):Be+(vn+"=redacted&")}}}else Be=null;else Be=Ee;return"XMLHTTP REQ ("+F+") [attempt "+ce+"]: "+N+`
`+D+`
`+Be})}function Pn(x,N,D,F,ce,Ee,Be){x.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+ce+"]: "+N+`
`+D+`
`+Ee+" "+Be})}function dr(x,N,D,F){x.info(function(){return"XMLHTTP TEXT ("+N+"): "+Br(x,D)+(F?" "+F:"")})}function fi(x,N){x.info(function(){return"TIMEOUT: "+N})}Cn.prototype.info=function(){};function Br(x,N){if(!x.g)return N;if(!N)return null;try{const Ee=JSON.parse(N);if(Ee){for(x=0;x<Ee.length;x++)if(Array.isArray(Ee[x])){var D=Ee[x];if(!(D.length<2)){var F=D[1];if(Array.isArray(F)&&!(F.length<1)){var ce=F[0];if(ce!="noop"&&ce!="stop"&&ce!="close")for(let Be=1;Be<F.length;Be++)F[Be]=""}}}}return sr(Ee)}catch{return N}}var ki={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},$r={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ns;function kn(){}I(kn,ts),kn.prototype.g=function(){return new XMLHttpRequest},ns=new kn;function br(x){return encodeURIComponent(String(x))}function Tr(x){var N=1;x=x.split(":");const D=[];for(;N>0&&x.length;)D.push(x.shift()),N--;return x.length&&D.push(x.join(":")),D}function Fe(x,N,D,F){this.j=x,this.i=N,this.l=D,this.S=F||1,this.V=new ui(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new gr}function gr(){this.i=null,this.g="",this.h=!1}var bn={},Wt={};function vr(x,N,D){x.M=1,x.A=Bn(Ct(N)),x.u=D,x.R=!0,Bi(x,null)}function Bi(x,N){x.F=Date.now(),Ai(x),x.B=Ct(x.A);var D=x.B,F=x.S;Array.isArray(F)||(F=[String(F)]),cn(D.i,"t",F),x.C=0,D=x.j.L,x.h=new gr,x.g=eo(x.j,D?N:null,!x.u),x.P>0&&(x.O=new mn(E(x.Y,x,x.g),x.P)),N=x.V,D=x.g,F=x.ba;var ce="readystatechange";Array.isArray(ce)||(ce&&(fr[0]=ce.toString()),ce=fr);for(let Ee=0;Ee<ce.length;Ee++){const Be=en(D,ce[Ee],F||N.handleEvent,!1,N.h||N);if(!Be)break;N.g[Be.key]=Be}N=x.J?ie(x.J):{},x.u?(x.v||(x.v="POST"),N["Content-Type"]="application/x-www-form-urlencoded",x.g.ea(x.B,x.v,x.u,N)):(x.v="GET",x.g.ea(x.B,x.v,null,N)),Qr(),Ps(x.i,x.v,x.B,x.l,x.S,x.u)}Fe.prototype.ba=function(x){x=x.target;const N=this.O;N&&Ti(x)==3?N.j():this.Y(x)},Fe.prototype.Y=function(x){try{if(x==this.g)e:{const ft=Ti(this.g),jn=this.g.ya(),Qt=this.g.ca();if(!(ft<3)&&(ft!=3||this.g&&(this.h.h||this.g.la()||qn(this.g)))){this.K||ft!=4||jn==7||(jn==8||Qt<=0?Qr(3):Qr(2)),pn(this);var N=this.g.ca();this.X=N;var D=Ts(this);if(this.o=N==200,Pn(this.i,this.v,this.B,this.l,this.S,ft,N),this.o){if(this.U&&!this.L){t:{if(this.g){var F,ce=this.g;if((F=ce.g?ce.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(F)){var Ee=F;break t}}Ee=null}if(x=Ee)dr(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ar(this,x);else{this.o=!1,this.m=3,an(12),Or(this),Dt(this);break e}}if(this.R){x=!0;let vn;for(;!this.K&&this.C<D.length;)if(vn=na(this,D),vn==Wt){ft==4&&(this.m=4,an(14),x=!1),dr(this.i,this.l,null,"[Incomplete Response]");break}else if(vn==bn){this.m=4,an(15),dr(this.i,this.l,D,"[Invalid Chunk]"),x=!1;break}else dr(this.i,this.l,vn,null),ar(this,vn);if(Ur(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ft!=4||D.length!=0||this.h.h||(this.m=1,an(16),x=!1),this.o=this.o&&x,!x)dr(this.i,this.l,D,"[Invalid Chunked Response]"),Or(this),Dt(this);else if(D.length>0&&!this.W){this.W=!0;var Be=this.j;Be.g==this&&Be.aa&&!Be.P&&(Be.j.info("Great, no buffering proxy detected. Bytes received: "+D.length),xe(Be),Be.P=!0,an(11))}}else dr(this.i,this.l,D,null),ar(this,D);ft==4&&Or(this),this.o&&!this.K&&(ft==4?ha(this.j,this):(this.o=!1,Ai(this)))}else mi(this.g),N==400&&D.indexOf("Unknown SID")>0?(this.m=3,an(12)):(this.m=0,an(13)),Or(this),Dt(this)}}}catch{}finally{}};function Ts(x){if(!Ur(x))return x.g.la();const N=qn(x.g);if(N==="")return"";let D="";const F=N.length,ce=Ti(x.g)==4;if(!x.h.i){if(typeof TextDecoder>"u")return Or(x),Dt(x),"";x.h.i=new p.TextDecoder}for(let Ee=0;Ee<F;Ee++)x.h.h=!0,D+=x.h.i.decode(N[Ee],{stream:!(ce&&Ee==F-1)});return N.length=0,x.h.g+=D,x.C=0,x.h.g}function Ur(x){return x.g?x.v=="GET"&&x.M!=2&&x.j.Aa:!1}function na(x,N){var D=x.C,F=N.indexOf(`
`,D);return F==-1?Wt:(D=Number(N.substring(D,F)),isNaN(D)?bn:(F+=1,F+D>N.length?Wt:(N=N.slice(F,F+D),x.C=F+D,N)))}Fe.prototype.cancel=function(){this.K=!0,Or(this)};function Ai(x){x.T=Date.now()+x.H,Sr(x,x.H)}function Sr(x,N){if(x.D!=null)throw Error("WatchDog timer not null");x.D=Jr(E(x.aa,x),N)}function pn(x){x.D&&(p.clearTimeout(x.D),x.D=null)}Fe.prototype.aa=function(){this.D=null;const x=Date.now();x-this.T>=0?(fi(this.i,this.B),this.M!=2&&(Qr(),an(17)),Or(this),this.m=2,Dt(this)):Sr(this,this.T-x)};function Dt(x){x.j.I==0||x.K||ha(x.j,x)}function Or(x){pn(x);var N=x.O;N&&typeof N.dispose=="function"&&N.dispose(),x.O=null,Kr(x.V),x.g&&(N=x.g,x.g=null,N.abort(),N.dispose())}function ar(x,N){try{var D=x.j;if(D.I!=0&&(D.g==x||Cr(D.h,x))){if(!x.L&&Cr(D.h,x)&&D.I==3){try{var F=D.Ba.g.parse(N)}catch{F=null}if(Array.isArray(F)&&F.length==3){var ce=F;if(ce[0]==0){e:if(!D.v){if(D.g)if(D.g.F+3e3<x.F)Un(D),Cs(D);else break e;ua(D),an(18)}}else D.xa=ce[1],0<D.xa-D.K&&ce[2]<37500&&D.F&&D.A==0&&!D.C&&(D.C=Jr(E(D.Va,D),6e3));Kt(D.h)<=1&&D.ta&&(D.ta=void 0)}else is(D,11)}else if((x.L||D.g==x)&&Un(D),!K(N))for(ce=D.Ba.g.parse(N),N=0;N<ce.length;N++){let Qt=ce[N];const vn=Qt[0];if(!(vn<=D.K))if(D.K=vn,Qt=Qt[1],D.I==2)if(Qt[0]=="c"){D.M=Qt[1],D.ba=Qt[2];const pi=Qt[3];pi!=null&&(D.ka=pi,D.j.info("VER="+D.ka));const os=Qt[4];os!=null&&(D.za=os,D.j.info("SVER="+D.za));const Mr=Qt[5];Mr!=null&&typeof Mr=="number"&&Mr>0&&(F=1.5*Mr,D.O=F,D.j.info("backChannelRequestTimeoutMs_="+F)),F=D;const xi=x.g;if(xi){const da=xi.g?xi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(da){var Ee=F.h;Ee.g||da.indexOf("spdy")==-1&&da.indexOf("quic")==-1&&da.indexOf("h2")==-1||(Ee.j=Ee.l,Ee.g=new Set,Ee.h&&(ia(Ee,Ee.h),Ee.h=null))}if(F.G){const ls=xi.g?xi.g.getResponseHeader("X-HTTP-Session-Id"):null;ls&&(F.wa=ls,it(F.J,F.G,ls))}}D.I=3,D.l&&D.l.ra(),D.aa&&(D.T=Date.now()-x.F,D.j.info("Handshake RTT: "+D.T+"ms")),F=D;var Be=x;if(F.na=Ml(F,F.L?F.ba:null,F.W),Be.L){Mt(F.h,Be);var ft=Be,jn=F.O;jn&&(ft.H=jn),ft.D&&(pn(ft),Ai(ft)),F.g=Be}else Fi(F);D.i.length>0&&rs(D)}else Qt[0]!="stop"&&Qt[0]!="close"||is(D,7);else D.I==3&&(Qt[0]=="stop"||Qt[0]=="close"?Qt[0]=="stop"?is(D,7):Za(D):Qt[0]!="noop"&&D.l&&D.l.qa(Qt),D.A=0)}}Qr(4)}catch{}}var In=class{constructor(x,N){this.g=x,this.map=N}};function Ie(x){this.l=x||10,p.PerformanceNavigationTiming?(x=p.performance.getEntriesByType("navigation"),x=x.length>0&&(x[0].nextHopProtocol=="hq"||x[0].nextHopProtocol=="h2")):x=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=x?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ra(x){return x.h?!0:x.g?x.g.size>=x.j:!1}function Kt(x){return x.h?1:x.g?x.g.size:0}function Cr(x,N){return x.h?x.h==N:x.g?x.g.has(N):!1}function ia(x,N){x.g?x.g.add(N):x.h=N}function Mt(x,N){x.h&&x.h==N?x.h=null:x.g&&x.g.has(N)&&x.g.delete(N)}Ie.prototype.cancel=function(){if(this.i=X(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const x of this.g.values())x.cancel();this.g.clear()}};function X(x){if(x.h!=null)return x.i.concat(x.h.G);if(x.g!=null&&x.g.size!==0){let N=x.i;for(const D of x.g.values())N=N.concat(D.G);return N}return B(x.i)}var Ue=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ke(x,N){if(x){x=x.split("&");for(let D=0;D<x.length;D++){const F=x[D].indexOf("=");let ce,Ee=null;F>=0?(ce=x[D].substring(0,F),Ee=x[D].substring(F+1)):ce=x[D],N(ce,Ee?decodeURIComponent(Ee.replace(/\+/g," ")):"")}}}function St(x){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let N;x instanceof St?(this.l=x.l,ht(this,x.j),this.o=x.o,this.g=x.g,Qn(this,x.u),this.h=x.h,sa(this,Zo(x.i)),this.m=x.m):x&&(N=String(x).match(Ue))?(this.l=!1,ht(this,N[1]||"",!0),this.o=di(N[2]||""),this.g=di(N[3]||"",!0),Qn(this,N[4]),this.h=di(N[5]||"",!0),sa(this,N[6]||"",!0),this.m=di(N[7]||"")):(this.l=!1,this.i=new or(null,this.l))}St.prototype.toString=function(){const x=[];var N=this.j;N&&x.push(Hn(N,zn,!0),":");var D=this.g;return(D||N=="file")&&(x.push("//"),(N=this.o)&&x.push(Hn(N,zn,!0),"@"),x.push(br(D).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D=this.u,D!=null&&x.push(":",String(D))),(D=this.h)&&(this.g&&D.charAt(0)!="/"&&x.push("/"),x.push(Hn(D,D.charAt(0)=="/"?z:he,!0))),(D=this.i.toString())&&x.push("?",D),(D=this.m)&&x.push("#",Hn(D,Gn)),x.join("")},St.prototype.resolve=function(x){const N=Ct(this);let D=!!x.j;D?ht(N,x.j):D=!!x.o,D?N.o=x.o:D=!!x.g,D?N.g=x.g:D=x.u!=null;var F=x.h;if(D)Qn(N,x.u);else if(D=!!x.h){if(F.charAt(0)!="/")if(this.g&&!this.h)F="/"+F;else{var ce=N.h.lastIndexOf("/");ce!=-1&&(F=N.h.slice(0,ce+1)+F)}if(ce=F,ce==".."||ce==".")F="";else if(ce.indexOf("./")!=-1||ce.indexOf("/.")!=-1){F=ce.lastIndexOf("/",0)==0,ce=ce.split("/");const Ee=[];for(let Be=0;Be<ce.length;){const ft=ce[Be++];ft=="."?F&&Be==ce.length&&Ee.push(""):ft==".."?((Ee.length>1||Ee.length==1&&Ee[0]!="")&&Ee.pop(),F&&Be==ce.length&&Ee.push("")):(Ee.push(ft),F=!0)}F=Ee.join("/")}else F=ce}return D?N.h=F:D=x.i.toString()!=="",D?sa(N,Zo(x.i)):D=!!x.m,D&&(N.m=x.m),N};function Ct(x){return new St(x)}function ht(x,N,D){x.j=D?di(N,!0):N,x.j&&(x.j=x.j.replace(/:$/,""))}function Qn(x,N){if(N){if(N=Number(N),isNaN(N)||N<0)throw Error("Bad port number "+N);x.u=N}else x.u=null}function sa(x,N,D){N instanceof or?(x.i=N,Bs(x.i,x.l)):(D||(N=Hn(N,Xe)),x.i=new or(N,x.l))}function it(x,N,D){x.i.set(N,D)}function Bn(x){return it(x,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),x}function di(x,N){return x?N?decodeURI(x.replace(/%25/g,"%2525")):decodeURIComponent(x):""}function Hn(x,N,D){return typeof x=="string"?(x=encodeURI(x).replace(N,It),D&&(x=x.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x):null}function It(x){return x=x.charCodeAt(0),"%"+(x>>4&15).toString(16)+(x&15).toString(16)}var zn=/[#\/\?@]/g,he=/[#\?:]/g,z=/[#\?]/g,Xe=/[#\?@]/g,Gn=/#/g;function or(x,N){this.h=this.g=null,this.i=x||null,this.j=!!N}function ei(x){x.g||(x.g=new Map,x.h=0,x.i&&Ke(x.i,function(N,D){x.add(decodeURIComponent(N.replace(/\+/g," ")),D)}))}n=or.prototype,n.add=function(x,N){ei(this),this.i=null,x=ks(this,x);let D=this.g.get(x);return D||this.g.set(x,D=[]),D.push(N),this.h+=1,this};function Qa(x,N){ei(x),N=ks(x,N),x.g.has(N)&&(x.i=null,x.h-=x.g.get(N).length,x.g.delete(N))}function Dr(x,N){return ei(x),N=ks(x,N),x.g.has(N)}n.forEach=function(x,N){ei(this),this.g.forEach(function(D,F){D.forEach(function(ce){x.call(N,ce,F,this)},this)},this)};function Je(x,N){ei(x);let D=[];if(typeof N=="string")Dr(x,N)&&(D=D.concat(x.g.get(ks(x,N))));else for(x=Array.from(x.g.values()),N=0;N<x.length;N++)D=D.concat(x[N]);return D}n.set=function(x,N){return ei(this),this.i=null,x=ks(this,x),Dr(this,x)&&(this.h-=this.g.get(x).length),this.g.set(x,[N]),this.h+=1,this},n.get=function(x,N){return x?(x=Je(this,x),x.length>0?String(x[0]):N):N};function cn(x,N,D){Qa(x,N),D.length>0&&(x.i=null,x.g.set(ks(x,N),B(D)),x.h+=D.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const x=[],N=Array.from(this.g.keys());for(let F=0;F<N.length;F++){var D=N[F];const ce=br(D);D=Je(this,D);for(let Ee=0;Ee<D.length;Ee++){let Be=ce;D[Ee]!==""&&(Be+="="+br(D[Ee])),x.push(Be)}}return this.i=x.join("&")};function Zo(x){const N=new or;return N.i=x.i,x.g&&(N.g=new Map(x.g),N.h=x.h),N}function ks(x,N){return N=String(N),x.j&&(N=N.toLowerCase()),N}function Bs(x,N){N&&!x.j&&(ei(x),x.i=null,x.g.forEach(function(D,F){const ce=F.toLowerCase();F!=ce&&(Qa(this,F),cn(this,ce,D))},x)),x.j=N}function ti(x,N){const D=new Cn;if(p.Image){const F=new Image;F.onload=C(bi,D,"TestLoadImage: loaded",!0,N,F),F.onerror=C(bi,D,"TestLoadImage: error",!1,N,F),F.onabort=C(bi,D,"TestLoadImage: abort",!1,N,F),F.ontimeout=C(bi,D,"TestLoadImage: timeout",!1,N,F),p.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=x}else N(!1)}function aa(x,N){const D=new Cn,F=new AbortController,ce=setTimeout(()=>{F.abort(),bi(D,"TestPingServer: timeout",!1,N)},1e4);fetch(x,{signal:F.signal}).then(Ee=>{clearTimeout(ce),Ee.ok?bi(D,"TestPingServer: ok",!0,N):bi(D,"TestPingServer: server error",!1,N)}).catch(()=>{clearTimeout(ce),bi(D,"TestPingServer: error",!1,N)})}function bi(x,N,D,F,ce){try{ce&&(ce.onload=null,ce.onerror=null,ce.onabort=null,ce.ontimeout=null),F(D)}catch{}}function Tn(){this.g=new Ls}function ni(x){this.i=x.Sb||null,this.h=x.ab||!1}I(ni,ts),ni.prototype.g=function(){return new ri(this.i,this.h)};function ri(x,N){Ze.call(this),this.H=x,this.o=N,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}I(ri,Ze),n=ri.prototype,n.open=function(x,N){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=x,this.D=N,this.readyState=1,at(this)},n.send=function(x){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const N={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};x&&(N.body=x),(this.H||p).fetch(new Request(this.D,N)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Us(this)),this.readyState=0},n.Pa=function(x){if(this.g&&(this.l=x,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=x.headers,this.readyState=2,at(this)),this.g&&(this.readyState=3,at(this),this.g)))if(this.responseType==="arraybuffer")x.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in x){if(this.j=x.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;et(this)}else x.text().then(this.Oa.bind(this),this.ga.bind(this))};function et(x){x.j.read().then(x.Ma.bind(x)).catch(x.ga.bind(x))}n.Ma=function(x){if(this.g){if(this.o&&x.value)this.response.push(x.value);else if(!this.o){var N=x.value?x.value:new Uint8Array(0);(N=this.B.decode(N,{stream:!x.done}))&&(this.response=this.responseText+=N)}x.done?Us(this):at(this),this.readyState==3&&et(this)}},n.Oa=function(x){this.g&&(this.response=this.responseText=x,Us(this))},n.Na=function(x){this.g&&(this.response=x,Us(this))},n.ga=function(){this.g&&Us(this)};function Us(x){x.readyState=4,x.l=null,x.j=null,x.B=null,at(x)}n.setRequestHeader=function(x,N){this.A.append(x,N)},n.getResponseHeader=function(x){return this.h&&this.h.get(x.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const x=[],N=this.h.entries();for(var D=N.next();!D.done;)D=D.value,x.push(D[0]+": "+D[1]),D=N.next();return x.join(`\r
`)};function at(x){x.onreadystatechange&&x.onreadystatechange.call(x)}Object.defineProperty(ri.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(x){this.m=x?"include":"same-origin"}});function un(x){let N="";return lt(x,function(D,F){N+=F,N+=":",N+=D,N+=`\r
`}),N}function oa(x,N,D){e:{for(F in D){var F=!1;break e}F=!0}F||(D=un(D),typeof x=="string"?D!=null&&br(D):it(x,N,D))}function tn(x){Ze.call(this),this.headers=new Map,this.L=x||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}I(tn,Ze);var Ui=/^https?$/i,Vi=["POST","PUT"];n=tn.prototype,n.Fa=function(x){this.H=x},n.ea=function(x,N,D,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+x);N=N?N.toUpperCase():"GET",this.D=x,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ns.g(),this.g.onreadystatechange=M(E(this.Ca,this));try{this.B=!0,this.g.open(N,String(x),!0),this.B=!1}catch(Ee){la(this,Ee);return}if(x=D||"",D=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var ce in F)D.set(ce,F[ce]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const Ee of F.keys())D.set(Ee,F.get(Ee));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(D.keys()).find(Ee=>Ee.toLowerCase()=="content-type"),ce=p.FormData&&x instanceof p.FormData,!(Array.prototype.indexOf.call(Vi,N,void 0)>=0)||F||ce||D.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ee,Be]of D)this.g.setRequestHeader(Ee,Be);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(x),this.v=!1}catch(Ee){la(this,Ee)}};function la(x,N){x.h=!1,x.g&&(x.j=!0,x.g.abort(),x.j=!1),x.l=N,x.o=5,vs(x),gi(x)}function vs(x){x.A||(x.A=!0,An(x,"complete"),An(x,"error"))}n.abort=function(x){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=x||7,An(this,"complete"),An(this,"abort"),gi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gi(this,!0)),tn.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?ji(this):this.Xa())},n.Xa=function(){ji(this)};function ji(x){if(x.h&&typeof f<"u"){if(x.v&&Ti(x)==4)setTimeout(x.Ca.bind(x),0);else if(An(x,"readystatechange"),Ti(x)==4){x.h=!1;try{const Ee=x.ca();e:switch(Ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var N=!0;break e;default:N=!1}var D;if(!(D=N)){var F;if(F=Ee===0){let Be=String(x.D).match(Ue)[1]||null;!Be&&p.self&&p.self.location&&(Be=p.self.location.protocol.slice(0,-1)),F=!Ui.test(Be?Be.toLowerCase():"")}D=F}if(D)An(x,"complete"),An(x,"success");else{x.o=6;try{var ce=Ti(x)>2?x.g.statusText:""}catch{ce=""}x.l=ce+" ["+x.ca()+"]",vs(x)}}finally{gi(x)}}}}function gi(x,N){if(x.g){x.m&&(clearTimeout(x.m),x.m=null);const D=x.g;x.g=null,N||An(x,"ready");try{D.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Ti(x){return x.g?x.g.readyState:0}n.ca=function(){try{return Ti(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(x){if(this.g){var N=this.g.responseText;return x&&N.indexOf(x)==0&&(N=N.substring(x.length)),Kn(N)}};function qn(x){try{if(!x.g)return null;if("response"in x.g)return x.g.response;switch(x.F){case"":case"text":return x.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in x.g)return x.g.mozResponseArrayBuffer}return null}catch{return null}}function mi(x){const N={};x=(x.g&&Ti(x)>=2&&x.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<x.length;F++){if(K(x[F]))continue;var D=Tr(x[F]);const ce=D[0];if(D=D[1],typeof D!="string")continue;D=D.trim();const Ee=N[ce]||[];N[ce]=Ee,Ee.push(D)}xt(N,function(F){return F.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Rn(x,N,D){return D&&D.internalChannelParams&&D.internalChannelParams[x]||N}function Ss(x){this.za=0,this.i=[],this.j=new Cn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Rn("failFast",!1,x),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Rn("baseRetryDelayMs",5e3,x),this.Za=Rn("retryDelaySeedMs",1e4,x),this.Ta=Rn("forwardChannelMaxRetries",2,x),this.va=Rn("forwardChannelRequestTimeoutMs",2e4,x),this.ma=x&&x.xmlHttpFactory||void 0,this.Ua=x&&x.Rb||void 0,this.Aa=x&&x.useFetchStreams||!1,this.O=void 0,this.L=x&&x.supportsCrossDomainXhr||!1,this.M="",this.h=new Ie(x&&x.concurrentRequestLimit),this.Ba=new Tn,this.S=x&&x.fastHandshake||!1,this.R=x&&x.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=x&&x.Pb||!1,x&&x.ua&&this.j.ua(),x&&x.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&x&&x.detectBufferingProxy||!1,this.ia=void 0,x&&x.longPollingTimeout&&x.longPollingTimeout>0&&(this.ia=x.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ss.prototype,n.ka=8,n.I=1,n.connect=function(x,N,D,F){an(0),this.W=x,this.H=N||{},D&&F!==void 0&&(this.H.OSID=D,this.H.OAID=F),this.F=this.X,this.J=Ml(this,null,this.W),rs(this)};function Za(x){if(Ja(x),x.I==3){var N=x.V++,D=Ct(x.J);if(it(D,"SID",x.M),it(D,"RID",N),it(D,"TYPE","terminate"),Vs(x,D),N=new Fe(x,x.j,N),N.M=2,N.A=Bn(Ct(D)),D=!1,p.navigator&&p.navigator.sendBeacon)try{D=p.navigator.sendBeacon(N.A.toString(),"")}catch{}!D&&p.Image&&(new Image().src=N.A,D=!0),D||(N.g=eo(N.j,null),N.g.ea(N.A)),N.F=Date.now(),Ai(N)}Dl(x)}function Cs(x){x.g&&(xe(x),x.g.cancel(),x.g=null)}function Ja(x){Cs(x),x.v&&(p.clearTimeout(x.v),x.v=null),Un(x),x.h.cancel(),x.m&&(typeof x.m=="number"&&p.clearTimeout(x.m),x.m=null)}function rs(x){if(!ra(x.h)&&!x.m){x.m=!0;var N=x.Ea;De||H(),Oe||(De(),Oe=!0),j.add(N,x),x.D=0}}function $a(x,N){return Kt(x.h)>=x.h.j-(x.m?1:0)?!1:x.m?(x.i=N.G.concat(x.i),!0):x.I==1||x.I==2||x.D>=(x.Sa?0:x.Ta)?!1:(x.m=Jr(E(x.Ea,x,N),Jo(x,x.D)),x.D++,!0)}n.Ea=function(x){if(this.m)if(this.m=null,this.I==1){if(!x){this.V=Math.floor(Math.random()*1e5),x=this.V++;const ce=new Fe(this,this.j,x);let Ee=this.o;if(this.U&&(Ee?(Ee=ie(Ee),Ve(Ee,this.U)):Ee=this.U),this.u!==null||this.R||(ce.J=Ee,Ee=null),this.S)e:{for(var N=0,D=0;D<this.i.length;D++){t:{var F=this.i[D];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break t}F=void 0}if(F===void 0)break;if(N+=F,N>4096){N=D;break e}if(N===4096||D===this.i.length-1){N=D+1;break e}}N=1e3}else N=1e3;N=ca(this,ce,N),D=Ct(this.J),it(D,"RID",x),it(D,"CVER",22),this.G&&it(D,"X-HTTP-Session-Id",this.G),Vs(this,D),Ee&&(this.R?N="headers="+br(un(Ee))+"&"+N:this.u&&oa(D,this.u,Ee)),ia(this.h,ce),this.Ra&&it(D,"TYPE","init"),this.S?(it(D,"$req",N),it(D,"SID","null"),ce.U=!0,vr(ce,D,null)):vr(ce,D,N),this.I=2}}else this.I==3&&(x?Jt(this,x):this.i.length==0||ra(this.h)||Jt(this))};function Jt(x,N){var D;N?D=N.l:D=x.V++;const F=Ct(x.J);it(F,"SID",x.M),it(F,"RID",D),it(F,"AID",x.K),Vs(x,F),x.u&&x.o&&oa(F,x.u,x.o),D=new Fe(x,x.j,D,x.D+1),x.u===null&&(D.J=x.o),N&&(x.i=N.G.concat(x.i)),N=ca(x,D,1e3),D.H=Math.round(x.va*.5)+Math.round(x.va*.5*Math.random()),ia(x.h,D),vr(D,F,N)}function Vs(x,N){x.H&&lt(x.H,function(D,F){it(N,F,D)}),x.l&&lt({},function(D,F){it(N,F,D)})}function ca(x,N,D){D=Math.min(x.i.length,D);const F=x.l?E(x.l.Ka,x.l,x):null;e:{var ce=x.i;let ft=-1;for(;;){const jn=["count="+D];ft==-1?D>0?(ft=ce[0].g,jn.push("ofs="+ft)):ft=0:jn.push("ofs="+ft);let Qt=!0;for(let vn=0;vn<D;vn++){var Ee=ce[vn].g;const pi=ce[vn].map;if(Ee-=ft,Ee<0)ft=Math.max(0,ce[vn].g-100),Qt=!1;else try{Ee="req"+Ee+"_"||"";try{var Be=pi instanceof Map?pi:Object.entries(pi);for(const[os,Mr]of Be){let xi=Mr;T(Mr)&&(xi=sr(Mr)),jn.push(Ee+os+"="+encodeURIComponent(xi))}}catch(os){throw jn.push(Ee+"type="+encodeURIComponent("_badmap")),os}}catch{F&&F(pi)}}if(Qt){Be=jn.join("&");break e}}Be=void 0}return x=x.i.splice(0,D),N.G=x,Be}function Fi(x){if(!x.g&&!x.v){x.Y=1;var N=x.Da;De||H(),Oe||(De(),Oe=!0),j.add(N,x),x.A=0}}function ua(x){return x.g||x.v||x.A>=3?!1:(x.Y++,x.v=Jr(E(x.Da,x),Jo(x,x.A)),x.A++,!0)}n.Da=function(){if(this.v=null,yt(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var x=4*this.T;this.j.info("BP detection timer enabled: "+x),this.B=Jr(E(this.Wa,this),x)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,an(10),Cs(this),yt(this))};function xe(x){x.B!=null&&(p.clearTimeout(x.B),x.B=null)}function yt(x){x.g=new Fe(x,x.j,"rpc",x.Y),x.u===null&&(x.g.J=x.o),x.g.P=0;var N=Ct(x.na);it(N,"RID","rpc"),it(N,"SID",x.M),it(N,"AID",x.K),it(N,"CI",x.F?"0":"1"),!x.F&&x.ia&&it(N,"TO",x.ia),it(N,"TYPE","xmlhttp"),Vs(x,N),x.u&&x.o&&oa(N,x.u,x.o),x.O&&(x.g.H=x.O);var D=x.g;x=x.ba,D.M=1,D.A=Bn(Ct(N)),D.u=null,D.R=!0,Bi(D,x)}n.Va=function(){this.C!=null&&(this.C=null,Cs(this),ua(this),an(19))};function Un(x){x.C!=null&&(p.clearTimeout(x.C),x.C=null)}function ha(x,N){var D=null;if(x.g==N){Un(x),xe(x),x.g=null;var F=2}else if(Cr(x.h,N))D=N.G,Mt(x.h,N),F=1;else return;if(x.I!=0){if(N.o)if(F==1){D=N.u?N.u.length:0,N=Date.now()-N.F;var ce=x.D;F=hi(),An(F,new Zr(F,D)),rs(x)}else Fi(x);else if(ce=N.m,ce==3||ce==0&&N.X>0||!(F==1&&$a(x,N)||F==2&&ua(x)))switch(D&&D.length>0&&(N=x.h,N.i=N.i.concat(D)),ce){case 1:is(x,5);break;case 4:is(x,10);break;case 3:is(x,6);break;default:is(x,2)}}}function Jo(x,N){let D=x.Qa+Math.floor(Math.random()*x.Za);return x.isActive()||(D*=2),D*N}function is(x,N){if(x.j.info("Error code "+N),N==2){var D=E(x.bb,x),F=x.Ua;const ce=!F;F=new St(F||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||ht(F,"https"),Bn(F),ce?ti(F.toString(),D):aa(F.toString(),D)}else an(2);x.I=0,x.l&&x.l.pa(N),Dl(x),Ja(x)}n.bb=function(x){x?(this.j.info("Successfully pinged google.com"),an(2)):(this.j.info("Failed to ping google.com"),an(1))};function Dl(x){if(x.I=0,x.ja=[],x.l){const N=X(x.h);(N.length!=0||x.i.length!=0)&&(W(x.ja,N),W(x.ja,x.i),x.h.i.length=0,B(x.i),x.i.length=0),x.l.oa()}}function Ml(x,N,D){var F=D instanceof St?Ct(D):new St(D);if(F.g!="")N&&(F.g=N+"."+F.g),Qn(F,F.u);else{var ce=p.location;F=ce.protocol,N=N?N+"."+ce.hostname:ce.hostname,ce=+ce.port;const Ee=new St(null);F&&ht(Ee,F),N&&(Ee.g=N),ce&&Qn(Ee,ce),D&&(Ee.h=D),F=Ee}return D=x.G,N=x.wa,D&&N&&it(F,D,N),it(F,"VER",x.ka),Vs(x,F),F}function eo(x,N,D){if(N&&!x.L)throw Error("Can't create secondary domain capable XhrIo object.");return N=x.Aa&&!x.ma?new tn(new ni({ab:D})):new tn(x.ma),N.Fa(x.L),N}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Vn(){}n=Vn.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function ss(){}ss.prototype.g=function(x,N){return new Lt(x,N)};function Lt(x,N){Ze.call(this),this.g=new Ss(N),this.l=x,this.h=N&&N.messageUrlParams||null,x=N&&N.messageHeaders||null,N&&N.clientProtocolHeaderRequired&&(x?x["X-Client-Protocol"]="webchannel":x={"X-Client-Protocol":"webchannel"}),this.g.o=x,x=N&&N.initMessageHeaders||null,N&&N.messageContentType&&(x?x["X-WebChannel-Content-Type"]=N.messageContentType:x={"X-WebChannel-Content-Type":N.messageContentType}),N&&N.sa&&(x?x["X-WebChannel-Client-Profile"]=N.sa:x={"X-WebChannel-Client-Profile":N.sa}),this.g.U=x,(x=N&&N.Qb)&&!K(x)&&(this.g.u=x),this.A=N&&N.supportsCrossDomainXhr||!1,this.v=N&&N.sendRawJson||!1,(N=N&&N.httpSessionIdParam)&&!K(N)&&(this.g.G=N,x=this.h,x!==null&&N in x&&(x=this.h,N in x&&delete x[N])),this.j=new Pt(this)}I(Lt,Ze),Lt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Lt.prototype.close=function(){Za(this.g)},Lt.prototype.o=function(x){var N=this.g;if(typeof x=="string"){var D={};D.__data__=x,x=D}else this.v&&(D={},D.__data__=sr(x),x=D);N.i.push(new In(N.Ya++,x)),N.I==3&&rs(N)},Lt.prototype.N=function(){this.g.l=null,delete this.j,Za(this.g),delete this.g,Lt.Z.N.call(this)};function fa(x){Me.call(this),x.__headers__&&(this.headers=x.__headers__,this.statusCode=x.__status__,delete x.__headers__,delete x.__status__);var N=x.__sm__;if(N){e:{for(const D in N){x=D;break e}x=void 0}(this.i=x)&&(x=this.i,N=N!==null&&x in N?N[x]:void 0),this.data=N}else this.data=x}I(fa,Me);function as(){Xt.call(this),this.status=1}I(as,Xt);function Pt(x){this.g=x}I(Pt,Vn),Pt.prototype.ra=function(){An(this.g,"a")},Pt.prototype.qa=function(x){An(this.g,new fa(x))},Pt.prototype.pa=function(x){An(this.g,new as)},Pt.prototype.oa=function(){An(this.g,"b")},ss.prototype.createWebChannel=ss.prototype.g,Lt.prototype.send=Lt.prototype.o,Lt.prototype.open=Lt.prototype.m,Lt.prototype.close=Lt.prototype.close,OA=function(){return new ss},RA=function(){return hi()},NA=st,Lg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ki.NO_ERROR=0,ki.TIMEOUT=8,ki.HTTP_ERROR=6,Ff=ki,$r.COMPLETE="complete",IA=$r,ta.EventType=Yt,Yt.OPEN="a",Yt.CLOSE="b",Yt.ERROR="c",Yt.MESSAGE="d",Ze.prototype.listen=Ze.prototype.J,Cu=ta,tn.prototype.listenOnce=tn.prototype.K,tn.prototype.getLastError=tn.prototype.Ha,tn.prototype.getLastErrorCode=tn.prototype.ya,tn.prototype.getStatus=tn.prototype.ca,tn.prototype.getResponseJson=tn.prototype.La,tn.prototype.getResponseText=tn.prototype.la,tn.prototype.send=tn.prototype.ea,tn.prototype.setWithCredentials=tn.prototype.Fa,CA=tn}).apply(typeof Sf<"u"?Sf:typeof self<"u"?self:typeof window<"u"?window:{});const Jy="@firebase/firestore",$y="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ai.UNAUTHENTICATED=new ai(null),ai.GOOGLE_CREDENTIALS=new ai("google-credentials-uid"),ai.FIRST_PARTY=new ai("first-party-uid"),ai.MOCK_USER=new ai("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pc="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vl=new ym("@firebase/firestore");function lc(){return vl.logLevel}function qe(n,...e){if(vl.logLevel<=Ht.DEBUG){const t=e.map(wm);vl.debug(`Firestore (${Pc}): ${n}`,...t)}}function ja(n,...e){if(vl.logLevel<=Ht.ERROR){const t=e.map(wm);vl.error(`Firestore (${Pc}): ${n}`,...t)}}function bc(n,...e){if(vl.logLevel<=Ht.WARN){const t=e.map(wm);vl.warn(`Firestore (${Pc}): ${n}`,...t)}}function wm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,DA(n,s,t)}function DA(n,e,t){let s=`FIRESTORE (${Pc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw ja(s),new Error(s)}function fn(n,e,t,s){let c="Unexpected state";typeof t=="string"?c=t:s=t,n||DA(e,c,s)}function _t(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ze extends Xa{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class U4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ai.UNAUTHENTICATED)))}shutdown(){}}class V4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class j4{constructor(e){this.t=e,this.currentUser=ai.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){fn(this.o===void 0,42304);let s=this.i;const c=w=>this.i!==s?(s=this.i,t(w)):Promise.resolve();let f=new Ba;this.o=()=>{this.i++,this.currentUser=this.u(),f.resolve(),f=new Ba,e.enqueueRetryable((()=>c(this.currentUser)))};const p=()=>{const w=f;e.enqueueRetryable((async()=>{await w.promise,await c(this.currentUser)}))},T=w=>{qe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.o&&(this.auth.addAuthTokenListener(this.o),p())};this.t.onInit((w=>T(w))),setTimeout((()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?T(w):(qe("FirebaseAuthCredentialsProvider","Auth not yet detected"),f.resolve(),f=new Ba)}}),0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(qe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(fn(typeof s.accessToken=="string",31837,{l:s}),new MA(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return fn(e===null||typeof e=="string",2055,{h:e}),new ai(e)}}class F4{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=ai.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class H4{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new F4(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(ai.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class eE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class z4{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Zi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){fn(this.o===void 0,3512);const s=f=>{f.error!=null&&qe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${f.error.message}`);const p=f.token!==this.m;return this.m=f.token,qe("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?t(f.token):Promise.resolve()};this.o=f=>{e.enqueueRetryable((()=>s(f)))};const c=f=>{qe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=f,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((f=>c(f))),setTimeout((()=>{if(!this.appCheck){const f=this.V.getImmediate({optional:!0});f?c(f):qe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new eE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(fn(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new eE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G4(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const c=G4(40);for(let f=0;f<c.length;++f)s.length<20&&c[f]<t&&(s+=e.charAt(c[f]%62))}return s}}function zt(n,e){return n<e?-1:n>e?1:0}function Pg(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const c=n.charAt(s),f=e.charAt(s);if(c!==f)return cg(c)===cg(f)?zt(c,f):cg(c)?1:-1}return zt(n.length,e.length)}const q4=55296,Y4=57343;function cg(n){const e=n.charCodeAt(0);return e>=q4&&e<=Y4}function Tc(n,e,t){return n.length===e.length&&n.every(((s,c)=>t(s,e[c])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE="__name__";class qs{constructor(e,t,s){t===void 0?t=0:t>e.length&&ut(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&ut(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return qs.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof qs?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let c=0;c<s;c++){const f=qs.compareSegments(e.get(c),t.get(c));if(f!==0)return f}return zt(e.length,t.length)}static compareSegments(e,t){const s=qs.isNumericId(e),c=qs.isNumericId(t);return s&&!c?-1:!s&&c?1:s&&c?qs.extractNumericId(e).compare(qs.extractNumericId(t)):Pg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ko.fromString(e.substring(4,e.length-2))}}class Nn extends qs{construct(e,t,s){return new Nn(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ze(Se.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((c=>c.length>0)))}return new Nn(t)}static emptyPath(){return new Nn([])}}const X4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qr extends qs{construct(e,t,s){return new qr(e,t,s)}static isValidIdentifier(e){return X4.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===tE}static keyField(){return new qr([tE])}static fromServerFormat(e){const t=[];let s="",c=0;const f=()=>{if(s.length===0)throw new ze(Se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let p=!1;for(;c<e.length;){const T=e[c];if(T==="\\"){if(c+1===e.length)throw new ze(Se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[c+1];if(w!=="\\"&&w!=="."&&w!=="`")throw new ze(Se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=w,c+=2}else T==="`"?(p=!p,c++):T!=="."||p?(s+=T,c++):(f(),c++)}if(f(),p)throw new ze(Se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qr(t)}static emptyPath(){return new qr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.path=e}static fromPath(e){return new nt(Nn.fromString(e))}static fromName(e){return new nt(Nn.fromString(e).popFirst(5))}static empty(){return new nt(Nn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Nn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Nn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new nt(new Nn(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LA(n,e,t){if(!t)throw new ze(Se.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function W4(n,e,t,s){if(e===!0&&s===!0)throw new ze(Se.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function nE(n){if(!nt.isDocumentKey(n))throw new ze(Se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function rE(n){if(nt.isDocumentKey(n))throw new ze(Se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function PA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Ld(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ut(12329,{type:typeof n})}function Li(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ze(Se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ld(n);throw new ze(Se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(n,e){const t={typeString:n};return e&&(t.value=e),t}function ih(n,e){if(!PA(n))throw new ze(Se.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const c=e[s].typeString,f="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const p=n[s];if(c&&typeof p!==c){t=`JSON field '${s}' must be a ${c}.`;break}if(f!==void 0&&p!==f.value){t=`Expected '${s}' field to equal '${f.value}'`;break}}if(t)throw new ze(Se.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE=-62135596800,sE=1e6;class Ln{static now(){return Ln.fromMillis(Date.now())}static fromDate(e){return Ln.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*sE);return new Ln(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ze(Se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ze(Se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<iE)throw new ze(Se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ze(Se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/sE}_compareTo(e){return this.seconds===e.seconds?zt(this.nanoseconds,e.nanoseconds):zt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ln._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ih(e,Ln._jsonSchema))return new Ln(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-iE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ln._jsonSchemaVersion="firestore/timestamp/1.0",Ln._jsonSchema={type:wr("string",Ln._jsonSchemaVersion),seconds:wr("number"),nanoseconds:wr("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{static fromTimestamp(e){return new gt(e)}static min(){return new gt(new Ln(0,0))}static max(){return new gt(new Ln(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yu=-1;function K4(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,c=gt.fromTimestamp(s===1e9?new Ln(t+1,0):new Ln(t,s));return new Vo(c,nt.empty(),e)}function Q4(n){return new Vo(n.readTime,n.key,Yu)}class Vo{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Vo(gt.min(),nt.empty(),Yu)}static max(){return new Vo(gt.max(),nt.empty(),Yu)}}function Z4(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=nt.comparator(n.documentKey,e.documentKey),t!==0?t:zt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kc(n){if(n.code!==Se.FAILED_PRECONDITION||n.message!==J4)throw n;qe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ut(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ne(((s,c)=>{this.nextCallback=f=>{this.wrapSuccess(e,f).next(s,c)},this.catchCallback=f=>{this.wrapFailure(t,f).next(s,c)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Ne?t:Ne.resolve(t)}catch(t){return Ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Ne.reject(t)}static resolve(e){return new Ne(((t,s)=>{t(e)}))}static reject(e){return new Ne(((t,s)=>{s(e)}))}static waitFor(e){return new Ne(((t,s)=>{let c=0,f=0,p=!1;e.forEach((T=>{++c,T.next((()=>{++f,p&&f===c&&t()}),(w=>s(w)))})),p=!0,f===c&&t()}))}static or(e){let t=Ne.resolve(!1);for(const s of e)t=t.next((c=>c?Ne.resolve(c):s()));return t}static forEach(e,t){const s=[];return e.forEach(((c,f)=>{s.push(t.call(this,c,f))})),this.waitFor(s)}static mapArray(e,t){return new Ne(((s,c)=>{const f=e.length,p=new Array(f);let T=0;for(let w=0;w<f;w++){const E=w;t(e[E]).next((C=>{p[E]=C,++T,T===f&&s(p)}),(C=>c(C)))}}))}static doWhile(e,t){return new Ne(((s,c)=>{const f=()=>{e()===!0?t().next((()=>{f()}),c):s()};f()}))}}function eR(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Bc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Pd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm=-1;function kd(n){return n==null}function id(n){return n===0&&1/n==-1/0}function tR(n){return typeof n=="number"&&Number.isInteger(n)&&!id(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA="";function nR(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=aE(e)),e=rR(n.get(t),e);return aE(e)}function rR(n,e){let t=e;const s=n.length;for(let c=0;c<s;c++){const f=n.charAt(c);switch(f){case"\0":t+="";break;case kA:t+="";break;default:t+=f}}return t}function aE(n){return n+kA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Yo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function BA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e,t){this.comparator=e,this.root=t||Gr.EMPTY}insert(e,t){return new Wn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Gr.BLACK,null,null))}remove(e){return new Wn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const c=this.comparator(e,s.key);if(c===0)return t+s.left.size;c<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cf(this.root,e,this.comparator,!0)}}class Cf{constructor(e,t,s,c){this.isReverse=c,this.nodeStack=[];let f=1;for(;!e.isEmpty();)if(f=t?s(e.key,t):1,t&&c&&(f*=-1),f<0)e=this.isReverse?e.left:e.right;else{if(f===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gr{constructor(e,t,s,c,f){this.key=e,this.value=t,this.color=s??Gr.RED,this.left=c??Gr.EMPTY,this.right=f??Gr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,c,f){return new Gr(e??this.key,t??this.value,s??this.color,c??this.left,f??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let c=this;const f=s(e,c.key);return c=f<0?c.copy(null,null,null,c.left.insert(e,t,s),null):f===0?c.copy(null,t,null,null,null):c.copy(null,null,null,null,c.right.insert(e,t,s)),c.fixUp()}removeMin(){if(this.left.isEmpty())return Gr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,c=this;if(t(e,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(e,t),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),t(e,c.key)===0){if(c.right.isEmpty())return Gr.EMPTY;s=c.right.min(),c=c.copy(s.key,s.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(e,t))}return c.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ut(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ut(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ut(27949);return e+(this.isRed()?0:1)}}Gr.EMPTY=null,Gr.RED=!0,Gr.BLACK=!1;Gr.EMPTY=new class{constructor(){this.size=0}get key(){throw ut(57766)}get value(){throw ut(16141)}get color(){throw ut(16727)}get left(){throw ut(29726)}get right(){throw ut(36894)}copy(e,t,s,c,f){return this}insert(e,t,s){return new Gr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e){this.comparator=e,this.data=new Wn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const c=s.getNext();if(this.comparator(c.key,e[1])>=0)return;t(c.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new lE(this.data.getIterator())}getIteratorFrom(e){return new lE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Rr)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const c=t.getNext().key,f=s.getNext().key;if(this.comparator(c,f)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Rr(this.comparator);return t.data=e,t}}class lE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e){this.fields=e,e.sort(qr.comparator)}static empty(){return new Ji([])}unionWith(e){let t=new Rr(qr.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Ji(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Tc(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(c){try{return atob(c)}catch(f){throw typeof DOMException<"u"&&f instanceof DOMException?new UA("Invalid base64 string: "+f):f}})(e);return new Yr(t)}static fromUint8Array(e){const t=(function(c){let f="";for(let p=0;p<c.length;++p)f+=String.fromCharCode(c[p]);return f})(e);return new Yr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let c=0;c<t.length;c++)s[c]=t.charCodeAt(c);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return zt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yr.EMPTY_BYTE_STRING=new Yr("");const iR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jo(n){if(fn(!!n,39018),typeof n=="string"){let e=0;const t=iR.exec(n);if(fn(!!t,46558,{timestamp:n}),t[1]){let c=t[1];c=(c+"000000000").substr(0,9),e=Number(c)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ur(n.seconds),nanos:ur(n.nanos)}}function ur(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Fo(n){return typeof n=="string"?Yr.fromBase64String(n):Yr.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA="server_timestamp",jA="__type__",FA="__previous_value__",HA="__local_write_time__";function Tm(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[jA])==null?void 0:s.stringValue)===VA}function Bd(n){const e=n.mapValue.fields[FA];return Tm(e)?Bd(e):e}function Xu(n){const e=jo(n.mapValue.fields[HA].timestampValue);return new Ln(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e,t,s,c,f,p,T,w,E,C){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=c,this.ssl=f,this.forceLongPolling=p,this.autoDetectLongPolling=T,this.longPollingOptions=w,this.useFetchStreams=E,this.isUsingEmulator=C}}const sd="(default)";class Wu{constructor(e,t){this.projectId=e,this.database=t||sd}static empty(){return new Wu("","")}get isDefaultDatabase(){return this.database===sd}isEqual(e){return e instanceof Wu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA="__type__",aR="__max__",If={mapValue:{}},GA="__vector__",ad="value";function Ho(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Tm(n)?4:lR(n)?9007199254740991:oR(n)?10:11:ut(28295,{value:n})}function $s(n,e){if(n===e)return!0;const t=Ho(n);if(t!==Ho(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Xu(n).isEqual(Xu(e));case 3:return(function(c,f){if(typeof c.timestampValue=="string"&&typeof f.timestampValue=="string"&&c.timestampValue.length===f.timestampValue.length)return c.timestampValue===f.timestampValue;const p=jo(c.timestampValue),T=jo(f.timestampValue);return p.seconds===T.seconds&&p.nanos===T.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(c,f){return Fo(c.bytesValue).isEqual(Fo(f.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(c,f){return ur(c.geoPointValue.latitude)===ur(f.geoPointValue.latitude)&&ur(c.geoPointValue.longitude)===ur(f.geoPointValue.longitude)})(n,e);case 2:return(function(c,f){if("integerValue"in c&&"integerValue"in f)return ur(c.integerValue)===ur(f.integerValue);if("doubleValue"in c&&"doubleValue"in f){const p=ur(c.doubleValue),T=ur(f.doubleValue);return p===T?id(p)===id(T):isNaN(p)&&isNaN(T)}return!1})(n,e);case 9:return Tc(n.arrayValue.values||[],e.arrayValue.values||[],$s);case 10:case 11:return(function(c,f){const p=c.mapValue.fields||{},T=f.mapValue.fields||{};if(oE(p)!==oE(T))return!1;for(const w in p)if(p.hasOwnProperty(w)&&(T[w]===void 0||!$s(p[w],T[w])))return!1;return!0})(n,e);default:return ut(52216,{left:n})}}function Ku(n,e){return(n.values||[]).find((t=>$s(t,e)))!==void 0}function vc(n,e){if(n===e)return 0;const t=Ho(n),s=Ho(e);if(t!==s)return zt(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return zt(n.booleanValue,e.booleanValue);case 2:return(function(f,p){const T=ur(f.integerValue||f.doubleValue),w=ur(p.integerValue||p.doubleValue);return T<w?-1:T>w?1:T===w?0:isNaN(T)?isNaN(w)?0:-1:1})(n,e);case 3:return cE(n.timestampValue,e.timestampValue);case 4:return cE(Xu(n),Xu(e));case 5:return Pg(n.stringValue,e.stringValue);case 6:return(function(f,p){const T=Fo(f),w=Fo(p);return T.compareTo(w)})(n.bytesValue,e.bytesValue);case 7:return(function(f,p){const T=f.split("/"),w=p.split("/");for(let E=0;E<T.length&&E<w.length;E++){const C=zt(T[E],w[E]);if(C!==0)return C}return zt(T.length,w.length)})(n.referenceValue,e.referenceValue);case 8:return(function(f,p){const T=zt(ur(f.latitude),ur(p.latitude));return T!==0?T:zt(ur(f.longitude),ur(p.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return uE(n.arrayValue,e.arrayValue);case 10:return(function(f,p){var M,B,W,$;const T=f.fields||{},w=p.fields||{},E=(M=T[ad])==null?void 0:M.arrayValue,C=(B=w[ad])==null?void 0:B.arrayValue,I=zt(((W=E==null?void 0:E.values)==null?void 0:W.length)||0,(($=C==null?void 0:C.values)==null?void 0:$.length)||0);return I!==0?I:uE(E,C)})(n.mapValue,e.mapValue);case 11:return(function(f,p){if(f===If.mapValue&&p===If.mapValue)return 0;if(f===If.mapValue)return 1;if(p===If.mapValue)return-1;const T=f.fields||{},w=Object.keys(T),E=p.fields||{},C=Object.keys(E);w.sort(),C.sort();for(let I=0;I<w.length&&I<C.length;++I){const M=Pg(w[I],C[I]);if(M!==0)return M;const B=vc(T[w[I]],E[C[I]]);if(B!==0)return B}return zt(w.length,C.length)})(n.mapValue,e.mapValue);default:throw ut(23264,{he:t})}}function cE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return zt(n,e);const t=jo(n),s=jo(e),c=zt(t.seconds,s.seconds);return c!==0?c:zt(t.nanos,s.nanos)}function uE(n,e){const t=n.values||[],s=e.values||[];for(let c=0;c<t.length&&c<s.length;++c){const f=vc(t[c],s[c]);if(f)return f}return zt(t.length,s.length)}function Sc(n){return kg(n)}function kg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=jo(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Fo(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return nt.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",c=!0;for(const f of t.values||[])c?c=!1:s+=",",s+=kg(f);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let c="{",f=!0;for(const p of s)f?f=!1:c+=",",c+=`${p}:${kg(t.fields[p])}`;return c+"}"})(n.mapValue):ut(61005,{value:n})}function Hf(n){switch(Ho(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Bd(n);return e?16+Hf(e):16;case 5:return 2*n.stringValue.length;case 6:return Fo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((c,f)=>c+Hf(f)),0)})(n.arrayValue);case 10:case 11:return(function(s){let c=0;return Yo(s.fields,((f,p)=>{c+=f.length+Hf(p)})),c})(n.mapValue);default:throw ut(13486,{value:n})}}function hE(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Bg(n){return!!n&&"integerValue"in n}function vm(n){return!!n&&"arrayValue"in n}function fE(n){return!!n&&"nullValue"in n}function dE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function zf(n){return!!n&&"mapValue"in n}function oR(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[zA])==null?void 0:s.stringValue)===GA}function Pu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Yo(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Pu(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Pu(n.arrayValue.values[t]);return e}return{...n}}function lR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===aR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e){this.value=e}static empty(){return new Mi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!zf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pu(t)}setAll(e){let t=qr.emptyPath(),s={},c=[];e.forEach(((p,T)=>{if(!t.isImmediateParentOf(T)){const w=this.getFieldsMap(t);this.applyChanges(w,s,c),s={},c=[],t=T.popLast()}p?s[T.lastSegment()]=Pu(p):c.push(T.lastSegment())}));const f=this.getFieldsMap(t);this.applyChanges(f,s,c)}delete(e){const t=this.field(e.popLast());zf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $s(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let c=t.mapValue.fields[e.get(s)];zf(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=c),t=c}return t.mapValue.fields}applyChanges(e,t,s){Yo(t,((c,f)=>e[c]=f));for(const c of s)delete e[c]}clone(){return new Mi(Pu(this.value))}}function qA(n){const e=[];return Yo(n.fields,((t,s)=>{const c=new qr([t]);if(zf(s)){const f=qA(s.mapValue).fields;if(f.length===0)e.push(c);else for(const p of f)e.push(c.child(p))}else e.push(c)})),new Ji(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e,t,s,c,f,p,T){this.key=e,this.documentType=t,this.version=s,this.readTime=c,this.createTime=f,this.data=p,this.documentState=T}static newInvalidDocument(e){return new oi(e,0,gt.min(),gt.min(),gt.min(),Mi.empty(),0)}static newFoundDocument(e,t,s,c){return new oi(e,1,t,gt.min(),s,c,0)}static newNoDocument(e,t){return new oi(e,2,t,gt.min(),gt.min(),Mi.empty(),0)}static newUnknownDocument(e,t){return new oi(e,3,t,gt.min(),gt.min(),Mi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(gt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=gt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof oi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new oi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,t){this.position=e,this.inclusive=t}}function gE(n,e,t){let s=0;for(let c=0;c<n.position.length;c++){const f=e[c],p=n.position[c];if(f.field.isKeyField()?s=nt.comparator(nt.fromName(p.referenceValue),t.key):s=vc(p,t.data.field(f.field)),f.dir==="desc"&&(s*=-1),s!==0)break}return s}function mE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!$s(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,t="asc"){this.field=e,this.dir=t}}function cR(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{}class _r extends YA{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new hR(e,t,s):t==="array-contains"?new gR(e,s):t==="in"?new mR(e,s):t==="not-in"?new pR(e,s):t==="array-contains-any"?new xR(e,s):new _r(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new fR(e,s):new dR(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(vc(t,this.value)):t!==null&&Ho(this.value)===Ho(t)&&this.matchesComparison(vc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ut(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ds extends YA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ds(e,t)}matches(e){return XA(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function XA(n){return n.op==="and"}function WA(n){return uR(n)&&XA(n)}function uR(n){for(const e of n.filters)if(e instanceof Ds)return!1;return!0}function Ug(n){if(n instanceof _r)return n.field.canonicalString()+n.op.toString()+Sc(n.value);if(WA(n))return n.filters.map((e=>Ug(e))).join(",");{const e=n.filters.map((t=>Ug(t))).join(",");return`${n.op}(${e})`}}function KA(n,e){return n instanceof _r?(function(s,c){return c instanceof _r&&s.op===c.op&&s.field.isEqual(c.field)&&$s(s.value,c.value)})(n,e):n instanceof Ds?(function(s,c){return c instanceof Ds&&s.op===c.op&&s.filters.length===c.filters.length?s.filters.reduce(((f,p,T)=>f&&KA(p,c.filters[T])),!0):!1})(n,e):void ut(19439)}function QA(n){return n instanceof _r?(function(t){return`${t.field.canonicalString()} ${t.op} ${Sc(t.value)}`})(n):n instanceof Ds?(function(t){return t.op.toString()+" {"+t.getFilters().map(QA).join(" ,")+"}"})(n):"Filter"}class hR extends _r{constructor(e,t,s){super(e,t,s),this.key=nt.fromName(s.referenceValue)}matches(e){const t=nt.comparator(e.key,this.key);return this.matchesComparison(t)}}class fR extends _r{constructor(e,t){super(e,"in",t),this.keys=ZA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class dR extends _r{constructor(e,t){super(e,"not-in",t),this.keys=ZA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function ZA(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>nt.fromName(s.referenceValue)))}class gR extends _r{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return vm(t)&&Ku(t.arrayValue,this.value)}}class mR extends _r{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ku(this.value.arrayValue,t)}}class pR extends _r{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ku(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ku(this.value.arrayValue,t)}}class xR extends _r{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!vm(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Ku(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e,t=null,s=[],c=[],f=null,p=null,T=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=c,this.limit=f,this.startAt=p,this.endAt=T,this.Te=null}}function pE(n,e=null,t=[],s=[],c=null,f=null,p=null){return new yR(n,e,t,s,c,f,p)}function Sm(n){const e=_t(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Ug(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(f){return f.field.canonicalString()+f.dir})(s))).join(","),kd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Sc(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Sc(s))).join(",")),e.Te=t}return e.Te}function Cm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!cR(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!KA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!mE(n.startAt,e.startAt)&&mE(n.endAt,e.endAt)}function Vg(n){return nt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,t=null,s=[],c=[],f=null,p="F",T=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=c,this.limit=f,this.limitType=p,this.startAt=T,this.endAt=w,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function ER(n,e,t,s,c,f,p,T){return new sh(n,e,t,s,c,f,p,T)}function Ud(n){return new sh(n)}function xE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function JA(n){return n.collectionGroup!==null}function ku(n){const e=_t(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const f of e.explicitOrderBy)e.Ie.push(f),t.add(f.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(p){let T=new Rr(qr.comparator);return p.filters.forEach((w=>{w.getFlattenedFilters().forEach((E=>{E.isInequality()&&(T=T.add(E.field))}))})),T})(e).forEach((f=>{t.has(f.canonicalString())||f.isKeyField()||e.Ie.push(new ld(f,s))})),t.has(qr.keyField().canonicalString())||e.Ie.push(new ld(qr.keyField(),s))}return e.Ie}function Ys(n){const e=_t(n);return e.Ee||(e.Ee=_R(e,ku(n))),e.Ee}function _R(n,e){if(n.limitType==="F")return pE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((c=>{const f=c.dir==="desc"?"asc":"desc";return new ld(c.field,f)}));const t=n.endAt?new od(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new od(n.startAt.position,n.startAt.inclusive):null;return pE(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function jg(n,e){const t=n.filters.concat([e]);return new sh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function cd(n,e,t){return new sh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Vd(n,e){return Cm(Ys(n),Ys(e))&&n.limitType===e.limitType}function $A(n){return`${Sm(Ys(n))}|lt:${n.limitType}`}function cc(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((c=>QA(c))).join(", ")}]`),kd(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((c=>(function(p){return`${p.field.canonicalString()} (${p.dir})`})(c))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((c=>Sc(c))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((c=>Sc(c))).join(",")),`Target(${s})`})(Ys(n))}; limitType=${n.limitType})`}function jd(n,e){return e.isFoundDocument()&&(function(s,c){const f=c.key.path;return s.collectionGroup!==null?c.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(f):nt.isDocumentKey(s.path)?s.path.isEqual(f):s.path.isImmediateParentOf(f)})(n,e)&&(function(s,c){for(const f of ku(s))if(!f.field.isKeyField()&&c.data.field(f.field)===null)return!1;return!0})(n,e)&&(function(s,c){for(const f of s.filters)if(!f.matches(c))return!1;return!0})(n,e)&&(function(s,c){return!(s.startAt&&!(function(p,T,w){const E=gE(p,T,w);return p.inclusive?E<=0:E<0})(s.startAt,ku(s),c)||s.endAt&&!(function(p,T,w){const E=gE(p,T,w);return p.inclusive?E>=0:E>0})(s.endAt,ku(s),c))})(n,e)}function wR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function eb(n){return(e,t)=>{let s=!1;for(const c of ku(n)){const f=AR(c,e,t);if(f!==0)return f;s=s||c.field.isKeyField()}return 0}}function AR(n,e,t){const s=n.field.isKeyField()?nt.comparator(e.key,t.key):(function(f,p,T){const w=p.data.field(f),E=T.data.field(f);return w!==null&&E!==null?vc(w,E):ut(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return ut(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[c,f]of s)if(this.equalsFn(c,e))return f}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),c=this.inner[s];if(c===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let f=0;f<c.length;f++)if(this.equalsFn(c[f][0],e))return void(c[f]=[e,t]);c.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let c=0;c<s.length;c++)if(this.equalsFn(s[c][0],e))return s.length===1?delete this.inner[t]:s.splice(c,1),this.innerSize--,!0;return!1}forEach(e){Yo(this.inner,((t,s)=>{for(const[c,f]of s)e(c,f)}))}isEmpty(){return BA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR=new Wn(nt.comparator);function Fa(){return bR}const tb=new Wn(nt.comparator);function Iu(...n){let e=tb;for(const t of n)e=e.insert(t.key,t);return e}function nb(n){let e=tb;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function _l(){return Bu()}function rb(){return Bu()}function Bu(){return new Rl((n=>n.toString()),((n,e)=>n.isEqual(e)))}const TR=new Wn(nt.comparator),vR=new Rr(nt.comparator);function Gt(...n){let e=vR;for(const t of n)e=e.add(t);return e}const SR=new Rr(zt);function CR(){return SR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:id(e)?"-0":e}}function ib(n){return{integerValue:""+n}}function IR(n,e){return tR(e)?ib(e):Im(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(){this._=void 0}}function NR(n,e,t){return n instanceof ud?(function(c,f){const p={fields:{[jA]:{stringValue:VA},[HA]:{timestampValue:{seconds:c.seconds,nanos:c.nanoseconds}}}};return f&&Tm(f)&&(f=Bd(f)),f&&(p.fields[FA]=f),{mapValue:p}})(t,e):n instanceof Qu?ab(n,e):n instanceof Zu?ob(n,e):(function(c,f){const p=sb(c,f),T=yE(p)+yE(c.Ae);return Bg(p)&&Bg(c.Ae)?ib(T):Im(c.serializer,T)})(n,e)}function RR(n,e,t){return n instanceof Qu?ab(n,e):n instanceof Zu?ob(n,e):t}function sb(n,e){return n instanceof hd?(function(s){return Bg(s)||(function(f){return!!f&&"doubleValue"in f})(s)})(e)?e:{integerValue:0}:null}class ud extends Fd{}class Qu extends Fd{constructor(e){super(),this.elements=e}}function ab(n,e){const t=lb(e);for(const s of n.elements)t.some((c=>$s(c,s)))||t.push(s);return{arrayValue:{values:t}}}class Zu extends Fd{constructor(e){super(),this.elements=e}}function ob(n,e){let t=lb(e);for(const s of n.elements)t=t.filter((c=>!$s(c,s)));return{arrayValue:{values:t}}}class hd extends Fd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function yE(n){return ur(n.integerValue||n.doubleValue)}function lb(n){return vm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function OR(n,e){return n.field.isEqual(e.field)&&(function(s,c){return s instanceof Qu&&c instanceof Qu||s instanceof Zu&&c instanceof Zu?Tc(s.elements,c.elements,$s):s instanceof hd&&c instanceof hd?$s(s.Ae,c.Ae):s instanceof ud&&c instanceof ud})(n.transform,e.transform)}class DR{constructor(e,t){this.version=e,this.transformResults=t}}class Pi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Pi}static exists(e){return new Pi(void 0,e)}static updateTime(e){return new Pi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Hd{}function cb(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new zd(n.key,Pi.none()):new ah(n.key,n.data,Pi.none());{const t=n.data,s=Mi.empty();let c=new Rr(qr.comparator);for(let f of e.fields)if(!c.has(f)){let p=t.field(f);p===null&&f.length>1&&(f=f.popLast(),p=t.field(f)),p===null?s.delete(f):s.set(f,p),c=c.add(f)}return new Xo(n.key,s,new Ji(c.toArray()),Pi.none())}}function MR(n,e,t){n instanceof ah?(function(c,f,p){const T=c.value.clone(),w=_E(c.fieldTransforms,f,p.transformResults);T.setAll(w),f.convertToFoundDocument(p.version,T).setHasCommittedMutations()})(n,e,t):n instanceof Xo?(function(c,f,p){if(!Gf(c.precondition,f))return void f.convertToUnknownDocument(p.version);const T=_E(c.fieldTransforms,f,p.transformResults),w=f.data;w.setAll(ub(c)),w.setAll(T),f.convertToFoundDocument(p.version,w).setHasCommittedMutations()})(n,e,t):(function(c,f,p){f.convertToNoDocument(p.version).setHasCommittedMutations()})(0,e,t)}function Uu(n,e,t,s){return n instanceof ah?(function(f,p,T,w){if(!Gf(f.precondition,p))return T;const E=f.value.clone(),C=wE(f.fieldTransforms,w,p);return E.setAll(C),p.convertToFoundDocument(p.version,E).setHasLocalMutations(),null})(n,e,t,s):n instanceof Xo?(function(f,p,T,w){if(!Gf(f.precondition,p))return T;const E=wE(f.fieldTransforms,w,p),C=p.data;return C.setAll(ub(f)),C.setAll(E),p.convertToFoundDocument(p.version,C).setHasLocalMutations(),T===null?null:T.unionWith(f.fieldMask.fields).unionWith(f.fieldTransforms.map((I=>I.field)))})(n,e,t,s):(function(f,p,T){return Gf(f.precondition,p)?(p.convertToNoDocument(p.version).setHasLocalMutations(),null):T})(n,e,t)}function LR(n,e){let t=null;for(const s of n.fieldTransforms){const c=e.data.field(s.field),f=sb(s.transform,c||null);f!=null&&(t===null&&(t=Mi.empty()),t.set(s.field,f))}return t||null}function EE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,c){return s===void 0&&c===void 0||!(!s||!c)&&Tc(s,c,((f,p)=>OR(f,p)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class ah extends Hd{constructor(e,t,s,c=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=c,this.type=0}getFieldMask(){return null}}class Xo extends Hd{constructor(e,t,s,c,f=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=c,this.fieldTransforms=f,this.type=1}getFieldMask(){return this.fieldMask}}function ub(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function _E(n,e,t){const s=new Map;fn(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let c=0;c<t.length;c++){const f=n[c],p=f.transform,T=e.data.field(f.field);s.set(f.field,RR(p,T,t[c]))}return s}function wE(n,e,t){const s=new Map;for(const c of n){const f=c.transform,p=t.data.field(c.field);s.set(c.field,NR(f,p,e))}return s}class zd extends Hd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class PR extends Hd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,t,s,c){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=c}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let c=0;c<this.mutations.length;c++){const f=this.mutations[c];f.key.isEqual(e.key)&&MR(f,e,s[c])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Uu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Uu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=rb();return this.mutations.forEach((c=>{const f=e.get(c.key),p=f.overlayedDocument;let T=this.applyToLocalView(p,f.mutatedFields);T=t.has(c.key)?null:T;const w=cb(p,T);w!==null&&s.set(c.key,w),p.isValidDocument()||p.convertToNoDocument(gt.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Gt())}isEqual(e){return this.batchId===e.batchId&&Tc(this.mutations,e.mutations,((t,s)=>EE(t,s)))&&Tc(this.baseMutations,e.baseMutations,((t,s)=>EE(t,s)))}}class Nm{constructor(e,t,s,c){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=c}static from(e,t,s){fn(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let c=(function(){return TR})();const f=e.mutations;for(let p=0;p<f.length;p++)c=c.insert(f[p].key,s[p].version);return new Nm(e,t,s,c)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Er,$t;function VR(n){switch(n){case Se.OK:return ut(64938);case Se.CANCELLED:case Se.UNKNOWN:case Se.DEADLINE_EXCEEDED:case Se.RESOURCE_EXHAUSTED:case Se.INTERNAL:case Se.UNAVAILABLE:case Se.UNAUTHENTICATED:return!1;case Se.INVALID_ARGUMENT:case Se.NOT_FOUND:case Se.ALREADY_EXISTS:case Se.PERMISSION_DENIED:case Se.FAILED_PRECONDITION:case Se.ABORTED:case Se.OUT_OF_RANGE:case Se.UNIMPLEMENTED:case Se.DATA_LOSS:return!0;default:return ut(15467,{code:n})}}function hb(n){if(n===void 0)return ja("GRPC error has no .code"),Se.UNKNOWN;switch(n){case Er.OK:return Se.OK;case Er.CANCELLED:return Se.CANCELLED;case Er.UNKNOWN:return Se.UNKNOWN;case Er.DEADLINE_EXCEEDED:return Se.DEADLINE_EXCEEDED;case Er.RESOURCE_EXHAUSTED:return Se.RESOURCE_EXHAUSTED;case Er.INTERNAL:return Se.INTERNAL;case Er.UNAVAILABLE:return Se.UNAVAILABLE;case Er.UNAUTHENTICATED:return Se.UNAUTHENTICATED;case Er.INVALID_ARGUMENT:return Se.INVALID_ARGUMENT;case Er.NOT_FOUND:return Se.NOT_FOUND;case Er.ALREADY_EXISTS:return Se.ALREADY_EXISTS;case Er.PERMISSION_DENIED:return Se.PERMISSION_DENIED;case Er.FAILED_PRECONDITION:return Se.FAILED_PRECONDITION;case Er.ABORTED:return Se.ABORTED;case Er.OUT_OF_RANGE:return Se.OUT_OF_RANGE;case Er.UNIMPLEMENTED:return Se.UNIMPLEMENTED;case Er.DATA_LOSS:return Se.DATA_LOSS;default:return ut(39323,{code:n})}}($t=Er||(Er={}))[$t.OK=0]="OK",$t[$t.CANCELLED=1]="CANCELLED",$t[$t.UNKNOWN=2]="UNKNOWN",$t[$t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$t[$t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$t[$t.NOT_FOUND=5]="NOT_FOUND",$t[$t.ALREADY_EXISTS=6]="ALREADY_EXISTS",$t[$t.PERMISSION_DENIED=7]="PERMISSION_DENIED",$t[$t.UNAUTHENTICATED=16]="UNAUTHENTICATED",$t[$t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$t[$t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$t[$t.ABORTED=10]="ABORTED",$t[$t.OUT_OF_RANGE=11]="OUT_OF_RANGE",$t[$t.UNIMPLEMENTED=12]="UNIMPLEMENTED",$t[$t.INTERNAL=13]="INTERNAL",$t[$t.UNAVAILABLE=14]="UNAVAILABLE",$t[$t.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR=new ko([4294967295,4294967295],0);function AE(n){const e=jR().encode(n),t=new SA;return t.update(e),new Uint8Array(t.digest())}function bE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),c=e.getUint32(8,!0),f=e.getUint32(12,!0);return[new ko([t,s],0),new ko([c,f],0)]}class Rm{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Nu(`Invalid padding: ${t}`);if(s<0)throw new Nu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Nu(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Nu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ko.fromNumber(this.ge)}ye(e,t,s){let c=e.add(t.multiply(ko.fromNumber(s)));return c.compare(FR)===1&&(c=new ko([c.getBits(0),c.getBits(1)],0)),c.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=AE(e),[s,c]=bE(t);for(let f=0;f<this.hashCount;f++){const p=this.ye(s,c,f);if(!this.we(p))return!1}return!0}static create(e,t,s){const c=e%8==0?0:8-e%8,f=new Uint8Array(Math.ceil(e/8)),p=new Rm(f,c,t);return s.forEach((T=>p.insert(T))),p}insert(e){if(this.ge===0)return;const t=AE(e),[s,c]=bE(t);for(let f=0;f<this.hashCount;f++){const p=this.ye(s,c,f);this.Se(p)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Nu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,t,s,c,f){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=c,this.resolvedLimboDocuments=f}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const c=new Map;return c.set(e,oh.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Gd(gt.min(),c,new Wn(zt),Fa(),Gt())}}class oh{constructor(e,t,s,c,f){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=c,this.removedDocuments=f}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new oh(s,t,Gt(),Gt(),Gt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,t,s,c){this.be=e,this.removedTargetIds=t,this.key=s,this.De=c}}class fb{constructor(e,t){this.targetId=e,this.Ce=t}}class db{constructor(e,t,s=Yr.EMPTY_BYTE_STRING,c=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=c}}class TE{constructor(){this.ve=0,this.Fe=vE(),this.Me=Yr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Gt(),t=Gt(),s=Gt();return this.Fe.forEach(((c,f)=>{switch(f){case 0:e=e.add(c);break;case 2:t=t.add(c);break;case 1:s=s.add(c);break;default:ut(38017,{changeType:f})}})),new oh(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=vE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,fn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class HR{constructor(e){this.Ge=e,this.ze=new Map,this.je=Fa(),this.Je=Nf(),this.He=Nf(),this.Ye=new Wn(zt)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:ut(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,c)=>{this.rt(c)&&t(c)}))}st(e){const t=e.targetId,s=e.Ce.count,c=this.ot(t);if(c){const f=c.target;if(Vg(f))if(s===0){const p=new nt(f.path);this.et(t,p,oi.newNoDocument(p,gt.min()))}else fn(s===1,20013,{expectedCount:s});else{const p=this._t(t);if(p!==s){const T=this.ut(e),w=T?this.ct(T,e,p):1;if(w!==0){this.it(t);const E=w===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,E)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:c=0},hashCount:f=0}=t;let p,T;try{p=Fo(s).toUint8Array()}catch(w){if(w instanceof UA)return bc("Decoding the base64 bloom filter in existence filter failed ("+w.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw w}try{T=new Rm(p,c,f)}catch(w){return bc(w instanceof Nu?"BloomFilter error: ":"Applying bloom filter failed: ",w),null}return T.ge===0?null:T}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let c=0;return s.forEach((f=>{const p=this.Ge.ht(),T=`projects/${p.projectId}/databases/${p.database}/documents/${f.path.canonicalString()}`;e.mightContain(T)||(this.et(t,f,null),c++)})),c}Tt(e){const t=new Map;this.ze.forEach(((f,p)=>{const T=this.ot(p);if(T){if(f.current&&Vg(T.target)){const w=new nt(T.target.path);this.It(w).has(p)||this.Et(p,w)||this.et(p,w,oi.newNoDocument(w,e))}f.Be&&(t.set(p,f.ke()),f.qe())}}));let s=Gt();this.He.forEach(((f,p)=>{let T=!0;p.forEachWhile((w=>{const E=this.ot(w);return!E||E.purpose==="TargetPurposeLimboResolution"||(T=!1,!1)})),T&&(s=s.add(f))})),this.je.forEach(((f,p)=>p.setReadTime(e)));const c=new Gd(e,t,this.Ye,this.je,s);return this.je=Fa(),this.Je=Nf(),this.He=Nf(),this.Ye=new Wn(zt),c}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const c=this.nt(e);this.Et(e,t)?c.Qe(t,1):c.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new TE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Rr(zt),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Rr(zt),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||qe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new TE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Nf(){return new Wn(nt.comparator)}function vE(){return new Wn(nt.comparator)}const zR={asc:"ASCENDING",desc:"DESCENDING"},GR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qR={and:"AND",or:"OR"};class YR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Fg(n,e){return n.useProto3Json||kd(e)?e:{value:e}}function fd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gb(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function XR(n,e){return fd(n,e.toTimestamp())}function Xs(n){return fn(!!n,49232),gt.fromTimestamp((function(t){const s=jo(t);return new Ln(s.seconds,s.nanos)})(n))}function Om(n,e){return Hg(n,e).canonicalString()}function Hg(n,e){const t=(function(c){return new Nn(["projects",c.projectId,"databases",c.database])})(n).child("documents");return e===void 0?t:t.child(e)}function mb(n){const e=Nn.fromString(n);return fn(_b(e),10190,{key:e.toString()}),e}function zg(n,e){return Om(n.databaseId,e.path)}function ug(n,e){const t=mb(e);if(t.get(1)!==n.databaseId.projectId)throw new ze(Se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ze(Se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new nt(xb(t))}function pb(n,e){return Om(n.databaseId,e)}function WR(n){const e=mb(n);return e.length===4?Nn.emptyPath():xb(e)}function Gg(n){return new Nn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function xb(n){return fn(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function SE(n,e,t){return{name:zg(n,e),fields:t.value.mapValue.fields}}function KR(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(E){return E==="NO_CHANGE"?0:E==="ADD"?1:E==="REMOVE"?2:E==="CURRENT"?3:E==="RESET"?4:ut(39313,{state:E})})(e.targetChange.targetChangeType||"NO_CHANGE"),c=e.targetChange.targetIds||[],f=(function(E,C){return E.useProto3Json?(fn(C===void 0||typeof C=="string",58123),Yr.fromBase64String(C||"")):(fn(C===void 0||C instanceof Buffer||C instanceof Uint8Array,16193),Yr.fromUint8Array(C||new Uint8Array))})(n,e.targetChange.resumeToken),p=e.targetChange.cause,T=p&&(function(E){const C=E.code===void 0?Se.UNKNOWN:hb(E.code);return new ze(C,E.message||"")})(p);t=new db(s,c,f,T||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const c=ug(n,s.document.name),f=Xs(s.document.updateTime),p=s.document.createTime?Xs(s.document.createTime):gt.min(),T=new Mi({mapValue:{fields:s.document.fields}}),w=oi.newFoundDocument(c,f,p,T),E=s.targetIds||[],C=s.removedTargetIds||[];t=new qf(E,C,w.key,w)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const c=ug(n,s.document),f=s.readTime?Xs(s.readTime):gt.min(),p=oi.newNoDocument(c,f),T=s.removedTargetIds||[];t=new qf([],T,p.key,p)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const c=ug(n,s.document),f=s.removedTargetIds||[];t=new qf([],f,c,null)}else{if(!("filter"in e))return ut(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:c=0,unchangedNames:f}=s,p=new UR(c,f),T=s.targetId;t=new fb(T,p)}}return t}function QR(n,e){let t;if(e instanceof ah)t={update:SE(n,e.key,e.value)};else if(e instanceof zd)t={delete:zg(n,e.key)};else if(e instanceof Xo)t={update:SE(n,e.key,e.data),updateMask:s6(e.fieldMask)};else{if(!(e instanceof PR))return ut(16599,{Vt:e.type});t={verify:zg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(f,p){const T=p.transform;if(T instanceof ud)return{fieldPath:p.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(T instanceof Qu)return{fieldPath:p.field.canonicalString(),appendMissingElements:{values:T.elements}};if(T instanceof Zu)return{fieldPath:p.field.canonicalString(),removeAllFromArray:{values:T.elements}};if(T instanceof hd)return{fieldPath:p.field.canonicalString(),increment:T.Ae};throw ut(20930,{transform:p.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(c,f){return f.updateTime!==void 0?{updateTime:XR(c,f.updateTime)}:f.exists!==void 0?{exists:f.exists}:ut(27497)})(n,e.precondition)),t}function ZR(n,e){return n&&n.length>0?(fn(e!==void 0,14353),n.map((t=>(function(c,f){let p=c.updateTime?Xs(c.updateTime):Xs(f);return p.isEqual(gt.min())&&(p=Xs(f)),new DR(p,c.transformResults||[])})(t,e)))):[]}function JR(n,e){return{documents:[pb(n,e.path)]}}function $R(n,e){const t={structuredQuery:{}},s=e.path;let c;e.collectionGroup!==null?(c=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(c=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=pb(n,c);const f=(function(E){if(E.length!==0)return Eb(Ds.create(E,"and"))})(e.filters);f&&(t.structuredQuery.where=f);const p=(function(E){if(E.length!==0)return E.map((C=>(function(M){return{field:uc(M.field),direction:n6(M.dir)}})(C)))})(e.orderBy);p&&(t.structuredQuery.orderBy=p);const T=Fg(n,e.limit);return T!==null&&(t.structuredQuery.limit=T),e.startAt&&(t.structuredQuery.startAt=(function(E){return{before:E.inclusive,values:E.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(E){return{before:!E.inclusive,values:E.position}})(e.endAt)),{ft:t,parent:c}}function e6(n){let e=WR(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let c=null;if(s>0){fn(s===1,65062);const C=t.from[0];C.allDescendants?c=C.collectionId:e=e.child(C.collectionId)}let f=[];t.where&&(f=(function(I){const M=yb(I);return M instanceof Ds&&WA(M)?M.getFilters():[M]})(t.where));let p=[];t.orderBy&&(p=(function(I){return I.map((M=>(function(W){return new ld(hc(W.field),(function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(W.direction))})(M)))})(t.orderBy));let T=null;t.limit&&(T=(function(I){let M;return M=typeof I=="object"?I.value:I,kd(M)?null:M})(t.limit));let w=null;t.startAt&&(w=(function(I){const M=!!I.before,B=I.values||[];return new od(B,M)})(t.startAt));let E=null;return t.endAt&&(E=(function(I){const M=!I.before,B=I.values||[];return new od(B,M)})(t.endAt)),ER(e,c,p,f,T,"F",w,E)}function t6(n,e){const t=(function(c){switch(c){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ut(28987,{purpose:c})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function yb(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=hc(t.unaryFilter.field);return _r.create(s,"==",{doubleValue:NaN});case"IS_NULL":const c=hc(t.unaryFilter.field);return _r.create(c,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const f=hc(t.unaryFilter.field);return _r.create(f,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const p=hc(t.unaryFilter.field);return _r.create(p,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ut(61313);default:return ut(60726)}})(n):n.fieldFilter!==void 0?(function(t){return _r.create(hc(t.fieldFilter.field),(function(c){switch(c){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ut(58110);default:return ut(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ds.create(t.compositeFilter.filters.map((s=>yb(s))),(function(c){switch(c){case"AND":return"and";case"OR":return"or";default:return ut(1026)}})(t.compositeFilter.op))})(n):ut(30097,{filter:n})}function n6(n){return zR[n]}function r6(n){return GR[n]}function i6(n){return qR[n]}function uc(n){return{fieldPath:n.canonicalString()}}function hc(n){return qr.fromServerFormat(n.fieldPath)}function Eb(n){return n instanceof _r?(function(t){if(t.op==="=="){if(dE(t.value))return{unaryFilter:{field:uc(t.field),op:"IS_NAN"}};if(fE(t.value))return{unaryFilter:{field:uc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(dE(t.value))return{unaryFilter:{field:uc(t.field),op:"IS_NOT_NAN"}};if(fE(t.value))return{unaryFilter:{field:uc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:uc(t.field),op:r6(t.op),value:t.value}}})(n):n instanceof Ds?(function(t){const s=t.getFilters().map((c=>Eb(c)));return s.length===1?s[0]:{compositeFilter:{op:i6(t.op),filters:s}}})(n):ut(54877,{filter:n})}function s6(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function _b(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,t,s,c,f=gt.min(),p=gt.min(),T=Yr.EMPTY_BYTE_STRING,w=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=c,this.snapshotVersion=f,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=T,this.expectedCount=w}withSequenceNumber(e){return new Oo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Oo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Oo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Oo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{constructor(e){this.yt=e}}function o6(n){const e=e6({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?cd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l6{constructor(){this.Cn=new c6}addToCollectionParentIndex(e,t){return this.Cn.add(t),Ne.resolve()}getCollectionParents(e,t){return Ne.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Ne.resolve()}deleteFieldIndex(e,t){return Ne.resolve()}deleteAllFieldIndexes(e){return Ne.resolve()}createTargetIndexes(e,t){return Ne.resolve()}getDocumentsMatchingTarget(e,t){return Ne.resolve(null)}getIndexType(e,t){return Ne.resolve(0)}getFieldIndexes(e,t){return Ne.resolve([])}getNextCollectionGroupToUpdate(e){return Ne.resolve(null)}getMinOffset(e,t){return Ne.resolve(Vo.min())}getMinOffsetFromCollectionGroup(e,t){return Ne.resolve(Vo.min())}updateCollectionGroup(e,t,s){return Ne.resolve()}updateIndexEntries(e,t){return Ne.resolve()}}class c6{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),c=this.index[t]||new Rr(Nn.comparator),f=!c.has(s);return this.index[t]=c.add(s),f}has(e){const t=e.lastSegment(),s=e.popLast(),c=this.index[t];return c&&c.has(s)}getEntries(e){return(this.index[e]||new Rr(Nn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wb=41943040;class Di{static withCacheSize(e){return new Di(e,Di.DEFAULT_COLLECTION_PERCENTILE,Di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Di.DEFAULT_COLLECTION_PERCENTILE=10,Di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Di.DEFAULT=new Di(wb,Di.DEFAULT_COLLECTION_PERCENTILE,Di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Di.DISABLED=new Di(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Cc(0)}static cr(){return new Cc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE="LruGarbageCollector",u6=1048576;function NE([n,e],[t,s]){const c=zt(n,t);return c===0?zt(e,s):c}class h6{constructor(e){this.Ir=e,this.buffer=new Rr(NE),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();NE(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class f6{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){qe(IE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Bc(t)?qe(IE,"Ignoring IndexedDB error during garbage collection: ",t):await kc(t)}await this.Vr(3e5)}))}}class d6{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return Ne.resolve(Pd.ce);const s=new h6(t);return this.mr.forEachTarget(e,(c=>s.Ar(c.sequenceNumber))).next((()=>this.mr.pr(e,(c=>s.Ar(c))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(qe("LruGarbageCollector","Garbage collection skipped; disabled"),Ne.resolve(CE)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(qe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),CE):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,c,f,p,T,w,E;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((I=>(I>this.params.maximumSequenceNumbersToCollect?(qe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),c=this.params.maximumSequenceNumbersToCollect):c=I,p=Date.now(),this.nthSequenceNumber(e,c)))).next((I=>(s=I,T=Date.now(),this.removeTargets(e,s,t)))).next((I=>(f=I,w=Date.now(),this.removeOrphanedDocuments(e,s)))).next((I=>(E=Date.now(),lc()<=Ht.DEBUG&&qe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${p-C}ms
	Determined least recently used ${c} in `+(T-p)+`ms
	Removed ${f} targets in `+(w-T)+`ms
	Removed ${I} documents in `+(E-w)+`ms
Total Duration: ${E-C}ms`),Ne.resolve({didRun:!0,sequenceNumbersCollected:c,targetsRemoved:f,documentsRemoved:I}))))}}function g6(n,e){return new d6(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m6{constructor(){this.changes=new Rl((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,oi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?Ne.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{constructor(e,t,s,c){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=c}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((c=>(s=c,this.remoteDocumentCache.getEntry(e,t)))).next((c=>(s!==null&&Uu(s.mutation,c,Ji.empty(),Ln.now()),c)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Gt()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Gt()){const c=_l();return this.populateOverlays(e,c,t).next((()=>this.computeViews(e,t,c,s).next((f=>{let p=Iu();return f.forEach(((T,w)=>{p=p.insert(T,w.overlayedDocument)})),p}))))}getOverlayedDocuments(e,t){const s=_l();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Gt())))}populateOverlays(e,t,s){const c=[];return s.forEach((f=>{t.has(f)||c.push(f)})),this.documentOverlayCache.getOverlays(e,c).next((f=>{f.forEach(((p,T)=>{t.set(p,T)}))}))}computeViews(e,t,s,c){let f=Fa();const p=Bu(),T=(function(){return Bu()})();return t.forEach(((w,E)=>{const C=s.get(E.key);c.has(E.key)&&(C===void 0||C.mutation instanceof Xo)?f=f.insert(E.key,E):C!==void 0?(p.set(E.key,C.mutation.getFieldMask()),Uu(C.mutation,E,C.mutation.getFieldMask(),Ln.now())):p.set(E.key,Ji.empty())})),this.recalculateAndSaveOverlays(e,f).next((w=>(w.forEach(((E,C)=>p.set(E,C))),t.forEach(((E,C)=>T.set(E,new p6(C,p.get(E)??null)))),T)))}recalculateAndSaveOverlays(e,t){const s=Bu();let c=new Wn(((p,T)=>p-T)),f=Gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((p=>{for(const T of p)T.keys().forEach((w=>{const E=t.get(w);if(E===null)return;let C=s.get(w)||Ji.empty();C=T.applyToLocalView(E,C),s.set(w,C);const I=(c.get(T.batchId)||Gt()).add(w);c=c.insert(T.batchId,I)}))})).next((()=>{const p=[],T=c.getReverseIterator();for(;T.hasNext();){const w=T.getNext(),E=w.key,C=w.value,I=rb();C.forEach((M=>{if(!f.has(M)){const B=cb(t.get(M),s.get(M));B!==null&&I.set(M,B),f=f.add(M)}})),p.push(this.documentOverlayCache.saveOverlays(e,E,I))}return Ne.waitFor(p)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,c){return(function(p){return nt.isDocumentKey(p.path)&&p.collectionGroup===null&&p.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):JA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,c):this.getDocumentsMatchingCollectionQuery(e,t,s,c)}getNextDocuments(e,t,s,c){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,c).next((f=>{const p=c-f.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,c-f.size):Ne.resolve(_l());let T=Yu,w=f;return p.next((E=>Ne.forEach(E,((C,I)=>(T<I.largestBatchId&&(T=I.largestBatchId),f.get(C)?Ne.resolve():this.remoteDocumentCache.getEntry(e,C).next((M=>{w=w.insert(C,M)}))))).next((()=>this.populateOverlays(e,E,f))).next((()=>this.computeViews(e,w,E,Gt()))).next((C=>({batchId:T,changes:nb(C)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new nt(t)).next((s=>{let c=Iu();return s.isFoundDocument()&&(c=c.insert(s.key,s)),c}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,c){const f=t.collectionGroup;let p=Iu();return this.indexManager.getCollectionParents(e,f).next((T=>Ne.forEach(T,(w=>{const E=(function(I,M){return new sh(M,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)})(t,w.child(f));return this.getDocumentsMatchingCollectionQuery(e,E,s,c).next((C=>{C.forEach(((I,M)=>{p=p.insert(I,M)}))}))})).next((()=>p))))}getDocumentsMatchingCollectionQuery(e,t,s,c){let f;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((p=>(f=p,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,f,c)))).next((p=>{f.forEach(((w,E)=>{const C=E.getKey();p.get(C)===null&&(p=p.insert(C,oi.newInvalidDocument(C)))}));let T=Iu();return p.forEach(((w,E)=>{const C=f.get(w);C!==void 0&&Uu(C.mutation,E,Ji.empty(),Ln.now()),jd(t,E)&&(T=T.insert(w,E))})),T}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Ne.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(c){return{id:c.id,version:c.version,createTime:Xs(c.createTime)}})(t)),Ne.resolve()}getNamedQuery(e,t){return Ne.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(c){return{name:c.name,query:o6(c.bundledQuery),readTime:Xs(c.readTime)}})(t)),Ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E6{constructor(){this.overlays=new Wn(nt.comparator),this.qr=new Map}getOverlay(e,t){return Ne.resolve(this.overlays.get(t))}getOverlays(e,t){const s=_l();return Ne.forEach(t,(c=>this.getOverlay(e,c).next((f=>{f!==null&&s.set(c,f)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((c,f)=>{this.St(e,t,f)})),Ne.resolve()}removeOverlaysForBatchId(e,t,s){const c=this.qr.get(s);return c!==void 0&&(c.forEach((f=>this.overlays=this.overlays.remove(f))),this.qr.delete(s)),Ne.resolve()}getOverlaysForCollection(e,t,s){const c=_l(),f=t.length+1,p=new nt(t.child("")),T=this.overlays.getIteratorFrom(p);for(;T.hasNext();){const w=T.getNext().value,E=w.getKey();if(!t.isPrefixOf(E.path))break;E.path.length===f&&w.largestBatchId>s&&c.set(w.getKey(),w)}return Ne.resolve(c)}getOverlaysForCollectionGroup(e,t,s,c){let f=new Wn(((E,C)=>E-C));const p=this.overlays.getIterator();for(;p.hasNext();){const E=p.getNext().value;if(E.getKey().getCollectionGroup()===t&&E.largestBatchId>s){let C=f.get(E.largestBatchId);C===null&&(C=_l(),f=f.insert(E.largestBatchId,C)),C.set(E.getKey(),E)}}const T=_l(),w=f.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach(((E,C)=>T.set(E,C))),!(T.size()>=c)););return Ne.resolve(T)}St(e,t,s){const c=this.overlays.get(s.key);if(c!==null){const p=this.qr.get(c.largestBatchId).delete(s.key);this.qr.set(c.largestBatchId,p)}this.overlays=this.overlays.insert(s.key,new BR(t,s));let f=this.qr.get(t);f===void 0&&(f=Gt(),this.qr.set(t,f)),this.qr.set(t,f.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6{constructor(){this.sessionToken=Yr.EMPTY_BYTE_STRING}getSessionToken(e){return Ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(){this.Qr=new Rr(Pr.$r),this.Ur=new Rr(Pr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Pr(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Pr(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new nt(new Nn([])),s=new Pr(t,e),c=new Pr(t,e+1),f=[];return this.Ur.forEachInRange([s,c],(p=>{this.Gr(p),f.push(p.key)})),f}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new nt(new Nn([])),s=new Pr(t,e),c=new Pr(t,e+1);let f=Gt();return this.Ur.forEachInRange([s,c],(p=>{f=f.add(p.key)})),f}containsKey(e){const t=new Pr(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Pr{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return nt.comparator(e.key,t.key)||zt(e.Yr,t.Yr)}static Kr(e,t){return zt(e.Yr,t.Yr)||nt.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Rr(Pr.$r)}checkEmpty(e){return Ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,c){const f=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const p=new kR(f,t,s,c);this.mutationQueue.push(p);for(const T of c)this.Zr=this.Zr.add(new Pr(T.key,f)),this.indexManager.addToCollectionParentIndex(e,T.key.path.popLast());return Ne.resolve(p)}lookupMutationBatch(e,t){return Ne.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,c=this.ei(s),f=c<0?0:c;return Ne.resolve(this.mutationQueue.length>f?this.mutationQueue[f]:null)}getHighestUnacknowledgedBatchId(){return Ne.resolve(this.mutationQueue.length===0?bm:this.tr-1)}getAllMutationBatches(e){return Ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Pr(t,0),c=new Pr(t,Number.POSITIVE_INFINITY),f=[];return this.Zr.forEachInRange([s,c],(p=>{const T=this.Xr(p.Yr);f.push(T)})),Ne.resolve(f)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Rr(zt);return t.forEach((c=>{const f=new Pr(c,0),p=new Pr(c,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([f,p],(T=>{s=s.add(T.Yr)}))})),Ne.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,c=s.length+1;let f=s;nt.isDocumentKey(f)||(f=f.child(""));const p=new Pr(new nt(f),0);let T=new Rr(zt);return this.Zr.forEachWhile((w=>{const E=w.key.path;return!!s.isPrefixOf(E)&&(E.length===c&&(T=T.add(w.Yr)),!0)}),p),Ne.resolve(this.ti(T))}ti(e){const t=[];return e.forEach((s=>{const c=this.Xr(s);c!==null&&t.push(c)})),t}removeMutationBatch(e,t){fn(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return Ne.forEach(t.mutations,(c=>{const f=new Pr(c.key,t.batchId);return s=s.delete(f),this.referenceDelegate.markPotentiallyOrphaned(e,c.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Pr(t,0),c=this.Zr.firstAfterOrEqual(s);return Ne.resolve(t.isEqual(c&&c.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ne.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(e){this.ri=e,this.docs=(function(){return new Wn(nt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,c=this.docs.get(s),f=c?c.size:0,p=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:p}),this.size+=p-f,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Ne.resolve(s?s.document.mutableCopy():oi.newInvalidDocument(t))}getEntries(e,t){let s=Fa();return t.forEach((c=>{const f=this.docs.get(c);s=s.insert(c,f?f.document.mutableCopy():oi.newInvalidDocument(c))})),Ne.resolve(s)}getDocumentsMatchingQuery(e,t,s,c){let f=Fa();const p=t.path,T=new nt(p.child("__id-9223372036854775808__")),w=this.docs.getIteratorFrom(T);for(;w.hasNext();){const{key:E,value:{document:C}}=w.getNext();if(!p.isPrefixOf(E.path))break;E.path.length>p.length+1||Z4(Q4(C),s)<=0||(c.has(C.key)||jd(t,C))&&(f=f.insert(C.key,C.mutableCopy()))}return Ne.resolve(f)}getAllFromCollectionGroup(e,t,s,c){ut(9500)}ii(e,t){return Ne.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new b6(this)}getSize(e){return Ne.resolve(this.size)}}class b6 extends m6{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,c)=>{c.isValidDocument()?t.push(this.Nr.addEntry(e,c)):this.Nr.removeEntry(s)})),Ne.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(e){this.persistence=e,this.si=new Rl((t=>Sm(t)),Cm),this.lastRemoteSnapshotVersion=gt.min(),this.highestTargetId=0,this.oi=0,this._i=new Dm,this.targetCount=0,this.ai=Cc.ur()}forEachTarget(e,t){return this.si.forEach(((s,c)=>t(c))),Ne.resolve()}getLastRemoteSnapshotVersion(e){return Ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ne.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),Ne.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Cc(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Ne.resolve()}updateTargetData(e,t){return this.Pr(t),Ne.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Ne.resolve()}removeTargets(e,t,s){let c=0;const f=[];return this.si.forEach(((p,T)=>{T.sequenceNumber<=t&&s.get(T.targetId)===null&&(this.si.delete(p),f.push(this.removeMatchingKeysForTargetId(e,T.targetId)),c++)})),Ne.waitFor(f).next((()=>c))}getTargetCount(e){return Ne.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return Ne.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),Ne.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const c=this.persistence.referenceDelegate,f=[];return c&&t.forEach((p=>{f.push(c.markPotentiallyOrphaned(e,p))})),Ne.waitFor(f)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Ne.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return Ne.resolve(s)}containsKey(e,t){return Ne.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(e,t){this.ui={},this.overlays={},this.ci=new Pd(0),this.li=!1,this.li=!0,this.hi=new _6,this.referenceDelegate=e(this),this.Pi=new T6(this),this.indexManager=new l6,this.remoteDocumentCache=(function(c){return new A6(c)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new a6(t),this.Ii=new y6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new E6,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new w6(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){qe("MemoryPersistence","Starting transaction:",e);const c=new v6(this.ci.next());return this.referenceDelegate.Ei(),s(c).next((f=>this.referenceDelegate.di(c).next((()=>f)))).toPromise().then((f=>(c.raiseOnCommittedEvent(),f)))}Ai(e,t){return Ne.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class v6 extends $4{constructor(e){super(),this.currentSequenceNumber=e}}class Mm{constructor(e){this.persistence=e,this.Ri=new Dm,this.Vi=null}static mi(e){return new Mm(e)}get fi(){if(this.Vi)return this.Vi;throw ut(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),Ne.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),Ne.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Ne.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((c=>this.fi.add(c.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((c=>{c.forEach((f=>this.fi.add(f.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ne.forEach(this.fi,(s=>{const c=nt.fromPath(s);return this.gi(e,c).next((f=>{f||t.removeEntry(c,gt.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return Ne.or([()=>Ne.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class dd{constructor(e,t){this.persistence=e,this.pi=new Rl((s=>nR(s.path)),((s,c)=>s.isEqual(c))),this.garbageCollector=g6(this,t)}static mi(e,t){return new dd(e,t)}Ei(){}di(e){return Ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((c=>s+c))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return Ne.forEach(this.pi,((s,c)=>this.br(e,s,c).next((f=>f?Ne.resolve():t(c)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const c=this.persistence.getRemoteDocumentCache(),f=c.newChangeBuffer();return c.ii(e,(p=>this.br(e,p,t).next((T=>{T||(s++,f.removeEntry(p,gt.min()))})))).next((()=>f.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Ne.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),Ne.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),Ne.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Ne.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Hf(e.data.value)),t}br(e,t,s){return Ne.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const c=this.pi.get(t);return Ne.resolve(c!==void 0&&c>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e,t,s,c){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=c}static As(e,t){let s=Gt(),c=Gt();for(const f of t.docChanges)switch(f.type){case 0:s=s.add(f.doc.key);break;case 1:c=c.add(f.doc.key)}return new Lm(e,t.fromCache,s,c)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return _N()?8:eR(li())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,c){const f={result:null};return this.ys(e,t).next((p=>{f.result=p})).next((()=>{if(!f.result)return this.ws(e,t,c,s).next((p=>{f.result=p}))})).next((()=>{if(f.result)return;const p=new S6;return this.Ss(e,t,p).next((T=>{if(f.result=T,this.Vs)return this.bs(e,t,p,T.size)}))})).next((()=>f.result))}bs(e,t,s,c){return s.documentReadCount<this.fs?(lc()<=Ht.DEBUG&&qe("QueryEngine","SDK will not create cache indexes for query:",cc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ne.resolve()):(lc()<=Ht.DEBUG&&qe("QueryEngine","Query:",cc(t),"scans",s.documentReadCount,"local documents and returns",c,"documents as results."),s.documentReadCount>this.gs*c?(lc()<=Ht.DEBUG&&qe("QueryEngine","The SDK decides to create cache indexes for query:",cc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ys(t))):Ne.resolve())}ys(e,t){if(xE(t))return Ne.resolve(null);let s=Ys(t);return this.indexManager.getIndexType(e,s).next((c=>c===0?null:(t.limit!==null&&c===1&&(t=cd(t,null,"F"),s=Ys(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((f=>{const p=Gt(...f);return this.ps.getDocuments(e,p).next((T=>this.indexManager.getMinOffset(e,s).next((w=>{const E=this.Ds(t,T);return this.Cs(t,E,p,w.readTime)?this.ys(e,cd(t,null,"F")):this.vs(e,E,t,w)}))))})))))}ws(e,t,s,c){return xE(t)||c.isEqual(gt.min())?Ne.resolve(null):this.ps.getDocuments(e,s).next((f=>{const p=this.Ds(t,f);return this.Cs(t,p,s,c)?Ne.resolve(null):(lc()<=Ht.DEBUG&&qe("QueryEngine","Re-using previous result from %s to execute query: %s",c.toString(),cc(t)),this.vs(e,p,t,K4(c,Yu)).next((T=>T)))}))}Ds(e,t){let s=new Rr(eb(e));return t.forEach(((c,f)=>{jd(e,f)&&(s=s.add(f))})),s}Cs(e,t,s,c){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const f=e.limitType==="F"?t.last():t.first();return!!f&&(f.hasPendingWrites||f.version.compareTo(c)>0)}Ss(e,t,s){return lc()<=Ht.DEBUG&&qe("QueryEngine","Using full collection scan to execute query:",cc(t)),this.ps.getDocumentsMatchingQuery(e,t,Vo.min(),s)}vs(e,t,s,c){return this.ps.getDocumentsMatchingQuery(e,s,c).next((f=>(t.forEach((p=>{f=f.insert(p.key,p)})),f)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm="LocalStore",I6=3e8;class N6{constructor(e,t,s,c){this.persistence=e,this.Fs=t,this.serializer=c,this.Ms=new Wn(zt),this.xs=new Rl((f=>Sm(f)),Cm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new x6(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function R6(n,e,t,s){return new N6(n,e,t,s)}async function bb(n,e){const t=_t(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let c;return t.mutationQueue.getAllMutationBatches(s).next((f=>(c=f,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((f=>{const p=[],T=[];let w=Gt();for(const E of c){p.push(E.batchId);for(const C of E.mutations)w=w.add(C.key)}for(const E of f){T.push(E.batchId);for(const C of E.mutations)w=w.add(C.key)}return t.localDocuments.getDocuments(s,w).next((E=>({Ls:E,removedBatchIds:p,addedBatchIds:T})))}))}))}function O6(n,e){const t=_t(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const c=e.batch.keys(),f=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(T,w,E,C){const I=E.batch,M=I.keys();let B=Ne.resolve();return M.forEach((W=>{B=B.next((()=>C.getEntry(w,W))).next(($=>{const q=E.docVersions.get(W);fn(q!==null,48541),$.version.compareTo(q)<0&&(I.applyToRemoteDocument($,E),$.isValidDocument()&&($.setReadTime(E.commitVersion),C.addEntry($)))}))})),B.next((()=>T.mutationQueue.removeMutationBatch(w,I)))})(t,s,e,f).next((()=>f.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,c,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(T){let w=Gt();for(let E=0;E<T.mutationResults.length;++E)T.mutationResults[E].transformResults.length>0&&(w=w.add(T.batch.mutations[E].key));return w})(e)))).next((()=>t.localDocuments.getDocuments(s,c)))}))}function Tb(n){const e=_t(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function D6(n,e){const t=_t(n),s=e.snapshotVersion;let c=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(f=>{const p=t.Ns.newChangeBuffer({trackRemovals:!0});c=t.Ms;const T=[];e.targetChanges.forEach(((C,I)=>{const M=c.get(I);if(!M)return;T.push(t.Pi.removeMatchingKeys(f,C.removedDocuments,I).next((()=>t.Pi.addMatchingKeys(f,C.addedDocuments,I))));let B=M.withSequenceNumber(f.currentSequenceNumber);e.targetMismatches.get(I)!==null?B=B.withResumeToken(Yr.EMPTY_BYTE_STRING,gt.min()).withLastLimboFreeSnapshotVersion(gt.min()):C.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(C.resumeToken,s)),c=c.insert(I,B),(function($,q,_e){return $.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=I6?!0:_e.addedDocuments.size+_e.modifiedDocuments.size+_e.removedDocuments.size>0})(M,B,C)&&T.push(t.Pi.updateTargetData(f,B))}));let w=Fa(),E=Gt();if(e.documentUpdates.forEach((C=>{e.resolvedLimboDocuments.has(C)&&T.push(t.persistence.referenceDelegate.updateLimboDocument(f,C))})),T.push(M6(f,p,e.documentUpdates).next((C=>{w=C.ks,E=C.qs}))),!s.isEqual(gt.min())){const C=t.Pi.getLastRemoteSnapshotVersion(f).next((I=>t.Pi.setTargetsMetadata(f,f.currentSequenceNumber,s)));T.push(C)}return Ne.waitFor(T).next((()=>p.apply(f))).next((()=>t.localDocuments.getLocalViewOfDocuments(f,w,E))).next((()=>w))})).then((f=>(t.Ms=c,f)))}function M6(n,e,t){let s=Gt(),c=Gt();return t.forEach((f=>s=s.add(f))),e.getEntries(n,s).next((f=>{let p=Fa();return t.forEach(((T,w)=>{const E=f.get(T);w.isFoundDocument()!==E.isFoundDocument()&&(c=c.add(T)),w.isNoDocument()&&w.version.isEqual(gt.min())?(e.removeEntry(T,w.readTime),p=p.insert(T,w)):!E.isValidDocument()||w.version.compareTo(E.version)>0||w.version.compareTo(E.version)===0&&E.hasPendingWrites?(e.addEntry(w),p=p.insert(T,w)):qe(Pm,"Ignoring outdated watch update for ",T,". Current version:",E.version," Watch version:",w.version)})),{ks:p,qs:c}}))}function L6(n,e){const t=_t(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=bm),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function P6(n,e){const t=_t(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let c;return t.Pi.getTargetData(s,e).next((f=>f?(c=f,Ne.resolve(c)):t.Pi.allocateTargetId(s).next((p=>(c=new Oo(e,p,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,c).next((()=>c)))))))})).then((s=>{const c=t.Ms.get(s.targetId);return(c===null||s.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function qg(n,e,t){const s=_t(n),c=s.Ms.get(e),f=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",f,(p=>s.persistence.referenceDelegate.removeTarget(p,c)))}catch(p){if(!Bc(p))throw p;qe(Pm,`Failed to update sequence numbers for target ${e}: ${p}`)}s.Ms=s.Ms.remove(e),s.xs.delete(c.target)}function RE(n,e,t){const s=_t(n);let c=gt.min(),f=Gt();return s.persistence.runTransaction("Execute query","readwrite",(p=>(function(w,E,C){const I=_t(w),M=I.xs.get(C);return M!==void 0?Ne.resolve(I.Ms.get(M)):I.Pi.getTargetData(E,C)})(s,p,Ys(e)).next((T=>{if(T)return c=T.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(p,T.targetId).next((w=>{f=w}))})).next((()=>s.Fs.getDocumentsMatchingQuery(p,e,t?c:gt.min(),t?f:Gt()))).next((T=>(k6(s,wR(e),T),{documents:T,Qs:f})))))}function k6(n,e,t){let s=n.Os.get(e)||gt.min();t.forEach(((c,f)=>{f.readTime.compareTo(s)>0&&(s=f.readTime)})),n.Os.set(e,s)}class OE{constructor(){this.activeTargetIds=CR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class B6{constructor(){this.Mo=new OE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new OE,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE="ConnectivityMonitor";class ME{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){qe(DE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){qe(DE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rf=null;function Yg(){return Rf===null?Rf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Rf++,"0x"+Rf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg="RestConnection",V6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class j6{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${c}`,this.Wo=this.databaseId.database===sd?`project_id=${s}`:`project_id=${s}&database_id=${c}`}Go(e,t,s,c,f){const p=Yg(),T=this.zo(e,t.toUriEncodedString());qe(hg,`Sending RPC '${e}' ${p}:`,T,s);const w={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(w,c,f);const{host:E}=new URL(T),C=Mc(E);return this.Jo(e,T,w,s,C).then((I=>(qe(hg,`Received RPC '${e}' ${p}: `,I),I)),(I=>{throw bc(hg,`RPC '${e}' ${p} failed with error: `,I,"url: ",T,"request:",s),I}))}Ho(e,t,s,c,f,p){return this.Go(e,t,s,c,f)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Pc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((c,f)=>e[f]=c)),s&&s.headers.forEach(((c,f)=>e[f]=c))}zo(e,t){const s=V6[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const si="WebChannelConnection";class H6 extends j6{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,c,f){const p=Yg();return new Promise(((T,w)=>{const E=new CA;E.setWithCredentials(!0),E.listenOnce(IA.COMPLETE,(()=>{try{switch(E.getLastErrorCode()){case Ff.NO_ERROR:const I=E.getResponseJson();qe(si,`XHR for RPC '${e}' ${p} received:`,JSON.stringify(I)),T(I);break;case Ff.TIMEOUT:qe(si,`RPC '${e}' ${p} timed out`),w(new ze(Se.DEADLINE_EXCEEDED,"Request time out"));break;case Ff.HTTP_ERROR:const M=E.getStatus();if(qe(si,`RPC '${e}' ${p} failed with status:`,M,"response text:",E.getResponseText()),M>0){let B=E.getResponseJson();Array.isArray(B)&&(B=B[0]);const W=B==null?void 0:B.error;if(W&&W.status&&W.message){const $=(function(_e){const ae=_e.toLowerCase().replace(/_/g,"-");return Object.values(Se).indexOf(ae)>=0?ae:Se.UNKNOWN})(W.status);w(new ze($,W.message))}else w(new ze(Se.UNKNOWN,"Server responded with status "+E.getStatus()))}else w(new ze(Se.UNAVAILABLE,"Connection failed."));break;default:ut(9055,{l_:e,streamId:p,h_:E.getLastErrorCode(),P_:E.getLastError()})}}finally{qe(si,`RPC '${e}' ${p} completed.`)}}));const C=JSON.stringify(c);qe(si,`RPC '${e}' ${p} sending request:`,c),E.send(t,"POST",C,s,15)}))}T_(e,t,s){const c=Yg(),f=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],p=OA(),T=RA(),w={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},E=this.longPollingOptions.timeoutSeconds;E!==void 0&&(w.longPollingTimeout=Math.round(1e3*E)),this.useFetchStreams&&(w.useFetchStreams=!0),this.jo(w.initMessageHeaders,t,s),w.encodeInitMessageHeaders=!0;const C=f.join("");qe(si,`Creating RPC '${e}' stream ${c}: ${C}`,w);const I=p.createWebChannel(C,w);this.I_(I);let M=!1,B=!1;const W=new F6({Yo:q=>{B?qe(si,`Not sending because RPC '${e}' stream ${c} is closed:`,q):(M||(qe(si,`Opening RPC '${e}' stream ${c} transport.`),I.open(),M=!0),qe(si,`RPC '${e}' stream ${c} sending:`,q),I.send(q))},Zo:()=>I.close()}),$=(q,_e,ae)=>{q.listen(_e,(Q=>{try{ae(Q)}catch(le){setTimeout((()=>{throw le}),0)}}))};return $(I,Cu.EventType.OPEN,(()=>{B||(qe(si,`RPC '${e}' stream ${c} transport opened.`),W.o_())})),$(I,Cu.EventType.CLOSE,(()=>{B||(B=!0,qe(si,`RPC '${e}' stream ${c} transport closed`),W.a_(),this.E_(I))})),$(I,Cu.EventType.ERROR,(q=>{B||(B=!0,bc(si,`RPC '${e}' stream ${c} transport errored. Name:`,q.name,"Message:",q.message),W.a_(new ze(Se.UNAVAILABLE,"The operation could not be completed")))})),$(I,Cu.EventType.MESSAGE,(q=>{var _e;if(!B){const ae=q.data[0];fn(!!ae,16349);const Q=ae,le=(Q==null?void 0:Q.error)||((_e=Q[0])==null?void 0:_e.error);if(le){qe(si,`RPC '${e}' stream ${c} received error:`,le);const De=le.status;let Oe=(function(V){const Y=Er[V];if(Y!==void 0)return hb(Y)})(De),j=le.message;Oe===void 0&&(Oe=Se.INTERNAL,j="Unknown error status: "+De+" with message "+le.message),B=!0,W.a_(new ze(Oe,j)),I.close()}else qe(si,`RPC '${e}' stream ${c} received:`,ae),W.u_(ae)}})),$(T,NA.STAT_EVENT,(q=>{q.stat===Lg.PROXY?qe(si,`RPC '${e}' stream ${c} detected buffering proxy`):q.stat===Lg.NOPROXY&&qe(si,`RPC '${e}' stream ${c} detected no buffering proxy`)})),setTimeout((()=>{W.__()}),0),W}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function fg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(n){return new YR(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(e,t,s=1e3,c=1.5,f=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=c,this.R_=f,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),c=Math.max(0,t-s);c>0&&qe("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,c,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE="PersistentStream";class Sb{constructor(e,t,s,c,f,p,T,w){this.Mi=e,this.S_=s,this.b_=c,this.connection=f,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=T,this.listener=w,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new vb(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Se.RESOURCE_EXHAUSTED?(ja(t.toString()),ja("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,c])=>{this.D_===t&&this.G_(s,c)}),(s=>{e((()=>{const c=new ze(Se.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(c)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((c=>{s((()=>this.z_(c)))})),this.stream.onMessage((c=>{s((()=>++this.F_==1?this.J_(c):this.onNext(c)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return qe(LE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(qe(LE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class z6 extends Sb{constructor(e,t,s,c,f,p){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,c,p),this.serializer=f}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=KR(this.serializer,e),s=(function(f){if(!("targetChange"in f))return gt.min();const p=f.targetChange;return p.targetIds&&p.targetIds.length?gt.min():p.readTime?Xs(p.readTime):gt.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Gg(this.serializer),t.addTarget=(function(f,p){let T;const w=p.target;if(T=Vg(w)?{documents:JR(f,w)}:{query:$R(f,w).ft},T.targetId=p.targetId,p.resumeToken.approximateByteSize()>0){T.resumeToken=gb(f,p.resumeToken);const E=Fg(f,p.expectedCount);E!==null&&(T.expectedCount=E)}else if(p.snapshotVersion.compareTo(gt.min())>0){T.readTime=fd(f,p.snapshotVersion.toTimestamp());const E=Fg(f,p.expectedCount);E!==null&&(T.expectedCount=E)}return T})(this.serializer,e);const s=t6(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Gg(this.serializer),t.removeTarget=e,this.q_(t)}}class G6 extends Sb{constructor(e,t,s,c,f,p){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,c,p),this.serializer=f}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return fn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,fn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){fn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=ZR(e.writeResults,e.commitTime),s=Xs(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Gg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>QR(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{}class Y6 extends q6{constructor(e,t,s,c){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=c,this.ia=!1}sa(){if(this.ia)throw new ze(Se.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,p])=>this.connection.Go(e,Hg(t,s),c,f,p))).catch((f=>{throw f.name==="FirebaseError"?(f.code===Se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new ze(Se.UNKNOWN,f.toString())}))}Ho(e,t,s,c,f){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([p,T])=>this.connection.Ho(e,Hg(t,s),c,p,T,f))).catch((p=>{throw p.name==="FirebaseError"?(p.code===Se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new ze(Se.UNKNOWN,p.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class X6{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ja(t),this.aa=!1):qe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sl="RemoteStore";class W6{constructor(e,t,s,c,f){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=f,this.Aa.Oo((p=>{s.enqueueAndForget((async()=>{Ol(this)&&(qe(Sl,"Restarting streams for network reachability change."),await(async function(w){const E=_t(w);E.Ea.add(4),await lh(E),E.Ra.set("Unknown"),E.Ea.delete(4),await Yd(E)})(this))}))})),this.Ra=new X6(s,c)}}async function Yd(n){if(Ol(n))for(const e of n.da)await e(!0)}async function lh(n){for(const e of n.da)await e(!1)}function Cb(n,e){const t=_t(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Vm(t)?Um(t):Uc(t).O_()&&Bm(t,e))}function km(n,e){const t=_t(n),s=Uc(t);t.Ia.delete(e),s.O_()&&Ib(t,e),t.Ia.size===0&&(s.O_()?s.L_():Ol(t)&&t.Ra.set("Unknown"))}function Bm(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(gt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Uc(n).Y_(e)}function Ib(n,e){n.Va.Ue(e),Uc(n).Z_(e)}function Um(n){n.Va=new HR({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Uc(n).start(),n.Ra.ua()}function Vm(n){return Ol(n)&&!Uc(n).x_()&&n.Ia.size>0}function Ol(n){return _t(n).Ea.size===0}function Nb(n){n.Va=void 0}async function K6(n){n.Ra.set("Online")}async function Q6(n){n.Ia.forEach(((e,t)=>{Bm(n,e)}))}async function Z6(n,e){Nb(n),Vm(n)?(n.Ra.ha(e),Um(n)):n.Ra.set("Unknown")}async function J6(n,e,t){if(n.Ra.set("Online"),e instanceof db&&e.state===2&&e.cause)try{await(async function(c,f){const p=f.cause;for(const T of f.targetIds)c.Ia.has(T)&&(await c.remoteSyncer.rejectListen(T,p),c.Ia.delete(T),c.Va.removeTarget(T))})(n,e)}catch(s){qe(Sl,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await gd(n,s)}else if(e instanceof qf?n.Va.Ze(e):e instanceof fb?n.Va.st(e):n.Va.tt(e),!t.isEqual(gt.min()))try{const s=await Tb(n.localStore);t.compareTo(s)>=0&&await(function(f,p){const T=f.Va.Tt(p);return T.targetChanges.forEach(((w,E)=>{if(w.resumeToken.approximateByteSize()>0){const C=f.Ia.get(E);C&&f.Ia.set(E,C.withResumeToken(w.resumeToken,p))}})),T.targetMismatches.forEach(((w,E)=>{const C=f.Ia.get(w);if(!C)return;f.Ia.set(w,C.withResumeToken(Yr.EMPTY_BYTE_STRING,C.snapshotVersion)),Ib(f,w);const I=new Oo(C.target,w,E,C.sequenceNumber);Bm(f,I)})),f.remoteSyncer.applyRemoteEvent(T)})(n,t)}catch(s){qe(Sl,"Failed to raise snapshot:",s),await gd(n,s)}}async function gd(n,e,t){if(!Bc(e))throw e;n.Ea.add(1),await lh(n),n.Ra.set("Offline"),t||(t=()=>Tb(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{qe(Sl,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Yd(n)}))}function Rb(n,e){return e().catch((t=>gd(n,t,e)))}async function Xd(n){const e=_t(n),t=zo(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:bm;for(;$6(e);)try{const c=await L6(e.localStore,s);if(c===null){e.Ta.length===0&&t.L_();break}s=c.batchId,e8(e,c)}catch(c){await gd(e,c)}Ob(e)&&Db(e)}function $6(n){return Ol(n)&&n.Ta.length<10}function e8(n,e){n.Ta.push(e);const t=zo(n);t.O_()&&t.X_&&t.ea(e.mutations)}function Ob(n){return Ol(n)&&!zo(n).x_()&&n.Ta.length>0}function Db(n){zo(n).start()}async function t8(n){zo(n).ra()}async function n8(n){const e=zo(n);for(const t of n.Ta)e.ea(t.mutations)}async function r8(n,e,t){const s=n.Ta.shift(),c=Nm.from(s,e,t);await Rb(n,(()=>n.remoteSyncer.applySuccessfulWrite(c))),await Xd(n)}async function i8(n,e){e&&zo(n).X_&&await(async function(s,c){if((function(p){return VR(p)&&p!==Se.ABORTED})(c.code)){const f=s.Ta.shift();zo(s).B_(),await Rb(s,(()=>s.remoteSyncer.rejectFailedWrite(f.batchId,c))),await Xd(s)}})(n,e),Ob(n)&&Db(n)}async function PE(n,e){const t=_t(n);t.asyncQueue.verifyOperationInProgress(),qe(Sl,"RemoteStore received new credentials");const s=Ol(t);t.Ea.add(3),await lh(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Yd(t)}async function s8(n,e){const t=_t(n);e?(t.Ea.delete(2),await Yd(t)):e||(t.Ea.add(2),await lh(t),t.Ra.set("Unknown"))}function Uc(n){return n.ma||(n.ma=(function(t,s,c){const f=_t(t);return f.sa(),new z6(s,f.connection,f.authCredentials,f.appCheckCredentials,f.serializer,c)})(n.datastore,n.asyncQueue,{Xo:K6.bind(null,n),t_:Q6.bind(null,n),r_:Z6.bind(null,n),H_:J6.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Vm(n)?Um(n):n.Ra.set("Unknown")):(await n.ma.stop(),Nb(n))}))),n.ma}function zo(n){return n.fa||(n.fa=(function(t,s,c){const f=_t(t);return f.sa(),new G6(s,f.connection,f.authCredentials,f.appCheckCredentials,f.serializer,c)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:t8.bind(null,n),r_:i8.bind(null,n),ta:n8.bind(null,n),na:r8.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Xd(n)):(await n.fa.stop(),n.Ta.length>0&&(qe(Sl,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e,t,s,c,f){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=c,this.removalCallback=f,this.deferred=new Ba,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((p=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,c,f){const p=Date.now()+s,T=new jm(e,t,p,c,f);return T.start(s),T}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ze(Se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fm(n,e){if(ja("AsyncQueue",`${e}: ${n}`),Bc(n))return new ze(Se.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{static emptySet(e){return new xc(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||nt.comparator(t.key,s.key):(t,s)=>nt.comparator(t.key,s.key),this.keyedMap=Iu(),this.sortedSet=new Wn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof xc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const c=t.getNext().key,f=s.getNext().key;if(!c.isEqual(f))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new xc;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(){this.ga=new Wn(nt.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ut(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Ic{constructor(e,t,s,c,f,p,T,w,E){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=c,this.mutatedKeys=f,this.fromCache=p,this.syncStateChanged=T,this.excludesMetadataChanges=w,this.hasCachedResults=E}static fromInitialDocuments(e,t,s,c,f){const p=[];return t.forEach((T=>{p.push({type:0,doc:T})})),new Ic(e,t,xc.emptySet(t),p,s,c,!0,!1,f)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let c=0;c<t.length;c++)if(t[c].type!==s[c].type||!t[c].doc.isEqual(s[c].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a8{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class o8{constructor(){this.queries=BE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const c=_t(t),f=c.queries;c.queries=BE(),f.forEach(((p,T)=>{for(const w of T.Sa)w.onError(s)}))})(this,new ze(Se.ABORTED,"Firestore shutting down"))}}function BE(){return new Rl((n=>$A(n)),Vd)}async function Hm(n,e){const t=_t(n);let s=3;const c=e.query;let f=t.queries.get(c);f?!f.ba()&&e.Da()&&(s=2):(f=new a8,s=e.Da()?0:1);try{switch(s){case 0:f.wa=await t.onListen(c,!0);break;case 1:f.wa=await t.onListen(c,!1);break;case 2:await t.onFirstRemoteStoreListen(c)}}catch(p){const T=Fm(p,`Initialization of query '${cc(e.query)}' failed`);return void e.onError(T)}t.queries.set(c,f),f.Sa.push(e),e.va(t.onlineState),f.wa&&e.Fa(f.wa)&&Gm(t)}async function zm(n,e){const t=_t(n),s=e.query;let c=3;const f=t.queries.get(s);if(f){const p=f.Sa.indexOf(e);p>=0&&(f.Sa.splice(p,1),f.Sa.length===0?c=e.Da()?0:1:!f.ba()&&e.Da()&&(c=2))}switch(c){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function l8(n,e){const t=_t(n);let s=!1;for(const c of e){const f=c.query,p=t.queries.get(f);if(p){for(const T of p.Sa)T.Fa(c)&&(s=!0);p.wa=c}}s&&Gm(t)}function c8(n,e,t){const s=_t(n),c=s.queries.get(e);if(c)for(const f of c.Sa)f.onError(t);s.queries.delete(e)}function Gm(n){n.Ca.forEach((e=>{e.next()}))}var Xg,UE;(UE=Xg||(Xg={})).Ma="default",UE.Cache="cache";class qm{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const c of e.docChanges)c.type!==3&&s.push(c);e=new Ic(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ic.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Xg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(e){this.key=e}}class Lb{constructor(e){this.key=e}}class u8{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Gt(),this.mutatedKeys=Gt(),this.eu=eb(e),this.tu=new xc(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new kE,c=t?t.tu:this.tu;let f=t?t.mutatedKeys:this.mutatedKeys,p=c,T=!1;const w=this.query.limitType==="F"&&c.size===this.query.limit?c.last():null,E=this.query.limitType==="L"&&c.size===this.query.limit?c.first():null;if(e.inorderTraversal(((C,I)=>{const M=c.get(C),B=jd(this.query,I)?I:null,W=!!M&&this.mutatedKeys.has(M.key),$=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let q=!1;M&&B?M.data.isEqual(B.data)?W!==$&&(s.track({type:3,doc:B}),q=!0):this.su(M,B)||(s.track({type:2,doc:B}),q=!0,(w&&this.eu(B,w)>0||E&&this.eu(B,E)<0)&&(T=!0)):!M&&B?(s.track({type:0,doc:B}),q=!0):M&&!B&&(s.track({type:1,doc:M}),q=!0,(w||E)&&(T=!0)),q&&(B?(p=p.add(B),f=$?f.add(C):f.delete(C)):(p=p.delete(C),f=f.delete(C)))})),this.query.limit!==null)for(;p.size>this.query.limit;){const C=this.query.limitType==="F"?p.last():p.first();p=p.delete(C.key),f=f.delete(C.key),s.track({type:1,doc:C})}return{tu:p,iu:s,Cs:T,mutatedKeys:f}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,c){const f=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const p=e.iu.ya();p.sort(((C,I)=>(function(B,W){const $=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ut(20277,{Rt:q})}};return $(B)-$(W)})(C.type,I.type)||this.eu(C.doc,I.doc))),this.ou(s),c=c??!1;const T=t&&!c?this._u():[],w=this.Xa.size===0&&this.current&&!c?1:0,E=w!==this.Za;return this.Za=w,p.length!==0||E?{snapshot:new Ic(this.query,e.tu,f,p,e.mutatedKeys,w===0,E,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:T}:{au:T}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new kE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Gt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new Lb(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new Mb(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=Gt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ic.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ym="SyncEngine";class h8{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class f8{constructor(e){this.key=e,this.hu=!1}}class d8{constructor(e,t,s,c,f,p){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=c,this.currentUser=f,this.maxConcurrentLimboResolutions=p,this.Pu={},this.Tu=new Rl((T=>$A(T)),Vd),this.Iu=new Map,this.Eu=new Set,this.du=new Wn(nt.comparator),this.Au=new Map,this.Ru=new Dm,this.Vu={},this.mu=new Map,this.fu=Cc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function g8(n,e,t=!0){const s=jb(n);let c;const f=s.Tu.get(e);return f?(s.sharedClientState.addLocalQueryTarget(f.targetId),c=f.view.lu()):c=await Pb(s,e,t,!0),c}async function m8(n,e){const t=jb(n);await Pb(t,e,!0,!1)}async function Pb(n,e,t,s){const c=await P6(n.localStore,Ys(e)),f=c.targetId,p=n.sharedClientState.addLocalQueryTarget(f,t);let T;return s&&(T=await p8(n,e,f,p==="current",c.resumeToken)),n.isPrimaryClient&&t&&Cb(n.remoteStore,c),T}async function p8(n,e,t,s,c){n.pu=(I,M,B)=>(async function($,q,_e,ae){let Q=q.view.ru(_e);Q.Cs&&(Q=await RE($.localStore,q.query,!1).then((({documents:j})=>q.view.ru(j,Q))));const le=ae&&ae.targetChanges.get(q.targetId),De=ae&&ae.targetMismatches.get(q.targetId)!=null,Oe=q.view.applyChanges(Q,$.isPrimaryClient,le,De);return jE($,q.targetId,Oe.au),Oe.snapshot})(n,I,M,B);const f=await RE(n.localStore,e,!0),p=new u8(e,f.Qs),T=p.ru(f.documents),w=oh.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",c),E=p.applyChanges(T,n.isPrimaryClient,w);jE(n,t,E.au);const C=new h8(e,t,p);return n.Tu.set(e,C),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),E.snapshot}async function x8(n,e,t){const s=_t(n),c=s.Tu.get(e),f=s.Iu.get(c.targetId);if(f.length>1)return s.Iu.set(c.targetId,f.filter((p=>!Vd(p,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(c.targetId),s.sharedClientState.isActiveQueryTarget(c.targetId)||await qg(s.localStore,c.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(c.targetId),t&&km(s.remoteStore,c.targetId),Wg(s,c.targetId)})).catch(kc)):(Wg(s,c.targetId),await qg(s.localStore,c.targetId,!0))}async function y8(n,e){const t=_t(n),s=t.Tu.get(e),c=t.Iu.get(s.targetId);t.isPrimaryClient&&c.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),km(t.remoteStore,s.targetId))}async function E8(n,e,t){const s=S8(n);try{const c=await(function(p,T){const w=_t(p),E=Ln.now(),C=T.reduce(((B,W)=>B.add(W.key)),Gt());let I,M;return w.persistence.runTransaction("Locally write mutations","readwrite",(B=>{let W=Fa(),$=Gt();return w.Ns.getEntries(B,C).next((q=>{W=q,W.forEach(((_e,ae)=>{ae.isValidDocument()||($=$.add(_e))}))})).next((()=>w.localDocuments.getOverlayedDocuments(B,W))).next((q=>{I=q;const _e=[];for(const ae of T){const Q=LR(ae,I.get(ae.key).overlayedDocument);Q!=null&&_e.push(new Xo(ae.key,Q,qA(Q.value.mapValue),Pi.exists(!0)))}return w.mutationQueue.addMutationBatch(B,E,_e,T)})).next((q=>{M=q;const _e=q.applyToLocalDocumentSet(I,$);return w.documentOverlayCache.saveOverlays(B,q.batchId,_e)}))})).then((()=>({batchId:M.batchId,changes:nb(I)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(c.batchId),(function(p,T,w){let E=p.Vu[p.currentUser.toKey()];E||(E=new Wn(zt)),E=E.insert(T,w),p.Vu[p.currentUser.toKey()]=E})(s,c.batchId,t),await ch(s,c.changes),await Xd(s.remoteStore)}catch(c){const f=Fm(c,"Failed to persist write");t.reject(f)}}async function kb(n,e){const t=_t(n);try{const s=await D6(t.localStore,e);e.targetChanges.forEach(((c,f)=>{const p=t.Au.get(f);p&&(fn(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1,22616),c.addedDocuments.size>0?p.hu=!0:c.modifiedDocuments.size>0?fn(p.hu,14607):c.removedDocuments.size>0&&(fn(p.hu,42227),p.hu=!1))})),await ch(t,s,e)}catch(s){await kc(s)}}function VE(n,e,t){const s=_t(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const c=[];s.Tu.forEach(((f,p)=>{const T=p.view.va(e);T.snapshot&&c.push(T.snapshot)})),(function(p,T){const w=_t(p);w.onlineState=T;let E=!1;w.queries.forEach(((C,I)=>{for(const M of I.Sa)M.va(T)&&(E=!0)})),E&&Gm(w)})(s.eventManager,e),c.length&&s.Pu.H_(c),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function _8(n,e,t){const s=_t(n);s.sharedClientState.updateQueryState(e,"rejected",t);const c=s.Au.get(e),f=c&&c.key;if(f){let p=new Wn(nt.comparator);p=p.insert(f,oi.newNoDocument(f,gt.min()));const T=Gt().add(f),w=new Gd(gt.min(),new Map,new Wn(zt),p,T);await kb(s,w),s.du=s.du.remove(f),s.Au.delete(e),Xm(s)}else await qg(s.localStore,e,!1).then((()=>Wg(s,e,t))).catch(kc)}async function w8(n,e){const t=_t(n),s=e.batch.batchId;try{const c=await O6(t.localStore,e);Ub(t,s,null),Bb(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await ch(t,c)}catch(c){await kc(c)}}async function A8(n,e,t){const s=_t(n);try{const c=await(function(p,T){const w=_t(p);return w.persistence.runTransaction("Reject batch","readwrite-primary",(E=>{let C;return w.mutationQueue.lookupMutationBatch(E,T).next((I=>(fn(I!==null,37113),C=I.keys(),w.mutationQueue.removeMutationBatch(E,I)))).next((()=>w.mutationQueue.performConsistencyCheck(E))).next((()=>w.documentOverlayCache.removeOverlaysForBatchId(E,C,T))).next((()=>w.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(E,C))).next((()=>w.localDocuments.getDocuments(E,C)))}))})(s.localStore,e);Ub(s,e,t),Bb(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await ch(s,c)}catch(c){await kc(c)}}function Bb(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Ub(n,e,t){const s=_t(n);let c=s.Vu[s.currentUser.toKey()];if(c){const f=c.get(e);f&&(t?f.reject(t):f.resolve(),c=c.remove(e)),s.Vu[s.currentUser.toKey()]=c}}function Wg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||Vb(n,s)}))}function Vb(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(km(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Xm(n))}function jE(n,e,t){for(const s of t)s instanceof Mb?(n.Ru.addReference(s.key,e),b8(n,s)):s instanceof Lb?(qe(Ym,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||Vb(n,s.key)):ut(19791,{wu:s})}function b8(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(qe(Ym,"New document in limbo: "+t),n.Eu.add(s),Xm(n))}function Xm(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new nt(Nn.fromString(e)),s=n.fu.next();n.Au.set(s,new f8(t)),n.du=n.du.insert(t,s),Cb(n.remoteStore,new Oo(Ys(Ud(t.path)),s,"TargetPurposeLimboResolution",Pd.ce))}}async function ch(n,e,t){const s=_t(n),c=[],f=[],p=[];s.Tu.isEmpty()||(s.Tu.forEach(((T,w)=>{p.push(s.pu(w,e,t).then((E=>{var C;if((E||t)&&s.isPrimaryClient){const I=E?!E.fromCache:(C=t==null?void 0:t.targetChanges.get(w.targetId))==null?void 0:C.current;s.sharedClientState.updateQueryState(w.targetId,I?"current":"not-current")}if(E){c.push(E);const I=Lm.As(w.targetId,E);f.push(I)}})))})),await Promise.all(p),s.Pu.H_(c),await(async function(w,E){const C=_t(w);try{await C.persistence.runTransaction("notifyLocalViewChanges","readwrite",(I=>Ne.forEach(E,(M=>Ne.forEach(M.Es,(B=>C.persistence.referenceDelegate.addReference(I,M.targetId,B))).next((()=>Ne.forEach(M.ds,(B=>C.persistence.referenceDelegate.removeReference(I,M.targetId,B)))))))))}catch(I){if(!Bc(I))throw I;qe(Pm,"Failed to update sequence numbers: "+I)}for(const I of E){const M=I.targetId;if(!I.fromCache){const B=C.Ms.get(M),W=B.snapshotVersion,$=B.withLastLimboFreeSnapshotVersion(W);C.Ms=C.Ms.insert(M,$)}}})(s.localStore,f))}async function T8(n,e){const t=_t(n);if(!t.currentUser.isEqual(e)){qe(Ym,"User change. New user:",e.toKey());const s=await bb(t.localStore,e);t.currentUser=e,(function(f,p){f.mu.forEach((T=>{T.forEach((w=>{w.reject(new ze(Se.CANCELLED,p))}))})),f.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await ch(t,s.Ls)}}function v8(n,e){const t=_t(n),s=t.Au.get(e);if(s&&s.hu)return Gt().add(s.key);{let c=Gt();const f=t.Iu.get(e);if(!f)return c;for(const p of f){const T=t.Tu.get(p);c=c.unionWith(T.view.nu)}return c}}function jb(n){const e=_t(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=kb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=v8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_8.bind(null,e),e.Pu.H_=l8.bind(null,e.eventManager),e.Pu.yu=c8.bind(null,e.eventManager),e}function S8(n){const e=_t(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=w8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=A8.bind(null,e),e}class md{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=qd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return R6(this.persistence,new C6,e.initialUser,this.serializer)}Cu(e){return new Ab(Mm.mi,this.serializer)}Du(e){return new B6}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}md.provider={build:()=>new md};class C8 extends md{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){fn(this.persistence.referenceDelegate instanceof dd,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new f6(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Di.withCacheSize(this.cacheSizeBytes):Di.DEFAULT;return new Ab((s=>dd.mi(s,t)),this.serializer)}}class Kg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>VE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=T8.bind(null,this.syncEngine),await s8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new o8})()}createDatastore(e){const t=qd(e.databaseInfo.databaseId),s=(function(f){return new H6(f)})(e.databaseInfo);return(function(f,p,T,w){return new Y6(f,p,T,w)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,c,f,p,T){return new W6(s,c,f,p,T)})(this.localStore,this.datastore,e.asyncQueue,(t=>VE(this.syncEngine,t,0)),(function(){return ME.v()?new ME:new U6})())}createSyncEngine(e,t){return(function(c,f,p,T,w,E,C){const I=new d8(c,f,p,T,w,E);return C&&(I.gu=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(c){const f=_t(c);qe(Sl,"RemoteStore shutting down."),f.Ea.add(5),await lh(f),f.Aa.shutdown(),f.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Kg.provider={build:()=>new Kg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ja("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go="FirestoreClient";class I8{constructor(e,t,s,c,f){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=c,this.user=ai.UNAUTHENTICATED,this.clientId=Am.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=f,this.authCredentials.start(s,(async p=>{qe(Go,"Received user=",p.uid),await this.authCredentialListener(p),this.user=p})),this.appCheckCredentials.start(s,(p=>(qe(Go,"Received new app check token=",p),this.appCheckCredentialListener(p,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ba;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Fm(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function dg(n,e){n.asyncQueue.verifyOperationInProgress(),qe(Go,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async c=>{s.isEqual(c)||(await bb(e.localStore,c),s=c)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function FE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await N8(n);qe(Go,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>PE(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,c)=>PE(e.remoteStore,c))),n._onlineComponents=e}async function N8(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){qe(Go,"Using user provided OfflineComponentProvider");try{await dg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(c){return c.name==="FirebaseError"?c.code===Se.FAILED_PRECONDITION||c.code===Se.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||c.code===22||c.code===20||c.code===11})(t))throw t;bc("Error using user provided cache. Falling back to memory cache: "+t),await dg(n,new md)}}else qe(Go,"Using default OfflineComponentProvider"),await dg(n,new C8(void 0));return n._offlineComponents}async function Fb(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(qe(Go,"Using user provided OnlineComponentProvider"),await FE(n,n._uninitializedComponentsProvider._online)):(qe(Go,"Using default OnlineComponentProvider"),await FE(n,new Kg))),n._onlineComponents}function R8(n){return Fb(n).then((e=>e.syncEngine))}async function pd(n){const e=await Fb(n),t=e.eventManager;return t.onListen=g8.bind(null,e.syncEngine),t.onUnlisten=x8.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=m8.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=y8.bind(null,e.syncEngine),t}function O8(n,e,t={}){const s=new Ba;return n.asyncQueue.enqueueAndForget((async()=>(function(f,p,T,w,E){const C=new Wm({next:M=>{C.Nu(),p.enqueueAndForget((()=>zm(f,I)));const B=M.docs.has(T);!B&&M.fromCache?E.reject(new ze(Se.UNAVAILABLE,"Failed to get document because the client is offline.")):B&&M.fromCache&&w&&w.source==="server"?E.reject(new ze(Se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(M)},error:M=>E.reject(M)}),I=new qm(Ud(T.path),C,{includeMetadataChanges:!0,qa:!0});return Hm(f,I)})(await pd(n),n.asyncQueue,e,t,s))),s.promise}function D8(n,e,t={}){const s=new Ba;return n.asyncQueue.enqueueAndForget((async()=>(function(f,p,T,w,E){const C=new Wm({next:M=>{C.Nu(),p.enqueueAndForget((()=>zm(f,I))),M.fromCache&&w.source==="server"?E.reject(new ze(Se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):E.resolve(M)},error:M=>E.reject(M)}),I=new qm(T,C,{includeMetadataChanges:!0,qa:!0});return Hm(f,I)})(await pd(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb="firestore.googleapis.com",zE=!0;class GE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ze(Se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=zb,this.ssl=zE}else this.host=e.host,this.ssl=e.ssl??zE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=wb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<u6)throw new ze(Se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}W4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Hb(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ze(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ze(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ze(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,c){return s.timeoutSeconds===c.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wd{constructor(e,t,s,c){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=c,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new GE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ze(Se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ze(Se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new GE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new U4;switch(s.type){case"firstParty":return new H4(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ze(Se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=HE.get(t);s&&(qe("ComponentProvider","Removing Datastore"),HE.delete(t),s.terminate())})(this),Promise.resolve()}}function M8(n,e,t,s={}){var E;n=Li(n,Wd);const c=Mc(e),f=n._getSettings(),p={...f,emulatorOptions:n._getEmulatorOptions()},T=`${e}:${t}`;c&&(yA(`https://${T}`),EA("Firestore",!0)),f.host!==zb&&f.host!==T&&bc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const w={...f,host:T,ssl:c,emulatorOptions:s};if(!bl(w,p)&&(n._setSettings(w),s.mockUserToken)){let C,I;if(typeof s.mockUserToken=="string")C=s.mockUserToken,I=ai.MOCK_USER;else{C=hN(s.mockUserToken,(E=n._app)==null?void 0:E.options.projectId);const M=s.mockUserToken.sub||s.mockUserToken.user_id;if(!M)throw new ze(Se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");I=new ai(M)}n._authCredentials=new V4(new MA(C,I))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Wo(this.firestore,e,this._query)}}class rr{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rr(this.firestore,e,this._key)}toJSON(){return{type:rr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(ih(t,rr._jsonSchema))return new rr(e,s||null,new nt(Nn.fromString(t.referencePath)))}}rr._jsonSchemaVersion="firestore/documentReference/1.0",rr._jsonSchema={type:wr("string",rr._jsonSchemaVersion),referencePath:wr("string")};class Bo extends Wo{constructor(e,t,s){super(e,t,Ud(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rr(this.firestore,null,new nt(e))}withConverter(e){return new Bo(this.firestore,e,this._path)}}function $i(n,e,...t){if(n=Ar(n),LA("collection","path",e),n instanceof Wd){const s=Nn.fromString(e,...t);return rE(s),new Bo(n,null,s)}{if(!(n instanceof rr||n instanceof Bo))throw new ze(Se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Nn.fromString(e,...t));return rE(s),new Bo(n.firestore,null,s)}}function _n(n,e,...t){if(n=Ar(n),arguments.length===1&&(e=Am.newId()),LA("doc","path",e),n instanceof Wd){const s=Nn.fromString(e,...t);return nE(s),new rr(n,null,new nt(s))}{if(!(n instanceof rr||n instanceof Bo))throw new ze(Se.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Nn.fromString(e,...t));return nE(s),new rr(n.firestore,n instanceof Bo?n.converter:null,new nt(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE="AsyncQueue";class YE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new vb(this,"async_queue_retry"),this._c=()=>{const s=fg();s&&qe(qE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=fg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=fg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ba;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Bc(e))throw e;qe(qE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,ja("INTERNAL UNHANDLED ERROR: ",XE(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const c=jm.createAndSchedule(this,e,t,s,(f=>this.hc(f)));return this.tc.push(c),c}uc(){this.nc&&ut(47125,{Pc:XE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function XE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(n){return(function(t,s){if(typeof t!="object"||t===null)return!1;const c=t;for(const f of s)if(f in c&&typeof c[f]=="function")return!0;return!1})(n,["next","error","complete"])}class Ha extends Wd{constructor(e,t,s,c){super(e,t,s,c),this.type="firestore",this._queue=new YE,this._persistenceKey=(c==null?void 0:c.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new YE(e),this._firestoreClient=void 0,await e}}}function L8(n,e){const t=typeof n=="object"?n:bA(),s=typeof n=="string"?n:sd,c=_m(t,"firestore").getImmediate({identifier:s});if(!c._initialized){const f=cN("firestore");f&&M8(c,...f)}return c}function uh(n){if(n._terminated)throw new ze(Se.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||P8(n),n._firestoreClient}function P8(n){var s,c,f;const e=n._freezeSettings(),t=(function(T,w,E,C){return new sR(T,w,E,C.host,C.ssl,C.experimentalForceLongPolling,C.experimentalAutoDetectLongPolling,Hb(C.experimentalLongPollingOptions),C.useFetchStreams,C.isUsingEmulator)})(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(c=e.localCache)!=null&&c._offlineComponentProvider&&((f=e.localCache)!=null&&f._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new I8(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(T){const w=T==null?void 0:T._online.build();return{_offline:T==null?void 0:T._offline.build(w),_online:w}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xs(Yr.fromBase64String(e))}catch(t){throw new ze(Se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new xs(Yr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:xs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ih(e,xs._jsonSchema))return xs.fromBase64String(e.bytes)}}xs._jsonSchemaVersion="firestore/bytes/1.0",xs._jsonSchema={type:wr("string",xs._jsonSchemaVersion),bytes:wr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ze(Se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ze(Se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ze(Se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return zt(this._lat,e._lat)||zt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ws._jsonSchemaVersion}}static fromJSON(e){if(ih(e,Ws._jsonSchema))return new Ws(e.latitude,e.longitude)}}Ws._jsonSchemaVersion="firestore/geoPoint/1.0",Ws._jsonSchema={type:wr("string",Ws._jsonSchemaVersion),latitude:wr("number"),longitude:wr("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,c){if(s.length!==c.length)return!1;for(let f=0;f<s.length;++f)if(s[f]!==c[f])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ks._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ih(e,Ks._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ks(e.vectorValues);throw new ze(Se.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ks._jsonSchemaVersion="firestore/vectorValue/1.0",Ks._jsonSchema={type:wr("string",Ks._jsonSchemaVersion),vectorValues:wr("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k8=/^__.*__$/;class B8{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Xo(e,this.data,this.fieldMask,t,this.fieldTransforms):new ah(e,this.data,t,this.fieldTransforms)}}class Gb{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Xo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function qb(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ut(40011,{Ac:n})}}class Qm{constructor(e,t,s,c,f,p){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=c,f===void 0&&this.Rc(),this.fieldTransforms=f||[],this.fieldMask=p||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Qm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var c;const t=(c=this.path)==null?void 0:c.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var c;const t=(c=this.path)==null?void 0:c.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return xd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(qb(this.Ac)&&k8.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class U8{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||qd(e)}Cc(e,t,s,c=!1){return new Qm({Ac:e,methodName:t,Dc:s,path:qr.emptyPath(),fc:!1,bc:c},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Kd(n){const e=n._freezeSettings(),t=qd(n._databaseId);return new U8(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Yb(n,e,t,s,c,f={}){const p=n.Cc(f.merge||f.mergeFields?2:0,e,t,c);Zm("Data must be an object, but it was:",p,s);const T=Kb(s,p);let w,E;if(f.merge)w=new Ji(p.fieldMask),E=p.fieldTransforms;else if(f.mergeFields){const C=[];for(const I of f.mergeFields){const M=Qg(e,I,t);if(!p.contains(M))throw new ze(Se.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);Zb(C,M)||C.push(M)}w=new Ji(C),E=p.fieldTransforms.filter((I=>w.covers(I.field)))}else w=null,E=p.fieldTransforms;return new B8(new Mi(T),w,E)}class Qd extends Km{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Qd}}function Xb(n,e,t,s){const c=n.Cc(1,e,t);Zm("Data must be an object, but it was:",c,s);const f=[],p=Mi.empty();Yo(s,((w,E)=>{const C=Jm(e,w,t);E=Ar(E);const I=c.yc(C);if(E instanceof Qd)f.push(C);else{const M=fh(E,I);M!=null&&(f.push(C),p.set(C,M))}}));const T=new Ji(f);return new Gb(p,T,c.fieldTransforms)}function Wb(n,e,t,s,c,f){const p=n.Cc(1,e,t),T=[Qg(e,s,t)],w=[c];if(f.length%2!=0)throw new ze(Se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let M=0;M<f.length;M+=2)T.push(Qg(e,f[M])),w.push(f[M+1]);const E=[],C=Mi.empty();for(let M=T.length-1;M>=0;--M)if(!Zb(E,T[M])){const B=T[M];let W=w[M];W=Ar(W);const $=p.yc(B);if(W instanceof Qd)E.push(B);else{const q=fh(W,$);q!=null&&(E.push(B),C.set(B,q))}}const I=new Ji(E);return new Gb(C,I,p.fieldTransforms)}function V8(n,e,t,s=!1){return fh(t,n.Cc(s?4:3,e))}function fh(n,e){if(Qb(n=Ar(n)))return Zm("Unsupported field value:",e,n),Kb(n,e);if(n instanceof Km)return(function(s,c){if(!qb(c.Ac))throw c.Sc(`${s._methodName}() can only be used with update() and set()`);if(!c.path)throw c.Sc(`${s._methodName}() is not currently supported inside arrays`);const f=s._toFieldTransform(c);f&&c.fieldTransforms.push(f)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,c){const f=[];let p=0;for(const T of s){let w=fh(T,c.wc(p));w==null&&(w={nullValue:"NULL_VALUE"}),f.push(w),p++}return{arrayValue:{values:f}}})(n,e)}return(function(s,c){if((s=Ar(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return IR(c.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const f=Ln.fromDate(s);return{timestampValue:fd(c.serializer,f)}}if(s instanceof Ln){const f=new Ln(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:fd(c.serializer,f)}}if(s instanceof Ws)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof xs)return{bytesValue:gb(c.serializer,s._byteString)};if(s instanceof rr){const f=c.databaseId,p=s.firestore._databaseId;if(!p.isEqual(f))throw c.Sc(`Document reference is for database ${p.projectId}/${p.database} but should be for database ${f.projectId}/${f.database}`);return{referenceValue:Om(s.firestore._databaseId||c.databaseId,s._key.path)}}if(s instanceof Ks)return(function(p,T){return{mapValue:{fields:{[zA]:{stringValue:GA},[ad]:{arrayValue:{values:p.toArray().map((E=>{if(typeof E!="number")throw T.Sc("VectorValues must only contain numeric values.");return Im(T.serializer,E)}))}}}}}})(s,c);throw c.Sc(`Unsupported field value: ${Ld(s)}`)})(n,e)}function Kb(n,e){const t={};return BA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yo(n,((s,c)=>{const f=fh(c,e.mc(s));f!=null&&(t[s]=f)})),{mapValue:{fields:t}}}function Qb(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ln||n instanceof Ws||n instanceof xs||n instanceof rr||n instanceof Km||n instanceof Ks)}function Zm(n,e,t){if(!Qb(t)||!PA(t)){const s=Ld(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function Qg(n,e,t){if((e=Ar(e))instanceof hh)return e._internalPath;if(typeof e=="string")return Jm(n,e);throw xd("Field path arguments must be of type string or ",n,!1,void 0,t)}const j8=new RegExp("[~\\*/\\[\\]]");function Jm(n,e,t){if(e.search(j8)>=0)throw xd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new hh(...e.split("."))._internalPath}catch{throw xd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function xd(n,e,t,s,c){const f=s&&!s.isEmpty(),p=c!==void 0;let T=`Function ${e}() called with invalid data`;t&&(T+=" (via `toFirestore()`)"),T+=". ";let w="";return(f||p)&&(w+=" (found",f&&(w+=` in field ${s}`),p&&(w+=` in document ${c}`),w+=")"),new ze(Se.INVALID_ARGUMENT,T+n+w)}function Zb(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e,t,s,c,f){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=c,this._converter=f}get id(){return this._key.path.lastSegment()}get ref(){return new rr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new F8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field($m("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class F8 extends Jb{data(){return super.data()}}function $m(n,e){return typeof e=="string"?Jm(n,e):e instanceof hh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $b(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ze(Se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ep{}class eT extends ep{}function Zd(n,e,...t){let s=[];e instanceof ep&&s.push(e),s=s.concat(t),(function(f){const p=f.filter((w=>w instanceof tp)).length,T=f.filter((w=>w instanceof Jd)).length;if(p>1||p>0&&T>0)throw new ze(Se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const c of s)n=c._apply(n);return n}class Jd extends eT{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Jd(e,t,s)}_apply(e){const t=this._parse(e);return tT(e._query,t),new Wo(e.firestore,e.converter,jg(e._query,t))}_parse(e){const t=Kd(e.firestore);return(function(f,p,T,w,E,C,I){let M;if(E.isKeyField()){if(C==="array-contains"||C==="array-contains-any")throw new ze(Se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if(C==="in"||C==="not-in"){QE(I,C);const W=[];for(const $ of I)W.push(KE(w,f,$));M={arrayValue:{values:W}}}else M=KE(w,f,I)}else C!=="in"&&C!=="not-in"&&C!=="array-contains-any"||QE(I,C),M=V8(T,p,I,C==="in"||C==="not-in");return _r.create(E,C,M)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Vu(n,e,t){const s=e,c=$m("where",n);return Jd._create(c,s,t)}class tp extends ep{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new tp(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:Ds.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(c,f){let p=c;const T=f.getFlattenedFilters();for(const w of T)tT(p,w),p=jg(p,w)})(e._query,t),new Wo(e.firestore,e.converter,jg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class np extends eT{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new np(e,t,s)}_apply(e){return new Wo(e.firestore,e.converter,cd(e._query,this._limit,this._limitType))}}function H8(n){return np._create("limit",n,"F")}function KE(n,e,t){if(typeof(t=Ar(t))=="string"){if(t==="")throw new ze(Se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!JA(e)&&t.indexOf("/")!==-1)throw new ze(Se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Nn.fromString(t));if(!nt.isDocumentKey(s))throw new ze(Se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return hE(n,new nt(s))}if(t instanceof rr)return hE(n,t._key);throw new ze(Se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ld(t)}.`)}function QE(n,e){if(!Array.isArray(n)||n.length===0)throw new ze(Se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tT(n,e){const t=(function(c,f){for(const p of c)for(const T of p.getFlattenedFilters())if(f.indexOf(T.op)>=0)return T.op;return null})(n.filters,(function(c){switch(c){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ze(Se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ze(Se.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class z8{convertValue(e,t="none"){switch(Ho(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ur(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Fo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ut(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Yo(e,((c,f)=>{s[c]=this.convertValue(f,t)})),s}convertVectorValue(e){var s,c,f;const t=(f=(c=(s=e.fields)==null?void 0:s[ad].arrayValue)==null?void 0:c.values)==null?void 0:f.map((p=>ur(p.doubleValue)));return new Ks(t)}convertGeoPoint(e){return new Ws(ur(e.latitude),ur(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Bd(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Xu(e));default:return null}}convertTimestamp(e){const t=jo(e);return new Ln(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Nn.fromString(e);fn(_b(s),9688,{name:e});const c=new Wu(s.get(1),s.get(3)),f=new nt(s.popFirst(5));return c.isEqual(t)||ja(`Document ${f} contains a document reference within a different database (${c.projectId}/${c.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nT(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class Ru{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wl extends Jb{constructor(e,t,s,c,f,p){super(e,t,s,c,p),this._firestore=e,this._firestoreImpl=e,this.metadata=f}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Yf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field($m("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ze(Se.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=wl._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}wl._jsonSchemaVersion="firestore/documentSnapshot/1.0",wl._jsonSchema={type:wr("string",wl._jsonSchemaVersion),bundleSource:wr("string","DocumentSnapshot"),bundleName:wr("string"),bundle:wr("string")};class Yf extends wl{data(e={}){return super.data(e)}}class Al{constructor(e,t,s,c){this._firestore=e,this._userDataWriter=t,this._snapshot=c,this.metadata=new Ru(c.hasPendingWrites,c.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Yf(this._firestore,this._userDataWriter,s.key,s,new Ru(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ze(Se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(c,f){if(c._snapshot.oldDocs.isEmpty()){let p=0;return c._snapshot.docChanges.map((T=>{const w=new Yf(c._firestore,c._userDataWriter,T.doc.key,T.doc,new Ru(c._snapshot.mutatedKeys.has(T.doc.key),c._snapshot.fromCache),c.query.converter);return T.doc,{type:"added",doc:w,oldIndex:-1,newIndex:p++}}))}{let p=c._snapshot.oldDocs;return c._snapshot.docChanges.filter((T=>f||T.type!==3)).map((T=>{const w=new Yf(c._firestore,c._userDataWriter,T.doc.key,T.doc,new Ru(c._snapshot.mutatedKeys.has(T.doc.key),c._snapshot.fromCache),c.query.converter);let E=-1,C=-1;return T.type!==0&&(E=p.indexOf(T.doc.key),p=p.delete(T.doc.key)),T.type!==1&&(p=p.add(T.doc),C=p.indexOf(T.doc.key)),{type:G8(T.type),doc:w,oldIndex:E,newIndex:C}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ze(Se.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Al._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Am.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],c=[];return this.docs.forEach((f=>{f._document!==null&&(t.push(f._document),s.push(this._userDataWriter.convertObjectMap(f._document.data.value.mapValue.fields,"previous")),c.push(f.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function G8(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ut(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yd(n){n=Li(n,rr);const e=Li(n.firestore,Ha);return O8(uh(e),n._key).then((t=>rT(e,n,t)))}Al._jsonSchemaVersion="firestore/querySnapshot/1.0",Al._jsonSchema={type:wr("string",Al._jsonSchemaVersion),bundleSource:wr("string","QuerySnapshot"),bundleName:wr("string"),bundle:wr("string")};class rp extends z8{constructor(e){super(),this.firestore=e}convertBytes(e){return new xs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new rr(this.firestore,null,t)}}function $d(n){n=Li(n,Wo);const e=Li(n.firestore,Ha),t=uh(e),s=new rp(e);return $b(n._query),D8(t,n._query).then((c=>new Al(e,s,n,c)))}function ea(n,e,t){n=Li(n,rr);const s=Li(n.firestore,Ha),c=nT(n.converter,e,t);return e0(s,[Yb(Kd(s),"setDoc",n._key,c,n.converter!==null,t).toMutation(n._key,Pi.none())])}function za(n,e,t,...s){n=Li(n,rr);const c=Li(n.firestore,Ha),f=Kd(c);let p;return p=typeof(e=Ar(e))=="string"||e instanceof hh?Wb(f,"updateDoc",n._key,e,t,s):Xb(f,"updateDoc",n._key,e),e0(c,[p.toMutation(n._key,Pi.exists(!0))])}function dh(n){return e0(Li(n.firestore,Ha),[new zd(n._key,Pi.none())])}function Wa(n,...e){var w,E,C;n=Ar(n);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||WE(e[s])||(t=e[s++]);const c={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(WE(e[s])){const I=e[s];e[s]=(w=I.next)==null?void 0:w.bind(I),e[s+1]=(E=I.error)==null?void 0:E.bind(I),e[s+2]=(C=I.complete)==null?void 0:C.bind(I)}let f,p,T;if(n instanceof rr)p=Li(n.firestore,Ha),T=Ud(n._key.path),f={next:I=>{e[s]&&e[s](rT(p,n,I))},error:e[s+1],complete:e[s+2]};else{const I=Li(n,Wo);p=Li(I.firestore,Ha),T=I._query;const M=new rp(p);f={next:B=>{e[s]&&e[s](new Al(p,M,I,B))},error:e[s+1],complete:e[s+2]},$b(n._query)}return(function(M,B,W,$){const q=new Wm($),_e=new qm(B,q,W);return M.asyncQueue.enqueueAndForget((async()=>Hm(await pd(M),_e))),()=>{q.Nu(),M.asyncQueue.enqueueAndForget((async()=>zm(await pd(M),_e)))}})(uh(p),T,c,f)}function e0(n,e){return(function(s,c){const f=new Ba;return s.asyncQueue.enqueueAndForget((async()=>E8(await R8(s),c,f))),f.promise})(uh(n),e)}function rT(n,e,t){const s=t.docs.get(e._key),c=new rp(n);return new wl(n,c,e._key,s,new Ru(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q8{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Kd(e)}set(e,t,s){this._verifyNotCommitted();const c=gg(e,this._firestore),f=nT(c.converter,t,s),p=Yb(this._dataReader,"WriteBatch.set",c._key,f,c.converter!==null,s);return this._mutations.push(p.toMutation(c._key,Pi.none())),this}update(e,t,s,...c){this._verifyNotCommitted();const f=gg(e,this._firestore);let p;return p=typeof(t=Ar(t))=="string"||t instanceof hh?Wb(this._dataReader,"WriteBatch.update",f._key,t,s,c):Xb(this._dataReader,"WriteBatch.update",f._key,t),this._mutations.push(p.toMutation(f._key,Pi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=gg(e,this._firestore);return this._mutations=this._mutations.concat(new zd(t._key,Pi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ze(Se.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function gg(n,e){if((n=Ar(n)).firestore!==e)throw new ze(Se.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(n){return uh(n=Li(n,Ha)),new q8(n,(e=>e0(n,e)))}(function(e,t=!0){(function(c){Pc=c})(Lc),Ac(new Tl("firestore",((s,{instanceIdentifier:c,options:f})=>{const p=s.getProvider("app").getImmediate(),T=new Ha(new j4(s.getProvider("auth-internal")),new z4(p,s.getProvider("app-check-internal")),(function(E,C){if(!Object.prototype.hasOwnProperty.apply(E.options,["projectId"]))throw new ze(Se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wu(E.options.projectId,C)})(p,c),p);return f={useFetchStreams:t,...f},T._setSettings(f),T}),"PUBLIC").setMultipleInstances(!0)),Po(Jy,$y,e),Po(Jy,$y,"esm2020")})();var Y8="firebase",X8="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Po(Y8,X8,"app");function iT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const W8=iT,sT=new nh("auth","Firebase",iT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed=new ym("@firebase/auth");function K8(n,...e){Ed.logLevel<=Ht.WARN&&Ed.warn(`Auth (${Lc}): ${n}`,...e)}function Xf(n,...e){Ed.logLevel<=Ht.ERROR&&Ed.error(`Auth (${Lc}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ms(n,...e){throw ip(n,...e)}function Qs(n,...e){return ip(n,...e)}function aT(n,e,t){const s={...W8(),[e]:t};return new nh("auth","Firebase",s).create(e,{appName:n.name})}function Zs(n){return aT(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ip(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return sT.create(n,...e)}function ct(n,e,...t){if(!n)throw ip(e,...t)}function La(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Xf(e),new Error(e)}function Ga(n,e){n||La(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function Q8(){return ZE()==="http:"||ZE()==="https:"}function ZE(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z8(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Q8()||xN()||"connection"in navigator)?navigator.onLine:!0}function J8(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ga(t>e,"Short delay should be less than long delay!"),this.isMobile=gN()||yN()}get(){return Z8()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(n,e){Ga(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;La("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;La("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;La("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $8={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],tO=new gh(3e4,6e4);function Ko(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Ka(n,e,t,s,c={}){return lT(n,c,async()=>{let f={},p={};s&&(e==="GET"?p=s:f={body:JSON.stringify(s)});const T=rh({key:n.config.apiKey,...p}).slice(1),w=await n._getAdditionalHeaders();w["Content-Type"]="application/json",n.languageCode&&(w["X-Firebase-Locale"]=n.languageCode);const E={method:e,headers:w,...f};return pN()||(E.referrerPolicy="no-referrer"),n.emulatorConfig&&Mc(n.emulatorConfig.host)&&(E.credentials="include"),oT.fetch()(await cT(n,n.config.apiHost,t,T),E)})}async function lT(n,e,t){n._canInitEmulator=!1;const s={...$8,...e};try{const c=new rO(n),f=await Promise.race([t(),c.promise]);c.clearNetworkTimeout();const p=await f.json();if("needConfirmation"in p)throw Of(n,"account-exists-with-different-credential",p);if(f.ok&&!("errorMessage"in p))return p;{const T=f.ok?p.errorMessage:p.error.message,[w,E]=T.split(" : ");if(w==="FEDERATED_USER_ID_ALREADY_LINKED")throw Of(n,"credential-already-in-use",p);if(w==="EMAIL_EXISTS")throw Of(n,"email-already-in-use",p);if(w==="USER_DISABLED")throw Of(n,"user-disabled",p);const C=s[w]||w.toLowerCase().replace(/[_\s]+/g,"-");if(E)throw aT(n,C,E);Ms(n,C)}}catch(c){if(c instanceof Xa)throw c;Ms(n,"network-request-failed",{message:String(c)})}}async function mh(n,e,t,s,c={}){const f=await Ka(n,e,t,s,c);return"mfaPendingCredential"in f&&Ms(n,"multi-factor-auth-required",{_serverResponse:f}),f}async function cT(n,e,t,s){const c=`${e}${t}?${s}`,f=n,p=f.config.emulator?sp(n.config,c):`${n.config.apiScheme}://${c}`;return eO.includes(t)&&(await f._persistenceManagerAvailable,f._getPersistenceType()==="COOKIE")?f._getPersistence()._getFinalTarget(p).toString():p}function nO(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class rO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Qs(this.auth,"network-request-failed")),tO.get())})}}function Of(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const c=Qs(n,e,s);return c.customData._tokenResponse=t,c}function JE(n){return n!==void 0&&n.enterprise!==void 0}class iO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return nO(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function sO(n,e){return Ka(n,"GET","/v2/recaptchaConfig",Ko(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aO(n,e){return Ka(n,"POST","/v1/accounts:delete",e)}async function _d(n,e){return Ka(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ju(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function oO(n,e=!1){const t=Ar(n),s=await t.getIdToken(e),c=ap(s);ct(c&&c.exp&&c.auth_time&&c.iat,t.auth,"internal-error");const f=typeof c.firebase=="object"?c.firebase:void 0,p=f==null?void 0:f.sign_in_provider;return{claims:c,token:s,authTime:ju(mg(c.auth_time)),issuedAtTime:ju(mg(c.iat)),expirationTime:ju(mg(c.exp)),signInProvider:p||null,signInSecondFactor:(f==null?void 0:f.sign_in_second_factor)||null}}function mg(n){return Number(n)*1e3}function ap(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return Xf("JWT malformed, contained fewer than 3 sections"),null;try{const c=gA(t);return c?JSON.parse(c):(Xf("Failed to decode base64 JWT payload"),null)}catch(c){return Xf("Caught error parsing JWT payload as JSON",c==null?void 0:c.toString()),null}}function $E(n){const e=ap(n);return ct(e,"internal-error"),ct(typeof e.exp<"u","internal-error"),ct(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nc(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Xa&&lO(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function lO({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ju(this.lastLoginAt),this.creationTime=ju(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wd(n){var I;const e=n.auth,t=await n.getIdToken(),s=await Nc(n,_d(e,{idToken:t}));ct(s==null?void 0:s.users.length,e,"internal-error");const c=s.users[0];n._notifyReloadListener(c);const f=(I=c.providerUserInfo)!=null&&I.length?uT(c.providerUserInfo):[],p=hO(n.providerData,f),T=n.isAnonymous,w=!(n.email&&c.passwordHash)&&!(p!=null&&p.length),E=T?w:!1,C={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:p,metadata:new Jg(c.createdAt,c.lastLoginAt),isAnonymous:E};Object.assign(n,C)}async function uO(n){const e=Ar(n);await wd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hO(n,e){return[...n.filter(s=>!e.some(c=>c.providerId===s.providerId)),...e]}function uT(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fO(n,e){const t=await lT(n,{},async()=>{const s=rh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:c,apiKey:f}=n.config,p=await cT(n,c,"/v1/token",`key=${f}`),T=await n._getAdditionalHeaders();T["Content-Type"]="application/x-www-form-urlencoded";const w={method:"POST",headers:T,body:s};return n.emulatorConfig&&Mc(n.emulatorConfig.host)&&(w.credentials="include"),oT.fetch()(p,w)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function dO(n,e){return Ka(n,"POST","/v2/accounts:revokeToken",Ko(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ct(e.idToken,"internal-error"),ct(typeof e.idToken<"u","internal-error"),ct(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$E(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ct(e.length!==0,"internal-error");const t=$E(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ct(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:c,expiresIn:f}=await fO(e,t);this.updateTokensAndExpiration(s,c,Number(f))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:c,expirationTime:f}=t,p=new yc;return s&&(ct(typeof s=="string","internal-error",{appName:e}),p.refreshToken=s),c&&(ct(typeof c=="string","internal-error",{appName:e}),p.accessToken=c),f&&(ct(typeof f=="number","internal-error",{appName:e}),p.expirationTime=f),p}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new yc,this.toJSON())}_performRefresh(){return La("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function So(n,e){ct(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Os{constructor({uid:e,auth:t,stsTokenManager:s,...c}){this.providerId="firebase",this.proactiveRefresh=new cO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new Jg(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(e){const t=await Nc(this,this.stsTokenManager.getToken(this.auth,e));return ct(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return oO(this,e)}reload(){return uO(this)}_assign(e){this!==e&&(ct(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Os({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ct(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await wd(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zi(this.auth.app))return Promise.reject(Zs(this.auth));const e=await this.getIdToken();return await Nc(this,aO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,c=t.email??void 0,f=t.phoneNumber??void 0,p=t.photoURL??void 0,T=t.tenantId??void 0,w=t._redirectEventId??void 0,E=t.createdAt??void 0,C=t.lastLoginAt??void 0,{uid:I,emailVerified:M,isAnonymous:B,providerData:W,stsTokenManager:$}=t;ct(I&&$,e,"internal-error");const q=yc.fromJSON(this.name,$);ct(typeof I=="string",e,"internal-error"),So(s,e.name),So(c,e.name),ct(typeof M=="boolean",e,"internal-error"),ct(typeof B=="boolean",e,"internal-error"),So(f,e.name),So(p,e.name),So(T,e.name),So(w,e.name),So(E,e.name),So(C,e.name);const _e=new Os({uid:I,auth:e,email:c,emailVerified:M,displayName:s,isAnonymous:B,photoURL:p,phoneNumber:f,tenantId:T,stsTokenManager:q,createdAt:E,lastLoginAt:C});return W&&Array.isArray(W)&&(_e.providerData=W.map(ae=>({...ae}))),w&&(_e._redirectEventId=w),_e}static async _fromIdTokenResponse(e,t,s=!1){const c=new yc;c.updateFromServerResponse(t);const f=new Os({uid:t.localId,auth:e,stsTokenManager:c,isAnonymous:s});return await wd(f),f}static async _fromGetAccountInfoResponse(e,t,s){const c=t.users[0];ct(c.localId!==void 0,"internal-error");const f=c.providerUserInfo!==void 0?uT(c.providerUserInfo):[],p=!(c.email&&c.passwordHash)&&!(f!=null&&f.length),T=new yc;T.updateFromIdToken(s);const w=new Os({uid:c.localId,auth:e,stsTokenManager:T,isAnonymous:p}),E={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:f,metadata:new Jg(c.createdAt,c.lastLoginAt),isAnonymous:!(c.email&&c.passwordHash)&&!(f!=null&&f.length)};return Object.assign(w,E),w}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_=new Map;function Pa(n){Ga(n instanceof Function,"Expected a class definition");let e=e_.get(n);return e?(Ga(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,e_.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}hT.type="NONE";const t_=hT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wf(n,e,t){return`firebase:${n}:${e}:${t}`}class Ec{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:c,name:f}=this.auth;this.fullUserKey=Wf(this.userKey,c.apiKey,f),this.fullPersistenceKey=Wf("persistence",c.apiKey,f),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await _d(this.auth,{idToken:e}).catch(()=>{});return t?Os._fromGetAccountInfoResponse(this.auth,t,e):null}return Os._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Ec(Pa(t_),e,s);const c=(await Promise.all(t.map(async E=>{if(await E._isAvailable())return E}))).filter(E=>E);let f=c[0]||Pa(t_);const p=Wf(s,e.config.apiKey,e.name);let T=null;for(const E of t)try{const C=await E._get(p);if(C){let I;if(typeof C=="string"){const M=await _d(e,{idToken:C}).catch(()=>{});if(!M)break;I=await Os._fromGetAccountInfoResponse(e,M,C)}else I=Os._fromJSON(e,C);E!==f&&(T=I),f=E;break}}catch{}const w=c.filter(E=>E._shouldAllowMigration);return!f._shouldAllowMigration||!w.length?new Ec(f,e,s):(f=w[0],T&&await f._set(p,T.toJSON()),await Promise.all(t.map(async E=>{if(E!==f)try{await E._remove(p)}catch{}})),new Ec(f,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(fT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xT(e))return"Blackberry";if(yT(e))return"Webos";if(dT(e))return"Safari";if((e.includes("chrome/")||gT(e))&&!e.includes("edge/"))return"Chrome";if(pT(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function fT(n=li()){return/firefox\//i.test(n)}function dT(n=li()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gT(n=li()){return/crios\//i.test(n)}function mT(n=li()){return/iemobile/i.test(n)}function pT(n=li()){return/android/i.test(n)}function xT(n=li()){return/blackberry/i.test(n)}function yT(n=li()){return/webos/i.test(n)}function op(n=li()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function gO(n=li()){var e;return op(n)&&!!((e=window.navigator)!=null&&e.standalone)}function mO(){return EN()&&document.documentMode===10}function ET(n=li()){return op(n)||pT(n)||yT(n)||xT(n)||/windows phone/i.test(n)||mT(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(n,e=[]){let t;switch(n){case"Browser":t=n_(li());break;case"Worker":t=`${n_(li())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Lc}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=f=>new Promise((p,T)=>{try{const w=e(f);p(w)}catch(w){T(w)}});s.onAbort=t,this.queue.push(s);const c=this.queue.length-1;return()=>{this.queue[c]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const c of t)try{c()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xO(n,e={}){return Ka(n,"GET","/v2/passwordPolicy",Ko(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO=6;class EO{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??yO,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,c=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),c&&(t.meetsMaxPasswordLength=e.length<=c)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let c=0;c<e.length;c++)s=e.charAt(c),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,c,f){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=c)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(e,t,s,c){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=c,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new r_(this),this.idTokenSubscription=new r_(this),this.beforeStateQueue=new pO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=c.sdkClientVersion,this._persistenceManagerAvailable=new Promise(f=>this._resolvePersistenceManagerAvailable=f)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Pa(t)),this._initializationPromise=this.queue(async()=>{var s,c,f;if(!this._deleted&&(this.persistenceManager=await Ec.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((c=this._popupRedirectResolver)!=null&&c._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((f=this.currentUser)==null?void 0:f.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await _d(this,{idToken:e}),s=await Os._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var f;if(Zi(this.app)){const p=this.app.settings.authIdToken;return p?new Promise(T=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(p).then(T,T))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,c=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const p=(f=this.redirectUser)==null?void 0:f._redirectEventId,T=s==null?void 0:s._redirectEventId,w=await this.tryRedirectSignIn(e);(!p||p===T)&&(w!=null&&w.user)&&(s=w.user,c=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(s)}catch(p){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(p))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ct(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await wd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=J8()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zi(this.app))return Promise.reject(Zs(this));const t=e?Ar(e):null;return t&&ct(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ct(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zi(this.app)?Promise.reject(Zs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zi(this.app)?Promise.reject(Zs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Pa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await xO(this),t=new EO(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new nh("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await dO(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Pa(e)||this._popupRedirectResolver;ct(t,this,"argument-error"),this.redirectPersistenceManager=await Ec.create(this,[Pa(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,c){if(this._deleted)return()=>{};const f=typeof t=="function"?t:t.next.bind(t);let p=!1;const T=this._isInitialized?Promise.resolve():this._initializationPromise;if(ct(T,this,"internal-error"),T.then(()=>{p||f(this.currentUser)}),typeof t=="function"){const w=e.addObserver(t,s,c);return()=>{p=!0,w()}}else{const w=e.addObserver(t);return()=>{p=!0,w()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ct(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_T(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var c;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((c=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:c.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(Zi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&K8(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Qo(n){return Ar(n)}class r_{constructor(e){this.auth=e,this.observer=null,this.addObserver=CN(t=>this.observer=t)}get next(){return ct(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let n0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wO(n){n0=n}function wT(n){return n0.loadJS(n)}function AO(){return n0.recaptchaEnterpriseScript}function bO(){return n0.gapiScript}function TO(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class vO{constructor(){this.enterprise=new SO}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class SO{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const CO="recaptcha-enterprise",AT="NO_RECAPTCHA";class IO{constructor(e){this.type=CO,this.auth=Qo(e)}async verify(e="verify",t=!1){async function s(f){if(!t){if(f.tenantId==null&&f._agentRecaptchaConfig!=null)return f._agentRecaptchaConfig.siteKey;if(f.tenantId!=null&&f._tenantRecaptchaConfigs[f.tenantId]!==void 0)return f._tenantRecaptchaConfigs[f.tenantId].siteKey}return new Promise(async(p,T)=>{sO(f,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(w=>{if(w.recaptchaKey===void 0)T(new Error("recaptcha Enterprise site key undefined"));else{const E=new iO(w);return f.tenantId==null?f._agentRecaptchaConfig=E:f._tenantRecaptchaConfigs[f.tenantId]=E,p(E.siteKey)}}).catch(w=>{T(w)})})}function c(f,p,T){const w=window.grecaptcha;JE(w)?w.enterprise.ready(()=>{w.enterprise.execute(f,{action:e}).then(E=>{p(E)}).catch(()=>{p(AT)})}):T(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new vO().execute("siteKey",{action:"verify"}):new Promise((f,p)=>{s(this.auth).then(T=>{if(!t&&JE(window.grecaptcha))c(T,f,p);else{if(typeof window>"u"){p(new Error("RecaptchaVerifier is only supported in browser"));return}let w=AO();w.length!==0&&(w+=T),wT(w).then(()=>{c(T,f,p)}).catch(E=>{p(E)})}}).catch(T=>{p(T)})})}}async function i_(n,e,t,s=!1,c=!1){const f=new IO(n);let p;if(c)p=AT;else try{p=await f.verify(t)}catch{p=await f.verify(t,!0)}const T={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in T){const w=T.phoneEnrollmentInfo.phoneNumber,E=T.phoneEnrollmentInfo.recaptchaToken;Object.assign(T,{phoneEnrollmentInfo:{phoneNumber:w,recaptchaToken:E,captchaResponse:p,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in T){const w=T.phoneSignInInfo.recaptchaToken;Object.assign(T,{phoneSignInInfo:{recaptchaToken:w,captchaResponse:p,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return T}return s?Object.assign(T,{captchaResp:p}):Object.assign(T,{captchaResponse:p}),Object.assign(T,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(T,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),T}async function $g(n,e,t,s,c){var f;if((f=n._getRecaptchaConfig())!=null&&f.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const p=await i_(n,e,t,t==="getOobCode");return s(n,p)}else return s(n,e).catch(async p=>{if(p.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const T=await i_(n,e,t,t==="getOobCode");return s(n,T)}else return Promise.reject(p)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NO(n,e){const t=_m(n,"auth");if(t.isInitialized()){const c=t.getImmediate(),f=t.getOptions();if(bl(f,e??{}))return c;Ms(c,"already-initialized")}return t.initialize({options:e})}function RO(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(Pa);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function OO(n,e,t){const s=Qo(n);ct(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const c=!1,f=bT(e),{host:p,port:T}=DO(e),w=T===null?"":`:${T}`,E={url:`${f}//${p}${w}/`},C=Object.freeze({host:p,port:T,protocol:f.replace(":",""),options:Object.freeze({disableWarnings:c})});if(!s._canInitEmulator){ct(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),ct(bl(E,s.config.emulator)&&bl(C,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=E,s.emulatorConfig=C,s.settings.appVerificationDisabledForTesting=!0,Mc(p)?(yA(`${f}//${p}${w}`),EA("Auth",!0)):MO()}function bT(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function DO(n){const e=bT(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",c=/^(\[[^\]]+\])(:|$)/.exec(s);if(c){const f=c[1];return{host:f,port:s_(s.substr(f.length+1))}}else{const[f,p]=s.split(":");return{host:f,port:s_(p)}}}function s_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function MO(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return La("not implemented")}_getIdTokenResponse(e){return La("not implemented")}_linkToIdToken(e,t){return La("not implemented")}_getReauthenticationResolver(e){return La("not implemented")}}async function LO(n,e){return Ka(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PO(n,e){return mh(n,"POST","/v1/accounts:signInWithPassword",Ko(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kO(n,e){return mh(n,"POST","/v1/accounts:signInWithEmailLink",Ko(n,e))}async function BO(n,e){return mh(n,"POST","/v1/accounts:signInWithEmailLink",Ko(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju extends lp{constructor(e,t,s,c=null){super("password",s),this._email=e,this._password=t,this._tenantId=c}static _fromEmailAndPassword(e,t){return new Ju(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new Ju(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $g(e,t,"signInWithPassword",PO);case"emailLink":return kO(e,{email:this._email,oobCode:this._password});default:Ms(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $g(e,s,"signUpPassword",LO);case"emailLink":return BO(e,{idToken:t,email:this._email,oobCode:this._password});default:Ms(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _c(n,e){return mh(n,"POST","/v1/accounts:signInWithIdp",Ko(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UO="http://localhost";class Cl extends lp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Cl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ms("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:c,...f}=t;if(!s||!c)return null;const p=new Cl(s,c);return p.idToken=f.idToken||void 0,p.accessToken=f.accessToken||void 0,p.secret=f.secret,p.nonce=f.nonce,p.pendingToken=f.pendingToken||null,p}_getIdTokenResponse(e){const t=this.buildRequest();return _c(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,_c(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,_c(e,t)}buildRequest(){const e={requestUri:UO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=rh(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VO(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function jO(n){const e=vu(Su(n)).link,t=e?vu(Su(e)).deep_link_id:null,s=vu(Su(n)).deep_link_id;return(s?vu(Su(s)).link:null)||s||t||e||n}class cp{constructor(e){const t=vu(Su(e)),s=t.apiKey??null,c=t.oobCode??null,f=VO(t.mode??null);ct(s&&c&&f,"argument-error"),this.apiKey=s,this.operation=f,this.code=c,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=jO(e);try{return new cp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(){this.providerId=Vc.PROVIDER_ID}static credential(e,t){return Ju._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=cp.parseLink(t);return ct(s,"argument-error"),Ju._fromEmailAndCode(e,s.code,s.tenantId)}}Vc.PROVIDER_ID="password";Vc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Vc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph extends TT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co extends ph{constructor(){super("facebook.com")}static credential(e){return Cl._fromParams({providerId:Co.PROVIDER_ID,signInMethod:Co.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Co.credentialFromTaggedObject(e)}static credentialFromError(e){return Co.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Co.credential(e.oauthAccessToken)}catch{return null}}}Co.FACEBOOK_SIGN_IN_METHOD="facebook.com";Co.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io extends ph{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Cl._fromParams({providerId:Io.PROVIDER_ID,signInMethod:Io.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Io.credentialFromTaggedObject(e)}static credentialFromError(e){return Io.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Io.credential(t,s)}catch{return null}}}Io.GOOGLE_SIGN_IN_METHOD="google.com";Io.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No extends ph{constructor(){super("github.com")}static credential(e){return Cl._fromParams({providerId:No.PROVIDER_ID,signInMethod:No.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return No.credentialFromTaggedObject(e)}static credentialFromError(e){return No.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return No.credential(e.oauthAccessToken)}catch{return null}}}No.GITHUB_SIGN_IN_METHOD="github.com";No.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro extends ph{constructor(){super("twitter.com")}static credential(e,t){return Cl._fromParams({providerId:Ro.PROVIDER_ID,signInMethod:Ro.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ro.credentialFromTaggedObject(e)}static credentialFromError(e){return Ro.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Ro.credential(t,s)}catch{return null}}}Ro.TWITTER_SIGN_IN_METHOD="twitter.com";Ro.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vT(n,e){return mh(n,"POST","/v1/accounts:signUp",Ko(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,c=!1){const f=await Os._fromIdTokenResponse(e,s,c),p=a_(s);return new qa({user:f,providerId:p,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const c=a_(s);return new qa({user:e,providerId:c,_tokenResponse:s,operationType:t})}}function a_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FO(n){var c;if(Zi(n.app))return Promise.reject(Zs(n));const e=Qo(n);if(await e._initializationPromise,(c=e.currentUser)!=null&&c.isAnonymous)return new qa({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await vT(e,{returnSecureToken:!0}),s=await qa._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad extends Xa{constructor(e,t,s,c){super(t.code,t.message),this.operationType=s,this.user=c,Object.setPrototypeOf(this,Ad.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,c){return new Ad(e,t,s,c)}}function ST(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(f=>{throw f.code==="auth/multi-factor-auth-required"?Ad._fromErrorAndOperation(n,f,e,s):f})}async function HO(n,e,t=!1){const s=await Nc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return qa._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zO(n,e,t=!1){const{auth:s}=n;if(Zi(s.app))return Promise.reject(Zs(s));const c="reauthenticate";try{const f=await Nc(n,ST(s,c,e,n),t);ct(f.idToken,s,"internal-error");const p=ap(f.idToken);ct(p,s,"internal-error");const{sub:T}=p;return ct(n.uid===T,s,"user-mismatch"),qa._forOperation(n,c,f)}catch(f){throw(f==null?void 0:f.code)==="auth/user-not-found"&&Ms(s,"user-mismatch"),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CT(n,e,t=!1){if(Zi(n.app))return Promise.reject(Zs(n));const s="signIn",c=await ST(n,s,e),f=await qa._fromIdTokenResponse(n,s,c);return t||await n._updateCurrentUser(f.user),f}async function GO(n,e){return CT(Qo(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IT(n){const e=Qo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function qO(n,e,t){if(Zi(n.app))return Promise.reject(Zs(n));const s=Qo(n),p=await $g(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",vT).catch(w=>{throw w.code==="auth/password-does-not-meet-requirements"&&IT(n),w}),T=await qa._fromIdTokenResponse(s,"signIn",p);return await s._updateCurrentUser(T.user),T}function pg(n,e,t){return Zi(n.app)?Promise.reject(Zs(n)):GO(Ar(n),Vc.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&IT(n),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YO(n,e){return Ka(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XO(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const s=Ar(n),f={idToken:await s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},p=await Nc(s,YO(s.auth,f));s.displayName=p.displayName||null,s.photoURL=p.photoUrl||null;const T=s.providerData.find(({providerId:w})=>w==="password");T&&(T.displayName=s.displayName,T.photoURL=s.photoURL),await s._updateTokensIfNecessary(p)}function WO(n,e,t,s){return Ar(n).onIdTokenChanged(e,t,s)}function KO(n,e,t){return Ar(n).beforeAuthStateChanged(e,t)}const bd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(bd,"1"),this.storage.removeItem(bd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO=1e3,ZO=10;class RT extends NT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ET(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),c=this.localCache[t];s!==c&&e(t,c,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((p,T,w)=>{this.notifyListeners(p,w)});return}const s=e.key;t?this.detachListener():this.stopPolling();const c=()=>{const p=this.storage.getItem(s);!t&&this.localCache[s]===p||this.notifyListeners(s,p)},f=this.storage.getItem(s);mO()&&f!==e.newValue&&e.newValue!==e.oldValue?setTimeout(c,ZO):c()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const c of Array.from(s))c(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},QO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}RT.type="LOCAL";const JO=RT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT extends NT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}OT.type="SESSION";const DT=OT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $O(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(c=>c.isListeningto(e));if(t)return t;const s=new r0(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:c,data:f}=t.data,p=this.handlersMap[c];if(!(p!=null&&p.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:c});const T=Array.from(p).map(async E=>E(t.origin,f)),w=await $O(T);t.ports[0].postMessage({status:"done",eventId:s,eventType:c,response:w})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}r0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const c=typeof MessageChannel<"u"?new MessageChannel:null;if(!c)throw new Error("connection_unavailable");let f,p;return new Promise((T,w)=>{const E=up("",20);c.port1.start();const C=setTimeout(()=>{w(new Error("unsupported_event"))},s);p={messageChannel:c,onMessage(I){const M=I;if(M.data.eventId===E)switch(M.data.status){case"ack":clearTimeout(C),f=setTimeout(()=>{w(new Error("timeout"))},3e3);break;case"done":clearTimeout(f),T(M.data.response);break;default:clearTimeout(C),clearTimeout(f),w(new Error("invalid_response"));break}}},this.handlers.add(p),c.port1.addEventListener("message",p.onMessage),this.target.postMessage({eventType:e,eventId:E,data:t},[c.port2])}).finally(()=>{p&&this.removeMessageHandler(p)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Js(){return window}function t5(n){Js().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MT(){return typeof Js().WorkerGlobalScope<"u"&&typeof Js().importScripts=="function"}async function n5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function r5(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function i5(){return MT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT="firebaseLocalStorageDb",s5=1,Td="firebaseLocalStorage",PT="fbase_key";class xh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function i0(n,e){return n.transaction([Td],e?"readwrite":"readonly").objectStore(Td)}function a5(){const n=indexedDB.deleteDatabase(LT);return new xh(n).toPromise()}function em(){const n=indexedDB.open(LT,s5);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Td,{keyPath:PT})}catch(c){t(c)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Td)?e(s):(s.close(),await a5(),e(await em()))})})}async function o_(n,e,t){const s=i0(n,!0).put({[PT]:e,value:t});return new xh(s).toPromise()}async function o5(n,e){const t=i0(n,!1).get(e),s=await new xh(t).toPromise();return s===void 0?null:s.value}function l_(n,e){const t=i0(n,!0).delete(e);return new xh(t).toPromise()}const l5=800,c5=3;class kT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await em(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>c5)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return MT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=r0._getInstance(i5()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await n5(),!this.activeServiceWorker)return;this.sender=new e5(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||r5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await em();return await o_(e,bd,"1"),await l_(e,bd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>o_(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>o5(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>l_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(c=>{const f=i0(c,!1).getAll();return new xh(f).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:c,value:f}of e)s.add(c),JSON.stringify(this.localCache[c])!==JSON.stringify(f)&&(this.notifyListeners(c,f),t.push(c));for(const c of Object.keys(this.localCache))this.localCache[c]&&!s.has(c)&&(this.notifyListeners(c,null),t.push(c));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const c of Array.from(s))c(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),l5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}kT.type="LOCAL";const u5=kT;new gh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h5(n,e){return e?Pa(e):(ct(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp extends lp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _c(e,this._buildIdpRequest())}_linkToIdToken(e,t){return _c(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return _c(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function f5(n){return CT(n.auth,new hp(n),n.bypassAuthState)}function d5(n){const{auth:e,user:t}=n;return ct(t,e,"internal-error"),zO(t,new hp(n),n.bypassAuthState)}async function g5(n){const{auth:e,user:t}=n;return ct(t,e,"internal-error"),HO(t,new hp(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e,t,s,c,f=!1){this.auth=e,this.resolver=s,this.user=c,this.bypassAuthState=f,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:c,tenantId:f,error:p,type:T}=e;if(p){this.reject(p);return}const w={auth:this.auth,requestUri:t,sessionId:s,tenantId:f||void 0,postBody:c||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(T)(w))}catch(E){this.reject(E)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return f5;case"linkViaPopup":case"linkViaRedirect":return g5;case"reauthViaPopup":case"reauthViaRedirect":return d5;default:Ms(this.auth,"internal-error")}}resolve(e){Ga(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ga(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m5=new gh(2e3,1e4);class dc extends BT{constructor(e,t,s,c,f){super(e,t,c,f),this.provider=s,this.authWindow=null,this.pollId=null,dc.currentPopupAction&&dc.currentPopupAction.cancel(),dc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ct(e,this.auth,"internal-error"),e}async onExecution(){Ga(this.filter.length===1,"Popup operations only handle one event");const e=up();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Qs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Qs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,dc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,m5.get())};e()}}dc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p5="pendingRedirect",Kf=new Map;class x5 extends BT{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Kf.get(this.auth._key());if(!e){try{const s=await y5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Kf.set(this.auth._key(),e)}return this.bypassAuthState||Kf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function y5(n,e){const t=w5(e),s=_5(n);if(!await s._isAvailable())return!1;const c=await s._get(t)==="true";return await s._remove(t),c}function E5(n,e){Kf.set(n._key(),e)}function _5(n){return Pa(n._redirectPersistence)}function w5(n){return Wf(p5,n.config.apiKey,n.name)}async function A5(n,e,t=!1){if(Zi(n.app))return Promise.reject(Zs(n));const s=Qo(n),c=h5(s,e),p=await new x5(s,c,t).execute();return p&&!t&&(delete p.user._redirectEventId,await s._persistUserIfCurrent(p.user),await s._setRedirectUser(null,e)),p}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b5=600*1e3;class T5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!v5(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!UT(e)){const c=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(Qs(this.auth,c))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=b5&&this.cachedEventUids.clear(),this.cachedEventUids.has(c_(e))}saveEventToCache(e){this.cachedEventUids.add(c_(e)),this.lastProcessedEventTime=Date.now()}}function c_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function UT({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function v5(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return UT(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S5(n,e={}){return Ka(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,I5=/^https?/;async function N5(n){if(n.config.emulator)return;const{authorizedDomains:e}=await S5(n);for(const t of e)try{if(R5(t))return}catch{}Ms(n,"unauthorized-domain")}function R5(n){const e=Zg(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const p=new URL(n);return p.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&p.hostname===s}if(!I5.test(t))return!1;if(C5.test(n))return s===n;const c=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+c+"|"+c+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O5=new gh(3e4,6e4);function u_(){const n=Js().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function D5(n){return new Promise((e,t)=>{var c,f,p;function s(){u_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{u_(),t(Qs(n,"network-request-failed"))},timeout:O5.get()})}if((f=(c=Js().gapi)==null?void 0:c.iframes)!=null&&f.Iframe)e(gapi.iframes.getContext());else if((p=Js().gapi)!=null&&p.load)s();else{const T=TO("iframefcb");return Js()[T]=()=>{gapi.load?s():t(Qs(n,"network-request-failed"))},wT(`${bO()}?onload=${T}`).catch(w=>t(w))}}).catch(e=>{throw Qf=null,e})}let Qf=null;function M5(n){return Qf=Qf||D5(n),Qf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L5=new gh(5e3,15e3),P5="__/auth/iframe",k5="emulator/auth/iframe",B5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},U5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function V5(n){const e=n.config;ct(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?sp(e,k5):`https://${n.config.authDomain}/${P5}`,s={apiKey:e.apiKey,appName:n.name,v:Lc},c=U5.get(n.config.apiHost);c&&(s.eid=c);const f=n._getFrameworks();return f.length&&(s.fw=f.join(",")),`${t}?${rh(s).slice(1)}`}async function j5(n){const e=await M5(n),t=Js().gapi;return ct(t,n,"internal-error"),e.open({where:document.body,url:V5(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:B5,dontclear:!0},s=>new Promise(async(c,f)=>{await s.restyle({setHideOnLeave:!1});const p=Qs(n,"network-request-failed"),T=Js().setTimeout(()=>{f(p)},L5.get());function w(){Js().clearTimeout(T),c(s)}s.ping(w).then(w,()=>{f(p)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},H5=500,z5=600,G5="_blank",q5="http://localhost";class h_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Y5(n,e,t,s=H5,c=z5){const f=Math.max((window.screen.availHeight-c)/2,0).toString(),p=Math.max((window.screen.availWidth-s)/2,0).toString();let T="";const w={...F5,width:s.toString(),height:c.toString(),top:f,left:p},E=li().toLowerCase();t&&(T=gT(E)?G5:t),fT(E)&&(e=e||q5,w.scrollbars="yes");const C=Object.entries(w).reduce((M,[B,W])=>`${M}${B}=${W},`,"");if(gO(E)&&T!=="_self")return X5(e||"",T),new h_(null);const I=window.open(e||"",T,C);ct(I,n,"popup-blocked");try{I.focus()}catch{}return new h_(I)}function X5(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W5="__/auth/handler",K5="emulator/auth/handler",Q5=encodeURIComponent("fac");async function f_(n,e,t,s,c,f){ct(n.config.authDomain,n,"auth-domain-config-required"),ct(n.config.apiKey,n,"invalid-api-key");const p={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:Lc,eventId:c};if(e instanceof TT){e.setDefaultLanguage(n.languageCode),p.providerId=e.providerId||"",SN(e.getCustomParameters())||(p.customParameters=JSON.stringify(e.getCustomParameters()));for(const[C,I]of Object.entries({}))p[C]=I}if(e instanceof ph){const C=e.getScopes().filter(I=>I!=="");C.length>0&&(p.scopes=C.join(","))}n.tenantId&&(p.tid=n.tenantId);const T=p;for(const C of Object.keys(T))T[C]===void 0&&delete T[C];const w=await n._getAppCheckToken(),E=w?`#${Q5}=${encodeURIComponent(w)}`:"";return`${Z5(n)}?${rh(T).slice(1)}${E}`}function Z5({config:n}){return n.emulator?sp(n,K5):`https://${n.authDomain}/${W5}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xg="webStorageSupport";class J5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=DT,this._completeRedirectFn=A5,this._overrideRedirectResult=E5}async _openPopup(e,t,s,c){var p;Ga((p=this.eventManagers[e._key()])==null?void 0:p.manager,"_initialize() not called before _openPopup()");const f=await f_(e,t,s,Zg(),c);return Y5(e,f,up())}async _openRedirect(e,t,s,c){await this._originValidation(e);const f=await f_(e,t,s,Zg(),c);return t5(f),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:c,promise:f}=this.eventManagers[t];return c?Promise.resolve(c):(Ga(f,"If manager is not set, promise should be"),f)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await j5(e),s=new T5(e);return t.register("authEvent",c=>(ct(c==null?void 0:c.authEvent,e,"invalid-auth-event"),{status:s.onEvent(c.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(xg,{type:xg},c=>{var p;const f=(p=c==null?void 0:c[0])==null?void 0:p[xg];f!==void 0&&t(!!f),Ms(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=N5(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ET()||dT()||op()}}const $5=J5;var d_="@firebase/auth",g_="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ct(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tD(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function nD(n){Ac(new Tl("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),c=e.getProvider("heartbeat"),f=e.getProvider("app-check-internal"),{apiKey:p,authDomain:T}=s.options;ct(p&&!p.includes(":"),"invalid-api-key",{appName:s.name});const w={apiKey:p,authDomain:T,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_T(n)},E=new _O(s,c,f,w);return RO(E,t),E},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Ac(new Tl("auth-internal",e=>{const t=Qo(e.getProvider("auth").getImmediate());return(s=>new eD(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Po(d_,g_,tD(n)),Po(d_,g_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD=300,iD=xA("authIdTokenMaxAge")||rD;let m_=null;const sD=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>iD)return;const c=t==null?void 0:t.token;m_!==c&&(m_=c,await fetch(n,{method:c?"POST":"DELETE",headers:c?{Authorization:`Bearer ${c}`}:{}}))};function aD(n=bA()){const e=_m(n,"auth");if(e.isInitialized())return e.getImmediate();const t=NO(n,{popupRedirectResolver:$5,persistence:[u5,JO,DT]}),s=xA("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const f=new URL(s,location.origin);if(location.origin===f.origin){const p=sD(f.toString());KO(t,p,()=>p(t.currentUser)),WO(t,T=>p(T))}}const c=mA("auth");return c&&OO(t,`http://${c}`),t}function oD(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}wO({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=c=>{const f=Qs("internal-error");f.customData=c,t(f)},s.type="text/javascript",s.charset="UTF-8",oD().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});nD("Browser");const lD={apiKey:"AIzaSyDYZ6VUaaDmy-AvS4D9cM3zkN0Vg4lStuk",authDomain:"workshop-36cbe.firebaseapp.com",projectId:"workshop-36cbe",storageBucket:"workshop-36cbe.firebasestorage.app",messagingSenderId:"742601440632",appId:"1:742601440632:web:48e380f7e1441494ba9c8d"};let Rc;try{Rc=AA(lD)}catch(n){console.error("Firebase init failed:",n),Rc={name:"[Placeholder]"}}const mt=Rc.name!=="[Placeholder]"?L8(Rc):null,yl=Rc.name!=="[Placeholder]"?aD(Rc):null;var ys=(n=>(n.STUDENT="STUDENT",n.ADMIN="ADMIN",n.GUEST="GUEST",n))(ys||{});const cD=[{id:"p1",name:"",category:"food",price:150,description:"",imageUrl:"https://images.unsplash.com/photo-1558961363-fa8fdf82db35?q=80&w=400&h=300&auto=format&fit=crop",stock:12},{id:"p2",name:"",category:"food",price:80,description:"",imageUrl:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTd073NRJm_EnCeDAQmJCtozQj3hVaKtDXggA&s",stock:45},{id:"p3",name:"",category:"electronic",price:12e3,description:"",imageUrl:"https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?q=80&w=400&h=300&auto=format&fit=crop",stock:1},{id:"p4",name:"",category:"ticket",price:320,description:"",imageUrl:"https://images.unsplash.com/photo-1489599849927-2ee91cede3ba?q=80&w=400&h=300&auto=format&fit=crop",stock:8},{id:"p5",name:"",category:"food",price:800,description:"",imageUrl:"https://images.unsplash.com/photo-1544739313-6fad02872377?q=80&w=400&h=300&auto=format&fit=crop",stock:3},{id:"p6",name:"",category:"electronic",price:2500,description:"",imageUrl:"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?q=80&w=400&h=300&auto=format&fit=crop",stock:5}],Uo=[{name:"",threshold:0,color:"bg-slate-400",icon:""},{name:"",threshold:500,color:"bg-blue-400",icon:""},{name:"",threshold:2e3,color:"bg-green-500",icon:""},{name:"",threshold:5e3,color:"bg-purple-500",icon:""},{name:"",threshold:1e4,color:"bg-orange-500",icon:""},{name:"",threshold:25e3,color:"bg-yellow-500",icon:""}],fp={USER:"workshop_user"},tm=["","","","","","","",""],yg=[{text:"",author:" (William Butler Yeats)"},{text:"",author:" (Winston Churchill)"},{text:" 20  80 ",author:" (Henry Ford)"},{text:"",author:" (Nelson Mandela)"},{text:"",author:" (Steve Jobs)"},{text:"",author:""},{text:"",author:""},{text:"",author:" (Aristotle)"},{text:"",author:" (Thomas Edison)"},{text:"",author:" (Pablo Picasso)"}],Rt={STUDENTS:"students",MISSIONS:"missions",PRODUCTS:"products",WISHES:"wishes",REDEMPTIONS:"redemptions",CHALLENGE_HISTORY:"challengeHistory",POINT_REASONS:"pointReasons",MISSION_SUBMISSIONS:"missionSubmissions",PRODUCT_CATEGORIES:"productCategories",BANNERS:"banners"},VT=[{id:"user_zhou",name:"",points:1200,totalEarned:2500,role:ys.STUDENT,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Zhou",password:"123",grade:"",isApproved:!0},{id:"user_hu",name:"",points:800,totalEarned:1800,role:ys.STUDENT,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Hu",password:"123",grade:"",isApproved:!0},{id:"user_lin",name:"",points:2100,totalEarned:4200,role:ys.STUDENT,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Lin",password:"123",grade:"",isApproved:!0}],Df={id:"user_admin",name:"",points:0,totalEarned:0,role:ys.ADMIN,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Admin",isApproved:!0},p_={id:"user_guest",name:"",points:0,totalEarned:0,role:ys.GUEST,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Guest",isApproved:!0},x_=async()=>{try{const n=await $d($i(mt,Rt.STUDENTS));return n.empty?(await uD(),VT):n.docs.map(e=>({...e.data(),id:e.id}))}catch(n){return console.error("Error fetching students:",n),[]}},uD=async()=>{const n=t0(mt);VT.forEach(e=>{const t=_n(mt,Rt.STUDENTS,e.id);n.set(t,e)}),await n.commit()},nm=async n=>{try{await ea(_n(mt,Rt.STUDENTS,n.id),n)}catch(e){console.error("Error saving student:",e),console.error("")}},hD=async n=>{const e=t0(mt);n.forEach(t=>{const s=_n(mt,Rt.STUDENTS,t.id);e.set(s,t)}),await e.commit()},fD=async n=>{try{const e=_n(mt,Rt.STUDENTS,n);await za(e,{isApproved:!0})}catch(e){console.error("Error approving student:",e)}},dD=async n=>{try{await dh(_n(mt,Rt.STUDENTS,n))}catch(e){console.error("Error deleting student:",e)}},y_=()=>{const n=localStorage.getItem(fp.USER);return n?JSON.parse(n):null},Ma=async n=>{localStorage.setItem(fp.USER,JSON.stringify(n)),n.role===ys.STUDENT&&await nm(n)},gD=async()=>{localStorage.removeItem(fp.USER),await yl.signOut()},mD=async n=>{try{await ea(_n(mt,Rt.REDEMPTIONS,n.id),n)}catch(e){console.error("Error adding redemption:",e)}},pD=async(n,e)=>{try{const t=_n(mt,Rt.REDEMPTIONS,n);await za(t,{status:e})}catch(t){console.error("Error updating redemption status:",t)}},xD=async n=>{try{const e=`cat_${Date.now()}`;await ea(_n(mt,Rt.PRODUCT_CATEGORIES,e),{id:e,name:n})}catch(e){console.error("Error adding category:",e)}},yD=async n=>{try{await dh(_n(mt,Rt.PRODUCT_CATEGORIES,n))}catch(e){console.error("Error deleting category:",e)}},jT=n=>Wa($i(mt,Rt.PRODUCT_CATEGORIES),e=>{const t=e.docs.map(s=>({...s.data(),id:s.id}));n(t)}),ED=[{id:"m1",title:"",description:"",points:100,type:"normal",isActive:!0,maxAttempts:1},{id:"m2",title:" 80 ",description:"",points:300,type:"challenge",isActive:!0,maxAttempts:1},{id:"m3",title:" 90 ",description:"",points:1e3,type:"hard",isActive:!0,maxAttempts:1}],_D=async()=>{const n=t0(mt);ED.forEach(e=>{const t=_n(mt,Rt.MISSIONS,e.id);n.set(t,e)}),await n.commit()},wD=async n=>{try{await ea(_n(mt,Rt.MISSIONS,n.id),n)}catch(e){console.error("Error adding mission:",e)}},AD=async n=>{try{const e=_n(mt,Rt.MISSIONS,n),t=await yd(e);if(t.exists()){const s=t.data();await za(e,{isActive:!s.isActive})}}catch(e){console.error("Error toggling mission:",e)}},bD=async n=>{try{const e=`h_${Date.now()}_${n.userId}`;await ea(_n(mt,Rt.CHALLENGE_HISTORY,e),n)}catch(e){console.error("Error adding challenge history:",e)}},TD=async(n,e)=>{try{const t=new Date;t.setHours(0,0,0,0);const s=Zd($i(mt,Rt.CHALLENGE_HISTORY),Vu("userId","==",n),Vu("missionId","==",e),Vu("timestamp",">=",t.getTime()),H8(1));return!(await $d(s)).empty}catch(t){return console.error("Error checking mission completion:",t),!1}},vD=async n=>{try{const e=new Date;e.setHours(0,0,0,0);const t=Zd($i(mt,Rt.CHALLENGE_HISTORY),Vu("userId","==",n),Vu("timestamp",">=",e.getTime())),s=await $d(t),c=new Set;return s.forEach(f=>{const p=f.data();p.missionId&&c.add(p.missionId)}),c}catch(e){return console.error("Error fetching today completed missions:",e),new Set}},SD=async n=>{try{if(await TD(n.userId,n.missionId)){console.warn("Mission already completed today");return}const t=new Date;if(t.setHours(0,0,0,0),(await $d(Zd($i(mt,Rt.MISSION_SUBMISSIONS)))).docs.find(f=>{const p=f.data();return p.userId===n.userId&&p.missionId===n.missionId&&p.status==="pending"&&p.timestamp>=t.getTime()})){console.warn("Mission submission already pending today");return}await ea(_n(mt,Rt.MISSION_SUBMISSIONS,n.id),n)}catch(e){console.error("Error submitting mission:",e)}},CD=async n=>{try{const e=_n(mt,Rt.MISSION_SUBMISSIONS,n),t=await yd(e);if(t.exists()){const s=t.data();await za(e,{status:"approved"}),await bD({id:`h_${Date.now()}`,userId:s.userId,missionId:s.missionId,timestamp:Date.now()});const c=_n(mt,Rt.STUDENTS,s.userId),f=await yd(c);if(f.exists()){const p=f.data();await za(c,{points:p.points+s.points,totalEarned:p.totalEarned+s.points})}}}catch(e){console.error("Error approving mission:",e)}},ID=async n=>{try{const e=_n(mt,Rt.MISSION_SUBMISSIONS,n);await za(e,{status:"rejected"})}catch(e){console.error("Error rejecting mission:",e)}},FT=n=>Wa($i(mt,Rt.MISSION_SUBMISSIONS),e=>{n(e.docs.map(t=>({...t.data(),id:t.id})))}),ND=async()=>{const n=t0(mt);cD.forEach(e=>{const t=_n(mt,Rt.PRODUCTS,e.id);n.set(t,e)}),await n.commit()},RD=async n=>{try{await ea(_n(mt,Rt.PRODUCTS,n.id),n)}catch(e){console.error("Error adding product:",e)}},HT=async(n,e)=>{try{const t=_n(mt,Rt.PRODUCTS,n);await za(t,{stock:Math.max(0,e)})}catch(t){console.error("Error updating product stock:",t)}},OD=async n=>{try{await dh(_n(mt,Rt.PRODUCTS,n))}catch(e){console.error("Error deleting product:",e)}},DD=async n=>{try{await ea(_n(mt,Rt.POINT_REASONS,n.id),n)}catch(e){console.error("Error adding point reason:",e)}},MD=async n=>{try{await dh(_n(mt,Rt.POINT_REASONS,n))}catch(e){console.error("Error deleting point reason:",e)}},LD=n=>Wa($i(mt,Rt.POINT_REASONS),e=>{const t=e.docs.map(s=>({...s.data(),id:s.id}));n(t)}),PD=async n=>{try{await ea(_n(mt,Rt.WISHES,n.id),n)}catch(e){console.error("Error adding wish:",e)}},kD=async(n,e)=>{try{const t=_n(mt,Rt.WISHES,n);await za(t,e)}catch(t){console.error("Error updating wish:",t)}},BD=async(n,e)=>{try{const t=_n(mt,Rt.WISHES,n),s=await yd(t);if(s.exists()){const f=s.data().likedBy||[];if(f.includes(e)){console.error("");return}await za(t,{likedBy:[...f,e]})}}catch(t){console.error("Error liking wish:",t)}},UD=n=>Wa($i(mt,Rt.STUDENTS),e=>{const t=e.docs.map(s=>({...s.data(),id:s.id}));n(t)},e=>{console.error("Error in subscribeToStudents:",e)}),zT=n=>Wa($i(mt,Rt.MISSIONS),e=>{e.empty&&_D().catch(console.error);const t=e.docs.map(s=>({...s.data(),id:s.id}));n(t)},e=>console.error("Error subscribing to missions:",e)),GT=n=>Wa($i(mt,Rt.PRODUCTS),e=>{e.empty&&ND().catch(console.error);const t=e.docs.map(s=>({...s.data(),id:s.id}));n(t)},e=>{console.error("Error subscribing to products:",e),console.error("")}),qT=n=>Wa($i(mt,Rt.WISHES),e=>{const t=e.docs.map(s=>({...s.data(),id:s.id}));n(t)},e=>console.error("Error subscribing to wishes:",e)),YT=n=>Wa($i(mt,Rt.REDEMPTIONS),e=>{const t=e.docs.map(s=>{const c=s.data();return{id:s.id,status:"pending",pointsSpent:0,productName:"",timestamp:Date.now(),userId:"unknown",qrCodeData:"",...c}});n(t)},e=>{console.error("Error subscribing to redemptions:",e)}),VD=async(n,e="",t="center",s="h-48",c="md:h-72")=>{try{const f={id:`banner_${Date.now()}`,imageUrl:n,tag:e,active:!0,timestamp:Date.now(),objectPosition:t,mobileHeight:s,desktopHeight:c};await ea(_n(mt,Rt.BANNERS,f.id),f)}catch(f){throw console.error("Error adding banner:",f),f}},jD=async n=>{try{await dh(_n(mt,Rt.BANNERS,n))}catch(e){throw console.error("Error deleting banner:",e),e}},dp=n=>{const e=Zd($i(mt,Rt.BANNERS));return Wa(e,t=>{const s=t.docs.map(c=>c.data());s.sort((c,f)=>f.timestamp-c.timestamp),n(s)},t=>{console.error("Error subscribing to banners:",t)})},FD=({user:n,onUserUpdate:e})=>{const{showAlert:t}=Dc(),[s,c]=re.useState(!1),f=T=>{var C;const w=(C=T.target.files)==null?void 0:C[0];if(!w)return;if(w.size>500*1024){t(" 500KB ","error");return}if(!w.type.startsWith("image/")){t(" JPG  PNG ","error");return}c(!0);const E=new FileReader;E.onloadend=async()=>{try{const I=E.result,M={...n,avatar:I};await Ma(M),e(),t("","success")}catch(I){console.error("Error updating avatar:",I),t("","error")}finally{c(!1)}},E.readAsDataURL(w)},p=async()=>{if(confirm(""))try{const T=`https://api.dicebear.com/7.x/avataaars/svg?seed=${n.name}&mouth=smile&eyebrows=defaultNatural&eyes=default`,w={...n,avatar:T};await Ma(w),e(),t("","success")}catch(T){console.error("Error resetting avatar:",T),t("","error")}};return v.jsxs("div",{className:"space-y-8 pb-20 animate-in fade-in duration-500",children:[v.jsxs("header",{children:[v.jsxs("h1",{className:"text-3xl font-black text-slate-800 flex items-center gap-3",children:[v.jsx(td,{className:"text-indigo-500"}),""]}),v.jsx("p",{className:"text-slate-500 mt-1 font-medium",children:""})]}),v.jsx("div",{className:"bg-white rounded-[2.5rem] p-8 border border-slate-100 shadow-xl shadow-slate-200/50",children:v.jsxs("div",{className:"flex flex-col items-center gap-6",children:[v.jsxs("div",{className:"relative group",children:[v.jsx("div",{className:"absolute inset-0 bg-indigo-500 rounded-full blur-xl opacity-20 group-hover:opacity-40 transition-opacity"}),v.jsx("img",{src:n.avatar,alt:n.name,className:"w-40 h-40 rounded-full border-4 border-white shadow-2xl object-cover relative z-10"}),v.jsxs("label",{className:"absolute bottom-0 right-0 z-20 cursor-pointer",children:[v.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:f,disabled:s}),v.jsx("div",{className:"bg-slate-800 text-white p-3 rounded-2xl hover:bg-slate-700 transition-colors shadow-lg hover:scale-105 active:scale-95",children:v.jsx(Tg,{size:20})})]})]}),v.jsxs("div",{className:"text-center",children:[v.jsx("h2",{className:"text-2xl font-black text-slate-800",children:n.name}),v.jsxs("div",{className:"flex items-center justify-center gap-2 mt-1",children:[v.jsx("span",{className:"text-slate-400 font-bold text-sm uppercase tracking-wider",children:n.role==="ADMIN"?"":""}),v.jsxs("span",{className:"px-2 py-0.5 rounded-lg bg-indigo-100 text-indigo-700 text-xs font-black",children:["Lv.",Math.floor(n.totalEarned/500)+1]})]})]}),v.jsxs("div",{className:"w-full max-w-sm space-y-4 pt-6 mt-6 border-t border-slate-50",children:[v.jsxs("label",{className:"block w-full cursor-pointer",children:[v.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:f,disabled:s}),v.jsxs("div",{className:"w-full bg-indigo-50 hover:bg-indigo-100 text-indigo-600 font-bold py-4 rounded-2xl transition-all flex items-center justify-center gap-2 border-2 border-transparent hover:border-indigo-200",children:[v.jsx(Cg,{size:20}),s?"...":""]})]}),v.jsxs("button",{onClick:p,className:"w-full bg-slate-50 hover:bg-slate-100 text-slate-500 font-bold py-4 rounded-2xl transition-all flex items-center justify-center gap-2",children:[v.jsx(A3,{size:20}),""]})]}),v.jsx("div",{className:"bg-amber-50 rounded-2xl p-4 text-xs font-bold text-amber-600/80 leading-relaxed text-center max-w-sm",children:"  500KB "})]})})]})};var HD={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var E_;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(E_||(E_={}));var __;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(__||(__={}));var w_;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(w_||(w_={}));var A_;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(A_||(A_={}));var b_;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(b_||(b_={}));var T_;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(T_||(T_={}));var v_;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(v_||(v_={}));var S_;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(S_||(S_={}));var C_;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(C_||(C_={}));var I_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(I_||(I_={}));var N_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(N_||(N_={}));var R_;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(R_||(R_={}));var O_;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(O_||(O_={}));var D_;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(D_||(D_={}));var M_;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(M_||(M_={}));var L_;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(L_||(L_={}));var P_;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(P_||(P_={}));var k_;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(k_||(k_={}));var B_;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(B_||(B_={}));var U_;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(U_||(U_={}));var V_;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(V_||(V_={}));var j_;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(j_||(j_={}));var F_;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(F_||(F_={}));var H_;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(H_||(H_={}));var z_;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(z_||(z_={}));var G_;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(G_||(G_={}));var q_;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(q_||(q_={}));var Y_;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Y_||(Y_={}));var X_;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(X_||(X_={}));var W_;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(W_||(W_={}));var K_;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(K_||(K_={}));var Q_;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(Q_||(Q_={}));var Z_;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(Z_||(Z_={}));var J_;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(J_||(J_={}));var $_;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})($_||($_={}));var ew;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(ew||(ew={}));var tw;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(tw||(tw={}));var nw;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(nw||(nw={}));var rw;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(rw||(rw={}));var iw;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(iw||(iw={}));var sw;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(sw||(sw={}));var aw;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(aw||(aw={}));var ow;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(ow||(ow={}));var lw;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(lw||(lw={}));var cw;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(cw||(cw={}));var uw;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(uw||(uw={}));var hw;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(hw||(hw={}));var fw;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(fw||(fw={}));var dw;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(dw||(dw={}));var gw;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(gw||(gw={}));var mw;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(mw||(mw={}));var pw;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(pw||(pw={}));var xw;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(xw||(xw={}));var yw;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(yw||(yw={}));var Ew;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Ew||(Ew={}));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var _w;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(_w||(_w={}));function vd(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(n);c<s.length;c++)e.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(n,s[c])&&(t[s[c]]=n[s[c]]);return t}function ww(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Yn(n){return this instanceof Yn?(this.v=n,this):new Yn(n)}function Fu(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),c,f=[];return c=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),T("next"),T("throw"),T("return",p),c[Symbol.asyncIterator]=function(){return this},c;function p(B){return function(W){return Promise.resolve(W).then(B,I)}}function T(B,W){s[B]&&(c[B]=function($){return new Promise(function(q,_e){f.push([B,$,q,_e])>1||w(B,$)})},W&&(c[B]=W(c[B])))}function w(B,W){try{E(s[B](W))}catch($){M(f[0][3],$)}}function E(B){B.value instanceof Yn?Promise.resolve(B.value.v).then(C,I):M(f[0][2],B)}function C(B){w("next",B)}function I(B){w("throw",B)}function M(B,W){B(W),f.shift(),f.length&&w(f[0][0],f[0][1])}}function wc(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof ww=="function"?ww(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(f){t[f]=n[f]&&function(p){return new Promise(function(T,w){p=n[f](p),c(T,w,p.done,p.value)})}}function c(f,p,T,w){Promise.resolve(w).then(function(E){f({value:E,done:T})},p)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let XT=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return XT=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^t()&15>>+s/4).toString(16))};const zD=()=>XT();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rm(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const im=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _s extends Error{}class wi extends _s{constructor(e,t,s,c){super(`${wi.makeMessage(e,t,s)}`),this.status=e,this.headers=c,this.error=t}static makeMessage(e,t,s){const c=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):s;return e&&c?`${e} ${c}`:e?`${e} status code (no body)`:c||"(no status code or body)"}static generate(e,t,s,c){if(!e||!c)return new s0({message:s,cause:im(t)});const f=t;return e===400?new KT(e,f,s,c):e===401?new QT(e,f,s,c):e===403?new ZT(e,f,s,c):e===404?new JT(e,f,s,c):e===409?new $T(e,f,s,c):e===422?new ev(e,f,s,c):e===429?new tv(e,f,s,c):e>=500?new nv(e,f,s,c):new wi(e,f,s,c)}}class sm extends wi{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class s0 extends wi{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class WT extends s0{constructor({message:e}={}){super({message:e??"Request timed out."})}}class KT extends wi{}class QT extends wi{}class ZT extends wi{}class JT extends wi{}class $T extends wi{}class ev extends wi{}class tv extends wi{}class nv extends wi{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const GD=/^[a-z][a-z0-9+.-]*:/i,qD=n=>GD.test(n);let am=n=>(am=Array.isArray,am(n));const YD=am;let XD=YD;const Aw=XD;function WD(n){if(!n)return!0;for(const e in n)return!1;return!0}function KD(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const QD=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new _s(`${n} must be an integer`);if(e<0)throw new _s(`${n} must be a positive integer`);return e},ZD=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const JD=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fc="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $D(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const eM=()=>{var n,e,t,s,c;const f=$D();if(f==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":fc,"X-Stainless-OS":Tw(Deno.build.os),"X-Stainless-Arch":bw(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":fc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(f==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":fc,"X-Stainless-OS":Tw((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":bw((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(c=globalThis.process.version)!==null&&c!==void 0?c:"unknown"};const p=tM();return p?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":fc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${p.browser}`,"X-Stainless-Runtime-Version":p.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":fc,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function tM(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const s=t.exec(navigator.userAgent);if(s){const c=s[1]||0,f=s[2]||0,p=s[3]||0;return{browser:e,version:`${c}.${f}.${p}`}}}return null}const bw=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",Tw=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let Mf;const nM=()=>Mf??(Mf=eM());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rM(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function rv(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function iM(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return rv({start(){},async pull(t){const{done:s,value:c}=await e.next();s?t.close():t.enqueue(c)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function iv(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function sM(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const s=n.getReader(),c=s.cancel();s.releaseLock(),await c}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aM=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sv=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Eg(n,e,t){return sv(),new File(n,e??"unknown_file",t)}function oM(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const lM=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const av=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",cM=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&av(n),uM=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function hM(n,e,t){if(sv(),n=await n,cM(n))return n instanceof File?n:Eg([await n.arrayBuffer()],n.name);if(uM(n)){const c=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),Eg(await om(c),e,t)}const s=await om(n);if(e||(e=oM(n)),!(t!=null&&t.type)){const c=s.find(f=>typeof f=="object"&&"type"in f&&f.type);typeof c=="string"&&(t=Object.assign(Object.assign({},t),{type:c}))}return Eg(s,e,t)}async function om(n){var e,t,s,c,f;let p=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)p.push(n);else if(av(n))p.push(n instanceof Blob?n:await n.arrayBuffer());else if(lM(n))try{for(var T=!0,w=wc(n),E;E=await w.next(),e=E.done,!e;T=!0){c=E.value,T=!1;const C=c;p.push(...await om(C))}}catch(C){t={error:C}}finally{try{!T&&!e&&(s=w.return)&&await s.call(w)}finally{if(t)throw t.error}}else{const C=(f=n==null?void 0:n.constructor)===null||f===void 0?void 0:f.name;throw new Error(`Unexpected data type: ${typeof n}${C?`; constructor: ${C}`:""}${fM(n)}`)}return p}function fM(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ov{constructor(e){this._client=e}}ov._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lv(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const vw=Object.freeze(Object.create(null)),dM=(n=lv)=>(function(t,...s){if(t.length===1)return t[0];let c=!1;const f=[],p=t.reduce((C,I,M)=>{var B,W,$;/[?#]/.test(I)&&(c=!0);const q=s[M];let _e=(c?encodeURIComponent:n)(""+q);return M!==s.length&&(q==null||typeof q=="object"&&q.toString===(($=Object.getPrototypeOf((W=Object.getPrototypeOf((B=q.hasOwnProperty)!==null&&B!==void 0?B:vw))!==null&&W!==void 0?W:vw))===null||$===void 0?void 0:$.toString))&&(_e=q+"",f.push({start:C.length+I.length,length:_e.length,error:`Value of type ${Object.prototype.toString.call(q).slice(8,-1)} is not a valid path parameter`})),C+I+(M===s.length?"":_e)},""),T=p.split(/[?#]/,1)[0],w=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let E;for(;(E=w.exec(T))!==null;)f.push({start:E.index,length:E[0].length,error:`Value "${E[0]}" can't be safely passed as a path parameter`});if(f.sort((C,I)=>C.start-I.start),f.length>0){let C=0;const I=f.reduce((M,B)=>{const W=" ".repeat(B.start-C),$="^".repeat(B.length);return C=B.start+B.length,M+W+$},"");throw new _s(`Path parameters result in path with invalid segments:
${f.map(M=>M.error).join(`
`)}
${p}
${I}`)}return p}),Lf=dM(lv);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cv extends ov{create(e,t){var s;const{api_version:c=this._client.apiVersion}=e,f=vd(e,["api_version"]);if("model"in f&&"agent_config"in f)throw new _s("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in f&&"generation_config"in f)throw new _s("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Lf`/${c}/interactions`,Object.assign(Object.assign({body:f},t),{stream:(s=e.stream)!==null&&s!==void 0?s:!1}))}delete(e,t={},s){const{api_version:c=this._client.apiVersion}=t??{};return this._client.delete(Lf`/${c}/interactions/${e}`,s)}cancel(e,t={},s){const{api_version:c=this._client.apiVersion}=t??{};return this._client.post(Lf`/${c}/interactions/${e}/cancel`,s)}get(e,t={},s){var c;const f=t??{},{api_version:p=this._client.apiVersion}=f,T=vd(f,["api_version"]);return this._client.get(Lf`/${p}/interactions/${e}`,Object.assign(Object.assign({query:T},s),{stream:(c=t==null?void 0:t.stream)!==null&&c!==void 0?c:!1}))}}cv._key=Object.freeze(["interactions"]);class uv extends cv{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gM(n){let e=0;for(const c of n)e+=c.length;const t=new Uint8Array(e);let s=0;for(const c of n)t.set(c,s),s+=c.length;return t}let Pf;function gp(n){let e;return(Pf??(e=new globalThis.TextEncoder,Pf=e.encode.bind(e)))(n)}let kf;function Sw(n){let e;return(kf??(e=new globalThis.TextDecoder,kf=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class a0{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?gp(e):e;this.buffer=gM([this.buffer,t]);const s=[];let c;for(;(c=mM(this.buffer,this.carriageReturnIndex))!=null;){if(c.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=c.index;continue}if(this.carriageReturnIndex!=null&&(c.index!==this.carriageReturnIndex+1||c.carriage)){s.push(Sw(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const f=this.carriageReturnIndex!==null?c.preceding-1:c.preceding,p=Sw(this.buffer.subarray(0,f));s.push(p),this.buffer=this.buffer.subarray(c.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}a0.NEWLINE_CHARS=new Set([`
`,"\r"]);a0.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function mM(n,e){for(let c=e??0;c<n.length;c++){if(n[c]===10)return{preceding:c,index:c+1,carriage:!1};if(n[c]===13)return{preceding:c,index:c+1,carriage:!0}}return null}function pM(n){for(let s=0;s<n.length-1;s++){if(n[s]===10&&n[s+1]===10||n[s]===13&&n[s+1]===13)return s+2;if(n[s]===13&&n[s+1]===10&&s+3<n.length&&n[s+2]===13&&n[s+3]===10)return s+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Sd={off:0,error:200,warn:300,info:400,debug:500},Cw=(n,e,t)=>{if(n){if(KD(Sd,n))return n;_i(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Sd))}`)}};function Ou(){}function Bf(n,e,t){return!e||Sd[n]>Sd[t]?Ou:e[n].bind(e)}const xM={error:Ou,warn:Ou,info:Ou,debug:Ou};let Iw=new WeakMap;function _i(n){var e;const t=n.logger,s=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return xM;const c=Iw.get(t);if(c&&c[0]===s)return c[1];const f={error:Bf("error",t,s),warn:Bf("warn",t,s),info:Bf("info",t,s),debug:Bf("debug",t,s)};return Iw.set(t,[s,f]),f}const El=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gc{constructor(e,t,s){this.iterator=e,this.controller=t,this.client=s}static fromSSEResponse(e,t,s){let c=!1;const f=s?_i(s):console;function p(){return Fu(this,arguments,function*(){var w,E,C,I;if(c)throw new _s("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");c=!0;let M=!1;try{try{for(var B=!0,W=wc(yM(e,t)),$;$=yield Yn(W.next()),w=$.done,!w;B=!0){I=$.value,B=!1;const q=I;if(!M)if(q.data.startsWith("[DONE]")){M=!0;continue}else try{yield yield Yn(JSON.parse(q.data))}catch(_e){throw f.error("Could not parse message into JSON:",q.data),f.error("From chunk:",q.raw),_e}}}catch(q){E={error:q}}finally{try{!B&&!w&&(C=W.return)&&(yield Yn(C.call(W)))}finally{if(E)throw E.error}}M=!0}catch(q){if(rm(q))return yield Yn(void 0);throw q}finally{M||t.abort()}})}return new gc(p,t,s)}static fromReadableStream(e,t,s){let c=!1;function f(){return Fu(this,arguments,function*(){var w,E,C,I;const M=new a0,B=iv(e);try{for(var W=!0,$=wc(B),q;q=yield Yn($.next()),w=q.done,!w;W=!0){I=q.value,W=!1;const _e=I;for(const ae of M.decode(_e))yield yield Yn(ae)}}catch(_e){E={error:_e}}finally{try{!W&&!w&&(C=$.return)&&(yield Yn(C.call($)))}finally{if(E)throw E.error}}for(const _e of M.flush())yield yield Yn(_e)})}function p(){return Fu(this,arguments,function*(){var w,E,C,I;if(c)throw new _s("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");c=!0;let M=!1;try{try{for(var B=!0,W=wc(f()),$;$=yield Yn(W.next()),w=$.done,!w;B=!0){I=$.value,B=!1;const q=I;M||q&&(yield yield Yn(JSON.parse(q)))}}catch(q){E={error:q}}finally{try{!B&&!w&&(C=W.return)&&(yield Yn(C.call(W)))}finally{if(E)throw E.error}}M=!0}catch(q){if(rm(q))return yield Yn(void 0);throw q}finally{M||t.abort()}})}return new gc(p,t,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],s=this.iterator(),c=f=>({next:()=>{if(f.length===0){const p=s.next();e.push(p),t.push(p)}return f.shift()}});return[new gc(()=>c(e),this.controller,this.client),new gc(()=>c(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return rv({async start(){t=e[Symbol.asyncIterator]()},async pull(s){try{const{value:c,done:f}=await t.next();if(f)return s.close();const p=gp(JSON.stringify(c)+`
`);s.enqueue(p)}catch(c){s.error(c)}},async cancel(){var s;await((s=t.return)===null||s===void 0?void 0:s.call(t))}})}}function yM(n,e){return Fu(this,arguments,function*(){var s,c,f,p;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new _s("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new _s("Attempted to iterate over a response with no body");const T=new _M,w=new a0,E=iv(n.body);try{for(var C=!0,I=wc(EM(E)),M;M=yield Yn(I.next()),s=M.done,!s;C=!0){p=M.value,C=!1;const B=p;for(const W of w.decode(B)){const $=T.decode(W);$&&(yield yield Yn($))}}}catch(B){c={error:B}}finally{try{!C&&!s&&(f=I.return)&&(yield Yn(f.call(I)))}finally{if(c)throw c.error}}for(const B of w.flush()){const W=T.decode(B);W&&(yield yield Yn(W))}})}function EM(n){return Fu(this,arguments,function*(){var t,s,c,f;let p=new Uint8Array;try{for(var T=!0,w=wc(n),E;E=yield Yn(w.next()),t=E.done,!t;T=!0){f=E.value,T=!1;const C=f;if(C==null)continue;const I=C instanceof ArrayBuffer?new Uint8Array(C):typeof C=="string"?gp(C):C;let M=new Uint8Array(p.length+I.length);M.set(p),M.set(I,p.length),p=M;let B;for(;(B=pM(p))!==-1;)yield yield Yn(p.slice(0,B)),p=p.slice(B)}}catch(C){s={error:C}}finally{try{!T&&!t&&(c=w.return)&&(yield Yn(c.call(w)))}finally{if(s)throw s.error}}p.length>0&&(yield yield Yn(p))})}class _M{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const f={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],f}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,s,c]=wM(e,":");return c.startsWith(" ")&&(c=c.substring(1)),t==="event"?this.event=c:t==="data"&&this.data.push(c),null}}function wM(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function AM(n,e){const{response:t,requestLogID:s,retryOfRequestLogID:c,startTime:f}=e,p=await(async()=>{var T;if(e.options.stream)return _i(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):gc.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const w=t.headers.get("content-type"),E=(T=w==null?void 0:w.split(";")[0])===null||T===void 0?void 0:T.trim();return(E==null?void 0:E.includes("application/json"))||(E==null?void 0:E.endsWith("+json"))?await t.json():await t.text()})();return _i(n).debug(`[${s}] response parsed`,El({retryOfRequestLogID:c,url:t.url,status:t.status,body:p,durationMs:Date.now()-f})),p}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mp extends Promise{constructor(e,t,s=AM){super(c=>{c(null)}),this.responsePromise=t,this.parseResponse=s,this.client=e}_thenUnwrap(e){return new mp(this.client,this.responsePromise,async(t,s)=>e(await this.parseResponse(t,s),s))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hv=Symbol("brand.privateNullableHeaders");function*bM(n){if(!n)return;if(hv in n){const{values:s,nulls:c}=n;yield*s.entries();for(const f of c)yield[f,null];return}let e=!1,t;n instanceof Headers?t=n.entries():Aw(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let s of t){const c=s[0];if(typeof c!="string")throw new TypeError("expected header name to be a string");const f=Aw(s[1])?s[1]:[s[1]];let p=!1;for(const T of f)T!==void 0&&(e&&!p&&(p=!0,yield[c,null]),yield[c,T])}}const bu=n=>{const e=new Headers,t=new Set;for(const s of n){const c=new Set;for(const[f,p]of bM(s)){const T=f.toLowerCase();c.has(T)||(e.delete(f),c.add(T)),p===null?(e.delete(f),t.add(T)):(e.append(f,p),t.delete(T))}}return{[hv]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _g=n=>{var e,t,s,c,f,p;if(typeof globalThis.process<"u")return(s=(t=(e=HD)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(p=(f=(c=globalThis.Deno.env)===null||c===void 0?void 0:c.get)===null||f===void 0?void 0:f.call(c,n))===null||p===void 0?void 0:p.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var fv;class o0{constructor(e){var t,s,c,f,p,T,w,{baseURL:E=_g("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:C=(t=_g("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:I="v1beta"}=e,M=vd(e,["baseURL","apiKey","apiVersion"]);const B=Object.assign(Object.assign({apiKey:C,apiVersion:I},M),{baseURL:E||"https://generativelanguage.googleapis.com"});this.baseURL=B.baseURL,this.timeout=(s=B.timeout)!==null&&s!==void 0?s:o0.DEFAULT_TIMEOUT,this.logger=(c=B.logger)!==null&&c!==void 0?c:console;const W="warn";this.logLevel=W,this.logLevel=(p=(f=Cw(B.logLevel,"ClientOptions.logLevel",this))!==null&&f!==void 0?f:Cw(_g("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&p!==void 0?p:W,this.fetchOptions=B.fetchOptions,this.maxRetries=(T=B.maxRetries)!==null&&T!==void 0?T:2,this.fetch=(w=B.fetch)!==null&&w!==void 0?w:rM(),this.encoder=aM,this._options=B,this.apiKey=C,this.apiVersion=I,this.clientAdapter=B.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=bu([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return bu([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return bu([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,s])=>typeof s<"u").map(([t,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(t)}=`;throw new _s(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${fc}`}defaultIdempotencyKey(){return`stainless-node-retry-${zD()}`}makeStatusError(e,t,s,c){return wi.generate(e,t,s,c)}buildURL(e,t,s){const c=!this.baseURLOverridden()&&s||this.baseURL,f=qD(e)?new URL(e):new URL(c+(c.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),p=this.defaultQuery();return WD(p)||(t=Object.assign(Object.assign({},p),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(f.search=this.stringifyQuery(t)),f.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:s}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,s){return this.request(Promise.resolve(s).then(c=>Object.assign({method:e,path:t},c)))}request(e,t=null){return new mp(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,s){var c,f,p;const T=await e,w=(c=T.maxRetries)!==null&&c!==void 0?c:this.maxRetries;t==null&&(t=w),await this.prepareOptions(T);const{req:E,url:C,timeout:I}=await this.buildRequest(T,{retryCount:w-t});await this.prepareRequest(E,{url:C,options:T});const M="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),B=s===void 0?"":`, retryOf: ${s}`,W=Date.now();if(_i(this).debug(`[${M}] sending request`,El({retryOfRequestLogID:s,method:T.method,url:C,options:T,headers:E.headers})),!((f=T.signal)===null||f===void 0)&&f.aborted)throw new sm;const $=new AbortController,q=await this.fetchWithTimeout(C,E,I,$).catch(im),_e=Date.now();if(q instanceof globalThis.Error){const Q=`retrying, ${t} attempts remaining`;if(!((p=T.signal)===null||p===void 0)&&p.aborted)throw new sm;const le=rm(q)||/timed? ?out/i.test(String(q)+("cause"in q?String(q.cause):""));if(t)return _i(this).info(`[${M}] connection ${le?"timed out":"failed"} - ${Q}`),_i(this).debug(`[${M}] connection ${le?"timed out":"failed"} (${Q})`,El({retryOfRequestLogID:s,url:C,durationMs:_e-W,message:q.message})),this.retryRequest(T,t,s??M);throw _i(this).info(`[${M}] connection ${le?"timed out":"failed"} - error; no more retries left`),_i(this).debug(`[${M}] connection ${le?"timed out":"failed"} (error; no more retries left)`,El({retryOfRequestLogID:s,url:C,durationMs:_e-W,message:q.message})),le?new WT:new s0({cause:q})}const ae=`[${M}${B}] ${E.method} ${C} ${q.ok?"succeeded":"failed"} with status ${q.status} in ${_e-W}ms`;if(!q.ok){const Q=await this.shouldRetry(q);if(t&&Q){const V=`retrying, ${t} attempts remaining`;return await sM(q.body),_i(this).info(`${ae} - ${V}`),_i(this).debug(`[${M}] response error (${V})`,El({retryOfRequestLogID:s,url:q.url,status:q.status,headers:q.headers,durationMs:_e-W})),this.retryRequest(T,t,s??M,q.headers)}const le=Q?"error; no more retries left":"error; not retryable";_i(this).info(`${ae} - ${le}`);const De=await q.text().catch(V=>im(V).message),Oe=ZD(De),j=Oe?void 0:De;throw _i(this).debug(`[${M}] response error (${le})`,El({retryOfRequestLogID:s,url:q.url,status:q.status,headers:q.headers,message:j,durationMs:Date.now()-W})),this.makeStatusError(q.status,Oe,j,q.headers)}return _i(this).info(ae),_i(this).debug(`[${M}] response start`,El({retryOfRequestLogID:s,url:q.url,status:q.status,headers:q.headers,durationMs:_e-W})),{response:q,options:T,controller:$,requestLogID:M,retryOfRequestLogID:s,startTime:W}}async fetchWithTimeout(e,t,s,c){const f=t||{},{signal:p,method:T}=f,w=vd(f,["signal","method"]);p&&p.addEventListener("abort",()=>c.abort());const E=setTimeout(()=>c.abort(),s),C=globalThis.ReadableStream&&w.body instanceof globalThis.ReadableStream||typeof w.body=="object"&&w.body!==null&&Symbol.asyncIterator in w.body,I=Object.assign(Object.assign(Object.assign({signal:c.signal},C?{duplex:"half"}:{}),{method:"GET"}),w);T&&(I.method=T.toUpperCase());try{return await this.fetch.call(void 0,e,I)}finally{clearTimeout(E)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,s,c){var f;let p;const T=c==null?void 0:c.get("retry-after-ms");if(T){const E=parseFloat(T);Number.isNaN(E)||(p=E)}const w=c==null?void 0:c.get("retry-after");if(w&&!p){const E=parseFloat(w);Number.isNaN(E)?p=Date.parse(w)-Date.now():p=E*1e3}if(!(p&&0<=p&&p<60*1e3)){const E=(f=e.maxRetries)!==null&&f!==void 0?f:this.maxRetries;p=this.calculateDefaultRetryTimeoutMillis(t,E)}return await JD(p),this.makeRequest(e,t-1,s)}calculateDefaultRetryTimeoutMillis(e,t){const f=t-e,p=Math.min(.5*Math.pow(2,f),8),T=1-Math.random()*.25;return p*T*1e3}async buildRequest(e,{retryCount:t=0}={}){var s,c,f;const p=Object.assign({},e),{method:T,path:w,query:E,defaultBaseURL:C}=p,I=this.buildURL(w,E,C);"timeout"in p&&QD("timeout",p.timeout),p.timeout=(s=p.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:M,body:B}=this.buildBody({options:p}),W=await this.buildHeaders({options:e,method:T,bodyHeaders:M,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:T,headers:W},p.signal&&{signal:p.signal}),globalThis.ReadableStream&&B instanceof globalThis.ReadableStream&&{duplex:"half"}),B&&{body:B}),(c=this.fetchOptions)!==null&&c!==void 0?c:{}),(f=p.fetchOptions)!==null&&f!==void 0?f:{}),url:I,timeout:p.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:s,retryCount:c}){let f={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),f[this.idempotencyHeader]=e.idempotencyKey);const p=await this.authHeaders(e);let T=bu([f,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(c)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),nM()),this._options.defaultHeaders,s,e.headers,p]);return this.validateHeaders(T),T.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=bu([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:iM(e)}:this.encoder({body:e,headers:s})}}o0.DEFAULT_TIMEOUT=6e4;class Xr extends o0{constructor(){super(...arguments),this.interactions=new uv(this)}}fv=Xr;Xr.GeminiNextGenAPIClient=fv;Xr.GeminiNextGenAPIClientError=_s;Xr.APIError=wi;Xr.APIConnectionError=s0;Xr.APIConnectionTimeoutError=WT;Xr.APIUserAbortError=sm;Xr.NotFoundError=JT;Xr.ConflictError=$T;Xr.RateLimitError=tv;Xr.BadRequestError=KT;Xr.AuthenticationError=QT;Xr.InternalServerError=nv;Xr.PermissionDeniedError=ZT;Xr.UnprocessableEntityError=ev;Xr.toFile=hM;Xr.Interactions=uv;const TM=()=>null,vM=async(n,e)=>{const t=yg[Math.floor(Math.random()*yg.length)],s=`${t.text} ${t.author}`;try{const c=TM();return c&&(await c.models.generateContent({model:"gemini-2.0-flash-exp",contents:`
        
        
        - ${n.name}
        - ${e.name}
        - ${n.points}
        - ${n.totalEarned}

        
        ${yg.map(p=>`${p.text}-- ${p.author}`).join(`
`)}

        30-60
        
      `})).text()||s}catch(c){return console.error("Gemini Error:",c),s}},SM=({user:n,rank:e,onUserUpdate:t})=>{var H,V;const{showAlert:s}=Dc(),[c,f]=re.useState("..."),[p,T]=re.useState([]),[w,E]=re.useState([]),[C,I]=re.useState(null),[M,B]=re.useState(new Set),[W,$]=re.useState(!1),[q,_e]=re.useState([]),[ae,Q]=re.useState(0),le=Uo[Uo.indexOf(e)+1]||null,De=le?Math.min(100,(n.totalEarned-e.threshold)/(le.threshold-e.threshold)*100):100,Oe=Math.floor(n.totalEarned/500)+1;re.useEffect(()=>{(async()=>{const fe=await vM(n,e);f(fe)})();const Z=zT(async fe=>{const me=fe.filter(Ge=>Ge.isActive);T(me);const be=await vD(n.id);B(be)}),J=FT(fe=>{const me=new Date;me.setHours(0,0,0,0),E(fe.filter(be=>be.userId===n.id&&be.timestamp>=me.getTime()))}),K=dp(_e);let $e;return q.length>1&&($e=setInterval(()=>{Q(fe=>(fe+1)%q.length)},5e3)),()=>{Z(),J(),K(),$e&&clearInterval($e)}},[n.id,e,q.length]);const j=async Y=>{if(C)return;if(Y.deadline&&Y.deadline<Date.now()){s("","error");return}if(w.some(J=>J.missionId===Y.id&&J.status==="pending")){s("","info");return}I(Y.id);try{await SD({id:`sub_${Date.now()}`,userId:n.id,userName:n.name,missionId:Y.id,missionTitle:Y.title,points:Y.points,timestamp:Date.now(),status:"pending"}),s("","success")}catch(J){console.error("Error submitting mission:",J),s("","error")}finally{I(null)}};return v.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-10 relative",children:[W&&v.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:v.jsxs("div",{className:"bg-white rounded-[2.5rem] max-w-lg w-full p-8 shadow-2xl animate-in zoom-in-95 duration-200 border border-slate-100 relative",children:[v.jsx("button",{onClick:()=>$(!1),className:"absolute top-6 right-6 p-2 bg-slate-100 rounded-full hover:bg-slate-200 transition-colors text-slate-500",children:v.jsx(Do,{size:20})}),v.jsxs("h3",{className:"text-2xl font-black text-slate-800 mb-6 flex items-center gap-3",children:[v.jsx(Vy,{className:"text-amber-500"}),""]}),v.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto pr-2 custom-scrollbar",children:Uo.map((Y,Z)=>v.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-2xl ${n.totalEarned>=Y.threshold?"bg-indigo-50 border-2 border-indigo-100":"bg-slate-50 border border-slate-100 grayscale opacity-70"}`,children:[v.jsx("div",{className:"text-3xl",children:Y.icon}),v.jsxs("div",{className:"flex-1",children:[v.jsx("h4",{className:"font-bold text-slate-800",children:Y.name}),v.jsxs("p",{className:"text-xs text-slate-500 font-bold mt-0.5",children:[" ",Y.threshold.toLocaleString()," "]})]}),n.totalEarned>=Y.threshold&&v.jsx("div",{className:"bg-indigo-500 text-white p-1 rounded-full",children:v.jsx(zu,{size:16})})]},Y.name))}),v.jsx("div",{className:"mt-6 text-center",children:v.jsx("p",{className:"text-xs text-slate-400 font-bold",children:""})})]})}),v.jsxs("header",{className:"flex flex-col md:flex-row md:items-start justify-between gap-4",children:[v.jsxs("div",{children:[v.jsxs("h1",{className:"text-3xl font-black text-slate-800 tracking-tight",children:["",n.name,""]}),v.jsxs("p",{className:"text-slate-500 mt-1 italic max-w-xl font-medium",children:['"',c,'"']})]}),v.jsxs("div",{className:"bg-amber-50 border border-amber-100 rounded-2xl px-5 py-3 flex items-center gap-3 self-end md:self-start shadow-sm",children:[v.jsx("div",{className:"bg-amber-500 p-2 rounded-xl text-white shadow-lg shadow-amber-200",children:v.jsx(g3,{size:20})}),v.jsxs("div",{children:[v.jsx("p",{className:"text-[10px] text-amber-700 font-black uppercase tracking-widest",children:""}),v.jsxs("p",{className:"text-2xl font-black text-amber-900 leading-none",children:[n.totalEarned.toLocaleString()," ",v.jsx("span",{className:"text-xs font-bold opacity-60",children:"PTS"})]})]})]})]}),q.length>0&&v.jsxs("div",{className:`relative w-full ${((H=q[ae])==null?void 0:H.mobileHeight)||"h-48"} ${((V=q[ae])==null?void 0:V.desktopHeight)||"md:h-72"} rounded-[3.5rem] overflow-hidden shadow-2xl shadow-indigo-100 group border-4 border-white transition-all duration-500`,children:[v.jsx("div",{className:"flex transition-transform duration-700 ease-in-out h-full",style:{transform:`translateX(-${ae*100}%)`},children:q.map(Y=>v.jsxs("div",{className:"min-w-full h-full relative",children:[v.jsx("img",{src:Y.imageUrl,alt:"banner",className:"w-full h-full object-cover",style:{objectPosition:Y.objectPosition||"center"}}),v.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent flex items-end justify-start p-12",children:v.jsx("div",{className:"mt-auto",children:v.jsx("span",{className:"bg-indigo-600/90 backdrop-blur text-white px-4 py-2 rounded-xl text-xs font-black uppercase tracking-[0.2em] shadow-lg",children:Y.tag||""})})})]},Y.id))}),v.jsx("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 flex gap-3",children:q.map((Y,Z)=>v.jsx("button",{onClick:()=>Q(Z),className:`w-2.5 h-2.5 rounded-full transition-all ${ae===Z?"bg-white w-10 shadow-lg":"bg-white/40 hover:bg-white/80"}`},Z))}),v.jsx("button",{onClick:()=>Q(Y=>(Y-1+q.length)%q.length),className:"absolute left-6 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/40 backdrop-blur p-4 rounded-full text-white opacity-0 group-hover:opacity-100 transition-all border border-white/10",children:v.jsx(lA,{size:24})}),v.jsx("button",{onClick:()=>Q(Y=>(Y+1)%q.length),className:"absolute right-6 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/40 backdrop-blur p-4 rounded-full text-white opacity-0 group-hover:opacity-100 transition-all border border-white/10",children:v.jsx(vg,{size:24})})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[v.jsxs("div",{className:"md:col-span-2 bg-white rounded-[2.5rem] p-10 border border-slate-100 shadow-xl shadow-slate-200/40 relative overflow-hidden",children:[v.jsxs("div",{className:"flex items-center justify-between mb-12",children:[v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[v.jsx("h3",{className:"text-slate-400 text-[10px] font-black uppercase tracking-[0.2em]",children:""}),v.jsx("button",{onClick:()=>$(!0),className:"text-indigo-400 hover:text-indigo-600 transition-colors",title:"",children:v.jsx(uA,{size:14})})]}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("span",{className:"text-4xl filter drop-shadow-md",children:e.icon}),v.jsxs("span",{className:`text-2xl font-black px-6 py-2 rounded-2xl text-white ${e.color} shadow-xl shadow-indigo-100 border-2 border-white/20 flex items-center gap-2`,children:[e.name," ",v.jsxs("span",{className:"text-sm bg-white/20 px-2 py-0.5 rounded-lg border border-white/20",children:["Lv.",Oe]})]})]})]}),le&&v.jsxs("div",{className:"text-right",children:[v.jsx("h3",{className:"text-slate-400 text-[10px] font-black uppercase tracking-[0.2em] mb-2",children:""}),v.jsxs("div",{className:"flex items-center gap-3 justify-end group",children:[v.jsx("span",{className:"text-lg font-black text-slate-700 group-hover:text-indigo-600 transition-colors",children:le.name}),v.jsx("span",{className:"text-2xl animate-bounce",children:le.icon})]})]})]}),v.jsxs("div",{className:"relative pt-12 pb-6 px-2",children:[v.jsx("div",{className:"h-5 bg-slate-100 rounded-full w-full overflow-hidden border border-slate-200 shadow-inner p-1",children:v.jsx("div",{className:`h-full ${e.color} transition-all duration-1000 ease-out rounded-full relative overflow-hidden`,style:{width:`${De}%`},children:v.jsx("div",{className:"absolute inset-0 bg-white/20 animate-pulse"})})}),v.jsx("div",{className:"absolute top-0 transition-all duration-1000 ease-out",style:{left:`calc(${De}% - 30px)`},children:v.jsxs("div",{className:"relative group cursor-pointer",children:[v.jsx("div",{className:"p-1.5 bg-white rounded-full shadow-2xl border border-slate-50 transition-transform group-hover:scale-110 active:scale-95",children:v.jsx("img",{src:n.avatar,className:`w-14 h-14 rounded-full border-4 border-opacity-30 object-cover ${e.color.replace("bg-","border-")}`,alt:"me"})}),v.jsxs("div",{className:`absolute -top-10 left-1/2 -translate-x-1/2 px-3 py-1 rounded-xl text-[11px] font-black text-white shadow-xl ${e.color} whitespace-nowrap`,children:[" ",Math.round(De),"%"]})]})})]}),v.jsx("p",{className:"text-center text-xs text-slate-400 font-bold mt-8 tracking-wide",children:le?`${le.name} ${le.threshold-n.totalEarned} `:""})]}),v.jsxs("div",{className:"bg-gradient-to-br from-indigo-600 via-indigo-700 to-indigo-900 rounded-[2.5rem] p-10 text-white shadow-2xl shadow-indigo-300 flex flex-col justify-center items-center text-center relative overflow-hidden",children:[v.jsx("div",{className:"absolute -top-10 -right-10 w-40 h-40 bg-white/10 rounded-full blur-3xl"}),v.jsx("div",{className:"absolute -bottom-10 -left-10 w-40 h-40 bg-indigo-500/20 rounded-full blur-3xl"}),v.jsx("div",{className:"w-20 h-20 bg-white/20 backdrop-blur-xl rounded-[2rem] flex items-center justify-center mb-6 border border-white/20 shadow-xl",children:v.jsx(G3,{size:40,className:"text-white drop-shadow-md"})}),v.jsx("h3",{className:"text-indigo-200 text-sm font-black mb-1 uppercase tracking-widest",children:""}),v.jsx("p",{className:"text-6xl font-black mb-4 drop-shadow-lg",children:n.points.toLocaleString()}),v.jsx("div",{className:"px-5 py-1.5 bg-indigo-500/40 backdrop-blur rounded-full text-[10px] font-black tracking-[0.2em] uppercase border border-white/10",children:"SHOPPING POWER"})]})]}),v.jsxs("section",{className:"mt-16",children:[v.jsxs("div",{className:"flex items-center justify-between mb-8",children:[v.jsxs("h2",{className:"text-2xl font-black text-slate-800 flex items-center gap-3",children:[v.jsx(Mu,{className:"text-indigo-500",size:28}),""]}),v.jsx("div",{className:"flex items-center gap-4 text-xs font-bold text-slate-400",children:v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx(U3,{size:12,className:"text-amber-500"})," "]})})]}),v.jsx("div",{className:"grid grid-cols-1 gap-6",children:p.map(Y=>{const Z=M.has(Y.id);return v.jsx("div",{className:`bg-white border-2 border-slate-50 p-8 rounded-[2.5rem] transition-all group relative overflow-hidden ${Z?"opacity-60 grayscale":"shadow-sm hover:shadow-xl"} ${Y.id===C?"animate-pulse":""}`,children:v.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-8",children:[v.jsxs("div",{className:"flex gap-8 items-start",children:[v.jsx("div",{className:`w-20 h-20 rounded-3xl flex items-center justify-center shrink-0 shadow-inner ${Y.type==="normal"?"bg-emerald-50 text-emerald-600":Y.type==="challenge"?"bg-orange-50 text-orange-600":"bg-rose-50 text-rose-600"}`,children:Z?v.jsx(zu,{size:36}):Y.type==="normal"?v.jsx(Mu,{size:36}):Y.type==="challenge"?v.jsx(t3,{size:36}):v.jsx(Vy,{size:36})}),v.jsxs("div",{children:[v.jsx("div",{className:"flex items-center gap-3 mb-2",children:v.jsx("span",{className:`px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-widest ${Y.type==="normal"?"bg-emerald-100 text-emerald-700":Y.type==="challenge"?"bg-orange-100 text-orange-700":"bg-rose-100 text-rose-700"}`,children:Y.type==="normal"?"":Y.type==="challenge"?"":""})}),v.jsx("h3",{className:"text-2xl font-black text-slate-800 transition-colors",children:Y.title}),v.jsx("p",{className:"text-slate-500 mt-2 leading-relaxed text-lg font-medium max-w-2xl",children:Y.description}),Y.deadline&&v.jsxs("div",{className:`mt-3 flex items-center gap-2 text-sm font-black ${Y.deadline<Date.now()?"text-rose-500":"text-amber-500"}`,children:[v.jsx(Gu,{size:16}),Y.deadline<Date.now()?"":` ${new Date(Y.deadline).toLocaleString()}`]})]})]}),v.jsxs("div",{className:"flex flex-col md:items-end gap-6 shrink-0",children:[v.jsxs("div",{className:"flex flex-col items-end",children:[v.jsx("span",{className:"text-xs font-bold text-slate-400 mb-1 uppercase tracking-tighter",children:""}),v.jsxs("div",{className:"flex items-baseline gap-2",children:[v.jsx("span",{className:"text-4xl font-black text-indigo-600 tracking-tighter",children:Y.points}),v.jsx("span",{className:"text-sm font-bold text-slate-400",children:"PTS"})]})]}),v.jsxs("button",{onClick:()=>j(Y),disabled:C!==null||Z||w.some(J=>J.missionId===Y.id&&J.status==="pending")||Y.deadline!==void 0&&Y.deadline<Date.now(),className:`px-10 py-5 rounded-2xl font-black transition-all flex items-center gap-3 shadow-xl ${Z?"bg-slate-200 text-slate-500 cursor-not-allowed shadow-none":w.some(J=>J.missionId===Y.id&&J.status==="pending")?"bg-amber-100 text-amber-600 cursor-not-allowed shadow-none":Y.deadline!==void 0&&Y.deadline<Date.now()?"bg-slate-200 text-slate-400 cursor-not-allowed shadow-none":Y.type==="normal"?"bg-emerald-600 hover:bg-emerald-700 shadow-emerald-100":Y.type==="challenge"?"bg-orange-600 hover:bg-orange-700 shadow-orange-100":"bg-rose-600 hover:bg-rose-700 shadow-rose-100"} text-white text-lg active:scale-95 disabled:active:scale-100`,children:[Z?"":w.some(J=>J.missionId===Y.id&&J.status==="pending")?"":Y.deadline!==void 0&&Y.deadline<Date.now()?"":C===Y.id?"...":"",!Z&&!w.some(J=>J.missionId===Y.id&&J.status==="pending")&&(!Y.deadline||Y.deadline>=Date.now())&&v.jsx(vg,{size:20})]})]})]})},Y.id)})})]})]})},CM=({user:n,onUserUpdate:e})=>{var _e,ae;const{showAlert:t}=Dc(),[s,c]=re.useState(null),[f,p]=re.useState("all"),[T,w]=re.useState([]),[E,C]=re.useState([]),[I,M]=re.useState([]),[B,W]=re.useState(0);re.useEffect(()=>{if(I.length>1){const Q=setInterval(()=>{W(le=>(le+1)%I.length)},5e3);return()=>clearInterval(Q)}},[I.length]),re.useEffect(()=>{const Q=GT(Oe=>{w(Oe)}),le=jT(Oe=>{C(Oe)}),De=dp(M);return()=>{Q(),le(),De()}},[]);const $=T.filter(Q=>f==="all"||Q.category===f),q=async()=>{if(n.role==="GUEST"){t("","info");return}if(!s||n.points<s.price||s.stock<=0)return;const Q={id:`red_${Date.now()}`,userId:n.id,productId:s.id,productName:s.name,pointsSpent:s.price,timestamp:Date.now(),status:"pending",qrCodeData:`AUTH_WORKSHOP_${Date.now()}_${s.id}`},le={...n,points:n.points-s.price};await mD(Q),await Ma(le),await HT(s.id,1),e(),c(null),t("  QR Code","success")};return v.jsxs("div",{className:"space-y-8 pb-20",children:[v.jsxs("header",{children:[v.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:""}),v.jsx("p",{className:"text-slate-500 mt-1",children:""})]}),I.length>0&&v.jsxs("div",{className:`relative w-full ${((_e=I[B])==null?void 0:_e.mobileHeight)||"h-48"} ${((ae=I[B])==null?void 0:ae.desktopHeight)||"md:h-64"} rounded-[2.5rem] overflow-hidden shadow-2xl shadow-indigo-100 group transition-all duration-500`,children:[v.jsx("div",{className:"flex transition-transform duration-700 ease-in-out h-full",style:{transform:`translateX(-${B*100}%)`},children:I.map(Q=>v.jsxs("div",{className:"min-w-full h-full relative",children:[v.jsx("img",{src:Q.imageUrl,alt:"banner",className:"w-full h-full object-cover",style:{objectPosition:Q.objectPosition||"center"}}),v.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent flex items-end p-8",children:v.jsx("div",{className:"mt-auto",children:v.jsx("span",{className:"bg-indigo-600/90 backdrop-blur text-white px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-[0.2em] shadow-lg",children:Q.tag||""})})})]},Q.id))}),v.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2",children:I.map((Q,le)=>v.jsx("button",{onClick:()=>W(le),className:`w-2 h-2 rounded-full transition-all ${B===le?"bg-white w-6":"bg-white/50 hover:bg-white/80"}`},le))}),v.jsx("button",{onClick:()=>W(Q=>(Q-1+I.length)%I.length),className:"absolute left-4 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/40 backdrop-blur p-2 rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity",children:v.jsx(lA,{size:20})}),v.jsx("button",{onClick:()=>W(Q=>(Q+1)%I.length),className:"absolute right-4 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/40 backdrop-blur p-2 rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity",children:v.jsx(vg,{size:20})})]}),v.jsxs("div",{className:"flex flex-wrap gap-2",children:[v.jsx("button",{onClick:()=>p("all"),className:`px-6 py-2.5 rounded-2xl text-sm font-bold transition-all ${f==="all"?"bg-indigo-600 text-white shadow-lg shadow-indigo-100":"bg-white text-slate-600 border border-slate-200 hover:border-indigo-300"}`,children:""}),E.map(Q=>v.jsx("button",{onClick:()=>p(Q.name),className:`px-6 py-2.5 rounded-2xl text-sm font-bold transition-all ${f===Q.name?"bg-indigo-600 text-white shadow-lg shadow-indigo-100":"bg-white text-slate-600 border border-slate-200 hover:border-indigo-300"}`,children:Q.name},Q.id))]}),v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:$.map(Q=>{const le=n.points>=Q.price,De=Q.stock<=0;return v.jsxs("div",{className:`bg-white rounded-[2rem] border border-slate-100 overflow-hidden shadow-sm hover:shadow-2xl transition-all flex flex-col group ${De?"opacity-75 grayscale-[0.5]":""}`,children:[v.jsxs("div",{className:"relative h-56 overflow-hidden",children:[v.jsx("img",{src:Q.imageUrl,alt:Q.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700"}),v.jsx("div",{className:"absolute top-5 left-5",children:v.jsx("span",{className:"bg-white/90 backdrop-blur text-indigo-600 text-[10px] px-3 py-1.5 rounded-full font-black tracking-widest shadow-sm",children:Q.category.toUpperCase()})}),De&&v.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:v.jsx("span",{className:"text-white font-black text-2xl rotate-12 border-4 border-white px-4 py-1",children:"SOLD OUT"})})]}),v.jsxs("div",{className:"p-8 flex flex-col flex-1",children:[v.jsx("div",{className:"flex justify-between items-start mb-2",children:v.jsx("h3",{className:"font-black text-xl text-slate-800 leading-tight",children:Q.name})}),v.jsx("p",{className:"text-slate-500 text-sm mb-6 flex-1 leading-relaxed",children:Q.description}),v.jsxs("div",{className:"flex items-center gap-2 mb-6 text-slate-400 text-xs font-bold",children:[v.jsx(Sg,{size:14}),v.jsxs("span",{children:["",v.jsxs("span",{className:Q.stock<=5?"text-red-500":"text-slate-600",children:[Q.stock," "]})]})]}),v.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[v.jsxs("div",{className:"flex items-center gap-1 text-indigo-600",children:[v.jsx("span",{className:"text-2xl font-black",children:Q.price.toLocaleString()}),v.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-tighter",children:"pts"})]}),v.jsx("button",{onClick:()=>c(Q),disabled:!le||De,className:`px-6 py-3 rounded-2xl font-black text-sm transition-all shadow-md ${De?"bg-slate-100 text-slate-400 cursor-not-allowed shadow-none":le?"bg-indigo-600 text-white hover:bg-indigo-700 hover:shadow-indigo-200 active:scale-95":"bg-slate-100 text-slate-400 cursor-not-allowed shadow-none"}`,children:De?"":""})]})]})]},Q.id)})}),s&&v.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:v.jsxs("div",{className:"bg-white rounded-[2.5rem] max-w-md w-full p-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[v.jsxs("div",{className:"flex justify-between items-start mb-8",children:[v.jsx("div",{className:"bg-indigo-50 p-4 rounded-2xl text-indigo-600",children:v.jsx(P3,{size:28})}),v.jsx("button",{onClick:()=>c(null),className:"text-slate-400 hover:text-slate-600 bg-slate-50 p-2 rounded-full",children:v.jsx(Do,{size:24})})]}),v.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-2",children:""}),v.jsxs("p",{className:"text-slate-500 mb-8 leading-relaxed",children:[" ",v.jsxs("span",{className:"font-black text-indigo-600",children:[s.price," "]}),"  ",v.jsxs("span",{className:"font-black text-slate-800",children:["",s.name,""]})," "]}),v.jsxs("div",{className:"bg-slate-50 rounded-[1.5rem] p-6 mb-8 border border-slate-100",children:[v.jsxs("div",{className:"flex justify-between text-sm mb-3",children:[v.jsx("span",{className:"text-slate-500 font-medium",children:""}),v.jsx("span",{className:"font-bold text-slate-800",children:n.points.toLocaleString()})]}),v.jsxs("div",{className:"flex justify-between text-sm mb-5",children:[v.jsx("span",{className:"text-slate-500 font-medium",children:""}),v.jsxs("span",{className:"font-bold text-red-500",children:["-",s.price.toLocaleString()]})]}),v.jsxs("div",{className:"border-t border-slate-200 pt-5 flex justify-between",children:[v.jsx("span",{className:"font-black text-slate-700 text-lg",children:""}),v.jsx("span",{className:"font-black text-indigo-600 text-2xl",children:(n.points-s.price).toLocaleString()})]})]}),v.jsxs("div",{className:"flex flex-col gap-3",children:[v.jsxs("button",{onClick:q,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-5 rounded-[1.25rem] transition-all shadow-xl shadow-indigo-100 flex items-center justify-center gap-3 text-lg",children:[v.jsx(Tu,{size:24}),""]}),v.jsx("button",{onClick:()=>c(null),className:"w-full bg-white border border-slate-200 text-slate-600 font-black py-4 rounded-[1.25rem] hover:bg-slate-50 transition-all",children:""})]})]})})]})};var IM=Object.defineProperty,Cd=Object.getOwnPropertySymbols,dv=Object.prototype.hasOwnProperty,gv=Object.prototype.propertyIsEnumerable,Nw=(n,e,t)=>e in n?IM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,lm=(n,e)=>{for(var t in e||(e={}))dv.call(e,t)&&Nw(n,t,e[t]);if(Cd)for(var t of Cd(e))gv.call(e,t)&&Nw(n,t,e[t]);return n},cm=(n,e)=>{var t={};for(var s in n)dv.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&Cd)for(var s of Cd(n))e.indexOf(s)<0&&gv.call(n,s)&&(t[s]=n[s]);return t};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Il;(n=>{const e=class Ut{constructor(w,E,C,I){if(this.version=w,this.errorCorrectionLevel=E,this.modules=[],this.isFunction=[],w<Ut.MIN_VERSION||w>Ut.MAX_VERSION)throw new RangeError("Version value out of range");if(I<-1||I>7)throw new RangeError("Mask value out of range");this.size=w*4+17;let M=[];for(let W=0;W<this.size;W++)M.push(!1);for(let W=0;W<this.size;W++)this.modules.push(M.slice()),this.isFunction.push(M.slice());this.drawFunctionPatterns();const B=this.addEccAndInterleave(C);if(this.drawCodewords(B),I==-1){let W=1e9;for(let $=0;$<8;$++){this.applyMask($),this.drawFormatBits($);const q=this.getPenaltyScore();q<W&&(I=$,W=q),this.applyMask($)}}c(0<=I&&I<=7),this.mask=I,this.applyMask(I),this.drawFormatBits(I),this.isFunction=[]}static encodeText(w,E){const C=n.QrSegment.makeSegments(w);return Ut.encodeSegments(C,E)}static encodeBinary(w,E){const C=n.QrSegment.makeBytes(w);return Ut.encodeSegments([C],E)}static encodeSegments(w,E,C=1,I=40,M=-1,B=!0){if(!(Ut.MIN_VERSION<=C&&C<=I&&I<=Ut.MAX_VERSION)||M<-1||M>7)throw new RangeError("Invalid value");let W,$;for(W=C;;W++){const Q=Ut.getNumDataCodewords(W,E)*8,le=p.getTotalBits(w,W);if(le<=Q){$=le;break}if(W>=I)throw new RangeError("Data too long")}for(const Q of[Ut.Ecc.MEDIUM,Ut.Ecc.QUARTILE,Ut.Ecc.HIGH])B&&$<=Ut.getNumDataCodewords(W,Q)*8&&(E=Q);let q=[];for(const Q of w){t(Q.mode.modeBits,4,q),t(Q.numChars,Q.mode.numCharCountBits(W),q);for(const le of Q.getData())q.push(le)}c(q.length==$);const _e=Ut.getNumDataCodewords(W,E)*8;c(q.length<=_e),t(0,Math.min(4,_e-q.length),q),t(0,(8-q.length%8)%8,q),c(q.length%8==0);for(let Q=236;q.length<_e;Q^=253)t(Q,8,q);let ae=[];for(;ae.length*8<q.length;)ae.push(0);return q.forEach((Q,le)=>ae[le>>>3]|=Q<<7-(le&7)),new Ut(W,E,ae,M)}getModule(w,E){return 0<=w&&w<this.size&&0<=E&&E<this.size&&this.modules[E][w]}getModules(){return this.modules}drawFunctionPatterns(){for(let C=0;C<this.size;C++)this.setFunctionModule(6,C,C%2==0),this.setFunctionModule(C,6,C%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const w=this.getAlignmentPatternPositions(),E=w.length;for(let C=0;C<E;C++)for(let I=0;I<E;I++)C==0&&I==0||C==0&&I==E-1||C==E-1&&I==0||this.drawAlignmentPattern(w[C],w[I]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(w){const E=this.errorCorrectionLevel.formatBits<<3|w;let C=E;for(let M=0;M<10;M++)C=C<<1^(C>>>9)*1335;const I=(E<<10|C)^21522;c(I>>>15==0);for(let M=0;M<=5;M++)this.setFunctionModule(8,M,s(I,M));this.setFunctionModule(8,7,s(I,6)),this.setFunctionModule(8,8,s(I,7)),this.setFunctionModule(7,8,s(I,8));for(let M=9;M<15;M++)this.setFunctionModule(14-M,8,s(I,M));for(let M=0;M<8;M++)this.setFunctionModule(this.size-1-M,8,s(I,M));for(let M=8;M<15;M++)this.setFunctionModule(8,this.size-15+M,s(I,M));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let w=this.version;for(let C=0;C<12;C++)w=w<<1^(w>>>11)*7973;const E=this.version<<12|w;c(E>>>18==0);for(let C=0;C<18;C++){const I=s(E,C),M=this.size-11+C%3,B=Math.floor(C/3);this.setFunctionModule(M,B,I),this.setFunctionModule(B,M,I)}}drawFinderPattern(w,E){for(let C=-4;C<=4;C++)for(let I=-4;I<=4;I++){const M=Math.max(Math.abs(I),Math.abs(C)),B=w+I,W=E+C;0<=B&&B<this.size&&0<=W&&W<this.size&&this.setFunctionModule(B,W,M!=2&&M!=4)}}drawAlignmentPattern(w,E){for(let C=-2;C<=2;C++)for(let I=-2;I<=2;I++)this.setFunctionModule(w+I,E+C,Math.max(Math.abs(I),Math.abs(C))!=1)}setFunctionModule(w,E,C){this.modules[E][w]=C,this.isFunction[E][w]=!0}addEccAndInterleave(w){const E=this.version,C=this.errorCorrectionLevel;if(w.length!=Ut.getNumDataCodewords(E,C))throw new RangeError("Invalid argument");const I=Ut.NUM_ERROR_CORRECTION_BLOCKS[C.ordinal][E],M=Ut.ECC_CODEWORDS_PER_BLOCK[C.ordinal][E],B=Math.floor(Ut.getNumRawDataModules(E)/8),W=I-B%I,$=Math.floor(B/I);let q=[];const _e=Ut.reedSolomonComputeDivisor(M);for(let Q=0,le=0;Q<I;Q++){let De=w.slice(le,le+$-M+(Q<W?0:1));le+=De.length;const Oe=Ut.reedSolomonComputeRemainder(De,_e);Q<W&&De.push(0),q.push(De.concat(Oe))}let ae=[];for(let Q=0;Q<q[0].length;Q++)q.forEach((le,De)=>{(Q!=$-M||De>=W)&&ae.push(le[Q])});return c(ae.length==B),ae}drawCodewords(w){if(w.length!=Math.floor(Ut.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let E=0;for(let C=this.size-1;C>=1;C-=2){C==6&&(C=5);for(let I=0;I<this.size;I++)for(let M=0;M<2;M++){const B=C-M,$=(C+1&2)==0?this.size-1-I:I;!this.isFunction[$][B]&&E<w.length*8&&(this.modules[$][B]=s(w[E>>>3],7-(E&7)),E++)}}c(E==w.length*8)}applyMask(w){if(w<0||w>7)throw new RangeError("Mask value out of range");for(let E=0;E<this.size;E++)for(let C=0;C<this.size;C++){let I;switch(w){case 0:I=(C+E)%2==0;break;case 1:I=E%2==0;break;case 2:I=C%3==0;break;case 3:I=(C+E)%3==0;break;case 4:I=(Math.floor(C/3)+Math.floor(E/2))%2==0;break;case 5:I=C*E%2+C*E%3==0;break;case 6:I=(C*E%2+C*E%3)%2==0;break;case 7:I=((C+E)%2+C*E%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[E][C]&&I&&(this.modules[E][C]=!this.modules[E][C])}}getPenaltyScore(){let w=0;for(let M=0;M<this.size;M++){let B=!1,W=0,$=[0,0,0,0,0,0,0];for(let q=0;q<this.size;q++)this.modules[M][q]==B?(W++,W==5?w+=Ut.PENALTY_N1:W>5&&w++):(this.finderPenaltyAddHistory(W,$),B||(w+=this.finderPenaltyCountPatterns($)*Ut.PENALTY_N3),B=this.modules[M][q],W=1);w+=this.finderPenaltyTerminateAndCount(B,W,$)*Ut.PENALTY_N3}for(let M=0;M<this.size;M++){let B=!1,W=0,$=[0,0,0,0,0,0,0];for(let q=0;q<this.size;q++)this.modules[q][M]==B?(W++,W==5?w+=Ut.PENALTY_N1:W>5&&w++):(this.finderPenaltyAddHistory(W,$),B||(w+=this.finderPenaltyCountPatterns($)*Ut.PENALTY_N3),B=this.modules[q][M],W=1);w+=this.finderPenaltyTerminateAndCount(B,W,$)*Ut.PENALTY_N3}for(let M=0;M<this.size-1;M++)for(let B=0;B<this.size-1;B++){const W=this.modules[M][B];W==this.modules[M][B+1]&&W==this.modules[M+1][B]&&W==this.modules[M+1][B+1]&&(w+=Ut.PENALTY_N2)}let E=0;for(const M of this.modules)E=M.reduce((B,W)=>B+(W?1:0),E);const C=this.size*this.size,I=Math.ceil(Math.abs(E*20-C*10)/C)-1;return c(0<=I&&I<=9),w+=I*Ut.PENALTY_N4,c(0<=w&&w<=2568888),w}getAlignmentPatternPositions(){if(this.version==1)return[];{const w=Math.floor(this.version/7)+2,E=this.version==32?26:Math.ceil((this.version*4+4)/(w*2-2))*2;let C=[6];for(let I=this.size-7;C.length<w;I-=E)C.splice(1,0,I);return C}}static getNumRawDataModules(w){if(w<Ut.MIN_VERSION||w>Ut.MAX_VERSION)throw new RangeError("Version number out of range");let E=(16*w+128)*w+64;if(w>=2){const C=Math.floor(w/7)+2;E-=(25*C-10)*C-55,w>=7&&(E-=36)}return c(208<=E&&E<=29648),E}static getNumDataCodewords(w,E){return Math.floor(Ut.getNumRawDataModules(w)/8)-Ut.ECC_CODEWORDS_PER_BLOCK[E.ordinal][w]*Ut.NUM_ERROR_CORRECTION_BLOCKS[E.ordinal][w]}static reedSolomonComputeDivisor(w){if(w<1||w>255)throw new RangeError("Degree out of range");let E=[];for(let I=0;I<w-1;I++)E.push(0);E.push(1);let C=1;for(let I=0;I<w;I++){for(let M=0;M<E.length;M++)E[M]=Ut.reedSolomonMultiply(E[M],C),M+1<E.length&&(E[M]^=E[M+1]);C=Ut.reedSolomonMultiply(C,2)}return E}static reedSolomonComputeRemainder(w,E){let C=E.map(I=>0);for(const I of w){const M=I^C.shift();C.push(0),E.forEach((B,W)=>C[W]^=Ut.reedSolomonMultiply(B,M))}return C}static reedSolomonMultiply(w,E){if(w>>>8||E>>>8)throw new RangeError("Byte out of range");let C=0;for(let I=7;I>=0;I--)C=C<<1^(C>>>7)*285,C^=(E>>>I&1)*w;return c(C>>>8==0),C}finderPenaltyCountPatterns(w){const E=w[1];c(E<=this.size*3);const C=E>0&&w[2]==E&&w[3]==E*3&&w[4]==E&&w[5]==E;return(C&&w[0]>=E*4&&w[6]>=E?1:0)+(C&&w[6]>=E*4&&w[0]>=E?1:0)}finderPenaltyTerminateAndCount(w,E,C){return w&&(this.finderPenaltyAddHistory(E,C),E=0),E+=this.size,this.finderPenaltyAddHistory(E,C),this.finderPenaltyCountPatterns(C)}finderPenaltyAddHistory(w,E){E[0]==0&&(w+=this.size),E.pop(),E.unshift(w)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],n.QrCode=e;function t(T,w,E){if(w<0||w>31||T>>>w)throw new RangeError("Value out of range");for(let C=w-1;C>=0;C--)E.push(T>>>C&1)}function s(T,w){return(T>>>w&1)!=0}function c(T){if(!T)throw new Error("Assertion error")}const f=class er{constructor(w,E,C){if(this.mode=w,this.numChars=E,this.bitData=C,E<0)throw new RangeError("Invalid argument");this.bitData=C.slice()}static makeBytes(w){let E=[];for(const C of w)t(C,8,E);return new er(er.Mode.BYTE,w.length,E)}static makeNumeric(w){if(!er.isNumeric(w))throw new RangeError("String contains non-numeric characters");let E=[];for(let C=0;C<w.length;){const I=Math.min(w.length-C,3);t(parseInt(w.substring(C,C+I),10),I*3+1,E),C+=I}return new er(er.Mode.NUMERIC,w.length,E)}static makeAlphanumeric(w){if(!er.isAlphanumeric(w))throw new RangeError("String contains unencodable characters in alphanumeric mode");let E=[],C;for(C=0;C+2<=w.length;C+=2){let I=er.ALPHANUMERIC_CHARSET.indexOf(w.charAt(C))*45;I+=er.ALPHANUMERIC_CHARSET.indexOf(w.charAt(C+1)),t(I,11,E)}return C<w.length&&t(er.ALPHANUMERIC_CHARSET.indexOf(w.charAt(C)),6,E),new er(er.Mode.ALPHANUMERIC,w.length,E)}static makeSegments(w){return w==""?[]:er.isNumeric(w)?[er.makeNumeric(w)]:er.isAlphanumeric(w)?[er.makeAlphanumeric(w)]:[er.makeBytes(er.toUtf8ByteArray(w))]}static makeEci(w){let E=[];if(w<0)throw new RangeError("ECI assignment value out of range");if(w<128)t(w,8,E);else if(w<16384)t(2,2,E),t(w,14,E);else if(w<1e6)t(6,3,E),t(w,21,E);else throw new RangeError("ECI assignment value out of range");return new er(er.Mode.ECI,0,E)}static isNumeric(w){return er.NUMERIC_REGEX.test(w)}static isAlphanumeric(w){return er.ALPHANUMERIC_REGEX.test(w)}getData(){return this.bitData.slice()}static getTotalBits(w,E){let C=0;for(const I of w){const M=I.mode.numCharCountBits(E);if(I.numChars>=1<<M)return 1/0;C+=4+M+I.bitData.length}return C}static toUtf8ByteArray(w){w=encodeURI(w);let E=[];for(let C=0;C<w.length;C++)w.charAt(C)!="%"?E.push(w.charCodeAt(C)):(E.push(parseInt(w.substring(C+1,C+3),16)),C+=2);return E}};f.NUMERIC_REGEX=/^[0-9]*$/,f.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,f.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let p=f;n.QrSegment=f})(Il||(Il={}));(n=>{(e=>{const t=class{constructor(c,f){this.ordinal=c,this.formatBits=f}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2),e.Ecc=t})(n.QrCode||(n.QrCode={}))})(Il||(Il={}));(n=>{(e=>{const t=class{constructor(c,f){this.modeBits=c,this.numBitsCharCount=f}numCharCountBits(c){return this.numBitsCharCount[Math.floor((c+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]),e.Mode=t})(n.QrSegment||(n.QrSegment={}))})(Il||(Il={}));var mc=Il;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var NM={L:mc.QrCode.Ecc.LOW,M:mc.QrCode.Ecc.MEDIUM,Q:mc.QrCode.Ecc.QUARTILE,H:mc.QrCode.Ecc.HIGH},mv=128,pv="L",xv="#FFFFFF",yv="#000000",Ev=!1,_v=1,RM=4,OM=0,DM=.1;function wv(n,e=0){const t=[];return n.forEach(function(s,c){let f=null;s.forEach(function(p,T){if(!p&&f!==null){t.push(`M${f+e} ${c+e}h${T-f}v1H${f+e}z`),f=null;return}if(T===s.length-1){if(!p)return;f===null?t.push(`M${T+e},${c+e} h1v1H${T+e}z`):t.push(`M${f+e},${c+e} h${T+1-f}v1H${f+e}z`);return}p&&f===null&&(f=T)})}),t.join("")}function Av(n,e){return n.slice().map((t,s)=>s<e.y||s>=e.y+e.h?t:t.map((c,f)=>f<e.x||f>=e.x+e.w?c:!1))}function MM(n,e,t,s){if(s==null)return null;const c=n.length+t*2,f=Math.floor(e*DM),p=c/e,T=(s.width||f)*p,w=(s.height||f)*p,E=s.x==null?n.length/2-T/2:s.x*p,C=s.y==null?n.length/2-w/2:s.y*p,I=s.opacity==null?1:s.opacity;let M=null;if(s.excavate){let W=Math.floor(E),$=Math.floor(C),q=Math.ceil(T+E-W),_e=Math.ceil(w+C-$);M={x:W,y:$,w:q,h:_e}}const B=s.crossOrigin;return{x:E,y:C,h:w,w:T,excavation:M,opacity:I,crossOrigin:B}}function LM(n,e){return e!=null?Math.max(Math.floor(e),0):n?RM:OM}function bv({value:n,level:e,minVersion:t,includeMargin:s,marginSize:c,imageSettings:f,size:p,boostLevel:T}){let w=nr.useMemo(()=>{const W=(Array.isArray(n)?n:[n]).reduce(($,q)=>($.push(...mc.QrSegment.makeSegments(q)),$),[]);return mc.QrCode.encodeSegments(W,NM[e],t,void 0,void 0,T)},[n,e,t,T]);const{cells:E,margin:C,numCells:I,calculatedImageSettings:M}=nr.useMemo(()=>{let B=w.getModules();const W=LM(s,c),$=B.length+W*2,q=MM(B,p,W,f);return{cells:B,margin:W,numCells:$,calculatedImageSettings:q}},[w,p,f,s,c]);return{qrcode:w,margin:C,cells:E,numCells:I,calculatedImageSettings:M}}var PM=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),kM=nr.forwardRef(function(e,t){const s=e,{value:c,size:f=mv,level:p=pv,bgColor:T=xv,fgColor:w=yv,includeMargin:E=Ev,minVersion:C=_v,boostLevel:I,marginSize:M,imageSettings:B}=s,$=cm(s,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:q}=$,_e=cm($,["style"]),ae=B==null?void 0:B.src,Q=nr.useRef(null),le=nr.useRef(null),De=nr.useCallback($e=>{Q.current=$e,typeof t=="function"?t($e):t&&(t.current=$e)},[t]),[Oe,j]=nr.useState(!1),{margin:H,cells:V,numCells:Y,calculatedImageSettings:Z}=bv({value:c,level:p,minVersion:C,boostLevel:I,includeMargin:E,marginSize:M,imageSettings:B,size:f});nr.useEffect(()=>{if(Q.current!=null){const $e=Q.current,fe=$e.getContext("2d");if(!fe)return;let me=V;const be=le.current,Ge=Z!=null&&be!==null&&be.complete&&be.naturalHeight!==0&&be.naturalWidth!==0;Ge&&Z.excavation!=null&&(me=Av(V,Z.excavation));const lt=window.devicePixelRatio||1;$e.height=$e.width=f*lt;const xt=f/Y*lt;fe.scale(xt,xt),fe.fillStyle=T,fe.fillRect(0,0,Y,Y),fe.fillStyle=w,PM?fe.fill(new Path2D(wv(me,H))):V.forEach(function(ie,Ae){ie.forEach(function(Ve,je){Ve&&fe.fillRect(je+H,Ae+H,1,1)})}),Z&&(fe.globalAlpha=Z.opacity),Ge&&fe.drawImage(be,Z.x+H,Z.y+H,Z.w,Z.h)}}),nr.useEffect(()=>{j(!1)},[ae]);const J=lm({height:f,width:f},q);let K=null;return ae!=null&&(K=nr.createElement("img",{src:ae,key:ae,style:{display:"none"},onLoad:()=>{j(!0)},ref:le,crossOrigin:Z==null?void 0:Z.crossOrigin})),nr.createElement(nr.Fragment,null,nr.createElement("canvas",lm({style:J,height:f,width:f,ref:De,role:"img"},_e)),K)});kM.displayName="QRCodeCanvas";var Tv=nr.forwardRef(function(e,t){const s=e,{value:c,size:f=mv,level:p=pv,bgColor:T=xv,fgColor:w=yv,includeMargin:E=Ev,minVersion:C=_v,boostLevel:I,title:M,marginSize:B,imageSettings:W}=s,$=cm(s,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:q,cells:_e,numCells:ae,calculatedImageSettings:Q}=bv({value:c,level:p,minVersion:C,boostLevel:I,includeMargin:E,marginSize:B,imageSettings:W,size:f});let le=_e,De=null;W!=null&&Q!=null&&(Q.excavation!=null&&(le=Av(_e,Q.excavation)),De=nr.createElement("image",{href:W.src,height:Q.h,width:Q.w,x:Q.x+q,y:Q.y+q,preserveAspectRatio:"none",opacity:Q.opacity,crossOrigin:Q.crossOrigin}));const Oe=wv(le,q);return nr.createElement("svg",lm({height:f,width:f,viewBox:`0 0 ${ae} ${ae}`,ref:t,role:"img"},$),!!M&&nr.createElement("title",null,M),nr.createElement("path",{fill:T,d:`M0,0 h${ae}v${ae}H0z`,shapeRendering:"crispEdges"}),nr.createElement("path",{fill:w,d:Oe,shapeRendering:"crispEdges"}),De)});Tv.displayName="QRCodeSVG";const BM=({user:n})=>{const[e,t]=re.useState([]),[s,c]=re.useState(null),[f,p]=re.useState(()=>{const E=new Date;return`${E.getFullYear()}-${String(E.getMonth()+1).padStart(2,"0")}`});re.useEffect(()=>{const E=YT(C=>{t(C.filter(I=>I.userId===n.id))});return()=>E()},[n.id]);const T=E=>new Date(E).toLocaleString("zh-TW",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),w=e.filter(E=>{const C=new Date(E.timestamp);return`${C.getFullYear()}-${String(C.getMonth()+1).padStart(2,"0")}`===f});return v.jsxs("div",{className:"space-y-8 animate-in slide-in-from-bottom-4 duration-500",children:[v.jsxs("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[v.jsxs("div",{children:[v.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:""}),v.jsx("p",{className:"text-slate-500 mt-1",children:""})]}),v.jsxs("div",{className:"flex items-center gap-3 bg-white p-2 rounded-2xl border border-slate-100 shadow-sm",children:[v.jsx(ky,{size:18,className:"text-indigo-600 ml-2"}),v.jsx("input",{type:"month",value:f,onChange:E=>p(E.target.value),className:"border-none bg-transparent font-bold text-slate-600 outline-none p-1"})]})]}),w.length===0?v.jsxs("div",{className:"bg-white rounded-3xl p-12 text-center border border-dashed border-slate-200",children:[v.jsx("div",{className:"bg-slate-50 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 text-slate-300",children:v.jsx($f,{size:40})}),v.jsx("h2",{className:"text-xl font-bold text-slate-800",children:""}),v.jsx("p",{className:"text-slate-400 mt-2",children:""})]}):v.jsx("div",{className:"space-y-4",children:w.map(E=>v.jsxs("div",{className:"bg-white rounded-3xl border border-slate-100 p-6 flex flex-col md:flex-row md:items-center justify-between gap-6 shadow-sm hover:shadow-md transition-shadow",children:[v.jsxs("div",{className:"flex gap-4",children:[v.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center shrink-0 ${E.status==="completed"?"bg-green-50 text-green-600":E.status==="pending"?"bg-indigo-50 text-indigo-600":"bg-red-50 text-red-600"}`,children:E.status==="completed"?v.jsx(WI,{size:24}):E.status==="pending"?v.jsx(Gu,{size:24}):v.jsx(cA,{size:24})}),v.jsxs("div",{children:[v.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:E.productName||""}),v.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-400 mt-1",children:[v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx(ky,{size:12})," ",T(E.timestamp||Date.now())]}),v.jsxs("span",{className:"font-bold text-indigo-600",children:["-",E.pointsSpent||0," "]})]})]})]}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("div",{className:`px-4 py-1.5 rounded-full text-xs font-bold ${E.status==="completed"?"bg-green-100 text-green-700":E.status==="pending"?"bg-indigo-100 text-indigo-700":"bg-red-100 text-red-700"}`,children:E.status==="completed"?"":E.status==="pending"?"":""}),E.status==="pending"&&v.jsxs("button",{onClick:()=>c(E),className:"flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-2.5 rounded-xl text-sm font-bold transition-all shadow-lg shadow-indigo-100",children:[v.jsx(_3,{size:18}),""]})]})]},E.id))}),s&&v.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:v.jsxs("div",{className:"bg-white rounded-[2.5rem] max-w-sm w-full p-10 shadow-2xl animate-in zoom-in-95 duration-200 text-center",children:[v.jsx("div",{className:"flex justify-end mb-4 -mt-4 -mr-4",children:v.jsx("button",{onClick:()=>c(null),className:"text-slate-400 hover:text-slate-600 p-2",children:v.jsx(Do,{size:28})})}),v.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:""}),v.jsx("p",{className:"text-slate-500 mb-8 text-sm",children:""}),v.jsx("div",{className:"aspect-square bg-white border-8 border-indigo-50 rounded-3xl flex items-center justify-center mb-8 shadow-inner overflow-hidden p-6",children:v.jsx(Tv,{value:s.qrCodeData,size:256,level:"H",includeMargin:!1,className:"w-full h-full"})}),v.jsx("div",{className:"bg-slate-50 p-4 rounded-2xl text-slate-400 font-mono text-xs mb-8 tracking-widest uppercase",children:s.qrCodeData}),v.jsx("p",{className:"font-bold text-slate-800 mb-1",children:s.productName}),v.jsxs("p",{className:"text-xs text-slate-400",children:["ID: ",s.id]})]})})]})};var Ye;(function(n){n[n.QR_CODE=0]="QR_CODE",n[n.AZTEC=1]="AZTEC",n[n.CODABAR=2]="CODABAR",n[n.CODE_39=3]="CODE_39",n[n.CODE_93=4]="CODE_93",n[n.CODE_128=5]="CODE_128",n[n.DATA_MATRIX=6]="DATA_MATRIX",n[n.MAXICODE=7]="MAXICODE",n[n.ITF=8]="ITF",n[n.EAN_13=9]="EAN_13",n[n.EAN_8=10]="EAN_8",n[n.PDF_417=11]="PDF_417",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ye||(Ye={}));var Rw=new Map([[Ye.QR_CODE,"QR_CODE"],[Ye.AZTEC,"AZTEC"],[Ye.CODABAR,"CODABAR"],[Ye.CODE_39,"CODE_39"],[Ye.CODE_93,"CODE_93"],[Ye.CODE_128,"CODE_128"],[Ye.DATA_MATRIX,"DATA_MATRIX"],[Ye.MAXICODE,"MAXICODE"],[Ye.ITF,"ITF"],[Ye.EAN_13,"EAN_13"],[Ye.EAN_8,"EAN_8"],[Ye.PDF_417,"PDF_417"],[Ye.RSS_14,"RSS_14"],[Ye.RSS_EXPANDED,"RSS_EXPANDED"],[Ye.UPC_A,"UPC_A"],[Ye.UPC_E,"UPC_E"],[Ye.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Ow;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.URL=1]="URL"})(Ow||(Ow={}));function UM(n){return Object.values(Ye).includes(n)}var Id;(function(n){n[n.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",n[n.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Id||(Id={}));var VM=(function(){function n(){}return n.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",n.SCAN_DEFAULT_FPS=2,n.DEFAULT_DISABLE_FLIP=!1,n.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,n.DEFAULT_SUPPORTED_SCAN_TYPE=[Id.SCAN_TYPE_CAMERA,Id.SCAN_TYPE_FILE],n})(),vv=(function(){function n(e,t){this.format=e,this.formatName=t}return n.prototype.toString=function(){return this.formatName},n.create=function(e){if(!Rw.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new n(e,Rw.get(e))},n})(),Dw=(function(){function n(){}return n.createFromText=function(e){var t={text:e};return{decodedText:e,result:t}},n.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},n})(),um;(function(n){n[n.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",n[n.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",n[n.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(um||(um={}));var jM=(function(){function n(){}return n.createFrom=function(e){return{errorMessage:e,type:um.UNKWOWN_ERROR}},n})(),FM=(function(){function n(e){this.verbose=e}return n.prototype.log=function(e){this.verbose&&console.log(e)},n.prototype.warn=function(e){this.verbose&&console.warn(e)},n.prototype.logError=function(e,t){(this.verbose||t===!0)&&console.error(e)},n.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},n})();function Da(n){return typeof n>"u"||n===null}var pc=(function(){function n(){}return n.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},n.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},n.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},n.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},n.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},n.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},n.scannerPaused=function(){return"Scanner paused"},n})(),Sv=(function(){function n(){}return n.isMediaStreamConstraintsValid=function(e,t){if(typeof e!="object"){var s=typeof e;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(s,"."),!0),!1}for(var c=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],f=new Set(c),p=Object.keys(e),T=0,w=p;T<w.length;T++){var E=w[T];if(f.has(E))return t.logError("".concat(E," is not supported videoConstaints."),!0),!1}return!0},n})(),Du={exports:{}},HM=Du.exports,Mw;function zM(){return Mw||(Mw=1,(function(n,e){(function(t,s){s(e)})(HM,(function(t){function s(L){return L==null}var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,i){L.__proto__=i}||function(L,i){for(var o in i)i.hasOwnProperty(o)&&(L[o]=i[o])};function f(L,i){c(L,i);function o(){this.constructor=L}L.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}function p(L,i){var o=Object.setPrototypeOf;o?o(L,i):L.__proto__=i}function T(L,i){i===void 0&&(i=L.constructor);var o=Error.captureStackTrace;o&&o(L,i)}var w=(function(L){f(i,L);function i(o){var l=this.constructor,h=L.call(this,o)||this;return Object.defineProperty(h,"name",{value:l.name,enumerable:!1}),p(h,l.prototype),T(h),h}return i})(Error);class E extends w{constructor(i=void 0){super(i),this.message=i}getKind(){return this.constructor.kind}}E.kind="Exception";class C extends E{}C.kind="ArgumentException";class I extends E{}I.kind="IllegalArgumentException";class M{constructor(i){if(this.binarizer=i,i===null)throw new I("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(i,o){return this.binarizer.getBlackRow(i,o)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(i,o,l,h){const d=this.binarizer.getLuminanceSource().crop(i,o,l,h);return new M(this.binarizer.createBinarizer(d))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new M(this.binarizer.createBinarizer(i))}rotateCounterClockwise45(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new M(this.binarizer.createBinarizer(i))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class B extends E{static getChecksumInstance(){return new B}}B.kind="ChecksumException";class W{constructor(i){this.source=i}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class ${static arraycopy(i,o,l,h,d){for(;d--;)l[h++]=i[o++]}static currentTimeMillis(){return Date.now()}}class q extends E{}q.kind="IndexOutOfBoundsException";class _e extends q{constructor(i=void 0,o=void 0){super(o),this.index=i,this.message=o}}_e.kind="ArrayIndexOutOfBoundsException";class ae{static fill(i,o){for(let l=0,h=i.length;l<h;l++)i[l]=o}static fillWithin(i,o,l,h){ae.rangeCheck(i.length,o,l);for(let d=o;d<l;d++)i[d]=h}static rangeCheck(i,o,l){if(o>l)throw new I("fromIndex("+o+") > toIndex("+l+")");if(o<0)throw new _e(o);if(l>i)throw new _e(l)}static asList(...i){return i}static create(i,o,l){return Array.from({length:i}).map(d=>Array.from({length:o}).fill(l))}static createInt32Array(i,o,l){return Array.from({length:i}).map(d=>Int32Array.from({length:o}).fill(l))}static equals(i,o){if(!i||!o||!i.length||!o.length||i.length!==o.length)return!1;for(let l=0,h=i.length;l<h;l++)if(i[l]!==o[l])return!1;return!0}static hashCode(i){if(i===null)return 0;let o=1;for(const l of i)o=31*o+l;return o}static fillUint8Array(i,o){for(let l=0;l!==i.length;l++)i[l]=o}static copyOf(i,o){return i.slice(0,o)}static copyOfUint8Array(i,o){if(i.length<=o){const l=new Uint8Array(o);return l.set(i),l}return i.slice(0,o)}static copyOfRange(i,o,l){const h=l-o,d=new Int32Array(h);return $.arraycopy(i,o,d,0,h),d}static binarySearch(i,o,l){l===void 0&&(l=ae.numberComparator);let h=0,d=i.length-1;for(;h<=d;){const m=d+h>>1,y=l(o,i[m]);if(y>0)h=m+1;else if(y<0)d=m-1;else return m}return-h-1}static numberComparator(i,o){return i-o}}class Q{static numberOfTrailingZeros(i){let o;if(i===0)return 32;let l=31;return o=i<<16,o!==0&&(l-=16,i=o),o=i<<8,o!==0&&(l-=8,i=o),o=i<<4,o!==0&&(l-=4,i=o),o=i<<2,o!==0&&(l-=2,i=o),l-(i<<1>>>31)}static numberOfLeadingZeros(i){if(i===0)return 32;let o=1;return i>>>16||(o+=16,i<<=16),i>>>24||(o+=8,i<<=8),i>>>28||(o+=4,i<<=4),i>>>30||(o+=2,i<<=2),o-=i>>>31,o}static toHexString(i){return i.toString(16)}static toBinaryString(i){return String(parseInt(String(i),2))}static bitCount(i){return i=i-(i>>>1&1431655765),i=(i&858993459)+(i>>>2&858993459),i=i+(i>>>4)&252645135,i=i+(i>>>8),i=i+(i>>>16),i&63}static truncDivision(i,o){return Math.trunc(i/o)}static parseInt(i,o=void 0){return parseInt(i,o)}}Q.MIN_VALUE_32_BITS=-2147483648,Q.MAX_VALUE=Number.MAX_SAFE_INTEGER;class le{constructor(i,o){i===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=i,o==null?this.bits=le.makeArray(i):this.bits=o)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(i){if(i>this.bits.length*32){const o=le.makeArray(i);$.arraycopy(this.bits,0,o,0,this.bits.length),this.bits=o}}get(i){return(this.bits[Math.floor(i/32)]&1<<(i&31))!==0}set(i){this.bits[Math.floor(i/32)]|=1<<(i&31)}flip(i){this.bits[Math.floor(i/32)]^=1<<(i&31)}getNextSet(i){const o=this.size;if(i>=o)return o;const l=this.bits;let h=Math.floor(i/32),d=l[h];d&=~((1<<(i&31))-1);const m=l.length;for(;d===0;){if(++h===m)return o;d=l[h]}const y=h*32+Q.numberOfTrailingZeros(d);return y>o?o:y}getNextUnset(i){const o=this.size;if(i>=o)return o;const l=this.bits;let h=Math.floor(i/32),d=~l[h];d&=~((1<<(i&31))-1);const m=l.length;for(;d===0;){if(++h===m)return o;d=~l[h]}const y=h*32+Q.numberOfTrailingZeros(d);return y>o?o:y}setBulk(i,o){this.bits[Math.floor(i/32)]=o}setRange(i,o){if(o<i||i<0||o>this.size)throw new I;if(o===i)return;o--;const l=Math.floor(i/32),h=Math.floor(o/32),d=this.bits;for(let m=l;m<=h;m++){const y=m>l?0:i&31,S=(2<<(m<h?31:o&31))-(1<<y);d[m]|=S}}clear(){const i=this.bits.length,o=this.bits;for(let l=0;l<i;l++)o[l]=0}isRange(i,o,l){if(o<i||i<0||o>this.size)throw new I;if(o===i)return!0;o--;const h=Math.floor(i/32),d=Math.floor(o/32),m=this.bits;for(let y=h;y<=d;y++){const A=y>h?0:i&31,R=(2<<(y<d?31:o&31))-(1<<A)&4294967295;if((m[y]&R)!==(l?R:0))return!1}return!0}appendBit(i){this.ensureCapacity(this.size+1),i&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(i,o){if(o<0||o>32)throw new I("Num bits must be between 0 and 32");this.ensureCapacity(this.size+o);for(let l=o;l>0;l--)this.appendBit((i>>l-1&1)===1)}appendBitArray(i){const o=i.size;this.ensureCapacity(this.size+o);for(let l=0;l<o;l++)this.appendBit(i.get(l))}xor(i){if(this.size!==i.size)throw new I("Sizes don't match");const o=this.bits;for(let l=0,h=o.length;l<h;l++)o[l]^=i.bits[l]}toBytes(i,o,l,h){for(let d=0;d<h;d++){let m=0;for(let y=0;y<8;y++)this.get(i)&&(m|=1<<7-y),i++;o[l+d]=m}}getBitArray(){return this.bits}reverse(){const i=new Int32Array(this.bits.length),o=Math.floor((this.size-1)/32),l=o+1,h=this.bits;for(let d=0;d<l;d++){let m=h[d];m=m>>1&1431655765|(m&1431655765)<<1,m=m>>2&858993459|(m&858993459)<<2,m=m>>4&252645135|(m&252645135)<<4,m=m>>8&16711935|(m&16711935)<<8,m=m>>16&65535|(m&65535)<<16,i[o-d]=m}if(this.size!==l*32){const d=l*32-this.size;let m=i[0]>>>d;for(let y=1;y<l;y++){const A=i[y];m|=A<<32-d,i[y-1]=m,m=A>>>d}i[l-1]=m}this.bits=i}static makeArray(i){return new Int32Array(Math.floor((i+31)/32))}equals(i){if(!(i instanceof le))return!1;const o=i;return this.size===o.size&&ae.equals(this.bits,o.bits)}hashCode(){return 31*this.size+ae.hashCode(this.bits)}toString(){let i="";for(let o=0,l=this.size;o<l;o++)(o&7)===0&&(i+=" "),i+=this.get(o)?"X":".";return i}clone(){return new le(this.size,this.bits.slice())}}var De;(function(L){L[L.OTHER=0]="OTHER",L[L.PURE_BARCODE=1]="PURE_BARCODE",L[L.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",L[L.TRY_HARDER=3]="TRY_HARDER",L[L.CHARACTER_SET=4]="CHARACTER_SET",L[L.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",L[L.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",L[L.ASSUME_GS1=7]="ASSUME_GS1",L[L.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",L[L.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",L[L.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(De||(De={}));var Oe=De;class j extends E{static getFormatInstance(){return new j}}j.kind="FormatException";var H;(function(L){L[L.Cp437=0]="Cp437",L[L.ISO8859_1=1]="ISO8859_1",L[L.ISO8859_2=2]="ISO8859_2",L[L.ISO8859_3=3]="ISO8859_3",L[L.ISO8859_4=4]="ISO8859_4",L[L.ISO8859_5=5]="ISO8859_5",L[L.ISO8859_6=6]="ISO8859_6",L[L.ISO8859_7=7]="ISO8859_7",L[L.ISO8859_8=8]="ISO8859_8",L[L.ISO8859_9=9]="ISO8859_9",L[L.ISO8859_10=10]="ISO8859_10",L[L.ISO8859_11=11]="ISO8859_11",L[L.ISO8859_13=12]="ISO8859_13",L[L.ISO8859_14=13]="ISO8859_14",L[L.ISO8859_15=14]="ISO8859_15",L[L.ISO8859_16=15]="ISO8859_16",L[L.SJIS=16]="SJIS",L[L.Cp1250=17]="Cp1250",L[L.Cp1251=18]="Cp1251",L[L.Cp1252=19]="Cp1252",L[L.Cp1256=20]="Cp1256",L[L.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",L[L.UTF8=22]="UTF8",L[L.ASCII=23]="ASCII",L[L.Big5=24]="Big5",L[L.GB18030=25]="GB18030",L[L.EUC_KR=26]="EUC_KR"})(H||(H={}));class V{constructor(i,o,l,...h){this.valueIdentifier=i,this.name=l,typeof o=="number"?this.values=Int32Array.from([o]):this.values=o,this.otherEncodingNames=h,V.VALUE_IDENTIFIER_TO_ECI.set(i,this),V.NAME_TO_ECI.set(l,this);const d=this.values;for(let m=0,y=d.length;m!==y;m++){const A=d[m];V.VALUES_TO_ECI.set(A,this)}for(const m of h)V.NAME_TO_ECI.set(m,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(i){if(i<0||i>=900)throw new j("incorect value");const o=V.VALUES_TO_ECI.get(i);if(o===void 0)throw new j("incorect value");return o}static getCharacterSetECIByName(i){const o=V.NAME_TO_ECI.get(i);if(o===void 0)throw new j("incorect value");return o}equals(i){if(!(i instanceof V))return!1;const o=i;return this.getName()===o.getName()}}V.VALUE_IDENTIFIER_TO_ECI=new Map,V.VALUES_TO_ECI=new Map,V.NAME_TO_ECI=new Map,V.Cp437=new V(H.Cp437,Int32Array.from([0,2]),"Cp437"),V.ISO8859_1=new V(H.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),V.ISO8859_2=new V(H.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),V.ISO8859_3=new V(H.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),V.ISO8859_4=new V(H.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),V.ISO8859_5=new V(H.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),V.ISO8859_6=new V(H.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),V.ISO8859_7=new V(H.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),V.ISO8859_8=new V(H.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),V.ISO8859_9=new V(H.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),V.ISO8859_10=new V(H.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),V.ISO8859_11=new V(H.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),V.ISO8859_13=new V(H.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),V.ISO8859_14=new V(H.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),V.ISO8859_15=new V(H.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),V.ISO8859_16=new V(H.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),V.SJIS=new V(H.SJIS,20,"SJIS","Shift_JIS"),V.Cp1250=new V(H.Cp1250,21,"Cp1250","windows-1250"),V.Cp1251=new V(H.Cp1251,22,"Cp1251","windows-1251"),V.Cp1252=new V(H.Cp1252,23,"Cp1252","windows-1252"),V.Cp1256=new V(H.Cp1256,24,"Cp1256","windows-1256"),V.UnicodeBigUnmarked=new V(H.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),V.UTF8=new V(H.UTF8,26,"UTF8","UTF-8"),V.ASCII=new V(H.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),V.Big5=new V(H.Big5,28,"Big5"),V.GB18030=new V(H.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),V.EUC_KR=new V(H.EUC_KR,30,"EUC_KR","EUC-KR");class Y extends E{}Y.kind="UnsupportedOperationException";class Z{static decode(i,o){const l=this.encodingName(o);return this.customDecoder?this.customDecoder(i,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(i,l):new TextDecoder(l).decode(i)}static shouldDecodeOnFallback(i){return!Z.isBrowser()&&i==="ISO-8859-1"}static encode(i,o){const l=this.encodingName(o);return this.customEncoder?this.customEncoder(i,l):typeof TextEncoder>"u"?this.encodeFallback(i):new TextEncoder().encode(i)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(i){return typeof i=="string"?i:i.getName()}static encodingCharacterSet(i){return i instanceof V?i:V.getCharacterSetECIByName(i)}static decodeFallback(i,o){const l=this.encodingCharacterSet(o);if(Z.isDecodeFallbackSupported(l)){let h="";for(let d=0,m=i.length;d<m;d++){let y=i[d].toString(16);y.length<2&&(y="0"+y),h+="%"+y}return decodeURIComponent(h)}if(l.equals(V.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(i.buffer));throw new Y(`Encoding ${this.encodingName(o)} not supported by fallback.`)}static isDecodeFallbackSupported(i){return i.equals(V.UTF8)||i.equals(V.ISO8859_1)||i.equals(V.ASCII)}static encodeFallback(i){const l=btoa(unescape(encodeURIComponent(i))).split(""),h=[];for(let d=0;d<l.length;d++)h.push(l[d].charCodeAt(0));return new Uint8Array(h)}}class J{static castAsNonUtf8Char(i,o=null){const l=o?o.getName():this.ISO88591;return Z.decode(new Uint8Array([i]),l)}static guessEncoding(i,o){if(o!=null&&o.get(Oe.CHARACTER_SET)!==void 0)return o.get(Oe.CHARACTER_SET).toString();const l=i.length;let h=!0,d=!0,m=!0,y=0,A=0,S=0,R=0,P=0,k=0,G=0,te=0,ne=0,ue=0,ye=0;const ke=i.length>3&&i[0]===239&&i[1]===187&&i[2]===191;for(let Le=0;Le<l&&(h||d||m);Le++){const Re=i[Le]&255;m&&(y>0?(Re&128)===0?m=!1:y--:(Re&128)!==0&&((Re&64)===0?m=!1:(y++,(Re&32)===0?A++:(y++,(Re&16)===0?S++:(y++,(Re&8)===0?R++:m=!1))))),h&&(Re>127&&Re<160?h=!1:Re>159&&(Re<192||Re===215||Re===247)&&ye++),d&&(P>0?Re<64||Re===127||Re>252?d=!1:P--:Re===128||Re===160||Re>239?d=!1:Re>160&&Re<224?(k++,te=0,G++,G>ne&&(ne=G)):Re>127?(P++,G=0,te++,te>ue&&(ue=te)):(G=0,te=0))}return m&&y>0&&(m=!1),d&&P>0&&(d=!1),m&&(ke||A+S+R>0)?J.UTF8:d&&(J.ASSUME_SHIFT_JIS||ne>=3||ue>=3)?J.SHIFT_JIS:h&&d?ne===2&&k===2||ye*10>=l?J.SHIFT_JIS:J.ISO88591:h?J.ISO88591:d?J.SHIFT_JIS:m?J.UTF8:J.PLATFORM_DEFAULT_ENCODING}static format(i,...o){let l=-1;function h(m,y,A,S,R,P){if(m==="%%")return"%";if(o[++l]===void 0)return;m=S?parseInt(S.substr(1)):void 0;let k=R?parseInt(R.substr(1)):void 0,G;switch(P){case"s":G=o[l];break;case"c":G=o[l][0];break;case"f":G=parseFloat(o[l]).toFixed(m);break;case"p":G=parseFloat(o[l]).toPrecision(m);break;case"e":G=parseFloat(o[l]).toExponential(m);break;case"x":G=parseInt(o[l]).toString(k||16);break;case"d":G=parseFloat(parseInt(o[l],k||10).toPrecision(m)).toFixed(0);break}G=typeof G=="object"?JSON.stringify(G):(+G).toString(k);let te=parseInt(A),ne=A&&A[0]+""=="0"?"0":" ";for(;G.length<te;)G=y!==void 0?G+ne:ne+G;return G}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(d,h)}static getBytes(i,o){return Z.encode(i,o)}static getCharCode(i,o=0){return i.charCodeAt(o)}static getCharAt(i){return String.fromCharCode(i)}}J.SHIFT_JIS=V.SJIS.getName(),J.GB2312="GB2312",J.ISO88591=V.ISO8859_1.getName(),J.EUC_JP="EUC_JP",J.UTF8=V.UTF8.getName(),J.PLATFORM_DEFAULT_ENCODING=J.UTF8,J.ASSUME_SHIFT_JIS=!1;class K{constructor(i=""){this.value=i}enableDecoding(i){return this.encoding=i,this}append(i){return typeof i=="string"?this.value+=i.toString():this.encoding?this.value+=J.castAsNonUtf8Char(i,this.encoding):this.value+=String.fromCharCode(i),this}appendChars(i,o,l){for(let h=o;o<o+l;h++)this.append(i[h]);return this}length(){return this.value.length}charAt(i){return this.value.charAt(i)}deleteCharAt(i){this.value=this.value.substr(0,i)+this.value.substring(i+1)}setCharAt(i,o){this.value=this.value.substr(0,i)+o+this.value.substr(i+1)}substring(i,o){return this.value.substring(i,o)}setLengthToZero(){this.value=""}toString(){return this.value}insert(i,o){this.value=this.value.substr(0,i)+o+this.value.substr(i+o.length)}}class $e{constructor(i,o,l,h){if(this.width=i,this.height=o,this.rowSize=l,this.bits=h,o==null&&(o=i),this.height=o,i<1||o<1)throw new I("Both dimensions must be greater than 0");l==null&&(l=Math.floor((i+31)/32)),this.rowSize=l,h==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(i){const o=i.length,l=i[0].length,h=new $e(l,o);for(let d=0;d<o;d++){const m=i[d];for(let y=0;y<l;y++)m[y]&&h.set(y,d)}return h}static parseFromString(i,o,l){if(i===null)throw new I("stringRepresentation cannot be null");const h=new Array(i.length);let d=0,m=0,y=-1,A=0,S=0;for(;S<i.length;)if(i.charAt(S)===`
`||i.charAt(S)==="\r"){if(d>m){if(y===-1)y=d-m;else if(d-m!==y)throw new I("row lengths do not match");m=d,A++}S++}else if(i.substring(S,S+o.length)===o)S+=o.length,h[d]=!0,d++;else if(i.substring(S,S+l.length)===l)S+=l.length,h[d]=!1,d++;else throw new I("illegal character encountered: "+i.substring(S));if(d>m){if(y===-1)y=d-m;else if(d-m!==y)throw new I("row lengths do not match");A++}const R=new $e(y,A);for(let P=0;P<d;P++)h[P]&&R.set(Math.floor(P%y),Math.floor(P/y));return R}get(i,o){const l=o*this.rowSize+Math.floor(i/32);return(this.bits[l]>>>(i&31)&1)!==0}set(i,o){const l=o*this.rowSize+Math.floor(i/32);this.bits[l]|=1<<(i&31)&4294967295}unset(i,o){const l=o*this.rowSize+Math.floor(i/32);this.bits[l]&=~(1<<(i&31)&4294967295)}flip(i,o){const l=o*this.rowSize+Math.floor(i/32);this.bits[l]^=1<<(i&31)&4294967295}xor(i){if(this.width!==i.getWidth()||this.height!==i.getHeight()||this.rowSize!==i.getRowSize())throw new I("input matrix dimensions do not match");const o=new le(Math.floor(this.width/32)+1),l=this.rowSize,h=this.bits;for(let d=0,m=this.height;d<m;d++){const y=d*l,A=i.getRow(d,o).getBitArray();for(let S=0;S<l;S++)h[y+S]^=A[S]}}clear(){const i=this.bits,o=i.length;for(let l=0;l<o;l++)i[l]=0}setRegion(i,o,l,h){if(o<0||i<0)throw new I("Left and top must be nonnegative");if(h<1||l<1)throw new I("Height and width must be at least 1");const d=i+l,m=o+h;if(m>this.height||d>this.width)throw new I("The region must fit inside the matrix");const y=this.rowSize,A=this.bits;for(let S=o;S<m;S++){const R=S*y;for(let P=i;P<d;P++)A[R+Math.floor(P/32)]|=1<<(P&31)&4294967295}}getRow(i,o){o==null||o.getSize()<this.width?o=new le(this.width):o.clear();const l=this.rowSize,h=this.bits,d=i*l;for(let m=0;m<l;m++)o.setBulk(m*32,h[d+m]);return o}setRow(i,o){$.arraycopy(o.getBitArray(),0,this.bits,i*this.rowSize,this.rowSize)}rotate180(){const i=this.getWidth(),o=this.getHeight();let l=new le(i),h=new le(i);for(let d=0,m=Math.floor((o+1)/2);d<m;d++)l=this.getRow(d,l),h=this.getRow(o-1-d,h),l.reverse(),h.reverse(),this.setRow(d,h),this.setRow(o-1-d,l)}getEnclosingRectangle(){const i=this.width,o=this.height,l=this.rowSize,h=this.bits;let d=i,m=o,y=-1,A=-1;for(let S=0;S<o;S++)for(let R=0;R<l;R++){const P=h[S*l+R];if(P!==0){if(S<m&&(m=S),S>A&&(A=S),R*32<d){let k=0;for(;(P<<31-k&4294967295)===0;)k++;R*32+k<d&&(d=R*32+k)}if(R*32+31>y){let k=31;for(;!(P>>>k);)k--;R*32+k>y&&(y=R*32+k)}}}return y<d||A<m?null:Int32Array.from([d,m,y-d+1,A-m+1])}getTopLeftOnBit(){const i=this.rowSize,o=this.bits;let l=0;for(;l<o.length&&o[l]===0;)l++;if(l===o.length)return null;const h=l/i;let d=l%i*32;const m=o[l];let y=0;for(;(m<<31-y&4294967295)===0;)y++;return d+=y,Int32Array.from([d,h])}getBottomRightOnBit(){const i=this.rowSize,o=this.bits;let l=o.length-1;for(;l>=0&&o[l]===0;)l--;if(l<0)return null;const h=Math.floor(l/i);let d=Math.floor(l%i)*32;const m=o[l];let y=31;for(;!(m>>>y);)y--;return d+=y,Int32Array.from([d,h])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(i){if(!(i instanceof $e))return!1;const o=i;return this.width===o.width&&this.height===o.height&&this.rowSize===o.rowSize&&ae.equals(this.bits,o.bits)}hashCode(){let i=this.width;return i=31*i+this.width,i=31*i+this.height,i=31*i+this.rowSize,i=31*i+ae.hashCode(this.bits),i}toString(i="X ",o="  ",l=`
`){return this.buildToString(i,o,l)}buildToString(i,o,l){let h=new K;for(let d=0,m=this.height;d<m;d++){for(let y=0,A=this.width;y<A;y++)h.append(this.get(y,d)?i:o);h.append(l)}return h.toString()}clone(){return new $e(this.width,this.height,this.rowSize,this.bits.slice())}}class fe extends E{static getNotFoundInstance(){return new fe}}fe.kind="NotFoundException";class me extends W{constructor(i){super(i),this.luminances=me.EMPTY,this.buckets=new Int32Array(me.LUMINANCE_BUCKETS)}getBlackRow(i,o){const l=this.getLuminanceSource(),h=l.getWidth();o==null||o.getSize()<h?o=new le(h):o.clear(),this.initArrays(h);const d=l.getRow(i,this.luminances),m=this.buckets;for(let A=0;A<h;A++)m[(d[A]&255)>>me.LUMINANCE_SHIFT]++;const y=me.estimateBlackPoint(m);if(h<3)for(let A=0;A<h;A++)(d[A]&255)<y&&o.set(A);else{let A=d[0]&255,S=d[1]&255;for(let R=1;R<h-1;R++){const P=d[R+1]&255;(S*4-A-P)/2<y&&o.set(R),A=S,S=P}}return o}getBlackMatrix(){const i=this.getLuminanceSource(),o=i.getWidth(),l=i.getHeight(),h=new $e(o,l);this.initArrays(o);const d=this.buckets;for(let A=1;A<5;A++){const S=Math.floor(l*A/5),R=i.getRow(S,this.luminances),P=Math.floor(o*4/5);for(let k=Math.floor(o/5);k<P;k++){const G=R[k]&255;d[G>>me.LUMINANCE_SHIFT]++}}const m=me.estimateBlackPoint(d),y=i.getMatrix();for(let A=0;A<l;A++){const S=A*o;for(let R=0;R<o;R++)(y[S+R]&255)<m&&h.set(R,A)}return h}createBinarizer(i){return new me(i)}initArrays(i){this.luminances.length<i&&(this.luminances=new Uint8ClampedArray(i));const o=this.buckets;for(let l=0;l<me.LUMINANCE_BUCKETS;l++)o[l]=0}static estimateBlackPoint(i){const o=i.length;let l=0,h=0,d=0;for(let R=0;R<o;R++)i[R]>d&&(h=R,d=i[R]),i[R]>l&&(l=i[R]);let m=0,y=0;for(let R=0;R<o;R++){const P=R-h,k=i[R]*P*P;k>y&&(m=R,y=k)}if(h>m){const R=h;h=m,m=R}if(m-h<=o/16)throw new fe;let A=m-1,S=-1;for(let R=m-1;R>h;R--){const P=R-h,k=P*P*(m-R)*(l-i[R]);k>S&&(A=R,S=k)}return A<<me.LUMINANCE_SHIFT}}me.LUMINANCE_BITS=5,me.LUMINANCE_SHIFT=8-me.LUMINANCE_BITS,me.LUMINANCE_BUCKETS=1<<me.LUMINANCE_BITS,me.EMPTY=Uint8ClampedArray.from([0]);class be extends me{constructor(i){super(i),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const i=this.getLuminanceSource(),o=i.getWidth(),l=i.getHeight();if(o>=be.MINIMUM_DIMENSION&&l>=be.MINIMUM_DIMENSION){const h=i.getMatrix();let d=o>>be.BLOCK_SIZE_POWER;(o&be.BLOCK_SIZE_MASK)!==0&&d++;let m=l>>be.BLOCK_SIZE_POWER;(l&be.BLOCK_SIZE_MASK)!==0&&m++;const y=be.calculateBlackPoints(h,d,m,o,l),A=new $e(o,l);be.calculateThresholdForBlock(h,d,m,o,l,y,A),this.matrix=A}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(i){return new be(i)}static calculateThresholdForBlock(i,o,l,h,d,m,y){const A=d-be.BLOCK_SIZE,S=h-be.BLOCK_SIZE;for(let R=0;R<l;R++){let P=R<<be.BLOCK_SIZE_POWER;P>A&&(P=A);const k=be.cap(R,2,l-3);for(let G=0;G<o;G++){let te=G<<be.BLOCK_SIZE_POWER;te>S&&(te=S);const ne=be.cap(G,2,o-3);let ue=0;for(let ke=-2;ke<=2;ke++){const Le=m[k+ke];ue+=Le[ne-2]+Le[ne-1]+Le[ne]+Le[ne+1]+Le[ne+2]}const ye=ue/25;be.thresholdBlock(i,te,P,ye,h,y)}}}static cap(i,o,l){return i<o?o:i>l?l:i}static thresholdBlock(i,o,l,h,d,m){for(let y=0,A=l*d+o;y<be.BLOCK_SIZE;y++,A+=d)for(let S=0;S<be.BLOCK_SIZE;S++)(i[A+S]&255)<=h&&m.set(o+S,l+y)}static calculateBlackPoints(i,o,l,h,d){const m=d-be.BLOCK_SIZE,y=h-be.BLOCK_SIZE,A=new Array(l);for(let S=0;S<l;S++){A[S]=new Int32Array(o);let R=S<<be.BLOCK_SIZE_POWER;R>m&&(R=m);for(let P=0;P<o;P++){let k=P<<be.BLOCK_SIZE_POWER;k>y&&(k=y);let G=0,te=255,ne=0;for(let ye=0,ke=R*h+k;ye<be.BLOCK_SIZE;ye++,ke+=h){for(let Le=0;Le<be.BLOCK_SIZE;Le++){const Re=i[ke+Le]&255;G+=Re,Re<te&&(te=Re),Re>ne&&(ne=Re)}if(ne-te>be.MIN_DYNAMIC_RANGE)for(ye++,ke+=h;ye<be.BLOCK_SIZE;ye++,ke+=h)for(let Le=0;Le<be.BLOCK_SIZE;Le++)G+=i[ke+Le]&255}let ue=G>>be.BLOCK_SIZE_POWER*2;if(ne-te<=be.MIN_DYNAMIC_RANGE&&(ue=te/2,S>0&&P>0)){const ye=(A[S-1][P]+2*A[S][P-1]+A[S-1][P-1])/4;te<ye&&(ue=ye)}A[S][P]=ue}}return A}}be.BLOCK_SIZE_POWER=3,be.BLOCK_SIZE=1<<be.BLOCK_SIZE_POWER,be.BLOCK_SIZE_MASK=be.BLOCK_SIZE-1,be.MINIMUM_DIMENSION=be.BLOCK_SIZE*5,be.MIN_DYNAMIC_RANGE=24;class Ge{constructor(i,o){this.width=i,this.height=o}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(i,o,l,h){throw new Y("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Y("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Y("This luminance source does not support rotation by 45 degrees.")}toString(){const i=new Uint8ClampedArray(this.width);let o=new K;for(let l=0;l<this.height;l++){const h=this.getRow(l,i);for(let d=0;d<this.width;d++){const m=h[d]&255;let y;m<64?y="#":m<128?y="+":m<192?y=".":y=" ",o.append(y)}o.append(`
`)}return o.toString()}}class lt extends Ge{constructor(i){super(i.getWidth(),i.getHeight()),this.delegate=i}getRow(i,o){const l=this.delegate.getRow(i,o),h=this.getWidth();for(let d=0;d<h;d++)l[d]=255-(l[d]&255);return l}getMatrix(){const i=this.delegate.getMatrix(),o=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(o);for(let h=0;h<o;h++)l[h]=255-(i[h]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(i,o,l,h){return new lt(this.delegate.crop(i,o,l,h))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new lt(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new lt(this.delegate.rotateCounterClockwise45())}}class xt extends Ge{constructor(i){super(i.width,i.height),this.canvas=i,this.tempCanvasElement=null,this.buffer=xt.makeBufferFromCanvasImageData(i)}static makeBufferFromCanvasImageData(i){const o=i.getContext("2d").getImageData(0,0,i.width,i.height);return xt.toGrayscaleBuffer(o.data,i.width,i.height)}static toGrayscaleBuffer(i,o,l){const h=new Uint8ClampedArray(o*l);for(let d=0,m=0,y=i.length;d<y;d+=4,m++){let A;if(i[d+3]===0)A=255;else{const R=i[d],P=i[d+1],k=i[d+2];A=306*R+601*P+117*k+512>>10}h[m]=A}return h}getRow(i,o){if(i<0||i>=this.getHeight())throw new I("Requested row is outside the image: "+i);const l=this.getWidth(),h=i*l;return o===null?o=this.buffer.slice(h,h+l):(o.length<l&&(o=new Uint8ClampedArray(l)),o.set(this.buffer.slice(h,h+l))),o}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(i,o,l,h){return super.crop(i,o,l,h),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const i=this.canvas.ownerDocument.createElement("canvas");i.width=this.canvas.width,i.height=this.canvas.height,this.tempCanvasElement=i}return this.tempCanvasElement}rotate(i){const o=this.getTempCanvasElement(),l=o.getContext("2d"),h=i*xt.DEGREE_TO_RADIANS,d=this.canvas.width,m=this.canvas.height,y=Math.ceil(Math.abs(Math.cos(h))*d+Math.abs(Math.sin(h))*m),A=Math.ceil(Math.abs(Math.sin(h))*d+Math.abs(Math.cos(h))*m);return o.width=y,o.height=A,l.translate(y/2,A/2),l.rotate(h),l.drawImage(this.canvas,d/-2,m/-2),this.buffer=xt.makeBufferFromCanvasImageData(o),this}invert(){return new lt(this)}}xt.DEGREE_TO_RADIANS=Math.PI/180;class ie{constructor(i,o,l){this.deviceId=i,this.label=o,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Ae=(globalThis||bf||self||window||void 0)&&(globalThis||bf||self||window||void 0).__awaiter||function(L,i,o,l){function h(d){return d instanceof o?d:new o(function(m){m(d)})}return new(o||(o=Promise))(function(d,m){function y(R){try{S(l.next(R))}catch(P){m(P)}}function A(R){try{S(l.throw(R))}catch(P){m(P)}}function S(R){R.done?d(R.value):h(R.value).then(y,A)}S((l=l.apply(L,i||[])).next())})};class Ve{constructor(i,o=500,l){this.reader=i,this.timeBetweenScansMillis=o,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(i){this._timeBetweenDecodingAttempts=i<0?0:i}set hints(i){this._hints=i||null}get hints(){return this._hints}listVideoInputDevices(){return Ae(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const i=yield navigator.mediaDevices.enumerateDevices(),o=[];for(const l of i){const h=l.kind==="video"?"videoinput":l.kind;if(h!=="videoinput")continue;const d=l.deviceId||l.id,m=l.label||`Video device ${o.length+1}`,y=l.groupId,A={deviceId:d,label:m,kind:h,groupId:y};o.push(A)}return o})}getVideoInputDevices(){return Ae(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(o=>new ie(o.deviceId,o.label))})}findDeviceById(i){return Ae(this,void 0,void 0,function*(){const o=yield this.listVideoInputDevices();return o?o.find(l=>l.deviceId===i):null})}decodeFromInputVideoDevice(i,o){return Ae(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(i,o)})}decodeOnceFromVideoDevice(i,o){return Ae(this,void 0,void 0,function*(){this.reset();let l;i?l={deviceId:{exact:i}}:l={facingMode:"environment"};const h={video:l};return yield this.decodeOnceFromConstraints(h,o)})}decodeOnceFromConstraints(i,o){return Ae(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeOnceFromStream(l,o)})}decodeOnceFromStream(i,o){return Ae(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(i,o);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(i,o,l){return Ae(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(i,o,l)})}decodeFromVideoDevice(i,o,l){return Ae(this,void 0,void 0,function*(){let h;i?h={deviceId:{exact:i}}:h={facingMode:"environment"};const d={video:h};return yield this.decodeFromConstraints(d,o,l)})}decodeFromConstraints(i,o,l){return Ae(this,void 0,void 0,function*(){const h=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeFromStream(h,o,l)})}decodeFromStream(i,o,l){return Ae(this,void 0,void 0,function*(){this.reset();const h=yield this.attachStreamToVideo(i,o);return yield this.decodeContinuously(h,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(i,o){return Ae(this,void 0,void 0,function*(){const l=this.prepareVideoElement(o);return this.addVideoSource(l,i),this.videoElement=l,this.stream=i,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(i){return new Promise((o,l)=>this.playVideoOnLoad(i,()=>o()))}playVideoOnLoad(i,o){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(i),i.addEventListener("ended",this.videoEndedListener),i.addEventListener("canplay",this.videoCanPlayListener),i.addEventListener("playing",o),this.tryPlayVideo(i)}isVideoPlaying(i){return i.currentTime>0&&!i.paused&&!i.ended&&i.readyState>2}tryPlayVideo(i){return Ae(this,void 0,void 0,function*(){if(this.isVideoPlaying(i)){console.warn("Trying to play video that is already playing.");return}try{yield i.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(i,o){const l=document.getElementById(i);if(!l)throw new C(`element with id '${i}' not found`);if(l.nodeName.toLowerCase()!==o.toLowerCase())throw new C(`element with id '${i}' must be an ${o} element`);return l}decodeFromImage(i,o){if(!i&&!o)throw new C("either imageElement with a src set or an url must be provided");return o&&!i?this.decodeFromImageUrl(o):this.decodeFromImageElement(i)}decodeFromVideo(i,o){if(!i&&!o)throw new C("Either an element with a src set or an URL must be provided");return o&&!i?this.decodeFromVideoUrl(o):this.decodeFromVideoElement(i)}decodeFromVideoContinuously(i,o,l){if(i===void 0&&o===void 0)throw new C("Either an element with a src set or an URL must be provided");return o&&!i?this.decodeFromVideoUrlContinuously(o,l):this.decodeFromVideoElementContinuously(i,l)}decodeFromImageElement(i){if(!i)throw new C("An image element must be provided.");this.reset();const o=this.prepareImageElement(i);this.imageElement=o;let l;return this.isImageLoaded(o)?l=this.decodeOnce(o,!1,!0):l=this._decodeOnLoadImage(o),l}decodeFromVideoElement(i){const o=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideo(o)}decodeFromVideoElementContinuously(i,o){const l=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideoContinuously(l,o)}_decodeFromVideoElementSetup(i){if(!i)throw new C("A video element must be provided.");this.reset();const o=this.prepareVideoElement(i);return this.videoElement=o,o}decodeFromImageUrl(i){if(!i)throw new C("An URL must be provided.");this.reset();const o=this.prepareImageElement();this.imageElement=o;const l=this._decodeOnLoadImage(o);return o.src=i,l}decodeFromVideoUrl(i){if(!i)throw new C("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),l=this.decodeFromVideoElement(o);return o.src=i,l}decodeFromVideoUrlContinuously(i,o){if(!i)throw new C("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),h=this.decodeFromVideoElementContinuously(l,o);return l.src=i,h}_decodeOnLoadImage(i){return new Promise((o,l)=>{this.imageLoadedListener=()=>this.decodeOnce(i,!1,!0).then(o,l),i.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(i){return Ae(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(i),yield this.decodeOnce(i)})}_decodeOnLoadVideoContinuously(i,o){return Ae(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(i),this.decodeContinuously(i,o)})}isImageLoaded(i){return!(!i.complete||i.naturalWidth===0)}prepareImageElement(i){let o;return typeof i>"u"&&(o=document.createElement("img"),o.width=200,o.height=200),typeof i=="string"&&(o=this.getMediaElement(i,"img")),i instanceof HTMLImageElement&&(o=i),o}prepareVideoElement(i){let o;return!i&&typeof document<"u"&&(o=document.createElement("video"),o.width=200,o.height=200),typeof i=="string"&&(o=this.getMediaElement(i,"video")),i instanceof HTMLVideoElement&&(o=i),o.setAttribute("autoplay","true"),o.setAttribute("muted","true"),o.setAttribute("playsinline","true"),o}decodeOnce(i,o=!0,l=!0){this._stopAsyncDecode=!1;const h=(d,m)=>{if(this._stopAsyncDecode){m(new fe("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const y=this.decode(i);d(y)}catch(y){const A=o&&y instanceof fe,R=(y instanceof B||y instanceof j)&&l;if(A||R)return setTimeout(h,this._timeBetweenDecodingAttempts,d,m);m(y)}};return new Promise((d,m)=>h(d,m))}decodeContinuously(i,o){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const h=this.decode(i);o(h,null),setTimeout(l,this.timeBetweenScansMillis)}catch(h){o(null,h);const d=h instanceof B||h instanceof j,m=h instanceof fe;(d||m)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(i){const o=this.createBinaryBitmap(i);return this.decodeBitmap(o)}_isHTMLVideoElement(i){return i.videoWidth!==0}drawFrameOnCanvas(i,o,l){o||(o={sx:0,sy:0,sWidth:i.videoWidth,sHeight:i.videoHeight,dx:0,dy:0,dWidth:i.videoWidth,dHeight:i.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(i,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}drawImageOnCanvas(i,o,l=this.captureCanvasContext){o||(o={sx:0,sy:0,sWidth:i.naturalWidth,sHeight:i.naturalHeight,dx:0,dy:0,dWidth:i.naturalWidth,dHeight:i.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(i,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}createBinaryBitmap(i){this.getCaptureCanvasContext(i),this._isHTMLVideoElement(i)?this.drawFrameOnCanvas(i):this.drawImageOnCanvas(i);const o=this.getCaptureCanvas(i),l=new xt(o),h=new be(l);return new M(h)}getCaptureCanvasContext(i){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(i).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(i){if(!this.captureCanvas){const o=this.createCaptureCanvas(i);this.captureCanvas=o}return this.captureCanvas}decodeBitmap(i){return this.reader.decode(i,this._hints)}createCaptureCanvas(i){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const o=document.createElement("canvas");let l,h;return typeof i<"u"&&(i instanceof HTMLVideoElement?(l=i.videoWidth,h=i.videoHeight):i instanceof HTMLImageElement&&(l=i.naturalWidth||i.width,h=i.naturalHeight||i.height)),o.style.width=l+"px",o.style.height=h+"px",o.width=l,o.height=h,o}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(i=>i.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(i,o){try{i.srcObject=o}catch{i.src=URL.createObjectURL(o)}}cleanVideoSource(i){try{i.srcObject=null}catch{i.src=""}this.videoElement.removeAttribute("src")}}class je{constructor(i,o,l=o==null?0:8*o.length,h,d,m=$.currentTimeMillis()){this.text=i,this.rawBytes=o,this.numBits=l,this.resultPoints=h,this.format=d,this.timestamp=m,this.text=i,this.rawBytes=o,l==null?this.numBits=o==null?0:8*o.length:this.numBits=l,this.resultPoints=h,this.format=d,this.resultMetadata=null,m==null?this.timestamp=$.currentTimeMillis():this.timestamp=m}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(i,o){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(i,o)}putAllMetadata(i){i!==null&&(this.resultMetadata===null?this.resultMetadata=i:this.resultMetadata=new Map(i))}addResultPoints(i){const o=this.resultPoints;if(o===null)this.resultPoints=i;else if(i!==null&&i.length>0){const l=new Array(o.length+i.length);$.arraycopy(o,0,l,0,o.length),$.arraycopy(i,0,l,o.length,i.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var rt;(function(L){L[L.AZTEC=0]="AZTEC",L[L.CODABAR=1]="CODABAR",L[L.CODE_39=2]="CODE_39",L[L.CODE_93=3]="CODE_93",L[L.CODE_128=4]="CODE_128",L[L.DATA_MATRIX=5]="DATA_MATRIX",L[L.EAN_8=6]="EAN_8",L[L.EAN_13=7]="EAN_13",L[L.ITF=8]="ITF",L[L.MAXICODE=9]="MAXICODE",L[L.PDF_417=10]="PDF_417",L[L.QR_CODE=11]="QR_CODE",L[L.RSS_14=12]="RSS_14",L[L.RSS_EXPANDED=13]="RSS_EXPANDED",L[L.UPC_A=14]="UPC_A",L[L.UPC_E=15]="UPC_E",L[L.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(rt||(rt={}));var Pe=rt,wt;(function(L){L[L.OTHER=0]="OTHER",L[L.ORIENTATION=1]="ORIENTATION",L[L.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",L[L.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",L[L.ISSUE_NUMBER=4]="ISSUE_NUMBER",L[L.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",L[L.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",L[L.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",L[L.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",L[L.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",L[L.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(wt||(wt={}));var vt=wt;class en{constructor(i,o,l,h,d=-1,m=-1){this.rawBytes=i,this.text=o,this.byteSegments=l,this.ecLevel=h,this.structuredAppendSequenceNumber=d,this.structuredAppendParity=m,this.numBits=i==null?0:8*i.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(i){this.numBits=i}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(i){this.errorsCorrected=i}getErasures(){return this.erasures}setErasures(i){this.erasures=i}getOther(){return this.other}setOther(i){this.other=i}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class kr{exp(i){return this.expTable[i]}log(i){if(i===0)throw new I;return this.logTable[i]}static addOrSubtract(i,o){return i^o}}class ln{constructor(i,o){if(o.length===0)throw new I;this.field=i;const l=o.length;if(l>1&&o[0]===0){let h=1;for(;h<l&&o[h]===0;)h++;h===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-h),$.arraycopy(o,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);const o=this.coefficients;let l;if(i===1){l=0;for(let m=0,y=o.length;m!==y;m++){const A=o[m];l=kr.addOrSubtract(l,A)}return l}l=o[0];const h=o.length,d=this.field;for(let m=1;m<h;m++)l=kr.addOrSubtract(d.multiply(i,l),o[m]);return l}addOrSubtract(i){if(!this.field.equals(i.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero())return i;if(i.isZero())return this;let o=this.coefficients,l=i.coefficients;if(o.length>l.length){const m=o;o=l,l=m}let h=new Int32Array(l.length);const d=l.length-o.length;$.arraycopy(l,0,h,0,d);for(let m=d;m<l.length;m++)h[m]=kr.addOrSubtract(o[m-d],l[m]);return new ln(this.field,h)}multiply(i){if(!this.field.equals(i.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero()||i.isZero())return this.field.getZero();const o=this.coefficients,l=o.length,h=i.coefficients,d=h.length,m=new Int32Array(l+d-1),y=this.field;for(let A=0;A<l;A++){const S=o[A];for(let R=0;R<d;R++)m[A+R]=kr.addOrSubtract(m[A+R],y.multiply(S,h[R]))}return new ln(y,m)}multiplyScalar(i){if(i===0)return this.field.getZero();if(i===1)return this;const o=this.coefficients.length,l=this.field,h=new Int32Array(o),d=this.coefficients;for(let m=0;m<o;m++)h[m]=l.multiply(d[m],i);return new ln(l,h)}multiplyByMonomial(i,o){if(i<0)throw new I;if(o===0)return this.field.getZero();const l=this.coefficients,h=l.length,d=new Int32Array(h+i),m=this.field;for(let y=0;y<h;y++)d[y]=m.multiply(l[y],o);return new ln(m,d)}divide(i){if(!this.field.equals(i.field))throw new I("GenericGFPolys do not have same GenericGF field");if(i.isZero())throw new I("Divide by 0");const o=this.field;let l=o.getZero(),h=this;const d=i.getCoefficient(i.getDegree()),m=o.inverse(d);for(;h.getDegree()>=i.getDegree()&&!h.isZero();){const y=h.getDegree()-i.getDegree(),A=o.multiply(h.getCoefficient(h.getDegree()),m),S=i.multiplyByMonomial(y,A),R=o.buildMonomial(y,A);l=l.addOrSubtract(R),h=h.addOrSubtract(S)}return[l,h]}toString(){let i="";for(let o=this.getDegree();o>=0;o--){let l=this.getCoefficient(o);if(l!==0){if(l<0?(i+=" - ",l=-l):i.length>0&&(i+=" + "),o===0||l!==1){const h=this.field.log(l);h===0?i+="1":h===1?i+="a":(i+="a^",i+=h)}o!==0&&(o===1?i+="x":(i+="x^",i+=o))}}return i}}class ci extends E{}ci.kind="ArithmeticException";class At extends kr{constructor(i,o,l){super(),this.primitive=i,this.size=o,this.generatorBase=l;const h=new Int32Array(o);let d=1;for(let y=0;y<o;y++)h[y]=d,d*=2,d>=o&&(d^=i,d&=o-1);this.expTable=h;const m=new Int32Array(o);for(let y=0;y<o-1;y++)m[h[y]]=y;this.logTable=m,this.zero=new ln(this,Int32Array.from([0])),this.one=new ln(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,o){if(i<0)throw new I;if(o===0)return this.zero;const l=new Int32Array(i+1);return l[0]=o,new ln(this,l)}inverse(i){if(i===0)throw new ci;return this.expTable[this.size-this.logTable[i]-1]}multiply(i,o){return i===0||o===0?0:this.expTable[(this.logTable[i]+this.logTable[o])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+Q.toHexString(this.primitive)+","+this.size+")"}equals(i){return i===this}}At.AZTEC_DATA_12=new At(4201,4096,1),At.AZTEC_DATA_10=new At(1033,1024,1),At.AZTEC_DATA_6=new At(67,64,1),At.AZTEC_PARAM=new At(19,16,1),At.QR_CODE_FIELD_256=new At(285,256,0),At.DATA_MATRIX_FIELD_256=new At(301,256,1),At.AZTEC_DATA_8=At.DATA_MATRIX_FIELD_256,At.MAXICODE_FIELD_64=At.AZTEC_DATA_6;class hr extends E{}hr.kind="ReedSolomonException";class ir extends E{}ir.kind="IllegalStateException";class Wr{constructor(i){this.field=i}decode(i,o){const l=this.field,h=new ln(l,i),d=new Int32Array(o);let m=!0;for(let G=0;G<o;G++){const te=h.evaluateAt(l.exp(G+l.getGeneratorBase()));d[d.length-1-G]=te,te!==0&&(m=!1)}if(m)return;const y=new ln(l,d),A=this.runEuclideanAlgorithm(l.buildMonomial(o,1),y,o),S=A[0],R=A[1],P=this.findErrorLocations(S),k=this.findErrorMagnitudes(R,P);for(let G=0;G<P.length;G++){const te=i.length-1-l.log(P[G]);if(te<0)throw new hr("Bad error location");i[te]=At.addOrSubtract(i[te],k[G])}}runEuclideanAlgorithm(i,o,l){if(i.getDegree()<o.getDegree()){const G=i;i=o,o=G}const h=this.field;let d=i,m=o,y=h.getZero(),A=h.getOne();for(;m.getDegree()>=(l/2|0);){let G=d,te=y;if(d=m,y=A,d.isZero())throw new hr("r_{i-1} was zero");m=G;let ne=h.getZero();const ue=d.getCoefficient(d.getDegree()),ye=h.inverse(ue);for(;m.getDegree()>=d.getDegree()&&!m.isZero();){const ke=m.getDegree()-d.getDegree(),Le=h.multiply(m.getCoefficient(m.getDegree()),ye);ne=ne.addOrSubtract(h.buildMonomial(ke,Le)),m=m.addOrSubtract(d.multiplyByMonomial(ke,Le))}if(A=ne.multiply(y).addOrSubtract(te),m.getDegree()>=d.getDegree())throw new ir("Division algorithm failed to reduce polynomial?")}const S=A.getCoefficient(0);if(S===0)throw new hr("sigmaTilde(0) was zero");const R=h.inverse(S),P=A.multiplyScalar(R),k=m.multiplyScalar(R);return[P,k]}findErrorLocations(i){const o=i.getDegree();if(o===1)return Int32Array.from([i.getCoefficient(1)]);const l=new Int32Array(o);let h=0;const d=this.field;for(let m=1;m<d.getSize()&&h<o;m++)i.evaluateAt(m)===0&&(l[h]=d.inverse(m),h++);if(h!==o)throw new hr("Error locator degree does not match number of roots");return l}findErrorMagnitudes(i,o){const l=o.length,h=new Int32Array(l),d=this.field;for(let m=0;m<l;m++){const y=d.inverse(o[m]);let A=1;for(let S=0;S<l;S++)if(m!==S){const R=d.multiply(o[S],y),P=(R&1)===0?R|1:R&-2;A=d.multiply(A,P)}h[m]=d.multiply(i.evaluateAt(y),d.inverse(A)),d.getGeneratorBase()!==0&&(h[m]=d.multiply(h[m],y))}return h}}var wn;(function(L){L[L.UPPER=0]="UPPER",L[L.LOWER=1]="LOWER",L[L.MIXED=2]="MIXED",L[L.DIGIT=3]="DIGIT",L[L.PUNCT=4]="PUNCT",L[L.BINARY=5]="BINARY"})(wn||(wn={}));class qt{decode(i){this.ddata=i;let o=i.getBits(),l=this.extractBits(o),h=this.correctBits(l),d=qt.convertBoolArrayToByteArray(h),m=qt.getEncodedData(h),y=new en(d,m,null,null);return y.setNumBits(h.length),y}static highLevelDecode(i){return this.getEncodedData(i)}static getEncodedData(i){let o=i.length,l=wn.UPPER,h=wn.UPPER,d="",m=0;for(;m<o;)if(h===wn.BINARY){if(o-m<5)break;let y=qt.readCode(i,m,5);if(m+=5,y===0){if(o-m<11)break;y=qt.readCode(i,m,11)+31,m+=11}for(let A=0;A<y;A++){if(o-m<8){m=o;break}const S=qt.readCode(i,m,8);d+=J.castAsNonUtf8Char(S),m+=8}h=l}else{let y=h===wn.DIGIT?4:5;if(o-m<y)break;let A=qt.readCode(i,m,y);m+=y;let S=qt.getCharacter(h,A);S.startsWith("CTRL_")?(l=h,h=qt.getTable(S.charAt(5)),S.charAt(6)==="L"&&(l=h)):(d+=S,h=l)}return d}static getTable(i){switch(i){case"L":return wn.LOWER;case"P":return wn.PUNCT;case"M":return wn.MIXED;case"D":return wn.DIGIT;case"B":return wn.BINARY;case"U":default:return wn.UPPER}}static getCharacter(i,o){switch(i){case wn.UPPER:return qt.UPPER_TABLE[o];case wn.LOWER:return qt.LOWER_TABLE[o];case wn.MIXED:return qt.MIXED_TABLE[o];case wn.PUNCT:return qt.PUNCT_TABLE[o];case wn.DIGIT:return qt.DIGIT_TABLE[o];default:throw new ir("Bad table")}}correctBits(i){let o,l;this.ddata.getNbLayers()<=2?(l=6,o=At.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,o=At.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,o=At.AZTEC_DATA_10):(l=12,o=At.AZTEC_DATA_12);let h=this.ddata.getNbDatablocks(),d=i.length/l;if(d<h)throw new j;let m=i.length%l,y=new Int32Array(d);for(let k=0;k<d;k++,m+=l)y[k]=qt.readCode(i,m,l);try{new Wr(o).decode(y,d-h)}catch(k){throw new j(k)}let A=(1<<l)-1,S=0;for(let k=0;k<h;k++){let G=y[k];if(G===0||G===A)throw new j;(G===1||G===A-1)&&S++}let R=new Array(h*l-S),P=0;for(let k=0;k<h;k++){let G=y[k];if(G===1||G===A-1)R.fill(G>1,P,P+l-1),P+=l-1;else for(let te=l-1;te>=0;--te)R[P++]=(G&1<<te)!==0}return R}extractBits(i){let o=this.ddata.isCompact(),l=this.ddata.getNbLayers(),h=(o?11:14)+l*4,d=new Int32Array(h),m=new Array(this.totalBitsInLayer(l,o));if(o)for(let y=0;y<d.length;y++)d[y]=y;else{let y=h+1+2*Q.truncDivision(Q.truncDivision(h,2)-1,15),A=h/2,S=Q.truncDivision(y,2);for(let R=0;R<A;R++){let P=R+Q.truncDivision(R,15);d[A-R-1]=S-P-1,d[A+R]=S+P+1}}for(let y=0,A=0;y<l;y++){let S=(l-y)*4+(o?9:12),R=y*2,P=h-1-R;for(let k=0;k<S;k++){let G=k*2;for(let te=0;te<2;te++)m[A+G+te]=i.get(d[R+te],d[R+k]),m[A+2*S+G+te]=i.get(d[R+k],d[P-te]),m[A+4*S+G+te]=i.get(d[P-te],d[P-k]),m[A+6*S+G+te]=i.get(d[P-k],d[R+te])}A+=S*8}return m}static readCode(i,o,l){let h=0;for(let d=o;d<o+l;d++)h<<=1,i[d]&&(h|=1);return h}static readByte(i,o){let l=i.length-o;return l>=8?qt.readCode(i,o,8):qt.readCode(i,o,l)<<8-l}static convertBoolArrayToByteArray(i){let o=new Uint8Array((i.length+7)/8);for(let l=0;l<o.length;l++)o[l]=qt.readByte(i,8*l);return o}totalBitsInLayer(i,o){return((o?88:112)+16*i)*i}}qt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],qt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],qt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],qt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],qt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Ze{constructor(){}static round(i){return i===NaN?0:i<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:i>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:i+(i<0?-.5:.5)|0}static distance(i,o,l,h){const d=i-l,m=o-h;return Math.sqrt(d*d+m*m)}static sum(i){let o=0;for(let l=0,h=i.length;l!==h;l++){const d=i[l];o+=d}return o}}class An{static floatToIntBits(i){return i}}An.MAX_VALUE=Number.MAX_SAFE_INTEGER;class He{constructor(i,o){this.x=i,this.y=o}getX(){return this.x}getY(){return this.y}equals(i){if(i instanceof He){const o=i;return this.x===o.x&&this.y===o.y}return!1}hashCode(){return 31*An.floatToIntBits(this.x)+An.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(i){const o=this.distance(i[0],i[1]),l=this.distance(i[1],i[2]),h=this.distance(i[0],i[2]);let d,m,y;if(l>=o&&l>=h?(m=i[0],d=i[1],y=i[2]):h>=l&&h>=o?(m=i[1],d=i[0],y=i[2]):(m=i[2],d=i[0],y=i[1]),this.crossProductZ(d,m,y)<0){const A=d;d=y,y=A}i[0]=d,i[1]=m,i[2]=y}static distance(i,o){return Ze.distance(i.x,i.y,o.x,o.y)}static crossProductZ(i,o,l){const h=o.x,d=o.y;return(l.x-h)*(i.y-d)-(l.y-d)*(i.x-h)}}class As{constructor(i,o){this.bits=i,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class es extends As{constructor(i,o,l,h,d){super(i,o),this.compact=l,this.nbDatablocks=h,this.nbLayers=d}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class mn{constructor(i,o,l,h){this.image=i,this.height=i.getHeight(),this.width=i.getWidth(),o==null&&(o=mn.INIT_SIZE),l==null&&(l=i.getWidth()/2|0),h==null&&(h=i.getHeight()/2|0);const d=o/2|0;if(this.leftInit=l-d,this.rightInit=l+d,this.upInit=h-d,this.downInit=h+d,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new fe}detect(){let i=this.leftInit,o=this.rightInit,l=this.upInit,h=this.downInit,d=!1,m=!0,y=!1,A=!1,S=!1,R=!1,P=!1;const k=this.width,G=this.height;for(;m;){m=!1;let te=!0;for(;(te||!A)&&o<k;)te=this.containsBlackPoint(l,h,o,!1),te?(o++,m=!0,A=!0):A||o++;if(o>=k){d=!0;break}let ne=!0;for(;(ne||!S)&&h<G;)ne=this.containsBlackPoint(i,o,h,!0),ne?(h++,m=!0,S=!0):S||h++;if(h>=G){d=!0;break}let ue=!0;for(;(ue||!R)&&i>=0;)ue=this.containsBlackPoint(l,h,i,!1),ue?(i--,m=!0,R=!0):R||i--;if(i<0){d=!0;break}let ye=!0;for(;(ye||!P)&&l>=0;)ye=this.containsBlackPoint(i,o,l,!0),ye?(l--,m=!0,P=!0):P||l--;if(l<0){d=!0;break}m&&(y=!0)}if(!d&&y){const te=o-i;let ne=null;for(let Le=1;ne===null&&Le<te;Le++)ne=this.getBlackPointOnSegment(i,h-Le,i+Le,h);if(ne==null)throw new fe;let ue=null;for(let Le=1;ue===null&&Le<te;Le++)ue=this.getBlackPointOnSegment(i,l+Le,i+Le,l);if(ue==null)throw new fe;let ye=null;for(let Le=1;ye===null&&Le<te;Le++)ye=this.getBlackPointOnSegment(o,l+Le,o-Le,l);if(ye==null)throw new fe;let ke=null;for(let Le=1;ke===null&&Le<te;Le++)ke=this.getBlackPointOnSegment(o,h-Le,o-Le,h);if(ke==null)throw new fe;return this.centerEdges(ke,ne,ye,ue)}else throw new fe}getBlackPointOnSegment(i,o,l,h){const d=Ze.round(Ze.distance(i,o,l,h)),m=(l-i)/d,y=(h-o)/d,A=this.image;for(let S=0;S<d;S++){const R=Ze.round(i+S*m),P=Ze.round(o+S*y);if(A.get(R,P))return new He(R,P)}return null}centerEdges(i,o,l,h){const d=i.getX(),m=i.getY(),y=o.getX(),A=o.getY(),S=l.getX(),R=l.getY(),P=h.getX(),k=h.getY(),G=mn.CORR;return d<this.width/2?[new He(P-G,k+G),new He(y+G,A+G),new He(S-G,R-G),new He(d+G,m-G)]:[new He(P+G,k+G),new He(y+G,A-G),new He(S-G,R+G),new He(d-G,m-G)]}containsBlackPoint(i,o,l,h){const d=this.image;if(h){for(let m=i;m<=o;m++)if(d.get(m,l))return!0}else for(let m=i;m<=o;m++)if(d.get(l,m))return!0;return!1}}mn.INIT_SIZE=10,mn.CORR=1;class ui{static checkAndNudgePoints(i,o){const l=i.getWidth(),h=i.getHeight();let d=!0;for(let m=0;m<o.length&&d;m+=2){const y=Math.floor(o[m]),A=Math.floor(o[m+1]);if(y<-1||y>l||A<-1||A>h)throw new fe;d=!1,y===-1?(o[m]=0,d=!0):y===l&&(o[m]=l-1,d=!0),A===-1?(o[m+1]=0,d=!0):A===h&&(o[m+1]=h-1,d=!0)}d=!0;for(let m=o.length-2;m>=0&&d;m-=2){const y=Math.floor(o[m]),A=Math.floor(o[m+1]);if(y<-1||y>l||A<-1||A>h)throw new fe;d=!1,y===-1?(o[m]=0,d=!0):y===l&&(o[m]=l-1,d=!0),A===-1?(o[m+1]=0,d=!0):A===h&&(o[m+1]=h-1,d=!0)}}}class fr{constructor(i,o,l,h,d,m,y,A,S){this.a11=i,this.a21=o,this.a31=l,this.a12=h,this.a22=d,this.a32=m,this.a13=y,this.a23=A,this.a33=S}static quadrilateralToQuadrilateral(i,o,l,h,d,m,y,A,S,R,P,k,G,te,ne,ue){const ye=fr.quadrilateralToSquare(i,o,l,h,d,m,y,A);return fr.squareToQuadrilateral(S,R,P,k,G,te,ne,ue).times(ye)}transformPoints(i){const o=i.length,l=this.a11,h=this.a12,d=this.a13,m=this.a21,y=this.a22,A=this.a23,S=this.a31,R=this.a32,P=this.a33;for(let k=0;k<o;k+=2){const G=i[k],te=i[k+1],ne=d*G+A*te+P;i[k]=(l*G+m*te+S)/ne,i[k+1]=(h*G+y*te+R)/ne}}transformPointsWithValues(i,o){const l=this.a11,h=this.a12,d=this.a13,m=this.a21,y=this.a22,A=this.a23,S=this.a31,R=this.a32,P=this.a33,k=i.length;for(let G=0;G<k;G++){const te=i[G],ne=o[G],ue=d*te+A*ne+P;i[G]=(l*te+m*ne+S)/ue,o[G]=(h*te+y*ne+R)/ue}}static squareToQuadrilateral(i,o,l,h,d,m,y,A){const S=i-l+d-y,R=o-h+m-A;if(S===0&&R===0)return new fr(l-i,d-l,i,h-o,m-h,o,0,0,1);{const P=l-d,k=y-d,G=h-m,te=A-m,ne=P*te-k*G,ue=(S*te-k*R)/ne,ye=(P*R-S*G)/ne;return new fr(l-i+ue*l,y-i+ye*y,i,h-o+ue*h,A-o+ye*A,o,ue,ye,1)}}static quadrilateralToSquare(i,o,l,h,d,m,y,A){return fr.squareToQuadrilateral(i,o,l,h,d,m,y,A).buildAdjoint()}buildAdjoint(){return new fr(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(i){return new fr(this.a11*i.a11+this.a21*i.a12+this.a31*i.a13,this.a11*i.a21+this.a21*i.a22+this.a31*i.a23,this.a11*i.a31+this.a21*i.a32+this.a31*i.a33,this.a12*i.a11+this.a22*i.a12+this.a32*i.a13,this.a12*i.a21+this.a22*i.a22+this.a32*i.a23,this.a12*i.a31+this.a22*i.a32+this.a32*i.a33,this.a13*i.a11+this.a23*i.a12+this.a33*i.a13,this.a13*i.a21+this.a23*i.a22+this.a33*i.a23,this.a13*i.a31+this.a23*i.a32+this.a33*i.a33)}}class Kr extends ui{sampleGrid(i,o,l,h,d,m,y,A,S,R,P,k,G,te,ne,ue,ye,ke,Le){const Re=fr.quadrilateralToQuadrilateral(h,d,m,y,A,S,R,P,k,G,te,ne,ue,ye,ke,Le);return this.sampleGridWithTransform(i,o,l,Re)}sampleGridWithTransform(i,o,l,h){if(o<=0||l<=0)throw new fe;const d=new $e(o,l),m=new Float32Array(2*o);for(let y=0;y<l;y++){const A=m.length,S=y+.5;for(let R=0;R<A;R+=2)m[R]=R/2+.5,m[R+1]=S;h.transformPoints(m),ui.checkAndNudgePoints(i,m);try{for(let R=0;R<A;R+=2)i.get(Math.floor(m[R]),Math.floor(m[R+1]))&&d.set(R/2,y)}catch{throw new fe}}return d}}class sr{static setGridSampler(i){sr.gridSampler=i}static getInstance(){return sr.gridSampler}}sr.gridSampler=new Kr;class Kn{constructor(i,o){this.x=i,this.y=o}toResultPoint(){return new He(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Ls{constructor(i){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=i}detect(){return this.detectMirror(!1)}detectMirror(i){let o=this.getMatrixCenter(),l=this.getBullsEyeCorners(o);if(i){let m=l[0];l[0]=l[2],l[2]=m}this.extractParameters(l);let h=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),d=this.getMatrixCornerPoints(l);return new es(h,d,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(i){if(!this.isValidPoint(i[0])||!this.isValidPoint(i[1])||!this.isValidPoint(i[2])||!this.isValidPoint(i[3]))throw new fe;let o=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(i[0],i[1],o),this.sampleLine(i[1],i[2],o),this.sampleLine(i[2],i[3],o),this.sampleLine(i[3],i[0],o)]);this.shift=this.getRotation(l,o);let h=0;for(let m=0;m<4;m++){let y=l[(this.shift+m)%4];this.compact?(h<<=7,h+=y>>1&127):(h<<=10,h+=(y>>2&992)+(y>>1&31))}let d=this.getCorrectedParameterData(h,this.compact);this.compact?(this.nbLayers=(d>>6)+1,this.nbDataBlocks=(d&63)+1):(this.nbLayers=(d>>11)+1,this.nbDataBlocks=(d&2047)+1)}getRotation(i,o){let l=0;i.forEach((h,d,m)=>{let y=(h>>o-2<<1)+(h&1);l=(l<<3)+y}),l=((l&1)<<11)+(l>>1);for(let h=0;h<4;h++)if(Q.bitCount(l^this.EXPECTED_CORNER_BITS[h])<=2)return h;throw new fe}getCorrectedParameterData(i,o){let l,h;o?(l=7,h=2):(l=10,h=4);let d=l-h,m=new Int32Array(l);for(let A=l-1;A>=0;--A)m[A]=i&15,i>>=4;try{new Wr(At.AZTEC_PARAM).decode(m,d)}catch{throw new fe}let y=0;for(let A=0;A<h;A++)y=(y<<4)+m[A];return y}getBullsEyeCorners(i){let o=i,l=i,h=i,d=i,m=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let P=this.getFirstDifferent(o,m,1,-1),k=this.getFirstDifferent(l,m,1,1),G=this.getFirstDifferent(h,m,-1,1),te=this.getFirstDifferent(d,m,-1,-1);if(this.nbCenterLayers>2){let ne=this.distancePoint(te,P)*this.nbCenterLayers/(this.distancePoint(d,o)*(this.nbCenterLayers+2));if(ne<.75||ne>1.25||!this.isWhiteOrBlackRectangle(P,k,G,te))break}o=P,l=k,h=G,d=te,m=!m}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new fe;this.compact=this.nbCenterLayers===5;let y=new He(o.getX()+.5,o.getY()-.5),A=new He(l.getX()+.5,l.getY()+.5),S=new He(h.getX()-.5,h.getY()+.5),R=new He(d.getX()-.5,d.getY()-.5);return this.expandSquare([y,A,S,R],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let i,o,l,h;try{let y=new mn(this.image).detect();i=y[0],o=y[1],l=y[2],h=y[3]}catch{let A=this.image.getWidth()/2,S=this.image.getHeight()/2;i=this.getFirstDifferent(new Kn(A+7,S-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new Kn(A+7,S+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Kn(A-7,S+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new Kn(A-7,S-7),!1,-1,-1).toResultPoint()}let d=Ze.round((i.getX()+h.getX()+o.getX()+l.getX())/4),m=Ze.round((i.getY()+h.getY()+o.getY()+l.getY())/4);try{let y=new mn(this.image,15,d,m).detect();i=y[0],o=y[1],l=y[2],h=y[3]}catch{i=this.getFirstDifferent(new Kn(d+7,m-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new Kn(d+7,m+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Kn(d-7,m+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new Kn(d-7,m-7),!1,-1,-1).toResultPoint()}return d=Ze.round((i.getX()+h.getX()+o.getX()+l.getX())/4),m=Ze.round((i.getY()+h.getY()+o.getY()+l.getY())/4),new Kn(d,m)}getMatrixCornerPoints(i){return this.expandSquare(i,2*this.nbCenterLayers,this.getDimension())}sampleGrid(i,o,l,h,d){let m=sr.getInstance(),y=this.getDimension(),A=y/2-this.nbCenterLayers,S=y/2+this.nbCenterLayers;return m.sampleGrid(i,y,y,A,A,S,A,S,S,A,S,o.getX(),o.getY(),l.getX(),l.getY(),h.getX(),h.getY(),d.getX(),d.getY())}sampleLine(i,o,l){let h=0,d=this.distanceResultPoint(i,o),m=d/l,y=i.getX(),A=i.getY(),S=m*(o.getX()-i.getX())/d,R=m*(o.getY()-i.getY())/d;for(let P=0;P<l;P++)this.image.get(Ze.round(y+P*S),Ze.round(A+P*R))&&(h|=1<<l-P-1);return h}isWhiteOrBlackRectangle(i,o,l,h){let d=3;i=new Kn(i.getX()-d,i.getY()+d),o=new Kn(o.getX()-d,o.getY()-d),l=new Kn(l.getX()+d,l.getY()-d),h=new Kn(h.getX()+d,h.getY()+d);let m=this.getColor(h,i);if(m===0)return!1;let y=this.getColor(i,o);return y!==m||(y=this.getColor(o,l),y!==m)?!1:(y=this.getColor(l,h),y===m)}getColor(i,o){let l=this.distancePoint(i,o),h=(o.getX()-i.getX())/l,d=(o.getY()-i.getY())/l,m=0,y=i.getX(),A=i.getY(),S=this.image.get(i.getX(),i.getY()),R=Math.ceil(l);for(let k=0;k<R;k++)y+=h,A+=d,this.image.get(Ze.round(y),Ze.round(A))!==S&&m++;let P=m/l;return P>.1&&P<.9?0:P<=.1===S?1:-1}getFirstDifferent(i,o,l,h){let d=i.getX()+l,m=i.getY()+h;for(;this.isValid(d,m)&&this.image.get(d,m)===o;)d+=l,m+=h;for(d-=l,m-=h;this.isValid(d,m)&&this.image.get(d,m)===o;)d+=l;for(d-=l;this.isValid(d,m)&&this.image.get(d,m)===o;)m+=h;return m-=h,new Kn(d,m)}expandSquare(i,o,l){let h=l/(2*o),d=i[0].getX()-i[2].getX(),m=i[0].getY()-i[2].getY(),y=(i[0].getX()+i[2].getX())/2,A=(i[0].getY()+i[2].getY())/2,S=new He(y+h*d,A+h*m),R=new He(y-h*d,A-h*m);d=i[1].getX()-i[3].getX(),m=i[1].getY()-i[3].getY(),y=(i[1].getX()+i[3].getX())/2,A=(i[1].getY()+i[3].getY())/2;let P=new He(y+h*d,A+h*m),k=new He(y-h*d,A-h*m);return[S,P,R,k]}isValid(i,o){return i>=0&&i<this.image.getWidth()&&o>0&&o<this.image.getHeight()}isValidPoint(i){let o=Ze.round(i.getX()),l=Ze.round(i.getY());return this.isValid(o,l)}distancePoint(i,o){return Ze.distance(i.getX(),i.getY(),o.getX(),o.getY())}distanceResultPoint(i,o){return Ze.distance(i.getX(),i.getY(),o.getX(),o.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Q.truncDivision(this.nbLayers-4,8)+1)+15}}class ts{decode(i,o=null){let l=null,h=new Ls(i.getBlackMatrix()),d=null,m=null;try{let R=h.detectMirror(!1);d=R.getPoints(),this.reportFoundResultPoints(o,d),m=new qt().decode(R)}catch(R){l=R}if(m==null)try{let R=h.detectMirror(!0);d=R.getPoints(),this.reportFoundResultPoints(o,d),m=new qt().decode(R)}catch(R){throw l??R}let y=new je(m.getText(),m.getRawBytes(),m.getNumBits(),d,Pe.AZTEC,$.currentTimeMillis()),A=m.getByteSegments();A!=null&&y.putMetadata(vt.BYTE_SEGMENTS,A);let S=m.getECLevel();return S!=null&&y.putMetadata(vt.ERROR_CORRECTION_LEVEL,S),y}reportFoundResultPoints(i,o){if(i!=null){let l=i.get(Oe.NEED_RESULT_POINT_CALLBACK);l!=null&&o.forEach((h,d,m)=>{l.foundPossibleResultPoint(h)})}}reset(){}}class ta extends Ve{constructor(i=500){super(new ts,i)}}class Yt{decode(i,o){try{return this.doDecode(i,o)}catch{if(o&&o.get(Oe.TRY_HARDER)===!0&&i.isRotateSupported()){const d=i.rotateCounterClockwise(),m=this.doDecode(d,o),y=m.getResultMetadata();let A=270;y!==null&&y.get(vt.ORIENTATION)===!0&&(A=A+y.get(vt.ORIENTATION)%360),m.putMetadata(vt.ORIENTATION,A);const S=m.getResultPoints();if(S!==null){const R=d.getHeight();for(let P=0;P<S.length;P++)S[P]=new He(R-S[P].getY()-1,S[P].getX())}return m}else throw new fe}}reset(){}doDecode(i,o){const l=i.getWidth(),h=i.getHeight();let d=new le(l);const m=o&&o.get(Oe.TRY_HARDER)===!0,y=Math.max(1,h>>(m?8:5));let A;m?A=h:A=15;const S=Math.trunc(h/2);for(let R=0;R<A;R++){const P=Math.trunc((R+1)/2),k=(R&1)===0,G=S+y*(k?P:-P);if(G<0||G>=h)break;try{d=i.getBlackRow(G,d)}catch{continue}for(let te=0;te<2;te++){if(te===1&&(d.reverse(),o&&o.get(Oe.NEED_RESULT_POINT_CALLBACK)===!0)){const ne=new Map;o.forEach((ue,ye)=>ne.set(ye,ue)),ne.delete(Oe.NEED_RESULT_POINT_CALLBACK),o=ne}try{const ne=this.decodeRow(G,d,o);if(te===1){ne.putMetadata(vt.ORIENTATION,180);const ue=ne.getResultPoints();ue!==null&&(ue[0]=new He(l-ue[0].getX()-1,ue[0].getY()),ue[1]=new He(l-ue[1].getX()-1,ue[1].getY()))}return ne}catch{}}}throw new fe}static recordPattern(i,o,l){const h=l.length;for(let S=0;S<h;S++)l[S]=0;const d=i.getSize();if(o>=d)throw new fe;let m=!i.get(o),y=0,A=o;for(;A<d;){if(i.get(A)!==m)l[y]++;else{if(++y===h)break;l[y]=1,m=!m}A++}if(!(y===h||y===h-1&&A===d))throw new fe}static recordPatternInReverse(i,o,l){let h=l.length,d=i.get(o);for(;o>0&&h>=0;)i.get(--o)!==d&&(h--,d=!d);if(h>=0)throw new fe;Yt.recordPattern(i,o+1,l)}static patternMatchVariance(i,o,l){const h=i.length;let d=0,m=0;for(let S=0;S<h;S++)d+=i[S],m+=o[S];if(d<m)return Number.POSITIVE_INFINITY;const y=d/m;l*=y;let A=0;for(let S=0;S<h;S++){const R=i[S],P=o[S]*y,k=R>P?R-P:P-R;if(k>l)return Number.POSITIVE_INFINITY;A+=k}return A/d}}class Me extends Yt{static findStartPattern(i){const o=i.getSize(),l=i.getNextSet(0);let h=0,d=Int32Array.from([0,0,0,0,0,0]),m=l,y=!1;const A=6;for(let S=l;S<o;S++)if(i.get(S)!==y)d[h]++;else{if(h===A-1){let R=Me.MAX_AVG_VARIANCE,P=-1;for(let k=Me.CODE_START_A;k<=Me.CODE_START_C;k++){const G=Yt.patternMatchVariance(d,Me.CODE_PATTERNS[k],Me.MAX_INDIVIDUAL_VARIANCE);G<R&&(R=G,P=k)}if(P>=0&&i.isRange(Math.max(0,m-(S-m)/2),m,!1))return Int32Array.from([m,S,P]);m+=d[0]+d[1],d=d.slice(2,d.length-1),d[h-1]=0,d[h]=0,h--}else h++;d[h]=1,y=!y}throw new fe}static decodeCode(i,o,l){Yt.recordPattern(i,l,o);let h=Me.MAX_AVG_VARIANCE,d=-1;for(let m=0;m<Me.CODE_PATTERNS.length;m++){const y=Me.CODE_PATTERNS[m],A=this.patternMatchVariance(o,y,Me.MAX_INDIVIDUAL_VARIANCE);A<h&&(h=A,d=m)}if(d>=0)return d;throw new fe}decodeRow(i,o,l){const h=l&&l.get(Oe.ASSUME_GS1)===!0,d=Me.findStartPattern(o),m=d[2];let y=0;const A=new Uint8Array(20);A[y++]=m;let S;switch(m){case Me.CODE_START_A:S=Me.CODE_CODE_A;break;case Me.CODE_START_B:S=Me.CODE_CODE_B;break;case Me.CODE_START_C:S=Me.CODE_CODE_C;break;default:throw new j}let R=!1,P=!1,k="",G=d[0],te=d[1];const ne=Int32Array.from([0,0,0,0,0,0]);let ue=0,ye=0,ke=m,Le=0,Re=!0,Ot=!1,dt=!1;for(;!R;){const pa=P;switch(P=!1,ue=ye,ye=Me.decodeCode(o,ne,te),A[y++]=ye,ye!==Me.CODE_STOP&&(Re=!0),ye!==Me.CODE_STOP&&(Le++,ke+=Le*ye),G=te,te+=ne.reduce((Eh,Fc)=>Eh+Fc,0),ye){case Me.CODE_START_A:case Me.CODE_START_B:case Me.CODE_START_C:throw new j}switch(S){case Me.CODE_CODE_A:if(ye<64)dt===Ot?k+=String.fromCharCode(32+ye):k+=String.fromCharCode(32+ye+128),dt=!1;else if(ye<96)dt===Ot?k+=String.fromCharCode(ye-64):k+=String.fromCharCode(ye+64),dt=!1;else switch(ye!==Me.CODE_STOP&&(Re=!1),ye){case Me.CODE_FNC_1:h&&(k.length===0?k+="]C1":k+="");break;case Me.CODE_FNC_2:case Me.CODE_FNC_3:break;case Me.CODE_FNC_4_A:!Ot&&dt?(Ot=!0,dt=!1):Ot&&dt?(Ot=!1,dt=!1):dt=!0;break;case Me.CODE_SHIFT:P=!0,S=Me.CODE_CODE_B;break;case Me.CODE_CODE_B:S=Me.CODE_CODE_B;break;case Me.CODE_CODE_C:S=Me.CODE_CODE_C;break;case Me.CODE_STOP:R=!0;break}break;case Me.CODE_CODE_B:if(ye<96)dt===Ot?k+=String.fromCharCode(32+ye):k+=String.fromCharCode(32+ye+128),dt=!1;else switch(ye!==Me.CODE_STOP&&(Re=!1),ye){case Me.CODE_FNC_1:h&&(k.length===0?k+="]C1":k+="");break;case Me.CODE_FNC_2:case Me.CODE_FNC_3:break;case Me.CODE_FNC_4_B:!Ot&&dt?(Ot=!0,dt=!1):Ot&&dt?(Ot=!1,dt=!1):dt=!0;break;case Me.CODE_SHIFT:P=!0,S=Me.CODE_CODE_A;break;case Me.CODE_CODE_A:S=Me.CODE_CODE_A;break;case Me.CODE_CODE_C:S=Me.CODE_CODE_C;break;case Me.CODE_STOP:R=!0;break}break;case Me.CODE_CODE_C:if(ye<100)ye<10&&(k+="0"),k+=ye;else switch(ye!==Me.CODE_STOP&&(Re=!1),ye){case Me.CODE_FNC_1:h&&(k.length===0?k+="]C1":k+="");break;case Me.CODE_CODE_A:S=Me.CODE_CODE_A;break;case Me.CODE_CODE_B:S=Me.CODE_CODE_B;break;case Me.CODE_STOP:R=!0;break}break}pa&&(S=S===Me.CODE_CODE_A?Me.CODE_CODE_B:Me.CODE_CODE_A)}const Zn=te-G;if(te=o.getNextUnset(te),!o.isRange(te,Math.min(o.getSize(),te+(te-G)/2),!1))throw new fe;if(ke-=Le*ue,ke%103!==ue)throw new B;const Si=k.length;if(Si===0)throw new fe;Si>0&&Re&&(S===Me.CODE_CODE_C?k=k.substring(0,Si-2):k=k.substring(0,Si-1));const Vr=(d[1]+d[0])/2,hn=G+Zn/2,Ir=A.length,yi=new Uint8Array(Ir);for(let pa=0;pa<Ir;pa++)yi[pa]=A[pa];const no=[new He(Vr,i),new He(hn,i)];return new je(k,yi,0,no,Pe.CODE_128,new Date().getTime())}}Me.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Me.MAX_AVG_VARIANCE=.25,Me.MAX_INDIVIDUAL_VARIANCE=.7,Me.CODE_SHIFT=98,Me.CODE_CODE_C=99,Me.CODE_CODE_B=100,Me.CODE_CODE_A=101,Me.CODE_FNC_1=102,Me.CODE_FNC_2=97,Me.CODE_FNC_3=96,Me.CODE_FNC_4_A=101,Me.CODE_FNC_4_B=100,Me.CODE_START_A=103,Me.CODE_START_B=104,Me.CODE_START_C=105,Me.CODE_STOP=106;class Xt extends Yt{constructor(i=!1,o=!1){super(),this.usingCheckDigit=i,this.extendedMode=o,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(i,o,l){let h=this.counters;h.fill(0),this.decodeRowResult="";let d=Xt.findAsteriskPattern(o,h),m=o.getNextSet(d[1]),y=o.getSize(),A,S;do{Xt.recordPattern(o,m,h);let ne=Xt.toNarrowWidePattern(h);if(ne<0)throw new fe;A=Xt.patternToChar(ne),this.decodeRowResult+=A,S=m;for(let ue of h)m+=ue;m=o.getNextSet(m)}while(A!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let R=0;for(let ne of h)R+=ne;let P=m-S-R;if(m!==y&&P*2<R)throw new fe;if(this.usingCheckDigit){let ne=this.decodeRowResult.length-1,ue=0;for(let ye=0;ye<ne;ye++)ue+=Xt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ye));if(this.decodeRowResult.charAt(ne)!==Xt.ALPHABET_STRING.charAt(ue%43))throw new B;this.decodeRowResult=this.decodeRowResult.substring(0,ne)}if(this.decodeRowResult.length===0)throw new fe;let k;this.extendedMode?k=Xt.decodeExtended(this.decodeRowResult):k=this.decodeRowResult;let G=(d[1]+d[0])/2,te=S+R/2;return new je(k,null,0,[new He(G,i),new He(te,i)],Pe.CODE_39,new Date().getTime())}static findAsteriskPattern(i,o){let l=i.getSize(),h=i.getNextSet(0),d=0,m=h,y=!1,A=o.length;for(let S=h;S<l;S++)if(i.get(S)!==y)o[d]++;else{if(d===A-1){if(this.toNarrowWidePattern(o)===Xt.ASTERISK_ENCODING&&i.isRange(Math.max(0,m-Math.floor((S-m)/2)),m,!1))return[m,S];m+=o[0]+o[1],o.copyWithin(0,2,2+d-1),o[d-1]=0,o[d]=0,d--}else d++;o[d]=1,y=!y}throw new fe}static toNarrowWidePattern(i){let o=i.length,l=0,h;do{let d=2147483647;for(let A of i)A<d&&A>l&&(d=A);l=d,h=0;let m=0,y=0;for(let A=0;A<o;A++){let S=i[A];S>l&&(y|=1<<o-1-A,h++,m+=S)}if(h===3){for(let A=0;A<o&&h>0;A++){let S=i[A];if(S>l&&(h--,S*2>=m))return-1}return y}}while(h>3);return-1}static patternToChar(i){for(let o=0;o<Xt.CHARACTER_ENCODINGS.length;o++)if(Xt.CHARACTER_ENCODINGS[o]===i)return Xt.ALPHABET_STRING.charAt(o);if(i===Xt.ASTERISK_ENCODING)return"*";throw new fe}static decodeExtended(i){let o=i.length,l="";for(let h=0;h<o;h++){let d=i.charAt(h);if(d==="+"||d==="$"||d==="%"||d==="/"){let m=i.charAt(h+1),y="\0";switch(d){case"+":if(m>="A"&&m<="Z")y=String.fromCharCode(m.charCodeAt(0)+32);else throw new j;break;case"$":if(m>="A"&&m<="Z")y=String.fromCharCode(m.charCodeAt(0)-64);else throw new j;break;case"%":if(m>="A"&&m<="E")y=String.fromCharCode(m.charCodeAt(0)-38);else if(m>="F"&&m<="J")y=String.fromCharCode(m.charCodeAt(0)-11);else if(m>="K"&&m<="O")y=String.fromCharCode(m.charCodeAt(0)+16);else if(m>="P"&&m<="T")y=String.fromCharCode(m.charCodeAt(0)+43);else if(m==="U")y="\0";else if(m==="V")y="@";else if(m==="W")y="`";else if(m==="X"||m==="Y"||m==="Z")y="";else throw new j;break;case"/":if(m>="A"&&m<="O")y=String.fromCharCode(m.charCodeAt(0)-32);else if(m==="Z")y=":";else throw new j;break}l+=y,h++}else l+=d}return l}}Xt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Xt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Xt.ASTERISK_ENCODING=148;class st extends Yt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(i,o,l){let h=this.decodeStart(o),d=this.decodeEnd(o),m=new K;st.decodeMiddle(o,h[1],d[0],m);let y=m.toString(),A=null;l!=null&&(A=l.get(Oe.ALLOWED_LENGTHS)),A==null&&(A=st.DEFAULT_ALLOWED_LENGTHS);let S=y.length,R=!1,P=0;for(let te of A){if(S===te){R=!0;break}te>P&&(P=te)}if(!R&&S>P&&(R=!0),!R)throw new j;const k=[new He(h[1],i),new He(d[0],i)];return new je(y,null,0,k,Pe.ITF,new Date().getTime())}static decodeMiddle(i,o,l,h){let d=new Int32Array(10),m=new Int32Array(5),y=new Int32Array(5);for(d.fill(0),m.fill(0),y.fill(0);o<l;){Yt.recordPattern(i,o,d);for(let S=0;S<5;S++){let R=2*S;m[S]=d[R],y[S]=d[R+1]}let A=st.decodeDigit(m);h.append(A.toString()),A=this.decodeDigit(y),h.append(A.toString()),d.forEach(function(S){o+=S})}}decodeStart(i){let o=st.skipWhiteSpace(i),l=st.findGuardPattern(i,o,st.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(i,l[0]),l}validateQuietZone(i,o){let l=this.narrowLineWidth*10;l=l<o?l:o;for(let h=o-1;l>0&&h>=0&&!i.get(h);h--)l--;if(l!==0)throw new fe}static skipWhiteSpace(i){const o=i.getSize(),l=i.getNextSet(0);if(l===o)throw new fe;return l}decodeEnd(i){i.reverse();try{let o=st.skipWhiteSpace(i),l;try{l=st.findGuardPattern(i,o,st.END_PATTERN_REVERSED[0])}catch(d){d instanceof fe&&(l=st.findGuardPattern(i,o,st.END_PATTERN_REVERSED[1]))}this.validateQuietZone(i,l[0]);let h=l[0];return l[0]=i.getSize()-l[1],l[1]=i.getSize()-h,l}finally{i.reverse()}}static findGuardPattern(i,o,l){let h=l.length,d=new Int32Array(h),m=i.getSize(),y=!1,A=0,S=o;d.fill(0);for(let R=o;R<m;R++)if(i.get(R)!==y)d[A]++;else{if(A===h-1){if(Yt.patternMatchVariance(d,l,st.MAX_INDIVIDUAL_VARIANCE)<st.MAX_AVG_VARIANCE)return[S,R];S+=d[0]+d[1],$.arraycopy(d,2,d,0,A-1),d[A-1]=0,d[A]=0,A--}else A++;d[A]=1,y=!y}throw new fe}static decodeDigit(i){let o=st.MAX_AVG_VARIANCE,l=-1,h=st.PATTERNS.length;for(let d=0;d<h;d++){let m=st.PATTERNS[d],y=Yt.patternMatchVariance(i,m,st.MAX_INDIVIDUAL_VARIANCE);y<o?(o=y,l=d):y===o&&(l=-1)}if(l>=0)return l%10;throw new fe}}st.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],st.MAX_AVG_VARIANCE=.38,st.MAX_INDIVIDUAL_VARIANCE=.5,st.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],st.START_PATTERN=Int32Array.from([1,1,1,1]),st.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class sn extends Yt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(i){let o=!1,l,h=0,d=Int32Array.from([0,0,0]);for(;!o;){d=Int32Array.from([0,0,0]),l=sn.findGuardPattern(i,h,!1,this.START_END_PATTERN,d);let m=l[0];h=l[1];let y=m-(h-m);y>=0&&(o=i.isRange(y,m,!1))}return l}static checkChecksum(i){return sn.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let o=i.length;if(o===0)return!1;let l=parseInt(i.charAt(o-1),10);return sn.getStandardUPCEANChecksum(i.substring(0,o-1))===l}static getStandardUPCEANChecksum(i){let o=i.length,l=0;for(let h=o-1;h>=0;h-=2){let d=i.charAt(h).charCodeAt(0)-48;if(d<0||d>9)throw new j;l+=d}l*=3;for(let h=o-2;h>=0;h-=2){let d=i.charAt(h).charCodeAt(0)-48;if(d<0||d>9)throw new j;l+=d}return(1e3-l)%10}static decodeEnd(i,o){return sn.findGuardPattern(i,o,!1,sn.START_END_PATTERN,new Int32Array(sn.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(i,o,l,h){return this.findGuardPattern(i,o,l,h,new Int32Array(h.length))}static findGuardPattern(i,o,l,h,d){let m=i.getSize();o=l?i.getNextUnset(o):i.getNextSet(o);let y=0,A=o,S=h.length,R=l;for(let P=o;P<m;P++)if(i.get(P)!==R)d[y]++;else{if(y===S-1){if(Yt.patternMatchVariance(d,h,sn.MAX_INDIVIDUAL_VARIANCE)<sn.MAX_AVG_VARIANCE)return Int32Array.from([A,P]);A+=d[0]+d[1];let k=d.slice(2,d.length-1);for(let G=0;G<y-1;G++)d[G]=k[G];d[y-1]=0,d[y]=0,y--}else y++;d[y]=1,R=!R}throw new fe}static decodeDigit(i,o,l,h){this.recordPattern(i,l,o);let d=this.MAX_AVG_VARIANCE,m=-1,y=h.length;for(let A=0;A<y;A++){let S=h[A],R=Yt.patternMatchVariance(o,S,sn.MAX_INDIVIDUAL_VARIANCE);R<d&&(d=R,m=A)}if(m>=0)return m;throw new fe}}sn.MAX_AVG_VARIANCE=.48,sn.MAX_INDIVIDUAL_VARIANCE=.7,sn.START_END_PATTERN=Int32Array.from([1,1,1]),sn.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),sn.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),sn.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class hi{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,o,l){let h=this.decodeRowStringBuffer,d=this.decodeMiddle(o,l,h),m=h.toString(),y=hi.parseExtensionString(m),A=[new He((l[0]+l[1])/2,i),new He(d,i)],S=new je(m,null,0,A,Pe.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&S.putAllMetadata(y),S}decodeMiddle(i,o,l){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let d=i.getSize(),m=o[1],y=0;for(let S=0;S<5&&m<d;S++){let R=sn.decodeDigit(i,h,m,sn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+R%10);for(let P of h)m+=P;R>=10&&(y|=1<<4-S),S!==4&&(m=i.getNextSet(m),m=i.getNextUnset(m))}if(l.length!==5)throw new fe;let A=this.determineCheckDigit(y);if(hi.extensionChecksum(l.toString())!==A)throw new fe;return m}static extensionChecksum(i){let o=i.length,l=0;for(let h=o-2;h>=0;h-=2)l+=i.charAt(h).charCodeAt(0)-48;l*=3;for(let h=o-1;h>=0;h-=2)l+=i.charAt(h).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(i){for(let o=0;o<10;o++)if(i===this.CHECK_DIGIT_ENCODINGS[o])return o;throw new fe}static parseExtensionString(i){if(i.length!==5)return null;let o=hi.parseExtension5String(i);return o==null?null:new Map([[vt.SUGGESTED_PRICE,o]])}static parseExtension5String(i){let o;switch(i.charAt(0)){case"0":o="";break;case"5":o="$";break;case"9":switch(i){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}o="";break;default:o="";break}let l=parseInt(i.substring(1)),h=(l/100).toString(),d=l%100,m=d<10?"0"+d:d.toString();return o+h+"."+m}}class bs{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,o,l){let h=this.decodeRowStringBuffer,d=this.decodeMiddle(o,l,h),m=h.toString(),y=bs.parseExtensionString(m),A=[new He((l[0]+l[1])/2,i),new He(d,i)],S=new je(m,null,0,A,Pe.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&S.putAllMetadata(y),S}decodeMiddle(i,o,l){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let d=i.getSize(),m=o[1],y=0;for(let A=0;A<2&&m<d;A++){let S=sn.decodeDigit(i,h,m,sn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+S%10);for(let R of h)m+=R;S>=10&&(y|=1<<1-A),A!==1&&(m=i.getNextSet(m),m=i.getNextUnset(m))}if(l.length!==2)throw new fe;if(parseInt(l.toString())%4!==y)throw new fe;return m}static parseExtensionString(i){return i.length!==2?null:new Map([[vt.ISSUE_NUMBER,parseInt(i)]])}}class Qr{static decodeRow(i,o,l){let h=sn.findGuardPattern(o,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new hi().decodeRow(i,o,h)}catch{return new bs().decodeRow(i,o,h)}}}Qr.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class bt extends sn{constructor(){super(),this.decodeRowStringBuffer="",bt.L_AND_G_PATTERNS=bt.L_PATTERNS.map(i=>Int32Array.from(i));for(let i=10;i<20;i++){let o=bt.L_PATTERNS[i-10],l=new Int32Array(o.length);for(let h=0;h<o.length;h++)l[h]=o[o.length-h-1];bt.L_AND_G_PATTERNS[i]=l}}decodeRow(i,o,l){let h=bt.findStartGuardPattern(o),d=l==null?null:l.get(Oe.NEED_RESULT_POINT_CALLBACK);if(d!=null){const Re=new He((h[0]+h[1])/2,i);d.foundPossibleResultPoint(Re)}let m=this.decodeMiddle(o,h,this.decodeRowStringBuffer),y=m.rowOffset,A=m.resultString;if(d!=null){const Re=new He(y,i);d.foundPossibleResultPoint(Re)}let S=this.decodeEnd(o,y);if(d!=null){const Re=new He((S[0]+S[1])/2,i);d.foundPossibleResultPoint(Re)}let R=S[1],P=R+(R-S[0]);if(P>=o.getSize()||!o.isRange(R,P,!1))throw new fe;let k=A.toString();if(k.length<8)throw new j;if(!bt.checkChecksum(k))throw new B;let G=(h[1]+h[0])/2,te=(S[1]+S[0])/2,ne=this.getBarcodeFormat(),ue=[new He(G,i),new He(te,i)],ye=new je(k,null,0,ue,ne,new Date().getTime()),ke=0;try{let Re=Qr.decodeRow(i,o,S[1]);ye.putMetadata(vt.UPC_EAN_EXTENSION,Re.getText()),ye.putAllMetadata(Re.getResultMetadata()),ye.addResultPoints(Re.getResultPoints()),ke=Re.getText().length}catch{}let Le=l==null?null:l.get(Oe.ALLOWED_EAN_EXTENSIONS);if(Le!=null){let Re=!1;for(let Ot in Le)if(ke.toString()===Ot){Re=!0;break}if(!Re)throw new fe}return ye}decodeEnd(i,o){return bt.findGuardPattern(i,o,!1,bt.START_END_PATTERN,new Int32Array(bt.START_END_PATTERN.length).fill(0))}static checkChecksum(i){return bt.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let o=i.length;if(o===0)return!1;let l=parseInt(i.charAt(o-1),10);return bt.getStandardUPCEANChecksum(i.substring(0,o-1))===l}static getStandardUPCEANChecksum(i){let o=i.length,l=0;for(let h=o-1;h>=0;h-=2){let d=i.charAt(h).charCodeAt(0)-48;if(d<0||d>9)throw new j;l+=d}l*=3;for(let h=o-2;h>=0;h-=2){let d=i.charAt(h).charCodeAt(0)-48;if(d<0||d>9)throw new j;l+=d}return(1e3-l)%10}}class an extends bt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,o,l){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let d=i.getSize(),m=o[1],y=0;for(let S=0;S<6&&m<d;S++){let R=bt.decodeDigit(i,h,m,bt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+R%10);for(let P of h)m+=P;R>=10&&(y|=1<<5-S)}l=an.determineFirstDigit(l,y),m=bt.findGuardPattern(i,m,!0,bt.MIDDLE_PATTERN,new Int32Array(bt.MIDDLE_PATTERN.length).fill(0))[1];for(let S=0;S<6&&m<d;S++){let R=bt.decodeDigit(i,h,m,bt.L_PATTERNS);l+=String.fromCharCode(48+R);for(let P of h)m+=P}return{rowOffset:m,resultString:l}}getBarcodeFormat(){return Pe.EAN_13}static determineFirstDigit(i,o){for(let l=0;l<10;l++)if(o===this.FIRST_DIGIT_ENCODINGS[l])return i=String.fromCharCode(48+l)+i,i;throw new fe}}an.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Zr extends bt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,o,l){const h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let d=i.getSize(),m=o[1];for(let A=0;A<4&&m<d;A++){let S=bt.decodeDigit(i,h,m,bt.L_PATTERNS);l+=String.fromCharCode(48+S);for(let R of h)m+=R}m=bt.findGuardPattern(i,m,!0,bt.MIDDLE_PATTERN,new Int32Array(bt.MIDDLE_PATTERN.length).fill(0))[1];for(let A=0;A<4&&m<d;A++){let S=bt.decodeDigit(i,h,m,bt.L_PATTERNS);l+=String.fromCharCode(48+S);for(let R of h)m+=R}return{rowOffset:m,resultString:l}}getBarcodeFormat(){return Pe.EAN_8}}class Jr extends bt{constructor(){super(...arguments),this.ean13Reader=new an}getBarcodeFormat(){return Pe.UPC_A}decode(i,o){return this.maybeReturnResult(this.ean13Reader.decode(i))}decodeRow(i,o,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(i,o,l))}decodeMiddle(i,o,l){return this.ean13Reader.decodeMiddle(i,o,l)}maybeReturnResult(i){let o=i.getText();if(o.charAt(0)==="0"){let l=new je(o.substring(1),null,null,i.getResultPoints(),Pe.UPC_A);return i.getResultMetadata()!=null&&l.putAllMetadata(i.getResultMetadata()),l}else throw new fe}reset(){this.ean13Reader.reset()}}class Cn extends bt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(i,o,l){const h=this.decodeMiddleCounters.map(S=>S);h[0]=0,h[1]=0,h[2]=0,h[3]=0;const d=i.getSize();let m=o[1],y=0;for(let S=0;S<6&&m<d;S++){const R=Cn.decodeDigit(i,h,m,Cn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+R%10);for(let P of h)m+=P;R>=10&&(y|=1<<5-S)}let A=Cn.determineNumSysAndCheckDigit(l,y);return{rowOffset:m,resultString:A}}decodeEnd(i,o){return Cn.findGuardPatternWithoutCounters(i,o,!0,Cn.MIDDLE_END_PATTERN)}checkChecksum(i){return bt.checkChecksum(Cn.convertUPCEtoUPCA(i))}static determineNumSysAndCheckDigit(i,o){for(let l=0;l<=1;l++)for(let h=0;h<10;h++)if(o===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][h]){let d=String.fromCharCode(48+l),m=String.fromCharCode(48+h);return d+i+m}throw fe.getNotFoundInstance()}getBarcodeFormat(){return Pe.UPC_E}static convertUPCEtoUPCA(i){const o=i.slice(1,7).split("").map(d=>d.charCodeAt(0)),l=new K;l.append(i.charAt(0));let h=o[5];switch(h){case 0:case 1:case 2:l.appendChars(o,0,2),l.append(h),l.append("0000"),l.appendChars(o,2,3);break;case 3:l.appendChars(o,0,3),l.append("00000"),l.appendChars(o,3,2);break;case 4:l.appendChars(o,0,4),l.append("00000"),l.append(o[4]);break;default:l.appendChars(o,0,5),l.append("0000"),l.append(h);break}return i.length>=8&&l.append(i.charAt(7)),l.toString()}}Cn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Cn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Ps extends Yt{constructor(i){super();let o=i==null?null:i.get(Oe.POSSIBLE_FORMATS),l=[];s(o)?(l.push(new an),l.push(new Jr),l.push(new Zr),l.push(new Cn)):(o.indexOf(Pe.EAN_13)>-1&&l.push(new an),o.indexOf(Pe.UPC_A)>-1&&l.push(new Jr),o.indexOf(Pe.EAN_8)>-1&&l.push(new Zr),o.indexOf(Pe.UPC_E)>-1&&l.push(new Cn)),this.readers=l}decodeRow(i,o,l){for(let h of this.readers)try{const d=h.decodeRow(i,o,l),m=d.getBarcodeFormat()===Pe.EAN_13&&d.getText().charAt(0)==="0",y=l==null?null:l.get(Oe.POSSIBLE_FORMATS),A=y==null||y.includes(Pe.UPC_A);if(m&&A){const S=d.getRawBytes(),R=new je(d.getText().substring(1),S,S?S.length:null,d.getResultPoints(),Pe.UPC_A);return R.putAllMetadata(d.getResultMetadata()),R}return d}catch{}throw new fe}reset(){for(let i of this.readers)i.reset()}}class Pn extends Yt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(i,o){for(let l=0;l<o.length;l++)if(Yt.patternMatchVariance(i,o[l],Pn.MAX_INDIVIDUAL_VARIANCE)<Pn.MAX_AVG_VARIANCE)return l;throw new fe}static count(i){return Ze.sum(new Int32Array(i))}static increment(i,o){let l=0,h=o[0];for(let d=1;d<i.length;d++)o[d]>h&&(h=o[d],l=d);i[l]++}static decrement(i,o){let l=0,h=o[0];for(let d=1;d<i.length;d++)o[d]<h&&(h=o[d],l=d);i[l]--}static isFinderPattern(i){let o=i[0]+i[1],l=o+i[2]+i[3],h=o/l;if(h>=Pn.MIN_FINDER_PATTERN_RATIO&&h<=Pn.MAX_FINDER_PATTERN_RATIO){let d=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;for(let y of i)y>m&&(m=y),y<d&&(d=y);return m<10*d}return!1}}Pn.MAX_AVG_VARIANCE=.2,Pn.MAX_INDIVIDUAL_VARIANCE=.45,Pn.MIN_FINDER_PATTERN_RATIO=9.5/12,Pn.MAX_FINDER_PATTERN_RATIO=12.5/14;class dr{constructor(i,o){this.value=i,this.checksumPortion=o}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(i){if(!(i instanceof dr))return!1;const o=i;return this.value===o.value&&this.checksumPortion===o.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class fi{constructor(i,o,l,h,d){this.value=i,this.startEnd=o,this.value=i,this.startEnd=o,this.resultPoints=new Array,this.resultPoints.push(new He(l,d)),this.resultPoints.push(new He(h,d))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(i){if(!(i instanceof fi))return!1;const o=i;return this.value===o.value}hashCode(){return this.value}}class Br{constructor(){}static getRSSvalue(i,o,l){let h=0;for(let A of i)h+=A;let d=0,m=0,y=i.length;for(let A=0;A<y-1;A++){let S;for(S=1,m|=1<<A;S<i[A];S++,m&=~(1<<A)){let R=Br.combins(h-S-1,y-A-2);if(l&&m===0&&h-S-(y-A-1)>=y-A-1&&(R-=Br.combins(h-S-(y-A),y-A-2)),y-A-1>1){let P=0;for(let k=h-S-(y-A-2);k>o;k--)P+=Br.combins(h-S-k-1,y-A-3);R-=P*(y-1-A)}else h-S>o&&R--;d+=R}h-=S}return d}static combins(i,o){let l,h;i-o>o?(h=o,l=i-o):(h=i-o,l=o);let d=1,m=1;for(let y=i;y>l;y--)d*=y,m<=h&&(d/=m,m++);for(;m<=h;)d/=m,m++;return d}}class ki{static buildBitArray(i){let o=i.length*2-1;i[i.length-1].getRightChar()==null&&(o-=1);let l=12*o,h=new le(l),d=0,y=i[0].getRightChar().getValue();for(let A=11;A>=0;--A)(y&1<<A)!=0&&h.set(d),d++;for(let A=1;A<i.length;++A){let S=i[A],R=S.getLeftChar().getValue();for(let P=11;P>=0;--P)(R&1<<P)!=0&&h.set(d),d++;if(S.getRightChar()!=null){let P=S.getRightChar().getValue();for(let k=11;k>=0;--k)(P&1<<k)!=0&&h.set(d),d++}}return h}}class $r{constructor(i,o){o?this.decodedInformation=null:(this.finished=i,this.decodedInformation=o)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class ns{constructor(i){this.newPosition=i}getNewPosition(){return this.newPosition}}class kn extends ns{constructor(i,o){super(i),this.value=o}getValue(){return this.value}isFNC1(){return this.value===kn.FNC1}}kn.FNC1="$";class br extends ns{constructor(i,o,l){super(i),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=o}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Tr extends ns{constructor(i,o,l){if(super(i),o<0||o>10||l<0||l>10)throw new j;this.firstDigit=o,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Tr.FNC1}isSecondDigitFNC1(){return this.secondDigit===Tr.FNC1}isAnyFNC1(){return this.firstDigit===Tr.FNC1||this.secondDigit===Tr.FNC1}}Tr.FNC1=10;class Fe{constructor(){}static parseFieldsInGeneralPurpose(i){if(!i)return null;if(i.length<2)throw new fe;let o=i.substring(0,2);for(let d of Fe.TWO_DIGIT_DATA_LENGTH)if(d[0]===o)return d[1]===Fe.VARIABLE_LENGTH?Fe.processVariableAI(2,d[2],i):Fe.processFixedAI(2,d[1],i);if(i.length<3)throw new fe;let l=i.substring(0,3);for(let d of Fe.THREE_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===Fe.VARIABLE_LENGTH?Fe.processVariableAI(3,d[2],i):Fe.processFixedAI(3,d[1],i);for(let d of Fe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===Fe.VARIABLE_LENGTH?Fe.processVariableAI(4,d[2],i):Fe.processFixedAI(4,d[1],i);if(i.length<4)throw new fe;let h=i.substring(0,4);for(let d of Fe.FOUR_DIGIT_DATA_LENGTH)if(d[0]===h)return d[1]===Fe.VARIABLE_LENGTH?Fe.processVariableAI(4,d[2],i):Fe.processFixedAI(4,d[1],i);throw new fe}static processFixedAI(i,o,l){if(l.length<i)throw new fe;let h=l.substring(0,i);if(l.length<i+o)throw new fe;let d=l.substring(i,i+o),m=l.substring(i+o),y="("+h+")"+d,A=Fe.parseFieldsInGeneralPurpose(m);return A==null?y:y+A}static processVariableAI(i,o,l){let h=l.substring(0,i),d;l.length<i+o?d=l.length:d=i+o;let m=l.substring(i,d),y=l.substring(d),A="("+h+")"+m,S=Fe.parseFieldsInGeneralPurpose(y);return S==null?A:A+S}}Fe.VARIABLE_LENGTH=[],Fe.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Fe.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Fe.VARIABLE_LENGTH,20],["22",Fe.VARIABLE_LENGTH,29],["30",Fe.VARIABLE_LENGTH,8],["37",Fe.VARIABLE_LENGTH,8],["90",Fe.VARIABLE_LENGTH,30],["91",Fe.VARIABLE_LENGTH,30],["92",Fe.VARIABLE_LENGTH,30],["93",Fe.VARIABLE_LENGTH,30],["94",Fe.VARIABLE_LENGTH,30],["95",Fe.VARIABLE_LENGTH,30],["96",Fe.VARIABLE_LENGTH,30],["97",Fe.VARIABLE_LENGTH,3],["98",Fe.VARIABLE_LENGTH,30],["99",Fe.VARIABLE_LENGTH,30]],Fe.THREE_DIGIT_DATA_LENGTH=[["240",Fe.VARIABLE_LENGTH,30],["241",Fe.VARIABLE_LENGTH,30],["242",Fe.VARIABLE_LENGTH,6],["250",Fe.VARIABLE_LENGTH,30],["251",Fe.VARIABLE_LENGTH,30],["253",Fe.VARIABLE_LENGTH,17],["254",Fe.VARIABLE_LENGTH,20],["400",Fe.VARIABLE_LENGTH,30],["401",Fe.VARIABLE_LENGTH,30],["402",17],["403",Fe.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Fe.VARIABLE_LENGTH,20],["421",Fe.VARIABLE_LENGTH,15],["422",3],["423",Fe.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Fe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Fe.VARIABLE_LENGTH,15],["391",Fe.VARIABLE_LENGTH,18],["392",Fe.VARIABLE_LENGTH,15],["393",Fe.VARIABLE_LENGTH,18],["703",Fe.VARIABLE_LENGTH,30]],Fe.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Fe.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Fe.VARIABLE_LENGTH,20],["8003",Fe.VARIABLE_LENGTH,30],["8004",Fe.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Fe.VARIABLE_LENGTH,30],["8008",Fe.VARIABLE_LENGTH,12],["8018",18],["8020",Fe.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Fe.VARIABLE_LENGTH,70],["8200",Fe.VARIABLE_LENGTH,70]];class gr{constructor(i){this.buffer=new K,this.information=i}decodeAllCodes(i,o){let l=o,h=null;do{let d=this.decodeGeneralPurposeField(l,h),m=Fe.parseFieldsInGeneralPurpose(d.getNewString());if(m!=null&&i.append(m),d.isRemaining()?h=""+d.getRemainingValue():h=null,l===d.getNewPosition())break;l=d.getNewPosition()}while(!0);return i.toString()}isStillNumeric(i){if(i+7>this.information.getSize())return i+4<=this.information.getSize();for(let o=i;o<i+3;++o)if(this.information.get(o))return!0;return this.information.get(i+3)}decodeNumeric(i){if(i+7>this.information.getSize()){let d=this.extractNumericValueFromBitArray(i,4);return d===0?new Tr(this.information.getSize(),Tr.FNC1,Tr.FNC1):new Tr(this.information.getSize(),d-1,Tr.FNC1)}let o=this.extractNumericValueFromBitArray(i,7),l=(o-8)/11,h=(o-8)%11;return new Tr(i+7,l,h)}extractNumericValueFromBitArray(i,o){return gr.extractNumericValueFromBitArray(this.information,i,o)}static extractNumericValueFromBitArray(i,o,l){let h=0;for(let d=0;d<l;++d)i.get(o+d)&&(h|=1<<l-d-1);return h}decodeGeneralPurposeField(i,o){this.buffer.setLengthToZero(),o!=null&&this.buffer.append(o),this.current.setPosition(i);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new br(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new br(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let i,o;do{let l=this.current.getPosition();if(this.current.isAlpha()?(o=this.parseAlphaBlock(),i=o.isFinished()):this.current.isIsoIec646()?(o=this.parseIsoIec646Block(),i=o.isFinished()):(o=this.parseNumericBlock(),i=o.isFinished()),!(l!==this.current.getPosition())&&!i)break}while(!i);return o.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let i=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFirstDigitFNC1()){let o;return i.isSecondDigitFNC1()?o=new br(this.current.getPosition(),this.buffer.toString()):o=new br(this.current.getPosition(),this.buffer.toString(),i.getSecondDigit()),new $r(!0,o)}if(this.buffer.append(i.getFirstDigit()),i.isSecondDigitFNC1()){let o=new br(this.current.getPosition(),this.buffer.toString());return new $r(!0,o)}this.buffer.append(i.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new $r(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let i=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let o=new br(this.current.getPosition(),this.buffer.toString());return new $r(!0,o)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new $r(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let i=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let o=new br(this.current.getPosition(),this.buffer.toString());return new $r(!0,o)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new $r(!1)}isStillIsoIec646(i){if(i+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(i,5);if(o>=5&&o<16)return!0;if(i+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,7);if(l>=64&&l<116)return!0;if(i+8>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(i,8);return h>=232&&h<253}decodeIsoIec646(i){let o=this.extractNumericValueFromBitArray(i,5);if(o===15)return new kn(i+5,kn.FNC1);if(o>=5&&o<15)return new kn(i+5,"0"+(o-5));let l=this.extractNumericValueFromBitArray(i,7);if(l>=64&&l<90)return new kn(i+7,""+(l+1));if(l>=90&&l<116)return new kn(i+7,""+(l+7));let h=this.extractNumericValueFromBitArray(i,8),d;switch(h){case 232:d="!";break;case 233:d='"';break;case 234:d="%";break;case 235:d="&";break;case 236:d="'";break;case 237:d="(";break;case 238:d=")";break;case 239:d="*";break;case 240:d="+";break;case 241:d=",";break;case 242:d="-";break;case 243:d=".";break;case 244:d="/";break;case 245:d=":";break;case 246:d=";";break;case 247:d="<";break;case 248:d="=";break;case 249:d=">";break;case 250:d="?";break;case 251:d="_";break;case 252:d=" ";break;default:throw new j}return new kn(i+8,d)}isStillAlpha(i){if(i+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(i,5);if(o>=5&&o<16)return!0;if(i+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,6);return l>=16&&l<63}decodeAlphanumeric(i){let o=this.extractNumericValueFromBitArray(i,5);if(o===15)return new kn(i+5,kn.FNC1);if(o>=5&&o<15)return new kn(i+5,"0"+(o-5));let l=this.extractNumericValueFromBitArray(i,6);if(l>=32&&l<58)return new kn(i+6,""+(l+33));let h;switch(l){case 58:h="*";break;case 59:h=",";break;case 60:h="-";break;case 61:h=".";break;case 62:h="/";break;default:throw new ir("Decoding invalid alphanumeric value: "+l)}return new kn(i+6,h)}isAlphaTo646ToAlphaLatch(i){if(i+1>this.information.getSize())return!1;for(let o=0;o<5&&o+i<this.information.getSize();++o)if(o===2){if(!this.information.get(i+2))return!1}else if(this.information.get(i+o))return!1;return!0}isAlphaOr646ToNumericLatch(i){if(i+3>this.information.getSize())return!1;for(let o=i;o<i+3;++o)if(this.information.get(o))return!1;return!0}isNumericToAlphaNumericLatch(i){if(i+1>this.information.getSize())return!1;for(let o=0;o<4&&o+i<this.information.getSize();++o)if(this.information.get(i+o))return!1;return!0}}class bn{constructor(i){this.information=i,this.generalDecoder=new gr(i)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Wt extends bn{constructor(i){super(i)}encodeCompressedGtin(i,o){i.append("(01)");let l=i.length();i.append("9"),this.encodeCompressedGtinWithoutAI(i,o,l)}encodeCompressedGtinWithoutAI(i,o,l){for(let h=0;h<4;++h){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(o+10*h,10);d/100===0&&i.append("0"),d/10===0&&i.append("0"),i.append(d)}Wt.appendCheckDigit(i,l)}static appendCheckDigit(i,o){let l=0;for(let h=0;h<13;h++){let d=i.charAt(h+o).charCodeAt(0)-48;l+=(h&1)===0?3*d:d}l=10-l%10,l===10&&(l=0),i.append(l)}}Wt.GTIN_SIZE=40;class vr extends Wt{constructor(i){super(i)}parseInformation(){let i=new K;i.append("(01)");let o=i.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(vr.HEADER_SIZE,4);return i.append(l),this.encodeCompressedGtinWithoutAI(i,vr.HEADER_SIZE+4,o),this.getGeneralDecoder().decodeAllCodes(i,vr.HEADER_SIZE+44)}}vr.HEADER_SIZE=4;class Bi extends bn{constructor(i){super(i)}parseInformation(){let i=new K;return this.getGeneralDecoder().decodeAllCodes(i,Bi.HEADER_SIZE)}}Bi.HEADER_SIZE=5;class Ts extends Wt{constructor(i){super(i)}encodeCompressedWeight(i,o,l){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(o,l);this.addWeightCode(i,h);let d=this.checkWeight(h),m=1e5;for(let y=0;y<5;++y)d/m===0&&i.append("0"),m/=10;i.append(d)}}class Ur extends Ts{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()!=Ur.HEADER_SIZE+Ts.GTIN_SIZE+Ur.WEIGHT_SIZE)throw new fe;let i=new K;return this.encodeCompressedGtin(i,Ur.HEADER_SIZE),this.encodeCompressedWeight(i,Ur.HEADER_SIZE+Ts.GTIN_SIZE,Ur.WEIGHT_SIZE),i.toString()}}Ur.HEADER_SIZE=5,Ur.WEIGHT_SIZE=15;class na extends Ur{constructor(i){super(i)}addWeightCode(i,o){i.append("(3103)")}checkWeight(i){return i}}class Ai extends Ur{constructor(i){super(i)}addWeightCode(i,o){o<1e4?i.append("(3202)"):i.append("(3203)")}checkWeight(i){return i<1e4?i:i-1e4}}class Sr extends Wt{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<Sr.HEADER_SIZE+Wt.GTIN_SIZE)throw new fe;let i=new K;this.encodeCompressedGtin(i,Sr.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(Sr.HEADER_SIZE+Wt.GTIN_SIZE,Sr.LAST_DIGIT_SIZE);i.append("(392"),i.append(o),i.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(Sr.HEADER_SIZE+Wt.GTIN_SIZE+Sr.LAST_DIGIT_SIZE,null);return i.append(l.getNewString()),i.toString()}}Sr.HEADER_SIZE=8,Sr.LAST_DIGIT_SIZE=2;class pn extends Wt{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<pn.HEADER_SIZE+Wt.GTIN_SIZE)throw new fe;let i=new K;this.encodeCompressedGtin(i,pn.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(pn.HEADER_SIZE+Wt.GTIN_SIZE,pn.LAST_DIGIT_SIZE);i.append("(393"),i.append(o),i.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(pn.HEADER_SIZE+Wt.GTIN_SIZE+pn.LAST_DIGIT_SIZE,pn.FIRST_THREE_DIGITS_SIZE);l/100==0&&i.append("0"),l/10==0&&i.append("0"),i.append(l);let h=this.getGeneralDecoder().decodeGeneralPurposeField(pn.HEADER_SIZE+Wt.GTIN_SIZE+pn.LAST_DIGIT_SIZE+pn.FIRST_THREE_DIGITS_SIZE,null);return i.append(h.getNewString()),i.toString()}}pn.HEADER_SIZE=8,pn.LAST_DIGIT_SIZE=2,pn.FIRST_THREE_DIGITS_SIZE=10;class Dt extends Ts{constructor(i,o,l){super(i),this.dateCode=l,this.firstAIdigits=o}parseInformation(){if(this.getInformation().getSize()!=Dt.HEADER_SIZE+Dt.GTIN_SIZE+Dt.WEIGHT_SIZE+Dt.DATE_SIZE)throw new fe;let i=new K;return this.encodeCompressedGtin(i,Dt.HEADER_SIZE),this.encodeCompressedWeight(i,Dt.HEADER_SIZE+Dt.GTIN_SIZE,Dt.WEIGHT_SIZE),this.encodeCompressedDate(i,Dt.HEADER_SIZE+Dt.GTIN_SIZE+Dt.WEIGHT_SIZE),i.toString()}encodeCompressedDate(i,o){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(o,Dt.DATE_SIZE);if(l==38400)return;i.append("("),i.append(this.dateCode),i.append(")");let h=l%32;l/=32;let d=l%12+1;l/=12;let m=l;m/10==0&&i.append("0"),i.append(m),d/10==0&&i.append("0"),i.append(d),h/10==0&&i.append("0"),i.append(h)}addWeightCode(i,o){i.append("("),i.append(this.firstAIdigits),i.append(o/1e5),i.append(")")}checkWeight(i){return i%1e5}}Dt.HEADER_SIZE=8,Dt.WEIGHT_SIZE=20,Dt.DATE_SIZE=16;function Or(L){try{if(L.get(1))return new vr(L);if(!L.get(2))return new Bi(L);switch(gr.extractNumericValueFromBitArray(L,1,4)){case 4:return new na(L);case 5:return new Ai(L)}switch(gr.extractNumericValueFromBitArray(L,1,5)){case 12:return new Sr(L);case 13:return new pn(L)}switch(gr.extractNumericValueFromBitArray(L,1,7)){case 56:return new Dt(L,"310","11");case 57:return new Dt(L,"320","11");case 58:return new Dt(L,"310","13");case 59:return new Dt(L,"320","13");case 60:return new Dt(L,"310","15");case 61:return new Dt(L,"320","15");case 62:return new Dt(L,"310","17");case 63:return new Dt(L,"320","17")}}catch(i){throw console.log(i),new ir("unknown decoder: "+L)}}class ar{constructor(i,o,l,h){this.leftchar=i,this.rightchar=o,this.finderpattern=l,this.maybeLast=h}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(i,o){return i instanceof ar?ar.equalsOrNull(i.leftchar,o.leftchar)&&ar.equalsOrNull(i.rightchar,o.rightchar)&&ar.equalsOrNull(i.finderpattern,o.finderpattern):!1}static equalsOrNull(i,o){return i===null?o===null:ar.equals(i,o)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class In{constructor(i,o,l){this.pairs=i,this.rowNumber=o,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(i){return this.checkEqualitity(this,i)}toString(){return"{ "+this.pairs+" }"}equals(i,o){return i instanceof In?this.checkEqualitity(i,o)&&i.wasReversed===o.wasReversed:!1}checkEqualitity(i,o){if(!i||!o)return;let l;return i.forEach((h,d)=>{o.forEach(m=>{h.getLeftChar().getValue()===m.getLeftChar().getValue()&&h.getRightChar().getValue()===m.getRightChar().getValue()&&h.getFinderPatter().getValue()===m.getFinderPatter().getValue()&&(l=!0)})}),l}}class Ie extends Pn{constructor(i){super(...arguments),this.pairs=new Array(Ie.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=i===!0}decodeRow(i,o,l){this.pairs.length=0,this.startFromEven=!1;try{return Ie.constructResult(this.decodeRow2pairs(i,o))}catch(h){this.verbose&&console.log(h)}return this.pairs.length=0,this.startFromEven=!0,Ie.constructResult(this.decodeRow2pairs(i,o))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(i,o){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(o,this.pairs,i))}catch(d){if(d instanceof fe){if(!this.pairs.length)throw new fe;l=!0}}if(this.checkChecksum())return this.pairs;let h;if(this.rows.length?h=!0:h=!1,this.storeRow(i,!1),h){let d=this.checkRowsBoolean(!1);if(d!=null||(d=this.checkRowsBoolean(!0),d!=null))return d}throw new fe}checkRowsBoolean(i){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,i&&(this.rows=this.rows.reverse());let o=null;try{o=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return i&&(this.rows=this.rows.reverse()),o}checkRows(i,o){for(let l=o;l<this.rows.length;l++){let h=this.rows[l];this.pairs.length=0;for(let m of i)this.pairs.push(m.getPairs());if(this.pairs.push(h.getPairs()),!Ie.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let d=new Array(i);d.push(h);try{return this.checkRows(d,l+1)}catch(m){this.verbose&&console.log(m)}}throw new fe}static isValidSequence(i){for(let o of Ie.FINDER_PATTERN_SEQUENCES){if(i.length>o.length)continue;let l=!0;for(let h=0;h<i.length;h++)if(i[h].getFinderPattern().getValue()!=o[h]){l=!1;break}if(l)return!0}return!1}storeRow(i,o){let l=0,h=!1,d=!1;for(;l<this.rows.length;){let m=this.rows[l];if(m.getRowNumber()>i){d=m.isEquivalent(this.pairs);break}h=m.isEquivalent(this.pairs),l++}d||h||Ie.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new In(this.pairs,i,o)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(i,o){for(let l of o)if(l.getPairs().length!==i.length){for(let h of l.getPairs())for(let d of i)if(ar.equals(h,d))break}}static isPartialRow(i,o){for(let l of o){let h=!0;for(let d of i){let m=!1;for(let y of l.getPairs())if(d.equals(y)){m=!0;break}if(!m){h=!1;break}}if(h)return!0}return!1}getRows(){return this.rows}static constructResult(i){let o=ki.buildBitArray(i),h=Or(o).parseInformation(),d=i[0].getFinderPattern().getResultPoints(),m=i[i.length-1].getFinderPattern().getResultPoints(),y=[d[0],d[1],m[0],m[1]];return new je(h,null,null,y,Pe.RSS_EXPANDED,null)}checkChecksum(){let i=this.pairs.get(0),o=i.getLeftChar(),l=i.getRightChar();if(l==null)return!1;let h=l.getChecksumPortion(),d=2;for(let y=1;y<this.pairs.size();++y){let A=this.pairs.get(y);h+=A.getLeftChar().getChecksumPortion(),d++;let S=A.getRightChar();S!=null&&(h+=S.getChecksumPortion(),d++)}return h%=211,211*(d-4)+h==o.getValue()}static getNextSecondBar(i,o){let l;return i.get(o)?(l=i.getNextUnset(o),l=i.getNextSet(l)):(l=i.getNextSet(o),l=i.getNextUnset(l)),l}retrieveNextPair(i,o,l){let h=o.length%2==0;this.startFromEven&&(h=!h);let d,m=!0,y=-1;do this.findNextPair(i,o,y),d=this.parseFoundFinderPattern(i,l,h),d==null?y=Ie.getNextSecondBar(i,this.startEnd[0]):m=!1;while(m);let A=this.decodeDataCharacter(i,d,h,!0);if(!this.isEmptyPair(o)&&o[o.length-1].mustBeLast())throw new fe;let S;try{S=this.decodeDataCharacter(i,d,h,!1)}catch(R){S=null,this.verbose&&console.log(R)}return new ar(A,S,d,!0)}isEmptyPair(i){return i.length===0}findNextPair(i,o,l){let h=this.getDecodeFinderCounters();h[0]=0,h[1]=0,h[2]=0,h[3]=0;let d=i.getSize(),m;l>=0?m=l:this.isEmptyPair(o)?m=0:m=o[o.length-1].getFinderPattern().getStartEnd()[1];let y=o.length%2!=0;this.startFromEven&&(y=!y);let A=!1;for(;m<d&&(A=!i.get(m),!!A);)m++;let S=0,R=m;for(let P=m;P<d;P++)if(i.get(P)!=A)h[S]++;else{if(S==3){if(y&&Ie.reverseCounters(h),Ie.isFinderPattern(h)){this.startEnd[0]=R,this.startEnd[1]=P;return}y&&Ie.reverseCounters(h),R+=h[0]+h[1],h[0]=h[2],h[1]=h[3],h[2]=0,h[3]=0,S--}else S++;h[S]=1,A=!A}throw new fe}static reverseCounters(i){let o=i.length;for(let l=0;l<o/2;++l){let h=i[l];i[l]=i[o-l-1],i[o-l-1]=h}}parseFoundFinderPattern(i,o,l){let h,d,m;if(l){let S=this.startEnd[0]-1;for(;S>=0&&!i.get(S);)S--;S++,h=this.startEnd[0]-S,d=S,m=this.startEnd[1]}else d=this.startEnd[0],m=i.getNextUnset(this.startEnd[1]+1),h=m-this.startEnd[1];let y=this.getDecodeFinderCounters();$.arraycopy(y,0,y,1,y.length-1),y[0]=h;let A;try{A=this.parseFinderValue(y,Ie.FINDER_PATTERNS)}catch{return null}return new fi(A,[d,m],d,m,o)}decodeDataCharacter(i,o,l,h){let d=this.getDataCharacterCounters();for(let hn=0;hn<d.length;hn++)d[hn]=0;if(h)Ie.recordPatternInReverse(i,o.getStartEnd()[0],d);else{Ie.recordPattern(i,o.getStartEnd()[1],d);for(let hn=0,Ir=d.length-1;hn<Ir;hn++,Ir--){let yi=d[hn];d[hn]=d[Ir],d[Ir]=yi}}let m=17,y=Ze.sum(new Int32Array(d))/m,A=(o.getStartEnd()[1]-o.getStartEnd()[0])/15;if(Math.abs(y-A)/A>.3)throw new fe;let S=this.getOddCounts(),R=this.getEvenCounts(),P=this.getOddRoundingErrors(),k=this.getEvenRoundingErrors();for(let hn=0;hn<d.length;hn++){let Ir=1*d[hn]/y,yi=Ir+.5;if(yi<1){if(Ir<.3)throw new fe;yi=1}else if(yi>8){if(Ir>8.7)throw new fe;yi=8}let no=hn/2;(hn&1)==0?(S[no]=yi,P[no]=Ir-yi):(R[no]=yi,k[no]=Ir-yi)}this.adjustOddEvenCounts(m);let G=4*o.getValue()+(l?0:2)+(h?0:1)-1,te=0,ne=0;for(let hn=S.length-1;hn>=0;hn--){if(Ie.isNotA1left(o,l,h)){let Ir=Ie.WEIGHTS[G][2*hn];ne+=S[hn]*Ir}te+=S[hn]}let ue=0;for(let hn=R.length-1;hn>=0;hn--)if(Ie.isNotA1left(o,l,h)){let Ir=Ie.WEIGHTS[G][2*hn+1];ue+=R[hn]*Ir}let ye=ne+ue;if((te&1)!=0||te>13||te<4)throw new fe;let ke=(13-te)/2,Le=Ie.SYMBOL_WIDEST[ke],Re=9-Le,Ot=Br.getRSSvalue(S,Le,!0),dt=Br.getRSSvalue(R,Re,!1),Zn=Ie.EVEN_TOTAL_SUBSET[ke],Si=Ie.GSUM[ke],Vr=Ot*Zn+dt+Si;return new dr(Vr,ye)}static isNotA1left(i,o,l){return!(i.getValue()==0&&o&&l)}adjustOddEvenCounts(i){let o=Ze.sum(new Int32Array(this.getOddCounts())),l=Ze.sum(new Int32Array(this.getEvenCounts())),h=!1,d=!1;o>13?d=!0:o<4&&(h=!0);let m=!1,y=!1;l>13?y=!0:l<4&&(m=!0);let A=o+l-i,S=(o&1)==1,R=(l&1)==0;if(A==1)if(S){if(R)throw new fe;d=!0}else{if(!R)throw new fe;y=!0}else if(A==-1)if(S){if(R)throw new fe;h=!0}else{if(!R)throw new fe;m=!0}else if(A==0){if(S){if(!R)throw new fe;o<l?(h=!0,y=!0):(d=!0,m=!0)}else if(R)throw new fe}else throw new fe;if(h){if(d)throw new fe;Ie.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&Ie.decrement(this.getOddCounts(),this.getOddRoundingErrors()),m){if(y)throw new fe;Ie.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&Ie.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ie.SYMBOL_WIDEST=[7,5,4,3,1],Ie.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Ie.GSUM=[0,348,1388,2948,3988],Ie.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Ie.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Ie.FINDER_PAT_A=0,Ie.FINDER_PAT_B=1,Ie.FINDER_PAT_C=2,Ie.FINDER_PAT_D=3,Ie.FINDER_PAT_E=4,Ie.FINDER_PAT_F=5,Ie.FINDER_PATTERN_SEQUENCES=[[Ie.FINDER_PAT_A,Ie.FINDER_PAT_A],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_B,Ie.FINDER_PAT_B],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_C,Ie.FINDER_PAT_B,Ie.FINDER_PAT_D],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_E,Ie.FINDER_PAT_B,Ie.FINDER_PAT_D,Ie.FINDER_PAT_C],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_E,Ie.FINDER_PAT_B,Ie.FINDER_PAT_D,Ie.FINDER_PAT_D,Ie.FINDER_PAT_F],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_E,Ie.FINDER_PAT_B,Ie.FINDER_PAT_D,Ie.FINDER_PAT_E,Ie.FINDER_PAT_F,Ie.FINDER_PAT_F],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_A,Ie.FINDER_PAT_B,Ie.FINDER_PAT_B,Ie.FINDER_PAT_C,Ie.FINDER_PAT_C,Ie.FINDER_PAT_D,Ie.FINDER_PAT_D],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_A,Ie.FINDER_PAT_B,Ie.FINDER_PAT_B,Ie.FINDER_PAT_C,Ie.FINDER_PAT_C,Ie.FINDER_PAT_D,Ie.FINDER_PAT_E,Ie.FINDER_PAT_E],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_A,Ie.FINDER_PAT_B,Ie.FINDER_PAT_B,Ie.FINDER_PAT_C,Ie.FINDER_PAT_C,Ie.FINDER_PAT_D,Ie.FINDER_PAT_E,Ie.FINDER_PAT_F,Ie.FINDER_PAT_F],[Ie.FINDER_PAT_A,Ie.FINDER_PAT_A,Ie.FINDER_PAT_B,Ie.FINDER_PAT_B,Ie.FINDER_PAT_C,Ie.FINDER_PAT_D,Ie.FINDER_PAT_D,Ie.FINDER_PAT_E,Ie.FINDER_PAT_E,Ie.FINDER_PAT_F,Ie.FINDER_PAT_F]],Ie.MAX_PAIRS=11;class ra extends dr{constructor(i,o,l){super(i,o),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Kt extends Pn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(i,o,l){const h=this.decodePair(o,!1,i,l);Kt.addOrTally(this.possibleLeftPairs,h),o.reverse();let d=this.decodePair(o,!0,i,l);Kt.addOrTally(this.possibleRightPairs,d),o.reverse();for(let m of this.possibleLeftPairs)if(m.getCount()>1){for(let y of this.possibleRightPairs)if(y.getCount()>1&&Kt.checkChecksum(m,y))return Kt.constructResult(m,y)}throw new fe}static addOrTally(i,o){if(o==null)return;let l=!1;for(let h of i)if(h.getValue()===o.getValue()){h.incrementCount(),l=!0;break}l||i.push(o)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(i,o){let l=4537077*i.getValue()+o.getValue(),h=new String(l).toString(),d=new K;for(let S=13-h.length;S>0;S--)d.append("0");d.append(h);let m=0;for(let S=0;S<13;S++){let R=d.charAt(S).charCodeAt(0)-48;m+=(S&1)===0?3*R:R}m=10-m%10,m===10&&(m=0),d.append(m.toString());let y=i.getFinderPattern().getResultPoints(),A=o.getFinderPattern().getResultPoints();return new je(d.toString(),null,0,[y[0],y[1],A[0],A[1]],Pe.RSS_14,new Date().getTime())}static checkChecksum(i,o){let l=(i.getChecksumPortion()+16*o.getChecksumPortion())%79,h=9*i.getFinderPattern().getValue()+o.getFinderPattern().getValue();return h>72&&h--,h>8&&h--,l===h}decodePair(i,o,l,h){try{let d=this.findFinderPattern(i,o),m=this.parseFoundFinderPattern(i,l,o,d),y=h==null?null:h.get(Oe.NEED_RESULT_POINT_CALLBACK);if(y!=null){let R=(d[0]+d[1])/2;o&&(R=i.getSize()-1-R),y.foundPossibleResultPoint(new He(R,l))}let A=this.decodeDataCharacter(i,m,!0),S=this.decodeDataCharacter(i,m,!1);return new ra(1597*A.getValue()+S.getValue(),A.getChecksumPortion()+4*S.getChecksumPortion(),m)}catch{return null}}decodeDataCharacter(i,o,l){let h=this.getDataCharacterCounters();for(let ue=0;ue<h.length;ue++)h[ue]=0;if(l)Yt.recordPatternInReverse(i,o.getStartEnd()[0],h);else{Yt.recordPattern(i,o.getStartEnd()[1]+1,h);for(let ue=0,ye=h.length-1;ue<ye;ue++,ye--){let ke=h[ue];h[ue]=h[ye],h[ye]=ke}}let d=l?16:15,m=Ze.sum(new Int32Array(h))/d,y=this.getOddCounts(),A=this.getEvenCounts(),S=this.getOddRoundingErrors(),R=this.getEvenRoundingErrors();for(let ue=0;ue<h.length;ue++){let ye=h[ue]/m,ke=Math.floor(ye+.5);ke<1?ke=1:ke>8&&(ke=8);let Le=Math.floor(ue/2);(ue&1)===0?(y[Le]=ke,S[Le]=ye-ke):(A[Le]=ke,R[Le]=ye-ke)}this.adjustOddEvenCounts(l,d);let P=0,k=0;for(let ue=y.length-1;ue>=0;ue--)k*=9,k+=y[ue],P+=y[ue];let G=0,te=0;for(let ue=A.length-1;ue>=0;ue--)G*=9,G+=A[ue],te+=A[ue];let ne=k+3*G;if(l){if((P&1)!==0||P>12||P<4)throw new fe;let ue=(12-P)/2,ye=Kt.OUTSIDE_ODD_WIDEST[ue],ke=9-ye,Le=Br.getRSSvalue(y,ye,!1),Re=Br.getRSSvalue(A,ke,!0),Ot=Kt.OUTSIDE_EVEN_TOTAL_SUBSET[ue],dt=Kt.OUTSIDE_GSUM[ue];return new dr(Le*Ot+Re+dt,ne)}else{if((te&1)!==0||te>10||te<4)throw new fe;let ue=(10-te)/2,ye=Kt.INSIDE_ODD_WIDEST[ue],ke=9-ye,Le=Br.getRSSvalue(y,ye,!0),Re=Br.getRSSvalue(A,ke,!1),Ot=Kt.INSIDE_ODD_TOTAL_SUBSET[ue],dt=Kt.INSIDE_GSUM[ue];return new dr(Re*Ot+Le+dt,ne)}}findFinderPattern(i,o){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let h=i.getSize(),d=!1,m=0;for(;m<h&&(d=!i.get(m),o!==d);)m++;let y=0,A=m;for(let S=m;S<h;S++)if(i.get(S)!==d)l[y]++;else{if(y===3){if(Pn.isFinderPattern(l))return[A,S];A+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,y--}else y++;l[y]=1,d=!d}throw new fe}parseFoundFinderPattern(i,o,l,h){let d=i.get(h[0]),m=h[0]-1;for(;m>=0&&d!==i.get(m);)m--;m++;const y=h[0]-m,A=this.getDecodeFinderCounters(),S=new Int32Array(A.length);$.arraycopy(A,0,S,1,A.length-1),S[0]=y;const R=this.parseFinderValue(S,Kt.FINDER_PATTERNS);let P=m,k=h[1];return l&&(P=i.getSize()-1-P,k=i.getSize()-1-k),new fi(R,[m,h[1]],P,k,o)}adjustOddEvenCounts(i,o){let l=Ze.sum(new Int32Array(this.getOddCounts())),h=Ze.sum(new Int32Array(this.getEvenCounts())),d=!1,m=!1,y=!1,A=!1;i?(l>12?m=!0:l<4&&(d=!0),h>12?A=!0:h<4&&(y=!0)):(l>11?m=!0:l<5&&(d=!0),h>10?A=!0:h<4&&(y=!0));let S=l+h-o,R=(l&1)===(i?1:0),P=(h&1)===1;if(S===1)if(R){if(P)throw new fe;m=!0}else{if(!P)throw new fe;A=!0}else if(S===-1)if(R){if(P)throw new fe;d=!0}else{if(!P)throw new fe;y=!0}else if(S===0){if(R){if(!P)throw new fe;l<h?(d=!0,A=!0):(m=!0,y=!0)}else if(P)throw new fe}else throw new fe;if(d){if(m)throw new fe;Pn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(m&&Pn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),y){if(A)throw new fe;Pn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}A&&Pn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Kt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Kt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Kt.OUTSIDE_GSUM=[0,161,961,2015,2715],Kt.INSIDE_GSUM=[0,336,1036,1516],Kt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Kt.INSIDE_ODD_WIDEST=[2,4,6,8],Kt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Cr extends Yt{constructor(i,o){super(),this.readers=[],this.verbose=o===!0;const l=i?i.get(Oe.POSSIBLE_FORMATS):null,h=i&&i.get(Oe.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(Pe.EAN_13)||l.includes(Pe.UPC_A)||l.includes(Pe.EAN_8)||l.includes(Pe.UPC_E))&&this.readers.push(new Ps(i)),l.includes(Pe.CODE_39)&&this.readers.push(new Xt(h)),l.includes(Pe.CODE_128)&&this.readers.push(new Me),l.includes(Pe.ITF)&&this.readers.push(new st),l.includes(Pe.RSS_14)&&this.readers.push(new Kt),l.includes(Pe.RSS_EXPANDED)&&this.readers.push(new Ie(this.verbose))):(this.readers.push(new Ps(i)),this.readers.push(new Xt),this.readers.push(new Ps(i)),this.readers.push(new Me),this.readers.push(new st),this.readers.push(new Kt),this.readers.push(new Ie(this.verbose)))}decodeRow(i,o,l){for(let h=0;h<this.readers.length;h++)try{return this.readers[h].decodeRow(i,o,l)}catch{}throw new fe}reset(){this.readers.forEach(i=>i.reset())}}class ia extends Ve{constructor(i=500,o){super(new Cr(o),i,o)}}class Mt{constructor(i,o,l){this.ecCodewords=i,this.ecBlocks=[o],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class X{constructor(i,o){this.count=i,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ue{constructor(i,o,l,h,d,m){this.versionNumber=i,this.symbolSizeRows=o,this.symbolSizeColumns=l,this.dataRegionSizeRows=h,this.dataRegionSizeColumns=d,this.ecBlocks=m;let y=0;const A=m.getECCodewords(),S=m.getECBlocks();for(let R of S)y+=R.getCount()*(R.getDataCodewords()+A);this.totalCodewords=y}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(i,o){if((i&1)!==0||(o&1)!==0)throw new j;for(let l of Ue.VERSIONS)if(l.symbolSizeRows===i&&l.symbolSizeColumns===o)return l;throw new j}toString(){return""+this.versionNumber}static buildVersions(){return[new Ue(1,10,10,8,8,new Mt(5,new X(1,3))),new Ue(2,12,12,10,10,new Mt(7,new X(1,5))),new Ue(3,14,14,12,12,new Mt(10,new X(1,8))),new Ue(4,16,16,14,14,new Mt(12,new X(1,12))),new Ue(5,18,18,16,16,new Mt(14,new X(1,18))),new Ue(6,20,20,18,18,new Mt(18,new X(1,22))),new Ue(7,22,22,20,20,new Mt(20,new X(1,30))),new Ue(8,24,24,22,22,new Mt(24,new X(1,36))),new Ue(9,26,26,24,24,new Mt(28,new X(1,44))),new Ue(10,32,32,14,14,new Mt(36,new X(1,62))),new Ue(11,36,36,16,16,new Mt(42,new X(1,86))),new Ue(12,40,40,18,18,new Mt(48,new X(1,114))),new Ue(13,44,44,20,20,new Mt(56,new X(1,144))),new Ue(14,48,48,22,22,new Mt(68,new X(1,174))),new Ue(15,52,52,24,24,new Mt(42,new X(2,102))),new Ue(16,64,64,14,14,new Mt(56,new X(2,140))),new Ue(17,72,72,16,16,new Mt(36,new X(4,92))),new Ue(18,80,80,18,18,new Mt(48,new X(4,114))),new Ue(19,88,88,20,20,new Mt(56,new X(4,144))),new Ue(20,96,96,22,22,new Mt(68,new X(4,174))),new Ue(21,104,104,24,24,new Mt(56,new X(6,136))),new Ue(22,120,120,18,18,new Mt(68,new X(6,175))),new Ue(23,132,132,20,20,new Mt(62,new X(8,163))),new Ue(24,144,144,22,22,new Mt(62,new X(8,156),new X(2,155))),new Ue(25,8,18,6,16,new Mt(7,new X(1,5))),new Ue(26,8,32,6,14,new Mt(11,new X(1,10))),new Ue(27,12,26,10,24,new Mt(14,new X(1,16))),new Ue(28,12,36,10,16,new Mt(18,new X(1,22))),new Ue(29,16,36,14,16,new Mt(24,new X(1,32))),new Ue(30,16,48,14,22,new Mt(28,new X(1,49)))]}}Ue.VERSIONS=Ue.buildVersions();class Ke{constructor(i){const o=i.getHeight();if(o<8||o>144||(o&1)!==0)throw new j;this.version=Ke.readVersion(i),this.mappingBitMatrix=this.extractDataRegion(i),this.readMappingMatrix=new $e(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(i){const o=i.getHeight(),l=i.getWidth();return Ue.getVersionForDimensions(o,l)}readCodewords(){const i=new Int8Array(this.version.getTotalCodewords());let o=0,l=4,h=0;const d=this.mappingBitMatrix.getHeight(),m=this.mappingBitMatrix.getWidth();let y=!1,A=!1,S=!1,R=!1;do if(l===d&&h===0&&!y)i[o++]=this.readCorner1(d,m)&255,l-=2,h+=2,y=!0;else if(l===d-2&&h===0&&(m&3)!==0&&!A)i[o++]=this.readCorner2(d,m)&255,l-=2,h+=2,A=!0;else if(l===d+4&&h===2&&(m&7)===0&&!S)i[o++]=this.readCorner3(d,m)&255,l-=2,h+=2,S=!0;else if(l===d-2&&h===0&&(m&7)===4&&!R)i[o++]=this.readCorner4(d,m)&255,l-=2,h+=2,R=!0;else{do l<d&&h>=0&&!this.readMappingMatrix.get(h,l)&&(i[o++]=this.readUtah(l,h,d,m)&255),l-=2,h+=2;while(l>=0&&h<m);l+=1,h+=3;do l>=0&&h<m&&!this.readMappingMatrix.get(h,l)&&(i[o++]=this.readUtah(l,h,d,m)&255),l+=2,h-=2;while(l<d&&h>=0);l+=3,h+=1}while(l<d||h<m);if(o!==this.version.getTotalCodewords())throw new j;return i}readModule(i,o,l,h){return i<0&&(i+=l,o+=4-(l+4&7)),o<0&&(o+=h,i+=4-(h+4&7)),this.readMappingMatrix.set(o,i),this.mappingBitMatrix.get(o,i)}readUtah(i,o,l,h){let d=0;return this.readModule(i-2,o-2,l,h)&&(d|=1),d<<=1,this.readModule(i-2,o-1,l,h)&&(d|=1),d<<=1,this.readModule(i-1,o-2,l,h)&&(d|=1),d<<=1,this.readModule(i-1,o-1,l,h)&&(d|=1),d<<=1,this.readModule(i-1,o,l,h)&&(d|=1),d<<=1,this.readModule(i,o-2,l,h)&&(d|=1),d<<=1,this.readModule(i,o-1,l,h)&&(d|=1),d<<=1,this.readModule(i,o,l,h)&&(d|=1),d}readCorner1(i,o){let l=0;return this.readModule(i-1,0,i,o)&&(l|=1),l<<=1,this.readModule(i-1,1,i,o)&&(l|=1),l<<=1,this.readModule(i-1,2,i,o)&&(l|=1),l<<=1,this.readModule(0,o-2,i,o)&&(l|=1),l<<=1,this.readModule(0,o-1,i,o)&&(l|=1),l<<=1,this.readModule(1,o-1,i,o)&&(l|=1),l<<=1,this.readModule(2,o-1,i,o)&&(l|=1),l<<=1,this.readModule(3,o-1,i,o)&&(l|=1),l}readCorner2(i,o){let l=0;return this.readModule(i-3,0,i,o)&&(l|=1),l<<=1,this.readModule(i-2,0,i,o)&&(l|=1),l<<=1,this.readModule(i-1,0,i,o)&&(l|=1),l<<=1,this.readModule(0,o-4,i,o)&&(l|=1),l<<=1,this.readModule(0,o-3,i,o)&&(l|=1),l<<=1,this.readModule(0,o-2,i,o)&&(l|=1),l<<=1,this.readModule(0,o-1,i,o)&&(l|=1),l<<=1,this.readModule(1,o-1,i,o)&&(l|=1),l}readCorner3(i,o){let l=0;return this.readModule(i-1,0,i,o)&&(l|=1),l<<=1,this.readModule(i-1,o-1,i,o)&&(l|=1),l<<=1,this.readModule(0,o-3,i,o)&&(l|=1),l<<=1,this.readModule(0,o-2,i,o)&&(l|=1),l<<=1,this.readModule(0,o-1,i,o)&&(l|=1),l<<=1,this.readModule(1,o-3,i,o)&&(l|=1),l<<=1,this.readModule(1,o-2,i,o)&&(l|=1),l<<=1,this.readModule(1,o-1,i,o)&&(l|=1),l}readCorner4(i,o){let l=0;return this.readModule(i-3,0,i,o)&&(l|=1),l<<=1,this.readModule(i-2,0,i,o)&&(l|=1),l<<=1,this.readModule(i-1,0,i,o)&&(l|=1),l<<=1,this.readModule(0,o-2,i,o)&&(l|=1),l<<=1,this.readModule(0,o-1,i,o)&&(l|=1),l<<=1,this.readModule(1,o-1,i,o)&&(l|=1),l<<=1,this.readModule(2,o-1,i,o)&&(l|=1),l<<=1,this.readModule(3,o-1,i,o)&&(l|=1),l}extractDataRegion(i){const o=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(i.getHeight()!==o)throw new I("Dimension of bitMatrix must match the version size");const h=this.version.getDataRegionSizeRows(),d=this.version.getDataRegionSizeColumns(),m=o/h|0,y=l/d|0,A=m*h,S=y*d,R=new $e(S,A);for(let P=0;P<m;++P){const k=P*h;for(let G=0;G<y;++G){const te=G*d;for(let ne=0;ne<h;++ne){const ue=P*(h+2)+1+ne,ye=k+ne;for(let ke=0;ke<d;++ke){const Le=G*(d+2)+1+ke;if(i.get(Le,ue)){const Re=te+ke;R.set(Re,ye)}}}}}return R}}class St{constructor(i,o){this.numDataCodewords=i,this.codewords=o}static getDataBlocks(i,o){const l=o.getECBlocks();let h=0;const d=l.getECBlocks();for(let ne of d)h+=ne.getCount();const m=new Array(h);let y=0;for(let ne of d)for(let ue=0;ue<ne.getCount();ue++){const ye=ne.getDataCodewords(),ke=l.getECCodewords()+ye;m[y++]=new St(ye,new Uint8Array(ke))}const S=m[0].codewords.length-l.getECCodewords(),R=S-1;let P=0;for(let ne=0;ne<R;ne++)for(let ue=0;ue<y;ue++)m[ue].codewords[ne]=i[P++];const k=o.getVersionNumber()===24,G=k?8:y;for(let ne=0;ne<G;ne++)m[ne].codewords[S-1]=i[P++];const te=m[0].codewords.length;for(let ne=S;ne<te;ne++)for(let ue=0;ue<y;ue++){const ye=k?(ue+8)%y:ue,ke=k&&ye>7?ne-1:ne;m[ye].codewords[ke]=i[P++]}if(P!==i.length)throw new I;return m}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Ct{constructor(i){this.bytes=i,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(i){if(i<1||i>32||i>this.available())throw new I(""+i);let o=0,l=this.bitOffset,h=this.byteOffset;const d=this.bytes;if(l>0){const m=8-l,y=i<m?i:m,A=m-y,S=255>>8-y<<A;o=(d[h]&S)>>A,i-=y,l+=y,l===8&&(l=0,h++)}if(i>0){for(;i>=8;)o=o<<8|d[h]&255,h++,i-=8;if(i>0){const m=8-i,y=255>>m<<m;o=o<<i|(d[h]&y)>>m,l+=i}}return this.bitOffset=l,this.byteOffset=h,o}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var ht;(function(L){L[L.PAD_ENCODE=0]="PAD_ENCODE",L[L.ASCII_ENCODE=1]="ASCII_ENCODE",L[L.C40_ENCODE=2]="C40_ENCODE",L[L.TEXT_ENCODE=3]="TEXT_ENCODE",L[L.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",L[L.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",L[L.BASE256_ENCODE=6]="BASE256_ENCODE"})(ht||(ht={}));class Qn{static decode(i){const o=new Ct(i),l=new K,h=new K,d=new Array;let m=ht.ASCII_ENCODE;do if(m===ht.ASCII_ENCODE)m=this.decodeAsciiSegment(o,l,h);else{switch(m){case ht.C40_ENCODE:this.decodeC40Segment(o,l);break;case ht.TEXT_ENCODE:this.decodeTextSegment(o,l);break;case ht.ANSIX12_ENCODE:this.decodeAnsiX12Segment(o,l);break;case ht.EDIFACT_ENCODE:this.decodeEdifactSegment(o,l);break;case ht.BASE256_ENCODE:this.decodeBase256Segment(o,l,d);break;default:throw new j}m=ht.ASCII_ENCODE}while(m!==ht.PAD_ENCODE&&o.available()>0);return h.length()>0&&l.append(h.toString()),new en(i,l.toString(),d.length===0?null:d,null)}static decodeAsciiSegment(i,o,l){let h=!1;do{let d=i.readBits(8);if(d===0)throw new j;if(d<=128)return h&&(d+=128),o.append(String.fromCharCode(d-1)),ht.ASCII_ENCODE;if(d===129)return ht.PAD_ENCODE;if(d<=229){const m=d-130;m<10&&o.append("0"),o.append(""+m)}else switch(d){case 230:return ht.C40_ENCODE;case 231:return ht.BASE256_ENCODE;case 232:o.append("");break;case 233:case 234:break;case 235:h=!0;break;case 236:o.append("[)>05"),l.insert(0,"");break;case 237:o.append("[)>06"),l.insert(0,"");break;case 238:return ht.ANSIX12_ENCODE;case 239:return ht.TEXT_ENCODE;case 240:return ht.EDIFACT_ENCODE;case 241:break;default:if(d!==254||i.available()!==0)throw new j;break}}while(i.available()>0);return ht.ASCII_ENCODE}static decodeC40Segment(i,o){let l=!1;const h=[];let d=0;do{if(i.available()===8)return;const m=i.readBits(8);if(m===254)return;this.parseTwoBytes(m,i.readBits(8),h);for(let y=0;y<3;y++){const A=h[y];switch(d){case 0:if(A<3)d=A+1;else if(A<this.C40_BASIC_SET_CHARS.length){const S=this.C40_BASIC_SET_CHARS[A];l?(o.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):o.append(S)}else throw new j;break;case 1:l?(o.append(String.fromCharCode(A+128)),l=!1):o.append(String.fromCharCode(A)),d=0;break;case 2:if(A<this.C40_SHIFT2_SET_CHARS.length){const S=this.C40_SHIFT2_SET_CHARS[A];l?(o.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):o.append(S)}else switch(A){case 27:o.append("");break;case 30:l=!0;break;default:throw new j}d=0;break;case 3:l?(o.append(String.fromCharCode(A+224)),l=!1):o.append(String.fromCharCode(A+96)),d=0;break;default:throw new j}}}while(i.available()>0)}static decodeTextSegment(i,o){let l=!1,h=[],d=0;do{if(i.available()===8)return;const m=i.readBits(8);if(m===254)return;this.parseTwoBytes(m,i.readBits(8),h);for(let y=0;y<3;y++){const A=h[y];switch(d){case 0:if(A<3)d=A+1;else if(A<this.TEXT_BASIC_SET_CHARS.length){const S=this.TEXT_BASIC_SET_CHARS[A];l?(o.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):o.append(S)}else throw new j;break;case 1:l?(o.append(String.fromCharCode(A+128)),l=!1):o.append(String.fromCharCode(A)),d=0;break;case 2:if(A<this.TEXT_SHIFT2_SET_CHARS.length){const S=this.TEXT_SHIFT2_SET_CHARS[A];l?(o.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):o.append(S)}else switch(A){case 27:o.append("");break;case 30:l=!0;break;default:throw new j}d=0;break;case 3:if(A<this.TEXT_SHIFT3_SET_CHARS.length){const S=this.TEXT_SHIFT3_SET_CHARS[A];l?(o.append(String.fromCharCode(S.charCodeAt(0)+128)),l=!1):o.append(S),d=0}else throw new j;break;default:throw new j}}}while(i.available()>0)}static decodeAnsiX12Segment(i,o){const l=[];do{if(i.available()===8)return;const h=i.readBits(8);if(h===254)return;this.parseTwoBytes(h,i.readBits(8),l);for(let d=0;d<3;d++){const m=l[d];switch(m){case 0:o.append("\r");break;case 1:o.append("*");break;case 2:o.append(">");break;case 3:o.append(" ");break;default:if(m<14)o.append(String.fromCharCode(m+44));else if(m<40)o.append(String.fromCharCode(m+51));else throw new j;break}}}while(i.available()>0)}static parseTwoBytes(i,o,l){let h=(i<<8)+o-1,d=Math.floor(h/1600);l[0]=d,h-=d*1600,d=Math.floor(h/40),l[1]=d,l[2]=h-d*40}static decodeEdifactSegment(i,o){do{if(i.available()<=16)return;for(let l=0;l<4;l++){let h=i.readBits(6);if(h===31){const d=8-i.getBitOffset();d!==8&&i.readBits(d);return}(h&32)===0&&(h|=64),o.append(String.fromCharCode(h))}}while(i.available()>0)}static decodeBase256Segment(i,o,l){let h=1+i.getByteOffset();const d=this.unrandomize255State(i.readBits(8),h++);let m;if(d===0?m=i.available()/8|0:d<250?m=d:m=250*(d-249)+this.unrandomize255State(i.readBits(8),h++),m<0)throw new j;const y=new Uint8Array(m);for(let A=0;A<m;A++){if(i.available()<8)throw new j;y[A]=this.unrandomize255State(i.readBits(8),h++)}l.push(y);try{o.append(Z.decode(y,J.ISO88591))}catch(A){throw new ir("Platform does not support required encoding: "+A.message)}}static unrandomize255State(i,o){const l=149*o%255+1,h=i-l;return h>=0?h:h+256}}Qn.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Qn.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Qn.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Qn.TEXT_SHIFT2_SET_CHARS=Qn.C40_SHIFT2_SET_CHARS,Qn.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class sa{constructor(){this.rsDecoder=new Wr(At.DATA_MATRIX_FIELD_256)}decode(i){const o=new Ke(i),l=o.getVersion(),h=o.readCodewords(),d=St.getDataBlocks(h,l);let m=0;for(let S of d)m+=S.getNumDataCodewords();const y=new Uint8Array(m),A=d.length;for(let S=0;S<A;S++){const R=d[S],P=R.getCodewords(),k=R.getNumDataCodewords();this.correctErrors(P,k);for(let G=0;G<k;G++)y[G*A+S]=P[G]}return Qn.decode(y)}correctErrors(i,o){const l=new Int32Array(i);try{this.rsDecoder.decode(l,i.length-o)}catch{throw new B}for(let h=0;h<o;h++)i[h]=l[h]}}class it{constructor(i){this.image=i,this.rectangleDetector=new mn(this.image)}detect(){const i=this.rectangleDetector.detect();let o=this.detectSolid1(i);if(o=this.detectSolid2(o),o[3]=this.correctTopRight(o),!o[3])throw new fe;o=this.shiftToModuleCenter(o);const l=o[0],h=o[1],d=o[2],m=o[3];let y=this.transitionsBetween(l,m)+1,A=this.transitionsBetween(d,m)+1;(y&1)===1&&(y+=1),(A&1)===1&&(A+=1),4*y<7*A&&4*A<7*y&&(y=A=Math.max(y,A));let S=it.sampleGrid(this.image,l,h,d,m,y,A);return new As(S,[l,h,d,m])}static shiftPoint(i,o,l){let h=(o.getX()-i.getX())/(l+1),d=(o.getY()-i.getY())/(l+1);return new He(i.getX()+h,i.getY()+d)}static moveAway(i,o,l){let h=i.getX(),d=i.getY();return h<o?h-=1:h+=1,d<l?d-=1:d+=1,new He(h,d)}detectSolid1(i){let o=i[0],l=i[1],h=i[3],d=i[2],m=this.transitionsBetween(o,l),y=this.transitionsBetween(l,h),A=this.transitionsBetween(h,d),S=this.transitionsBetween(d,o),R=m,P=[d,o,l,h];return R>y&&(R=y,P[0]=o,P[1]=l,P[2]=h,P[3]=d),R>A&&(R=A,P[0]=l,P[1]=h,P[2]=d,P[3]=o),R>S&&(P[0]=h,P[1]=d,P[2]=o,P[3]=l),P}detectSolid2(i){let o=i[0],l=i[1],h=i[2],d=i[3],m=this.transitionsBetween(o,d),y=it.shiftPoint(l,h,(m+1)*4),A=it.shiftPoint(h,l,(m+1)*4),S=this.transitionsBetween(y,o),R=this.transitionsBetween(A,d);return S<R?(i[0]=o,i[1]=l,i[2]=h,i[3]=d):(i[0]=l,i[1]=h,i[2]=d,i[3]=o),i}correctTopRight(i){let o=i[0],l=i[1],h=i[2],d=i[3],m=this.transitionsBetween(o,d),y=this.transitionsBetween(l,d),A=it.shiftPoint(o,l,(y+1)*4),S=it.shiftPoint(h,l,(m+1)*4);m=this.transitionsBetween(A,d),y=this.transitionsBetween(S,d);let R=new He(d.getX()+(h.getX()-l.getX())/(m+1),d.getY()+(h.getY()-l.getY())/(m+1)),P=new He(d.getX()+(o.getX()-l.getX())/(y+1),d.getY()+(o.getY()-l.getY())/(y+1));if(!this.isValid(R))return this.isValid(P)?P:null;if(!this.isValid(P))return R;let k=this.transitionsBetween(A,R)+this.transitionsBetween(S,R),G=this.transitionsBetween(A,P)+this.transitionsBetween(S,P);return k>G?R:P}shiftToModuleCenter(i){let o=i[0],l=i[1],h=i[2],d=i[3],m=this.transitionsBetween(o,d)+1,y=this.transitionsBetween(h,d)+1,A=it.shiftPoint(o,l,y*4),S=it.shiftPoint(h,l,m*4);m=this.transitionsBetween(A,d)+1,y=this.transitionsBetween(S,d)+1,(m&1)===1&&(m+=1),(y&1)===1&&(y+=1);let R=(o.getX()+l.getX()+h.getX()+d.getX())/4,P=(o.getY()+l.getY()+h.getY()+d.getY())/4;o=it.moveAway(o,R,P),l=it.moveAway(l,R,P),h=it.moveAway(h,R,P),d=it.moveAway(d,R,P);let k,G;return A=it.shiftPoint(o,l,y*4),A=it.shiftPoint(A,d,m*4),k=it.shiftPoint(l,o,y*4),k=it.shiftPoint(k,h,m*4),S=it.shiftPoint(h,d,y*4),S=it.shiftPoint(S,l,m*4),G=it.shiftPoint(d,h,y*4),G=it.shiftPoint(G,o,m*4),[A,k,S,G]}isValid(i){return i.getX()>=0&&i.getX()<this.image.getWidth()&&i.getY()>0&&i.getY()<this.image.getHeight()}static sampleGrid(i,o,l,h,d,m,y){return sr.getInstance().sampleGrid(i,m,y,.5,.5,m-.5,.5,m-.5,y-.5,.5,y-.5,o.getX(),o.getY(),d.getX(),d.getY(),h.getX(),h.getY(),l.getX(),l.getY())}transitionsBetween(i,o){let l=Math.trunc(i.getX()),h=Math.trunc(i.getY()),d=Math.trunc(o.getX()),m=Math.trunc(o.getY()),y=Math.abs(m-h)>Math.abs(d-l);if(y){let ne=l;l=h,h=ne,ne=d,d=m,m=ne}let A=Math.abs(d-l),S=Math.abs(m-h),R=-A/2,P=h<m?1:-1,k=l<d?1:-1,G=0,te=this.image.get(y?h:l,y?l:h);for(let ne=l,ue=h;ne!==d;ne+=k){let ye=this.image.get(y?ue:ne,y?ne:ue);if(ye!==te&&(G++,te=ye),R+=S,R>0){if(ue===m)break;ue+=P,R-=A}}return G}}class Bn{constructor(){this.decoder=new sa}decode(i,o=null){let l,h;if(o!=null&&o.has(Oe.PURE_BARCODE)){const S=Bn.extractPureBits(i.getBlackMatrix());l=this.decoder.decode(S),h=Bn.NO_POINTS}else{const S=new it(i.getBlackMatrix()).detect();l=this.decoder.decode(S.getBits()),h=S.getPoints()}const d=l.getRawBytes(),m=new je(l.getText(),d,8*d.length,h,Pe.DATA_MATRIX,$.currentTimeMillis()),y=l.getByteSegments();y!=null&&m.putMetadata(vt.BYTE_SEGMENTS,y);const A=l.getECLevel();return A!=null&&m.putMetadata(vt.ERROR_CORRECTION_LEVEL,A),m}reset(){}static extractPureBits(i){const o=i.getTopLeftOnBit(),l=i.getBottomRightOnBit();if(o==null||l==null)throw new fe;const h=this.moduleSize(o,i);let d=o[1];const m=l[1];let y=o[0];const S=(l[0]-y+1)/h,R=(m-d+1)/h;if(S<=0||R<=0)throw new fe;const P=h/2;d+=P,y+=P;const k=new $e(S,R);for(let G=0;G<R;G++){const te=d+G*h;for(let ne=0;ne<S;ne++)i.get(y+ne*h,te)&&k.set(ne,G)}return k}static moduleSize(i,o){const l=o.getWidth();let h=i[0];const d=i[1];for(;h<l&&o.get(h,d);)h++;if(h===l)throw new fe;const m=h-i[0];if(m===0)throw new fe;return m}}Bn.NO_POINTS=[];class di extends Ve{constructor(i=500){super(new Bn,i)}}var Hn;(function(L){L[L.L=0]="L",L[L.M=1]="M",L[L.Q=2]="Q",L[L.H=3]="H"})(Hn||(Hn={}));class It{constructor(i,o,l){this.value=i,this.stringValue=o,this.bits=l,It.FOR_BITS.set(l,this),It.FOR_VALUE.set(i,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(i){switch(i){case"L":return It.L;case"M":return It.M;case"Q":return It.Q;case"H":return It.H;default:throw new C(i+"not available")}}toString(){return this.stringValue}equals(i){if(!(i instanceof It))return!1;const o=i;return this.value===o.value}static forBits(i){if(i<0||i>=It.FOR_BITS.size)throw new I;return It.FOR_BITS.get(i)}}It.FOR_BITS=new Map,It.FOR_VALUE=new Map,It.L=new It(Hn.L,"L",1),It.M=new It(Hn.M,"M",0),It.Q=new It(Hn.Q,"Q",3),It.H=new It(Hn.H,"H",2);class zn{constructor(i){this.errorCorrectionLevel=It.forBits(i>>3&3),this.dataMask=i&7}static numBitsDiffering(i,o){return Q.bitCount(i^o)}static decodeFormatInformation(i,o){const l=zn.doDecodeFormatInformation(i,o);return l!==null?l:zn.doDecodeFormatInformation(i^zn.FORMAT_INFO_MASK_QR,o^zn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(i,o){let l=Number.MAX_SAFE_INTEGER,h=0;for(const d of zn.FORMAT_INFO_DECODE_LOOKUP){const m=d[0];if(m===i||m===o)return new zn(d[1]);let y=zn.numBitsDiffering(i,m);y<l&&(h=d[1],l=y),i!==o&&(y=zn.numBitsDiffering(o,m),y<l&&(h=d[1],l=y))}return l<=3?new zn(h):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(i){if(!(i instanceof zn))return!1;const o=i;return this.errorCorrectionLevel===o.errorCorrectionLevel&&this.dataMask===o.dataMask}}zn.FORMAT_INFO_MASK_QR=21522,zn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class he{constructor(i,...o){this.ecCodewordsPerBlock=i,this.ecBlocks=o}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let i=0;const o=this.ecBlocks;for(const l of o)i+=l.getCount();return i}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class z{constructor(i,o){this.count=i,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Xe{constructor(i,o,...l){this.versionNumber=i,this.alignmentPatternCenters=o,this.ecBlocks=l;let h=0;const d=l[0].getECCodewordsPerBlock(),m=l[0].getECBlocks();for(const y of m)h+=y.getCount()*(y.getDataCodewords()+d);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(i){return this.ecBlocks[i.getValue()]}static getProvisionalVersionForDimension(i){if(i%4!==1)throw new j;try{return this.getVersionForNumber((i-17)/4)}catch{throw new j}}static getVersionForNumber(i){if(i<1||i>40)throw new I;return Xe.VERSIONS[i-1]}static decodeVersionInformation(i){let o=Number.MAX_SAFE_INTEGER,l=0;for(let h=0;h<Xe.VERSION_DECODE_INFO.length;h++){const d=Xe.VERSION_DECODE_INFO[h];if(d===i)return Xe.getVersionForNumber(h+7);const m=zn.numBitsDiffering(i,d);m<o&&(l=h+7,o=m)}return o<=3?Xe.getVersionForNumber(l):null}buildFunctionPattern(){const i=this.getDimensionForVersion(),o=new $e(i);o.setRegion(0,0,9,9),o.setRegion(i-8,0,8,9),o.setRegion(0,i-8,9,8);const l=this.alignmentPatternCenters.length;for(let h=0;h<l;h++){const d=this.alignmentPatternCenters[h]-2;for(let m=0;m<l;m++)h===0&&(m===0||m===l-1)||h===l-1&&m===0||o.setRegion(this.alignmentPatternCenters[m]-2,d,5,5)}return o.setRegion(6,9,1,i-17),o.setRegion(9,6,i-17,1),this.versionNumber>6&&(o.setRegion(i-11,0,3,6),o.setRegion(0,i-11,6,3)),o}toString(){return""+this.versionNumber}}Xe.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Xe.VERSIONS=[new Xe(1,new Int32Array(0),new he(7,new z(1,19)),new he(10,new z(1,16)),new he(13,new z(1,13)),new he(17,new z(1,9))),new Xe(2,Int32Array.from([6,18]),new he(10,new z(1,34)),new he(16,new z(1,28)),new he(22,new z(1,22)),new he(28,new z(1,16))),new Xe(3,Int32Array.from([6,22]),new he(15,new z(1,55)),new he(26,new z(1,44)),new he(18,new z(2,17)),new he(22,new z(2,13))),new Xe(4,Int32Array.from([6,26]),new he(20,new z(1,80)),new he(18,new z(2,32)),new he(26,new z(2,24)),new he(16,new z(4,9))),new Xe(5,Int32Array.from([6,30]),new he(26,new z(1,108)),new he(24,new z(2,43)),new he(18,new z(2,15),new z(2,16)),new he(22,new z(2,11),new z(2,12))),new Xe(6,Int32Array.from([6,34]),new he(18,new z(2,68)),new he(16,new z(4,27)),new he(24,new z(4,19)),new he(28,new z(4,15))),new Xe(7,Int32Array.from([6,22,38]),new he(20,new z(2,78)),new he(18,new z(4,31)),new he(18,new z(2,14),new z(4,15)),new he(26,new z(4,13),new z(1,14))),new Xe(8,Int32Array.from([6,24,42]),new he(24,new z(2,97)),new he(22,new z(2,38),new z(2,39)),new he(22,new z(4,18),new z(2,19)),new he(26,new z(4,14),new z(2,15))),new Xe(9,Int32Array.from([6,26,46]),new he(30,new z(2,116)),new he(22,new z(3,36),new z(2,37)),new he(20,new z(4,16),new z(4,17)),new he(24,new z(4,12),new z(4,13))),new Xe(10,Int32Array.from([6,28,50]),new he(18,new z(2,68),new z(2,69)),new he(26,new z(4,43),new z(1,44)),new he(24,new z(6,19),new z(2,20)),new he(28,new z(6,15),new z(2,16))),new Xe(11,Int32Array.from([6,30,54]),new he(20,new z(4,81)),new he(30,new z(1,50),new z(4,51)),new he(28,new z(4,22),new z(4,23)),new he(24,new z(3,12),new z(8,13))),new Xe(12,Int32Array.from([6,32,58]),new he(24,new z(2,92),new z(2,93)),new he(22,new z(6,36),new z(2,37)),new he(26,new z(4,20),new z(6,21)),new he(28,new z(7,14),new z(4,15))),new Xe(13,Int32Array.from([6,34,62]),new he(26,new z(4,107)),new he(22,new z(8,37),new z(1,38)),new he(24,new z(8,20),new z(4,21)),new he(22,new z(12,11),new z(4,12))),new Xe(14,Int32Array.from([6,26,46,66]),new he(30,new z(3,115),new z(1,116)),new he(24,new z(4,40),new z(5,41)),new he(20,new z(11,16),new z(5,17)),new he(24,new z(11,12),new z(5,13))),new Xe(15,Int32Array.from([6,26,48,70]),new he(22,new z(5,87),new z(1,88)),new he(24,new z(5,41),new z(5,42)),new he(30,new z(5,24),new z(7,25)),new he(24,new z(11,12),new z(7,13))),new Xe(16,Int32Array.from([6,26,50,74]),new he(24,new z(5,98),new z(1,99)),new he(28,new z(7,45),new z(3,46)),new he(24,new z(15,19),new z(2,20)),new he(30,new z(3,15),new z(13,16))),new Xe(17,Int32Array.from([6,30,54,78]),new he(28,new z(1,107),new z(5,108)),new he(28,new z(10,46),new z(1,47)),new he(28,new z(1,22),new z(15,23)),new he(28,new z(2,14),new z(17,15))),new Xe(18,Int32Array.from([6,30,56,82]),new he(30,new z(5,120),new z(1,121)),new he(26,new z(9,43),new z(4,44)),new he(28,new z(17,22),new z(1,23)),new he(28,new z(2,14),new z(19,15))),new Xe(19,Int32Array.from([6,30,58,86]),new he(28,new z(3,113),new z(4,114)),new he(26,new z(3,44),new z(11,45)),new he(26,new z(17,21),new z(4,22)),new he(26,new z(9,13),new z(16,14))),new Xe(20,Int32Array.from([6,34,62,90]),new he(28,new z(3,107),new z(5,108)),new he(26,new z(3,41),new z(13,42)),new he(30,new z(15,24),new z(5,25)),new he(28,new z(15,15),new z(10,16))),new Xe(21,Int32Array.from([6,28,50,72,94]),new he(28,new z(4,116),new z(4,117)),new he(26,new z(17,42)),new he(28,new z(17,22),new z(6,23)),new he(30,new z(19,16),new z(6,17))),new Xe(22,Int32Array.from([6,26,50,74,98]),new he(28,new z(2,111),new z(7,112)),new he(28,new z(17,46)),new he(30,new z(7,24),new z(16,25)),new he(24,new z(34,13))),new Xe(23,Int32Array.from([6,30,54,78,102]),new he(30,new z(4,121),new z(5,122)),new he(28,new z(4,47),new z(14,48)),new he(30,new z(11,24),new z(14,25)),new he(30,new z(16,15),new z(14,16))),new Xe(24,Int32Array.from([6,28,54,80,106]),new he(30,new z(6,117),new z(4,118)),new he(28,new z(6,45),new z(14,46)),new he(30,new z(11,24),new z(16,25)),new he(30,new z(30,16),new z(2,17))),new Xe(25,Int32Array.from([6,32,58,84,110]),new he(26,new z(8,106),new z(4,107)),new he(28,new z(8,47),new z(13,48)),new he(30,new z(7,24),new z(22,25)),new he(30,new z(22,15),new z(13,16))),new Xe(26,Int32Array.from([6,30,58,86,114]),new he(28,new z(10,114),new z(2,115)),new he(28,new z(19,46),new z(4,47)),new he(28,new z(28,22),new z(6,23)),new he(30,new z(33,16),new z(4,17))),new Xe(27,Int32Array.from([6,34,62,90,118]),new he(30,new z(8,122),new z(4,123)),new he(28,new z(22,45),new z(3,46)),new he(30,new z(8,23),new z(26,24)),new he(30,new z(12,15),new z(28,16))),new Xe(28,Int32Array.from([6,26,50,74,98,122]),new he(30,new z(3,117),new z(10,118)),new he(28,new z(3,45),new z(23,46)),new he(30,new z(4,24),new z(31,25)),new he(30,new z(11,15),new z(31,16))),new Xe(29,Int32Array.from([6,30,54,78,102,126]),new he(30,new z(7,116),new z(7,117)),new he(28,new z(21,45),new z(7,46)),new he(30,new z(1,23),new z(37,24)),new he(30,new z(19,15),new z(26,16))),new Xe(30,Int32Array.from([6,26,52,78,104,130]),new he(30,new z(5,115),new z(10,116)),new he(28,new z(19,47),new z(10,48)),new he(30,new z(15,24),new z(25,25)),new he(30,new z(23,15),new z(25,16))),new Xe(31,Int32Array.from([6,30,56,82,108,134]),new he(30,new z(13,115),new z(3,116)),new he(28,new z(2,46),new z(29,47)),new he(30,new z(42,24),new z(1,25)),new he(30,new z(23,15),new z(28,16))),new Xe(32,Int32Array.from([6,34,60,86,112,138]),new he(30,new z(17,115)),new he(28,new z(10,46),new z(23,47)),new he(30,new z(10,24),new z(35,25)),new he(30,new z(19,15),new z(35,16))),new Xe(33,Int32Array.from([6,30,58,86,114,142]),new he(30,new z(17,115),new z(1,116)),new he(28,new z(14,46),new z(21,47)),new he(30,new z(29,24),new z(19,25)),new he(30,new z(11,15),new z(46,16))),new Xe(34,Int32Array.from([6,34,62,90,118,146]),new he(30,new z(13,115),new z(6,116)),new he(28,new z(14,46),new z(23,47)),new he(30,new z(44,24),new z(7,25)),new he(30,new z(59,16),new z(1,17))),new Xe(35,Int32Array.from([6,30,54,78,102,126,150]),new he(30,new z(12,121),new z(7,122)),new he(28,new z(12,47),new z(26,48)),new he(30,new z(39,24),new z(14,25)),new he(30,new z(22,15),new z(41,16))),new Xe(36,Int32Array.from([6,24,50,76,102,128,154]),new he(30,new z(6,121),new z(14,122)),new he(28,new z(6,47),new z(34,48)),new he(30,new z(46,24),new z(10,25)),new he(30,new z(2,15),new z(64,16))),new Xe(37,Int32Array.from([6,28,54,80,106,132,158]),new he(30,new z(17,122),new z(4,123)),new he(28,new z(29,46),new z(14,47)),new he(30,new z(49,24),new z(10,25)),new he(30,new z(24,15),new z(46,16))),new Xe(38,Int32Array.from([6,32,58,84,110,136,162]),new he(30,new z(4,122),new z(18,123)),new he(28,new z(13,46),new z(32,47)),new he(30,new z(48,24),new z(14,25)),new he(30,new z(42,15),new z(32,16))),new Xe(39,Int32Array.from([6,26,54,82,110,138,166]),new he(30,new z(20,117),new z(4,118)),new he(28,new z(40,47),new z(7,48)),new he(30,new z(43,24),new z(22,25)),new he(30,new z(10,15),new z(67,16))),new Xe(40,Int32Array.from([6,30,58,86,114,142,170]),new he(30,new z(19,118),new z(6,119)),new he(28,new z(18,47),new z(31,48)),new he(30,new z(34,24),new z(34,25)),new he(30,new z(20,15),new z(61,16)))];var Gn;(function(L){L[L.DATA_MASK_000=0]="DATA_MASK_000",L[L.DATA_MASK_001=1]="DATA_MASK_001",L[L.DATA_MASK_010=2]="DATA_MASK_010",L[L.DATA_MASK_011=3]="DATA_MASK_011",L[L.DATA_MASK_100=4]="DATA_MASK_100",L[L.DATA_MASK_101=5]="DATA_MASK_101",L[L.DATA_MASK_110=6]="DATA_MASK_110",L[L.DATA_MASK_111=7]="DATA_MASK_111"})(Gn||(Gn={}));class or{constructor(i,o){this.value=i,this.isMasked=o}unmaskBitMatrix(i,o){for(let l=0;l<o;l++)for(let h=0;h<o;h++)this.isMasked(l,h)&&i.flip(h,l)}}or.values=new Map([[Gn.DATA_MASK_000,new or(Gn.DATA_MASK_000,(L,i)=>(L+i&1)===0)],[Gn.DATA_MASK_001,new or(Gn.DATA_MASK_001,(L,i)=>(L&1)===0)],[Gn.DATA_MASK_010,new or(Gn.DATA_MASK_010,(L,i)=>i%3===0)],[Gn.DATA_MASK_011,new or(Gn.DATA_MASK_011,(L,i)=>(L+i)%3===0)],[Gn.DATA_MASK_100,new or(Gn.DATA_MASK_100,(L,i)=>(Math.floor(L/2)+Math.floor(i/3)&1)===0)],[Gn.DATA_MASK_101,new or(Gn.DATA_MASK_101,(L,i)=>L*i%6===0)],[Gn.DATA_MASK_110,new or(Gn.DATA_MASK_110,(L,i)=>L*i%6<3)],[Gn.DATA_MASK_111,new or(Gn.DATA_MASK_111,(L,i)=>(L+i+L*i%3&1)===0)]]);class ei{constructor(i){const o=i.getHeight();if(o<21||(o&3)!==1)throw new j;this.bitMatrix=i}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let i=0;for(let d=0;d<6;d++)i=this.copyBit(d,8,i);i=this.copyBit(7,8,i),i=this.copyBit(8,8,i),i=this.copyBit(8,7,i);for(let d=5;d>=0;d--)i=this.copyBit(8,d,i);const o=this.bitMatrix.getHeight();let l=0;const h=o-7;for(let d=o-1;d>=h;d--)l=this.copyBit(8,d,l);for(let d=o-8;d<o;d++)l=this.copyBit(d,8,l);if(this.parsedFormatInfo=zn.decodeFormatInformation(i,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new j}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const i=this.bitMatrix.getHeight(),o=Math.floor((i-17)/4);if(o<=6)return Xe.getVersionForNumber(o);let l=0;const h=i-11;for(let m=5;m>=0;m--)for(let y=i-9;y>=h;y--)l=this.copyBit(y,m,l);let d=Xe.decodeVersionInformation(l);if(d!==null&&d.getDimensionForVersion()===i)return this.parsedVersion=d,d;l=0;for(let m=5;m>=0;m--)for(let y=i-9;y>=h;y--)l=this.copyBit(m,y,l);if(d=Xe.decodeVersionInformation(l),d!==null&&d.getDimensionForVersion()===i)return this.parsedVersion=d,d;throw new j}copyBit(i,o,l){return(this.isMirror?this.bitMatrix.get(o,i):this.bitMatrix.get(i,o))?l<<1|1:l<<1}readCodewords(){const i=this.readFormatInformation(),o=this.readVersion(),l=or.values.get(i.getDataMask()),h=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,h);const d=o.buildFunctionPattern();let m=!0;const y=new Uint8Array(o.getTotalCodewords());let A=0,S=0,R=0;for(let P=h-1;P>0;P-=2){P===6&&P--;for(let k=0;k<h;k++){const G=m?h-1-k:k;for(let te=0;te<2;te++)d.get(P-te,G)||(R++,S<<=1,this.bitMatrix.get(P-te,G)&&(S|=1),R===8&&(y[A++]=S,R=0,S=0))}m=!m}if(A!==o.getTotalCodewords())throw new j;return y}remask(){if(this.parsedFormatInfo===null)return;const i=or.values[this.parsedFormatInfo.getDataMask()],o=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,o)}setMirror(i){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=i}mirror(){const i=this.bitMatrix;for(let o=0,l=i.getWidth();o<l;o++)for(let h=o+1,d=i.getHeight();h<d;h++)i.get(o,h)!==i.get(h,o)&&(i.flip(h,o),i.flip(o,h))}}class Qa{constructor(i,o){this.numDataCodewords=i,this.codewords=o}static getDataBlocks(i,o,l){if(i.length!==o.getTotalCodewords())throw new I;const h=o.getECBlocksForLevel(l);let d=0;const m=h.getECBlocks();for(const te of m)d+=te.getCount();const y=new Array(d);let A=0;for(const te of m)for(let ne=0;ne<te.getCount();ne++){const ue=te.getDataCodewords(),ye=h.getECCodewordsPerBlock()+ue;y[A++]=new Qa(ue,new Uint8Array(ye))}const S=y[0].codewords.length;let R=y.length-1;for(;R>=0&&y[R].codewords.length!==S;)R--;R++;const P=S-h.getECCodewordsPerBlock();let k=0;for(let te=0;te<P;te++)for(let ne=0;ne<A;ne++)y[ne].codewords[te]=i[k++];for(let te=R;te<A;te++)y[te].codewords[P]=i[k++];const G=y[0].codewords.length;for(let te=P;te<G;te++)for(let ne=0;ne<A;ne++){const ue=ne<R?te:te+1;y[ne].codewords[ue]=i[k++]}return y}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Dr;(function(L){L[L.TERMINATOR=0]="TERMINATOR",L[L.NUMERIC=1]="NUMERIC",L[L.ALPHANUMERIC=2]="ALPHANUMERIC",L[L.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",L[L.BYTE=4]="BYTE",L[L.ECI=5]="ECI",L[L.KANJI=6]="KANJI",L[L.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",L[L.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",L[L.HANZI=9]="HANZI"})(Dr||(Dr={}));class Je{constructor(i,o,l,h){this.value=i,this.stringValue=o,this.characterCountBitsForVersions=l,this.bits=h,Je.FOR_BITS.set(h,this),Je.FOR_VALUE.set(i,this)}static forBits(i){const o=Je.FOR_BITS.get(i);if(o===void 0)throw new I;return o}getCharacterCountBits(i){const o=i.getVersionNumber();let l;return o<=9?l=0:o<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(i){if(!(i instanceof Je))return!1;const o=i;return this.value===o.value}toString(){return this.stringValue}}Je.FOR_BITS=new Map,Je.FOR_VALUE=new Map,Je.TERMINATOR=new Je(Dr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Je.NUMERIC=new Je(Dr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Je.ALPHANUMERIC=new Je(Dr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Je.STRUCTURED_APPEND=new Je(Dr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Je.BYTE=new Je(Dr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Je.ECI=new Je(Dr.ECI,"ECI",Int32Array.from([0,0,0]),7),Je.KANJI=new Je(Dr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Je.FNC1_FIRST_POSITION=new Je(Dr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Je.FNC1_SECOND_POSITION=new Je(Dr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Je.HANZI=new Je(Dr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class cn{static decode(i,o,l,h){const d=new Ct(i);let m=new K;const y=new Array;let A=-1,S=-1;try{let R=null,P=!1,k;do{if(d.available()<4)k=Je.TERMINATOR;else{const G=d.readBits(4);k=Je.forBits(G)}switch(k){case Je.TERMINATOR:break;case Je.FNC1_FIRST_POSITION:case Je.FNC1_SECOND_POSITION:P=!0;break;case Je.STRUCTURED_APPEND:if(d.available()<16)throw new j;A=d.readBits(8),S=d.readBits(8);break;case Je.ECI:const G=cn.parseECIValue(d);if(R=V.getCharacterSetECIByValue(G),R===null)throw new j;break;case Je.HANZI:const te=d.readBits(4),ne=d.readBits(k.getCharacterCountBits(o));te===cn.GB2312_SUBSET&&cn.decodeHanziSegment(d,m,ne);break;default:const ue=d.readBits(k.getCharacterCountBits(o));switch(k){case Je.NUMERIC:cn.decodeNumericSegment(d,m,ue);break;case Je.ALPHANUMERIC:cn.decodeAlphanumericSegment(d,m,ue,P);break;case Je.BYTE:cn.decodeByteSegment(d,m,ue,R,y,h);break;case Je.KANJI:cn.decodeKanjiSegment(d,m,ue);break;default:throw new j}break}}while(k!==Je.TERMINATOR)}catch{throw new j}return new en(i,m.toString(),y.length===0?null:y,l===null?null:l.toString(),A,S)}static decodeHanziSegment(i,o,l){if(l*13>i.available())throw new j;const h=new Uint8Array(2*l);let d=0;for(;l>0;){const m=i.readBits(13);let y=m/96<<8&4294967295|m%96;y<959?y+=41377:y+=42657,h[d]=y>>8&255,h[d+1]=y&255,d+=2,l--}try{o.append(Z.decode(h,J.GB2312))}catch(m){throw new j(m)}}static decodeKanjiSegment(i,o,l){if(l*13>i.available())throw new j;const h=new Uint8Array(2*l);let d=0;for(;l>0;){const m=i.readBits(13);let y=m/192<<8&4294967295|m%192;y<7936?y+=33088:y+=49472,h[d]=y>>8,h[d+1]=y,d+=2,l--}try{o.append(Z.decode(h,J.SHIFT_JIS))}catch(m){throw new j(m)}}static decodeByteSegment(i,o,l,h,d,m){if(8*l>i.available())throw new j;const y=new Uint8Array(l);for(let S=0;S<l;S++)y[S]=i.readBits(8);let A;h===null?A=J.guessEncoding(y,m):A=h.getName();try{o.append(Z.decode(y,A))}catch(S){throw new j(S)}d.push(y)}static toAlphaNumericChar(i){if(i>=cn.ALPHANUMERIC_CHARS.length)throw new j;return cn.ALPHANUMERIC_CHARS[i]}static decodeAlphanumericSegment(i,o,l,h){const d=o.length();for(;l>1;){if(i.available()<11)throw new j;const m=i.readBits(11);o.append(cn.toAlphaNumericChar(Math.floor(m/45))),o.append(cn.toAlphaNumericChar(m%45)),l-=2}if(l===1){if(i.available()<6)throw new j;o.append(cn.toAlphaNumericChar(i.readBits(6)))}if(h)for(let m=d;m<o.length();m++)o.charAt(m)==="%"&&(m<o.length()-1&&o.charAt(m+1)==="%"?o.deleteCharAt(m+1):o.setCharAt(m,""))}static decodeNumericSegment(i,o,l){for(;l>=3;){if(i.available()<10)throw new j;const h=i.readBits(10);if(h>=1e3)throw new j;o.append(cn.toAlphaNumericChar(Math.floor(h/100))),o.append(cn.toAlphaNumericChar(Math.floor(h/10)%10)),o.append(cn.toAlphaNumericChar(h%10)),l-=3}if(l===2){if(i.available()<7)throw new j;const h=i.readBits(7);if(h>=100)throw new j;o.append(cn.toAlphaNumericChar(Math.floor(h/10))),o.append(cn.toAlphaNumericChar(h%10))}else if(l===1){if(i.available()<4)throw new j;const h=i.readBits(4);if(h>=10)throw new j;o.append(cn.toAlphaNumericChar(h))}}static parseECIValue(i){const o=i.readBits(8);if((o&128)===0)return o&127;if((o&192)===128){const l=i.readBits(8);return(o&63)<<8&4294967295|l}if((o&224)===192){const l=i.readBits(16);return(o&31)<<16&4294967295|l}throw new j}}cn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",cn.GB2312_SUBSET=1;class Zo{constructor(i){this.mirrored=i}isMirrored(){return this.mirrored}applyMirroredCorrection(i){if(!this.mirrored||i===null||i.length<3)return;const o=i[0];i[0]=i[2],i[2]=o}}class ks{constructor(){this.rsDecoder=new Wr(At.QR_CODE_FIELD_256)}decodeBooleanArray(i,o){return this.decodeBitMatrix($e.parseFromBooleanArray(i),o)}decodeBitMatrix(i,o){const l=new ei(i);let h=null;try{return this.decodeBitMatrixParser(l,o)}catch(d){h=d}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const d=this.decodeBitMatrixParser(l,o);return d.setOther(new Zo(!0)),d}catch(d){throw h!==null?h:d}}decodeBitMatrixParser(i,o){const l=i.readVersion(),h=i.readFormatInformation().getErrorCorrectionLevel(),d=i.readCodewords(),m=Qa.getDataBlocks(d,l,h);let y=0;for(const R of m)y+=R.getNumDataCodewords();const A=new Uint8Array(y);let S=0;for(const R of m){const P=R.getCodewords(),k=R.getNumDataCodewords();this.correctErrors(P,k);for(let G=0;G<k;G++)A[S++]=P[G]}return cn.decode(A,l,h,o)}correctErrors(i,o){const l=new Int32Array(i);try{this.rsDecoder.decode(l,i.length-o)}catch{throw new B}for(let h=0;h<o;h++)i[h]=l[h]}}class Bs extends He{constructor(i,o,l){super(i,o),this.estimatedModuleSize=l}aboutEquals(i,o,l){if(Math.abs(o-this.getY())<=i&&Math.abs(l-this.getX())<=i){const h=Math.abs(i-this.estimatedModuleSize);return h<=1||h<=this.estimatedModuleSize}return!1}combineEstimate(i,o,l){const h=(this.getX()+o)/2,d=(this.getY()+i)/2,m=(this.estimatedModuleSize+l)/2;return new Bs(h,d,m)}}class ti{constructor(i,o,l,h,d,m,y){this.image=i,this.startX=o,this.startY=l,this.width=h,this.height=d,this.moduleSize=m,this.resultPointCallback=y,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const i=this.startX,o=this.height,l=this.width,h=i+l,d=this.startY+o/2,m=new Int32Array(3),y=this.image;for(let A=0;A<o;A++){const S=d+((A&1)===0?Math.floor((A+1)/2):-Math.floor((A+1)/2));m[0]=0,m[1]=0,m[2]=0;let R=i;for(;R<h&&!y.get(R,S);)R++;let P=0;for(;R<h;){if(y.get(R,S))if(P===1)m[1]++;else if(P===2){if(this.foundPatternCross(m)){const k=this.handlePossibleCenter(m,S,R);if(k!==null)return k}m[0]=m[2],m[1]=1,m[2]=0,P=1}else m[++P]++;else P===1&&P++,m[P]++;R++}if(this.foundPatternCross(m)){const k=this.handlePossibleCenter(m,S,h);if(k!==null)return k}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new fe}static centerFromEnd(i,o){return o-i[2]-i[1]/2}foundPatternCross(i){const o=this.moduleSize,l=o/2;for(let h=0;h<3;h++)if(Math.abs(o-i[h])>=l)return!1;return!0}crossCheckVertical(i,o,l,h){const d=this.image,m=d.getHeight(),y=this.crossCheckStateCount;y[0]=0,y[1]=0,y[2]=0;let A=i;for(;A>=0&&d.get(o,A)&&y[1]<=l;)y[1]++,A--;if(A<0||y[1]>l)return NaN;for(;A>=0&&!d.get(o,A)&&y[0]<=l;)y[0]++,A--;if(y[0]>l)return NaN;for(A=i+1;A<m&&d.get(o,A)&&y[1]<=l;)y[1]++,A++;if(A===m||y[1]>l)return NaN;for(;A<m&&!d.get(o,A)&&y[2]<=l;)y[2]++,A++;if(y[2]>l)return NaN;const S=y[0]+y[1]+y[2];return 5*Math.abs(S-h)>=2*h?NaN:this.foundPatternCross(y)?ti.centerFromEnd(y,A):NaN}handlePossibleCenter(i,o,l){const h=i[0]+i[1]+i[2],d=ti.centerFromEnd(i,l),m=this.crossCheckVertical(o,d,2*i[1],h);if(!isNaN(m)){const y=(i[0]+i[1]+i[2])/3;for(const S of this.possibleCenters)if(S.aboutEquals(y,m,d))return S.combineEstimate(m,d,y);const A=new Bs(d,m,y);this.possibleCenters.push(A),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(A)}return null}}class aa extends He{constructor(i,o,l,h){super(i,o),this.estimatedModuleSize=l,this.count=h,h===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(i,o,l){if(Math.abs(o-this.getY())<=i&&Math.abs(l-this.getX())<=i){const h=Math.abs(i-this.estimatedModuleSize);return h<=1||h<=this.estimatedModuleSize}return!1}combineEstimate(i,o,l){const h=this.count+1,d=(this.count*this.getX()+o)/h,m=(this.count*this.getY()+i)/h,y=(this.count*this.estimatedModuleSize+l)/h;return new aa(d,m,y,h)}}class bi{constructor(i){this.bottomLeft=i[0],this.topLeft=i[1],this.topRight=i[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Tn{constructor(i,o){this.image=i,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=o}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(i){const o=i!=null&&i.get(Oe.TRY_HARDER)!==void 0,l=i!=null&&i.get(Oe.PURE_BARCODE)!==void 0,h=this.image,d=h.getHeight(),m=h.getWidth();let y=Math.floor(3*d/(4*Tn.MAX_MODULES));(y<Tn.MIN_SKIP||o)&&(y=Tn.MIN_SKIP);let A=!1;const S=new Int32Array(5);for(let P=y-1;P<d&&!A;P+=y){S[0]=0,S[1]=0,S[2]=0,S[3]=0,S[4]=0;let k=0;for(let G=0;G<m;G++)if(h.get(G,P))(k&1)===1&&k++,S[k]++;else if((k&1)===0)if(k===4)if(Tn.foundPatternCross(S)){if(this.handlePossibleCenter(S,P,G,l)===!0)if(y=2,this.hasSkipped===!0)A=this.haveMultiplyConfirmedCenters();else{const ne=this.findRowSkip();ne>S[2]&&(P+=ne-S[2]-y,G=m-1)}else{S[0]=S[2],S[1]=S[3],S[2]=S[4],S[3]=1,S[4]=0,k=3;continue}k=0,S[0]=0,S[1]=0,S[2]=0,S[3]=0,S[4]=0}else S[0]=S[2],S[1]=S[3],S[2]=S[4],S[3]=1,S[4]=0,k=3;else S[++k]++;else S[k]++;Tn.foundPatternCross(S)&&this.handlePossibleCenter(S,P,m,l)===!0&&(y=S[0],this.hasSkipped&&(A=this.haveMultiplyConfirmedCenters()))}const R=this.selectBestPatterns();return He.orderBestPatterns(R),new bi(R)}static centerFromEnd(i,o){return o-i[4]-i[3]-i[2]/2}static foundPatternCross(i){let o=0;for(let d=0;d<5;d++){const m=i[d];if(m===0)return!1;o+=m}if(o<7)return!1;const l=o/7,h=l/2;return Math.abs(l-i[0])<h&&Math.abs(l-i[1])<h&&Math.abs(3*l-i[2])<3*h&&Math.abs(l-i[3])<h&&Math.abs(l-i[4])<h}getCrossCheckStateCount(){const i=this.crossCheckStateCount;return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i}crossCheckDiagonal(i,o,l,h){const d=this.getCrossCheckStateCount();let m=0;const y=this.image;for(;i>=m&&o>=m&&y.get(o-m,i-m);)d[2]++,m++;if(i<m||o<m)return!1;for(;i>=m&&o>=m&&!y.get(o-m,i-m)&&d[1]<=l;)d[1]++,m++;if(i<m||o<m||d[1]>l)return!1;for(;i>=m&&o>=m&&y.get(o-m,i-m)&&d[0]<=l;)d[0]++,m++;if(d[0]>l)return!1;const A=y.getHeight(),S=y.getWidth();for(m=1;i+m<A&&o+m<S&&y.get(o+m,i+m);)d[2]++,m++;if(i+m>=A||o+m>=S)return!1;for(;i+m<A&&o+m<S&&!y.get(o+m,i+m)&&d[3]<l;)d[3]++,m++;if(i+m>=A||o+m>=S||d[3]>=l)return!1;for(;i+m<A&&o+m<S&&y.get(o+m,i+m)&&d[4]<l;)d[4]++,m++;if(d[4]>=l)return!1;const R=d[0]+d[1]+d[2]+d[3]+d[4];return Math.abs(R-h)<2*h&&Tn.foundPatternCross(d)}crossCheckVertical(i,o,l,h){const d=this.image,m=d.getHeight(),y=this.getCrossCheckStateCount();let A=i;for(;A>=0&&d.get(o,A);)y[2]++,A--;if(A<0)return NaN;for(;A>=0&&!d.get(o,A)&&y[1]<=l;)y[1]++,A--;if(A<0||y[1]>l)return NaN;for(;A>=0&&d.get(o,A)&&y[0]<=l;)y[0]++,A--;if(y[0]>l)return NaN;for(A=i+1;A<m&&d.get(o,A);)y[2]++,A++;if(A===m)return NaN;for(;A<m&&!d.get(o,A)&&y[3]<l;)y[3]++,A++;if(A===m||y[3]>=l)return NaN;for(;A<m&&d.get(o,A)&&y[4]<l;)y[4]++,A++;if(y[4]>=l)return NaN;const S=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(S-h)>=2*h?NaN:Tn.foundPatternCross(y)?Tn.centerFromEnd(y,A):NaN}crossCheckHorizontal(i,o,l,h){const d=this.image,m=d.getWidth(),y=this.getCrossCheckStateCount();let A=i;for(;A>=0&&d.get(A,o);)y[2]++,A--;if(A<0)return NaN;for(;A>=0&&!d.get(A,o)&&y[1]<=l;)y[1]++,A--;if(A<0||y[1]>l)return NaN;for(;A>=0&&d.get(A,o)&&y[0]<=l;)y[0]++,A--;if(y[0]>l)return NaN;for(A=i+1;A<m&&d.get(A,o);)y[2]++,A++;if(A===m)return NaN;for(;A<m&&!d.get(A,o)&&y[3]<l;)y[3]++,A++;if(A===m||y[3]>=l)return NaN;for(;A<m&&d.get(A,o)&&y[4]<l;)y[4]++,A++;if(y[4]>=l)return NaN;const S=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(S-h)>=h?NaN:Tn.foundPatternCross(y)?Tn.centerFromEnd(y,A):NaN}handlePossibleCenter(i,o,l,h){const d=i[0]+i[1]+i[2]+i[3]+i[4];let m=Tn.centerFromEnd(i,l),y=this.crossCheckVertical(o,Math.floor(m),i[2],d);if(!isNaN(y)&&(m=this.crossCheckHorizontal(Math.floor(m),Math.floor(y),i[2],d),!isNaN(m)&&(!h||this.crossCheckDiagonal(Math.floor(y),Math.floor(m),i[2],d)))){const A=d/7;let S=!1;const R=this.possibleCenters;for(let P=0,k=R.length;P<k;P++){const G=R[P];if(G.aboutEquals(A,y,m)){R[P]=G.combineEstimate(y,m,A),S=!0;break}}if(!S){const P=new aa(m,y,A);R.push(P),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(P)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let o=null;for(const l of this.possibleCenters)if(l.getCount()>=Tn.CENTER_QUORUM)if(o==null)o=l;else return this.hasSkipped=!0,Math.floor((Math.abs(o.getX()-l.getX())-Math.abs(o.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let i=0,o=0;const l=this.possibleCenters.length;for(const m of this.possibleCenters)m.getCount()>=Tn.CENTER_QUORUM&&(i++,o+=m.getEstimatedModuleSize());if(i<3)return!1;const h=o/l;let d=0;for(const m of this.possibleCenters)d+=Math.abs(m.getEstimatedModuleSize()-h);return d<=.05*o}selectBestPatterns(){const i=this.possibleCenters.length;if(i<3)throw new fe;const o=this.possibleCenters;let l;if(i>3){let h=0,d=0;for(const A of this.possibleCenters){const S=A.getEstimatedModuleSize();h+=S,d+=S*S}l=h/i;let m=Math.sqrt(d/i-l*l);o.sort((A,S)=>{const R=Math.abs(S.getEstimatedModuleSize()-l),P=Math.abs(A.getEstimatedModuleSize()-l);return R<P?-1:R>P?1:0});const y=Math.max(.2*l,m);for(let A=0;A<o.length&&o.length>3;A++){const S=o[A];Math.abs(S.getEstimatedModuleSize()-l)>y&&(o.splice(A,1),A--)}}if(o.length>3){let h=0;for(const d of o)h+=d.getEstimatedModuleSize();l=h/o.length,o.sort((d,m)=>{if(m.getCount()===d.getCount()){const y=Math.abs(m.getEstimatedModuleSize()-l),A=Math.abs(d.getEstimatedModuleSize()-l);return y<A?1:y>A?-1:0}else return m.getCount()-d.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]}}Tn.CENTER_QUORUM=2,Tn.MIN_SKIP=3,Tn.MAX_MODULES=57;class ni{constructor(i){this.image=i}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(i){this.resultPointCallback=i==null?null:i.get(Oe.NEED_RESULT_POINT_CALLBACK);const l=new Tn(this.image,this.resultPointCallback).find(i);return this.processFinderPatternInfo(l)}processFinderPatternInfo(i){const o=i.getTopLeft(),l=i.getTopRight(),h=i.getBottomLeft(),d=this.calculateModuleSize(o,l,h);if(d<1)throw new fe("No pattern found in proccess finder.");const m=ni.computeDimension(o,l,h,d),y=Xe.getProvisionalVersionForDimension(m),A=y.getDimensionForVersion()-7;let S=null;if(y.getAlignmentPatternCenters().length>0){const G=l.getX()-o.getX()+h.getX(),te=l.getY()-o.getY()+h.getY(),ne=1-3/A,ue=Math.floor(o.getX()+ne*(G-o.getX())),ye=Math.floor(o.getY()+ne*(te-o.getY()));for(let ke=4;ke<=16;ke<<=1)try{S=this.findAlignmentInRegion(d,ue,ye,ke);break}catch(Le){if(!(Le instanceof fe))throw Le}}const R=ni.createTransform(o,l,h,S,m),P=ni.sampleGrid(this.image,R,m);let k;return S===null?k=[h,o,l]:k=[h,o,l,S],new As(P,k)}static createTransform(i,o,l,h,d){const m=d-3.5;let y,A,S,R;return h!==null?(y=h.getX(),A=h.getY(),S=m-3,R=S):(y=o.getX()-i.getX()+l.getX(),A=o.getY()-i.getY()+l.getY(),S=m,R=m),fr.quadrilateralToQuadrilateral(3.5,3.5,m,3.5,S,R,3.5,m,i.getX(),i.getY(),o.getX(),o.getY(),y,A,l.getX(),l.getY())}static sampleGrid(i,o,l){return sr.getInstance().sampleGridWithTransform(i,l,l,o)}static computeDimension(i,o,l,h){const d=Ze.round(He.distance(i,o)/h),m=Ze.round(He.distance(i,l)/h);let y=Math.floor((d+m)/2)+7;switch(y&3){case 0:y++;break;case 2:y--;break;case 3:throw new fe("Dimensions could be not found.")}return y}calculateModuleSize(i,o,l){return(this.calculateModuleSizeOneWay(i,o)+this.calculateModuleSizeOneWay(i,l))/2}calculateModuleSizeOneWay(i,o){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(o.getX()),Math.floor(o.getY())),h=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(i.getX()),Math.floor(i.getY()));return isNaN(l)?h/7:isNaN(h)?l/7:(l+h)/14}sizeOfBlackWhiteBlackRunBothWays(i,o,l,h){let d=this.sizeOfBlackWhiteBlackRun(i,o,l,h),m=1,y=i-(l-i);y<0?(m=i/(i-y),y=0):y>=this.image.getWidth()&&(m=(this.image.getWidth()-1-i)/(y-i),y=this.image.getWidth()-1);let A=Math.floor(o-(h-o)*m);return m=1,A<0?(m=o/(o-A),A=0):A>=this.image.getHeight()&&(m=(this.image.getHeight()-1-o)/(A-o),A=this.image.getHeight()-1),y=Math.floor(i+(y-i)*m),d+=this.sizeOfBlackWhiteBlackRun(i,o,y,A),d-1}sizeOfBlackWhiteBlackRun(i,o,l,h){const d=Math.abs(h-o)>Math.abs(l-i);if(d){let G=i;i=o,o=G,G=l,l=h,h=G}const m=Math.abs(l-i),y=Math.abs(h-o);let A=-m/2;const S=i<l?1:-1,R=o<h?1:-1;let P=0;const k=l+S;for(let G=i,te=o;G!==k;G+=S){const ne=d?te:G,ue=d?G:te;if(P===1===this.image.get(ne,ue)){if(P===2)return Ze.distance(G,te,i,o);P++}if(A+=y,A>0){if(te===h)break;te+=R,A-=m}}return P===2?Ze.distance(l+S,h,i,o):NaN}findAlignmentInRegion(i,o,l,h){const d=Math.floor(h*i),m=Math.max(0,o-d),y=Math.min(this.image.getWidth()-1,o+d);if(y-m<i*3)throw new fe("Alignment top exceeds estimated module size.");const A=Math.max(0,l-d),S=Math.min(this.image.getHeight()-1,l+d);if(S-A<i*3)throw new fe("Alignment bottom exceeds estimated module size.");return new ti(this.image,m,A,y-m,S-A,i,this.resultPointCallback).find()}}class ri{constructor(){this.decoder=new ks}getDecoder(){return this.decoder}decode(i,o){let l,h;if(o!=null&&o.get(Oe.PURE_BARCODE)!==void 0){const A=ri.extractPureBits(i.getBlackMatrix());l=this.decoder.decodeBitMatrix(A,o),h=ri.NO_POINTS}else{const A=new ni(i.getBlackMatrix()).detect(o);l=this.decoder.decodeBitMatrix(A.getBits(),o),h=A.getPoints()}l.getOther()instanceof Zo&&l.getOther().applyMirroredCorrection(h);const d=new je(l.getText(),l.getRawBytes(),void 0,h,Pe.QR_CODE,void 0),m=l.getByteSegments();m!==null&&d.putMetadata(vt.BYTE_SEGMENTS,m);const y=l.getECLevel();return y!==null&&d.putMetadata(vt.ERROR_CORRECTION_LEVEL,y),l.hasStructuredAppend()&&(d.putMetadata(vt.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),d.putMetadata(vt.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),d}reset(){}static extractPureBits(i){const o=i.getTopLeftOnBit(),l=i.getBottomRightOnBit();if(o===null||l===null)throw new fe;const h=this.moduleSize(o,i);let d=o[1],m=l[1],y=o[0],A=l[0];if(y>=A||d>=m)throw new fe;if(m-d!==A-y&&(A=y+(m-d),A>=i.getWidth()))throw new fe;const S=Math.round((A-y+1)/h),R=Math.round((m-d+1)/h);if(S<=0||R<=0)throw new fe;if(R!==S)throw new fe;const P=Math.floor(h/2);d+=P,y+=P;const k=y+Math.floor((S-1)*h)-A;if(k>0){if(k>P)throw new fe;y-=k}const G=d+Math.floor((R-1)*h)-m;if(G>0){if(G>P)throw new fe;d-=G}const te=new $e(S,R);for(let ne=0;ne<R;ne++){const ue=d+Math.floor(ne*h);for(let ye=0;ye<S;ye++)i.get(y+Math.floor(ye*h),ue)&&te.set(ye,ne)}return te}static moduleSize(i,o){const l=o.getHeight(),h=o.getWidth();let d=i[0],m=i[1],y=!0,A=0;for(;d<h&&m<l;){if(y!==o.get(d,m)){if(++A===5)break;y=!y}d++,m++}if(d===h||m===l)throw new fe;return(d-i[0])/7}}ri.NO_POINTS=new Array;class et{PDF417Common(){}static getBitCountSum(i){return Ze.sum(i)}static toIntArray(i){if(i==null||!i.length)return et.EMPTY_INT_ARRAY;const o=new Int32Array(i.length);let l=0;for(const h of i)o[l++]=h;return o}static getCodeword(i){const o=ae.binarySearch(et.SYMBOL_TABLE,i&262143);return o<0?-1:(et.CODEWORD_TABLE[o]-1)%et.NUMBER_OF_CODEWORDS}}et.NUMBER_OF_CODEWORDS=929,et.MAX_CODEWORDS_IN_BARCODE=et.NUMBER_OF_CODEWORDS-1,et.MIN_ROWS_IN_BARCODE=3,et.MAX_ROWS_IN_BARCODE=90,et.MODULES_IN_CODEWORD=17,et.MODULES_IN_STOP_PATTERN=18,et.BARS_IN_MODULE=8,et.EMPTY_INT_ARRAY=new Int32Array([]),et.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),et.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Us{constructor(i,o){this.bits=i,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class at{static detectMultiple(i,o,l){let h=i.getBlackMatrix(),d=at.detect(l,h);return d.length||(h=h.clone(),h.rotate180(),d=at.detect(l,h)),new Us(h,d)}static detect(i,o){const l=new Array;let h=0,d=0,m=!1;for(;h<o.getHeight();){const y=at.findVertices(o,h,d);if(y[0]==null&&y[3]==null){if(!m)break;m=!1,d=0;for(const A of l)A[1]!=null&&(h=Math.trunc(Math.max(h,A[1].getY()))),A[3]!=null&&(h=Math.max(h,Math.trunc(A[3].getY())));h+=at.ROW_STEP;continue}if(m=!0,l.push(y),!i)break;y[2]!=null?(d=Math.trunc(y[2].getX()),h=Math.trunc(y[2].getY())):(d=Math.trunc(y[4].getX()),h=Math.trunc(y[4].getY()))}return l}static findVertices(i,o,l){const h=i.getHeight(),d=i.getWidth(),m=new Array(8);return at.copyToResult(m,at.findRowsWithPattern(i,h,d,o,l,at.START_PATTERN),at.INDEXES_START_PATTERN),m[4]!=null&&(l=Math.trunc(m[4].getX()),o=Math.trunc(m[4].getY())),at.copyToResult(m,at.findRowsWithPattern(i,h,d,o,l,at.STOP_PATTERN),at.INDEXES_STOP_PATTERN),m}static copyToResult(i,o,l){for(let h=0;h<l.length;h++)i[l[h]]=o[h]}static findRowsWithPattern(i,o,l,h,d,m){const y=new Array(4);let A=!1;const S=new Int32Array(m.length);for(;h<o;h+=at.ROW_STEP){let P=at.findGuardPattern(i,d,h,l,!1,m,S);if(P!=null){for(;h>0;){const k=at.findGuardPattern(i,d,--h,l,!1,m,S);if(k!=null)P=k;else{h++;break}}y[0]=new He(P[0],h),y[1]=new He(P[1],h),A=!0;break}}let R=h+1;if(A){let P=0,k=Int32Array.from([Math.trunc(y[0].getX()),Math.trunc(y[1].getX())]);for(;R<o;R++){const G=at.findGuardPattern(i,k[0],R,l,!1,m,S);if(G!=null&&Math.abs(k[0]-G[0])<at.MAX_PATTERN_DRIFT&&Math.abs(k[1]-G[1])<at.MAX_PATTERN_DRIFT)k=G,P=0;else{if(P>at.SKIPPED_ROW_COUNT_MAX)break;P++}}R-=P+1,y[2]=new He(k[0],R),y[3]=new He(k[1],R)}return R-h<at.BARCODE_MIN_HEIGHT&&ae.fill(y,null),y}static findGuardPattern(i,o,l,h,d,m,y){ae.fillWithin(y,0,y.length,0);let A=o,S=0;for(;i.get(A,l)&&A>0&&S++<at.MAX_PIXEL_DRIFT;)A--;let R=A,P=0,k=m.length;for(let G=d;R<h;R++)if(i.get(R,l)!==G)y[P]++;else{if(P===k-1){if(at.patternMatchVariance(y,m,at.MAX_INDIVIDUAL_VARIANCE)<at.MAX_AVG_VARIANCE)return new Int32Array([A,R]);A+=y[0]+y[1],$.arraycopy(y,2,y,0,P-1),y[P-1]=0,y[P]=0,P--}else P++;y[P]=1,G=!G}return P===k-1&&at.patternMatchVariance(y,m,at.MAX_INDIVIDUAL_VARIANCE)<at.MAX_AVG_VARIANCE?new Int32Array([A,R-1]):null}static patternMatchVariance(i,o,l){let h=i.length,d=0,m=0;for(let S=0;S<h;S++)d+=i[S],m+=o[S];if(d<m)return 1/0;let y=d/m;l*=y;let A=0;for(let S=0;S<h;S++){let R=i[S],P=o[S]*y,k=R>P?R-P:P-R;if(k>l)return 1/0;A+=k}return A/d}}at.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),at.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),at.MAX_AVG_VARIANCE=.42,at.MAX_INDIVIDUAL_VARIANCE=.8,at.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),at.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),at.MAX_PIXEL_DRIFT=3,at.MAX_PATTERN_DRIFT=5,at.SKIPPED_ROW_COUNT_MAX=25,at.ROW_STEP=5,at.BARCODE_MIN_HEIGHT=10;class un{constructor(i,o){if(o.length===0)throw new I;this.field=i;let l=o.length;if(l>1&&o[0]===0){let h=1;for(;h<l&&o[h]===0;)h++;h===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-h),$.arraycopy(o,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);if(i===1){let h=0;for(let d of this.coefficients)h=this.field.add(h,d);return h}let o=this.coefficients[0],l=this.coefficients.length;for(let h=1;h<l;h++)o=this.field.add(this.field.multiply(i,o),this.coefficients[h]);return o}add(i){if(!this.field.equals(i.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero())return i;if(i.isZero())return this;let o=this.coefficients,l=i.coefficients;if(o.length>l.length){let m=o;o=l,l=m}let h=new Int32Array(l.length),d=l.length-o.length;$.arraycopy(l,0,h,0,d);for(let m=d;m<l.length;m++)h[m]=this.field.add(o[m-d],l[m]);return new un(this.field,h)}subtract(i){if(!this.field.equals(i.field))throw new I("ModulusPolys do not have same ModulusGF field");return i.isZero()?this:this.add(i.negative())}multiply(i){return i instanceof un?this.multiplyOther(i):this.multiplyScalar(i)}multiplyOther(i){if(!this.field.equals(i.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero()||i.isZero())return new un(this.field,new Int32Array([0]));let o=this.coefficients,l=o.length,h=i.coefficients,d=h.length,m=new Int32Array(l+d-1);for(let y=0;y<l;y++){let A=o[y];for(let S=0;S<d;S++)m[y+S]=this.field.add(m[y+S],this.field.multiply(A,h[S]))}return new un(this.field,m)}negative(){let i=this.coefficients.length,o=new Int32Array(i);for(let l=0;l<i;l++)o[l]=this.field.subtract(0,this.coefficients[l]);return new un(this.field,o)}multiplyScalar(i){if(i===0)return new un(this.field,new Int32Array([0]));if(i===1)return this;let o=this.coefficients.length,l=new Int32Array(o);for(let h=0;h<o;h++)l[h]=this.field.multiply(this.coefficients[h],i);return new un(this.field,l)}multiplyByMonomial(i,o){if(i<0)throw new I;if(o===0)return new un(this.field,new Int32Array([0]));let l=this.coefficients.length,h=new Int32Array(l+i);for(let d=0;d<l;d++)h[d]=this.field.multiply(this.coefficients[d],o);return new un(this.field,h)}toString(){let i=new K;for(let o=this.getDegree();o>=0;o--){let l=this.getCoefficient(o);l!==0&&(l<0?(i.append(" - "),l=-l):i.length()>0&&i.append(" + "),(o===0||l!==1)&&i.append(l),o!==0&&(o===1?i.append("x"):(i.append("x^"),i.append(o))))}return i.toString()}}class oa{add(i,o){return(i+o)%this.modulus}subtract(i,o){return(this.modulus+i-o)%this.modulus}exp(i){return this.expTable[i]}log(i){if(i===0)throw new I;return this.logTable[i]}inverse(i){if(i===0)throw new ci;return this.expTable[this.modulus-this.logTable[i]-1]}multiply(i,o){return i===0||o===0?0:this.expTable[(this.logTable[i]+this.logTable[o])%(this.modulus-1)]}getSize(){return this.modulus}equals(i){return i===this}}class tn extends oa{constructor(i,o){super(),this.modulus=i,this.expTable=new Int32Array(i),this.logTable=new Int32Array(i);let l=1;for(let h=0;h<i;h++)this.expTable[h]=l,l=l*o%i;for(let h=0;h<i-1;h++)this.logTable[this.expTable[h]]=h;this.zero=new un(this,new Int32Array([0])),this.one=new un(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,o){if(i<0)throw new I;if(o===0)return this.zero;let l=new Int32Array(i+1);return l[0]=o,new un(this,l)}}tn.PDF417_GF=new tn(et.NUMBER_OF_CODEWORDS,3);class Ui{constructor(){this.field=tn.PDF417_GF}decode(i,o,l){let h=new un(this.field,i),d=new Int32Array(o),m=!1;for(let te=o;te>0;te--){let ne=h.evaluateAt(this.field.exp(te));d[o-te]=ne,ne!==0&&(m=!0)}if(!m)return 0;let y=this.field.getOne();if(l!=null)for(const te of l){let ne=this.field.exp(i.length-1-te),ue=new un(this.field,new Int32Array([this.field.subtract(0,ne),1]));y=y.multiply(ue)}let A=new un(this.field,d),S=this.runEuclideanAlgorithm(this.field.buildMonomial(o,1),A,o),R=S[0],P=S[1],k=this.findErrorLocations(R),G=this.findErrorMagnitudes(P,R,k);for(let te=0;te<k.length;te++){let ne=i.length-1-this.field.log(k[te]);if(ne<0)throw B.getChecksumInstance();i[ne]=this.field.subtract(i[ne],G[te])}return k.length}runEuclideanAlgorithm(i,o,l){if(i.getDegree()<o.getDegree()){let k=i;i=o,o=k}let h=i,d=o,m=this.field.getZero(),y=this.field.getOne();for(;d.getDegree()>=Math.round(l/2);){let k=h,G=m;if(h=d,m=y,h.isZero())throw B.getChecksumInstance();d=k;let te=this.field.getZero(),ne=h.getCoefficient(h.getDegree()),ue=this.field.inverse(ne);for(;d.getDegree()>=h.getDegree()&&!d.isZero();){let ye=d.getDegree()-h.getDegree(),ke=this.field.multiply(d.getCoefficient(d.getDegree()),ue);te=te.add(this.field.buildMonomial(ye,ke)),d=d.subtract(h.multiplyByMonomial(ye,ke))}y=te.multiply(m).subtract(G).negative()}let A=y.getCoefficient(0);if(A===0)throw B.getChecksumInstance();let S=this.field.inverse(A),R=y.multiply(S),P=d.multiply(S);return[R,P]}findErrorLocations(i){let o=i.getDegree(),l=new Int32Array(o),h=0;for(let d=1;d<this.field.getSize()&&h<o;d++)i.evaluateAt(d)===0&&(l[h]=this.field.inverse(d),h++);if(h!==o)throw B.getChecksumInstance();return l}findErrorMagnitudes(i,o,l){let h=o.getDegree(),d=new Int32Array(h);for(let S=1;S<=h;S++)d[h-S]=this.field.multiply(S,o.getCoefficient(S));let m=new un(this.field,d),y=l.length,A=new Int32Array(y);for(let S=0;S<y;S++){let R=this.field.inverse(l[S]),P=this.field.subtract(0,i.evaluateAt(R)),k=this.field.inverse(m.evaluateAt(R));A[S]=this.field.multiply(P,k)}return A}}class Vi{constructor(i,o,l,h,d){i instanceof Vi?this.constructor_2(i):this.constructor_1(i,o,l,h,d)}constructor_1(i,o,l,h,d){const m=o==null||l==null,y=h==null||d==null;if(m&&y)throw new fe;m?(o=new He(0,h.getY()),l=new He(0,d.getY())):y&&(h=new He(i.getWidth()-1,o.getY()),d=new He(i.getWidth()-1,l.getY())),this.image=i,this.topLeft=o,this.bottomLeft=l,this.topRight=h,this.bottomRight=d,this.minX=Math.trunc(Math.min(o.getX(),l.getX())),this.maxX=Math.trunc(Math.max(h.getX(),d.getX())),this.minY=Math.trunc(Math.min(o.getY(),h.getY())),this.maxY=Math.trunc(Math.max(l.getY(),d.getY()))}constructor_2(i){this.image=i.image,this.topLeft=i.getTopLeft(),this.bottomLeft=i.getBottomLeft(),this.topRight=i.getTopRight(),this.bottomRight=i.getBottomRight(),this.minX=i.getMinX(),this.maxX=i.getMaxX(),this.minY=i.getMinY(),this.maxY=i.getMaxY()}static merge(i,o){return i==null?o:o==null?i:new Vi(i.image,i.topLeft,i.bottomLeft,o.topRight,o.bottomRight)}addMissingRows(i,o,l){let h=this.topLeft,d=this.bottomLeft,m=this.topRight,y=this.bottomRight;if(i>0){let A=l?this.topLeft:this.topRight,S=Math.trunc(A.getY()-i);S<0&&(S=0);let R=new He(A.getX(),S);l?h=R:m=R}if(o>0){let A=l?this.bottomLeft:this.bottomRight,S=Math.trunc(A.getY()+o);S>=this.image.getHeight()&&(S=this.image.getHeight()-1);let R=new He(A.getX(),S);l?d=R:y=R}return new Vi(this.image,h,d,m,y)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class la{constructor(i,o,l,h){this.columnCount=i,this.errorCorrectionLevel=h,this.rowCountUpperPart=o,this.rowCountLowerPart=l,this.rowCount=o+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class vs{constructor(){this.buffer=""}static form(i,o){let l=-1;function h(m,y,A,S,R,P){if(m==="%%")return"%";if(o[++l]===void 0)return;m=S?parseInt(S.substr(1)):void 0;let k=R?parseInt(R.substr(1)):void 0,G;switch(P){case"s":G=o[l];break;case"c":G=o[l][0];break;case"f":G=parseFloat(o[l]).toFixed(m);break;case"p":G=parseFloat(o[l]).toPrecision(m);break;case"e":G=parseFloat(o[l]).toExponential(m);break;case"x":G=parseInt(o[l]).toString(k||16);break;case"d":G=parseFloat(parseInt(o[l],k||10).toPrecision(m)).toFixed(0);break}G=typeof G=="object"?JSON.stringify(G):(+G).toString(k);let te=parseInt(A),ne=A&&A[0]+""=="0"?"0":" ";for(;G.length<te;)G=y!==void 0?G+ne:ne+G;return G}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(d,h)}format(i,...o){this.buffer+=vs.form(i,o)}toString(){return this.buffer}}class ji{constructor(i){this.boundingBox=new Vi(i),this.codewords=new Array(i.getMaxY()-i.getMinY()+1)}getCodewordNearby(i){let o=this.getCodeword(i);if(o!=null)return o;for(let l=1;l<ji.MAX_NEARBY_DISTANCE;l++){let h=this.imageRowToCodewordIndex(i)-l;if(h>=0&&(o=this.codewords[h],o!=null)||(h=this.imageRowToCodewordIndex(i)+l,h<this.codewords.length&&(o=this.codewords[h],o!=null)))return o}return null}imageRowToCodewordIndex(i){return i-this.boundingBox.getMinY()}setCodeword(i,o){this.codewords[this.imageRowToCodewordIndex(i)]=o}getCodeword(i){return this.codewords[this.imageRowToCodewordIndex(i)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const i=new vs;let o=0;for(const l of this.codewords){if(l==null){i.format("%3d:    |   %n",o++);continue}i.format("%3d: %3d|%3d%n",o++,l.getRowNumber(),l.getValue())}return i.toString()}}ji.MAX_NEARBY_DISTANCE=5;class gi{constructor(){this.values=new Map}setValue(i){i=Math.trunc(i);let o=this.values.get(i);o==null&&(o=0),o++,this.values.set(i,o)}getValue(){let i=-1,o=new Array;for(const[l,h]of this.values.entries()){const d={getKey:()=>l,getValue:()=>h};d.getValue()>i?(i=d.getValue(),o=[],o.push(d.getKey())):d.getValue()===i&&o.push(d.getKey())}return et.toIntArray(o)}getConfidence(i){return this.values.get(i)}}class Ti extends ji{constructor(i,o){super(i),this._isLeft=o}setRowNumbers(){for(let i of this.getCodewords())i!=null&&i.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(i){let o=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(o,i);let l=this.getBoundingBox(),h=this._isLeft?l.getTopLeft():l.getTopRight(),d=this._isLeft?l.getBottomLeft():l.getBottomRight(),m=this.imageRowToCodewordIndex(Math.trunc(h.getY())),y=this.imageRowToCodewordIndex(Math.trunc(d.getY())),A=-1,S=1,R=0;for(let P=m;P<y;P++){if(o[P]==null)continue;let k=o[P],G=k.getRowNumber()-A;if(G===0)R++;else if(G===1)S=Math.max(S,R),R=1,A=k.getRowNumber();else if(G<0||k.getRowNumber()>=i.getRowCount()||G>P)o[P]=null;else{let te;S>2?te=(S-2)*G:te=G;let ne=te>=P;for(let ue=1;ue<=te&&!ne;ue++)ne=o[P-ue]!=null;ne?o[P]=null:(A=k.getRowNumber(),R=1)}}}getRowHeights(){let i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);let o=new Int32Array(i.getRowCount());for(let l of this.getCodewords())if(l!=null){let h=l.getRowNumber();if(h>=o.length)continue;o[h]++}return o}adjustIncompleteIndicatorColumnRowNumbers(i){let o=this.getBoundingBox(),l=this._isLeft?o.getTopLeft():o.getTopRight(),h=this._isLeft?o.getBottomLeft():o.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(l.getY())),m=this.imageRowToCodewordIndex(Math.trunc(h.getY())),y=this.getCodewords(),A=-1;for(let S=d;S<m;S++){if(y[S]==null)continue;let R=y[S];R.setRowNumberAsRowIndicatorColumn();let P=R.getRowNumber()-A;P===0||(P===1?A=R.getRowNumber():R.getRowNumber()>=i.getRowCount()?y[S]=null:A=R.getRowNumber())}}getBarcodeMetadata(){let i=this.getCodewords(),o=new gi,l=new gi,h=new gi,d=new gi;for(let y of i){if(y==null)continue;y.setRowNumberAsRowIndicatorColumn();let A=y.getValue()%30,S=y.getRowNumber();switch(this._isLeft||(S+=2),S%3){case 0:l.setValue(A*3+1);break;case 1:d.setValue(A/3),h.setValue(A%3);break;case 2:o.setValue(A+1);break}}if(o.getValue().length===0||l.getValue().length===0||h.getValue().length===0||d.getValue().length===0||o.getValue()[0]<1||l.getValue()[0]+h.getValue()[0]<et.MIN_ROWS_IN_BARCODE||l.getValue()[0]+h.getValue()[0]>et.MAX_ROWS_IN_BARCODE)return null;let m=new la(o.getValue()[0],l.getValue()[0],h.getValue()[0],d.getValue()[0]);return this.removeIncorrectCodewords(i,m),m}removeIncorrectCodewords(i,o){for(let l=0;l<i.length;l++){let h=i[l];if(i[l]==null)continue;let d=h.getValue()%30,m=h.getRowNumber();if(m>o.getRowCount()){i[l]=null;continue}switch(this._isLeft||(m+=2),m%3){case 0:d*3+1!==o.getRowCountUpperPart()&&(i[l]=null);break;case 1:(Math.trunc(d/3)!==o.getErrorCorrectionLevel()||d%3!==o.getRowCountLowerPart())&&(i[l]=null);break;case 2:d+1!==o.getColumnCount()&&(i[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class qn{constructor(i,o){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=i,this.barcodeColumnCount=i.getColumnCount(),this.boundingBox=o,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let i=et.MAX_CODEWORDS_IN_BARCODE,o;do o=i,i=this.adjustRowNumbersAndGetCount();while(i>0&&i<o);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(i){i!=null&&i.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let i=this.adjustRowNumbersByRow();if(i===0)return 0;for(let o=1;o<this.barcodeColumnCount+1;o++){let l=this.detectionResultColumns[o].getCodewords();for(let h=0;h<l.length;h++)l[h]!=null&&(l[h].hasValidRowNumber()||this.adjustRowNumbers(o,h,l))}return i}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let i=this.detectionResultColumns[0].getCodewords(),o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<i.length;l++)if(i[l]!=null&&o[l]!=null&&i[l].getRowNumber()===o[l].getRowNumber())for(let h=1;h<=this.barcodeColumnCount;h++){let d=this.detectionResultColumns[h].getCodewords()[l];d!=null&&(d.setRowNumber(i[l].getRowNumber()),d.hasValidRowNumber()||(this.detectionResultColumns[h].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let i=0,o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<o.length;l++){if(o[l]==null)continue;let h=o[l].getRowNumber(),d=0;for(let m=this.barcodeColumnCount+1;m>0&&d<this.ADJUST_ROW_NUMBER_SKIP;m--){let y=this.detectionResultColumns[m].getCodewords()[l];y!=null&&(d=qn.adjustRowNumberIfValid(h,d,y),y.hasValidRowNumber()||i++)}}return i}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let i=0,o=this.detectionResultColumns[0].getCodewords();for(let l=0;l<o.length;l++){if(o[l]==null)continue;let h=o[l].getRowNumber(),d=0;for(let m=1;m<this.barcodeColumnCount+1&&d<this.ADJUST_ROW_NUMBER_SKIP;m++){let y=this.detectionResultColumns[m].getCodewords()[l];y!=null&&(d=qn.adjustRowNumberIfValid(h,d,y),y.hasValidRowNumber()||i++)}}return i}static adjustRowNumberIfValid(i,o,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(i)?(l.setRowNumber(i),o=0):++o),o}adjustRowNumbers(i,o,l){if(!this.detectionResultColumns[i-1])return;let h=l[o],d=this.detectionResultColumns[i-1].getCodewords(),m=d;this.detectionResultColumns[i+1]!=null&&(m=this.detectionResultColumns[i+1].getCodewords());let y=new Array(14);y[2]=d[o],y[3]=m[o],o>0&&(y[0]=l[o-1],y[4]=d[o-1],y[5]=m[o-1]),o>1&&(y[8]=l[o-2],y[10]=d[o-2],y[11]=m[o-2]),o<l.length-1&&(y[1]=l[o+1],y[6]=d[o+1],y[7]=m[o+1]),o<l.length-2&&(y[9]=l[o+2],y[12]=d[o+2],y[13]=m[o+2]);for(let A of y)if(qn.adjustRowNumber(h,A))return}static adjustRowNumber(i,o){return o==null?!1:o.hasValidRowNumber()&&o.getBucket()===i.getBucket()?(i.setRowNumber(o.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(i){this.boundingBox=i}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(i,o){this.detectionResultColumns[i]=o}getDetectionResultColumn(i){return this.detectionResultColumns[i]}toString(){let i=this.detectionResultColumns[0];i==null&&(i=this.detectionResultColumns[this.barcodeColumnCount+1]);let o=new vs;for(let l=0;l<i.getCodewords().length;l++){o.format("CW %3d:",l);for(let h=0;h<this.barcodeColumnCount+2;h++){if(this.detectionResultColumns[h]==null){o.format("    |   ");continue}let d=this.detectionResultColumns[h].getCodewords()[l];if(d==null){o.format("    |   ");continue}o.format(" %3d|%3d",d.getRowNumber(),d.getValue())}o.format("%n")}return o.toString()}}class mi{constructor(i,o,l,h){this.rowNumber=mi.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(i),this.endX=Math.trunc(o),this.bucket=Math.trunc(l),this.value=Math.trunc(h)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(i){return i!==mi.BARCODE_ROW_UNKNOWN&&this.bucket===i%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(i){this.rowNumber=i}toString(){return this.rowNumber+"|"+this.value}}mi.BARCODE_ROW_UNKNOWN=-1;class Rn{static initialize(){for(let i=0;i<et.SYMBOL_TABLE.length;i++){let o=et.SYMBOL_TABLE[i],l=o&1;for(let h=0;h<et.BARS_IN_MODULE;h++){let d=0;for(;(o&1)===l;)d+=1,o>>=1;l=o&1,Rn.RATIOS_TABLE[i]||(Rn.RATIOS_TABLE[i]=new Array(et.BARS_IN_MODULE)),Rn.RATIOS_TABLE[i][et.BARS_IN_MODULE-h-1]=Math.fround(d/et.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(i){let o=Rn.getDecodedCodewordValue(Rn.sampleBitCounts(i));return o!==-1?o:Rn.getClosestDecodedValue(i)}static sampleBitCounts(i){let o=Ze.sum(i),l=new Int32Array(et.BARS_IN_MODULE),h=0,d=0;for(let m=0;m<et.MODULES_IN_CODEWORD;m++){let y=o/(2*et.MODULES_IN_CODEWORD)+m*o/et.MODULES_IN_CODEWORD;d+i[h]<=y&&(d+=i[h],h++),l[h]++}return l}static getDecodedCodewordValue(i){let o=Rn.getBitValue(i);return et.getCodeword(o)===-1?-1:o}static getBitValue(i){let o=0;for(let l=0;l<i.length;l++)for(let h=0;h<i[l];h++)o=o<<1|(l%2===0?1:0);return Math.trunc(o)}static getClosestDecodedValue(i){let o=Ze.sum(i),l=new Array(et.BARS_IN_MODULE);if(o>1)for(let m=0;m<l.length;m++)l[m]=Math.fround(i[m]/o);let h=An.MAX_VALUE,d=-1;this.bSymbolTableReady||Rn.initialize();for(let m=0;m<Rn.RATIOS_TABLE.length;m++){let y=0,A=Rn.RATIOS_TABLE[m];for(let S=0;S<et.BARS_IN_MODULE;S++){let R=Math.fround(A[S]-l[S]);if(y+=Math.fround(R*R),y>=h)break}y<h&&(h=y,d=et.SYMBOL_TABLE[m])}return d}}Rn.bSymbolTableReady=!1,Rn.RATIOS_TABLE=new Array(et.SYMBOL_TABLE.length).map(L=>new Array(et.BARS_IN_MODULE));class Ss{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(i){this.segmentIndex=i}getFileId(){return this.fileId}setFileId(i){this.fileId=i}getOptionalData(){return this.optionalData}setOptionalData(i){this.optionalData=i}isLastSegment(){return this.lastSegment}setLastSegment(i){this.lastSegment=i}getSegmentCount(){return this.segmentCount}setSegmentCount(i){this.segmentCount=i}getSender(){return this.sender||null}setSender(i){this.sender=i}getAddressee(){return this.addressee||null}setAddressee(i){this.addressee=i}getFileName(){return this.fileName}setFileName(i){this.fileName=i}getFileSize(){return this.fileSize}setFileSize(i){this.fileSize=i}getChecksum(){return this.checksum}setChecksum(i){this.checksum=i}getTimestamp(){return this.timestamp}setTimestamp(i){this.timestamp=i}}class Za{static parseLong(i,o=void 0){return parseInt(i,o)}}class Cs extends E{}Cs.kind="NullPointerException";class Ja{writeBytes(i){this.writeBytesOffset(i,0,i.length)}writeBytesOffset(i,o,l){if(i==null)throw new Cs;if(o<0||o>i.length||l<0||o+l>i.length||o+l<0)throw new q;if(l===0)return;for(let h=0;h<l;h++)this.write(i[o+h])}flush(){}close(){}}class rs extends E{}class $a extends Ja{constructor(i=32){if(super(),this.count=0,i<0)throw new I("Negative initial size: "+i);this.buf=new Uint8Array(i)}ensureCapacity(i){i-this.buf.length>0&&this.grow(i)}grow(i){let l=this.buf.length<<1;if(l-i<0&&(l=i),l<0){if(i<0)throw new rs;l=Q.MAX_VALUE}this.buf=ae.copyOfUint8Array(this.buf,l)}write(i){this.ensureCapacity(this.count+1),this.buf[this.count]=i,this.count+=1}writeBytesOffset(i,o,l){if(o<0||o>i.length||l<0||o+l-i.length>0)throw new q;this.ensureCapacity(this.count+l),$.arraycopy(i,o,this.buf,this.count,l),this.count+=l}writeTo(i){i.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return ae.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(i){return i?typeof i=="string"?this.toString_string(i):this.toString_number(i):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(i){return new String(this.buf).toString()}toString_number(i){return new String(this.buf).toString()}close(){}}var Jt;(function(L){L[L.ALPHA=0]="ALPHA",L[L.LOWER=1]="LOWER",L[L.MIXED=2]="MIXED",L[L.PUNCT=3]="PUNCT",L[L.ALPHA_SHIFT=4]="ALPHA_SHIFT",L[L.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Jt||(Jt={}));function Vs(){if(typeof window<"u")return window.BigInt||null;if(typeof bf<"u")return bf.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let ca;function Fi(L){if(typeof ca>"u"&&(ca=Vs()),ca===null)throw new Error("BigInt is not supported!");return ca(L)}function ua(){let L=[];L[0]=Fi(1);let i=Fi(900);L[1]=i;for(let o=2;o<16;o++)L[o]=L[o-1]*i;return L}class xe{static decode(i,o){let l=new K(""),h=V.ISO8859_1;l.enableDecoding(h);let d=1,m=i[d++],y=new Ss;for(;d<i[0];){switch(m){case xe.TEXT_COMPACTION_MODE_LATCH:d=xe.textCompaction(i,d,l);break;case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:d=xe.byteCompaction(m,i,h,d,l);break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(i[d++]);break;case xe.NUMERIC_COMPACTION_MODE_LATCH:d=xe.numericCompaction(i,d,l);break;case xe.ECI_CHARSET:V.getCharacterSetECIByValue(i[d++]);break;case xe.ECI_GENERAL_PURPOSE:d+=2;break;case xe.ECI_USER_DEFINED:d++;break;case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:d=xe.decodeMacroBlock(i,d,y);break;case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:throw new j;default:d--,d=xe.textCompaction(i,d,l);break}if(d<i.length)m=i[d++];else throw j.getFormatInstance()}if(l.length()===0)throw j.getFormatInstance();let A=new en(null,l.toString(),null,o);return A.setOther(y),A}static decodeMacroBlock(i,o,l){if(o+xe.NUMBER_OF_SEQUENCE_CODEWORDS>i[0])throw j.getFormatInstance();let h=new Int32Array(xe.NUMBER_OF_SEQUENCE_CODEWORDS);for(let y=0;y<xe.NUMBER_OF_SEQUENCE_CODEWORDS;y++,o++)h[y]=i[o];l.setSegmentIndex(Q.parseInt(xe.decodeBase900toBase10(h,xe.NUMBER_OF_SEQUENCE_CODEWORDS)));let d=new K;o=xe.textCompaction(i,o,d),l.setFileId(d.toString());let m=-1;for(i[o]===xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(m=o+1);o<i[0];)switch(i[o]){case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(o++,i[o]){case xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let y=new K;o=xe.textCompaction(i,o+1,y),l.setFileName(y.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let A=new K;o=xe.textCompaction(i,o+1,A),l.setSender(A.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let S=new K;o=xe.textCompaction(i,o+1,S),l.setAddressee(S.toString());break;case xe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let R=new K;o=xe.numericCompaction(i,o+1,R),l.setSegmentCount(Q.parseInt(R.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let P=new K;o=xe.numericCompaction(i,o+1,P),l.setTimestamp(Za.parseLong(P.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let k=new K;o=xe.numericCompaction(i,o+1,k),l.setChecksum(Q.parseInt(k.toString()));break;case xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let G=new K;o=xe.numericCompaction(i,o+1,G),l.setFileSize(Za.parseLong(G.toString()));break;default:throw j.getFormatInstance()}break;case xe.MACRO_PDF417_TERMINATOR:o++,l.setLastSegment(!0);break;default:throw j.getFormatInstance()}if(m!==-1){let y=o-m;l.isLastSegment()&&y--,l.setOptionalData(ae.copyOfRange(i,m,m+y))}return o}static textCompaction(i,o,l){let h=new Int32Array((i[0]-o)*2),d=new Int32Array((i[0]-o)*2),m=0,y=!1;for(;o<i[0]&&!y;){let A=i[o++];if(A<xe.TEXT_COMPACTION_MODE_LATCH)h[m]=A/30,h[m+1]=A%30,m+=2;else switch(A){case xe.TEXT_COMPACTION_MODE_LATCH:h[m++]=xe.TEXT_COMPACTION_MODE_LATCH;break;case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:o--,y=!0;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h[m]=xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,A=i[o++],d[m]=A,m++;break}}return xe.decodeTextCompaction(h,d,m,l),o}static decodeTextCompaction(i,o,l,h){let d=Jt.ALPHA,m=Jt.ALPHA,y=0;for(;y<l;){let A=i[y],S="";switch(d){case Jt.ALPHA:if(A<26)S=String.fromCharCode(65+A);else switch(A){case 26:S=" ";break;case xe.LL:d=Jt.LOWER;break;case xe.ML:d=Jt.MIXED;break;case xe.PS:m=d,d=Jt.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(o[y]);break;case xe.TEXT_COMPACTION_MODE_LATCH:d=Jt.ALPHA;break}break;case Jt.LOWER:if(A<26)S=String.fromCharCode(97+A);else switch(A){case 26:S=" ";break;case xe.AS:m=d,d=Jt.ALPHA_SHIFT;break;case xe.ML:d=Jt.MIXED;break;case xe.PS:m=d,d=Jt.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(o[y]);break;case xe.TEXT_COMPACTION_MODE_LATCH:d=Jt.ALPHA;break}break;case Jt.MIXED:if(A<xe.PL)S=xe.MIXED_CHARS[A];else switch(A){case xe.PL:d=Jt.PUNCT;break;case 26:S=" ";break;case xe.LL:d=Jt.LOWER;break;case xe.AL:d=Jt.ALPHA;break;case xe.PS:m=d,d=Jt.PUNCT_SHIFT;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(o[y]);break;case xe.TEXT_COMPACTION_MODE_LATCH:d=Jt.ALPHA;break}break;case Jt.PUNCT:if(A<xe.PAL)S=xe.PUNCT_CHARS[A];else switch(A){case xe.PAL:d=Jt.ALPHA;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(o[y]);break;case xe.TEXT_COMPACTION_MODE_LATCH:d=Jt.ALPHA;break}break;case Jt.ALPHA_SHIFT:if(d=m,A<26)S=String.fromCharCode(65+A);else switch(A){case 26:S=" ";break;case xe.TEXT_COMPACTION_MODE_LATCH:d=Jt.ALPHA;break}break;case Jt.PUNCT_SHIFT:if(d=m,A<xe.PAL)S=xe.PUNCT_CHARS[A];else switch(A){case xe.PAL:d=Jt.ALPHA;break;case xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(o[y]);break;case xe.TEXT_COMPACTION_MODE_LATCH:d=Jt.ALPHA;break}break}S!==""&&h.append(S),y++}}static byteCompaction(i,o,l,h,d){let m=new $a,y=0,A=0,S=!1;switch(i){case xe.BYTE_COMPACTION_MODE_LATCH:let R=new Int32Array(6),P=o[h++];for(;h<o[0]&&!S;)switch(R[y++]=P,A=900*A+P,P=o[h++],P){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:h--,S=!0;break;default:if(y%5===0&&y>0){for(let k=0;k<6;++k)m.write(Number(Fi(A)>>Fi(8*(5-k))));A=0,y=0}break}h===o[0]&&P<xe.TEXT_COMPACTION_MODE_LATCH&&(R[y++]=P);for(let k=0;k<y;k++)m.write(R[k]);break;case xe.BYTE_COMPACTION_MODE_LATCH_6:for(;h<o[0]&&!S;){let k=o[h++];if(k<xe.TEXT_COMPACTION_MODE_LATCH)y++,A=900*A+k;else switch(k){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.NUMERIC_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:h--,S=!0;break}if(y%5===0&&y>0){for(let G=0;G<6;++G)m.write(Number(Fi(A)>>Fi(8*(5-G))));A=0,y=0}}break}return d.append(Z.decode(m.toByteArray(),l)),h}static numericCompaction(i,o,l){let h=0,d=!1,m=new Int32Array(xe.MAX_NUMERIC_CODEWORDS);for(;o<i[0]&&!d;){let y=i[o++];if(o===i[0]&&(d=!0),y<xe.TEXT_COMPACTION_MODE_LATCH)m[h]=y,h++;else switch(y){case xe.TEXT_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH:case xe.BYTE_COMPACTION_MODE_LATCH_6:case xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case xe.MACRO_PDF417_TERMINATOR:o--,d=!0;break}(h%xe.MAX_NUMERIC_CODEWORDS===0||y===xe.NUMERIC_COMPACTION_MODE_LATCH||d)&&h>0&&(l.append(xe.decodeBase900toBase10(m,h)),h=0)}return o}static decodeBase900toBase10(i,o){let l=Fi(0);for(let d=0;d<o;d++)l+=xe.EXP900[o-d-1]*Fi(i[d]);let h=l.toString();if(h.charAt(0)!=="1")throw new j;return h.substring(1)}}xe.TEXT_COMPACTION_MODE_LATCH=900,xe.BYTE_COMPACTION_MODE_LATCH=901,xe.NUMERIC_COMPACTION_MODE_LATCH=902,xe.BYTE_COMPACTION_MODE_LATCH_6=924,xe.ECI_USER_DEFINED=925,xe.ECI_GENERAL_PURPOSE=926,xe.ECI_CHARSET=927,xe.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,xe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,xe.MACRO_PDF417_TERMINATOR=922,xe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,xe.MAX_NUMERIC_CODEWORDS=15,xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,xe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,xe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,xe.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,xe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,xe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,xe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,xe.PL=25,xe.LL=27,xe.AS=27,xe.ML=28,xe.AL=28,xe.PS=29,xe.PAL=29,xe.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,xe.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",xe.EXP900=Vs()?ua():[],xe.NUMBER_OF_SEQUENCE_CODEWORDS=2;class yt{constructor(){}static decode(i,o,l,h,d,m,y){let A=new Vi(i,o,l,h,d),S=null,R=null,P;for(let te=!0;;te=!1){if(o!=null&&(S=yt.getRowIndicatorColumn(i,A,o,!0,m,y)),h!=null&&(R=yt.getRowIndicatorColumn(i,A,h,!1,m,y)),P=yt.merge(S,R),P==null)throw fe.getNotFoundInstance();let ne=P.getBoundingBox();if(te&&ne!=null&&(ne.getMinY()<A.getMinY()||ne.getMaxY()>A.getMaxY()))A=ne;else break}P.setBoundingBox(A);let k=P.getBarcodeColumnCount()+1;P.setDetectionResultColumn(0,S),P.setDetectionResultColumn(k,R);let G=S!=null;for(let te=1;te<=k;te++){let ne=G?te:k-te;if(P.getDetectionResultColumn(ne)!==void 0)continue;let ue;ne===0||ne===k?ue=new Ti(A,ne===0):ue=new ji(A),P.setDetectionResultColumn(ne,ue);let ye=-1,ke=ye;for(let Le=A.getMinY();Le<=A.getMaxY();Le++){if(ye=yt.getStartColumn(P,ne,Le,G),ye<0||ye>A.getMaxX()){if(ke===-1)continue;ye=ke}let Re=yt.detectCodeword(i,A.getMinX(),A.getMaxX(),G,ye,Le,m,y);Re!=null&&(ue.setCodeword(Le,Re),ke=ye,m=Math.min(m,Re.getWidth()),y=Math.max(y,Re.getWidth()))}}return yt.createDecoderResult(P)}static merge(i,o){if(i==null&&o==null)return null;let l=yt.getBarcodeMetadata(i,o);if(l==null)return null;let h=Vi.merge(yt.adjustBoundingBox(i),yt.adjustBoundingBox(o));return new qn(l,h)}static adjustBoundingBox(i){if(i==null)return null;let o=i.getRowHeights();if(o==null)return null;let l=yt.getMax(o),h=0;for(let y of o)if(h+=l-y,y>0)break;let d=i.getCodewords();for(let y=0;h>0&&d[y]==null;y++)h--;let m=0;for(let y=o.length-1;y>=0&&(m+=l-o[y],!(o[y]>0));y--);for(let y=d.length-1;m>0&&d[y]==null;y--)m--;return i.getBoundingBox().addMissingRows(h,m,i.isLeft())}static getMax(i){let o=-1;for(let l of i)o=Math.max(o,l);return o}static getBarcodeMetadata(i,o){let l;if(i==null||(l=i.getBarcodeMetadata())==null)return o==null?null:o.getBarcodeMetadata();let h;return o==null||(h=o.getBarcodeMetadata())==null?l:l.getColumnCount()!==h.getColumnCount()&&l.getErrorCorrectionLevel()!==h.getErrorCorrectionLevel()&&l.getRowCount()!==h.getRowCount()?null:l}static getRowIndicatorColumn(i,o,l,h,d,m){let y=new Ti(o,h);for(let A=0;A<2;A++){let S=A===0?1:-1,R=Math.trunc(Math.trunc(l.getX()));for(let P=Math.trunc(Math.trunc(l.getY()));P<=o.getMaxY()&&P>=o.getMinY();P+=S){let k=yt.detectCodeword(i,0,i.getWidth(),h,R,P,d,m);k!=null&&(y.setCodeword(P,k),h?R=k.getStartX():R=k.getEndX())}}return y}static adjustCodewordCount(i,o){let l=o[0][1],h=l.getValue(),d=i.getBarcodeColumnCount()*i.getBarcodeRowCount()-yt.getNumberOfECCodeWords(i.getBarcodeECLevel());if(h.length===0){if(d<1||d>et.MAX_CODEWORDS_IN_BARCODE)throw fe.getNotFoundInstance();l.setValue(d)}else h[0]!==d&&l.setValue(d)}static createDecoderResult(i){let o=yt.createBarcodeMatrix(i);yt.adjustCodewordCount(i,o);let l=new Array,h=new Int32Array(i.getBarcodeRowCount()*i.getBarcodeColumnCount()),d=[],m=new Array;for(let A=0;A<i.getBarcodeRowCount();A++)for(let S=0;S<i.getBarcodeColumnCount();S++){let R=o[A][S+1].getValue(),P=A*i.getBarcodeColumnCount()+S;R.length===0?l.push(P):R.length===1?h[P]=R[0]:(m.push(P),d.push(R))}let y=new Array(d.length);for(let A=0;A<y.length;A++)y[A]=d[A];return yt.createDecoderResultFromAmbiguousValues(i.getBarcodeECLevel(),h,et.toIntArray(l),et.toIntArray(m),y)}static createDecoderResultFromAmbiguousValues(i,o,l,h,d){let m=new Int32Array(h.length),y=100;for(;y-- >0;){for(let A=0;A<m.length;A++)o[h[A]]=d[A][m[A]];try{return yt.decodeCodewords(o,i,l)}catch(A){if(!(A instanceof B))throw A}if(m.length===0)throw B.getChecksumInstance();for(let A=0;A<m.length;A++)if(m[A]<d[A].length-1){m[A]++;break}else if(m[A]=0,A===m.length-1)throw B.getChecksumInstance()}throw B.getChecksumInstance()}static createBarcodeMatrix(i){let o=Array.from({length:i.getBarcodeRowCount()},()=>new Array(i.getBarcodeColumnCount()+2));for(let h=0;h<o.length;h++)for(let d=0;d<o[h].length;d++)o[h][d]=new gi;let l=0;for(let h of i.getDetectionResultColumns()){if(h!=null){for(let d of h.getCodewords())if(d!=null){let m=d.getRowNumber();if(m>=0){if(m>=o.length)continue;o[m][l].setValue(d.getValue())}}}l++}return o}static isValidBarcodeColumn(i,o){return o>=0&&o<=i.getBarcodeColumnCount()+1}static getStartColumn(i,o,l,h){let d=h?1:-1,m=null;if(yt.isValidBarcodeColumn(i,o-d)&&(m=i.getDetectionResultColumn(o-d).getCodeword(l)),m!=null)return h?m.getEndX():m.getStartX();if(m=i.getDetectionResultColumn(o).getCodewordNearby(l),m!=null)return h?m.getStartX():m.getEndX();if(yt.isValidBarcodeColumn(i,o-d)&&(m=i.getDetectionResultColumn(o-d).getCodewordNearby(l)),m!=null)return h?m.getEndX():m.getStartX();let y=0;for(;yt.isValidBarcodeColumn(i,o-d);){o-=d;for(let A of i.getDetectionResultColumn(o).getCodewords())if(A!=null)return(h?A.getEndX():A.getStartX())+d*y*(A.getEndX()-A.getStartX());y++}return h?i.getBoundingBox().getMinX():i.getBoundingBox().getMaxX()}static detectCodeword(i,o,l,h,d,m,y,A){d=yt.adjustCodewordStartColumn(i,o,l,h,d,m);let S=yt.getModuleBitCount(i,o,l,h,d,m);if(S==null)return null;let R,P=Ze.sum(S);if(h)R=d+P;else{for(let te=0;te<S.length/2;te++){let ne=S[te];S[te]=S[S.length-1-te],S[S.length-1-te]=ne}R=d,d=R-P}if(!yt.checkCodewordSkew(P,y,A))return null;let k=Rn.getDecodedValue(S),G=et.getCodeword(k);return G===-1?null:new mi(d,R,yt.getCodewordBucketNumber(k),G)}static getModuleBitCount(i,o,l,h,d,m){let y=d,A=new Int32Array(8),S=0,R=h?1:-1,P=h;for(;(h?y<l:y>=o)&&S<A.length;)i.get(y,m)===P?(A[S]++,y+=R):(S++,P=!P);return S===A.length||y===(h?l:o)&&S===A.length-1?A:null}static getNumberOfECCodeWords(i){return 2<<i}static adjustCodewordStartColumn(i,o,l,h,d,m){let y=d,A=h?-1:1;for(let S=0;S<2;S++){for(;(h?y>=o:y<l)&&h===i.get(y,m);){if(Math.abs(d-y)>yt.CODEWORD_SKEW_SIZE)return d;y+=A}A=-A,h=!h}return y}static checkCodewordSkew(i,o,l){return o-yt.CODEWORD_SKEW_SIZE<=i&&i<=l+yt.CODEWORD_SKEW_SIZE}static decodeCodewords(i,o,l){if(i.length===0)throw j.getFormatInstance();let h=1<<o+1,d=yt.correctErrors(i,l,h);yt.verifyCodewordCount(i,h);let m=xe.decode(i,""+o);return m.setErrorsCorrected(d),m.setErasures(l.length),m}static correctErrors(i,o,l){if(o!=null&&o.length>l/2+yt.MAX_ERRORS||l<0||l>yt.MAX_EC_CODEWORDS)throw B.getChecksumInstance();return yt.errorCorrection.decode(i,l,o)}static verifyCodewordCount(i,o){if(i.length<4)throw j.getFormatInstance();let l=i[0];if(l>i.length)throw j.getFormatInstance();if(l===0)if(o<i.length)i[0]=i.length-o;else throw j.getFormatInstance()}static getBitCountForCodeword(i){let o=new Int32Array(8),l=0,h=o.length-1;for(;!((i&1)!==l&&(l=i&1,h--,h<0));)o[h]++,i>>=1;return o}static getCodewordBucketNumber(i){return i instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(i):this.getCodewordBucketNumber_number(i)}static getCodewordBucketNumber_number(i){return yt.getCodewordBucketNumber(yt.getBitCountForCodeword(i))}static getCodewordBucketNumber_Int32Array(i){return(i[0]-i[2]+i[4]-i[6]+9)%9}static toString(i){let o=new vs;for(let l=0;l<i.length;l++){o.format("Row %2d: ",l);for(let h=0;h<i[l].length;h++){let d=i[l][h];d.getValue().length===0?o.format("        ",null):o.format("%4d(%2d)",d.getValue()[0],d.getConfidence(d.getValue()[0]))}o.format("%n")}return o.toString()}}yt.CODEWORD_SKEW_SIZE=2,yt.MAX_ERRORS=3,yt.MAX_EC_CODEWORDS=512,yt.errorCorrection=new Ui;class Un{decode(i,o=null){let l=Un.decode(i,o,!1);if(l==null||l.length===0||l[0]==null)throw fe.getNotFoundInstance();return l[0]}decodeMultiple(i,o=null){try{return Un.decode(i,o,!0)}catch(l){throw l instanceof j||l instanceof B?fe.getNotFoundInstance():l}}static decode(i,o,l){const h=new Array,d=at.detectMultiple(i,o,l);for(const m of d.getPoints()){const y=yt.decode(d.getBits(),m[4],m[5],m[6],m[7],Un.getMinCodewordWidth(m),Un.getMaxCodewordWidth(m)),A=new je(y.getText(),y.getRawBytes(),void 0,m,Pe.PDF_417);A.putMetadata(vt.ERROR_CORRECTION_LEVEL,y.getECLevel());const S=y.getOther();S!=null&&A.putMetadata(vt.PDF417_EXTRA_METADATA,S),h.push(A)}return h.map(m=>m)}static getMaxWidth(i,o){return i==null||o==null?0:Math.trunc(Math.abs(i.getX()-o.getX()))}static getMinWidth(i,o){return i==null||o==null?Q.MAX_VALUE:Math.trunc(Math.abs(i.getX()-o.getX()))}static getMaxCodewordWidth(i){return Math.floor(Math.max(Math.max(Un.getMaxWidth(i[0],i[4]),Un.getMaxWidth(i[6],i[2])*et.MODULES_IN_CODEWORD/et.MODULES_IN_STOP_PATTERN),Math.max(Un.getMaxWidth(i[1],i[5]),Un.getMaxWidth(i[7],i[3])*et.MODULES_IN_CODEWORD/et.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(i){return Math.floor(Math.min(Math.min(Un.getMinWidth(i[0],i[4]),Un.getMinWidth(i[6],i[2])*et.MODULES_IN_CODEWORD/et.MODULES_IN_STOP_PATTERN),Math.min(Un.getMinWidth(i[1],i[5]),Un.getMinWidth(i[7],i[3])*et.MODULES_IN_CODEWORD/et.MODULES_IN_STOP_PATTERN)))}reset(){}}class ha extends E{}ha.kind="ReaderException";class Jo{constructor(i,o){this.verbose=i===!0,o&&this.setHints(o)}decode(i,o){return o&&this.setHints(o),this.decodeInternal(i)}decodeWithState(i){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(i)}setHints(i){this.hints=i;const o=!s(i)&&i.get(Oe.TRY_HARDER)===!0,l=s(i)?null:i.get(Oe.POSSIBLE_FORMATS),h=new Array;if(!s(l)){const d=l.some(m=>m===Pe.UPC_A||m===Pe.UPC_E||m===Pe.EAN_13||m===Pe.EAN_8||m===Pe.CODABAR||m===Pe.CODE_39||m===Pe.CODE_93||m===Pe.CODE_128||m===Pe.ITF||m===Pe.RSS_14||m===Pe.RSS_EXPANDED);d&&!o&&h.push(new Cr(i,this.verbose)),l.includes(Pe.QR_CODE)&&h.push(new ri),l.includes(Pe.DATA_MATRIX)&&h.push(new Bn),l.includes(Pe.AZTEC)&&h.push(new ts),l.includes(Pe.PDF_417)&&h.push(new Un),d&&o&&h.push(new Cr(i,this.verbose))}h.length===0&&(o||h.push(new Cr(i,this.verbose)),h.push(new ri),h.push(new Bn),h.push(new ts),h.push(new Un),o&&h.push(new Cr(i,this.verbose))),this.readers=h}reset(){if(this.readers!==null)for(const i of this.readers)i.reset()}decodeInternal(i){if(this.readers===null)throw new ha("No readers where selected, nothing can be read.");for(const o of this.readers)try{return o.decode(i,this.hints)}catch(l){if(l instanceof ha)continue}throw new fe("No MultiFormat Readers were able to detect the code.")}}class is extends Ve{constructor(i=null,o=500){const l=new Jo;l.setHints(i),super(l,o)}decodeBitmap(i){return this.reader.decodeWithState(i)}}class Dl extends Ve{constructor(i=500){super(new Un,i)}}class Ml extends Ve{constructor(i=500){super(new ri,i)}}var eo;(function(L){L[L.ERROR_CORRECTION=0]="ERROR_CORRECTION",L[L.CHARACTER_SET=1]="CHARACTER_SET",L[L.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",L[L.MIN_SIZE=3]="MIN_SIZE",L[L.MAX_SIZE=4]="MAX_SIZE",L[L.MARGIN=5]="MARGIN",L[L.PDF417_COMPACT=6]="PDF417_COMPACT",L[L.PDF417_COMPACTION=7]="PDF417_COMPACTION",L[L.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",L[L.AZTEC_LAYERS=9]="AZTEC_LAYERS",L[L.QR_VERSION=10]="QR_VERSION"})(eo||(eo={}));var Vn=eo;class ss{constructor(i){this.field=i,this.cachedGenerators=[],this.cachedGenerators.push(new ln(i,Int32Array.from([1])))}buildGenerator(i){const o=this.cachedGenerators;if(i>=o.length){let l=o[o.length-1];const h=this.field;for(let d=o.length;d<=i;d++){const m=l.multiply(new ln(h,Int32Array.from([1,h.exp(d-1+h.getGeneratorBase())])));o.push(m),l=m}}return o[i]}encode(i,o){if(o===0)throw new I("No error correction bytes");const l=i.length-o;if(l<=0)throw new I("No data bytes provided");const h=this.buildGenerator(o),d=new Int32Array(l);$.arraycopy(i,0,d,0,l);let m=new ln(this.field,d);m=m.multiplyByMonomial(o,1);const A=m.divide(h)[1].getCoefficients(),S=o-A.length;for(let R=0;R<S;R++)i[l+R]=0;$.arraycopy(A,0,i,l+S,A.length)}}class Lt{constructor(){}static applyMaskPenaltyRule1(i){return Lt.applyMaskPenaltyRule1Internal(i,!0)+Lt.applyMaskPenaltyRule1Internal(i,!1)}static applyMaskPenaltyRule2(i){let o=0;const l=i.getArray(),h=i.getWidth(),d=i.getHeight();for(let m=0;m<d-1;m++){const y=l[m];for(let A=0;A<h-1;A++){const S=y[A];S===y[A+1]&&S===l[m+1][A]&&S===l[m+1][A+1]&&o++}}return Lt.N2*o}static applyMaskPenaltyRule3(i){let o=0;const l=i.getArray(),h=i.getWidth(),d=i.getHeight();for(let m=0;m<d;m++)for(let y=0;y<h;y++){const A=l[m];y+6<h&&A[y]===1&&A[y+1]===0&&A[y+2]===1&&A[y+3]===1&&A[y+4]===1&&A[y+5]===0&&A[y+6]===1&&(Lt.isWhiteHorizontal(A,y-4,y)||Lt.isWhiteHorizontal(A,y+7,y+11))&&o++,m+6<d&&l[m][y]===1&&l[m+1][y]===0&&l[m+2][y]===1&&l[m+3][y]===1&&l[m+4][y]===1&&l[m+5][y]===0&&l[m+6][y]===1&&(Lt.isWhiteVertical(l,y,m-4,m)||Lt.isWhiteVertical(l,y,m+7,m+11))&&o++}return o*Lt.N3}static isWhiteHorizontal(i,o,l){o=Math.max(o,0),l=Math.min(l,i.length);for(let h=o;h<l;h++)if(i[h]===1)return!1;return!0}static isWhiteVertical(i,o,l,h){l=Math.max(l,0),h=Math.min(h,i.length);for(let d=l;d<h;d++)if(i[d][o]===1)return!1;return!0}static applyMaskPenaltyRule4(i){let o=0;const l=i.getArray(),h=i.getWidth(),d=i.getHeight();for(let A=0;A<d;A++){const S=l[A];for(let R=0;R<h;R++)S[R]===1&&o++}const m=i.getHeight()*i.getWidth();return Math.floor(Math.abs(o*2-m)*10/m)*Lt.N4}static getDataMaskBit(i,o,l){let h,d;switch(i){case 0:h=l+o&1;break;case 1:h=l&1;break;case 2:h=o%3;break;case 3:h=(l+o)%3;break;case 4:h=Math.floor(l/2)+Math.floor(o/3)&1;break;case 5:d=l*o,h=(d&1)+d%3;break;case 6:d=l*o,h=(d&1)+d%3&1;break;case 7:d=l*o,h=d%3+(l+o&1)&1;break;default:throw new I("Invalid mask pattern: "+i)}return h===0}static applyMaskPenaltyRule1Internal(i,o){let l=0;const h=o?i.getHeight():i.getWidth(),d=o?i.getWidth():i.getHeight(),m=i.getArray();for(let y=0;y<h;y++){let A=0,S=-1;for(let R=0;R<d;R++){const P=o?m[y][R]:m[R][y];P===S?A++:(A>=5&&(l+=Lt.N1+(A-5)),A=1,S=P)}A>=5&&(l+=Lt.N1+(A-5))}return l}}Lt.N1=3,Lt.N2=3,Lt.N3=40,Lt.N4=10;class fa{constructor(i,o){this.width=i,this.height=o;const l=new Array(o);for(let h=0;h!==o;h++)l[h]=new Uint8Array(i);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(i,o){return this.bytes[o][i]}getArray(){return this.bytes}setNumber(i,o,l){this.bytes[o][i]=l}setBoolean(i,o,l){this.bytes[o][i]=l?1:0}clear(i){for(const o of this.bytes)ae.fill(o,i)}equals(i){if(!(i instanceof fa))return!1;const o=i;if(this.width!==o.width||this.height!==o.height)return!1;for(let l=0,h=this.height;l<h;++l){const d=this.bytes[l],m=o.bytes[l];for(let y=0,A=this.width;y<A;++y)if(d[y]!==m[y])return!1}return!0}toString(){const i=new K;for(let o=0,l=this.height;o<l;++o){const h=this.bytes[o];for(let d=0,m=this.width;d<m;++d)switch(h[d]){case 0:i.append(" 0");break;case 1:i.append(" 1");break;default:i.append("  ");break}i.append(`
`)}return i.toString()}}class as{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const i=new K;return i.append(`<<
`),i.append(" mode: "),i.append(this.mode?this.mode.toString():"null"),i.append(`
 ecLevel: `),i.append(this.ecLevel?this.ecLevel.toString():"null"),i.append(`
 version: `),i.append(this.version?this.version.toString():"null"),i.append(`
 maskPattern: `),i.append(this.maskPattern.toString()),this.matrix?(i.append(`
 matrix:
`),i.append(this.matrix.toString())):i.append(`
 matrix: null
`),i.append(`>>
`),i.toString()}setMode(i){this.mode=i}setECLevel(i){this.ecLevel=i}setVersion(i){this.version=i}setMaskPattern(i){this.maskPattern=i}setMatrix(i){this.matrix=i}static isValidMaskPattern(i){return i>=0&&i<as.NUM_MASK_PATTERNS}}as.NUM_MASK_PATTERNS=8;class Pt extends E{}Pt.kind="WriterException";class x{constructor(){}static clearMatrix(i){i.clear(255)}static buildMatrix(i,o,l,h,d){x.clearMatrix(d),x.embedBasicPatterns(l,d),x.embedTypeInfo(o,h,d),x.maybeEmbedVersionInfo(l,d),x.embedDataBits(i,h,d)}static embedBasicPatterns(i,o){x.embedPositionDetectionPatternsAndSeparators(o),x.embedDarkDotAtLeftBottomCorner(o),x.maybeEmbedPositionAdjustmentPatterns(i,o),x.embedTimingPatterns(o)}static embedTypeInfo(i,o,l){const h=new le;x.makeTypeInfoBits(i,o,h);for(let d=0,m=h.getSize();d<m;++d){const y=h.get(h.getSize()-1-d),A=x.TYPE_INFO_COORDINATES[d],S=A[0],R=A[1];if(l.setBoolean(S,R,y),d<8){const P=l.getWidth()-d-1;l.setBoolean(P,8,y)}else{const k=l.getHeight()-7+(d-8);l.setBoolean(8,k,y)}}}static maybeEmbedVersionInfo(i,o){if(i.getVersionNumber()<7)return;const l=new le;x.makeVersionInfoBits(i,l);let h=17;for(let d=0;d<6;++d)for(let m=0;m<3;++m){const y=l.get(h);h--,o.setBoolean(d,o.getHeight()-11+m,y),o.setBoolean(o.getHeight()-11+m,d,y)}}static embedDataBits(i,o,l){let h=0,d=-1,m=l.getWidth()-1,y=l.getHeight()-1;for(;m>0;){for(m===6&&(m-=1);y>=0&&y<l.getHeight();){for(let A=0;A<2;++A){const S=m-A;if(!x.isEmpty(l.get(S,y)))continue;let R;h<i.getSize()?(R=i.get(h),++h):R=!1,o!==255&&Lt.getDataMaskBit(o,S,y)&&(R=!R),l.setBoolean(S,y,R)}y+=d}d=-d,y+=d,m-=2}if(h!==i.getSize())throw new Pt("Not all bits consumed: "+h+"/"+i.getSize())}static findMSBSet(i){return 32-Q.numberOfLeadingZeros(i)}static calculateBCHCode(i,o){if(o===0)throw new I("0 polynomial");const l=x.findMSBSet(o);for(i<<=l-1;x.findMSBSet(i)>=l;)i^=o<<x.findMSBSet(i)-l;return i}static makeTypeInfoBits(i,o,l){if(!as.isValidMaskPattern(o))throw new Pt("Invalid mask pattern");const h=i.getBits()<<3|o;l.appendBits(h,5);const d=x.calculateBCHCode(h,x.TYPE_INFO_POLY);l.appendBits(d,10);const m=new le;if(m.appendBits(x.TYPE_INFO_MASK_PATTERN,15),l.xor(m),l.getSize()!==15)throw new Pt("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(i,o){o.appendBits(i.getVersionNumber(),6);const l=x.calculateBCHCode(i.getVersionNumber(),x.VERSION_INFO_POLY);if(o.appendBits(l,12),o.getSize()!==18)throw new Pt("should not happen but we got: "+o.getSize())}static isEmpty(i){return i===255}static embedTimingPatterns(i){for(let o=8;o<i.getWidth()-8;++o){const l=(o+1)%2;x.isEmpty(i.get(o,6))&&i.setNumber(o,6,l),x.isEmpty(i.get(6,o))&&i.setNumber(6,o,l)}}static embedDarkDotAtLeftBottomCorner(i){if(i.get(8,i.getHeight()-8)===0)throw new Pt;i.setNumber(8,i.getHeight()-8,1)}static embedHorizontalSeparationPattern(i,o,l){for(let h=0;h<8;++h){if(!x.isEmpty(l.get(i+h,o)))throw new Pt;l.setNumber(i+h,o,0)}}static embedVerticalSeparationPattern(i,o,l){for(let h=0;h<7;++h){if(!x.isEmpty(l.get(i,o+h)))throw new Pt;l.setNumber(i,o+h,0)}}static embedPositionAdjustmentPattern(i,o,l){for(let h=0;h<5;++h){const d=x.POSITION_ADJUSTMENT_PATTERN[h];for(let m=0;m<5;++m)l.setNumber(i+m,o+h,d[m])}}static embedPositionDetectionPattern(i,o,l){for(let h=0;h<7;++h){const d=x.POSITION_DETECTION_PATTERN[h];for(let m=0;m<7;++m)l.setNumber(i+m,o+h,d[m])}}static embedPositionDetectionPatternsAndSeparators(i){const o=x.POSITION_DETECTION_PATTERN[0].length;x.embedPositionDetectionPattern(0,0,i),x.embedPositionDetectionPattern(i.getWidth()-o,0,i),x.embedPositionDetectionPattern(0,i.getWidth()-o,i);const l=8;x.embedHorizontalSeparationPattern(0,l-1,i),x.embedHorizontalSeparationPattern(i.getWidth()-l,l-1,i),x.embedHorizontalSeparationPattern(0,i.getWidth()-l,i);const h=7;x.embedVerticalSeparationPattern(h,0,i),x.embedVerticalSeparationPattern(i.getHeight()-h-1,0,i),x.embedVerticalSeparationPattern(h,i.getHeight()-h,i)}static maybeEmbedPositionAdjustmentPatterns(i,o){if(i.getVersionNumber()<2)return;const l=i.getVersionNumber()-1,h=x.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let d=0,m=h.length;d!==m;d++){const y=h[d];if(y>=0)for(let A=0;A!==m;A++){const S=h[A];S>=0&&x.isEmpty(o.get(S,y))&&x.embedPositionAdjustmentPattern(S-2,y-2,o)}}}}x.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),x.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),x.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),x.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),x.VERSION_INFO_POLY=7973,x.TYPE_INFO_POLY=1335,x.TYPE_INFO_MASK_PATTERN=21522;class N{constructor(i,o){this.dataBytes=i,this.errorCorrectionBytes=o}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class D{constructor(){}static calculateMaskPenalty(i){return Lt.applyMaskPenaltyRule1(i)+Lt.applyMaskPenaltyRule2(i)+Lt.applyMaskPenaltyRule3(i)+Lt.applyMaskPenaltyRule4(i)}static encode(i,o,l=null){let h=D.DEFAULT_BYTE_MODE_ENCODING;const d=l!==null&&l.get(Vn.CHARACTER_SET)!==void 0;d&&(h=l.get(Vn.CHARACTER_SET).toString());const m=this.chooseMode(i,h),y=new le;if(m===Je.BYTE&&(d||D.DEFAULT_BYTE_MODE_ENCODING!==h)){const Le=V.getCharacterSetECIByName(h);Le!==void 0&&this.appendECI(Le,y)}this.appendModeInfo(m,y);const A=new le;this.appendBytes(i,m,A,h);let S;if(l!==null&&l.get(Vn.QR_VERSION)!==void 0){const Le=Number.parseInt(l.get(Vn.QR_VERSION).toString(),10);S=Xe.getVersionForNumber(Le);const Re=this.calculateBitsNeeded(m,y,A,S);if(!this.willFit(Re,S,o))throw new Pt("Data too big for requested version")}else S=this.recommendVersion(o,m,y,A);const R=new le;R.appendBitArray(y);const P=m===Je.BYTE?A.getSizeInBytes():i.length;this.appendLengthInfo(P,S,m,R),R.appendBitArray(A);const k=S.getECBlocksForLevel(o),G=S.getTotalCodewords()-k.getTotalECCodewords();this.terminateBits(G,R);const te=this.interleaveWithECBytes(R,S.getTotalCodewords(),G,k.getNumBlocks()),ne=new as;ne.setECLevel(o),ne.setMode(m),ne.setVersion(S);const ue=S.getDimensionForVersion(),ye=new fa(ue,ue),ke=this.chooseMaskPattern(te,o,S,ye);return ne.setMaskPattern(ke),x.buildMatrix(te,o,S,ke,ye),ne.setMatrix(ye),ne}static recommendVersion(i,o,l,h){const d=this.calculateBitsNeeded(o,l,h,Xe.getVersionForNumber(1)),m=this.chooseVersion(d,i),y=this.calculateBitsNeeded(o,l,h,m);return this.chooseVersion(y,i)}static calculateBitsNeeded(i,o,l,h){return o.getSize()+i.getCharacterCountBits(h)+l.getSize()}static getAlphanumericCode(i){return i<D.ALPHANUMERIC_TABLE.length?D.ALPHANUMERIC_TABLE[i]:-1}static chooseMode(i,o=null){if(V.SJIS.getName()===o&&this.isOnlyDoubleByteKanji(i))return Je.KANJI;let l=!1,h=!1;for(let d=0,m=i.length;d<m;++d){const y=i.charAt(d);if(D.isDigit(y))l=!0;else if(this.getAlphanumericCode(y.charCodeAt(0))!==-1)h=!0;else return Je.BYTE}return h?Je.ALPHANUMERIC:l?Je.NUMERIC:Je.BYTE}static isOnlyDoubleByteKanji(i){let o;try{o=Z.encode(i,V.SJIS)}catch{return!1}const l=o.length;if(l%2!==0)return!1;for(let h=0;h<l;h+=2){const d=o[h]&255;if((d<129||d>159)&&(d<224||d>235))return!1}return!0}static chooseMaskPattern(i,o,l,h){let d=Number.MAX_SAFE_INTEGER,m=-1;for(let y=0;y<as.NUM_MASK_PATTERNS;y++){x.buildMatrix(i,o,l,y,h);let A=this.calculateMaskPenalty(h);A<d&&(d=A,m=y)}return m}static chooseVersion(i,o){for(let l=1;l<=40;l++){const h=Xe.getVersionForNumber(l);if(D.willFit(i,h,o))return h}throw new Pt("Data too big")}static willFit(i,o,l){const h=o.getTotalCodewords(),m=o.getECBlocksForLevel(l).getTotalECCodewords(),y=h-m,A=(i+7)/8;return y>=A}static terminateBits(i,o){const l=i*8;if(o.getSize()>l)throw new Pt("data bits cannot fit in the QR Code"+o.getSize()+" > "+l);for(let m=0;m<4&&o.getSize()<l;++m)o.appendBit(!1);const h=o.getSize()&7;if(h>0)for(let m=h;m<8;m++)o.appendBit(!1);const d=i-o.getSizeInBytes();for(let m=0;m<d;++m)o.appendBits((m&1)===0?236:17,8);if(o.getSize()!==l)throw new Pt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(i,o,l,h,d,m){if(h>=l)throw new Pt("Block ID too large");const y=i%l,A=l-y,S=Math.floor(i/l),R=S+1,P=Math.floor(o/l),k=P+1,G=S-P,te=R-k;if(G!==te)throw new Pt("EC bytes mismatch");if(l!==A+y)throw new Pt("RS blocks mismatch");if(i!==(P+G)*A+(k+te)*y)throw new Pt("Total bytes mismatch");h<A?(d[0]=P,m[0]=G):(d[0]=k,m[0]=te)}static interleaveWithECBytes(i,o,l,h){if(i.getSizeInBytes()!==l)throw new Pt("Number of bits and data bytes does not match");let d=0,m=0,y=0;const A=new Array;for(let R=0;R<h;++R){const P=new Int32Array(1),k=new Int32Array(1);D.getNumDataBytesAndNumECBytesForBlockID(o,l,h,R,P,k);const G=P[0],te=new Uint8Array(G);i.toBytes(8*d,te,0,G);const ne=D.generateECBytes(te,k[0]);A.push(new N(te,ne)),m=Math.max(m,G),y=Math.max(y,ne.length),d+=P[0]}if(l!==d)throw new Pt("Data bytes does not match offset");const S=new le;for(let R=0;R<m;++R)for(const P of A){const k=P.getDataBytes();R<k.length&&S.appendBits(k[R],8)}for(let R=0;R<y;++R)for(const P of A){const k=P.getErrorCorrectionBytes();R<k.length&&S.appendBits(k[R],8)}if(o!==S.getSizeInBytes())throw new Pt("Interleaving error: "+o+" and "+S.getSizeInBytes()+" differ.");return S}static generateECBytes(i,o){const l=i.length,h=new Int32Array(l+o);for(let m=0;m<l;m++)h[m]=i[m]&255;new ss(At.QR_CODE_FIELD_256).encode(h,o);const d=new Uint8Array(o);for(let m=0;m<o;m++)d[m]=h[l+m];return d}static appendModeInfo(i,o){o.appendBits(i.getBits(),4)}static appendLengthInfo(i,o,l,h){const d=l.getCharacterCountBits(o);if(i>=1<<d)throw new Pt(i+" is bigger than "+((1<<d)-1));h.appendBits(i,d)}static appendBytes(i,o,l,h){switch(o){case Je.NUMERIC:D.appendNumericBytes(i,l);break;case Je.ALPHANUMERIC:D.appendAlphanumericBytes(i,l);break;case Je.BYTE:D.append8BitBytes(i,l,h);break;case Je.KANJI:D.appendKanjiBytes(i,l);break;default:throw new Pt("Invalid mode: "+o)}}static getDigit(i){return i.charCodeAt(0)-48}static isDigit(i){const o=D.getDigit(i);return o>=0&&o<=9}static appendNumericBytes(i,o){const l=i.length;let h=0;for(;h<l;){const d=D.getDigit(i.charAt(h));if(h+2<l){const m=D.getDigit(i.charAt(h+1)),y=D.getDigit(i.charAt(h+2));o.appendBits(d*100+m*10+y,10),h+=3}else if(h+1<l){const m=D.getDigit(i.charAt(h+1));o.appendBits(d*10+m,7),h+=2}else o.appendBits(d,4),h++}}static appendAlphanumericBytes(i,o){const l=i.length;let h=0;for(;h<l;){const d=D.getAlphanumericCode(i.charCodeAt(h));if(d===-1)throw new Pt;if(h+1<l){const m=D.getAlphanumericCode(i.charCodeAt(h+1));if(m===-1)throw new Pt;o.appendBits(d*45+m,11),h+=2}else o.appendBits(d,6),h++}}static append8BitBytes(i,o,l){let h;try{h=Z.encode(i,l)}catch(d){throw new Pt(d)}for(let d=0,m=h.length;d!==m;d++){const y=h[d];o.appendBits(y,8)}}static appendKanjiBytes(i,o){let l;try{l=Z.encode(i,V.SJIS)}catch(d){throw new Pt(d)}const h=l.length;for(let d=0;d<h;d+=2){const m=l[d]&255,y=l[d+1]&255,A=m<<8&4294967295|y;let S=-1;if(A>=33088&&A<=40956?S=A-33088:A>=57408&&A<=60351&&(S=A-49472),S===-1)throw new Pt("Invalid byte sequence");const R=(S>>8)*192+(S&255);o.appendBits(R,13)}}static appendECI(i,o){o.appendBits(Je.ECI.getBits(),4),o.appendBits(i.getValue(),8)}}D.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),D.DEFAULT_BYTE_MODE_ENCODING=V.UTF8.getName();class F{write(i,o,l,h=null){if(i.length===0)throw new I("Found empty contents");if(o<0||l<0)throw new I("Requested dimensions are too small: "+o+"x"+l);let d=It.L,m=F.QUIET_ZONE_SIZE;h!==null&&(h.get(Vn.ERROR_CORRECTION)!==void 0&&(d=It.fromString(h.get(Vn.ERROR_CORRECTION).toString())),h.get(Vn.MARGIN)!==void 0&&(m=Number.parseInt(h.get(Vn.MARGIN).toString(),10)));const y=D.encode(i,d,h);return this.renderResult(y,o,l,m)}writeToDom(i,o,l,h,d=null){typeof i=="string"&&(i=document.querySelector(i));const m=this.write(o,l,h,d);i&&i.appendChild(m)}renderResult(i,o,l,h){const d=i.getMatrix();if(d===null)throw new ir;const m=d.getWidth(),y=d.getHeight(),A=m+h*2,S=y+h*2,R=Math.max(o,A),P=Math.max(l,S),k=Math.min(Math.floor(R/A),Math.floor(P/S)),G=Math.floor((R-m*k)/2),te=Math.floor((P-y*k)/2),ne=this.createSVGElement(R,P);for(let ue=0,ye=te;ue<y;ue++,ye+=k)for(let ke=0,Le=G;ke<m;ke++,Le+=k)if(d.get(ke,ue)===1){const Re=this.createSvgRectElement(Le,ye,k,k);ne.appendChild(Re)}return ne}createSVGElement(i,o){const l=document.createElementNS(F.SVG_NS,"svg");return l.setAttributeNS(null,"height",i.toString()),l.setAttributeNS(null,"width",o.toString()),l}createSvgRectElement(i,o,l,h){const d=document.createElementNS(F.SVG_NS,"rect");return d.setAttributeNS(null,"x",i.toString()),d.setAttributeNS(null,"y",o.toString()),d.setAttributeNS(null,"height",l.toString()),d.setAttributeNS(null,"width",h.toString()),d.setAttributeNS(null,"fill","#000000"),d}}F.QUIET_ZONE_SIZE=4,F.SVG_NS="http://www.w3.org/2000/svg";class ce{encode(i,o,l,h,d){if(i.length===0)throw new I("Found empty contents");if(o!==Pe.QR_CODE)throw new I("Can only encode QR_CODE, but got "+o);if(l<0||h<0)throw new I(`Requested dimensions are too small: ${l}x${h}`);let m=It.L,y=ce.QUIET_ZONE_SIZE;d!==null&&(d.get(Vn.ERROR_CORRECTION)!==void 0&&(m=It.fromString(d.get(Vn.ERROR_CORRECTION).toString())),d.get(Vn.MARGIN)!==void 0&&(y=Number.parseInt(d.get(Vn.MARGIN).toString(),10)));const A=D.encode(i,m,d);return ce.renderResult(A,l,h,y)}static renderResult(i,o,l,h){const d=i.getMatrix();if(d===null)throw new ir;const m=d.getWidth(),y=d.getHeight(),A=m+h*2,S=y+h*2,R=Math.max(o,A),P=Math.max(l,S),k=Math.min(Math.floor(R/A),Math.floor(P/S)),G=Math.floor((R-m*k)/2),te=Math.floor((P-y*k)/2),ne=new $e(R,P);for(let ue=0,ye=te;ue<y;ue++,ye+=k)for(let ke=0,Le=G;ke<m;ke++,Le+=k)d.get(ke,ue)===1&&ne.setRegion(Le,ye,k,k);return ne}}ce.QUIET_ZONE_SIZE=4;class Ee{encode(i,o,l,h,d){let m;switch(o){case Pe.QR_CODE:m=new ce;break;default:throw new I("No encoder available for format "+o)}return m.encode(i,o,l,h,d)}}class Be extends Ge{constructor(i,o,l,h,d,m,y,A){if(super(m,y),this.yuvData=i,this.dataWidth=o,this.dataHeight=l,this.left=h,this.top=d,h+m>o||d+y>l)throw new I("Crop rectangle does not fit within image data.");A&&this.reverseHorizontal(m,y)}getRow(i,o){if(i<0||i>=this.getHeight())throw new I("Requested row is outside the image: "+i);const l=this.getWidth();(o==null||o.length<l)&&(o=new Uint8ClampedArray(l));const h=(i+this.top)*this.dataWidth+this.left;return $.arraycopy(this.yuvData,h,o,0,l),o}getMatrix(){const i=this.getWidth(),o=this.getHeight();if(i===this.dataWidth&&o===this.dataHeight)return this.yuvData;const l=i*o,h=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return $.arraycopy(this.yuvData,d,h,0,l),h;for(let m=0;m<o;m++){const y=m*i;$.arraycopy(this.yuvData,d,h,y,i),d+=this.dataWidth}return h}isCropSupported(){return!0}crop(i,o,l,h){return new Be(this.yuvData,this.dataWidth,this.dataHeight,this.left+i,this.top+o,l,h,!1)}renderThumbnail(){const i=this.getWidth()/Be.THUMBNAIL_SCALE_FACTOR,o=this.getHeight()/Be.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(i*o),h=this.yuvData;let d=this.top*this.dataWidth+this.left;for(let m=0;m<o;m++){const y=m*i;for(let A=0;A<i;A++){const S=h[d+A*Be.THUMBNAIL_SCALE_FACTOR]&255;l[y+A]=4278190080|S*65793}d+=this.dataWidth*Be.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/Be.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Be.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(i,o){const l=this.yuvData;for(let h=0,d=this.top*this.dataWidth+this.left;h<o;h++,d+=this.dataWidth){const m=d+i/2;for(let y=d,A=d+i-1;y<m;y++,A--){const S=l[y];l[y]=l[A],l[A]=S}}}invert(){return new lt(this)}}Be.THUMBNAIL_SCALE_FACTOR=2;class ft extends Ge{constructor(i,o,l,h,d,m,y){if(super(o,l),this.dataWidth=h,this.dataHeight=d,this.left=m,this.top=y,i.BYTES_PER_ELEMENT===4){const A=o*l,S=new Uint8ClampedArray(A);for(let R=0;R<A;R++){const P=i[R],k=P>>16&255,G=P>>7&510,te=P&255;S[R]=(k+G+te)/4&255}this.luminances=S}else this.luminances=i;if(h===void 0&&(this.dataWidth=o),d===void 0&&(this.dataHeight=l),m===void 0&&(this.left=0),y===void 0&&(this.top=0),this.left+o>this.dataWidth||this.top+l>this.dataHeight)throw new I("Crop rectangle does not fit within image data.")}getRow(i,o){if(i<0||i>=this.getHeight())throw new I("Requested row is outside the image: "+i);const l=this.getWidth();(o==null||o.length<l)&&(o=new Uint8ClampedArray(l));const h=(i+this.top)*this.dataWidth+this.left;return $.arraycopy(this.luminances,h,o,0,l),o}getMatrix(){const i=this.getWidth(),o=this.getHeight();if(i===this.dataWidth&&o===this.dataHeight)return this.luminances;const l=i*o,h=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return $.arraycopy(this.luminances,d,h,0,l),h;for(let m=0;m<o;m++){const y=m*i;$.arraycopy(this.luminances,d,h,y,i),d+=this.dataWidth}return h}isCropSupported(){return!0}crop(i,o,l,h){return new ft(this.luminances,l,h,this.dataWidth,this.dataHeight,this.left+i,this.top+o)}invert(){return new lt(this)}}class jn extends V{static forName(i){return this.getCharacterSetECIByName(i)}}class Qt{}Qt.ISO_8859_1=V.ISO8859_1;class vn{isCompact(){return this.compact}setCompact(i){this.compact=i}getSize(){return this.size}setSize(i){this.size=i}getLayers(){return this.layers}setLayers(i){this.layers=i}getCodeWords(){return this.codeWords}setCodeWords(i){this.codeWords=i}getMatrix(){return this.matrix}setMatrix(i){this.matrix=i}}class pi{static singletonList(i){return[i]}static min(i,o){return i.sort(o)[0]}}class os{constructor(i){this.previous=i}getPrevious(){return this.previous}}class Mr extends os{constructor(i,o,l){super(i),this.value=o,this.bitCount=l}appendTo(i,o){i.appendBits(this.value,this.bitCount)}add(i,o){return new Mr(this,i,o)}addBinaryShift(i,o){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Mr(this,i,o)}toString(){let i=this.value&(1<<this.bitCount)-1;return i|=1<<this.bitCount,"<"+Q.toBinaryString(i|1<<this.bitCount).substring(1)+">"}}class xi extends Mr{constructor(i,o,l){super(i,0,0),this.binaryShiftStart=o,this.binaryShiftByteCount=l}appendTo(i,o){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(i.appendBits(31,5),this.binaryShiftByteCount>62?i.appendBits(this.binaryShiftByteCount-31,16):l===0?i.appendBits(Math.min(this.binaryShiftByteCount,31),5):i.appendBits(this.binaryShiftByteCount-31,5)),i.appendBits(o[this.binaryShiftStart+l],8)}addBinaryShift(i,o){return new xi(this,i,o)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function da(L,i,o){return new xi(L,i,o)}function ls(L,i,o){return new Mr(L,i,o)}const to=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],js=0,Ll=1,vi=2,jc=3,Hi=4,$o=new Mr(null,0,0),ga=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function l0(L){for(let i of L)ae.fill(i,-1);return L[js][Hi]=0,L[Ll][Hi]=0,L[Ll][js]=28,L[jc][Hi]=0,L[vi][Hi]=0,L[vi][js]=15,L}const el=l0(ae.createInt32Array(6,6));class zi{constructor(i,o,l,h){this.token=i,this.mode=o,this.binaryShiftByteCount=l,this.bitCount=h}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(i,o){let l=this.bitCount,h=this.token;if(i!==this.mode){let m=ga[this.mode][i];h=ls(h,m&65535,m>>16),l+=m>>16}let d=i===vi?4:5;return h=ls(h,o,d),new zi(h,i,0,l+d)}shiftAndAppend(i,o){let l=this.token,h=this.mode===vi?4:5;return l=ls(l,el[this.mode][i],h),l=ls(l,o,5),new zi(l,this.mode,0,this.bitCount+h+5)}addBinaryShiftChar(i){let o=this.token,l=this.mode,h=this.bitCount;if(this.mode===Hi||this.mode===vi){let y=ga[l][js];o=ls(o,y&65535,y>>16),h+=y>>16,l=js}let d=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,m=new zi(o,l,this.binaryShiftByteCount+1,h+d);return m.binaryShiftByteCount===2078&&(m=m.endBinaryShift(i+1)),m}endBinaryShift(i){if(this.binaryShiftByteCount===0)return this;let o=this.token;return o=da(o,i-this.binaryShiftByteCount,this.binaryShiftByteCount),new zi(o,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(i){let o=this.bitCount+(ga[this.mode][i.mode]>>16);return this.binaryShiftByteCount<i.binaryShiftByteCount?o+=zi.calculateBinaryShiftCost(i)-zi.calculateBinaryShiftCost(this):this.binaryShiftByteCount>i.binaryShiftByteCount&&i.binaryShiftByteCount>0&&(o+=10),o<=i.bitCount}toBitArray(i){let o=[];for(let h=this.endBinaryShift(i.length).token;h!==null;h=h.getPrevious())o.unshift(h);let l=new le;for(const h of o)h.appendTo(l,i);return l}toString(){return J.format("%s bits=%d bytes=%d",to[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(i){return i.binaryShiftByteCount>62?21:i.binaryShiftByteCount>31?20:i.binaryShiftByteCount>0?10:0}}zi.INITIAL_STATE=new zi($o,js,0,0);function yh(L){const i=J.getCharCode(" "),o=J.getCharCode("."),l=J.getCharCode(",");L[js][i]=1;const h=J.getCharCode("Z"),d=J.getCharCode("A");for(let k=d;k<=h;k++)L[js][k]=k-d+2;L[Ll][i]=1;const m=J.getCharCode("z"),y=J.getCharCode("a");for(let k=y;k<=m;k++)L[Ll][k]=k-y+2;L[vi][i]=1;const A=J.getCharCode("9"),S=J.getCharCode("0");for(let k=S;k<=A;k++)L[vi][k]=k-S+2;L[vi][l]=12,L[vi][o]=13;const R=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let k=0;k<R.length;k++)L[jc][J.getCharCode(R[k])]=k;const P=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let k=0;k<P.length;k++)J.getCharCode(P[k])>0&&(L[Hi][J.getCharCode(P[k])]=k);return L}const tl=yh(ae.createInt32Array(5,256));class ma{constructor(i){this.text=i}encode(){const i=J.getCharCode(" "),o=J.getCharCode(`
`);let l=pi.singletonList(zi.INITIAL_STATE);for(let d=0;d<this.text.length;d++){let m,y=d+1<this.text.length?this.text[d+1]:0;switch(this.text[d]){case J.getCharCode("\r"):m=y===o?2:0;break;case J.getCharCode("."):m=y===i?3:0;break;case J.getCharCode(","):m=y===i?4:0;break;case J.getCharCode(":"):m=y===i?5:0;break;default:m=0}m>0?(l=ma.updateStateListForPair(l,d,m),d++):l=this.updateStateListForChar(l,d)}return pi.min(l,(d,m)=>d.getBitCount()-m.getBitCount()).toBitArray(this.text)}updateStateListForChar(i,o){const l=[];for(let h of i)this.updateStateForChar(h,o,l);return ma.simplifyStates(l)}updateStateForChar(i,o,l){let h=this.text[o]&255,d=tl[i.getMode()][h]>0,m=null;for(let y=0;y<=Hi;y++){let A=tl[y][h];if(A>0){if(m==null&&(m=i.endBinaryShift(o)),!d||y===i.getMode()||y===vi){const S=m.latchAndAppend(y,A);l.push(S)}if(!d&&el[i.getMode()][y]>=0){const S=m.shiftAndAppend(y,A);l.push(S)}}}if(i.getBinaryShiftByteCount()>0||tl[i.getMode()][h]===0){let y=i.addBinaryShiftChar(o);l.push(y)}}static updateStateListForPair(i,o,l){const h=[];for(let d of i)this.updateStateForPair(d,o,l,h);return this.simplifyStates(h)}static updateStateForPair(i,o,l,h){let d=i.endBinaryShift(o);if(h.push(d.latchAndAppend(Hi,l)),i.getMode()!==Hi&&h.push(d.shiftAndAppend(Hi,l)),l===3||l===4){let m=d.latchAndAppend(vi,16-l).latchAndAppend(vi,1);h.push(m)}if(i.getBinaryShiftByteCount()>0){let m=i.addBinaryShiftChar(o).addBinaryShiftChar(o+1);h.push(m)}}static simplifyStates(i){let o=[];for(const l of i){let h=!0;for(const d of o){if(d.isBetterThanOrEqualTo(l)){h=!1;break}l.isBetterThanOrEqualTo(d)&&(o=o.filter(m=>m!==d))}h&&o.push(l)}return o}}class Vt{constructor(){}static encodeBytes(i){return Vt.encode(i,Vt.DEFAULT_EC_PERCENT,Vt.DEFAULT_AZTEC_LAYERS)}static encode(i,o,l){let h=new ma(i).encode(),d=Q.truncDivision(h.getSize()*o,100)+11,m=h.getSize()+d,y,A,S,R,P;if(l!==Vt.DEFAULT_AZTEC_LAYERS){if(y=l<0,A=Math.abs(l),A>(y?Vt.MAX_NB_BITS_COMPACT:Vt.MAX_NB_BITS))throw new I(J.format("Illegal value %s for layers",l));S=Vt.totalBitsInLayer(A,y),R=Vt.WORD_SIZE[A];let Re=S-S%R;if(P=Vt.stuffBits(h,R),P.getSize()+d>Re)throw new I("Data to large for user specified layer");if(y&&P.getSize()>R*64)throw new I("Data to large for user specified layer")}else{R=0,P=null;for(let Re=0;;Re++){if(Re>Vt.MAX_NB_BITS)throw new I("Data too large for an Aztec code");if(y=Re<=3,A=y?Re+1:Re,S=Vt.totalBitsInLayer(A,y),m>S)continue;(P==null||R!==Vt.WORD_SIZE[A])&&(R=Vt.WORD_SIZE[A],P=Vt.stuffBits(h,R));let Ot=S-S%R;if(!(y&&P.getSize()>R*64)&&P.getSize()+d<=Ot)break}}let k=Vt.generateCheckWords(P,S,R),G=P.getSize()/R,te=Vt.generateModeMessage(y,A,G),ne=(y?11:14)+A*4,ue=new Int32Array(ne),ye;if(y){ye=ne;for(let Re=0;Re<ue.length;Re++)ue[Re]=Re}else{ye=ne+1+2*Q.truncDivision(Q.truncDivision(ne,2)-1,15);let Re=Q.truncDivision(ne,2),Ot=Q.truncDivision(ye,2);for(let dt=0;dt<Re;dt++){let Zn=dt+Q.truncDivision(dt,15);ue[Re-dt-1]=Ot-Zn-1,ue[Re+dt]=Ot+Zn+1}}let ke=new $e(ye);for(let Re=0,Ot=0;Re<A;Re++){let dt=(A-Re)*4+(y?9:12);for(let Zn=0;Zn<dt;Zn++){let Si=Zn*2;for(let Vr=0;Vr<2;Vr++)k.get(Ot+Si+Vr)&&ke.set(ue[Re*2+Vr],ue[Re*2+Zn]),k.get(Ot+dt*2+Si+Vr)&&ke.set(ue[Re*2+Zn],ue[ne-1-Re*2-Vr]),k.get(Ot+dt*4+Si+Vr)&&ke.set(ue[ne-1-Re*2-Vr],ue[ne-1-Re*2-Zn]),k.get(Ot+dt*6+Si+Vr)&&ke.set(ue[ne-1-Re*2-Zn],ue[Re*2+Vr])}Ot+=dt*8}if(Vt.drawModeMessage(ke,y,ye,te),y)Vt.drawBullsEye(ke,Q.truncDivision(ye,2),5);else{Vt.drawBullsEye(ke,Q.truncDivision(ye,2),7);for(let Re=0,Ot=0;Re<Q.truncDivision(ne,2)-1;Re+=15,Ot+=16)for(let dt=Q.truncDivision(ye,2)&1;dt<ye;dt+=2)ke.set(Q.truncDivision(ye,2)-Ot,dt),ke.set(Q.truncDivision(ye,2)+Ot,dt),ke.set(dt,Q.truncDivision(ye,2)-Ot),ke.set(dt,Q.truncDivision(ye,2)+Ot)}let Le=new vn;return Le.setCompact(y),Le.setSize(ye),Le.setLayers(A),Le.setCodeWords(G),Le.setMatrix(ke),Le}static drawBullsEye(i,o,l){for(let h=0;h<l;h+=2)for(let d=o-h;d<=o+h;d++)i.set(d,o-h),i.set(d,o+h),i.set(o-h,d),i.set(o+h,d);i.set(o-l,o-l),i.set(o-l+1,o-l),i.set(o-l,o-l+1),i.set(o+l,o-l),i.set(o+l,o-l+1),i.set(o+l,o+l-1)}static generateModeMessage(i,o,l){let h=new le;return i?(h.appendBits(o-1,2),h.appendBits(l-1,6),h=Vt.generateCheckWords(h,28,4)):(h.appendBits(o-1,5),h.appendBits(l-1,11),h=Vt.generateCheckWords(h,40,4)),h}static drawModeMessage(i,o,l,h){let d=Q.truncDivision(l,2);if(o)for(let m=0;m<7;m++){let y=d-3+m;h.get(m)&&i.set(y,d-5),h.get(m+7)&&i.set(d+5,y),h.get(20-m)&&i.set(y,d+5),h.get(27-m)&&i.set(d-5,y)}else for(let m=0;m<10;m++){let y=d-5+m+Q.truncDivision(m,5);h.get(m)&&i.set(y,d-7),h.get(m+10)&&i.set(d+7,y),h.get(29-m)&&i.set(y,d+7),h.get(39-m)&&i.set(d-7,y)}}static generateCheckWords(i,o,l){let h=i.getSize()/l,d=new ss(Vt.getGF(l)),m=Q.truncDivision(o,l),y=Vt.bitsToWords(i,l,m);d.encode(y,m-h);let A=o%l,S=new le;S.appendBits(0,A);for(const R of Array.from(y))S.appendBits(R,l);return S}static bitsToWords(i,o,l){let h=new Int32Array(l),d,m;for(d=0,m=i.getSize()/o;d<m;d++){let y=0;for(let A=0;A<o;A++)y|=i.get(d*o+A)?1<<o-A-1:0;h[d]=y}return h}static getGF(i){switch(i){case 4:return At.AZTEC_PARAM;case 6:return At.AZTEC_DATA_6;case 8:return At.AZTEC_DATA_8;case 10:return At.AZTEC_DATA_10;case 12:return At.AZTEC_DATA_12;default:throw new I("Unsupported word size "+i)}}static stuffBits(i,o){let l=new le,h=i.getSize(),d=(1<<o)-2;for(let m=0;m<h;m+=o){let y=0;for(let A=0;A<o;A++)(m+A>=h||i.get(m+A))&&(y|=1<<o-1-A);(y&d)===d?(l.appendBits(y&d,o),m--):(y&d)===0?(l.appendBits(y|1,o),m--):l.appendBits(y,o)}return l}static totalBitsInLayer(i,o){return((o?88:112)+16*i)*i}}Vt.DEFAULT_EC_PERCENT=33,Vt.DEFAULT_AZTEC_LAYERS=0,Vt.MAX_NB_BITS=32,Vt.MAX_NB_BITS_COMPACT=4,Vt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class nl{encode(i,o,l,h){return this.encodeWithHints(i,o,l,h,null)}encodeWithHints(i,o,l,h,d){let m=Qt.ISO_8859_1,y=Vt.DEFAULT_EC_PERCENT,A=Vt.DEFAULT_AZTEC_LAYERS;return d!=null&&(d.has(Vn.CHARACTER_SET)&&(m=jn.forName(d.get(Vn.CHARACTER_SET).toString())),d.has(Vn.ERROR_CORRECTION)&&(y=Q.parseInt(d.get(Vn.ERROR_CORRECTION).toString())),d.has(Vn.AZTEC_LAYERS)&&(A=Q.parseInt(d.get(Vn.AZTEC_LAYERS).toString()))),nl.encodeLayers(i,o,l,h,m,y,A)}static encodeLayers(i,o,l,h,d,m,y){if(o!==Pe.AZTEC)throw new I("Can only encode AZTEC, but got "+o);let A=Vt.encode(J.getBytes(i,d),m,y);return nl.renderResult(A,l,h)}static renderResult(i,o,l){let h=i.getMatrix();if(h==null)throw new ir;let d=h.getWidth(),m=h.getHeight(),y=Math.max(o,d),A=Math.max(l,m),S=Math.min(y/d,A/m),R=(y-d*S)/2,P=(A-m*S)/2,k=new $e(y,A);for(let G=0,te=P;G<m;G++,te+=S)for(let ne=0,ue=R;ne<d;ne++,ue+=S)h.get(ne,G)&&k.setRegion(ue,te,S,S);return k}}t.AbstractExpandedDecoder=bn,t.ArgumentException=C,t.ArithmeticException=ci,t.AztecCode=vn,t.AztecCodeReader=ts,t.AztecCodeWriter=nl,t.AztecDecoder=qt,t.AztecDetector=Ls,t.AztecDetectorResult=es,t.AztecEncoder=Vt,t.AztecHighLevelEncoder=ma,t.AztecPoint=Kn,t.BarcodeFormat=Pe,t.Binarizer=W,t.BinaryBitmap=M,t.BitArray=le,t.BitMatrix=$e,t.BitSource=Ct,t.BrowserAztecCodeReader=ta,t.BrowserBarcodeReader=ia,t.BrowserCodeReader=Ve,t.BrowserDatamatrixCodeReader=di,t.BrowserMultiFormatReader=is,t.BrowserPDF417Reader=Dl,t.BrowserQRCodeReader=Ml,t.BrowserQRCodeSvgWriter=F,t.CharacterSetECI=V,t.ChecksumException=B,t.Code128Reader=Me,t.Code39Reader=Xt,t.DataMatrixDecodedBitStreamParser=Qn,t.DataMatrixReader=Bn,t.DecodeHintType=Oe,t.DecoderResult=en,t.DefaultGridSampler=Kr,t.DetectorResult=As,t.EAN13Reader=an,t.EncodeHintType=Vn,t.Exception=E,t.FormatException=j,t.GenericGF=At,t.GenericGFPoly=ln,t.GlobalHistogramBinarizer=me,t.GridSampler=ui,t.GridSamplerInstance=sr,t.HTMLCanvasElementLuminanceSource=xt,t.HybridBinarizer=be,t.ITFReader=st,t.IllegalArgumentException=I,t.IllegalStateException=ir,t.InvertedLuminanceSource=lt,t.LuminanceSource=Ge,t.MathUtils=Ze,t.MultiFormatOneDReader=Cr,t.MultiFormatReader=Jo,t.MultiFormatWriter=Ee,t.NotFoundException=fe,t.OneDReader=Yt,t.PDF417DecodedBitStreamParser=xe,t.PDF417DecoderErrorCorrection=Ui,t.PDF417Reader=Un,t.PDF417ResultMetadata=Ss,t.PerspectiveTransform=fr,t.PlanarYUVLuminanceSource=Be,t.QRCodeByteMatrix=fa,t.QRCodeDataMask=or,t.QRCodeDecodedBitStreamParser=cn,t.QRCodeDecoderErrorCorrectionLevel=It,t.QRCodeDecoderFormatInformation=zn,t.QRCodeEncoder=D,t.QRCodeEncoderQRCode=as,t.QRCodeMaskUtil=Lt,t.QRCodeMatrixUtil=x,t.QRCodeMode=Je,t.QRCodeReader=ri,t.QRCodeVersion=Xe,t.QRCodeWriter=ce,t.RGBLuminanceSource=ft,t.RSS14Reader=Kt,t.RSSExpandedReader=Ie,t.ReaderException=ha,t.ReedSolomonDecoder=Wr,t.ReedSolomonEncoder=ss,t.ReedSolomonException=hr,t.Result=je,t.ResultMetadataType=vt,t.ResultPoint=He,t.StringUtils=J,t.UnsupportedOperationException=Y,t.VideoInputDevice=ie,t.WhiteRectangleDetector=mn,t.WriterException=Pt,t.ZXingArrays=ae,t.ZXingCharset=jn,t.ZXingInteger=Q,t.ZXingStandardCharsets=Qt,t.ZXingStringBuilder=K,t.ZXingStringEncoding=Z,t.ZXingSystem=$,t.createAbstractExpandedDecoder=Or,Object.defineProperty(t,"__esModule",{value:!0})}))})(Du,Du.exports)),Du.exports}var Mn=zM();const GM=hm(Mn),qM=YS({__proto__:null,default:GM},[Mn]);var Lw=(function(){function n(e,t,s){if(this.formatMap=new Map([[Ye.QR_CODE,Mn.BarcodeFormat.QR_CODE],[Ye.AZTEC,Mn.BarcodeFormat.AZTEC],[Ye.CODABAR,Mn.BarcodeFormat.CODABAR],[Ye.CODE_39,Mn.BarcodeFormat.CODE_39],[Ye.CODE_93,Mn.BarcodeFormat.CODE_93],[Ye.CODE_128,Mn.BarcodeFormat.CODE_128],[Ye.DATA_MATRIX,Mn.BarcodeFormat.DATA_MATRIX],[Ye.MAXICODE,Mn.BarcodeFormat.MAXICODE],[Ye.ITF,Mn.BarcodeFormat.ITF],[Ye.EAN_13,Mn.BarcodeFormat.EAN_13],[Ye.EAN_8,Mn.BarcodeFormat.EAN_8],[Ye.PDF_417,Mn.BarcodeFormat.PDF_417],[Ye.RSS_14,Mn.BarcodeFormat.RSS_14],[Ye.RSS_EXPANDED,Mn.BarcodeFormat.RSS_EXPANDED],[Ye.UPC_A,Mn.BarcodeFormat.UPC_A],[Ye.UPC_E,Mn.BarcodeFormat.UPC_E],[Ye.UPC_EAN_EXTENSION,Mn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!qM)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=s;var c=this.createZXingFormats(e),f=new Map;f.set(Mn.DecodeHintType.POSSIBLE_FORMATS,c),f.set(Mn.DecodeHintType.TRY_HARDER,!1),this.hints=f}return n.prototype.decodeAsync=function(e){var t=this;return new Promise(function(s,c){try{s(t.decode(e))}catch(f){c(f)}})},n.prototype.decode=function(e){var t=new Mn.MultiFormatReader(this.verbose,this.hints),s=new Mn.HTMLCanvasElementLuminanceSource(e),c=new Mn.BinaryBitmap(new Mn.HybridBinarizer(s)),f=t.decode(c);return{text:f.text,format:vv.create(this.toHtml5QrcodeSupportedFormats(f.format)),debugData:this.createDebugData()}},n.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,s,c){e.set(t,s)}),e},n.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},n.prototype.createZXingFormats=function(e){for(var t=[],s=0,c=e;s<c.length;s++){var f=c[s];this.formatMap.has(f)?t.push(this.formatMap.get(f)):this.logger.logError("".concat(f," is not supported by")+"ZXingHtml5QrcodeShim")}return t},n.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},n})(),YM=function(n,e,t,s){function c(f){return f instanceof t?f:new t(function(p){p(f)})}return new(t||(t=Promise))(function(f,p){function T(C){try{E(s.next(C))}catch(I){p(I)}}function w(C){try{E(s.throw(C))}catch(I){p(I)}}function E(C){C.done?f(C.value):c(C.value).then(T,w)}E((s=s.apply(n,e||[])).next())})},XM=function(n,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},s,c,f,p;return p={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function T(E){return function(C){return w([E,C])}}function w(E){if(s)throw new TypeError("Generator is already executing.");for(;p&&(p=0,E[0]&&(t=0)),t;)try{if(s=1,c&&(f=E[0]&2?c.return:E[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,E[1])).done)return f;switch(c=0,f&&(E=[E[0]&2,f.value]),E[0]){case 0:case 1:f=E;break;case 4:return t.label++,{value:E[1],done:!1};case 5:t.label++,c=E[1],E=[0];continue;case 7:E=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(E[0]===6||E[0]===2)){t=0;continue}if(E[0]===3&&(!f||E[1]>f[0]&&E[1]<f[3])){t.label=E[1];break}if(E[0]===6&&t.label<f[1]){t.label=f[1],f=E;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(E);break}f[2]&&t.ops.pop(),t.trys.pop();continue}E=e.call(n,t)}catch(C){E=[6,C],c=0}finally{s=f=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},Pw=(function(){function n(e,t,s){if(this.formatMap=new Map([[Ye.QR_CODE,"qr_code"],[Ye.AZTEC,"aztec"],[Ye.CODABAR,"codabar"],[Ye.CODE_39,"code_39"],[Ye.CODE_93,"code_93"],[Ye.CODE_128,"code_128"],[Ye.DATA_MATRIX,"data_matrix"],[Ye.ITF,"itf"],[Ye.EAN_13,"ean_13"],[Ye.EAN_8,"ean_8"],[Ye.PDF_417,"pdf417"],[Ye.UPC_A,"upc_a"],[Ye.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!n.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=t,this.logger=s;var c=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(c),!this.detector)throw"BarcodeDetector detector not supported"}return n.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},n.prototype.decodeAsync=function(e){return YM(this,void 0,void 0,function(){var t,s;return XM(this,function(c){switch(c.label){case 0:return[4,this.detector.detect(e)];case 1:if(t=c.sent(),!t||t.length===0)throw"No barcode or QR code detected.";return s=this.selectLargestBarcode(t),[2,{text:s.rawValue,format:vv.create(this.toHtml5QrcodeSupportedFormats(s.format)),debugData:this.createDebugData()}]}})})},n.prototype.selectLargestBarcode=function(e){for(var t=null,s=0,c=0,f=e;c<f.length;c++){var p=f[c],T=p.boundingBox.width*p.boundingBox.height;T>s&&(s=T,t=p)}if(!t)throw"No largest barcode found";return t},n.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],s=0,c=e;s<c.length;s++){var f=c[s];this.formatMap.has(f)?t.push(this.formatMap.get(f)):this.logger.warn("".concat(f," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},n.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},n.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,s,c){e.set(t,s)}),e},n.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},n})(),kw=function(n,e,t,s){function c(f){return f instanceof t?f:new t(function(p){p(f)})}return new(t||(t=Promise))(function(f,p){function T(C){try{E(s.next(C))}catch(I){p(I)}}function w(C){try{E(s.throw(C))}catch(I){p(I)}}function E(C){C.done?f(C.value):c(C.value).then(T,w)}E((s=s.apply(n,e||[])).next())})},Bw=function(n,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},s,c,f,p;return p={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function T(E){return function(C){return w([E,C])}}function w(E){if(s)throw new TypeError("Generator is already executing.");for(;p&&(p=0,E[0]&&(t=0)),t;)try{if(s=1,c&&(f=E[0]&2?c.return:E[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,E[1])).done)return f;switch(c=0,f&&(E=[E[0]&2,f.value]),E[0]){case 0:case 1:f=E;break;case 4:return t.label++,{value:E[1],done:!1};case 5:t.label++,c=E[1],E=[0];continue;case 7:E=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(E[0]===6||E[0]===2)){t=0;continue}if(E[0]===3&&(!f||E[1]>f[0]&&E[1]<f[3])){t.label=E[1];break}if(E[0]===6&&t.label<f[1]){t.label=f[1],f=E;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(E);break}f[2]&&t.ops.pop(),t.trys.pop();continue}E=e.call(n,t)}catch(C){E=[6,C],c=0}finally{s=f=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},WM=(function(){function n(e,t,s,c){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=s,t&&Pw.isSupported()?(this.primaryDecoder=new Pw(e,s,c),this.secondaryDecoder=new Lw(e,s,c)):this.primaryDecoder=new Lw(e,s,c)}return n.prototype.decodeAsync=function(e){return kw(this,void 0,void 0,function(){var t;return Bw(this,function(s){switch(s.label){case 0:t=performance.now(),s.label=1;case 1:return s.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,s.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},n.prototype.decodeRobustlyAsync=function(e){return kw(this,void 0,void 0,function(){var t,s;return Bw(this,function(c){switch(c.label){case 0:t=performance.now(),c.label=1;case 1:return c.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,c.sent()];case 3:if(s=c.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw s;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},n.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},n.prototype.possiblyLogPerformance=function(e){if(this.verbose){var t=performance.now()-e;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},n.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,s=this.executionResults;t<s.length;t++){var c=s[t];e+=c}var f=e/this.executionResults.length;console.log("".concat(f," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},n})(),pp=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(s[f]=c[f])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function s(){this.constructor=e}e.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}})(),Nd=function(n,e,t,s){function c(f){return f instanceof t?f:new t(function(p){p(f)})}return new(t||(t=Promise))(function(f,p){function T(C){try{E(s.next(C))}catch(I){p(I)}}function w(C){try{E(s.throw(C))}catch(I){p(I)}}function E(C){C.done?f(C.value):c(C.value).then(T,w)}E((s=s.apply(n,e||[])).next())})},Rd=function(n,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},s,c,f,p;return p={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function T(E){return function(C){return w([E,C])}}function w(E){if(s)throw new TypeError("Generator is already executing.");for(;p&&(p=0,E[0]&&(t=0)),t;)try{if(s=1,c&&(f=E[0]&2?c.return:E[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,E[1])).done)return f;switch(c=0,f&&(E=[E[0]&2,f.value]),E[0]){case 0:case 1:f=E;break;case 4:return t.label++,{value:E[1],done:!1};case 5:t.label++,c=E[1],E=[0];continue;case 7:E=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(E[0]===6||E[0]===2)){t=0;continue}if(E[0]===3&&(!f||E[1]>f[0]&&E[1]<f[3])){t.label=E[1];break}if(E[0]===6&&t.label<f[1]){t.label=f[1],f=E;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(E);break}f[2]&&t.ops.pop(),t.trys.pop();continue}E=e.call(n,t)}catch(C){E=[6,C],c=0}finally{s=f=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},Cv=(function(){function n(e,t){this.name=e,this.track=t}return n.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},n.prototype.apply=function(e){var t={};t[this.name]=e;var s={advanced:[t]};return this.track.applyConstraints(s)},n.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var t=e[this.name];return t}return null},n})(),KM=(function(n){pp(e,n);function e(t,s){return n.call(this,t,s)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(t){var s={};s[this.name]=t;var c={advanced:[s]};return this.track.applyConstraints(c)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var t=this.track.getCapabilities(),s=t[this.name];return{min:s.min,max:s.max,step:s.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e})(Cv),QM=(function(n){pp(e,n);function e(t){return n.call(this,"zoom",t)||this}return e})(KM),ZM=(function(n){pp(e,n);function e(t){return n.call(this,"torch",t)||this}return e})(Cv),JM=(function(){function n(e){this.track=e}return n.prototype.zoomFeature=function(){return new QM(this.track)},n.prototype.torchFeature=function(){return new ZM(this.track)},n})(),$M=(function(){function n(e,t,s){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=s,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return n.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width="".concat(e,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},n.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var s=e.surface.clientWidth,c=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(s,c),e.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},n.create=function(e,t,s,c){return Nd(this,void 0,void 0,function(){var f,p;return Rd(this,function(T){switch(T.label){case 0:return f=new n(e,t,c),s.aspectRatio?(p={aspectRatio:s.aspectRatio},[4,f.getFirstTrackOrFail().applyConstraints(p)]):[3,2];case 1:T.sent(),T.label=2;case 2:return f.setupSurface(),[2,f]}})})},n.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},n.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},n.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},n.prototype.resume=function(e){this.failIfClosed();var t=this,s=function(){setTimeout(e,200),t.surface.removeEventListener("playing",s)};this.surface.addEventListener("playing",s),this.surface.play()},n.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},n.prototype.getSurface=function(){return this.failIfClosed(),this.surface},n.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},n.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},n.prototype.applyVideoConstraints=function(e){return Nd(this,void 0,void 0,function(){return Rd(this,function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},n.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(t,s){var c=e.mediaStream.getVideoTracks(),f=c.length,p=0;e.mediaStream.getVideoTracks().forEach(function(T){e.mediaStream.removeTrack(T),T.stop(),++p,p>=f&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())})})},n.prototype.getCapabilities=function(){return new JM(this.getFirstTrackOrFail())},n})(),e9=(function(){function n(e){this.mediaStream=e}return n.prototype.render=function(e,t,s){return Nd(this,void 0,void 0,function(){return Rd(this,function(c){return[2,$M.create(e,this.mediaStream,t,s)]})})},n.create=function(e){return Nd(this,void 0,void 0,function(){var t,s;return Rd(this,function(c){switch(c.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return t={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(t)];case 1:return s=c.sent(),[2,new n(s)]}})})},n})(),Uw=function(n,e,t,s){function c(f){return f instanceof t?f:new t(function(p){p(f)})}return new(t||(t=Promise))(function(f,p){function T(C){try{E(s.next(C))}catch(I){p(I)}}function w(C){try{E(s.throw(C))}catch(I){p(I)}}function E(C){C.done?f(C.value):c(C.value).then(T,w)}E((s=s.apply(n,e||[])).next())})},Vw=function(n,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},s,c,f,p;return p={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function T(E){return function(C){return w([E,C])}}function w(E){if(s)throw new TypeError("Generator is already executing.");for(;p&&(p=0,E[0]&&(t=0)),t;)try{if(s=1,c&&(f=E[0]&2?c.return:E[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,E[1])).done)return f;switch(c=0,f&&(E=[E[0]&2,f.value]),E[0]){case 0:case 1:f=E;break;case 4:return t.label++,{value:E[1],done:!1};case 5:t.label++,c=E[1],E=[0];continue;case 7:E=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(E[0]===6||E[0]===2)){t=0;continue}if(E[0]===3&&(!f||E[1]>f[0]&&E[1]<f[3])){t.label=E[1];break}if(E[0]===6&&t.label<f[1]){t.label=f[1],f=E;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(E);break}f[2]&&t.ops.pop(),t.trys.pop();continue}E=e.call(n,t)}catch(C){E=[6,C],c=0}finally{s=f=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},t9=(function(){function n(){}return n.failIfNotSupported=function(){return Uw(this,void 0,void 0,function(){return Vw(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new n]})})},n.prototype.create=function(e){return Uw(this,void 0,void 0,function(){return Vw(this,function(t){return[2,e9.create(e)]})})},n})(),n9=function(n,e,t,s){function c(f){return f instanceof t?f:new t(function(p){p(f)})}return new(t||(t=Promise))(function(f,p){function T(C){try{E(s.next(C))}catch(I){p(I)}}function w(C){try{E(s.throw(C))}catch(I){p(I)}}function E(C){C.done?f(C.value):c(C.value).then(T,w)}E((s=s.apply(n,e||[])).next())})},r9=function(n,e){var t={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},s,c,f,p;return p={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function T(E){return function(C){return w([E,C])}}function w(E){if(s)throw new TypeError("Generator is already executing.");for(;p&&(p=0,E[0]&&(t=0)),t;)try{if(s=1,c&&(f=E[0]&2?c.return:E[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,E[1])).done)return f;switch(c=0,f&&(E=[E[0]&2,f.value]),E[0]){case 0:case 1:f=E;break;case 4:return t.label++,{value:E[1],done:!1};case 5:t.label++,c=E[1],E=[0];continue;case 7:E=t.ops.pop(),t.trys.pop();continue;default:if(f=t.trys,!(f=f.length>0&&f[f.length-1])&&(E[0]===6||E[0]===2)){t=0;continue}if(E[0]===3&&(!f||E[1]>f[0]&&E[1]<f[3])){t.label=E[1];break}if(E[0]===6&&t.label<f[1]){t.label=f[1],f=E;break}if(f&&t.label<f[2]){t.label=f[2],t.ops.push(E);break}f[2]&&t.ops.pop(),t.trys.pop();continue}E=e.call(n,t)}catch(C){E=[6,C],c=0}finally{s=f=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},i9=(function(){function n(){}return n.retrieve=function(){if(navigator.mediaDevices)return n.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?n.getCamerasFromMediaStreamTrack():n.rejectWithError()},n.rejectWithError=function(){var e=pc.unableToQuerySupportedDevices();return n.isHttpsOrLocalhost()||(e=pc.insecureContextCameraQueryError()),Promise.reject(e)},n.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},n.getCamerasFromMediaDevices=function(){return n9(this,void 0,void 0,function(){var e,t,s,c,f,p,T;return r9(this,function(w){switch(w.label){case 0:return e=function(E){for(var C=E.getVideoTracks(),I=0,M=C;I<M.length;I++){var B=M[I];B.enabled=!1,B.stop(),E.removeTrack(B)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=w.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(s=w.sent(),c=[],f=0,p=s;f<p.length;f++)T=p[f],T.kind==="videoinput"&&c.push({id:T.deviceId,label:T.label});return e(t),[2,c]}})})},n.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,t){var s=function(f){for(var p=[],T=0,w=f;T<w.length;T++){var E=w[T];E.kind==="video"&&p.push({id:E.id,label:E.label})}e(p)},c=MediaStreamTrack;c.getSources(s)})},n})(),tr;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.NOT_STARTED=1]="NOT_STARTED",n[n.SCANNING=2]="SCANNING",n[n.PAUSED=3]="PAUSED"})(tr||(tr={}));var s9=(function(){function n(){this.state=tr.NOT_STARTED,this.onGoingTransactionNewState=tr.UNKNOWN}return n.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},n.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},n.prototype.execute=function(){if(this.onGoingTransactionNewState===tr.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=tr.UNKNOWN,this.directTransition(e)},n.prototype.cancel=function(){if(this.onGoingTransactionNewState===tr.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=tr.UNKNOWN},n.prototype.getState=function(){return this.state},n.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==tr.UNKNOWN)throw"Cannot transition to a new state, already under transition"},n.prototype.validateTransition=function(e){switch(this.state){case tr.UNKNOWN:throw"Transition from unknown is not allowed";case tr.NOT_STARTED:this.failIfNewStateIs(e,[tr.PAUSED]);break;case tr.SCANNING:break;case tr.PAUSED:break}},n.prototype.failIfNewStateIs=function(e,t){for(var s=0,c=t;s<c.length;s++){var f=c[s];if(e===f)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},n})(),a9=(function(){function n(e){this.stateManager=e}return n.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},n.prototype.directTransition=function(e){this.stateManager.directTransition(e)},n.prototype.getState=function(){return this.stateManager.getState()},n.prototype.canScanFile=function(){return this.stateManager.getState()===tr.NOT_STARTED},n.prototype.isScanning=function(){return this.stateManager.getState()!==tr.NOT_STARTED},n.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===tr.SCANNING},n.prototype.isPaused=function(){return this.stateManager.getState()===tr.PAUSED},n})(),o9=(function(){function n(){}return n.create=function(){return new a9(new s9)},n})(),l9=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,c){s.__proto__=c}||function(s,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(s[f]=c[f])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function s(){this.constructor=e}e.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}})(),Qi=(function(n){l9(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e})(VM),c9=(function(){function n(e,t){this.logger=t,this.fps=Qi.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Qi.DEFAULT_DISABLE_FLIP}return n.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Sv.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},n.prototype.isShadedBoxEnabled=function(){return!Da(this.qrbox)},n.create=function(e,t){return new n(e,t)},n})(),u9=(function(){function n(e,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var s;typeof t=="boolean"?this.verbose=t===!0:t&&(s=t,this.verbose=s.verbose===!0,s.experimentalFeatures),this.logger=new FM(this.verbose),this.qrcode=new WM(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(s),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=o9.create()}return n.prototype.start=function(e,t,s,c){var f=this;if(!e)throw"cameraIdOrConfig is required";if(!s||typeof s!="function")throw"qrCodeSuccessCallback is required and should be a function.";var p;c?p=c:p=this.verbose?this.logger.log:function(){};var T=c9.create(t,this.logger);this.clearElement();var w=!1;T.videoConstraints&&(T.isMediaStreamConstraintsValid()?w=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var E=w,C=document.getElementById(this.elementId);C.clientWidth?C.clientWidth:Qi.DEFAULT_WIDTH,C.style.position="relative",this.shouldScan=!0,this.element=C;var I=this,M=this.stateManagerProxy.startTransition(tr.SCANNING);return new Promise(function(B,W){var $=E?T.videoConstraints:I.createVideoConstraints(e);if(!$){M.cancel(),W("videoConstraints should be defined");return}var q={};(!E||T.aspectRatio)&&(q.aspectRatio=T.aspectRatio);var _e={onRenderSurfaceReady:function(ae,Q){I.setupUi(ae,Q,T),I.isScanning=!0,I.foreverScan(T,s,p)}};t9.failIfNotSupported().then(function(ae){ae.create($).then(function(Q){return Q.render(f.element,q,_e).then(function(le){I.renderedCamera=le,M.execute(),B(null)}).catch(function(le){M.cancel(),W(le)})}).catch(function(Q){M.cancel(),W(pc.errorGettingUserMedia(Q))})}).catch(function(ae){M.cancel(),W(pc.cameraStreamingNotSupported())})})},n.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(tr.PAUSED),this.showPausedState(),(Da(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},n.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,t=function(){e.stateManagerProxy.directTransition(tr.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){t();return}this.renderedCamera.resume(function(){t()})},n.prototype.getState=function(){return this.stateManagerProxy.getState()},n.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(tr.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var s=function(){if(e.element){var f=document.getElementById(Qi.SHADED_REGION_ELEMENT_ID);f&&e.element.removeChild(f)}},c=this;return this.renderedCamera.close().then(function(){return c.renderedCamera=null,c.element&&(c.element.removeChild(c.canvasElement),c.canvasElement=null),s(),c.qrRegion&&(c.qrRegion=null),c.context&&(c.context=null),t.execute(),c.hidePausedState(),c.isScanning=!1,Promise.resolve()})},n.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then(function(s){return s.decodedText})},n.prototype.scanFileV2=function(e,t){var s=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Da(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(c,f){s.possiblyCloseLastScanImageFile(),s.clearElement(),s.lastScanImageFile=URL.createObjectURL(e);var p=new Image;p.onload=function(){var T=p.width,w=p.height,E=document.getElementById(s.elementId),C=E.clientWidth?E.clientWidth:Qi.DEFAULT_WIDTH,I=Math.max(E.clientHeight?E.clientHeight:w,Qi.FILE_SCAN_MIN_HEIGHT),M=s.computeCanvasDrawConfig(T,w,C,I);if(t){var B=s.createCanvasElement(C,I,"qr-canvas-visible");B.style.display="inline-block",E.appendChild(B);var W=B.getContext("2d");if(!W)throw"Unable to get 2d context from canvas";W.canvas.width=C,W.canvas.height=I,W.drawImage(p,0,0,T,w,M.x,M.y,M.width,M.height)}var $=Qi.FILE_SCAN_HIDDEN_CANVAS_PADDING,q=Math.max(p.width,M.width),_e=Math.max(p.height,M.height),ae=q+2*$,Q=_e+2*$,le=s.createCanvasElement(ae,Q);E.appendChild(le);var De=le.getContext("2d");if(!De)throw"Unable to get 2d context from canvas";De.canvas.width=ae,De.canvas.height=Q,De.drawImage(p,0,0,T,w,$,$,q,_e);try{s.qrcode.decodeRobustlyAsync(le).then(function(Oe){c(Dw.createFromQrcodeResult(Oe))}).catch(f)}catch(Oe){f("QR code parse error, error = ".concat(Oe))}},p.onerror=f,p.onabort=f,p.onstalled=f,p.onsuspend=f,p.src=URL.createObjectURL(e)})},n.prototype.clear=function(){this.clearElement()},n.getCameras=function(){return i9.retrieve()},n.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},n.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},n.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},n.prototype.applyVideoConstraints=function(e){if(e){if(!Sv.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},n.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},n.prototype.getSupportedFormats=function(e){var t=[Ye.QR_CODE,Ye.AZTEC,Ye.CODABAR,Ye.CODE_39,Ye.CODE_93,Ye.CODE_128,Ye.DATA_MATRIX,Ye.MAXICODE,Ye.ITF,Ye.EAN_13,Ye.EAN_8,Ye.PDF_417,Ye.RSS_14,Ye.RSS_EXPANDED,Ye.UPC_A,Ye.UPC_E,Ye.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var s=[],c=0,f=e.formatsToSupport;c<f.length;c++){var p=f[c];UM(p)?s.push(p):this.logger.warn("Invalid format: ".concat(p," passed in config, ignoring."))}if(s.length===0)throw"None of formatsToSupport match supported values.";return s},n.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Da(e))return!0;if(!Da(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(Da(e.experimentalFeatures))return!0;var t=e.experimentalFeatures;return Da(t.useBarCodeDetectorIfSupported)?!0:t.useBarCodeDetectorIfSupported!==!1},n.prototype.validateQrboxSize=function(e,t,s){var c=this,f=s.qrbox;this.validateQrboxConfig(f);var p=this.toQrdimensions(e,t,f),T=function(E){if(E<Qi.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Qi.MIN_QR_BOX_SIZE,"px.")},w=function(E){return E>e&&(c.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),E=e),E};T(p.width),T(p.height),p.width=w(p.width)},n.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},n.prototype.toQrdimensions=function(e,t,s){if(typeof s=="number")return{width:s,height:s};if(typeof s=="function")try{return s(e,t)}catch(c){throw new Error("qrbox config was passed as a function but it failed with unknown error"+c)}return s},n.prototype.setupUi=function(e,t,s){s.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,s);var c=Da(s.qrbox)?{width:e,height:t}:s.qrbox;this.validateQrboxConfig(c);var f=this.toQrdimensions(e,t,c);f.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var p=s.isShadedBoxEnabled()&&f.height<=t,T={x:0,y:0,width:e,height:t},w=p?this.getShadedRegionBounds(e,t,f):T,E=this.createCanvasElement(w.width,w.height),C={willReadFrequently:!0},I=E.getContext("2d",C);I.canvas.width=w.width,I.canvas.height=w.height,this.element.append(E),p&&this.possiblyInsertShadingElement(this.element,e,t,f),this.createScannerPausedUiElement(this.element),this.qrRegion=w,this.context=I,this.canvasElement=E},n.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText=pc.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},n.prototype.scanContext=function(e,t){var s=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(c){return e(c.text,Dw.createFromQrcodeResult(c)),s.possiblyUpdateShaders(!0),!0}).catch(function(c){s.possiblyUpdateShaders(!1);var f=pc.codeParseError(c);return t(f,jM.createFrom(f)),!1})},n.prototype.foreverScan=function(e,t,s){var c=this;if(this.shouldScan&&this.renderedCamera){var f=this.renderedCamera.getSurface(),p=f.videoWidth/f.clientWidth,T=f.videoHeight/f.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var w=this.qrRegion.width*p,E=this.qrRegion.height*T,C=this.qrRegion.x*p,I=this.qrRegion.y*T;this.context.drawImage(f,C,I,w,E,0,0,this.qrRegion.width,this.qrRegion.height);var M=function(){c.foreverScanTimeout=setTimeout(function(){c.foreverScan(e,t,s)},c.getTimeoutFps(e.fps))};this.scanContext(t,s).then(function(B){!B&&e.disableFlip!==!0?(c.context.translate(c.context.canvas.width,0),c.context.scale(-1,1),c.scanContext(t,s).finally(function(){M()})):M()}).catch(function(B){c.logger.logError("Error happend while scanning context",B),M()})}},n.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var t="facingMode",s="deviceId",c={user:!0,environment:!0},f="exact",p=function(W){if(W in c)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(W,"'")},T=Object.keys(e);if(T.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(T.length," keys");var w=Object.keys(e)[0];if(w!==t&&w!==s)throw"Only '".concat(t,"' and '").concat(s,"' ")+" are supported for 'cameraIdOrConfig'";if(w===t){var E=e.facingMode;if(typeof E=="string"){if(p(E))return{facingMode:E}}else if(typeof E=="object")if(f in E){if(p(E["".concat(f)]))return{facingMode:{exact:E["".concat(f)]}}}else throw"'facingMode' should be string or object with"+" ".concat(f," as key.");else{var C=typeof E;throw"Invalid type of 'facingMode' = ".concat(C)}}else{var I=e.deviceId;if(typeof I=="string")return{deviceId:I};if(typeof I=="object"){if(f in I)return{deviceId:{exact:I["".concat(f)]}};throw"'deviceId' should be string or object with"+" ".concat(f," as key.")}else{var M=typeof I;throw"Invalid type of 'deviceId' = ".concat(M)}}}var B=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(B)},n.prototype.computeCanvasDrawConfig=function(e,t,s,c){if(e<=s&&t<=c){var f=(s-e)/2,p=(c-t)/2;return{x:f,y:p,width:e,height:t}}else{var T=e,w=t;return e>s&&(t=s/e*t,e=s),t>c&&(e=c/t*e,t=c),this.logger.log("Image downsampled from "+"".concat(T,"X").concat(w)+" to ".concat(e,"X").concat(t,".")),this.computeCanvasDrawConfig(e,t,s,c)}},n.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},n.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=e?Qi.BORDER_SHADER_MATCH_COLOR:Qi.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},n.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},n.prototype.createCanvasElement=function(e,t,s){var c=e,f=t,p=document.createElement("canvas");return p.style.width="".concat(c,"px"),p.style.height="".concat(f,"px"),p.style.display="none",p.id=Da(s)?"qr-canvas":s,p},n.prototype.getShadedRegionBounds=function(e,t,s){if(s.width>e||s.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-s.width)/2,y:(t-s.height)/2,width:s.width,height:s.height}},n.prototype.possiblyInsertShadingElement=function(e,t,s,c){if(!(t-c.width<1||s-c.height<1)){var f=document.createElement("div");f.style.position="absolute";var p=(t-c.width)/2,T=(s-c.height)/2;if(f.style.borderLeft="".concat(p,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderRight="".concat(p,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderTop="".concat(T,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderBottom="".concat(T,"px solid rgba(0, 0, 0, 0.48)"),f.style.boxSizing="border-box",f.style.top="0px",f.style.bottom="0px",f.style.left="0px",f.style.right="0px",f.id="".concat(Qi.SHADED_REGION_ELEMENT_ID),t-c.width<11||s-c.height<11)this.hasBorderShaders=!1;else{var w=5,E=40;this.insertShaderBorders(f,E,w,-w,null,0,!0),this.insertShaderBorders(f,E,w,-w,null,0,!1),this.insertShaderBorders(f,E,w,null,-w,0,!0),this.insertShaderBorders(f,E,w,null,-w,0,!1),this.insertShaderBorders(f,w,E+w,-w,null,-w,!0),this.insertShaderBorders(f,w,E+w,null,-w,-w,!0),this.insertShaderBorders(f,w,E+w,-w,null,-w,!1),this.insertShaderBorders(f,w,E+w,null,-w,-w,!1),this.hasBorderShaders=!0}e.append(f)}},n.prototype.insertShaderBorders=function(e,t,s,c,f,p,T){var w=document.createElement("div");w.style.position="absolute",w.style.backgroundColor=Qi.BORDER_SHADER_DEFAULT_COLOR,w.style.width="".concat(t,"px"),w.style.height="".concat(s,"px"),c!==null&&(w.style.top="".concat(c,"px")),f!==null&&(w.style.bottom="".concat(f,"px")),T?w.style.left="".concat(p,"px"):w.style.right="".concat(p,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(w),e.appendChild(w)},n.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},n.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},n.prototype.getTimeoutFps=function(e){return 1e3/e},n})(),jw;(function(n){n[n.STATUS_DEFAULT=0]="STATUS_DEFAULT",n[n.STATUS_SUCCESS=1]="STATUS_SUCCESS",n[n.STATUS_WARNING=2]="STATUS_WARNING",n[n.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(jw||(jw={}));const h9=({onRefresh:n})=>{var Mt;const{showAlert:e}=Dc(),[t,s]=re.useState("roster"),[c,f]=re.useState(!1),[p,T]=re.useState([]),[w,E]=re.useState([]),[C,I]=re.useState([]),[M,B]=re.useState([]),[W,$]=re.useState([]),[q,_e]=re.useState([]),[ae,Q]=re.useState([]),[le,De]=re.useState([]),[Oe,j]=re.useState(""),[H,V]=re.useState(new Date().toISOString().substring(0,7)),[Y,Z]=re.useState(""),[J,K]=re.useState([]),[$e,fe]=re.useState([]),[me,be]=re.useState(""),[Ge,lt]=re.useState(null),xt=nr.useRef(p);nr.useEffect(()=>{xt.current=p},[p]);const[ie,Ae]=re.useState(""),[Ve,je]=re.useState(""),[rt,Pe]=re.useState("normal"),[wt,vt]=re.useState(""),[en,kr]=re.useState(!1),[ln,ci]=re.useState(""),[At,hr]=re.useState("100"),[ir,Wr]=re.useState(""),[wn,qt]=re.useState(""),[Ze,An]=re.useState(!1),[He,As]=re.useState(""),[es,mn]=re.useState(""),[ui,fr]=re.useState(""),[Kr,sr]=re.useState(""),[Kn,Ls]=re.useState(""),[ts,ta]=re.useState(""),[Yt,Me]=re.useState(!1),[Xt,st]=re.useState(null),[sn,hi]=re.useState(""),[bs,Qr]=re.useState(""),[bt,an]=re.useState("center"),[Zr,Jr]=re.useState("h-48"),[Cn,Ps]=re.useState("md:h-72"),[Pn,dr]=re.useState(!1),[fi,Br]=re.useState(null),[ki,$r]=re.useState(""),[ns,kn]=re.useState(!1);re.useEffect(()=>{const X=UD(Bn=>{E(Bn.filter(Hn=>Hn.role===ys.STUDENT&&Hn.isApproved)),I(Bn.filter(Hn=>Hn.role===ys.STUDENT&&!Hn.isApproved));const di=Bn.filter(Hn=>Hn.role===ys.STUDENT&&Hn.isApproved);di.length>0&&!ln&&ci(di[0].id)}),Ue=YT(T),Ke=GT(B),St=zT($),Ct=LD(_e),ht=qT(Q),Qn=FT(De),sa=jT(Bn=>{K(Bn),Bn.length>0&&!Kr&&sr(Bn[0].name)}),it=dp(fe);return()=>{X(),Ue(),Ke(),St(),Ct(),ht(),Qn(),sa(),it()}},[ln,Kr]),re.useEffect(()=>{let X=null;return(async()=>{if(t==="scan")try{X=new u9("reader"),await X.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250},aspectRatio:1},Ke=>{Ke&&br(Ke)},()=>{})}catch(Ke){console.error("Unable to start scanner",Ke)}})(),()=>{X&&X.isScanning&&X.stop().then(()=>{X==null||X.clear()}).catch(Ke=>console.error("Failed to stop scanner",Ke))}},[t]);const br=X=>{if(Ge)return;const Ue=xt.current.find(Ke=>Ke.qrCodeData===X&&Ke.status==="pending");Ue&&lt(Ue)},Tr=async X=>{const Ue=me;if(!Ue){e("","error");return}f(!0),setTimeout(()=>{const Ke=p.find(St=>St.qrCodeData===Ue&&St.status==="pending");Ke?(lt(Ke),be("")):e("","error"),f(!1)},800)},Fe=async X=>{Ge&&(await pD(X,"completed"),lt(null),e("","success"))},gr=async()=>{const X=parseInt(At);if(isNaN(X)||!ln)return;const Ue=w.find(Ct=>Ct.id===ln);if(!Ue){e("","error");return}const Ke=parseInt(At);if(isNaN(Ke)||Ke<=0){e("","error");return}const St=w.map(Ct=>Ct.id===ln?{...Ct,points:Ct.points+X,totalEarned:X>0?Ct.totalEarned+X:Ct.totalEarned}:Ct);await hD(St),n(),E(Ct=>Ct.map(ht=>ht.id===ln?{...ht,points:ht.points+Ke}:ht)),hr(""),e(` ${Ue.name} ${Ke} `,"success")},bn=X=>new Promise((Ue,Ke)=>{const St=new FileReader;St.onload=()=>Ue(St.result),St.onerror=Ke,St.readAsDataURL(X)}),Wt=async X=>{var Ke;const Ue=(Ke=X.target.files)==null?void 0:Ke[0];if(Ue){if(Ue.size>500*1024){e(" 500KB ","error");return}try{const St=await bn(Ue);Ls(St),st(St)}catch{e("","error")}}},vr=async X=>{var Ke;const Ue=(Ke=X.target.files)==null?void 0:Ke[0];if(Ue){if(Ue.size>500*1024){e(" 500KB ","error");return}try{const St=await bn(Ue);hi(St),Br(St)}catch{e("","error")}}},Bi=async(X,Ue)=>{const Ke={...X,grade:Ue};await nm(Ke),e(` ${X.name}  ${Ue}`,"success")},Ts=async(X,Ue,Ke)=>{const St=parseInt(Ke);if(isNaN(St))return;const Ct={...X,[Ue]:St};await nm(Ct)},Ur=async X=>{await fD(X),e("","success")},na=async X=>{confirm("/")&&await dD(X)},Ai=async X=>{if(X.preventDefault(),!He||!es||!ui){e("","error");return}if(He&&es){const Ue={id:`prod_${Date.now()}`,name:He,category:Kr,price:parseInt(es),description:ts||`${Kr==="food"?"":Kr==="electronic"?"":Kr==="ticket"?"":""}`,imageUrl:Kn||"https://images.unsplash.com/photo-1553456558-aff63285bdd1?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3",stock:parseInt(ui)||99};await RD(Ue),Me(!1),As(""),mn(""),fr(""),Ls(""),st(null),sr("other"),ta(""),e("","success")}},Sr=async X=>{window.confirm("")&&await OD(X)},pn=async X=>{if(X.preventDefault(),!ie||!Ve){e("","error");return}const Ue={id:`m_${Date.now()}`,title:ie,description:"",points:parseInt(Ve),type:rt,isActive:!0,maxAttempts:1,deadline:wt?new Date(wt).getTime():void 0};await wD(Ue),kr(!1),Ae(""),je(""),Pe("normal"),vt(""),e("","success")},Dt=async X=>{window.confirm("")&&e("","success")},Or=async()=>{if(!wn){e("","error");return}await DD({id:`r_${Date.now()}`,title:wn}),qt(""),An(!1),e("","success")},ar=async X=>{await MD(X)},In=async X=>{await AD(X)},Ie=async(X,Ue)=>{await HT(X,Ue),e("","success")},ra=async X=>{await CD(X),e("","success")},Kt=async X=>{confirm("")&&await ID(X)},Cr=p.filter(X=>{var ht,Qn;const Ue=(((ht=X.productName)==null?void 0:ht.toLowerCase())||"").includes(Oe.toLowerCase())||(((Qn=X.id)==null?void 0:Qn.toLowerCase())||"").includes(Oe.toLowerCase()),Ke=new Date(X.timestamp),Ct=`${Ke.getFullYear()}-${String(Ke.getMonth()+1).padStart(2,"0")}`===H;return Ue&&Ct}),ia=X=>Uo.reduce((Ue,Ke)=>X>=Ke.threshold?Ke:Ue,Uo[0]);return v.jsxs("div",{className:"space-y-8 pb-20 animate-in fade-in duration-500",children:[v.jsx("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:v.jsxs("div",{children:[v.jsxs("h1",{className:"text-4xl font-black text-slate-800 flex items-center gap-4",children:[v.jsx("div",{className:"bg-indigo-600 p-3 rounded-2xl text-white shadow-xl shadow-indigo-100",children:v.jsx(ed,{size:32})}),""]}),v.jsx("p",{className:"text-slate-500 mt-2 italic font-medium",children:""})]})}),v.jsxs("div",{className:"flex bg-white p-2 rounded-3xl border border-slate-100 shadow-md overflow-x-auto gap-2",children:[v.jsxs("button",{onClick:()=>s("roster"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${t==="roster"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[v.jsx(Z3,{size:18})," ",v.jsx("span",{children:""})]}),v.jsxs("button",{onClick:()=>s("approval"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${t==="approval"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50 relative"}`,children:[v.jsx(Ig,{size:18})," ",v.jsx("span",{children:""}),C.length>0&&v.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full text-white text-[10px] flex items-center justify-center border-2 border-white",children:C.length})]}),v.jsxs("button",{onClick:()=>s("points"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${t==="points"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[v.jsx(i3,{size:18})," ",v.jsx("span",{children:""})]}),v.jsxs("button",{onClick:()=>s("products"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${t==="products"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[v.jsx(Sg,{size:18})," ",v.jsx("span",{children:""})]}),v.jsxs("button",{onClick:()=>s("banners"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${t==="banners"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[v.jsx(Uy,{size:18})," ",v.jsx("span",{children:""})]}),v.jsxs("button",{onClick:()=>s("mission_approval"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${t==="mission_approval"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50 relative"}`,children:[v.jsx(zu,{size:18})," ",v.jsx("span",{children:""}),le.filter(X=>X.status==="pending").length>0&&v.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-pink-500 rounded-full text-white text-[10px] flex items-center justify-center border-2 border-white",children:le.filter(X=>X.status==="pending").length})]}),v.jsxs("button",{onClick:()=>s("scan"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${t==="scan"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[v.jsx(Tg,{size:18})," ",v.jsx("span",{children:""})]}),v.jsxs("button",{onClick:()=>s("history"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${t==="history"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[v.jsx($f,{size:18})," ",v.jsx("span",{children:""})]}),v.jsxs("button",{onClick:()=>s("missions"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${t==="missions"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[v.jsx(Mu,{size:18})," ",v.jsx("span",{children:""})]}),v.jsxs("button",{onClick:()=>s("wishes"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${t==="wishes"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50 relative"}`,children:[v.jsx(jf,{size:18})," ",v.jsx("span",{children:""}),ae.length>0&&v.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-pink-500 rounded-full text-white text-[10px] flex items-center justify-center border-2 border-white",children:ae.length})]})]}),t==="roster"&&v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 animate-in slide-in-from-bottom-4",children:w.map(X=>{const Ue=ia(X.totalEarned);return v.jsxs("div",{className:"bg-white rounded-[2.5rem] p-8 border border-slate-100 shadow-sm hover:shadow-xl transition-all group overflow-hidden relative",children:[v.jsx("div",{className:`absolute top-0 right-0 w-24 h-24 ${Ue.color} opacity-5 -translate-y-12 translate-x-12 rounded-full`}),v.jsxs("div",{className:"flex flex-col items-center text-center",children:[v.jsxs("div",{className:"relative mb-6",children:[v.jsx("div",{className:`absolute inset-0 rounded-full blur-xl opacity-20 ${Ue.color}`}),v.jsx("img",{src:X.avatar,className:"w-24 h-24 rounded-full border-4 border-white shadow-2xl relative z-10 object-cover",alt:X.name}),v.jsx("div",{className:"absolute -bottom-2 -right-2 w-10 h-10 rounded-2xl bg-white shadow-lg flex items-center justify-center text-xl z-20 border border-slate-50",children:Ue.icon})]}),v.jsx("h3",{className:"text-2xl font-black text-slate-800 mb-1",children:X.name}),v.jsx("div",{className:`px-4 py-1 rounded-full text-[10px] font-black text-white uppercase tracking-widest mb-2 ${Ue.color} shadow-sm`,children:Ue.name}),v.jsx("div",{className:"mb-6",children:v.jsx("select",{value:X.grade||"",onChange:Ke=>Bi(X,Ke.target.value),className:"text-xs font-bold text-slate-500 bg-slate-50 border border-slate-100 rounded-lg px-2 py-1 outline-none pointer-events-auto",children:tm.map(Ke=>v.jsx("option",{value:Ke,children:Ke},Ke))})}),v.jsxs("div",{className:"w-full grid grid-cols-2 gap-4",children:[v.jsxs("div",{className:"bg-indigo-50/50 p-4 rounded-2xl border border-indigo-50",children:[v.jsx("p",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest mb-1",children:""}),v.jsx("input",{type:"number",defaultValue:X.points,onBlur:Ke=>Ts(X,"points",Ke.target.value),className:"w-full bg-transparent text-xl font-black text-indigo-600 focus:outline-none"})]}),v.jsxs("div",{className:"bg-amber-50/50 p-4 rounded-2xl border border-amber-50",children:[v.jsx("p",{className:"text-[10px] font-black text-amber-400 uppercase tracking-widest mb-1",children:""}),v.jsx("input",{type:"number",defaultValue:X.totalEarned,onBlur:Ke=>Ts(X,"totalEarned",Ke.target.value),className:"w-full bg-transparent text-xl font-black text-amber-600 focus:outline-none"})]})]})]}),v.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-50 flex justify-between items-center gap-4",children:[v.jsxs("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-tighter truncate max-w-[80px]",children:["ID: ",X.id.replace("user_","")]}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsxs("button",{onClick:()=>{ci(X.id),s("points")},className:"text-indigo-600 font-black text-xs hover:underline flex items-center gap-1",children:[v.jsx(By,{size:14})," "]}),v.jsx("button",{onClick:()=>na(X.id),className:"text-slate-300 hover:text-rose-500 transition-colors",title:"",children:v.jsx(vf,{size:16})})]})]})]},X.id)})}),t==="points"&&v.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[v.jsxs("div",{className:"flex items-center gap-6 mb-12",children:[v.jsx("div",{className:"w-20 h-20 bg-emerald-50 text-emerald-600 rounded-3xl flex items-center justify-center shadow-inner",children:v.jsx(By,{size:40})}),v.jsxs("div",{children:[v.jsx("h2",{className:"text-3xl font-black text-slate-800 tracking-tight",children:""}),v.jsx("p",{className:"text-slate-400 font-medium",children:""})]})]}),v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16",children:[v.jsxs("div",{className:"space-y-8",children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("span",{className:"text-[10px] font-bold text-slate-400",children:":"}),v.jsxs("select",{value:Y,onChange:X=>Z(X.target.value),className:"text-[10px] font-bold text-slate-600 bg-slate-50 border border-slate-200 rounded-lg px-2 py-1 outline-none",children:[v.jsx("option",{value:"",children:""}),tm.map(X=>v.jsx("option",{value:X,children:X},X))]})]})]}),v.jsx("div",{className:"grid grid-cols-3 gap-4 max-h-[400px] overflow-y-auto p-2",children:w.filter(X=>Y===""||X.grade===Y).map(X=>v.jsxs("button",{onClick:()=>ci(X.id),className:`flex flex-col items-center gap-3 p-4 rounded-3xl border-2 transition-all ${ln===X.id?"border-indigo-600 bg-indigo-50 shadow-lg shadow-indigo-100":"border-slate-50 bg-slate-50/50 hover:bg-white hover:border-slate-200"}`,children:[v.jsx("img",{src:X.avatar,className:"w-12 h-12 rounded-full shadow-sm",alt:X.name}),v.jsx("span",{className:`font-black text-sm ${ln===X.id?"text-indigo-600":"text-slate-600"}`,children:X.name})]},X.id))})]}),v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),v.jsxs("button",{onClick:()=>An(!Ze),className:"text-xs font-black text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:[Ze?v.jsx(Do,{size:14}):v.jsx(oc,{size:14}),Ze?"":""]})]}),Ze?v.jsxs("div",{className:"bg-slate-50 p-6 rounded-2xl border-2 border-indigo-100 mb-4 animate-in zoom-in-95 duration-200",children:[v.jsxs("div",{className:"flex gap-2",children:[v.jsx("input",{type:"text",placeholder:" (: )",value:wn,onChange:X=>qt(X.target.value),className:"flex-1 p-3 border-2 border-slate-200 rounded-xl focus:border-indigo-600 outline-none font-bold"}),v.jsx("button",{onClick:Or,className:"bg-indigo-600 text-white p-3 rounded-xl hover:bg-indigo-700 shadow-md",children:v.jsx(oc,{size:20})})]}),v.jsx("div",{className:"mt-4 space-y-2 max-h-40 overflow-y-auto pr-2",children:q.map(X=>v.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg border border-slate-100",children:[v.jsx("span",{className:"font-bold text-sm text-slate-700",children:X.title}),v.jsx("button",{onClick:()=>ar(X.id),className:"text-rose-500 hover:text-rose-600",children:v.jsx(vf,{size:16})})]},X.id))})]}):v.jsxs("select",{value:ir,onChange:X=>Wr(X.target.value),className:"w-full p-5 bg-slate-50 border-2 border-transparent rounded-2xl focus:bg-white focus:border-indigo-600 focus:ring-4 focus:ring-indigo-100 transition-all outline-none font-bold text-slate-700 shadow-inner",children:[v.jsx("option",{value:"",children:"..."}),q.length>0?q.map(X=>v.jsx("option",{value:X.title,children:X.title},X.id)):v.jsxs(v.Fragment,{children:[v.jsx("option",{children:""}),v.jsx("option",{children:""}),v.jsx("option",{children:" A++"}),v.jsx("option",{children:""})]}),v.jsx("option",{value:"other",children:""})]}),ir==="other"&&!Ze&&v.jsx("input",{type:"text",placeholder:"...",value:ir==="other"?"":ir,onChange:X=>Wr(X.target.value),className:"w-full mt-4 p-5 bg-white border-2 border-indigo-200 rounded-2xl outline-none font-bold text-slate-700"})]})]}),v.jsxs("div",{className:"space-y-8",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-[0.2em] mb-4",children:""}),v.jsxs("div",{className:"relative",children:[v.jsx("input",{type:"number",value:At,onChange:X=>hr(X.target.value),className:"w-full p-8 text-5xl font-black bg-slate-50 border-2 border-transparent rounded-[2rem] focus:bg-white focus:border-indigo-600 focus:ring-4 focus:ring-indigo-100 transition-all outline-none text-indigo-600 shadow-inner"}),v.jsx("div",{className:"absolute right-8 top-1/2 -translate-y-1/2 flex items-center gap-2 pointer-events-none",children:v.jsx("span",{className:"font-black text-slate-300 text-2xl uppercase tracking-tighter",children:"PTS"})})]})]}),v.jsxs("button",{onClick:gr,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white font-black py-8 rounded-[2rem] transition-all shadow-2xl shadow-emerald-200 flex items-center justify-center gap-4 text-2xl active:scale-95 group",children:[v.jsx(Tu,{size:32,className:"group-hover:scale-125 transition-transform"}),""]})]})]}),t==="approval"&&v.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[v.jsxs("h2",{className:"text-3xl font-black text-slate-800 mb-8 flex items-center gap-3",children:[v.jsx(Ig,{className:"text-indigo-600"}),"",v.jsxs("span",{className:"bg-indigo-100 text-indigo-600 text-sm px-3 py-1 rounded-full",children:[C.length," "]})]}),v.jsx("div",{className:"space-y-4",children:C.length===0?v.jsx("div",{className:"text-center py-20 text-slate-400 font-bold",children:""}):C.map(X=>v.jsxs("div",{className:"flex items-center justify-between p-6 bg-slate-50 rounded-2xl border border-slate-100",children:[v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("div",{className:"w-12 h-12 bg-indigo-200 rounded-full flex items-center justify-center text-indigo-700 font-bold text-xl",children:X.name[0]}),v.jsxs("div",{children:[v.jsx("h3",{className:"font-black text-lg text-slate-800",children:X.name}),v.jsx("p",{className:"text-slate-500 text-sm font-bold",children:X.grade||""})]})]}),v.jsxs("div",{className:"flex gap-3",children:[v.jsx("button",{onClick:()=>Ur(X.id),className:"bg-emerald-500 hover:bg-emerald-600 text-white px-6 py-2 rounded-xl font-bold transition-all shadow-lg shadow-emerald-100",children:""}),v.jsx("button",{onClick:()=>na(X.id),className:"bg-slate-200 hover:bg-rose-500 hover:text-white text-slate-500 px-6 py-2 rounded-xl font-bold transition-all",children:""})]})]},X.id))})]}),t==="products"&&v.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[v.jsxs("div",{className:"flex justify-between items-center mb-8",children:[v.jsxs("h2",{className:"text-3xl font-black text-slate-800 flex items-center gap-3",children:[v.jsx(Sg,{className:"text-indigo-600"})," "]}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsxs("button",{onClick:()=>kn(!ns),className:"bg-slate-100 text-slate-600 px-5 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-slate-200 transition-all border border-slate-200",children:[v.jsx(Mu,{size:18})," "]}),v.jsxs("button",{onClick:()=>Me(!Yt),className:"bg-indigo-600 text-white px-5 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100",children:[v.jsx(oc,{size:20})," "]})]})]}),ns&&v.jsxs("div",{className:"bg-slate-50 p-6 rounded-2xl mb-8 border border-slate-200 animate-in fade-in",children:[v.jsx("h3",{className:"font-black text-slate-700 mb-4",children:""}),v.jsxs("div",{className:"flex gap-4 mb-6",children:[v.jsx("input",{placeholder:" (: )",value:ki,onChange:X=>$r(X.target.value),className:"flex-1 p-3 rounded-xl border border-slate-200 font-bold outline-none"}),v.jsx("button",{onClick:()=>{ki&&(xD(ki),$r(""))},className:"bg-emerald-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-emerald-700",children:""})]}),v.jsx("div",{className:"flex flex-wrap gap-3",children:J.map(X=>v.jsxs("div",{className:"bg-white px-4 py-2 rounded-xl border border-slate-200 flex items-center gap-2 shadow-sm font-bold text-slate-600",children:[X.name,v.jsx("button",{onClick:()=>yD(X.id),className:"text-slate-300 hover:text-rose-500",children:v.jsx(Do,{size:14})})]},X.id))})]}),Yt&&v.jsxs("form",{onSubmit:Ai,className:"bg-slate-50 p-6 rounded-2xl mb-8 border border-slate-200 animate-in fade-in",children:[v.jsx("h3",{className:"font-black text-slate-700 mb-4",children:""}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[v.jsx("input",{placeholder:"",value:He,onChange:X=>As(X.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"}),v.jsxs("select",{value:Kr,onChange:X=>sr(X.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500",children:[J.map(X=>v.jsx("option",{value:X.name,children:X.name},X.id)),J.length===0&&v.jsx("option",{value:"",children:""})]}),v.jsxs("div",{className:"flex flex-col gap-2",children:[v.jsxs("label",{className:"flex items-center justify-center gap-2 p-3 rounded-xl border-2 border-dashed border-slate-300 hover:border-indigo-400 hover:bg-indigo-50 transition-all cursor-pointer font-bold text-slate-500 hover:text-indigo-600",children:[v.jsx(Cg,{size:18}),Kn?"":" (200KB)",v.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:Wt})]}),Xt&&v.jsx("img",{src:Xt,className:"h-20 w-auto object-cover rounded-lg border border-slate-200",alt:"preview"})]}),v.jsx("input",{placeholder:" ()",type:"number",value:es,onChange:X=>mn(X.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"}),v.jsx("textarea",{placeholder:" ()",value:ts,onChange:X=>ta(X.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500 md:col-span-2 h-24"}),v.jsx("input",{placeholder:"",type:"number",value:ui,onChange:X=>fr(X.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"})]}),v.jsxs("div",{className:"flex justify-end gap-2",children:[v.jsx("button",{type:"button",onClick:()=>Me(!1),className:"px-4 py-2 text-slate-400 font-bold hover:text-slate-600",children:""}),v.jsx("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700",children:""})]})]}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:M.map(X=>v.jsxs("div",{className:"border border-slate-100 rounded-[2rem] p-6 flex flex-col gap-4 group hover:shadow-xl transition-all bg-white relative",children:[v.jsxs("div",{className:"flex gap-4 items-center",children:[v.jsx("img",{src:X.imageUrl,alt:X.name,className:"w-20 h-20 rounded-2xl object-cover shadow-sm"}),v.jsxs("div",{className:"flex-1",children:[v.jsx("h4",{className:"font-black text-slate-800 text-lg",children:X.name}),v.jsx("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest",children:X.category}),v.jsxs("p",{className:"text-indigo-600 font-black",children:[X.price," PTS"]})]}),v.jsx("button",{onClick:()=>Sr(X.id),className:"p-2 text-slate-300 hover:text-rose-500 transition-colors",children:v.jsx(vf,{size:18})})]}),v.jsx("div",{className:"flex items-center justify-between pt-4 border-t border-slate-50",children:v.jsxs("div",{className:"flex flex-col",children:[v.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter mb-1",children:""}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("input",{type:"number",defaultValue:X.stock,onBlur:Ue=>Ie(X.id,parseInt(Ue.target.value)||0),className:"w-16 p-2 bg-slate-50 border border-slate-200 rounded-lg text-sm font-black text-slate-700 outline-none focus:ring-2 focus:ring-indigo-500"}),v.jsx("span",{className:`text-[10px] font-black px-2 py-1 rounded-lg ${X.stock>0?"bg-emerald-100 text-emerald-600":"bg-red-100 text-red-600"}`,children:X.stock>0?"ON SALE":"SOLD OUT"})]})]})})]},X.id))})]}),t==="mission_approval"&&v.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[v.jsxs("h2",{className:"text-3xl font-black text-slate-800 mb-8 flex items-center gap-3",children:[v.jsx(zu,{className:"text-emerald-600"}),"",v.jsxs("span",{className:"bg-emerald-100 text-emerald-600 text-sm px-3 py-1 rounded-full",children:[le.filter(X=>X.status==="pending").length," "]})]}),v.jsx("div",{className:"space-y-6",children:le.filter(X=>X.status==="pending").length===0?v.jsx("div",{className:"text-center py-24 text-slate-400 font-bold bg-slate-50 rounded-[3rem] border border-slate-100 border-dashed",children:""}):le.filter(X=>X.status==="pending").map(X=>v.jsxs("div",{className:"bg-slate-50 p-8 rounded-[2.5rem] border border-slate-100 flex flex-col md:flex-row md:items-center justify-between gap-6",children:[v.jsxs("div",{className:"flex items-center gap-6",children:[v.jsx("div",{className:"w-16 h-16 bg-white rounded-2xl shadow-sm flex items-center justify-center text-2xl font-black text-indigo-600 border border-slate-100",children:X.userName[0]}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-xl font-black text-slate-800",children:X.userName}),v.jsxs("p",{className:"text-slate-500 font-bold flex items-center gap-2",children:["",v.jsxs("span",{className:"text-indigo-600",children:["",X.missionTitle,""]})]}),v.jsxs("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest mt-2",children:["",X.points," PTS  ",new Date(X.timestamp).toLocaleString()]})]})]}),v.jsxs("div",{className:"flex gap-4",children:[v.jsxs("button",{onClick:()=>ra(X.id),className:"bg-emerald-600 hover:bg-emerald-700 text-white px-8 py-3 rounded-2xl font-black transition-all shadow-xl shadow-emerald-100 flex items-center gap-2",children:[v.jsx(Tu,{size:20})," "]}),v.jsx("button",{onClick:()=>Kt(X.id),className:"bg-white hover:bg-rose-50 text-slate-400 hover:text-rose-600 px-8 py-3 rounded-2xl font-black transition-all border border-slate-200",children:""})]})]},X.id))})]}),t==="scan"&&v.jsxs("div",{className:"bg-white rounded-[3rem] p-16 border border-slate-100 text-center shadow-xl animate-in fade-in",children:[v.jsx("div",{className:"bg-indigo-50 w-32 h-32 rounded-[2.5rem] flex items-center justify-center mx-auto mb-8 text-indigo-600 shadow-inner",children:v.jsx(Tg,{size:56})}),v.jsx("h2",{className:"text-3xl font-black text-slate-800 mb-4 tracking-tight",children:"QR Code "}),v.jsx("p",{className:"text-slate-400 mb-8 font-medium max-w-md mx-auto leading-relaxed",children:" QR Code "}),v.jsx("div",{className:"max-w-md mx-auto mb-8 overflow-hidden rounded-[2rem] border-4 border-indigo-50 shadow-inner",children:v.jsx("div",{id:"reader",className:"w-full"})}),v.jsxs("div",{className:"max-w-md mx-auto mb-8",children:[v.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[v.jsx("div",{className:"h-px bg-slate-200 flex-1"}),v.jsx("span",{className:"text-[10px] font-black text-slate-300 uppercase tracking-widest",children:""}),v.jsx("div",{className:"h-px bg-slate-200 flex-1"})]}),v.jsx("input",{type:"text",placeholder:" QR Code ...",value:me,onChange:X=>be(X.target.value),className:"w-full p-4 bg-slate-50 border-2 border-indigo-50 rounded-2xl focus:bg-white focus:border-indigo-600 outline-none font-mono text-xs text-slate-500 text-center"})]}),v.jsx("button",{onClick:()=>Tr(),disabled:c,className:"bg-indigo-600 hover:bg-indigo-700 disabled:bg-slate-300 text-white px-16 py-6 rounded-[2rem] font-black transition-all shadow-2xl shadow-indigo-200 inline-flex items-center justify-center gap-4 text-xl active:scale-95",children:c?"...":""})]}),t==="history"&&v.jsxs("section",{className:"bg-white rounded-[3rem] border border-slate-100 shadow-xl overflow-hidden animate-in fade-in",children:[v.jsxs("div",{className:"p-10 border-b border-slate-50 flex flex-col md:flex-row md:items-center justify-between gap-6",children:[v.jsxs("h2",{className:"font-black text-2xl text-slate-800 flex items-center gap-3",children:[v.jsx($f,{className:"text-indigo-600"}),""]}),v.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[v.jsx("div",{className:"relative",children:v.jsx("input",{type:"month",value:H,onChange:X=>V(X.target.value),className:"pl-5 pr-5 py-4 rounded-2xl bg-slate-50 border-2 border-transparent focus:bg-white focus:border-indigo-600 focus:ring-4 focus:ring-indigo-100 transition-all outline-none text-sm font-bold shadow-inner"})}),v.jsxs("div",{className:"relative",children:[v.jsx(S3,{className:"absolute left-5 top-1/2 -translate-y-1/2 text-slate-400",size:20}),v.jsx("input",{type:"text",placeholder:"...",value:Oe,onChange:X=>j(X.target.value),className:"pl-14 pr-8 py-4 rounded-2xl bg-slate-50 border-2 border-transparent focus:bg-white focus:border-indigo-600 focus:ring-4 focus:ring-indigo-100 transition-all outline-none text-sm w-full md:w-80 shadow-inner font-bold"})]})]})]}),v.jsx("div",{className:"overflow-x-auto",children:v.jsxs("table",{className:"w-full",children:[v.jsx("thead",{className:"bg-slate-50/50",children:v.jsxs("tr",{children:[v.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),v.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),v.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),v.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),v.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),v.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""})]})}),v.jsx("tbody",{className:"divide-y divide-slate-50",children:Cr.map(X=>{var Ue;try{return v.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors",children:[v.jsx("td",{className:"px-10 py-6 whitespace-nowrap",children:v.jsx("span",{className:`px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest ${X.status==="completed"?"bg-emerald-100 text-emerald-700":X.status==="pending"?"bg-amber-100 text-amber-700":"bg-rose-100 text-rose-700"}`,children:X.status==="completed"?"":X.status==="pending"?"":""})}),v.jsx("td",{className:"px-10 py-6 whitespace-nowrap font-black text-slate-800",children:((Ue=w.find(Ke=>Ke.id===X.userId))==null?void 0:Ue.name)||""}),v.jsx("td",{className:"px-10 py-6 whitespace-nowrap font-bold text-slate-600",children:X.productName}),v.jsxs("td",{className:"px-10 py-6 whitespace-nowrap text-indigo-600 font-black",children:[X.pointsSpent," PTS"]}),v.jsx("td",{className:"px-10 py-6 whitespace-nowrap text-slate-400 text-sm font-bold",children:X.timestamp?new Date(X.timestamp).toLocaleDateString():""}),v.jsx("td",{className:"px-10 py-6 whitespace-nowrap",children:X.status==="pending"?v.jsx("button",{onClick:()=>Fe(X.id),className:"text-white bg-indigo-600 hover:bg-indigo-700 px-5 py-2.5 rounded-xl text-xs font-black transition-all shadow-xl shadow-indigo-100 active:scale-95",children:""}):v.jsxs("div",{className:"flex items-center gap-2 text-slate-300 font-black text-[10px] tracking-widest",children:[v.jsx(Tu,{size:14})," FINISHED"]})})]},X.id)}catch(Ke){return console.error("Row render error",Ke),null}})})]})})]}),t==="banners"&&v.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[v.jsxs("div",{className:"flex justify-between items-center mb-8",children:[v.jsxs("h2",{className:"text-3xl font-black text-slate-800 flex items-center gap-3",children:[v.jsx(Uy,{className:"text-indigo-600"})," "]}),v.jsxs("button",{onClick:()=>dr(!Pn),className:"bg-indigo-600 text-white px-5 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100",children:[v.jsx(oc,{size:20})," "]})]}),Pn&&v.jsxs("div",{className:"bg-slate-50 p-6 rounded-2xl mb-8 border border-slate-200 animate-in fade-in",children:[v.jsx("h3",{className:"font-black text-slate-700 mb-4",children:""}),v.jsxs("div",{className:"flex flex-col gap-4",children:[v.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-start",children:[v.jsxs("label",{className:"flex-1 w-full flex items-center justify-center gap-2 p-10 rounded-[2rem] border-2 border-dashed border-slate-300 hover:border-indigo-400 hover:bg-indigo-50 transition-all cursor-pointer font-bold text-slate-500 hover:text-indigo-600",children:[v.jsx(Cg,{size:24}),sn?"":" (500KB)",v.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:vr})]}),v.jsxs("div",{className:"w-full md:w-64 space-y-4",children:[v.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-widest",children:" ()"}),v.jsx("input",{list:"banner-tags",value:bs,onChange:X=>Qr(X.target.value),placeholder:"...",className:"w-full p-4 rounded-2xl border-2 border-slate-100 font-bold text-slate-700 outline-none focus:border-indigo-500 transition-all shadow-sm"}),v.jsxs("datalist",{id:"banner-tags",children:[v.jsx("option",{value:""}),v.jsx("option",{value:""}),v.jsx("option",{value:""}),v.jsx("option",{value:""}),v.jsx("option",{value:""})]}),fi&&v.jsx("img",{src:fi,className:"h-32 w-full object-cover rounded-2xl border border-white shadow-lg",alt:"preview"})]})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 w-full",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-widest",children:" (CSS Position)"}),v.jsxs("select",{value:bt,onChange:X=>an(X.target.value),className:"w-full p-4 rounded-2xl border-2 border-slate-100 font-bold text-slate-700 outline-none focus:border-indigo-500 transition-all shadow-sm",children:[v.jsx("option",{value:"center",children:" (Center)"}),v.jsx("option",{value:"top",children:" (Top)"}),v.jsx("option",{value:"bottom",children:" (Bottom)"}),v.jsx("option",{value:"left",children:" (Left)"}),v.jsx("option",{value:"right",children:" (Right)"}),v.jsx("option",{value:"50% 20%",children:" (50% 20%)"})]})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-widest",children:""}),v.jsxs("select",{value:Zr,onChange:X=>Jr(X.target.value),className:"w-full p-4 rounded-2xl border-2 border-slate-100 font-bold text-slate-700 outline-none focus:border-indigo-500 transition-all shadow-sm",children:[v.jsx("option",{value:"h-32",children:" (h-32)"}),v.jsx("option",{value:"h-40",children:" (h-40)"}),v.jsx("option",{value:"h-48",children:" (h-48)"}),v.jsx("option",{value:"h-56",children:" (h-56)"}),v.jsx("option",{value:"h-64",children:" (h-64)"})]})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-widest",children:""}),v.jsxs("select",{value:Cn,onChange:X=>Ps(X.target.value),className:"w-full p-4 rounded-2xl border-2 border-slate-100 font-bold text-slate-700 outline-none focus:border-indigo-500 transition-all shadow-sm",children:[v.jsx("option",{value:"md:h-48",children:" (md:h-48)"}),v.jsx("option",{value:"md:h-64",children:" (md:h-64)"}),v.jsx("option",{value:"md:h-72",children:" (md:h-72)"}),v.jsx("option",{value:"md:h-80",children:" (md:h-80)"}),v.jsx("option",{value:"md:h-96",children:" (md:h-96)"})]})]})]}),v.jsx("button",{onClick:async()=>{sn?(await VD(sn,bs,bt,Zr,Cn),hi(""),Qr(""),an("center"),Jr("h-48"),Ps("md:h-72"),Br(null),dr(!1),e("","success")):e("","error")},className:"bg-emerald-600 text-white px-6 py-4 rounded-2xl font-black text-lg hover:bg-emerald-700 shadow-xl shadow-emerald-100 active:scale-95",children:""})]})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6",children:[$e.map(X=>v.jsxs("div",{className:"relative group rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-all",children:[v.jsx("img",{src:X.imageUrl,alt:"banner",className:"w-full h-48 object-cover"}),v.jsx("div",{className:"absolute top-4 left-4",children:v.jsx("span",{className:"bg-indigo-600/90 backdrop-blur text-white px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-wider shadow-lg",children:X.tag||""})}),v.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-all flex items-center justify-center",children:v.jsx("button",{onClick:async()=>{confirm("")&&(await jD(X.id),e("","success"))},className:"bg-white text-rose-500 px-6 py-2 rounded-xl font-black hover:bg-rose-50",children:" "})})]},X.id)),$e.length===0&&v.jsx("div",{className:"col-span-full py-12 text-center text-slate-400 font-bold bg-slate-50 rounded-2xl border border-slate-200 border-dashed",children:""})]})]}),t==="missions"&&v.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[v.jsxs("div",{className:"flex justify-between items-center mb-8",children:[v.jsxs("h2",{className:"text-3xl font-black text-slate-800 flex items-center gap-3",children:[v.jsx(Mu,{className:"text-indigo-600"})," "]}),v.jsxs("button",{onClick:()=>kr(!en),className:"bg-indigo-600 text-white px-5 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100",children:[v.jsx(oc,{size:18})," "]})]}),en&&v.jsxs("form",{onSubmit:pn,className:"bg-slate-50 p-6 rounded-2xl mb-8 border border-slate-200 animate-in fade-in",children:[v.jsx("h3",{className:"font-black text-slate-700 mb-4",children:""}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[v.jsx("input",{placeholder:"",value:ie,onChange:X=>Ae(X.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"}),v.jsx("input",{placeholder:"",type:"number",value:Ve,onChange:X=>je(X.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"}),v.jsxs("select",{value:rt,onChange:X=>Pe(X.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500",children:[v.jsx("option",{value:"normal",children:""}),v.jsx("option",{value:"challenge",children:""}),v.jsx("option",{value:"hard",children:""})]}),v.jsxs("div",{className:"flex items-center gap-2 p-3 bg-white rounded-xl border border-slate-200",children:[v.jsx(Gu,{size:18,className:"text-slate-400"}),v.jsx("input",{type:"datetime-local",value:wt,onChange:X=>vt(X.target.value),className:"font-bold outline-none text-slate-600 w-full",placeholder:" ()"})]})]}),v.jsxs("div",{className:"flex justify-end gap-3",children:[v.jsx("button",{type:"button",onClick:()=>kr(!1),className:"px-4 py-2 rounded-xl font-bold text-slate-400 hover:bg-slate-200 transition-all",children:""}),v.jsx("button",{type:"submit",className:"bg-indigo-600 text-white px-6 py-2 rounded-xl font-bold hover:bg-indigo-700 transition-all shadow-lg",children:""})]})]}),v.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[W.length===0&&v.jsx("div",{className:"text-center py-12 text-slate-400 font-bold bg-slate-50 rounded-2xl border border-slate-100 border-dashed",children:""}),W.map(X=>v.jsxs("div",{className:`flex flex-col md:flex-row md:items-center justify-between p-6 rounded-2xl border transition-all ${X.isActive?"bg-white border-slate-100 shadow-sm":"bg-slate-50 border-slate-100 opacity-60"}`,children:[v.jsxs("div",{className:"flex items-center gap-4 mb-4 md:mb-0",children:[v.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center font-black text-lg shrink-0 ${X.type==="normal"?"bg-emerald-100 text-emerald-600":X.type==="challenge"?"bg-orange-100 text-orange-600":"bg-rose-100 text-rose-600"}`,children:X.type==="normal"?"N":X.type==="challenge"?"C":"H"}),v.jsxs("div",{children:[v.jsxs("h3",{className:"font-black text-lg text-slate-800 flex items-center gap-2",children:[X.title,!X.isActive&&v.jsx("span",{className:"text-[10px] bg-slate-200 text-slate-500 px-2 py-0.5 rounded-full",children:""})]}),v.jsxs("p",{className:"text-slate-400 text-sm font-bold flex items-center gap-2",children:[v.jsxs("span",{className:"text-indigo-500",children:[X.points," PTS"]}),"  ",X.description,X.deadline&&v.jsxs("span",{className:"flex items-center gap-1 text-amber-500 ml-2",children:[v.jsx(Gu,{size:14})," ",new Date(X.deadline).toLocaleString()," "]})]})]})]}),v.jsx("button",{onClick:()=>In(X.id),className:`px-4 py-2 rounded-xl font-black text-xs transition-all whitespace-nowrap ${X.isActive?"bg-rose-50 text-rose-600 hover:bg-rose-100":"bg-emerald-50 text-emerald-600 hover:bg-emerald-100"}`,children:X.isActive?"":""})]},X.id))]})]}),t==="wishes"&&v.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[v.jsxs("h2",{className:"text-3xl font-black text-slate-800 mb-8 flex items-center gap-3",children:[v.jsx(jf,{className:"text-pink-500"})," "]}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:ae.length===0?v.jsx("div",{className:"col-span-full py-20 text-center text-slate-400 font-bold",children:""}):ae.map(X=>{var Ue;return v.jsxs("div",{className:"bg-slate-50 p-6 rounded-[2.5rem] border border-slate-100 relative group",children:[v.jsx("button",{onClick:()=>Dt(X.id),className:"absolute top-4 right-4 p-2 bg-white rounded-full text-slate-300 hover:text-rose-500 hover:shadow-md transition-all opacity-0 group-hover:opacity-100",children:v.jsx(vf,{size:18})}),v.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[v.jsx("img",{src:X.userAvatar,className:"w-12 h-12 rounded-full border-2 border-white shadow-sm",alt:X.userName}),v.jsxs("div",{children:[v.jsx("h4",{className:"font-black text-slate-800",children:X.userName}),v.jsx("p",{className:"text-[10px] text-slate-400 font-bold",children:new Date(X.timestamp).toLocaleString()})]})]}),v.jsxs("h3",{className:"text-xl font-black text-slate-800 mb-2",children:["",X.itemName]}),v.jsxs("p",{className:"text-slate-500 text-sm mb-6 leading-relaxed italic",children:['"',X.description,'"']}),v.jsxs("div",{className:"flex items-center gap-2 text-pink-500 font-black text-sm",children:[v.jsx(jf,{size:16,fill:"currentColor"})," ",((Ue=X.likedBy)==null?void 0:Ue.length)||0," "]})]},X.id)})})]}),c&&v.jsxs("div",{className:"fixed inset-0 z-[150] bg-slate-900/95 backdrop-blur-xl flex flex-col items-center justify-center p-8",children:[v.jsxs("div",{className:"relative w-full max-w-lg aspect-square border-8 border-white/5 rounded-[5rem] overflow-hidden shadow-[0_0_100px_rgba(79,70,229,0.3)]",children:[v.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-900 via-indigo-900/20 to-slate-900 flex items-center justify-center",children:v.jsxs("div",{className:"text-center",children:[v.jsx(T3,{size:140,className:"mx-auto mb-10 animate-pulse text-indigo-400"}),v.jsx("p",{className:"text-3xl font-black text-white mb-4 tracking-tight",children:"..."}),v.jsx("p",{className:"text-indigo-300 font-bold tracking-widest uppercase text-xs",children:"AI Computer Vision Active"})]})}),v.jsx("div",{className:"absolute top-0 left-0 w-full h-3 bg-indigo-400 shadow-[0_0_50px_rgba(129,140,248,1)] animate-scan-line"})]}),v.jsxs("button",{onClick:()=>f(!1),className:"mt-16 bg-white/5 hover:bg-white/10 text-white px-12 py-5 rounded-[2rem] font-black transition-all border border-white/10 flex items-center gap-4 text-lg backdrop-blur",children:[v.jsx(Do,{size:24})," "]}),v.jsx("style",{children:`
            @keyframes scan-line {
              0% { top: 0% }
              100% { top: 100% }
            }
            .animate-scan-line {
              animation: scan-line 3s linear infinite;
            }
          `})]}),Ge&&v.jsx("div",{className:"fixed inset-0 z-[160] flex items-center justify-center p-4 bg-slate-900/70 backdrop-blur-2xl",children:v.jsxs("div",{className:"bg-white rounded-[4rem] max-w-md w-full p-12 shadow-[0_0_80px_rgba(0,0,0,0.5)] animate-in zoom-in-95 duration-200",children:[v.jsx("div",{className:"bg-emerald-50 w-24 h-24 rounded-[2rem] flex items-center justify-center text-emerald-600 mb-10 mx-auto shadow-inner",children:v.jsx(ed,{size:48})}),v.jsx("h2",{className:"text-3xl font-black text-slate-800 text-center mb-10 tracking-tight",children:""}),v.jsxs("div",{className:"bg-slate-50 rounded-[2.5rem] p-8 space-y-6 mb-12 border border-slate-100 shadow-inner",children:[v.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-slate-200/50",children:[v.jsx("span",{className:"text-slate-400 text-[10px] font-black uppercase tracking-widest",children:""}),v.jsx("span",{className:"font-black text-slate-800 text-xl",children:(Mt=w.find(X=>X.id===Ge.userId))==null?void 0:Mt.name})]}),v.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-slate-200/50",children:[v.jsx("span",{className:"text-slate-400 text-[10px] font-black uppercase tracking-widest",children:""}),v.jsx("span",{className:"font-black text-slate-800 text-xl",children:Ge.productName})]}),v.jsxs("div",{className:"flex justify-between items-center py-2",children:[v.jsx("span",{className:"text-slate-400 text-[10px] font-black uppercase tracking-widest",children:""}),v.jsxs("span",{className:"font-black text-indigo-600 text-2xl",children:[Ge.pointsSpent," ",v.jsx("span",{className:"text-xs font-bold text-indigo-400",children:"PTS"})]})]})]}),v.jsxs("div",{className:"flex flex-col gap-4",children:[v.jsxs("button",{onClick:()=>Fe(Ge.id),className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-6 rounded-2xl transition-all shadow-2xl shadow-indigo-100 flex items-center justify-center gap-4 text-xl active:scale-95",children:[v.jsx(Tu,{size:28}),""]}),v.jsx("button",{onClick:()=>lt(null),className:"w-full bg-slate-100 text-slate-600 font-bold py-5 rounded-2xl hover:bg-slate-200 transition-all text-lg",children:""})]})]})})]})},f9=30,wg=f9*24*60*60*1e3,d9=({user:n,onUserUpdate:e})=>{const{showAlert:t}=Dc(),[s,c]=re.useState([]),[f,p]=re.useState(!1),[T,w]=re.useState(""),[E,C]=re.useState(""),[I,M]=re.useState(null),B=s.filter(ae=>ae.userId===n.id).sort((ae,Q)=>Q.timestamp-ae.timestamp)[0],W=B&&Date.now()-B.timestamp<wg;re.useEffect(()=>{const ae=qT(Q=>{c(Q.sort((le,De)=>De.timestamp-le.timestamp))});return()=>ae()},[]),re.useEffect(()=>{const ae=()=>{if(!B)return null;const le=B.timestamp+wg-Date.now();return le<=0?null:{d:Math.floor(le/864e5),h:Math.floor(le/36e5%24),m:Math.floor(le/1e3/60%60),s:Math.floor(le/1e3%60)}},Q=setInterval(()=>{M(ae())},1e3);return M(ae()),()=>clearInterval(Q)},[B]);const $=async ae=>{if(ae.preventDefault(),!T.trim()||!E.trim())return;const Q={id:`wish_${Date.now()}`,userId:n.id,userName:n.name,userAvatar:n.avatar,itemName:T,description:E,timestamp:Date.now(),likedBy:[]};await PD(Q),p(!1),w(""),C(""),t("","success")},q=async(ae,Q)=>{if(Q!=null&&Q.includes(n.id)){t("","info");return}await BD(ae,n.id)},_e=async()=>{if(n.points<500){t(" 500 ","error");return}if(confirm(" 500 "))try{const Q={...n,points:n.points-500};await Ma(Q),B&&await kD(B.id,{timestamp:Date.now()-(wg+1e5)}),t("","success"),e()}catch{t("","error")}};return v.jsxs("div",{className:"space-y-8 pb-20",children:[v.jsxs("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[v.jsxs("div",{children:[v.jsxs("h1",{className:"text-3xl font-bold text-slate-800 flex items-center gap-3",children:[v.jsx(td,{className:"text-yellow-500"}),""]}),v.jsx("p",{className:"text-slate-500 mt-1",children:""})]}),v.jsxs("button",{onClick:()=>{W?t("","info"):p(!0)},className:`px-6 py-3 rounded-2xl font-black shadow-lg flex flex-col items-center gap-1 transition-all hover:scale-105 min-w-[200px] ${W?"bg-slate-100 text-slate-400 cursor-not-allowed border border-slate-200":"bg-indigo-600 text-white shadow-indigo-100 hover:bg-indigo-700"}`,children:[v.jsxs("div",{className:"flex items-center gap-2",children:[W?v.jsx(Gu,{size:18}):v.jsx(oc,{size:20}),v.jsx("span",{children:W?"":""})]}),W&&I&&v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsxs("span",{className:"text-[10px] font-bold font-mono tracking-tight",children:[I.d," ",I.h," ",I.m," ",I.s,""]}),v.jsxs("button",{onClick:ae=>{ae.stopPropagation(),_e()},className:"mt-2 bg-amber-100 text-amber-700 px-3 py-1 rounded-full text-[10px] font-black flex items-center gap-1 hover:bg-amber-200 transition-colors shadow-sm",children:[v.jsx(ZI,{size:10}),"500 PTS "]})]})]})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.map(ae=>{var Q,le,De,Oe;return v.jsxs("div",{className:"bg-white rounded-[2rem] p-6 border border-slate-100 shadow-sm hover:shadow-md transition-all flex flex-col relative overflow-hidden group",children:[v.jsx("div",{className:"absolute -right-4 -top-4 w-24 h-24 bg-yellow-50 rounded-full blur-2xl group-hover:bg-yellow-100 transition-colors"}),v.jsxs("div",{className:"flex items-center gap-3 mb-4 z-10",children:[v.jsx("img",{src:ae.userAvatar,alt:ae.userName,className:"w-10 h-10 rounded-full border-2 border-white shadow-sm"}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm font-bold text-slate-700",children:ae.userName}),v.jsx("p",{className:"text-xs text-slate-400",children:new Date(ae.timestamp).toLocaleDateString()})]})]}),v.jsx("h3",{className:"text-xl font-black text-slate-800 mb-2 z-10",children:ae.itemName}),v.jsx("p",{className:"text-slate-500 text-sm mb-6 flex-1 z-10",children:ae.description}),v.jsx("div",{className:"flex items-center justify-between pt-4 border-t border-slate-50 z-10",children:v.jsxs("button",{onClick:()=>q(ae.id,ae.likedBy),className:`flex items-center gap-2 transition-colors group/like ${(Q=ae.likedBy)!=null&&Q.includes(n.id)?"text-pink-500":"text-slate-400 hover:text-pink-500"}`,children:[v.jsx("div",{className:`p-2 rounded-full transition-colors ${(le=ae.likedBy)!=null&&le.includes(n.id)?"bg-pink-50":"hover:bg-pink-50"}`,children:v.jsx(F3,{size:18,className:(De=ae.likedBy)!=null&&De.includes(n.id)?"fill-pink-500":""})}),v.jsxs("span",{className:"font-bold text-sm",children:[((Oe=ae.likedBy)==null?void 0:Oe.length)||0," "]})]})})]},ae.id)}),s.length===0&&v.jsxs("div",{className:"col-span-full py-20 text-center space-y-4",children:[v.jsx("div",{className:"w-20 h-20 bg-slate-50 rounded-full flex items-center justify-center mx-auto text-slate-300",children:v.jsx(jf,{size:40})}),v.jsx("p",{className:"text-slate-400 font-bold",children:""})]})]}),f&&v.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:v.jsxs("div",{className:"bg-white rounded-[2.5rem] max-w-lg w-full p-8 shadow-2xl animate-in zoom-in-95 duration-200",children:[v.jsxs("div",{className:"flex justify-between items-center mb-8",children:[v.jsxs("h2",{className:"text-2xl font-black text-slate-800 flex items-center gap-2",children:[v.jsx(td,{className:"text-indigo-500"}),""]}),v.jsx("button",{onClick:()=>p(!1),className:"text-slate-400 hover:text-slate-600 bg-slate-50 p-2 rounded-full",children:v.jsx(Do,{size:24})})]}),v.jsxs("form",{onSubmit:$,className:"space-y-6",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-slate-700 font-bold mb-2 ml-1",children:""}),v.jsx("input",{type:"text",value:T,onChange:ae=>w(ae.target.value),placeholder:"AirPods Pro...",className:"w-full bg-slate-50 border border-slate-200 rounded-2xl px-5 py-4 font-bold text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all placeholder:font-medium",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-slate-700 font-bold mb-2 ml-1",children:""}),v.jsx("textarea",{value:E,onChange:ae=>C(ae.target.value),placeholder:"...",className:"w-full bg-slate-50 border border-slate-200 rounded-2xl px-5 py-4 font-medium text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all h-32 resize-none placeholder:font-medium",required:!0})]}),v.jsxs("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-5 rounded-[1.25rem] transition-all shadow-xl shadow-indigo-100 flex items-center justify-center gap-3 text-lg",children:[v.jsx(I3,{size:24}),""]})]})]})})]})},g9=({onLogin:n})=>{const{showAlert:e}=Dc(),[t,s]=re.useState("student"),[c,f]=re.useState(!1),[p,T]=re.useState(""),[w,E]=re.useState(""),[C,I]=re.useState(""),[M,B]=re.useState(""),[W,$]=re.useState(""),q=async le=>{le.preventDefault();try{const Oe=(await x_()).find(H=>H.name===p);if(!Oe){e("","error");return}if(!Oe.isApproved){e("","info");return}const j=`${Oe.id}@workshop.local`;await pg(yl,j,w),await Ma(Oe),e("","success"),n(Oe)}catch(De){console.error("Login error:",De),De.code==="auth/invalid-credential"||De.code==="auth/wrong-password"?e(" ()","error"):De.code==="auth/user-not-found"?e("","error"):e(`: ${De.message}`,"error")}},_e=async le=>{le.preventDefault();try{if((await x_()).some(Y=>Y.name===p)){e("","error");return}const Oe=p,j=`${Oe}@workshop.local`,H=await qO(yl,j,w);await XO(H.user,{displayName:p});const V={id:Oe,name:p,password:w,grade:C,points:0,totalEarned:0,role:ys.STUDENT,avatar:`https://api.dicebear.com/7.x/avataaars/svg?seed=${p}&mouth=smile&eyebrows=defaultNatural&eyes=default`,isApproved:!1};await Ma(V),await yl.signOut(),e("","success"),f(!1),E("")}catch(De){console.error("Registration error:",De),De.code==="auth/email-already-in-use"?e(" (Email )","error"):e(`: ${De.message}`,"error")}},ae=async le=>{if(le.preventDefault(),M==="0857999")try{await pg(yl,"admin@workshop.local","0857999"),Ma(Df),e("","success"),n(Df)}catch{e(" (admin@workshop.local)","error")}else try{await pg(yl,"admin@workshop.local",M),Ma(Df),e("","success"),n(Df)}catch{e("","error")}},Q=async le=>{if(le.preventDefault(),W.toLowerCase()==="aaa")try{await FO(yl),Ma(p_),e("","success"),n(p_)}catch(De){console.error("Guest login error:",De),De.code==="auth/admin-restricted-operation"?e(" Console  Anonymous","error"):e("","error")}else e("","error")};return v.jsx("div",{className:"min-h-screen bg-[#f8fafc] flex items-center justify-center p-4",children:v.jsxs("div",{className:"bg-white max-w-4xl w-full rounded-[3rem] shadow-2xl overflow-hidden flex flex-col md:flex-row min-h-[600px]",children:[v.jsxs("div",{className:"bg-indigo-600 p-12 text-white md:w-5/12 flex flex-col justify-between relative overflow-hidden",children:[v.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-500 rounded-full -translate-y-1/2 translate-x-1/3 opacity-50"}),v.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-indigo-700 rounded-full translate-y-1/3 -translate-x-1/3 opacity-50"}),v.jsxs("div",{className:"relative z-10",children:[v.jsx("div",{className:"bg-white w-16 h-16 rounded-2xl flex items-center justify-center p-2 mb-6 shadow-xl",children:v.jsx("img",{src:"/wenhong_cramschool/wenhong_logo.jpg",className:"w-full h-full rounded-xl object-cover",alt:"logo"})}),v.jsx("h1",{className:"text-4xl font-black tracking-tight mb-4",children:""}),v.jsx("p",{className:"text-indigo-100 font-medium text-lg leading-relaxed",children:""})]}),v.jsx("div",{className:"relative z-10 text-sm font-medium text-indigo-200",children:" 2026 Workshop System"})]}),v.jsxs("div",{className:"p-8 md:p-12 md:w-7/12 flex flex-col",children:[!c&&v.jsxs("div",{className:"flex gap-2 mb-10 overflow-x-auto pb-2",children:[v.jsxs("button",{onClick:()=>s("student"),className:`flex-1 min-w-[100px] py-3 rounded-xl font-bold text-sm transition-all flex flex-col items-center gap-1 ${t==="student"?"bg-indigo-50 text-indigo-600 ring-2 ring-indigo-500 ring-offset-2":"bg-slate-50 text-slate-400 hover:bg-slate-100"}`,children:[v.jsx(K3,{size:18})," "]}),v.jsxs("button",{onClick:()=>s("admin"),className:`flex-1 min-w-[100px] py-3 rounded-xl font-bold text-sm transition-all flex flex-col items-center gap-1 ${t==="admin"?"bg-indigo-50 text-indigo-600 ring-2 ring-indigo-500 ring-offset-2":"bg-slate-50 text-slate-400 hover:bg-slate-100"}`,children:[v.jsx(ed,{size:18})," "]}),v.jsxs("button",{onClick:()=>s("guest"),className:`flex-1 min-w-[100px] py-3 rounded-xl font-bold text-sm transition-all flex flex-col items-center gap-1 ${t==="guest"?"bg-indigo-50 text-indigo-600 ring-2 ring-500 ring-offset-2":"bg-slate-50 text-slate-400 hover:bg-slate-100"}`,children:[v.jsx($I,{size:18})," "]})]}),!c&&t==="student"&&v.jsxs("form",{onSubmit:q,className:"space-y-6 flex-1 flex flex-col justify-center animate-in fade-in slide-in-from-right-4 duration-300",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-1",children:""}),v.jsx("p",{className:"text-slate-400",children:""})]}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),v.jsx("input",{type:"text",value:p,onChange:le=>T(le.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:""})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),v.jsx("input",{type:"password",value:w,onChange:le=>E(le.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:""})]})]}),v.jsx("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-4 rounded-2xl shadow-xl shadow-indigo-100 transition-all active:scale-95",children:""}),v.jsx("div",{className:"text-center",children:v.jsx("button",{type:"button",onClick:()=>f(!0),className:"text-indigo-500 font-bold hover:underline",children:""})})]}),c&&v.jsxs("form",{onSubmit:_e,className:"space-y-6 flex-1 flex flex-col justify-center animate-in fade-in slide-in-from-right-4 duration-300",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-1",children:""}),v.jsx("p",{className:"text-slate-400",children:""})]}),v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),v.jsx("input",{type:"text",value:p,onChange:le=>T(le.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:"",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),v.jsx("input",{type:"password",value:w,onChange:le=>E(le.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:"",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),v.jsx("select",{value:C,onChange:le=>I(le.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl px-5 py-4 font-bold text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all appearance-none",children:tm.map(le=>v.jsx("option",{value:le,children:le},le))})]})]}),v.jsxs("button",{type:"submit",className:"w-full bg-slate-800 hover:bg-slate-900 text-white font-black py-4 rounded-2xl shadow-xl transition-all active:scale-95 flex items-center justify-center gap-2",children:[v.jsx(Ig,{size:20}),""]}),v.jsx("div",{className:"text-center",children:v.jsx("button",{type:"button",onClick:()=>f(!1),className:"text-slate-400 font-bold hover:text-slate-600",children:""})})]}),!c&&t==="admin"&&v.jsxs("form",{onSubmit:ae,className:"space-y-6 flex-1 flex flex-col justify-center animate-in fade-in slide-in-from-right-4 duration-300",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-1",children:""}),v.jsx("p",{className:"text-slate-400",children:""})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),v.jsx("input",{type:"password",value:M,onChange:le=>B(le.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:"..."})]}),v.jsx("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-4 rounded-2xl shadow-xl shadow-indigo-100 transition-all active:scale-95",children:""})]}),!c&&t==="guest"&&v.jsxs("form",{onSubmit:Q,className:"space-y-6 flex-1 flex flex-col justify-center animate-in fade-in slide-in-from-right-4 duration-300",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-1",children:""}),v.jsx("p",{className:"text-slate-400",children:""})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),v.jsx("input",{type:"text",value:W,onChange:le=>$(le.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:"..."})]}),v.jsx("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-4 rounded-2xl shadow-xl shadow-indigo-100 transition-all active:scale-95",children:""})]})]})]})})},m9=({user:n,currentRank:e,onSwitchUser:t})=>{const s=qo(),[c,f]=re.useState(!1),p=[{path:"/",label:"",icon:u3},{path:"/shop",label:"",icon:M3},{path:"/wishes",label:"",icon:td},{path:"/history",label:"",icon:$f}];return n.role===ys.ADMIN&&p.push({path:"/admin",label:"",icon:ed}),v.jsxs("nav",{className:"bg-white border-r border-slate-200 w-full md:w-64 md:fixed md:inset-y-0 h-auto md:h-full z-50 shadow-sm",children:[v.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("img",{src:"/wenhong_cramschool/wenhong_logo.jpg",className:"w-8 h-8 rounded-lg shadow-sm object-cover",alt:"logo"}),v.jsx("span",{className:"text-xl font-bold text-slate-800 tracking-tight",children:""})]}),v.jsx("button",{onClick:()=>f(!c),className:"md:hidden text-slate-600",children:c?v.jsx(Do,{}):v.jsx(p3,{})})]}),v.jsx("div",{className:`${c?"block":"hidden"} md:block p-4 space-y-2`,children:p.map(T=>{const w=T.icon,E=s.pathname===T.path;return v.jsxs(Jf,{to:T.path,onClick:()=>f(!1),className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 ${E?"bg-indigo-50 text-indigo-700 font-bold shadow-sm":"text-slate-600 hover:bg-slate-50"}`,children:[v.jsx(w,{size:20}),v.jsx("span",{children:T.label})]},T.path)})}),v.jsxs("div",{className:`${c?"block":"hidden"} md:block absolute bottom-0 w-full p-6 border-t border-slate-100 bg-white`,children:[v.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[v.jsx("img",{src:n.avatar,className:"w-10 h-10 rounded-full border-2 border-slate-100 object-cover",alt:"avatar"}),v.jsxs("div",{className:"overflow-hidden",children:[v.jsx("p",{className:"font-bold text-slate-800 truncate text-sm",children:n.name}),v.jsxs("div",{className:`text-[9px] px-2 py-0.5 rounded-full inline-block text-white font-black ${e.color}`,children:[e.icon," ",e.name," Lv.",Math.floor(n.totalEarned/500)+1]})]})]}),v.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-indigo-600 hover:text-indigo-800 transition-colors text-xs font-bold w-full bg-indigo-50 p-2 rounded-lg justify-center mb-2",children:[v.jsx(f3,{size:14}),v.jsx("span",{children:""})]}),v.jsxs(Jf,{to:"/settings",className:"flex items-center gap-2 text-slate-400 hover:text-slate-600 transition-colors text-xs font-bold w-full p-2 justify-center",children:[v.jsx(R3,{size:14}),v.jsx("span",{children:""})]})]})]})},p9=()=>{const[n,e]=re.useState(y_()),t=n?Uo.reduce((f,p)=>n.totalEarned>=p.threshold?p:f,Uo[0]):Uo[0],s=()=>{const f=y_();f&&e(f)},c=()=>{gD(),e(null)};return v.jsx($3,{children:n?v.jsx(vI,{children:v.jsxs("div",{className:"min-h-screen flex flex-col md:flex-row bg-[#fbfcfd]",children:[v.jsx(m9,{user:n,currentRank:t,onSwitchUser:c}),v.jsx("main",{className:"flex-1 md:ml-64 p-4 md:p-8",children:v.jsx("div",{className:"max-w-6xl mx-auto",children:v.jsxs(tI,{children:[v.jsx(pl,{path:"/",element:v.jsx(SM,{user:n,rank:t,onUserUpdate:s})}),v.jsx(pl,{path:"/shop",element:v.jsx(CM,{user:n,onUserUpdate:s})}),v.jsx(pl,{path:"/wishes",element:v.jsx(d9,{user:n,onUserUpdate:s})}),v.jsx(pl,{path:"/history",element:v.jsx(BM,{user:n})}),v.jsx(pl,{path:"/admin",element:v.jsx(h9,{onRefresh:s})}),v.jsx(pl,{path:"/settings",element:v.jsx(FD,{user:n,onUserUpdate:s})})]})})})]})}):v.jsx(g9,{onLogin:e})})},Iv=document.getElementById("root");if(!Iv)throw new Error("Could not find root element to mount to");const x9=rC.createRoot(Iv),y9=()=>v.jsxs(v.Fragment,{children:[v.jsx(p9,{}),!1]});x9.render(v.jsx(nr.StrictMode,{children:v.jsx(y9,{})}));
