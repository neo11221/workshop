function w3(r,e){for(var n=0;n<e.length;n++){const o=e[n];if(typeof o!="string"&&!Array.isArray(o)){for(const u in o)if(u!=="default"&&!(u in r)){const d=Object.getOwnPropertyDescriptor(o,u);d&&Object.defineProperty(r,u,d.get?d:{enumerable:!0,get:()=>o[u]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const y of d.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&o(y)}).observe(document,{childList:!0,subtree:!0});function n(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(u){if(u.ep)return;u.ep=!0;const d=n(u);fetch(u.href,d)}})();var Mh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Q1(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var z0={exports:{}},Fc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q2;function A3(){if(Q2)return Fc;Q2=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(o,u,d){var y=null;if(d!==void 0&&(y=""+d),u.key!==void 0&&(y=""+u.key),"key"in u){d={};for(var T in u)T!=="key"&&(d[T]=u[T])}else d=u;return u=d.ref,{$$typeof:r,type:o,key:y,ref:u!==void 0?u:null,props:d}}return Fc.Fragment=e,Fc.jsx=n,Fc.jsxs=n,Fc}var Z2;function b3(){return Z2||(Z2=1,z0.exports=A3()),z0.exports}var v=b3(),H0={exports:{}},pt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J2;function v3(){if(J2)return pt;J2=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),y=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),M=Symbol.iterator;function V(re){return re===null||typeof re!="object"?null:(re=M&&re[M]||re["@@iterator"],typeof re=="function"?re:null)}var K={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,q={};function le(re,Ae,Be){this.props=re,this.context=Ae,this.refs=q,this.updater=Be||K}le.prototype.isReactComponent={},le.prototype.setState=function(re,Ae){if(typeof re!="object"&&typeof re!="function"&&re!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,re,Ae,"setState")},le.prototype.forceUpdate=function(re){this.updater.enqueueForceUpdate(this,re,"forceUpdate")};function ae(){}ae.prototype=le.prototype;function ee(re,Ae,Be){this.props=re,this.context=Ae,this.refs=q,this.updater=Be||K}var fe=ee.prototype=new ae;fe.constructor=ee,W(fe,le.prototype),fe.isPureReactComponent=!0;var je=Array.isArray;function De(){}var z={H:null,A:null,T:null,S:null},U=Object.prototype.hasOwnProperty;function j(re,Ae,Be){var ke=Be.ref;return{$$typeof:r,type:re,key:Ae,ref:ke!==void 0?ke:null,props:Be}}function $(re,Ae){return j(re.type,Ae,re.props)}function Q(re){return typeof re=="object"&&re!==null&&re.$$typeof===r}function Z(re){var Ae={"=":"=0",":":"=2"};return"$"+re.replace(/[=:]/g,function(Be){return Ae[Be]})}var X=/\/+/g;function We(re,Ae){return typeof re=="object"&&re!==null&&re.key!=null?Z(""+re.key):Ae.toString(36)}function de(re){switch(re.status){case"fulfilled":return re.value;case"rejected":throw re.reason;default:switch(typeof re.status=="string"?re.then(De,De):(re.status="pending",re.then(function(Ae){re.status==="pending"&&(re.status="fulfilled",re.value=Ae)},function(Ae){re.status==="pending"&&(re.status="rejected",re.reason=Ae)})),re.status){case"fulfilled":return re.value;case"rejected":throw re.reason}}throw re}function pe(re,Ae,Be,ke,nt){var Me=typeof re;(Me==="undefined"||Me==="boolean")&&(re=null);var _t=!1;if(re===null)_t=!0;else switch(Me){case"bigint":case"string":case"number":_t=!0;break;case"object":switch(re.$$typeof){case r:case e:_t=!0;break;case S:return _t=re._init,pe(_t(re._payload),Ae,Be,ke,nt)}}if(_t)return nt=nt(re),_t=ke===""?"."+We(re,0):ke,je(nt)?(Be="",_t!=null&&(Be=_t.replace(X,"$&/")+"/"),pe(nt,Ae,Be,"",function(Dr){return Dr})):nt!=null&&(Q(nt)&&(nt=$(nt,Be+(nt.key==null||re&&re.key===nt.key?"":(""+nt.key).replace(X,"$&/")+"/")+_t)),Ae.push(nt)),1;_t=0;var Ct=ke===""?".":ke+":";if(je(re))for(var Jt=0;Jt<re.length;Jt++)ke=re[Jt],Me=Ct+We(ke,Jt),_t+=pe(ke,Ae,Be,Me,nt);else if(Jt=V(re),typeof Jt=="function")for(re=Jt.call(re),Jt=0;!(ke=re.next()).done;)ke=ke.value,Me=Ct+We(ke,Jt++),_t+=pe(ke,Ae,Be,Me,nt);else if(Me==="object"){if(typeof re.then=="function")return pe(de(re),Ae,Be,ke,nt);throw Ae=String(re),Error("Objects are not valid as a React child (found: "+(Ae==="[object Object]"?"object with keys {"+Object.keys(re).join(", ")+"}":Ae)+"). If you meant to render a collection of children, use an array instead.")}return _t}function be(re,Ae,Be){if(re==null)return re;var ke=[],nt=0;return pe(re,ke,"","",function(Me){return Ae.call(Be,Me,nt++)}),ke}function He(re){if(re._status===-1){var Ae=re._result;Ae=Ae(),Ae.then(function(Be){(re._status===0||re._status===-1)&&(re._status=1,re._result=Be)},function(Be){(re._status===0||re._status===-1)&&(re._status=2,re._result=Be)}),re._status===-1&&(re._status=0,re._result=Ae)}if(re._status===1)return re._result.default;throw re._result}var ot=typeof reportError=="function"?reportError:function(re){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof re=="object"&&re!==null&&typeof re.message=="string"?String(re.message):String(re),error:re});if(!window.dispatchEvent(Ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",re);return}console.error(re)},gt={map:be,forEach:function(re,Ae,Be){be(re,function(){Ae.apply(this,arguments)},Be)},count:function(re){var Ae=0;return be(re,function(){Ae++}),Ae},toArray:function(re){return be(re,function(Ae){return Ae})||[]},only:function(re){if(!Q(re))throw Error("React.Children.only expected to receive a single React element child.");return re}};return pt.Activity=I,pt.Children=gt,pt.Component=le,pt.Fragment=n,pt.Profiler=u,pt.PureComponent=ee,pt.StrictMode=o,pt.Suspense=b,pt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,pt.__COMPILER_RUNTIME={__proto__:null,c:function(re){return z.H.useMemoCache(re)}},pt.cache=function(re){return function(){return re.apply(null,arguments)}},pt.cacheSignal=function(){return null},pt.cloneElement=function(re,Ae,Be){if(re==null)throw Error("The argument must be a React element, but you passed "+re+".");var ke=W({},re.props),nt=re.key;if(Ae!=null)for(Me in Ae.key!==void 0&&(nt=""+Ae.key),Ae)!U.call(Ae,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&Ae.ref===void 0||(ke[Me]=Ae[Me]);var Me=arguments.length-2;if(Me===1)ke.children=Be;else if(1<Me){for(var _t=Array(Me),Ct=0;Ct<Me;Ct++)_t[Ct]=arguments[Ct+2];ke.children=_t}return j(re.type,nt,ke)},pt.createContext=function(re){return re={$$typeof:y,_currentValue:re,_currentValue2:re,_threadCount:0,Provider:null,Consumer:null},re.Provider=re,re.Consumer={$$typeof:d,_context:re},re},pt.createElement=function(re,Ae,Be){var ke,nt={},Me=null;if(Ae!=null)for(ke in Ae.key!==void 0&&(Me=""+Ae.key),Ae)U.call(Ae,ke)&&ke!=="key"&&ke!=="__self"&&ke!=="__source"&&(nt[ke]=Ae[ke]);var _t=arguments.length-2;if(_t===1)nt.children=Be;else if(1<_t){for(var Ct=Array(_t),Jt=0;Jt<_t;Jt++)Ct[Jt]=arguments[Jt+2];nt.children=Ct}if(re&&re.defaultProps)for(ke in _t=re.defaultProps,_t)nt[ke]===void 0&&(nt[ke]=_t[ke]);return j(re,Me,nt)},pt.createRef=function(){return{current:null}},pt.forwardRef=function(re){return{$$typeof:T,render:re}},pt.isValidElement=Q,pt.lazy=function(re){return{$$typeof:S,_payload:{_status:-1,_result:re},_init:He}},pt.memo=function(re,Ae){return{$$typeof:_,type:re,compare:Ae===void 0?null:Ae}},pt.startTransition=function(re){var Ae=z.T,Be={};z.T=Be;try{var ke=re(),nt=z.S;nt!==null&&nt(Be,ke),typeof ke=="object"&&ke!==null&&typeof ke.then=="function"&&ke.then(De,ot)}catch(Me){ot(Me)}finally{Ae!==null&&Be.types!==null&&(Ae.types=Be.types),z.T=Ae}},pt.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},pt.use=function(re){return z.H.use(re)},pt.useActionState=function(re,Ae,Be){return z.H.useActionState(re,Ae,Be)},pt.useCallback=function(re,Ae){return z.H.useCallback(re,Ae)},pt.useContext=function(re){return z.H.useContext(re)},pt.useDebugValue=function(){},pt.useDeferredValue=function(re,Ae){return z.H.useDeferredValue(re,Ae)},pt.useEffect=function(re,Ae){return z.H.useEffect(re,Ae)},pt.useEffectEvent=function(re){return z.H.useEffectEvent(re)},pt.useId=function(){return z.H.useId()},pt.useImperativeHandle=function(re,Ae,Be){return z.H.useImperativeHandle(re,Ae,Be)},pt.useInsertionEffect=function(re,Ae){return z.H.useInsertionEffect(re,Ae)},pt.useLayoutEffect=function(re,Ae){return z.H.useLayoutEffect(re,Ae)},pt.useMemo=function(re,Ae){return z.H.useMemo(re,Ae)},pt.useOptimistic=function(re,Ae){return z.H.useOptimistic(re,Ae)},pt.useReducer=function(re,Ae,Be){return z.H.useReducer(re,Ae,Be)},pt.useRef=function(re){return z.H.useRef(re)},pt.useState=function(re){return z.H.useState(re)},pt.useSyncExternalStore=function(re,Ae,Be){return z.H.useSyncExternalStore(re,Ae,Be)},pt.useTransition=function(){return z.H.useTransition()},pt.version="19.2.3",pt}var $2;function Z1(){return $2||($2=1,H0.exports=v3()),H0.exports}var ie=Z1();const er=Q1(ie);var G0={exports:{}},zc={},Y0={exports:{}},q0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ex;function T3(){return ex||(ex=1,(function(r){function e(pe,be){var He=pe.length;pe.push(be);e:for(;0<He;){var ot=He-1>>>1,gt=pe[ot];if(0<u(gt,be))pe[ot]=be,pe[He]=gt,He=ot;else break e}}function n(pe){return pe.length===0?null:pe[0]}function o(pe){if(pe.length===0)return null;var be=pe[0],He=pe.pop();if(He!==be){pe[0]=He;e:for(var ot=0,gt=pe.length,re=gt>>>1;ot<re;){var Ae=2*(ot+1)-1,Be=pe[Ae],ke=Ae+1,nt=pe[ke];if(0>u(Be,He))ke<gt&&0>u(nt,Be)?(pe[ot]=nt,pe[ke]=He,ot=ke):(pe[ot]=Be,pe[Ae]=He,ot=Ae);else if(ke<gt&&0>u(nt,He))pe[ot]=nt,pe[ke]=He,ot=ke;else break e}}return be}function u(pe,be){var He=pe.sortIndex-be.sortIndex;return He!==0?He:pe.id-be.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;r.unstable_now=function(){return d.now()}}else{var y=Date,T=y.now();r.unstable_now=function(){return y.now()-T}}var b=[],_=[],S=1,I=null,M=3,V=!1,K=!1,W=!1,q=!1,le=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;function fe(pe){for(var be=n(_);be!==null;){if(be.callback===null)o(_);else if(be.startTime<=pe)o(_),be.sortIndex=be.expirationTime,e(b,be);else break;be=n(_)}}function je(pe){if(W=!1,fe(pe),!K)if(n(b)!==null)K=!0,De||(De=!0,Z());else{var be=n(_);be!==null&&de(je,be.startTime-pe)}}var De=!1,z=-1,U=5,j=-1;function $(){return q?!0:!(r.unstable_now()-j<U)}function Q(){if(q=!1,De){var pe=r.unstable_now();j=pe;var be=!0;try{e:{K=!1,W&&(W=!1,ae(z),z=-1),V=!0;var He=M;try{t:{for(fe(pe),I=n(b);I!==null&&!(I.expirationTime>pe&&$());){var ot=I.callback;if(typeof ot=="function"){I.callback=null,M=I.priorityLevel;var gt=ot(I.expirationTime<=pe);if(pe=r.unstable_now(),typeof gt=="function"){I.callback=gt,fe(pe),be=!0;break t}I===n(b)&&o(b),fe(pe)}else o(b);I=n(b)}if(I!==null)be=!0;else{var re=n(_);re!==null&&de(je,re.startTime-pe),be=!1}}break e}finally{I=null,M=He,V=!1}be=void 0}}finally{be?Z():De=!1}}}var Z;if(typeof ee=="function")Z=function(){ee(Q)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,We=X.port2;X.port1.onmessage=Q,Z=function(){We.postMessage(null)}}else Z=function(){le(Q,0)};function de(pe,be){z=le(function(){pe(r.unstable_now())},be)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(pe){pe.callback=null},r.unstable_forceFrameRate=function(pe){0>pe||125<pe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<pe?Math.floor(1e3/pe):5},r.unstable_getCurrentPriorityLevel=function(){return M},r.unstable_next=function(pe){switch(M){case 1:case 2:case 3:var be=3;break;default:be=M}var He=M;M=be;try{return pe()}finally{M=He}},r.unstable_requestPaint=function(){q=!0},r.unstable_runWithPriority=function(pe,be){switch(pe){case 1:case 2:case 3:case 4:case 5:break;default:pe=3}var He=M;M=pe;try{return be()}finally{M=He}},r.unstable_scheduleCallback=function(pe,be,He){var ot=r.unstable_now();switch(typeof He=="object"&&He!==null?(He=He.delay,He=typeof He=="number"&&0<He?ot+He:ot):He=ot,pe){case 1:var gt=-1;break;case 2:gt=250;break;case 5:gt=1073741823;break;case 4:gt=1e4;break;default:gt=5e3}return gt=He+gt,pe={id:S++,callback:be,priorityLevel:pe,startTime:He,expirationTime:gt,sortIndex:-1},He>ot?(pe.sortIndex=He,e(_,pe),n(b)===null&&pe===n(_)&&(W?(ae(z),z=-1):W=!0,de(je,He-ot))):(pe.sortIndex=gt,e(b,pe),K||V||(K=!0,De||(De=!0,Z()))),pe},r.unstable_shouldYield=$,r.unstable_wrapCallback=function(pe){var be=M;return function(){var He=M;M=be;try{return pe.apply(this,arguments)}finally{M=He}}}})(q0)),q0}var tx;function C3(){return tx||(tx=1,Y0.exports=T3()),Y0.exports}var X0={exports:{}},ti={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nx;function S3(){if(nx)return ti;nx=1;var r=Z1();function e(b){var _="https://react.dev/errors/"+b;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)_+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+b+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var o={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},u=Symbol.for("react.portal");function d(b,_,S){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:I==null?null:""+I,children:b,containerInfo:_,implementation:S}}var y=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function T(b,_){if(b==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return ti.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,ti.createPortal=function(b,_){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return d(b,_,null,S)},ti.flushSync=function(b){var _=y.T,S=o.p;try{if(y.T=null,o.p=2,b)return b()}finally{y.T=_,o.p=S,o.d.f()}},ti.preconnect=function(b,_){typeof b=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,o.d.C(b,_))},ti.prefetchDNS=function(b){typeof b=="string"&&o.d.D(b)},ti.preinit=function(b,_){if(typeof b=="string"&&_&&typeof _.as=="string"){var S=_.as,I=T(S,_.crossOrigin),M=typeof _.integrity=="string"?_.integrity:void 0,V=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;S==="style"?o.d.S(b,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:I,integrity:M,fetchPriority:V}):S==="script"&&o.d.X(b,{crossOrigin:I,integrity:M,fetchPriority:V,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},ti.preinitModule=function(b,_){if(typeof b=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var S=T(_.as,_.crossOrigin);o.d.M(b,{crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&o.d.M(b)},ti.preload=function(b,_){if(typeof b=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var S=_.as,I=T(S,_.crossOrigin);o.d.L(b,S,{crossOrigin:I,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},ti.preloadModule=function(b,_){if(typeof b=="string")if(_){var S=T(_.as,_.crossOrigin);o.d.m(b,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:S,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else o.d.m(b)},ti.requestFormReset=function(b){o.d.r(b)},ti.unstable_batchedUpdates=function(b,_){return b(_)},ti.useFormState=function(b,_,S){return y.H.useFormState(b,_,S)},ti.useFormStatus=function(){return y.H.useHostTransitionStatus()},ti.version="19.2.3",ti}var rx;function I3(){if(rx)return X0.exports;rx=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),X0.exports=S3(),X0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ix;function N3(){if(ix)return zc;ix=1;var r=C3(),e=Z1(),n=I3();function o(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function d(t){var s=t,c=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(c=s.return),t=s.return;while(t)}return s.tag===3?c:null}function y(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function T(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function b(t){if(d(t)!==t)throw Error(o(188))}function _(t){var s=t.alternate;if(!s){if(s=d(t),s===null)throw Error(o(188));return s!==t?null:t}for(var c=t,g=s;;){var E=c.return;if(E===null)break;var A=E.alternate;if(A===null){if(g=E.return,g!==null){c=g;continue}break}if(E.child===A.child){for(A=E.child;A;){if(A===c)return b(E),t;if(A===g)return b(E),s;A=A.sibling}throw Error(o(188))}if(c.return!==g.return)c=E,g=A;else{for(var O=!1,k=E.child;k;){if(k===c){O=!0,c=E,g=A;break}if(k===g){O=!0,g=E,c=A;break}k=k.sibling}if(!O){for(k=A.child;k;){if(k===c){O=!0,c=A,g=E;break}if(k===g){O=!0,g=A,c=E;break}k=k.sibling}if(!O)throw Error(o(189))}}if(c.alternate!==g)throw Error(o(190))}if(c.tag!==3)throw Error(o(188));return c.stateNode.current===c?t:s}function S(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=S(t),s!==null)return s;t=t.sibling}return null}var I=Object.assign,M=Symbol.for("react.element"),V=Symbol.for("react.transitional.element"),K=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),le=Symbol.for("react.profiler"),ae=Symbol.for("react.consumer"),ee=Symbol.for("react.context"),fe=Symbol.for("react.forward_ref"),je=Symbol.for("react.suspense"),De=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function Z(t){return t===null||typeof t!="object"?null:(t=Q&&t[Q]||t["@@iterator"],typeof t=="function"?t:null)}var X=Symbol.for("react.client.reference");function We(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===X?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case W:return"Fragment";case le:return"Profiler";case q:return"StrictMode";case je:return"Suspense";case De:return"SuspenseList";case j:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case K:return"Portal";case ee:return t.displayName||"Context";case ae:return(t._context.displayName||"Context")+".Consumer";case fe:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case z:return s=t.displayName||null,s!==null?s:We(t.type)||"Memo";case U:s=t._payload,t=t._init;try{return We(t(s))}catch{}}return null}var de=Array.isArray,pe=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,He={pending:!1,data:null,method:null,action:null},ot=[],gt=-1;function re(t){return{current:t}}function Ae(t){0>gt||(t.current=ot[gt],ot[gt]=null,gt--)}function Be(t,s){gt++,ot[gt]=t.current,t.current=s}var ke=re(null),nt=re(null),Me=re(null),_t=re(null);function Ct(t,s){switch(Be(Me,s),Be(nt,t),Be(ke,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?E2(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=E2(s),t=_2(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Ae(ke),Be(ke,t)}function Jt(){Ae(ke),Ae(nt),Ae(Me)}function Dr(t){t.memoizedState!==null&&Be(_t,t);var s=ke.current,c=_2(s,t.type);s!==c&&(Be(nt,t),Be(ke,c))}function an(t){nt.current===t&&(Ae(ke),Ae(nt)),_t.current===t&&(Ae(_t),kc._currentValue=He)}var si,wt;function cr(t){if(si===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);si=s&&s[1]||"",wt=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+si+t+wt}var nr=!1;function Gr(t,s){if(!t||nr)return"";nr=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(s){var Se=function(){throw Error()};if(Object.defineProperty(Se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Se,[])}catch(we){var xe=we}Reflect.construct(t,[],Se)}else{try{Se.call()}catch(we){xe=we}t.call(Se.prototype)}}else{try{throw Error()}catch(we){xe=we}(Se=t())&&typeof Se.catch=="function"&&Se.catch(function(){})}}catch(we){if(we&&xe&&typeof we.stack=="string")return[we.stack,xe.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=g.DetermineComponentFrameRoot(),O=A[0],k=A[1];if(O&&k){var J=O.split(`
`),me=k.split(`
`);for(E=g=0;g<J.length&&!J[g].includes("DetermineComponentFrameRoot");)g++;for(;E<me.length&&!me[E].includes("DetermineComponentFrameRoot");)E++;if(g===J.length||E===me.length)for(g=J.length-1,E=me.length-1;1<=g&&0<=E&&J[g]!==me[E];)E--;for(;1<=g&&0<=E;g--,E--)if(J[g]!==me[E]){if(g!==1||E!==1)do if(g--,E--,0>E||J[g]!==me[E]){var ve=`
`+J[g].replace(" at new "," at ");return t.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",t.displayName)),ve}while(1<=g&&0<=E);break}}}finally{nr=!1,Error.prepareStackTrace=c}return(c=t?t.displayName||t.name:"")?cr(c):""}function En(t,s){switch(t.tag){case 26:case 27:case 5:return cr(t.type);case 16:return cr("Lazy");case 13:return t.child!==s&&s!==null?cr("Suspense Fallback"):cr("Suspense");case 19:return cr("SuspenseList");case 0:case 15:return Gr(t.type,!1);case 11:return Gr(t.type.render,!1);case 1:return Gr(t.type,!0);case 31:return cr("Activity");default:return""}}function Ht(t){try{var s="",c=null;do s+=En(t,c),c=t,t=t.return;while(t);return s}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var Qe=Object.prototype.hasOwnProperty,_n=r.unstable_scheduleCallback,Fe=r.unstable_cancelCallback,ws=r.unstable_shouldYield,Ki=r.unstable_requestPaint,dn=r.unstable_now,ai=r.unstable_getCurrentPriorityLevel,ur=r.unstable_ImmediatePriority,Yr=r.unstable_UserBlockingPriority,rr=r.unstable_NormalPriority,Kn=r.unstable_LowPriority,Rs=r.unstable_IdlePriority,Wi=r.log,Ws=r.unstable_setDisableYieldValue,Gt=null,Re=null;function Yt(t){if(typeof Wi=="function"&&Ws(t),Re&&typeof Re.setStrictMode=="function")try{Re.setStrictMode(Gt,t)}catch{}}var rt=Math.clz32?Math.clz32:As,nn=Math.log,oi=Math.LN2;function As(t){return t>>>=0,t===0?32:31-(nn(t)/oi|0)|0}var qr=256,At=262144,rn=4194304;function Xr(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Kr(t,s,c){var g=t.pendingLanes;if(g===0)return 0;var E=0,A=t.suspendedLanes,O=t.pingedLanes;t=t.warmLanes;var k=g&134217727;return k!==0?(g=k&~A,g!==0?E=Xr(g):(O&=k,O!==0?E=Xr(O):c||(c=k&~t,c!==0&&(E=Xr(c))))):(k=g&~A,k!==0?E=Xr(k):O!==0?E=Xr(O):c||(c=g&~t,c!==0&&(E=Xr(c)))),E===0?0:s!==0&&s!==E&&(s&A)===0&&(A=E&-E,c=s&-s,A>=c||A===32&&(c&4194048)!==0)?s:E}function wn(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function Os(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pn(){var t=rn;return rn<<=1,(rn&62914560)===0&&(rn=4194304),t}function Er(t){for(var s=[],c=0;31>c;c++)s.push(t);return s}function xi(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Wr(t,s,c,g,E,A){var O=t.pendingLanes;t.pendingLanes=c,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=c,t.entangledLanes&=c,t.errorRecoveryDisabledLanes&=c,t.shellSuspendCounter=0;var k=t.entanglements,J=t.expirationTimes,me=t.hiddenUpdates;for(c=O&~c;0<c;){var ve=31-rt(c),Se=1<<ve;k[ve]=0,J[ve]=-1;var xe=me[ve];if(xe!==null)for(me[ve]=null,ve=0;ve<xe.length;ve++){var we=xe[ve];we!==null&&(we.lane&=-536870913)}c&=~Se}g!==0&&Qi(t,g,0),A!==0&&E===0&&t.tag!==0&&(t.suspendedLanes|=A&~(O&~s))}function Qi(t,s,c){t.pendingLanes|=s,t.suspendedLanes&=~s;var g=31-rt(s);t.entangledLanes|=s,t.entanglements[g]=t.entanglements[g]|1073741824|c&261930}function li(t,s){var c=t.entangledLanes|=s;for(t=t.entanglements;c;){var g=31-rt(c),E=1<<g;E&s|t[g]&s&&(t[g]|=s),c&=~E}}function Zi(t,s){var c=s&-s;return c=(c&42)!==0?1:Bn(c),(c&(t.suspendedLanes|s))!==0?0:c}function Bn(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function _r(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function wr(){var t=be.p;return t!==0?t:(t=window.event,t===void 0?32:H2(t.type))}function Ve(t,s){var c=be.p;try{return be.p=t,s()}finally{be.p=c}}var hr=Math.random().toString(36).slice(2),An="__reactFiber$"+hr,qt="__reactProps$"+hr,Ar="__reactContainer$"+hr,Mi="__reactEvents$"+hr,Ds="__reactListeners$"+hr,Mr="__reactHandles$"+hr,Ma="__reactResources$"+hr,yi="__reactMarker$"+hr;function br(t){delete t[An],delete t[qt],delete t[Mi],delete t[Ds],delete t[Mr]}function gn(t){var s=t[An];if(s)return s;for(var c=t.parentNode;c;){if(s=c[Ar]||c[An]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(t=S2(t);t!==null;){if(c=t[An])return c;t=S2(t)}return s}t=c,c=t.parentNode}return null}function Dt(t){if(t=t[An]||t[Ar]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function Sr(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(o(33))}function ir(t){var s=t[Ma];return s||(s=t[Ma]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function bn(t){t[yi]=!0}var F=new Set,Je={};function Ue(t,s){St(t,s),St(t+"Capture",s)}function St(t,s){for(Je[t]=s,t=0;t<s.length;t++)F.add(s[t])}var kn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ut={},bt={};function vt(t){return Qe.call(bt,t)?!0:Qe.call(ut,t)?!1:kn.test(t)?bt[t]=!0:(ut[t]=!0,!1)}function Ji(t,s,c){if(vt(s))if(c===null)t.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var g=s.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+c)}}function Nn(t,s,c){if(c===null)t.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+c)}}function vn(t,s,c,g){if(g===null)t.removeAttribute(c);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(c);return}t.setAttributeNS(s,c,""+g)}}function ct(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Lr(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Co(t,s,c){var g=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var E=g.get,A=g.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return E.call(this)},set:function(O){c=""+O,A.call(this,O)}}),Object.defineProperty(t,s,{enumerable:g.enumerable}),{getValue:function(){return c},setValue:function(O){c=""+O},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function st(t){if(!t._valueTracker){var s=Lr(t)?"checked":"value";t._valueTracker=Co(t,s,""+t[s])}}function Qr(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var c=s.getValue(),g="";return t&&(g=Lr(t)?t.checked?"true":"false":t.value),t=g,t!==c?(s.setValue(t),!0):!1}function $i(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Ei=/[\n"\\]/g;function It(t){return t.replace(Ei,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function zn(t,s,c,g,E,A,O,k){t.name="",O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?t.type=O:t.removeAttribute("type"),s!=null?O==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+ct(s)):t.value!==""+ct(s)&&(t.value=""+ct(s)):O!=="submit"&&O!=="reset"||t.removeAttribute("value"),s!=null?G(t,O,ct(s)):c!=null?G(t,O,ct(c)):g!=null&&t.removeAttribute("value"),E==null&&A!=null&&(t.defaultChecked=!!A),E!=null&&(t.checked=E&&typeof E!="function"&&typeof E!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?t.name=""+ct(k):t.removeAttribute("name")}function he(t,s,c,g,E,A,O,k){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(t.type=A),s!=null||c!=null){if(!(A!=="submit"&&A!=="reset"||s!=null)){st(t);return}c=c!=null?""+ct(c):"",s=s!=null?""+ct(s):c,k||s===t.value||(t.value=s),t.defaultValue=s}g=g??E,g=typeof g!="function"&&typeof g!="symbol"&&!!g,t.checked=k?t.checked:!!g,t.defaultChecked=!!g,O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(t.name=O),st(t)}function G(t,s,c){s==="number"&&$i(t.ownerDocument)===t||t.defaultValue===""+c||(t.defaultValue=""+c)}function qe(t,s,c,g){if(t=t.options,s){s={};for(var E=0;E<c.length;E++)s["$"+c[E]]=!0;for(c=0;c<t.length;c++)E=s.hasOwnProperty("$"+t[c].value),t[c].selected!==E&&(t[c].selected=E),E&&g&&(t[c].defaultSelected=!0)}else{for(c=""+ct(c),s=null,E=0;E<t.length;E++){if(t[E].value===c){t[E].selected=!0,g&&(t[E].defaultSelected=!0);return}s!==null||t[E].disabled||(s=t[E])}s!==null&&(s.selected=!0)}}function Hn(t,s,c){if(s!=null&&(s=""+ct(s),s!==t.value&&(t.value=s),c==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=c!=null?""+ct(c):""}function sr(t,s,c,g){if(s==null){if(g!=null){if(c!=null)throw Error(o(92));if(de(g)){if(1<g.length)throw Error(o(93));g=g[0]}c=g}c==null&&(c=""),s=c}c=ct(s),t.defaultValue=c,g=t.textContent,g===c&&g!==""&&g!==null&&(t.value=g),st(t)}function Zr(t,s){if(s){var c=t.firstChild;if(c&&c===t.lastChild&&c.nodeType===3){c.nodeValue=s;return}}t.textContent=s}var La=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ir(t,s,c){var g=s.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?g?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":g?t.setProperty(s,c):typeof c!="number"||c===0||La.has(s)?s==="float"?t.cssFloat=c:t[s]=(""+c).trim():t[s]=c+"px"}function Ze(t,s,c){if(s!=null&&typeof s!="object")throw Error(o(62));if(t=t.style,c!=null){for(var g in c)!c.hasOwnProperty(g)||s!=null&&s.hasOwnProperty(g)||(g.indexOf("--")===0?t.setProperty(g,""):g==="float"?t.cssFloat="":t[g]="");for(var E in s)g=s[E],s.hasOwnProperty(E)&&c[E]!==g&&Ir(t,E,g)}else for(var A in s)s.hasOwnProperty(A)&&Ir(t,A,s[A])}function on(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var So=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ms=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ls(t){return Ms.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Jr(){}var Qs=null;function _i(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Tn=null,$r=null;function ei(t){var s=Dt(t);if(s&&(t=s.stateNode)){var c=t[qt]||null;e:switch(t=s.stateNode,s.type){case"input":if(zn(t,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),s=c.name,c.type==="radio"&&s!=null){for(c=t;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+It(""+s)+'"][type="radio"]'),s=0;s<c.length;s++){var g=c[s];if(g!==t&&g.form===t.form){var E=g[qt]||null;if(!E)throw Error(o(90));zn(g,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(s=0;s<c.length;s++)g=c[s],g.form===t.form&&Qr(g)}break e;case"textarea":Hn(t,c.value,c.defaultValue);break e;case"select":s=c.value,s!=null&&qe(t,!!c.multiple,s,!1)}}}var $e=!1;function Ps(t,s,c){if($e)return t(s,c);$e=!0;try{var g=t(s);return g}finally{if($e=!1,(Tn!==null||$r!==null)&&(hh(),Tn&&(s=Tn,t=$r,$r=Tn=null,ei(s),t)))for(s=0;s<t.length;s++)ei(t[s])}}function it(t,s){var c=t.stateNode;if(c===null)return null;var g=c[qt]||null;if(g===null)return null;c=g[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(t=t.type,g=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!g;break e;default:t=!1}if(t)return null;if(c&&typeof c!="function")throw Error(o(231,s,typeof c));return c}var ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zs=!1;if(ln)try{var $t={};Object.defineProperty($t,"passive",{get:function(){Zs=!0}}),window.addEventListener("test",$t,$t),window.removeEventListener("test",$t,$t)}catch{Zs=!1}var Li=null,Pi=null,Js=null;function bs(){if(Js)return Js;var t,s=Pi,c=s.length,g,E="value"in Li?Li.value:Li.textContent,A=E.length;for(t=0;t<c&&s[t]===E[t];t++);var O=c-t;for(g=1;g<=O&&s[c-g]===E[A-g];g++);return Js=E.slice(t,1<g?1-g:void 0)}function Bi(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function ci(){return!0}function wi(){return!1}function Gn(t){function s(c,g,E,A,O){this._reactName=c,this._targetInst=E,this.type=g,this.nativeEvent=A,this.target=O,this.currentTarget=null;for(var k in t)t.hasOwnProperty(k)&&(c=t[k],this[k]=c?c(A):A[k]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?ci:wi,this.isPropagationStopped=wi,this}return I(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=ci)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=ci)},persist:function(){},isPersistent:ci}),s}var ui={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rn=Gn(ui),vs=I({},ui,{view:0,detail:0}),Pa=Gn(vs),Ts,Ba,es,ka=I({},vs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ns,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==es&&(es&&t.type==="mousemove"?(Ts=t.screenX-es.screenX,Ba=t.screenY-es.screenY):Ba=Ts=0,es=t),Ts)},movementY:function(t){return"movementY"in t?t.movementY:Ba}}),Wt=Gn(ka),Bs=I({},ka,{dataTransfer:0}),$s=Gn(Bs),ki=I({},vs,{relatedTarget:0}),ea=Gn(ki),ye=I({},ui,{animationName:0,elapsedTime:0,pseudoElement:0}),mt=Gn(ye),Un=I({},ui,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ta=Gn(Un),Io=I({},ui,{data:0}),ts=Gn(Io),al={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ol={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ua={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vn(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Ua[t])?!!s[t]:!1}function ns(){return Vn}var Mt=I({},vs,{key:function(t){if(t.key){var s=al[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Bi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ol[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ns,charCode:function(t){return t.type==="keypress"?Bi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Bi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),na=Gn(Mt),rs=I({},ka,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lt=Gn(rs),p=I({},vs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ns}),N=Gn(p),D=I({},ui,{propertyName:0,elapsedTime:0,pseudoElement:0}),H=Gn(D),ce=I({},ka,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),_e=Gn(ce),Pe=I({},ui,{newState:0,oldState:0}),ht=Gn(Pe),jn=[9,13,27,32],Xt=ln&&"CompositionEvent"in window,Cn=null;ln&&"documentMode"in document&&(Cn=document.documentMode);var hi=ln&&"TextEvent"in window&&!Cn,is=ln&&(!Xt||Cn&&8<Cn&&11>=Cn),Nr=" ",fi=!1;function ra(t,s){switch(t){case"keyup":return jn.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ss(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Va=!1;function ks(t,s){switch(t){case"compositionend":return ss(s);case"keypress":return s.which!==32?null:(fi=!0,Nr);case"textInput":return t=s.data,t===Nr&&fi?null:t;default:return null}}function ll(t,s){if(Va)return t==="compositionend"||!Xt&&ra(t,s)?(t=bs(),Js=Pi=Li=null,Va=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return is&&s.locale!=="ko"?null:s.data;default:return null}}var Ai={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oc(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Ai[t.type]:s==="textarea"}function Ui(t,s,c,g){Tn?$r?$r.push(g):$r=[g]:Tn=g,s=yh(s,"onChange"),0<s.length&&(c=new Rn("onChange","change",null,c,g),t.push({event:c,listeners:s}))}var No=null,ia=null;function td(t){d2(t,0)}function Ro(t){var s=Sr(t);if(Qr(s))return t}function Vi(t,s){if(t==="change")return s}var Nu=!1;if(ln){var Oo;if(ln){var sa="oninput"in document;if(!sa){var Ut=document.createElement("div");Ut.setAttribute("oninput","return;"),sa=typeof Ut.oninput=="function"}Oo=sa}else Oo=!1;Nu=Oo&&(!document.documentMode||9<document.documentMode)}function Do(){No&&(No.detachEvent("onpropertychange",L),ia=No=null)}function L(t){if(t.propertyName==="value"&&Ro(ia)){var s=[];Ui(s,ia,t,_i(t)),Ps(td,s)}}function i(t,s,c){t==="focusin"?(Do(),No=s,ia=c,No.attachEvent("onpropertychange",L)):t==="focusout"&&Do()}function a(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ro(ia)}function l(t,s){if(t==="click")return Ro(s)}function h(t,s){if(t==="input"||t==="change")return Ro(s)}function f(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var m=typeof Object.is=="function"?Object.is:f;function x(t,s){if(m(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var c=Object.keys(t),g=Object.keys(s);if(c.length!==g.length)return!1;for(g=0;g<c.length;g++){var E=c[g];if(!Qe.call(s,E)||!m(t[E],s[E]))return!1}return!0}function w(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function C(t,s){var c=w(t);t=0;for(var g;c;){if(c.nodeType===3){if(g=t+c.textContent.length,t<=s&&g>=s)return{node:c,offset:s-t};t=g}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=w(c)}}function R(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?R(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function P(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=$i(t.document);s instanceof t.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)t=s.contentWindow;else break;s=$i(t.document)}return s}function B(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var Y=ln&&"documentMode"in document&&11>=document.documentMode,te=null,ne=null,ue=null,Ee=!1;function Le(t,s,c){var g=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Ee||te==null||te!==$i(g)||(g=te,"selectionStart"in g&&B(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),ue&&x(ue,g)||(ue=g,g=yh(ne,"onSelect"),0<g.length&&(s=new Rn("onSelect","select",null,s,c),t.push({event:s,listeners:g}),s.target=te)))}function Oe(t,s){var c={};return c[t.toLowerCase()]=s.toLowerCase(),c["Webkit"+t]="webkit"+s,c["Moz"+t]="moz"+s,c}var Ne={animationend:Oe("Animation","AnimationEnd"),animationiteration:Oe("Animation","AnimationIteration"),animationstart:Oe("Animation","AnimationStart"),transitionrun:Oe("Transition","TransitionRun"),transitionstart:Oe("Transition","TransitionStart"),transitioncancel:Oe("Transition","TransitionCancel"),transitionend:Oe("Transition","TransitionEnd")},Rt={},ft={};ln&&(ft=document.createElement("div").style,"AnimationEvent"in window||(delete Ne.animationend.animation,delete Ne.animationiteration.animation,delete Ne.animationstart.animation),"TransitionEvent"in window||delete Ne.transitionend.transition);function Wn(t){if(Rt[t])return Rt[t];if(!Ne[t])return t;var s=Ne[t],c;for(c in s)if(s.hasOwnProperty(c)&&c in ft)return Rt[t]=s[c];return t}var bi=Wn("animationend"),Pr=Wn("animationiteration"),cn=Wn("animationstart"),vr=Wn("transitionrun"),di=Wn("transitionstart"),ja=Wn("transitioncancel"),aa=Wn("transitionend"),Ru=new Map,lc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");lc.push("scrollEnd");function Cs(t,s){Ru.set(t,s),Ue(s,[t])}var Ou=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},as=[],cl=0,nd=0;function Du(){for(var t=cl,s=nd=cl=0;s<t;){var c=as[s];as[s++]=null;var g=as[s];as[s++]=null;var E=as[s];as[s++]=null;var A=as[s];if(as[s++]=null,g!==null&&E!==null){var O=g.pending;O===null?E.next=E:(E.next=O.next,O.next=E),g.pending=E}A!==0&&Kg(c,E,A)}}function Mu(t,s,c,g){as[cl++]=t,as[cl++]=s,as[cl++]=c,as[cl++]=g,nd|=g,t.lanes|=g,t=t.alternate,t!==null&&(t.lanes|=g)}function rd(t,s,c,g){return Mu(t,s,c,g),Lu(t)}function Mo(t,s){return Mu(t,null,null,s),Lu(t)}function Kg(t,s,c){t.lanes|=c;var g=t.alternate;g!==null&&(g.lanes|=c);for(var E=!1,A=t.return;A!==null;)A.childLanes|=c,g=A.alternate,g!==null&&(g.childLanes|=c),A.tag===22&&(t=A.stateNode,t===null||t._visibility&1||(E=!0)),t=A,A=A.return;return t.tag===3?(A=t.stateNode,E&&s!==null&&(E=31-rt(c),t=A.hiddenUpdates,g=t[E],g===null?t[E]=[s]:g.push(s),s.lane=c|536870912),A):null}function Lu(t){if(50<Rc)throw Rc=0,f0=null,Error(o(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var ul={};function ib(t,s,c,g){this.tag=t,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ji(t,s,c,g){return new ib(t,s,c,g)}function id(t){return t=t.prototype,!(!t||!t.isReactComponent)}function oa(t,s){var c=t.alternate;return c===null?(c=ji(t.tag,s,t.key,t.mode),c.elementType=t.elementType,c.type=t.type,c.stateNode=t.stateNode,c.alternate=t,t.alternate=c):(c.pendingProps=s,c.type=t.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=t.flags&65011712,c.childLanes=t.childLanes,c.lanes=t.lanes,c.child=t.child,c.memoizedProps=t.memoizedProps,c.memoizedState=t.memoizedState,c.updateQueue=t.updateQueue,s=t.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=t.sibling,c.index=t.index,c.ref=t.ref,c.refCleanup=t.refCleanup,c}function Wg(t,s){t.flags&=65011714;var c=t.alternate;return c===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=c.childLanes,t.lanes=c.lanes,t.child=c.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=c.memoizedProps,t.memoizedState=c.memoizedState,t.updateQueue=c.updateQueue,t.type=c.type,s=c.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function Pu(t,s,c,g,E,A){var O=0;if(g=t,typeof t=="function")id(t)&&(O=1);else if(typeof t=="string")O=c3(t,c,ke.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case j:return t=ji(31,c,s,E),t.elementType=j,t.lanes=A,t;case W:return Lo(c.children,E,A,s);case q:O=8,E|=24;break;case le:return t=ji(12,c,s,E|2),t.elementType=le,t.lanes=A,t;case je:return t=ji(13,c,s,E),t.elementType=je,t.lanes=A,t;case De:return t=ji(19,c,s,E),t.elementType=De,t.lanes=A,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ee:O=10;break e;case ae:O=9;break e;case fe:O=11;break e;case z:O=14;break e;case U:O=16,g=null;break e}O=29,c=Error(o(130,t===null?"null":typeof t,"")),g=null}return s=ji(O,c,s,E),s.elementType=t,s.type=g,s.lanes=A,s}function Lo(t,s,c,g){return t=ji(7,t,g,s),t.lanes=c,t}function sd(t,s,c){return t=ji(6,t,null,s),t.lanes=c,t}function Qg(t){var s=ji(18,null,null,0);return s.stateNode=t,s}function ad(t,s,c){return s=ji(4,t.children!==null?t.children:[],t.key,s),s.lanes=c,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var Zg=new WeakMap;function os(t,s){if(typeof t=="object"&&t!==null){var c=Zg.get(t);return c!==void 0?c:(s={value:t,source:s,stack:Ht(s)},Zg.set(t,s),s)}return{value:t,source:s,stack:Ht(s)}}var hl=[],fl=0,Bu=null,cc=0,ls=[],cs=0,Fa=null,Us=1,Vs="";function la(t,s){hl[fl++]=cc,hl[fl++]=Bu,Bu=t,cc=s}function Jg(t,s,c){ls[cs++]=Us,ls[cs++]=Vs,ls[cs++]=Fa,Fa=t;var g=Us;t=Vs;var E=32-rt(g)-1;g&=~(1<<E),c+=1;var A=32-rt(s)+E;if(30<A){var O=E-E%5;A=(g&(1<<O)-1).toString(32),g>>=O,E-=O,Us=1<<32-rt(s)+E|c<<E|g,Vs=A+t}else Us=1<<A|c<<E|g,Vs=t}function od(t){t.return!==null&&(la(t,1),Jg(t,1,0))}function ld(t){for(;t===Bu;)Bu=hl[--fl],hl[fl]=null,cc=hl[--fl],hl[fl]=null;for(;t===Fa;)Fa=ls[--cs],ls[cs]=null,Vs=ls[--cs],ls[cs]=null,Us=ls[--cs],ls[cs]=null}function $g(t,s){ls[cs++]=Us,ls[cs++]=Vs,ls[cs++]=Fa,Us=s.id,Vs=s.overflow,Fa=t}var Br=null,On=null,Kt=!1,za=null,us=!1,cd=Error(o(519));function Ha(t){var s=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw uc(os(s,t)),cd}function em(t){var s=t.stateNode,c=t.type,g=t.memoizedProps;switch(s[An]=t,s[qt]=g,c){case"dialog":Bt("cancel",s),Bt("close",s);break;case"iframe":case"object":case"embed":Bt("load",s);break;case"video":case"audio":for(c=0;c<Dc.length;c++)Bt(Dc[c],s);break;case"source":Bt("error",s);break;case"img":case"image":case"link":Bt("error",s),Bt("load",s);break;case"details":Bt("toggle",s);break;case"input":Bt("invalid",s),he(s,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":Bt("invalid",s);break;case"textarea":Bt("invalid",s),sr(s,g.value,g.defaultValue,g.children)}c=g.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||s.textContent===""+c||g.suppressHydrationWarning===!0||x2(s.textContent,c)?(g.popover!=null&&(Bt("beforetoggle",s),Bt("toggle",s)),g.onScroll!=null&&Bt("scroll",s),g.onScrollEnd!=null&&Bt("scrollend",s),g.onClick!=null&&(s.onclick=Jr),s=!0):s=!1,s||Ha(t,!0)}function tm(t){for(Br=t.return;Br;)switch(Br.tag){case 5:case 31:case 13:us=!1;return;case 27:case 3:us=!0;return;default:Br=Br.return}}function dl(t){if(t!==Br)return!1;if(!Kt)return tm(t),Kt=!0,!1;var s=t.tag,c;if((c=s!==3&&s!==27)&&((c=s===5)&&(c=t.type,c=!(c!=="form"&&c!=="button")||S0(t.type,t.memoizedProps)),c=!c),c&&On&&Ha(t),tm(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));On=C2(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));On=C2(t)}else s===27?(s=On,ro(t.type)?(t=D0,D0=null,On=t):On=s):On=Br?fs(t.stateNode.nextSibling):null;return!0}function Po(){On=Br=null,Kt=!1}function ud(){var t=za;return t!==null&&(Si===null?Si=t:Si.push.apply(Si,t),za=null),t}function uc(t){za===null?za=[t]:za.push(t)}var hd=re(null),Bo=null,ca=null;function Ga(t,s,c){Be(hd,s._currentValue),s._currentValue=c}function ua(t){t._currentValue=hd.current,Ae(hd)}function fd(t,s,c){for(;t!==null;){var g=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,g!==null&&(g.childLanes|=s)):g!==null&&(g.childLanes&s)!==s&&(g.childLanes|=s),t===c)break;t=t.return}}function dd(t,s,c,g){var E=t.child;for(E!==null&&(E.return=t);E!==null;){var A=E.dependencies;if(A!==null){var O=E.child;A=A.firstContext;e:for(;A!==null;){var k=A;A=E;for(var J=0;J<s.length;J++)if(k.context===s[J]){A.lanes|=c,k=A.alternate,k!==null&&(k.lanes|=c),fd(A.return,c,t),g||(O=null);break e}A=k.next}}else if(E.tag===18){if(O=E.return,O===null)throw Error(o(341));O.lanes|=c,A=O.alternate,A!==null&&(A.lanes|=c),fd(O,c,t),O=null}else O=E.child;if(O!==null)O.return=E;else for(O=E;O!==null;){if(O===t){O=null;break}if(E=O.sibling,E!==null){E.return=O.return,O=E;break}O=O.return}E=O}}function gl(t,s,c,g){t=null;for(var E=s,A=!1;E!==null;){if(!A){if((E.flags&524288)!==0)A=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var O=E.alternate;if(O===null)throw Error(o(387));if(O=O.memoizedProps,O!==null){var k=E.type;m(E.pendingProps.value,O.value)||(t!==null?t.push(k):t=[k])}}else if(E===_t.current){if(O=E.alternate,O===null)throw Error(o(387));O.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(t!==null?t.push(kc):t=[kc])}E=E.return}t!==null&&dd(s,t,c,g),s.flags|=262144}function ku(t){for(t=t.firstContext;t!==null;){if(!m(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ko(t){Bo=t,ca=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function kr(t){return nm(Bo,t)}function Uu(t,s){return Bo===null&&ko(t),nm(t,s)}function nm(t,s){var c=s._currentValue;if(s={context:s,memoizedValue:c,next:null},ca===null){if(t===null)throw Error(o(308));ca=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else ca=ca.next=s;return c}var sb=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(c,g){t.push(g)}};this.abort=function(){s.aborted=!0,t.forEach(function(c){return c()})}},ab=r.unstable_scheduleCallback,ob=r.unstable_NormalPriority,fr={$$typeof:ee,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gd(){return{controller:new sb,data:new Map,refCount:0}}function hc(t){t.refCount--,t.refCount===0&&ab(ob,function(){t.controller.abort()})}var fc=null,md=0,ml=0,pl=null;function lb(t,s){if(fc===null){var c=fc=[];md=0,ml=y0(),pl={status:"pending",value:void 0,then:function(g){c.push(g)}}}return md++,s.then(rm,rm),s}function rm(){if(--md===0&&fc!==null){pl!==null&&(pl.status="fulfilled");var t=fc;fc=null,ml=0,pl=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function cb(t,s){var c=[],g={status:"pending",value:null,reason:null,then:function(E){c.push(E)}};return t.then(function(){g.status="fulfilled",g.value=s;for(var E=0;E<c.length;E++)(0,c[E])(s)},function(E){for(g.status="rejected",g.reason=E,E=0;E<c.length;E++)(0,c[E])(void 0)}),g}var im=pe.S;pe.S=function(t,s){Fp=dn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&lb(t,s),im!==null&&im(t,s)};var Uo=re(null);function pd(){var t=Uo.current;return t!==null?t:Sn.pooledCache}function Vu(t,s){s===null?Be(Uo,Uo.current):Be(Uo,s.pool)}function sm(){var t=pd();return t===null?null:{parent:fr._currentValue,pool:t}}var xl=Error(o(460)),xd=Error(o(474)),ju=Error(o(542)),Fu={then:function(){}};function am(t){return t=t.status,t==="fulfilled"||t==="rejected"}function om(t,s,c){switch(c=t[c],c===void 0?t.push(s):c!==s&&(s.then(Jr,Jr),s=c),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,cm(t),t;default:if(typeof s.status=="string")s.then(Jr,Jr);else{if(t=Sn,t!==null&&100<t.shellSuspendCounter)throw Error(o(482));t=s,t.status="pending",t.then(function(g){if(s.status==="pending"){var E=s;E.status="fulfilled",E.value=g}},function(g){if(s.status==="pending"){var E=s;E.status="rejected",E.reason=g}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,cm(t),t}throw jo=s,xl}}function Vo(t){try{var s=t._init;return s(t._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(jo=c,xl):c}}var jo=null;function lm(){if(jo===null)throw Error(o(459));var t=jo;return jo=null,t}function cm(t){if(t===xl||t===ju)throw Error(o(483))}var yl=null,dc=0;function zu(t){var s=dc;return dc+=1,yl===null&&(yl=[]),om(yl,t,s)}function gc(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function Hu(t,s){throw s.$$typeof===M?Error(o(525)):(t=Object.prototype.toString.call(s),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function um(t){function s(oe,se){if(t){var ge=oe.deletions;ge===null?(oe.deletions=[se],oe.flags|=16):ge.push(se)}}function c(oe,se){if(!t)return null;for(;se!==null;)s(oe,se),se=se.sibling;return null}function g(oe){for(var se=new Map;oe!==null;)oe.key!==null?se.set(oe.key,oe):se.set(oe.index,oe),oe=oe.sibling;return se}function E(oe,se){return oe=oa(oe,se),oe.index=0,oe.sibling=null,oe}function A(oe,se,ge){return oe.index=ge,t?(ge=oe.alternate,ge!==null?(ge=ge.index,ge<se?(oe.flags|=67108866,se):ge):(oe.flags|=67108866,se)):(oe.flags|=1048576,se)}function O(oe){return t&&oe.alternate===null&&(oe.flags|=67108866),oe}function k(oe,se,ge,Te){return se===null||se.tag!==6?(se=sd(ge,oe.mode,Te),se.return=oe,se):(se=E(se,ge),se.return=oe,se)}function J(oe,se,ge,Te){var et=ge.type;return et===W?ve(oe,se,ge.props.children,Te,ge.key):se!==null&&(se.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===U&&Vo(et)===se.type)?(se=E(se,ge.props),gc(se,ge),se.return=oe,se):(se=Pu(ge.type,ge.key,ge.props,null,oe.mode,Te),gc(se,ge),se.return=oe,se)}function me(oe,se,ge,Te){return se===null||se.tag!==4||se.stateNode.containerInfo!==ge.containerInfo||se.stateNode.implementation!==ge.implementation?(se=ad(ge,oe.mode,Te),se.return=oe,se):(se=E(se,ge.children||[]),se.return=oe,se)}function ve(oe,se,ge,Te,et){return se===null||se.tag!==7?(se=Lo(ge,oe.mode,Te,et),se.return=oe,se):(se=E(se,ge),se.return=oe,se)}function Se(oe,se,ge){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return se=sd(""+se,oe.mode,ge),se.return=oe,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case V:return ge=Pu(se.type,se.key,se.props,null,oe.mode,ge),gc(ge,se),ge.return=oe,ge;case K:return se=ad(se,oe.mode,ge),se.return=oe,se;case U:return se=Vo(se),Se(oe,se,ge)}if(de(se)||Z(se))return se=Lo(se,oe.mode,ge,null),se.return=oe,se;if(typeof se.then=="function")return Se(oe,zu(se),ge);if(se.$$typeof===ee)return Se(oe,Uu(oe,se),ge);Hu(oe,se)}return null}function xe(oe,se,ge,Te){var et=se!==null?se.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return et!==null?null:k(oe,se,""+ge,Te);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case V:return ge.key===et?J(oe,se,ge,Te):null;case K:return ge.key===et?me(oe,se,ge,Te):null;case U:return ge=Vo(ge),xe(oe,se,ge,Te)}if(de(ge)||Z(ge))return et!==null?null:ve(oe,se,ge,Te,null);if(typeof ge.then=="function")return xe(oe,se,zu(ge),Te);if(ge.$$typeof===ee)return xe(oe,se,Uu(oe,ge),Te);Hu(oe,ge)}return null}function we(oe,se,ge,Te,et){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return oe=oe.get(ge)||null,k(se,oe,""+Te,et);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case V:return oe=oe.get(Te.key===null?ge:Te.key)||null,J(se,oe,Te,et);case K:return oe=oe.get(Te.key===null?ge:Te.key)||null,me(se,oe,Te,et);case U:return Te=Vo(Te),we(oe,se,ge,Te,et)}if(de(Te)||Z(Te))return oe=oe.get(ge)||null,ve(se,oe,Te,et,null);if(typeof Te.then=="function")return we(oe,se,ge,zu(Te),et);if(Te.$$typeof===ee)return we(oe,se,ge,Uu(se,Te),et);Hu(se,Te)}return null}function Xe(oe,se,ge,Te){for(var et=null,en=null,Ke=se,Nt=se=0,jt=null;Ke!==null&&Nt<ge.length;Nt++){Ke.index>Nt?(jt=Ke,Ke=null):jt=Ke.sibling;var tn=xe(oe,Ke,ge[Nt],Te);if(tn===null){Ke===null&&(Ke=jt);break}t&&Ke&&tn.alternate===null&&s(oe,Ke),se=A(tn,se,Nt),en===null?et=tn:en.sibling=tn,en=tn,Ke=jt}if(Nt===ge.length)return c(oe,Ke),Kt&&la(oe,Nt),et;if(Ke===null){for(;Nt<ge.length;Nt++)Ke=Se(oe,ge[Nt],Te),Ke!==null&&(se=A(Ke,se,Nt),en===null?et=Ke:en.sibling=Ke,en=Ke);return Kt&&la(oe,Nt),et}for(Ke=g(Ke);Nt<ge.length;Nt++)jt=we(Ke,oe,Nt,ge[Nt],Te),jt!==null&&(t&&jt.alternate!==null&&Ke.delete(jt.key===null?Nt:jt.key),se=A(jt,se,Nt),en===null?et=jt:en.sibling=jt,en=jt);return t&&Ke.forEach(function(lo){return s(oe,lo)}),Kt&&la(oe,Nt),et}function at(oe,se,ge,Te){if(ge==null)throw Error(o(151));for(var et=null,en=null,Ke=se,Nt=se=0,jt=null,tn=ge.next();Ke!==null&&!tn.done;Nt++,tn=ge.next()){Ke.index>Nt?(jt=Ke,Ke=null):jt=Ke.sibling;var lo=xe(oe,Ke,tn.value,Te);if(lo===null){Ke===null&&(Ke=jt);break}t&&Ke&&lo.alternate===null&&s(oe,Ke),se=A(lo,se,Nt),en===null?et=lo:en.sibling=lo,en=lo,Ke=jt}if(tn.done)return c(oe,Ke),Kt&&la(oe,Nt),et;if(Ke===null){for(;!tn.done;Nt++,tn=ge.next())tn=Se(oe,tn.value,Te),tn!==null&&(se=A(tn,se,Nt),en===null?et=tn:en.sibling=tn,en=tn);return Kt&&la(oe,Nt),et}for(Ke=g(Ke);!tn.done;Nt++,tn=ge.next())tn=we(Ke,oe,Nt,tn.value,Te),tn!==null&&(t&&tn.alternate!==null&&Ke.delete(tn.key===null?Nt:tn.key),se=A(tn,se,Nt),en===null?et=tn:en.sibling=tn,en=tn);return t&&Ke.forEach(function(_3){return s(oe,_3)}),Kt&&la(oe,Nt),et}function xn(oe,se,ge,Te){if(typeof ge=="object"&&ge!==null&&ge.type===W&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case V:e:{for(var et=ge.key;se!==null;){if(se.key===et){if(et=ge.type,et===W){if(se.tag===7){c(oe,se.sibling),Te=E(se,ge.props.children),Te.return=oe,oe=Te;break e}}else if(se.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===U&&Vo(et)===se.type){c(oe,se.sibling),Te=E(se,ge.props),gc(Te,ge),Te.return=oe,oe=Te;break e}c(oe,se);break}else s(oe,se);se=se.sibling}ge.type===W?(Te=Lo(ge.props.children,oe.mode,Te,ge.key),Te.return=oe,oe=Te):(Te=Pu(ge.type,ge.key,ge.props,null,oe.mode,Te),gc(Te,ge),Te.return=oe,oe=Te)}return O(oe);case K:e:{for(et=ge.key;se!==null;){if(se.key===et)if(se.tag===4&&se.stateNode.containerInfo===ge.containerInfo&&se.stateNode.implementation===ge.implementation){c(oe,se.sibling),Te=E(se,ge.children||[]),Te.return=oe,oe=Te;break e}else{c(oe,se);break}else s(oe,se);se=se.sibling}Te=ad(ge,oe.mode,Te),Te.return=oe,oe=Te}return O(oe);case U:return ge=Vo(ge),xn(oe,se,ge,Te)}if(de(ge))return Xe(oe,se,ge,Te);if(Z(ge)){if(et=Z(ge),typeof et!="function")throw Error(o(150));return ge=et.call(ge),at(oe,se,ge,Te)}if(typeof ge.then=="function")return xn(oe,se,zu(ge),Te);if(ge.$$typeof===ee)return xn(oe,se,Uu(oe,ge),Te);Hu(oe,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint"?(ge=""+ge,se!==null&&se.tag===6?(c(oe,se.sibling),Te=E(se,ge),Te.return=oe,oe=Te):(c(oe,se),Te=sd(ge,oe.mode,Te),Te.return=oe,oe=Te),O(oe)):c(oe,se)}return function(oe,se,ge,Te){try{dc=0;var et=xn(oe,se,ge,Te);return yl=null,et}catch(Ke){if(Ke===xl||Ke===ju)throw Ke;var en=ji(29,Ke,null,oe.mode);return en.lanes=Te,en.return=oe,en}finally{}}}var Fo=um(!0),hm=um(!1),Ya=!1;function yd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ed(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function qa(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Xa(t,s,c){var g=t.updateQueue;if(g===null)return null;if(g=g.shared,(sn&2)!==0){var E=g.pending;return E===null?s.next=s:(s.next=E.next,E.next=s),g.pending=s,s=Lu(t),Kg(t,null,c),s}return Mu(t,g,s,c),Lu(t)}function mc(t,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194048)!==0)){var g=s.lanes;g&=t.pendingLanes,c|=g,s.lanes=c,li(t,c)}}function _d(t,s){var c=t.updateQueue,g=t.alternate;if(g!==null&&(g=g.updateQueue,c===g)){var E=null,A=null;if(c=c.firstBaseUpdate,c!==null){do{var O={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};A===null?E=A=O:A=A.next=O,c=c.next}while(c!==null);A===null?E=A=s:A=A.next=s}else E=A=s;c={baseState:g.baseState,firstBaseUpdate:E,lastBaseUpdate:A,shared:g.shared,callbacks:g.callbacks},t.updateQueue=c;return}t=c.lastBaseUpdate,t===null?c.firstBaseUpdate=s:t.next=s,c.lastBaseUpdate=s}var wd=!1;function pc(){if(wd){var t=pl;if(t!==null)throw t}}function xc(t,s,c,g){wd=!1;var E=t.updateQueue;Ya=!1;var A=E.firstBaseUpdate,O=E.lastBaseUpdate,k=E.shared.pending;if(k!==null){E.shared.pending=null;var J=k,me=J.next;J.next=null,O===null?A=me:O.next=me,O=J;var ve=t.alternate;ve!==null&&(ve=ve.updateQueue,k=ve.lastBaseUpdate,k!==O&&(k===null?ve.firstBaseUpdate=me:k.next=me,ve.lastBaseUpdate=J))}if(A!==null){var Se=E.baseState;O=0,ve=me=J=null,k=A;do{var xe=k.lane&-536870913,we=xe!==k.lane;if(we?(Vt&xe)===xe:(g&xe)===xe){xe!==0&&xe===ml&&(wd=!0),ve!==null&&(ve=ve.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var Xe=t,at=k;xe=s;var xn=c;switch(at.tag){case 1:if(Xe=at.payload,typeof Xe=="function"){Se=Xe.call(xn,Se,xe);break e}Se=Xe;break e;case 3:Xe.flags=Xe.flags&-65537|128;case 0:if(Xe=at.payload,xe=typeof Xe=="function"?Xe.call(xn,Se,xe):Xe,xe==null)break e;Se=I({},Se,xe);break e;case 2:Ya=!0}}xe=k.callback,xe!==null&&(t.flags|=64,we&&(t.flags|=8192),we=E.callbacks,we===null?E.callbacks=[xe]:we.push(xe))}else we={lane:xe,tag:k.tag,payload:k.payload,callback:k.callback,next:null},ve===null?(me=ve=we,J=Se):ve=ve.next=we,O|=xe;if(k=k.next,k===null){if(k=E.shared.pending,k===null)break;we=k,k=we.next,we.next=null,E.lastBaseUpdate=we,E.shared.pending=null}}while(!0);ve===null&&(J=Se),E.baseState=J,E.firstBaseUpdate=me,E.lastBaseUpdate=ve,A===null&&(E.shared.lanes=0),Ja|=O,t.lanes=O,t.memoizedState=Se}}function fm(t,s){if(typeof t!="function")throw Error(o(191,t));t.call(s)}function dm(t,s){var c=t.callbacks;if(c!==null)for(t.callbacks=null,t=0;t<c.length;t++)fm(c[t],s)}var El=re(null),Gu=re(0);function gm(t,s){t=Ea,Be(Gu,t),Be(El,s),Ea=t|s.baseLanes}function Ad(){Be(Gu,Ea),Be(El,El.current)}function bd(){Ea=Gu.current,Ae(El),Ae(Gu)}var Fi=re(null),hs=null;function Ka(t){var s=t.alternate;Be(ar,ar.current&1),Be(Fi,t),hs===null&&(s===null||El.current!==null||s.memoizedState!==null)&&(hs=t)}function vd(t){Be(ar,ar.current),Be(Fi,t),hs===null&&(hs=t)}function mm(t){t.tag===22?(Be(ar,ar.current),Be(Fi,t),hs===null&&(hs=t)):Wa()}function Wa(){Be(ar,ar.current),Be(Fi,Fi.current)}function zi(t){Ae(Fi),hs===t&&(hs=null),Ae(ar)}var ar=re(0);function Yu(t){for(var s=t;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||R0(c)||O0(c)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ha=0,Tt=null,mn=null,dr=null,qu=!1,_l=!1,zo=!1,Xu=0,yc=0,wl=null,ub=0;function Qn(){throw Error(o(321))}function Td(t,s){if(s===null)return!1;for(var c=0;c<s.length&&c<t.length;c++)if(!m(t[c],s[c]))return!1;return!0}function Cd(t,s,c,g,E,A){return ha=A,Tt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,pe.H=t===null||t.memoizedState===null?Jm:Fd,zo=!1,A=c(g,E),zo=!1,_l&&(A=xm(s,c,g,E)),pm(t),A}function pm(t){pe.H=wc;var s=mn!==null&&mn.next!==null;if(ha=0,dr=mn=Tt=null,qu=!1,yc=0,wl=null,s)throw Error(o(300));t===null||gr||(t=t.dependencies,t!==null&&ku(t)&&(gr=!0))}function xm(t,s,c,g){Tt=t;var E=0;do{if(_l&&(wl=null),yc=0,_l=!1,25<=E)throw Error(o(301));if(E+=1,dr=mn=null,t.updateQueue!=null){var A=t.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}pe.H=$m,A=s(c,g)}while(_l);return A}function hb(){var t=pe.H,s=t.useState()[0];return s=typeof s.then=="function"?Ec(s):s,t=t.useState()[0],(mn!==null?mn.memoizedState:null)!==t&&(Tt.flags|=1024),s}function Sd(){var t=Xu!==0;return Xu=0,t}function Id(t,s,c){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~c}function Nd(t){if(qu){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}qu=!1}ha=0,dr=mn=Tt=null,_l=!1,yc=Xu=0,wl=null}function gi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dr===null?Tt.memoizedState=dr=t:dr=dr.next=t,dr}function or(){if(mn===null){var t=Tt.alternate;t=t!==null?t.memoizedState:null}else t=mn.next;var s=dr===null?Tt.memoizedState:dr.next;if(s!==null)dr=s,mn=t;else{if(t===null)throw Tt.alternate===null?Error(o(467)):Error(o(310));mn=t,t={memoizedState:mn.memoizedState,baseState:mn.baseState,baseQueue:mn.baseQueue,queue:mn.queue,next:null},dr===null?Tt.memoizedState=dr=t:dr=dr.next=t}return dr}function Ku(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ec(t){var s=yc;return yc+=1,wl===null&&(wl=[]),t=om(wl,t,s),s=Tt,(dr===null?s.memoizedState:dr.next)===null&&(s=s.alternate,pe.H=s===null||s.memoizedState===null?Jm:Fd),t}function Wu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Ec(t);if(t.$$typeof===ee)return kr(t)}throw Error(o(438,String(t)))}function Rd(t){var s=null,c=Tt.updateQueue;if(c!==null&&(s=c.memoCache),s==null){var g=Tt.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(s={data:g.data.map(function(E){return E.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),c===null&&(c=Ku(),Tt.updateQueue=c),c.memoCache=s,c=s.data[s.index],c===void 0)for(c=s.data[s.index]=Array(t),g=0;g<t;g++)c[g]=$;return s.index++,c}function fa(t,s){return typeof s=="function"?s(t):s}function Qu(t){var s=or();return Od(s,mn,t)}function Od(t,s,c){var g=t.queue;if(g===null)throw Error(o(311));g.lastRenderedReducer=c;var E=t.baseQueue,A=g.pending;if(A!==null){if(E!==null){var O=E.next;E.next=A.next,A.next=O}s.baseQueue=E=A,g.pending=null}if(A=t.baseState,E===null)t.memoizedState=A;else{s=E.next;var k=O=null,J=null,me=s,ve=!1;do{var Se=me.lane&-536870913;if(Se!==me.lane?(Vt&Se)===Se:(ha&Se)===Se){var xe=me.revertLane;if(xe===0)J!==null&&(J=J.next={lane:0,revertLane:0,gesture:null,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null}),Se===ml&&(ve=!0);else if((ha&xe)===xe){me=me.next,xe===ml&&(ve=!0);continue}else Se={lane:0,revertLane:me.revertLane,gesture:null,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null},J===null?(k=J=Se,O=A):J=J.next=Se,Tt.lanes|=xe,Ja|=xe;Se=me.action,zo&&c(A,Se),A=me.hasEagerState?me.eagerState:c(A,Se)}else xe={lane:Se,revertLane:me.revertLane,gesture:me.gesture,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null},J===null?(k=J=xe,O=A):J=J.next=xe,Tt.lanes|=Se,Ja|=Se;me=me.next}while(me!==null&&me!==s);if(J===null?O=A:J.next=k,!m(A,t.memoizedState)&&(gr=!0,ve&&(c=pl,c!==null)))throw c;t.memoizedState=A,t.baseState=O,t.baseQueue=J,g.lastRenderedState=A}return E===null&&(g.lanes=0),[t.memoizedState,g.dispatch]}function Dd(t){var s=or(),c=s.queue;if(c===null)throw Error(o(311));c.lastRenderedReducer=t;var g=c.dispatch,E=c.pending,A=s.memoizedState;if(E!==null){c.pending=null;var O=E=E.next;do A=t(A,O.action),O=O.next;while(O!==E);m(A,s.memoizedState)||(gr=!0),s.memoizedState=A,s.baseQueue===null&&(s.baseState=A),c.lastRenderedState=A}return[A,g]}function ym(t,s,c){var g=Tt,E=or(),A=Kt;if(A){if(c===void 0)throw Error(o(407));c=c()}else c=s();var O=!m((mn||E).memoizedState,c);if(O&&(E.memoizedState=c,gr=!0),E=E.queue,Pd(wm.bind(null,g,E,t),[t]),E.getSnapshot!==s||O||dr!==null&&dr.memoizedState.tag&1){if(g.flags|=2048,Al(9,{destroy:void 0},_m.bind(null,g,E,c,s),null),Sn===null)throw Error(o(349));A||(ha&127)!==0||Em(g,s,c)}return c}function Em(t,s,c){t.flags|=16384,t={getSnapshot:s,value:c},s=Tt.updateQueue,s===null?(s=Ku(),Tt.updateQueue=s,s.stores=[t]):(c=s.stores,c===null?s.stores=[t]:c.push(t))}function _m(t,s,c,g){s.value=c,s.getSnapshot=g,Am(s)&&bm(t)}function wm(t,s,c){return c(function(){Am(s)&&bm(t)})}function Am(t){var s=t.getSnapshot;t=t.value;try{var c=s();return!m(t,c)}catch{return!0}}function bm(t){var s=Mo(t,2);s!==null&&Ii(s,t,2)}function Md(t){var s=gi();if(typeof t=="function"){var c=t;if(t=c(),zo){Yt(!0);try{c()}finally{Yt(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:t},s}function vm(t,s,c,g){return t.baseState=c,Od(t,mn,typeof g=="function"?g:fa)}function fb(t,s,c,g,E){if($u(t))throw Error(o(485));if(t=s.action,t!==null){var A={payload:E,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(O){A.listeners.push(O)}};pe.T!==null?c(!0):A.isTransition=!1,g(A),c=s.pending,c===null?(A.next=s.pending=A,Tm(s,A)):(A.next=c.next,s.pending=c.next=A)}}function Tm(t,s){var c=s.action,g=s.payload,E=t.state;if(s.isTransition){var A=pe.T,O={};pe.T=O;try{var k=c(E,g),J=pe.S;J!==null&&J(O,k),Cm(t,s,k)}catch(me){Ld(t,s,me)}finally{A!==null&&O.types!==null&&(A.types=O.types),pe.T=A}}else try{A=c(E,g),Cm(t,s,A)}catch(me){Ld(t,s,me)}}function Cm(t,s,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(g){Sm(t,s,g)},function(g){return Ld(t,s,g)}):Sm(t,s,c)}function Sm(t,s,c){s.status="fulfilled",s.value=c,Im(s),t.state=c,s=t.pending,s!==null&&(c=s.next,c===s?t.pending=null:(c=c.next,s.next=c,Tm(t,c)))}function Ld(t,s,c){var g=t.pending;if(t.pending=null,g!==null){g=g.next;do s.status="rejected",s.reason=c,Im(s),s=s.next;while(s!==g)}t.action=null}function Im(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function Nm(t,s){return s}function Rm(t,s){if(Kt){var c=Sn.formState;if(c!==null){e:{var g=Tt;if(Kt){if(On){t:{for(var E=On,A=us;E.nodeType!==8;){if(!A){E=null;break t}if(E=fs(E.nextSibling),E===null){E=null;break t}}A=E.data,E=A==="F!"||A==="F"?E:null}if(E){On=fs(E.nextSibling),g=E.data==="F!";break e}}Ha(g)}g=!1}g&&(s=c[0])}}return c=gi(),c.memoizedState=c.baseState=s,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nm,lastRenderedState:s},c.queue=g,c=Wm.bind(null,Tt,g),g.dispatch=c,g=Md(!1),A=jd.bind(null,Tt,!1,g.queue),g=gi(),E={state:s,dispatch:null,action:t,pending:null},g.queue=E,c=fb.bind(null,Tt,E,A,c),E.dispatch=c,g.memoizedState=t,[s,c,!1]}function Om(t){var s=or();return Dm(s,mn,t)}function Dm(t,s,c){if(s=Od(t,s,Nm)[0],t=Qu(fa)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var g=Ec(s)}catch(O){throw O===xl?ju:O}else g=s;s=or();var E=s.queue,A=E.dispatch;return c!==s.memoizedState&&(Tt.flags|=2048,Al(9,{destroy:void 0},db.bind(null,E,c),null)),[g,A,t]}function db(t,s){t.action=s}function Mm(t){var s=or(),c=mn;if(c!==null)return Dm(s,c,t);or(),s=s.memoizedState,c=or();var g=c.queue.dispatch;return c.memoizedState=t,[s,g,!1]}function Al(t,s,c,g){return t={tag:t,create:c,deps:g,inst:s,next:null},s=Tt.updateQueue,s===null&&(s=Ku(),Tt.updateQueue=s),c=s.lastEffect,c===null?s.lastEffect=t.next=t:(g=c.next,c.next=t,t.next=g,s.lastEffect=t),t}function Lm(){return or().memoizedState}function Zu(t,s,c,g){var E=gi();Tt.flags|=t,E.memoizedState=Al(1|s,{destroy:void 0},c,g===void 0?null:g)}function Ju(t,s,c,g){var E=or();g=g===void 0?null:g;var A=E.memoizedState.inst;mn!==null&&g!==null&&Td(g,mn.memoizedState.deps)?E.memoizedState=Al(s,A,c,g):(Tt.flags|=t,E.memoizedState=Al(1|s,A,c,g))}function Pm(t,s){Zu(8390656,8,t,s)}function Pd(t,s){Ju(2048,8,t,s)}function gb(t){Tt.flags|=4;var s=Tt.updateQueue;if(s===null)s=Ku(),Tt.updateQueue=s,s.events=[t];else{var c=s.events;c===null?s.events=[t]:c.push(t)}}function Bm(t){var s=or().memoizedState;return gb({ref:s,nextImpl:t}),function(){if((sn&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}function km(t,s){return Ju(4,2,t,s)}function Um(t,s){return Ju(4,4,t,s)}function Vm(t,s){if(typeof s=="function"){t=t();var c=s(t);return function(){typeof c=="function"?c():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function jm(t,s,c){c=c!=null?c.concat([t]):null,Ju(4,4,Vm.bind(null,s,t),c)}function Bd(){}function Fm(t,s){var c=or();s=s===void 0?null:s;var g=c.memoizedState;return s!==null&&Td(s,g[1])?g[0]:(c.memoizedState=[t,s],t)}function zm(t,s){var c=or();s=s===void 0?null:s;var g=c.memoizedState;if(s!==null&&Td(s,g[1]))return g[0];if(g=t(),zo){Yt(!0);try{t()}finally{Yt(!1)}}return c.memoizedState=[g,s],g}function kd(t,s,c){return c===void 0||(ha&1073741824)!==0&&(Vt&261930)===0?t.memoizedState=s:(t.memoizedState=c,t=Hp(),Tt.lanes|=t,Ja|=t,c)}function Hm(t,s,c,g){return m(c,s)?c:El.current!==null?(t=kd(t,c,g),m(t,s)||(gr=!0),t):(ha&42)===0||(ha&1073741824)!==0&&(Vt&261930)===0?(gr=!0,t.memoizedState=c):(t=Hp(),Tt.lanes|=t,Ja|=t,s)}function Gm(t,s,c,g,E){var A=be.p;be.p=A!==0&&8>A?A:8;var O=pe.T,k={};pe.T=k,jd(t,!1,s,c);try{var J=E(),me=pe.S;if(me!==null&&me(k,J),J!==null&&typeof J=="object"&&typeof J.then=="function"){var ve=cb(J,g);_c(t,s,ve,Yi(t))}else _c(t,s,g,Yi(t))}catch(Se){_c(t,s,{then:function(){},status:"rejected",reason:Se},Yi())}finally{be.p=A,O!==null&&k.types!==null&&(O.types=k.types),pe.T=O}}function mb(){}function Ud(t,s,c,g){if(t.tag!==5)throw Error(o(476));var E=Ym(t).queue;Gm(t,E,s,He,c===null?mb:function(){return qm(t),c(g)})}function Ym(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:He,baseState:He,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:He},next:null};var c={};return s.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:c},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function qm(t){var s=Ym(t);s.next===null&&(s=t.alternate.memoizedState),_c(t,s.next.queue,{},Yi())}function Vd(){return kr(kc)}function Xm(){return or().memoizedState}function Km(){return or().memoizedState}function pb(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var c=Yi();t=qa(c);var g=Xa(s,t,c);g!==null&&(Ii(g,s,c),mc(g,s,c)),s={cache:gd()},t.payload=s;return}s=s.return}}function xb(t,s,c){var g=Yi();c={lane:g,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},$u(t)?Qm(s,c):(c=rd(t,s,c,g),c!==null&&(Ii(c,t,g),Zm(c,s,g)))}function Wm(t,s,c){var g=Yi();_c(t,s,c,g)}function _c(t,s,c,g){var E={lane:g,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if($u(t))Qm(s,E);else{var A=t.alternate;if(t.lanes===0&&(A===null||A.lanes===0)&&(A=s.lastRenderedReducer,A!==null))try{var O=s.lastRenderedState,k=A(O,c);if(E.hasEagerState=!0,E.eagerState=k,m(k,O))return Mu(t,s,E,0),Sn===null&&Du(),!1}catch{}finally{}if(c=rd(t,s,E,g),c!==null)return Ii(c,t,g),Zm(c,s,g),!0}return!1}function jd(t,s,c,g){if(g={lane:2,revertLane:y0(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},$u(t)){if(s)throw Error(o(479))}else s=rd(t,c,g,2),s!==null&&Ii(s,t,2)}function $u(t){var s=t.alternate;return t===Tt||s!==null&&s===Tt}function Qm(t,s){_l=qu=!0;var c=t.pending;c===null?s.next=s:(s.next=c.next,c.next=s),t.pending=s}function Zm(t,s,c){if((c&4194048)!==0){var g=s.lanes;g&=t.pendingLanes,c|=g,s.lanes=c,li(t,c)}}var wc={readContext:kr,use:Wu,useCallback:Qn,useContext:Qn,useEffect:Qn,useImperativeHandle:Qn,useLayoutEffect:Qn,useInsertionEffect:Qn,useMemo:Qn,useReducer:Qn,useRef:Qn,useState:Qn,useDebugValue:Qn,useDeferredValue:Qn,useTransition:Qn,useSyncExternalStore:Qn,useId:Qn,useHostTransitionStatus:Qn,useFormState:Qn,useActionState:Qn,useOptimistic:Qn,useMemoCache:Qn,useCacheRefresh:Qn};wc.useEffectEvent=Qn;var Jm={readContext:kr,use:Wu,useCallback:function(t,s){return gi().memoizedState=[t,s===void 0?null:s],t},useContext:kr,useEffect:Pm,useImperativeHandle:function(t,s,c){c=c!=null?c.concat([t]):null,Zu(4194308,4,Vm.bind(null,s,t),c)},useLayoutEffect:function(t,s){return Zu(4194308,4,t,s)},useInsertionEffect:function(t,s){Zu(4,2,t,s)},useMemo:function(t,s){var c=gi();s=s===void 0?null:s;var g=t();if(zo){Yt(!0);try{t()}finally{Yt(!1)}}return c.memoizedState=[g,s],g},useReducer:function(t,s,c){var g=gi();if(c!==void 0){var E=c(s);if(zo){Yt(!0);try{c(s)}finally{Yt(!1)}}}else E=s;return g.memoizedState=g.baseState=E,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:E},g.queue=t,t=t.dispatch=xb.bind(null,Tt,t),[g.memoizedState,t]},useRef:function(t){var s=gi();return t={current:t},s.memoizedState=t},useState:function(t){t=Md(t);var s=t.queue,c=Wm.bind(null,Tt,s);return s.dispatch=c,[t.memoizedState,c]},useDebugValue:Bd,useDeferredValue:function(t,s){var c=gi();return kd(c,t,s)},useTransition:function(){var t=Md(!1);return t=Gm.bind(null,Tt,t.queue,!0,!1),gi().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,c){var g=Tt,E=gi();if(Kt){if(c===void 0)throw Error(o(407));c=c()}else{if(c=s(),Sn===null)throw Error(o(349));(Vt&127)!==0||Em(g,s,c)}E.memoizedState=c;var A={value:c,getSnapshot:s};return E.queue=A,Pm(wm.bind(null,g,A,t),[t]),g.flags|=2048,Al(9,{destroy:void 0},_m.bind(null,g,A,c,s),null),c},useId:function(){var t=gi(),s=Sn.identifierPrefix;if(Kt){var c=Vs,g=Us;c=(g&~(1<<32-rt(g)-1)).toString(32)+c,s="_"+s+"R_"+c,c=Xu++,0<c&&(s+="H"+c.toString(32)),s+="_"}else c=ub++,s="_"+s+"r_"+c.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:Vd,useFormState:Rm,useActionState:Rm,useOptimistic:function(t){var s=gi();s.memoizedState=s.baseState=t;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=c,s=jd.bind(null,Tt,!0,c),c.dispatch=s,[t,s]},useMemoCache:Rd,useCacheRefresh:function(){return gi().memoizedState=pb.bind(null,Tt)},useEffectEvent:function(t){var s=gi(),c={impl:t};return s.memoizedState=c,function(){if((sn&2)!==0)throw Error(o(440));return c.impl.apply(void 0,arguments)}}},Fd={readContext:kr,use:Wu,useCallback:Fm,useContext:kr,useEffect:Pd,useImperativeHandle:jm,useInsertionEffect:km,useLayoutEffect:Um,useMemo:zm,useReducer:Qu,useRef:Lm,useState:function(){return Qu(fa)},useDebugValue:Bd,useDeferredValue:function(t,s){var c=or();return Hm(c,mn.memoizedState,t,s)},useTransition:function(){var t=Qu(fa)[0],s=or().memoizedState;return[typeof t=="boolean"?t:Ec(t),s]},useSyncExternalStore:ym,useId:Xm,useHostTransitionStatus:Vd,useFormState:Om,useActionState:Om,useOptimistic:function(t,s){var c=or();return vm(c,mn,t,s)},useMemoCache:Rd,useCacheRefresh:Km};Fd.useEffectEvent=Bm;var $m={readContext:kr,use:Wu,useCallback:Fm,useContext:kr,useEffect:Pd,useImperativeHandle:jm,useInsertionEffect:km,useLayoutEffect:Um,useMemo:zm,useReducer:Dd,useRef:Lm,useState:function(){return Dd(fa)},useDebugValue:Bd,useDeferredValue:function(t,s){var c=or();return mn===null?kd(c,t,s):Hm(c,mn.memoizedState,t,s)},useTransition:function(){var t=Dd(fa)[0],s=or().memoizedState;return[typeof t=="boolean"?t:Ec(t),s]},useSyncExternalStore:ym,useId:Xm,useHostTransitionStatus:Vd,useFormState:Mm,useActionState:Mm,useOptimistic:function(t,s){var c=or();return mn!==null?vm(c,mn,t,s):(c.baseState=t,[t,c.queue.dispatch])},useMemoCache:Rd,useCacheRefresh:Km};$m.useEffectEvent=Bm;function zd(t,s,c,g){s=t.memoizedState,c=c(g,s),c=c==null?s:I({},s,c),t.memoizedState=c,t.lanes===0&&(t.updateQueue.baseState=c)}var Hd={enqueueSetState:function(t,s,c){t=t._reactInternals;var g=Yi(),E=qa(g);E.payload=s,c!=null&&(E.callback=c),s=Xa(t,E,g),s!==null&&(Ii(s,t,g),mc(s,t,g))},enqueueReplaceState:function(t,s,c){t=t._reactInternals;var g=Yi(),E=qa(g);E.tag=1,E.payload=s,c!=null&&(E.callback=c),s=Xa(t,E,g),s!==null&&(Ii(s,t,g),mc(s,t,g))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var c=Yi(),g=qa(c);g.tag=2,s!=null&&(g.callback=s),s=Xa(t,g,c),s!==null&&(Ii(s,t,c),mc(s,t,c))}};function ep(t,s,c,g,E,A,O){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(g,A,O):s.prototype&&s.prototype.isPureReactComponent?!x(c,g)||!x(E,A):!0}function tp(t,s,c,g){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,g),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,g),s.state!==t&&Hd.enqueueReplaceState(s,s.state,null)}function Ho(t,s){var c=s;if("ref"in s){c={};for(var g in s)g!=="ref"&&(c[g]=s[g])}if(t=t.defaultProps){c===s&&(c=I({},c));for(var E in t)c[E]===void 0&&(c[E]=t[E])}return c}function np(t){Ou(t)}function rp(t){console.error(t)}function ip(t){Ou(t)}function eh(t,s){try{var c=t.onUncaughtError;c(s.value,{componentStack:s.stack})}catch(g){setTimeout(function(){throw g})}}function sp(t,s,c){try{var g=t.onCaughtError;g(c.value,{componentStack:c.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function Gd(t,s,c){return c=qa(c),c.tag=3,c.payload={element:null},c.callback=function(){eh(t,s)},c}function ap(t){return t=qa(t),t.tag=3,t}function op(t,s,c,g){var E=c.type.getDerivedStateFromError;if(typeof E=="function"){var A=g.value;t.payload=function(){return E(A)},t.callback=function(){sp(s,c,g)}}var O=c.stateNode;O!==null&&typeof O.componentDidCatch=="function"&&(t.callback=function(){sp(s,c,g),typeof E!="function"&&($a===null?$a=new Set([this]):$a.add(this));var k=g.stack;this.componentDidCatch(g.value,{componentStack:k!==null?k:""})})}function yb(t,s,c,g,E){if(c.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(s=c.alternate,s!==null&&gl(s,c,E,!0),c=Fi.current,c!==null){switch(c.tag){case 31:case 13:return hs===null?fh():c.alternate===null&&Zn===0&&(Zn=3),c.flags&=-257,c.flags|=65536,c.lanes=E,g===Fu?c.flags|=16384:(s=c.updateQueue,s===null?c.updateQueue=new Set([g]):s.add(g),m0(t,g,E)),!1;case 22:return c.flags|=65536,g===Fu?c.flags|=16384:(s=c.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([g])},c.updateQueue=s):(c=s.retryQueue,c===null?s.retryQueue=new Set([g]):c.add(g)),m0(t,g,E)),!1}throw Error(o(435,c.tag))}return m0(t,g,E),fh(),!1}if(Kt)return s=Fi.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=E,g!==cd&&(t=Error(o(422),{cause:g}),uc(os(t,c)))):(g!==cd&&(s=Error(o(423),{cause:g}),uc(os(s,c))),t=t.current.alternate,t.flags|=65536,E&=-E,t.lanes|=E,g=os(g,c),E=Gd(t.stateNode,g,E),_d(t,E),Zn!==4&&(Zn=2)),!1;var A=Error(o(520),{cause:g});if(A=os(A,c),Nc===null?Nc=[A]:Nc.push(A),Zn!==4&&(Zn=2),s===null)return!0;g=os(g,c),c=s;do{switch(c.tag){case 3:return c.flags|=65536,t=E&-E,c.lanes|=t,t=Gd(c.stateNode,g,t),_d(c,t),!1;case 1:if(s=c.type,A=c.stateNode,(c.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&($a===null||!$a.has(A))))return c.flags|=65536,E&=-E,c.lanes|=E,E=ap(E),op(E,t,c,g),_d(c,E),!1}c=c.return}while(c!==null);return!1}var Yd=Error(o(461)),gr=!1;function Ur(t,s,c,g){s.child=t===null?hm(s,null,c,g):Fo(s,t.child,c,g)}function lp(t,s,c,g,E){c=c.render;var A=s.ref;if("ref"in g){var O={};for(var k in g)k!=="ref"&&(O[k]=g[k])}else O=g;return ko(s),g=Cd(t,s,c,O,A,E),k=Sd(),t!==null&&!gr?(Id(t,s,E),da(t,s,E)):(Kt&&k&&od(s),s.flags|=1,Ur(t,s,g,E),s.child)}function cp(t,s,c,g,E){if(t===null){var A=c.type;return typeof A=="function"&&!id(A)&&A.defaultProps===void 0&&c.compare===null?(s.tag=15,s.type=A,up(t,s,A,g,E)):(t=Pu(c.type,null,g,s,s.mode,E),t.ref=s.ref,t.return=s,s.child=t)}if(A=t.child,!$d(t,E)){var O=A.memoizedProps;if(c=c.compare,c=c!==null?c:x,c(O,g)&&t.ref===s.ref)return da(t,s,E)}return s.flags|=1,t=oa(A,g),t.ref=s.ref,t.return=s,s.child=t}function up(t,s,c,g,E){if(t!==null){var A=t.memoizedProps;if(x(A,g)&&t.ref===s.ref)if(gr=!1,s.pendingProps=g=A,$d(t,E))(t.flags&131072)!==0&&(gr=!0);else return s.lanes=t.lanes,da(t,s,E)}return qd(t,s,c,g,E)}function hp(t,s,c,g){var E=g.children,A=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((s.flags&128)!==0){if(A=A!==null?A.baseLanes|c:c,t!==null){for(g=s.child=t.child,E=0;g!==null;)E=E|g.lanes|g.childLanes,g=g.sibling;g=E&~A}else g=0,s.child=null;return fp(t,s,A,c,g)}if((c&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&Vu(s,A!==null?A.cachePool:null),A!==null?gm(s,A):Ad(),mm(s);else return g=s.lanes=536870912,fp(t,s,A!==null?A.baseLanes|c:c,c,g)}else A!==null?(Vu(s,A.cachePool),gm(s,A),Wa(),s.memoizedState=null):(t!==null&&Vu(s,null),Ad(),Wa());return Ur(t,s,E,c),s.child}function Ac(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function fp(t,s,c,g,E){var A=pd();return A=A===null?null:{parent:fr._currentValue,pool:A},s.memoizedState={baseLanes:c,cachePool:A},t!==null&&Vu(s,null),Ad(),mm(s),t!==null&&gl(t,s,g,!0),s.childLanes=E,null}function th(t,s){return s=rh({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function dp(t,s,c){return Fo(s,t.child,null,c),t=th(s,s.pendingProps),t.flags|=2,zi(s),s.memoizedState=null,t}function Eb(t,s,c){var g=s.pendingProps,E=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(Kt){if(g.mode==="hidden")return t=th(s,g),s.lanes=536870912,Ac(null,t);if(vd(s),(t=On)?(t=T2(t,us),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Fa!==null?{id:Us,overflow:Vs}:null,retryLane:536870912,hydrationErrors:null},c=Qg(t),c.return=s,s.child=c,Br=s,On=null)):t=null,t===null)throw Ha(s);return s.lanes=536870912,null}return th(s,g)}var A=t.memoizedState;if(A!==null){var O=A.dehydrated;if(vd(s),E)if(s.flags&256)s.flags&=-257,s=dp(t,s,c);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(o(558));else if(gr||gl(t,s,c,!1),E=(c&t.childLanes)!==0,gr||E){if(g=Sn,g!==null&&(O=Zi(g,c),O!==0&&O!==A.retryLane))throw A.retryLane=O,Mo(t,O),Ii(g,t,O),Yd;fh(),s=dp(t,s,c)}else t=A.treeContext,On=fs(O.nextSibling),Br=s,Kt=!0,za=null,us=!1,t!==null&&$g(s,t),s=th(s,g),s.flags|=4096;return s}return t=oa(t.child,{mode:g.mode,children:g.children}),t.ref=s.ref,s.child=t,t.return=s,t}function nh(t,s){var c=s.ref;if(c===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(o(284));(t===null||t.ref!==c)&&(s.flags|=4194816)}}function qd(t,s,c,g,E){return ko(s),c=Cd(t,s,c,g,void 0,E),g=Sd(),t!==null&&!gr?(Id(t,s,E),da(t,s,E)):(Kt&&g&&od(s),s.flags|=1,Ur(t,s,c,E),s.child)}function gp(t,s,c,g,E,A){return ko(s),s.updateQueue=null,c=xm(s,g,c,E),pm(t),g=Sd(),t!==null&&!gr?(Id(t,s,A),da(t,s,A)):(Kt&&g&&od(s),s.flags|=1,Ur(t,s,c,A),s.child)}function mp(t,s,c,g,E){if(ko(s),s.stateNode===null){var A=ul,O=c.contextType;typeof O=="object"&&O!==null&&(A=kr(O)),A=new c(g,A),s.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=Hd,s.stateNode=A,A._reactInternals=s,A=s.stateNode,A.props=g,A.state=s.memoizedState,A.refs={},yd(s),O=c.contextType,A.context=typeof O=="object"&&O!==null?kr(O):ul,A.state=s.memoizedState,O=c.getDerivedStateFromProps,typeof O=="function"&&(zd(s,c,O,g),A.state=s.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(O=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),O!==A.state&&Hd.enqueueReplaceState(A,A.state,null),xc(s,g,A,E),pc(),A.state=s.memoizedState),typeof A.componentDidMount=="function"&&(s.flags|=4194308),g=!0}else if(t===null){A=s.stateNode;var k=s.memoizedProps,J=Ho(c,k);A.props=J;var me=A.context,ve=c.contextType;O=ul,typeof ve=="object"&&ve!==null&&(O=kr(ve));var Se=c.getDerivedStateFromProps;ve=typeof Se=="function"||typeof A.getSnapshotBeforeUpdate=="function",k=s.pendingProps!==k,ve||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(k||me!==O)&&tp(s,A,g,O),Ya=!1;var xe=s.memoizedState;A.state=xe,xc(s,g,A,E),pc(),me=s.memoizedState,k||xe!==me||Ya?(typeof Se=="function"&&(zd(s,c,Se,g),me=s.memoizedState),(J=Ya||ep(s,c,J,g,xe,me,O))?(ve||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(s.flags|=4194308)):(typeof A.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=g,s.memoizedState=me),A.props=g,A.state=me,A.context=O,g=J):(typeof A.componentDidMount=="function"&&(s.flags|=4194308),g=!1)}else{A=s.stateNode,Ed(t,s),O=s.memoizedProps,ve=Ho(c,O),A.props=ve,Se=s.pendingProps,xe=A.context,me=c.contextType,J=ul,typeof me=="object"&&me!==null&&(J=kr(me)),k=c.getDerivedStateFromProps,(me=typeof k=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(O!==Se||xe!==J)&&tp(s,A,g,J),Ya=!1,xe=s.memoizedState,A.state=xe,xc(s,g,A,E),pc();var we=s.memoizedState;O!==Se||xe!==we||Ya||t!==null&&t.dependencies!==null&&ku(t.dependencies)?(typeof k=="function"&&(zd(s,c,k,g),we=s.memoizedState),(ve=Ya||ep(s,c,ve,g,xe,we,J)||t!==null&&t.dependencies!==null&&ku(t.dependencies))?(me||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(g,we,J),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(g,we,J)),typeof A.componentDidUpdate=="function"&&(s.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof A.componentDidUpdate!="function"||O===t.memoizedProps&&xe===t.memoizedState||(s.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||O===t.memoizedProps&&xe===t.memoizedState||(s.flags|=1024),s.memoizedProps=g,s.memoizedState=we),A.props=g,A.state=we,A.context=J,g=ve):(typeof A.componentDidUpdate!="function"||O===t.memoizedProps&&xe===t.memoizedState||(s.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||O===t.memoizedProps&&xe===t.memoizedState||(s.flags|=1024),g=!1)}return A=g,nh(t,s),g=(s.flags&128)!==0,A||g?(A=s.stateNode,c=g&&typeof c.getDerivedStateFromError!="function"?null:A.render(),s.flags|=1,t!==null&&g?(s.child=Fo(s,t.child,null,E),s.child=Fo(s,null,c,E)):Ur(t,s,c,E),s.memoizedState=A.state,t=s.child):t=da(t,s,E),t}function pp(t,s,c,g){return Po(),s.flags|=256,Ur(t,s,c,g),s.child}var Xd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Kd(t){return{baseLanes:t,cachePool:sm()}}function Wd(t,s,c){return t=t!==null?t.childLanes&~c:0,s&&(t|=Gi),t}function xp(t,s,c){var g=s.pendingProps,E=!1,A=(s.flags&128)!==0,O;if((O=A)||(O=t!==null&&t.memoizedState===null?!1:(ar.current&2)!==0),O&&(E=!0,s.flags&=-129),O=(s.flags&32)!==0,s.flags&=-33,t===null){if(Kt){if(E?Ka(s):Wa(),(t=On)?(t=T2(t,us),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Fa!==null?{id:Us,overflow:Vs}:null,retryLane:536870912,hydrationErrors:null},c=Qg(t),c.return=s,s.child=c,Br=s,On=null)):t=null,t===null)throw Ha(s);return O0(t)?s.lanes=32:s.lanes=536870912,null}var k=g.children;return g=g.fallback,E?(Wa(),E=s.mode,k=rh({mode:"hidden",children:k},E),g=Lo(g,E,c,null),k.return=s,g.return=s,k.sibling=g,s.child=k,g=s.child,g.memoizedState=Kd(c),g.childLanes=Wd(t,O,c),s.memoizedState=Xd,Ac(null,g)):(Ka(s),Qd(s,k))}var J=t.memoizedState;if(J!==null&&(k=J.dehydrated,k!==null)){if(A)s.flags&256?(Ka(s),s.flags&=-257,s=Zd(t,s,c)):s.memoizedState!==null?(Wa(),s.child=t.child,s.flags|=128,s=null):(Wa(),k=g.fallback,E=s.mode,g=rh({mode:"visible",children:g.children},E),k=Lo(k,E,c,null),k.flags|=2,g.return=s,k.return=s,g.sibling=k,s.child=g,Fo(s,t.child,null,c),g=s.child,g.memoizedState=Kd(c),g.childLanes=Wd(t,O,c),s.memoizedState=Xd,s=Ac(null,g));else if(Ka(s),O0(k)){if(O=k.nextSibling&&k.nextSibling.dataset,O)var me=O.dgst;O=me,g=Error(o(419)),g.stack="",g.digest=O,uc({value:g,source:null,stack:null}),s=Zd(t,s,c)}else if(gr||gl(t,s,c,!1),O=(c&t.childLanes)!==0,gr||O){if(O=Sn,O!==null&&(g=Zi(O,c),g!==0&&g!==J.retryLane))throw J.retryLane=g,Mo(t,g),Ii(O,t,g),Yd;R0(k)||fh(),s=Zd(t,s,c)}else R0(k)?(s.flags|=192,s.child=t.child,s=null):(t=J.treeContext,On=fs(k.nextSibling),Br=s,Kt=!0,za=null,us=!1,t!==null&&$g(s,t),s=Qd(s,g.children),s.flags|=4096);return s}return E?(Wa(),k=g.fallback,E=s.mode,J=t.child,me=J.sibling,g=oa(J,{mode:"hidden",children:g.children}),g.subtreeFlags=J.subtreeFlags&65011712,me!==null?k=oa(me,k):(k=Lo(k,E,c,null),k.flags|=2),k.return=s,g.return=s,g.sibling=k,s.child=g,Ac(null,g),g=s.child,k=t.child.memoizedState,k===null?k=Kd(c):(E=k.cachePool,E!==null?(J=fr._currentValue,E=E.parent!==J?{parent:J,pool:J}:E):E=sm(),k={baseLanes:k.baseLanes|c,cachePool:E}),g.memoizedState=k,g.childLanes=Wd(t,O,c),s.memoizedState=Xd,Ac(t.child,g)):(Ka(s),c=t.child,t=c.sibling,c=oa(c,{mode:"visible",children:g.children}),c.return=s,c.sibling=null,t!==null&&(O=s.deletions,O===null?(s.deletions=[t],s.flags|=16):O.push(t)),s.child=c,s.memoizedState=null,c)}function Qd(t,s){return s=rh({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function rh(t,s){return t=ji(22,t,null,s),t.lanes=0,t}function Zd(t,s,c){return Fo(s,t.child,null,c),t=Qd(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function yp(t,s,c){t.lanes|=s;var g=t.alternate;g!==null&&(g.lanes|=s),fd(t.return,s,c)}function Jd(t,s,c,g,E,A){var O=t.memoizedState;O===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:g,tail:c,tailMode:E,treeForkCount:A}:(O.isBackwards=s,O.rendering=null,O.renderingStartTime=0,O.last=g,O.tail=c,O.tailMode=E,O.treeForkCount=A)}function Ep(t,s,c){var g=s.pendingProps,E=g.revealOrder,A=g.tail;g=g.children;var O=ar.current,k=(O&2)!==0;if(k?(O=O&1|2,s.flags|=128):O&=1,Be(ar,O),Ur(t,s,g,c),g=Kt?cc:0,!k&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&yp(t,c,s);else if(t.tag===19)yp(t,c,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(E){case"forwards":for(c=s.child,E=null;c!==null;)t=c.alternate,t!==null&&Yu(t)===null&&(E=c),c=c.sibling;c=E,c===null?(E=s.child,s.child=null):(E=c.sibling,c.sibling=null),Jd(s,!1,E,c,A,g);break;case"backwards":case"unstable_legacy-backwards":for(c=null,E=s.child,s.child=null;E!==null;){if(t=E.alternate,t!==null&&Yu(t)===null){s.child=E;break}t=E.sibling,E.sibling=c,c=E,E=t}Jd(s,!0,c,null,A,g);break;case"together":Jd(s,!1,null,null,void 0,g);break;default:s.memoizedState=null}return s.child}function da(t,s,c){if(t!==null&&(s.dependencies=t.dependencies),Ja|=s.lanes,(c&s.childLanes)===0)if(t!==null){if(gl(t,s,c,!1),(c&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(o(153));if(s.child!==null){for(t=s.child,c=oa(t,t.pendingProps),s.child=c,c.return=s;t.sibling!==null;)t=t.sibling,c=c.sibling=oa(t,t.pendingProps),c.return=s;c.sibling=null}return s.child}function $d(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&ku(t)))}function _b(t,s,c){switch(s.tag){case 3:Ct(s,s.stateNode.containerInfo),Ga(s,fr,t.memoizedState.cache),Po();break;case 27:case 5:Dr(s);break;case 4:Ct(s,s.stateNode.containerInfo);break;case 10:Ga(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,vd(s),null;break;case 13:var g=s.memoizedState;if(g!==null)return g.dehydrated!==null?(Ka(s),s.flags|=128,null):(c&s.child.childLanes)!==0?xp(t,s,c):(Ka(s),t=da(t,s,c),t!==null?t.sibling:null);Ka(s);break;case 19:var E=(t.flags&128)!==0;if(g=(c&s.childLanes)!==0,g||(gl(t,s,c,!1),g=(c&s.childLanes)!==0),E){if(g)return Ep(t,s,c);s.flags|=128}if(E=s.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Be(ar,ar.current),g)break;return null;case 22:return s.lanes=0,hp(t,s,c,s.pendingProps);case 24:Ga(s,fr,t.memoizedState.cache)}return da(t,s,c)}function _p(t,s,c){if(t!==null)if(t.memoizedProps!==s.pendingProps)gr=!0;else{if(!$d(t,c)&&(s.flags&128)===0)return gr=!1,_b(t,s,c);gr=(t.flags&131072)!==0}else gr=!1,Kt&&(s.flags&1048576)!==0&&Jg(s,cc,s.index);switch(s.lanes=0,s.tag){case 16:e:{var g=s.pendingProps;if(t=Vo(s.elementType),s.type=t,typeof t=="function")id(t)?(g=Ho(t,g),s.tag=1,s=mp(null,s,t,g,c)):(s.tag=0,s=qd(null,s,t,g,c));else{if(t!=null){var E=t.$$typeof;if(E===fe){s.tag=11,s=lp(null,s,t,g,c);break e}else if(E===z){s.tag=14,s=cp(null,s,t,g,c);break e}}throw s=We(t)||t,Error(o(306,s,""))}}return s;case 0:return qd(t,s,s.type,s.pendingProps,c);case 1:return g=s.type,E=Ho(g,s.pendingProps),mp(t,s,g,E,c);case 3:e:{if(Ct(s,s.stateNode.containerInfo),t===null)throw Error(o(387));g=s.pendingProps;var A=s.memoizedState;E=A.element,Ed(t,s),xc(s,g,null,c);var O=s.memoizedState;if(g=O.cache,Ga(s,fr,g),g!==A.cache&&dd(s,[fr],c,!0),pc(),g=O.element,A.isDehydrated)if(A={element:g,isDehydrated:!1,cache:O.cache},s.updateQueue.baseState=A,s.memoizedState=A,s.flags&256){s=pp(t,s,g,c);break e}else if(g!==E){E=os(Error(o(424)),s),uc(E),s=pp(t,s,g,c);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(On=fs(t.firstChild),Br=s,Kt=!0,za=null,us=!0,c=hm(s,null,g,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Po(),g===E){s=da(t,s,c);break e}Ur(t,s,g,c)}s=s.child}return s;case 26:return nh(t,s),t===null?(c=O2(s.type,null,s.pendingProps,null))?s.memoizedState=c:Kt||(c=s.type,t=s.pendingProps,g=Eh(Me.current).createElement(c),g[An]=s,g[qt]=t,Vr(g,c,t),bn(g),s.stateNode=g):s.memoizedState=O2(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return Dr(s),t===null&&Kt&&(g=s.stateNode=I2(s.type,s.pendingProps,Me.current),Br=s,us=!0,E=On,ro(s.type)?(D0=E,On=fs(g.firstChild)):On=E),Ur(t,s,s.pendingProps.children,c),nh(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&Kt&&((E=g=On)&&(g=Qb(g,s.type,s.pendingProps,us),g!==null?(s.stateNode=g,Br=s,On=fs(g.firstChild),us=!1,E=!0):E=!1),E||Ha(s)),Dr(s),E=s.type,A=s.pendingProps,O=t!==null?t.memoizedProps:null,g=A.children,S0(E,A)?g=null:O!==null&&S0(E,O)&&(s.flags|=32),s.memoizedState!==null&&(E=Cd(t,s,hb,null,null,c),kc._currentValue=E),nh(t,s),Ur(t,s,g,c),s.child;case 6:return t===null&&Kt&&((t=c=On)&&(c=Zb(c,s.pendingProps,us),c!==null?(s.stateNode=c,Br=s,On=null,t=!0):t=!1),t||Ha(s)),null;case 13:return xp(t,s,c);case 4:return Ct(s,s.stateNode.containerInfo),g=s.pendingProps,t===null?s.child=Fo(s,null,g,c):Ur(t,s,g,c),s.child;case 11:return lp(t,s,s.type,s.pendingProps,c);case 7:return Ur(t,s,s.pendingProps,c),s.child;case 8:return Ur(t,s,s.pendingProps.children,c),s.child;case 12:return Ur(t,s,s.pendingProps.children,c),s.child;case 10:return g=s.pendingProps,Ga(s,s.type,g.value),Ur(t,s,g.children,c),s.child;case 9:return E=s.type._context,g=s.pendingProps.children,ko(s),E=kr(E),g=g(E),s.flags|=1,Ur(t,s,g,c),s.child;case 14:return cp(t,s,s.type,s.pendingProps,c);case 15:return up(t,s,s.type,s.pendingProps,c);case 19:return Ep(t,s,c);case 31:return Eb(t,s,c);case 22:return hp(t,s,c,s.pendingProps);case 24:return ko(s),g=kr(fr),t===null?(E=pd(),E===null&&(E=Sn,A=gd(),E.pooledCache=A,A.refCount++,A!==null&&(E.pooledCacheLanes|=c),E=A),s.memoizedState={parent:g,cache:E},yd(s),Ga(s,fr,E)):((t.lanes&c)!==0&&(Ed(t,s),xc(s,null,null,c),pc()),E=t.memoizedState,A=s.memoizedState,E.parent!==g?(E={parent:g,cache:g},s.memoizedState=E,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=E),Ga(s,fr,g)):(g=A.cache,Ga(s,fr,g),g!==E.cache&&dd(s,[fr],c,!0))),Ur(t,s,s.pendingProps.children,c),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}function ga(t){t.flags|=4}function e0(t,s,c,g,E){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(E&335544128)===E)if(t.stateNode.complete)t.flags|=8192;else if(Xp())t.flags|=8192;else throw jo=Fu,xd}else t.flags&=-16777217}function wp(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!B2(s))if(Xp())t.flags|=8192;else throw jo=Fu,xd}function ih(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?Pn():536870912,t.lanes|=s,Cl|=s)}function bc(t,s){if(!Kt)switch(t.tailMode){case"hidden":s=t.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?t.tail=null:c.sibling=null;break;case"collapsed":c=t.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:g.sibling=null}}function Dn(t){var s=t.alternate!==null&&t.alternate.child===t.child,c=0,g=0;if(s)for(var E=t.child;E!==null;)c|=E.lanes|E.childLanes,g|=E.subtreeFlags&65011712,g|=E.flags&65011712,E.return=t,E=E.sibling;else for(E=t.child;E!==null;)c|=E.lanes|E.childLanes,g|=E.subtreeFlags,g|=E.flags,E.return=t,E=E.sibling;return t.subtreeFlags|=g,t.childLanes=c,s}function wb(t,s,c){var g=s.pendingProps;switch(ld(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dn(s),null;case 1:return Dn(s),null;case 3:return c=s.stateNode,g=null,t!==null&&(g=t.memoizedState.cache),s.memoizedState.cache!==g&&(s.flags|=2048),ua(fr),Jt(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(t===null||t.child===null)&&(dl(s)?ga(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,ud())),Dn(s),null;case 26:var E=s.type,A=s.memoizedState;return t===null?(ga(s),A!==null?(Dn(s),wp(s,A)):(Dn(s),e0(s,E,null,g,c))):A?A!==t.memoizedState?(ga(s),Dn(s),wp(s,A)):(Dn(s),s.flags&=-16777217):(t=t.memoizedProps,t!==g&&ga(s),Dn(s),e0(s,E,t,g,c)),null;case 27:if(an(s),c=Me.current,E=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==g&&ga(s);else{if(!g){if(s.stateNode===null)throw Error(o(166));return Dn(s),null}t=ke.current,dl(s)?em(s):(t=I2(E,g,c),s.stateNode=t,ga(s))}return Dn(s),null;case 5:if(an(s),E=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==g&&ga(s);else{if(!g){if(s.stateNode===null)throw Error(o(166));return Dn(s),null}if(A=ke.current,dl(s))em(s);else{var O=Eh(Me.current);switch(A){case 1:A=O.createElementNS("http://www.w3.org/2000/svg",E);break;case 2:A=O.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;default:switch(E){case"svg":A=O.createElementNS("http://www.w3.org/2000/svg",E);break;case"math":A=O.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;case"script":A=O.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof g.is=="string"?O.createElement("select",{is:g.is}):O.createElement("select"),g.multiple?A.multiple=!0:g.size&&(A.size=g.size);break;default:A=typeof g.is=="string"?O.createElement(E,{is:g.is}):O.createElement(E)}}A[An]=s,A[qt]=g;e:for(O=s.child;O!==null;){if(O.tag===5||O.tag===6)A.appendChild(O.stateNode);else if(O.tag!==4&&O.tag!==27&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===s)break e;for(;O.sibling===null;){if(O.return===null||O.return===s)break e;O=O.return}O.sibling.return=O.return,O=O.sibling}s.stateNode=A;e:switch(Vr(A,E,g),E){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&ga(s)}}return Dn(s),e0(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,c),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==g&&ga(s);else{if(typeof g!="string"&&s.stateNode===null)throw Error(o(166));if(t=Me.current,dl(s)){if(t=s.stateNode,c=s.memoizedProps,g=null,E=Br,E!==null)switch(E.tag){case 27:case 5:g=E.memoizedProps}t[An]=s,t=!!(t.nodeValue===c||g!==null&&g.suppressHydrationWarning===!0||x2(t.nodeValue,c)),t||Ha(s,!0)}else t=Eh(t).createTextNode(g),t[An]=s,s.stateNode=t}return Dn(s),null;case 31:if(c=s.memoizedState,t===null||t.memoizedState!==null){if(g=dl(s),c!==null){if(t===null){if(!g)throw Error(o(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(557));t[An]=s}else Po(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Dn(s),t=!1}else c=ud(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=c),t=!0;if(!t)return s.flags&256?(zi(s),s):(zi(s),null);if((s.flags&128)!==0)throw Error(o(558))}return Dn(s),null;case 13:if(g=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(E=dl(s),g!==null&&g.dehydrated!==null){if(t===null){if(!E)throw Error(o(318));if(E=s.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(o(317));E[An]=s}else Po(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Dn(s),E=!1}else E=ud(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=E),E=!0;if(!E)return s.flags&256?(zi(s),s):(zi(s),null)}return zi(s),(s.flags&128)!==0?(s.lanes=c,s):(c=g!==null,t=t!==null&&t.memoizedState!==null,c&&(g=s.child,E=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(E=g.alternate.memoizedState.cachePool.pool),A=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(A=g.memoizedState.cachePool.pool),A!==E&&(g.flags|=2048)),c!==t&&c&&(s.child.flags|=8192),ih(s,s.updateQueue),Dn(s),null);case 4:return Jt(),t===null&&A0(s.stateNode.containerInfo),Dn(s),null;case 10:return ua(s.type),Dn(s),null;case 19:if(Ae(ar),g=s.memoizedState,g===null)return Dn(s),null;if(E=(s.flags&128)!==0,A=g.rendering,A===null)if(E)bc(g,!1);else{if(Zn!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(A=Yu(t),A!==null){for(s.flags|=128,bc(g,!1),t=A.updateQueue,s.updateQueue=t,ih(s,t),s.subtreeFlags=0,t=c,c=s.child;c!==null;)Wg(c,t),c=c.sibling;return Be(ar,ar.current&1|2),Kt&&la(s,g.treeForkCount),s.child}t=t.sibling}g.tail!==null&&dn()>ch&&(s.flags|=128,E=!0,bc(g,!1),s.lanes=4194304)}else{if(!E)if(t=Yu(A),t!==null){if(s.flags|=128,E=!0,t=t.updateQueue,s.updateQueue=t,ih(s,t),bc(g,!0),g.tail===null&&g.tailMode==="hidden"&&!A.alternate&&!Kt)return Dn(s),null}else 2*dn()-g.renderingStartTime>ch&&c!==536870912&&(s.flags|=128,E=!0,bc(g,!1),s.lanes=4194304);g.isBackwards?(A.sibling=s.child,s.child=A):(t=g.last,t!==null?t.sibling=A:s.child=A,g.last=A)}return g.tail!==null?(t=g.tail,g.rendering=t,g.tail=t.sibling,g.renderingStartTime=dn(),t.sibling=null,c=ar.current,Be(ar,E?c&1|2:c&1),Kt&&la(s,g.treeForkCount),t):(Dn(s),null);case 22:case 23:return zi(s),bd(),g=s.memoizedState!==null,t!==null?t.memoizedState!==null!==g&&(s.flags|=8192):g&&(s.flags|=8192),g?(c&536870912)!==0&&(s.flags&128)===0&&(Dn(s),s.subtreeFlags&6&&(s.flags|=8192)):Dn(s),c=s.updateQueue,c!==null&&ih(s,c.retryQueue),c=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(c=t.memoizedState.cachePool.pool),g=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(g=s.memoizedState.cachePool.pool),g!==c&&(s.flags|=2048),t!==null&&Ae(Uo),null;case 24:return c=null,t!==null&&(c=t.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),ua(fr),Dn(s),null;case 25:return null;case 30:return null}throw Error(o(156,s.tag))}function Ab(t,s){switch(ld(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return ua(fr),Jt(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return an(s),null;case 31:if(s.memoizedState!==null){if(zi(s),s.alternate===null)throw Error(o(340));Po()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(zi(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(o(340));Po()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return Ae(ar),null;case 4:return Jt(),null;case 10:return ua(s.type),null;case 22:case 23:return zi(s),bd(),t!==null&&Ae(Uo),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return ua(fr),null;case 25:return null;default:return null}}function Ap(t,s){switch(ld(s),s.tag){case 3:ua(fr),Jt();break;case 26:case 27:case 5:an(s);break;case 4:Jt();break;case 31:s.memoizedState!==null&&zi(s);break;case 13:zi(s);break;case 19:Ae(ar);break;case 10:ua(s.type);break;case 22:case 23:zi(s),bd(),t!==null&&Ae(Uo);break;case 24:ua(fr)}}function vc(t,s){try{var c=s.updateQueue,g=c!==null?c.lastEffect:null;if(g!==null){var E=g.next;c=E;do{if((c.tag&t)===t){g=void 0;var A=c.create,O=c.inst;g=A(),O.destroy=g}c=c.next}while(c!==E)}}catch(k){fn(s,s.return,k)}}function Qa(t,s,c){try{var g=s.updateQueue,E=g!==null?g.lastEffect:null;if(E!==null){var A=E.next;g=A;do{if((g.tag&t)===t){var O=g.inst,k=O.destroy;if(k!==void 0){O.destroy=void 0,E=s;var J=c,me=k;try{me()}catch(ve){fn(E,J,ve)}}}g=g.next}while(g!==A)}}catch(ve){fn(s,s.return,ve)}}function bp(t){var s=t.updateQueue;if(s!==null){var c=t.stateNode;try{dm(s,c)}catch(g){fn(t,t.return,g)}}}function vp(t,s,c){c.props=Ho(t.type,t.memoizedProps),c.state=t.memoizedState;try{c.componentWillUnmount()}catch(g){fn(t,s,g)}}function Tc(t,s){try{var c=t.ref;if(c!==null){switch(t.tag){case 26:case 27:case 5:var g=t.stateNode;break;case 30:g=t.stateNode;break;default:g=t.stateNode}typeof c=="function"?t.refCleanup=c(g):c.current=g}}catch(E){fn(t,s,E)}}function js(t,s){var c=t.ref,g=t.refCleanup;if(c!==null)if(typeof g=="function")try{g()}catch(E){fn(t,s,E)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(E){fn(t,s,E)}else c.current=null}function Tp(t){var s=t.type,c=t.memoizedProps,g=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":c.autoFocus&&g.focus();break e;case"img":c.src?g.src=c.src:c.srcSet&&(g.srcset=c.srcSet)}}catch(E){fn(t,t.return,E)}}function t0(t,s,c){try{var g=t.stateNode;Gb(g,t.type,c,s),g[qt]=s}catch(E){fn(t,t.return,E)}}function Cp(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ro(t.type)||t.tag===4}function n0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Cp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ro(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function r0(t,s,c){var g=t.tag;if(g===5||g===6)t=t.stateNode,s?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(t,s):(s=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,s.appendChild(t),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=Jr));else if(g!==4&&(g===27&&ro(t.type)&&(c=t.stateNode,s=null),t=t.child,t!==null))for(r0(t,s,c),t=t.sibling;t!==null;)r0(t,s,c),t=t.sibling}function sh(t,s,c){var g=t.tag;if(g===5||g===6)t=t.stateNode,s?c.insertBefore(t,s):c.appendChild(t);else if(g!==4&&(g===27&&ro(t.type)&&(c=t.stateNode),t=t.child,t!==null))for(sh(t,s,c),t=t.sibling;t!==null;)sh(t,s,c),t=t.sibling}function Sp(t){var s=t.stateNode,c=t.memoizedProps;try{for(var g=t.type,E=s.attributes;E.length;)s.removeAttributeNode(E[0]);Vr(s,g,c),s[An]=t,s[qt]=c}catch(A){fn(t,t.return,A)}}var ma=!1,mr=!1,i0=!1,Ip=typeof WeakSet=="function"?WeakSet:Set,Rr=null;function bb(t,s){if(t=t.containerInfo,T0=Ch,t=P(t),B(t)){if("selectionStart"in t)var c={start:t.selectionStart,end:t.selectionEnd};else e:{c=(c=t.ownerDocument)&&c.defaultView||window;var g=c.getSelection&&c.getSelection();if(g&&g.rangeCount!==0){c=g.anchorNode;var E=g.anchorOffset,A=g.focusNode;g=g.focusOffset;try{c.nodeType,A.nodeType}catch{c=null;break e}var O=0,k=-1,J=-1,me=0,ve=0,Se=t,xe=null;t:for(;;){for(var we;Se!==c||E!==0&&Se.nodeType!==3||(k=O+E),Se!==A||g!==0&&Se.nodeType!==3||(J=O+g),Se.nodeType===3&&(O+=Se.nodeValue.length),(we=Se.firstChild)!==null;)xe=Se,Se=we;for(;;){if(Se===t)break t;if(xe===c&&++me===E&&(k=O),xe===A&&++ve===g&&(J=O),(we=Se.nextSibling)!==null)break;Se=xe,xe=Se.parentNode}Se=we}c=k===-1||J===-1?null:{start:k,end:J}}else c=null}c=c||{start:0,end:0}}else c=null;for(C0={focusedElem:t,selectionRange:c},Ch=!1,Rr=s;Rr!==null;)if(s=Rr,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,Rr=t;else for(;Rr!==null;){switch(s=Rr,A=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(c=0;c<t.length;c++)E=t[c],E.ref.impl=E.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&A!==null){t=void 0,c=s,E=A.memoizedProps,A=A.memoizedState,g=c.stateNode;try{var Xe=Ho(c.type,E);t=g.getSnapshotBeforeUpdate(Xe,A),g.__reactInternalSnapshotBeforeUpdate=t}catch(at){fn(c,c.return,at)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,c=t.nodeType,c===9)N0(t);else if(c===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":N0(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(o(163))}if(t=s.sibling,t!==null){t.return=s.return,Rr=t;break}Rr=s.return}}function Np(t,s,c){var g=c.flags;switch(c.tag){case 0:case 11:case 15:xa(t,c),g&4&&vc(5,c);break;case 1:if(xa(t,c),g&4)if(t=c.stateNode,s===null)try{t.componentDidMount()}catch(O){fn(c,c.return,O)}else{var E=Ho(c.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(E,s,t.__reactInternalSnapshotBeforeUpdate)}catch(O){fn(c,c.return,O)}}g&64&&bp(c),g&512&&Tc(c,c.return);break;case 3:if(xa(t,c),g&64&&(t=c.updateQueue,t!==null)){if(s=null,c.child!==null)switch(c.child.tag){case 27:case 5:s=c.child.stateNode;break;case 1:s=c.child.stateNode}try{dm(t,s)}catch(O){fn(c,c.return,O)}}break;case 27:s===null&&g&4&&Sp(c);case 26:case 5:xa(t,c),s===null&&g&4&&Tp(c),g&512&&Tc(c,c.return);break;case 12:xa(t,c);break;case 31:xa(t,c),g&4&&Dp(t,c);break;case 13:xa(t,c),g&4&&Mp(t,c),g&64&&(t=c.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(c=Db.bind(null,c),Jb(t,c))));break;case 22:if(g=c.memoizedState!==null||ma,!g){s=s!==null&&s.memoizedState!==null||mr,E=ma;var A=mr;ma=g,(mr=s)&&!A?ya(t,c,(c.subtreeFlags&8772)!==0):xa(t,c),ma=E,mr=A}break;case 30:break;default:xa(t,c)}}function Rp(t){var s=t.alternate;s!==null&&(t.alternate=null,Rp(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&br(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Fn=null,vi=!1;function pa(t,s,c){for(c=c.child;c!==null;)Op(t,s,c),c=c.sibling}function Op(t,s,c){if(Re&&typeof Re.onCommitFiberUnmount=="function")try{Re.onCommitFiberUnmount(Gt,c)}catch{}switch(c.tag){case 26:mr||js(c,s),pa(t,s,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:mr||js(c,s);var g=Fn,E=vi;ro(c.type)&&(Fn=c.stateNode,vi=!1),pa(t,s,c),Lc(c.stateNode),Fn=g,vi=E;break;case 5:mr||js(c,s);case 6:if(g=Fn,E=vi,Fn=null,pa(t,s,c),Fn=g,vi=E,Fn!==null)if(vi)try{(Fn.nodeType===9?Fn.body:Fn.nodeName==="HTML"?Fn.ownerDocument.body:Fn).removeChild(c.stateNode)}catch(A){fn(c,s,A)}else try{Fn.removeChild(c.stateNode)}catch(A){fn(c,s,A)}break;case 18:Fn!==null&&(vi?(t=Fn,b2(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,c.stateNode),Ll(t)):b2(Fn,c.stateNode));break;case 4:g=Fn,E=vi,Fn=c.stateNode.containerInfo,vi=!0,pa(t,s,c),Fn=g,vi=E;break;case 0:case 11:case 14:case 15:Qa(2,c,s),mr||Qa(4,c,s),pa(t,s,c);break;case 1:mr||(js(c,s),g=c.stateNode,typeof g.componentWillUnmount=="function"&&vp(c,s,g)),pa(t,s,c);break;case 21:pa(t,s,c);break;case 22:mr=(g=mr)||c.memoizedState!==null,pa(t,s,c),mr=g;break;default:pa(t,s,c)}}function Dp(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ll(t)}catch(c){fn(s,s.return,c)}}}function Mp(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ll(t)}catch(c){fn(s,s.return,c)}}function vb(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new Ip),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new Ip),s;default:throw Error(o(435,t.tag))}}function ah(t,s){var c=vb(t);s.forEach(function(g){if(!c.has(g)){c.add(g);var E=Mb.bind(null,t,g);g.then(E,E)}})}function Ti(t,s){var c=s.deletions;if(c!==null)for(var g=0;g<c.length;g++){var E=c[g],A=t,O=s,k=O;e:for(;k!==null;){switch(k.tag){case 27:if(ro(k.type)){Fn=k.stateNode,vi=!1;break e}break;case 5:Fn=k.stateNode,vi=!1;break e;case 3:case 4:Fn=k.stateNode.containerInfo,vi=!0;break e}k=k.return}if(Fn===null)throw Error(o(160));Op(A,O,E),Fn=null,vi=!1,A=E.alternate,A!==null&&(A.return=null),E.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Lp(s,t),s=s.sibling}var Ss=null;function Lp(t,s){var c=t.alternate,g=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Ti(s,t),Ci(t),g&4&&(Qa(3,t,t.return),vc(3,t),Qa(5,t,t.return));break;case 1:Ti(s,t),Ci(t),g&512&&(mr||c===null||js(c,c.return)),g&64&&ma&&(t=t.updateQueue,t!==null&&(g=t.callbacks,g!==null&&(c=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=c===null?g:c.concat(g))));break;case 26:var E=Ss;if(Ti(s,t),Ci(t),g&512&&(mr||c===null||js(c,c.return)),g&4){var A=c!==null?c.memoizedState:null;if(g=t.memoizedState,c===null)if(g===null)if(t.stateNode===null){e:{g=t.type,c=t.memoizedProps,E=E.ownerDocument||E;t:switch(g){case"title":A=E.getElementsByTagName("title")[0],(!A||A[yi]||A[An]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=E.createElement(g),E.head.insertBefore(A,E.querySelector("head > title"))),Vr(A,g,c),A[An]=t,bn(A),g=A;break e;case"link":var O=L2("link","href",E).get(g+(c.href||""));if(O){for(var k=0;k<O.length;k++)if(A=O[k],A.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&A.getAttribute("rel")===(c.rel==null?null:c.rel)&&A.getAttribute("title")===(c.title==null?null:c.title)&&A.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){O.splice(k,1);break t}}A=E.createElement(g),Vr(A,g,c),E.head.appendChild(A);break;case"meta":if(O=L2("meta","content",E).get(g+(c.content||""))){for(k=0;k<O.length;k++)if(A=O[k],A.getAttribute("content")===(c.content==null?null:""+c.content)&&A.getAttribute("name")===(c.name==null?null:c.name)&&A.getAttribute("property")===(c.property==null?null:c.property)&&A.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&A.getAttribute("charset")===(c.charSet==null?null:c.charSet)){O.splice(k,1);break t}}A=E.createElement(g),Vr(A,g,c),E.head.appendChild(A);break;default:throw Error(o(468,g))}A[An]=t,bn(A),g=A}t.stateNode=g}else P2(E,t.type,t.stateNode);else t.stateNode=M2(E,g,t.memoizedProps);else A!==g?(A===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):A.count--,g===null?P2(E,t.type,t.stateNode):M2(E,g,t.memoizedProps)):g===null&&t.stateNode!==null&&t0(t,t.memoizedProps,c.memoizedProps)}break;case 27:Ti(s,t),Ci(t),g&512&&(mr||c===null||js(c,c.return)),c!==null&&g&4&&t0(t,t.memoizedProps,c.memoizedProps);break;case 5:if(Ti(s,t),Ci(t),g&512&&(mr||c===null||js(c,c.return)),t.flags&32){E=t.stateNode;try{Zr(E,"")}catch(Xe){fn(t,t.return,Xe)}}g&4&&t.stateNode!=null&&(E=t.memoizedProps,t0(t,E,c!==null?c.memoizedProps:E)),g&1024&&(i0=!0);break;case 6:if(Ti(s,t),Ci(t),g&4){if(t.stateNode===null)throw Error(o(162));g=t.memoizedProps,c=t.stateNode;try{c.nodeValue=g}catch(Xe){fn(t,t.return,Xe)}}break;case 3:if(Ah=null,E=Ss,Ss=_h(s.containerInfo),Ti(s,t),Ss=E,Ci(t),g&4&&c!==null&&c.memoizedState.isDehydrated)try{Ll(s.containerInfo)}catch(Xe){fn(t,t.return,Xe)}i0&&(i0=!1,Pp(t));break;case 4:g=Ss,Ss=_h(t.stateNode.containerInfo),Ti(s,t),Ci(t),Ss=g;break;case 12:Ti(s,t),Ci(t);break;case 31:Ti(s,t),Ci(t),g&4&&(g=t.updateQueue,g!==null&&(t.updateQueue=null,ah(t,g)));break;case 13:Ti(s,t),Ci(t),t.child.flags&8192&&t.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(lh=dn()),g&4&&(g=t.updateQueue,g!==null&&(t.updateQueue=null,ah(t,g)));break;case 22:E=t.memoizedState!==null;var J=c!==null&&c.memoizedState!==null,me=ma,ve=mr;if(ma=me||E,mr=ve||J,Ti(s,t),mr=ve,ma=me,Ci(t),g&8192)e:for(s=t.stateNode,s._visibility=E?s._visibility&-2:s._visibility|1,E&&(c===null||J||ma||mr||Go(t)),c=null,s=t;;){if(s.tag===5||s.tag===26){if(c===null){J=c=s;try{if(A=J.stateNode,E)O=A.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none";else{k=J.stateNode;var Se=J.memoizedProps.style,xe=Se!=null&&Se.hasOwnProperty("display")?Se.display:null;k.style.display=xe==null||typeof xe=="boolean"?"":(""+xe).trim()}}catch(Xe){fn(J,J.return,Xe)}}}else if(s.tag===6){if(c===null){J=s;try{J.stateNode.nodeValue=E?"":J.memoizedProps}catch(Xe){fn(J,J.return,Xe)}}}else if(s.tag===18){if(c===null){J=s;try{var we=J.stateNode;E?v2(we,!0):v2(J.stateNode,!1)}catch(Xe){fn(J,J.return,Xe)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;c===s&&(c=null),s=s.return}c===s&&(c=null),s.sibling.return=s.return,s=s.sibling}g&4&&(g=t.updateQueue,g!==null&&(c=g.retryQueue,c!==null&&(g.retryQueue=null,ah(t,c))));break;case 19:Ti(s,t),Ci(t),g&4&&(g=t.updateQueue,g!==null&&(t.updateQueue=null,ah(t,g)));break;case 30:break;case 21:break;default:Ti(s,t),Ci(t)}}function Ci(t){var s=t.flags;if(s&2){try{for(var c,g=t.return;g!==null;){if(Cp(g)){c=g;break}g=g.return}if(c==null)throw Error(o(160));switch(c.tag){case 27:var E=c.stateNode,A=n0(t);sh(t,A,E);break;case 5:var O=c.stateNode;c.flags&32&&(Zr(O,""),c.flags&=-33);var k=n0(t);sh(t,k,O);break;case 3:case 4:var J=c.stateNode.containerInfo,me=n0(t);r0(t,me,J);break;default:throw Error(o(161))}}catch(ve){fn(t,t.return,ve)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function Pp(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;Pp(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function xa(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Np(t,s.alternate,s),s=s.sibling}function Go(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:Qa(4,s,s.return),Go(s);break;case 1:js(s,s.return);var c=s.stateNode;typeof c.componentWillUnmount=="function"&&vp(s,s.return,c),Go(s);break;case 27:Lc(s.stateNode);case 26:case 5:js(s,s.return),Go(s);break;case 22:s.memoizedState===null&&Go(s);break;case 30:Go(s);break;default:Go(s)}t=t.sibling}}function ya(t,s,c){for(c=c&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var g=s.alternate,E=t,A=s,O=A.flags;switch(A.tag){case 0:case 11:case 15:ya(E,A,c),vc(4,A);break;case 1:if(ya(E,A,c),g=A,E=g.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(me){fn(g,g.return,me)}if(g=A,E=g.updateQueue,E!==null){var k=g.stateNode;try{var J=E.shared.hiddenCallbacks;if(J!==null)for(E.shared.hiddenCallbacks=null,E=0;E<J.length;E++)fm(J[E],k)}catch(me){fn(g,g.return,me)}}c&&O&64&&bp(A),Tc(A,A.return);break;case 27:Sp(A);case 26:case 5:ya(E,A,c),c&&g===null&&O&4&&Tp(A),Tc(A,A.return);break;case 12:ya(E,A,c);break;case 31:ya(E,A,c),c&&O&4&&Dp(E,A);break;case 13:ya(E,A,c),c&&O&4&&Mp(E,A);break;case 22:A.memoizedState===null&&ya(E,A,c),Tc(A,A.return);break;case 30:break;default:ya(E,A,c)}s=s.sibling}}function s0(t,s){var c=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(c=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==c&&(t!=null&&t.refCount++,c!=null&&hc(c))}function a0(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&hc(t))}function Is(t,s,c,g){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Bp(t,s,c,g),s=s.sibling}function Bp(t,s,c,g){var E=s.flags;switch(s.tag){case 0:case 11:case 15:Is(t,s,c,g),E&2048&&vc(9,s);break;case 1:Is(t,s,c,g);break;case 3:Is(t,s,c,g),E&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&hc(t)));break;case 12:if(E&2048){Is(t,s,c,g),t=s.stateNode;try{var A=s.memoizedProps,O=A.id,k=A.onPostCommit;typeof k=="function"&&k(O,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(J){fn(s,s.return,J)}}else Is(t,s,c,g);break;case 31:Is(t,s,c,g);break;case 13:Is(t,s,c,g);break;case 23:break;case 22:A=s.stateNode,O=s.alternate,s.memoizedState!==null?A._visibility&2?Is(t,s,c,g):Cc(t,s):A._visibility&2?Is(t,s,c,g):(A._visibility|=2,bl(t,s,c,g,(s.subtreeFlags&10256)!==0||!1)),E&2048&&s0(O,s);break;case 24:Is(t,s,c,g),E&2048&&a0(s.alternate,s);break;default:Is(t,s,c,g)}}function bl(t,s,c,g,E){for(E=E&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var A=t,O=s,k=c,J=g,me=O.flags;switch(O.tag){case 0:case 11:case 15:bl(A,O,k,J,E),vc(8,O);break;case 23:break;case 22:var ve=O.stateNode;O.memoizedState!==null?ve._visibility&2?bl(A,O,k,J,E):Cc(A,O):(ve._visibility|=2,bl(A,O,k,J,E)),E&&me&2048&&s0(O.alternate,O);break;case 24:bl(A,O,k,J,E),E&&me&2048&&a0(O.alternate,O);break;default:bl(A,O,k,J,E)}s=s.sibling}}function Cc(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var c=t,g=s,E=g.flags;switch(g.tag){case 22:Cc(c,g),E&2048&&s0(g.alternate,g);break;case 24:Cc(c,g),E&2048&&a0(g.alternate,g);break;default:Cc(c,g)}s=s.sibling}}var Sc=8192;function vl(t,s,c){if(t.subtreeFlags&Sc)for(t=t.child;t!==null;)kp(t,s,c),t=t.sibling}function kp(t,s,c){switch(t.tag){case 26:vl(t,s,c),t.flags&Sc&&t.memoizedState!==null&&u3(c,Ss,t.memoizedState,t.memoizedProps);break;case 5:vl(t,s,c);break;case 3:case 4:var g=Ss;Ss=_h(t.stateNode.containerInfo),vl(t,s,c),Ss=g;break;case 22:t.memoizedState===null&&(g=t.alternate,g!==null&&g.memoizedState!==null?(g=Sc,Sc=16777216,vl(t,s,c),Sc=g):vl(t,s,c));break;default:vl(t,s,c)}}function Up(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Ic(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var g=s[c];Rr=g,jp(g,t)}Up(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Vp(t),t=t.sibling}function Vp(t){switch(t.tag){case 0:case 11:case 15:Ic(t),t.flags&2048&&Qa(9,t,t.return);break;case 3:Ic(t);break;case 12:Ic(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,oh(t)):Ic(t);break;default:Ic(t)}}function oh(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var g=s[c];Rr=g,jp(g,t)}Up(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:Qa(8,s,s.return),oh(s);break;case 22:c=s.stateNode,c._visibility&2&&(c._visibility&=-3,oh(s));break;default:oh(s)}t=t.sibling}}function jp(t,s){for(;Rr!==null;){var c=Rr;switch(c.tag){case 0:case 11:case 15:Qa(8,c,s);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var g=c.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:hc(c.memoizedState.cache)}if(g=c.child,g!==null)g.return=c,Rr=g;else e:for(c=t;Rr!==null;){g=Rr;var E=g.sibling,A=g.return;if(Rp(g),g===c){Rr=null;break e}if(E!==null){E.return=A,Rr=E;break e}Rr=A}}}var Tb={getCacheForType:function(t){var s=kr(fr),c=s.data.get(t);return c===void 0&&(c=t(),s.data.set(t,c)),c},cacheSignal:function(){return kr(fr).controller.signal}},Cb=typeof WeakMap=="function"?WeakMap:Map,sn=0,Sn=null,Pt=null,Vt=0,hn=0,Hi=null,Za=!1,Tl=!1,o0=!1,Ea=0,Zn=0,Ja=0,Yo=0,l0=0,Gi=0,Cl=0,Nc=null,Si=null,c0=!1,lh=0,Fp=0,ch=1/0,uh=null,$a=null,Tr=0,eo=null,Sl=null,_a=0,u0=0,h0=null,zp=null,Rc=0,f0=null;function Yi(){return(sn&2)!==0&&Vt!==0?Vt&-Vt:pe.T!==null?y0():wr()}function Hp(){if(Gi===0)if((Vt&536870912)===0||Kt){var t=At;At<<=1,(At&3932160)===0&&(At=262144),Gi=t}else Gi=536870912;return t=Fi.current,t!==null&&(t.flags|=32),Gi}function Ii(t,s,c){(t===Sn&&(hn===2||hn===9)||t.cancelPendingCommit!==null)&&(Il(t,0),to(t,Vt,Gi,!1)),xi(t,c),((sn&2)===0||t!==Sn)&&(t===Sn&&((sn&2)===0&&(Yo|=c),Zn===4&&to(t,Vt,Gi,!1)),Fs(t))}function Gp(t,s,c){if((sn&6)!==0)throw Error(o(327));var g=!c&&(s&127)===0&&(s&t.expiredLanes)===0||wn(t,s),E=g?Nb(t,s):g0(t,s,!0),A=g;do{if(E===0){Tl&&!g&&to(t,s,0,!1);break}else{if(c=t.current.alternate,A&&!Sb(c)){E=g0(t,s,!1),A=!1;continue}if(E===2){if(A=s,t.errorRecoveryDisabledLanes&A)var O=0;else O=t.pendingLanes&-536870913,O=O!==0?O:O&536870912?536870912:0;if(O!==0){s=O;e:{var k=t;E=Nc;var J=k.current.memoizedState.isDehydrated;if(J&&(Il(k,O).flags|=256),O=g0(k,O,!1),O!==2){if(o0&&!J){k.errorRecoveryDisabledLanes|=A,Yo|=A,E=4;break e}A=Si,Si=E,A!==null&&(Si===null?Si=A:Si.push.apply(Si,A))}E=O}if(A=!1,E!==2)continue}}if(E===1){Il(t,0),to(t,s,0,!0);break}e:{switch(g=t,A=E,A){case 0:case 1:throw Error(o(345));case 4:if((s&4194048)!==s)break;case 6:to(g,s,Gi,!Za);break e;case 2:Si=null;break;case 3:case 5:break;default:throw Error(o(329))}if((s&62914560)===s&&(E=lh+300-dn(),10<E)){if(to(g,s,Gi,!Za),Kr(g,0,!0)!==0)break e;_a=s,g.timeoutHandle=w2(Yp.bind(null,g,c,Si,uh,c0,s,Gi,Yo,Cl,Za,A,"Throttled",-0,0),E);break e}Yp(g,c,Si,uh,c0,s,Gi,Yo,Cl,Za,A,null,-0,0)}}break}while(!0);Fs(t)}function Yp(t,s,c,g,E,A,O,k,J,me,ve,Se,xe,we){if(t.timeoutHandle=-1,Se=s.subtreeFlags,Se&8192||(Se&16785408)===16785408){Se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Jr},kp(s,A,Se);var Xe=(A&62914560)===A?lh-dn():(A&4194048)===A?Fp-dn():0;if(Xe=h3(Se,Xe),Xe!==null){_a=A,t.cancelPendingCommit=Xe($p.bind(null,t,s,A,c,g,E,O,k,J,ve,Se,null,xe,we)),to(t,A,O,!me);return}}$p(t,s,A,c,g,E,O,k,J)}function Sb(t){for(var s=t;;){var c=s.tag;if((c===0||c===11||c===15)&&s.flags&16384&&(c=s.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var g=0;g<c.length;g++){var E=c[g],A=E.getSnapshot;E=E.value;try{if(!m(A(),E))return!1}catch{return!1}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function to(t,s,c,g){s&=~l0,s&=~Yo,t.suspendedLanes|=s,t.pingedLanes&=~s,g&&(t.warmLanes|=s),g=t.expirationTimes;for(var E=s;0<E;){var A=31-rt(E),O=1<<A;g[A]=-1,E&=~O}c!==0&&Qi(t,c,s)}function hh(){return(sn&6)===0?(Oc(0),!1):!0}function d0(){if(Pt!==null){if(hn===0)var t=Pt.return;else t=Pt,ca=Bo=null,Nd(t),yl=null,dc=0,t=Pt;for(;t!==null;)Ap(t.alternate,t),t=t.return;Pt=null}}function Il(t,s){var c=t.timeoutHandle;c!==-1&&(t.timeoutHandle=-1,Xb(c)),c=t.cancelPendingCommit,c!==null&&(t.cancelPendingCommit=null,c()),_a=0,d0(),Sn=t,Pt=c=oa(t.current,null),Vt=s,hn=0,Hi=null,Za=!1,Tl=wn(t,s),o0=!1,Cl=Gi=l0=Yo=Ja=Zn=0,Si=Nc=null,c0=!1,(s&8)!==0&&(s|=s&32);var g=t.entangledLanes;if(g!==0)for(t=t.entanglements,g&=s;0<g;){var E=31-rt(g),A=1<<E;s|=t[E],g&=~A}return Ea=s,Du(),c}function qp(t,s){Tt=null,pe.H=wc,s===xl||s===ju?(s=lm(),hn=3):s===xd?(s=lm(),hn=4):hn=s===Yd?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Hi=s,Pt===null&&(Zn=1,eh(t,os(s,t.current)))}function Xp(){var t=Fi.current;return t===null?!0:(Vt&4194048)===Vt?hs===null:(Vt&62914560)===Vt||(Vt&536870912)!==0?t===hs:!1}function Kp(){var t=pe.H;return pe.H=wc,t===null?wc:t}function Wp(){var t=pe.A;return pe.A=Tb,t}function fh(){Zn=4,Za||(Vt&4194048)!==Vt&&Fi.current!==null||(Tl=!0),(Ja&134217727)===0&&(Yo&134217727)===0||Sn===null||to(Sn,Vt,Gi,!1)}function g0(t,s,c){var g=sn;sn|=2;var E=Kp(),A=Wp();(Sn!==t||Vt!==s)&&(uh=null,Il(t,s)),s=!1;var O=Zn;e:do try{if(hn!==0&&Pt!==null){var k=Pt,J=Hi;switch(hn){case 8:d0(),O=6;break e;case 3:case 2:case 9:case 6:Fi.current===null&&(s=!0);var me=hn;if(hn=0,Hi=null,Nl(t,k,J,me),c&&Tl){O=0;break e}break;default:me=hn,hn=0,Hi=null,Nl(t,k,J,me)}}Ib(),O=Zn;break}catch(ve){qp(t,ve)}while(!0);return s&&t.shellSuspendCounter++,ca=Bo=null,sn=g,pe.H=E,pe.A=A,Pt===null&&(Sn=null,Vt=0,Du()),O}function Ib(){for(;Pt!==null;)Qp(Pt)}function Nb(t,s){var c=sn;sn|=2;var g=Kp(),E=Wp();Sn!==t||Vt!==s?(uh=null,ch=dn()+500,Il(t,s)):Tl=wn(t,s);e:do try{if(hn!==0&&Pt!==null){s=Pt;var A=Hi;t:switch(hn){case 1:hn=0,Hi=null,Nl(t,s,A,1);break;case 2:case 9:if(am(A)){hn=0,Hi=null,Zp(s);break}s=function(){hn!==2&&hn!==9||Sn!==t||(hn=7),Fs(t)},A.then(s,s);break e;case 3:hn=7;break e;case 4:hn=5;break e;case 7:am(A)?(hn=0,Hi=null,Zp(s)):(hn=0,Hi=null,Nl(t,s,A,7));break;case 5:var O=null;switch(Pt.tag){case 26:O=Pt.memoizedState;case 5:case 27:var k=Pt;if(O?B2(O):k.stateNode.complete){hn=0,Hi=null;var J=k.sibling;if(J!==null)Pt=J;else{var me=k.return;me!==null?(Pt=me,dh(me)):Pt=null}break t}}hn=0,Hi=null,Nl(t,s,A,5);break;case 6:hn=0,Hi=null,Nl(t,s,A,6);break;case 8:d0(),Zn=6;break e;default:throw Error(o(462))}}Rb();break}catch(ve){qp(t,ve)}while(!0);return ca=Bo=null,pe.H=g,pe.A=E,sn=c,Pt!==null?0:(Sn=null,Vt=0,Du(),Zn)}function Rb(){for(;Pt!==null&&!ws();)Qp(Pt)}function Qp(t){var s=_p(t.alternate,t,Ea);t.memoizedProps=t.pendingProps,s===null?dh(t):Pt=s}function Zp(t){var s=t,c=s.alternate;switch(s.tag){case 15:case 0:s=gp(c,s,s.pendingProps,s.type,void 0,Vt);break;case 11:s=gp(c,s,s.pendingProps,s.type.render,s.ref,Vt);break;case 5:Nd(s);default:Ap(c,s),s=Pt=Wg(s,Ea),s=_p(c,s,Ea)}t.memoizedProps=t.pendingProps,s===null?dh(t):Pt=s}function Nl(t,s,c,g){ca=Bo=null,Nd(s),yl=null,dc=0;var E=s.return;try{if(yb(t,E,s,c,Vt)){Zn=1,eh(t,os(c,t.current)),Pt=null;return}}catch(A){if(E!==null)throw Pt=E,A;Zn=1,eh(t,os(c,t.current)),Pt=null;return}s.flags&32768?(Kt||g===1?t=!0:Tl||(Vt&536870912)!==0?t=!1:(Za=t=!0,(g===2||g===9||g===3||g===6)&&(g=Fi.current,g!==null&&g.tag===13&&(g.flags|=16384))),Jp(s,t)):dh(s)}function dh(t){var s=t;do{if((s.flags&32768)!==0){Jp(s,Za);return}t=s.return;var c=wb(s.alternate,s,Ea);if(c!==null){Pt=c;return}if(s=s.sibling,s!==null){Pt=s;return}Pt=s=t}while(s!==null);Zn===0&&(Zn=5)}function Jp(t,s){do{var c=Ab(t.alternate,t);if(c!==null){c.flags&=32767,Pt=c;return}if(c=t.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!s&&(t=t.sibling,t!==null)){Pt=t;return}Pt=t=c}while(t!==null);Zn=6,Pt=null}function $p(t,s,c,g,E,A,O,k,J){t.cancelPendingCommit=null;do gh();while(Tr!==0);if((sn&6)!==0)throw Error(o(327));if(s!==null){if(s===t.current)throw Error(o(177));if(A=s.lanes|s.childLanes,A|=nd,Wr(t,c,A,O,k,J),t===Sn&&(Pt=Sn=null,Vt=0),Sl=s,eo=t,_a=c,u0=A,h0=E,zp=g,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Lb(rr,function(){return i2(),null})):(t.callbackNode=null,t.callbackPriority=0),g=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||g){g=pe.T,pe.T=null,E=be.p,be.p=2,O=sn,sn|=4;try{bb(t,s,c)}finally{sn=O,be.p=E,pe.T=g}}Tr=1,e2(),t2(),n2()}}function e2(){if(Tr===1){Tr=0;var t=eo,s=Sl,c=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||c){c=pe.T,pe.T=null;var g=be.p;be.p=2;var E=sn;sn|=4;try{Lp(s,t);var A=C0,O=P(t.containerInfo),k=A.focusedElem,J=A.selectionRange;if(O!==k&&k&&k.ownerDocument&&R(k.ownerDocument.documentElement,k)){if(J!==null&&B(k)){var me=J.start,ve=J.end;if(ve===void 0&&(ve=me),"selectionStart"in k)k.selectionStart=me,k.selectionEnd=Math.min(ve,k.value.length);else{var Se=k.ownerDocument||document,xe=Se&&Se.defaultView||window;if(xe.getSelection){var we=xe.getSelection(),Xe=k.textContent.length,at=Math.min(J.start,Xe),xn=J.end===void 0?at:Math.min(J.end,Xe);!we.extend&&at>xn&&(O=xn,xn=at,at=O);var oe=C(k,at),se=C(k,xn);if(oe&&se&&(we.rangeCount!==1||we.anchorNode!==oe.node||we.anchorOffset!==oe.offset||we.focusNode!==se.node||we.focusOffset!==se.offset)){var ge=Se.createRange();ge.setStart(oe.node,oe.offset),we.removeAllRanges(),at>xn?(we.addRange(ge),we.extend(se.node,se.offset)):(ge.setEnd(se.node,se.offset),we.addRange(ge))}}}}for(Se=[],we=k;we=we.parentNode;)we.nodeType===1&&Se.push({element:we,left:we.scrollLeft,top:we.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<Se.length;k++){var Te=Se[k];Te.element.scrollLeft=Te.left,Te.element.scrollTop=Te.top}}Ch=!!T0,C0=T0=null}finally{sn=E,be.p=g,pe.T=c}}t.current=s,Tr=2}}function t2(){if(Tr===2){Tr=0;var t=eo,s=Sl,c=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||c){c=pe.T,pe.T=null;var g=be.p;be.p=2;var E=sn;sn|=4;try{Np(t,s.alternate,s)}finally{sn=E,be.p=g,pe.T=c}}Tr=3}}function n2(){if(Tr===4||Tr===3){Tr=0,Ki();var t=eo,s=Sl,c=_a,g=zp;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Tr=5:(Tr=0,Sl=eo=null,r2(t,t.pendingLanes));var E=t.pendingLanes;if(E===0&&($a=null),_r(c),s=s.stateNode,Re&&typeof Re.onCommitFiberRoot=="function")try{Re.onCommitFiberRoot(Gt,s,void 0,(s.current.flags&128)===128)}catch{}if(g!==null){s=pe.T,E=be.p,be.p=2,pe.T=null;try{for(var A=t.onRecoverableError,O=0;O<g.length;O++){var k=g[O];A(k.value,{componentStack:k.stack})}}finally{pe.T=s,be.p=E}}(_a&3)!==0&&gh(),Fs(t),E=t.pendingLanes,(c&261930)!==0&&(E&42)!==0?t===f0?Rc++:(Rc=0,f0=t):Rc=0,Oc(0)}}function r2(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,hc(s)))}function gh(){return e2(),t2(),n2(),i2()}function i2(){if(Tr!==5)return!1;var t=eo,s=u0;u0=0;var c=_r(_a),g=pe.T,E=be.p;try{be.p=32>c?32:c,pe.T=null,c=h0,h0=null;var A=eo,O=_a;if(Tr=0,Sl=eo=null,_a=0,(sn&6)!==0)throw Error(o(331));var k=sn;if(sn|=4,Vp(A.current),Bp(A,A.current,O,c),sn=k,Oc(0,!1),Re&&typeof Re.onPostCommitFiberRoot=="function")try{Re.onPostCommitFiberRoot(Gt,A)}catch{}return!0}finally{be.p=E,pe.T=g,r2(t,s)}}function s2(t,s,c){s=os(c,s),s=Gd(t.stateNode,s,2),t=Xa(t,s,2),t!==null&&(xi(t,2),Fs(t))}function fn(t,s,c){if(t.tag===3)s2(t,t,c);else for(;s!==null;){if(s.tag===3){s2(s,t,c);break}else if(s.tag===1){var g=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&($a===null||!$a.has(g))){t=os(c,t),c=ap(2),g=Xa(s,c,2),g!==null&&(op(c,g,s,t),xi(g,2),Fs(g));break}}s=s.return}}function m0(t,s,c){var g=t.pingCache;if(g===null){g=t.pingCache=new Cb;var E=new Set;g.set(s,E)}else E=g.get(s),E===void 0&&(E=new Set,g.set(s,E));E.has(c)||(o0=!0,E.add(c),t=Ob.bind(null,t,s,c),s.then(t,t))}function Ob(t,s,c){var g=t.pingCache;g!==null&&g.delete(s),t.pingedLanes|=t.suspendedLanes&c,t.warmLanes&=~c,Sn===t&&(Vt&c)===c&&(Zn===4||Zn===3&&(Vt&62914560)===Vt&&300>dn()-lh?(sn&2)===0&&Il(t,0):l0|=c,Cl===Vt&&(Cl=0)),Fs(t)}function a2(t,s){s===0&&(s=Pn()),t=Mo(t,s),t!==null&&(xi(t,s),Fs(t))}function Db(t){var s=t.memoizedState,c=0;s!==null&&(c=s.retryLane),a2(t,c)}function Mb(t,s){var c=0;switch(t.tag){case 31:case 13:var g=t.stateNode,E=t.memoizedState;E!==null&&(c=E.retryLane);break;case 19:g=t.stateNode;break;case 22:g=t.stateNode._retryCache;break;default:throw Error(o(314))}g!==null&&g.delete(s),a2(t,c)}function Lb(t,s){return _n(t,s)}var mh=null,Rl=null,p0=!1,ph=!1,x0=!1,no=0;function Fs(t){t!==Rl&&t.next===null&&(Rl===null?mh=Rl=t:Rl=Rl.next=t),ph=!0,p0||(p0=!0,Bb())}function Oc(t,s){if(!x0&&ph){x0=!0;do for(var c=!1,g=mh;g!==null;){if(t!==0){var E=g.pendingLanes;if(E===0)var A=0;else{var O=g.suspendedLanes,k=g.pingedLanes;A=(1<<31-rt(42|t)+1)-1,A&=E&~(O&~k),A=A&201326741?A&201326741|1:A?A|2:0}A!==0&&(c=!0,u2(g,A))}else A=Vt,A=Kr(g,g===Sn?A:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(A&3)===0||wn(g,A)||(c=!0,u2(g,A));g=g.next}while(c);x0=!1}}function Pb(){o2()}function o2(){ph=p0=!1;var t=0;no!==0&&qb()&&(t=no);for(var s=dn(),c=null,g=mh;g!==null;){var E=g.next,A=l2(g,s);A===0?(g.next=null,c===null?mh=E:c.next=E,E===null&&(Rl=c)):(c=g,(t!==0||(A&3)!==0)&&(ph=!0)),g=E}Tr!==0&&Tr!==5||Oc(t),no!==0&&(no=0)}function l2(t,s){for(var c=t.suspendedLanes,g=t.pingedLanes,E=t.expirationTimes,A=t.pendingLanes&-62914561;0<A;){var O=31-rt(A),k=1<<O,J=E[O];J===-1?((k&c)===0||(k&g)!==0)&&(E[O]=Os(k,s)):J<=s&&(t.expiredLanes|=k),A&=~k}if(s=Sn,c=Vt,c=Kr(t,t===s?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),g=t.callbackNode,c===0||t===s&&(hn===2||hn===9)||t.cancelPendingCommit!==null)return g!==null&&g!==null&&Fe(g),t.callbackNode=null,t.callbackPriority=0;if((c&3)===0||wn(t,c)){if(s=c&-c,s===t.callbackPriority)return s;switch(g!==null&&Fe(g),_r(c)){case 2:case 8:c=Yr;break;case 32:c=rr;break;case 268435456:c=Rs;break;default:c=rr}return g=c2.bind(null,t),c=_n(c,g),t.callbackPriority=s,t.callbackNode=c,s}return g!==null&&g!==null&&Fe(g),t.callbackPriority=2,t.callbackNode=null,2}function c2(t,s){if(Tr!==0&&Tr!==5)return t.callbackNode=null,t.callbackPriority=0,null;var c=t.callbackNode;if(gh()&&t.callbackNode!==c)return null;var g=Vt;return g=Kr(t,t===Sn?g:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),g===0?null:(Gp(t,g,s),l2(t,dn()),t.callbackNode!=null&&t.callbackNode===c?c2.bind(null,t):null)}function u2(t,s){if(gh())return null;Gp(t,s,!0)}function Bb(){Kb(function(){(sn&6)!==0?_n(ur,Pb):o2()})}function y0(){if(no===0){var t=ml;t===0&&(t=qr,qr<<=1,(qr&261888)===0&&(qr=256)),no=t}return no}function h2(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ls(""+t)}function f2(t,s){var c=s.ownerDocument.createElement("input");return c.name=s.name,c.value=s.value,t.id&&c.setAttribute("form",t.id),s.parentNode.insertBefore(c,s),t=new FormData(t),c.parentNode.removeChild(c),t}function kb(t,s,c,g,E){if(s==="submit"&&c&&c.stateNode===E){var A=h2((E[qt]||null).action),O=g.submitter;O&&(s=(s=O[qt]||null)?h2(s.formAction):O.getAttribute("formAction"),s!==null&&(A=s,O=null));var k=new Rn("action","action",null,g,E);t.push({event:k,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(no!==0){var J=O?f2(E,O):new FormData(E);Ud(c,{pending:!0,data:J,method:E.method,action:A},null,J)}}else typeof A=="function"&&(k.preventDefault(),J=O?f2(E,O):new FormData(E),Ud(c,{pending:!0,data:J,method:E.method,action:A},A,J))},currentTarget:E}]})}}for(var E0=0;E0<lc.length;E0++){var _0=lc[E0],Ub=_0.toLowerCase(),Vb=_0[0].toUpperCase()+_0.slice(1);Cs(Ub,"on"+Vb)}Cs(bi,"onAnimationEnd"),Cs(Pr,"onAnimationIteration"),Cs(cn,"onAnimationStart"),Cs("dblclick","onDoubleClick"),Cs("focusin","onFocus"),Cs("focusout","onBlur"),Cs(vr,"onTransitionRun"),Cs(di,"onTransitionStart"),Cs(ja,"onTransitionCancel"),Cs(aa,"onTransitionEnd"),St("onMouseEnter",["mouseout","mouseover"]),St("onMouseLeave",["mouseout","mouseover"]),St("onPointerEnter",["pointerout","pointerover"]),St("onPointerLeave",["pointerout","pointerover"]),Ue("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ue("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ue("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ue("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ue("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ue("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Dc));function d2(t,s){s=(s&4)!==0;for(var c=0;c<t.length;c++){var g=t[c],E=g.event;g=g.listeners;e:{var A=void 0;if(s)for(var O=g.length-1;0<=O;O--){var k=g[O],J=k.instance,me=k.currentTarget;if(k=k.listener,J!==A&&E.isPropagationStopped())break e;A=k,E.currentTarget=me;try{A(E)}catch(ve){Ou(ve)}E.currentTarget=null,A=J}else for(O=0;O<g.length;O++){if(k=g[O],J=k.instance,me=k.currentTarget,k=k.listener,J!==A&&E.isPropagationStopped())break e;A=k,E.currentTarget=me;try{A(E)}catch(ve){Ou(ve)}E.currentTarget=null,A=J}}}}function Bt(t,s){var c=s[Mi];c===void 0&&(c=s[Mi]=new Set);var g=t+"__bubble";c.has(g)||(g2(s,t,2,!1),c.add(g))}function w0(t,s,c){var g=0;s&&(g|=4),g2(c,t,g,s)}var xh="_reactListening"+Math.random().toString(36).slice(2);function A0(t){if(!t[xh]){t[xh]=!0,F.forEach(function(c){c!=="selectionchange"&&(jb.has(c)||w0(c,!1,t),w0(c,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[xh]||(s[xh]=!0,w0("selectionchange",!1,s))}}function g2(t,s,c,g){switch(H2(s)){case 2:var E=g3;break;case 8:E=m3;break;default:E=k0}c=E.bind(null,s,c,t),E=void 0,!Zs||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(E=!0),g?E!==void 0?t.addEventListener(s,c,{capture:!0,passive:E}):t.addEventListener(s,c,!0):E!==void 0?t.addEventListener(s,c,{passive:E}):t.addEventListener(s,c,!1)}function b0(t,s,c,g,E){var A=g;if((s&1)===0&&(s&2)===0&&g!==null)e:for(;;){if(g===null)return;var O=g.tag;if(O===3||O===4){var k=g.stateNode.containerInfo;if(k===E)break;if(O===4)for(O=g.return;O!==null;){var J=O.tag;if((J===3||J===4)&&O.stateNode.containerInfo===E)return;O=O.return}for(;k!==null;){if(O=gn(k),O===null)return;if(J=O.tag,J===5||J===6||J===26||J===27){g=A=O;continue e}k=k.parentNode}}g=g.return}Ps(function(){var me=A,ve=_i(c),Se=[];e:{var xe=Ru.get(t);if(xe!==void 0){var we=Rn,Xe=t;switch(t){case"keypress":if(Bi(c)===0)break e;case"keydown":case"keyup":we=na;break;case"focusin":Xe="focus",we=ea;break;case"focusout":Xe="blur",we=ea;break;case"beforeblur":case"afterblur":we=ea;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=Wt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=$s;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=N;break;case bi:case Pr:case cn:we=mt;break;case aa:we=H;break;case"scroll":case"scrollend":we=Pa;break;case"wheel":we=_e;break;case"copy":case"cut":case"paste":we=ta;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=Lt;break;case"toggle":case"beforetoggle":we=ht}var at=(s&4)!==0,xn=!at&&(t==="scroll"||t==="scrollend"),oe=at?xe!==null?xe+"Capture":null:xe;at=[];for(var se=me,ge;se!==null;){var Te=se;if(ge=Te.stateNode,Te=Te.tag,Te!==5&&Te!==26&&Te!==27||ge===null||oe===null||(Te=it(se,oe),Te!=null&&at.push(Mc(se,Te,ge))),xn)break;se=se.return}0<at.length&&(xe=new we(xe,Xe,null,c,ve),Se.push({event:xe,listeners:at}))}}if((s&7)===0){e:{if(xe=t==="mouseover"||t==="pointerover",we=t==="mouseout"||t==="pointerout",xe&&c!==Qs&&(Xe=c.relatedTarget||c.fromElement)&&(gn(Xe)||Xe[Ar]))break e;if((we||xe)&&(xe=ve.window===ve?ve:(xe=ve.ownerDocument)?xe.defaultView||xe.parentWindow:window,we?(Xe=c.relatedTarget||c.toElement,we=me,Xe=Xe?gn(Xe):null,Xe!==null&&(xn=d(Xe),at=Xe.tag,Xe!==xn||at!==5&&at!==27&&at!==6)&&(Xe=null)):(we=null,Xe=me),we!==Xe)){if(at=Wt,Te="onMouseLeave",oe="onMouseEnter",se="mouse",(t==="pointerout"||t==="pointerover")&&(at=Lt,Te="onPointerLeave",oe="onPointerEnter",se="pointer"),xn=we==null?xe:Sr(we),ge=Xe==null?xe:Sr(Xe),xe=new at(Te,se+"leave",we,c,ve),xe.target=xn,xe.relatedTarget=ge,Te=null,gn(ve)===me&&(at=new at(oe,se+"enter",Xe,c,ve),at.target=ge,at.relatedTarget=xn,Te=at),xn=Te,we&&Xe)t:{for(at=Fb,oe=we,se=Xe,ge=0,Te=oe;Te;Te=at(Te))ge++;Te=0;for(var et=se;et;et=at(et))Te++;for(;0<ge-Te;)oe=at(oe),ge--;for(;0<Te-ge;)se=at(se),Te--;for(;ge--;){if(oe===se||se!==null&&oe===se.alternate){at=oe;break t}oe=at(oe),se=at(se)}at=null}else at=null;we!==null&&m2(Se,xe,we,at,!1),Xe!==null&&xn!==null&&m2(Se,xn,Xe,at,!0)}}e:{if(xe=me?Sr(me):window,we=xe.nodeName&&xe.nodeName.toLowerCase(),we==="select"||we==="input"&&xe.type==="file")var en=Vi;else if(oc(xe))if(Nu)en=h;else{en=a;var Ke=i}else we=xe.nodeName,!we||we.toLowerCase()!=="input"||xe.type!=="checkbox"&&xe.type!=="radio"?me&&on(me.elementType)&&(en=Vi):en=l;if(en&&(en=en(t,me))){Ui(Se,en,c,ve);break e}Ke&&Ke(t,xe,me),t==="focusout"&&me&&xe.type==="number"&&me.memoizedProps.value!=null&&G(xe,"number",xe.value)}switch(Ke=me?Sr(me):window,t){case"focusin":(oc(Ke)||Ke.contentEditable==="true")&&(te=Ke,ne=me,ue=null);break;case"focusout":ue=ne=te=null;break;case"mousedown":Ee=!0;break;case"contextmenu":case"mouseup":case"dragend":Ee=!1,Le(Se,c,ve);break;case"selectionchange":if(Y)break;case"keydown":case"keyup":Le(Se,c,ve)}var Nt;if(Xt)e:{switch(t){case"compositionstart":var jt="onCompositionStart";break e;case"compositionend":jt="onCompositionEnd";break e;case"compositionupdate":jt="onCompositionUpdate";break e}jt=void 0}else Va?ra(t,c)&&(jt="onCompositionEnd"):t==="keydown"&&c.keyCode===229&&(jt="onCompositionStart");jt&&(is&&c.locale!=="ko"&&(Va||jt!=="onCompositionStart"?jt==="onCompositionEnd"&&Va&&(Nt=bs()):(Li=ve,Pi="value"in Li?Li.value:Li.textContent,Va=!0)),Ke=yh(me,jt),0<Ke.length&&(jt=new ts(jt,t,null,c,ve),Se.push({event:jt,listeners:Ke}),Nt?jt.data=Nt:(Nt=ss(c),Nt!==null&&(jt.data=Nt)))),(Nt=hi?ks(t,c):ll(t,c))&&(jt=yh(me,"onBeforeInput"),0<jt.length&&(Ke=new ts("onBeforeInput","beforeinput",null,c,ve),Se.push({event:Ke,listeners:jt}),Ke.data=Nt)),kb(Se,t,me,c,ve)}d2(Se,s)})}function Mc(t,s,c){return{instance:t,listener:s,currentTarget:c}}function yh(t,s){for(var c=s+"Capture",g=[];t!==null;){var E=t,A=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||A===null||(E=it(t,c),E!=null&&g.unshift(Mc(t,E,A)),E=it(t,s),E!=null&&g.push(Mc(t,E,A))),t.tag===3)return g;t=t.return}return[]}function Fb(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function m2(t,s,c,g,E){for(var A=s._reactName,O=[];c!==null&&c!==g;){var k=c,J=k.alternate,me=k.stateNode;if(k=k.tag,J!==null&&J===g)break;k!==5&&k!==26&&k!==27||me===null||(J=me,E?(me=it(c,A),me!=null&&O.unshift(Mc(c,me,J))):E||(me=it(c,A),me!=null&&O.push(Mc(c,me,J)))),c=c.return}O.length!==0&&t.push({event:s,listeners:O})}var zb=/\r\n?/g,Hb=/\u0000|\uFFFD/g;function p2(t){return(typeof t=="string"?t:""+t).replace(zb,`
`).replace(Hb,"")}function x2(t,s){return s=p2(s),p2(t)===s}function pn(t,s,c,g,E,A){switch(c){case"children":typeof g=="string"?s==="body"||s==="textarea"&&g===""||Zr(t,g):(typeof g=="number"||typeof g=="bigint")&&s!=="body"&&Zr(t,""+g);break;case"className":Nn(t,"class",g);break;case"tabIndex":Nn(t,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Nn(t,c,g);break;case"style":Ze(t,g,A);break;case"data":if(s!=="object"){Nn(t,"data",g);break}case"src":case"href":if(g===""&&(s!=="a"||c!=="href")){t.removeAttribute(c);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){t.removeAttribute(c);break}g=Ls(""+g),t.setAttribute(c,g);break;case"action":case"formAction":if(typeof g=="function"){t.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(c==="formAction"?(s!=="input"&&pn(t,s,"name",E.name,E,null),pn(t,s,"formEncType",E.formEncType,E,null),pn(t,s,"formMethod",E.formMethod,E,null),pn(t,s,"formTarget",E.formTarget,E,null)):(pn(t,s,"encType",E.encType,E,null),pn(t,s,"method",E.method,E,null),pn(t,s,"target",E.target,E,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){t.removeAttribute(c);break}g=Ls(""+g),t.setAttribute(c,g);break;case"onClick":g!=null&&(t.onclick=Jr);break;case"onScroll":g!=null&&Bt("scroll",t);break;case"onScrollEnd":g!=null&&Bt("scrollend",t);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(o(61));if(c=g.__html,c!=null){if(E.children!=null)throw Error(o(60));t.innerHTML=c}}break;case"multiple":t.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":t.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){t.removeAttribute("xlink:href");break}c=Ls(""+g),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?t.setAttribute(c,""+g):t.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?t.setAttribute(c,""):t.removeAttribute(c);break;case"capture":case"download":g===!0?t.setAttribute(c,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?t.setAttribute(c,g):t.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?t.setAttribute(c,g):t.removeAttribute(c);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?t.removeAttribute(c):t.setAttribute(c,g);break;case"popover":Bt("beforetoggle",t),Bt("toggle",t),Ji(t,"popover",g);break;case"xlinkActuate":vn(t,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":vn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":vn(t,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":vn(t,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":vn(t,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":vn(t,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":vn(t,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":vn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":vn(t,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Ji(t,"is",g);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=So.get(c)||c,Ji(t,c,g))}}function v0(t,s,c,g,E,A){switch(c){case"style":Ze(t,g,A);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(o(61));if(c=g.__html,c!=null){if(E.children!=null)throw Error(o(60));t.innerHTML=c}}break;case"children":typeof g=="string"?Zr(t,g):(typeof g=="number"||typeof g=="bigint")&&Zr(t,""+g);break;case"onScroll":g!=null&&Bt("scroll",t);break;case"onScrollEnd":g!=null&&Bt("scrollend",t);break;case"onClick":g!=null&&(t.onclick=Jr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Je.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(E=c.endsWith("Capture"),s=c.slice(2,E?c.length-7:void 0),A=t[qt]||null,A=A!=null?A[c]:null,typeof A=="function"&&t.removeEventListener(s,A,E),typeof g=="function")){typeof A!="function"&&A!==null&&(c in t?t[c]=null:t.hasAttribute(c)&&t.removeAttribute(c)),t.addEventListener(s,g,E);break e}c in t?t[c]=g:g===!0?t.setAttribute(c,""):Ji(t,c,g)}}}function Vr(t,s,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Bt("error",t),Bt("load",t);var g=!1,E=!1,A;for(A in c)if(c.hasOwnProperty(A)){var O=c[A];if(O!=null)switch(A){case"src":g=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:pn(t,s,A,O,c,null)}}E&&pn(t,s,"srcSet",c.srcSet,c,null),g&&pn(t,s,"src",c.src,c,null);return;case"input":Bt("invalid",t);var k=A=O=E=null,J=null,me=null;for(g in c)if(c.hasOwnProperty(g)){var ve=c[g];if(ve!=null)switch(g){case"name":E=ve;break;case"type":O=ve;break;case"checked":J=ve;break;case"defaultChecked":me=ve;break;case"value":A=ve;break;case"defaultValue":k=ve;break;case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(o(137,s));break;default:pn(t,s,g,ve,c,null)}}he(t,A,k,J,me,O,E,!1);return;case"select":Bt("invalid",t),g=O=A=null;for(E in c)if(c.hasOwnProperty(E)&&(k=c[E],k!=null))switch(E){case"value":A=k;break;case"defaultValue":O=k;break;case"multiple":g=k;default:pn(t,s,E,k,c,null)}s=A,c=O,t.multiple=!!g,s!=null?qe(t,!!g,s,!1):c!=null&&qe(t,!!g,c,!0);return;case"textarea":Bt("invalid",t),A=E=g=null;for(O in c)if(c.hasOwnProperty(O)&&(k=c[O],k!=null))switch(O){case"value":g=k;break;case"defaultValue":E=k;break;case"children":A=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(o(91));break;default:pn(t,s,O,k,c,null)}sr(t,g,E,A);return;case"option":for(J in c)if(c.hasOwnProperty(J)&&(g=c[J],g!=null))switch(J){case"selected":t.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:pn(t,s,J,g,c,null)}return;case"dialog":Bt("beforetoggle",t),Bt("toggle",t),Bt("cancel",t),Bt("close",t);break;case"iframe":case"object":Bt("load",t);break;case"video":case"audio":for(g=0;g<Dc.length;g++)Bt(Dc[g],t);break;case"image":Bt("error",t),Bt("load",t);break;case"details":Bt("toggle",t);break;case"embed":case"source":case"link":Bt("error",t),Bt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(me in c)if(c.hasOwnProperty(me)&&(g=c[me],g!=null))switch(me){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:pn(t,s,me,g,c,null)}return;default:if(on(s)){for(ve in c)c.hasOwnProperty(ve)&&(g=c[ve],g!==void 0&&v0(t,s,ve,g,c,void 0));return}}for(k in c)c.hasOwnProperty(k)&&(g=c[k],g!=null&&pn(t,s,k,g,c,null))}function Gb(t,s,c,g){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,A=null,O=null,k=null,J=null,me=null,ve=null;for(we in c){var Se=c[we];if(c.hasOwnProperty(we)&&Se!=null)switch(we){case"checked":break;case"value":break;case"defaultValue":J=Se;default:g.hasOwnProperty(we)||pn(t,s,we,null,g,Se)}}for(var xe in g){var we=g[xe];if(Se=c[xe],g.hasOwnProperty(xe)&&(we!=null||Se!=null))switch(xe){case"type":A=we;break;case"name":E=we;break;case"checked":me=we;break;case"defaultChecked":ve=we;break;case"value":O=we;break;case"defaultValue":k=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(o(137,s));break;default:we!==Se&&pn(t,s,xe,we,g,Se)}}zn(t,O,k,J,me,ve,A,E);return;case"select":we=O=k=xe=null;for(A in c)if(J=c[A],c.hasOwnProperty(A)&&J!=null)switch(A){case"value":break;case"multiple":we=J;default:g.hasOwnProperty(A)||pn(t,s,A,null,g,J)}for(E in g)if(A=g[E],J=c[E],g.hasOwnProperty(E)&&(A!=null||J!=null))switch(E){case"value":xe=A;break;case"defaultValue":k=A;break;case"multiple":O=A;default:A!==J&&pn(t,s,E,A,g,J)}s=k,c=O,g=we,xe!=null?qe(t,!!c,xe,!1):!!g!=!!c&&(s!=null?qe(t,!!c,s,!0):qe(t,!!c,c?[]:"",!1));return;case"textarea":we=xe=null;for(k in c)if(E=c[k],c.hasOwnProperty(k)&&E!=null&&!g.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:pn(t,s,k,null,g,E)}for(O in g)if(E=g[O],A=c[O],g.hasOwnProperty(O)&&(E!=null||A!=null))switch(O){case"value":xe=E;break;case"defaultValue":we=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(o(91));break;default:E!==A&&pn(t,s,O,E,g,A)}Hn(t,xe,we);return;case"option":for(var Xe in c)if(xe=c[Xe],c.hasOwnProperty(Xe)&&xe!=null&&!g.hasOwnProperty(Xe))switch(Xe){case"selected":t.selected=!1;break;default:pn(t,s,Xe,null,g,xe)}for(J in g)if(xe=g[J],we=c[J],g.hasOwnProperty(J)&&xe!==we&&(xe!=null||we!=null))switch(J){case"selected":t.selected=xe&&typeof xe!="function"&&typeof xe!="symbol";break;default:pn(t,s,J,xe,g,we)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var at in c)xe=c[at],c.hasOwnProperty(at)&&xe!=null&&!g.hasOwnProperty(at)&&pn(t,s,at,null,g,xe);for(me in g)if(xe=g[me],we=c[me],g.hasOwnProperty(me)&&xe!==we&&(xe!=null||we!=null))switch(me){case"children":case"dangerouslySetInnerHTML":if(xe!=null)throw Error(o(137,s));break;default:pn(t,s,me,xe,g,we)}return;default:if(on(s)){for(var xn in c)xe=c[xn],c.hasOwnProperty(xn)&&xe!==void 0&&!g.hasOwnProperty(xn)&&v0(t,s,xn,void 0,g,xe);for(ve in g)xe=g[ve],we=c[ve],!g.hasOwnProperty(ve)||xe===we||xe===void 0&&we===void 0||v0(t,s,ve,xe,g,we);return}}for(var oe in c)xe=c[oe],c.hasOwnProperty(oe)&&xe!=null&&!g.hasOwnProperty(oe)&&pn(t,s,oe,null,g,xe);for(Se in g)xe=g[Se],we=c[Se],!g.hasOwnProperty(Se)||xe===we||xe==null&&we==null||pn(t,s,Se,xe,g,we)}function y2(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Yb(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,c=performance.getEntriesByType("resource"),g=0;g<c.length;g++){var E=c[g],A=E.transferSize,O=E.initiatorType,k=E.duration;if(A&&k&&y2(O)){for(O=0,k=E.responseEnd,g+=1;g<c.length;g++){var J=c[g],me=J.startTime;if(me>k)break;var ve=J.transferSize,Se=J.initiatorType;ve&&y2(Se)&&(J=J.responseEnd,O+=ve*(J<k?1:(k-me)/(J-me)))}if(--g,s+=8*(A+O)/(E.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var T0=null,C0=null;function Eh(t){return t.nodeType===9?t:t.ownerDocument}function E2(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _2(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function S0(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var I0=null;function qb(){var t=window.event;return t&&t.type==="popstate"?t===I0?!1:(I0=t,!0):(I0=null,!1)}var w2=typeof setTimeout=="function"?setTimeout:void 0,Xb=typeof clearTimeout=="function"?clearTimeout:void 0,A2=typeof Promise=="function"?Promise:void 0,Kb=typeof queueMicrotask=="function"?queueMicrotask:typeof A2<"u"?function(t){return A2.resolve(null).then(t).catch(Wb)}:w2;function Wb(t){setTimeout(function(){throw t})}function ro(t){return t==="head"}function b2(t,s){var c=s,g=0;do{var E=c.nextSibling;if(t.removeChild(c),E&&E.nodeType===8)if(c=E.data,c==="/$"||c==="/&"){if(g===0){t.removeChild(E),Ll(s);return}g--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")g++;else if(c==="html")Lc(t.ownerDocument.documentElement);else if(c==="head"){c=t.ownerDocument.head,Lc(c);for(var A=c.firstChild;A;){var O=A.nextSibling,k=A.nodeName;A[yi]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&A.rel.toLowerCase()==="stylesheet"||c.removeChild(A),A=O}}else c==="body"&&Lc(t.ownerDocument.body);c=E}while(c);Ll(s)}function v2(t,s){var c=t;t=0;do{var g=c.nextSibling;if(c.nodeType===1?s?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(s?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),g&&g.nodeType===8)if(c=g.data,c==="/$"){if(t===0)break;t--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||t++;c=g}while(c)}function N0(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var c=s;switch(s=s.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":N0(c),br(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}t.removeChild(c)}}function Qb(t,s,c,g){for(;t.nodeType===1;){var E=c;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!g&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(g){if(!t[yi])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(A=t.getAttribute("rel"),A==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(A!==E.rel||t.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||t.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||t.getAttribute("title")!==(E.title==null?null:E.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(A=t.getAttribute("src"),(A!==(E.src==null?null:E.src)||t.getAttribute("type")!==(E.type==null?null:E.type)||t.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&A&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var A=E.name==null?null:""+E.name;if(E.type==="hidden"&&t.getAttribute("name")===A)return t}else return t;if(t=fs(t.nextSibling),t===null)break}return null}function Zb(t,s,c){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!c||(t=fs(t.nextSibling),t===null))return null;return t}function T2(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=fs(t.nextSibling),t===null))return null;return t}function R0(t){return t.data==="$?"||t.data==="$~"}function O0(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Jb(t,s){var c=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||c.readyState!=="loading")s();else{var g=function(){s(),c.removeEventListener("DOMContentLoaded",g)};c.addEventListener("DOMContentLoaded",g),t._reactRetry=g}}function fs(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var D0=null;function C2(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var c=t.data;if(c==="/$"||c==="/&"){if(s===0)return fs(t.nextSibling);s--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||s++}t=t.nextSibling}return null}function S2(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var c=t.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(s===0)return t;s--}else c!=="/$"&&c!=="/&"||s++}t=t.previousSibling}return null}function I2(t,s,c){switch(s=Eh(c),t){case"html":if(t=s.documentElement,!t)throw Error(o(452));return t;case"head":if(t=s.head,!t)throw Error(o(453));return t;case"body":if(t=s.body,!t)throw Error(o(454));return t;default:throw Error(o(451))}}function Lc(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);br(t)}var ds=new Map,N2=new Set;function _h(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var wa=be.d;be.d={f:$b,r:e3,D:t3,C:n3,L:r3,m:i3,X:a3,S:s3,M:o3};function $b(){var t=wa.f(),s=hh();return t||s}function e3(t){var s=Dt(t);s!==null&&s.tag===5&&s.type==="form"?qm(s):wa.r(t)}var Ol=typeof document>"u"?null:document;function R2(t,s,c){var g=Ol;if(g&&typeof s=="string"&&s){var E=It(s);E='link[rel="'+t+'"][href="'+E+'"]',typeof c=="string"&&(E+='[crossorigin="'+c+'"]'),N2.has(E)||(N2.add(E),t={rel:t,crossOrigin:c,href:s},g.querySelector(E)===null&&(s=g.createElement("link"),Vr(s,"link",t),bn(s),g.head.appendChild(s)))}}function t3(t){wa.D(t),R2("dns-prefetch",t,null)}function n3(t,s){wa.C(t,s),R2("preconnect",t,s)}function r3(t,s,c){wa.L(t,s,c);var g=Ol;if(g&&t&&s){var E='link[rel="preload"][as="'+It(s)+'"]';s==="image"&&c&&c.imageSrcSet?(E+='[imagesrcset="'+It(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(E+='[imagesizes="'+It(c.imageSizes)+'"]')):E+='[href="'+It(t)+'"]';var A=E;switch(s){case"style":A=Dl(t);break;case"script":A=Ml(t)}ds.has(A)||(t=I({rel:"preload",href:s==="image"&&c&&c.imageSrcSet?void 0:t,as:s},c),ds.set(A,t),g.querySelector(E)!==null||s==="style"&&g.querySelector(Pc(A))||s==="script"&&g.querySelector(Bc(A))||(s=g.createElement("link"),Vr(s,"link",t),bn(s),g.head.appendChild(s)))}}function i3(t,s){wa.m(t,s);var c=Ol;if(c&&t){var g=s&&typeof s.as=="string"?s.as:"script",E='link[rel="modulepreload"][as="'+It(g)+'"][href="'+It(t)+'"]',A=E;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=Ml(t)}if(!ds.has(A)&&(t=I({rel:"modulepreload",href:t},s),ds.set(A,t),c.querySelector(E)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Bc(A)))return}g=c.createElement("link"),Vr(g,"link",t),bn(g),c.head.appendChild(g)}}}function s3(t,s,c){wa.S(t,s,c);var g=Ol;if(g&&t){var E=ir(g).hoistableStyles,A=Dl(t);s=s||"default";var O=E.get(A);if(!O){var k={loading:0,preload:null};if(O=g.querySelector(Pc(A)))k.loading=5;else{t=I({rel:"stylesheet",href:t,"data-precedence":s},c),(c=ds.get(A))&&M0(t,c);var J=O=g.createElement("link");bn(J),Vr(J,"link",t),J._p=new Promise(function(me,ve){J.onload=me,J.onerror=ve}),J.addEventListener("load",function(){k.loading|=1}),J.addEventListener("error",function(){k.loading|=2}),k.loading|=4,wh(O,s,g)}O={type:"stylesheet",instance:O,count:1,state:k},E.set(A,O)}}}function a3(t,s){wa.X(t,s);var c=Ol;if(c&&t){var g=ir(c).hoistableScripts,E=Ml(t),A=g.get(E);A||(A=c.querySelector(Bc(E)),A||(t=I({src:t,async:!0},s),(s=ds.get(E))&&L0(t,s),A=c.createElement("script"),bn(A),Vr(A,"link",t),c.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},g.set(E,A))}}function o3(t,s){wa.M(t,s);var c=Ol;if(c&&t){var g=ir(c).hoistableScripts,E=Ml(t),A=g.get(E);A||(A=c.querySelector(Bc(E)),A||(t=I({src:t,async:!0,type:"module"},s),(s=ds.get(E))&&L0(t,s),A=c.createElement("script"),bn(A),Vr(A,"link",t),c.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},g.set(E,A))}}function O2(t,s,c,g){var E=(E=Me.current)?_h(E):null;if(!E)throw Error(o(446));switch(t){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(s=Dl(c.href),c=ir(E).hoistableStyles,g=c.get(s),g||(g={type:"style",instance:null,count:0,state:null},c.set(s,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){t=Dl(c.href);var A=ir(E).hoistableStyles,O=A.get(t);if(O||(E=E.ownerDocument||E,O={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(t,O),(A=E.querySelector(Pc(t)))&&!A._p&&(O.instance=A,O.state.loading=5),ds.has(t)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},ds.set(t,c),A||l3(E,t,c,O.state))),s&&g===null)throw Error(o(528,""));return O}if(s&&g!==null)throw Error(o(529,""));return null;case"script":return s=c.async,c=c.src,typeof c=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Ml(c),c=ir(E).hoistableScripts,g=c.get(s),g||(g={type:"script",instance:null,count:0,state:null},c.set(s,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,t))}}function Dl(t){return'href="'+It(t)+'"'}function Pc(t){return'link[rel="stylesheet"]['+t+"]"}function D2(t){return I({},t,{"data-precedence":t.precedence,precedence:null})}function l3(t,s,c,g){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?g.loading=1:(s=t.createElement("link"),g.preload=s,s.addEventListener("load",function(){return g.loading|=1}),s.addEventListener("error",function(){return g.loading|=2}),Vr(s,"link",c),bn(s),t.head.appendChild(s))}function Ml(t){return'[src="'+It(t)+'"]'}function Bc(t){return"script[async]"+t}function M2(t,s,c){if(s.count++,s.instance===null)switch(s.type){case"style":var g=t.querySelector('style[data-href~="'+It(c.href)+'"]');if(g)return s.instance=g,bn(g),g;var E=I({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return g=(t.ownerDocument||t).createElement("style"),bn(g),Vr(g,"style",E),wh(g,c.precedence,t),s.instance=g;case"stylesheet":E=Dl(c.href);var A=t.querySelector(Pc(E));if(A)return s.state.loading|=4,s.instance=A,bn(A),A;g=D2(c),(E=ds.get(E))&&M0(g,E),A=(t.ownerDocument||t).createElement("link"),bn(A);var O=A;return O._p=new Promise(function(k,J){O.onload=k,O.onerror=J}),Vr(A,"link",g),s.state.loading|=4,wh(A,c.precedence,t),s.instance=A;case"script":return A=Ml(c.src),(E=t.querySelector(Bc(A)))?(s.instance=E,bn(E),E):(g=c,(E=ds.get(A))&&(g=I({},c),L0(g,E)),t=t.ownerDocument||t,E=t.createElement("script"),bn(E),Vr(E,"link",g),t.head.appendChild(E),s.instance=E);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(g=s.instance,s.state.loading|=4,wh(g,c.precedence,t));return s.instance}function wh(t,s,c){for(var g=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=g.length?g[g.length-1]:null,A=E,O=0;O<g.length;O++){var k=g[O];if(k.dataset.precedence===s)A=k;else if(A!==E)break}A?A.parentNode.insertBefore(t,A.nextSibling):(s=c.nodeType===9?c.head:c,s.insertBefore(t,s.firstChild))}function M0(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function L0(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var Ah=null;function L2(t,s,c){if(Ah===null){var g=new Map,E=Ah=new Map;E.set(c,g)}else E=Ah,g=E.get(c),g||(g=new Map,E.set(c,g));if(g.has(t))return g;for(g.set(t,null),c=c.getElementsByTagName(t),E=0;E<c.length;E++){var A=c[E];if(!(A[yi]||A[An]||t==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var O=A.getAttribute(s)||"";O=t+O;var k=g.get(O);k?k.push(A):g.set(O,[A])}}return g}function P2(t,s,c){t=t.ownerDocument||t,t.head.insertBefore(c,s==="title"?t.querySelector("head > title"):null)}function c3(t,s,c){if(c===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function B2(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function u3(t,s,c,g){if(c.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var E=Dl(g.href),A=s.querySelector(Pc(E));if(A){s=A._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=bh.bind(t),s.then(t,t)),c.state.loading|=4,c.instance=A,bn(A);return}A=s.ownerDocument||s,g=D2(g),(E=ds.get(E))&&M0(g,E),A=A.createElement("link"),bn(A);var O=A;O._p=new Promise(function(k,J){O.onload=k,O.onerror=J}),Vr(A,"link",g),c.instance=A}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(c,s),(s=c.state.preload)&&(c.state.loading&3)===0&&(t.count++,c=bh.bind(t),s.addEventListener("load",c),s.addEventListener("error",c))}}var P0=0;function h3(t,s){return t.stylesheets&&t.count===0&&Th(t,t.stylesheets),0<t.count||0<t.imgCount?function(c){var g=setTimeout(function(){if(t.stylesheets&&Th(t,t.stylesheets),t.unsuspend){var A=t.unsuspend;t.unsuspend=null,A()}},6e4+s);0<t.imgBytes&&P0===0&&(P0=62500*Yb());var E=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Th(t,t.stylesheets),t.unsuspend)){var A=t.unsuspend;t.unsuspend=null,A()}},(t.imgBytes>P0?50:800)+s);return t.unsuspend=c,function(){t.unsuspend=null,clearTimeout(g),clearTimeout(E)}}:null}function bh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Th(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var vh=null;function Th(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,vh=new Map,s.forEach(f3,t),vh=null,bh.call(t))}function f3(t,s){if(!(s.state.loading&4)){var c=vh.get(t);if(c)var g=c.get(null);else{c=new Map,vh.set(t,c);for(var E=t.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<E.length;A++){var O=E[A];(O.nodeName==="LINK"||O.getAttribute("media")!=="not all")&&(c.set(O.dataset.precedence,O),g=O)}g&&c.set(null,g)}E=s.instance,O=E.getAttribute("data-precedence"),A=c.get(O)||g,A===g&&c.set(null,E),c.set(O,E),this.count++,g=bh.bind(this),E.addEventListener("load",g),E.addEventListener("error",g),A?A.parentNode.insertBefore(E,A.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(E,t.firstChild)),s.state.loading|=4}}var kc={$$typeof:ee,Provider:null,Consumer:null,_currentValue:He,_currentValue2:He,_threadCount:0};function d3(t,s,c,g,E,A,O,k,J){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Er(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Er(0),this.hiddenUpdates=Er(null),this.identifierPrefix=g,this.onUncaughtError=E,this.onCaughtError=A,this.onRecoverableError=O,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=J,this.incompleteTransitions=new Map}function k2(t,s,c,g,E,A,O,k,J,me,ve,Se){return t=new d3(t,s,c,O,J,me,ve,Se,k),s=1,A===!0&&(s|=24),A=ji(3,null,null,s),t.current=A,A.stateNode=t,s=gd(),s.refCount++,t.pooledCache=s,s.refCount++,A.memoizedState={element:g,isDehydrated:c,cache:s},yd(A),t}function U2(t){return t?(t=ul,t):ul}function V2(t,s,c,g,E,A){E=U2(E),g.context===null?g.context=E:g.pendingContext=E,g=qa(s),g.payload={element:c},A=A===void 0?null:A,A!==null&&(g.callback=A),c=Xa(t,g,s),c!==null&&(Ii(c,t,s),mc(c,t,s))}function j2(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var c=t.retryLane;t.retryLane=c!==0&&c<s?c:s}}function B0(t,s){j2(t,s),(t=t.alternate)&&j2(t,s)}function F2(t){if(t.tag===13||t.tag===31){var s=Mo(t,67108864);s!==null&&Ii(s,t,67108864),B0(t,67108864)}}function z2(t){if(t.tag===13||t.tag===31){var s=Yi();s=Bn(s);var c=Mo(t,s);c!==null&&Ii(c,t,s),B0(t,s)}}var Ch=!0;function g3(t,s,c,g){var E=pe.T;pe.T=null;var A=be.p;try{be.p=2,k0(t,s,c,g)}finally{be.p=A,pe.T=E}}function m3(t,s,c,g){var E=pe.T;pe.T=null;var A=be.p;try{be.p=8,k0(t,s,c,g)}finally{be.p=A,pe.T=E}}function k0(t,s,c,g){if(Ch){var E=U0(g);if(E===null)b0(t,s,g,Sh,c),G2(t,g);else if(x3(E,t,s,c,g))g.stopPropagation();else if(G2(t,g),s&4&&-1<p3.indexOf(t)){for(;E!==null;){var A=Dt(E);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var O=Xr(A.pendingLanes);if(O!==0){var k=A;for(k.pendingLanes|=2,k.entangledLanes|=2;O;){var J=1<<31-rt(O);k.entanglements[1]|=J,O&=~J}Fs(A),(sn&6)===0&&(ch=dn()+500,Oc(0))}}break;case 31:case 13:k=Mo(A,2),k!==null&&Ii(k,A,2),hh(),B0(A,2)}if(A=U0(g),A===null&&b0(t,s,g,Sh,c),A===E)break;E=A}E!==null&&g.stopPropagation()}else b0(t,s,g,null,c)}}function U0(t){return t=_i(t),V0(t)}var Sh=null;function V0(t){if(Sh=null,t=gn(t),t!==null){var s=d(t);if(s===null)t=null;else{var c=s.tag;if(c===13){if(t=y(s),t!==null)return t;t=null}else if(c===31){if(t=T(s),t!==null)return t;t=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return Sh=t,null}function H2(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ai()){case ur:return 2;case Yr:return 8;case rr:case Kn:return 32;case Rs:return 268435456;default:return 32}default:return 32}}var j0=!1,io=null,so=null,ao=null,Uc=new Map,Vc=new Map,oo=[],p3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function G2(t,s){switch(t){case"focusin":case"focusout":io=null;break;case"dragenter":case"dragleave":so=null;break;case"mouseover":case"mouseout":ao=null;break;case"pointerover":case"pointerout":Uc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vc.delete(s.pointerId)}}function jc(t,s,c,g,E,A){return t===null||t.nativeEvent!==A?(t={blockedOn:s,domEventName:c,eventSystemFlags:g,nativeEvent:A,targetContainers:[E]},s!==null&&(s=Dt(s),s!==null&&F2(s)),t):(t.eventSystemFlags|=g,s=t.targetContainers,E!==null&&s.indexOf(E)===-1&&s.push(E),t)}function x3(t,s,c,g,E){switch(s){case"focusin":return io=jc(io,t,s,c,g,E),!0;case"dragenter":return so=jc(so,t,s,c,g,E),!0;case"mouseover":return ao=jc(ao,t,s,c,g,E),!0;case"pointerover":var A=E.pointerId;return Uc.set(A,jc(Uc.get(A)||null,t,s,c,g,E)),!0;case"gotpointercapture":return A=E.pointerId,Vc.set(A,jc(Vc.get(A)||null,t,s,c,g,E)),!0}return!1}function Y2(t){var s=gn(t.target);if(s!==null){var c=d(s);if(c!==null){if(s=c.tag,s===13){if(s=y(c),s!==null){t.blockedOn=s,Ve(t.priority,function(){z2(c)});return}}else if(s===31){if(s=T(c),s!==null){t.blockedOn=s,Ve(t.priority,function(){z2(c)});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){t.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ih(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var c=U0(t.nativeEvent);if(c===null){c=t.nativeEvent;var g=new c.constructor(c.type,c);Qs=g,c.target.dispatchEvent(g),Qs=null}else return s=Dt(c),s!==null&&F2(s),t.blockedOn=c,!1;s.shift()}return!0}function q2(t,s,c){Ih(t)&&c.delete(s)}function y3(){j0=!1,io!==null&&Ih(io)&&(io=null),so!==null&&Ih(so)&&(so=null),ao!==null&&Ih(ao)&&(ao=null),Uc.forEach(q2),Vc.forEach(q2)}function Nh(t,s){t.blockedOn===s&&(t.blockedOn=null,j0||(j0=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,y3)))}var Rh=null;function X2(t){Rh!==t&&(Rh=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Rh===t&&(Rh=null);for(var s=0;s<t.length;s+=3){var c=t[s],g=t[s+1],E=t[s+2];if(typeof g!="function"){if(V0(g||c)===null)continue;break}var A=Dt(c);A!==null&&(t.splice(s,3),s-=3,Ud(A,{pending:!0,data:E,method:c.method,action:g},g,E))}}))}function Ll(t){function s(J){return Nh(J,t)}io!==null&&Nh(io,t),so!==null&&Nh(so,t),ao!==null&&Nh(ao,t),Uc.forEach(s),Vc.forEach(s);for(var c=0;c<oo.length;c++){var g=oo[c];g.blockedOn===t&&(g.blockedOn=null)}for(;0<oo.length&&(c=oo[0],c.blockedOn===null);)Y2(c),c.blockedOn===null&&oo.shift();if(c=(t.ownerDocument||t).$$reactFormReplay,c!=null)for(g=0;g<c.length;g+=3){var E=c[g],A=c[g+1],O=E[qt]||null;if(typeof A=="function")O||X2(c);else if(O){var k=null;if(A&&A.hasAttribute("formAction")){if(E=A,O=A[qt]||null)k=O.formAction;else if(V0(E)!==null)continue}else k=O.action;typeof k=="function"?c[g+1]=k:(c.splice(g,3),g-=3),X2(c)}}}function K2(){function t(A){A.canIntercept&&A.info==="react-transition"&&A.intercept({handler:function(){return new Promise(function(O){return E=O})},focusReset:"manual",scroll:"manual"})}function s(){E!==null&&(E(),E=null),g||setTimeout(c,20)}function c(){if(!g&&!navigation.transition){var A=navigation.currentEntry;A&&A.url!=null&&navigation.navigate(A.url,{state:A.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,E=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(c,100),function(){g=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),E!==null&&(E(),E=null)}}}function F0(t){this._internalRoot=t}Oh.prototype.render=F0.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(o(409));var c=s.current,g=Yi();V2(c,g,t,s,null,null)},Oh.prototype.unmount=F0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;V2(t.current,2,null,t,null,null),hh(),s[Ar]=null}};function Oh(t){this._internalRoot=t}Oh.prototype.unstable_scheduleHydration=function(t){if(t){var s=wr();t={blockedOn:null,target:t,priority:s};for(var c=0;c<oo.length&&s!==0&&s<oo[c].priority;c++);oo.splice(c,0,t),c===0&&Y2(t)}};var W2=e.version;if(W2!=="19.2.3")throw Error(o(527,W2,"19.2.3"));be.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=_(s),t=t!==null?S(t):null,t=t===null?null:t.stateNode,t};var E3={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:pe,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dh.isDisabled&&Dh.supportsFiber)try{Gt=Dh.inject(E3),Re=Dh}catch{}}return zc.createRoot=function(t,s){if(!u(t))throw Error(o(299));var c=!1,g="",E=np,A=rp,O=ip;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(g=s.identifierPrefix),s.onUncaughtError!==void 0&&(E=s.onUncaughtError),s.onCaughtError!==void 0&&(A=s.onCaughtError),s.onRecoverableError!==void 0&&(O=s.onRecoverableError)),s=k2(t,1,!1,null,null,c,g,null,E,A,O,K2),t[Ar]=s.current,A0(t),new F0(s)},zc.hydrateRoot=function(t,s,c){if(!u(t))throw Error(o(299));var g=!1,E="",A=np,O=rp,k=ip,J=null;return c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(E=c.identifierPrefix),c.onUncaughtError!==void 0&&(A=c.onUncaughtError),c.onCaughtError!==void 0&&(O=c.onCaughtError),c.onRecoverableError!==void 0&&(k=c.onRecoverableError),c.formState!==void 0&&(J=c.formState)),s=k2(t,1,!0,s,c??null,g,E,J,A,O,k,K2),s.context=U2(null),c=s.current,g=Yi(),g=Bn(g),E=qa(g),E.callback=null,Xa(c,E,g),c=g,s.current.lanes=c,xi(s,c),Fs(s),t[Ar]=s.current,A0(t),new Oh(s)},zc.version="19.2.3",zc}var sx;function R3(){if(sx)return G0.exports;sx=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),G0.exports=N3(),G0.exports}var O3=R3();const D3=Q1(O3);/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ax="popstate";function M3(r={}){function e(u,d){let{pathname:y="/",search:T="",hash:b=""}=nl(u.location.hash.substring(1));return!y.startsWith("/")&&!y.startsWith(".")&&(y="/"+y),f1("",{pathname:y,search:T,hash:b},d.state&&d.state.usr||null,d.state&&d.state.key||"default")}function n(u,d){let y=u.document.querySelector("base"),T="";if(y&&y.getAttribute("href")){let b=u.location.href,_=b.indexOf("#");T=_===-1?b:b.slice(0,_)}return T+"#"+(typeof d=="string"?d:iu(d))}function o(u,d){ps(u.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(d)})`)}return P3(e,n,o,r)}function qn(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function ps(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function L3(){return Math.random().toString(36).substring(2,10)}function ox(r,e){return{usr:r.state,key:r.key,idx:e}}function f1(r,e,n=null,o){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?nl(e):e,state:n,key:e&&e.key||o||L3()}}function iu({pathname:r="/",search:e="",hash:n=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(r+=n.charAt(0)==="#"?n:"#"+n),r}function nl(r){let e={};if(r){let n=r.indexOf("#");n>=0&&(e.hash=r.substring(n),r=r.substring(0,n));let o=r.indexOf("?");o>=0&&(e.search=r.substring(o),r=r.substring(0,o)),r&&(e.pathname=r)}return e}function P3(r,e,n,o={}){let{window:u=document.defaultView,v5Compat:d=!1}=o,y=u.history,T="POP",b=null,_=S();_==null&&(_=0,y.replaceState({...y.state,idx:_},""));function S(){return(y.state||{idx:null}).idx}function I(){T="POP";let q=S(),le=q==null?null:q-_;_=q,b&&b({action:T,location:W.location,delta:le})}function M(q,le){T="PUSH";let ae=f1(W.location,q,le);n&&n(ae,q),_=S()+1;let ee=ox(ae,_),fe=W.createHref(ae);try{y.pushState(ee,"",fe)}catch(je){if(je instanceof DOMException&&je.name==="DataCloneError")throw je;u.location.assign(fe)}d&&b&&b({action:T,location:W.location,delta:1})}function V(q,le){T="REPLACE";let ae=f1(W.location,q,le);n&&n(ae,q),_=S();let ee=ox(ae,_),fe=W.createHref(ae);y.replaceState(ee,"",fe),d&&b&&b({action:T,location:W.location,delta:0})}function K(q){return B3(q)}let W={get action(){return T},get location(){return r(u,y)},listen(q){if(b)throw new Error("A history only accepts one active listener");return u.addEventListener(ax,I),b=q,()=>{u.removeEventListener(ax,I),b=null}},createHref(q){return e(u,q)},createURL:K,encodeLocation(q){let le=K(q);return{pathname:le.pathname,search:le.search,hash:le.hash}},push:M,replace:V,go(q){return y.go(q)}};return W}function B3(r,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),qn(n,"No window.location.(origin|href) available to create URL");let o=typeof r=="string"?r:iu(r);return o=o.replace(/ $/,"%20"),!e&&o.startsWith("//")&&(o=n+o),new URL(o,n)}function $E(r,e,n="/"){return k3(r,e,n,!1)}function k3(r,e,n,o){let u=typeof e=="string"?nl(e):e,d=Ta(u.pathname||"/",n);if(d==null)return null;let y=e_(r);U3(y);let T=null;for(let b=0;T==null&&b<y.length;++b){let _=W3(d);T=X3(y[b],_,o)}return T}function e_(r,e=[],n=[],o="",u=!1){let d=(y,T,b=u,_)=>{let S={relativePath:_===void 0?y.path||"":_,caseSensitive:y.caseSensitive===!0,childrenIndex:T,route:y};if(S.relativePath.startsWith("/")){if(!S.relativePath.startsWith(o)&&b)return;qn(S.relativePath.startsWith(o),`Absolute route path "${S.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),S.relativePath=S.relativePath.slice(o.length)}let I=ba([o,S.relativePath]),M=n.concat(S);y.children&&y.children.length>0&&(qn(y.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${I}".`),e_(y.children,e,M,I,b)),!(y.path==null&&!y.index)&&e.push({path:I,score:Y3(I,y.index),routesMeta:M})};return r.forEach((y,T)=>{var b;if(y.path===""||!((b=y.path)!=null&&b.includes("?")))d(y,T);else for(let _ of t_(y.path))d(y,T,!0,_)}),e}function t_(r){let e=r.split("/");if(e.length===0)return[];let[n,...o]=e,u=n.endsWith("?"),d=n.replace(/\?$/,"");if(o.length===0)return u?[d,""]:[d];let y=t_(o.join("/")),T=[];return T.push(...y.map(b=>b===""?d:[d,b].join("/"))),u&&T.push(...y),T.map(b=>r.startsWith("/")&&b===""?"/":b)}function U3(r){r.sort((e,n)=>e.score!==n.score?n.score-e.score:q3(e.routesMeta.map(o=>o.childrenIndex),n.routesMeta.map(o=>o.childrenIndex)))}var V3=/^:[\w-]+$/,j3=3,F3=2,z3=1,H3=10,G3=-2,lx=r=>r==="*";function Y3(r,e){let n=r.split("/"),o=n.length;return n.some(lx)&&(o+=G3),e&&(o+=F3),n.filter(u=>!lx(u)).reduce((u,d)=>u+(V3.test(d)?j3:d===""?z3:H3),o)}function q3(r,e){return r.length===e.length&&r.slice(0,-1).every((o,u)=>o===e[u])?r[r.length-1]-e[e.length-1]:0}function X3(r,e,n=!1){let{routesMeta:o}=r,u={},d="/",y=[];for(let T=0;T<o.length;++T){let b=o[T],_=T===o.length-1,S=d==="/"?e:e.slice(d.length)||"/",I=tf({path:b.relativePath,caseSensitive:b.caseSensitive,end:_},S),M=b.route;if(!I&&_&&n&&!o[o.length-1].route.index&&(I=tf({path:b.relativePath,caseSensitive:b.caseSensitive,end:!1},S)),!I)return null;Object.assign(u,I.params),y.push({params:u,pathname:ba([d,I.pathname]),pathnameBase:$3(ba([d,I.pathnameBase])),route:M}),I.pathnameBase!=="/"&&(d=ba([d,I.pathnameBase]))}return y}function tf(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[n,o]=K3(r.path,r.caseSensitive,r.end),u=e.match(n);if(!u)return null;let d=u[0],y=d.replace(/(.)\/+$/,"$1"),T=u.slice(1);return{params:o.reduce((_,{paramName:S,isOptional:I},M)=>{if(S==="*"){let K=T[M]||"";y=d.slice(0,d.length-K.length).replace(/(.)\/+$/,"$1")}const V=T[M];return I&&!V?_[S]=void 0:_[S]=(V||"").replace(/%2F/g,"/"),_},{}),pathname:d,pathnameBase:y,pattern:r}}function K3(r,e=!1,n=!0){ps(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let o=[],u="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(y,T,b)=>(o.push({paramName:T,isOptional:b!=null}),b?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(o.push({paramName:"*"}),u+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?u+="\\/*$":r!==""&&r!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,e?void 0:"i"),o]}function W3(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ps(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Ta(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,o=r.charAt(n);return o&&o!=="/"?null:r.slice(n)||"/"}var n_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Q3=r=>n_.test(r);function Z3(r,e="/"){let{pathname:n,search:o="",hash:u=""}=typeof r=="string"?nl(r):r,d;if(n)if(Q3(n))d=n;else{if(n.includes("//")){let y=n;n=n.replace(/\/\/+/g,"/"),ps(!1,`Pathnames cannot have embedded double slashes - normalizing ${y} -> ${n}`)}n.startsWith("/")?d=cx(n.substring(1),"/"):d=cx(n,e)}else d=e;return{pathname:d,search:ev(o),hash:tv(u)}}function cx(r,e){let n=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(u=>{u===".."?n.length>1&&n.pop():u!=="."&&n.push(u)}),n.length>1?n.join("/"):"/"}function K0(r,e,n,o){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function J3(r){return r.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function r_(r){let e=J3(r);return e.map((n,o)=>o===e.length-1?n.pathname:n.pathnameBase)}function i_(r,e,n,o=!1){let u;typeof r=="string"?u=nl(r):(u={...r},qn(!u.pathname||!u.pathname.includes("?"),K0("?","pathname","search",u)),qn(!u.pathname||!u.pathname.includes("#"),K0("#","pathname","hash",u)),qn(!u.search||!u.search.includes("#"),K0("#","search","hash",u)));let d=r===""||u.pathname==="",y=d?"/":u.pathname,T;if(y==null)T=n;else{let I=e.length-1;if(!o&&y.startsWith("..")){let M=y.split("/");for(;M[0]==="..";)M.shift(),I-=1;u.pathname=M.join("/")}T=I>=0?e[I]:"/"}let b=Z3(u,T),_=y&&y!=="/"&&y.endsWith("/"),S=(d||y===".")&&n.endsWith("/");return!b.pathname.endsWith("/")&&(_||S)&&(b.pathname+="/"),b}var ba=r=>r.join("/").replace(/\/\/+/g,"/"),$3=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),ev=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,tv=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,nv=class{constructor(r,e,n,o=!1){this.status=r,this.statusText=e||"",this.internal=o,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function rv(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function iv(r){return r.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var s_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function a_(r,e){let n=r;if(typeof n!="string"||!n_.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let o=n,u=!1;if(s_)try{let d=new URL(window.location.href),y=n.startsWith("//")?new URL(d.protocol+n):new URL(n),T=Ta(y.pathname,e);y.origin===d.origin&&T!=null?n=T+y.search+y.hash:u=!0}catch{ps(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:o,isExternal:u,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var o_=["POST","PUT","PATCH","DELETE"];new Set(o_);var sv=["GET",...o_];new Set(sv);var ec=ie.createContext(null);ec.displayName="DataRouter";var Of=ie.createContext(null);Of.displayName="DataRouterState";var av=ie.createContext(!1),l_=ie.createContext({isTransitioning:!1});l_.displayName="ViewTransition";var ov=ie.createContext(new Map);ov.displayName="Fetchers";var lv=ie.createContext(null);lv.displayName="Await";var Es=ie.createContext(null);Es.displayName="Navigation";var pu=ie.createContext(null);pu.displayName="Location";var Oa=ie.createContext({outlet:null,matches:[],isDataRoute:!1});Oa.displayName="Route";var J1=ie.createContext(null);J1.displayName="RouteError";var c_="REACT_ROUTER_ERROR",cv="REDIRECT",uv="ROUTE_ERROR_RESPONSE";function hv(r){if(r.startsWith(`${c_}:${cv}:{`))try{let e=JSON.parse(r.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function fv(r){if(r.startsWith(`${c_}:${uv}:{`))try{let e=JSON.parse(r.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new nv(e.status,e.statusText,e.data)}catch{}}function dv(r,{relative:e}={}){qn(xu(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:o}=ie.useContext(Es),{hash:u,pathname:d,search:y}=yu(r,{relative:e}),T=d;return n!=="/"&&(T=d==="/"?n:ba([n,d])),o.createHref({pathname:T,search:y,hash:u})}function xu(){return ie.useContext(pu)!=null}function bo(){return qn(xu(),"useLocation() may be used only in the context of a <Router> component."),ie.useContext(pu).location}var u_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function h_(r){ie.useContext(Es).static||ie.useLayoutEffect(r)}function gv(){let{isDataRoute:r}=ie.useContext(Oa);return r?Sv():mv()}function mv(){qn(xu(),"useNavigate() may be used only in the context of a <Router> component.");let r=ie.useContext(ec),{basename:e,navigator:n}=ie.useContext(Es),{matches:o}=ie.useContext(Oa),{pathname:u}=bo(),d=JSON.stringify(r_(o)),y=ie.useRef(!1);return h_(()=>{y.current=!0}),ie.useCallback((b,_={})=>{if(ps(y.current,u_),!y.current)return;if(typeof b=="number"){n.go(b);return}let S=i_(b,JSON.parse(d),u,_.relative==="path");r==null&&e!=="/"&&(S.pathname=S.pathname==="/"?e:ba([e,S.pathname])),(_.replace?n.replace:n.push)(S,_.state,_)},[e,n,d,u,r])}ie.createContext(null);function yu(r,{relative:e}={}){let{matches:n}=ie.useContext(Oa),{pathname:o}=bo(),u=JSON.stringify(r_(n));return ie.useMemo(()=>i_(r,JSON.parse(u),o,e==="path"),[r,u,o,e])}function pv(r,e){return f_(r,e)}function f_(r,e,n,o,u){var ae;qn(xu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:d}=ie.useContext(Es),{matches:y}=ie.useContext(Oa),T=y[y.length-1],b=T?T.params:{},_=T?T.pathname:"/",S=T?T.pathnameBase:"/",I=T&&T.route;{let ee=I&&I.path||"";g_(_,!I||ee.endsWith("*")||ee.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${_}" (under <Route path="${ee}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${ee}"> to <Route path="${ee==="/"?"*":`${ee}/*`}">.`)}let M=bo(),V;if(e){let ee=typeof e=="string"?nl(e):e;qn(S==="/"||((ae=ee.pathname)==null?void 0:ae.startsWith(S)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${S}" but pathname "${ee.pathname}" was given in the \`location\` prop.`),V=ee}else V=M;let K=V.pathname||"/",W=K;if(S!=="/"){let ee=S.replace(/^\//,"").split("/");W="/"+K.replace(/^\//,"").split("/").slice(ee.length).join("/")}let q=$E(r,{pathname:W});ps(I||q!=null,`No routes matched location "${V.pathname}${V.search}${V.hash}" `),ps(q==null||q[q.length-1].route.element!==void 0||q[q.length-1].route.Component!==void 0||q[q.length-1].route.lazy!==void 0,`Matched leaf route at location "${V.pathname}${V.search}${V.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let le=wv(q&&q.map(ee=>Object.assign({},ee,{params:Object.assign({},b,ee.params),pathname:ba([S,d.encodeLocation?d.encodeLocation(ee.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:ee.pathname]),pathnameBase:ee.pathnameBase==="/"?S:ba([S,d.encodeLocation?d.encodeLocation(ee.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:ee.pathnameBase])})),y,n,o,u);return e&&le?ie.createElement(pu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...V},navigationType:"POP"}},le):le}function xv(){let r=Cv(),e=rv(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),n=r instanceof Error?r.stack:null,o="rgba(200,200,200, 0.5)",u={padding:"0.5rem",backgroundColor:o},d={padding:"2px 4px",backgroundColor:o},y=null;return console.error("Error handled by React Router default ErrorBoundary:",r),y=ie.createElement(ie.Fragment,null,ie.createElement("p",null," Hey developer "),ie.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ie.createElement("code",{style:d},"ErrorBoundary")," or"," ",ie.createElement("code",{style:d},"errorElement")," prop on your route.")),ie.createElement(ie.Fragment,null,ie.createElement("h2",null,"Unexpected Application Error!"),ie.createElement("h3",{style:{fontStyle:"italic"}},e),n?ie.createElement("pre",{style:u},n):null,y)}var yv=ie.createElement(xv,null),d_=class extends ie.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.onError?this.props.onError(r,e):console.error("React Router caught the following error during render",r)}render(){let r=this.state.error;if(this.context&&typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){const n=fv(r.digest);n&&(r=n)}let e=r!==void 0?ie.createElement(Oa.Provider,{value:this.props.routeContext},ie.createElement(J1.Provider,{value:r,children:this.props.component})):this.props.children;return this.context?ie.createElement(Ev,{error:r},e):e}};d_.contextType=av;var W0=new WeakMap;function Ev({children:r,error:e}){let{basename:n}=ie.useContext(Es);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let o=hv(e.digest);if(o){let u=W0.get(e);if(u)throw u;let d=a_(o.location,n);if(s_&&!W0.get(e))if(d.isExternal||o.reloadDocument)window.location.href=d.absoluteURL||d.to;else{const y=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(d.to,{replace:o.replace}));throw W0.set(e,y),y}return ie.createElement("meta",{httpEquiv:"refresh",content:`0;url=${d.absoluteURL||d.to}`})}}return r}function _v({routeContext:r,match:e,children:n}){let o=ie.useContext(ec);return o&&o.static&&o.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=e.route.id),ie.createElement(Oa.Provider,{value:r},n)}function wv(r,e=[],n=null,o=null,u=null){if(r==null){if(!n)return null;if(n.errors)r=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)r=n.matches;else return null}let d=r,y=n==null?void 0:n.errors;if(y!=null){let S=d.findIndex(I=>I.route.id&&(y==null?void 0:y[I.route.id])!==void 0);qn(S>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(y).join(",")}`),d=d.slice(0,Math.min(d.length,S+1))}let T=!1,b=-1;if(n)for(let S=0;S<d.length;S++){let I=d[S];if((I.route.HydrateFallback||I.route.hydrateFallbackElement)&&(b=S),I.route.id){let{loaderData:M,errors:V}=n,K=I.route.loader&&!M.hasOwnProperty(I.route.id)&&(!V||V[I.route.id]===void 0);if(I.route.lazy||K){T=!0,b>=0?d=d.slice(0,b+1):d=[d[0]];break}}}let _=n&&o?(S,I)=>{var M,V;o(S,{location:n.location,params:((V=(M=n.matches)==null?void 0:M[0])==null?void 0:V.params)??{},unstable_pattern:iv(n.matches),errorInfo:I})}:void 0;return d.reduceRight((S,I,M)=>{let V,K=!1,W=null,q=null;n&&(V=y&&I.route.id?y[I.route.id]:void 0,W=I.route.errorElement||yv,T&&(b<0&&M===0?(g_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),K=!0,q=null):b===M&&(K=!0,q=I.route.hydrateFallbackElement||null)));let le=e.concat(d.slice(0,M+1)),ae=()=>{let ee;return V?ee=W:K?ee=q:I.route.Component?ee=ie.createElement(I.route.Component,null):I.route.element?ee=I.route.element:ee=S,ie.createElement(_v,{match:I,routeContext:{outlet:S,matches:le,isDataRoute:n!=null},children:ee})};return n&&(I.route.ErrorBoundary||I.route.errorElement||M===0)?ie.createElement(d_,{location:n.location,revalidation:n.revalidation,component:W,error:V,children:ae(),routeContext:{outlet:null,matches:le,isDataRoute:!0},onError:_}):ae()},null)}function $1(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Av(r){let e=ie.useContext(ec);return qn(e,$1(r)),e}function bv(r){let e=ie.useContext(Of);return qn(e,$1(r)),e}function vv(r){let e=ie.useContext(Oa);return qn(e,$1(r)),e}function eg(r){let e=vv(r),n=e.matches[e.matches.length-1];return qn(n.route.id,`${r} can only be used on routes that contain a unique "id"`),n.route.id}function Tv(){return eg("useRouteId")}function Cv(){var o;let r=ie.useContext(J1),e=bv("useRouteError"),n=eg("useRouteError");return r!==void 0?r:(o=e.errors)==null?void 0:o[n]}function Sv(){let{router:r}=Av("useNavigate"),e=eg("useNavigate"),n=ie.useRef(!1);return h_(()=>{n.current=!0}),ie.useCallback(async(u,d={})=>{ps(n.current,u_),n.current&&(typeof u=="number"?await r.navigate(u):await r.navigate(u,{fromRouteId:e,...d}))},[r,e])}var ux={};function g_(r,e,n){!e&&!ux[r]&&(ux[r]=!0,ps(!1,n))}ie.memo(Iv);function Iv({routes:r,future:e,state:n,onError:o}){return f_(r,void 0,n,o,e)}function qo(r){qn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Nv({basename:r="/",children:e=null,location:n,navigationType:o="POP",navigator:u,static:d=!1,unstable_useTransitions:y}){qn(!xu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let T=r.replace(/^\/*/,"/"),b=ie.useMemo(()=>({basename:T,navigator:u,static:d,unstable_useTransitions:y,future:{}}),[T,u,d,y]);typeof n=="string"&&(n=nl(n));let{pathname:_="/",search:S="",hash:I="",state:M=null,key:V="default"}=n,K=ie.useMemo(()=>{let W=Ta(_,T);return W==null?null:{location:{pathname:W,search:S,hash:I,state:M,key:V},navigationType:o}},[T,_,S,I,M,V,o]);return ps(K!=null,`<Router basename="${T}"> is not able to match the URL "${_}${S}${I}" because it does not start with the basename, so the <Router> won't render anything.`),K==null?null:ie.createElement(Es.Provider,{value:b},ie.createElement(pu.Provider,{children:e,value:K}))}function Rv({children:r,location:e}){return pv(d1(r),e)}function d1(r,e=[]){let n=[];return ie.Children.forEach(r,(o,u)=>{if(!ie.isValidElement(o))return;let d=[...e,u];if(o.type===ie.Fragment){n.push.apply(n,d1(o.props.children,d));return}qn(o.type===qo,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),qn(!o.props.index||!o.props.children,"An index route cannot have child routes.");let y={id:o.props.id||d.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,middleware:o.props.middleware,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(y.children=d1(o.props.children,d)),n.push(y)}),n}var qh="get",Xh="application/x-www-form-urlencoded";function Df(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function Ov(r){return Df(r)&&r.tagName.toLowerCase()==="button"}function Dv(r){return Df(r)&&r.tagName.toLowerCase()==="form"}function Mv(r){return Df(r)&&r.tagName.toLowerCase()==="input"}function Lv(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function Pv(r,e){return r.button===0&&(!e||e==="_self")&&!Lv(r)}var Lh=null;function Bv(){if(Lh===null)try{new FormData(document.createElement("form"),0),Lh=!1}catch{Lh=!0}return Lh}var kv=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Q0(r){return r!=null&&!kv.has(r)?(ps(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Xh}"`),null):r}function Uv(r,e){let n,o,u,d,y;if(Dv(r)){let T=r.getAttribute("action");o=T?Ta(T,e):null,n=r.getAttribute("method")||qh,u=Q0(r.getAttribute("enctype"))||Xh,d=new FormData(r)}else if(Ov(r)||Mv(r)&&(r.type==="submit"||r.type==="image")){let T=r.form;if(T==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let b=r.getAttribute("formaction")||T.getAttribute("action");if(o=b?Ta(b,e):null,n=r.getAttribute("formmethod")||T.getAttribute("method")||qh,u=Q0(r.getAttribute("formenctype"))||Q0(T.getAttribute("enctype"))||Xh,d=new FormData(T,r),!Bv()){let{name:_,type:S,value:I}=r;if(S==="image"){let M=_?`${_}.`:"";d.append(`${M}x`,"0"),d.append(`${M}y`,"0")}else _&&d.append(_,I)}}else{if(Df(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=qh,o=null,u=Xh,y=r}return d&&u==="text/plain"&&(y=d,d=void 0),{action:o,method:n.toLowerCase(),encType:u,formData:d,body:y}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function tg(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Vv(r,e,n,o){let u=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return n?u.pathname.endsWith("/")?u.pathname=`${u.pathname}_.${o}`:u.pathname=`${u.pathname}.${o}`:u.pathname==="/"?u.pathname=`_root.${o}`:e&&Ta(u.pathname,e)==="/"?u.pathname=`${e.replace(/\/$/,"")}/_root.${o}`:u.pathname=`${u.pathname.replace(/\/$/,"")}.${o}`,u}async function jv(r,e){if(r.id in e)return e[r.id];try{let n=await import(r.module);return e[r.id]=n,n}catch(n){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Fv(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function zv(r,e,n){let o=await Promise.all(r.map(async u=>{let d=e.routes[u.route.id];if(d){let y=await jv(d,n);return y.links?y.links():[]}return[]}));return qv(o.flat(1).filter(Fv).filter(u=>u.rel==="stylesheet"||u.rel==="preload").map(u=>u.rel==="stylesheet"?{...u,rel:"prefetch",as:"style"}:{...u,rel:"prefetch"}))}function hx(r,e,n,o,u,d){let y=(b,_)=>n[_]?b.route.id!==n[_].route.id:!0,T=(b,_)=>{var S;return n[_].pathname!==b.pathname||((S=n[_].route.path)==null?void 0:S.endsWith("*"))&&n[_].params["*"]!==b.params["*"]};return d==="assets"?e.filter((b,_)=>y(b,_)||T(b,_)):d==="data"?e.filter((b,_)=>{var I;let S=o.routes[b.route.id];if(!S||!S.hasLoader)return!1;if(y(b,_)||T(b,_))return!0;if(b.route.shouldRevalidate){let M=b.route.shouldRevalidate({currentUrl:new URL(u.pathname+u.search+u.hash,window.origin),currentParams:((I=n[0])==null?void 0:I.params)||{},nextUrl:new URL(r,window.origin),nextParams:b.params,defaultShouldRevalidate:!0});if(typeof M=="boolean")return M}return!0}):[]}function Hv(r,e,{includeHydrateFallback:n}={}){return Gv(r.map(o=>{let u=e.routes[o.route.id];if(!u)return[];let d=[u.module];return u.clientActionModule&&(d=d.concat(u.clientActionModule)),u.clientLoaderModule&&(d=d.concat(u.clientLoaderModule)),n&&u.hydrateFallbackModule&&(d=d.concat(u.hydrateFallbackModule)),u.imports&&(d=d.concat(u.imports)),d}).flat(1))}function Gv(r){return[...new Set(r)]}function Yv(r){let e={},n=Object.keys(r).sort();for(let o of n)e[o]=r[o];return e}function qv(r,e){let n=new Set;return new Set(e),r.reduce((o,u)=>{let d=JSON.stringify(Yv(u));return n.has(d)||(n.add(d),o.push({key:d,link:u})),o},[])}function m_(){let r=ie.useContext(ec);return tg(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function Xv(){let r=ie.useContext(Of);return tg(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var ng=ie.createContext(void 0);ng.displayName="FrameworkContext";function p_(){let r=ie.useContext(ng);return tg(r,"You must render this element inside a <HydratedRouter> element"),r}function Kv(r,e){let n=ie.useContext(ng),[o,u]=ie.useState(!1),[d,y]=ie.useState(!1),{onFocus:T,onBlur:b,onMouseEnter:_,onMouseLeave:S,onTouchStart:I}=e,M=ie.useRef(null);ie.useEffect(()=>{if(r==="render"&&y(!0),r==="viewport"){let W=le=>{le.forEach(ae=>{y(ae.isIntersecting)})},q=new IntersectionObserver(W,{threshold:.5});return M.current&&q.observe(M.current),()=>{q.disconnect()}}},[r]),ie.useEffect(()=>{if(o){let W=setTimeout(()=>{y(!0)},100);return()=>{clearTimeout(W)}}},[o]);let V=()=>{u(!0)},K=()=>{u(!1),y(!1)};return n?r!=="intent"?[d,M,{}]:[d,M,{onFocus:Hc(T,V),onBlur:Hc(b,K),onMouseEnter:Hc(_,V),onMouseLeave:Hc(S,K),onTouchStart:Hc(I,V)}]:[!1,M,{}]}function Hc(r,e){return n=>{r&&r(n),n.defaultPrevented||e(n)}}function Wv({page:r,...e}){let{router:n}=m_(),o=ie.useMemo(()=>$E(n.routes,r,n.basename),[n.routes,r,n.basename]);return o?ie.createElement(Zv,{page:r,matches:o,...e}):null}function Qv(r){let{manifest:e,routeModules:n}=p_(),[o,u]=ie.useState([]);return ie.useEffect(()=>{let d=!1;return zv(r,e,n).then(y=>{d||u(y)}),()=>{d=!0}},[r,e,n]),o}function Zv({page:r,matches:e,...n}){let o=bo(),{future:u,manifest:d,routeModules:y}=p_(),{basename:T}=m_(),{loaderData:b,matches:_}=Xv(),S=ie.useMemo(()=>hx(r,e,_,d,o,"data"),[r,e,_,d,o]),I=ie.useMemo(()=>hx(r,e,_,d,o,"assets"),[r,e,_,d,o]),M=ie.useMemo(()=>{if(r===o.pathname+o.search+o.hash)return[];let W=new Set,q=!1;if(e.forEach(ae=>{var fe;let ee=d.routes[ae.route.id];!ee||!ee.hasLoader||(!S.some(je=>je.route.id===ae.route.id)&&ae.route.id in b&&((fe=y[ae.route.id])!=null&&fe.shouldRevalidate)||ee.hasClientLoader?q=!0:W.add(ae.route.id))}),W.size===0)return[];let le=Vv(r,T,u.unstable_trailingSlashAwareDataRequests,"data");return q&&W.size>0&&le.searchParams.set("_routes",e.filter(ae=>W.has(ae.route.id)).map(ae=>ae.route.id).join(",")),[le.pathname+le.search]},[T,u.unstable_trailingSlashAwareDataRequests,b,o,d,S,e,r,y]),V=ie.useMemo(()=>Hv(I,d),[I,d]),K=Qv(I);return ie.createElement(ie.Fragment,null,M.map(W=>ie.createElement("link",{key:W,rel:"prefetch",as:"fetch",href:W,...n})),V.map(W=>ie.createElement("link",{key:W,rel:"modulepreload",href:W,...n})),K.map(({key:W,link:q})=>ie.createElement("link",{key:W,nonce:n.nonce,...q})))}function Jv(...r){return e=>{r.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var $v=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{$v&&(window.__reactRouterVersion="7.12.0")}catch{}function eT({basename:r,children:e,unstable_useTransitions:n,window:o}){let u=ie.useRef();u.current==null&&(u.current=M3({window:o,v5Compat:!0}));let d=u.current,[y,T]=ie.useState({action:d.action,location:d.location}),b=ie.useCallback(_=>{n===!1?T(_):ie.startTransition(()=>T(_))},[n]);return ie.useLayoutEffect(()=>d.listen(b),[d,b]),ie.createElement(Nv,{basename:r,children:e,location:y.location,navigationType:y.action,navigator:d,unstable_useTransitions:n})}var x_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nf=ie.forwardRef(function({onClick:e,discover:n="render",prefetch:o="none",relative:u,reloadDocument:d,replace:y,state:T,target:b,to:_,preventScrollReset:S,viewTransition:I,unstable_defaultShouldRevalidate:M,...V},K){let{basename:W,unstable_useTransitions:q}=ie.useContext(Es),le=typeof _=="string"&&x_.test(_),ae=a_(_,W);_=ae.to;let ee=dv(_,{relative:u}),[fe,je,De]=Kv(o,V),z=iT(_,{replace:y,state:T,target:b,preventScrollReset:S,relative:u,viewTransition:I,unstable_defaultShouldRevalidate:M,unstable_useTransitions:q});function U($){e&&e($),$.defaultPrevented||z($)}let j=ie.createElement("a",{...V,...De,href:ae.absoluteURL||ee,onClick:ae.isExternal||d?e:U,ref:Jv(K,je),target:b,"data-discover":!le&&n==="render"?"true":void 0});return fe&&!le?ie.createElement(ie.Fragment,null,j,ie.createElement(Wv,{page:ee})):j});nf.displayName="Link";var tT=ie.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:o="",end:u=!1,style:d,to:y,viewTransition:T,children:b,..._},S){let I=yu(y,{relative:_.relative}),M=bo(),V=ie.useContext(Of),{navigator:K,basename:W}=ie.useContext(Es),q=V!=null&&cT(I)&&T===!0,le=K.encodeLocation?K.encodeLocation(I).pathname:I.pathname,ae=M.pathname,ee=V&&V.navigation&&V.navigation.location?V.navigation.location.pathname:null;n||(ae=ae.toLowerCase(),ee=ee?ee.toLowerCase():null,le=le.toLowerCase()),ee&&W&&(ee=Ta(ee,W)||ee);const fe=le!=="/"&&le.endsWith("/")?le.length-1:le.length;let je=ae===le||!u&&ae.startsWith(le)&&ae.charAt(fe)==="/",De=ee!=null&&(ee===le||!u&&ee.startsWith(le)&&ee.charAt(le.length)==="/"),z={isActive:je,isPending:De,isTransitioning:q},U=je?e:void 0,j;typeof o=="function"?j=o(z):j=[o,je?"active":null,De?"pending":null,q?"transitioning":null].filter(Boolean).join(" ");let $=typeof d=="function"?d(z):d;return ie.createElement(nf,{..._,"aria-current":U,className:j,ref:S,style:$,to:y,viewTransition:T},typeof b=="function"?b(z):b)});tT.displayName="NavLink";var nT=ie.forwardRef(({discover:r="render",fetcherKey:e,navigate:n,reloadDocument:o,replace:u,state:d,method:y=qh,action:T,onSubmit:b,relative:_,preventScrollReset:S,viewTransition:I,unstable_defaultShouldRevalidate:M,...V},K)=>{let{unstable_useTransitions:W}=ie.useContext(Es),q=oT(),le=lT(T,{relative:_}),ae=y.toLowerCase()==="get"?"get":"post",ee=typeof T=="string"&&x_.test(T),fe=je=>{if(b&&b(je),je.defaultPrevented)return;je.preventDefault();let De=je.nativeEvent.submitter,z=(De==null?void 0:De.getAttribute("formmethod"))||y,U=()=>q(De||je.currentTarget,{fetcherKey:e,method:z,navigate:n,replace:u,state:d,relative:_,preventScrollReset:S,viewTransition:I,unstable_defaultShouldRevalidate:M});W&&n!==!1?ie.startTransition(()=>U()):U()};return ie.createElement("form",{ref:K,method:ae,action:le,onSubmit:o?b:fe,...V,"data-discover":!ee&&r==="render"?"true":void 0})});nT.displayName="Form";function rT(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function y_(r){let e=ie.useContext(ec);return qn(e,rT(r)),e}function iT(r,{target:e,replace:n,state:o,preventScrollReset:u,relative:d,viewTransition:y,unstable_defaultShouldRevalidate:T,unstable_useTransitions:b}={}){let _=gv(),S=bo(),I=yu(r,{relative:d});return ie.useCallback(M=>{if(Pv(M,e)){M.preventDefault();let V=n!==void 0?n:iu(S)===iu(I),K=()=>_(r,{replace:V,state:o,preventScrollReset:u,relative:d,viewTransition:y,unstable_defaultShouldRevalidate:T});b?ie.startTransition(()=>K()):K()}},[S,_,I,n,o,e,r,u,d,y,T,b])}var sT=0,aT=()=>`__${String(++sT)}__`;function oT(){let{router:r}=y_("useSubmit"),{basename:e}=ie.useContext(Es),n=Tv(),o=r.fetch,u=r.navigate;return ie.useCallback(async(d,y={})=>{let{action:T,method:b,encType:_,formData:S,body:I}=Uv(d,e);if(y.navigate===!1){let M=y.fetcherKey||aT();await o(M,n,y.action||T,{unstable_defaultShouldRevalidate:y.unstable_defaultShouldRevalidate,preventScrollReset:y.preventScrollReset,formData:S,body:I,formMethod:y.method||b,formEncType:y.encType||_,flushSync:y.flushSync})}else await u(y.action||T,{unstable_defaultShouldRevalidate:y.unstable_defaultShouldRevalidate,preventScrollReset:y.preventScrollReset,formData:S,body:I,formMethod:y.method||b,formEncType:y.encType||_,replace:y.replace,state:y.state,fromRouteId:n,flushSync:y.flushSync,viewTransition:y.viewTransition})},[o,u,e,n])}function lT(r,{relative:e}={}){let{basename:n}=ie.useContext(Es),o=ie.useContext(Oa);qn(o,"useFormAction must be used inside a RouteContext");let[u]=o.matches.slice(-1),d={...yu(r||".",{relative:e})},y=bo();if(r==null){d.search=y.search;let T=new URLSearchParams(d.search),b=T.getAll("index");if(b.some(S=>S==="")){T.delete("index"),b.filter(I=>I).forEach(I=>T.append("index",I));let S=T.toString();d.search=S?`?${S}`:""}}return(!r||r===".")&&u.route.index&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(d.pathname=d.pathname==="/"?n:ba([n,d.pathname])),iu(d)}function cT(r,{relative:e}={}){let n=ie.useContext(l_);qn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=y_("useViewTransitionState"),u=yu(r,{relative:e});if(!n.isTransitioning)return!1;let d=Ta(n.currentLocation.pathname,o)||n.currentLocation.pathname,y=Ta(n.nextLocation.pathname,o)||n.nextLocation.pathname;return tf(u.pathname,y)!=null||tf(u.pathname,d)!=null}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uT=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),hT=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,o)=>o?o.toUpperCase():n.toLowerCase()),fx=r=>{const e=hT(r);return e.charAt(0).toUpperCase()+e.slice(1)},E_=(...r)=>r.filter((e,n,o)=>!!e&&e.trim()!==""&&o.indexOf(e)===n).join(" ").trim(),fT=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var dT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gT=ie.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:u="",children:d,iconNode:y,...T},b)=>ie.createElement("svg",{ref:b,...dT,width:e,height:e,stroke:r,strokeWidth:o?Number(n)*24/Number(e):n,className:E_("lucide",u),...!d&&!fT(T)&&{"aria-hidden":"true"},...T},[...y.map(([_,S])=>ie.createElement(_,S)),...Array.isArray(d)?d:[d]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=(r,e)=>{const n=ie.forwardRef(({className:o,...u},d)=>ie.createElement(gT,{ref:d,iconNode:e,className:E_(`lucide-${uT(fx(r))}`,`lucide-${r}`,o),...u}));return n.displayName=fx(r),n};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mT=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],dx=Et("calendar",mT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pT=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],g1=Et("camera",pT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xT=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Wo=Et("check",xT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yT=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Z0=Et("chevron-right",yT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ET=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],__=Et("circle-alert",ET);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _T=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],su=Et("circle-check-big",_T);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],AT=Et("circle-check",wT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bT=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],au=Et("clock",bT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vT=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],TT=Et("coins",vT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CT=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ST=Et("eye",CT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IT=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],NT=Et("flame",IT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RT=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],gx=Et("gift",RT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OT=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],DT=Et("graduation-cap",OT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MT=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Kh=Et("heart",MT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LT=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],rf=Et("history",LT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PT=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],mx=Et("image",PT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],w_=Et("info",BT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kT=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],UT=Et("layout-dashboard",kT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VT=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],jT=Et("log-out",VT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FT=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],zT=Et("medal",FT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HT=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],GT=Et("menu",HT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YT=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],m1=Et("package",YT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Pl=Et("plus",qT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],KT=Et("qr-code",XT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],QT=Et("refresh-cw",WT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZT=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],JT=Et("scan-line",ZT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $T=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],eC=Et("search",$T);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],nC=Et("send",tC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rC=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],iC=Et("settings",rC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],sf=Et("shield-check",sC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aC=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],oC=Et("shopping-bag",aC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],cC=Et("shopping-cart",lC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],af=Et("sparkles",uC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],fC=Et("star",hC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Zc=Et("target",dC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gC=[["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}],["path",{d:"M7 10v12",key:"1qc93n"}]],mC=Et("thumbs-up",gC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ph=Et("trash-2",pC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],yC=Et("trending-up",xC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],px=Et("trophy",EC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],p1=Et("upload",_C);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wC=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],x1=Et("user-plus",wC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],bC=Et("user",AC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],TC=Et("users",vC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],uo=Et("x",CC),A_=ie.createContext(void 0),tc=()=>{const r=ie.useContext(A_);if(!r)throw new Error("useAlert must be used within an AlertProvider");return r},SC=({children:r})=>{const[e,n]=ie.useState(null),o=(d,y="info")=>{n({message:d,type:y})},u=()=>{n(null)};return v.jsxs(A_.Provider,{value:{showAlert:o,hideAlert:u},children:[r,e&&v.jsx(IC,{message:e.message,type:e.type,onClose:u})]})},IC=({message:r,type:e,onClose:n})=>{const o={success:v.jsx(su,{className:"text-emerald-500",size:32}),error:v.jsx(__,{className:"text-rose-500",size:32}),info:v.jsx(w_,{className:"text-indigo-500",size:32})},u={success:"bg-emerald-50",error:"bg-rose-50",info:"bg-indigo-50"};return v.jsx("div",{className:"fixed inset-0 z-[999] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:v.jsx("div",{className:"bg-white rounded-[2.5rem] max-w-sm w-full p-8 shadow-2xl animate-in zoom-in-95 duration-200 border border-slate-100",children:v.jsxs("div",{className:"flex flex-col items-center text-center",children:[v.jsx("div",{className:`${u[e]} p-4 rounded-2xl mb-6`,children:o[e]}),v.jsx("h3",{className:"text-xl font-black text-slate-800 mb-2",children:""}),v.jsx("p",{className:"text-slate-500 font-bold leading-relaxed mb-8",children:r}),v.jsx("button",{onClick:n,className:"w-full bg-slate-900 hover:bg-slate-800 text-white font-black py-4 rounded-2xl transition-all active:scale-95 shadow-lg shadow-slate-200",children:""})]})})})},NC=()=>{};var xx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_=function(r){const e=[];let n=0;for(let o=0;o<r.length;o++){let u=r.charCodeAt(o);u<128?e[n++]=u:u<2048?(e[n++]=u>>6|192,e[n++]=u&63|128):(u&64512)===55296&&o+1<r.length&&(r.charCodeAt(o+1)&64512)===56320?(u=65536+((u&1023)<<10)+(r.charCodeAt(++o)&1023),e[n++]=u>>18|240,e[n++]=u>>12&63|128,e[n++]=u>>6&63|128,e[n++]=u&63|128):(e[n++]=u>>12|224,e[n++]=u>>6&63|128,e[n++]=u&63|128)}return e},RC=function(r){const e=[];let n=0,o=0;for(;n<r.length;){const u=r[n++];if(u<128)e[o++]=String.fromCharCode(u);else if(u>191&&u<224){const d=r[n++];e[o++]=String.fromCharCode((u&31)<<6|d&63)}else if(u>239&&u<365){const d=r[n++],y=r[n++],T=r[n++],b=((u&7)<<18|(d&63)<<12|(y&63)<<6|T&63)-65536;e[o++]=String.fromCharCode(55296+(b>>10)),e[o++]=String.fromCharCode(56320+(b&1023))}else{const d=r[n++],y=r[n++];e[o++]=String.fromCharCode((u&15)<<12|(d&63)<<6|y&63)}}return e.join("")},v_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let u=0;u<r.length;u+=3){const d=r[u],y=u+1<r.length,T=y?r[u+1]:0,b=u+2<r.length,_=b?r[u+2]:0,S=d>>2,I=(d&3)<<4|T>>4;let M=(T&15)<<2|_>>6,V=_&63;b||(V=64,y||(M=64)),o.push(n[S],n[I],n[M],n[V])}return o.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(b_(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):RC(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let u=0;u<r.length;){const d=n[r.charAt(u++)],T=u<r.length?n[r.charAt(u)]:0;++u;const _=u<r.length?n[r.charAt(u)]:64;++u;const I=u<r.length?n[r.charAt(u)]:64;if(++u,d==null||T==null||_==null||I==null)throw new OC;const M=d<<2|T>>4;if(o.push(M),_!==64){const V=T<<4&240|_>>2;if(o.push(V),I!==64){const K=_<<6&192|I;o.push(K)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class OC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const DC=function(r){const e=b_(r);return v_.encodeByteArray(e,!0)},of=function(r){return DC(r).replace(/\./g,"")},MC=function(r){try{return v_.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC=()=>LC().__FIREBASE_DEFAULTS__,BC=()=>{if(typeof process>"u"||typeof xx>"u")return;const r=xx.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},kC=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&MC(r[1]);return e&&JSON.parse(e)},rg=()=>{try{return NC()||PC()||BC()||kC()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},UC=r=>{var e,n;return(n=(e=rg())==null?void 0:e.emulatorHosts)==null?void 0:n[r]},VC=r=>{const e=UC(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),o]:[e.substring(0,n),o]},T_=()=>{var r;return(r=rg())==null?void 0:r.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,o)=>{n?this.reject(n):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,o))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function FC(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},o=e||"demo-project",u=r.iat||0,d=r.sub||r.user_id;if(!d)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const y={iss:`https://securetoken.google.com/${o}`,aud:o,iat:u,exp:u+3600,auth_time:u,sub:d,user_id:d,firebase:{sign_in_provider:"custom",identities:{}},...r};return[of(JSON.stringify(n)),of(JSON.stringify(y)),""].join(".")}const Jc={};function HC(){const r={prod:[],emulator:[]};for(const e of Object.keys(Jc))Jc[e]?r.emulator.push(e):r.prod.push(e);return r}function GC(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let yx=!1;function YC(r,e){if(typeof window>"u"||typeof document>"u"||!ig(window.location.host)||Jc[r]===e||Jc[r]||yx)return;Jc[r]=e;function n(M){return`__firebase__banner__${M}`}const o="__firebase__banner",d=HC().prod.length>0;function y(){const M=document.getElementById(o);M&&M.remove()}function T(M){M.style.display="flex",M.style.background="#7faaf0",M.style.position="fixed",M.style.bottom="5px",M.style.left="5px",M.style.padding=".5em",M.style.borderRadius="5px",M.style.alignItems="center"}function b(M,V){M.setAttribute("width","24"),M.setAttribute("id",V),M.setAttribute("height","24"),M.setAttribute("viewBox","0 0 24 24"),M.setAttribute("fill","none"),M.style.marginLeft="-6px"}function _(){const M=document.createElement("span");return M.style.cursor="pointer",M.style.marginLeft="16px",M.style.fontSize="24px",M.innerHTML=" &times;",M.onclick=()=>{yx=!0,y()},M}function S(M,V){M.setAttribute("id",V),M.innerText="Learn more",M.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",M.setAttribute("target","__blank"),M.style.paddingLeft="5px",M.style.textDecoration="underline"}function I(){const M=GC(o),V=n("text"),K=document.getElementById(V)||document.createElement("span"),W=n("learnmore"),q=document.getElementById(W)||document.createElement("a"),le=n("preprendIcon"),ae=document.getElementById(le)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(M.created){const ee=M.element;T(ee),S(q,W);const fe=_();b(ae,le),ee.append(ae,K,q,fe),document.body.appendChild(ee)}d?(K.innerText="Preview backend disconnected.",ae.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ae.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,K.innerText="Preview backend running in this workspace."),K.setAttribute("id",V)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qC(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function XC(){var e;const r=(e=rg())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function KC(){return!XC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function WC(){try{return typeof indexedDB=="object"}catch{return!1}}function QC(){return new Promise((r,e)=>{try{let n=!0;const o="validate-browser-context-for-indexeddb-analytics-module",u=self.indexedDB.open(o);u.onsuccess=()=>{u.result.close(),n||self.indexedDB.deleteDatabase(o),r(!0)},u.onupgradeneeded=()=>{n=!1},u.onerror=()=>{var d;e(((d=u.error)==null?void 0:d.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC="FirebaseError";class nc extends Error{constructor(e,n,o){super(n),this.code=e,this.customData=o,this.name=ZC,Object.setPrototypeOf(this,nc.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,C_.prototype.create)}}class C_{constructor(e,n,o){this.service=e,this.serviceName=n,this.errors=o}create(e,...n){const o=n[0]||{},u=`${this.service}/${e}`,d=this.errors[e],y=d?JC(d,o):"Error",T=`${this.serviceName}: ${y} (${u}).`;return new nc(u,T,o)}}function JC(r,e){return r.replace($C,(n,o)=>{const u=e[o];return u!=null?String(u):`<${o}?>`})}const $C=/\{\$([^}]+)}/g;function lf(r,e){if(r===e)return!0;const n=Object.keys(r),o=Object.keys(e);for(const u of n){if(!o.includes(u))return!1;const d=r[u],y=e[u];if(Ex(d)&&Ex(y)){if(!lf(d,y))return!1}else if(d!==y)return!1}for(const u of o)if(!n.includes(u))return!1;return!0}function Ex(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xs(r){return r&&r._delegate?r._delegate:r}class ou{constructor(e,n,o){this.name=e,this.instanceFactory=n,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const o=new jC;if(this.instancesDeferred.set(n,o),this.isInitialized(n)||this.shouldAutoInitialize())try{const u=this.getOrInitializeService({instanceIdentifier:n});u&&o.resolve(u)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nS(e))try{this.getOrInitializeService({instanceIdentifier:Xo})}catch{}for(const[n,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(n);try{const d=this.getOrInitializeService({instanceIdentifier:u});o.resolve(d)}catch{}}}}clearInstance(e=Xo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xo){return this.instances.has(e)}getOptions(e=Xo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const u=this.getOrInitializeService({instanceIdentifier:o,options:n});for(const[d,y]of this.instancesDeferred.entries()){const T=this.normalizeInstanceIdentifier(d);o===T&&y.resolve(u)}return u}onInit(e,n){const o=this.normalizeInstanceIdentifier(n),u=this.onInitCallbacks.get(o)??new Set;u.add(e),this.onInitCallbacks.set(o,u);const d=this.instances.get(o);return d&&e(d,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const o=this.onInitCallbacks.get(n);if(o)for(const u of o)try{u(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:tS(e),options:n}),this.instances.set(e,o),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=Xo){return this.component?this.component.multipleInstances?e:Xo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tS(r){return r===Xo?void 0:r}function nS(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new eS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Zt||(Zt={}));const iS={debug:Zt.DEBUG,verbose:Zt.VERBOSE,info:Zt.INFO,warn:Zt.WARN,error:Zt.ERROR,silent:Zt.SILENT},sS=Zt.INFO,aS={[Zt.DEBUG]:"log",[Zt.VERBOSE]:"log",[Zt.INFO]:"info",[Zt.WARN]:"warn",[Zt.ERROR]:"error"},oS=(r,e,...n)=>{if(e<r.logLevel)return;const o=new Date().toISOString(),u=aS[e];if(u)console[u](`[${o}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class S_{constructor(e){this.name=e,this._logLevel=sS,this._logHandler=oS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Zt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?iS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Zt.DEBUG,...e),this._logHandler(this,Zt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Zt.VERBOSE,...e),this._logHandler(this,Zt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Zt.INFO,...e),this._logHandler(this,Zt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Zt.WARN,...e),this._logHandler(this,Zt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Zt.ERROR,...e),this._logHandler(this,Zt.ERROR,...e)}}const lS=(r,e)=>e.some(n=>r instanceof n);let _x,wx;function cS(){return _x||(_x=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function uS(){return wx||(wx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const I_=new WeakMap,y1=new WeakMap,N_=new WeakMap,J0=new WeakMap,sg=new WeakMap;function hS(r){const e=new Promise((n,o)=>{const u=()=>{r.removeEventListener("success",d),r.removeEventListener("error",y)},d=()=>{n(ho(r.result)),u()},y=()=>{o(r.error),u()};r.addEventListener("success",d),r.addEventListener("error",y)});return e.then(n=>{n instanceof IDBCursor&&I_.set(n,r)}).catch(()=>{}),sg.set(e,r),e}function fS(r){if(y1.has(r))return;const e=new Promise((n,o)=>{const u=()=>{r.removeEventListener("complete",d),r.removeEventListener("error",y),r.removeEventListener("abort",y)},d=()=>{n(),u()},y=()=>{o(r.error||new DOMException("AbortError","AbortError")),u()};r.addEventListener("complete",d),r.addEventListener("error",y),r.addEventListener("abort",y)});y1.set(r,e)}let E1={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return y1.get(r);if(e==="objectStoreNames")return r.objectStoreNames||N_.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ho(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function dS(r){E1=r(E1)}function gS(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const o=r.call($0(this),e,...n);return N_.set(o,e.sort?e.sort():[e]),ho(o)}:uS().includes(r)?function(...e){return r.apply($0(this),e),ho(I_.get(this))}:function(...e){return ho(r.apply($0(this),e))}}function mS(r){return typeof r=="function"?gS(r):(r instanceof IDBTransaction&&fS(r),lS(r,cS())?new Proxy(r,E1):r)}function ho(r){if(r instanceof IDBRequest)return hS(r);if(J0.has(r))return J0.get(r);const e=mS(r);return e!==r&&(J0.set(r,e),sg.set(e,r)),e}const $0=r=>sg.get(r);function pS(r,e,{blocked:n,upgrade:o,blocking:u,terminated:d}={}){const y=indexedDB.open(r,e),T=ho(y);return o&&y.addEventListener("upgradeneeded",b=>{o(ho(y.result),b.oldVersion,b.newVersion,ho(y.transaction),b)}),n&&y.addEventListener("blocked",b=>n(b.oldVersion,b.newVersion,b)),T.then(b=>{d&&b.addEventListener("close",()=>d()),u&&b.addEventListener("versionchange",_=>u(_.oldVersion,_.newVersion,_))}).catch(()=>{}),T}const xS=["get","getKey","getAll","getAllKeys","count"],yS=["put","add","delete","clear"],e1=new Map;function Ax(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(e1.get(e))return e1.get(e);const n=e.replace(/FromIndex$/,""),o=e!==n,u=yS.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!(u||xS.includes(n)))return;const d=async function(y,...T){const b=this.transaction(y,u?"readwrite":"readonly");let _=b.store;return o&&(_=_.index(T.shift())),(await Promise.all([_[n](...T),u&&b.done]))[0]};return e1.set(e,d),d}dS(r=>({...r,get:(e,n,o)=>Ax(e,n)||r.get(e,n,o),has:(e,n)=>!!Ax(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(_S(n)){const o=n.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(n=>n).join(" ")}}function _S(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const _1="@firebase/app",bx="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca=new S_("@firebase/app"),wS="@firebase/app-compat",AS="@firebase/analytics-compat",bS="@firebase/analytics",vS="@firebase/app-check-compat",TS="@firebase/app-check",CS="@firebase/auth",SS="@firebase/auth-compat",IS="@firebase/database",NS="@firebase/data-connect",RS="@firebase/database-compat",OS="@firebase/functions",DS="@firebase/functions-compat",MS="@firebase/installations",LS="@firebase/installations-compat",PS="@firebase/messaging",BS="@firebase/messaging-compat",kS="@firebase/performance",US="@firebase/performance-compat",VS="@firebase/remote-config",jS="@firebase/remote-config-compat",FS="@firebase/storage",zS="@firebase/storage-compat",HS="@firebase/firestore",GS="@firebase/ai",YS="@firebase/firestore-compat",qS="firebase",XS="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1="[DEFAULT]",KS={[_1]:"fire-core",[wS]:"fire-core-compat",[bS]:"fire-analytics",[AS]:"fire-analytics-compat",[TS]:"fire-app-check",[vS]:"fire-app-check-compat",[CS]:"fire-auth",[SS]:"fire-auth-compat",[IS]:"fire-rtdb",[NS]:"fire-data-connect",[RS]:"fire-rtdb-compat",[OS]:"fire-fn",[DS]:"fire-fn-compat",[MS]:"fire-iid",[LS]:"fire-iid-compat",[PS]:"fire-fcm",[BS]:"fire-fcm-compat",[kS]:"fire-perf",[US]:"fire-perf-compat",[VS]:"fire-rc",[jS]:"fire-rc-compat",[FS]:"fire-gcs",[zS]:"fire-gcs-compat",[HS]:"fire-fst",[YS]:"fire-fst-compat",[GS]:"fire-vertex","fire-js":"fire-js",[qS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cf=new Map,WS=new Map,A1=new Map;function vx(r,e){try{r.container.addComponent(e)}catch(n){Ca.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function uf(r){const e=r.name;if(A1.has(e))return Ca.debug(`There were multiple attempts to register component ${e}.`),!1;A1.set(e,r);for(const n of cf.values())vx(n,r);for(const n of WS.values())vx(n,r);return!0}function QS(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function ZS(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fo=new C_("app","Firebase",JS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e,n,o){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new ou("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e4=XS;function R_(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const o={name:w1,automaticDataCollectionEnabled:!0,...e},u=o.name;if(typeof u!="string"||!u)throw fo.create("bad-app-name",{appName:String(u)});if(n||(n=T_()),!n)throw fo.create("no-options");const d=cf.get(u);if(d){if(lf(n,d.options)&&lf(o,d.config))return d;throw fo.create("duplicate-app",{appName:u})}const y=new rS(u);for(const b of A1.values())y.addComponent(b);const T=new $S(n,o,y);return cf.set(u,T),T}function t4(r=w1){const e=cf.get(r);if(!e&&r===w1&&T_())return R_();if(!e)throw fo.create("no-app",{appName:r});return e}function Gl(r,e,n){let o=KS[r]??r;n&&(o+=`-${n}`);const u=o.match(/\s|\//),d=e.match(/\s|\//);if(u||d){const y=[`Unable to register library "${o}" with version "${e}":`];u&&y.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&d&&y.push("and"),d&&y.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ca.warn(y.join(" "));return}uf(new ou(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4="firebase-heartbeat-database",r4=1,lu="firebase-heartbeat-store";let t1=null;function O_(){return t1||(t1=pS(n4,r4,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(lu)}catch(n){console.warn(n)}}}}).catch(r=>{throw fo.create("idb-open",{originalErrorMessage:r.message})})),t1}async function i4(r){try{const n=(await O_()).transaction(lu),o=await n.objectStore(lu).get(D_(r));return await n.done,o}catch(e){if(e instanceof nc)Ca.warn(e.message);else{const n=fo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ca.warn(n.message)}}}async function Tx(r,e){try{const o=(await O_()).transaction(lu,"readwrite");await o.objectStore(lu).put(e,D_(r)),await o.done}catch(n){if(n instanceof nc)Ca.warn(n.message);else{const o=fo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ca.warn(o.message)}}}function D_(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4=1024,a4=30;class o4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new c4(n),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var e,n;try{const u=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),d=Cx();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===d||this._heartbeatsCache.heartbeats.some(y=>y.date===d))return;if(this._heartbeatsCache.heartbeats.push({date:d,agent:u}),this._heartbeatsCache.heartbeats.length>a4){const y=u4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(y,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(o){Ca.warn(o)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Cx(),{heartbeatsToSend:o,unsentEntries:u}=l4(this._heartbeatsCache.heartbeats),d=of(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=n,u.length>0?(this._heartbeatsCache.heartbeats=u,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),d}catch(n){return Ca.warn(n),""}}}function Cx(){return new Date().toISOString().substring(0,10)}function l4(r,e=s4){const n=[];let o=r.slice();for(const u of r){const d=n.find(y=>y.agent===u.agent);if(d){if(d.dates.push(u.date),Sx(n)>e){d.dates.pop();break}}else if(n.push({agent:u.agent,dates:[u.date]}),Sx(n)>e){n.pop();break}o=o.slice(1)}return{heartbeatsToSend:n,unsentEntries:o}}class c4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return WC()?QC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await i4(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return Tx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return Tx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Sx(r){return of(JSON.stringify({version:2,heartbeats:r})).length}function u4(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let o=1;o<r.length;o++)r[o].date<n&&(n=r[o].date,e=o);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h4(r){uf(new ou("platform-logger",e=>new ES(e),"PRIVATE")),uf(new ou("heartbeat",e=>new o4(e),"PRIVATE")),Gl(_1,bx,r),Gl(_1,bx,"esm2020"),Gl("fire-js","")}h4("");var Ix=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var go,M_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(z,U){function j(){}j.prototype=U.prototype,z.F=U.prototype,z.prototype=new j,z.prototype.constructor=z,z.D=function($,Q,Z){for(var X=Array(arguments.length-2),We=2;We<arguments.length;We++)X[We-2]=arguments[We];return U.prototype[Q].apply($,X)}}function n(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(o,n),o.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function u(z,U,j){j||(j=0);const $=Array(16);if(typeof U=="string")for(var Q=0;Q<16;++Q)$[Q]=U.charCodeAt(j++)|U.charCodeAt(j++)<<8|U.charCodeAt(j++)<<16|U.charCodeAt(j++)<<24;else for(Q=0;Q<16;++Q)$[Q]=U[j++]|U[j++]<<8|U[j++]<<16|U[j++]<<24;U=z.g[0],j=z.g[1],Q=z.g[2];let Z=z.g[3],X;X=U+(Z^j&(Q^Z))+$[0]+3614090360&4294967295,U=j+(X<<7&4294967295|X>>>25),X=Z+(Q^U&(j^Q))+$[1]+3905402710&4294967295,Z=U+(X<<12&4294967295|X>>>20),X=Q+(j^Z&(U^j))+$[2]+606105819&4294967295,Q=Z+(X<<17&4294967295|X>>>15),X=j+(U^Q&(Z^U))+$[3]+3250441966&4294967295,j=Q+(X<<22&4294967295|X>>>10),X=U+(Z^j&(Q^Z))+$[4]+4118548399&4294967295,U=j+(X<<7&4294967295|X>>>25),X=Z+(Q^U&(j^Q))+$[5]+1200080426&4294967295,Z=U+(X<<12&4294967295|X>>>20),X=Q+(j^Z&(U^j))+$[6]+2821735955&4294967295,Q=Z+(X<<17&4294967295|X>>>15),X=j+(U^Q&(Z^U))+$[7]+4249261313&4294967295,j=Q+(X<<22&4294967295|X>>>10),X=U+(Z^j&(Q^Z))+$[8]+1770035416&4294967295,U=j+(X<<7&4294967295|X>>>25),X=Z+(Q^U&(j^Q))+$[9]+2336552879&4294967295,Z=U+(X<<12&4294967295|X>>>20),X=Q+(j^Z&(U^j))+$[10]+4294925233&4294967295,Q=Z+(X<<17&4294967295|X>>>15),X=j+(U^Q&(Z^U))+$[11]+2304563134&4294967295,j=Q+(X<<22&4294967295|X>>>10),X=U+(Z^j&(Q^Z))+$[12]+1804603682&4294967295,U=j+(X<<7&4294967295|X>>>25),X=Z+(Q^U&(j^Q))+$[13]+4254626195&4294967295,Z=U+(X<<12&4294967295|X>>>20),X=Q+(j^Z&(U^j))+$[14]+2792965006&4294967295,Q=Z+(X<<17&4294967295|X>>>15),X=j+(U^Q&(Z^U))+$[15]+1236535329&4294967295,j=Q+(X<<22&4294967295|X>>>10),X=U+(Q^Z&(j^Q))+$[1]+4129170786&4294967295,U=j+(X<<5&4294967295|X>>>27),X=Z+(j^Q&(U^j))+$[6]+3225465664&4294967295,Z=U+(X<<9&4294967295|X>>>23),X=Q+(U^j&(Z^U))+$[11]+643717713&4294967295,Q=Z+(X<<14&4294967295|X>>>18),X=j+(Z^U&(Q^Z))+$[0]+3921069994&4294967295,j=Q+(X<<20&4294967295|X>>>12),X=U+(Q^Z&(j^Q))+$[5]+3593408605&4294967295,U=j+(X<<5&4294967295|X>>>27),X=Z+(j^Q&(U^j))+$[10]+38016083&4294967295,Z=U+(X<<9&4294967295|X>>>23),X=Q+(U^j&(Z^U))+$[15]+3634488961&4294967295,Q=Z+(X<<14&4294967295|X>>>18),X=j+(Z^U&(Q^Z))+$[4]+3889429448&4294967295,j=Q+(X<<20&4294967295|X>>>12),X=U+(Q^Z&(j^Q))+$[9]+568446438&4294967295,U=j+(X<<5&4294967295|X>>>27),X=Z+(j^Q&(U^j))+$[14]+3275163606&4294967295,Z=U+(X<<9&4294967295|X>>>23),X=Q+(U^j&(Z^U))+$[3]+4107603335&4294967295,Q=Z+(X<<14&4294967295|X>>>18),X=j+(Z^U&(Q^Z))+$[8]+1163531501&4294967295,j=Q+(X<<20&4294967295|X>>>12),X=U+(Q^Z&(j^Q))+$[13]+2850285829&4294967295,U=j+(X<<5&4294967295|X>>>27),X=Z+(j^Q&(U^j))+$[2]+4243563512&4294967295,Z=U+(X<<9&4294967295|X>>>23),X=Q+(U^j&(Z^U))+$[7]+1735328473&4294967295,Q=Z+(X<<14&4294967295|X>>>18),X=j+(Z^U&(Q^Z))+$[12]+2368359562&4294967295,j=Q+(X<<20&4294967295|X>>>12),X=U+(j^Q^Z)+$[5]+4294588738&4294967295,U=j+(X<<4&4294967295|X>>>28),X=Z+(U^j^Q)+$[8]+2272392833&4294967295,Z=U+(X<<11&4294967295|X>>>21),X=Q+(Z^U^j)+$[11]+1839030562&4294967295,Q=Z+(X<<16&4294967295|X>>>16),X=j+(Q^Z^U)+$[14]+4259657740&4294967295,j=Q+(X<<23&4294967295|X>>>9),X=U+(j^Q^Z)+$[1]+2763975236&4294967295,U=j+(X<<4&4294967295|X>>>28),X=Z+(U^j^Q)+$[4]+1272893353&4294967295,Z=U+(X<<11&4294967295|X>>>21),X=Q+(Z^U^j)+$[7]+4139469664&4294967295,Q=Z+(X<<16&4294967295|X>>>16),X=j+(Q^Z^U)+$[10]+3200236656&4294967295,j=Q+(X<<23&4294967295|X>>>9),X=U+(j^Q^Z)+$[13]+681279174&4294967295,U=j+(X<<4&4294967295|X>>>28),X=Z+(U^j^Q)+$[0]+3936430074&4294967295,Z=U+(X<<11&4294967295|X>>>21),X=Q+(Z^U^j)+$[3]+3572445317&4294967295,Q=Z+(X<<16&4294967295|X>>>16),X=j+(Q^Z^U)+$[6]+76029189&4294967295,j=Q+(X<<23&4294967295|X>>>9),X=U+(j^Q^Z)+$[9]+3654602809&4294967295,U=j+(X<<4&4294967295|X>>>28),X=Z+(U^j^Q)+$[12]+3873151461&4294967295,Z=U+(X<<11&4294967295|X>>>21),X=Q+(Z^U^j)+$[15]+530742520&4294967295,Q=Z+(X<<16&4294967295|X>>>16),X=j+(Q^Z^U)+$[2]+3299628645&4294967295,j=Q+(X<<23&4294967295|X>>>9),X=U+(Q^(j|~Z))+$[0]+4096336452&4294967295,U=j+(X<<6&4294967295|X>>>26),X=Z+(j^(U|~Q))+$[7]+1126891415&4294967295,Z=U+(X<<10&4294967295|X>>>22),X=Q+(U^(Z|~j))+$[14]+2878612391&4294967295,Q=Z+(X<<15&4294967295|X>>>17),X=j+(Z^(Q|~U))+$[5]+4237533241&4294967295,j=Q+(X<<21&4294967295|X>>>11),X=U+(Q^(j|~Z))+$[12]+1700485571&4294967295,U=j+(X<<6&4294967295|X>>>26),X=Z+(j^(U|~Q))+$[3]+2399980690&4294967295,Z=U+(X<<10&4294967295|X>>>22),X=Q+(U^(Z|~j))+$[10]+4293915773&4294967295,Q=Z+(X<<15&4294967295|X>>>17),X=j+(Z^(Q|~U))+$[1]+2240044497&4294967295,j=Q+(X<<21&4294967295|X>>>11),X=U+(Q^(j|~Z))+$[8]+1873313359&4294967295,U=j+(X<<6&4294967295|X>>>26),X=Z+(j^(U|~Q))+$[15]+4264355552&4294967295,Z=U+(X<<10&4294967295|X>>>22),X=Q+(U^(Z|~j))+$[6]+2734768916&4294967295,Q=Z+(X<<15&4294967295|X>>>17),X=j+(Z^(Q|~U))+$[13]+1309151649&4294967295,j=Q+(X<<21&4294967295|X>>>11),X=U+(Q^(j|~Z))+$[4]+4149444226&4294967295,U=j+(X<<6&4294967295|X>>>26),X=Z+(j^(U|~Q))+$[11]+3174756917&4294967295,Z=U+(X<<10&4294967295|X>>>22),X=Q+(U^(Z|~j))+$[2]+718787259&4294967295,Q=Z+(X<<15&4294967295|X>>>17),X=j+(Z^(Q|~U))+$[9]+3951481745&4294967295,z.g[0]=z.g[0]+U&4294967295,z.g[1]=z.g[1]+(Q+(X<<21&4294967295|X>>>11))&4294967295,z.g[2]=z.g[2]+Q&4294967295,z.g[3]=z.g[3]+Z&4294967295}o.prototype.v=function(z,U){U===void 0&&(U=z.length);const j=U-this.blockSize,$=this.C;let Q=this.h,Z=0;for(;Z<U;){if(Q==0)for(;Z<=j;)u(this,z,Z),Z+=this.blockSize;if(typeof z=="string"){for(;Z<U;)if($[Q++]=z.charCodeAt(Z++),Q==this.blockSize){u(this,$),Q=0;break}}else for(;Z<U;)if($[Q++]=z[Z++],Q==this.blockSize){u(this,$),Q=0;break}}this.h=Q,this.o+=U},o.prototype.A=function(){var z=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);z[0]=128;for(var U=1;U<z.length-8;++U)z[U]=0;U=this.o*8;for(var j=z.length-8;j<z.length;++j)z[j]=U&255,U/=256;for(this.v(z),z=Array(16),U=0,j=0;j<4;++j)for(let $=0;$<32;$+=8)z[U++]=this.g[j]>>>$&255;return z};function d(z,U){var j=T;return Object.prototype.hasOwnProperty.call(j,z)?j[z]:j[z]=U(z)}function y(z,U){this.h=U;const j=[];let $=!0;for(let Q=z.length-1;Q>=0;Q--){const Z=z[Q]|0;$&&Z==U||(j[Q]=Z,$=!1)}this.g=j}var T={};function b(z){return-128<=z&&z<128?d(z,function(U){return new y([U|0],U<0?-1:0)}):new y([z|0],z<0?-1:0)}function _(z){if(isNaN(z)||!isFinite(z))return I;if(z<0)return q(_(-z));const U=[];let j=1;for(let $=0;z>=j;$++)U[$]=z/j|0,j*=4294967296;return new y(U,0)}function S(z,U){if(z.length==0)throw Error("number format error: empty string");if(U=U||10,U<2||36<U)throw Error("radix out of range: "+U);if(z.charAt(0)=="-")return q(S(z.substring(1),U));if(z.indexOf("-")>=0)throw Error('number format error: interior "-" character');const j=_(Math.pow(U,8));let $=I;for(let Z=0;Z<z.length;Z+=8){var Q=Math.min(8,z.length-Z);const X=parseInt(z.substring(Z,Z+Q),U);Q<8?(Q=_(Math.pow(U,Q)),$=$.j(Q).add(_(X))):($=$.j(j),$=$.add(_(X)))}return $}var I=b(0),M=b(1),V=b(16777216);r=y.prototype,r.m=function(){if(W(this))return-q(this).m();let z=0,U=1;for(let j=0;j<this.g.length;j++){const $=this.i(j);z+=($>=0?$:4294967296+$)*U,U*=4294967296}return z},r.toString=function(z){if(z=z||10,z<2||36<z)throw Error("radix out of range: "+z);if(K(this))return"0";if(W(this))return"-"+q(this).toString(z);const U=_(Math.pow(z,6));var j=this;let $="";for(;;){const Q=fe(j,U).g;j=le(j,Q.j(U));let Z=((j.g.length>0?j.g[0]:j.h)>>>0).toString(z);if(j=Q,K(j))return Z+$;for(;Z.length<6;)Z="0"+Z;$=Z+$}},r.i=function(z){return z<0?0:z<this.g.length?this.g[z]:this.h};function K(z){if(z.h!=0)return!1;for(let U=0;U<z.g.length;U++)if(z.g[U]!=0)return!1;return!0}function W(z){return z.h==-1}r.l=function(z){return z=le(this,z),W(z)?-1:K(z)?0:1};function q(z){const U=z.g.length,j=[];for(let $=0;$<U;$++)j[$]=~z.g[$];return new y(j,~z.h).add(M)}r.abs=function(){return W(this)?q(this):this},r.add=function(z){const U=Math.max(this.g.length,z.g.length),j=[];let $=0;for(let Q=0;Q<=U;Q++){let Z=$+(this.i(Q)&65535)+(z.i(Q)&65535),X=(Z>>>16)+(this.i(Q)>>>16)+(z.i(Q)>>>16);$=X>>>16,Z&=65535,X&=65535,j[Q]=X<<16|Z}return new y(j,j[j.length-1]&-2147483648?-1:0)};function le(z,U){return z.add(q(U))}r.j=function(z){if(K(this)||K(z))return I;if(W(this))return W(z)?q(this).j(q(z)):q(q(this).j(z));if(W(z))return q(this.j(q(z)));if(this.l(V)<0&&z.l(V)<0)return _(this.m()*z.m());const U=this.g.length+z.g.length,j=[];for(var $=0;$<2*U;$++)j[$]=0;for($=0;$<this.g.length;$++)for(let Q=0;Q<z.g.length;Q++){const Z=this.i($)>>>16,X=this.i($)&65535,We=z.i(Q)>>>16,de=z.i(Q)&65535;j[2*$+2*Q]+=X*de,ae(j,2*$+2*Q),j[2*$+2*Q+1]+=Z*de,ae(j,2*$+2*Q+1),j[2*$+2*Q+1]+=X*We,ae(j,2*$+2*Q+1),j[2*$+2*Q+2]+=Z*We,ae(j,2*$+2*Q+2)}for(z=0;z<U;z++)j[z]=j[2*z+1]<<16|j[2*z];for(z=U;z<2*U;z++)j[z]=0;return new y(j,0)};function ae(z,U){for(;(z[U]&65535)!=z[U];)z[U+1]+=z[U]>>>16,z[U]&=65535,U++}function ee(z,U){this.g=z,this.h=U}function fe(z,U){if(K(U))throw Error("division by zero");if(K(z))return new ee(I,I);if(W(z))return U=fe(q(z),U),new ee(q(U.g),q(U.h));if(W(U))return U=fe(z,q(U)),new ee(q(U.g),U.h);if(z.g.length>30){if(W(z)||W(U))throw Error("slowDivide_ only works with positive integers.");for(var j=M,$=U;$.l(z)<=0;)j=je(j),$=je($);var Q=De(j,1),Z=De($,1);for($=De($,2),j=De(j,2);!K($);){var X=Z.add($);X.l(z)<=0&&(Q=Q.add(j),Z=X),$=De($,1),j=De(j,1)}return U=le(z,Q.j(U)),new ee(Q,U)}for(Q=I;z.l(U)>=0;){for(j=Math.max(1,Math.floor(z.m()/U.m())),$=Math.ceil(Math.log(j)/Math.LN2),$=$<=48?1:Math.pow(2,$-48),Z=_(j),X=Z.j(U);W(X)||X.l(z)>0;)j-=$,Z=_(j),X=Z.j(U);K(Z)&&(Z=M),Q=Q.add(Z),z=le(z,X)}return new ee(Q,z)}r.B=function(z){return fe(this,z).h},r.and=function(z){const U=Math.max(this.g.length,z.g.length),j=[];for(let $=0;$<U;$++)j[$]=this.i($)&z.i($);return new y(j,this.h&z.h)},r.or=function(z){const U=Math.max(this.g.length,z.g.length),j=[];for(let $=0;$<U;$++)j[$]=this.i($)|z.i($);return new y(j,this.h|z.h)},r.xor=function(z){const U=Math.max(this.g.length,z.g.length),j=[];for(let $=0;$<U;$++)j[$]=this.i($)^z.i($);return new y(j,this.h^z.h)};function je(z){const U=z.g.length+1,j=[];for(let $=0;$<U;$++)j[$]=z.i($)<<1|z.i($-1)>>>31;return new y(j,z.h)}function De(z,U){const j=U>>5;U%=32;const $=z.g.length-j,Q=[];for(let Z=0;Z<$;Z++)Q[Z]=U>0?z.i(Z+j)>>>U|z.i(Z+j+1)<<32-U:z.i(Z+j);return new y(Q,z.h)}o.prototype.digest=o.prototype.A,o.prototype.reset=o.prototype.u,o.prototype.update=o.prototype.v,M_=o,y.prototype.add=y.prototype.add,y.prototype.multiply=y.prototype.j,y.prototype.modulo=y.prototype.B,y.prototype.compare=y.prototype.l,y.prototype.toNumber=y.prototype.m,y.prototype.toString=y.prototype.toString,y.prototype.getBits=y.prototype.i,y.fromNumber=_,y.fromString=S,go=y}).apply(typeof Ix<"u"?Ix:typeof self<"u"?self:typeof window<"u"?window:{});var Bh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var L_,Yc,P_,Wh,b1,B_,k_,U_;(function(){var r,e=Object.defineProperty;function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bh=="object"&&Bh];for(var N=0;N<p.length;++N){var D=p[N];if(D&&D.Math==Math)return D}throw Error("Cannot find global object")}var o=n(this);function u(p,N){if(N)e:{var D=o;p=p.split(".");for(var H=0;H<p.length-1;H++){var ce=p[H];if(!(ce in D))break e;D=D[ce]}p=p[p.length-1],H=D[p],N=N(H),N!=H&&N!=null&&e(D,p,{configurable:!0,writable:!0,value:N})}}u("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),u("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),u("Object.entries",function(p){return p||function(N){var D=[],H;for(H in N)Object.prototype.hasOwnProperty.call(N,H)&&D.push([H,N[H]]);return D}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},y=this||self;function T(p){var N=typeof p;return N=="object"&&p!=null||N=="function"}function b(p,N,D){return p.call.apply(p.bind,arguments)}function _(p,N,D){return _=b,_.apply(null,arguments)}function S(p,N){var D=Array.prototype.slice.call(arguments,1);return function(){var H=D.slice();return H.push.apply(H,arguments),p.apply(this,H)}}function I(p,N){function D(){}D.prototype=N.prototype,p.Z=N.prototype,p.prototype=new D,p.prototype.constructor=p,p.Ob=function(H,ce,_e){for(var Pe=Array(arguments.length-2),ht=2;ht<arguments.length;ht++)Pe[ht-2]=arguments[ht];return N.prototype[ce].apply(H,Pe)}}var M=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function V(p){const N=p.length;if(N>0){const D=Array(N);for(let H=0;H<N;H++)D[H]=p[H];return D}return[]}function K(p,N){for(let H=1;H<arguments.length;H++){const ce=arguments[H];var D=typeof ce;if(D=D!="object"?D:ce?Array.isArray(ce)?"array":D:"null",D=="array"||D=="object"&&typeof ce.length=="number"){D=p.length||0;const _e=ce.length||0;p.length=D+_e;for(let Pe=0;Pe<_e;Pe++)p[D+Pe]=ce[Pe]}else p.push(ce)}}class W{constructor(N,D){this.i=N,this.j=D,this.h=0,this.g=null}get(){let N;return this.h>0?(this.h--,N=this.g,this.g=N.next,N.next=null):N=this.i(),N}}function q(p){y.setTimeout(()=>{throw p},0)}function le(){var p=z;let N=null;return p.g&&(N=p.g,p.g=p.g.next,p.g||(p.h=null),N.next=null),N}class ae{constructor(){this.h=this.g=null}add(N,D){const H=ee.get();H.set(N,D),this.h?this.h.next=H:this.g=H,this.h=H}}var ee=new W(()=>new fe,p=>p.reset());class fe{constructor(){this.next=this.g=this.h=null}set(N,D){this.h=N,this.g=D,this.next=null}reset(){this.next=this.g=this.h=null}}let je,De=!1,z=new ae,U=()=>{const p=Promise.resolve(void 0);je=()=>{p.then(j)}};function j(){for(var p;p=le();){try{p.h.call(p.g)}catch(D){q(D)}var N=ee;N.j(p),N.h<100&&(N.h++,p.next=N.g,N.g=p)}De=!1}function $(){this.u=this.u,this.C=this.C}$.prototype.u=!1,$.prototype.dispose=function(){this.u||(this.u=!0,this.N())},$.prototype[Symbol.dispose]=function(){this.dispose()},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Q(p,N){this.type=p,this.g=this.target=N,this.defaultPrevented=!1}Q.prototype.h=function(){this.defaultPrevented=!0};var Z=(function(){if(!y.addEventListener||!Object.defineProperty)return!1;var p=!1,N=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const D=()=>{};y.addEventListener("test",D,N),y.removeEventListener("test",D,N)}catch{}return p})();function X(p){return/^[\s\xa0]*$/.test(p)}function We(p,N){Q.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,N)}I(We,Q),We.prototype.init=function(p,N){const D=this.type=p.type,H=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=N,N=p.relatedTarget,N||(D=="mouseover"?N=p.fromElement:D=="mouseout"&&(N=p.toElement)),this.relatedTarget=N,H?(this.clientX=H.clientX!==void 0?H.clientX:H.pageX,this.clientY=H.clientY!==void 0?H.clientY:H.pageY,this.screenX=H.screenX||0,this.screenY=H.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&We.Z.h.call(this)},We.prototype.h=function(){We.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var de="closure_listenable_"+(Math.random()*1e6|0),pe=0;function be(p,N,D,H,ce){this.listener=p,this.proxy=null,this.src=N,this.type=D,this.capture=!!H,this.ha=ce,this.key=++pe,this.da=this.fa=!1}function He(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function ot(p,N,D){for(const H in p)N.call(D,p[H],H,p)}function gt(p,N){for(const D in p)N.call(void 0,p[D],D,p)}function re(p){const N={};for(const D in p)N[D]=p[D];return N}const Ae="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Be(p,N){let D,H;for(let ce=1;ce<arguments.length;ce++){H=arguments[ce];for(D in H)p[D]=H[D];for(let _e=0;_e<Ae.length;_e++)D=Ae[_e],Object.prototype.hasOwnProperty.call(H,D)&&(p[D]=H[D])}}function ke(p){this.src=p,this.g={},this.h=0}ke.prototype.add=function(p,N,D,H,ce){const _e=p.toString();p=this.g[_e],p||(p=this.g[_e]=[],this.h++);const Pe=Me(p,N,H,ce);return Pe>-1?(N=p[Pe],D||(N.fa=!1)):(N=new be(N,this.src,_e,!!H,ce),N.fa=D,p.push(N)),N};function nt(p,N){const D=N.type;if(D in p.g){var H=p.g[D],ce=Array.prototype.indexOf.call(H,N,void 0),_e;(_e=ce>=0)&&Array.prototype.splice.call(H,ce,1),_e&&(He(N),p.g[D].length==0&&(delete p.g[D],p.h--))}}function Me(p,N,D,H){for(let ce=0;ce<p.length;++ce){const _e=p[ce];if(!_e.da&&_e.listener==N&&_e.capture==!!D&&_e.ha==H)return ce}return-1}var _t="closure_lm_"+(Math.random()*1e6|0),Ct={};function Jt(p,N,D,H,ce){if(Array.isArray(N)){for(let _e=0;_e<N.length;_e++)Jt(p,N[_e],D,H,ce);return null}return D=Ht(D),p&&p[de]?p.J(N,D,T(H)?!!H.capture:!1,ce):Dr(p,N,D,!1,H,ce)}function Dr(p,N,D,H,ce,_e){if(!N)throw Error("Invalid event type");const Pe=T(ce)?!!ce.capture:!!ce;let ht=Gr(p);if(ht||(p[_t]=ht=new ke(p)),D=ht.add(N,D,H,Pe,_e),D.proxy)return D;if(H=an(),D.proxy=H,H.src=p,H.listener=D,p.addEventListener)Z||(ce=Pe),ce===void 0&&(ce=!1),p.addEventListener(N.toString(),H,ce);else if(p.attachEvent)p.attachEvent(cr(N.toString()),H);else if(p.addListener&&p.removeListener)p.addListener(H);else throw Error("addEventListener and attachEvent are unavailable.");return D}function an(){function p(D){return N.call(p.src,p.listener,D)}const N=nr;return p}function si(p,N,D,H,ce){if(Array.isArray(N))for(var _e=0;_e<N.length;_e++)si(p,N[_e],D,H,ce);else H=T(H)?!!H.capture:!!H,D=Ht(D),p&&p[de]?(p=p.i,_e=String(N).toString(),_e in p.g&&(N=p.g[_e],D=Me(N,D,H,ce),D>-1&&(He(N[D]),Array.prototype.splice.call(N,D,1),N.length==0&&(delete p.g[_e],p.h--)))):p&&(p=Gr(p))&&(N=p.g[N.toString()],p=-1,N&&(p=Me(N,D,H,ce)),(D=p>-1?N[p]:null)&&wt(D))}function wt(p){if(typeof p!="number"&&p&&!p.da){var N=p.src;if(N&&N[de])nt(N.i,p);else{var D=p.type,H=p.proxy;N.removeEventListener?N.removeEventListener(D,H,p.capture):N.detachEvent?N.detachEvent(cr(D),H):N.addListener&&N.removeListener&&N.removeListener(H),(D=Gr(N))?(nt(D,p),D.h==0&&(D.src=null,N[_t]=null)):He(p)}}}function cr(p){return p in Ct?Ct[p]:Ct[p]="on"+p}function nr(p,N){if(p.da)p=!0;else{N=new We(N,this);const D=p.listener,H=p.ha||p.src;p.fa&&wt(p),p=D.call(H,N)}return p}function Gr(p){return p=p[_t],p instanceof ke?p:null}var En="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ht(p){return typeof p=="function"?p:(p[En]||(p[En]=function(N){return p.handleEvent(N)}),p[En])}function Qe(){$.call(this),this.i=new ke(this),this.M=this,this.G=null}I(Qe,$),Qe.prototype[de]=!0,Qe.prototype.removeEventListener=function(p,N,D,H){si(this,p,N,D,H)};function _n(p,N){var D,H=p.G;if(H)for(D=[];H;H=H.G)D.push(H);if(p=p.M,H=N.type||N,typeof N=="string")N=new Q(N,p);else if(N instanceof Q)N.target=N.target||p;else{var ce=N;N=new Q(H,p),Be(N,ce)}ce=!0;let _e,Pe;if(D)for(Pe=D.length-1;Pe>=0;Pe--)_e=N.g=D[Pe],ce=Fe(_e,H,!0,N)&&ce;if(_e=N.g=p,ce=Fe(_e,H,!0,N)&&ce,ce=Fe(_e,H,!1,N)&&ce,D)for(Pe=0;Pe<D.length;Pe++)_e=N.g=D[Pe],ce=Fe(_e,H,!1,N)&&ce}Qe.prototype.N=function(){if(Qe.Z.N.call(this),this.i){var p=this.i;for(const N in p.g){const D=p.g[N];for(let H=0;H<D.length;H++)He(D[H]);delete p.g[N],p.h--}}this.G=null},Qe.prototype.J=function(p,N,D,H){return this.i.add(String(p),N,!1,D,H)},Qe.prototype.K=function(p,N,D,H){return this.i.add(String(p),N,!0,D,H)};function Fe(p,N,D,H){if(N=p.i.g[String(N)],!N)return!0;N=N.concat();let ce=!0;for(let _e=0;_e<N.length;++_e){const Pe=N[_e];if(Pe&&!Pe.da&&Pe.capture==D){const ht=Pe.listener,jn=Pe.ha||Pe.src;Pe.fa&&nt(p.i,Pe),ce=ht.call(jn,H)!==!1&&ce}}return ce&&!H.defaultPrevented}function ws(p,N){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=_(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(N)>2147483647?-1:y.setTimeout(p,N||0)}function Ki(p){p.g=ws(()=>{p.g=null,p.i&&(p.i=!1,Ki(p))},p.l);const N=p.h;p.h=null,p.m.apply(null,N)}class dn extends ${constructor(N,D){super(),this.m=N,this.l=D,this.h=null,this.i=!1,this.g=null}j(N){this.h=arguments,this.g?this.i=!0:Ki(this)}N(){super.N(),this.g&&(y.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ai(p){$.call(this),this.h=p,this.g={}}I(ai,$);var ur=[];function Yr(p){ot(p.g,function(N,D){this.g.hasOwnProperty(D)&&wt(N)},p),p.g={}}ai.prototype.N=function(){ai.Z.N.call(this),Yr(this)},ai.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var rr=y.JSON.stringify,Kn=y.JSON.parse,Rs=class{stringify(p){return y.JSON.stringify(p,void 0)}parse(p){return y.JSON.parse(p,void 0)}};function Wi(){}function Ws(){}var Gt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Re(){Q.call(this,"d")}I(Re,Q);function Yt(){Q.call(this,"c")}I(Yt,Q);var rt={},nn=null;function oi(){return nn=nn||new Qe}rt.Ia="serverreachability";function As(p){Q.call(this,rt.Ia,p)}I(As,Q);function qr(p){const N=oi();_n(N,new As(N))}rt.STAT_EVENT="statevent";function At(p,N){Q.call(this,rt.STAT_EVENT,p),this.stat=N}I(At,Q);function rn(p){const N=oi();_n(N,new At(N,p))}rt.Ja="timingevent";function Xr(p,N){Q.call(this,rt.Ja,p),this.size=N}I(Xr,Q);function Kr(p,N){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return y.setTimeout(function(){p()},N)}function wn(){this.g=!0}wn.prototype.ua=function(){this.g=!1};function Os(p,N,D,H,ce,_e){p.info(function(){if(p.g)if(_e){var Pe="",ht=_e.split("&");for(let Xt=0;Xt<ht.length;Xt++){var jn=ht[Xt].split("=");if(jn.length>1){const Cn=jn[0];jn=jn[1];const hi=Cn.split("_");Pe=hi.length>=2&&hi[1]=="type"?Pe+(Cn+"="+jn+"&"):Pe+(Cn+"=redacted&")}}}else Pe=null;else Pe=_e;return"XMLHTTP REQ ("+H+") [attempt "+ce+"]: "+N+`
`+D+`
`+Pe})}function Pn(p,N,D,H,ce,_e,Pe){p.info(function(){return"XMLHTTP RESP ("+H+") [ attempt "+ce+"]: "+N+`
`+D+`
`+_e+" "+Pe})}function Er(p,N,D,H){p.info(function(){return"XMLHTTP TEXT ("+N+"): "+Wr(p,D)+(H?" "+H:"")})}function xi(p,N){p.info(function(){return"TIMEOUT: "+N})}wn.prototype.info=function(){};function Wr(p,N){if(!p.g)return N;if(!N)return null;try{const _e=JSON.parse(N);if(_e){for(p=0;p<_e.length;p++)if(Array.isArray(_e[p])){var D=_e[p];if(!(D.length<2)){var H=D[1];if(Array.isArray(H)&&!(H.length<1)){var ce=H[0];if(ce!="noop"&&ce!="stop"&&ce!="close")for(let Pe=1;Pe<H.length;Pe++)H[Pe]=""}}}}return rr(_e)}catch{return N}}var Qi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},li={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Zi;function Bn(){}I(Bn,Wi),Bn.prototype.g=function(){return new XMLHttpRequest},Zi=new Bn;function _r(p){return encodeURIComponent(String(p))}function wr(p){var N=1;p=p.split(":");const D=[];for(;N>0&&p.length;)D.push(p.shift()),N--;return p.length&&D.push(p.join(":")),D}function Ve(p,N,D,H){this.j=p,this.i=N,this.l=D,this.S=H||1,this.V=new ai(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new hr}function hr(){this.i=null,this.g="",this.h=!1}var An={},qt={};function Ar(p,N,D){p.M=1,p.A=Qr(vn(N)),p.u=D,p.R=!0,Mi(p,null)}function Mi(p,N){p.F=Date.now(),yi(p),p.B=vn(p.A);var D=p.B,H=p.S;Array.isArray(H)||(H=[String(H)]),on(D.i,"t",H),p.C=0,D=p.j.L,p.h=new hr,p.g=Ua(p.j,D?N:null,!p.u),p.P>0&&(p.O=new dn(_(p.Y,p,p.g),p.P)),N=p.V,D=p.g,H=p.ba;var ce="readystatechange";Array.isArray(ce)||(ce&&(ur[0]=ce.toString()),ce=ur);for(let _e=0;_e<ce.length;_e++){const Pe=Jt(D,ce[_e],H||N.handleEvent,!1,N.h||N);if(!Pe)break;N.g[Pe.key]=Pe}N=p.J?re(p.J):{},p.u?(p.v||(p.v="POST"),N["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,N)):(p.v="GET",p.g.ea(p.B,p.v,null,N)),qr(),Os(p.i,p.v,p.B,p.l,p.S,p.u)}Ve.prototype.ba=function(p){p=p.target;const N=this.O;N&&wi(p)==3?N.j():this.Y(p)},Ve.prototype.Y=function(p){try{if(p==this.g)e:{const ht=wi(this.g),jn=this.g.ya(),Xt=this.g.ca();if(!(ht<3)&&(ht!=3||this.g&&(this.h.h||this.g.la()||Gn(this.g)))){this.K||ht!=4||jn==7||(jn==8||Xt<=0?qr(3):qr(2)),gn(this);var N=this.g.ca();this.X=N;var D=Ds(this);if(this.o=N==200,Pn(this.i,this.v,this.B,this.l,this.S,ht,N),this.o){if(this.U&&!this.L){t:{if(this.g){var H,ce=this.g;if((H=ce.g?ce.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!X(H)){var _e=H;break t}}_e=null}if(p=_e)Er(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ir(this,p);else{this.o=!1,this.m=3,rn(12),Sr(this),Dt(this);break e}}if(this.R){p=!0;let Cn;for(;!this.K&&this.C<D.length;)if(Cn=Ma(this,D),Cn==qt){ht==4&&(this.m=4,rn(14),p=!1),Er(this.i,this.l,null,"[Incomplete Response]");break}else if(Cn==An){this.m=4,rn(15),Er(this.i,this.l,D,"[Invalid Chunk]"),p=!1;break}else Er(this.i,this.l,Cn,null),ir(this,Cn);if(Mr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ht!=4||D.length!=0||this.h.h||(this.m=1,rn(16),p=!1),this.o=this.o&&p,!p)Er(this.i,this.l,D,"[Invalid Chunked Response]"),Sr(this),Dt(this);else if(D.length>0&&!this.W){this.W=!0;var Pe=this.j;Pe.g==this&&Pe.aa&&!Pe.P&&(Pe.j.info("Great, no buffering proxy detected. Bytes received: "+D.length),ye(Pe),Pe.P=!0,rn(11))}}else Er(this.i,this.l,D,null),ir(this,D);ht==4&&Sr(this),this.o&&!this.K&&(ht==4?ta(this.j,this):(this.o=!1,yi(this)))}else ui(this.g),N==400&&D.indexOf("Unknown SID")>0?(this.m=3,rn(12)):(this.m=0,rn(13)),Sr(this),Dt(this)}}}catch{}finally{}};function Ds(p){if(!Mr(p))return p.g.la();const N=Gn(p.g);if(N==="")return"";let D="";const H=N.length,ce=wi(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return Sr(p),Dt(p),"";p.h.i=new y.TextDecoder}for(let _e=0;_e<H;_e++)p.h.h=!0,D+=p.h.i.decode(N[_e],{stream:!(ce&&_e==H-1)});return N.length=0,p.h.g+=D,p.C=0,p.h.g}function Mr(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function Ma(p,N){var D=p.C,H=N.indexOf(`
`,D);return H==-1?qt:(D=Number(N.substring(D,H)),isNaN(D)?An:(H+=1,H+D>N.length?qt:(N=N.slice(H,H+D),p.C=H+D,N)))}Ve.prototype.cancel=function(){this.K=!0,Sr(this)};function yi(p){p.T=Date.now()+p.H,br(p,p.H)}function br(p,N){if(p.D!=null)throw Error("WatchDog timer not null");p.D=Kr(_(p.aa,p),N)}function gn(p){p.D&&(y.clearTimeout(p.D),p.D=null)}Ve.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(xi(this.i,this.B),this.M!=2&&(qr(),rn(17)),Sr(this),this.m=2,Dt(this)):br(this,this.T-p)};function Dt(p){p.j.I==0||p.K||ta(p.j,p)}function Sr(p){gn(p);var N=p.O;N&&typeof N.dispose=="function"&&N.dispose(),p.O=null,Yr(p.V),p.g&&(N=p.g,p.g=null,N.abort(),N.dispose())}function ir(p,N){try{var D=p.j;if(D.I!=0&&(D.g==p||St(D.h,p))){if(!p.L&&St(D.h,p)&&D.I==3){try{var H=D.Ba.g.parse(N)}catch{H=null}if(Array.isArray(H)&&H.length==3){var ce=H;if(ce[0]==0){e:if(!D.v){if(D.g)if(D.g.F+3e3<p.F)Un(D),Ts(D);else break e;ea(D),rn(18)}}else D.xa=ce[1],0<D.xa-D.K&&ce[2]<37500&&D.F&&D.A==0&&!D.C&&(D.C=Kr(_(D.Va,D),6e3));Ue(D.h)<=1&&D.ta&&(D.ta=void 0)}else ts(D,11)}else if((p.L||D.g==p)&&Un(D),!X(N))for(ce=D.Ba.g.parse(N),N=0;N<ce.length;N++){let Xt=ce[N];const Cn=Xt[0];if(!(Cn<=D.K))if(D.K=Cn,Xt=Xt[1],D.I==2)if(Xt[0]=="c"){D.M=Xt[1],D.ba=Xt[2];const hi=Xt[3];hi!=null&&(D.ka=hi,D.j.info("VER="+D.ka));const is=Xt[4];is!=null&&(D.za=is,D.j.info("SVER="+D.za));const Nr=Xt[5];Nr!=null&&typeof Nr=="number"&&Nr>0&&(H=1.5*Nr,D.O=H,D.j.info("backChannelRequestTimeoutMs_="+H)),H=D;const fi=p.g;if(fi){const ra=fi.g?fi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ra){var _e=H.h;_e.g||ra.indexOf("spdy")==-1&&ra.indexOf("quic")==-1&&ra.indexOf("h2")==-1||(_e.j=_e.l,_e.g=new Set,_e.h&&(kn(_e,_e.h),_e.h=null))}if(H.G){const ss=fi.g?fi.g.getResponseHeader("X-HTTP-Session-Id"):null;ss&&(H.wa=ss,st(H.J,H.G,ss))}}D.I=3,D.l&&D.l.ra(),D.aa&&(D.T=Date.now()-p.F,D.j.info("Handshake RTT: "+D.T+"ms")),H=D;var Pe=p;if(H.na=ol(H,H.L?H.ba:null,H.W),Pe.L){ut(H.h,Pe);var ht=Pe,jn=H.O;jn&&(ht.H=jn),ht.D&&(gn(ht),yi(ht)),H.g=Pe}else ki(H);D.i.length>0&&es(D)}else Xt[0]!="stop"&&Xt[0]!="close"||ts(D,7);else D.I==3&&(Xt[0]=="stop"||Xt[0]=="close"?Xt[0]=="stop"?ts(D,7):Pa(D):Xt[0]!="noop"&&D.l&&D.l.qa(Xt),D.A=0)}}qr(4)}catch{}}var bn=class{constructor(p,N){this.g=p,this.map=N}};function F(p){this.l=p||10,y.PerformanceNavigationTiming?(p=y.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(y.chrome&&y.chrome.loadTimes&&y.chrome.loadTimes()&&y.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Je(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function Ue(p){return p.h?1:p.g?p.g.size:0}function St(p,N){return p.h?p.h==N:p.g?p.g.has(N):!1}function kn(p,N){p.g?p.g.add(N):p.h=N}function ut(p,N){p.h&&p.h==N?p.h=null:p.g&&p.g.has(N)&&p.g.delete(N)}F.prototype.cancel=function(){if(this.i=bt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function bt(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let N=p.i;for(const D of p.g.values())N=N.concat(D.G);return N}return V(p.i)}var vt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ji(p,N){if(p){p=p.split("&");for(let D=0;D<p.length;D++){const H=p[D].indexOf("=");let ce,_e=null;H>=0?(ce=p[D].substring(0,H),_e=p[D].substring(H+1)):ce=p[D],N(ce,_e?decodeURIComponent(_e.replace(/\+/g," ")):"")}}}function Nn(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let N;p instanceof Nn?(this.l=p.l,ct(this,p.j),this.o=p.o,this.g=p.g,Lr(this,p.u),this.h=p.h,Co(this,So(p.i)),this.m=p.m):p&&(N=String(p).match(vt))?(this.l=!1,ct(this,N[1]||"",!0),this.o=$i(N[2]||""),this.g=$i(N[3]||"",!0),Lr(this,N[4]),this.h=$i(N[5]||"",!0),Co(this,N[6]||"",!0),this.m=$i(N[7]||"")):(this.l=!1,this.i=new sr(null,this.l))}Nn.prototype.toString=function(){const p=[];var N=this.j;N&&p.push(Ei(N,zn,!0),":");var D=this.g;return(D||N=="file")&&(p.push("//"),(N=this.o)&&p.push(Ei(N,zn,!0),"@"),p.push(_r(D).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D=this.u,D!=null&&p.push(":",String(D))),(D=this.h)&&(this.g&&D.charAt(0)!="/"&&p.push("/"),p.push(Ei(D,D.charAt(0)=="/"?G:he,!0))),(D=this.i.toString())&&p.push("?",D),(D=this.m)&&p.push("#",Ei(D,Hn)),p.join("")},Nn.prototype.resolve=function(p){const N=vn(this);let D=!!p.j;D?ct(N,p.j):D=!!p.o,D?N.o=p.o:D=!!p.g,D?N.g=p.g:D=p.u!=null;var H=p.h;if(D)Lr(N,p.u);else if(D=!!p.h){if(H.charAt(0)!="/")if(this.g&&!this.h)H="/"+H;else{var ce=N.h.lastIndexOf("/");ce!=-1&&(H=N.h.slice(0,ce+1)+H)}if(ce=H,ce==".."||ce==".")H="";else if(ce.indexOf("./")!=-1||ce.indexOf("/.")!=-1){H=ce.lastIndexOf("/",0)==0,ce=ce.split("/");const _e=[];for(let Pe=0;Pe<ce.length;){const ht=ce[Pe++];ht=="."?H&&Pe==ce.length&&_e.push(""):ht==".."?((_e.length>1||_e.length==1&&_e[0]!="")&&_e.pop(),H&&Pe==ce.length&&_e.push("")):(_e.push(ht),H=!0)}H=_e.join("/")}else H=ce}return D?N.h=H:D=p.i.toString()!=="",D?Co(N,So(p.i)):D=!!p.m,D&&(N.m=p.m),N};function vn(p){return new Nn(p)}function ct(p,N,D){p.j=D?$i(N,!0):N,p.j&&(p.j=p.j.replace(/:$/,""))}function Lr(p,N){if(N){if(N=Number(N),isNaN(N)||N<0)throw Error("Bad port number "+N);p.u=N}else p.u=null}function Co(p,N,D){N instanceof sr?(p.i=N,Ls(p.i,p.l)):(D||(N=Ei(N,qe)),p.i=new sr(N,p.l))}function st(p,N,D){p.i.set(N,D)}function Qr(p){return st(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function $i(p,N){return p?N?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Ei(p,N,D){return typeof p=="string"?(p=encodeURI(p).replace(N,It),D&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function It(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var zn=/[#\/\?@]/g,he=/[#\?:]/g,G=/[#\?]/g,qe=/[#\?@]/g,Hn=/#/g;function sr(p,N){this.h=this.g=null,this.i=p||null,this.j=!!N}function Zr(p){p.g||(p.g=new Map,p.h=0,p.i&&Ji(p.i,function(N,D){p.add(decodeURIComponent(N.replace(/\+/g," ")),D)}))}r=sr.prototype,r.add=function(p,N){Zr(this),this.i=null,p=Ms(this,p);let D=this.g.get(p);return D||this.g.set(p,D=[]),D.push(N),this.h+=1,this};function La(p,N){Zr(p),N=Ms(p,N),p.g.has(N)&&(p.i=null,p.h-=p.g.get(N).length,p.g.delete(N))}function Ir(p,N){return Zr(p),N=Ms(p,N),p.g.has(N)}r.forEach=function(p,N){Zr(this),this.g.forEach(function(D,H){D.forEach(function(ce){p.call(N,ce,H,this)},this)},this)};function Ze(p,N){Zr(p);let D=[];if(typeof N=="string")Ir(p,N)&&(D=D.concat(p.g.get(Ms(p,N))));else for(p=Array.from(p.g.values()),N=0;N<p.length;N++)D=D.concat(p[N]);return D}r.set=function(p,N){return Zr(this),this.i=null,p=Ms(this,p),Ir(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[N]),this.h+=1,this},r.get=function(p,N){return p?(p=Ze(this,p),p.length>0?String(p[0]):N):N};function on(p,N,D){La(p,N),D.length>0&&(p.i=null,p.g.set(Ms(p,N),V(D)),p.h+=D.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],N=Array.from(this.g.keys());for(let H=0;H<N.length;H++){var D=N[H];const ce=_r(D);D=Ze(this,D);for(let _e=0;_e<D.length;_e++){let Pe=ce;D[_e]!==""&&(Pe+="="+_r(D[_e])),p.push(Pe)}}return this.i=p.join("&")};function So(p){const N=new sr;return N.i=p.i,p.g&&(N.g=new Map(p.g),N.h=p.h),N}function Ms(p,N){return N=String(N),p.j&&(N=N.toLowerCase()),N}function Ls(p,N){N&&!p.j&&(Zr(p),p.i=null,p.g.forEach(function(D,H){const ce=H.toLowerCase();H!=ce&&(La(this,H),on(this,ce,D))},p)),p.j=N}function Jr(p,N){const D=new wn;if(y.Image){const H=new Image;H.onload=S(_i,D,"TestLoadImage: loaded",!0,N,H),H.onerror=S(_i,D,"TestLoadImage: error",!1,N,H),H.onabort=S(_i,D,"TestLoadImage: abort",!1,N,H),H.ontimeout=S(_i,D,"TestLoadImage: timeout",!1,N,H),y.setTimeout(function(){H.ontimeout&&H.ontimeout()},1e4),H.src=p}else N(!1)}function Qs(p,N){const D=new wn,H=new AbortController,ce=setTimeout(()=>{H.abort(),_i(D,"TestPingServer: timeout",!1,N)},1e4);fetch(p,{signal:H.signal}).then(_e=>{clearTimeout(ce),_e.ok?_i(D,"TestPingServer: ok",!0,N):_i(D,"TestPingServer: server error",!1,N)}).catch(()=>{clearTimeout(ce),_i(D,"TestPingServer: error",!1,N)})}function _i(p,N,D,H,ce){try{ce&&(ce.onload=null,ce.onerror=null,ce.onabort=null,ce.ontimeout=null),H(D)}catch{}}function Tn(){this.g=new Rs}function $r(p){this.i=p.Sb||null,this.h=p.ab||!1}I($r,Wi),$r.prototype.g=function(){return new ei(this.i,this.h)};function ei(p,N){Qe.call(this),this.H=p,this.o=N,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}I(ei,Qe),r=ei.prototype,r.open=function(p,N){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=N,this.readyState=1,it(this)},r.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const N={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(N.body=p),(this.H||y).fetch(new Request(this.D,N)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ps(this)),this.readyState=0},r.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,it(this)),this.g&&(this.readyState=3,it(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof y.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;$e(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function $e(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}r.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var N=p.value?p.value:new Uint8Array(0);(N=this.B.decode(N,{stream:!p.done}))&&(this.response=this.responseText+=N)}p.done?Ps(this):it(this),this.readyState==3&&$e(this)}},r.Oa=function(p){this.g&&(this.response=this.responseText=p,Ps(this))},r.Na=function(p){this.g&&(this.response=p,Ps(this))},r.ga=function(){this.g&&Ps(this)};function Ps(p){p.readyState=4,p.l=null,p.j=null,p.B=null,it(p)}r.setRequestHeader=function(p,N){this.A.append(p,N)},r.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],N=this.h.entries();for(var D=N.next();!D.done;)D=D.value,p.push(D[0]+": "+D[1]),D=N.next();return p.join(`\r
`)};function it(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(ei.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function ln(p){let N="";return ot(p,function(D,H){N+=H,N+=":",N+=D,N+=`\r
`}),N}function Zs(p,N,D){e:{for(H in D){var H=!1;break e}H=!0}H||(D=ln(D),typeof p=="string"?D!=null&&_r(D):st(p,N,D))}function $t(p){Qe.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}I($t,Qe);var Li=/^https?$/i,Pi=["POST","PUT"];r=$t.prototype,r.Fa=function(p){this.H=p},r.ea=function(p,N,D,H){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);N=N?N.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Zi.g(),this.g.onreadystatechange=M(_(this.Ca,this));try{this.B=!0,this.g.open(N,String(p),!0),this.B=!1}catch(_e){Js(this,_e);return}if(p=D||"",D=new Map(this.headers),H)if(Object.getPrototypeOf(H)===Object.prototype)for(var ce in H)D.set(ce,H[ce]);else if(typeof H.keys=="function"&&typeof H.get=="function")for(const _e of H.keys())D.set(_e,H.get(_e));else throw Error("Unknown input type for opt_headers: "+String(H));H=Array.from(D.keys()).find(_e=>_e.toLowerCase()=="content-type"),ce=y.FormData&&p instanceof y.FormData,!(Array.prototype.indexOf.call(Pi,N,void 0)>=0)||H||ce||D.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[_e,Pe]of D)this.g.setRequestHeader(_e,Pe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(_e){Js(this,_e)}};function Js(p,N){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=N,p.o=5,bs(p),ci(p)}function bs(p){p.A||(p.A=!0,_n(p,"complete"),_n(p,"error"))}r.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,_n(this,"complete"),_n(this,"abort"),ci(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ci(this,!0)),$t.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Bi(this):this.Xa())},r.Xa=function(){Bi(this)};function Bi(p){if(p.h&&typeof d<"u"){if(p.v&&wi(p)==4)setTimeout(p.Ca.bind(p),0);else if(_n(p,"readystatechange"),wi(p)==4){p.h=!1;try{const _e=p.ca();e:switch(_e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var N=!0;break e;default:N=!1}var D;if(!(D=N)){var H;if(H=_e===0){let Pe=String(p.D).match(vt)[1]||null;!Pe&&y.self&&y.self.location&&(Pe=y.self.location.protocol.slice(0,-1)),H=!Li.test(Pe?Pe.toLowerCase():"")}D=H}if(D)_n(p,"complete"),_n(p,"success");else{p.o=6;try{var ce=wi(p)>2?p.g.statusText:""}catch{ce=""}p.l=ce+" ["+p.ca()+"]",bs(p)}}finally{ci(p)}}}}function ci(p,N){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const D=p.g;p.g=null,N||_n(p,"ready");try{D.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function wi(p){return p.g?p.g.readyState:0}r.ca=function(){try{return wi(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(p){if(this.g){var N=this.g.responseText;return p&&N.indexOf(p)==0&&(N=N.substring(p.length)),Kn(N)}};function Gn(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function ui(p){const N={};p=(p.g&&wi(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let H=0;H<p.length;H++){if(X(p[H]))continue;var D=wr(p[H]);const ce=D[0];if(D=D[1],typeof D!="string")continue;D=D.trim();const _e=N[ce]||[];N[ce]=_e,_e.push(D)}gt(N,function(H){return H.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Rn(p,N,D){return D&&D.internalChannelParams&&D.internalChannelParams[p]||N}function vs(p){this.za=0,this.i=[],this.j=new wn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Rn("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Rn("baseRetryDelayMs",5e3,p),this.Za=Rn("retryDelaySeedMs",1e4,p),this.Ta=Rn("forwardChannelMaxRetries",2,p),this.va=Rn("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new F(p&&p.concurrentRequestLimit),this.Ba=new Tn,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=vs.prototype,r.ka=8,r.I=1,r.connect=function(p,N,D,H){rn(0),this.W=p,this.H=N||{},D&&H!==void 0&&(this.H.OSID=D,this.H.OAID=H),this.F=this.X,this.J=ol(this,null,this.W),es(this)};function Pa(p){if(Ba(p),p.I==3){var N=p.V++,D=vn(p.J);if(st(D,"SID",p.M),st(D,"RID",N),st(D,"TYPE","terminate"),Bs(p,D),N=new Ve(p,p.j,N),N.M=2,N.A=Qr(vn(D)),D=!1,y.navigator&&y.navigator.sendBeacon)try{D=y.navigator.sendBeacon(N.A.toString(),"")}catch{}!D&&y.Image&&(new Image().src=N.A,D=!0),D||(N.g=Ua(N.j,null),N.g.ea(N.A)),N.F=Date.now(),yi(N)}al(p)}function Ts(p){p.g&&(ye(p),p.g.cancel(),p.g=null)}function Ba(p){Ts(p),p.v&&(y.clearTimeout(p.v),p.v=null),Un(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&y.clearTimeout(p.m),p.m=null)}function es(p){if(!Je(p.h)&&!p.m){p.m=!0;var N=p.Ea;je||U(),De||(je(),De=!0),z.add(N,p),p.D=0}}function ka(p,N){return Ue(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=N.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=Kr(_(p.Ea,p,N),Io(p,p.D)),p.D++,!0)}r.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const ce=new Ve(this,this.j,p);let _e=this.o;if(this.U&&(_e?(_e=re(_e),Be(_e,this.U)):_e=this.U),this.u!==null||this.R||(ce.J=_e,_e=null),this.S)e:{for(var N=0,D=0;D<this.i.length;D++){t:{var H=this.i[D];if("__data__"in H.map&&(H=H.map.__data__,typeof H=="string")){H=H.length;break t}H=void 0}if(H===void 0)break;if(N+=H,N>4096){N=D;break e}if(N===4096||D===this.i.length-1){N=D+1;break e}}N=1e3}else N=1e3;N=$s(this,ce,N),D=vn(this.J),st(D,"RID",p),st(D,"CVER",22),this.G&&st(D,"X-HTTP-Session-Id",this.G),Bs(this,D),_e&&(this.R?N="headers="+_r(ln(_e))+"&"+N:this.u&&Zs(D,this.u,_e)),kn(this.h,ce),this.Ra&&st(D,"TYPE","init"),this.S?(st(D,"$req",N),st(D,"SID","null"),ce.U=!0,Ar(ce,D,null)):Ar(ce,D,N),this.I=2}}else this.I==3&&(p?Wt(this,p):this.i.length==0||Je(this.h)||Wt(this))};function Wt(p,N){var D;N?D=N.l:D=p.V++;const H=vn(p.J);st(H,"SID",p.M),st(H,"RID",D),st(H,"AID",p.K),Bs(p,H),p.u&&p.o&&Zs(H,p.u,p.o),D=new Ve(p,p.j,D,p.D+1),p.u===null&&(D.J=p.o),N&&(p.i=N.G.concat(p.i)),N=$s(p,D,1e3),D.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),kn(p.h,D),Ar(D,H,N)}function Bs(p,N){p.H&&ot(p.H,function(D,H){st(N,H,D)}),p.l&&ot({},function(D,H){st(N,H,D)})}function $s(p,N,D){D=Math.min(p.i.length,D);const H=p.l?_(p.l.Ka,p.l,p):null;e:{var ce=p.i;let ht=-1;for(;;){const jn=["count="+D];ht==-1?D>0?(ht=ce[0].g,jn.push("ofs="+ht)):ht=0:jn.push("ofs="+ht);let Xt=!0;for(let Cn=0;Cn<D;Cn++){var _e=ce[Cn].g;const hi=ce[Cn].map;if(_e-=ht,_e<0)ht=Math.max(0,ce[Cn].g-100),Xt=!1;else try{_e="req"+_e+"_"||"";try{var Pe=hi instanceof Map?hi:Object.entries(hi);for(const[is,Nr]of Pe){let fi=Nr;T(Nr)&&(fi=rr(Nr)),jn.push(_e+is+"="+encodeURIComponent(fi))}}catch(is){throw jn.push(_e+"type="+encodeURIComponent("_badmap")),is}}catch{H&&H(hi)}}if(Xt){Pe=jn.join("&");break e}}Pe=void 0}return p=p.i.splice(0,D),N.G=p,Pe}function ki(p){if(!p.g&&!p.v){p.Y=1;var N=p.Da;je||U(),De||(je(),De=!0),z.add(N,p),p.A=0}}function ea(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=Kr(_(p.Da,p),Io(p,p.A)),p.A++,!0)}r.Da=function(){if(this.v=null,mt(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=Kr(_(this.Wa,this),p)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,rn(10),Ts(this),mt(this))};function ye(p){p.B!=null&&(y.clearTimeout(p.B),p.B=null)}function mt(p){p.g=new Ve(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var N=vn(p.na);st(N,"RID","rpc"),st(N,"SID",p.M),st(N,"AID",p.K),st(N,"CI",p.F?"0":"1"),!p.F&&p.ia&&st(N,"TO",p.ia),st(N,"TYPE","xmlhttp"),Bs(p,N),p.u&&p.o&&Zs(N,p.u,p.o),p.O&&(p.g.H=p.O);var D=p.g;p=p.ba,D.M=1,D.A=Qr(vn(N)),D.u=null,D.R=!0,Mi(D,p)}r.Va=function(){this.C!=null&&(this.C=null,Ts(this),ea(this),rn(19))};function Un(p){p.C!=null&&(y.clearTimeout(p.C),p.C=null)}function ta(p,N){var D=null;if(p.g==N){Un(p),ye(p),p.g=null;var H=2}else if(St(p.h,N))D=N.G,ut(p.h,N),H=1;else return;if(p.I!=0){if(N.o)if(H==1){D=N.u?N.u.length:0,N=Date.now()-N.F;var ce=p.D;H=oi(),_n(H,new Xr(H,D)),es(p)}else ki(p);else if(ce=N.m,ce==3||ce==0&&N.X>0||!(H==1&&ka(p,N)||H==2&&ea(p)))switch(D&&D.length>0&&(N=p.h,N.i=N.i.concat(D)),ce){case 1:ts(p,5);break;case 4:ts(p,10);break;case 3:ts(p,6);break;default:ts(p,2)}}}function Io(p,N){let D=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(D*=2),D*N}function ts(p,N){if(p.j.info("Error code "+N),N==2){var D=_(p.bb,p),H=p.Ua;const ce=!H;H=new Nn(H||"//www.google.com/images/cleardot.gif"),y.location&&y.location.protocol=="http"||ct(H,"https"),Qr(H),ce?Jr(H.toString(),D):Qs(H.toString(),D)}else rn(2);p.I=0,p.l&&p.l.pa(N),al(p),Ba(p)}r.bb=function(p){p?(this.j.info("Successfully pinged google.com"),rn(2)):(this.j.info("Failed to ping google.com"),rn(1))};function al(p){if(p.I=0,p.ja=[],p.l){const N=bt(p.h);(N.length!=0||p.i.length!=0)&&(K(p.ja,N),K(p.ja,p.i),p.h.i.length=0,V(p.i),p.i.length=0),p.l.oa()}}function ol(p,N,D){var H=D instanceof Nn?vn(D):new Nn(D);if(H.g!="")N&&(H.g=N+"."+H.g),Lr(H,H.u);else{var ce=y.location;H=ce.protocol,N=N?N+"."+ce.hostname:ce.hostname,ce=+ce.port;const _e=new Nn(null);H&&ct(_e,H),N&&(_e.g=N),ce&&Lr(_e,ce),D&&(_e.h=D),H=_e}return D=p.G,N=p.wa,D&&N&&st(H,D,N),st(H,"VER",p.ka),Bs(p,H),H}function Ua(p,N,D){if(N&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return N=p.Aa&&!p.ma?new $t(new $r({ab:D})):new $t(p.ma),N.Fa(p.L),N}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Vn(){}r=Vn.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function ns(){}ns.prototype.g=function(p,N){return new Mt(p,N)};function Mt(p,N){Qe.call(this),this.g=new vs(N),this.l=p,this.h=N&&N.messageUrlParams||null,p=N&&N.messageHeaders||null,N&&N.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=N&&N.initMessageHeaders||null,N&&N.messageContentType&&(p?p["X-WebChannel-Content-Type"]=N.messageContentType:p={"X-WebChannel-Content-Type":N.messageContentType}),N&&N.sa&&(p?p["X-WebChannel-Client-Profile"]=N.sa:p={"X-WebChannel-Client-Profile":N.sa}),this.g.U=p,(p=N&&N.Qb)&&!X(p)&&(this.g.u=p),this.A=N&&N.supportsCrossDomainXhr||!1,this.v=N&&N.sendRawJson||!1,(N=N&&N.httpSessionIdParam)&&!X(N)&&(this.g.G=N,p=this.h,p!==null&&N in p&&(p=this.h,N in p&&delete p[N])),this.j=new Lt(this)}I(Mt,Qe),Mt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Mt.prototype.close=function(){Pa(this.g)},Mt.prototype.o=function(p){var N=this.g;if(typeof p=="string"){var D={};D.__data__=p,p=D}else this.v&&(D={},D.__data__=rr(p),p=D);N.i.push(new bn(N.Ya++,p)),N.I==3&&es(N)},Mt.prototype.N=function(){this.g.l=null,delete this.j,Pa(this.g),delete this.g,Mt.Z.N.call(this)};function na(p){Re.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var N=p.__sm__;if(N){e:{for(const D in N){p=D;break e}p=void 0}(this.i=p)&&(p=this.i,N=N!==null&&p in N?N[p]:void 0),this.data=N}else this.data=p}I(na,Re);function rs(){Yt.call(this),this.status=1}I(rs,Yt);function Lt(p){this.g=p}I(Lt,Vn),Lt.prototype.ra=function(){_n(this.g,"a")},Lt.prototype.qa=function(p){_n(this.g,new na(p))},Lt.prototype.pa=function(p){_n(this.g,new rs)},Lt.prototype.oa=function(){_n(this.g,"b")},ns.prototype.createWebChannel=ns.prototype.g,Mt.prototype.send=Mt.prototype.o,Mt.prototype.open=Mt.prototype.m,Mt.prototype.close=Mt.prototype.close,U_=function(){return new ns},k_=function(){return oi()},B_=rt,b1={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Qi.NO_ERROR=0,Qi.TIMEOUT=8,Qi.HTTP_ERROR=6,Wh=Qi,li.COMPLETE="complete",P_=li,Ws.EventType=Gt,Gt.OPEN="a",Gt.CLOSE="b",Gt.ERROR="c",Gt.MESSAGE="d",Qe.prototype.listen=Qe.prototype.J,Yc=Ws,$t.prototype.listenOnce=$t.prototype.K,$t.prototype.getLastError=$t.prototype.Ha,$t.prototype.getLastErrorCode=$t.prototype.ya,$t.prototype.getStatus=$t.prototype.ca,$t.prototype.getResponseJson=$t.prototype.La,$t.prototype.getResponseText=$t.prototype.la,$t.prototype.send=$t.prototype.ea,$t.prototype.setWithCredentials=$t.prototype.Fa,L_=$t}).apply(typeof Bh<"u"?Bh:typeof self<"u"?self:typeof window<"u"?window:{});const Nx="@firebase/firestore",Rx="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ri.UNAUTHENTICATED=new ri(null),ri.GOOGLE_CREDENTIALS=new ri("google-credentials-uid"),ri.FIRST_PARTY=new ri("first-party-uid"),ri.MOCK_USER=new ri("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rc="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o=new S_("@firebase/firestore");function Bl(){return $o.logLevel}function Ge(r,...e){if($o.logLevel<=Zt.DEBUG){const n=e.map(ag);$o.debug(`Firestore (${rc}): ${r}`,...n)}}function Sa(r,...e){if($o.logLevel<=Zt.ERROR){const n=e.map(ag);$o.error(`Firestore (${rc}): ${r}`,...n)}}function Kl(r,...e){if($o.logLevel<=Zt.WARN){const n=e.map(ag);$o.warn(`Firestore (${rc}): ${r}`,...n)}}function ag(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(r,e,n){let o="Unexpected state";typeof e=="string"?o=e:n=e,V_(r,o,n)}function V_(r,e,n){let o=`FIRESTORE (${rc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{o+=" CONTEXT: "+JSON.stringify(n)}catch{o+=" CONTEXT: "+n}throw Sa(o),new Error(o)}function un(r,e,n,o){let u="Unexpected state";typeof n=="string"?u=n:o=n,r||V_(e,u,o)}function xt(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ze extends nc{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class f4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(ri.UNAUTHENTICATED)))}shutdown(){}}class d4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class g4{constructor(e){this.t=e,this.currentUser=ri.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){un(this.o===void 0,42304);let o=this.i;const u=b=>this.i!==o?(o=this.i,n(b)):Promise.resolve();let d=new va;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new va,e.enqueueRetryable((()=>u(this.currentUser)))};const y=()=>{const b=d;e.enqueueRetryable((async()=>{await b.promise,await u(this.currentUser)}))},T=b=>{Ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.o&&(this.auth.addAuthTokenListener(this.o),y())};this.t.onInit((b=>T(b))),setTimeout((()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?T(b):(Ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new va)}}),0),y()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((o=>this.i!==e?(Ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(un(typeof o.accessToken=="string",31837,{l:o}),new j_(o.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return un(e===null||typeof e=="string",2055,{h:e}),new ri(e)}}class m4{constructor(e,n,o){this.P=e,this.T=n,this.I=o,this.type="FirstParty",this.user=ri.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class p4{constructor(e,n,o){this.P=e,this.T=n,this.I=o}getToken(){return Promise.resolve(new m4(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(ri.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ox{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class x4{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ZS(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){un(this.o===void 0,3512);const o=d=>{d.error!=null&&Ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const y=d.token!==this.m;return this.m=d.token,Ge("FirebaseAppCheckTokenProvider",`Received ${y?"new":"existing"} token.`),y?n(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable((()=>o(d)))};const u=d=>{Ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((d=>u(d))),setTimeout((()=>{if(!this.appCheck){const d=this.V.getImmediate({optional:!0});d?u(d):Ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Ox(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(un(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Ox(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y4(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let o=0;o<r;o++)n[o]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let o="";for(;o.length<20;){const u=y4(40);for(let d=0;d<u.length;++d)o.length<20&&u[d]<n&&(o+=e.charAt(u[d]%62))}return o}}function Ft(r,e){return r<e?-1:r>e?1:0}function v1(r,e){const n=Math.min(r.length,e.length);for(let o=0;o<n;o++){const u=r.charAt(o),d=e.charAt(o);if(u!==d)return n1(u)===n1(d)?Ft(u,d):n1(u)?1:-1}return Ft(r.length,e.length)}const E4=55296,_4=57343;function n1(r){const e=r.charCodeAt(0);return e>=E4&&e<=_4}function Wl(r,e,n){return r.length===e.length&&r.every(((o,u)=>n(o,e[u])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx="__name__";class zs{constructor(e,n,o){n===void 0?n=0:n>e.length&&lt(637,{offset:n,range:e.length}),o===void 0?o=e.length-n:o>e.length-n&&lt(1746,{length:o,range:e.length-n}),this.segments=e,this.offset=n,this.len=o}get length(){return this.len}isEqual(e){return zs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof zs?e.forEach((o=>{n.push(o)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,o=this.limit();n<o;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const o=Math.min(e.length,n.length);for(let u=0;u<o;u++){const d=zs.compareSegments(e.get(u),n.get(u));if(d!==0)return d}return Ft(e.length,n.length)}static compareSegments(e,n){const o=zs.isNumericId(e),u=zs.isNumericId(n);return o&&!u?-1:!o&&u?1:o&&u?zs.extractNumericId(e).compare(zs.extractNumericId(n)):v1(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return go.fromString(e.substring(4,e.length-2))}}class In extends zs{construct(e,n,o){return new In(e,n,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const o of e){if(o.indexOf("//")>=0)throw new ze(Ce.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);n.push(...o.split("/").filter((u=>u.length>0)))}return new In(n)}static emptyPath(){return new In([])}}const w4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fr extends zs{construct(e,n,o){return new Fr(e,n,o)}static isValidIdentifier(e){return w4.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Dx}static keyField(){return new Fr([Dx])}static fromServerFormat(e){const n=[];let o="",u=0;const d=()=>{if(o.length===0)throw new ze(Ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(o),o=""};let y=!1;for(;u<e.length;){const T=e[u];if(T==="\\"){if(u+1===e.length)throw new ze(Ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const b=e[u+1];if(b!=="\\"&&b!=="."&&b!=="`")throw new ze(Ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=b,u+=2}else T==="`"?(y=!y,u++):T!=="."||y?(o+=T,u++):(d(),u++)}if(d(),y)throw new ze(Ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Fr(n)}static emptyPath(){return new Fr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.path=e}static fromPath(e){return new tt(In.fromString(e))}static fromName(e){return new tt(In.fromString(e).popFirst(5))}static empty(){return new tt(In.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&In.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return In.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new tt(new In(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F_(r,e,n){if(!n)throw new ze(Ce.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function A4(r,e,n,o){if(e===!0&&o===!0)throw new ze(Ce.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function Mx(r){if(!tt.isDocumentKey(r))throw new ze(Ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Lx(r){if(tt.isDocumentKey(r))throw new ze(Ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function z_(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Mf(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(o){return o.constructor?o.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":lt(12329,{type:typeof r})}function Oi(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ze(Ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Mf(r);throw new ze(Ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yr(r,e){const n={typeString:r};return e&&(n.value=e),n}function Eu(r,e){if(!z_(r))throw new ze(Ce.INVALID_ARGUMENT,"JSON must be an object");let n;for(const o in e)if(e[o]){const u=e[o].typeString,d="value"in e[o]?{value:e[o].value}:void 0;if(!(o in r)){n=`JSON missing required field: '${o}'`;break}const y=r[o];if(u&&typeof y!==u){n=`JSON field '${o}' must be a ${u}.`;break}if(d!==void 0&&y!==d.value){n=`Expected '${o}' field to equal '${d.value}'`;break}}if(n)throw new ze(Ce.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px=-62135596800,Bx=1e6;class Ln{static now(){return Ln.fromMillis(Date.now())}static fromDate(e){return Ln.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),o=Math.floor((e-1e3*n)*Bx);return new Ln(n,o)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ze(Ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ze(Ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Px)throw new ze(Ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ze(Ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Bx}_compareTo(e){return this.seconds===e.seconds?Ft(this.nanoseconds,e.nanoseconds):Ft(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ln._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Eu(e,Ln._jsonSchema))return new Ln(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Px;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ln._jsonSchemaVersion="firestore/timestamp/1.0",Ln._jsonSchema={type:yr("string",Ln._jsonSchemaVersion),seconds:yr("number"),nanoseconds:yr("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{static fromTimestamp(e){return new dt(e)}static min(){return new dt(new Ln(0,0))}static max(){return new dt(new Ln(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu=-1;function b4(r,e){const n=r.toTimestamp().seconds,o=r.toTimestamp().nanoseconds+1,u=dt.fromTimestamp(o===1e9?new Ln(n+1,0):new Ln(n,o));return new xo(u,tt.empty(),e)}function v4(r){return new xo(r.readTime,r.key,cu)}class xo{constructor(e,n,o){this.readTime=e,this.documentKey=n,this.largestBatchId=o}static min(){return new xo(dt.min(),tt.empty(),cu)}static max(){return new xo(dt.max(),tt.empty(),cu)}}function T4(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=tt.comparator(r.documentKey,e.documentKey),n!==0?n:Ft(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class S4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ic(r){if(r.code!==Ce.FAILED_PRECONDITION||r.message!==C4)throw r;Ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&lt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ie(((o,u)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(o,u)},this.catchCallback=d=>{this.wrapFailure(n,d).next(o,u)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Ie?n:Ie.resolve(n)}catch(n){return Ie.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Ie.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Ie.reject(n)}static resolve(e){return new Ie(((n,o)=>{n(e)}))}static reject(e){return new Ie(((n,o)=>{o(e)}))}static waitFor(e){return new Ie(((n,o)=>{let u=0,d=0,y=!1;e.forEach((T=>{++u,T.next((()=>{++d,y&&d===u&&n()}),(b=>o(b)))})),y=!0,d===u&&n()}))}static or(e){let n=Ie.resolve(!1);for(const o of e)n=n.next((u=>u?Ie.resolve(u):o()));return n}static forEach(e,n){const o=[];return e.forEach(((u,d)=>{o.push(n.call(this,u,d))})),this.waitFor(o)}static mapArray(e,n){return new Ie(((o,u)=>{const d=e.length,y=new Array(d);let T=0;for(let b=0;b<d;b++){const _=b;n(e[_]).next((S=>{y[_]=S,++T,T===d&&o(y)}),(S=>u(S)))}}))}static doWhile(e,n){return new Ie(((o,u)=>{const d=()=>{e()===!0?n().next((()=>{d()}),u):o()};d()}))}}function I4(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function sc(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=o=>this.ae(o),this.ue=o=>n.writeSequenceNumber(o))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Lf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg=-1;function Pf(r){return r==null}function hf(r){return r===0&&1/r==-1/0}function N4(r){return typeof r=="number"&&Number.isInteger(r)&&!hf(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_="";function R4(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=kx(e)),e=O4(r.get(n),e);return kx(e)}function O4(r,e){let n=e;const o=r.length;for(let u=0;u<o;u++){const d=r.charAt(u);switch(d){case"\0":n+="";break;case H_:n+="";break;default:n+=d}}return n}function kx(r){return r+H_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function vo(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function G_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e,n){this.comparator=e,this.root=n||jr.EMPTY}insert(e,n){return new Xn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,jr.BLACK,null,null))}remove(e){return new Xn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(o===0)return n.value;o<0?n=n.left:o>0&&(n=n.right)}return null}indexOf(e){let n=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(u===0)return n+o.left.size;u<0?o=o.left:(n+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,o)=>(e(n,o),!1)))}toString(){const e=[];return this.inorderTraversal(((n,o)=>(e.push(`${n}:${o}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kh(this.root,e,this.comparator,!1)}getReverseIterator(){return new kh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kh(this.root,e,this.comparator,!0)}}class kh{constructor(e,n,o,u){this.isReverse=u,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=n?o(e.key,n):1,n&&u&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(d===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jr{constructor(e,n,o,u,d){this.key=e,this.value=n,this.color=o??jr.RED,this.left=u??jr.EMPTY,this.right=d??jr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,o,u,d){return new jr(e??this.key,n??this.value,o??this.color,u??this.left,d??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let u=this;const d=o(e,u.key);return u=d<0?u.copy(null,null,null,u.left.insert(e,n,o),null):d===0?u.copy(null,n,null,null,null):u.copy(null,null,null,null,u.right.insert(e,n,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return jr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let o,u=this;if(n(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,n),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),n(e,u.key)===0){if(u.right.isEmpty())return jr.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,n))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw lt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw lt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw lt(27949);return e+(this.isRed()?0:1)}}jr.EMPTY=null,jr.RED=!0,jr.BLACK=!1;jr.EMPTY=new class{constructor(){this.size=0}get key(){throw lt(57766)}get value(){throw lt(16141)}get color(){throw lt(16727)}get left(){throw lt(29726)}get right(){throw lt(36894)}copy(e,n,o,u,d){return this}insert(e,n,o){return new jr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e){this.comparator=e,this.data=new Xn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,o)=>(e(n),!1)))}forEachInRange(e,n){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;n(u.key)}}forEachWhile(e,n){let o;for(o=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Vx(this.data.getIterator())}getIteratorFrom(e){return new Vx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((o=>{n=n.add(o)})),n}isEqual(e){if(!(e instanceof Cr)||this.size!==e.size)return!1;const n=this.data.getIterator(),o=e.data.getIterator();for(;n.hasNext();){const u=n.getNext().key,d=o.getNext().key;if(this.comparator(u,d)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Cr(this.comparator);return n.data=e,n}}class Vx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e){this.fields=e,e.sort(Fr.comparator)}static empty(){return new Xi([])}unionWith(e){let n=new Cr(Fr.comparator);for(const o of this.fields)n=n.add(o);for(const o of e)n=n.add(o);return new Xi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Wl(this.fields,e.fields,((n,o)=>n.isEqual(o)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(u){try{return atob(u)}catch(d){throw typeof DOMException<"u"&&d instanceof DOMException?new Y_("Invalid base64 string: "+d):d}})(e);return new zr(n)}static fromUint8Array(e){const n=(function(u){let d="";for(let y=0;y<u.length;++y)d+=String.fromCharCode(u[y]);return d})(e);return new zr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const o=new Uint8Array(n.length);for(let u=0;u<n.length;u++)o[u]=n.charCodeAt(u);return o})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ft(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zr.EMPTY_BYTE_STRING=new zr("");const D4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yo(r){if(un(!!r,39018),typeof r=="string"){let e=0;const n=D4.exec(r);if(un(!!n,46558,{timestamp:r}),n[1]){let u=n[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(r);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:lr(r.seconds),nanos:lr(r.nanos)}}function lr(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Eo(r){return typeof r=="string"?zr.fromBase64String(r):zr.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_="server_timestamp",X_="__type__",K_="__previous_value__",W_="__local_write_time__";function cg(r){var n,o;return((o=(((n=r==null?void 0:r.mapValue)==null?void 0:n.fields)||{})[X_])==null?void 0:o.stringValue)===q_}function Bf(r){const e=r.mapValue.fields[K_];return cg(e)?Bf(e):e}function uu(r){const e=yo(r.mapValue.fields[W_].timestampValue);return new Ln(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e,n,o,u,d,y,T,b,_,S){this.databaseId=e,this.appId=n,this.persistenceKey=o,this.host=u,this.ssl=d,this.forceLongPolling=y,this.autoDetectLongPolling=T,this.longPollingOptions=b,this.useFetchStreams=_,this.isUsingEmulator=S}}const ff="(default)";class hu{constructor(e,n){this.projectId=e,this.database=n||ff}static empty(){return new hu("","")}get isDefaultDatabase(){return this.database===ff}isEqual(e){return e instanceof hu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_="__type__",L4="__max__",Uh={mapValue:{}},Z_="__vector__",df="value";function _o(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?cg(r)?4:B4(r)?9007199254740991:P4(r)?10:11:lt(28295,{value:r})}function Xs(r,e){if(r===e)return!0;const n=_o(r);if(n!==_o(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return uu(r).isEqual(uu(e));case 3:return(function(u,d){if(typeof u.timestampValue=="string"&&typeof d.timestampValue=="string"&&u.timestampValue.length===d.timestampValue.length)return u.timestampValue===d.timestampValue;const y=yo(u.timestampValue),T=yo(d.timestampValue);return y.seconds===T.seconds&&y.nanos===T.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(u,d){return Eo(u.bytesValue).isEqual(Eo(d.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(u,d){return lr(u.geoPointValue.latitude)===lr(d.geoPointValue.latitude)&&lr(u.geoPointValue.longitude)===lr(d.geoPointValue.longitude)})(r,e);case 2:return(function(u,d){if("integerValue"in u&&"integerValue"in d)return lr(u.integerValue)===lr(d.integerValue);if("doubleValue"in u&&"doubleValue"in d){const y=lr(u.doubleValue),T=lr(d.doubleValue);return y===T?hf(y)===hf(T):isNaN(y)&&isNaN(T)}return!1})(r,e);case 9:return Wl(r.arrayValue.values||[],e.arrayValue.values||[],Xs);case 10:case 11:return(function(u,d){const y=u.mapValue.fields||{},T=d.mapValue.fields||{};if(Ux(y)!==Ux(T))return!1;for(const b in y)if(y.hasOwnProperty(b)&&(T[b]===void 0||!Xs(y[b],T[b])))return!1;return!0})(r,e);default:return lt(52216,{left:r})}}function fu(r,e){return(r.values||[]).find((n=>Xs(n,e)))!==void 0}function Ql(r,e){if(r===e)return 0;const n=_o(r),o=_o(e);if(n!==o)return Ft(n,o);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ft(r.booleanValue,e.booleanValue);case 2:return(function(d,y){const T=lr(d.integerValue||d.doubleValue),b=lr(y.integerValue||y.doubleValue);return T<b?-1:T>b?1:T===b?0:isNaN(T)?isNaN(b)?0:-1:1})(r,e);case 3:return jx(r.timestampValue,e.timestampValue);case 4:return jx(uu(r),uu(e));case 5:return v1(r.stringValue,e.stringValue);case 6:return(function(d,y){const T=Eo(d),b=Eo(y);return T.compareTo(b)})(r.bytesValue,e.bytesValue);case 7:return(function(d,y){const T=d.split("/"),b=y.split("/");for(let _=0;_<T.length&&_<b.length;_++){const S=Ft(T[_],b[_]);if(S!==0)return S}return Ft(T.length,b.length)})(r.referenceValue,e.referenceValue);case 8:return(function(d,y){const T=Ft(lr(d.latitude),lr(y.latitude));return T!==0?T:Ft(lr(d.longitude),lr(y.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Fx(r.arrayValue,e.arrayValue);case 10:return(function(d,y){var M,V,K,W;const T=d.fields||{},b=y.fields||{},_=(M=T[df])==null?void 0:M.arrayValue,S=(V=b[df])==null?void 0:V.arrayValue,I=Ft(((K=_==null?void 0:_.values)==null?void 0:K.length)||0,((W=S==null?void 0:S.values)==null?void 0:W.length)||0);return I!==0?I:Fx(_,S)})(r.mapValue,e.mapValue);case 11:return(function(d,y){if(d===Uh.mapValue&&y===Uh.mapValue)return 0;if(d===Uh.mapValue)return 1;if(y===Uh.mapValue)return-1;const T=d.fields||{},b=Object.keys(T),_=y.fields||{},S=Object.keys(_);b.sort(),S.sort();for(let I=0;I<b.length&&I<S.length;++I){const M=v1(b[I],S[I]);if(M!==0)return M;const V=Ql(T[b[I]],_[S[I]]);if(V!==0)return V}return Ft(b.length,S.length)})(r.mapValue,e.mapValue);default:throw lt(23264,{he:n})}}function jx(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ft(r,e);const n=yo(r),o=yo(e),u=Ft(n.seconds,o.seconds);return u!==0?u:Ft(n.nanos,o.nanos)}function Fx(r,e){const n=r.values||[],o=e.values||[];for(let u=0;u<n.length&&u<o.length;++u){const d=Ql(n[u],o[u]);if(d)return d}return Ft(n.length,o.length)}function Zl(r){return T1(r)}function T1(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const o=yo(n);return`time(${o.seconds},${o.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return Eo(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return tt.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let o="[",u=!0;for(const d of n.values||[])u?u=!1:o+=",",o+=T1(d);return o+"]"})(r.arrayValue):"mapValue"in r?(function(n){const o=Object.keys(n.fields||{}).sort();let u="{",d=!0;for(const y of o)d?d=!1:u+=",",u+=`${y}:${T1(n.fields[y])}`;return u+"}"})(r.mapValue):lt(61005,{value:r})}function Qh(r){switch(_o(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Bf(r);return e?16+Qh(e):16;case 5:return 2*r.stringValue.length;case 6:return Eo(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(o){return(o.values||[]).reduce(((u,d)=>u+Qh(d)),0)})(r.arrayValue);case 10:case 11:return(function(o){let u=0;return vo(o.fields,((d,y)=>{u+=d.length+Qh(y)})),u})(r.mapValue);default:throw lt(13486,{value:r})}}function zx(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function C1(r){return!!r&&"integerValue"in r}function ug(r){return!!r&&"arrayValue"in r}function Hx(r){return!!r&&"nullValue"in r}function Gx(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Zh(r){return!!r&&"mapValue"in r}function P4(r){var n,o;return((o=(((n=r==null?void 0:r.mapValue)==null?void 0:n.fields)||{})[Q_])==null?void 0:o.stringValue)===Z_}function $c(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return vo(r.mapValue.fields,((n,o)=>e.mapValue.fields[n]=$c(o))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=$c(r.arrayValue.values[n]);return e}return{...r}}function B4(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===L4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e){this.value=e}static empty(){return new Ri({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let o=0;o<e.length-1;++o)if(n=(n.mapValue.fields||{})[e.get(o)],!Zh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=$c(n)}setAll(e){let n=Fr.emptyPath(),o={},u=[];e.forEach(((y,T)=>{if(!n.isImmediateParentOf(T)){const b=this.getFieldsMap(n);this.applyChanges(b,o,u),o={},u=[],n=T.popLast()}y?o[T.lastSegment()]=$c(y):u.push(T.lastSegment())}));const d=this.getFieldsMap(n);this.applyChanges(d,o,u)}delete(e){const n=this.field(e.popLast());Zh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Xs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=n.mapValue.fields[e.get(o)];Zh(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},n.mapValue.fields[e.get(o)]=u),n=u}return n.mapValue.fields}applyChanges(e,n,o){vo(n,((u,d)=>e[u]=d));for(const u of o)delete e[u]}clone(){return new Ri($c(this.value))}}function J_(r){const e=[];return vo(r.fields,((n,o)=>{const u=new Fr([n]);if(Zh(o)){const d=J_(o.mapValue).fields;if(d.length===0)e.push(u);else for(const y of d)e.push(u.child(y))}else e.push(u)})),new Xi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e,n,o,u,d,y,T){this.key=e,this.documentType=n,this.version=o,this.readTime=u,this.createTime=d,this.data=y,this.documentState=T}static newInvalidDocument(e){return new ii(e,0,dt.min(),dt.min(),dt.min(),Ri.empty(),0)}static newFoundDocument(e,n,o,u){return new ii(e,1,n,dt.min(),o,u,0)}static newNoDocument(e,n){return new ii(e,2,n,dt.min(),dt.min(),Ri.empty(),0)}static newUnknownDocument(e,n){return new ii(e,3,n,dt.min(),dt.min(),Ri.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(dt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ri.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ri.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=dt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ii&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ii(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,n){this.position=e,this.inclusive=n}}function Yx(r,e,n){let o=0;for(let u=0;u<r.position.length;u++){const d=e[u],y=r.position[u];if(d.field.isKeyField()?o=tt.comparator(tt.fromName(y.referenceValue),n.key):o=Ql(y,n.data.field(d.field)),d.dir==="desc"&&(o*=-1),o!==0)break}return o}function qx(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!Xs(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e,n="asc"){this.field=e,this.dir=n}}function k4(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{}class xr extends $_{constructor(e,n,o){super(),this.field=e,this.op=n,this.value=o}static create(e,n,o){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,o):new V4(e,n,o):n==="array-contains"?new z4(e,o):n==="in"?new H4(e,o):n==="not-in"?new G4(e,o):n==="array-contains-any"?new Y4(e,o):new xr(e,n,o)}static createKeyFieldInFilter(e,n,o){return n==="in"?new j4(e,o):new F4(e,o)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ql(n,this.value)):n!==null&&_o(this.value)===_o(n)&&this.matchesComparison(Ql(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return lt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ns extends $_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ns(e,n)}matches(e){return ew(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ew(r){return r.op==="and"}function tw(r){return U4(r)&&ew(r)}function U4(r){for(const e of r.filters)if(e instanceof Ns)return!1;return!0}function S1(r){if(r instanceof xr)return r.field.canonicalString()+r.op.toString()+Zl(r.value);if(tw(r))return r.filters.map((e=>S1(e))).join(",");{const e=r.filters.map((n=>S1(n))).join(",");return`${r.op}(${e})`}}function nw(r,e){return r instanceof xr?(function(o,u){return u instanceof xr&&o.op===u.op&&o.field.isEqual(u.field)&&Xs(o.value,u.value)})(r,e):r instanceof Ns?(function(o,u){return u instanceof Ns&&o.op===u.op&&o.filters.length===u.filters.length?o.filters.reduce(((d,y,T)=>d&&nw(y,u.filters[T])),!0):!1})(r,e):void lt(19439)}function rw(r){return r instanceof xr?(function(n){return`${n.field.canonicalString()} ${n.op} ${Zl(n.value)}`})(r):r instanceof Ns?(function(n){return n.op.toString()+" {"+n.getFilters().map(rw).join(" ,")+"}"})(r):"Filter"}class V4 extends xr{constructor(e,n,o){super(e,n,o),this.key=tt.fromName(o.referenceValue)}matches(e){const n=tt.comparator(e.key,this.key);return this.matchesComparison(n)}}class j4 extends xr{constructor(e,n){super(e,"in",n),this.keys=iw("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class F4 extends xr{constructor(e,n){super(e,"not-in",n),this.keys=iw("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function iw(r,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((o=>tt.fromName(o.referenceValue)))}class z4 extends xr{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ug(n)&&fu(n.arrayValue,this.value)}}class H4 extends xr{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&fu(this.value.arrayValue,n)}}class G4 extends xr{constructor(e,n){super(e,"not-in",n)}matches(e){if(fu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!fu(this.value.arrayValue,n)}}class Y4 extends xr{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ug(n)||!n.arrayValue.values)&&n.arrayValue.values.some((o=>fu(this.value.arrayValue,o)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(e,n=null,o=[],u=[],d=null,y=null,T=null){this.path=e,this.collectionGroup=n,this.orderBy=o,this.filters=u,this.limit=d,this.startAt=y,this.endAt=T,this.Te=null}}function Xx(r,e=null,n=[],o=[],u=null,d=null,y=null){return new q4(r,e,n,o,u,d,y)}function hg(r){const e=xt(r);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((o=>S1(o))).join(","),n+="|ob:",n+=e.orderBy.map((o=>(function(d){return d.field.canonicalString()+d.dir})(o))).join(","),Pf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((o=>Zl(o))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((o=>Zl(o))).join(",")),e.Te=n}return e.Te}function fg(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!k4(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!nw(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!qx(r.startAt,e.startAt)&&qx(r.endAt,e.endAt)}function I1(r){return tt.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,n=null,o=[],u=[],d=null,y="F",T=null,b=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=o,this.filters=u,this.limit=d,this.limitType=y,this.startAt=T,this.endAt=b,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function X4(r,e,n,o,u,d,y,T){return new _u(r,e,n,o,u,d,y,T)}function kf(r){return new _u(r)}function Kx(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function sw(r){return r.collectionGroup!==null}function eu(r){const e=xt(r);if(e.Ie===null){e.Ie=[];const n=new Set;for(const d of e.explicitOrderBy)e.Ie.push(d),n.add(d.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(y){let T=new Cr(Fr.comparator);return y.filters.forEach((b=>{b.getFlattenedFilters().forEach((_=>{_.isInequality()&&(T=T.add(_.field))}))})),T})(e).forEach((d=>{n.has(d.canonicalString())||d.isKeyField()||e.Ie.push(new mf(d,o))})),n.has(Fr.keyField().canonicalString())||e.Ie.push(new mf(Fr.keyField(),o))}return e.Ie}function Hs(r){const e=xt(r);return e.Ee||(e.Ee=K4(e,eu(r))),e.Ee}function K4(r,e){if(r.limitType==="F")return Xx(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((u=>{const d=u.dir==="desc"?"asc":"desc";return new mf(u.field,d)}));const n=r.endAt?new gf(r.endAt.position,r.endAt.inclusive):null,o=r.startAt?new gf(r.startAt.position,r.startAt.inclusive):null;return Xx(r.path,r.collectionGroup,e,r.filters,r.limit,n,o)}}function N1(r,e){const n=r.filters.concat([e]);return new _u(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function R1(r,e,n){return new _u(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function Uf(r,e){return fg(Hs(r),Hs(e))&&r.limitType===e.limitType}function aw(r){return`${hg(Hs(r))}|lt:${r.limitType}`}function kl(r){return`Query(target=${(function(n){let o=n.path.canonicalString();return n.collectionGroup!==null&&(o+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(o+=`, filters: [${n.filters.map((u=>rw(u))).join(", ")}]`),Pf(n.limit)||(o+=", limit: "+n.limit),n.orderBy.length>0&&(o+=`, orderBy: [${n.orderBy.map((u=>(function(y){return`${y.field.canonicalString()} (${y.dir})`})(u))).join(", ")}]`),n.startAt&&(o+=", startAt: ",o+=n.startAt.inclusive?"b:":"a:",o+=n.startAt.position.map((u=>Zl(u))).join(",")),n.endAt&&(o+=", endAt: ",o+=n.endAt.inclusive?"a:":"b:",o+=n.endAt.position.map((u=>Zl(u))).join(",")),`Target(${o})`})(Hs(r))}; limitType=${r.limitType})`}function Vf(r,e){return e.isFoundDocument()&&(function(o,u){const d=u.key.path;return o.collectionGroup!==null?u.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(d):tt.isDocumentKey(o.path)?o.path.isEqual(d):o.path.isImmediateParentOf(d)})(r,e)&&(function(o,u){for(const d of eu(o))if(!d.field.isKeyField()&&u.data.field(d.field)===null)return!1;return!0})(r,e)&&(function(o,u){for(const d of o.filters)if(!d.matches(u))return!1;return!0})(r,e)&&(function(o,u){return!(o.startAt&&!(function(y,T,b){const _=Yx(y,T,b);return y.inclusive?_<=0:_<0})(o.startAt,eu(o),u)||o.endAt&&!(function(y,T,b){const _=Yx(y,T,b);return y.inclusive?_>=0:_>0})(o.endAt,eu(o),u))})(r,e)}function W4(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function ow(r){return(e,n)=>{let o=!1;for(const u of eu(r)){const d=Q4(u,e,n);if(d!==0)return d;o=o||u.field.isKeyField()}return 0}}function Q4(r,e,n){const o=r.field.isKeyField()?tt.comparator(e.key,n.key):(function(d,y,T){const b=y.data.field(d),_=T.data.field(d);return b!==null&&_!==null?Ql(b,_):lt(42886)})(r.field,e,n);switch(r.dir){case"asc":return o;case"desc":return-1*o;default:return lt(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),o=this.inner[n];if(o!==void 0){for(const[u,d]of o)if(this.equalsFn(u,e))return d}}has(e){return this.get(e)!==void 0}set(e,n){const o=this.mapKeyFn(e),u=this.inner[o];if(u===void 0)return this.inner[o]=[[e,n]],void this.innerSize++;for(let d=0;d<u.length;d++)if(this.equalsFn(u[d][0],e))return void(u[d]=[e,n]);u.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),o=this.inner[n];if(o===void 0)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return o.length===1?delete this.inner[n]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){vo(this.inner,((n,o)=>{for(const[u,d]of o)e(u,d)}))}isEmpty(){return G_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z4=new Xn(tt.comparator);function Ia(){return Z4}const lw=new Xn(tt.comparator);function qc(...r){let e=lw;for(const n of r)e=e.insert(n.key,n);return e}function cw(r){let e=lw;return r.forEach(((n,o)=>e=e.insert(n,o.overlayedDocument))),e}function Qo(){return tu()}function uw(){return tu()}function tu(){return new rl((r=>r.toString()),((r,e)=>r.isEqual(e)))}const J4=new Xn(tt.comparator),$4=new Cr(tt.comparator);function zt(...r){let e=$4;for(const n of r)e=e.add(n);return e}const eI=new Cr(Ft);function tI(){return eI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dg(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hf(e)?"-0":e}}function hw(r){return{integerValue:""+r}}function nI(r,e){return N4(e)?hw(e):dg(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(){this._=void 0}}function rI(r,e,n){return r instanceof pf?(function(u,d){const y={fields:{[X_]:{stringValue:q_},[W_]:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return d&&cg(d)&&(d=Bf(d)),d&&(y.fields[K_]=d),{mapValue:y}})(n,e):r instanceof du?dw(r,e):r instanceof gu?gw(r,e):(function(u,d){const y=fw(u,d),T=Wx(y)+Wx(u.Ae);return C1(y)&&C1(u.Ae)?hw(T):dg(u.serializer,T)})(r,e)}function iI(r,e,n){return r instanceof du?dw(r,e):r instanceof gu?gw(r,e):n}function fw(r,e){return r instanceof xf?(function(o){return C1(o)||(function(d){return!!d&&"doubleValue"in d})(o)})(e)?e:{integerValue:0}:null}class pf extends jf{}class du extends jf{constructor(e){super(),this.elements=e}}function dw(r,e){const n=mw(e);for(const o of r.elements)n.some((u=>Xs(u,o)))||n.push(o);return{arrayValue:{values:n}}}class gu extends jf{constructor(e){super(),this.elements=e}}function gw(r,e){let n=mw(e);for(const o of r.elements)n=n.filter((u=>!Xs(u,o)));return{arrayValue:{values:n}}}class xf extends jf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Wx(r){return lr(r.integerValue||r.doubleValue)}function mw(r){return ug(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function sI(r,e){return r.field.isEqual(e.field)&&(function(o,u){return o instanceof du&&u instanceof du||o instanceof gu&&u instanceof gu?Wl(o.elements,u.elements,Xs):o instanceof xf&&u instanceof xf?Xs(o.Ae,u.Ae):o instanceof pf&&u instanceof pf})(r.transform,e.transform)}class aI{constructor(e,n){this.version=e,this.transformResults=n}}class Di{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Di}static exists(e){return new Di(void 0,e)}static updateTime(e){return new Di(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Ff{}function pw(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new zf(r.key,Di.none()):new wu(r.key,r.data,Di.none());{const n=r.data,o=Ri.empty();let u=new Cr(Fr.comparator);for(let d of e.fields)if(!u.has(d)){let y=n.field(d);y===null&&d.length>1&&(d=d.popLast(),y=n.field(d)),y===null?o.delete(d):o.set(d,y),u=u.add(d)}return new To(r.key,o,new Xi(u.toArray()),Di.none())}}function oI(r,e,n){r instanceof wu?(function(u,d,y){const T=u.value.clone(),b=Zx(u.fieldTransforms,d,y.transformResults);T.setAll(b),d.convertToFoundDocument(y.version,T).setHasCommittedMutations()})(r,e,n):r instanceof To?(function(u,d,y){if(!Jh(u.precondition,d))return void d.convertToUnknownDocument(y.version);const T=Zx(u.fieldTransforms,d,y.transformResults),b=d.data;b.setAll(xw(u)),b.setAll(T),d.convertToFoundDocument(y.version,b).setHasCommittedMutations()})(r,e,n):(function(u,d,y){d.convertToNoDocument(y.version).setHasCommittedMutations()})(0,e,n)}function nu(r,e,n,o){return r instanceof wu?(function(d,y,T,b){if(!Jh(d.precondition,y))return T;const _=d.value.clone(),S=Jx(d.fieldTransforms,b,y);return _.setAll(S),y.convertToFoundDocument(y.version,_).setHasLocalMutations(),null})(r,e,n,o):r instanceof To?(function(d,y,T,b){if(!Jh(d.precondition,y))return T;const _=Jx(d.fieldTransforms,b,y),S=y.data;return S.setAll(xw(d)),S.setAll(_),y.convertToFoundDocument(y.version,S).setHasLocalMutations(),T===null?null:T.unionWith(d.fieldMask.fields).unionWith(d.fieldTransforms.map((I=>I.field)))})(r,e,n,o):(function(d,y,T){return Jh(d.precondition,y)?(y.convertToNoDocument(y.version).setHasLocalMutations(),null):T})(r,e,n)}function lI(r,e){let n=null;for(const o of r.fieldTransforms){const u=e.data.field(o.field),d=fw(o.transform,u||null);d!=null&&(n===null&&(n=Ri.empty()),n.set(o.field,d))}return n||null}function Qx(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(o,u){return o===void 0&&u===void 0||!(!o||!u)&&Wl(o,u,((d,y)=>sI(d,y)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class wu extends Ff{constructor(e,n,o,u=[]){super(),this.key=e,this.value=n,this.precondition=o,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class To extends Ff{constructor(e,n,o,u,d=[]){super(),this.key=e,this.data=n,this.fieldMask=o,this.precondition=u,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function xw(r){const e=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const o=r.data.field(n);e.set(n,o)}})),e}function Zx(r,e,n){const o=new Map;un(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let u=0;u<n.length;u++){const d=r[u],y=d.transform,T=e.data.field(d.field);o.set(d.field,iI(y,T,n[u]))}return o}function Jx(r,e,n){const o=new Map;for(const u of r){const d=u.transform,y=n.data.field(u.field);o.set(u.field,rI(d,y,e))}return o}class zf extends Ff{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cI extends Ff{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e,n,o,u){this.batchId=e,this.localWriteTime=n,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,n){const o=n.mutationResults;for(let u=0;u<this.mutations.length;u++){const d=this.mutations[u];d.key.isEqual(e.key)&&oI(d,e,o[u])}}applyToLocalView(e,n){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(n=nu(o,e,n,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(n=nu(o,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const o=uw();return this.mutations.forEach((u=>{const d=e.get(u.key),y=d.overlayedDocument;let T=this.applyToLocalView(y,d.mutatedFields);T=n.has(u.key)?null:T;const b=pw(y,T);b!==null&&o.set(u.key,b),y.isValidDocument()||y.convertToNoDocument(dt.min())})),o}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),zt())}isEqual(e){return this.batchId===e.batchId&&Wl(this.mutations,e.mutations,((n,o)=>Qx(n,o)))&&Wl(this.baseMutations,e.baseMutations,((n,o)=>Qx(n,o)))}}class gg{constructor(e,n,o,u){this.batch=e,this.commitVersion=n,this.mutationResults=o,this.docVersions=u}static from(e,n,o){un(e.mutations.length===o.length,58842,{me:e.mutations.length,fe:o.length});let u=(function(){return J4})();const d=e.mutations;for(let y=0;y<d.length;y++)u=u.insert(d[y].key,o[y].version);return new gg(e,n,o,u)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pr,Qt;function dI(r){switch(r){case Ce.OK:return lt(64938);case Ce.CANCELLED:case Ce.UNKNOWN:case Ce.DEADLINE_EXCEEDED:case Ce.RESOURCE_EXHAUSTED:case Ce.INTERNAL:case Ce.UNAVAILABLE:case Ce.UNAUTHENTICATED:return!1;case Ce.INVALID_ARGUMENT:case Ce.NOT_FOUND:case Ce.ALREADY_EXISTS:case Ce.PERMISSION_DENIED:case Ce.FAILED_PRECONDITION:case Ce.ABORTED:case Ce.OUT_OF_RANGE:case Ce.UNIMPLEMENTED:case Ce.DATA_LOSS:return!0;default:return lt(15467,{code:r})}}function yw(r){if(r===void 0)return Sa("GRPC error has no .code"),Ce.UNKNOWN;switch(r){case pr.OK:return Ce.OK;case pr.CANCELLED:return Ce.CANCELLED;case pr.UNKNOWN:return Ce.UNKNOWN;case pr.DEADLINE_EXCEEDED:return Ce.DEADLINE_EXCEEDED;case pr.RESOURCE_EXHAUSTED:return Ce.RESOURCE_EXHAUSTED;case pr.INTERNAL:return Ce.INTERNAL;case pr.UNAVAILABLE:return Ce.UNAVAILABLE;case pr.UNAUTHENTICATED:return Ce.UNAUTHENTICATED;case pr.INVALID_ARGUMENT:return Ce.INVALID_ARGUMENT;case pr.NOT_FOUND:return Ce.NOT_FOUND;case pr.ALREADY_EXISTS:return Ce.ALREADY_EXISTS;case pr.PERMISSION_DENIED:return Ce.PERMISSION_DENIED;case pr.FAILED_PRECONDITION:return Ce.FAILED_PRECONDITION;case pr.ABORTED:return Ce.ABORTED;case pr.OUT_OF_RANGE:return Ce.OUT_OF_RANGE;case pr.UNIMPLEMENTED:return Ce.UNIMPLEMENTED;case pr.DATA_LOSS:return Ce.DATA_LOSS;default:return lt(39323,{code:r})}}(Qt=pr||(pr={}))[Qt.OK=0]="OK",Qt[Qt.CANCELLED=1]="CANCELLED",Qt[Qt.UNKNOWN=2]="UNKNOWN",Qt[Qt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qt[Qt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qt[Qt.NOT_FOUND=5]="NOT_FOUND",Qt[Qt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qt[Qt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qt[Qt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qt[Qt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qt[Qt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qt[Qt.ABORTED=10]="ABORTED",Qt[Qt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qt[Qt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qt[Qt.INTERNAL=13]="INTERNAL",Qt[Qt.UNAVAILABLE=14]="UNAVAILABLE",Qt[Qt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI=new go([4294967295,4294967295],0);function $x(r){const e=gI().encode(r),n=new M_;return n.update(e),new Uint8Array(n.digest())}function ey(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),o=e.getUint32(4,!0),u=e.getUint32(8,!0),d=e.getUint32(12,!0);return[new go([n,o],0),new go([u,d],0)]}class mg{constructor(e,n,o){if(this.bitmap=e,this.padding=n,this.hashCount=o,n<0||n>=8)throw new Xc(`Invalid padding: ${n}`);if(o<0)throw new Xc(`Invalid hash count: ${o}`);if(e.length>0&&this.hashCount===0)throw new Xc(`Invalid hash count: ${o}`);if(e.length===0&&n!==0)throw new Xc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=go.fromNumber(this.ge)}ye(e,n,o){let u=e.add(n.multiply(go.fromNumber(o)));return u.compare(mI)===1&&(u=new go([u.getBits(0),u.getBits(1)],0)),u.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=$x(e),[o,u]=ey(n);for(let d=0;d<this.hashCount;d++){const y=this.ye(o,u,d);if(!this.we(y))return!1}return!0}static create(e,n,o){const u=e%8==0?0:8-e%8,d=new Uint8Array(Math.ceil(e/8)),y=new mg(d,u,n);return o.forEach((T=>y.insert(T))),y}insert(e){if(this.ge===0)return;const n=$x(e),[o,u]=ey(n);for(let d=0;d<this.hashCount;d++){const y=this.ye(o,u,d);this.Se(y)}}Se(e){const n=Math.floor(e/8),o=e%8;this.bitmap[n]|=1<<o}}class Xc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,n,o,u,d){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,n,o){const u=new Map;return u.set(e,Au.createSynthesizedTargetChangeForCurrentChange(e,n,o)),new Hf(dt.min(),u,new Xn(Ft),Ia(),zt())}}class Au{constructor(e,n,o,u,d){this.resumeToken=e,this.current=n,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,n,o){return new Au(o,n,zt(),zt(),zt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,n,o,u){this.be=e,this.removedTargetIds=n,this.key=o,this.De=u}}class Ew{constructor(e,n){this.targetId=e,this.Ce=n}}class _w{constructor(e,n,o=zr.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=n,this.resumeToken=o,this.cause=u}}class ty{constructor(){this.ve=0,this.Fe=ny(),this.Me=zr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=zt(),n=zt(),o=zt();return this.Fe.forEach(((u,d)=>{switch(d){case 0:e=e.add(u);break;case 2:n=n.add(u);break;case 1:o=o.add(u);break;default:lt(38017,{changeType:d})}})),new Au(this.Me,this.xe,e,n,o)}qe(){this.Oe=!1,this.Fe=ny()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,un(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class pI{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ia(),this.Je=Vh(),this.He=Vh(),this.Ye=new Xn(Ft)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const o=this.nt(n);switch(e.state){case 0:this.rt(n)&&o.Le(e.resumeToken);break;case 1:o.Ke(),o.Ne||o.qe(),o.Le(e.resumeToken);break;case 2:o.Ke(),o.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(o.We(),o.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),o.Le(e.resumeToken));break;default:lt(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((o,u)=>{this.rt(u)&&n(u)}))}st(e){const n=e.targetId,o=e.Ce.count,u=this.ot(n);if(u){const d=u.target;if(I1(d))if(o===0){const y=new tt(d.path);this.et(n,y,ii.newNoDocument(y,dt.min()))}else un(o===1,20013,{expectedCount:o});else{const y=this._t(n);if(y!==o){const T=this.ut(e),b=T?this.ct(T,e,y):1;if(b!==0){this.it(n);const _=b===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,_)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:o="",padding:u=0},hashCount:d=0}=n;let y,T;try{y=Eo(o).toUint8Array()}catch(b){if(b instanceof Y_)return Kl("Decoding the base64 bloom filter in existence filter failed ("+b.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw b}try{T=new mg(y,u,d)}catch(b){return Kl(b instanceof Xc?"BloomFilter error: ":"Applying bloom filter failed: ",b),null}return T.ge===0?null:T}ct(e,n,o){return n.Ce.count===o-this.Pt(e,n.targetId)?0:2}Pt(e,n){const o=this.Ge.getRemoteKeysForTarget(n);let u=0;return o.forEach((d=>{const y=this.Ge.ht(),T=`projects/${y.projectId}/databases/${y.database}/documents/${d.path.canonicalString()}`;e.mightContain(T)||(this.et(n,d,null),u++)})),u}Tt(e){const n=new Map;this.ze.forEach(((d,y)=>{const T=this.ot(y);if(T){if(d.current&&I1(T.target)){const b=new tt(T.target.path);this.It(b).has(y)||this.Et(y,b)||this.et(y,b,ii.newNoDocument(b,e))}d.Be&&(n.set(y,d.ke()),d.qe())}}));let o=zt();this.He.forEach(((d,y)=>{let T=!0;y.forEachWhile((b=>{const _=this.ot(b);return!_||_.purpose==="TargetPurposeLimboResolution"||(T=!1,!1)})),T&&(o=o.add(d))})),this.je.forEach(((d,y)=>y.setReadTime(e)));const u=new Hf(e,n,this.Ye,this.je,o);return this.je=Ia(),this.Je=Vh(),this.He=Vh(),this.Ye=new Xn(Ft),u}Xe(e,n){if(!this.rt(e))return;const o=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,o),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,o){if(!this.rt(e))return;const u=this.nt(e);this.Et(e,n)?u.Qe(n,1):u.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),o&&(this.je=this.je.insert(n,o))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new ty,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Cr(Ft),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Cr(Ft),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ge("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ty),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Vh(){return new Xn(tt.comparator)}function ny(){return new Xn(tt.comparator)}const xI={asc:"ASCENDING",desc:"DESCENDING"},yI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},EI={and:"AND",or:"OR"};class _I{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function O1(r,e){return r.useProto3Json||Pf(e)?e:{value:e}}function yf(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ww(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function wI(r,e){return yf(r,e.toTimestamp())}function Gs(r){return un(!!r,49232),dt.fromTimestamp((function(n){const o=yo(n);return new Ln(o.seconds,o.nanos)})(r))}function pg(r,e){return D1(r,e).canonicalString()}function D1(r,e){const n=(function(u){return new In(["projects",u.projectId,"databases",u.database])})(r).child("documents");return e===void 0?n:n.child(e)}function Aw(r){const e=In.fromString(r);return un(Sw(e),10190,{key:e.toString()}),e}function M1(r,e){return pg(r.databaseId,e.path)}function r1(r,e){const n=Aw(e);if(n.get(1)!==r.databaseId.projectId)throw new ze(Ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new ze(Ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new tt(vw(n))}function bw(r,e){return pg(r.databaseId,e)}function AI(r){const e=Aw(r);return e.length===4?In.emptyPath():vw(e)}function L1(r){return new In(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function vw(r){return un(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function ry(r,e,n){return{name:M1(r,e),fields:n.value.mapValue.fields}}function bI(r,e){let n;if("targetChange"in e){e.targetChange;const o=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:lt(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),u=e.targetChange.targetIds||[],d=(function(_,S){return _.useProto3Json?(un(S===void 0||typeof S=="string",58123),zr.fromBase64String(S||"")):(un(S===void 0||S instanceof Buffer||S instanceof Uint8Array,16193),zr.fromUint8Array(S||new Uint8Array))})(r,e.targetChange.resumeToken),y=e.targetChange.cause,T=y&&(function(_){const S=_.code===void 0?Ce.UNKNOWN:yw(_.code);return new ze(S,_.message||"")})(y);n=new _w(o,u,d,T||null)}else if("documentChange"in e){e.documentChange;const o=e.documentChange;o.document,o.document.name,o.document.updateTime;const u=r1(r,o.document.name),d=Gs(o.document.updateTime),y=o.document.createTime?Gs(o.document.createTime):dt.min(),T=new Ri({mapValue:{fields:o.document.fields}}),b=ii.newFoundDocument(u,d,y,T),_=o.targetIds||[],S=o.removedTargetIds||[];n=new $h(_,S,b.key,b)}else if("documentDelete"in e){e.documentDelete;const o=e.documentDelete;o.document;const u=r1(r,o.document),d=o.readTime?Gs(o.readTime):dt.min(),y=ii.newNoDocument(u,d),T=o.removedTargetIds||[];n=new $h([],T,y.key,y)}else if("documentRemove"in e){e.documentRemove;const o=e.documentRemove;o.document;const u=r1(r,o.document),d=o.removedTargetIds||[];n=new $h([],d,u,null)}else{if(!("filter"in e))return lt(11601,{Rt:e});{e.filter;const o=e.filter;o.targetId;const{count:u=0,unchangedNames:d}=o,y=new fI(u,d),T=o.targetId;n=new Ew(T,y)}}return n}function vI(r,e){let n;if(e instanceof wu)n={update:ry(r,e.key,e.value)};else if(e instanceof zf)n={delete:M1(r,e.key)};else if(e instanceof To)n={update:ry(r,e.key,e.data),updateMask:MI(e.fieldMask)};else{if(!(e instanceof cI))return lt(16599,{Vt:e.type});n={verify:M1(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((o=>(function(d,y){const T=y.transform;if(T instanceof pf)return{fieldPath:y.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(T instanceof du)return{fieldPath:y.field.canonicalString(),appendMissingElements:{values:T.elements}};if(T instanceof gu)return{fieldPath:y.field.canonicalString(),removeAllFromArray:{values:T.elements}};if(T instanceof xf)return{fieldPath:y.field.canonicalString(),increment:T.Ae};throw lt(20930,{transform:y.transform})})(0,o)))),e.precondition.isNone||(n.currentDocument=(function(u,d){return d.updateTime!==void 0?{updateTime:wI(u,d.updateTime)}:d.exists!==void 0?{exists:d.exists}:lt(27497)})(r,e.precondition)),n}function TI(r,e){return r&&r.length>0?(un(e!==void 0,14353),r.map((n=>(function(u,d){let y=u.updateTime?Gs(u.updateTime):Gs(d);return y.isEqual(dt.min())&&(y=Gs(d)),new aI(y,u.transformResults||[])})(n,e)))):[]}function CI(r,e){return{documents:[bw(r,e.path)]}}function SI(r,e){const n={structuredQuery:{}},o=e.path;let u;e.collectionGroup!==null?(u=o,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(u=o.popLast(),n.structuredQuery.from=[{collectionId:o.lastSegment()}]),n.parent=bw(r,u);const d=(function(_){if(_.length!==0)return Cw(Ns.create(_,"and"))})(e.filters);d&&(n.structuredQuery.where=d);const y=(function(_){if(_.length!==0)return _.map((S=>(function(M){return{field:Ul(M.field),direction:RI(M.dir)}})(S)))})(e.orderBy);y&&(n.structuredQuery.orderBy=y);const T=O1(r,e.limit);return T!==null&&(n.structuredQuery.limit=T),e.startAt&&(n.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{ft:n,parent:u}}function II(r){let e=AI(r.parent);const n=r.structuredQuery,o=n.from?n.from.length:0;let u=null;if(o>0){un(o===1,65062);const S=n.from[0];S.allDescendants?u=S.collectionId:e=e.child(S.collectionId)}let d=[];n.where&&(d=(function(I){const M=Tw(I);return M instanceof Ns&&tw(M)?M.getFilters():[M]})(n.where));let y=[];n.orderBy&&(y=(function(I){return I.map((M=>(function(K){return new mf(Vl(K.field),(function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(K.direction))})(M)))})(n.orderBy));let T=null;n.limit&&(T=(function(I){let M;return M=typeof I=="object"?I.value:I,Pf(M)?null:M})(n.limit));let b=null;n.startAt&&(b=(function(I){const M=!!I.before,V=I.values||[];return new gf(V,M)})(n.startAt));let _=null;return n.endAt&&(_=(function(I){const M=!I.before,V=I.values||[];return new gf(V,M)})(n.endAt)),X4(e,u,y,d,T,"F",b,_)}function NI(r,e){const n=(function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return lt(28987,{purpose:u})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Tw(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const o=Vl(n.unaryFilter.field);return xr.create(o,"==",{doubleValue:NaN});case"IS_NULL":const u=Vl(n.unaryFilter.field);return xr.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const d=Vl(n.unaryFilter.field);return xr.create(d,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const y=Vl(n.unaryFilter.field);return xr.create(y,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return lt(61313);default:return lt(60726)}})(r):r.fieldFilter!==void 0?(function(n){return xr.create(Vl(n.fieldFilter.field),(function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return lt(58110);default:return lt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return Ns.create(n.compositeFilter.filters.map((o=>Tw(o))),(function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return lt(1026)}})(n.compositeFilter.op))})(r):lt(30097,{filter:r})}function RI(r){return xI[r]}function OI(r){return yI[r]}function DI(r){return EI[r]}function Ul(r){return{fieldPath:r.canonicalString()}}function Vl(r){return Fr.fromServerFormat(r.fieldPath)}function Cw(r){return r instanceof xr?(function(n){if(n.op==="=="){if(Gx(n.value))return{unaryFilter:{field:Ul(n.field),op:"IS_NAN"}};if(Hx(n.value))return{unaryFilter:{field:Ul(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Gx(n.value))return{unaryFilter:{field:Ul(n.field),op:"IS_NOT_NAN"}};if(Hx(n.value))return{unaryFilter:{field:Ul(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ul(n.field),op:OI(n.op),value:n.value}}})(r):r instanceof Ns?(function(n){const o=n.getFilters().map((u=>Cw(u)));return o.length===1?o[0]:{compositeFilter:{op:DI(n.op),filters:o}}})(r):lt(54877,{filter:r})}function MI(r){const e=[];return r.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Sw(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,n,o,u,d=dt.min(),y=dt.min(),T=zr.EMPTY_BYTE_STRING,b=null){this.target=e,this.targetId=n,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=y,this.resumeToken=T,this.expectedCount=b}withSequenceNumber(e){return new co(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new co(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new co(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new co(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e){this.yt=e}}function PI(r){const e=II({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?R1(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(){this.Cn=new kI}addToCollectionParentIndex(e,n){return this.Cn.add(n),Ie.resolve()}getCollectionParents(e,n){return Ie.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Ie.resolve()}deleteFieldIndex(e,n){return Ie.resolve()}deleteAllFieldIndexes(e){return Ie.resolve()}createTargetIndexes(e,n){return Ie.resolve()}getDocumentsMatchingTarget(e,n){return Ie.resolve(null)}getIndexType(e,n){return Ie.resolve(0)}getFieldIndexes(e,n){return Ie.resolve([])}getNextCollectionGroupToUpdate(e){return Ie.resolve(null)}getMinOffset(e,n){return Ie.resolve(xo.min())}getMinOffsetFromCollectionGroup(e,n){return Ie.resolve(xo.min())}updateCollectionGroup(e,n,o){return Ie.resolve()}updateIndexEntries(e,n){return Ie.resolve()}}class kI{constructor(){this.index={}}add(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n]||new Cr(In.comparator),d=!u.has(o);return this.index[n]=u.add(o),d}has(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n];return u&&u.has(o)}getEntries(e){return(this.index[e]||new Cr(In.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Iw=41943040;class Ni{static withCacheSize(e){return new Ni(e,Ni.DEFAULT_COLLECTION_PERCENTILE,Ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ni.DEFAULT_COLLECTION_PERCENTILE=10,Ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ni.DEFAULT=new Ni(Iw,Ni.DEFAULT_COLLECTION_PERCENTILE,Ni.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ni.DISABLED=new Ni(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Jl(0)}static cr(){return new Jl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy="LruGarbageCollector",UI=1048576;function ay([r,e],[n,o]){const u=Ft(r,n);return u===0?Ft(e,o):u}class VI{constructor(e){this.Ir=e,this.buffer=new Cr(ay),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const o=this.buffer.last();ay(n,o)<0&&(this.buffer=this.buffer.delete(o).add(n))}}get maxValue(){return this.buffer.last()[0]}}class jI{constructor(e,n,o){this.garbageCollector=e,this.asyncQueue=n,this.localStore=o,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ge(sy,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){sc(n)?Ge(sy,"Ignoring IndexedDB error during garbage collection: ",n):await ic(n)}await this.Vr(3e5)}))}}class FI{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((o=>Math.floor(n/100*o)))}nthSequenceNumber(e,n){if(n===0)return Ie.resolve(Lf.ce);const o=new VI(n);return this.mr.forEachTarget(e,(u=>o.Ar(u.sequenceNumber))).next((()=>this.mr.pr(e,(u=>o.Ar(u))))).next((()=>o.maxValue))}removeTargets(e,n,o){return this.mr.removeTargets(e,n,o)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ge("LruGarbageCollector","Garbage collection skipped; disabled"),Ie.resolve(iy)):this.getCacheSize(e).next((o=>o<this.params.cacheSizeCollectionThreshold?(Ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),iy):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let o,u,d,y,T,b,_;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((I=>(I>this.params.maximumSequenceNumbersToCollect?(Ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),u=this.params.maximumSequenceNumbersToCollect):u=I,y=Date.now(),this.nthSequenceNumber(e,u)))).next((I=>(o=I,T=Date.now(),this.removeTargets(e,o,n)))).next((I=>(d=I,b=Date.now(),this.removeOrphanedDocuments(e,o)))).next((I=>(_=Date.now(),Bl()<=Zt.DEBUG&&Ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${y-S}ms
	Determined least recently used ${u} in `+(T-y)+`ms
	Removed ${d} targets in `+(b-T)+`ms
	Removed ${I} documents in `+(_-b)+`ms
Total Duration: ${_-S}ms`),Ie.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:d,documentsRemoved:I}))))}}function zI(r,e){return new FI(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(){this.changes=new rl((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ii.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const o=this.changes.get(n);return o!==void 0?Ie.resolve(o):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,n,o,u){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=o,this.indexManager=u}getDocument(e,n){let o=null;return this.documentOverlayCache.getOverlay(e,n).next((u=>(o=u,this.remoteDocumentCache.getEntry(e,n)))).next((u=>(o!==null&&nu(o.mutation,u,Xi.empty(),Ln.now()),u)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((o=>this.getLocalViewOfDocuments(e,o,zt()).next((()=>o))))}getLocalViewOfDocuments(e,n,o=zt()){const u=Qo();return this.populateOverlays(e,u,n).next((()=>this.computeViews(e,n,u,o).next((d=>{let y=qc();return d.forEach(((T,b)=>{y=y.insert(T,b.overlayedDocument)})),y}))))}getOverlayedDocuments(e,n){const o=Qo();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,zt())))}populateOverlays(e,n,o){const u=[];return o.forEach((d=>{n.has(d)||u.push(d)})),this.documentOverlayCache.getOverlays(e,u).next((d=>{d.forEach(((y,T)=>{n.set(y,T)}))}))}computeViews(e,n,o,u){let d=Ia();const y=tu(),T=(function(){return tu()})();return n.forEach(((b,_)=>{const S=o.get(_.key);u.has(_.key)&&(S===void 0||S.mutation instanceof To)?d=d.insert(_.key,_):S!==void 0?(y.set(_.key,S.mutation.getFieldMask()),nu(S.mutation,_,S.mutation.getFieldMask(),Ln.now())):y.set(_.key,Xi.empty())})),this.recalculateAndSaveOverlays(e,d).next((b=>(b.forEach(((_,S)=>y.set(_,S))),n.forEach(((_,S)=>T.set(_,new GI(S,y.get(_)??null)))),T)))}recalculateAndSaveOverlays(e,n){const o=tu();let u=new Xn(((y,T)=>y-T)),d=zt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((y=>{for(const T of y)T.keys().forEach((b=>{const _=n.get(b);if(_===null)return;let S=o.get(b)||Xi.empty();S=T.applyToLocalView(_,S),o.set(b,S);const I=(u.get(T.batchId)||zt()).add(b);u=u.insert(T.batchId,I)}))})).next((()=>{const y=[],T=u.getReverseIterator();for(;T.hasNext();){const b=T.getNext(),_=b.key,S=b.value,I=uw();S.forEach((M=>{if(!d.has(M)){const V=pw(n.get(M),o.get(M));V!==null&&I.set(M,V),d=d.add(M)}})),y.push(this.documentOverlayCache.saveOverlays(e,_,I))}return Ie.waitFor(y)})).next((()=>o))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((o=>this.recalculateAndSaveOverlays(e,o)))}getDocumentsMatchingQuery(e,n,o,u){return(function(y){return tt.isDocumentKey(y.path)&&y.collectionGroup===null&&y.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):sw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,o,u):this.getDocumentsMatchingCollectionQuery(e,n,o,u)}getNextDocuments(e,n,o,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,o,u).next((d=>{const y=u-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,o.largestBatchId,u-d.size):Ie.resolve(Qo());let T=cu,b=d;return y.next((_=>Ie.forEach(_,((S,I)=>(T<I.largestBatchId&&(T=I.largestBatchId),d.get(S)?Ie.resolve():this.remoteDocumentCache.getEntry(e,S).next((M=>{b=b.insert(S,M)}))))).next((()=>this.populateOverlays(e,_,d))).next((()=>this.computeViews(e,b,_,zt()))).next((S=>({batchId:T,changes:cw(S)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new tt(n)).next((o=>{let u=qc();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u}))}getDocumentsMatchingCollectionGroupQuery(e,n,o,u){const d=n.collectionGroup;let y=qc();return this.indexManager.getCollectionParents(e,d).next((T=>Ie.forEach(T,(b=>{const _=(function(I,M){return new _u(M,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)})(n,b.child(d));return this.getDocumentsMatchingCollectionQuery(e,_,o,u).next((S=>{S.forEach(((I,M)=>{y=y.insert(I,M)}))}))})).next((()=>y))))}getDocumentsMatchingCollectionQuery(e,n,o,u){let d;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,o.largestBatchId).next((y=>(d=y,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,o,d,u)))).next((y=>{d.forEach(((b,_)=>{const S=_.getKey();y.get(S)===null&&(y=y.insert(S,ii.newInvalidDocument(S)))}));let T=qc();return y.forEach(((b,_)=>{const S=d.get(b);S!==void 0&&nu(S.mutation,_,Xi.empty(),Ln.now()),Vf(n,_)&&(T=T.insert(b,_))})),T}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Ie.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(u){return{id:u.id,version:u.version,createTime:Gs(u.createTime)}})(n)),Ie.resolve()}getNamedQuery(e,n){return Ie.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(u){return{name:u.name,query:PI(u.bundledQuery),readTime:Gs(u.readTime)}})(n)),Ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(){this.overlays=new Xn(tt.comparator),this.qr=new Map}getOverlay(e,n){return Ie.resolve(this.overlays.get(n))}getOverlays(e,n){const o=Qo();return Ie.forEach(n,(u=>this.getOverlay(e,u).next((d=>{d!==null&&o.set(u,d)})))).next((()=>o))}saveOverlays(e,n,o){return o.forEach(((u,d)=>{this.St(e,n,d)})),Ie.resolve()}removeOverlaysForBatchId(e,n,o){const u=this.qr.get(o);return u!==void 0&&(u.forEach((d=>this.overlays=this.overlays.remove(d))),this.qr.delete(o)),Ie.resolve()}getOverlaysForCollection(e,n,o){const u=Qo(),d=n.length+1,y=new tt(n.child("")),T=this.overlays.getIteratorFrom(y);for(;T.hasNext();){const b=T.getNext().value,_=b.getKey();if(!n.isPrefixOf(_.path))break;_.path.length===d&&b.largestBatchId>o&&u.set(b.getKey(),b)}return Ie.resolve(u)}getOverlaysForCollectionGroup(e,n,o,u){let d=new Xn(((_,S)=>_-S));const y=this.overlays.getIterator();for(;y.hasNext();){const _=y.getNext().value;if(_.getKey().getCollectionGroup()===n&&_.largestBatchId>o){let S=d.get(_.largestBatchId);S===null&&(S=Qo(),d=d.insert(_.largestBatchId,S)),S.set(_.getKey(),_)}}const T=Qo(),b=d.getIterator();for(;b.hasNext()&&(b.getNext().value.forEach(((_,S)=>T.set(_,S))),!(T.size()>=u)););return Ie.resolve(T)}St(e,n,o){const u=this.overlays.get(o.key);if(u!==null){const y=this.qr.get(u.largestBatchId).delete(o.key);this.qr.set(u.largestBatchId,y)}this.overlays=this.overlays.insert(o.key,new hI(n,o));let d=this.qr.get(n);d===void 0&&(d=zt(),this.qr.set(n,d)),this.qr.set(n,d.add(o.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(){this.sessionToken=zr.EMPTY_BYTE_STRING}getSessionToken(e){return Ie.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(){this.Qr=new Cr(Or.$r),this.Ur=new Cr(Or.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const o=new Or(e,n);this.Qr=this.Qr.add(o),this.Ur=this.Ur.add(o)}Wr(e,n){e.forEach((o=>this.addReference(o,n)))}removeReference(e,n){this.Gr(new Or(e,n))}zr(e,n){e.forEach((o=>this.removeReference(o,n)))}jr(e){const n=new tt(new In([])),o=new Or(n,e),u=new Or(n,e+1),d=[];return this.Ur.forEachInRange([o,u],(y=>{this.Gr(y),d.push(y.key)})),d}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new tt(new In([])),o=new Or(n,e),u=new Or(n,e+1);let d=zt();return this.Ur.forEachInRange([o,u],(y=>{d=d.add(y.key)})),d}containsKey(e){const n=new Or(e,0),o=this.Qr.firstAfterOrEqual(n);return o!==null&&e.isEqual(o.key)}}class Or{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return tt.comparator(e.key,n.key)||Ft(e.Yr,n.Yr)}static Kr(e,n){return Ft(e.Yr,n.Yr)||tt.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Cr(Or.$r)}checkEmpty(e){return Ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,o,u){const d=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const y=new uI(d,n,o,u);this.mutationQueue.push(y);for(const T of u)this.Zr=this.Zr.add(new Or(T.key,d)),this.indexManager.addToCollectionParentIndex(e,T.key.path.popLast());return Ie.resolve(y)}lookupMutationBatch(e,n){return Ie.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const o=n+1,u=this.ei(o),d=u<0?0:u;return Ie.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return Ie.resolve(this.mutationQueue.length===0?lg:this.tr-1)}getAllMutationBatches(e){return Ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const o=new Or(n,0),u=new Or(n,Number.POSITIVE_INFINITY),d=[];return this.Zr.forEachInRange([o,u],(y=>{const T=this.Xr(y.Yr);d.push(T)})),Ie.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new Cr(Ft);return n.forEach((u=>{const d=new Or(u,0),y=new Or(u,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([d,y],(T=>{o=o.add(T.Yr)}))})),Ie.resolve(this.ti(o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,u=o.length+1;let d=o;tt.isDocumentKey(d)||(d=d.child(""));const y=new Or(new tt(d),0);let T=new Cr(Ft);return this.Zr.forEachWhile((b=>{const _=b.key.path;return!!o.isPrefixOf(_)&&(_.length===u&&(T=T.add(b.Yr)),!0)}),y),Ie.resolve(this.ti(T))}ti(e){const n=[];return e.forEach((o=>{const u=this.Xr(o);u!==null&&n.push(u)})),n}removeMutationBatch(e,n){un(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let o=this.Zr;return Ie.forEach(n.mutations,(u=>{const d=new Or(u.key,n.batchId);return o=o.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)})).next((()=>{this.Zr=o}))}ir(e){}containsKey(e,n){const o=new Or(n,0),u=this.Zr.firstAfterOrEqual(o);return Ie.resolve(n.isEqual(u&&u.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ie.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e){this.ri=e,this.docs=(function(){return new Xn(tt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const o=n.key,u=this.docs.get(o),d=u?u.size:0,y=this.ri(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:y}),this.size+=y-d,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const o=this.docs.get(n);return Ie.resolve(o?o.document.mutableCopy():ii.newInvalidDocument(n))}getEntries(e,n){let o=Ia();return n.forEach((u=>{const d=this.docs.get(u);o=o.insert(u,d?d.document.mutableCopy():ii.newInvalidDocument(u))})),Ie.resolve(o)}getDocumentsMatchingQuery(e,n,o,u){let d=Ia();const y=n.path,T=new tt(y.child("__id-9223372036854775808__")),b=this.docs.getIteratorFrom(T);for(;b.hasNext();){const{key:_,value:{document:S}}=b.getNext();if(!y.isPrefixOf(_.path))break;_.path.length>y.length+1||T4(v4(S),o)<=0||(u.has(S.key)||Vf(n,S))&&(d=d.insert(S.key,S.mutableCopy()))}return Ie.resolve(d)}getAllFromCollectionGroup(e,n,o,u){lt(9500)}ii(e,n){return Ie.forEach(this.docs,(o=>n(o)))}newChangeBuffer(e){return new ZI(this)}getSize(e){return Ie.resolve(this.size)}}class ZI extends HI{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((o,u)=>{u.isValidDocument()?n.push(this.Nr.addEntry(e,u)):this.Nr.removeEntry(o)})),Ie.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e){this.persistence=e,this.si=new rl((n=>hg(n)),fg),this.lastRemoteSnapshotVersion=dt.min(),this.highestTargetId=0,this.oi=0,this._i=new xg,this.targetCount=0,this.ai=Jl.ur()}forEachTarget(e,n){return this.si.forEach(((o,u)=>n(u))),Ie.resolve()}getLastRemoteSnapshotVersion(e){return Ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ie.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ie.resolve(this.highestTargetId)}setTargetsMetadata(e,n,o){return o&&(this.lastRemoteSnapshotVersion=o),n>this.oi&&(this.oi=n),Ie.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Jl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Ie.resolve()}updateTargetData(e,n){return this.Pr(n),Ie.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Ie.resolve()}removeTargets(e,n,o){let u=0;const d=[];return this.si.forEach(((y,T)=>{T.sequenceNumber<=n&&o.get(T.targetId)===null&&(this.si.delete(y),d.push(this.removeMatchingKeysForTargetId(e,T.targetId)),u++)})),Ie.waitFor(d).next((()=>u))}getTargetCount(e){return Ie.resolve(this.targetCount)}getTargetData(e,n){const o=this.si.get(n)||null;return Ie.resolve(o)}addMatchingKeys(e,n,o){return this._i.Wr(n,o),Ie.resolve()}removeMatchingKeys(e,n,o){this._i.zr(n,o);const u=this.persistence.referenceDelegate,d=[];return u&&n.forEach((y=>{d.push(u.markPotentiallyOrphaned(e,y))})),Ie.waitFor(d)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Ie.resolve()}getMatchingKeysForTargetId(e,n){const o=this._i.Hr(n);return Ie.resolve(o)}containsKey(e,n){return Ie.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e,n){this.ui={},this.overlays={},this.ci=new Lf(0),this.li=!1,this.li=!0,this.hi=new KI,this.referenceDelegate=e(this),this.Pi=new JI(this),this.indexManager=new BI,this.remoteDocumentCache=(function(u){return new QI(u)})((o=>this.referenceDelegate.Ti(o))),this.serializer=new LI(n),this.Ii=new qI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new XI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let o=this.ui[e.toKey()];return o||(o=new WI(n,this.referenceDelegate),this.ui[e.toKey()]=o),o}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,o){Ge("MemoryPersistence","Starting transaction:",e);const u=new $I(this.ci.next());return this.referenceDelegate.Ei(),o(u).next((d=>this.referenceDelegate.di(u).next((()=>d)))).toPromise().then((d=>(u.raiseOnCommittedEvent(),d)))}Ai(e,n){return Ie.or(Object.values(this.ui).map((o=>()=>o.containsKey(e,n))))}}class $I extends S4{constructor(e){super(),this.currentSequenceNumber=e}}class yg{constructor(e){this.persistence=e,this.Ri=new xg,this.Vi=null}static mi(e){return new yg(e)}get fi(){if(this.Vi)return this.Vi;throw lt(60996)}addReference(e,n,o){return this.Ri.addReference(o,n),this.fi.delete(o.toString()),Ie.resolve()}removeReference(e,n,o){return this.Ri.removeReference(o,n),this.fi.add(o.toString()),Ie.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Ie.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((u=>this.fi.add(u.toString())));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,n.targetId).next((u=>{u.forEach((d=>this.fi.add(d.toString())))})).next((()=>o.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ie.forEach(this.fi,(o=>{const u=tt.fromPath(o);return this.gi(e,u).next((d=>{d||n.removeEntry(u,dt.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((o=>{o?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return Ie.or([()=>Ie.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Ef{constructor(e,n){this.persistence=e,this.pi=new rl((o=>R4(o.path)),((o,u)=>o.isEqual(u))),this.garbageCollector=zI(this,n)}static mi(e,n){return new Ef(e,n)}Ei(){}di(e){return Ie.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((o=>n.next((u=>o+u))))}wr(e){let n=0;return this.pr(e,(o=>{n++})).next((()=>n))}pr(e,n){return Ie.forEach(this.pi,((o,u)=>this.br(e,o,u).next((d=>d?Ie.resolve():n(u)))))}removeTargets(e,n,o){return this.persistence.getTargetCache().removeTargets(e,n,o)}removeOrphanedDocuments(e,n){let o=0;const u=this.persistence.getRemoteDocumentCache(),d=u.newChangeBuffer();return u.ii(e,(y=>this.br(e,y,n).next((T=>{T||(o++,d.removeEntry(y,dt.min()))})))).next((()=>d.apply(e))).next((()=>o))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Ie.resolve()}removeTarget(e,n){const o=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,o)}addReference(e,n,o){return this.pi.set(o,e.currentSequenceNumber),Ie.resolve()}removeReference(e,n,o){return this.pi.set(o,e.currentSequenceNumber),Ie.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Ie.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Qh(e.data.value)),n}br(e,n,o){return Ie.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const u=this.pi.get(n);return Ie.resolve(u!==void 0&&u>o)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e,n,o,u){this.targetId=e,this.fromCache=n,this.Es=o,this.ds=u}static As(e,n){let o=zt(),u=zt();for(const d of n.docChanges)switch(d.type){case 0:o=o.add(d.doc.key);break;case 1:u=u.add(d.doc.key)}return new Eg(e,n.fromCache,o,u)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return KC()?8:I4(qC())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,o,u){const d={result:null};return this.ys(e,n).next((y=>{d.result=y})).next((()=>{if(!d.result)return this.ws(e,n,u,o).next((y=>{d.result=y}))})).next((()=>{if(d.result)return;const y=new eN;return this.Ss(e,n,y).next((T=>{if(d.result=T,this.Vs)return this.bs(e,n,y,T.size)}))})).next((()=>d.result))}bs(e,n,o,u){return o.documentReadCount<this.fs?(Bl()<=Zt.DEBUG&&Ge("QueryEngine","SDK will not create cache indexes for query:",kl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ie.resolve()):(Bl()<=Zt.DEBUG&&Ge("QueryEngine","Query:",kl(n),"scans",o.documentReadCount,"local documents and returns",u,"documents as results."),o.documentReadCount>this.gs*u?(Bl()<=Zt.DEBUG&&Ge("QueryEngine","The SDK decides to create cache indexes for query:",kl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hs(n))):Ie.resolve())}ys(e,n){if(Kx(n))return Ie.resolve(null);let o=Hs(n);return this.indexManager.getIndexType(e,o).next((u=>u===0?null:(n.limit!==null&&u===1&&(n=R1(n,null,"F"),o=Hs(n)),this.indexManager.getDocumentsMatchingTarget(e,o).next((d=>{const y=zt(...d);return this.ps.getDocuments(e,y).next((T=>this.indexManager.getMinOffset(e,o).next((b=>{const _=this.Ds(n,T);return this.Cs(n,_,y,b.readTime)?this.ys(e,R1(n,null,"F")):this.vs(e,_,n,b)}))))})))))}ws(e,n,o,u){return Kx(n)||u.isEqual(dt.min())?Ie.resolve(null):this.ps.getDocuments(e,o).next((d=>{const y=this.Ds(n,d);return this.Cs(n,y,o,u)?Ie.resolve(null):(Bl()<=Zt.DEBUG&&Ge("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),kl(n)),this.vs(e,y,n,b4(u,cu)).next((T=>T)))}))}Ds(e,n){let o=new Cr(ow(e));return n.forEach(((u,d)=>{Vf(e,d)&&(o=o.add(d))})),o}Cs(e,n,o,u){if(e.limit===null)return!1;if(o.size!==n.size)return!0;const d=e.limitType==="F"?n.last():n.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(u)>0)}Ss(e,n,o){return Bl()<=Zt.DEBUG&&Ge("QueryEngine","Using full collection scan to execute query:",kl(n)),this.ps.getDocumentsMatchingQuery(e,n,xo.min(),o)}vs(e,n,o,u){return this.ps.getDocumentsMatchingQuery(e,o,u).next((d=>(n.forEach((y=>{d=d.insert(y.key,y)})),d)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _g="LocalStore",nN=3e8;class rN{constructor(e,n,o,u){this.persistence=e,this.Fs=n,this.serializer=u,this.Ms=new Xn(Ft),this.xs=new rl((d=>hg(d)),fg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(o)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new YI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function iN(r,e,n,o){return new rN(r,e,n,o)}async function Rw(r,e){const n=xt(r);return await n.persistence.runTransaction("Handle user change","readonly",(o=>{let u;return n.mutationQueue.getAllMutationBatches(o).next((d=>(u=d,n.Bs(e),n.mutationQueue.getAllMutationBatches(o)))).next((d=>{const y=[],T=[];let b=zt();for(const _ of u){y.push(_.batchId);for(const S of _.mutations)b=b.add(S.key)}for(const _ of d){T.push(_.batchId);for(const S of _.mutations)b=b.add(S.key)}return n.localDocuments.getDocuments(o,b).next((_=>({Ls:_,removedBatchIds:y,addedBatchIds:T})))}))}))}function sN(r,e){const n=xt(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(o=>{const u=e.batch.keys(),d=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(T,b,_,S){const I=_.batch,M=I.keys();let V=Ie.resolve();return M.forEach((K=>{V=V.next((()=>S.getEntry(b,K))).next((W=>{const q=_.docVersions.get(K);un(q!==null,48541),W.version.compareTo(q)<0&&(I.applyToRemoteDocument(W,_),W.isValidDocument()&&(W.setReadTime(_.commitVersion),S.addEntry(W)))}))})),V.next((()=>T.mutationQueue.removeMutationBatch(b,I)))})(n,o,e,d).next((()=>d.apply(o))).next((()=>n.mutationQueue.performConsistencyCheck(o))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(o,u,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,(function(T){let b=zt();for(let _=0;_<T.mutationResults.length;++_)T.mutationResults[_].transformResults.length>0&&(b=b.add(T.batch.mutations[_].key));return b})(e)))).next((()=>n.localDocuments.getDocuments(o,u)))}))}function Ow(r){const e=xt(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function aN(r,e){const n=xt(r),o=e.snapshotVersion;let u=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(d=>{const y=n.Ns.newChangeBuffer({trackRemovals:!0});u=n.Ms;const T=[];e.targetChanges.forEach(((S,I)=>{const M=u.get(I);if(!M)return;T.push(n.Pi.removeMatchingKeys(d,S.removedDocuments,I).next((()=>n.Pi.addMatchingKeys(d,S.addedDocuments,I))));let V=M.withSequenceNumber(d.currentSequenceNumber);e.targetMismatches.get(I)!==null?V=V.withResumeToken(zr.EMPTY_BYTE_STRING,dt.min()).withLastLimboFreeSnapshotVersion(dt.min()):S.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(S.resumeToken,o)),u=u.insert(I,V),(function(W,q,le){return W.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=nN?!0:le.addedDocuments.size+le.modifiedDocuments.size+le.removedDocuments.size>0})(M,V,S)&&T.push(n.Pi.updateTargetData(d,V))}));let b=Ia(),_=zt();if(e.documentUpdates.forEach((S=>{e.resolvedLimboDocuments.has(S)&&T.push(n.persistence.referenceDelegate.updateLimboDocument(d,S))})),T.push(oN(d,y,e.documentUpdates).next((S=>{b=S.ks,_=S.qs}))),!o.isEqual(dt.min())){const S=n.Pi.getLastRemoteSnapshotVersion(d).next((I=>n.Pi.setTargetsMetadata(d,d.currentSequenceNumber,o)));T.push(S)}return Ie.waitFor(T).next((()=>y.apply(d))).next((()=>n.localDocuments.getLocalViewOfDocuments(d,b,_))).next((()=>b))})).then((d=>(n.Ms=u,d)))}function oN(r,e,n){let o=zt(),u=zt();return n.forEach((d=>o=o.add(d))),e.getEntries(r,o).next((d=>{let y=Ia();return n.forEach(((T,b)=>{const _=d.get(T);b.isFoundDocument()!==_.isFoundDocument()&&(u=u.add(T)),b.isNoDocument()&&b.version.isEqual(dt.min())?(e.removeEntry(T,b.readTime),y=y.insert(T,b)):!_.isValidDocument()||b.version.compareTo(_.version)>0||b.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(b),y=y.insert(T,b)):Ge(_g,"Ignoring outdated watch update for ",T,". Current version:",_.version," Watch version:",b.version)})),{ks:y,qs:u}}))}function lN(r,e){const n=xt(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(o=>(e===void 0&&(e=lg),n.mutationQueue.getNextMutationBatchAfterBatchId(o,e))))}function cN(r,e){const n=xt(r);return n.persistence.runTransaction("Allocate target","readwrite",(o=>{let u;return n.Pi.getTargetData(o,e).next((d=>d?(u=d,Ie.resolve(u)):n.Pi.allocateTargetId(o).next((y=>(u=new co(e,y,"TargetPurposeListen",o.currentSequenceNumber),n.Pi.addTargetData(o,u).next((()=>u)))))))})).then((o=>{const u=n.Ms.get(o.targetId);return(u===null||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(o.targetId,o),n.xs.set(e,o.targetId)),o}))}async function P1(r,e,n){const o=xt(r),u=o.Ms.get(e),d=n?"readwrite":"readwrite-primary";try{n||await o.persistence.runTransaction("Release target",d,(y=>o.persistence.referenceDelegate.removeTarget(y,u)))}catch(y){if(!sc(y))throw y;Ge(_g,`Failed to update sequence numbers for target ${e}: ${y}`)}o.Ms=o.Ms.remove(e),o.xs.delete(u.target)}function oy(r,e,n){const o=xt(r);let u=dt.min(),d=zt();return o.persistence.runTransaction("Execute query","readwrite",(y=>(function(b,_,S){const I=xt(b),M=I.xs.get(S);return M!==void 0?Ie.resolve(I.Ms.get(M)):I.Pi.getTargetData(_,S)})(o,y,Hs(e)).next((T=>{if(T)return u=T.lastLimboFreeSnapshotVersion,o.Pi.getMatchingKeysForTargetId(y,T.targetId).next((b=>{d=b}))})).next((()=>o.Fs.getDocumentsMatchingQuery(y,e,n?u:dt.min(),n?d:zt()))).next((T=>(uN(o,W4(e),T),{documents:T,Qs:d})))))}function uN(r,e,n){let o=r.Os.get(e)||dt.min();n.forEach(((u,d)=>{d.readTime.compareTo(o)>0&&(o=d.readTime)})),r.Os.set(e,o)}class ly{constructor(){this.activeTargetIds=tI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class hN{constructor(){this.Mo=new ly,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,o){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,o){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new ly,Promise.resolve()}handleUserChange(e,n,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy="ConnectivityMonitor";class uy{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ge(cy,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ge(cy,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jh=null;function B1(){return jh===null?jh=(function(){return 268435456+Math.round(2147483648*Math.random())})():jh++,"0x"+jh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1="RestConnection",dN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class gN{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),u=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${o}/databases/${u}`,this.Wo=this.databaseId.database===ff?`project_id=${o}`:`project_id=${o}&database_id=${u}`}Go(e,n,o,u,d){const y=B1(),T=this.zo(e,n.toUriEncodedString());Ge(i1,`Sending RPC '${e}' ${y}:`,T,o);const b={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(b,u,d);const{host:_}=new URL(T),S=ig(_);return this.Jo(e,T,b,o,S).then((I=>(Ge(i1,`Received RPC '${e}' ${y}: `,I),I)),(I=>{throw Kl(i1,`RPC '${e}' ${y} failed with error: `,I,"url: ",T,"request:",o),I}))}Ho(e,n,o,u,d,y){return this.Go(e,n,o,u,d)}jo(e,n,o){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+rc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((u,d)=>e[d]=u)),o&&o.headers.forEach(((u,d)=>e[d]=u))}zo(e,n){const o=dN[e];return`${this.Uo}/v1/${n}:${o}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ni="WebChannelConnection";class pN extends gN{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,o,u,d){const y=B1();return new Promise(((T,b)=>{const _=new L_;_.setWithCredentials(!0),_.listenOnce(P_.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case Wh.NO_ERROR:const I=_.getResponseJson();Ge(ni,`XHR for RPC '${e}' ${y} received:`,JSON.stringify(I)),T(I);break;case Wh.TIMEOUT:Ge(ni,`RPC '${e}' ${y} timed out`),b(new ze(Ce.DEADLINE_EXCEEDED,"Request time out"));break;case Wh.HTTP_ERROR:const M=_.getStatus();if(Ge(ni,`RPC '${e}' ${y} failed with status:`,M,"response text:",_.getResponseText()),M>0){let V=_.getResponseJson();Array.isArray(V)&&(V=V[0]);const K=V==null?void 0:V.error;if(K&&K.status&&K.message){const W=(function(le){const ae=le.toLowerCase().replace(/_/g,"-");return Object.values(Ce).indexOf(ae)>=0?ae:Ce.UNKNOWN})(K.status);b(new ze(W,K.message))}else b(new ze(Ce.UNKNOWN,"Server responded with status "+_.getStatus()))}else b(new ze(Ce.UNAVAILABLE,"Connection failed."));break;default:lt(9055,{l_:e,streamId:y,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{Ge(ni,`RPC '${e}' ${y} completed.`)}}));const S=JSON.stringify(u);Ge(ni,`RPC '${e}' ${y} sending request:`,u),_.send(n,"POST",S,o,15)}))}T_(e,n,o){const u=B1(),d=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],y=U_(),T=k_(),b={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(b.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(b.useFetchStreams=!0),this.jo(b.initMessageHeaders,n,o),b.encodeInitMessageHeaders=!0;const S=d.join("");Ge(ni,`Creating RPC '${e}' stream ${u}: ${S}`,b);const I=y.createWebChannel(S,b);this.I_(I);let M=!1,V=!1;const K=new mN({Yo:q=>{V?Ge(ni,`Not sending because RPC '${e}' stream ${u} is closed:`,q):(M||(Ge(ni,`Opening RPC '${e}' stream ${u} transport.`),I.open(),M=!0),Ge(ni,`RPC '${e}' stream ${u} sending:`,q),I.send(q))},Zo:()=>I.close()}),W=(q,le,ae)=>{q.listen(le,(ee=>{try{ae(ee)}catch(fe){setTimeout((()=>{throw fe}),0)}}))};return W(I,Yc.EventType.OPEN,(()=>{V||(Ge(ni,`RPC '${e}' stream ${u} transport opened.`),K.o_())})),W(I,Yc.EventType.CLOSE,(()=>{V||(V=!0,Ge(ni,`RPC '${e}' stream ${u} transport closed`),K.a_(),this.E_(I))})),W(I,Yc.EventType.ERROR,(q=>{V||(V=!0,Kl(ni,`RPC '${e}' stream ${u} transport errored. Name:`,q.name,"Message:",q.message),K.a_(new ze(Ce.UNAVAILABLE,"The operation could not be completed")))})),W(I,Yc.EventType.MESSAGE,(q=>{var le;if(!V){const ae=q.data[0];un(!!ae,16349);const ee=ae,fe=(ee==null?void 0:ee.error)||((le=ee[0])==null?void 0:le.error);if(fe){Ge(ni,`RPC '${e}' stream ${u} received error:`,fe);const je=fe.status;let De=(function(j){const $=pr[j];if($!==void 0)return yw($)})(je),z=fe.message;De===void 0&&(De=Ce.INTERNAL,z="Unknown error status: "+je+" with message "+fe.message),V=!0,K.a_(new ze(De,z)),I.close()}else Ge(ni,`RPC '${e}' stream ${u} received:`,ae),K.u_(ae)}})),W(T,B_.STAT_EVENT,(q=>{q.stat===b1.PROXY?Ge(ni,`RPC '${e}' stream ${u} detected buffering proxy`):q.stat===b1.NOPROXY&&Ge(ni,`RPC '${e}' stream ${u} detected no buffering proxy`)})),setTimeout((()=>{K.__()}),0),K}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function s1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gf(r){return new _I(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e,n,o=1e3,u=1.5,d=6e4){this.Mi=e,this.timerId=n,this.d_=o,this.A_=u,this.R_=d,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),o=Math.max(0,Date.now()-this.f_),u=Math.max(0,n-o);u>0&&Ge("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${o} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,u,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy="PersistentStream";class Mw{constructor(e,n,o,u,d,y,T,b){this.Mi=e,this.S_=o,this.b_=u,this.connection=d,this.authCredentialsProvider=y,this.appCheckCredentialsProvider=T,this.listener=b,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Dw(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Ce.RESOURCE_EXHAUSTED?(Sa(n.toString()),Sa("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([o,u])=>{this.D_===n&&this.G_(o,u)}),(o=>{e((()=>{const u=new ze(Ce.UNKNOWN,"Fetching auth token failed: "+o.message);return this.z_(u)}))}))}G_(e,n){const o=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{o((()=>this.listener.Xo()))})),this.stream.t_((()=>{o((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((u=>{o((()=>this.z_(u)))})),this.stream.onMessage((u=>{o((()=>++this.F_==1?this.J_(u):this.onNext(u)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ge(hy,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Ge(hy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class xN extends Mw{constructor(e,n,o,u,d,y){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,u,y),this.serializer=d}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=bI(this.serializer,e),o=(function(d){if(!("targetChange"in d))return dt.min();const y=d.targetChange;return y.targetIds&&y.targetIds.length?dt.min():y.readTime?Gs(y.readTime):dt.min()})(e);return this.listener.H_(n,o)}Y_(e){const n={};n.database=L1(this.serializer),n.addTarget=(function(d,y){let T;const b=y.target;if(T=I1(b)?{documents:CI(d,b)}:{query:SI(d,b).ft},T.targetId=y.targetId,y.resumeToken.approximateByteSize()>0){T.resumeToken=ww(d,y.resumeToken);const _=O1(d,y.expectedCount);_!==null&&(T.expectedCount=_)}else if(y.snapshotVersion.compareTo(dt.min())>0){T.readTime=yf(d,y.snapshotVersion.toTimestamp());const _=O1(d,y.expectedCount);_!==null&&(T.expectedCount=_)}return T})(this.serializer,e);const o=NI(this.serializer,e);o&&(n.labels=o),this.q_(n)}Z_(e){const n={};n.database=L1(this.serializer),n.removeTarget=e,this.q_(n)}}class yN extends Mw{constructor(e,n,o,u,d,y){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,o,u,y),this.serializer=d}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return un(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,un(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){un(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=TI(e.writeResults,e.commitTime),o=Gs(e.commitTime);return this.listener.na(o,n)}ra(){const e={};e.database=L1(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((o=>vI(this.serializer,o)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{}class _N extends EN{constructor(e,n,o,u){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=o,this.serializer=u,this.ia=!1}sa(){if(this.ia)throw new ze(Ce.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,y])=>this.connection.Go(e,D1(n,o),u,d,y))).catch((d=>{throw d.name==="FirebaseError"?(d.code===Ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ze(Ce.UNKNOWN,d.toString())}))}Ho(e,n,o,u,d){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([y,T])=>this.connection.Ho(e,D1(n,o),u,y,T,d))).catch((y=>{throw y.name==="FirebaseError"?(y.code===Ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),y):new ze(Ce.UNKNOWN,y.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class wN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Sa(n),this.aa=!1):Ge("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el="RemoteStore";class AN{constructor(e,n,o,u,d){this.localStore=e,this.datastore=n,this.asyncQueue=o,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=d,this.Aa.Oo((y=>{o.enqueueAndForget((async()=>{il(this)&&(Ge(el,"Restarting streams for network reachability change."),await(async function(b){const _=xt(b);_.Ea.add(4),await bu(_),_.Ra.set("Unknown"),_.Ea.delete(4),await Yf(_)})(this))}))})),this.Ra=new wN(o,u)}}async function Yf(r){if(il(r))for(const e of r.da)await e(!0)}async function bu(r){for(const e of r.da)await e(!1)}function Lw(r,e){const n=xt(r);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),vg(n)?bg(n):ac(n).O_()&&Ag(n,e))}function wg(r,e){const n=xt(r),o=ac(n);n.Ia.delete(e),o.O_()&&Pw(n,e),n.Ia.size===0&&(o.O_()?o.L_():il(n)&&n.Ra.set("Unknown"))}function Ag(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(dt.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ac(r).Y_(e)}function Pw(r,e){r.Va.Ue(e),ac(r).Z_(e)}function bg(r){r.Va=new pI({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),ac(r).start(),r.Ra.ua()}function vg(r){return il(r)&&!ac(r).x_()&&r.Ia.size>0}function il(r){return xt(r).Ea.size===0}function Bw(r){r.Va=void 0}async function bN(r){r.Ra.set("Online")}async function vN(r){r.Ia.forEach(((e,n)=>{Ag(r,e)}))}async function TN(r,e){Bw(r),vg(r)?(r.Ra.ha(e),bg(r)):r.Ra.set("Unknown")}async function CN(r,e,n){if(r.Ra.set("Online"),e instanceof _w&&e.state===2&&e.cause)try{await(async function(u,d){const y=d.cause;for(const T of d.targetIds)u.Ia.has(T)&&(await u.remoteSyncer.rejectListen(T,y),u.Ia.delete(T),u.Va.removeTarget(T))})(r,e)}catch(o){Ge(el,"Failed to remove targets %s: %s ",e.targetIds.join(","),o),await _f(r,o)}else if(e instanceof $h?r.Va.Ze(e):e instanceof Ew?r.Va.st(e):r.Va.tt(e),!n.isEqual(dt.min()))try{const o=await Ow(r.localStore);n.compareTo(o)>=0&&await(function(d,y){const T=d.Va.Tt(y);return T.targetChanges.forEach(((b,_)=>{if(b.resumeToken.approximateByteSize()>0){const S=d.Ia.get(_);S&&d.Ia.set(_,S.withResumeToken(b.resumeToken,y))}})),T.targetMismatches.forEach(((b,_)=>{const S=d.Ia.get(b);if(!S)return;d.Ia.set(b,S.withResumeToken(zr.EMPTY_BYTE_STRING,S.snapshotVersion)),Pw(d,b);const I=new co(S.target,b,_,S.sequenceNumber);Ag(d,I)})),d.remoteSyncer.applyRemoteEvent(T)})(r,n)}catch(o){Ge(el,"Failed to raise snapshot:",o),await _f(r,o)}}async function _f(r,e,n){if(!sc(e))throw e;r.Ea.add(1),await bu(r),r.Ra.set("Offline"),n||(n=()=>Ow(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{Ge(el,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await Yf(r)}))}function kw(r,e){return e().catch((n=>_f(r,n,e)))}async function qf(r){const e=xt(r),n=wo(e);let o=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:lg;for(;SN(e);)try{const u=await lN(e.localStore,o);if(u===null){e.Ta.length===0&&n.L_();break}o=u.batchId,IN(e,u)}catch(u){await _f(e,u)}Uw(e)&&Vw(e)}function SN(r){return il(r)&&r.Ta.length<10}function IN(r,e){r.Ta.push(e);const n=wo(r);n.O_()&&n.X_&&n.ea(e.mutations)}function Uw(r){return il(r)&&!wo(r).x_()&&r.Ta.length>0}function Vw(r){wo(r).start()}async function NN(r){wo(r).ra()}async function RN(r){const e=wo(r);for(const n of r.Ta)e.ea(n.mutations)}async function ON(r,e,n){const o=r.Ta.shift(),u=gg.from(o,e,n);await kw(r,(()=>r.remoteSyncer.applySuccessfulWrite(u))),await qf(r)}async function DN(r,e){e&&wo(r).X_&&await(async function(o,u){if((function(y){return dI(y)&&y!==Ce.ABORTED})(u.code)){const d=o.Ta.shift();wo(o).B_(),await kw(o,(()=>o.remoteSyncer.rejectFailedWrite(d.batchId,u))),await qf(o)}})(r,e),Uw(r)&&Vw(r)}async function fy(r,e){const n=xt(r);n.asyncQueue.verifyOperationInProgress(),Ge(el,"RemoteStore received new credentials");const o=il(n);n.Ea.add(3),await bu(n),o&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Yf(n)}async function MN(r,e){const n=xt(r);e?(n.Ea.delete(2),await Yf(n)):e||(n.Ea.add(2),await bu(n),n.Ra.set("Unknown"))}function ac(r){return r.ma||(r.ma=(function(n,o,u){const d=xt(n);return d.sa(),new xN(o,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,u)})(r.datastore,r.asyncQueue,{Xo:bN.bind(null,r),t_:vN.bind(null,r),r_:TN.bind(null,r),H_:CN.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),vg(r)?bg(r):r.Ra.set("Unknown")):(await r.ma.stop(),Bw(r))}))),r.ma}function wo(r){return r.fa||(r.fa=(function(n,o,u){const d=xt(n);return d.sa(),new yN(o,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,u)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:NN.bind(null,r),r_:DN.bind(null,r),ta:RN.bind(null,r),na:ON.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await qf(r)):(await r.fa.stop(),r.Ta.length>0&&(Ge(el,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,n,o,u,d){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=o,this.op=u,this.removalCallback=d,this.deferred=new va,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((y=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,o,u,d){const y=Date.now()+o,T=new Tg(e,n,y,u,d);return T.start(o),T}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ze(Ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cg(r,e){if(Sa("AsyncQueue",`${e}: ${r}`),sc(r))return new ze(Ce.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{static emptySet(e){return new Yl(e.comparator)}constructor(e){this.comparator=e?(n,o)=>e(n,o)||tt.comparator(n.key,o.key):(n,o)=>tt.comparator(n.key,o.key),this.keyedMap=qc(),this.sortedSet=new Xn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,o)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Yl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;n.hasNext();){const u=n.getNext().key,d=o.getNext().key;if(!u.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const o=new Yl;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=n,o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(){this.ga=new Xn(tt.comparator)}track(e){const n=e.doc.key,o=this.ga.get(n);o?e.type!==0&&o.type===3?this.ga=this.ga.insert(n,e):e.type===3&&o.type!==1?this.ga=this.ga.insert(n,{type:o.type,doc:e.doc}):e.type===2&&o.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&o.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&o.type===0?this.ga=this.ga.remove(n):e.type===1&&o.type===2?this.ga=this.ga.insert(n,{type:1,doc:o.doc}):e.type===0&&o.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):lt(63341,{Rt:e,pa:o}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,o)=>{e.push(o)})),e}}class $l{constructor(e,n,o,u,d,y,T,b,_){this.query=e,this.docs=n,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=d,this.fromCache=y,this.syncStateChanged=T,this.excludesMetadataChanges=b,this.hasCachedResults=_}static fromInitialDocuments(e,n,o,u,d){const y=[];return n.forEach((T=>{y.push({type:0,doc:T})})),new $l(e,n,Yl.emptySet(n),y,o,u,!0,!1,d)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,o=e.docChanges;if(n.length!==o.length)return!1;for(let u=0;u<n.length;u++)if(n[u].type!==o[u].type||!n[u].doc.isEqual(o[u].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class PN{constructor(){this.queries=gy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,o){const u=xt(n),d=u.queries;u.queries=gy(),d.forEach(((y,T)=>{for(const b of T.Sa)b.onError(o)}))})(this,new ze(Ce.ABORTED,"Firestore shutting down"))}}function gy(){return new rl((r=>aw(r)),Uf)}async function Sg(r,e){const n=xt(r);let o=3;const u=e.query;let d=n.queries.get(u);d?!d.ba()&&e.Da()&&(o=2):(d=new LN,o=e.Da()?0:1);try{switch(o){case 0:d.wa=await n.onListen(u,!0);break;case 1:d.wa=await n.onListen(u,!1);break;case 2:await n.onFirstRemoteStoreListen(u)}}catch(y){const T=Cg(y,`Initialization of query '${kl(e.query)}' failed`);return void e.onError(T)}n.queries.set(u,d),d.Sa.push(e),e.va(n.onlineState),d.wa&&e.Fa(d.wa)&&Ng(n)}async function Ig(r,e){const n=xt(r),o=e.query;let u=3;const d=n.queries.get(o);if(d){const y=d.Sa.indexOf(e);y>=0&&(d.Sa.splice(y,1),d.Sa.length===0?u=e.Da()?0:1:!d.ba()&&e.Da()&&(u=2))}switch(u){case 0:return n.queries.delete(o),n.onUnlisten(o,!0);case 1:return n.queries.delete(o),n.onUnlisten(o,!1);case 2:return n.onLastRemoteStoreUnlisten(o);default:return}}function BN(r,e){const n=xt(r);let o=!1;for(const u of e){const d=u.query,y=n.queries.get(d);if(y){for(const T of y.Sa)T.Fa(u)&&(o=!0);y.wa=u}}o&&Ng(n)}function kN(r,e,n){const o=xt(r),u=o.queries.get(e);if(u)for(const d of u.Sa)d.onError(n);o.queries.delete(e)}function Ng(r){r.Ca.forEach((e=>{e.next()}))}var k1,my;(my=k1||(k1={})).Ma="default",my.Cache="cache";class Rg{constructor(e,n,o){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=o||{}}Fa(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)u.type!==3&&o.push(u);e=new $l(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const o=n!=="Offline";return(!this.options.qa||!o)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=$l.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==k1.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(e){this.key=e}}class Fw{constructor(e){this.key=e}}class UN{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=zt(),this.mutatedKeys=zt(),this.eu=ow(e),this.tu=new Yl(this.eu)}get nu(){return this.Ya}ru(e,n){const o=n?n.iu:new dy,u=n?n.tu:this.tu;let d=n?n.mutatedKeys:this.mutatedKeys,y=u,T=!1;const b=this.query.limitType==="F"&&u.size===this.query.limit?u.last():null,_=this.query.limitType==="L"&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal(((S,I)=>{const M=u.get(S),V=Vf(this.query,I)?I:null,K=!!M&&this.mutatedKeys.has(M.key),W=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let q=!1;M&&V?M.data.isEqual(V.data)?K!==W&&(o.track({type:3,doc:V}),q=!0):this.su(M,V)||(o.track({type:2,doc:V}),q=!0,(b&&this.eu(V,b)>0||_&&this.eu(V,_)<0)&&(T=!0)):!M&&V?(o.track({type:0,doc:V}),q=!0):M&&!V&&(o.track({type:1,doc:M}),q=!0,(b||_)&&(T=!0)),q&&(V?(y=y.add(V),d=W?d.add(S):d.delete(S)):(y=y.delete(S),d=d.delete(S)))})),this.query.limit!==null)for(;y.size>this.query.limit;){const S=this.query.limitType==="F"?y.last():y.first();y=y.delete(S.key),d=d.delete(S.key),o.track({type:1,doc:S})}return{tu:y,iu:o,Cs:T,mutatedKeys:d}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,o,u){const d=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const y=e.iu.ya();y.sort(((S,I)=>(function(V,K){const W=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt(20277,{Rt:q})}};return W(V)-W(K)})(S.type,I.type)||this.eu(S.doc,I.doc))),this.ou(o),u=u??!1;const T=n&&!u?this._u():[],b=this.Xa.size===0&&this.current&&!u?1:0,_=b!==this.Za;return this.Za=b,y.length!==0||_?{snapshot:new $l(this.query,e.tu,d,y,e.mutatedKeys,b===0,_,!1,!!o&&o.resumeToken.approximateByteSize()>0),au:T}:{au:T}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new dy,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=zt(),this.tu.forEach((o=>{this.uu(o.key)&&(this.Xa=this.Xa.add(o.key))}));const n=[];return e.forEach((o=>{this.Xa.has(o)||n.push(new Fw(o))})),this.Xa.forEach((o=>{e.has(o)||n.push(new jw(o))})),n}cu(e){this.Ya=e.Qs,this.Xa=zt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return $l.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Og="SyncEngine";class VN{constructor(e,n,o){this.query=e,this.targetId=n,this.view=o}}class jN{constructor(e){this.key=e,this.hu=!1}}class FN{constructor(e,n,o,u,d,y){this.localStore=e,this.remoteStore=n,this.eventManager=o,this.sharedClientState=u,this.currentUser=d,this.maxConcurrentLimboResolutions=y,this.Pu={},this.Tu=new rl((T=>aw(T)),Uf),this.Iu=new Map,this.Eu=new Set,this.du=new Xn(tt.comparator),this.Au=new Map,this.Ru=new xg,this.Vu={},this.mu=new Map,this.fu=Jl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function zN(r,e,n=!0){const o=Xw(r);let u;const d=o.Tu.get(e);return d?(o.sharedClientState.addLocalQueryTarget(d.targetId),u=d.view.lu()):u=await zw(o,e,n,!0),u}async function HN(r,e){const n=Xw(r);await zw(n,e,!0,!1)}async function zw(r,e,n,o){const u=await cN(r.localStore,Hs(e)),d=u.targetId,y=r.sharedClientState.addLocalQueryTarget(d,n);let T;return o&&(T=await GN(r,e,d,y==="current",u.resumeToken)),r.isPrimaryClient&&n&&Lw(r.remoteStore,u),T}async function GN(r,e,n,o,u){r.pu=(I,M,V)=>(async function(W,q,le,ae){let ee=q.view.ru(le);ee.Cs&&(ee=await oy(W.localStore,q.query,!1).then((({documents:z})=>q.view.ru(z,ee))));const fe=ae&&ae.targetChanges.get(q.targetId),je=ae&&ae.targetMismatches.get(q.targetId)!=null,De=q.view.applyChanges(ee,W.isPrimaryClient,fe,je);return xy(W,q.targetId,De.au),De.snapshot})(r,I,M,V);const d=await oy(r.localStore,e,!0),y=new UN(e,d.Qs),T=y.ru(d.documents),b=Au.createSynthesizedTargetChangeForCurrentChange(n,o&&r.onlineState!=="Offline",u),_=y.applyChanges(T,r.isPrimaryClient,b);xy(r,n,_.au);const S=new VN(e,n,y);return r.Tu.set(e,S),r.Iu.has(n)?r.Iu.get(n).push(e):r.Iu.set(n,[e]),_.snapshot}async function YN(r,e,n){const o=xt(r),u=o.Tu.get(e),d=o.Iu.get(u.targetId);if(d.length>1)return o.Iu.set(u.targetId,d.filter((y=>!Uf(y,e)))),void o.Tu.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(u.targetId),o.sharedClientState.isActiveQueryTarget(u.targetId)||await P1(o.localStore,u.targetId,!1).then((()=>{o.sharedClientState.clearQueryState(u.targetId),n&&wg(o.remoteStore,u.targetId),U1(o,u.targetId)})).catch(ic)):(U1(o,u.targetId),await P1(o.localStore,u.targetId,!0))}async function qN(r,e){const n=xt(r),o=n.Tu.get(e),u=n.Iu.get(o.targetId);n.isPrimaryClient&&u.length===1&&(n.sharedClientState.removeLocalQueryTarget(o.targetId),wg(n.remoteStore,o.targetId))}async function XN(r,e,n){const o=e6(r);try{const u=await(function(y,T){const b=xt(y),_=Ln.now(),S=T.reduce(((V,K)=>V.add(K.key)),zt());let I,M;return b.persistence.runTransaction("Locally write mutations","readwrite",(V=>{let K=Ia(),W=zt();return b.Ns.getEntries(V,S).next((q=>{K=q,K.forEach(((le,ae)=>{ae.isValidDocument()||(W=W.add(le))}))})).next((()=>b.localDocuments.getOverlayedDocuments(V,K))).next((q=>{I=q;const le=[];for(const ae of T){const ee=lI(ae,I.get(ae.key).overlayedDocument);ee!=null&&le.push(new To(ae.key,ee,J_(ee.value.mapValue),Di.exists(!0)))}return b.mutationQueue.addMutationBatch(V,_,le,T)})).next((q=>{M=q;const le=q.applyToLocalDocumentSet(I,W);return b.documentOverlayCache.saveOverlays(V,q.batchId,le)}))})).then((()=>({batchId:M.batchId,changes:cw(I)})))})(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),(function(y,T,b){let _=y.Vu[y.currentUser.toKey()];_||(_=new Xn(Ft)),_=_.insert(T,b),y.Vu[y.currentUser.toKey()]=_})(o,u.batchId,n),await vu(o,u.changes),await qf(o.remoteStore)}catch(u){const d=Cg(u,"Failed to persist write");n.reject(d)}}async function Hw(r,e){const n=xt(r);try{const o=await aN(n.localStore,e);e.targetChanges.forEach(((u,d)=>{const y=n.Au.get(d);y&&(un(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1,22616),u.addedDocuments.size>0?y.hu=!0:u.modifiedDocuments.size>0?un(y.hu,14607):u.removedDocuments.size>0&&(un(y.hu,42227),y.hu=!1))})),await vu(n,o,e)}catch(o){await ic(o)}}function py(r,e,n){const o=xt(r);if(o.isPrimaryClient&&n===0||!o.isPrimaryClient&&n===1){const u=[];o.Tu.forEach(((d,y)=>{const T=y.view.va(e);T.snapshot&&u.push(T.snapshot)})),(function(y,T){const b=xt(y);b.onlineState=T;let _=!1;b.queries.forEach(((S,I)=>{for(const M of I.Sa)M.va(T)&&(_=!0)})),_&&Ng(b)})(o.eventManager,e),u.length&&o.Pu.H_(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}async function KN(r,e,n){const o=xt(r);o.sharedClientState.updateQueryState(e,"rejected",n);const u=o.Au.get(e),d=u&&u.key;if(d){let y=new Xn(tt.comparator);y=y.insert(d,ii.newNoDocument(d,dt.min()));const T=zt().add(d),b=new Hf(dt.min(),new Map,new Xn(Ft),y,T);await Hw(o,b),o.du=o.du.remove(d),o.Au.delete(e),Dg(o)}else await P1(o.localStore,e,!1).then((()=>U1(o,e,n))).catch(ic)}async function WN(r,e){const n=xt(r),o=e.batch.batchId;try{const u=await sN(n.localStore,e);Yw(n,o,null),Gw(n,o),n.sharedClientState.updateMutationState(o,"acknowledged"),await vu(n,u)}catch(u){await ic(u)}}async function QN(r,e,n){const o=xt(r);try{const u=await(function(y,T){const b=xt(y);return b.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let S;return b.mutationQueue.lookupMutationBatch(_,T).next((I=>(un(I!==null,37113),S=I.keys(),b.mutationQueue.removeMutationBatch(_,I)))).next((()=>b.mutationQueue.performConsistencyCheck(_))).next((()=>b.documentOverlayCache.removeOverlaysForBatchId(_,S,T))).next((()=>b.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,S))).next((()=>b.localDocuments.getDocuments(_,S)))}))})(o.localStore,e);Yw(o,e,n),Gw(o,e),o.sharedClientState.updateMutationState(e,"rejected",n),await vu(o,u)}catch(u){await ic(u)}}function Gw(r,e){(r.mu.get(e)||[]).forEach((n=>{n.resolve()})),r.mu.delete(e)}function Yw(r,e,n){const o=xt(r);let u=o.Vu[o.currentUser.toKey()];if(u){const d=u.get(e);d&&(n?d.reject(n):d.resolve(),u=u.remove(e)),o.Vu[o.currentUser.toKey()]=u}}function U1(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const o of r.Iu.get(e))r.Tu.delete(o),n&&r.Pu.yu(o,n);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((o=>{r.Ru.containsKey(o)||qw(r,o)}))}function qw(r,e){r.Eu.delete(e.path.canonicalString());const n=r.du.get(e);n!==null&&(wg(r.remoteStore,n),r.du=r.du.remove(e),r.Au.delete(n),Dg(r))}function xy(r,e,n){for(const o of n)o instanceof jw?(r.Ru.addReference(o.key,e),ZN(r,o)):o instanceof Fw?(Ge(Og,"Document no longer in limbo: "+o.key),r.Ru.removeReference(o.key,e),r.Ru.containsKey(o.key)||qw(r,o.key)):lt(19791,{wu:o})}function ZN(r,e){const n=e.key,o=n.path.canonicalString();r.du.get(n)||r.Eu.has(o)||(Ge(Og,"New document in limbo: "+n),r.Eu.add(o),Dg(r))}function Dg(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const n=new tt(In.fromString(e)),o=r.fu.next();r.Au.set(o,new jN(n)),r.du=r.du.insert(n,o),Lw(r.remoteStore,new co(Hs(kf(n.path)),o,"TargetPurposeLimboResolution",Lf.ce))}}async function vu(r,e,n){const o=xt(r),u=[],d=[],y=[];o.Tu.isEmpty()||(o.Tu.forEach(((T,b)=>{y.push(o.pu(b,e,n).then((_=>{var S;if((_||n)&&o.isPrimaryClient){const I=_?!_.fromCache:(S=n==null?void 0:n.targetChanges.get(b.targetId))==null?void 0:S.current;o.sharedClientState.updateQueryState(b.targetId,I?"current":"not-current")}if(_){u.push(_);const I=Eg.As(b.targetId,_);d.push(I)}})))})),await Promise.all(y),o.Pu.H_(u),await(async function(b,_){const S=xt(b);try{await S.persistence.runTransaction("notifyLocalViewChanges","readwrite",(I=>Ie.forEach(_,(M=>Ie.forEach(M.Es,(V=>S.persistence.referenceDelegate.addReference(I,M.targetId,V))).next((()=>Ie.forEach(M.ds,(V=>S.persistence.referenceDelegate.removeReference(I,M.targetId,V)))))))))}catch(I){if(!sc(I))throw I;Ge(_g,"Failed to update sequence numbers: "+I)}for(const I of _){const M=I.targetId;if(!I.fromCache){const V=S.Ms.get(M),K=V.snapshotVersion,W=V.withLastLimboFreeSnapshotVersion(K);S.Ms=S.Ms.insert(M,W)}}})(o.localStore,d))}async function JN(r,e){const n=xt(r);if(!n.currentUser.isEqual(e)){Ge(Og,"User change. New user:",e.toKey());const o=await Rw(n.localStore,e);n.currentUser=e,(function(d,y){d.mu.forEach((T=>{T.forEach((b=>{b.reject(new ze(Ce.CANCELLED,y))}))})),d.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),await vu(n,o.Ls)}}function $N(r,e){const n=xt(r),o=n.Au.get(e);if(o&&o.hu)return zt().add(o.key);{let u=zt();const d=n.Iu.get(e);if(!d)return u;for(const y of d){const T=n.Tu.get(y);u=u.unionWith(T.view.nu)}return u}}function Xw(r){const e=xt(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Hw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$N.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=KN.bind(null,e),e.Pu.H_=BN.bind(null,e.eventManager),e.Pu.yu=kN.bind(null,e.eventManager),e}function e6(r){const e=xt(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=WN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=QN.bind(null,e),e}class wf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return iN(this.persistence,new tN,e.initialUser,this.serializer)}Cu(e){return new Nw(yg.mi,this.serializer)}Du(e){return new hN}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wf.provider={build:()=>new wf};class t6 extends wf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){un(this.persistence.referenceDelegate instanceof Ef,46915);const o=this.persistence.referenceDelegate.garbageCollector;return new jI(o,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ni.withCacheSize(this.cacheSizeBytes):Ni.DEFAULT;return new Nw((o=>Ef.mi(o,n)),this.serializer)}}class V1{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>py(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=JN.bind(null,this.syncEngine),await MN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new PN})()}createDatastore(e){const n=Gf(e.databaseInfo.databaseId),o=(function(d){return new pN(d)})(e.databaseInfo);return(function(d,y,T,b){return new _N(d,y,T,b)})(e.authCredentials,e.appCheckCredentials,o,n)}createRemoteStore(e){return(function(o,u,d,y,T){return new AN(o,u,d,y,T)})(this.localStore,this.datastore,e.asyncQueue,(n=>py(this.syncEngine,n,0)),(function(){return uy.v()?new uy:new fN})())}createSyncEngine(e,n){return(function(u,d,y,T,b,_,S){const I=new FN(u,d,y,T,b,_);return S&&(I.gu=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(u){const d=xt(u);Ge(el,"RemoteStore shutting down."),d.Ea.add(5),await bu(d),d.Aa.shutdown(),d.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}V1.provider={build:()=>new V1};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Sa("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao="FirestoreClient";class n6{constructor(e,n,o,u,d){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=o,this.databaseInfo=u,this.user=ri.UNAUTHENTICATED,this.clientId=og.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=d,this.authCredentials.start(o,(async y=>{Ge(Ao,"Received user=",y.uid),await this.authCredentialListener(y),this.user=y})),this.appCheckCredentials.start(o,(y=>(Ge(Ao,"Received new app check token=",y),this.appCheckCredentialListener(y,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new va;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const o=Cg(n,"Failed to shutdown persistence");e.reject(o)}})),e.promise}}async function a1(r,e){r.asyncQueue.verifyOperationInProgress(),Ge(Ao,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let o=n.initialUser;r.setCredentialChangeListener((async u=>{o.isEqual(u)||(await Rw(e.localStore,u),o=u)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function yy(r,e){r.asyncQueue.verifyOperationInProgress();const n=await r6(r);Ge(Ao,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener((o=>fy(e.remoteStore,o))),r.setAppCheckTokenChangeListener(((o,u)=>fy(e.remoteStore,u))),r._onlineComponents=e}async function r6(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Ge(Ao,"Using user provided OfflineComponentProvider");try{await a1(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(u){return u.name==="FirebaseError"?u.code===Ce.FAILED_PRECONDITION||u.code===Ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||u.code===22||u.code===20||u.code===11})(n))throw n;Kl("Error using user provided cache. Falling back to memory cache: "+n),await a1(r,new wf)}}else Ge(Ao,"Using default OfflineComponentProvider"),await a1(r,new t6(void 0));return r._offlineComponents}async function Kw(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Ge(Ao,"Using user provided OnlineComponentProvider"),await yy(r,r._uninitializedComponentsProvider._online)):(Ge(Ao,"Using default OnlineComponentProvider"),await yy(r,new V1))),r._onlineComponents}function i6(r){return Kw(r).then((e=>e.syncEngine))}async function Af(r){const e=await Kw(r),n=e.eventManager;return n.onListen=zN.bind(null,e.syncEngine),n.onUnlisten=YN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=HN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=qN.bind(null,e.syncEngine),n}function s6(r,e,n={}){const o=new va;return r.asyncQueue.enqueueAndForget((async()=>(function(d,y,T,b,_){const S=new Mg({next:M=>{S.Nu(),y.enqueueAndForget((()=>Ig(d,I)));const V=M.docs.has(T);!V&&M.fromCache?_.reject(new ze(Ce.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&M.fromCache&&b&&b.source==="server"?_.reject(new ze(Ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(M)},error:M=>_.reject(M)}),I=new Rg(kf(T.path),S,{includeMetadataChanges:!0,qa:!0});return Sg(d,I)})(await Af(r),r.asyncQueue,e,n,o))),o.promise}function a6(r,e,n={}){const o=new va;return r.asyncQueue.enqueueAndForget((async()=>(function(d,y,T,b,_){const S=new Mg({next:M=>{S.Nu(),y.enqueueAndForget((()=>Ig(d,I))),M.fromCache&&b.source==="server"?_.reject(new ze(Ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(M)},error:M=>_.reject(M)}),I=new Rg(T,S,{includeMetadataChanges:!0,qa:!0});return Sg(d,I)})(await Af(r),r.asyncQueue,e,n,o))),o.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ww(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw="firestore.googleapis.com",_y=!0;class wy{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ze(Ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Qw,this.ssl=_y}else this.host=e.host,this.ssl=e.ssl??_y;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Iw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<UI)throw new ze(Ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}A4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ww(e.experimentalLongPollingOptions??{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ze(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ze(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ze(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(o,u){return o.timeoutSeconds===u.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xf{constructor(e,n,o,u){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ze(Ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ze(Ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(o){if(!o)return new f4;switch(o.type){case"firstParty":return new p4(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new ze(Ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const o=Ey.get(n);o&&(Ge("ComponentProvider","Removing Datastore"),Ey.delete(n),o.terminate())})(this),Promise.resolve()}}function o6(r,e,n,o={}){var _;r=Oi(r,Xf);const u=ig(e),d=r._getSettings(),y={...d,emulatorOptions:r._getEmulatorOptions()},T=`${e}:${n}`;u&&(FC(`https://${T}`),YC("Firestore",!0)),d.host!==Qw&&d.host!==T&&Kl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const b={...d,host:T,ssl:u,emulatorOptions:o};if(!lf(b,y)&&(r._setSettings(b),o.mockUserToken)){let S,I;if(typeof o.mockUserToken=="string")S=o.mockUserToken,I=ri.MOCK_USER;else{S=zC(o.mockUserToken,(_=r._app)==null?void 0:_.options.projectId);const M=o.mockUserToken.sub||o.mockUserToken.user_id;if(!M)throw new ze(Ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");I=new ri(M)}r._authCredentials=new d4(new j_(S,I))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e,n,o){this.converter=n,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new sl(this.firestore,e,this._query)}}class tr{constructor(e,n,o){this.converter=n,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new tr(this.firestore,e,this._key)}toJSON(){return{type:tr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,o){if(Eu(n,tr._jsonSchema))return new tr(e,o||null,new tt(In.fromString(n.referencePath)))}}tr._jsonSchemaVersion="firestore/documentReference/1.0",tr._jsonSchema={type:yr("string",tr._jsonSchemaVersion),referencePath:yr("string")};class mo extends sl{constructor(e,n,o){super(e,n,kf(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new tr(this.firestore,null,new tt(e))}withConverter(e){return new mo(this.firestore,e,this._path)}}function _s(r,e,...n){if(r=xs(r),F_("collection","path",e),r instanceof Xf){const o=In.fromString(e,...n);return Lx(o),new mo(r,null,o)}{if(!(r instanceof tr||r instanceof mo))throw new ze(Ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=r._path.child(In.fromString(e,...n));return Lx(o),new mo(r.firestore,null,o)}}function yn(r,e,...n){if(r=xs(r),arguments.length===1&&(e=og.newId()),F_("doc","path",e),r instanceof Xf){const o=In.fromString(e,...n);return Mx(o),new tr(r,null,new tt(o))}{if(!(r instanceof tr||r instanceof mo))throw new ze(Ce.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=r._path.child(In.fromString(e,...n));return Mx(o),new tr(r.firestore,r instanceof mo?r.converter:null,new tt(o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay="AsyncQueue";class by{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Dw(this,"async_queue_retry"),this._c=()=>{const o=s1();o&&Ge(Ay,"Visibility state changed to "+o.visibilityState),this.M_.w_()},this.ac=e;const n=s1();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=s1();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new va;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!sc(e))throw e;Ge(Ay,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((o=>{throw this.nc=o,this.rc=!1,Sa("INTERNAL UNHANDLED ERROR: ",vy(o)),o})).then((o=>(this.rc=!1,o))))));return this.ac=n,n}enqueueAfterDelay(e,n,o){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const u=Tg.createAndSchedule(this,e,n,o,(d=>this.hc(d)));return this.tc.push(u),u}uc(){this.nc&&lt(47125,{Pc:vy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,o)=>n.targetTimeMs-o.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function vy(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ty(r){return(function(n,o){if(typeof n!="object"||n===null)return!1;const u=n;for(const d of o)if(d in u&&typeof u[d]=="function")return!0;return!1})(r,["next","error","complete"])}class Na extends Xf{constructor(e,n,o,u){super(e,n,o,u),this.type="firestore",this._queue=new by,this._persistenceKey=(u==null?void 0:u.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new by(e),this._firestoreClient=void 0,await e}}}function l6(r,e){const n=typeof r=="object"?r:t4(),o=typeof r=="string"?r:ff,u=QS(n,"firestore").getImmediate({identifier:o});if(!u._initialized){const d=VC("firestore");d&&o6(u,...d)}return u}function Tu(r){if(r._terminated)throw new ze(Ce.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||c6(r),r._firestoreClient}function c6(r){var o,u,d;const e=r._freezeSettings(),n=(function(T,b,_,S){return new M4(T,b,_,S.host,S.ssl,S.experimentalForceLongPolling,S.experimentalAutoDetectLongPolling,Ww(S.experimentalLongPollingOptions),S.useFetchStreams,S.isUsingEmulator)})(r._databaseId,((o=r._app)==null?void 0:o.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(u=e.localCache)!=null&&u._offlineComponentProvider&&((d=e.localCache)!=null&&d._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new n6(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(T){const b=T==null?void 0:T._online.build();return{_offline:T==null?void 0:T._offline.build(b),_online:b}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gs(zr.fromBase64String(e))}catch(n){throw new ze(Ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new gs(zr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:gs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Eu(e,gs._jsonSchema))return gs.fromBase64String(e.bytes)}}gs._jsonSchemaVersion="firestore/bytes/1.0",gs._jsonSchema={type:yr("string",gs._jsonSchemaVersion),bytes:yr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ze(Ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ze(Ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ze(Ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ft(this._lat,e._lat)||Ft(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ys._jsonSchemaVersion}}static fromJSON(e){if(Eu(e,Ys._jsonSchema))return new Ys(e.latitude,e.longitude)}}Ys._jsonSchemaVersion="firestore/geoPoint/1.0",Ys._jsonSchema={type:yr("string",Ys._jsonSchemaVersion),latitude:yr("number"),longitude:yr("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(o,u){if(o.length!==u.length)return!1;for(let d=0;d<o.length;++d)if(o[d]!==u[d])return!1;return!0})(this._values,e._values)}toJSON(){return{type:qs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Eu(e,qs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new qs(e.vectorValues);throw new ze(Ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}qs._jsonSchemaVersion="firestore/vectorValue/1.0",qs._jsonSchema={type:yr("string",qs._jsonSchemaVersion),vectorValues:yr("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u6=/^__.*__$/;class h6{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return this.fieldMask!==null?new To(e,this.data,this.fieldMask,n,this.fieldTransforms):new wu(e,this.data,n,this.fieldTransforms)}}class Zw{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return new To(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Jw(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt(40011,{Ac:r})}}class Pg{constructor(e,n,o,u,d,y){this.settings=e,this.databaseId=n,this.serializer=o,this.ignoreUndefinedProperties=u,d===void 0&&this.Rc(),this.fieldTransforms=d||[],this.fieldMask=y||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Pg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var u;const n=(u=this.path)==null?void 0:u.child(e),o=this.Vc({path:n,fc:!1});return o.gc(e),o}yc(e){var u;const n=(u=this.path)==null?void 0:u.child(e),o=this.Vc({path:n,fc:!1});return o.Rc(),o}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return bf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Jw(this.Ac)&&u6.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class f6{constructor(e,n,o){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=o||Gf(e)}Cc(e,n,o,u=!1){return new Pg({Ac:e,methodName:n,Dc:o,path:Fr.emptyPath(),fc:!1,bc:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Kf(r){const e=r._freezeSettings(),n=Gf(r._databaseId);return new f6(r._databaseId,!!e.ignoreUndefinedProperties,n)}function $w(r,e,n,o,u,d={}){const y=r.Cc(d.merge||d.mergeFields?2:0,e,n,u);Bg("Data must be an object, but it was:",y,o);const T=nA(o,y);let b,_;if(d.merge)b=new Xi(y.fieldMask),_=y.fieldTransforms;else if(d.mergeFields){const S=[];for(const I of d.mergeFields){const M=j1(e,I,n);if(!y.contains(M))throw new ze(Ce.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);iA(S,M)||S.push(M)}b=new Xi(S),_=y.fieldTransforms.filter((I=>b.covers(I.field)))}else b=null,_=y.fieldTransforms;return new h6(new Ri(T),b,_)}class Wf extends Lg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Wf}}function eA(r,e,n,o){const u=r.Cc(1,e,n);Bg("Data must be an object, but it was:",u,o);const d=[],y=Ri.empty();vo(o,((b,_)=>{const S=kg(e,b,n);_=xs(_);const I=u.yc(S);if(_ instanceof Wf)d.push(S);else{const M=Su(_,I);M!=null&&(d.push(S),y.set(S,M))}}));const T=new Xi(d);return new Zw(y,T,u.fieldTransforms)}function tA(r,e,n,o,u,d){const y=r.Cc(1,e,n),T=[j1(e,o,n)],b=[u];if(d.length%2!=0)throw new ze(Ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let M=0;M<d.length;M+=2)T.push(j1(e,d[M])),b.push(d[M+1]);const _=[],S=Ri.empty();for(let M=T.length-1;M>=0;--M)if(!iA(_,T[M])){const V=T[M];let K=b[M];K=xs(K);const W=y.yc(V);if(K instanceof Wf)_.push(V);else{const q=Su(K,W);q!=null&&(_.push(V),S.set(V,q))}}const I=new Xi(_);return new Zw(S,I,y.fieldTransforms)}function d6(r,e,n,o=!1){return Su(n,r.Cc(o?4:3,e))}function Su(r,e){if(rA(r=xs(r)))return Bg("Unsupported field value:",e,r),nA(r,e);if(r instanceof Lg)return(function(o,u){if(!Jw(u.Ac))throw u.Sc(`${o._methodName}() can only be used with update() and set()`);if(!u.path)throw u.Sc(`${o._methodName}() is not currently supported inside arrays`);const d=o._toFieldTransform(u);d&&u.fieldTransforms.push(d)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(o,u){const d=[];let y=0;for(const T of o){let b=Su(T,u.wc(y));b==null&&(b={nullValue:"NULL_VALUE"}),d.push(b),y++}return{arrayValue:{values:d}}})(r,e)}return(function(o,u){if((o=xs(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return nI(u.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){const d=Ln.fromDate(o);return{timestampValue:yf(u.serializer,d)}}if(o instanceof Ln){const d=new Ln(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:yf(u.serializer,d)}}if(o instanceof Ys)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof gs)return{bytesValue:ww(u.serializer,o._byteString)};if(o instanceof tr){const d=u.databaseId,y=o.firestore._databaseId;if(!y.isEqual(d))throw u.Sc(`Document reference is for database ${y.projectId}/${y.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:pg(o.firestore._databaseId||u.databaseId,o._key.path)}}if(o instanceof qs)return(function(y,T){return{mapValue:{fields:{[Q_]:{stringValue:Z_},[df]:{arrayValue:{values:y.toArray().map((_=>{if(typeof _!="number")throw T.Sc("VectorValues must only contain numeric values.");return dg(T.serializer,_)}))}}}}}})(o,u);throw u.Sc(`Unsupported field value: ${Mf(o)}`)})(r,e)}function nA(r,e){const n={};return G_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vo(r,((o,u)=>{const d=Su(u,e.mc(o));d!=null&&(n[o]=d)})),{mapValue:{fields:n}}}function rA(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Ln||r instanceof Ys||r instanceof gs||r instanceof tr||r instanceof Lg||r instanceof qs)}function Bg(r,e,n){if(!rA(n)||!z_(n)){const o=Mf(n);throw o==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+o)}}function j1(r,e,n){if((e=xs(e))instanceof Cu)return e._internalPath;if(typeof e=="string")return kg(r,e);throw bf("Field path arguments must be of type string or ",r,!1,void 0,n)}const g6=new RegExp("[~\\*/\\[\\]]");function kg(r,e,n){if(e.search(g6)>=0)throw bf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Cu(...e.split("."))._internalPath}catch{throw bf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function bf(r,e,n,o,u){const d=o&&!o.isEmpty(),y=u!==void 0;let T=`Function ${e}() called with invalid data`;n&&(T+=" (via `toFirestore()`)"),T+=". ";let b="";return(d||y)&&(b+=" (found",d&&(b+=` in field ${o}`),y&&(b+=` in document ${u}`),b+=")"),new ze(Ce.INVALID_ARGUMENT,T+r+b)}function iA(r,e){return r.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e,n,o,u,d){this._firestore=e,this._userDataWriter=n,this._key=o,this._document=u,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new tr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new m6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(aA("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class m6 extends sA{data(){return super.data()}}function aA(r,e){return typeof e=="string"?kg(r,e):e instanceof Cu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ze(Ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ug{}class p6 extends Ug{}function lA(r,e,...n){let o=[];e instanceof Ug&&o.push(e),o=o.concat(n),(function(d){const y=d.filter((b=>b instanceof jg)).length,T=d.filter((b=>b instanceof Vg)).length;if(y>1||y>0&&T>0)throw new ze(Ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(o);for(const u of o)r=u._apply(r);return r}class Vg extends p6{constructor(e,n,o){super(),this._field=e,this._op=n,this._value=o,this.type="where"}static _create(e,n,o){return new Vg(e,n,o)}_apply(e){const n=this._parse(e);return cA(e._query,n),new sl(e.firestore,e.converter,N1(e._query,n))}_parse(e){const n=Kf(e.firestore);return(function(d,y,T,b,_,S,I){let M;if(_.isKeyField()){if(S==="array-contains"||S==="array-contains-any")throw new ze(Ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${S}' queries on documentId().`);if(S==="in"||S==="not-in"){Sy(I,S);const K=[];for(const W of I)K.push(Cy(b,d,W));M={arrayValue:{values:K}}}else M=Cy(b,d,I)}else S!=="in"&&S!=="not-in"&&S!=="array-contains-any"||Sy(I,S),M=d6(T,y,I,S==="in"||S==="not-in");return xr.create(_,S,M)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class jg extends Ug{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new jg(e,n)}_parse(e){const n=this._queryConstraints.map((o=>o._parse(e))).filter((o=>o.getFilters().length>0));return n.length===1?n[0]:Ns.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(u,d){let y=u;const T=d.getFlattenedFilters();for(const b of T)cA(y,b),y=N1(y,b)})(e._query,n),new sl(e.firestore,e.converter,N1(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Cy(r,e,n){if(typeof(n=xs(n))=="string"){if(n==="")throw new ze(Ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sw(e)&&n.indexOf("/")!==-1)throw new ze(Ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const o=e.path.child(In.fromString(n));if(!tt.isDocumentKey(o))throw new ze(Ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return zx(r,new tt(o))}if(n instanceof tr)return zx(r,n._key);throw new ze(Ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Mf(n)}.`)}function Sy(r,e){if(!Array.isArray(r)||r.length===0)throw new ze(Ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function cA(r,e){const n=(function(u,d){for(const y of u)for(const T of y.getFlattenedFilters())if(d.indexOf(T.op)>=0)return T.op;return null})(r.filters,(function(u){switch(u){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ze(Ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ze(Ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class x6{convertValue(e,n="none"){switch(_o(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Eo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw lt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const o={};return vo(e,((u,d)=>{o[u]=this.convertValue(d,n)})),o}convertVectorValue(e){var o,u,d;const n=(d=(u=(o=e.fields)==null?void 0:o[df].arrayValue)==null?void 0:u.values)==null?void 0:d.map((y=>lr(y.doubleValue)));return new qs(n)}convertGeoPoint(e){return new Ys(lr(e.latitude),lr(e.longitude))}convertArray(e,n){return(e.values||[]).map((o=>this.convertValue(o,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const o=Bf(e);return o==null?null:this.convertValue(o,n);case"estimate":return this.convertTimestamp(uu(e));default:return null}}convertTimestamp(e){const n=yo(e);return new Ln(n.seconds,n.nanos)}convertDocumentKey(e,n){const o=In.fromString(e);un(Sw(o),9688,{name:e});const u=new hu(o.get(1),o.get(3)),d=new tt(o.popFirst(5));return u.isEqual(n)||Sa(`Document ${d} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(r,e,n){let o;return o=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,o}class Kc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zo extends sA{constructor(e,n,o,u,d,y){super(e,n,o,u,y),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ef(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const o=this._document.data.field(aA("DocumentSnapshot.get",e));if(o!==null)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ze(Ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Zo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Zo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Zo._jsonSchema={type:yr("string",Zo._jsonSchemaVersion),bundleSource:yr("string","DocumentSnapshot"),bundleName:yr("string"),bundle:yr("string")};class ef extends Zo{data(e={}){return super.data(e)}}class Jo{constructor(e,n,o,u){this._firestore=e,this._userDataWriter=n,this._snapshot=u,this.metadata=new Kc(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((o=>{e.call(n,new ef(this._firestore,this._userDataWriter,o.key,o,new Kc(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ze(Ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(u,d){if(u._snapshot.oldDocs.isEmpty()){let y=0;return u._snapshot.docChanges.map((T=>{const b=new ef(u._firestore,u._userDataWriter,T.doc.key,T.doc,new Kc(u._snapshot.mutatedKeys.has(T.doc.key),u._snapshot.fromCache),u.query.converter);return T.doc,{type:"added",doc:b,oldIndex:-1,newIndex:y++}}))}{let y=u._snapshot.oldDocs;return u._snapshot.docChanges.filter((T=>d||T.type!==3)).map((T=>{const b=new ef(u._firestore,u._userDataWriter,T.doc.key,T.doc,new Kc(u._snapshot.mutatedKeys.has(T.doc.key),u._snapshot.fromCache),u.query.converter);let _=-1,S=-1;return T.type!==0&&(_=y.indexOf(T.doc.key),y=y.delete(T.doc.key)),T.type!==1&&(y=y.add(T.doc),S=y.indexOf(T.doc.key)),{type:y6(T.type),doc:b,oldIndex:_,newIndex:S}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ze(Ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Jo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=og.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],o=[],u=[];return this.docs.forEach((d=>{d._document!==null&&(n.push(d._document),o.push(this._userDataWriter.convertObjectMap(d._document.data.value.mapValue.fields,"previous")),u.push(d.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function y6(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lt(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vf(r){r=Oi(r,tr);const e=Oi(r.firestore,Na);return s6(Tu(e),r._key).then((n=>hA(e,r,n)))}Jo._jsonSchemaVersion="firestore/querySnapshot/1.0",Jo._jsonSchema={type:yr("string",Jo._jsonSchemaVersion),bundleSource:yr("string","QuerySnapshot"),bundleName:yr("string"),bundle:yr("string")};class Fg extends x6{constructor(e){super(),this.firestore=e}convertBytes(e){return new gs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new tr(this.firestore,null,n)}}function zg(r){r=Oi(r,sl);const e=Oi(r.firestore,Na),n=Tu(e),o=new Fg(e);return oA(r._query),a6(n,r._query).then((u=>new Jo(e,o,r,u)))}function Ks(r,e,n){r=Oi(r,tr);const o=Oi(r.firestore,Na),u=uA(r.converter,e,n);return Qf(o,[$w(Kf(o),"setDoc",r._key,u,r.converter!==null,n).toMutation(r._key,Di.none())])}function Ra(r,e,n,...o){r=Oi(r,tr);const u=Oi(r.firestore,Na),d=Kf(u);let y;return y=typeof(e=xs(e))=="string"||e instanceof Cu?tA(d,"updateDoc",r._key,e,n,o):eA(d,"updateDoc",r._key,e),Qf(u,[y.toMutation(r._key,Di.exists(!0))])}function Iu(r){return Qf(Oi(r.firestore,Na),[new zf(r._key,Di.none())])}function Da(r,...e){var b,_,S;r=xs(r);let n={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Ty(e[o])||(n=e[o++]);const u={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Ty(e[o])){const I=e[o];e[o]=(b=I.next)==null?void 0:b.bind(I),e[o+1]=(_=I.error)==null?void 0:_.bind(I),e[o+2]=(S=I.complete)==null?void 0:S.bind(I)}let d,y,T;if(r instanceof tr)y=Oi(r.firestore,Na),T=kf(r._key.path),d={next:I=>{e[o]&&e[o](hA(y,r,I))},error:e[o+1],complete:e[o+2]};else{const I=Oi(r,sl);y=Oi(I.firestore,Na),T=I._query;const M=new Fg(y);d={next:V=>{e[o]&&e[o](new Jo(y,M,I,V))},error:e[o+1],complete:e[o+2]},oA(r._query)}return(function(M,V,K,W){const q=new Mg(W),le=new Rg(V,q,K);return M.asyncQueue.enqueueAndForget((async()=>Sg(await Af(M),le))),()=>{q.Nu(),M.asyncQueue.enqueueAndForget((async()=>Ig(await Af(M),le)))}})(Tu(y),T,u,d)}function Qf(r,e){return(function(o,u){const d=new va;return o.asyncQueue.enqueueAndForget((async()=>XN(await i6(o),u,d))),d.promise})(Tu(r),e)}function hA(r,e,n){const o=n.docs.get(e._key),u=new Fg(r);return new Zo(r,u,e._key,o,new Kc(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E6{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Kf(e)}set(e,n,o){this._verifyNotCommitted();const u=o1(e,this._firestore),d=uA(u.converter,n,o),y=$w(this._dataReader,"WriteBatch.set",u._key,d,u.converter!==null,o);return this._mutations.push(y.toMutation(u._key,Di.none())),this}update(e,n,o,...u){this._verifyNotCommitted();const d=o1(e,this._firestore);let y;return y=typeof(n=xs(n))=="string"||n instanceof Cu?tA(this._dataReader,"WriteBatch.update",d._key,n,o,u):eA(this._dataReader,"WriteBatch.update",d._key,n),this._mutations.push(y.toMutation(d._key,Di.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=o1(e,this._firestore);return this._mutations=this._mutations.concat(new zf(n._key,Di.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ze(Ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function o1(r,e){if((r=xs(r)).firestore!==e)throw new ze(Ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zf(r){return Tu(r=Oi(r,Na)),new E6(r,(e=>Qf(r,e)))}(function(e,n=!0){(function(u){rc=u})(e4),uf(new ou("firestore",((o,{instanceIdentifier:u,options:d})=>{const y=o.getProvider("app").getImmediate(),T=new Na(new g4(o.getProvider("auth-internal")),new x4(y,o.getProvider("app-check-internal")),(function(_,S){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new ze(Ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hu(_.options.projectId,S)})(y,u),y);return d={useFetchStreams:n,...d},T._setSettings(d),T}),"PUBLIC").setMultipleInstances(!0)),Gl(Nx,Rx,e),Gl(Nx,Rx,"esm2020")})();var _6="firebase",w6="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gl(_6,w6,"app");const A6={apiKey:"AIzaSyDYZ6VUaaDmy-AvS4D9cM3zkN0Vg4lStuk",authDomain:"workshop-36cbe.firebaseapp.com",projectId:"workshop-36cbe",storageBucket:"workshop-36cbe.firebasestorage.app",messagingSenderId:"742601440632",appId:"1:742601440632:web:48e380f7e1441494ba9c8d"},b6=R_(A6),yt=l6(b6);var ms=(r=>(r.STUDENT="STUDENT",r.ADMIN="ADMIN",r.GUEST="GUEST",r))(ms||{});const v6=[{id:"p1",name:"",category:"food",price:150,description:"",imageUrl:"https://images.unsplash.com/photo-1558961363-fa8fdf82db35?q=80&w=400&h=300&auto=format&fit=crop",stock:12},{id:"p2",name:"",category:"food",price:80,description:"",imageUrl:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTd073NRJm_EnCeDAQmJCtozQj3hVaKtDXggA&s",stock:45},{id:"p3",name:"",category:"electronic",price:12e3,description:"",imageUrl:"https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?q=80&w=400&h=300&auto=format&fit=crop",stock:1},{id:"p4",name:"",category:"ticket",price:320,description:"",imageUrl:"https://images.unsplash.com/photo-1489599849927-2ee91cede3ba?q=80&w=400&h=300&auto=format&fit=crop",stock:8},{id:"p5",name:"",category:"food",price:800,description:"",imageUrl:"https://images.unsplash.com/photo-1544739313-6fad02872377?q=80&w=400&h=300&auto=format&fit=crop",stock:3},{id:"p6",name:"",category:"electronic",price:2500,description:"",imageUrl:"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?q=80&w=400&h=300&auto=format&fit=crop",stock:5}],po=[{name:"",threshold:0,color:"bg-slate-400",icon:""},{name:"",threshold:500,color:"bg-blue-400",icon:""},{name:"",threshold:2e3,color:"bg-green-500",icon:""},{name:"",threshold:5e3,color:"bg-purple-500",icon:""},{name:"",threshold:1e4,color:"bg-orange-500",icon:""},{name:"",threshold:25e3,color:"bg-yellow-500",icon:""}],Hg={USER:"workshop_user"},F1=["","","","","","","",""],l1=[{text:"",author:" (William Butler Yeats)"},{text:"",author:" (Winston Churchill)"},{text:" 20  80 ",author:" (Henry Ford)"},{text:"",author:" (Nelson Mandela)"},{text:"",author:" (Steve Jobs)"},{text:"",author:""},{text:"",author:""},{text:"",author:" (Aristotle)"},{text:"",author:" (Thomas Edison)"},{text:"",author:" (Pablo Picasso)"}],Ot={STUDENTS:"students",MISSIONS:"missions",PRODUCTS:"products",WISHES:"wishes",REDEMPTIONS:"redemptions",CHALLENGE_HISTORY:"challengeHistory",POINT_REASONS:"pointReasons",MISSION_SUBMISSIONS:"missionSubmissions",PRODUCT_CATEGORIES:"productCategories",BANNERS:"banners"},fA=[{id:"user_zhou",name:"",points:1200,totalEarned:2500,role:ms.STUDENT,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Zhou",password:"123",grade:"",isApproved:!0},{id:"user_hu",name:"",points:800,totalEarned:1800,role:ms.STUDENT,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Hu",password:"123",grade:"",isApproved:!0},{id:"user_lin",name:"",points:2100,totalEarned:4200,role:ms.STUDENT,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Lin",password:"123",grade:"",isApproved:!0}],Iy={id:"user_admin",name:"",points:0,totalEarned:0,role:ms.ADMIN,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Admin",isApproved:!0},Ny={id:"user_guest",name:"",points:0,totalEarned:0,role:ms.GUEST,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Guest",isApproved:!0},dA=async()=>{try{const r=await zg(_s(yt,Ot.STUDENTS));return r.empty?(await T6(),fA):r.docs.map(e=>({...e.data(),id:e.id}))}catch(r){return console.error("Error fetching students:",r),[]}},T6=async()=>{const r=Zf(yt);fA.forEach(e=>{const n=yn(yt,Ot.STUDENTS,e.id);r.set(n,e)}),await r.commit()},mu=async r=>{try{await Ks(yn(yt,Ot.STUDENTS,r.id),r)}catch(e){console.error("Error saving student:",e),console.error("")}},C6=async r=>{const e=Zf(yt);r.forEach(n=>{const o=yn(yt,Ot.STUDENTS,n.id);e.set(o,n)}),await e.commit()},S6=async(r,e,n)=>{try{if((await dA()).some(d=>d.name===r))return!1;const u={id:`user_${Date.now()}`,name:r,password:e,grade:n,points:0,totalEarned:0,role:ms.STUDENT,avatar:`https://api.dicebear.com/7.x/avataaars/svg?seed=${r}&mouth=smile&eyebrows=defaultNatural&eyes=default`,isApproved:!1};return await mu(u),!0}catch(o){return console.error("Error registering student:",o),!1}},I6=async r=>{try{const e=yn(yt,Ot.STUDENTS,r);await Ra(e,{isApproved:!0})}catch(e){console.error("Error approving student:",e)}},N6=async r=>{try{await Iu(yn(yt,Ot.STUDENTS,r))}catch(e){console.error("Error deleting student:",e)}},Ry=()=>{const r=localStorage.getItem(Hg.USER);return r?JSON.parse(r):null},ql=async r=>{localStorage.setItem(Hg.USER,JSON.stringify(r)),r.role===ms.STUDENT&&await mu(r)},R6=()=>{localStorage.removeItem(Hg.USER)},O6=async r=>{try{await Ks(yn(yt,Ot.REDEMPTIONS,r.id),r)}catch(e){console.error("Error adding redemption:",e)}},D6=async(r,e)=>{try{const n=yn(yt,Ot.REDEMPTIONS,r);await Ra(n,{status:e})}catch(n){console.error("Error updating redemption status:",n)}},M6=async r=>{try{const e=`cat_${Date.now()}`;await Ks(yn(yt,Ot.PRODUCT_CATEGORIES,e),{id:e,name:r})}catch(e){console.error("Error adding category:",e)}},L6=async r=>{try{await Iu(yn(yt,Ot.PRODUCT_CATEGORIES,r))}catch(e){console.error("Error deleting category:",e)}},gA=r=>Da(_s(yt,Ot.PRODUCT_CATEGORIES),e=>{const n=e.docs.map(o=>({...o.data(),id:o.id}));r(n)}),P6=[{id:"m1",title:"",description:"",points:100,type:"normal",isActive:!0,maxAttempts:1},{id:"m2",title:" 80 ",description:"",points:300,type:"challenge",isActive:!0,maxAttempts:1},{id:"m3",title:" 90 ",description:"",points:1e3,type:"hard",isActive:!0,maxAttempts:1}],B6=async()=>{const r=Zf(yt);P6.forEach(e=>{const n=yn(yt,Ot.MISSIONS,e.id);r.set(n,e)}),await r.commit()},k6=async r=>{try{await Ks(yn(yt,Ot.MISSIONS,r.id),r)}catch(e){console.error("Error adding mission:",e)}},U6=async r=>{try{const e=yn(yt,Ot.MISSIONS,r),n=await vf(e);if(n.exists()){const o=n.data();await Ra(e,{isActive:!o.isActive})}}catch(e){console.error("Error toggling mission:",e)}},V6=async()=>{try{return(await zg(_s(yt,Ot.CHALLENGE_HISTORY))).docs.map(e=>({...e.data(),id:e.id}))}catch(r){return console.error("Error fetching challenge history:",r),[]}},j6=async r=>{try{const e=`${r.userId}_${r.missionId}_${Date.now()}`;await Ks(yn(yt,Ot.CHALLENGE_HISTORY,e),r)}catch(e){console.error("Error adding challenge history:",e)}},mA=async(r,e)=>{try{const n=await V6(),o=new Date;return o.setHours(0,0,0,0),n.some(u=>u.userId===r&&u.missionId===e&&u.timestamp>=o.getTime())}catch(n){return console.error("Error checking mission completion:",n),!1}},F6=async r=>{try{if(await mA(r.userId,r.missionId)){console.warn("Mission already completed today");return}const n=new Date;if(n.setHours(0,0,0,0),(await zg(lA(_s(yt,Ot.MISSION_SUBMISSIONS)))).docs.find(d=>{const y=d.data();return y.userId===r.userId&&y.missionId===r.missionId&&y.status==="pending"&&y.timestamp>=n.getTime()})){console.warn("Mission submission already pending today");return}await Ks(yn(yt,Ot.MISSION_SUBMISSIONS,r.id),r)}catch(e){console.error("Error submitting mission:",e)}},z6=async r=>{try{const e=yn(yt,Ot.MISSION_SUBMISSIONS,r),n=await vf(e);if(n.exists()){const o=n.data();await Ra(e,{status:"approved"}),await j6({id:`h_${Date.now()}`,userId:o.userId,missionId:o.missionId,timestamp:Date.now()});const u=yn(yt,Ot.STUDENTS,o.userId),d=await vf(u);if(d.exists()){const y=d.data();await Ra(u,{points:y.points+o.points,totalEarned:y.totalEarned+o.points})}}}catch(e){console.error("Error approving mission:",e)}},H6=async r=>{try{const e=yn(yt,Ot.MISSION_SUBMISSIONS,r);await Ra(e,{status:"rejected"})}catch(e){console.error("Error rejecting mission:",e)}},pA=r=>Da(_s(yt,Ot.MISSION_SUBMISSIONS),e=>{r(e.docs.map(n=>({...n.data(),id:n.id})))}),G6=async()=>{const r=Zf(yt);v6.forEach(e=>{const n=yn(yt,Ot.PRODUCTS,e.id);r.set(n,e)}),await r.commit()},Y6=async r=>{try{await Ks(yn(yt,Ot.PRODUCTS,r.id),r)}catch(e){console.error("Error adding product:",e)}},xA=async(r,e)=>{try{const n=yn(yt,Ot.PRODUCTS,r);await Ra(n,{stock:Math.max(0,e)})}catch(n){console.error("Error updating product stock:",n)}},q6=async r=>{try{await Iu(yn(yt,Ot.PRODUCTS,r))}catch(e){console.error("Error deleting product:",e)}},X6=async r=>{try{await Ks(yn(yt,Ot.POINT_REASONS,r.id),r)}catch(e){console.error("Error adding point reason:",e)}},K6=async r=>{try{await Iu(yn(yt,Ot.POINT_REASONS,r))}catch(e){console.error("Error deleting point reason:",e)}},W6=r=>Da(_s(yt,Ot.POINT_REASONS),e=>{const n=e.docs.map(o=>({...o.data(),id:o.id}));r(n)}),Q6=async r=>{try{await Ks(yn(yt,Ot.WISHES,r.id),r)}catch(e){console.error("Error adding wish:",e)}},Z6=async(r,e)=>{try{const n=yn(yt,Ot.WISHES,r);await Ra(n,e)}catch(n){console.error("Error updating wish:",n)}},J6=async(r,e)=>{try{const n=yn(yt,Ot.WISHES,r),o=await vf(n);if(o.exists()){const d=o.data().likedBy||[];if(d.includes(e)){console.error("");return}await Ra(n,{likedBy:[...d,e]})}}catch(n){console.error("Error liking wish:",n)}},$6=r=>Da(_s(yt,Ot.STUDENTS),e=>{const n=e.docs.map(o=>({...o.data(),id:o.id}));r(n)},e=>{console.error("Error in subscribeToStudents:",e)}),yA=r=>Da(_s(yt,Ot.MISSIONS),e=>{e.empty&&B6().catch(console.error);const n=e.docs.map(o=>({...o.data(),id:o.id}));r(n)},e=>console.error("Error subscribing to missions:",e)),EA=r=>Da(_s(yt,Ot.PRODUCTS),e=>{e.empty&&G6().catch(console.error);const n=e.docs.map(o=>({...o.data(),id:o.id}));r(n)},e=>{console.error("Error subscribing to products:",e),console.error("")}),_A=r=>Da(_s(yt,Ot.WISHES),e=>{const n=e.docs.map(o=>({...o.data(),id:o.id}));r(n)},e=>console.error("Error subscribing to wishes:",e)),wA=r=>Da(_s(yt,Ot.REDEMPTIONS),e=>{const n=e.docs.map(o=>{const u=o.data();return{id:o.id,status:"pending",pointsSpent:0,productName:"",timestamp:Date.now(),userId:"unknown",qrCodeData:"",...u}});r(n)},e=>{console.error("Error subscribing to redemptions:",e)}),e8=async(r,e="")=>{try{const n={id:`banner_${Date.now()}`,imageUrl:r,tag:e,active:!0,timestamp:Date.now()};await Ks(yn(yt,Ot.BANNERS,n.id),n)}catch(n){throw console.error("Error adding banner:",n),n}},t8=async r=>{try{await Iu(yn(yt,Ot.BANNERS,r))}catch(e){throw console.error("Error deleting banner:",e),e}},Gg=r=>{const e=lA(_s(yt,Ot.BANNERS));return Da(e,n=>{const o=n.docs.map(u=>u.data());o.sort((u,d)=>d.timestamp-u.timestamp),r(o)},n=>{console.error("Error subscribing to banners:",n)})},n8=({user:r,onUserUpdate:e})=>{const{showAlert:n}=tc(),[o,u]=ie.useState(!1),d=T=>{var S;const b=(S=T.target.files)==null?void 0:S[0];if(!b)return;if(b.size>500*1024){n(" 500KB ","error");return}if(!b.type.startsWith("image/")){n(" JPG  PNG ","error");return}u(!0);const _=new FileReader;_.onloadend=async()=>{try{const I=_.result,M={...r,avatar:I};await ql(M),e(),n("","success")}catch(I){console.error("Error updating avatar:",I),n("","error")}finally{u(!1)}},_.readAsDataURL(b)},y=async()=>{if(confirm(""))try{const T=`https://api.dicebear.com/7.x/avataaars/svg?seed=${r.name}&mouth=smile&eyebrows=defaultNatural&eyes=default`,b={...r,avatar:T};await ql(b),e(),n("","success")}catch(T){console.error("Error resetting avatar:",T),n("","error")}};return v.jsxs("div",{className:"space-y-8 pb-20 animate-in fade-in duration-500",children:[v.jsxs("header",{children:[v.jsxs("h1",{className:"text-3xl font-black text-slate-800 flex items-center gap-3",children:[v.jsx(af,{className:"text-indigo-500"}),""]}),v.jsx("p",{className:"text-slate-500 mt-1 font-medium",children:""})]}),v.jsx("div",{className:"bg-white rounded-[2.5rem] p-8 border border-slate-100 shadow-xl shadow-slate-200/50",children:v.jsxs("div",{className:"flex flex-col items-center gap-6",children:[v.jsxs("div",{className:"relative group",children:[v.jsx("div",{className:"absolute inset-0 bg-indigo-500 rounded-full blur-xl opacity-20 group-hover:opacity-40 transition-opacity"}),v.jsx("img",{src:r.avatar,alt:r.name,className:"w-40 h-40 rounded-full border-4 border-white shadow-2xl object-cover relative z-10"}),v.jsxs("label",{className:"absolute bottom-0 right-0 z-20 cursor-pointer",children:[v.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:d,disabled:o}),v.jsx("div",{className:"bg-slate-800 text-white p-3 rounded-2xl hover:bg-slate-700 transition-colors shadow-lg hover:scale-105 active:scale-95",children:v.jsx(g1,{size:20})})]})]}),v.jsxs("div",{className:"text-center",children:[v.jsx("h2",{className:"text-2xl font-black text-slate-800",children:r.name}),v.jsxs("div",{className:"flex items-center justify-center gap-2 mt-1",children:[v.jsx("span",{className:"text-slate-400 font-bold text-sm uppercase tracking-wider",children:r.role==="ADMIN"?"":""}),v.jsxs("span",{className:"px-2 py-0.5 rounded-lg bg-indigo-100 text-indigo-700 text-xs font-black",children:["Lv.",Math.floor(r.totalEarned/500)+1]})]})]}),v.jsxs("div",{className:"w-full max-w-sm space-y-4 pt-6 mt-6 border-t border-slate-50",children:[v.jsxs("label",{className:"block w-full cursor-pointer",children:[v.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:d,disabled:o}),v.jsxs("div",{className:"w-full bg-indigo-50 hover:bg-indigo-100 text-indigo-600 font-bold py-4 rounded-2xl transition-all flex items-center justify-center gap-2 border-2 border-transparent hover:border-indigo-200",children:[v.jsx(p1,{size:20}),o?"...":""]})]}),v.jsxs("button",{onClick:y,className:"w-full bg-slate-50 hover:bg-slate-100 text-slate-500 font-bold py-4 rounded-2xl transition-all flex items-center justify-center gap-2",children:[v.jsx(QT,{size:20}),""]})]}),v.jsx("div",{className:"bg-amber-50 rounded-2xl p-4 text-xs font-bold text-amber-600/80 leading-relaxed text-center max-w-sm",children:"  500KB "})]})})]})};var r8={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Oy;(function(r){r.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",r.OUTCOME_OK="OUTCOME_OK",r.OUTCOME_FAILED="OUTCOME_FAILED",r.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Oy||(Oy={}));var Dy;(function(r){r.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",r.PYTHON="PYTHON"})(Dy||(Dy={}));var My;(function(r){r.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",r.SILENT="SILENT",r.WHEN_IDLE="WHEN_IDLE",r.INTERRUPT="INTERRUPT"})(My||(My={}));var Ly;(function(r){r.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",r.STRING="STRING",r.NUMBER="NUMBER",r.INTEGER="INTEGER",r.BOOLEAN="BOOLEAN",r.ARRAY="ARRAY",r.OBJECT="OBJECT",r.NULL="NULL"})(Ly||(Ly={}));var Py;(function(r){r.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",r.SIMPLE_SEARCH="SIMPLE_SEARCH",r.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Py||(Py={}));var By;(function(r){r.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",r.NO_AUTH="NO_AUTH",r.API_KEY_AUTH="API_KEY_AUTH",r.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",r.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",r.OAUTH="OAUTH",r.OIDC_AUTH="OIDC_AUTH"})(By||(By={}));var ky;(function(r){r.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",r.HTTP_IN_QUERY="HTTP_IN_QUERY",r.HTTP_IN_HEADER="HTTP_IN_HEADER",r.HTTP_IN_PATH="HTTP_IN_PATH",r.HTTP_IN_BODY="HTTP_IN_BODY",r.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(ky||(ky={}));var Uy;(function(r){r.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",r.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",r.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",r.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",r.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",r.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",r.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Uy||(Uy={}));var Vy;(function(r){r.UNSPECIFIED="UNSPECIFIED",r.BLOCKING="BLOCKING",r.NON_BLOCKING="NON_BLOCKING"})(Vy||(Vy={}));var jy;(function(r){r.MODE_UNSPECIFIED="MODE_UNSPECIFIED",r.MODE_DYNAMIC="MODE_DYNAMIC"})(jy||(jy={}));var Fy;(function(r){r.MODE_UNSPECIFIED="MODE_UNSPECIFIED",r.AUTO="AUTO",r.ANY="ANY",r.NONE="NONE",r.VALIDATED="VALIDATED"})(Fy||(Fy={}));var zy;(function(r){r.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",r.LOW="LOW",r.MEDIUM="MEDIUM",r.HIGH="HIGH",r.MINIMAL="MINIMAL"})(zy||(zy={}));var Hy;(function(r){r.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",r.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",r.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",r.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",r.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",r.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",r.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",r.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",r.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",r.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",r.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Hy||(Hy={}));var Gy;(function(r){r.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",r.SEVERITY="SEVERITY",r.PROBABILITY="PROBABILITY"})(Gy||(Gy={}));var Yy;(function(r){r.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",r.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",r.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",r.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",r.BLOCK_NONE="BLOCK_NONE",r.OFF="OFF"})(Yy||(Yy={}));var qy;(function(r){r.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",r.STOP="STOP",r.MAX_TOKENS="MAX_TOKENS",r.SAFETY="SAFETY",r.RECITATION="RECITATION",r.LANGUAGE="LANGUAGE",r.OTHER="OTHER",r.BLOCKLIST="BLOCKLIST",r.PROHIBITED_CONTENT="PROHIBITED_CONTENT",r.SPII="SPII",r.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",r.IMAGE_SAFETY="IMAGE_SAFETY",r.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",r.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",r.NO_IMAGE="NO_IMAGE",r.IMAGE_RECITATION="IMAGE_RECITATION",r.IMAGE_OTHER="IMAGE_OTHER"})(qy||(qy={}));var Xy;(function(r){r.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",r.NEGLIGIBLE="NEGLIGIBLE",r.LOW="LOW",r.MEDIUM="MEDIUM",r.HIGH="HIGH"})(Xy||(Xy={}));var Ky;(function(r){r.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",r.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",r.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",r.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",r.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Ky||(Ky={}));var Wy;(function(r){r.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",r.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",r.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",r.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",r.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Wy||(Wy={}));var Qy;(function(r){r.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",r.SAFETY="SAFETY",r.OTHER="OTHER",r.BLOCKLIST="BLOCKLIST",r.PROHIBITED_CONTENT="PROHIBITED_CONTENT",r.IMAGE_SAFETY="IMAGE_SAFETY",r.MODEL_ARMOR="MODEL_ARMOR",r.JAILBREAK="JAILBREAK"})(Qy||(Qy={}));var Zy;(function(r){r.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",r.ON_DEMAND="ON_DEMAND",r.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Zy||(Zy={}));var Jy;(function(r){r.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",r.TEXT="TEXT",r.IMAGE="IMAGE",r.AUDIO="AUDIO"})(Jy||(Jy={}));var $y;(function(r){r.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",r.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",r.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",r.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})($y||($y={}));var eE;(function(r){r.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",r.TUNING_MODE_FULL="TUNING_MODE_FULL",r.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(eE||(eE={}));var tE;(function(r){r.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",r.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",r.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",r.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",r.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",r.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",r.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(tE||(tE={}));var nE;(function(r){r.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",r.JOB_STATE_QUEUED="JOB_STATE_QUEUED",r.JOB_STATE_PENDING="JOB_STATE_PENDING",r.JOB_STATE_RUNNING="JOB_STATE_RUNNING",r.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",r.JOB_STATE_FAILED="JOB_STATE_FAILED",r.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",r.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",r.JOB_STATE_PAUSED="JOB_STATE_PAUSED",r.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",r.JOB_STATE_UPDATING="JOB_STATE_UPDATING",r.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(nE||(nE={}));var rE;(function(r){r.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",r.TUNING_TASK_I2V="TUNING_TASK_I2V",r.TUNING_TASK_T2V="TUNING_TASK_T2V",r.TUNING_TASK_R2V="TUNING_TASK_R2V"})(rE||(rE={}));var iE;(function(r){r.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",r.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",r.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",r.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",r.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(iE||(iE={}));var sE;(function(r){r.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",r.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",r.BALANCED="BALANCED",r.PRIORITIZE_COST="PRIORITIZE_COST"})(sE||(sE={}));var aE;(function(r){r.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",r.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(aE||(aE={}));var oE;(function(r){r.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",r.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",r.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",r.BLOCK_NONE="BLOCK_NONE"})(oE||(oE={}));var lE;(function(r){r.DONT_ALLOW="DONT_ALLOW",r.ALLOW_ADULT="ALLOW_ADULT",r.ALLOW_ALL="ALLOW_ALL"})(lE||(lE={}));var cE;(function(r){r.auto="auto",r.en="en",r.ja="ja",r.ko="ko",r.hi="hi",r.zh="zh",r.pt="pt",r.es="es"})(cE||(cE={}));var uE;(function(r){r.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",r.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",r.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",r.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",r.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(uE||(uE={}));var hE;(function(r){r.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",r.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",r.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",r.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(hE||(hE={}));var fE;(function(r){r.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",r.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",r.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",r.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(fE||(fE={}));var dE;(function(r){r.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",r.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",r.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",r.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",r.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",r.EDIT_MODE_STYLE="EDIT_MODE_STYLE",r.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",r.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(dE||(dE={}));var gE;(function(r){r.FOREGROUND="FOREGROUND",r.BACKGROUND="BACKGROUND",r.PROMPT="PROMPT",r.SEMANTIC="SEMANTIC",r.INTERACTIVE="INTERACTIVE"})(gE||(gE={}));var mE;(function(r){r.ASSET="ASSET",r.STYLE="STYLE"})(mE||(mE={}));var pE;(function(r){r.INSERT="INSERT",r.REMOVE="REMOVE",r.REMOVE_STATIC="REMOVE_STATIC",r.OUTPAINT="OUTPAINT"})(pE||(pE={}));var xE;(function(r){r.OPTIMIZED="OPTIMIZED",r.LOSSLESS="LOSSLESS"})(xE||(xE={}));var yE;(function(r){r.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",r.PREFERENCE_TUNING="PREFERENCE_TUNING"})(yE||(yE={}));var EE;(function(r){r.STATE_UNSPECIFIED="STATE_UNSPECIFIED",r.STATE_PENDING="STATE_PENDING",r.STATE_ACTIVE="STATE_ACTIVE",r.STATE_FAILED="STATE_FAILED"})(EE||(EE={}));var _E;(function(r){r.STATE_UNSPECIFIED="STATE_UNSPECIFIED",r.PROCESSING="PROCESSING",r.ACTIVE="ACTIVE",r.FAILED="FAILED"})(_E||(_E={}));var wE;(function(r){r.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",r.UPLOADED="UPLOADED",r.GENERATED="GENERATED",r.REGISTERED="REGISTERED"})(wE||(wE={}));var AE;(function(r){r.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",r.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",r.RESPONSE_REJECTED="RESPONSE_REJECTED",r.NEED_MORE_INPUT="NEED_MORE_INPUT"})(AE||(AE={}));var bE;(function(r){r.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",r.TEXT="TEXT",r.IMAGE="IMAGE",r.VIDEO="VIDEO",r.AUDIO="AUDIO",r.DOCUMENT="DOCUMENT"})(bE||(bE={}));var vE;(function(r){r.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",r.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",r.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(vE||(vE={}));var TE;(function(r){r.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",r.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",r.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(TE||(TE={}));var CE;(function(r){r.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",r.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",r.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(CE||(CE={}));var SE;(function(r){r.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",r.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",r.NO_INTERRUPTION="NO_INTERRUPTION"})(SE||(SE={}));var IE;(function(r){r.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",r.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",r.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(IE||(IE={}));var NE;(function(r){r.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",r.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",r.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",r.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",r.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",r.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",r.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",r.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",r.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",r.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",r.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",r.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",r.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(NE||(NE={}));var RE;(function(r){r.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",r.QUALITY="QUALITY",r.DIVERSITY="DIVERSITY",r.VOCALIZATION="VOCALIZATION"})(RE||(RE={}));var OE;(function(r){r.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",r.PLAY="PLAY",r.PAUSE="PAUSE",r.STOP="STOP",r.RESET_CONTEXT="RESET_CONTEXT"})(OE||(OE={}));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var DE;(function(r){r.PAGED_ITEM_BATCH_JOBS="batchJobs",r.PAGED_ITEM_MODELS="models",r.PAGED_ITEM_TUNING_JOBS="tuningJobs",r.PAGED_ITEM_FILES="files",r.PAGED_ITEM_CACHED_CONTENTS="cachedContents",r.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",r.PAGED_ITEM_DOCUMENTS="documents"})(DE||(DE={}));function Tf(r,e){var n={};for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&e.indexOf(o)<0&&(n[o]=r[o]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(r);u<o.length;u++)e.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(r,o[u])&&(n[o[u]]=r[o[u]]);return n}function ME(r){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&r[e],o=0;if(n)return n.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&o>=r.length&&(r=void 0),{value:r&&r[o++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Yn(r){return this instanceof Yn?(this.v=r,this):new Yn(r)}function ru(r,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(r,e||[]),u,d=[];return u=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),T("next"),T("throw"),T("return",y),u[Symbol.asyncIterator]=function(){return this},u;function y(V){return function(K){return Promise.resolve(K).then(V,I)}}function T(V,K){o[V]&&(u[V]=function(W){return new Promise(function(q,le){d.push([V,W,q,le])>1||b(V,W)})},K&&(u[V]=K(u[V])))}function b(V,K){try{_(o[V](K))}catch(W){M(d[0][3],W)}}function _(V){V.value instanceof Yn?Promise.resolve(V.value.v).then(S,I):M(d[0][2],V)}function S(V){b("next",V)}function I(V){b("throw",V)}function M(V,K){V(K),d.shift(),d.length&&b(d[0][0],d[0][1])}}function Xl(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],n;return e?e.call(r):(r=typeof ME=="function"?ME(r):r[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(d){n[d]=r[d]&&function(y){return new Promise(function(T,b){y=r[d](y),u(T,b,y.done,y.value)})}}function u(d,y,T,b){Promise.resolve(b).then(function(_){d({value:_,done:T})},y)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let AA=function(){const{crypto:r}=globalThis;if(r!=null&&r.randomUUID)return AA=r.randomUUID.bind(r),r.randomUUID();const e=new Uint8Array(1),n=r?()=>r.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^n()&15>>+o/4).toString(16))};const i8=()=>AA();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function z1(r){return typeof r=="object"&&r!==null&&("name"in r&&r.name==="AbortError"||"message"in r&&String(r.message).includes("FetchRequestCanceledException"))}const H1=r=>{if(r instanceof Error)return r;if(typeof r=="object"&&r!==null){try{if(Object.prototype.toString.call(r)==="[object Error]"){const e=new Error(r.message,r.cause?{cause:r.cause}:{});return r.stack&&(e.stack=r.stack),r.cause&&!e.cause&&(e.cause=r.cause),r.name&&(e.name=r.name),e}}catch{}try{return new Error(JSON.stringify(r))}catch{}}return new Error(r)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ys extends Error{}class pi extends ys{constructor(e,n,o,u){super(`${pi.makeMessage(e,n,o)}`),this.status=e,this.headers=u,this.error=n}static makeMessage(e,n,o){const u=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):o;return e&&u?`${e} ${u}`:e?`${e} status code (no body)`:u||"(no status code or body)"}static generate(e,n,o,u){if(!e||!u)return new Jf({message:o,cause:H1(n)});const d=n;return e===400?new vA(e,d,o,u):e===401?new TA(e,d,o,u):e===403?new CA(e,d,o,u):e===404?new SA(e,d,o,u):e===409?new IA(e,d,o,u):e===422?new NA(e,d,o,u):e===429?new RA(e,d,o,u):e>=500?new OA(e,d,o,u):new pi(e,d,o,u)}}class G1 extends pi{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Jf extends pi{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class bA extends Jf{constructor({message:e}={}){super({message:e??"Request timed out."})}}class vA extends pi{}class TA extends pi{}class CA extends pi{}class SA extends pi{}class IA extends pi{}class NA extends pi{}class RA extends pi{}class OA extends pi{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const s8=/^[a-z][a-z0-9+.-]*:/i,a8=r=>s8.test(r);let Y1=r=>(Y1=Array.isArray,Y1(r));const o8=Y1;let l8=o8;const LE=l8;function c8(r){if(!r)return!0;for(const e in r)return!1;return!0}function u8(r,e){return Object.prototype.hasOwnProperty.call(r,e)}const h8=(r,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new ys(`${r} must be an integer`);if(e<0)throw new ys(`${r} must be a positive integer`);return e},f8=r=>{try{return JSON.parse(r)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const d8=r=>new Promise(e=>setTimeout(e,r));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jl="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function g8(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const m8=()=>{var r,e,n,o,u;const d=g8();if(d==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jl,"X-Stainless-OS":BE(Deno.build.os),"X-Stainless-Arch":PE(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(r=Deno.version)===null||r===void 0?void 0:r.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(d==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jl,"X-Stainless-OS":BE((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":PE((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(u=globalThis.process.version)!==null&&u!==void 0?u:"unknown"};const y=p8();return y?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${y.browser}`,"X-Stainless-Runtime-Version":y.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":jl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function p8(){if(typeof navigator>"u"||!navigator)return null;const r=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of r){const o=n.exec(navigator.userAgent);if(o){const u=o[1]||0,d=o[2]||0,y=o[3]||0;return{browser:e,version:`${u}.${d}.${y}`}}}return null}const PE=r=>r==="x32"?"x32":r==="x86_64"||r==="x64"?"x64":r==="arm"?"arm":r==="aarch64"||r==="arm64"?"arm64":r?`other:${r}`:"unknown",BE=r=>(r=r.toLowerCase(),r.includes("ios")?"iOS":r==="android"?"Android":r==="darwin"?"MacOS":r==="win32"?"Windows":r==="freebsd"?"FreeBSD":r==="openbsd"?"OpenBSD":r==="linux"?"Linux":r?`Other:${r}`:"Unknown");let Fh;const x8=()=>Fh??(Fh=m8());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function y8(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function DA(...r){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...r)}function E8(r){let e=Symbol.asyncIterator in r?r[Symbol.asyncIterator]():r[Symbol.iterator]();return DA({start(){},async pull(n){const{done:o,value:u}=await e.next();o?n.close():n.enqueue(u)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function MA(r){if(r[Symbol.asyncIterator])return r;const e=r.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function _8(r){var e,n;if(r===null||typeof r!="object")return;if(r[Symbol.asyncIterator]){await((n=(e=r[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const o=r.getReader(),u=o.cancel();o.releaseLock(),await u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const w8=({headers:r,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LA=()=>{var r;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((r=e==null?void 0:e.versions)===null||r===void 0?void 0:r.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function c1(r,e,n){return LA(),new File(r,e??"unknown_file",n)}function A8(r){return(typeof r=="object"&&r!==null&&("name"in r&&r.name&&String(r.name)||"url"in r&&r.url&&String(r.url)||"filename"in r&&r.filename&&String(r.filename)||"path"in r&&r.path&&String(r.path))||"").split(/[\\/]/).pop()||void 0}const b8=r=>r!=null&&typeof r=="object"&&typeof r[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const PA=r=>r!=null&&typeof r=="object"&&typeof r.size=="number"&&typeof r.type=="string"&&typeof r.text=="function"&&typeof r.slice=="function"&&typeof r.arrayBuffer=="function",v8=r=>r!=null&&typeof r=="object"&&typeof r.name=="string"&&typeof r.lastModified=="number"&&PA(r),T8=r=>r!=null&&typeof r=="object"&&typeof r.url=="string"&&typeof r.blob=="function";async function C8(r,e,n){if(LA(),r=await r,v8(r))return r instanceof File?r:c1([await r.arrayBuffer()],r.name);if(T8(r)){const u=await r.blob();return e||(e=new URL(r.url).pathname.split(/[\\/]/).pop()),c1(await q1(u),e,n)}const o=await q1(r);if(e||(e=A8(r)),!(n!=null&&n.type)){const u=o.find(d=>typeof d=="object"&&"type"in d&&d.type);typeof u=="string"&&(n=Object.assign(Object.assign({},n),{type:u}))}return c1(o,e,n)}async function q1(r){var e,n,o,u,d;let y=[];if(typeof r=="string"||ArrayBuffer.isView(r)||r instanceof ArrayBuffer)y.push(r);else if(PA(r))y.push(r instanceof Blob?r:await r.arrayBuffer());else if(b8(r))try{for(var T=!0,b=Xl(r),_;_=await b.next(),e=_.done,!e;T=!0){u=_.value,T=!1;const S=u;y.push(...await q1(S))}}catch(S){n={error:S}}finally{try{!T&&!e&&(o=b.return)&&await o.call(b)}finally{if(n)throw n.error}}else{const S=(d=r==null?void 0:r.constructor)===null||d===void 0?void 0:d.name;throw new Error(`Unexpected data type: ${typeof r}${S?`; constructor: ${S}`:""}${S8(r)}`)}return y}function S8(r){return typeof r!="object"||r===null?"":`; props: [${Object.getOwnPropertyNames(r).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BA{constructor(e){this._client=e}}BA._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kA(r){return r.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const kE=Object.freeze(Object.create(null)),I8=(r=kA)=>(function(n,...o){if(n.length===1)return n[0];let u=!1;const d=[],y=n.reduce((S,I,M)=>{var V,K,W;/[?#]/.test(I)&&(u=!0);const q=o[M];let le=(u?encodeURIComponent:r)(""+q);return M!==o.length&&(q==null||typeof q=="object"&&q.toString===((W=Object.getPrototypeOf((K=Object.getPrototypeOf((V=q.hasOwnProperty)!==null&&V!==void 0?V:kE))!==null&&K!==void 0?K:kE))===null||W===void 0?void 0:W.toString))&&(le=q+"",d.push({start:S.length+I.length,length:le.length,error:`Value of type ${Object.prototype.toString.call(q).slice(8,-1)} is not a valid path parameter`})),S+I+(M===o.length?"":le)},""),T=y.split(/[?#]/,1)[0],b=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let _;for(;(_=b.exec(T))!==null;)d.push({start:_.index,length:_[0].length,error:`Value "${_[0]}" can't be safely passed as a path parameter`});if(d.sort((S,I)=>S.start-I.start),d.length>0){let S=0;const I=d.reduce((M,V)=>{const K=" ".repeat(V.start-S),W="^".repeat(V.length);return S=V.start+V.length,M+K+W},"");throw new ys(`Path parameters result in path with invalid segments:
${d.map(M=>M.error).join(`
`)}
${y}
${I}`)}return y}),zh=I8(kA);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class UA extends BA{create(e,n){var o;const{api_version:u=this._client.apiVersion}=e,d=Tf(e,["api_version"]);if("model"in d&&"agent_config"in d)throw new ys("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in d&&"generation_config"in d)throw new ys("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(zh`/${u}/interactions`,Object.assign(Object.assign({body:d},n),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,n={},o){const{api_version:u=this._client.apiVersion}=n??{};return this._client.delete(zh`/${u}/interactions/${e}`,o)}cancel(e,n={},o){const{api_version:u=this._client.apiVersion}=n??{};return this._client.post(zh`/${u}/interactions/${e}/cancel`,o)}get(e,n={},o){var u;const d=n??{},{api_version:y=this._client.apiVersion}=d,T=Tf(d,["api_version"]);return this._client.get(zh`/${y}/interactions/${e}`,Object.assign(Object.assign({query:T},o),{stream:(u=n==null?void 0:n.stream)!==null&&u!==void 0?u:!1}))}}UA._key=Object.freeze(["interactions"]);class VA extends UA{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function N8(r){let e=0;for(const u of r)e+=u.length;const n=new Uint8Array(e);let o=0;for(const u of r)n.set(u,o),o+=u.length;return n}let Hh;function Yg(r){let e;return(Hh??(e=new globalThis.TextEncoder,Hh=e.encode.bind(e)))(r)}let Gh;function UE(r){let e;return(Gh??(e=new globalThis.TextDecoder,Gh=e.decode.bind(e)))(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $f{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Yg(e):e;this.buffer=N8([this.buffer,n]);const o=[];let u;for(;(u=R8(this.buffer,this.carriageReturnIndex))!=null;){if(u.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=u.index;continue}if(this.carriageReturnIndex!=null&&(u.index!==this.carriageReturnIndex+1||u.carriage)){o.push(UE(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const d=this.carriageReturnIndex!==null?u.preceding-1:u.preceding,y=UE(this.buffer.subarray(0,d));o.push(y),this.buffer=this.buffer.subarray(u.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}$f.NEWLINE_CHARS=new Set([`
`,"\r"]);$f.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function R8(r,e){for(let u=e??0;u<r.length;u++){if(r[u]===10)return{preceding:u,index:u+1,carriage:!1};if(r[u]===13)return{preceding:u,index:u+1,carriage:!0}}return null}function O8(r){for(let o=0;o<r.length-1;o++){if(r[o]===10&&r[o+1]===10||r[o]===13&&r[o+1]===13)return o+2;if(r[o]===13&&r[o+1]===10&&o+3<r.length&&r[o+2]===13&&r[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Cf={off:0,error:200,warn:300,info:400,debug:500},VE=(r,e,n)=>{if(r){if(u8(Cf,r))return r;mi(n).warn(`${e} was set to ${JSON.stringify(r)}, expected one of ${JSON.stringify(Object.keys(Cf))}`)}};function Wc(){}function Yh(r,e,n){return!e||Cf[r]>Cf[n]?Wc:e[r].bind(e)}const D8={error:Wc,warn:Wc,info:Wc,debug:Wc};let jE=new WeakMap;function mi(r){var e;const n=r.logger,o=(e=r.logLevel)!==null&&e!==void 0?e:"off";if(!n)return D8;const u=jE.get(n);if(u&&u[0]===o)return u[1];const d={error:Yh("error",n,o),warn:Yh("warn",n,o),info:Yh("info",n,o),debug:Yh("debug",n,o)};return jE.set(n,[o,d]),d}const Ko=r=>(r.options&&(r.options=Object.assign({},r.options),delete r.options.headers),r.headers&&(r.headers=Object.fromEntries((r.headers instanceof Headers?[...r.headers]:Object.entries(r.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in r&&(r.retryOfRequestLogID&&(r.retryOf=r.retryOfRequestLogID),delete r.retryOfRequestLogID),r);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fl{constructor(e,n,o){this.iterator=e,this.controller=n,this.client=o}static fromSSEResponse(e,n,o){let u=!1;const d=o?mi(o):console;function y(){return ru(this,arguments,function*(){var b,_,S,I;if(u)throw new ys("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");u=!0;let M=!1;try{try{for(var V=!0,K=Xl(M8(e,n)),W;W=yield Yn(K.next()),b=W.done,!b;V=!0){I=W.value,V=!1;const q=I;if(!M)if(q.data.startsWith("[DONE]")){M=!0;continue}else try{yield yield Yn(JSON.parse(q.data))}catch(le){throw d.error("Could not parse message into JSON:",q.data),d.error("From chunk:",q.raw),le}}}catch(q){_={error:q}}finally{try{!V&&!b&&(S=K.return)&&(yield Yn(S.call(K)))}finally{if(_)throw _.error}}M=!0}catch(q){if(z1(q))return yield Yn(void 0);throw q}finally{M||n.abort()}})}return new Fl(y,n,o)}static fromReadableStream(e,n,o){let u=!1;function d(){return ru(this,arguments,function*(){var b,_,S,I;const M=new $f,V=MA(e);try{for(var K=!0,W=Xl(V),q;q=yield Yn(W.next()),b=q.done,!b;K=!0){I=q.value,K=!1;const le=I;for(const ae of M.decode(le))yield yield Yn(ae)}}catch(le){_={error:le}}finally{try{!K&&!b&&(S=W.return)&&(yield Yn(S.call(W)))}finally{if(_)throw _.error}}for(const le of M.flush())yield yield Yn(le)})}function y(){return ru(this,arguments,function*(){var b,_,S,I;if(u)throw new ys("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");u=!0;let M=!1;try{try{for(var V=!0,K=Xl(d()),W;W=yield Yn(K.next()),b=W.done,!b;V=!0){I=W.value,V=!1;const q=I;M||q&&(yield yield Yn(JSON.parse(q)))}}catch(q){_={error:q}}finally{try{!V&&!b&&(S=K.return)&&(yield Yn(S.call(K)))}finally{if(_)throw _.error}}M=!0}catch(q){if(z1(q))return yield Yn(void 0);throw q}finally{M||n.abort()}})}return new Fl(y,n,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],o=this.iterator(),u=d=>({next:()=>{if(d.length===0){const y=o.next();e.push(y),n.push(y)}return d.shift()}});return[new Fl(()=>u(e),this.controller,this.client),new Fl(()=>u(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return DA({async start(){n=e[Symbol.asyncIterator]()},async pull(o){try{const{value:u,done:d}=await n.next();if(d)return o.close();const y=Yg(JSON.stringify(u)+`
`);o.enqueue(y)}catch(u){o.error(u)}},async cancel(){var o;await((o=n.return)===null||o===void 0?void 0:o.call(n))}})}}function M8(r,e){return ru(this,arguments,function*(){var o,u,d,y;if(!r.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new ys("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new ys("Attempted to iterate over a response with no body");const T=new P8,b=new $f,_=MA(r.body);try{for(var S=!0,I=Xl(L8(_)),M;M=yield Yn(I.next()),o=M.done,!o;S=!0){y=M.value,S=!1;const V=y;for(const K of b.decode(V)){const W=T.decode(K);W&&(yield yield Yn(W))}}}catch(V){u={error:V}}finally{try{!S&&!o&&(d=I.return)&&(yield Yn(d.call(I)))}finally{if(u)throw u.error}}for(const V of b.flush()){const K=T.decode(V);K&&(yield yield Yn(K))}})}function L8(r){return ru(this,arguments,function*(){var n,o,u,d;let y=new Uint8Array;try{for(var T=!0,b=Xl(r),_;_=yield Yn(b.next()),n=_.done,!n;T=!0){d=_.value,T=!1;const S=d;if(S==null)continue;const I=S instanceof ArrayBuffer?new Uint8Array(S):typeof S=="string"?Yg(S):S;let M=new Uint8Array(y.length+I.length);M.set(y),M.set(I,y.length),y=M;let V;for(;(V=O8(y))!==-1;)yield yield Yn(y.slice(0,V)),y=y.slice(V)}}catch(S){o={error:S}}finally{try{!T&&!n&&(u=b.return)&&(yield Yn(u.call(b)))}finally{if(o)throw o.error}}y.length>0&&(yield yield Yn(y))})}class P8{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const d={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],d}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,o,u]=B8(e,":");return u.startsWith(" ")&&(u=u.substring(1)),n==="event"?this.event=u:n==="data"&&this.data.push(u),null}}function B8(r,e){const n=r.indexOf(e);return n!==-1?[r.substring(0,n),e,r.substring(n+e.length)]:[r,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function k8(r,e){const{response:n,requestLogID:o,retryOfRequestLogID:u,startTime:d}=e,y=await(async()=>{var T;if(e.options.stream)return mi(r).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,r):Fl.fromSSEResponse(n,e.controller,r);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const b=n.headers.get("content-type"),_=(T=b==null?void 0:b.split(";")[0])===null||T===void 0?void 0:T.trim();return(_==null?void 0:_.includes("application/json"))||(_==null?void 0:_.endsWith("+json"))?await n.json():await n.text()})();return mi(r).debug(`[${o}] response parsed`,Ko({retryOfRequestLogID:u,url:n.url,status:n.status,body:y,durationMs:Date.now()-d})),y}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qg extends Promise{constructor(e,n,o=k8){super(u=>{u(null)}),this.responsePromise=n,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new qg(this.client,this.responsePromise,async(n,o)=>e(await this.parseResponse(n,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jA=Symbol("brand.privateNullableHeaders");function*U8(r){if(!r)return;if(jA in r){const{values:o,nulls:u}=r;yield*o.entries();for(const d of u)yield[d,null];return}let e=!1,n;r instanceof Headers?n=r.entries():LE(r)?n=r:(e=!0,n=Object.entries(r??{}));for(let o of n){const u=o[0];if(typeof u!="string")throw new TypeError("expected header name to be a string");const d=LE(o[1])?o[1]:[o[1]];let y=!1;for(const T of d)T!==void 0&&(e&&!y&&(y=!0,yield[u,null]),yield[u,T])}}const Gc=r=>{const e=new Headers,n=new Set;for(const o of r){const u=new Set;for(const[d,y]of U8(o)){const T=d.toLowerCase();u.has(T)||(e.delete(d),u.add(T)),y===null?(e.delete(d),n.add(T)):(e.append(d,y),n.delete(T))}}return{[jA]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const u1=r=>{var e,n,o,u,d,y;if(typeof globalThis.process<"u")return(o=(n=(e=r8)===null||e===void 0?void 0:e[r])===null||n===void 0?void 0:n.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(y=(d=(u=globalThis.Deno.env)===null||u===void 0?void 0:u.get)===null||d===void 0?void 0:d.call(u,r))===null||y===void 0?void 0:y.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var FA;class ed{constructor(e){var n,o,u,d,y,T,b,{baseURL:_=u1("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:S=(n=u1("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:I="v1beta"}=e,M=Tf(e,["baseURL","apiKey","apiVersion"]);const V=Object.assign(Object.assign({apiKey:S,apiVersion:I},M),{baseURL:_||"https://generativelanguage.googleapis.com"});this.baseURL=V.baseURL,this.timeout=(o=V.timeout)!==null&&o!==void 0?o:ed.DEFAULT_TIMEOUT,this.logger=(u=V.logger)!==null&&u!==void 0?u:console;const K="warn";this.logLevel=K,this.logLevel=(y=(d=VE(V.logLevel,"ClientOptions.logLevel",this))!==null&&d!==void 0?d:VE(u1("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&y!==void 0?y:K,this.fetchOptions=V.fetchOptions,this.maxRetries=(T=V.maxRetries)!==null&&T!==void 0?T:2,this.fetch=(b=V.fetch)!==null&&b!==void 0?b:y8(),this.encoder=w8,this._options=V,this.apiKey=S,this.apiVersion=I,this.clientAdapter=V.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Gc([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Gc([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Gc([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,o])=>typeof o<"u").map(([n,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(n)}=`;throw new ys(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${jl}`}defaultIdempotencyKey(){return`stainless-node-retry-${i8()}`}makeStatusError(e,n,o,u){return pi.generate(e,n,o,u)}buildURL(e,n,o){const u=!this.baseURLOverridden()&&o||this.baseURL,d=a8(e)?new URL(e):new URL(u+(u.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),y=this.defaultQuery();return c8(y)||(n=Object.assign(Object.assign({},y),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(d.search=this.stringifyQuery(n)),d.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:o}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,o){return this.request(Promise.resolve(o).then(u=>Object.assign({method:e,path:n},u)))}request(e,n=null){return new qg(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,o){var u,d,y;const T=await e,b=(u=T.maxRetries)!==null&&u!==void 0?u:this.maxRetries;n==null&&(n=b),await this.prepareOptions(T);const{req:_,url:S,timeout:I}=await this.buildRequest(T,{retryCount:b-n});await this.prepareRequest(_,{url:S,options:T});const M="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),V=o===void 0?"":`, retryOf: ${o}`,K=Date.now();if(mi(this).debug(`[${M}] sending request`,Ko({retryOfRequestLogID:o,method:T.method,url:S,options:T,headers:_.headers})),!((d=T.signal)===null||d===void 0)&&d.aborted)throw new G1;const W=new AbortController,q=await this.fetchWithTimeout(S,_,I,W).catch(H1),le=Date.now();if(q instanceof globalThis.Error){const ee=`retrying, ${n} attempts remaining`;if(!((y=T.signal)===null||y===void 0)&&y.aborted)throw new G1;const fe=z1(q)||/timed? ?out/i.test(String(q)+("cause"in q?String(q.cause):""));if(n)return mi(this).info(`[${M}] connection ${fe?"timed out":"failed"} - ${ee}`),mi(this).debug(`[${M}] connection ${fe?"timed out":"failed"} (${ee})`,Ko({retryOfRequestLogID:o,url:S,durationMs:le-K,message:q.message})),this.retryRequest(T,n,o??M);throw mi(this).info(`[${M}] connection ${fe?"timed out":"failed"} - error; no more retries left`),mi(this).debug(`[${M}] connection ${fe?"timed out":"failed"} (error; no more retries left)`,Ko({retryOfRequestLogID:o,url:S,durationMs:le-K,message:q.message})),fe?new bA:new Jf({cause:q})}const ae=`[${M}${V}] ${_.method} ${S} ${q.ok?"succeeded":"failed"} with status ${q.status} in ${le-K}ms`;if(!q.ok){const ee=await this.shouldRetry(q);if(n&&ee){const j=`retrying, ${n} attempts remaining`;return await _8(q.body),mi(this).info(`${ae} - ${j}`),mi(this).debug(`[${M}] response error (${j})`,Ko({retryOfRequestLogID:o,url:q.url,status:q.status,headers:q.headers,durationMs:le-K})),this.retryRequest(T,n,o??M,q.headers)}const fe=ee?"error; no more retries left":"error; not retryable";mi(this).info(`${ae} - ${fe}`);const je=await q.text().catch(j=>H1(j).message),De=f8(je),z=De?void 0:je;throw mi(this).debug(`[${M}] response error (${fe})`,Ko({retryOfRequestLogID:o,url:q.url,status:q.status,headers:q.headers,message:z,durationMs:Date.now()-K})),this.makeStatusError(q.status,De,z,q.headers)}return mi(this).info(ae),mi(this).debug(`[${M}] response start`,Ko({retryOfRequestLogID:o,url:q.url,status:q.status,headers:q.headers,durationMs:le-K})),{response:q,options:T,controller:W,requestLogID:M,retryOfRequestLogID:o,startTime:K}}async fetchWithTimeout(e,n,o,u){const d=n||{},{signal:y,method:T}=d,b=Tf(d,["signal","method"]);y&&y.addEventListener("abort",()=>u.abort());const _=setTimeout(()=>u.abort(),o),S=globalThis.ReadableStream&&b.body instanceof globalThis.ReadableStream||typeof b.body=="object"&&b.body!==null&&Symbol.asyncIterator in b.body,I=Object.assign(Object.assign(Object.assign({signal:u.signal},S?{duplex:"half"}:{}),{method:"GET"}),b);T&&(I.method=T.toUpperCase());try{return await this.fetch.call(void 0,e,I)}finally{clearTimeout(_)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,o,u){var d;let y;const T=u==null?void 0:u.get("retry-after-ms");if(T){const _=parseFloat(T);Number.isNaN(_)||(y=_)}const b=u==null?void 0:u.get("retry-after");if(b&&!y){const _=parseFloat(b);Number.isNaN(_)?y=Date.parse(b)-Date.now():y=_*1e3}if(!(y&&0<=y&&y<60*1e3)){const _=(d=e.maxRetries)!==null&&d!==void 0?d:this.maxRetries;y=this.calculateDefaultRetryTimeoutMillis(n,_)}return await d8(y),this.makeRequest(e,n-1,o)}calculateDefaultRetryTimeoutMillis(e,n){const d=n-e,y=Math.min(.5*Math.pow(2,d),8),T=1-Math.random()*.25;return y*T*1e3}async buildRequest(e,{retryCount:n=0}={}){var o,u,d;const y=Object.assign({},e),{method:T,path:b,query:_,defaultBaseURL:S}=y,I=this.buildURL(b,_,S);"timeout"in y&&h8("timeout",y.timeout),y.timeout=(o=y.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:M,body:V}=this.buildBody({options:y}),K=await this.buildHeaders({options:e,method:T,bodyHeaders:M,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:T,headers:K},y.signal&&{signal:y.signal}),globalThis.ReadableStream&&V instanceof globalThis.ReadableStream&&{duplex:"half"}),V&&{body:V}),(u=this.fetchOptions)!==null&&u!==void 0?u:{}),(d=y.fetchOptions)!==null&&d!==void 0?d:{}),url:I,timeout:y.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:o,retryCount:u}){let d={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),d[this.idempotencyHeader]=e.idempotencyKey);const y=await this.authHeaders(e);let T=Gc([d,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(u)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),x8()),this._options.defaultHeaders,o,e.headers,y]);return this.validateHeaders(T),T.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=Gc([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:E8(e)}:this.encoder({body:e,headers:o})}}ed.DEFAULT_TIMEOUT=6e4;class Hr extends ed{constructor(){super(...arguments),this.interactions=new VA(this)}}FA=Hr;Hr.GeminiNextGenAPIClient=FA;Hr.GeminiNextGenAPIClientError=ys;Hr.APIError=pi;Hr.APIConnectionError=Jf;Hr.APIConnectionTimeoutError=bA;Hr.APIUserAbortError=G1;Hr.NotFoundError=SA;Hr.ConflictError=IA;Hr.RateLimitError=RA;Hr.BadRequestError=vA;Hr.AuthenticationError=TA;Hr.InternalServerError=OA;Hr.PermissionDeniedError=CA;Hr.UnprocessableEntityError=NA;Hr.toFile=C8;Hr.Interactions=VA;const V8=()=>null,j8=async(r,e)=>{const n=l1[Math.floor(Math.random()*l1.length)],o=`${n.text} ${n.author}`;try{const u=V8();return u&&(await u.models.generateContent({model:"gemini-2.0-flash-exp",contents:`
        
        
        - ${r.name}
        - ${e.name}
        - ${r.points}
        - ${r.totalEarned}

        
        ${l1.map(y=>`${y.text}-- ${y.author}`).join(`
`)}

        30-60
        
      `})).text()||o}catch(u){return console.error("Gemini Error:",u),o}},F8=({user:r,rank:e,onUserUpdate:n})=>{const{showAlert:o}=tc(),[u,d]=ie.useState("..."),[y,T]=ie.useState([]),[b,_]=ie.useState([]),[S,I]=ie.useState(null),[M,V]=ie.useState(new Set),[K,W]=ie.useState(!1),[q,le]=ie.useState([]),[ae,ee]=ie.useState(0),fe=po[po.indexOf(e)+1]||null,je=fe?Math.min(100,(r.totalEarned-e.threshold)/(fe.threshold-e.threshold)*100):100,De=Math.floor(r.totalEarned/500)+1;ie.useEffect(()=>{(async()=>{const X=await j8(r,e);d(X)})();const j=yA(async X=>{const We=X.filter(pe=>pe.isActive);T(We);const de=new Set;for(const pe of We)await mA(r.id,pe.id)&&de.add(pe.id);V(de)}),$=pA(X=>{const We=new Date;We.setHours(0,0,0,0),_(X.filter(de=>de.userId===r.id&&de.timestamp>=We.getTime()))}),Q=Gg(le);let Z;return q.length>1&&(Z=setInterval(()=>{ee(X=>(X+1)%q.length)},5e3)),()=>{j(),$(),Q(),Z&&clearInterval(Z)}},[r.id,e,q.length]);const z=async U=>{if(S)return;if(U.deadline&&U.deadline<Date.now()){o("","error");return}if(b.some($=>$.missionId===U.id&&$.status==="pending")){o("","info");return}I(U.id);try{await F6({id:`sub_${Date.now()}`,userId:r.id,userName:r.name,missionId:U.id,missionTitle:U.title,points:U.points,timestamp:Date.now(),status:"pending"}),o("","success")}catch($){console.error("Error submitting mission:",$),o("","error")}finally{I(null)}};return v.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-10 relative",children:[K&&v.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:v.jsxs("div",{className:"bg-white rounded-[2.5rem] max-w-lg w-full p-8 shadow-2xl animate-in zoom-in-95 duration-200 border border-slate-100 relative",children:[v.jsx("button",{onClick:()=>W(!1),className:"absolute top-6 right-6 p-2 bg-slate-100 rounded-full hover:bg-slate-200 transition-colors text-slate-500",children:v.jsx(uo,{size:20})}),v.jsxs("h3",{className:"text-2xl font-black text-slate-800 mb-6 flex items-center gap-3",children:[v.jsx(px,{className:"text-amber-500"}),""]}),v.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto pr-2 custom-scrollbar",children:po.map((U,j)=>v.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-2xl ${r.totalEarned>=U.threshold?"bg-indigo-50 border-2 border-indigo-100":"bg-slate-50 border border-slate-100 grayscale opacity-70"}`,children:[v.jsx("div",{className:"text-3xl",children:U.icon}),v.jsxs("div",{className:"flex-1",children:[v.jsx("h4",{className:"font-bold text-slate-800",children:U.name}),v.jsxs("p",{className:"text-xs text-slate-500 font-bold mt-0.5",children:[" ",U.threshold.toLocaleString()," "]})]}),r.totalEarned>=U.threshold&&v.jsx("div",{className:"bg-indigo-500 text-white p-1 rounded-full",children:v.jsx(su,{size:16})})]},U.name))}),v.jsx("div",{className:"mt-6 text-center",children:v.jsx("p",{className:"text-xs text-slate-400 font-bold",children:""})})]})}),v.jsxs("header",{className:"flex flex-col md:flex-row md:items-start justify-between gap-4",children:[v.jsxs("div",{children:[v.jsxs("h1",{className:"text-3xl font-black text-slate-800 tracking-tight",children:["",r.name,""]}),v.jsxs("p",{className:"text-slate-500 mt-1 italic max-w-xl font-medium",children:['"',u,'"']})]}),v.jsxs("div",{className:"bg-amber-50 border border-amber-100 rounded-2xl px-5 py-3 flex items-center gap-3 self-end md:self-start shadow-sm",children:[v.jsx("div",{className:"bg-amber-500 p-2 rounded-xl text-white shadow-lg shadow-amber-200",children:v.jsx(zT,{size:20})}),v.jsxs("div",{children:[v.jsx("p",{className:"text-[10px] text-amber-700 font-black uppercase tracking-widest",children:""}),v.jsxs("p",{className:"text-2xl font-black text-amber-900 leading-none",children:[r.totalEarned.toLocaleString()," ",v.jsx("span",{className:"text-xs font-bold opacity-60",children:"PTS"})]})]})]})]}),q.length>0&&v.jsxs("div",{className:"relative w-full h-48 md:h-72 rounded-[3.5rem] overflow-hidden shadow-2xl shadow-indigo-100 group border-4 border-white",children:[v.jsx("div",{className:"flex transition-transform duration-700 ease-in-out h-full",style:{transform:`translateX(-${ae*100}%)`},children:q.map(U=>v.jsxs("div",{className:"min-w-full h-full relative",children:[v.jsx("img",{src:U.imageUrl,alt:"banner",className:"w-full h-full object-cover"}),v.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent flex items-end justify-start p-12",children:v.jsx("div",{className:"mt-auto",children:v.jsx("span",{className:"bg-indigo-600/90 backdrop-blur text-white px-4 py-2 rounded-xl text-xs font-black uppercase tracking-[0.2em] shadow-lg",children:U.tag||""})})})]},U.id))}),v.jsx("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 flex gap-3",children:q.map((U,j)=>v.jsx("button",{onClick:()=>ee(j),className:`w-2.5 h-2.5 rounded-full transition-all ${ae===j?"bg-white w-10 shadow-lg":"bg-white/40 hover:bg-white/80"}`},j))}),v.jsx("button",{onClick:()=>ee(U=>(U-1+q.length)%q.length),className:"absolute left-6 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/40 backdrop-blur p-4 rounded-full text-white opacity-0 group-hover:opacity-100 transition-all border border-white/10",children:v.jsx(Z0,{className:"rotate-180",size:24})}),v.jsx("button",{onClick:()=>ee(U=>(U+1)%q.length),className:"absolute right-6 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/40 backdrop-blur p-4 rounded-full text-white opacity-0 group-hover:opacity-100 transition-all border border-white/10",children:v.jsx(Z0,{size:24})})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[v.jsxs("div",{className:"md:col-span-2 bg-white rounded-[2.5rem] p-10 border border-slate-100 shadow-xl shadow-slate-200/40 relative overflow-hidden",children:[v.jsxs("div",{className:"flex items-center justify-between mb-12",children:[v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[v.jsx("h3",{className:"text-slate-400 text-[10px] font-black uppercase tracking-[0.2em]",children:""}),v.jsx("button",{onClick:()=>W(!0),className:"text-indigo-400 hover:text-indigo-600 transition-colors",title:"",children:v.jsx(w_,{size:14})})]}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("span",{className:"text-4xl filter drop-shadow-md",children:e.icon}),v.jsxs("span",{className:`text-2xl font-black px-6 py-2 rounded-2xl text-white ${e.color} shadow-xl shadow-indigo-100 border-2 border-white/20 flex items-center gap-2`,children:[e.name," ",v.jsxs("span",{className:"text-sm bg-white/20 px-2 py-0.5 rounded-lg border border-white/20",children:["Lv.",De]})]})]})]}),fe&&v.jsxs("div",{className:"text-right",children:[v.jsx("h3",{className:"text-slate-400 text-[10px] font-black uppercase tracking-[0.2em] mb-2",children:""}),v.jsxs("div",{className:"flex items-center gap-3 justify-end group",children:[v.jsx("span",{className:"text-lg font-black text-slate-700 group-hover:text-indigo-600 transition-colors",children:fe.name}),v.jsx("span",{className:"text-2xl animate-bounce",children:fe.icon})]})]})]}),v.jsxs("div",{className:"relative pt-12 pb-6 px-2",children:[v.jsx("div",{className:"h-5 bg-slate-100 rounded-full w-full overflow-hidden border border-slate-200 shadow-inner p-1",children:v.jsx("div",{className:`h-full ${e.color} transition-all duration-1000 ease-out rounded-full relative overflow-hidden`,style:{width:`${je}%`},children:v.jsx("div",{className:"absolute inset-0 bg-white/20 animate-pulse"})})}),v.jsx("div",{className:"absolute top-0 transition-all duration-1000 ease-out",style:{left:`calc(${je}% - 30px)`},children:v.jsxs("div",{className:"relative group cursor-pointer",children:[v.jsx("div",{className:"p-1.5 bg-white rounded-full shadow-2xl border border-slate-50 transition-transform group-hover:scale-110 active:scale-95",children:v.jsx("img",{src:r.avatar,className:`w-14 h-14 rounded-full border-4 border-opacity-30 object-cover ${e.color.replace("bg-","border-")}`,alt:"me"})}),v.jsxs("div",{className:`absolute -top-10 left-1/2 -translate-x-1/2 px-3 py-1 rounded-xl text-[11px] font-black text-white shadow-xl ${e.color} whitespace-nowrap`,children:[" ",Math.round(je),"%"]})]})})]}),v.jsx("p",{className:"text-center text-xs text-slate-400 font-bold mt-8 tracking-wide",children:fe?`${fe.name} ${fe.threshold-r.totalEarned} `:""})]}),v.jsxs("div",{className:"bg-gradient-to-br from-indigo-600 via-indigo-700 to-indigo-900 rounded-[2.5rem] p-10 text-white shadow-2xl shadow-indigo-300 flex flex-col justify-center items-center text-center relative overflow-hidden",children:[v.jsx("div",{className:"absolute -top-10 -right-10 w-40 h-40 bg-white/10 rounded-full blur-3xl"}),v.jsx("div",{className:"absolute -bottom-10 -left-10 w-40 h-40 bg-indigo-500/20 rounded-full blur-3xl"}),v.jsx("div",{className:"w-20 h-20 bg-white/20 backdrop-blur-xl rounded-[2rem] flex items-center justify-center mb-6 border border-white/20 shadow-xl",children:v.jsx(yC,{size:40,className:"text-white drop-shadow-md"})}),v.jsx("h3",{className:"text-indigo-200 text-sm font-black mb-1 uppercase tracking-widest",children:""}),v.jsx("p",{className:"text-6xl font-black mb-4 drop-shadow-lg",children:r.points.toLocaleString()}),v.jsx("div",{className:"px-5 py-1.5 bg-indigo-500/40 backdrop-blur rounded-full text-[10px] font-black tracking-[0.2em] uppercase border border-white/10",children:"SHOPPING POWER"})]})]}),v.jsxs("section",{className:"mt-16",children:[v.jsxs("div",{className:"flex items-center justify-between mb-8",children:[v.jsxs("h2",{className:"text-2xl font-black text-slate-800 flex items-center gap-3",children:[v.jsx(Zc,{className:"text-indigo-500",size:28}),""]}),v.jsx("div",{className:"flex items-center gap-4 text-xs font-bold text-slate-400",children:v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx(fC,{size:12,className:"text-amber-500"})," "]})})]}),v.jsx("div",{className:"grid grid-cols-1 gap-6",children:y.map(U=>{const j=M.has(U.id);return v.jsx("div",{className:`bg-white border-2 border-slate-50 p-8 rounded-[2.5rem] transition-all group relative overflow-hidden ${j?"opacity-60 grayscale":"shadow-sm hover:shadow-xl"} ${U.id===S?"animate-pulse":""}`,children:v.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-8",children:[v.jsxs("div",{className:"flex gap-8 items-start",children:[v.jsx("div",{className:`w-20 h-20 rounded-3xl flex items-center justify-center shrink-0 shadow-inner ${U.type==="normal"?"bg-emerald-50 text-emerald-600":U.type==="challenge"?"bg-orange-50 text-orange-600":"bg-rose-50 text-rose-600"}`,children:j?v.jsx(su,{size:36}):U.type==="normal"?v.jsx(Zc,{size:36}):U.type==="challenge"?v.jsx(NT,{size:36}):v.jsx(px,{size:36})}),v.jsxs("div",{children:[v.jsx("div",{className:"flex items-center gap-3 mb-2",children:v.jsx("span",{className:`px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-widest ${U.type==="normal"?"bg-emerald-100 text-emerald-700":U.type==="challenge"?"bg-orange-100 text-orange-700":"bg-rose-100 text-rose-700"}`,children:U.type==="normal"?"":U.type==="challenge"?"":""})}),v.jsx("h3",{className:"text-2xl font-black text-slate-800 transition-colors",children:U.title}),v.jsx("p",{className:"text-slate-500 mt-2 leading-relaxed text-lg font-medium max-w-2xl",children:U.description}),U.deadline&&v.jsxs("div",{className:`mt-3 flex items-center gap-2 text-sm font-black ${U.deadline<Date.now()?"text-rose-500":"text-amber-500"}`,children:[v.jsx(au,{size:16}),U.deadline<Date.now()?"":` ${new Date(U.deadline).toLocaleString()}`]})]})]}),v.jsxs("div",{className:"flex flex-col md:items-end gap-6 shrink-0",children:[v.jsxs("div",{className:"flex flex-col items-end",children:[v.jsx("span",{className:"text-xs font-bold text-slate-400 mb-1 uppercase tracking-tighter",children:""}),v.jsxs("div",{className:"flex items-baseline gap-2",children:[v.jsx("span",{className:"text-4xl font-black text-indigo-600 tracking-tighter",children:U.points}),v.jsx("span",{className:"text-sm font-bold text-slate-400",children:"PTS"})]})]}),v.jsxs("button",{onClick:()=>z(U),disabled:S!==null||j||b.some($=>$.missionId===U.id&&$.status==="pending")||U.deadline!==void 0&&U.deadline<Date.now(),className:`px-10 py-5 rounded-2xl font-black transition-all flex items-center gap-3 shadow-xl ${j?"bg-slate-200 text-slate-500 cursor-not-allowed shadow-none":b.some($=>$.missionId===U.id&&$.status==="pending")?"bg-amber-100 text-amber-600 cursor-not-allowed shadow-none":U.deadline!==void 0&&U.deadline<Date.now()?"bg-slate-200 text-slate-400 cursor-not-allowed shadow-none":U.type==="normal"?"bg-emerald-600 hover:bg-emerald-700 shadow-emerald-100":U.type==="challenge"?"bg-orange-600 hover:bg-orange-700 shadow-orange-100":"bg-rose-600 hover:bg-rose-700 shadow-rose-100"} text-white text-lg active:scale-95 disabled:active:scale-100`,children:[j?"":b.some($=>$.missionId===U.id&&$.status==="pending")?"":U.deadline!==void 0&&U.deadline<Date.now()?"":S===U.id?"...":"",!j&&!b.some($=>$.missionId===U.id&&$.status==="pending")&&(!U.deadline||U.deadline>=Date.now())&&v.jsx(Z0,{size:20})]})]})]})},U.id)})})]})]})},z8=({user:r,onUserUpdate:e})=>{const{showAlert:n}=tc(),[o,u]=ie.useState(null),[d,y]=ie.useState("all"),[T,b]=ie.useState([]),[_,S]=ie.useState([]),[I,M]=ie.useState([]),[V,K]=ie.useState(0);ie.useEffect(()=>{if(I.length>1){const le=setInterval(()=>{K(ae=>(ae+1)%I.length)},5e3);return()=>clearInterval(le)}},[I.length]),ie.useEffect(()=>{const le=EA(fe=>{b(fe)}),ae=gA(fe=>{S(fe)}),ee=Gg(M);return()=>{le(),ae(),ee()}},[]);const W=T.filter(le=>d==="all"||le.category===d),q=async()=>{if(r.role==="GUEST"){n("","info");return}if(!o||r.points<o.price||o.stock<=0)return;const le={id:`red_${Date.now()}`,userId:r.id,productId:o.id,productName:o.name,pointsSpent:o.price,timestamp:Date.now(),status:"pending",qrCodeData:`AUTH_WORKSHOP_${Date.now()}_${o.id}`},ae={...r,points:r.points-o.price};await O6(le),await ql(ae),await xA(o.id,1),e(),u(null),n("  QR Code","success")};return v.jsxs("div",{className:"space-y-8 pb-20",children:[v.jsxs("header",{children:[v.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:""}),v.jsx("p",{className:"text-slate-500 mt-1",children:""})]}),I.length>0&&v.jsxs("div",{className:"relative w-full h-48 md:h-64 rounded-[2.5rem] overflow-hidden shadow-2xl shadow-indigo-100 group",children:[v.jsx("div",{className:"flex transition-transform duration-700 ease-in-out h-full",style:{transform:`translateX(-${V*100}%)`},children:I.map(le=>v.jsxs("div",{className:"min-w-full h-full relative",children:[v.jsx("img",{src:le.imageUrl,alt:"banner",className:"w-full h-full object-cover"}),v.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent flex items-end p-8",children:v.jsx("div",{className:"mt-auto",children:v.jsx("span",{className:"bg-indigo-600/90 backdrop-blur text-white px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-[0.2em] shadow-lg",children:le.tag||""})})})]},le.id))}),v.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2",children:I.map((le,ae)=>v.jsx("button",{onClick:()=>K(ae),className:`w-2 h-2 rounded-full transition-all ${V===ae?"bg-white w-6":"bg-white/50 hover:bg-white/80"}`},ae))}),v.jsx("button",{onClick:()=>K(le=>(le-1+I.length)%I.length),className:"absolute left-4 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/40 backdrop-blur p-2 rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity",children:v.jsx(Wo,{className:"rotate-180",size:20})}),v.jsx("button",{onClick:()=>K(le=>(le+1)%I.length),className:"absolute right-4 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/40 backdrop-blur p-2 rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity",children:v.jsx(Wo,{size:20})})]}),v.jsxs("div",{className:"flex flex-wrap gap-2",children:[v.jsx("button",{onClick:()=>y("all"),className:`px-6 py-2.5 rounded-2xl text-sm font-bold transition-all ${d==="all"?"bg-indigo-600 text-white shadow-lg shadow-indigo-100":"bg-white text-slate-600 border border-slate-200 hover:border-indigo-300"}`,children:""}),_.map(le=>v.jsx("button",{onClick:()=>y(le.name),className:`px-6 py-2.5 rounded-2xl text-sm font-bold transition-all ${d===le.name?"bg-indigo-600 text-white shadow-lg shadow-indigo-100":"bg-white text-slate-600 border border-slate-200 hover:border-indigo-300"}`,children:le.name},le.id))]}),v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:W.map(le=>{const ae=r.points>=le.price,ee=le.stock<=0;return v.jsxs("div",{className:`bg-white rounded-[2rem] border border-slate-100 overflow-hidden shadow-sm hover:shadow-2xl transition-all flex flex-col group ${ee?"opacity-75 grayscale-[0.5]":""}`,children:[v.jsxs("div",{className:"relative h-56 overflow-hidden",children:[v.jsx("img",{src:le.imageUrl,alt:le.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700"}),v.jsx("div",{className:"absolute top-5 left-5",children:v.jsx("span",{className:"bg-white/90 backdrop-blur text-indigo-600 text-[10px] px-3 py-1.5 rounded-full font-black tracking-widest shadow-sm",children:le.category.toUpperCase()})}),ee&&v.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:v.jsx("span",{className:"text-white font-black text-2xl rotate-12 border-4 border-white px-4 py-1",children:"SOLD OUT"})})]}),v.jsxs("div",{className:"p-8 flex flex-col flex-1",children:[v.jsx("div",{className:"flex justify-between items-start mb-2",children:v.jsx("h3",{className:"font-black text-xl text-slate-800 leading-tight",children:le.name})}),v.jsx("p",{className:"text-slate-500 text-sm mb-6 flex-1 leading-relaxed",children:le.description}),v.jsxs("div",{className:"flex items-center gap-2 mb-6 text-slate-400 text-xs font-bold",children:[v.jsx(m1,{size:14}),v.jsxs("span",{children:["",v.jsxs("span",{className:le.stock<=5?"text-red-500":"text-slate-600",children:[le.stock," "]})]})]}),v.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[v.jsxs("div",{className:"flex items-center gap-1 text-indigo-600",children:[v.jsx("span",{className:"text-2xl font-black",children:le.price.toLocaleString()}),v.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-tighter",children:"pts"})]}),v.jsx("button",{onClick:()=>u(le),disabled:!ae||ee,className:`px-6 py-3 rounded-2xl font-black text-sm transition-all shadow-md ${ee?"bg-slate-100 text-slate-400 cursor-not-allowed shadow-none":ae?"bg-indigo-600 text-white hover:bg-indigo-700 hover:shadow-indigo-200 active:scale-95":"bg-slate-100 text-slate-400 cursor-not-allowed shadow-none"}`,children:ee?"":""})]})]})]},le.id)})}),o&&v.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:v.jsxs("div",{className:"bg-white rounded-[2.5rem] max-w-md w-full p-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[v.jsxs("div",{className:"flex justify-between items-start mb-8",children:[v.jsx("div",{className:"bg-indigo-50 p-4 rounded-2xl text-indigo-600",children:v.jsx(cC,{size:28})}),v.jsx("button",{onClick:()=>u(null),className:"text-slate-400 hover:text-slate-600 bg-slate-50 p-2 rounded-full",children:v.jsx(uo,{size:24})})]}),v.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-2",children:""}),v.jsxs("p",{className:"text-slate-500 mb-8 leading-relaxed",children:[" ",v.jsxs("span",{className:"font-black text-indigo-600",children:[o.price," "]}),"  ",v.jsxs("span",{className:"font-black text-slate-800",children:["",o.name,""]})," "]}),v.jsxs("div",{className:"bg-slate-50 rounded-[1.5rem] p-6 mb-8 border border-slate-100",children:[v.jsxs("div",{className:"flex justify-between text-sm mb-3",children:[v.jsx("span",{className:"text-slate-500 font-medium",children:""}),v.jsx("span",{className:"font-bold text-slate-800",children:r.points.toLocaleString()})]}),v.jsxs("div",{className:"flex justify-between text-sm mb-5",children:[v.jsx("span",{className:"text-slate-500 font-medium",children:""}),v.jsxs("span",{className:"font-bold text-red-500",children:["-",o.price.toLocaleString()]})]}),v.jsxs("div",{className:"border-t border-slate-200 pt-5 flex justify-between",children:[v.jsx("span",{className:"font-black text-slate-700 text-lg",children:""}),v.jsx("span",{className:"font-black text-indigo-600 text-2xl",children:(r.points-o.price).toLocaleString()})]})]}),v.jsxs("div",{className:"flex flex-col gap-3",children:[v.jsxs("button",{onClick:q,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-5 rounded-[1.25rem] transition-all shadow-xl shadow-indigo-100 flex items-center justify-center gap-3 text-lg",children:[v.jsx(Wo,{size:24}),""]}),v.jsx("button",{onClick:()=>u(null),className:"w-full bg-white border border-slate-200 text-slate-600 font-black py-4 rounded-[1.25rem] hover:bg-slate-50 transition-all",children:""})]})]})})]})};var H8=Object.defineProperty,Sf=Object.getOwnPropertySymbols,zA=Object.prototype.hasOwnProperty,HA=Object.prototype.propertyIsEnumerable,FE=(r,e,n)=>e in r?H8(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,X1=(r,e)=>{for(var n in e||(e={}))zA.call(e,n)&&FE(r,n,e[n]);if(Sf)for(var n of Sf(e))HA.call(e,n)&&FE(r,n,e[n]);return r},K1=(r,e)=>{var n={};for(var o in r)zA.call(r,o)&&e.indexOf(o)<0&&(n[o]=r[o]);if(r!=null&&Sf)for(var o of Sf(r))e.indexOf(o)<0&&HA.call(r,o)&&(n[o]=r[o]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var tl;(r=>{const e=class kt{constructor(b,_,S,I){if(this.version=b,this.errorCorrectionLevel=_,this.modules=[],this.isFunction=[],b<kt.MIN_VERSION||b>kt.MAX_VERSION)throw new RangeError("Version value out of range");if(I<-1||I>7)throw new RangeError("Mask value out of range");this.size=b*4+17;let M=[];for(let K=0;K<this.size;K++)M.push(!1);for(let K=0;K<this.size;K++)this.modules.push(M.slice()),this.isFunction.push(M.slice());this.drawFunctionPatterns();const V=this.addEccAndInterleave(S);if(this.drawCodewords(V),I==-1){let K=1e9;for(let W=0;W<8;W++){this.applyMask(W),this.drawFormatBits(W);const q=this.getPenaltyScore();q<K&&(I=W,K=q),this.applyMask(W)}}u(0<=I&&I<=7),this.mask=I,this.applyMask(I),this.drawFormatBits(I),this.isFunction=[]}static encodeText(b,_){const S=r.QrSegment.makeSegments(b);return kt.encodeSegments(S,_)}static encodeBinary(b,_){const S=r.QrSegment.makeBytes(b);return kt.encodeSegments([S],_)}static encodeSegments(b,_,S=1,I=40,M=-1,V=!0){if(!(kt.MIN_VERSION<=S&&S<=I&&I<=kt.MAX_VERSION)||M<-1||M>7)throw new RangeError("Invalid value");let K,W;for(K=S;;K++){const ee=kt.getNumDataCodewords(K,_)*8,fe=y.getTotalBits(b,K);if(fe<=ee){W=fe;break}if(K>=I)throw new RangeError("Data too long")}for(const ee of[kt.Ecc.MEDIUM,kt.Ecc.QUARTILE,kt.Ecc.HIGH])V&&W<=kt.getNumDataCodewords(K,ee)*8&&(_=ee);let q=[];for(const ee of b){n(ee.mode.modeBits,4,q),n(ee.numChars,ee.mode.numCharCountBits(K),q);for(const fe of ee.getData())q.push(fe)}u(q.length==W);const le=kt.getNumDataCodewords(K,_)*8;u(q.length<=le),n(0,Math.min(4,le-q.length),q),n(0,(8-q.length%8)%8,q),u(q.length%8==0);for(let ee=236;q.length<le;ee^=253)n(ee,8,q);let ae=[];for(;ae.length*8<q.length;)ae.push(0);return q.forEach((ee,fe)=>ae[fe>>>3]|=ee<<7-(fe&7)),new kt(K,_,ae,M)}getModule(b,_){return 0<=b&&b<this.size&&0<=_&&_<this.size&&this.modules[_][b]}getModules(){return this.modules}drawFunctionPatterns(){for(let S=0;S<this.size;S++)this.setFunctionModule(6,S,S%2==0),this.setFunctionModule(S,6,S%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const b=this.getAlignmentPatternPositions(),_=b.length;for(let S=0;S<_;S++)for(let I=0;I<_;I++)S==0&&I==0||S==0&&I==_-1||S==_-1&&I==0||this.drawAlignmentPattern(b[S],b[I]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(b){const _=this.errorCorrectionLevel.formatBits<<3|b;let S=_;for(let M=0;M<10;M++)S=S<<1^(S>>>9)*1335;const I=(_<<10|S)^21522;u(I>>>15==0);for(let M=0;M<=5;M++)this.setFunctionModule(8,M,o(I,M));this.setFunctionModule(8,7,o(I,6)),this.setFunctionModule(8,8,o(I,7)),this.setFunctionModule(7,8,o(I,8));for(let M=9;M<15;M++)this.setFunctionModule(14-M,8,o(I,M));for(let M=0;M<8;M++)this.setFunctionModule(this.size-1-M,8,o(I,M));for(let M=8;M<15;M++)this.setFunctionModule(8,this.size-15+M,o(I,M));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let b=this.version;for(let S=0;S<12;S++)b=b<<1^(b>>>11)*7973;const _=this.version<<12|b;u(_>>>18==0);for(let S=0;S<18;S++){const I=o(_,S),M=this.size-11+S%3,V=Math.floor(S/3);this.setFunctionModule(M,V,I),this.setFunctionModule(V,M,I)}}drawFinderPattern(b,_){for(let S=-4;S<=4;S++)for(let I=-4;I<=4;I++){const M=Math.max(Math.abs(I),Math.abs(S)),V=b+I,K=_+S;0<=V&&V<this.size&&0<=K&&K<this.size&&this.setFunctionModule(V,K,M!=2&&M!=4)}}drawAlignmentPattern(b,_){for(let S=-2;S<=2;S++)for(let I=-2;I<=2;I++)this.setFunctionModule(b+I,_+S,Math.max(Math.abs(I),Math.abs(S))!=1)}setFunctionModule(b,_,S){this.modules[_][b]=S,this.isFunction[_][b]=!0}addEccAndInterleave(b){const _=this.version,S=this.errorCorrectionLevel;if(b.length!=kt.getNumDataCodewords(_,S))throw new RangeError("Invalid argument");const I=kt.NUM_ERROR_CORRECTION_BLOCKS[S.ordinal][_],M=kt.ECC_CODEWORDS_PER_BLOCK[S.ordinal][_],V=Math.floor(kt.getNumRawDataModules(_)/8),K=I-V%I,W=Math.floor(V/I);let q=[];const le=kt.reedSolomonComputeDivisor(M);for(let ee=0,fe=0;ee<I;ee++){let je=b.slice(fe,fe+W-M+(ee<K?0:1));fe+=je.length;const De=kt.reedSolomonComputeRemainder(je,le);ee<K&&je.push(0),q.push(je.concat(De))}let ae=[];for(let ee=0;ee<q[0].length;ee++)q.forEach((fe,je)=>{(ee!=W-M||je>=K)&&ae.push(fe[ee])});return u(ae.length==V),ae}drawCodewords(b){if(b.length!=Math.floor(kt.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let _=0;for(let S=this.size-1;S>=1;S-=2){S==6&&(S=5);for(let I=0;I<this.size;I++)for(let M=0;M<2;M++){const V=S-M,W=(S+1&2)==0?this.size-1-I:I;!this.isFunction[W][V]&&_<b.length*8&&(this.modules[W][V]=o(b[_>>>3],7-(_&7)),_++)}}u(_==b.length*8)}applyMask(b){if(b<0||b>7)throw new RangeError("Mask value out of range");for(let _=0;_<this.size;_++)for(let S=0;S<this.size;S++){let I;switch(b){case 0:I=(S+_)%2==0;break;case 1:I=_%2==0;break;case 2:I=S%3==0;break;case 3:I=(S+_)%3==0;break;case 4:I=(Math.floor(S/3)+Math.floor(_/2))%2==0;break;case 5:I=S*_%2+S*_%3==0;break;case 6:I=(S*_%2+S*_%3)%2==0;break;case 7:I=((S+_)%2+S*_%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[_][S]&&I&&(this.modules[_][S]=!this.modules[_][S])}}getPenaltyScore(){let b=0;for(let M=0;M<this.size;M++){let V=!1,K=0,W=[0,0,0,0,0,0,0];for(let q=0;q<this.size;q++)this.modules[M][q]==V?(K++,K==5?b+=kt.PENALTY_N1:K>5&&b++):(this.finderPenaltyAddHistory(K,W),V||(b+=this.finderPenaltyCountPatterns(W)*kt.PENALTY_N3),V=this.modules[M][q],K=1);b+=this.finderPenaltyTerminateAndCount(V,K,W)*kt.PENALTY_N3}for(let M=0;M<this.size;M++){let V=!1,K=0,W=[0,0,0,0,0,0,0];for(let q=0;q<this.size;q++)this.modules[q][M]==V?(K++,K==5?b+=kt.PENALTY_N1:K>5&&b++):(this.finderPenaltyAddHistory(K,W),V||(b+=this.finderPenaltyCountPatterns(W)*kt.PENALTY_N3),V=this.modules[q][M],K=1);b+=this.finderPenaltyTerminateAndCount(V,K,W)*kt.PENALTY_N3}for(let M=0;M<this.size-1;M++)for(let V=0;V<this.size-1;V++){const K=this.modules[M][V];K==this.modules[M][V+1]&&K==this.modules[M+1][V]&&K==this.modules[M+1][V+1]&&(b+=kt.PENALTY_N2)}let _=0;for(const M of this.modules)_=M.reduce((V,K)=>V+(K?1:0),_);const S=this.size*this.size,I=Math.ceil(Math.abs(_*20-S*10)/S)-1;return u(0<=I&&I<=9),b+=I*kt.PENALTY_N4,u(0<=b&&b<=2568888),b}getAlignmentPatternPositions(){if(this.version==1)return[];{const b=Math.floor(this.version/7)+2,_=this.version==32?26:Math.ceil((this.version*4+4)/(b*2-2))*2;let S=[6];for(let I=this.size-7;S.length<b;I-=_)S.splice(1,0,I);return S}}static getNumRawDataModules(b){if(b<kt.MIN_VERSION||b>kt.MAX_VERSION)throw new RangeError("Version number out of range");let _=(16*b+128)*b+64;if(b>=2){const S=Math.floor(b/7)+2;_-=(25*S-10)*S-55,b>=7&&(_-=36)}return u(208<=_&&_<=29648),_}static getNumDataCodewords(b,_){return Math.floor(kt.getNumRawDataModules(b)/8)-kt.ECC_CODEWORDS_PER_BLOCK[_.ordinal][b]*kt.NUM_ERROR_CORRECTION_BLOCKS[_.ordinal][b]}static reedSolomonComputeDivisor(b){if(b<1||b>255)throw new RangeError("Degree out of range");let _=[];for(let I=0;I<b-1;I++)_.push(0);_.push(1);let S=1;for(let I=0;I<b;I++){for(let M=0;M<_.length;M++)_[M]=kt.reedSolomonMultiply(_[M],S),M+1<_.length&&(_[M]^=_[M+1]);S=kt.reedSolomonMultiply(S,2)}return _}static reedSolomonComputeRemainder(b,_){let S=_.map(I=>0);for(const I of b){const M=I^S.shift();S.push(0),_.forEach((V,K)=>S[K]^=kt.reedSolomonMultiply(V,M))}return S}static reedSolomonMultiply(b,_){if(b>>>8||_>>>8)throw new RangeError("Byte out of range");let S=0;for(let I=7;I>=0;I--)S=S<<1^(S>>>7)*285,S^=(_>>>I&1)*b;return u(S>>>8==0),S}finderPenaltyCountPatterns(b){const _=b[1];u(_<=this.size*3);const S=_>0&&b[2]==_&&b[3]==_*3&&b[4]==_&&b[5]==_;return(S&&b[0]>=_*4&&b[6]>=_?1:0)+(S&&b[6]>=_*4&&b[0]>=_?1:0)}finderPenaltyTerminateAndCount(b,_,S){return b&&(this.finderPenaltyAddHistory(_,S),_=0),_+=this.size,this.finderPenaltyAddHistory(_,S),this.finderPenaltyCountPatterns(S)}finderPenaltyAddHistory(b,_){_[0]==0&&(b+=this.size),_.pop(),_.unshift(b)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],r.QrCode=e;function n(T,b,_){if(b<0||b>31||T>>>b)throw new RangeError("Value out of range");for(let S=b-1;S>=0;S--)_.push(T>>>S&1)}function o(T,b){return(T>>>b&1)!=0}function u(T){if(!T)throw new Error("Assertion error")}const d=class Jn{constructor(b,_,S){if(this.mode=b,this.numChars=_,this.bitData=S,_<0)throw new RangeError("Invalid argument");this.bitData=S.slice()}static makeBytes(b){let _=[];for(const S of b)n(S,8,_);return new Jn(Jn.Mode.BYTE,b.length,_)}static makeNumeric(b){if(!Jn.isNumeric(b))throw new RangeError("String contains non-numeric characters");let _=[];for(let S=0;S<b.length;){const I=Math.min(b.length-S,3);n(parseInt(b.substring(S,S+I),10),I*3+1,_),S+=I}return new Jn(Jn.Mode.NUMERIC,b.length,_)}static makeAlphanumeric(b){if(!Jn.isAlphanumeric(b))throw new RangeError("String contains unencodable characters in alphanumeric mode");let _=[],S;for(S=0;S+2<=b.length;S+=2){let I=Jn.ALPHANUMERIC_CHARSET.indexOf(b.charAt(S))*45;I+=Jn.ALPHANUMERIC_CHARSET.indexOf(b.charAt(S+1)),n(I,11,_)}return S<b.length&&n(Jn.ALPHANUMERIC_CHARSET.indexOf(b.charAt(S)),6,_),new Jn(Jn.Mode.ALPHANUMERIC,b.length,_)}static makeSegments(b){return b==""?[]:Jn.isNumeric(b)?[Jn.makeNumeric(b)]:Jn.isAlphanumeric(b)?[Jn.makeAlphanumeric(b)]:[Jn.makeBytes(Jn.toUtf8ByteArray(b))]}static makeEci(b){let _=[];if(b<0)throw new RangeError("ECI assignment value out of range");if(b<128)n(b,8,_);else if(b<16384)n(2,2,_),n(b,14,_);else if(b<1e6)n(6,3,_),n(b,21,_);else throw new RangeError("ECI assignment value out of range");return new Jn(Jn.Mode.ECI,0,_)}static isNumeric(b){return Jn.NUMERIC_REGEX.test(b)}static isAlphanumeric(b){return Jn.ALPHANUMERIC_REGEX.test(b)}getData(){return this.bitData.slice()}static getTotalBits(b,_){let S=0;for(const I of b){const M=I.mode.numCharCountBits(_);if(I.numChars>=1<<M)return 1/0;S+=4+M+I.bitData.length}return S}static toUtf8ByteArray(b){b=encodeURI(b);let _=[];for(let S=0;S<b.length;S++)b.charAt(S)!="%"?_.push(b.charCodeAt(S)):(_.push(parseInt(b.substring(S+1,S+3),16)),S+=2);return _}};d.NUMERIC_REGEX=/^[0-9]*$/,d.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,d.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let y=d;r.QrSegment=d})(tl||(tl={}));(r=>{(e=>{const n=class{constructor(u,d){this.ordinal=u,this.formatBits=d}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),e.Ecc=n})(r.QrCode||(r.QrCode={}))})(tl||(tl={}));(r=>{(e=>{const n=class{constructor(u,d){this.modeBits=u,this.numBitsCharCount=d}numCharCountBits(u){return this.numBitsCharCount[Math.floor((u+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),e.Mode=n})(r.QrSegment||(r.QrSegment={}))})(tl||(tl={}));var zl=tl;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var G8={L:zl.QrCode.Ecc.LOW,M:zl.QrCode.Ecc.MEDIUM,Q:zl.QrCode.Ecc.QUARTILE,H:zl.QrCode.Ecc.HIGH},GA=128,YA="L",qA="#FFFFFF",XA="#000000",KA=!1,WA=1,Y8=4,q8=0,X8=.1;function QA(r,e=0){const n=[];return r.forEach(function(o,u){let d=null;o.forEach(function(y,T){if(!y&&d!==null){n.push(`M${d+e} ${u+e}h${T-d}v1H${d+e}z`),d=null;return}if(T===o.length-1){if(!y)return;d===null?n.push(`M${T+e},${u+e} h1v1H${T+e}z`):n.push(`M${d+e},${u+e} h${T+1-d}v1H${d+e}z`);return}y&&d===null&&(d=T)})}),n.join("")}function ZA(r,e){return r.slice().map((n,o)=>o<e.y||o>=e.y+e.h?n:n.map((u,d)=>d<e.x||d>=e.x+e.w?u:!1))}function K8(r,e,n,o){if(o==null)return null;const u=r.length+n*2,d=Math.floor(e*X8),y=u/e,T=(o.width||d)*y,b=(o.height||d)*y,_=o.x==null?r.length/2-T/2:o.x*y,S=o.y==null?r.length/2-b/2:o.y*y,I=o.opacity==null?1:o.opacity;let M=null;if(o.excavate){let K=Math.floor(_),W=Math.floor(S),q=Math.ceil(T+_-K),le=Math.ceil(b+S-W);M={x:K,y:W,w:q,h:le}}const V=o.crossOrigin;return{x:_,y:S,h:b,w:T,excavation:M,opacity:I,crossOrigin:V}}function W8(r,e){return e!=null?Math.max(Math.floor(e),0):r?Y8:q8}function JA({value:r,level:e,minVersion:n,includeMargin:o,marginSize:u,imageSettings:d,size:y,boostLevel:T}){let b=er.useMemo(()=>{const K=(Array.isArray(r)?r:[r]).reduce((W,q)=>(W.push(...zl.QrSegment.makeSegments(q)),W),[]);return zl.QrCode.encodeSegments(K,G8[e],n,void 0,void 0,T)},[r,e,n,T]);const{cells:_,margin:S,numCells:I,calculatedImageSettings:M}=er.useMemo(()=>{let V=b.getModules();const K=W8(o,u),W=V.length+K*2,q=K8(V,y,K,d);return{cells:V,margin:K,numCells:W,calculatedImageSettings:q}},[b,y,d,o,u]);return{qrcode:b,margin:S,cells:_,numCells:I,calculatedImageSettings:M}}var Q8=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),Z8=er.forwardRef(function(e,n){const o=e,{value:u,size:d=GA,level:y=YA,bgColor:T=qA,fgColor:b=XA,includeMargin:_=KA,minVersion:S=WA,boostLevel:I,marginSize:M,imageSettings:V}=o,W=K1(o,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:q}=W,le=K1(W,["style"]),ae=V==null?void 0:V.src,ee=er.useRef(null),fe=er.useRef(null),je=er.useCallback(We=>{ee.current=We,typeof n=="function"?n(We):n&&(n.current=We)},[n]),[De,z]=er.useState(!1),{margin:U,cells:j,numCells:$,calculatedImageSettings:Q}=JA({value:u,level:y,minVersion:S,boostLevel:I,includeMargin:_,marginSize:M,imageSettings:V,size:d});er.useEffect(()=>{if(ee.current!=null){const We=ee.current,de=We.getContext("2d");if(!de)return;let pe=j;const be=fe.current,He=Q!=null&&be!==null&&be.complete&&be.naturalHeight!==0&&be.naturalWidth!==0;He&&Q.excavation!=null&&(pe=ZA(j,Q.excavation));const ot=window.devicePixelRatio||1;We.height=We.width=d*ot;const gt=d/$*ot;de.scale(gt,gt),de.fillStyle=T,de.fillRect(0,0,$,$),de.fillStyle=b,Q8?de.fill(new Path2D(QA(pe,U))):j.forEach(function(re,Ae){re.forEach(function(Be,ke){Be&&de.fillRect(ke+U,Ae+U,1,1)})}),Q&&(de.globalAlpha=Q.opacity),He&&de.drawImage(be,Q.x+U,Q.y+U,Q.w,Q.h)}}),er.useEffect(()=>{z(!1)},[ae]);const Z=X1({height:d,width:d},q);let X=null;return ae!=null&&(X=er.createElement("img",{src:ae,key:ae,style:{display:"none"},onLoad:()=>{z(!0)},ref:fe,crossOrigin:Q==null?void 0:Q.crossOrigin})),er.createElement(er.Fragment,null,er.createElement("canvas",X1({style:Z,height:d,width:d,ref:je,role:"img"},le)),X)});Z8.displayName="QRCodeCanvas";var $A=er.forwardRef(function(e,n){const o=e,{value:u,size:d=GA,level:y=YA,bgColor:T=qA,fgColor:b=XA,includeMargin:_=KA,minVersion:S=WA,boostLevel:I,title:M,marginSize:V,imageSettings:K}=o,W=K1(o,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:q,cells:le,numCells:ae,calculatedImageSettings:ee}=JA({value:u,level:y,minVersion:S,boostLevel:I,includeMargin:_,marginSize:V,imageSettings:K,size:d});let fe=le,je=null;K!=null&&ee!=null&&(ee.excavation!=null&&(fe=ZA(le,ee.excavation)),je=er.createElement("image",{href:K.src,height:ee.h,width:ee.w,x:ee.x+q,y:ee.y+q,preserveAspectRatio:"none",opacity:ee.opacity,crossOrigin:ee.crossOrigin}));const De=QA(fe,q);return er.createElement("svg",X1({height:d,width:d,viewBox:`0 0 ${ae} ${ae}`,ref:n,role:"img"},W),!!M&&er.createElement("title",null,M),er.createElement("path",{fill:T,d:`M0,0 h${ae}v${ae}H0z`,shapeRendering:"crispEdges"}),er.createElement("path",{fill:b,d:De,shapeRendering:"crispEdges"}),je)});$A.displayName="QRCodeSVG";const J8=({user:r})=>{const[e,n]=ie.useState([]),[o,u]=ie.useState(null),[d,y]=ie.useState(()=>{const _=new Date;return`${_.getFullYear()}-${String(_.getMonth()+1).padStart(2,"0")}`});ie.useEffect(()=>{const _=wA(S=>{n(S.filter(I=>I.userId===r.id))});return()=>_()},[r.id]);const T=_=>new Date(_).toLocaleString("zh-TW",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),b=e.filter(_=>{const S=new Date(_.timestamp);return`${S.getFullYear()}-${String(S.getMonth()+1).padStart(2,"0")}`===d});return v.jsxs("div",{className:"space-y-8 animate-in slide-in-from-bottom-4 duration-500",children:[v.jsxs("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[v.jsxs("div",{children:[v.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:""}),v.jsx("p",{className:"text-slate-500 mt-1",children:""})]}),v.jsxs("div",{className:"flex items-center gap-3 bg-white p-2 rounded-2xl border border-slate-100 shadow-sm",children:[v.jsx(dx,{size:18,className:"text-indigo-600 ml-2"}),v.jsx("input",{type:"month",value:d,onChange:_=>y(_.target.value),className:"border-none bg-transparent font-bold text-slate-600 outline-none p-1"})]})]}),b.length===0?v.jsxs("div",{className:"bg-white rounded-3xl p-12 text-center border border-dashed border-slate-200",children:[v.jsx("div",{className:"bg-slate-50 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 text-slate-300",children:v.jsx(rf,{size:40})}),v.jsx("h2",{className:"text-xl font-bold text-slate-800",children:""}),v.jsx("p",{className:"text-slate-400 mt-2",children:""})]}):v.jsx("div",{className:"space-y-4",children:b.map(_=>v.jsxs("div",{className:"bg-white rounded-3xl border border-slate-100 p-6 flex flex-col md:flex-row md:items-center justify-between gap-6 shadow-sm hover:shadow-md transition-shadow",children:[v.jsxs("div",{className:"flex gap-4",children:[v.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center shrink-0 ${_.status==="completed"?"bg-green-50 text-green-600":_.status==="pending"?"bg-indigo-50 text-indigo-600":"bg-red-50 text-red-600"}`,children:_.status==="completed"?v.jsx(AT,{size:24}):_.status==="pending"?v.jsx(au,{size:24}):v.jsx(__,{size:24})}),v.jsxs("div",{children:[v.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:_.productName||""}),v.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-400 mt-1",children:[v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx(dx,{size:12})," ",T(_.timestamp||Date.now())]}),v.jsxs("span",{className:"font-bold text-indigo-600",children:["-",_.pointsSpent||0," "]})]})]})]}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("div",{className:`px-4 py-1.5 rounded-full text-xs font-bold ${_.status==="completed"?"bg-green-100 text-green-700":_.status==="pending"?"bg-indigo-100 text-indigo-700":"bg-red-100 text-red-700"}`,children:_.status==="completed"?"":_.status==="pending"?"":""}),_.status==="pending"&&v.jsxs("button",{onClick:()=>u(_),className:"flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-2.5 rounded-xl text-sm font-bold transition-all shadow-lg shadow-indigo-100",children:[v.jsx(KT,{size:18}),""]})]})]},_.id))}),o&&v.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:v.jsxs("div",{className:"bg-white rounded-[2.5rem] max-w-sm w-full p-10 shadow-2xl animate-in zoom-in-95 duration-200 text-center",children:[v.jsx("div",{className:"flex justify-end mb-4 -mt-4 -mr-4",children:v.jsx("button",{onClick:()=>u(null),className:"text-slate-400 hover:text-slate-600 p-2",children:v.jsx(uo,{size:28})})}),v.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:""}),v.jsx("p",{className:"text-slate-500 mb-8 text-sm",children:""}),v.jsx("div",{className:"aspect-square bg-white border-8 border-indigo-50 rounded-3xl flex items-center justify-center mb-8 shadow-inner overflow-hidden p-6",children:v.jsx($A,{value:o.qrCodeData,size:256,level:"H",includeMargin:!1,className:"w-full h-full"})}),v.jsx("div",{className:"bg-slate-50 p-4 rounded-2xl text-slate-400 font-mono text-xs mb-8 tracking-widest uppercase",children:o.qrCodeData}),v.jsx("p",{className:"font-bold text-slate-800 mb-1",children:o.productName}),v.jsxs("p",{className:"text-xs text-slate-400",children:["ID: ",o.id]})]})})]})};var Ye;(function(r){r[r.QR_CODE=0]="QR_CODE",r[r.AZTEC=1]="AZTEC",r[r.CODABAR=2]="CODABAR",r[r.CODE_39=3]="CODE_39",r[r.CODE_93=4]="CODE_93",r[r.CODE_128=5]="CODE_128",r[r.DATA_MATRIX=6]="DATA_MATRIX",r[r.MAXICODE=7]="MAXICODE",r[r.ITF=8]="ITF",r[r.EAN_13=9]="EAN_13",r[r.EAN_8=10]="EAN_8",r[r.PDF_417=11]="PDF_417",r[r.RSS_14=12]="RSS_14",r[r.RSS_EXPANDED=13]="RSS_EXPANDED",r[r.UPC_A=14]="UPC_A",r[r.UPC_E=15]="UPC_E",r[r.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ye||(Ye={}));var zE=new Map([[Ye.QR_CODE,"QR_CODE"],[Ye.AZTEC,"AZTEC"],[Ye.CODABAR,"CODABAR"],[Ye.CODE_39,"CODE_39"],[Ye.CODE_93,"CODE_93"],[Ye.CODE_128,"CODE_128"],[Ye.DATA_MATRIX,"DATA_MATRIX"],[Ye.MAXICODE,"MAXICODE"],[Ye.ITF,"ITF"],[Ye.EAN_13,"EAN_13"],[Ye.EAN_8,"EAN_8"],[Ye.PDF_417,"PDF_417"],[Ye.RSS_14,"RSS_14"],[Ye.RSS_EXPANDED,"RSS_EXPANDED"],[Ye.UPC_A,"UPC_A"],[Ye.UPC_E,"UPC_E"],[Ye.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),HE;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.URL=1]="URL"})(HE||(HE={}));function $8(r){return Object.values(Ye).includes(r)}var If;(function(r){r[r.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",r[r.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(If||(If={}));var eR=(function(){function r(){}return r.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",r.SCAN_DEFAULT_FPS=2,r.DEFAULT_DISABLE_FLIP=!1,r.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,r.DEFAULT_SUPPORTED_SCAN_TYPE=[If.SCAN_TYPE_CAMERA,If.SCAN_TYPE_FILE],r})(),eb=(function(){function r(e,n){this.format=e,this.formatName=n}return r.prototype.toString=function(){return this.formatName},r.create=function(e){if(!zE.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new r(e,zE.get(e))},r})(),GE=(function(){function r(){}return r.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},r.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},r})(),W1;(function(r){r[r.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",r[r.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",r[r.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(W1||(W1={}));var tR=(function(){function r(){}return r.createFrom=function(e){return{errorMessage:e,type:W1.UNKWOWN_ERROR}},r})(),nR=(function(){function r(e){this.verbose=e}return r.prototype.log=function(e){this.verbose&&console.log(e)},r.prototype.warn=function(e){this.verbose&&console.warn(e)},r.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},r.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},r})();function Aa(r){return typeof r>"u"||r===null}var Hl=(function(){function r(){}return r.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},r.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},r.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},r.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},r.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},r.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},r.scannerPaused=function(){return"Scanner paused"},r})(),tb=(function(){function r(){}return r.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var o=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(o,"."),!0),!1}for(var u=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],d=new Set(u),y=Object.keys(e),T=0,b=y;T<b.length;T++){var _=b[T];if(d.has(_))return n.logError("".concat(_," is not supported videoConstaints."),!0),!1}return!0},r})(),Qc={exports:{}},rR=Qc.exports,YE;function iR(){return YE||(YE=1,(function(r,e){(function(n,o){o(e)})(rR,(function(n){function o(L){return L==null}var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,i){L.__proto__=i}||function(L,i){for(var a in i)i.hasOwnProperty(a)&&(L[a]=i[a])};function d(L,i){u(L,i);function a(){this.constructor=L}L.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}function y(L,i){var a=Object.setPrototypeOf;a?a(L,i):L.__proto__=i}function T(L,i){i===void 0&&(i=L.constructor);var a=Error.captureStackTrace;a&&a(L,i)}var b=(function(L){d(i,L);function i(a){var l=this.constructor,h=L.call(this,a)||this;return Object.defineProperty(h,"name",{value:l.name,enumerable:!1}),y(h,l.prototype),T(h),h}return i})(Error);class _ extends b{constructor(i=void 0){super(i),this.message=i}getKind(){return this.constructor.kind}}_.kind="Exception";class S extends _{}S.kind="ArgumentException";class I extends _{}I.kind="IllegalArgumentException";class M{constructor(i){if(this.binarizer=i,i===null)throw new I("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(i,a){return this.binarizer.getBlackRow(i,a)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(i,a,l,h){const f=this.binarizer.getLuminanceSource().crop(i,a,l,h);return new M(this.binarizer.createBinarizer(f))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new M(this.binarizer.createBinarizer(i))}rotateCounterClockwise45(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new M(this.binarizer.createBinarizer(i))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class V extends _{static getChecksumInstance(){return new V}}V.kind="ChecksumException";class K{constructor(i){this.source=i}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class W{static arraycopy(i,a,l,h,f){for(;f--;)l[h++]=i[a++]}static currentTimeMillis(){return Date.now()}}class q extends _{}q.kind="IndexOutOfBoundsException";class le extends q{constructor(i=void 0,a=void 0){super(a),this.index=i,this.message=a}}le.kind="ArrayIndexOutOfBoundsException";class ae{static fill(i,a){for(let l=0,h=i.length;l<h;l++)i[l]=a}static fillWithin(i,a,l,h){ae.rangeCheck(i.length,a,l);for(let f=a;f<l;f++)i[f]=h}static rangeCheck(i,a,l){if(a>l)throw new I("fromIndex("+a+") > toIndex("+l+")");if(a<0)throw new le(a);if(l>i)throw new le(l)}static asList(...i){return i}static create(i,a,l){return Array.from({length:i}).map(f=>Array.from({length:a}).fill(l))}static createInt32Array(i,a,l){return Array.from({length:i}).map(f=>Int32Array.from({length:a}).fill(l))}static equals(i,a){if(!i||!a||!i.length||!a.length||i.length!==a.length)return!1;for(let l=0,h=i.length;l<h;l++)if(i[l]!==a[l])return!1;return!0}static hashCode(i){if(i===null)return 0;let a=1;for(const l of i)a=31*a+l;return a}static fillUint8Array(i,a){for(let l=0;l!==i.length;l++)i[l]=a}static copyOf(i,a){return i.slice(0,a)}static copyOfUint8Array(i,a){if(i.length<=a){const l=new Uint8Array(a);return l.set(i),l}return i.slice(0,a)}static copyOfRange(i,a,l){const h=l-a,f=new Int32Array(h);return W.arraycopy(i,a,f,0,h),f}static binarySearch(i,a,l){l===void 0&&(l=ae.numberComparator);let h=0,f=i.length-1;for(;h<=f;){const m=f+h>>1,x=l(a,i[m]);if(x>0)h=m+1;else if(x<0)f=m-1;else return m}return-h-1}static numberComparator(i,a){return i-a}}class ee{static numberOfTrailingZeros(i){let a;if(i===0)return 32;let l=31;return a=i<<16,a!==0&&(l-=16,i=a),a=i<<8,a!==0&&(l-=8,i=a),a=i<<4,a!==0&&(l-=4,i=a),a=i<<2,a!==0&&(l-=2,i=a),l-(i<<1>>>31)}static numberOfLeadingZeros(i){if(i===0)return 32;let a=1;return i>>>16||(a+=16,i<<=16),i>>>24||(a+=8,i<<=8),i>>>28||(a+=4,i<<=4),i>>>30||(a+=2,i<<=2),a-=i>>>31,a}static toHexString(i){return i.toString(16)}static toBinaryString(i){return String(parseInt(String(i),2))}static bitCount(i){return i=i-(i>>>1&1431655765),i=(i&858993459)+(i>>>2&858993459),i=i+(i>>>4)&252645135,i=i+(i>>>8),i=i+(i>>>16),i&63}static truncDivision(i,a){return Math.trunc(i/a)}static parseInt(i,a=void 0){return parseInt(i,a)}}ee.MIN_VALUE_32_BITS=-2147483648,ee.MAX_VALUE=Number.MAX_SAFE_INTEGER;class fe{constructor(i,a){i===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=i,a==null?this.bits=fe.makeArray(i):this.bits=a)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(i){if(i>this.bits.length*32){const a=fe.makeArray(i);W.arraycopy(this.bits,0,a,0,this.bits.length),this.bits=a}}get(i){return(this.bits[Math.floor(i/32)]&1<<(i&31))!==0}set(i){this.bits[Math.floor(i/32)]|=1<<(i&31)}flip(i){this.bits[Math.floor(i/32)]^=1<<(i&31)}getNextSet(i){const a=this.size;if(i>=a)return a;const l=this.bits;let h=Math.floor(i/32),f=l[h];f&=~((1<<(i&31))-1);const m=l.length;for(;f===0;){if(++h===m)return a;f=l[h]}const x=h*32+ee.numberOfTrailingZeros(f);return x>a?a:x}getNextUnset(i){const a=this.size;if(i>=a)return a;const l=this.bits;let h=Math.floor(i/32),f=~l[h];f&=~((1<<(i&31))-1);const m=l.length;for(;f===0;){if(++h===m)return a;f=~l[h]}const x=h*32+ee.numberOfTrailingZeros(f);return x>a?a:x}setBulk(i,a){this.bits[Math.floor(i/32)]=a}setRange(i,a){if(a<i||i<0||a>this.size)throw new I;if(a===i)return;a--;const l=Math.floor(i/32),h=Math.floor(a/32),f=this.bits;for(let m=l;m<=h;m++){const x=m>l?0:i&31,C=(2<<(m<h?31:a&31))-(1<<x);f[m]|=C}}clear(){const i=this.bits.length,a=this.bits;for(let l=0;l<i;l++)a[l]=0}isRange(i,a,l){if(a<i||i<0||a>this.size)throw new I;if(a===i)return!0;a--;const h=Math.floor(i/32),f=Math.floor(a/32),m=this.bits;for(let x=h;x<=f;x++){const w=x>h?0:i&31,R=(2<<(x<f?31:a&31))-(1<<w)&4294967295;if((m[x]&R)!==(l?R:0))return!1}return!0}appendBit(i){this.ensureCapacity(this.size+1),i&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(i,a){if(a<0||a>32)throw new I("Num bits must be between 0 and 32");this.ensureCapacity(this.size+a);for(let l=a;l>0;l--)this.appendBit((i>>l-1&1)===1)}appendBitArray(i){const a=i.size;this.ensureCapacity(this.size+a);for(let l=0;l<a;l++)this.appendBit(i.get(l))}xor(i){if(this.size!==i.size)throw new I("Sizes don't match");const a=this.bits;for(let l=0,h=a.length;l<h;l++)a[l]^=i.bits[l]}toBytes(i,a,l,h){for(let f=0;f<h;f++){let m=0;for(let x=0;x<8;x++)this.get(i)&&(m|=1<<7-x),i++;a[l+f]=m}}getBitArray(){return this.bits}reverse(){const i=new Int32Array(this.bits.length),a=Math.floor((this.size-1)/32),l=a+1,h=this.bits;for(let f=0;f<l;f++){let m=h[f];m=m>>1&1431655765|(m&1431655765)<<1,m=m>>2&858993459|(m&858993459)<<2,m=m>>4&252645135|(m&252645135)<<4,m=m>>8&16711935|(m&16711935)<<8,m=m>>16&65535|(m&65535)<<16,i[a-f]=m}if(this.size!==l*32){const f=l*32-this.size;let m=i[0]>>>f;for(let x=1;x<l;x++){const w=i[x];m|=w<<32-f,i[x-1]=m,m=w>>>f}i[l-1]=m}this.bits=i}static makeArray(i){return new Int32Array(Math.floor((i+31)/32))}equals(i){if(!(i instanceof fe))return!1;const a=i;return this.size===a.size&&ae.equals(this.bits,a.bits)}hashCode(){return 31*this.size+ae.hashCode(this.bits)}toString(){let i="";for(let a=0,l=this.size;a<l;a++)(a&7)===0&&(i+=" "),i+=this.get(a)?"X":".";return i}clone(){return new fe(this.size,this.bits.slice())}}var je;(function(L){L[L.OTHER=0]="OTHER",L[L.PURE_BARCODE=1]="PURE_BARCODE",L[L.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",L[L.TRY_HARDER=3]="TRY_HARDER",L[L.CHARACTER_SET=4]="CHARACTER_SET",L[L.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",L[L.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",L[L.ASSUME_GS1=7]="ASSUME_GS1",L[L.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",L[L.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",L[L.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(je||(je={}));var De=je;class z extends _{static getFormatInstance(){return new z}}z.kind="FormatException";var U;(function(L){L[L.Cp437=0]="Cp437",L[L.ISO8859_1=1]="ISO8859_1",L[L.ISO8859_2=2]="ISO8859_2",L[L.ISO8859_3=3]="ISO8859_3",L[L.ISO8859_4=4]="ISO8859_4",L[L.ISO8859_5=5]="ISO8859_5",L[L.ISO8859_6=6]="ISO8859_6",L[L.ISO8859_7=7]="ISO8859_7",L[L.ISO8859_8=8]="ISO8859_8",L[L.ISO8859_9=9]="ISO8859_9",L[L.ISO8859_10=10]="ISO8859_10",L[L.ISO8859_11=11]="ISO8859_11",L[L.ISO8859_13=12]="ISO8859_13",L[L.ISO8859_14=13]="ISO8859_14",L[L.ISO8859_15=14]="ISO8859_15",L[L.ISO8859_16=15]="ISO8859_16",L[L.SJIS=16]="SJIS",L[L.Cp1250=17]="Cp1250",L[L.Cp1251=18]="Cp1251",L[L.Cp1252=19]="Cp1252",L[L.Cp1256=20]="Cp1256",L[L.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",L[L.UTF8=22]="UTF8",L[L.ASCII=23]="ASCII",L[L.Big5=24]="Big5",L[L.GB18030=25]="GB18030",L[L.EUC_KR=26]="EUC_KR"})(U||(U={}));class j{constructor(i,a,l,...h){this.valueIdentifier=i,this.name=l,typeof a=="number"?this.values=Int32Array.from([a]):this.values=a,this.otherEncodingNames=h,j.VALUE_IDENTIFIER_TO_ECI.set(i,this),j.NAME_TO_ECI.set(l,this);const f=this.values;for(let m=0,x=f.length;m!==x;m++){const w=f[m];j.VALUES_TO_ECI.set(w,this)}for(const m of h)j.NAME_TO_ECI.set(m,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(i){if(i<0||i>=900)throw new z("incorect value");const a=j.VALUES_TO_ECI.get(i);if(a===void 0)throw new z("incorect value");return a}static getCharacterSetECIByName(i){const a=j.NAME_TO_ECI.get(i);if(a===void 0)throw new z("incorect value");return a}equals(i){if(!(i instanceof j))return!1;const a=i;return this.getName()===a.getName()}}j.VALUE_IDENTIFIER_TO_ECI=new Map,j.VALUES_TO_ECI=new Map,j.NAME_TO_ECI=new Map,j.Cp437=new j(U.Cp437,Int32Array.from([0,2]),"Cp437"),j.ISO8859_1=new j(U.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),j.ISO8859_2=new j(U.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),j.ISO8859_3=new j(U.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),j.ISO8859_4=new j(U.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),j.ISO8859_5=new j(U.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),j.ISO8859_6=new j(U.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),j.ISO8859_7=new j(U.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),j.ISO8859_8=new j(U.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),j.ISO8859_9=new j(U.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),j.ISO8859_10=new j(U.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),j.ISO8859_11=new j(U.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),j.ISO8859_13=new j(U.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),j.ISO8859_14=new j(U.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),j.ISO8859_15=new j(U.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),j.ISO8859_16=new j(U.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),j.SJIS=new j(U.SJIS,20,"SJIS","Shift_JIS"),j.Cp1250=new j(U.Cp1250,21,"Cp1250","windows-1250"),j.Cp1251=new j(U.Cp1251,22,"Cp1251","windows-1251"),j.Cp1252=new j(U.Cp1252,23,"Cp1252","windows-1252"),j.Cp1256=new j(U.Cp1256,24,"Cp1256","windows-1256"),j.UnicodeBigUnmarked=new j(U.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),j.UTF8=new j(U.UTF8,26,"UTF8","UTF-8"),j.ASCII=new j(U.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),j.Big5=new j(U.Big5,28,"Big5"),j.GB18030=new j(U.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),j.EUC_KR=new j(U.EUC_KR,30,"EUC_KR","EUC-KR");class $ extends _{}$.kind="UnsupportedOperationException";class Q{static decode(i,a){const l=this.encodingName(a);return this.customDecoder?this.customDecoder(i,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(i,l):new TextDecoder(l).decode(i)}static shouldDecodeOnFallback(i){return!Q.isBrowser()&&i==="ISO-8859-1"}static encode(i,a){const l=this.encodingName(a);return this.customEncoder?this.customEncoder(i,l):typeof TextEncoder>"u"?this.encodeFallback(i):new TextEncoder().encode(i)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(i){return typeof i=="string"?i:i.getName()}static encodingCharacterSet(i){return i instanceof j?i:j.getCharacterSetECIByName(i)}static decodeFallback(i,a){const l=this.encodingCharacterSet(a);if(Q.isDecodeFallbackSupported(l)){let h="";for(let f=0,m=i.length;f<m;f++){let x=i[f].toString(16);x.length<2&&(x="0"+x),h+="%"+x}return decodeURIComponent(h)}if(l.equals(j.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(i.buffer));throw new $(`Encoding ${this.encodingName(a)} not supported by fallback.`)}static isDecodeFallbackSupported(i){return i.equals(j.UTF8)||i.equals(j.ISO8859_1)||i.equals(j.ASCII)}static encodeFallback(i){const l=btoa(unescape(encodeURIComponent(i))).split(""),h=[];for(let f=0;f<l.length;f++)h.push(l[f].charCodeAt(0));return new Uint8Array(h)}}class Z{static castAsNonUtf8Char(i,a=null){const l=a?a.getName():this.ISO88591;return Q.decode(new Uint8Array([i]),l)}static guessEncoding(i,a){if(a!=null&&a.get(De.CHARACTER_SET)!==void 0)return a.get(De.CHARACTER_SET).toString();const l=i.length;let h=!0,f=!0,m=!0,x=0,w=0,C=0,R=0,P=0,B=0,Y=0,te=0,ne=0,ue=0,Ee=0;const Le=i.length>3&&i[0]===239&&i[1]===187&&i[2]===191;for(let Oe=0;Oe<l&&(h||f||m);Oe++){const Ne=i[Oe]&255;m&&(x>0?(Ne&128)===0?m=!1:x--:(Ne&128)!==0&&((Ne&64)===0?m=!1:(x++,(Ne&32)===0?w++:(x++,(Ne&16)===0?C++:(x++,(Ne&8)===0?R++:m=!1))))),h&&(Ne>127&&Ne<160?h=!1:Ne>159&&(Ne<192||Ne===215||Ne===247)&&Ee++),f&&(P>0?Ne<64||Ne===127||Ne>252?f=!1:P--:Ne===128||Ne===160||Ne>239?f=!1:Ne>160&&Ne<224?(B++,te=0,Y++,Y>ne&&(ne=Y)):Ne>127?(P++,Y=0,te++,te>ue&&(ue=te)):(Y=0,te=0))}return m&&x>0&&(m=!1),f&&P>0&&(f=!1),m&&(Le||w+C+R>0)?Z.UTF8:f&&(Z.ASSUME_SHIFT_JIS||ne>=3||ue>=3)?Z.SHIFT_JIS:h&&f?ne===2&&B===2||Ee*10>=l?Z.SHIFT_JIS:Z.ISO88591:h?Z.ISO88591:f?Z.SHIFT_JIS:m?Z.UTF8:Z.PLATFORM_DEFAULT_ENCODING}static format(i,...a){let l=-1;function h(m,x,w,C,R,P){if(m==="%%")return"%";if(a[++l]===void 0)return;m=C?parseInt(C.substr(1)):void 0;let B=R?parseInt(R.substr(1)):void 0,Y;switch(P){case"s":Y=a[l];break;case"c":Y=a[l][0];break;case"f":Y=parseFloat(a[l]).toFixed(m);break;case"p":Y=parseFloat(a[l]).toPrecision(m);break;case"e":Y=parseFloat(a[l]).toExponential(m);break;case"x":Y=parseInt(a[l]).toString(B||16);break;case"d":Y=parseFloat(parseInt(a[l],B||10).toPrecision(m)).toFixed(0);break}Y=typeof Y=="object"?JSON.stringify(Y):(+Y).toString(B);let te=parseInt(w),ne=w&&w[0]+""=="0"?"0":" ";for(;Y.length<te;)Y=x!==void 0?Y+ne:ne+Y;return Y}let f=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(f,h)}static getBytes(i,a){return Q.encode(i,a)}static getCharCode(i,a=0){return i.charCodeAt(a)}static getCharAt(i){return String.fromCharCode(i)}}Z.SHIFT_JIS=j.SJIS.getName(),Z.GB2312="GB2312",Z.ISO88591=j.ISO8859_1.getName(),Z.EUC_JP="EUC_JP",Z.UTF8=j.UTF8.getName(),Z.PLATFORM_DEFAULT_ENCODING=Z.UTF8,Z.ASSUME_SHIFT_JIS=!1;class X{constructor(i=""){this.value=i}enableDecoding(i){return this.encoding=i,this}append(i){return typeof i=="string"?this.value+=i.toString():this.encoding?this.value+=Z.castAsNonUtf8Char(i,this.encoding):this.value+=String.fromCharCode(i),this}appendChars(i,a,l){for(let h=a;a<a+l;h++)this.append(i[h]);return this}length(){return this.value.length}charAt(i){return this.value.charAt(i)}deleteCharAt(i){this.value=this.value.substr(0,i)+this.value.substring(i+1)}setCharAt(i,a){this.value=this.value.substr(0,i)+a+this.value.substr(i+1)}substring(i,a){return this.value.substring(i,a)}setLengthToZero(){this.value=""}toString(){return this.value}insert(i,a){this.value=this.value.substr(0,i)+a+this.value.substr(i+a.length)}}class We{constructor(i,a,l,h){if(this.width=i,this.height=a,this.rowSize=l,this.bits=h,a==null&&(a=i),this.height=a,i<1||a<1)throw new I("Both dimensions must be greater than 0");l==null&&(l=Math.floor((i+31)/32)),this.rowSize=l,h==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(i){const a=i.length,l=i[0].length,h=new We(l,a);for(let f=0;f<a;f++){const m=i[f];for(let x=0;x<l;x++)m[x]&&h.set(x,f)}return h}static parseFromString(i,a,l){if(i===null)throw new I("stringRepresentation cannot be null");const h=new Array(i.length);let f=0,m=0,x=-1,w=0,C=0;for(;C<i.length;)if(i.charAt(C)===`
`||i.charAt(C)==="\r"){if(f>m){if(x===-1)x=f-m;else if(f-m!==x)throw new I("row lengths do not match");m=f,w++}C++}else if(i.substring(C,C+a.length)===a)C+=a.length,h[f]=!0,f++;else if(i.substring(C,C+l.length)===l)C+=l.length,h[f]=!1,f++;else throw new I("illegal character encountered: "+i.substring(C));if(f>m){if(x===-1)x=f-m;else if(f-m!==x)throw new I("row lengths do not match");w++}const R=new We(x,w);for(let P=0;P<f;P++)h[P]&&R.set(Math.floor(P%x),Math.floor(P/x));return R}get(i,a){const l=a*this.rowSize+Math.floor(i/32);return(this.bits[l]>>>(i&31)&1)!==0}set(i,a){const l=a*this.rowSize+Math.floor(i/32);this.bits[l]|=1<<(i&31)&4294967295}unset(i,a){const l=a*this.rowSize+Math.floor(i/32);this.bits[l]&=~(1<<(i&31)&4294967295)}flip(i,a){const l=a*this.rowSize+Math.floor(i/32);this.bits[l]^=1<<(i&31)&4294967295}xor(i){if(this.width!==i.getWidth()||this.height!==i.getHeight()||this.rowSize!==i.getRowSize())throw new I("input matrix dimensions do not match");const a=new fe(Math.floor(this.width/32)+1),l=this.rowSize,h=this.bits;for(let f=0,m=this.height;f<m;f++){const x=f*l,w=i.getRow(f,a).getBitArray();for(let C=0;C<l;C++)h[x+C]^=w[C]}}clear(){const i=this.bits,a=i.length;for(let l=0;l<a;l++)i[l]=0}setRegion(i,a,l,h){if(a<0||i<0)throw new I("Left and top must be nonnegative");if(h<1||l<1)throw new I("Height and width must be at least 1");const f=i+l,m=a+h;if(m>this.height||f>this.width)throw new I("The region must fit inside the matrix");const x=this.rowSize,w=this.bits;for(let C=a;C<m;C++){const R=C*x;for(let P=i;P<f;P++)w[R+Math.floor(P/32)]|=1<<(P&31)&4294967295}}getRow(i,a){a==null||a.getSize()<this.width?a=new fe(this.width):a.clear();const l=this.rowSize,h=this.bits,f=i*l;for(let m=0;m<l;m++)a.setBulk(m*32,h[f+m]);return a}setRow(i,a){W.arraycopy(a.getBitArray(),0,this.bits,i*this.rowSize,this.rowSize)}rotate180(){const i=this.getWidth(),a=this.getHeight();let l=new fe(i),h=new fe(i);for(let f=0,m=Math.floor((a+1)/2);f<m;f++)l=this.getRow(f,l),h=this.getRow(a-1-f,h),l.reverse(),h.reverse(),this.setRow(f,h),this.setRow(a-1-f,l)}getEnclosingRectangle(){const i=this.width,a=this.height,l=this.rowSize,h=this.bits;let f=i,m=a,x=-1,w=-1;for(let C=0;C<a;C++)for(let R=0;R<l;R++){const P=h[C*l+R];if(P!==0){if(C<m&&(m=C),C>w&&(w=C),R*32<f){let B=0;for(;(P<<31-B&4294967295)===0;)B++;R*32+B<f&&(f=R*32+B)}if(R*32+31>x){let B=31;for(;!(P>>>B);)B--;R*32+B>x&&(x=R*32+B)}}}return x<f||w<m?null:Int32Array.from([f,m,x-f+1,w-m+1])}getTopLeftOnBit(){const i=this.rowSize,a=this.bits;let l=0;for(;l<a.length&&a[l]===0;)l++;if(l===a.length)return null;const h=l/i;let f=l%i*32;const m=a[l];let x=0;for(;(m<<31-x&4294967295)===0;)x++;return f+=x,Int32Array.from([f,h])}getBottomRightOnBit(){const i=this.rowSize,a=this.bits;let l=a.length-1;for(;l>=0&&a[l]===0;)l--;if(l<0)return null;const h=Math.floor(l/i);let f=Math.floor(l%i)*32;const m=a[l];let x=31;for(;!(m>>>x);)x--;return f+=x,Int32Array.from([f,h])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(i){if(!(i instanceof We))return!1;const a=i;return this.width===a.width&&this.height===a.height&&this.rowSize===a.rowSize&&ae.equals(this.bits,a.bits)}hashCode(){let i=this.width;return i=31*i+this.width,i=31*i+this.height,i=31*i+this.rowSize,i=31*i+ae.hashCode(this.bits),i}toString(i="X ",a="  ",l=`
`){return this.buildToString(i,a,l)}buildToString(i,a,l){let h=new X;for(let f=0,m=this.height;f<m;f++){for(let x=0,w=this.width;x<w;x++)h.append(this.get(x,f)?i:a);h.append(l)}return h.toString()}clone(){return new We(this.width,this.height,this.rowSize,this.bits.slice())}}class de extends _{static getNotFoundInstance(){return new de}}de.kind="NotFoundException";class pe extends K{constructor(i){super(i),this.luminances=pe.EMPTY,this.buckets=new Int32Array(pe.LUMINANCE_BUCKETS)}getBlackRow(i,a){const l=this.getLuminanceSource(),h=l.getWidth();a==null||a.getSize()<h?a=new fe(h):a.clear(),this.initArrays(h);const f=l.getRow(i,this.luminances),m=this.buckets;for(let w=0;w<h;w++)m[(f[w]&255)>>pe.LUMINANCE_SHIFT]++;const x=pe.estimateBlackPoint(m);if(h<3)for(let w=0;w<h;w++)(f[w]&255)<x&&a.set(w);else{let w=f[0]&255,C=f[1]&255;for(let R=1;R<h-1;R++){const P=f[R+1]&255;(C*4-w-P)/2<x&&a.set(R),w=C,C=P}}return a}getBlackMatrix(){const i=this.getLuminanceSource(),a=i.getWidth(),l=i.getHeight(),h=new We(a,l);this.initArrays(a);const f=this.buckets;for(let w=1;w<5;w++){const C=Math.floor(l*w/5),R=i.getRow(C,this.luminances),P=Math.floor(a*4/5);for(let B=Math.floor(a/5);B<P;B++){const Y=R[B]&255;f[Y>>pe.LUMINANCE_SHIFT]++}}const m=pe.estimateBlackPoint(f),x=i.getMatrix();for(let w=0;w<l;w++){const C=w*a;for(let R=0;R<a;R++)(x[C+R]&255)<m&&h.set(R,w)}return h}createBinarizer(i){return new pe(i)}initArrays(i){this.luminances.length<i&&(this.luminances=new Uint8ClampedArray(i));const a=this.buckets;for(let l=0;l<pe.LUMINANCE_BUCKETS;l++)a[l]=0}static estimateBlackPoint(i){const a=i.length;let l=0,h=0,f=0;for(let R=0;R<a;R++)i[R]>f&&(h=R,f=i[R]),i[R]>l&&(l=i[R]);let m=0,x=0;for(let R=0;R<a;R++){const P=R-h,B=i[R]*P*P;B>x&&(m=R,x=B)}if(h>m){const R=h;h=m,m=R}if(m-h<=a/16)throw new de;let w=m-1,C=-1;for(let R=m-1;R>h;R--){const P=R-h,B=P*P*(m-R)*(l-i[R]);B>C&&(w=R,C=B)}return w<<pe.LUMINANCE_SHIFT}}pe.LUMINANCE_BITS=5,pe.LUMINANCE_SHIFT=8-pe.LUMINANCE_BITS,pe.LUMINANCE_BUCKETS=1<<pe.LUMINANCE_BITS,pe.EMPTY=Uint8ClampedArray.from([0]);class be extends pe{constructor(i){super(i),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const i=this.getLuminanceSource(),a=i.getWidth(),l=i.getHeight();if(a>=be.MINIMUM_DIMENSION&&l>=be.MINIMUM_DIMENSION){const h=i.getMatrix();let f=a>>be.BLOCK_SIZE_POWER;(a&be.BLOCK_SIZE_MASK)!==0&&f++;let m=l>>be.BLOCK_SIZE_POWER;(l&be.BLOCK_SIZE_MASK)!==0&&m++;const x=be.calculateBlackPoints(h,f,m,a,l),w=new We(a,l);be.calculateThresholdForBlock(h,f,m,a,l,x,w),this.matrix=w}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(i){return new be(i)}static calculateThresholdForBlock(i,a,l,h,f,m,x){const w=f-be.BLOCK_SIZE,C=h-be.BLOCK_SIZE;for(let R=0;R<l;R++){let P=R<<be.BLOCK_SIZE_POWER;P>w&&(P=w);const B=be.cap(R,2,l-3);for(let Y=0;Y<a;Y++){let te=Y<<be.BLOCK_SIZE_POWER;te>C&&(te=C);const ne=be.cap(Y,2,a-3);let ue=0;for(let Le=-2;Le<=2;Le++){const Oe=m[B+Le];ue+=Oe[ne-2]+Oe[ne-1]+Oe[ne]+Oe[ne+1]+Oe[ne+2]}const Ee=ue/25;be.thresholdBlock(i,te,P,Ee,h,x)}}}static cap(i,a,l){return i<a?a:i>l?l:i}static thresholdBlock(i,a,l,h,f,m){for(let x=0,w=l*f+a;x<be.BLOCK_SIZE;x++,w+=f)for(let C=0;C<be.BLOCK_SIZE;C++)(i[w+C]&255)<=h&&m.set(a+C,l+x)}static calculateBlackPoints(i,a,l,h,f){const m=f-be.BLOCK_SIZE,x=h-be.BLOCK_SIZE,w=new Array(l);for(let C=0;C<l;C++){w[C]=new Int32Array(a);let R=C<<be.BLOCK_SIZE_POWER;R>m&&(R=m);for(let P=0;P<a;P++){let B=P<<be.BLOCK_SIZE_POWER;B>x&&(B=x);let Y=0,te=255,ne=0;for(let Ee=0,Le=R*h+B;Ee<be.BLOCK_SIZE;Ee++,Le+=h){for(let Oe=0;Oe<be.BLOCK_SIZE;Oe++){const Ne=i[Le+Oe]&255;Y+=Ne,Ne<te&&(te=Ne),Ne>ne&&(ne=Ne)}if(ne-te>be.MIN_DYNAMIC_RANGE)for(Ee++,Le+=h;Ee<be.BLOCK_SIZE;Ee++,Le+=h)for(let Oe=0;Oe<be.BLOCK_SIZE;Oe++)Y+=i[Le+Oe]&255}let ue=Y>>be.BLOCK_SIZE_POWER*2;if(ne-te<=be.MIN_DYNAMIC_RANGE&&(ue=te/2,C>0&&P>0)){const Ee=(w[C-1][P]+2*w[C][P-1]+w[C-1][P-1])/4;te<Ee&&(ue=Ee)}w[C][P]=ue}}return w}}be.BLOCK_SIZE_POWER=3,be.BLOCK_SIZE=1<<be.BLOCK_SIZE_POWER,be.BLOCK_SIZE_MASK=be.BLOCK_SIZE-1,be.MINIMUM_DIMENSION=be.BLOCK_SIZE*5,be.MIN_DYNAMIC_RANGE=24;class He{constructor(i,a){this.width=i,this.height=a}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(i,a,l,h){throw new $("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new $("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new $("This luminance source does not support rotation by 45 degrees.")}toString(){const i=new Uint8ClampedArray(this.width);let a=new X;for(let l=0;l<this.height;l++){const h=this.getRow(l,i);for(let f=0;f<this.width;f++){const m=h[f]&255;let x;m<64?x="#":m<128?x="+":m<192?x=".":x=" ",a.append(x)}a.append(`
`)}return a.toString()}}class ot extends He{constructor(i){super(i.getWidth(),i.getHeight()),this.delegate=i}getRow(i,a){const l=this.delegate.getRow(i,a),h=this.getWidth();for(let f=0;f<h;f++)l[f]=255-(l[f]&255);return l}getMatrix(){const i=this.delegate.getMatrix(),a=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(a);for(let h=0;h<a;h++)l[h]=255-(i[h]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(i,a,l,h){return new ot(this.delegate.crop(i,a,l,h))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ot(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ot(this.delegate.rotateCounterClockwise45())}}class gt extends He{constructor(i){super(i.width,i.height),this.canvas=i,this.tempCanvasElement=null,this.buffer=gt.makeBufferFromCanvasImageData(i)}static makeBufferFromCanvasImageData(i){const a=i.getContext("2d").getImageData(0,0,i.width,i.height);return gt.toGrayscaleBuffer(a.data,i.width,i.height)}static toGrayscaleBuffer(i,a,l){const h=new Uint8ClampedArray(a*l);for(let f=0,m=0,x=i.length;f<x;f+=4,m++){let w;if(i[f+3]===0)w=255;else{const R=i[f],P=i[f+1],B=i[f+2];w=306*R+601*P+117*B+512>>10}h[m]=w}return h}getRow(i,a){if(i<0||i>=this.getHeight())throw new I("Requested row is outside the image: "+i);const l=this.getWidth(),h=i*l;return a===null?a=this.buffer.slice(h,h+l):(a.length<l&&(a=new Uint8ClampedArray(l)),a.set(this.buffer.slice(h,h+l))),a}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(i,a,l,h){return super.crop(i,a,l,h),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const i=this.canvas.ownerDocument.createElement("canvas");i.width=this.canvas.width,i.height=this.canvas.height,this.tempCanvasElement=i}return this.tempCanvasElement}rotate(i){const a=this.getTempCanvasElement(),l=a.getContext("2d"),h=i*gt.DEGREE_TO_RADIANS,f=this.canvas.width,m=this.canvas.height,x=Math.ceil(Math.abs(Math.cos(h))*f+Math.abs(Math.sin(h))*m),w=Math.ceil(Math.abs(Math.sin(h))*f+Math.abs(Math.cos(h))*m);return a.width=x,a.height=w,l.translate(x/2,w/2),l.rotate(h),l.drawImage(this.canvas,f/-2,m/-2),this.buffer=gt.makeBufferFromCanvasImageData(a),this}invert(){return new ot(this)}}gt.DEGREE_TO_RADIANS=Math.PI/180;class re{constructor(i,a,l){this.deviceId=i,this.label=a,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Ae=(globalThis||Mh||self||window||void 0)&&(globalThis||Mh||self||window||void 0).__awaiter||function(L,i,a,l){function h(f){return f instanceof a?f:new a(function(m){m(f)})}return new(a||(a=Promise))(function(f,m){function x(R){try{C(l.next(R))}catch(P){m(P)}}function w(R){try{C(l.throw(R))}catch(P){m(P)}}function C(R){R.done?f(R.value):h(R.value).then(x,w)}C((l=l.apply(L,i||[])).next())})};class Be{constructor(i,a=500,l){this.reader=i,this.timeBetweenScansMillis=a,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(i){this._timeBetweenDecodingAttempts=i<0?0:i}set hints(i){this._hints=i||null}get hints(){return this._hints}listVideoInputDevices(){return Ae(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const i=yield navigator.mediaDevices.enumerateDevices(),a=[];for(const l of i){const h=l.kind==="video"?"videoinput":l.kind;if(h!=="videoinput")continue;const f=l.deviceId||l.id,m=l.label||`Video device ${a.length+1}`,x=l.groupId,w={deviceId:f,label:m,kind:h,groupId:x};a.push(w)}return a})}getVideoInputDevices(){return Ae(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(a=>new re(a.deviceId,a.label))})}findDeviceById(i){return Ae(this,void 0,void 0,function*(){const a=yield this.listVideoInputDevices();return a?a.find(l=>l.deviceId===i):null})}decodeFromInputVideoDevice(i,a){return Ae(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(i,a)})}decodeOnceFromVideoDevice(i,a){return Ae(this,void 0,void 0,function*(){this.reset();let l;i?l={deviceId:{exact:i}}:l={facingMode:"environment"};const h={video:l};return yield this.decodeOnceFromConstraints(h,a)})}decodeOnceFromConstraints(i,a){return Ae(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeOnceFromStream(l,a)})}decodeOnceFromStream(i,a){return Ae(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(i,a);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(i,a,l){return Ae(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(i,a,l)})}decodeFromVideoDevice(i,a,l){return Ae(this,void 0,void 0,function*(){let h;i?h={deviceId:{exact:i}}:h={facingMode:"environment"};const f={video:h};return yield this.decodeFromConstraints(f,a,l)})}decodeFromConstraints(i,a,l){return Ae(this,void 0,void 0,function*(){const h=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeFromStream(h,a,l)})}decodeFromStream(i,a,l){return Ae(this,void 0,void 0,function*(){this.reset();const h=yield this.attachStreamToVideo(i,a);return yield this.decodeContinuously(h,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(i,a){return Ae(this,void 0,void 0,function*(){const l=this.prepareVideoElement(a);return this.addVideoSource(l,i),this.videoElement=l,this.stream=i,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(i){return new Promise((a,l)=>this.playVideoOnLoad(i,()=>a()))}playVideoOnLoad(i,a){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(i),i.addEventListener("ended",this.videoEndedListener),i.addEventListener("canplay",this.videoCanPlayListener),i.addEventListener("playing",a),this.tryPlayVideo(i)}isVideoPlaying(i){return i.currentTime>0&&!i.paused&&!i.ended&&i.readyState>2}tryPlayVideo(i){return Ae(this,void 0,void 0,function*(){if(this.isVideoPlaying(i)){console.warn("Trying to play video that is already playing.");return}try{yield i.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(i,a){const l=document.getElementById(i);if(!l)throw new S(`element with id '${i}' not found`);if(l.nodeName.toLowerCase()!==a.toLowerCase())throw new S(`element with id '${i}' must be an ${a} element`);return l}decodeFromImage(i,a){if(!i&&!a)throw new S("either imageElement with a src set or an url must be provided");return a&&!i?this.decodeFromImageUrl(a):this.decodeFromImageElement(i)}decodeFromVideo(i,a){if(!i&&!a)throw new S("Either an element with a src set or an URL must be provided");return a&&!i?this.decodeFromVideoUrl(a):this.decodeFromVideoElement(i)}decodeFromVideoContinuously(i,a,l){if(i===void 0&&a===void 0)throw new S("Either an element with a src set or an URL must be provided");return a&&!i?this.decodeFromVideoUrlContinuously(a,l):this.decodeFromVideoElementContinuously(i,l)}decodeFromImageElement(i){if(!i)throw new S("An image element must be provided.");this.reset();const a=this.prepareImageElement(i);this.imageElement=a;let l;return this.isImageLoaded(a)?l=this.decodeOnce(a,!1,!0):l=this._decodeOnLoadImage(a),l}decodeFromVideoElement(i){const a=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideo(a)}decodeFromVideoElementContinuously(i,a){const l=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideoContinuously(l,a)}_decodeFromVideoElementSetup(i){if(!i)throw new S("A video element must be provided.");this.reset();const a=this.prepareVideoElement(i);return this.videoElement=a,a}decodeFromImageUrl(i){if(!i)throw new S("An URL must be provided.");this.reset();const a=this.prepareImageElement();this.imageElement=a;const l=this._decodeOnLoadImage(a);return a.src=i,l}decodeFromVideoUrl(i){if(!i)throw new S("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),l=this.decodeFromVideoElement(a);return a.src=i,l}decodeFromVideoUrlContinuously(i,a){if(!i)throw new S("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),h=this.decodeFromVideoElementContinuously(l,a);return l.src=i,h}_decodeOnLoadImage(i){return new Promise((a,l)=>{this.imageLoadedListener=()=>this.decodeOnce(i,!1,!0).then(a,l),i.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(i){return Ae(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(i),yield this.decodeOnce(i)})}_decodeOnLoadVideoContinuously(i,a){return Ae(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(i),this.decodeContinuously(i,a)})}isImageLoaded(i){return!(!i.complete||i.naturalWidth===0)}prepareImageElement(i){let a;return typeof i>"u"&&(a=document.createElement("img"),a.width=200,a.height=200),typeof i=="string"&&(a=this.getMediaElement(i,"img")),i instanceof HTMLImageElement&&(a=i),a}prepareVideoElement(i){let a;return!i&&typeof document<"u"&&(a=document.createElement("video"),a.width=200,a.height=200),typeof i=="string"&&(a=this.getMediaElement(i,"video")),i instanceof HTMLVideoElement&&(a=i),a.setAttribute("autoplay","true"),a.setAttribute("muted","true"),a.setAttribute("playsinline","true"),a}decodeOnce(i,a=!0,l=!0){this._stopAsyncDecode=!1;const h=(f,m)=>{if(this._stopAsyncDecode){m(new de("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const x=this.decode(i);f(x)}catch(x){const w=a&&x instanceof de,R=(x instanceof V||x instanceof z)&&l;if(w||R)return setTimeout(h,this._timeBetweenDecodingAttempts,f,m);m(x)}};return new Promise((f,m)=>h(f,m))}decodeContinuously(i,a){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const h=this.decode(i);a(h,null),setTimeout(l,this.timeBetweenScansMillis)}catch(h){a(null,h);const f=h instanceof V||h instanceof z,m=h instanceof de;(f||m)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(i){const a=this.createBinaryBitmap(i);return this.decodeBitmap(a)}_isHTMLVideoElement(i){return i.videoWidth!==0}drawFrameOnCanvas(i,a,l){a||(a={sx:0,sy:0,sWidth:i.videoWidth,sHeight:i.videoHeight,dx:0,dy:0,dWidth:i.videoWidth,dHeight:i.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(i,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}drawImageOnCanvas(i,a,l=this.captureCanvasContext){a||(a={sx:0,sy:0,sWidth:i.naturalWidth,sHeight:i.naturalHeight,dx:0,dy:0,dWidth:i.naturalWidth,dHeight:i.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(i,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}createBinaryBitmap(i){this.getCaptureCanvasContext(i),this._isHTMLVideoElement(i)?this.drawFrameOnCanvas(i):this.drawImageOnCanvas(i);const a=this.getCaptureCanvas(i),l=new gt(a),h=new be(l);return new M(h)}getCaptureCanvasContext(i){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(i).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(i){if(!this.captureCanvas){const a=this.createCaptureCanvas(i);this.captureCanvas=a}return this.captureCanvas}decodeBitmap(i){return this.reader.decode(i,this._hints)}createCaptureCanvas(i){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const a=document.createElement("canvas");let l,h;return typeof i<"u"&&(i instanceof HTMLVideoElement?(l=i.videoWidth,h=i.videoHeight):i instanceof HTMLImageElement&&(l=i.naturalWidth||i.width,h=i.naturalHeight||i.height)),a.style.width=l+"px",a.style.height=h+"px",a.width=l,a.height=h,a}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(i=>i.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(i,a){try{i.srcObject=a}catch{i.src=URL.createObjectURL(a)}}cleanVideoSource(i){try{i.srcObject=null}catch{i.src=""}this.videoElement.removeAttribute("src")}}class ke{constructor(i,a,l=a==null?0:8*a.length,h,f,m=W.currentTimeMillis()){this.text=i,this.rawBytes=a,this.numBits=l,this.resultPoints=h,this.format=f,this.timestamp=m,this.text=i,this.rawBytes=a,l==null?this.numBits=a==null?0:8*a.length:this.numBits=l,this.resultPoints=h,this.format=f,this.resultMetadata=null,m==null?this.timestamp=W.currentTimeMillis():this.timestamp=m}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(i,a){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(i,a)}putAllMetadata(i){i!==null&&(this.resultMetadata===null?this.resultMetadata=i:this.resultMetadata=new Map(i))}addResultPoints(i){const a=this.resultPoints;if(a===null)this.resultPoints=i;else if(i!==null&&i.length>0){const l=new Array(a.length+i.length);W.arraycopy(a,0,l,0,a.length),W.arraycopy(i,0,l,a.length,i.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var nt;(function(L){L[L.AZTEC=0]="AZTEC",L[L.CODABAR=1]="CODABAR",L[L.CODE_39=2]="CODE_39",L[L.CODE_93=3]="CODE_93",L[L.CODE_128=4]="CODE_128",L[L.DATA_MATRIX=5]="DATA_MATRIX",L[L.EAN_8=6]="EAN_8",L[L.EAN_13=7]="EAN_13",L[L.ITF=8]="ITF",L[L.MAXICODE=9]="MAXICODE",L[L.PDF_417=10]="PDF_417",L[L.QR_CODE=11]="QR_CODE",L[L.RSS_14=12]="RSS_14",L[L.RSS_EXPANDED=13]="RSS_EXPANDED",L[L.UPC_A=14]="UPC_A",L[L.UPC_E=15]="UPC_E",L[L.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(nt||(nt={}));var Me=nt,_t;(function(L){L[L.OTHER=0]="OTHER",L[L.ORIENTATION=1]="ORIENTATION",L[L.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",L[L.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",L[L.ISSUE_NUMBER=4]="ISSUE_NUMBER",L[L.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",L[L.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",L[L.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",L[L.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",L[L.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",L[L.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(_t||(_t={}));var Ct=_t;class Jt{constructor(i,a,l,h,f=-1,m=-1){this.rawBytes=i,this.text=a,this.byteSegments=l,this.ecLevel=h,this.structuredAppendSequenceNumber=f,this.structuredAppendParity=m,this.numBits=i==null?0:8*i.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(i){this.numBits=i}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(i){this.errorsCorrected=i}getErasures(){return this.erasures}setErasures(i){this.erasures=i}getOther(){return this.other}setOther(i){this.other=i}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Dr{exp(i){return this.expTable[i]}log(i){if(i===0)throw new I;return this.logTable[i]}static addOrSubtract(i,a){return i^a}}class an{constructor(i,a){if(a.length===0)throw new I;this.field=i;const l=a.length;if(l>1&&a[0]===0){let h=1;for(;h<l&&a[h]===0;)h++;h===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-h),W.arraycopy(a,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);const a=this.coefficients;let l;if(i===1){l=0;for(let m=0,x=a.length;m!==x;m++){const w=a[m];l=Dr.addOrSubtract(l,w)}return l}l=a[0];const h=a.length,f=this.field;for(let m=1;m<h;m++)l=Dr.addOrSubtract(f.multiply(i,l),a[m]);return l}addOrSubtract(i){if(!this.field.equals(i.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero())return i;if(i.isZero())return this;let a=this.coefficients,l=i.coefficients;if(a.length>l.length){const m=a;a=l,l=m}let h=new Int32Array(l.length);const f=l.length-a.length;W.arraycopy(l,0,h,0,f);for(let m=f;m<l.length;m++)h[m]=Dr.addOrSubtract(a[m-f],l[m]);return new an(this.field,h)}multiply(i){if(!this.field.equals(i.field))throw new I("GenericGFPolys do not have same GenericGF field");if(this.isZero()||i.isZero())return this.field.getZero();const a=this.coefficients,l=a.length,h=i.coefficients,f=h.length,m=new Int32Array(l+f-1),x=this.field;for(let w=0;w<l;w++){const C=a[w];for(let R=0;R<f;R++)m[w+R]=Dr.addOrSubtract(m[w+R],x.multiply(C,h[R]))}return new an(x,m)}multiplyScalar(i){if(i===0)return this.field.getZero();if(i===1)return this;const a=this.coefficients.length,l=this.field,h=new Int32Array(a),f=this.coefficients;for(let m=0;m<a;m++)h[m]=l.multiply(f[m],i);return new an(l,h)}multiplyByMonomial(i,a){if(i<0)throw new I;if(a===0)return this.field.getZero();const l=this.coefficients,h=l.length,f=new Int32Array(h+i),m=this.field;for(let x=0;x<h;x++)f[x]=m.multiply(l[x],a);return new an(m,f)}divide(i){if(!this.field.equals(i.field))throw new I("GenericGFPolys do not have same GenericGF field");if(i.isZero())throw new I("Divide by 0");const a=this.field;let l=a.getZero(),h=this;const f=i.getCoefficient(i.getDegree()),m=a.inverse(f);for(;h.getDegree()>=i.getDegree()&&!h.isZero();){const x=h.getDegree()-i.getDegree(),w=a.multiply(h.getCoefficient(h.getDegree()),m),C=i.multiplyByMonomial(x,w),R=a.buildMonomial(x,w);l=l.addOrSubtract(R),h=h.addOrSubtract(C)}return[l,h]}toString(){let i="";for(let a=this.getDegree();a>=0;a--){let l=this.getCoefficient(a);if(l!==0){if(l<0?(i+=" - ",l=-l):i.length>0&&(i+=" + "),a===0||l!==1){const h=this.field.log(l);h===0?i+="1":h===1?i+="a":(i+="a^",i+=h)}a!==0&&(a===1?i+="x":(i+="x^",i+=a))}}return i}}class si extends _{}si.kind="ArithmeticException";class wt extends Dr{constructor(i,a,l){super(),this.primitive=i,this.size=a,this.generatorBase=l;const h=new Int32Array(a);let f=1;for(let x=0;x<a;x++)h[x]=f,f*=2,f>=a&&(f^=i,f&=a-1);this.expTable=h;const m=new Int32Array(a);for(let x=0;x<a-1;x++)m[h[x]]=x;this.logTable=m,this.zero=new an(this,Int32Array.from([0])),this.one=new an(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,a){if(i<0)throw new I;if(a===0)return this.zero;const l=new Int32Array(i+1);return l[0]=a,new an(this,l)}inverse(i){if(i===0)throw new si;return this.expTable[this.size-this.logTable[i]-1]}multiply(i,a){return i===0||a===0?0:this.expTable[(this.logTable[i]+this.logTable[a])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+ee.toHexString(this.primitive)+","+this.size+")"}equals(i){return i===this}}wt.AZTEC_DATA_12=new wt(4201,4096,1),wt.AZTEC_DATA_10=new wt(1033,1024,1),wt.AZTEC_DATA_6=new wt(67,64,1),wt.AZTEC_PARAM=new wt(19,16,1),wt.QR_CODE_FIELD_256=new wt(285,256,0),wt.DATA_MATRIX_FIELD_256=new wt(301,256,1),wt.AZTEC_DATA_8=wt.DATA_MATRIX_FIELD_256,wt.MAXICODE_FIELD_64=wt.AZTEC_DATA_6;class cr extends _{}cr.kind="ReedSolomonException";class nr extends _{}nr.kind="IllegalStateException";class Gr{constructor(i){this.field=i}decode(i,a){const l=this.field,h=new an(l,i),f=new Int32Array(a);let m=!0;for(let Y=0;Y<a;Y++){const te=h.evaluateAt(l.exp(Y+l.getGeneratorBase()));f[f.length-1-Y]=te,te!==0&&(m=!1)}if(m)return;const x=new an(l,f),w=this.runEuclideanAlgorithm(l.buildMonomial(a,1),x,a),C=w[0],R=w[1],P=this.findErrorLocations(C),B=this.findErrorMagnitudes(R,P);for(let Y=0;Y<P.length;Y++){const te=i.length-1-l.log(P[Y]);if(te<0)throw new cr("Bad error location");i[te]=wt.addOrSubtract(i[te],B[Y])}}runEuclideanAlgorithm(i,a,l){if(i.getDegree()<a.getDegree()){const Y=i;i=a,a=Y}const h=this.field;let f=i,m=a,x=h.getZero(),w=h.getOne();for(;m.getDegree()>=(l/2|0);){let Y=f,te=x;if(f=m,x=w,f.isZero())throw new cr("r_{i-1} was zero");m=Y;let ne=h.getZero();const ue=f.getCoefficient(f.getDegree()),Ee=h.inverse(ue);for(;m.getDegree()>=f.getDegree()&&!m.isZero();){const Le=m.getDegree()-f.getDegree(),Oe=h.multiply(m.getCoefficient(m.getDegree()),Ee);ne=ne.addOrSubtract(h.buildMonomial(Le,Oe)),m=m.addOrSubtract(f.multiplyByMonomial(Le,Oe))}if(w=ne.multiply(x).addOrSubtract(te),m.getDegree()>=f.getDegree())throw new nr("Division algorithm failed to reduce polynomial?")}const C=w.getCoefficient(0);if(C===0)throw new cr("sigmaTilde(0) was zero");const R=h.inverse(C),P=w.multiplyScalar(R),B=m.multiplyScalar(R);return[P,B]}findErrorLocations(i){const a=i.getDegree();if(a===1)return Int32Array.from([i.getCoefficient(1)]);const l=new Int32Array(a);let h=0;const f=this.field;for(let m=1;m<f.getSize()&&h<a;m++)i.evaluateAt(m)===0&&(l[h]=f.inverse(m),h++);if(h!==a)throw new cr("Error locator degree does not match number of roots");return l}findErrorMagnitudes(i,a){const l=a.length,h=new Int32Array(l),f=this.field;for(let m=0;m<l;m++){const x=f.inverse(a[m]);let w=1;for(let C=0;C<l;C++)if(m!==C){const R=f.multiply(a[C],x),P=(R&1)===0?R|1:R&-2;w=f.multiply(w,P)}h[m]=f.multiply(i.evaluateAt(x),f.inverse(w)),f.getGeneratorBase()!==0&&(h[m]=f.multiply(h[m],x))}return h}}var En;(function(L){L[L.UPPER=0]="UPPER",L[L.LOWER=1]="LOWER",L[L.MIXED=2]="MIXED",L[L.DIGIT=3]="DIGIT",L[L.PUNCT=4]="PUNCT",L[L.BINARY=5]="BINARY"})(En||(En={}));class Ht{decode(i){this.ddata=i;let a=i.getBits(),l=this.extractBits(a),h=this.correctBits(l),f=Ht.convertBoolArrayToByteArray(h),m=Ht.getEncodedData(h),x=new Jt(f,m,null,null);return x.setNumBits(h.length),x}static highLevelDecode(i){return this.getEncodedData(i)}static getEncodedData(i){let a=i.length,l=En.UPPER,h=En.UPPER,f="",m=0;for(;m<a;)if(h===En.BINARY){if(a-m<5)break;let x=Ht.readCode(i,m,5);if(m+=5,x===0){if(a-m<11)break;x=Ht.readCode(i,m,11)+31,m+=11}for(let w=0;w<x;w++){if(a-m<8){m=a;break}const C=Ht.readCode(i,m,8);f+=Z.castAsNonUtf8Char(C),m+=8}h=l}else{let x=h===En.DIGIT?4:5;if(a-m<x)break;let w=Ht.readCode(i,m,x);m+=x;let C=Ht.getCharacter(h,w);C.startsWith("CTRL_")?(l=h,h=Ht.getTable(C.charAt(5)),C.charAt(6)==="L"&&(l=h)):(f+=C,h=l)}return f}static getTable(i){switch(i){case"L":return En.LOWER;case"P":return En.PUNCT;case"M":return En.MIXED;case"D":return En.DIGIT;case"B":return En.BINARY;case"U":default:return En.UPPER}}static getCharacter(i,a){switch(i){case En.UPPER:return Ht.UPPER_TABLE[a];case En.LOWER:return Ht.LOWER_TABLE[a];case En.MIXED:return Ht.MIXED_TABLE[a];case En.PUNCT:return Ht.PUNCT_TABLE[a];case En.DIGIT:return Ht.DIGIT_TABLE[a];default:throw new nr("Bad table")}}correctBits(i){let a,l;this.ddata.getNbLayers()<=2?(l=6,a=wt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,a=wt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,a=wt.AZTEC_DATA_10):(l=12,a=wt.AZTEC_DATA_12);let h=this.ddata.getNbDatablocks(),f=i.length/l;if(f<h)throw new z;let m=i.length%l,x=new Int32Array(f);for(let B=0;B<f;B++,m+=l)x[B]=Ht.readCode(i,m,l);try{new Gr(a).decode(x,f-h)}catch(B){throw new z(B)}let w=(1<<l)-1,C=0;for(let B=0;B<h;B++){let Y=x[B];if(Y===0||Y===w)throw new z;(Y===1||Y===w-1)&&C++}let R=new Array(h*l-C),P=0;for(let B=0;B<h;B++){let Y=x[B];if(Y===1||Y===w-1)R.fill(Y>1,P,P+l-1),P+=l-1;else for(let te=l-1;te>=0;--te)R[P++]=(Y&1<<te)!==0}return R}extractBits(i){let a=this.ddata.isCompact(),l=this.ddata.getNbLayers(),h=(a?11:14)+l*4,f=new Int32Array(h),m=new Array(this.totalBitsInLayer(l,a));if(a)for(let x=0;x<f.length;x++)f[x]=x;else{let x=h+1+2*ee.truncDivision(ee.truncDivision(h,2)-1,15),w=h/2,C=ee.truncDivision(x,2);for(let R=0;R<w;R++){let P=R+ee.truncDivision(R,15);f[w-R-1]=C-P-1,f[w+R]=C+P+1}}for(let x=0,w=0;x<l;x++){let C=(l-x)*4+(a?9:12),R=x*2,P=h-1-R;for(let B=0;B<C;B++){let Y=B*2;for(let te=0;te<2;te++)m[w+Y+te]=i.get(f[R+te],f[R+B]),m[w+2*C+Y+te]=i.get(f[R+B],f[P-te]),m[w+4*C+Y+te]=i.get(f[P-te],f[P-B]),m[w+6*C+Y+te]=i.get(f[P-B],f[R+te])}w+=C*8}return m}static readCode(i,a,l){let h=0;for(let f=a;f<a+l;f++)h<<=1,i[f]&&(h|=1);return h}static readByte(i,a){let l=i.length-a;return l>=8?Ht.readCode(i,a,8):Ht.readCode(i,a,l)<<8-l}static convertBoolArrayToByteArray(i){let a=new Uint8Array((i.length+7)/8);for(let l=0;l<a.length;l++)a[l]=Ht.readByte(i,8*l);return a}totalBitsInLayer(i,a){return((a?88:112)+16*i)*i}}Ht.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Ht.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Ht.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Ht.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Ht.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Qe{constructor(){}static round(i){return i===NaN?0:i<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:i>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:i+(i<0?-.5:.5)|0}static distance(i,a,l,h){const f=i-l,m=a-h;return Math.sqrt(f*f+m*m)}static sum(i){let a=0;for(let l=0,h=i.length;l!==h;l++){const f=i[l];a+=f}return a}}class _n{static floatToIntBits(i){return i}}_n.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Fe{constructor(i,a){this.x=i,this.y=a}getX(){return this.x}getY(){return this.y}equals(i){if(i instanceof Fe){const a=i;return this.x===a.x&&this.y===a.y}return!1}hashCode(){return 31*_n.floatToIntBits(this.x)+_n.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(i){const a=this.distance(i[0],i[1]),l=this.distance(i[1],i[2]),h=this.distance(i[0],i[2]);let f,m,x;if(l>=a&&l>=h?(m=i[0],f=i[1],x=i[2]):h>=l&&h>=a?(m=i[1],f=i[0],x=i[2]):(m=i[2],f=i[0],x=i[1]),this.crossProductZ(f,m,x)<0){const w=f;f=x,x=w}i[0]=f,i[1]=m,i[2]=x}static distance(i,a){return Qe.distance(i.x,i.y,a.x,a.y)}static crossProductZ(i,a,l){const h=a.x,f=a.y;return(l.x-h)*(i.y-f)-(l.y-f)*(i.x-h)}}class ws{constructor(i,a){this.bits=i,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class Ki extends ws{constructor(i,a,l,h,f){super(i,a),this.compact=l,this.nbDatablocks=h,this.nbLayers=f}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class dn{constructor(i,a,l,h){this.image=i,this.height=i.getHeight(),this.width=i.getWidth(),a==null&&(a=dn.INIT_SIZE),l==null&&(l=i.getWidth()/2|0),h==null&&(h=i.getHeight()/2|0);const f=a/2|0;if(this.leftInit=l-f,this.rightInit=l+f,this.upInit=h-f,this.downInit=h+f,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new de}detect(){let i=this.leftInit,a=this.rightInit,l=this.upInit,h=this.downInit,f=!1,m=!0,x=!1,w=!1,C=!1,R=!1,P=!1;const B=this.width,Y=this.height;for(;m;){m=!1;let te=!0;for(;(te||!w)&&a<B;)te=this.containsBlackPoint(l,h,a,!1),te?(a++,m=!0,w=!0):w||a++;if(a>=B){f=!0;break}let ne=!0;for(;(ne||!C)&&h<Y;)ne=this.containsBlackPoint(i,a,h,!0),ne?(h++,m=!0,C=!0):C||h++;if(h>=Y){f=!0;break}let ue=!0;for(;(ue||!R)&&i>=0;)ue=this.containsBlackPoint(l,h,i,!1),ue?(i--,m=!0,R=!0):R||i--;if(i<0){f=!0;break}let Ee=!0;for(;(Ee||!P)&&l>=0;)Ee=this.containsBlackPoint(i,a,l,!0),Ee?(l--,m=!0,P=!0):P||l--;if(l<0){f=!0;break}m&&(x=!0)}if(!f&&x){const te=a-i;let ne=null;for(let Oe=1;ne===null&&Oe<te;Oe++)ne=this.getBlackPointOnSegment(i,h-Oe,i+Oe,h);if(ne==null)throw new de;let ue=null;for(let Oe=1;ue===null&&Oe<te;Oe++)ue=this.getBlackPointOnSegment(i,l+Oe,i+Oe,l);if(ue==null)throw new de;let Ee=null;for(let Oe=1;Ee===null&&Oe<te;Oe++)Ee=this.getBlackPointOnSegment(a,l+Oe,a-Oe,l);if(Ee==null)throw new de;let Le=null;for(let Oe=1;Le===null&&Oe<te;Oe++)Le=this.getBlackPointOnSegment(a,h-Oe,a-Oe,h);if(Le==null)throw new de;return this.centerEdges(Le,ne,Ee,ue)}else throw new de}getBlackPointOnSegment(i,a,l,h){const f=Qe.round(Qe.distance(i,a,l,h)),m=(l-i)/f,x=(h-a)/f,w=this.image;for(let C=0;C<f;C++){const R=Qe.round(i+C*m),P=Qe.round(a+C*x);if(w.get(R,P))return new Fe(R,P)}return null}centerEdges(i,a,l,h){const f=i.getX(),m=i.getY(),x=a.getX(),w=a.getY(),C=l.getX(),R=l.getY(),P=h.getX(),B=h.getY(),Y=dn.CORR;return f<this.width/2?[new Fe(P-Y,B+Y),new Fe(x+Y,w+Y),new Fe(C-Y,R-Y),new Fe(f+Y,m-Y)]:[new Fe(P+Y,B+Y),new Fe(x+Y,w-Y),new Fe(C-Y,R+Y),new Fe(f-Y,m-Y)]}containsBlackPoint(i,a,l,h){const f=this.image;if(h){for(let m=i;m<=a;m++)if(f.get(m,l))return!0}else for(let m=i;m<=a;m++)if(f.get(l,m))return!0;return!1}}dn.INIT_SIZE=10,dn.CORR=1;class ai{static checkAndNudgePoints(i,a){const l=i.getWidth(),h=i.getHeight();let f=!0;for(let m=0;m<a.length&&f;m+=2){const x=Math.floor(a[m]),w=Math.floor(a[m+1]);if(x<-1||x>l||w<-1||w>h)throw new de;f=!1,x===-1?(a[m]=0,f=!0):x===l&&(a[m]=l-1,f=!0),w===-1?(a[m+1]=0,f=!0):w===h&&(a[m+1]=h-1,f=!0)}f=!0;for(let m=a.length-2;m>=0&&f;m-=2){const x=Math.floor(a[m]),w=Math.floor(a[m+1]);if(x<-1||x>l||w<-1||w>h)throw new de;f=!1,x===-1?(a[m]=0,f=!0):x===l&&(a[m]=l-1,f=!0),w===-1?(a[m+1]=0,f=!0):w===h&&(a[m+1]=h-1,f=!0)}}}class ur{constructor(i,a,l,h,f,m,x,w,C){this.a11=i,this.a21=a,this.a31=l,this.a12=h,this.a22=f,this.a32=m,this.a13=x,this.a23=w,this.a33=C}static quadrilateralToQuadrilateral(i,a,l,h,f,m,x,w,C,R,P,B,Y,te,ne,ue){const Ee=ur.quadrilateralToSquare(i,a,l,h,f,m,x,w);return ur.squareToQuadrilateral(C,R,P,B,Y,te,ne,ue).times(Ee)}transformPoints(i){const a=i.length,l=this.a11,h=this.a12,f=this.a13,m=this.a21,x=this.a22,w=this.a23,C=this.a31,R=this.a32,P=this.a33;for(let B=0;B<a;B+=2){const Y=i[B],te=i[B+1],ne=f*Y+w*te+P;i[B]=(l*Y+m*te+C)/ne,i[B+1]=(h*Y+x*te+R)/ne}}transformPointsWithValues(i,a){const l=this.a11,h=this.a12,f=this.a13,m=this.a21,x=this.a22,w=this.a23,C=this.a31,R=this.a32,P=this.a33,B=i.length;for(let Y=0;Y<B;Y++){const te=i[Y],ne=a[Y],ue=f*te+w*ne+P;i[Y]=(l*te+m*ne+C)/ue,a[Y]=(h*te+x*ne+R)/ue}}static squareToQuadrilateral(i,a,l,h,f,m,x,w){const C=i-l+f-x,R=a-h+m-w;if(C===0&&R===0)return new ur(l-i,f-l,i,h-a,m-h,a,0,0,1);{const P=l-f,B=x-f,Y=h-m,te=w-m,ne=P*te-B*Y,ue=(C*te-B*R)/ne,Ee=(P*R-C*Y)/ne;return new ur(l-i+ue*l,x-i+Ee*x,i,h-a+ue*h,w-a+Ee*w,a,ue,Ee,1)}}static quadrilateralToSquare(i,a,l,h,f,m,x,w){return ur.squareToQuadrilateral(i,a,l,h,f,m,x,w).buildAdjoint()}buildAdjoint(){return new ur(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(i){return new ur(this.a11*i.a11+this.a21*i.a12+this.a31*i.a13,this.a11*i.a21+this.a21*i.a22+this.a31*i.a23,this.a11*i.a31+this.a21*i.a32+this.a31*i.a33,this.a12*i.a11+this.a22*i.a12+this.a32*i.a13,this.a12*i.a21+this.a22*i.a22+this.a32*i.a23,this.a12*i.a31+this.a22*i.a32+this.a32*i.a33,this.a13*i.a11+this.a23*i.a12+this.a33*i.a13,this.a13*i.a21+this.a23*i.a22+this.a33*i.a23,this.a13*i.a31+this.a23*i.a32+this.a33*i.a33)}}class Yr extends ai{sampleGrid(i,a,l,h,f,m,x,w,C,R,P,B,Y,te,ne,ue,Ee,Le,Oe){const Ne=ur.quadrilateralToQuadrilateral(h,f,m,x,w,C,R,P,B,Y,te,ne,ue,Ee,Le,Oe);return this.sampleGridWithTransform(i,a,l,Ne)}sampleGridWithTransform(i,a,l,h){if(a<=0||l<=0)throw new de;const f=new We(a,l),m=new Float32Array(2*a);for(let x=0;x<l;x++){const w=m.length,C=x+.5;for(let R=0;R<w;R+=2)m[R]=R/2+.5,m[R+1]=C;h.transformPoints(m),ai.checkAndNudgePoints(i,m);try{for(let R=0;R<w;R+=2)i.get(Math.floor(m[R]),Math.floor(m[R+1]))&&f.set(R/2,x)}catch{throw new de}}return f}}class rr{static setGridSampler(i){rr.gridSampler=i}static getInstance(){return rr.gridSampler}}rr.gridSampler=new Yr;class Kn{constructor(i,a){this.x=i,this.y=a}toResultPoint(){return new Fe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Rs{constructor(i){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=i}detect(){return this.detectMirror(!1)}detectMirror(i){let a=this.getMatrixCenter(),l=this.getBullsEyeCorners(a);if(i){let m=l[0];l[0]=l[2],l[2]=m}this.extractParameters(l);let h=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),f=this.getMatrixCornerPoints(l);return new Ki(h,f,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(i){if(!this.isValidPoint(i[0])||!this.isValidPoint(i[1])||!this.isValidPoint(i[2])||!this.isValidPoint(i[3]))throw new de;let a=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(i[0],i[1],a),this.sampleLine(i[1],i[2],a),this.sampleLine(i[2],i[3],a),this.sampleLine(i[3],i[0],a)]);this.shift=this.getRotation(l,a);let h=0;for(let m=0;m<4;m++){let x=l[(this.shift+m)%4];this.compact?(h<<=7,h+=x>>1&127):(h<<=10,h+=(x>>2&992)+(x>>1&31))}let f=this.getCorrectedParameterData(h,this.compact);this.compact?(this.nbLayers=(f>>6)+1,this.nbDataBlocks=(f&63)+1):(this.nbLayers=(f>>11)+1,this.nbDataBlocks=(f&2047)+1)}getRotation(i,a){let l=0;i.forEach((h,f,m)=>{let x=(h>>a-2<<1)+(h&1);l=(l<<3)+x}),l=((l&1)<<11)+(l>>1);for(let h=0;h<4;h++)if(ee.bitCount(l^this.EXPECTED_CORNER_BITS[h])<=2)return h;throw new de}getCorrectedParameterData(i,a){let l,h;a?(l=7,h=2):(l=10,h=4);let f=l-h,m=new Int32Array(l);for(let w=l-1;w>=0;--w)m[w]=i&15,i>>=4;try{new Gr(wt.AZTEC_PARAM).decode(m,f)}catch{throw new de}let x=0;for(let w=0;w<h;w++)x=(x<<4)+m[w];return x}getBullsEyeCorners(i){let a=i,l=i,h=i,f=i,m=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let P=this.getFirstDifferent(a,m,1,-1),B=this.getFirstDifferent(l,m,1,1),Y=this.getFirstDifferent(h,m,-1,1),te=this.getFirstDifferent(f,m,-1,-1);if(this.nbCenterLayers>2){let ne=this.distancePoint(te,P)*this.nbCenterLayers/(this.distancePoint(f,a)*(this.nbCenterLayers+2));if(ne<.75||ne>1.25||!this.isWhiteOrBlackRectangle(P,B,Y,te))break}a=P,l=B,h=Y,f=te,m=!m}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new de;this.compact=this.nbCenterLayers===5;let x=new Fe(a.getX()+.5,a.getY()-.5),w=new Fe(l.getX()+.5,l.getY()+.5),C=new Fe(h.getX()-.5,h.getY()+.5),R=new Fe(f.getX()-.5,f.getY()-.5);return this.expandSquare([x,w,C,R],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let i,a,l,h;try{let x=new dn(this.image).detect();i=x[0],a=x[1],l=x[2],h=x[3]}catch{let w=this.image.getWidth()/2,C=this.image.getHeight()/2;i=this.getFirstDifferent(new Kn(w+7,C-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new Kn(w+7,C+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Kn(w-7,C+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new Kn(w-7,C-7),!1,-1,-1).toResultPoint()}let f=Qe.round((i.getX()+h.getX()+a.getX()+l.getX())/4),m=Qe.round((i.getY()+h.getY()+a.getY()+l.getY())/4);try{let x=new dn(this.image,15,f,m).detect();i=x[0],a=x[1],l=x[2],h=x[3]}catch{i=this.getFirstDifferent(new Kn(f+7,m-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new Kn(f+7,m+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Kn(f-7,m+7),!1,-1,1).toResultPoint(),h=this.getFirstDifferent(new Kn(f-7,m-7),!1,-1,-1).toResultPoint()}return f=Qe.round((i.getX()+h.getX()+a.getX()+l.getX())/4),m=Qe.round((i.getY()+h.getY()+a.getY()+l.getY())/4),new Kn(f,m)}getMatrixCornerPoints(i){return this.expandSquare(i,2*this.nbCenterLayers,this.getDimension())}sampleGrid(i,a,l,h,f){let m=rr.getInstance(),x=this.getDimension(),w=x/2-this.nbCenterLayers,C=x/2+this.nbCenterLayers;return m.sampleGrid(i,x,x,w,w,C,w,C,C,w,C,a.getX(),a.getY(),l.getX(),l.getY(),h.getX(),h.getY(),f.getX(),f.getY())}sampleLine(i,a,l){let h=0,f=this.distanceResultPoint(i,a),m=f/l,x=i.getX(),w=i.getY(),C=m*(a.getX()-i.getX())/f,R=m*(a.getY()-i.getY())/f;for(let P=0;P<l;P++)this.image.get(Qe.round(x+P*C),Qe.round(w+P*R))&&(h|=1<<l-P-1);return h}isWhiteOrBlackRectangle(i,a,l,h){let f=3;i=new Kn(i.getX()-f,i.getY()+f),a=new Kn(a.getX()-f,a.getY()-f),l=new Kn(l.getX()+f,l.getY()-f),h=new Kn(h.getX()+f,h.getY()+f);let m=this.getColor(h,i);if(m===0)return!1;let x=this.getColor(i,a);return x!==m||(x=this.getColor(a,l),x!==m)?!1:(x=this.getColor(l,h),x===m)}getColor(i,a){let l=this.distancePoint(i,a),h=(a.getX()-i.getX())/l,f=(a.getY()-i.getY())/l,m=0,x=i.getX(),w=i.getY(),C=this.image.get(i.getX(),i.getY()),R=Math.ceil(l);for(let B=0;B<R;B++)x+=h,w+=f,this.image.get(Qe.round(x),Qe.round(w))!==C&&m++;let P=m/l;return P>.1&&P<.9?0:P<=.1===C?1:-1}getFirstDifferent(i,a,l,h){let f=i.getX()+l,m=i.getY()+h;for(;this.isValid(f,m)&&this.image.get(f,m)===a;)f+=l,m+=h;for(f-=l,m-=h;this.isValid(f,m)&&this.image.get(f,m)===a;)f+=l;for(f-=l;this.isValid(f,m)&&this.image.get(f,m)===a;)m+=h;return m-=h,new Kn(f,m)}expandSquare(i,a,l){let h=l/(2*a),f=i[0].getX()-i[2].getX(),m=i[0].getY()-i[2].getY(),x=(i[0].getX()+i[2].getX())/2,w=(i[0].getY()+i[2].getY())/2,C=new Fe(x+h*f,w+h*m),R=new Fe(x-h*f,w-h*m);f=i[1].getX()-i[3].getX(),m=i[1].getY()-i[3].getY(),x=(i[1].getX()+i[3].getX())/2,w=(i[1].getY()+i[3].getY())/2;let P=new Fe(x+h*f,w+h*m),B=new Fe(x-h*f,w-h*m);return[C,P,R,B]}isValid(i,a){return i>=0&&i<this.image.getWidth()&&a>0&&a<this.image.getHeight()}isValidPoint(i){let a=Qe.round(i.getX()),l=Qe.round(i.getY());return this.isValid(a,l)}distancePoint(i,a){return Qe.distance(i.getX(),i.getY(),a.getX(),a.getY())}distanceResultPoint(i,a){return Qe.distance(i.getX(),i.getY(),a.getX(),a.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(ee.truncDivision(this.nbLayers-4,8)+1)+15}}class Wi{decode(i,a=null){let l=null,h=new Rs(i.getBlackMatrix()),f=null,m=null;try{let R=h.detectMirror(!1);f=R.getPoints(),this.reportFoundResultPoints(a,f),m=new Ht().decode(R)}catch(R){l=R}if(m==null)try{let R=h.detectMirror(!0);f=R.getPoints(),this.reportFoundResultPoints(a,f),m=new Ht().decode(R)}catch(R){throw l??R}let x=new ke(m.getText(),m.getRawBytes(),m.getNumBits(),f,Me.AZTEC,W.currentTimeMillis()),w=m.getByteSegments();w!=null&&x.putMetadata(Ct.BYTE_SEGMENTS,w);let C=m.getECLevel();return C!=null&&x.putMetadata(Ct.ERROR_CORRECTION_LEVEL,C),x}reportFoundResultPoints(i,a){if(i!=null){let l=i.get(De.NEED_RESULT_POINT_CALLBACK);l!=null&&a.forEach((h,f,m)=>{l.foundPossibleResultPoint(h)})}}reset(){}}class Ws extends Be{constructor(i=500){super(new Wi,i)}}class Gt{decode(i,a){try{return this.doDecode(i,a)}catch{if(a&&a.get(De.TRY_HARDER)===!0&&i.isRotateSupported()){const f=i.rotateCounterClockwise(),m=this.doDecode(f,a),x=m.getResultMetadata();let w=270;x!==null&&x.get(Ct.ORIENTATION)===!0&&(w=w+x.get(Ct.ORIENTATION)%360),m.putMetadata(Ct.ORIENTATION,w);const C=m.getResultPoints();if(C!==null){const R=f.getHeight();for(let P=0;P<C.length;P++)C[P]=new Fe(R-C[P].getY()-1,C[P].getX())}return m}else throw new de}}reset(){}doDecode(i,a){const l=i.getWidth(),h=i.getHeight();let f=new fe(l);const m=a&&a.get(De.TRY_HARDER)===!0,x=Math.max(1,h>>(m?8:5));let w;m?w=h:w=15;const C=Math.trunc(h/2);for(let R=0;R<w;R++){const P=Math.trunc((R+1)/2),B=(R&1)===0,Y=C+x*(B?P:-P);if(Y<0||Y>=h)break;try{f=i.getBlackRow(Y,f)}catch{continue}for(let te=0;te<2;te++){if(te===1&&(f.reverse(),a&&a.get(De.NEED_RESULT_POINT_CALLBACK)===!0)){const ne=new Map;a.forEach((ue,Ee)=>ne.set(Ee,ue)),ne.delete(De.NEED_RESULT_POINT_CALLBACK),a=ne}try{const ne=this.decodeRow(Y,f,a);if(te===1){ne.putMetadata(Ct.ORIENTATION,180);const ue=ne.getResultPoints();ue!==null&&(ue[0]=new Fe(l-ue[0].getX()-1,ue[0].getY()),ue[1]=new Fe(l-ue[1].getX()-1,ue[1].getY()))}return ne}catch{}}}throw new de}static recordPattern(i,a,l){const h=l.length;for(let C=0;C<h;C++)l[C]=0;const f=i.getSize();if(a>=f)throw new de;let m=!i.get(a),x=0,w=a;for(;w<f;){if(i.get(w)!==m)l[x]++;else{if(++x===h)break;l[x]=1,m=!m}w++}if(!(x===h||x===h-1&&w===f))throw new de}static recordPatternInReverse(i,a,l){let h=l.length,f=i.get(a);for(;a>0&&h>=0;)i.get(--a)!==f&&(h--,f=!f);if(h>=0)throw new de;Gt.recordPattern(i,a+1,l)}static patternMatchVariance(i,a,l){const h=i.length;let f=0,m=0;for(let C=0;C<h;C++)f+=i[C],m+=a[C];if(f<m)return Number.POSITIVE_INFINITY;const x=f/m;l*=x;let w=0;for(let C=0;C<h;C++){const R=i[C],P=a[C]*x,B=R>P?R-P:P-R;if(B>l)return Number.POSITIVE_INFINITY;w+=B}return w/f}}class Re extends Gt{static findStartPattern(i){const a=i.getSize(),l=i.getNextSet(0);let h=0,f=Int32Array.from([0,0,0,0,0,0]),m=l,x=!1;const w=6;for(let C=l;C<a;C++)if(i.get(C)!==x)f[h]++;else{if(h===w-1){let R=Re.MAX_AVG_VARIANCE,P=-1;for(let B=Re.CODE_START_A;B<=Re.CODE_START_C;B++){const Y=Gt.patternMatchVariance(f,Re.CODE_PATTERNS[B],Re.MAX_INDIVIDUAL_VARIANCE);Y<R&&(R=Y,P=B)}if(P>=0&&i.isRange(Math.max(0,m-(C-m)/2),m,!1))return Int32Array.from([m,C,P]);m+=f[0]+f[1],f=f.slice(2,f.length-1),f[h-1]=0,f[h]=0,h--}else h++;f[h]=1,x=!x}throw new de}static decodeCode(i,a,l){Gt.recordPattern(i,l,a);let h=Re.MAX_AVG_VARIANCE,f=-1;for(let m=0;m<Re.CODE_PATTERNS.length;m++){const x=Re.CODE_PATTERNS[m],w=this.patternMatchVariance(a,x,Re.MAX_INDIVIDUAL_VARIANCE);w<h&&(h=w,f=m)}if(f>=0)return f;throw new de}decodeRow(i,a,l){const h=l&&l.get(De.ASSUME_GS1)===!0,f=Re.findStartPattern(a),m=f[2];let x=0;const w=new Uint8Array(20);w[x++]=m;let C;switch(m){case Re.CODE_START_A:C=Re.CODE_CODE_A;break;case Re.CODE_START_B:C=Re.CODE_CODE_B;break;case Re.CODE_START_C:C=Re.CODE_CODE_C;break;default:throw new z}let R=!1,P=!1,B="",Y=f[0],te=f[1];const ne=Int32Array.from([0,0,0,0,0,0]);let ue=0,Ee=0,Le=m,Oe=0,Ne=!0,Rt=!1,ft=!1;for(;!R;){const aa=P;switch(P=!1,ue=Ee,Ee=Re.decodeCode(a,ne,te),w[x++]=Ee,Ee!==Re.CODE_STOP&&(Ne=!0),Ee!==Re.CODE_STOP&&(Oe++,Le+=Oe*Ee),Y=te,te+=ne.reduce((Ru,lc)=>Ru+lc,0),Ee){case Re.CODE_START_A:case Re.CODE_START_B:case Re.CODE_START_C:throw new z}switch(C){case Re.CODE_CODE_A:if(Ee<64)ft===Rt?B+=String.fromCharCode(32+Ee):B+=String.fromCharCode(32+Ee+128),ft=!1;else if(Ee<96)ft===Rt?B+=String.fromCharCode(Ee-64):B+=String.fromCharCode(Ee+64),ft=!1;else switch(Ee!==Re.CODE_STOP&&(Ne=!1),Ee){case Re.CODE_FNC_1:h&&(B.length===0?B+="]C1":B+="");break;case Re.CODE_FNC_2:case Re.CODE_FNC_3:break;case Re.CODE_FNC_4_A:!Rt&&ft?(Rt=!0,ft=!1):Rt&&ft?(Rt=!1,ft=!1):ft=!0;break;case Re.CODE_SHIFT:P=!0,C=Re.CODE_CODE_B;break;case Re.CODE_CODE_B:C=Re.CODE_CODE_B;break;case Re.CODE_CODE_C:C=Re.CODE_CODE_C;break;case Re.CODE_STOP:R=!0;break}break;case Re.CODE_CODE_B:if(Ee<96)ft===Rt?B+=String.fromCharCode(32+Ee):B+=String.fromCharCode(32+Ee+128),ft=!1;else switch(Ee!==Re.CODE_STOP&&(Ne=!1),Ee){case Re.CODE_FNC_1:h&&(B.length===0?B+="]C1":B+="");break;case Re.CODE_FNC_2:case Re.CODE_FNC_3:break;case Re.CODE_FNC_4_B:!Rt&&ft?(Rt=!0,ft=!1):Rt&&ft?(Rt=!1,ft=!1):ft=!0;break;case Re.CODE_SHIFT:P=!0,C=Re.CODE_CODE_A;break;case Re.CODE_CODE_A:C=Re.CODE_CODE_A;break;case Re.CODE_CODE_C:C=Re.CODE_CODE_C;break;case Re.CODE_STOP:R=!0;break}break;case Re.CODE_CODE_C:if(Ee<100)Ee<10&&(B+="0"),B+=Ee;else switch(Ee!==Re.CODE_STOP&&(Ne=!1),Ee){case Re.CODE_FNC_1:h&&(B.length===0?B+="]C1":B+="");break;case Re.CODE_CODE_A:C=Re.CODE_CODE_A;break;case Re.CODE_CODE_B:C=Re.CODE_CODE_B;break;case Re.CODE_STOP:R=!0;break}break}aa&&(C=C===Re.CODE_CODE_A?Re.CODE_CODE_B:Re.CODE_CODE_A)}const Wn=te-Y;if(te=a.getNextUnset(te),!a.isRange(te,Math.min(a.getSize(),te+(te-Y)/2),!1))throw new de;if(Le-=Oe*ue,Le%103!==ue)throw new V;const bi=B.length;if(bi===0)throw new de;bi>0&&Ne&&(C===Re.CODE_CODE_C?B=B.substring(0,bi-2):B=B.substring(0,bi-1));const Pr=(f[1]+f[0])/2,cn=Y+Wn/2,vr=w.length,di=new Uint8Array(vr);for(let aa=0;aa<vr;aa++)di[aa]=w[aa];const ja=[new Fe(Pr,i),new Fe(cn,i)];return new ke(B,di,0,ja,Me.CODE_128,new Date().getTime())}}Re.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Re.MAX_AVG_VARIANCE=.25,Re.MAX_INDIVIDUAL_VARIANCE=.7,Re.CODE_SHIFT=98,Re.CODE_CODE_C=99,Re.CODE_CODE_B=100,Re.CODE_CODE_A=101,Re.CODE_FNC_1=102,Re.CODE_FNC_2=97,Re.CODE_FNC_3=96,Re.CODE_FNC_4_A=101,Re.CODE_FNC_4_B=100,Re.CODE_START_A=103,Re.CODE_START_B=104,Re.CODE_START_C=105,Re.CODE_STOP=106;class Yt extends Gt{constructor(i=!1,a=!1){super(),this.usingCheckDigit=i,this.extendedMode=a,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(i,a,l){let h=this.counters;h.fill(0),this.decodeRowResult="";let f=Yt.findAsteriskPattern(a,h),m=a.getNextSet(f[1]),x=a.getSize(),w,C;do{Yt.recordPattern(a,m,h);let ne=Yt.toNarrowWidePattern(h);if(ne<0)throw new de;w=Yt.patternToChar(ne),this.decodeRowResult+=w,C=m;for(let ue of h)m+=ue;m=a.getNextSet(m)}while(w!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let R=0;for(let ne of h)R+=ne;let P=m-C-R;if(m!==x&&P*2<R)throw new de;if(this.usingCheckDigit){let ne=this.decodeRowResult.length-1,ue=0;for(let Ee=0;Ee<ne;Ee++)ue+=Yt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Ee));if(this.decodeRowResult.charAt(ne)!==Yt.ALPHABET_STRING.charAt(ue%43))throw new V;this.decodeRowResult=this.decodeRowResult.substring(0,ne)}if(this.decodeRowResult.length===0)throw new de;let B;this.extendedMode?B=Yt.decodeExtended(this.decodeRowResult):B=this.decodeRowResult;let Y=(f[1]+f[0])/2,te=C+R/2;return new ke(B,null,0,[new Fe(Y,i),new Fe(te,i)],Me.CODE_39,new Date().getTime())}static findAsteriskPattern(i,a){let l=i.getSize(),h=i.getNextSet(0),f=0,m=h,x=!1,w=a.length;for(let C=h;C<l;C++)if(i.get(C)!==x)a[f]++;else{if(f===w-1){if(this.toNarrowWidePattern(a)===Yt.ASTERISK_ENCODING&&i.isRange(Math.max(0,m-Math.floor((C-m)/2)),m,!1))return[m,C];m+=a[0]+a[1],a.copyWithin(0,2,2+f-1),a[f-1]=0,a[f]=0,f--}else f++;a[f]=1,x=!x}throw new de}static toNarrowWidePattern(i){let a=i.length,l=0,h;do{let f=2147483647;for(let w of i)w<f&&w>l&&(f=w);l=f,h=0;let m=0,x=0;for(let w=0;w<a;w++){let C=i[w];C>l&&(x|=1<<a-1-w,h++,m+=C)}if(h===3){for(let w=0;w<a&&h>0;w++){let C=i[w];if(C>l&&(h--,C*2>=m))return-1}return x}}while(h>3);return-1}static patternToChar(i){for(let a=0;a<Yt.CHARACTER_ENCODINGS.length;a++)if(Yt.CHARACTER_ENCODINGS[a]===i)return Yt.ALPHABET_STRING.charAt(a);if(i===Yt.ASTERISK_ENCODING)return"*";throw new de}static decodeExtended(i){let a=i.length,l="";for(let h=0;h<a;h++){let f=i.charAt(h);if(f==="+"||f==="$"||f==="%"||f==="/"){let m=i.charAt(h+1),x="\0";switch(f){case"+":if(m>="A"&&m<="Z")x=String.fromCharCode(m.charCodeAt(0)+32);else throw new z;break;case"$":if(m>="A"&&m<="Z")x=String.fromCharCode(m.charCodeAt(0)-64);else throw new z;break;case"%":if(m>="A"&&m<="E")x=String.fromCharCode(m.charCodeAt(0)-38);else if(m>="F"&&m<="J")x=String.fromCharCode(m.charCodeAt(0)-11);else if(m>="K"&&m<="O")x=String.fromCharCode(m.charCodeAt(0)+16);else if(m>="P"&&m<="T")x=String.fromCharCode(m.charCodeAt(0)+43);else if(m==="U")x="\0";else if(m==="V")x="@";else if(m==="W")x="`";else if(m==="X"||m==="Y"||m==="Z")x="";else throw new z;break;case"/":if(m>="A"&&m<="O")x=String.fromCharCode(m.charCodeAt(0)-32);else if(m==="Z")x=":";else throw new z;break}l+=x,h++}else l+=f}return l}}Yt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Yt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Yt.ASTERISK_ENCODING=148;class rt extends Gt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(i,a,l){let h=this.decodeStart(a),f=this.decodeEnd(a),m=new X;rt.decodeMiddle(a,h[1],f[0],m);let x=m.toString(),w=null;l!=null&&(w=l.get(De.ALLOWED_LENGTHS)),w==null&&(w=rt.DEFAULT_ALLOWED_LENGTHS);let C=x.length,R=!1,P=0;for(let te of w){if(C===te){R=!0;break}te>P&&(P=te)}if(!R&&C>P&&(R=!0),!R)throw new z;const B=[new Fe(h[1],i),new Fe(f[0],i)];return new ke(x,null,0,B,Me.ITF,new Date().getTime())}static decodeMiddle(i,a,l,h){let f=new Int32Array(10),m=new Int32Array(5),x=new Int32Array(5);for(f.fill(0),m.fill(0),x.fill(0);a<l;){Gt.recordPattern(i,a,f);for(let C=0;C<5;C++){let R=2*C;m[C]=f[R],x[C]=f[R+1]}let w=rt.decodeDigit(m);h.append(w.toString()),w=this.decodeDigit(x),h.append(w.toString()),f.forEach(function(C){a+=C})}}decodeStart(i){let a=rt.skipWhiteSpace(i),l=rt.findGuardPattern(i,a,rt.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(i,l[0]),l}validateQuietZone(i,a){let l=this.narrowLineWidth*10;l=l<a?l:a;for(let h=a-1;l>0&&h>=0&&!i.get(h);h--)l--;if(l!==0)throw new de}static skipWhiteSpace(i){const a=i.getSize(),l=i.getNextSet(0);if(l===a)throw new de;return l}decodeEnd(i){i.reverse();try{let a=rt.skipWhiteSpace(i),l;try{l=rt.findGuardPattern(i,a,rt.END_PATTERN_REVERSED[0])}catch(f){f instanceof de&&(l=rt.findGuardPattern(i,a,rt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(i,l[0]);let h=l[0];return l[0]=i.getSize()-l[1],l[1]=i.getSize()-h,l}finally{i.reverse()}}static findGuardPattern(i,a,l){let h=l.length,f=new Int32Array(h),m=i.getSize(),x=!1,w=0,C=a;f.fill(0);for(let R=a;R<m;R++)if(i.get(R)!==x)f[w]++;else{if(w===h-1){if(Gt.patternMatchVariance(f,l,rt.MAX_INDIVIDUAL_VARIANCE)<rt.MAX_AVG_VARIANCE)return[C,R];C+=f[0]+f[1],W.arraycopy(f,2,f,0,w-1),f[w-1]=0,f[w]=0,w--}else w++;f[w]=1,x=!x}throw new de}static decodeDigit(i){let a=rt.MAX_AVG_VARIANCE,l=-1,h=rt.PATTERNS.length;for(let f=0;f<h;f++){let m=rt.PATTERNS[f],x=Gt.patternMatchVariance(i,m,rt.MAX_INDIVIDUAL_VARIANCE);x<a?(a=x,l=f):x===a&&(l=-1)}if(l>=0)return l%10;throw new de}}rt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],rt.MAX_AVG_VARIANCE=.38,rt.MAX_INDIVIDUAL_VARIANCE=.5,rt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],rt.START_PATTERN=Int32Array.from([1,1,1,1]),rt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class nn extends Gt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(i){let a=!1,l,h=0,f=Int32Array.from([0,0,0]);for(;!a;){f=Int32Array.from([0,0,0]),l=nn.findGuardPattern(i,h,!1,this.START_END_PATTERN,f);let m=l[0];h=l[1];let x=m-(h-m);x>=0&&(a=i.isRange(x,m,!1))}return l}static checkChecksum(i){return nn.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let a=i.length;if(a===0)return!1;let l=parseInt(i.charAt(a-1),10);return nn.getStandardUPCEANChecksum(i.substring(0,a-1))===l}static getStandardUPCEANChecksum(i){let a=i.length,l=0;for(let h=a-1;h>=0;h-=2){let f=i.charAt(h).charCodeAt(0)-48;if(f<0||f>9)throw new z;l+=f}l*=3;for(let h=a-2;h>=0;h-=2){let f=i.charAt(h).charCodeAt(0)-48;if(f<0||f>9)throw new z;l+=f}return(1e3-l)%10}static decodeEnd(i,a){return nn.findGuardPattern(i,a,!1,nn.START_END_PATTERN,new Int32Array(nn.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(i,a,l,h){return this.findGuardPattern(i,a,l,h,new Int32Array(h.length))}static findGuardPattern(i,a,l,h,f){let m=i.getSize();a=l?i.getNextUnset(a):i.getNextSet(a);let x=0,w=a,C=h.length,R=l;for(let P=a;P<m;P++)if(i.get(P)!==R)f[x]++;else{if(x===C-1){if(Gt.patternMatchVariance(f,h,nn.MAX_INDIVIDUAL_VARIANCE)<nn.MAX_AVG_VARIANCE)return Int32Array.from([w,P]);w+=f[0]+f[1];let B=f.slice(2,f.length-1);for(let Y=0;Y<x-1;Y++)f[Y]=B[Y];f[x-1]=0,f[x]=0,x--}else x++;f[x]=1,R=!R}throw new de}static decodeDigit(i,a,l,h){this.recordPattern(i,l,a);let f=this.MAX_AVG_VARIANCE,m=-1,x=h.length;for(let w=0;w<x;w++){let C=h[w],R=Gt.patternMatchVariance(a,C,nn.MAX_INDIVIDUAL_VARIANCE);R<f&&(f=R,m=w)}if(m>=0)return m;throw new de}}nn.MAX_AVG_VARIANCE=.48,nn.MAX_INDIVIDUAL_VARIANCE=.7,nn.START_END_PATTERN=Int32Array.from([1,1,1]),nn.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),nn.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),nn.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class oi{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,a,l){let h=this.decodeRowStringBuffer,f=this.decodeMiddle(a,l,h),m=h.toString(),x=oi.parseExtensionString(m),w=[new Fe((l[0]+l[1])/2,i),new Fe(f,i)],C=new ke(m,null,0,w,Me.UPC_EAN_EXTENSION,new Date().getTime());return x!=null&&C.putAllMetadata(x),C}decodeMiddle(i,a,l){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=i.getSize(),m=a[1],x=0;for(let C=0;C<5&&m<f;C++){let R=nn.decodeDigit(i,h,m,nn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+R%10);for(let P of h)m+=P;R>=10&&(x|=1<<4-C),C!==4&&(m=i.getNextSet(m),m=i.getNextUnset(m))}if(l.length!==5)throw new de;let w=this.determineCheckDigit(x);if(oi.extensionChecksum(l.toString())!==w)throw new de;return m}static extensionChecksum(i){let a=i.length,l=0;for(let h=a-2;h>=0;h-=2)l+=i.charAt(h).charCodeAt(0)-48;l*=3;for(let h=a-1;h>=0;h-=2)l+=i.charAt(h).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(i){for(let a=0;a<10;a++)if(i===this.CHECK_DIGIT_ENCODINGS[a])return a;throw new de}static parseExtensionString(i){if(i.length!==5)return null;let a=oi.parseExtension5String(i);return a==null?null:new Map([[Ct.SUGGESTED_PRICE,a]])}static parseExtension5String(i){let a;switch(i.charAt(0)){case"0":a="";break;case"5":a="$";break;case"9":switch(i){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}a="";break;default:a="";break}let l=parseInt(i.substring(1)),h=(l/100).toString(),f=l%100,m=f<10?"0"+f:f.toString();return a+h+"."+m}}class As{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,a,l){let h=this.decodeRowStringBuffer,f=this.decodeMiddle(a,l,h),m=h.toString(),x=As.parseExtensionString(m),w=[new Fe((l[0]+l[1])/2,i),new Fe(f,i)],C=new ke(m,null,0,w,Me.UPC_EAN_EXTENSION,new Date().getTime());return x!=null&&C.putAllMetadata(x),C}decodeMiddle(i,a,l){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=i.getSize(),m=a[1],x=0;for(let w=0;w<2&&m<f;w++){let C=nn.decodeDigit(i,h,m,nn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+C%10);for(let R of h)m+=R;C>=10&&(x|=1<<1-w),w!==1&&(m=i.getNextSet(m),m=i.getNextUnset(m))}if(l.length!==2)throw new de;if(parseInt(l.toString())%4!==x)throw new de;return m}static parseExtensionString(i){return i.length!==2?null:new Map([[Ct.ISSUE_NUMBER,parseInt(i)]])}}class qr{static decodeRow(i,a,l){let h=nn.findGuardPattern(a,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new oi().decodeRow(i,a,h)}catch{return new As().decodeRow(i,a,h)}}}qr.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class At extends nn{constructor(){super(),this.decodeRowStringBuffer="",At.L_AND_G_PATTERNS=At.L_PATTERNS.map(i=>Int32Array.from(i));for(let i=10;i<20;i++){let a=At.L_PATTERNS[i-10],l=new Int32Array(a.length);for(let h=0;h<a.length;h++)l[h]=a[a.length-h-1];At.L_AND_G_PATTERNS[i]=l}}decodeRow(i,a,l){let h=At.findStartGuardPattern(a),f=l==null?null:l.get(De.NEED_RESULT_POINT_CALLBACK);if(f!=null){const Ne=new Fe((h[0]+h[1])/2,i);f.foundPossibleResultPoint(Ne)}let m=this.decodeMiddle(a,h,this.decodeRowStringBuffer),x=m.rowOffset,w=m.resultString;if(f!=null){const Ne=new Fe(x,i);f.foundPossibleResultPoint(Ne)}let C=this.decodeEnd(a,x);if(f!=null){const Ne=new Fe((C[0]+C[1])/2,i);f.foundPossibleResultPoint(Ne)}let R=C[1],P=R+(R-C[0]);if(P>=a.getSize()||!a.isRange(R,P,!1))throw new de;let B=w.toString();if(B.length<8)throw new z;if(!At.checkChecksum(B))throw new V;let Y=(h[1]+h[0])/2,te=(C[1]+C[0])/2,ne=this.getBarcodeFormat(),ue=[new Fe(Y,i),new Fe(te,i)],Ee=new ke(B,null,0,ue,ne,new Date().getTime()),Le=0;try{let Ne=qr.decodeRow(i,a,C[1]);Ee.putMetadata(Ct.UPC_EAN_EXTENSION,Ne.getText()),Ee.putAllMetadata(Ne.getResultMetadata()),Ee.addResultPoints(Ne.getResultPoints()),Le=Ne.getText().length}catch{}let Oe=l==null?null:l.get(De.ALLOWED_EAN_EXTENSIONS);if(Oe!=null){let Ne=!1;for(let Rt in Oe)if(Le.toString()===Rt){Ne=!0;break}if(!Ne)throw new de}return Ee}decodeEnd(i,a){return At.findGuardPattern(i,a,!1,At.START_END_PATTERN,new Int32Array(At.START_END_PATTERN.length).fill(0))}static checkChecksum(i){return At.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let a=i.length;if(a===0)return!1;let l=parseInt(i.charAt(a-1),10);return At.getStandardUPCEANChecksum(i.substring(0,a-1))===l}static getStandardUPCEANChecksum(i){let a=i.length,l=0;for(let h=a-1;h>=0;h-=2){let f=i.charAt(h).charCodeAt(0)-48;if(f<0||f>9)throw new z;l+=f}l*=3;for(let h=a-2;h>=0;h-=2){let f=i.charAt(h).charCodeAt(0)-48;if(f<0||f>9)throw new z;l+=f}return(1e3-l)%10}}class rn extends At{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,a,l){let h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=i.getSize(),m=a[1],x=0;for(let C=0;C<6&&m<f;C++){let R=At.decodeDigit(i,h,m,At.L_AND_G_PATTERNS);l+=String.fromCharCode(48+R%10);for(let P of h)m+=P;R>=10&&(x|=1<<5-C)}l=rn.determineFirstDigit(l,x),m=At.findGuardPattern(i,m,!0,At.MIDDLE_PATTERN,new Int32Array(At.MIDDLE_PATTERN.length).fill(0))[1];for(let C=0;C<6&&m<f;C++){let R=At.decodeDigit(i,h,m,At.L_PATTERNS);l+=String.fromCharCode(48+R);for(let P of h)m+=P}return{rowOffset:m,resultString:l}}getBarcodeFormat(){return Me.EAN_13}static determineFirstDigit(i,a){for(let l=0;l<10;l++)if(a===this.FIRST_DIGIT_ENCODINGS[l])return i=String.fromCharCode(48+l)+i,i;throw new de}}rn.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Xr extends At{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,a,l){const h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=i.getSize(),m=a[1];for(let w=0;w<4&&m<f;w++){let C=At.decodeDigit(i,h,m,At.L_PATTERNS);l+=String.fromCharCode(48+C);for(let R of h)m+=R}m=At.findGuardPattern(i,m,!0,At.MIDDLE_PATTERN,new Int32Array(At.MIDDLE_PATTERN.length).fill(0))[1];for(let w=0;w<4&&m<f;w++){let C=At.decodeDigit(i,h,m,At.L_PATTERNS);l+=String.fromCharCode(48+C);for(let R of h)m+=R}return{rowOffset:m,resultString:l}}getBarcodeFormat(){return Me.EAN_8}}class Kr extends At{constructor(){super(...arguments),this.ean13Reader=new rn}getBarcodeFormat(){return Me.UPC_A}decode(i,a){return this.maybeReturnResult(this.ean13Reader.decode(i))}decodeRow(i,a,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(i,a,l))}decodeMiddle(i,a,l){return this.ean13Reader.decodeMiddle(i,a,l)}maybeReturnResult(i){let a=i.getText();if(a.charAt(0)==="0"){let l=new ke(a.substring(1),null,null,i.getResultPoints(),Me.UPC_A);return i.getResultMetadata()!=null&&l.putAllMetadata(i.getResultMetadata()),l}else throw new de}reset(){this.ean13Reader.reset()}}class wn extends At{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(i,a,l){const h=this.decodeMiddleCounters.map(C=>C);h[0]=0,h[1]=0,h[2]=0,h[3]=0;const f=i.getSize();let m=a[1],x=0;for(let C=0;C<6&&m<f;C++){const R=wn.decodeDigit(i,h,m,wn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+R%10);for(let P of h)m+=P;R>=10&&(x|=1<<5-C)}let w=wn.determineNumSysAndCheckDigit(l,x);return{rowOffset:m,resultString:w}}decodeEnd(i,a){return wn.findGuardPatternWithoutCounters(i,a,!0,wn.MIDDLE_END_PATTERN)}checkChecksum(i){return At.checkChecksum(wn.convertUPCEtoUPCA(i))}static determineNumSysAndCheckDigit(i,a){for(let l=0;l<=1;l++)for(let h=0;h<10;h++)if(a===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][h]){let f=String.fromCharCode(48+l),m=String.fromCharCode(48+h);return f+i+m}throw de.getNotFoundInstance()}getBarcodeFormat(){return Me.UPC_E}static convertUPCEtoUPCA(i){const a=i.slice(1,7).split("").map(f=>f.charCodeAt(0)),l=new X;l.append(i.charAt(0));let h=a[5];switch(h){case 0:case 1:case 2:l.appendChars(a,0,2),l.append(h),l.append("0000"),l.appendChars(a,2,3);break;case 3:l.appendChars(a,0,3),l.append("00000"),l.appendChars(a,3,2);break;case 4:l.appendChars(a,0,4),l.append("00000"),l.append(a[4]);break;default:l.appendChars(a,0,5),l.append("0000"),l.append(h);break}return i.length>=8&&l.append(i.charAt(7)),l.toString()}}wn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),wn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Os extends Gt{constructor(i){super();let a=i==null?null:i.get(De.POSSIBLE_FORMATS),l=[];o(a)?(l.push(new rn),l.push(new Kr),l.push(new Xr),l.push(new wn)):(a.indexOf(Me.EAN_13)>-1&&l.push(new rn),a.indexOf(Me.UPC_A)>-1&&l.push(new Kr),a.indexOf(Me.EAN_8)>-1&&l.push(new Xr),a.indexOf(Me.UPC_E)>-1&&l.push(new wn)),this.readers=l}decodeRow(i,a,l){for(let h of this.readers)try{const f=h.decodeRow(i,a,l),m=f.getBarcodeFormat()===Me.EAN_13&&f.getText().charAt(0)==="0",x=l==null?null:l.get(De.POSSIBLE_FORMATS),w=x==null||x.includes(Me.UPC_A);if(m&&w){const C=f.getRawBytes(),R=new ke(f.getText().substring(1),C,C?C.length:null,f.getResultPoints(),Me.UPC_A);return R.putAllMetadata(f.getResultMetadata()),R}return f}catch{}throw new de}reset(){for(let i of this.readers)i.reset()}}class Pn extends Gt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(i,a){for(let l=0;l<a.length;l++)if(Gt.patternMatchVariance(i,a[l],Pn.MAX_INDIVIDUAL_VARIANCE)<Pn.MAX_AVG_VARIANCE)return l;throw new de}static count(i){return Qe.sum(new Int32Array(i))}static increment(i,a){let l=0,h=a[0];for(let f=1;f<i.length;f++)a[f]>h&&(h=a[f],l=f);i[l]++}static decrement(i,a){let l=0,h=a[0];for(let f=1;f<i.length;f++)a[f]<h&&(h=a[f],l=f);i[l]--}static isFinderPattern(i){let a=i[0]+i[1],l=a+i[2]+i[3],h=a/l;if(h>=Pn.MIN_FINDER_PATTERN_RATIO&&h<=Pn.MAX_FINDER_PATTERN_RATIO){let f=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;for(let x of i)x>m&&(m=x),x<f&&(f=x);return m<10*f}return!1}}Pn.MAX_AVG_VARIANCE=.2,Pn.MAX_INDIVIDUAL_VARIANCE=.45,Pn.MIN_FINDER_PATTERN_RATIO=9.5/12,Pn.MAX_FINDER_PATTERN_RATIO=12.5/14;class Er{constructor(i,a){this.value=i,this.checksumPortion=a}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(i){if(!(i instanceof Er))return!1;const a=i;return this.value===a.value&&this.checksumPortion===a.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class xi{constructor(i,a,l,h,f){this.value=i,this.startEnd=a,this.value=i,this.startEnd=a,this.resultPoints=new Array,this.resultPoints.push(new Fe(l,f)),this.resultPoints.push(new Fe(h,f))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(i){if(!(i instanceof xi))return!1;const a=i;return this.value===a.value}hashCode(){return this.value}}class Wr{constructor(){}static getRSSvalue(i,a,l){let h=0;for(let w of i)h+=w;let f=0,m=0,x=i.length;for(let w=0;w<x-1;w++){let C;for(C=1,m|=1<<w;C<i[w];C++,m&=~(1<<w)){let R=Wr.combins(h-C-1,x-w-2);if(l&&m===0&&h-C-(x-w-1)>=x-w-1&&(R-=Wr.combins(h-C-(x-w),x-w-2)),x-w-1>1){let P=0;for(let B=h-C-(x-w-2);B>a;B--)P+=Wr.combins(h-C-B-1,x-w-3);R-=P*(x-1-w)}else h-C>a&&R--;f+=R}h-=C}return f}static combins(i,a){let l,h;i-a>a?(h=a,l=i-a):(h=i-a,l=a);let f=1,m=1;for(let x=i;x>l;x--)f*=x,m<=h&&(f/=m,m++);for(;m<=h;)f/=m,m++;return f}}class Qi{static buildBitArray(i){let a=i.length*2-1;i[i.length-1].getRightChar()==null&&(a-=1);let l=12*a,h=new fe(l),f=0,x=i[0].getRightChar().getValue();for(let w=11;w>=0;--w)(x&1<<w)!=0&&h.set(f),f++;for(let w=1;w<i.length;++w){let C=i[w],R=C.getLeftChar().getValue();for(let P=11;P>=0;--P)(R&1<<P)!=0&&h.set(f),f++;if(C.getRightChar()!=null){let P=C.getRightChar().getValue();for(let B=11;B>=0;--B)(P&1<<B)!=0&&h.set(f),f++}}return h}}class li{constructor(i,a){a?this.decodedInformation=null:(this.finished=i,this.decodedInformation=a)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Zi{constructor(i){this.newPosition=i}getNewPosition(){return this.newPosition}}class Bn extends Zi{constructor(i,a){super(i),this.value=a}getValue(){return this.value}isFNC1(){return this.value===Bn.FNC1}}Bn.FNC1="$";class _r extends Zi{constructor(i,a,l){super(i),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=a}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class wr extends Zi{constructor(i,a,l){if(super(i),a<0||a>10||l<0||l>10)throw new z;this.firstDigit=a,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===wr.FNC1}isSecondDigitFNC1(){return this.secondDigit===wr.FNC1}isAnyFNC1(){return this.firstDigit===wr.FNC1||this.secondDigit===wr.FNC1}}wr.FNC1=10;class Ve{constructor(){}static parseFieldsInGeneralPurpose(i){if(!i)return null;if(i.length<2)throw new de;let a=i.substring(0,2);for(let f of Ve.TWO_DIGIT_DATA_LENGTH)if(f[0]===a)return f[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(2,f[2],i):Ve.processFixedAI(2,f[1],i);if(i.length<3)throw new de;let l=i.substring(0,3);for(let f of Ve.THREE_DIGIT_DATA_LENGTH)if(f[0]===l)return f[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(3,f[2],i):Ve.processFixedAI(3,f[1],i);for(let f of Ve.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(f[0]===l)return f[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(4,f[2],i):Ve.processFixedAI(4,f[1],i);if(i.length<4)throw new de;let h=i.substring(0,4);for(let f of Ve.FOUR_DIGIT_DATA_LENGTH)if(f[0]===h)return f[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(4,f[2],i):Ve.processFixedAI(4,f[1],i);throw new de}static processFixedAI(i,a,l){if(l.length<i)throw new de;let h=l.substring(0,i);if(l.length<i+a)throw new de;let f=l.substring(i,i+a),m=l.substring(i+a),x="("+h+")"+f,w=Ve.parseFieldsInGeneralPurpose(m);return w==null?x:x+w}static processVariableAI(i,a,l){let h=l.substring(0,i),f;l.length<i+a?f=l.length:f=i+a;let m=l.substring(i,f),x=l.substring(f),w="("+h+")"+m,C=Ve.parseFieldsInGeneralPurpose(x);return C==null?w:w+C}}Ve.VARIABLE_LENGTH=[],Ve.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ve.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ve.VARIABLE_LENGTH,20],["22",Ve.VARIABLE_LENGTH,29],["30",Ve.VARIABLE_LENGTH,8],["37",Ve.VARIABLE_LENGTH,8],["90",Ve.VARIABLE_LENGTH,30],["91",Ve.VARIABLE_LENGTH,30],["92",Ve.VARIABLE_LENGTH,30],["93",Ve.VARIABLE_LENGTH,30],["94",Ve.VARIABLE_LENGTH,30],["95",Ve.VARIABLE_LENGTH,30],["96",Ve.VARIABLE_LENGTH,30],["97",Ve.VARIABLE_LENGTH,3],["98",Ve.VARIABLE_LENGTH,30],["99",Ve.VARIABLE_LENGTH,30]],Ve.THREE_DIGIT_DATA_LENGTH=[["240",Ve.VARIABLE_LENGTH,30],["241",Ve.VARIABLE_LENGTH,30],["242",Ve.VARIABLE_LENGTH,6],["250",Ve.VARIABLE_LENGTH,30],["251",Ve.VARIABLE_LENGTH,30],["253",Ve.VARIABLE_LENGTH,17],["254",Ve.VARIABLE_LENGTH,20],["400",Ve.VARIABLE_LENGTH,30],["401",Ve.VARIABLE_LENGTH,30],["402",17],["403",Ve.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ve.VARIABLE_LENGTH,20],["421",Ve.VARIABLE_LENGTH,15],["422",3],["423",Ve.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ve.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ve.VARIABLE_LENGTH,15],["391",Ve.VARIABLE_LENGTH,18],["392",Ve.VARIABLE_LENGTH,15],["393",Ve.VARIABLE_LENGTH,18],["703",Ve.VARIABLE_LENGTH,30]],Ve.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ve.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ve.VARIABLE_LENGTH,20],["8003",Ve.VARIABLE_LENGTH,30],["8004",Ve.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ve.VARIABLE_LENGTH,30],["8008",Ve.VARIABLE_LENGTH,12],["8018",18],["8020",Ve.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ve.VARIABLE_LENGTH,70],["8200",Ve.VARIABLE_LENGTH,70]];class hr{constructor(i){this.buffer=new X,this.information=i}decodeAllCodes(i,a){let l=a,h=null;do{let f=this.decodeGeneralPurposeField(l,h),m=Ve.parseFieldsInGeneralPurpose(f.getNewString());if(m!=null&&i.append(m),f.isRemaining()?h=""+f.getRemainingValue():h=null,l===f.getNewPosition())break;l=f.getNewPosition()}while(!0);return i.toString()}isStillNumeric(i){if(i+7>this.information.getSize())return i+4<=this.information.getSize();for(let a=i;a<i+3;++a)if(this.information.get(a))return!0;return this.information.get(i+3)}decodeNumeric(i){if(i+7>this.information.getSize()){let f=this.extractNumericValueFromBitArray(i,4);return f===0?new wr(this.information.getSize(),wr.FNC1,wr.FNC1):new wr(this.information.getSize(),f-1,wr.FNC1)}let a=this.extractNumericValueFromBitArray(i,7),l=(a-8)/11,h=(a-8)%11;return new wr(i+7,l,h)}extractNumericValueFromBitArray(i,a){return hr.extractNumericValueFromBitArray(this.information,i,a)}static extractNumericValueFromBitArray(i,a,l){let h=0;for(let f=0;f<l;++f)i.get(a+f)&&(h|=1<<l-f-1);return h}decodeGeneralPurposeField(i,a){this.buffer.setLengthToZero(),a!=null&&this.buffer.append(a),this.current.setPosition(i);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new _r(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new _r(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let i,a;do{let l=this.current.getPosition();if(this.current.isAlpha()?(a=this.parseAlphaBlock(),i=a.isFinished()):this.current.isIsoIec646()?(a=this.parseIsoIec646Block(),i=a.isFinished()):(a=this.parseNumericBlock(),i=a.isFinished()),!(l!==this.current.getPosition())&&!i)break}while(!i);return a.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let i=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFirstDigitFNC1()){let a;return i.isSecondDigitFNC1()?a=new _r(this.current.getPosition(),this.buffer.toString()):a=new _r(this.current.getPosition(),this.buffer.toString(),i.getSecondDigit()),new li(!0,a)}if(this.buffer.append(i.getFirstDigit()),i.isSecondDigitFNC1()){let a=new _r(this.current.getPosition(),this.buffer.toString());return new li(!0,a)}this.buffer.append(i.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new li(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let i=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let a=new _r(this.current.getPosition(),this.buffer.toString());return new li(!0,a)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new li(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let i=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let a=new _r(this.current.getPosition(),this.buffer.toString());return new li(!0,a)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new li(!1)}isStillIsoIec646(i){if(i+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(i,5);if(a>=5&&a<16)return!0;if(i+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,7);if(l>=64&&l<116)return!0;if(i+8>this.information.getSize())return!1;let h=this.extractNumericValueFromBitArray(i,8);return h>=232&&h<253}decodeIsoIec646(i){let a=this.extractNumericValueFromBitArray(i,5);if(a===15)return new Bn(i+5,Bn.FNC1);if(a>=5&&a<15)return new Bn(i+5,"0"+(a-5));let l=this.extractNumericValueFromBitArray(i,7);if(l>=64&&l<90)return new Bn(i+7,""+(l+1));if(l>=90&&l<116)return new Bn(i+7,""+(l+7));let h=this.extractNumericValueFromBitArray(i,8),f;switch(h){case 232:f="!";break;case 233:f='"';break;case 234:f="%";break;case 235:f="&";break;case 236:f="'";break;case 237:f="(";break;case 238:f=")";break;case 239:f="*";break;case 240:f="+";break;case 241:f=",";break;case 242:f="-";break;case 243:f=".";break;case 244:f="/";break;case 245:f=":";break;case 246:f=";";break;case 247:f="<";break;case 248:f="=";break;case 249:f=">";break;case 250:f="?";break;case 251:f="_";break;case 252:f=" ";break;default:throw new z}return new Bn(i+8,f)}isStillAlpha(i){if(i+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(i,5);if(a>=5&&a<16)return!0;if(i+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,6);return l>=16&&l<63}decodeAlphanumeric(i){let a=this.extractNumericValueFromBitArray(i,5);if(a===15)return new Bn(i+5,Bn.FNC1);if(a>=5&&a<15)return new Bn(i+5,"0"+(a-5));let l=this.extractNumericValueFromBitArray(i,6);if(l>=32&&l<58)return new Bn(i+6,""+(l+33));let h;switch(l){case 58:h="*";break;case 59:h=",";break;case 60:h="-";break;case 61:h=".";break;case 62:h="/";break;default:throw new nr("Decoding invalid alphanumeric value: "+l)}return new Bn(i+6,h)}isAlphaTo646ToAlphaLatch(i){if(i+1>this.information.getSize())return!1;for(let a=0;a<5&&a+i<this.information.getSize();++a)if(a===2){if(!this.information.get(i+2))return!1}else if(this.information.get(i+a))return!1;return!0}isAlphaOr646ToNumericLatch(i){if(i+3>this.information.getSize())return!1;for(let a=i;a<i+3;++a)if(this.information.get(a))return!1;return!0}isNumericToAlphaNumericLatch(i){if(i+1>this.information.getSize())return!1;for(let a=0;a<4&&a+i<this.information.getSize();++a)if(this.information.get(i+a))return!1;return!0}}class An{constructor(i){this.information=i,this.generalDecoder=new hr(i)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class qt extends An{constructor(i){super(i)}encodeCompressedGtin(i,a){i.append("(01)");let l=i.length();i.append("9"),this.encodeCompressedGtinWithoutAI(i,a,l)}encodeCompressedGtinWithoutAI(i,a,l){for(let h=0;h<4;++h){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(a+10*h,10);f/100===0&&i.append("0"),f/10===0&&i.append("0"),i.append(f)}qt.appendCheckDigit(i,l)}static appendCheckDigit(i,a){let l=0;for(let h=0;h<13;h++){let f=i.charAt(h+a).charCodeAt(0)-48;l+=(h&1)===0?3*f:f}l=10-l%10,l===10&&(l=0),i.append(l)}}qt.GTIN_SIZE=40;class Ar extends qt{constructor(i){super(i)}parseInformation(){let i=new X;i.append("(01)");let a=i.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(Ar.HEADER_SIZE,4);return i.append(l),this.encodeCompressedGtinWithoutAI(i,Ar.HEADER_SIZE+4,a),this.getGeneralDecoder().decodeAllCodes(i,Ar.HEADER_SIZE+44)}}Ar.HEADER_SIZE=4;class Mi extends An{constructor(i){super(i)}parseInformation(){let i=new X;return this.getGeneralDecoder().decodeAllCodes(i,Mi.HEADER_SIZE)}}Mi.HEADER_SIZE=5;class Ds extends qt{constructor(i){super(i)}encodeCompressedWeight(i,a,l){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(a,l);this.addWeightCode(i,h);let f=this.checkWeight(h),m=1e5;for(let x=0;x<5;++x)f/m===0&&i.append("0"),m/=10;i.append(f)}}class Mr extends Ds{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()!=Mr.HEADER_SIZE+Ds.GTIN_SIZE+Mr.WEIGHT_SIZE)throw new de;let i=new X;return this.encodeCompressedGtin(i,Mr.HEADER_SIZE),this.encodeCompressedWeight(i,Mr.HEADER_SIZE+Ds.GTIN_SIZE,Mr.WEIGHT_SIZE),i.toString()}}Mr.HEADER_SIZE=5,Mr.WEIGHT_SIZE=15;class Ma extends Mr{constructor(i){super(i)}addWeightCode(i,a){i.append("(3103)")}checkWeight(i){return i}}class yi extends Mr{constructor(i){super(i)}addWeightCode(i,a){a<1e4?i.append("(3202)"):i.append("(3203)")}checkWeight(i){return i<1e4?i:i-1e4}}class br extends qt{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<br.HEADER_SIZE+qt.GTIN_SIZE)throw new de;let i=new X;this.encodeCompressedGtin(i,br.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(br.HEADER_SIZE+qt.GTIN_SIZE,br.LAST_DIGIT_SIZE);i.append("(392"),i.append(a),i.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(br.HEADER_SIZE+qt.GTIN_SIZE+br.LAST_DIGIT_SIZE,null);return i.append(l.getNewString()),i.toString()}}br.HEADER_SIZE=8,br.LAST_DIGIT_SIZE=2;class gn extends qt{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<gn.HEADER_SIZE+qt.GTIN_SIZE)throw new de;let i=new X;this.encodeCompressedGtin(i,gn.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(gn.HEADER_SIZE+qt.GTIN_SIZE,gn.LAST_DIGIT_SIZE);i.append("(393"),i.append(a),i.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(gn.HEADER_SIZE+qt.GTIN_SIZE+gn.LAST_DIGIT_SIZE,gn.FIRST_THREE_DIGITS_SIZE);l/100==0&&i.append("0"),l/10==0&&i.append("0"),i.append(l);let h=this.getGeneralDecoder().decodeGeneralPurposeField(gn.HEADER_SIZE+qt.GTIN_SIZE+gn.LAST_DIGIT_SIZE+gn.FIRST_THREE_DIGITS_SIZE,null);return i.append(h.getNewString()),i.toString()}}gn.HEADER_SIZE=8,gn.LAST_DIGIT_SIZE=2,gn.FIRST_THREE_DIGITS_SIZE=10;class Dt extends Ds{constructor(i,a,l){super(i),this.dateCode=l,this.firstAIdigits=a}parseInformation(){if(this.getInformation().getSize()!=Dt.HEADER_SIZE+Dt.GTIN_SIZE+Dt.WEIGHT_SIZE+Dt.DATE_SIZE)throw new de;let i=new X;return this.encodeCompressedGtin(i,Dt.HEADER_SIZE),this.encodeCompressedWeight(i,Dt.HEADER_SIZE+Dt.GTIN_SIZE,Dt.WEIGHT_SIZE),this.encodeCompressedDate(i,Dt.HEADER_SIZE+Dt.GTIN_SIZE+Dt.WEIGHT_SIZE),i.toString()}encodeCompressedDate(i,a){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(a,Dt.DATE_SIZE);if(l==38400)return;i.append("("),i.append(this.dateCode),i.append(")");let h=l%32;l/=32;let f=l%12+1;l/=12;let m=l;m/10==0&&i.append("0"),i.append(m),f/10==0&&i.append("0"),i.append(f),h/10==0&&i.append("0"),i.append(h)}addWeightCode(i,a){i.append("("),i.append(this.firstAIdigits),i.append(a/1e5),i.append(")")}checkWeight(i){return i%1e5}}Dt.HEADER_SIZE=8,Dt.WEIGHT_SIZE=20,Dt.DATE_SIZE=16;function Sr(L){try{if(L.get(1))return new Ar(L);if(!L.get(2))return new Mi(L);switch(hr.extractNumericValueFromBitArray(L,1,4)){case 4:return new Ma(L);case 5:return new yi(L)}switch(hr.extractNumericValueFromBitArray(L,1,5)){case 12:return new br(L);case 13:return new gn(L)}switch(hr.extractNumericValueFromBitArray(L,1,7)){case 56:return new Dt(L,"310","11");case 57:return new Dt(L,"320","11");case 58:return new Dt(L,"310","13");case 59:return new Dt(L,"320","13");case 60:return new Dt(L,"310","15");case 61:return new Dt(L,"320","15");case 62:return new Dt(L,"310","17");case 63:return new Dt(L,"320","17")}}catch(i){throw console.log(i),new nr("unknown decoder: "+L)}}class ir{constructor(i,a,l,h){this.leftchar=i,this.rightchar=a,this.finderpattern=l,this.maybeLast=h}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(i,a){return i instanceof ir?ir.equalsOrNull(i.leftchar,a.leftchar)&&ir.equalsOrNull(i.rightchar,a.rightchar)&&ir.equalsOrNull(i.finderpattern,a.finderpattern):!1}static equalsOrNull(i,a){return i===null?a===null:ir.equals(i,a)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class bn{constructor(i,a,l){this.pairs=i,this.rowNumber=a,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(i){return this.checkEqualitity(this,i)}toString(){return"{ "+this.pairs+" }"}equals(i,a){return i instanceof bn?this.checkEqualitity(i,a)&&i.wasReversed===a.wasReversed:!1}checkEqualitity(i,a){if(!i||!a)return;let l;return i.forEach((h,f)=>{a.forEach(m=>{h.getLeftChar().getValue()===m.getLeftChar().getValue()&&h.getRightChar().getValue()===m.getRightChar().getValue()&&h.getFinderPatter().getValue()===m.getFinderPatter().getValue()&&(l=!0)})}),l}}class F extends Pn{constructor(i){super(...arguments),this.pairs=new Array(F.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=i===!0}decodeRow(i,a,l){this.pairs.length=0,this.startFromEven=!1;try{return F.constructResult(this.decodeRow2pairs(i,a))}catch(h){this.verbose&&console.log(h)}return this.pairs.length=0,this.startFromEven=!0,F.constructResult(this.decodeRow2pairs(i,a))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(i,a){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(a,this.pairs,i))}catch(f){if(f instanceof de){if(!this.pairs.length)throw new de;l=!0}}if(this.checkChecksum())return this.pairs;let h;if(this.rows.length?h=!0:h=!1,this.storeRow(i,!1),h){let f=this.checkRowsBoolean(!1);if(f!=null||(f=this.checkRowsBoolean(!0),f!=null))return f}throw new de}checkRowsBoolean(i){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,i&&(this.rows=this.rows.reverse());let a=null;try{a=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return i&&(this.rows=this.rows.reverse()),a}checkRows(i,a){for(let l=a;l<this.rows.length;l++){let h=this.rows[l];this.pairs.length=0;for(let m of i)this.pairs.push(m.getPairs());if(this.pairs.push(h.getPairs()),!F.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let f=new Array(i);f.push(h);try{return this.checkRows(f,l+1)}catch(m){this.verbose&&console.log(m)}}throw new de}static isValidSequence(i){for(let a of F.FINDER_PATTERN_SEQUENCES){if(i.length>a.length)continue;let l=!0;for(let h=0;h<i.length;h++)if(i[h].getFinderPattern().getValue()!=a[h]){l=!1;break}if(l)return!0}return!1}storeRow(i,a){let l=0,h=!1,f=!1;for(;l<this.rows.length;){let m=this.rows[l];if(m.getRowNumber()>i){f=m.isEquivalent(this.pairs);break}h=m.isEquivalent(this.pairs),l++}f||h||F.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new bn(this.pairs,i,a)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(i,a){for(let l of a)if(l.getPairs().length!==i.length){for(let h of l.getPairs())for(let f of i)if(ir.equals(h,f))break}}static isPartialRow(i,a){for(let l of a){let h=!0;for(let f of i){let m=!1;for(let x of l.getPairs())if(f.equals(x)){m=!0;break}if(!m){h=!1;break}}if(h)return!0}return!1}getRows(){return this.rows}static constructResult(i){let a=Qi.buildBitArray(i),h=Sr(a).parseInformation(),f=i[0].getFinderPattern().getResultPoints(),m=i[i.length-1].getFinderPattern().getResultPoints(),x=[f[0],f[1],m[0],m[1]];return new ke(h,null,null,x,Me.RSS_EXPANDED,null)}checkChecksum(){let i=this.pairs.get(0),a=i.getLeftChar(),l=i.getRightChar();if(l==null)return!1;let h=l.getChecksumPortion(),f=2;for(let x=1;x<this.pairs.size();++x){let w=this.pairs.get(x);h+=w.getLeftChar().getChecksumPortion(),f++;let C=w.getRightChar();C!=null&&(h+=C.getChecksumPortion(),f++)}return h%=211,211*(f-4)+h==a.getValue()}static getNextSecondBar(i,a){let l;return i.get(a)?(l=i.getNextUnset(a),l=i.getNextSet(l)):(l=i.getNextSet(a),l=i.getNextUnset(l)),l}retrieveNextPair(i,a,l){let h=a.length%2==0;this.startFromEven&&(h=!h);let f,m=!0,x=-1;do this.findNextPair(i,a,x),f=this.parseFoundFinderPattern(i,l,h),f==null?x=F.getNextSecondBar(i,this.startEnd[0]):m=!1;while(m);let w=this.decodeDataCharacter(i,f,h,!0);if(!this.isEmptyPair(a)&&a[a.length-1].mustBeLast())throw new de;let C;try{C=this.decodeDataCharacter(i,f,h,!1)}catch(R){C=null,this.verbose&&console.log(R)}return new ir(w,C,f,!0)}isEmptyPair(i){return i.length===0}findNextPair(i,a,l){let h=this.getDecodeFinderCounters();h[0]=0,h[1]=0,h[2]=0,h[3]=0;let f=i.getSize(),m;l>=0?m=l:this.isEmptyPair(a)?m=0:m=a[a.length-1].getFinderPattern().getStartEnd()[1];let x=a.length%2!=0;this.startFromEven&&(x=!x);let w=!1;for(;m<f&&(w=!i.get(m),!!w);)m++;let C=0,R=m;for(let P=m;P<f;P++)if(i.get(P)!=w)h[C]++;else{if(C==3){if(x&&F.reverseCounters(h),F.isFinderPattern(h)){this.startEnd[0]=R,this.startEnd[1]=P;return}x&&F.reverseCounters(h),R+=h[0]+h[1],h[0]=h[2],h[1]=h[3],h[2]=0,h[3]=0,C--}else C++;h[C]=1,w=!w}throw new de}static reverseCounters(i){let a=i.length;for(let l=0;l<a/2;++l){let h=i[l];i[l]=i[a-l-1],i[a-l-1]=h}}parseFoundFinderPattern(i,a,l){let h,f,m;if(l){let C=this.startEnd[0]-1;for(;C>=0&&!i.get(C);)C--;C++,h=this.startEnd[0]-C,f=C,m=this.startEnd[1]}else f=this.startEnd[0],m=i.getNextUnset(this.startEnd[1]+1),h=m-this.startEnd[1];let x=this.getDecodeFinderCounters();W.arraycopy(x,0,x,1,x.length-1),x[0]=h;let w;try{w=this.parseFinderValue(x,F.FINDER_PATTERNS)}catch{return null}return new xi(w,[f,m],f,m,a)}decodeDataCharacter(i,a,l,h){let f=this.getDataCharacterCounters();for(let cn=0;cn<f.length;cn++)f[cn]=0;if(h)F.recordPatternInReverse(i,a.getStartEnd()[0],f);else{F.recordPattern(i,a.getStartEnd()[1],f);for(let cn=0,vr=f.length-1;cn<vr;cn++,vr--){let di=f[cn];f[cn]=f[vr],f[vr]=di}}let m=17,x=Qe.sum(new Int32Array(f))/m,w=(a.getStartEnd()[1]-a.getStartEnd()[0])/15;if(Math.abs(x-w)/w>.3)throw new de;let C=this.getOddCounts(),R=this.getEvenCounts(),P=this.getOddRoundingErrors(),B=this.getEvenRoundingErrors();for(let cn=0;cn<f.length;cn++){let vr=1*f[cn]/x,di=vr+.5;if(di<1){if(vr<.3)throw new de;di=1}else if(di>8){if(vr>8.7)throw new de;di=8}let ja=cn/2;(cn&1)==0?(C[ja]=di,P[ja]=vr-di):(R[ja]=di,B[ja]=vr-di)}this.adjustOddEvenCounts(m);let Y=4*a.getValue()+(l?0:2)+(h?0:1)-1,te=0,ne=0;for(let cn=C.length-1;cn>=0;cn--){if(F.isNotA1left(a,l,h)){let vr=F.WEIGHTS[Y][2*cn];ne+=C[cn]*vr}te+=C[cn]}let ue=0;for(let cn=R.length-1;cn>=0;cn--)if(F.isNotA1left(a,l,h)){let vr=F.WEIGHTS[Y][2*cn+1];ue+=R[cn]*vr}let Ee=ne+ue;if((te&1)!=0||te>13||te<4)throw new de;let Le=(13-te)/2,Oe=F.SYMBOL_WIDEST[Le],Ne=9-Oe,Rt=Wr.getRSSvalue(C,Oe,!0),ft=Wr.getRSSvalue(R,Ne,!1),Wn=F.EVEN_TOTAL_SUBSET[Le],bi=F.GSUM[Le],Pr=Rt*Wn+ft+bi;return new Er(Pr,Ee)}static isNotA1left(i,a,l){return!(i.getValue()==0&&a&&l)}adjustOddEvenCounts(i){let a=Qe.sum(new Int32Array(this.getOddCounts())),l=Qe.sum(new Int32Array(this.getEvenCounts())),h=!1,f=!1;a>13?f=!0:a<4&&(h=!0);let m=!1,x=!1;l>13?x=!0:l<4&&(m=!0);let w=a+l-i,C=(a&1)==1,R=(l&1)==0;if(w==1)if(C){if(R)throw new de;f=!0}else{if(!R)throw new de;x=!0}else if(w==-1)if(C){if(R)throw new de;h=!0}else{if(!R)throw new de;m=!0}else if(w==0){if(C){if(!R)throw new de;a<l?(h=!0,x=!0):(f=!0,m=!0)}else if(R)throw new de}else throw new de;if(h){if(f)throw new de;F.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&F.decrement(this.getOddCounts(),this.getOddRoundingErrors()),m){if(x)throw new de;F.increment(this.getEvenCounts(),this.getOddRoundingErrors())}x&&F.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}F.SYMBOL_WIDEST=[7,5,4,3,1],F.EVEN_TOTAL_SUBSET=[4,20,52,104,204],F.GSUM=[0,348,1388,2948,3988],F.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],F.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],F.FINDER_PAT_A=0,F.FINDER_PAT_B=1,F.FINDER_PAT_C=2,F.FINDER_PAT_D=3,F.FINDER_PAT_E=4,F.FINDER_PAT_F=5,F.FINDER_PATTERN_SEQUENCES=[[F.FINDER_PAT_A,F.FINDER_PAT_A],[F.FINDER_PAT_A,F.FINDER_PAT_B,F.FINDER_PAT_B],[F.FINDER_PAT_A,F.FINDER_PAT_C,F.FINDER_PAT_B,F.FINDER_PAT_D],[F.FINDER_PAT_A,F.FINDER_PAT_E,F.FINDER_PAT_B,F.FINDER_PAT_D,F.FINDER_PAT_C],[F.FINDER_PAT_A,F.FINDER_PAT_E,F.FINDER_PAT_B,F.FINDER_PAT_D,F.FINDER_PAT_D,F.FINDER_PAT_F],[F.FINDER_PAT_A,F.FINDER_PAT_E,F.FINDER_PAT_B,F.FINDER_PAT_D,F.FINDER_PAT_E,F.FINDER_PAT_F,F.FINDER_PAT_F],[F.FINDER_PAT_A,F.FINDER_PAT_A,F.FINDER_PAT_B,F.FINDER_PAT_B,F.FINDER_PAT_C,F.FINDER_PAT_C,F.FINDER_PAT_D,F.FINDER_PAT_D],[F.FINDER_PAT_A,F.FINDER_PAT_A,F.FINDER_PAT_B,F.FINDER_PAT_B,F.FINDER_PAT_C,F.FINDER_PAT_C,F.FINDER_PAT_D,F.FINDER_PAT_E,F.FINDER_PAT_E],[F.FINDER_PAT_A,F.FINDER_PAT_A,F.FINDER_PAT_B,F.FINDER_PAT_B,F.FINDER_PAT_C,F.FINDER_PAT_C,F.FINDER_PAT_D,F.FINDER_PAT_E,F.FINDER_PAT_F,F.FINDER_PAT_F],[F.FINDER_PAT_A,F.FINDER_PAT_A,F.FINDER_PAT_B,F.FINDER_PAT_B,F.FINDER_PAT_C,F.FINDER_PAT_D,F.FINDER_PAT_D,F.FINDER_PAT_E,F.FINDER_PAT_E,F.FINDER_PAT_F,F.FINDER_PAT_F]],F.MAX_PAIRS=11;class Je extends Er{constructor(i,a,l){super(i,a),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Ue extends Pn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(i,a,l){const h=this.decodePair(a,!1,i,l);Ue.addOrTally(this.possibleLeftPairs,h),a.reverse();let f=this.decodePair(a,!0,i,l);Ue.addOrTally(this.possibleRightPairs,f),a.reverse();for(let m of this.possibleLeftPairs)if(m.getCount()>1){for(let x of this.possibleRightPairs)if(x.getCount()>1&&Ue.checkChecksum(m,x))return Ue.constructResult(m,x)}throw new de}static addOrTally(i,a){if(a==null)return;let l=!1;for(let h of i)if(h.getValue()===a.getValue()){h.incrementCount(),l=!0;break}l||i.push(a)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(i,a){let l=4537077*i.getValue()+a.getValue(),h=new String(l).toString(),f=new X;for(let C=13-h.length;C>0;C--)f.append("0");f.append(h);let m=0;for(let C=0;C<13;C++){let R=f.charAt(C).charCodeAt(0)-48;m+=(C&1)===0?3*R:R}m=10-m%10,m===10&&(m=0),f.append(m.toString());let x=i.getFinderPattern().getResultPoints(),w=a.getFinderPattern().getResultPoints();return new ke(f.toString(),null,0,[x[0],x[1],w[0],w[1]],Me.RSS_14,new Date().getTime())}static checkChecksum(i,a){let l=(i.getChecksumPortion()+16*a.getChecksumPortion())%79,h=9*i.getFinderPattern().getValue()+a.getFinderPattern().getValue();return h>72&&h--,h>8&&h--,l===h}decodePair(i,a,l,h){try{let f=this.findFinderPattern(i,a),m=this.parseFoundFinderPattern(i,l,a,f),x=h==null?null:h.get(De.NEED_RESULT_POINT_CALLBACK);if(x!=null){let R=(f[0]+f[1])/2;a&&(R=i.getSize()-1-R),x.foundPossibleResultPoint(new Fe(R,l))}let w=this.decodeDataCharacter(i,m,!0),C=this.decodeDataCharacter(i,m,!1);return new Je(1597*w.getValue()+C.getValue(),w.getChecksumPortion()+4*C.getChecksumPortion(),m)}catch{return null}}decodeDataCharacter(i,a,l){let h=this.getDataCharacterCounters();for(let ue=0;ue<h.length;ue++)h[ue]=0;if(l)Gt.recordPatternInReverse(i,a.getStartEnd()[0],h);else{Gt.recordPattern(i,a.getStartEnd()[1]+1,h);for(let ue=0,Ee=h.length-1;ue<Ee;ue++,Ee--){let Le=h[ue];h[ue]=h[Ee],h[Ee]=Le}}let f=l?16:15,m=Qe.sum(new Int32Array(h))/f,x=this.getOddCounts(),w=this.getEvenCounts(),C=this.getOddRoundingErrors(),R=this.getEvenRoundingErrors();for(let ue=0;ue<h.length;ue++){let Ee=h[ue]/m,Le=Math.floor(Ee+.5);Le<1?Le=1:Le>8&&(Le=8);let Oe=Math.floor(ue/2);(ue&1)===0?(x[Oe]=Le,C[Oe]=Ee-Le):(w[Oe]=Le,R[Oe]=Ee-Le)}this.adjustOddEvenCounts(l,f);let P=0,B=0;for(let ue=x.length-1;ue>=0;ue--)B*=9,B+=x[ue],P+=x[ue];let Y=0,te=0;for(let ue=w.length-1;ue>=0;ue--)Y*=9,Y+=w[ue],te+=w[ue];let ne=B+3*Y;if(l){if((P&1)!==0||P>12||P<4)throw new de;let ue=(12-P)/2,Ee=Ue.OUTSIDE_ODD_WIDEST[ue],Le=9-Ee,Oe=Wr.getRSSvalue(x,Ee,!1),Ne=Wr.getRSSvalue(w,Le,!0),Rt=Ue.OUTSIDE_EVEN_TOTAL_SUBSET[ue],ft=Ue.OUTSIDE_GSUM[ue];return new Er(Oe*Rt+Ne+ft,ne)}else{if((te&1)!==0||te>10||te<4)throw new de;let ue=(10-te)/2,Ee=Ue.INSIDE_ODD_WIDEST[ue],Le=9-Ee,Oe=Wr.getRSSvalue(x,Ee,!0),Ne=Wr.getRSSvalue(w,Le,!1),Rt=Ue.INSIDE_ODD_TOTAL_SUBSET[ue],ft=Ue.INSIDE_GSUM[ue];return new Er(Ne*Rt+Oe+ft,ne)}}findFinderPattern(i,a){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let h=i.getSize(),f=!1,m=0;for(;m<h&&(f=!i.get(m),a!==f);)m++;let x=0,w=m;for(let C=m;C<h;C++)if(i.get(C)!==f)l[x]++;else{if(x===3){if(Pn.isFinderPattern(l))return[w,C];w+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,x--}else x++;l[x]=1,f=!f}throw new de}parseFoundFinderPattern(i,a,l,h){let f=i.get(h[0]),m=h[0]-1;for(;m>=0&&f!==i.get(m);)m--;m++;const x=h[0]-m,w=this.getDecodeFinderCounters(),C=new Int32Array(w.length);W.arraycopy(w,0,C,1,w.length-1),C[0]=x;const R=this.parseFinderValue(C,Ue.FINDER_PATTERNS);let P=m,B=h[1];return l&&(P=i.getSize()-1-P,B=i.getSize()-1-B),new xi(R,[m,h[1]],P,B,a)}adjustOddEvenCounts(i,a){let l=Qe.sum(new Int32Array(this.getOddCounts())),h=Qe.sum(new Int32Array(this.getEvenCounts())),f=!1,m=!1,x=!1,w=!1;i?(l>12?m=!0:l<4&&(f=!0),h>12?w=!0:h<4&&(x=!0)):(l>11?m=!0:l<5&&(f=!0),h>10?w=!0:h<4&&(x=!0));let C=l+h-a,R=(l&1)===(i?1:0),P=(h&1)===1;if(C===1)if(R){if(P)throw new de;m=!0}else{if(!P)throw new de;w=!0}else if(C===-1)if(R){if(P)throw new de;f=!0}else{if(!P)throw new de;x=!0}else if(C===0){if(R){if(!P)throw new de;l<h?(f=!0,w=!0):(m=!0,x=!0)}else if(P)throw new de}else throw new de;if(f){if(m)throw new de;Pn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(m&&Pn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),x){if(w)throw new de;Pn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}w&&Pn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ue.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Ue.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Ue.OUTSIDE_GSUM=[0,161,961,2015,2715],Ue.INSIDE_GSUM=[0,336,1036,1516],Ue.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Ue.INSIDE_ODD_WIDEST=[2,4,6,8],Ue.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class St extends Gt{constructor(i,a){super(),this.readers=[],this.verbose=a===!0;const l=i?i.get(De.POSSIBLE_FORMATS):null,h=i&&i.get(De.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(Me.EAN_13)||l.includes(Me.UPC_A)||l.includes(Me.EAN_8)||l.includes(Me.UPC_E))&&this.readers.push(new Os(i)),l.includes(Me.CODE_39)&&this.readers.push(new Yt(h)),l.includes(Me.CODE_128)&&this.readers.push(new Re),l.includes(Me.ITF)&&this.readers.push(new rt),l.includes(Me.RSS_14)&&this.readers.push(new Ue),l.includes(Me.RSS_EXPANDED)&&this.readers.push(new F(this.verbose))):(this.readers.push(new Os(i)),this.readers.push(new Yt),this.readers.push(new Os(i)),this.readers.push(new Re),this.readers.push(new rt),this.readers.push(new Ue),this.readers.push(new F(this.verbose)))}decodeRow(i,a,l){for(let h=0;h<this.readers.length;h++)try{return this.readers[h].decodeRow(i,a,l)}catch{}throw new de}reset(){this.readers.forEach(i=>i.reset())}}class kn extends Be{constructor(i=500,a){super(new St(a),i,a)}}class ut{constructor(i,a,l){this.ecCodewords=i,this.ecBlocks=[a],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class bt{constructor(i,a){this.count=i,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class vt{constructor(i,a,l,h,f,m){this.versionNumber=i,this.symbolSizeRows=a,this.symbolSizeColumns=l,this.dataRegionSizeRows=h,this.dataRegionSizeColumns=f,this.ecBlocks=m;let x=0;const w=m.getECCodewords(),C=m.getECBlocks();for(let R of C)x+=R.getCount()*(R.getDataCodewords()+w);this.totalCodewords=x}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(i,a){if((i&1)!==0||(a&1)!==0)throw new z;for(let l of vt.VERSIONS)if(l.symbolSizeRows===i&&l.symbolSizeColumns===a)return l;throw new z}toString(){return""+this.versionNumber}static buildVersions(){return[new vt(1,10,10,8,8,new ut(5,new bt(1,3))),new vt(2,12,12,10,10,new ut(7,new bt(1,5))),new vt(3,14,14,12,12,new ut(10,new bt(1,8))),new vt(4,16,16,14,14,new ut(12,new bt(1,12))),new vt(5,18,18,16,16,new ut(14,new bt(1,18))),new vt(6,20,20,18,18,new ut(18,new bt(1,22))),new vt(7,22,22,20,20,new ut(20,new bt(1,30))),new vt(8,24,24,22,22,new ut(24,new bt(1,36))),new vt(9,26,26,24,24,new ut(28,new bt(1,44))),new vt(10,32,32,14,14,new ut(36,new bt(1,62))),new vt(11,36,36,16,16,new ut(42,new bt(1,86))),new vt(12,40,40,18,18,new ut(48,new bt(1,114))),new vt(13,44,44,20,20,new ut(56,new bt(1,144))),new vt(14,48,48,22,22,new ut(68,new bt(1,174))),new vt(15,52,52,24,24,new ut(42,new bt(2,102))),new vt(16,64,64,14,14,new ut(56,new bt(2,140))),new vt(17,72,72,16,16,new ut(36,new bt(4,92))),new vt(18,80,80,18,18,new ut(48,new bt(4,114))),new vt(19,88,88,20,20,new ut(56,new bt(4,144))),new vt(20,96,96,22,22,new ut(68,new bt(4,174))),new vt(21,104,104,24,24,new ut(56,new bt(6,136))),new vt(22,120,120,18,18,new ut(68,new bt(6,175))),new vt(23,132,132,20,20,new ut(62,new bt(8,163))),new vt(24,144,144,22,22,new ut(62,new bt(8,156),new bt(2,155))),new vt(25,8,18,6,16,new ut(7,new bt(1,5))),new vt(26,8,32,6,14,new ut(11,new bt(1,10))),new vt(27,12,26,10,24,new ut(14,new bt(1,16))),new vt(28,12,36,10,16,new ut(18,new bt(1,22))),new vt(29,16,36,14,16,new ut(24,new bt(1,32))),new vt(30,16,48,14,22,new ut(28,new bt(1,49)))]}}vt.VERSIONS=vt.buildVersions();class Ji{constructor(i){const a=i.getHeight();if(a<8||a>144||(a&1)!==0)throw new z;this.version=Ji.readVersion(i),this.mappingBitMatrix=this.extractDataRegion(i),this.readMappingMatrix=new We(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(i){const a=i.getHeight(),l=i.getWidth();return vt.getVersionForDimensions(a,l)}readCodewords(){const i=new Int8Array(this.version.getTotalCodewords());let a=0,l=4,h=0;const f=this.mappingBitMatrix.getHeight(),m=this.mappingBitMatrix.getWidth();let x=!1,w=!1,C=!1,R=!1;do if(l===f&&h===0&&!x)i[a++]=this.readCorner1(f,m)&255,l-=2,h+=2,x=!0;else if(l===f-2&&h===0&&(m&3)!==0&&!w)i[a++]=this.readCorner2(f,m)&255,l-=2,h+=2,w=!0;else if(l===f+4&&h===2&&(m&7)===0&&!C)i[a++]=this.readCorner3(f,m)&255,l-=2,h+=2,C=!0;else if(l===f-2&&h===0&&(m&7)===4&&!R)i[a++]=this.readCorner4(f,m)&255,l-=2,h+=2,R=!0;else{do l<f&&h>=0&&!this.readMappingMatrix.get(h,l)&&(i[a++]=this.readUtah(l,h,f,m)&255),l-=2,h+=2;while(l>=0&&h<m);l+=1,h+=3;do l>=0&&h<m&&!this.readMappingMatrix.get(h,l)&&(i[a++]=this.readUtah(l,h,f,m)&255),l+=2,h-=2;while(l<f&&h>=0);l+=3,h+=1}while(l<f||h<m);if(a!==this.version.getTotalCodewords())throw new z;return i}readModule(i,a,l,h){return i<0&&(i+=l,a+=4-(l+4&7)),a<0&&(a+=h,i+=4-(h+4&7)),this.readMappingMatrix.set(a,i),this.mappingBitMatrix.get(a,i)}readUtah(i,a,l,h){let f=0;return this.readModule(i-2,a-2,l,h)&&(f|=1),f<<=1,this.readModule(i-2,a-1,l,h)&&(f|=1),f<<=1,this.readModule(i-1,a-2,l,h)&&(f|=1),f<<=1,this.readModule(i-1,a-1,l,h)&&(f|=1),f<<=1,this.readModule(i-1,a,l,h)&&(f|=1),f<<=1,this.readModule(i,a-2,l,h)&&(f|=1),f<<=1,this.readModule(i,a-1,l,h)&&(f|=1),f<<=1,this.readModule(i,a,l,h)&&(f|=1),f}readCorner1(i,a){let l=0;return this.readModule(i-1,0,i,a)&&(l|=1),l<<=1,this.readModule(i-1,1,i,a)&&(l|=1),l<<=1,this.readModule(i-1,2,i,a)&&(l|=1),l<<=1,this.readModule(0,a-2,i,a)&&(l|=1),l<<=1,this.readModule(0,a-1,i,a)&&(l|=1),l<<=1,this.readModule(1,a-1,i,a)&&(l|=1),l<<=1,this.readModule(2,a-1,i,a)&&(l|=1),l<<=1,this.readModule(3,a-1,i,a)&&(l|=1),l}readCorner2(i,a){let l=0;return this.readModule(i-3,0,i,a)&&(l|=1),l<<=1,this.readModule(i-2,0,i,a)&&(l|=1),l<<=1,this.readModule(i-1,0,i,a)&&(l|=1),l<<=1,this.readModule(0,a-4,i,a)&&(l|=1),l<<=1,this.readModule(0,a-3,i,a)&&(l|=1),l<<=1,this.readModule(0,a-2,i,a)&&(l|=1),l<<=1,this.readModule(0,a-1,i,a)&&(l|=1),l<<=1,this.readModule(1,a-1,i,a)&&(l|=1),l}readCorner3(i,a){let l=0;return this.readModule(i-1,0,i,a)&&(l|=1),l<<=1,this.readModule(i-1,a-1,i,a)&&(l|=1),l<<=1,this.readModule(0,a-3,i,a)&&(l|=1),l<<=1,this.readModule(0,a-2,i,a)&&(l|=1),l<<=1,this.readModule(0,a-1,i,a)&&(l|=1),l<<=1,this.readModule(1,a-3,i,a)&&(l|=1),l<<=1,this.readModule(1,a-2,i,a)&&(l|=1),l<<=1,this.readModule(1,a-1,i,a)&&(l|=1),l}readCorner4(i,a){let l=0;return this.readModule(i-3,0,i,a)&&(l|=1),l<<=1,this.readModule(i-2,0,i,a)&&(l|=1),l<<=1,this.readModule(i-1,0,i,a)&&(l|=1),l<<=1,this.readModule(0,a-2,i,a)&&(l|=1),l<<=1,this.readModule(0,a-1,i,a)&&(l|=1),l<<=1,this.readModule(1,a-1,i,a)&&(l|=1),l<<=1,this.readModule(2,a-1,i,a)&&(l|=1),l<<=1,this.readModule(3,a-1,i,a)&&(l|=1),l}extractDataRegion(i){const a=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(i.getHeight()!==a)throw new I("Dimension of bitMatrix must match the version size");const h=this.version.getDataRegionSizeRows(),f=this.version.getDataRegionSizeColumns(),m=a/h|0,x=l/f|0,w=m*h,C=x*f,R=new We(C,w);for(let P=0;P<m;++P){const B=P*h;for(let Y=0;Y<x;++Y){const te=Y*f;for(let ne=0;ne<h;++ne){const ue=P*(h+2)+1+ne,Ee=B+ne;for(let Le=0;Le<f;++Le){const Oe=Y*(f+2)+1+Le;if(i.get(Oe,ue)){const Ne=te+Le;R.set(Ne,Ee)}}}}}return R}}class Nn{constructor(i,a){this.numDataCodewords=i,this.codewords=a}static getDataBlocks(i,a){const l=a.getECBlocks();let h=0;const f=l.getECBlocks();for(let ne of f)h+=ne.getCount();const m=new Array(h);let x=0;for(let ne of f)for(let ue=0;ue<ne.getCount();ue++){const Ee=ne.getDataCodewords(),Le=l.getECCodewords()+Ee;m[x++]=new Nn(Ee,new Uint8Array(Le))}const C=m[0].codewords.length-l.getECCodewords(),R=C-1;let P=0;for(let ne=0;ne<R;ne++)for(let ue=0;ue<x;ue++)m[ue].codewords[ne]=i[P++];const B=a.getVersionNumber()===24,Y=B?8:x;for(let ne=0;ne<Y;ne++)m[ne].codewords[C-1]=i[P++];const te=m[0].codewords.length;for(let ne=C;ne<te;ne++)for(let ue=0;ue<x;ue++){const Ee=B?(ue+8)%x:ue,Le=B&&Ee>7?ne-1:ne;m[Ee].codewords[Le]=i[P++]}if(P!==i.length)throw new I;return m}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class vn{constructor(i){this.bytes=i,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(i){if(i<1||i>32||i>this.available())throw new I(""+i);let a=0,l=this.bitOffset,h=this.byteOffset;const f=this.bytes;if(l>0){const m=8-l,x=i<m?i:m,w=m-x,C=255>>8-x<<w;a=(f[h]&C)>>w,i-=x,l+=x,l===8&&(l=0,h++)}if(i>0){for(;i>=8;)a=a<<8|f[h]&255,h++,i-=8;if(i>0){const m=8-i,x=255>>m<<m;a=a<<i|(f[h]&x)>>m,l+=i}}return this.bitOffset=l,this.byteOffset=h,a}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var ct;(function(L){L[L.PAD_ENCODE=0]="PAD_ENCODE",L[L.ASCII_ENCODE=1]="ASCII_ENCODE",L[L.C40_ENCODE=2]="C40_ENCODE",L[L.TEXT_ENCODE=3]="TEXT_ENCODE",L[L.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",L[L.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",L[L.BASE256_ENCODE=6]="BASE256_ENCODE"})(ct||(ct={}));class Lr{static decode(i){const a=new vn(i),l=new X,h=new X,f=new Array;let m=ct.ASCII_ENCODE;do if(m===ct.ASCII_ENCODE)m=this.decodeAsciiSegment(a,l,h);else{switch(m){case ct.C40_ENCODE:this.decodeC40Segment(a,l);break;case ct.TEXT_ENCODE:this.decodeTextSegment(a,l);break;case ct.ANSIX12_ENCODE:this.decodeAnsiX12Segment(a,l);break;case ct.EDIFACT_ENCODE:this.decodeEdifactSegment(a,l);break;case ct.BASE256_ENCODE:this.decodeBase256Segment(a,l,f);break;default:throw new z}m=ct.ASCII_ENCODE}while(m!==ct.PAD_ENCODE&&a.available()>0);return h.length()>0&&l.append(h.toString()),new Jt(i,l.toString(),f.length===0?null:f,null)}static decodeAsciiSegment(i,a,l){let h=!1;do{let f=i.readBits(8);if(f===0)throw new z;if(f<=128)return h&&(f+=128),a.append(String.fromCharCode(f-1)),ct.ASCII_ENCODE;if(f===129)return ct.PAD_ENCODE;if(f<=229){const m=f-130;m<10&&a.append("0"),a.append(""+m)}else switch(f){case 230:return ct.C40_ENCODE;case 231:return ct.BASE256_ENCODE;case 232:a.append("");break;case 233:case 234:break;case 235:h=!0;break;case 236:a.append("[)>05"),l.insert(0,"");break;case 237:a.append("[)>06"),l.insert(0,"");break;case 238:return ct.ANSIX12_ENCODE;case 239:return ct.TEXT_ENCODE;case 240:return ct.EDIFACT_ENCODE;case 241:break;default:if(f!==254||i.available()!==0)throw new z;break}}while(i.available()>0);return ct.ASCII_ENCODE}static decodeC40Segment(i,a){let l=!1;const h=[];let f=0;do{if(i.available()===8)return;const m=i.readBits(8);if(m===254)return;this.parseTwoBytes(m,i.readBits(8),h);for(let x=0;x<3;x++){const w=h[x];switch(f){case 0:if(w<3)f=w+1;else if(w<this.C40_BASIC_SET_CHARS.length){const C=this.C40_BASIC_SET_CHARS[w];l?(a.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):a.append(C)}else throw new z;break;case 1:l?(a.append(String.fromCharCode(w+128)),l=!1):a.append(String.fromCharCode(w)),f=0;break;case 2:if(w<this.C40_SHIFT2_SET_CHARS.length){const C=this.C40_SHIFT2_SET_CHARS[w];l?(a.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):a.append(C)}else switch(w){case 27:a.append("");break;case 30:l=!0;break;default:throw new z}f=0;break;case 3:l?(a.append(String.fromCharCode(w+224)),l=!1):a.append(String.fromCharCode(w+96)),f=0;break;default:throw new z}}}while(i.available()>0)}static decodeTextSegment(i,a){let l=!1,h=[],f=0;do{if(i.available()===8)return;const m=i.readBits(8);if(m===254)return;this.parseTwoBytes(m,i.readBits(8),h);for(let x=0;x<3;x++){const w=h[x];switch(f){case 0:if(w<3)f=w+1;else if(w<this.TEXT_BASIC_SET_CHARS.length){const C=this.TEXT_BASIC_SET_CHARS[w];l?(a.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):a.append(C)}else throw new z;break;case 1:l?(a.append(String.fromCharCode(w+128)),l=!1):a.append(String.fromCharCode(w)),f=0;break;case 2:if(w<this.TEXT_SHIFT2_SET_CHARS.length){const C=this.TEXT_SHIFT2_SET_CHARS[w];l?(a.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):a.append(C)}else switch(w){case 27:a.append("");break;case 30:l=!0;break;default:throw new z}f=0;break;case 3:if(w<this.TEXT_SHIFT3_SET_CHARS.length){const C=this.TEXT_SHIFT3_SET_CHARS[w];l?(a.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):a.append(C),f=0}else throw new z;break;default:throw new z}}}while(i.available()>0)}static decodeAnsiX12Segment(i,a){const l=[];do{if(i.available()===8)return;const h=i.readBits(8);if(h===254)return;this.parseTwoBytes(h,i.readBits(8),l);for(let f=0;f<3;f++){const m=l[f];switch(m){case 0:a.append("\r");break;case 1:a.append("*");break;case 2:a.append(">");break;case 3:a.append(" ");break;default:if(m<14)a.append(String.fromCharCode(m+44));else if(m<40)a.append(String.fromCharCode(m+51));else throw new z;break}}}while(i.available()>0)}static parseTwoBytes(i,a,l){let h=(i<<8)+a-1,f=Math.floor(h/1600);l[0]=f,h-=f*1600,f=Math.floor(h/40),l[1]=f,l[2]=h-f*40}static decodeEdifactSegment(i,a){do{if(i.available()<=16)return;for(let l=0;l<4;l++){let h=i.readBits(6);if(h===31){const f=8-i.getBitOffset();f!==8&&i.readBits(f);return}(h&32)===0&&(h|=64),a.append(String.fromCharCode(h))}}while(i.available()>0)}static decodeBase256Segment(i,a,l){let h=1+i.getByteOffset();const f=this.unrandomize255State(i.readBits(8),h++);let m;if(f===0?m=i.available()/8|0:f<250?m=f:m=250*(f-249)+this.unrandomize255State(i.readBits(8),h++),m<0)throw new z;const x=new Uint8Array(m);for(let w=0;w<m;w++){if(i.available()<8)throw new z;x[w]=this.unrandomize255State(i.readBits(8),h++)}l.push(x);try{a.append(Q.decode(x,Z.ISO88591))}catch(w){throw new nr("Platform does not support required encoding: "+w.message)}}static unrandomize255State(i,a){const l=149*a%255+1,h=i-l;return h>=0?h:h+256}}Lr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Lr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Lr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Lr.TEXT_SHIFT2_SET_CHARS=Lr.C40_SHIFT2_SET_CHARS,Lr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Co{constructor(){this.rsDecoder=new Gr(wt.DATA_MATRIX_FIELD_256)}decode(i){const a=new Ji(i),l=a.getVersion(),h=a.readCodewords(),f=Nn.getDataBlocks(h,l);let m=0;for(let C of f)m+=C.getNumDataCodewords();const x=new Uint8Array(m),w=f.length;for(let C=0;C<w;C++){const R=f[C],P=R.getCodewords(),B=R.getNumDataCodewords();this.correctErrors(P,B);for(let Y=0;Y<B;Y++)x[Y*w+C]=P[Y]}return Lr.decode(x)}correctErrors(i,a){const l=new Int32Array(i);try{this.rsDecoder.decode(l,i.length-a)}catch{throw new V}for(let h=0;h<a;h++)i[h]=l[h]}}class st{constructor(i){this.image=i,this.rectangleDetector=new dn(this.image)}detect(){const i=this.rectangleDetector.detect();let a=this.detectSolid1(i);if(a=this.detectSolid2(a),a[3]=this.correctTopRight(a),!a[3])throw new de;a=this.shiftToModuleCenter(a);const l=a[0],h=a[1],f=a[2],m=a[3];let x=this.transitionsBetween(l,m)+1,w=this.transitionsBetween(f,m)+1;(x&1)===1&&(x+=1),(w&1)===1&&(w+=1),4*x<7*w&&4*w<7*x&&(x=w=Math.max(x,w));let C=st.sampleGrid(this.image,l,h,f,m,x,w);return new ws(C,[l,h,f,m])}static shiftPoint(i,a,l){let h=(a.getX()-i.getX())/(l+1),f=(a.getY()-i.getY())/(l+1);return new Fe(i.getX()+h,i.getY()+f)}static moveAway(i,a,l){let h=i.getX(),f=i.getY();return h<a?h-=1:h+=1,f<l?f-=1:f+=1,new Fe(h,f)}detectSolid1(i){let a=i[0],l=i[1],h=i[3],f=i[2],m=this.transitionsBetween(a,l),x=this.transitionsBetween(l,h),w=this.transitionsBetween(h,f),C=this.transitionsBetween(f,a),R=m,P=[f,a,l,h];return R>x&&(R=x,P[0]=a,P[1]=l,P[2]=h,P[3]=f),R>w&&(R=w,P[0]=l,P[1]=h,P[2]=f,P[3]=a),R>C&&(P[0]=h,P[1]=f,P[2]=a,P[3]=l),P}detectSolid2(i){let a=i[0],l=i[1],h=i[2],f=i[3],m=this.transitionsBetween(a,f),x=st.shiftPoint(l,h,(m+1)*4),w=st.shiftPoint(h,l,(m+1)*4),C=this.transitionsBetween(x,a),R=this.transitionsBetween(w,f);return C<R?(i[0]=a,i[1]=l,i[2]=h,i[3]=f):(i[0]=l,i[1]=h,i[2]=f,i[3]=a),i}correctTopRight(i){let a=i[0],l=i[1],h=i[2],f=i[3],m=this.transitionsBetween(a,f),x=this.transitionsBetween(l,f),w=st.shiftPoint(a,l,(x+1)*4),C=st.shiftPoint(h,l,(m+1)*4);m=this.transitionsBetween(w,f),x=this.transitionsBetween(C,f);let R=new Fe(f.getX()+(h.getX()-l.getX())/(m+1),f.getY()+(h.getY()-l.getY())/(m+1)),P=new Fe(f.getX()+(a.getX()-l.getX())/(x+1),f.getY()+(a.getY()-l.getY())/(x+1));if(!this.isValid(R))return this.isValid(P)?P:null;if(!this.isValid(P))return R;let B=this.transitionsBetween(w,R)+this.transitionsBetween(C,R),Y=this.transitionsBetween(w,P)+this.transitionsBetween(C,P);return B>Y?R:P}shiftToModuleCenter(i){let a=i[0],l=i[1],h=i[2],f=i[3],m=this.transitionsBetween(a,f)+1,x=this.transitionsBetween(h,f)+1,w=st.shiftPoint(a,l,x*4),C=st.shiftPoint(h,l,m*4);m=this.transitionsBetween(w,f)+1,x=this.transitionsBetween(C,f)+1,(m&1)===1&&(m+=1),(x&1)===1&&(x+=1);let R=(a.getX()+l.getX()+h.getX()+f.getX())/4,P=(a.getY()+l.getY()+h.getY()+f.getY())/4;a=st.moveAway(a,R,P),l=st.moveAway(l,R,P),h=st.moveAway(h,R,P),f=st.moveAway(f,R,P);let B,Y;return w=st.shiftPoint(a,l,x*4),w=st.shiftPoint(w,f,m*4),B=st.shiftPoint(l,a,x*4),B=st.shiftPoint(B,h,m*4),C=st.shiftPoint(h,f,x*4),C=st.shiftPoint(C,l,m*4),Y=st.shiftPoint(f,h,x*4),Y=st.shiftPoint(Y,a,m*4),[w,B,C,Y]}isValid(i){return i.getX()>=0&&i.getX()<this.image.getWidth()&&i.getY()>0&&i.getY()<this.image.getHeight()}static sampleGrid(i,a,l,h,f,m,x){return rr.getInstance().sampleGrid(i,m,x,.5,.5,m-.5,.5,m-.5,x-.5,.5,x-.5,a.getX(),a.getY(),f.getX(),f.getY(),h.getX(),h.getY(),l.getX(),l.getY())}transitionsBetween(i,a){let l=Math.trunc(i.getX()),h=Math.trunc(i.getY()),f=Math.trunc(a.getX()),m=Math.trunc(a.getY()),x=Math.abs(m-h)>Math.abs(f-l);if(x){let ne=l;l=h,h=ne,ne=f,f=m,m=ne}let w=Math.abs(f-l),C=Math.abs(m-h),R=-w/2,P=h<m?1:-1,B=l<f?1:-1,Y=0,te=this.image.get(x?h:l,x?l:h);for(let ne=l,ue=h;ne!==f;ne+=B){let Ee=this.image.get(x?ue:ne,x?ne:ue);if(Ee!==te&&(Y++,te=Ee),R+=C,R>0){if(ue===m)break;ue+=P,R-=w}}return Y}}class Qr{constructor(){this.decoder=new Co}decode(i,a=null){let l,h;if(a!=null&&a.has(De.PURE_BARCODE)){const C=Qr.extractPureBits(i.getBlackMatrix());l=this.decoder.decode(C),h=Qr.NO_POINTS}else{const C=new st(i.getBlackMatrix()).detect();l=this.decoder.decode(C.getBits()),h=C.getPoints()}const f=l.getRawBytes(),m=new ke(l.getText(),f,8*f.length,h,Me.DATA_MATRIX,W.currentTimeMillis()),x=l.getByteSegments();x!=null&&m.putMetadata(Ct.BYTE_SEGMENTS,x);const w=l.getECLevel();return w!=null&&m.putMetadata(Ct.ERROR_CORRECTION_LEVEL,w),m}reset(){}static extractPureBits(i){const a=i.getTopLeftOnBit(),l=i.getBottomRightOnBit();if(a==null||l==null)throw new de;const h=this.moduleSize(a,i);let f=a[1];const m=l[1];let x=a[0];const C=(l[0]-x+1)/h,R=(m-f+1)/h;if(C<=0||R<=0)throw new de;const P=h/2;f+=P,x+=P;const B=new We(C,R);for(let Y=0;Y<R;Y++){const te=f+Y*h;for(let ne=0;ne<C;ne++)i.get(x+ne*h,te)&&B.set(ne,Y)}return B}static moduleSize(i,a){const l=a.getWidth();let h=i[0];const f=i[1];for(;h<l&&a.get(h,f);)h++;if(h===l)throw new de;const m=h-i[0];if(m===0)throw new de;return m}}Qr.NO_POINTS=[];class $i extends Be{constructor(i=500){super(new Qr,i)}}var Ei;(function(L){L[L.L=0]="L",L[L.M=1]="M",L[L.Q=2]="Q",L[L.H=3]="H"})(Ei||(Ei={}));class It{constructor(i,a,l){this.value=i,this.stringValue=a,this.bits=l,It.FOR_BITS.set(l,this),It.FOR_VALUE.set(i,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(i){switch(i){case"L":return It.L;case"M":return It.M;case"Q":return It.Q;case"H":return It.H;default:throw new S(i+"not available")}}toString(){return this.stringValue}equals(i){if(!(i instanceof It))return!1;const a=i;return this.value===a.value}static forBits(i){if(i<0||i>=It.FOR_BITS.size)throw new I;return It.FOR_BITS.get(i)}}It.FOR_BITS=new Map,It.FOR_VALUE=new Map,It.L=new It(Ei.L,"L",1),It.M=new It(Ei.M,"M",0),It.Q=new It(Ei.Q,"Q",3),It.H=new It(Ei.H,"H",2);class zn{constructor(i){this.errorCorrectionLevel=It.forBits(i>>3&3),this.dataMask=i&7}static numBitsDiffering(i,a){return ee.bitCount(i^a)}static decodeFormatInformation(i,a){const l=zn.doDecodeFormatInformation(i,a);return l!==null?l:zn.doDecodeFormatInformation(i^zn.FORMAT_INFO_MASK_QR,a^zn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(i,a){let l=Number.MAX_SAFE_INTEGER,h=0;for(const f of zn.FORMAT_INFO_DECODE_LOOKUP){const m=f[0];if(m===i||m===a)return new zn(f[1]);let x=zn.numBitsDiffering(i,m);x<l&&(h=f[1],l=x),i!==a&&(x=zn.numBitsDiffering(a,m),x<l&&(h=f[1],l=x))}return l<=3?new zn(h):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(i){if(!(i instanceof zn))return!1;const a=i;return this.errorCorrectionLevel===a.errorCorrectionLevel&&this.dataMask===a.dataMask}}zn.FORMAT_INFO_MASK_QR=21522,zn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class he{constructor(i,...a){this.ecCodewordsPerBlock=i,this.ecBlocks=a}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let i=0;const a=this.ecBlocks;for(const l of a)i+=l.getCount();return i}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class G{constructor(i,a){this.count=i,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class qe{constructor(i,a,...l){this.versionNumber=i,this.alignmentPatternCenters=a,this.ecBlocks=l;let h=0;const f=l[0].getECCodewordsPerBlock(),m=l[0].getECBlocks();for(const x of m)h+=x.getCount()*(x.getDataCodewords()+f);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(i){return this.ecBlocks[i.getValue()]}static getProvisionalVersionForDimension(i){if(i%4!==1)throw new z;try{return this.getVersionForNumber((i-17)/4)}catch{throw new z}}static getVersionForNumber(i){if(i<1||i>40)throw new I;return qe.VERSIONS[i-1]}static decodeVersionInformation(i){let a=Number.MAX_SAFE_INTEGER,l=0;for(let h=0;h<qe.VERSION_DECODE_INFO.length;h++){const f=qe.VERSION_DECODE_INFO[h];if(f===i)return qe.getVersionForNumber(h+7);const m=zn.numBitsDiffering(i,f);m<a&&(l=h+7,a=m)}return a<=3?qe.getVersionForNumber(l):null}buildFunctionPattern(){const i=this.getDimensionForVersion(),a=new We(i);a.setRegion(0,0,9,9),a.setRegion(i-8,0,8,9),a.setRegion(0,i-8,9,8);const l=this.alignmentPatternCenters.length;for(let h=0;h<l;h++){const f=this.alignmentPatternCenters[h]-2;for(let m=0;m<l;m++)h===0&&(m===0||m===l-1)||h===l-1&&m===0||a.setRegion(this.alignmentPatternCenters[m]-2,f,5,5)}return a.setRegion(6,9,1,i-17),a.setRegion(9,6,i-17,1),this.versionNumber>6&&(a.setRegion(i-11,0,3,6),a.setRegion(0,i-11,6,3)),a}toString(){return""+this.versionNumber}}qe.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),qe.VERSIONS=[new qe(1,new Int32Array(0),new he(7,new G(1,19)),new he(10,new G(1,16)),new he(13,new G(1,13)),new he(17,new G(1,9))),new qe(2,Int32Array.from([6,18]),new he(10,new G(1,34)),new he(16,new G(1,28)),new he(22,new G(1,22)),new he(28,new G(1,16))),new qe(3,Int32Array.from([6,22]),new he(15,new G(1,55)),new he(26,new G(1,44)),new he(18,new G(2,17)),new he(22,new G(2,13))),new qe(4,Int32Array.from([6,26]),new he(20,new G(1,80)),new he(18,new G(2,32)),new he(26,new G(2,24)),new he(16,new G(4,9))),new qe(5,Int32Array.from([6,30]),new he(26,new G(1,108)),new he(24,new G(2,43)),new he(18,new G(2,15),new G(2,16)),new he(22,new G(2,11),new G(2,12))),new qe(6,Int32Array.from([6,34]),new he(18,new G(2,68)),new he(16,new G(4,27)),new he(24,new G(4,19)),new he(28,new G(4,15))),new qe(7,Int32Array.from([6,22,38]),new he(20,new G(2,78)),new he(18,new G(4,31)),new he(18,new G(2,14),new G(4,15)),new he(26,new G(4,13),new G(1,14))),new qe(8,Int32Array.from([6,24,42]),new he(24,new G(2,97)),new he(22,new G(2,38),new G(2,39)),new he(22,new G(4,18),new G(2,19)),new he(26,new G(4,14),new G(2,15))),new qe(9,Int32Array.from([6,26,46]),new he(30,new G(2,116)),new he(22,new G(3,36),new G(2,37)),new he(20,new G(4,16),new G(4,17)),new he(24,new G(4,12),new G(4,13))),new qe(10,Int32Array.from([6,28,50]),new he(18,new G(2,68),new G(2,69)),new he(26,new G(4,43),new G(1,44)),new he(24,new G(6,19),new G(2,20)),new he(28,new G(6,15),new G(2,16))),new qe(11,Int32Array.from([6,30,54]),new he(20,new G(4,81)),new he(30,new G(1,50),new G(4,51)),new he(28,new G(4,22),new G(4,23)),new he(24,new G(3,12),new G(8,13))),new qe(12,Int32Array.from([6,32,58]),new he(24,new G(2,92),new G(2,93)),new he(22,new G(6,36),new G(2,37)),new he(26,new G(4,20),new G(6,21)),new he(28,new G(7,14),new G(4,15))),new qe(13,Int32Array.from([6,34,62]),new he(26,new G(4,107)),new he(22,new G(8,37),new G(1,38)),new he(24,new G(8,20),new G(4,21)),new he(22,new G(12,11),new G(4,12))),new qe(14,Int32Array.from([6,26,46,66]),new he(30,new G(3,115),new G(1,116)),new he(24,new G(4,40),new G(5,41)),new he(20,new G(11,16),new G(5,17)),new he(24,new G(11,12),new G(5,13))),new qe(15,Int32Array.from([6,26,48,70]),new he(22,new G(5,87),new G(1,88)),new he(24,new G(5,41),new G(5,42)),new he(30,new G(5,24),new G(7,25)),new he(24,new G(11,12),new G(7,13))),new qe(16,Int32Array.from([6,26,50,74]),new he(24,new G(5,98),new G(1,99)),new he(28,new G(7,45),new G(3,46)),new he(24,new G(15,19),new G(2,20)),new he(30,new G(3,15),new G(13,16))),new qe(17,Int32Array.from([6,30,54,78]),new he(28,new G(1,107),new G(5,108)),new he(28,new G(10,46),new G(1,47)),new he(28,new G(1,22),new G(15,23)),new he(28,new G(2,14),new G(17,15))),new qe(18,Int32Array.from([6,30,56,82]),new he(30,new G(5,120),new G(1,121)),new he(26,new G(9,43),new G(4,44)),new he(28,new G(17,22),new G(1,23)),new he(28,new G(2,14),new G(19,15))),new qe(19,Int32Array.from([6,30,58,86]),new he(28,new G(3,113),new G(4,114)),new he(26,new G(3,44),new G(11,45)),new he(26,new G(17,21),new G(4,22)),new he(26,new G(9,13),new G(16,14))),new qe(20,Int32Array.from([6,34,62,90]),new he(28,new G(3,107),new G(5,108)),new he(26,new G(3,41),new G(13,42)),new he(30,new G(15,24),new G(5,25)),new he(28,new G(15,15),new G(10,16))),new qe(21,Int32Array.from([6,28,50,72,94]),new he(28,new G(4,116),new G(4,117)),new he(26,new G(17,42)),new he(28,new G(17,22),new G(6,23)),new he(30,new G(19,16),new G(6,17))),new qe(22,Int32Array.from([6,26,50,74,98]),new he(28,new G(2,111),new G(7,112)),new he(28,new G(17,46)),new he(30,new G(7,24),new G(16,25)),new he(24,new G(34,13))),new qe(23,Int32Array.from([6,30,54,78,102]),new he(30,new G(4,121),new G(5,122)),new he(28,new G(4,47),new G(14,48)),new he(30,new G(11,24),new G(14,25)),new he(30,new G(16,15),new G(14,16))),new qe(24,Int32Array.from([6,28,54,80,106]),new he(30,new G(6,117),new G(4,118)),new he(28,new G(6,45),new G(14,46)),new he(30,new G(11,24),new G(16,25)),new he(30,new G(30,16),new G(2,17))),new qe(25,Int32Array.from([6,32,58,84,110]),new he(26,new G(8,106),new G(4,107)),new he(28,new G(8,47),new G(13,48)),new he(30,new G(7,24),new G(22,25)),new he(30,new G(22,15),new G(13,16))),new qe(26,Int32Array.from([6,30,58,86,114]),new he(28,new G(10,114),new G(2,115)),new he(28,new G(19,46),new G(4,47)),new he(28,new G(28,22),new G(6,23)),new he(30,new G(33,16),new G(4,17))),new qe(27,Int32Array.from([6,34,62,90,118]),new he(30,new G(8,122),new G(4,123)),new he(28,new G(22,45),new G(3,46)),new he(30,new G(8,23),new G(26,24)),new he(30,new G(12,15),new G(28,16))),new qe(28,Int32Array.from([6,26,50,74,98,122]),new he(30,new G(3,117),new G(10,118)),new he(28,new G(3,45),new G(23,46)),new he(30,new G(4,24),new G(31,25)),new he(30,new G(11,15),new G(31,16))),new qe(29,Int32Array.from([6,30,54,78,102,126]),new he(30,new G(7,116),new G(7,117)),new he(28,new G(21,45),new G(7,46)),new he(30,new G(1,23),new G(37,24)),new he(30,new G(19,15),new G(26,16))),new qe(30,Int32Array.from([6,26,52,78,104,130]),new he(30,new G(5,115),new G(10,116)),new he(28,new G(19,47),new G(10,48)),new he(30,new G(15,24),new G(25,25)),new he(30,new G(23,15),new G(25,16))),new qe(31,Int32Array.from([6,30,56,82,108,134]),new he(30,new G(13,115),new G(3,116)),new he(28,new G(2,46),new G(29,47)),new he(30,new G(42,24),new G(1,25)),new he(30,new G(23,15),new G(28,16))),new qe(32,Int32Array.from([6,34,60,86,112,138]),new he(30,new G(17,115)),new he(28,new G(10,46),new G(23,47)),new he(30,new G(10,24),new G(35,25)),new he(30,new G(19,15),new G(35,16))),new qe(33,Int32Array.from([6,30,58,86,114,142]),new he(30,new G(17,115),new G(1,116)),new he(28,new G(14,46),new G(21,47)),new he(30,new G(29,24),new G(19,25)),new he(30,new G(11,15),new G(46,16))),new qe(34,Int32Array.from([6,34,62,90,118,146]),new he(30,new G(13,115),new G(6,116)),new he(28,new G(14,46),new G(23,47)),new he(30,new G(44,24),new G(7,25)),new he(30,new G(59,16),new G(1,17))),new qe(35,Int32Array.from([6,30,54,78,102,126,150]),new he(30,new G(12,121),new G(7,122)),new he(28,new G(12,47),new G(26,48)),new he(30,new G(39,24),new G(14,25)),new he(30,new G(22,15),new G(41,16))),new qe(36,Int32Array.from([6,24,50,76,102,128,154]),new he(30,new G(6,121),new G(14,122)),new he(28,new G(6,47),new G(34,48)),new he(30,new G(46,24),new G(10,25)),new he(30,new G(2,15),new G(64,16))),new qe(37,Int32Array.from([6,28,54,80,106,132,158]),new he(30,new G(17,122),new G(4,123)),new he(28,new G(29,46),new G(14,47)),new he(30,new G(49,24),new G(10,25)),new he(30,new G(24,15),new G(46,16))),new qe(38,Int32Array.from([6,32,58,84,110,136,162]),new he(30,new G(4,122),new G(18,123)),new he(28,new G(13,46),new G(32,47)),new he(30,new G(48,24),new G(14,25)),new he(30,new G(42,15),new G(32,16))),new qe(39,Int32Array.from([6,26,54,82,110,138,166]),new he(30,new G(20,117),new G(4,118)),new he(28,new G(40,47),new G(7,48)),new he(30,new G(43,24),new G(22,25)),new he(30,new G(10,15),new G(67,16))),new qe(40,Int32Array.from([6,30,58,86,114,142,170]),new he(30,new G(19,118),new G(6,119)),new he(28,new G(18,47),new G(31,48)),new he(30,new G(34,24),new G(34,25)),new he(30,new G(20,15),new G(61,16)))];var Hn;(function(L){L[L.DATA_MASK_000=0]="DATA_MASK_000",L[L.DATA_MASK_001=1]="DATA_MASK_001",L[L.DATA_MASK_010=2]="DATA_MASK_010",L[L.DATA_MASK_011=3]="DATA_MASK_011",L[L.DATA_MASK_100=4]="DATA_MASK_100",L[L.DATA_MASK_101=5]="DATA_MASK_101",L[L.DATA_MASK_110=6]="DATA_MASK_110",L[L.DATA_MASK_111=7]="DATA_MASK_111"})(Hn||(Hn={}));class sr{constructor(i,a){this.value=i,this.isMasked=a}unmaskBitMatrix(i,a){for(let l=0;l<a;l++)for(let h=0;h<a;h++)this.isMasked(l,h)&&i.flip(h,l)}}sr.values=new Map([[Hn.DATA_MASK_000,new sr(Hn.DATA_MASK_000,(L,i)=>(L+i&1)===0)],[Hn.DATA_MASK_001,new sr(Hn.DATA_MASK_001,(L,i)=>(L&1)===0)],[Hn.DATA_MASK_010,new sr(Hn.DATA_MASK_010,(L,i)=>i%3===0)],[Hn.DATA_MASK_011,new sr(Hn.DATA_MASK_011,(L,i)=>(L+i)%3===0)],[Hn.DATA_MASK_100,new sr(Hn.DATA_MASK_100,(L,i)=>(Math.floor(L/2)+Math.floor(i/3)&1)===0)],[Hn.DATA_MASK_101,new sr(Hn.DATA_MASK_101,(L,i)=>L*i%6===0)],[Hn.DATA_MASK_110,new sr(Hn.DATA_MASK_110,(L,i)=>L*i%6<3)],[Hn.DATA_MASK_111,new sr(Hn.DATA_MASK_111,(L,i)=>(L+i+L*i%3&1)===0)]]);class Zr{constructor(i){const a=i.getHeight();if(a<21||(a&3)!==1)throw new z;this.bitMatrix=i}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let i=0;for(let f=0;f<6;f++)i=this.copyBit(f,8,i);i=this.copyBit(7,8,i),i=this.copyBit(8,8,i),i=this.copyBit(8,7,i);for(let f=5;f>=0;f--)i=this.copyBit(8,f,i);const a=this.bitMatrix.getHeight();let l=0;const h=a-7;for(let f=a-1;f>=h;f--)l=this.copyBit(8,f,l);for(let f=a-8;f<a;f++)l=this.copyBit(f,8,l);if(this.parsedFormatInfo=zn.decodeFormatInformation(i,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new z}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const i=this.bitMatrix.getHeight(),a=Math.floor((i-17)/4);if(a<=6)return qe.getVersionForNumber(a);let l=0;const h=i-11;for(let m=5;m>=0;m--)for(let x=i-9;x>=h;x--)l=this.copyBit(x,m,l);let f=qe.decodeVersionInformation(l);if(f!==null&&f.getDimensionForVersion()===i)return this.parsedVersion=f,f;l=0;for(let m=5;m>=0;m--)for(let x=i-9;x>=h;x--)l=this.copyBit(m,x,l);if(f=qe.decodeVersionInformation(l),f!==null&&f.getDimensionForVersion()===i)return this.parsedVersion=f,f;throw new z}copyBit(i,a,l){return(this.isMirror?this.bitMatrix.get(a,i):this.bitMatrix.get(i,a))?l<<1|1:l<<1}readCodewords(){const i=this.readFormatInformation(),a=this.readVersion(),l=sr.values.get(i.getDataMask()),h=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,h);const f=a.buildFunctionPattern();let m=!0;const x=new Uint8Array(a.getTotalCodewords());let w=0,C=0,R=0;for(let P=h-1;P>0;P-=2){P===6&&P--;for(let B=0;B<h;B++){const Y=m?h-1-B:B;for(let te=0;te<2;te++)f.get(P-te,Y)||(R++,C<<=1,this.bitMatrix.get(P-te,Y)&&(C|=1),R===8&&(x[w++]=C,R=0,C=0))}m=!m}if(w!==a.getTotalCodewords())throw new z;return x}remask(){if(this.parsedFormatInfo===null)return;const i=sr.values[this.parsedFormatInfo.getDataMask()],a=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,a)}setMirror(i){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=i}mirror(){const i=this.bitMatrix;for(let a=0,l=i.getWidth();a<l;a++)for(let h=a+1,f=i.getHeight();h<f;h++)i.get(a,h)!==i.get(h,a)&&(i.flip(h,a),i.flip(a,h))}}class La{constructor(i,a){this.numDataCodewords=i,this.codewords=a}static getDataBlocks(i,a,l){if(i.length!==a.getTotalCodewords())throw new I;const h=a.getECBlocksForLevel(l);let f=0;const m=h.getECBlocks();for(const te of m)f+=te.getCount();const x=new Array(f);let w=0;for(const te of m)for(let ne=0;ne<te.getCount();ne++){const ue=te.getDataCodewords(),Ee=h.getECCodewordsPerBlock()+ue;x[w++]=new La(ue,new Uint8Array(Ee))}const C=x[0].codewords.length;let R=x.length-1;for(;R>=0&&x[R].codewords.length!==C;)R--;R++;const P=C-h.getECCodewordsPerBlock();let B=0;for(let te=0;te<P;te++)for(let ne=0;ne<w;ne++)x[ne].codewords[te]=i[B++];for(let te=R;te<w;te++)x[te].codewords[P]=i[B++];const Y=x[0].codewords.length;for(let te=P;te<Y;te++)for(let ne=0;ne<w;ne++){const ue=ne<R?te:te+1;x[ne].codewords[ue]=i[B++]}return x}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Ir;(function(L){L[L.TERMINATOR=0]="TERMINATOR",L[L.NUMERIC=1]="NUMERIC",L[L.ALPHANUMERIC=2]="ALPHANUMERIC",L[L.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",L[L.BYTE=4]="BYTE",L[L.ECI=5]="ECI",L[L.KANJI=6]="KANJI",L[L.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",L[L.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",L[L.HANZI=9]="HANZI"})(Ir||(Ir={}));class Ze{constructor(i,a,l,h){this.value=i,this.stringValue=a,this.characterCountBitsForVersions=l,this.bits=h,Ze.FOR_BITS.set(h,this),Ze.FOR_VALUE.set(i,this)}static forBits(i){const a=Ze.FOR_BITS.get(i);if(a===void 0)throw new I;return a}getCharacterCountBits(i){const a=i.getVersionNumber();let l;return a<=9?l=0:a<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(i){if(!(i instanceof Ze))return!1;const a=i;return this.value===a.value}toString(){return this.stringValue}}Ze.FOR_BITS=new Map,Ze.FOR_VALUE=new Map,Ze.TERMINATOR=new Ze(Ir.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ze.NUMERIC=new Ze(Ir.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ze.ALPHANUMERIC=new Ze(Ir.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ze.STRUCTURED_APPEND=new Ze(Ir.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ze.BYTE=new Ze(Ir.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ze.ECI=new Ze(Ir.ECI,"ECI",Int32Array.from([0,0,0]),7),Ze.KANJI=new Ze(Ir.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ze.FNC1_FIRST_POSITION=new Ze(Ir.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ze.FNC1_SECOND_POSITION=new Ze(Ir.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ze.HANZI=new Ze(Ir.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class on{static decode(i,a,l,h){const f=new vn(i);let m=new X;const x=new Array;let w=-1,C=-1;try{let R=null,P=!1,B;do{if(f.available()<4)B=Ze.TERMINATOR;else{const Y=f.readBits(4);B=Ze.forBits(Y)}switch(B){case Ze.TERMINATOR:break;case Ze.FNC1_FIRST_POSITION:case Ze.FNC1_SECOND_POSITION:P=!0;break;case Ze.STRUCTURED_APPEND:if(f.available()<16)throw new z;w=f.readBits(8),C=f.readBits(8);break;case Ze.ECI:const Y=on.parseECIValue(f);if(R=j.getCharacterSetECIByValue(Y),R===null)throw new z;break;case Ze.HANZI:const te=f.readBits(4),ne=f.readBits(B.getCharacterCountBits(a));te===on.GB2312_SUBSET&&on.decodeHanziSegment(f,m,ne);break;default:const ue=f.readBits(B.getCharacterCountBits(a));switch(B){case Ze.NUMERIC:on.decodeNumericSegment(f,m,ue);break;case Ze.ALPHANUMERIC:on.decodeAlphanumericSegment(f,m,ue,P);break;case Ze.BYTE:on.decodeByteSegment(f,m,ue,R,x,h);break;case Ze.KANJI:on.decodeKanjiSegment(f,m,ue);break;default:throw new z}break}}while(B!==Ze.TERMINATOR)}catch{throw new z}return new Jt(i,m.toString(),x.length===0?null:x,l===null?null:l.toString(),w,C)}static decodeHanziSegment(i,a,l){if(l*13>i.available())throw new z;const h=new Uint8Array(2*l);let f=0;for(;l>0;){const m=i.readBits(13);let x=m/96<<8&4294967295|m%96;x<959?x+=41377:x+=42657,h[f]=x>>8&255,h[f+1]=x&255,f+=2,l--}try{a.append(Q.decode(h,Z.GB2312))}catch(m){throw new z(m)}}static decodeKanjiSegment(i,a,l){if(l*13>i.available())throw new z;const h=new Uint8Array(2*l);let f=0;for(;l>0;){const m=i.readBits(13);let x=m/192<<8&4294967295|m%192;x<7936?x+=33088:x+=49472,h[f]=x>>8,h[f+1]=x,f+=2,l--}try{a.append(Q.decode(h,Z.SHIFT_JIS))}catch(m){throw new z(m)}}static decodeByteSegment(i,a,l,h,f,m){if(8*l>i.available())throw new z;const x=new Uint8Array(l);for(let C=0;C<l;C++)x[C]=i.readBits(8);let w;h===null?w=Z.guessEncoding(x,m):w=h.getName();try{a.append(Q.decode(x,w))}catch(C){throw new z(C)}f.push(x)}static toAlphaNumericChar(i){if(i>=on.ALPHANUMERIC_CHARS.length)throw new z;return on.ALPHANUMERIC_CHARS[i]}static decodeAlphanumericSegment(i,a,l,h){const f=a.length();for(;l>1;){if(i.available()<11)throw new z;const m=i.readBits(11);a.append(on.toAlphaNumericChar(Math.floor(m/45))),a.append(on.toAlphaNumericChar(m%45)),l-=2}if(l===1){if(i.available()<6)throw new z;a.append(on.toAlphaNumericChar(i.readBits(6)))}if(h)for(let m=f;m<a.length();m++)a.charAt(m)==="%"&&(m<a.length()-1&&a.charAt(m+1)==="%"?a.deleteCharAt(m+1):a.setCharAt(m,""))}static decodeNumericSegment(i,a,l){for(;l>=3;){if(i.available()<10)throw new z;const h=i.readBits(10);if(h>=1e3)throw new z;a.append(on.toAlphaNumericChar(Math.floor(h/100))),a.append(on.toAlphaNumericChar(Math.floor(h/10)%10)),a.append(on.toAlphaNumericChar(h%10)),l-=3}if(l===2){if(i.available()<7)throw new z;const h=i.readBits(7);if(h>=100)throw new z;a.append(on.toAlphaNumericChar(Math.floor(h/10))),a.append(on.toAlphaNumericChar(h%10))}else if(l===1){if(i.available()<4)throw new z;const h=i.readBits(4);if(h>=10)throw new z;a.append(on.toAlphaNumericChar(h))}}static parseECIValue(i){const a=i.readBits(8);if((a&128)===0)return a&127;if((a&192)===128){const l=i.readBits(8);return(a&63)<<8&4294967295|l}if((a&224)===192){const l=i.readBits(16);return(a&31)<<16&4294967295|l}throw new z}}on.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",on.GB2312_SUBSET=1;class So{constructor(i){this.mirrored=i}isMirrored(){return this.mirrored}applyMirroredCorrection(i){if(!this.mirrored||i===null||i.length<3)return;const a=i[0];i[0]=i[2],i[2]=a}}class Ms{constructor(){this.rsDecoder=new Gr(wt.QR_CODE_FIELD_256)}decodeBooleanArray(i,a){return this.decodeBitMatrix(We.parseFromBooleanArray(i),a)}decodeBitMatrix(i,a){const l=new Zr(i);let h=null;try{return this.decodeBitMatrixParser(l,a)}catch(f){h=f}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const f=this.decodeBitMatrixParser(l,a);return f.setOther(new So(!0)),f}catch(f){throw h!==null?h:f}}decodeBitMatrixParser(i,a){const l=i.readVersion(),h=i.readFormatInformation().getErrorCorrectionLevel(),f=i.readCodewords(),m=La.getDataBlocks(f,l,h);let x=0;for(const R of m)x+=R.getNumDataCodewords();const w=new Uint8Array(x);let C=0;for(const R of m){const P=R.getCodewords(),B=R.getNumDataCodewords();this.correctErrors(P,B);for(let Y=0;Y<B;Y++)w[C++]=P[Y]}return on.decode(w,l,h,a)}correctErrors(i,a){const l=new Int32Array(i);try{this.rsDecoder.decode(l,i.length-a)}catch{throw new V}for(let h=0;h<a;h++)i[h]=l[h]}}class Ls extends Fe{constructor(i,a,l){super(i,a),this.estimatedModuleSize=l}aboutEquals(i,a,l){if(Math.abs(a-this.getY())<=i&&Math.abs(l-this.getX())<=i){const h=Math.abs(i-this.estimatedModuleSize);return h<=1||h<=this.estimatedModuleSize}return!1}combineEstimate(i,a,l){const h=(this.getX()+a)/2,f=(this.getY()+i)/2,m=(this.estimatedModuleSize+l)/2;return new Ls(h,f,m)}}class Jr{constructor(i,a,l,h,f,m,x){this.image=i,this.startX=a,this.startY=l,this.width=h,this.height=f,this.moduleSize=m,this.resultPointCallback=x,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const i=this.startX,a=this.height,l=this.width,h=i+l,f=this.startY+a/2,m=new Int32Array(3),x=this.image;for(let w=0;w<a;w++){const C=f+((w&1)===0?Math.floor((w+1)/2):-Math.floor((w+1)/2));m[0]=0,m[1]=0,m[2]=0;let R=i;for(;R<h&&!x.get(R,C);)R++;let P=0;for(;R<h;){if(x.get(R,C))if(P===1)m[1]++;else if(P===2){if(this.foundPatternCross(m)){const B=this.handlePossibleCenter(m,C,R);if(B!==null)return B}m[0]=m[2],m[1]=1,m[2]=0,P=1}else m[++P]++;else P===1&&P++,m[P]++;R++}if(this.foundPatternCross(m)){const B=this.handlePossibleCenter(m,C,h);if(B!==null)return B}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new de}static centerFromEnd(i,a){return a-i[2]-i[1]/2}foundPatternCross(i){const a=this.moduleSize,l=a/2;for(let h=0;h<3;h++)if(Math.abs(a-i[h])>=l)return!1;return!0}crossCheckVertical(i,a,l,h){const f=this.image,m=f.getHeight(),x=this.crossCheckStateCount;x[0]=0,x[1]=0,x[2]=0;let w=i;for(;w>=0&&f.get(a,w)&&x[1]<=l;)x[1]++,w--;if(w<0||x[1]>l)return NaN;for(;w>=0&&!f.get(a,w)&&x[0]<=l;)x[0]++,w--;if(x[0]>l)return NaN;for(w=i+1;w<m&&f.get(a,w)&&x[1]<=l;)x[1]++,w++;if(w===m||x[1]>l)return NaN;for(;w<m&&!f.get(a,w)&&x[2]<=l;)x[2]++,w++;if(x[2]>l)return NaN;const C=x[0]+x[1]+x[2];return 5*Math.abs(C-h)>=2*h?NaN:this.foundPatternCross(x)?Jr.centerFromEnd(x,w):NaN}handlePossibleCenter(i,a,l){const h=i[0]+i[1]+i[2],f=Jr.centerFromEnd(i,l),m=this.crossCheckVertical(a,f,2*i[1],h);if(!isNaN(m)){const x=(i[0]+i[1]+i[2])/3;for(const C of this.possibleCenters)if(C.aboutEquals(x,m,f))return C.combineEstimate(m,f,x);const w=new Ls(f,m,x);this.possibleCenters.push(w),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(w)}return null}}class Qs extends Fe{constructor(i,a,l,h){super(i,a),this.estimatedModuleSize=l,this.count=h,h===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(i,a,l){if(Math.abs(a-this.getY())<=i&&Math.abs(l-this.getX())<=i){const h=Math.abs(i-this.estimatedModuleSize);return h<=1||h<=this.estimatedModuleSize}return!1}combineEstimate(i,a,l){const h=this.count+1,f=(this.count*this.getX()+a)/h,m=(this.count*this.getY()+i)/h,x=(this.count*this.estimatedModuleSize+l)/h;return new Qs(f,m,x,h)}}class _i{constructor(i){this.bottomLeft=i[0],this.topLeft=i[1],this.topRight=i[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Tn{constructor(i,a){this.image=i,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=a}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(i){const a=i!=null&&i.get(De.TRY_HARDER)!==void 0,l=i!=null&&i.get(De.PURE_BARCODE)!==void 0,h=this.image,f=h.getHeight(),m=h.getWidth();let x=Math.floor(3*f/(4*Tn.MAX_MODULES));(x<Tn.MIN_SKIP||a)&&(x=Tn.MIN_SKIP);let w=!1;const C=new Int32Array(5);for(let P=x-1;P<f&&!w;P+=x){C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0;let B=0;for(let Y=0;Y<m;Y++)if(h.get(Y,P))(B&1)===1&&B++,C[B]++;else if((B&1)===0)if(B===4)if(Tn.foundPatternCross(C)){if(this.handlePossibleCenter(C,P,Y,l)===!0)if(x=2,this.hasSkipped===!0)w=this.haveMultiplyConfirmedCenters();else{const ne=this.findRowSkip();ne>C[2]&&(P+=ne-C[2]-x,Y=m-1)}else{C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,B=3;continue}B=0,C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0}else C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,B=3;else C[++B]++;else C[B]++;Tn.foundPatternCross(C)&&this.handlePossibleCenter(C,P,m,l)===!0&&(x=C[0],this.hasSkipped&&(w=this.haveMultiplyConfirmedCenters()))}const R=this.selectBestPatterns();return Fe.orderBestPatterns(R),new _i(R)}static centerFromEnd(i,a){return a-i[4]-i[3]-i[2]/2}static foundPatternCross(i){let a=0;for(let f=0;f<5;f++){const m=i[f];if(m===0)return!1;a+=m}if(a<7)return!1;const l=a/7,h=l/2;return Math.abs(l-i[0])<h&&Math.abs(l-i[1])<h&&Math.abs(3*l-i[2])<3*h&&Math.abs(l-i[3])<h&&Math.abs(l-i[4])<h}getCrossCheckStateCount(){const i=this.crossCheckStateCount;return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i}crossCheckDiagonal(i,a,l,h){const f=this.getCrossCheckStateCount();let m=0;const x=this.image;for(;i>=m&&a>=m&&x.get(a-m,i-m);)f[2]++,m++;if(i<m||a<m)return!1;for(;i>=m&&a>=m&&!x.get(a-m,i-m)&&f[1]<=l;)f[1]++,m++;if(i<m||a<m||f[1]>l)return!1;for(;i>=m&&a>=m&&x.get(a-m,i-m)&&f[0]<=l;)f[0]++,m++;if(f[0]>l)return!1;const w=x.getHeight(),C=x.getWidth();for(m=1;i+m<w&&a+m<C&&x.get(a+m,i+m);)f[2]++,m++;if(i+m>=w||a+m>=C)return!1;for(;i+m<w&&a+m<C&&!x.get(a+m,i+m)&&f[3]<l;)f[3]++,m++;if(i+m>=w||a+m>=C||f[3]>=l)return!1;for(;i+m<w&&a+m<C&&x.get(a+m,i+m)&&f[4]<l;)f[4]++,m++;if(f[4]>=l)return!1;const R=f[0]+f[1]+f[2]+f[3]+f[4];return Math.abs(R-h)<2*h&&Tn.foundPatternCross(f)}crossCheckVertical(i,a,l,h){const f=this.image,m=f.getHeight(),x=this.getCrossCheckStateCount();let w=i;for(;w>=0&&f.get(a,w);)x[2]++,w--;if(w<0)return NaN;for(;w>=0&&!f.get(a,w)&&x[1]<=l;)x[1]++,w--;if(w<0||x[1]>l)return NaN;for(;w>=0&&f.get(a,w)&&x[0]<=l;)x[0]++,w--;if(x[0]>l)return NaN;for(w=i+1;w<m&&f.get(a,w);)x[2]++,w++;if(w===m)return NaN;for(;w<m&&!f.get(a,w)&&x[3]<l;)x[3]++,w++;if(w===m||x[3]>=l)return NaN;for(;w<m&&f.get(a,w)&&x[4]<l;)x[4]++,w++;if(x[4]>=l)return NaN;const C=x[0]+x[1]+x[2]+x[3]+x[4];return 5*Math.abs(C-h)>=2*h?NaN:Tn.foundPatternCross(x)?Tn.centerFromEnd(x,w):NaN}crossCheckHorizontal(i,a,l,h){const f=this.image,m=f.getWidth(),x=this.getCrossCheckStateCount();let w=i;for(;w>=0&&f.get(w,a);)x[2]++,w--;if(w<0)return NaN;for(;w>=0&&!f.get(w,a)&&x[1]<=l;)x[1]++,w--;if(w<0||x[1]>l)return NaN;for(;w>=0&&f.get(w,a)&&x[0]<=l;)x[0]++,w--;if(x[0]>l)return NaN;for(w=i+1;w<m&&f.get(w,a);)x[2]++,w++;if(w===m)return NaN;for(;w<m&&!f.get(w,a)&&x[3]<l;)x[3]++,w++;if(w===m||x[3]>=l)return NaN;for(;w<m&&f.get(w,a)&&x[4]<l;)x[4]++,w++;if(x[4]>=l)return NaN;const C=x[0]+x[1]+x[2]+x[3]+x[4];return 5*Math.abs(C-h)>=h?NaN:Tn.foundPatternCross(x)?Tn.centerFromEnd(x,w):NaN}handlePossibleCenter(i,a,l,h){const f=i[0]+i[1]+i[2]+i[3]+i[4];let m=Tn.centerFromEnd(i,l),x=this.crossCheckVertical(a,Math.floor(m),i[2],f);if(!isNaN(x)&&(m=this.crossCheckHorizontal(Math.floor(m),Math.floor(x),i[2],f),!isNaN(m)&&(!h||this.crossCheckDiagonal(Math.floor(x),Math.floor(m),i[2],f)))){const w=f/7;let C=!1;const R=this.possibleCenters;for(let P=0,B=R.length;P<B;P++){const Y=R[P];if(Y.aboutEquals(w,x,m)){R[P]=Y.combineEstimate(x,m,w),C=!0;break}}if(!C){const P=new Qs(m,x,w);R.push(P),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(P)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let a=null;for(const l of this.possibleCenters)if(l.getCount()>=Tn.CENTER_QUORUM)if(a==null)a=l;else return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-l.getX())-Math.abs(a.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let i=0,a=0;const l=this.possibleCenters.length;for(const m of this.possibleCenters)m.getCount()>=Tn.CENTER_QUORUM&&(i++,a+=m.getEstimatedModuleSize());if(i<3)return!1;const h=a/l;let f=0;for(const m of this.possibleCenters)f+=Math.abs(m.getEstimatedModuleSize()-h);return f<=.05*a}selectBestPatterns(){const i=this.possibleCenters.length;if(i<3)throw new de;const a=this.possibleCenters;let l;if(i>3){let h=0,f=0;for(const w of this.possibleCenters){const C=w.getEstimatedModuleSize();h+=C,f+=C*C}l=h/i;let m=Math.sqrt(f/i-l*l);a.sort((w,C)=>{const R=Math.abs(C.getEstimatedModuleSize()-l),P=Math.abs(w.getEstimatedModuleSize()-l);return R<P?-1:R>P?1:0});const x=Math.max(.2*l,m);for(let w=0;w<a.length&&a.length>3;w++){const C=a[w];Math.abs(C.getEstimatedModuleSize()-l)>x&&(a.splice(w,1),w--)}}if(a.length>3){let h=0;for(const f of a)h+=f.getEstimatedModuleSize();l=h/a.length,a.sort((f,m)=>{if(m.getCount()===f.getCount()){const x=Math.abs(m.getEstimatedModuleSize()-l),w=Math.abs(f.getEstimatedModuleSize()-l);return x<w?1:x>w?-1:0}else return m.getCount()-f.getCount()}),a.splice(3)}return[a[0],a[1],a[2]]}}Tn.CENTER_QUORUM=2,Tn.MIN_SKIP=3,Tn.MAX_MODULES=57;class $r{constructor(i){this.image=i}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(i){this.resultPointCallback=i==null?null:i.get(De.NEED_RESULT_POINT_CALLBACK);const l=new Tn(this.image,this.resultPointCallback).find(i);return this.processFinderPatternInfo(l)}processFinderPatternInfo(i){const a=i.getTopLeft(),l=i.getTopRight(),h=i.getBottomLeft(),f=this.calculateModuleSize(a,l,h);if(f<1)throw new de("No pattern found in proccess finder.");const m=$r.computeDimension(a,l,h,f),x=qe.getProvisionalVersionForDimension(m),w=x.getDimensionForVersion()-7;let C=null;if(x.getAlignmentPatternCenters().length>0){const Y=l.getX()-a.getX()+h.getX(),te=l.getY()-a.getY()+h.getY(),ne=1-3/w,ue=Math.floor(a.getX()+ne*(Y-a.getX())),Ee=Math.floor(a.getY()+ne*(te-a.getY()));for(let Le=4;Le<=16;Le<<=1)try{C=this.findAlignmentInRegion(f,ue,Ee,Le);break}catch(Oe){if(!(Oe instanceof de))throw Oe}}const R=$r.createTransform(a,l,h,C,m),P=$r.sampleGrid(this.image,R,m);let B;return C===null?B=[h,a,l]:B=[h,a,l,C],new ws(P,B)}static createTransform(i,a,l,h,f){const m=f-3.5;let x,w,C,R;return h!==null?(x=h.getX(),w=h.getY(),C=m-3,R=C):(x=a.getX()-i.getX()+l.getX(),w=a.getY()-i.getY()+l.getY(),C=m,R=m),ur.quadrilateralToQuadrilateral(3.5,3.5,m,3.5,C,R,3.5,m,i.getX(),i.getY(),a.getX(),a.getY(),x,w,l.getX(),l.getY())}static sampleGrid(i,a,l){return rr.getInstance().sampleGridWithTransform(i,l,l,a)}static computeDimension(i,a,l,h){const f=Qe.round(Fe.distance(i,a)/h),m=Qe.round(Fe.distance(i,l)/h);let x=Math.floor((f+m)/2)+7;switch(x&3){case 0:x++;break;case 2:x--;break;case 3:throw new de("Dimensions could be not found.")}return x}calculateModuleSize(i,a,l){return(this.calculateModuleSizeOneWay(i,a)+this.calculateModuleSizeOneWay(i,l))/2}calculateModuleSizeOneWay(i,a){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(a.getX()),Math.floor(a.getY())),h=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.getX()),Math.floor(a.getY()),Math.floor(i.getX()),Math.floor(i.getY()));return isNaN(l)?h/7:isNaN(h)?l/7:(l+h)/14}sizeOfBlackWhiteBlackRunBothWays(i,a,l,h){let f=this.sizeOfBlackWhiteBlackRun(i,a,l,h),m=1,x=i-(l-i);x<0?(m=i/(i-x),x=0):x>=this.image.getWidth()&&(m=(this.image.getWidth()-1-i)/(x-i),x=this.image.getWidth()-1);let w=Math.floor(a-(h-a)*m);return m=1,w<0?(m=a/(a-w),w=0):w>=this.image.getHeight()&&(m=(this.image.getHeight()-1-a)/(w-a),w=this.image.getHeight()-1),x=Math.floor(i+(x-i)*m),f+=this.sizeOfBlackWhiteBlackRun(i,a,x,w),f-1}sizeOfBlackWhiteBlackRun(i,a,l,h){const f=Math.abs(h-a)>Math.abs(l-i);if(f){let Y=i;i=a,a=Y,Y=l,l=h,h=Y}const m=Math.abs(l-i),x=Math.abs(h-a);let w=-m/2;const C=i<l?1:-1,R=a<h?1:-1;let P=0;const B=l+C;for(let Y=i,te=a;Y!==B;Y+=C){const ne=f?te:Y,ue=f?Y:te;if(P===1===this.image.get(ne,ue)){if(P===2)return Qe.distance(Y,te,i,a);P++}if(w+=x,w>0){if(te===h)break;te+=R,w-=m}}return P===2?Qe.distance(l+C,h,i,a):NaN}findAlignmentInRegion(i,a,l,h){const f=Math.floor(h*i),m=Math.max(0,a-f),x=Math.min(this.image.getWidth()-1,a+f);if(x-m<i*3)throw new de("Alignment top exceeds estimated module size.");const w=Math.max(0,l-f),C=Math.min(this.image.getHeight()-1,l+f);if(C-w<i*3)throw new de("Alignment bottom exceeds estimated module size.");return new Jr(this.image,m,w,x-m,C-w,i,this.resultPointCallback).find()}}class ei{constructor(){this.decoder=new Ms}getDecoder(){return this.decoder}decode(i,a){let l,h;if(a!=null&&a.get(De.PURE_BARCODE)!==void 0){const w=ei.extractPureBits(i.getBlackMatrix());l=this.decoder.decodeBitMatrix(w,a),h=ei.NO_POINTS}else{const w=new $r(i.getBlackMatrix()).detect(a);l=this.decoder.decodeBitMatrix(w.getBits(),a),h=w.getPoints()}l.getOther()instanceof So&&l.getOther().applyMirroredCorrection(h);const f=new ke(l.getText(),l.getRawBytes(),void 0,h,Me.QR_CODE,void 0),m=l.getByteSegments();m!==null&&f.putMetadata(Ct.BYTE_SEGMENTS,m);const x=l.getECLevel();return x!==null&&f.putMetadata(Ct.ERROR_CORRECTION_LEVEL,x),l.hasStructuredAppend()&&(f.putMetadata(Ct.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),f.putMetadata(Ct.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),f}reset(){}static extractPureBits(i){const a=i.getTopLeftOnBit(),l=i.getBottomRightOnBit();if(a===null||l===null)throw new de;const h=this.moduleSize(a,i);let f=a[1],m=l[1],x=a[0],w=l[0];if(x>=w||f>=m)throw new de;if(m-f!==w-x&&(w=x+(m-f),w>=i.getWidth()))throw new de;const C=Math.round((w-x+1)/h),R=Math.round((m-f+1)/h);if(C<=0||R<=0)throw new de;if(R!==C)throw new de;const P=Math.floor(h/2);f+=P,x+=P;const B=x+Math.floor((C-1)*h)-w;if(B>0){if(B>P)throw new de;x-=B}const Y=f+Math.floor((R-1)*h)-m;if(Y>0){if(Y>P)throw new de;f-=Y}const te=new We(C,R);for(let ne=0;ne<R;ne++){const ue=f+Math.floor(ne*h);for(let Ee=0;Ee<C;Ee++)i.get(x+Math.floor(Ee*h),ue)&&te.set(Ee,ne)}return te}static moduleSize(i,a){const l=a.getHeight(),h=a.getWidth();let f=i[0],m=i[1],x=!0,w=0;for(;f<h&&m<l;){if(x!==a.get(f,m)){if(++w===5)break;x=!x}f++,m++}if(f===h||m===l)throw new de;return(f-i[0])/7}}ei.NO_POINTS=new Array;class $e{PDF417Common(){}static getBitCountSum(i){return Qe.sum(i)}static toIntArray(i){if(i==null||!i.length)return $e.EMPTY_INT_ARRAY;const a=new Int32Array(i.length);let l=0;for(const h of i)a[l++]=h;return a}static getCodeword(i){const a=ae.binarySearch($e.SYMBOL_TABLE,i&262143);return a<0?-1:($e.CODEWORD_TABLE[a]-1)%$e.NUMBER_OF_CODEWORDS}}$e.NUMBER_OF_CODEWORDS=929,$e.MAX_CODEWORDS_IN_BARCODE=$e.NUMBER_OF_CODEWORDS-1,$e.MIN_ROWS_IN_BARCODE=3,$e.MAX_ROWS_IN_BARCODE=90,$e.MODULES_IN_CODEWORD=17,$e.MODULES_IN_STOP_PATTERN=18,$e.BARS_IN_MODULE=8,$e.EMPTY_INT_ARRAY=new Int32Array([]),$e.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),$e.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Ps{constructor(i,a){this.bits=i,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class it{static detectMultiple(i,a,l){let h=i.getBlackMatrix(),f=it.detect(l,h);return f.length||(h=h.clone(),h.rotate180(),f=it.detect(l,h)),new Ps(h,f)}static detect(i,a){const l=new Array;let h=0,f=0,m=!1;for(;h<a.getHeight();){const x=it.findVertices(a,h,f);if(x[0]==null&&x[3]==null){if(!m)break;m=!1,f=0;for(const w of l)w[1]!=null&&(h=Math.trunc(Math.max(h,w[1].getY()))),w[3]!=null&&(h=Math.max(h,Math.trunc(w[3].getY())));h+=it.ROW_STEP;continue}if(m=!0,l.push(x),!i)break;x[2]!=null?(f=Math.trunc(x[2].getX()),h=Math.trunc(x[2].getY())):(f=Math.trunc(x[4].getX()),h=Math.trunc(x[4].getY()))}return l}static findVertices(i,a,l){const h=i.getHeight(),f=i.getWidth(),m=new Array(8);return it.copyToResult(m,it.findRowsWithPattern(i,h,f,a,l,it.START_PATTERN),it.INDEXES_START_PATTERN),m[4]!=null&&(l=Math.trunc(m[4].getX()),a=Math.trunc(m[4].getY())),it.copyToResult(m,it.findRowsWithPattern(i,h,f,a,l,it.STOP_PATTERN),it.INDEXES_STOP_PATTERN),m}static copyToResult(i,a,l){for(let h=0;h<l.length;h++)i[l[h]]=a[h]}static findRowsWithPattern(i,a,l,h,f,m){const x=new Array(4);let w=!1;const C=new Int32Array(m.length);for(;h<a;h+=it.ROW_STEP){let P=it.findGuardPattern(i,f,h,l,!1,m,C);if(P!=null){for(;h>0;){const B=it.findGuardPattern(i,f,--h,l,!1,m,C);if(B!=null)P=B;else{h++;break}}x[0]=new Fe(P[0],h),x[1]=new Fe(P[1],h),w=!0;break}}let R=h+1;if(w){let P=0,B=Int32Array.from([Math.trunc(x[0].getX()),Math.trunc(x[1].getX())]);for(;R<a;R++){const Y=it.findGuardPattern(i,B[0],R,l,!1,m,C);if(Y!=null&&Math.abs(B[0]-Y[0])<it.MAX_PATTERN_DRIFT&&Math.abs(B[1]-Y[1])<it.MAX_PATTERN_DRIFT)B=Y,P=0;else{if(P>it.SKIPPED_ROW_COUNT_MAX)break;P++}}R-=P+1,x[2]=new Fe(B[0],R),x[3]=new Fe(B[1],R)}return R-h<it.BARCODE_MIN_HEIGHT&&ae.fill(x,null),x}static findGuardPattern(i,a,l,h,f,m,x){ae.fillWithin(x,0,x.length,0);let w=a,C=0;for(;i.get(w,l)&&w>0&&C++<it.MAX_PIXEL_DRIFT;)w--;let R=w,P=0,B=m.length;for(let Y=f;R<h;R++)if(i.get(R,l)!==Y)x[P]++;else{if(P===B-1){if(it.patternMatchVariance(x,m,it.MAX_INDIVIDUAL_VARIANCE)<it.MAX_AVG_VARIANCE)return new Int32Array([w,R]);w+=x[0]+x[1],W.arraycopy(x,2,x,0,P-1),x[P-1]=0,x[P]=0,P--}else P++;x[P]=1,Y=!Y}return P===B-1&&it.patternMatchVariance(x,m,it.MAX_INDIVIDUAL_VARIANCE)<it.MAX_AVG_VARIANCE?new Int32Array([w,R-1]):null}static patternMatchVariance(i,a,l){let h=i.length,f=0,m=0;for(let C=0;C<h;C++)f+=i[C],m+=a[C];if(f<m)return 1/0;let x=f/m;l*=x;let w=0;for(let C=0;C<h;C++){let R=i[C],P=a[C]*x,B=R>P?R-P:P-R;if(B>l)return 1/0;w+=B}return w/f}}it.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),it.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),it.MAX_AVG_VARIANCE=.42,it.MAX_INDIVIDUAL_VARIANCE=.8,it.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),it.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),it.MAX_PIXEL_DRIFT=3,it.MAX_PATTERN_DRIFT=5,it.SKIPPED_ROW_COUNT_MAX=25,it.ROW_STEP=5,it.BARCODE_MIN_HEIGHT=10;class ln{constructor(i,a){if(a.length===0)throw new I;this.field=i;let l=a.length;if(l>1&&a[0]===0){let h=1;for(;h<l&&a[h]===0;)h++;h===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-h),W.arraycopy(a,h,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);if(i===1){let h=0;for(let f of this.coefficients)h=this.field.add(h,f);return h}let a=this.coefficients[0],l=this.coefficients.length;for(let h=1;h<l;h++)a=this.field.add(this.field.multiply(i,a),this.coefficients[h]);return a}add(i){if(!this.field.equals(i.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero())return i;if(i.isZero())return this;let a=this.coefficients,l=i.coefficients;if(a.length>l.length){let m=a;a=l,l=m}let h=new Int32Array(l.length),f=l.length-a.length;W.arraycopy(l,0,h,0,f);for(let m=f;m<l.length;m++)h[m]=this.field.add(a[m-f],l[m]);return new ln(this.field,h)}subtract(i){if(!this.field.equals(i.field))throw new I("ModulusPolys do not have same ModulusGF field");return i.isZero()?this:this.add(i.negative())}multiply(i){return i instanceof ln?this.multiplyOther(i):this.multiplyScalar(i)}multiplyOther(i){if(!this.field.equals(i.field))throw new I("ModulusPolys do not have same ModulusGF field");if(this.isZero()||i.isZero())return new ln(this.field,new Int32Array([0]));let a=this.coefficients,l=a.length,h=i.coefficients,f=h.length,m=new Int32Array(l+f-1);for(let x=0;x<l;x++){let w=a[x];for(let C=0;C<f;C++)m[x+C]=this.field.add(m[x+C],this.field.multiply(w,h[C]))}return new ln(this.field,m)}negative(){let i=this.coefficients.length,a=new Int32Array(i);for(let l=0;l<i;l++)a[l]=this.field.subtract(0,this.coefficients[l]);return new ln(this.field,a)}multiplyScalar(i){if(i===0)return new ln(this.field,new Int32Array([0]));if(i===1)return this;let a=this.coefficients.length,l=new Int32Array(a);for(let h=0;h<a;h++)l[h]=this.field.multiply(this.coefficients[h],i);return new ln(this.field,l)}multiplyByMonomial(i,a){if(i<0)throw new I;if(a===0)return new ln(this.field,new Int32Array([0]));let l=this.coefficients.length,h=new Int32Array(l+i);for(let f=0;f<l;f++)h[f]=this.field.multiply(this.coefficients[f],a);return new ln(this.field,h)}toString(){let i=new X;for(let a=this.getDegree();a>=0;a--){let l=this.getCoefficient(a);l!==0&&(l<0?(i.append(" - "),l=-l):i.length()>0&&i.append(" + "),(a===0||l!==1)&&i.append(l),a!==0&&(a===1?i.append("x"):(i.append("x^"),i.append(a))))}return i.toString()}}class Zs{add(i,a){return(i+a)%this.modulus}subtract(i,a){return(this.modulus+i-a)%this.modulus}exp(i){return this.expTable[i]}log(i){if(i===0)throw new I;return this.logTable[i]}inverse(i){if(i===0)throw new si;return this.expTable[this.modulus-this.logTable[i]-1]}multiply(i,a){return i===0||a===0?0:this.expTable[(this.logTable[i]+this.logTable[a])%(this.modulus-1)]}getSize(){return this.modulus}equals(i){return i===this}}class $t extends Zs{constructor(i,a){super(),this.modulus=i,this.expTable=new Int32Array(i),this.logTable=new Int32Array(i);let l=1;for(let h=0;h<i;h++)this.expTable[h]=l,l=l*a%i;for(let h=0;h<i-1;h++)this.logTable[this.expTable[h]]=h;this.zero=new ln(this,new Int32Array([0])),this.one=new ln(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,a){if(i<0)throw new I;if(a===0)return this.zero;let l=new Int32Array(i+1);return l[0]=a,new ln(this,l)}}$t.PDF417_GF=new $t($e.NUMBER_OF_CODEWORDS,3);class Li{constructor(){this.field=$t.PDF417_GF}decode(i,a,l){let h=new ln(this.field,i),f=new Int32Array(a),m=!1;for(let te=a;te>0;te--){let ne=h.evaluateAt(this.field.exp(te));f[a-te]=ne,ne!==0&&(m=!0)}if(!m)return 0;let x=this.field.getOne();if(l!=null)for(const te of l){let ne=this.field.exp(i.length-1-te),ue=new ln(this.field,new Int32Array([this.field.subtract(0,ne),1]));x=x.multiply(ue)}let w=new ln(this.field,f),C=this.runEuclideanAlgorithm(this.field.buildMonomial(a,1),w,a),R=C[0],P=C[1],B=this.findErrorLocations(R),Y=this.findErrorMagnitudes(P,R,B);for(let te=0;te<B.length;te++){let ne=i.length-1-this.field.log(B[te]);if(ne<0)throw V.getChecksumInstance();i[ne]=this.field.subtract(i[ne],Y[te])}return B.length}runEuclideanAlgorithm(i,a,l){if(i.getDegree()<a.getDegree()){let B=i;i=a,a=B}let h=i,f=a,m=this.field.getZero(),x=this.field.getOne();for(;f.getDegree()>=Math.round(l/2);){let B=h,Y=m;if(h=f,m=x,h.isZero())throw V.getChecksumInstance();f=B;let te=this.field.getZero(),ne=h.getCoefficient(h.getDegree()),ue=this.field.inverse(ne);for(;f.getDegree()>=h.getDegree()&&!f.isZero();){let Ee=f.getDegree()-h.getDegree(),Le=this.field.multiply(f.getCoefficient(f.getDegree()),ue);te=te.add(this.field.buildMonomial(Ee,Le)),f=f.subtract(h.multiplyByMonomial(Ee,Le))}x=te.multiply(m).subtract(Y).negative()}let w=x.getCoefficient(0);if(w===0)throw V.getChecksumInstance();let C=this.field.inverse(w),R=x.multiply(C),P=f.multiply(C);return[R,P]}findErrorLocations(i){let a=i.getDegree(),l=new Int32Array(a),h=0;for(let f=1;f<this.field.getSize()&&h<a;f++)i.evaluateAt(f)===0&&(l[h]=this.field.inverse(f),h++);if(h!==a)throw V.getChecksumInstance();return l}findErrorMagnitudes(i,a,l){let h=a.getDegree(),f=new Int32Array(h);for(let C=1;C<=h;C++)f[h-C]=this.field.multiply(C,a.getCoefficient(C));let m=new ln(this.field,f),x=l.length,w=new Int32Array(x);for(let C=0;C<x;C++){let R=this.field.inverse(l[C]),P=this.field.subtract(0,i.evaluateAt(R)),B=this.field.inverse(m.evaluateAt(R));w[C]=this.field.multiply(P,B)}return w}}class Pi{constructor(i,a,l,h,f){i instanceof Pi?this.constructor_2(i):this.constructor_1(i,a,l,h,f)}constructor_1(i,a,l,h,f){const m=a==null||l==null,x=h==null||f==null;if(m&&x)throw new de;m?(a=new Fe(0,h.getY()),l=new Fe(0,f.getY())):x&&(h=new Fe(i.getWidth()-1,a.getY()),f=new Fe(i.getWidth()-1,l.getY())),this.image=i,this.topLeft=a,this.bottomLeft=l,this.topRight=h,this.bottomRight=f,this.minX=Math.trunc(Math.min(a.getX(),l.getX())),this.maxX=Math.trunc(Math.max(h.getX(),f.getX())),this.minY=Math.trunc(Math.min(a.getY(),h.getY())),this.maxY=Math.trunc(Math.max(l.getY(),f.getY()))}constructor_2(i){this.image=i.image,this.topLeft=i.getTopLeft(),this.bottomLeft=i.getBottomLeft(),this.topRight=i.getTopRight(),this.bottomRight=i.getBottomRight(),this.minX=i.getMinX(),this.maxX=i.getMaxX(),this.minY=i.getMinY(),this.maxY=i.getMaxY()}static merge(i,a){return i==null?a:a==null?i:new Pi(i.image,i.topLeft,i.bottomLeft,a.topRight,a.bottomRight)}addMissingRows(i,a,l){let h=this.topLeft,f=this.bottomLeft,m=this.topRight,x=this.bottomRight;if(i>0){let w=l?this.topLeft:this.topRight,C=Math.trunc(w.getY()-i);C<0&&(C=0);let R=new Fe(w.getX(),C);l?h=R:m=R}if(a>0){let w=l?this.bottomLeft:this.bottomRight,C=Math.trunc(w.getY()+a);C>=this.image.getHeight()&&(C=this.image.getHeight()-1);let R=new Fe(w.getX(),C);l?f=R:x=R}return new Pi(this.image,h,f,m,x)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Js{constructor(i,a,l,h){this.columnCount=i,this.errorCorrectionLevel=h,this.rowCountUpperPart=a,this.rowCountLowerPart=l,this.rowCount=a+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class bs{constructor(){this.buffer=""}static form(i,a){let l=-1;function h(m,x,w,C,R,P){if(m==="%%")return"%";if(a[++l]===void 0)return;m=C?parseInt(C.substr(1)):void 0;let B=R?parseInt(R.substr(1)):void 0,Y;switch(P){case"s":Y=a[l];break;case"c":Y=a[l][0];break;case"f":Y=parseFloat(a[l]).toFixed(m);break;case"p":Y=parseFloat(a[l]).toPrecision(m);break;case"e":Y=parseFloat(a[l]).toExponential(m);break;case"x":Y=parseInt(a[l]).toString(B||16);break;case"d":Y=parseFloat(parseInt(a[l],B||10).toPrecision(m)).toFixed(0);break}Y=typeof Y=="object"?JSON.stringify(Y):(+Y).toString(B);let te=parseInt(w),ne=w&&w[0]+""=="0"?"0":" ";for(;Y.length<te;)Y=x!==void 0?Y+ne:ne+Y;return Y}let f=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(f,h)}format(i,...a){this.buffer+=bs.form(i,a)}toString(){return this.buffer}}class Bi{constructor(i){this.boundingBox=new Pi(i),this.codewords=new Array(i.getMaxY()-i.getMinY()+1)}getCodewordNearby(i){let a=this.getCodeword(i);if(a!=null)return a;for(let l=1;l<Bi.MAX_NEARBY_DISTANCE;l++){let h=this.imageRowToCodewordIndex(i)-l;if(h>=0&&(a=this.codewords[h],a!=null)||(h=this.imageRowToCodewordIndex(i)+l,h<this.codewords.length&&(a=this.codewords[h],a!=null)))return a}return null}imageRowToCodewordIndex(i){return i-this.boundingBox.getMinY()}setCodeword(i,a){this.codewords[this.imageRowToCodewordIndex(i)]=a}getCodeword(i){return this.codewords[this.imageRowToCodewordIndex(i)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const i=new bs;let a=0;for(const l of this.codewords){if(l==null){i.format("%3d:    |   %n",a++);continue}i.format("%3d: %3d|%3d%n",a++,l.getRowNumber(),l.getValue())}return i.toString()}}Bi.MAX_NEARBY_DISTANCE=5;class ci{constructor(){this.values=new Map}setValue(i){i=Math.trunc(i);let a=this.values.get(i);a==null&&(a=0),a++,this.values.set(i,a)}getValue(){let i=-1,a=new Array;for(const[l,h]of this.values.entries()){const f={getKey:()=>l,getValue:()=>h};f.getValue()>i?(i=f.getValue(),a=[],a.push(f.getKey())):f.getValue()===i&&a.push(f.getKey())}return $e.toIntArray(a)}getConfidence(i){return this.values.get(i)}}class wi extends Bi{constructor(i,a){super(i),this._isLeft=a}setRowNumbers(){for(let i of this.getCodewords())i!=null&&i.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(i){let a=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(a,i);let l=this.getBoundingBox(),h=this._isLeft?l.getTopLeft():l.getTopRight(),f=this._isLeft?l.getBottomLeft():l.getBottomRight(),m=this.imageRowToCodewordIndex(Math.trunc(h.getY())),x=this.imageRowToCodewordIndex(Math.trunc(f.getY())),w=-1,C=1,R=0;for(let P=m;P<x;P++){if(a[P]==null)continue;let B=a[P],Y=B.getRowNumber()-w;if(Y===0)R++;else if(Y===1)C=Math.max(C,R),R=1,w=B.getRowNumber();else if(Y<0||B.getRowNumber()>=i.getRowCount()||Y>P)a[P]=null;else{let te;C>2?te=(C-2)*Y:te=Y;let ne=te>=P;for(let ue=1;ue<=te&&!ne;ue++)ne=a[P-ue]!=null;ne?a[P]=null:(w=B.getRowNumber(),R=1)}}}getRowHeights(){let i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);let a=new Int32Array(i.getRowCount());for(let l of this.getCodewords())if(l!=null){let h=l.getRowNumber();if(h>=a.length)continue;a[h]++}return a}adjustIncompleteIndicatorColumnRowNumbers(i){let a=this.getBoundingBox(),l=this._isLeft?a.getTopLeft():a.getTopRight(),h=this._isLeft?a.getBottomLeft():a.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(l.getY())),m=this.imageRowToCodewordIndex(Math.trunc(h.getY())),x=this.getCodewords(),w=-1;for(let C=f;C<m;C++){if(x[C]==null)continue;let R=x[C];R.setRowNumberAsRowIndicatorColumn();let P=R.getRowNumber()-w;P===0||(P===1?w=R.getRowNumber():R.getRowNumber()>=i.getRowCount()?x[C]=null:w=R.getRowNumber())}}getBarcodeMetadata(){let i=this.getCodewords(),a=new ci,l=new ci,h=new ci,f=new ci;for(let x of i){if(x==null)continue;x.setRowNumberAsRowIndicatorColumn();let w=x.getValue()%30,C=x.getRowNumber();switch(this._isLeft||(C+=2),C%3){case 0:l.setValue(w*3+1);break;case 1:f.setValue(w/3),h.setValue(w%3);break;case 2:a.setValue(w+1);break}}if(a.getValue().length===0||l.getValue().length===0||h.getValue().length===0||f.getValue().length===0||a.getValue()[0]<1||l.getValue()[0]+h.getValue()[0]<$e.MIN_ROWS_IN_BARCODE||l.getValue()[0]+h.getValue()[0]>$e.MAX_ROWS_IN_BARCODE)return null;let m=new Js(a.getValue()[0],l.getValue()[0],h.getValue()[0],f.getValue()[0]);return this.removeIncorrectCodewords(i,m),m}removeIncorrectCodewords(i,a){for(let l=0;l<i.length;l++){let h=i[l];if(i[l]==null)continue;let f=h.getValue()%30,m=h.getRowNumber();if(m>a.getRowCount()){i[l]=null;continue}switch(this._isLeft||(m+=2),m%3){case 0:f*3+1!==a.getRowCountUpperPart()&&(i[l]=null);break;case 1:(Math.trunc(f/3)!==a.getErrorCorrectionLevel()||f%3!==a.getRowCountLowerPart())&&(i[l]=null);break;case 2:f+1!==a.getColumnCount()&&(i[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Gn{constructor(i,a){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=i,this.barcodeColumnCount=i.getColumnCount(),this.boundingBox=a,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let i=$e.MAX_CODEWORDS_IN_BARCODE,a;do a=i,i=this.adjustRowNumbersAndGetCount();while(i>0&&i<a);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(i){i!=null&&i.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let i=this.adjustRowNumbersByRow();if(i===0)return 0;for(let a=1;a<this.barcodeColumnCount+1;a++){let l=this.detectionResultColumns[a].getCodewords();for(let h=0;h<l.length;h++)l[h]!=null&&(l[h].hasValidRowNumber()||this.adjustRowNumbers(a,h,l))}return i}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let i=this.detectionResultColumns[0].getCodewords(),a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<i.length;l++)if(i[l]!=null&&a[l]!=null&&i[l].getRowNumber()===a[l].getRowNumber())for(let h=1;h<=this.barcodeColumnCount;h++){let f=this.detectionResultColumns[h].getCodewords()[l];f!=null&&(f.setRowNumber(i[l].getRowNumber()),f.hasValidRowNumber()||(this.detectionResultColumns[h].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let i=0,a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<a.length;l++){if(a[l]==null)continue;let h=a[l].getRowNumber(),f=0;for(let m=this.barcodeColumnCount+1;m>0&&f<this.ADJUST_ROW_NUMBER_SKIP;m--){let x=this.detectionResultColumns[m].getCodewords()[l];x!=null&&(f=Gn.adjustRowNumberIfValid(h,f,x),x.hasValidRowNumber()||i++)}}return i}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let i=0,a=this.detectionResultColumns[0].getCodewords();for(let l=0;l<a.length;l++){if(a[l]==null)continue;let h=a[l].getRowNumber(),f=0;for(let m=1;m<this.barcodeColumnCount+1&&f<this.ADJUST_ROW_NUMBER_SKIP;m++){let x=this.detectionResultColumns[m].getCodewords()[l];x!=null&&(f=Gn.adjustRowNumberIfValid(h,f,x),x.hasValidRowNumber()||i++)}}return i}static adjustRowNumberIfValid(i,a,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(i)?(l.setRowNumber(i),a=0):++a),a}adjustRowNumbers(i,a,l){if(!this.detectionResultColumns[i-1])return;let h=l[a],f=this.detectionResultColumns[i-1].getCodewords(),m=f;this.detectionResultColumns[i+1]!=null&&(m=this.detectionResultColumns[i+1].getCodewords());let x=new Array(14);x[2]=f[a],x[3]=m[a],a>0&&(x[0]=l[a-1],x[4]=f[a-1],x[5]=m[a-1]),a>1&&(x[8]=l[a-2],x[10]=f[a-2],x[11]=m[a-2]),a<l.length-1&&(x[1]=l[a+1],x[6]=f[a+1],x[7]=m[a+1]),a<l.length-2&&(x[9]=l[a+2],x[12]=f[a+2],x[13]=m[a+2]);for(let w of x)if(Gn.adjustRowNumber(h,w))return}static adjustRowNumber(i,a){return a==null?!1:a.hasValidRowNumber()&&a.getBucket()===i.getBucket()?(i.setRowNumber(a.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(i){this.boundingBox=i}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(i,a){this.detectionResultColumns[i]=a}getDetectionResultColumn(i){return this.detectionResultColumns[i]}toString(){let i=this.detectionResultColumns[0];i==null&&(i=this.detectionResultColumns[this.barcodeColumnCount+1]);let a=new bs;for(let l=0;l<i.getCodewords().length;l++){a.format("CW %3d:",l);for(let h=0;h<this.barcodeColumnCount+2;h++){if(this.detectionResultColumns[h]==null){a.format("    |   ");continue}let f=this.detectionResultColumns[h].getCodewords()[l];if(f==null){a.format("    |   ");continue}a.format(" %3d|%3d",f.getRowNumber(),f.getValue())}a.format("%n")}return a.toString()}}class ui{constructor(i,a,l,h){this.rowNumber=ui.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(i),this.endX=Math.trunc(a),this.bucket=Math.trunc(l),this.value=Math.trunc(h)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(i){return i!==ui.BARCODE_ROW_UNKNOWN&&this.bucket===i%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(i){this.rowNumber=i}toString(){return this.rowNumber+"|"+this.value}}ui.BARCODE_ROW_UNKNOWN=-1;class Rn{static initialize(){for(let i=0;i<$e.SYMBOL_TABLE.length;i++){let a=$e.SYMBOL_TABLE[i],l=a&1;for(let h=0;h<$e.BARS_IN_MODULE;h++){let f=0;for(;(a&1)===l;)f+=1,a>>=1;l=a&1,Rn.RATIOS_TABLE[i]||(Rn.RATIOS_TABLE[i]=new Array($e.BARS_IN_MODULE)),Rn.RATIOS_TABLE[i][$e.BARS_IN_MODULE-h-1]=Math.fround(f/$e.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(i){let a=Rn.getDecodedCodewordValue(Rn.sampleBitCounts(i));return a!==-1?a:Rn.getClosestDecodedValue(i)}static sampleBitCounts(i){let a=Qe.sum(i),l=new Int32Array($e.BARS_IN_MODULE),h=0,f=0;for(let m=0;m<$e.MODULES_IN_CODEWORD;m++){let x=a/(2*$e.MODULES_IN_CODEWORD)+m*a/$e.MODULES_IN_CODEWORD;f+i[h]<=x&&(f+=i[h],h++),l[h]++}return l}static getDecodedCodewordValue(i){let a=Rn.getBitValue(i);return $e.getCodeword(a)===-1?-1:a}static getBitValue(i){let a=0;for(let l=0;l<i.length;l++)for(let h=0;h<i[l];h++)a=a<<1|(l%2===0?1:0);return Math.trunc(a)}static getClosestDecodedValue(i){let a=Qe.sum(i),l=new Array($e.BARS_IN_MODULE);if(a>1)for(let m=0;m<l.length;m++)l[m]=Math.fround(i[m]/a);let h=_n.MAX_VALUE,f=-1;this.bSymbolTableReady||Rn.initialize();for(let m=0;m<Rn.RATIOS_TABLE.length;m++){let x=0,w=Rn.RATIOS_TABLE[m];for(let C=0;C<$e.BARS_IN_MODULE;C++){let R=Math.fround(w[C]-l[C]);if(x+=Math.fround(R*R),x>=h)break}x<h&&(h=x,f=$e.SYMBOL_TABLE[m])}return f}}Rn.bSymbolTableReady=!1,Rn.RATIOS_TABLE=new Array($e.SYMBOL_TABLE.length).map(L=>new Array($e.BARS_IN_MODULE));class vs{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(i){this.segmentIndex=i}getFileId(){return this.fileId}setFileId(i){this.fileId=i}getOptionalData(){return this.optionalData}setOptionalData(i){this.optionalData=i}isLastSegment(){return this.lastSegment}setLastSegment(i){this.lastSegment=i}getSegmentCount(){return this.segmentCount}setSegmentCount(i){this.segmentCount=i}getSender(){return this.sender||null}setSender(i){this.sender=i}getAddressee(){return this.addressee||null}setAddressee(i){this.addressee=i}getFileName(){return this.fileName}setFileName(i){this.fileName=i}getFileSize(){return this.fileSize}setFileSize(i){this.fileSize=i}getChecksum(){return this.checksum}setChecksum(i){this.checksum=i}getTimestamp(){return this.timestamp}setTimestamp(i){this.timestamp=i}}class Pa{static parseLong(i,a=void 0){return parseInt(i,a)}}class Ts extends _{}Ts.kind="NullPointerException";class Ba{writeBytes(i){this.writeBytesOffset(i,0,i.length)}writeBytesOffset(i,a,l){if(i==null)throw new Ts;if(a<0||a>i.length||l<0||a+l>i.length||a+l<0)throw new q;if(l===0)return;for(let h=0;h<l;h++)this.write(i[a+h])}flush(){}close(){}}class es extends _{}class ka extends Ba{constructor(i=32){if(super(),this.count=0,i<0)throw new I("Negative initial size: "+i);this.buf=new Uint8Array(i)}ensureCapacity(i){i-this.buf.length>0&&this.grow(i)}grow(i){let l=this.buf.length<<1;if(l-i<0&&(l=i),l<0){if(i<0)throw new es;l=ee.MAX_VALUE}this.buf=ae.copyOfUint8Array(this.buf,l)}write(i){this.ensureCapacity(this.count+1),this.buf[this.count]=i,this.count+=1}writeBytesOffset(i,a,l){if(a<0||a>i.length||l<0||a+l-i.length>0)throw new q;this.ensureCapacity(this.count+l),W.arraycopy(i,a,this.buf,this.count,l),this.count+=l}writeTo(i){i.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return ae.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(i){return i?typeof i=="string"?this.toString_string(i):this.toString_number(i):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(i){return new String(this.buf).toString()}toString_number(i){return new String(this.buf).toString()}close(){}}var Wt;(function(L){L[L.ALPHA=0]="ALPHA",L[L.LOWER=1]="LOWER",L[L.MIXED=2]="MIXED",L[L.PUNCT=3]="PUNCT",L[L.ALPHA_SHIFT=4]="ALPHA_SHIFT",L[L.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Wt||(Wt={}));function Bs(){if(typeof window<"u")return window.BigInt||null;if(typeof Mh<"u")return Mh.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let $s;function ki(L){if(typeof $s>"u"&&($s=Bs()),$s===null)throw new Error("BigInt is not supported!");return $s(L)}function ea(){let L=[];L[0]=ki(1);let i=ki(900);L[1]=i;for(let a=2;a<16;a++)L[a]=L[a-1]*i;return L}class ye{static decode(i,a){let l=new X(""),h=j.ISO8859_1;l.enableDecoding(h);let f=1,m=i[f++],x=new vs;for(;f<i[0];){switch(m){case ye.TEXT_COMPACTION_MODE_LATCH:f=ye.textCompaction(i,f,l);break;case ye.BYTE_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH_6:f=ye.byteCompaction(m,i,h,f,l);break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(i[f++]);break;case ye.NUMERIC_COMPACTION_MODE_LATCH:f=ye.numericCompaction(i,f,l);break;case ye.ECI_CHARSET:j.getCharacterSetECIByValue(i[f++]);break;case ye.ECI_GENERAL_PURPOSE:f+=2;break;case ye.ECI_USER_DEFINED:f++;break;case ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:f=ye.decodeMacroBlock(i,f,x);break;case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ye.MACRO_PDF417_TERMINATOR:throw new z;default:f--,f=ye.textCompaction(i,f,l);break}if(f<i.length)m=i[f++];else throw z.getFormatInstance()}if(l.length()===0)throw z.getFormatInstance();let w=new Jt(null,l.toString(),null,a);return w.setOther(x),w}static decodeMacroBlock(i,a,l){if(a+ye.NUMBER_OF_SEQUENCE_CODEWORDS>i[0])throw z.getFormatInstance();let h=new Int32Array(ye.NUMBER_OF_SEQUENCE_CODEWORDS);for(let x=0;x<ye.NUMBER_OF_SEQUENCE_CODEWORDS;x++,a++)h[x]=i[a];l.setSegmentIndex(ee.parseInt(ye.decodeBase900toBase10(h,ye.NUMBER_OF_SEQUENCE_CODEWORDS)));let f=new X;a=ye.textCompaction(i,a,f),l.setFileId(f.toString());let m=-1;for(i[a]===ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(m=a+1);a<i[0];)switch(i[a]){case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(a++,i[a]){case ye.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let x=new X;a=ye.textCompaction(i,a+1,x),l.setFileName(x.toString());break;case ye.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let w=new X;a=ye.textCompaction(i,a+1,w),l.setSender(w.toString());break;case ye.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let C=new X;a=ye.textCompaction(i,a+1,C),l.setAddressee(C.toString());break;case ye.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let R=new X;a=ye.numericCompaction(i,a+1,R),l.setSegmentCount(ee.parseInt(R.toString()));break;case ye.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let P=new X;a=ye.numericCompaction(i,a+1,P),l.setTimestamp(Pa.parseLong(P.toString()));break;case ye.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let B=new X;a=ye.numericCompaction(i,a+1,B),l.setChecksum(ee.parseInt(B.toString()));break;case ye.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let Y=new X;a=ye.numericCompaction(i,a+1,Y),l.setFileSize(Pa.parseLong(Y.toString()));break;default:throw z.getFormatInstance()}break;case ye.MACRO_PDF417_TERMINATOR:a++,l.setLastSegment(!0);break;default:throw z.getFormatInstance()}if(m!==-1){let x=a-m;l.isLastSegment()&&x--,l.setOptionalData(ae.copyOfRange(i,m,m+x))}return a}static textCompaction(i,a,l){let h=new Int32Array((i[0]-a)*2),f=new Int32Array((i[0]-a)*2),m=0,x=!1;for(;a<i[0]&&!x;){let w=i[a++];if(w<ye.TEXT_COMPACTION_MODE_LATCH)h[m]=w/30,h[m+1]=w%30,m+=2;else switch(w){case ye.TEXT_COMPACTION_MODE_LATCH:h[m++]=ye.TEXT_COMPACTION_MODE_LATCH;break;case ye.BYTE_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH_6:case ye.NUMERIC_COMPACTION_MODE_LATCH:case ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ye.MACRO_PDF417_TERMINATOR:a--,x=!0;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h[m]=ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,w=i[a++],f[m]=w,m++;break}}return ye.decodeTextCompaction(h,f,m,l),a}static decodeTextCompaction(i,a,l,h){let f=Wt.ALPHA,m=Wt.ALPHA,x=0;for(;x<l;){let w=i[x],C="";switch(f){case Wt.ALPHA:if(w<26)C=String.fromCharCode(65+w);else switch(w){case 26:C=" ";break;case ye.LL:f=Wt.LOWER;break;case ye.ML:f=Wt.MIXED;break;case ye.PS:m=f,f=Wt.PUNCT_SHIFT;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(a[x]);break;case ye.TEXT_COMPACTION_MODE_LATCH:f=Wt.ALPHA;break}break;case Wt.LOWER:if(w<26)C=String.fromCharCode(97+w);else switch(w){case 26:C=" ";break;case ye.AS:m=f,f=Wt.ALPHA_SHIFT;break;case ye.ML:f=Wt.MIXED;break;case ye.PS:m=f,f=Wt.PUNCT_SHIFT;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(a[x]);break;case ye.TEXT_COMPACTION_MODE_LATCH:f=Wt.ALPHA;break}break;case Wt.MIXED:if(w<ye.PL)C=ye.MIXED_CHARS[w];else switch(w){case ye.PL:f=Wt.PUNCT;break;case 26:C=" ";break;case ye.LL:f=Wt.LOWER;break;case ye.AL:f=Wt.ALPHA;break;case ye.PS:m=f,f=Wt.PUNCT_SHIFT;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(a[x]);break;case ye.TEXT_COMPACTION_MODE_LATCH:f=Wt.ALPHA;break}break;case Wt.PUNCT:if(w<ye.PAL)C=ye.PUNCT_CHARS[w];else switch(w){case ye.PAL:f=Wt.ALPHA;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(a[x]);break;case ye.TEXT_COMPACTION_MODE_LATCH:f=Wt.ALPHA;break}break;case Wt.ALPHA_SHIFT:if(f=m,w<26)C=String.fromCharCode(65+w);else switch(w){case 26:C=" ";break;case ye.TEXT_COMPACTION_MODE_LATCH:f=Wt.ALPHA;break}break;case Wt.PUNCT_SHIFT:if(f=m,w<ye.PAL)C=ye.PUNCT_CHARS[w];else switch(w){case ye.PAL:f=Wt.ALPHA;break;case ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:h.append(a[x]);break;case ye.TEXT_COMPACTION_MODE_LATCH:f=Wt.ALPHA;break}break}C!==""&&h.append(C),x++}}static byteCompaction(i,a,l,h,f){let m=new ka,x=0,w=0,C=!1;switch(i){case ye.BYTE_COMPACTION_MODE_LATCH:let R=new Int32Array(6),P=a[h++];for(;h<a[0]&&!C;)switch(R[x++]=P,w=900*w+P,P=a[h++],P){case ye.TEXT_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH:case ye.NUMERIC_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH_6:case ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ye.MACRO_PDF417_TERMINATOR:h--,C=!0;break;default:if(x%5===0&&x>0){for(let B=0;B<6;++B)m.write(Number(ki(w)>>ki(8*(5-B))));w=0,x=0}break}h===a[0]&&P<ye.TEXT_COMPACTION_MODE_LATCH&&(R[x++]=P);for(let B=0;B<x;B++)m.write(R[B]);break;case ye.BYTE_COMPACTION_MODE_LATCH_6:for(;h<a[0]&&!C;){let B=a[h++];if(B<ye.TEXT_COMPACTION_MODE_LATCH)x++,w=900*w+B;else switch(B){case ye.TEXT_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH:case ye.NUMERIC_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH_6:case ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ye.MACRO_PDF417_TERMINATOR:h--,C=!0;break}if(x%5===0&&x>0){for(let Y=0;Y<6;++Y)m.write(Number(ki(w)>>ki(8*(5-Y))));w=0,x=0}}break}return f.append(Q.decode(m.toByteArray(),l)),h}static numericCompaction(i,a,l){let h=0,f=!1,m=new Int32Array(ye.MAX_NUMERIC_CODEWORDS);for(;a<i[0]&&!f;){let x=i[a++];if(a===i[0]&&(f=!0),x<ye.TEXT_COMPACTION_MODE_LATCH)m[h]=x,h++;else switch(x){case ye.TEXT_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH:case ye.BYTE_COMPACTION_MODE_LATCH_6:case ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ye.MACRO_PDF417_TERMINATOR:a--,f=!0;break}(h%ye.MAX_NUMERIC_CODEWORDS===0||x===ye.NUMERIC_COMPACTION_MODE_LATCH||f)&&h>0&&(l.append(ye.decodeBase900toBase10(m,h)),h=0)}return a}static decodeBase900toBase10(i,a){let l=ki(0);for(let f=0;f<a;f++)l+=ye.EXP900[a-f-1]*ki(i[f]);let h=l.toString();if(h.charAt(0)!=="1")throw new z;return h.substring(1)}}ye.TEXT_COMPACTION_MODE_LATCH=900,ye.BYTE_COMPACTION_MODE_LATCH=901,ye.NUMERIC_COMPACTION_MODE_LATCH=902,ye.BYTE_COMPACTION_MODE_LATCH_6=924,ye.ECI_USER_DEFINED=925,ye.ECI_GENERAL_PURPOSE=926,ye.ECI_CHARSET=927,ye.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ye.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ye.MACRO_PDF417_TERMINATOR=922,ye.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ye.MAX_NUMERIC_CODEWORDS=15,ye.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ye.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ye.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ye.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ye.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ye.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ye.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ye.PL=25,ye.LL=27,ye.AS=27,ye.ML=28,ye.AL=28,ye.PS=29,ye.PAL=29,ye.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ye.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ye.EXP900=Bs()?ea():[],ye.NUMBER_OF_SEQUENCE_CODEWORDS=2;class mt{constructor(){}static decode(i,a,l,h,f,m,x){let w=new Pi(i,a,l,h,f),C=null,R=null,P;for(let te=!0;;te=!1){if(a!=null&&(C=mt.getRowIndicatorColumn(i,w,a,!0,m,x)),h!=null&&(R=mt.getRowIndicatorColumn(i,w,h,!1,m,x)),P=mt.merge(C,R),P==null)throw de.getNotFoundInstance();let ne=P.getBoundingBox();if(te&&ne!=null&&(ne.getMinY()<w.getMinY()||ne.getMaxY()>w.getMaxY()))w=ne;else break}P.setBoundingBox(w);let B=P.getBarcodeColumnCount()+1;P.setDetectionResultColumn(0,C),P.setDetectionResultColumn(B,R);let Y=C!=null;for(let te=1;te<=B;te++){let ne=Y?te:B-te;if(P.getDetectionResultColumn(ne)!==void 0)continue;let ue;ne===0||ne===B?ue=new wi(w,ne===0):ue=new Bi(w),P.setDetectionResultColumn(ne,ue);let Ee=-1,Le=Ee;for(let Oe=w.getMinY();Oe<=w.getMaxY();Oe++){if(Ee=mt.getStartColumn(P,ne,Oe,Y),Ee<0||Ee>w.getMaxX()){if(Le===-1)continue;Ee=Le}let Ne=mt.detectCodeword(i,w.getMinX(),w.getMaxX(),Y,Ee,Oe,m,x);Ne!=null&&(ue.setCodeword(Oe,Ne),Le=Ee,m=Math.min(m,Ne.getWidth()),x=Math.max(x,Ne.getWidth()))}}return mt.createDecoderResult(P)}static merge(i,a){if(i==null&&a==null)return null;let l=mt.getBarcodeMetadata(i,a);if(l==null)return null;let h=Pi.merge(mt.adjustBoundingBox(i),mt.adjustBoundingBox(a));return new Gn(l,h)}static adjustBoundingBox(i){if(i==null)return null;let a=i.getRowHeights();if(a==null)return null;let l=mt.getMax(a),h=0;for(let x of a)if(h+=l-x,x>0)break;let f=i.getCodewords();for(let x=0;h>0&&f[x]==null;x++)h--;let m=0;for(let x=a.length-1;x>=0&&(m+=l-a[x],!(a[x]>0));x--);for(let x=f.length-1;m>0&&f[x]==null;x--)m--;return i.getBoundingBox().addMissingRows(h,m,i.isLeft())}static getMax(i){let a=-1;for(let l of i)a=Math.max(a,l);return a}static getBarcodeMetadata(i,a){let l;if(i==null||(l=i.getBarcodeMetadata())==null)return a==null?null:a.getBarcodeMetadata();let h;return a==null||(h=a.getBarcodeMetadata())==null?l:l.getColumnCount()!==h.getColumnCount()&&l.getErrorCorrectionLevel()!==h.getErrorCorrectionLevel()&&l.getRowCount()!==h.getRowCount()?null:l}static getRowIndicatorColumn(i,a,l,h,f,m){let x=new wi(a,h);for(let w=0;w<2;w++){let C=w===0?1:-1,R=Math.trunc(Math.trunc(l.getX()));for(let P=Math.trunc(Math.trunc(l.getY()));P<=a.getMaxY()&&P>=a.getMinY();P+=C){let B=mt.detectCodeword(i,0,i.getWidth(),h,R,P,f,m);B!=null&&(x.setCodeword(P,B),h?R=B.getStartX():R=B.getEndX())}}return x}static adjustCodewordCount(i,a){let l=a[0][1],h=l.getValue(),f=i.getBarcodeColumnCount()*i.getBarcodeRowCount()-mt.getNumberOfECCodeWords(i.getBarcodeECLevel());if(h.length===0){if(f<1||f>$e.MAX_CODEWORDS_IN_BARCODE)throw de.getNotFoundInstance();l.setValue(f)}else h[0]!==f&&l.setValue(f)}static createDecoderResult(i){let a=mt.createBarcodeMatrix(i);mt.adjustCodewordCount(i,a);let l=new Array,h=new Int32Array(i.getBarcodeRowCount()*i.getBarcodeColumnCount()),f=[],m=new Array;for(let w=0;w<i.getBarcodeRowCount();w++)for(let C=0;C<i.getBarcodeColumnCount();C++){let R=a[w][C+1].getValue(),P=w*i.getBarcodeColumnCount()+C;R.length===0?l.push(P):R.length===1?h[P]=R[0]:(m.push(P),f.push(R))}let x=new Array(f.length);for(let w=0;w<x.length;w++)x[w]=f[w];return mt.createDecoderResultFromAmbiguousValues(i.getBarcodeECLevel(),h,$e.toIntArray(l),$e.toIntArray(m),x)}static createDecoderResultFromAmbiguousValues(i,a,l,h,f){let m=new Int32Array(h.length),x=100;for(;x-- >0;){for(let w=0;w<m.length;w++)a[h[w]]=f[w][m[w]];try{return mt.decodeCodewords(a,i,l)}catch(w){if(!(w instanceof V))throw w}if(m.length===0)throw V.getChecksumInstance();for(let w=0;w<m.length;w++)if(m[w]<f[w].length-1){m[w]++;break}else if(m[w]=0,w===m.length-1)throw V.getChecksumInstance()}throw V.getChecksumInstance()}static createBarcodeMatrix(i){let a=Array.from({length:i.getBarcodeRowCount()},()=>new Array(i.getBarcodeColumnCount()+2));for(let h=0;h<a.length;h++)for(let f=0;f<a[h].length;f++)a[h][f]=new ci;let l=0;for(let h of i.getDetectionResultColumns()){if(h!=null){for(let f of h.getCodewords())if(f!=null){let m=f.getRowNumber();if(m>=0){if(m>=a.length)continue;a[m][l].setValue(f.getValue())}}}l++}return a}static isValidBarcodeColumn(i,a){return a>=0&&a<=i.getBarcodeColumnCount()+1}static getStartColumn(i,a,l,h){let f=h?1:-1,m=null;if(mt.isValidBarcodeColumn(i,a-f)&&(m=i.getDetectionResultColumn(a-f).getCodeword(l)),m!=null)return h?m.getEndX():m.getStartX();if(m=i.getDetectionResultColumn(a).getCodewordNearby(l),m!=null)return h?m.getStartX():m.getEndX();if(mt.isValidBarcodeColumn(i,a-f)&&(m=i.getDetectionResultColumn(a-f).getCodewordNearby(l)),m!=null)return h?m.getEndX():m.getStartX();let x=0;for(;mt.isValidBarcodeColumn(i,a-f);){a-=f;for(let w of i.getDetectionResultColumn(a).getCodewords())if(w!=null)return(h?w.getEndX():w.getStartX())+f*x*(w.getEndX()-w.getStartX());x++}return h?i.getBoundingBox().getMinX():i.getBoundingBox().getMaxX()}static detectCodeword(i,a,l,h,f,m,x,w){f=mt.adjustCodewordStartColumn(i,a,l,h,f,m);let C=mt.getModuleBitCount(i,a,l,h,f,m);if(C==null)return null;let R,P=Qe.sum(C);if(h)R=f+P;else{for(let te=0;te<C.length/2;te++){let ne=C[te];C[te]=C[C.length-1-te],C[C.length-1-te]=ne}R=f,f=R-P}if(!mt.checkCodewordSkew(P,x,w))return null;let B=Rn.getDecodedValue(C),Y=$e.getCodeword(B);return Y===-1?null:new ui(f,R,mt.getCodewordBucketNumber(B),Y)}static getModuleBitCount(i,a,l,h,f,m){let x=f,w=new Int32Array(8),C=0,R=h?1:-1,P=h;for(;(h?x<l:x>=a)&&C<w.length;)i.get(x,m)===P?(w[C]++,x+=R):(C++,P=!P);return C===w.length||x===(h?l:a)&&C===w.length-1?w:null}static getNumberOfECCodeWords(i){return 2<<i}static adjustCodewordStartColumn(i,a,l,h,f,m){let x=f,w=h?-1:1;for(let C=0;C<2;C++){for(;(h?x>=a:x<l)&&h===i.get(x,m);){if(Math.abs(f-x)>mt.CODEWORD_SKEW_SIZE)return f;x+=w}w=-w,h=!h}return x}static checkCodewordSkew(i,a,l){return a-mt.CODEWORD_SKEW_SIZE<=i&&i<=l+mt.CODEWORD_SKEW_SIZE}static decodeCodewords(i,a,l){if(i.length===0)throw z.getFormatInstance();let h=1<<a+1,f=mt.correctErrors(i,l,h);mt.verifyCodewordCount(i,h);let m=ye.decode(i,""+a);return m.setErrorsCorrected(f),m.setErasures(l.length),m}static correctErrors(i,a,l){if(a!=null&&a.length>l/2+mt.MAX_ERRORS||l<0||l>mt.MAX_EC_CODEWORDS)throw V.getChecksumInstance();return mt.errorCorrection.decode(i,l,a)}static verifyCodewordCount(i,a){if(i.length<4)throw z.getFormatInstance();let l=i[0];if(l>i.length)throw z.getFormatInstance();if(l===0)if(a<i.length)i[0]=i.length-a;else throw z.getFormatInstance()}static getBitCountForCodeword(i){let a=new Int32Array(8),l=0,h=a.length-1;for(;!((i&1)!==l&&(l=i&1,h--,h<0));)a[h]++,i>>=1;return a}static getCodewordBucketNumber(i){return i instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(i):this.getCodewordBucketNumber_number(i)}static getCodewordBucketNumber_number(i){return mt.getCodewordBucketNumber(mt.getBitCountForCodeword(i))}static getCodewordBucketNumber_Int32Array(i){return(i[0]-i[2]+i[4]-i[6]+9)%9}static toString(i){let a=new bs;for(let l=0;l<i.length;l++){a.format("Row %2d: ",l);for(let h=0;h<i[l].length;h++){let f=i[l][h];f.getValue().length===0?a.format("        ",null):a.format("%4d(%2d)",f.getValue()[0],f.getConfidence(f.getValue()[0]))}a.format("%n")}return a.toString()}}mt.CODEWORD_SKEW_SIZE=2,mt.MAX_ERRORS=3,mt.MAX_EC_CODEWORDS=512,mt.errorCorrection=new Li;class Un{decode(i,a=null){let l=Un.decode(i,a,!1);if(l==null||l.length===0||l[0]==null)throw de.getNotFoundInstance();return l[0]}decodeMultiple(i,a=null){try{return Un.decode(i,a,!0)}catch(l){throw l instanceof z||l instanceof V?de.getNotFoundInstance():l}}static decode(i,a,l){const h=new Array,f=it.detectMultiple(i,a,l);for(const m of f.getPoints()){const x=mt.decode(f.getBits(),m[4],m[5],m[6],m[7],Un.getMinCodewordWidth(m),Un.getMaxCodewordWidth(m)),w=new ke(x.getText(),x.getRawBytes(),void 0,m,Me.PDF_417);w.putMetadata(Ct.ERROR_CORRECTION_LEVEL,x.getECLevel());const C=x.getOther();C!=null&&w.putMetadata(Ct.PDF417_EXTRA_METADATA,C),h.push(w)}return h.map(m=>m)}static getMaxWidth(i,a){return i==null||a==null?0:Math.trunc(Math.abs(i.getX()-a.getX()))}static getMinWidth(i,a){return i==null||a==null?ee.MAX_VALUE:Math.trunc(Math.abs(i.getX()-a.getX()))}static getMaxCodewordWidth(i){return Math.floor(Math.max(Math.max(Un.getMaxWidth(i[0],i[4]),Un.getMaxWidth(i[6],i[2])*$e.MODULES_IN_CODEWORD/$e.MODULES_IN_STOP_PATTERN),Math.max(Un.getMaxWidth(i[1],i[5]),Un.getMaxWidth(i[7],i[3])*$e.MODULES_IN_CODEWORD/$e.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(i){return Math.floor(Math.min(Math.min(Un.getMinWidth(i[0],i[4]),Un.getMinWidth(i[6],i[2])*$e.MODULES_IN_CODEWORD/$e.MODULES_IN_STOP_PATTERN),Math.min(Un.getMinWidth(i[1],i[5]),Un.getMinWidth(i[7],i[3])*$e.MODULES_IN_CODEWORD/$e.MODULES_IN_STOP_PATTERN)))}reset(){}}class ta extends _{}ta.kind="ReaderException";class Io{constructor(i,a){this.verbose=i===!0,a&&this.setHints(a)}decode(i,a){return a&&this.setHints(a),this.decodeInternal(i)}decodeWithState(i){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(i)}setHints(i){this.hints=i;const a=!o(i)&&i.get(De.TRY_HARDER)===!0,l=o(i)?null:i.get(De.POSSIBLE_FORMATS),h=new Array;if(!o(l)){const f=l.some(m=>m===Me.UPC_A||m===Me.UPC_E||m===Me.EAN_13||m===Me.EAN_8||m===Me.CODABAR||m===Me.CODE_39||m===Me.CODE_93||m===Me.CODE_128||m===Me.ITF||m===Me.RSS_14||m===Me.RSS_EXPANDED);f&&!a&&h.push(new St(i,this.verbose)),l.includes(Me.QR_CODE)&&h.push(new ei),l.includes(Me.DATA_MATRIX)&&h.push(new Qr),l.includes(Me.AZTEC)&&h.push(new Wi),l.includes(Me.PDF_417)&&h.push(new Un),f&&a&&h.push(new St(i,this.verbose))}h.length===0&&(a||h.push(new St(i,this.verbose)),h.push(new ei),h.push(new Qr),h.push(new Wi),h.push(new Un),a&&h.push(new St(i,this.verbose))),this.readers=h}reset(){if(this.readers!==null)for(const i of this.readers)i.reset()}decodeInternal(i){if(this.readers===null)throw new ta("No readers where selected, nothing can be read.");for(const a of this.readers)try{return a.decode(i,this.hints)}catch(l){if(l instanceof ta)continue}throw new de("No MultiFormat Readers were able to detect the code.")}}class ts extends Be{constructor(i=null,a=500){const l=new Io;l.setHints(i),super(l,a)}decodeBitmap(i){return this.reader.decodeWithState(i)}}class al extends Be{constructor(i=500){super(new Un,i)}}class ol extends Be{constructor(i=500){super(new ei,i)}}var Ua;(function(L){L[L.ERROR_CORRECTION=0]="ERROR_CORRECTION",L[L.CHARACTER_SET=1]="CHARACTER_SET",L[L.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",L[L.MIN_SIZE=3]="MIN_SIZE",L[L.MAX_SIZE=4]="MAX_SIZE",L[L.MARGIN=5]="MARGIN",L[L.PDF417_COMPACT=6]="PDF417_COMPACT",L[L.PDF417_COMPACTION=7]="PDF417_COMPACTION",L[L.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",L[L.AZTEC_LAYERS=9]="AZTEC_LAYERS",L[L.QR_VERSION=10]="QR_VERSION"})(Ua||(Ua={}));var Vn=Ua;class ns{constructor(i){this.field=i,this.cachedGenerators=[],this.cachedGenerators.push(new an(i,Int32Array.from([1])))}buildGenerator(i){const a=this.cachedGenerators;if(i>=a.length){let l=a[a.length-1];const h=this.field;for(let f=a.length;f<=i;f++){const m=l.multiply(new an(h,Int32Array.from([1,h.exp(f-1+h.getGeneratorBase())])));a.push(m),l=m}}return a[i]}encode(i,a){if(a===0)throw new I("No error correction bytes");const l=i.length-a;if(l<=0)throw new I("No data bytes provided");const h=this.buildGenerator(a),f=new Int32Array(l);W.arraycopy(i,0,f,0,l);let m=new an(this.field,f);m=m.multiplyByMonomial(a,1);const w=m.divide(h)[1].getCoefficients(),C=a-w.length;for(let R=0;R<C;R++)i[l+R]=0;W.arraycopy(w,0,i,l+C,w.length)}}class Mt{constructor(){}static applyMaskPenaltyRule1(i){return Mt.applyMaskPenaltyRule1Internal(i,!0)+Mt.applyMaskPenaltyRule1Internal(i,!1)}static applyMaskPenaltyRule2(i){let a=0;const l=i.getArray(),h=i.getWidth(),f=i.getHeight();for(let m=0;m<f-1;m++){const x=l[m];for(let w=0;w<h-1;w++){const C=x[w];C===x[w+1]&&C===l[m+1][w]&&C===l[m+1][w+1]&&a++}}return Mt.N2*a}static applyMaskPenaltyRule3(i){let a=0;const l=i.getArray(),h=i.getWidth(),f=i.getHeight();for(let m=0;m<f;m++)for(let x=0;x<h;x++){const w=l[m];x+6<h&&w[x]===1&&w[x+1]===0&&w[x+2]===1&&w[x+3]===1&&w[x+4]===1&&w[x+5]===0&&w[x+6]===1&&(Mt.isWhiteHorizontal(w,x-4,x)||Mt.isWhiteHorizontal(w,x+7,x+11))&&a++,m+6<f&&l[m][x]===1&&l[m+1][x]===0&&l[m+2][x]===1&&l[m+3][x]===1&&l[m+4][x]===1&&l[m+5][x]===0&&l[m+6][x]===1&&(Mt.isWhiteVertical(l,x,m-4,m)||Mt.isWhiteVertical(l,x,m+7,m+11))&&a++}return a*Mt.N3}static isWhiteHorizontal(i,a,l){a=Math.max(a,0),l=Math.min(l,i.length);for(let h=a;h<l;h++)if(i[h]===1)return!1;return!0}static isWhiteVertical(i,a,l,h){l=Math.max(l,0),h=Math.min(h,i.length);for(let f=l;f<h;f++)if(i[f][a]===1)return!1;return!0}static applyMaskPenaltyRule4(i){let a=0;const l=i.getArray(),h=i.getWidth(),f=i.getHeight();for(let w=0;w<f;w++){const C=l[w];for(let R=0;R<h;R++)C[R]===1&&a++}const m=i.getHeight()*i.getWidth();return Math.floor(Math.abs(a*2-m)*10/m)*Mt.N4}static getDataMaskBit(i,a,l){let h,f;switch(i){case 0:h=l+a&1;break;case 1:h=l&1;break;case 2:h=a%3;break;case 3:h=(l+a)%3;break;case 4:h=Math.floor(l/2)+Math.floor(a/3)&1;break;case 5:f=l*a,h=(f&1)+f%3;break;case 6:f=l*a,h=(f&1)+f%3&1;break;case 7:f=l*a,h=f%3+(l+a&1)&1;break;default:throw new I("Invalid mask pattern: "+i)}return h===0}static applyMaskPenaltyRule1Internal(i,a){let l=0;const h=a?i.getHeight():i.getWidth(),f=a?i.getWidth():i.getHeight(),m=i.getArray();for(let x=0;x<h;x++){let w=0,C=-1;for(let R=0;R<f;R++){const P=a?m[x][R]:m[R][x];P===C?w++:(w>=5&&(l+=Mt.N1+(w-5)),w=1,C=P)}w>=5&&(l+=Mt.N1+(w-5))}return l}}Mt.N1=3,Mt.N2=3,Mt.N3=40,Mt.N4=10;class na{constructor(i,a){this.width=i,this.height=a;const l=new Array(a);for(let h=0;h!==a;h++)l[h]=new Uint8Array(i);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(i,a){return this.bytes[a][i]}getArray(){return this.bytes}setNumber(i,a,l){this.bytes[a][i]=l}setBoolean(i,a,l){this.bytes[a][i]=l?1:0}clear(i){for(const a of this.bytes)ae.fill(a,i)}equals(i){if(!(i instanceof na))return!1;const a=i;if(this.width!==a.width||this.height!==a.height)return!1;for(let l=0,h=this.height;l<h;++l){const f=this.bytes[l],m=a.bytes[l];for(let x=0,w=this.width;x<w;++x)if(f[x]!==m[x])return!1}return!0}toString(){const i=new X;for(let a=0,l=this.height;a<l;++a){const h=this.bytes[a];for(let f=0,m=this.width;f<m;++f)switch(h[f]){case 0:i.append(" 0");break;case 1:i.append(" 1");break;default:i.append("  ");break}i.append(`
`)}return i.toString()}}class rs{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const i=new X;return i.append(`<<
`),i.append(" mode: "),i.append(this.mode?this.mode.toString():"null"),i.append(`
 ecLevel: `),i.append(this.ecLevel?this.ecLevel.toString():"null"),i.append(`
 version: `),i.append(this.version?this.version.toString():"null"),i.append(`
 maskPattern: `),i.append(this.maskPattern.toString()),this.matrix?(i.append(`
 matrix:
`),i.append(this.matrix.toString())):i.append(`
 matrix: null
`),i.append(`>>
`),i.toString()}setMode(i){this.mode=i}setECLevel(i){this.ecLevel=i}setVersion(i){this.version=i}setMaskPattern(i){this.maskPattern=i}setMatrix(i){this.matrix=i}static isValidMaskPattern(i){return i>=0&&i<rs.NUM_MASK_PATTERNS}}rs.NUM_MASK_PATTERNS=8;class Lt extends _{}Lt.kind="WriterException";class p{constructor(){}static clearMatrix(i){i.clear(255)}static buildMatrix(i,a,l,h,f){p.clearMatrix(f),p.embedBasicPatterns(l,f),p.embedTypeInfo(a,h,f),p.maybeEmbedVersionInfo(l,f),p.embedDataBits(i,h,f)}static embedBasicPatterns(i,a){p.embedPositionDetectionPatternsAndSeparators(a),p.embedDarkDotAtLeftBottomCorner(a),p.maybeEmbedPositionAdjustmentPatterns(i,a),p.embedTimingPatterns(a)}static embedTypeInfo(i,a,l){const h=new fe;p.makeTypeInfoBits(i,a,h);for(let f=0,m=h.getSize();f<m;++f){const x=h.get(h.getSize()-1-f),w=p.TYPE_INFO_COORDINATES[f],C=w[0],R=w[1];if(l.setBoolean(C,R,x),f<8){const P=l.getWidth()-f-1;l.setBoolean(P,8,x)}else{const B=l.getHeight()-7+(f-8);l.setBoolean(8,B,x)}}}static maybeEmbedVersionInfo(i,a){if(i.getVersionNumber()<7)return;const l=new fe;p.makeVersionInfoBits(i,l);let h=17;for(let f=0;f<6;++f)for(let m=0;m<3;++m){const x=l.get(h);h--,a.setBoolean(f,a.getHeight()-11+m,x),a.setBoolean(a.getHeight()-11+m,f,x)}}static embedDataBits(i,a,l){let h=0,f=-1,m=l.getWidth()-1,x=l.getHeight()-1;for(;m>0;){for(m===6&&(m-=1);x>=0&&x<l.getHeight();){for(let w=0;w<2;++w){const C=m-w;if(!p.isEmpty(l.get(C,x)))continue;let R;h<i.getSize()?(R=i.get(h),++h):R=!1,a!==255&&Mt.getDataMaskBit(a,C,x)&&(R=!R),l.setBoolean(C,x,R)}x+=f}f=-f,x+=f,m-=2}if(h!==i.getSize())throw new Lt("Not all bits consumed: "+h+"/"+i.getSize())}static findMSBSet(i){return 32-ee.numberOfLeadingZeros(i)}static calculateBCHCode(i,a){if(a===0)throw new I("0 polynomial");const l=p.findMSBSet(a);for(i<<=l-1;p.findMSBSet(i)>=l;)i^=a<<p.findMSBSet(i)-l;return i}static makeTypeInfoBits(i,a,l){if(!rs.isValidMaskPattern(a))throw new Lt("Invalid mask pattern");const h=i.getBits()<<3|a;l.appendBits(h,5);const f=p.calculateBCHCode(h,p.TYPE_INFO_POLY);l.appendBits(f,10);const m=new fe;if(m.appendBits(p.TYPE_INFO_MASK_PATTERN,15),l.xor(m),l.getSize()!==15)throw new Lt("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(i,a){a.appendBits(i.getVersionNumber(),6);const l=p.calculateBCHCode(i.getVersionNumber(),p.VERSION_INFO_POLY);if(a.appendBits(l,12),a.getSize()!==18)throw new Lt("should not happen but we got: "+a.getSize())}static isEmpty(i){return i===255}static embedTimingPatterns(i){for(let a=8;a<i.getWidth()-8;++a){const l=(a+1)%2;p.isEmpty(i.get(a,6))&&i.setNumber(a,6,l),p.isEmpty(i.get(6,a))&&i.setNumber(6,a,l)}}static embedDarkDotAtLeftBottomCorner(i){if(i.get(8,i.getHeight()-8)===0)throw new Lt;i.setNumber(8,i.getHeight()-8,1)}static embedHorizontalSeparationPattern(i,a,l){for(let h=0;h<8;++h){if(!p.isEmpty(l.get(i+h,a)))throw new Lt;l.setNumber(i+h,a,0)}}static embedVerticalSeparationPattern(i,a,l){for(let h=0;h<7;++h){if(!p.isEmpty(l.get(i,a+h)))throw new Lt;l.setNumber(i,a+h,0)}}static embedPositionAdjustmentPattern(i,a,l){for(let h=0;h<5;++h){const f=p.POSITION_ADJUSTMENT_PATTERN[h];for(let m=0;m<5;++m)l.setNumber(i+m,a+h,f[m])}}static embedPositionDetectionPattern(i,a,l){for(let h=0;h<7;++h){const f=p.POSITION_DETECTION_PATTERN[h];for(let m=0;m<7;++m)l.setNumber(i+m,a+h,f[m])}}static embedPositionDetectionPatternsAndSeparators(i){const a=p.POSITION_DETECTION_PATTERN[0].length;p.embedPositionDetectionPattern(0,0,i),p.embedPositionDetectionPattern(i.getWidth()-a,0,i),p.embedPositionDetectionPattern(0,i.getWidth()-a,i);const l=8;p.embedHorizontalSeparationPattern(0,l-1,i),p.embedHorizontalSeparationPattern(i.getWidth()-l,l-1,i),p.embedHorizontalSeparationPattern(0,i.getWidth()-l,i);const h=7;p.embedVerticalSeparationPattern(h,0,i),p.embedVerticalSeparationPattern(i.getHeight()-h-1,0,i),p.embedVerticalSeparationPattern(h,i.getHeight()-h,i)}static maybeEmbedPositionAdjustmentPatterns(i,a){if(i.getVersionNumber()<2)return;const l=i.getVersionNumber()-1,h=p.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let f=0,m=h.length;f!==m;f++){const x=h[f];if(x>=0)for(let w=0;w!==m;w++){const C=h[w];C>=0&&p.isEmpty(a.get(C,x))&&p.embedPositionAdjustmentPattern(C-2,x-2,a)}}}}p.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),p.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),p.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),p.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),p.VERSION_INFO_POLY=7973,p.TYPE_INFO_POLY=1335,p.TYPE_INFO_MASK_PATTERN=21522;class N{constructor(i,a){this.dataBytes=i,this.errorCorrectionBytes=a}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class D{constructor(){}static calculateMaskPenalty(i){return Mt.applyMaskPenaltyRule1(i)+Mt.applyMaskPenaltyRule2(i)+Mt.applyMaskPenaltyRule3(i)+Mt.applyMaskPenaltyRule4(i)}static encode(i,a,l=null){let h=D.DEFAULT_BYTE_MODE_ENCODING;const f=l!==null&&l.get(Vn.CHARACTER_SET)!==void 0;f&&(h=l.get(Vn.CHARACTER_SET).toString());const m=this.chooseMode(i,h),x=new fe;if(m===Ze.BYTE&&(f||D.DEFAULT_BYTE_MODE_ENCODING!==h)){const Oe=j.getCharacterSetECIByName(h);Oe!==void 0&&this.appendECI(Oe,x)}this.appendModeInfo(m,x);const w=new fe;this.appendBytes(i,m,w,h);let C;if(l!==null&&l.get(Vn.QR_VERSION)!==void 0){const Oe=Number.parseInt(l.get(Vn.QR_VERSION).toString(),10);C=qe.getVersionForNumber(Oe);const Ne=this.calculateBitsNeeded(m,x,w,C);if(!this.willFit(Ne,C,a))throw new Lt("Data too big for requested version")}else C=this.recommendVersion(a,m,x,w);const R=new fe;R.appendBitArray(x);const P=m===Ze.BYTE?w.getSizeInBytes():i.length;this.appendLengthInfo(P,C,m,R),R.appendBitArray(w);const B=C.getECBlocksForLevel(a),Y=C.getTotalCodewords()-B.getTotalECCodewords();this.terminateBits(Y,R);const te=this.interleaveWithECBytes(R,C.getTotalCodewords(),Y,B.getNumBlocks()),ne=new rs;ne.setECLevel(a),ne.setMode(m),ne.setVersion(C);const ue=C.getDimensionForVersion(),Ee=new na(ue,ue),Le=this.chooseMaskPattern(te,a,C,Ee);return ne.setMaskPattern(Le),p.buildMatrix(te,a,C,Le,Ee),ne.setMatrix(Ee),ne}static recommendVersion(i,a,l,h){const f=this.calculateBitsNeeded(a,l,h,qe.getVersionForNumber(1)),m=this.chooseVersion(f,i),x=this.calculateBitsNeeded(a,l,h,m);return this.chooseVersion(x,i)}static calculateBitsNeeded(i,a,l,h){return a.getSize()+i.getCharacterCountBits(h)+l.getSize()}static getAlphanumericCode(i){return i<D.ALPHANUMERIC_TABLE.length?D.ALPHANUMERIC_TABLE[i]:-1}static chooseMode(i,a=null){if(j.SJIS.getName()===a&&this.isOnlyDoubleByteKanji(i))return Ze.KANJI;let l=!1,h=!1;for(let f=0,m=i.length;f<m;++f){const x=i.charAt(f);if(D.isDigit(x))l=!0;else if(this.getAlphanumericCode(x.charCodeAt(0))!==-1)h=!0;else return Ze.BYTE}return h?Ze.ALPHANUMERIC:l?Ze.NUMERIC:Ze.BYTE}static isOnlyDoubleByteKanji(i){let a;try{a=Q.encode(i,j.SJIS)}catch{return!1}const l=a.length;if(l%2!==0)return!1;for(let h=0;h<l;h+=2){const f=a[h]&255;if((f<129||f>159)&&(f<224||f>235))return!1}return!0}static chooseMaskPattern(i,a,l,h){let f=Number.MAX_SAFE_INTEGER,m=-1;for(let x=0;x<rs.NUM_MASK_PATTERNS;x++){p.buildMatrix(i,a,l,x,h);let w=this.calculateMaskPenalty(h);w<f&&(f=w,m=x)}return m}static chooseVersion(i,a){for(let l=1;l<=40;l++){const h=qe.getVersionForNumber(l);if(D.willFit(i,h,a))return h}throw new Lt("Data too big")}static willFit(i,a,l){const h=a.getTotalCodewords(),m=a.getECBlocksForLevel(l).getTotalECCodewords(),x=h-m,w=(i+7)/8;return x>=w}static terminateBits(i,a){const l=i*8;if(a.getSize()>l)throw new Lt("data bits cannot fit in the QR Code"+a.getSize()+" > "+l);for(let m=0;m<4&&a.getSize()<l;++m)a.appendBit(!1);const h=a.getSize()&7;if(h>0)for(let m=h;m<8;m++)a.appendBit(!1);const f=i-a.getSizeInBytes();for(let m=0;m<f;++m)a.appendBits((m&1)===0?236:17,8);if(a.getSize()!==l)throw new Lt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(i,a,l,h,f,m){if(h>=l)throw new Lt("Block ID too large");const x=i%l,w=l-x,C=Math.floor(i/l),R=C+1,P=Math.floor(a/l),B=P+1,Y=C-P,te=R-B;if(Y!==te)throw new Lt("EC bytes mismatch");if(l!==w+x)throw new Lt("RS blocks mismatch");if(i!==(P+Y)*w+(B+te)*x)throw new Lt("Total bytes mismatch");h<w?(f[0]=P,m[0]=Y):(f[0]=B,m[0]=te)}static interleaveWithECBytes(i,a,l,h){if(i.getSizeInBytes()!==l)throw new Lt("Number of bits and data bytes does not match");let f=0,m=0,x=0;const w=new Array;for(let R=0;R<h;++R){const P=new Int32Array(1),B=new Int32Array(1);D.getNumDataBytesAndNumECBytesForBlockID(a,l,h,R,P,B);const Y=P[0],te=new Uint8Array(Y);i.toBytes(8*f,te,0,Y);const ne=D.generateECBytes(te,B[0]);w.push(new N(te,ne)),m=Math.max(m,Y),x=Math.max(x,ne.length),f+=P[0]}if(l!==f)throw new Lt("Data bytes does not match offset");const C=new fe;for(let R=0;R<m;++R)for(const P of w){const B=P.getDataBytes();R<B.length&&C.appendBits(B[R],8)}for(let R=0;R<x;++R)for(const P of w){const B=P.getErrorCorrectionBytes();R<B.length&&C.appendBits(B[R],8)}if(a!==C.getSizeInBytes())throw new Lt("Interleaving error: "+a+" and "+C.getSizeInBytes()+" differ.");return C}static generateECBytes(i,a){const l=i.length,h=new Int32Array(l+a);for(let m=0;m<l;m++)h[m]=i[m]&255;new ns(wt.QR_CODE_FIELD_256).encode(h,a);const f=new Uint8Array(a);for(let m=0;m<a;m++)f[m]=h[l+m];return f}static appendModeInfo(i,a){a.appendBits(i.getBits(),4)}static appendLengthInfo(i,a,l,h){const f=l.getCharacterCountBits(a);if(i>=1<<f)throw new Lt(i+" is bigger than "+((1<<f)-1));h.appendBits(i,f)}static appendBytes(i,a,l,h){switch(a){case Ze.NUMERIC:D.appendNumericBytes(i,l);break;case Ze.ALPHANUMERIC:D.appendAlphanumericBytes(i,l);break;case Ze.BYTE:D.append8BitBytes(i,l,h);break;case Ze.KANJI:D.appendKanjiBytes(i,l);break;default:throw new Lt("Invalid mode: "+a)}}static getDigit(i){return i.charCodeAt(0)-48}static isDigit(i){const a=D.getDigit(i);return a>=0&&a<=9}static appendNumericBytes(i,a){const l=i.length;let h=0;for(;h<l;){const f=D.getDigit(i.charAt(h));if(h+2<l){const m=D.getDigit(i.charAt(h+1)),x=D.getDigit(i.charAt(h+2));a.appendBits(f*100+m*10+x,10),h+=3}else if(h+1<l){const m=D.getDigit(i.charAt(h+1));a.appendBits(f*10+m,7),h+=2}else a.appendBits(f,4),h++}}static appendAlphanumericBytes(i,a){const l=i.length;let h=0;for(;h<l;){const f=D.getAlphanumericCode(i.charCodeAt(h));if(f===-1)throw new Lt;if(h+1<l){const m=D.getAlphanumericCode(i.charCodeAt(h+1));if(m===-1)throw new Lt;a.appendBits(f*45+m,11),h+=2}else a.appendBits(f,6),h++}}static append8BitBytes(i,a,l){let h;try{h=Q.encode(i,l)}catch(f){throw new Lt(f)}for(let f=0,m=h.length;f!==m;f++){const x=h[f];a.appendBits(x,8)}}static appendKanjiBytes(i,a){let l;try{l=Q.encode(i,j.SJIS)}catch(f){throw new Lt(f)}const h=l.length;for(let f=0;f<h;f+=2){const m=l[f]&255,x=l[f+1]&255,w=m<<8&4294967295|x;let C=-1;if(w>=33088&&w<=40956?C=w-33088:w>=57408&&w<=60351&&(C=w-49472),C===-1)throw new Lt("Invalid byte sequence");const R=(C>>8)*192+(C&255);a.appendBits(R,13)}}static appendECI(i,a){a.appendBits(Ze.ECI.getBits(),4),a.appendBits(i.getValue(),8)}}D.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),D.DEFAULT_BYTE_MODE_ENCODING=j.UTF8.getName();class H{write(i,a,l,h=null){if(i.length===0)throw new I("Found empty contents");if(a<0||l<0)throw new I("Requested dimensions are too small: "+a+"x"+l);let f=It.L,m=H.QUIET_ZONE_SIZE;h!==null&&(h.get(Vn.ERROR_CORRECTION)!==void 0&&(f=It.fromString(h.get(Vn.ERROR_CORRECTION).toString())),h.get(Vn.MARGIN)!==void 0&&(m=Number.parseInt(h.get(Vn.MARGIN).toString(),10)));const x=D.encode(i,f,h);return this.renderResult(x,a,l,m)}writeToDom(i,a,l,h,f=null){typeof i=="string"&&(i=document.querySelector(i));const m=this.write(a,l,h,f);i&&i.appendChild(m)}renderResult(i,a,l,h){const f=i.getMatrix();if(f===null)throw new nr;const m=f.getWidth(),x=f.getHeight(),w=m+h*2,C=x+h*2,R=Math.max(a,w),P=Math.max(l,C),B=Math.min(Math.floor(R/w),Math.floor(P/C)),Y=Math.floor((R-m*B)/2),te=Math.floor((P-x*B)/2),ne=this.createSVGElement(R,P);for(let ue=0,Ee=te;ue<x;ue++,Ee+=B)for(let Le=0,Oe=Y;Le<m;Le++,Oe+=B)if(f.get(Le,ue)===1){const Ne=this.createSvgRectElement(Oe,Ee,B,B);ne.appendChild(Ne)}return ne}createSVGElement(i,a){const l=document.createElementNS(H.SVG_NS,"svg");return l.setAttributeNS(null,"height",i.toString()),l.setAttributeNS(null,"width",a.toString()),l}createSvgRectElement(i,a,l,h){const f=document.createElementNS(H.SVG_NS,"rect");return f.setAttributeNS(null,"x",i.toString()),f.setAttributeNS(null,"y",a.toString()),f.setAttributeNS(null,"height",l.toString()),f.setAttributeNS(null,"width",h.toString()),f.setAttributeNS(null,"fill","#000000"),f}}H.QUIET_ZONE_SIZE=4,H.SVG_NS="http://www.w3.org/2000/svg";class ce{encode(i,a,l,h,f){if(i.length===0)throw new I("Found empty contents");if(a!==Me.QR_CODE)throw new I("Can only encode QR_CODE, but got "+a);if(l<0||h<0)throw new I(`Requested dimensions are too small: ${l}x${h}`);let m=It.L,x=ce.QUIET_ZONE_SIZE;f!==null&&(f.get(Vn.ERROR_CORRECTION)!==void 0&&(m=It.fromString(f.get(Vn.ERROR_CORRECTION).toString())),f.get(Vn.MARGIN)!==void 0&&(x=Number.parseInt(f.get(Vn.MARGIN).toString(),10)));const w=D.encode(i,m,f);return ce.renderResult(w,l,h,x)}static renderResult(i,a,l,h){const f=i.getMatrix();if(f===null)throw new nr;const m=f.getWidth(),x=f.getHeight(),w=m+h*2,C=x+h*2,R=Math.max(a,w),P=Math.max(l,C),B=Math.min(Math.floor(R/w),Math.floor(P/C)),Y=Math.floor((R-m*B)/2),te=Math.floor((P-x*B)/2),ne=new We(R,P);for(let ue=0,Ee=te;ue<x;ue++,Ee+=B)for(let Le=0,Oe=Y;Le<m;Le++,Oe+=B)f.get(Le,ue)===1&&ne.setRegion(Oe,Ee,B,B);return ne}}ce.QUIET_ZONE_SIZE=4;class _e{encode(i,a,l,h,f){let m;switch(a){case Me.QR_CODE:m=new ce;break;default:throw new I("No encoder available for format "+a)}return m.encode(i,a,l,h,f)}}class Pe extends He{constructor(i,a,l,h,f,m,x,w){if(super(m,x),this.yuvData=i,this.dataWidth=a,this.dataHeight=l,this.left=h,this.top=f,h+m>a||f+x>l)throw new I("Crop rectangle does not fit within image data.");w&&this.reverseHorizontal(m,x)}getRow(i,a){if(i<0||i>=this.getHeight())throw new I("Requested row is outside the image: "+i);const l=this.getWidth();(a==null||a.length<l)&&(a=new Uint8ClampedArray(l));const h=(i+this.top)*this.dataWidth+this.left;return W.arraycopy(this.yuvData,h,a,0,l),a}getMatrix(){const i=this.getWidth(),a=this.getHeight();if(i===this.dataWidth&&a===this.dataHeight)return this.yuvData;const l=i*a,h=new Uint8ClampedArray(l);let f=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return W.arraycopy(this.yuvData,f,h,0,l),h;for(let m=0;m<a;m++){const x=m*i;W.arraycopy(this.yuvData,f,h,x,i),f+=this.dataWidth}return h}isCropSupported(){return!0}crop(i,a,l,h){return new Pe(this.yuvData,this.dataWidth,this.dataHeight,this.left+i,this.top+a,l,h,!1)}renderThumbnail(){const i=this.getWidth()/Pe.THUMBNAIL_SCALE_FACTOR,a=this.getHeight()/Pe.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(i*a),h=this.yuvData;let f=this.top*this.dataWidth+this.left;for(let m=0;m<a;m++){const x=m*i;for(let w=0;w<i;w++){const C=h[f+w*Pe.THUMBNAIL_SCALE_FACTOR]&255;l[x+w]=4278190080|C*65793}f+=this.dataWidth*Pe.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/Pe.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Pe.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(i,a){const l=this.yuvData;for(let h=0,f=this.top*this.dataWidth+this.left;h<a;h++,f+=this.dataWidth){const m=f+i/2;for(let x=f,w=f+i-1;x<m;x++,w--){const C=l[x];l[x]=l[w],l[w]=C}}}invert(){return new ot(this)}}Pe.THUMBNAIL_SCALE_FACTOR=2;class ht extends He{constructor(i,a,l,h,f,m,x){if(super(a,l),this.dataWidth=h,this.dataHeight=f,this.left=m,this.top=x,i.BYTES_PER_ELEMENT===4){const w=a*l,C=new Uint8ClampedArray(w);for(let R=0;R<w;R++){const P=i[R],B=P>>16&255,Y=P>>7&510,te=P&255;C[R]=(B+Y+te)/4&255}this.luminances=C}else this.luminances=i;if(h===void 0&&(this.dataWidth=a),f===void 0&&(this.dataHeight=l),m===void 0&&(this.left=0),x===void 0&&(this.top=0),this.left+a>this.dataWidth||this.top+l>this.dataHeight)throw new I("Crop rectangle does not fit within image data.")}getRow(i,a){if(i<0||i>=this.getHeight())throw new I("Requested row is outside the image: "+i);const l=this.getWidth();(a==null||a.length<l)&&(a=new Uint8ClampedArray(l));const h=(i+this.top)*this.dataWidth+this.left;return W.arraycopy(this.luminances,h,a,0,l),a}getMatrix(){const i=this.getWidth(),a=this.getHeight();if(i===this.dataWidth&&a===this.dataHeight)return this.luminances;const l=i*a,h=new Uint8ClampedArray(l);let f=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return W.arraycopy(this.luminances,f,h,0,l),h;for(let m=0;m<a;m++){const x=m*i;W.arraycopy(this.luminances,f,h,x,i),f+=this.dataWidth}return h}isCropSupported(){return!0}crop(i,a,l,h){return new ht(this.luminances,l,h,this.dataWidth,this.dataHeight,this.left+i,this.top+a)}invert(){return new ot(this)}}class jn extends j{static forName(i){return this.getCharacterSetECIByName(i)}}class Xt{}Xt.ISO_8859_1=j.ISO8859_1;class Cn{isCompact(){return this.compact}setCompact(i){this.compact=i}getSize(){return this.size}setSize(i){this.size=i}getLayers(){return this.layers}setLayers(i){this.layers=i}getCodeWords(){return this.codeWords}setCodeWords(i){this.codeWords=i}getMatrix(){return this.matrix}setMatrix(i){this.matrix=i}}class hi{static singletonList(i){return[i]}static min(i,a){return i.sort(a)[0]}}class is{constructor(i){this.previous=i}getPrevious(){return this.previous}}class Nr extends is{constructor(i,a,l){super(i),this.value=a,this.bitCount=l}appendTo(i,a){i.appendBits(this.value,this.bitCount)}add(i,a){return new Nr(this,i,a)}addBinaryShift(i,a){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Nr(this,i,a)}toString(){let i=this.value&(1<<this.bitCount)-1;return i|=1<<this.bitCount,"<"+ee.toBinaryString(i|1<<this.bitCount).substring(1)+">"}}class fi extends Nr{constructor(i,a,l){super(i,0,0),this.binaryShiftStart=a,this.binaryShiftByteCount=l}appendTo(i,a){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(i.appendBits(31,5),this.binaryShiftByteCount>62?i.appendBits(this.binaryShiftByteCount-31,16):l===0?i.appendBits(Math.min(this.binaryShiftByteCount,31),5):i.appendBits(this.binaryShiftByteCount-31,5)),i.appendBits(a[this.binaryShiftStart+l],8)}addBinaryShift(i,a){return new fi(this,i,a)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function ra(L,i,a){return new fi(L,i,a)}function ss(L,i,a){return new Nr(L,i,a)}const Va=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],ks=0,ll=1,Ai=2,oc=3,Ui=4,No=new Nr(null,0,0),ia=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function td(L){for(let i of L)ae.fill(i,-1);return L[ks][Ui]=0,L[ll][Ui]=0,L[ll][ks]=28,L[oc][Ui]=0,L[Ai][Ui]=0,L[Ai][ks]=15,L}const Ro=td(ae.createInt32Array(6,6));class Vi{constructor(i,a,l,h){this.token=i,this.mode=a,this.binaryShiftByteCount=l,this.bitCount=h}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(i,a){let l=this.bitCount,h=this.token;if(i!==this.mode){let m=ia[this.mode][i];h=ss(h,m&65535,m>>16),l+=m>>16}let f=i===Ai?4:5;return h=ss(h,a,f),new Vi(h,i,0,l+f)}shiftAndAppend(i,a){let l=this.token,h=this.mode===Ai?4:5;return l=ss(l,Ro[this.mode][i],h),l=ss(l,a,5),new Vi(l,this.mode,0,this.bitCount+h+5)}addBinaryShiftChar(i){let a=this.token,l=this.mode,h=this.bitCount;if(this.mode===Ui||this.mode===Ai){let x=ia[l][ks];a=ss(a,x&65535,x>>16),h+=x>>16,l=ks}let f=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,m=new Vi(a,l,this.binaryShiftByteCount+1,h+f);return m.binaryShiftByteCount===2078&&(m=m.endBinaryShift(i+1)),m}endBinaryShift(i){if(this.binaryShiftByteCount===0)return this;let a=this.token;return a=ra(a,i-this.binaryShiftByteCount,this.binaryShiftByteCount),new Vi(a,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(i){let a=this.bitCount+(ia[this.mode][i.mode]>>16);return this.binaryShiftByteCount<i.binaryShiftByteCount?a+=Vi.calculateBinaryShiftCost(i)-Vi.calculateBinaryShiftCost(this):this.binaryShiftByteCount>i.binaryShiftByteCount&&i.binaryShiftByteCount>0&&(a+=10),a<=i.bitCount}toBitArray(i){let a=[];for(let h=this.endBinaryShift(i.length).token;h!==null;h=h.getPrevious())a.unshift(h);let l=new fe;for(const h of a)h.appendTo(l,i);return l}toString(){return Z.format("%s bits=%d bytes=%d",Va[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(i){return i.binaryShiftByteCount>62?21:i.binaryShiftByteCount>31?20:i.binaryShiftByteCount>0?10:0}}Vi.INITIAL_STATE=new Vi(No,ks,0,0);function Nu(L){const i=Z.getCharCode(" "),a=Z.getCharCode("."),l=Z.getCharCode(",");L[ks][i]=1;const h=Z.getCharCode("Z"),f=Z.getCharCode("A");for(let B=f;B<=h;B++)L[ks][B]=B-f+2;L[ll][i]=1;const m=Z.getCharCode("z"),x=Z.getCharCode("a");for(let B=x;B<=m;B++)L[ll][B]=B-x+2;L[Ai][i]=1;const w=Z.getCharCode("9"),C=Z.getCharCode("0");for(let B=C;B<=w;B++)L[Ai][B]=B-C+2;L[Ai][l]=12,L[Ai][a]=13;const R=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let B=0;B<R.length;B++)L[oc][Z.getCharCode(R[B])]=B;const P=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let B=0;B<P.length;B++)Z.getCharCode(P[B])>0&&(L[Ui][Z.getCharCode(P[B])]=B);return L}const Oo=Nu(ae.createInt32Array(5,256));class sa{constructor(i){this.text=i}encode(){const i=Z.getCharCode(" "),a=Z.getCharCode(`
`);let l=hi.singletonList(Vi.INITIAL_STATE);for(let f=0;f<this.text.length;f++){let m,x=f+1<this.text.length?this.text[f+1]:0;switch(this.text[f]){case Z.getCharCode("\r"):m=x===a?2:0;break;case Z.getCharCode("."):m=x===i?3:0;break;case Z.getCharCode(","):m=x===i?4:0;break;case Z.getCharCode(":"):m=x===i?5:0;break;default:m=0}m>0?(l=sa.updateStateListForPair(l,f,m),f++):l=this.updateStateListForChar(l,f)}return hi.min(l,(f,m)=>f.getBitCount()-m.getBitCount()).toBitArray(this.text)}updateStateListForChar(i,a){const l=[];for(let h of i)this.updateStateForChar(h,a,l);return sa.simplifyStates(l)}updateStateForChar(i,a,l){let h=this.text[a]&255,f=Oo[i.getMode()][h]>0,m=null;for(let x=0;x<=Ui;x++){let w=Oo[x][h];if(w>0){if(m==null&&(m=i.endBinaryShift(a)),!f||x===i.getMode()||x===Ai){const C=m.latchAndAppend(x,w);l.push(C)}if(!f&&Ro[i.getMode()][x]>=0){const C=m.shiftAndAppend(x,w);l.push(C)}}}if(i.getBinaryShiftByteCount()>0||Oo[i.getMode()][h]===0){let x=i.addBinaryShiftChar(a);l.push(x)}}static updateStateListForPair(i,a,l){const h=[];for(let f of i)this.updateStateForPair(f,a,l,h);return this.simplifyStates(h)}static updateStateForPair(i,a,l,h){let f=i.endBinaryShift(a);if(h.push(f.latchAndAppend(Ui,l)),i.getMode()!==Ui&&h.push(f.shiftAndAppend(Ui,l)),l===3||l===4){let m=f.latchAndAppend(Ai,16-l).latchAndAppend(Ai,1);h.push(m)}if(i.getBinaryShiftByteCount()>0){let m=i.addBinaryShiftChar(a).addBinaryShiftChar(a+1);h.push(m)}}static simplifyStates(i){let a=[];for(const l of i){let h=!0;for(const f of a){if(f.isBetterThanOrEqualTo(l)){h=!1;break}l.isBetterThanOrEqualTo(f)&&(a=a.filter(m=>m!==f))}h&&a.push(l)}return a}}class Ut{constructor(){}static encodeBytes(i){return Ut.encode(i,Ut.DEFAULT_EC_PERCENT,Ut.DEFAULT_AZTEC_LAYERS)}static encode(i,a,l){let h=new sa(i).encode(),f=ee.truncDivision(h.getSize()*a,100)+11,m=h.getSize()+f,x,w,C,R,P;if(l!==Ut.DEFAULT_AZTEC_LAYERS){if(x=l<0,w=Math.abs(l),w>(x?Ut.MAX_NB_BITS_COMPACT:Ut.MAX_NB_BITS))throw new I(Z.format("Illegal value %s for layers",l));C=Ut.totalBitsInLayer(w,x),R=Ut.WORD_SIZE[w];let Ne=C-C%R;if(P=Ut.stuffBits(h,R),P.getSize()+f>Ne)throw new I("Data to large for user specified layer");if(x&&P.getSize()>R*64)throw new I("Data to large for user specified layer")}else{R=0,P=null;for(let Ne=0;;Ne++){if(Ne>Ut.MAX_NB_BITS)throw new I("Data too large for an Aztec code");if(x=Ne<=3,w=x?Ne+1:Ne,C=Ut.totalBitsInLayer(w,x),m>C)continue;(P==null||R!==Ut.WORD_SIZE[w])&&(R=Ut.WORD_SIZE[w],P=Ut.stuffBits(h,R));let Rt=C-C%R;if(!(x&&P.getSize()>R*64)&&P.getSize()+f<=Rt)break}}let B=Ut.generateCheckWords(P,C,R),Y=P.getSize()/R,te=Ut.generateModeMessage(x,w,Y),ne=(x?11:14)+w*4,ue=new Int32Array(ne),Ee;if(x){Ee=ne;for(let Ne=0;Ne<ue.length;Ne++)ue[Ne]=Ne}else{Ee=ne+1+2*ee.truncDivision(ee.truncDivision(ne,2)-1,15);let Ne=ee.truncDivision(ne,2),Rt=ee.truncDivision(Ee,2);for(let ft=0;ft<Ne;ft++){let Wn=ft+ee.truncDivision(ft,15);ue[Ne-ft-1]=Rt-Wn-1,ue[Ne+ft]=Rt+Wn+1}}let Le=new We(Ee);for(let Ne=0,Rt=0;Ne<w;Ne++){let ft=(w-Ne)*4+(x?9:12);for(let Wn=0;Wn<ft;Wn++){let bi=Wn*2;for(let Pr=0;Pr<2;Pr++)B.get(Rt+bi+Pr)&&Le.set(ue[Ne*2+Pr],ue[Ne*2+Wn]),B.get(Rt+ft*2+bi+Pr)&&Le.set(ue[Ne*2+Wn],ue[ne-1-Ne*2-Pr]),B.get(Rt+ft*4+bi+Pr)&&Le.set(ue[ne-1-Ne*2-Pr],ue[ne-1-Ne*2-Wn]),B.get(Rt+ft*6+bi+Pr)&&Le.set(ue[ne-1-Ne*2-Wn],ue[Ne*2+Pr])}Rt+=ft*8}if(Ut.drawModeMessage(Le,x,Ee,te),x)Ut.drawBullsEye(Le,ee.truncDivision(Ee,2),5);else{Ut.drawBullsEye(Le,ee.truncDivision(Ee,2),7);for(let Ne=0,Rt=0;Ne<ee.truncDivision(ne,2)-1;Ne+=15,Rt+=16)for(let ft=ee.truncDivision(Ee,2)&1;ft<Ee;ft+=2)Le.set(ee.truncDivision(Ee,2)-Rt,ft),Le.set(ee.truncDivision(Ee,2)+Rt,ft),Le.set(ft,ee.truncDivision(Ee,2)-Rt),Le.set(ft,ee.truncDivision(Ee,2)+Rt)}let Oe=new Cn;return Oe.setCompact(x),Oe.setSize(Ee),Oe.setLayers(w),Oe.setCodeWords(Y),Oe.setMatrix(Le),Oe}static drawBullsEye(i,a,l){for(let h=0;h<l;h+=2)for(let f=a-h;f<=a+h;f++)i.set(f,a-h),i.set(f,a+h),i.set(a-h,f),i.set(a+h,f);i.set(a-l,a-l),i.set(a-l+1,a-l),i.set(a-l,a-l+1),i.set(a+l,a-l),i.set(a+l,a-l+1),i.set(a+l,a+l-1)}static generateModeMessage(i,a,l){let h=new fe;return i?(h.appendBits(a-1,2),h.appendBits(l-1,6),h=Ut.generateCheckWords(h,28,4)):(h.appendBits(a-1,5),h.appendBits(l-1,11),h=Ut.generateCheckWords(h,40,4)),h}static drawModeMessage(i,a,l,h){let f=ee.truncDivision(l,2);if(a)for(let m=0;m<7;m++){let x=f-3+m;h.get(m)&&i.set(x,f-5),h.get(m+7)&&i.set(f+5,x),h.get(20-m)&&i.set(x,f+5),h.get(27-m)&&i.set(f-5,x)}else for(let m=0;m<10;m++){let x=f-5+m+ee.truncDivision(m,5);h.get(m)&&i.set(x,f-7),h.get(m+10)&&i.set(f+7,x),h.get(29-m)&&i.set(x,f+7),h.get(39-m)&&i.set(f-7,x)}}static generateCheckWords(i,a,l){let h=i.getSize()/l,f=new ns(Ut.getGF(l)),m=ee.truncDivision(a,l),x=Ut.bitsToWords(i,l,m);f.encode(x,m-h);let w=a%l,C=new fe;C.appendBits(0,w);for(const R of Array.from(x))C.appendBits(R,l);return C}static bitsToWords(i,a,l){let h=new Int32Array(l),f,m;for(f=0,m=i.getSize()/a;f<m;f++){let x=0;for(let w=0;w<a;w++)x|=i.get(f*a+w)?1<<a-w-1:0;h[f]=x}return h}static getGF(i){switch(i){case 4:return wt.AZTEC_PARAM;case 6:return wt.AZTEC_DATA_6;case 8:return wt.AZTEC_DATA_8;case 10:return wt.AZTEC_DATA_10;case 12:return wt.AZTEC_DATA_12;default:throw new I("Unsupported word size "+i)}}static stuffBits(i,a){let l=new fe,h=i.getSize(),f=(1<<a)-2;for(let m=0;m<h;m+=a){let x=0;for(let w=0;w<a;w++)(m+w>=h||i.get(m+w))&&(x|=1<<a-1-w);(x&f)===f?(l.appendBits(x&f,a),m--):(x&f)===0?(l.appendBits(x|1,a),m--):l.appendBits(x,a)}return l}static totalBitsInLayer(i,a){return((a?88:112)+16*i)*i}}Ut.DEFAULT_EC_PERCENT=33,Ut.DEFAULT_AZTEC_LAYERS=0,Ut.MAX_NB_BITS=32,Ut.MAX_NB_BITS_COMPACT=4,Ut.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Do{encode(i,a,l,h){return this.encodeWithHints(i,a,l,h,null)}encodeWithHints(i,a,l,h,f){let m=Xt.ISO_8859_1,x=Ut.DEFAULT_EC_PERCENT,w=Ut.DEFAULT_AZTEC_LAYERS;return f!=null&&(f.has(Vn.CHARACTER_SET)&&(m=jn.forName(f.get(Vn.CHARACTER_SET).toString())),f.has(Vn.ERROR_CORRECTION)&&(x=ee.parseInt(f.get(Vn.ERROR_CORRECTION).toString())),f.has(Vn.AZTEC_LAYERS)&&(w=ee.parseInt(f.get(Vn.AZTEC_LAYERS).toString()))),Do.encodeLayers(i,a,l,h,m,x,w)}static encodeLayers(i,a,l,h,f,m,x){if(a!==Me.AZTEC)throw new I("Can only encode AZTEC, but got "+a);let w=Ut.encode(Z.getBytes(i,f),m,x);return Do.renderResult(w,l,h)}static renderResult(i,a,l){let h=i.getMatrix();if(h==null)throw new nr;let f=h.getWidth(),m=h.getHeight(),x=Math.max(a,f),w=Math.max(l,m),C=Math.min(x/f,w/m),R=(x-f*C)/2,P=(w-m*C)/2,B=new We(x,w);for(let Y=0,te=P;Y<m;Y++,te+=C)for(let ne=0,ue=R;ne<f;ne++,ue+=C)h.get(ne,Y)&&B.setRegion(ue,te,C,C);return B}}n.AbstractExpandedDecoder=An,n.ArgumentException=S,n.ArithmeticException=si,n.AztecCode=Cn,n.AztecCodeReader=Wi,n.AztecCodeWriter=Do,n.AztecDecoder=Ht,n.AztecDetector=Rs,n.AztecDetectorResult=Ki,n.AztecEncoder=Ut,n.AztecHighLevelEncoder=sa,n.AztecPoint=Kn,n.BarcodeFormat=Me,n.Binarizer=K,n.BinaryBitmap=M,n.BitArray=fe,n.BitMatrix=We,n.BitSource=vn,n.BrowserAztecCodeReader=Ws,n.BrowserBarcodeReader=kn,n.BrowserCodeReader=Be,n.BrowserDatamatrixCodeReader=$i,n.BrowserMultiFormatReader=ts,n.BrowserPDF417Reader=al,n.BrowserQRCodeReader=ol,n.BrowserQRCodeSvgWriter=H,n.CharacterSetECI=j,n.ChecksumException=V,n.Code128Reader=Re,n.Code39Reader=Yt,n.DataMatrixDecodedBitStreamParser=Lr,n.DataMatrixReader=Qr,n.DecodeHintType=De,n.DecoderResult=Jt,n.DefaultGridSampler=Yr,n.DetectorResult=ws,n.EAN13Reader=rn,n.EncodeHintType=Vn,n.Exception=_,n.FormatException=z,n.GenericGF=wt,n.GenericGFPoly=an,n.GlobalHistogramBinarizer=pe,n.GridSampler=ai,n.GridSamplerInstance=rr,n.HTMLCanvasElementLuminanceSource=gt,n.HybridBinarizer=be,n.ITFReader=rt,n.IllegalArgumentException=I,n.IllegalStateException=nr,n.InvertedLuminanceSource=ot,n.LuminanceSource=He,n.MathUtils=Qe,n.MultiFormatOneDReader=St,n.MultiFormatReader=Io,n.MultiFormatWriter=_e,n.NotFoundException=de,n.OneDReader=Gt,n.PDF417DecodedBitStreamParser=ye,n.PDF417DecoderErrorCorrection=Li,n.PDF417Reader=Un,n.PDF417ResultMetadata=vs,n.PerspectiveTransform=ur,n.PlanarYUVLuminanceSource=Pe,n.QRCodeByteMatrix=na,n.QRCodeDataMask=sr,n.QRCodeDecodedBitStreamParser=on,n.QRCodeDecoderErrorCorrectionLevel=It,n.QRCodeDecoderFormatInformation=zn,n.QRCodeEncoder=D,n.QRCodeEncoderQRCode=rs,n.QRCodeMaskUtil=Mt,n.QRCodeMatrixUtil=p,n.QRCodeMode=Ze,n.QRCodeReader=ei,n.QRCodeVersion=qe,n.QRCodeWriter=ce,n.RGBLuminanceSource=ht,n.RSS14Reader=Ue,n.RSSExpandedReader=F,n.ReaderException=ta,n.ReedSolomonDecoder=Gr,n.ReedSolomonEncoder=ns,n.ReedSolomonException=cr,n.Result=ke,n.ResultMetadataType=Ct,n.ResultPoint=Fe,n.StringUtils=Z,n.UnsupportedOperationException=$,n.VideoInputDevice=re,n.WhiteRectangleDetector=dn,n.WriterException=Lt,n.ZXingArrays=ae,n.ZXingCharset=jn,n.ZXingInteger=ee,n.ZXingStandardCharsets=Xt,n.ZXingStringBuilder=X,n.ZXingStringEncoding=Q,n.ZXingSystem=W,n.createAbstractExpandedDecoder=Sr,Object.defineProperty(n,"__esModule",{value:!0})}))})(Qc,Qc.exports)),Qc.exports}var Mn=iR();const sR=Q1(Mn),aR=w3({__proto__:null,default:sR},[Mn]);var qE=(function(){function r(e,n,o){if(this.formatMap=new Map([[Ye.QR_CODE,Mn.BarcodeFormat.QR_CODE],[Ye.AZTEC,Mn.BarcodeFormat.AZTEC],[Ye.CODABAR,Mn.BarcodeFormat.CODABAR],[Ye.CODE_39,Mn.BarcodeFormat.CODE_39],[Ye.CODE_93,Mn.BarcodeFormat.CODE_93],[Ye.CODE_128,Mn.BarcodeFormat.CODE_128],[Ye.DATA_MATRIX,Mn.BarcodeFormat.DATA_MATRIX],[Ye.MAXICODE,Mn.BarcodeFormat.MAXICODE],[Ye.ITF,Mn.BarcodeFormat.ITF],[Ye.EAN_13,Mn.BarcodeFormat.EAN_13],[Ye.EAN_8,Mn.BarcodeFormat.EAN_8],[Ye.PDF_417,Mn.BarcodeFormat.PDF_417],[Ye.RSS_14,Mn.BarcodeFormat.RSS_14],[Ye.RSS_EXPANDED,Mn.BarcodeFormat.RSS_EXPANDED],[Ye.UPC_A,Mn.BarcodeFormat.UPC_A],[Ye.UPC_E,Mn.BarcodeFormat.UPC_E],[Ye.UPC_EAN_EXTENSION,Mn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!aR)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=o;var u=this.createZXingFormats(e),d=new Map;d.set(Mn.DecodeHintType.POSSIBLE_FORMATS,u),d.set(Mn.DecodeHintType.TRY_HARDER,!1),this.hints=d}return r.prototype.decodeAsync=function(e){var n=this;return new Promise(function(o,u){try{o(n.decode(e))}catch(d){u(d)}})},r.prototype.decode=function(e){var n=new Mn.MultiFormatReader(this.verbose,this.hints),o=new Mn.HTMLCanvasElementLuminanceSource(e),u=new Mn.BinaryBitmap(new Mn.HybridBinarizer(o)),d=n.decode(u);return{text:d.text,format:eb.create(this.toHtml5QrcodeSupportedFormats(d.format)),debugData:this.createDebugData()}},r.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,o,u){e.set(n,o)}),e},r.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},r.prototype.createZXingFormats=function(e){for(var n=[],o=0,u=e;o<u.length;o++){var d=u[o];this.formatMap.has(d)?n.push(this.formatMap.get(d)):this.logger.logError("".concat(d," is not supported by")+"ZXingHtml5QrcodeShim")}return n},r.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},r})(),oR=function(r,e,n,o){function u(d){return d instanceof n?d:new n(function(y){y(d)})}return new(n||(n=Promise))(function(d,y){function T(S){try{_(o.next(S))}catch(I){y(I)}}function b(S){try{_(o.throw(S))}catch(I){y(I)}}function _(S){S.done?d(S.value):u(S.value).then(T,b)}_((o=o.apply(r,e||[])).next())})},lR=function(r,e){var n={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,u,d,y;return y={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function T(_){return function(S){return b([_,S])}}function b(_){if(o)throw new TypeError("Generator is already executing.");for(;y&&(y=0,_[0]&&(n=0)),n;)try{if(o=1,u&&(d=_[0]&2?u.return:_[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,_[1])).done)return d;switch(u=0,d&&(_=[_[0]&2,d.value]),_[0]){case 0:case 1:d=_;break;case 4:return n.label++,{value:_[1],done:!1};case 5:n.label++,u=_[1],_=[0];continue;case 7:_=n.ops.pop(),n.trys.pop();continue;default:if(d=n.trys,!(d=d.length>0&&d[d.length-1])&&(_[0]===6||_[0]===2)){n=0;continue}if(_[0]===3&&(!d||_[1]>d[0]&&_[1]<d[3])){n.label=_[1];break}if(_[0]===6&&n.label<d[1]){n.label=d[1],d=_;break}if(d&&n.label<d[2]){n.label=d[2],n.ops.push(_);break}d[2]&&n.ops.pop(),n.trys.pop();continue}_=e.call(r,n)}catch(S){_=[6,S],u=0}finally{o=d=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},XE=(function(){function r(e,n,o){if(this.formatMap=new Map([[Ye.QR_CODE,"qr_code"],[Ye.AZTEC,"aztec"],[Ye.CODABAR,"codabar"],[Ye.CODE_39,"code_39"],[Ye.CODE_93,"code_93"],[Ye.CODE_128,"code_128"],[Ye.DATA_MATRIX,"data_matrix"],[Ye.ITF,"itf"],[Ye.EAN_13,"ean_13"],[Ye.EAN_8,"ean_8"],[Ye.PDF_417,"pdf417"],[Ye.UPC_A,"upc_a"],[Ye.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!r.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=o;var u=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(u),!this.detector)throw"BarcodeDetector detector not supported"}return r.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},r.prototype.decodeAsync=function(e){return oR(this,void 0,void 0,function(){var n,o;return lR(this,function(u){switch(u.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=u.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return o=this.selectLargestBarcode(n),[2,{text:o.rawValue,format:eb.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}]}})})},r.prototype.selectLargestBarcode=function(e){for(var n=null,o=0,u=0,d=e;u<d.length;u++){var y=d[u],T=y.boundingBox.width*y.boundingBox.height;T>o&&(o=T,n=y)}if(!n)throw"No largest barcode found";return n},r.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],o=0,u=e;o<u.length;o++){var d=u[o];this.formatMap.has(d)?n.push(this.formatMap.get(d)):this.logger.warn("".concat(d," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},r.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},r.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,o,u){e.set(n,o)}),e},r.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},r})(),KE=function(r,e,n,o){function u(d){return d instanceof n?d:new n(function(y){y(d)})}return new(n||(n=Promise))(function(d,y){function T(S){try{_(o.next(S))}catch(I){y(I)}}function b(S){try{_(o.throw(S))}catch(I){y(I)}}function _(S){S.done?d(S.value):u(S.value).then(T,b)}_((o=o.apply(r,e||[])).next())})},WE=function(r,e){var n={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,u,d,y;return y={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function T(_){return function(S){return b([_,S])}}function b(_){if(o)throw new TypeError("Generator is already executing.");for(;y&&(y=0,_[0]&&(n=0)),n;)try{if(o=1,u&&(d=_[0]&2?u.return:_[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,_[1])).done)return d;switch(u=0,d&&(_=[_[0]&2,d.value]),_[0]){case 0:case 1:d=_;break;case 4:return n.label++,{value:_[1],done:!1};case 5:n.label++,u=_[1],_=[0];continue;case 7:_=n.ops.pop(),n.trys.pop();continue;default:if(d=n.trys,!(d=d.length>0&&d[d.length-1])&&(_[0]===6||_[0]===2)){n=0;continue}if(_[0]===3&&(!d||_[1]>d[0]&&_[1]<d[3])){n.label=_[1];break}if(_[0]===6&&n.label<d[1]){n.label=d[1],d=_;break}if(d&&n.label<d[2]){n.label=d[2],n.ops.push(_);break}d[2]&&n.ops.pop(),n.trys.pop();continue}_=e.call(r,n)}catch(S){_=[6,S],u=0}finally{o=d=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},cR=(function(){function r(e,n,o,u){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=o,n&&XE.isSupported()?(this.primaryDecoder=new XE(e,o,u),this.secondaryDecoder=new qE(e,o,u)):this.primaryDecoder=new qE(e,o,u)}return r.prototype.decodeAsync=function(e){return KE(this,void 0,void 0,function(){var n;return WE(this,function(o){switch(o.label){case 0:n=performance.now(),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,o.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},r.prototype.decodeRobustlyAsync=function(e){return KE(this,void 0,void 0,function(){var n,o;return WE(this,function(u){switch(u.label){case 0:n=performance.now(),u.label=1;case 1:return u.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,u.sent()];case 3:if(o=u.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw o;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},r.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},r.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},r.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,o=this.executionResults;n<o.length;n++){var u=o[n];e+=u}var d=e/this.executionResults.length;console.log("".concat(d," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},r})(),Xg=(function(){var r=function(e,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,u){o.__proto__=u}||function(o,u){for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(o[d]=u[d])},r(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");r(e,n);function o(){this.constructor=e}e.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),Nf=function(r,e,n,o){function u(d){return d instanceof n?d:new n(function(y){y(d)})}return new(n||(n=Promise))(function(d,y){function T(S){try{_(o.next(S))}catch(I){y(I)}}function b(S){try{_(o.throw(S))}catch(I){y(I)}}function _(S){S.done?d(S.value):u(S.value).then(T,b)}_((o=o.apply(r,e||[])).next())})},Rf=function(r,e){var n={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,u,d,y;return y={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function T(_){return function(S){return b([_,S])}}function b(_){if(o)throw new TypeError("Generator is already executing.");for(;y&&(y=0,_[0]&&(n=0)),n;)try{if(o=1,u&&(d=_[0]&2?u.return:_[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,_[1])).done)return d;switch(u=0,d&&(_=[_[0]&2,d.value]),_[0]){case 0:case 1:d=_;break;case 4:return n.label++,{value:_[1],done:!1};case 5:n.label++,u=_[1],_=[0];continue;case 7:_=n.ops.pop(),n.trys.pop();continue;default:if(d=n.trys,!(d=d.length>0&&d[d.length-1])&&(_[0]===6||_[0]===2)){n=0;continue}if(_[0]===3&&(!d||_[1]>d[0]&&_[1]<d[3])){n.label=_[1];break}if(_[0]===6&&n.label<d[1]){n.label=d[1],d=_;break}if(d&&n.label<d[2]){n.label=d[2],n.ops.push(_);break}d[2]&&n.ops.pop(),n.trys.pop();continue}_=e.call(r,n)}catch(S){_=[6,S],u=0}finally{o=d=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},nb=(function(){function r(e,n){this.name=e,this.track=n}return r.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},r.prototype.apply=function(e){var n={};n[this.name]=e;var o={advanced:[n]};return this.track.applyConstraints(o)},r.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},r})(),uR=(function(r){Xg(e,r);function e(n,o){return r.call(this,n,o)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var o={};o[this.name]=n;var u={advanced:[o]};return this.track.applyConstraints(u)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),o=n[this.name];return{min:o.min,max:o.max,step:o.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e})(nb),hR=(function(r){Xg(e,r);function e(n){return r.call(this,"zoom",n)||this}return e})(uR),fR=(function(r){Xg(e,r);function e(n){return r.call(this,"torch",n)||this}return e})(nb),dR=(function(){function r(e){this.track=e}return r.prototype.zoomFeature=function(){return new hR(this.track)},r.prototype.torchFeature=function(){return new fR(this.track)},r})(),gR=(function(){function r(e,n,o){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=o,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return r.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},r.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var o=e.surface.clientWidth,u=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(o,u),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},r.create=function(e,n,o,u){return Nf(this,void 0,void 0,function(){var d,y;return Rf(this,function(T){switch(T.label){case 0:return d=new r(e,n,u),o.aspectRatio?(y={aspectRatio:o.aspectRatio},[4,d.getFirstTrackOrFail().applyConstraints(y)]):[3,2];case 1:T.sent(),T.label=2;case 2:return d.setupSurface(),[2,d]}})})},r.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},r.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},r.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},r.prototype.resume=function(e){this.failIfClosed();var n=this,o=function(){setTimeout(e,200),n.surface.removeEventListener("playing",o)};this.surface.addEventListener("playing",o),this.surface.play()},r.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},r.prototype.getSurface=function(){return this.failIfClosed(),this.surface},r.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},r.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},r.prototype.applyVideoConstraints=function(e){return Nf(this,void 0,void 0,function(){return Rf(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},r.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,o){var u=e.mediaStream.getVideoTracks(),d=u.length,y=0;e.mediaStream.getVideoTracks().forEach(function(T){e.mediaStream.removeTrack(T),T.stop(),++y,y>=d&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},r.prototype.getCapabilities=function(){return new dR(this.getFirstTrackOrFail())},r})(),mR=(function(){function r(e){this.mediaStream=e}return r.prototype.render=function(e,n,o){return Nf(this,void 0,void 0,function(){return Rf(this,function(u){return[2,gR.create(e,this.mediaStream,n,o)]})})},r.create=function(e){return Nf(this,void 0,void 0,function(){var n,o;return Rf(this,function(u){switch(u.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return o=u.sent(),[2,new r(o)]}})})},r})(),QE=function(r,e,n,o){function u(d){return d instanceof n?d:new n(function(y){y(d)})}return new(n||(n=Promise))(function(d,y){function T(S){try{_(o.next(S))}catch(I){y(I)}}function b(S){try{_(o.throw(S))}catch(I){y(I)}}function _(S){S.done?d(S.value):u(S.value).then(T,b)}_((o=o.apply(r,e||[])).next())})},ZE=function(r,e){var n={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,u,d,y;return y={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function T(_){return function(S){return b([_,S])}}function b(_){if(o)throw new TypeError("Generator is already executing.");for(;y&&(y=0,_[0]&&(n=0)),n;)try{if(o=1,u&&(d=_[0]&2?u.return:_[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,_[1])).done)return d;switch(u=0,d&&(_=[_[0]&2,d.value]),_[0]){case 0:case 1:d=_;break;case 4:return n.label++,{value:_[1],done:!1};case 5:n.label++,u=_[1],_=[0];continue;case 7:_=n.ops.pop(),n.trys.pop();continue;default:if(d=n.trys,!(d=d.length>0&&d[d.length-1])&&(_[0]===6||_[0]===2)){n=0;continue}if(_[0]===3&&(!d||_[1]>d[0]&&_[1]<d[3])){n.label=_[1];break}if(_[0]===6&&n.label<d[1]){n.label=d[1],d=_;break}if(d&&n.label<d[2]){n.label=d[2],n.ops.push(_);break}d[2]&&n.ops.pop(),n.trys.pop();continue}_=e.call(r,n)}catch(S){_=[6,S],u=0}finally{o=d=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},pR=(function(){function r(){}return r.failIfNotSupported=function(){return QE(this,void 0,void 0,function(){return ZE(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new r]})})},r.prototype.create=function(e){return QE(this,void 0,void 0,function(){return ZE(this,function(n){return[2,mR.create(e)]})})},r})(),xR=function(r,e,n,o){function u(d){return d instanceof n?d:new n(function(y){y(d)})}return new(n||(n=Promise))(function(d,y){function T(S){try{_(o.next(S))}catch(I){y(I)}}function b(S){try{_(o.throw(S))}catch(I){y(I)}}function _(S){S.done?d(S.value):u(S.value).then(T,b)}_((o=o.apply(r,e||[])).next())})},yR=function(r,e){var n={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},o,u,d,y;return y={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function T(_){return function(S){return b([_,S])}}function b(_){if(o)throw new TypeError("Generator is already executing.");for(;y&&(y=0,_[0]&&(n=0)),n;)try{if(o=1,u&&(d=_[0]&2?u.return:_[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,_[1])).done)return d;switch(u=0,d&&(_=[_[0]&2,d.value]),_[0]){case 0:case 1:d=_;break;case 4:return n.label++,{value:_[1],done:!1};case 5:n.label++,u=_[1],_=[0];continue;case 7:_=n.ops.pop(),n.trys.pop();continue;default:if(d=n.trys,!(d=d.length>0&&d[d.length-1])&&(_[0]===6||_[0]===2)){n=0;continue}if(_[0]===3&&(!d||_[1]>d[0]&&_[1]<d[3])){n.label=_[1];break}if(_[0]===6&&n.label<d[1]){n.label=d[1],d=_;break}if(d&&n.label<d[2]){n.label=d[2],n.ops.push(_);break}d[2]&&n.ops.pop(),n.trys.pop();continue}_=e.call(r,n)}catch(S){_=[6,S],u=0}finally{o=d=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},ER=(function(){function r(){}return r.retrieve=function(){if(navigator.mediaDevices)return r.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?r.getCamerasFromMediaStreamTrack():r.rejectWithError()},r.rejectWithError=function(){var e=Hl.unableToQuerySupportedDevices();return r.isHttpsOrLocalhost()||(e=Hl.insecureContextCameraQueryError()),Promise.reject(e)},r.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},r.getCamerasFromMediaDevices=function(){return xR(this,void 0,void 0,function(){var e,n,o,u,d,y,T;return yR(this,function(b){switch(b.label){case 0:return e=function(_){for(var S=_.getVideoTracks(),I=0,M=S;I<M.length;I++){var V=M[I];V.enabled=!1,V.stop(),_.removeTrack(V)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=b.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(o=b.sent(),u=[],d=0,y=o;d<y.length;d++)T=y[d],T.kind==="videoinput"&&u.push({id:T.deviceId,label:T.label});return e(n),[2,u]}})})},r.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var o=function(d){for(var y=[],T=0,b=d;T<b.length;T++){var _=b[T];_.kind==="video"&&y.push({id:_.id,label:_.label})}e(y)},u=MediaStreamTrack;u.getSources(o)})},r})(),$n;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.NOT_STARTED=1]="NOT_STARTED",r[r.SCANNING=2]="SCANNING",r[r.PAUSED=3]="PAUSED"})($n||($n={}));var _R=(function(){function r(){this.state=$n.NOT_STARTED,this.onGoingTransactionNewState=$n.UNKNOWN}return r.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},r.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},r.prototype.execute=function(){if(this.onGoingTransactionNewState===$n.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=$n.UNKNOWN,this.directTransition(e)},r.prototype.cancel=function(){if(this.onGoingTransactionNewState===$n.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=$n.UNKNOWN},r.prototype.getState=function(){return this.state},r.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==$n.UNKNOWN)throw"Cannot transition to a new state, already under transition"},r.prototype.validateTransition=function(e){switch(this.state){case $n.UNKNOWN:throw"Transition from unknown is not allowed";case $n.NOT_STARTED:this.failIfNewStateIs(e,[$n.PAUSED]);break;case $n.SCANNING:break;case $n.PAUSED:break}},r.prototype.failIfNewStateIs=function(e,n){for(var o=0,u=n;o<u.length;o++){var d=u[o];if(e===d)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},r})(),wR=(function(){function r(e){this.stateManager=e}return r.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},r.prototype.directTransition=function(e){this.stateManager.directTransition(e)},r.prototype.getState=function(){return this.stateManager.getState()},r.prototype.canScanFile=function(){return this.stateManager.getState()===$n.NOT_STARTED},r.prototype.isScanning=function(){return this.stateManager.getState()!==$n.NOT_STARTED},r.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===$n.SCANNING},r.prototype.isPaused=function(){return this.stateManager.getState()===$n.PAUSED},r})(),AR=(function(){function r(){}return r.create=function(){return new wR(new _R)},r})(),bR=(function(){var r=function(e,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,u){o.__proto__=u}||function(o,u){for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(o[d]=u[d])},r(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");r(e,n);function o(){this.constructor=e}e.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),qi=(function(r){bR(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e})(eR),vR=(function(){function r(e,n){this.logger=n,this.fps=qi.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=qi.DEFAULT_DISABLE_FLIP}return r.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?tb.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},r.prototype.isShadedBoxEnabled=function(){return!Aa(this.qrbox)},r.create=function(e,n){return new r(e,n)},r})(),TR=(function(){function r(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var o;typeof n=="boolean"?this.verbose=n===!0:n&&(o=n,this.verbose=o.verbose===!0,o.experimentalFeatures),this.logger=new nR(this.verbose),this.qrcode=new cR(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(o),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=AR.create()}return r.prototype.start=function(e,n,o,u){var d=this;if(!e)throw"cameraIdOrConfig is required";if(!o||typeof o!="function")throw"qrCodeSuccessCallback is required and should be a function.";var y;u?y=u:y=this.verbose?this.logger.log:function(){};var T=vR.create(n,this.logger);this.clearElement();var b=!1;T.videoConstraints&&(T.isMediaStreamConstraintsValid()?b=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var _=b,S=document.getElementById(this.elementId);S.clientWidth?S.clientWidth:qi.DEFAULT_WIDTH,S.style.position="relative",this.shouldScan=!0,this.element=S;var I=this,M=this.stateManagerProxy.startTransition($n.SCANNING);return new Promise(function(V,K){var W=_?T.videoConstraints:I.createVideoConstraints(e);if(!W){M.cancel(),K("videoConstraints should be defined");return}var q={};(!_||T.aspectRatio)&&(q.aspectRatio=T.aspectRatio);var le={onRenderSurfaceReady:function(ae,ee){I.setupUi(ae,ee,T),I.isScanning=!0,I.foreverScan(T,o,y)}};pR.failIfNotSupported().then(function(ae){ae.create(W).then(function(ee){return ee.render(d.element,q,le).then(function(fe){I.renderedCamera=fe,M.execute(),V(null)}).catch(function(fe){M.cancel(),K(fe)})}).catch(function(ee){M.cancel(),K(Hl.errorGettingUserMedia(ee))})}).catch(function(ae){M.cancel(),K(Hl.cameraStreamingNotSupported())})})},r.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition($n.PAUSED),this.showPausedState(),(Aa(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},r.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition($n.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},r.prototype.getState=function(){return this.stateManagerProxy.getState()},r.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition($n.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var o=function(){if(e.element){var d=document.getElementById(qi.SHADED_REGION_ELEMENT_ID);d&&e.element.removeChild(d)}},u=this;return this.renderedCamera.close().then(function(){return u.renderedCamera=null,u.element&&(u.element.removeChild(u.canvasElement),u.canvasElement=null),o(),u.qrRegion&&(u.qrRegion=null),u.context&&(u.context=null),n.execute(),u.hidePausedState(),u.isScanning=!1,Promise.resolve()})},r.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(o){return o.decodedText})},r.prototype.scanFileV2=function(e,n){var o=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Aa(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(u,d){o.possiblyCloseLastScanImageFile(),o.clearElement(),o.lastScanImageFile=URL.createObjectURL(e);var y=new Image;y.onload=function(){var T=y.width,b=y.height,_=document.getElementById(o.elementId),S=_.clientWidth?_.clientWidth:qi.DEFAULT_WIDTH,I=Math.max(_.clientHeight?_.clientHeight:b,qi.FILE_SCAN_MIN_HEIGHT),M=o.computeCanvasDrawConfig(T,b,S,I);if(n){var V=o.createCanvasElement(S,I,"qr-canvas-visible");V.style.display="inline-block",_.appendChild(V);var K=V.getContext("2d");if(!K)throw"Unable to get 2d context from canvas";K.canvas.width=S,K.canvas.height=I,K.drawImage(y,0,0,T,b,M.x,M.y,M.width,M.height)}var W=qi.FILE_SCAN_HIDDEN_CANVAS_PADDING,q=Math.max(y.width,M.width),le=Math.max(y.height,M.height),ae=q+2*W,ee=le+2*W,fe=o.createCanvasElement(ae,ee);_.appendChild(fe);var je=fe.getContext("2d");if(!je)throw"Unable to get 2d context from canvas";je.canvas.width=ae,je.canvas.height=ee,je.drawImage(y,0,0,T,b,W,W,q,le);try{o.qrcode.decodeRobustlyAsync(fe).then(function(De){u(GE.createFromQrcodeResult(De))}).catch(d)}catch(De){d("QR code parse error, error = ".concat(De))}},y.onerror=d,y.onabort=d,y.onstalled=d,y.onsuspend=d,y.src=URL.createObjectURL(e)})},r.prototype.clear=function(){this.clearElement()},r.getCameras=function(){return ER.retrieve()},r.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},r.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},r.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},r.prototype.applyVideoConstraints=function(e){if(e){if(!tb.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},r.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},r.prototype.getSupportedFormats=function(e){var n=[Ye.QR_CODE,Ye.AZTEC,Ye.CODABAR,Ye.CODE_39,Ye.CODE_93,Ye.CODE_128,Ye.DATA_MATRIX,Ye.MAXICODE,Ye.ITF,Ye.EAN_13,Ye.EAN_8,Ye.PDF_417,Ye.RSS_14,Ye.RSS_EXPANDED,Ye.UPC_A,Ye.UPC_E,Ye.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var o=[],u=0,d=e.formatsToSupport;u<d.length;u++){var y=d[u];$8(y)?o.push(y):this.logger.warn("Invalid format: ".concat(y," passed in config, ignoring."))}if(o.length===0)throw"None of formatsToSupport match supported values.";return o},r.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Aa(e))return!0;if(!Aa(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(Aa(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return Aa(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},r.prototype.validateQrboxSize=function(e,n,o){var u=this,d=o.qrbox;this.validateQrboxConfig(d);var y=this.toQrdimensions(e,n,d),T=function(_){if(_<qi.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(qi.MIN_QR_BOX_SIZE,"px.")},b=function(_){return _>e&&(u.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),_=e),_};T(y.width),T(y.height),y.width=b(y.width)},r.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},r.prototype.toQrdimensions=function(e,n,o){if(typeof o=="number")return{width:o,height:o};if(typeof o=="function")try{return o(e,n)}catch(u){throw new Error("qrbox config was passed as a function but it failed with unknown error"+u)}return o},r.prototype.setupUi=function(e,n,o){o.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,o);var u=Aa(o.qrbox)?{width:e,height:n}:o.qrbox;this.validateQrboxConfig(u);var d=this.toQrdimensions(e,n,u);d.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var y=o.isShadedBoxEnabled()&&d.height<=n,T={x:0,y:0,width:e,height:n},b=y?this.getShadedRegionBounds(e,n,d):T,_=this.createCanvasElement(b.width,b.height),S={willReadFrequently:!0},I=_.getContext("2d",S);I.canvas.width=b.width,I.canvas.height=b.height,this.element.append(_),y&&this.possiblyInsertShadingElement(this.element,e,n,d),this.createScannerPausedUiElement(this.element),this.qrRegion=b,this.context=I,this.canvasElement=_},r.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=Hl.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},r.prototype.scanContext=function(e,n){var o=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(u){return e(u.text,GE.createFromQrcodeResult(u)),o.possiblyUpdateShaders(!0),!0}).catch(function(u){o.possiblyUpdateShaders(!1);var d=Hl.codeParseError(u);return n(d,tR.createFrom(d)),!1})},r.prototype.foreverScan=function(e,n,o){var u=this;if(this.shouldScan&&this.renderedCamera){var d=this.renderedCamera.getSurface(),y=d.videoWidth/d.clientWidth,T=d.videoHeight/d.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var b=this.qrRegion.width*y,_=this.qrRegion.height*T,S=this.qrRegion.x*y,I=this.qrRegion.y*T;this.context.drawImage(d,S,I,b,_,0,0,this.qrRegion.width,this.qrRegion.height);var M=function(){u.foreverScanTimeout=setTimeout(function(){u.foreverScan(e,n,o)},u.getTimeoutFps(e.fps))};this.scanContext(n,o).then(function(V){!V&&e.disableFlip!==!0?(u.context.translate(u.context.canvas.width,0),u.context.scale(-1,1),u.scanContext(n,o).finally(function(){M()})):M()}).catch(function(V){u.logger.logError("Error happend while scanning context",V),M()})}},r.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",o="deviceId",u={user:!0,environment:!0},d="exact",y=function(K){if(K in u)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(K,"'")},T=Object.keys(e);if(T.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(T.length," keys");var b=Object.keys(e)[0];if(b!==n&&b!==o)throw"Only '".concat(n,"' and '").concat(o,"' ")+" are supported for 'cameraIdOrConfig'";if(b===n){var _=e.facingMode;if(typeof _=="string"){if(y(_))return{facingMode:_}}else if(typeof _=="object")if(d in _){if(y(_["".concat(d)]))return{facingMode:{exact:_["".concat(d)]}}}else throw"'facingMode' should be string or object with"+" ".concat(d," as key.");else{var S=typeof _;throw"Invalid type of 'facingMode' = ".concat(S)}}else{var I=e.deviceId;if(typeof I=="string")return{deviceId:I};if(typeof I=="object"){if(d in I)return{deviceId:{exact:I["".concat(d)]}};throw"'deviceId' should be string or object with"+" ".concat(d," as key.")}else{var M=typeof I;throw"Invalid type of 'deviceId' = ".concat(M)}}}var V=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(V)},r.prototype.computeCanvasDrawConfig=function(e,n,o,u){if(e<=o&&n<=u){var d=(o-e)/2,y=(u-n)/2;return{x:d,y,width:e,height:n}}else{var T=e,b=n;return e>o&&(n=o/e*n,e=o),n>u&&(e=u/n*e,n=u),this.logger.log("Image downsampled from "+"".concat(T,"X").concat(b)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,o,u)}},r.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},r.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?qi.BORDER_SHADER_MATCH_COLOR:qi.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},r.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},r.prototype.createCanvasElement=function(e,n,o){var u=e,d=n,y=document.createElement("canvas");return y.style.width="".concat(u,"px"),y.style.height="".concat(d,"px"),y.style.display="none",y.id=Aa(o)?"qr-canvas":o,y},r.prototype.getShadedRegionBounds=function(e,n,o){if(o.width>e||o.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-o.width)/2,y:(n-o.height)/2,width:o.width,height:o.height}},r.prototype.possiblyInsertShadingElement=function(e,n,o,u){if(!(n-u.width<1||o-u.height<1)){var d=document.createElement("div");d.style.position="absolute";var y=(n-u.width)/2,T=(o-u.height)/2;if(d.style.borderLeft="".concat(y,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderRight="".concat(y,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderTop="".concat(T,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderBottom="".concat(T,"px solid rgba(0, 0, 0, 0.48)"),d.style.boxSizing="border-box",d.style.top="0px",d.style.bottom="0px",d.style.left="0px",d.style.right="0px",d.id="".concat(qi.SHADED_REGION_ELEMENT_ID),n-u.width<11||o-u.height<11)this.hasBorderShaders=!1;else{var b=5,_=40;this.insertShaderBorders(d,_,b,-b,null,0,!0),this.insertShaderBorders(d,_,b,-b,null,0,!1),this.insertShaderBorders(d,_,b,null,-b,0,!0),this.insertShaderBorders(d,_,b,null,-b,0,!1),this.insertShaderBorders(d,b,_+b,-b,null,-b,!0),this.insertShaderBorders(d,b,_+b,null,-b,-b,!0),this.insertShaderBorders(d,b,_+b,-b,null,-b,!1),this.insertShaderBorders(d,b,_+b,null,-b,-b,!1),this.hasBorderShaders=!0}e.append(d)}},r.prototype.insertShaderBorders=function(e,n,o,u,d,y,T){var b=document.createElement("div");b.style.position="absolute",b.style.backgroundColor=qi.BORDER_SHADER_DEFAULT_COLOR,b.style.width="".concat(n,"px"),b.style.height="".concat(o,"px"),u!==null&&(b.style.top="".concat(u,"px")),d!==null&&(b.style.bottom="".concat(d,"px")),T?b.style.left="".concat(y,"px"):b.style.right="".concat(y,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(b),e.appendChild(b)},r.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},r.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},r.prototype.getTimeoutFps=function(e){return 1e3/e},r})(),JE;(function(r){r[r.STATUS_DEFAULT=0]="STATUS_DEFAULT",r[r.STATUS_SUCCESS=1]="STATUS_SUCCESS",r[r.STATUS_WARNING=2]="STATUS_WARNING",r[r.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(JE||(JE={}));const CR=({onRefresh:r})=>{var bn;const{showAlert:e}=tc(),[n,o]=ie.useState("roster"),[u,d]=ie.useState(!1),[y,T]=ie.useState([]),[b,_]=ie.useState([]),[S,I]=ie.useState([]),[M,V]=ie.useState([]),[K,W]=ie.useState([]),[q,le]=ie.useState([]),[ae,ee]=ie.useState([]),[fe,je]=ie.useState([]),[De,z]=ie.useState(""),[U,j]=ie.useState(new Date().toISOString().substring(0,7)),[$,Q]=ie.useState(""),[Z,X]=ie.useState([]),[We,de]=ie.useState([]),[pe,be]=ie.useState(""),[He,ot]=ie.useState(null),gt=er.useRef(y);er.useEffect(()=>{gt.current=y},[y]);const[re,Ae]=ie.useState(""),[Be,ke]=ie.useState(""),[nt,Me]=ie.useState("normal"),[_t,Ct]=ie.useState(""),[Jt,Dr]=ie.useState(!1),[an,si]=ie.useState(""),[wt,cr]=ie.useState("100"),[nr,Gr]=ie.useState(""),[En,Ht]=ie.useState(""),[Qe,_n]=ie.useState(!1),[Fe,ws]=ie.useState(""),[Ki,dn]=ie.useState(""),[ai,ur]=ie.useState(""),[Yr,rr]=ie.useState(""),[Kn,Rs]=ie.useState(""),[Wi,Ws]=ie.useState(""),[Gt,Re]=ie.useState(!1),[Yt,rt]=ie.useState(null),[nn,oi]=ie.useState(""),[As,qr]=ie.useState(""),[At,rn]=ie.useState(!1),[Xr,Kr]=ie.useState(null),[wn,Os]=ie.useState(""),[Pn,Er]=ie.useState(!1);ie.useEffect(()=>{const F=$6(Nn=>{_(Nn.filter(ct=>ct.role===ms.STUDENT&&ct.isApproved)),I(Nn.filter(ct=>ct.role===ms.STUDENT&&!ct.isApproved));const vn=Nn.filter(ct=>ct.role===ms.STUDENT&&ct.isApproved);vn.length>0&&!an&&si(vn[0].id)}),Je=wA(T),Ue=EA(V),St=yA(W),kn=W6(le),ut=_A(ee),bt=pA(je),vt=gA(Nn=>{X(Nn),Nn.length>0&&!Yr&&rr(Nn[0].name)}),Ji=Gg(de);return()=>{F(),Je(),Ue(),St(),kn(),ut(),bt(),vt(),Ji()}},[an,Yr]),ie.useEffect(()=>{let F=null;return(async()=>{if(n==="scan")try{F=new TR("reader"),await F.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250},aspectRatio:1},Ue=>{Ue&&xi(Ue)},()=>{})}catch(Ue){console.error("Unable to start scanner",Ue)}})(),()=>{F&&F.isScanning&&F.stop().then(()=>{F==null||F.clear()}).catch(Ue=>console.error("Failed to stop scanner",Ue))}},[n]);const xi=F=>{if(He)return;const Je=gt.current.find(Ue=>Ue.qrCodeData===F&&Ue.status==="pending");Je&&ot(Je)},Wr=async F=>{const Je=pe;if(!Je){e("","error");return}d(!0),setTimeout(()=>{const Ue=y.find(St=>St.qrCodeData===Je&&St.status==="pending");Ue?(ot(Ue),be("")):e("","error"),d(!1)},800)},Qi=async F=>{He&&(await D6(F,"completed"),ot(null),e("","success"))},li=async()=>{const F=parseInt(wt);if(isNaN(F)||!an)return;const Je=b.find(kn=>kn.id===an);if(!Je){e("","error");return}const Ue=parseInt(wt);if(isNaN(Ue)||Ue<=0){e("","error");return}const St=b.map(kn=>kn.id===an?{...kn,points:kn.points+F,totalEarned:F>0?kn.totalEarned+F:kn.totalEarned}:kn);await C6(St),r(),_(kn=>kn.map(ut=>ut.id===an?{...ut,points:ut.points+Ue}:ut)),cr(""),e(` ${Je.name} ${Ue} `,"success")},Zi=F=>new Promise((Je,Ue)=>{const St=new FileReader;St.onload=()=>Je(St.result),St.onerror=Ue,St.readAsDataURL(F)}),Bn=async F=>{var Ue;const Je=(Ue=F.target.files)==null?void 0:Ue[0];if(Je){if(Je.size>500*1024){e(" 500KB ","error");return}try{const St=await Zi(Je);Rs(St),rt(St)}catch{e("","error")}}},_r=async F=>{var Ue;const Je=(Ue=F.target.files)==null?void 0:Ue[0];if(Je){if(Je.size>500*1024){e(" 500KB ","error");return}try{const St=await Zi(Je);oi(St),Kr(St)}catch{e("","error")}}},wr=async(F,Je)=>{const Ue={...F,grade:Je};await mu(Ue),e(` ${F.name}  ${Je}`,"success")},Ve=async(F,Je,Ue)=>{const St=parseInt(Ue);if(isNaN(St))return;const kn={...F,[Je]:St};await mu(kn)},hr=async F=>{await I6(F),e("","success")},An=async F=>{confirm("/")&&await N6(F)},qt=async F=>{if(F.preventDefault(),!Fe||!Ki||!ai){e("","error");return}if(Fe&&Ki){const Je={id:`prod_${Date.now()}`,name:Fe,category:Yr,price:parseInt(Ki),description:Wi||`${Yr==="food"?"":Yr==="electronic"?"":Yr==="ticket"?"":""}`,imageUrl:Kn||"https://images.unsplash.com/photo-1553456558-aff63285bdd1?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3",stock:parseInt(ai)||99};await Y6(Je),Re(!1),ws(""),dn(""),ur(""),Rs(""),rt(null),rr("other"),Ws(""),e("","success")}},Ar=async F=>{window.confirm("")&&await q6(F)},Mi=async F=>{if(F.preventDefault(),!re||!Be){e("","error");return}const Je={id:`m_${Date.now()}`,title:re,description:"",points:parseInt(Be),type:nt,isActive:!0,maxAttempts:1,deadline:_t?new Date(_t).getTime():void 0};await k6(Je),Dr(!1),Ae(""),ke(""),Me("normal"),Ct(""),e("","success")},Ds=async F=>{window.confirm("")&&e("","success")},Mr=async()=>{if(!En){e("","error");return}await X6({id:`r_${Date.now()}`,title:En}),Ht(""),_n(!1),e("","success")},Ma=async F=>{await K6(F)},yi=async F=>{await U6(F)},br=async(F,Je)=>{await xA(F,Je),e("","success")},gn=async F=>{await z6(F),e("","success")},Dt=async F=>{confirm("")&&await H6(F)},Sr=y.filter(F=>{var ut,bt;const Je=(((ut=F.productName)==null?void 0:ut.toLowerCase())||"").includes(De.toLowerCase())||(((bt=F.id)==null?void 0:bt.toLowerCase())||"").includes(De.toLowerCase()),Ue=new Date(F.timestamp),kn=`${Ue.getFullYear()}-${String(Ue.getMonth()+1).padStart(2,"0")}`===U;return Je&&kn}),ir=F=>po.reduce((Je,Ue)=>F>=Ue.threshold?Ue:Je,po[0]);return v.jsxs("div",{className:"space-y-8 pb-20 animate-in fade-in duration-500",children:[v.jsx("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:v.jsxs("div",{children:[v.jsxs("h1",{className:"text-4xl font-black text-slate-800 flex items-center gap-4",children:[v.jsx("div",{className:"bg-indigo-600 p-3 rounded-2xl text-white shadow-xl shadow-indigo-100",children:v.jsx(sf,{size:32})}),""]}),v.jsx("p",{className:"text-slate-500 mt-2 italic font-medium",children:""})]})}),v.jsxs("div",{className:"flex bg-white p-2 rounded-3xl border border-slate-100 shadow-md overflow-x-auto gap-2",children:[v.jsxs("button",{onClick:()=>o("roster"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${n==="roster"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[v.jsx(TC,{size:18})," ",v.jsx("span",{children:""})]}),v.jsxs("button",{onClick:()=>o("approval"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${n==="approval"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50 relative"}`,children:[v.jsx(x1,{size:18})," ",v.jsx("span",{children:""}),S.length>0&&v.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full text-white text-[10px] flex items-center justify-center border-2 border-white",children:S.length})]}),v.jsxs("button",{onClick:()=>o("points"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${n==="points"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[v.jsx(DT,{size:18})," ",v.jsx("span",{children:""})]}),v.jsxs("button",{onClick:()=>o("products"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${n==="products"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[v.jsx(m1,{size:18})," ",v.jsx("span",{children:""})]}),v.jsxs("button",{onClick:()=>o("banners"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${n==="banners"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[v.jsx(mx,{size:18})," ",v.jsx("span",{children:""})]}),v.jsxs("button",{onClick:()=>o("mission_approval"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${n==="mission_approval"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50 relative"}`,children:[v.jsx(su,{size:18})," ",v.jsx("span",{children:""}),fe.filter(F=>F.status==="pending").length>0&&v.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-pink-500 rounded-full text-white text-[10px] flex items-center justify-center border-2 border-white",children:fe.filter(F=>F.status==="pending").length})]}),v.jsxs("button",{onClick:()=>o("scan"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${n==="scan"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[v.jsx(g1,{size:18})," ",v.jsx("span",{children:""})]}),v.jsxs("button",{onClick:()=>o("history"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${n==="history"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[v.jsx(rf,{size:18})," ",v.jsx("span",{children:""})]}),v.jsxs("button",{onClick:()=>o("missions"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${n==="missions"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[v.jsx(Zc,{size:18})," ",v.jsx("span",{children:""})]}),v.jsxs("button",{onClick:()=>o("wishes"),className:`flex items-center justify-center gap-3 py-4 px-6 rounded-2xl font-black transition-all whitespace-nowrap ${n==="wishes"?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"text-slate-400 hover:text-slate-600 hover:bg-slate-50 relative"}`,children:[v.jsx(Kh,{size:18})," ",v.jsx("span",{children:""}),ae.length>0&&v.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-pink-500 rounded-full text-white text-[10px] flex items-center justify-center border-2 border-white",children:ae.length})]})]}),n==="roster"&&v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 animate-in slide-in-from-bottom-4",children:b.map(F=>{const Je=ir(F.totalEarned);return v.jsxs("div",{className:"bg-white rounded-[2.5rem] p-8 border border-slate-100 shadow-sm hover:shadow-xl transition-all group overflow-hidden relative",children:[v.jsx("div",{className:`absolute top-0 right-0 w-24 h-24 ${Je.color} opacity-5 -translate-y-12 translate-x-12 rounded-full`}),v.jsxs("div",{className:"flex flex-col items-center text-center",children:[v.jsxs("div",{className:"relative mb-6",children:[v.jsx("div",{className:`absolute inset-0 rounded-full blur-xl opacity-20 ${Je.color}`}),v.jsx("img",{src:F.avatar,className:"w-24 h-24 rounded-full border-4 border-white shadow-2xl relative z-10 object-cover",alt:F.name}),v.jsx("div",{className:"absolute -bottom-2 -right-2 w-10 h-10 rounded-2xl bg-white shadow-lg flex items-center justify-center text-xl z-20 border border-slate-50",children:Je.icon})]}),v.jsx("h3",{className:"text-2xl font-black text-slate-800 mb-1",children:F.name}),v.jsx("div",{className:`px-4 py-1 rounded-full text-[10px] font-black text-white uppercase tracking-widest mb-2 ${Je.color} shadow-sm`,children:Je.name}),v.jsx("div",{className:"mb-6",children:v.jsx("select",{value:F.grade||"",onChange:Ue=>wr(F,Ue.target.value),className:"text-xs font-bold text-slate-500 bg-slate-50 border border-slate-100 rounded-lg px-2 py-1 outline-none pointer-events-auto",children:F1.map(Ue=>v.jsx("option",{value:Ue,children:Ue},Ue))})}),v.jsxs("div",{className:"w-full grid grid-cols-2 gap-4",children:[v.jsxs("div",{className:"bg-indigo-50/50 p-4 rounded-2xl border border-indigo-50",children:[v.jsx("p",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest mb-1",children:""}),v.jsx("input",{type:"number",defaultValue:F.points,onBlur:Ue=>Ve(F,"points",Ue.target.value),className:"w-full bg-transparent text-xl font-black text-indigo-600 focus:outline-none"})]}),v.jsxs("div",{className:"bg-amber-50/50 p-4 rounded-2xl border border-amber-50",children:[v.jsx("p",{className:"text-[10px] font-black text-amber-400 uppercase tracking-widest mb-1",children:""}),v.jsx("input",{type:"number",defaultValue:F.totalEarned,onBlur:Ue=>Ve(F,"totalEarned",Ue.target.value),className:"w-full bg-transparent text-xl font-black text-amber-600 focus:outline-none"})]})]})]}),v.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-50 flex justify-between items-center gap-4",children:[v.jsxs("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-tighter truncate max-w-[80px]",children:["ID: ",F.id.replace("user_","")]}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsxs("button",{onClick:()=>{si(F.id),o("points")},className:"text-indigo-600 font-black text-xs hover:underline flex items-center gap-1",children:[v.jsx(gx,{size:14})," "]}),v.jsx("button",{onClick:()=>An(F.id),className:"text-slate-300 hover:text-rose-500 transition-colors",title:"",children:v.jsx(Ph,{size:16})})]})]})]},F.id)})}),n==="points"&&v.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[v.jsxs("div",{className:"flex items-center gap-6 mb-12",children:[v.jsx("div",{className:"w-20 h-20 bg-emerald-50 text-emerald-600 rounded-3xl flex items-center justify-center shadow-inner",children:v.jsx(gx,{size:40})}),v.jsxs("div",{children:[v.jsx("h2",{className:"text-3xl font-black text-slate-800 tracking-tight",children:""}),v.jsx("p",{className:"text-slate-400 font-medium",children:""})]})]}),v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16",children:[v.jsxs("div",{className:"space-y-8",children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("span",{className:"text-[10px] font-bold text-slate-400",children:":"}),v.jsxs("select",{value:$,onChange:F=>Q(F.target.value),className:"text-[10px] font-bold text-slate-600 bg-slate-50 border border-slate-200 rounded-lg px-2 py-1 outline-none",children:[v.jsx("option",{value:"",children:""}),F1.map(F=>v.jsx("option",{value:F,children:F},F))]})]})]}),v.jsx("div",{className:"grid grid-cols-3 gap-4 max-h-[400px] overflow-y-auto p-2",children:b.filter(F=>$===""||F.grade===$).map(F=>v.jsxs("button",{onClick:()=>si(F.id),className:`flex flex-col items-center gap-3 p-4 rounded-3xl border-2 transition-all ${an===F.id?"border-indigo-600 bg-indigo-50 shadow-lg shadow-indigo-100":"border-slate-50 bg-slate-50/50 hover:bg-white hover:border-slate-200"}`,children:[v.jsx("img",{src:F.avatar,className:"w-12 h-12 rounded-full shadow-sm",alt:F.name}),v.jsx("span",{className:`font-black text-sm ${an===F.id?"text-indigo-600":"text-slate-600"}`,children:F.name})]},F.id))})]}),v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),v.jsxs("button",{onClick:()=>_n(!Qe),className:"text-xs font-black text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:[Qe?v.jsx(uo,{size:14}):v.jsx(Pl,{size:14}),Qe?"":""]})]}),Qe?v.jsxs("div",{className:"bg-slate-50 p-6 rounded-2xl border-2 border-indigo-100 mb-4 animate-in zoom-in-95 duration-200",children:[v.jsxs("div",{className:"flex gap-2",children:[v.jsx("input",{type:"text",placeholder:" (: )",value:En,onChange:F=>Ht(F.target.value),className:"flex-1 p-3 border-2 border-slate-200 rounded-xl focus:border-indigo-600 outline-none font-bold"}),v.jsx("button",{onClick:Mr,className:"bg-indigo-600 text-white p-3 rounded-xl hover:bg-indigo-700 shadow-md",children:v.jsx(Pl,{size:20})})]}),v.jsx("div",{className:"mt-4 space-y-2 max-h-40 overflow-y-auto pr-2",children:q.map(F=>v.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg border border-slate-100",children:[v.jsx("span",{className:"font-bold text-sm text-slate-700",children:F.title}),v.jsx("button",{onClick:()=>Ma(F.id),className:"text-rose-500 hover:text-rose-600",children:v.jsx(Ph,{size:16})})]},F.id))})]}):v.jsxs("select",{value:nr,onChange:F=>Gr(F.target.value),className:"w-full p-5 bg-slate-50 border-2 border-transparent rounded-2xl focus:bg-white focus:border-indigo-600 focus:ring-4 focus:ring-indigo-100 transition-all outline-none font-bold text-slate-700 shadow-inner",children:[v.jsx("option",{value:"",children:"..."}),q.length>0?q.map(F=>v.jsx("option",{value:F.title,children:F.title},F.id)):v.jsxs(v.Fragment,{children:[v.jsx("option",{children:""}),v.jsx("option",{children:""}),v.jsx("option",{children:" A++"}),v.jsx("option",{children:""})]}),v.jsx("option",{value:"other",children:""})]}),nr==="other"&&!Qe&&v.jsx("input",{type:"text",placeholder:"...",value:nr==="other"?"":nr,onChange:F=>Gr(F.target.value),className:"w-full mt-4 p-5 bg-white border-2 border-indigo-200 rounded-2xl outline-none font-bold text-slate-700"})]})]}),v.jsxs("div",{className:"space-y-8",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-[0.2em] mb-4",children:""}),v.jsxs("div",{className:"relative",children:[v.jsx("input",{type:"number",value:wt,onChange:F=>cr(F.target.value),className:"w-full p-8 text-5xl font-black bg-slate-50 border-2 border-transparent rounded-[2rem] focus:bg-white focus:border-indigo-600 focus:ring-4 focus:ring-indigo-100 transition-all outline-none text-indigo-600 shadow-inner"}),v.jsx("div",{className:"absolute right-8 top-1/2 -translate-y-1/2 flex items-center gap-2 pointer-events-none",children:v.jsx("span",{className:"font-black text-slate-300 text-2xl uppercase tracking-tighter",children:"PTS"})})]})]}),v.jsxs("button",{onClick:li,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white font-black py-8 rounded-[2rem] transition-all shadow-2xl shadow-emerald-200 flex items-center justify-center gap-4 text-2xl active:scale-95 group",children:[v.jsx(Wo,{size:32,className:"group-hover:scale-125 transition-transform"}),""]})]})]}),n==="approval"&&v.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[v.jsxs("h2",{className:"text-3xl font-black text-slate-800 mb-8 flex items-center gap-3",children:[v.jsx(x1,{className:"text-indigo-600"}),"",v.jsxs("span",{className:"bg-indigo-100 text-indigo-600 text-sm px-3 py-1 rounded-full",children:[S.length," "]})]}),v.jsx("div",{className:"space-y-4",children:S.length===0?v.jsx("div",{className:"text-center py-20 text-slate-400 font-bold",children:""}):S.map(F=>v.jsxs("div",{className:"flex items-center justify-between p-6 bg-slate-50 rounded-2xl border border-slate-100",children:[v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("div",{className:"w-12 h-12 bg-indigo-200 rounded-full flex items-center justify-center text-indigo-700 font-bold text-xl",children:F.name[0]}),v.jsxs("div",{children:[v.jsx("h3",{className:"font-black text-lg text-slate-800",children:F.name}),v.jsx("p",{className:"text-slate-500 text-sm font-bold",children:F.grade||""})]})]}),v.jsxs("div",{className:"flex gap-3",children:[v.jsx("button",{onClick:()=>hr(F.id),className:"bg-emerald-500 hover:bg-emerald-600 text-white px-6 py-2 rounded-xl font-bold transition-all shadow-lg shadow-emerald-100",children:""}),v.jsx("button",{onClick:()=>An(F.id),className:"bg-slate-200 hover:bg-rose-500 hover:text-white text-slate-500 px-6 py-2 rounded-xl font-bold transition-all",children:""})]})]},F.id))})]}),n==="products"&&v.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[v.jsxs("div",{className:"flex justify-between items-center mb-8",children:[v.jsxs("h2",{className:"text-3xl font-black text-slate-800 flex items-center gap-3",children:[v.jsx(m1,{className:"text-indigo-600"})," "]}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsxs("button",{onClick:()=>Er(!Pn),className:"bg-slate-100 text-slate-600 px-5 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-slate-200 transition-all border border-slate-200",children:[v.jsx(Zc,{size:18})," "]}),v.jsxs("button",{onClick:()=>Re(!Gt),className:"bg-indigo-600 text-white px-5 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100",children:[v.jsx(Pl,{size:20})," "]})]})]}),Pn&&v.jsxs("div",{className:"bg-slate-50 p-6 rounded-2xl mb-8 border border-slate-200 animate-in fade-in",children:[v.jsx("h3",{className:"font-black text-slate-700 mb-4",children:""}),v.jsxs("div",{className:"flex gap-4 mb-6",children:[v.jsx("input",{placeholder:" (: )",value:wn,onChange:F=>Os(F.target.value),className:"flex-1 p-3 rounded-xl border border-slate-200 font-bold outline-none"}),v.jsx("button",{onClick:()=>{wn&&(M6(wn),Os(""))},className:"bg-emerald-600 text-white px-6 py-3 rounded-xl font-bold hover:bg-emerald-700",children:""})]}),v.jsx("div",{className:"flex flex-wrap gap-3",children:Z.map(F=>v.jsxs("div",{className:"bg-white px-4 py-2 rounded-xl border border-slate-200 flex items-center gap-2 shadow-sm font-bold text-slate-600",children:[F.name,v.jsx("button",{onClick:()=>L6(F.id),className:"text-slate-300 hover:text-rose-500",children:v.jsx(uo,{size:14})})]},F.id))})]}),Gt&&v.jsxs("form",{onSubmit:qt,className:"bg-slate-50 p-6 rounded-2xl mb-8 border border-slate-200 animate-in fade-in",children:[v.jsx("h3",{className:"font-black text-slate-700 mb-4",children:""}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[v.jsx("input",{placeholder:"",value:Fe,onChange:F=>ws(F.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"}),v.jsxs("select",{value:Yr,onChange:F=>rr(F.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500",children:[Z.map(F=>v.jsx("option",{value:F.name,children:F.name},F.id)),Z.length===0&&v.jsx("option",{value:"",children:""})]}),v.jsxs("div",{className:"flex flex-col gap-2",children:[v.jsxs("label",{className:"flex items-center justify-center gap-2 p-3 rounded-xl border-2 border-dashed border-slate-300 hover:border-indigo-400 hover:bg-indigo-50 transition-all cursor-pointer font-bold text-slate-500 hover:text-indigo-600",children:[v.jsx(p1,{size:18}),Kn?"":" (200KB)",v.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:Bn})]}),Yt&&v.jsx("img",{src:Yt,className:"h-20 w-auto object-cover rounded-lg border border-slate-200",alt:"preview"})]}),v.jsx("input",{placeholder:" ()",type:"number",value:Ki,onChange:F=>dn(F.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"}),v.jsx("textarea",{placeholder:" ()",value:Wi,onChange:F=>Ws(F.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500 md:col-span-2 h-24"}),v.jsx("input",{placeholder:"",type:"number",value:ai,onChange:F=>ur(F.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"})]}),v.jsxs("div",{className:"flex justify-end gap-2",children:[v.jsx("button",{type:"button",onClick:()=>Re(!1),className:"px-4 py-2 text-slate-400 font-bold hover:text-slate-600",children:""}),v.jsx("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700",children:""})]})]}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:M.map(F=>v.jsxs("div",{className:"border border-slate-100 rounded-[2rem] p-6 flex flex-col gap-4 group hover:shadow-xl transition-all bg-white relative",children:[v.jsxs("div",{className:"flex gap-4 items-center",children:[v.jsx("img",{src:F.imageUrl,alt:F.name,className:"w-20 h-20 rounded-2xl object-cover shadow-sm"}),v.jsxs("div",{className:"flex-1",children:[v.jsx("h4",{className:"font-black text-slate-800 text-lg",children:F.name}),v.jsx("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest",children:F.category}),v.jsxs("p",{className:"text-indigo-600 font-black",children:[F.price," PTS"]})]}),v.jsx("button",{onClick:()=>Ar(F.id),className:"p-2 text-slate-300 hover:text-rose-500 transition-colors",children:v.jsx(Ph,{size:18})})]}),v.jsx("div",{className:"flex items-center justify-between pt-4 border-t border-slate-50",children:v.jsxs("div",{className:"flex flex-col",children:[v.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter mb-1",children:""}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("input",{type:"number",defaultValue:F.stock,onBlur:Je=>br(F.id,parseInt(Je.target.value)||0),className:"w-16 p-2 bg-slate-50 border border-slate-200 rounded-lg text-sm font-black text-slate-700 outline-none focus:ring-2 focus:ring-indigo-500"}),v.jsx("span",{className:`text-[10px] font-black px-2 py-1 rounded-lg ${F.stock>0?"bg-emerald-100 text-emerald-600":"bg-red-100 text-red-600"}`,children:F.stock>0?"ON SALE":"SOLD OUT"})]})]})})]},F.id))})]}),n==="mission_approval"&&v.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[v.jsxs("h2",{className:"text-3xl font-black text-slate-800 mb-8 flex items-center gap-3",children:[v.jsx(su,{className:"text-emerald-600"}),"",v.jsxs("span",{className:"bg-emerald-100 text-emerald-600 text-sm px-3 py-1 rounded-full",children:[fe.filter(F=>F.status==="pending").length," "]})]}),v.jsx("div",{className:"space-y-6",children:fe.filter(F=>F.status==="pending").length===0?v.jsx("div",{className:"text-center py-24 text-slate-400 font-bold bg-slate-50 rounded-[3rem] border border-slate-100 border-dashed",children:""}):fe.filter(F=>F.status==="pending").map(F=>v.jsxs("div",{className:"bg-slate-50 p-8 rounded-[2.5rem] border border-slate-100 flex flex-col md:flex-row md:items-center justify-between gap-6",children:[v.jsxs("div",{className:"flex items-center gap-6",children:[v.jsx("div",{className:"w-16 h-16 bg-white rounded-2xl shadow-sm flex items-center justify-center text-2xl font-black text-indigo-600 border border-slate-100",children:F.userName[0]}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-xl font-black text-slate-800",children:F.userName}),v.jsxs("p",{className:"text-slate-500 font-bold flex items-center gap-2",children:["",v.jsxs("span",{className:"text-indigo-600",children:["",F.missionTitle,""]})]}),v.jsxs("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest mt-2",children:["",F.points," PTS  ",new Date(F.timestamp).toLocaleString()]})]})]}),v.jsxs("div",{className:"flex gap-4",children:[v.jsxs("button",{onClick:()=>gn(F.id),className:"bg-emerald-600 hover:bg-emerald-700 text-white px-8 py-3 rounded-2xl font-black transition-all shadow-xl shadow-emerald-100 flex items-center gap-2",children:[v.jsx(Wo,{size:20})," "]}),v.jsx("button",{onClick:()=>Dt(F.id),className:"bg-white hover:bg-rose-50 text-slate-400 hover:text-rose-600 px-8 py-3 rounded-2xl font-black transition-all border border-slate-200",children:""})]})]},F.id))})]}),n==="scan"&&v.jsxs("div",{className:"bg-white rounded-[3rem] p-16 border border-slate-100 text-center shadow-xl animate-in fade-in",children:[v.jsx("div",{className:"bg-indigo-50 w-32 h-32 rounded-[2.5rem] flex items-center justify-center mx-auto mb-8 text-indigo-600 shadow-inner",children:v.jsx(g1,{size:56})}),v.jsx("h2",{className:"text-3xl font-black text-slate-800 mb-4 tracking-tight",children:"QR Code "}),v.jsx("p",{className:"text-slate-400 mb-8 font-medium max-w-md mx-auto leading-relaxed",children:" QR Code "}),v.jsx("div",{className:"max-w-md mx-auto mb-8 overflow-hidden rounded-[2rem] border-4 border-indigo-50 shadow-inner",children:v.jsx("div",{id:"reader",className:"w-full"})}),v.jsxs("div",{className:"max-w-md mx-auto mb-8",children:[v.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[v.jsx("div",{className:"h-px bg-slate-200 flex-1"}),v.jsx("span",{className:"text-[10px] font-black text-slate-300 uppercase tracking-widest",children:""}),v.jsx("div",{className:"h-px bg-slate-200 flex-1"})]}),v.jsx("input",{type:"text",placeholder:" QR Code ...",value:pe,onChange:F=>be(F.target.value),className:"w-full p-4 bg-slate-50 border-2 border-indigo-50 rounded-2xl focus:bg-white focus:border-indigo-600 outline-none font-mono text-xs text-slate-500 text-center"})]}),v.jsx("button",{onClick:()=>Wr(),disabled:u,className:"bg-indigo-600 hover:bg-indigo-700 disabled:bg-slate-300 text-white px-16 py-6 rounded-[2rem] font-black transition-all shadow-2xl shadow-indigo-200 inline-flex items-center justify-center gap-4 text-xl active:scale-95",children:u?"...":""})]}),n==="history"&&v.jsxs("section",{className:"bg-white rounded-[3rem] border border-slate-100 shadow-xl overflow-hidden animate-in fade-in",children:[v.jsxs("div",{className:"p-10 border-b border-slate-50 flex flex-col md:flex-row md:items-center justify-between gap-6",children:[v.jsxs("h2",{className:"font-black text-2xl text-slate-800 flex items-center gap-3",children:[v.jsx(rf,{className:"text-indigo-600"}),""]}),v.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[v.jsx("div",{className:"relative",children:v.jsx("input",{type:"month",value:U,onChange:F=>j(F.target.value),className:"pl-5 pr-5 py-4 rounded-2xl bg-slate-50 border-2 border-transparent focus:bg-white focus:border-indigo-600 focus:ring-4 focus:ring-indigo-100 transition-all outline-none text-sm font-bold shadow-inner"})}),v.jsxs("div",{className:"relative",children:[v.jsx(eC,{className:"absolute left-5 top-1/2 -translate-y-1/2 text-slate-400",size:20}),v.jsx("input",{type:"text",placeholder:"...",value:De,onChange:F=>z(F.target.value),className:"pl-14 pr-8 py-4 rounded-2xl bg-slate-50 border-2 border-transparent focus:bg-white focus:border-indigo-600 focus:ring-4 focus:ring-indigo-100 transition-all outline-none text-sm w-full md:w-80 shadow-inner font-bold"})]})]})]}),v.jsx("div",{className:"overflow-x-auto",children:v.jsxs("table",{className:"w-full",children:[v.jsx("thead",{className:"bg-slate-50/50",children:v.jsxs("tr",{children:[v.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),v.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),v.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),v.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),v.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""}),v.jsx("th",{className:"px-10 py-6 text-left text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:""})]})}),v.jsx("tbody",{className:"divide-y divide-slate-50",children:Sr.map(F=>{var Je;try{return v.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors",children:[v.jsx("td",{className:"px-10 py-6 whitespace-nowrap",children:v.jsx("span",{className:`px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest ${F.status==="completed"?"bg-emerald-100 text-emerald-700":F.status==="pending"?"bg-amber-100 text-amber-700":"bg-rose-100 text-rose-700"}`,children:F.status==="completed"?"":F.status==="pending"?"":""})}),v.jsx("td",{className:"px-10 py-6 whitespace-nowrap font-black text-slate-800",children:((Je=b.find(Ue=>Ue.id===F.userId))==null?void 0:Je.name)||""}),v.jsx("td",{className:"px-10 py-6 whitespace-nowrap font-bold text-slate-600",children:F.productName}),v.jsxs("td",{className:"px-10 py-6 whitespace-nowrap text-indigo-600 font-black",children:[F.pointsSpent," PTS"]}),v.jsx("td",{className:"px-10 py-6 whitespace-nowrap text-slate-400 text-sm font-bold",children:F.timestamp?new Date(F.timestamp).toLocaleDateString():""}),v.jsx("td",{className:"px-10 py-6 whitespace-nowrap",children:F.status==="pending"?v.jsx("button",{onClick:()=>Qi(F.id),className:"text-white bg-indigo-600 hover:bg-indigo-700 px-5 py-2.5 rounded-xl text-xs font-black transition-all shadow-xl shadow-indigo-100 active:scale-95",children:""}):v.jsxs("div",{className:"flex items-center gap-2 text-slate-300 font-black text-[10px] tracking-widest",children:[v.jsx(Wo,{size:14})," FINISHED"]})})]},F.id)}catch(Ue){return console.error("Row render error",Ue),null}})})]})})]}),n==="banners"&&v.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[v.jsxs("div",{className:"flex justify-between items-center mb-8",children:[v.jsxs("h2",{className:"text-3xl font-black text-slate-800 flex items-center gap-3",children:[v.jsx(mx,{className:"text-indigo-600"})," "]}),v.jsxs("button",{onClick:()=>rn(!At),className:"bg-indigo-600 text-white px-5 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100",children:[v.jsx(Pl,{size:20})," "]})]}),At&&v.jsxs("div",{className:"bg-slate-50 p-6 rounded-2xl mb-8 border border-slate-200 animate-in fade-in",children:[v.jsx("h3",{className:"font-black text-slate-700 mb-4",children:""}),v.jsxs("div",{className:"flex flex-col gap-4",children:[v.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-start",children:[v.jsxs("label",{className:"flex-1 w-full flex items-center justify-center gap-2 p-10 rounded-[2rem] border-2 border-dashed border-slate-300 hover:border-indigo-400 hover:bg-indigo-50 transition-all cursor-pointer font-bold text-slate-500 hover:text-indigo-600",children:[v.jsx(p1,{size:24}),nn?"":" (500KB)",v.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:_r})]}),v.jsxs("div",{className:"w-full md:w-64 space-y-4",children:[v.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-widest",children:" ()"}),v.jsx("input",{list:"banner-tags",value:As,onChange:F=>qr(F.target.value),placeholder:"...",className:"w-full p-4 rounded-2xl border-2 border-slate-100 font-bold text-slate-700 outline-none focus:border-indigo-500 transition-all shadow-sm"}),v.jsxs("datalist",{id:"banner-tags",children:[v.jsx("option",{value:""}),v.jsx("option",{value:""}),v.jsx("option",{value:""}),v.jsx("option",{value:""}),v.jsx("option",{value:""})]}),Xr&&v.jsx("img",{src:Xr,className:"h-32 w-full object-cover rounded-2xl border border-white shadow-lg",alt:"preview"})]})]}),v.jsx("button",{onClick:async()=>{nn?(await e8(nn,As),oi(""),qr(""),Kr(null),rn(!1),e("","success")):e("","error")},className:"bg-emerald-600 text-white px-6 py-4 rounded-2xl font-black text-lg hover:bg-emerald-700 shadow-xl shadow-emerald-100 active:scale-95",children:""})]})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6",children:[We.map(F=>v.jsxs("div",{className:"relative group rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-all",children:[v.jsx("img",{src:F.imageUrl,alt:"banner",className:"w-full h-48 object-cover"}),v.jsx("div",{className:"absolute top-4 left-4",children:v.jsx("span",{className:"bg-indigo-600/90 backdrop-blur text-white px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-wider shadow-lg",children:F.tag||""})}),v.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-all flex items-center justify-center",children:v.jsx("button",{onClick:async()=>{confirm("")&&(await t8(F.id),e("","success"))},className:"bg-white text-rose-500 px-6 py-2 rounded-xl font-black hover:bg-rose-50",children:" "})})]},F.id)),We.length===0&&v.jsx("div",{className:"col-span-full py-12 text-center text-slate-400 font-bold bg-slate-50 rounded-2xl border border-slate-200 border-dashed",children:""})]})]}),n==="missions"&&v.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[v.jsxs("div",{className:"flex justify-between items-center mb-8",children:[v.jsxs("h2",{className:"text-3xl font-black text-slate-800 flex items-center gap-3",children:[v.jsx(Zc,{className:"text-indigo-600"})," "]}),v.jsxs("button",{onClick:()=>Dr(!Jt),className:"bg-indigo-600 text-white px-5 py-3 rounded-xl font-bold flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100",children:[v.jsx(Pl,{size:18})," "]})]}),Jt&&v.jsxs("form",{onSubmit:Mi,className:"bg-slate-50 p-6 rounded-2xl mb-8 border border-slate-200 animate-in fade-in",children:[v.jsx("h3",{className:"font-black text-slate-700 mb-4",children:""}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[v.jsx("input",{placeholder:"",value:re,onChange:F=>Ae(F.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"}),v.jsx("input",{placeholder:"",type:"number",value:Be,onChange:F=>ke(F.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500"}),v.jsxs("select",{value:nt,onChange:F=>Me(F.target.value),className:"p-3 rounded-xl border border-slate-200 font-bold outline-none focus:ring-2 focus:ring-indigo-500",children:[v.jsx("option",{value:"normal",children:""}),v.jsx("option",{value:"challenge",children:""}),v.jsx("option",{value:"hard",children:""})]}),v.jsxs("div",{className:"flex items-center gap-2 p-3 bg-white rounded-xl border border-slate-200",children:[v.jsx(au,{size:18,className:"text-slate-400"}),v.jsx("input",{type:"datetime-local",value:_t,onChange:F=>Ct(F.target.value),className:"font-bold outline-none text-slate-600 w-full",placeholder:" ()"})]})]}),v.jsxs("div",{className:"flex justify-end gap-3",children:[v.jsx("button",{type:"button",onClick:()=>Dr(!1),className:"px-4 py-2 rounded-xl font-bold text-slate-400 hover:bg-slate-200 transition-all",children:""}),v.jsx("button",{type:"submit",className:"bg-indigo-600 text-white px-6 py-2 rounded-xl font-bold hover:bg-indigo-700 transition-all shadow-lg",children:""})]})]}),v.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[K.length===0&&v.jsx("div",{className:"text-center py-12 text-slate-400 font-bold bg-slate-50 rounded-2xl border border-slate-100 border-dashed",children:""}),K.map(F=>v.jsxs("div",{className:`flex flex-col md:flex-row md:items-center justify-between p-6 rounded-2xl border transition-all ${F.isActive?"bg-white border-slate-100 shadow-sm":"bg-slate-50 border-slate-100 opacity-60"}`,children:[v.jsxs("div",{className:"flex items-center gap-4 mb-4 md:mb-0",children:[v.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center font-black text-lg shrink-0 ${F.type==="normal"?"bg-emerald-100 text-emerald-600":F.type==="challenge"?"bg-orange-100 text-orange-600":"bg-rose-100 text-rose-600"}`,children:F.type==="normal"?"N":F.type==="challenge"?"C":"H"}),v.jsxs("div",{children:[v.jsxs("h3",{className:"font-black text-lg text-slate-800 flex items-center gap-2",children:[F.title,!F.isActive&&v.jsx("span",{className:"text-[10px] bg-slate-200 text-slate-500 px-2 py-0.5 rounded-full",children:""})]}),v.jsxs("p",{className:"text-slate-400 text-sm font-bold flex items-center gap-2",children:[v.jsxs("span",{className:"text-indigo-500",children:[F.points," PTS"]}),"  ",F.description,F.deadline&&v.jsxs("span",{className:"flex items-center gap-1 text-amber-500 ml-2",children:[v.jsx(au,{size:14})," ",new Date(F.deadline).toLocaleString()," "]})]})]})]}),v.jsx("button",{onClick:()=>yi(F.id),className:`px-4 py-2 rounded-xl font-black text-xs transition-all whitespace-nowrap ${F.isActive?"bg-rose-50 text-rose-600 hover:bg-rose-100":"bg-emerald-50 text-emerald-600 hover:bg-emerald-100"}`,children:F.isActive?"":""})]},F.id))]})]}),n==="wishes"&&v.jsxs("div",{className:"bg-white rounded-[3rem] p-12 border border-slate-100 shadow-xl animate-in slide-in-from-bottom-4",children:[v.jsxs("h2",{className:"text-3xl font-black text-slate-800 mb-8 flex items-center gap-3",children:[v.jsx(Kh,{className:"text-pink-500"})," "]}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:ae.length===0?v.jsx("div",{className:"col-span-full py-20 text-center text-slate-400 font-bold",children:""}):ae.map(F=>{var Je;return v.jsxs("div",{className:"bg-slate-50 p-6 rounded-[2.5rem] border border-slate-100 relative group",children:[v.jsx("button",{onClick:()=>Ds(F.id),className:"absolute top-4 right-4 p-2 bg-white rounded-full text-slate-300 hover:text-rose-500 hover:shadow-md transition-all opacity-0 group-hover:opacity-100",children:v.jsx(Ph,{size:18})}),v.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[v.jsx("img",{src:F.userAvatar,className:"w-12 h-12 rounded-full border-2 border-white shadow-sm",alt:F.userName}),v.jsxs("div",{children:[v.jsx("h4",{className:"font-black text-slate-800",children:F.userName}),v.jsx("p",{className:"text-[10px] text-slate-400 font-bold",children:new Date(F.timestamp).toLocaleString()})]})]}),v.jsxs("h3",{className:"text-xl font-black text-slate-800 mb-2",children:["",F.itemName]}),v.jsxs("p",{className:"text-slate-500 text-sm mb-6 leading-relaxed italic",children:['"',F.description,'"']}),v.jsxs("div",{className:"flex items-center gap-2 text-pink-500 font-black text-sm",children:[v.jsx(Kh,{size:16,fill:"currentColor"})," ",((Je=F.likedBy)==null?void 0:Je.length)||0," "]})]},F.id)})})]}),u&&v.jsxs("div",{className:"fixed inset-0 z-[150] bg-slate-900/95 backdrop-blur-xl flex flex-col items-center justify-center p-8",children:[v.jsxs("div",{className:"relative w-full max-w-lg aspect-square border-8 border-white/5 rounded-[5rem] overflow-hidden shadow-[0_0_100px_rgba(79,70,229,0.3)]",children:[v.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-900 via-indigo-900/20 to-slate-900 flex items-center justify-center",children:v.jsxs("div",{className:"text-center",children:[v.jsx(JT,{size:140,className:"mx-auto mb-10 animate-pulse text-indigo-400"}),v.jsx("p",{className:"text-3xl font-black text-white mb-4 tracking-tight",children:"..."}),v.jsx("p",{className:"text-indigo-300 font-bold tracking-widest uppercase text-xs",children:"AI Computer Vision Active"})]})}),v.jsx("div",{className:"absolute top-0 left-0 w-full h-3 bg-indigo-400 shadow-[0_0_50px_rgba(129,140,248,1)] animate-scan-line"})]}),v.jsxs("button",{onClick:()=>d(!1),className:"mt-16 bg-white/5 hover:bg-white/10 text-white px-12 py-5 rounded-[2rem] font-black transition-all border border-white/10 flex items-center gap-4 text-lg backdrop-blur",children:[v.jsx(uo,{size:24})," "]}),v.jsx("style",{children:`
            @keyframes scan-line {
              0% { top: 0% }
              100% { top: 100% }
            }
            .animate-scan-line {
              animation: scan-line 3s linear infinite;
            }
          `})]}),He&&v.jsx("div",{className:"fixed inset-0 z-[160] flex items-center justify-center p-4 bg-slate-900/70 backdrop-blur-2xl",children:v.jsxs("div",{className:"bg-white rounded-[4rem] max-w-md w-full p-12 shadow-[0_0_80px_rgba(0,0,0,0.5)] animate-in zoom-in-95 duration-200",children:[v.jsx("div",{className:"bg-emerald-50 w-24 h-24 rounded-[2rem] flex items-center justify-center text-emerald-600 mb-10 mx-auto shadow-inner",children:v.jsx(sf,{size:48})}),v.jsx("h2",{className:"text-3xl font-black text-slate-800 text-center mb-10 tracking-tight",children:""}),v.jsxs("div",{className:"bg-slate-50 rounded-[2.5rem] p-8 space-y-6 mb-12 border border-slate-100 shadow-inner",children:[v.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-slate-200/50",children:[v.jsx("span",{className:"text-slate-400 text-[10px] font-black uppercase tracking-widest",children:""}),v.jsx("span",{className:"font-black text-slate-800 text-xl",children:(bn=b.find(F=>F.id===He.userId))==null?void 0:bn.name})]}),v.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-slate-200/50",children:[v.jsx("span",{className:"text-slate-400 text-[10px] font-black uppercase tracking-widest",children:""}),v.jsx("span",{className:"font-black text-slate-800 text-xl",children:He.productName})]}),v.jsxs("div",{className:"flex justify-between items-center py-2",children:[v.jsx("span",{className:"text-slate-400 text-[10px] font-black uppercase tracking-widest",children:""}),v.jsxs("span",{className:"font-black text-indigo-600 text-2xl",children:[He.pointsSpent," ",v.jsx("span",{className:"text-xs font-bold text-indigo-400",children:"PTS"})]})]})]}),v.jsxs("div",{className:"flex flex-col gap-4",children:[v.jsxs("button",{onClick:()=>Qi(He.id),className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-6 rounded-2xl transition-all shadow-2xl shadow-indigo-100 flex items-center justify-center gap-4 text-xl active:scale-95",children:[v.jsx(Wo,{size:28}),""]}),v.jsx("button",{onClick:()=>ot(null),className:"w-full bg-slate-100 text-slate-600 font-bold py-5 rounded-2xl hover:bg-slate-200 transition-all text-lg",children:""})]})]})})]})},SR=30,h1=SR*24*60*60*1e3,IR=({user:r,onUserUpdate:e})=>{const{showAlert:n}=tc(),[o,u]=ie.useState([]),[d,y]=ie.useState(!1),[T,b]=ie.useState(""),[_,S]=ie.useState(""),[I,M]=ie.useState(null),V=o.filter(ae=>ae.userId===r.id).sort((ae,ee)=>ee.timestamp-ae.timestamp)[0],K=V&&Date.now()-V.timestamp<h1;ie.useEffect(()=>{const ae=_A(ee=>{u(ee.sort((fe,je)=>je.timestamp-fe.timestamp))});return()=>ae()},[]),ie.useEffect(()=>{const ae=()=>{if(!V)return null;const fe=V.timestamp+h1-Date.now();return fe<=0?null:{d:Math.floor(fe/864e5),h:Math.floor(fe/36e5%24),m:Math.floor(fe/1e3/60%60),s:Math.floor(fe/1e3%60)}},ee=setInterval(()=>{M(ae())},1e3);return M(ae()),()=>clearInterval(ee)},[V]);const W=async ae=>{if(ae.preventDefault(),!T.trim()||!_.trim())return;const ee={id:`wish_${Date.now()}`,userId:r.id,userName:r.name,userAvatar:r.avatar,itemName:T,description:_,timestamp:Date.now(),likedBy:[]};await Q6(ee),y(!1),b(""),S(""),n("","success")},q=async(ae,ee)=>{if(ee!=null&&ee.includes(r.id)){n("","info");return}await J6(ae,r.id)},le=async()=>{if(r.points<1e3){n(" 1000 ","error");return}if(confirm(" 1000 "))try{const ae={...r,points:r.points-1e3};await mu(ae),V&&await Z6(V.id,{timestamp:Date.now()-(h1+1e5)}),n("","success"),e()}catch{n("","error")}};return v.jsxs("div",{className:"space-y-8 pb-20",children:[v.jsxs("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[v.jsxs("div",{children:[v.jsxs("h1",{className:"text-3xl font-bold text-slate-800 flex items-center gap-3",children:[v.jsx(af,{className:"text-yellow-500"}),""]}),v.jsx("p",{className:"text-slate-500 mt-1",children:""})]}),v.jsxs("button",{onClick:()=>{K?n("","info"):y(!0)},className:`px-6 py-3 rounded-2xl font-black shadow-lg flex flex-col items-center gap-1 transition-all hover:scale-105 min-w-[200px] ${K?"bg-slate-100 text-slate-400 cursor-not-allowed border border-slate-200":"bg-indigo-600 text-white shadow-indigo-100 hover:bg-indigo-700"}`,children:[v.jsxs("div",{className:"flex items-center gap-2",children:[K?v.jsx(au,{size:18}):v.jsx(Pl,{size:20}),v.jsx("span",{children:K?"":""})]}),K&&I&&v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsxs("span",{className:"text-[10px] font-bold font-mono tracking-tight",children:[I.d," ",I.h," ",I.m," ",I.s,""]}),v.jsxs("button",{onClick:ae=>{ae.stopPropagation(),le()},className:"mt-2 bg-amber-100 text-amber-700 px-3 py-1 rounded-full text-[10px] font-black flex items-center gap-1 hover:bg-amber-200 transition-colors shadow-sm",children:[v.jsx(TT,{size:10}),"1000 PTS "]})]})]})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[o.map(ae=>{var ee,fe,je,De;return v.jsxs("div",{className:"bg-white rounded-[2rem] p-6 border border-slate-100 shadow-sm hover:shadow-md transition-all flex flex-col relative overflow-hidden group",children:[v.jsx("div",{className:"absolute -right-4 -top-4 w-24 h-24 bg-yellow-50 rounded-full blur-2xl group-hover:bg-yellow-100 transition-colors"}),v.jsxs("div",{className:"flex items-center gap-3 mb-4 z-10",children:[v.jsx("img",{src:ae.userAvatar,alt:ae.userName,className:"w-10 h-10 rounded-full border-2 border-white shadow-sm"}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm font-bold text-slate-700",children:ae.userName}),v.jsx("p",{className:"text-xs text-slate-400",children:new Date(ae.timestamp).toLocaleDateString()})]})]}),v.jsx("h3",{className:"text-xl font-black text-slate-800 mb-2 z-10",children:ae.itemName}),v.jsx("p",{className:"text-slate-500 text-sm mb-6 flex-1 z-10",children:ae.description}),v.jsx("div",{className:"flex items-center justify-between pt-4 border-t border-slate-50 z-10",children:v.jsxs("button",{onClick:()=>q(ae.id,ae.likedBy),className:`flex items-center gap-2 transition-colors group/like ${(ee=ae.likedBy)!=null&&ee.includes(r.id)?"text-pink-500":"text-slate-400 hover:text-pink-500"}`,children:[v.jsx("div",{className:`p-2 rounded-full transition-colors ${(fe=ae.likedBy)!=null&&fe.includes(r.id)?"bg-pink-50":"hover:bg-pink-50"}`,children:v.jsx(mC,{size:18,className:(je=ae.likedBy)!=null&&je.includes(r.id)?"fill-pink-500":""})}),v.jsxs("span",{className:"font-bold text-sm",children:[((De=ae.likedBy)==null?void 0:De.length)||0," "]})]})})]},ae.id)}),o.length===0&&v.jsxs("div",{className:"col-span-full py-20 text-center space-y-4",children:[v.jsx("div",{className:"w-20 h-20 bg-slate-50 rounded-full flex items-center justify-center mx-auto text-slate-300",children:v.jsx(Kh,{size:40})}),v.jsx("p",{className:"text-slate-400 font-bold",children:""})]})]}),d&&v.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:v.jsxs("div",{className:"bg-white rounded-[2.5rem] max-w-lg w-full p-8 shadow-2xl animate-in zoom-in-95 duration-200",children:[v.jsxs("div",{className:"flex justify-between items-center mb-8",children:[v.jsxs("h2",{className:"text-2xl font-black text-slate-800 flex items-center gap-2",children:[v.jsx(af,{className:"text-indigo-500"}),""]}),v.jsx("button",{onClick:()=>y(!1),className:"text-slate-400 hover:text-slate-600 bg-slate-50 p-2 rounded-full",children:v.jsx(uo,{size:24})})]}),v.jsxs("form",{onSubmit:W,className:"space-y-6",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-slate-700 font-bold mb-2 ml-1",children:""}),v.jsx("input",{type:"text",value:T,onChange:ae=>b(ae.target.value),placeholder:"AirPods Pro...",className:"w-full bg-slate-50 border border-slate-200 rounded-2xl px-5 py-4 font-bold text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all placeholder:font-medium",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-slate-700 font-bold mb-2 ml-1",children:""}),v.jsx("textarea",{value:_,onChange:ae=>S(ae.target.value),placeholder:"...",className:"w-full bg-slate-50 border border-slate-200 rounded-2xl px-5 py-4 font-medium text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all h-32 resize-none placeholder:font-medium",required:!0})]}),v.jsxs("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-5 rounded-[1.25rem] transition-all shadow-xl shadow-indigo-100 flex items-center justify-center gap-3 text-lg",children:[v.jsx(nC,{size:24}),""]})]})]})})]})},NR=({onLogin:r})=>{const{showAlert:e}=tc(),[n,o]=ie.useState("student"),[u,d]=ie.useState(!1),[y,T]=ie.useState(""),[b,_]=ie.useState(""),[S,I]=ie.useState(""),[M,V]=ie.useState(""),[K,W]=ie.useState(""),q=async fe=>{fe.preventDefault();const De=(await dA()).find(z=>z.name===y);if(!De){e("","error");return}if(De.password&&De.password!==b){e("","error");return}if(!De.isApproved){e("","info");return}await ql(De),e("","success"),r(De)},le=async fe=>{fe.preventDefault(),await S6(y,b,S)?(e("","success"),d(!1),_("")):e("","error")},ae=fe=>{fe.preventDefault(),M==="0957999"?(ql(Iy),e("","success"),r(Iy)):e("","error")},ee=fe=>{fe.preventDefault(),K.toLowerCase()==="aaa"?(ql(Ny),e("","success"),r(Ny)):e("","error")};return v.jsx("div",{className:"min-h-screen bg-[#f8fafc] flex items-center justify-center p-4",children:v.jsxs("div",{className:"bg-white max-w-4xl w-full rounded-[3rem] shadow-2xl overflow-hidden flex flex-col md:flex-row min-h-[600px]",children:[v.jsxs("div",{className:"bg-indigo-600 p-12 text-white md:w-5/12 flex flex-col justify-between relative overflow-hidden",children:[v.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-500 rounded-full -translate-y-1/2 translate-x-1/3 opacity-50"}),v.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-indigo-700 rounded-full translate-y-1/3 -translate-x-1/3 opacity-50"}),v.jsxs("div",{className:"relative z-10",children:[v.jsx("div",{className:"bg-white w-16 h-16 rounded-2xl flex items-center justify-center p-2 mb-6 shadow-xl",children:v.jsx("img",{src:"wenhong_logo.jpg",className:"w-full h-full rounded-xl object-cover",alt:"logo"})}),v.jsx("h1",{className:"text-4xl font-black tracking-tight mb-4",children:""}),v.jsx("p",{className:"text-indigo-100 font-medium text-lg leading-relaxed",children:""})]}),v.jsx("div",{className:"relative z-10 text-sm font-medium text-indigo-200",children:" 2026 Workshop System"})]}),v.jsxs("div",{className:"p-8 md:p-12 md:w-7/12 flex flex-col",children:[!u&&v.jsxs("div",{className:"flex gap-2 mb-10 overflow-x-auto pb-2",children:[v.jsxs("button",{onClick:()=>o("student"),className:`flex-1 min-w-[100px] py-3 rounded-xl font-bold text-sm transition-all flex flex-col items-center gap-1 ${n==="student"?"bg-indigo-50 text-indigo-600 ring-2 ring-indigo-500 ring-offset-2":"bg-slate-50 text-slate-400 hover:bg-slate-100"}`,children:[v.jsx(bC,{size:18})," "]}),v.jsxs("button",{onClick:()=>o("admin"),className:`flex-1 min-w-[100px] py-3 rounded-xl font-bold text-sm transition-all flex flex-col items-center gap-1 ${n==="admin"?"bg-indigo-50 text-indigo-600 ring-2 ring-indigo-500 ring-offset-2":"bg-slate-50 text-slate-400 hover:bg-slate-100"}`,children:[v.jsx(sf,{size:18})," "]}),v.jsxs("button",{onClick:()=>o("guest"),className:`flex-1 min-w-[100px] py-3 rounded-xl font-bold text-sm transition-all flex flex-col items-center gap-1 ${n==="guest"?"bg-indigo-50 text-indigo-600 ring-2 ring-500 ring-offset-2":"bg-slate-50 text-slate-400 hover:bg-slate-100"}`,children:[v.jsx(ST,{size:18})," "]})]}),!u&&n==="student"&&v.jsxs("form",{onSubmit:q,className:"space-y-6 flex-1 flex flex-col justify-center animate-in fade-in slide-in-from-right-4 duration-300",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-1",children:""}),v.jsx("p",{className:"text-slate-400",children:""})]}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),v.jsx("input",{type:"text",value:y,onChange:fe=>T(fe.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:""})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),v.jsx("input",{type:"password",value:b,onChange:fe=>_(fe.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:""})]})]}),v.jsx("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-4 rounded-2xl shadow-xl shadow-indigo-100 transition-all active:scale-95",children:""}),v.jsx("div",{className:"text-center",children:v.jsx("button",{type:"button",onClick:()=>d(!0),className:"text-indigo-500 font-bold hover:underline",children:""})})]}),u&&v.jsxs("form",{onSubmit:le,className:"space-y-6 flex-1 flex flex-col justify-center animate-in fade-in slide-in-from-right-4 duration-300",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-1",children:""}),v.jsx("p",{className:"text-slate-400",children:""})]}),v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),v.jsx("input",{type:"text",value:y,onChange:fe=>T(fe.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:"",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),v.jsx("input",{type:"password",value:b,onChange:fe=>_(fe.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:"",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),v.jsx("select",{value:S,onChange:fe=>I(fe.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl px-5 py-4 font-bold text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all appearance-none",children:F1.map(fe=>v.jsx("option",{value:fe,children:fe},fe))})]})]}),v.jsxs("button",{type:"submit",className:"w-full bg-slate-800 hover:bg-slate-900 text-white font-black py-4 rounded-2xl shadow-xl transition-all active:scale-95 flex items-center justify-center gap-2",children:[v.jsx(x1,{size:20}),""]}),v.jsx("div",{className:"text-center",children:v.jsx("button",{type:"button",onClick:()=>d(!1),className:"text-slate-400 font-bold hover:text-slate-600",children:""})})]}),!u&&n==="admin"&&v.jsxs("form",{onSubmit:ae,className:"space-y-6 flex-1 flex flex-col justify-center animate-in fade-in slide-in-from-right-4 duration-300",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-1",children:""}),v.jsx("p",{className:"text-slate-400",children:""})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),v.jsx("input",{type:"password",value:M,onChange:fe=>V(fe.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:"..."})]}),v.jsx("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-4 rounded-2xl shadow-xl shadow-indigo-100 transition-all active:scale-95",children:""})]}),!u&&n==="guest"&&v.jsxs("form",{onSubmit:ee,className:"space-y-6 flex-1 flex flex-col justify-center animate-in fade-in slide-in-from-right-4 duration-300",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-1",children:""}),v.jsx("p",{className:"text-slate-400",children:""})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:""}),v.jsx("input",{type:"text",value:K,onChange:fe=>W(fe.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 transition-all",placeholder:"..."})]}),v.jsx("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-4 rounded-2xl shadow-xl shadow-indigo-100 transition-all active:scale-95",children:""})]})]})]})})},RR=({user:r,currentRank:e,onSwitchUser:n})=>{const o=bo(),[u,d]=ie.useState(!1),y=[{path:"/",label:"",icon:UT},{path:"/shop",label:"",icon:oC},{path:"/wishes",label:"",icon:af},{path:"/history",label:"",icon:rf}];return r.role===ms.ADMIN&&y.push({path:"/admin",label:"",icon:sf}),v.jsxs("nav",{className:"bg-white border-r border-slate-200 w-full md:w-64 md:fixed md:inset-y-0 h-auto md:h-full z-50 shadow-sm",children:[v.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("img",{src:"wenhong_logo.jpg",className:"w-8 h-8 rounded-lg shadow-sm object-cover",alt:"logo"}),v.jsx("span",{className:"text-xl font-bold text-slate-800 tracking-tight",children:""})]}),v.jsx("button",{onClick:()=>d(!u),className:"md:hidden text-slate-600",children:u?v.jsx(uo,{}):v.jsx(GT,{})})]}),v.jsx("div",{className:`${u?"block":"hidden"} md:block p-4 space-y-2`,children:y.map(T=>{const b=T.icon,_=o.pathname===T.path;return v.jsxs(nf,{to:T.path,onClick:()=>d(!1),className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 ${_?"bg-indigo-50 text-indigo-700 font-bold shadow-sm":"text-slate-600 hover:bg-slate-50"}`,children:[v.jsx(b,{size:20}),v.jsx("span",{children:T.label})]},T.path)})}),v.jsxs("div",{className:`${u?"block":"hidden"} md:block absolute bottom-0 w-full p-6 border-t border-slate-100 bg-white`,children:[v.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[v.jsx("img",{src:r.avatar,className:"w-10 h-10 rounded-full border-2 border-slate-100 object-cover",alt:"avatar"}),v.jsxs("div",{className:"overflow-hidden",children:[v.jsx("p",{className:"font-bold text-slate-800 truncate text-sm",children:r.name}),v.jsxs("div",{className:`text-[9px] px-2 py-0.5 rounded-full inline-block text-white font-black ${e.color}`,children:[e.icon," ",e.name," Lv.",Math.floor(r.totalEarned/500)+1]})]})]}),v.jsxs("button",{onClick:n,className:"flex items-center gap-2 text-indigo-600 hover:text-indigo-800 transition-colors text-xs font-bold w-full bg-indigo-50 p-2 rounded-lg justify-center mb-2",children:[v.jsx(jT,{size:14}),v.jsx("span",{children:""})]}),v.jsxs(nf,{to:"/settings",className:"flex items-center gap-2 text-slate-400 hover:text-slate-600 transition-colors text-xs font-bold w-full p-2 justify-center",children:[v.jsx(iC,{size:14}),v.jsx("span",{children:""})]})]})]})},OR=()=>{const[r,e]=ie.useState(Ry()),n=r?po.reduce((d,y)=>r.totalEarned>=y.threshold?y:d,po[0]):po[0],o=()=>{const d=Ry();d&&e(d)},u=()=>{R6(),e(null)};return v.jsx(SC,{children:r?v.jsx(eT,{children:v.jsxs("div",{className:"min-h-screen flex flex-col md:flex-row bg-[#fbfcfd]",children:[v.jsx(RR,{user:r,currentRank:n,onSwitchUser:u}),v.jsx("main",{className:"flex-1 md:ml-64 p-4 md:p-8",children:v.jsx("div",{className:"max-w-6xl mx-auto",children:v.jsxs(Rv,{children:[v.jsx(qo,{path:"/",element:v.jsx(F8,{user:r,rank:n,onUserUpdate:o})}),v.jsx(qo,{path:"/shop",element:v.jsx(z8,{user:r,onUserUpdate:o})}),v.jsx(qo,{path:"/wishes",element:v.jsx(IR,{user:r,onUserUpdate:o})}),v.jsx(qo,{path:"/history",element:v.jsx(J8,{user:r})}),v.jsx(qo,{path:"/admin",element:v.jsx(CR,{onRefresh:o})}),v.jsx(qo,{path:"/settings",element:v.jsx(n8,{user:r,onUserUpdate:o})})]})})})]})}):v.jsx(NR,{onLogin:e})})},rb=document.getElementById("root");if(!rb)throw new Error("Could not find root element to mount to");const DR=D3.createRoot(rb);DR.render(v.jsx(er.StrictMode,{children:v.jsx(OR,{})}));
